{"items":[{"tags":["java","selenium-webdriver"],"comments":[{"owner":{"account_id":39208,"reputation":251220,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":0,"creation_date":1696752660,"post_id":77252765,"comment_id":136191657,"body_markdown":"Well, which command did you run?","body":"Well, which command did you run?"},{"owner":{"account_id":7693984,"reputation":6097,"user_id":5829191,"accept_rate":63,"display_name":"rozerro"},"score":0,"creation_date":1696759298,"post_id":77252765,"comment_id":136192186,"body_markdown":"@knittl `try {server.run(driver);} catch (Exception e) {\tlogger.warning(&quot;error in main block: &quot;.concat(e.getMessage())); captureScreenshot(driver, String.format(&quot;%s\\\\screenshots&quot;, System.getProperty(&quot;user.home&quot;))); logger.info(&quot;screenshot saved&quot;);} finally { ...` somehere before finally but right after `logger.warning`","body":"@knittl <code>try {server.run(driver);} catch (Exception e) {\tlogger.warning(&quot;error in main block: &quot;.concat(e.getMessage())); captureScreenshot(driver, String.format(&quot;%s\\\\screenshots&quot;, System.getProperty(&quot;user.home&quot;))); logger.info(&quot;screenshot saved&quot;);} finally { ...</code> somehere before finally but right after <code>logger.warning</code>"},{"owner":{"account_id":39208,"reputation":251220,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":0,"creation_date":1696759569,"post_id":77252765,"comment_id":136192209,"body_markdown":"So `server.run(driver)` (somewhere down the call stack) prints the message. Am I underthinking this question? If you remove that line, the message will not be printed; so this line is responsible for printing it. No? If not, what _exactly_ is the question here?","body":"So <code>server.run(driver)</code> (somewhere down the call stack) prints the message. Am I underthinking this question? If you remove that line, the message will not be printed; so this line is responsible for printing it. No? If not, what <i>exactly</i> is the question here?"}],"owner":{"account_id":7693984,"reputation":6097,"user_id":5829191,"accept_rate":63,"display_name":"rozerro"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1696751715,"creation_date":1696751715,"question_id":77252765,"body_markdown":"Which command produces a webdriver log like this?\r\n\r\n    System info: host: &#39;SOMEHOST&#39;, ip: &#39;1.1.1.1&#39;, os.name: &#39;Windows 8&#39;, os.arch: &#39;amd64&#39;, os.version: &#39;8.0&#39;, java.version: &#39;1.8.0_361&#39;\r\n    Driver info: org.openqa.selenium.firefox.FirefoxDriver\r\n    Capabilities {acceptInsecureCerts: true, browserName: firefox, browserVersion: 117.0.1, javascriptEnabled: true, moz:accessibilityChecks: false, moz:buildID: 20230912013654, moz:geckodriverVersion: 0.33.0, moz:headless: true, moz:platformVersion: 10.0, moz:processID: 1772, moz:profile: C:\\Users\\36B5~1\\AppData\\Loc..., moz:shutdownTimeout: 60000, moz:webdriverClick: true, moz:windowless: false, pageLoadStrategy: normal, platform: WINDOWS, platformName: WINDOWS, proxy: Proxy(), setWindowRect: true, strictFileInteractability: false, timeouts: {implicit: 0, pageLoad: 300000, script: 30000}, unhandledPromptBehavior: dismiss and notify}\r\n    Session ID: 137d5151-92d1-31af-970b-3a1db9d113b9","title":"Which command produces a webdriver log like this?","body":"<p>Which command produces a webdriver log like this?</p>\n<pre><code>System info: host: 'SOMEHOST', ip: '1.1.1.1', os.name: 'Windows 8', os.arch: 'amd64', os.version: '8.0', java.version: '1.8.0_361'\nDriver info: org.openqa.selenium.firefox.FirefoxDriver\nCapabilities {acceptInsecureCerts: true, browserName: firefox, browserVersion: 117.0.1, javascriptEnabled: true, moz:accessibilityChecks: false, moz:buildID: 20230912013654, moz:geckodriverVersion: 0.33.0, moz:headless: true, moz:platformVersion: 10.0, moz:processID: 1772, moz:profile: C:\\Users\\36B5~1\\AppData\\Loc..., moz:shutdownTimeout: 60000, moz:webdriverClick: true, moz:windowless: false, pageLoadStrategy: normal, platform: WINDOWS, platformName: WINDOWS, proxy: Proxy(), setWindowRect: true, strictFileInteractability: false, timeouts: {implicit: 0, pageLoad: 300000, script: 30000}, unhandledPromptBehavior: dismiss and notify}\nSession ID: 137d5151-92d1-31af-970b-3a1db9d113b9\n</code></pre>\n"},{"tags":["java","maven","visual-studio-code"],"comments":[{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":2,"creation_date":1696730808,"post_id":77251803,"comment_id":136190426,"body_markdown":"You mention you&#39;ve installed a VS Code extension to work _with_ Maven, but have you actually [installed Maven](https://maven.apache.org/)?","body":"You mention you&#39;ve installed a VS Code extension to work <i>with</i> Maven, but have you actually <a href=\"https://maven.apache.org/\" rel=\"nofollow noreferrer\">installed Maven</a>?"},{"owner":{"account_id":213468,"reputation":103493,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1696750850,"post_id":77251803,"comment_id":136191516,"body_markdown":"You might be better off using a real Java IDE like IntelliJ, Eclipse or NetBeans.","body":"You might be better off using a real Java IDE like IntelliJ, Eclipse or NetBeans."},{"owner":{"account_id":25311208,"reputation":7305,"user_id":19133920,"display_name":"JialeDu"},"score":0,"creation_date":1696841283,"post_id":77251803,"comment_id":136199677,"body_markdown":"This may have something to do with your maven. Can you show your maven installation?","body":"This may have something to do with your maven. Can you show your maven installation?"}],"owner":{"account_id":19570468,"reputation":1,"user_id":14321743,"display_name":"king342"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1696750819,"creation_date":1696720818,"question_id":77251803,"body_markdown":"I included a pom.xml file found online for OpenCSV (shown below)\r\n\r\n[enter image description here][1]\r\n\r\nI downloaded the recent Java extension to use Maven, then I open Maven\r\n\r\nWhen I try click install on the csvreader file under Maven project, it gives the following error: \r\n\r\n&gt; Maven executable not found in PATH. Please specify &quot;maven.executable.path&quot;.\r\n\r\nHow do I fix this error and use the library?\r\n\r\n(FYI, I am a beginner to Java, and I really want to use OpenCSV library function) \r\n\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n  xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n  &lt;groupId&gt;com.quadmeup&lt;/groupId&gt;\r\n  &lt;artifactId&gt;csv-reader&lt;/artifactId&gt;\r\n  &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n\r\n  &lt;name&gt;csv-reader&lt;/name&gt;\r\n  &lt;!-- FIXME change it to the project&#39;s website --&gt;\r\n  &lt;url&gt;http://www.example.com&lt;/url&gt;\r\n\r\n  &lt;properties&gt;\r\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n    &lt;maven.compiler.source&gt;1.7&lt;/maven.compiler.source&gt;\r\n    &lt;maven.compiler.target&gt;1.7&lt;/maven.compiler.target&gt;\r\n  &lt;/properties&gt;\r\n\r\n  &lt;dependencies&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;junit&lt;/groupId&gt;\r\n      &lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n      &lt;version&gt;4.11&lt;/version&gt;\r\n      &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n\r\n    &lt;!-- https://mvnrepository.com/artifact/com.opencsv/opencsv --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.opencsv&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;opencsv&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;5.7.1&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n  &lt;/dependencies&gt;\r\n\r\n  &lt;build&gt;\r\n    &lt;pluginManagement&gt;&lt;!-- lock down plugins versions to avoid using Maven defaults (may be moved to parent pom) --&gt;\r\n      &lt;plugins&gt;\r\n        &lt;!-- clean lifecycle, see https://maven.apache.org/ref/current/maven-core/lifecycles.html#clean_Lifecycle --&gt;\r\n        &lt;plugin&gt;\r\n          &lt;artifactId&gt;maven-clean-plugin&lt;/artifactId&gt;\r\n          &lt;version&gt;3.1.0&lt;/version&gt;\r\n        &lt;/plugin&gt;\r\n        &lt;!-- default lifecycle, jar packaging: see https://maven.apache.org/ref/current/maven-core/default-bindings.html#Plugin_bindings_for_jar_packaging --&gt;\r\n        &lt;plugin&gt;\r\n          &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\r\n          &lt;version&gt;3.0.2&lt;/version&gt;\r\n        &lt;/plugin&gt;\r\n        &lt;plugin&gt;\r\n          &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n          &lt;version&gt;3.8.0&lt;/version&gt;\r\n        &lt;/plugin&gt;\r\n        &lt;plugin&gt;\r\n          &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n          &lt;version&gt;2.22.1&lt;/version&gt;\r\n        &lt;/plugin&gt;\r\n        &lt;plugin&gt;\r\n          &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\r\n          &lt;version&gt;3.0.2&lt;/version&gt;\r\n        &lt;/plugin&gt;\r\n        &lt;plugin&gt;\r\n          &lt;artifactId&gt;maven-install-plugin&lt;/artifactId&gt;\r\n          &lt;version&gt;2.5.2&lt;/version&gt;\r\n        &lt;/plugin&gt;\r\n        &lt;plugin&gt;\r\n          &lt;artifactId&gt;maven-deploy-plugin&lt;/artifactId&gt;\r\n          &lt;version&gt;2.8.2&lt;/version&gt;\r\n        &lt;/plugin&gt;\r\n        &lt;!-- site lifecycle, see https://maven.apache.org/ref/current/maven-core/lifecycles.html#site_Lifecycle --&gt;\r\n        &lt;plugin&gt;\r\n          &lt;artifactId&gt;maven-site-plugin&lt;/artifactId&gt;\r\n          &lt;version&gt;3.7.1&lt;/version&gt;\r\n        &lt;/plugin&gt;\r\n        &lt;plugin&gt;\r\n          &lt;artifactId&gt;maven-project-info-reports-plugin&lt;/artifactId&gt;\r\n          &lt;version&gt;3.0.0&lt;/version&gt;\r\n        &lt;/plugin&gt;\r\n      &lt;/plugins&gt;\r\n    &lt;/pluginManagement&gt;\r\n  &lt;/build&gt;\r\n&lt;/project&gt;\r\n```\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/fi3Mf.png","title":"How to use Java OpenCSV Library in Visual Studio Code","body":"<p>I included a pom.xml file found online for OpenCSV (shown below)</p>\n<p><a href=\"https://i.stack.imgur.com/fi3Mf.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>I downloaded the recent Java extension to use Maven, then I open Maven</p>\n<p>When I try click install on the csvreader file under Maven project, it gives the following error:</p>\n<blockquote>\n<p>Maven executable not found in PATH. Please specify &quot;maven.executable.path&quot;.</p>\n</blockquote>\n<p>How do I fix this error and use the library?</p>\n<p>(FYI, I am a beginner to Java, and I really want to use OpenCSV library function)</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n  xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n  &lt;groupId&gt;com.quadmeup&lt;/groupId&gt;\n  &lt;artifactId&gt;csv-reader&lt;/artifactId&gt;\n  &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n\n  &lt;name&gt;csv-reader&lt;/name&gt;\n  &lt;!-- FIXME change it to the project's website --&gt;\n  &lt;url&gt;http://www.example.com&lt;/url&gt;\n\n  &lt;properties&gt;\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;maven.compiler.source&gt;1.7&lt;/maven.compiler.source&gt;\n    &lt;maven.compiler.target&gt;1.7&lt;/maven.compiler.target&gt;\n  &lt;/properties&gt;\n\n  &lt;dependencies&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;junit&lt;/groupId&gt;\n      &lt;artifactId&gt;junit&lt;/artifactId&gt;\n      &lt;version&gt;4.11&lt;/version&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n\n    &lt;!-- https://mvnrepository.com/artifact/com.opencsv/opencsv --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.opencsv&lt;/groupId&gt;\n            &lt;artifactId&gt;opencsv&lt;/artifactId&gt;\n            &lt;version&gt;5.7.1&lt;/version&gt;\n        &lt;/dependency&gt;\n\n  &lt;/dependencies&gt;\n\n  &lt;build&gt;\n    &lt;pluginManagement&gt;&lt;!-- lock down plugins versions to avoid using Maven defaults (may be moved to parent pom) --&gt;\n      &lt;plugins&gt;\n        &lt;!-- clean lifecycle, see https://maven.apache.org/ref/current/maven-core/lifecycles.html#clean_Lifecycle --&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-clean-plugin&lt;/artifactId&gt;\n          &lt;version&gt;3.1.0&lt;/version&gt;\n        &lt;/plugin&gt;\n        &lt;!-- default lifecycle, jar packaging: see https://maven.apache.org/ref/current/maven-core/default-bindings.html#Plugin_bindings_for_jar_packaging --&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\n          &lt;version&gt;3.0.2&lt;/version&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n          &lt;version&gt;3.8.0&lt;/version&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n          &lt;version&gt;2.22.1&lt;/version&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\n          &lt;version&gt;3.0.2&lt;/version&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-install-plugin&lt;/artifactId&gt;\n          &lt;version&gt;2.5.2&lt;/version&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-deploy-plugin&lt;/artifactId&gt;\n          &lt;version&gt;2.8.2&lt;/version&gt;\n        &lt;/plugin&gt;\n        &lt;!-- site lifecycle, see https://maven.apache.org/ref/current/maven-core/lifecycles.html#site_Lifecycle --&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-site-plugin&lt;/artifactId&gt;\n          &lt;version&gt;3.7.1&lt;/version&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-project-info-reports-plugin&lt;/artifactId&gt;\n          &lt;version&gt;3.0.0&lt;/version&gt;\n        &lt;/plugin&gt;\n      &lt;/plugins&gt;\n    &lt;/pluginManagement&gt;\n  &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n"},{"tags":["java","selenium-webdriver","screenshot"],"comments":[{"owner":{"account_id":6077817,"reputation":1213,"user_id":4744568,"display_name":"pcalkins"},"score":0,"creation_date":1696877161,"post_id":77252610,"comment_id":136206579,"body_markdown":"Use WebDriverWaits with Explicit Conditions:  https://www.selenium.dev/documentation/webdriver/waits/","body":"Use WebDriverWaits with Explicit Conditions:  <a href=\"https://www.selenium.dev/documentation/webdriver/waits/\" rel=\"nofollow noreferrer\">selenium.dev/documentation/webdriver/waits</a>"}],"owner":{"account_id":29574529,"reputation":1,"user_id":22665859,"display_name":"PESCO Bill"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1696750306,"creation_date":1696747973,"question_id":77252610,"body_markdown":"I want to take screenshots of webpages using Selenium WebDriver. While the basic functionality seems to work, there would be an issue with capturing a specific type of webpage of a [pesco billing](https://pescobilling.pk/) site. Here&#39;s the problem.\r\n\r\nI am able to take screenshots of most webpages without any problems. However, there are some webpages with certain dynamic elements or overlays, the resulting screenshot would appears to be missing those elements. It&#39;s as if the screenshot would be taken before these dynamic elements are fully loaded.\r\n\r\nHere&#39;s a simplified version of the Java code:\r\n\r\n```java\r\nimport org.openqa.selenium.WebDriver;\r\nimport org.openqa.selenium.chrome.ChromeDriver;\r\nimport org.openqa.selenium.OutputType;\r\nimport org.openqa.selenium.TakesScreenshot;\r\n\r\npublic class WebpageScreenshot {\r\n    public static void main(String[] args) {\r\n        System.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;path/to/chromedriver.exe&quot;);\r\n        WebDriver driver = new ChromeDriver();\r\n\r\n        try {\r\n            driver.get(&quot;https://pescobilling.pk/&quot;);\r\n\r\n            // Sleep for a few seconds to allow dynamic elements to load (not a good practice)\r\n            Thread.sleep(5000);\r\n\r\n            // Take the screenshot\r\n            File screenshotFile = ((TakesScreenshot) driver).getScreenshotAs(OutputType.FILE);\r\n\r\n            // Save the screenshot\r\n            // ...\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        } finally {\r\n            driver.quit();\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nI believe the issue is related to the timing of taking the screenshot, as some elements are loaded dynamically after the initial page load. In the code snippet above, I added a Thread.sleep to pause execution, but this is not an ideal solution, and it doesn&#39;t always work perfectly.\r\n\r\nWhat is the recommended approach to ensure that the screenshot is taken after all dynamic elements have loaded? Is there a more reliable way to capture the entire webpage, including these dynamic elements?\r\n\r\n\r\n","title":"Issue with taking screenshots using Selenium WebDriver","body":"<p>I want to take screenshots of webpages using Selenium WebDriver. While the basic functionality seems to work, there would be an issue with capturing a specific type of webpage of a <a href=\"https://pescobilling.pk/\" rel=\"nofollow noreferrer\">pesco billing</a> site. Here's the problem.</p>\n<p>I am able to take screenshots of most webpages without any problems. However, there are some webpages with certain dynamic elements or overlays, the resulting screenshot would appears to be missing those elements. It's as if the screenshot would be taken before these dynamic elements are fully loaded.</p>\n<p>Here's a simplified version of the Java code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import org.openqa.selenium.WebDriver;\nimport org.openqa.selenium.chrome.ChromeDriver;\nimport org.openqa.selenium.OutputType;\nimport org.openqa.selenium.TakesScreenshot;\n\npublic class WebpageScreenshot {\n    public static void main(String[] args) {\n        System.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;path/to/chromedriver.exe&quot;);\n        WebDriver driver = new ChromeDriver();\n\n        try {\n            driver.get(&quot;https://pescobilling.pk/&quot;);\n\n            // Sleep for a few seconds to allow dynamic elements to load (not a good practice)\n            Thread.sleep(5000);\n\n            // Take the screenshot\n            File screenshotFile = ((TakesScreenshot) driver).getScreenshotAs(OutputType.FILE);\n\n            // Save the screenshot\n            // ...\n        } catch (Exception e) {\n            e.printStackTrace();\n        } finally {\n            driver.quit();\n        }\n    }\n}\n</code></pre>\n<p>I believe the issue is related to the timing of taking the screenshot, as some elements are loaded dynamically after the initial page load. In the code snippet above, I added a Thread.sleep to pause execution, but this is not an ideal solution, and it doesn't always work perfectly.</p>\n<p>What is the recommended approach to ensure that the screenshot is taken after all dynamic elements have loaded? Is there a more reliable way to capture the entire webpage, including these dynamic elements?</p>\n"},{"tags":["java","linux"],"comments":[{"owner":{"account_id":24281583,"reputation":168,"user_id":18228017,"display_name":"Cayman"},"score":0,"creation_date":1645721085,"post_id":71255340,"comment_id":125952182,"body_markdown":"For java version:\njava -version\nFor java primary compiler:\njavac -version\n\nyou can run:\nwhereis java\nSo you find the java path / or you can: sudo update-alternatives --config java so it list all the java installations and you can select the default","body":"For java version: java -version For java primary compiler: javac -version  you can run: whereis java So you find the java path / or you can: sudo update-alternatives --config java so it list all the java installations and you can select the default"},{"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"score":0,"creation_date":1645722355,"post_id":71255340,"comment_id":125952679,"body_markdown":"what mechanisms on your server are in place to start a java process that &quot;comes for a second&quot;? usually Java is used for things like long running servers like tomcat, that sit there and maybe launch another process, but all with the same Java version.\n\nDo you really have cron jobs or something like that, which are executed directly with Java?","body":"what mechanisms on your server are in place to start a java process that &quot;comes for a second&quot;? usually Java is used for things like long running servers like tomcat, that sit there and maybe launch another process, but all with the same Java version.  Do you really have cron jobs or something like that, which are executed directly with Java?"}],"answers":[{"tags":[],"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1645721246,"creation_date":1645721246,"answer_id":71255433,"question_id":71255340,"body_markdown":"The brute force solution (will include downtime and a lot of work):\r\n\r\n 1. Prepare a documentation of all installed services, either create it or get it at hand\r\n 2. Remove or disable all versions of Java\r\n 3. Start one service after another\r\n 4. Record all errors happening\r\n 5. Fill in the necessary Java version for each service in the documentation (probably you can find out by the logs which Java version is necessary for what service)\r\n 6. Reinstall or enable one version of Java at a time - probably best the one for the service you just were trying to bring up again\r\n\r\nRepeat for all services / java versions.\r\n\r\nAnd for the future: keep records of the services that are running on your server and which dependencies they have.","title":"Finding installed Java versions actually being used on Linux servers?","body":"<p>The brute force solution (will include downtime and a lot of work):</p>\n<ol>\n<li>Prepare a documentation of all installed services, either create it or get it at hand</li>\n<li>Remove or disable all versions of Java</li>\n<li>Start one service after another</li>\n<li>Record all errors happening</li>\n<li>Fill in the necessary Java version for each service in the documentation (probably you can find out by the logs which Java version is necessary for what service)</li>\n<li>Reinstall or enable one version of Java at a time - probably best the one for the service you just were trying to bring up again</li>\n</ol>\n<p>Repeat for all services / java versions.</p>\n<p>And for the future: keep records of the services that are running on your server and which dependencies they have.</p>\n"},{"tags":[],"owner":{"account_id":24282095,"reputation":24,"user_id":18228447,"display_name":"Sandeepp"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1645724122,"creation_date":1645722786,"answer_id":71255754,"question_id":71255340,"body_markdown":"Running a ansible playbook and capturing the output to a excel sheet would be a good starting point.\r\n\r\n","title":"Finding installed Java versions actually being used on Linux servers?","body":"<p>Running a ansible playbook and capturing the output to a excel sheet would be a good starting point.</p>\n"},{"tags":[],"owner":{"account_id":17947811,"reputation":76,"user_id":13041661,"display_name":"pete_bc"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1645744567,"creation_date":1645744567,"answer_id":71259333,"question_id":71255340,"body_markdown":"Here is a bash script that might work for you:\r\n\r\n    #!/bin/bash\r\n    while true\r\n    do\r\n        ps -aux | grep java | awk &#39;{print $2}&#39; | xargs -I{} lsof -p {} | grep &#39; txt &#39; | awk &#39;{print $9}&#39; &gt;&gt; log\r\n        sort -u log &gt; sorter\r\n        cat sorter &gt; log\r\n        sleep .2\r\n    done\r\n\r\nEvery 200 milliseconds, it feeds the process id of every currently running process with &quot;java&quot; in it as the argument to the list-open-files utility, filters that list to include only executable files ( &quot;txt&quot; ), and appends that to a file called log. Then it writes the unique strings from that file to a file called sorter and then writes that back to the log file.\r\n\r\nI executed a simple java Console app a few times with two different jvms while the script ran, and here&#39;s the contents of the log file:\r\n\r\n    /usr/lib/jvm/java-11-openjdk-amd64/bin/java\r\n    /usr/lib/jvm/java-8-openjdk-amd64/jre/bin/java","title":"Finding installed Java versions actually being used on Linux servers?","body":"<p>Here is a bash script that might work for you:</p>\n<pre><code>#!/bin/bash\nwhile true\ndo\n    ps -aux | grep java | awk '{print $2}' | xargs -I{} lsof -p {} | grep ' txt ' | awk '{print $9}' &gt;&gt; log\n    sort -u log &gt; sorter\n    cat sorter &gt; log\n    sleep .2\ndone\n</code></pre>\n<p>Every 200 milliseconds, it feeds the process id of every currently running process with &quot;java&quot; in it as the argument to the list-open-files utility, filters that list to include only executable files ( &quot;txt&quot; ), and appends that to a file called log. Then it writes the unique strings from that file to a file called sorter and then writes that back to the log file.</p>\n<p>I executed a simple java Console app a few times with two different jvms while the script ran, and here's the contents of the log file:</p>\n<pre><code>/usr/lib/jvm/java-11-openjdk-amd64/bin/java\n/usr/lib/jvm/java-8-openjdk-amd64/jre/bin/java\n</code></pre>\n"},{"tags":[],"owner":{"account_id":142522,"reputation":13,"user_id":4060207,"display_name":"jitter"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696748895,"creation_date":1696732868,"answer_id":77252124,"question_id":71255340,"body_markdown":"My answer has two parts.\r\n\r\n 1. See answer from @pete_bc for his script.\r\n\r\n 2. Take the output of that script then do a for loop that does something like:\r\n\r\nfor javaFullpath in &quot;${yourSortedListOfJavaPaths}&quot;; do\r\n    listOfJavaVersions+=( $(&quot;$javaFullpath&quot; -version 2&gt;&amp;1 | awk -F &#39;&quot;&#39; &#39;/version/ {print $2}&#39;) )\r\ndone\r\n\r\nSo, to put it all together, this requires bash 4.4 or later because use of mapfile:\r\n\r\n    #!/bin/bash\r\n    TIMETOCAPTURE=86400 #seconds in 1 day\r\n    SECONDS=0\r\n    \r\n    #determine the executable paths of the javas that are being used\r\n    while [[ $SECONDS -lt $TIMETOCAPTURE ]]; do\r\n        ps -aux | grep java | awk &#39;{print $2}&#39; | xargs -I{} lsof -p {} | grep &#39; txt &#39; | awk &#39;{print $9}&#39; &gt;&gt; log\r\n        sort -u log &gt; sorter\r\n        cat sorter &gt; log\r\n        sleep .2\r\n    done\r\n    \r\n    #determine their versions\r\n    mapfile -t sortedListOfJavaFullpaths &lt; log \r\n    for javaFullpath in &quot;${sortedListOfJavaFullpaths }&quot;; do\r\n        listOfJavaVersions+=( $(&quot;$javaFullpath&quot; -version 2&gt;&amp;1 | awk -F &#39;&quot;&#39; &#39;/version/ {print $2}&#39;) )\r\n    done\r\n\r\n","title":"Finding installed Java versions actually being used on Linux servers?","body":"<p>My answer has two parts.</p>\n<ol>\n<li><p>See answer from @pete_bc for his script.</p>\n</li>\n<li><p>Take the output of that script then do a for loop that does something like:</p>\n</li>\n</ol>\n<p>for javaFullpath in &quot;${yourSortedListOfJavaPaths}&quot;; do\nlistOfJavaVersions+=( $(&quot;$javaFullpath&quot; -version 2&gt;&amp;1 | awk -F '&quot;' '/version/ {print $2}') )\ndone</p>\n<p>So, to put it all together, this requires bash 4.4 or later because use of mapfile:</p>\n<pre><code>#!/bin/bash\nTIMETOCAPTURE=86400 #seconds in 1 day\nSECONDS=0\n\n#determine the executable paths of the javas that are being used\nwhile [[ $SECONDS -lt $TIMETOCAPTURE ]]; do\n    ps -aux | grep java | awk '{print $2}' | xargs -I{} lsof -p {} | grep ' txt ' | awk '{print $9}' &gt;&gt; log\n    sort -u log &gt; sorter\n    cat sorter &gt; log\n    sleep .2\ndone\n\n#determine their versions\nmapfile -t sortedListOfJavaFullpaths &lt; log \nfor javaFullpath in &quot;${sortedListOfJavaFullpaths }&quot;; do\n    listOfJavaVersions+=( $(&quot;$javaFullpath&quot; -version 2&gt;&amp;1 | awk -F '&quot;' '/version/ {print $2}') )\ndone\n</code></pre>\n"}],"owner":{"account_id":1048331,"reputation":19,"user_id":1052849,"display_name":"Fundoo"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":602,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":4,"score":0,"last_activity_date":1696748895,"creation_date":1645720823,"question_id":71255340,"body_markdown":"Our Linux servers (1500 of them) has multiple Java versions installed (from Java 1.5 to Java 17) and we are in process of cleaning it up. is there a way to find out which installed versions are actually being used?\r\n\r\nwe can take a snapshot of a process running at any point but this will miss the process which comes for a second and goes down. \r\n\r\nAnyway to automate capturing this data, we have options to run ansible playbooks etc.\r\n\r\nAny suggestions will be highly appreciated.  ","title":"Finding installed Java versions actually being used on Linux servers?","body":"<p>Our Linux servers (1500 of them) has multiple Java versions installed (from Java 1.5 to Java 17) and we are in process of cleaning it up. is there a way to find out which installed versions are actually being used?</p>\n<p>we can take a snapshot of a process running at any point but this will miss the process which comes for a second and goes down.</p>\n<p>Anyway to automate capturing this data, we have options to run ansible playbooks etc.</p>\n<p>Any suggestions will be highly appreciated.</p>\n"},{"tags":["c#","java","architecture","repository-pattern","unit-of-work"],"comments":[{"owner":{"account_id":1003582,"reputation":16210,"user_id":1017868,"accept_rate":78,"display_name":"MikeSW"},"score":1,"creation_date":1382601294,"post_id":19548531,"comment_id":29025554,"body_markdown":"If you&#39;re comfortable with the concept of eventual consistency, you can use domain events to implement the &#39;transaction&#39;. It&#39;s more domain driven, elegant and clean but you need to involve a service bus and make your handlers idempotent","body":"If you&#39;re comfortable with the concept of eventual consistency, you can use domain events to implement the &#39;transaction&#39;. It&#39;s more domain driven, elegant and clean but you need to involve a service bus and make your handlers idempotent"}],"answers":[{"tags":[],"owner":{"account_id":1116474,"reputation":2649,"user_id":1105687,"accept_rate":50,"display_name":"lightbricko"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1382550556,"creation_date":1382550556,"answer_id":19548849,"question_id":19548531,"body_markdown":"In .NET, data access components typically automatically enlist to ambient transactions. Hence, *saving changes intra-transactionally* becomes separated from *comitting the transaction to persist the changes*.\r\n\r\nPut differently - if you create a transaction scope you can let the developers save as much as they want. Not until the transaction is committed the observable state of the database(s) will be updated (well, what is observable depends on the transaction isolation level).\r\n\r\nThis shows how to create a transaction scope in c#:\r\n\r\n    using (TransactionScope scope = new TransactionScope())\r\n    {\r\n        // Your logic here. Save inside the transaction as much as you want.\r\n    \r\n        scope.Complete(); // &lt;-- This will complete the transaction and make the changes permanent.\r\n    }","title":"Unit of Work + Repository Pattern: The Fall of the Business Transaction Concept","body":"<p>In .NET, data access components typically automatically enlist to ambient transactions. Hence, <em>saving changes intra-transactionally</em> becomes separated from <em>comitting the transaction to persist the changes</em>.</p>\n\n<p>Put differently - if you create a transaction scope you can let the developers save as much as they want. Not until the transaction is committed the observable state of the database(s) will be updated (well, what is observable depends on the transaction isolation level).</p>\n\n<p>This shows how to create a transaction scope in c#:</p>\n\n<pre><code>using (TransactionScope scope = new TransactionScope())\n{\n    // Your logic here. Save inside the transaction as much as you want.\n\n    scope.Complete(); // &lt;-- This will complete the transaction and make the changes permanent.\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":104904,"reputation":68149,"user_id":280222,"accept_rate":92,"display_name":"Anders Abel"},"down_vote_count":0,"up_vote_count":31,"is_accepted":false,"score":31,"last_activity_date":1382951236,"creation_date":1382951236,"answer_id":19630695,"question_id":19548531,"body_markdown":"I do agree with your concerns. I prefer to have an ambient unit of work, where the outermost function opening a unit of work is the one that decides whether to commit or abort. Functions called can open a unit of work scope which automatically enlists in the ambient UoW if there is one, or creates a new one if there is none.\r\n\r\nThe implementation of the `UnitOfWorkScope` that I used is heavily inspired by how `TransactionScope` works. Using an ambient/scoped approach also removes the need for dependency injection.\r\n\r\nA method that performs a query looks like this:\r\n\r\n    public static Entities.Car GetCar(int id)\r\n    {\r\n        using (var uow = new UnitOfWorkScope&lt;CarsContext&gt;(UnitOfWorkScopePurpose.Reading))\r\n        {\r\n            return uow.DbContext.Cars.Single(c =&gt; c.CarId == id);\r\n        }\r\n    }\r\n\r\nA method that writes looks like this:\r\n\r\n    using (var uow = new UnitOfWorkScope&lt;CarsContext&gt;(UnitOfWorkScopePurpose.Writing))\r\n    {\r\n        Car c = SharedQueries.GetCar(carId);\r\n        c.Color = &quot;White&quot;;\r\n        uow.SaveChanges();\r\n    }\r\n\r\nNote that the `uow.SaveChanges()` call will only do an actual save to the database if this is the root (otermost) scope. Otherwise it is interpreted as an &quot;okay vote&quot; that the root scope will be allowed to save the changes.\r\n\r\nThe entire implementation of the `UnitOfWorkScope` is available at: http://coding.abel.nu/2012/10/make-the-dbcontext-ambient-with-unitofworkscope/","title":"Unit of Work + Repository Pattern: The Fall of the Business Transaction Concept","body":"<p>I do agree with your concerns. I prefer to have an ambient unit of work, where the outermost function opening a unit of work is the one that decides whether to commit or abort. Functions called can open a unit of work scope which automatically enlists in the ambient UoW if there is one, or creates a new one if there is none.</p>\n\n<p>The implementation of the <code>UnitOfWorkScope</code> that I used is heavily inspired by how <code>TransactionScope</code> works. Using an ambient/scoped approach also removes the need for dependency injection.</p>\n\n<p>A method that performs a query looks like this:</p>\n\n<pre><code>public static Entities.Car GetCar(int id)\n{\n    using (var uow = new UnitOfWorkScope&lt;CarsContext&gt;(UnitOfWorkScopePurpose.Reading))\n    {\n        return uow.DbContext.Cars.Single(c =&gt; c.CarId == id);\n    }\n}\n</code></pre>\n\n<p>A method that writes looks like this:</p>\n\n<pre><code>using (var uow = new UnitOfWorkScope&lt;CarsContext&gt;(UnitOfWorkScopePurpose.Writing))\n{\n    Car c = SharedQueries.GetCar(carId);\n    c.Color = \"White\";\n    uow.SaveChanges();\n}\n</code></pre>\n\n<p>Note that the <code>uow.SaveChanges()</code> call will only do an actual save to the database if this is the root (otermost) scope. Otherwise it is interpreted as an \"okay vote\" that the root scope will be allowed to save the changes.</p>\n\n<p>The entire implementation of the <code>UnitOfWorkScope</code> is available at: <a href=\"http://coding.abel.nu/2012/10/make-the-dbcontext-ambient-with-unitofworkscope/\" rel=\"noreferrer\">http://coding.abel.nu/2012/10/make-the-dbcontext-ambient-with-unitofworkscope/</a></p>\n"},{"tags":[],"owner":{"account_id":50398,"reputation":22428,"user_id":150342,"accept_rate":86,"display_name":"Colin"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1383315479,"creation_date":1383052614,"answer_id":19659319,"question_id":19548531,"body_markdown":"Don&#39;t pass in the `UnitOfWork`, pass in an interface that has the methods you need. You can still implement that interface in the original concrete `UnitOfWork` implementation if you want:\r\n\r\n    public interface IDbContext\r\n    {\r\n       void Add&lt;T&gt;(T entity);\r\n    }\r\n    \r\n    public interface IUnitOfWork\r\n    {\r\n       void Commit();\r\n    }\r\n    \r\n    public class UnitOfWork : IDbContext, IUnitOfWork\r\n    {\r\n       public void Add&lt;T&gt;(T entity);\r\n       public void Commit();\r\n    }\r\n\r\n    public class RepositoryBase&lt;T&gt;\r\n    {\r\n        private IDbContext _c;\r\n    \r\n        public RepositoryBase(IDbContext c) \r\n        {\r\n           _c = c;\r\n        }\r\n    \r\n        public void Add(T entity)\r\n        {\r\n           _c.Add(entity)\r\n        }\r\n    }\r\n\r\n**EDIT**\r\n\r\n\r\nAfter posting this I had a rethink. Exposing the Add&lt;T&gt; method in the `UnitOfWork` implementation means it is a combination of the two patterns.\r\n \r\nI use Entity Framework in my own code and the [`DbContext`][1] used there is described as &quot;a combination of the Unit-Of-Work and Repository pattern&quot;. \r\n\r\nI think it is better to split the two, and that means I need two wrappers around `DbContext` one for the Unit Of Work bit and one for the Repository bit. And I do the repository wrapping in `RepositoryBase`. \r\n\r\nThe key difference is that I do not pass the `UnitOfWork` to the Repositories, I pass the `DbContext`. That does mean that the `BaseRepository` has access to a `SaveChanges` on the `DbContext`. And since the intention is that custom repositories should inherit `BaseRepository`, they get access to a `DbContext` too. It is therefore possible that a developer *could* add code in a custom repository that uses that `DbContext`. So I guess my &quot;wrapper&quot; is a bit leaky...\r\n\r\nSo is it worth creating another wrapper for the `DbContext` that can be passed to the repository constructors to close that off? Not sure that it is...\r\n\r\nExamples of passing the DbContext:\r\n\r\n[Implementing the Repository and Unit of Work ][2]\r\n\r\n[Repository and Unit of Work in Entity Framework][3]\r\n\r\n[John Papa&#39;s original source code][4]\r\n\r\n\r\n  [1]: http://msdn.microsoft.com/en-us/library/system.data.entity.dbcontext%28v=vs.103%29.aspx\r\n  [2]: http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/implementing-the-repository-and-unit-of-work-patterns-in-an-asp-net-mvc-application\r\n  [3]: https://stackoverflow.com/a/12820444/150342\r\n  [4]: https://github.com/johnpapa/CodeCamper","title":"Unit of Work + Repository Pattern: The Fall of the Business Transaction Concept","body":"<p>Don't pass in the <code>UnitOfWork</code>, pass in an interface that has the methods you need. You can still implement that interface in the original concrete <code>UnitOfWork</code> implementation if you want:</p>\n\n<pre><code>public interface IDbContext\n{\n   void Add&lt;T&gt;(T entity);\n}\n\npublic interface IUnitOfWork\n{\n   void Commit();\n}\n\npublic class UnitOfWork : IDbContext, IUnitOfWork\n{\n   public void Add&lt;T&gt;(T entity);\n   public void Commit();\n}\n\npublic class RepositoryBase&lt;T&gt;\n{\n    private IDbContext _c;\n\n    public RepositoryBase(IDbContext c) \n    {\n       _c = c;\n    }\n\n    public void Add(T entity)\n    {\n       _c.Add(entity)\n    }\n}\n</code></pre>\n\n<p><strong>EDIT</strong></p>\n\n<p>After posting this I had a rethink. Exposing the Add method in the <code>UnitOfWork</code> implementation means it is a combination of the two patterns.</p>\n\n<p>I use Entity Framework in my own code and the <a href=\"http://msdn.microsoft.com/en-us/library/system.data.entity.dbcontext%28v=vs.103%29.aspx\" rel=\"nofollow noreferrer\"><code>DbContext</code></a> used there is described as \"a combination of the Unit-Of-Work and Repository pattern\". </p>\n\n<p>I think it is better to split the two, and that means I need two wrappers around <code>DbContext</code> one for the Unit Of Work bit and one for the Repository bit. And I do the repository wrapping in <code>RepositoryBase</code>. </p>\n\n<p>The key difference is that I do not pass the <code>UnitOfWork</code> to the Repositories, I pass the <code>DbContext</code>. That does mean that the <code>BaseRepository</code> has access to a <code>SaveChanges</code> on the <code>DbContext</code>. And since the intention is that custom repositories should inherit <code>BaseRepository</code>, they get access to a <code>DbContext</code> too. It is therefore possible that a developer <em>could</em> add code in a custom repository that uses that <code>DbContext</code>. So I guess my \"wrapper\" is a bit leaky...</p>\n\n<p>So is it worth creating another wrapper for the <code>DbContext</code> that can be passed to the repository constructors to close that off? Not sure that it is...</p>\n\n<p>Examples of passing the DbContext:</p>\n\n<p><a href=\"http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/implementing-the-repository-and-unit-of-work-patterns-in-an-asp-net-mvc-application\" rel=\"nofollow noreferrer\">Implementing the Repository and Unit of Work </a></p>\n\n<p><a href=\"https://stackoverflow.com/a/12820444/150342\">Repository and Unit of Work in Entity Framework</a></p>\n\n<p><a href=\"https://github.com/johnpapa/CodeCamper\" rel=\"nofollow noreferrer\">John Papa's original source code</a></p>\n"},{"tags":[],"owner":{"account_id":248538,"reputation":8111,"user_id":523949,"accept_rate":50,"display_name":"Tengiz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1383168053,"creation_date":1383166994,"answer_id":19693754,"question_id":19548531,"body_markdown":"Yes, this question is a concern to me, and here&#39;s how I handle it.\r\n\r\nFirst of all, in my understanding Domain Model should not know about Unit of Work. Domain Model consists of interfaces (or abstract classes) that don&#39;t imply the existence of the transactional storage. In fact, it does not know about the existence of *any* storage at all. Hence the term Domain *Model*.\r\n\r\nUnit of Work is present in the *Domain Model Implementation* layer. I guess this is my term, and by that I mean a layer that implements Domain Model interfaces by incorporating Data Access Layer. Usually, I use ORM as DAL and therefore it comes with built-in UoW in it (Entity Framework SaveChanges or SubmitChanges method to commit the pending changes). However, that one belongs to DAL and does not need any inventor&#39;s magic. \r\n\r\nOn the other hand, you are referring to the UoW that you need to have in Domain Model Implementation layer because you need to abstract away the part of &quot;committing changes to DAL&quot;. For that, I would go with Anders Abel&#39;s solution (recursive scropes), because that addresses two things you need to solve **in one shot**:\r\n\r\n- You need to support saving of aggregates as one transaction, if the aggregate is an initiator of the scope.\r\n- You need to support saving of aggregates as part of the *parent* transaction, if the aggregate is not the initiator of the scope, but is part of it.","title":"Unit of Work + Repository Pattern: The Fall of the Business Transaction Concept","body":"<p>Yes, this question is a concern to me, and here's how I handle it.</p>\n\n<p>First of all, in my understanding Domain Model should not know about Unit of Work. Domain Model consists of interfaces (or abstract classes) that don't imply the existence of the transactional storage. In fact, it does not know about the existence of <em>any</em> storage at all. Hence the term Domain <em>Model</em>.</p>\n\n<p>Unit of Work is present in the <em>Domain Model Implementation</em> layer. I guess this is my term, and by that I mean a layer that implements Domain Model interfaces by incorporating Data Access Layer. Usually, I use ORM as DAL and therefore it comes with built-in UoW in it (Entity Framework SaveChanges or SubmitChanges method to commit the pending changes). However, that one belongs to DAL and does not need any inventor's magic. </p>\n\n<p>On the other hand, you are referring to the UoW that you need to have in Domain Model Implementation layer because you need to abstract away the part of \"committing changes to DAL\". For that, I would go with Anders Abel's solution (recursive scropes), because that addresses two things you need to solve <strong>in one shot</strong>:</p>\n\n<ul>\n<li>You need to support saving of aggregates as one transaction, if the aggregate is an initiator of the scope.</li>\n<li>You need to support saving of aggregates as part of the <em>parent</em> transaction, if the aggregate is not the initiator of the scope, but is part of it.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":1045290,"reputation":1634,"user_id":1727453,"display_name":"Chalky"},"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1405547619,"creation_date":1405547619,"answer_id":24791466,"question_id":19548531,"body_markdown":"Make your repositories members of your UoW.  Don&#39;t let your repositories &#39;see&#39; your UoW.  Let UoW handle the transaction.","title":"Unit of Work + Repository Pattern: The Fall of the Business Transaction Concept","body":"<p>Make your repositories members of your UoW.  Don't let your repositories 'see' your UoW.  Let UoW handle the transaction.</p>\n"},{"tags":[],"owner":{"account_id":5630932,"reputation":191,"user_id":4457911,"display_name":"logan gilley"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1473678687,"creation_date":1473678687,"answer_id":39449017,"question_id":19548531,"body_markdown":"I too have been recently researching this design pattern and by utilizing the Unit Of Work and Generic Repository Pattern I was able to extract the Unit of Work &quot;Save Changes&quot; for the Repository implementation. My code is as follows:\r\n\r\n    public class GenericRepository&lt;T&gt; where T : class\r\n    {\r\n      private MyDatabase _Context;\r\n      private DbSet&lt;T&gt; dbset;\r\n    \r\n      public GenericRepository(MyDatabase context)\r\n      {\r\n        _Context = context;\r\n        dbSet = context.Set&lt;T&gt;();\r\n      }\r\n    \r\n      public T Get(int id)\r\n      {\r\n        return dbSet.Find(id);\r\n      }\r\n\r\n      public IEnumerable&lt;T&gt; GetAll()\r\n      {\r\n        return dbSet&lt;T&gt;.ToList();\r\n      }\r\n\r\n      public IEnumerable&lt;T&gt; Where(Expression&lt;Func&lt;T&gt;, bool&gt;&gt; predicate)\r\n      {\r\n        return dbSet.Where(predicate);\r\n      }\r\n      ...\r\n      ...\r\n    }\r\nEssentially all we are doing is passing in the data context and utilizing the entity framework&#39;s dbSet methods for basic Get, GetAll, Add, AddRange, Remove, RemoveRange, and Where.\r\n\r\nNow we will create a generic interface to expose these methods.\r\n\r\n    public interface &lt;IGenericRepository&lt;T&gt; where T : class\r\n    {\r\n      T Get(int id);\r\n      IEnumerable&lt;T&gt; GetAll();\r\n      IEnumerabel&lt;T&gt; Where(Expression&lt;Func&lt;T, bool&gt;&gt; predicate);\r\n      ...\r\n      ...\r\n    }\r\n\r\nNow we would want to create an interface for each entity in entity Framework and inherit from IGenericRepository so that the interface will expect to have the method signatures implemented within the inherited repositories.  \r\n\r\nExample:\r\n\r\n    public interface ITable1 : IGenericRepository&lt;table1&gt;\r\n    {\r\n    }\r\nYou will follow this same pattern with all of your entities. You will also add any function signatures in these interfaces that are specific to the entities. This would result in the repositories needing to implement the GenericRepository methods and any custom methods defined in the interfaces. \r\n\r\nFor the Repositories we will implement them like this.\r\n\r\n    public class Table1Repository : GenericRepository&lt;table1&gt;, ITable1\r\n    {\r\n      private MyDatabase _context;\r\n\r\n      public Table1Repository(MyDatabase context) : base(context)\r\n      {\r\n        _context = context;\r\n      }\r\n    } \r\n\r\nIn the example repository above I am creating the table1 repository and inheriting the GenericRepository with a type of &quot;table1&quot; then I inherit from the ITable1 interface. This will automatically implement the generic dbSet methods for me, thus allowing me to only focus on my custom repository methods if any. As I pass the dbContext to the constructor I must also pass the dbContext to the base Generic Repository as well. \r\n\r\nNow from here I will go and create the Unit of Work repository and Interface. \r\n\r\n    public interface IUnitOfWork\r\n    {\r\n      ITable1 table1 {get;}\r\n      ...\r\n      ...\r\n      list all other repository interfaces here.\r\n    \r\n      void SaveChanges();\r\n    } \r\n\r\n    public class UnitOfWork : IUnitOfWork\r\n    {\r\n      private readonly MyDatabase _context;\r\n      public ITable1 Table1 {get; private set;}\r\n\r\n      public UnitOfWork(MyDatabase context)\r\n      {\r\n        _context = context; \r\n\r\n        // Initialize all of your repositories here\r\n        Table1 = new Table1Repository(_context);\r\n        ...\r\n        ...\r\n      }\r\n    \r\n      public void SaveChanges()\r\n      {\r\n        _context.SaveChanges();\r\n      }\r\n    }\r\n\r\nI handle my transaction scope on a custom controller that all other controllers in my system inherit from. This controller inherits from the default MVC controller. \r\n\r\n    public class DefaultController : Controller\r\n    {\r\n      protected IUnitOfWork UoW;\r\n\r\n      protected override void OnActionExecuting(ActionExecutingContext filterContext)\r\n      {\r\n        UoW = new UnitOfWork(new MyDatabase());\r\n      }\r\n\r\n      protected override void OnActionExecuted(ActionExecutedContext filterContext) \r\n      {\r\n        UoW.SaveChanges();\r\n      }\r\n    }\r\n\r\nBy implementing your code this way. Every time a request is made to the server at the beginning of an action a new UnitOfWork will be created and will automatically create all the repositories and make them accessible to the UoW variable in your controller or classes. This will also remove your SaveChanges() from your repositories and place it within the UnitOfWork repository. And last this pattern is able to utilize only a single dbContext throughout the system via dependency injection. \r\n\r\nIf you are concerned about parent/child updates with a singular context you could utilize stored procedures for your update, insert, and delete functions and utilize entity framework for your access methods. ","title":"Unit of Work + Repository Pattern: The Fall of the Business Transaction Concept","body":"<p>I too have been recently researching this design pattern and by utilizing the Unit Of Work and Generic Repository Pattern I was able to extract the Unit of Work \"Save Changes\" for the Repository implementation. My code is as follows:</p>\n\n<pre><code>public class GenericRepository&lt;T&gt; where T : class\n{\n  private MyDatabase _Context;\n  private DbSet&lt;T&gt; dbset;\n\n  public GenericRepository(MyDatabase context)\n  {\n    _Context = context;\n    dbSet = context.Set&lt;T&gt;();\n  }\n\n  public T Get(int id)\n  {\n    return dbSet.Find(id);\n  }\n\n  public IEnumerable&lt;T&gt; GetAll()\n  {\n    return dbSet&lt;T&gt;.ToList();\n  }\n\n  public IEnumerable&lt;T&gt; Where(Expression&lt;Func&lt;T&gt;, bool&gt;&gt; predicate)\n  {\n    return dbSet.Where(predicate);\n  }\n  ...\n  ...\n}\n</code></pre>\n\n<p>Essentially all we are doing is passing in the data context and utilizing the entity framework's dbSet methods for basic Get, GetAll, Add, AddRange, Remove, RemoveRange, and Where.</p>\n\n<p>Now we will create a generic interface to expose these methods.</p>\n\n<pre><code>public interface &lt;IGenericRepository&lt;T&gt; where T : class\n{\n  T Get(int id);\n  IEnumerable&lt;T&gt; GetAll();\n  IEnumerabel&lt;T&gt; Where(Expression&lt;Func&lt;T, bool&gt;&gt; predicate);\n  ...\n  ...\n}\n</code></pre>\n\n<p>Now we would want to create an interface for each entity in entity Framework and inherit from IGenericRepository so that the interface will expect to have the method signatures implemented within the inherited repositories.  </p>\n\n<p>Example:</p>\n\n<pre><code>public interface ITable1 : IGenericRepository&lt;table1&gt;\n{\n}\n</code></pre>\n\n<p>You will follow this same pattern with all of your entities. You will also add any function signatures in these interfaces that are specific to the entities. This would result in the repositories needing to implement the GenericRepository methods and any custom methods defined in the interfaces. </p>\n\n<p>For the Repositories we will implement them like this.</p>\n\n<pre><code>public class Table1Repository : GenericRepository&lt;table1&gt;, ITable1\n{\n  private MyDatabase _context;\n\n  public Table1Repository(MyDatabase context) : base(context)\n  {\n    _context = context;\n  }\n} \n</code></pre>\n\n<p>In the example repository above I am creating the table1 repository and inheriting the GenericRepository with a type of \"table1\" then I inherit from the ITable1 interface. This will automatically implement the generic dbSet methods for me, thus allowing me to only focus on my custom repository methods if any. As I pass the dbContext to the constructor I must also pass the dbContext to the base Generic Repository as well. </p>\n\n<p>Now from here I will go and create the Unit of Work repository and Interface. </p>\n\n<pre><code>public interface IUnitOfWork\n{\n  ITable1 table1 {get;}\n  ...\n  ...\n  list all other repository interfaces here.\n\n  void SaveChanges();\n} \n\npublic class UnitOfWork : IUnitOfWork\n{\n  private readonly MyDatabase _context;\n  public ITable1 Table1 {get; private set;}\n\n  public UnitOfWork(MyDatabase context)\n  {\n    _context = context; \n\n    // Initialize all of your repositories here\n    Table1 = new Table1Repository(_context);\n    ...\n    ...\n  }\n\n  public void SaveChanges()\n  {\n    _context.SaveChanges();\n  }\n}\n</code></pre>\n\n<p>I handle my transaction scope on a custom controller that all other controllers in my system inherit from. This controller inherits from the default MVC controller. </p>\n\n<pre><code>public class DefaultController : Controller\n{\n  protected IUnitOfWork UoW;\n\n  protected override void OnActionExecuting(ActionExecutingContext filterContext)\n  {\n    UoW = new UnitOfWork(new MyDatabase());\n  }\n\n  protected override void OnActionExecuted(ActionExecutedContext filterContext) \n  {\n    UoW.SaveChanges();\n  }\n}\n</code></pre>\n\n<p>By implementing your code this way. Every time a request is made to the server at the beginning of an action a new UnitOfWork will be created and will automatically create all the repositories and make them accessible to the UoW variable in your controller or classes. This will also remove your SaveChanges() from your repositories and place it within the UnitOfWork repository. And last this pattern is able to utilize only a single dbContext throughout the system via dependency injection. </p>\n\n<p>If you are concerned about parent/child updates with a singular context you could utilize stored procedures for your update, insert, and delete functions and utilize entity framework for your access methods. </p>\n"},{"tags":[],"owner":{"account_id":9093223,"reputation":101,"user_id":6768116,"display_name":"Patrick Farry"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1696747013,"creation_date":1508964264,"answer_id":46941740,"question_id":19548531,"body_markdown":"Taking inspiration from databases, transaction controllers and the two phase commit protocol, the following changes to the patterns should work for you.\r\n\r\n 1. Implement the unit of work interface described in Fowler&#39;s P of EAA book, but inject the repository into each UoW method.\r\n 2. Inject the unit of work into each repository operation.\r\n 3. Each repository operation calls the appropriate UoW operation and injects itself.\r\n 4. Implement the two phase commit methods CanCommit(), Commit() and Rollback() in the repositories.\r\n 5. If required, commit on the UoW can run Commit on each repository or it can commit to the data store itself. It can also implement a 2 phase commit if that is what you want.\r\n\r\nHaving done this, you can support a number of different configurations depending on how you implement the repositories and the UoW. E.g., from simple data store without transactions, single RDBMs, multiple heterogeneous data stores etc. The data stores and their interactions can be either in the repositories or in the UoW, as the situation requires.\r\n\r\n    interface IEntity\r\n    {\r\n        int Id {get;set;}\r\n    }\r\n\r\n    interface IUnitOfWork()\r\n    {\r\n        void RegisterNew(IRepsitory repository, IEntity entity);\r\n        void RegisterDirty(IRepository respository, IEntity entity);\r\n        //etc.\r\n        bool Commit();\r\n        bool Rollback();\r\n    }\r\n\r\n    interface IRepository&lt;T&gt;() : where T : IEntity;\r\n    {\r\n        void Add(IEntity entity, IUnitOfWork uow);\r\n        //etc.\r\n        bool CanCommit(IUnitOfWork uow);\r\n        void Commit(IUnitOfWork uow);\r\n        void Rollback(IUnitOfWork uow);\r\n    }\r\n\r\nUser code is always the same regardless of the DB implementations and looks like this:\r\n\r\n    // ...\r\n    var uow = new MyUnitOfWork();\r\n\r\n    repo1.Add(entity1, uow);\r\n    repo2.Add(entity2, uow);\r\n    uow.Commit();\r\n\r\nBack to the original post. Because we are method injecting the UoW into each repo operation the UoW does not need to be stored by each repository, meaning Commit() on the Repository can be stubbed out, with Commit on the UoW doing the actual DB commit.\r\n","title":"Unit of Work + Repository Pattern: The Fall of the Business Transaction Concept","body":"<p>Taking inspiration from databases, transaction controllers and the two phase commit protocol, the following changes to the patterns should work for you.</p>\n<ol>\n<li>Implement the unit of work interface described in Fowler's P of EAA book, but inject the repository into each UoW method.</li>\n<li>Inject the unit of work into each repository operation.</li>\n<li>Each repository operation calls the appropriate UoW operation and injects itself.</li>\n<li>Implement the two phase commit methods CanCommit(), Commit() and Rollback() in the repositories.</li>\n<li>If required, commit on the UoW can run Commit on each repository or it can commit to the data store itself. It can also implement a 2 phase commit if that is what you want.</li>\n</ol>\n<p>Having done this, you can support a number of different configurations depending on how you implement the repositories and the UoW. E.g., from simple data store without transactions, single RDBMs, multiple heterogeneous data stores etc. The data stores and their interactions can be either in the repositories or in the UoW, as the situation requires.</p>\n<pre><code>interface IEntity\n{\n    int Id {get;set;}\n}\n\ninterface IUnitOfWork()\n{\n    void RegisterNew(IRepsitory repository, IEntity entity);\n    void RegisterDirty(IRepository respository, IEntity entity);\n    //etc.\n    bool Commit();\n    bool Rollback();\n}\n\ninterface IRepository&lt;T&gt;() : where T : IEntity;\n{\n    void Add(IEntity entity, IUnitOfWork uow);\n    //etc.\n    bool CanCommit(IUnitOfWork uow);\n    void Commit(IUnitOfWork uow);\n    void Rollback(IUnitOfWork uow);\n}\n</code></pre>\n<p>User code is always the same regardless of the DB implementations and looks like this:</p>\n<pre><code>// ...\nvar uow = new MyUnitOfWork();\n\nrepo1.Add(entity1, uow);\nrepo2.Add(entity2, uow);\nuow.Commit();\n</code></pre>\n<p>Back to the original post. Because we are method injecting the UoW into each repo operation the UoW does not need to be stored by each repository, meaning Commit() on the Repository can be stubbed out, with Commit on the UoW doing the actual DB commit.</p>\n"},{"tags":[],"owner":{"account_id":8085031,"reputation":1526,"user_id":6092856,"display_name":"ArwynFr"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1696747338,"creation_date":1610502248,"answer_id":65694543,"question_id":19548531,"body_markdown":"### In a very simple application\r\n\r\nIn some applications, the domain model and the database entities are identical, and there isn&#39;t any need to do any data mapping between them. Let&#39;s call them &quot;domain entities&quot;. In such applications, the `DbContext` can act both as a repository **and** a unit of work simultaneously. Instead of doing some complicated patterns, we can simply use the context:\r\n\r\n```\r\npublic class CustomerController : Controller\r\n{\r\n    private readonly CustomerContext context; // injected\r\n\r\n    [HttpPost]\r\n    public IActionResult Update(CustomerUpdateDetails viewmodel)\r\n    {\r\n        // [Repository] acting like an in-memory domain object collection\r\n        var person = context.Person.Find(viewmodel.Id);\r\n\r\n        // [UnitOfWork] keeps track of everything you do during a business transaction\r\n        person.Name = viewmodel.NewName;\r\n        person.AnotherComplexOperationWithBusinessRequirements();\r\n\r\n        // [UnitOfWork] figures out everything that needs to be done to alter the database\r\n        context.SaveChanges();\r\n    }\r\n}\r\n```\r\n\r\n### Complex queries on larger applications\r\n\r\nIf your application gets more complex, you&#39;ll start writing some large [LINQ][1] queries in order to access your data. In that situation, you&#39;ll probably need to introduce a new layer that handle these queries, in order to prevent yourself from copy pasting them across your controllers. In that situation, you&#39;ll end up having two different layers, the unit of work pattern implemented by the `DbContext`, and the repository pattern that will simply provide some LINQ results executing over the former. Your controller is expected to call the repository to get the entities, change their state and then call the DbContext to persist the changes to the database, but proxying the `DbContext.SaveChanges()` through the repository object is an acceptable approximation:\r\n\r\n```\r\npublic class PersonRepository\r\n{\r\n    private readonly PersonDbContext context;\r\n    public Person GetClosestTo(GeoCoordinate location) {} // redacted\r\n}\r\n```\r\n\r\n```\r\npublic class PersonController\r\n{\r\n    private readonly PersonRepository repository;\r\n    private readonly PersonDbContext context; // requires to Equals repository.context\r\n\r\n    public IActionResult Action()\r\n    {\r\n        var person = repository.GetClosestTo(new GeoCoordinate());\r\n        person.DoSomething();\r\n        context.SaveChanges();\r\n        // repository.SaveChanges(); would save the injection of the DbContext\r\n    }\r\n}\r\n```\r\n\r\n### [DDD][2] applications\r\n\r\nIt gets more interesting when domain models and entities are two different group of classes. This will happen when you will start implementing DDD, as this requires you to define some aggregates, which are clusters of domain objects that can be treated as a single unit. The structure of aggregates does not always perfectly map to your relational database schema, as it can provides multiple level of abstractions depending on the use case you&#39;re dealing with.\r\n\r\nFor instance, an aggregate may allow a user to manage multiple addresses, but in another business context you&#39;ll might want to flatten the model and limit the modeling of the person&#39;s address to the latest value only:\r\n\r\n```\r\npublic class PersonEntity\r\n{\r\n    [Key]\r\n    public int Id { get; set; }\r\n    public string Name { get; set; }\r\n    public bool IsValid { get; set; }\r\n    public ICollection&lt;AddressEntity&gt; Addresses { get; set; }\r\n}\r\n\r\npublic class AddressEntity\r\n{\r\n    [Key]\r\n    public int Id { get; set; }\r\n    public string Value { get; set; }\r\n    public DateTime Since { get; set; }\r\n    public PersonEntity Person { get; set; }\r\n}\r\n\r\npublic class Person\r\n{\r\n    public int Id { get; set; }\r\n    public string Name { get; set; }\r\n    public string CurrentAddressValue { get; private set; }\r\n}\r\n```\r\n\r\n#### Implementing the unit of work pattern\r\n\r\nFirst let&#39;s get back to the definition:\r\n\r\n&gt; A unit of work keeps track of everything you do during a business transaction that can affect the database. When you&#39;re done, it figures out everything that needs to be done to alter the database as a result of your work.\r\n\r\nThe `DbContext` keeps tracks of every modification that happens to entities and will persist them to the database once you call the `SaveChanges()` method. Like in the simpler example, unit of work is exactly what the `DbContext` does, and using it as a unit of work is actually [how Microsoft suggest you&#39;d structure a .NET application using DDD][3].\r\n\r\n#### Implementing the repository pattern\r\n\r\nOnce again, let&#39;s get back to the definition:\r\n\r\n&gt; A repository mediates between the domain and data mapping layers, acting like an in-memory domain object collection.\r\n\r\nThe `DbContext`, cannot act as a repository. Although it behaves as an in-memory collection of entities, it does not act as an in-memory collection of **domain objects**. In that situation, we must implement another class for the repository, that will act as our in-memory collection of domain models, and will map data from entities to domain models. However, you will find a lot of implementations that are simply a projection of the DbSet in the domain model and provide `IList`-like methods that simply maps entities back and reproduce the operations on the `DbSet&lt;T&gt;`.\r\n\r\nAlthough this implementation might be valid in multiple situations, it ***overemphasizes*** the *collection* part, and not enough on the *mediator* part of the definition.\r\n\r\nA repository is a mediator between the domain layer and the infrastructure layer, which means its interface is defined in the domain layer. Methods described in the interface are defined in the domain layer, and they all must have a meaning in the business context of the program. Ubiquitous language being a central concept of DDD, these methods must provide a meaningful name, and perhaps &quot;adding a person&quot; is not the right business way to name this operation.\r\n\r\nAlso, all persistence-related concepts are strictly limited to the implementation of the repository. The implementation defines how a given business operation translates in the infrastructure layer, as a series of entities manipulation that will eventually be persisted to the database through an atomic database transaction.  Also note that the `Add` operation on a domain model does not necessarily implies an `INSERT` statement in the database and a `Remove` will sometimes end up in an `UPDATE` or even multiple `INSERT` statements !\r\n\r\nActually, here is a pretty valid implementation of a repository pattern:\r\n\r\n```\r\npublic class Person\r\n{\r\n    public void EnsureEnrollable(IPersonRepository repository)\r\n    {\r\n        if(!repository.IsEnrollable(this))\r\n        {\r\n            throw new BusinessException&lt;PersonError&gt;(PersonError.CannotEnroll);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n```\r\npublic class PersonRepository : IPersonRepository\r\n{\r\n    private readonly PersonDbContext context;\r\n\r\n    public IEnumerable&lt;Person&gt; GetAll()\r\n    {\r\n        return context.Persons.AsNoTracking()\r\n            .Where(person =&gt; person.Active)\r\n            .ProjectTo&lt;Person&gt;().ToList();\r\n    }\r\n\r\n    public Person Enroll(Person person)\r\n    {\r\n        person.EnsureEnrollable(this);\r\n        context.Persons.Find(person.Id).Active = true;\r\n        context.SaveChanges(); // UPDATE statement\r\n        return person;\r\n    }\r\n\r\n    public bool IsEnrollable(Person person)\r\n    {\r\n        return context.Persons.Any(entity =&gt; entity.Id == person.Id &amp;&amp; !entity.Active);\r\n    }\r\n}\r\n```\r\n\r\n### Business transaction\r\n\r\nYou&#39;re saying a purpose of using unit of work is to form a *business transaction*, which is wrong. The purpose of the unit of work class is to *keeps track of everything you do during a business transaction that can affect the database*, to *alter the database as a result of your work* in an **atomic** operation. The repositories do share the unit of work instances, but bear in mind that dependency injection usually uses a scoped lifetime manager when injecting dbcontext. This means that instances are only shared within the same http request context, and different requests will not share changes tracking. Using a singleton lifetime manager will share instances among different http request which will provoke havoc in your application.\r\n\r\nCalling the unit of work save changes method from a repository is actually how you are expected to implementation a DDD application. The repository is the class that knows about the actual implementation of the persistence layer, and that will orchestrate all database operations to commit/rollback at the end of transaction. Saving changes from another repository when calling save changes is also **the expected behavior** of the unit of work pattern. The unit of work accumulates all changes made by all repositories until someone calls a commit or a rollback. If a repository makes changes to the context that are not expected to be persisted in the database, then the problem is not the unit of work persisting these changes, but the repository doing these changes.\r\n\r\nHowever, if your application does one atomic save changes that persists change operations from multiple repositories, it probably violates one of the DDD design principles. A repository is a one-to-one mapping with an aggregate, and an aggregate is a cluster of domain objects that can be treated as a single unit. If you are using multiple repositories, then you are trying to modify multiple units of data in a single transaction.\r\n\r\nEither your aggregate is designed too small, and you need to make a larger one that holds all data for your single transaction, with a repository that will handle all that data in a single transaction; either you&#39;re trying to make a complex transaction that spans over a wide part of your model, and you will need to implement this transaction with eventual consistency.\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Language_Integrated_Query\r\n  [2]: https://en.wikipedia.org/wiki/Domain-driven_design\r\n  [3]: https://learn.microsoft.com/en-us/dotnet/architecture/microservices/microservice-ddd-cqrs-patterns/infrastructure-persistence-layer-design\r\n\r\n\r\n","title":"Unit of Work + Repository Pattern: The Fall of the Business Transaction Concept","body":"<h3>In a very simple application</h3>\n<p>In some applications, the domain model and the database entities are identical, and there isn't any need to do any data mapping between them. Let's call them &quot;domain entities&quot;. In such applications, the <code>DbContext</code> can act both as a repository <strong>and</strong> a unit of work simultaneously. Instead of doing some complicated patterns, we can simply use the context:</p>\n<pre><code>public class CustomerController : Controller\n{\n    private readonly CustomerContext context; // injected\n\n    [HttpPost]\n    public IActionResult Update(CustomerUpdateDetails viewmodel)\n    {\n        // [Repository] acting like an in-memory domain object collection\n        var person = context.Person.Find(viewmodel.Id);\n\n        // [UnitOfWork] keeps track of everything you do during a business transaction\n        person.Name = viewmodel.NewName;\n        person.AnotherComplexOperationWithBusinessRequirements();\n\n        // [UnitOfWork] figures out everything that needs to be done to alter the database\n        context.SaveChanges();\n    }\n}\n</code></pre>\n<h3>Complex queries on larger applications</h3>\n<p>If your application gets more complex, you'll start writing some large <a href=\"https://en.wikipedia.org/wiki/Language_Integrated_Query\" rel=\"nofollow noreferrer\">LINQ</a> queries in order to access your data. In that situation, you'll probably need to introduce a new layer that handle these queries, in order to prevent yourself from copy pasting them across your controllers. In that situation, you'll end up having two different layers, the unit of work pattern implemented by the <code>DbContext</code>, and the repository pattern that will simply provide some LINQ results executing over the former. Your controller is expected to call the repository to get the entities, change their state and then call the DbContext to persist the changes to the database, but proxying the <code>DbContext.SaveChanges()</code> through the repository object is an acceptable approximation:</p>\n<pre><code>public class PersonRepository\n{\n    private readonly PersonDbContext context;\n    public Person GetClosestTo(GeoCoordinate location) {} // redacted\n}\n</code></pre>\n<pre><code>public class PersonController\n{\n    private readonly PersonRepository repository;\n    private readonly PersonDbContext context; // requires to Equals repository.context\n\n    public IActionResult Action()\n    {\n        var person = repository.GetClosestTo(new GeoCoordinate());\n        person.DoSomething();\n        context.SaveChanges();\n        // repository.SaveChanges(); would save the injection of the DbContext\n    }\n}\n</code></pre>\n<h3><a href=\"https://en.wikipedia.org/wiki/Domain-driven_design\" rel=\"nofollow noreferrer\">DDD</a> applications</h3>\n<p>It gets more interesting when domain models and entities are two different group of classes. This will happen when you will start implementing DDD, as this requires you to define some aggregates, which are clusters of domain objects that can be treated as a single unit. The structure of aggregates does not always perfectly map to your relational database schema, as it can provides multiple level of abstractions depending on the use case you're dealing with.</p>\n<p>For instance, an aggregate may allow a user to manage multiple addresses, but in another business context you'll might want to flatten the model and limit the modeling of the person's address to the latest value only:</p>\n<pre><code>public class PersonEntity\n{\n    [Key]\n    public int Id { get; set; }\n    public string Name { get; set; }\n    public bool IsValid { get; set; }\n    public ICollection&lt;AddressEntity&gt; Addresses { get; set; }\n}\n\npublic class AddressEntity\n{\n    [Key]\n    public int Id { get; set; }\n    public string Value { get; set; }\n    public DateTime Since { get; set; }\n    public PersonEntity Person { get; set; }\n}\n\npublic class Person\n{\n    public int Id { get; set; }\n    public string Name { get; set; }\n    public string CurrentAddressValue { get; private set; }\n}\n</code></pre>\n<h4>Implementing the unit of work pattern</h4>\n<p>First let's get back to the definition:</p>\n<blockquote>\n<p>A unit of work keeps track of everything you do during a business transaction that can affect the database. When you're done, it figures out everything that needs to be done to alter the database as a result of your work.</p>\n</blockquote>\n<p>The <code>DbContext</code> keeps tracks of every modification that happens to entities and will persist them to the database once you call the <code>SaveChanges()</code> method. Like in the simpler example, unit of work is exactly what the <code>DbContext</code> does, and using it as a unit of work is actually <a href=\"https://learn.microsoft.com/en-us/dotnet/architecture/microservices/microservice-ddd-cqrs-patterns/infrastructure-persistence-layer-design\" rel=\"nofollow noreferrer\">how Microsoft suggest you'd structure a .NET application using DDD</a>.</p>\n<h4>Implementing the repository pattern</h4>\n<p>Once again, let's get back to the definition:</p>\n<blockquote>\n<p>A repository mediates between the domain and data mapping layers, acting like an in-memory domain object collection.</p>\n</blockquote>\n<p>The <code>DbContext</code>, cannot act as a repository. Although it behaves as an in-memory collection of entities, it does not act as an in-memory collection of <strong>domain objects</strong>. In that situation, we must implement another class for the repository, that will act as our in-memory collection of domain models, and will map data from entities to domain models. However, you will find a lot of implementations that are simply a projection of the DbSet in the domain model and provide <code>IList</code>-like methods that simply maps entities back and reproduce the operations on the <code>DbSet&lt;T&gt;</code>.</p>\n<p>Although this implementation might be valid in multiple situations, it <em><strong>overemphasizes</strong></em> the <em>collection</em> part, and not enough on the <em>mediator</em> part of the definition.</p>\n<p>A repository is a mediator between the domain layer and the infrastructure layer, which means its interface is defined in the domain layer. Methods described in the interface are defined in the domain layer, and they all must have a meaning in the business context of the program. Ubiquitous language being a central concept of DDD, these methods must provide a meaningful name, and perhaps &quot;adding a person&quot; is not the right business way to name this operation.</p>\n<p>Also, all persistence-related concepts are strictly limited to the implementation of the repository. The implementation defines how a given business operation translates in the infrastructure layer, as a series of entities manipulation that will eventually be persisted to the database through an atomic database transaction.  Also note that the <code>Add</code> operation on a domain model does not necessarily implies an <code>INSERT</code> statement in the database and a <code>Remove</code> will sometimes end up in an <code>UPDATE</code> or even multiple <code>INSERT</code> statements !</p>\n<p>Actually, here is a pretty valid implementation of a repository pattern:</p>\n<pre><code>public class Person\n{\n    public void EnsureEnrollable(IPersonRepository repository)\n    {\n        if(!repository.IsEnrollable(this))\n        {\n            throw new BusinessException&lt;PersonError&gt;(PersonError.CannotEnroll);\n        }\n    }\n}\n</code></pre>\n<pre><code>public class PersonRepository : IPersonRepository\n{\n    private readonly PersonDbContext context;\n\n    public IEnumerable&lt;Person&gt; GetAll()\n    {\n        return context.Persons.AsNoTracking()\n            .Where(person =&gt; person.Active)\n            .ProjectTo&lt;Person&gt;().ToList();\n    }\n\n    public Person Enroll(Person person)\n    {\n        person.EnsureEnrollable(this);\n        context.Persons.Find(person.Id).Active = true;\n        context.SaveChanges(); // UPDATE statement\n        return person;\n    }\n\n    public bool IsEnrollable(Person person)\n    {\n        return context.Persons.Any(entity =&gt; entity.Id == person.Id &amp;&amp; !entity.Active);\n    }\n}\n</code></pre>\n<h3>Business transaction</h3>\n<p>You're saying a purpose of using unit of work is to form a <em>business transaction</em>, which is wrong. The purpose of the unit of work class is to <em>keeps track of everything you do during a business transaction that can affect the database</em>, to <em>alter the database as a result of your work</em> in an <strong>atomic</strong> operation. The repositories do share the unit of work instances, but bear in mind that dependency injection usually uses a scoped lifetime manager when injecting dbcontext. This means that instances are only shared within the same http request context, and different requests will not share changes tracking. Using a singleton lifetime manager will share instances among different http request which will provoke havoc in your application.</p>\n<p>Calling the unit of work save changes method from a repository is actually how you are expected to implementation a DDD application. The repository is the class that knows about the actual implementation of the persistence layer, and that will orchestrate all database operations to commit/rollback at the end of transaction. Saving changes from another repository when calling save changes is also <strong>the expected behavior</strong> of the unit of work pattern. The unit of work accumulates all changes made by all repositories until someone calls a commit or a rollback. If a repository makes changes to the context that are not expected to be persisted in the database, then the problem is not the unit of work persisting these changes, but the repository doing these changes.</p>\n<p>However, if your application does one atomic save changes that persists change operations from multiple repositories, it probably violates one of the DDD design principles. A repository is a one-to-one mapping with an aggregate, and an aggregate is a cluster of domain objects that can be treated as a single unit. If you are using multiple repositories, then you are trying to modify multiple units of data in a single transaction.</p>\n<p>Either your aggregate is designed too small, and you need to make a larger one that holds all data for your single transaction, with a repository that will handle all that data in a single transaction; either you're trying to make a complex transaction that spans over a wide part of your model, and you will need to implement this transaction with eventual consistency.</p>\n"}],"owner":{"account_id":2031719,"reputation":10306,"user_id":1815231,"accept_rate":31,"display_name":"Alireza"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":51670,"favorite_count":0,"down_vote_count":0,"up_vote_count":63,"answer_count":8,"score":63,"last_activity_date":1696747338,"creation_date":1382549575,"question_id":19548531,"body_markdown":"Combining the [unit of work][1] (UoW) and [repository pattern][2] is something used fairly widely nowadays. As [Martin Fowler says][3], a purpose of using UoW is to form a **business transaction** while being ignorant of how repositories actually work (being persistent ignorant). I&#39;ve reviewed many implementations; and ignoring specific details (concrete/abstract class, interface,...) they are more or less similar to what follows:\r\n\r\n    public class RepositoryBase&lt;T&gt;\r\n    {\r\n        private UoW _uow;\r\n        public RepositoryBase(UoW uow) // injecting UoW instance via constructor\r\n        {\r\n           _uow = uow;\r\n        }\r\n        public void Add(T entity)\r\n        {\r\n           // Add logic here\r\n        }\r\n        // +other CRUD methods\r\n    }\r\n\r\n    public class UoW\r\n    {\r\n        // Holding one repository per domain entity\r\n\r\n        public RepositoryBase&lt;Order&gt; OrderRep { get; set; }\r\n        public RepositoryBase&lt;Customer&gt; CustomerRep { get; set; }\r\n        // +other repositories\r\n\r\n        public void Commit()\r\n        {\r\n           // Pseudocode:\r\n           For all the contained repositories do:\r\n               store repository changes.\r\n        }\r\n    }\r\n\r\n**Now my problem:**\r\n\r\nUoW exposes public method **`Commit`** to store the changes. Also, because each repository has a shared instance of UoW, each `Repository` can access method `Commit` on UoW. Calling it by one repository makes all other repositories store their changes too; hence the result the whole concept of transaction collapses:\r\n\r\n    class Repository&lt;T&gt; : RepositoryBase&lt;T&gt;\r\n    {\r\n        private UoW _uow;\r\n        public void SomeMethod()\r\n        {\r\n            // Some processing or data manipulations here\r\n            _uow.Commit(); // Makes other repositories also save their changes\r\n        }\r\n    }\r\n\r\nI think this must be not allowed. Considering the purpose of the UoW (business transaction), the method `Commit` should be exposed only to the one who started a **business transaction**, for example business layer. What surprised me is that I couldn&#39;t find any article addressing this issue. In all of them `Commit` can be called by any repository being injected.\r\n\r\n**PS:** I know I can tell my developers not to call `Commit` in a `Repository`, but a trusted architecture is more reliable than trusted developers!\r\n\r\n  [1]: https://softwareengineering.stackexchange.com/questions/325844/best-design-pattern-for-two-specific-scenarios-the-first-one-fits-neatly-into-a\r\n  [2]: https://softwareengineering.stackexchange.com/questions/132813/whos-the-author-creator-of-the-repository-pattern\r\n  [3]: http://martinfowler.com/eaaCatalog/unitOfWork.html\r\n\r\n\r\n\r\n","title":"Unit of Work + Repository Pattern: The Fall of the Business Transaction Concept","body":"<p>Combining the <a href=\"https://softwareengineering.stackexchange.com/questions/325844/best-design-pattern-for-two-specific-scenarios-the-first-one-fits-neatly-into-a\">unit of work</a> (UoW) and <a href=\"https://softwareengineering.stackexchange.com/questions/132813/whos-the-author-creator-of-the-repository-pattern\">repository pattern</a> is something used fairly widely nowadays. As <a href=\"http://martinfowler.com/eaaCatalog/unitOfWork.html\" rel=\"nofollow noreferrer\">Martin Fowler says</a>, a purpose of using UoW is to form a <strong>business transaction</strong> while being ignorant of how repositories actually work (being persistent ignorant). I've reviewed many implementations; and ignoring specific details (concrete/abstract class, interface,...) they are more or less similar to what follows:</p>\n<pre><code>public class RepositoryBase&lt;T&gt;\n{\n    private UoW _uow;\n    public RepositoryBase(UoW uow) // injecting UoW instance via constructor\n    {\n       _uow = uow;\n    }\n    public void Add(T entity)\n    {\n       // Add logic here\n    }\n    // +other CRUD methods\n}\n\npublic class UoW\n{\n    // Holding one repository per domain entity\n\n    public RepositoryBase&lt;Order&gt; OrderRep { get; set; }\n    public RepositoryBase&lt;Customer&gt; CustomerRep { get; set; }\n    // +other repositories\n\n    public void Commit()\n    {\n       // Pseudocode:\n       For all the contained repositories do:\n           store repository changes.\n    }\n}\n</code></pre>\n<p><strong>Now my problem:</strong></p>\n<p>UoW exposes public method <strong><code>Commit</code></strong> to store the changes. Also, because each repository has a shared instance of UoW, each <code>Repository</code> can access method <code>Commit</code> on UoW. Calling it by one repository makes all other repositories store their changes too; hence the result the whole concept of transaction collapses:</p>\n<pre><code>class Repository&lt;T&gt; : RepositoryBase&lt;T&gt;\n{\n    private UoW _uow;\n    public void SomeMethod()\n    {\n        // Some processing or data manipulations here\n        _uow.Commit(); // Makes other repositories also save their changes\n    }\n}\n</code></pre>\n<p>I think this must be not allowed. Considering the purpose of the UoW (business transaction), the method <code>Commit</code> should be exposed only to the one who started a <strong>business transaction</strong>, for example business layer. What surprised me is that I couldn't find any article addressing this issue. In all of them <code>Commit</code> can be called by any repository being injected.</p>\n<p><strong>PS:</strong> I know I can tell my developers not to call <code>Commit</code> in a <code>Repository</code>, but a trusted architecture is more reliable than trusted developers!</p>\n"},{"tags":["java","jsonpath","json-path-expression"],"answers":[{"tags":[],"owner":{"account_id":11377012,"reputation":12762,"user_id":8340997,"display_name":"Anish B."},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1696744803,"creation_date":1696744437,"answer_id":77252467,"question_id":77252196,"body_markdown":"I&#39;m not sure that the JSON that you gave is correct as it contains single quotes for key and value. \r\n\r\nYour JSON is not a valid JSON. JSON only allows double quotes for key and value.\r\n\r\nValid JSON should be like this:\r\n\r\n    {\r\n      &quot;field1&quot;: &quot;value1&quot;,\r\n      &quot;field2&quot;: &quot;value2&quot;\r\n    }\r\n\r\nYour code I have tested by modifying a little bit:\r\n\r\n    public class Example {\r\n        public static void main(String args[]) throws Exception {\r\n            String path = &quot;$.field1&quot;;\r\n            Configuration conf = Configuration.defaultConfiguration().addOptions(Option.DEFAULT_PATH_LEAF_TO_NULL);\r\n            ReadContext context = JsonPath.using(conf).parse(&quot;{\\&quot;field1\\&quot;: \\&quot;value1\\&quot;,&quot; + &quot;\\&quot;field2\\&quot;: \\&quot;value2\\&quot;}&quot;);\r\n            Object value = context.read(path);\r\n            System.out.println(value);\r\n        }\r\n    }\r\n\r\nOutput:\r\n\r\n    value1\r\n\r\nPlease check the string value that is coming from `JsonNode.toString()` by debugging.\r\n\r\nYour `jsonNode.toString()` should return something this: \r\n\r\n    &quot;{\\&quot;field1\\&quot;: \\&quot;value1\\&quot;,&quot; + &quot;\\&quot;field2\\&quot;: \\&quot;value2\\&quot;}&quot;\r\n\r\nI&#39;m 100% sure that you are not getting this string from JsonNode when passed to parse method.\r\n\r\n","title":"JsonPath read returns path instead of value","body":"<p>I'm not sure that the JSON that you gave is correct as it contains single quotes for key and value.</p>\n<p>Your JSON is not a valid JSON. JSON only allows double quotes for key and value.</p>\n<p>Valid JSON should be like this:</p>\n<pre><code>{\n  &quot;field1&quot;: &quot;value1&quot;,\n  &quot;field2&quot;: &quot;value2&quot;\n}\n</code></pre>\n<p>Your code I have tested by modifying a little bit:</p>\n<pre><code>public class Example {\n    public static void main(String args[]) throws Exception {\n        String path = &quot;$.field1&quot;;\n        Configuration conf = Configuration.defaultConfiguration().addOptions(Option.DEFAULT_PATH_LEAF_TO_NULL);\n        ReadContext context = JsonPath.using(conf).parse(&quot;{\\&quot;field1\\&quot;: \\&quot;value1\\&quot;,&quot; + &quot;\\&quot;field2\\&quot;: \\&quot;value2\\&quot;}&quot;);\n        Object value = context.read(path);\n        System.out.println(value);\n    }\n}\n</code></pre>\n<p>Output:</p>\n<pre><code>value1\n</code></pre>\n<p>Please check the string value that is coming from <code>JsonNode.toString()</code> by debugging.</p>\n<p>Your <code>jsonNode.toString()</code> should return something this:</p>\n<pre><code>&quot;{\\&quot;field1\\&quot;: \\&quot;value1\\&quot;,&quot; + &quot;\\&quot;field2\\&quot;: \\&quot;value2\\&quot;}&quot;\n</code></pre>\n<p>I'm 100% sure that you are not getting this string from JsonNode when passed to parse method.</p>\n"}],"owner":{"account_id":8434177,"reputation":317,"user_id":6328823,"display_name":"AznBoyStride"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":71,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77252467,"answer_count":1,"score":1,"last_activity_date":1696744803,"creation_date":1696735310,"question_id":77252196,"body_markdown":"I have a JsonNode with the structure:\r\n```\r\n{\r\n&#39;field1&#39;: &#39;value1&#39;\r\n&#39;field2&#39;: &#39;value2&#39;\r\n}\r\n```\r\n\r\nI want to retrieve `&#39;value1&#39;` by specifying a json path: `&quot;$.field1&quot;`. However, instead of getting `&#39;value1&#39;`, I&#39;m getting the path itself. See the following illustration:\r\n\r\n\r\n```\r\nJsonNode node = ...\r\nString path = &quot;$.field1&quot;;\r\nConfiguration conf = Configuration.defaultConfiguration().addOptions(Option.DEFAULT_PATH_LEAF_TO_NULL);\r\n\r\nReadContext context = JsonPath.using(conf).parse(jsonNode.toString());\r\nObject value = context.read(path);\r\n\r\nSystem.out.println(value);\r\n\r\n// Output: [&quot;$[&#39;field1&#39;]&quot;]\r\n```\r\n\r\nWhy am I getting `[&quot;$[&#39;field1&#39;]&quot;]` ? It looks like it just normalized the path..","title":"JsonPath read returns path instead of value","body":"<p>I have a JsonNode with the structure:</p>\n<pre><code>{\n'field1': 'value1'\n'field2': 'value2'\n}\n</code></pre>\n<p>I want to retrieve <code>'value1'</code> by specifying a json path: <code>&quot;$.field1&quot;</code>. However, instead of getting <code>'value1'</code>, I'm getting the path itself. See the following illustration:</p>\n<pre><code>JsonNode node = ...\nString path = &quot;$.field1&quot;;\nConfiguration conf = Configuration.defaultConfiguration().addOptions(Option.DEFAULT_PATH_LEAF_TO_NULL);\n\nReadContext context = JsonPath.using(conf).parse(jsonNode.toString());\nObject value = context.read(path);\n\nSystem.out.println(value);\n\n// Output: [&quot;$['field1']&quot;]\n</code></pre>\n<p>Why am I getting <code>[&quot;$['field1']&quot;]</code> ? It looks like it just normalized the path..</p>\n"},{"tags":["java","intellij-idea","coding-style"],"comments":[{"owner":{"account_id":7424117,"reputation":56335,"user_id":5647260,"accept_rate":82,"display_name":"Andrew Li"},"score":1,"creation_date":1465866801,"post_id":37801457,"comment_id":63068468,"body_markdown":"Boolean is a wrapper class, use lowercase primitive boolean.. and yes, omitting is in the getter/setters is convention. Consider isPlaying. We would set to Playing and get Playing or not.","body":"Boolean is a wrapper class, use lowercase primitive boolean.. and yes, omitting is in the getter/setters is convention. Consider isPlaying. We would set to Playing and get Playing or not."},{"owner":{"account_id":2094057,"reputation":506074,"user_id":1863229,"accept_rate":58,"display_name":"Tim Biegeleisen"},"score":2,"creation_date":1465867134,"post_id":37801457,"comment_id":63068537,"body_markdown":"This is a convention.  IntelliJ is assuming that the base name is `ForLaboratory` and that the `is` part is only present because you are using a boolean.  Try it with `String isForLaboratory` and you will see this.","body":"This is a convention.  IntelliJ is assuming that the base name is <code>ForLaboratory</code> and that the <code>is</code> part is only present because you are using a boolean.  Try it with <code>String isForLaboratory</code> and you will see this."}],"answers":[{"tags":[],"owner":{"account_id":2264130,"reputation":38897,"user_id":1993366,"accept_rate":86,"display_name":"vikingsteve"},"down_vote_count":0,"up_vote_count":8,"is_accepted":true,"score":8,"last_activity_date":1465888521,"creation_date":1465888521,"answer_id":37805349,"question_id":37801457,"body_markdown":"If you pop up the Dialog to `Generate` the `Getter and Setter`, you can see:\r\n\r\n    Getter template: IntelliJ Default\r\n    Setter template: IntelliJ Default\r\n\r\nClick on the button to the right of `Getter Template` labelled with `...` and you can see the template code includes the following:\r\n\r\n    #if ($StringUtil.startsWithIgnoreCase($name, &#39;is&#39;))\r\n      #set($name = $StringUtil.decapitalize($name))\r\n    #else\r\n      is##\r\n\r\nIn other words there is special handling for fields starting with `is` - and if you want to write your own template, you can of course do this :)\r\n\r\nAs for why - there is a javabeans standard for boolean fields where the getter for a field named (for example) `boolean enabled` can be `isEnabled()` instead of `getEnabled()`, and it&#39;s surely related to this.","title":"Why do Intellij default getter/setter templates delete my boolean &quot;is&quot; variable name prefix?","body":"<p>If you pop up the Dialog to <code>Generate</code> the <code>Getter and Setter</code>, you can see:</p>\n\n<pre><code>Getter template: IntelliJ Default\nSetter template: IntelliJ Default\n</code></pre>\n\n<p>Click on the button to the right of <code>Getter Template</code> labelled with <code>...</code> and you can see the template code includes the following:</p>\n\n<pre><code>#if ($StringUtil.startsWithIgnoreCase($name, 'is'))\n  #set($name = $StringUtil.decapitalize($name))\n#else\n  is##\n</code></pre>\n\n<p>In other words there is special handling for fields starting with <code>is</code> - and if you want to write your own template, you can of course do this :)</p>\n\n<p>As for why - there is a javabeans standard for boolean fields where the getter for a field named (for example) <code>boolean enabled</code> can be <code>isEnabled()</code> instead of <code>getEnabled()</code>, and it's surely related to this.</p>\n"},{"tags":[],"owner":{"account_id":1103179,"reputation":1695,"user_id":1095120,"display_name":"Nicholas Lu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1515244091,"creation_date":1515244091,"answer_id":48127648,"question_id":37801457,"body_markdown":"In IntelliJ version 15+, you have to use primitive boolean to make IntelliJ generate a Get function with &quot;is&quot; prefix. \r\n\r\nthe default `Getter Template` looks like this:\r\n\r\n    #if ($field.boolean &amp;&amp; $field.primitive)\r\n      #if ($StringUtil.startsWithIgnoreCase($name, &#39;is&#39;))\r\n        #set($name = $StringUtil.decapitalize($name))\r\n      #else\r\n        is##\r\n    #end\r\n\r\nSo the correct way in IntelliJ 15.x and up should be like this: \r\n\r\n    private boolean forLaboratory = false;\r\n\r\nafter auto generation:\r\n\r\n    public boolean getForLaboratory() {\r\n        return forLaboratory;\r\n    }\r\n\r\n    public void isForLaboratory(boolean forLaboratory) {\r\n        this.forLaboratory = forLaboratory;\r\n    }\r\n\r\n","title":"Why do Intellij default getter/setter templates delete my boolean &quot;is&quot; variable name prefix?","body":"<p>In IntelliJ version 15+, you have to use primitive boolean to make IntelliJ generate a Get function with \"is\" prefix. </p>\n\n<p>the default <code>Getter Template</code> looks like this:</p>\n\n<pre><code>#if ($field.boolean &amp;&amp; $field.primitive)\n  #if ($StringUtil.startsWithIgnoreCase($name, 'is'))\n    #set($name = $StringUtil.decapitalize($name))\n  #else\n    is##\n#end\n</code></pre>\n\n<p>So the correct way in IntelliJ 15.x and up should be like this: </p>\n\n<pre><code>private boolean forLaboratory = false;\n</code></pre>\n\n<p>after auto generation:</p>\n\n<pre><code>public boolean getForLaboratory() {\n    return forLaboratory;\n}\n\npublic void isForLaboratory(boolean forLaboratory) {\n    this.forLaboratory = forLaboratory;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11260582,"reputation":102,"user_id":8259045,"display_name":"T4puSD"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696744080,"creation_date":1696744080,"answer_id":77252456,"question_id":37801457,"body_markdown":"I was also facing this issue recently while I was working on a Spring boot application with spring data MongoDB. For isDeleted property there was two key in the database. `isDeleted` and `deleted`.\r\n\r\nWhile i was investigating i found that in my Document java class the `isDeleted` property was getting exposed with `getDeleted` and `setDeleted` method instead of `getIsDeleted` and `setIsDeleted`. Here is a sneak peak of the document class:   \r\n**Before**\r\n\r\n    public class Book {\r\n        private Long id;\r\n        private String title;\r\n        private Boolean isDeleted = false;\r\n\r\n        public Boolean getDeleted() {\r\n            return isDeleted;\r\n        }\r\n\r\n        public void setDeleted(Boolean deleted) {\r\n            isDeleted = deleted;\r\n        }\r\n\r\n       // other getters and setters omitted\r\n    }\r\n\r\nThis was happening because I was utilizing `Intellij Idea`&#39;s getters and setters generation feature. \r\n\r\nI figured this can be changed easily by modifying the existing code generation template available in `Intellij Idea`.\r\n\r\nTo Add new Custom Getters And Setters Template follow this:\r\n```\r\nOpen Any Java File &gt; Press ALT + INS &gt; Getters and Setters &gt; Select ... Symbol &gt; Press + Sign on the pop up box &gt; Enter template name &gt; Paste New Template &gt; Press Save\r\n```\r\nAfterwards, while generating the getters and setters just select your custom template and press ok. **And it should fix your problem.** \r\n  \r\n**After**\r\n```\r\n    public class Book {\r\n        private Long id;\r\n        private String title;\r\n        private Boolean isDeleted = false;\r\n    \r\n        public Boolean getIsDeleted() {\r\n          return isDeleted;\r\n        }\r\n    \r\n        public void setIsDeleted(Boolean isDeleted) {\r\n          this.isDeleted = isDeleted;\r\n        }\r\n    \r\n        // other getters and setters omitted\r\n        }\r\n```\r\nHere is my custom templates which fix this issue:\r\n\r\n 1. Modified Intellij Default `Getters` Generation Template\r\n```\r\n#if($field.modifierStatic)\r\nstatic ##\r\n#end\r\n$field.type ##\r\n#if($field.recordComponent)\r\n  ${field.name}##\r\n#else\r\n#set($name = $StringUtil.capitalizeWithJavaBeanConvention($StringUtil.sanitizeJavaIdentifier($helper.getPropertyName($field, $project))))\r\n#if ($field.boolean &amp;&amp; $field.name.startsWith(&quot;is&quot;))\r\n  getIs##\r\n#else\r\n  get##\r\n#end\r\n${name}##\r\n#end\r\n() {\r\n  return $field.name;\r\n}\r\n```\r\n\r\n 2. Modified Intellij Default `Setters` Generation Template\r\n\r\n```\r\n#set($paramName = $helper.getParamName($field, $project))\r\n#if($field.modifierStatic)\r\nstatic ##\r\n#end\r\nvoid ##\r\n#set($name = $StringUtil.capitalizeWithJavaBeanConvention($StringUtil.sanitizeJavaIdentifier($helper.getPropertyName($field, $project))))\r\n#if ($field.boolean &amp;&amp; $field.name.startsWith(&quot;is&quot;))\r\n  #set ($paramName = $field.name)\r\n  setIs##\r\n#else\r\n  set##\r\n#end\r\n${name}($field.type $paramName) {\r\n  #if ($field.name == $paramName)\r\n    #if (!$field.modifierStatic)\r\n      this.##\r\n    #else\r\n      $classname.##\r\n    #end\r\n  #end\r\n    $field.name = $paramName;\r\n}\r\n```\r\n\r\n 3. Modified Builder Pattern `Setters` Generation Template\r\n```\r\n#set($paramName = $helper.getParamName($field, $project))\r\npublic ##\r\n#if($field.modifierStatic)\r\nstatic void ##\r\n#else\r\n  $classSignature ##\r\n#end\r\n#set($name = $StringUtil.capitalizeWithJavaBeanConvention($StringUtil.sanitizeJavaIdentifier($helper.getPropertyName($field, $project))))\r\n#if ($field.boolean &amp;&amp; $field.name.startsWith(&quot;is&quot;))\r\n    #set ($paramName = $field.name)\r\nsetIs##\r\n#else\r\nset##\r\n#end\r\n${name}($field.type $paramName) {\r\n#if ($field.name == $paramName)\r\n  #if (!$field.modifierStatic)\r\n  this.##\r\n  #else\r\n    $classname.##\r\n  #end\r\n#end\r\n$field.name = $paramName;\r\n#if(!$field.modifierStatic)\r\nreturn this;\r\n#end\r\n}\r\n```","title":"Why do Intellij default getter/setter templates delete my boolean &quot;is&quot; variable name prefix?","body":"<p>I was also facing this issue recently while I was working on a Spring boot application with spring data MongoDB. For isDeleted property there was two key in the database. <code>isDeleted</code> and <code>deleted</code>.</p>\n<p>While i was investigating i found that in my Document java class the <code>isDeleted</code> property was getting exposed with <code>getDeleted</code> and <code>setDeleted</code> method instead of <code>getIsDeleted</code> and <code>setIsDeleted</code>. Here is a sneak peak of the document class:<br />\n<strong>Before</strong></p>\n<pre><code>public class Book {\n    private Long id;\n    private String title;\n    private Boolean isDeleted = false;\n\n    public Boolean getDeleted() {\n        return isDeleted;\n    }\n\n    public void setDeleted(Boolean deleted) {\n        isDeleted = deleted;\n    }\n\n   // other getters and setters omitted\n}\n</code></pre>\n<p>This was happening because I was utilizing <code>Intellij Idea</code>'s getters and setters generation feature.</p>\n<p>I figured this can be changed easily by modifying the existing code generation template available in <code>Intellij Idea</code>.</p>\n<p>To Add new Custom Getters And Setters Template follow this:</p>\n<pre><code>Open Any Java File &gt; Press ALT + INS &gt; Getters and Setters &gt; Select ... Symbol &gt; Press + Sign on the pop up box &gt; Enter template name &gt; Paste New Template &gt; Press Save\n</code></pre>\n<p>Afterwards, while generating the getters and setters just select your custom template and press ok. <strong>And it should fix your problem.</strong></p>\n<p><strong>After</strong></p>\n<pre><code>    public class Book {\n        private Long id;\n        private String title;\n        private Boolean isDeleted = false;\n    \n        public Boolean getIsDeleted() {\n          return isDeleted;\n        }\n    \n        public void setIsDeleted(Boolean isDeleted) {\n          this.isDeleted = isDeleted;\n        }\n    \n        // other getters and setters omitted\n        }\n</code></pre>\n<p>Here is my custom templates which fix this issue:</p>\n<ol>\n<li>Modified Intellij Default <code>Getters</code> Generation Template</li>\n</ol>\n<pre><code>#if($field.modifierStatic)\nstatic ##\n#end\n$field.type ##\n#if($field.recordComponent)\n  ${field.name}##\n#else\n#set($name = $StringUtil.capitalizeWithJavaBeanConvention($StringUtil.sanitizeJavaIdentifier($helper.getPropertyName($field, $project))))\n#if ($field.boolean &amp;&amp; $field.name.startsWith(&quot;is&quot;))\n  getIs##\n#else\n  get##\n#end\n${name}##\n#end\n() {\n  return $field.name;\n}\n</code></pre>\n<ol start=\"2\">\n<li>Modified Intellij Default <code>Setters</code> Generation Template</li>\n</ol>\n<pre><code>#set($paramName = $helper.getParamName($field, $project))\n#if($field.modifierStatic)\nstatic ##\n#end\nvoid ##\n#set($name = $StringUtil.capitalizeWithJavaBeanConvention($StringUtil.sanitizeJavaIdentifier($helper.getPropertyName($field, $project))))\n#if ($field.boolean &amp;&amp; $field.name.startsWith(&quot;is&quot;))\n  #set ($paramName = $field.name)\n  setIs##\n#else\n  set##\n#end\n${name}($field.type $paramName) {\n  #if ($field.name == $paramName)\n    #if (!$field.modifierStatic)\n      this.##\n    #else\n      $classname.##\n    #end\n  #end\n    $field.name = $paramName;\n}\n</code></pre>\n<ol start=\"3\">\n<li>Modified Builder Pattern <code>Setters</code> Generation Template</li>\n</ol>\n<pre><code>#set($paramName = $helper.getParamName($field, $project))\npublic ##\n#if($field.modifierStatic)\nstatic void ##\n#else\n  $classSignature ##\n#end\n#set($name = $StringUtil.capitalizeWithJavaBeanConvention($StringUtil.sanitizeJavaIdentifier($helper.getPropertyName($field, $project))))\n#if ($field.boolean &amp;&amp; $field.name.startsWith(&quot;is&quot;))\n    #set ($paramName = $field.name)\nsetIs##\n#else\nset##\n#end\n${name}($field.type $paramName) {\n#if ($field.name == $paramName)\n  #if (!$field.modifierStatic)\n  this.##\n  #else\n    $classname.##\n  #end\n#end\n$field.name = $paramName;\n#if(!$field.modifierStatic)\nreturn this;\n#end\n}\n</code></pre>\n"}],"owner":{"account_id":3268751,"reputation":1481,"user_id":2752615,"accept_rate":67,"display_name":"Arif Acar"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3108,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"accepted_answer_id":37805349,"answer_count":3,"score":9,"last_activity_date":1696744080,"creation_date":1465866659,"question_id":37801457,"body_markdown":"I have an entity. I defined variable as boolean and I created Getter and Setter methods with Intellij Idea Shortcuts.\r\n\r\n    private Boolean isForLaboratory = false;\r\n\r\n[![ddasd][1]][1]\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/AbFmm.png\r\n  [2]: http://i.stack.imgur.com/qzK8d.png\r\n\r\nAfter creation it generated this:\r\n\r\n    public Boolean getForLaboratory() {\r\n        return isForLaboratory;\r\n    }\r\n\r\n    public void setForLaboratory(Boolean forLaboratory) {\r\n        isForLaboratory = forLaboratory;\r\n    }\r\n\r\nI expected getIsForLaboratory and setIsForLaboratory. Is it general convention for Java? Why Intellij deleted my prefixes?","title":"Why do Intellij default getter/setter templates delete my boolean &quot;is&quot; variable name prefix?","body":"<p>I have an entity. I defined variable as boolean and I created Getter and Setter methods with Intellij Idea Shortcuts.</p>\n\n<pre><code>private Boolean isForLaboratory = false;\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/AbFmm.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/AbFmm.png\" alt=\"ddasd\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/qzK8d.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/qzK8d.png\" alt=\"enter image description here\"></a></p>\n\n<p>After creation it generated this:</p>\n\n<pre><code>public Boolean getForLaboratory() {\n    return isForLaboratory;\n}\n\npublic void setForLaboratory(Boolean forLaboratory) {\n    isForLaboratory = forLaboratory;\n}\n</code></pre>\n\n<p>I expected getIsForLaboratory and setIsForLaboratory. Is it general convention for Java? Why Intellij deleted my prefixes?</p>\n"},{"tags":["java","spring-boot"],"comments":[{"owner":{"account_id":15064163,"reputation":13519,"user_id":10871900,"display_name":"dan1st is crying"},"score":0,"creation_date":1696750571,"post_id":77252431,"comment_id":136191472,"body_markdown":"Spring 6/Spring Boot 3 switched to Jakarta EE. You therefore have to use `jakarta` dependencies instead of `javax` dependencies. This also applies to your package name. See also the comments of https://stackoverflow.com/questions/74982010/spring-security-cannot-access-javax-servlet-filter","body":"Spring 6/Spring Boot 3 switched to Jakarta EE. You therefore have to use <code>jakarta</code> dependencies instead of <code>javax</code> dependencies. This also applies to your package name. See also the comments of <a href=\"https://stackoverflow.com/questions/74982010/spring-security-cannot-access-javax-servlet-filter\" title=\"spring security cannot access javax servlet filter\">stackoverflow.com/questions/74982010/&hellip;</a>"},{"owner":{"account_id":26670648,"reputation":1,"user_id":20282129,"display_name":"diego alamu"},"score":0,"creation_date":1696757242,"post_id":77252431,"comment_id":136192015,"body_markdown":"@dan1st so it should be fine if I use an older version? I&#39;m doing this for a assignment so shouldn&#39;t be an issue?","body":"@dan1st so it should be fine if I use an older version? I&#39;m doing this for a assignment so shouldn&#39;t be an issue?"},{"owner":{"account_id":15064163,"reputation":13519,"user_id":10871900,"display_name":"dan1st is crying"},"score":0,"creation_date":1696759269,"post_id":77252431,"comment_id":136192182,"body_markdown":"Either use Spring Boot 2.x or use `jakarta` dependencies.","body":"Either use Spring Boot 2.x or use <code>jakarta</code> dependencies."}],"owner":{"account_id":26670648,"reputation":1,"user_id":20282129,"display_name":"diego alamu"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1696770254,"answer_count":0,"score":0,"last_activity_date":1696743223,"creation_date":1696743223,"question_id":77252431,"body_markdown":"I am trying to configure Springboot security and it&#39;s giving me an error when running the application\r\n```\r\nJava\r\npackage com.example.gym.config;\r\n\r\nimport com.example.gym.service.UserService;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.context.annotation.Configuration;\r\nimport org.springframework.security.authentication.dao.DaoAuthenticationProvider;\r\nimport org.springframework.security.config.annotation.authentication.builders.AuthenticationManagerBuilder;\r\nimport org.springframework.security.config.annotation.authentication.configurers.userdetails.DaoAuthenticationConfigurer;\r\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\r\nimport org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\r\nimport org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter;\r\nimport org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;\r\nimport org.springframework.security.web.util.matcher.AntPathRequestMatcher;\r\n\r\n@Configuration\r\n@EnableWebSecurity\r\npublic class SecurityConfiguration extends WebSecurityConfigurerAdapter {\r\n\r\n    @Autowired\r\n    private UserService userService;\r\n\r\n    @Bean\r\n    public BCryptPasswordEncoder passwordEncoder(){\r\n        return new BCryptPasswordEncoder();\r\n    }\r\n    @Bean\r\n    DaoAuthenticationProvider authenticationProvider(){\r\n        DaoAuthenticationProvider auth = new DaoAuthenticationProvider();\r\n        auth.setUserDetailsService(userService);\r\n        auth.setPasswordEncoder(passwordEncoder());\r\n        return auth;\r\n    }\r\n    @Override\r\n    protected void configure(AuthenticationManagerBuilder auth) throws Exception{\r\n        auth.authenticationProvider(authenticationProvider());\r\n    }\r\n    @Override\r\n    protected void configure(HttpSecurity http) throws Exception{\r\n        http.authorizeRequests().antMatchers(\r\n                &quot;/registration**&quot;,\r\n                &quot;/js/**&quot;,\r\n                &quot;/css/**&quot;,\r\n                &quot;/img/**&quot;).permitAll()\r\n                .anyRequest().authenticated().and().formLogin().loginPage(&quot;/login&quot;).permitAll()\r\n                .and().logout().invalidateHttpSession(true).logoutRequestMatcher(new AntPathRequestMatcher(&quot;/logout&quot;))\r\n                .logoutSuccessUrl(&quot;/login?logout&quot;).permitAll();\r\n    }\r\n}\r\n```\r\nI am getting this error:\r\njava: cannot access javax.servlet.Filter\r\nclass file for javax.servlet.Filter not found\r\nI have checked previous solution from here and they said to add starter web dependency but my pom.xml file already has it.\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;3.1.4&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;groupId&gt;com.example&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;gym&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;name&gt;gym&lt;/name&gt;\r\n\t&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;21&lt;/java.version&gt;\r\n\t&lt;/properties&gt;\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.thymeleaf.extras&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;thymeleaf-extras-springsecurity6&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.mysql&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;mysql-connector-j&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n\t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-security-config&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;5.4.2&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;excludes&gt;\r\n\t\t\t\t\t\t&lt;exclude&gt;\r\n\t\t\t\t\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n\t\t\t\t\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n\t\t\t\t\t\t&lt;/exclude&gt;\r\n\t\t\t\t\t&lt;/excludes&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n```\r\n\r\n\r\nI have taken this from maven repository:\r\n```\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;javax.servlet&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;4.0.1&lt;/version&gt;\r\n\t\t\t&lt;scope&gt;provided&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n```\r\n\r\nAnd the application runs but then goes into another error:\r\nError processing condition on org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration.authenticationEventPublisher","title":"Springboot Security Configureation class file for javax.servlet.Filter not found","body":"<p>I am trying to configure Springboot security and it's giving me an error when running the application</p>\n<pre><code>Java\npackage com.example.gym.config;\n\nimport com.example.gym.service.UserService;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.security.authentication.dao.DaoAuthenticationProvider;\nimport org.springframework.security.config.annotation.authentication.builders.AuthenticationManagerBuilder;\nimport org.springframework.security.config.annotation.authentication.configurers.userdetails.DaoAuthenticationConfigurer;\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\nimport org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\nimport org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter;\nimport org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;\nimport org.springframework.security.web.util.matcher.AntPathRequestMatcher;\n\n@Configuration\n@EnableWebSecurity\npublic class SecurityConfiguration extends WebSecurityConfigurerAdapter {\n\n    @Autowired\n    private UserService userService;\n\n    @Bean\n    public BCryptPasswordEncoder passwordEncoder(){\n        return new BCryptPasswordEncoder();\n    }\n    @Bean\n    DaoAuthenticationProvider authenticationProvider(){\n        DaoAuthenticationProvider auth = new DaoAuthenticationProvider();\n        auth.setUserDetailsService(userService);\n        auth.setPasswordEncoder(passwordEncoder());\n        return auth;\n    }\n    @Override\n    protected void configure(AuthenticationManagerBuilder auth) throws Exception{\n        auth.authenticationProvider(authenticationProvider());\n    }\n    @Override\n    protected void configure(HttpSecurity http) throws Exception{\n        http.authorizeRequests().antMatchers(\n                &quot;/registration**&quot;,\n                &quot;/js/**&quot;,\n                &quot;/css/**&quot;,\n                &quot;/img/**&quot;).permitAll()\n                .anyRequest().authenticated().and().formLogin().loginPage(&quot;/login&quot;).permitAll()\n                .and().logout().invalidateHttpSession(true).logoutRequestMatcher(new AntPathRequestMatcher(&quot;/logout&quot;))\n                .logoutSuccessUrl(&quot;/login?logout&quot;).permitAll();\n    }\n}\n</code></pre>\n<p>I am getting this error:\njava: cannot access javax.servlet.Filter\nclass file for javax.servlet.Filter not found\nI have checked previous solution from here and they said to add starter web dependency but my pom.xml file already has it.</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;3.1.4&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.example&lt;/groupId&gt;\n    &lt;artifactId&gt;gym&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;gym&lt;/name&gt;\n    &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;21&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.thymeleaf.extras&lt;/groupId&gt;\n            &lt;artifactId&gt;thymeleaf-extras-springsecurity6&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.mysql&lt;/groupId&gt;\n            &lt;artifactId&gt;mysql-connector-j&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-security-config&lt;/artifactId&gt;\n            &lt;version&gt;5.4.2&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;excludes&gt;\n                        &lt;exclude&gt;\n                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n                        &lt;/exclude&gt;\n                    &lt;/excludes&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p>I have taken this from maven repository:</p>\n<pre><code>        &lt;dependency&gt;\n            &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\n            &lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt;\n            &lt;version&gt;4.0.1&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<p>And the application runs but then goes into another error:\nError processing condition on org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration.authenticationEventPublisher</p>\n"},{"tags":["java","junit","mockito","junit4"],"answers":[{"tags":[],"owner":{"account_id":125727,"reputation":133941,"user_id":321697,"accept_rate":97,"display_name":"Kevin Coppock"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1505680060,"creation_date":1505680060,"answer_id":46268575,"question_id":46268452,"body_markdown":"What exactly are you trying to test? Is that test that &quot;when `setImageOnImageView(RequestCreator, ImageView)` is called, it invokes `RequestCreator.into(ImageView)`&quot;?\r\n\r\nIf that&#39;s what you&#39;re trying to test, you aren&#39;t wanting to test that it &quot;returns void&quot;. Rather, I would recommend something like:\r\n\r\n    @Test\r\n    public void itInvokesRequestCreatorIntoOnProvidedImageView() {\r\n        RequestCreator creator = mock(RequestCreator.class);\r\n        ImageView imageView = mock(ImageView.class);\r\n        \r\n        setImageOnImageView(creator, imageView);\r\n        verify(creator).into(imageView);\r\n    }","title":"How to test a void method using Mockito","body":"<p>What exactly are you trying to test? Is that test that \"when <code>setImageOnImageView(RequestCreator, ImageView)</code> is called, it invokes <code>RequestCreator.into(ImageView)</code>\"?</p>\n\n<p>If that's what you're trying to test, you aren't wanting to test that it \"returns void\". Rather, I would recommend something like:</p>\n\n<pre><code>@Test\npublic void itInvokesRequestCreatorIntoOnProvidedImageView() {\n    RequestCreator creator = mock(RequestCreator.class);\n    ImageView imageView = mock(ImageView.class);\n\n    setImageOnImageView(creator, imageView);\n    verify(creator).into(imageView);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15591403,"reputation":5743,"user_id":12894468,"display_name":"Sivaram Rasathurai"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1652936715,"creation_date":1652936715,"answer_id":72298876,"question_id":46268452,"body_markdown":"If you want to verify a void method is not throwing anything, then you can use the assertDoesNotThrows method as follow\r\n\r\n&gt; Assert that execution of the supplied executable does not throw any kind of exception.\r\nUsage Note\r\nAlthough any exception thrown from a test method will cause the test to fail, there are certain use cases where it can be beneficial to explicitly assert that an exception is not thrown for a given code block within a test method.\r\n\r\n\r\n\r\n```\r\n Assertions.assertDoesNotThrow(() -&gt; testCl.voidM(&quot;test&quot;...));\r\n```\r\n\r\nIf you have some dependencies in your class then you can use verify to check whether that dependency is invoked or not.","title":"How to test a void method using Mockito","body":"<p>If you want to verify a void method is not throwing anything, then you can use the assertDoesNotThrows method as follow</p>\n<blockquote>\n<p>Assert that execution of the supplied executable does not throw any kind of exception.\nUsage Note\nAlthough any exception thrown from a test method will cause the test to fail, there are certain use cases where it can be beneficial to explicitly assert that an exception is not thrown for a given code block within a test method.</p>\n</blockquote>\n<pre><code> Assertions.assertDoesNotThrow(() -&gt; testCl.voidM(&quot;test&quot;...));\n</code></pre>\n<p>If you have some dependencies in your class then you can use verify to check whether that dependency is invoked or not.</p>\n"}],"owner":{"account_id":1136458,"reputation":10832,"user_id":1652954,"accept_rate":58,"display_name":"Amrmsmb"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6635,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":46268575,"answer_count":2,"score":4,"last_activity_date":1696741892,"creation_date":1505679298,"question_id":46268452,"body_markdown":"the below posted method in the code section returns void. I want to know how to test a method that returns void.\r\nI checked some answers but the use &quot;doThrow()&quot; with passing an exception, but in my case the method does not throw any exception\r\n\r\nplease let me know how can I test a method returns void?\r\n\r\n**code**\r\n\r\n    public void setImageOnImageView(RequestCreator requestCreator, ImageView imgView) {\r\n        requestCreator.into(imgView);\r\n    }\r\n\r\n**testing**:\r\n\r\n    public class ValidationTest {\r\n        @Mock\r\n        private Context mCtx = null;\r\n        @Rule\r\n        public MockitoRule mockitoRule = MockitoJUnit.rule();\r\n    \r\n        @Before\r\n        public void setUp() throws Exception {\r\n            mCtx = Mockito.mock(Context.class);\r\n            Assert.assertNotNull(&quot;Context is not null&quot;, mCtx);\r\n        }\r\n    \r\n        @Test\r\n        public void setImageOnImageView() throws Exception {\r\n            Uri mockUri = mock(Uri.class);\r\n            RequestCreator requestCreator = Picasso.with(mCtx).load(mockUri);\r\n            RequestCreator spyRequestCreator = spy(requestCreator);\r\n            ImageView imageView = new ImageView(mCtx);\r\n            ImageView spyImageView = spy(imageView);\r\n    \r\n            doThrow().when(spyRequestCreator).into(spyImageView);\r\n            //spyRequestCreator.into(spyImageView);\r\n        }\r\n    }\r\n\r\n","title":"How to test a void method using Mockito","body":"<p>the below posted method in the code section returns void. I want to know how to test a method that returns void.\nI checked some answers but the use \"doThrow()\" with passing an exception, but in my case the method does not throw any exception</p>\n\n<p>please let me know how can I test a method returns void?</p>\n\n<p><strong>code</strong></p>\n\n<pre><code>public void setImageOnImageView(RequestCreator requestCreator, ImageView imgView) {\n    requestCreator.into(imgView);\n}\n</code></pre>\n\n<p><strong>testing</strong>:</p>\n\n<pre><code>public class ValidationTest {\n    @Mock\n    private Context mCtx = null;\n    @Rule\n    public MockitoRule mockitoRule = MockitoJUnit.rule();\n\n    @Before\n    public void setUp() throws Exception {\n        mCtx = Mockito.mock(Context.class);\n        Assert.assertNotNull(\"Context is not null\", mCtx);\n    }\n\n    @Test\n    public void setImageOnImageView() throws Exception {\n        Uri mockUri = mock(Uri.class);\n        RequestCreator requestCreator = Picasso.with(mCtx).load(mockUri);\n        RequestCreator spyRequestCreator = spy(requestCreator);\n        ImageView imageView = new ImageView(mCtx);\n        ImageView spyImageView = spy(imageView);\n\n        doThrow().when(spyRequestCreator).into(spyImageView);\n        //spyRequestCreator.into(spyImageView);\n    }\n}\n</code></pre>\n"},{"tags":["java","oop","language-agnostic","encapsulation","abstraction"],"comments":[{"owner":{"account_id":3096332,"reputation":391,"user_id":2621426,"accept_rate":58,"display_name":"Mr ASquare"},"score":5,"creation_date":1499150517,"post_id":15176356,"comment_id":76774821,"body_markdown":"I don&#39;t know why people compare Abstraction and Encapsulation. Why can&#39;t we accept them as two different OOP concepts.","body":"I don&#39;t know why people compare Abstraction and Encapsulation. Why can&#39;t we accept them as two different OOP concepts."},{"owner":{"account_id":6521913,"reputation":292,"user_id":5045878,"accept_rate":100,"display_name":"logdev"},"score":6,"creation_date":1536061916,"post_id":15176356,"comment_id":91280874,"body_markdown":"Possible duplicate of [difference between abstraction and encapsulation?](https://stackoverflow.com/questions/742341/difference-between-abstraction-and-encapsulation)","body":"Possible duplicate of <a href=\"https://stackoverflow.com/questions/742341/difference-between-abstraction-and-encapsulation\">difference between abstraction and encapsulation?</a>"},{"owner":{"account_id":4324390,"reputation":529,"user_id":3531600,"accept_rate":88,"display_name":"S Vinesh"},"score":0,"creation_date":1554366263,"post_id":15176356,"comment_id":97727363,"body_markdown":"@WpfBee Abstraction has nothing to do with hiding, Just checkout my answer","body":"@WpfBee Abstraction has nothing to do with hiding, Just checkout my answer"}],"answers":[{"tags":[],"owner":{"account_id":298866,"reputation":10614,"user_id":605129,"accept_rate":67,"display_name":"Mortalus"},"down_vote_count":2,"up_vote_count":10,"is_accepted":false,"score":8,"last_activity_date":1362240007,"creation_date":1362240007,"answer_id":15176437,"question_id":15176356,"body_markdown":"**Abstraction:**\r\nIs usually done to provide polymorphic access to a set of classes.\r\nAn abstract class cannot be instantiated thus another class will have to derive from it to create a more concrete representation.\r\n\r\nA common usage example of an abstract class can be an implementation of a template method design pattern where an abstract injection point is introduces so that the concrete class can implement it in its own &quot;concrete&quot; way.\r\n\r\nsee: http://en.wikipedia.org/wiki/Abstraction_(computer_science)\r\n\r\n\r\n\r\n**Encapsulation:**\r\nIt is the process of hiding the implementation complexity of a specific class from the client that is going to use it, keep in mind that the &quot;client&quot; may be a program or event the person who wrote the class.\r\n\r\nsee: http://en.wikipedia.org/wiki/Encapsulation_(object-oriented_programming)","title":"Difference between Encapsulation and Abstraction","body":"<p><strong>Abstraction:</strong>\nIs usually done to provide polymorphic access to a set of classes.\nAn abstract class cannot be instantiated thus another class will have to derive from it to create a more concrete representation.</p>\n\n<p>A common usage example of an abstract class can be an implementation of a template method design pattern where an abstract injection point is introduces so that the concrete class can implement it in its own \"concrete\" way.</p>\n\n<p>see: <a href=\"http://en.wikipedia.org/wiki/Abstraction_(computer_science)\" rel=\"noreferrer\">http://en.wikipedia.org/wiki/Abstraction_(computer_science)</a></p>\n\n<p><strong>Encapsulation:</strong>\nIt is the process of hiding the implementation complexity of a specific class from the client that is going to use it, keep in mind that the \"client\" may be a program or event the person who wrote the class.</p>\n\n<p>see: <a href=\"http://en.wikipedia.org/wiki/Encapsulation_(object-oriented_programming)\" rel=\"noreferrer\">http://en.wikipedia.org/wiki/Encapsulation_(object-oriented_programming)</a></p>\n"},{"tags":[],"owner":{"account_id":539361,"reputation":7792,"user_id":907184,"display_name":"phnkha"},"down_vote_count":6,"up_vote_count":141,"is_accepted":true,"score":135,"last_activity_date":1628715198,"creation_date":1362240220,"answer_id":15176477,"question_id":15176356,"body_markdown":"**Encapsulation** hides variables or some implementation that may be changed so often **in a class** to prevent outsiders access it directly. They must access it via getter and setter methods.\r\n\r\n**Abstraction** is used to hide something too, but in a **higher degree (class, interface)**. Clients who use an abstract class (or interface) do not care about what it was, they just need to know what it can do.","title":"Difference between Encapsulation and Abstraction","body":"<p><strong>Encapsulation</strong> hides variables or some implementation that may be changed so often <strong>in a class</strong> to prevent outsiders access it directly. They must access it via getter and setter methods.</p>\n<p><strong>Abstraction</strong> is used to hide something too, but in a <strong>higher degree (class, interface)</strong>. Clients who use an abstract class (or interface) do not care about what it was, they just need to know what it can do.</p>\n"},{"tags":[],"owner":{"account_id":2920802,"reputation":1825,"user_id":2503111,"accept_rate":82,"display_name":"TT_ stands with Russia"},"down_vote_count":1,"up_vote_count":16,"is_accepted":false,"score":15,"last_activity_date":1371759588,"creation_date":1371759588,"answer_id":17223036,"question_id":15176356,"body_markdown":"Abstraction - is the process (and result of this process) of identifying the common essential characteristics for a set of objects.\r\nOne might say that Abstraction is the process of generalization: all objects under consideration are included in a superset of objects, all of which possess given properties (but are different in other respects).\r\n\r\nEncapsulation - is the process of enclosing data and functions manipulating this data into a single unit, so that to hide the internal implementation from the outside world. \r\n\r\nThis is a general answer not related to a specific programming language (as was the question). So the answer is: abstraction and encapsulation have nothing in common. But their implementations might relate to each other (say, in Java: Encapsulation - details are hidden in a class, Abstraction - details are not present at all in a class or interface).","title":"Difference between Encapsulation and Abstraction","body":"<p>Abstraction - is the process (and result of this process) of identifying the common essential characteristics for a set of objects.\nOne might say that Abstraction is the process of generalization: all objects under consideration are included in a superset of objects, all of which possess given properties (but are different in other respects).</p>\n\n<p>Encapsulation - is the process of enclosing data and functions manipulating this data into a single unit, so that to hide the internal implementation from the outside world. </p>\n\n<p>This is a general answer not related to a specific programming language (as was the question). So the answer is: abstraction and encapsulation have nothing in common. But their implementations might relate to each other (say, in Java: Encapsulation - details are hidden in a class, Abstraction - details are not present at all in a class or interface).</p>\n"},{"tags":[],"owner":{"account_id":3916475,"reputation":310,"user_id":3240185,"display_name":"Iqbal Haider"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1393321259,"creation_date":1393321259,"answer_id":22010113,"question_id":15176356,"body_markdown":"difference in both is just the **View Point**  \r\nEncapsulation word is used for hiding data if our aim is to prevent client seeing inside view of our logic\r\n\r\nAbstraction word is used for hiding data if our aim is to show our client a out side view\r\n\r\nOutside view means that let suppose \r\n\r\n    BubbleSort(){\r\n    //code \r\n    swap(x,y);\r\n    }\r\n\r\nhere we use swap in bubble sort for just showing our client what logic we are applying, If we replace swap(x,y) with whole code here, In a single instance he/she can&#39;t understand our logic","title":"Difference between Encapsulation and Abstraction","body":"<p>difference in both is just the <strong>View Point</strong><br>\nEncapsulation word is used for hiding data if our aim is to prevent client seeing inside view of our logic</p>\n\n<p>Abstraction word is used for hiding data if our aim is to show our client a out side view</p>\n\n<p>Outside view means that let suppose </p>\n\n<pre><code>BubbleSort(){\n//code \nswap(x,y);\n}\n</code></pre>\n\n<p>here we use swap in bubble sort for just showing our client what logic we are applying, If we replace swap(x,y) with whole code here, In a single instance he/she can't understand our logic</p>\n"},{"tags":[],"owner":{"account_id":6137407,"reputation":55,"user_id":4785765,"display_name":"Nadim Almas Siddiqui"},"down_vote_count":5,"up_vote_count":1,"is_accepted":false,"score":-4,"last_activity_date":1545115559,"creation_date":1481115437,"answer_id":41018100,"question_id":15176356,"body_markdown":"Abstraction: what are the minimum functions and variables that should be exposed to the outside of our class.\r\n\r\nEncapsulation: how to achieve this requirement, meaning how to implement it.","title":"Difference between Encapsulation and Abstraction","body":"<p>Abstraction: what are the minimum functions and variables that should be exposed to the outside of our class.</p>\n\n<p>Encapsulation: how to achieve this requirement, meaning how to implement it.</p>\n"},{"tags":[],"owner":{"account_id":2612960,"reputation":13092,"user_id":2378217,"accept_rate":43,"display_name":"Manish Kumar Sharma"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1516937864,"creation_date":1516937864,"answer_id":48455462,"question_id":15176356,"body_markdown":"There is a great article that touches on differences between Abstraction, Encapsulation and Information hiding in depth: http://www.tonymarston.co.uk/php-mysql/abstraction.txt\r\n\r\nHere is the conclusion from the article:\r\n\r\n&gt; Abstraction, information hiding, and encapsulation are very different,\r\n&gt; but highly-related, concepts. One could argue that abstraction is a\r\n&gt; technique that helps us identify which specific information should be\r\n&gt; visible, and which information should be hidden. Encapsulation is then\r\n&gt; the technique for packaging the information in such a way as to hide\r\n&gt; what should be hidden, and make visible what is intended to be\r\n&gt; visible.\r\n\r\n","title":"Difference between Encapsulation and Abstraction","body":"<p>There is a great article that touches on differences between Abstraction, Encapsulation and Information hiding in depth: <a href=\"http://www.tonymarston.co.uk/php-mysql/abstraction.txt\" rel=\"noreferrer\">http://www.tonymarston.co.uk/php-mysql/abstraction.txt</a></p>\n\n<p>Here is the conclusion from the article:</p>\n\n<blockquote>\n  <p>Abstraction, information hiding, and encapsulation are very different,\n  but highly-related, concepts. One could argue that abstraction is a\n  technique that helps us identify which specific information should be\n  visible, and which information should be hidden. Encapsulation is then\n  the technique for packaging the information in such a way as to hide\n  what should be hidden, and make visible what is intended to be\n  visible.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":7768311,"reputation":588,"user_id":5878821,"display_name":"Shaan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1519302056,"creation_date":1519301746,"answer_id":48927184,"question_id":15176356,"body_markdown":"Abstraction\r\n\r\nIn Java, abstraction means hiding the information to the real world. It establishes the contract between the party to tell about “what should we do to make use of the service”. \r\n\r\nExample, In API development, only abstracted information of the service has been revealed to the world rather the actual implementation. Interface in java can help achieve this concept very well. \r\n\r\nInterface provides contract between the parties, example, producer and consumer. Producer produces the goods without letting know the consumer how the product is being made. But, through interface, Producer let all consumer know what product can buy. With the help of abstraction, producer can markets the product to their consumers.  \r\n\r\nEncapsulation:\r\n\r\nEncapsulation is one level down of abstraction. Same product company try shielding information from each other production group. Example, if a company produce wine and chocolate, encapsulation helps shielding information how each product Is being made from each other. \r\n\r\n\r\n 1. If I have individual package one for wine and another one for chocolate, and if all the classes are declared in the package as default access modifier, we are giving package level encapsulation for all classes.\r\n 2. Within a package, if we declare each class filed (member field) as\r\n    private and having a public method to access those fields, this way\r\n    giving class level encapsulation to those fields","title":"Difference between Encapsulation and Abstraction","body":"<p>Abstraction</p>\n\n<p>In Java, abstraction means hiding the information to the real world. It establishes the contract between the party to tell about “what should we do to make use of the service”. </p>\n\n<p>Example, In API development, only abstracted information of the service has been revealed to the world rather the actual implementation. Interface in java can help achieve this concept very well. </p>\n\n<p>Interface provides contract between the parties, example, producer and consumer. Producer produces the goods without letting know the consumer how the product is being made. But, through interface, Producer let all consumer know what product can buy. With the help of abstraction, producer can markets the product to their consumers.  </p>\n\n<p>Encapsulation:</p>\n\n<p>Encapsulation is one level down of abstraction. Same product company try shielding information from each other production group. Example, if a company produce wine and chocolate, encapsulation helps shielding information how each product Is being made from each other. </p>\n\n<ol>\n<li>If I have individual package one for wine and another one for chocolate, and if all the classes are declared in the package as default access modifier, we are giving package level encapsulation for all classes.</li>\n<li>Within a package, if we declare each class filed (member field) as\nprivate and having a public method to access those fields, this way\ngiving class level encapsulation to those fields</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":10313606,"reputation":87,"user_id":7608576,"accept_rate":50,"display_name":"Zeeshan Haider"},"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1545115356,"creation_date":1521437938,"answer_id":49356447,"question_id":15176356,"body_markdown":"Encapsulation:\r\n \r\nHiding something, sort of like medicine capsule. We don&#39;t know what is in the capsule, we just take it. Same as in programming - we just hide some special code of method or property and it only gives output, same as capsule. In short, encapsulation hides data.\r\n\r\nAbstraction: \r\n\r\nAbstraction means hiding logic or implementation. For example, we take tablets and see their color and but don&#39;t know what is the purpose of this and how it works with the body.","title":"Difference between Encapsulation and Abstraction","body":"<p>Encapsulation:</p>\n\n<p>Hiding something, sort of like medicine capsule. We don't know what is in the capsule, we just take it. Same as in programming - we just hide some special code of method or property and it only gives output, same as capsule. In short, encapsulation hides data.</p>\n\n<p>Abstraction: </p>\n\n<p>Abstraction means hiding logic or implementation. For example, we take tablets and see their color and but don't know what is the purpose of this and how it works with the body.</p>\n"},{"tags":[],"owner":{"account_id":9313894,"reputation":991,"user_id":6914786,"display_name":"Jos&#233; Salgado"},"down_vote_count":0,"up_vote_count":38,"is_accepted":false,"score":38,"last_activity_date":1549759241,"creation_date":1531394419,"answer_id":51304341,"question_id":15176356,"body_markdown":"This image sums pretty well the difference between both:\n\n[![enter image description here][2]][2]\n\nSource [here][1]\n\n  [1]: http://www.differencebetween.net/technology/difference-between-abstraction-and-encapsulation/\n  [2]: https://i.stack.imgur.com/07dXi.png","title":"Difference between Encapsulation and Abstraction","body":"<p>This image sums pretty well the difference between both:</p>\n<p><a href=\"https://i.stack.imgur.com/07dXi.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/07dXi.png\" alt=\"enter image description here\" /></a></p>\n<p>Source <a href=\"http://www.differencebetween.net/technology/difference-between-abstraction-and-encapsulation/\" rel=\"noreferrer\">here</a></p>\n"},{"tags":[],"owner":{"account_id":3446769,"reputation":145,"user_id":2887420,"accept_rate":71,"display_name":"CodeFu"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1534037070,"creation_date":1534037070,"answer_id":51804993,"question_id":15176356,"body_markdown":"Yes, it is true that Abstraction and Encapsulation are about hiding. \r\n\r\n - Using only relevant details and hiding unnecessary data at **Design Level** is called **Abstraction**. (Like selecting only relevant properties for a class &#39;Car&#39; to make it more abstract or general.)\r\n\r\n - **Encapsulation** is the hiding of data at **Implementation Level**. Like how to actually hide data from direct/external access. This is done by binding data and methods to a single entity/unit to prevent external access. Thus, encapsulation is also known as data hiding at implementation level.","title":"Difference between Encapsulation and Abstraction","body":"<p>Yes, it is true that Abstraction and Encapsulation are about hiding. </p>\n\n<ul>\n<li><p>Using only relevant details and hiding unnecessary data at <strong>Design Level</strong> is called <strong>Abstraction</strong>. (Like selecting only relevant properties for a class 'Car' to make it more abstract or general.)</p></li>\n<li><p><strong>Encapsulation</strong> is the hiding of data at <strong>Implementation Level</strong>. Like how to actually hide data from direct/external access. This is done by binding data and methods to a single entity/unit to prevent external access. Thus, encapsulation is also known as data hiding at implementation level.</p></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":4744062,"reputation":6180,"user_id":3835843,"accept_rate":59,"display_name":"Arif"},"down_vote_count":2,"up_vote_count":30,"is_accepted":false,"score":28,"last_activity_date":1561338485,"creation_date":1545452237,"answer_id":53892996,"question_id":15176356,"body_markdown":"**Encapsulation:** Wrapping code and data together into a single unit. `Class` is an example of encapsulation, because it wraps the method and property.  \r\n\r\n**Abstraction:** Hiding internal details and showing functionality only. Abstraction focus on what the object does instead of how it does. It provides generalized view of classes.\r\n\r\n    int number = 5;\r\n    string aStringNumber = number.ToString(); \r\n\r\nHere, ToString() is abstraction. And how this mechanism `number` variable converted to string and initialize into `aStringNumber` is encapsulation.\r\n\r\n*Let us take a real world example of calculator. Encapsulation is the internal circuits, battery, etc., that combine to make it a calculator. Abstraction is the different buttons like on-off, clear and other buttons provided to operate it.*","title":"Difference between Encapsulation and Abstraction","body":"<p><strong>Encapsulation:</strong> Wrapping code and data together into a single unit. <code>Class</code> is an example of encapsulation, because it wraps the method and property.  </p>\n\n<p><strong>Abstraction:</strong> Hiding internal details and showing functionality only. Abstraction focus on what the object does instead of how it does. It provides generalized view of classes.</p>\n\n<pre><code>int number = 5;\nstring aStringNumber = number.ToString(); \n</code></pre>\n\n<p>Here, ToString() is abstraction. And how this mechanism <code>number</code> variable converted to string and initialize into <code>aStringNumber</code> is encapsulation.</p>\n\n<p><em>Let us take a real world example of calculator. Encapsulation is the internal circuits, battery, etc., that combine to make it a calculator. Abstraction is the different buttons like on-off, clear and other buttons provided to operate it.</em></p>\n"},{"tags":[],"owner":{"account_id":4324390,"reputation":529,"user_id":3531600,"accept_rate":88,"display_name":"S Vinesh"},"down_vote_count":2,"up_vote_count":1,"is_accepted":false,"score":-1,"last_activity_date":1555052880,"creation_date":1554363247,"answer_id":55510241,"question_id":15176356,"body_markdown":"Just a few more points to make thing clear,\r\n\r\nOne must not confuse data abstraction and the abstract class. They are different.\r\n\r\nGenerally we say abstract class or method is to basically hide something. But no..  That is wrong. What is the word abstract means ? Google search says the English word abstraction means \r\n\r\n&quot;Existing in thought or as an idea but not having a physical or concrete existence.&quot;\r\n\r\nAnd thats right in case of abstract class too. It is not hiding the content of the method but the method&#39;s content is already empty (not having a physical or concrete existence) but it determines how a method should be (existing in thought or as an idea) or  a method should be in the calss.\r\n\r\nSo when do you actually use abstract methods ? \r\n\r\n- When a method from base class will differ in each child class that extends it.\r\n- And so you want to make sure the child class have this function implemented.\r\n- This also ensures that method, to have compulsory signature like, it must have n number of parameters.\r\n\r\nSo about abstract class!\r\n- An Abstract class cannot be instantiated only extended! But why ?\r\n\r\n- A class with abstract method must be prevented from creating its own instance because the abstract methods in it, are not having any meaningful implementation.\r\n- You can even make a class abstract, if for some reason you find that it is meaning less to have a instance of your that class.\r\n\r\n\r\nAn Abstract class help us avoid creating new instance of it!\r\n\r\nAn abstract method in a class forces the child class to implement that function for sure with the provided signature!\r\n\r\n","title":"Difference between Encapsulation and Abstraction","body":"<p>Just a few more points to make thing clear,</p>\n\n<p>One must not confuse data abstraction and the abstract class. They are different.</p>\n\n<p>Generally we say abstract class or method is to basically hide something. But no..  That is wrong. What is the word abstract means ? Google search says the English word abstraction means </p>\n\n<p>\"Existing in thought or as an idea but not having a physical or concrete existence.\"</p>\n\n<p>And thats right in case of abstract class too. It is not hiding the content of the method but the method's content is already empty (not having a physical or concrete existence) but it determines how a method should be (existing in thought or as an idea) or  a method should be in the calss.</p>\n\n<p>So when do you actually use abstract methods ? </p>\n\n<ul>\n<li>When a method from base class will differ in each child class that extends it.</li>\n<li>And so you want to make sure the child class have this function implemented.</li>\n<li>This also ensures that method, to have compulsory signature like, it must have n number of parameters.</li>\n</ul>\n\n<p>So about abstract class!\n- An Abstract class cannot be instantiated only extended! But why ?</p>\n\n<ul>\n<li>A class with abstract method must be prevented from creating its own instance because the abstract methods in it, are not having any meaningful implementation.</li>\n<li>You can even make a class abstract, if for some reason you find that it is meaning less to have a instance of your that class.</li>\n</ul>\n\n<p>An Abstract class help us avoid creating new instance of it!</p>\n\n<p>An abstract method in a class forces the child class to implement that function for sure with the provided signature!</p>\n"},{"tags":[],"owner":{"account_id":6850949,"reputation":584,"user_id":5268152,"display_name":"Surya"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1591634544,"creation_date":1591634544,"answer_id":62267045,"question_id":15176356,"body_markdown":"Let me explain it in with the same example discussed above. Kindly consider the same TV.\r\n\r\n**Encapsulation**: The adjustments we can make with the remote is a good example - Volume UP/DOWN, Color &amp; Contrast - All we can do is adjust it to the min and max value provided and cannot do anything beyond what is provided in the remote - Imagine the getter and setter here(The setter function will check whether the value provided is valid if Yes, it process the operation if not won&#39;t allow us to make changes - like we cannot decrease the volume beyond zero even we press the volume down button a hundred times).\r\n\r\n**Abstraction**: We can take the same example here but with a higher Degree/Context. The volume down button will decrease the volume - and this is the info we provide to the user and the user is not aware of neither the infrared transmitter inside the remote nor the receiver in the TV and the subsequent process of parsing the signal and the microprocessor architecture inside the TV. Simply put it is not needed in the context - Just provide what is necessary. One can easily relate the Text book definition here ie., Hiding the inner implementation and only providing what it will do rather than how it do that!\r\n\r\nHope it clarifies a bit!","title":"Difference between Encapsulation and Abstraction","body":"<p>Let me explain it in with the same example discussed above. Kindly consider the same TV.</p>\n\n<p><strong>Encapsulation</strong>: The adjustments we can make with the remote is a good example - Volume UP/DOWN, Color &amp; Contrast - All we can do is adjust it to the min and max value provided and cannot do anything beyond what is provided in the remote - Imagine the getter and setter here(The setter function will check whether the value provided is valid if Yes, it process the operation if not won't allow us to make changes - like we cannot decrease the volume beyond zero even we press the volume down button a hundred times).</p>\n\n<p><strong>Abstraction</strong>: We can take the same example here but with a higher Degree/Context. The volume down button will decrease the volume - and this is the info we provide to the user and the user is not aware of neither the infrared transmitter inside the remote nor the receiver in the TV and the subsequent process of parsing the signal and the microprocessor architecture inside the TV. Simply put it is not needed in the context - Just provide what is necessary. One can easily relate the Text book definition here ie., Hiding the inner implementation and only providing what it will do rather than how it do that!</p>\n\n<p>Hope it clarifies a bit!</p>\n"},{"tags":[],"owner":{"account_id":13692927,"reputation":944,"user_id":9880276,"display_name":"Rasika Weragoda"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1603130527,"creation_date":1603130527,"answer_id":64432856,"question_id":15176356,"body_markdown":"If I am the one who faced the interview, I would say that as the end-user perspective abstraction and encapsulation are fairly same. It is nothing but information hiding. As a Software Developer perspective, Abstraction solves the problems at the design level and Encapsulation solves the problem in implementation level","title":"Difference between Encapsulation and Abstraction","body":"<p>If I am the one who faced the interview, I would say that as the end-user perspective abstraction and encapsulation are fairly same. It is nothing but information hiding. As a Software Developer perspective, Abstraction solves the problems at the design level and Encapsulation solves the problem in implementation level</p>\n"},{"tags":[],"owner":{"account_id":14901094,"reputation":642,"user_id":13989422,"display_name":"Morteza"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1604064497,"creation_date":1604064497,"answer_id":64609306,"question_id":15176356,"body_markdown":"Briefly, `Abstraction` happens at class level by hiding implementation and implementing an interface to be able to interact with the instance of the class. Whereas, `Encapsulation` is used to hide information; for instance, making the member variables private to ban the direct access and providing getters and setters for them for indicrect access. ","title":"Difference between Encapsulation and Abstraction","body":"<p>Briefly, <code>Abstraction</code> happens at class level by hiding implementation and implementing an interface to be able to interact with the instance of the class. Whereas, <code>Encapsulation</code> is used to hide information; for instance, making the member variables private to ban the direct access and providing getters and setters for them for indicrect access.</p>\n"},{"tags":[],"owner":{"account_id":15591403,"reputation":5743,"user_id":12894468,"display_name":"Sivaram Rasathurai"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1638729455,"creation_date":1609616781,"answer_id":65543358,"question_id":15176356,"body_markdown":"Yes !!!!\r\nIf I say **Encapsulation is a kind of an advanced specific scope abstraction**, \r\n\r\nHow many of you read/upvote my answer. Let&#39;s dig into why I am saying this.\r\n\r\nI need to clear two things before my claim.\r\n\r\n One is data hiding and,  another one is the abstraction\r\n\r\n&lt;h3&gt; Data hiding &lt;/h3&gt;\r\nMost of the time, we will not give direct access to our internal data. Our internal data should not go out directly that is an outside person can&#39;t access our internal data directly. It&#39;s all about security since we need to protect the internal states of a particular object.\r\n\r\n&lt;br&gt;&lt;/br&gt;\r\n\r\n&lt;h3&gt; Abstraction&lt;/h3&gt; \r\nFor simplicity, hide the internal implementations is called abstraction. In abstraction, we only focus on the necessary things. Basically, We talk about &quot;What to do&quot; and not &quot;How to do&quot; in abstraction.\r\nSecurity also can be achieved by abstraction since we are not going to highlight &quot;how we are implementing&quot;. Maintainability will be increased since we can alter the implementation but it will not affect our end user.\r\n\r\n&lt;br&gt;&lt;/br&gt;\r\n\r\n\r\nI said, &quot;Encapsulation is a kind of an advanced specific scope abstraction&quot;.  Why? because we can see encapsulation as data hiding + abstraction\r\n\r\n\r\n&gt; encapsulation  =  data hiding  +  abstraction\r\n\r\n\r\nIn encapsulation, we need to hide the data so the outside person can not see the data and we need to provide methods that can be used to access the data. These methods may have validations or other features inside those things also hidden to an outside person. So here, we are hiding the implementation of access methods and it is called abstraction. \r\n\r\nThis is why I said like above encapsulation is a kind of abstraction.\r\n\r\nSo Where is the **difference**?\r\n\r\nThe difference is the abstraction is a general one if we are hiding something from the user for simplicity, maintainability and security and,\r\n\r\nencapsulation is a specific one for which is related to internal states security where we are hiding the internal state (data hiding) and we are providing methods to access the data and those methods implementation also hidden from the outside person(abstraction).\r\n\r\n**Why we need abstraction**\r\nWhen you do designs, you will not talk about implementations. You say If you give these parameters to this method it will give these output.\r\nWe hide the internal implementation of the method and talk about what it will do so this is an abstraction.\r\n\r\nExample\r\n\r\n```\r\npublic int add(int a, int b);\r\n```\r\nThis method definition tells us that if you give two variables it will do addition and return the result.\r\n\r\nhere we will not look at the implementation and we ay only what this method does and not how it does.\r\nMethod implementations can be differs based on developers.\r\n1. \r\n```\r\npublic int add(int a, int b){\r\n   return a + b; \r\n}\r\n```\r\n2. \r\n```\r\npublic int add(int a, int b){\r\n\r\n   return b + a; \r\n}\r\n\r\n```\r\n\r\nTwo methods are doing the same thing what their implementation differs.\r\n\r\nBasically,\r\n&lt;h2&gt;\r\n Abstraction is needed to model the system. Encapsulation is needed to enhance system security.&lt;/h2&gt;\r\n","title":"Difference between Encapsulation and Abstraction","body":"<p>Yes !!!!\nIf I say <strong>Encapsulation is a kind of an advanced specific scope abstraction</strong>,</p>\n<p>How many of you read/upvote my answer. Let's dig into why I am saying this.</p>\n<p>I need to clear two things before my claim.</p>\n<p>One is data hiding and,  another one is the abstraction</p>\n<h3> Data hiding </h3>\nMost of the time, we will not give direct access to our internal data. Our internal data should not go out directly that is an outside person can't access our internal data directly. It's all about security since we need to protect the internal states of a particular object.\n<p><br></p>\n<h3> Abstraction</h3> \nFor simplicity, hide the internal implementations is called abstraction. In abstraction, we only focus on the necessary things. Basically, We talk about \"What to do\" and not \"How to do\" in abstraction.\nSecurity also can be achieved by abstraction since we are not going to highlight \"how we are implementing\". Maintainability will be increased since we can alter the implementation but it will not affect our end user.\n<p><br></p>\n<p>I said, &quot;Encapsulation is a kind of an advanced specific scope abstraction&quot;.  Why? because we can see encapsulation as data hiding + abstraction</p>\n<blockquote>\n<p>encapsulation  =  data hiding  +  abstraction</p>\n</blockquote>\n<p>In encapsulation, we need to hide the data so the outside person can not see the data and we need to provide methods that can be used to access the data. These methods may have validations or other features inside those things also hidden to an outside person. So here, we are hiding the implementation of access methods and it is called abstraction.</p>\n<p>This is why I said like above encapsulation is a kind of abstraction.</p>\n<p>So Where is the <strong>difference</strong>?</p>\n<p>The difference is the abstraction is a general one if we are hiding something from the user for simplicity, maintainability and security and,</p>\n<p>encapsulation is a specific one for which is related to internal states security where we are hiding the internal state (data hiding) and we are providing methods to access the data and those methods implementation also hidden from the outside person(abstraction).</p>\n<p><strong>Why we need abstraction</strong>\nWhen you do designs, you will not talk about implementations. You say If you give these parameters to this method it will give these output.\nWe hide the internal implementation of the method and talk about what it will do so this is an abstraction.</p>\n<p>Example</p>\n<pre><code>public int add(int a, int b);\n</code></pre>\n<p>This method definition tells us that if you give two variables it will do addition and return the result.</p>\n<p>here we will not look at the implementation and we ay only what this method does and not how it does.\nMethod implementations can be differs based on developers.\n1.</p>\n<pre><code>public int add(int a, int b){\n   return a + b; \n}\n</code></pre>\n<ol start=\"2\">\n<li></li>\n</ol>\n<pre><code>public int add(int a, int b){\n\n   return b + a; \n}\n\n</code></pre>\n<p>Two methods are doing the same thing what their implementation differs.</p>\n<p>Basically,</p>\n<h2>\n Abstraction is needed to model the system. Encapsulation is needed to enhance system security.</h2>\n"},{"tags":[],"owner":{"account_id":9297761,"reputation":139,"user_id":6904202,"display_name":"Monu chandramohan"},"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1610561637,"creation_date":1610561637,"answer_id":65707583,"question_id":15176356,"body_markdown":"A very practical example is.\r\n\r\nlet&#39;s just say I want to encrypt my password.\r\n\r\n - I don&#39;t want to know the details, I just call\r\n   encryptionImpl.encrypt(password) and it returns an encrypted\r\n   password.\r\n   \r\n   `public interface Encryption{ public String encrypt(String password);\r\n   } `\r\n   \r\n   This is called **abstraction**. It just shows what should be done.\r\n - Now let us assume We have Two types of Encryption Md5 and RSA which\r\n   implement Encryption from a third-party encryption jar.\r\n   \r\n   Then those Encryption classes have their own way of implementing\r\n   encryption which protects their implementation from outsiders\r\n   \r\n   This is called **Encapsulation**. Hides how it should be done.\r\n\r\nRemember:***what should be done vs how it should be done.***\r\n\r\n***Hiding complications vs Protecting implementations***\r\n\r\n\r\n","title":"Difference between Encapsulation and Abstraction","body":"<p>A very practical example is.</p>\n<p>let's just say I want to encrypt my password.</p>\n<ul>\n<li><p>I don't want to know the details, I just call\nencryptionImpl.encrypt(password) and it returns an encrypted\npassword.</p>\n<p><code>public interface Encryption{ public String encrypt(String password); } </code></p>\n<p>This is called <strong>abstraction</strong>. It just shows what should be done.</p>\n</li>\n<li><p>Now let us assume We have Two types of Encryption Md5 and RSA which\nimplement Encryption from a third-party encryption jar.</p>\n<p>Then those Encryption classes have their own way of implementing\nencryption which protects their implementation from outsiders</p>\n<p>This is called <strong>Encapsulation</strong>. Hides how it should be done.</p>\n</li>\n</ul>\n<p>Remember:<em><strong>what should be done vs how it should be done.</strong></em></p>\n<p><em><strong>Hiding complications vs Protecting implementations</strong></em></p>\n"},{"tags":[],"owner":{"account_id":4929951,"reputation":255,"user_id":3970061,"display_name":"rahul sharma"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1613926201,"creation_date":1613926201,"answer_id":66304700,"question_id":15176356,"body_markdown":"Encapsulation is wrapping up of data and methods in a single unit and making the data accessible only through methods(getter/setter) to ensure safety of data.\r\n\r\nAbstraction is hiding internal implementation details of how work is done.\r\n\r\nTake and example of following stack class:\r\n\r\n    Class Stack\r\n    {\r\n    private top;\r\n    void push();\r\n    int pop();\r\n    }\r\n\r\nNow encapsulation helps to safeguard internal data as top cannot be accessed directly outside.\r\n\r\nAnd abstraction helps to do push or pop on stack without worrying about what are steps to push or pop\r\n","title":"Difference between Encapsulation and Abstraction","body":"<p>Encapsulation is wrapping up of data and methods in a single unit and making the data accessible only through methods(getter/setter) to ensure safety of data.</p>\n<p>Abstraction is hiding internal implementation details of how work is done.</p>\n<p>Take and example of following stack class:</p>\n<pre><code>Class Stack\n{\nprivate top;\nvoid push();\nint pop();\n}\n</code></pre>\n<p>Now encapsulation helps to safeguard internal data as top cannot be accessed directly outside.</p>\n<p>And abstraction helps to do push or pop on stack without worrying about what are steps to push or pop</p>\n"},{"tags":[],"owner":{"account_id":8720983,"reputation":55,"user_id":6524161,"accept_rate":14,"display_name":"Shubham Rajput"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1627820573,"creation_date":1627820573,"answer_id":68610380,"question_id":15176356,"body_markdown":"**Abstraction**\r\nAs the name suggests abstract means *summary* or *brief* about somtehing. In case of OOP Abstract Classes are the ones which do not contain every information about that object in real world, for eg. you want to book a hotel room, if your object is that *room* you mainly care about:\r\n- its prices, size, beds etc. \r\n\r\nbut you do not care about \r\n- the wiring they have used in the hotel room for electricity.\r\n- which cement they have used to build it up\r\n\r\nSo, you get **abstracted** information about the *room* which you care about.\r\n\r\nOn the other hand, **Encapsulation** is basically capsulating the related information together, for eg. you booked the hotel room, you go there and switch on a bulb by pressing the *switch*. Now the *switch* object has all internal wirings which are required to switch that bulb ON, but you really do not care about those wirings. You care only about bulb is switched ON or not.\r\n\r\nNow one can argue that **abstraction** also applies here:\r\n\r\none can say the internal wiring of the *switch* is also abstracted to you, so this must be case of **abstraction** but here are some subtle differences:\r\n\r\n**Abstraction** is more of a contextual thing, it does not have the non abstracted information, like the wiring info which you do not care about, is not present in the context of website for booking hotel *room* (like your class *room* do not have information about the wiring grid of it, since this *room* is delegated for online booking only) , whereas **encapsulation** is more granular, it means hiding and capsulating the granular things which you do not need to care about, for switching the bulb ON the *switch* hides the wiring inside the switch board (like private attributes/methods of classes). \r\nNow the *switch* class has the information but it is hidden to you. On the other hand *room* class does not have the information about wiring design of a hotel room since it is not even in the context of online booking of the *room*\r\n\r\nThus, the **abstraction** is more related to classes and **encapsulation** is more related to internal of the class objects, attributes and methods.","title":"Difference between Encapsulation and Abstraction","body":"<p><strong>Abstraction</strong>\nAs the name suggests abstract means <em>summary</em> or <em>brief</em> about somtehing. In case of OOP Abstract Classes are the ones which do not contain every information about that object in real world, for eg. you want to book a hotel room, if your object is that <em>room</em> you mainly care about:</p>\n<ul>\n<li>its prices, size, beds etc.</li>\n</ul>\n<p>but you do not care about</p>\n<ul>\n<li>the wiring they have used in the hotel room for electricity.</li>\n<li>which cement they have used to build it up</li>\n</ul>\n<p>So, you get <strong>abstracted</strong> information about the <em>room</em> which you care about.</p>\n<p>On the other hand, <strong>Encapsulation</strong> is basically capsulating the related information together, for eg. you booked the hotel room, you go there and switch on a bulb by pressing the <em>switch</em>. Now the <em>switch</em> object has all internal wirings which are required to switch that bulb ON, but you really do not care about those wirings. You care only about bulb is switched ON or not.</p>\n<p>Now one can argue that <strong>abstraction</strong> also applies here:</p>\n<p>one can say the internal wiring of the <em>switch</em> is also abstracted to you, so this must be case of <strong>abstraction</strong> but here are some subtle differences:</p>\n<p><strong>Abstraction</strong> is more of a contextual thing, it does not have the non abstracted information, like the wiring info which you do not care about, is not present in the context of website for booking hotel <em>room</em> (like your class <em>room</em> do not have information about the wiring grid of it, since this <em>room</em> is delegated for online booking only) , whereas <strong>encapsulation</strong> is more granular, it means hiding and capsulating the granular things which you do not need to care about, for switching the bulb ON the <em>switch</em> hides the wiring inside the switch board (like private attributes/methods of classes).\nNow the <em>switch</em> class has the information but it is hidden to you. On the other hand <em>room</em> class does not have the information about wiring design of a hotel room since it is not even in the context of online booking of the <em>room</em></p>\n<p>Thus, the <strong>abstraction</strong> is more related to classes and <strong>encapsulation</strong> is more related to internal of the class objects, attributes and methods.</p>\n"},{"tags":[],"owner":{"account_id":4327877,"reputation":9807,"user_id":3534132,"accept_rate":58,"display_name":"Grateful"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1636453157,"creation_date":1636453157,"answer_id":69896400,"question_id":15176356,"body_markdown":"**Abstraction**\r\n - is the process of hiding the how, and only showing the what\r\n - the purpose is to simplify information and hide unnecessary details from the user\r\n \r\n\r\n**Encapsulation**\r\n   - is the process of wrapping data and functionality into a single unit\r\n   - the purpose is to protect data, by preventing direct access and only providing a safer and indirect way","title":"Difference between Encapsulation and Abstraction","body":"<p><strong>Abstraction</strong></p>\n<ul>\n<li>is the process of hiding the how, and only showing the what</li>\n<li>the purpose is to simplify information and hide unnecessary details from the user</li>\n</ul>\n<p><strong>Encapsulation</strong></p>\n<ul>\n<li>is the process of wrapping data and functionality into a single unit</li>\n<li>the purpose is to protect data, by preventing direct access and only providing a safer and indirect way</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":4526826,"reputation":4997,"user_id":3678363,"display_name":"Reyan Chougle"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1646206128,"creation_date":1646206128,"answer_id":71318895,"question_id":15176356,"body_markdown":"In simple terms, **Encapsulation** is data hiding(information hiding) while **Abstraction** is detail hiding(implementation hiding)","title":"Difference between Encapsulation and Abstraction","body":"<p>In simple terms, <strong>Encapsulation</strong> is data hiding(information hiding) while <strong>Abstraction</strong> is detail hiding(implementation hiding)</p>\n"},{"tags":[],"owner":{"account_id":235361,"reputation":780,"user_id":502130,"accept_rate":82,"display_name":"rutruth"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1653049732,"creation_date":1653049732,"answer_id":72318954,"question_id":15176356,"body_markdown":"**Encapsulation** is the composition of meaning.\r\n\r\n**Abstraction** is the simplification of meaning.","title":"Difference between Encapsulation and Abstraction","body":"<p><strong>Encapsulation</strong> is the composition of meaning.</p>\n<p><strong>Abstraction</strong> is the simplification of meaning.</p>\n"}],"owner":{"account_id":1960952,"reputation":2837,"user_id":1762551,"accept_rate":57,"display_name":"WpfBee"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":190383,"favorite_count":0,"down_vote_count":1,"up_vote_count":145,"accepted_answer_id":15176477,"answer_count":22,"score":144,"last_activity_date":1696741727,"creation_date":1362239564,"question_id":15176356,"body_markdown":"I had an interview today. I had a question from **OOP**, about the difference between **Encapsulation** &amp; **Abstraction**?\r\n \r\nI replied to my knowledge that **Encapsulation** is basically binding data members &amp; member functions into a single unit called **Class**. Whereas **Abstraction** is basically to hide implementation complexity &amp; provide ease of access to the users. I thought she would be okay with my answer. But she queried if the purpose of both is to hide information then what the actual difference between these two is? I could not give any answer to her.\r\n\r\nBefore asking this question, I read other threads on StackOverFlow about the difference between these two **OOP**s concepts. But I am not finding myself in a position to convince the interviewer.\r\n\r\nCan anyone please justify it with the simplest example? ","title":"Difference between Encapsulation and Abstraction","body":"<p>I had an interview today. I had a question from <strong>OOP</strong>, about the difference between <strong>Encapsulation</strong> &amp; <strong>Abstraction</strong>?</p>\n<p>I replied to my knowledge that <strong>Encapsulation</strong> is basically binding data members &amp; member functions into a single unit called <strong>Class</strong>. Whereas <strong>Abstraction</strong> is basically to hide implementation complexity &amp; provide ease of access to the users. I thought she would be okay with my answer. But she queried if the purpose of both is to hide information then what the actual difference between these two is? I could not give any answer to her.</p>\n<p>Before asking this question, I read other threads on StackOverFlow about the difference between these two <strong>OOP</strong>s concepts. But I am not finding myself in a position to convince the interviewer.</p>\n<p>Can anyone please justify it with the simplest example?</p>\n"},{"tags":["java","android","midi"],"answers":[{"tags":[],"owner":{"account_id":21474253,"reputation":61,"user_id":18082608,"display_name":"aWiseMan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1647262359,"creation_date":1647262359,"answer_id":71468118,"question_id":71235419,"body_markdown":"My own solution:\r\n\r\nXML:\r\n\r\n    &lt;devices&gt;\r\n        &lt;device\r\n            manufacturer=&quot;anyManufacturer&quot;\r\n            product=&quot;Virtual&quot;\r\n            name=&quot;myApp Virtual Port&quot;&gt;\r\n            &lt;input-port name=&quot;input&quot; /&gt;\r\n            &lt;output-port name=&quot;output&quot; /&gt;\r\n        &lt;/device&gt;\r\n    &lt;/devices&gt;\r\n\r\nThen in the service call getOutputPortReceivers() to get the output port.\r\nhttps://developer.android.com/reference/android/media/midi/MidiDeviceService#getOutputPortReceivers()\r\n\r\nthen you can use send() on that MidiReceiver.\r\n\r\n    public class MIDIConnectDeviceService extends MidiDeviceService {\r\n        private MidiReceiver mInputReceiver = new MyReceiver();\r\n        private static MidiReceiver mOutputReceiver; \r\n    \r\n        @Override\r\n        public void onCreate() {\r\n            super.onCreate();\r\n        }\r\n    \r\n        @Override\r\n        public void onDestroy() {\r\n            super.onDestroy();\r\n        }\r\n    \r\n        @Override\r\n        // Declare the receivers associated with your input ports.\r\n        public MidiReceiver[] onGetInputPortReceivers() {\r\n            return new MidiReceiver[] { mInputReceiver };\r\n        }    \r\n    \r\n        public static void send(byte[] msg, int offset, int count, long timestamp) throws IOException {\r\n            if (mOutputReceiver != null){\r\n                mOutputReceiver.send(msg, offset, count, timestamp);\r\n            }\r\n        }\r\n    \r\n        class MyReceiver extends MidiReceiver {\r\n            @Override\r\n            public void onSend(byte[] data, int offset, int count,\r\n                               long timestamp) throws IOException {\r\n    \r\n            }\r\n        }\r\n    \r\n        @Override\r\n        public void onDeviceStatusChanged(MidiDeviceStatus status) {\r\n            MidiReceiver[] midiReceivers = getOutputPortReceivers();\r\n            mOutputReceiver = midiReceivers[0];\r\n        }\r\n    }","title":"How to send MIDI to own virtual output port with Android MIDI Package?","body":"<p>My own solution:</p>\n<p>XML:</p>\n<pre><code>&lt;devices&gt;\n    &lt;device\n        manufacturer=&quot;anyManufacturer&quot;\n        product=&quot;Virtual&quot;\n        name=&quot;myApp Virtual Port&quot;&gt;\n        &lt;input-port name=&quot;input&quot; /&gt;\n        &lt;output-port name=&quot;output&quot; /&gt;\n    &lt;/device&gt;\n&lt;/devices&gt;\n</code></pre>\n<p>Then in the service call getOutputPortReceivers() to get the output port.\n<a href=\"https://developer.android.com/reference/android/media/midi/MidiDeviceService#getOutputPortReceivers()\" rel=\"nofollow noreferrer\">https://developer.android.com/reference/android/media/midi/MidiDeviceService#getOutputPortReceivers()</a></p>\n<p>then you can use send() on that MidiReceiver.</p>\n<pre><code>public class MIDIConnectDeviceService extends MidiDeviceService {\n    private MidiReceiver mInputReceiver = new MyReceiver();\n    private static MidiReceiver mOutputReceiver; \n\n    @Override\n    public void onCreate() {\n        super.onCreate();\n    }\n\n    @Override\n    public void onDestroy() {\n        super.onDestroy();\n    }\n\n    @Override\n    // Declare the receivers associated with your input ports.\n    public MidiReceiver[] onGetInputPortReceivers() {\n        return new MidiReceiver[] { mInputReceiver };\n    }    \n\n    public static void send(byte[] msg, int offset, int count, long timestamp) throws IOException {\n        if (mOutputReceiver != null){\n            mOutputReceiver.send(msg, offset, count, timestamp);\n        }\n    }\n\n    class MyReceiver extends MidiReceiver {\n        @Override\n        public void onSend(byte[] data, int offset, int count,\n                           long timestamp) throws IOException {\n\n        }\n    }\n\n    @Override\n    public void onDeviceStatusChanged(MidiDeviceStatus status) {\n        MidiReceiver[] midiReceivers = getOutputPortReceivers();\n        mOutputReceiver = midiReceivers[0];\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":21474253,"reputation":61,"user_id":18082608,"display_name":"aWiseMan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":456,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":71468118,"answer_count":1,"score":1,"last_activity_date":1696741516,"creation_date":1645612931,"question_id":71235419,"body_markdown":"I am creating a Java Android app which uses the Android MIDI Package:\r\nhttps://developer.android.com/reference/android/media/midi/package-summary#extend_midideviceservice\r\n\r\nThe app needs to deploy its own virtual midi input and output port.\r\nSo far the input side is working nicely. I can deploy the output port, its visible in other apps but I don&#39;t know how send to the output port and can&#39;t find proper documentation on that.\r\n\r\nDoes anyone have good documentation/example on opening and using the self-deployed output port?\r\n\r\n\r\nMy device_info.xml:\r\n\r\n    &lt;devices&gt;\r\n        &lt;device\r\n            manufacturer=&quot;anyManufacturer&quot;\r\n            product=&quot;Virtual&quot;\r\n            name=&quot;myApp Virtual Inport&quot;&gt;\r\n            &lt;input-port name=&quot;input&quot; /&gt;\r\n        &lt;/device&gt;\r\n        &lt;device\r\n            manufacturer=&quot;anyManufacturer&quot;\r\n            product=&quot;Virtual&quot;\r\n            name=&quot;myApp Virtual Outport&quot;&gt;\r\n            &lt;output-port name=&quot;output&quot; /&gt;\r\n        &lt;/device&gt;\r\n    &lt;/devices&gt;\r\n\r\n","title":"How to send MIDI to own virtual output port with Android MIDI Package?","body":"<p>I am creating a Java Android app which uses the Android MIDI Package:\n<a href=\"https://developer.android.com/reference/android/media/midi/package-summary#extend_midideviceservice\" rel=\"nofollow noreferrer\">https://developer.android.com/reference/android/media/midi/package-summary#extend_midideviceservice</a></p>\n<p>The app needs to deploy its own virtual midi input and output port.\nSo far the input side is working nicely. I can deploy the output port, its visible in other apps but I don't know how send to the output port and can't find proper documentation on that.</p>\n<p>Does anyone have good documentation/example on opening and using the self-deployed output port?</p>\n<p>My device_info.xml:</p>\n<pre><code>&lt;devices&gt;\n    &lt;device\n        manufacturer=&quot;anyManufacturer&quot;\n        product=&quot;Virtual&quot;\n        name=&quot;myApp Virtual Inport&quot;&gt;\n        &lt;input-port name=&quot;input&quot; /&gt;\n    &lt;/device&gt;\n    &lt;device\n        manufacturer=&quot;anyManufacturer&quot;\n        product=&quot;Virtual&quot;\n        name=&quot;myApp Virtual Outport&quot;&gt;\n        &lt;output-port name=&quot;output&quot; /&gt;\n    &lt;/device&gt;\n&lt;/devices&gt;\n</code></pre>\n"},{"tags":["java","spring","jms","threadpool"],"answers":[{"tags":[],"owner":{"account_id":446547,"reputation":126635,"user_id":839646,"accept_rate":70,"display_name":"Ryan Stewart"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1312170219,"creation_date":1311865234,"answer_id":6861144,"question_id":6858038,"body_markdown":"I&#39;m not sure I get what you&#39;re trying to do. If you&#39;re trying to have multiple messages processed concurrently, get away from the JmsTemplate and use a [DefaultMessageListenerContainer][1] with [concurrentConsumers][2]. Also available via the [JMS namespace][3].\r\n\r\nFor example, it seems that you could throw away all the code that you&#39;re showing in your question and use this instead:\r\n\r\n    &lt;jms:listener-container concurrency=&quot;10&quot;&gt;\r\n        &lt;jms:listener destination=&quot;some.queue&quot; ref=&quot;fooService&quot; method=&quot;handleNewFoo&quot;/&gt;\r\n    &lt;/jms:listener-container&gt;\r\n\r\nThat will automatically spawn up to 10 threads for concurrent message processing. When a message comes in, it will use one of the worker threads to call fooService.handleNewFoo(), where fooService is a bean in your Spring context.\r\n\r\n**Edit:** I&#39;ve created a sample project on github showing a basic Spring JMS setup. You can browse the source at https://github.com/zzantozz/testbed/tree/master/basic-spring-jms or just clone and run it:\r\n\r\n    git clone git://github.com/zzantozz/testbed.git tmp\r\n    cd tmp\r\n    mvn compile exec:java -Dexec.mainClass=rds.jms.Main -pl basic-spring-jms\r\n\r\nThere&#39;s a main class that starts a JMS broker and starts Spring. When Spring starts, it inits a bean that begins sending JMS messages. There&#39;s also a Spring message listener as I described above that consumes messages and passes them to the same bean that produces messages, which prints them to stdout.\r\n\r\n\r\n  [1]: http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/jms/listener/DefaultMessageListenerContainer.html\r\n  [2]: http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/jms/listener/DefaultMessageListenerContainer.html#setConcurrentConsumers%28int%29\r\n  [3]: http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/jms.html#jms-namespace","title":"JMS and ThreadPool problem?","body":"<p>I'm not sure I get what you're trying to do. If you're trying to have multiple messages processed concurrently, get away from the JmsTemplate and use a <a href=\"http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/jms/listener/DefaultMessageListenerContainer.html\" rel=\"nofollow\">DefaultMessageListenerContainer</a> with <a href=\"http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/jms/listener/DefaultMessageListenerContainer.html#setConcurrentConsumers%28int%29\" rel=\"nofollow\">concurrentConsumers</a>. Also available via the <a href=\"http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/jms.html#jms-namespace\" rel=\"nofollow\">JMS namespace</a>.</p>\n\n<p>For example, it seems that you could throw away all the code that you're showing in your question and use this instead:</p>\n\n<pre><code>&lt;jms:listener-container concurrency=\"10\"&gt;\n    &lt;jms:listener destination=\"some.queue\" ref=\"fooService\" method=\"handleNewFoo\"/&gt;\n&lt;/jms:listener-container&gt;\n</code></pre>\n\n<p>That will automatically spawn up to 10 threads for concurrent message processing. When a message comes in, it will use one of the worker threads to call fooService.handleNewFoo(), where fooService is a bean in your Spring context.</p>\n\n<p><strong>Edit:</strong> I've created a sample project on github showing a basic Spring JMS setup. You can browse the source at <a href=\"https://github.com/zzantozz/testbed/tree/master/basic-spring-jms\" rel=\"nofollow\">https://github.com/zzantozz/testbed/tree/master/basic-spring-jms</a> or just clone and run it:</p>\n\n<pre><code>git clone git://github.com/zzantozz/testbed.git tmp\ncd tmp\nmvn compile exec:java -Dexec.mainClass=rds.jms.Main -pl basic-spring-jms\n</code></pre>\n\n<p>There's a main class that starts a JMS broker and starts Spring. When Spring starts, it inits a bean that begins sending JMS messages. There's also a Spring message listener as I described above that consumes messages and passes them to the same bean that produces messages, which prints them to stdout.</p>\n"},{"tags":[],"owner":{"account_id":268547,"reputation":9159,"user_id":557363,"display_name":"atrain"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1311870274,"creation_date":1311870274,"answer_id":6862321,"question_id":6858038,"body_markdown":"Why aren&#39;t you just using an MDP?  Seems like you&#39;re recreating Spring functionality.\r\n\r\nExample MDP:\r\n\r\n    public class MyMDP implements MessageListener {\r\n        public void onMessage(Message message) {\r\n            if (message instanceof TextMessage) {\r\n                ...do whatever...\r\n            }\r\n        }\r\n    }\r\n","title":"JMS and ThreadPool problem?","body":"<p>Why aren't you just using an MDP?  Seems like you're recreating Spring functionality.</p>\n\n<p>Example MDP:</p>\n\n<pre><code>public class MyMDP implements MessageListener {\n    public void onMessage(Message message) {\n        if (message instanceof TextMessage) {\n            ...do whatever...\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":426689,"reputation":191,"user_id":808032,"accept_rate":40,"display_name":"fjjiaboming"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3112,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":6861144,"answer_count":2,"score":0,"last_activity_date":1696738812,"creation_date":1311851781,"question_id":6858038,"body_markdown":"I want that jms receives a message when one thread has handled a message (threadPool submits a callable).\r\nThe messages are received by a master thread.\r\nWhich way is better below:\r\n\r\nI use spring 3.0.5  :\r\n \r\n\r\n    ApplicationContext context = new ClassPathXmlApplicationContext(\r\n            &quot;application-context.xml&quot;);\r\n    jmsTemplate = (JmsTemplate) context.getBean(&quot;jmsTemplate&quot;);\r\n    destination = (Destination) context.getBean(&quot;destination&quot;);\r\n    _log4j.debug(&quot;ThreadSize in xml\\t&quot;\r\n            + appConfig.getThumbCreatorThreadSize());\r\n\r\nin master thread Way 1: \r\n\r\n    \r\n\r\n    while (countFlag &lt; 0) {\r\n        try {\r\n            TextMessage msg = (TextMessage) jmsTemplate\r\n                    .receive(destination);\r\n            // prehandle ,then give to sub workers.\r\n            if (msg != null) {\r\n                _log4j.debug(&quot;JMSMessageID:\\t&quot; + msg.getJMSMessageID()\r\n                        + &quot;\\t&quot; + msg.getText());\r\n                IConsumer thumbConsumerImpl = null;\r\n                thumbConsumerImpl = new ThumbConsumerTaskImpl(msg);\r\n                Future&lt;List&lt;ThumbCreatorInfo&gt;&gt; result = threadPool\r\n                        .submit((Callable&lt;List&lt;ThumbCreatorInfo&gt;&gt;) thumbConsumerImpl);\r\n            }\r\n        } catch (IllegalArgumentException e) {\r\n            _log4j.warn(e.getMessage(), e);\r\n        } catch (JMSException e) {\r\n            _log4j.error(&quot;Please check the queue server!JMSException!&quot;, e);\r\n        } catch (Exception e) {\r\n            _log4j.error(&quot;&quot;, e);\r\n        }\r\n    }\r\n\r\nin master thread Way 2:\r\n\r\n        TextMessage msg = (TextMessage) jmsTemplate.receive(destination);\r\n        do {\r\n            try {\r\n                // prehandle ,then give to sub workers.\r\n                if (msg != null) {\r\n                    _log4j.debug(&quot;JMSMessageID:\\t&quot; + msg.getJMSMessageID()\r\n                            + &quot;\\t&quot; + msg.getText());\r\n                    IConsumer thumbConsumerImpl = null;\r\n                    thumbConsumerImpl = new ThumbConsumerTaskImpl(msg);\r\n                    Future&lt;List&lt;ThumbCreatorInfo&gt;&gt; result = threadPool\r\n                            .submit((Callable&lt;List&lt;ThumbCreatorInfo&gt;&gt;) thumbConsumerImpl);\r\n                }\r\n                msg = (TextMessage) jmsTemplate.receive(destination);\r\n            } catch (IllegalArgumentException e) {\r\n                _log4j.warn(e.getMessage(), e);\r\n            } catch (JMSException e) {\r\n                _log4j.error(&quot;Please check the queue server!JMSException!&quot;, e);\r\n            } catch (Exception e) {\r\n                _log4j.error(&quot;&quot;, e);\r\n            }\r\n        } while (countFlag &lt; 0);\r\n","title":"JMS and ThreadPool problem?","body":"<p>I want that jms receives a message when one thread has handled a message (threadPool submits a callable).\nThe messages are received by a master thread.\nWhich way is better below:</p>\n\n<p>I use spring 3.0.5  :</p>\n\n<pre><code>ApplicationContext context = new ClassPathXmlApplicationContext(\n        \"application-context.xml\");\njmsTemplate = (JmsTemplate) context.getBean(\"jmsTemplate\");\ndestination = (Destination) context.getBean(\"destination\");\n_log4j.debug(\"ThreadSize in xml\\t\"\n        + appConfig.getThumbCreatorThreadSize());\n</code></pre>\n\n<p>in master thread Way 1: </p>\n\n<pre><code>while (countFlag &lt; 0) {\n    try {\n        TextMessage msg = (TextMessage) jmsTemplate\n                .receive(destination);\n        // prehandle ,then give to sub workers.\n        if (msg != null) {\n            _log4j.debug(\"JMSMessageID:\\t\" + msg.getJMSMessageID()\n                    + \"\\t\" + msg.getText());\n            IConsumer thumbConsumerImpl = null;\n            thumbConsumerImpl = new ThumbConsumerTaskImpl(msg);\n            Future&lt;List&lt;ThumbCreatorInfo&gt;&gt; result = threadPool\n                    .submit((Callable&lt;List&lt;ThumbCreatorInfo&gt;&gt;) thumbConsumerImpl);\n        }\n    } catch (IllegalArgumentException e) {\n        _log4j.warn(e.getMessage(), e);\n    } catch (JMSException e) {\n        _log4j.error(\"Please check the queue server!JMSException!\", e);\n    } catch (Exception e) {\n        _log4j.error(\"\", e);\n    }\n}\n</code></pre>\n\n<p>in master thread Way 2:</p>\n\n<pre><code>    TextMessage msg = (TextMessage) jmsTemplate.receive(destination);\n    do {\n        try {\n            // prehandle ,then give to sub workers.\n            if (msg != null) {\n                _log4j.debug(\"JMSMessageID:\\t\" + msg.getJMSMessageID()\n                        + \"\\t\" + msg.getText());\n                IConsumer thumbConsumerImpl = null;\n                thumbConsumerImpl = new ThumbConsumerTaskImpl(msg);\n                Future&lt;List&lt;ThumbCreatorInfo&gt;&gt; result = threadPool\n                        .submit((Callable&lt;List&lt;ThumbCreatorInfo&gt;&gt;) thumbConsumerImpl);\n            }\n            msg = (TextMessage) jmsTemplate.receive(destination);\n        } catch (IllegalArgumentException e) {\n            _log4j.warn(e.getMessage(), e);\n        } catch (JMSException e) {\n            _log4j.error(\"Please check the queue server!JMSException!\", e);\n        } catch (Exception e) {\n            _log4j.error(\"\", e);\n        }\n    } while (countFlag &lt; 0);\n</code></pre>\n"},{"tags":["java","serialization","collections","jms","activemq"],"comments":[{"owner":{"account_id":383494,"reputation":5234,"user_id":3640269,"accept_rate":80,"display_name":"BJ Dela Cruz"},"score":0,"creation_date":1337333907,"post_id":6904048,"comment_id":13809681,"body_markdown":"I have that same problem too. I posted a test program here on the Camel forum: http://camel.465427.n5.nabble.com/MessageFormatException-using-requestBody-InOut-over-activemq-JMS-td5554469.html#a5711703. Is there a fix for this bug?","body":"I have that same problem too. I posted a test program here on the Camel forum: <a href=\"http://camel.465427.n5.nabble.com/MessageFormatException-using-requestBody-InOut-over-activemq-JMS-td5554469.html#a5711703\" rel=\"nofollow noreferrer\">camel.465427.n5.nabble.com/&hellip;</a>. Is there a fix for this bug?"}],"answers":[{"tags":[],"owner":{"account_id":299251,"reputation":335905,"user_id":605744,"accept_rate":100,"display_name":"Tomasz Nurkiewicz"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1312231435,"creation_date":1312231435,"answer_id":6904213,"question_id":6904048,"body_markdown":"Although I haven&#39;t checked it, but looking at the [source code](http://grepcode.com/file/repo1.maven.org/maven2/org.apache.activemq/activemq-core/5.2.0/org/apache/activemq/command/ActiveMQMessage.java#ActiveMQMessage.checkValidObject(java.lang.Object)) it seems like you hit this exception when ActiveMQ validates message **properties**, not the body. The [JavaDoc](http://download.oracle.com/javaee/1.4/api/javax/jms/ObjectMessage.html) for `ObjectMessage` reads:\r\n\r\n&gt; Only Serializable Java objects can be used.\r\n\r\nI used all sorts of Java objects with ActiveMQ (arbitrary complex) and it always worked. However when you set message properties ([Message#setObjectProperty](http://download.oracle.com/javaee/1.4/api/javax/jms/Message.html#setObjectProperty(java.lang.String,%20java.lang.Object))):\r\n\r\n\r\n&gt; Note that this method works only for the objectified primitive object types (`Integer`, `Double`, `Long` ...) and `String` objects.\r\n\r\nInspecting the ActiveMQ codebase quoted above it looks like you are trying to use message object properties to send complex Java objects. This abuses the concept of message properties, which should be simple metadata like ids or peer names.\r\n\r\nAlso it looks like ActiveMQ optionally supports `Map` and `List`, but it this is vendor specific.","title":"Object with collection containing Serializable, non-primitive objects can&#39;t be set as ActiveMQ ObjectMessage","body":"<p>Although I haven't checked it, but looking at the <a href=\"http://grepcode.com/file/repo1.maven.org/maven2/org.apache.activemq/activemq-core/5.2.0/org/apache/activemq/command/ActiveMQMessage.java#ActiveMQMessage.checkValidObject%28java.lang.Object%29\">source code</a> it seems like you hit this exception when ActiveMQ validates message <strong>properties</strong>, not the body. The <a href=\"http://download.oracle.com/javaee/1.4/api/javax/jms/ObjectMessage.html\">JavaDoc</a> for <code>ObjectMessage</code> reads:</p>\n\n<blockquote>\n  <p>Only Serializable Java objects can be used.</p>\n</blockquote>\n\n<p>I used all sorts of Java objects with ActiveMQ (arbitrary complex) and it always worked. However when you set message properties (<a href=\"http://download.oracle.com/javaee/1.4/api/javax/jms/Message.html#setObjectProperty%28java.lang.String,%20java.lang.Object%29\">Message#setObjectProperty</a>):</p>\n\n<blockquote>\n  <p>Note that this method works only for the objectified primitive object types (<code>Integer</code>, <code>Double</code>, <code>Long</code> ...) and <code>String</code> objects.</p>\n</blockquote>\n\n<p>Inspecting the ActiveMQ codebase quoted above it looks like you are trying to use message object properties to send complex Java objects. This abuses the concept of message properties, which should be simple metadata like ids or peer names.</p>\n\n<p>Also it looks like ActiveMQ optionally supports <code>Map</code> and <code>List</code>, but it this is vendor specific.</p>\n"}],"owner":{"account_id":210363,"reputation":2159,"user_id":461937,"accept_rate":83,"display_name":"jpredham"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7403,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"accepted_answer_id":6904213,"answer_count":1,"score":7,"last_activity_date":1696738763,"creation_date":1312230394,"question_id":6904048,"body_markdown":"I&#39;d appreciate any help on this...\r\n\r\nI have an Object I&#39;m trying to send in a JMS ObjectMessage by calling setObject. This Object contains a HashMap&lt;String, Object&gt; content as well as some other fields. When the map contains primitive elements the message is built fine. Likewise if I add a non-primitive serializable field to the Object it also sends ok. \r\n\r\nHere&#39;s the rub: Whenever I try to add a serializable non-primitive object to the MAP I get the following MessageFormatException:\r\n\r\n    javax.jms.MessageFormatException: Only objectified primitive objects, String, \r\n    Map and List types are allowed but was: com.abc.ObjectInList\r\n\r\nThe javadoc for ObjectMessage specifies... \r\n\r\n&gt;  Only Serializable Java objects can be used.\r\n\r\n... check. And ...\r\n\r\n&gt;  If a collection of Java objects must be sent, one of the Collection classes provided since JDK 1.2 can be used.\r\n\r\n... double check. While this doesn&#39;t specifically say anything about Serializable objects in a Collection, I guess I would assume this would be supported. Am I doing something wrong here? Do I just bite the bullet and make a new field in my top level Object so I don&#39;t have to put it in the Collection?\r\n\r\nUsing ActiveMQ 5.2. A pertinent Stack Trace follows.\r\n```\r\n2011-08-01 21:06:05,767 ERROR     javax.jms.MessageFormatException: Only objectified primitive objects, String, Map and List types are allowed but was: com.abc.engine.ejb.BasicSchedule@58f295b9 type: class com.abc.engine.ejb.BasicSchedule\r\n2011-08-01 21:06:05,767 ERROR          at org.apache.activemq.command.ActiveMQMessage.checkValidObject(ActiveMQMessage.java:468)\r\n2011-08-01 21:06:05,767 ERROR          at org.apache.activemq.command.ActiveMQMapMessage.setObject(ActiveMQMapMessage.java:705)\r\n2011-08-01 21:06:05,767 ERROR          at com.abc.chronicle.ejb.ChronicleMessageBean.initMessage(ChronicleMessageBean.java:149)\r\n2011-08-01 21:06:05,767 ERROR          at com.abc.chronicle.ejb.ChronicleMessageBean.send(ChronicleMessageBean.java:125)\r\n2011-08-01 21:06:05,767 ERROR          at com.abc.chronicle.ejb.ChronicleMessageBean.onMessage(ChronicleMessageBean.java:77)\r\n2011-08-01 21:06:05,767 ERROR          at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)2011-08-01 21:06:05,768 ERROR          at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\r\n2011-08-01 21:06:05,777 ERROR [com.abc.chronicle.ejb.ChronicleMessageBean]   JMS Exception Sending Message to SDK.OUTGOING_NOTIFICATION : javax.jms.MessageFormatException: Only objectified primitive objects, String, Map and List types are allowed but was: com.abc.engine.ejb.BasicSchedule@1003b2df type: class com.abc.engine.ejb.BasicSchedule\r\n2011-08-01 21:06:05,778 ERROR     javax.jms.MessageFormatException: Only objectified primitive objects, String, Map and List types are allowed but was: com.abc.engine.ejb.BasicSchedule@1003b2df type: class com.abc.engine.ejb.BasicSchedule\r\n2011-08-01 21:06:05,778 ERROR          at org.apache.activemq.command.ActiveMQMessage.checkValidObject(ActiveMQMessage.java:468)\r\n2011-08-01 21:06:05,778 ERROR          at org.apache.activemq.command.ActiveMQMapMessage.setObject(ActiveMQMapMessage.java:705)\r\n2011-08-01 21:06:05,778 ERROR          at com.abc.chronicle.ejb.ChronicleMessageBean.initMessage(ChronicleMessageBean.java:149)\r\n2011-08-01 21:06:05,778 ERROR          at com.abc.chronicle.ejb.ChronicleMessageBean.send(ChronicleMessageBean.java:125)\r\n2011-08-01 21:06:05,778 ERROR          at com.abc.chronicle.ejb.ChronicleMessageBean.onMessage(ChronicleMessageBean.java:77)\r\n```\r\n","title":"Object with collection containing Serializable, non-primitive objects can&#39;t be set as ActiveMQ ObjectMessage","body":"<p>I'd appreciate any help on this...</p>\n<p>I have an Object I'm trying to send in a JMS ObjectMessage by calling setObject. This Object contains a HashMap&lt;String, Object&gt; content as well as some other fields. When the map contains primitive elements the message is built fine. Likewise if I add a non-primitive serializable field to the Object it also sends ok.</p>\n<p>Here's the rub: Whenever I try to add a serializable non-primitive object to the MAP I get the following MessageFormatException:</p>\n<pre><code>javax.jms.MessageFormatException: Only objectified primitive objects, String, \nMap and List types are allowed but was: com.abc.ObjectInList\n</code></pre>\n<p>The javadoc for ObjectMessage specifies...</p>\n<blockquote>\n<p>Only Serializable Java objects can be used.</p>\n</blockquote>\n<p>... check. And ...</p>\n<blockquote>\n<p>If a collection of Java objects must be sent, one of the Collection classes provided since JDK 1.2 can be used.</p>\n</blockquote>\n<p>... double check. While this doesn't specifically say anything about Serializable objects in a Collection, I guess I would assume this would be supported. Am I doing something wrong here? Do I just bite the bullet and make a new field in my top level Object so I don't have to put it in the Collection?</p>\n<p>Using ActiveMQ 5.2. A pertinent Stack Trace follows.</p>\n<pre><code>2011-08-01 21:06:05,767 ERROR     javax.jms.MessageFormatException: Only objectified primitive objects, String, Map and List types are allowed but was: com.abc.engine.ejb.BasicSchedule@58f295b9 type: class com.abc.engine.ejb.BasicSchedule\n2011-08-01 21:06:05,767 ERROR          at org.apache.activemq.command.ActiveMQMessage.checkValidObject(ActiveMQMessage.java:468)\n2011-08-01 21:06:05,767 ERROR          at org.apache.activemq.command.ActiveMQMapMessage.setObject(ActiveMQMapMessage.java:705)\n2011-08-01 21:06:05,767 ERROR          at com.abc.chronicle.ejb.ChronicleMessageBean.initMessage(ChronicleMessageBean.java:149)\n2011-08-01 21:06:05,767 ERROR          at com.abc.chronicle.ejb.ChronicleMessageBean.send(ChronicleMessageBean.java:125)\n2011-08-01 21:06:05,767 ERROR          at com.abc.chronicle.ejb.ChronicleMessageBean.onMessage(ChronicleMessageBean.java:77)\n2011-08-01 21:06:05,767 ERROR          at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)2011-08-01 21:06:05,768 ERROR          at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n2011-08-01 21:06:05,777 ERROR [com.abc.chronicle.ejb.ChronicleMessageBean]   JMS Exception Sending Message to SDK.OUTGOING_NOTIFICATION : javax.jms.MessageFormatException: Only objectified primitive objects, String, Map and List types are allowed but was: com.abc.engine.ejb.BasicSchedule@1003b2df type: class com.abc.engine.ejb.BasicSchedule\n2011-08-01 21:06:05,778 ERROR     javax.jms.MessageFormatException: Only objectified primitive objects, String, Map and List types are allowed but was: com.abc.engine.ejb.BasicSchedule@1003b2df type: class com.abc.engine.ejb.BasicSchedule\n2011-08-01 21:06:05,778 ERROR          at org.apache.activemq.command.ActiveMQMessage.checkValidObject(ActiveMQMessage.java:468)\n2011-08-01 21:06:05,778 ERROR          at org.apache.activemq.command.ActiveMQMapMessage.setObject(ActiveMQMapMessage.java:705)\n2011-08-01 21:06:05,778 ERROR          at com.abc.chronicle.ejb.ChronicleMessageBean.initMessage(ChronicleMessageBean.java:149)\n2011-08-01 21:06:05,778 ERROR          at com.abc.chronicle.ejb.ChronicleMessageBean.send(ChronicleMessageBean.java:125)\n2011-08-01 21:06:05,778 ERROR          at com.abc.chronicle.ejb.ChronicleMessageBean.onMessage(ChronicleMessageBean.java:77)\n</code></pre>\n"},{"tags":["java","jakarta-ee","jboss","ejb-3.0"],"comments":[{"owner":{"account_id":373975,"reputation":24834,"user_id":723920,"accept_rate":60,"display_name":"Kal"},"score":0,"creation_date":1312999671,"post_id":7015583,"comment_id":8377734,"body_markdown":"What version of jboss are you using?","body":"What version of jboss are you using?"},{"owner":{"account_id":210363,"reputation":2159,"user_id":461937,"accept_rate":83,"display_name":"jpredham"},"score":0,"creation_date":1313000551,"post_id":7015583,"comment_id":8377983,"body_markdown":"Sorry I meant to specify: see the EDIT in the post","body":"Sorry I meant to specify: see the EDIT in the post"}],"answers":[{"tags":[],"owner":{"account_id":210363,"reputation":2159,"user_id":461937,"accept_rate":83,"display_name":"jpredham"},"down_vote_count":0,"up_vote_count":12,"is_accepted":true,"score":12,"last_activity_date":1314375850,"creation_date":1314375850,"answer_id":7207753,"question_id":7015583,"body_markdown":"After doing some research I&#39;ve found a satisfactory explanation for this EJBException.\r\n\r\nMessageDrivenBeans have an instance pool. When a batch of JMS messages is delivered to an MDB in the quantity of the prefetch each are assigned an instance from this pool and are delivered to that instance via the `onMessage` function.\r\n\r\nA little about how the pool works: In JBoss 5.1.0 the pooled beans such as MDBs and SessionBeans are configured by default through JBoss AOP, specifically a file in the deploy directory titled &quot;ejb3-interceptors-aop.xml&quot;. This file creates interceptor bindings and default annotations for any class matching its domain. In the case of the Message Driven Bean domain, among other things a `org.jboss.ejb3.annotation.Pool` annotation:\r\n\r\n    &lt;annotation expr=&quot;class(*) AND !class(@org.jboss.ejb3.annotation.Pool)&quot;&gt;\r\n         @org.jboss.ejb3.annotation.Pool (value=&quot;StrictMaxPool&quot;, maxSize=15, timeout=10000)\r\n    &lt;/annotation&gt;\r\n\r\nThe parameters of that annotation are described [here][1].\r\n\r\nHerein lies the rub. If the message prefetch exceeds the maxSize of this pool (which it usually will for high throughput messaging applications) you will necessarily have messages that are waiting for an MDB instance. **If the time from message delivery to calling onMessage exceeds the pool timeout for any message, an EJBException will be thrown.** This may not be an issue for the first few iterations of the message distribution, but if you have a large prefetch and long average onMessage time, the message towards the end of the queue will begin to fail.\r\n\r\nSome quick algebra reveals that this will occurs, roughly speaking, when\r\n\r\n    timeout &lt; (prefetch x onMessageTime) / maxSize\r\n\r\nThis assumes that messages are distributed instantaneously, and each onMessage takes the same time but should give you a rough estimate of whether you&#39;re way out of bounds.\r\n\r\nThe solution to this problem is more subjective. Simply increasing the timeout is a naive option, because it will mask the fact that messages are sitting on your application server instead of your queue. Given that onMessage time is somewhat fixed, decreasing the prefetch is most likely a good option as is increasing the pool size, if resources allow. In tuning this I *decreased timeout* in addition to decreasing prefetch substantially and increasing maxSize to keep messages on the queue for longer while maintaining my alert indicator for when onMessage times are higher than normal.\r\n\r\n\r\n  [1]: http://docs.jboss.org/ejb3/docs/reference/build/reference/en/html/session-bean-config.html","title":"EJBException: Failed to acquire the pool semaphore","body":"<p>After doing some research I've found a satisfactory explanation for this EJBException.</p>\n\n<p>MessageDrivenBeans have an instance pool. When a batch of JMS messages is delivered to an MDB in the quantity of the prefetch each are assigned an instance from this pool and are delivered to that instance via the <code>onMessage</code> function.</p>\n\n<p>A little about how the pool works: In JBoss 5.1.0 the pooled beans such as MDBs and SessionBeans are configured by default through JBoss AOP, specifically a file in the deploy directory titled \"ejb3-interceptors-aop.xml\". This file creates interceptor bindings and default annotations for any class matching its domain. In the case of the Message Driven Bean domain, among other things a <code>org.jboss.ejb3.annotation.Pool</code> annotation:</p>\n\n<pre><code>&lt;annotation expr=\"class(*) AND !class(@org.jboss.ejb3.annotation.Pool)\"&gt;\n     @org.jboss.ejb3.annotation.Pool (value=\"StrictMaxPool\", maxSize=15, timeout=10000)\n&lt;/annotation&gt;\n</code></pre>\n\n<p>The parameters of that annotation are described <a href=\"http://docs.jboss.org/ejb3/docs/reference/build/reference/en/html/session-bean-config.html\" rel=\"noreferrer\">here</a>.</p>\n\n<p>Herein lies the rub. If the message prefetch exceeds the maxSize of this pool (which it usually will for high throughput messaging applications) you will necessarily have messages that are waiting for an MDB instance. <strong>If the time from message delivery to calling onMessage exceeds the pool timeout for any message, an EJBException will be thrown.</strong> This may not be an issue for the first few iterations of the message distribution, but if you have a large prefetch and long average onMessage time, the message towards the end of the queue will begin to fail.</p>\n\n<p>Some quick algebra reveals that this will occurs, roughly speaking, when</p>\n\n<pre><code>timeout &lt; (prefetch x onMessageTime) / maxSize\n</code></pre>\n\n<p>This assumes that messages are distributed instantaneously, and each onMessage takes the same time but should give you a rough estimate of whether you're way out of bounds.</p>\n\n<p>The solution to this problem is more subjective. Simply increasing the timeout is a naive option, because it will mask the fact that messages are sitting on your application server instead of your queue. Given that onMessage time is somewhat fixed, decreasing the prefetch is most likely a good option as is increasing the pool size, if resources allow. In tuning this I <em>decreased timeout</em> in addition to decreasing prefetch substantially and increasing maxSize to keep messages on the queue for longer while maintaining my alert indicator for when onMessage times are higher than normal.</p>\n"},{"tags":[],"owner":{"account_id":3247823,"reputation":71,"user_id":2738847,"display_name":"Nilindra Fernando"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1394518714,"creation_date":1394518714,"answer_id":22317886,"question_id":7015583,"body_markdown":"What jpredham says is correct. Also plz check whether\r\n\r\n&#39;strictMaximumSize&#39; set to true\r\n\r\nwhich could lead to https://issues.jboss.org/browse/JBAS-1599","title":"EJBException: Failed to acquire the pool semaphore","body":"<p>What jpredham says is correct. Also plz check whether</p>\n\n<p>'strictMaximumSize' set to true</p>\n\n<p>which could lead to <a href=\"https://issues.jboss.org/browse/JBAS-1599\" rel=\"nofollow\">https://issues.jboss.org/browse/JBAS-1599</a></p>\n"}],"owner":{"account_id":210363,"reputation":2159,"user_id":461937,"accept_rate":83,"display_name":"jpredham"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":12199,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":7207753,"answer_count":2,"score":4,"last_activity_date":1696738600,"creation_date":1312999467,"question_id":7015583,"body_markdown":"I&#39;m occasionally getting the following EJB exception across several different message driven beans:\r\n\r\n    javax.ejb.EJBException: Failed to acquire the pool semaphore, strictTimeout=10000\r\n\r\nThis behavior closely corresponds to when a particular database is having issues and thereby increases the amount of time spent in the MDB&#39;s onMessage function. The messages are being delivered by an ActiveMQ broker (version 5.4.2). The prefetch on the MDBs is 2000 (20 Sessions x 100 Messages per session). \r\n\r\nMy question is a general one. What exactly is happening here? I know that a message which has been delivered to the server running the MDB will time out after 10 seconds if there is no instance in the bean pool to handle it, however how has that message been delivered to the server in the first place? My assumption up to this point is that the MDB requests messages from the broker in the quantity of &lt;prefetch&gt; only when it no longer has any messages to process. Are they simply waiting in that server-side &quot;bucket&quot; for too long?\r\n\r\nHas anyone else run into this? Suggestions for tuning prefetch/semaphore timeout?\r\n\r\n**EDIT:** Forgot to mention I&#39;m using JBoss AS 5.1.0\r\n","title":"EJBException: Failed to acquire the pool semaphore","body":"<p>I'm occasionally getting the following EJB exception across several different message driven beans:</p>\n\n<pre><code>javax.ejb.EJBException: Failed to acquire the pool semaphore, strictTimeout=10000\n</code></pre>\n\n<p>This behavior closely corresponds to when a particular database is having issues and thereby increases the amount of time spent in the MDB's onMessage function. The messages are being delivered by an ActiveMQ broker (version 5.4.2). The prefetch on the MDBs is 2000 (20 Sessions x 100 Messages per session). </p>\n\n<p>My question is a general one. What exactly is happening here? I know that a message which has been delivered to the server running the MDB will time out after 10 seconds if there is no instance in the bean pool to handle it, however how has that message been delivered to the server in the first place? My assumption up to this point is that the MDB requests messages from the broker in the quantity of  only when it no longer has any messages to process. Are they simply waiting in that server-side \"bucket\" for too long?</p>\n\n<p>Has anyone else run into this? Suggestions for tuning prefetch/semaphore timeout?</p>\n\n<p><strong>EDIT:</strong> Forgot to mention I'm using JBoss AS 5.1.0</p>\n"},{"tags":["java","spring","jms","bandwidth-throttling"],"comments":[{"owner":{"account_id":19697,"reputation":16105,"user_id":46375,"accept_rate":100,"display_name":"whaley"},"score":1,"creation_date":1313613347,"post_id":7090028,"comment_id":8501293,"body_markdown":"Why wouldn&#39;t limiting incoming message flow be enough - which ActiveMQ allows you to do with the use of producerFlowControl and memoryLimits on destinations.  I&#39;m curious to know why you&#39;d want to limit outgoing messages as well.  Further - wouldn&#39;t this type of thing be better controlled from some kind of application delivery controller sitting in front of your broker (assuming you even have that option).","body":"Why wouldn&#39;t limiting incoming message flow be enough - which ActiveMQ allows you to do with the use of producerFlowControl and memoryLimits on destinations.  I&#39;m curious to know why you&#39;d want to limit outgoing messages as well.  Further - wouldn&#39;t this type of thing be better controlled from some kind of application delivery controller sitting in front of your broker (assuming you even have that option)."},{"owner":{"account_id":295619,"reputation":4833,"user_id":600132,"accept_rate":100,"display_name":"Sorceror"},"score":0,"creation_date":1313647985,"post_id":7090028,"comment_id":8507114,"body_markdown":"Our customer wants to limit outgoing bandwidth from producers (let&#39;s say, customer have 100 mbit bandwidth, but he want to use just 10 mbit). It drives me crazy. JMS is made to deliver messages as soon as possible, so I don&#39;t really understand that demand. But sadly its not on my decision.","body":"Our customer wants to limit outgoing bandwidth from producers (let&#39;s say, customer have 100 mbit bandwidth, but he want to use just 10 mbit). It drives me crazy. JMS is made to deliver messages as soon as possible, so I don&#39;t really understand that demand. But sadly its not on my decision."}],"answers":[{"tags":[],"owner":{"account_id":220789,"reputation":114430,"user_id":478399,"accept_rate":83,"display_name":"AlexR"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1313572791,"creation_date":1313572791,"answer_id":7090473,"question_id":7090028,"body_markdown":"I do not think that you have any seriously better alternative to determine the JMS message size than measuring of its serialized size.\r\n\r\nBut you can add some optimizations if you want. There are several types of messages (e.g. MapMessage, ObjectMessage, TextMessage).\r\n\r\nThe size of text message is the length of its text. The size of map message is the total size of all its fields. The fields are primitives or java.util.Date, so it is not a problem to measure them. \r\nObject message contains serializable object, so you can measure its size by writing to ByteOutputStream.\r\n\r\nI think that implementation of leaky bucket using JMS may be simplified if you are using hidden feature of most JMS providers to send delayed messages. You can measure the message when enqueueing it and decide when do you want the subscriber to receive it. \r\nPlease read here for details of how to send delayed messages: http://alexradzin.blogspot.com/2010/10/send-delayed-jms-messages.html","title":"JMS message size","body":"<p>I do not think that you have any seriously better alternative to determine the JMS message size than measuring of its serialized size.</p>\n\n<p>But you can add some optimizations if you want. There are several types of messages (e.g. MapMessage, ObjectMessage, TextMessage).</p>\n\n<p>The size of text message is the length of its text. The size of map message is the total size of all its fields. The fields are primitives or java.util.Date, so it is not a problem to measure them. \nObject message contains serializable object, so you can measure its size by writing to ByteOutputStream.</p>\n\n<p>I think that implementation of leaky bucket using JMS may be simplified if you are using hidden feature of most JMS providers to send delayed messages. You can measure the message when enqueueing it and decide when do you want the subscriber to receive it. \nPlease read here for details of how to send delayed messages: <a href=\"http://alexradzin.blogspot.com/2010/10/send-delayed-jms-messages.html\" rel=\"nofollow\">http://alexradzin.blogspot.com/2010/10/send-delayed-jms-messages.html</a></p>\n"},{"tags":[],"owner":{"account_id":454176,"reputation":1274,"user_id":851566,"display_name":"strmqm"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1313589936,"creation_date":1313589936,"answer_id":7094185,"question_id":7090028,"body_markdown":"In addition to the earlier comment by @AlexR, BytesMessage has a getBodyLength() method\r\n\r\nhttp://download.oracle.com/javaee/1.4/api/javax/jms/BytesMessage.html#getBodyLength\r\n\r\nand you can probably estimate typical header size in transit by capturing a few objects created using Session.createMessage() - i.e. the JMS message type with no payload. I think i&#39;d be tempted to work directly with a payload in a byte[], using a BytesMessage, and compress via a ZipOutputStream if bandwidth is critical. In addition, JMS allows hints to suppress message timestamp and message id, which may help reduce message size e.g. \r\n\r\nhttp://download.oracle.com/javaee/1.4/api/javax/jms/MessageProducer.html#setDisableMessageTimestamp%28boolean%29\r\n\r\nalthough providers are not required to support it, \r\n\r\n&gt; If the JMS provider accepts this hint, these messages must have the message ID set to null; if the provider ignores the hint, the message ID must be set to its normal unique value\r\n\r\nI once worked with very bandwidth-limited JMS on WebSphere MQ everyplace, and it was possible to get the message size pretty small in this way - although the native wireframe format was also optimised for size in that case\r\n\r\n","title":"JMS message size","body":"<p>In addition to the earlier comment by @AlexR, BytesMessage has a getBodyLength() method</p>\n\n<p><a href=\"http://download.oracle.com/javaee/1.4/api/javax/jms/BytesMessage.html#getBodyLength\" rel=\"nofollow\">http://download.oracle.com/javaee/1.4/api/javax/jms/BytesMessage.html#getBodyLength</a></p>\n\n<p>and you can probably estimate typical header size in transit by capturing a few objects created using Session.createMessage() - i.e. the JMS message type with no payload. I think i'd be tempted to work directly with a payload in a byte[], using a BytesMessage, and compress via a ZipOutputStream if bandwidth is critical. In addition, JMS allows hints to suppress message timestamp and message id, which may help reduce message size e.g. </p>\n\n<p><a href=\"http://download.oracle.com/javaee/1.4/api/javax/jms/MessageProducer.html#setDisableMessageTimestamp%28boolean%29\" rel=\"nofollow\">http://download.oracle.com/javaee/1.4/api/javax/jms/MessageProducer.html#setDisableMessageTimestamp%28boolean%29</a></p>\n\n<p>although providers are not required to support it, </p>\n\n<blockquote>\n  <p>If the JMS provider accepts this hint, these messages must have the message ID set to null; if the provider ignores the hint, the message ID must be set to its normal unique value</p>\n</blockquote>\n\n<p>I once worked with very bandwidth-limited JMS on WebSphere MQ everyplace, and it was possible to get the message size pretty small in this way - although the native wireframe format was also optimised for size in that case</p>\n"},{"tags":[],"owner":{"account_id":295619,"reputation":4833,"user_id":600132,"accept_rate":100,"display_name":"Sorceror"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1326708983,"creation_date":1326708983,"answer_id":8878549,"question_id":7090028,"body_markdown":"Because JMS messages are serialized in sending process, the best way how to obtain size of message is [through ObjectOutputStream](https://stackoverflow.com/a/52362/600132).\r\n\r\n    private int getMessageSizeInBytes(MessageWrapper message) throws IOException {\r\n        ByteArrayOutputStream baos = new ByteArrayOutputStream();\r\n        ObjectOutputStream oos = new ObjectOutputStream(baos);\r\n        oos.writeObject(message);\r\n        oos.close();\r\n        return baos.size();\r\n    }","title":"JMS message size","body":"<p>Because JMS messages are serialized in sending process, the best way how to obtain size of message is <a href=\"https://stackoverflow.com/a/52362/600132\">through ObjectOutputStream</a>.</p>\n\n<pre><code>private int getMessageSizeInBytes(MessageWrapper message) throws IOException {\n    ByteArrayOutputStream baos = new ByteArrayOutputStream();\n    ObjectOutputStream oos = new ObjectOutputStream(baos);\n    oos.writeObject(message);\n    oos.close();\n    return baos.size();\n}\n</code></pre>\n"}],"owner":{"account_id":295619,"reputation":4833,"user_id":600132,"accept_rate":100,"display_name":"Sorceror"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":20044,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"accepted_answer_id":8878549,"answer_count":3,"score":8,"last_activity_date":1696738411,"creation_date":1313570791,"question_id":7090028,"body_markdown":"I&#39;m currently working on bandwidth limiting feature (don&#39;t ask me why, its not my decision) for application which use JMS (Spring framework JMS and Active MQ namely) to sending messages with payload between server and clients.\r\n\r\nI found lot of throttling methods to limit incoming JMS messages (but none of them based on actual bandwidth load), however I didn&#39;t find any possible way to limit outgoing message flow. So I decided to write [Leaky bucket algorithm][1] on my own. \r\n\r\n**Is there some way how to obtain size of JMS message?** Other than &#39;sizeof&#39; implementation in Java ([In Java, what is the best way to determine the size of an object?][2])\r\n\r\n\r\n  [1]: http://en.wikipedia.org/wiki/Leaky_bucket\r\n  [2]: https://stackoverflow.com/questions/52353/in-java-what-is-the-best-way-to-determine-the-size-of-an-object","title":"JMS message size","body":"<p>I'm currently working on bandwidth limiting feature (don't ask me why, its not my decision) for application which use JMS (Spring framework JMS and Active MQ namely) to sending messages with payload between server and clients.</p>\n\n<p>I found lot of throttling methods to limit incoming JMS messages (but none of them based on actual bandwidth load), however I didn't find any possible way to limit outgoing message flow. So I decided to write <a href=\"http://en.wikipedia.org/wiki/Leaky_bucket\" rel=\"nofollow noreferrer\">Leaky bucket algorithm</a> on my own. </p>\n\n<p><strong>Is there some way how to obtain size of JMS message?</strong> Other than 'sizeof' implementation in Java (<a href=\"https://stackoverflow.com/questions/52353/in-java-what-is-the-best-way-to-determine-the-size-of-an-object\">In Java, what is the best way to determine the size of an object?</a>)</p>\n"},{"tags":["java","jms","message-queue"],"answers":[{"tags":[],"owner":{"account_id":220789,"reputation":114430,"user_id":478399,"accept_rate":83,"display_name":"AlexR"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1314081749,"creation_date":1314081749,"answer_id":7157190,"question_id":7157039,"body_markdown":"Definitely. You can create JMS message that will contain appropriate properties. Pre-configured listeners will subscribe to topic and receive messages filtered by selector. Since JMS selector uses SQL like syntax you can create your JMS subscribers dynamically and build the selector according to the application requirements and current configuration. \r\n\r\nFor example `type=&#39;timesheet&#39; from=&#39;Consultant&#39;` will select only timsheets submitted by consultant. Other selector `type=&#39;expenses&#39; from=&#39;Bookkeeper&#39;` will get other events (and probably will format email differently. \r\n\r\nAnd this one: `type=&#39;systemcrash&#39; from=&#39;monitor&#39;` will send SMS to System Administrator at 3:00AM, Sunday :).","title":"Can JMS message-queue be used in this context for my use case?","body":"<p>Definitely. You can create JMS message that will contain appropriate properties. Pre-configured listeners will subscribe to topic and receive messages filtered by selector. Since JMS selector uses SQL like syntax you can create your JMS subscribers dynamically and build the selector according to the application requirements and current configuration. </p>\n\n<p>For example <code>type='timesheet' from='Consultant'</code> will select only timsheets submitted by consultant. Other selector <code>type='expenses' from='Bookkeeper'</code> will get other events (and probably will format email differently. </p>\n\n<p>And this one: <code>type='systemcrash' from='monitor'</code> will send SMS to System Administrator at 3:00AM, Sunday :).</p>\n"}],"owner":{"account_id":60953,"reputation":10663,"user_id":181870,"accept_rate":61,"display_name":"Gnanam"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":508,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1696738336,"creation_date":1314080607,"question_id":7157039,"body_markdown":"I&#39;m new to message queue system and read a bit about JMS in particular.  [This question](https://stackoverflow.com/questions/1035949/real-world-use-of-jms-message-queues &quot;Real world use of JMS/message queues&quot;) was also helpful in understanding better about real world use case of JMS.\r\n\r\nOurs is a web-based application and am trying to find out whether a particular flow in our application context can leverage JMS effectively.  Context explained below:\r\n\r\n&gt; There is an *Email Event* in the application, that will trigger email\r\n&gt; to a set of predefined listeners, whenever an event happens in the\r\n&gt; application.  Event could be Consultants submitting timesheet,\r\n&gt; Consultants submitting expense, etc.  Application allows to configure\r\n&gt; different set of listeners for different events.\r\n\r\nMy question here is, whether JMS can be used in place for triggering of emails, so that it is loosely/decoupled from the application logic (in this case, submitting timesheet/expense), by not waiting for all emails to be delivered to the listeners.  Does it make sense in using JMS in this context?  I also want to understand whether my perception/view of the JMS architecture is correct in this regard.  Comments/ideas/thoughts/suggestion/advice from experienced users are really appreciated.\r\n\r\n**NOTE:** Our tools of trade are: Java, JDK1.6, JSP, Apache Tomcat v6.0.10, PostgreSQL v8.2.3","title":"Can JMS message-queue be used in this context for my use case?","body":"<p>I'm new to message queue system and read a bit about JMS in particular.  <a href=\"https://stackoverflow.com/questions/1035949/real-world-use-of-jms-message-queues\" title=\"Real world use of JMS/message queues\">This question</a> was also helpful in understanding better about real world use case of JMS.</p>\n\n<p>Ours is a web-based application and am trying to find out whether a particular flow in our application context can leverage JMS effectively.  Context explained below:</p>\n\n<blockquote>\n  <p>There is an <em>Email Event</em> in the application, that will trigger email\n  to a set of predefined listeners, whenever an event happens in the\n  application.  Event could be Consultants submitting timesheet,\n  Consultants submitting expense, etc.  Application allows to configure\n  different set of listeners for different events.</p>\n</blockquote>\n\n<p>My question here is, whether JMS can be used in place for triggering of emails, so that it is loosely/decoupled from the application logic (in this case, submitting timesheet/expense), by not waiting for all emails to be delivered to the listeners.  Does it make sense in using JMS in this context?  I also want to understand whether my perception/view of the JMS architecture is correct in this regard.  Comments/ideas/thoughts/suggestion/advice from experienced users are really appreciated.</p>\n\n<p><strong>NOTE:</strong> Our tools of trade are: Java, JDK1.6, JSP, Apache Tomcat v6.0.10, PostgreSQL v8.2.3</p>\n"},{"tags":["java","angular","spring-boot","events","event-handling"],"comments":[{"owner":{"account_id":2134379,"reputation":7299,"user_id":1894517,"accept_rate":79,"display_name":"Vinay Prajapati"},"score":0,"creation_date":1571726557,"post_id":58498344,"comment_id":103325836,"body_markdown":"Can you please try my suggestions. It should fix the problem you are facing.","body":"Can you please try my suggestions. It should fix the problem you are facing."},{"owner":{"account_id":2134379,"reputation":7299,"user_id":1894517,"accept_rate":79,"display_name":"Vinay Prajapati"},"score":0,"creation_date":1571730085,"post_id":58498344,"comment_id":103327485,"body_markdown":"Please share CURL of your request. I would like to observe the headers as well.","body":"Please share CURL of your request. I would like to observe the headers as well."},{"owner":{"account_id":15947907,"reputation":171,"user_id":11507953,"display_name":"Bhushan Mahajan"},"score":0,"creation_date":1571732752,"post_id":58498344,"comment_id":103328777,"body_markdown":"`curl -X POST \\ http://localhost:8090/chat\\ -H &#39;Accept: */*&#39; \\ -H &#39;Accept-Encoding: gzip, deflate&#39; \\ -H &#39;Cache-Control: no-cache&#39; \\ -H &#39;Connection: keep-alive&#39; \\ -H &#39;Content-Length: 134&#39; \\ -H &#39;Content-Type: application/json&#39; \\ -H &#39;Cookie: JSESSIONID=349102FC07B387A5D2629995D508210F&#39; \\ -H &#39;Host: localhost:8090&#39; \\ -H &#39;cache-control: no-cache&#39; \\ -d &#39;{ &quot;text&quot; : &quot;I can do this now&quot;, &quot;sourceLanguageCode&quot; : &quot;en&quot;, &quot;targetLanguageCode&quot; : &quot;hi&quot;, &quot;sender&quot; : &quot;abc&quot; }`","body":"<code>curl -X POST \\ http:&#47;&#47;localhost:8090&#47;chat\\ -H &#39;Accept: *&#47;*&#39; \\ -H &#39;Accept-Encoding: gzip, deflate&#39; \\ -H &#39;Cache-Control: no-cache&#39; \\ -H &#39;Connection: keep-alive&#39; \\ -H &#39;Content-Length: 134&#39; \\ -H &#39;Content-Type: application&#47;json&#39; \\ -H &#39;Cookie: JSESSIONID=349102FC07B387A5D2629995D508210F&#39; \\ -H &#39;Host: localhost:8090&#39; \\ -H &#39;cache-control: no-cache&#39; \\ -d &#39;{ &quot;text&quot; : &quot;I can do this now&quot;, &quot;sourceLanguageCode&quot; : &quot;en&quot;, &quot;targetLanguageCode&quot; : &quot;hi&quot;, &quot;sender&quot; : &quot;abc&quot; }</code>"},{"owner":{"account_id":2134379,"reputation":7299,"user_id":1894517,"accept_rate":79,"display_name":"Vinay Prajapati"},"score":0,"creation_date":1571735841,"post_id":58498344,"comment_id":103330621,"body_markdown":"can you check your jackson dependencies are in place for backend?","body":"can you check your jackson dependencies are in place for backend?"},{"owner":{"account_id":15947907,"reputation":171,"user_id":11507953,"display_name":"Bhushan Mahajan"},"score":0,"creation_date":1571738388,"post_id":58498344,"comment_id":103332141,"body_markdown":"I am not using jackson dependency","body":"I am not using jackson dependency"}],"answers":[{"tags":[],"owner":{"account_id":2134379,"reputation":7299,"user_id":1894517,"accept_rate":79,"display_name":"Vinay Prajapati"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1571730045,"creation_date":1571726509,"answer_id":58498421,"question_id":58498344,"body_markdown":"From first look at your code, I can observe following problems:\r\n\r\n1. `@ResponseBody` is added but no response is returned i.e. method type is void.\r\n\r\n2. `produces = &quot;application/json&quot;` doesn&#39;t make sense for a void method returning no response.\r\n\r\nHence, for a rest endpoint always return some response. You can fix it by putting following as return statement in the end in your method:\r\n\r\n```\r\nreturn ResponseEntity.ok(&quot;your message&quot;);\r\n```\r\n\r\nAlso, `@ResponseBody` means that response is always serialized to json hence, no need to specify `, produces = &quot;application/json&quot;` explicitly.\r\n\r\n\r\n**Update:** \r\n\r\nCan you please also try replacing `consumes = &quot;application/json&quot;, produces = &quot;application/json&quot;` with \r\n\r\n```\r\n  consumes = MediaType.APPLICATION_JSON_VALUE, \r\n  produces = MediaType.APPLICATION_JSON_VALUE\r\n\r\n```\r\n\r\nAnd\r\n\r\nensure that request headers are set to `application/json`.\r\n\r\nAlso, ensrue jackson dependencies are in place.","title":"org.springframework.web.HttpMediaTypeNotAcceptableException: Could not find acceptable representation in java spring boot","body":"<p>From first look at your code, I can observe following problems:</p>\n\n<ol>\n<li><p><code>@ResponseBody</code> is added but no response is returned i.e. method type is void.</p></li>\n<li><p><code>produces = \"application/json\"</code> doesn't make sense for a void method returning no response.</p></li>\n</ol>\n\n<p>Hence, for a rest endpoint always return some response. You can fix it by putting following as return statement in the end in your method:</p>\n\n<pre><code>return ResponseEntity.ok(\"your message\");\n</code></pre>\n\n<p>Also, <code>@ResponseBody</code> means that response is always serialized to json hence, no need to specify <code>, produces = \"application/json\"</code> explicitly.</p>\n\n<p><strong>Update:</strong> </p>\n\n<p>Can you please also try replacing <code>consumes = \"application/json\", produces = \"application/json\"</code> with </p>\n\n<pre><code>  consumes = MediaType.APPLICATION_JSON_VALUE, \n  produces = MediaType.APPLICATION_JSON_VALUE\n\n</code></pre>\n\n<p>And</p>\n\n<p>ensure that request headers are set to <code>application/json</code>.</p>\n\n<p>Also, ensrue jackson dependencies are in place.</p>\n"},{"tags":[],"owner":{"account_id":15947907,"reputation":171,"user_id":11507953,"display_name":"Bhushan Mahajan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1571751837,"creation_date":1571751837,"answer_id":58505710,"question_id":58498344,"body_markdown":"Solution: `EventSource` in angular takes `Content-Type : text/event-stream` by default. So I created new method and added `@RequestHeader(value = &quot;Content-Type&quot;, defaultValue = &quot;text/event-stream&quot;)` as parameter.","title":"org.springframework.web.HttpMediaTypeNotAcceptableException: Could not find acceptable representation in java spring boot","body":"<p>Solution: <code>EventSource</code> in angular takes <code>Content-Type : text/event-stream</code> by default. So I created new method and added <code>@RequestHeader(value = \"Content-Type\", defaultValue = \"text/event-stream\")</code> as parameter.</p>\n"},{"tags":[],"owner":{"account_id":7802687,"reputation":422,"user_id":5901503,"display_name":"Gani"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640876446,"creation_date":1640876446,"answer_id":70533321,"question_id":58498344,"body_markdown":"Automatic conversion of Objects are neglected if you don&#39;t have getter method for the return type object. If you don&#39;t have getter method for `GenericApiResponse` object add one.","title":"org.springframework.web.HttpMediaTypeNotAcceptableException: Could not find acceptable representation in java spring boot","body":"<p>Automatic conversion of Objects are neglected if you don't have getter method for the return type object. If you don't have getter method for <code>GenericApiResponse</code> object add one.</p>\n"}],"owner":{"account_id":15947907,"reputation":171,"user_id":11507953,"display_name":"Bhushan Mahajan"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":10099,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1696737985,"creation_date":1571726168,"question_id":58498344,"body_markdown":"I am developing chat application using java springboot and Angular 7. I am using events in spring boot and angular. I am trying to generate events in spring boot for angular to listen the event. However, I am getting following error:\r\n\r\n    Resolved [org.springframework.web.HttpMediaTypeNotAcceptableException: Could not find acceptable representation]\r\n\r\nHere is my controller code in springboot:\r\n\r\n    @CrossOrigin(&quot;*&quot;)\r\n    @RestController\r\n    @RequestMapping(&quot;/chat&quot;)\r\n    public class MessageController {\r\n\r\n\t@Autowired\r\n\tMessageService messageService;\r\n\t\r\n\t@Autowired\r\n\tprivate ApplicationEventPublisher applicationEventPublisher;\r\n\r\n\tprivate static final Logger logger = LoggerFactory.getLogger(MessageController.class);\r\n\r\n\t@PostMapping(consumes = &quot;application/json&quot;, produces = &quot;application/json&quot;)\r\n\tpublic GenericApiResponse&lt;Map&lt;String, Object&gt;&gt;message(@RequestBody MessageRequest req) {\r\n\t\tlogger.info(&quot;MessageController:: messagemethod [POST] /chat&quot;);\r\n\t\tGenericApiResponse&lt;Map&lt;String, Object&gt;&gt; responseObj = new GenericApiResponse&lt;&gt;();\r\n\t\tObject returnValue = new Object();\r\n\t\ttry {\r\n\t\t\treturnValue = messageService.translateText(req);\r\n\t\t} catch (Exception e) {\r\n\t\t\te.printStackTrace();\r\n\t\t\tlogger.error(&quot;EXCEPTION: &quot;+e.getStackTrace().toString());\r\n\t\t\tresponseObj.setStatus(Constants.ERROR);\r\n\t\t\tresponseObj.setMessage(&quot;Internal Server Error&quot;);\r\n\t\t}\r\n\t\tMap&lt;String, Object&gt; resMap = new HashMap&lt;&gt;();\r\n\t\tresMap.put(&quot;result&quot;, returnValue);\r\n\t\tresMap.put(&quot;sender&quot;, req.getSender());\r\n\t\tresponseObj.setResponseObject(resMap);\r\n\t\tresponseObj.setStatus(Constants.SUCCESS);\r\n\t\t\r\n\t\tMessageEvent messageEvent = new MessageEvent(this,&quot;eventName&quot;, responseObj);\r\n\t\tapplicationEventPublisher.publishEvent(messageEvent);\r\n\t\t\r\n        return responseObj;\r\n\t}\r\n\r\nI am unable to figure out what is the issue and how to solve it. Please help me to solve this issue.\r\nThanks in advance :)","title":"org.springframework.web.HttpMediaTypeNotAcceptableException: Could not find acceptable representation in java spring boot","body":"<p>I am developing chat application using java springboot and Angular 7. I am using events in spring boot and angular. I am trying to generate events in spring boot for angular to listen the event. However, I am getting following error:</p>\n\n<pre><code>Resolved [org.springframework.web.HttpMediaTypeNotAcceptableException: Could not find acceptable representation]\n</code></pre>\n\n<p>Here is my controller code in springboot:</p>\n\n<pre><code>@CrossOrigin(\"*\")\n@RestController\n@RequestMapping(\"/chat\")\npublic class MessageController {\n\n@Autowired\nMessageService messageService;\n\n@Autowired\nprivate ApplicationEventPublisher applicationEventPublisher;\n\nprivate static final Logger logger = LoggerFactory.getLogger(MessageController.class);\n\n@PostMapping(consumes = \"application/json\", produces = \"application/json\")\npublic GenericApiResponse&lt;Map&lt;String, Object&gt;&gt;message(@RequestBody MessageRequest req) {\n    logger.info(\"MessageController:: messagemethod [POST] /chat\");\n    GenericApiResponse&lt;Map&lt;String, Object&gt;&gt; responseObj = new GenericApiResponse&lt;&gt;();\n    Object returnValue = new Object();\n    try {\n        returnValue = messageService.translateText(req);\n    } catch (Exception e) {\n        e.printStackTrace();\n        logger.error(\"EXCEPTION: \"+e.getStackTrace().toString());\n        responseObj.setStatus(Constants.ERROR);\n        responseObj.setMessage(\"Internal Server Error\");\n    }\n    Map&lt;String, Object&gt; resMap = new HashMap&lt;&gt;();\n    resMap.put(\"result\", returnValue);\n    resMap.put(\"sender\", req.getSender());\n    responseObj.setResponseObject(resMap);\n    responseObj.setStatus(Constants.SUCCESS);\n\n    MessageEvent messageEvent = new MessageEvent(this,\"eventName\", responseObj);\n    applicationEventPublisher.publishEvent(messageEvent);\n\n    return responseObj;\n}\n</code></pre>\n\n<p>I am unable to figure out what is the issue and how to solve it. Please help me to solve this issue.\nThanks in advance :)</p>\n"},{"tags":["java","java.util.scanner"],"comments":[{"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"score":0,"creation_date":1696727469,"post_id":77251985,"comment_id":136190243,"body_markdown":"It’s going to read 2 into `n`, 0101010 into `k`, and then wait for additional input to read into `s`","body":"It’s going to read 2 into <code>n</code>, 0101010 into <code>k</code>, and then wait for additional input to read into <code>s</code>"},{"owner":{"account_id":29566113,"reputation":13,"user_id":22659485,"display_name":"ngngng"},"score":0,"creation_date":1696727599,"post_id":77251985,"comment_id":136190249,"body_markdown":"I meant that `n` is going to be written as input first and it works, but problem is that scanner doesn&#39;t read the last line of input","body":"I meant that <code>n</code> is going to be written as input first and it works, but problem is that scanner doesn&#39;t read the last line of input"},{"owner":{"account_id":28104689,"reputation":512,"user_id":21473475,"display_name":"Arfur Narf"},"score":2,"creation_date":1696728297,"post_id":77251985,"comment_id":136190288,"body_markdown":"Your code as written works (I ran it on input &#39;1 (newline) 2 010101010 (newline)&#39;).  &#39;n, k, s&#39; are read as expected.  I added a print call after the assignment to &#39;s&#39;.   What do you mean &quot;doesn&#39;t reach the last line&quot;","body":"Your code as written works (I ran it on input &#39;1 (newline) 2 010101010 (newline)&#39;).  &#39;n, k, s&#39; are read as expected.  I added a print call after the assignment to &#39;s&#39;.   What do you mean &quot;doesn&#39;t reach the last line&quot;"},{"owner":{"account_id":28104689,"reputation":512,"user_id":21473475,"display_name":"Arfur Narf"},"score":0,"creation_date":1696728348,"post_id":77251985,"comment_id":136190291,"body_markdown":"@notAPPP - the meaning is clear enough. I&#39;m not a fan of Scanner either, but it&#39;s clear what it&#39;s supposed to do (read 3 separate tokens in sequence) and it does it.","body":"@notAPPP - the meaning is clear enough. I&#39;m not a fan of Scanner either, but it&#39;s clear what it&#39;s supposed to do (read 3 separate tokens in sequence) and it does it."},{"owner":{"account_id":2792262,"reputation":163847,"user_id":2402272,"accept_rate":85,"display_name":"John Bollinger"},"score":0,"creation_date":1696729134,"post_id":77251985,"comment_id":136190321,"body_markdown":"How are you testing it?  If by feeding it input interactively then the issue is likely that `Scanner.next()` is trying to consume a whole trailing delimiter (by default, a *run* of whitespace characters) before it accepts that it has seen a delimiter at all.  If your input is organized into lines then use `nextLine()` instead of `next()`, and trim (or just ignore) any trailing whitespace.","body":"How are you testing it?  If by feeding it input interactively then the issue is likely that <code>Scanner.next()</code> is trying to consume a whole trailing delimiter (by default, a <i>run</i> of whitespace characters) before it accepts that it has seen a delimiter at all.  If your input is organized into lines then use <code>nextLine()</code> instead of <code>next()</code>, and trim (or just ignore) any trailing whitespace."},{"owner":{"account_id":247613,"reputation":284087,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":1,"creation_date":1696730500,"post_id":77251985,"comment_id":136190408,"body_markdown":"[mre] code post please.","body":"<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> code post please."},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1696733934,"post_id":77251985,"comment_id":136190557,"body_markdown":"What is the program supposed to do?  If the user inputs `5`, is the user expected to give 10 additional inputs? Please edit the question to explain.  Also, as a previous comment said, please provide a complete, but minimal reproducible example. (See the page linked to in that comment.) Include examples. Each example should have an input, expected output, and actual output.","body":"What is the program supposed to do?  If the user inputs <code>5</code>, is the user expected to give 10 additional inputs? Please edit the question to explain.  Also, as a previous comment said, please provide a complete, but minimal reproducible example. (See the page linked to in that comment.) Include examples. Each example should have an input, expected output, and actual output."},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1696734146,"post_id":77251985,"comment_id":136190566,"body_markdown":"User friendly design tip: Precede each input request with a prompt.  For example, `Sysytem.out.print (&quot;Input foo count (integer) &gt;&quot;); foo = sc.nextInt (); System.out.print (&quot;Input bar value (floating point) &gt;&quot;); bar = sc.nextDouble ();`.","body":"User friendly design tip: Precede each input request with a prompt.  For example, <code>Sysytem.out.print (&quot;Input foo count (integer) &gt;&quot;); foo = sc.nextInt (); System.out.print (&quot;Input bar value (floating point) &gt;&quot;); bar = sc.nextDouble ();</code>."}],"answers":[{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696731146,"creation_date":1696731146,"answer_id":77252072,"question_id":77251985,"body_markdown":"&gt; _&quot;... I get `n` strings like &quot;2 0101010&quot; as input and i want to save `2` to variable `k` and `0101010` to string `s`, but scanner doesn&#39;t reach the last line. How can i fix it? ...&quot;_\r\n\r\nThe code appears to work fine.\r\n\r\nHere is a similar implementation.\r\n\r\n```java\r\nScanner in = new Scanner(System.in);\r\nint n = in.nextInt(), k;\r\nString s;\r\nwhile (n-- &gt; 0) {\r\n    k = in.nextInt();\r\n    s = in.next();\r\n}\r\n```","title":"Scanner doesn&#39;t reach the last line","body":"<blockquote>\n<p><em>&quot;... I get <code>n</code> strings like &quot;2 0101010&quot; as input and i want to save <code>2</code> to variable <code>k</code> and <code>0101010</code> to string <code>s</code>, but scanner doesn't reach the last line. How can i fix it? ...&quot;</em></p>\n</blockquote>\n<p>The code appears to work fine.</p>\n<p>Here is a similar implementation.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Scanner in = new Scanner(System.in);\nint n = in.nextInt(), k;\nString s;\nwhile (n-- &gt; 0) {\n    k = in.nextInt();\n    s = in.next();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23793122,"reputation":1,"user_id":17804361,"display_name":"VRashi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696731793,"creation_date":1696731793,"answer_id":77252100,"question_id":77251985,"body_markdown":"in the code sc is the scanner object, and fisrt int value is stored into variable n, if it is int, second value passed is stored into variable K and you must pass one more value to s. so you have to input three values.","title":"Scanner doesn&#39;t reach the last line","body":"<p>in the code sc is the scanner object, and fisrt int value is stored into variable n, if it is int, second value passed is stored into variable K and you must pass one more value to s. so you have to input three values.</p>\n"},{"tags":[],"owner":{"account_id":25878001,"reputation":1,"user_id":19607616,"display_name":"Drachios"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696737857,"creation_date":1696737833,"answer_id":77252273,"question_id":77251985,"body_markdown":"&quot;I get n strings like &quot;2 0101010&quot;, as you said this I&#39;m assuming that you are getting n number of strings, where a single string is of the form &quot;2 0101010&quot;. \r\n\r\nIn this case if I were you, I would take the whole String as input and then perform string operations on it, and then storing them into k and s. You can use charAt and substrings to achieve this. Hope this helps!","title":"Scanner doesn&#39;t reach the last line","body":"<p>&quot;I get n strings like &quot;2 0101010&quot;, as you said this I'm assuming that you are getting n number of strings, where a single string is of the form &quot;2 0101010&quot;.</p>\n<p>In this case if I were you, I would take the whole String as input and then perform string operations on it, and then storing them into k and s. You can use charAt and substrings to achieve this. Hope this helps!</p>\n"}],"owner":{"account_id":29566113,"reputation":13,"user_id":22659485,"display_name":"ngngng"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":74,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":3,"score":-1,"last_activity_date":1696737857,"creation_date":1696727231,"question_id":77251985,"body_markdown":"I have following code:\r\n```\r\nScanner sc = new Scanner(System.in);\r\nint n = sc.nextInt();\r\nfor (int i = 0; i &lt; n; i++) {\r\n    int k = sc.nextInt();\r\n    String s = sc.next();\r\n```\r\nI get `n` strings like &quot;2 0101010&quot; as input and i want to save `2` to variable `k` and `0101010` to string `s`, but scanner doesn&#39;t reach the last line. How can i fix it?\r\n\r\n","title":"Scanner doesn&#39;t reach the last line","body":"<p>I have following code:</p>\n<pre><code>Scanner sc = new Scanner(System.in);\nint n = sc.nextInt();\nfor (int i = 0; i &lt; n; i++) {\n    int k = sc.nextInt();\n    String s = sc.next();\n</code></pre>\n<p>I get <code>n</code> strings like &quot;2 0101010&quot; as input and i want to save <code>2</code> to variable <code>k</code> and <code>0101010</code> to string <code>s</code>, but scanner doesn't reach the last line. How can i fix it?</p>\n"},{"tags":["java","maven","pljava"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1696742007,"post_id":77252268,"comment_id":136190908,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"owner":{"account_id":12528146,"reputation":1,"user_id":9117232,"display_name":"咕噜流氓兔"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1696737604,"creation_date":1696737604,"question_id":77252268,"body_markdown":"https://tada.github.io/pljava/use/hello.html\r\n\r\nI want to package a jar according to the sample program, but pljava-api cannot be found in maven. What is the reason or from which repository can I download dependency?\r\n\r\n\r\nI went to look for it in the https://repo.maven.apache.org/maven2 warehouse and found that I couldn&#39;t find it. However, the pljava documentation did not specify which warehouse I should download the dependencies from. I tried the maven central warehouse and the Alibaba Cloud maven warehouse. , the dependency of this pljava cannot be found, what should I do?","title":"The sample program packaging of pljava cannot find maven dependencies?","body":"<p><a href=\"https://tada.github.io/pljava/use/hello.html\" rel=\"nofollow noreferrer\">https://tada.github.io/pljava/use/hello.html</a></p>\n<p>I want to package a jar according to the sample program, but pljava-api cannot be found in maven. What is the reason or from which repository can I download dependency?</p>\n<p>I went to look for it in the <a href=\"https://repo.maven.apache.org/maven2\" rel=\"nofollow noreferrer\">https://repo.maven.apache.org/maven2</a> warehouse and found that I couldn't find it. However, the pljava documentation did not specify which warehouse I should download the dependencies from. I tried the maven central warehouse and the Alibaba Cloud maven warehouse. , the dependency of this pljava cannot be found, what should I do?</p>\n"},{"tags":["java","jms","message-queue"],"answers":[{"tags":[],"owner":{"account_id":202319,"reputation":4688,"user_id":449325,"display_name":"alpian"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1304115981,"creation_date":1304115981,"answer_id":5838011,"question_id":5837845,"body_markdown":"AFAIK, close() will simply shutdown that consumer.  In order to delete the subscription you need to unsubscribe() from it (a method on Session).  You should test this with your chosen JMS provider however in order to be sure they implemented the JMS spec the way it was intended! :)","title":"What is the best way to shutdown a durable consumer using JMS?","body":"<p>AFAIK, close() will simply shutdown that consumer.  In order to delete the subscription you need to unsubscribe() from it (a method on Session).  You should test this with your chosen JMS provider however in order to be sure they implemented the JMS spec the way it was intended! :)</p>\n"}],"owner":{"account_id":91958,"reputation":15235,"user_id":252253,"accept_rate":62,"display_name":"James"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1467,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1696737584,"creation_date":1304114448,"question_id":5837845,"body_markdown":"I have a durable consumer on a JMS topic. I set the client ID, I can see that it&#39;s listed on the queue as a durable consumer. \r\n\r\nWhen I roll out code the server is restarted but I want to queue up the messages that I&#39;m missing while I restart (hence durable). What is the correct way to cleanly shutdown a message consumer so that you close it but still have the queue know to buffer the messages for you\r\n\r\n    destination = session.createTopic(&quot;beacons&quot;);\r\n    messageConsumer = session.createDurableSubscriber(destination, clientID);\r\n\r\nis this the correct way? or will this tell the queue that you no longer want messages delivered when you re-connect?\r\n\r\n    messageConsumer.close \r\n\r\n\r\nin a nutshell I&#39;m looking to be able to restart my service without losing messages from the topic I&#39;m subscribed to, thanks!","title":"What is the best way to shutdown a durable consumer using JMS?","body":"<p>I have a durable consumer on a JMS topic. I set the client ID, I can see that it's listed on the queue as a durable consumer. </p>\n\n<p>When I roll out code the server is restarted but I want to queue up the messages that I'm missing while I restart (hence durable). What is the correct way to cleanly shutdown a message consumer so that you close it but still have the queue know to buffer the messages for you</p>\n\n<pre><code>destination = session.createTopic(\"beacons\");\nmessageConsumer = session.createDurableSubscriber(destination, clientID);\n</code></pre>\n\n<p>is this the correct way? or will this tell the queue that you no longer want messages delivered when you re-connect?</p>\n\n<pre><code>messageConsumer.close \n</code></pre>\n\n<p>in a nutshell I'm looking to be able to restart my service without losing messages from the topic I'm subscribed to, thanks!</p>\n"},{"tags":["java","spring","jms","ibm-mq"],"answers":[{"tags":[],"owner":{"account_id":401667,"reputation":377,"user_id":768359,"display_name":"Chris"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1306487197,"creation_date":1306487197,"answer_id":6150075,"question_id":6150006,"body_markdown":"\r\nMy first guess is, that you&#39;re using WebSphere AppServer and your JMS queue object (in JNDI) is configured to be a native MQ series client, i.e. you create a JMSObjectMessage which you hand over to the session and then MQSeries thinks it has to convert to BytesMessage.","title":"Why am I recieving a JMSBytesMessage when I&#39;m sending an OBject message using Spring and MQ Queue","body":"<p>My first guess is, that you're using WebSphere AppServer and your JMS queue object (in JNDI) is configured to be a native MQ series client, i.e. you create a JMSObjectMessage which you hand over to the session and then MQSeries thinks it has to convert to BytesMessage.</p>\n"},{"tags":[],"owner":{"account_id":4376203,"reputation":2070,"user_id":3569165,"display_name":"Jan"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1398411567,"creation_date":1398411567,"answer_id":23286984,"question_id":6150006,"body_markdown":"I had the same problem. In my case, I was using the wrong transport type:\r\n\r\n&lt;!-- language: lang-xml --&gt;\r\n\r\n    &lt;bean id=&quot;mqQueue&quot; class=&quot;com.ibm.mq.jms.MQQueue&quot;&gt;\r\n        &lt;property name=&quot;baseQueueName&quot; value=&quot;...&quot; /&gt;\r\n        &lt;property name=&quot;targetClient&quot;&gt;\r\n            &lt;util:constant static-field=&quot;com.ibm.mq.jms.JMSC.MQJMS_CLIENT_NONJMS_MQ&quot; /&gt;\r\n        &lt;/property&gt;\r\n    &lt;/bean&gt;\r\n\r\nInstead it should have been:\r\n\r\n&lt;!-- language: lang-xml --&gt;\r\n\r\n    &lt;bean id=&quot;mqQueue&quot; class=&quot;com.ibm.mq.jms.MQQueue&quot;&gt;\r\n        &lt;property name=&quot;baseQueueName&quot; value=&quot;...&quot; /&gt;\r\n        &lt;property name=&quot;targetClient&quot;&gt;\r\n            &lt;util:constant static-field=&quot;com.ibm.mq.jms.JMSC.MQJMS_CLIENT_JMS_COMPLIANT&quot; /&gt;\r\n        &lt;/property&gt;\r\n    &lt;/bean&gt;\r\n","title":"Why am I recieving a JMSBytesMessage when I&#39;m sending an OBject message using Spring and MQ Queue","body":"<p>I had the same problem. In my case, I was using the wrong transport type:</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;bean id=\"mqQueue\" class=\"com.ibm.mq.jms.MQQueue\"&gt;\n    &lt;property name=\"baseQueueName\" value=\"...\" /&gt;\n    &lt;property name=\"targetClient\"&gt;\n        &lt;util:constant static-field=\"com.ibm.mq.jms.JMSC.MQJMS_CLIENT_NONJMS_MQ\" /&gt;\n    &lt;/property&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p>Instead it should have been:</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;bean id=\"mqQueue\" class=\"com.ibm.mq.jms.MQQueue\"&gt;\n    &lt;property name=\"baseQueueName\" value=\"...\" /&gt;\n    &lt;property name=\"targetClient\"&gt;\n        &lt;util:constant static-field=\"com.ibm.mq.jms.JMSC.MQJMS_CLIENT_JMS_COMPLIANT\" /&gt;\n    &lt;/property&gt;\n&lt;/bean&gt;\n</code></pre>\n"}],"owner":{"account_id":250258,"reputation":3515,"user_id":1399539,"accept_rate":91,"display_name":"Michael W"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3627,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":6150075,"answer_count":2,"score":3,"last_activity_date":1696736745,"creation_date":1306486883,"question_id":6150006,"body_markdown":"So I&#39;m sending an object using Spring and IBM MQ Queue:\r\n\r\n\tpublic void sendObjectMessage(final Object message) {\r\n\t  \r\n\t//\tjmsTemplate.convertAndSend(message);\r\n\r\n\t\tjmsTemplate.send(new MessageCreator()\r\n\t      {\r\n\t        public Message createMessage(Session session) throws JMSException\r\n\t        {\r\n\t        ObjectMessage outMessage = session.createObjectMessage((Serializable) message);\r\n\t        return(outMessage);\r\n\t        }\r\n\t      }); \r\n\t}\r\n\r\nAnd during debugging I can see that I am indeed sending it as an object message. But using Spring&#39;s listener implementation I am picking up the messages in the onMessage() method as JMSBytesMessages????\r\n\r\n \tpublic void onMessage(Message message) {\r\n\t\tSystem.out.println(&quot;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Recieved in onMessage&quot;);\r\n\t\tSystem.out.println(message.getClass());\r\n\t}\r\n\r\n\r\nOUTPUT:\r\n\r\n    &gt;&gt;&gt;&gt;&gt;&gt;&gt; Recieved in onMessage\r\n    class com.ibm.jms.JMSBytesMessage\r\n\r\n\r\nAnybody know whats going on here? This is difficult to debug as it seems to be happening on the queue???\r\n\r\nThanks for your help\r\n\r\n\r\nP.S I&#39;ve also tried to catch the message using \r\n\r\n\tif (message instanceof ObjectMessage) {\r\n\t\tobject = ((ObjectMessage) message).getObject();\r\n\t}\r\n\r\nand\r\n\r\n\tif (message instanceof JMSBytesMessage) {\r\n\t\tSystem.out.println(&quot;ITS A BYTES MESSAGE!!!!!!!!!!!&quot;); \r\n\t}\r\n\r\nNeither of which work???","title":"Why am I recieving a JMSBytesMessage when I&#39;m sending an OBject message using Spring and MQ Queue","body":"<p>So I'm sending an object using Spring and IBM MQ Queue:</p>\n\n<pre><code>public void sendObjectMessage(final Object message) {\n\n//  jmsTemplate.convertAndSend(message);\n\n    jmsTemplate.send(new MessageCreator()\n      {\n        public Message createMessage(Session session) throws JMSException\n        {\n        ObjectMessage outMessage = session.createObjectMessage((Serializable) message);\n        return(outMessage);\n        }\n      }); \n}\n</code></pre>\n\n<p>And during debugging I can see that I am indeed sending it as an object message. But using Spring's listener implementation I am picking up the messages in the onMessage() method as JMSBytesMessages????</p>\n\n<pre><code>public void onMessage(Message message) {\n    System.out.println(\"&gt;&gt;&gt;&gt;&gt;&gt;&gt; Recieved in onMessage\");\n    System.out.println(message.getClass());\n}\n</code></pre>\n\n<p>OUTPUT:</p>\n\n<pre><code>&gt;&gt;&gt;&gt;&gt;&gt;&gt; Recieved in onMessage\nclass com.ibm.jms.JMSBytesMessage\n</code></pre>\n\n<p>Anybody know whats going on here? This is difficult to debug as it seems to be happening on the queue???</p>\n\n<p>Thanks for your help</p>\n\n<p>P.S I've also tried to catch the message using </p>\n\n<pre><code>if (message instanceof ObjectMessage) {\n    object = ((ObjectMessage) message).getObject();\n}\n</code></pre>\n\n<p>and</p>\n\n<pre><code>if (message instanceof JMSBytesMessage) {\n    System.out.println(\"ITS A BYTES MESSAGE!!!!!!!!!!!\"); \n}\n</code></pre>\n\n<p>Neither of which work???</p>\n"},{"tags":["java","spring-boot","asynchronous"],"owner":{"account_id":8635214,"reputation":1,"user_id":6465660,"display_name":"Anand Sourabh"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":13,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1696735409,"creation_date":1696735191,"question_id":77252191,"body_markdown":"I am running into a typical issue with @CacheEvict annotation not working when invoking an AWSLambda function from Springboot App.\r\n\r\nI have a POST controller, that has a /save endpoint. Within the controller, I invoke the AWSLambda using Java SDK using something like this:\r\n\r\n\r\n        @PostMapping(value = &quot;/save&quot;, consumes = {MediaType.APPLICATION_JSON_VALUE})\r\n            public ResponseEntity&lt;Object&gt; saveData(@RequestBody MyDTO myDTO) {\r\n            String cn = &quot;123456&quot;; //Hard coded as an example\r\n            try {\r\n                        InvokeResult result = getResultfromLambda(myDTO,cn);\r\n                        String responseStr = null;\r\n                        if(result.getPayload() != null){\r\n                            responseStr = new String(result.getPayload().array(), StandardCharsets.UTF_8);\r\n                        }\r\n            .......\r\n                }catch (Exception e) {\r\n                    log.error(&quot;An exception occurred while saving data. Exception is : {}&quot;, e.getMessage());\r\n                    LogUtils.logExceptionDetails(e);\r\n                    String stackTrace = ExceptionUtils.getStackTrace(e);\r\n                    throw e;\r\n                }\r\n               ...\r\n\r\nThe getResultfromLambda is as below:\r\n\r\n    @Caching(evict = { @CacheEvict(cacheNames=&quot;CACHE1&quot;, key=&quot;#cn&quot; , cacheManager = &quot;cacheManager&quot;),\r\n            @CacheEvict(cacheNames=&quot;CACHE2&quot;, key=&quot;#cn&quot; , cacheManager = &quot;cacheManager&quot;)\r\n           })\r\n    public InvokeResult getResultfromLambda(MyDTO myDTP, String cn) {\r\n        InvokeRequest req = new InvokeRequest()\r\n                .withFunctionName(MY_SERVICE_LAMBDA_FUNCTION_NAME)\r\n                .withPayload(myDTO);\r\n        req.setInvocationType(InvocationType.Event);\r\n        return awsLambda.invoke(req);\r\n    }\r\n\r\nawsLambda is autowired as below in the controller:\r\n\r\n    @Autowired(required = false)\r\n    AWSLambda awsLambda;\r\n\r\nThe Lambda get invoked but the CacheEvict does not happen. I have tried many ways of using CacheManager directly, but still does not work.\r\n\r\nIs it because of the Asynchronous execution of the Lambda function? Could you please guide on how to resolve this?","title":"Issue with @CacheEvict when invoking a AWSLambda function from Spring service","body":"<p>I am running into a typical issue with @CacheEvict annotation not working when invoking an AWSLambda function from Springboot App.</p>\n<p>I have a POST controller, that has a /save endpoint. Within the controller, I invoke the AWSLambda using Java SDK using something like this:</p>\n<pre><code>    @PostMapping(value = &quot;/save&quot;, consumes = {MediaType.APPLICATION_JSON_VALUE})\n        public ResponseEntity&lt;Object&gt; saveData(@RequestBody MyDTO myDTO) {\n        String cn = &quot;123456&quot;; //Hard coded as an example\n        try {\n                    InvokeResult result = getResultfromLambda(myDTO,cn);\n                    String responseStr = null;\n                    if(result.getPayload() != null){\n                        responseStr = new String(result.getPayload().array(), StandardCharsets.UTF_8);\n                    }\n        .......\n            }catch (Exception e) {\n                log.error(&quot;An exception occurred while saving data. Exception is : {}&quot;, e.getMessage());\n                LogUtils.logExceptionDetails(e);\n                String stackTrace = ExceptionUtils.getStackTrace(e);\n                throw e;\n            }\n           ...\n</code></pre>\n<p>The getResultfromLambda is as below:</p>\n<pre><code>@Caching(evict = { @CacheEvict(cacheNames=&quot;CACHE1&quot;, key=&quot;#cn&quot; , cacheManager = &quot;cacheManager&quot;),\n        @CacheEvict(cacheNames=&quot;CACHE2&quot;, key=&quot;#cn&quot; , cacheManager = &quot;cacheManager&quot;)\n       })\npublic InvokeResult getResultfromLambda(MyDTO myDTP, String cn) {\n    InvokeRequest req = new InvokeRequest()\n            .withFunctionName(MY_SERVICE_LAMBDA_FUNCTION_NAME)\n            .withPayload(myDTO);\n    req.setInvocationType(InvocationType.Event);\n    return awsLambda.invoke(req);\n}\n</code></pre>\n<p>awsLambda is autowired as below in the controller:</p>\n<pre><code>@Autowired(required = false)\nAWSLambda awsLambda;\n</code></pre>\n<p>The Lambda get invoked but the CacheEvict does not happen. I have tried many ways of using CacheManager directly, but still does not work.</p>\n<p>Is it because of the Asynchronous execution of the Lambda function? Could you please guide on how to resolve this?</p>\n"},{"tags":["java","postgresql","hibernate","criteria-api"],"owner":{"account_id":1293839,"reputation":1183,"user_id":1245415,"accept_rate":78,"display_name":"Sixthpoint"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":23,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1696733071,"creation_date":1696733071,"question_id":77252134,"body_markdown":"I have the following postgres query:\r\n\r\n    SELECT DISTINCT DATE(created_date) as day FROM registrations GROUP BY created_date ORDER BY DATE(created_date) ASC\r\n\r\nI am attempting to convert this to the criteria api and use it with a specification predicate. The `registration.createdDate` is of `LocalDateTime` on the entity. The column in postgres is of type `timestamp with timezone`\r\n  \r\n\r\n    var builder = entityManager.getCriteriaBuilder();\r\n    \r\n    var dateCriteriaQuery = builder.createQuery(Date.class);\r\n    Root&lt;Registration&gt; root = dateCriteriaQuery.from(Registration.class);\r\n    \r\n    dateCriteriaQuery.select(builder.function(&quot;DATE&quot;, Date.class, root.get(Registration_.createdDate)).as(Date.class).alias(&quot;date&quot;));\r\n    \r\n    GenericSpecificationsBuilder&lt;Registration&gt; specificationsBuilder = new GenericSpecificationsBuilder&lt;&gt;();\r\n    Specification&lt;Registration&gt; specification = specificationsBuilder.buildSpecificationFromSearchOperationRequest(searchOperationRequest, RegistrationSpecification::new);\r\n    Predicate predicate = specification.toPredicate(root, dateCriteriaQuery, builder);\r\n    dateCriteriaQuery.where(predicate);\r\n    \r\n    TypedQuery&lt;Date&gt; typedQuery = entityManager.createQuery(dateCriteriaQuery);\r\n    return typedQuery.getResultList();\r\n\r\nThe following error is occuring\r\n\r\n    org.hibernate.QueryException: No data type for node: org.hibernate.hql.internal.ast.tree.MethodNode \r\n     \\-[METHOD_CALL] MethodNode: &#39;function (DATE)&#39;\r\n        +-[METHOD_NAME] IdentNode: &#39;DATE&#39; {originalText=DATE}\r\n        \\-[EXPR_LIST] SqlNode: &#39;exprList&#39;\r\n           \\-[DOT] DotNode: &#39;registrati0_.created_date&#39; {propertyName=createdDate,dereferenceType=PRIMITIVE,getPropertyPath=createdDate,path=generatedAlias0.createdDate,tableAlias=registrati0_,className=com.entity.Registration,classAlias=generatedAlias0}\r\n              +-[ALIAS_REF] IdentNode: &#39;registrati0_.id&#39; {alias=generatedAlias0, className=com.entity.Registration, tableAlias=registrati0_}\r\n              \\-[IDENT] IdentNode: &#39;createdDate&#39; {originalText=createdDate}\r\n     [select distinct function(&#39;DATE&#39;, generatedAlias0.createdDate) from com.entity.Registration as generatedAlias0 where generatedAlias0.id&gt;1L]\r\n\r\nHow can I select the distinct dates using the postgres date function?\r\n","title":"Criteria API select distinct date using postgres date function","body":"<p>I have the following postgres query:</p>\n<pre><code>SELECT DISTINCT DATE(created_date) as day FROM registrations GROUP BY created_date ORDER BY DATE(created_date) ASC\n</code></pre>\n<p>I am attempting to convert this to the criteria api and use it with a specification predicate. The <code>registration.createdDate</code> is of <code>LocalDateTime</code> on the entity. The column in postgres is of type <code>timestamp with timezone</code></p>\n<pre><code>var builder = entityManager.getCriteriaBuilder();\n\nvar dateCriteriaQuery = builder.createQuery(Date.class);\nRoot&lt;Registration&gt; root = dateCriteriaQuery.from(Registration.class);\n\ndateCriteriaQuery.select(builder.function(&quot;DATE&quot;, Date.class, root.get(Registration_.createdDate)).as(Date.class).alias(&quot;date&quot;));\n\nGenericSpecificationsBuilder&lt;Registration&gt; specificationsBuilder = new GenericSpecificationsBuilder&lt;&gt;();\nSpecification&lt;Registration&gt; specification = specificationsBuilder.buildSpecificationFromSearchOperationRequest(searchOperationRequest, RegistrationSpecification::new);\nPredicate predicate = specification.toPredicate(root, dateCriteriaQuery, builder);\ndateCriteriaQuery.where(predicate);\n\nTypedQuery&lt;Date&gt; typedQuery = entityManager.createQuery(dateCriteriaQuery);\nreturn typedQuery.getResultList();\n</code></pre>\n<p>The following error is occuring</p>\n<pre><code>org.hibernate.QueryException: No data type for node: org.hibernate.hql.internal.ast.tree.MethodNode \n \\-[METHOD_CALL] MethodNode: 'function (DATE)'\n    +-[METHOD_NAME] IdentNode: 'DATE' {originalText=DATE}\n    \\-[EXPR_LIST] SqlNode: 'exprList'\n       \\-[DOT] DotNode: 'registrati0_.created_date' {propertyName=createdDate,dereferenceType=PRIMITIVE,getPropertyPath=createdDate,path=generatedAlias0.createdDate,tableAlias=registrati0_,className=com.entity.Registration,classAlias=generatedAlias0}\n          +-[ALIAS_REF] IdentNode: 'registrati0_.id' {alias=generatedAlias0, className=com.entity.Registration, tableAlias=registrati0_}\n          \\-[IDENT] IdentNode: 'createdDate' {originalText=createdDate}\n [select distinct function('DATE', generatedAlias0.createdDate) from com.entity.Registration as generatedAlias0 where generatedAlias0.id&gt;1L]\n</code></pre>\n<p>How can I select the distinct dates using the postgres date function?</p>\n"},{"tags":["java","java-8","flatmap"],"comments":[{"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":6,"creation_date":1696596230,"post_id":77244486,"comment_id":136177011,"body_markdown":"`Map&lt;String,List&gt;` should be `Map&lt;String,List&lt;Integer&gt;&gt;` (or simply `var`) and `Map&lt;String,Map&lt;String,List&gt;&gt;` should be `Map&lt;String,Map&lt;String,List&lt;Integer&gt;&gt;&gt;`. You&#39;re [using a raw type `List`, which you should not](https://stackoverflow.com/questions/2770321/what-is-a-raw-type-and-why-shouldnt-we-use-it).","body":"<code>Map&lt;String,List&gt;</code> should be <code>Map&lt;String,List&lt;Integer&gt;&gt;</code> (or simply <code>var</code>) and <code>Map&lt;String,Map&lt;String,List&gt;&gt;</code> should be <code>Map&lt;String,Map&lt;String,List&lt;Integer&gt;&gt;&gt;</code>. You&#39;re <a href=\"https://stackoverflow.com/questions/2770321/what-is-a-raw-type-and-why-shouldnt-we-use-it\">using a raw type <code>List</code>, which you should not</a>."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":4,"creation_date":1696605338,"post_id":77244486,"comment_id":136179024,"body_markdown":"As Joachim Sauer said, don’t use raw types. After you fixed the types, you can use, e.g. `boolean lessThanfiveAll = outer.values().stream() .flatMap(m -&gt; m.values().stream()) .flatMap(List::stream) .allMatch(i -&gt; i &lt; 5);`","body":"As Joachim Sauer said, don’t use raw types. After you fixed the types, you can use, e.g. <code>boolean lessThanfiveAll = outer.values().stream() .flatMap(m -&gt; m.values().stream()) .flatMap(List::stream) .allMatch(i -&gt; i &lt; 5);</code>"}],"answers":[{"tags":[],"owner":{"account_id":25492313,"reputation":1,"user_id":19286884,"display_name":"user19286884"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696721621,"creation_date":1696721621,"answer_id":77251828,"question_id":77244486,"body_markdown":"Do you need to use `flatMap`. Would this work?\r\n\r\n`boolean lessThanfiveAll = outer.entrySet().stream().allMatch(e -&gt; e.getValue().entrySet().stream().allMatch(v -&gt;v.getValue().stream().allMatch(e1 -&gt; e1 &lt; 5)));`","title":"Process Nested HashMaps with List of Integers in Java 8","body":"<p>Do you need to use <code>flatMap</code>. Would this work?</p>\n<p><code>boolean lessThanfiveAll = outer.entrySet().stream().allMatch(e -&gt; e.getValue().entrySet().stream().allMatch(v -&gt;v.getValue().stream().allMatch(e1 -&gt; e1 &lt; 5)));</code></p>\n"}],"owner":{"account_id":1339113,"reputation":1550,"user_id":1281182,"accept_rate":59,"display_name":"Atul"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1696730895,"creation_date":1696595790,"question_id":77244486,"body_markdown":"I want to do a simple Operation in Java 8. Below is the code \r\n\r\n```java\r\nList&lt;Integer&gt; lst =  Arrays.asList(1,2,3);\r\nMap&lt;String,List&gt; inner = new HashMap&lt;String,List&gt;();\r\ninner.put(&quot;first&quot;,lst);\r\n\r\nMap&lt;String,Map&lt;String,List&gt;&gt; outer =\r\n  new HashMap&lt;String,Map&lt;String,List&gt;&gt;();\r\nouter.put(&quot;Bigger&quot;,inner);\r\n```\r\n\r\nWhat I want to do is , return boolean if all the values in a child map List of Integers satisfy a criteria\r\n\r\nI tried to do below but it seems it is not working : \r\n\r\n```java\r\nboolean lessThanfiveAll =\r\n  outer.entrySet().stream().flatMap(\r\n    e -&gt; e.getValue().entrySet().stream().flatMap(\r\n      v -&gt; v.getValue().stream().allMatch(e -&gt; e &lt; 5)));\r\n```\r\n\r\nThe issue arises at `v -&gt;v.getValue().stream().allMatch`\r\nThe value inside allMatch is not considered as an Integer and I get compiler error as `operator &lt; cannot be applied to java.lang.Object`  \r\n\r\nCan anybody please help here ? \r\n","title":"Process Nested HashMaps with List of Integers in Java 8","body":"<p>I want to do a simple Operation in Java 8. Below is the code</p>\n<pre class=\"lang-java prettyprint-override\"><code>List&lt;Integer&gt; lst =  Arrays.asList(1,2,3);\nMap&lt;String,List&gt; inner = new HashMap&lt;String,List&gt;();\ninner.put(&quot;first&quot;,lst);\n\nMap&lt;String,Map&lt;String,List&gt;&gt; outer =\n  new HashMap&lt;String,Map&lt;String,List&gt;&gt;();\nouter.put(&quot;Bigger&quot;,inner);\n</code></pre>\n<p>What I want to do is , return boolean if all the values in a child map List of Integers satisfy a criteria</p>\n<p>I tried to do below but it seems it is not working :</p>\n<pre class=\"lang-java prettyprint-override\"><code>boolean lessThanfiveAll =\n  outer.entrySet().stream().flatMap(\n    e -&gt; e.getValue().entrySet().stream().flatMap(\n      v -&gt; v.getValue().stream().allMatch(e -&gt; e &lt; 5)));\n</code></pre>\n<p>The issue arises at <code>v -&gt;v.getValue().stream().allMatch</code>\nThe value inside allMatch is not considered as an Integer and I get compiler error as <code>operator &lt; cannot be applied to java.lang.Object</code></p>\n<p>Can anybody please help here ?</p>\n"},{"tags":["java","spring","scheduled-tasks","scheduler"],"comments":[{"owner":{"display_name":"user1907906"},"score":1,"creation_date":1384420804,"post_id":19973552,"comment_id":29732795,"body_markdown":"Please trim down your code to what is absolutely necessary to understand and reproduce your problem. Nobody will work through a wall of code like this.","body":"Please trim down your code to what is absolutely necessary to understand and reproduce your problem. Nobody will work through a wall of code like this."},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1384421718,"post_id":19973552,"comment_id":29733304,"body_markdown":"Can you add your web.xml (and maybe trim the java code a little by removing the imports). My guess is that you are loading the configuration multiple times (make sure you are nowhere in your code creating a new `ApplicationContext` yourself. One thing to notice already is that you have multiple instances of your `@Service` annotated bean one in XML and another one from component-scanning.","body":"Can you add your web.xml (and maybe trim the java code a little by removing the imports). My guess is that you are loading the configuration multiple times (make sure you are nowhere in your code creating a new <code>ApplicationContext</code> yourself. One thing to notice already is that you have multiple instances of your <code>@Service</code> annotated bean one in XML and another one from component-scanning."},{"owner":{"account_id":1335987,"reputation":91,"user_id":1278742,"display_name":"skougiou"},"score":0,"creation_date":1384422334,"post_id":19973552,"comment_id":29733628,"body_markdown":"Hello, thank you for your replies. I am sorry for the extensive file but I didn&#39;t know if something would be usefull for you to review. I have trimmed the imports and added the web.xml . \n\nM.Deinum , it was a test that I did. Usually I don&#39;t write the annotation @Service. As I see the service class is initialized once. Also, if there was a problem there, wouldn&#39;t it execute just twice always?","body":"Hello, thank you for your replies. I am sorry for the extensive file but I didn&#39;t know if something would be usefull for you to review. I have trimmed the imports and added the web.xml .   M.Deinum , it was a test that I did. Usually I don&#39;t write the annotation @Service. As I see the service class is initialized once. Also, if there was a problem there, wouldn&#39;t it execute just twice always?"},{"owner":{"account_id":114756,"reputation":57127,"user_id":301607,"accept_rate":100,"display_name":"StanislavL"},"score":0,"creation_date":1384423945,"post_id":19973552,"comment_id":29734643,"body_markdown":"It&#39;s annotation driven. Why do you add the bean once more in xml &lt;bean id=&quot;fileExportService&quot; class=&quot;com.fileExportDaemon.service.FileExportService&quot; /&gt; after marking it as @Service?","body":"It&#39;s annotation driven. Why do you add the bean once more in xml &lt;bean id=&quot;fileExportService&quot; class=&quot;com.fileExportDaemon.service.FileExportService&quot; /&gt; after marking it as @Service?"},{"owner":{"account_id":1335987,"reputation":91,"user_id":1278742,"display_name":"skougiou"},"score":0,"creation_date":1384425051,"post_id":19973552,"comment_id":29735284,"body_markdown":"Hello Stanislav, as I said before, the Service annotation could be omitted. Or on the other hand the bean definition of the exportService could be omitted. I tested the app and has the same results even with the @Service removed","body":"Hello Stanislav, as I said before, the Service annotation could be omitted. Or on the other hand the bean definition of the exportService could be omitted. I tested the app and has the same results even with the @Service removed"},{"owner":{"account_id":1335987,"reputation":91,"user_id":1278742,"display_name":"skougiou"},"score":0,"creation_date":1384425131,"post_id":19973552,"comment_id":29735328,"body_markdown":"I removed the annotation so as not to confuse people :)","body":"I removed the annotation so as not to confuse people :)"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1384425154,"post_id":19973552,"comment_id":29735344,"body_markdown":"You are loading your configuration (partially) twice. Both the `ContextLoaderListener` and `DispatcherServlet` load the **fileExportDaemon-servlet.xml** file. So basically everything in there is created twice. In your `ContextLoaderListener` the xml bean overrides the component-scanned bean (due to the naming). Basically when a method executes multiple times you are loading it multiple times and as stated make sure you don&#39;t construct new instances of an `ApplicationContext` somewhere in your code, as that will create more instances of everything.","body":"You are loading your configuration (partially) twice. Both the <code>ContextLoaderListener</code> and <code>DispatcherServlet</code> load the <b>fileExportDaemon-servlet.xml</b> file. So basically everything in there is created twice. In your <code>ContextLoaderListener</code> the xml bean overrides the component-scanned bean (due to the naming). Basically when a method executes multiple times you are loading it multiple times and as stated make sure you don&#39;t construct new instances of an <code>ApplicationContext</code> somewhere in your code, as that will create more instances of everything."},{"owner":{"account_id":1335987,"reputation":91,"user_id":1278742,"display_name":"skougiou"},"score":0,"creation_date":1384429795,"post_id":19973552,"comment_id":29737894,"body_markdown":"Sorry of my lack of knowledge, but is there a way one of these two to be omitted? \n`\n&lt;listener&gt;\n        &lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt;\n    &lt;/listener&gt;\n\n    &lt;servlet&gt;\n      &lt;servlet-name&gt;fileExportDaemon&lt;/servlet-name&gt;\n      &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;\n      &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;\n    &lt;/servlet&gt;`\n\nThe loader listener will load context and the dispathcer servlet will be used for the mvc capability. Please correct me If I have understood something in the wrong way.","body":"Sorry of my lack of knowledge, but is there a way one of these two to be omitted?  ` &lt;listener&gt;         &lt;listener-class&gt;org.springframework.web.context.ContextLoade&zwnj;&#8203;rListener&lt;/listener-&zwnj;&#8203;class&gt;     &lt;/listener&gt;      &lt;servlet&gt;       &lt;servlet-name&gt;fileExportDaemon&lt;/servlet-name&gt;       &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherSer&zwnj;&#8203;vlet&lt;/servlet-class&gt;       &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;     &lt;/servlet&gt;`  The loader listener will load context and the dispathcer servlet will be used for the mvc capability. Please correct me If I have understood something in the wrong way."},{"owner":{"account_id":1335987,"reputation":91,"user_id":1278742,"display_name":"skougiou"},"score":0,"creation_date":1384429893,"post_id":19973552,"comment_id":29737944,"body_markdown":"Really sorry, I cant code format using the &quot; ` &quot;","body":"Really sorry, I cant code format using the &quot; ` &quot;"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1384432598,"post_id":19973552,"comment_id":29739517,"body_markdown":"You have to separate the web stuff from the general stuff. So let the `DispatcherServlet` only load the web related things (views, controllers etc) and the `ContextLoaderListener` the general things (services, repositories etc.).","body":"You have to separate the web stuff from the general stuff. So let the <code>DispatcherServlet</code> only load the web related things (views, controllers etc) and the <code>ContextLoaderListener</code> the general things (services, repositories etc.)."}],"answers":[{"tags":[],"owner":{"account_id":1335987,"reputation":91,"user_id":1278742,"display_name":"skougiou"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1384936804,"creation_date":1384936804,"answer_id":20090992,"question_id":19973552,"body_markdown":"Just for anyone facing the same issue. I haven&#39;t found any logical solution over the described behaviour, but I have found a good work around. As said in my problem description, I have used the annotation Scheduled many times and of course it works. For this time only, I used the spring-quartz configuration and it works perfectly. The changes are not very big and you will find many many tutorials on how to use quartz with Spring. Regarding the bug, it remains a mystery. At this time, I have in fron of me two apps working with Scheduled and one with quartz. Even now I can&#39;t figure out why this happens.","title":"Spring scheduler executes task multiple times","body":"<p>Just for anyone facing the same issue. I haven't found any logical solution over the described behaviour, but I have found a good work around. As said in my problem description, I have used the annotation Scheduled many times and of course it works. For this time only, I used the spring-quartz configuration and it works perfectly. The changes are not very big and you will find many many tutorials on how to use quartz with Spring. Regarding the bug, it remains a mystery. At this time, I have in fron of me two apps working with Scheduled and one with quartz. Even now I can't figure out why this happens.</p>\n"},{"tags":[],"owner":{"account_id":3853010,"reputation":31,"user_id":3192627,"display_name":"chou"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696730688,"creation_date":1696730688,"answer_id":77252059,"question_id":19973552,"body_markdown":"I&#39;ve encountered the same issue before. Upon investigating, I found that checking the web.xml configuration of Tomcat is crucial. Ensure that there is only one &lt;Host&gt; configuration present. If multiple configurations are set, the scheduled task might run multiple times corresponding to the number of configurations.\r\n\r\nIt&#39;s imperative to verify and, if necessary, adjust the &lt;Host&gt; settings in the web.xml file to prevent unintended repetitions of the task.","title":"Spring scheduler executes task multiple times","body":"<p>I've encountered the same issue before. Upon investigating, I found that checking the web.xml configuration of Tomcat is crucial. Ensure that there is only one  configuration present. If multiple configurations are set, the scheduled task might run multiple times corresponding to the number of configurations.</p>\n<p>It's imperative to verify and, if necessary, adjust the  settings in the web.xml file to prevent unintended repetitions of the task.</p>\n"}],"owner":{"account_id":1335987,"reputation":91,"user_id":1278742,"display_name":"skougiou"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4591,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":20090992,"answer_count":2,"score":3,"last_activity_date":1696730688,"creation_date":1384420159,"question_id":19973552,"body_markdown":"As the title states, I have setup a scheduler in a spring web app and it seems to run in a loop, random times, starting with 8 invocations and then randomly adding. I am using spring version 3.1.3.RELEASE. I am in no way expert on the subject but I have already done the same configuration for scheduling in the past,for about 5-6 other projects. I always add the spring task configuration, like a scheduler and the annotation-driven directive. Then a @Scheduled annotation on the method and that worked like a charm. I have also succeeded scheduling 1 month ago with the same version of Spring, so I believe its not a Spring version issue. I am giving the configuration and bean code below. Please don&#39;t hesitate to ask more info :) \r\n\r\nThanks for your time! \r\n\r\npom.xml\r\n\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n      &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n      &lt;groupId&gt;com.fileExport&lt;/groupId&gt;\r\n      &lt;artifactId&gt;FileExportDaemon&lt;/artifactId&gt;\r\n      &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n      &lt;packaging&gt;war&lt;/packaging&gt;\r\n      \r\n      &lt;properties&gt;\r\n    \t\t&lt;spring.version&gt;3.1.3.RELEASE&lt;/spring.version&gt;\r\n      &lt;/properties&gt;\r\n      \r\n      &lt;dependencies&gt;\r\n      \t\r\n      \t\t&lt;!-- The SFL4J logging implementation you prefer --&gt;\r\n    \t\t&lt;!-- \r\n    \t\t &lt;dependency&gt;\r\n    \t\t  &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n    \t\t  &lt;artifactId&gt;slf4j-simple&lt;/artifactId&gt;\r\n    \t\t  &lt;version&gt;1.6.1&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt; \r\n    \t\t  --&gt;\r\n    \t\t \r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;1.7.5&lt;/version&gt; \r\n    \t\t&lt;/dependency&gt;\r\n    \t\t\r\n    \t\t  &lt;!--\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;log4j-over-slf4j&lt;/artifactId&gt;\r\n    \t\t\t &lt;version&gt;1.7.5&lt;/version&gt; \r\n    \t\t&lt;/dependency&gt;\r\n              --&gt;\r\n            &lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;slf4j-log4j12&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;1.7.5&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n             \r\n      \r\n      \t\t&lt;!-- JCR API --&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t  &lt;groupId&gt;javax.jcr&lt;/groupId&gt;\r\n    \t\t  &lt;artifactId&gt;jcr&lt;/artifactId&gt;\r\n    \t\t  &lt;version&gt;2.0&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \t\t&lt;!-- All the Jackrabbit libraries needed for DavEx, plus JcrUtils --&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.apache.jackrabbit&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;jackrabbit-jcr2dav&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;2.7.1&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n                \r\n      \r\n       \r\n      \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.apache.jackrabbit&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;jackrabbit-api&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;2.7.1&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n                \r\n      \t\r\n      \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.freemarker&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;freemarker&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;2.3.19&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t\r\n      \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;commons-email&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;1.2&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t\r\n      \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;commons-net&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;commons-net&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;3.3&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t\r\n    \t\t\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;commons-collections&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;commons-collections&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;3.2&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;commons-lang&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;commons-lang&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;2.4&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;javax.servlet&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;jstl&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;1.2&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;taglibs&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;standard&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;1.1.2&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;junit&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;4.10&lt;/version&gt;\r\n    \t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t\r\n    \t\t\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;log4j&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;log4j&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;1.2.17&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n                \r\n    \t\t\r\n    \t\t\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-test&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;${spring.version}&lt;/version&gt;\r\n    \t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;${spring.version}&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-web&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;${spring.version}&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-orm&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;${spring.version}&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t\r\n      &lt;/dependencies&gt;\r\n      \r\n      &lt;profiles&gt;\r\n    \t\t&lt;profile&gt;\r\n    \t\t\t&lt;id&gt;dev&lt;/id&gt;\r\n    \t\t\t&lt;activation&gt;\r\n    \t\t\t\t&lt;activeByDefault&gt;true&lt;/activeByDefault&gt;\r\n    \t\t\t&lt;/activation&gt;\r\n    \t\t\t&lt;properties&gt;\r\n    \t\t\t\t&lt;env&gt;dev&lt;/env&gt;\r\n    \t\t\t&lt;/properties&gt;\r\n    \t\t&lt;/profile&gt;\r\n    \t\t&lt;profile&gt;\r\n    \t\t\t&lt;id&gt;prod&lt;/id&gt;\r\n    \t\t\t&lt;properties&gt;\r\n    \t\t\t\t&lt;env&gt;prod&lt;/env&gt;\r\n    \t\t\t&lt;/properties&gt;\r\n    \t\t&lt;/profile&gt;\r\n    \t&lt;/profiles&gt;\r\n    \t\r\n    \t&lt;build&gt;\r\n    \t\t&lt;finalName&gt;fileExportDaemon&lt;/finalName&gt;\r\n    \t\t&lt;filters&gt;\r\n    \t\t\t&lt;filter&gt;${env}.properties&lt;/filter&gt;\r\n    \t\t&lt;/filters&gt;\r\n    \t\t&lt;resources&gt;\r\n    \t\t\t&lt;resource&gt;\r\n    \t\t\t\t&lt;directory&gt;src/main/resources&lt;/directory&gt;\r\n    \t\t\t\t&lt;filtering&gt;true&lt;/filtering&gt;\r\n    \t\t\t&lt;/resource&gt;\r\n    \t\t&lt;/resources&gt;\r\n    \t\t&lt;plugins&gt;\r\n    \t\t\t&lt;plugin&gt;\r\n    \t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;version&gt;2.4.2&lt;/version&gt;\r\n    \t\t\t\t&lt;configuration&gt;\r\n    \t\t\t\t\t&lt;encoding&gt;UTF-8&lt;/encoding&gt;\r\n    \t\t\t\t&lt;/configuration&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n    \t\t&lt;/plugins&gt;\r\n    \t&lt;/build&gt;  \r\n      \r\n      \r\n    &lt;/project&gt;\r\n\r\nThe application-context.xml\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\r\n      xmlns:security=&quot;http://www.springframework.org/schema/security&quot;\r\n      xmlns:context=&quot;http://www.springframework.org/schema/context&quot;\r\n      xmlns:tx=&quot;http://www.springframework.org/schema/tx&quot;\r\n      xmlns:jee=&quot;http://www.springframework.org/schema/jee&quot;\r\n      xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n      xmlns:mvc=&quot;http://www.springframework.org/schema/mvc&quot;\r\n      xmlns:webflow=&quot;http://www.springframework.org/schema/webflow-config&quot;\r\n      xmlns:task=&quot;http://www.springframework.org/schema/task&quot;\r\n      xmlns:util=&quot;http://www.springframework.org/schema/util&quot;\r\n      xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans\r\n              http://www.springframework.org/schema/beans/spring-beans-3.1.xsd\r\n              http://www.springframework.org/schema/context \r\n              http://www.springframework.org/schema/context/spring-context-3.1.xsd\r\n              http://www.springframework.org/schema/tx \r\n              http://www.springframework.org/schema/tx/spring-tx-3.1.xsd\r\n              http://www.springframework.org/schema/jee \r\n              http://www.springframework.org/schema/jee/spring-jee-3.1.xsd\r\n              http://www.springframework.org/schema/security\r\n              http://www.springframework.org/schema/security/spring-security-3.1.3.xsd\r\n              http://www.springframework.org/schema/mvc \r\n              http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd\r\n              http://www.springframework.org/schema/task http://www.springframework.org/schema/task/spring-task-3.1.xsd\r\n              http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util.xsd\r\n              http://www.springframework.org/schema/webflow-config\r\n    \t   \t  http://www.springframework.org/schema/webflow-config/spring-webflow-config-2.3.xsd&quot;&gt;\r\n    \t\t\t\r\n    \t&lt;bean id=&quot;propertyConfigurer&quot;\r\n    \t\tclass=&quot;org.springframework.beans.factory.config.PropertyPlaceholderConfigurer&quot;&gt;\r\n    \t\t&lt;property name=&quot;locations&quot;&gt;\r\n    \t\t\t&lt;list&gt;\r\n    \t\t\t\t&lt;value&gt;classpath:configuration.properties&lt;/value&gt;\r\n       \t\t\t&lt;/list&gt;\r\n    \t\t&lt;/property&gt;\r\n    \t\t&lt;property name=&quot;fileEncoding&quot; value=&quot;utf-8&quot;/&gt;\r\n    \t&lt;/bean&gt;\r\n    \t\r\n    \t&lt;import resource=&quot;fileExportDaemon-service.xml&quot;/&gt;\r\n    \t\r\n    \t&lt;import resource=&quot;fileExportDaemon-servlet.xml&quot;/&gt;\r\n    \r\n    \t&lt;!-- Tasks Configuration --&gt;\r\n    \t &lt;task:annotation-driven scheduler=&quot;myScheduler&quot; /&gt; \r\n    \t &lt;task:scheduler id=&quot;myScheduler&quot; pool-size=&quot;100&quot; /&gt; \r\n    \t\r\n    \t&lt;!-- \r\n    \t&lt;util:properties id=&quot;applicationProps&quot; location=&quot;classpath:configuration.properties&quot; /&gt;\r\n        &lt;context:property-placeholder properties-ref=&quot;applicationProps&quot; /&gt;\r\n    \t\r\n    \t&lt;task:annotation-driven /&gt;\r\n    \t&lt;task:scheduled-tasks&gt;\r\n    \t\t&lt;task:scheduled ref=&quot;fileExportService&quot; method=&quot;cronExport&quot; cron=&quot;#{applicationProps[&#39;exportDaemon.execution.cron&#39;]}&quot;/&gt;\r\n    \t&lt;/task:scheduled-tasks&gt;\r\n    \t --&gt;\r\n    \t \r\n    \t&lt;context:annotation-config /&gt;\r\n    \r\n    \t&lt;tx:annotation-driven /&gt;\r\n    \r\n    \t&lt;mvc:annotation-driven /&gt;\r\n    \t\r\n    \r\n    &lt;/beans&gt;\r\n\r\nfileExportDaemon-service.xml\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\r\n      xmlns:security=&quot;http://www.springframework.org/schema/security&quot;\r\n      xmlns:context=&quot;http://www.springframework.org/schema/context&quot;\r\n      xmlns:tx=&quot;http://www.springframework.org/schema/tx&quot;\r\n      xmlns:jee=&quot;http://www.springframework.org/schema/jee&quot;\r\n      xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n      xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans\r\n              http://www.springframework.org/schema/beans/spring-beans-3.1.xsd\r\n              http://www.springframework.org/schema/context \r\n              http://www.springframework.org/schema/context/spring-context-3.1.xsd\r\n              http://www.springframework.org/schema/tx \r\n              http://www.springframework.org/schema/tx/spring-tx-3.1.xsd\r\n              http://www.springframework.org/schema/jee \r\n              http://www.springframework.org/schema/jee/spring-jee-3.1.xsd\r\n              http://www.springframework.org/schema/security\r\n              http://www.springframework.org/schema/security/spring-security-3.1.3.xsd&quot;&gt;\r\n    \t\r\n    \t\r\n    \t\r\n    \t&lt;!-- Services --&gt;\r\n    \t&lt;bean id=&quot;fileExportService&quot; class=&quot;com.fileExportDaemon.service.FileExportService&quot; /&gt;\r\n    \t\r\n    \t\r\n    &lt;/beans&gt;\r\n\r\nfileExportDaemon-servlet.xml\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    \r\n    &lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\r\n      xmlns:p=&quot;http://www.springframework.org/schema/p&quot;\r\n      xmlns:security=&quot;http://www.springframework.org/schema/security&quot;\r\n      xmlns:context=&quot;http://www.springframework.org/schema/context&quot;\r\n      xmlns:tx=&quot;http://www.springframework.org/schema/tx&quot;\r\n      xmlns:jee=&quot;http://www.springframework.org/schema/jee&quot;\r\n      xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n      xmlns:mvc=&quot;http://www.springframework.org/schema/mvc&quot;\r\n      xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans\r\n              http://www.springframework.org/schema/beans/spring-beans-3.0.xsd\r\n              http://www.springframework.org/schema/context \r\n              http://www.springframework.org/schema/context/spring-context-3.0.xsd\r\n              http://www.springframework.org/schema/tx \r\n              http://www.springframework.org/schema/tx/spring-tx-3.0.xsd\r\n              http://www.springframework.org/schema/jee \r\n              http://www.springframework.org/schema/jee/spring-jee-3.0.xsd\r\n              http://www.springframework.org/schema/security\r\n              http://www.springframework.org/schema/security/spring-security-3.0.3.xsd\r\n              http://www.springframework.org/schema/mvc \r\n              http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd&quot;&gt;\r\n    \r\n    \t&lt;context:component-scan base-package=&quot;com.fileExportDaemon&quot; /&gt;\r\n    \r\n    \t&lt;bean\r\n    \t\tclass=&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;\r\n    \t\tp:prefix=&quot;/WEB-INF/jsp/&quot; p:suffix=&quot;.jsp&quot; /&gt;\r\n    \r\n    &lt;/beans&gt;\r\n\r\nFileExportService.java\r\n\r\n    package com.fileExportDaemon.service;\r\n    \r\n\r\n    public class FileExportService {\r\n    \r\n    \t@Value(&quot;${exportDaemon.jcr.repository.url}&quot;)\r\n    \tprivate String jcrURL;\r\n    \r\n    \t@Value(&quot;${exportDaemon.filesystem.separator}&quot;)\r\n    \tprivate String filesystemSeparator;\r\n    \t\r\n    \t@Value(&quot;${exportDaemon.path.complete}&quot;)\r\n    \tprivate String pathComplete;\r\n    \t\r\n    \t@Value(&quot;${exportDaemon.path.incomplete}&quot;)\r\n    \tprivate String pathIncomplete;\r\n    \t\r\n    \tLog logger = LogFactory.getLog(FileExportService.class);\r\n    \r\n    \t\r\n    \tpublic void exportFilesWithRules(){\t\r\n    \r\n    \t\tSession jcrSession = getJcrSession(jcrURL);\r\n    \t\t\r\n    \t\ttry {\r\n    \t\t\t\r\n    \t\t\t Node root = jcrSession.getRootNode();\r\n    \t\t\t Node dsNode = root.getNode(&quot;DS&quot;);\r\n    \t\t\t Node applicationsNode= dsNode.getNode(&quot;applications&quot;);\r\n    \t\t\t \r\n    \t\t\t NodeIterator applicationNodes = applicationsNode.getNodes();\r\n    \t\t\t \r\n    \t\t\t \r\n    \t\t\t while (applicationNodes.hasNext()) {\r\n    \t\t\t\t\thandleNode(applicationNodes.nextNode()); \r\n    \t\t\t} \r\n    \t\t\t\r\n    \t\t} catch (RepositoryException e) {\r\n    \t\t\tlogger.error(&quot;Repository error&quot;, e);\r\n    \t\t} \r\n    \t\t\r\n    \t\tlogger.debug(&quot;done exporting with rules!&quot;);\r\n    \t}\r\n    \t\r\n    \t\r\n    \t\r\n    \tpublic void exportFilesAll(){\r\n    \t\tlogger.debug(&quot;done exporting without rules!&quot;);\r\n    \t}\r\n    \t\r\n    \t\r\n    \tprivate void handleNode(Node node) throws RepositoryException { \r\n    \t\t \r\n    \t\tlogger.debug(node.getPath()); \r\n    \t\t\r\n    \t\tNode attachments = node.getNode(&quot;attachments&quot;);\r\n    \t\tboolean isComplete = isCompleteFiling(attachments);\r\n    \t\tif(isComplete){\r\n    \t\t\t\r\n    \t\t\tFile completedEfiling = new File(pathComplete + filesystemSeparator + node.getName());\r\n    \t\t\t\r\n    \t\t\tif (!completedEfiling.exists()){\r\n    \t\t\t\texportNodeFiles(attachments,pathComplete);\r\n    \t\t\t}else{\r\n    \t\t\t\tlogger.debug(&quot;File exists, go to next: &quot; + node.getName());\r\n    \t\t\t\treturn;\r\n    \t\t\t}\r\n    \t\t\t\r\n    \t\t}else{\r\n    \t\t\tlogger.debug(&quot;filing Incomplete!&quot;);\r\n    \t\t\tFile incompletedEfilingDir = new File(pathIncomplete + filesystemSeparator + node.getName());\r\n    \t\t\t\r\n    \t\t\tif(!incompletedEfilingDir.exists()){\r\n    \t\t\t\texportNodeFiles(attachments, pathIncomplete);\r\n    \t\t\t}else if( attachments.getNodes().getSize() != incompletedEfilingDir.list().length ){\r\n    \t\t\t\texportNodeFiles(attachments, pathIncomplete);\r\n    \t\t\t}else{\r\n    \t\t\t\tlogger.debug(&quot;files found identical on:&quot; + node.getName());\r\n    \t\t\t\treturn;\r\n    \t\t\t}\r\n    \t\t\t\r\n    \t\t}\r\n    \t\t\r\n    \t\t// Skip the virtual (and large!) jcr:system subtree \r\n    \t\tif (node.getName().equals(&quot;jcr:system&quot;)) { \r\n    \t\t\treturn; \r\n    \t\t}\r\n    \t}\r\n    \t\r\n    \t\r\n    \tprivate void exportNodeFiles (Node attachmentsNode, String destinationDir){\r\n    \t\t\r\n    \t\tFile directory = null;\r\n    \t\ttry {\r\n    \t\t\tdirectory = new File(destinationDir + filesystemSeparator + attachmentsNode.getParent().getName());\r\n    \t\t} catch (AccessDeniedException e1) {\r\n    \t\t\tlogger.error(&quot;Access denied error&quot;, e1);\r\n    \t\t} catch (ItemNotFoundException e1) {\r\n    \t\t\tlogger.error(&quot;Item not found.&quot;, e1);\r\n    \t\t} catch (RepositoryException e1) {\r\n    \t\t\tlogger.error(&quot;Repository error.&quot;, e1);\r\n    \t\t}\r\n    \t\t\r\n    \t\tdirectory.mkdir();\r\n    \t\t\r\n    \t\tNodeIterator nodeIter = null;\r\n    \t\ttry {\r\n    \t\t\tnodeIter = attachmentsNode.getNodes();\r\n    \t\t} catch (RepositoryException e) {\r\n    \t\t\tlogger.error(&quot;Repository error.&quot;, e);\r\n    \t\t}\r\n    \t\t\r\n    \t\twhile( nodeIter.hasNext()){\r\n    \t\t\t\r\n    \t\t\tOutputStream outputStream = null;\r\n    \t\t\tInputStream is = null;\r\n    \t\t\t\r\n    \t\t\ttry {\r\n    \t\t\t\tNode nodeToStore = nodeIter.nextNode().getNode(&quot;file&quot;).getNodes().nextNode();\r\n    \t\t\t\tNode content = nodeToStore.getNodes().nextNode();\r\n    \t\t\t\t\r\n    \t\t\t\tis = content.getProperty(&quot;jcr:data&quot;).getBinary().getStream() ;\r\n    \t\t\t\t\r\n    \t\t\t\tString a = directory.getAbsolutePath() + filesystemSeparator +nodeToStore.getName();\r\n    \t\t\t\toutputStream = new FileOutputStream(new File( directory.getAbsolutePath() + filesystemSeparator + nodeToStore.getName() ));\r\n    \t\t\t\t\r\n    \t\t\t\tint read = 0;\r\n    \t\t\t\tbyte[] bytes = new byte[1024];\r\n    \t\t \r\n    \t\t\t\twhile ((read = is.read(bytes)) != -1) {\r\n    \t\t\t\t\toutputStream.write(bytes, 0, read);\r\n    \t\t\t\t}\r\n    \t\t\t\t\r\n    \t\t\t\t\r\n    \t\t\t} catch (PathNotFoundException e) {\r\n    \t\t\t\tlogger.error(&quot;Path not found.&quot;, e);\r\n    \t\t\t} catch (RepositoryException e) {\r\n    \t\t\t\tlogger.error(&quot;Repository error.&quot;, e);\r\n    \t\t\t} catch (FileNotFoundException e) {\r\n    \t\t\t\tlogger.error(&quot;File not found.&quot;, e);\r\n    \t\t\t} catch (IOException e) {\r\n    \t\t\t\tlogger.error(&quot;IO error&quot;, e);\r\n    \t\t\t} finally {\r\n    \t\t\t\tif (is != null) {\r\n    \t\t\t\t\ttry {\r\n    \t\t\t\t\t\tis.close();\r\n    \t\t\t\t\t} catch (IOException e) {\r\n    \t\t\t\t\t\te.printStackTrace();\r\n    \t\t\t\t\t}\r\n    \t\t\t\t}\r\n    \t\t\t\tif (outputStream != null) {\r\n    \t\t\t\t\ttry {\r\n    \t\t\t\t\t\toutputStream.close();\r\n    \t\t\t\t\t} catch (IOException e) {\r\n    \t\t\t\t\t\te.printStackTrace();\r\n    \t\t\t\t\t}\r\n    \t\t \r\n    \t\t\t\t}\r\n    \t\t\t}//finally\r\n    \t\t}//while nodeIter has next\r\n    \t\t\r\n    \t}\r\n    \t\r\n    \t\r\n    \t\r\n    \tprivate boolean isCompleteFiling(Node node){\r\n    \t\tboolean result = false;\r\n    \t\t\r\n    \t\tNodeIterator nodeIter = null;\r\n    \t\ttry {\r\n    \t\t\tnodeIter = node.getNodes();\r\n    \t\t} catch (RepositoryException e) {\r\n    \t\t\tlogger.error(&quot;Repository error&quot;, e);\r\n    \t\t}\r\n    \t\t\r\n    \t\twhile(nodeIter.hasNext()){\r\n    \t\t\t\r\n    \t\t\tNode attachmentNode = nodeIter.nextNode();\r\n    \t\t\t\r\n    \t\t\ttry {\r\n    \t\t\t\tif(StringUtils.endsWith(attachmentNode.getName(), &quot;.pdf&quot;)){\r\n    \t\t\t\t\tif ( StringUtils.equals(&quot;receipt.pdf&quot;, attachmentNode.getNode(&quot;file&quot;).getNodes().nextNode().getName() )){\r\n    \t\t\t\t\t\tresult = true;\r\n    \t\t\t\t\t}\r\n    \t\t\t\t}else{\r\n    \t\t\t\t\tcontinue;\r\n    \t\t\t\t}\r\n    \t\t\t} catch (RepositoryException e) {\r\n    \t\t\t\tlogger.error(&quot;Repository error&quot;, e);\r\n    \t\t\t}\r\n    \t\t}\r\n    \t\treturn result;\r\n    \t}\r\n    \t\r\n    \t\r\n    \tprivate Session getJcrSession(String url){\r\n    \t\tRepository repository = null;\r\n    \t\ttry {\r\n    \t\t\trepository = JcrUtils.getRepository(url);\r\n    \t\t} catch (RepositoryException e) {\r\n    \t\t\tlogger.error(&quot;Repository error&quot;, e);\r\n    \t\t}\r\n    \t\t\r\n    \t    SimpleCredentials creds = new SimpleCredentials(&quot;admin&quot;,&quot;admin&quot;.toCharArray());\r\n    \t    Session jcrSession = null;\r\n    \t    \r\n    \t\ttry {\r\n    \t\t\tjcrSession = repository.login(creds, &quot;default&quot;);\r\n    \t\t} catch (LoginException e) {\r\n    \t\t\tlogger.error(&quot;could not log in to jcr&quot;, e);\r\n    \t\t} catch (NoSuchWorkspaceException e) {\r\n    \t\t\tlogger.error(&quot;Could not find workspace&quot;, e);\r\n    \t\t} catch (RepositoryException e) {\r\n    \t\t\tlogger.error(&quot;Repository error&quot;, e);\r\n    \t\t}\r\n    \t\t\r\n    \t\treturn jcrSession;\r\n    \t}\r\n    \t\r\n    \t@Scheduled(cron=&quot;${exportDaemon.execution.cron}&quot; )\r\n    \tpublic void cronExport(){\r\n    \t\t\r\n    \t\tlogger.debug(&quot;Starting cron export!&quot;);\r\n    \t\texportFilesWithRules();\r\n    \t\t\r\n    \t\t\r\n    \t}\r\n    \r\n    }\r\n\r\nproperties\r\n\r\n    exportDaemon.jcr.repository.url=http://192.168.3.3:10080/jackrabbit-webapp-2.6.2/server\r\n    exportDaemon.execution.cron=* */5 * * * *\r\n    exportDaemon.filesystem.separator=\\\\\r\n    exportDaemon.path.complete=C:\\\\files\\\\export\\\\complete\r\n    exportDaemon.path.incomplete=C:\\\\files\\\\export\\\\incomplete\r\n    exportDaemon.all.filings=false\r\n\r\n\r\n\r\nweb.xml\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;web-app xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n    \txmlns=&quot;http://java.sun.com/xml/ns/javaee&quot; xmlns:web=&quot;http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd&quot;\r\n    \txsi:schemaLocation=&quot;http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd&quot;\r\n    \tid=&quot;WebApp_ID&quot; version=&quot;2.5&quot;&gt;\r\n    \r\n    \r\n    \t&lt;display-name&gt;fileExportDaemon&lt;/display-name&gt;\r\n    \t\r\n    \t&lt;context-param&gt;\r\n        \t&lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\r\n        \t&lt;param-value&gt;/WEB-INF/application-context.xml&lt;/param-value&gt;\r\n      \t&lt;/context-param&gt;\r\n      \t\r\n    \t&lt;listener&gt;\r\n    \t\t&lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt;\r\n    \t&lt;/listener&gt;\r\n    \t  \r\n    \t&lt;servlet&gt;\r\n    \t  &lt;servlet-name&gt;fileExportDaemon&lt;/servlet-name&gt;\r\n    \t  &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;\r\n    \t  &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;\r\n    \t&lt;/servlet&gt;\r\n    \t\r\n    \t&lt;servlet-mapping&gt;\r\n    \t  &lt;servlet-name&gt;fileExportDaemon&lt;/servlet-name&gt;\r\n    \t  &lt;url-pattern&gt;/&lt;/url-pattern&gt;\r\n    \t&lt;/servlet-mapping&gt;\r\n    \r\n    \t&lt;filter&gt;\r\n        \t&lt;filter-name&gt;encodingFilter&lt;/filter-name&gt;\r\n        \t&lt;filter-class&gt;org.springframework.web.filter.CharacterEncodingFilter&lt;/filter-class&gt;\r\n        \t&lt;init-param&gt;\r\n          \t\t&lt;param-name&gt;encoding&lt;/param-name&gt;\r\n          \t\t&lt;param-value&gt;UTF-8&lt;/param-value&gt;\r\n        \t&lt;/init-param&gt;\r\n        \t&lt;init-param&gt;\r\n          \t\t&lt;param-name&gt;forceEncoding&lt;/param-name&gt;\r\n          \t\t&lt;param-value&gt;true&lt;/param-value&gt;\r\n        \t&lt;/init-param&gt;\r\n      \t&lt;/filter&gt;\r\n      \t\r\n    \t&lt;filter-mapping&gt;\r\n    \t  &lt;filter-name&gt;encodingFilter&lt;/filter-name&gt;\r\n    \t  &lt;url-pattern&gt;/*&lt;/url-pattern&gt;\r\n    \t&lt;/filter-mapping&gt;\r\n    \r\n    &lt;/web-app&gt;\r\n\r\n","title":"Spring scheduler executes task multiple times","body":"<p>As the title states, I have setup a scheduler in a spring web app and it seems to run in a loop, random times, starting with 8 invocations and then randomly adding. I am using spring version 3.1.3.RELEASE. I am in no way expert on the subject but I have already done the same configuration for scheduling in the past,for about 5-6 other projects. I always add the spring task configuration, like a scheduler and the annotation-driven directive. Then a @Scheduled annotation on the method and that worked like a charm. I have also succeeded scheduling 1 month ago with the same version of Spring, so I believe its not a Spring version issue. I am giving the configuration and bean code below. Please don't hesitate to ask more info :) </p>\n\n<p>Thanks for your time! </p>\n\n<p>pom.xml</p>\n\n<pre><code>&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"&gt;\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n  &lt;groupId&gt;com.fileExport&lt;/groupId&gt;\n  &lt;artifactId&gt;FileExportDaemon&lt;/artifactId&gt;\n  &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n  &lt;packaging&gt;war&lt;/packaging&gt;\n\n  &lt;properties&gt;\n        &lt;spring.version&gt;3.1.3.RELEASE&lt;/spring.version&gt;\n  &lt;/properties&gt;\n\n  &lt;dependencies&gt;\n\n        &lt;!-- The SFL4J logging implementation you prefer --&gt;\n        &lt;!-- \n         &lt;dependency&gt;\n          &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n          &lt;artifactId&gt;slf4j-simple&lt;/artifactId&gt;\n          &lt;version&gt;1.6.1&lt;/version&gt;\n        &lt;/dependency&gt; \n          --&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n            &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\n            &lt;version&gt;1.7.5&lt;/version&gt; \n        &lt;/dependency&gt;\n\n          &lt;!--\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n            &lt;artifactId&gt;log4j-over-slf4j&lt;/artifactId&gt;\n             &lt;version&gt;1.7.5&lt;/version&gt; \n        &lt;/dependency&gt;\n          --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n            &lt;artifactId&gt;slf4j-log4j12&lt;/artifactId&gt;\n            &lt;version&gt;1.7.5&lt;/version&gt;\n        &lt;/dependency&gt;\n\n\n        &lt;!-- JCR API --&gt;\n        &lt;dependency&gt;\n          &lt;groupId&gt;javax.jcr&lt;/groupId&gt;\n          &lt;artifactId&gt;jcr&lt;/artifactId&gt;\n          &lt;version&gt;2.0&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- All the Jackrabbit libraries needed for DavEx, plus JcrUtils --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.jackrabbit&lt;/groupId&gt;\n            &lt;artifactId&gt;jackrabbit-jcr2dav&lt;/artifactId&gt;\n            &lt;version&gt;2.7.1&lt;/version&gt;\n        &lt;/dependency&gt;\n\n\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.jackrabbit&lt;/groupId&gt;\n            &lt;artifactId&gt;jackrabbit-api&lt;/artifactId&gt;\n            &lt;version&gt;2.7.1&lt;/version&gt;\n        &lt;/dependency&gt;\n\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.freemarker&lt;/groupId&gt;\n            &lt;artifactId&gt;freemarker&lt;/artifactId&gt;\n            &lt;version&gt;2.3.19&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\n            &lt;artifactId&gt;commons-email&lt;/artifactId&gt;\n            &lt;version&gt;1.2&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;commons-net&lt;/groupId&gt;\n            &lt;artifactId&gt;commons-net&lt;/artifactId&gt;\n            &lt;version&gt;3.3&lt;/version&gt;\n        &lt;/dependency&gt;\n\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;commons-collections&lt;/groupId&gt;\n            &lt;artifactId&gt;commons-collections&lt;/artifactId&gt;\n            &lt;version&gt;3.2&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;commons-lang&lt;/groupId&gt;\n            &lt;artifactId&gt;commons-lang&lt;/artifactId&gt;\n            &lt;version&gt;2.4&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\n            &lt;artifactId&gt;jstl&lt;/artifactId&gt;\n            &lt;version&gt;1.2&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;taglibs&lt;/groupId&gt;\n            &lt;artifactId&gt;standard&lt;/artifactId&gt;\n            &lt;version&gt;1.1.2&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;junit&lt;/groupId&gt;\n            &lt;artifactId&gt;junit&lt;/artifactId&gt;\n            &lt;version&gt;4.10&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;log4j&lt;/groupId&gt;\n            &lt;artifactId&gt;log4j&lt;/artifactId&gt;\n            &lt;version&gt;1.2.17&lt;/version&gt;\n        &lt;/dependency&gt;\n\n\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-test&lt;/artifactId&gt;\n            &lt;version&gt;${spring.version}&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;\n            &lt;version&gt;${spring.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-web&lt;/artifactId&gt;\n            &lt;version&gt;${spring.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-orm&lt;/artifactId&gt;\n            &lt;version&gt;${spring.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n\n  &lt;/dependencies&gt;\n\n  &lt;profiles&gt;\n        &lt;profile&gt;\n            &lt;id&gt;dev&lt;/id&gt;\n            &lt;activation&gt;\n                &lt;activeByDefault&gt;true&lt;/activeByDefault&gt;\n            &lt;/activation&gt;\n            &lt;properties&gt;\n                &lt;env&gt;dev&lt;/env&gt;\n            &lt;/properties&gt;\n        &lt;/profile&gt;\n        &lt;profile&gt;\n            &lt;id&gt;prod&lt;/id&gt;\n            &lt;properties&gt;\n                &lt;env&gt;prod&lt;/env&gt;\n            &lt;/properties&gt;\n        &lt;/profile&gt;\n    &lt;/profiles&gt;\n\n    &lt;build&gt;\n        &lt;finalName&gt;fileExportDaemon&lt;/finalName&gt;\n        &lt;filters&gt;\n            &lt;filter&gt;${env}.properties&lt;/filter&gt;\n        &lt;/filters&gt;\n        &lt;resources&gt;\n            &lt;resource&gt;\n                &lt;directory&gt;src/main/resources&lt;/directory&gt;\n                &lt;filtering&gt;true&lt;/filtering&gt;\n            &lt;/resource&gt;\n        &lt;/resources&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\n                &lt;version&gt;2.4.2&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;encoding&gt;UTF-8&lt;/encoding&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;  \n\n\n&lt;/project&gt;\n</code></pre>\n\n<p>The application-context.xml</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\n  xmlns:security=\"http://www.springframework.org/schema/security\"\n  xmlns:context=\"http://www.springframework.org/schema/context\"\n  xmlns:tx=\"http://www.springframework.org/schema/tx\"\n  xmlns:jee=\"http://www.springframework.org/schema/jee\"\n  xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n  xmlns:mvc=\"http://www.springframework.org/schema/mvc\"\n  xmlns:webflow=\"http://www.springframework.org/schema/webflow-config\"\n  xmlns:task=\"http://www.springframework.org/schema/task\"\n  xmlns:util=\"http://www.springframework.org/schema/util\"\n  xsi:schemaLocation=\"http://www.springframework.org/schema/beans\n          http://www.springframework.org/schema/beans/spring-beans-3.1.xsd\n          http://www.springframework.org/schema/context \n          http://www.springframework.org/schema/context/spring-context-3.1.xsd\n          http://www.springframework.org/schema/tx \n          http://www.springframework.org/schema/tx/spring-tx-3.1.xsd\n          http://www.springframework.org/schema/jee \n          http://www.springframework.org/schema/jee/spring-jee-3.1.xsd\n          http://www.springframework.org/schema/security\n          http://www.springframework.org/schema/security/spring-security-3.1.3.xsd\n          http://www.springframework.org/schema/mvc \n          http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd\n          http://www.springframework.org/schema/task http://www.springframework.org/schema/task/spring-task-3.1.xsd\n          http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util.xsd\n          http://www.springframework.org/schema/webflow-config\n          http://www.springframework.org/schema/webflow-config/spring-webflow-config-2.3.xsd\"&gt;\n\n    &lt;bean id=\"propertyConfigurer\"\n        class=\"org.springframework.beans.factory.config.PropertyPlaceholderConfigurer\"&gt;\n        &lt;property name=\"locations\"&gt;\n            &lt;list&gt;\n                &lt;value&gt;classpath:configuration.properties&lt;/value&gt;\n            &lt;/list&gt;\n        &lt;/property&gt;\n        &lt;property name=\"fileEncoding\" value=\"utf-8\"/&gt;\n    &lt;/bean&gt;\n\n    &lt;import resource=\"fileExportDaemon-service.xml\"/&gt;\n\n    &lt;import resource=\"fileExportDaemon-servlet.xml\"/&gt;\n\n    &lt;!-- Tasks Configuration --&gt;\n     &lt;task:annotation-driven scheduler=\"myScheduler\" /&gt; \n     &lt;task:scheduler id=\"myScheduler\" pool-size=\"100\" /&gt; \n\n    &lt;!-- \n    &lt;util:properties id=\"applicationProps\" location=\"classpath:configuration.properties\" /&gt;\n    &lt;context:property-placeholder properties-ref=\"applicationProps\" /&gt;\n\n    &lt;task:annotation-driven /&gt;\n    &lt;task:scheduled-tasks&gt;\n        &lt;task:scheduled ref=\"fileExportService\" method=\"cronExport\" cron=\"#{applicationProps['exportDaemon.execution.cron']}\"/&gt;\n    &lt;/task:scheduled-tasks&gt;\n     --&gt;\n\n    &lt;context:annotation-config /&gt;\n\n    &lt;tx:annotation-driven /&gt;\n\n    &lt;mvc:annotation-driven /&gt;\n\n\n&lt;/beans&gt;\n</code></pre>\n\n<p>fileExportDaemon-service.xml</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\n  xmlns:security=\"http://www.springframework.org/schema/security\"\n  xmlns:context=\"http://www.springframework.org/schema/context\"\n  xmlns:tx=\"http://www.springframework.org/schema/tx\"\n  xmlns:jee=\"http://www.springframework.org/schema/jee\"\n  xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n  xsi:schemaLocation=\"http://www.springframework.org/schema/beans\n          http://www.springframework.org/schema/beans/spring-beans-3.1.xsd\n          http://www.springframework.org/schema/context \n          http://www.springframework.org/schema/context/spring-context-3.1.xsd\n          http://www.springframework.org/schema/tx \n          http://www.springframework.org/schema/tx/spring-tx-3.1.xsd\n          http://www.springframework.org/schema/jee \n          http://www.springframework.org/schema/jee/spring-jee-3.1.xsd\n          http://www.springframework.org/schema/security\n          http://www.springframework.org/schema/security/spring-security-3.1.3.xsd\"&gt;\n\n\n\n    &lt;!-- Services --&gt;\n    &lt;bean id=\"fileExportService\" class=\"com.fileExportDaemon.service.FileExportService\" /&gt;\n\n\n&lt;/beans&gt;\n</code></pre>\n\n<p>fileExportDaemon-servlet.xml</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n\n&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\n  xmlns:p=\"http://www.springframework.org/schema/p\"\n  xmlns:security=\"http://www.springframework.org/schema/security\"\n  xmlns:context=\"http://www.springframework.org/schema/context\"\n  xmlns:tx=\"http://www.springframework.org/schema/tx\"\n  xmlns:jee=\"http://www.springframework.org/schema/jee\"\n  xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n  xmlns:mvc=\"http://www.springframework.org/schema/mvc\"\n  xsi:schemaLocation=\"http://www.springframework.org/schema/beans\n          http://www.springframework.org/schema/beans/spring-beans-3.0.xsd\n          http://www.springframework.org/schema/context \n          http://www.springframework.org/schema/context/spring-context-3.0.xsd\n          http://www.springframework.org/schema/tx \n          http://www.springframework.org/schema/tx/spring-tx-3.0.xsd\n          http://www.springframework.org/schema/jee \n          http://www.springframework.org/schema/jee/spring-jee-3.0.xsd\n          http://www.springframework.org/schema/security\n          http://www.springframework.org/schema/security/spring-security-3.0.3.xsd\n          http://www.springframework.org/schema/mvc \n          http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd\"&gt;\n\n    &lt;context:component-scan base-package=\"com.fileExportDaemon\" /&gt;\n\n    &lt;bean\n        class=\"org.springframework.web.servlet.view.InternalResourceViewResolver\"\n        p:prefix=\"/WEB-INF/jsp/\" p:suffix=\".jsp\" /&gt;\n\n&lt;/beans&gt;\n</code></pre>\n\n<p>FileExportService.java</p>\n\n<pre><code>package com.fileExportDaemon.service;\n\n\npublic class FileExportService {\n\n    @Value(\"${exportDaemon.jcr.repository.url}\")\n    private String jcrURL;\n\n    @Value(\"${exportDaemon.filesystem.separator}\")\n    private String filesystemSeparator;\n\n    @Value(\"${exportDaemon.path.complete}\")\n    private String pathComplete;\n\n    @Value(\"${exportDaemon.path.incomplete}\")\n    private String pathIncomplete;\n\n    Log logger = LogFactory.getLog(FileExportService.class);\n\n\n    public void exportFilesWithRules(){ \n\n        Session jcrSession = getJcrSession(jcrURL);\n\n        try {\n\n             Node root = jcrSession.getRootNode();\n             Node dsNode = root.getNode(\"DS\");\n             Node applicationsNode= dsNode.getNode(\"applications\");\n\n             NodeIterator applicationNodes = applicationsNode.getNodes();\n\n\n             while (applicationNodes.hasNext()) {\n                    handleNode(applicationNodes.nextNode()); \n            } \n\n        } catch (RepositoryException e) {\n            logger.error(\"Repository error\", e);\n        } \n\n        logger.debug(\"done exporting with rules!\");\n    }\n\n\n\n    public void exportFilesAll(){\n        logger.debug(\"done exporting without rules!\");\n    }\n\n\n    private void handleNode(Node node) throws RepositoryException { \n\n        logger.debug(node.getPath()); \n\n        Node attachments = node.getNode(\"attachments\");\n        boolean isComplete = isCompleteFiling(attachments);\n        if(isComplete){\n\n            File completedEfiling = new File(pathComplete + filesystemSeparator + node.getName());\n\n            if (!completedEfiling.exists()){\n                exportNodeFiles(attachments,pathComplete);\n            }else{\n                logger.debug(\"File exists, go to next: \" + node.getName());\n                return;\n            }\n\n        }else{\n            logger.debug(\"filing Incomplete!\");\n            File incompletedEfilingDir = new File(pathIncomplete + filesystemSeparator + node.getName());\n\n            if(!incompletedEfilingDir.exists()){\n                exportNodeFiles(attachments, pathIncomplete);\n            }else if( attachments.getNodes().getSize() != incompletedEfilingDir.list().length ){\n                exportNodeFiles(attachments, pathIncomplete);\n            }else{\n                logger.debug(\"files found identical on:\" + node.getName());\n                return;\n            }\n\n        }\n\n        // Skip the virtual (and large!) jcr:system subtree \n        if (node.getName().equals(\"jcr:system\")) { \n            return; \n        }\n    }\n\n\n    private void exportNodeFiles (Node attachmentsNode, String destinationDir){\n\n        File directory = null;\n        try {\n            directory = new File(destinationDir + filesystemSeparator + attachmentsNode.getParent().getName());\n        } catch (AccessDeniedException e1) {\n            logger.error(\"Access denied error\", e1);\n        } catch (ItemNotFoundException e1) {\n            logger.error(\"Item not found.\", e1);\n        } catch (RepositoryException e1) {\n            logger.error(\"Repository error.\", e1);\n        }\n\n        directory.mkdir();\n\n        NodeIterator nodeIter = null;\n        try {\n            nodeIter = attachmentsNode.getNodes();\n        } catch (RepositoryException e) {\n            logger.error(\"Repository error.\", e);\n        }\n\n        while( nodeIter.hasNext()){\n\n            OutputStream outputStream = null;\n            InputStream is = null;\n\n            try {\n                Node nodeToStore = nodeIter.nextNode().getNode(\"file\").getNodes().nextNode();\n                Node content = nodeToStore.getNodes().nextNode();\n\n                is = content.getProperty(\"jcr:data\").getBinary().getStream() ;\n\n                String a = directory.getAbsolutePath() + filesystemSeparator +nodeToStore.getName();\n                outputStream = new FileOutputStream(new File( directory.getAbsolutePath() + filesystemSeparator + nodeToStore.getName() ));\n\n                int read = 0;\n                byte[] bytes = new byte[1024];\n\n                while ((read = is.read(bytes)) != -1) {\n                    outputStream.write(bytes, 0, read);\n                }\n\n\n            } catch (PathNotFoundException e) {\n                logger.error(\"Path not found.\", e);\n            } catch (RepositoryException e) {\n                logger.error(\"Repository error.\", e);\n            } catch (FileNotFoundException e) {\n                logger.error(\"File not found.\", e);\n            } catch (IOException e) {\n                logger.error(\"IO error\", e);\n            } finally {\n                if (is != null) {\n                    try {\n                        is.close();\n                    } catch (IOException e) {\n                        e.printStackTrace();\n                    }\n                }\n                if (outputStream != null) {\n                    try {\n                        outputStream.close();\n                    } catch (IOException e) {\n                        e.printStackTrace();\n                    }\n\n                }\n            }//finally\n        }//while nodeIter has next\n\n    }\n\n\n\n    private boolean isCompleteFiling(Node node){\n        boolean result = false;\n\n        NodeIterator nodeIter = null;\n        try {\n            nodeIter = node.getNodes();\n        } catch (RepositoryException e) {\n            logger.error(\"Repository error\", e);\n        }\n\n        while(nodeIter.hasNext()){\n\n            Node attachmentNode = nodeIter.nextNode();\n\n            try {\n                if(StringUtils.endsWith(attachmentNode.getName(), \".pdf\")){\n                    if ( StringUtils.equals(\"receipt.pdf\", attachmentNode.getNode(\"file\").getNodes().nextNode().getName() )){\n                        result = true;\n                    }\n                }else{\n                    continue;\n                }\n            } catch (RepositoryException e) {\n                logger.error(\"Repository error\", e);\n            }\n        }\n        return result;\n    }\n\n\n    private Session getJcrSession(String url){\n        Repository repository = null;\n        try {\n            repository = JcrUtils.getRepository(url);\n        } catch (RepositoryException e) {\n            logger.error(\"Repository error\", e);\n        }\n\n        SimpleCredentials creds = new SimpleCredentials(\"admin\",\"admin\".toCharArray());\n        Session jcrSession = null;\n\n        try {\n            jcrSession = repository.login(creds, \"default\");\n        } catch (LoginException e) {\n            logger.error(\"could not log in to jcr\", e);\n        } catch (NoSuchWorkspaceException e) {\n            logger.error(\"Could not find workspace\", e);\n        } catch (RepositoryException e) {\n            logger.error(\"Repository error\", e);\n        }\n\n        return jcrSession;\n    }\n\n    @Scheduled(cron=\"${exportDaemon.execution.cron}\" )\n    public void cronExport(){\n\n        logger.debug(\"Starting cron export!\");\n        exportFilesWithRules();\n\n\n    }\n\n}\n</code></pre>\n\n<p>properties</p>\n\n<pre><code>exportDaemon.jcr.repository.url=http://192.168.3.3:10080/jackrabbit-webapp-2.6.2/server\nexportDaemon.execution.cron=* */5 * * * *\nexportDaemon.filesystem.separator=\\\\\nexportDaemon.path.complete=C:\\\\files\\\\export\\\\complete\nexportDaemon.path.incomplete=C:\\\\files\\\\export\\\\incomplete\nexportDaemon.all.filings=false\n</code></pre>\n\n<p>web.xml</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;web-app xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xmlns=\"http://java.sun.com/xml/ns/javaee\" xmlns:web=\"http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd\"\n    xsi:schemaLocation=\"http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd\"\n    id=\"WebApp_ID\" version=\"2.5\"&gt;\n\n\n    &lt;display-name&gt;fileExportDaemon&lt;/display-name&gt;\n\n    &lt;context-param&gt;\n        &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\n        &lt;param-value&gt;/WEB-INF/application-context.xml&lt;/param-value&gt;\n    &lt;/context-param&gt;\n\n    &lt;listener&gt;\n        &lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt;\n    &lt;/listener&gt;\n\n    &lt;servlet&gt;\n      &lt;servlet-name&gt;fileExportDaemon&lt;/servlet-name&gt;\n      &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;\n      &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;\n    &lt;/servlet&gt;\n\n    &lt;servlet-mapping&gt;\n      &lt;servlet-name&gt;fileExportDaemon&lt;/servlet-name&gt;\n      &lt;url-pattern&gt;/&lt;/url-pattern&gt;\n    &lt;/servlet-mapping&gt;\n\n    &lt;filter&gt;\n        &lt;filter-name&gt;encodingFilter&lt;/filter-name&gt;\n        &lt;filter-class&gt;org.springframework.web.filter.CharacterEncodingFilter&lt;/filter-class&gt;\n        &lt;init-param&gt;\n            &lt;param-name&gt;encoding&lt;/param-name&gt;\n            &lt;param-value&gt;UTF-8&lt;/param-value&gt;\n        &lt;/init-param&gt;\n        &lt;init-param&gt;\n            &lt;param-name&gt;forceEncoding&lt;/param-name&gt;\n            &lt;param-value&gt;true&lt;/param-value&gt;\n        &lt;/init-param&gt;\n    &lt;/filter&gt;\n\n    &lt;filter-mapping&gt;\n      &lt;filter-name&gt;encodingFilter&lt;/filter-name&gt;\n      &lt;url-pattern&gt;/*&lt;/url-pattern&gt;\n    &lt;/filter-mapping&gt;\n\n&lt;/web-app&gt;\n</code></pre>\n"},{"tags":["java","arrays","multidimensional-array","arraylist","sub-array"],"comments":[{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1696715819,"post_id":77251622,"comment_id":136189529,"body_markdown":"You showed us the output you’re getting, but we have no way to know how you’re producing that output.  The code you’ve shown does not produce any output.  Edit your question and show us the code which produces that output.","body":"You showed us the output you’re getting, but we have no way to know how you’re producing that output.  The code you’ve shown does not produce any output.  Edit your question and show us the code which produces that output."},{"owner":{"account_id":2792262,"reputation":163847,"user_id":2402272,"accept_rate":85,"display_name":"John Bollinger"},"score":0,"creation_date":1696716109,"post_id":77251622,"comment_id":136189546,"body_markdown":"You say mostly &quot;array&quot; in your prose, but show `ArrayList`s in your code.  These are not the same thing.","body":"You say mostly &quot;array&quot; in your prose, but show <code>ArrayList</code>s in your code.  These are not the same thing."},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1696716146,"post_id":77251622,"comment_id":136189549,"body_markdown":"Debugging is a good skill to have. If you are a professional software developer, or otherwise regularly develop software, it will be a necessary skill.  Try this: Pretend your are the computer. Use pen and paper for your memory.  You could also try running the program in a debugger. Set a breakpoint early, and then run the program one-step-at-a-time while monitoring variables.","body":"Debugging is a good skill to have. If you are a professional software developer, or otherwise regularly develop software, it will be a necessary skill.  Try this: Pretend your are the computer. Use pen and paper for your memory.  You could also try running the program in a debugger. Set a breakpoint early, and then run the program one-step-at-a-time while monitoring variables."},{"owner":{"account_id":2792262,"reputation":163847,"user_id":2402272,"accept_rate":85,"display_name":"John Bollinger"},"score":1,"creation_date":1696716302,"post_id":77251622,"comment_id":136189561,"body_markdown":"The sub-arrays (sub-lists) you want are characterized by distinct *pairs* of start and end index, but you are creating new `ArrayList`s only for each distinct start index.  You then add that same list to the answer list multiple times.","body":"The sub-arrays (sub-lists) you want are characterized by distinct <i>pairs</i> of start and end index, but you are creating new <code>ArrayList</code>s only for each distinct start index.  You then add that same list to the answer list multiple times."},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1696716320,"post_id":77251622,"comment_id":136189562,"body_markdown":"This appears to be a from programming puzzle / challenge. If it is, please provide a link to the page. It could also be a homework assignment. It looks The result of `solve` is passed to an automated judge. It is the judge that is responsible for outputting the result, and for verifying the result is correct.","body":"This appears to be a from programming puzzle / challenge. If it is, please provide a link to the page. It could also be a homework assignment. It looks The result of <code>solve</code> is passed to an automated judge. It is the judge that is responsible for outputting the result, and for verifying the result is correct."},{"owner":{"account_id":2792262,"reputation":163847,"user_id":2402272,"accept_rate":85,"display_name":"John Bollinger"},"score":0,"creation_date":1696716439,"post_id":77251622,"comment_id":136189570,"body_markdown":"Since you are using `List`s, you might find [`List.subList()`](https://docs.oracle.com/javase/8/docs/api/java/util/List.html#subList-int-int-) useful for your purposes.","body":"Since you are using <code>List</code>s, you might find <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/List.html#subList-int-int-\" rel=\"nofollow noreferrer\"><code>List.subList()</code></a> useful for your purposes."},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":1,"creation_date":1696716447,"post_id":77251622,"comment_id":136189573,"body_markdown":"It will help to have meaningful variable names. Consider changing the names of variables `i` and `j`. You might ask &quot;what names should they have?&quot; I ask &quot;What do they represent?&quot;  (How about `start` and `end`?).","body":"It will help to have meaningful variable names. Consider changing the names of variables <code>i</code> and <code>j</code>. You might ask &quot;what names should they have?&quot; I ask &quot;What do they represent?&quot;  (How about <code>start</code> and <code>end</code>?)."},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1696734528,"post_id":77251622,"comment_id":136190586,"body_markdown":"Off-topic: I notice the line `public ArrayList&lt;ArrayList&lt;Integer&gt;&gt; solve(ArrayList&lt;Integer&gt; A) {` doesn&#39;t have the `static` specifier. Should it?","body":"Off-topic: I notice the line <code>public ArrayList&lt;ArrayList&lt;Integer&gt;&gt; solve(ArrayList&lt;Integer&gt; A) {</code> doesn&#39;t have the <code>static</code> specifier. Should it?"}],"answers":[{"tags":[],"owner":{"account_id":8433338,"reputation":20038,"user_id":6328256,"display_name":"Sash Sinha"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1696717005,"creation_date":1696716459,"answer_id":77251669,"question_id":77251622,"body_markdown":"The issue is that you&#39;re adding the same `ArrayList` object (`temp`) multiple times to `ans`. In Java, the `ArrayList` object is mutable. So, when you modify `temp`, all the references to it in `ans` get updated as well.\r\n\r\nTo fix, create a new list from `temp` before adding it to `ans`, e.g., use `new ArrayList&lt;&gt;(temp)`:\r\n\r\n```java\r\nimport java.util.ArrayList;\r\nimport java.util.Arrays;\r\n\r\nclass Main {\r\n  public static void main(String[] args) {\r\n    ArrayList&lt;Integer&gt; input = new ArrayList&lt;&gt;(Arrays.asList(1, 2, 3, 4, 5));\r\n    System.out.println(solve(input));\r\n  }\r\n\r\n  public static ArrayList&lt;ArrayList&lt;Integer&gt;&gt; solve(ArrayList&lt;Integer&gt; A) {\r\n    int n = A.size();\r\n    ArrayList&lt;ArrayList&lt;Integer&gt;&gt; ans = new ArrayList&lt;&gt;();\r\n    for (int i = 0; i &lt; n; i++) {\r\n      ArrayList&lt;Integer&gt; temp = new ArrayList&lt;&gt;();\r\n      for (int j = i; j &lt; n; j++) {\r\n        temp.add(A.get(j));\r\n        ans.add(new ArrayList&lt;&gt;(temp));\r\n      }\r\n    }\r\n    return ans;\r\n  }\r\n}\r\n```\r\n\r\n**Output:**\r\n\r\n    [[1], [1, 2], [1, 2, 3], [1, 2, 3, 4], [1, 2, 3, 4, 5], [2], [2, 3], [2, 3, 4], [2, 3, 4, 5], [3], [3, 4], [3, 4, 5], [4], [4, 5], [5]]","title":"Issue with ArrayList array generation","body":"<p>The issue is that you're adding the same <code>ArrayList</code> object (<code>temp</code>) multiple times to <code>ans</code>. In Java, the <code>ArrayList</code> object is mutable. So, when you modify <code>temp</code>, all the references to it in <code>ans</code> get updated as well.</p>\n<p>To fix, create a new list from <code>temp</code> before adding it to <code>ans</code>, e.g., use <code>new ArrayList&lt;&gt;(temp)</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.ArrayList;\nimport java.util.Arrays;\n\nclass Main {\n  public static void main(String[] args) {\n    ArrayList&lt;Integer&gt; input = new ArrayList&lt;&gt;(Arrays.asList(1, 2, 3, 4, 5));\n    System.out.println(solve(input));\n  }\n\n  public static ArrayList&lt;ArrayList&lt;Integer&gt;&gt; solve(ArrayList&lt;Integer&gt; A) {\n    int n = A.size();\n    ArrayList&lt;ArrayList&lt;Integer&gt;&gt; ans = new ArrayList&lt;&gt;();\n    for (int i = 0; i &lt; n; i++) {\n      ArrayList&lt;Integer&gt; temp = new ArrayList&lt;&gt;();\n      for (int j = i; j &lt; n; j++) {\n        temp.add(A.get(j));\n        ans.add(new ArrayList&lt;&gt;(temp));\n      }\n    }\n    return ans;\n  }\n}\n</code></pre>\n<p><strong>Output:</strong></p>\n<pre><code>[[1], [1, 2], [1, 2, 3], [1, 2, 3, 4], [1, 2, 3, 4, 5], [2], [2, 3], [2, 3, 4], [2, 3, 4, 5], [3], [3, 4], [3, 4, 5], [4], [4, 5], [5]]\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696730602,"creation_date":1696722754,"answer_id":77251857,"question_id":77251622,"body_markdown":"Utilize the _[List#subList](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/List.html#subList(int,int))_ method, and remove the need for _temp_.\r\n\r\n```java\r\nList&lt;List&lt;Integer&gt;&gt; solve(List&lt;Integer&gt; A) {\r\n    List&lt;List&lt;Integer&gt;&gt; list = new ArrayList&lt;&gt;();\r\n    for (int i = 0, j, n = A.size(); i &lt; n; i++)\r\n        for (j = i + 1; j &lt;= n; j++)\r\n            list.add(new ArrayList&lt;&gt;(A.subList(i, j)));\r\n    return list;\r\n}\r\n```\r\n\r\nOutput\r\n\r\n```none\r\n[1]\r\n[1, 2]\r\n[1, 2, 3]\r\n[1, 2, 3, 4]\r\n[1, 2, 3, 4, 5]\r\n[2]\r\n[2, 3]\r\n[2, 3, 4]\r\n[2, 3, 4, 5]\r\n[3]\r\n[3, 4]\r\n[3, 4, 5]\r\n[4]\r\n[4, 5]\r\n[5]\r\n```","title":"Issue with ArrayList array generation","body":"<p>Utilize the <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/List.html#subList(int,int)\" rel=\"nofollow noreferrer\">List#subList</a></em> method, and remove the need for <em>temp</em>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>List&lt;List&lt;Integer&gt;&gt; solve(List&lt;Integer&gt; A) {\n    List&lt;List&lt;Integer&gt;&gt; list = new ArrayList&lt;&gt;();\n    for (int i = 0, j, n = A.size(); i &lt; n; i++)\n        for (j = i + 1; j &lt;= n; j++)\n            list.add(new ArrayList&lt;&gt;(A.subList(i, j)));\n    return list;\n}\n</code></pre>\n<p>Output</p>\n<pre class=\"lang-none prettyprint-override\"><code>[1]\n[1, 2]\n[1, 2, 3]\n[1, 2, 3, 4]\n[1, 2, 3, 4, 5]\n[2]\n[2, 3]\n[2, 3, 4]\n[2, 3, 4, 5]\n[3]\n[3, 4]\n[3, 4, 5]\n[4]\n[4, 5]\n[5]\n</code></pre>\n"}],"owner":{"account_id":29622121,"reputation":5,"user_id":22702821,"display_name":"Shubham Kumar Singh"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":67,"favorite_count":0,"down_vote_count":3,"up_vote_count":1,"closed_date":1696730561,"answer_count":2,"score":-2,"last_activity_date":1696730602,"creation_date":1696715213,"question_id":77251622,"body_markdown":"&gt; You are given an array A of N integers.\r\nReturn a 2D array consisting of all the subarrays of the array.\r\n\r\nI had tried to get subarrays in temp as per loop and add that subarray directly to ans(2d arraylist)\r\n\r\n```java\r\npublic ArrayList&lt;ArrayList&lt;Integer&gt;&gt; solve(ArrayList&lt;Integer&gt; A) {\r\n    int n=A.size();\r\n    ArrayList&lt;ArrayList&lt;Integer&gt;&gt; ans= new ArrayList&lt;&gt;();\r\n    for(int i=0;i&lt;n;i++)\r\n    {\r\n        ArrayList&lt;Integer&gt; temp=new ArrayList&lt;&gt;();\r\n        for(int j=i;j&lt;n;j++)\r\n        {\r\n            temp.add(A.get(j));                           \r\n            ans.add(temp);                       \r\n        }\r\n    }\r\n    return ans;\r\n}\r\n```\r\n\r\nInput: `[1,2,3,4,5]`\r\n\r\nOutput: `[1 2 3 4 5 ] [1 2 3 4 5 ] [1 2 3 4 5 ] [1 2 3 4 5 ] [1 2 3 4 5 ] [2 3 4 5 ] [2 3 4 5 ] [2 3 4 5 ] [2 3 4 5 ] [3 4 5 ] [3 4 5 ] [3 4 5 ] [4 5 ] [4 5 ] [5 ]`\r\n\r\nExpected output: `[[1],[1,2],[1,2,3],[1,2,3,4],[1,2,3,4,5],[2],[2,3],[2,3,4],[2,3,4,5],[3],[3,4],[3,4,5],[4],[4,5],[5]]`\r\n","title":"Issue with ArrayList array generation","body":"<blockquote>\n<p>You are given an array A of N integers.\nReturn a 2D array consisting of all the subarrays of the array.</p>\n</blockquote>\n<p>I had tried to get subarrays in temp as per loop and add that subarray directly to ans(2d arraylist)</p>\n<pre class=\"lang-java prettyprint-override\"><code>public ArrayList&lt;ArrayList&lt;Integer&gt;&gt; solve(ArrayList&lt;Integer&gt; A) {\n    int n=A.size();\n    ArrayList&lt;ArrayList&lt;Integer&gt;&gt; ans= new ArrayList&lt;&gt;();\n    for(int i=0;i&lt;n;i++)\n    {\n        ArrayList&lt;Integer&gt; temp=new ArrayList&lt;&gt;();\n        for(int j=i;j&lt;n;j++)\n        {\n            temp.add(A.get(j));                           \n            ans.add(temp);                       \n        }\n    }\n    return ans;\n}\n</code></pre>\n<p>Input: <code>[1,2,3,4,5]</code></p>\n<p>Output: <code>[1 2 3 4 5 ] [1 2 3 4 5 ] [1 2 3 4 5 ] [1 2 3 4 5 ] [1 2 3 4 5 ] [2 3 4 5 ] [2 3 4 5 ] [2 3 4 5 ] [2 3 4 5 ] [3 4 5 ] [3 4 5 ] [3 4 5 ] [4 5 ] [4 5 ] [5 ]</code></p>\n<p>Expected output: <code>[[1],[1,2],[1,2,3],[1,2,3,4],[1,2,3,4,5],[2],[2,3],[2,3,4],[2,3,4,5],[3],[3,4],[3,4,5],[4],[4,5],[5]]</code></p>\n"},{"tags":["java","hibernate","hibernate-mapping","hibernate-4.x"],"comments":[{"owner":{"account_id":3635110,"reputation":1239,"user_id":3030406,"accept_rate":55,"display_name":"Rookie007"},"score":0,"creation_date":1432259517,"post_id":30386741,"comment_id":48863479,"body_markdown":"in your `Booking.java` you have mapped only one column do you have only one column in DB ?","body":"in your <code>Booking.java</code> you have mapped only one column do you have only one column in DB ?"},{"owner":{"account_id":2740026,"reputation":752,"user_id":2361780,"accept_rate":71,"display_name":"Kartik Jajal"},"score":0,"creation_date":1432261257,"post_id":30386741,"comment_id":48863890,"body_markdown":"there are other columns as well, it gives this exception for every column. But one column at a time in stack trace.","body":"there are other columns as well, it gives this exception for every column. But one column at a time in stack trace."},{"owner":{"account_id":3635110,"reputation":1239,"user_id":3030406,"accept_rate":55,"display_name":"Rookie007"},"score":0,"creation_date":1432261802,"post_id":30386741,"comment_id":48864019,"body_markdown":"Map every column in DB with your `Booking ,java`","body":"Map every column in DB with your <code>Booking ,java</code>"},{"owner":{"account_id":2740026,"reputation":752,"user_id":2361780,"accept_rate":71,"display_name":"Kartik Jajal"},"score":0,"creation_date":1432266446,"post_id":30386741,"comment_id":48865036,"body_markdown":"This is id column value I pass, it is primary key","body":"This is id column value I pass, it is primary key"},{"owner":{"account_id":2825396,"reputation":141,"user_id":2428144,"accept_rate":71,"display_name":"Amar Agrawal"},"score":0,"creation_date":1432273796,"post_id":30386741,"comment_id":48867062,"body_markdown":"try using session.load(Booking.class,3740456)","body":"try using session.load(Booking.class,3740456)"}],"answers":[{"tags":[],"owner":{"account_id":2163786,"reputation":1231,"user_id":1917327,"display_name":"codedabbler"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1432334724,"creation_date":1432334724,"answer_id":30406919,"question_id":30386741,"body_markdown":"Is your database configured with case sensitive columns? That could be one reason why Oracle is throwing an &quot;invalid identifier&quot; error\r\nCheck your table creating script.","title":"org.hibernate.exception.SQLGrammarException: could not extract ResultSet","body":"<p>Is your database configured with case sensitive columns? That could be one reason why Oracle is throwing an \"invalid identifier\" error\nCheck your table creating script.</p>\n"},{"tags":[],"owner":{"account_id":2734183,"reputation":715,"user_id":2357209,"display_name":"Onur Başt&#252;rk"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1598642389,"creation_date":1598642389,"answer_id":63639754,"question_id":30386741,"body_markdown":"Why is site_an in lowercase in the select such as booking0_.site_an as site_an10_0_0_ while all other column names are in uppercase. I think it may be an uppercase &quot;i&quot; issue.  \r\n\r\n    select\r\n    booking0_.id as id1_0_0_,\r\n    booking0_.EVENT_DETAIL_ID as EVENT_DETAIL_ID2_0_0_,\r\n    booking0_.EVENT_ID as EVENT_ID3_0_0_,\r\n    booking0_.PARTNER_C as PARTNER_C4_0_0_,\r\n    booking0_.EDI_RECIPIENT_AN as EDI_RECIPIENT_AN5_0_0_,\r\n    booking0_.RECORD_SEQUENCE_ID as RECORD_SEQUENCE_ID6_0_0_,\r\n    booking0_.RECORD_TYPE_N as RECORD_TYPE_N7_0_0_,\r\n    booking0_.EDI_SENDER_AN as EDI_SENDER_AN8_0_0_,\r\n    booking0_.SENDER_SEQUENCE_AN as SENDER_SEQUENCE_AN9_0_0_,\r\n    booking0_.site_an as site_an10_0_0_  ","title":"org.hibernate.exception.SQLGrammarException: could not extract ResultSet","body":"<p>Why is site_an in lowercase in the select such as booking0_.site_an as site_an10_0_0_ while all other column names are in uppercase. I think it may be an uppercase &quot;i&quot; issue.</p>\n<pre><code>select\nbooking0_.id as id1_0_0_,\nbooking0_.EVENT_DETAIL_ID as EVENT_DETAIL_ID2_0_0_,\nbooking0_.EVENT_ID as EVENT_ID3_0_0_,\nbooking0_.PARTNER_C as PARTNER_C4_0_0_,\nbooking0_.EDI_RECIPIENT_AN as EDI_RECIPIENT_AN5_0_0_,\nbooking0_.RECORD_SEQUENCE_ID as RECORD_SEQUENCE_ID6_0_0_,\nbooking0_.RECORD_TYPE_N as RECORD_TYPE_N7_0_0_,\nbooking0_.EDI_SENDER_AN as EDI_SENDER_AN8_0_0_,\nbooking0_.SENDER_SEQUENCE_AN as SENDER_SEQUENCE_AN9_0_0_,\nbooking0_.site_an as site_an10_0_0_  \n</code></pre>\n"}],"owner":{"account_id":2740026,"reputation":752,"user_id":2361780,"accept_rate":71,"display_name":"Kartik Jajal"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":54115,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":2,"score":4,"last_activity_date":1696730440,"creation_date":1432256021,"question_id":30386741,"body_markdown":"I have implemented a simple application in Hibernate-4. This application retrieve the value from a table. But when I try to get the record with this\r\n\r\n    (Booking) session.get(Booking.class, 3740456);\r\n\r\n\r\n it gives me exception \r\n\r\n    INFO: HHH000327: Error performing load command : org.hibernate.exception.SQLGrammarException: could not extract ResultSet\r\n\r\nSo, to verify into the database regarding table and column name, I copy the query from the log statement and execute it. It gives me proper output.\r\n\r\nI checked several questions &amp; answers related to this question, but could able to derive the solution.\r\n\r\n**Hibernate.cfg.xml**\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;!DOCTYPE hibernate-configuration PUBLIC\r\n    &quot;-//Hibernate/Hibernate Configuration DTD 3.0//EN&quot;\r\n    &quot;http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd&quot;&gt;\r\n    \r\n    &lt;hibernate-configuration&gt;\r\n        &lt;session-factory&gt;\r\n  \r\n            &lt;property name=&quot;connection.url&quot;&gt;jdbc:oracle:thin:@SHKG9072DB:5030:TMSD10G2&lt;/property&gt;\r\n            &lt;property name=&quot;connection.username&quot;&gt;ICTDEV$EDI_APP&lt;/property&gt;\r\n            &lt;property name=&quot;connection.password&quot;&gt;p2II9JLIaea06&lt;/property&gt;\r\n            &lt;property name=&quot;connection.driver_class&quot;&gt;oracle.jdbc.driver.OracleDriver&lt;/property&gt;\r\n            &lt;property name=&quot;hibernate.dialect&quot;&gt;org.hibernate.dialect.Oracle10gDialect&lt;/property&gt;\r\n  \r\n            &lt;property name=&quot;show_sql&quot;&gt;true&lt;/property&gt;\r\n  \r\n            &lt;property name=&quot;format_sql&quot;&gt;true&lt;/property&gt;\r\n  \r\n            &lt;property name=&quot;hibernate.temp.use_jdbc_metadata_defaults&quot;&gt;false&lt;/property&gt;\r\n            &lt;property name = &quot;hibernate.jdbc.lob.non_contextual_creation&quot;&gt;true&lt;/property&gt;  \r\n  \r\n   \r\n            &lt;property name=&quot;connection.pool_size&quot;&gt;1&lt;/property&gt;\r\n            &lt;property name=&quot;current_session_context_class&quot;&gt;thread&lt;/property&gt;\r\n    \r\n            &lt;mapping class=&quot;com.hibernate.demo.Booking&quot;/&gt; \r\n    \r\n        &lt;/session-factory&gt;\r\n    &lt;/hibernate-configuration&gt;\r\n\r\n**Booking.java**\r\n\r\n    package com.hibernate.demo;\r\n\r\n    import java.io.Serializable;\r\n\r\n    import javax.persistence.Column;\r\n    import javax.persistence.Entity;\r\n    import javax.persistence.Id;\r\n    import javax.persistence.Table;\r\n\r\n\r\n\t@Entity\r\n    @Table(name=&quot;EDI_IN_BOOKING&quot;)\r\n    public class Booking {\r\n\r\n\t    /**\r\n\t    * \r\n\t    */\r\n\t    private static final long serialVersionUID = 1L;\r\n\r\n\t    @Id\t\r\n    \tprivate int id;\r\n\t\r\n\t    @Column(name=&quot;SITE_AN&quot;)\r\n    \tprivate String site;\r\n\t\r\n\t\r\n\t    @Column(name=&quot;EVENT_ID&quot;)\r\n\t    private int eventId;\r\n\t\r\n\t    @Column(name=&quot;EVENT_DETAIL_ID&quot;)\r\n\t    private int eventDetailId;\r\n\t\r\n\t    @Column(name=&quot;RECORD_SEQUENCE_ID&quot;)\r\n\t    private int recordSequenceId;\r\n\t\r\n\t    @Column(name=&quot;RECORD_TYPE_N&quot;)\r\n\t    int recordType;\t\r\n\t\r\n\t    @Column(name=&quot;EDI_SENDER_AN&quot;)\r\n\t    String sender;\r\n\t\r\n\t    @Column(name=&quot;EDI_RECIPIENT_AN&quot;)\r\n\t    String recipient;\r\n\t\r\n\t    @Column(name=&quot;PARTNER_C&quot;)\r\n\t    String partner;\r\n\r\n\t    @Column(name=&quot;SENDER_SEQUENCE_AN&quot;)\r\n\t    String senderSequence;\r\n\r\n\t\r\n\r\n\r\n\t    public String getSite() {\r\n\t\t    return site;\r\n\t    }\r\n\r\n\t    public void setSite(String site) {\r\n\t\t    this.site = (site);\r\n\t    }\r\n\r\n\t    public int getId() {\r\n\t\t    return id;\r\n\t    }\r\n\r\n\t    public void setId(int id) {\r\n\t\t    this.id = (id);\r\n\t    }\r\n\r\n\t    public int getEventId() {\r\n\t\t    return eventId;\r\n\t    }\r\n\r\n\t    public void setEventId(int eventId) {\r\n\t\t    this.eventId = (eventId);\r\n\t    }\r\n\r\n\t    public int getEventDetailId() {\r\n\t\t    return eventDetailId;\r\n\t    }\r\n\r\n\t    public void setEventDetailId(int eventDetailId) {\r\n\t\t    this.eventDetailId = (eventDetailId);\r\n\t    }\r\n\r\n\t    public int getRecordSequenceId() {\r\n\t\t    return recordSequenceId;\r\n\t    }\r\n\r\n\t    public void setRecordSequenceId(int recordSequenceId) {\r\n\t\t    this.recordSequenceId = (recordSequenceId);\r\n\t    }\r\n\r\n\t    public int getRecordType() {\r\n\t\t    return recordType;\r\n\t    }\r\n\r\n\t    public void setRecordType(int recordType) {\r\n\t\t    this.recordType = (recordType);\r\n\t    }\r\n\r\n\t    public String getSender() {\r\n\t\t    return sender;\r\n\t    }\r\n\r\n\t    public void setSender(String sender) {\r\n\t\t    this.sender = (sender);\r\n\t    }\r\n\r\n\t    public String getRecipient() {\r\n\t\t    return recipient;\r\n\t    }\r\n\r\n\t    public void setRecipient(String recipient) {\r\n\t\t    this.recipient = (recipient);\r\n\t    }\r\n\r\n\t    public String getPartner() {\r\n\t\t    return partner;\r\n\t    }\r\n\r\n\t    public void setPartner(String partner) {\r\n\t\t    this.partner = (partner);\r\n\t    }\r\n\r\n\t    public String getSenderSequence() {\r\n\t\t    return senderSequence;\r\n\t    }\r\n\r\n\t    public void setSenderSequence(String senderSequence) {\r\n\t\t    this.senderSequence = (senderSequence);\r\n\t    }\r\n\r\n\t\r\n\t\r\n    }\r\n\r\n\r\n\r\n**Main.java**\r\n\r\n\r\n    package com.hibernate.demo;\r\n\r\n    import org.hibernate.Session;\r\n    import org.hibernate.SessionFactory;\r\n    import org.hibernate.boot.registry.StandardServiceRegistryBuilder;\r\n    import org.hibernate.cfg.Configuration;\r\n    import org.hibernate.service.ServiceRegistry;\r\n\r\n    public class Main {\r\n\t\t\r\n\t    public static void main(String[] args) {\r\n\t\t    System.out.println(&quot;Hello World&quot;);\r\n\t\t    System.out.println(&quot;Trying to create a test connection with the database.&quot;);\r\n\t\t    Configuration configuration = new Configuration().configure(&quot;hibernate.cfg.xml&quot;);\r\n            StandardServiceRegistryBuilder serviceRegistryBuilder = new StandardServiceRegistryBuilder();\r\n            serviceRegistryBuilder.applySettings(configuration.getProperties());\r\n            ServiceRegistry serviceRegistry = serviceRegistryBuilder.build();\r\n            SessionFactory sessionFactory = configuration.buildSessionFactory(serviceRegistry);\r\n        \r\n            Session session = sessionFactory.getCurrentSession(); \r\n       \r\n            session.beginTransaction();\r\n            Booking booking = (Booking) session.get(Booking.class, 3740456);        \r\n            System.out.println(booking.getEventDetailId());\r\n\t    }\r\n\r\n    }\r\n\r\n\r\n\r\n**Table description**\r\n\r\n   \r\n    desc EDi_IN_BOOKING\r\n    ID                             NOT NULL NUMBER                                                                                                                                                                                        \r\n    EVENT_ID                       NOT NULL NUMBER                                                                                                                                                                                        \r\n    EVENT_DETAIL_ID                NOT NULL NUMBER                                                                                                                                                                                        \r\n    RECORD_SEQUENCE_ID             NOT NULL NUMBER                                                                                                                                                                                        \r\n    RECORD_TYPE_N                           NUMBER(1)                                                                                                                                                                                     \r\n    SITE_AN                                 VARCHAR2(10)                                                                                                                                                                                  \r\n    EDI_SENDER_AN                           VARCHAR2(35)                                                                                                                                                                                  \r\n    EDI_RECIPIENT_AN                        VARCHAR2(35)                                                                                                                                                                                  \r\n    PARTNER_C                               VARCHAR2(20)                                                                                                                                                                                  \r\n    SENDER_SEQUENCE_AN                      VARCHAR2(15)                                                                                                                                                                                  \r\n\r\n                                                                                                                                                                              \r\n\r\n\r\n**Query from log (this gives correct output)**\r\n\r\n    select\r\n    booking0_.id as id1_0_0_,\r\n    booking0_.EVENT_DETAIL_ID as EVENT_DETAIL_ID2_0_0_,\r\n    booking0_.EVENT_ID as EVENT_ID3_0_0_,\r\n    booking0_.PARTNER_C as PARTNER_C4_0_0_,\r\n    booking0_.EDI_RECIPIENT_AN as EDI_RECIPIENT_AN5_0_0_,\r\n    booking0_.RECORD_SEQUENCE_ID as RECORD_SEQUENCE_ID6_0_0_,\r\n    booking0_.RECORD_TYPE_N as RECORD_TYPE_N7_0_0_,\r\n    booking0_.EDI_SENDER_AN as EDI_SENDER_AN8_0_0_,\r\n    booking0_.SENDER_SEQUENCE_AN as SENDER_SEQUENCE_AN9_0_0_,\r\n    booking0_.site_an as site_an10_0_0_ \r\n    from\r\n    EDI_IN_BOOKING booking0_ \r\n    where\r\n    booking0_.id=3740456;\r\n\r\n**exception**\r\n\r\n\r\n    INFO: HHH000397: Using ASTQueryTranslatorFactory\r\n    Hibernate: \r\n    select\r\n        booking0_.id as id1_0_0_,\r\n        booking0_.EVENT_DETAIL_ID as EVENT_DETAIL_ID2_0_0_,\r\n        booking0_.EVENT_ID as EVENT_ID3_0_0_,\r\n        booking0_.PARTNER_C as PARTNER_C4_0_0_,\r\n        booking0_.EDI_RECIPIENT_AN as EDI_RECIPIENT_AN5_0_0_,\r\n        booking0_.RECORD_SEQUENCE_ID as RECORD_SEQUENCE_ID6_0_0_,\r\n        booking0_.RECORD_TYPE_N as RECORD_TYPE_N7_0_0_,\r\n        booking0_.EDI_SENDER_AN as EDI_SENDER_AN8_0_0_,\r\n        booking0_.SENDER_SEQUENCE_AN as SENDER_SEQUENCE_AN9_0_0_,\r\n        booking0_.site_an as site_an10_0_0_ \r\n    from\r\n        EDI_IN_BOOKING booking0_ \r\n    where\r\n        booking0_.id=?\r\n     May 22, 2015 10:49:43 AM org.hibernate.engine.jdbc.spi.SqlExceptionHelper logExceptions\r\n     WARN: SQL Error: 904, SQLState: 42000\r\n     May 22, 2015 10:49:43 AM org.hibernate.engine.jdbc.spi.SqlExceptionHelper logExceptions\r\n     ERROR: ORA-00904: &quot;BOOKING0_&quot;.&quot;SITE_AN&quot;: invalid identifier\r\n\r\n     May 22, 2015 10:49:43 AM org.hibernate.event.internal.DefaultLoadEventListener onLoad\r\n     INFO: HHH000327: Error performing load command : org.hibernate.exception.SQLGrammarException: could not extract ResultSet\r\n     Exception in thread &quot;main&quot; org.hibernate.exception.SQLGrammarException: could not extract ResultSet\r\n\tat org.hibernate.exception.internal.SQLStateConversionDelegate.convert(SQLStateConversionDelegate.java:123)\r\n\tat org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:49)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:126)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:112)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.extract(ResultSetReturnImpl.java:91)\r\n\tat org.hibernate.loader.plan.exec.internal.AbstractLoadPlanBasedLoader.getResultSet(AbstractLoadPlanBasedLoader.java:449)\r\n\tat org.hibernate.loader.plan.exec.internal.AbstractLoadPlanBasedLoader.executeQueryStatement(AbstractLoadPlanBasedLoader.java:202)\r\n\tat org.hibernate.loader.plan.exec.internal.AbstractLoadPlanBasedLoader.executeLoad(AbstractLoadPlanBasedLoader.java:137)\r\n\tat org.hibernate.loader.plan.exec.internal.AbstractLoadPlanBasedLoader.executeLoad(AbstractLoadPlanBasedLoader.java:102)\r\n\tat org.hibernate.loader.entity.plan.AbstractLoadPlanBasedEntityLoader.load(AbstractLoadPlanBasedEntityLoader.java:186)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.load(AbstractEntityPersister.java:4126)\r\n\tat org.hibernate.event.internal.DefaultLoadEventListener.loadFromDatasource(DefaultLoadEventListener.java:503)\r\n\tat org.hibernate.event.internal.DefaultLoadEventListener.doLoad(DefaultLoadEventListener.java:468)\r\n\tat org.hibernate.event.internal.DefaultLoadEventListener.load(DefaultLoadEventListener.java:213)\r\n\tat org.hibernate.event.internal.DefaultLoadEventListener.proxyOrLoad(DefaultLoadEventListener.java:275)\r\n\tat org.hibernate.event.internal.DefaultLoadEventListener.onLoad(DefaultLoadEventListener.java:151)\r\n\tat org.hibernate.internal.SessionImpl.fireLoad(SessionImpl.java:1106)\r\n\tat org.hibernate.internal.SessionImpl.access$2000(SessionImpl.java:176)\r\n\tat org.hibernate.internal.SessionImpl$IdentifierLoadAccessImpl.load(SessionImpl.java:2587)\r\n\tat org.hibernate.internal.SessionImpl.get(SessionImpl.java:991)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\r\n\tat java.lang.reflect.Method.invoke(Method.java:597)\r\n\tat org.hibernate.context.internal.ThreadLocalSessionContext$TransactionProtectionWrapper.invoke(ThreadLocalSessionContext.java:356)\r\n\tat $Proxy7.get(Unknown Source)\r\n\tat com.dpworld.demo.Main.main(Main.java:23)\r\n       Caused by: java.sql.SQLException: ORA-00904: &quot;BOOKING0_&quot;.&quot;SITE_AN&quot;: invalid identifier\r\n\r\n\tat oracle.jdbc.dbaccess.DBError.throwSqlException(DBError.java:134)\r\n\tat oracle.jdbc.ttc7.TTIoer.processError(TTIoer.java:289)\r\n\tat oracle.jdbc.ttc7.Oall7.receive(Oall7.java:589)\r\n\tat oracle.jdbc.ttc7.TTC7Protocol.doOall7(TTC7Protocol.java:1957)\r\n\tat oracle.jdbc.ttc7.TTC7Protocol.parseExecuteDescribe(TTC7Protocol.java:850)\r\n\tat oracle.jdbc.driver.OracleStatement.doExecuteQuery(OracleStatement.java:2555)\r\n\tat oracle.jdbc.driver.OracleStatement.doExecuteWithTimeout(OracleStatement.java:2896)\r\n\tat oracle.jdbc.driver.OraclePreparedStatement.executeUpdate(OraclePreparedStatement.java:644)\r\n\tat oracle.jdbc.driver.OraclePreparedStatement.executeQuery(OraclePreparedStatement.java:570)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.extract(ResultSetReturnImpl.java:82)\r\n\t... 22 more\r\n","title":"org.hibernate.exception.SQLGrammarException: could not extract ResultSet","body":"<p>I have implemented a simple application in Hibernate-4. This application retrieve the value from a table. But when I try to get the record with this</p>\n\n<pre><code>(Booking) session.get(Booking.class, 3740456);\n</code></pre>\n\n<p>it gives me exception </p>\n\n<pre><code>INFO: HHH000327: Error performing load command : org.hibernate.exception.SQLGrammarException: could not extract ResultSet\n</code></pre>\n\n<p>So, to verify into the database regarding table and column name, I copy the query from the log statement and execute it. It gives me proper output.</p>\n\n<p>I checked several questions &amp; answers related to this question, but could able to derive the solution.</p>\n\n<p><strong>Hibernate.cfg.xml</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;!DOCTYPE hibernate-configuration PUBLIC\n\"-//Hibernate/Hibernate Configuration DTD 3.0//EN\"\n\"http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd\"&gt;\n\n&lt;hibernate-configuration&gt;\n    &lt;session-factory&gt;\n\n        &lt;property name=\"connection.url\"&gt;jdbc:oracle:thin:@SHKG9072DB:5030:TMSD10G2&lt;/property&gt;\n        &lt;property name=\"connection.username\"&gt;ICTDEV$EDI_APP&lt;/property&gt;\n        &lt;property name=\"connection.password\"&gt;p2II9JLIaea06&lt;/property&gt;\n        &lt;property name=\"connection.driver_class\"&gt;oracle.jdbc.driver.OracleDriver&lt;/property&gt;\n        &lt;property name=\"hibernate.dialect\"&gt;org.hibernate.dialect.Oracle10gDialect&lt;/property&gt;\n\n        &lt;property name=\"show_sql\"&gt;true&lt;/property&gt;\n\n        &lt;property name=\"format_sql\"&gt;true&lt;/property&gt;\n\n        &lt;property name=\"hibernate.temp.use_jdbc_metadata_defaults\"&gt;false&lt;/property&gt;\n        &lt;property name = \"hibernate.jdbc.lob.non_contextual_creation\"&gt;true&lt;/property&gt;  \n\n\n        &lt;property name=\"connection.pool_size\"&gt;1&lt;/property&gt;\n        &lt;property name=\"current_session_context_class\"&gt;thread&lt;/property&gt;\n\n        &lt;mapping class=\"com.hibernate.demo.Booking\"/&gt; \n\n    &lt;/session-factory&gt;\n&lt;/hibernate-configuration&gt;\n</code></pre>\n\n<p><strong>Booking.java</strong></p>\n\n<pre><code>package com.hibernate.demo;\n\nimport java.io.Serializable;\n\nimport javax.persistence.Column;\nimport javax.persistence.Entity;\nimport javax.persistence.Id;\nimport javax.persistence.Table;\n\n\n@Entity\n@Table(name=\"EDI_IN_BOOKING\")\npublic class Booking {\n\n    /**\n    * \n    */\n    private static final long serialVersionUID = 1L;\n\n    @Id \n    private int id;\n\n    @Column(name=\"SITE_AN\")\n    private String site;\n\n\n    @Column(name=\"EVENT_ID\")\n    private int eventId;\n\n    @Column(name=\"EVENT_DETAIL_ID\")\n    private int eventDetailId;\n\n    @Column(name=\"RECORD_SEQUENCE_ID\")\n    private int recordSequenceId;\n\n    @Column(name=\"RECORD_TYPE_N\")\n    int recordType; \n\n    @Column(name=\"EDI_SENDER_AN\")\n    String sender;\n\n    @Column(name=\"EDI_RECIPIENT_AN\")\n    String recipient;\n\n    @Column(name=\"PARTNER_C\")\n    String partner;\n\n    @Column(name=\"SENDER_SEQUENCE_AN\")\n    String senderSequence;\n\n\n\n\n    public String getSite() {\n        return site;\n    }\n\n    public void setSite(String site) {\n        this.site = (site);\n    }\n\n    public int getId() {\n        return id;\n    }\n\n    public void setId(int id) {\n        this.id = (id);\n    }\n\n    public int getEventId() {\n        return eventId;\n    }\n\n    public void setEventId(int eventId) {\n        this.eventId = (eventId);\n    }\n\n    public int getEventDetailId() {\n        return eventDetailId;\n    }\n\n    public void setEventDetailId(int eventDetailId) {\n        this.eventDetailId = (eventDetailId);\n    }\n\n    public int getRecordSequenceId() {\n        return recordSequenceId;\n    }\n\n    public void setRecordSequenceId(int recordSequenceId) {\n        this.recordSequenceId = (recordSequenceId);\n    }\n\n    public int getRecordType() {\n        return recordType;\n    }\n\n    public void setRecordType(int recordType) {\n        this.recordType = (recordType);\n    }\n\n    public String getSender() {\n        return sender;\n    }\n\n    public void setSender(String sender) {\n        this.sender = (sender);\n    }\n\n    public String getRecipient() {\n        return recipient;\n    }\n\n    public void setRecipient(String recipient) {\n        this.recipient = (recipient);\n    }\n\n    public String getPartner() {\n        return partner;\n    }\n\n    public void setPartner(String partner) {\n        this.partner = (partner);\n    }\n\n    public String getSenderSequence() {\n        return senderSequence;\n    }\n\n    public void setSenderSequence(String senderSequence) {\n        this.senderSequence = (senderSequence);\n    }\n\n\n\n}\n</code></pre>\n\n<p><strong>Main.java</strong></p>\n\n<pre><code>package com.hibernate.demo;\n\nimport org.hibernate.Session;\nimport org.hibernate.SessionFactory;\nimport org.hibernate.boot.registry.StandardServiceRegistryBuilder;\nimport org.hibernate.cfg.Configuration;\nimport org.hibernate.service.ServiceRegistry;\n\npublic class Main {\n\n    public static void main(String[] args) {\n        System.out.println(\"Hello World\");\n        System.out.println(\"Trying to create a test connection with the database.\");\n        Configuration configuration = new Configuration().configure(\"hibernate.cfg.xml\");\n        StandardServiceRegistryBuilder serviceRegistryBuilder = new StandardServiceRegistryBuilder();\n        serviceRegistryBuilder.applySettings(configuration.getProperties());\n        ServiceRegistry serviceRegistry = serviceRegistryBuilder.build();\n        SessionFactory sessionFactory = configuration.buildSessionFactory(serviceRegistry);\n\n        Session session = sessionFactory.getCurrentSession(); \n\n        session.beginTransaction();\n        Booking booking = (Booking) session.get(Booking.class, 3740456);        \n        System.out.println(booking.getEventDetailId());\n    }\n\n}\n</code></pre>\n\n<p><strong>Table description</strong></p>\n\n<pre><code>desc EDi_IN_BOOKING\nID                             NOT NULL NUMBER                                                                                                                                                                                        \nEVENT_ID                       NOT NULL NUMBER                                                                                                                                                                                        \nEVENT_DETAIL_ID                NOT NULL NUMBER                                                                                                                                                                                        \nRECORD_SEQUENCE_ID             NOT NULL NUMBER                                                                                                                                                                                        \nRECORD_TYPE_N                           NUMBER(1)                                                                                                                                                                                     \nSITE_AN                                 VARCHAR2(10)                                                                                                                                                                                  \nEDI_SENDER_AN                           VARCHAR2(35)                                                                                                                                                                                  \nEDI_RECIPIENT_AN                        VARCHAR2(35)                                                                                                                                                                                  \nPARTNER_C                               VARCHAR2(20)                                                                                                                                                                                  \nSENDER_SEQUENCE_AN                      VARCHAR2(15)                                                                                                                                                                                  \n</code></pre>\n\n<p><strong>Query from log (this gives correct output)</strong></p>\n\n<pre><code>select\nbooking0_.id as id1_0_0_,\nbooking0_.EVENT_DETAIL_ID as EVENT_DETAIL_ID2_0_0_,\nbooking0_.EVENT_ID as EVENT_ID3_0_0_,\nbooking0_.PARTNER_C as PARTNER_C4_0_0_,\nbooking0_.EDI_RECIPIENT_AN as EDI_RECIPIENT_AN5_0_0_,\nbooking0_.RECORD_SEQUENCE_ID as RECORD_SEQUENCE_ID6_0_0_,\nbooking0_.RECORD_TYPE_N as RECORD_TYPE_N7_0_0_,\nbooking0_.EDI_SENDER_AN as EDI_SENDER_AN8_0_0_,\nbooking0_.SENDER_SEQUENCE_AN as SENDER_SEQUENCE_AN9_0_0_,\nbooking0_.site_an as site_an10_0_0_ \nfrom\nEDI_IN_BOOKING booking0_ \nwhere\nbooking0_.id=3740456;\n</code></pre>\n\n<p><strong>exception</strong></p>\n\n<pre><code>INFO: HHH000397: Using ASTQueryTranslatorFactory\nHibernate: \nselect\n    booking0_.id as id1_0_0_,\n    booking0_.EVENT_DETAIL_ID as EVENT_DETAIL_ID2_0_0_,\n    booking0_.EVENT_ID as EVENT_ID3_0_0_,\n    booking0_.PARTNER_C as PARTNER_C4_0_0_,\n    booking0_.EDI_RECIPIENT_AN as EDI_RECIPIENT_AN5_0_0_,\n    booking0_.RECORD_SEQUENCE_ID as RECORD_SEQUENCE_ID6_0_0_,\n    booking0_.RECORD_TYPE_N as RECORD_TYPE_N7_0_0_,\n    booking0_.EDI_SENDER_AN as EDI_SENDER_AN8_0_0_,\n    booking0_.SENDER_SEQUENCE_AN as SENDER_SEQUENCE_AN9_0_0_,\n    booking0_.site_an as site_an10_0_0_ \nfrom\n    EDI_IN_BOOKING booking0_ \nwhere\n    booking0_.id=?\n May 22, 2015 10:49:43 AM org.hibernate.engine.jdbc.spi.SqlExceptionHelper logExceptions\n WARN: SQL Error: 904, SQLState: 42000\n May 22, 2015 10:49:43 AM org.hibernate.engine.jdbc.spi.SqlExceptionHelper logExceptions\n ERROR: ORA-00904: \"BOOKING0_\".\"SITE_AN\": invalid identifier\n\n May 22, 2015 10:49:43 AM org.hibernate.event.internal.DefaultLoadEventListener onLoad\n INFO: HHH000327: Error performing load command : org.hibernate.exception.SQLGrammarException: could not extract ResultSet\n Exception in thread \"main\" org.hibernate.exception.SQLGrammarException: could not extract ResultSet\nat org.hibernate.exception.internal.SQLStateConversionDelegate.convert(SQLStateConversionDelegate.java:123)\nat org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:49)\nat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:126)\nat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:112)\nat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.extract(ResultSetReturnImpl.java:91)\nat org.hibernate.loader.plan.exec.internal.AbstractLoadPlanBasedLoader.getResultSet(AbstractLoadPlanBasedLoader.java:449)\nat org.hibernate.loader.plan.exec.internal.AbstractLoadPlanBasedLoader.executeQueryStatement(AbstractLoadPlanBasedLoader.java:202)\nat org.hibernate.loader.plan.exec.internal.AbstractLoadPlanBasedLoader.executeLoad(AbstractLoadPlanBasedLoader.java:137)\nat org.hibernate.loader.plan.exec.internal.AbstractLoadPlanBasedLoader.executeLoad(AbstractLoadPlanBasedLoader.java:102)\nat org.hibernate.loader.entity.plan.AbstractLoadPlanBasedEntityLoader.load(AbstractLoadPlanBasedEntityLoader.java:186)\nat org.hibernate.persister.entity.AbstractEntityPersister.load(AbstractEntityPersister.java:4126)\nat org.hibernate.event.internal.DefaultLoadEventListener.loadFromDatasource(DefaultLoadEventListener.java:503)\nat org.hibernate.event.internal.DefaultLoadEventListener.doLoad(DefaultLoadEventListener.java:468)\nat org.hibernate.event.internal.DefaultLoadEventListener.load(DefaultLoadEventListener.java:213)\nat org.hibernate.event.internal.DefaultLoadEventListener.proxyOrLoad(DefaultLoadEventListener.java:275)\nat org.hibernate.event.internal.DefaultLoadEventListener.onLoad(DefaultLoadEventListener.java:151)\nat org.hibernate.internal.SessionImpl.fireLoad(SessionImpl.java:1106)\nat org.hibernate.internal.SessionImpl.access$2000(SessionImpl.java:176)\nat org.hibernate.internal.SessionImpl$IdentifierLoadAccessImpl.load(SessionImpl.java:2587)\nat org.hibernate.internal.SessionImpl.get(SessionImpl.java:991)\nat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\nat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\nat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\nat java.lang.reflect.Method.invoke(Method.java:597)\nat org.hibernate.context.internal.ThreadLocalSessionContext$TransactionProtectionWrapper.invoke(ThreadLocalSessionContext.java:356)\nat $Proxy7.get(Unknown Source)\nat com.dpworld.demo.Main.main(Main.java:23)\n   Caused by: java.sql.SQLException: ORA-00904: \"BOOKING0_\".\"SITE_AN\": invalid identifier\n\nat oracle.jdbc.dbaccess.DBError.throwSqlException(DBError.java:134)\nat oracle.jdbc.ttc7.TTIoer.processError(TTIoer.java:289)\nat oracle.jdbc.ttc7.Oall7.receive(Oall7.java:589)\nat oracle.jdbc.ttc7.TTC7Protocol.doOall7(TTC7Protocol.java:1957)\nat oracle.jdbc.ttc7.TTC7Protocol.parseExecuteDescribe(TTC7Protocol.java:850)\nat oracle.jdbc.driver.OracleStatement.doExecuteQuery(OracleStatement.java:2555)\nat oracle.jdbc.driver.OracleStatement.doExecuteWithTimeout(OracleStatement.java:2896)\nat oracle.jdbc.driver.OraclePreparedStatement.executeUpdate(OraclePreparedStatement.java:644)\nat oracle.jdbc.driver.OraclePreparedStatement.executeQuery(OraclePreparedStatement.java:570)\nat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.extract(ResultSetReturnImpl.java:82)\n... 22 more\n</code></pre>\n"},{"tags":["java","eclipse"],"comments":[{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":1,"creation_date":1361189798,"post_id":14935833,"comment_id":20960144,"body_markdown":"Does your comment start with `/**`?","body":"Does your comment start with <code>&#47;**</code>?"},{"owner":{"account_id":426849,"reputation":2355,"user_id":808298,"accept_rate":52,"display_name":"mooonli"},"score":1,"creation_date":1361189850,"post_id":14935833,"comment_id":20960176,"body_markdown":"could you post an example of the javadoc you entered and a printscreen of the corresponding checkstyle settings you made?","body":"could you post an example of the javadoc you entered and a printscreen of the corresponding checkstyle settings you made?"},{"owner":{"account_id":2084662,"reputation":3205,"user_id":1855889,"accept_rate":40,"display_name":"Monty"},"score":0,"creation_date":1361190819,"post_id":14935833,"comment_id":20960679,"body_markdown":"these comments only java docs comments.","body":"these comments only java docs comments."}],"answers":[{"tags":[],"owner":{"account_id":1005212,"reputation":28558,"user_id":1019167,"accept_rate":92,"display_name":"AlexWien"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1361189683,"creation_date":1361189683,"answer_id":14936063,"question_id":14935833,"body_markdown":"You get the warning because the javadoc comments are missing:\r\nExample\r\n\r\n    /**\r\n     * Gets the distance between tw points.\r\n     */\r\n    double getDistance(Point a, Point b);\r\n\r\nThis comment is not complete because the params are not documented, but it is the minimal that checkstyle will accept ( in the default rules)\r\n\r\nSame has to be done for class, sometimes for fields, too.\r\n\r\nYou can enable and disable specific checkstyle rules, but first try to write your code sucht that the default rules (sun checks) do not deliver warnings.","title":"code review in check style in eclipse","body":"<p>You get the warning because the javadoc comments are missing:\nExample</p>\n\n<pre><code>/**\n * Gets the distance between tw points.\n */\ndouble getDistance(Point a, Point b);\n</code></pre>\n\n<p>This comment is not complete because the params are not documented, but it is the minimal that checkstyle will accept ( in the default rules)</p>\n\n<p>Same has to be done for class, sometimes for fields, too.</p>\n\n<p>You can enable and disable specific checkstyle rules, but first try to write your code sucht that the default rules (sun checks) do not deliver warnings.</p>\n"},{"tags":[],"owner":{"account_id":14858440,"reputation":456,"user_id":10730157,"display_name":"aqteifan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1579284143,"creation_date":1579284143,"answer_id":59792708,"question_id":14935833,"body_markdown":"You need a comment above your class as well.","title":"code review in check style in eclipse","body":"<p>You need a comment above your class as well.</p>\n"}],"owner":{"account_id":2084662,"reputation":3205,"user_id":1855889,"accept_rate":40,"display_name":"Monty"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20492,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1696730440,"creation_date":1361188921,"question_id":14935833,"body_markdown":"I am reviewing my code with **check style** . this is waste plugin in this ide.\r\n\r\nI don&#39;t know why my code always show `missing javadoc comment.`\r\n\r\neven i am giving the proper comments.\r\n\r\n\r\nplease is there any way to review the code in proper way.\r\n\r\n **can i make my own rules.**\r\n\r\n\r\n**update**\r\n\r\nevery line is showing missing javadoc ...after putting comment also\r\n\r\n    public class MyTest {\r\n    \r\n    \t/**\r\n    \t * integer Variable I\r\n    \t */\r\n    \tpublic static int I = 10;\r\n    \t\r\n    \t/**\r\n    \t * String Variable Name\r\n    \t */\r\n    \tpublic static String NAME = &quot;XYZ&quot;;\r\n    \t\r\n    \t/**\r\n    \t * Constructor\r\n    \t */\r\n    \tpublic MyTest() {\r\n    \t}\r\n    \r\n    \t/**\r\n    \t * Main method\r\n    \t * @param args\r\n    \t */\r\n    \tpublic static void main(String[] args) {\r\n    \t\t\r\n    \t\tSystem.out.print(NAME+&quot;\\n&quot;+I);\r\n    \t}\r\n    }\r\n\r\n","title":"code review in check style in eclipse","body":"<p>I am reviewing my code with <strong>check style</strong> . this is waste plugin in this ide.</p>\n\n<p>I don't know why my code always show <code>missing javadoc comment.</code></p>\n\n<p>even i am giving the proper comments.</p>\n\n<p>please is there any way to review the code in proper way.</p>\n\n<p><strong>can i make my own rules.</strong></p>\n\n<p><strong>update</strong></p>\n\n<p>every line is showing missing javadoc ...after putting comment also</p>\n\n<pre><code>public class MyTest {\n\n    /**\n     * integer Variable I\n     */\n    public static int I = 10;\n\n    /**\n     * String Variable Name\n     */\n    public static String NAME = \"XYZ\";\n\n    /**\n     * Constructor\n     */\n    public MyTest() {\n    }\n\n    /**\n     * Main method\n     * @param args\n     */\n    public static void main(String[] args) {\n\n        System.out.print(NAME+\"\\n\"+I);\n    }\n}\n</code></pre>\n"},{"tags":["java"],"answers":[{"tags":[],"owner":{"account_id":232333,"reputation":21533,"user_id":497106,"display_name":"Patashu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1358980566,"creation_date":1358980566,"answer_id":14490681,"question_id":14489733,"body_markdown":"Some other program has the clipboard open, and the code you are using throws an exception to indicate this.\r\n\r\nSo, it at first seems like you&#39;d have to busy-wait and give up if you wait for too long. But, there&#39;s a possible way around this, by setting your program to be the owner of the clipboard and re-acquiring ownership whenever you lose it (as the owner of the clipboard is notified when it loses ownership).\r\n\r\nRead the thread here for a possible solution: http://www.coderanch.com/t/377833/java/java/listen-clipboard","title":"Error &quot;Cannot Open System Clipboard&quot;, trying to set system clipboard fails/works on and off. What is the cause?","body":"<p>Some other program has the clipboard open, and the code you are using throws an exception to indicate this.</p>\n\n<p>So, it at first seems like you'd have to busy-wait and give up if you wait for too long. But, there's a possible way around this, by setting your program to be the owner of the clipboard and re-acquiring ownership whenever you lose it (as the owner of the clipboard is notified when it loses ownership).</p>\n\n<p>Read the thread here for a possible solution: <a href=\"http://www.coderanch.com/t/377833/java/java/listen-clipboard\" rel=\"nofollow\">http://www.coderanch.com/t/377833/java/java/listen-clipboard</a></p>\n"}],"owner":{"display_name":"user1311286"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":9228,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":1,"score":5,"last_activity_date":1696730440,"creation_date":1358976566,"question_id":14489733,"body_markdown":"I am writing a program, and within my program at a point I wish to watch the keyboard while my program does not have focus. I use a jar called &quot;JNativeHook&quot; and can be found here http://code.google.com/p/jnativehook/\r\n\r\nOnto my issue:\r\nThis jar works and captures each key press and release event. In my code I keep track of these, on each key press event if a &quot;v&quot; or ctrl key are pressed I set a flag for each, if both are true the user is pasting. When the user initially pastes the program increments a counter to 1. On next paste if the counter is 1 it sets the text of the system clipboard to &quot;Test Paste1&quot; increments the counter, it does this 3 times and on the third it modulus the counter by 3 and restarts. (I plan to add control so that if a certain combination is pressed the keyListener is active and trying to change the system clipboard; pressed again it turns it off) \r\n\r\nMy problem is that sometimes it does modify the clipboard and I do actually paste the right text and sometimes it does not and I get a error thrown \r\n\r\n    Exception in thread &quot;pool-1-thread-135&quot; java.lang.IllegalStateException: cannot open system clipboard\r\nSo sometimes I can open the keyboard and sometimes not. I am using notepad to do the testing. So I run my program, open notepad, copy something. Then I paste, it says it, then next paste sometimes its right sometimes not, and the next (2nd paste), and the next (3rd). Then if I get all the way through that it starts over. \r\n\r\nWhy can I not access the clipboard at times, how could I write this so I am guaranteed the text gets to the clipboard? \r\n\r\nI figure put the line in a while loop and while there is no exception continue. But I could get into an infinite loop if the clipboard is &quot;in-accessible&quot; for x time. \r\n\r\n\r\n\r\nContinued:\r\n\r\n    http://stackoverflow.com/questions/14492472/cannot-gain-control-over-clipboard-even-with-controlling-logic\r\n\r\n","title":"Error &quot;Cannot Open System Clipboard&quot;, trying to set system clipboard fails/works on and off. What is the cause?","body":"<p>I am writing a program, and within my program at a point I wish to watch the keyboard while my program does not have focus. I use a jar called \"JNativeHook\" and can be found here <a href=\"http://code.google.com/p/jnativehook/\" rel=\"nofollow\">http://code.google.com/p/jnativehook/</a></p>\n\n<p>Onto my issue:\nThis jar works and captures each key press and release event. In my code I keep track of these, on each key press event if a \"v\" or ctrl key are pressed I set a flag for each, if both are true the user is pasting. When the user initially pastes the program increments a counter to 1. On next paste if the counter is 1 it sets the text of the system clipboard to \"Test Paste1\" increments the counter, it does this 3 times and on the third it modulus the counter by 3 and restarts. (I plan to add control so that if a certain combination is pressed the keyListener is active and trying to change the system clipboard; pressed again it turns it off) </p>\n\n<p>My problem is that sometimes it does modify the clipboard and I do actually paste the right text and sometimes it does not and I get a error thrown </p>\n\n<pre><code>Exception in thread \"pool-1-thread-135\" java.lang.IllegalStateException: cannot open system clipboard\n</code></pre>\n\n<p>So sometimes I can open the keyboard and sometimes not. I am using notepad to do the testing. So I run my program, open notepad, copy something. Then I paste, it says it, then next paste sometimes its right sometimes not, and the next (2nd paste), and the next (3rd). Then if I get all the way through that it starts over. </p>\n\n<p>Why can I not access the clipboard at times, how could I write this so I am guaranteed the text gets to the clipboard? </p>\n\n<p>I figure put the line in a while loop and while there is no exception continue. But I could get into an infinite loop if the clipboard is \"in-accessible\" for x time. </p>\n\n<p>Continued:</p>\n\n<pre><code>http://stackoverflow.com/questions/14492472/cannot-gain-control-over-clipboard-even-with-controlling-logic\n</code></pre>\n"},{"tags":["java","spring","keycloak"],"comments":[{"owner":{"account_id":3509196,"reputation":16483,"user_id":2933977,"display_name":"stdunbar"},"score":0,"creation_date":1696458501,"post_id":77233300,"comment_id":136157341,"body_markdown":"There really isn&#39;t enough information here to answer properly but normally you validate the `iss` field in a JWT with a previously known issuer.  Keycloak, by default, has an issuer that looks like `https://hostname/realms/realmName`.  Do you know how you are validating the token?  Is this using something like Quarkus or Spring or something else?","body":"There really isn&#39;t enough information here to answer properly but normally you validate the <code>iss</code> field in a JWT with a previously known issuer.  Keycloak, by default, has an issuer that looks like <code>https:&#47;&#47;hostname&#47;realms&#47;realmName</code>.  Do you know how you are validating the token?  Is this using something like Quarkus or Spring or something else?"},{"owner":{"account_id":5410764,"reputation":448,"user_id":4307638,"accept_rate":67,"display_name":"lemario"},"score":0,"creation_date":1696458854,"post_id":77233300,"comment_id":136157382,"body_markdown":"Yeah sorry. Its just ussing spring.","body":"Yeah sorry. Its just ussing spring."},{"owner":{"account_id":3509196,"reputation":16483,"user_id":2933977,"display_name":"stdunbar"},"score":0,"creation_date":1696459048,"post_id":77233300,"comment_id":136157409,"body_markdown":"Do you have the &quot;well known&quot; URL setup correctly?  Check the docs [here](https://docs.spring.io/spring-security/reference/servlet/oauth2/resource-server/jwt.html) for the issuer information.","body":"Do you have the &quot;well known&quot; URL setup correctly?  Check the docs <a href=\"https://docs.spring.io/spring-security/reference/servlet/oauth2/resource-server/jwt.html\" rel=\"nofollow noreferrer\">here</a> for the issuer information."},{"owner":{"account_id":5410764,"reputation":448,"user_id":4307638,"accept_rate":67,"display_name":"lemario"},"score":0,"creation_date":1696459541,"post_id":77233300,"comment_id":136157461,"body_markdown":"@stdunbar I updated the question with my jwk-set-uri var that I am using.","body":"@stdunbar I updated the question with my jwk-set-uri var that I am using."},{"owner":{"account_id":3509196,"reputation":16483,"user_id":2933977,"display_name":"stdunbar"},"score":0,"creation_date":1696459808,"post_id":77233300,"comment_id":136157487,"body_markdown":"What version of Keycloak are you using?  The URL with &quot;/auth&quot; in it was removed in Keycloak 18.  It&#39;s the same URL but without the &quot;/auth&quot; part.","body":"What version of Keycloak are you using?  The URL with &quot;/auth&quot; in it was removed in Keycloak 18.  It&#39;s the same URL but without the &quot;/auth&quot; part."},{"owner":{"account_id":5410764,"reputation":448,"user_id":4307638,"accept_rate":67,"display_name":"lemario"},"score":0,"creation_date":1696459971,"post_id":77233300,"comment_id":136157499,"body_markdown":"I dont believe it should be that...\nI am running this image: jboss/keycloak:15.0.2\n\nThis run ok locally. With the keycloak in a container and the be running locally it all works. Just when the be is in a container it breaks..","body":"I dont believe it should be that... I am running this image: jboss/keycloak:15.0.2  This run ok locally. With the keycloak in a container and the be running locally it all works. Just when the be is in a container it breaks.."},{"owner":{"account_id":5410764,"reputation":448,"user_id":4307638,"accept_rate":67,"display_name":"lemario"},"score":0,"creation_date":1696465349,"post_id":77233300,"comment_id":136157948,"body_markdown":"@stdunbar I  have found a solution but it feels super hacky. Care to give your opinion?","body":"@stdunbar I  have found a solution but it feels super hacky. Care to give your opinion?"}],"answers":[{"tags":[],"owner":{"account_id":5410764,"reputation":448,"user_id":4307638,"accept_rate":67,"display_name":"lemario"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696730401,"creation_date":1696465305,"answer_id":77233650,"question_id":77233300,"body_markdown":"Just add a mapping to your hosts file in windows is: \r\n *C:\\Windows\\System32\\drivers\\etc\\hosts*\r\n\r\nIt should be like so: \r\n\r\n    127.0.0.1 keycloakblog\r\n\r\nkeycloakblog being your container name. \r\n\r\nThen when creating your oauth request just use this host name for it.  \r\n\r\n    http://keycloakblog:8080/auth/realms/wheelmeet/protocol/openid-connect/auth\r\n\r\nIf you use localhost, witch you still can because they are the same, keycloak will set the issuer as localhost, but if you use the name of the host you just maped the issuer will be that name. \r\n\r\nAfter that just set the Java issuer/jwt strings to the host name you chose. If you run the Java server in a container it will try to go to *keycloakblog* and that will resolve it as the container name. If you run the Java server outside the container it will try to go to *keycloakblog* and resolve it as localhost. Both will work.\r\n\r\n**OLD SOLUTION:**\r\n\r\n***Atention!** If for any reason you do use this solution keep in mind that on spring 3+ the jwt decoder is nimbus-jose and it does not decode the jwt if it has 2 claims with the same name. Previous Spring versions work fine.* \r\n\r\nOk so I found a solution. But it seems super hacky and doesn&#39;t feel at all like the right way to get it done. \r\n\r\nSo like I said the problem was that the **issuer is not the same as the one on the access token**. If the keycloak server would be on the web it would be no problem because the url would be the same, but because the keycloak server is running in a container I have to either give Java the gateway IP or the container name (if its on the same network). But then the issuer will not be the same and throw said error. \r\n\r\nThe solution is simple enough. Just create a mapper for the &quot;iss&quot; claim in the access token and put in either the gateway ip or the container name. I switched  everything back to only one network (this was how it was first) and just putted the container name. Like so: \r\n[![enter image description here][1]][1]\r\n\r\nDoes anybody know if there are any security concerns doing this? \r\nAlso would this be suitable for a production enviroment? \r\n\r\nPlease respond with a better solution if you have one! \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/C5YIE.png","title":"Keycloak InvalidBearerTokenException Invalid issuer","body":"<p>Just add a mapping to your hosts file in windows is:\n<em>C:\\Windows\\System32\\drivers\\etc\\hosts</em></p>\n<p>It should be like so:</p>\n<pre><code>127.0.0.1 keycloakblog\n</code></pre>\n<p>keycloakblog being your container name.</p>\n<p>Then when creating your oauth request just use this host name for it.</p>\n<pre><code>http://keycloakblog:8080/auth/realms/wheelmeet/protocol/openid-connect/auth\n</code></pre>\n<p>If you use localhost, witch you still can because they are the same, keycloak will set the issuer as localhost, but if you use the name of the host you just maped the issuer will be that name.</p>\n<p>After that just set the Java issuer/jwt strings to the host name you chose. If you run the Java server in a container it will try to go to <em>keycloakblog</em> and that will resolve it as the container name. If you run the Java server outside the container it will try to go to <em>keycloakblog</em> and resolve it as localhost. Both will work.</p>\n<p><strong>OLD SOLUTION:</strong></p>\n<p><em><strong>Atention!</strong> If for any reason you do use this solution keep in mind that on spring 3+ the jwt decoder is nimbus-jose and it does not decode the jwt if it has 2 claims with the same name. Previous Spring versions work fine.</em></p>\n<p>Ok so I found a solution. But it seems super hacky and doesn't feel at all like the right way to get it done.</p>\n<p>So like I said the problem was that the <strong>issuer is not the same as the one on the access token</strong>. If the keycloak server would be on the web it would be no problem because the url would be the same, but because the keycloak server is running in a container I have to either give Java the gateway IP or the container name (if its on the same network). But then the issuer will not be the same and throw said error.</p>\n<p>The solution is simple enough. Just create a mapper for the &quot;iss&quot; claim in the access token and put in either the gateway ip or the container name. I switched  everything back to only one network (this was how it was first) and just putted the container name. Like so:\n<a href=\"https://i.stack.imgur.com/C5YIE.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/C5YIE.png\" alt=\"enter image description here\" /></a></p>\n<p>Does anybody know if there are any security concerns doing this?\nAlso would this be suitable for a production enviroment?</p>\n<p>Please respond with a better solution if you have one!</p>\n"},{"tags":[],"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696546506,"creation_date":1696530174,"answer_id":77239685,"question_id":77233300,"body_markdown":"What you want is probably setting [Keycloak `hostname` configuration properties][1] with DNS entry that is reachable by all actors: OAuth2 client, OAuth2 resource server and user browser. If you don&#39;t have one yet, then maybe you should [configure docker][2] for that.\r\n\r\nAlso you don&#39;t have to configure Spring Boot `issuer-uri` if you provide a `jwk-set-uri`: only the JWKS endpoint is required to fetch the public key used to validate tokens. Issuer URI serves two purposes:\r\n- adds an issuer validator to JWT decoders (if not provided, the `iss` claim is not checked, which would remove your error)\r\n- if the JWKS endpoint is not explicitly configured, give the opportunity to find the OpenID configuration by trying a few &quot;well-known&quot; paths, and get the JWKS endpoint from this conf.\r\n\r\nSo if your Keycloak conf is OK, only one of `jwk-set-uri` and `issuer-uri` is required (you have to provide the two only when the host in `iss` claim is not reachable by clients and resource servers **and** you want `iss` claim validator in JWT decoder).\r\n\r\n`issuer-uri` is generally preferred because it adds the check on `iss` claim (but you already know that the token was signed with the right private key, so ...)\r\n\r\n\r\n  [1]: https://www.keycloak.org/server/hostname\r\n  [2]: https://docs.docker.com/network/","title":"Keycloak InvalidBearerTokenException Invalid issuer","body":"<p>What you want is probably setting <a href=\"https://www.keycloak.org/server/hostname\" rel=\"nofollow noreferrer\">Keycloak <code>hostname</code> configuration properties</a> with DNS entry that is reachable by all actors: OAuth2 client, OAuth2 resource server and user browser. If you don't have one yet, then maybe you should <a href=\"https://docs.docker.com/network/\" rel=\"nofollow noreferrer\">configure docker</a> for that.</p>\n<p>Also you don't have to configure Spring Boot <code>issuer-uri</code> if you provide a <code>jwk-set-uri</code>: only the JWKS endpoint is required to fetch the public key used to validate tokens. Issuer URI serves two purposes:</p>\n<ul>\n<li>adds an issuer validator to JWT decoders (if not provided, the <code>iss</code> claim is not checked, which would remove your error)</li>\n<li>if the JWKS endpoint is not explicitly configured, give the opportunity to find the OpenID configuration by trying a few &quot;well-known&quot; paths, and get the JWKS endpoint from this conf.</li>\n</ul>\n<p>So if your Keycloak conf is OK, only one of <code>jwk-set-uri</code> and <code>issuer-uri</code> is required (you have to provide the two only when the host in <code>iss</code> claim is not reachable by clients and resource servers <strong>and</strong> you want <code>iss</code> claim validator in JWT decoder).</p>\n<p><code>issuer-uri</code> is generally preferred because it adds the check on <code>iss</code> claim (but you already know that the token was signed with the right private key, so ...)</p>\n"}],"owner":{"account_id":5410764,"reputation":448,"user_id":4307638,"accept_rate":67,"display_name":"lemario"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":151,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1696730401,"creation_date":1696457803,"question_id":77233300,"body_markdown":"I have a Java Spring backend running in a docker container and then a Keycloak also running in a separate container. Both on their own networks. \r\n\r\nWhen I try to make a request to the Java backend that is protected by the keycloak BE with OAUTH, I get this error: \r\n\r\n    InvalidBearerTokenException: Invalid issuer\r\n\r\nI am setting the location of the keycloak server in the java be as the IP of the gateway of the container. From what I understand because this gateway IP is not the same as the issuer url that is why it gives this error. \r\n\r\nI have looked at [this][1] and [this][2] questions and tried to implement some of the solutions to no avail. Maybe I am not understanding them.. \r\n\r\nI have tried to set KEYCLOAK_FRONTEND_URL on the admin dashboard to the ip of the api gateway but this then does not let me get the access token in postman has it will redirect to this ip, and break the auth flow. \r\n\r\n I have also tried setting this: \r\n\r\n      PROXY_ADDRESS_FORWARDING: &quot;true&quot;\r\n      KEYCLOAK_FRONTEND_URL: &quot;https://example.com/auth&quot;\r\nNo luck. \r\n\r\nCan someone tell me what I am doing wrong and point me in the right direction ? Please tell me if you need more information. \r\n\r\nThis is what my security filter looks like on the backend: \r\n\r\n        @Bean\r\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n        http.csrf().disable().authorizeHttpRequests(authorize -&gt; {\r\n                    try {\r\n                        authorize\r\n                                .antMatchers(HttpMethod.DELETE, &quot;/development/deleteAllUsers&quot;).permitAll()\r\n                                .mvcMatchers(HttpMethod.POST, &quot;/createUser&quot;).permitAll()\r\n                                .mvcMatchers(HttpMethod.GET,&quot;/test&quot;).permitAll()\r\n                                .anyRequest().authenticated();\r\n                    } catch (Exception e) {\r\n                        throw new RuntimeException(e);\r\n                    }\r\n                })\r\n                .oauth2ResourceServer(\r\n                        oauth2 -&gt; oauth2.authenticationManagerResolver(getJwtIssuerAuthenticationManagerResolver()));\r\n\r\n        http.headers()\r\n                .xssProtection()\r\n                .disable()\r\n                .frameOptions()\r\n                .deny()\r\n                .contentSecurityPolicy(&quot;default-src &#39;self&#39;&quot;);\r\n\r\n        return http.build();\r\n    }\r\n\r\n    @Bean(&quot;CurrentUser&quot;)\r\n    public Supplier&lt;JwtAuthenticationToken&gt; currentUser() {\r\n        return () -&gt; (JwtAuthenticationToken) SecurityContextHolder.getContext().getAuthentication();\r\n    }\r\n\r\n    private JwtIssuerAuthenticationManagerResolver getJwtIssuerAuthenticationManagerResolver() {\r\n        Map&lt;String, AuthenticationManager&gt; managers = providersProperty.getProviders()\r\n                .values()\r\n                .stream()\r\n                .collect(Collectors.toMap(p -&gt; p.getIssuerUri(),\r\n                        p -&gt; jwtProviderStrategy.getProvider(p.getKey())::authenticate));\r\n\r\n        return new JwtIssuerAuthenticationManagerResolver(managers::get);\r\n    }\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/61966384/keycloak-invalid-token-issuer\r\n  [2]: https://stackoverflow.com/questions/42342367/keycloak-behind-apache-reverse-proxy/42504805#42504805\r\n\r\n\r\n\r\nAlso I am setting this properties in application.yml \r\n\r\n \r\n\r\n     jwk-set-uri: http://${KEYCLOAK_HOST:localhost}:${KEYCLOAK_PORT:8180}/auth/realms/myrealm/protocol/openid-connect/certs\r\n     issuer-uri: http://${KEYCLOAK_HOST:localhost}:${KEYCLOAK_PORT:8180}/auth/realms/myrealm\r\n\r\n\r\nIf I run the Java backend locally it work normally. Just breaks on docker. ","title":"Keycloak InvalidBearerTokenException Invalid issuer","body":"<p>I have a Java Spring backend running in a docker container and then a Keycloak also running in a separate container. Both on their own networks.</p>\n<p>When I try to make a request to the Java backend that is protected by the keycloak BE with OAUTH, I get this error:</p>\n<pre><code>InvalidBearerTokenException: Invalid issuer\n</code></pre>\n<p>I am setting the location of the keycloak server in the java be as the IP of the gateway of the container. From what I understand because this gateway IP is not the same as the issuer url that is why it gives this error.</p>\n<p>I have looked at <a href=\"https://stackoverflow.com/questions/61966384/keycloak-invalid-token-issuer\">this</a> and <a href=\"https://stackoverflow.com/questions/42342367/keycloak-behind-apache-reverse-proxy/42504805#42504805\">this</a> questions and tried to implement some of the solutions to no avail. Maybe I am not understanding them..</p>\n<p>I have tried to set KEYCLOAK_FRONTEND_URL on the admin dashboard to the ip of the api gateway but this then does not let me get the access token in postman has it will redirect to this ip, and break the auth flow.</p>\n<p>I have also tried setting this:</p>\n<pre><code>  PROXY_ADDRESS_FORWARDING: &quot;true&quot;\n  KEYCLOAK_FRONTEND_URL: &quot;https://example.com/auth&quot;\n</code></pre>\n<p>No luck.</p>\n<p>Can someone tell me what I am doing wrong and point me in the right direction ? Please tell me if you need more information.</p>\n<p>This is what my security filter looks like on the backend:</p>\n<pre><code>    @Bean\npublic SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n    http.csrf().disable().authorizeHttpRequests(authorize -&gt; {\n                try {\n                    authorize\n                            .antMatchers(HttpMethod.DELETE, &quot;/development/deleteAllUsers&quot;).permitAll()\n                            .mvcMatchers(HttpMethod.POST, &quot;/createUser&quot;).permitAll()\n                            .mvcMatchers(HttpMethod.GET,&quot;/test&quot;).permitAll()\n                            .anyRequest().authenticated();\n                } catch (Exception e) {\n                    throw new RuntimeException(e);\n                }\n            })\n            .oauth2ResourceServer(\n                    oauth2 -&gt; oauth2.authenticationManagerResolver(getJwtIssuerAuthenticationManagerResolver()));\n\n    http.headers()\n            .xssProtection()\n            .disable()\n            .frameOptions()\n            .deny()\n            .contentSecurityPolicy(&quot;default-src 'self'&quot;);\n\n    return http.build();\n}\n\n@Bean(&quot;CurrentUser&quot;)\npublic Supplier&lt;JwtAuthenticationToken&gt; currentUser() {\n    return () -&gt; (JwtAuthenticationToken) SecurityContextHolder.getContext().getAuthentication();\n}\n\nprivate JwtIssuerAuthenticationManagerResolver getJwtIssuerAuthenticationManagerResolver() {\n    Map&lt;String, AuthenticationManager&gt; managers = providersProperty.getProviders()\n            .values()\n            .stream()\n            .collect(Collectors.toMap(p -&gt; p.getIssuerUri(),\n                    p -&gt; jwtProviderStrategy.getProvider(p.getKey())::authenticate));\n\n    return new JwtIssuerAuthenticationManagerResolver(managers::get);\n}\n</code></pre>\n<p>Also I am setting this properties in application.yml</p>\n<pre><code> jwk-set-uri: http://${KEYCLOAK_HOST:localhost}:${KEYCLOAK_PORT:8180}/auth/realms/myrealm/protocol/openid-connect/certs\n issuer-uri: http://${KEYCLOAK_HOST:localhost}:${KEYCLOAK_PORT:8180}/auth/realms/myrealm\n</code></pre>\n<p>If I run the Java backend locally it work normally. Just breaks on docker.</p>\n"},{"tags":["javascript","java","android","html","mit-scratch"],"comments":[{"owner":{"account_id":4990268,"reputation":372,"user_id":4012708,"display_name":"Heath Mitchell"},"score":1,"creation_date":1594149000,"post_id":56915310,"comment_id":111023765,"body_markdown":"This code is just CSS styling","body":"This code is just CSS styling"}],"answers":[{"tags":[],"owner":{"account_id":20512725,"reputation":51,"user_id":15054116,"display_name":"Aetinx"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1611258909,"creation_date":1611258909,"answer_id":65834849,"question_id":56915310,"body_markdown":"Just use HTMLifier. You can use it here: https://sheeptester.github.io/htmlifier/","title":"Is it possible to convert a Scratch project to an Android app?","body":"<p>Just use HTMLifier. You can use it here: <a href=\"https://sheeptester.github.io/htmlifier/\" rel=\"nofollow noreferrer\">https://sheeptester.github.io/htmlifier/</a></p>\n"},{"tags":[],"owner":{"account_id":24934295,"reputation":23,"user_id":18801066,"display_name":"Ayushman Das"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1650010364,"creation_date":1650010364,"answer_id":71881628,"question_id":56915310,"body_markdown":"No, you can&#39;t convert Scratch projects to Android apps. But if you want to create an Android app, you can perhaps use a framework like Kivy in Python.","title":"Is it possible to convert a Scratch project to an Android app?","body":"<p>No, you can't convert Scratch projects to Android apps. But if you want to create an Android app, you can perhaps use a framework like Kivy in Python.</p>\n"},{"tags":[],"owner":{"account_id":26800827,"reputation":15,"user_id":20392792,"display_name":"Best Codes"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696727997,"creation_date":1667782536,"answer_id":74340954,"question_id":56915310,"body_markdown":"&lt;h1&gt;Yes, it is absolutely possible!&lt;/h1&gt;\r\n\r\nJust go to the scratch project url, then type “fullscreen” at the end:\r\n\r\n`https://scratch.mit.edu/projects/888787589/` to `https://scratch.mit.edu/projects/888787589/fullscreen`\r\n\r\nNow go to a website like\r\nhttps://websitetoapk.com/\r\nOr [search on Google][1] for a website to APK convertor. There are plenty of awesome free online ones. (Most will require an account, though).\r\n\r\n\r\nPaste your modified Scratch project URL into the converter, then create your app!\r\n\r\nOr, you can use the outdated packager here:\r\n\r\nhttps://forkphorus.github.io/packager/\r\n\r\nOr use this:\r\n\r\nhttps://sheeptester.github.io/htmlifier/\r\n\r\nI hope this helps!\r\n\r\n\r\n\r\n  [1]: https://www.google.com/search?q=free%20online%20website%20to%20apk%20converter","title":"Is it possible to convert a Scratch project to an Android app?","body":"<h1>Yes, it is absolutely possible!</h1>\n<p>Just go to the scratch project url, then type “fullscreen” at the end:</p>\n<p><code>https://scratch.mit.edu/projects/888787589/</code> to <code>https://scratch.mit.edu/projects/888787589/fullscreen</code></p>\n<p>Now go to a website like\n<a href=\"https://websitetoapk.com/\" rel=\"nofollow noreferrer\">https://websitetoapk.com/</a>\nOr <a href=\"https://www.google.com/search?q=free%20online%20website%20to%20apk%20converter\" rel=\"nofollow noreferrer\">search on Google</a> for a website to APK convertor. There are plenty of awesome free online ones. (Most will require an account, though).</p>\n<p>Paste your modified Scratch project URL into the converter, then create your app!</p>\n<p>Or, you can use the outdated packager here:</p>\n<p><a href=\"https://forkphorus.github.io/packager/\" rel=\"nofollow noreferrer\">https://forkphorus.github.io/packager/</a></p>\n<p>Or use this:</p>\n<p><a href=\"https://sheeptester.github.io/htmlifier/\" rel=\"nofollow noreferrer\">https://sheeptester.github.io/htmlifier/</a></p>\n<p>I hope this helps!</p>\n"}],"owner":{"display_name":"user11747945"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5497,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":3,"score":5,"last_activity_date":1696727997,"creation_date":1562425799,"question_id":56915310,"body_markdown":"For those of you who don&#39;t know, Scratch (**scratch.mit.edu**) is a programming language based around connecting &#39;blocks&#39; of code in order to create a project.\r\n\r\nI have tried using a Scratch to HTML converter (**forkphorus.github.io**) in order to convert my Scratch code into HTML in order to see if the HTML code could be ported to Android. The Scratch converter has options to port all of the code (including the Scratch engine) into a single file that is playable on internet browsers. After converting the code to HTML, I followed the next step of the tutorial to pull the source code of the **forkphorus** (Scratch to HTML) and use **Adobe PhoneGap** in order to convert the code into an .apk file. Once I tried to install the .apk file, however, it was stuck on the loading screen.\r\n\r\nI have a feeling that it is possible to convert Scratch code into an Android app but I just don&#39;t know how. If anyone has any suggestions, I would be grateful...\r\n\r\nProject I am trying to convert: **Bounce 1.3.1**\r\n\r\nSnippet of Scratch project code in HTML, if it helps:\r\n\r\n    &lt;head&gt;\r\n    &lt;meta charset=&quot;utf-8&quot;&gt;\r\n    &lt;style&gt;\r\n        .forkphorus-root {\r\n      position: relative;\r\n      font-family: sans-serif;\r\n      width: 480px;\r\n      height: 360px;\r\n      font-size: 10px;\r\n      background-color: #fff;\r\n      color: black;\r\n      overflow: hidden;\r\n      user-select: none;\r\n    }\r\n    \r\n    .forkphorus-root &gt; * {\r\n      position: absolute;\r\n      left: 0;\r\n      top: 0;\r\n      transform: translateZ(0);\r\n      width: 100%;\r\n      height: 100%;\r\n    }","title":"Is it possible to convert a Scratch project to an Android app?","body":"<p>For those of you who don't know, Scratch (<strong>scratch.mit.edu</strong>) is a programming language based around connecting 'blocks' of code in order to create a project.</p>\n\n<p>I have tried using a Scratch to HTML converter (<strong>forkphorus.github.io</strong>) in order to convert my Scratch code into HTML in order to see if the HTML code could be ported to Android. The Scratch converter has options to port all of the code (including the Scratch engine) into a single file that is playable on internet browsers. After converting the code to HTML, I followed the next step of the tutorial to pull the source code of the <strong>forkphorus</strong> (Scratch to HTML) and use <strong>Adobe PhoneGap</strong> in order to convert the code into an .apk file. Once I tried to install the .apk file, however, it was stuck on the loading screen.</p>\n\n<p>I have a feeling that it is possible to convert Scratch code into an Android app but I just don't know how. If anyone has any suggestions, I would be grateful...</p>\n\n<p>Project I am trying to convert: <strong>Bounce 1.3.1</strong></p>\n\n<p>Snippet of Scratch project code in HTML, if it helps:</p>\n\n<pre><code>&lt;head&gt;\n&lt;meta charset=\"utf-8\"&gt;\n&lt;style&gt;\n    .forkphorus-root {\n  position: relative;\n  font-family: sans-serif;\n  width: 480px;\n  height: 360px;\n  font-size: 10px;\n  background-color: #fff;\n  color: black;\n  overflow: hidden;\n  user-select: none;\n}\n\n.forkphorus-root &gt; * {\n  position: absolute;\n  left: 0;\n  top: 0;\n  transform: translateZ(0);\n  width: 100%;\n  height: 100%;\n}\n</code></pre>\n"},{"tags":["javascript","java","c#","protocol-buffers"],"answers":[{"tags":[],"owner":{"account_id":267411,"reputation":28959,"user_id":555576,"accept_rate":50,"display_name":"Konstantin Komissarchik"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1295042565,"creation_date":1295042565,"answer_id":4696457,"question_id":4696391,"body_markdown":"I would recommend using webservices. The WSDL language defines objects and messages of your protocol in abstract form. Most modern languages like Java and C# have tools for converting WSDL to native types and libraries for handling I/O.","title":"java server &lt;-&gt; c# + javascript + java + * clients","body":"<p>I would recommend using webservices. The WSDL language defines objects and messages of your protocol in abstract form. Most modern languages like Java and C# have tools for converting WSDL to native types and libraries for handling I/O.</p>\n"},{"tags":[],"owner":{"account_id":278218,"reputation":25841,"user_id":572680,"display_name":"Martin Jespersen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1295043425,"creation_date":1295043425,"answer_id":4696581,"question_id":4696391,"body_markdown":"For the last two years i have been involved in building a  similar system: backend for our project is c#, java and bunch of other languages, frontend is phone clients for ios, android, symbian, all the common webbrowsers and even windows desktop apps.\r\n\r\nFor all these services we use JSON, since it seems to be most widely supported format across all languages and platforms, it decodes fairly fast on the clients compared to xml based solution (esp. webbrowsers/javascript) and it has a pretty low overhead that compresses extremely well which is great for clients that lack bandwidth.\r\n\r\n","title":"java server &lt;-&gt; c# + javascript + java + * clients","body":"<p>For the last two years i have been involved in building a  similar system: backend for our project is c#, java and bunch of other languages, frontend is phone clients for ios, android, symbian, all the common webbrowsers and even windows desktop apps.</p>\n\n<p>For all these services we use JSON, since it seems to be most widely supported format across all languages and platforms, it decodes fairly fast on the clients compared to xml based solution (esp. webbrowsers/javascript) and it has a pretty low overhead that compresses extremely well which is great for clients that lack bandwidth.</p>\n"}],"owner":{"account_id":695899,"reputation":7,"user_id":576261,"display_name":"Pauli"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":434,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"closed_date":1697040025,"answer_count":2,"score":-1,"last_activity_date":1696727857,"creation_date":1295042077,"question_id":4696391,"body_markdown":"*What &quot;technology&quot; would you suggest to exchange some kind of messages between a Java server and several clients written in C#, Javascript and Java?*\r\n\r\n--- \r\n\r\nThe background story:\r\n\r\nIn our current project we&#39;re trying to build a generic UI backend in Java (running on the server) which is then &quot;bridged&quot; into several UI frontends by means of different UI adaptors (running on the client, the server, or both). While our server technology will always be Java, there will be C# (Silverlight), JavaScript and Java clients. Maybe even more in the future (different Smartphones, Tablets). \r\n\r\nThe UI backend and UI frontends communicate through a bunch of more or less simple messages (mostly name/value-pairs) each of which encapsulates a specific property/state/data change on the client or server respectively. Within a single request cycle, several such simple messages are aggregated into one big message which is then passed from backend to frontend or vice versa. At the moment sending and receiving messages is done at a single entry point on the client as well as on the server. So there are no server methods exposed as WebService etc. - simply because this would most definitely be to slow in our case.\r\n\r\nOur current prototype consists solely of a Java server, a Java Desktop Client (Swing) and a Java Web Client (Vaadin). The message exchanged between backend and frontend is effectively a list of POJOs (each representing a specific &quot;change&quot;) serialized/deserialized to/from XML. So far, so good.\r\n\r\nNow C# and Javascript come to the table. Since we want to work with some kind of object in each technology, we thought it would be a good idea to specify the messages/changes/pojos in some kind of abstract language and then generate objects for each target language. At some point these objects could then be serialized/deserialized and sent over the wire (probably via http/s). For this purpose we thought of Google&#39;s protocol buffers or Thrift. What do you think?\r\n\r\nFor the moment our synchronous request-response-cycle is enough but we will need asynchronous request-response or server-push respectively pretty soon. That&#39;s why we thought of using something like ActiveMQ straight away. What do you think? Too much? If not, how can we accomplish the object generation mentioned above (xsd, jaxb, ? for js)? Are there better ways? I&#39;ve never used ActiveMQ but according to the website it should be possible with Java, C# (Spring.NET) and somehow with Javascript (STOMP) too. However, this seems pretty complex to me...\r\n\r\nAny tips, hints, experiences or comments about this or related topics would be really helpful.\r\n\r\nThank you in advance.","title":"java server &lt;-&gt; c# + javascript + java + * clients","body":"<p><em>What \"technology\" would you suggest to exchange some kind of messages between a Java server and several clients written in C#, Javascript and Java?</em></p>\n\n<hr>\n\n<p>The background story:</p>\n\n<p>In our current project we're trying to build a generic UI backend in Java (running on the server) which is then \"bridged\" into several UI frontends by means of different UI adaptors (running on the client, the server, or both). While our server technology will always be Java, there will be C# (Silverlight), JavaScript and Java clients. Maybe even more in the future (different Smartphones, Tablets). </p>\n\n<p>The UI backend and UI frontends communicate through a bunch of more or less simple messages (mostly name/value-pairs) each of which encapsulates a specific property/state/data change on the client or server respectively. Within a single request cycle, several such simple messages are aggregated into one big message which is then passed from backend to frontend or vice versa. At the moment sending and receiving messages is done at a single entry point on the client as well as on the server. So there are no server methods exposed as WebService etc. - simply because this would most definitely be to slow in our case.</p>\n\n<p>Our current prototype consists solely of a Java server, a Java Desktop Client (Swing) and a Java Web Client (Vaadin). The message exchanged between backend and frontend is effectively a list of POJOs (each representing a specific \"change\") serialized/deserialized to/from XML. So far, so good.</p>\n\n<p>Now C# and Javascript come to the table. Since we want to work with some kind of object in each technology, we thought it would be a good idea to specify the messages/changes/pojos in some kind of abstract language and then generate objects for each target language. At some point these objects could then be serialized/deserialized and sent over the wire (probably via http/s). For this purpose we thought of Google's protocol buffers or Thrift. What do you think?</p>\n\n<p>For the moment our synchronous request-response-cycle is enough but we will need asynchronous request-response or server-push respectively pretty soon. That's why we thought of using something like ActiveMQ straight away. What do you think? Too much? If not, how can we accomplish the object generation mentioned above (xsd, jaxb, ? for js)? Are there better ways? I've never used ActiveMQ but according to the website it should be possible with Java, C# (Spring.NET) and somehow with Javascript (STOMP) too. However, this seems pretty complex to me...</p>\n\n<p>Any tips, hints, experiences or comments about this or related topics would be really helpful.</p>\n\n<p>Thank you in advance.</p>\n"},{"tags":["c#","java","jms","activemq"],"comments":[{"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":0,"creation_date":1296995119,"post_id":4913227,"comment_id":5472313,"body_markdown":"ActiveMQ was written in Java so it has better support for Java.  Perhaps you are looking for a messaging service which was written for .NET?","body":"ActiveMQ was written in Java so it has better support for Java.  Perhaps you are looking for a messaging service which was written for .NET?"},{"owner":{"account_id":118921,"reputation":37314,"user_id":310291,"accept_rate":74,"display_name":"user310291"},"score":0,"creation_date":1296995169,"post_id":4913227,"comment_id":5472317,"body_markdown":"My projects can be in both world that&#39;s why I was looking at it :)","body":"My projects can be in both world that&#39;s why I was looking at it :)"},{"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":0,"creation_date":1296995789,"post_id":4913227,"comment_id":5472393,"body_markdown":"I suggest you use the broker from the Java side and use the clients from Java/C# as I believe this is how it was designed.","body":"I suggest you use the broker from the Java side and use the clients from Java/C# as I believe this is how it was designed."}],"answers":[{"tags":[],"owner":{"account_id":116458,"reputation":4101,"user_id":305364,"display_name":"Hiram Chirino"},"down_vote_count":0,"up_vote_count":10,"is_accepted":true,"score":10,"last_activity_date":1297338243,"creation_date":1297338243,"answer_id":4956657,"question_id":4913227,"body_markdown":"ActiveMQ .NET clients support all the features that Java clients enjoy.  It even comes with WCF integration! About the only tricky feature that Java clients can use which would be tricky to get working on .NET is that Java client can [boot up a ActiveMQ server in the same process as the client][1].  The need to do that is not very common.  If you really need to do it, you might want to try running the ActiveMQ server in [IKVM][2].  \r\n\r\n\r\n  [1]: http://activemq.apache.org/how-do-i-embed-a-broker-inside-a-connection.html\r\n  [2]: http://www.ikvm.net/","title":"Why Apache ActiveMQ isn’t good for .NET developers?","body":"<p>ActiveMQ .NET clients support all the features that Java clients enjoy.  It even comes with WCF integration! About the only tricky feature that Java clients can use which would be tricky to get working on .NET is that Java client can <a href=\"http://activemq.apache.org/how-do-i-embed-a-broker-inside-a-connection.html\" rel=\"noreferrer\">boot up a ActiveMQ server in the same process as the client</a>.  The need to do that is not very common.  If you really need to do it, you might want to try running the ActiveMQ server in <a href=\"http://www.ikvm.net/\" rel=\"noreferrer\">IKVM</a>.  </p>\n"}],"owner":{"account_id":118921,"reputation":37314,"user_id":310291,"accept_rate":74,"display_name":"user310291"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9824,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"closed_date":1476368621,"accepted_answer_id":4956657,"answer_count":1,"score":1,"last_activity_date":1696727470,"creation_date":1296994865,"question_id":4913227,"body_markdown":"According to [this article][1] even though Apache ActiveMQ supports .NET, this feature is limited only to basic client operations. Apache ActiveMQ does not give access to manipulate ActiveMQ broker, persistent store or transports.\r\n\r\nI don&#39;t really understand what prevents Apache ActiveMQ to present same features for .NET client as for Java client: is it because they &quot;forget&quot;, they don&#39;t want, they can&#39;t but could in the future?\r\n\r\n\r\n  [1]: http://blog.goyello.com/2009/09/07/why-apache-activemq-isnt-good-for-net-developers/","title":"Why Apache ActiveMQ isn’t good for .NET developers?","body":"<p>According to <a href=\"http://blog.goyello.com/2009/09/07/why-apache-activemq-isnt-good-for-net-developers/\" rel=\"nofollow noreferrer\">this article</a> even though Apache ActiveMQ supports .NET, this feature is limited only to basic client operations. Apache ActiveMQ does not give access to manipulate ActiveMQ broker, persistent store or transports.</p>\n<p>I don't really understand what prevents Apache ActiveMQ to present same features for .NET client as for Java client: is it because they &quot;forget&quot;, they don't want, they can't but could in the future?</p>\n"},{"tags":["java","swing","jbutton"],"answers":[{"tags":[],"owner":{"account_id":17069028,"reputation":94,"user_id":12350325,"display_name":"bahman karami"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1696671356,"creation_date":1696666235,"answer_id":77248949,"question_id":77248656,"body_markdown":"The reason why your code does not work as expected is because you are missing two important steps after removing all the components from the panel. You need to call `panel.revalidate()` and `panel.repaint()` to update the panel&#39;s layout and appearance. Otherwise, the changes will not be reflected on the screen. You can fix your code:\r\n\r\n    public void Init(){\r\n        JPanel panel=new JPanel();\r\n        JButton bt=new JButton(&quot;按钮&quot;);\r\n        JCheckBox checkBox1=new JCheckBox(&quot;aaaaa&quot;);\r\n        JCheckBox checkBox2=new JCheckBox(&quot;bbbbb&quot;);\r\n        JCheckBox checkBox3=new JCheckBox(&quot;ccccc&quot;);\r\n\r\n        bt.addActionListener(new ActionListener() {\r\n            @Override\r\n            public void actionPerformed(ActionEvent e) {\r\n                panel.removeAll(); // remove all components from the panel\r\n                panel.revalidate(); // update the panel&#39;s layout\r\n                panel.repaint(); // repaint the panel\r\n            }\r\n        });\r\n\r\n        panel.add(bt);\r\n        panel.add(checkBox1);\r\n        panel.add(checkBox2);\r\n        panel.add(checkBox3);\r\n\r\n        frame.add(panel);\r\n    }\r\n","title":"Click bt, there is no response, the button has been clicked","body":"<p>The reason why your code does not work as expected is because you are missing two important steps after removing all the components from the panel. You need to call <code>panel.revalidate()</code> and <code>panel.repaint()</code> to update the panel's layout and appearance. Otherwise, the changes will not be reflected on the screen. You can fix your code:</p>\n<pre><code>public void Init(){\n    JPanel panel=new JPanel();\n    JButton bt=new JButton(&quot;按钮&quot;);\n    JCheckBox checkBox1=new JCheckBox(&quot;aaaaa&quot;);\n    JCheckBox checkBox2=new JCheckBox(&quot;bbbbb&quot;);\n    JCheckBox checkBox3=new JCheckBox(&quot;ccccc&quot;);\n\n    bt.addActionListener(new ActionListener() {\n        @Override\n        public void actionPerformed(ActionEvent e) {\n            panel.removeAll(); // remove all components from the panel\n            panel.revalidate(); // update the panel's layout\n            panel.repaint(); // repaint the panel\n        }\n    });\n\n    panel.add(bt);\n    panel.add(checkBox1);\n    panel.add(checkBox2);\n    panel.add(checkBox3);\n\n    frame.add(panel);\n}\n</code></pre>\n"}],"owner":{"account_id":24515289,"reputation":11,"user_id":18429148,"display_name":"Zhanhuo0"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":49,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1696727455,"creation_date":1696660521,"question_id":77248656,"body_markdown":"```java\r\npublic void Init(){\r\n    JPanel panel=new JPanel();\r\n    JButton bt=new JButton(&quot;按钮&quot;);\r\n    JCheckBox checkBox1=new JCheckBox(&quot;aaaaa&quot;);\r\n    JCheckBox checkBox2=new JCheckBox(&quot;bbbbb&quot;);\r\n    JCheckBox checkBox3=new JCheckBox(&quot;ccccc&quot;);\r\n\r\n    JCheckBox checkBox4=new JCheckBox(&quot;ddddd&quot;);\r\n    JCheckBox checkBox5=new JCheckBox(&quot;eeeee&quot;);\r\n\r\n    bt.addActionListener(new ActionListener() {\r\n        @Override\r\n        public void actionPerformed(ActionEvent e) {\r\n            panel.removeAll();\r\n            panel.add(checkBox4);\r\n            panel.add(checkBox5);\r\n            panel.repaint();\r\n        }\r\n    });\r\n\r\n    panel.add(bt);\r\n    panel.add(checkBox1);\r\n    panel.add(checkBox2);\r\n    panel.add(checkBox3);\r\n\r\n    frame.add(panel);\r\n}\r\n```\r\nWhen I click `bt` there is no response, the button has been clicked.\r\n\r\nI hope to be able to perform the operations in `actionPerformed` after clicking `bt`.","title":"Click bt, there is no response, the button has been clicked","body":"<pre class=\"lang-java prettyprint-override\"><code>public void Init(){\n    JPanel panel=new JPanel();\n    JButton bt=new JButton(&quot;按钮&quot;);\n    JCheckBox checkBox1=new JCheckBox(&quot;aaaaa&quot;);\n    JCheckBox checkBox2=new JCheckBox(&quot;bbbbb&quot;);\n    JCheckBox checkBox3=new JCheckBox(&quot;ccccc&quot;);\n\n    JCheckBox checkBox4=new JCheckBox(&quot;ddddd&quot;);\n    JCheckBox checkBox5=new JCheckBox(&quot;eeeee&quot;);\n\n    bt.addActionListener(new ActionListener() {\n        @Override\n        public void actionPerformed(ActionEvent e) {\n            panel.removeAll();\n            panel.add(checkBox4);\n            panel.add(checkBox5);\n            panel.repaint();\n        }\n    });\n\n    panel.add(bt);\n    panel.add(checkBox1);\n    panel.add(checkBox2);\n    panel.add(checkBox3);\n\n    frame.add(panel);\n}\n</code></pre>\n<p>When I click <code>bt</code> there is no response, the button has been clicked.</p>\n<p>I hope to be able to perform the operations in <code>actionPerformed</code> after clicking <code>bt</code>.</p>\n"},{"tags":["java","android","caching","gitlab-ci","pipeline"],"comments":[{"owner":{"account_id":16989917,"reputation":1287,"user_id":12289730,"display_name":"Origin"},"score":0,"creation_date":1696402583,"post_id":77221901,"comment_id":136146409,"body_markdown":"if there are no frequent changes. U can create a custom base image with whatever u need and use that for the job","body":"if there are no frequent changes. U can create a custom base image with whatever u need and use that for the job"},{"owner":{"account_id":14832150,"reputation":317,"user_id":10711348,"display_name":"Josip Maričević"},"score":0,"creation_date":1696489469,"post_id":77221901,"comment_id":136159943,"body_markdown":"That would be great, but I don&#39;t have access to the server where GitLab and GitLab-runners are running.","body":"That would be great, but I don&#39;t have access to the server where GitLab and GitLab-runners are running."},{"owner":{"account_id":16989917,"reputation":1287,"user_id":12289730,"display_name":"Origin"},"score":0,"creation_date":1696581896,"post_id":77221901,"comment_id":136174379,"body_markdown":"u can push a image to dockerhub and use it from there","body":"u can push a image to dockerhub and use it from there"},{"owner":{"account_id":14832150,"reputation":317,"user_id":10711348,"display_name":"Josip Maričević"},"score":0,"creation_date":1696835019,"post_id":77221901,"comment_id":136198641,"body_markdown":"Also, during my research, I came across a statement from a GitLab developer where he says that it is not possible to cache anything outside the repository scope.","body":"Also, during my research, I came across a statement from a GitLab developer where he says that it is not possible to cache anything outside the repository scope."},{"owner":{"account_id":4243,"reputation":1301794,"user_id":6309,"accept_rate":100,"display_name":"VonC"},"score":0,"creation_date":1696835399,"post_id":77221901,"comment_id":136198714,"body_markdown":"@JosipMaričević Yes, which is why caching an image in a container registry remains the most effective way to bypass the repetitive JDK installation.","body":"@JosipMaričević Yes, which is why caching an image in a container registry remains the most effective way to bypass the repetitive JDK installation."},{"owner":{"account_id":14832150,"reputation":317,"user_id":10711348,"display_name":"Josip Maričević"},"score":0,"creation_date":1696836619,"post_id":77221901,"comment_id":136198891,"body_markdown":"Perhaps it would be even better if I had a dedicated runner just for this project, with everything necessary pre-installed on it so that I don&#39;t have to pull the docker image every time, right?","body":"Perhaps it would be even better if I had a dedicated runner just for this project, with everything necessary pre-installed on it so that I don&#39;t have to pull the docker image every time, right?"}],"answers":[{"tags":[],"owner":{"account_id":4243,"reputation":1301794,"user_id":6309,"accept_rate":100,"display_name":"VonC"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1696725106,"creation_date":1696725106,"answer_id":77251924,"question_id":77221901,"body_markdown":"To expand on the comments, the use of a custom Docker image to encapsulate the necessary environment for your jobs should be helpful.  \r\nIf you do not have direct access to the server where GitLab and GitLab runners are running, you can push a custom Docker image to a publicly accessible Docker registry like [Docker Hub](https://hub.docker.com/).\r\n\r\nCreate a `Dockerfile` with the necessary JDK installation and any other dependencies you require:\r\n```dockerfile\r\nFROM fabernovel/android:api-33-v1.7.0\r\nRUN apt-get update &amp;&amp; apt-get install -y openjdk-17-jdk\r\n```\r\nAnd build your Docker image locally:\r\n```bash\r\ndocker build -t your-username/your-image-name:your-tag .\r\n```\r\n\r\n\r\nThen push the custom docker image to Docker Hub**:\r\n```bash\r\ndocker login --username=your-username\r\ndocker push your-username/your-image-name:your-tag\r\n```\r\n\r\nModify your `.gitlab-ci.yml` file to use the custom Docker image you pushed to Docker Hub:\r\n```yaml\r\nimage: your-username/your-image-name:your-tag\r\n\r\n# Rest of your workflow\r\n```\r\n\r\nHaving a custom Docker image with the JDK pre-installed should significantly speed up your GitLab pipeline runs as it will no longer need to install the JDK in every run. ","title":"I need to find a way to cache jdk instalation in gitlab pipeline","body":"<p>To expand on the comments, the use of a custom Docker image to encapsulate the necessary environment for your jobs should be helpful.<br />\nIf you do not have direct access to the server where GitLab and GitLab runners are running, you can push a custom Docker image to a publicly accessible Docker registry like <a href=\"https://hub.docker.com/\" rel=\"nofollow noreferrer\">Docker Hub</a>.</p>\n<p>Create a <code>Dockerfile</code> with the necessary JDK installation and any other dependencies you require:</p>\n<pre><code>FROM fabernovel/android:api-33-v1.7.0\nRUN apt-get update &amp;&amp; apt-get install -y openjdk-17-jdk\n</code></pre>\n<p>And build your Docker image locally:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>docker build -t your-username/your-image-name:your-tag .\n</code></pre>\n<p>Then push the custom docker image to Docker Hub**:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>docker login --username=your-username\ndocker push your-username/your-image-name:your-tag\n</code></pre>\n<p>Modify your <code>.gitlab-ci.yml</code> file to use the custom Docker image you pushed to Docker Hub:</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>image: your-username/your-image-name:your-tag\n\n# Rest of your workflow\n</code></pre>\n<p>Having a custom Docker image with the JDK pre-installed should significantly speed up your GitLab pipeline runs as it will no longer need to install the JDK in every run.</p>\n"}],"owner":{"account_id":14832150,"reputation":317,"user_id":10711348,"display_name":"Josip Maričević"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":92,"favorite_count":0,"down_vote_count":1,"up_vote_count":3,"answer_count":1,"score":2,"last_activity_date":1696725106,"creation_date":1696332906,"question_id":77221901,"body_markdown":"I am running a GitLab pipeline for testing and building an Android app.\r\n\r\nHere is my current `gitlab-ci.yml`:\r\n\r\n    image: fabernovel/android:api-33-v1.7.0\r\n    \r\n    stages:\r\n      - test\r\n      - build\r\n      - beta\r\n    \r\n    cache:\r\n      key:\r\n        files:\r\n          - Gemfile.lock\r\n      paths:\r\n        - vendor/bundle\r\n    \r\n    before_script:\r\n      - apt-get update &amp;&amp; apt-get install -y openjdk-17-jdk\r\n      - jenv add /usr/lib/jvm/java-17-openjdk-amd64\r\n      - jenv global 17.0\r\n      - bundle check --path vendor/bundle || bundle install --path vendor/bundle --jobs $(nproc)\r\n    \r\n    test:\r\n      image: fabernovel/android:api-33-v1.7.0\r\n      tags:\r\n        - docker-ansible\r\n      stage: test\r\n      cache:\r\n        key:\r\n          files:\r\n            - gradle/wrapper/gradle-wrapper.properties\r\n        paths:\r\n          - cache/caches/\r\n          - cache/notifications/\r\n          - cache/wrapper/\r\n    \r\n      script:\r\n        - bundle exec fastlane test\r\n    \r\n    build:\r\n      image: fabernovel/android:api-33-v1.7.0\r\n      tags:\r\n        - docker-ansible\r\n      stage: build\r\n      cache:\r\n        key:\r\n          files:\r\n            - gradle/wrapper/gradle-wrapper.properties\r\n        paths:\r\n          - cache/caches/\r\n          - cache/notifications/\r\n          - cache/wrapper/\r\n      variables:\r\n        SECURE_FILES_DOWNLOAD_PATH: &#39;./&#39;\r\n      script:\r\n        - apt update -y &amp;&amp; apt install -y curl\r\n        - curl -s https://gitlab.com/gitlab-org/incubation-engineering/mobile-devops/download-secure-files/-/raw/main/installer | bash\r\n        - bundle exec fastlane build\r\n      artifacts:\r\n        paths:\r\n          - app/build/outputs/bundle/release/app-release.aab\r\n    \r\n    beta:\r\n      image: fabernovel/android:api-33-v1.7.0\r\n      tags:\r\n        - docker-ansible\r\n      stage: beta\r\n      script:\r\n        - bundle exec fastlane beta\r\n      when: manual\r\n      allow_failure: true\r\n      only:\r\n        refs:\r\n          - main\r\n\r\nCurrently, it is working fine, but is very slow because every time I run it jdk is installed for every stage again. I can&#39;t find a valid way to cache to skip that part in the next build.\r\nAlso if there is any other way to speed up or cache, suggestions are very welcome.","title":"I need to find a way to cache jdk instalation in gitlab pipeline","body":"<p>I am running a GitLab pipeline for testing and building an Android app.</p>\n<p>Here is my current <code>gitlab-ci.yml</code>:</p>\n<pre><code>image: fabernovel/android:api-33-v1.7.0\n\nstages:\n  - test\n  - build\n  - beta\n\ncache:\n  key:\n    files:\n      - Gemfile.lock\n  paths:\n    - vendor/bundle\n\nbefore_script:\n  - apt-get update &amp;&amp; apt-get install -y openjdk-17-jdk\n  - jenv add /usr/lib/jvm/java-17-openjdk-amd64\n  - jenv global 17.0\n  - bundle check --path vendor/bundle || bundle install --path vendor/bundle --jobs $(nproc)\n\ntest:\n  image: fabernovel/android:api-33-v1.7.0\n  tags:\n    - docker-ansible\n  stage: test\n  cache:\n    key:\n      files:\n        - gradle/wrapper/gradle-wrapper.properties\n    paths:\n      - cache/caches/\n      - cache/notifications/\n      - cache/wrapper/\n\n  script:\n    - bundle exec fastlane test\n\nbuild:\n  image: fabernovel/android:api-33-v1.7.0\n  tags:\n    - docker-ansible\n  stage: build\n  cache:\n    key:\n      files:\n        - gradle/wrapper/gradle-wrapper.properties\n    paths:\n      - cache/caches/\n      - cache/notifications/\n      - cache/wrapper/\n  variables:\n    SECURE_FILES_DOWNLOAD_PATH: './'\n  script:\n    - apt update -y &amp;&amp; apt install -y curl\n    - curl -s https://gitlab.com/gitlab-org/incubation-engineering/mobile-devops/download-secure-files/-/raw/main/installer | bash\n    - bundle exec fastlane build\n  artifacts:\n    paths:\n      - app/build/outputs/bundle/release/app-release.aab\n\nbeta:\n  image: fabernovel/android:api-33-v1.7.0\n  tags:\n    - docker-ansible\n  stage: beta\n  script:\n    - bundle exec fastlane beta\n  when: manual\n  allow_failure: true\n  only:\n    refs:\n      - main\n</code></pre>\n<p>Currently, it is working fine, but is very slow because every time I run it jdk is installed for every stage again. I can't find a valid way to cache to skip that part in the next build.\nAlso if there is any other way to speed up or cache, suggestions are very welcome.</p>\n"},{"tags":["java","spring","spring-boot"],"answers":[{"tags":[],"owner":{"account_id":6278449,"reputation":2408,"user_id":4880379,"display_name":"kasptom"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1696723257,"creation_date":1696722887,"answer_id":77251862,"question_id":77251633,"body_markdown":"You may have been close with using the `@EnableConfigurationProperties` annotation because Spring did not know how to map the properties from your file to the class.\r\nHave a look at the examples from [the docs](https://docs.spring.io/spring-boot/docs/current/reference/html/features.html#features.external-config.typesafe-configuration-properties.constructor-binding). Each dot implies the nesting of the properties.\r\n\r\nTo be able to do it you can change the `PasswordConfig` so that it corresponds with the password.properties structure:\r\n\r\n```java\r\n@Configuration\r\n@EnableConfigurationProperties(PasswordConfig.class)\r\n@Log4j2\r\n@Validated\r\n@ConfigurationProperties\r\n@Setter\r\n@PropertySource(&quot;classpath:password.properties&quot;)\r\npublic class PasswordConfig {\r\n\r\n    private Range length;\r\n    private Character character;\r\n\r\n    @Setter\r\n    @ToString\r\n    static class Character {\r\n        private MinBoxed digit;\r\n        private MinBoxed lowercase;\r\n        private MinBoxed uppercase;\r\n        private MinBoxed special;\r\n    }\r\n\r\n    @Setter\r\n    @ToString\r\n    static class Range {\r\n        @Min(1)\r\n        private Integer max;\r\n        @Min(1)\r\n        private Integer min;\r\n    }\r\n\r\n    @Setter\r\n    @ToString\r\n    static class MinBoxed {\r\n        @Min(1)\r\n        private Integer min;\r\n    }\r\n\r\n    @Bean\r\n    public PasswordValidator passwordValidator() throws IOException {\r\n        log.info(&quot;Password validator [LENGTH: {}-{}, NUMBERS: {}, LOWERCASE: {}, UPPERCASE: {}, SPECIAL: {}]&quot;, length.min,\r\n                length.max, character.digit.min, character.lowercase.min, character.uppercase.min, character.special.min\r\n        );\r\n\r\n        return new PasswordValidator(List.of(\r\n                new LengthRule(length.min, length.max),\r\n                new CharacterRule(EnglishCharacterData.Digit, character.digit.min),\r\n                new CharacterRule(EnglishCharacterData.LowerCase, character.lowercase.min),\r\n                new CharacterRule(EnglishCharacterData.UpperCase, character.uppercase.min),\r\n                new CharacterRule(EnglishCharacterData.Special, character.special.min),\r\n                new WhitespaceRule()\r\n        ));\r\n    }\r\n}\r\n```\r\nAdditional notes: \r\n 1. In your original snippet the `LengthRule` parameters should be flipped\r\n 2. You can use `@AllArgsConstructor` annotation istead of `@Setter`. You have to combine it with the `@ConstructorBinding` annotation. For example for the Character nested class:\r\n```java\r\n    @ConstructorBinding\r\n    @AllArgsConstructor\r\n    @ToString\r\n    static class Character {\r\n        private MinBoxed digit;\r\n        private MinBoxed lowercase;\r\n        private MinBoxed uppercase;\r\n        private MinBoxed special;\r\n    }\r\n```\r\n\r\n","title":"Spring Configuration Properties with PropertySource returning null","body":"<p>You may have been close with using the <code>@EnableConfigurationProperties</code> annotation because Spring did not know how to map the properties from your file to the class.\nHave a look at the examples from <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/features.html#features.external-config.typesafe-configuration-properties.constructor-binding\" rel=\"nofollow noreferrer\">the docs</a>. Each dot implies the nesting of the properties.</p>\n<p>To be able to do it you can change the <code>PasswordConfig</code> so that it corresponds with the password.properties structure:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\n@EnableConfigurationProperties(PasswordConfig.class)\n@Log4j2\n@Validated\n@ConfigurationProperties\n@Setter\n@PropertySource(&quot;classpath:password.properties&quot;)\npublic class PasswordConfig {\n\n    private Range length;\n    private Character character;\n\n    @Setter\n    @ToString\n    static class Character {\n        private MinBoxed digit;\n        private MinBoxed lowercase;\n        private MinBoxed uppercase;\n        private MinBoxed special;\n    }\n\n    @Setter\n    @ToString\n    static class Range {\n        @Min(1)\n        private Integer max;\n        @Min(1)\n        private Integer min;\n    }\n\n    @Setter\n    @ToString\n    static class MinBoxed {\n        @Min(1)\n        private Integer min;\n    }\n\n    @Bean\n    public PasswordValidator passwordValidator() throws IOException {\n        log.info(&quot;Password validator [LENGTH: {}-{}, NUMBERS: {}, LOWERCASE: {}, UPPERCASE: {}, SPECIAL: {}]&quot;, length.min,\n                length.max, character.digit.min, character.lowercase.min, character.uppercase.min, character.special.min\n        );\n\n        return new PasswordValidator(List.of(\n                new LengthRule(length.min, length.max),\n                new CharacterRule(EnglishCharacterData.Digit, character.digit.min),\n                new CharacterRule(EnglishCharacterData.LowerCase, character.lowercase.min),\n                new CharacterRule(EnglishCharacterData.UpperCase, character.uppercase.min),\n                new CharacterRule(EnglishCharacterData.Special, character.special.min),\n                new WhitespaceRule()\n        ));\n    }\n}\n</code></pre>\n<p>Additional notes:</p>\n<ol>\n<li>In your original snippet the <code>LengthRule</code> parameters should be flipped</li>\n<li>You can use <code>@AllArgsConstructor</code> annotation istead of <code>@Setter</code>. You have to combine it with the <code>@ConstructorBinding</code> annotation. For example for the Character nested class:</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>    @ConstructorBinding\n    @AllArgsConstructor\n    @ToString\n    static class Character {\n        private MinBoxed digit;\n        private MinBoxed lowercase;\n        private MinBoxed uppercase;\n        private MinBoxed special;\n    }\n</code></pre>\n"}],"owner":{"account_id":23987549,"reputation":50,"user_id":17974178,"display_name":"Victor Hugo Pongolino"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":96,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77251862,"answer_count":1,"score":0,"last_activity_date":1696723257,"creation_date":1696715460,"question_id":77251633,"body_markdown":"I&#39;m trying to configure a Spring Bean with a custom configuration property called `password.properties`. In order to prevent using @Valid for every field , I&#39;m using both @ConfigurationProperties (for loading the property values into fields) and @PropertySource (for loading a custom properties file)\r\n\r\nHowever, the fields are all nulls. I&#39;ve generated the setters, getters and I&#39;ve also tried generating a default no-argument constructor, as well as one with all argumets. What could be causing this problem?\r\n\r\n```\r\n@Configuration\r\n@EnableConfigurationProperties\r\n@ConfigurationPropertiesScan\r\n@PropertySource(&quot;classpath:password.properties&quot;)\r\n@ConfigurationProperties\r\n@Setter\r\n@Validated\r\n@Log4j2\r\npublic class PasswordConfig {\r\n\r\n    @Min(1)\r\n    private Integer minLength;\r\n    @Min(1)\r\n    private Integer maxLength;\r\n    @Min(1)\r\n    private Integer characterDigitMin;\r\n    @Min(1)\r\n    private Integer characterLowercaseMin;\r\n    @Min(1)\r\n    private Integer characterUppercaseMin;\r\n    @Min(1)\r\n    private Integer characterSpecialMin;\r\n\r\n    @Bean\r\n    public PasswordValidator passwordValidator() throws IOException {\r\n        log.debug(&quot;Password validator [LENGTH: {}-{}, NUMBERS: {}, LOWERCASE: {}, UPPERCASE: {}, SPECIAL: {}]&quot;, minLength,\r\n                maxLength, characterDigitMin, characterLowercaseMin, characterUppercaseMin, characterSpecialMin\r\n        );\r\n\r\n        return new PasswordValidator(List.of(\r\n                new LengthRule(minLength, maxLength),\r\n                new CharacterRule(EnglishCharacterData.Digit, characterDigitMin),\r\n                new CharacterRule(EnglishCharacterData.LowerCase, characterLowercaseMin),\r\n                new CharacterRule(EnglishCharacterData.UpperCase, characterUppercaseMin),\r\n                new CharacterRule(EnglishCharacterData.Special, characterSpecialMin),\r\n                new WhitespaceRule()\r\n        ));\r\n    }\r\n}\r\n```\r\n\r\n\r\nsrc/main/resources/password.properties\r\n```\r\nlength.max=15\r\nlength.min=5\r\ncharacter.digit.min=1\r\ncharacter.uppercase.min=1\r\ncharacter.lowercase.min=1\r\ncharacter.special.min=1\r\n```\r\n\r\n\r\nMain Spring Class\r\n```\r\n@SpringBootApplication\r\n@ConfigurationPropertiesScan\r\npublic class ReportsApplication {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tSpringApplication.run(ReportsApplication.class, args);\r\n\t}\r\n\r\n}\r\n```\r\n\r\nError Log:\r\n\r\n```\r\norg.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;passwordValidator&#39; defined in class path resource [reports/config/PasswordConfig.class]: Failed to instantiate [org.passay.PasswordValidator]: Factory method &#39;passwordValidator&#39; threw exception with message: Cannot invoke &quot;java.lang.Integer.intValue()&quot; because the return value of &quot;reports.config.PasswordConfig.getMinLength()&quot; is null\r\nCaused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.passay.PasswordValidator]: Factory method &#39;passwordValidator&#39; threw exception with message: Cannot invoke &quot;java.lang.Integer.intValue()&quot; because the return value of &quot;reports.config.PasswordConfig.getMinLength()&quot; is null\r\n\r\nCaused by: java.lang.NullPointerException: Cannot invoke &quot;java.lang.Integer.intValue()&quot; because the return value of &quot;reports.config.PasswordConfig.getMinLength()&quot; is null\r\n\tat reports.config.PasswordConfig.passwordValidator(PasswordConfig.java:52) ~[classes/:na]\r\n\tat reports.config.PasswordConfig$$SpringCGLIB$$0.CGLIB$passwordValidator$11(&lt;generated&gt;) ~[classes/:na]\r\n\tat reports.config.PasswordConfig$$SpringCGLIB$$2.invoke(&lt;generated&gt;) ~[classes/:na]\r\n\tat org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:258) ~[spring-core-6.0.12.jar:6.0.12]\r\n\tat org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:331) ~[spring-context-6.0.12.jar:6.0.12]\r\n\tat reports.config.PasswordConfig$$SpringCGLIB$$0.passwordValidator(&lt;generated&gt;) ~[classes/:na]\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343) ~[spring-aop-6.0.12.jar:6.0.12]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.0.12.jar:6.0.12]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.0.12.jar:6.0.12]\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:751) ~[spring-aop-6.0.12.jar:6.0.12]\r\n\tat org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:141) ~[spring-context-6.0.12.jar:6.0.12]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.12.jar:6.0.12]\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:751) ~[spring-aop-6.0.12.jar:6.0.12]\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:703) ~[spring-aop-6.0.12.jar:6.0.12]\r\n\tat reports.config.PasswordConfig$$SpringCGLIB$$3.passwordValidator(&lt;generated&gt;) ~[classes/:na]\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]\r\n\tat org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:139) ~[spring-beans-6.0.12.jar:6.0.12]\r\n\t... 25 common frames omitted\r\n\r\n\r\nProcess finished with exit code 0\r\n\r\n```\r\n\r\n\r\nMy Attempts:\r\n- I tried to add @NoArgsConstructor @AllArgsConstructor in the class (Failed)\r\n- I tried to add @EnableConfigurationProperties in the class (Failed)\r\n- I tried to add @ConfigurationPropertiesScan in the class (Failed)","title":"Spring Configuration Properties with PropertySource returning null","body":"<p>I'm trying to configure a Spring Bean with a custom configuration property called <code>password.properties</code>. In order to prevent using @Valid for every field , I'm using both @ConfigurationProperties (for loading the property values into fields) and @PropertySource (for loading a custom properties file)</p>\n<p>However, the fields are all nulls. I've generated the setters, getters and I've also tried generating a default no-argument constructor, as well as one with all argumets. What could be causing this problem?</p>\n<pre><code>@Configuration\n@EnableConfigurationProperties\n@ConfigurationPropertiesScan\n@PropertySource(&quot;classpath:password.properties&quot;)\n@ConfigurationProperties\n@Setter\n@Validated\n@Log4j2\npublic class PasswordConfig {\n\n    @Min(1)\n    private Integer minLength;\n    @Min(1)\n    private Integer maxLength;\n    @Min(1)\n    private Integer characterDigitMin;\n    @Min(1)\n    private Integer characterLowercaseMin;\n    @Min(1)\n    private Integer characterUppercaseMin;\n    @Min(1)\n    private Integer characterSpecialMin;\n\n    @Bean\n    public PasswordValidator passwordValidator() throws IOException {\n        log.debug(&quot;Password validator [LENGTH: {}-{}, NUMBERS: {}, LOWERCASE: {}, UPPERCASE: {}, SPECIAL: {}]&quot;, minLength,\n                maxLength, characterDigitMin, characterLowercaseMin, characterUppercaseMin, characterSpecialMin\n        );\n\n        return new PasswordValidator(List.of(\n                new LengthRule(minLength, maxLength),\n                new CharacterRule(EnglishCharacterData.Digit, characterDigitMin),\n                new CharacterRule(EnglishCharacterData.LowerCase, characterLowercaseMin),\n                new CharacterRule(EnglishCharacterData.UpperCase, characterUppercaseMin),\n                new CharacterRule(EnglishCharacterData.Special, characterSpecialMin),\n                new WhitespaceRule()\n        ));\n    }\n}\n</code></pre>\n<p>src/main/resources/password.properties</p>\n<pre><code>length.max=15\nlength.min=5\ncharacter.digit.min=1\ncharacter.uppercase.min=1\ncharacter.lowercase.min=1\ncharacter.special.min=1\n</code></pre>\n<p>Main Spring Class</p>\n<pre><code>@SpringBootApplication\n@ConfigurationPropertiesScan\npublic class ReportsApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(ReportsApplication.class, args);\n    }\n\n}\n</code></pre>\n<p>Error Log:</p>\n<pre><code>org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'passwordValidator' defined in class path resource [reports/config/PasswordConfig.class]: Failed to instantiate [org.passay.PasswordValidator]: Factory method 'passwordValidator' threw exception with message: Cannot invoke &quot;java.lang.Integer.intValue()&quot; because the return value of &quot;reports.config.PasswordConfig.getMinLength()&quot; is null\nCaused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.passay.PasswordValidator]: Factory method 'passwordValidator' threw exception with message: Cannot invoke &quot;java.lang.Integer.intValue()&quot; because the return value of &quot;reports.config.PasswordConfig.getMinLength()&quot; is null\n\nCaused by: java.lang.NullPointerException: Cannot invoke &quot;java.lang.Integer.intValue()&quot; because the return value of &quot;reports.config.PasswordConfig.getMinLength()&quot; is null\n    at reports.config.PasswordConfig.passwordValidator(PasswordConfig.java:52) ~[classes/:na]\n    at reports.config.PasswordConfig$$SpringCGLIB$$0.CGLIB$passwordValidator$11(&lt;generated&gt;) ~[classes/:na]\n    at reports.config.PasswordConfig$$SpringCGLIB$$2.invoke(&lt;generated&gt;) ~[classes/:na]\n    at org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:258) ~[spring-core-6.0.12.jar:6.0.12]\n    at org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:331) ~[spring-context-6.0.12.jar:6.0.12]\n    at reports.config.PasswordConfig$$SpringCGLIB$$0.passwordValidator(&lt;generated&gt;) ~[classes/:na]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]\n    at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343) ~[spring-aop-6.0.12.jar:6.0.12]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.0.12.jar:6.0.12]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.0.12.jar:6.0.12]\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:751) ~[spring-aop-6.0.12.jar:6.0.12]\n    at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:141) ~[spring-context-6.0.12.jar:6.0.12]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.12.jar:6.0.12]\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:751) ~[spring-aop-6.0.12.jar:6.0.12]\n    at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:703) ~[spring-aop-6.0.12.jar:6.0.12]\n    at reports.config.PasswordConfig$$SpringCGLIB$$3.passwordValidator(&lt;generated&gt;) ~[classes/:na]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]\n    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:139) ~[spring-beans-6.0.12.jar:6.0.12]\n    ... 25 common frames omitted\n\n\nProcess finished with exit code 0\n\n</code></pre>\n<p>My Attempts:</p>\n<ul>\n<li>I tried to add @NoArgsConstructor @AllArgsConstructor in the class (Failed)</li>\n<li>I tried to add @EnableConfigurationProperties in the class (Failed)</li>\n<li>I tried to add @ConfigurationPropertiesScan in the class (Failed)</li>\n</ul>\n"},{"tags":["java","swing","graphics","jpanel","graphics2d"],"answers":[{"tags":[],"owner":{"account_id":24708475,"reputation":13,"user_id":18598973,"display_name":"Das heilige D&#246;nerhuhn"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1696723079,"creation_date":1696407734,"answer_id":77227930,"question_id":77227727,"body_markdown":"Figured it out, I was creating a new CompressedColor instead of setting BaseColors Color to a new Color, which made BaseColor point to a different object locally, then globally. Repainting the JPanel just repainted it with the old, global value for BaseColor. I just didn&#39;t have a good overview of my pointers.","title":"Updating graphics in a jpanel","body":"<p>Figured it out, I was creating a new CompressedColor instead of setting BaseColors Color to a new Color, which made BaseColor point to a different object locally, then globally. Repainting the JPanel just repainted it with the old, global value for BaseColor. I just didn't have a good overview of my pointers.</p>\n"}],"owner":{"account_id":24708475,"reputation":13,"user_id":18598973,"display_name":"Das heilige D&#246;nerhuhn"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77227930,"answer_count":1,"score":0,"last_activity_date":1696723079,"creation_date":1696405901,"question_id":77227727,"body_markdown":"I am struggling with refreshing the graphics in a jpanel.\r\n\r\nI tried to make the JPanel extending class &quot;ShadeSelectPane&quot; update it&#39;s Graphics object everytime I use a JColorChooser to choose a new colour, stored in the BaseColor object, but it doesn&#39;t. Can one of you tell me why? I am calling repaint after all. Thank you in advance.\r\nTheir are two files in my code, Main.java and CompressedColor.java. Main.java extends JFrame and just serves as a entry point and storage for most of the code. CompressedColor stores a colour and some more shades of it in rgb565 and as a Color Object. I stripped the code of all the initialisation code for Swing components, which resides in Mains constructor.\r\nWhen ran, the code draws all the shades of the initial Color CompressedColor is set to, but it doesn&#39;t update the ShadeSelectPane when  changing the BaseColor Object.\r\n\r\n```\r\nThis is my Main.java file\r\n\r\n public class Main extends JFrame implements ActionListener \r\n\r\n { \r\n\r\n     CompressedColor BaseColor; \r\n\r\n     JMenuBar bar; \r\n\r\n     JMenu file; \r\n\r\n     JMenu edit; \r\n\r\n     JMenuItem save; \r\n\r\n     JMenuItem exportdata; \r\n\r\n     JMenuItem exportfunction; \r\n\r\n     JMenuItem bgcolor; \r\n\r\n     ImagePane canvas; \r\n\r\n     ShadeSelectPane shadeselector; \r\n\r\n  \r\n\r\n     \r\n     // main-Methode \r\n\r\n     public static void main(String[] args) \r\n\r\n     {                                                 \r\n\r\n         Main frame = new Main(); \r\n\r\n         frame.setVisible(true);    \r\n\r\n  \r\n\r\n     } \r\n\r\n     public void actionPerformed (ActionEvent ae){ \r\n\r\n  \r\n\r\n         if(ae.getSource() == this.bgcolor){ \r\n\r\n             BaseColor = new CompressedColor(JColorChooser.showDialog(null, &quot;Farbauswahl&quot;, null)); \r\n\r\n             BaseColor.updateShades(); \r\n\r\n             System.out.println(Integer.toHexString(BaseColor.rgb565)); \r\n\r\n             shadeselector.repaint(); \r\n\r\n         } \r\n\r\n         else if(ae.getSource() == this.save){ \r\n\r\n             System.out.println(&quot;Save was pressed!&quot;); \r\n\r\n         } \r\n\r\n         else if(ae.getSource() == this.exportdata){ \r\n\r\n             System.out.println(&quot;Export Data was pressed!&quot;); \r\n\r\n         } \r\n\r\n         else if(ae.getSource() == this.exportfunction){ \r\n\r\n             System.out.println(&quot;Export Function was pressed&quot;); \r\n\r\n         } \r\n\r\n     } \r\n\r\n } \r\n\r\n class ImagePane extends JPanel { \r\n\r\n  \r\n\r\n     @Override \r\n\r\n     public void paintComponent(Graphics g) { \r\n\r\n         super.paintComponent(g); \r\n\r\n         g.drawString(&quot;BLAH&quot;, 20, 20); \r\n\r\n         g.drawRect(200, 200, 200, 200); \r\n\r\n     } \r\n\r\n } \r\n\r\n class ShadeSelectPane extends JPanel { \r\n\r\n     CompressedColor BaseColor; \r\n\r\n     ShadeSelectPane(CompressedColor baseColor){ \r\n\r\n         super(); \r\n\r\n         BaseColor = baseColor; \r\n\r\n     } \r\n\r\n     @Override \r\n\r\n     public void paintComponent(Graphics g) { \r\n\r\n         super.paintComponent(g); \r\n\r\n         for (int i = 0; i &lt; 8; i++) { \r\n\r\n             g.setColor(BaseColor.shades[i].color); \r\n\r\n            g.fillRect(0, i*(this.getHeight()/8), this.getWidth(), i*(this.getHeight()/8)+(this.getHeight()/8));  \r\n\r\n         } \r\n\r\n  \r\n\r\n  \r\n\r\n     } \r\n\r\n } \r\n\r\n This is CompressedColor.java \r\n\r\n  \r\n\r\n import java.awt.Color; \r\n\r\n  \r\n\r\n public class CompressedColor { \r\n\r\n     Color color; \r\n\r\n     short rgb565; \r\n\r\n     CompressedColor[] shades; \r\n\r\n     void updateShades(){ \r\n\r\n         for (int i = 0; i &lt; shades.length; i++) { \r\n\r\n             shades[i]  = new CompressedColor(new Color((color.getRed()-(i&lt;&lt;3))&amp;0xFF, (color.getGreen()-(i&lt;&lt;3))&amp;0xff, (color.getBlue()-(i&lt;&lt;3))&amp;0xff)); \r\n\r\n         } \r\n\r\n     } \r\n\r\n     void setColor(Color clr){ \r\n\r\n         color = clr; \r\n\r\n         rgb565=(short)((((clr.getRed() &amp; 0b11111000) &lt;&lt; 8) | ((clr.getGreen() &amp; 0b11111100) &lt;&lt; 3) | (clr.getBlue() &gt;&gt; 3))&amp;0xFFFF); \r\n\r\n  \r\n\r\n     } \r\n\r\n     CompressedColor(short clr){ \r\n\r\n         shades = new CompressedColor[8]; \r\n\r\n         rgb565 = clr; \r\n\r\n         color= new Color((clr&gt;&gt;8)&amp;0xF8, (clr&gt;&gt;3)&amp;0xFC, (clr&lt;&lt;3)&amp;0xF8); \r\n\r\n     } \r\n\r\n     CompressedColor(Color clr){ \r\n\r\n         shades = new CompressedColor[8]; \r\n\r\n         color = clr; \r\n\r\n         rgb565=(short)((((clr.getRed() &amp; 0b11111000) &lt;&lt; 8) | ((clr.getGreen() &amp; 0b11111100) &lt;&lt; 3) | (clr.getBlue() &gt;&gt; 3))&amp;0xFFFF); \r\n\r\n     } \r\n\r\n }```","title":"Updating graphics in a jpanel","body":"<p>I am struggling with refreshing the graphics in a jpanel.</p>\n<p>I tried to make the JPanel extending class &quot;ShadeSelectPane&quot; update it's Graphics object everytime I use a JColorChooser to choose a new colour, stored in the BaseColor object, but it doesn't. Can one of you tell me why? I am calling repaint after all. Thank you in advance.\nTheir are two files in my code, Main.java and CompressedColor.java. Main.java extends JFrame and just serves as a entry point and storage for most of the code. CompressedColor stores a colour and some more shades of it in rgb565 and as a Color Object. I stripped the code of all the initialisation code for Swing components, which resides in Mains constructor.\nWhen ran, the code draws all the shades of the initial Color CompressedColor is set to, but it doesn't update the ShadeSelectPane when  changing the BaseColor Object.</p>\n<pre><code>This is my Main.java file\n\n public class Main extends JFrame implements ActionListener \n\n { \n\n     CompressedColor BaseColor; \n\n     JMenuBar bar; \n\n     JMenu file; \n\n     JMenu edit; \n\n     JMenuItem save; \n\n     JMenuItem exportdata; \n\n     JMenuItem exportfunction; \n\n     JMenuItem bgcolor; \n\n     ImagePane canvas; \n\n     ShadeSelectPane shadeselector; \n\n  \n\n     \n     // main-Methode \n\n     public static void main(String[] args) \n\n     {                                                 \n\n         Main frame = new Main(); \n\n         frame.setVisible(true);    \n\n  \n\n     } \n\n     public void actionPerformed (ActionEvent ae){ \n\n  \n\n         if(ae.getSource() == this.bgcolor){ \n\n             BaseColor = new CompressedColor(JColorChooser.showDialog(null, &quot;Farbauswahl&quot;, null)); \n\n             BaseColor.updateShades(); \n\n             System.out.println(Integer.toHexString(BaseColor.rgb565)); \n\n             shadeselector.repaint(); \n\n         } \n\n         else if(ae.getSource() == this.save){ \n\n             System.out.println(&quot;Save was pressed!&quot;); \n\n         } \n\n         else if(ae.getSource() == this.exportdata){ \n\n             System.out.println(&quot;Export Data was pressed!&quot;); \n\n         } \n\n         else if(ae.getSource() == this.exportfunction){ \n\n             System.out.println(&quot;Export Function was pressed&quot;); \n\n         } \n\n     } \n\n } \n\n class ImagePane extends JPanel { \n\n  \n\n     @Override \n\n     public void paintComponent(Graphics g) { \n\n         super.paintComponent(g); \n\n         g.drawString(&quot;BLAH&quot;, 20, 20); \n\n         g.drawRect(200, 200, 200, 200); \n\n     } \n\n } \n\n class ShadeSelectPane extends JPanel { \n\n     CompressedColor BaseColor; \n\n     ShadeSelectPane(CompressedColor baseColor){ \n\n         super(); \n\n         BaseColor = baseColor; \n\n     } \n\n     @Override \n\n     public void paintComponent(Graphics g) { \n\n         super.paintComponent(g); \n\n         for (int i = 0; i &lt; 8; i++) { \n\n             g.setColor(BaseColor.shades[i].color); \n\n            g.fillRect(0, i*(this.getHeight()/8), this.getWidth(), i*(this.getHeight()/8)+(this.getHeight()/8));  \n\n         } \n\n  \n\n  \n\n     } \n\n } \n\n This is CompressedColor.java \n\n  \n\n import java.awt.Color; \n\n  \n\n public class CompressedColor { \n\n     Color color; \n\n     short rgb565; \n\n     CompressedColor[] shades; \n\n     void updateShades(){ \n\n         for (int i = 0; i &lt; shades.length; i++) { \n\n             shades[i]  = new CompressedColor(new Color((color.getRed()-(i&lt;&lt;3))&amp;0xFF, (color.getGreen()-(i&lt;&lt;3))&amp;0xff, (color.getBlue()-(i&lt;&lt;3))&amp;0xff)); \n\n         } \n\n     } \n\n     void setColor(Color clr){ \n\n         color = clr; \n\n         rgb565=(short)((((clr.getRed() &amp; 0b11111000) &lt;&lt; 8) | ((clr.getGreen() &amp; 0b11111100) &lt;&lt; 3) | (clr.getBlue() &gt;&gt; 3))&amp;0xFFFF); \n\n  \n\n     } \n\n     CompressedColor(short clr){ \n\n         shades = new CompressedColor[8]; \n\n         rgb565 = clr; \n\n         color= new Color((clr&gt;&gt;8)&amp;0xF8, (clr&gt;&gt;3)&amp;0xFC, (clr&lt;&lt;3)&amp;0xF8); \n\n     } \n\n     CompressedColor(Color clr){ \n\n         shades = new CompressedColor[8]; \n\n         color = clr; \n\n         rgb565=(short)((((clr.getRed() &amp; 0b11111000) &lt;&lt; 8) | ((clr.getGreen() &amp; 0b11111100) &lt;&lt; 3) | (clr.getBlue() &gt;&gt; 3))&amp;0xFFFF); \n\n     } \n\n }```\n</code></pre>\n"},{"tags":["java","python","web-services","compilation"],"comments":[{"owner":{"account_id":974021,"reputation":63348,"user_id":995891,"accept_rate":83,"display_name":"zapl"},"score":1,"creation_date":1496149534,"post_id":44262565,"comment_id":75534188,"body_markdown":"Sounds good. Have you tried that? (e.g. via simple exec: https://stackoverflow.com/questions/3577736/compiling-and-executing-java-code-using-runtimeexec) - The only thing you should not do is to expose this openly on the internet because you allow people to run arbitrary code on your server which will soon be controlled by evil people. Sites like ideone.com use specialized sandboxed environments that are safe but that&#39;s nothing you can easily recreate besides bying a comercial solution.","body":"Sounds good. Have you tried that? (e.g. via simple exec: <a href=\"https://stackoverflow.com/questions/3577736/compiling-and-executing-java-code-using-runtimeexec\" title=\"compiling and executing java code using runtimeexec\">stackoverflow.com/questions/3577736/&hellip;</a>) - The only thing you should not do is to expose this openly on the internet because you allow people to run arbitrary code on your server which will soon be controlled by evil people. Sites like ideone.com use specialized sandboxed environments that are safe but that&#39;s nothing you can easily recreate besides bying a comercial solution."},{"owner":{"account_id":4698948,"reputation":61,"user_id":3803077,"display_name":"de-loke"},"score":0,"creation_date":1496839446,"post_id":44262565,"comment_id":75824846,"body_markdown":"No, I haven&#39;t tried anything yet. The problem is: I&#39;ll search for a way to to that because we wan&#39;t to create an interactive online tutorial what fitts exactly the needs of my University. And for now i&#39;m only looking for Ideas, how it is possible to do that.","body":"No, I haven&#39;t tried anything yet. The problem is: I&#39;ll search for a way to to that because we wan&#39;t to create an interactive online tutorial what fitts exactly the needs of my University. And for now i&#39;m only looking for Ideas, how it is possible to do that."}],"owner":{"account_id":4698948,"reputation":61,"user_id":3803077,"display_name":"de-loke"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":17,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1696722483,"creation_date":1496147992,"question_id":44262565,"body_markdown":"I&#39;d like to compile and execute Java code on a website, and automatically compare its output on a website.\r\n\r\nThe Java code should be typed in by the website-user.\r\n\r\nI think the solution must be something like: Creating a webservice which calls a blackbox java instance and sends the output back as output for the webservice via JSON. But I don&#39;t really know how to do that and if there is a more practical solution to get the execution results of the Java code, I would love to hear about that.\r\n\r\nI&#39;m interested in doing things like this in Python too for example. Is there a similar solution to do that?\r\n\r\nHope somebody can help me to do that.\r\n\r\nGreetings and thank you","title":"compile and interpret code via webservice (blackbox?)","body":"<p>I'd like to compile and execute Java code on a website, and automatically compare its output on a website.</p>\n<p>The Java code should be typed in by the website-user.</p>\n<p>I think the solution must be something like: Creating a webservice which calls a blackbox java instance and sends the output back as output for the webservice via JSON. But I don't really know how to do that and if there is a more practical solution to get the execution results of the Java code, I would love to hear about that.</p>\n<p>I'm interested in doing things like this in Python too for example. Is there a similar solution to do that?</p>\n<p>Hope somebody can help me to do that.</p>\n<p>Greetings and thank you</p>\n"},{"tags":["java","kotlin","value-class"],"comments":[{"owner":{"account_id":1675086,"reputation":33855,"user_id":1540818,"accept_rate":82,"display_name":"Joffrey"},"score":0,"creation_date":1636582284,"post_id":69920555,"comment_id":123599232,"body_markdown":"This is likely due to name mangling with value classes. Kotlin does that to avoid overload conflicts on Java side. You might be able to get around it with `@JvmName` to customize the Java method name","body":"This is likely due to name mangling with value classes. Kotlin does that to avoid overload conflicts on Java side. You might be able to get around it with <code>@JvmName</code> to customize the Java method name"},{"owner":{"account_id":22264,"reputation":21975,"user_id":54746,"accept_rate":89,"display_name":"CaffGeek"},"score":0,"creation_date":1636582801,"post_id":69920555,"comment_id":123599401,"body_markdown":"oh... I think that might solve it!","body":"oh... I think that might solve it!"},{"owner":{"account_id":22264,"reputation":21975,"user_id":54746,"accept_rate":89,"display_name":"CaffGeek"},"score":0,"creation_date":1636583089,"post_id":69920555,"comment_id":123599500,"body_markdown":"Well...kinda... I still don&#39;t end up with a &quot;CountryId&quot; I have a UUID... which isn&#39;t the type I want... ideally, I&#39;d just like the constructor to work and not use the factory (which doesn&#39;t work anyhow)","body":"Well...kinda... I still don&#39;t end up with a &quot;CountryId&quot; I have a UUID... which isn&#39;t the type I want... ideally, I&#39;d just like the constructor to work and not use the factory (which doesn&#39;t work anyhow)"},{"owner":{"account_id":1675086,"reputation":33855,"user_id":1540818,"accept_rate":82,"display_name":"Joffrey"},"score":0,"creation_date":1636583946,"post_id":69920555,"comment_id":123599732,"body_markdown":"I&#39;m confused now, the regular `CountryId` constructor works fine for me from Java. What do you mean it doesn&#39;t work for you?","body":"I&#39;m confused now, the regular <code>CountryId</code> constructor works fine for me from Java. What do you mean it doesn&#39;t work for you?"},{"owner":{"account_id":22264,"reputation":21975,"user_id":54746,"accept_rate":89,"display_name":"CaffGeek"},"score":0,"creation_date":1636584124,"post_id":69920555,"comment_id":123599769,"body_markdown":"It expects 0 arguments in java for some reason. Looks like it&#39;s marked the constructor as private?","body":"It expects 0 arguments in java for some reason. Looks like it&#39;s marked the constructor as private?"},{"owner":{"account_id":1675086,"reputation":33855,"user_id":1540818,"accept_rate":82,"display_name":"Joffrey"},"score":0,"creation_date":1636584342,"post_id":69920555,"comment_id":123599817,"body_markdown":"Maybe this has to do with how the project is published / imported, but it shouldn&#39;t really. In my case I&#39;m doing my tests with both the Kotlin and the Java class in the same project (under `src/main/kotlin` and `src/main/java` respectively).","body":"Maybe this has to do with how the project is published / imported, but it shouldn&#39;t really. In my case I&#39;m doing my tests with both the Kotlin and the Java class in the same project (under <code>src&#47;main&#47;kotlin</code> and <code>src&#47;main&#47;java</code> respectively)."},{"owner":{"account_id":22264,"reputation":21975,"user_id":54746,"accept_rate":89,"display_name":"CaffGeek"},"score":0,"creation_date":1636584525,"post_id":69920555,"comment_id":123599859,"body_markdown":"We&#39;re publishing a jar to maven, and pulling it in on the java side.","body":"We&#39;re publishing a jar to maven, and pulling it in on the java side."},{"owner":{"account_id":7299550,"reputation":3898,"user_id":5562901,"accept_rate":25,"display_name":"Saurabh Padwekar"},"score":0,"creation_date":1678199325,"post_id":69920555,"comment_id":133484190,"body_markdown":"I am not able to find the IdentifierFactory class. Getting Error: Cannot resolve symbol &#39;IdentifierFactory&#39;. Can you tell me to which package this belongs? Or if I am missing anything?","body":"I am not able to find the IdentifierFactory class. Getting Error: Cannot resolve symbol &#39;IdentifierFactory&#39;. Can you tell me to which package this belongs? Or if I am missing anything?"}],"answers":[{"tags":[],"owner":{"account_id":1675086,"reputation":33855,"user_id":1540818,"accept_rate":82,"display_name":"Joffrey"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1636626882,"creation_date":1636584291,"answer_id":69921101,"question_id":69920555,"body_markdown":"&gt; Is Java really this awful with Value classes?\r\n\r\nValue classes are a Kotlin feature. They are basically sugar to allow more type safety (in Kotlin!) while reducing allocations by unboxing the inner value. The fact that the `CountryId` class exists in the bytecode is mostly because some instances need to be boxed in some cases (when used as a generic type, or a supertype, or a nullable type - in short, somewhat like primitives). But technically it&#39;s not really meant to be used from the Java side of things.\r\n\r\n&gt; In java, I can call IdentifierFactory.Companion.buildString() and it will work, but IdentifierFactory.Companion.buildCountry() doesn&#39;t even exist.\r\n\r\nThe functions with value classes in their signature are intentionally not visible from Java by default, in order to avoid strange issues with overloads in Java. This is accomplished via [name mangling](https://kotlinlang.org/docs/inline-classes.html#mangling). You can override the name for the Java method by using the `@JvmName` annotation on the factory function on Kotlin side to make it visible from Java:\r\n\r\n```kotlin\r\n@JvmName(&quot;buildCountryUUID&quot;) // prevents mangling due to value class\r\nfun buildCountry(): CountryId {\r\n    return CountryId.empty()\r\n}\r\n```\r\n\r\nThen it is accessible on Java side and returns a `UUID` (the inlined value):\r\n\r\n```java\r\nUUID uuid = IdentifierFactory.Companion.buildCountryUUID();\r\n```\r\n\r\n&gt; ideally, I&#39;d just like the constructor to work and not use the factory\r\n\r\nI realized from the comments that you were after creating actual `CountryId` instances from Java. Using the `CountryId` constructor from Java works fine for me:\r\n\r\n```java\r\nCountryId country = new CountryId(UUID.randomUUID());\r\n```\r\nBut I am not sure how this is possible, given that the generated constructor is private in the bytecode...","title":"Using Kotlin Value classes in Java","body":"<blockquote>\n<p>Is Java really this awful with Value classes?</p>\n</blockquote>\n<p>Value classes are a Kotlin feature. They are basically sugar to allow more type safety (in Kotlin!) while reducing allocations by unboxing the inner value. The fact that the <code>CountryId</code> class exists in the bytecode is mostly because some instances need to be boxed in some cases (when used as a generic type, or a supertype, or a nullable type - in short, somewhat like primitives). But technically it's not really meant to be used from the Java side of things.</p>\n<blockquote>\n<p>In java, I can call IdentifierFactory.Companion.buildString() and it will work, but IdentifierFactory.Companion.buildCountry() doesn't even exist.</p>\n</blockquote>\n<p>The functions with value classes in their signature are intentionally not visible from Java by default, in order to avoid strange issues with overloads in Java. This is accomplished via <a href=\"https://kotlinlang.org/docs/inline-classes.html#mangling\" rel=\"noreferrer\">name mangling</a>. You can override the name for the Java method by using the <code>@JvmName</code> annotation on the factory function on Kotlin side to make it visible from Java:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>@JvmName(&quot;buildCountryUUID&quot;) // prevents mangling due to value class\nfun buildCountry(): CountryId {\n    return CountryId.empty()\n}\n</code></pre>\n<p>Then it is accessible on Java side and returns a <code>UUID</code> (the inlined value):</p>\n<pre class=\"lang-java prettyprint-override\"><code>UUID uuid = IdentifierFactory.Companion.buildCountryUUID();\n</code></pre>\n<blockquote>\n<p>ideally, I'd just like the constructor to work and not use the factory</p>\n</blockquote>\n<p>I realized from the comments that you were after creating actual <code>CountryId</code> instances from Java. Using the <code>CountryId</code> constructor from Java works fine for me:</p>\n<pre class=\"lang-java prettyprint-override\"><code>CountryId country = new CountryId(UUID.randomUUID());\n</code></pre>\n<p>But I am not sure how this is possible, given that the generated constructor is private in the bytecode...</p>\n"}],"owner":{"account_id":22264,"reputation":21975,"user_id":54746,"accept_rate":89,"display_name":"CaffGeek"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2020,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":1,"score":4,"last_activity_date":1696721527,"creation_date":1636580432,"question_id":69920555,"body_markdown":"We have two projects, and the kotlin one publishes a package that&#39;s imported by java.\r\n\r\nIn kotlin, is a value class like \r\n\r\n    @JvmInline\r\n    value class CountryId(private val id: UUID) {\r\n        override fun toString(): String = id.toString()\r\n        companion object { fun empty(): CountryId = CountryId(EMPTY_UUID) }\r\n    }\r\n\r\nIn java, we can&#39;t see a constructor, or actually instantiate this class. I have also tried creating a factory in Kotlin to create them\r\n\r\n\r\n\tclass IdentifierFactory \r\n\t{\r\n\t\tcompanion object {\r\n\t\t\tfun buildString(): String {\r\n\t\t\t\treturn &quot;hello&quot;\r\n\t\t\t}\r\n\t\r\n\t\t\tfun buildCountry(): CountryId {\r\n\t\t\t\treturn CountryId.empty()\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\nIn java, I can call `IdentifierFactory.Companion.buildString()` and it will work, but `IdentifierFactory.Companion.buildCountry()` doesn&#39;t even exist.\r\n\r\nIs Java really this awful with Value classes?\r\n\r\nps. I&#39;ve attempted with @JvmStatic as well, with no success\r\n\r\npps. If I decompile the kotlin bytecode from the java side, and get a CountryId.decompiled.java, this is what the constructor looks like\r\n\r\n    // $FF: synthetic method\r\n    private CountryId(UUID id) {\r\n        Intrinsics.checkNotNullParameter(id, &quot;id&quot;);\r\n        super();\r\n        this.id = id;\r\n    }\r\n\r\nppps. Kotlin 1.5.21 and Java 12","title":"Using Kotlin Value classes in Java","body":"<p>We have two projects, and the kotlin one publishes a package that's imported by java.</p>\n<p>In kotlin, is a value class like</p>\n<pre><code>@JvmInline\nvalue class CountryId(private val id: UUID) {\n    override fun toString(): String = id.toString()\n    companion object { fun empty(): CountryId = CountryId(EMPTY_UUID) }\n}\n</code></pre>\n<p>In java, we can't see a constructor, or actually instantiate this class. I have also tried creating a factory in Kotlin to create them</p>\n<pre><code>class IdentifierFactory \n{\n    companion object {\n        fun buildString(): String {\n            return &quot;hello&quot;\n        }\n\n        fun buildCountry(): CountryId {\n            return CountryId.empty()\n        }\n    }\n}\n</code></pre>\n<p>In java, I can call <code>IdentifierFactory.Companion.buildString()</code> and it will work, but <code>IdentifierFactory.Companion.buildCountry()</code> doesn't even exist.</p>\n<p>Is Java really this awful with Value classes?</p>\n<p>ps. I've attempted with @JvmStatic as well, with no success</p>\n<p>pps. If I decompile the kotlin bytecode from the java side, and get a CountryId.decompiled.java, this is what the constructor looks like</p>\n<pre><code>// $FF: synthetic method\nprivate CountryId(UUID id) {\n    Intrinsics.checkNotNullParameter(id, &quot;id&quot;);\n    super();\n    this.id = id;\n}\n</code></pre>\n<p>ppps. Kotlin 1.5.21 and Java 12</p>\n"},{"tags":["java","spring-boot","google-api","dialogflow-es","google-oauth"],"comments":[{"owner":{"account_id":2409035,"reputation":1992,"user_id":2104638,"accept_rate":47,"display_name":"Pasupathi Rajamanickam"},"score":0,"creation_date":1569274438,"post_id":58070342,"comment_id":102536535,"body_markdown":"Is this working in local? Sounds like your server firewall stopping egress traffic","body":"Is this working in local? Sounds like your server firewall stopping egress traffic"},{"owner":{"account_id":8195161,"reputation":542,"user_id":6168264,"accept_rate":40,"display_name":"xiao"},"score":0,"creation_date":1569274907,"post_id":58070342,"comment_id":102536645,"body_markdown":"Yes I run it in local. I just turn off the firewall but it still throws that error :(","body":"Yes I run it in local. I just turn off the firewall but it still throws that error :("},{"owner":{"account_id":2409035,"reputation":1992,"user_id":2104638,"accept_rate":47,"display_name":"Pasupathi Rajamanickam"},"score":1,"creation_date":1569275337,"post_id":58070342,"comment_id":102536743,"body_markdown":"`curl -I &quot;https://oauth2.googleapis.com/token&quot;` see if this works in your server","body":"<code>curl -I &quot;https:&#47;&#47;oauth2.googleapis.com&#47;token&quot;</code> see if this works in your server"},{"owner":{"account_id":8195161,"reputation":542,"user_id":6168264,"accept_rate":40,"display_name":"xiao"},"score":0,"creation_date":1569287341,"post_id":58070342,"comment_id":102539205,"body_markdown":"em... &quot;Failed to connect to oauth2.googleapis.com port 443: Timed out&quot;","body":"em... &quot;Failed to connect to oauth2.googleapis.com port 443: Timed out&quot;"},{"owner":{"account_id":8195161,"reputation":542,"user_id":6168264,"accept_rate":40,"display_name":"xiao"},"score":0,"creation_date":1569295770,"post_id":58070342,"comment_id":102540577,"body_markdown":"but if I use postman to generate the access token in OAuth2 with the access token url `&quot;https://oauth2.googleapis.com/token&quot;` , it works. what are the differences between them","body":"but if I use postman to generate the access token in OAuth2 with the access token url <code>&quot;https:&#47;&#47;oauth2.googleapis.com&#47;token&quot;</code> , it works. what are the differences between them"},{"owner":{"account_id":2409035,"reputation":1992,"user_id":2104638,"accept_rate":47,"display_name":"Pasupathi Rajamanickam"},"score":0,"creation_date":1569333230,"post_id":58070342,"comment_id":102558042,"body_markdown":"Your local postman has good access to outside world network, but your server still behind firewall, not sure you have ufw or some network level firewall from your cloud/server provider.","body":"Your local postman has good access to outside world network, but your server still behind firewall, not sure you have ufw or some network level firewall from your cloud/server provider."}],"answers":[{"tags":[],"owner":{"account_id":93911,"reputation":5846,"user_id":256717,"accept_rate":80,"display_name":"Fakrudeen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681418294,"creation_date":1681418294,"answer_id":76009652,"question_id":58070342,"body_markdown":"This was internet connectivity issue in my case. I routed the request via an HTTP PROXY and it worked fine. JVM options for java:\r\n\r\n    -Dhttps.proxyHost=10.128.0.3\r\n    -Dhttps.proxyPort=3128\r\n\r\n","title":"google OAuth2 getting access token for service account: connect timed out","body":"<p>This was internet connectivity issue in my case. I routed the request via an HTTP PROXY and it worked fine. JVM options for java:</p>\n<pre><code>-Dhttps.proxyHost=10.128.0.3\n-Dhttps.proxyPort=3128\n</code></pre>\n"}],"owner":{"account_id":8195161,"reputation":542,"user_id":6168264,"accept_rate":40,"display_name":"xiao"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":8601,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1696719820,"creation_date":1569273634,"question_id":58070342,"body_markdown":"I&#39;m working on a server-to-server interactions with Google DialogFlow APIs on behalf of the service account by using google OAuth2.\r\nBut I get the error when try to generate the access token(credentials.refreshIfExpired()): \r\n\r\n`java.io.IOException: Error getting access token for service account: connect timed out`\r\n\r\n[![enter image description here][1]][1]\r\n\r\nhere the codes:\r\n\r\n    \r\n        GoogleCredentials credentials = GoogleCredentials.fromStream(new FileInputStream(System.getenv(&quot;GOOGLE_APPLICATION_CREDENTIALS&quot;)));\r\n\r\n        if (credentials.createScopedRequired()) {\r\n            credentials = credentials.createScoped(Collections.singletonList(&quot;https://www.googleapis.com/auth/dialogflow&quot;));\r\n        }\r\n\r\n        credentials.refreshIfExpired();\r\n        AccessToken token = credentials.getAccessToken();\r\n\r\n        System.out.println(token.getTokenValue());\r\n\r\nI have tried to find the solution in many ways, and someone said that it may cause of the synchronization between my server time and google&#39;s time.\r\n\r\nThen I set default timeZone in GMT\r\n\r\n    @SpringBootApplication\r\n    public class DialogFlowDemoApplication {\r\n    \r\n        @PostConstruct\r\n        public void init(){\r\n            TimeZone.setDefault(TimeZone.getTimeZone(&quot;GMT&quot;));\r\n            System.out.println(&quot;Spring boot application running in GMT timezone :&quot;+new Date());\r\n        }\r\n    \r\n        public static void main(String[] args) {\r\n    \r\n            SpringApplication.run(DialogFlowDemoApplication.class, args);\r\n    \r\n        }\r\n    }\r\n\r\n[![enter image description here][2]][2]\r\n\r\nBut it doesn&#39;t help, that really drives me crazy.\r\n\r\nmy dependencies as follow:\r\n\r\n    &lt;!--start google dependencies--&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;com.google.cloud&lt;/groupId&gt;\r\n        &lt;artifactId&gt;google-cloud-dialogflow&lt;/artifactId&gt;\r\n        &lt;version&gt;0.108.0-alpha&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;com.google.oauth-client&lt;/groupId&gt;\r\n        &lt;artifactId&gt;google-oauth-client&lt;/artifactId&gt;\r\n        &lt;version&gt;1.30.1&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;com.google.cloud&lt;/groupId&gt;\r\n        &lt;artifactId&gt;google-cloud-storage&lt;/artifactId&gt;\r\n        &lt;version&gt;1.90.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;com.google.api-client&lt;/groupId&gt;\r\n        &lt;artifactId&gt;google-api-client&lt;/artifactId&gt;\r\n        &lt;version&gt;1.30.4&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;!--end of google dependencies--&gt; \r\n\r\n**Please help, thanks!**\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/J9bhZ.png\r\n  [2]: https://i.stack.imgur.com/BynPv.png","title":"google OAuth2 getting access token for service account: connect timed out","body":"<p>I'm working on a server-to-server interactions with Google DialogFlow APIs on behalf of the service account by using google OAuth2.\nBut I get the error when try to generate the access token(credentials.refreshIfExpired()): </p>\n\n<p><code>java.io.IOException: Error getting access token for service account: connect timed out</code></p>\n\n<p><a href=\"https://i.stack.imgur.com/J9bhZ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/J9bhZ.png\" alt=\"enter image description here\"></a></p>\n\n<p>here the codes:</p>\n\n<pre><code>    GoogleCredentials credentials = GoogleCredentials.fromStream(new FileInputStream(System.getenv(\"GOOGLE_APPLICATION_CREDENTIALS\")));\n\n    if (credentials.createScopedRequired()) {\n        credentials = credentials.createScoped(Collections.singletonList(\"https://www.googleapis.com/auth/dialogflow\"));\n    }\n\n    credentials.refreshIfExpired();\n    AccessToken token = credentials.getAccessToken();\n\n    System.out.println(token.getTokenValue());\n</code></pre>\n\n<p>I have tried to find the solution in many ways, and someone said that it may cause of the synchronization between my server time and google's time.</p>\n\n<p>Then I set default timeZone in GMT</p>\n\n<pre><code>@SpringBootApplication\npublic class DialogFlowDemoApplication {\n\n    @PostConstruct\n    public void init(){\n        TimeZone.setDefault(TimeZone.getTimeZone(\"GMT\"));\n        System.out.println(\"Spring boot application running in GMT timezone :\"+new Date());\n    }\n\n    public static void main(String[] args) {\n\n        SpringApplication.run(DialogFlowDemoApplication.class, args);\n\n    }\n}\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/BynPv.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/BynPv.png\" alt=\"enter image description here\"></a></p>\n\n<p>But it doesn't help, that really drives me crazy.</p>\n\n<p>my dependencies as follow:</p>\n\n<pre><code>&lt;!--start google dependencies--&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;com.google.cloud&lt;/groupId&gt;\n    &lt;artifactId&gt;google-cloud-dialogflow&lt;/artifactId&gt;\n    &lt;version&gt;0.108.0-alpha&lt;/version&gt;\n&lt;/dependency&gt;\n\n&lt;dependency&gt;\n    &lt;groupId&gt;com.google.oauth-client&lt;/groupId&gt;\n    &lt;artifactId&gt;google-oauth-client&lt;/artifactId&gt;\n    &lt;version&gt;1.30.1&lt;/version&gt;\n&lt;/dependency&gt;\n\n&lt;dependency&gt;\n    &lt;groupId&gt;com.google.cloud&lt;/groupId&gt;\n    &lt;artifactId&gt;google-cloud-storage&lt;/artifactId&gt;\n    &lt;version&gt;1.90.0&lt;/version&gt;\n&lt;/dependency&gt;\n\n&lt;dependency&gt;\n    &lt;groupId&gt;com.google.api-client&lt;/groupId&gt;\n    &lt;artifactId&gt;google-api-client&lt;/artifactId&gt;\n    &lt;version&gt;1.30.4&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;!--end of google dependencies--&gt; \n</code></pre>\n\n<p><strong>Please help, thanks!</strong></p>\n"},{"tags":["java","kotlin","concurrency","operating-system"],"comments":[{"owner":{"account_id":322981,"reputation":310744,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1695496163,"post_id":77161852,"comment_id":136033305,"body_markdown":"Edit the title and body of your Question to get a narrow focus. An open-ended discussion of concurrency theory would be off-topic for Stack Overflow.","body":"Edit the title and body of your Question to get a narrow focus. An open-ended discussion of concurrency theory would be off-topic for Stack Overflow."},{"owner":{"account_id":16186751,"reputation":361,"user_id":11686638,"display_name":"chl"},"score":0,"creation_date":1695536481,"post_id":77161852,"comment_id":136035884,"body_markdown":"Although this question would make you think lots of subject, but I still think that it doesn&#39;t need to be fixed, &#39;cause it actually can be answered only with &#39;yes or no&#39; with any additional personal opinion or even without no opinion.","body":"Although this question would make you think lots of subject, but I still think that it doesn&#39;t need to be fixed, &#39;cause it actually can be answered only with &#39;yes or no&#39; with any additional personal opinion or even without no opinion."},{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":2,"creation_date":1696255222,"post_id":77161852,"comment_id":136125982,"body_markdown":"@chl The question isn&#39;t off topic because it&#39;s opinion based, it&#39;s off topic because it&#39;s too broad. StackOverflow is for specific coding questions, not for open-ended discussions.","body":"@chl The question isn&#39;t off topic because it&#39;s opinion based, it&#39;s off topic because it&#39;s too broad. StackOverflow is for specific coding questions, not for open-ended discussions."}],"answers":[{"tags":[],"owner":{"account_id":15064163,"reputation":13519,"user_id":10871900,"display_name":"dan1st is crying"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1696718214,"creation_date":1696717498,"answer_id":77251700,"question_id":77161852,"body_markdown":"&gt; Is there anything incorrect in the list above? Please point out any misunderstandings if they exist.\r\n\r\nYes, I would agree with your list (except maybe 2. where I am not entirely sure whether you refer to the operation needing to be put on hold or whether you are talking about actually blocking the (platform) thread when talking about &quot;blocking&quot;).\r\n\r\nThe idea behind these constructs is that threads are a (somewhat) valuable resource. While you want to handle a lot of requests (or other operations) concurrently, you can&#39;t have as many threads as requests/tasks/operations you want to perform. So the idea behind these concepts is to get a few threads doing work and if some request/task/operation requires performing some I/O or blocking operation, some other request/task/operation can use the thread in the meantime. \r\nThis way, you can increase CPU utilization i.e. you are not wasting time where the CPU is idle.\r\n\r\n&gt; Elements like Virtual Threads, Tasks, and Events are used to process code but may potentially become blocked. \r\n\r\nWhat these tools do is allow you to reuse threads while some operation would need to wait for something (e.g. I/O). As a programmer, you should make sure that you are not actually doing something blocking the (platform) thread.\r\n\r\n## The difference \r\n\r\n&gt; If everything in the list is accurate, is the only difference between these models related to how they are used? (e.g., their APIs, concepts, or mental models) \r\n\r\nWhat is different between these approaches is their implementation and how they can be used.\r\n\r\n### virtual threads \r\n\r\nVirtual Threads are implemented in the JVM. You can just write normal code and the virtual threads will automatically yield/unmount the carrier thread and let other threads continue when performing a blocking operation. In contrast to other methods, this allows you to actually use blocking operations like `Socket#accept` while maintaining the said concurrency benefits (though it should be noted that there are still some cases where you might not get the performance you want, e.g. in case of pinning _for too long_ or performing operations like file I/O where it might need to extend the thread pool if it can&#39;t be done asynchronously (internally).\r\n\r\nWith virtual threads, you can use stack traces and all the tooling like you would with normal blocking code without using virtual threads.\r\n\r\nTo summarize, virtual threads take _existing_ blocking operations and let other threads do work in the meantime.\r\n\r\n### (Java) reactive frameworks\r\n\r\nReactive frameworks in Java are not written inside the JVM, they are written on top of it. If you are using reactive frameworks, you shouldn&#39;t use any blocking operations (if possible). Instead, you should use some operation that is compatible with the framework and register a callback. The framework then manages what is executed when.\r\n\r\n### Kotlin coroutines\r\n\r\nKotlin coroutines internally work like reactive frameworks (or it will use a reactive framework internally) but they have language support.\r\n\r\nSo, Kotlin coroutines are also built on top of the JVM and not part of the JVM so you shouldn&#39;t call any actual blocking operations on them. However, you can certainly call `suspend` functions and wait for them to finish and Kotlin coroutines (together with the reactive framework) will take of running your code at the right time without you needing to register callbacks by yourself. For example, you should use `delay()` (which can handle that) instead of `Thread.sleep()`.\r\n\r\nEssentially, Kotlin coroutines provide an abstraction over reactive frameworks that is part of the language. You should still not call bllcking operations but you don&#39;t have to deal with having all of these callbacks/lambdas.  \r\nHowever, that does limit you to using Kotlin.","title":"Is there any disparity in fundamental concepts among modern concurrency models","body":"<blockquote>\n<p>Is there anything incorrect in the list above? Please point out any misunderstandings if they exist.</p>\n</blockquote>\n<p>Yes, I would agree with your list (except maybe 2. where I am not entirely sure whether you refer to the operation needing to be put on hold or whether you are talking about actually blocking the (platform) thread when talking about &quot;blocking&quot;).</p>\n<p>The idea behind these constructs is that threads are a (somewhat) valuable resource. While you want to handle a lot of requests (or other operations) concurrently, you can't have as many threads as requests/tasks/operations you want to perform. So the idea behind these concepts is to get a few threads doing work and if some request/task/operation requires performing some I/O or blocking operation, some other request/task/operation can use the thread in the meantime.\nThis way, you can increase CPU utilization i.e. you are not wasting time where the CPU is idle.</p>\n<blockquote>\n<p>Elements like Virtual Threads, Tasks, and Events are used to process code but may potentially become blocked.</p>\n</blockquote>\n<p>What these tools do is allow you to reuse threads while some operation would need to wait for something (e.g. I/O). As a programmer, you should make sure that you are not actually doing something blocking the (platform) thread.</p>\n<h2>The difference</h2>\n<blockquote>\n<p>If everything in the list is accurate, is the only difference between these models related to how they are used? (e.g., their APIs, concepts, or mental models)</p>\n</blockquote>\n<p>What is different between these approaches is their implementation and how they can be used.</p>\n<h3>virtual threads</h3>\n<p>Virtual Threads are implemented in the JVM. You can just write normal code and the virtual threads will automatically yield/unmount the carrier thread and let other threads continue when performing a blocking operation. In contrast to other methods, this allows you to actually use blocking operations like <code>Socket#accept</code> while maintaining the said concurrency benefits (though it should be noted that there are still some cases where you might not get the performance you want, e.g. in case of pinning <em>for too long</em> or performing operations like file I/O where it might need to extend the thread pool if it can't be done asynchronously (internally).</p>\n<p>With virtual threads, you can use stack traces and all the tooling like you would with normal blocking code without using virtual threads.</p>\n<p>To summarize, virtual threads take <em>existing</em> blocking operations and let other threads do work in the meantime.</p>\n<h3>(Java) reactive frameworks</h3>\n<p>Reactive frameworks in Java are not written inside the JVM, they are written on top of it. If you are using reactive frameworks, you shouldn't use any blocking operations (if possible). Instead, you should use some operation that is compatible with the framework and register a callback. The framework then manages what is executed when.</p>\n<h3>Kotlin coroutines</h3>\n<p>Kotlin coroutines internally work like reactive frameworks (or it will use a reactive framework internally) but they have language support.</p>\n<p>So, Kotlin coroutines are also built on top of the JVM and not part of the JVM so you shouldn't call any actual blocking operations on them. However, you can certainly call <code>suspend</code> functions and wait for them to finish and Kotlin coroutines (together with the reactive framework) will take of running your code at the right time without you needing to register callbacks by yourself. For example, you should use <code>delay()</code> (which can handle that) instead of <code>Thread.sleep()</code>.</p>\n<p>Essentially, Kotlin coroutines provide an abstraction over reactive frameworks that is part of the language. You should still not call bllcking operations but you don't have to deal with having all of these callbacks/lambdas.<br />\nHowever, that does limit you to using Kotlin.</p>\n"}],"owner":{"account_id":16186751,"reputation":361,"user_id":11686638,"display_name":"chl"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":233,"favorite_count":0,"down_vote_count":4,"up_vote_count":2,"accepted_answer_id":77251700,"answer_count":1,"score":-2,"last_activity_date":1696718214,"creation_date":1695449262,"question_id":77161852,"body_markdown":"I&#39;ve recently been studying various modern concurrency models, such as Virtual Thread (JDK 21), Kotlin coroutines, the Event Loop within Spring Webflux (which may refer to Netty), and related topics like Java NIO or multiplexing with &#39;epoll&#39;. However, as I delved into these, I&#39;ve noticed that they seem quite similar from the following perspectives (please excuse any mixed-up keywords or terminology, as I&#39;m still a novice):\r\n\r\n1. They all share the same goal of achieving high concurrency with a limited number of threads.\r\n2. Elements like Virtual Threads, Tasks, and Events are used to process code but may potentially become blocked.\r\n3. If blocking occurs during execution, the executor (or thread) defers its current task and proceeds with another task.\r\n4. The blocked task can resume execution after an I/O operation.\r\n\r\nSo, here are my questions:\r\n\r\n1. Is there anything incorrect in the list above? Please point out any misunderstandings if they exist.\r\n2. If everything in the list is accurate, is the only difference between these models related to how they are used? (e.g., their APIs, concepts, or mental models)\r\n\r\nI realize that these questions may sound ambiguous, basic and also dumb, but I&#39;d greatly appreciate any insights you can provide. Thank you in advance.","title":"Is there any disparity in fundamental concepts among modern concurrency models","body":"<p>I've recently been studying various modern concurrency models, such as Virtual Thread (JDK 21), Kotlin coroutines, the Event Loop within Spring Webflux (which may refer to Netty), and related topics like Java NIO or multiplexing with 'epoll'. However, as I delved into these, I've noticed that they seem quite similar from the following perspectives (please excuse any mixed-up keywords or terminology, as I'm still a novice):</p>\n<ol>\n<li>They all share the same goal of achieving high concurrency with a limited number of threads.</li>\n<li>Elements like Virtual Threads, Tasks, and Events are used to process code but may potentially become blocked.</li>\n<li>If blocking occurs during execution, the executor (or thread) defers its current task and proceeds with another task.</li>\n<li>The blocked task can resume execution after an I/O operation.</li>\n</ol>\n<p>So, here are my questions:</p>\n<ol>\n<li>Is there anything incorrect in the list above? Please point out any misunderstandings if they exist.</li>\n<li>If everything in the list is accurate, is the only difference between these models related to how they are used? (e.g., their APIs, concepts, or mental models)</li>\n</ol>\n<p>I realize that these questions may sound ambiguous, basic and also dumb, but I'd greatly appreciate any insights you can provide. Thank you in advance.</p>\n"},{"tags":["java","spring","spring-boot","microservices","spring-cloud-config"],"answers":[{"tags":[],"owner":{"account_id":19358745,"reputation":386,"user_id":14898689,"display_name":"henry sneed"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1630082377,"creation_date":1630082377,"answer_id":68956813,"question_id":68955538,"body_markdown":"As documented [here][1], \r\n\r\n&gt; If you use the bootstrap flag, the config server needs to have its\r\n&gt; name and repository URI configured in bootstrap.yml.\r\n\r\nYou did not post your bootstrap files so it is unclear if you have defined them. If you have not, that could be the source of your problem since you have set spring.cloud.config.server.bootstrap to true. In your bootstrap.properties file within the resources folder for your config server, you will need to have the following properties defined:\r\n\r\n**config server bootstrap.properties**\r\n```\r\nspring:\r\n  cloud:\r\n    config:\r\n      server:\r\n        git:\r\n          uri: https://github.com/TEK-Leads/Config-Properties.git\r\n          clone-on-start: true\r\n        bootstrap: true\r\n      enabled: true\r\n   \r\n  application:\r\n    name: Config-Server\r\n```\r\n**config client bootstrap.properties**\r\n```\r\nspring:\r\n  application:\r\n    name: client-config\r\n    \r\n  cloud:\r\n    config:\r\n      uri: http://localhost:9090\r\n  config:\r\n    activate:\r\n      on-profile:\r\n        active:prod\r\n```\r\n\r\nIt also might be worth noting that bootstrap context initialization is deprecated since Spring Boot 2.4 so using bootstrapping is no longer required for this setup. More information on that can be found at https://docs.spring.io/spring-cloud-config/docs/current/reference/html/.\r\n\r\n\r\n  [1]: https://cloud.spring.io/spring-cloud-config/multi/multi__embedding_the_config_server.html","title":"If you have set spring.cloud.config.server.bootstrap=true, you need to use a composite configuration","body":"<p>As documented <a href=\"https://cloud.spring.io/spring-cloud-config/multi/multi__embedding_the_config_server.html\" rel=\"nofollow noreferrer\">here</a>,</p>\n<blockquote>\n<p>If you use the bootstrap flag, the config server needs to have its\nname and repository URI configured in bootstrap.yml.</p>\n</blockquote>\n<p>You did not post your bootstrap files so it is unclear if you have defined them. If you have not, that could be the source of your problem since you have set spring.cloud.config.server.bootstrap to true. In your bootstrap.properties file within the resources folder for your config server, you will need to have the following properties defined:</p>\n<p><strong>config server bootstrap.properties</strong></p>\n<pre><code>spring:\n  cloud:\n    config:\n      server:\n        git:\n          uri: https://github.com/TEK-Leads/Config-Properties.git\n          clone-on-start: true\n        bootstrap: true\n      enabled: true\n   \n  application:\n    name: Config-Server\n</code></pre>\n<p><strong>config client bootstrap.properties</strong></p>\n<pre><code>spring:\n  application:\n    name: client-config\n    \n  cloud:\n    config:\n      uri: http://localhost:9090\n  config:\n    activate:\n      on-profile:\n        active:prod\n</code></pre>\n<p>It also might be worth noting that bootstrap context initialization is deprecated since Spring Boot 2.4 so using bootstrapping is no longer required for this setup. More information on that can be found at <a href=\"https://docs.spring.io/spring-cloud-config/docs/current/reference/html/\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-cloud-config/docs/current/reference/html/</a>.</p>\n"},{"tags":[],"owner":{"account_id":2327403,"reputation":573,"user_id":2041552,"accept_rate":57,"display_name":"Aaron"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1639030869,"creation_date":1639030869,"answer_id":70285512,"question_id":68955538,"body_markdown":"Try to add the dependency in the `pom.xml` file:\r\n```xml\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n    &lt;artifactId&gt;spring-cloud-starter-bootstrap&lt;/artifactId&gt;\r\n&lt;/dependency&gt;","title":"If you have set spring.cloud.config.server.bootstrap=true, you need to use a composite configuration","body":"<p>Try to add the dependency in the <code>pom.xml</code> file:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-cloud-starter-bootstrap&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8027063,"reputation":89,"user_id":6053575,"display_name":"Uchiha Suryajit"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1667211417,"creation_date":1667211417,"answer_id":74261784,"question_id":68955538,"body_markdown":"If nothing is working for you, then I would like you to try removing the below xml tag from your pom.xml in your config-server.\r\n\r\n    &lt;packaging&gt;pom&lt;/packaging&gt;\r\n\r\nAlso, don&#39;t forget you just need only one dependency to get started with your Spring Cloud Config Server.\r\n\r\n    \t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-cloud-config-server&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\r\n\r\n  ","title":"If you have set spring.cloud.config.server.bootstrap=true, you need to use a composite configuration","body":"<p>If nothing is working for you, then I would like you to try removing the below xml tag from your pom.xml in your config-server.</p>\n<pre><code>&lt;packaging&gt;pom&lt;/packaging&gt;\n</code></pre>\n<p>Also, don't forget you just need only one dependency to get started with your Spring Cloud Config Server.</p>\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-cloud-config-server&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n</code></pre>\n"}],"owner":{"account_id":5871401,"reputation":2092,"user_id":4935554,"accept_rate":40,"display_name":"Ng Sharma"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":11549,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1696717570,"creation_date":1630076231,"question_id":68955538,"body_markdown":"**Problem :** how to get the data in the location **https://github.com/TEK-Leads/Config-Properties.git**\r\n\r\nWhen I try to run this application, it does not showing any result, It only shows the default pass result (**see.** MessageController). or ConfigClient side logs showing\r\nthis type of massage.\r\n\r\n**Could not locate PropertySource: I/O error on GET request for &quot;http://localhost:8888/application/default&quot;: Connection refused; nested exception is java.net.ConnectException: Connection refused**\r\n\r\nWhen changing the **config-Server** side **application.yml** file to **bootstrap.yml**, when throwing the exception in below.\r\n\r\n    If you are using the git profile, you need to set a Git URI in your configuration.  If you have set spring.cloud.config.server.bootstrap=true, you need to use a composite configuration.\r\n\r\n\r\n**Config Server Part**\r\n\r\n\r\n----------\r\n\r\n\r\n**Pom.xml**\r\n\r\n    \t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;11&lt;/java.version&gt;\r\n\t\t&lt;spring-cloud.version&gt;2020.0.3&lt;/spring-cloud.version&gt;\r\n\t&lt;/properties&gt;\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-cloud-config-server&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\t&lt;dependencyManagement&gt;\r\n\t\t&lt;dependencies&gt;\r\n\t\t\t&lt;dependency&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;${spring-cloud.version}&lt;/version&gt;\r\n\t\t\t\t&lt;type&gt;pom&lt;/type&gt;\r\n\t\t\t\t&lt;scope&gt;import&lt;/scope&gt;\r\n\t\t\t&lt;/dependency&gt;\r\n\t\t&lt;/dependencies&gt;\r\n\t&lt;/dependencyManagement&gt;\r\n\r\n\r\n**application.yml**\r\n\r\n    server:\r\n      port: 9090\r\n\r\n    spring:\r\n      cloud:\r\n        config:\r\n          server:\r\n            git:\r\n              uri: https://github.com/TEK-Leads/Config-Properties.git\r\n              clone-on-start: true\r\n            bootstrap: true\r\n          enabled: true\r\n       \r\n      application:\r\n        name: Config-Server\r\n    \r\n    management:\r\n      security:\r\n        enabled: false\r\n\r\n\r\n**ConfigurationServerApp.class**\r\n\r\n    package com.ramgovindhare.configserverapp;\r\n    \r\n    import org.springframework.boot.SpringApplication;\r\n    import org.springframework.boot.autoconfigure.SpringBootApplication;\r\n    import org.springframework.cloud.config.server.EnableConfigServer;\r\n\r\n    @SpringBootApplication\r\n    @EnableConfigServer\r\n    public class ConfigServerAppApplication {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tSpringApplication.run(ConfigServerAppApplication.class, args);\r\n    \t}\r\n    }\r\n\r\n**Config Client Part**\r\n\r\n\r\n----------\r\n\r\n**Pom.xml**\r\n\r\n    &lt;properties&gt;\r\n\t\t&lt;java.version&gt;11&lt;/java.version&gt;\r\n\t\t&lt;spring-cloud.version&gt;2020.0.3&lt;/spring-cloud.version&gt;\r\n\t&lt;/properties&gt;\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-cloud-starter-config&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-cloud-starter-bootstrap&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\t&lt;dependencyManagement&gt;\r\n\t\t&lt;dependencies&gt;\r\n\t\t\t&lt;dependency&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;${spring-cloud.version}&lt;/version&gt;\r\n\t\t\t\t&lt;type&gt;pom&lt;/type&gt;\r\n\t\t\t\t&lt;scope&gt;import&lt;/scope&gt;\r\n\t\t\t&lt;/dependency&gt;\r\n\t\t&lt;/dependencies&gt;\r\n\t&lt;/dependencyManagement&gt;\r\n\r\n**application.yml**\r\n\r\n  \r\n\r\n    spring:\r\n      application:\r\n        name: client-config\r\n        \r\n      cloud:\r\n        config:\r\n          uri: http://localhost:9090\r\n      config:\r\n        activate:\r\n          on-profile:\r\n            active:prod\r\n                \r\n    management:\r\n      security:\r\n        enabled:false\r\n      \r\n**ConfigClient.class**\r\n\r\n        package com.ramgovindhare.configserverclientapp.contorller;\r\n    \r\n    import org.springframework.beans.factory.annotation.Value;\r\n    import org.springframework.cloud.context.config.annotation.RefreshScope;\r\n    import org.springframework.web.bind.annotation.GetMapping;\r\n    import org.springframework.web.bind.annotation.RestController;\r\n    \r\n    @RefreshScope\r\n    @RestController\r\n    public class MessageController {\r\n    \t\r\n    \t@Value(&quot;${msg:Config Server is not working. Please check..}&quot;)\r\n    \tprivate String msg;\r\n    \t\r\n    \t@GetMapping(&quot;/msg&quot;)\r\n    \tpublic String getMsg() {\r\n    \t\treturn this.msg;\r\n    \t}\r\n    }\r\n\r\n\r\n","title":"If you have set spring.cloud.config.server.bootstrap=true, you need to use a composite configuration","body":"<p><strong>Problem :</strong> how to get the data in the location <strong><a href=\"https://github.com/TEK-Leads/Config-Properties.git\" rel=\"nofollow noreferrer\">https://github.com/TEK-Leads/Config-Properties.git</a></strong></p>\n<p>When I try to run this application, it does not showing any result, It only shows the default pass result (<strong>see.</strong> MessageController). or ConfigClient side logs showing\nthis type of massage.</p>\n<p><strong>Could not locate PropertySource: I/O error on GET request for &quot;http://localhost:8888/application/default&quot;: Connection refused; nested exception is java.net.ConnectException: Connection refused</strong></p>\n<p>When changing the <strong>config-Server</strong> side <strong>application.yml</strong> file to <strong>bootstrap.yml</strong>, when throwing the exception in below.</p>\n<pre><code>If you are using the git profile, you need to set a Git URI in your configuration.  If you have set spring.cloud.config.server.bootstrap=true, you need to use a composite configuration.\n</code></pre>\n<p><strong>Config Server Part</strong></p>\n<hr />\n<p><strong>Pom.xml</strong></p>\n<pre><code>    &lt;properties&gt;\n    &lt;java.version&gt;11&lt;/java.version&gt;\n    &lt;spring-cloud.version&gt;2020.0.3&lt;/spring-cloud.version&gt;\n&lt;/properties&gt;\n&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-cloud-config-server&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n        &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;optional&gt;true&lt;/optional&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n&lt;dependencyManagement&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt;\n            &lt;version&gt;${spring-cloud.version}&lt;/version&gt;\n            &lt;type&gt;pom&lt;/type&gt;\n            &lt;scope&gt;import&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n&lt;/dependencyManagement&gt;\n</code></pre>\n<p><strong>application.yml</strong></p>\n<pre><code>server:\n  port: 9090\n\nspring:\n  cloud:\n    config:\n      server:\n        git:\n          uri: https://github.com/TEK-Leads/Config-Properties.git\n          clone-on-start: true\n        bootstrap: true\n      enabled: true\n   \n  application:\n    name: Config-Server\n\nmanagement:\n  security:\n    enabled: false\n</code></pre>\n<p><strong>ConfigurationServerApp.class</strong></p>\n<pre><code>package com.ramgovindhare.configserverapp;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.cloud.config.server.EnableConfigServer;\n\n@SpringBootApplication\n@EnableConfigServer\npublic class ConfigServerAppApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(ConfigServerAppApplication.class, args);\n    }\n}\n</code></pre>\n<p><strong>Config Client Part</strong></p>\n<hr />\n<p><strong>Pom.xml</strong></p>\n<pre><code>&lt;properties&gt;\n    &lt;java.version&gt;11&lt;/java.version&gt;\n    &lt;spring-cloud.version&gt;2020.0.3&lt;/spring-cloud.version&gt;\n&lt;/properties&gt;\n&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-cloud-starter-config&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-cloud-starter-bootstrap&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n        &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;optional&gt;true&lt;/optional&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n&lt;dependencyManagement&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt;\n            &lt;version&gt;${spring-cloud.version}&lt;/version&gt;\n            &lt;type&gt;pom&lt;/type&gt;\n            &lt;scope&gt;import&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n&lt;/dependencyManagement&gt;\n</code></pre>\n<p><strong>application.yml</strong></p>\n<pre><code>spring:\n  application:\n    name: client-config\n    \n  cloud:\n    config:\n      uri: http://localhost:9090\n  config:\n    activate:\n      on-profile:\n        active:prod\n            \nmanagement:\n  security:\n    enabled:false\n  \n</code></pre>\n<p><strong>ConfigClient.class</strong></p>\n<pre><code>    package com.ramgovindhare.configserverclientapp.contorller;\n\nimport org.springframework.beans.factory.annotation.Value;\nimport org.springframework.cloud.context.config.annotation.RefreshScope;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.RestController;\n\n@RefreshScope\n@RestController\npublic class MessageController {\n    \n    @Value(&quot;${msg:Config Server is not working. Please check..}&quot;)\n    private String msg;\n    \n    @GetMapping(&quot;/msg&quot;)\n    public String getMsg() {\n        return this.msg;\n    }\n}\n</code></pre>\n"},{"tags":["java","android","ssl"],"comments":[{"owner":{"account_id":39846,"reputation":991133,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":0,"creation_date":1504135831,"post_id":45971094,"comment_id":78901389,"body_markdown":"What is &quot;Google&#39;s HTTP Client for Java&quot;? Do you mean the `HttpClient` API that is in the Android SDK (and has been discontinued for some time)? Do you mean an independent library offering a more-current version of Apache&#39;s HttpClient classes? Do you mean something else? Regardless, on Android 7.0+, you can use network security configuration to teach Android about your self-signed certificate: https://developer.android.com/training/articles/security-config.html","body":"What is &quot;Google&#39;s HTTP Client for Java&quot;? Do you mean the <code>HttpClient</code> API that is in the Android SDK (and has been discontinued for some time)? Do you mean an independent library offering a more-current version of Apache&#39;s HttpClient classes? Do you mean something else? Regardless, on Android 7.0+, you can use network security configuration to teach Android about your self-signed certificate: <a href=\"https://developer.android.com/training/articles/security-config.html\" rel=\"nofollow noreferrer\">developer.android.com/training/articles/security-config.html</a>"},{"owner":{"account_id":182141,"reputation":21047,"user_id":416631,"accept_rate":69,"display_name":"Kenny Wyland"},"score":0,"creation_date":1504137274,"post_id":45971094,"comment_id":78901663,"body_markdown":"I&#39;m using com.google.api.client.http.* found at https://developers.google.com/api-client-library/java/","body":"I&#39;m using com.google.api.client.http.* found at <a href=\"https://developers.google.com/api-client-library/java/\" rel=\"nofollow noreferrer\">developers.google.com/api-client-library/java</a>"},{"owner":{"account_id":182141,"reputation":21047,"user_id":416631,"accept_rate":69,"display_name":"Kenny Wyland"},"score":0,"creation_date":1504137404,"post_id":45971094,"comment_id":78901693,"body_markdown":"And my QA testers are going to be testing Android 5.0+ so I won&#39;t be able to use the 7.0+ solution, but I&#39;ll definitely read through that for future knowledge!","body":"And my QA testers are going to be testing Android 5.0+ so I won&#39;t be able to use the 7.0+ solution, but I&#39;ll definitely read through that for future knowledge!"},{"owner":{"account_id":1867552,"reputation":838,"user_id":1690718,"accept_rate":25,"display_name":"mega-crazy"},"score":3,"creation_date":1557852473,"post_id":45971094,"comment_id":98901172,"body_markdown":"I know this is a bit late, but they have a method now to not validate certs. so something like this: `NetHttpTransport.Builder builder = new NetHttpTransport.Builder();\n        builder.doNotValidateCertificate();\n        builder.setProxy(proxy);\n        requestFactory = builder.build().createRequestFactory();`","body":"I know this is a bit late, but they have a method now to not validate certs. so something like this: <code>NetHttpTransport.Builder builder = new NetHttpTransport.Builder();         builder.doNotValidateCertificate();         builder.setProxy(proxy);         requestFactory = builder.build().createRequestFactory();</code>"}],"answers":[{"tags":[],"owner":{"account_id":182141,"reputation":21047,"user_id":416631,"accept_rate":69,"display_name":"Kenny Wyland"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1504143296,"creation_date":1504143296,"answer_id":45971951,"question_id":45971094,"body_markdown":"I spent some time crawling through the javadocs for Google&#39;s HttpTransport and found my answer indirectly. \r\n\r\nGoogle provides two implementations of HttpTransport: NetHttpTransport and ApacheHttpTransport. The former uses Java&#39;s basic HttpURLConnection to do all of the communication and is the preferred choice. The latter uses an Apache httpclient under the covers and the Google HttpTransport docs say to use the Apache one if you need advanced configuration parameters that aren&#39;t available in the basic NetHttpTransport.\r\n\r\nInstead of initializing my transport constant like this:\r\n\r\n    static final HttpTransport HTTP_TRANSPORT = new NetHttpTransport();\r\n\r\nI&#39;m using the ApacheHttpTransport Builder which gives an option to skip the certificate validation.\r\n\r\n    ... new ApacheHttpTransport.Builder().doNotValidateCertificate().build();\r\n\r\nNOTE: For anyone coming to this answer later, this is A BAD IDEA. I&#39;m only doing this in a controlled QA environment and for a short period of time while we get our properly signed SSL certificate in place. Once our signed cert is in place, then I&#39;ll be going back to the original code above and requiring a properly signed certificate for all of my app&#39;s api communication. \r\n\r\nDO NOT DO THIS IN PRODUCTION CODE. :) \r\n\r\n\r\n\r\n","title":"Google Http Client for Java: Ignore java.security.cert.CertPathValidatorException: Trust anchor for certification path not found","body":"<p>I spent some time crawling through the javadocs for Google's HttpTransport and found my answer indirectly. </p>\n\n<p>Google provides two implementations of HttpTransport: NetHttpTransport and ApacheHttpTransport. The former uses Java's basic HttpURLConnection to do all of the communication and is the preferred choice. The latter uses an Apache httpclient under the covers and the Google HttpTransport docs say to use the Apache one if you need advanced configuration parameters that aren't available in the basic NetHttpTransport.</p>\n\n<p>Instead of initializing my transport constant like this:</p>\n\n<pre><code>static final HttpTransport HTTP_TRANSPORT = new NetHttpTransport();\n</code></pre>\n\n<p>I'm using the ApacheHttpTransport Builder which gives an option to skip the certificate validation.</p>\n\n<pre><code>... new ApacheHttpTransport.Builder().doNotValidateCertificate().build();\n</code></pre>\n\n<p>NOTE: For anyone coming to this answer later, this is A BAD IDEA. I'm only doing this in a controlled QA environment and for a short period of time while we get our properly signed SSL certificate in place. Once our signed cert is in place, then I'll be going back to the original code above and requiring a properly signed certificate for all of my app's api communication. </p>\n\n<p>DO NOT DO THIS IN PRODUCTION CODE. :) </p>\n"}],"owner":{"account_id":182141,"reputation":21047,"user_id":416631,"accept_rate":69,"display_name":"Kenny Wyland"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2459,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"closed_date":1504143946,"answer_count":1,"score":2,"last_activity_date":1696716452,"creation_date":1504135474,"question_id":45971094,"body_markdown":"I&#39;m using [Google&#39;s HTTP Client for Java][1] in my Android app. My server is temporarily using a self-signed certificate while we do QA testing. We&#39;ll have a properly signed cert when we release, but for now I just need to ignore the... \r\n\r\n    CertPathValidatorException: Trust anchor for certification path not found.\r\n\r\n... error message and tell the API to continue processing the http request/response.\r\n\r\nI can&#39;t find anything in Google&#39;s documentation on where I can disable this check. I found several Stack Overflow posts for other APIs, but not the Google HTTP Client.\r\n\r\n    import com.google.api.client.http.GenericUrl;\r\n    import com.google.api.client.http.HttpRequest;\r\n    import com.google.api.client.http.HttpRequestFactory;\r\n    import com.google.api.client.http.HttpRequestInitializer;\r\n    import com.google.api.client.http.HttpResponse;\r\n    import com.google.api.client.http.HttpTransport;\r\n    import com.google.api.client.http.UrlEncodedContent;\r\n    import com.google.api.client.http.javanet.NetHttpTransport;\r\n    import com.google.api.client.json.JsonFactory;\r\n    import com.google.api.client.json.JsonObjectParser;\r\n    import com.google.api.client.json.jackson2.JacksonFactory;\r\n    import com.google.api.client.util.Maps;\r\n    import com.google.api.client.util.escape.CharEscapers;\r\n\r\n...\r\n\r\n    static final HttpTransport HTTP_TRANSPORT = new NetHttpTransport();\r\n    HttpRequestFactory requestFactory =\r\n    \t\t\t\tHTTP_TRANSPORT.createRequestFactory(new HttpRequestInitializer() {\r\n    \t\t\t\t\t@Override\r\n    \t\t\t\t\tpublic void initialize(HttpRequest request) {\r\n    \t\t\t\t\t\trequest.setParser(new JsonObjectParser(JSON_FACTORY));\r\n    \t\t\t\t\t\trequest.setConnectTimeout(defaultTimeoutSeconds()*1000);\r\n    \t\t\t\t\t\trequest.setReadTimeout(defaultTimeoutSeconds()*1000);\r\n    \t\t\t\t\t}\r\n    \t\t\t\t});\r\n\r\n\r\n  [1]: https://developers.google.com/api-client-library/java/","title":"Google Http Client for Java: Ignore java.security.cert.CertPathValidatorException: Trust anchor for certification path not found","body":"<p>I'm using <a href=\"https://developers.google.com/api-client-library/java/\" rel=\"nofollow noreferrer\">Google's HTTP Client for Java</a> in my Android app. My server is temporarily using a self-signed certificate while we do QA testing. We'll have a properly signed cert when we release, but for now I just need to ignore the...</p>\n<pre><code>CertPathValidatorException: Trust anchor for certification path not found.\n</code></pre>\n<p>... error message and tell the API to continue processing the http request/response.</p>\n<p>I can't find anything in Google's documentation on where I can disable this check. I found several Stack Overflow posts for other APIs, but not the Google HTTP Client.</p>\n<pre><code>import com.google.api.client.http.GenericUrl;\nimport com.google.api.client.http.HttpRequest;\nimport com.google.api.client.http.HttpRequestFactory;\nimport com.google.api.client.http.HttpRequestInitializer;\nimport com.google.api.client.http.HttpResponse;\nimport com.google.api.client.http.HttpTransport;\nimport com.google.api.client.http.UrlEncodedContent;\nimport com.google.api.client.http.javanet.NetHttpTransport;\nimport com.google.api.client.json.JsonFactory;\nimport com.google.api.client.json.JsonObjectParser;\nimport com.google.api.client.json.jackson2.JacksonFactory;\nimport com.google.api.client.util.Maps;\nimport com.google.api.client.util.escape.CharEscapers;\n</code></pre>\n<p>...</p>\n<pre><code>static final HttpTransport HTTP_TRANSPORT = new NetHttpTransport();\nHttpRequestFactory requestFactory =\n                HTTP_TRANSPORT.createRequestFactory(new HttpRequestInitializer() {\n                    @Override\n                    public void initialize(HttpRequest request) {\n                        request.setParser(new JsonObjectParser(JSON_FACTORY));\n                        request.setConnectTimeout(defaultTimeoutSeconds()*1000);\n                        request.setReadTimeout(defaultTimeoutSeconds()*1000);\n                    }\n                });\n</code></pre>\n"},{"tags":["java","maven","encoding","maven-2","maven-3"],"comments":[{"owner":{"account_id":22114,"reputation":199,"user_id":54281,"display_name":"rmp"},"score":1,"creation_date":1358187803,"post_id":3017695,"comment_id":20806316,"body_markdown":"Be careful that UTF-8 encoding is what you actually want to specify as the encoding. You may be better off using a simpler encoding such as ISO-8859-1 (aka Latin-1) or even US-ASCII.","body":"Be careful that UTF-8 encoding is what you actually want to specify as the encoding. You may be better off using a simpler encoding such as ISO-8859-1 (aka Latin-1) or even US-ASCII."},{"owner":{"account_id":251709,"reputation":2827,"user_id":529286,"accept_rate":84,"display_name":"zakmck"},"score":76,"creation_date":1377250367,"post_id":3017695,"comment_id":27023589,"body_markdown":"&quot;You may be better off using a simpler encoding such as...&quot;\n\nyeah, and bug end-users, as well as other developers... Nowadays it&#39;s best to try to use UTF-8 as much as possible and care about other encodings only when a multi-encoding application requirement is thrown to you. Here, we&#39;re talking mostly about the encoding of source and configuration files, the encoding of user input is managed differently (with &#39;java -Dfile.encoding ...&#39; and with a lot of painful programming effort).","body":"&quot;You may be better off using a simpler encoding such as...&quot;  yeah, and bug end-users, as well as other developers... Nowadays it&#39;s best to try to use UTF-8 as much as possible and care about other encodings only when a multi-encoding application requirement is thrown to you. Here, we&#39;re talking mostly about the encoding of source and configuration files, the encoding of user input is managed differently (with &#39;java -Dfile.encoding ...&#39; and with a lot of painful programming effort)."},{"owner":{"account_id":21994,"reputation":73798,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":0,"creation_date":1399650577,"post_id":3017695,"comment_id":36167368,"body_markdown":"I personally decided that the encoding issues were so elusive that I went for encoding ASCII in pom.xml and then took the encoding issues up front.  This is naturally prompted by having a non-ASCII character in my name giving issues from day 1:)","body":"I personally decided that the encoding issues were so elusive that I went for encoding ASCII in pom.xml and then took the encoding issues up front.  This is naturally prompted by having a non-ASCII character in my name giving issues from day 1:)"},{"owner":{"account_id":306604,"reputation":37084,"user_id":617450,"accept_rate":61,"display_name":"Ripon Al Wasim"},"score":0,"creation_date":1431691313,"post_id":3017695,"comment_id":48617534,"body_markdown":"What encoding is set in parent pom.xml ?","body":"What encoding is set in parent pom.xml ?"}],"answers":[{"tags":[],"owner":{"account_id":55234,"reputation":15884,"user_id":165345,"accept_rate":54,"display_name":"Ethan Leroy"},"down_vote_count":0,"up_vote_count":744,"is_accepted":true,"score":744,"last_activity_date":1696714801,"creation_date":1276201059,"answer_id":3018152,"question_id":3017695,"body_markdown":"OK, I have found the problem.\r\n\r\nI use some reporting plugins. In the documentation of the [`failsafe-maven-plugin`](http://maven.apache.org/plugins/maven-failsafe-plugin/integration-test-mojo.html) I found, that the `&lt;encoding&gt;` configuration - of course - uses `${project.reporting.outputEncoding}` by default.\r\n\r\nSo I added the property as a child element of the `project` element and everything is fine now:\r\n\r\n```lang-xml\r\n&lt;properties&gt;\r\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n    &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\r\n&lt;/properties&gt;\r\n```\r\n\r\nSee also *[How do I prevent &quot;[WARNING] Using platform encoding (CP-1252 actually) to copy filtered resources, i.e. build is platform dependent!&quot;][1]*.\r\n\r\n  [1]: https://maven.apache.org/general.html#encoding-warning\r\n\r\n","title":"How can I configure encoding in Maven?","body":"<p>OK, I have found the problem.</p>\n<p>I use some reporting plugins. In the documentation of the <a href=\"http://maven.apache.org/plugins/maven-failsafe-plugin/integration-test-mojo.html\" rel=\"nofollow noreferrer\"><code>failsafe-maven-plugin</code></a> I found, that the <code>&lt;encoding&gt;</code> configuration - of course - uses <code>${project.reporting.outputEncoding}</code> by default.</p>\n<p>So I added the property as a child element of the <code>project</code> element and everything is fine now:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;properties&gt;\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\n&lt;/properties&gt;\n</code></pre>\n<p>See also <em><a href=\"https://maven.apache.org/general.html#encoding-warning\" rel=\"nofollow noreferrer\">How do I prevent &quot;[WARNING] Using platform encoding (CP-1252 actually) to copy filtered resources, i.e. build is platform dependent!&quot;</a></em>.</p>\n"},{"tags":[],"owner":{"account_id":923249,"reputation":1570,"user_id":954517,"accept_rate":86,"display_name":"Ville Myrskyneva"},"down_vote_count":1,"up_vote_count":65,"is_accepted":false,"score":64,"last_activity_date":1696704430,"creation_date":1423722665,"answer_id":28470840,"question_id":3017695,"body_markdown":"This would be in addition to [the previous answer][1], if someone meets a problem with Scandinavian letters that isn&#39;t solved with the solution in the previous answer.\r\n\r\nIf the Java source files contain Scandinavian letters, they need to be interpreted correctly by the **Java used for compiling** (e.g., Scandinavian letters used in constants).\r\n\r\nEven that the files are stored in UTF-8 and the Maven is configured to use UTF-8, the *system* Java used by the Maven will still use the system default (e.g., in Windows: [Windows-1252][2]).\r\n\r\nThis will be visible only running the tests via Maven (possibly printing the values of these constants in tests. The printed Scandinavian letters would show as &#39;&lt; ?&gt;&#39;.)\r\nIf not tested properly, this would corrupt the class files as the compile result and be left unnoticed.\r\n\r\nTo prevent this, you have to set the **Java used for compiling** to use UTF-8 encoding.\r\nIt is not enough to have the encoding settings in the Maven *[pom.xml][3]* file; you need to set the environment variable:\r\n\r\n```lang-none\r\nJAVA_TOOL_OPTIONS = -Dfile.encoding=UTF8\r\n```\r\n\r\nAlso, if using Eclipse in Windows, you may need to set the encoding used in addition to this (if you run individual tests via Eclipse).\r\n\r\n  [1]: https://stackoverflow.com/questions/3017695/how-can-i-configure-encoding-in-maven/3018152#3018152\r\n  [2]: https://en.wikipedia.org/wiki/Windows-1252\r\n  [3]: https://maven.apache.org/pom.html#What_is_the_POM.3F\r\n\r\n\r\n\r\n\r\n\r\n\r\n","title":"How can I configure encoding in Maven?","body":"<p>This would be in addition to <a href=\"https://stackoverflow.com/questions/3017695/how-can-i-configure-encoding-in-maven/3018152#3018152\">the previous answer</a>, if someone meets a problem with Scandinavian letters that isn't solved with the solution in the previous answer.</p>\n<p>If the Java source files contain Scandinavian letters, they need to be interpreted correctly by the <strong>Java used for compiling</strong> (e.g., Scandinavian letters used in constants).</p>\n<p>Even that the files are stored in UTF-8 and the Maven is configured to use UTF-8, the <em>system</em> Java used by the Maven will still use the system default (e.g., in Windows: <a href=\"https://en.wikipedia.org/wiki/Windows-1252\" rel=\"nofollow noreferrer\">Windows-1252</a>).</p>\n<p>This will be visible only running the tests via Maven (possibly printing the values of these constants in tests. The printed Scandinavian letters would show as '&lt; ?&gt;'.)\nIf not tested properly, this would corrupt the class files as the compile result and be left unnoticed.</p>\n<p>To prevent this, you have to set the <strong>Java used for compiling</strong> to use UTF-8 encoding.\nIt is not enough to have the encoding settings in the Maven <em><a href=\"https://maven.apache.org/pom.html#What_is_the_POM.3F\" rel=\"nofollow noreferrer\">pom.xml</a></em> file; you need to set the environment variable:</p>\n<pre class=\"lang-none prettyprint-override\"><code>JAVA_TOOL_OPTIONS = -Dfile.encoding=UTF8\n</code></pre>\n<p>Also, if using Eclipse in Windows, you may need to set the encoding used in addition to this (if you run individual tests via Eclipse).</p>\n"},{"tags":[],"owner":{"account_id":7035369,"reputation":658,"user_id":5389695,"accept_rate":86,"display_name":"fsimon"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1460932737,"creation_date":1460932737,"answer_id":36683004,"question_id":3017695,"body_markdown":"Try this:\r\n\r\n    &lt;project&gt;\r\n      ...\r\n      &lt;build&gt;\r\n        &lt;plugins&gt;\r\n          &lt;plugin&gt;\r\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n            &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\r\n            &lt;version&gt;2.7&lt;/version&gt;\r\n            &lt;configuration&gt;\r\n              ...\r\n              &lt;encoding&gt;UTF-8&lt;/encoding&gt;\r\n              ...\r\n            &lt;/configuration&gt;\r\n          &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n        ...\r\n      &lt;/build&gt;\r\n      ...\r\n    &lt;/project&gt;","title":"How can I configure encoding in Maven?","body":"<p>Try this:</p>\n\n<pre><code>&lt;project&gt;\n  ...\n  &lt;build&gt;\n    &lt;plugins&gt;\n      &lt;plugin&gt;\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n        &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\n        &lt;version&gt;2.7&lt;/version&gt;\n        &lt;configuration&gt;\n          ...\n          &lt;encoding&gt;UTF-8&lt;/encoding&gt;\n          ...\n        &lt;/configuration&gt;\n      &lt;/plugin&gt;\n    &lt;/plugins&gt;\n    ...\n  &lt;/build&gt;\n  ...\n&lt;/project&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":286974,"reputation":3435,"user_id":586522,"display_name":"bhdrk"},"down_vote_count":1,"up_vote_count":59,"is_accepted":false,"score":58,"last_activity_date":1696703735,"creation_date":1467185163,"answer_id":38092996,"question_id":3017695,"body_markdown":"If you combine the previous answers, here is finally a *[pom.xml][1]*, that configured for UTF-8, should seem like that.\r\n\r\n**pom.xml**\r\n\r\n&lt;!-- language: lang-xml --&gt;\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n             xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n             xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    \r\n        &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \r\n        &lt;groupId&gt;YOUR_COMPANY&lt;/groupId&gt;\r\n        &lt;artifactId&gt;YOUR_APP&lt;/artifactId&gt;\r\n        &lt;version&gt;1.0.0-SNAPSHOT&lt;/version&gt;\r\n    \r\n        &lt;properties&gt;\r\n            &lt;project.java.version&gt;1.8&lt;/project.java.version&gt;\r\n            &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n            &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\r\n        &lt;/properties&gt;\r\n    \r\n        &lt;dependencies&gt;\r\n            &lt;!-- Your dependencies --&gt;\r\n        &lt;/dependencies&gt;\r\n    \r\n        &lt;build&gt;\r\n            &lt;plugins&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;3.7.0&lt;/version&gt;\r\n                    &lt;configuration&gt;\r\n                        &lt;source&gt;${project.java.version}&lt;/source&gt;\r\n                        &lt;target&gt;${project.java.version}&lt;/target&gt;\r\n                        &lt;encoding&gt;${project.build.sourceEncoding}&lt;/encoding&gt;\r\n                    &lt;/configuration&gt;\r\n                &lt;/plugin&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;3.0.2&lt;/version&gt;\r\n                    &lt;configuration&gt;\r\n                        &lt;encoding&gt;${project.build.sourceEncoding}&lt;/encoding&gt;\r\n                    &lt;/configuration&gt;\r\n                &lt;/plugin&gt;\r\n            &lt;/plugins&gt;\r\n        &lt;/build&gt;\r\n    &lt;/project&gt;\r\n\r\n  [1]: https://maven.apache.org/pom.html#What_is_the_POM.3F\r\n\r\n","title":"How can I configure encoding in Maven?","body":"<p>If you combine the previous answers, here is finally a <em><a href=\"https://maven.apache.org/pom.html#What_is_the_POM.3F\" rel=\"nofollow noreferrer\">pom.xml</a></em>, that configured for UTF-8, should seem like that.</p>\n<p><strong>pom.xml</strong></p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;YOUR_COMPANY&lt;/groupId&gt;\n    &lt;artifactId&gt;YOUR_APP&lt;/artifactId&gt;\n    &lt;version&gt;1.0.0-SNAPSHOT&lt;/version&gt;\n\n    &lt;properties&gt;\n        &lt;project.java.version&gt;1.8&lt;/project.java.version&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n        &lt;!-- Your dependencies --&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.7.0&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;source&gt;${project.java.version}&lt;/source&gt;\n                    &lt;target&gt;${project.java.version}&lt;/target&gt;\n                    &lt;encoding&gt;${project.build.sourceEncoding}&lt;/encoding&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.0.2&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;encoding&gt;${project.build.sourceEncoding}&lt;/encoding&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":940012,"reputation":21855,"user_id":968244,"accept_rate":58,"display_name":"isapir"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1518910861,"creation_date":1518910861,"answer_id":48847011,"question_id":3017695,"body_markdown":"In my case I was using the `maven-dependency-plugin` so in order to resolve the issue I had to add the following property:\r\n\r\n      &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n\r\nSee [Apache Maven Resources Plugin /  Specifying a character encoding scheme][1]\r\n\r\n\r\n  [1]: https://maven.apache.org/plugins/maven-resources-plugin/examples/encoding.html","title":"How can I configure encoding in Maven?","body":"<p>In my case I was using the <code>maven-dependency-plugin</code> so in order to resolve the issue I had to add the following property:</p>\n\n<pre><code>  &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n</code></pre>\n\n<p>See <a href=\"https://maven.apache.org/plugins/maven-resources-plugin/examples/encoding.html\" rel=\"nofollow noreferrer\">Apache Maven Resources Plugin /  Specifying a character encoding scheme</a></p>\n"},{"tags":[],"owner":{"account_id":241158,"reputation":9333,"user_id":511804,"accept_rate":56,"display_name":"Alexandr"},"down_vote_count":1,"up_vote_count":10,"is_accepted":false,"score":9,"last_activity_date":1696715992,"creation_date":1550060258,"answer_id":54670026,"question_id":3017695,"body_markdown":"It seems people mix a content encoding with a built files/resources encoding. Having only Maven properties is not enough. Having `-Dfile.encoding=UTF8` is not effective. To avoid having issues with encoding, you should follow the following simple rules:\r\n\r\n1. Set Maven encoding, as described above:\r\n\r\n    ```lang-xml\r\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n    &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\r\n    ```\r\n\r\n2. Always set encoding explicitly, when work with files, strings, and I/O in your code. If you do not follow this rule, your application depends on the environment. The `-Dfile.encoding=UTF8` exactly is responsible for run-time environment configuration, but we should not depend on it. If you have thousands of clients, it takes more effort to configure systems and to find issues because of it. You just have an additional dependency on it which you can avoid by setting it explicitly. Most methods in Java that use a default encoding are marked as deprecated because of it.\r\n\r\n3. Make sure the content, you are working with, also is in the same encoding that you expect. If it is not, the previous steps do not matter! For instance, a file will not be processed correctly, if its encoding is not UTF-8, but you expect it. To check file encoding on Linux:\r\n\r\n    ```lang-none\r\n    file --mime F_PRDAUFT.dsv\r\n    ```\r\n\r\n4. Force clients/server set encoding explicitly in requests/responses. Here are examples:\r\n\r\n    ```lang-none\r\n    @Produces(&quot;application/json; charset=UTF-8&quot;)\r\n    @Consumes(&quot;application/json; charset=UTF-8&quot;)\r\n    ```\r\n\r\n","title":"How can I configure encoding in Maven?","body":"<p>It seems people mix a content encoding with a built files/resources encoding. Having only Maven properties is not enough. Having <code>-Dfile.encoding=UTF8</code> is not effective. To avoid having issues with encoding, you should follow the following simple rules:</p>\n<ol>\n<li><p>Set Maven encoding, as described above:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n&lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\n</code></pre>\n</li>\n<li><p>Always set encoding explicitly, when work with files, strings, and I/O in your code. If you do not follow this rule, your application depends on the environment. The <code>-Dfile.encoding=UTF8</code> exactly is responsible for run-time environment configuration, but we should not depend on it. If you have thousands of clients, it takes more effort to configure systems and to find issues because of it. You just have an additional dependency on it which you can avoid by setting it explicitly. Most methods in Java that use a default encoding are marked as deprecated because of it.</p>\n</li>\n<li><p>Make sure the content, you are working with, also is in the same encoding that you expect. If it is not, the previous steps do not matter! For instance, a file will not be processed correctly, if its encoding is not UTF-8, but you expect it. To check file encoding on Linux:</p>\n<pre class=\"lang-none prettyprint-override\"><code>file --mime F_PRDAUFT.dsv\n</code></pre>\n</li>\n<li><p>Force clients/server set encoding explicitly in requests/responses. Here are examples:</p>\n<pre class=\"lang-none prettyprint-override\"><code>@Produces(&quot;application/json; charset=UTF-8&quot;)\n@Consumes(&quot;application/json; charset=UTF-8&quot;)\n</code></pre>\n</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":223484,"reputation":61166,"user_id":482717,"accept_rate":66,"display_name":"Paul Verest"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1696715685,"creation_date":1689019705,"answer_id":76657008,"question_id":3017695,"body_markdown":"(As of 2023, but actually has always been so)\r\n\r\nIf you use Spring Boot,\r\nyou don&#39;t need to do anything.\r\n\r\nIt already applies such properties in the parent.\r\n\r\n```xml\r\n&lt;properties&gt;\r\n    ...\r\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n    &lt;project.reporting.outputEncoding&gt;UTF8&lt;/project.reporting.outputEncoding&gt;\r\n    ...\r\n&lt;/properties&gt;\r\n```\r\n\r\nAnd **in the general case**, these two lines above are enough.  \r\nAnd you should not add something in any other places or plugins, unless you know what you are doing.\r\n\r\nIf you see advice to do more, most likely it is something outdated.\r\n","title":"How can I configure encoding in Maven?","body":"<p>(As of 2023, but actually has always been so)</p>\n<p>If you use Spring Boot,\nyou don't need to do anything.</p>\n<p>It already applies such properties in the parent.</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;properties&gt;\n    ...\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;project.reporting.outputEncoding&gt;UTF8&lt;/project.reporting.outputEncoding&gt;\n    ...\n&lt;/properties&gt;\n</code></pre>\n<p>And <strong>in the general case</strong>, these two lines above are enough.<br />\nAnd you should not add something in any other places or plugins, unless you know what you are doing.</p>\n<p>If you see advice to do more, most likely it is something outdated.</p>\n"}],"owner":{"account_id":55234,"reputation":15884,"user_id":165345,"accept_rate":54,"display_name":"Ethan Leroy"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":361618,"favorite_count":0,"down_vote_count":0,"up_vote_count":506,"accepted_answer_id":3018152,"answer_count":7,"score":506,"last_activity_date":1696715992,"creation_date":1276197628,"question_id":3017695,"body_markdown":"When I run `maven install` on my multi-module Maven project I always get the following output:\r\n\r\n```lang-none\r\n[WARNING] File encoding has not been set, using platform encoding UTF-8, i.e. build is platform dependent!\r\n```\r\n\r\nSo, I googled around a bit, but all I could find was that I have to add:\r\n\r\n```lang-xml\r\n&lt;properties&gt;\r\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n&lt;/properties&gt;\r\n```\r\n\r\n...to my *[pom.xml][1]* file. But it&#39;s already there (in the parent *pom.xml*).\r\n\r\nConfiguring `&lt;encoding&gt;` for the *maven-resources-plugin* or the *maven-compiler-plugin* also doesn&#39;t fix it.\r\n\r\nSo what&#39;s the problem?\r\n\r\n  [1]: https://maven.apache.org/pom.html#What_is_the_POM.3F\r\n","title":"How can I configure encoding in Maven?","body":"<p>When I run <code>maven install</code> on my multi-module Maven project I always get the following output:</p>\n<pre class=\"lang-none prettyprint-override\"><code>[WARNING] File encoding has not been set, using platform encoding UTF-8, i.e. build is platform dependent!\n</code></pre>\n<p>So, I googled around a bit, but all I could find was that I have to add:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;properties&gt;\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n&lt;/properties&gt;\n</code></pre>\n<p>...to my <em><a href=\"https://maven.apache.org/pom.html#What_is_the_POM.3F\" rel=\"nofollow noreferrer\">pom.xml</a></em> file. But it's already there (in the parent <em>pom.xml</em>).</p>\n<p>Configuring <code>&lt;encoding&gt;</code> for the <em>maven-resources-plugin</em> or the <em>maven-compiler-plugin</em> also doesn't fix it.</p>\n<p>So what's the problem?</p>\n"},{"tags":["java","jersey","jersey-client"],"comments":[{"owner":{"account_id":1114067,"reputation":196781,"user_id":1103872,"accept_rate":82,"display_name":"Marko Topolnik"},"score":1,"creation_date":1384028379,"post_id":19882456,"comment_id":29576286,"body_markdown":"Yes, there&#39;s an XML schema declaration involved. You should post the exact XML you send, and the exact content you receive.","body":"Yes, there&#39;s an XML schema declaration involved. You should post the exact XML you send, and the exact content you receive."},{"owner":{"account_id":2660877,"reputation":38533,"user_id":2300597,"accept_rate":55,"display_name":"peter.petrov"},"score":0,"creation_date":1384028422,"post_id":19882456,"comment_id":29576300,"body_markdown":"How do I know these? I just use this Java code, not sure what happens at the lower level.","body":"How do I know these? I just use this Java code, not sure what happens at the lower level."},{"owner":{"account_id":1114067,"reputation":196781,"user_id":1103872,"accept_rate":82,"display_name":"Marko Topolnik"},"score":0,"creation_date":1384028491,"post_id":19882456,"comment_id":29576314,"body_markdown":"You can enable Jersey logging.","body":"You can enable Jersey logging."},{"owner":{"account_id":1114067,"reputation":196781,"user_id":1103872,"accept_rate":82,"display_name":"Marko Topolnik"},"score":1,"creation_date":1384028761,"post_id":19882456,"comment_id":29576416,"body_markdown":"This is what I have, see if it helps: `ClientBuilder.newClient(new ClientConfig(new JacksonJaxbJsonProvider())).register(new LoggingFilter(Logger.getGlobal(), true))`","body":"This is what I have, see if it helps: <code>ClientBuilder.newClient(new ClientConfig(new JacksonJaxbJsonProvider())).register(new LoggingFilter(Logger.getGlobal(), true))</code>"},{"owner":{"account_id":2660877,"reputation":38533,"user_id":2300597,"accept_rate":55,"display_name":"peter.petrov"},"score":0,"creation_date":1384028767,"post_id":19882456,"comment_id":29576417,"body_markdown":"OK, posted something from the client.","body":"OK, posted something from the client."},{"owner":{"account_id":2660877,"reputation":38533,"user_id":2300597,"accept_rate":55,"display_name":"peter.petrov"},"score":0,"creation_date":1384028873,"post_id":19882456,"comment_id":29576461,"body_markdown":"If a POST method has an argument of type A, am I allowed to return anything else but the same type A object from it? Asking this as I return another object of type B. Posted my method code too.","body":"If a POST method has an argument of type A, am I allowed to return anything else but the same type A object from it? Asking this as I return another object of type B. Posted my method code too."},{"owner":{"account_id":1114067,"reputation":196781,"user_id":1103872,"accept_rate":82,"display_name":"Marko Topolnik"},"score":1,"creation_date":1384029007,"post_id":19882456,"comment_id":29576497,"body_markdown":"The posted XML has the proper NS, the one your error message complains is missing.","body":"The posted XML has the proper NS, the one your error message complains is missing."},{"owner":{"account_id":2660877,"reputation":38533,"user_id":2300597,"accept_rate":55,"display_name":"peter.petrov"},"score":0,"creation_date":1384029080,"post_id":19882456,"comment_id":29576512,"body_markdown":"Yes, I know. But that&#39;s the point, what is it complaining about?! The return is just a different type of object in JSON format. What is it trying to unmarshall?!","body":"Yes, I know. But that&#39;s the point, what is it complaining about?! The return is just a different type of object in JSON format. What is it trying to unmarshall?!"},{"owner":{"account_id":1114067,"reputation":196781,"user_id":1103872,"accept_rate":82,"display_name":"Marko Topolnik"},"score":1,"creation_date":1384029338,"post_id":19882456,"comment_id":29576582,"body_markdown":"Well `WebApplicationException` is thrown by the server. That&#39;s part of the mistery :)","body":"Well <code>WebApplicationException</code> is thrown by the server. That&#39;s part of the mistery :)"},{"owner":{"account_id":2660877,"reputation":38533,"user_id":2300597,"accept_rate":55,"display_name":"peter.petrov"},"score":0,"creation_date":1384029377,"post_id":19882456,"comment_id":29576592,"body_markdown":"If I just do (1) service.path(&quot;Asset&quot;).entity(data, MediaType.APPLICATION_XML).post(data);    OR  (2) service.path(&quot;Asset&quot;).entity(data, MediaType.APPLICATION_XML).post(); in my client, I don&#39;t get this error. Hm, weird, OK, seems now my only problem is how to get the JSON result back in the client.","body":"If I just do (1) service.path(&quot;Asset&quot;).entity(data, MediaType.APPLICATION_XML).post(data);    OR  (2) service.path(&quot;Asset&quot;).entity(data, MediaType.APPLICATION_XML).post(); in my client, I don&#39;t get this error. Hm, weird, OK, seems now my only problem is how to get the JSON result back in the client."},{"owner":{"account_id":2660877,"reputation":38533,"user_id":2300597,"accept_rate":55,"display_name":"peter.petrov"},"score":0,"creation_date":1384029481,"post_id":19882456,"comment_id":29576634,"body_markdown":"Hm, I don&#39;t think anything is thrown on the server. Anyway. Thanks for all your timely help. If you know how I can get the JSON back just let me know! Thanks once again!","body":"Hm, I don&#39;t think anything is thrown on the server. Anyway. Thanks for all your timely help. If you know how I can get the JSON back just let me know! Thanks once again!"},{"owner":{"account_id":1114067,"reputation":196781,"user_id":1103872,"accept_rate":82,"display_name":"Marko Topolnik"},"score":1,"creation_date":1384029754,"post_id":19882456,"comment_id":29576705,"body_markdown":"I just wanted to comment on that line code of yours... the one you have in the question is wrong, I believe, and (2) is good as far making the request. Just add the class into which you want to unmarshall the response.","body":"I just wanted to comment on that line code of yours... the one you have in the question is wrong, I believe, and (2) is good as far making the request. Just add the class into which you want to unmarshall the response."},{"owner":{"account_id":2660877,"reputation":38533,"user_id":2300597,"accept_rate":55,"display_name":"peter.petrov"},"score":0,"creation_date":1384030309,"post_id":19882456,"comment_id":29576850,"body_markdown":"I don&#39;t know where to add it. Googling doesn&#39;t help much too. The response is just simple JSON representation of this simple AssetResult bean.","body":"I don&#39;t know where to add it. Googling doesn&#39;t help much too. The response is just simple JSON representation of this simple AssetResult bean."},{"owner":{"account_id":1114067,"reputation":196781,"user_id":1103872,"accept_rate":82,"display_name":"Marko Topolnik"},"score":1,"creation_date":1384030438,"post_id":19882456,"comment_id":29576886,"body_markdown":"Add it as the argument to `post`. `post(AssetResult.class)`.","body":"Add it as the argument to <code>post</code>. <code>post(AssetResult.class)</code>."},{"owner":{"account_id":1114067,"reputation":196781,"user_id":1103872,"accept_rate":82,"display_name":"Marko Topolnik"},"score":1,"creation_date":1384030519,"post_id":19882456,"comment_id":29576909,"body_markdown":"And [here&#39;s the Javadoc link](https://jersey.java.net/apidocs/1.17/jersey/com/sun/jersey/api/client/UniformInterface.html#post(java.lang.Class)) to what I&#39;m talking about.","body":"And <a href=\"https://jersey.java.net/apidocs/1.17/jersey/com/sun/jersey/api/client/UniformInterface.html#post(java.lang.Class)\" rel=\"nofollow noreferrer\">here&#39;s the Javadoc link</a> to what I&#39;m talking about."},{"owner":{"account_id":2660877,"reputation":38533,"user_id":2300597,"accept_rate":55,"display_name":"peter.petrov"},"score":0,"creation_date":1384031035,"post_id":19882456,"comment_id":29577054,"body_markdown":"Thanks, I just got that. But now I am sort of back to where we started. [javax.xml.bind.UnmarshalException: unexpected element (uri:&quot;&quot;, local:&quot;assetResult&quot;). Expected elements are &lt;{http://company/module/result}assetResult&gt;]. The client doesn&#39;t seem to know the xmlns now (of AssetResult).","body":"Thanks, I just got that. But now I am sort of back to where we started. [javax.xml.bind.UnmarshalException: unexpected element (uri:&quot;&quot;, local:&quot;assetResult&quot;). Expected elements are &lt;{<a href=\"http://company/module/result\" rel=\"nofollow noreferrer\">company/module/result</a>}assetResult&gt;]. The client doesn&#39;t seem to know the xmlns now (of AssetResult)."},{"owner":{"account_id":1114067,"reputation":196781,"user_id":1103872,"accept_rate":82,"display_name":"Marko Topolnik"},"score":1,"creation_date":1384031131,"post_id":19882456,"comment_id":29577083,"body_markdown":"The client apparently expects an XML response. Also its error message is bogus as there&#39;s clearly no `assetResult` nor `input` element in te response.","body":"The client apparently expects an XML response. Also its error message is bogus as there&#39;s clearly no <code>assetResult</code> nor <code>input</code> element in te response."},{"owner":{"account_id":2660877,"reputation":38533,"user_id":2300597,"accept_rate":55,"display_name":"peter.petrov"},"score":0,"creation_date":1384031557,"post_id":19882456,"comment_id":29577206,"body_markdown":"Thanks again for all your help. I think of trying this. http://stackoverflow.com/questions/3097595/jaxb-with-namespace-unmarshalling-using-jersey-from-rest-service","body":"Thanks again for all your help. I think of trying this. <a href=\"http://stackoverflow.com/questions/3097595/jaxb-with-namespace-unmarshalling-using-jersey-from-rest-service\" title=\"jaxb with namespace unmarshalling using jersey from rest service\">stackoverflow.com/questions/3097595/&hellip;</a>"},{"owner":{"account_id":2660877,"reputation":38533,"user_id":2300597,"accept_rate":55,"display_name":"peter.petrov"},"score":0,"creation_date":1384031675,"post_id":19882456,"comment_id":29577237,"body_markdown":"No luck. Maybe I should give up for now. I&#39;ve been working 5-6 hours on this now. Thank you once again!!!","body":"No luck. Maybe I should give up for now. I&#39;ve been working 5-6 hours on this now. Thank you once again!!!"},{"owner":{"account_id":1114067,"reputation":196781,"user_id":1103872,"accept_rate":82,"display_name":"Marko Topolnik"},"score":1,"creation_date":1384032110,"post_id":19882456,"comment_id":29577382,"body_markdown":"The way I see it, it could be that your Jersey client doesn&#39;t even support XML requests and JSON responses.","body":"The way I see it, it could be that your Jersey client doesn&#39;t even support XML requests and JSON responses."},{"owner":{"account_id":2660877,"reputation":38533,"user_id":2300597,"accept_rate":55,"display_name":"peter.petrov"},"score":0,"creation_date":1384032662,"post_id":19882456,"comment_id":29577540,"body_markdown":"Yes, I sort of also came to this conclusion now. I changed my REST method to return XML and now everything works fine. Old Jersey library probably. It really thinks it&#39;s XML back, even though I tell explicitly .accept(MediaType.APPLICATION_JSON) in my client call. Thank you, Marko.","body":"Yes, I sort of also came to this conclusion now. I changed my REST method to return XML and now everything works fine. Old Jersey library probably. It really thinks it&#39;s XML back, even though I tell explicitly .accept(MediaType.APPLICATION_JSON) in my client call. Thank you, Marko."}],"answers":[{"tags":[],"owner":{"account_id":2660877,"reputation":38533,"user_id":2300597,"accept_rate":55,"display_name":"peter.petrov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1384033632,"creation_date":1384033632,"answer_id":19883501,"question_id":19882456,"body_markdown":"I finally returned JSON from the method and slightly changed the client. Below is a client which finally works. The key points are two. 1) Post with String.class; 2) Use Gson and unmarshal the returned AssetResult object on the client side with Gson.\r\n\r\n\r\n    package com.company.module.test;\r\n    \r\n    import java.net.URI;\r\n    \r\n    import javax.ws.rs.core.MediaType;\r\n    import javax.ws.rs.core.UriBuilder;\r\n    \r\n    import com.google.gson.Gson;\r\n    import com.sun.jersey.api.client.Client;\r\n    import com.sun.jersey.api.client.WebResource;\r\n    import com.sun.jersey.api.client.config.ClientConfig;\r\n    import com.sun.jersey.api.client.config.DefaultClientConfig;\r\n    import com.sun.jersey.api.client.filter.LoggingFilter;\r\n    import com.company.common.DateUtil;\r\n    import com.company.module.input.AssetOperation;\r\n    import com.company.module.input.AssetOperationData;\r\n    import com.company.module.result.AssetResult;\r\n    \r\n    public class MainProg002 {\r\n    \r\n        public static void main(String[] args) throws Exception {\r\n            ClientConfig config = new DefaultClientConfig();\r\n            Client client = Client.create(config);\r\n            client.addFilter(new LoggingFilter());\r\n            \r\n            WebResource service = client.resource(getBaseURI());\r\n            \r\n            AssetOperationData data = new AssetOperationData();\r\n            AssetOperation op1 = new AssetOperation();\r\n            op1.setAssetID(&quot;1234&quot;);\r\n            op1.setDate(DateUtil.getDate(2013, 12, 22));\r\n            op1.setOperation(&quot;pause&quot;);\r\n            AssetOperation op2 = new AssetOperation();\r\n            op2.setAssetID(&quot;5050&quot;);\r\n            op2.setDate(DateUtil.getDate(2013, 12, 5));\r\n            op2.setOperation(&quot;resume&quot;);\r\n            data.getAssetOperations().add(op1);\r\n            data.getAssetOperations().add(op2);\r\n            \r\n            String res = service.path(&quot;Asset&quot;).entity(data, MediaType.APPLICATION_XML).accept(MediaType.APPLICATION_JSON).post(String.class);\r\n            Gson gson = new Gson();\r\n            AssetResult result = gson.fromJson(res, AssetResult.class);\r\n                    \r\n            System.out.println(&quot;DONE!&quot;);\r\n        }\r\n        \r\n        private static URI getBaseURI() {\r\n            return UriBuilder.fromUri(&quot;http://localhost:8080/module/service&quot;).build();\r\n        }\r\n    }\r\n    \r\n    \r\n","title":"RESTful WS - Jersey - client side unmarshalling issue","body":"<p>I finally returned JSON from the method and slightly changed the client. Below is a client which finally works. The key points are two. 1) Post with String.class; 2) Use Gson and unmarshal the returned AssetResult object on the client side with Gson.</p>\n\n<pre><code>package com.company.module.test;\n\nimport java.net.URI;\n\nimport javax.ws.rs.core.MediaType;\nimport javax.ws.rs.core.UriBuilder;\n\nimport com.google.gson.Gson;\nimport com.sun.jersey.api.client.Client;\nimport com.sun.jersey.api.client.WebResource;\nimport com.sun.jersey.api.client.config.ClientConfig;\nimport com.sun.jersey.api.client.config.DefaultClientConfig;\nimport com.sun.jersey.api.client.filter.LoggingFilter;\nimport com.company.common.DateUtil;\nimport com.company.module.input.AssetOperation;\nimport com.company.module.input.AssetOperationData;\nimport com.company.module.result.AssetResult;\n\npublic class MainProg002 {\n\n    public static void main(String[] args) throws Exception {\n        ClientConfig config = new DefaultClientConfig();\n        Client client = Client.create(config);\n        client.addFilter(new LoggingFilter());\n\n        WebResource service = client.resource(getBaseURI());\n\n        AssetOperationData data = new AssetOperationData();\n        AssetOperation op1 = new AssetOperation();\n        op1.setAssetID(\"1234\");\n        op1.setDate(DateUtil.getDate(2013, 12, 22));\n        op1.setOperation(\"pause\");\n        AssetOperation op2 = new AssetOperation();\n        op2.setAssetID(\"5050\");\n        op2.setDate(DateUtil.getDate(2013, 12, 5));\n        op2.setOperation(\"resume\");\n        data.getAssetOperations().add(op1);\n        data.getAssetOperations().add(op2);\n\n        String res = service.path(\"Asset\").entity(data, MediaType.APPLICATION_XML).accept(MediaType.APPLICATION_JSON).post(String.class);\n        Gson gson = new Gson();\n        AssetResult result = gson.fromJson(res, AssetResult.class);\n\n        System.out.println(\"DONE!\");\n    }\n\n    private static URI getBaseURI() {\n        return UriBuilder.fromUri(\"http://localhost:8080/module/service\").build();\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":2660877,"reputation":38533,"user_id":2300597,"accept_rate":55,"display_name":"peter.petrov"},"comment_count":21,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2369,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":19883501,"answer_count":1,"score":0,"last_activity_date":1696715856,"creation_date":1384027522,"question_id":19882456,"body_markdown":"I am trying to call a REST WS which I built myself.\r\nBelow is my code on the client side.\r\nOn the server side this call completes fine,\r\nI can see the arguments which I want to see\r\nin the debugger. The method is POST, \r\nhas an XML argument, returns JSON.\r\nI am using Java and Jersey.\r\n\r\nI am using this version of Jersey:\r\njersey-client-1.0.3.jar\r\njersey-core-1.0.3.jar\r\njersey-json-1.0.3.jar\r\njersey-server-1.0.3.jar\r\n\r\nI cannot upgrade that easily, it&#39;s not up to me.\r\n\r\n\r\n\r\n\r\n    package com.company.module.test;\r\n    \r\n    import java.net.URI;\r\n    \r\n    import javax.ws.rs.core.MediaType;\r\n    import javax.ws.rs.core.UriBuilder;\r\n    \r\n    import com.sun.jersey.api.client.Client;\r\n    import com.sun.jersey.api.client.WebResource;\r\n    import com.sun.jersey.api.client.config.ClientConfig;\r\n    import com.sun.jersey.api.client.config.DefaultClientConfig;\r\n    import com.company.common.DateUtil;\r\n    import com.company.module.input.AssetOperation;\r\n    import com.company.module.input.AssetOperationData;\r\n    \r\n    public class MainProg002 {\r\n    \r\n        public static void main(String[] args) throws Exception {\r\n            ClientConfig config = new DefaultClientConfig();\r\n            Client client = Client.create(config);\r\n            WebResource service = client.resource(getBaseURI());\r\n            \r\n            AssetOperationData data = new AssetOperationData();\r\n            AssetOperation op1 = new AssetOperation();\r\n            op1.setAssetID(&quot;1234&quot;);\r\n            op1.setDate(DateUtil.getDate(2013, 12, 22));\r\n            op1.setOperation(&quot;pause&quot;);\r\n            AssetOperation op2 = new AssetOperation();\r\n            op2.setAssetID(&quot;5050&quot;);\r\n            op2.setDate(DateUtil.getDate(2013, 12, 5));\r\n            op2.setOperation(&quot;resume&quot;);\r\n            data.getAssetOperations().add(op1);\r\n            data.getAssetOperations().add(op2);\r\n            \r\n            service.path(&quot;Asset&quot;).entity(data, MediaType.APPLICATION_XML).post(AssetOperationData.class, data);\r\n        }\r\n        \r\n        private static URI getBaseURI() {\r\n            return UriBuilder.fromUri(&quot;http://localhost:8080/module/service&quot;).build();\r\n        }\r\n    }\r\n    \r\n    \r\n\r\nSeems to me the problem is then that the client cannot unmarshal some objects properly on the client side. Below is the exception which I get. I think it has something to do with element namespaces in XSD. I have no idea how to tell the client to use a particular XSD.\r\n\r\nAlso, I am not sure if that&#39;s needed at all, because the RESTful service returns JSON in this case. Also I am puzzled by the fact that the exception mentions &quot;input&quot; which is an element from the arguments, not from the return values!\r\n\r\n\r\n    Exception in thread &quot;main&quot; javax.ws.rs.WebApplicationException: javax.xml.bind.UnmarshalException\r\n     - with linked exception:\r\n    [javax.xml.bind.UnmarshalException: unexpected element (uri:&quot;&quot;, local:&quot;input&quot;). Expected elements are &lt;{http://company.com/module/input}input&gt;]\r\n    \tat com.sun.jersey.core.provider.jaxb.AbstractRootElementProvider.readFrom(AbstractRootElementProvider.java:99)\r\n    \tat com.sun.jersey.api.client.ClientResponse.getEntity(ClientResponse.java:259)\r\n    \tat com.sun.jersey.api.client.ClientResponse.getEntity(ClientResponse.java:220)\r\n    \tat com.sun.jersey.api.client.WebResource.handle(WebResource.java:561)\r\n    \tat com.sun.jersey.api.client.WebResource.access$300(WebResource.java:69)\r\n    \tat com.sun.jersey.api.client.WebResource$Builder.post(WebResource.java:499)\r\n    \tat com.company.module.test.MainProg002.main(MainProg002.java:36)\r\n    Caused by: javax.xml.bind.UnmarshalException\r\n     - with linked exception:\r\n    [javax.xml.bind.UnmarshalException: unexpected element (uri:&quot;&quot;, local:&quot;input&quot;). Expected elements are &lt;{http://company.com/module/input}input&gt;]\r\n    \tat com.sun.xml.bind.v2.runtime.unmarshaller.UnmarshallerImpl.handleStreamException(UnmarshallerImpl.java:435)\r\n    \tat com.sun.xml.bind.v2.runtime.unmarshaller.UnmarshallerImpl.unmarshal0(UnmarshallerImpl.java:372)\r\n    \tat com.sun.xml.bind.v2.runtime.unmarshaller.UnmarshallerImpl.unmarshal(UnmarshallerImpl.java:342)\r\n    \tat com.sun.jersey.json.impl.provider.entity.JSONRootElementProvider.readFrom(JSONRootElementProvider.java:110)\r\n    \tat com.sun.jersey.core.provider.jaxb.AbstractRootElementProvider.readFrom(AbstractRootElementProvider.java:97)\r\n    \t... 6 more\r\n    Caused by: javax.xml.bind.UnmarshalException: unexpected element (uri:&quot;&quot;, local:&quot;input&quot;). Expected elements are &lt;{http://company.com/module/input}input&gt;\r\n    \tat com.sun.xml.bind.v2.runtime.unmarshaller.UnmarshallingContext.handleEvent(UnmarshallingContext.java:662)\r\n    \tat com.sun.xml.bind.v2.runtime.unmarshaller.Loader.reportError(Loader.java:258)\r\n    \tat com.sun.xml.bind.v2.runtime.unmarshaller.Loader.reportError(Loader.java:253)\r\n    \tat com.sun.xml.bind.v2.runtime.unmarshaller.Loader.reportUnexpectedChildElement(Loader.java:120)\r\n    \tat com.sun.xml.bind.v2.runtime.unmarshaller.UnmarshallingContext$DefaultRootLoader.childElement(UnmarshallingContext.java:1063)\r\n    \tat com.sun.xml.bind.v2.runtime.unmarshaller.UnmarshallingContext._startElement(UnmarshallingContext.java:498)\r\n    \tat com.sun.xml.bind.v2.runtime.unmarshaller.UnmarshallingContext.startElement(UnmarshallingContext.java:480)\r\n    \tat com.sun.xml.bind.v2.runtime.unmarshaller.InterningXmlVisitor.startElement(InterningXmlVisitor.java:75)\r\n    \tat com.sun.xml.bind.v2.runtime.unmarshaller.StAXStreamConnector.handleStartElement(StAXStreamConnector.java:246)\r\n    \tat com.sun.xml.bind.v2.runtime.unmarshaller.StAXStreamConnector.bridge(StAXStreamConnector.java:180)\r\n    \tat com.sun.xml.bind.v2.runtime.unmarshaller.UnmarshallerImpl.unmarshal0(UnmarshallerImpl.java:370)\r\n    \t... 9 more\r\n    Caused by: javax.xml.bind.UnmarshalException: unexpected element (uri:&quot;&quot;, local:&quot;input&quot;). Expected elements are &lt;{http://company.com/module/input}input&gt;\r\n    \t... 20 more\r\n    Picked up JAVA_TOOL_OPTIONS: -Dfile.encoding=UTF8\r\n   \r\n\r\nOn the client side: \r\n\r\n    1 * Out-bound request\r\n    1 &gt; POST http://localhost:8080/module/service/Asset\r\n    1 &gt; Content-Type: application/xml\r\n    1 &gt; \r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;&lt;input xmlns=&quot;http://company.com/module/input&quot;&gt;&lt;item&gt;&lt;assetID&gt;1234&lt;/assetID&gt;&lt;date&gt;2014-01-22-05:00&lt;/date&gt;&lt;operation&gt;pause&lt;/operation&gt;&lt;/item&gt;&lt;item&gt;&lt;assetID&gt;5050&lt;/assetID&gt;&lt;date&gt;2014-01-05-05:00&lt;/date&gt;&lt;operation&gt;resume&lt;/operation&gt;&lt;/item&gt;&lt;/input&gt;\r\n    1 &lt; 200\r\n    1 &lt; Transfer-Encoding: chunked\r\n    1 &lt; Content-Type: application/json\r\n    1 &lt; Server: Apache-Coyote/1.1\r\n    1 &lt; Date: Sat, 09 Nov 2013 20:23:22 GMT\r\n    1 &lt; \r\n    {&quot;error&quot;:&quot;&quot;,&quot;id&quot;:&quot;10&quot;}\r\n    1 * In-bound response\r\n    \r\n    \r\n\r\nThis is how my method looks like.\r\n\r\n    @POST\r\n    @Consumes(MediaType.APPLICATION_XML)\r\n    @Produces(MediaType.APPLICATION_JSON)\r\n    public AssetResult manageAssets(AssetOperationData data) {\r\n        LogProvider.logInfo(this, &quot;BEGIN&quot;);\r\n        LogProvider.logInfo(this, &quot;Found POST data = &quot; + data);\r\n        AssetResult result = new AssetResult();\r\n        result.setId(10);\r\n        LogProvider.logInfo(this, &quot;END&quot;);\r\n        return result;\r\n    }\r\n\r\n\r\n","title":"RESTful WS - Jersey - client side unmarshalling issue","body":"<p>I am trying to call a REST WS which I built myself.\nBelow is my code on the client side.\nOn the server side this call completes fine,\nI can see the arguments which I want to see\nin the debugger. The method is POST,\nhas an XML argument, returns JSON.\nI am using Java and Jersey.</p>\n<p>I am using this version of Jersey:\njersey-client-1.0.3.jar\njersey-core-1.0.3.jar\njersey-json-1.0.3.jar\njersey-server-1.0.3.jar</p>\n<p>I cannot upgrade that easily, it's not up to me.</p>\n<pre><code>package com.company.module.test;\n\nimport java.net.URI;\n\nimport javax.ws.rs.core.MediaType;\nimport javax.ws.rs.core.UriBuilder;\n\nimport com.sun.jersey.api.client.Client;\nimport com.sun.jersey.api.client.WebResource;\nimport com.sun.jersey.api.client.config.ClientConfig;\nimport com.sun.jersey.api.client.config.DefaultClientConfig;\nimport com.company.common.DateUtil;\nimport com.company.module.input.AssetOperation;\nimport com.company.module.input.AssetOperationData;\n\npublic class MainProg002 {\n\n    public static void main(String[] args) throws Exception {\n        ClientConfig config = new DefaultClientConfig();\n        Client client = Client.create(config);\n        WebResource service = client.resource(getBaseURI());\n        \n        AssetOperationData data = new AssetOperationData();\n        AssetOperation op1 = new AssetOperation();\n        op1.setAssetID(&quot;1234&quot;);\n        op1.setDate(DateUtil.getDate(2013, 12, 22));\n        op1.setOperation(&quot;pause&quot;);\n        AssetOperation op2 = new AssetOperation();\n        op2.setAssetID(&quot;5050&quot;);\n        op2.setDate(DateUtil.getDate(2013, 12, 5));\n        op2.setOperation(&quot;resume&quot;);\n        data.getAssetOperations().add(op1);\n        data.getAssetOperations().add(op2);\n        \n        service.path(&quot;Asset&quot;).entity(data, MediaType.APPLICATION_XML).post(AssetOperationData.class, data);\n    }\n    \n    private static URI getBaseURI() {\n        return UriBuilder.fromUri(&quot;http://localhost:8080/module/service&quot;).build();\n    }\n}\n</code></pre>\n<p>Seems to me the problem is then that the client cannot unmarshal some objects properly on the client side. Below is the exception which I get. I think it has something to do with element namespaces in XSD. I have no idea how to tell the client to use a particular XSD.</p>\n<p>Also, I am not sure if that's needed at all, because the RESTful service returns JSON in this case. Also I am puzzled by the fact that the exception mentions &quot;input&quot; which is an element from the arguments, not from the return values!</p>\n<pre><code>Exception in thread &quot;main&quot; javax.ws.rs.WebApplicationException: javax.xml.bind.UnmarshalException\n - with linked exception:\n[javax.xml.bind.UnmarshalException: unexpected element (uri:&quot;&quot;, local:&quot;input&quot;). Expected elements are &lt;{http://company.com/module/input}input&gt;]\n    at com.sun.jersey.core.provider.jaxb.AbstractRootElementProvider.readFrom(AbstractRootElementProvider.java:99)\n    at com.sun.jersey.api.client.ClientResponse.getEntity(ClientResponse.java:259)\n    at com.sun.jersey.api.client.ClientResponse.getEntity(ClientResponse.java:220)\n    at com.sun.jersey.api.client.WebResource.handle(WebResource.java:561)\n    at com.sun.jersey.api.client.WebResource.access$300(WebResource.java:69)\n    at com.sun.jersey.api.client.WebResource$Builder.post(WebResource.java:499)\n    at com.company.module.test.MainProg002.main(MainProg002.java:36)\nCaused by: javax.xml.bind.UnmarshalException\n - with linked exception:\n[javax.xml.bind.UnmarshalException: unexpected element (uri:&quot;&quot;, local:&quot;input&quot;). Expected elements are &lt;{http://company.com/module/input}input&gt;]\n    at com.sun.xml.bind.v2.runtime.unmarshaller.UnmarshallerImpl.handleStreamException(UnmarshallerImpl.java:435)\n    at com.sun.xml.bind.v2.runtime.unmarshaller.UnmarshallerImpl.unmarshal0(UnmarshallerImpl.java:372)\n    at com.sun.xml.bind.v2.runtime.unmarshaller.UnmarshallerImpl.unmarshal(UnmarshallerImpl.java:342)\n    at com.sun.jersey.json.impl.provider.entity.JSONRootElementProvider.readFrom(JSONRootElementProvider.java:110)\n    at com.sun.jersey.core.provider.jaxb.AbstractRootElementProvider.readFrom(AbstractRootElementProvider.java:97)\n    ... 6 more\nCaused by: javax.xml.bind.UnmarshalException: unexpected element (uri:&quot;&quot;, local:&quot;input&quot;). Expected elements are &lt;{http://company.com/module/input}input&gt;\n    at com.sun.xml.bind.v2.runtime.unmarshaller.UnmarshallingContext.handleEvent(UnmarshallingContext.java:662)\n    at com.sun.xml.bind.v2.runtime.unmarshaller.Loader.reportError(Loader.java:258)\n    at com.sun.xml.bind.v2.runtime.unmarshaller.Loader.reportError(Loader.java:253)\n    at com.sun.xml.bind.v2.runtime.unmarshaller.Loader.reportUnexpectedChildElement(Loader.java:120)\n    at com.sun.xml.bind.v2.runtime.unmarshaller.UnmarshallingContext$DefaultRootLoader.childElement(UnmarshallingContext.java:1063)\n    at com.sun.xml.bind.v2.runtime.unmarshaller.UnmarshallingContext._startElement(UnmarshallingContext.java:498)\n    at com.sun.xml.bind.v2.runtime.unmarshaller.UnmarshallingContext.startElement(UnmarshallingContext.java:480)\n    at com.sun.xml.bind.v2.runtime.unmarshaller.InterningXmlVisitor.startElement(InterningXmlVisitor.java:75)\n    at com.sun.xml.bind.v2.runtime.unmarshaller.StAXStreamConnector.handleStartElement(StAXStreamConnector.java:246)\n    at com.sun.xml.bind.v2.runtime.unmarshaller.StAXStreamConnector.bridge(StAXStreamConnector.java:180)\n    at com.sun.xml.bind.v2.runtime.unmarshaller.UnmarshallerImpl.unmarshal0(UnmarshallerImpl.java:370)\n    ... 9 more\nCaused by: javax.xml.bind.UnmarshalException: unexpected element (uri:&quot;&quot;, local:&quot;input&quot;). Expected elements are &lt;{http://company.com/module/input}input&gt;\n    ... 20 more\nPicked up JAVA_TOOL_OPTIONS: -Dfile.encoding=UTF8\n</code></pre>\n<p>On the client side:</p>\n<pre><code>1 * Out-bound request\n1 &gt; POST http://localhost:8080/module/service/Asset\n1 &gt; Content-Type: application/xml\n1 &gt; \n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;&lt;input xmlns=&quot;http://company.com/module/input&quot;&gt;&lt;item&gt;&lt;assetID&gt;1234&lt;/assetID&gt;&lt;date&gt;2014-01-22-05:00&lt;/date&gt;&lt;operation&gt;pause&lt;/operation&gt;&lt;/item&gt;&lt;item&gt;&lt;assetID&gt;5050&lt;/assetID&gt;&lt;date&gt;2014-01-05-05:00&lt;/date&gt;&lt;operation&gt;resume&lt;/operation&gt;&lt;/item&gt;&lt;/input&gt;\n1 &lt; 200\n1 &lt; Transfer-Encoding: chunked\n1 &lt; Content-Type: application/json\n1 &lt; Server: Apache-Coyote/1.1\n1 &lt; Date: Sat, 09 Nov 2013 20:23:22 GMT\n1 &lt; \n{&quot;error&quot;:&quot;&quot;,&quot;id&quot;:&quot;10&quot;}\n1 * In-bound response\n</code></pre>\n<p>This is how my method looks like.</p>\n<pre><code>@POST\n@Consumes(MediaType.APPLICATION_XML)\n@Produces(MediaType.APPLICATION_JSON)\npublic AssetResult manageAssets(AssetOperationData data) {\n    LogProvider.logInfo(this, &quot;BEGIN&quot;);\n    LogProvider.logInfo(this, &quot;Found POST data = &quot; + data);\n    AssetResult result = new AssetResult();\n    result.setId(10);\n    LogProvider.logInfo(this, &quot;END&quot;);\n    return result;\n}\n</code></pre>\n"},{"tags":["java","hashtable"],"answers":[{"tags":[],"owner":{"account_id":247613,"reputation":284087,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1297546438,"creation_date":1297546438,"answer_id":4980769,"question_id":4980757,"body_markdown":"It will use the equals method to see if the key is present even and especially if there are more than one element in the same bucket.","title":"How do HashTables deal with collisions?","body":"<p>It will use the equals method to see if the key is present even and especially if there are more than one element in the same bucket.</p>\n"},{"tags":[],"owner":{"account_id":9193,"reputation":343113,"user_id":16883,"accept_rate":83,"display_name":"Michael Borgwardt"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1558356981,"creation_date":1297546726,"answer_id":4980789,"question_id":4980757,"body_markdown":"&gt; I&#39;ve heard in my degree classes that a\r\n&gt; HashTable will place a new entry into\r\n&gt; the &#39;next available&#39; bucket if the new\r\n&gt; Key entry collides with another.\r\n\r\nThis is actually not true, at least for the Oracle JDK (it *is* an implementation detail that could vary between different implementations of the API). Instead, each bucket contains a linked list of entries prior to Java 8, and a balanced tree in Java 8 or above.\r\n\r\n&gt; then how would the HashTable still\r\n&gt; return the correct Value if this\r\n&gt; collision occurs when calling for one\r\n&gt; back with the collision key?\r\n\r\nIt uses the `equals()` to find the actually matching entry.\r\n\r\n&gt; If I implement my own hashing function\r\n&gt; and use it as part of a look-up table\r\n&gt; (i.e. a HashMap or Dictionary), what\r\n&gt; strategies exist for dealing with\r\n&gt; collisions?\r\n\r\nThere are various collision handling strategies with different advantages and disadvantages.\r\n[Wikipedia&#39;s entry on hash tables][1] gives a good overview.\r\n\r\n\r\n  [1]: http://en.wikipedia.org/wiki/Hash_table#Collision_resolution","title":"How do HashTables deal with collisions?","body":"<blockquote>\n  <p>I've heard in my degree classes that a\n  HashTable will place a new entry into\n  the 'next available' bucket if the new\n  Key entry collides with another.</p>\n</blockquote>\n\n<p>This is actually not true, at least for the Oracle JDK (it <em>is</em> an implementation detail that could vary between different implementations of the API). Instead, each bucket contains a linked list of entries prior to Java 8, and a balanced tree in Java 8 or above.</p>\n\n<blockquote>\n  <p>then how would the HashTable still\n  return the correct Value if this\n  collision occurs when calling for one\n  back with the collision key?</p>\n</blockquote>\n\n<p>It uses the <code>equals()</code> to find the actually matching entry.</p>\n\n<blockquote>\n  <p>If I implement my own hashing function\n  and use it as part of a look-up table\n  (i.e. a HashMap or Dictionary), what\n  strategies exist for dealing with\n  collisions?</p>\n</blockquote>\n\n<p>There are various collision handling strategies with different advantages and disadvantages.\n<a href=\"http://en.wikipedia.org/wiki/Hash_table#Collision_resolution\" rel=\"nofollow noreferrer\">Wikipedia's entry on hash tables</a> gives a good overview.</p>\n"},{"tags":[],"owner":{"account_id":82500,"reputation":38454,"user_id":231917,"accept_rate":98,"display_name":"zengr"},"down_vote_count":0,"up_vote_count":18,"is_accepted":false,"score":18,"last_activity_date":1297546815,"creation_date":1297546815,"answer_id":4980796,"question_id":4980757,"body_markdown":"I strongly suggest you to read this blog post which appeared on HackerNews recently: \r\n[How HashMap works in Java][1]\r\n\r\nIn short, the answer is\r\n\r\n&gt; What will happen if two different\r\n&gt; HashMap key objects have same\r\n&gt; hashcode?\r\n&gt; \r\n&gt; They will be stored in same bucket but\r\n&gt; no next node of linked list. And keys\r\n&gt; equals () method will be used to\r\n&gt; identify correct key value pair in\r\n&gt; HashMap.\r\n\r\n\r\n  [1]: http://javarevisited.blogspot.com/2011/02/how-hashmap-works-in-java.html","title":"How do HashTables deal with collisions?","body":"<p>I strongly suggest you to read this blog post which appeared on HackerNews recently: \n<a href=\"http://javarevisited.blogspot.com/2011/02/how-hashmap-works-in-java.html\" rel=\"noreferrer\">How HashMap works in Java</a></p>\n\n<p>In short, the answer is</p>\n\n<blockquote>\n  <p>What will happen if two different\n  HashMap key objects have same\n  hashcode?</p>\n  \n  <p>They will be stored in same bucket but\n  no next node of linked list. And keys\n  equals () method will be used to\n  identify correct key value pair in\n  HashMap.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":195439,"reputation":60906,"user_id":438319,"accept_rate":73,"display_name":"ams"},"down_vote_count":2,"up_vote_count":110,"is_accepted":true,"score":108,"last_activity_date":1492009108,"creation_date":1297546820,"answer_id":4980797,"question_id":4980757,"body_markdown":"Hash tables deal with collisions in one of two ways. \r\n\r\n**Option 1:** By having each bucket contain a linked list of elements that are hashed to that bucket. This is why a bad hash function can make lookups in hash tables very slow.\r\n\r\n**Option 2:** If the hash table entries are all full then the hash table can increase the number of buckets that it has and then redistribute all the elements in the table. The hash function returns an integer and the hash table has to take the result of the hash function and mod it against the size of the table that way it can be sure it will get to bucket. So by increasing the size, it will rehash and run the modulo calculations which if you are lucky might send the objects to different buckets.\r\n\r\nJava uses both option 1 and 2 in its hash table implementations.","title":"How do HashTables deal with collisions?","body":"<p>Hash tables deal with collisions in one of two ways. </p>\n\n<p><strong>Option 1:</strong> By having each bucket contain a linked list of elements that are hashed to that bucket. This is why a bad hash function can make lookups in hash tables very slow.</p>\n\n<p><strong>Option 2:</strong> If the hash table entries are all full then the hash table can increase the number of buckets that it has and then redistribute all the elements in the table. The hash function returns an integer and the hash table has to take the result of the hash function and mod it against the size of the table that way it can be sure it will get to bucket. So by increasing the size, it will rehash and run the modulo calculations which if you are lucky might send the objects to different buckets.</p>\n\n<p>Java uses both option 1 and 2 in its hash table implementations.</p>\n"},{"tags":[],"owner":{"account_id":295869,"reputation":73614,"user_id":600500,"accept_rate":54,"display_name":"Paŭlo Ebermann"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1297550166,"creation_date":1297550166,"answer_id":4981071,"question_id":4980757,"body_markdown":"As there is some confusion about which algorithm Java&#39;s HashMap is using (in the Sun/Oracle/OpenJDK implementation), here the relevant source code snippets (from OpenJDK, 1.6.0_20, on Ubuntu):\r\n\r\n    /**\r\n     * Returns the entry associated with the specified key in the\r\n     * HashMap.  Returns null if the HashMap contains no mapping\r\n     * for the key.\r\n     */\r\n    final Entry&lt;K,V&gt; getEntry(Object key) {\r\n        int hash = (key == null) ? 0 : hash(key.hashCode());\r\n        for (Entry&lt;K,V&gt; e = table[indexFor(hash, table.length)];\r\n             e != null;\r\n             e = e.next) {\r\n            Object k;\r\n            if (e.hash == hash &amp;&amp;\r\n                ((k = e.key) == key || (key != null &amp;&amp; key.equals(k))))\r\n                return e;\r\n        }\r\n        return null;\r\n    }\r\n\r\nThis method (cite is from lines 355 to 371) is called when looking up an entry in the table, for example from `get()`, `containsKey()` and some others. The for loop here goes through the linked list formed by the entry objects.\r\n\r\nHere the code for the entry objects (lines 691-705 + 759):\r\n\r\n    static class Entry&lt;K,V&gt; implements Map.Entry&lt;K,V&gt; {\r\n        final K key;\r\n        V value;\r\n        Entry&lt;K,V&gt; next;\r\n        final int hash;\r\n\r\n        /**\r\n         * Creates new entry.\r\n         */\r\n        Entry(int h, K k, V v, Entry&lt;K,V&gt; n) {\r\n            value = v;\r\n            next = n;\r\n            key = k;\r\n            hash = h;\r\n        }\r\n\r\n      // (methods left away, they are straight-forward implementations of Map.Entry)\r\n\r\n    }\r\n\r\nRight after this comes the `addEntry()` method:\r\n\r\n    /**\r\n     * Adds a new entry with the specified key, value and hash code to\r\n     * the specified bucket.  It is the responsibility of this\r\n     * method to resize the table if appropriate.\r\n     *\r\n     * Subclass overrides this to alter the behavior of put method.\r\n     */\r\n    void addEntry(int hash, K key, V value, int bucketIndex) {\r\n        Entry&lt;K,V&gt; e = table[bucketIndex];\r\n        table[bucketIndex] = new Entry&lt;K,V&gt;(hash, key, value, e);\r\n        if (size++ &gt;= threshold)\r\n            resize(2 * table.length);\r\n    }\r\n\r\nThis adds the new Entry on the front of the bucket, with a link to the old *first* entry (or null, if no such one). Similarily, the `removeEntryForKey()` method goes through the list and takes care of deleting only one entry, letting the rest of the list intact.\r\n\r\n\r\nSo, here is a linked entry list for each bucket, and I very doubt that this changed from `_20` to `_22`, since it was like this from 1.2 on.\r\n\r\n(This code is (c) 1997-2007 Sun Microsystems, and available under GPL, but for copying better use the original file, contained in src.zip in each JDK from Sun/Oracle, and also in OpenJDK.)","title":"How do HashTables deal with collisions?","body":"<p>As there is some confusion about which algorithm Java's HashMap is using (in the Sun/Oracle/OpenJDK implementation), here the relevant source code snippets (from OpenJDK, 1.6.0_20, on Ubuntu):</p>\n\n<pre><code>/**\n * Returns the entry associated with the specified key in the\n * HashMap.  Returns null if the HashMap contains no mapping\n * for the key.\n */\nfinal Entry&lt;K,V&gt; getEntry(Object key) {\n    int hash = (key == null) ? 0 : hash(key.hashCode());\n    for (Entry&lt;K,V&gt; e = table[indexFor(hash, table.length)];\n         e != null;\n         e = e.next) {\n        Object k;\n        if (e.hash == hash &amp;&amp;\n            ((k = e.key) == key || (key != null &amp;&amp; key.equals(k))))\n            return e;\n    }\n    return null;\n}\n</code></pre>\n\n<p>This method (cite is from lines 355 to 371) is called when looking up an entry in the table, for example from <code>get()</code>, <code>containsKey()</code> and some others. The for loop here goes through the linked list formed by the entry objects.</p>\n\n<p>Here the code for the entry objects (lines 691-705 + 759):</p>\n\n<pre><code>static class Entry&lt;K,V&gt; implements Map.Entry&lt;K,V&gt; {\n    final K key;\n    V value;\n    Entry&lt;K,V&gt; next;\n    final int hash;\n\n    /**\n     * Creates new entry.\n     */\n    Entry(int h, K k, V v, Entry&lt;K,V&gt; n) {\n        value = v;\n        next = n;\n        key = k;\n        hash = h;\n    }\n\n  // (methods left away, they are straight-forward implementations of Map.Entry)\n\n}\n</code></pre>\n\n<p>Right after this comes the <code>addEntry()</code> method:</p>\n\n<pre><code>/**\n * Adds a new entry with the specified key, value and hash code to\n * the specified bucket.  It is the responsibility of this\n * method to resize the table if appropriate.\n *\n * Subclass overrides this to alter the behavior of put method.\n */\nvoid addEntry(int hash, K key, V value, int bucketIndex) {\n    Entry&lt;K,V&gt; e = table[bucketIndex];\n    table[bucketIndex] = new Entry&lt;K,V&gt;(hash, key, value, e);\n    if (size++ &gt;= threshold)\n        resize(2 * table.length);\n}\n</code></pre>\n\n<p>This adds the new Entry on the front of the bucket, with a link to the old <em>first</em> entry (or null, if no such one). Similarily, the <code>removeEntryForKey()</code> method goes through the list and takes care of deleting only one entry, letting the rest of the list intact.</p>\n\n<p>So, here is a linked entry list for each bucket, and I very doubt that this changed from <code>_20</code> to <code>_22</code>, since it was like this from 1.2 on.</p>\n\n<p>(This code is (c) 1997-2007 Sun Microsystems, and available under GPL, but for copying better use the original file, contained in src.zip in each JDK from Sun/Oracle, and also in OpenJDK.)</p>\n"},{"tags":[],"owner":{"account_id":134964,"reputation":22313,"user_id":337455,"accept_rate":80,"display_name":"Jeffrey Blattman"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1425242057,"creation_date":1364328917,"answer_id":15646538,"question_id":4980757,"body_markdown":"here&#39;s a very simple hash table implementation in java. in only implements `put()` and `get()`, but you can easily add whatever you like. it relies on java&#39;s `hashCode()` method that is implemented by all objects. you could easily create your own interface,\r\n\r\n\r\n    interface Hashable {\r\n      int getHash();\r\n    }\r\n\r\nand force it to be implemented by the keys if you like.\r\n\r\n\r\n    public class Hashtable&lt;K, V&gt; {\r\n    \tprivate static class Entry&lt;K,V&gt; {\r\n    \t\tprivate final K key;\r\n    \t\tprivate final V val;\r\n    \t\t\r\n    \t\tEntry(K key, V val) {\r\n    \t\t\tthis.key = key;\r\n    \t\t\tthis.val = val;\r\n    \t\t}\r\n    \t}\r\n    \t\r\n    \tprivate static int BUCKET_COUNT = 13;\r\n    \t\r\n    \t@SuppressWarnings(&quot;unchecked&quot;)\r\n    \tprivate List&lt;Entry&gt;[] buckets = new List[BUCKET_COUNT];\r\n    \t\r\n    \tpublic Hashtable() {\r\n    \t\tfor (int i = 0, l = buckets.length; i &lt; l; i++) {\r\n    \t\t\tbuckets[i] = new ArrayList&lt;Entry&lt;K,V&gt;&gt;();\r\n    \t\t}\r\n    \t}\r\n    \t\r\n    \tpublic V get(K key) {\r\n    \t\tint b = key.hashCode() % BUCKET_COUNT;\r\n    \t\tList&lt;Entry&gt; entries = buckets[b];\r\n    \t\tfor (Entry e: entries) {\r\n    \t\t\tif (e.key.equals(key)) {\r\n    \t\t\t\treturn e.val;\r\n    \t\t\t}\r\n    \t\t}\r\n    \t\treturn null;\r\n    \t}\r\n    \t\r\n    \tpublic void put(K key, V val) {\r\n    \t\tint b = key.hashCode() % BUCKET_COUNT;\r\n    \t\tList&lt;Entry&gt; entries = buckets[b];\r\n    \t\tentries.add(new Entry&lt;K,V&gt;(key, val));\r\n    \t}\r\n    }\r\n\r\n\r\n\r\n","title":"How do HashTables deal with collisions?","body":"<p>here's a very simple hash table implementation in java. in only implements <code>put()</code> and <code>get()</code>, but you can easily add whatever you like. it relies on java's <code>hashCode()</code> method that is implemented by all objects. you could easily create your own interface,</p>\n\n<pre><code>interface Hashable {\n  int getHash();\n}\n</code></pre>\n\n<p>and force it to be implemented by the keys if you like.</p>\n\n<pre><code>public class Hashtable&lt;K, V&gt; {\n    private static class Entry&lt;K,V&gt; {\n        private final K key;\n        private final V val;\n\n        Entry(K key, V val) {\n            this.key = key;\n            this.val = val;\n        }\n    }\n\n    private static int BUCKET_COUNT = 13;\n\n    @SuppressWarnings(\"unchecked\")\n    private List&lt;Entry&gt;[] buckets = new List[BUCKET_COUNT];\n\n    public Hashtable() {\n        for (int i = 0, l = buckets.length; i &lt; l; i++) {\n            buckets[i] = new ArrayList&lt;Entry&lt;K,V&gt;&gt;();\n        }\n    }\n\n    public V get(K key) {\n        int b = key.hashCode() % BUCKET_COUNT;\n        List&lt;Entry&gt; entries = buckets[b];\n        for (Entry e: entries) {\n            if (e.key.equals(key)) {\n                return e.val;\n            }\n        }\n        return null;\n    }\n\n    public void put(K key, V val) {\n        int b = key.hashCode() % BUCKET_COUNT;\n        List&lt;Entry&gt; entries = buckets[b];\n        entries.add(new Entry&lt;K,V&gt;(key, val));\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2190508,"reputation":193,"user_id":1937685,"display_name":"Infusion of Wormwood n Asfodel"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1371190295,"creation_date":1371190295,"answer_id":17102148,"question_id":4980757,"body_markdown":"There are various methods for collision resolution.Some of them are Separate Chaining,Open addressing,Robin Hood hashing,Cuckoo Hashing etc.\r\n\r\nJava uses Separate Chaining for resolving collisions in Hash tables.Here is a great link to how it happens:\r\nhttp://javapapers.com/core-java/java-hashtable/","title":"How do HashTables deal with collisions?","body":"<p>There are various methods for collision resolution.Some of them are Separate Chaining,Open addressing,Robin Hood hashing,Cuckoo Hashing etc.</p>\n\n<p>Java uses Separate Chaining for resolving collisions in Hash tables.Here is a great link to how it happens:\n<a href=\"http://javapapers.com/core-java/java-hashtable/\" rel=\"nofollow\">http://javapapers.com/core-java/java-hashtable/</a></p>\n"},{"tags":[],"owner":{"account_id":1238452,"reputation":49631,"user_id":2589776,"accept_rate":94,"display_name":"herohuyongtao"},"down_vote_count":0,"up_vote_count":93,"is_accepted":false,"score":93,"last_activity_date":1387451917,"creation_date":1387446247,"answer_id":20678111,"question_id":4980757,"body_markdown":"When you talked about &quot;Hash Table will place a new entry into the &#39;next available&#39; bucket if the new Key entry collides with another.&quot;, you are talking about the **Open addressing strategy** of Collision resolution of hash table.\r\n\r\n***\r\nThere are several strategies for hash table to resolve collision.\r\n\r\nFirst kind of big method require that the keys (or pointers to them) be stored in the table, together with the associated values, which further includes:\r\n\r\n* **Separate chaining** \r\n\r\n![enter image description here][1]\r\n\r\n* **Open addressing**\r\n\r\n![enter image description here][2]\r\n\r\n* **Coalesced hashing**\r\n* **Cuckoo hashing**\r\n* **Robin Hood hashing**\r\n* **2-choice hashing**\r\n* **Hopscotch hashing**\r\n\r\n---\r\nAnother important method to handle collision is by **Dynamic resizing**, which further has several ways:\r\n\r\n* **Resizing by copying all entries**\r\n* **Incremental resizing**\r\n* **Monotonic keys**\r\n\r\n***\r\n**EDIT**: the above are borrowed from [wiki_hash_table](http://en.wikipedia.org/wiki/Hash_table#Collision_resolution), where you should go to have a look to get more info.\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/JGX80.png\r\n  [2]: http://i.stack.imgur.com/diHhF.png","title":"How do HashTables deal with collisions?","body":"<p>When you talked about \"Hash Table will place a new entry into the 'next available' bucket if the new Key entry collides with another.\", you are talking about the <strong>Open addressing strategy</strong> of Collision resolution of hash table.</p>\n\n<hr>\n\n<p>There are several strategies for hash table to resolve collision.</p>\n\n<p>First kind of big method require that the keys (or pointers to them) be stored in the table, together with the associated values, which further includes:</p>\n\n<ul>\n<li><strong>Separate chaining</strong> </li>\n</ul>\n\n<p><img src=\"https://i.stack.imgur.com/JGX80.png\" alt=\"enter image description here\"></p>\n\n<ul>\n<li><strong>Open addressing</strong></li>\n</ul>\n\n<p><img src=\"https://i.stack.imgur.com/diHhF.png\" alt=\"enter image description here\"></p>\n\n<ul>\n<li><strong>Coalesced hashing</strong></li>\n<li><strong>Cuckoo hashing</strong></li>\n<li><strong>Robin Hood hashing</strong></li>\n<li><strong>2-choice hashing</strong></li>\n<li><strong>Hopscotch hashing</strong></li>\n</ul>\n\n<hr>\n\n<p>Another important method to handle collision is by <strong>Dynamic resizing</strong>, which further has several ways:</p>\n\n<ul>\n<li><strong>Resizing by copying all entries</strong></li>\n<li><strong>Incremental resizing</strong></li>\n<li><strong>Monotonic keys</strong></li>\n</ul>\n\n<hr>\n\n<p><strong>EDIT</strong>: the above are borrowed from <a href=\"http://en.wikipedia.org/wiki/Hash_table#Collision_resolution\">wiki_hash_table</a>, where you should go to have a look to get more info.</p>\n"},{"tags":[],"owner":{"account_id":6543898,"reputation":719,"user_id":5060478,"display_name":"Jatinder Pal"},"down_vote_count":0,"up_vote_count":34,"is_accepted":false,"score":34,"last_activity_date":1541909403,"creation_date":1435753373,"answer_id":31161193,"question_id":4980757,"body_markdown":"There are multiple techniques available to handle collision. I will explain some of them\r\n\r\n**Chaining:**\r\nIn chaining we use array indexes to store the values. If hash code of second value also points to the same index then we replace that index value with an linked list and all values pointing to that index are stored in the linked list and actual array index points to the head of the the linked list.\r\nBut if there is only one hash code pointing to an index of array then the value is directly stored in that index. Same logic is applied while retrieving the values. This is used in Java HashMap/Hashtable to avoid collisions.\r\n\r\n**Linear probing:** This technique is used when we have more index in the table than the values to be stored. Linear probing technique works on the concept of keep incrementing until you find an empty slot. The pseudo code looks like this:\r\n    \r\n    index = h(k) \r\n\r\n    while( val(index) is occupied) \r\n\r\n    index = (index+1) mod n\r\n\r\n\r\n**Double hashing technique:** In this technique we use two hashing functions h1(k) and h2(k). If the slot at h1(k) is occupied then the second hashing function h2(k) used to increment the index. The pseudo-code looks like this:\r\n\r\n    index = h1(k)\r\n\r\n    while( val(index) is occupied)\r\n\r\n    index = (index + h2(k)) mod n\r\n\r\nLinear probing and double hashing techniques are part of open addressing technique and it can only be used if available slots are more than the number of items to be added. It takes less memory than chaining because there is no extra structure used here but its slow because of lot of movement happen until we find an empty slot. Also in open addressing technique when an item is removed from a slot we put an tombstone to indicate that the item is removed from here that is why its empty.\r\n\r\nFor more information see [this site](http://coder2design.com/hashing/).","title":"How do HashTables deal with collisions?","body":"<p>There are multiple techniques available to handle collision. I will explain some of them</p>\n\n<p><strong>Chaining:</strong>\nIn chaining we use array indexes to store the values. If hash code of second value also points to the same index then we replace that index value with an linked list and all values pointing to that index are stored in the linked list and actual array index points to the head of the the linked list.\nBut if there is only one hash code pointing to an index of array then the value is directly stored in that index. Same logic is applied while retrieving the values. This is used in Java HashMap/Hashtable to avoid collisions.</p>\n\n<p><strong>Linear probing:</strong> This technique is used when we have more index in the table than the values to be stored. Linear probing technique works on the concept of keep incrementing until you find an empty slot. The pseudo code looks like this:</p>\n\n<pre><code>index = h(k) \n\nwhile( val(index) is occupied) \n\nindex = (index+1) mod n\n</code></pre>\n\n<p><strong>Double hashing technique:</strong> In this technique we use two hashing functions h1(k) and h2(k). If the slot at h1(k) is occupied then the second hashing function h2(k) used to increment the index. The pseudo-code looks like this:</p>\n\n<pre><code>index = h1(k)\n\nwhile( val(index) is occupied)\n\nindex = (index + h2(k)) mod n\n</code></pre>\n\n<p>Linear probing and double hashing techniques are part of open addressing technique and it can only be used if available slots are more than the number of items to be added. It takes less memory than chaining because there is no extra structure used here but its slow because of lot of movement happen until we find an empty slot. Also in open addressing technique when an item is removed from a slot we put an tombstone to indicate that the item is removed from here that is why its empty.</p>\n\n<p>For more information see <a href=\"http://coder2design.com/hashing/\" rel=\"noreferrer\">this site</a>.</p>\n"},{"tags":[],"owner":{"account_id":2402456,"reputation":1067,"user_id":2099833,"accept_rate":62,"display_name":"Daniel Valland"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1533082452,"creation_date":1530825583,"answer_id":51200059,"question_id":4980757,"body_markdown":"**Update since Java 8:** Java 8 uses a self-balanced tree for collision-handling, improving the worst case from O(n) to O(log n) for lookup. The use of a self-balanced tree was introduced in Java 8 as an improvement over chaining (used until java 7), which uses a linked-list, and has a worst case of O(n) for lookup (as it needs to traverse the list)\n\nTo answer the second part of your question, insertion is done by mapping a given element to a given index in the underlying array of the hashmap, however, when a collision occurs, all elements must still be preserved (stored in a secondary data-structure, and not just replaced in the underlying array). This is usually done by making each array-component (slot) be a secondary datastructure (aka bucket), and the element is added to the bucket residing on the given array-index (if the key does not already exist in the bucket, in which case it is replaced).\n\nDuring lookup, the key is hashed to it&#39;s corresponding array-index, and search is performed for an element matching the (exact) key in the given bucket. Because the bucket does not need to handle collisions (compares keys directly), this solves the problem of collisions, but does so at the cost of having to perform insertion and lookup on the secondary datastructure. The key point is that in a hashmap, both the key and the value is stored, and so even if the hash collides, keys are compared directly for equality (in the bucket), and thus can be uniquely identified in the bucket.\n\nCollission-handling brings the worst-case performance of insertion and lookup from O(1) in the case of no collission-handling to O(n) for chaining (a linked-list is used as secondary datastructure) and O(log n) for self-balanced tree.\n\nReferences:\n\n&gt; Java 8 has come with the following improvements/changes of HashMap\n&gt; objects in case of high collisions.\n&gt; \n&gt; - The alternative String hash function added in Java 7 has been removed.\n&gt;\n&gt; - Buckets containing a large number of colliding keys will store their entries in a balanced tree instead of a linked list after\n&gt; certain threshold is reached.\n&gt; \n&gt; Above changes ensure performance of O(log(n)) in worst case scenarios\n(https://www.nagarro.com/en/blog/post/24/performance-improvement-for-hashmap-in-java-8)","title":"How do HashTables deal with collisions?","body":"<p><strong>Update since Java 8:</strong> Java 8 uses a self-balanced tree for collision-handling, improving the worst case from O(n) to O(log n) for lookup. The use of a self-balanced tree was introduced in Java 8 as an improvement over chaining (used until java 7), which uses a linked-list, and has a worst case of O(n) for lookup (as it needs to traverse the list)</p>\n<p>To answer the second part of your question, insertion is done by mapping a given element to a given index in the underlying array of the hashmap, however, when a collision occurs, all elements must still be preserved (stored in a secondary data-structure, and not just replaced in the underlying array). This is usually done by making each array-component (slot) be a secondary datastructure (aka bucket), and the element is added to the bucket residing on the given array-index (if the key does not already exist in the bucket, in which case it is replaced).</p>\n<p>During lookup, the key is hashed to it's corresponding array-index, and search is performed for an element matching the (exact) key in the given bucket. Because the bucket does not need to handle collisions (compares keys directly), this solves the problem of collisions, but does so at the cost of having to perform insertion and lookup on the secondary datastructure. The key point is that in a hashmap, both the key and the value is stored, and so even if the hash collides, keys are compared directly for equality (in the bucket), and thus can be uniquely identified in the bucket.</p>\n<p>Collission-handling brings the worst-case performance of insertion and lookup from O(1) in the case of no collission-handling to O(n) for chaining (a linked-list is used as secondary datastructure) and O(log n) for self-balanced tree.</p>\n<p>References:</p>\n<blockquote>\n<p>Java 8 has come with the following improvements/changes of HashMap\nobjects in case of high collisions.</p>\n<ul>\n<li><p>The alternative String hash function added in Java 7 has been removed.</p>\n</li>\n<li><p>Buckets containing a large number of colliding keys will store their entries in a balanced tree instead of a linked list after\ncertain threshold is reached.</p>\n</li>\n</ul>\n<p>Above changes ensure performance of O(log(n)) in worst case scenarios\n(<a href=\"https://www.nagarro.com/en/blog/post/24/performance-improvement-for-hashmap-in-java-8\" rel=\"noreferrer\">https://www.nagarro.com/en/blog/post/24/performance-improvement-for-hashmap-in-java-8</a>)</p>\n</blockquote>\n"}],"owner":{"account_id":85818,"reputation":4884,"user_id":239036,"accept_rate":99,"display_name":"Alex"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":177640,"favorite_count":0,"down_vote_count":0,"up_vote_count":127,"accepted_answer_id":4980797,"answer_count":10,"score":127,"last_activity_date":1696715451,"creation_date":1297546239,"question_id":4980757,"body_markdown":"I&#39;ve heard in my degree classes that a `HashTable` will place a new entry into the &#39;next available&#39; bucket if the new Key entry collides with another.\r\n\r\nHow would the `HashTable` still return the correct Value if this collision occurs when calling for one back with the collision key?\r\n\r\nI&#39;m assuming that the `Keys` are `String` type and the `hashCode()` returns the default generated by say Java.\r\n\r\n\r\nIf I implement my own hashing function and use it as part of a look-up table (i.e. a `HashMap` or `Dictionary`), what strategies exist for dealing with collisions?\r\n\r\nI&#39;ve even seen notes relating to prime numbers! Information not so clear from Google search.","title":"How do HashTables deal with collisions?","body":"<p>I've heard in my degree classes that a <code>HashTable</code> will place a new entry into the 'next available' bucket if the new Key entry collides with another.</p>\n\n<p>How would the <code>HashTable</code> still return the correct Value if this collision occurs when calling for one back with the collision key?</p>\n\n<p>I'm assuming that the <code>Keys</code> are <code>String</code> type and the <code>hashCode()</code> returns the default generated by say Java.</p>\n\n<p>If I implement my own hashing function and use it as part of a look-up table (i.e. a <code>HashMap</code> or <code>Dictionary</code>), what strategies exist for dealing with collisions?</p>\n\n<p>I've even seen notes relating to prime numbers! Information not so clear from Google search.</p>\n"},{"tags":["java","minecraft-fabric"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1695285720,"post_id":77145171,"comment_id":136004890,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"answers":[{"tags":[],"owner":{"account_id":29622079,"reputation":16,"user_id":22702793,"display_name":"Robert Mans"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1696714032,"creation_date":1696714032,"answer_id":77251568,"question_id":77145171,"body_markdown":"The simplest way to do it is to use\\\r\n```new CommandDispatcher&lt;S&gt;().execute(commandString, source);```\\\r\nwhere commandString is the command which you want to execute(e.g. ```&quot;/kill @e&quot;```\r\n) and source is an object of type ```S``` - for example if you are doing this from a command, you would do \\\r\n```new CommandDispatcher&lt;CommandContext&lt;ServerCommandSource&gt;&gt;.execute(&quot;/kill @e&quot;, myCommandContext)```\r\n","title":"Sending a command to the server with a fabric mod","body":"<p>The simplest way to do it is to use<br />\n<code>new CommandDispatcher&lt;S&gt;().execute(commandString, source);</code><br />\nwhere commandString is the command which you want to execute(e.g. <code>&quot;/kill @e&quot;</code>\n) and source is an object of type <code>S</code> - for example if you are doing this from a command, you would do <br />\n<code>new CommandDispatcher&lt;CommandContext&lt;ServerCommandSource&gt;&gt;.execute(&quot;/kill @e&quot;, myCommandContext)</code></p>\n"}],"owner":{"account_id":25335983,"reputation":3,"user_id":19155122,"display_name":"Scrapmine"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":101,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":77251568,"answer_count":1,"score":-1,"last_activity_date":1696714032,"creation_date":1695234984,"question_id":77145171,"body_markdown":"How do I send a command to the server like &quot;/msg someone some important event happened!&quot; using a fabric mod in Minecraft 1.20.1?\r\n\r\nI haven&#39;t been able to find any code to try out that is not using classes that do not exist anymore.","title":"Sending a command to the server with a fabric mod","body":"<p>How do I send a command to the server like &quot;/msg someone some important event happened!&quot; using a fabric mod in Minecraft 1.20.1?</p>\n<p>I haven't been able to find any code to try out that is not using classes that do not exist anymore.</p>\n"},{"tags":["java","spring","jms"],"answers":[{"tags":[],"owner":{"account_id":11089,"reputation":400030,"user_id":21234,"accept_rate":91,"display_name":"skaffman"},"down_vote_count":0,"up_vote_count":50,"is_accepted":true,"score":50,"last_activity_date":1282203605,"creation_date":1282203605,"answer_id":3519685,"question_id":3518292,"body_markdown":"This might seem a bit odd, you need to tell JmsTemplate that it&#39;s a topic rather than a queue, by setting its `pubSubDomain` property to `true`.\r\n\r\nThat means you&#39;re going to need two `JmsTemplate` beans, one for the queue, and one for the topic:\r\n\r\n    &lt;bean id=&quot;jmsQueueTemplate&quot; class=&quot;org.springframework.jms.core.JmsTemplate&quot;&gt;\r\n       &lt;constructor-arg ref=&quot;connectionFactory&quot; /&gt;\r\n       &lt;property name=&quot;pubSubDomain&quot; value=&quot;false&quot;/&gt;\r\n    &lt;/bean&gt;\r\n\r\n    &lt;bean id=&quot;jmsTopicTemplate&quot; class=&quot;org.springframework.jms.core.JmsTemplate&quot;&gt;\r\n       &lt;constructor-arg ref=&quot;connectionFactory&quot; /&gt;\r\n       &lt;property name=&quot;pubSubDomain&quot; value=&quot;true&quot;/&gt;\r\n    &lt;/bean&gt;\r\n\r\n\r\n","title":"How do you publish a JMS topic with Spring JMS?","body":"<p>This might seem a bit odd, you need to tell JmsTemplate that it's a topic rather than a queue, by setting its <code>pubSubDomain</code> property to <code>true</code>.</p>\n\n<p>That means you're going to need two <code>JmsTemplate</code> beans, one for the queue, and one for the topic:</p>\n\n<pre><code>&lt;bean id=\"jmsQueueTemplate\" class=\"org.springframework.jms.core.JmsTemplate\"&gt;\n   &lt;constructor-arg ref=\"connectionFactory\" /&gt;\n   &lt;property name=\"pubSubDomain\" value=\"false\"/&gt;\n&lt;/bean&gt;\n\n&lt;bean id=\"jmsTopicTemplate\" class=\"org.springframework.jms.core.JmsTemplate\"&gt;\n   &lt;constructor-arg ref=\"connectionFactory\" /&gt;\n   &lt;property name=\"pubSubDomain\" value=\"true\"/&gt;\n&lt;/bean&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":161697,"reputation":2345,"user_id":382683,"accept_rate":75,"display_name":"Eran Harel"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1282308807,"creation_date":1282308807,"answer_id":3530982,"question_id":3518292,"body_markdown":"If you create the destination as a spring bean rather than using the destination name in your code, Spring won&#39;t need to know whether it is a topic or a queue. Else the solution suggested above should work as well.\r\n\r\nAMQ JMS destinations can be created by directly instantiating them:\r\n\r\n      &lt;bean id=&quot;destination&quot; class=&quot;org.apache.activemq.command.ActiveMQTopic&quot;&gt;\r\n        &lt;constructor-arg value=&quot;TOPIC_NAME&quot; /&gt;\r\n      &lt;/bean&gt;\r\n\r\nor fetching from JNDI:  \r\n\r\n    &lt;bean id=&quot;topic&quot; class=&quot;org.springframework.jndi.JndiObjectFactoryBean&quot;&gt;\r\n            &lt;property name=&quot;jndiName&quot; value=&quot;TOPIC_NAME&quot;/&gt;\r\n            &lt;property name=&quot;jndiTemplate&quot; ref=&quot;jmsJndiTemplate&quot;/&gt; \r\n    &lt;/bean&gt;\r\n\r\n\r\nI prefer the JNDI technique as it is more standard.","title":"How do you publish a JMS topic with Spring JMS?","body":"<p>If you create the destination as a spring bean rather than using the destination name in your code, Spring won't need to know whether it is a topic or a queue. Else the solution suggested above should work as well.</p>\n\n<p>AMQ JMS destinations can be created by directly instantiating them:</p>\n\n<pre><code>  &lt;bean id=\"destination\" class=\"org.apache.activemq.command.ActiveMQTopic\"&gt;\n    &lt;constructor-arg value=\"TOPIC_NAME\" /&gt;\n  &lt;/bean&gt;\n</code></pre>\n\n<p>or fetching from JNDI:  </p>\n\n<pre><code>&lt;bean id=\"topic\" class=\"org.springframework.jndi.JndiObjectFactoryBean\"&gt;\n        &lt;property name=\"jndiName\" value=\"TOPIC_NAME\"/&gt;\n        &lt;property name=\"jndiTemplate\" ref=\"jmsJndiTemplate\"/&gt; \n&lt;/bean&gt;\n</code></pre>\n\n<p>I prefer the JNDI technique as it is more standard.</p>\n"},{"tags":[],"owner":{"account_id":25805,"reputation":22420,"user_id":66629,"display_name":"Gian Marco"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1444235520,"creation_date":1444229613,"answer_id":32995566,"question_id":3518292,"body_markdown":"If it&#39;s ok for you to use a naming convention for queue/topics, then you can implement a custom `org.springframework.jms.support.destination.DestinationResolver`\r\n\r\n    public class NamingDestinationResolver implements DestinationResolver {\r\n       public Destination resolveDestinationName(Session session, String destinationName, boolean pubSubDomain) throws JMSException {\r\n          if (destinationName.endsWith(&quot;Queue&quot;)) {\r\n             return session.createQueue(destinationName);\r\n          } else if (destinationName.endsWith(&quot;Topic&quot;)) {\r\n             return session.createTopic(destinationName);\r\n          }\r\n          throw new RuntimeException(&quot;Naming convention not respected for destination &quot; + destinationName);\r\n       }\r\n    }\r\n\r\nand reference it using `JmsTemplate.setDestinationResolver`","title":"How do you publish a JMS topic with Spring JMS?","body":"<p>If it's ok for you to use a naming convention for queue/topics, then you can implement a custom <code>org.springframework.jms.support.destination.DestinationResolver</code></p>\n\n<pre><code>public class NamingDestinationResolver implements DestinationResolver {\n   public Destination resolveDestinationName(Session session, String destinationName, boolean pubSubDomain) throws JMSException {\n      if (destinationName.endsWith(\"Queue\")) {\n         return session.createQueue(destinationName);\n      } else if (destinationName.endsWith(\"Topic\")) {\n         return session.createTopic(destinationName);\n      }\n      throw new RuntimeException(\"Naming convention not respected for destination \" + destinationName);\n   }\n}\n</code></pre>\n\n<p>and reference it using <code>JmsTemplate.setDestinationResolver</code></p>\n"}],"owner":{"account_id":31584,"reputation":3841,"user_id":86857,"accept_rate":73,"display_name":"wsb3383"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":45603,"favorite_count":0,"down_vote_count":0,"up_vote_count":28,"accepted_answer_id":3519685,"answer_count":3,"score":28,"last_activity_date":1696713570,"creation_date":1282185172,"question_id":3518292,"body_markdown":"I have a component that sends messages to a queue to be handled by another system. It should also publish a topic about job statuses every once in a while. Can I just use the same JmsTemplate used to send to a queue AND to publish to a topic?\r\n\r\nI created a new topic in ActiveMQ, except that when I send from JmsTemplate a message, a new queue with the topic name gets created with the sent message (instead of sending the data to the actual topic), what am I doing wrong here?\r\n\r\nhere&#39;s my config:\r\n\r\n&lt;amq:connectionFactory id=&quot;amqConnectionFactory&quot; brokerURL=&quot;tcp://localhost:61616&quot; /&gt;\r\n\t&lt;!-- CachingConnectionFactory Definition, sessionCacheSize property is the number of sessions to cache --&gt;\r\n\r\n\t&lt;bean id=&quot;connectionFactory&quot; class=&quot;org.springframework.jms.connection.CachingConnectionFactory&quot;&gt;\r\n\t\t&lt;constructor-arg ref=&quot;amqConnectionFactory&quot; /&gt;\r\n\t\t&lt;property name=&quot;exceptionListener&quot; ref=&quot;jmsExceptionListener&quot; /&gt;\r\n\t\t&lt;property name=&quot;sessionCacheSize&quot; value=&quot;100&quot; /&gt;\r\n\t&lt;/bean&gt;\r\n\t\r\n\t&lt;!--  JmsTemplate Definition --&gt;\r\n\t&lt;bean id=&quot;jmsTemplate&quot; class=&quot;org.springframework.jms.core.JmsTemplate&quot;&gt;\r\n\t\t&lt;constructor-arg ref=&quot;connectionFactory&quot; /&gt;\r\n\t&lt;/bean&gt;\r\n\r\n\t\r\n\t&lt;bean id=&quot;messageFacade&quot; class=&quot;org.foo.MessageFacadeJms&quot;&gt;\r\n\t\t&lt;property name=&quot;jmsTemplate&quot; ref=&quot;jmsTemplate&quot; /&gt;\r\n\t&lt;/bean&gt;\r\n\r\nMessageFacadeJms is the class I use to send a queue message (and it works), can I also just used that to publish a topic?\r\n\r\nCan I just use this to do both queue sending and topic publishing?:\r\n\r\n    jmsTemplate.convertAndSend(&quot;TOPIC_NAME&quot; /* or queue name */, message);","title":"How do you publish a JMS topic with Spring JMS?","body":"<p>I have a component that sends messages to a queue to be handled by another system. It should also publish a topic about job statuses every once in a while. Can I just use the same JmsTemplate used to send to a queue AND to publish to a topic?</p>\n\n<p>I created a new topic in ActiveMQ, except that when I send from JmsTemplate a message, a new queue with the topic name gets created with the sent message (instead of sending the data to the actual topic), what am I doing wrong here?</p>\n\n<p>here's my config:</p>\n\n<p>\n    </p>\n\n<pre><code>&lt;bean id=\"connectionFactory\" class=\"org.springframework.jms.connection.CachingConnectionFactory\"&gt;\n    &lt;constructor-arg ref=\"amqConnectionFactory\" /&gt;\n    &lt;property name=\"exceptionListener\" ref=\"jmsExceptionListener\" /&gt;\n    &lt;property name=\"sessionCacheSize\" value=\"100\" /&gt;\n&lt;/bean&gt;\n\n&lt;!--  JmsTemplate Definition --&gt;\n&lt;bean id=\"jmsTemplate\" class=\"org.springframework.jms.core.JmsTemplate\"&gt;\n    &lt;constructor-arg ref=\"connectionFactory\" /&gt;\n&lt;/bean&gt;\n\n\n&lt;bean id=\"messageFacade\" class=\"org.foo.MessageFacadeJms\"&gt;\n    &lt;property name=\"jmsTemplate\" ref=\"jmsTemplate\" /&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p>MessageFacadeJms is the class I use to send a queue message (and it works), can I also just used that to publish a topic?</p>\n\n<p>Can I just use this to do both queue sending and topic publishing?:</p>\n\n<pre><code>jmsTemplate.convertAndSend(\"TOPIC_NAME\" /* or queue name */, message);\n</code></pre>\n"},{"tags":["java","concurrency","jmh","project-panama"],"comments":[{"owner":{"account_id":4034876,"reputation":1557,"user_id":3319725,"display_name":"AnatolyG"},"score":0,"creation_date":1629886809,"post_id":68875404,"comment_id":121803783,"body_markdown":"The example you mentioned (JMHSample_22_FalseSharing) makes only plain read and write (with no any membars involved). Your benchmark: 1. uses VarHandle based operations instead of direct access to a field (typically VH operations are optimized, but I&#39;d expect additional perf penalty anyway) 2. introduces membars with getAcquire/setRelease. So, the tests are very different from each other. To make more detailed analysts you may try to use JMH &quot;perfasm&quot; profiler. Or even better https://software.intel.com/content/www/us/en/develop/documentation/vtune-cookbook/top/tuning-recipes/false-sharing.html","body":"The example you mentioned (JMHSample_22_FalseSharing) makes only plain read and write (with no any membars involved). Your benchmark: 1. uses VarHandle based operations instead of direct access to a field (typically VH operations are optimized, but I&#39;d expect additional perf penalty anyway) 2. introduces membars with getAcquire/setRelease. So, the tests are very different from each other. To make more detailed analysts you may try to use JMH &quot;perfasm&quot; profiler. Or even better <a href=\"https://software.intel.com/content/www/us/en/develop/documentation/vtune-cookbook/top/tuning-recipes/false-sharing.html\" rel=\"nofollow noreferrer\">software.intel.com/content/www/us/en/develop/documentation/&hellip;</a>"},{"owner":{"account_id":4034876,"reputation":1557,"user_id":3319725,"display_name":"AnatolyG"},"score":0,"creation_date":1629886864,"post_id":68875404,"comment_id":121803818,"body_markdown":"Intel VTune can be configured for analysis of a java process easily","body":"Intel VTune can be configured for analysis of a java process easily"}],"answers":[{"tags":[],"owner":{"account_id":6995097,"reputation":1409,"user_id":5363011,"display_name":"George Leung"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1696712678,"creation_date":1696656526,"answer_id":77248478,"question_id":68875404,"body_markdown":"Belated answer, now that the FFM API is quite different.\r\n\r\n---\r\n\r\nTake a look at the following JShell session.\r\n\r\n```java\r\njshell --add-modules jdk.incubator.foreign\r\n|  Welcome to JShell -- Version 17.0.2\r\n|  For an introduction type: /help intro\r\n\r\njshell&gt; import jdk.incubator.foreign.*;\r\n   ...&gt; ResourceScope rs = ResourceScope.newSharedScope();\r\n   ...&gt;\r\nrs ==&gt; jdk.internal.foreign.SharedScope@238e0d81\r\n\r\njshell&gt; final MemorySegment readSegment = MemorySegment.allocateNative(MemoryLayouts.JAVA_LONG, rs);\r\n   ...&gt; final MemorySegment writeSegment = MemorySegment.allocateNative(MemoryLayouts.JAVA_LONG, rs);\r\n   ...&gt;\r\nreadSegment ==&gt; MemorySegment{ id=0x28758e86 limit: 8 }\r\nwriteSegment ==&gt; MemorySegment{ id=0x286203e6 limit: 8 }\r\n\r\njshell&gt; writeSegment.address().toRawLongValue() - readSegment.address().toRawLongValue()\r\n$5 ==&gt; 24928\r\n\r\njshell&gt;\r\n```\r\n\r\nThe two `MemorySegment`s I allocated, like how you do in `StateBaseline`, are far away from each other. So there&#39;s no false sharing.\r\n\r\nContrast that with the `readOnly` and `writeOnly` fields in `JMHSample_22_FalseSharing.StateBaseline`. They are next to each other in the same object, so the various tricks to separate them improve the performance by preventing false sharing.\r\n\r\n---\r\n\r\nNow as to why the two `MemorySegments` are so far away, [this answer](https://stackoverflow.com/a/8217737/5363011) might be relevant.\r\n\r\nHowever they can be close to each other.\r\nIn fact when I do\\\r\n`try (ResourceScope rs = ResourceScope.newSharedScope()) {`, or\\\r\nin Java 21: `try (Arena arena = Arena.ofConfined()) {`,\\\r\nthey are usually close, or sometimes next to each other.\r\n\r\n---\r\n\r\nTo test false sharing with `MemorySegment` you can try the following (in Java 21):\r\n\r\n```java\r\nMemorySegment longArray = Arena.global().allocateArray(ValueLayout.JAVA_LONG, 0, 0);\r\nMemorySegment readSegment = longArray.asSlice(0, ValueLayout.JAVA_LONG);\r\nMemorySegment writeSegment = longArray.asSlice(ValueLayout.JAVA_LONG.byteSize(), ValueLayout.JAVA_LONG);\r\n\r\nMemorySegment structArray = Arena.global().allocateArray(gl, 2);\r\n```","title":"Panama: Padding doesn&#39;t prevent false sharing","body":"<p>Belated answer, now that the FFM API is quite different.</p>\n<hr />\n<p>Take a look at the following JShell session.</p>\n<pre class=\"lang-java prettyprint-override\"><code>jshell --add-modules jdk.incubator.foreign\n|  Welcome to JShell -- Version 17.0.2\n|  For an introduction type: /help intro\n\njshell&gt; import jdk.incubator.foreign.*;\n   ...&gt; ResourceScope rs = ResourceScope.newSharedScope();\n   ...&gt;\nrs ==&gt; jdk.internal.foreign.SharedScope@238e0d81\n\njshell&gt; final MemorySegment readSegment = MemorySegment.allocateNative(MemoryLayouts.JAVA_LONG, rs);\n   ...&gt; final MemorySegment writeSegment = MemorySegment.allocateNative(MemoryLayouts.JAVA_LONG, rs);\n   ...&gt;\nreadSegment ==&gt; MemorySegment{ id=0x28758e86 limit: 8 }\nwriteSegment ==&gt; MemorySegment{ id=0x286203e6 limit: 8 }\n\njshell&gt; writeSegment.address().toRawLongValue() - readSegment.address().toRawLongValue()\n$5 ==&gt; 24928\n\njshell&gt;\n</code></pre>\n<p>The two <code>MemorySegment</code>s I allocated, like how you do in <code>StateBaseline</code>, are far away from each other. So there's no false sharing.</p>\n<p>Contrast that with the <code>readOnly</code> and <code>writeOnly</code> fields in <code>JMHSample_22_FalseSharing.StateBaseline</code>. They are next to each other in the same object, so the various tricks to separate them improve the performance by preventing false sharing.</p>\n<hr />\n<p>Now as to why the two <code>MemorySegments</code> are so far away, <a href=\"https://stackoverflow.com/a/8217737/5363011\">this answer</a> might be relevant.</p>\n<p>However they can be close to each other.\nIn fact when I do<br />\n<code>try (ResourceScope rs = ResourceScope.newSharedScope()) {</code>, or<br />\nin Java 21: <code>try (Arena arena = Arena.ofConfined()) {</code>,<br />\nthey are usually close, or sometimes next to each other.</p>\n<hr />\n<p>To test false sharing with <code>MemorySegment</code> you can try the following (in Java 21):</p>\n<pre class=\"lang-java prettyprint-override\"><code>MemorySegment longArray = Arena.global().allocateArray(ValueLayout.JAVA_LONG, 0, 0);\nMemorySegment readSegment = longArray.asSlice(0, ValueLayout.JAVA_LONG);\nMemorySegment writeSegment = longArray.asSlice(ValueLayout.JAVA_LONG.byteSize(), ValueLayout.JAVA_LONG);\n\nMemorySegment structArray = Arena.global().allocateArray(gl, 2);\n</code></pre>\n"}],"owner":{"account_id":17776757,"reputation":97,"user_id":12908964,"display_name":"sqlearner"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":198,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1696712678,"creation_date":1629567763,"question_id":68875404,"body_markdown":"I am trying to benchmark the effects false sharing has on the performance of a program.\r\n \r\nIn this example: https://github.com/lexburner/JMH-samples/blob/master/src/main/java/org/openjdk/jmh/samples/JMHSample_22_FalseSharing.java\r\n, cache line padding results in a performance improvement by an order-of-magnitude.\r\n\r\nHowever when I use project panamas Foreign Memory Access API the cache line padding actually makes the performance slightly worse. Do MemorySegments implicitly use padding? What else could be causing this behaviour?\r\n\r\nI have already tried to run the benchmarks on different Hardware and to turn off hyperthreading with the same outcome.\r\n\r\nBenchmark details:  \r\n \r\n```\r\n@BenchmarkMode(Mode.Throughput)\r\n@OutputTimeUnit(TimeUnit.MICROSECONDS)\r\n@Warmup(iterations = 5, time = 1, timeUnit = TimeUnit.SECONDS)\r\n@Measurement(iterations = 5, time = 1, timeUnit = TimeUnit.SECONDS)\r\n@Fork(5)\r\npublic class JMH_FalseSharing {\r\n\r\n\t@State(Scope.Group)\r\n    public static class StateBaseline {\r\n\t\t@TearDown(Level.Trial)\r\n        public void tearDown(){\r\n            rs.close();\r\n        }\r\n\r\n\t\tResourceScope rs = ResourceScope.newSharedScope();\r\n\t\tstatic final VarHandle VH;\r\n\t\tfinal MemorySegment readSegment = MemorySegment.allocateNative(MemoryLayouts.JAVA_LONG, rs);\r\n\t\tfinal MemorySegment writeSegment = MemorySegment.allocateNative(MemoryLayouts.JAVA_LONG, rs);\r\n\r\n\t\tstatic{\r\n\t\t\tVH = MemoryLayouts.JAVA_LONG.varHandle(long.class);\r\n\t\t}\r\n    }\r\n\t\r\n\t@State(Scope.Group)\r\n    public static class StatePadded {\r\n\t\t@TearDown(Level.Trial)\r\n        public void tearDown(){\r\n            rs.close();\r\n        }\r\n\t\r\n\t\tResourceScope rs = ResourceScope.newSharedScope();\r\n\t\tstatic final VarHandle VH;\r\n\t\tprivate static final GroupLayout gl = MemoryLayout.structLayout(\r\n            MemoryLayout.paddingLayout(448L),\r\n            MemoryLayouts.JAVA_LONG.withName(&quot;val&quot;),\r\n            MemoryLayout.paddingLayout(448L)\r\n            );\r\n\t\t\t\r\n\t\tfinal MemorySegment readSegment  = MemorySegment.allocateNative(gl, rs);\r\n\t\tfinal MemorySegment writeSegment = MemorySegment.allocateNative(gl, rs);\r\n\r\n\t\tstatic{\r\n\t\t\tVH = gl.varHandle(long.class, MemoryLayout.PathElement.groupElement(&quot;val&quot;));\r\n\t\t}\r\n    }\r\n\t\r\n\t@Group(&quot;baseline&quot;)\r\n    @Benchmark\r\n    public void baselineWrite(StateBaseline baselineState){\r\n\t\tStateBaseline.VH.setRelease(baselineState.writeSegment, (long)StateBaseline.VH.getAcquire(baselineState.writeSegment) + 1);\r\n    }\r\n\r\n    @Group(&quot;baseline&quot;)\r\n    @Benchmark\r\n    public void baselineRead(Blackhole blackhole, StateBaseline baselineState){\r\n\t\tblackhole.consume((long)StateBaseline.VH.getAcquire(baselineState.readSegment));\r\n    }\r\n\t\r\n\t@Group(&quot;padded&quot;)\r\n    @Benchmark\r\n    public void paddedWrite(StatePadded paddedState){\r\n\t\tStatePadded.VH.setRelease(paddedState.writeSegment, (long)StatePadded.VH.getAcquire(paddedState.writeSegment) + 1);\r\n    }\r\n\r\n    @Group(&quot;padded&quot;)\r\n    @Benchmark\r\n    public void paddedRead(Blackhole blackhole, StatePadded paddedState){\r\n\t\tblackhole.consume((long)StatePadded.VH.getAcquire(paddedState.readSegment));\r\n    }\r\n}\r\n```","title":"Panama: Padding doesn&#39;t prevent false sharing","body":"<p>I am trying to benchmark the effects false sharing has on the performance of a program.</p>\n<p>In this example: <a href=\"https://github.com/lexburner/JMH-samples/blob/master/src/main/java/org/openjdk/jmh/samples/JMHSample_22_FalseSharing.java\" rel=\"nofollow noreferrer\">https://github.com/lexburner/JMH-samples/blob/master/src/main/java/org/openjdk/jmh/samples/JMHSample_22_FalseSharing.java</a>\n, cache line padding results in a performance improvement by an order-of-magnitude.</p>\n<p>However when I use project panamas Foreign Memory Access API the cache line padding actually makes the performance slightly worse. Do MemorySegments implicitly use padding? What else could be causing this behaviour?</p>\n<p>I have already tried to run the benchmarks on different Hardware and to turn off hyperthreading with the same outcome.</p>\n<p>Benchmark details:</p>\n<pre><code>@BenchmarkMode(Mode.Throughput)\n@OutputTimeUnit(TimeUnit.MICROSECONDS)\n@Warmup(iterations = 5, time = 1, timeUnit = TimeUnit.SECONDS)\n@Measurement(iterations = 5, time = 1, timeUnit = TimeUnit.SECONDS)\n@Fork(5)\npublic class JMH_FalseSharing {\n\n    @State(Scope.Group)\n    public static class StateBaseline {\n        @TearDown(Level.Trial)\n        public void tearDown(){\n            rs.close();\n        }\n\n        ResourceScope rs = ResourceScope.newSharedScope();\n        static final VarHandle VH;\n        final MemorySegment readSegment = MemorySegment.allocateNative(MemoryLayouts.JAVA_LONG, rs);\n        final MemorySegment writeSegment = MemorySegment.allocateNative(MemoryLayouts.JAVA_LONG, rs);\n\n        static{\n            VH = MemoryLayouts.JAVA_LONG.varHandle(long.class);\n        }\n    }\n    \n    @State(Scope.Group)\n    public static class StatePadded {\n        @TearDown(Level.Trial)\n        public void tearDown(){\n            rs.close();\n        }\n    \n        ResourceScope rs = ResourceScope.newSharedScope();\n        static final VarHandle VH;\n        private static final GroupLayout gl = MemoryLayout.structLayout(\n            MemoryLayout.paddingLayout(448L),\n            MemoryLayouts.JAVA_LONG.withName(&quot;val&quot;),\n            MemoryLayout.paddingLayout(448L)\n            );\n            \n        final MemorySegment readSegment  = MemorySegment.allocateNative(gl, rs);\n        final MemorySegment writeSegment = MemorySegment.allocateNative(gl, rs);\n\n        static{\n            VH = gl.varHandle(long.class, MemoryLayout.PathElement.groupElement(&quot;val&quot;));\n        }\n    }\n    \n    @Group(&quot;baseline&quot;)\n    @Benchmark\n    public void baselineWrite(StateBaseline baselineState){\n        StateBaseline.VH.setRelease(baselineState.writeSegment, (long)StateBaseline.VH.getAcquire(baselineState.writeSegment) + 1);\n    }\n\n    @Group(&quot;baseline&quot;)\n    @Benchmark\n    public void baselineRead(Blackhole blackhole, StateBaseline baselineState){\n        blackhole.consume((long)StateBaseline.VH.getAcquire(baselineState.readSegment));\n    }\n    \n    @Group(&quot;padded&quot;)\n    @Benchmark\n    public void paddedWrite(StatePadded paddedState){\n        StatePadded.VH.setRelease(paddedState.writeSegment, (long)StatePadded.VH.getAcquire(paddedState.writeSegment) + 1);\n    }\n\n    @Group(&quot;padded&quot;)\n    @Benchmark\n    public void paddedRead(Blackhole blackhole, StatePadded paddedState){\n        blackhole.consume((long)StatePadded.VH.getAcquire(paddedState.readSegment));\n    }\n}\n</code></pre>\n"},{"tags":["java","arraylist"],"comments":[{"owner":{"account_id":2182934,"reputation":2525,"user_id":1932011,"accept_rate":71,"display_name":"JayC667"},"score":2,"creation_date":1696712755,"post_id":77251503,"comment_id":136189293,"body_markdown":"You make it too complicated. In the for loop, `x &lt; customers.size()` will always fail, because there are no elements in there yet. So instead of the whole `for` loop (all 5 lines), write that one line: `customers.add(c);`. `ArrayList` automatically increases its size, you will NOT overwrite anything in there if you simply call `.add(obj)`, because that will ALWAYS be inserted as the last element.","body":"You make it too complicated. In the for loop, <code>x &lt; customers.size()</code> will always fail, because there are no elements in there yet. So instead of the whole <code>for</code> loop (all 5 lines), write that one line: <code>customers.add(c);</code>. <code>ArrayList</code> automatically increases its size, you will NOT overwrite anything in there if you simply call <code>.add(obj)</code>, because that will ALWAYS be inserted as the last element."}],"owner":{"account_id":27913834,"reputation":11,"user_id":21315417,"display_name":"Takeshi DBXV"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1696712557,"creation_date":1696712414,"question_id":77251503,"body_markdown":"I&#39;m not using anything that saves permanent changes, so when the program ends, the ArrayList is also reset. Now, when the program runs, a user will enter two values. Those values will be used in the creation of a class object, and said object will be assigned to an array index. Here&#39;s that code below:\r\n\r\n```\r\nSystem.out.print(&quot;\\nEnter a name of your choosing: &quot;);\r\nsName = s.nextLine();\r\nSystem.out.print(&quot;\\nPlease enter a password: &quot;);\r\nsPass = s.nextLine();\r\nCustomer c = new Customer(sName, &quot;&quot;, sName, sPass, 0, 0);\r\nfor (int x = 0; x &lt; customers.size(); x++) {\r\n     if (x == customers.size()) {\r\n         customers.add(x, c);\r\n     }\r\n}\r\nreturn;\r\n```\r\nArrayList statement, if it helps. \r\n```\r\nstatic ArrayList&lt;Customer&gt; customers = new ArrayList();\r\n```\r\nThe values for &quot;Customer c&quot; besides &#39;sName&#39; and &#39;sPass&#39; are not important in this context. The idea here is that when a person registers a new customer account, this register function can be used indefinitely. (ex: entering &quot;David&quot;, &quot;monkey1&quot; will be customers[0]. Entering &quot;Amy&quot;, &quot;turtles4ever&quot; will be customers[1]).\r\n\r\nWithin the for loop, I added that it will only be added to customers[] if &#39;x&#39; is equal to the max array size, which  can be found with &#39;.size()&#39;. This way, the object **won&#39;t** just overwrite all the previous array values. \r\n\r\nDespite all that, for some reason, nothing happens. Debugging shows that there is *nothing* in the element. Or the array for that matter. It should also be noted that doing the customer.add() statement outside the for-loop works just fine. \r\n\r\nI&#39;m pretty sure this happens because there&#39;s nothing in the Customer ArrayList (it&#39;s empty), so it kinda just does nothing when the for-loop starts. I could just reverse the logic, but I don&#39;t feel that&#39;s right solution to this problem. In conclusion, I&#39;m stuck.","title":"How do I add objects to an ArrayList while the program is running?","body":"<p>I'm not using anything that saves permanent changes, so when the program ends, the ArrayList is also reset. Now, when the program runs, a user will enter two values. Those values will be used in the creation of a class object, and said object will be assigned to an array index. Here's that code below:</p>\n<pre><code>System.out.print(&quot;\\nEnter a name of your choosing: &quot;);\nsName = s.nextLine();\nSystem.out.print(&quot;\\nPlease enter a password: &quot;);\nsPass = s.nextLine();\nCustomer c = new Customer(sName, &quot;&quot;, sName, sPass, 0, 0);\nfor (int x = 0; x &lt; customers.size(); x++) {\n     if (x == customers.size()) {\n         customers.add(x, c);\n     }\n}\nreturn;\n</code></pre>\n<p>ArrayList statement, if it helps.</p>\n<pre><code>static ArrayList&lt;Customer&gt; customers = new ArrayList();\n</code></pre>\n<p>The values for &quot;Customer c&quot; besides 'sName' and 'sPass' are not important in this context. The idea here is that when a person registers a new customer account, this register function can be used indefinitely. (ex: entering &quot;David&quot;, &quot;monkey1&quot; will be customers[0]. Entering &quot;Amy&quot;, &quot;turtles4ever&quot; will be customers[1]).</p>\n<p>Within the for loop, I added that it will only be added to customers[] if 'x' is equal to the max array size, which  can be found with '.size()'. This way, the object <strong>won't</strong> just overwrite all the previous array values.</p>\n<p>Despite all that, for some reason, nothing happens. Debugging shows that there is <em>nothing</em> in the element. Or the array for that matter. It should also be noted that doing the customer.add() statement outside the for-loop works just fine.</p>\n<p>I'm pretty sure this happens because there's nothing in the Customer ArrayList (it's empty), so it kinda just does nothing when the for-loop starts. I could just reverse the logic, but I don't feel that's right solution to this problem. In conclusion, I'm stuck.</p>\n"},{"tags":["java","maven","java-21","maven-3.9.5"],"comments":[{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":1,"creation_date":1696708694,"post_id":77251065,"comment_id":136188914,"body_markdown":"Have you downloaded the src or the bin archives (zip file for windows `\tapache-maven-3.9.5-bin.zip`) artifact? Why do you use M2_HOME?","body":"Have you downloaded the src or the bin archives (zip file for windows `\tapache-maven-3.9.5-bin.zip`) artifact? Why do you use M2_HOME?"},{"owner":{"account_id":11410810,"reputation":1856,"user_id":8365012,"accept_rate":100,"display_name":"cmprogram"},"score":1,"creation_date":1696720461,"post_id":77251065,"comment_id":136189870,"body_markdown":"@khmarbaise I was using the src archives, I&#39;ve since changed to the bin archives and it all works. Thank you very much for your response.","body":"@khmarbaise I was using the src archives, I&#39;ve since changed to the bin archives and it all works. Thank you very much for your response."}],"answers":[{"tags":[],"owner":{"account_id":6016955,"reputation":186,"user_id":4725439,"display_name":"Nahid"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1696712224,"creation_date":1696712224,"answer_id":77251492,"question_id":77251065,"body_markdown":"You are trying with source. Download the binaries from https://dlcdn.apache.org/maven/maven-3/3.9.5/binaries/apache-maven-3.9.5-bin.zip ","title":"Maven 3.9.5 - Error: -classpath requires class path specification","body":"<p>You are trying with source. Download the binaries from <a href=\"https://dlcdn.apache.org/maven/maven-3/3.9.5/binaries/apache-maven-3.9.5-bin.zip\" rel=\"nofollow noreferrer\">https://dlcdn.apache.org/maven/maven-3/3.9.5/binaries/apache-maven-3.9.5-bin.zip</a></p>\n"}],"owner":{"account_id":11410810,"reputation":1856,"user_id":8365012,"accept_rate":100,"display_name":"cmprogram"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":280,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77251492,"answer_count":1,"score":0,"last_activity_date":1696712224,"creation_date":1696704108,"question_id":77251065,"body_markdown":"When running `mvn -v` or `mvn -version` I receive the following error:   \r\n`Error: -classpath requires class path specification`\r\n\r\nHowever, I have followed the instruction as defined on both:\r\nhttps://www.oracle.com/uk/java/technologies/downloads/#jdk21-windows and https://maven.apache.org/download.cgi\r\n\r\nWhat is missing or misconfigured that could be causing this error?\r\n\r\n**I am using:**   \r\nMaven 3.9.5   \r\nJava Version: 21\r\n\r\n**Directory Locations:**   \r\nMaven is located at:\r\n`C:\\Maven`   \r\nJava JDK is located at:\r\n`C:\\Program Files\\Java`\r\n\r\n**Environment Variables:**   \r\nUser Variables:   \r\n`JAVA_HOME`: `C:\\Program Files\\Java\\jdk-21`    \r\n`M2_HOME`: `C:\\Maven\\apache-maven-3.9.5-src\\apache-maven-3.9.5\\apache-maven\\src`   \r\n`M2`: `%M2_HOME%\\bin`   \r\n`MAVEN_HOME`: `C:\\Maven\\apache-maven-3.9.5-src\\apache-maven-3.9.5\\apache-maven\\src`\r\n\r\n**Path Variable:** // This reflects my various attempts to get this to work.  \r\n`%JAVA_HOME%\\bin`   \r\n`C:\\Program Files\\Java\\jdk-21\\bin`   \r\n`C:\\Maven\\apache-maven-3.9.5-src\\apache-maven-3.9.5\\`       \r\n`%M2%`   \r\n`C:\\Maven\\apache-maven-3.9.5-src\\apache-maven-3.9.5\\apache-maven\\src\\bin`\r\n`%M2_HOME%`    \r\n`C:\\Program Files\\Java\\jdk-21`\r\n\r\nLastly, when running `java -version`, the following is returned:\r\n```\r\njava version &quot;21&quot; 2023-09-19 LTS\r\nJava(TM) SE Runtime Environment (build 21+35-LTS-2513)\r\nJava HotSpot(TM) 64-Bit Server VM (build 21+35-LTS-2513, mixed mode, sharing)\r\n```\r\n","title":"Maven 3.9.5 - Error: -classpath requires class path specification","body":"<p>When running <code>mvn -v</code> or <code>mvn -version</code> I receive the following error:<br />\n<code>Error: -classpath requires class path specification</code></p>\n<p>However, I have followed the instruction as defined on both:\n<a href=\"https://www.oracle.com/uk/java/technologies/downloads/#jdk21-windows\" rel=\"nofollow noreferrer\">https://www.oracle.com/uk/java/technologies/downloads/#jdk21-windows</a> and <a href=\"https://maven.apache.org/download.cgi\" rel=\"nofollow noreferrer\">https://maven.apache.org/download.cgi</a></p>\n<p>What is missing or misconfigured that could be causing this error?</p>\n<p><strong>I am using:</strong><br />\nMaven 3.9.5<br />\nJava Version: 21</p>\n<p><strong>Directory Locations:</strong><br />\nMaven is located at:\n<code>C:\\Maven</code><br />\nJava JDK is located at:\n<code>C:\\Program Files\\Java</code></p>\n<p><strong>Environment Variables:</strong><br />\nUser Variables:<br />\n<code>JAVA_HOME</code>: <code>C:\\Program Files\\Java\\jdk-21</code><br />\n<code>M2_HOME</code>: <code>C:\\Maven\\apache-maven-3.9.5-src\\apache-maven-3.9.5\\apache-maven\\src</code><br />\n<code>M2</code>: <code>%M2_HOME%\\bin</code><br />\n<code>MAVEN_HOME</code>: <code>C:\\Maven\\apache-maven-3.9.5-src\\apache-maven-3.9.5\\apache-maven\\src</code></p>\n<p><strong>Path Variable:</strong> // This reflects my various attempts to get this to work.<br />\n<code>%JAVA_HOME%\\bin</code><br />\n<code>C:\\Program Files\\Java\\jdk-21\\bin</code><br />\n<code>C:\\Maven\\apache-maven-3.9.5-src\\apache-maven-3.9.5\\</code><br />\n<code>%M2%</code><br />\n<code>C:\\Maven\\apache-maven-3.9.5-src\\apache-maven-3.9.5\\apache-maven\\src\\bin</code>\n<code>%M2_HOME%</code><br />\n<code>C:\\Program Files\\Java\\jdk-21</code></p>\n<p>Lastly, when running <code>java -version</code>, the following is returned:</p>\n<pre><code>java version &quot;21&quot; 2023-09-19 LTS\nJava(TM) SE Runtime Environment (build 21+35-LTS-2513)\nJava HotSpot(TM) 64-Bit Server VM (build 21+35-LTS-2513, mixed mode, sharing)\n</code></pre>\n"},{"tags":["java","json","spring","jackson","boot"],"owner":{"account_id":374940,"reputation":475,"user_id":725455,"accept_rate":51,"display_name":"user725455"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1696712189,"creation_date":1696712189,"question_id":77251489,"body_markdown":"When I try to deseriliaze a sub class for Jackson Maps. I am getting following exception.Probably, \r\nI have a problem  JsonTypeInfo JsonSubType definition\r\n\r\nCaused by: com.fasterxml.jackson.databind.exc.InvalidTypeIdException: Could not resolve subtype of [simple type, class com.siemens.datamanagement.dto.macro.configuration.ObserverCaller]: missing type id property &#39;type&#39; (for POJO property &#39;observerCaller&#39;)\r\n\r\nI have following object structure\r\n```\r\n@Data\r\n@JsonTypeInfo(use = JsonTypeInfo.Id.NAME, include = JsonTypeInfo.As.EXISTING_PROPERTY, property = &quot;type&quot;)\r\n@JsonSubTypes({\r\n    @JsonSubTypes.Type(value = ObserverCaller.class, name = &quot;observerCaller&quot;),\r\n    @JsonSubTypes.Type(value = DynamicCaller.class, name = &quot;dynamicCaller&quot;),\r\n    @JsonSubTypes.Type(value = FileCaller.class, name = &quot;fileCaller&quot;)})\r\npublic abstract class AbstractCaller {\r\n\r\n    private String type = &quot;default&quot;;\r\n\r\n    public String getType() {\r\n        return type;\r\n    }\r\n}\r\n\r\nThese are sub classes.\r\n\r\n\r\n@Getter\r\n@Setter\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\n@JsonTypeName(&quot;dynamicCaller&quot;)\r\npublic class ObserverCaller extends AbstractCaller implements Caller {\r\n\r\n\r\n    @Override\r\n    public String getType() {\r\n        return OBSERVER_CALLER.getDescription();\r\n    }\r\n\r\n}\r\n\r\n@Getter\r\n@Setter\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\n@JsonTypeName(&quot;dynamicCaller&quot;)\r\npublic class DynamicCaller extends AbstractCaller implements Caller {\r\n\r\n    @Override\r\n    public String getType() {\r\n        return DYNAMIC_CALLER.getDescription();\r\n    }\r\n}\r\n\r\n\r\n\r\nThis is class which I want to serialize caller object according to type attribute. This caller can be observercaller or dynamiccaller\r\n\r\n@Getter\r\n@Setter\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\npublic class ReferenceCaller implements Caller {\r\n\r\n    private AbstractCaller caller;\r\n\r\n    @Override\r\n    public String getType() {\r\n        return REFERENCE_CALLER.getDescription();\r\n    }\r\n}\r\n\r\n\r\nThis is json object which I want to serialize [![json][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/By9OP.png","title":"Jackson Object Mapper - &quot;Missing type id &quot; on concrete class deserialization","body":"<p>When I try to deseriliaze a sub class for Jackson Maps. I am getting following exception.Probably,\nI have a problem  JsonTypeInfo JsonSubType definition</p>\n<p>Caused by: com.fasterxml.jackson.databind.exc.InvalidTypeIdException: Could not resolve subtype of [simple type, class com.siemens.datamanagement.dto.macro.configuration.ObserverCaller]: missing type id property 'type' (for POJO property 'observerCaller')</p>\n<p>I have following object structure</p>\n<pre><code>@Data\n@JsonTypeInfo(use = JsonTypeInfo.Id.NAME, include = JsonTypeInfo.As.EXISTING_PROPERTY, property = &quot;type&quot;)\n@JsonSubTypes({\n    @JsonSubTypes.Type(value = ObserverCaller.class, name = &quot;observerCaller&quot;),\n    @JsonSubTypes.Type(value = DynamicCaller.class, name = &quot;dynamicCaller&quot;),\n    @JsonSubTypes.Type(value = FileCaller.class, name = &quot;fileCaller&quot;)})\npublic abstract class AbstractCaller {\n\n    private String type = &quot;default&quot;;\n\n    public String getType() {\n        return type;\n    }\n}\n\nThese are sub classes.\n\n\n@Getter\n@Setter\n@NoArgsConstructor\n@AllArgsConstructor\n@JsonTypeName(&quot;dynamicCaller&quot;)\npublic class ObserverCaller extends AbstractCaller implements Caller {\n\n\n    @Override\n    public String getType() {\n        return OBSERVER_CALLER.getDescription();\n    }\n\n}\n\n@Getter\n@Setter\n@NoArgsConstructor\n@AllArgsConstructor\n@JsonTypeName(&quot;dynamicCaller&quot;)\npublic class DynamicCaller extends AbstractCaller implements Caller {\n\n    @Override\n    public String getType() {\n        return DYNAMIC_CALLER.getDescription();\n    }\n}\n\n\n\nThis is class which I want to serialize caller object according to type attribute. This caller can be observercaller or dynamiccaller\n\n@Getter\n@Setter\n@NoArgsConstructor\n@AllArgsConstructor\npublic class ReferenceCaller implements Caller {\n\n    private AbstractCaller caller;\n\n    @Override\n    public String getType() {\n        return REFERENCE_CALLER.getDescription();\n    }\n}\n\n\nThis is json object which I want to serialize [![json][1]][1]\n\n\n  [1]: https://i.stack.imgur.com/By9OP.png\n</code></pre>\n"},{"tags":["java","jar","environment-variables","classpath","git-bash"],"comments":[{"owner":{"account_id":23093411,"reputation":258,"user_id":17203927,"display_name":"redwards"},"score":0,"creation_date":1696711588,"post_id":77251340,"comment_id":136189182,"body_markdown":"For git-bash (MSYS), you need to use forward slashes:  /c/Users/geniu/testclasspath.jar","body":"For git-bash (MSYS), you need to use forward slashes:  /c/Users/geniu/testclasspath.jar"}],"answers":[{"tags":[],"owner":{"account_id":23093411,"reputation":258,"user_id":17203927,"display_name":"redwards"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696711908,"creation_date":1696711908,"answer_id":77251478,"question_id":77251340,"body_markdown":"For git-bash (MSYS), you need to use forward slashes: /c/Users/geniu/testclasspath.jar \r\n\r\n    $ echo $CLASSPATH\r\n    /c/bin/\r\n    \r\n    redwa@robert-lg MINGW64 ~\r\n    $ export CLASSPATH=$CLASSPATH:/c/Users/geniu/testclasspath.jar\r\n    \r\n    redwa@robert-lg MINGW64 ~\r\n    $ echo $CLASSPATH\r\n    /c/bin:/c/Users/geniu/testclasspath.jar\r\n\r\n","title":"Setting up environment variables for windows using GitBash","body":"<p>For git-bash (MSYS), you need to use forward slashes: /c/Users/geniu/testclasspath.jar</p>\n<pre><code>$ echo $CLASSPATH\n/c/bin/\n\nredwa@robert-lg MINGW64 ~\n$ export CLASSPATH=$CLASSPATH:/c/Users/geniu/testclasspath.jar\n\nredwa@robert-lg MINGW64 ~\n$ echo $CLASSPATH\n/c/bin:/c/Users/geniu/testclasspath.jar\n</code></pre>\n"}],"owner":{"account_id":27806089,"reputation":119,"user_id":21229467,"display_name":"T. J. Foster"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":25,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1696711908,"creation_date":1696708993,"question_id":77251340,"body_markdown":"I am trying to set up several java jar files and packages as environment variables for a computational linear algebra class.  \r\n\r\nI am using the GitBash terminal on Windows OS.  \r\n\r\nI open the file &quot;.bashrc&quot; and use the following string \r\n\r\nexport CLASSPATH=$CLASSPATH:C:\\Users\\geniu\\testclasspath.jar:.\r\n\r\nThe address is based on the &quot;copy as address&quot; command for the jar file I wanted to use. \r\n\r\nI also tried different ways of acknowledging the root directory including &quot;\\c:&quot;, &quot;\\c\\Users...&quot; and starting with &quot;\\Users&quot; as the examples on the course website show. \r\n\r\nWhen I use the command:\r\n\r\n echo $CLASSPATH.\r\n\r\nThe GitBash terminal shows no results, and the program provided by the professor used to test environment variables does not work.  I eventually need multiple classpaths, which I believe require a &quot;:&quot; between each file location.\r\n\r\n\r\n\r\n\r\n","title":"Setting up environment variables for windows using GitBash","body":"<p>I am trying to set up several java jar files and packages as environment variables for a computational linear algebra class.</p>\n<p>I am using the GitBash terminal on Windows OS.</p>\n<p>I open the file &quot;.bashrc&quot; and use the following string</p>\n<p>export CLASSPATH=$CLASSPATH:C:\\Users\\geniu\\testclasspath.jar:.</p>\n<p>The address is based on the &quot;copy as address&quot; command for the jar file I wanted to use.</p>\n<p>I also tried different ways of acknowledging the root directory including &quot;\\c:&quot;, &quot;\\c\\Users...&quot; and starting with &quot;\\Users&quot; as the examples on the course website show.</p>\n<p>When I use the command:</p>\n<p>echo $CLASSPATH.</p>\n<p>The GitBash terminal shows no results, and the program provided by the professor used to test environment variables does not work.  I eventually need multiple classpaths, which I believe require a &quot;:&quot; between each file location.</p>\n"},{"tags":["java","spring","hibernate"],"comments":[{"owner":{"account_id":8770150,"reputation":90,"user_id":6557264,"display_name":"Alessandro Leo"},"score":1,"creation_date":1685180629,"post_id":76346248,"comment_id":134627827,"body_markdown":"Are you overriding the managed version of hibernate-core for a reason? I would suggest to let Spring Boot use the managed version **6.2.2.Final** by removing the version from the implementation declaration","body":"Are you overriding the managed version of hibernate-core for a reason? I would suggest to let Spring Boot use the managed version <b>6.2.2.Final</b> by removing the version from the implementation declaration"},{"owner":{"account_id":8770150,"reputation":90,"user_id":6557264,"display_name":"Alessandro Leo"},"score":0,"creation_date":1685180868,"post_id":76346248,"comment_id":134627857,"body_markdown":"You can also remove **implementation &#39;jakarta.persistence:jakarta.persistence-api:3.1.0&#39;**, it is imported by **hibernate-core**","body":"You can also remove <b>implementation &#39;jakarta.persistence:jakarta.persistence-api:3.1.0&#39;</b>, it is imported by <b>hibernate-core</b>"}],"answers":[{"tags":[],"owner":{"account_id":8770150,"reputation":90,"user_id":6557264,"display_name":"Alessandro Leo"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1685182357,"creation_date":1685182357,"answer_id":76346396,"question_id":76346248,"body_markdown":"The cause of the error is the dependency\r\n\r\n    implementation &#39;org.hibernate:hibernate-core:5.4.30.Final&#39;\r\n\r\nYou are overriding Spring Boot managed dependency with an unsupported version.\r\n\r\nYou can remove the depencency, Spring Boot will use the managed version **6.2.2.Final**","title":"Error creating bean with name &#39;entityManagerFactory&#39;?","body":"<p>The cause of the error is the dependency</p>\n<pre><code>implementation 'org.hibernate:hibernate-core:5.4.30.Final'\n</code></pre>\n<p>You are overriding Spring Boot managed dependency with an unsupported version.</p>\n<p>You can remove the depencency, Spring Boot will use the managed version <strong>6.2.2.Final</strong></p>\n"}],"owner":{"display_name":"user20894127"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":886,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76346396,"answer_count":1,"score":0,"last_activity_date":1696711316,"creation_date":1685179926,"question_id":76346248,"body_markdown":"Can you please tell me, what is causing this error and how can I fix it?\r\n\r\n```\r\n21:38:16 main            SpringApplicati ERROR  Application run failed\r\norg.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;entityManagerFactory&#39; defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Class org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider does not implement the requested interface jakarta.persistence.spi.PersistenceProvider\r\n```\r\n\r\n\r\n\r\n```\r\nplugins {\r\n    id &#39;java&#39;\r\n    id &#39;org.springframework.boot&#39; version &#39;3.1.0&#39;\r\n    id &#39;io.spring.dependency-management&#39; version &#39;1.1.0&#39;\r\n}\r\n\r\nsourceCompatibility = &#39;17&#39;\r\n\r\ndependencies {\r\n    implementation &#39;org.postgresql:postgresql:42.3.8&#39;\r\n    implementation &#39;org.hibernate:hibernate-core:5.4.30.Final&#39;\r\n    implementation &#39;jakarta.persistence:jakarta.persistence-api:3.1.0&#39;\r\n    implementation &#39;io.springfox:springfox-swagger2:2.9.2&#39;\r\n    implementation &#39;io.springfox:springfox-swagger-ui:2.9.2&#39;\r\n    implementation &#39;org.springframework.boot:spring-boot-starter-web&#39;\r\n    implementation &#39;org.springframework.boot:spring-boot-starter-data-jpa&#39;\r\n    implementation &#39;org.springframework.boot:spring-boot-starter-security&#39;\r\n    testImplementation &#39;org.springframework.boot:spring-boot-starter-test&#39;\r\n    implementation &#39;ch.qos.logback:logback-classic:1.4.6&#39;\r\n    testImplementation &#39;junit:junit:4.13.1&#39;\r\n    testImplementation &#39;junit:junit:4.13.1&#39;\r\n}\r\n```\r\n\r\n\r\n\r\n```\r\nspring.datasource.url=jdbc:postgresql://localhost:5432/database\r\n\r\nspring.datasource.username=admin\r\nspring.datasource.password=root\r\nspring.datasource.driver-class-name=org.postgresql.Driver\r\nspring.jpa.properties.hibernate.jdbc.lob.non_contextual_creation=true\r\nspring.jpa.hibernate.ddl-auto=update\r\n```\r\n\r\n\r\ngithub project -&gt; -----------\r\n\r\nfull stack -&gt; ---------\r\n\r\n","title":"Error creating bean with name &#39;entityManagerFactory&#39;?","body":"<p>Can you please tell me, what is causing this error and how can I fix it?</p>\n<pre><code>21:38:16 main            SpringApplicati ERROR  Application run failed\norg.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Class org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider does not implement the requested interface jakarta.persistence.spi.PersistenceProvider\n</code></pre>\n<pre><code>plugins {\n    id 'java'\n    id 'org.springframework.boot' version '3.1.0'\n    id 'io.spring.dependency-management' version '1.1.0'\n}\n\nsourceCompatibility = '17'\n\ndependencies {\n    implementation 'org.postgresql:postgresql:42.3.8'\n    implementation 'org.hibernate:hibernate-core:5.4.30.Final'\n    implementation 'jakarta.persistence:jakarta.persistence-api:3.1.0'\n    implementation 'io.springfox:springfox-swagger2:2.9.2'\n    implementation 'io.springfox:springfox-swagger-ui:2.9.2'\n    implementation 'org.springframework.boot:spring-boot-starter-web'\n    implementation 'org.springframework.boot:spring-boot-starter-data-jpa'\n    implementation 'org.springframework.boot:spring-boot-starter-security'\n    testImplementation 'org.springframework.boot:spring-boot-starter-test'\n    implementation 'ch.qos.logback:logback-classic:1.4.6'\n    testImplementation 'junit:junit:4.13.1'\n    testImplementation 'junit:junit:4.13.1'\n}\n</code></pre>\n<pre><code>spring.datasource.url=jdbc:postgresql://localhost:5432/database\n\nspring.datasource.username=admin\nspring.datasource.password=root\nspring.datasource.driver-class-name=org.postgresql.Driver\nspring.jpa.properties.hibernate.jdbc.lob.non_contextual_creation=true\nspring.jpa.hibernate.ddl-auto=update\n</code></pre>\n<p>github project -&gt; -----------</p>\n<p>full stack -&gt; ---------</p>\n"},{"tags":["java","android","kotlin","android-asynctask","kotlin-coroutines"],"comments":[{"owner":{"account_id":39846,"reputation":991133,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":45,"creation_date":1573221124,"post_id":58767733,"comment_id":103821444,"body_markdown":"&quot;Deprecated&quot; means that Google is recommending that you move to something else. It does not mean that the class will be removed any time soon. In particular, `AsyncTask` cannot be removed without breaking backwards compatibility.","body":"&quot;Deprecated&quot; means that Google is recommending that you move to something else. It does not mean that the class will be removed any time soon. In particular, <code>AsyncTask</code> cannot be removed without breaking backwards compatibility."},{"owner":{"account_id":12438275,"reputation":1057,"user_id":9057721,"display_name":"Style-7"},"score":0,"creation_date":1573222899,"post_id":58767733,"comment_id":103822391,"body_markdown":"Possible duplicate of [Is AsyncTask deprecated now w/ AsyncTaskLoader?](https://stackoverflow.com/questions/43990084/is-asynctask-deprecated-now-w-asynctaskloader)","body":"Possible duplicate of <a href=\"https://stackoverflow.com/questions/43990084/is-asynctask-deprecated-now-w-asynctaskloader\">Is AsyncTask deprecated now w/ AsyncTaskLoader?</a>"},{"owner":{"account_id":2806090,"reputation":80148,"user_id":2413303,"accept_rate":100,"display_name":"EpicPandaForce"},"score":11,"creation_date":1573224932,"post_id":58767733,"comment_id":103823548,"body_markdown":"@Style-7 it is not.","body":"@Style-7 it is not."},{"owner":{"account_id":417402,"reputation":379,"user_id":793392,"accept_rate":29,"display_name":"beroal"},"score":0,"creation_date":1583431014,"post_id":58767733,"comment_id":107123600,"body_markdown":"There is no such thing as a &quot;static inner class&quot;. You mean a static nested class.","body":"There is no such thing as a &quot;static inner class&quot;. You mean a static nested class."},{"owner":{"account_id":3739249,"reputation":2113,"user_id":3109401,"accept_rate":29,"display_name":"Kimi Chiu"},"score":29,"creation_date":1620542108,"post_id":58767733,"comment_id":119227969,"body_markdown":"This is a disaster. It&#39;s recommended to use `AsyncTask` from official Android Document. I was a backend developer, already familiar with the executorService. For this recommendation, I migrated all background tasks to use `AsyncTask`. And now they tell us not to use it?","body":"This is a disaster. It&#39;s recommended to use <code>AsyncTask</code> from official Android Document. I was a backend developer, already familiar with the executorService. For this recommendation, I migrated all background tasks to use <code>AsyncTask</code>. And now they tell us not to use it?"},{"owner":{"account_id":448670,"reputation":1563,"user_id":843001,"accept_rate":47,"display_name":"Duna"},"score":1,"creation_date":1628785104,"post_id":58767733,"comment_id":121520342,"body_markdown":"@CommonsWare starting with Android 11 Google started deleting deprecated methods.","body":"@CommonsWare starting with Android 11 Google started deleting deprecated methods."},{"owner":{"account_id":39846,"reputation":991133,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":1,"creation_date":1628793673,"post_id":58767733,"comment_id":121523187,"body_markdown":"@Duna: Got any examples? They delete deprecated methods from libraries, as developers control the versions of libraries that they use. But, as I noted, `AsyncTask` cannot be removed without breaking backwards compatibility.","body":"@Duna: Got any examples? They delete deprecated methods from libraries, as developers control the versions of libraries that they use. But, as I noted, <code>AsyncTask</code> cannot be removed without breaking backwards compatibility."},{"owner":{"account_id":8656280,"reputation":91,"user_id":6480433,"display_name":"Addy"},"score":0,"creation_date":1637737429,"post_id":58767733,"comment_id":123903129,"body_markdown":"@CommonsWare yes it is working fine in android 11 and i&#39;m going to use till it is working or i should move to alternative asap?","body":"@CommonsWare yes it is working fine in android 11 and i&#39;m going to use till it is working or i should move to alternative asap?"},{"owner":{"account_id":39846,"reputation":991133,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":3,"creation_date":1637755559,"post_id":58767733,"comment_id":123909854,"body_markdown":"@Addy: The specific concern that I commented on here is `AsyncTask` being *deleted*, and that cannot happen without breaking lots of existing apps. Programmers should learn other techniques than `AsyncTask` (RxJava, Kotlin coroutines, etc.) simply because they are better and at this point are used more widely in professional settings.","body":"@Addy: The specific concern that I commented on here is <code>AsyncTask</code> being <i>deleted</i>, and that cannot happen without breaking lots of existing apps. Programmers should learn other techniques than <code>AsyncTask</code> (RxJava, Kotlin coroutines, etc.) simply because they are better and at this point are used more widely in professional settings."},{"owner":{"account_id":19447652,"reputation":189,"user_id":14224774,"display_name":"metvsk"},"score":0,"creation_date":1639487461,"post_id":58767733,"comment_id":124356325,"body_markdown":"@EpicPandaForce https://developer.android.com/reference/android/os/AsyncTask it is","body":"@EpicPandaForce <a href=\"https://developer.android.com/reference/android/os/AsyncTask\" rel=\"nofollow noreferrer\">developer.android.com/reference/android/os/AsyncTask</a> it is"},{"owner":{"account_id":23767229,"reputation":631,"user_id":17781834,"display_name":"Yohannes Masterous"},"score":0,"creation_date":1640938387,"post_id":58767733,"comment_id":124694313,"body_markdown":"Maybe this can help you  https://medium.com/swlh/asynctask-is-deprecated-now-what-f30c31362761","body":"Maybe this can help you  <a href=\"https://medium.com/swlh/asynctask-is-deprecated-now-what-f30c31362761\" rel=\"nofollow noreferrer\">medium.com/swlh/asynctask-is-deprecated-now-what-f30c3136276&zwnj;&#8203;1</a>"},{"owner":{"account_id":2884344,"reputation":1275,"user_id":2474581,"accept_rate":90,"display_name":"Kustekj&#233; Meklootn"},"score":1,"creation_date":1678636029,"post_id":58767733,"comment_id":133567867,"body_markdown":"@KimiChiu; this is one of the many things why I hate developing in Android. Pages full of fancy stuff and arty-farty concepts, saying they have the solution for the worlds problem, ending up throwing it all in the bin because it&#39;s so bad after all. CreateThread in win32 is more than 30 years old, it has it&#39;s flaws, but it does the job if you know what you are doing. Also reading the MSDN-programming-reference doesn&#39;t take ages like with Android...","body":"@KimiChiu; this is one of the many things why I hate developing in Android. Pages full of fancy stuff and arty-farty concepts, saying they have the solution for the worlds problem, ending up throwing it all in the bin because it&#39;s so bad after all. CreateThread in win32 is more than 30 years old, it has it&#39;s flaws, but it does the job if you know what you are doing. Also reading the MSDN-programming-reference doesn&#39;t take ages like with Android..."},{"owner":{"account_id":1825464,"reputation":1003,"user_id":3152516,"accept_rate":80,"display_name":"Dan Chase"},"score":0,"creation_date":1687884587,"post_id":58767733,"comment_id":134998390,"body_markdown":"@KimiChiu I learned a long time ago spending time on someone else&#39;s agenda is normally a waste of time. This is just like HTML certain HTML tags like center being deprecated - that doesn&#39;t really matter because all browsers still support it and probably won&#39;t stop. If they do, some day, I&#39;ll go through all of my code, if it even matters to me at that point in time.","body":"@KimiChiu I learned a long time ago spending time on someone else&#39;s agenda is normally a waste of time. This is just like HTML certain HTML tags like center being deprecated - that doesn&#39;t really matter because all browsers still support it and probably won&#39;t stop. If they do, some day, I&#39;ll go through all of my code, if it even matters to me at that point in time."}],"answers":[{"tags":[],"owner":{"account_id":2806090,"reputation":80148,"user_id":2413303,"accept_rate":100,"display_name":"EpicPandaForce"},"down_vote_count":2,"up_vote_count":127,"is_accepted":true,"score":125,"last_activity_date":1573298032,"creation_date":1573221331,"answer_id":58767934,"question_id":58767733,"body_markdown":"&gt;     private WeakReference&lt;MyActivity&gt; activityReference;\r\n\r\nGood riddance that it&#39;s deprecated, [because the `WeakReference&lt;Context&gt;` was always a hack, and not a proper solution](https://proandroiddev.com/a-quick-story-about-async-callbacks-memory-leaks-weakreferences-and-misconceptions-78003b3d6b26).\r\n\r\nNow people will have the opportunity to sanitize their code.\r\n\r\n---------\r\n\r\n&gt;     AsyncTask&lt;String, Void, MyPojo&gt; \r\n\r\nBased on this code, `Progress` is actually not needed, and there is a `String` input + `MyPojo` output. \r\n\r\nThis is actually quite easy to accomplish without any use of AsyncTask.\r\n\r\n    public class TaskRunner {\r\n        private final Executor executor = Executors.newSingleThreadExecutor(); // change according to your requirements\r\n        private final Handler handler = new Handler(Looper.getMainLooper());\r\n\r\n        public interface Callback&lt;R&gt; {\r\n            void onComplete(R result);\r\n        }\r\n\r\n        public &lt;R&gt; void executeAsync(Callable&lt;R&gt; callable, Callback&lt;R&gt; callback) {\r\n            executor.execute(() -&gt; {\r\n                final R result = callable.call();\r\n                handler.post(() -&gt; {\r\n                    callback.onComplete(result);\r\n                });\r\n            });\r\n        }\r\n    }\r\n\r\nHow to pass in the String? Like so:\r\n\r\n    class LongRunningTask implements Callable&lt;MyPojo&gt; {\r\n        private final String input;\r\n\r\n        public LongRunningTask(String input) {\r\n            this.input = input;\r\n        }\r\n\r\n        @Override\r\n        public MyPojo call() {\r\n            // Some long running task\r\n            return myPojo;\r\n        }\r\n    }\r\n\r\nAnd\r\n\r\n    // in ViewModel\r\n    taskRunner.executeAsync(new LongRunningTask(input), (data) -&gt; {\r\n        // MyActivity activity = activityReference.get();\r\n        // activity.progressBar.setVisibility(View.GONE);\r\n        // populateData(activity, data) ;\r\n\r\n        loadingLiveData.setValue(false);\r\n        dataLiveData.setValue(data);\r\n    });\r\n\r\n    // in Activity\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n\r\n        setContentView(R.layout.main_activity);\r\n\r\n        viewModel = ViewModelProviders.of(this).get(MyViewModel.class);\r\n        viewModel.loadingLiveData.observe(this, (loading) -&gt; {\r\n            if(loading) {\r\n                progressBar.setVisibility(View.VISIBLE);\r\n            } else {\r\n                progressBar.setVisibility(View.GONE);\r\n            }\r\n        });\r\n\r\n        viewModel.dataLiveData.observe(this, (data) -&gt; {\r\n            populateData(data);\r\n        }); \r\n    }\r\n\r\n----\r\n\r\nThis example used a single-threaded pool which is good for DB writes (or serialized network requests), but if you want something for DB reads or multiple requests, you can consider the following Executor configuration:\r\n\r\n    private static final Executor THREAD_POOL_EXECUTOR =\r\n            new ThreadPoolExecutor(5, 128, 1,\r\n                    TimeUnit.SECONDS, new LinkedBlockingQueue&lt;Runnable&gt;());","title":"The AsyncTask API is deprecated in Android 11. What are the alternatives?","body":"<blockquote>\n<pre><code>private WeakReference&lt;MyActivity&gt; activityReference;\n</code></pre>\n</blockquote>\n\n<p>Good riddance that it's deprecated, <a href=\"https://proandroiddev.com/a-quick-story-about-async-callbacks-memory-leaks-weakreferences-and-misconceptions-78003b3d6b26\" rel=\"noreferrer\">because the <code>WeakReference&lt;Context&gt;</code> was always a hack, and not a proper solution</a>.</p>\n\n<p>Now people will have the opportunity to sanitize their code.</p>\n\n<hr>\n\n<blockquote>\n<pre><code>AsyncTask&lt;String, Void, MyPojo&gt; \n</code></pre>\n</blockquote>\n\n<p>Based on this code, <code>Progress</code> is actually not needed, and there is a <code>String</code> input + <code>MyPojo</code> output. </p>\n\n<p>This is actually quite easy to accomplish without any use of AsyncTask.</p>\n\n<pre><code>public class TaskRunner {\n    private final Executor executor = Executors.newSingleThreadExecutor(); // change according to your requirements\n    private final Handler handler = new Handler(Looper.getMainLooper());\n\n    public interface Callback&lt;R&gt; {\n        void onComplete(R result);\n    }\n\n    public &lt;R&gt; void executeAsync(Callable&lt;R&gt; callable, Callback&lt;R&gt; callback) {\n        executor.execute(() -&gt; {\n            final R result = callable.call();\n            handler.post(() -&gt; {\n                callback.onComplete(result);\n            });\n        });\n    }\n}\n</code></pre>\n\n<p>How to pass in the String? Like so:</p>\n\n<pre><code>class LongRunningTask implements Callable&lt;MyPojo&gt; {\n    private final String input;\n\n    public LongRunningTask(String input) {\n        this.input = input;\n    }\n\n    @Override\n    public MyPojo call() {\n        // Some long running task\n        return myPojo;\n    }\n}\n</code></pre>\n\n<p>And</p>\n\n<pre><code>// in ViewModel\ntaskRunner.executeAsync(new LongRunningTask(input), (data) -&gt; {\n    // MyActivity activity = activityReference.get();\n    // activity.progressBar.setVisibility(View.GONE);\n    // populateData(activity, data) ;\n\n    loadingLiveData.setValue(false);\n    dataLiveData.setValue(data);\n});\n\n// in Activity\n@Override\nprotected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n\n    setContentView(R.layout.main_activity);\n\n    viewModel = ViewModelProviders.of(this).get(MyViewModel.class);\n    viewModel.loadingLiveData.observe(this, (loading) -&gt; {\n        if(loading) {\n            progressBar.setVisibility(View.VISIBLE);\n        } else {\n            progressBar.setVisibility(View.GONE);\n        }\n    });\n\n    viewModel.dataLiveData.observe(this, (data) -&gt; {\n        populateData(data);\n    }); \n}\n</code></pre>\n\n<hr>\n\n<p>This example used a single-threaded pool which is good for DB writes (or serialized network requests), but if you want something for DB reads or multiple requests, you can consider the following Executor configuration:</p>\n\n<pre><code>private static final Executor THREAD_POOL_EXECUTOR =\n        new ThreadPoolExecutor(5, 128, 1,\n                TimeUnit.SECONDS, new LinkedBlockingQueue&lt;Runnable&gt;());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12183171,"reputation":914,"user_id":8894035,"display_name":"Wahab Khan Jadon"},"down_vote_count":2,"up_vote_count":5,"is_accepted":false,"score":3,"last_activity_date":1575108857,"creation_date":1575108857,"answer_id":59115135,"question_id":58767733,"body_markdown":"Google recommends using Java’s Concurrency framework or Kotlin Coroutines. but Rxjava end to have much more flexibility and features then java concurrency so gained quite a bit of popularity.","title":"The AsyncTask API is deprecated in Android 11. What are the alternatives?","body":"<p>Google recommends using Java’s Concurrency framework or Kotlin Coroutines. but Rxjava end to have much more flexibility and features then java concurrency so gained quite a bit of popularity.</p>\n"},{"tags":[],"owner":{"account_id":5971918,"reputation":10303,"user_id":4694013,"accept_rate":79,"display_name":"Anoop M Maddasseri"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1591871290,"creation_date":1591870930,"answer_id":62322156,"question_id":58767733,"body_markdown":"Android deprecated &lt;s&gt;AsyncTask&lt;/s&gt; API in Android 11 to get rid of a share of problems to begin with. \r\n\r\nSo, what&#39;s now?  \r\n============\r\n\r\n - Threads\r\n - Executers\r\n - RxJava\r\n - Listenable Futures\r\n - Coroutines &#128293;\r\n\r\nWhy Coroutines?\r\n----------------\r\n\r\n&gt; Coroutines are the Kotlin way to do asynchronous programming. Compiler\r\n&gt; support is stable since Kotlin 1.3, together with a\r\n&gt; [`kotlinx.coroutines`][1] library -\r\n\r\n - Structured Concurrency\r\n - Non-blocking, sequential code\r\n - Cancellation propagation\r\n - Natural Exception Handling\r\n\r\n  [1]: https://github.com/Kotlin/kotlinx.coroutines","title":"The AsyncTask API is deprecated in Android 11. What are the alternatives?","body":"<p>Android deprecated <s>AsyncTask</s> API in Android 11 to get rid of a share of problems to begin with. </p>\n\n<h1>So, what's now?</h1>\n\n<ul>\n<li>Threads</li>\n<li>Executers</li>\n<li>RxJava</li>\n<li>Listenable Futures</li>\n<li>Coroutines 🔥</li>\n</ul>\n\n<h2>Why Coroutines?</h2>\n\n<blockquote>\n  <p>Coroutines are the Kotlin way to do asynchronous programming. Compiler\n  support is stable since Kotlin 1.3, together with a\n  <a href=\"https://github.com/Kotlin/kotlinx.coroutines\" rel=\"noreferrer\"><code>kotlinx.coroutines</code></a> library -</p>\n</blockquote>\n\n<ul>\n<li>Structured Concurrency</li>\n<li>Non-blocking, sequential code</li>\n<li>Cancellation propagation</li>\n<li>Natural Exception Handling</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":1919838,"reputation":28254,"user_id":1731626,"display_name":"Sergio"},"down_vote_count":0,"up_vote_count":44,"is_accepted":false,"score":44,"last_activity_date":1651495867,"creation_date":1594006572,"answer_id":62748880,"question_id":58767733,"body_markdown":"According to the [Android documentation][1] `AsyncTask` was deprecated in **API level 30** and it is suggested to use the **standard java.util.concurrent or [Kotlin concurrency utilities][2]** instead.\r\n\r\nUsing the latter it can be achieved pretty simple:\r\n\r\n1. Create generic extension function on `CoroutineScope`:\r\n\r\n        fun &lt;R&gt; CoroutineScope.executeAsyncTask(\r\n                onPreExecute: () -&gt; Unit,\r\n                doInBackground: () -&gt; R,\r\n                onPostExecute: (R) -&gt; Unit\r\n        ) = launch {\r\n            onPreExecute() // runs in Main Thread\r\n            val result = withContext(Dispatchers.IO) { \r\n                doInBackground() // runs in background thread without blocking the Main Thread\r\n            }\r\n            onPostExecute(result) // runs in Main Thread\r\n        } \r\n\r\n2. Use the function with any `CoroutineScope` which has `Dispatchers.Main` context:\r\n\r\n    - In [`ViewModel`][3]:\r\n\r\n\r\n          class MyViewModel : ViewModel() {\r\n    \r\n              fun someFun() {\r\n                  viewModelScope.executeAsyncTask(onPreExecute = {\r\n                      // ... runs in Main Thread\r\n                  }, doInBackground = {\r\n                      // ... runs in Worker(Background) Thread\r\n                      &quot;Result&quot; // send data to &quot;onPostExecute&quot;\r\n                  }, onPostExecute = {\r\n                      // runs in Main Thread\r\n                      // ... here &quot;it&quot; is the data returned from &quot;doInBackground&quot;\r\n                  })\r\n              }\r\n          }\r\n\r\n    - In `Activity` or `Fragment`:\r\n\r\n\r\n          lifecycleScope.executeAsyncTask(onPreExecute = {\r\n              // ... runs in Main Thread\r\n          }, doInBackground = {\r\n              // ... runs in Worker(Background) Thread\r\n              &quot;Result&quot; // send data to &quot;onPostExecute&quot;\r\n          }, onPostExecute = {\r\n              // runs in Main Thread\r\n              // ... here &quot;it&quot; is the data returned from &quot;doInBackground&quot;\r\n          })\r\n\r\n     To use `viewModelScope` or `lifecycleScope` add next line(s) to dependencies of the app&#39;s **build.gradle** file:\r\n\r\n       implementation &quot;androidx.lifecycle:lifecycle-viewmodel-ktx:$LIFECYCLE_VERSION&quot; // for viewModelScope\r\n       implementation &quot;androidx.lifecycle:lifecycle-runtime-ktx:$LIFECYCLE_VERSION&quot; // for lifecycleScope\r\n\r\n\r\n    At the time of writing `final LIFECYCLE_VERSION = &quot;2.3.0-alpha05&quot;`\r\n\r\n\r\n\r\n\r\n**UPDATE**:\r\n\r\nAlso we can implement progress updating using `onProgressUpdate` function:\r\n\r\n    fun &lt;P, R&gt; CoroutineScope.executeAsyncTask(\r\n            onPreExecute: () -&gt; Unit,\r\n            doInBackground: suspend (suspend (P) -&gt; Unit) -&gt; R,\r\n            onPostExecute: (R) -&gt; Unit,\r\n            onProgressUpdate: (P) -&gt; Unit\r\n    ) = launch {\r\n        onPreExecute()\r\n    \r\n        val result = withContext(Dispatchers.IO) {\r\n            doInBackground {\r\n                withContext(Dispatchers.Main) { onProgressUpdate(it) }\r\n            }\r\n        }\r\n        onPostExecute(result)\r\n    }\r\n\r\nUsing any `CoroutineScope` (`viewModelScope`/`lifecycleScope`, see implementations above) with `Dispatchers.Main` context we can call it:\r\n\r\n    someScope.executeAsyncTask(\r\n        onPreExecute = {\r\n            // ... runs in Main Thread\r\n        }, doInBackground = { publishProgress: suspend (progress: Int) -&gt; Unit -&gt;\r\n            \r\n            // ... runs in Background Thread\r\n\r\n            // simulate progress update\r\n            publishProgress(50) // call `publishProgress` to update progress, `onProgressUpdate` will be called\r\n            delay(1000)\r\n            publishProgress(100)\r\n\r\n            \r\n            &quot;Result&quot; // send data to &quot;onPostExecute&quot;\r\n        }, onPostExecute = {\r\n            // runs in Main Thread\r\n            // ... here &quot;it&quot; is a data returned from &quot;doInBackground&quot;\r\n        }, onProgressUpdate = {\r\n            // runs in Main Thread\r\n            // ... here &quot;it&quot; contains progress\r\n        }\r\n    )\r\n\r\n\r\n  [1]: https://developer.android.com/reference/android/os/AsyncTask\r\n  [2]: https://developer.android.com/topic/libraries/architecture/coroutines\r\n  [3]: https://developer.android.com/topic/libraries/architecture/viewmodel","title":"The AsyncTask API is deprecated in Android 11. What are the alternatives?","body":"<p>According to the <a href=\"https://developer.android.com/reference/android/os/AsyncTask\" rel=\"noreferrer\">Android documentation</a> <code>AsyncTask</code> was deprecated in <strong>API level 30</strong> and it is suggested to use the <strong>standard java.util.concurrent or <a href=\"https://developer.android.com/topic/libraries/architecture/coroutines\" rel=\"noreferrer\">Kotlin concurrency utilities</a></strong> instead.</p>\n<p>Using the latter it can be achieved pretty simple:</p>\n<ol>\n<li><p>Create generic extension function on <code>CoroutineScope</code>:</p>\n<pre><code> fun &lt;R&gt; CoroutineScope.executeAsyncTask(\n         onPreExecute: () -&gt; Unit,\n         doInBackground: () -&gt; R,\n         onPostExecute: (R) -&gt; Unit\n ) = launch {\n     onPreExecute() // runs in Main Thread\n     val result = withContext(Dispatchers.IO) { \n         doInBackground() // runs in background thread without blocking the Main Thread\n     }\n     onPostExecute(result) // runs in Main Thread\n } \n</code></pre>\n</li>\n<li><p>Use the function with any <code>CoroutineScope</code> which has <code>Dispatchers.Main</code> context:</p>\n<ul>\n<li><p>In <a href=\"https://developer.android.com/topic/libraries/architecture/viewmodel\" rel=\"noreferrer\"><code>ViewModel</code></a>:</p>\n<pre><code>class MyViewModel : ViewModel() {\n\n    fun someFun() {\n        viewModelScope.executeAsyncTask(onPreExecute = {\n            // ... runs in Main Thread\n        }, doInBackground = {\n            // ... runs in Worker(Background) Thread\n            &quot;Result&quot; // send data to &quot;onPostExecute&quot;\n        }, onPostExecute = {\n            // runs in Main Thread\n            // ... here &quot;it&quot; is the data returned from &quot;doInBackground&quot;\n        })\n    }\n}\n</code></pre>\n</li>\n<li><p>In <code>Activity</code> or <code>Fragment</code>:</p>\n<pre><code>lifecycleScope.executeAsyncTask(onPreExecute = {\n    // ... runs in Main Thread\n}, doInBackground = {\n    // ... runs in Worker(Background) Thread\n    &quot;Result&quot; // send data to &quot;onPostExecute&quot;\n}, onPostExecute = {\n    // runs in Main Thread\n    // ... here &quot;it&quot; is the data returned from &quot;doInBackground&quot;\n})\n</code></pre>\n</li>\n</ul>\n<p>To use <code>viewModelScope</code> or <code>lifecycleScope</code> add next line(s) to dependencies of the app's <strong>build.gradle</strong> file:</p>\n<pre><code>implementation &quot;androidx.lifecycle:lifecycle-viewmodel-ktx:$LIFECYCLE_VERSION&quot; // for viewModelScope\nimplementation &quot;androidx.lifecycle:lifecycle-runtime-ktx:$LIFECYCLE_VERSION&quot; // for lifecycleScope\n</code></pre>\n<p>At the time of writing <code>final LIFECYCLE_VERSION = &quot;2.3.0-alpha05&quot;</code></p>\n</li>\n</ol>\n<p><strong>UPDATE</strong>:</p>\n<p>Also we can implement progress updating using <code>onProgressUpdate</code> function:</p>\n<pre><code>fun &lt;P, R&gt; CoroutineScope.executeAsyncTask(\n        onPreExecute: () -&gt; Unit,\n        doInBackground: suspend (suspend (P) -&gt; Unit) -&gt; R,\n        onPostExecute: (R) -&gt; Unit,\n        onProgressUpdate: (P) -&gt; Unit\n) = launch {\n    onPreExecute()\n\n    val result = withContext(Dispatchers.IO) {\n        doInBackground {\n            withContext(Dispatchers.Main) { onProgressUpdate(it) }\n        }\n    }\n    onPostExecute(result)\n}\n</code></pre>\n<p>Using any <code>CoroutineScope</code> (<code>viewModelScope</code>/<code>lifecycleScope</code>, see implementations above) with <code>Dispatchers.Main</code> context we can call it:</p>\n<pre><code>someScope.executeAsyncTask(\n    onPreExecute = {\n        // ... runs in Main Thread\n    }, doInBackground = { publishProgress: suspend (progress: Int) -&gt; Unit -&gt;\n        \n        // ... runs in Background Thread\n\n        // simulate progress update\n        publishProgress(50) // call `publishProgress` to update progress, `onProgressUpdate` will be called\n        delay(1000)\n        publishProgress(100)\n\n        \n        &quot;Result&quot; // send data to &quot;onPostExecute&quot;\n    }, onPostExecute = {\n        // runs in Main Thread\n        // ... here &quot;it&quot; is a data returned from &quot;doInBackground&quot;\n    }, onProgressUpdate = {\n        // runs in Main Thread\n        // ... here &quot;it&quot; contains progress\n    }\n)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":340810,"reputation":127,"user_id":671037,"accept_rate":0,"display_name":"Kumar"},"down_vote_count":1,"up_vote_count":10,"is_accepted":false,"score":9,"last_activity_date":1599118797,"creation_date":1596807327,"answer_id":63302963,"question_id":58767733,"body_markdown":"Here I created a Alternative for AsyncTask using Coroutines which can be used same as AsyncTask without changing much code base in your project.\r\n\r\n1. Create a new Abstract class AsyncTaskCoroutine which takes input parameter and output parameter datatypes of-course these parameters are optional :)\r\n\r\n   \r\n        import kotlinx.coroutines.Dispatchers\r\n        import kotlinx.coroutines.GlobalScope\r\n        import kotlinx.coroutines.async\r\n        import kotlinx.coroutines.launch\r\n        \r\n        abstract class AsyncTaskCoroutine&lt;I, O&gt; {\r\n            var result: O? = null\r\n            //private var result: O\r\n            open fun onPreExecute() {}\r\n        \r\n            open fun onPostExecute(result: O?) {}\r\n            abstract fun doInBackground(vararg params: I): O\r\n        \r\n            fun &lt;T&gt; execute(vararg input: I) {\r\n                GlobalScope.launch(Dispatchers.Main) {\r\n                    onPreExecute()\r\n                    callAsync(*input)\r\n                }\r\n            }\r\n        \r\n            private suspend fun callAsync(vararg input: I) {\r\n                GlobalScope.async(Dispatchers.IO) {\r\n                    result = doInBackground(*input)\r\n                }.await()\r\n                GlobalScope.launch(Dispatchers.Main) {\r\n        \r\n                    onPostExecute(result)\r\n        \r\n        \r\n                }\r\n            }\r\n        }\r\n\r\n2 . Inside Activity use this as same as your old AsycnTask now\r\n \r\n\r\n   \r\n\r\n     new AsyncTaskCoroutine() {\r\n                    @Override\r\n                    public Object doInBackground(Object[] params) {\r\n                        return null;\r\n                    }\r\n        \r\n                    @Override\r\n                    public void onPostExecute(@Nullable Object result) {\r\n        \r\n                    }\r\n        \r\n                    @Override\r\n                    public void onPreExecute() {\r\n        \r\n                    }\r\n                }.execute();\r\n\r\n3. InCase if you need to send pass params\r\n     \r\n   \r\n         new AsyncTaskCoroutine&lt;Integer, Boolean&gt;() {\r\n\r\n            @Override\r\n            public Boolean doInBackground(Integer... params) {\r\n                return null;\r\n            }\r\n    \r\n            @Override\r\n            public void onPostExecute(@Nullable Boolean result) {\r\n    \r\n            }\r\n    \r\n            @Override\r\n            public void onPreExecute() {\r\n    \r\n            }\r\n        }.execute();\r\n\r\n","title":"The AsyncTask API is deprecated in Android 11. What are the alternatives?","body":"<p>Here I created a Alternative for AsyncTask using Coroutines which can be used same as AsyncTask without changing much code base in your project.</p>\n<ol>\n<li><p>Create a new Abstract class AsyncTaskCoroutine which takes input parameter and output parameter datatypes of-course these parameters are optional :)</p>\n<pre><code> import kotlinx.coroutines.Dispatchers\n import kotlinx.coroutines.GlobalScope\n import kotlinx.coroutines.async\n import kotlinx.coroutines.launch\n\n abstract class AsyncTaskCoroutine&lt;I, O&gt; {\n     var result: O? = null\n     //private var result: O\n     open fun onPreExecute() {}\n\n     open fun onPostExecute(result: O?) {}\n     abstract fun doInBackground(vararg params: I): O\n\n     fun &lt;T&gt; execute(vararg input: I) {\n         GlobalScope.launch(Dispatchers.Main) {\n             onPreExecute()\n             callAsync(*input)\n         }\n     }\n\n     private suspend fun callAsync(vararg input: I) {\n         GlobalScope.async(Dispatchers.IO) {\n             result = doInBackground(*input)\n         }.await()\n         GlobalScope.launch(Dispatchers.Main) {\n\n             onPostExecute(result)\n\n\n         }\n     }\n }\n</code></pre>\n</li>\n</ol>\n<p>2 . Inside Activity use this as same as your old AsycnTask now</p>\n<pre><code> new AsyncTaskCoroutine() {\n                @Override\n                public Object doInBackground(Object[] params) {\n                    return null;\n                }\n    \n                @Override\n                public void onPostExecute(@Nullable Object result) {\n    \n                }\n    \n                @Override\n                public void onPreExecute() {\n    \n                }\n            }.execute();\n</code></pre>\n<ol start=\"3\">\n<li><p>InCase if you need to send pass params</p>\n<pre><code>  new AsyncTaskCoroutine&lt;Integer, Boolean&gt;() {\n\n     @Override\n     public Boolean doInBackground(Integer... params) {\n         return null;\n     }\n\n     @Override\n     public void onPostExecute(@Nullable Boolean result) {\n\n     }\n\n     @Override\n     public void onPreExecute() {\n\n     }\n }.execute();\n</code></pre>\n</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":9219099,"reputation":121,"user_id":6849205,"display_name":"Honza Johny Pejsar"},"down_vote_count":2,"up_vote_count":5,"is_accepted":false,"score":3,"last_activity_date":1599782915,"creation_date":1596901993,"answer_id":63317382,"question_id":58767733,"body_markdown":"My custom replacement: https://github.com/JohnyDaDeveloper/AndroidAsync\r\n\r\nIt only works when the app is running (more specifically the activity which scheduled the task), but it&#39;s capable of updating the UI after the background task was completed\r\n\r\nEDIT: My AsyncTask no longer reqires Activiy to function.","title":"The AsyncTask API is deprecated in Android 11. What are the alternatives?","body":"<p>My custom replacement: <a href=\"https://github.com/JohnyDaDeveloper/AndroidAsync\" rel=\"nofollow noreferrer\">https://github.com/JohnyDaDeveloper/AndroidAsync</a></p>\n<p>It only works when the app is running (more specifically the activity which scheduled the task), but it's capable of updating the UI after the background task was completed</p>\n<p>EDIT: My AsyncTask no longer reqires Activiy to function.</p>\n"},{"tags":[],"owner":{"account_id":6097613,"reputation":1,"user_id":9640177,"display_name":"Mayank Kumar Chaudhari"},"down_vote_count":1,"up_vote_count":61,"is_accepted":false,"score":60,"last_activity_date":1646037979,"creation_date":1597910084,"answer_id":63500657,"question_id":58767733,"body_markdown":"One of the simplest alternative is to use `Thread`\r\n\r\n```java\r\nnew Thread(new Runnable() {\r\n    @Override\r\n    public void run() {\r\n        // do your stuff\r\n        runOnUiThread(new Runnable() {\r\n            public void run() {\r\n                // do onPostExecute stuff\r\n            }\r\n        });\r\n    }\r\n}).start();\r\n```\r\n\r\nIf your project supports **JAVA 8**, you can use `lambda`:\r\n\r\n```java\r\nnew Thread(() -&gt; {\r\n    // do background stuff here\r\n    runOnUiThread(()-&gt;{\r\n        // OnPostExecute stuff here\r\n    });\r\n}).start();\r\n```","title":"The AsyncTask API is deprecated in Android 11. What are the alternatives?","body":"<p>One of the simplest alternative is to use <code>Thread</code></p>\n<pre class=\"lang-java prettyprint-override\"><code>new Thread(new Runnable() {\n    @Override\n    public void run() {\n        // do your stuff\n        runOnUiThread(new Runnable() {\n            public void run() {\n                // do onPostExecute stuff\n            }\n        });\n    }\n}).start();\n</code></pre>\n<p>If your project supports <strong>JAVA 8</strong>, you can use <code>lambda</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>new Thread(() -&gt; {\n    // do background stuff here\n    runOnUiThread(()-&gt;{\n        // OnPostExecute stuff here\n    });\n}).start();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8495232,"reputation":2977,"user_id":6370015,"accept_rate":44,"display_name":"Kishan Donga"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1601547652,"creation_date":1601547652,"answer_id":64153396,"question_id":58767733,"body_markdown":"You can use this custom class as an alternative of the AsyncTask&lt;&gt;, this is the same as AsyncTask so you not need to apply extra efforts for the same.\r\n\r\n    import android.os.Handler;\r\n    import android.os.Looper;\r\n    \r\n    import androidx.annotation.NonNull;\r\n    import androidx.annotation.Nullable;\r\n    \r\n    import java.util.concurrent.Callable;\r\n    import java.util.concurrent.ExecutorService;\r\n    import java.util.concurrent.SynchronousQueue;\r\n    import java.util.concurrent.ThreadPoolExecutor;\r\n    import java.util.concurrent.TimeUnit;\r\n    \r\n    public class TaskRunner {\r\n    \r\n        private static final int CORE_THREADS = 3;\r\n        private static final long KEEP_ALIVE_SECONDS = 60L;\r\n        private static TaskRunner taskRunner = null;\r\n        private Handler handler = new Handler(Looper.getMainLooper());\r\n        private ThreadPoolExecutor executor;\r\n    \r\n        private TaskRunner() {\r\n            executor = newThreadPoolExecutor();\r\n        }\r\n    \r\n        public static TaskRunner getInstance() {\r\n            if (taskRunner == null) {\r\n                taskRunner = new TaskRunner();\r\n            }\r\n            return taskRunner;\r\n        }\r\n    \r\n        public void shutdownService() {\r\n            if (executor != null) {\r\n                executor.shutdown();\r\n            }\r\n        }\r\n    \r\n        public void execute(Runnable command) {\r\n            executor.execute(command);\r\n        }\r\n    \r\n        public ExecutorService getExecutor() {\r\n            return executor;\r\n        }\r\n    \r\n        public &lt;R&gt; void executeCallable(@NonNull Callable&lt;R&gt; callable, @NonNull OnCompletedCallback&lt;R&gt; callback) {\r\n            executor.execute(() -&gt; {\r\n                R result = null;\r\n                try {\r\n                    result = callable.call();\r\n                } catch (Exception e) {\r\n                    e.printStackTrace(); // log this exception\r\n                } finally {\r\n                    final R finalResult = result;\r\n                    handler.post(() -&gt; callback.onComplete(finalResult));\r\n                }\r\n            });\r\n        }\r\n    \r\n        private ThreadPoolExecutor newThreadPoolExecutor() {\r\n            return new ThreadPoolExecutor(\r\n                    CORE_THREADS,\r\n                    Integer.MAX_VALUE,\r\n                    KEEP_ALIVE_SECONDS,\r\n                    TimeUnit.SECONDS,\r\n                    new SynchronousQueue&lt;&gt;()\r\n            );\r\n        }\r\n    \r\n        public interface OnCompletedCallback&lt;R&gt; {\r\n            void onComplete(@Nullable R result);\r\n        }\r\n    }\r\n\r\nHow to use it? Please follow the below examples.\r\n\r\nWith lambda expressions\r\n\r\n    TaskRunner.getInstance().executeCallable(() -&gt; 1, result -&gt; {\r\n    });\r\n    \r\n    \r\n    TaskRunner.getInstance().execute(() -&gt; {\r\n    });\r\n\r\n\r\nWithout lambda expressions\r\n\r\n    TaskRunner.getInstance().executeCallable(new Callable&lt;Integer&gt;() {\r\n        @Override\r\n        public Integer call() throws Exception {\r\n            return 1;\r\n        }\r\n    }, new TaskRunner.OnCompletedCallback&lt;Integer&gt;() {\r\n        @Override\r\n        public void onComplete(@Nullable Integer result) {\r\n    \r\n        }\r\n    });\r\n    \r\n    TaskRunner.getInstance().execute(new Runnable() {\r\n        @Override\r\n        public void run() {\r\n    \r\n        }\r\n    });\r\n\r\nNote: Don&#39;t forget to shutdown executors service \r\n\r\n    TaskRunner.getInstance().shutdownService();","title":"The AsyncTask API is deprecated in Android 11. What are the alternatives?","body":"<p>You can use this custom class as an alternative of the AsyncTask&lt;&gt;, this is the same as AsyncTask so you not need to apply extra efforts for the same.</p>\n<pre><code>import android.os.Handler;\nimport android.os.Looper;\n\nimport androidx.annotation.NonNull;\nimport androidx.annotation.Nullable;\n\nimport java.util.concurrent.Callable;\nimport java.util.concurrent.ExecutorService;\nimport java.util.concurrent.SynchronousQueue;\nimport java.util.concurrent.ThreadPoolExecutor;\nimport java.util.concurrent.TimeUnit;\n\npublic class TaskRunner {\n\n    private static final int CORE_THREADS = 3;\n    private static final long KEEP_ALIVE_SECONDS = 60L;\n    private static TaskRunner taskRunner = null;\n    private Handler handler = new Handler(Looper.getMainLooper());\n    private ThreadPoolExecutor executor;\n\n    private TaskRunner() {\n        executor = newThreadPoolExecutor();\n    }\n\n    public static TaskRunner getInstance() {\n        if (taskRunner == null) {\n            taskRunner = new TaskRunner();\n        }\n        return taskRunner;\n    }\n\n    public void shutdownService() {\n        if (executor != null) {\n            executor.shutdown();\n        }\n    }\n\n    public void execute(Runnable command) {\n        executor.execute(command);\n    }\n\n    public ExecutorService getExecutor() {\n        return executor;\n    }\n\n    public &lt;R&gt; void executeCallable(@NonNull Callable&lt;R&gt; callable, @NonNull OnCompletedCallback&lt;R&gt; callback) {\n        executor.execute(() -&gt; {\n            R result = null;\n            try {\n                result = callable.call();\n            } catch (Exception e) {\n                e.printStackTrace(); // log this exception\n            } finally {\n                final R finalResult = result;\n                handler.post(() -&gt; callback.onComplete(finalResult));\n            }\n        });\n    }\n\n    private ThreadPoolExecutor newThreadPoolExecutor() {\n        return new ThreadPoolExecutor(\n                CORE_THREADS,\n                Integer.MAX_VALUE,\n                KEEP_ALIVE_SECONDS,\n                TimeUnit.SECONDS,\n                new SynchronousQueue&lt;&gt;()\n        );\n    }\n\n    public interface OnCompletedCallback&lt;R&gt; {\n        void onComplete(@Nullable R result);\n    }\n}\n</code></pre>\n<p>How to use it? Please follow the below examples.</p>\n<p>With lambda expressions</p>\n<pre><code>TaskRunner.getInstance().executeCallable(() -&gt; 1, result -&gt; {\n});\n\n\nTaskRunner.getInstance().execute(() -&gt; {\n});\n</code></pre>\n<p>Without lambda expressions</p>\n<pre><code>TaskRunner.getInstance().executeCallable(new Callable&lt;Integer&gt;() {\n    @Override\n    public Integer call() throws Exception {\n        return 1;\n    }\n}, new TaskRunner.OnCompletedCallback&lt;Integer&gt;() {\n    @Override\n    public void onComplete(@Nullable Integer result) {\n\n    }\n});\n\nTaskRunner.getInstance().execute(new Runnable() {\n    @Override\n    public void run() {\n\n    }\n});\n</code></pre>\n<p>Note: Don't forget to shutdown executors service</p>\n<pre><code>TaskRunner.getInstance().shutdownService();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13733259,"reputation":1173,"user_id":9910265,"display_name":"Mohamed Ben Romdhane"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1604415030,"creation_date":1604415030,"answer_id":64665154,"question_id":58767733,"body_markdown":"Just replace the whole class with this Thread and put it in a method to pass variables\r\n````\r\nnew Thread(() -&gt; {\r\n            // do background stuff here\r\n            runOnUiThread(()-&gt;{\r\n                // OnPostExecute stuff here\r\n              \r\n            });\r\n        }).start();\r\n````\r\nand in Fragment add the Context to the `runOnUiThread()` methode:\r\n````\r\n new Thread(() -&gt; {\r\n            // do background stuff here\r\n            context.runOnUiThread(()-&gt;{\r\n                // OnPostExecute stuff here\r\n            });\r\n        }).start();","title":"The AsyncTask API is deprecated in Android 11. What are the alternatives?","body":"<p>Just replace the whole class with this Thread and put it in a method to pass variables</p>\n<pre><code>new Thread(() -&gt; {\n            // do background stuff here\n            runOnUiThread(()-&gt;{\n                // OnPostExecute stuff here\n              \n            });\n        }).start();\n</code></pre>\n<p>and in Fragment add the Context to the <code>runOnUiThread()</code> methode:</p>\n<pre><code> new Thread(() -&gt; {\n            // do background stuff here\n            context.runOnUiThread(()-&gt;{\n                // OnPostExecute stuff here\n            });\n        }).start();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8357908,"reputation":2305,"user_id":6277444,"display_name":"Kashfa Khan"},"down_vote_count":0,"up_vote_count":197,"is_accepted":false,"score":197,"last_activity_date":1646038180,"creation_date":1606139048,"answer_id":64969640,"question_id":58767733,"body_markdown":"You can directly use `Executors` from `java.util.concurrent` package. \r\n\r\nI also searched about it and I found a solution in this [Android Async API is Deprecated][1] post.\r\n\r\nUnfortunately, the post is using Kotlin, but after a little effort I have converted it into Java. So here is the solution. \r\n\r\n```java\r\nExecutorService executor = Executors.newSingleThreadExecutor();\r\nHandler handler = new Handler(Looper.getMainLooper());\r\n\r\nexecutor.execute(new Runnable() {\r\n    @Override\r\n    public void run() {\r\n\r\n        //Background work here\r\n\r\n        handler.post(new Runnable() {\r\n            @Override\r\n            public void run() {\r\n                //UI Thread work here\r\n            }\r\n        });\r\n    }\r\n});\r\n```\r\n\r\nPretty simple right? You can simplify it little more if you are using Java 8 in your project. \r\n\r\n```java\r\nExecutorService executor = Executors.newSingleThreadExecutor();\r\nHandler handler = new Handler(Looper.getMainLooper());\r\n\r\nexecutor.execute(() -&gt; {\r\n    //Background work here\r\n    handler.post(() -&gt; {\r\n        //UI Thread work here\r\n    });\r\n});\r\n```\r\n\r\nStill, it cannot defeat kotlin terms of conciseness of the code, but better than the previous java version. \r\n\r\nHope this will help you. Thank You\r\n\r\n  [1]: https://www.simplifiedcoding.net/android-asynctask/","title":"The AsyncTask API is deprecated in Android 11. What are the alternatives?","body":"<p>You can directly use <code>Executors</code> from <code>java.util.concurrent</code> package.</p>\n<p>I also searched about it and I found a solution in this <a href=\"https://www.simplifiedcoding.net/android-asynctask/\" rel=\"noreferrer\">Android Async API is Deprecated</a> post.</p>\n<p>Unfortunately, the post is using Kotlin, but after a little effort I have converted it into Java. So here is the solution.</p>\n<pre class=\"lang-java prettyprint-override\"><code>ExecutorService executor = Executors.newSingleThreadExecutor();\nHandler handler = new Handler(Looper.getMainLooper());\n\nexecutor.execute(new Runnable() {\n    @Override\n    public void run() {\n\n        //Background work here\n\n        handler.post(new Runnable() {\n            @Override\n            public void run() {\n                //UI Thread work here\n            }\n        });\n    }\n});\n</code></pre>\n<p>Pretty simple right? You can simplify it little more if you are using Java 8 in your project.</p>\n<pre class=\"lang-java prettyprint-override\"><code>ExecutorService executor = Executors.newSingleThreadExecutor();\nHandler handler = new Handler(Looper.getMainLooper());\n\nexecutor.execute(() -&gt; {\n    //Background work here\n    handler.post(() -&gt; {\n        //UI Thread work here\n    });\n});\n</code></pre>\n<p>Still, it cannot defeat kotlin terms of conciseness of the code, but better than the previous java version.</p>\n<p>Hope this will help you. Thank You</p>\n"},{"tags":[],"owner":{"account_id":11007169,"reputation":860,"user_id":9821661,"display_name":"milan pithadia"},"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1620752798,"creation_date":1606915136,"answer_id":65108879,"question_id":58767733,"body_markdown":"Use this class to execute background task in Background Thread this class is **work for all android API version include Android 11** also this code is same work like **AsyncTask** with **doInBackground** and **onPostExecute** methods\r\n\r\n    public abstract class BackgroundTask {\r\n    \r\n        private Activity activity;\r\n        public BackgroundTask(Activity activity) {\r\n            this.activity = activity;\r\n        }\r\n    \r\n        private void startBackground() {\r\n            new Thread(new Runnable() {\r\n                public void run() {\r\n    \r\n                    doInBackground();\r\n                    activity.runOnUiThread(new Runnable() {\r\n                        public void run() {\r\n    \r\n                            onPostExecute();\r\n                        }\r\n                    });\r\n                }\r\n            }).start();\r\n        }\r\n        public void execute(){\r\n            startBackground();\r\n        }\r\n    \r\n        public abstract void doInBackground();\r\n        public abstract void onPostExecute();\r\n    \r\n    }\r\n\r\nAfter copying the above class, you can then use it with this:\r\n\r\n    new BackgroundTask(MainActivity.this) {\r\n            @Override\r\n            public void doInBackground() {\r\n    \r\n                //put you background code\r\n                //same like doingBackground\r\n                //Background Thread\r\n            }\r\n    \r\n            @Override\r\n            public void onPostExecute() {\r\n    \r\n                //hear is result part same\r\n                //same like post execute\r\n                //UI Thread(update your UI widget)\r\n            }\r\n        }.execute();\r\n\r\n\r\n","title":"The AsyncTask API is deprecated in Android 11. What are the alternatives?","body":"<p>Use this class to execute background task in Background Thread this class is <strong>work for all android API version include Android 11</strong> also this code is same work like <strong>AsyncTask</strong> with <strong>doInBackground</strong> and <strong>onPostExecute</strong> methods</p>\n<pre><code>public abstract class BackgroundTask {\n\n    private Activity activity;\n    public BackgroundTask(Activity activity) {\n        this.activity = activity;\n    }\n\n    private void startBackground() {\n        new Thread(new Runnable() {\n            public void run() {\n\n                doInBackground();\n                activity.runOnUiThread(new Runnable() {\n                    public void run() {\n\n                        onPostExecute();\n                    }\n                });\n            }\n        }).start();\n    }\n    public void execute(){\n        startBackground();\n    }\n\n    public abstract void doInBackground();\n    public abstract void onPostExecute();\n\n}\n</code></pre>\n<p>After copying the above class, you can then use it with this:</p>\n<pre><code>new BackgroundTask(MainActivity.this) {\n        @Override\n        public void doInBackground() {\n\n            //put you background code\n            //same like doingBackground\n            //Background Thread\n        }\n\n        @Override\n        public void onPostExecute() {\n\n            //hear is result part same\n            //same like post execute\n            //UI Thread(update your UI widget)\n        }\n    }.execute();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6115775,"reputation":30435,"user_id":4770877,"display_name":"yoAlex5"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1610379678,"creation_date":1608291645,"answer_id":65356425,"question_id":58767733,"body_markdown":"You can migrate to next approaches depends your needs\r\n\r\n - Thread + Handler\r\n - Executor\r\n - Future\r\n - IntentService\r\n - JobScheduler\r\n - RxJava\r\n - Coroutines (Kotlin)\r\n\r\n[\\[Android async variants\\]][1]\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/49338894/4770877","title":"The AsyncTask API is deprecated in Android 11. What are the alternatives?","body":"<p>You can migrate to next approaches depends your needs</p>\n<ul>\n<li>Thread + Handler</li>\n<li>Executor</li>\n<li>Future</li>\n<li>IntentService</li>\n<li>JobScheduler</li>\n<li>RxJava</li>\n<li>Coroutines (Kotlin)</li>\n</ul>\n<p><a href=\"https://stackoverflow.com/a/49338894/4770877\">[Android async variants]</a></p>\n"},{"tags":[],"owner":{"account_id":357590,"reputation":6120,"user_id":697856,"accept_rate":40,"display_name":"wf9a5m75"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1620094981,"creation_date":1620094981,"answer_id":67377993,"question_id":58767733,"body_markdown":"This is my code\r\n```java\r\nimport java.util.ArrayList;\r\nimport java.util.HashSet;\r\nimport java.util.List;\r\nimport java.util.Set;\r\nimport java.util.concurrent.Callable;\r\nimport java.util.concurrent.ExecutionException;\r\nimport java.util.concurrent.ExecutorService;\r\nimport java.util.concurrent.Executors;\r\nimport java.util.concurrent.Future;\r\n\r\npublic abstract class AsyncTaskRunner&lt;T&gt; {\r\n\r\n    private ExecutorService executorService = null;\r\n    private Set&lt;Callable&lt;T&gt;&gt; tasks = new HashSet&lt;&gt;();\r\n\r\n    public AsyncTaskRunner() {\r\n        this.executorService = Executors.newSingleThreadExecutor();\r\n    }\r\n    \r\n    public AsyncTaskRunner(int threadNum) {\r\n        this.executorService = Executors.newFixedThreadPool(threadNum);\r\n    }\r\n\r\n\r\n    public void addTask(Callable&lt;T&gt; task) {\r\n        tasks.add(task);\r\n    }\r\n\r\n    public void execute() {\r\n        try {\r\n            List&lt;Future&lt;T&gt;&gt; features = executorService.invokeAll(tasks);\r\n\r\n            List&lt;T&gt; results = new ArrayList&lt;&gt;();\r\n            for (Future&lt;T&gt; feature : features) {\r\n                results.add(feature.get());\r\n            }\r\n            this.onPostExecute(results);\r\n        } catch (InterruptedException | ExecutionException e) {\r\n            e.printStackTrace();\r\n            this.onCancelled();\r\n        } finally {\r\n            executorService.shutdown();\r\n        }\r\n\r\n    }\r\n\r\n    protected abstract void onPostExecute(List&lt;T&gt; results);\r\n\r\n    protected void onCancelled() {\r\n        // stub\r\n    }\r\n\r\n}\r\n```\r\n\r\nAnd usage example.\r\nExtends the `AsyncTaskRunner` class,\r\n\r\n\r\n```java\r\nclass AsyncCalc extends AsyncTaskRunner&lt;Integer&gt; {\r\n\r\n    public void addRequest(final Integer int1, final Integer int2) {\r\n        this.addTask(new Callable&lt;Integer&gt;() {\r\n            @Override\r\n            public Integer call() throws Exception {\r\n                // Do something in background\r\n                return int1 + int2;\r\n            }\r\n        });\r\n    }\r\n\r\n    @Override\r\n    protected void onPostExecute(List&lt;Integer&gt; results) {\r\n        for (Integer answer: results) {\r\n            Log.d(&quot;AsyncCalc&quot;, answer.toString());\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nthen use it!\r\n\r\n```java\r\nAsyncCalc calc = new AsyncCalc();\r\ncalc.addRequest(1, 2);\r\ncalc.addRequest(2, 3);\r\ncalc.addRequest(3, 4);\r\ncalc.execute();\r\n```","title":"The AsyncTask API is deprecated in Android 11. What are the alternatives?","body":"<p>This is my code</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.ArrayList;\nimport java.util.HashSet;\nimport java.util.List;\nimport java.util.Set;\nimport java.util.concurrent.Callable;\nimport java.util.concurrent.ExecutionException;\nimport java.util.concurrent.ExecutorService;\nimport java.util.concurrent.Executors;\nimport java.util.concurrent.Future;\n\npublic abstract class AsyncTaskRunner&lt;T&gt; {\n\n    private ExecutorService executorService = null;\n    private Set&lt;Callable&lt;T&gt;&gt; tasks = new HashSet&lt;&gt;();\n\n    public AsyncTaskRunner() {\n        this.executorService = Executors.newSingleThreadExecutor();\n    }\n    \n    public AsyncTaskRunner(int threadNum) {\n        this.executorService = Executors.newFixedThreadPool(threadNum);\n    }\n\n\n    public void addTask(Callable&lt;T&gt; task) {\n        tasks.add(task);\n    }\n\n    public void execute() {\n        try {\n            List&lt;Future&lt;T&gt;&gt; features = executorService.invokeAll(tasks);\n\n            List&lt;T&gt; results = new ArrayList&lt;&gt;();\n            for (Future&lt;T&gt; feature : features) {\n                results.add(feature.get());\n            }\n            this.onPostExecute(results);\n        } catch (InterruptedException | ExecutionException e) {\n            e.printStackTrace();\n            this.onCancelled();\n        } finally {\n            executorService.shutdown();\n        }\n\n    }\n\n    protected abstract void onPostExecute(List&lt;T&gt; results);\n\n    protected void onCancelled() {\n        // stub\n    }\n\n}\n</code></pre>\n<p>And usage example.\nExtends the <code>AsyncTaskRunner</code> class,</p>\n<pre class=\"lang-java prettyprint-override\"><code>class AsyncCalc extends AsyncTaskRunner&lt;Integer&gt; {\n\n    public void addRequest(final Integer int1, final Integer int2) {\n        this.addTask(new Callable&lt;Integer&gt;() {\n            @Override\n            public Integer call() throws Exception {\n                // Do something in background\n                return int1 + int2;\n            }\n        });\n    }\n\n    @Override\n    protected void onPostExecute(List&lt;Integer&gt; results) {\n        for (Integer answer: results) {\n            Log.d(&quot;AsyncCalc&quot;, answer.toString());\n        }\n    }\n}\n</code></pre>\n<p>then use it!</p>\n<pre class=\"lang-java prettyprint-override\"><code>AsyncCalc calc = new AsyncCalc();\ncalc.addRequest(1, 2);\ncalc.addRequest(2, 3);\ncalc.addRequest(3, 4);\ncalc.execute();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13461714,"reputation":334,"user_id":10501582,"display_name":"Vitaly"},"down_vote_count":2,"up_vote_count":7,"is_accepted":false,"score":5,"last_activity_date":1626358711,"creation_date":1626358216,"answer_id":68395429,"question_id":58767733,"body_markdown":"The accepted answer is good. But...\r\nI didn&#39;t see cancel() method implementation\r\n\r\nSo my implementation with possibility to cancel the running task (simulating cancellation) is below.\r\nCancel is needed to not run postExecute() method in case of task interruption.\r\n\r\n    public abstract class AsyncTaskExecutor&lt;Params&gt; {\r\n        public static final String TAG = &quot;AsyncTaskRunner&quot;;\r\n    \r\n        private static final Executor THREAD_POOL_EXECUTOR =\r\n                new ThreadPoolExecutor(5, 128, 1,\r\n                        TimeUnit.SECONDS, new LinkedBlockingQueue&lt;Runnable&gt;());\r\n    \r\n        private final Handler mHandler = new Handler(Looper.getMainLooper());\r\n        private boolean mIsInterrupted = false;\r\n    \r\n        protected void onPreExecute(){}\r\n        protected abstract Void doInBackground(Params... params);\r\n        protected void onPostExecute(){}\r\n        protected void onCancelled() {}\r\n    \r\n        @SafeVarargs\r\n        public final void executeAsync(Params... params) {\r\n            THREAD_POOL_EXECUTOR.execute(() -&gt; {\r\n                try {\r\n                    checkInterrupted();\r\n                    mHandler.post(this::onPreExecute);\r\n    \r\n                    checkInterrupted();\r\n                    doInBackground(params);\r\n    \r\n                    checkInterrupted();\r\n                    mHandler.post(this::onPostExecute);\r\n                } catch (InterruptedException ex) {\r\n                    mHandler.post(this::onCancelled);\r\n                } catch (Exception ex) {\r\n                    Log.e(TAG, &quot;executeAsync: &quot; + ex.getMessage() + &quot;\\n&quot; + Debug.getStackTrace(ex));\r\n                }\r\n            });\r\n        }\r\n    \r\n        private void checkInterrupted() throws InterruptedException {\r\n            if (isInterrupted()){\r\n                throw new InterruptedException();\r\n            }\r\n        }\r\n    \r\n        public void cancel(boolean mayInterruptIfRunning){\r\n            setInterrupted(mayInterruptIfRunning);\r\n        }\r\n    \r\n        public boolean isInterrupted() {\r\n            return mIsInterrupted;\r\n        }\r\n    \r\n        public void setInterrupted(boolean interrupted) {\r\n            mIsInterrupted = interrupted;\r\n        }\r\n    }\r\n\r\nExample of using this class:\r\n\r\n    public class MySearchTask extends AsyncTaskExecutor&lt;String&gt; {\r\n    \r\n        public MySearchTask(){\r\n        }\r\n    \r\n        @Override\r\n        protected Void doInBackground(String... params) {\r\n            // Your long running task\r\n            return null;\r\n        }\r\n    \r\n        @Override\r\n        protected void onPostExecute() {\r\n            // update UI on task completed\r\n        }\r\n    \r\n        @Override\r\n        protected void onCancelled() {\r\n            // update UI on task cancelled\r\n        }\r\n    }\r\n\r\n    MySearchTask searchTask = new MySearchTask();\r\n    searchTask.executeAsync(&quot;Test&quot;);","title":"The AsyncTask API is deprecated in Android 11. What are the alternatives?","body":"<p>The accepted answer is good. But...\nI didn't see cancel() method implementation</p>\n<p>So my implementation with possibility to cancel the running task (simulating cancellation) is below.\nCancel is needed to not run postExecute() method in case of task interruption.</p>\n<pre><code>public abstract class AsyncTaskExecutor&lt;Params&gt; {\n    public static final String TAG = &quot;AsyncTaskRunner&quot;;\n\n    private static final Executor THREAD_POOL_EXECUTOR =\n            new ThreadPoolExecutor(5, 128, 1,\n                    TimeUnit.SECONDS, new LinkedBlockingQueue&lt;Runnable&gt;());\n\n    private final Handler mHandler = new Handler(Looper.getMainLooper());\n    private boolean mIsInterrupted = false;\n\n    protected void onPreExecute(){}\n    protected abstract Void doInBackground(Params... params);\n    protected void onPostExecute(){}\n    protected void onCancelled() {}\n\n    @SafeVarargs\n    public final void executeAsync(Params... params) {\n        THREAD_POOL_EXECUTOR.execute(() -&gt; {\n            try {\n                checkInterrupted();\n                mHandler.post(this::onPreExecute);\n\n                checkInterrupted();\n                doInBackground(params);\n\n                checkInterrupted();\n                mHandler.post(this::onPostExecute);\n            } catch (InterruptedException ex) {\n                mHandler.post(this::onCancelled);\n            } catch (Exception ex) {\n                Log.e(TAG, &quot;executeAsync: &quot; + ex.getMessage() + &quot;\\n&quot; + Debug.getStackTrace(ex));\n            }\n        });\n    }\n\n    private void checkInterrupted() throws InterruptedException {\n        if (isInterrupted()){\n            throw new InterruptedException();\n        }\n    }\n\n    public void cancel(boolean mayInterruptIfRunning){\n        setInterrupted(mayInterruptIfRunning);\n    }\n\n    public boolean isInterrupted() {\n        return mIsInterrupted;\n    }\n\n    public void setInterrupted(boolean interrupted) {\n        mIsInterrupted = interrupted;\n    }\n}\n</code></pre>\n<p>Example of using this class:</p>\n<pre><code>public class MySearchTask extends AsyncTaskExecutor&lt;String&gt; {\n\n    public MySearchTask(){\n    }\n\n    @Override\n    protected Void doInBackground(String... params) {\n        // Your long running task\n        return null;\n    }\n\n    @Override\n    protected void onPostExecute() {\n        // update UI on task completed\n    }\n\n    @Override\n    protected void onCancelled() {\n        // update UI on task cancelled\n    }\n}\n\nMySearchTask searchTask = new MySearchTask();\nsearchTask.executeAsync(&quot;Test&quot;);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2773463,"reputation":3896,"user_id":2387564,"accept_rate":74,"display_name":"Attaullah"},"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1629451715,"creation_date":1629451715,"answer_id":68859991,"question_id":58767733,"body_markdown":"Here I also created an Alternative for AsyncTask using abstract class and it can be just copied as a class.\r\n\r\n**/app/src/main/java/../AsyncTasks.java**\r\n\r\n    public abstract class AsyncTasks {\r\n        private final ExecutorService executors;\r\n    \r\n        public AsyncTasks() {\r\n            this.executors = Executors.newSingleThreadExecutor();\r\n        }\r\n    \r\n        private void startBackground() {\r\n            onPreExecute();\r\n            executors.execute(new Runnable() {\r\n                @Override\r\n                public void run() {\r\n                    doInBackground();\r\n                    new Handler(Looper.getMainLooper()).post(new Runnable() {\r\n                        @Override\r\n                        public void run() {\r\n                            onPostExecute();\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n        }\r\n    \r\n        public void execute() {\r\n            startBackground();\r\n        }\r\n    \r\n        public void shutdown() {\r\n            executors.shutdown();\r\n        }\r\n    \r\n        public boolean isShutdown() {\r\n            return executors.isShutdown();\r\n        }\r\n    \r\n        public abstract void onPreExecute();\r\n    \r\n        public abstract void doInBackground();\r\n    \r\n        public abstract void onPostExecute();\r\n    }\r\n\r\nImplementation/ use of the above class\r\n\r\n    new AsyncTasks() {\r\n         @Override\r\n                public void onPreExecute() { \r\n                 // before execution\r\n          }\r\n    \r\n         @Override\r\n                public void doInBackground() {\r\n                  // background task here \r\n                }\r\n    \r\n         @Override\r\n                public void onPostExecute() { \r\n                 // Ui task here\r\n                }\r\n         }.execute();\r\n","title":"The AsyncTask API is deprecated in Android 11. What are the alternatives?","body":"<p>Here I also created an Alternative for AsyncTask using abstract class and it can be just copied as a class.</p>\n<p><strong>/app/src/main/java/../AsyncTasks.java</strong></p>\n<pre><code>public abstract class AsyncTasks {\n    private final ExecutorService executors;\n\n    public AsyncTasks() {\n        this.executors = Executors.newSingleThreadExecutor();\n    }\n\n    private void startBackground() {\n        onPreExecute();\n        executors.execute(new Runnable() {\n            @Override\n            public void run() {\n                doInBackground();\n                new Handler(Looper.getMainLooper()).post(new Runnable() {\n                    @Override\n                    public void run() {\n                        onPostExecute();\n                    }\n                });\n            }\n        });\n    }\n\n    public void execute() {\n        startBackground();\n    }\n\n    public void shutdown() {\n        executors.shutdown();\n    }\n\n    public boolean isShutdown() {\n        return executors.isShutdown();\n    }\n\n    public abstract void onPreExecute();\n\n    public abstract void doInBackground();\n\n    public abstract void onPostExecute();\n}\n</code></pre>\n<p>Implementation/ use of the above class</p>\n<pre><code>new AsyncTasks() {\n     @Override\n            public void onPreExecute() { \n             // before execution\n      }\n\n     @Override\n            public void doInBackground() {\n              // background task here \n            }\n\n     @Override\n            public void onPostExecute() { \n             // Ui task here\n            }\n     }.execute();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4458093,"reputation":8404,"user_id":3627736,"accept_rate":79,"display_name":"Yuliia Ashomok"},"down_vote_count":3,"up_vote_count":0,"is_accepted":false,"score":-3,"last_activity_date":1661415372,"creation_date":1661415372,"answer_id":73484115,"question_id":58767733,"body_markdown":"[Docs says:][1] \r\n\r\n&gt; **AsyncTask** This class was deprecated in API level 30. Use the standard\r\n&gt; java.util.concurrent or Kotlin concurrency utilities instead.\r\n\r\nYou need to use `Handler` or coroutines instead `AsyncTask`.\r\n\r\n## Use Handler for Java\r\n\r\n    new Handler(Looper.getMainLooper()).postDelayed(new Runnable() {\r\n        @Override\r\n        public void run() {\r\n            // Your Code\r\n        }\r\n    }, 3000);\r\n\r\n## Use Handler for Kotlin\r\n\r\n    Handler(Looper.getMainLooper()).postDelayed({\r\n        // Your Code\r\n    }, 3000)\r\n\r\n\r\n  [1]: https://developer.android.com/reference/android/os/AsyncTask","title":"The AsyncTask API is deprecated in Android 11. What are the alternatives?","body":"<p><a href=\"https://developer.android.com/reference/android/os/AsyncTask\" rel=\"nofollow noreferrer\">Docs says:</a></p>\n<blockquote>\n<p><strong>AsyncTask</strong> This class was deprecated in API level 30. Use the standard\njava.util.concurrent or Kotlin concurrency utilities instead.</p>\n</blockquote>\n<p>You need to use <code>Handler</code> or coroutines instead <code>AsyncTask</code>.</p>\n<h2>Use Handler for Java</h2>\n<pre><code>new Handler(Looper.getMainLooper()).postDelayed(new Runnable() {\n    @Override\n    public void run() {\n        // Your Code\n    }\n}, 3000);\n</code></pre>\n<h2>Use Handler for Kotlin</h2>\n<pre><code>Handler(Looper.getMainLooper()).postDelayed({\n    // Your Code\n}, 3000)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14636108,"reputation":1436,"user_id":10570201,"display_name":"nhcodes"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1680743091,"creation_date":1662752206,"answer_id":73666782,"question_id":58767733,"body_markdown":"You can use [Executors][1] and [CompletableFutures][2]:\r\n\r\nThis is the helper class:\r\n\r\n    public class Async {\r\n    \r\n        private static final ExecutorService THREAD_POOL = Executors.newCachedThreadPool();\r\n    \r\n        private static final HandlerExecutor THREAD_MAIN = new HandlerExecutor(Looper.getMainLooper());\r\n    \r\n        public static &lt;T&gt; void execute(Supplier&lt;T&gt; async, Consumer&lt;T&gt; sync) {\r\n            CompletableFuture.supplyAsync(async, THREAD_POOL).thenAcceptAsync(sync, THREAD_MAIN);\r\n        }\r\n    \r\n        public static void execute(Runnable async) {\r\n            CompletableFuture.runAsync(async);\r\n        }\r\n    \r\n    }\r\n\r\nAnd here&#39;s an example on how to use it:\r\n\r\n    public static void main(String[] args) {\r\n        String url = &quot;https://example.com/&quot;;\r\n\r\n        Async.execute(() -&gt; {\r\n            //do something async without result\r\n        });\r\n\r\n        Async.execute(\r\n                () -&gt; {\r\n                    //do something async and return result\r\n                    try {\r\n                        HttpURLConnection connection = (HttpURLConnection) new URL(url).openConnection();\r\n                        return connection.getResponseCode();\r\n                    } catch (Exception e) {\r\n                        return null;\r\n                    }\r\n                },\r\n                (responseCode) -&gt; {\r\n                    //do something with result on main thread\r\n                    Log.e(&quot;Async&quot;, &quot;responseCode=&quot; + responseCode);\r\n                }\r\n        );\r\n    }\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/Executors.html\r\n  [2]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/CompletableFuture.html","title":"The AsyncTask API is deprecated in Android 11. What are the alternatives?","body":"<p>You can use <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/Executors.html\" rel=\"nofollow noreferrer\">Executors</a> and <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/CompletableFuture.html\" rel=\"nofollow noreferrer\">CompletableFutures</a>:</p>\n<p>This is the helper class:</p>\n<pre><code>public class Async {\n\n    private static final ExecutorService THREAD_POOL = Executors.newCachedThreadPool();\n\n    private static final HandlerExecutor THREAD_MAIN = new HandlerExecutor(Looper.getMainLooper());\n\n    public static &lt;T&gt; void execute(Supplier&lt;T&gt; async, Consumer&lt;T&gt; sync) {\n        CompletableFuture.supplyAsync(async, THREAD_POOL).thenAcceptAsync(sync, THREAD_MAIN);\n    }\n\n    public static void execute(Runnable async) {\n        CompletableFuture.runAsync(async);\n    }\n\n}\n</code></pre>\n<p>And here's an example on how to use it:</p>\n<pre><code>public static void main(String[] args) {\n    String url = &quot;https://example.com/&quot;;\n\n    Async.execute(() -&gt; {\n        //do something async without result\n    });\n\n    Async.execute(\n            () -&gt; {\n                //do something async and return result\n                try {\n                    HttpURLConnection connection = (HttpURLConnection) new URL(url).openConnection();\n                    return connection.getResponseCode();\n                } catch (Exception e) {\n                    return null;\n                }\n            },\n            (responseCode) -&gt; {\n                //do something with result on main thread\n                Log.e(&quot;Async&quot;, &quot;responseCode=&quot; + responseCode);\n            }\n    );\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11944756,"reputation":7873,"user_id":8740349,"display_name":"Top-Master"},"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1679594341,"creation_date":1675626713,"answer_id":75355078,"question_id":58767733,"body_markdown":"`AsyncTask` class does not seem to be removed any time soon, but we did simply un-deprecate it anyway, because:\r\n\r\n* We didn&#39;t want to add lots of suppress annotations.\r\n* The alternative solutions have too much boiler-plate, or in most cases, without any real advantage vs `AsyncTask`.\r\n* We didn&#39;t want to re-invent the wheel.\r\n* We didn&#39;t want to fear the day it will finally be removed.\r\n* Refactoring takes too much time.\r\n\r\n## Example\r\nSimply add below file to your project, then search for &quot;`android.os.AsyncTask`&quot; imports, and replase all to the packge you did choose for said file.\r\n\r\nAs you may already know, this is no big deal, and is basically what the well known `AndroidX` library does all the time.\r\n\r\n**Get `AsyncTask.java` file at:** https://gist.github.com/top-master/0efddec3e2c35d77e30331e8c3bc725c\r\n","title":"The AsyncTask API is deprecated in Android 11. What are the alternatives?","body":"<p><code>AsyncTask</code> class does not seem to be removed any time soon, but we did simply un-deprecate it anyway, because:</p>\n<ul>\n<li>We didn't want to add lots of suppress annotations.</li>\n<li>The alternative solutions have too much boiler-plate, or in most cases, without any real advantage vs <code>AsyncTask</code>.</li>\n<li>We didn't want to re-invent the wheel.</li>\n<li>We didn't want to fear the day it will finally be removed.</li>\n<li>Refactoring takes too much time.</li>\n</ul>\n<h2>Example</h2>\n<p>Simply add below file to your project, then search for &quot;<code>android.os.AsyncTask</code>&quot; imports, and replase all to the packge you did choose for said file.</p>\n<p>As you may already know, this is no big deal, and is basically what the well known <code>AndroidX</code> library does all the time.</p>\n<p><strong>Get <code>AsyncTask.java</code> file at:</strong> <a href=\"https://gist.github.com/top-master/0efddec3e2c35d77e30331e8c3bc725c\" rel=\"nofollow noreferrer\">https://gist.github.com/top-master/0efddec3e2c35d77e30331e8c3bc725c</a></p>\n"},{"tags":[],"owner":{"account_id":11740512,"reputation":67,"user_id":8593001,"display_name":"Murat Gungor"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696710241,"creation_date":1696710241,"answer_id":77251399,"question_id":58767733,"body_markdown":"WorkManager is the way to go\r\n\r\n    OneTimeWorkRequest mywork = new OneTimeWorkRequest.Builder(FlipMediaPeriodicWorker.class)\r\n                    .setInitialDelay(activity.currentMedia.timing, TimeUnit.SECONDS)\r\n                    .build(); \r\n    WorkManager.getInstance(activity).enqueue(mywork);\r\n\r\nYou can make it recursive to repeat tasks for less than 15 minutes. \r\n\r\n\r\n\r\n\r\n\r\n","title":"The AsyncTask API is deprecated in Android 11. What are the alternatives?","body":"<p>WorkManager is the way to go</p>\n<pre><code>OneTimeWorkRequest mywork = new OneTimeWorkRequest.Builder(FlipMediaPeriodicWorker.class)\n                .setInitialDelay(activity.currentMedia.timing, TimeUnit.SECONDS)\n                .build(); \nWorkManager.getInstance(activity).enqueue(mywork);\n</code></pre>\n<p>You can make it recursive to repeat tasks for less than 15 minutes.</p>\n"}],"owner":{"account_id":2315704,"reputation":11983,"user_id":2032823,"accept_rate":84,"display_name":"Zeeshan"},"comment_count":13,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":202763,"favorite_count":0,"down_vote_count":0,"up_vote_count":232,"accepted_answer_id":58767934,"answer_count":19,"score":232,"last_activity_date":1696710241,"creation_date":1573220582,"question_id":58767733,"body_markdown":"Google is deprecating Android AsyncTask API in Android 11 and suggesting to use `java.util.concurrent` instead. you can check out the commit [here](https://android-review.googlesource.com/c/platform/frameworks/base/+/1156409)\r\n\r\n     *\r\n     * @deprecated Use the standard &lt;code&gt;java.util.concurrent&lt;/code&gt; or\r\n     *   &lt;a href=&quot;https://developer.android.com/topic/libraries/architecture/coroutines&quot;&gt;\r\n     *   Kotlin concurrency utilities&lt;/a&gt; instead.\r\n     */\r\n    @Deprecated\r\n    public abstract class AsyncTask&lt;Params, Progress, Result&gt; {\r\n\r\n\r\nIf you’re maintaining an older codebase with asynchronous tasks in Android, you’re likely going to have to change it in future. My question is that what should be proper replacement of the code snippet shown below using `java.util.concurrent`. It is a static inner class of an Activity. I am looking for something that will work with `minSdkVersion 16`\r\n\r\n    private static class LongRunningTask extends AsyncTask&lt;String, Void, MyPojo&gt; {\r\n            private static final String TAG = MyActivity.LongRunningTask.class.getSimpleName();\r\n            private WeakReference&lt;MyActivity&gt; activityReference;\r\n    \r\n            LongRunningTask(MyActivity context) {\r\n                activityReference = new WeakReference&lt;&gt;(context);\r\n            }\r\n    \r\n            @Override\r\n            protected MyPojo doInBackground(String... params) {\r\n    \t\t\t// Some long running task\r\n                \r\n            }\r\n    \r\n            @Override\r\n            protected void onPostExecute(MyPojo data) {\r\n    \r\n                MyActivity activity = activityReference.get();\r\n    \t\t\tactivity.progressBar.setVisibility(View.GONE);\r\n    \t\t\tpopulateData(activity, data) ;\r\n            }     \r\n    \r\n    \r\n        }\r\n\r\n\r\n\r\n","title":"The AsyncTask API is deprecated in Android 11. What are the alternatives?","body":"<p>Google is deprecating Android AsyncTask API in Android 11 and suggesting to use <code>java.util.concurrent</code> instead. you can check out the commit <a href=\"https://android-review.googlesource.com/c/platform/frameworks/base/+/1156409\" rel=\"noreferrer\">here</a></p>\n<pre><code> *\n * @deprecated Use the standard &lt;code&gt;java.util.concurrent&lt;/code&gt; or\n *   &lt;a href=&quot;https://developer.android.com/topic/libraries/architecture/coroutines&quot;&gt;\n *   Kotlin concurrency utilities&lt;/a&gt; instead.\n */\n@Deprecated\npublic abstract class AsyncTask&lt;Params, Progress, Result&gt; {\n</code></pre>\n<p>If you’re maintaining an older codebase with asynchronous tasks in Android, you’re likely going to have to change it in future. My question is that what should be proper replacement of the code snippet shown below using <code>java.util.concurrent</code>. It is a static inner class of an Activity. I am looking for something that will work with <code>minSdkVersion 16</code></p>\n<pre><code>private static class LongRunningTask extends AsyncTask&lt;String, Void, MyPojo&gt; {\n        private static final String TAG = MyActivity.LongRunningTask.class.getSimpleName();\n        private WeakReference&lt;MyActivity&gt; activityReference;\n\n        LongRunningTask(MyActivity context) {\n            activityReference = new WeakReference&lt;&gt;(context);\n        }\n\n        @Override\n        protected MyPojo doInBackground(String... params) {\n            // Some long running task\n            \n        }\n\n        @Override\n        protected void onPostExecute(MyPojo data) {\n\n            MyActivity activity = activityReference.get();\n            activity.progressBar.setVisibility(View.GONE);\n            populateData(activity, data) ;\n        }     \n\n\n    }\n</code></pre>\n"},{"tags":["java","groovy","pdfbox"],"comments":[{"owner":{"account_id":1333316,"reputation":26958,"user_id":1276664,"accept_rate":17,"display_name":"daggett"},"score":0,"creation_date":1696537401,"post_id":77239929,"comment_id":136169766,"body_markdown":"according to source code warning just informs you that close() not called and then calls close() anyway https://github.com/BrentDouglas/pdfbox/blob/master/pdfbox/src/main/java/org/apache/pdfbox/cos/COSDocument.java#L588","body":"according to source code warning just informs you that close() not called and then calls close() anyway <a href=\"https://github.com/BrentDouglas/pdfbox/blob/master/pdfbox/src/main/java/org/apache/pdfbox/cos/COSDocument.java#L588\" rel=\"nofollow noreferrer\">github.com/BrentDouglas/pdfbox/blob/master/pdfbox/src/main/j&zwnj;&#8203;ava/&hellip;</a>"},{"owner":{"account_id":51881,"reputation":38016,"user_id":155020,"accept_rate":80,"display_name":"chubbsondubs"},"score":0,"creation_date":1696559329,"post_id":77239929,"comment_id":136171857,"body_markdown":"@daggett it does, but I&#39;m clearly calling close for every PDDocument within scope so eventhough it warns and cleans itself up.  It shouldn&#39;t ever print that unless close wasn&#39;t called, and I can&#39;t find an instance that wouldn&#39;t have close called on it.  So where are all of these COSDocuments that aren&#39;t being closed?","body":"@daggett it does, but I&#39;m clearly calling close for every PDDocument within scope so eventhough it warns and cleans itself up.  It shouldn&#39;t ever print that unless close wasn&#39;t called, and I can&#39;t find an instance that wouldn&#39;t have close called on it.  So where are all of these COSDocuments that aren&#39;t being closed?"},{"owner":{"account_id":255529,"reputation":17950,"user_id":535646,"accept_rate":40,"display_name":"Tilman Hausherr"},"score":0,"creation_date":1696737117,"post_id":77239929,"comment_id":136190680,"body_markdown":"Unrelated but important: you should close the result documents only after all documents are saved, due to the sometimes (depends of source PDF) sharing of resources (e.g. fonts).","body":"Unrelated but important: you should close the result documents only after all documents are saved, due to the sometimes (depends of source PDF) sharing of resources (e.g. fonts)."},{"owner":{"account_id":51881,"reputation":38016,"user_id":155020,"accept_rate":80,"display_name":"chubbsondubs"},"score":0,"creation_date":1696898470,"post_id":77239929,"comment_id":136208936,"body_markdown":"@TilmanHausherr Thanks for the feedback.  Wouldn&#39;t it be nice if Splitter had a close method on it to do just that?  That way it&#39;s easy to clean up the entire thing correctly upon completion.  No real need to understand intricacies of PDDocument relationships between the top level file and the pages&#39; PDDocuments leading to better encapsulation and less special knowledge needed to operate it.","body":"@TilmanHausherr Thanks for the feedback.  Wouldn&#39;t it be nice if Splitter had a close method on it to do just that?  That way it&#39;s easy to clean up the entire thing correctly upon completion.  No real need to understand intricacies of PDDocument relationships between the top level file and the pages&#39; PDDocuments leading to better encapsulation and less special knowledge needed to operate it."}],"answers":[{"tags":[],"owner":{"account_id":51881,"reputation":38016,"user_id":155020,"accept_rate":80,"display_name":"chubbsondubs"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1696710101,"creation_date":1696710101,"answer_id":77251393,"question_id":77239929,"body_markdown":"Ok I think I found the answer.  The warning only shows up after the OutOfMemoryError is thrown.  Since the Splitter pre-allocates the PDDocument for each page and saves those to a List you need to have enough memory to store the full file along with all the pages in memory.  I had a document with 2009 pages within it, and that would trigger the OOME in the middle, and at that point all of the existing pages would be placed on the finalize queue.  And it was the instances that were allocated by Splitter where I hadn&#39;t yet visited those that would print that error message.  The fix that I described already was to lower the cached memory in `MemorySettings` so that all of the pages could be processed.  As Dagget pointed out all of those pages will be eventually free, but the warning message makes it seem like the OOME was due to NOT calling close which isn&#39;t true.  You just don&#39;t have enough memory.  &#175;\\_(ツ)_/&#175;","title":"Problems with OutOfMemoryError with pdfbox after using the Splitter on several PDF files","body":"<p>Ok I think I found the answer.  The warning only shows up after the OutOfMemoryError is thrown.  Since the Splitter pre-allocates the PDDocument for each page and saves those to a List you need to have enough memory to store the full file along with all the pages in memory.  I had a document with 2009 pages within it, and that would trigger the OOME in the middle, and at that point all of the existing pages would be placed on the finalize queue.  And it was the instances that were allocated by Splitter where I hadn't yet visited those that would print that error message.  The fix that I described already was to lower the cached memory in <code>MemorySettings</code> so that all of the pages could be processed.  As Dagget pointed out all of those pages will be eventually free, but the warning message makes it seem like the OOME was due to NOT calling close which isn't true.  You just don't have enough memory.  ¯_(ツ)_/¯</p>\n"}],"owner":{"account_id":51881,"reputation":38016,"user_id":155020,"accept_rate":80,"display_name":"chubbsondubs"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":80,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77251393,"answer_count":1,"score":0,"last_activity_date":1696710101,"creation_date":1696532840,"question_id":77239929,"body_markdown":"I have a batch of PDF files I have to split into multiple PDFs for each page.  I&#39;ve written a script that processes the PDFs, and works for individual files or a couple of files.  But when processing multiple PDFs (total 6000 pages) it eventually runs out of memory, and prints &quot;Warning: You did not close a PDF Document&quot;.  I&#39;ve gotten it to work by lowering the memory settings with `MemoryUsageSetting.setupMixed(50_000_000)`, but if I set it to 200mb it always runs out.  I&#39;m convinced there is an internal `COSDocument` that is opened by pdfbox that I can&#39;t close, and that&#39;s why I&#39;m seeing the warning.  I know I&#39;m closing all of the `PDDocument` that I create. In fact I wrote some code to check each instance I have access to and none of those log statements show up.  Here is my code:\r\n\r\n```\r\n    int splitPdf( File pdfFile ) {\r\n        String filePrefix = prefix\r\n        if( !filePrefix ) filePrefix = pdfFile.name[0..&lt;(pdfFile.name.lastIndexOf(&quot;.&quot;))]\r\n        logger.info(&quot;Splitting ${pdfFile.name} pages ${startAtPage} - ${endAtPage} every ${splitPagesEvery} pages&quot;)\r\n        PDDocument document = PDDocument.load( pdfFile, MemoryUsageSetting.setupTempFileOnly() )\r\n        try {\r\n            Splitter splitter = new Splitter()\r\n            splitter.setStartPage(startAtPage)\r\n            splitter.setEndPage(endAtPage)\r\n            splitter.setSplitAtPage(splitPagesEvery)\r\n            splitter.memoryUsageSetting = MemoryUsageSetting.setupMixed(50_000_000)\r\n            int page = startAtPage &gt; 0 ? startAtPage : 1\r\n            splitter.split(document).each { PDDocument doc -&gt;\r\n                String filename = &quot;${filePrefix}-${page}.pdf&quot;\r\n                try {\r\n                    if( extractions ) {\r\n                        PDFTextStripper stripper = new PDFTextStripper()\r\n                        String pageText = stripper.getText( doc )\r\n                        Map&lt;String,String&gt; results = extractions.collectEntries([filename: filename]) { name, spec -&gt;\r\n                            [ name, spec.call(pageText) ]\r\n                        }\r\n                        this.manifest.write(results)\r\n                    }\r\n                    doc.save( new File( destDir, filename) )\r\n                    page++\r\n                } finally {\r\n                    doc.close()\r\n                    if( !doc.document.isClosed() ) logger.info(&quot;${filename} is NOT closed!&quot;)\r\n                }\r\n            }\r\n            return page - startAtPage\r\n        } finally {\r\n            document.close()\r\n            if( !document.document.isClosed() ) logger.info(&quot;${pdfFile.name} is NOT closed!&quot;)\r\n        }\r\n    }\r\n```\r\n\r\nI don&#39;t have proof of a memory leak in pdfbox 2.0.29, but I can&#39;t explain this any other way as to why I see loads of warnings about not closing a PDF Document.  I&#39;m working on creating another script I can run in a profiler to see if the number of COSDOcuments are way higher than the ones I know should be there.\r\n\r\nMy question is there any way an extra COSDocument could be created inside pdfbox that isn&#39;t being freed up while performing page splitting?","title":"Problems with OutOfMemoryError with pdfbox after using the Splitter on several PDF files","body":"<p>I have a batch of PDF files I have to split into multiple PDFs for each page.  I've written a script that processes the PDFs, and works for individual files or a couple of files.  But when processing multiple PDFs (total 6000 pages) it eventually runs out of memory, and prints &quot;Warning: You did not close a PDF Document&quot;.  I've gotten it to work by lowering the memory settings with <code>MemoryUsageSetting.setupMixed(50_000_000)</code>, but if I set it to 200mb it always runs out.  I'm convinced there is an internal <code>COSDocument</code> that is opened by pdfbox that I can't close, and that's why I'm seeing the warning.  I know I'm closing all of the <code>PDDocument</code> that I create. In fact I wrote some code to check each instance I have access to and none of those log statements show up.  Here is my code:</p>\n<pre><code>    int splitPdf( File pdfFile ) {\n        String filePrefix = prefix\n        if( !filePrefix ) filePrefix = pdfFile.name[0..&lt;(pdfFile.name.lastIndexOf(&quot;.&quot;))]\n        logger.info(&quot;Splitting ${pdfFile.name} pages ${startAtPage} - ${endAtPage} every ${splitPagesEvery} pages&quot;)\n        PDDocument document = PDDocument.load( pdfFile, MemoryUsageSetting.setupTempFileOnly() )\n        try {\n            Splitter splitter = new Splitter()\n            splitter.setStartPage(startAtPage)\n            splitter.setEndPage(endAtPage)\n            splitter.setSplitAtPage(splitPagesEvery)\n            splitter.memoryUsageSetting = MemoryUsageSetting.setupMixed(50_000_000)\n            int page = startAtPage &gt; 0 ? startAtPage : 1\n            splitter.split(document).each { PDDocument doc -&gt;\n                String filename = &quot;${filePrefix}-${page}.pdf&quot;\n                try {\n                    if( extractions ) {\n                        PDFTextStripper stripper = new PDFTextStripper()\n                        String pageText = stripper.getText( doc )\n                        Map&lt;String,String&gt; results = extractions.collectEntries([filename: filename]) { name, spec -&gt;\n                            [ name, spec.call(pageText) ]\n                        }\n                        this.manifest.write(results)\n                    }\n                    doc.save( new File( destDir, filename) )\n                    page++\n                } finally {\n                    doc.close()\n                    if( !doc.document.isClosed() ) logger.info(&quot;${filename} is NOT closed!&quot;)\n                }\n            }\n            return page - startAtPage\n        } finally {\n            document.close()\n            if( !document.document.isClosed() ) logger.info(&quot;${pdfFile.name} is NOT closed!&quot;)\n        }\n    }\n</code></pre>\n<p>I don't have proof of a memory leak in pdfbox 2.0.29, but I can't explain this any other way as to why I see loads of warnings about not closing a PDF Document.  I'm working on creating another script I can run in a profiler to see if the number of COSDOcuments are way higher than the ones I know should be there.</p>\n<p>My question is there any way an extra COSDocument could be created inside pdfbox that isn't being freed up while performing page splitting?</p>\n"},{"tags":["java","mysql","spring","spring-boot"],"comments":[{"owner":{"account_id":1225662,"reputation":12141,"user_id":1191247,"accept_rate":75,"display_name":"user1191247"},"score":1,"creation_date":1696707201,"post_id":77250647,"comment_id":136188796,"body_markdown":"Have you tried `spring.datasource.url=jdbc:mysql://localhost:3306/books?createDatabaseIfNotExist=true`?","body":"Have you tried <code>spring.datasource.url=jdbc:mysql:&#47;&#47;localhost:3306&#47;books?crea&zwnj;&#8203;teDatabaseIfNotExist&zwnj;&#8203;=true</code>?"},{"owner":{"account_id":4176295,"reputation":1249,"user_id":3422726,"accept_rate":55,"display_name":"JPG"},"score":0,"creation_date":1696708078,"post_id":77250647,"comment_id":136188871,"body_markdown":"No I haven&#39;t. Now trying...","body":"No I haven&#39;t. Now trying..."},{"owner":{"account_id":4176295,"reputation":1249,"user_id":3422726,"accept_rate":55,"display_name":"JPG"},"score":0,"creation_date":1696709320,"post_id":77250647,"comment_id":136188971,"body_markdown":"YES! it DID worked finally! thanks a lot. I am wondering why is that magical flag needed, when there are already two properties set for the same reason `spring.jpa.generate-ddl=true` and `spring.jpa.hibernate.ddl-auto=update`.","body":"YES! it DID worked finally! thanks a lot. I am wondering why is that magical flag needed, when there are already two properties set for the same reason <code>spring.jpa.generate-ddl=true</code> and <code>spring.jpa.hibernate.ddl-auto=update</code>."},{"owner":{"account_id":1225662,"reputation":12141,"user_id":1191247,"accept_rate":75,"display_name":"user1191247"},"score":1,"creation_date":1696710546,"post_id":77250647,"comment_id":136189085,"body_markdown":"I think, the other two properties relate to the database content, not the database itself. Glad it worked.","body":"I think, the other two properties relate to the database content, not the database itself. Glad it worked."},{"owner":{"account_id":15413608,"reputation":99,"user_id":11529048,"display_name":"Akhil"},"score":1,"creation_date":1696777433,"post_id":77250647,"comment_id":136193877,"body_markdown":"If your database is not created OR if your application can&#39;t connect to the DB. The ddl-flags provided will be ignored.","body":"If your database is not created OR if your application can&#39;t connect to the DB. The ddl-flags provided will be ignored."},{"owner":{"account_id":4176295,"reputation":1249,"user_id":3422726,"accept_rate":55,"display_name":"JPG"},"score":0,"creation_date":1696850183,"post_id":77250647,"comment_id":136201343,"body_markdown":"Ok. @Akhil noted. Thanks.","body":"Ok. @Akhil noted. Thanks."}],"answers":[{"tags":[],"owner":{"account_id":4176295,"reputation":1249,"user_id":3422726,"accept_rate":55,"display_name":"JPG"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696709601,"creation_date":1696709601,"answer_id":77251371,"question_id":77250647,"body_markdown":"As told by @user1191247 I included `?createDatabaseIfNotExist=true` with my \r\n\r\nconnection string and it worked. I did try many things. Change the driver \r\n\r\nclass `pom` `mysql` dependency, various versions.. nothing worked but at last on \r\n\r\n@user1191247 advice I put the above flag, and it just clicked! Thank You so much.","title":"unable to generate mysql schema using spring.jpa.hibernate.ddl-auto","body":"<p>As told by @user1191247 I included <code>?createDatabaseIfNotExist=true</code> with my</p>\n<p>connection string and it worked. I did try many things. Change the driver</p>\n<p>class <code>pom</code> <code>mysql</code> dependency, various versions.. nothing worked but at last on</p>\n<p>@user1191247 advice I put the above flag, and it just clicked! Thank You so much.</p>\n"}],"owner":{"account_id":4176295,"reputation":1249,"user_id":3422726,"accept_rate":55,"display_name":"JPG"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1696709601,"creation_date":1696696273,"question_id":77250647,"body_markdown":"I am trying generate `mysql` schema via my `springboot` application using property `spring.jpa.hibernate.ddl-auto=create` But getting error stating `Caused by: java.sql.SQLSyntaxErrorException: Unknown database &#39;books&#39;`\r\n\r\napplication.properties file:\r\n\r\n    # SERVER\r\n    server.port = 5555\r\n    spring.datasource.url=jdbc:mysql://localhost:3306/books\r\n    spring.datasource.username=root\r\n    spring.datasource.password=root\r\n    \r\n    spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect\r\n    #spring.jpa.database-platform=org.hibernate.dialect.MySQLDialect\r\n    spring.jpa.generate-ddl=true\r\n    spring.jpa.hibernate.ddl-auto=create\r\n    spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver\r\n    spring.jpa.show-sql=true\r\n    spring.jpa.hibernate.naming.implicit-strategy = org.hibernate.boot.model.naming.ImplicitNamingStrategyLegacyJpaImpl\r\n    spring.jpa.hibernate.naming.physical-strategy = org.hibernate.boot.model.naming.PhysicalNamingStrategyStandardImpl\r\n    \r\n    #spring.security.user.name=user\r\n    #spring.security.user.password=123\r\n    application.security.jwt.secret-key=404E635266556A597H3272357538782F413F4497H72B4B6250645367566B5970\r\n    application.security.jwt.expiration=7200000\r\n    application.security.jwt.refresh-token.expiration=604800000\r\n    \r\n    \r\n    spring.data.mongodb.host=localhost\r\n    spring.data.mongodb.port=27017\r\n    spring.data.mongodb.database=Books\r\n\r\nMain class\r\n\r\n    package com.books;\r\n    \r\n    \r\n    import org.springframework.boot.SpringApplication;\r\n    import org.springframework.boot.autoconfigure.SpringBootApplication;\r\n    import org.springframework.boot.autoconfigure.domain.EntityScan;\r\n    import org.springframework.boot.context.properties.EnableConfigurationProperties;\r\n    \r\n    \r\n    @SpringBootApplication\r\n    @EnableConfigurationProperties\r\n    @EntityScan(basePackages = {&quot;com.books.token&quot;,&quot;com.books.user&quot;})\r\n    public class SecurityApplication {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tSpringApplication.run(SecurityApplication.class, args);\r\n    \t}\t\r\n    }\r\n\r\n\r\nentity class user\r\n\r\n    package com.books.user;\r\n    \r\n    import com.fasterxml.jackson.annotation.JsonFormat;\r\n    import com.books.token.Token;\r\n    \r\n    import jakarta.persistence.Column;\r\n    import jakarta.persistence.Entity;\r\n    import jakarta.persistence.EnumType;\r\n    import jakarta.persistence.Enumerated;\r\n    import jakarta.persistence.GeneratedValue;\r\n    import jakarta.persistence.GenerationType;\r\n    import jakarta.persistence.Id;\r\n    import jakarta.persistence.OneToMany;\r\n    import jakarta.persistence.Table;\r\n    import jakarta.persistence.Temporal;\r\n    import jakarta.persistence.TemporalType;\r\n    \r\n    import java.util.Collection;\r\n    import java.util.Date;\r\n    import java.util.List;\r\n    import lombok.AllArgsConstructor;\r\n    import lombok.Builder;\r\n    import lombok.Data;\r\n    import lombok.NoArgsConstructor;\r\n    import org.springframework.security.core.GrantedAuthority;\r\n    import org.springframework.security.core.userdetails.UserDetails;\r\n    \r\n    @Data\r\n    @Builder\r\n    @NoArgsConstructor\r\n    @AllArgsConstructor\r\n    @Entity\r\n    @Table(name = &quot;_user&quot;)\r\n    public class User implements UserDetails {\r\n    \r\n      @Id\r\n      @GeneratedValue(strategy=GenerationType.IDENTITY)\r\n      private Integer id;\r\n      @Column(name=&quot;firstName&quot;)\r\n      private String firstname;\r\n      @Column(name=&quot;lastName&quot;)\r\n      private String lastname;\r\n      @Column(name=&quot;userName&quot;,unique = true)\r\n      private String email;\r\n      @Column(name=&quot;password&quot;)\r\n      private String password;\r\n      @Column(name=&quot;role&quot;)\r\n      @Enumerated(EnumType.STRING)\r\n      private Role role;\r\n    \r\n      @OneToMany(mappedBy = &quot;user&quot;)\r\n      private List&lt;Token&gt; tokens;\r\n    \r\n      @Temporal(TemporalType.TIMESTAMP)\r\n    \t@JsonFormat(pattern = &quot;dd-MM-yyyy hh:mm:ss&quot;)\r\n      @Column(name=&quot;createdDate&quot;)\r\n      private Date createdDate;\r\n      @Column(name=&quot;updatedDate&quot;)\r\n      @Temporal(TemporalType.TIMESTAMP)\r\n     \t@JsonFormat(pattern = &quot;dd-MM-yyyy hh:mm:ss&quot;)\r\n      private Date updatedDate;\r\n      @Column(name=&quot;refreshToken&quot;)\r\n      private String refreshToken;\r\n      \r\n      @Override\r\n      public Collection&lt;? extends GrantedAuthority&gt; getAuthorities() {\r\n        return role.getAuthorities();\r\n      }\r\n    \r\n      @Override\r\n      public String getPassword() {\r\n        return password;\r\n      }\r\n    \r\n      @Override\r\n      public String getUsername() {\r\n        return email;\r\n      }\r\n    \r\n      @Override\r\n      public boolean isAccountNonExpired() {\r\n        return true;\r\n      }\r\n    \r\n      @Override\r\n      public boolean isAccountNonLocked() {\r\n        return true;\r\n      }\r\n    \r\n      @Override\r\n      public boolean isCredentialsNonExpired() {\r\n        return true;\r\n      }\r\n    \r\n      @Override\r\n      public boolean isEnabled() {\r\n        return true;\r\n      }\r\n    }\r\n\r\nentity class token\r\n\r\n    package com.books.token;\r\n    \r\n    import com.books.user.User;\r\n    import jakarta.persistence.Column;\r\n    import jakarta.persistence.Entity;\r\n    import jakarta.persistence.EnumType;\r\n    import jakarta.persistence.Enumerated;\r\n    import jakarta.persistence.FetchType;\r\n    import jakarta.persistence.GeneratedValue;\r\n    import jakarta.persistence.GenerationType;\r\n    import jakarta.persistence.Id;\r\n    import jakarta.persistence.JoinColumn;\r\n    import jakarta.persistence.ManyToOne;\r\n    import lombok.AllArgsConstructor;\r\n    import lombok.Builder;\r\n    import lombok.Data;\r\n    import lombok.NoArgsConstructor;\r\n    \r\n    @Data\r\n    @Builder\r\n    @NoArgsConstructor\r\n    @AllArgsConstructor\r\n    @Entity\r\n    public class Token {\r\n    \r\n      @Id\r\n      @GeneratedValue(strategy=GenerationType.IDENTITY)\r\n      public Integer id;\r\n    \r\n      @Column(unique = true)\r\n      public String token;\r\n    \r\n      @Column(name = &quot;tokenType&quot;)\r\n      @Enumerated(EnumType.STRING)\r\n      public TokenType tokenType = TokenType.BEARER;\r\n    \r\n      \r\n      public boolean revoked;\r\n    \r\n      public boolean expired;\r\n    \r\n      @ManyToOne(fetch = FetchType.LAZY)\r\n      @JoinColumn(name = &quot;user_id&quot;)\r\n      public User user;\r\n    }\r\n\r\nNo matter what I try `create` or `update` for `spring.jpa.hibernate.ddl-auto` property, I am getting error:\r\n\r\n    Caused by: org.hibernate.exception.SQLGrammarException: Unable to open JDBC Connection for DDL execution\r\n    ...\r\n    Caused by: java.sql.SQLSyntaxErrorException: Unknown database &#39;books&#39;\r\n    ...\r\n\r\n\r\nmysql dependency in POM.xml\r\n\r\n    &lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;com.mysql&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;mysql-connector-j&lt;/artifactId&gt;\r\n    \t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n\r\n\r\nspringboot version 3.0.5\r\nand mysql db version is 8.0.32\r\n\r\n","title":"unable to generate mysql schema using spring.jpa.hibernate.ddl-auto","body":"<p>I am trying generate <code>mysql</code> schema via my <code>springboot</code> application using property <code>spring.jpa.hibernate.ddl-auto=create</code> But getting error stating <code>Caused by: java.sql.SQLSyntaxErrorException: Unknown database 'books'</code></p>\n<p>application.properties file:</p>\n<pre><code># SERVER\nserver.port = 5555\nspring.datasource.url=jdbc:mysql://localhost:3306/books\nspring.datasource.username=root\nspring.datasource.password=root\n\nspring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect\n#spring.jpa.database-platform=org.hibernate.dialect.MySQLDialect\nspring.jpa.generate-ddl=true\nspring.jpa.hibernate.ddl-auto=create\nspring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver\nspring.jpa.show-sql=true\nspring.jpa.hibernate.naming.implicit-strategy = org.hibernate.boot.model.naming.ImplicitNamingStrategyLegacyJpaImpl\nspring.jpa.hibernate.naming.physical-strategy = org.hibernate.boot.model.naming.PhysicalNamingStrategyStandardImpl\n\n#spring.security.user.name=user\n#spring.security.user.password=123\napplication.security.jwt.secret-key=404E635266556A597H3272357538782F413F4497H72B4B6250645367566B5970\napplication.security.jwt.expiration=7200000\napplication.security.jwt.refresh-token.expiration=604800000\n\n\nspring.data.mongodb.host=localhost\nspring.data.mongodb.port=27017\nspring.data.mongodb.database=Books\n</code></pre>\n<p>Main class</p>\n<pre><code>package com.books;\n\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.boot.autoconfigure.domain.EntityScan;\nimport org.springframework.boot.context.properties.EnableConfigurationProperties;\n\n\n@SpringBootApplication\n@EnableConfigurationProperties\n@EntityScan(basePackages = {&quot;com.books.token&quot;,&quot;com.books.user&quot;})\npublic class SecurityApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(SecurityApplication.class, args);\n    }   \n}\n</code></pre>\n<p>entity class user</p>\n<pre><code>package com.books.user;\n\nimport com.fasterxml.jackson.annotation.JsonFormat;\nimport com.books.token.Token;\n\nimport jakarta.persistence.Column;\nimport jakarta.persistence.Entity;\nimport jakarta.persistence.EnumType;\nimport jakarta.persistence.Enumerated;\nimport jakarta.persistence.GeneratedValue;\nimport jakarta.persistence.GenerationType;\nimport jakarta.persistence.Id;\nimport jakarta.persistence.OneToMany;\nimport jakarta.persistence.Table;\nimport jakarta.persistence.Temporal;\nimport jakarta.persistence.TemporalType;\n\nimport java.util.Collection;\nimport java.util.Date;\nimport java.util.List;\nimport lombok.AllArgsConstructor;\nimport lombok.Builder;\nimport lombok.Data;\nimport lombok.NoArgsConstructor;\nimport org.springframework.security.core.GrantedAuthority;\nimport org.springframework.security.core.userdetails.UserDetails;\n\n@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\n@Entity\n@Table(name = &quot;_user&quot;)\npublic class User implements UserDetails {\n\n  @Id\n  @GeneratedValue(strategy=GenerationType.IDENTITY)\n  private Integer id;\n  @Column(name=&quot;firstName&quot;)\n  private String firstname;\n  @Column(name=&quot;lastName&quot;)\n  private String lastname;\n  @Column(name=&quot;userName&quot;,unique = true)\n  private String email;\n  @Column(name=&quot;password&quot;)\n  private String password;\n  @Column(name=&quot;role&quot;)\n  @Enumerated(EnumType.STRING)\n  private Role role;\n\n  @OneToMany(mappedBy = &quot;user&quot;)\n  private List&lt;Token&gt; tokens;\n\n  @Temporal(TemporalType.TIMESTAMP)\n    @JsonFormat(pattern = &quot;dd-MM-yyyy hh:mm:ss&quot;)\n  @Column(name=&quot;createdDate&quot;)\n  private Date createdDate;\n  @Column(name=&quot;updatedDate&quot;)\n  @Temporal(TemporalType.TIMESTAMP)\n    @JsonFormat(pattern = &quot;dd-MM-yyyy hh:mm:ss&quot;)\n  private Date updatedDate;\n  @Column(name=&quot;refreshToken&quot;)\n  private String refreshToken;\n  \n  @Override\n  public Collection&lt;? extends GrantedAuthority&gt; getAuthorities() {\n    return role.getAuthorities();\n  }\n\n  @Override\n  public String getPassword() {\n    return password;\n  }\n\n  @Override\n  public String getUsername() {\n    return email;\n  }\n\n  @Override\n  public boolean isAccountNonExpired() {\n    return true;\n  }\n\n  @Override\n  public boolean isAccountNonLocked() {\n    return true;\n  }\n\n  @Override\n  public boolean isCredentialsNonExpired() {\n    return true;\n  }\n\n  @Override\n  public boolean isEnabled() {\n    return true;\n  }\n}\n</code></pre>\n<p>entity class token</p>\n<pre><code>package com.books.token;\n\nimport com.books.user.User;\nimport jakarta.persistence.Column;\nimport jakarta.persistence.Entity;\nimport jakarta.persistence.EnumType;\nimport jakarta.persistence.Enumerated;\nimport jakarta.persistence.FetchType;\nimport jakarta.persistence.GeneratedValue;\nimport jakarta.persistence.GenerationType;\nimport jakarta.persistence.Id;\nimport jakarta.persistence.JoinColumn;\nimport jakarta.persistence.ManyToOne;\nimport lombok.AllArgsConstructor;\nimport lombok.Builder;\nimport lombok.Data;\nimport lombok.NoArgsConstructor;\n\n@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\n@Entity\npublic class Token {\n\n  @Id\n  @GeneratedValue(strategy=GenerationType.IDENTITY)\n  public Integer id;\n\n  @Column(unique = true)\n  public String token;\n\n  @Column(name = &quot;tokenType&quot;)\n  @Enumerated(EnumType.STRING)\n  public TokenType tokenType = TokenType.BEARER;\n\n  \n  public boolean revoked;\n\n  public boolean expired;\n\n  @ManyToOne(fetch = FetchType.LAZY)\n  @JoinColumn(name = &quot;user_id&quot;)\n  public User user;\n}\n</code></pre>\n<p>No matter what I try <code>create</code> or <code>update</code> for <code>spring.jpa.hibernate.ddl-auto</code> property, I am getting error:</p>\n<pre><code>Caused by: org.hibernate.exception.SQLGrammarException: Unable to open JDBC Connection for DDL execution\n...\nCaused by: java.sql.SQLSyntaxErrorException: Unknown database 'books'\n...\n</code></pre>\n<p>mysql dependency in POM.xml</p>\n<pre><code>&lt;dependency&gt;\n            &lt;groupId&gt;com.mysql&lt;/groupId&gt;\n            &lt;artifactId&gt;mysql-connector-j&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<p>springboot version 3.0.5\nand mysql db version is 8.0.32</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":1790714,"reputation":91128,"user_id":1631193,"accept_rate":71,"display_name":"Gabe Sechan"},"score":2,"creation_date":1696698274,"post_id":77250532,"comment_id":136187958,"body_markdown":"That&#39;s correct.  If OnClickListener had multiple functions, you wouldn&#39;t be able to use a lambda.  A lambda can only be used where it&#39;s replacing an interface with a single function.","body":"That&#39;s correct.  If OnClickListener had multiple functions, you wouldn&#39;t be able to use a lambda.  A lambda can only be used where it&#39;s replacing an interface with a single function."},{"owner":{"account_id":29620657,"reputation":9,"user_id":22701736,"display_name":"kapDev"},"score":0,"creation_date":1696707982,"post_id":77250532,"comment_id":136188859,"body_markdown":"Okay thank you @GabeSechan","body":"Okay thank you @GabeSechan"}],"owner":{"account_id":29620657,"reputation":9,"user_id":22701736,"display_name":"kapDev"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"closed_date":1696878549,"answer_count":0,"score":0,"last_activity_date":1696708439,"creation_date":1696694447,"question_id":77250532,"body_markdown":"Got confused about lambda in android studio\r\n\r\nI wanted to create a listener for a button in android studio and coded this:\r\n\r\n```\r\nButtonName.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                System.out.println(&quot;On click test&quot;));\r\n            }\r\n        });\r\n```\r\n\r\nAnd it&#39;s working but IDE suggested to use lambda like this:\r\n\r\n`ButtonName.setOnClickListener((view) -&gt; System.out.println(&quot;On click test&quot;));`\r\n\r\nAnd it also works and I got interested into lambda and want to know if I understand it.\r\n\r\nIt works because function *View.OnClickListener()* has only one abstract Method *onClick* so lambda automaticly uses *onClick* method ?\r\nI&#39;m a little confused about lambda.","title":"Lambda in android studio","body":"<p>Got confused about lambda in android studio</p>\n<p>I wanted to create a listener for a button in android studio and coded this:</p>\n<pre><code>ButtonName.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n                System.out.println(&quot;On click test&quot;));\n            }\n        });\n</code></pre>\n<p>And it's working but IDE suggested to use lambda like this:</p>\n<p><code>ButtonName.setOnClickListener((view) -&gt; System.out.println(&quot;On click test&quot;));</code></p>\n<p>And it also works and I got interested into lambda and want to know if I understand it.</p>\n<p>It works because function <em>View.OnClickListener()</em> has only one abstract Method <em>onClick</em> so lambda automaticly uses <em>onClick</em> method ?\nI'm a little confused about lambda.</p>\n"},{"tags":["java","exception","try-catch","block","throw"],"comments":[{"owner":{"account_id":284109,"reputation":47153,"user_id":581994,"accept_rate":57,"display_name":"Hot Licks"},"score":0,"creation_date":1385172166,"post_id":20156973,"comment_id":30047036,"body_markdown":"Blame a guy named Goodenough, ca 1974.","body":"Blame a guy named Goodenough, ca 1974."}],"answers":[{"tags":[],"owner":{"account_id":984212,"reputation":62352,"user_id":1003142,"display_name":"Konstantin Yovkov"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1696664805,"creation_date":1385166830,"answer_id":20156997,"question_id":20156973,"body_markdown":"You need to add a `throws` in the method signature **only** for checked exceptions. For example:\r\n\r\n    public static void divide(double x, double y) throws Exception {\r\n     ...\r\n    }\r\n\r\nSince [ArithmeticException extends RuntimeException][1], there&#39;s no need of a `throws` in the second example. \r\n\r\nMore info:\r\n\r\n - [Unchecked Exceptions][2]\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/api/java/lang/ArithmeticException.html\r\n  [2]: http://docs.oracle.com/javase/tutorial/essential/exceptions/runtime.html","title":"Why can&#39;t I throw an exception from a method","body":"<p>You need to add a <code>throws</code> in the method signature <strong>only</strong> for checked exceptions. For example:</p>\n<pre><code>public static void divide(double x, double y) throws Exception {\n ...\n}\n</code></pre>\n<p>Since <a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/ArithmeticException.html\" rel=\"nofollow noreferrer\">ArithmeticException extends RuntimeException</a>, there's no need of a <code>throws</code> in the second example.</p>\n<p>More info:</p>\n<ul>\n<li><a href=\"http://docs.oracle.com/javase/tutorial/essential/exceptions/runtime.html\" rel=\"nofollow noreferrer\">Unchecked Exceptions</a></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":1888343,"reputation":176597,"user_id":1707091,"display_name":"rgettman"},"down_vote_count":0,"up_vote_count":10,"is_accepted":true,"score":10,"last_activity_date":1385167292,"creation_date":1385166837,"answer_id":20156999,"question_id":20156973,"body_markdown":"An [`ArithmeticException`][1] is a `RuntimeException`, so it doesn&#39;t need to be declared in a `throws` clause or caught by a `catch` block.  But `Exception` isn&#39;t a `RuntimeException`.\r\n\r\n[Section 11.2 of the JLS][2] covers this:\r\n\r\n&gt; The unchecked exception classes (&#167;11.1.1) are exempted from compile-time checking.\r\n\r\nThe &quot;unchecked exception classes&quot; include `Error`s and `RuntimeException`s.\r\n\r\nAdditionally, you&#39;ll want to check if `y` is `0`, not if `x / y` is `0`.\r\n\r\n[1]: http://docs.oracle.com/javase/7/docs/api/java/lang/ArithmeticException.html\r\n[2]: http://docs.oracle.com/javase/specs/jls/se7/html/jls-11.html#jls-11.2","title":"Why can&#39;t I throw an exception from a method","body":"<p>An <a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/ArithmeticException.html\" rel=\"nofollow noreferrer\"><code>ArithmeticException</code></a> is a <code>RuntimeException</code>, so it doesn't need to be declared in a <code>throws</code> clause or caught by a <code>catch</code> block.  But <code>Exception</code> isn't a <code>RuntimeException</code>.</p>\n\n<p><a href=\"http://docs.oracle.com/javase/specs/jls/se7/html/jls-11.html#jls-11.2\" rel=\"nofollow noreferrer\">Section 11.2 of the JLS</a> covers this:</p>\n\n<blockquote>\n  <p>The unchecked exception classes (§11.1.1) are exempted from compile-time checking.</p>\n</blockquote>\n\n<p>The \"unchecked exception classes\" include <code>Error</code>s and <code>RuntimeException</code>s.</p>\n\n<p>Additionally, you'll want to check if <code>y</code> is <code>0</code>, not if <code>x / y</code> is <code>0</code>.</p>\n"},{"tags":[],"owner":{"account_id":2132213,"reputation":11287,"user_id":1892802,"accept_rate":100,"display_name":"ug_"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1385166973,"creation_date":1385166973,"answer_id":20157020,"question_id":20156973,"body_markdown":"Methods that throw exceptions in Java must delcare it in the method signature\r\n\r\n`public static void divide(double x, double y) throws Exception`\r\n\r\nWithout the declaration your code will not compile.\r\n\r\nThere is a special subset of exceptions that extend the `RuntimeException` class. These exceptions do not need to be declared in the method signature.\r\n\r\n`ArithmeticException` extends a `RuntimeException`","title":"Why can&#39;t I throw an exception from a method","body":"<p>Methods that throw exceptions in Java must delcare it in the method signature</p>\n\n<p><code>public static void divide(double x, double y) throws Exception</code></p>\n\n<p>Without the declaration your code will not compile.</p>\n\n<p>There is a special subset of exceptions that extend the <code>RuntimeException</code> class. These exceptions do not need to be declared in the method signature.</p>\n\n<p><code>ArithmeticException</code> extends a <code>RuntimeException</code></p>\n"},{"tags":[],"owner":{"account_id":1119690,"reputation":15788,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696707690,"creation_date":1696707690,"answer_id":77251266,"question_id":20156973,"body_markdown":"[`ArithmeticException`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/ArithmeticException.html) is an unchecked exception, since it extends [`RuntimeException`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/RuntimeException.html).  [`Exception`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Exception.html), by contrast, is an checked exception type, as it does not extend either `RuntimeException` or [`Error`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Error.html).\r\n\r\nChecked exceptions must be declared in the throws clause of the method signature of any method that can throw them.  Unchecked exceptions do not.\r\n\r\nUsing your example, adding `throws Exception` will be enough to get the method to compile.  Note though that any calling code would then need to handle the exception, either by catching it or declaring it as being thrown.\r\n\r\n```lang-java\r\npublic static void divide(double x, double y) throws Exception {\r\n    if (y == 0){\r\n        throw new Exception(&quot;Cannot divide by zero.&quot;); \r\n        // Generates error message that states the exception type is unhanded \r\n    }\r\n    else\r\n        System.out.println(x + &quot; divided by &quot; + y + &quot; is &quot; + x/y);\r\n        // other code follows\r\n}\r\n```\r\n\r\nThis is documented in the [Java Language Specification (JLS)](https://docs.oracle.com/javase/specs/jls/se21/html/jls-11.html):\r\n\r\n&gt; ## 11.1.1. The Kinds of Exceptions\r\n&gt; […]\r\n&gt; \r\n&gt; The _unchecked exception classes_ are the run-time exception classes and the error classes.\r\n&gt;\r\n&gt; The _checked exception classes_ are all exception classes other than the unchecked exception classes. That is, the checked exception classes are `Throwable` and all its subclasses other than `RuntimeException` and its subclasses and `Error` and its subclasses.\r\n&gt;\r\n&gt; […]\r\n&gt;\r\n&gt; # 11.2. Compile-Time Checking of Exceptions\r\n&gt;\r\n&gt; The Java programming language requires that a program contains handlers for _checked exceptions_ which can result from execution of a method or constructor ([&#167;8.4.6](https://docs.oracle.com/javase/specs/jls/se21/html/jls-8.html#jls-8.4.6 &quot;8.4.6.&#160;Method Throws&quot;), [&#167;8.8.5](https://docs.oracle.com/javase/specs/jls/se21/html/jls-8.html#jls-8.8.5 &quot;8.8.5.&#160;Constructor Throws&quot;)). This compile-time checking for the presence of exception handlers is designed to reduce the number of exceptions which are not properly handled. For each checked exception which is a possible result, the `throws` clause for the method or constructor must mention the class of that exception or one of the superclasses of the class of that exception ([&#167;11.2.3](https://docs.oracle.com/javase/specs/jls/se21/html/jls-11.html#jls-11.2.3 &quot;11.2.3.&#160;Exception Checking&quot;)).\r\n&gt;\r\n&gt; […]\r\n&gt; The unchecked exception classes ([&#167;11.1.1](https://docs.oracle.com/javase/specs/jls/se21/html/jls-11.html#jls-11.1.1 &quot;11.1.1.&#160;The Kinds of Exceptions&quot;)) are exempted from compile-time checking.","title":"Why can&#39;t I throw an exception from a method","body":"<p><a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/ArithmeticException.html\" rel=\"nofollow noreferrer\"><code>ArithmeticException</code></a> is an unchecked exception, since it extends <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/RuntimeException.html\" rel=\"nofollow noreferrer\"><code>RuntimeException</code></a>.  <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Exception.html\" rel=\"nofollow noreferrer\"><code>Exception</code></a>, by contrast, is an checked exception type, as it does not extend either <code>RuntimeException</code> or <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Error.html\" rel=\"nofollow noreferrer\"><code>Error</code></a>.</p>\n<p>Checked exceptions must be declared in the throws clause of the method signature of any method that can throw them.  Unchecked exceptions do not.</p>\n<p>Using your example, adding <code>throws Exception</code> will be enough to get the method to compile.  Note though that any calling code would then need to handle the exception, either by catching it or declaring it as being thrown.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static void divide(double x, double y) throws Exception {\n    if (y == 0){\n        throw new Exception(&quot;Cannot divide by zero.&quot;); \n        // Generates error message that states the exception type is unhanded \n    }\n    else\n        System.out.println(x + &quot; divided by &quot; + y + &quot; is &quot; + x/y);\n        // other code follows\n}\n</code></pre>\n<p>This is documented in the <a href=\"https://docs.oracle.com/javase/specs/jls/se21/html/jls-11.html\" rel=\"nofollow noreferrer\">Java Language Specification (JLS)</a>:</p>\n<blockquote>\n<h2>11.1.1. The Kinds of Exceptions</h2>\n<p>[…]</p>\n<p>The <em>unchecked exception classes</em> are the run-time exception classes and the error classes.</p>\n<p>The <em>checked exception classes</em> are all exception classes other than the unchecked exception classes. That is, the checked exception classes are <code>Throwable</code> and all its subclasses other than <code>RuntimeException</code> and its subclasses and <code>Error</code> and its subclasses.</p>\n<p>[…]</p>\n<h1>11.2. Compile-Time Checking of Exceptions</h1>\n<p>The Java programming language requires that a program contains handlers for <em>checked exceptions</em> which can result from execution of a method or constructor (<a href=\"https://docs.oracle.com/javase/specs/jls/se21/html/jls-8.html#jls-8.4.6\" rel=\"nofollow noreferrer\" title=\"8.4.6. Method Throws\">§8.4.6</a>, <a href=\"https://docs.oracle.com/javase/specs/jls/se21/html/jls-8.html#jls-8.8.5\" rel=\"nofollow noreferrer\" title=\"8.8.5. Constructor Throws\">§8.8.5</a>). This compile-time checking for the presence of exception handlers is designed to reduce the number of exceptions which are not properly handled. For each checked exception which is a possible result, the <code>throws</code> clause for the method or constructor must mention the class of that exception or one of the superclasses of the class of that exception (<a href=\"https://docs.oracle.com/javase/specs/jls/se21/html/jls-11.html#jls-11.2.3\" rel=\"nofollow noreferrer\" title=\"11.2.3. Exception Checking\">§11.2.3</a>).</p>\n<p>[…]\nThe unchecked exception classes (<a href=\"https://docs.oracle.com/javase/specs/jls/se21/html/jls-11.html#jls-11.1.1\" rel=\"nofollow noreferrer\" title=\"11.1.1. The Kinds of Exceptions\">§11.1.1</a>) are exempted from compile-time checking.</p>\n</blockquote>\n"}],"owner":{"display_name":"user2923308"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5213,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":20156999,"answer_count":4,"score":5,"last_activity_date":1696707690,"creation_date":1385166726,"question_id":20156973,"body_markdown":"I am new at Java and am experiencing a bit of a problem with throwing exceptions. Namely, why is this incorrect\r\n\r\n    public static void divide(double x, double y) {\r\n        if (y == 0){\r\n\t        throw new Exception(&quot;Cannot divide by zero.&quot;); \r\n            // Generates error message that states the exception type is unhanded \r\n\t    }\r\n\t    else\r\n\t        System.out.println(x + &quot; divided by &quot; + y + &quot; is &quot; + x/y);\r\n            // other code follows\r\n    }\r\n\r\nBut this OK?\r\n\r\n    public static void divide(double x, double y) {\r\n\t    if (y == 0)\r\n\t        throw new ArithmeticException(&quot;Cannot divide by zero.&quot;);\r\n\t    else\r\n\t        System.out.println(x + &quot; divided by &quot; + y + &quot; is &quot; + x/y);\r\n            // other code follows\r\n    }\r\n","title":"Why can&#39;t I throw an exception from a method","body":"<p>I am new at Java and am experiencing a bit of a problem with throwing exceptions. Namely, why is this incorrect</p>\n<pre><code>public static void divide(double x, double y) {\n    if (y == 0){\n        throw new Exception(&quot;Cannot divide by zero.&quot;); \n        // Generates error message that states the exception type is unhanded \n    }\n    else\n        System.out.println(x + &quot; divided by &quot; + y + &quot; is &quot; + x/y);\n        // other code follows\n}\n</code></pre>\n<p>But this OK?</p>\n<pre><code>public static void divide(double x, double y) {\n    if (y == 0)\n        throw new ArithmeticException(&quot;Cannot divide by zero.&quot;);\n    else\n        System.out.println(x + &quot; divided by &quot; + y + &quot; is &quot; + x/y);\n        // other code follows\n}\n</code></pre>\n"},{"tags":["java","android","android-view"],"answers":[{"tags":[],"owner":{"account_id":29439484,"reputation":94,"user_id":22557788,"display_name":"Davit Hovhannisyan"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1696673139,"creation_date":1696673139,"answer_id":77249308,"question_id":77249076,"body_markdown":"Try this \r\n\r\n\r\n    EditText etTitle = new EditText(fragment.requireContext());\r\n    etTitle.setId(Util.getIdNotUsed(fragment.requireActivity()));\r\n    \r\n    Drawable[] layers = new Drawable[2];\r\n    \r\n    \r\n    TypedArray a = fragment.requireActivity().getTheme().obtainStyledAttributes(isDarkMode ? R.style.notepad_dark : R.style.notepad_light, new int[] {R.attr.myColorBottomNavigationViewBg});\r\n    int attributeResourceId = a.getResourceId(0, 0);\r\n    Drawable backgroundDrawable = ContextCompat.getDrawable(fragment.requireContext(), attributeResourceId);\r\n    layers[0] = backgroundDrawable;\r\n    \r\n    \r\n    ShapeDrawable underlineDrawable = new ShapeDrawable(new RectShape());\r\n    underlineDrawable.getPaint().setColor(ContextCompat.getColor(fragment.requireContext(), R.color.your_underline_color)); // Set your desired underline color here\r\n    layers[1] = underlineDrawable;\r\n    \r\n    LayerDrawable layerDrawable = new LayerDrawable(layers);\r\n    \r\n    etTitle.setBackground(layerDrawable);\r\n\r\n","title":"Android edittext underline missing when background is set","body":"<p>Try this</p>\n<pre><code>EditText etTitle = new EditText(fragment.requireContext());\netTitle.setId(Util.getIdNotUsed(fragment.requireActivity()));\n\nDrawable[] layers = new Drawable[2];\n\n\nTypedArray a = fragment.requireActivity().getTheme().obtainStyledAttributes(isDarkMode ? R.style.notepad_dark : R.style.notepad_light, new int[] {R.attr.myColorBottomNavigationViewBg});\nint attributeResourceId = a.getResourceId(0, 0);\nDrawable backgroundDrawable = ContextCompat.getDrawable(fragment.requireContext(), attributeResourceId);\nlayers[0] = backgroundDrawable;\n\n\nShapeDrawable underlineDrawable = new ShapeDrawable(new RectShape());\nunderlineDrawable.getPaint().setColor(ContextCompat.getColor(fragment.requireContext(), R.color.your_underline_color)); // Set your desired underline color here\nlayers[1] = underlineDrawable;\n\nLayerDrawable layerDrawable = new LayerDrawable(layers);\n\netTitle.setBackground(layerDrawable);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1281728,"reputation":73126,"user_id":1235698,"accept_rate":100,"display_name":"Marcin Orlowski"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1696706434,"creation_date":1696681146,"answer_id":77249731,"question_id":77249076,"body_markdown":"Android `EditText` underline is typically a part of the default background drawable. Setting a new background drawable would naturally override it and to work that around I&#39;d go for layered drawable, which allows to stack multiple drawables on top of each other. That way you&#39;d have both your custom background and the default underline, and then set that as the background of your `EditText` (of course you can create your drawable from code as well):\r\n\r\n```\r\n&lt;layer-list xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;\r\n    &lt;item&gt;\r\n        &lt;color android:color=&quot;@color/your_background_color&quot;/&gt;\r\n    &lt;/item&gt;\r\n    &lt;item&gt;\r\n        &lt;bitmap\r\n            android:gravity=&quot;bottom&quot;\r\n            android:src=&quot;@drawable/your_underline_image&quot; /&gt;\r\n    &lt;/item&gt;\r\n&lt;/layer-list&gt;\r\n```\r\n\r\nThen use it in your code\r\n\r\n```\r\nDrawable layeredDrawable = ContextCompat.getDrawable(fragment.requireContext(), R.drawable.your_layered_drawable);\r\netTitle.setBackground(layeredDrawable);\r\n```","title":"Android edittext underline missing when background is set","body":"<p>Android <code>EditText</code> underline is typically a part of the default background drawable. Setting a new background drawable would naturally override it and to work that around I'd go for layered drawable, which allows to stack multiple drawables on top of each other. That way you'd have both your custom background and the default underline, and then set that as the background of your <code>EditText</code> (of course you can create your drawable from code as well):</p>\n<pre><code>&lt;layer-list xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;\n    &lt;item&gt;\n        &lt;color android:color=&quot;@color/your_background_color&quot;/&gt;\n    &lt;/item&gt;\n    &lt;item&gt;\n        &lt;bitmap\n            android:gravity=&quot;bottom&quot;\n            android:src=&quot;@drawable/your_underline_image&quot; /&gt;\n    &lt;/item&gt;\n&lt;/layer-list&gt;\n</code></pre>\n<p>Then use it in your code</p>\n<pre><code>Drawable layeredDrawable = ContextCompat.getDrawable(fragment.requireContext(), R.drawable.your_layered_drawable);\netTitle.setBackground(layeredDrawable);\n</code></pre>\n"}],"owner":{"account_id":17147295,"reputation":87,"user_id":21172734,"display_name":"mnietuniema"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77249731,"answer_count":2,"score":1,"last_activity_date":1696706434,"creation_date":1696668937,"question_id":77249076,"body_markdown":"I want to set a background of dynamically created edittext and to have its underline at the same time. Now it has a background, but it does not have underline. When I remove setBackground() then underline is shown. \r\n\r\nI tried a constructor of edittext like that but it didn&#39;t help: `etTitle = new EditText(new ContextThemeWrapper(fragment.requireContext(), R.style.editText));`\r\n\r\nI don&#39;t want transparency on this background.\r\n\r\n\r\n                    etTitle = new EditText(fragment.requireContext());\r\n                    etTitle.setId(Util.getIdNotUsed(fragment.requireActivity()));\r\n\r\n                    TypedArray a = fragment.requireActivity().getTheme().obtainStyledAttributes(isDarkMode ? R.style.notepad_dark : R.style.notepad_light, new int[] {R.attr.myColorBottomNavigationViewBg});\r\n                    int attributeResourceId = a.getResourceId(0, 0);\r\n                    Drawable drawable = ContextCompat.getDrawable(fragment.requireContext(), attributeResourceId);\r\n\r\n                    etTitle.setBackground(drawable);\r\n\r\n\r\nHow to solve that?","title":"Android edittext underline missing when background is set","body":"<p>I want to set a background of dynamically created edittext and to have its underline at the same time. Now it has a background, but it does not have underline. When I remove setBackground() then underline is shown.</p>\n<p>I tried a constructor of edittext like that but it didn't help: <code>etTitle = new EditText(new ContextThemeWrapper(fragment.requireContext(), R.style.editText));</code></p>\n<p>I don't want transparency on this background.</p>\n<pre><code>                etTitle = new EditText(fragment.requireContext());\n                etTitle.setId(Util.getIdNotUsed(fragment.requireActivity()));\n\n                TypedArray a = fragment.requireActivity().getTheme().obtainStyledAttributes(isDarkMode ? R.style.notepad_dark : R.style.notepad_light, new int[] {R.attr.myColorBottomNavigationViewBg});\n                int attributeResourceId = a.getResourceId(0, 0);\n                Drawable drawable = ContextCompat.getDrawable(fragment.requireContext(), attributeResourceId);\n\n                etTitle.setBackground(drawable);\n</code></pre>\n<p>How to solve that?</p>\n"},{"tags":["java","oop"],"comments":[{"owner":{"account_id":301230,"reputation":28997,"user_id":608820,"accept_rate":89,"display_name":"Augusto"},"score":1,"creation_date":1696702951,"post_id":77250965,"comment_id":136188373,"body_markdown":"It&#39;s a language feature, the methods are already implemented so there&#39;s no requirement to override them. This other answer about what happens when a class implements two interfaces which have a method with the same signature gives a bit more information and has links to the java language specification: https://stackoverflow.com/questions/2801878/implementing-two-interfaces-in-a-class-with-same-method-which-interface-method","body":"It&#39;s a language feature, the methods are already implemented so there&#39;s no requirement to override them. This other answer about what happens when a class implements two interfaces which have a method with the same signature gives a bit more information and has links to the java language specification: <a href=\"https://stackoverflow.com/questions/2801878/implementing-two-interfaces-in-a-class-with-same-method-which-interface-method\" title=\"implementing two interfaces in a class with same method which interface method\">stackoverflow.com/questions/2801878/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":29571728,"reputation":136,"user_id":22663720,"display_name":"Guy"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1696703396,"creation_date":1696703396,"answer_id":77251023,"question_id":77250965,"body_markdown":"As you said, the Object class is implementing those method default so every new instance of class that implements your interface also extends `Object` class, therefore the interface is implemented and there is no need to require special implementation for those methods.\r\n\r\nIf you want to &quot;force&quot; overriding the default implementation you can use `abstract class` instead of interface, something like:\r\n```java\r\npublic abstract class Comparator {\r\n    public abstract int compare(String o1, String o2);\r\n\r\n    @Override\r\n    public abstract String toString();\r\n\r\n    @Override\r\n    public abstract boolean equals(Object other);\r\n}\r\n```\r\n\r\nThis will require the classes extending this class to implement `equals` and `toString()` but notice you can extend only one class but many interfaces.\r\n\r\nThen the implementation of some class could look like:\r\n```java\r\npublic class MyComparator extends Comparator {\r\n    @Override\r\n    public int compare(String o1, String o2) {\r\n        return 0;\r\n    }\r\n\r\n    @Override\r\n    public String toString() {\r\n        return null;\r\n    }\r\n\r\n    @Override\r\n    public boolean equals(Object other) {\r\n        return false;\r\n    }\r\n}\r\n\r\n```\r\n\r\n","title":"Why Are Equals and ToString Methods Optional When Implementing an Interface in Java?","body":"<p>As you said, the Object class is implementing those method default so every new instance of class that implements your interface also extends <code>Object</code> class, therefore the interface is implemented and there is no need to require special implementation for those methods.</p>\n<p>If you want to &quot;force&quot; overriding the default implementation you can use <code>abstract class</code> instead of interface, something like:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public abstract class Comparator {\n    public abstract int compare(String o1, String o2);\n\n    @Override\n    public abstract String toString();\n\n    @Override\n    public abstract boolean equals(Object other);\n}\n</code></pre>\n<p>This will require the classes extending this class to implement <code>equals</code> and <code>toString()</code> but notice you can extend only one class but many interfaces.</p>\n<p>Then the implementation of some class could look like:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class MyComparator extends Comparator {\n    @Override\n    public int compare(String o1, String o2) {\n        return 0;\n    }\n\n    @Override\n    public String toString() {\n        return null;\n    }\n\n    @Override\n    public boolean equals(Object other) {\n        return false;\n    }\n}\n\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11244318,"reputation":389,"user_id":8247530,"display_name":"Rifat Rubayatul Islam"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696703879,"creation_date":1696703879,"answer_id":77251050,"question_id":77250965,"body_markdown":"When you are implementing an interface, it is not mandatory to implement an abstract method in your class if there is an implementation(or default method) of a method with the same signature in any of your super classes(super interfaces) (unless there is a conflict). In your case, the definition of `equals` and `toString` is found in the `Object` class which is the default super class. So, that&#39;s why you don&#39;t need to override them. You can learn more about overriding and hiding in [here](https://docs.oracle.com/javase/tutorial/java/IandI/override.html)\r\n\r\nBut it would be different if it was an Abstract class instead of an interface. For example:\r\n```java\r\nabstract class AbsCompare {\r\n    public abstract int compare(String o1, String o2);\r\n    public abstract boolean equals(Object obj);\r\n    public abstract String toString();\r\n}\r\n```\r\nIn this case if you try to extend `AbsCompare` you have to implement all 3 methods. Because there is no definition found in your super class.  ","title":"Why Are Equals and ToString Methods Optional When Implementing an Interface in Java?","body":"<p>When you are implementing an interface, it is not mandatory to implement an abstract method in your class if there is an implementation(or default method) of a method with the same signature in any of your super classes(super interfaces) (unless there is a conflict). In your case, the definition of <code>equals</code> and <code>toString</code> is found in the <code>Object</code> class which is the default super class. So, that's why you don't need to override them. You can learn more about overriding and hiding in <a href=\"https://docs.oracle.com/javase/tutorial/java/IandI/override.html\" rel=\"nofollow noreferrer\">here</a></p>\n<p>But it would be different if it was an Abstract class instead of an interface. For example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>abstract class AbsCompare {\n    public abstract int compare(String o1, String o2);\n    public abstract boolean equals(Object obj);\n    public abstract String toString();\n}\n</code></pre>\n<p>In this case if you try to extend <code>AbsCompare</code> you have to implement all 3 methods. Because there is no definition found in your super class.</p>\n"},{"tags":[],"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1696706268,"creation_date":1696705826,"answer_id":77251169,"question_id":77250965,"body_markdown":"## Why Are Object Methods &quot;Optional&quot;?\r\n\r\nAll classes in Java ultimately inherit from `java.lang.Object`.&#160;Any method defined in an interface whose signature matches a method defined by that root class is already implemented. So, from the point of view of the compiler, you don&#39;t have to explicitly define an implementation of such methods.\r\n\r\n## Why Define Object Methods in an Interface?\r\n\r\nTo extend the contract. As an example, look at [`java.util.List#equals(Object)`][1].\r\n\r\n&gt; Compares the specified object with this list for equality. Returns `true` if and only if the specified object is also a list, both lists have the same size, and all corresponding pairs of elements in the two lists are _equal_. (Two elements `e1` and `e2` are equal if `Objects.equals(e1, e2)`.) In other words, two lists are defined to be equal if they contain the same elements in the same order. This definition ensures that the equals method works properly across different implementations of the `List` interface.\r\n\r\nThis tells you exactly what it means for any two lists to be equal, _regardless of implementation_. Without this contract, it would be impossible to compare two lists in a consistent manner without forcing the use of a specific list implementation. Note that while the compiler won&#39;t force you to override `equals` when implementing `List`, you are logically still required to override it in order to meet the contract of `List`.\r\n\r\n\r\n\r\n\r\n \r\n  [1]: https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html#equals(java.lang.Object)","title":"Why Are Equals and ToString Methods Optional When Implementing an Interface in Java?","body":"<h2>Why Are Object Methods &quot;Optional&quot;?</h2>\n<p>All classes in Java ultimately inherit from <code>java.lang.Object</code>. Any method defined in an interface whose signature matches a method defined by that root class is already implemented. So, from the point of view of the compiler, you don't have to explicitly define an implementation of such methods.</p>\n<h2>Why Define Object Methods in an Interface?</h2>\n<p>To extend the contract. As an example, look at <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html#equals(java.lang.Object)\" rel=\"nofollow noreferrer\"><code>java.util.List#equals(Object)</code></a>.</p>\n<blockquote>\n<p>Compares the specified object with this list for equality. Returns <code>true</code> if and only if the specified object is also a list, both lists have the same size, and all corresponding pairs of elements in the two lists are <em>equal</em>. (Two elements <code>e1</code> and <code>e2</code> are equal if <code>Objects.equals(e1, e2)</code>.) In other words, two lists are defined to be equal if they contain the same elements in the same order. This definition ensures that the equals method works properly across different implementations of the <code>List</code> interface.</p>\n</blockquote>\n<p>This tells you exactly what it means for any two lists to be equal, <em>regardless of implementation</em>. Without this contract, it would be impossible to compare two lists in a consistent manner without forcing the use of a specific list implementation. Note that while the compiler won't force you to override <code>equals</code> when implementing <code>List</code>, you are logically still required to override it in order to meet the contract of <code>List</code>.</p>\n"}],"owner":{"account_id":17694375,"reputation":3,"user_id":12845474,"display_name":"Blank"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":112,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77251169,"answer_count":3,"score":0,"last_activity_date":1696706268,"creation_date":1696702398,"question_id":77250965,"body_markdown":"I&#39;m fairly new to Java, and I&#39;ve been exploring the concept of implementing interfaces. It&#39;s a common understanding that when you implement an interface, you typically need to provide implementations for all the methods declared in that interface. However, I&#39;ve encountered a scenario where I declared an interface with three method signatures. Interestingly, two of them are using the same signatures as `equals `and `toString `methods from the `Object `class, and one is a custom method called `compare`.\r\n\r\nHere&#39;s my question: When I attempted to implement this interface, it appears that I&#39;m only required to implement the compare method, while the equals and toString methods are not `mandatory`. Could someone please clarify why this is the case?\r\n\r\nHere is the interface :\r\n\r\n```\r\npublic interface ICompare {\r\n    public int compare(String o1, String o2);\r\n    public boolean equals(Object obj);\r\n    public String toString();\r\n}\r\n\r\n```\r\n\r\nand for the code :\r\n\r\n```\r\npublic class Main {\r\n    public static void main(String[] args) {\r\n     ICompare c = new ICompare() {\r\n         @Override\r\n         public int compare(String o1, String o2) {\r\n             throw new UnsupportedOperationException(&quot;Not supported yet.&quot;);\r\n         }\r\n     };\r\n    }\r\n}\r\n```\r\nI get that the Object class already declares the signatures for those two methods. However, what&#39;s the benefit of explicitly including their signatures in the interface if we&#39;re not compelled to override them?","title":"Why Are Equals and ToString Methods Optional When Implementing an Interface in Java?","body":"<p>I'm fairly new to Java, and I've been exploring the concept of implementing interfaces. It's a common understanding that when you implement an interface, you typically need to provide implementations for all the methods declared in that interface. However, I've encountered a scenario where I declared an interface with three method signatures. Interestingly, two of them are using the same signatures as <code>equals </code>and <code>toString </code>methods from the <code>Object </code>class, and one is a custom method called <code>compare</code>.</p>\n<p>Here's my question: When I attempted to implement this interface, it appears that I'm only required to implement the compare method, while the equals and toString methods are not <code>mandatory</code>. Could someone please clarify why this is the case?</p>\n<p>Here is the interface :</p>\n<pre><code>public interface ICompare {\n    public int compare(String o1, String o2);\n    public boolean equals(Object obj);\n    public String toString();\n}\n\n</code></pre>\n<p>and for the code :</p>\n<pre><code>public class Main {\n    public static void main(String[] args) {\n     ICompare c = new ICompare() {\n         @Override\n         public int compare(String o1, String o2) {\n             throw new UnsupportedOperationException(&quot;Not supported yet.&quot;);\n         }\n     };\n    }\n}\n</code></pre>\n<p>I get that the Object class already declares the signatures for those two methods. However, what's the benefit of explicitly including their signatures in the interface if we're not compelled to override them?</p>\n"},{"tags":["java","netbeans"],"comments":[{"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1398126115,"post_id":23208203,"comment_id":35501656,"body_markdown":"You need to make sure that every project is compile to the same level.  That is, either using the same Java Version or compatibility level.  You will also need to ensure that any external libraries also support your targeted Java version...","body":"You need to make sure that every project is compile to the same level.  That is, either using the same Java Version or compatibility level.  You will also need to ensure that any external libraries also support your targeted Java version..."},{"owner":{"account_id":4361502,"reputation":59,"user_id":3558436,"display_name":"ferrago"},"score":0,"creation_date":1398126465,"post_id":23208203,"comment_id":35501747,"body_markdown":"I have made sure every project should be compiling with 1.7.0_55 and they are using the same libraries they were using before I upgraded to 1.8 when everything worked fine. The server uses java 1.7.0_51, which is totally compatible with 1.7.0_55.","body":"I have made sure every project should be compiling with 1.7.0_55 and they are using the same libraries they were using before I upgraded to 1.8 when everything worked fine. The server uses java 1.7.0_51, which is totally compatible with 1.7.0_55."},{"owner":{"account_id":4361502,"reputation":59,"user_id":3558436,"display_name":"ferrago"},"score":0,"creation_date":1398126693,"post_id":23208203,"comment_id":35501802,"body_markdown":"Fixed it, fyi Clean and Build is actually useful.","body":"Fixed it, fyi Clean and Build is actually useful."},{"owner":{"account_id":132300,"reputation":2222,"user_id":332897,"accept_rate":76,"display_name":"Enrique San Mart&#237;n"},"score":0,"creation_date":1443626681,"post_id":23208203,"comment_id":53571615,"body_markdown":"http://stackoverflow.com/questions/32199584/compiling-any-javafx-project-in-netbeans-returns-unsupported-major-minor-version\r\n\r\nthe solution is change the default jdk to 1.8","body":"<a href=\"http://stackoverflow.com/questions/32199584/compiling-any-javafx-project-in-netbeans-returns-unsupported-major-minor-version\" title=\"compiling any javafx project in netbeans returns unsupported major minor version\">stackoverflow.com/questions/32199584/&hellip;</a>    the solution is change the default jdk to 1.8"},{"owner":{"account_id":1540531,"reputation":1589,"user_id":1435322,"display_name":"Autar"},"score":0,"creation_date":1444742818,"post_id":23208203,"comment_id":54022638,"body_markdown":"Possible duplicate of [Unsupported major.minor version 52.0](http://stackoverflow.com/questions/22489398/unsupported-major-minor-version-52-0)","body":"Possible duplicate of <a href=\"http://stackoverflow.com/questions/22489398/unsupported-major-minor-version-52-0\">Unsupported major.minor version 52.0</a>"},{"owner":{"account_id":4007082,"reputation":23327,"user_id":3301492,"display_name":"Boris"},"score":0,"creation_date":1623172702,"post_id":23208203,"comment_id":120000783,"body_markdown":"Why did you upgrade to a 7 years old Netbeans 8.0 and not the latest version?","body":"Why did you upgrade to a 7 years old Netbeans 8.0 and not the latest version?"}],"answers":[{"tags":[],"owner":{"account_id":1611888,"reputation":546,"user_id":1490583,"display_name":"dav.garcia"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1505910435,"creation_date":1505910435,"answer_id":46322109,"question_id":23208203,"body_markdown":"If you are using Maven, you can set the JDK version of each module by placing a file called `nb-configuration.xml` beside your `pom.xml` with the following content:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project-shared-configuration&gt;\r\n        &lt;properties xmlns=&quot;http://www.netbeans.org/ns/maven-properties-data/1&quot;&gt;\r\n            &lt;netbeans.hint.jdkPlatform&gt;JDK_1.7&lt;/netbeans.hint.jdkPlatform&gt;\r\n        &lt;/properties&gt;\r\n    &lt;/project-shared-configuration&gt;\r\n\r\nThe &quot;JDK_1.7&quot; Java platform must be configured in Tools -&gt; Java Platforms -&gt; Add Platform...","title":"Netbeans 8.0 Unsupported major.minor version 52.0 error","body":"<p>If you are using Maven, you can set the JDK version of each module by placing a file called <code>nb-configuration.xml</code> beside your <code>pom.xml</code> with the following content:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;project-shared-configuration&gt;\n    &lt;properties xmlns=\"http://www.netbeans.org/ns/maven-properties-data/1\"&gt;\n        &lt;netbeans.hint.jdkPlatform&gt;JDK_1.7&lt;/netbeans.hint.jdkPlatform&gt;\n    &lt;/properties&gt;\n&lt;/project-shared-configuration&gt;\n</code></pre>\n\n<p>The \"JDK_1.7\" Java platform must be configured in Tools -> Java Platforms -> Add Platform...</p>\n"},{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1599717983,"creation_date":1599615084,"answer_id":63803574,"question_id":23208203,"body_markdown":"&gt; Does anyone know what I am missing?\r\n\r\nWell the one thing you were missing is that everything needs to be **built** for Java 1.7.  It is not sufficient to just configure the IDE to use JDK 1.7.  You have to make the IDE **do the rebuild** ... **for everything** that was previously built with Java 1.8 as the target.\r\n\r\nClean and rebuild all relevant projects after changing the project&#39;s Java target platform.\r\n\r\nI also recommend that you start using Maven / Gradle / whatever to specify your build configs.  This allows you to specify in the build configs what the target platform should be.  If you do this, you are less likely to be burned with bad builds when you upgrade your IDE and/or development machine&#39;s default Java install.\r\n\r\n","title":"Netbeans 8.0 Unsupported major.minor version 52.0 error","body":"<blockquote>\n<p>Does anyone know what I am missing?</p>\n</blockquote>\n<p>Well the one thing you were missing is that everything needs to be <strong>built</strong> for Java 1.7.  It is not sufficient to just configure the IDE to use JDK 1.7.  You have to make the IDE <strong>do the rebuild</strong> ... <strong>for everything</strong> that was previously built with Java 1.8 as the target.</p>\n<p>Clean and rebuild all relevant projects after changing the project's Java target platform.</p>\n<p>I also recommend that you start using Maven / Gradle / whatever to specify your build configs.  This allows you to specify in the build configs what the target platform should be.  If you do this, you are less likely to be burned with bad builds when you upgrade your IDE and/or development machine's default Java install.</p>\n"}],"owner":{"account_id":4361502,"reputation":59,"user_id":3558436,"display_name":"ferrago"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":10063,"favorite_count":0,"down_vote_count":1,"up_vote_count":4,"answer_count":2,"score":3,"last_activity_date":1696705440,"creation_date":1398125916,"question_id":23208203,"body_markdown":"I am having a problem with compiled .jar projects in netbeans. I recently upgraded to java 1.8 and netbeans 8.0. After updating every project I compile and put onto my server running java 1.7.0_55 I get the &quot;Unsupported major.minor version 52.0&quot; issue. I know this is due to incompatible java versions. I have tried changing the jdk used for building everywhere I can find it. I have tried building with 1.7.0_55 and 1.7.0_07 and still get this issue. Does anyone know what I am missing? Each time I have changed the build settings I make sure to recompile the project. It is not possible to update the version of java on the server just yet.","title":"Netbeans 8.0 Unsupported major.minor version 52.0 error","body":"<p>I am having a problem with compiled .jar projects in netbeans. I recently upgraded to java 1.8 and netbeans 8.0. After updating every project I compile and put onto my server running java 1.7.0_55 I get the \"Unsupported major.minor version 52.0\" issue. I know this is due to incompatible java versions. I have tried changing the jdk used for building everywhere I can find it. I have tried building with 1.7.0_55 and 1.7.0_07 and still get this issue. Does anyone know what I am missing? Each time I have changed the build settings I make sure to recompile the project. It is not possible to update the version of java on the server just yet.</p>\n"},{"tags":["java","android","in-app-purchase","in-app-billing"],"answers":[{"tags":[],"owner":{"account_id":29520193,"reputation":857,"user_id":22623172,"display_name":"Vlad Guriev"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1696618267,"creation_date":1696618267,"answer_id":77246765,"question_id":77246604,"body_markdown":"This error often occurs when incorrect data is passed to the Billing Library.\r\n\r\nIn your case, please find the relevant `offerToken`:\r\n\r\n```String offerToken = productDetailsList.get(0).getSubscriptionOfferDetails().get(0).getOfferToken();```\r\n\r\n(Of course, this is just an example, and I&#39;m omitting various checks. I&#39;m assuming that the first product is a subscription and that your desired offer is the first in the list returned by `getSubscriptionOfferDetails()`.You should use your custom logic to find the right offer.)\r\n\r\nAfterward, try removing the line `.setOfferToken(String.valueOf(productDetailsList.get(0).getSubscriptionOfferDetails()))` with `setOfferToken(offerToken)`","title":"Google Play Billing V6 show error DF-DFERH-01","body":"<p>This error often occurs when incorrect data is passed to the Billing Library.</p>\n<p>In your case, please find the relevant <code>offerToken</code>:</p>\n<p><code>String offerToken = productDetailsList.get(0).getSubscriptionOfferDetails().get(0).getOfferToken();</code></p>\n<p>(Of course, this is just an example, and I'm omitting various checks. I'm assuming that the first product is a subscription and that your desired offer is the first in the list returned by <code>getSubscriptionOfferDetails()</code>.You should use your custom logic to find the right offer.)</p>\n<p>Afterward, try removing the line <code>.setOfferToken(String.valueOf(productDetailsList.get(0).getSubscriptionOfferDetails()))</code> with <code>setOfferToken(offerToken)</code></p>\n"}],"owner":{"account_id":23992638,"reputation":5,"user_id":17978536,"display_name":"Jorge Barajas"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":136,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77246765,"answer_count":1,"score":0,"last_activity_date":1696705107,"creation_date":1696616022,"question_id":77246604,"body_markdown":"Hi I am integrating Google Play Billing Library on my project on a `fragment` in android studio to sell a subscription, I alrready make the set up in the Google Play Console uploading my app in internal test and making the subscription basic plan, then I continued to make the logic process in my app following the steps in the documentation, everything is fine, I checked the product list and it has the subscription&#180;s information, but when the app tries to show up the google play window it appears the next error message:\r\n\r\n![errorImage](https://i.stack.imgur.com/yhVxp.jpg)\r\n\r\nI searched in internet and they said to clear the data, cache of the google play store and google play service and restart the phone I did it but it did not work, I open another app with subscription and it shows the window of the google play subscription without problem, so I dont think the problem is the google play store\r\n\r\n\r\n![otherAppSubscription](https://i.stack.imgur.com/RgXxG.jpg)\r\n\r\n\r\nI have tried a lot of things, download the app from google play store (internal test), changing a fragment for an activity, using the downgrade version of the libray and nothing work, I share you my code, thanks in advance\r\n\r\n```\r\n@Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                             Bundle savedInstanceState) {\r\n        // Inflate the layout for this fragment\r\n        view = inflater.inflate(R.layout.fragment_sin_anuncios, container, false);\r\n        PurchasesUpdatedListener purchasesUpdatedListener = new PurchasesUpdatedListener() {\r\n            @Override\r\n            public void onPurchasesUpdated(BillingResult billingResult, List&lt;Purchase&gt; purchases) {\r\n                // To be implemented in a later section.\r\n            }\r\n        };\r\n\r\n        billingClient = BillingClient.newBuilder(getContext())\r\n                .setListener(purchasesUpdatedListener)\r\n                .enablePendingPurchases()\r\n                .build();\r\n\r\n        connectToGooglePlayBilling();\r\n\r\n        return view;\r\n    }\r\n\r\n    private void connectToGooglePlayBilling(){\r\n\r\n        billingClient.startConnection(new BillingClientStateListener() {\r\n            @Override\r\n            public void onBillingSetupFinished(BillingResult billingResult) {\r\n\r\n                if (billingResult.getResponseCode() ==  BillingClient.BillingResponseCode.OK) {\r\n                    // The BillingClient is ready. You can query purchases here.\r\n                    getProductDeatils();\r\n\r\n                }\r\n\r\n            }\r\n            @Override\r\n            public void onBillingServiceDisconnected() {\r\n                // Try to restart the connection on the next request to\r\n                // Google Play by calling the startConnection() method.\r\n                Toast.makeText(getContext(), &quot;No se pudo conectar a GooglePlay, revisa tu conexion a internet.\\nIntentando conectarse nuevamente.&quot;, Toast.LENGTH_SHORT).show();\r\n                connectToGooglePlayBilling();\r\n                \r\n            }\r\n        });\r\n\r\n    }\r\n\r\n\r\n    private void getProductDeatils(){\r\n\r\n        QueryProductDetailsParams queryProductDetailsParams =\r\n                QueryProductDetailsParams.newBuilder()\r\n                        .setProductList(\r\n                                ImmutableList.of(\r\n                                        QueryProductDetailsParams.Product.newBuilder()\r\n                                                .setProductId(&quot;version_sin_anuncios&quot;)\r\n                                                .setProductType(BillingClient.ProductType.SUBS)\r\n                                                .build()))\r\n                        .build();\r\n\r\n        Activity activity = getActivity();\r\n\r\n        billingClient.queryProductDetailsAsync(\r\n                queryProductDetailsParams,\r\n                new ProductDetailsResponseListener() {\r\n                    public void onProductDetailsResponse(BillingResult billingResult,\r\n                                                         List&lt;ProductDetails&gt; productDetailsList) {\r\n                        // check billingResult\r\n                        // process returned productDetailsList\r\n\r\n                        if(billingResult.getResponseCode() == BillingClient.BillingResponseCode.OK &amp;&amp; productDetailsList != null){\r\n                            TextView descripcion = view.findViewById(R.id.textViewSinAnuncios);\r\n                            descripcion.setText(productDetailsList.get(0).getDescription());\r\n\r\n                            Button BotonSinAnuncios = (Button) view.findViewById(R.id.buttonSinAnuncios);\r\n                            BotonSinAnuncios.setOnClickListener(new View.OnClickListener()\r\n                            {\r\n\r\n                                @Override\r\n                                public void onClick(View v)\r\n                                {\r\n                                    Log.d(&quot;GoogleBillingService&quot;, &quot;onBillingSetupFinished: billingResult: &quot; + billingResult);\r\n                                    Log.d(&quot;GoogleBillingService&quot;, &quot;Product detatils: &quot; + productDetailsList.get(0));\r\n\r\n                                    ImmutableList productDetailsParamsList =\r\n                                            ImmutableList.of(\r\n                                                    BillingFlowParams.ProductDetailsParams.newBuilder()\r\n                                                            // retrieve a value for &quot;productDetails&quot; by calling queryProductDetailsAsync()\r\n                                                            .setProductDetails(productDetailsList.get(0))\r\n                                                            // to get an offer token, call ProductDetails.getSubscriptionOfferDetails()\r\n                                                            // for a list of offers that are available to the user\r\n                                                            .setOfferToken(String.valueOf(productDetailsList.get(0).getSubscriptionOfferDetails()))\r\n                                                            .build()\r\n                                            );\r\n\r\n\r\n                                    BillingFlowParams billingFlowParams = BillingFlowParams.newBuilder()\r\n                                            .setProductDetailsParamsList(productDetailsParamsList)\r\n                                            .build();\r\n\r\n\r\n                                    // Launch the billing flow\r\n                                    billingClient.launchBillingFlow(activity, billingFlowParams);\r\n\r\n                                }\r\n                            });\r\n\r\n\r\n                        }\r\n                    }\r\n                }\r\n        );\r\n\r\n    }\r\n\r\n}\r\n```","title":"Google Play Billing V6 show error DF-DFERH-01","body":"<p>Hi I am integrating Google Play Billing Library on my project on a <code>fragment</code> in android studio to sell a subscription, I alrready make the set up in the Google Play Console uploading my app in internal test and making the subscription basic plan, then I continued to make the logic process in my app following the steps in the documentation, everything is fine, I checked the product list and it has the subscription´s information, but when the app tries to show up the google play window it appears the next error message:</p>\n<p><img src=\"https://i.stack.imgur.com/yhVxp.jpg\" alt=\"errorImage\" /></p>\n<p>I searched in internet and they said to clear the data, cache of the google play store and google play service and restart the phone I did it but it did not work, I open another app with subscription and it shows the window of the google play subscription without problem, so I dont think the problem is the google play store</p>\n<p><img src=\"https://i.stack.imgur.com/RgXxG.jpg\" alt=\"otherAppSubscription\" /></p>\n<p>I have tried a lot of things, download the app from google play store (internal test), changing a fragment for an activity, using the downgrade version of the libray and nothing work, I share you my code, thanks in advance</p>\n<pre><code>@Override\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\n                             Bundle savedInstanceState) {\n        // Inflate the layout for this fragment\n        view = inflater.inflate(R.layout.fragment_sin_anuncios, container, false);\n        PurchasesUpdatedListener purchasesUpdatedListener = new PurchasesUpdatedListener() {\n            @Override\n            public void onPurchasesUpdated(BillingResult billingResult, List&lt;Purchase&gt; purchases) {\n                // To be implemented in a later section.\n            }\n        };\n\n        billingClient = BillingClient.newBuilder(getContext())\n                .setListener(purchasesUpdatedListener)\n                .enablePendingPurchases()\n                .build();\n\n        connectToGooglePlayBilling();\n\n        return view;\n    }\n\n    private void connectToGooglePlayBilling(){\n\n        billingClient.startConnection(new BillingClientStateListener() {\n            @Override\n            public void onBillingSetupFinished(BillingResult billingResult) {\n\n                if (billingResult.getResponseCode() ==  BillingClient.BillingResponseCode.OK) {\n                    // The BillingClient is ready. You can query purchases here.\n                    getProductDeatils();\n\n                }\n\n            }\n            @Override\n            public void onBillingServiceDisconnected() {\n                // Try to restart the connection on the next request to\n                // Google Play by calling the startConnection() method.\n                Toast.makeText(getContext(), &quot;No se pudo conectar a GooglePlay, revisa tu conexion a internet.\\nIntentando conectarse nuevamente.&quot;, Toast.LENGTH_SHORT).show();\n                connectToGooglePlayBilling();\n                \n            }\n        });\n\n    }\n\n\n    private void getProductDeatils(){\n\n        QueryProductDetailsParams queryProductDetailsParams =\n                QueryProductDetailsParams.newBuilder()\n                        .setProductList(\n                                ImmutableList.of(\n                                        QueryProductDetailsParams.Product.newBuilder()\n                                                .setProductId(&quot;version_sin_anuncios&quot;)\n                                                .setProductType(BillingClient.ProductType.SUBS)\n                                                .build()))\n                        .build();\n\n        Activity activity = getActivity();\n\n        billingClient.queryProductDetailsAsync(\n                queryProductDetailsParams,\n                new ProductDetailsResponseListener() {\n                    public void onProductDetailsResponse(BillingResult billingResult,\n                                                         List&lt;ProductDetails&gt; productDetailsList) {\n                        // check billingResult\n                        // process returned productDetailsList\n\n                        if(billingResult.getResponseCode() == BillingClient.BillingResponseCode.OK &amp;&amp; productDetailsList != null){\n                            TextView descripcion = view.findViewById(R.id.textViewSinAnuncios);\n                            descripcion.setText(productDetailsList.get(0).getDescription());\n\n                            Button BotonSinAnuncios = (Button) view.findViewById(R.id.buttonSinAnuncios);\n                            BotonSinAnuncios.setOnClickListener(new View.OnClickListener()\n                            {\n\n                                @Override\n                                public void onClick(View v)\n                                {\n                                    Log.d(&quot;GoogleBillingService&quot;, &quot;onBillingSetupFinished: billingResult: &quot; + billingResult);\n                                    Log.d(&quot;GoogleBillingService&quot;, &quot;Product detatils: &quot; + productDetailsList.get(0));\n\n                                    ImmutableList productDetailsParamsList =\n                                            ImmutableList.of(\n                                                    BillingFlowParams.ProductDetailsParams.newBuilder()\n                                                            // retrieve a value for &quot;productDetails&quot; by calling queryProductDetailsAsync()\n                                                            .setProductDetails(productDetailsList.get(0))\n                                                            // to get an offer token, call ProductDetails.getSubscriptionOfferDetails()\n                                                            // for a list of offers that are available to the user\n                                                            .setOfferToken(String.valueOf(productDetailsList.get(0).getSubscriptionOfferDetails()))\n                                                            .build()\n                                            );\n\n\n                                    BillingFlowParams billingFlowParams = BillingFlowParams.newBuilder()\n                                            .setProductDetailsParamsList(productDetailsParamsList)\n                                            .build();\n\n\n                                    // Launch the billing flow\n                                    billingClient.launchBillingFlow(activity, billingFlowParams);\n\n                                }\n                            });\n\n\n                        }\n                    }\n                }\n        );\n\n    }\n\n}\n</code></pre>\n"},{"tags":["java","postgresql","spring-boot","spring-data-jpa","ssl-certificate"],"comments":[{"owner":{"account_id":15064163,"reputation":13519,"user_id":10871900,"display_name":"dan1st is crying"},"score":0,"creation_date":1696696977,"post_id":77250606,"comment_id":136187845,"body_markdown":"Are you sure the files are exactly as they were generated? Check whether some line endings were changed or maybe something was appended (e.g. a newline at the end of a file).","body":"Are you sure the files are exactly as they were generated? Check whether some line endings were changed or maybe something was appended (e.g. a newline at the end of a file)."},{"owner":{"account_id":24193369,"reputation":53,"user_id":18152301,"display_name":"Alexender"},"score":0,"creation_date":1696697162,"post_id":77250606,"comment_id":136187863,"body_markdown":"I checked. I tried to connect to the database using IDEA and PgAdmin and everything worked out. I used exactly the same files","body":"I checked. I tried to connect to the database using IDEA and PgAdmin and everything worked out. I used exactly the same files"}],"owner":{"account_id":24193369,"reputation":53,"user_id":18152301,"display_name":"Alexender"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":201,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1696705033,"creation_date":1696695752,"question_id":77250606,"body_markdown":"I want to join the Postgresql database over ssl, I tried to place the certificate files both in the resources folder and in any other folder. \r\nI get this error java.io.IOException: extra data at the end. \r\n\r\nWhen I connect using IDEA or pgAdmin everything is successful.\r\n\r\nBut when programmatically an error appears\r\n\r\n\r\n```\r\norg.postgresql.util.PSQLException: Could not read SSL key file D:\\key\\externalAPI\\client-key.pem.\r\n\tat org.postgresql.ssl.LazyKeyManager.getPrivateKey(LazyKeyManager.java:284) ~[postgresql-42.3.4.jar:42.3.4]\r\n\tat java.base/sun.security.ssl.AbstractKeyManagerWrapper.getPrivateKey(SSLContextImpl.java:1696) ~[na:na]\r\n\tat java.base/sun.security.ssl.X509Authentication$X509PossessionGenerator.createClientPossession(X509Authentication.java:254) ~[na:na]\r\n\tat java.base/sun.security.ssl.X509Authentication$X509PossessionGenerator.createPossession(X509Authentication.java:209) ~[na:na]\r\n\tat java.base/sun.security.ssl.X509Authentication.createPossession(X509Authentication.java:93) ~[na:na]\r\n\tat java.base/sun.security.ssl.CertificateMessage$T13CertificateProducer.choosePossession(CertificateMessage.java:1081) ~[na:na]\r\n\tat java.base/sun.security.ssl.CertificateMessage$T13CertificateProducer.onProduceCertificate(CertificateMessage.java:1102) ~[na:na]\r\n\tat java.base/sun.security.ssl.CertificateMessage$T13CertificateProducer.produce(CertificateMessage.java:958) ~[na:na]\r\n\tat java.base/sun.security.ssl.SSLHandshake.produce(SSLHandshake.java:440) ~[na:na]\r\n\tat java.base/sun.security.ssl.Finished$T13FinishedConsumer.onConsumeFinished(Finished.java:1030) ~[na:na]\r\n\tat java.base/sun.security.ssl.Finished$T13FinishedConsumer.consume(Finished.java:893) ~[na:na]\r\n\tat java.base/sun.security.ssl.SSLHandshake.consume(SSLHandshake.java:396) ~[na:na]\r\n\tat java.base/sun.security.ssl.HandshakeContext.dispatch(HandshakeContext.java:480) ~[na:na]\r\n\tat java.base/sun.security.ssl.HandshakeContext.dispatch(HandshakeContext.java:458) ~[na:na]\r\n\tat java.base/sun.security.ssl.TransportContext.dispatch(TransportContext.java:201) ~[na:na]\r\n\tat java.base/sun.security.ssl.SSLTransport.decode(SSLTransport.java:172) ~[na:na]\r\n\tat java.base/sun.security.ssl.SSLSocketImpl.decode(SSLSocketImpl.java:1510) ~[na:na]\r\n\tat java.base/sun.security.ssl.SSLSocketImpl.readHandshakeRecord(SSLSocketImpl.java:1425) ~[na:na]\r\n\tat java.base/sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:455) ~[na:na]\r\n\tat java.base/sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:426) ~[na:na]\r\n\tat org.postgresql.ssl.MakeSSL.convert(MakeSSL.java:41) ~[postgresql-42.3.4.jar:42.3.4]\r\n\tat org.postgresql.core.v3.ConnectionFactoryImpl.enableSSL(ConnectionFactoryImpl.java:571) ~[postgresql-42.3.4.jar:42.3.4]\r\n\tat org.postgresql.core.v3.ConnectionFactoryImpl.tryConnect(ConnectionFactoryImpl.java:168) ~[postgresql-42.3.4.jar:42.3.4]\r\n\tat org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:235) ~[postgresql-42.3.4.jar:42.3.4]\r\n\tat org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:49) ~[postgresql-42.3.4.jar:42.3.4]\r\n\tat org.postgresql.jdbc.PgConnection.&lt;init&gt;(PgConnection.java:223) ~[postgresql-42.3.4.jar:42.3.4]\r\n\tat org.postgresql.Driver.makeConnection(Driver.java:402) ~[postgresql-42.3.4.jar:42.3.4]\r\n\tat org.postgresql.Driver.connect(Driver.java:261) ~[postgresql-42.3.4.jar:42.3.4]\r\n\tat com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:138) ~[HikariCP-4.0.3.jar:na]\r\n\tat com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:364) ~[HikariCP-4.0.3.jar:na]\r\n\tat com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:206) ~[HikariCP-4.0.3.jar:na]\r\n\tat com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:476) ~[HikariCP-4.0.3.jar:na]\r\n\tat com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:561) ~[HikariCP-4.0.3.jar:na]\r\n\tat com.zaxxer.hikari.pool.HikariPool.&lt;init&gt;(HikariPool.java:115) ~[HikariCP-4.0.3.jar:na]\r\n\tat com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:112) ~[HikariCP-4.0.3.jar:na]\r\n\tat org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:122) ~[hibernate-core-5.6.8.Final.jar:5.6.8.Final]\r\n\tat org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$ConnectionProviderJdbcConnectionAccess.obtainConnection(JdbcEnvironmentInitiator.java:181) ~[hibernate-core-5.6.8.Final.jar:5.6.8.Final]\r\n\tat org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.initiateService(JdbcEnvironmentInitiator.java:68) ~[hibernate-core-5.6.8.Final.jar:5.6.8.Final]\r\n\tat org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.initiateService(JdbcEnvironmentInitiator.java:35) ~[hibernate-core-5.6.8.Final.jar:5.6.8.Final]\r\n\tat org.hibernate.boot.registry.internal.StandardServiceRegistryImpl.initiateService(StandardServiceRegistryImpl.java:101) ~[hibernate-core-5.6.8.Final.jar:5.6.8.Final]\r\n\tat org.hibernate.service.internal.AbstractServiceRegistryImpl.createService(AbstractServiceRegistryImpl.java:263) ~[hibernate-core-5.6.8.Final.jar:5.6.8.Final]\r\n\tat org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:237) ~[hibernate-core-5.6.8.Final.jar:5.6.8.Final]\r\n\tat org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:214) ~[hibernate-core-5.6.8.Final.jar:5.6.8.Final]\r\n\tat org.hibernate.id.factory.internal.DefaultIdentifierGeneratorFactory.injectServices(DefaultIdentifierGeneratorFactory.java:175) ~[hibernate-core-5.6.8.Final.jar:5.6.8.Final]\r\n\tat org.hibernate.service.internal.AbstractServiceRegistryImpl.injectDependencies(AbstractServiceRegistryImpl.java:286) ~[hibernate-core-5.6.8.Final.jar:5.6.8.Final]\r\n\tat org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:243) ~[hibernate-core-5.6.8.Final.jar:5.6.8.Final]\r\n\tat org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:214) ~[hibernate-core-5.6.8.Final.jar:5.6.8.Final]\r\n\tat org.hibernate.boot.internal.InFlightMetadataCollectorImpl.&lt;init&gt;(InFlightMetadataCollectorImpl.java:173) ~[hibernate-core-5.6.8.Final.jar:5.6.8.Final]\r\n\tat org.hibernate.boot.model.process.spi.MetadataBuildingProcess.complete(MetadataBuildingProcess.java:127) ~[hibernate-core-5.6.8.Final.jar:5.6.8.Final]\r\n\tat org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.metadata(EntityManagerFactoryBuilderImpl.java:1460) ~[hibernate-core-5.6.8.Final.jar:5.6.8.Final]\r\n\tat org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1494) ~[hibernate-core-5.6.8.Final.jar:5.6.8.Final]\r\n\tat org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:58) ~[spring-orm-5.3.19.jar:5.3.19]\r\n\tat org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:365) ~[spring-orm-5.3.19.jar:5.3.19]\r\n\tat org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409) ~[spring-orm-5.3.19.jar:5.3.19]\r\n\tat org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396) ~[spring-orm-5.3.19.jar:5.3.19]\r\n\tat org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:341) ~[spring-orm-5.3.19.jar:5.3.19]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1863) ~[spring-beans-5.3.19.jar:5.3.19]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1800) ~[spring-beans-5.3.19.jar:5.3.19]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:620) ~[spring-beans-5.3.19.jar:5.3.19]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.19.jar:5.3.19]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.19.jar:5.3.19]\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.19.jar:5.3.19]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.19.jar:5.3.19]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.19.jar:5.3.19]\r\n\tat org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1154) ~[spring-context-5.3.19.jar:5.3.19]\r\n\tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:908) ~[spring-context-5.3.19.jar:5.3.19]\r\n\tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.19.jar:5.3.19]\r\n\tat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:145) ~[spring-boot-2.6.7.jar:2.6.7]\r\n\tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:740) ~[spring-boot-2.6.7.jar:2.6.7]\r\n\tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:415) ~[spring-boot-2.6.7.jar:2.6.7]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:303) ~[spring-boot-2.6.7.jar:2.6.7]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1312) ~[spring-boot-2.6.7.jar:2.6.7]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1301) ~[spring-boot-2.6.7.jar:2.6.7]\r\n\tat com.example.dbconnection.DbConnectionApplication.main(DbConnectionApplication.java:10) ~[classes/:na]\r\nCaused by: java.io.IOException: extra data at the end\r\n\tat java.base/sun.security.util.DerValue.&lt;init&gt;(DerValue.java:428) ~[na:na]\r\n\tat java.base/sun.security.util.DerValue.wrap(DerValue.java:330) ~[na:na]\r\n\tat java.base/sun.security.util.DerValue.wrap(DerValue.java:315) ~[na:na]\r\n\tat java.base/javax.crypto.EncryptedPrivateKeyInfo.&lt;init&gt;(EncryptedPrivateKeyInfo.java:87) ~[na:na]\r\n\tat org.postgresql.ssl.LazyKeyManager.getPrivateKey(LazyKeyManager.java:236) ~[postgresql-42.3.4.jar:42.3.4]\r\n\t... 73 common frames omitted\r\n```\r\n\r\napplication.yml settings\r\n\r\n```\r\nspring:\r\n  jpa:\r\n    properties:\r\n      hibernate:\r\n        dialect: org.hibernate.dialect.PostgreSQLDialect\r\n  datasource:\r\n    hikari.data-source-properties:\r\n      ssl: true\r\n      sslmode: verify-ca\r\n      sslcert: D:\\key\\externalAPI\\client-crt.pem\r\n      sslkey: D:\\key\\externalAPI\\client-key.pem\r\n      sslrootcert: D:\\key\\externalAPI\\db-cert.pem\r\n      sslpassword: 1111\r\n    url: jdbc:postgresql://00.000.00.0:5432/integration_db\r\n\r\n\r\n    username: integration_api\r\n    password: 1111\r\n    driver-class-name: org.postgresql.Driver\r\n```\r\n\r\n\r\nclient-key.pem looks like\r\n\r\n    -----BEGIN RSA PRIVATE KEY-----\r\n    MIIJKAIBAAKCAgEAsiwBwzEhd2DLxCRpIUEHeBscwU4UJ3ZMRd7zWNOiPJIA8z8X\r\n    Q9mKiUjnMGS02AQuPDevwSroeXYV7w/twi7VPZvc96yXjct858NDzq/3XOkcWPr+\r\n    ...\r\n    6fgph9GcCef4B7los0PfLJNbO+nLpgL9MG/TbMjlfi9FhiTik+jCi49JYq4=\r\n    -----END RSA PRIVATE KEY-----\r\n    \r\n\r\n\r\n\r\n\r\n\r\nI tried to place the files in the resources folder, but then the program could not find these files\r\nI tried to set the files via the connection url\r\n\r\n        url: jdbc:postgresql://00.000.00.0:5432/integration_db?ssl=true&amp;sslmode=verify-ca&amp;sslcert=D:\\key\\externalAPI\\client-crt.pem&amp;sslkey=D:\\key\\externalAPI\\client-key.pem&amp;sslrootcert=D:\\key\\externalAPI\\db-cert.pem\r\n\r\n\r\nbut it didn&#39;t work\r\n\r\nI try converting your PEM key to DER\r\nlike in\r\nhttps://github.com/dbeaver/dbeaver/issues/2859\r\n\r\nnow i get this exeption\r\n```\r\norg.postgresql.util.PSQLException: Could not read SSL key file D:\\key\\externalAPI2\\client-key.der.\r\n\tat org.postgresql.ssl.LazyKeyManager.getPrivateKey(LazyKeyManager.java:284) ~[postgresql-42.3.4.jar:42.3.4]\r\n\tat java.base/sun.security.ssl.AbstractKeyManagerWrapper.getPrivateKey(SSLContextImpl.java:1696) ~[na:na]\r\n\tat java.base/sun.security.ssl.X509Authentication$X509PossessionGenerator.createClientPossession(X509Authentication.java:254) ~[na:na]\r\n\tat java.base/sun.security.ssl.X509Authentication$X509PossessionGenerator.createPossession(X509Authentication.java:209) ~[na:na]\r\n\tat java.base/sun.security.ssl.X509Authentication.createPossession(X509Authentication.java:93) ~[na:na]\r\n\tat java.base/sun.security.ssl.CertificateMessage$T13CertificateProducer.choosePossession(CertificateMessage.java:1081) ~[na:na]\r\n\tat java.base/sun.security.ssl.CertificateMessage$T13CertificateProducer.onProduceCertificate(CertificateMessage.java:1102) ~[na:na]\r\n\tat java.base/sun.security.ssl.CertificateMessage$T13CertificateProducer.produce(CertificateMessage.java:958) ~[na:na]\r\n\tat java.base/sun.security.ssl.SSLHandshake.produce(SSLHandshake.java:440) ~[na:na]\r\n\tat java.base/sun.security.ssl.Finished$T13FinishedConsumer.onConsumeFinished(Finished.java:1030) ~[na:na]\r\n\tat java.base/sun.security.ssl.Finished$T13FinishedConsumer.consume(Finished.java:893) ~[na:na]\r\n\tat java.base/sun.security.ssl.SSLHandshake.consume(SSLHandshake.java:396) ~[na:na]\r\n\tat java.base/sun.security.ssl.HandshakeContext.dispatch(HandshakeContext.java:480) ~[na:na]\r\n\tat java.base/sun.security.ssl.HandshakeContext.dispatch(HandshakeContext.java:458) ~[na:na]\r\n\tat java.base/sun.security.ssl.TransportContext.dispatch(TransportContext.java:201) ~[na:na]\r\n\tat java.base/sun.security.ssl.SSLTransport.decode(SSLTransport.java:172) ~[na:na]\r\n\tat java.base/sun.security.ssl.SSLSocketImpl.decode(SSLSocketImpl.java:1510) ~[na:na]\r\n\tat java.base/sun.security.ssl.SSLSocketImpl.readHandshakeRecord(SSLSocketImpl.java:1425) ~[na:na]\r\n\tat java.base/sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:455) ~[na:na]\r\n\tat java.base/sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:426) ~[na:na]\r\n\tat org.postgresql.ssl.MakeSSL.convert(MakeSSL.java:41) ~[postgresql-42.3.4.jar:42.3.4]\r\n\tat org.postgresql.core.v3.ConnectionFactoryImpl.enableSSL(ConnectionFactoryImpl.java:571) ~[postgresql-42.3.4.jar:42.3.4]\r\n\tat org.postgresql.core.v3.ConnectionFactoryImpl.tryConnect(ConnectionFactoryImpl.java:168) ~[postgresql-42.3.4.jar:42.3.4]\r\n\tat org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:235) ~[postgresql-42.3.4.jar:42.3.4]\r\n\tat org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:49) ~[postgresql-42.3.4.jar:42.3.4]\r\n\tat org.postgresql.jdbc.PgConnection.&lt;init&gt;(PgConnection.java:223) ~[postgresql-42.3.4.jar:42.3.4]\r\n\tat org.postgresql.Driver.makeConnection(Driver.java:402) ~[postgresql-42.3.4.jar:42.3.4]\r\n\tat org.postgresql.Driver.connect(Driver.java:261) ~[postgresql-42.3.4.jar:42.3.4]\r\n\tat com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:138) ~[HikariCP-4.0.3.jar:na]\r\n\tat com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:364) ~[HikariCP-4.0.3.jar:na]\r\n\tat com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:206) ~[HikariCP-4.0.3.jar:na]\r\n\tat com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:476) ~[HikariCP-4.0.3.jar:na]\r\n\tat com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:561) ~[HikariCP-4.0.3.jar:na]\r\n\tat com.zaxxer.hikari.pool.HikariPool.&lt;init&gt;(HikariPool.java:115) ~[HikariCP-4.0.3.jar:na]\r\n\tat com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:112) ~[HikariCP-4.0.3.jar:na]\r\n\tat org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:122) ~[hibernate-core-5.6.8.Final.jar:5.6.8.Final]\r\n\tat org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$ConnectionProviderJdbcConnectionAccess.obtainConnection(JdbcEnvironmentInitiator.java:181) ~[hibernate-core-5.6.8.Final.jar:5.6.8.Final]\r\n\tat org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.initiateService(JdbcEnvironmentInitiator.java:68) ~[hibernate-core-5.6.8.Final.jar:5.6.8.Final]\r\n\tat org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.initiateService(JdbcEnvironmentInitiator.java:35) ~[hibernate-core-5.6.8.Final.jar:5.6.8.Final]\r\n\tat org.hibernate.boot.registry.internal.StandardServiceRegistryImpl.initiateService(StandardServiceRegistryImpl.java:101) ~[hibernate-core-5.6.8.Final.jar:5.6.8.Final]\r\n\tat org.hibernate.service.internal.AbstractServiceRegistryImpl.createService(AbstractServiceRegistryImpl.java:263) ~[hibernate-core-5.6.8.Final.jar:5.6.8.Final]\r\n\tat org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:237) ~[hibernate-core-5.6.8.Final.jar:5.6.8.Final]\r\n\tat org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:214) ~[hibernate-core-5.6.8.Final.jar:5.6.8.Final]\r\n\tat org.hibernate.id.factory.internal.DefaultIdentifierGeneratorFactory.injectServices(DefaultIdentifierGeneratorFactory.java:175) ~[hibernate-core-5.6.8.Final.jar:5.6.8.Final]\r\n\tat org.hibernate.service.internal.AbstractServiceRegistryImpl.injectDependencies(AbstractServiceRegistryImpl.java:286) ~[hibernate-core-5.6.8.Final.jar:5.6.8.Final]\r\n\tat org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:243) ~[hibernate-core-5.6.8.Final.jar:5.6.8.Final]\r\n\tat org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:214) ~[hibernate-core-5.6.8.Final.jar:5.6.8.Final]\r\n\tat org.hibernate.boot.internal.InFlightMetadataCollectorImpl.&lt;init&gt;(InFlightMetadataCollectorImpl.java:173) ~[hibernate-core-5.6.8.Final.jar:5.6.8.Final]\r\n\tat org.hibernate.boot.model.process.spi.MetadataBuildingProcess.complete(MetadataBuildingProcess.java:127) ~[hibernate-core-5.6.8.Final.jar:5.6.8.Final]\r\n\tat org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.metadata(EntityManagerFactoryBuilderImpl.java:1460) ~[hibernate-core-5.6.8.Final.jar:5.6.8.Final]\r\n\tat org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1494) ~[hibernate-core-5.6.8.Final.jar:5.6.8.Final]\r\n\tat org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:58) ~[spring-orm-5.3.19.jar:5.3.19]\r\n\tat org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:365) ~[spring-orm-5.3.19.jar:5.3.19]\r\n\tat org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409) ~[spring-orm-5.3.19.jar:5.3.19]\r\n\tat org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396) ~[spring-orm-5.3.19.jar:5.3.19]\r\n\tat org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:341) ~[spring-orm-5.3.19.jar:5.3.19]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1863) ~[spring-beans-5.3.19.jar:5.3.19]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1800) ~[spring-beans-5.3.19.jar:5.3.19]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:620) ~[spring-beans-5.3.19.jar:5.3.19]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.19.jar:5.3.19]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.19.jar:5.3.19]\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.19.jar:5.3.19]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.19.jar:5.3.19]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.19.jar:5.3.19]\r\n\tat org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1154) ~[spring-context-5.3.19.jar:5.3.19]\r\n\tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:908) ~[spring-context-5.3.19.jar:5.3.19]\r\n\tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.19.jar:5.3.19]\r\n\tat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:145) ~[spring-boot-2.6.7.jar:2.6.7]\r\n\tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:740) ~[spring-boot-2.6.7.jar:2.6.7]\r\n\tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:415) ~[spring-boot-2.6.7.jar:2.6.7]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:303) ~[spring-boot-2.6.7.jar:2.6.7]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1312) ~[spring-boot-2.6.7.jar:2.6.7]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1301) ~[spring-boot-2.6.7.jar:2.6.7]\r\n\tat com.example.dbconnection.DbConnectionApplication.main(DbConnectionApplication.java:10) ~[classes/:na]\r\nCaused by: java.io.IOException: overrun, bytes = 1824\r\n\tat java.base/javax.crypto.EncryptedPrivateKeyInfo.&lt;init&gt;(EncryptedPrivateKeyInfo.java:98) ~[na:na]\r\n\tat org.postgresql.ssl.LazyKeyManager.getPrivateKey(LazyKeyManager.java:236) ~[postgresql-42.3.4.jar:42.3.4]\r\n\t... 73 common frames omitted\r\n```\r\nI guess something is wrong with the client-key file\r\ni don&#39;t understand what","title":"Connecting Spring boot data to a database with ssl verify-ca","body":"<p>I want to join the Postgresql database over ssl, I tried to place the certificate files both in the resources folder and in any other folder.\nI get this error java.io.IOException: extra data at the end.</p>\n<p>When I connect using IDEA or pgAdmin everything is successful.</p>\n<p>But when programmatically an error appears</p>\n<pre><code>org.postgresql.util.PSQLException: Could not read SSL key file D:\\key\\externalAPI\\client-key.pem.\n    at org.postgresql.ssl.LazyKeyManager.getPrivateKey(LazyKeyManager.java:284) ~[postgresql-42.3.4.jar:42.3.4]\n    at java.base/sun.security.ssl.AbstractKeyManagerWrapper.getPrivateKey(SSLContextImpl.java:1696) ~[na:na]\n    at java.base/sun.security.ssl.X509Authentication$X509PossessionGenerator.createClientPossession(X509Authentication.java:254) ~[na:na]\n    at java.base/sun.security.ssl.X509Authentication$X509PossessionGenerator.createPossession(X509Authentication.java:209) ~[na:na]\n    at java.base/sun.security.ssl.X509Authentication.createPossession(X509Authentication.java:93) ~[na:na]\n    at java.base/sun.security.ssl.CertificateMessage$T13CertificateProducer.choosePossession(CertificateMessage.java:1081) ~[na:na]\n    at java.base/sun.security.ssl.CertificateMessage$T13CertificateProducer.onProduceCertificate(CertificateMessage.java:1102) ~[na:na]\n    at java.base/sun.security.ssl.CertificateMessage$T13CertificateProducer.produce(CertificateMessage.java:958) ~[na:na]\n    at java.base/sun.security.ssl.SSLHandshake.produce(SSLHandshake.java:440) ~[na:na]\n    at java.base/sun.security.ssl.Finished$T13FinishedConsumer.onConsumeFinished(Finished.java:1030) ~[na:na]\n    at java.base/sun.security.ssl.Finished$T13FinishedConsumer.consume(Finished.java:893) ~[na:na]\n    at java.base/sun.security.ssl.SSLHandshake.consume(SSLHandshake.java:396) ~[na:na]\n    at java.base/sun.security.ssl.HandshakeContext.dispatch(HandshakeContext.java:480) ~[na:na]\n    at java.base/sun.security.ssl.HandshakeContext.dispatch(HandshakeContext.java:458) ~[na:na]\n    at java.base/sun.security.ssl.TransportContext.dispatch(TransportContext.java:201) ~[na:na]\n    at java.base/sun.security.ssl.SSLTransport.decode(SSLTransport.java:172) ~[na:na]\n    at java.base/sun.security.ssl.SSLSocketImpl.decode(SSLSocketImpl.java:1510) ~[na:na]\n    at java.base/sun.security.ssl.SSLSocketImpl.readHandshakeRecord(SSLSocketImpl.java:1425) ~[na:na]\n    at java.base/sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:455) ~[na:na]\n    at java.base/sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:426) ~[na:na]\n    at org.postgresql.ssl.MakeSSL.convert(MakeSSL.java:41) ~[postgresql-42.3.4.jar:42.3.4]\n    at org.postgresql.core.v3.ConnectionFactoryImpl.enableSSL(ConnectionFactoryImpl.java:571) ~[postgresql-42.3.4.jar:42.3.4]\n    at org.postgresql.core.v3.ConnectionFactoryImpl.tryConnect(ConnectionFactoryImpl.java:168) ~[postgresql-42.3.4.jar:42.3.4]\n    at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:235) ~[postgresql-42.3.4.jar:42.3.4]\n    at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:49) ~[postgresql-42.3.4.jar:42.3.4]\n    at org.postgresql.jdbc.PgConnection.&lt;init&gt;(PgConnection.java:223) ~[postgresql-42.3.4.jar:42.3.4]\n    at org.postgresql.Driver.makeConnection(Driver.java:402) ~[postgresql-42.3.4.jar:42.3.4]\n    at org.postgresql.Driver.connect(Driver.java:261) ~[postgresql-42.3.4.jar:42.3.4]\n    at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:138) ~[HikariCP-4.0.3.jar:na]\n    at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:364) ~[HikariCP-4.0.3.jar:na]\n    at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:206) ~[HikariCP-4.0.3.jar:na]\n    at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:476) ~[HikariCP-4.0.3.jar:na]\n    at com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:561) ~[HikariCP-4.0.3.jar:na]\n    at com.zaxxer.hikari.pool.HikariPool.&lt;init&gt;(HikariPool.java:115) ~[HikariCP-4.0.3.jar:na]\n    at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:112) ~[HikariCP-4.0.3.jar:na]\n    at org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:122) ~[hibernate-core-5.6.8.Final.jar:5.6.8.Final]\n    at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$ConnectionProviderJdbcConnectionAccess.obtainConnection(JdbcEnvironmentInitiator.java:181) ~[hibernate-core-5.6.8.Final.jar:5.6.8.Final]\n    at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.initiateService(JdbcEnvironmentInitiator.java:68) ~[hibernate-core-5.6.8.Final.jar:5.6.8.Final]\n    at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.initiateService(JdbcEnvironmentInitiator.java:35) ~[hibernate-core-5.6.8.Final.jar:5.6.8.Final]\n    at org.hibernate.boot.registry.internal.StandardServiceRegistryImpl.initiateService(StandardServiceRegistryImpl.java:101) ~[hibernate-core-5.6.8.Final.jar:5.6.8.Final]\n    at org.hibernate.service.internal.AbstractServiceRegistryImpl.createService(AbstractServiceRegistryImpl.java:263) ~[hibernate-core-5.6.8.Final.jar:5.6.8.Final]\n    at org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:237) ~[hibernate-core-5.6.8.Final.jar:5.6.8.Final]\n    at org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:214) ~[hibernate-core-5.6.8.Final.jar:5.6.8.Final]\n    at org.hibernate.id.factory.internal.DefaultIdentifierGeneratorFactory.injectServices(DefaultIdentifierGeneratorFactory.java:175) ~[hibernate-core-5.6.8.Final.jar:5.6.8.Final]\n    at org.hibernate.service.internal.AbstractServiceRegistryImpl.injectDependencies(AbstractServiceRegistryImpl.java:286) ~[hibernate-core-5.6.8.Final.jar:5.6.8.Final]\n    at org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:243) ~[hibernate-core-5.6.8.Final.jar:5.6.8.Final]\n    at org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:214) ~[hibernate-core-5.6.8.Final.jar:5.6.8.Final]\n    at org.hibernate.boot.internal.InFlightMetadataCollectorImpl.&lt;init&gt;(InFlightMetadataCollectorImpl.java:173) ~[hibernate-core-5.6.8.Final.jar:5.6.8.Final]\n    at org.hibernate.boot.model.process.spi.MetadataBuildingProcess.complete(MetadataBuildingProcess.java:127) ~[hibernate-core-5.6.8.Final.jar:5.6.8.Final]\n    at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.metadata(EntityManagerFactoryBuilderImpl.java:1460) ~[hibernate-core-5.6.8.Final.jar:5.6.8.Final]\n    at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1494) ~[hibernate-core-5.6.8.Final.jar:5.6.8.Final]\n    at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:58) ~[spring-orm-5.3.19.jar:5.3.19]\n    at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:365) ~[spring-orm-5.3.19.jar:5.3.19]\n    at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409) ~[spring-orm-5.3.19.jar:5.3.19]\n    at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396) ~[spring-orm-5.3.19.jar:5.3.19]\n    at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:341) ~[spring-orm-5.3.19.jar:5.3.19]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1863) ~[spring-beans-5.3.19.jar:5.3.19]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1800) ~[spring-beans-5.3.19.jar:5.3.19]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:620) ~[spring-beans-5.3.19.jar:5.3.19]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.19.jar:5.3.19]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.19.jar:5.3.19]\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.19.jar:5.3.19]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.19.jar:5.3.19]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.19.jar:5.3.19]\n    at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1154) ~[spring-context-5.3.19.jar:5.3.19]\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:908) ~[spring-context-5.3.19.jar:5.3.19]\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.19.jar:5.3.19]\n    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:145) ~[spring-boot-2.6.7.jar:2.6.7]\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:740) ~[spring-boot-2.6.7.jar:2.6.7]\n    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:415) ~[spring-boot-2.6.7.jar:2.6.7]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:303) ~[spring-boot-2.6.7.jar:2.6.7]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1312) ~[spring-boot-2.6.7.jar:2.6.7]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1301) ~[spring-boot-2.6.7.jar:2.6.7]\n    at com.example.dbconnection.DbConnectionApplication.main(DbConnectionApplication.java:10) ~[classes/:na]\nCaused by: java.io.IOException: extra data at the end\n    at java.base/sun.security.util.DerValue.&lt;init&gt;(DerValue.java:428) ~[na:na]\n    at java.base/sun.security.util.DerValue.wrap(DerValue.java:330) ~[na:na]\n    at java.base/sun.security.util.DerValue.wrap(DerValue.java:315) ~[na:na]\n    at java.base/javax.crypto.EncryptedPrivateKeyInfo.&lt;init&gt;(EncryptedPrivateKeyInfo.java:87) ~[na:na]\n    at org.postgresql.ssl.LazyKeyManager.getPrivateKey(LazyKeyManager.java:236) ~[postgresql-42.3.4.jar:42.3.4]\n    ... 73 common frames omitted\n</code></pre>\n<p>application.yml settings</p>\n<pre><code>spring:\n  jpa:\n    properties:\n      hibernate:\n        dialect: org.hibernate.dialect.PostgreSQLDialect\n  datasource:\n    hikari.data-source-properties:\n      ssl: true\n      sslmode: verify-ca\n      sslcert: D:\\key\\externalAPI\\client-crt.pem\n      sslkey: D:\\key\\externalAPI\\client-key.pem\n      sslrootcert: D:\\key\\externalAPI\\db-cert.pem\n      sslpassword: 1111\n    url: jdbc:postgresql://00.000.00.0:5432/integration_db\n\n\n    username: integration_api\n    password: 1111\n    driver-class-name: org.postgresql.Driver\n</code></pre>\n<p>client-key.pem looks like</p>\n<pre><code>-----BEGIN RSA PRIVATE KEY-----\nMIIJKAIBAAKCAgEAsiwBwzEhd2DLxCRpIUEHeBscwU4UJ3ZMRd7zWNOiPJIA8z8X\nQ9mKiUjnMGS02AQuPDevwSroeXYV7w/twi7VPZvc96yXjct858NDzq/3XOkcWPr+\n...\n6fgph9GcCef4B7los0PfLJNbO+nLpgL9MG/TbMjlfi9FhiTik+jCi49JYq4=\n-----END RSA PRIVATE KEY-----\n</code></pre>\n<p>I tried to place the files in the resources folder, but then the program could not find these files\nI tried to set the files via the connection url</p>\n<pre><code>    url: jdbc:postgresql://00.000.00.0:5432/integration_db?ssl=true&amp;sslmode=verify-ca&amp;sslcert=D:\\key\\externalAPI\\client-crt.pem&amp;sslkey=D:\\key\\externalAPI\\client-key.pem&amp;sslrootcert=D:\\key\\externalAPI\\db-cert.pem\n</code></pre>\n<p>but it didn't work</p>\n<p>I try converting your PEM key to DER\nlike in\n<a href=\"https://github.com/dbeaver/dbeaver/issues/2859\" rel=\"nofollow noreferrer\">https://github.com/dbeaver/dbeaver/issues/2859</a></p>\n<p>now i get this exeption</p>\n<pre><code>org.postgresql.util.PSQLException: Could not read SSL key file D:\\key\\externalAPI2\\client-key.der.\n    at org.postgresql.ssl.LazyKeyManager.getPrivateKey(LazyKeyManager.java:284) ~[postgresql-42.3.4.jar:42.3.4]\n    at java.base/sun.security.ssl.AbstractKeyManagerWrapper.getPrivateKey(SSLContextImpl.java:1696) ~[na:na]\n    at java.base/sun.security.ssl.X509Authentication$X509PossessionGenerator.createClientPossession(X509Authentication.java:254) ~[na:na]\n    at java.base/sun.security.ssl.X509Authentication$X509PossessionGenerator.createPossession(X509Authentication.java:209) ~[na:na]\n    at java.base/sun.security.ssl.X509Authentication.createPossession(X509Authentication.java:93) ~[na:na]\n    at java.base/sun.security.ssl.CertificateMessage$T13CertificateProducer.choosePossession(CertificateMessage.java:1081) ~[na:na]\n    at java.base/sun.security.ssl.CertificateMessage$T13CertificateProducer.onProduceCertificate(CertificateMessage.java:1102) ~[na:na]\n    at java.base/sun.security.ssl.CertificateMessage$T13CertificateProducer.produce(CertificateMessage.java:958) ~[na:na]\n    at java.base/sun.security.ssl.SSLHandshake.produce(SSLHandshake.java:440) ~[na:na]\n    at java.base/sun.security.ssl.Finished$T13FinishedConsumer.onConsumeFinished(Finished.java:1030) ~[na:na]\n    at java.base/sun.security.ssl.Finished$T13FinishedConsumer.consume(Finished.java:893) ~[na:na]\n    at java.base/sun.security.ssl.SSLHandshake.consume(SSLHandshake.java:396) ~[na:na]\n    at java.base/sun.security.ssl.HandshakeContext.dispatch(HandshakeContext.java:480) ~[na:na]\n    at java.base/sun.security.ssl.HandshakeContext.dispatch(HandshakeContext.java:458) ~[na:na]\n    at java.base/sun.security.ssl.TransportContext.dispatch(TransportContext.java:201) ~[na:na]\n    at java.base/sun.security.ssl.SSLTransport.decode(SSLTransport.java:172) ~[na:na]\n    at java.base/sun.security.ssl.SSLSocketImpl.decode(SSLSocketImpl.java:1510) ~[na:na]\n    at java.base/sun.security.ssl.SSLSocketImpl.readHandshakeRecord(SSLSocketImpl.java:1425) ~[na:na]\n    at java.base/sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:455) ~[na:na]\n    at java.base/sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:426) ~[na:na]\n    at org.postgresql.ssl.MakeSSL.convert(MakeSSL.java:41) ~[postgresql-42.3.4.jar:42.3.4]\n    at org.postgresql.core.v3.ConnectionFactoryImpl.enableSSL(ConnectionFactoryImpl.java:571) ~[postgresql-42.3.4.jar:42.3.4]\n    at org.postgresql.core.v3.ConnectionFactoryImpl.tryConnect(ConnectionFactoryImpl.java:168) ~[postgresql-42.3.4.jar:42.3.4]\n    at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:235) ~[postgresql-42.3.4.jar:42.3.4]\n    at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:49) ~[postgresql-42.3.4.jar:42.3.4]\n    at org.postgresql.jdbc.PgConnection.&lt;init&gt;(PgConnection.java:223) ~[postgresql-42.3.4.jar:42.3.4]\n    at org.postgresql.Driver.makeConnection(Driver.java:402) ~[postgresql-42.3.4.jar:42.3.4]\n    at org.postgresql.Driver.connect(Driver.java:261) ~[postgresql-42.3.4.jar:42.3.4]\n    at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:138) ~[HikariCP-4.0.3.jar:na]\n    at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:364) ~[HikariCP-4.0.3.jar:na]\n    at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:206) ~[HikariCP-4.0.3.jar:na]\n    at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:476) ~[HikariCP-4.0.3.jar:na]\n    at com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:561) ~[HikariCP-4.0.3.jar:na]\n    at com.zaxxer.hikari.pool.HikariPool.&lt;init&gt;(HikariPool.java:115) ~[HikariCP-4.0.3.jar:na]\n    at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:112) ~[HikariCP-4.0.3.jar:na]\n    at org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:122) ~[hibernate-core-5.6.8.Final.jar:5.6.8.Final]\n    at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$ConnectionProviderJdbcConnectionAccess.obtainConnection(JdbcEnvironmentInitiator.java:181) ~[hibernate-core-5.6.8.Final.jar:5.6.8.Final]\n    at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.initiateService(JdbcEnvironmentInitiator.java:68) ~[hibernate-core-5.6.8.Final.jar:5.6.8.Final]\n    at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.initiateService(JdbcEnvironmentInitiator.java:35) ~[hibernate-core-5.6.8.Final.jar:5.6.8.Final]\n    at org.hibernate.boot.registry.internal.StandardServiceRegistryImpl.initiateService(StandardServiceRegistryImpl.java:101) ~[hibernate-core-5.6.8.Final.jar:5.6.8.Final]\n    at org.hibernate.service.internal.AbstractServiceRegistryImpl.createService(AbstractServiceRegistryImpl.java:263) ~[hibernate-core-5.6.8.Final.jar:5.6.8.Final]\n    at org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:237) ~[hibernate-core-5.6.8.Final.jar:5.6.8.Final]\n    at org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:214) ~[hibernate-core-5.6.8.Final.jar:5.6.8.Final]\n    at org.hibernate.id.factory.internal.DefaultIdentifierGeneratorFactory.injectServices(DefaultIdentifierGeneratorFactory.java:175) ~[hibernate-core-5.6.8.Final.jar:5.6.8.Final]\n    at org.hibernate.service.internal.AbstractServiceRegistryImpl.injectDependencies(AbstractServiceRegistryImpl.java:286) ~[hibernate-core-5.6.8.Final.jar:5.6.8.Final]\n    at org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:243) ~[hibernate-core-5.6.8.Final.jar:5.6.8.Final]\n    at org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:214) ~[hibernate-core-5.6.8.Final.jar:5.6.8.Final]\n    at org.hibernate.boot.internal.InFlightMetadataCollectorImpl.&lt;init&gt;(InFlightMetadataCollectorImpl.java:173) ~[hibernate-core-5.6.8.Final.jar:5.6.8.Final]\n    at org.hibernate.boot.model.process.spi.MetadataBuildingProcess.complete(MetadataBuildingProcess.java:127) ~[hibernate-core-5.6.8.Final.jar:5.6.8.Final]\n    at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.metadata(EntityManagerFactoryBuilderImpl.java:1460) ~[hibernate-core-5.6.8.Final.jar:5.6.8.Final]\n    at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1494) ~[hibernate-core-5.6.8.Final.jar:5.6.8.Final]\n    at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:58) ~[spring-orm-5.3.19.jar:5.3.19]\n    at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:365) ~[spring-orm-5.3.19.jar:5.3.19]\n    at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409) ~[spring-orm-5.3.19.jar:5.3.19]\n    at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396) ~[spring-orm-5.3.19.jar:5.3.19]\n    at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:341) ~[spring-orm-5.3.19.jar:5.3.19]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1863) ~[spring-beans-5.3.19.jar:5.3.19]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1800) ~[spring-beans-5.3.19.jar:5.3.19]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:620) ~[spring-beans-5.3.19.jar:5.3.19]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.19.jar:5.3.19]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.19.jar:5.3.19]\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.19.jar:5.3.19]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.19.jar:5.3.19]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.19.jar:5.3.19]\n    at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1154) ~[spring-context-5.3.19.jar:5.3.19]\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:908) ~[spring-context-5.3.19.jar:5.3.19]\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.19.jar:5.3.19]\n    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:145) ~[spring-boot-2.6.7.jar:2.6.7]\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:740) ~[spring-boot-2.6.7.jar:2.6.7]\n    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:415) ~[spring-boot-2.6.7.jar:2.6.7]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:303) ~[spring-boot-2.6.7.jar:2.6.7]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1312) ~[spring-boot-2.6.7.jar:2.6.7]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1301) ~[spring-boot-2.6.7.jar:2.6.7]\n    at com.example.dbconnection.DbConnectionApplication.main(DbConnectionApplication.java:10) ~[classes/:na]\nCaused by: java.io.IOException: overrun, bytes = 1824\n    at java.base/javax.crypto.EncryptedPrivateKeyInfo.&lt;init&gt;(EncryptedPrivateKeyInfo.java:98) ~[na:na]\n    at org.postgresql.ssl.LazyKeyManager.getPrivateKey(LazyKeyManager.java:236) ~[postgresql-42.3.4.jar:42.3.4]\n    ... 73 common frames omitted\n</code></pre>\n<p>I guess something is wrong with the client-key file\ni don't understand what</p>\n"},{"tags":["java","selenium","firefox","geckodriver","webdriverwait"],"answers":[{"tags":[],"owner":{"account_id":10049107,"reputation":186627,"user_id":7429447,"accept_rate":86,"display_name":"undetected Selenium"},"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1578172715,"creation_date":1497006050,"answer_id":44456085,"question_id":44455269,"body_markdown":"Here is the working code block to login into your Gmail account through a valid set of credentials-\r\n\r\n    \t\r\n\r\n    System.setProperty(&quot;webdriver.gecko.driver&quot;,&quot;C:\\\\your_directory\\\\geckodriver.exe&quot;);\r\n\tWebDriver driver = new FirefoxDriver();\r\n    driver.manage().window().maximize();\r\n    String url = &quot;https://accounts.google.com/signin&quot;;\r\n    driver.get(url);\r\n    driver.manage().timeouts().implicitlyWait(10, TimeUnit.SECONDS); \r\n    WebElement email_phone = driver.findElement(By.xpath(&quot;//input[@id=&#39;identifierId&#39;]&quot;));\r\n    email_phone.sendKeys(&quot;your_email_phone&quot;);\r\n    driver.findElement(By.id(&quot;identifierNext&quot;)).click();\r\n    WebElement password = driver.findElement(By.xpath(&quot;//input[@name=&#39;password&#39;]&quot;));\r\n    WebDriverWait wait = new WebDriverWait(driver, 20);\r\n    wait.until(ExpectedConditions.elementToBeClickable(password));\r\n    password.sendKeys(&quot;your_password&quot;);\r\n    driver.findElement(By.id(&quot;passwordNext&quot;)).click();\r\n\r\n\r\n----------\r\n\r\n\r\nUpdate(5-Jan-2020)\r\n------------------\r\nOptimizing the above code block and adding a couple of arguments you can use:\r\n\r\n    public class browserAppDemo \r\n    {\r\n        public static void main(String[] args) throws Exception \r\n        {\r\n            System.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;C:\\\\Utility\\\\BrowserDrivers\\\\chromedriver.exe&quot;);\r\n            ChromeOptions options = new ChromeOptions();\r\n            options.addArguments(&quot;start-maximized&quot;);\r\n            options.setExperimentalOption(&quot;useAutomationExtension&quot;, false);\r\n            options.setExperimentalOption(&quot;excludeSwitches&quot;, Collections.singletonList(&quot;enable-automation&quot;));\r\n            WebDriver driver =  new ChromeDriver(options); \r\n            driver.get(&quot;https://accounts.google.com/signin&quot;)\r\n            new WebDriverWait(driver, 10).until(ExpectedConditions.elementToBeClickable(By.xpath(&quot;//input[@id=&#39;identifierId&#39;]&quot;))).sendKeys(&quot;emailID&quot;);\r\n            driver.findElement(By.id(&quot;identifierNext&quot;)).click();\r\n            new WebDriverWait(driver, 10).until(ExpectedConditions.elementToBeClickable(By.xpath(&quot;//input[@name=&#39;password&#39;]&quot;))).sendKeys(&quot;password&quot;);\r\n            driver.findElement(By.id(&quot;passwordNext&quot;)).click();\r\n        }\r\n    }","title":"Gmail login using selenium webdriver in java","body":"<p>Here is the working code block to login into your Gmail account through a valid set of credentials-</p>\n\n<pre><code>System.setProperty(\"webdriver.gecko.driver\",\"C:\\\\your_directory\\\\geckodriver.exe\");\nWebDriver driver = new FirefoxDriver();\ndriver.manage().window().maximize();\nString url = \"https://accounts.google.com/signin\";\ndriver.get(url);\ndriver.manage().timeouts().implicitlyWait(10, TimeUnit.SECONDS); \nWebElement email_phone = driver.findElement(By.xpath(\"//input[@id='identifierId']\"));\nemail_phone.sendKeys(\"your_email_phone\");\ndriver.findElement(By.id(\"identifierNext\")).click();\nWebElement password = driver.findElement(By.xpath(\"//input[@name='password']\"));\nWebDriverWait wait = new WebDriverWait(driver, 20);\nwait.until(ExpectedConditions.elementToBeClickable(password));\npassword.sendKeys(\"your_password\");\ndriver.findElement(By.id(\"passwordNext\")).click();\n</code></pre>\n\n<hr>\n\n<h2>Update(5-Jan-2020)</h2>\n\n<p>Optimizing the above code block and adding a couple of arguments you can use:</p>\n\n<pre><code>public class browserAppDemo \n{\n    public static void main(String[] args) throws Exception \n    {\n        System.setProperty(\"webdriver.chrome.driver\", \"C:\\\\Utility\\\\BrowserDrivers\\\\chromedriver.exe\");\n        ChromeOptions options = new ChromeOptions();\n        options.addArguments(\"start-maximized\");\n        options.setExperimentalOption(\"useAutomationExtension\", false);\n        options.setExperimentalOption(\"excludeSwitches\", Collections.singletonList(\"enable-automation\"));\n        WebDriver driver =  new ChromeDriver(options); \n        driver.get(\"https://accounts.google.com/signin\")\n        new WebDriverWait(driver, 10).until(ExpectedConditions.elementToBeClickable(By.xpath(\"//input[@id='identifierId']\"))).sendKeys(\"emailID\");\n        driver.findElement(By.id(\"identifierNext\")).click();\n        new WebDriverWait(driver, 10).until(ExpectedConditions.elementToBeClickable(By.xpath(\"//input[@name='password']\"))).sendKeys(\"password\");\n        driver.findElement(By.id(\"passwordNext\")).click();\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":11081233,"reputation":67,"user_id":8136364,"display_name":"chandan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":54655,"favorite_count":0,"down_vote_count":6,"up_vote_count":7,"answer_count":1,"score":1,"last_activity_date":1696704644,"creation_date":1497003612,"question_id":44455269,"body_markdown":"    import java.util.concurrent.TimeUnit;\r\n    import org.openqa.selenium.By;\r\n    import org.openqa.selenium.WebDriver;\r\n    import org.openqa.selenium.WebElement;\r\n    import org.openqa.selenium.firefox.FirefoxDriver;\r\n    import org.openqa.selenium.support.ui.ExpectedConditions;\r\n    import org.openqa.selenium.support.ui.WebDriverWait;\r\n    public class NewGmail {\r\n        public static void main(String[] args) {\r\n                WebDriver driver = new FirefoxDriver();\r\n                driver.manage().window().maximize();\r\n                String url = &quot;https://accounts.google.com/signin&quot;;\r\n                driver.get(url);\r\n                driver.findElement(By.id(&quot;identifierId&quot;)).sendKeys(&quot;cp8805&quot;); \r\n                //driver.manage().timeouts().implicitlyWait(20, TimeUnit.SECONDS); \t\t\r\n                WebDriverWait wait=new WebDriverWait(driver, 20); \t\t \t\t\r\n                driver.findElement(By.xpath(&quot;//span[@class=&#39;RveJvd snByac&#39;]&quot;)).click();  \t\t\r\n                driver.manage().timeouts().implicitlyWait(40, TimeUnit.SECONDS);   \t\t\r\n                driver.findElement(By.xpath(&quot;//input[@class=&#39;whsOnd zHQkBf&#39;]&quot;)).sendKeys(&quot;xxxxxx&quot;);      \t\t\r\n                driver.findElement(By.xpath(&quot;//span[@class=&#39;RveJvd snByac&#39;]&quot;)).click(); \r\n   \t    }  \r\n    }\r\n\r\n   after mail id my password also get written in the id box option &amp; the server redirect to to next password page. i want to ask what i will do so that my password would be entered only in password page.","title":"Gmail login using selenium webdriver in java","body":"<pre><code>import java.util.concurrent.TimeUnit;\nimport org.openqa.selenium.By;\nimport org.openqa.selenium.WebDriver;\nimport org.openqa.selenium.WebElement;\nimport org.openqa.selenium.firefox.FirefoxDriver;\nimport org.openqa.selenium.support.ui.ExpectedConditions;\nimport org.openqa.selenium.support.ui.WebDriverWait;\npublic class NewGmail {\n    public static void main(String[] args) {\n            WebDriver driver = new FirefoxDriver();\n            driver.manage().window().maximize();\n            String url = \"https://accounts.google.com/signin\";\n            driver.get(url);\n            driver.findElement(By.id(\"identifierId\")).sendKeys(\"cp8805\"); \n            //driver.manage().timeouts().implicitlyWait(20, TimeUnit.SECONDS);      \n            WebDriverWait wait=new WebDriverWait(driver, 20);               \n            driver.findElement(By.xpath(\"//span[@class='RveJvd snByac']\")).click();         \n            driver.manage().timeouts().implicitlyWait(40, TimeUnit.SECONDS);        \n            driver.findElement(By.xpath(\"//input[@class='whsOnd zHQkBf']\")).sendKeys(\"xxxxxx\");             \n            driver.findElement(By.xpath(\"//span[@class='RveJvd snByac']\")).click(); \n    }  \n}\n</code></pre>\n\n<p>after mail id my password also get written in the id box option &amp; the server redirect to to next password page. i want to ask what i will do so that my password would be entered only in password page.</p>\n"},{"tags":["java","visual-studio","gradle"],"comments":[{"owner":{"account_id":1535561,"reputation":7664,"user_id":1431720,"accept_rate":89,"display_name":"Robert"},"score":0,"creation_date":1696716226,"post_id":77251055,"comment_id":136189554,"body_markdown":"Try running gradle in a terminal, e.g., `gradlew assemblex86Debug`. Or check if VS Code can show you the Gradle output. It should print error messages. Quick guesses: your code isn&#39;t in the right folder, or you didn&#39;t put the dependencies in the build script. If that doesn&#39;t fix it, [edit] your question and add your `build.gradle`. Be more specific about what you mean by &quot;it didn&#39;t work&quot;. What exactly did you do, and what happened? See [ask].","body":"Try running gradle in a terminal, e.g., <code>gradlew assemblex86Debug</code>. Or check if VS Code can show you the Gradle output. It should print error messages. Quick guesses: your code isn&#39;t in the right folder, or you didn&#39;t put the dependencies in the build script. If that doesn&#39;t fix it, <a href=\"https://stackoverflow.com/posts/77251055/edit\">edit</a> your question and add your <code>build.gradle</code>. Be more specific about what you mean by &quot;it didn&#39;t work&quot;. What exactly did you do, and what happened? See <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>."},{"owner":{"account_id":29621399,"reputation":1,"user_id":22702286,"display_name":"Gospik"},"score":0,"creation_date":1696802261,"post_id":77251055,"comment_id":136196286,"body_markdown":"I will try that. Thanks for the reply","body":"I will try that. Thanks for the reply"}],"owner":{"account_id":29621399,"reputation":1,"user_id":22702286,"display_name":"Gospik"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1696703960,"creation_date":1696703960,"question_id":77251055,"body_markdown":"I am a beginner programmer. Recently I wanted to program an android app on Visual Studio. I created a project in Basic Application (Android,Gradle). I tried to run the program **without** even writing any code but it seems it gives me this stupid error   \r\n\r\n```\r\n\tMSB3073\tThe command &quot;gradlew.bat -p &quot;C:\\Users\\burak\\source\\repos\\firstandroidapp\\firstandroidapp\\app&quot;  assemblex86Debug&quot; exited with code 1.\t\r\n\r\n```\r\nThis is the error line\r\n\r\n```\r\n    &lt;Exec Command=&quot;%(GradlePackage.ToolName) $(GradleParameters)&quot; WorkingDirectory=&quot;$(WorkingDirectory)&quot;/&gt;\r\n\r\n```\r\n\r\n\r\nAnd the Java file is ok.\r\n\r\n```\r\n\r\npackage com.firstandroidapp;\r\n\r\nimport android.app.Activity;\r\nimport android.widget.TextView;\r\nimport android.os.Bundle;\r\n\r\npublic class firstandroidapp extends Activity\r\n{\r\n    /** Called when the activity is first created. */\r\n    @Override\r\n    public void onCreate(Bundle savedInstanceState)\r\n    {\r\n        super.onCreate(savedInstanceState);\r\n\r\n        /* Create a TextView and set its text to &quot;Hello world&quot; */\r\n        TextView  tv = new TextView(this);\r\n        tv.setText(&quot;Hello World!&quot;);\r\n        setContentView(tv);\r\n    }\r\n}\r\n\r\n```\r\n\r\n\r\nI am looking forward for your replies bcs I&#39;m about to lose my mind here.\r\n\r\nI tried installing Gradle, and set up the path, but it didn&#39;t work. I tried reinstalling visual studio but nothing again.","title":"Error in running mobile app code in Visual Studio","body":"<p>I am a beginner programmer. Recently I wanted to program an android app on Visual Studio. I created a project in Basic Application (Android,Gradle). I tried to run the program <strong>without</strong> even writing any code but it seems it gives me this stupid error</p>\n<pre><code>    MSB3073 The command &quot;gradlew.bat -p &quot;C:\\Users\\burak\\source\\repos\\firstandroidapp\\firstandroidapp\\app&quot;  assemblex86Debug&quot; exited with code 1.    \n\n</code></pre>\n<p>This is the error line</p>\n<pre><code>    &lt;Exec Command=&quot;%(GradlePackage.ToolName) $(GradleParameters)&quot; WorkingDirectory=&quot;$(WorkingDirectory)&quot;/&gt;\n\n</code></pre>\n<p>And the Java file is ok.</p>\n<pre><code>\npackage com.firstandroidapp;\n\nimport android.app.Activity;\nimport android.widget.TextView;\nimport android.os.Bundle;\n\npublic class firstandroidapp extends Activity\n{\n    /** Called when the activity is first created. */\n    @Override\n    public void onCreate(Bundle savedInstanceState)\n    {\n        super.onCreate(savedInstanceState);\n\n        /* Create a TextView and set its text to &quot;Hello world&quot; */\n        TextView  tv = new TextView(this);\n        tv.setText(&quot;Hello World!&quot;);\n        setContentView(tv);\n    }\n}\n\n</code></pre>\n<p>I am looking forward for your replies bcs I'm about to lose my mind here.</p>\n<p>I tried installing Gradle, and set up the path, but it didn't work. I tried reinstalling visual studio but nothing again.</p>\n"},{"tags":["java","struts2","simpledateformat","struts-tags"],"comments":[{"owner":{"account_id":1820003,"reputation":49625,"user_id":1654265,"accept_rate":93,"display_name":"Andrea Ligios"},"score":1,"creation_date":1489139022,"post_id":42715037,"comment_id":72550515,"body_markdown":"`&lt;s:property value=&quot;%{(new java.text.SimpleDateFormat().format())}&quot;&gt;` ?","body":"<code>&lt;s:property value=&quot;%{(new java.text.SimpleDateFormat().format())}&quot;&gt;</code> ?"},{"owner":{"account_id":698222,"reputation":50202,"user_id":573032,"accept_rate":77,"display_name":"Roman C"},"score":0,"creation_date":1489143641,"post_id":42715037,"comment_id":72553482,"body_markdown":"you have a syntax error in OGNL expression","body":"you have a syntax error in OGNL expression"},{"owner":{"account_id":1879878,"reputation":24286,"user_id":1700321,"display_name":"Aleksandr M"},"score":0,"creation_date":1489169761,"post_id":42715037,"comment_id":72569959,"body_markdown":"You cannot use `new` keyword in the JSP any longer. Format date in the backend.","body":"You cannot use <code>new</code> keyword in the JSP any longer. Format date in the backend."},{"owner":{"account_id":10428980,"reputation":13,"user_id":7689371,"display_name":"Wangke"},"score":0,"creation_date":1489463389,"post_id":42715037,"comment_id":72669643,"body_markdown":"@Roman C  can you tell me where the wrong syntax place? please!","body":"@Roman C  can you tell me where the wrong syntax place? please!"},{"owner":{"account_id":698222,"reputation":50202,"user_id":573032,"accept_rate":77,"display_name":"Roman C"},"score":0,"creation_date":1489474722,"post_id":42715037,"comment_id":72673291,"body_markdown":"@Wangke (new java.text.SimpleDateFormat().format())","body":"@Wangke (new java.text.SimpleDateFormat().format())"}],"answers":[{"tags":[],"owner":{"account_id":698222,"reputation":50202,"user_id":573032,"accept_rate":77,"display_name":"Roman C"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1696703534,"creation_date":1489479261,"answer_id":42780809,"question_id":42715037,"body_markdown":"Instead of writing ugly OGNL expression in property tag, that even doesn&#39;t work, why not to create a property/method in action class that does format the value.\r\n\r\n&gt;## [How to format dates and numbers:][1]\r\n&gt;\r\n&gt;A frequently asked question is how best to display dates and numbers using a specified format. There are a number of approaches for this, the most naive of which would be to add a method to your action class to do the formatting for you. This method would take in a `Date` (or subclass) object as a parameter, and return a formatted `String`.\r\n\r\n\r\n----------\r\n\r\n\r\n  [1]: https://struts.apache.org/core-developers/formatting-dates-and-numbers","title":"struts2&#39;s property tag attribute cant resolve value=&quot;(new java.text.SimpleDateFormat(&quot;&quot;).format())&quot; at struts2 version 2.3.32","body":"<p>Instead of writing ugly OGNL expression in property tag, that even doesn't work, why not to create a property/method in action class that does format the value.</p>\n<blockquote>\n<h2><a href=\"https://struts.apache.org/core-developers/formatting-dates-and-numbers\" rel=\"nofollow noreferrer\">How to format dates and numbers:</a></h2>\n<p>A frequently asked question is how best to display dates and numbers using a specified format. There are a number of approaches for this, the most naive of which would be to add a method to your action class to do the formatting for you. This method would take in a <code>Date</code> (or subclass) object as a parameter, and return a formatted <code>String</code>.</p>\n</blockquote>\n<hr />\n"}],"owner":{"account_id":10428980,"reputation":13,"user_id":7689371,"display_name":"Wangke"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":384,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":42780809,"answer_count":1,"score":1,"last_activity_date":1696703534,"creation_date":1489138856,"question_id":42715037,"body_markdown":"i was encounter this problem when i update the Struts2 from version 2.3.15 to 2.3.32. At version 2.3.32 , `&lt;s:property value=&quot;(new java.text.SimpleDateFormat().format())&quot;&gt; `could not be parsed,and no error. So, how to resolve this problem? ","title":"struts2&#39;s property tag attribute cant resolve value=&quot;(new java.text.SimpleDateFormat(&quot;&quot;).format())&quot; at struts2 version 2.3.32","body":"<p>i was encounter this problem when i update the Struts2 from version 2.3.15 to 2.3.32. At version 2.3.32 , <code>&lt;s:property value=\"(new java.text.SimpleDateFormat().format())\"&gt;</code>could not be parsed,and no error. So, how to resolve this problem? </p>\n"},{"tags":["java","eclipse","debugging"],"answers":[{"tags":[],"owner":{"account_id":545061,"reputation":6934,"user_id":914705,"accept_rate":100,"display_name":"Mike Sokolov"},"down_vote_count":0,"up_vote_count":9,"is_accepted":true,"score":9,"last_activity_date":1314906781,"creation_date":1314906781,"answer_id":7275720,"question_id":7275520,"body_markdown":"I find that when I select a value in the &quot;Variables&quot; pane in the debugger, its value is shown below using the toString() method.  This works nicely for maps, for example.","title":"Inspecting Java Map with Eclipse: Display key and value in Variables view&#39;s Value column","body":"<p>I find that when I select a value in the \"Variables\" pane in the debugger, its value is shown below using the toString() method.  This works nicely for maps, for example.</p>\n"},{"tags":[],"owner":{"account_id":31293,"reputation":43494,"user_id":85821,"accept_rate":73,"display_name":"Bart van Heukelom"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1333540445,"creation_date":1333540445,"answer_id":10010552,"question_id":7275520,"body_markdown":"Well I made an ugly workaround. Set up this detail formatter for Map:\r\n\r\n    StringBuilder detail = new StringBuilder();\r\n    int i = 0;\r\n    for (Object k : keySet()) {\r\n    \tdetail.append((i++) + &quot;: &quot; + k + &quot;\\n&quot;);\r\n    }\r\n    return detail;\r\n\r\nThen in the output of that, find the index of the entry with the key you want, then find that entry in the logical structure tree.\r\n\r\nIt works, but the detail formatter itself is a bit slow, and it requires an extra step. Also the keys are not sorted so finding the key you want in a large map may be difficult (though sorting could theoretically be done in the formatter).","title":"Inspecting Java Map with Eclipse: Display key and value in Variables view&#39;s Value column","body":"<p>Well I made an ugly workaround. Set up this detail formatter for Map:</p>\n\n<pre><code>StringBuilder detail = new StringBuilder();\nint i = 0;\nfor (Object k : keySet()) {\n    detail.append((i++) + \": \" + k + \"\\n\");\n}\nreturn detail;\n</code></pre>\n\n<p>Then in the output of that, find the index of the entry with the key you want, then find that entry in the logical structure tree.</p>\n\n<p>It works, but the detail formatter itself is a bit slow, and it requires an extra step. Also the keys are not sorted so finding the key you want in a large map may be difficult (though sorting could theoretically be done in the formatter).</p>\n"},{"tags":[],"owner":{"account_id":1380082,"reputation":784,"user_id":1313289,"display_name":"horbags"},"down_vote_count":0,"up_vote_count":59,"is_accepted":false,"score":59,"last_activity_date":1495003663,"creation_date":1333577321,"answer_id":10019962,"question_id":7275520,"body_markdown":"You need to create a detail formatter on top of the logical structure. In the example screenshot you provided, your logical structure is ConcurrentHashMap$WriteThroughEntry. You can add the detail formatter by right clicking on a row containing a ConcurrentHashMap$WriteThroughEntry and selecting &#39;add detail formatter&#39;. \r\n\r\nI just knocked up this example using HashMap.\r\n\r\n\r\n\r\n\r\n![enter image description here][1]\r\n\r\n    java.util.HashMap$Entry //  key + &quot; - &quot; + value\r\n\r\n\r\nFor a \r\n\r\n    HashMap&lt;Integer,String&gt; map;\r\n\r\n.. I quickly populated with rubbish, I now see:\r\n\r\n![enter image description here][2]\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/rBcrL.jpg\r\n  [2]: http://i.stack.imgur.com/8eCAO.jpg","title":"Inspecting Java Map with Eclipse: Display key and value in Variables view&#39;s Value column","body":"<p>You need to create a detail formatter on top of the logical structure. In the example screenshot you provided, your logical structure is ConcurrentHashMap$WriteThroughEntry. You can add the detail formatter by right clicking on a row containing a ConcurrentHashMap$WriteThroughEntry and selecting 'add detail formatter'. </p>\n\n<p>I just knocked up this example using HashMap.</p>\n\n<p><img src=\"https://i.stack.imgur.com/rBcrL.jpg\" alt=\"enter image description here\"></p>\n\n<pre><code>java.util.HashMap$Entry //  key + \" - \" + value\n</code></pre>\n\n<p>For a </p>\n\n<pre><code>HashMap&lt;Integer,String&gt; map;\n</code></pre>\n\n<p>.. I quickly populated with rubbish, I now see:</p>\n\n<p><img src=\"https://i.stack.imgur.com/8eCAO.jpg\" alt=\"enter image description here\"></p>\n"},{"tags":[],"owner":{"account_id":5036320,"reputation":29,"user_id":4044971,"display_name":"spartan"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1410845802,"creation_date":1410845802,"answer_id":25861333,"question_id":7275520,"body_markdown":"Just use the Show logical structure under the expressions window to make the values more readable. check this out\r\nhttps://blog.codecentric.de/en/2013/04/again-10-tips-on-java-debugging-with-eclipse/","title":"Inspecting Java Map with Eclipse: Display key and value in Variables view&#39;s Value column","body":"<p>Just use the Show logical structure under the expressions window to make the values more readable. check this out\n<a href=\"https://blog.codecentric.de/en/2013/04/again-10-tips-on-java-debugging-with-eclipse/\" rel=\"nofollow\">https://blog.codecentric.de/en/2013/04/again-10-tips-on-java-debugging-with-eclipse/</a></p>\n"},{"tags":[],"owner":{"account_id":7059566,"reputation":303,"user_id":5405434,"display_name":"Philippe Cloutier"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696606524,"creation_date":1696606524,"answer_id":77245749,"question_id":7275520,"body_markdown":"At least with JDK 8 and above (and a current Eclipse like 2023-09), I don&#39;t see why you&#39;d need to do more than the preference change explained in the first (mandatory) step of [that answer to a related question][1].\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/30262035/5405434","title":"Inspecting Java Map with Eclipse: Display key and value in Variables view&#39;s Value column","body":"<p>At least with JDK 8 and above (and a current Eclipse like 2023-09), I don't see why you'd need to do more than the preference change explained in the first (mandatory) step of <a href=\"https://stackoverflow.com/a/30262035/5405434\">that answer to a related question</a>.</p>\n"}],"owner":{"account_id":297863,"reputation":2957,"user_id":603588,"accept_rate":76,"display_name":"ltfishie"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":24840,"favorite_count":0,"down_vote_count":0,"up_vote_count":21,"accepted_answer_id":7275720,"answer_count":5,"score":21,"last_activity_date":1696702454,"creation_date":1314905550,"question_id":7275520,"body_markdown":"I have recently started to use Eclipse after using IntelliJ for a few years.  When debugging Map using IntelliJ, if the key or object implements `toString()`, a nice list of string representation of key-value is displayed.\r\n\r\nIn Eclipse, when I select **Show Logical Structure**, I see something like the following:\r\n\r\n![enter image description here][1]\r\n\r\nWith this view, **the problem is that you will need to expand each entry** to see the actual key and value.  If you need to find something in a map of more than 10 elements, it becomes very tedious.\r\n\r\nI understand that you can make custom Logical Structure and the default for Map is this:\r\n\r\n    return entrySet().toArray();\r\n\r\nIs there any way, either through custom Logical Structure or some plugin to view values for Map entries more useful than something like    `ConcurrentHashMap$WriteThroughEntry (id=193)`?\r\n\r\n  [1]: http://i.stack.imgur.com/lKyoj.jpg","title":"Inspecting Java Map with Eclipse: Display key and value in Variables view&#39;s Value column","body":"<p>I have recently started to use Eclipse after using IntelliJ for a few years.  When debugging Map using IntelliJ, if the key or object implements <code>toString()</code>, a nice list of string representation of key-value is displayed.</p>\n<p>In Eclipse, when I select <strong>Show Logical Structure</strong>, I see something like the following:</p>\n<p><img src=\"https://i.stack.imgur.com/lKyoj.jpg\" alt=\"enter image description here\" /></p>\n<p>With this view, <strong>the problem is that you will need to expand each entry</strong> to see the actual key and value.  If you need to find something in a map of more than 10 elements, it becomes very tedious.</p>\n<p>I understand that you can make custom Logical Structure and the default for Map is this:</p>\n<pre><code>return entrySet().toArray();\n</code></pre>\n<p>Is there any way, either through custom Logical Structure or some plugin to view values for Map entries more useful than something like    <code>ConcurrentHashMap$WriteThroughEntry (id=193)</code>?</p>\n"},{"tags":["java","logging","logback"],"answers":[{"tags":[],"owner":{"account_id":12291,"reputation":14748,"user_id":24108,"accept_rate":98,"display_name":"John Oxley"},"down_vote_count":0,"up_vote_count":56,"is_accepted":true,"score":56,"last_activity_date":1696701096,"creation_date":1337850038,"answer_id":10734257,"question_id":10734025,"body_markdown":"Create a ThresholdLoggerFilter class which can be put on an appender like:\r\n\r\n```xml\r\n&lt;appender name=&quot;STDOUT&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt;\r\n\t&lt;filter class=&quot;ch.qos.logback.classic.filter.ThresholdFilter&quot;&gt;\r\n\t\t&lt;level&gt;INFO&lt;/level&gt;\r\n\t&lt;/filter&gt;\r\n\t&lt;filter class=&quot;com.myapp.ThresholdLoggerFilter&quot;&gt;\r\n\t\t&lt;logger&gt;org.springframework&lt;/logger&gt;\r\n\t\t&lt;level&gt;ERROR&lt;/level&gt;\r\n\t&lt;/filter&gt;\r\n&lt;/appender&gt;\r\n```\r\n\r\nThe following code works\r\n\r\n\tpackage com.myapp;\r\n\t\r\n\timport ch.qos.logback.classic.Level;\r\n\timport ch.qos.logback.classic.spi.ILoggingEvent;\r\n\timport ch.qos.logback.core.filter.Filter;\r\n\timport ch.qos.logback.core.spi.FilterReply;\r\n\t\r\n\tpublic class ThresholdLoggerFilter extends Filter&lt;ILoggingEvent&gt; {\r\n\t\tprivate Level level;\r\n\t\tprivate String logger;\r\n\t\r\n\t\t@Override\r\n\t\tpublic FilterReply decide(ILoggingEvent event) {\r\n\t\t\tif (!isStarted()) {\r\n\t\t\t\treturn FilterReply.NEUTRAL;\r\n\t\t\t}\r\n\t\r\n\t\t\tif (!event.getLoggerName().startsWith(logger))\r\n\t\t\t\treturn FilterReply.NEUTRAL;\r\n\t\r\n\t\t\tif (event.getLevel().isGreaterOrEqual(level)) {\r\n\t\t\t\treturn FilterReply.NEUTRAL;\r\n\t\t\t} else {\r\n\t\t\t\treturn FilterReply.DENY;\r\n\t\t\t}\r\n\t\t}\r\n\t\r\n\t\tpublic void setLevel(Level level) {\r\n\t\t\tthis.level = level;\r\n\t\t}\r\n\t\r\n\t\tpublic void setLogger(String logger) {\r\n\t\t\tthis.logger = logger;\r\n\t\t}\r\n\t\r\n\t\tpublic void start() {\r\n\t\t\tif (this.level != null &amp;&amp; this.logger != null) {\r\n\t\t\t\tsuper.start();\r\n\t\t\t}\r\n\t\t}\r\n\t}","title":"logback: Two appenders, multiple loggers, different levels","body":"<p>Create a ThresholdLoggerFilter class which can be put on an appender like:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;appender name=&quot;STDOUT&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt;\n    &lt;filter class=&quot;ch.qos.logback.classic.filter.ThresholdFilter&quot;&gt;\n        &lt;level&gt;INFO&lt;/level&gt;\n    &lt;/filter&gt;\n    &lt;filter class=&quot;com.myapp.ThresholdLoggerFilter&quot;&gt;\n        &lt;logger&gt;org.springframework&lt;/logger&gt;\n        &lt;level&gt;ERROR&lt;/level&gt;\n    &lt;/filter&gt;\n&lt;/appender&gt;\n</code></pre>\n<p>The following code works</p>\n<pre><code>package com.myapp;\n\nimport ch.qos.logback.classic.Level;\nimport ch.qos.logback.classic.spi.ILoggingEvent;\nimport ch.qos.logback.core.filter.Filter;\nimport ch.qos.logback.core.spi.FilterReply;\n\npublic class ThresholdLoggerFilter extends Filter&lt;ILoggingEvent&gt; {\n    private Level level;\n    private String logger;\n\n    @Override\n    public FilterReply decide(ILoggingEvent event) {\n        if (!isStarted()) {\n            return FilterReply.NEUTRAL;\n        }\n\n        if (!event.getLoggerName().startsWith(logger))\n            return FilterReply.NEUTRAL;\n\n        if (event.getLevel().isGreaterOrEqual(level)) {\n            return FilterReply.NEUTRAL;\n        } else {\n            return FilterReply.DENY;\n        }\n    }\n\n    public void setLevel(Level level) {\n        this.level = level;\n    }\n\n    public void setLogger(String logger) {\n        this.logger = logger;\n    }\n\n    public void start() {\n        if (this.level != null &amp;&amp; this.logger != null) {\n            super.start();\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":40221,"reputation":32100,"user_id":116509,"accept_rate":100,"display_name":"artbristol"},"down_vote_count":0,"up_vote_count":21,"is_accepted":false,"score":21,"last_activity_date":1576780954,"creation_date":1337854460,"answer_id":10735450,"question_id":10734025,"body_markdown":"You can also do this somewhat more simply if you are willing to inherit from the root logger, e.g. here we add an extra logger for errors, that logs to stderr. It&#39;s only enabled for particular loggers.\r\n\r\n    &lt;configuration&gt;\r\n    \t&lt;appender name=&quot;CONSOLE-stdout&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt;\r\n    \t\t&lt;target&gt;System.out&lt;/target&gt; &lt;!-- the default --&gt;\r\n    \t\t&lt;encoder&gt;\r\n    \t\t\t&lt;pattern&gt;%d %-5level [%thread] %logger{0}: %msg%n&lt;/pattern&gt;\r\n    \t\t&lt;/encoder&gt;\r\n    \t&lt;/appender&gt;\r\n    \t&lt;appender name=&quot;CONSOLE-stderr&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt;\r\n    \t\t&lt;filter class=&quot;ch.qos.logback.classic.filter.ThresholdFilter&quot;&gt;\r\n    \t\t\t&lt;level&gt;ERROR&lt;/level&gt;\r\n    \t\t&lt;/filter&gt;\r\n    \r\n    \t\t&lt;target&gt;System.err&lt;/target&gt;\r\n    \t\t&lt;encoder&gt;\r\n    \t\t\t&lt;pattern&gt;%d %-5level [%thread] %logger{0}: %msg%n&lt;/pattern&gt;\r\n    \t\t&lt;/encoder&gt;\r\n    \t&lt;/appender&gt;\r\n    \t&lt;root level=&quot;DEBUG&quot;&gt;\r\n    \t\t&lt;appender-ref ref=&quot;CONSOLE-stdout&quot; /&gt;\r\n    \t&lt;/root&gt;\r\n    \r\n            &lt;!-- We want error logging from this logger to go to an extra appender \r\n                 It still inherits CONSOLE-stdout from the root logger --&gt;\r\n    \t&lt;logger name=&quot;org.springframework&quot; level=&quot;INFO&quot;&gt;\r\n    \t\t&lt;appender-ref ref=&quot;CONSOLE-stderr&quot; /&gt;\r\n    \t&lt;/logger&gt;\r\n    &lt;/configuration&gt;","title":"logback: Two appenders, multiple loggers, different levels","body":"<p>You can also do this somewhat more simply if you are willing to inherit from the root logger, e.g. here we add an extra logger for errors, that logs to stderr. It's only enabled for particular loggers.</p>\n\n<pre><code>&lt;configuration&gt;\n    &lt;appender name=\"CONSOLE-stdout\" class=\"ch.qos.logback.core.ConsoleAppender\"&gt;\n        &lt;target&gt;System.out&lt;/target&gt; &lt;!-- the default --&gt;\n        &lt;encoder&gt;\n            &lt;pattern&gt;%d %-5level [%thread] %logger{0}: %msg%n&lt;/pattern&gt;\n        &lt;/encoder&gt;\n    &lt;/appender&gt;\n    &lt;appender name=\"CONSOLE-stderr\" class=\"ch.qos.logback.core.ConsoleAppender\"&gt;\n        &lt;filter class=\"ch.qos.logback.classic.filter.ThresholdFilter\"&gt;\n            &lt;level&gt;ERROR&lt;/level&gt;\n        &lt;/filter&gt;\n\n        &lt;target&gt;System.err&lt;/target&gt;\n        &lt;encoder&gt;\n            &lt;pattern&gt;%d %-5level [%thread] %logger{0}: %msg%n&lt;/pattern&gt;\n        &lt;/encoder&gt;\n    &lt;/appender&gt;\n    &lt;root level=\"DEBUG\"&gt;\n        &lt;appender-ref ref=\"CONSOLE-stdout\" /&gt;\n    &lt;/root&gt;\n\n        &lt;!-- We want error logging from this logger to go to an extra appender \n             It still inherits CONSOLE-stdout from the root logger --&gt;\n    &lt;logger name=\"org.springframework\" level=\"INFO\"&gt;\n        &lt;appender-ref ref=\"CONSOLE-stderr\" /&gt;\n    &lt;/logger&gt;\n&lt;/configuration&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3815600,"reputation":21,"user_id":3165048,"display_name":"Amrut Malaji"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1390388556,"creation_date":1390386634,"answer_id":21280332,"question_id":10734025,"body_markdown":"Using Multiple loggers for different messages will be like this:\r\n\r\n    import ch.qos.logback.classic.Level;\r\n    import ch.qos.logback.classic.Logger;\r\n     \r\n    import ch.qos.logback.classic.Level;\r\n    import ch.qos.logback.classic.Logger;\r\n    import ch.qos.logback.classic.LoggerContext; \r\n    import ch.qos.logback.classic.encoder.PatternLayoutEncoder;\r\n    import ch.qos.logback.classic.spi.ILoggingEvent;\r\n    import ch.qos.logback.core.FileAppender;\r\n    \r\n    public class ConfigureLogBack \r\n    {\r\n        public static void programmaticConfiguration()\r\n        {\r\n            Logger camel = getLogger(&quot;MyRoute&quot;, C:\\\\Users\\\\amrut.malaji\\\\Desktop\\\\Oracle\\\\logback\\\\camel-Log.txt&quot;);\r\n            Logger services = getLogger(&quot;webservices&quot;, &quot;C:\\\\Users\\\\amrut.malaji\\\\Desktop\\\\Oracle\\\\logback\\\\services-log.txt&quot;);\r\n        }\r\n    \r\n        private static Logger getLogger(String string, String file) {\r\n    \t\tLoggerContext lc = (LoggerContext) LoggerFactory.getILoggerFactory();\r\n        PatternLayoutEncoder ple = new PatternLayoutEncoder();\r\n    \r\n        ple.setPattern(&quot;%date %level [%thread] %logger{10} [%file:%line] %msg%n&quot;);\r\n        ple.setContext(lc);\r\n        ple.start();\r\n        FileAppender&lt;ILoggingEvent&gt; fileAppender = new FileAppender&lt;ILoggingEvent&gt;();\r\n        fileAppender.setFile(file);\r\n        fileAppender.setEncoder(ple);\r\n        fileAppender.setContext(lc);\r\n        fileAppender.start();\r\n    \r\n        Logger logger = (Logger) LoggerFactory.getLogger(string);\r\n        logger.addAppender(fileAppender);\r\n        logger.setLevel(Level.INFO);\r\n        logger.setAdditive(false); /* set to true if root should log too */\r\n    \r\n        return logger;\r\n    }","title":"logback: Two appenders, multiple loggers, different levels","body":"<p>Using Multiple loggers for different messages will be like this:</p>\n\n<pre><code>import ch.qos.logback.classic.Level;\nimport ch.qos.logback.classic.Logger;\n\nimport ch.qos.logback.classic.Level;\nimport ch.qos.logback.classic.Logger;\nimport ch.qos.logback.classic.LoggerContext; \nimport ch.qos.logback.classic.encoder.PatternLayoutEncoder;\nimport ch.qos.logback.classic.spi.ILoggingEvent;\nimport ch.qos.logback.core.FileAppender;\n\npublic class ConfigureLogBack \n{\n    public static void programmaticConfiguration()\n    {\n        Logger camel = getLogger(\"MyRoute\", C:\\\\Users\\\\amrut.malaji\\\\Desktop\\\\Oracle\\\\logback\\\\camel-Log.txt\");\n        Logger services = getLogger(\"webservices\", \"C:\\\\Users\\\\amrut.malaji\\\\Desktop\\\\Oracle\\\\logback\\\\services-log.txt\");\n    }\n\n    private static Logger getLogger(String string, String file) {\n        LoggerContext lc = (LoggerContext) LoggerFactory.getILoggerFactory();\n    PatternLayoutEncoder ple = new PatternLayoutEncoder();\n\n    ple.setPattern(\"%date %level [%thread] %logger{10} [%file:%line] %msg%n\");\n    ple.setContext(lc);\n    ple.start();\n    FileAppender&lt;ILoggingEvent&gt; fileAppender = new FileAppender&lt;ILoggingEvent&gt;();\n    fileAppender.setFile(file);\n    fileAppender.setEncoder(ple);\n    fileAppender.setContext(lc);\n    fileAppender.start();\n\n    Logger logger = (Logger) LoggerFactory.getLogger(string);\n    logger.addAppender(fileAppender);\n    logger.setLevel(Level.INFO);\n    logger.setAdditive(false); /* set to true if root should log too */\n\n    return logger;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":465640,"reputation":1196,"user_id":869854,"accept_rate":64,"display_name":"eduardohl"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1478923750,"creation_date":1478923750,"answer_id":40559479,"question_id":10734025,"body_markdown":"Just found a practical solution using logback elements only that works pretty well, essentially you need to have two appenders, one with the default config and the other one with a filter (in my example I&#39;m using the console):\r\n\r\n        &lt;appender name=&quot;STDOUT&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt;\r\n            &lt;encoder&gt;\r\n                &lt;pattern&gt;%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n&lt;/pattern&gt;\r\n            &lt;/encoder&gt;\r\n        &lt;/appender&gt;\r\n\r\n        &lt;appender name=&quot;WARN_FILTER_STDOUT&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt;\r\n            &lt;filter class=&quot;ch.qos.logback.classic.filter.ThresholdFilter&quot;&gt;\r\n                &lt;level&gt;WARN&lt;/level&gt;\r\n            &lt;/filter&gt;\r\n            &lt;encoder&gt;\r\n                &lt;pattern&gt;%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n&lt;/pattern&gt;\r\n            &lt;/encoder&gt;\r\n        &lt;/appender&gt;\r\n\r\n        &lt;logger name=&quot;org.apache.spark&quot; level=&quot;INFO&quot; additivity=&quot;false&quot;&gt;\r\n            &lt;appender-ref ref=&quot;SPARK&quot; /&gt;&lt;!-- this line is not necessary, just here to ilustrate the need for the filter --&gt;\r\n            &lt;appender-ref ref=&quot;WARN_FILTER_STDOUT&quot; /&gt;\r\n        &lt;/logger&gt;\r\n\r\n        &lt;root level=&quot;info&quot;&gt;\r\n            &lt;appender-ref ref=&quot;STDOUT&quot; /&gt;\r\n        &lt;/root&gt;\r\n","title":"logback: Two appenders, multiple loggers, different levels","body":"<p>Just found a practical solution using logback elements only that works pretty well, essentially you need to have two appenders, one with the default config and the other one with a filter (in my example I'm using the console):</p>\n\n<pre><code>    &lt;appender name=\"STDOUT\" class=\"ch.qos.logback.core.ConsoleAppender\"&gt;\n        &lt;encoder&gt;\n            &lt;pattern&gt;%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n&lt;/pattern&gt;\n        &lt;/encoder&gt;\n    &lt;/appender&gt;\n\n    &lt;appender name=\"WARN_FILTER_STDOUT\" class=\"ch.qos.logback.core.ConsoleAppender\"&gt;\n        &lt;filter class=\"ch.qos.logback.classic.filter.ThresholdFilter\"&gt;\n            &lt;level&gt;WARN&lt;/level&gt;\n        &lt;/filter&gt;\n        &lt;encoder&gt;\n            &lt;pattern&gt;%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n&lt;/pattern&gt;\n        &lt;/encoder&gt;\n    &lt;/appender&gt;\n\n    &lt;logger name=\"org.apache.spark\" level=\"INFO\" additivity=\"false\"&gt;\n        &lt;appender-ref ref=\"SPARK\" /&gt;&lt;!-- this line is not necessary, just here to ilustrate the need for the filter --&gt;\n        &lt;appender-ref ref=\"WARN_FILTER_STDOUT\" /&gt;\n    &lt;/logger&gt;\n\n    &lt;root level=\"info\"&gt;\n        &lt;appender-ref ref=\"STDOUT\" /&gt;\n    &lt;/root&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2772116,"reputation":2797,"user_id":2386514,"accept_rate":100,"display_name":"Jonathan E. Landrum"},"down_vote_count":0,"up_vote_count":21,"is_accepted":false,"score":21,"last_activity_date":1696692379,"creation_date":1492632062,"answer_id":43505051,"question_id":10734025,"body_markdown":"# Adding an additional solution that is simpler than what&#39;s already here\r\n\r\nNone of these solutions worked for me, since I&#39;m not using a framework like Spark or Spring. So I did something a bit simpler that seems to function nicely. While this solution may not work for the OP, perhaps it can be of use to someone wanting something not so bulky.\r\n\r\n```xml\r\n&lt;property name=&quot;pattern&quot; value=&quot;%d{yyyy.MMM.dd HH:mm:ss.SSS} [ProgramName] %level - %msg%n&quot; /&gt;\r\n\r\n&lt;appender name=&quot;FILE&quot; class=&quot;ch.qos.logback.core.FileAppender&quot;&gt;\r\n    &lt;file&gt;/path/to/your/program.log&lt;/file&gt;\r\n    &lt;append&gt;true&lt;/append&gt;\r\n    &lt;encoder&gt;\r\n        &lt;pattern&gt;${pattern}&lt;/pattern&gt;\r\n    &lt;/encoder&gt;\r\n&lt;/appender&gt;\r\n\r\n&lt;appender name=&quot;STDOUT&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt;\r\n    &lt;target&gt;System.out&lt;/target&gt;\r\n    &lt;filter class=&quot;ch.qos.logback.classic.filter.ThresholdFilter&quot;&gt;\r\n        &lt;level&gt;INFO&lt;/level&gt;\r\n    &lt;/filter&gt;\r\n    &lt;encoder&gt;\r\n        &lt;pattern&gt;${pattern}&lt;/pattern&gt;\r\n    &lt;/encoder&gt;\r\n&lt;/appender&gt;\r\n\r\n&lt;root level=&quot;debug&quot;&gt;\r\n    &lt;appender-ref ref=&quot;FILE&quot; /&gt;\r\n    &lt;appender-ref ref=&quot;STDOUT&quot; /&gt;\r\n&lt;/root&gt;\r\n```\r\n\r\nWith this configuration, I am able to keep the console rather clean, while outputting DEBUG statements to the log file.","title":"logback: Two appenders, multiple loggers, different levels","body":"<h1>Adding an additional solution that is simpler than what's already here</h1>\n<p>None of these solutions worked for me, since I'm not using a framework like Spark or Spring. So I did something a bit simpler that seems to function nicely. While this solution may not work for the OP, perhaps it can be of use to someone wanting something not so bulky.</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;property name=&quot;pattern&quot; value=&quot;%d{yyyy.MMM.dd HH:mm:ss.SSS} [ProgramName] %level - %msg%n&quot; /&gt;\n\n&lt;appender name=&quot;FILE&quot; class=&quot;ch.qos.logback.core.FileAppender&quot;&gt;\n    &lt;file&gt;/path/to/your/program.log&lt;/file&gt;\n    &lt;append&gt;true&lt;/append&gt;\n    &lt;encoder&gt;\n        &lt;pattern&gt;${pattern}&lt;/pattern&gt;\n    &lt;/encoder&gt;\n&lt;/appender&gt;\n\n&lt;appender name=&quot;STDOUT&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt;\n    &lt;target&gt;System.out&lt;/target&gt;\n    &lt;filter class=&quot;ch.qos.logback.classic.filter.ThresholdFilter&quot;&gt;\n        &lt;level&gt;INFO&lt;/level&gt;\n    &lt;/filter&gt;\n    &lt;encoder&gt;\n        &lt;pattern&gt;${pattern}&lt;/pattern&gt;\n    &lt;/encoder&gt;\n&lt;/appender&gt;\n\n&lt;root level=&quot;debug&quot;&gt;\n    &lt;appender-ref ref=&quot;FILE&quot; /&gt;\n    &lt;appender-ref ref=&quot;STDOUT&quot; /&gt;\n&lt;/root&gt;\n</code></pre>\n<p>With this configuration, I am able to keep the console rather clean, while outputting DEBUG statements to the log file.</p>\n"},{"tags":[],"owner":{"account_id":2884820,"reputation":31,"user_id":2787427,"display_name":"beigemartin"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1544723381,"creation_date":1544723381,"answer_id":53767515,"question_id":10734025,"body_markdown":"&gt; a threshold filter on an appender isn&#39;t fine grained enough\r\n\r\nYou could use an EvaluatorFilter.  A JaninoEventEvaluator would need a reference to janino (.jar) and a logback.xml example would be:\r\n\r\n    &lt;appender name=&quot;STDOUT&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt;\r\n        &lt;filter class=&quot;ch.qos.logback.classic.filter.ThresholdFilter&quot;&gt;\r\n            &lt;level&gt;INFO&lt;/level&gt;\r\n        &lt;/filter&gt;\r\n    \t&lt;filter class=&quot;ch.qos.logback.core.filter.EvaluatorFilter&quot;&gt;      \r\n    \t\t&lt;evaluator class=&quot;ch.qos.logback.classic.boolex.JaninoEventEvaluator&quot;&gt;\r\n    \t\t\t&lt;expression&gt;\r\n    \t\t\t\tlevel &amp;lt;= ERROR &amp;amp;&amp;amp; logger.equals(&amp;quot;com.myapp.ThresholdLoggerFilter&amp;quot;)\r\n    \t\t\t&lt;/expression&gt;\r\n    \t\t&lt;/evaluator&gt;\r\n    \t\t&lt;OnMismatch&gt;DENY&lt;/OnMismatch&gt;\r\n    \t\t&lt;OnMatch&gt;NEUTRAL&lt;/OnMatch&gt;\r\n        &lt;/filter&gt;\r\n     &lt;/appender&gt;\r\n\r\nThis approach uses a java expression in the expression tag (must be xml escaped) to evaluate the logging event and does not need a custom java class to be written.","title":"logback: Two appenders, multiple loggers, different levels","body":"<blockquote>\n  <p>a threshold filter on an appender isn't fine grained enough</p>\n</blockquote>\n\n<p>You could use an EvaluatorFilter.  A JaninoEventEvaluator would need a reference to janino (.jar) and a logback.xml example would be:</p>\n\n<pre><code>&lt;appender name=\"STDOUT\" class=\"ch.qos.logback.core.ConsoleAppender\"&gt;\n    &lt;filter class=\"ch.qos.logback.classic.filter.ThresholdFilter\"&gt;\n        &lt;level&gt;INFO&lt;/level&gt;\n    &lt;/filter&gt;\n    &lt;filter class=\"ch.qos.logback.core.filter.EvaluatorFilter\"&gt;      \n        &lt;evaluator class=\"ch.qos.logback.classic.boolex.JaninoEventEvaluator\"&gt;\n            &lt;expression&gt;\n                level &amp;lt;= ERROR &amp;amp;&amp;amp; logger.equals(&amp;quot;com.myapp.ThresholdLoggerFilter&amp;quot;)\n            &lt;/expression&gt;\n        &lt;/evaluator&gt;\n        &lt;OnMismatch&gt;DENY&lt;/OnMismatch&gt;\n        &lt;OnMatch&gt;NEUTRAL&lt;/OnMatch&gt;\n    &lt;/filter&gt;\n &lt;/appender&gt;\n</code></pre>\n\n<p>This approach uses a java expression in the expression tag (must be xml escaped) to evaluate the logging event and does not need a custom java class to be written.</p>\n"}],"owner":{"account_id":12291,"reputation":14748,"user_id":24108,"accept_rate":98,"display_name":"John Oxley"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":102035,"favorite_count":0,"down_vote_count":0,"up_vote_count":69,"accepted_answer_id":10734257,"answer_count":6,"score":69,"last_activity_date":1696701096,"creation_date":1337849053,"question_id":10734025,"body_markdown":"I want to have two log files in my application (Spring Integration), debug.log and main.log.  I want to run main.log at an INFO level and debug.log at a DEBUG level.  This is doable with filters on the appenders.  I want to log different levels to the appenders based on the source.  In other words\r\n\r\n\t&lt;logger name=&quot;org.springframework&quot; level=&quot;ERROR&quot;&gt;\r\n\t\t&lt;appender-ref ref=&quot;main&quot; /&gt;\r\n\t&lt;/logger&gt;\r\n\t&lt;logger name=&quot;org.springframework&quot; level=&quot;DEBUG&quot;&gt;\r\n\t\t&lt;appender-ref ref=&quot;debug&quot; /&gt;\r\n\t&lt;/logger&gt;\r\n\t&lt;logger name=&quot;com.myapp&quot; level=&quot;INFO&quot;&gt;\r\n\t\t&lt;appender-ref ref=&quot;main&quot; /&gt;\r\n\t&lt;/logger&gt;\r\n\t&lt;logger name=&quot;com.myapp&quot; level=&quot;DEBUG&quot;&gt;\r\n\t\t&lt;appender-ref ref=&quot;debug&quot; /&gt;\r\n\t&lt;/logger&gt;\r\n\r\nSo to summarise:\r\n\r\n  1. Spring logger\r\n     * main -&gt; ERROR\r\n     * debug -&gt; DEBUG\r\n  2. com.myapp logger\r\n     * main -&gt; INFO\r\n     * debug -&gt; DEBUG\r\n\r\nBecause of this I have to have the loggers running at DEBUG and a threshold filter on an appender isn&#39;t fine grained enough.\r\n\r\n**Update** Added clarity to the question","title":"logback: Two appenders, multiple loggers, different levels","body":"<p>I want to have two log files in my application (Spring Integration), debug.log and main.log.  I want to run main.log at an INFO level and debug.log at a DEBUG level.  This is doable with filters on the appenders.  I want to log different levels to the appenders based on the source.  In other words</p>\n\n<pre><code>&lt;logger name=\"org.springframework\" level=\"ERROR\"&gt;\n    &lt;appender-ref ref=\"main\" /&gt;\n&lt;/logger&gt;\n&lt;logger name=\"org.springframework\" level=\"DEBUG\"&gt;\n    &lt;appender-ref ref=\"debug\" /&gt;\n&lt;/logger&gt;\n&lt;logger name=\"com.myapp\" level=\"INFO\"&gt;\n    &lt;appender-ref ref=\"main\" /&gt;\n&lt;/logger&gt;\n&lt;logger name=\"com.myapp\" level=\"DEBUG\"&gt;\n    &lt;appender-ref ref=\"debug\" /&gt;\n&lt;/logger&gt;\n</code></pre>\n\n<p>So to summarise:</p>\n\n<ol>\n<li>Spring logger\n<ul>\n<li>main -> ERROR</li>\n<li>debug -> DEBUG</li>\n</ul></li>\n<li>com.myapp logger\n<ul>\n<li>main -> INFO</li>\n<li>debug -> DEBUG</li>\n</ul></li>\n</ol>\n\n<p>Because of this I have to have the loggers running at DEBUG and a threshold filter on an appender isn't fine grained enough.</p>\n\n<p><strong>Update</strong> Added clarity to the question</p>\n"},{"tags":["java","servlets","servlet-3.0"],"answers":[{"tags":[],"owner":{"account_id":262720,"reputation":10054,"user_id":547779,"accept_rate":83,"display_name":"Tarlog"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1336556537,"creation_date":1336556537,"answer_id":10513552,"question_id":10513292,"body_markdown":"AFAIK there is no standard way to modify the init params in runtime. Moreover, it&#39;s a bad practice to put configuration there, especially to put there database credentials in a clear text.\r\n\r\nUsually the best practices is to put a configuration in an external file. It may be some custom properties or xml file. \r\n\r\nFor database connection it&#39;s common to use JNDI. So basically in the code you look for a JNDI resource, while the JNDI itself in configured at container level. Google to find a lot of examples how to configure database connection via JNDI for Jetty, Tomcat, JBoss and more.","title":"Modify WebInitParam in Servlet 3.0 when the project in packaged in a WAR","body":"<p>AFAIK there is no standard way to modify the init params in runtime. Moreover, it's a bad practice to put configuration there, especially to put there database credentials in a clear text.</p>\n\n<p>Usually the best practices is to put a configuration in an external file. It may be some custom properties or xml file. </p>\n\n<p>For database connection it's common to use JNDI. So basically in the code you look for a JNDI resource, while the JNDI itself in configured at container level. Google to find a lot of examples how to configure database connection via JNDI for Jetty, Tomcat, JBoss and more.</p>\n"},{"tags":[],"owner":{"account_id":699650,"reputation":16447,"user_id":1299005,"display_name":"Mark Thomas"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1336562999,"creation_date":1336562999,"answer_id":10515173,"question_id":10513292,"body_markdown":"In Servlet 3.0 the annotations provide the defaults but these can be over-ridden in web.xml so you can add the following to web.xml to change the paramaters.\r\n\r\n      &lt;servlet&gt;\r\n        &lt;servlet-name&gt;FrontServlet&lt;/servlet-name&gt;\r\n        &lt;servlet-class&gt;fully.qualified.ClassName&lt;/servlet-class&gt;\r\n        &lt;init-param&gt;\r\n          &lt;param-name&gt;passwordDB&lt;/param-name&gt;\r\n          &lt;param-value&gt;NewValue&lt;/param-value&gt;\r\n        &lt;/init-param&gt;\r\n      &lt;/servlet&gt;\r\n\r\nIn Tomcat at least, you need to specify the class name and the Servlet name. Without looking into the merging code further (it is a while since I worked on it) one of those should be sufficient. For now, you&#39;ll need to use both.","title":"Modify WebInitParam in Servlet 3.0 when the project in packaged in a WAR","body":"<p>In Servlet 3.0 the annotations provide the defaults but these can be over-ridden in web.xml so you can add the following to web.xml to change the paramaters.</p>\n\n<pre><code>  &lt;servlet&gt;\n    &lt;servlet-name&gt;FrontServlet&lt;/servlet-name&gt;\n    &lt;servlet-class&gt;fully.qualified.ClassName&lt;/servlet-class&gt;\n    &lt;init-param&gt;\n      &lt;param-name&gt;passwordDB&lt;/param-name&gt;\n      &lt;param-value&gt;NewValue&lt;/param-value&gt;\n    &lt;/init-param&gt;\n  &lt;/servlet&gt;\n</code></pre>\n\n<p>In Tomcat at least, you need to specify the class name and the Servlet name. Without looking into the merging code further (it is a while since I worked on it) one of those should be sufficient. For now, you'll need to use both.</p>\n"},{"tags":[],"owner":{"account_id":1031543,"reputation":4922,"user_id":1039774,"accept_rate":25,"display_name":"Devabc"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696699835,"creation_date":1696699835,"answer_id":77250842,"question_id":10513292,"body_markdown":"Although you found a workaround using `getClassLoader`, it is not a Servlet approach.\r\nAlso, using `web.xml` just for the sake of configuring parameters that are already defined by `WebInitParam` and `WebServlet`, is very combersome, because you are forced to duplicate the server name, url-pattern and class location.\r\n\r\n**But fortunately there is a Servlet solution that currently isn&#39;t mentioned on this page.**\r\n\r\nYou can use a `ServletContextListener` to programmatically add servlet init params without having to alter the original servlet. (As long as the servlet uses servlet init params to get values.) This is a solution without having to use `web.xml`.\r\n\r\nThe ServletContextListener:\r\n```\r\n@WebListener\r\npublic class MyServletParamInitializer implements ServletContextListener {\r\n    @Override\r\n    public void contextInitialized(ServletContextEvent contentEvent) {\r\n        ServletRegistration servletRegistration = contentEvent.getServletContext().getServletRegistration(&quot;MyServlet&quot;);\r\n        servletRegistration.setInitParameter(&quot;userDB&quot;, &quot;root&quot;);\r\n        servletRegistration.setInitParameter(&quot;passwordDB&quot;, &quot;*****&quot;);\r\n    }\r\n}\r\n```\r\nSo it uses `ServletRegistration` to set the init params.\r\n\r\nThe servlet can then access the init params from the `ServletConfig` that is only available for this Servlet:\r\n\r\n```\r\n@WebServlet(name = &quot;MyServlet&quot;, value = &quot;/*&quot;, loadOnStartup = 1)\r\npublic class MyServlet extends HttpServlet {\r\n\r\n    // You could use this method to do some db initialization\r\n    @Override\r\n    public void init(ServletConfig config) throws ServletException {\r\n        super.init(config);\r\n        String userDB = config.getInitParameter(&quot;userDB&quot;);\r\n        System.out.println(&quot;MyServlet.init(): userDB=&quot; + userDB);\r\n    }\r\n\r\n    @Override\r\n    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {\r\n        PrintWriter writer = resp.getWriter();\r\n\r\n        String userDB = getServletConfig().getInitParameter(&quot;userDB&quot;);\r\n        String message = &quot;MyServlet.doGet(): userDB=&quot; + userDB;\r\n        System.out.println(message);\r\n        writer.println(message);\r\n\r\n        writer.flush();\r\n        writer.close();\r\n    }\r\n}\r\n```","title":"Modify WebInitParam in Servlet 3.0 when the project in packaged in a WAR","body":"<p>Although you found a workaround using <code>getClassLoader</code>, it is not a Servlet approach.\nAlso, using <code>web.xml</code> just for the sake of configuring parameters that are already defined by <code>WebInitParam</code> and <code>WebServlet</code>, is very combersome, because you are forced to duplicate the server name, url-pattern and class location.</p>\n<p><strong>But fortunately there is a Servlet solution that currently isn't mentioned on this page.</strong></p>\n<p>You can use a <code>ServletContextListener</code> to programmatically add servlet init params without having to alter the original servlet. (As long as the servlet uses servlet init params to get values.) This is a solution without having to use <code>web.xml</code>.</p>\n<p>The ServletContextListener:</p>\n<pre><code>@WebListener\npublic class MyServletParamInitializer implements ServletContextListener {\n    @Override\n    public void contextInitialized(ServletContextEvent contentEvent) {\n        ServletRegistration servletRegistration = contentEvent.getServletContext().getServletRegistration(&quot;MyServlet&quot;);\n        servletRegistration.setInitParameter(&quot;userDB&quot;, &quot;root&quot;);\n        servletRegistration.setInitParameter(&quot;passwordDB&quot;, &quot;*****&quot;);\n    }\n}\n</code></pre>\n<p>So it uses <code>ServletRegistration</code> to set the init params.</p>\n<p>The servlet can then access the init params from the <code>ServletConfig</code> that is only available for this Servlet:</p>\n<pre><code>@WebServlet(name = &quot;MyServlet&quot;, value = &quot;/*&quot;, loadOnStartup = 1)\npublic class MyServlet extends HttpServlet {\n\n    // You could use this method to do some db initialization\n    @Override\n    public void init(ServletConfig config) throws ServletException {\n        super.init(config);\n        String userDB = config.getInitParameter(&quot;userDB&quot;);\n        System.out.println(&quot;MyServlet.init(): userDB=&quot; + userDB);\n    }\n\n    @Override\n    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {\n        PrintWriter writer = resp.getWriter();\n\n        String userDB = getServletConfig().getInitParameter(&quot;userDB&quot;);\n        String message = &quot;MyServlet.doGet(): userDB=&quot; + userDB;\n        System.out.println(message);\n        writer.println(message);\n\n        writer.flush();\n        writer.close();\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":1161303,"reputation":19991,"user_id":1140748,"accept_rate":93,"display_name":"alain.janinm"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2626,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":10513552,"answer_count":3,"score":5,"last_activity_date":1696699835,"creation_date":1336555631,"question_id":10513292,"body_markdown":"In my project I&#39;m using Servlet 3.0 and I&#39;ve tried to use annotations.\r\n\r\nTo init the connection parameters for the DB I use this in my servlet :\r\n\r\n    @WebServlet(name = &quot;FrontServlet&quot;, urlPatterns = {&quot;/index&quot;},\r\n            initParams = {\r\n            @WebInitParam(name = &quot;userDB&quot;, value = &quot;root&quot;),\r\n            @WebInitParam(name = &quot;passwordDB&quot;, value = &quot;*****&quot;)})\r\n\r\nNow when I packaged the project in a WAR I&#39;ve no web.xml  so I can&#39;t edit the init parameters as I used to do whith older servlet version.\r\n\r\nMy question is, can I edit my init parameters when the project is packaged in a WAR? If yes how? Otherwise what approach should I use to store my init parameters and be able to modify them in the WAR?\r\n\r\nIf possible I would like to avoid to recreate the whole web.xml with all URL-patterns, etc...\r\n\r\n\r\nEDIT :\r\n\r\nFinally I kept :\r\n\r\n    @WebServlet(name = &quot;FrontServlet&quot;, urlPatterns = {&quot;/index&quot;})\r\n\r\nAnd I load DB params using [Properties][1], accessing the config file with `getClass().getClassLoader().getResourceAsStream(&quot;servlet/config/config.ini&quot;)`\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/6/docs/api/java/util/Properties.html","title":"Modify WebInitParam in Servlet 3.0 when the project in packaged in a WAR","body":"<p>In my project I'm using Servlet 3.0 and I've tried to use annotations.</p>\n\n<p>To init the connection parameters for the DB I use this in my servlet :</p>\n\n<pre><code>@WebServlet(name = \"FrontServlet\", urlPatterns = {\"/index\"},\n        initParams = {\n        @WebInitParam(name = \"userDB\", value = \"root\"),\n        @WebInitParam(name = \"passwordDB\", value = \"*****\")})\n</code></pre>\n\n<p>Now when I packaged the project in a WAR I've no web.xml  so I can't edit the init parameters as I used to do whith older servlet version.</p>\n\n<p>My question is, can I edit my init parameters when the project is packaged in a WAR? If yes how? Otherwise what approach should I use to store my init parameters and be able to modify them in the WAR?</p>\n\n<p>If possible I would like to avoid to recreate the whole web.xml with all URL-patterns, etc...</p>\n\n<p>EDIT :</p>\n\n<p>Finally I kept :</p>\n\n<pre><code>@WebServlet(name = \"FrontServlet\", urlPatterns = {\"/index\"})\n</code></pre>\n\n<p>And I load DB params using <a href=\"http://docs.oracle.com/javase/6/docs/api/java/util/Properties.html\" rel=\"nofollow\">Properties</a>, accessing the config file with <code>getClass().getClassLoader().getResourceAsStream(\"servlet/config/config.ini\")</code></p>\n"},{"tags":["java","object","quicksort"],"comments":[{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":1,"creation_date":1453786066,"post_id":35006825,"comment_id":57742606,"body_markdown":"Unclear what you&#39;re asking. What would a sorted array containing both nuts and bolts look like? How would it be sequenced? What are you really trying to accomplish here?","body":"Unclear what you&#39;re asking. What would a sorted array containing both nuts and bolts look like? How would it be sequenced? What are you really trying to accomplish here?"},{"owner":{"account_id":6381895,"reputation":11,"user_id":4951028,"display_name":"Burus"},"score":0,"creation_date":1453824035,"post_id":35006825,"comment_id":57763129,"body_markdown":"How would you go about sorting these two object arrays basically, but you cannot compare a nut to a nut or a bolt to a bolt,","body":"How would you go about sorting these two object arrays basically, but you cannot compare a nut to a nut or a bolt to a bolt,"},{"owner":{"account_id":6381895,"reputation":11,"user_id":4951028,"display_name":"Burus"},"score":0,"creation_date":1453824122,"post_id":35006825,"comment_id":57763204,"body_markdown":"You can only compare a nut to a bolt, and this question usually calls for using a quicksort, which i have tried implementing, but i havent been able to do it correctly","body":"You can only compare a nut to a bolt, and this question usually calls for using a quicksort, which i have tried implementing, but i havent been able to do it correctly"},{"owner":{"account_id":198346,"reputation":20665,"user_id":442945,"accept_rate":77,"display_name":"Nathaniel Ford"},"score":0,"creation_date":1454003530,"post_id":35006825,"comment_id":57859984,"body_markdown":"A sort implies there is a &#39;strict ordering&#39;. If you can strictly order a bolt in relation to a nut, and nut in relation to a bolt, why can you not order a bolt in relation to a bolt? \n\nAlso note your code has some significant formatting problems preventing us from compiling it without making some assumptions.","body":"A sort implies there is a &#39;strict ordering&#39;. If you can strictly order a bolt in relation to a nut, and nut in relation to a bolt, why can you not order a bolt in relation to a bolt?   Also note your code has some significant formatting problems preventing us from compiling it without making some assumptions."}],"answers":[{"tags":[],"owner":{"account_id":29621165,"reputation":1,"user_id":22702114,"display_name":"Mohammed Naved Shaikh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696699647,"creation_date":1696699647,"answer_id":77250828,"question_id":35006825,"body_markdown":"Question-&gt;\r\nWrite a Scilab program to solve the following problem:\r\nNuts &amp; Bolts Problem (Lock &amp; Key problem) using Quick Sort. Given a set of n nuts of\r\ndifferent sizes and n bolts of different sizes. There is a one-one mapping between nuts and bolts. Match nuts and bolts efficiently.\r\nConstraint: Comparison of a nut to another nut or a bolt to another bolt is not allowed. It means a nut can only be compared with a bolt and a bolt can only be compared with a nut to see which one is bigger/smaller.\r\n\r\nAnswer-&gt;\r\n```function sortedarray = quicksort(arr)\r\n    n = length(arr);  // Get the length of the input array\r\n    \r\n    if n &lt;= 1\r\n        sortedarray = arr;  // If the array has 1 or fewer elements, it&#39;s already sorted\r\n        return\r\n    end\r\n    \r\n    pivot = arr(1);  // Choose the first element as the pivot\r\n    left = [];\r\n    right = [];\r\n    \r\n    for i = 1:n\r\n        if arr(i) &lt; pivot\r\n            left = [left, arr(i)];  // Elements smaller than the pivot go to the left\r\n        elseif arr(i) &gt; pivot\r\n            right = [right, arr(i)];  // Elements greater than the pivot go to the right\r\n        end\r\n    end\r\n    \r\n    left = quicksort(left);   // Recursively sort the left subarray\r\n    right = quicksort(right); // Recursively sort the right subarray\r\n    \r\n    sortedarray = [left, pivot, right];  // Combine the sorted subarrays with the pivot\r\nend\r\n\r\nnuts = [9,0,6,7,1];\r\nbolts = [7,1,0,9,6];\r\n\r\n//User Input\r\n//for i = 1:5\r\n//    message = sprintf(&quot;Enter Size of Nut %d :&quot;, i);\r\n//    nuts(i) = input(message);  // Input nut sizes\r\n//end\r\n\r\n//for i = 1:5\r\n//    message = sprintf(&quot;Enter Size of Bolt %d :&quot;, i);\r\n//    bolts(i) = input(message);  // Input bolt sizes\r\n//end\r\n\r\nsorted_nuts = quicksort(nuts);    // Sort nuts\r\nsorted_bolts = quicksort(bolts);  // Sort bolts\r\n\r\nfor i = 1:5\r\n    printf(&quot;Nut[%d] Matches With Bolt[%d]\\n&quot;, sorted_nuts(i), sorted_bolts(i));  // Match nuts with bolts\r\nend\r\n\r\n//Output-&gt;\r\n//Nut[0] Matches With Bolt[0]\r\n//Nut[1] Matches With Bolt[1]\r\n//Nut[6] Matches With Bolt[6]\r\n//Nut[7] Matches With Bolt[7]\r\n//Nut[9] Matches With Bolt[9]\r\n```\r\n","title":"How to implement quicksort with two objects","body":"<p>Question-&gt;\nWrite a Scilab program to solve the following problem:\nNuts &amp; Bolts Problem (Lock &amp; Key problem) using Quick Sort. Given a set of n nuts of\ndifferent sizes and n bolts of different sizes. There is a one-one mapping between nuts and bolts. Match nuts and bolts efficiently.\nConstraint: Comparison of a nut to another nut or a bolt to another bolt is not allowed. It means a nut can only be compared with a bolt and a bolt can only be compared with a nut to see which one is bigger/smaller.</p>\n<p>Answer-&gt;</p>\n<pre><code>    n = length(arr);  // Get the length of the input array\n    \n    if n &lt;= 1\n        sortedarray = arr;  // If the array has 1 or fewer elements, it's already sorted\n        return\n    end\n    \n    pivot = arr(1);  // Choose the first element as the pivot\n    left = [];\n    right = [];\n    \n    for i = 1:n\n        if arr(i) &lt; pivot\n            left = [left, arr(i)];  // Elements smaller than the pivot go to the left\n        elseif arr(i) &gt; pivot\n            right = [right, arr(i)];  // Elements greater than the pivot go to the right\n        end\n    end\n    \n    left = quicksort(left);   // Recursively sort the left subarray\n    right = quicksort(right); // Recursively sort the right subarray\n    \n    sortedarray = [left, pivot, right];  // Combine the sorted subarrays with the pivot\nend\n\nnuts = [9,0,6,7,1];\nbolts = [7,1,0,9,6];\n\n//User Input\n//for i = 1:5\n//    message = sprintf(&quot;Enter Size of Nut %d :&quot;, i);\n//    nuts(i) = input(message);  // Input nut sizes\n//end\n\n//for i = 1:5\n//    message = sprintf(&quot;Enter Size of Bolt %d :&quot;, i);\n//    bolts(i) = input(message);  // Input bolt sizes\n//end\n\nsorted_nuts = quicksort(nuts);    // Sort nuts\nsorted_bolts = quicksort(bolts);  // Sort bolts\n\nfor i = 1:5\n    printf(&quot;Nut[%d] Matches With Bolt[%d]\\n&quot;, sorted_nuts(i), sorted_bolts(i));  // Match nuts with bolts\nend\n\n//Output-&gt;\n//Nut[0] Matches With Bolt[0]\n//Nut[1] Matches With Bolt[1]\n//Nut[6] Matches With Bolt[6]\n//Nut[7] Matches With Bolt[7]\n//Nut[9] Matches With Bolt[9]\n</code></pre>\n"}],"owner":{"account_id":6381895,"reputation":11,"user_id":4951028,"display_name":"Burus"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":205,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1696699647,"creation_date":1453780508,"question_id":35006825,"body_markdown":"I am trying to sort two object arrays. One array is a `Bolt[]` array, the other is a `Nut[]` array. I cannot compare a Bolt to another Bolt. I can only compare a bolt to a nut, and vice versa. \r\n\r\nI think the solution is to use some adapted version of quicksort, but I am having trouble implementing it. Given the code I have written, `MatchNutsBolt`, I am not sure what I can do to make it work:\r\n\r\n    int pivot = partition(nut, low, hi, bolt[hi])\r\n\r\nI cant think of how to use, say, a `Nut` pivot, then traverse the `Bolt[]` list, then use the matching `Bolt`s pivot and traverse though the `Nuts[]` list, thereby sorting both arrays with an average `O(n log n)` run time.  \r\n\r\n    public class MatchNutsBolts {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\t// TODO Auto-generated method stub\r\n\t\tRandom r = new Random(20);\r\n\t\t\r\n\t\t Bolt[] listOfBolts = NutsBolts.makeRandomBolts(r, 7);\r\n\t\t Nut[] listOfNuts = NutsBolts.makeMatchingNuts(r, listOfBolts);\r\n\t\t \r\n\t\t int low = 0;\r\n\t\t int hi = listOfBolts.length-1;\r\n\t\t \r\n\t\t \r\n\t\t match(listOfNuts, listOfBolts, low, hi);\r\n\t\t\r\n\t\t boolean x = NutsBolts.correctFit(listOfNuts, listOfBolts);\r\n\t\t System.out.print(x+&quot; &quot;);\r\n\t}\r\n\t\r\n\tpublic static void match(Nut[] nut, Bolt[] bolt, int low, int hi)\r\n\t{\r\n\t\t if (low &lt; hi)\r\n\t        {\r\n\t            // Choose last character of bolts array for nuts partition.\r\n\t            int pivot = partition(nut, low, hi, bolt[hi]); //here is where im having a problem\r\n\t \r\n\t            // Now using the partition of nuts choose that for bolts\r\n\t            // partition.\r\n\t            partition(bolt, low, hi, nut[pivot]);\r\n\t \r\n\t            match(nut, bolt, low, pivot-1);\r\n\t            match(nut, bolt, pivot+1, hi);\r\n\t        }\r\n\t}\r\n\tprivate static int partition(Bolt[] bolt, int low, int high, Nut pivot)\r\n    {\r\n        int i = low;\r\n        Bolt temp1, temp2;\r\n        for (int j = low; j &lt; high; j++)\r\n        {\r\n        \t//int  cmp = Nut.compareTo(bolt[j]);\r\n        \t\r\n            if (bolt[j].getDigit(i) &lt; pivot.getDigit(i)){\r\n                temp1 = bolt[i];\r\n                bolt[i] = bolt[j];\r\n                bolt[j] = temp1;\r\n                i++;\r\n            } else if(bolt[j].getDigit(i) == pivot.getDigit(i)){\r\n                temp1 = bolt[j];\r\n                bolt[j] = bolt[high];\r\n                bolt[high] = temp1;\r\n                j--;\r\n            }\r\n        }\r\n        temp2 = bolt[i];\r\n        bolt[i] = bolt[high];\r\n        bolt[high] = temp2;\r\n \r\n        // Return the partition index of an array based on the pivot \r\n        // element of other array.\r\n        return i;\r\n    }\r\n    }\r\n     class Bolt {\r\n\t\r\n\tfinal private static int SIZE = 7;\r\n\t\r\n\tprivate int[] notches;\r\n\t\r\n\t// A Bolt object is basically a seven digit number.\r\n\tpublic Bolt(Random r) {\r\n\t\tnotches = new int[SIZE];\r\n\t\tfor (int i=0; i&lt;notches.length; i++)\r\n\t\t\tnotches[i] = r.nextInt(10);\r\n\t}\r\n\t\r\n\t// A standard constructor given the information stored in a Bolt.\r\n\tpublic Bolt(int[] digits) {\r\n\t\tnotches = new int[digits.length];\r\n\t\tfor (int i=0; i&lt;SIZE; i++)\r\n\t\t\tnotches[i] = digits[i];\r\n\t}\r\n\t\r\n\t// Needed to access each digit of a Bolt.\r\n\tpublic int getDigit(int i) {\r\n\t\treturn notches[i];\r\n\t}\r\n\t\r\n\t// Made this work the opposite of the corresponding comparison. Surprisingly\r\n\t// it&#39;s not a circular definition, just a consistent one.\r\n\tpublic int compareTo(Nut n) {\r\n\t\treturn -n.compareTo(this);\r\n\t}\r\n\t\r\n\t// Return a matching Nut. A matching nut is one who&#39;s number has each digit\r\n\t// be its complement. A complement to a digit is its difference from 9.\r\n\tpublic Nut getMatchingNut() {\r\n\t\tint[] tmp = new int[SIZE];\r\n\t\t\r\n\t\t// We set each digit for the match.\r\n\t\tfor (int i=0; i&lt;SIZE; i++)\r\n\t\t\ttmp[i] = 9 - notches[i];\r\n\t\t\t\r\n\t\t// Now create the object and return it.\r\n\t\tNut match = new Nut(tmp);\r\n\t\treturn match;\r\n\t}\r\n\t\r\n\t// For debugging purposes.\r\n\t/*public void print() {\r\n\t\tfor (int i=0; i&lt;SIZE; i++) \r\n\t\t\tSystem.out.print(notches[SIZE-1-i]);\r\n\t}*/\r\n    }\r\n      class Nut {\r\n\t\r\n\tfinal private static int SIZE = 7;\r\n\t\r\n\tprivate int[] notches;\r\n\t\r\n\t// A Nut object is basically a seven digit number.\r\n\tpublic Nut(Random r) {\r\n\t\tnotches = new int[SIZE];\r\n\t\tfor (int i=0; i&lt;notches.length; i++)\r\n\t\t\tnotches[i] = r.nextInt(10);\r\n\t}\r\n\t\r\n\t// A standard constructor given the information stored in a Nut.\r\n\tpublic Nut(int[] digits) {\r\n\t\tnotches = new int[SIZE];\r\n\t\tfor (int i=0; i&lt;SIZE; i++)\r\n\t\t\tnotches[i] = digits[i];\r\n\t}\r\n\t\r\n\t// Need this to access a single digit.\r\n\tpublic int getDigit(int i) {\r\n\t\treturn notches[i];\r\n\t}\r\n\t\r\n\t// Here we define a compareTo.\r\n\tpublic int compareTo(Bolt n) {\r\n\t\tint[] tmp = new int[SIZE];\r\n\t\tint carry = 0;\r\n\t\tboolean low = false;\r\n\t\t\r\n\t\t// Add up the numbers stored in this and n.\r\n\t\tfor (int i=0; i&lt;SIZE; i++) {\r\n\t\t\ttmp[i] = (carry + notches[i] + n.getDigit(i))%10;\r\n\t\t\tcarry = (carry + notches[i] + n.getDigit(i))/10;\r\n\t\t\tif (tmp[i] &lt; 9)\r\n\t\t\t\tlow = true;\r\n\t\t}\r\n\t\t\r\n\t\t// Our sum is a bunch of 9s, so we&#39;ve got a match!\r\n\t\tif (tmp[SIZE-1] == 9 &amp;&amp; !low)\r\n\t\t\treturn 0;\r\n\t\t\r\n\t\t// Our sum is too big, so make this nut too big.\r\n\t\telse if (carry &gt; 0)\r\n\t\t\treturn 1;\r\n\t\t\t\r\n\t\t// Opposite case.\r\n\t\telse \r\n\t\t\treturn -1;\t\r\n\t}\r\n\t\r\n\t// Works just like the mirror method in the Bolt class.\r\n\tpublic Bolt getMatchingBolt() {\r\n\t\tint[] tmp = new int[SIZE];\r\n\t\tfor (int i=0; i&lt;7; i++)\r\n\t\t\ttmp[i] = 9 - notches[i];\r\n\t\treturn new Bolt(tmp);\r\n\t}\r\n\t\r\n\t// For debugging purposes.\r\n\t/*public void print() {\r\n\t\tfor (int i=0; i&lt;SIZE; i++) \r\n\t\t\tSystem.out.print(notches[SIZE-1-i]);\r\n\t}*/\r\n\t\r\n    }\r\n     class NutsBolts {\r\n\t\t\r\n\t\t// Returns true iff each nut and each corresponding bolt in the two\r\n\t\t// respective arrays match eacy other.\r\n\t\tpublic static boolean correctFit(Nut[] nuts, Bolt[] bolts) {\r\n\t\t\t\r\n\t\t\t// Try out each corresponding nut and bolt.\r\n\t\t\tfor (int i=0; i&lt;nuts.length; i++)\t\r\n\t\t\t\r\n\t\t\t\t// See if these don&#39;t match.\r\n\t\t\t\tif (nuts[i].compareTo(bolts[i]) != 0)\r\n\t\t\t\t\treturn  false;\r\n\t\t\t\t\t\r\n\t\t\t// If we get here, they all matched.\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\t\r\n\t\t// Creates an array of Bolt objects with size number of elements utilizing\r\n\t\t// r.\r\n\t\tpublic static Bolt[] makeRandomBolts(Random r, int size) {\r\n\t\t\t\r\n\t\t\t// Allocate space for our bolts,\r\n\t\t\tBolt[] tmp = new Bolt[size];\r\n\t\t\t\r\n\t\t\t// Just create each object here and return the array.\r\n\t\t\tfor (int i=0; i&lt;size; i++)\r\n\t\t\t\ttmp[i] = new Bolt(r);\r\n\t\t\treturn tmp;\r\n\t\t}\r\n\t\t\r\n\t\t// Creates an array of matching nuts to the array of bolts passed in.\r\n\t\t// It scrambles the nuts though, so that they are no longer in the correct\r\n\t\t// locations.\r\n\t\tpublic static Nut[] makeMatchingNuts(Random r, Bolt[] bolts) {\r\n\t\t\t\r\n\t\t\t// Create the array, and add in each matching nut.\r\n\t\t\tNut[] tmp = new Nut[bolts.length];\r\n\t\t\tfor (int i=0; i&lt;bolts.length; i++) {\r\n\t\t\t\ttmp[i] = bolts[i].getMatchingNut();\r\n\t\t\t}\t\r\n\t\t\t\r\n\t\t\t// Here we mix the array of nuts up.\r\n\t\t\tfor (int i=0; i&lt;3*bolts.length; i++) {\r\n\t\t\t\t\r\n\t\t\t\t// Get two random indexes.\r\n\t\t\t\tint index1 = r.nextInt(bolts.length);\r\n\t\t\t\tint index2 = r.nextInt(bolts.length);\r\n\t\t\t\t\r\n\t\t\t\t// Swap them!\r\n\t\t\t\tNut store = tmp[index1];\r\n\t\t\t\ttmp[index1] = tmp[index2];\r\n\t\t\t\ttmp[index2] = store;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// Return our array of mixed up, but matching nuts.\r\n\t\t\treturn tmp;\r\n\t\t}\r\n\t}","title":"How to implement quicksort with two objects","body":"<p>I am trying to sort two object arrays. One array is a <code>Bolt[]</code> array, the other is a <code>Nut[]</code> array. I cannot compare a Bolt to another Bolt. I can only compare a bolt to a nut, and vice versa. </p>\n\n<p>I think the solution is to use some adapted version of quicksort, but I am having trouble implementing it. Given the code I have written, <code>MatchNutsBolt</code>, I am not sure what I can do to make it work:</p>\n\n<pre><code>int pivot = partition(nut, low, hi, bolt[hi])\n</code></pre>\n\n<p>I cant think of how to use, say, a <code>Nut</code> pivot, then traverse the <code>Bolt[]</code> list, then use the matching <code>Bolt</code>s pivot and traverse though the <code>Nuts[]</code> list, thereby sorting both arrays with an average <code>O(n log n)</code> run time.  </p>\n\n<pre><code>public class MatchNutsBolts {\n\npublic static void main(String[] args) {\n    // TODO Auto-generated method stub\n    Random r = new Random(20);\n\n     Bolt[] listOfBolts = NutsBolts.makeRandomBolts(r, 7);\n     Nut[] listOfNuts = NutsBolts.makeMatchingNuts(r, listOfBolts);\n\n     int low = 0;\n     int hi = listOfBolts.length-1;\n\n\n     match(listOfNuts, listOfBolts, low, hi);\n\n     boolean x = NutsBolts.correctFit(listOfNuts, listOfBolts);\n     System.out.print(x+\" \");\n}\n\npublic static void match(Nut[] nut, Bolt[] bolt, int low, int hi)\n{\n     if (low &lt; hi)\n        {\n            // Choose last character of bolts array for nuts partition.\n            int pivot = partition(nut, low, hi, bolt[hi]); //here is where im having a problem\n\n            // Now using the partition of nuts choose that for bolts\n            // partition.\n            partition(bolt, low, hi, nut[pivot]);\n\n            match(nut, bolt, low, pivot-1);\n            match(nut, bolt, pivot+1, hi);\n        }\n}\nprivate static int partition(Bolt[] bolt, int low, int high, Nut pivot)\n{\n    int i = low;\n    Bolt temp1, temp2;\n    for (int j = low; j &lt; high; j++)\n    {\n        //int  cmp = Nut.compareTo(bolt[j]);\n\n        if (bolt[j].getDigit(i) &lt; pivot.getDigit(i)){\n            temp1 = bolt[i];\n            bolt[i] = bolt[j];\n            bolt[j] = temp1;\n            i++;\n        } else if(bolt[j].getDigit(i) == pivot.getDigit(i)){\n            temp1 = bolt[j];\n            bolt[j] = bolt[high];\n            bolt[high] = temp1;\n            j--;\n        }\n    }\n    temp2 = bolt[i];\n    bolt[i] = bolt[high];\n    bolt[high] = temp2;\n\n    // Return the partition index of an array based on the pivot \n    // element of other array.\n    return i;\n}\n}\n class Bolt {\n\nfinal private static int SIZE = 7;\n\nprivate int[] notches;\n\n// A Bolt object is basically a seven digit number.\npublic Bolt(Random r) {\n    notches = new int[SIZE];\n    for (int i=0; i&lt;notches.length; i++)\n        notches[i] = r.nextInt(10);\n}\n\n// A standard constructor given the information stored in a Bolt.\npublic Bolt(int[] digits) {\n    notches = new int[digits.length];\n    for (int i=0; i&lt;SIZE; i++)\n        notches[i] = digits[i];\n}\n\n// Needed to access each digit of a Bolt.\npublic int getDigit(int i) {\n    return notches[i];\n}\n\n// Made this work the opposite of the corresponding comparison. Surprisingly\n// it's not a circular definition, just a consistent one.\npublic int compareTo(Nut n) {\n    return -n.compareTo(this);\n}\n\n// Return a matching Nut. A matching nut is one who's number has each digit\n// be its complement. A complement to a digit is its difference from 9.\npublic Nut getMatchingNut() {\n    int[] tmp = new int[SIZE];\n\n    // We set each digit for the match.\n    for (int i=0; i&lt;SIZE; i++)\n        tmp[i] = 9 - notches[i];\n\n    // Now create the object and return it.\n    Nut match = new Nut(tmp);\n    return match;\n}\n\n// For debugging purposes.\n/*public void print() {\n    for (int i=0; i&lt;SIZE; i++) \n        System.out.print(notches[SIZE-1-i]);\n}*/\n}\n  class Nut {\n\nfinal private static int SIZE = 7;\n\nprivate int[] notches;\n\n// A Nut object is basically a seven digit number.\npublic Nut(Random r) {\n    notches = new int[SIZE];\n    for (int i=0; i&lt;notches.length; i++)\n        notches[i] = r.nextInt(10);\n}\n\n// A standard constructor given the information stored in a Nut.\npublic Nut(int[] digits) {\n    notches = new int[SIZE];\n    for (int i=0; i&lt;SIZE; i++)\n        notches[i] = digits[i];\n}\n\n// Need this to access a single digit.\npublic int getDigit(int i) {\n    return notches[i];\n}\n\n// Here we define a compareTo.\npublic int compareTo(Bolt n) {\n    int[] tmp = new int[SIZE];\n    int carry = 0;\n    boolean low = false;\n\n    // Add up the numbers stored in this and n.\n    for (int i=0; i&lt;SIZE; i++) {\n        tmp[i] = (carry + notches[i] + n.getDigit(i))%10;\n        carry = (carry + notches[i] + n.getDigit(i))/10;\n        if (tmp[i] &lt; 9)\n            low = true;\n    }\n\n    // Our sum is a bunch of 9s, so we've got a match!\n    if (tmp[SIZE-1] == 9 &amp;&amp; !low)\n        return 0;\n\n    // Our sum is too big, so make this nut too big.\n    else if (carry &gt; 0)\n        return 1;\n\n    // Opposite case.\n    else \n        return -1;  \n}\n\n// Works just like the mirror method in the Bolt class.\npublic Bolt getMatchingBolt() {\n    int[] tmp = new int[SIZE];\n    for (int i=0; i&lt;7; i++)\n        tmp[i] = 9 - notches[i];\n    return new Bolt(tmp);\n}\n\n// For debugging purposes.\n/*public void print() {\n    for (int i=0; i&lt;SIZE; i++) \n        System.out.print(notches[SIZE-1-i]);\n}*/\n\n}\n class NutsBolts {\n\n    // Returns true iff each nut and each corresponding bolt in the two\n    // respective arrays match eacy other.\n    public static boolean correctFit(Nut[] nuts, Bolt[] bolts) {\n\n        // Try out each corresponding nut and bolt.\n        for (int i=0; i&lt;nuts.length; i++)   \n\n            // See if these don't match.\n            if (nuts[i].compareTo(bolts[i]) != 0)\n                return  false;\n\n        // If we get here, they all matched.\n        return true;\n    }\n\n    // Creates an array of Bolt objects with size number of elements utilizing\n    // r.\n    public static Bolt[] makeRandomBolts(Random r, int size) {\n\n        // Allocate space for our bolts,\n        Bolt[] tmp = new Bolt[size];\n\n        // Just create each object here and return the array.\n        for (int i=0; i&lt;size; i++)\n            tmp[i] = new Bolt(r);\n        return tmp;\n    }\n\n    // Creates an array of matching nuts to the array of bolts passed in.\n    // It scrambles the nuts though, so that they are no longer in the correct\n    // locations.\n    public static Nut[] makeMatchingNuts(Random r, Bolt[] bolts) {\n\n        // Create the array, and add in each matching nut.\n        Nut[] tmp = new Nut[bolts.length];\n        for (int i=0; i&lt;bolts.length; i++) {\n            tmp[i] = bolts[i].getMatchingNut();\n        }   \n\n        // Here we mix the array of nuts up.\n        for (int i=0; i&lt;3*bolts.length; i++) {\n\n            // Get two random indexes.\n            int index1 = r.nextInt(bolts.length);\n            int index2 = r.nextInt(bolts.length);\n\n            // Swap them!\n            Nut store = tmp[index1];\n            tmp[index1] = tmp[index2];\n            tmp[index2] = store;\n        }\n\n        // Return our array of mixed up, but matching nuts.\n        return tmp;\n    }\n}\n</code></pre>\n"},{"tags":["java","angular","spring","spring-boot","spring-security"],"answers":[{"tags":[],"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696696046,"creation_date":1696696046,"answer_id":77250631,"question_id":77249815,"body_markdown":"I understand that you are trying to logout the user from Keycloak when his session on Spring OAuth2 client expires. Why that? Why do you let it expire? Why don&#39;t you try to re-activate the session on the client instead? The user might still have an active session on the authorization server, and if he doesn&#39;t, then there&#39;s no need to logout from it. \r\n\r\nIn a similar setup, I have the user details endpoint exposed by a resource server behind the Spring client. The payload returned by this endpoint include the expiration time of access token. In Angular app, I schedule a new call to this endpoint just before the access token expires. That way, the session in Spring client is kept alive, and the access token it contains are always valid.","title":"automatically logout when there session timeout in angular and spring boot oauth2 client application","body":"<p>I understand that you are trying to logout the user from Keycloak when his session on Spring OAuth2 client expires. Why that? Why do you let it expire? Why don't you try to re-activate the session on the client instead? The user might still have an active session on the authorization server, and if he doesn't, then there's no need to logout from it.</p>\n<p>In a similar setup, I have the user details endpoint exposed by a resource server behind the Spring client. The payload returned by this endpoint include the expiration time of access token. In Angular app, I schedule a new call to this endpoint just before the access token expires. That way, the session in Spring client is kept alive, and the access token it contains are always valid.</p>\n"}],"owner":{"account_id":5799702,"reputation":49,"user_id":4574249,"display_name":"aditya chava"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":87,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1696696046,"creation_date":1696682671,"question_id":77249815,"body_markdown":"I am using spring-security-oauth2 client for oauth2 client and my front end is angular application.\r\n\r\nI am trying to implement auto logout in case , there is a session timeout.\r\nso far I am unsuccessful.\r\n\r\nthis is my bean code.\r\nI am setting invalidSessionUrl(&quot;auth server logout url&quot;) in the httpSecurity DSL.\r\nThis is the code reference I am having https://docs.spring.io/spring-security/reference/servlet/authentication/session-management.html#clearing-session-cookie-on-logout\r\n\r\n\r\n@Bean\r\n  public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n\r\n    http\r\n        .headers(headersConfig -&gt;\r\n            headersConfig\r\n                .frameOptions(HeadersConfigurer.FrameOptionsConfig::sameOrigin)\r\n        )\r\n        .sessionManagement(sessionConfig -&gt; sessionConfig.invalidSessionUrl(&quot;http://localhost:8080/authserver/logout?redirect_uri=http://localhost:8080/test&amp;client_id=test&quot;))\r\n        .authorizeHttpRequests(authorize -&gt; authorize\r\n            .anyRequest().authenticated()\r\n        )\r\n        .oauth2Login(oauth2Config -&gt; oauth2Config\r\n            .authorizationEndpoint(authorizationEndpointConfig -&gt; authorizationEndpointConfig\r\n                .authorizationRequestResolver(\r\n                    authorizationRequestResolver(clientRegistrationRepository)\r\n                )\r\n            )\r\n        )\r\n        .csrf(csrfConfig -&gt;\r\n            csrfConfig.disable()\r\n        );\r\n\r\n    return http.build();\r\n  }\r\non invalidsession, I am redirecting to the authserver logout page. But when the request is made, on session expiry it is not trying to parse the json request. Instead it show show the logout page. Is it possible?\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/5uJW6.png\r\n\r\n","title":"automatically logout when there session timeout in angular and spring boot oauth2 client application","body":"<p>I am using spring-security-oauth2 client for oauth2 client and my front end is angular application.</p>\n<p>I am trying to implement auto logout in case , there is a session timeout.\nso far I am unsuccessful.</p>\n<p>this is my bean code.\nI am setting invalidSessionUrl(&quot;auth server logout url&quot;) in the httpSecurity DSL.\nThis is the code reference I am having <a href=\"https://docs.spring.io/spring-security/reference/servlet/authentication/session-management.html#clearing-session-cookie-on-logout\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-security/reference/servlet/authentication/session-management.html#clearing-session-cookie-on-logout</a></p>\n<p>@Bean\npublic SecurityFilterChain filterChain(HttpSecurity http) throws Exception {</p>\n<pre><code>http\n    .headers(headersConfig -&gt;\n        headersConfig\n            .frameOptions(HeadersConfigurer.FrameOptionsConfig::sameOrigin)\n    )\n    .sessionManagement(sessionConfig -&gt; sessionConfig.invalidSessionUrl(&quot;http://localhost:8080/authserver/logout?redirect_uri=http://localhost:8080/test&amp;client_id=test&quot;))\n    .authorizeHttpRequests(authorize -&gt; authorize\n        .anyRequest().authenticated()\n    )\n    .oauth2Login(oauth2Config -&gt; oauth2Config\n        .authorizationEndpoint(authorizationEndpointConfig -&gt; authorizationEndpointConfig\n            .authorizationRequestResolver(\n                authorizationRequestResolver(clientRegistrationRepository)\n            )\n        )\n    )\n    .csrf(csrfConfig -&gt;\n        csrfConfig.disable()\n    );\n\nreturn http.build();\n</code></pre>\n<p>}\non invalidsession, I am redirecting to the authserver logout page. But when the request is made, on session expiry it is not trying to parse the json request. Instead it show show the logout page. Is it possible?</p>\n<p><a href=\"https://i.stack.imgur.com/5uJW6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/5uJW6.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","timeout","inputstream"],"answers":[{"tags":[],"owner":{"account_id":3076,"reputation":7635,"user_id":4362,"display_name":"jt."},"down_vote_count":1,"up_vote_count":7,"is_accepted":false,"score":6,"last_activity_date":1241055865,"creation_date":1241055865,"answer_id":805048,"question_id":804951,"body_markdown":"I have not used the classes from the Java NIO package, but it *seems* they might be of some help here. Specifically, [java.nio.channels.Channels][1] and [java.nio.channels.InterruptibleChannel][2].\r\n\r\n\r\n  [1]: http://java.sun.com/javase/6/docs/api/java/nio/channels/Channels.html\r\n  [2]: http://java.sun.com/javase/6/docs/api/java/nio/channels/InterruptibleChannel.html","title":"Is it possible to read from a InputStream with a timeout?","body":"<p>I have not used the classes from the Java NIO package, but it <em>seems</em> they might be of some help here. Specifically, <a href=\"http://java.sun.com/javase/6/docs/api/java/nio/channels/Channels.html\" rel=\"noreferrer\">java.nio.channels.Channels</a> and <a href=\"http://java.sun.com/javase/6/docs/api/java/nio/channels/InterruptibleChannel.html\" rel=\"noreferrer\">java.nio.channels.InterruptibleChannel</a>.</p>\n"},{"tags":[],"owner":{"display_name":"Merzbow"},"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1241082829,"creation_date":1241082829,"answer_id":806051,"question_id":804951,"body_markdown":"As jt said, NIO is the best (and correct) solution. If you really are stuck with an InputStream though, you could either\r\n\r\n1. Spawn a thread who&#39;s exclusive job is to read from the InputStream and put the result into a buffer which can be read from your original thread without blocking. This should work well if you only ever have one instance of the stream. Otherwise you may be able to kill the thread using the deprecated methods in the Thread class, though this may cause resource leaks.\r\n\r\n2. Rely on isAvailable to indicate data that can be read without blocking. However in some cases (such as with Sockets) it can take a potentially blocking read for isAvailable to report something other than 0.\r\n","title":"Is it possible to read from a InputStream with a timeout?","body":"<p>As jt said, NIO is the best (and correct) solution. If you really are stuck with an InputStream though, you could either</p>\n\n<ol>\n<li><p>Spawn a thread who's exclusive job is to read from the InputStream and put the result into a buffer which can be read from your original thread without blocking. This should work well if you only ever have one instance of the stream. Otherwise you may be able to kill the thread using the deprecated methods in the Thread class, though this may cause resource leaks.</p></li>\n<li><p>Rely on isAvailable to indicate data that can be read without blocking. However in some cases (such as with Sockets) it can take a potentially blocking read for isAvailable to report something other than 0.</p></li>\n</ol>\n"},{"tags":[],"owner":{"display_name":"JKL"},"down_vote_count":3,"up_vote_count":8,"is_accepted":false,"score":5,"last_activity_date":1241122154,"creation_date":1241122154,"answer_id":808795,"question_id":804951,"body_markdown":"Here is a way to get a NIO FileChannel from System.in and check for availability of data using a timeout, which is a special case of the problem described in the question.  Run it at the console, don&#39;t type any input, and wait for the results.  It was tested successfully under Java 6 on Windows and Linux.\r\n\r\n    import java.io.FileInputStream;\r\n    import java.io.FilterInputStream;\r\n    import java.io.IOException;\r\n    import java.io.InputStream;\r\n    import java.lang.reflect.Field;\r\n    import java.nio.ByteBuffer;\r\n    import java.nio.channels.ClosedByInterruptException;\r\n    \r\n    public class Main {\r\n    \r\n        static final ByteBuffer buf = ByteBuffer.allocate(4096);\r\n        \r\n        public static void main(String[] args) {\r\n    \r\n            long timeout = 1000 * 5;\r\n            \r\n            try {\r\n                InputStream in = extract(System.in);\r\n                if (! (in instanceof FileInputStream))\r\n                    throw new RuntimeException(\r\n                            &quot;Could not extract a FileInputStream from STDIN.&quot;);\r\n    \r\n                try {\r\n                    int ret = maybeAvailable((FileInputStream)in, timeout);\r\n                    System.out.println(\r\n                            Integer.toString(ret) + &quot; bytes were read.&quot;);\r\n                    \r\n                } finally {\r\n                    in.close();\r\n                }\r\n                \r\n            } catch (Exception e) {\r\n                throw new RuntimeException(e);\r\n            }\r\n    \r\n        }\r\n    \r\n        /* unravels all layers of FilterInputStream wrappers to get to the\r\n         * core InputStream\r\n         */\r\n        public static InputStream extract(InputStream in)\r\n                throws NoSuchFieldException, IllegalAccessException {\r\n    \r\n            Field f = FilterInputStream.class.getDeclaredField(&quot;in&quot;);\r\n            f.setAccessible(true);\r\n            \r\n            while( in instanceof FilterInputStream )\r\n                in = (InputStream)f.get((FilterInputStream)in);\r\n    \r\n            return in;\r\n        }\r\n    \r\n        /* Returns the number of bytes which could be read from the stream,\r\n         * timing out after the specified number of milliseconds.\r\n         * Returns 0 on timeout (because no bytes could be read)\r\n         * and -1 for end of stream.\r\n         */\r\n        public static int maybeAvailable(final FileInputStream in, long timeout)\r\n                throws IOException, InterruptedException {\r\n    \r\n            final int[] dataReady = {0};\r\n            final IOException[] maybeException = {null};\r\n            final Thread reader = new Thread() {\r\n                public void run() {                \r\n                    try {\r\n                        dataReady[0] = in.getChannel().read(buf);\r\n                    } catch (ClosedByInterruptException e) {\r\n                        System.err.println(&quot;Reader interrupted.&quot;);\r\n                    } catch (IOException e) {\r\n                        maybeException[0] = e;\r\n                    }\r\n                }\r\n            };\r\n    \r\n            Thread interruptor = new Thread() {\r\n                public void run() {\r\n                    reader.interrupt();\r\n                }\r\n            };\r\n    \r\n            reader.start();\r\n            for(;;) {\r\n                \r\n                reader.join(timeout);\r\n                if (!reader.isAlive())\r\n                    break;\r\n    \r\n                interruptor.start();\r\n                interruptor.join(1000);\r\n                reader.join(1000);\r\n                if (!reader.isAlive())\r\n                    break;\r\n    \r\n                System.err.println(&quot;We&#39;re hung&quot;);\r\n                System.exit(1);\r\n            }\r\n    \r\n            if ( maybeException[0] != null )\r\n                throw maybeException[0];\r\n    \r\n            return dataReady[0];\r\n        }\r\n    }\r\n\r\nInterestingly, when running the program inside NetBeans 6.5 rather than at the console, the timeout doesn&#39;t work at all, and the call to System.exit() is actually necessary to kill the zombie threads.  What happens is that the interruptor thread blocks (!) on the call to reader.interrupt().  Another test program (not shown here) additionally tries to close the channel, but that doesn&#39;t work either.\r\n","title":"Is it possible to read from a InputStream with a timeout?","body":"<p>Here is a way to get a NIO FileChannel from System.in and check for availability of data using a timeout, which is a special case of the problem described in the question.  Run it at the console, don't type any input, and wait for the results.  It was tested successfully under Java 6 on Windows and Linux.</p>\n\n<pre><code>import java.io.FileInputStream;\nimport java.io.FilterInputStream;\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.lang.reflect.Field;\nimport java.nio.ByteBuffer;\nimport java.nio.channels.ClosedByInterruptException;\n\npublic class Main {\n\n    static final ByteBuffer buf = ByteBuffer.allocate(4096);\n\n    public static void main(String[] args) {\n\n        long timeout = 1000 * 5;\n\n        try {\n            InputStream in = extract(System.in);\n            if (! (in instanceof FileInputStream))\n                throw new RuntimeException(\n                        \"Could not extract a FileInputStream from STDIN.\");\n\n            try {\n                int ret = maybeAvailable((FileInputStream)in, timeout);\n                System.out.println(\n                        Integer.toString(ret) + \" bytes were read.\");\n\n            } finally {\n                in.close();\n            }\n\n        } catch (Exception e) {\n            throw new RuntimeException(e);\n        }\n\n    }\n\n    /* unravels all layers of FilterInputStream wrappers to get to the\n     * core InputStream\n     */\n    public static InputStream extract(InputStream in)\n            throws NoSuchFieldException, IllegalAccessException {\n\n        Field f = FilterInputStream.class.getDeclaredField(\"in\");\n        f.setAccessible(true);\n\n        while( in instanceof FilterInputStream )\n            in = (InputStream)f.get((FilterInputStream)in);\n\n        return in;\n    }\n\n    /* Returns the number of bytes which could be read from the stream,\n     * timing out after the specified number of milliseconds.\n     * Returns 0 on timeout (because no bytes could be read)\n     * and -1 for end of stream.\n     */\n    public static int maybeAvailable(final FileInputStream in, long timeout)\n            throws IOException, InterruptedException {\n\n        final int[] dataReady = {0};\n        final IOException[] maybeException = {null};\n        final Thread reader = new Thread() {\n            public void run() {                \n                try {\n                    dataReady[0] = in.getChannel().read(buf);\n                } catch (ClosedByInterruptException e) {\n                    System.err.println(\"Reader interrupted.\");\n                } catch (IOException e) {\n                    maybeException[0] = e;\n                }\n            }\n        };\n\n        Thread interruptor = new Thread() {\n            public void run() {\n                reader.interrupt();\n            }\n        };\n\n        reader.start();\n        for(;;) {\n\n            reader.join(timeout);\n            if (!reader.isAlive())\n                break;\n\n            interruptor.start();\n            interruptor.join(1000);\n            reader.join(1000);\n            if (!reader.isAlive())\n                break;\n\n            System.err.println(\"We're hung\");\n            System.exit(1);\n        }\n\n        if ( maybeException[0] != null )\n            throw maybeException[0];\n\n        return dataReady[0];\n    }\n}\n</code></pre>\n\n<p>Interestingly, when running the program inside NetBeans 6.5 rather than at the console, the timeout doesn't work at all, and the call to System.exit() is actually necessary to kill the zombie threads.  What happens is that the interruptor thread blocks (!) on the call to reader.interrupt().  Another test program (not shown here) additionally tries to close the channel, but that doesn't work either.</p>\n"},{"tags":[],"owner":{"account_id":611,"reputation":5077,"user_id":799,"accept_rate":100,"display_name":"Templar"},"down_vote_count":0,"up_vote_count":27,"is_accepted":false,"score":27,"last_activity_date":1410939298,"creation_date":1315287383,"answer_id":7315373,"question_id":804951,"body_markdown":"If your InputStream is backed by a Socket, you can set a Socket timeout (in milliseconds) using [setSoTimeout][1].  If the read() call doesn&#39;t unblock within the timeout specified, it will throw a SocketTimeoutException.\r\n\r\nJust make sure that you call setSoTimeout on the Socket before making the read() call.\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/api/java/net/Socket.html#setSoTimeout%28int%29","title":"Is it possible to read from a InputStream with a timeout?","body":"<p>If your InputStream is backed by a Socket, you can set a Socket timeout (in milliseconds) using <a href=\"http://docs.oracle.com/javase/7/docs/api/java/net/Socket.html#setSoTimeout%28int%29\" rel=\"noreferrer\">setSoTimeout</a>.  If the read() call doesn't unblock within the timeout specified, it will throw a SocketTimeoutException.</p>\n\n<p>Just make sure that you call setSoTimeout on the Socket before making the read() call.</p>\n"},{"tags":[],"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"down_vote_count":3,"up_vote_count":21,"is_accepted":false,"score":18,"last_activity_date":1319066238,"creation_date":1319066238,"answer_id":7829362,"question_id":804951,"body_markdown":"I would question the problem statement rather than just accept it blindly. You only need timeouts from the console or over the network. If the latter you have `Socket.setSoTimeout()` and `HttpURLConnection.setReadTimeout()` which both do exactly what is required, as long as you set them up correctly when you construct/acquire them. Leaving it to an arbitrary point later in the application when all you have is the InputStream is poor design leading to a very awkward implementation.","title":"Is it possible to read from a InputStream with a timeout?","body":"<p>I would question the problem statement rather than just accept it blindly. You only need timeouts from the console or over the network. If the latter you have <code>Socket.setSoTimeout()</code> and <code>HttpURLConnection.setReadTimeout()</code> which both do exactly what is required, as long as you set them up correctly when you construct/acquire them. Leaving it to an arbitrary point later in the application when all you have is the InputStream is poor design leading to a very awkward implementation.</p>\n"},{"tags":[],"owner":{"account_id":207215,"reputation":2008,"user_id":456956,"display_name":"Ian Jones"},"down_vote_count":8,"up_vote_count":82,"is_accepted":false,"score":74,"last_activity_date":1332463179,"creation_date":1332463179,"answer_id":9832633,"question_id":804951,"body_markdown":"Assuming your stream is not backed by a socket (so you can&#39;t use `Socket.setSoTimeout()`), I think the standard way of solving this type of problem is to use a Future.\r\n\r\nSuppose I have the following executor and streams:\r\n\r\n        ExecutorService executor = Executors.newFixedThreadPool(2);\r\n        final PipedOutputStream outputStream = new PipedOutputStream();\r\n        final PipedInputStream inputStream = new PipedInputStream(outputStream);\r\n\r\nI have writer that writes some data then waits for 5 seconds before writing the last piece of data and closing the stream:\r\n\r\n        Runnable writeTask = new Runnable() {\r\n            @Override\r\n            public void run() {\r\n                try {\r\n                    outputStream.write(1);\r\n                    outputStream.write(2);\r\n                    Thread.sleep(5000);\r\n                    outputStream.write(3);\r\n                    outputStream.close();\r\n                } catch (Exception e) {\r\n                    e.printStackTrace();\r\n                }\r\n            }\r\n        };\r\n        executor.submit(writeTask);\r\n\r\nThe normal way of reading this is as follows. The read will block indefinitely for data and so this completes in 5s:\r\n\r\n        long start = currentTimeMillis();\r\n        int readByte = 1;\r\n        // Read data without timeout\r\n        while (readByte &gt;= 0) {\r\n            readByte = inputStream.read();\r\n            if (readByte &gt;= 0)\r\n                System.out.println(&quot;Read: &quot; + readByte);\r\n        }\r\n        System.out.println(&quot;Complete in &quot; + (currentTimeMillis() - start) + &quot;ms&quot;);\r\n\r\nwhich outputs:\r\n\r\n    Read: 1\r\n    Read: 2\r\n    Read: 3\r\n    Complete in 5001ms\r\n\r\nIf there was a more fundamental problem, like the writer not responding, the reader would block for ever. \r\nIf I wrap the read in a future, I can then control the timeout as follows:\r\n\r\n        int readByte = 1;\r\n        // Read data with timeout\r\n        Callable&lt;Integer&gt; readTask = new Callable&lt;Integer&gt;() {\r\n            @Override\r\n            public Integer call() throws Exception {\r\n                return inputStream.read();\r\n            }\r\n        };\r\n        while (readByte &gt;= 0) {\r\n            Future&lt;Integer&gt; future = executor.submit(readTask);\r\n            readByte = future.get(1000, TimeUnit.MILLISECONDS);\r\n            if (readByte &gt;= 0)\r\n                System.out.println(&quot;Read: &quot; + readByte);\r\n        }\r\n\r\nwhich outputs:\r\n\r\n    Read: 1\r\n    Read: 2\r\n    Exception in thread &quot;main&quot; java.util.concurrent.TimeoutException\r\n    \tat java.util.concurrent.FutureTask$Sync.innerGet(FutureTask.java:228)\r\n    \tat java.util.concurrent.FutureTask.get(FutureTask.java:91)\r\n    \tat test.InputStreamWithTimeoutTest.main(InputStreamWithTimeoutTest.java:74)\r\n\r\nI can catch the TimeoutException and do whatever cleanup I want.","title":"Is it possible to read from a InputStream with a timeout?","body":"<p>Assuming your stream is not backed by a socket (so you can't use <code>Socket.setSoTimeout()</code>), I think the standard way of solving this type of problem is to use a Future.</p>\n\n<p>Suppose I have the following executor and streams:</p>\n\n<pre><code>    ExecutorService executor = Executors.newFixedThreadPool(2);\n    final PipedOutputStream outputStream = new PipedOutputStream();\n    final PipedInputStream inputStream = new PipedInputStream(outputStream);\n</code></pre>\n\n<p>I have writer that writes some data then waits for 5 seconds before writing the last piece of data and closing the stream:</p>\n\n<pre><code>    Runnable writeTask = new Runnable() {\n        @Override\n        public void run() {\n            try {\n                outputStream.write(1);\n                outputStream.write(2);\n                Thread.sleep(5000);\n                outputStream.write(3);\n                outputStream.close();\n            } catch (Exception e) {\n                e.printStackTrace();\n            }\n        }\n    };\n    executor.submit(writeTask);\n</code></pre>\n\n<p>The normal way of reading this is as follows. The read will block indefinitely for data and so this completes in 5s:</p>\n\n<pre><code>    long start = currentTimeMillis();\n    int readByte = 1;\n    // Read data without timeout\n    while (readByte &gt;= 0) {\n        readByte = inputStream.read();\n        if (readByte &gt;= 0)\n            System.out.println(\"Read: \" + readByte);\n    }\n    System.out.println(\"Complete in \" + (currentTimeMillis() - start) + \"ms\");\n</code></pre>\n\n<p>which outputs:</p>\n\n<pre><code>Read: 1\nRead: 2\nRead: 3\nComplete in 5001ms\n</code></pre>\n\n<p>If there was a more fundamental problem, like the writer not responding, the reader would block for ever. \nIf I wrap the read in a future, I can then control the timeout as follows:</p>\n\n<pre><code>    int readByte = 1;\n    // Read data with timeout\n    Callable&lt;Integer&gt; readTask = new Callable&lt;Integer&gt;() {\n        @Override\n        public Integer call() throws Exception {\n            return inputStream.read();\n        }\n    };\n    while (readByte &gt;= 0) {\n        Future&lt;Integer&gt; future = executor.submit(readTask);\n        readByte = future.get(1000, TimeUnit.MILLISECONDS);\n        if (readByte &gt;= 0)\n            System.out.println(\"Read: \" + readByte);\n    }\n</code></pre>\n\n<p>which outputs:</p>\n\n<pre><code>Read: 1\nRead: 2\nException in thread \"main\" java.util.concurrent.TimeoutException\n    at java.util.concurrent.FutureTask$Sync.innerGet(FutureTask.java:228)\n    at java.util.concurrent.FutureTask.get(FutureTask.java:91)\n    at test.InputStreamWithTimeoutTest.main(InputStreamWithTimeoutTest.java:74)\n</code></pre>\n\n<p>I can catch the TimeoutException and do whatever cleanup I want.</p>\n"},{"tags":[],"owner":{"account_id":1659920,"reputation":22819,"user_id":1528401,"display_name":"Glen Best"},"down_vote_count":2,"up_vote_count":96,"is_accepted":false,"score":94,"last_activity_date":1367389930,"creation_date":1367389930,"answer_id":16313762,"question_id":804951,"body_markdown":"**Using inputStream.available()**\r\n\r\n&gt; *It is always acceptable for System.in.available() to return 0.*\r\n\r\nI&#39;ve found the opposite - it always returns the best value for the number of bytes available.  Javadoc for `InputStream.available()`:\r\n\r\n    Returns an estimate of the number of bytes that can be read (or skipped over) \r\n    from this input stream without blocking by the next invocation of a method for \r\n    this input stream.\r\n\r\nAn estimate is unavoidable due to timing/staleness.  The figure can be a one-off underestimate because new data are constantly arriving.  However it always &quot;catches up&quot; on the next call - it should account for all arrived data, bar that arriving just at the moment of the new call.  Permanently returning 0 when there are data fails the condition above.\r\n\r\n**First Caveat: Concrete subclasses of InputStream are responsible for available()**\r\n\r\n`InputStream` is an abstract class.  It has no data source.  It&#39;s meaningless for it to have available data.  Hence, javadoc for `available()` also states:\r\n\r\n    The available method for class InputStream always returns 0.\r\n    \r\n    This method should be overridden by subclasses.\r\n\r\nAnd indeed, the concrete input stream classes do override available(), providing meaningful values, not constant 0s.\r\n\r\n**Second Caveat: Ensure you use carriage-return when typing input in Windows.**\r\n\r\nIf using `System.in`, your program only receives input when your command shell hands it over.  If you&#39;re using file redirection/pipes (e.g. somefile &gt; java myJavaApp or somecommand | java myJavaApp ), then input data are usually handed over immediately.  However, if you manually type input, then data handover can be delayed.  E.g. With windows cmd.exe shell, the data are buffered within cmd.exe shell.  Data are only passed to the executing java program following carriage-return (control-m or `&lt;enter&gt;`).  That&#39;s a limitation of the execution environment.  Of course, InputStream.available() will return 0 for as long as the shell buffers the data - that&#39;s correct behaviour; there are no available data at that point.  As soon as the data are available from the shell, the method returns a value &gt; 0.  NB: Cygwin uses cmd.exe too.\r\n\r\n\r\nSimplest solution (no blocking, so no timeout required)\r\n---------------------\r\nJust use this:\r\n\r\n        byte[] inputData = new byte[1024];\r\n        int result = is.read(inputData, 0, is.available());  \r\n        // result will indicate number of bytes read; -1 for EOF with no data read.\r\n\r\nOR equivalently,\r\n\r\n        BufferedReader br = new BufferedReader(new InputStreamReader(System.in, Charset.forName(&quot;ISO-8859-1&quot;)),1024);\r\n        // ...\r\n             // inside some iteration / processing logic:\r\n             if (br.ready()) {\r\n                 int readCount = br.read(inputData, bufferOffset, inputData.length-bufferOffset);\r\n             }\r\n      \r\n\r\n     \r\nRicher Solution (maximally fills buffer within timeout period)\r\n--------------------------------------------------------------\r\n\r\nDeclare this:\r\n\r\n    public static int readInputStreamWithTimeout(InputStream is, byte[] b, int timeoutMillis)\r\n         throws IOException  {\r\n         int bufferOffset = 0;\r\n         long maxTimeMillis = System.currentTimeMillis() + timeoutMillis;\r\n         while (System.currentTimeMillis() &lt; maxTimeMillis &amp;&amp; bufferOffset &lt; b.length) {\r\n             int readLength = java.lang.Math.min(is.available(),b.length-bufferOffset);\r\n             // can alternatively use bufferedReader, guarded by isReady():\r\n             int readResult = is.read(b, bufferOffset, readLength);\r\n             if (readResult == -1) break;\r\n             bufferOffset += readResult;\r\n         }\r\n         return bufferOffset;\r\n     }\r\n\r\nThen use this:\r\n\r\n        byte[] inputData = new byte[1024];\r\n        int readCount = readInputStreamWithTimeout(System.in, inputData, 6000);  // 6 second timeout\r\n        // readCount will indicate number of bytes read; -1 for EOF with no data read.\r\n\r\n","title":"Is it possible to read from a InputStream with a timeout?","body":"<p><strong>Using inputStream.available()</strong></p>\n\n<blockquote>\n  <p><em>It is always acceptable for System.in.available() to return 0.</em></p>\n</blockquote>\n\n<p>I've found the opposite - it always returns the best value for the number of bytes available.  Javadoc for <code>InputStream.available()</code>:</p>\n\n<pre><code>Returns an estimate of the number of bytes that can be read (or skipped over) \nfrom this input stream without blocking by the next invocation of a method for \nthis input stream.\n</code></pre>\n\n<p>An estimate is unavoidable due to timing/staleness.  The figure can be a one-off underestimate because new data are constantly arriving.  However it always \"catches up\" on the next call - it should account for all arrived data, bar that arriving just at the moment of the new call.  Permanently returning 0 when there are data fails the condition above.</p>\n\n<p><strong>First Caveat: Concrete subclasses of InputStream are responsible for available()</strong></p>\n\n<p><code>InputStream</code> is an abstract class.  It has no data source.  It's meaningless for it to have available data.  Hence, javadoc for <code>available()</code> also states:</p>\n\n<pre><code>The available method for class InputStream always returns 0.\n\nThis method should be overridden by subclasses.\n</code></pre>\n\n<p>And indeed, the concrete input stream classes do override available(), providing meaningful values, not constant 0s.</p>\n\n<p><strong>Second Caveat: Ensure you use carriage-return when typing input in Windows.</strong></p>\n\n<p>If using <code>System.in</code>, your program only receives input when your command shell hands it over.  If you're using file redirection/pipes (e.g. somefile > java myJavaApp or somecommand | java myJavaApp ), then input data are usually handed over immediately.  However, if you manually type input, then data handover can be delayed.  E.g. With windows cmd.exe shell, the data are buffered within cmd.exe shell.  Data are only passed to the executing java program following carriage-return (control-m or <code>&lt;enter&gt;</code>).  That's a limitation of the execution environment.  Of course, InputStream.available() will return 0 for as long as the shell buffers the data - that's correct behaviour; there are no available data at that point.  As soon as the data are available from the shell, the method returns a value > 0.  NB: Cygwin uses cmd.exe too.</p>\n\n<h2>Simplest solution (no blocking, so no timeout required)</h2>\n\n<p>Just use this:</p>\n\n<pre><code>    byte[] inputData = new byte[1024];\n    int result = is.read(inputData, 0, is.available());  \n    // result will indicate number of bytes read; -1 for EOF with no data read.\n</code></pre>\n\n<p>OR equivalently,</p>\n\n<pre><code>    BufferedReader br = new BufferedReader(new InputStreamReader(System.in, Charset.forName(\"ISO-8859-1\")),1024);\n    // ...\n         // inside some iteration / processing logic:\n         if (br.ready()) {\n             int readCount = br.read(inputData, bufferOffset, inputData.length-bufferOffset);\n         }\n</code></pre>\n\n<h2>Richer Solution (maximally fills buffer within timeout period)</h2>\n\n<p>Declare this:</p>\n\n<pre><code>public static int readInputStreamWithTimeout(InputStream is, byte[] b, int timeoutMillis)\n     throws IOException  {\n     int bufferOffset = 0;\n     long maxTimeMillis = System.currentTimeMillis() + timeoutMillis;\n     while (System.currentTimeMillis() &lt; maxTimeMillis &amp;&amp; bufferOffset &lt; b.length) {\n         int readLength = java.lang.Math.min(is.available(),b.length-bufferOffset);\n         // can alternatively use bufferedReader, guarded by isReady():\n         int readResult = is.read(b, bufferOffset, readLength);\n         if (readResult == -1) break;\n         bufferOffset += readResult;\n     }\n     return bufferOffset;\n }\n</code></pre>\n\n<p>Then use this:</p>\n\n<pre><code>    byte[] inputData = new byte[1024];\n    int readCount = readInputStreamWithTimeout(System.in, inputData, 6000);  // 6 second timeout\n    // readCount will indicate number of bytes read; -1 for EOF with no data read.\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10010550,"reputation":346,"user_id":9465588,"display_name":"DGoiko"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1579742765,"creation_date":1579739552,"answer_id":59870133,"question_id":804951,"body_markdown":"Inspired in [this answer][1] I came up with a bit more object-oriented solution.\r\n\r\n**This is only valid if you&#39;re intending to read characters**\r\n\r\nYou can override BufferedReader and implement something like this:\r\n\r\n    public class SafeBufferedReader extends BufferedReader{\r\n    \r\n    \tprivate long millisTimeout;\r\n\r\n        ( . . . )\r\n\r\n    \t@Override\r\n    \tpublic int read(char[] cbuf, int off, int len) throws IOException {\r\n    \t\ttry {\r\n    \t\t\twaitReady();\r\n    \t\t} catch(IllegalThreadStateException e) {\r\n    \t\t\treturn 0;\r\n    \t\t}\r\n    \t\treturn super.read(cbuf, off, len);\r\n    \t}\r\n\r\n    \tprotected void waitReady() throws IllegalThreadStateException, IOException {\r\n    \t\tif(ready()) return;\r\n    \t\tlong timeout = System.currentTimeMillis() + millisTimeout;\r\n    \t\twhile(System.currentTimeMillis() &lt; timeout) {\r\n    \t\t\tif(ready()) return;\r\n    \t\t\ttry {\r\n    \t\t\t\tThread.sleep(100);\r\n    \t\t\t} catch (InterruptedException e) {\r\n    \t\t\t\tbreak; // Should restore flag\r\n    \t\t\t}\r\n    \t\t}\r\n    \t\tif(ready()) return; // Just in case.\r\n    \t\tthrow new IllegalThreadStateException(&quot;Read timed out&quot;);\r\n    \t}\r\n    }\r\n\r\n\r\n**Here&#39;s an almost complete example.**\r\n\r\nI&#39;m returning 0 on some methods, you should change it to -2 to meet your needs, but I think that 0 is more suitable with BufferedReader contract. Nothing wrong happened, it just read 0 chars. readLine method is a horrible performance killer. **You should create a entirely new BufferedReader if you actually want to use readLin**e. Right now, it is not thread safe. If someone invokes  an operation while readLines is waiting for a line, it will produce unexpected results\r\n\r\nI don&#39;t like returning -2 where I am. I&#39;d throw an exception because some people may just be checking if int &lt; 0 to consider EOS. Anyway, those methods claim that &quot;can&#39;t block&quot;, you should check if that statement is actually true and just don&#39;t override&#39;em.\r\n\r\n\r\n    \r\n    import java.io.BufferedReader;\r\n    import java.io.IOException;\r\n    import java.io.Reader;\r\n    import java.nio.CharBuffer;\r\n    import java.util.concurrent.TimeUnit;\r\n    import java.util.stream.Stream;\r\n    \r\n    /**\r\n     * \r\n     * readLine\r\n     * \r\n     * @author Dario\r\n     *\r\n     */\r\n    public class SafeBufferedReader extends BufferedReader{\r\n    \r\n    \tprivate long millisTimeout;\r\n    \t\r\n    \tprivate long millisInterval = 100;\r\n    \t\r\n    \tprivate int lookAheadLine;\r\n    \t\r\n    \tpublic SafeBufferedReader(Reader in, int sz, long millisTimeout) {\r\n    \t\tsuper(in, sz);\r\n    \t\tthis.millisTimeout = millisTimeout;\r\n    \t}\r\n    \r\n    \tpublic SafeBufferedReader(Reader in, long millisTimeout) {\r\n    \t\tsuper(in);\r\n    \t\tthis.millisTimeout = millisTimeout;\r\n    \t}\r\n    \r\n    \t\r\n    \t\r\n    \t/**\r\n    \t * This is probably going to kill readLine performance. You should study BufferedReader and completly override the method.\r\n    \t * \r\n    \t * It should mark the position, then perform its normal operation in a nonblocking way, and if it reaches the timeout then reset position and throw IllegalThreadStateException\r\n    \t * \r\n    \t */\r\n    \t@Override\r\n    \tpublic String readLine() throws IOException {\r\n    \t\ttry {\r\n    \t\t\twaitReadyLine();\r\n    \t\t} catch(IllegalThreadStateException e) {\r\n    \t\t\t//return null; //Null usually means EOS here, so we can&#39;t.\r\n    \t\t\tthrow e;\r\n    \t\t}\r\n    \t\treturn super.readLine();\r\n    \t}\r\n    \t\r\n    \t@Override\r\n    \tpublic int read() throws IOException {\r\n    \t\ttry {\r\n    \t\t\twaitReady();\r\n    \t\t} catch(IllegalThreadStateException e) {\r\n    \t\t\treturn -2; // I&#39;d throw a runtime here, as some people may just be checking if int &lt; 0 to consider EOS\r\n    \t\t}\r\n    \t\treturn super.read();\r\n    \t}\r\n    \t\r\n    \t@Override\r\n    \tpublic int read(char[] cbuf) throws IOException {\r\n    \t\ttry {\r\n    \t\t\twaitReady();\r\n    \t\t} catch(IllegalThreadStateException e) {\r\n    \t\t\treturn -2;  // I&#39;d throw a runtime here, as some people may just be checking if int &lt; 0 to consider EOS\r\n    \t\t}\r\n    \t\treturn super.read(cbuf);\r\n    \t}\r\n    \t\r\n    \t@Override\r\n    \tpublic int read(char[] cbuf, int off, int len) throws IOException {\r\n    \t\ttry {\r\n    \t\t\twaitReady();\r\n    \t\t} catch(IllegalThreadStateException e) {\r\n    \t\t\treturn 0;\r\n    \t\t}\r\n    \t\treturn super.read(cbuf, off, len);\r\n    \t}\r\n    \t\r\n    \t@Override\r\n    \tpublic int read(CharBuffer target) throws IOException {\r\n    \t\ttry {\r\n    \t\t\twaitReady();\r\n    \t\t} catch(IllegalThreadStateException e) {\r\n    \t\t\treturn 0;\r\n    \t\t}\r\n    \t\treturn super.read(target);\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic void mark(int readAheadLimit) throws IOException {\r\n    \t\tsuper.mark(readAheadLimit);\r\n    \t}\r\n    \t\r\n    \t@Override\r\n    \tpublic Stream&lt;String&gt; lines() {\r\n    \t\treturn super.lines();\r\n    \t}\r\n    \t\r\n    \t@Override\r\n    \tpublic void reset() throws IOException {\r\n    \t\tsuper.reset();\r\n    \t}\r\n    \t\r\n    \t@Override\r\n    \tpublic long skip(long n) throws IOException {\r\n    \t\treturn super.skip(n);\r\n    \t}\r\n    \t\r\n    \tpublic long getMillisTimeout() {\r\n    \t\treturn millisTimeout;\r\n    \t}\r\n    \r\n    \tpublic void setMillisTimeout(long millisTimeout) {\r\n    \t\tthis.millisTimeout = millisTimeout;\r\n    \t}\r\n    \t\r\n    \tpublic void setTimeout(long timeout, TimeUnit unit) {\r\n    \t\tthis.millisTimeout = TimeUnit.MILLISECONDS.convert(timeout, unit);\r\n    \t}\r\n    \t\r\n    \tpublic long getMillisInterval() {\r\n    \t\treturn millisInterval;\r\n    \t}\r\n    \r\n    \tpublic void setMillisInterval(long millisInterval) {\r\n    \t\tthis.millisInterval = millisInterval;\r\n    \t}\r\n    \t\r\n    \tpublic void setInterval(long time, TimeUnit unit) {\r\n    \t\tthis.millisInterval = TimeUnit.MILLISECONDS.convert(time, unit);\r\n    \t}\r\n    \r\n    \t/**\r\n    \t * This is actually forcing us to read the buffer twice in order to determine a line is actually ready.\r\n    \t * \r\n    \t * @throws IllegalThreadStateException\r\n    \t * @throws IOException\r\n    \t */\r\n    \tprotected void waitReadyLine() throws IllegalThreadStateException, IOException {\r\n    \t\tlong timeout = System.currentTimeMillis() + millisTimeout;\r\n    \t\twaitReady();\r\n    \t\t\r\n    \t\tsuper.mark(lookAheadLine);\r\n    \t\ttry {\r\n    \t\t\twhile(System.currentTimeMillis() &lt; timeout) {\r\n    \t\t\t\twhile(ready()) {\r\n    \t\t\t\t\tint charInt = super.read();\r\n    \t\t\t\t\tif(charInt==-1) return; // EOS reached\r\n    \t\t\t\t\tchar character = (char) charInt;\r\n    \t\t\t\t\tif(character == &#39;\\n&#39; || character == &#39;\\r&#39; ) return;\r\n    \t\t\t\t}\r\n    \t\t\t\ttry {\r\n    \t\t\t\t\tThread.sleep(millisInterval);\r\n    \t\t\t\t} catch (InterruptedException e) {\r\n    \t\t\t\t\tThread.currentThread().interrupt(); // Restore flag\r\n    \t\t\t\t\tbreak;\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t} finally {\r\n    \t\t\tsuper.reset();\r\n    \t\t}\r\n    \t\tthrow new IllegalThreadStateException(&quot;readLine timed out&quot;);\r\n    \t\t\r\n    \t}\r\n    \t\r\n    \tprotected void waitReady() throws IllegalThreadStateException, IOException {\r\n    \t\tif(ready()) return;\r\n    \t\tlong timeout = System.currentTimeMillis() + millisTimeout;\r\n    \t\twhile(System.currentTimeMillis() &lt; timeout) {\r\n    \t\t\tif(ready()) return;\r\n    \t\t\ttry {\r\n    \t\t\t\tThread.sleep(millisInterval);\r\n    \t\t\t} catch (InterruptedException e) {\r\n    \t\t\t\tThread.currentThread().interrupt(); // Restore flag\r\n    \t\t\t\tbreak;\r\n    \t\t\t}\r\n    \t\t}\r\n    \t\tif(ready()) return; // Just in case.\r\n    \t\tthrow new IllegalThreadStateException(&quot;read timed out&quot;);\r\n    \t}\r\n    \t\r\n    }\r\n\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/16313762/9465588\r\n","title":"Is it possible to read from a InputStream with a timeout?","body":"<p>Inspired in <a href=\"https://stackoverflow.com/a/16313762/9465588\">this answer</a> I came up with a bit more object-oriented solution.</p>\n\n<p><strong>This is only valid if you're intending to read characters</strong></p>\n\n<p>You can override BufferedReader and implement something like this:</p>\n\n<pre><code>public class SafeBufferedReader extends BufferedReader{\n\n    private long millisTimeout;\n\n    ( . . . )\n\n    @Override\n    public int read(char[] cbuf, int off, int len) throws IOException {\n        try {\n            waitReady();\n        } catch(IllegalThreadStateException e) {\n            return 0;\n        }\n        return super.read(cbuf, off, len);\n    }\n\n    protected void waitReady() throws IllegalThreadStateException, IOException {\n        if(ready()) return;\n        long timeout = System.currentTimeMillis() + millisTimeout;\n        while(System.currentTimeMillis() &lt; timeout) {\n            if(ready()) return;\n            try {\n                Thread.sleep(100);\n            } catch (InterruptedException e) {\n                break; // Should restore flag\n            }\n        }\n        if(ready()) return; // Just in case.\n        throw new IllegalThreadStateException(\"Read timed out\");\n    }\n}\n</code></pre>\n\n<p><strong>Here's an almost complete example.</strong></p>\n\n<p>I'm returning 0 on some methods, you should change it to -2 to meet your needs, but I think that 0 is more suitable with BufferedReader contract. Nothing wrong happened, it just read 0 chars. readLine method is a horrible performance killer. <strong>You should create a entirely new BufferedReader if you actually want to use readLin</strong>e. Right now, it is not thread safe. If someone invokes  an operation while readLines is waiting for a line, it will produce unexpected results</p>\n\n<p>I don't like returning -2 where I am. I'd throw an exception because some people may just be checking if int &lt; 0 to consider EOS. Anyway, those methods claim that \"can't block\", you should check if that statement is actually true and just don't override'em.</p>\n\n<pre><code>import java.io.BufferedReader;\nimport java.io.IOException;\nimport java.io.Reader;\nimport java.nio.CharBuffer;\nimport java.util.concurrent.TimeUnit;\nimport java.util.stream.Stream;\n\n/**\n * \n * readLine\n * \n * @author Dario\n *\n */\npublic class SafeBufferedReader extends BufferedReader{\n\n    private long millisTimeout;\n\n    private long millisInterval = 100;\n\n    private int lookAheadLine;\n\n    public SafeBufferedReader(Reader in, int sz, long millisTimeout) {\n        super(in, sz);\n        this.millisTimeout = millisTimeout;\n    }\n\n    public SafeBufferedReader(Reader in, long millisTimeout) {\n        super(in);\n        this.millisTimeout = millisTimeout;\n    }\n\n\n\n    /**\n     * This is probably going to kill readLine performance. You should study BufferedReader and completly override the method.\n     * \n     * It should mark the position, then perform its normal operation in a nonblocking way, and if it reaches the timeout then reset position and throw IllegalThreadStateException\n     * \n     */\n    @Override\n    public String readLine() throws IOException {\n        try {\n            waitReadyLine();\n        } catch(IllegalThreadStateException e) {\n            //return null; //Null usually means EOS here, so we can't.\n            throw e;\n        }\n        return super.readLine();\n    }\n\n    @Override\n    public int read() throws IOException {\n        try {\n            waitReady();\n        } catch(IllegalThreadStateException e) {\n            return -2; // I'd throw a runtime here, as some people may just be checking if int &lt; 0 to consider EOS\n        }\n        return super.read();\n    }\n\n    @Override\n    public int read(char[] cbuf) throws IOException {\n        try {\n            waitReady();\n        } catch(IllegalThreadStateException e) {\n            return -2;  // I'd throw a runtime here, as some people may just be checking if int &lt; 0 to consider EOS\n        }\n        return super.read(cbuf);\n    }\n\n    @Override\n    public int read(char[] cbuf, int off, int len) throws IOException {\n        try {\n            waitReady();\n        } catch(IllegalThreadStateException e) {\n            return 0;\n        }\n        return super.read(cbuf, off, len);\n    }\n\n    @Override\n    public int read(CharBuffer target) throws IOException {\n        try {\n            waitReady();\n        } catch(IllegalThreadStateException e) {\n            return 0;\n        }\n        return super.read(target);\n    }\n\n    @Override\n    public void mark(int readAheadLimit) throws IOException {\n        super.mark(readAheadLimit);\n    }\n\n    @Override\n    public Stream&lt;String&gt; lines() {\n        return super.lines();\n    }\n\n    @Override\n    public void reset() throws IOException {\n        super.reset();\n    }\n\n    @Override\n    public long skip(long n) throws IOException {\n        return super.skip(n);\n    }\n\n    public long getMillisTimeout() {\n        return millisTimeout;\n    }\n\n    public void setMillisTimeout(long millisTimeout) {\n        this.millisTimeout = millisTimeout;\n    }\n\n    public void setTimeout(long timeout, TimeUnit unit) {\n        this.millisTimeout = TimeUnit.MILLISECONDS.convert(timeout, unit);\n    }\n\n    public long getMillisInterval() {\n        return millisInterval;\n    }\n\n    public void setMillisInterval(long millisInterval) {\n        this.millisInterval = millisInterval;\n    }\n\n    public void setInterval(long time, TimeUnit unit) {\n        this.millisInterval = TimeUnit.MILLISECONDS.convert(time, unit);\n    }\n\n    /**\n     * This is actually forcing us to read the buffer twice in order to determine a line is actually ready.\n     * \n     * @throws IllegalThreadStateException\n     * @throws IOException\n     */\n    protected void waitReadyLine() throws IllegalThreadStateException, IOException {\n        long timeout = System.currentTimeMillis() + millisTimeout;\n        waitReady();\n\n        super.mark(lookAheadLine);\n        try {\n            while(System.currentTimeMillis() &lt; timeout) {\n                while(ready()) {\n                    int charInt = super.read();\n                    if(charInt==-1) return; // EOS reached\n                    char character = (char) charInt;\n                    if(character == '\\n' || character == '\\r' ) return;\n                }\n                try {\n                    Thread.sleep(millisInterval);\n                } catch (InterruptedException e) {\n                    Thread.currentThread().interrupt(); // Restore flag\n                    break;\n                }\n            }\n        } finally {\n            super.reset();\n        }\n        throw new IllegalThreadStateException(\"readLine timed out\");\n\n    }\n\n    protected void waitReady() throws IllegalThreadStateException, IOException {\n        if(ready()) return;\n        long timeout = System.currentTimeMillis() + millisTimeout;\n        while(System.currentTimeMillis() &lt; timeout) {\n            if(ready()) return;\n            try {\n                Thread.sleep(millisInterval);\n            } catch (InterruptedException e) {\n                Thread.currentThread().interrupt(); // Restore flag\n                break;\n            }\n        }\n        if(ready()) return; // Just in case.\n        throw new IllegalThreadStateException(\"read timed out\");\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11783353,"reputation":316,"user_id":8622053,"display_name":"Daniel Chin"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1696695126,"creation_date":1690972721,"answer_id":76819031,"question_id":804951,"body_markdown":"**EDIT**: Please see @Vlad &#39;s important comment below. \r\n\r\n## Original answer\r\n\r\nThere is no way to properly block an `InputStream`, unless it&#39;s created by a `Socket`.    \r\n\r\n### 1. Never busy-wait  \r\n&quot;Busy-waiting&quot; refers to using CPU-heavy `while` loops to poll an IO resource. Never busy-wait. The proper way is to mark the current thread as &quot;blocked&quot; and allow the OS to elect other threads to run. When the IO resource becomes available OR the timeout expires, the OS is in charge of marking your thread as &quot;pending&quot; and electing it again. Java&#39;s builtin `read()` implementations do just that.  \r\n\r\nConsequences of busy-waiting:  \r\n- If you have one busy-waiter, the CPU will be running when it&#39;s supposed to be idling.  \r\n- If you have multiple busy-waiters, they will *starve one another* and introduce latencies in the application up to the OS quantum/tick time (usually 10ms-100ms). CPU effective utilization rate also drops, and can approach 0% depending on the situation.  \r\n- If your busy-waiters have thread priorities higher than other real-time threads do, they even starve external applications and introduce latencies.  \r\n\r\n`InputStream.read()` is an IO call. It should not occupy any CPU(s) while waiting for a byte / a timeout. From what I can tell, the `read()` that Java provides support proper blocking, but without any timeout capability. Most other answers to this StackOverflow question provide timeout, but use busy-waiting.  \r\n\r\n### 2. Java violates OOP by allowing `Socket.setSoTimeout`\r\n**Edit**: This claim is wrong as pointed out by @Vlad&#39;s comment.\r\n\r\nConclusion: please consider if `select` solves your problem. ","title":"Is it possible to read from a InputStream with a timeout?","body":"<p><strong>EDIT</strong>: Please see @Vlad 's important comment below.</p>\n<h2>Original answer</h2>\n<p>There is no way to properly block an <code>InputStream</code>, unless it's created by a <code>Socket</code>.</p>\n<h3>1. Never busy-wait</h3>\n<p>&quot;Busy-waiting&quot; refers to using CPU-heavy <code>while</code> loops to poll an IO resource. Never busy-wait. The proper way is to mark the current thread as &quot;blocked&quot; and allow the OS to elect other threads to run. When the IO resource becomes available OR the timeout expires, the OS is in charge of marking your thread as &quot;pending&quot; and electing it again. Java's builtin <code>read()</code> implementations do just that.</p>\n<p>Consequences of busy-waiting:</p>\n<ul>\n<li>If you have one busy-waiter, the CPU will be running when it's supposed to be idling.</li>\n<li>If you have multiple busy-waiters, they will <em>starve one another</em> and introduce latencies in the application up to the OS quantum/tick time (usually 10ms-100ms). CPU effective utilization rate also drops, and can approach 0% depending on the situation.</li>\n<li>If your busy-waiters have thread priorities higher than other real-time threads do, they even starve external applications and introduce latencies.</li>\n</ul>\n<p><code>InputStream.read()</code> is an IO call. It should not occupy any CPU(s) while waiting for a byte / a timeout. From what I can tell, the <code>read()</code> that Java provides support proper blocking, but without any timeout capability. Most other answers to this StackOverflow question provide timeout, but use busy-waiting.</p>\n<h3>2. Java violates OOP by allowing <code>Socket.setSoTimeout</code></h3>\n<p><strong>Edit</strong>: This claim is wrong as pointed out by @Vlad's comment.</p>\n<p>Conclusion: please consider if <code>select</code> solves your problem.</p>\n"}],"owner":{"display_name":"JKL"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":167195,"favorite_count":0,"down_vote_count":0,"up_vote_count":174,"answer_count":9,"score":174,"last_activity_date":1696695126,"creation_date":1241052773,"question_id":804951,"body_markdown":"Specifically, the problem is to write a method like this:\r\n\r\n\tint maybeRead(InputStream in, long timeout)\r\n\r\nwhere the return value is the same as in.read() if data is available within &#39;timeout&#39; milliseconds, and -2 otherwise.  Before the method returns, any spawned threads must exit.\r\n\r\nTo avoid arguments, the subject here java.io.InputStream, as documented by Sun (any Java version).  Please note this is not as simple as it looks.  Below are some facts which are supported directly by Sun&#39;s documentation.\r\n\r\n1.  The in.read() method may be non-interruptible.\r\n\r\n2.  Wrapping the InputStream in a Reader or InterruptibleChannel doesn&#39;t help, because all those classes can do is call methods of the InputStream.  If it were possible to use those classes, it would be possible to write a solution that just executes the same logic directly on the InputStream.\r\n\r\n3.  It is always acceptable for in.available() to return 0.\r\n\r\n4.  The in.close() method may block or do nothing.\r\n\r\n5.  There is no general way to kill another thread.\r\n","title":"Is it possible to read from a InputStream with a timeout?","body":"<p>Specifically, the problem is to write a method like this:</p>\n\n<pre><code>int maybeRead(InputStream in, long timeout)\n</code></pre>\n\n<p>where the return value is the same as in.read() if data is available within 'timeout' milliseconds, and -2 otherwise.  Before the method returns, any spawned threads must exit.</p>\n\n<p>To avoid arguments, the subject here java.io.InputStream, as documented by Sun (any Java version).  Please note this is not as simple as it looks.  Below are some facts which are supported directly by Sun's documentation.</p>\n\n<ol>\n<li><p>The in.read() method may be non-interruptible.</p></li>\n<li><p>Wrapping the InputStream in a Reader or InterruptibleChannel doesn't help, because all those classes can do is call methods of the InputStream.  If it were possible to use those classes, it would be possible to write a solution that just executes the same logic directly on the InputStream.</p></li>\n<li><p>It is always acceptable for in.available() to return 0.</p></li>\n<li><p>The in.close() method may block or do nothing.</p></li>\n<li><p>There is no general way to kill another thread.</p></li>\n</ol>\n"},{"tags":["java","cassandra","karate"],"comments":[{"owner":{"account_id":48302,"reputation":55353,"user_id":143475,"display_name":"Peter Thomas"},"score":0,"creation_date":1696318359,"post_id":77219670,"comment_id":136134063,"body_markdown":"sorry you seem to be new to stack overflow, read this and try to improve your question: https://stackoverflow.com/help/how-to-ask","body":"sorry you seem to be new to stack overflow, read this and try to improve your question: <a href=\"https://stackoverflow.com/help/how-to-ask\">stackoverflow.com/help/how-to-ask</a>"},{"owner":{"account_id":29585373,"reputation":11,"user_id":22674148,"display_name":"Tuguldur"},"score":1,"creation_date":1696321820,"post_id":77219670,"comment_id":136134653,"body_markdown":"Thanks for quick reply, I got solution for this to changing package. \ncom.datastax.oss&#39;s cassandra is working as well. com.datastax.cassandra is getting error.","body":"Thanks for quick reply, I got solution for this to changing package.  com.datastax.oss&#39;s cassandra is working as well. com.datastax.cassandra is getting error."},{"owner":{"account_id":14411493,"reputation":946,"user_id":10410162,"display_name":"Madhavan"},"score":0,"creation_date":1696337285,"post_id":77219670,"comment_id":136137449,"body_markdown":"glad you got it working!","body":"glad you got it working!"}],"owner":{"account_id":29585373,"reputation":11,"user_id":22674148,"display_name":"Tuguldur"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1696694565,"creation_date":1696307283,"question_id":77219670,"body_markdown":"I&#39;m using a Cassandra database and attempting to implement API test automation using KARATE. I aim to generate test data from the database, process it in JavaScript to build the POST request&#39;s body as JSON for the Examples in the Scenario Outline.\r\n\r\n\r\n\r\n\r\nAfter installing Cassandra driver in my Karate codebase, I encountered an issue with sending a request body in a Scenario Outline. However, upon removing the request body from the scenario, it started functioning correctly\r\n\r\n![Trying to check is Scenario Outline examples works](https://i.stack.imgur.com/HHTi4.png)\r\n\r\n![After adding request body, getting error](https://i.stack.imgur.com/7ioky.png)\r\n\r\n![It is working when, removing request body](https://i.stack.imgur.com/U9XK0.png)","title":"In a Karate Scenario Outline test, I aim to construct the Examples using query results retrieved from the Cassandra database","body":"<p>I'm using a Cassandra database and attempting to implement API test automation using KARATE. I aim to generate test data from the database, process it in JavaScript to build the POST request's body as JSON for the Examples in the Scenario Outline.</p>\n<p>After installing Cassandra driver in my Karate codebase, I encountered an issue with sending a request body in a Scenario Outline. However, upon removing the request body from the scenario, it started functioning correctly</p>\n<p><img src=\"https://i.stack.imgur.com/HHTi4.png\" alt=\"Trying to check is Scenario Outline examples works\" /></p>\n<p><img src=\"https://i.stack.imgur.com/7ioky.png\" alt=\"After adding request body, getting error\" /></p>\n<p><img src=\"https://i.stack.imgur.com/U9XK0.png\" alt=\"It is working when, removing request body\" /></p>\n"},{"tags":["java","azure","oauth-2.0","office365","exchange-server"],"owner":{"account_id":2464084,"reputation":61,"user_id":2147582,"display_name":"mario"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":3120,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":0,"score":6,"last_activity_date":1696694306,"creation_date":1665666204,"question_id":74056258,"body_markdown":"I&#39;m using Java 1.8, Jakarta email (version 2.1.0) to connect to Microsoft 365 using OAuth for authentication with SMTP. Client has required to use Oauth authenticate, not basic smtp authentification. After reading of documentation [https://learn.microsoft.com/en-us/exchange/client-developer...][1] and lots other resources I have configured AD to this permissions:\r\n\r\n    Microsoft Graph    offline_access\r\n    Microsoft Graph    User.Read\r\n    Microsoft Graph    Mail.Send\r\n    Microsoft Graph    openid\r\n    Microsoft Graph    IMAP.AccessAsUser.All\r\n    Microsoft Graph    SMTP.Send\r\n    \r\n    Office 365 Exchange Online    full_access_as_app\r\n    Office 365 Exchange Online    POP.AccessAsApp\r\n    Office 365 Exchange Online    Mail.Send\r\n    Office 365 Exchange Online    IMAP.AccessAsApp\r\n    \r\nActivated SMTP client authentication using PowerShell on Azure [https://learn.microsoft.com/en-us/exchange/clients...][2]\r\n\r\n    PS C:\\Users\\dx-2102&gt; Get-TransportConfig | Format-List SmtpClientAuthenticationDisabled   \r\n    SmtpClientAuthenticationDisabled : False\r\n\r\nimplemented code for send email (Java):\r\n\r\n    Properties prop = new Properties();\r\n    prop.put(&quot;mail.smtp.auth&quot;, &quot;true&quot;);\r\n    prop.put(&quot;mail.smtp.starttls.enable&quot;, &quot;true&quot;);\r\n    prop.put(&quot;mail.smtp.host&quot;, emailSettings.getSmtp().getHostname());\r\n    prop.put(&quot;mail.smtp.port&quot;, emailSettings.getSmtp().getPort());\r\n    prop.put(&quot;mail.debug&quot;, &quot;true&quot;);\r\n    prop.put(&quot;mail.debug.auth&quot;, &quot;true&quot;);\r\n    prop.put(&quot;mail.smtp.auth.xoauth2.disable&quot;, &quot;false&quot;);\r\n    prop.put(&quot;mail.smtp.auth.mechanisms&quot;, &quot;XOAUTH2&quot;);\r\n    prop.put(&quot;mail.transport.protocol&quot;, &quot;smtp&quot;);\r\n    prop.put(&quot;mail.smtp.auth.login.disable&quot;, &quot;true&quot;);\r\n    prop.put(&quot;mail.smtp.auth.plain.disable&quot;, &quot;true&quot;);\r\n    \r\n    session = Session.getInstance(prop);\r\n\tsession.setDebug(true);\r\n\tString accessToken = getOAuth2AccessToken();\r\n\r\n    transport = session.getTransport(&quot;smtp&quot;);\r\n\ttransport.connect(emailSettings.getSmtp().getHostname(), emailSettings.getSmtp().getPort(), emailSettings.getSmtp().getUsername(), tokenForSmtp(emailSettings.getSmtp().getUsername(), accessToken));\r\n    /* -- */ \r\n    transport.sendMessage(mimeMessage, mimeMessage.getAllRecipients());\r\n    transport.close();\r\n\r\nmethod for calling/getting token from Azure AD, in response we get a token with expiration time.\r\n\r\n    String url = &quot;https://login.microsoftonline.com/&quot; + Tenant_ID + &quot;/oauth2/token&quot;;\r\n\r\n\tMultiValueMap&lt;String, String&gt; map = new LinkedMultiValueMap&lt;&gt;();\r\n\tmap.add(&quot;grant_type&quot;, &quot;client_credentials&quot;);\r\n\tmap.add(&quot;response_type&quot;, &quot;code&quot;);\r\n\tmap.add(&quot;client_id&quot;, ClientId);\r\n\tmap.add(&quot;client_secret&quot;, ClientSecret);\r\n\tmap.add(&quot;scope&quot;,&quot;openid offline_access https%3A%2F%2Foutlook.office365.com%2FSMTP.Send &quot;);\r\n\r\n\tRestTemplate restTemplate = new RestTemplate();\r\n\tResponseEntity&lt;AzureResponse&gt; response = restTemplate.postForEntity(url, map, AzureResponse.class);\r\n\r\nmethod for preparing token for sending within the SMTP send-mail process\r\n\r\n    private String tokenForSmtp(String userName, String accessToken) {\r\n    \tfinal String ctrlA=Character.toString((char) 1);\r\n    \tfinal String coded= &quot;user=&quot; + userName + ctrlA+&quot;auth=Bearer &quot; + accessToken + ctrlA+ctrlA;\r\n    \treturn Base64.getEncoder().encodeToString(coded.getBytes());\r\n    \t//base64(&quot;user=&quot; + userName + &quot;^Aauth=Bearer &quot; + accessToken + &quot;^A^A&quot;)\r\n    }\r\n\r\n\r\nAfter send of SMTP email I receive error:\r\n\r\n    AUTH XOAUTH2 dXNlcj1zb2ZhQHNvbHV0aW9uZmFjdG9yeWFnLm9ub...=\r\n    535 5.7.3 Authentication unsuccessful [VI1PR0202CA0024.eurprd02.prod.outlook.com]\r\n    Error on sending email: 535 5.7.3 Authentication unsuccessful [VI1PR0202CA0024.eurprd02.prod.outlook.com]\r\n\r\n\r\nDo I need a some other token scope&#39;s from Azure AD other then openid, offline_access and https://outlook.office.com/SMTP.Send ? Or do I miss something else in the configuration of Azure? Of someone has a Java example of how it should be done, please feel free to attach it. Also if you have some screenshots of what to set up on the Azure account. \r\n\r\n\r\n  [1]: https://learn.microsoft.com/en-us/exchange/client-developer/legacy-protocols/how-to-authenticate-an-imap-pop-smtp-application-by-using-oauth\r\n  [2]: https://learn.microsoft.com/en-us/exchange/clients-and-mobile-in-exchange-online/authenticated-client-smtp-submission","title":"Java Oauth2 send email using Office 365","body":"<p>I'm using Java 1.8, Jakarta email (version 2.1.0) to connect to Microsoft 365 using OAuth for authentication with SMTP. Client has required to use Oauth authenticate, not basic smtp authentification. After reading of documentation <a href=\"https://learn.microsoft.com/en-us/exchange/client-developer/legacy-protocols/how-to-authenticate-an-imap-pop-smtp-application-by-using-oauth\" rel=\"noreferrer\">https://learn.microsoft.com/en-us/exchange/client-developer...</a> and lots other resources I have configured AD to this permissions:</p>\n<pre><code>Microsoft Graph    offline_access\nMicrosoft Graph    User.Read\nMicrosoft Graph    Mail.Send\nMicrosoft Graph    openid\nMicrosoft Graph    IMAP.AccessAsUser.All\nMicrosoft Graph    SMTP.Send\n\nOffice 365 Exchange Online    full_access_as_app\nOffice 365 Exchange Online    POP.AccessAsApp\nOffice 365 Exchange Online    Mail.Send\nOffice 365 Exchange Online    IMAP.AccessAsApp\n</code></pre>\n<p>Activated SMTP client authentication using PowerShell on Azure <a href=\"https://learn.microsoft.com/en-us/exchange/clients-and-mobile-in-exchange-online/authenticated-client-smtp-submission\" rel=\"noreferrer\">https://learn.microsoft.com/en-us/exchange/clients...</a></p>\n<pre><code>PS C:\\Users\\dx-2102&gt; Get-TransportConfig | Format-List SmtpClientAuthenticationDisabled   \nSmtpClientAuthenticationDisabled : False\n</code></pre>\n<p>implemented code for send email (Java):</p>\n<pre><code>Properties prop = new Properties();\nprop.put(&quot;mail.smtp.auth&quot;, &quot;true&quot;);\nprop.put(&quot;mail.smtp.starttls.enable&quot;, &quot;true&quot;);\nprop.put(&quot;mail.smtp.host&quot;, emailSettings.getSmtp().getHostname());\nprop.put(&quot;mail.smtp.port&quot;, emailSettings.getSmtp().getPort());\nprop.put(&quot;mail.debug&quot;, &quot;true&quot;);\nprop.put(&quot;mail.debug.auth&quot;, &quot;true&quot;);\nprop.put(&quot;mail.smtp.auth.xoauth2.disable&quot;, &quot;false&quot;);\nprop.put(&quot;mail.smtp.auth.mechanisms&quot;, &quot;XOAUTH2&quot;);\nprop.put(&quot;mail.transport.protocol&quot;, &quot;smtp&quot;);\nprop.put(&quot;mail.smtp.auth.login.disable&quot;, &quot;true&quot;);\nprop.put(&quot;mail.smtp.auth.plain.disable&quot;, &quot;true&quot;);\n\nsession = Session.getInstance(prop);\nsession.setDebug(true);\nString accessToken = getOAuth2AccessToken();\n\ntransport = session.getTransport(&quot;smtp&quot;);\ntransport.connect(emailSettings.getSmtp().getHostname(), emailSettings.getSmtp().getPort(), emailSettings.getSmtp().getUsername(), tokenForSmtp(emailSettings.getSmtp().getUsername(), accessToken));\n/* -- */ \ntransport.sendMessage(mimeMessage, mimeMessage.getAllRecipients());\ntransport.close();\n</code></pre>\n<p>method for calling/getting token from Azure AD, in response we get a token with expiration time.</p>\n<pre><code>String url = &quot;https://login.microsoftonline.com/&quot; + Tenant_ID + &quot;/oauth2/token&quot;;\n\nMultiValueMap&lt;String, String&gt; map = new LinkedMultiValueMap&lt;&gt;();\nmap.add(&quot;grant_type&quot;, &quot;client_credentials&quot;);\nmap.add(&quot;response_type&quot;, &quot;code&quot;);\nmap.add(&quot;client_id&quot;, ClientId);\nmap.add(&quot;client_secret&quot;, ClientSecret);\nmap.add(&quot;scope&quot;,&quot;openid offline_access https%3A%2F%2Foutlook.office365.com%2FSMTP.Send &quot;);\n\nRestTemplate restTemplate = new RestTemplate();\nResponseEntity&lt;AzureResponse&gt; response = restTemplate.postForEntity(url, map, AzureResponse.class);\n</code></pre>\n<p>method for preparing token for sending within the SMTP send-mail process</p>\n<pre><code>private String tokenForSmtp(String userName, String accessToken) {\n    final String ctrlA=Character.toString((char) 1);\n    final String coded= &quot;user=&quot; + userName + ctrlA+&quot;auth=Bearer &quot; + accessToken + ctrlA+ctrlA;\n    return Base64.getEncoder().encodeToString(coded.getBytes());\n    //base64(&quot;user=&quot; + userName + &quot;^Aauth=Bearer &quot; + accessToken + &quot;^A^A&quot;)\n}\n</code></pre>\n<p>After send of SMTP email I receive error:</p>\n<pre><code>AUTH XOAUTH2 dXNlcj1zb2ZhQHNvbHV0aW9uZmFjdG9yeWFnLm9ub...=\n535 5.7.3 Authentication unsuccessful [VI1PR0202CA0024.eurprd02.prod.outlook.com]\nError on sending email: 535 5.7.3 Authentication unsuccessful [VI1PR0202CA0024.eurprd02.prod.outlook.com]\n</code></pre>\n<p>Do I need a some other token scope's from Azure AD other then openid, offline_access and <a href=\"https://outlook.office.com/SMTP.Send\" rel=\"noreferrer\">https://outlook.office.com/SMTP.Send</a> ? Or do I miss something else in the configuration of Azure? Of someone has a Java example of how it should be done, please feel free to attach it. Also if you have some screenshots of what to set up on the Azure account.</p>\n"},{"tags":["java","search","directory","alexa-internet"],"answers":[{"tags":[],"owner":{"account_id":292523,"reputation":133,"user_id":595312,"display_name":"crazedfred"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1296339473,"creation_date":1296339473,"answer_id":4839805,"question_id":4815221,"body_markdown":"If you&#39;ll notice, there is a Start parameter in addition to Count. &lt;br&gt;Start evidently changes the first result number returned. So:\r\n\r\nTo get the first 50 answers:\r\n\r\n    ...\r\n    &amp;Start=1\r\n    &amp;Count=50\r\n    ...\r\n\r\nTo get the next 50:\r\n\r\n    ...\r\n    &amp;Start=51\r\n    &amp;Count=50\r\n    ...\r\n\r\nAnd so forth, until you get an empty return (which is what is returned when Start &gt; total # answers).","title":"How to increase Alexa search results using Alexa API","body":"<p>If you'll notice, there is a Start parameter in addition to Count. <br>Start evidently changes the first result number returned. So:</p>\n\n<p>To get the first 50 answers:</p>\n\n<pre><code>...\n&amp;Start=1\n&amp;Count=50\n...\n</code></pre>\n\n<p>To get the next 50:</p>\n\n<pre><code>...\n&amp;Start=51\n&amp;Count=50\n...\n</code></pre>\n\n<p>And so forth, until you get an empty return (which is what is returned when Start > total # answers).</p>\n"}],"owner":{"account_id":181181,"reputation":1156,"user_id":415008,"accept_rate":95,"display_name":"Toman"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":695,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"closed_date":1523521803,"accepted_answer_id":4839805,"answer_count":1,"score":9,"last_activity_date":1696694280,"creation_date":1296124396,"question_id":4815221,"body_markdown":"I am creating a Java application which performs URL search for site:\r\n\r\nhttp://www.alexa.com/topsites/category\r\n\r\nUser enters a category name and my application displays all URL&#39;s and performs some operations.\r\n\r\nI am using this Alexa API for URL search.\r\n\r\nhttp://docs.amazonwebservices.com/AlexaWebInfoService/2005-07-11/ApiReference_CategoryListingsAction.html\r\n\r\nThis API doesn&#39;t give all results. For example, if I search for the category &quot;Health&quot;, this API gives only 6 results but when I visit on site I get more than 500 results.\r\n\r\nI tried to increase result by increasing count=500 and also checked by giving Start parameter in API but I am not getting all results.\r\n\r\nCould you please suggest me that how I can increase the results? Is there any other API which works as same Alexa API and gives all results?\r\n\r\nI got some suggestion that DMOZ API also uses same\r\n\r\nhttp://www.dmoz.org/World/Esperanto/Ludoj/Komputilaj/\r\n\r\nbut could not get the link for DMOZ search API. \r\n\r\nCould you please provide me a link to DMOZ search API.\r\n\r\n","title":"How to increase Alexa search results using Alexa API","body":"<p>I am creating a Java application which performs URL search for site:</p>\n<p><a href=\"http://www.alexa.com/topsites/category\" rel=\"nofollow noreferrer\">http://www.alexa.com/topsites/category</a></p>\n<p>User enters a category name and my application displays all URL's and performs some operations.</p>\n<p>I am using this Alexa API for URL search.</p>\n<p><a href=\"http://docs.amazonwebservices.com/AlexaWebInfoService/2005-07-11/ApiReference_CategoryListingsAction.html\" rel=\"nofollow noreferrer\">http://docs.amazonwebservices.com/AlexaWebInfoService/2005-07-11/ApiReference_CategoryListingsAction.html</a></p>\n<p>This API doesn't give all results. For example, if I search for the category &quot;Health&quot;, this API gives only 6 results but when I visit on site I get more than 500 results.</p>\n<p>I tried to increase result by increasing count=500 and also checked by giving Start parameter in API but I am not getting all results.</p>\n<p>Could you please suggest me that how I can increase the results? Is there any other API which works as same Alexa API and gives all results?</p>\n<p>I got some suggestion that DMOZ API also uses same</p>\n<p><a href=\"http://www.dmoz.org/World/Esperanto/Ludoj/Komputilaj/\" rel=\"nofollow noreferrer\">http://www.dmoz.org/World/Esperanto/Ludoj/Komputilaj/</a></p>\n<p>but could not get the link for DMOZ search API.</p>\n<p>Could you please provide me a link to DMOZ search API.</p>\n"},{"tags":["java","json","spring","resttemplate"],"comments":[{"owner":{"account_id":3318964,"reputation":1068,"user_id":2790577,"accept_rate":30,"display_name":"basiclawe"},"score":0,"creation_date":1696114058,"post_id":77208651,"comment_id":136112661,"body_markdown":"Please, provide us your configuration yml or properties.","body":"Please, provide us your configuration yml or properties."},{"owner":{"account_id":22993825,"reputation":21,"user_id":17118922,"display_name":"Ilya"},"score":1,"creation_date":1696114699,"post_id":77208651,"comment_id":136112693,"body_markdown":"Added application.yaml","body":"Added application.yaml"}],"answers":[{"tags":[],"owner":{"account_id":22993825,"reputation":21,"user_id":17118922,"display_name":"Ilya"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1696693492,"creation_date":1696113816,"answer_id":77208674,"question_id":77208651,"body_markdown":"As it turns out, ResponseEntity is incorrectly accounting for Content-length header. This occurred because the external API could return an object with null fields. To fix it, you need to allow jackson to pass null fields using ```@JsonInclude(JsonInclude.Include.NON_NULL)``` annotation which is placed above POJO. By putting it over all serializable fields in this structure I got: \r\n\r\n```\r\n{\r\n    &quot;coord&quot;: {\r\n        &quot;lat&quot;: 1.4,\r\n        &quot;lon&quot;: 2.33\r\n    },\r\n    &quot;weather&quot;: [\r\n        {\r\n            &quot;id&quot;: 804,\r\n            &quot;main&quot;: &quot;Clouds&quot;,\r\n            &quot;description&quot;: &quot;overcast clouds&quot;,\r\n            &quot;icon&quot;: &quot;04n&quot;\r\n        }\r\n    ],\r\n    &quot;base&quot;: &quot;stations&quot;,\r\n    &quot;main&quot;: {\r\n        &quot;temp&quot;: 26.15,\r\n        &quot;feels_like&quot;: 26.15,\r\n        &quot;temp_min&quot;: 26.15,\r\n        &quot;temp_max&quot;: 26.15,\r\n        &quot;pressure&quot;: 1014,\r\n        &quot;humidity&quot;: 79,\r\n        &quot;sea_level&quot;: 1014,\r\n        &quot;grnd_level&quot;: 1014\r\n    },\r\n    &quot;visibility&quot;: 10000,\r\n    &quot;wind&quot;: {\r\n        &quot;speed&quot;: 6.34,\r\n        &quot;deg&quot;: 198,\r\n        &quot;gust&quot;: 6.08\r\n    },\r\n    &quot;clouds&quot;: {\r\n        &quot;all&quot;: 100\r\n    },\r\n    &quot;dt&quot;: 1696111416,\r\n    &quot;sys&quot;: {\r\n        &quot;sunrise&quot;: 1696052261,\r\n        &quot;sunset&quot;: 1696095829\r\n    },\r\n    &quot;timezone&quot;: 0,\r\n    &quot;id&quot;: 0,\r\n    &quot;name&quot;: &quot;&quot;,\r\n    &quot;cod&quot;: 200\r\n}\r\n```\r\nI tried to do something different and the changes in my method gave the correct result too.\r\n```\r\n    @GetMapping(value = &quot;/weather/lat={lat}&amp;lon={lon}&quot;)\r\n    @Cacheable(value = &quot;root&quot;, key = &quot;{#lat , #lon}&quot;)\r\n    public ResponseEntity&lt;Root&gt; getWeather(@PathVariable(&quot;lat&quot;) String lat, @PathVariable(&quot;lon&quot;) String lon) {\r\n        try{\r\n            String request = String.format(&quot;%s?lat=%s&amp;lon=%s&amp;units=metric&amp;appid=%s&quot;,\r\n                    weatherUrl, lat, lon, appId);\r\n            var r = restTemplate.getForObject(request, Root.class);\r\n            return ResponseEntity.ok().body(r);\r\n        }catch (RestClientException e){\r\n            return new ResponseEntity&lt;&gt;(HttpStatus.BAD_REQUEST);\r\n        }\r\n    }\r\n```\r\nI hope this helps someone.","title":"ResponceEntity. The controller truncates the JSON portion of the response","body":"<p>As it turns out, ResponseEntity is incorrectly accounting for Content-length header. This occurred because the external API could return an object with null fields. To fix it, you need to allow jackson to pass null fields using <code>@JsonInclude(JsonInclude.Include.NON_NULL)</code> annotation which is placed above POJO. By putting it over all serializable fields in this structure I got:</p>\n<pre><code>{\n    &quot;coord&quot;: {\n        &quot;lat&quot;: 1.4,\n        &quot;lon&quot;: 2.33\n    },\n    &quot;weather&quot;: [\n        {\n            &quot;id&quot;: 804,\n            &quot;main&quot;: &quot;Clouds&quot;,\n            &quot;description&quot;: &quot;overcast clouds&quot;,\n            &quot;icon&quot;: &quot;04n&quot;\n        }\n    ],\n    &quot;base&quot;: &quot;stations&quot;,\n    &quot;main&quot;: {\n        &quot;temp&quot;: 26.15,\n        &quot;feels_like&quot;: 26.15,\n        &quot;temp_min&quot;: 26.15,\n        &quot;temp_max&quot;: 26.15,\n        &quot;pressure&quot;: 1014,\n        &quot;humidity&quot;: 79,\n        &quot;sea_level&quot;: 1014,\n        &quot;grnd_level&quot;: 1014\n    },\n    &quot;visibility&quot;: 10000,\n    &quot;wind&quot;: {\n        &quot;speed&quot;: 6.34,\n        &quot;deg&quot;: 198,\n        &quot;gust&quot;: 6.08\n    },\n    &quot;clouds&quot;: {\n        &quot;all&quot;: 100\n    },\n    &quot;dt&quot;: 1696111416,\n    &quot;sys&quot;: {\n        &quot;sunrise&quot;: 1696052261,\n        &quot;sunset&quot;: 1696095829\n    },\n    &quot;timezone&quot;: 0,\n    &quot;id&quot;: 0,\n    &quot;name&quot;: &quot;&quot;,\n    &quot;cod&quot;: 200\n}\n</code></pre>\n<p>I tried to do something different and the changes in my method gave the correct result too.</p>\n<pre><code>    @GetMapping(value = &quot;/weather/lat={lat}&amp;lon={lon}&quot;)\n    @Cacheable(value = &quot;root&quot;, key = &quot;{#lat , #lon}&quot;)\n    public ResponseEntity&lt;Root&gt; getWeather(@PathVariable(&quot;lat&quot;) String lat, @PathVariable(&quot;lon&quot;) String lon) {\n        try{\n            String request = String.format(&quot;%s?lat=%s&amp;lon=%s&amp;units=metric&amp;appid=%s&quot;,\n                    weatherUrl, lat, lon, appId);\n            var r = restTemplate.getForObject(request, Root.class);\n            return ResponseEntity.ok().body(r);\n        }catch (RestClientException e){\n            return new ResponseEntity&lt;&gt;(HttpStatus.BAD_REQUEST);\n        }\n    }\n</code></pre>\n<p>I hope this helps someone.</p>\n"}],"owner":{"account_id":22993825,"reputation":21,"user_id":17118922,"display_name":"Ilya"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77208674,"answer_count":1,"score":1,"last_activity_date":1696693492,"creation_date":1696113163,"question_id":77208651,"body_markdown":"I have a controller that sends a request to an external API using RestTemplate and gets a data structure. This structure it should return, but when using my controller sometimes the end of the JSON response is dropped. \r\n\r\nI tried to customize RestTemplate and increase the response size in application.yaml\r\n\r\nMy controller:\r\n\r\n```\r\n    @GetMapping(value = &quot;/weather/lat={lat}&amp;lon={lon}&quot;)\r\n    @Cacheable(value = &quot;root&quot;, key = &quot;{#lat , #lon}&quot;)\r\n    public ResponseEntity&lt;Root&gt; getWeather(@PathVariable(&quot;lat&quot;) String lat, @PathVariable(&quot;lon&quot;) String lon) {\r\n        try{\r\n            String request = String.format(&quot;%s?lat=%s&amp;lon=%s&amp;units=metric&amp;appid=%s&quot;,\r\n                    weatherUrl, lat, lon, appId);\r\n            return restTemplate.getForEntity(request, Root.class);\r\n        }catch (RestClientException e){\r\n            return new ResponseEntity&lt;&gt;(HttpStatus.BAD_REQUEST);\r\n        }\r\n    }\r\n```\r\n\r\nExample of a truncated query:\r\n\r\n```\r\n{\r\n    &quot;coord&quot;: {\r\n        &quot;lat&quot;: 1.4,\r\n        &quot;lon&quot;: 2.33\r\n    },\r\n    &quot;weather&quot;: [\r\n        {\r\n            &quot;id&quot;: 804,\r\n            &quot;main&quot;: &quot;Clouds&quot;,\r\n            &quot;description&quot;: &quot;overcast clouds&quot;,\r\n            &quot;icon&quot;: &quot;04n&quot;\r\n        }\r\n    ],\r\n    &quot;base&quot;: &quot;stations&quot;,\r\n    &quot;main&quot;: {\r\n        &quot;temp&quot;: 26.15,\r\n        &quot;feels_like&quot;: 26.15,\r\n        &quot;temp_min&quot;: 26.15,\r\n        &quot;temp_max&quot;: 26.15,\r\n        &quot;pressure&quot;: 1014,\r\n        &quot;humidity&quot;: 79,\r\n        &quot;sea_level&quot;: 1014,\r\n        &quot;grnd_level&quot;: 1014\r\n    },\r\n    &quot;visibility&quot;: 10000,\r\n    &quot;wind&quot;: {\r\n        &quot;speed&quot;: 6.34,\r\n        &quot;deg&quot;: 198,\r\n        &quot;gust&quot;: 6.08\r\n    },\r\n    &quot;clouds&quot;: {\r\n        &quot;all&quot;: 100\r\n    },\r\n    &quot;dt&quot;: 1696111416,\r\n    &quot;sys&quot;: {\r\n        &quot;sunrise&quot;: 1696052261,\r\n        &quot;sunset&quot;: 1696095829\r\n    },\r\n    &quot;timezone&quot;: 0,\r\n    &quot;id&quot;: 0,\r\n    &quot;name&quot;:&quot;co\r\n```\r\n\r\napplication.yaml:\r\n```\r\nspring:\r\n  application:\r\n    name: weather-service\r\n  servlet:\r\n    multipart:\r\n      max-file-size: 10MB\r\n      max-request-size: 10MB\r\n  boot:\r\n    admin:\r\n      client:\r\n        instance:\r\n          api-gateway-port: 17957\r\n          management-base-url: http://localhost:${spring.boot.admin.client.instance.api-gateway-port}\r\n\r\neureka:\r\n  instance:\r\n    instance-id: ${spring.application.name}:${random.value}\r\n  client:\r\n    serviceUrl:\r\n      defaultZone: http://localhost:8888/eureka/\r\n\r\nappid: *********************\r\n\r\n\r\nurl:\r\n  external-api:\r\n    weather: https://api.openweathermap.org/data/2.5/weather\r\n\r\nserver:\r\n  port: 0\r\n```\r\n","title":"ResponceEntity. The controller truncates the JSON portion of the response","body":"<p>I have a controller that sends a request to an external API using RestTemplate and gets a data structure. This structure it should return, but when using my controller sometimes the end of the JSON response is dropped.</p>\n<p>I tried to customize RestTemplate and increase the response size in application.yaml</p>\n<p>My controller:</p>\n<pre><code>    @GetMapping(value = &quot;/weather/lat={lat}&amp;lon={lon}&quot;)\n    @Cacheable(value = &quot;root&quot;, key = &quot;{#lat , #lon}&quot;)\n    public ResponseEntity&lt;Root&gt; getWeather(@PathVariable(&quot;lat&quot;) String lat, @PathVariable(&quot;lon&quot;) String lon) {\n        try{\n            String request = String.format(&quot;%s?lat=%s&amp;lon=%s&amp;units=metric&amp;appid=%s&quot;,\n                    weatherUrl, lat, lon, appId);\n            return restTemplate.getForEntity(request, Root.class);\n        }catch (RestClientException e){\n            return new ResponseEntity&lt;&gt;(HttpStatus.BAD_REQUEST);\n        }\n    }\n</code></pre>\n<p>Example of a truncated query:</p>\n<pre><code>{\n    &quot;coord&quot;: {\n        &quot;lat&quot;: 1.4,\n        &quot;lon&quot;: 2.33\n    },\n    &quot;weather&quot;: [\n        {\n            &quot;id&quot;: 804,\n            &quot;main&quot;: &quot;Clouds&quot;,\n            &quot;description&quot;: &quot;overcast clouds&quot;,\n            &quot;icon&quot;: &quot;04n&quot;\n        }\n    ],\n    &quot;base&quot;: &quot;stations&quot;,\n    &quot;main&quot;: {\n        &quot;temp&quot;: 26.15,\n        &quot;feels_like&quot;: 26.15,\n        &quot;temp_min&quot;: 26.15,\n        &quot;temp_max&quot;: 26.15,\n        &quot;pressure&quot;: 1014,\n        &quot;humidity&quot;: 79,\n        &quot;sea_level&quot;: 1014,\n        &quot;grnd_level&quot;: 1014\n    },\n    &quot;visibility&quot;: 10000,\n    &quot;wind&quot;: {\n        &quot;speed&quot;: 6.34,\n        &quot;deg&quot;: 198,\n        &quot;gust&quot;: 6.08\n    },\n    &quot;clouds&quot;: {\n        &quot;all&quot;: 100\n    },\n    &quot;dt&quot;: 1696111416,\n    &quot;sys&quot;: {\n        &quot;sunrise&quot;: 1696052261,\n        &quot;sunset&quot;: 1696095829\n    },\n    &quot;timezone&quot;: 0,\n    &quot;id&quot;: 0,\n    &quot;name&quot;:&quot;co\n</code></pre>\n<p>application.yaml:</p>\n<pre><code>spring:\n  application:\n    name: weather-service\n  servlet:\n    multipart:\n      max-file-size: 10MB\n      max-request-size: 10MB\n  boot:\n    admin:\n      client:\n        instance:\n          api-gateway-port: 17957\n          management-base-url: http://localhost:${spring.boot.admin.client.instance.api-gateway-port}\n\neureka:\n  instance:\n    instance-id: ${spring.application.name}:${random.value}\n  client:\n    serviceUrl:\n      defaultZone: http://localhost:8888/eureka/\n\nappid: *********************\n\n\nurl:\n  external-api:\n    weather: https://api.openweathermap.org/data/2.5/weather\n\nserver:\n  port: 0\n</code></pre>\n"},{"tags":["java","android","networking","retrofit"],"comments":[{"owner":{"account_id":14349390,"reputation":659,"user_id":10365380,"display_name":"Rohaitas Tanoli"},"score":0,"creation_date":1696331853,"post_id":77221360,"comment_id":136136396,"body_markdown":"check the response body and call.request.url  as well","body":"check the response body and call.request.url  as well"},{"owner":{"account_id":24009548,"reputation":49,"user_id":17993307,"display_name":"Mamta"},"score":0,"creation_date":1696332555,"post_id":77221360,"comment_id":136136503,"body_markdown":"@RohaitasTanoli check the request url and url is correct and the response is only one message {\n    &quot;message&quot;: &quot;Customer updated successfully&quot;\n}","body":"@RohaitasTanoli check the request url and url is correct and the response is only one message {     &quot;message&quot;: &quot;Customer updated successfully&quot; }"},{"owner":{"account_id":14349390,"reputation":659,"user_id":10365380,"display_name":"Rohaitas Tanoli"},"score":0,"creation_date":1696333475,"post_id":77221360,"comment_id":136136686,"body_markdown":"That means Api is successfull. The errror is somewhereelse","body":"That means Api is successfull. The errror is somewhereelse"}],"owner":{"account_id":24009548,"reputation":49,"user_id":17993307,"display_name":"Mamta"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":101,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1696693305,"creation_date":1696327969,"question_id":77221360,"body_markdown":"In my Android app, for update profile page I am using API, and when I call the API the response is showing success and I check the status code 200 but the data is not loaded in database, using Postman the data is loaded correctly but from my phone the data is not loaded,\r\n\r\nOne day before it is working file but today it is not adding data, even I don&#39;t change a single word or line in code.\r\n\r\nThe API is post API, and it is use form-data for data,\r\n\r\nBelow is my API code\r\n\r\n**API Handler Class**\r\n\r\n```\r\nimport okhttp3.OkHttpClient;\r\nimport retrofit2.Retrofit;\r\nimport retrofit2.converter.gson.GsonConverterFactory;\r\n\r\npublic class ApiHandler {\r\n\r\n    private static final String BASE_URL = &quot;https://rndtd.com/demos/scrapbazar/api/&quot;;\r\n\r\n    private static Retrofit retrofit;\r\n\r\n    public static Retrofit getRetrofitInstance() {\r\n\r\n        if(retrofit == null){\r\n\r\n          \r\n            retrofit = new Retrofit.Builder()\r\n                    .baseUrl(BASE_URL)\r\n                    .addConverterFactory(GsonConverterFactory.create())\r\n                    .build();\r\n        }\r\n\r\n        return retrofit;\r\n    }\r\n}\r\n\r\n```\r\n\r\n**Interface for API endpoint**\r\n\r\n\r\n```\r\npublic interface ApiInterface {\r\n\r\n    @GET(&quot;allProducts&quot;)\r\n    Call&lt;List&lt;List&lt;Product&gt;&gt;&gt; getAllProducts();\r\n\r\n  @Multipart\r\n    @POST(&quot;updateprofile&quot;)\r\n    Call&lt;ResponseBody&gt; updateUserProfile(\r\n            @Part(&quot;id&quot;) int id,\r\n            @Part(&quot;first_name&quot;) String userName,\r\n            @Part(&quot;email&quot;) String email,\r\n            @Part MultipartBody.Part image\r\n            );\r\n\r\n}\r\n```\r\n\r\n\r\n**Method where I call the API**\r\n\r\n```\r\n public void updateProfile() {\r\n\r\n        ApiInterface apiInterface = getRetrofitInstance().create(ApiInterface.class);\r\n\r\n        int id = SaveSharedPreference.getUserId(this);\r\n        String userName = etUserName.getText().toString();\r\n        String email = etEmail.getText().toString();\r\n\r\n        if (userName.isEmpty() || email.isEmpty() || selectedImageUri == null) {\r\n            mProgress.dismiss();\r\n            Toast.makeText(this, &quot;All fields are required&quot;, Toast.LENGTH_SHORT).show();\r\n            return; // Exit the method if any field is missing\r\n        }\r\n\r\n        if (selectedImageUri != null) {\r\n            String fileName = getFileName(selectedImageUri);\r\n           \r\n            File imageFile = new File(getCacheDir(), fileName);\r\n\r\n            try {\r\n                InputStream inputStream = getContentResolver().openInputStream(selectedImageUri);\r\n                FileOutputStream fileOutputStream = new FileOutputStream(imageFile);\r\n                byte[] buffer = new byte[1024];\r\n                int bytesRead;\r\n                while ((bytesRead = inputStream.read(buffer)) != -1) {\r\n                    fileOutputStream.write(buffer, 0, bytesRead);\r\n                }\r\n                inputStream.close();\r\n                fileOutputStream.close();\r\n\r\n            }\r\n            catch (IOException e)  {\r\n                e.printStackTrace();\r\n            }\r\n\r\n\r\n\r\n            RequestBody imageRequestFile = RequestBody.create(MediaType.parse(getMimeType(selectedImageUri)), imageFile);\r\n            MultipartBody.Part imagePart = MultipartBody.Part.createFormData(&quot;image&quot;, imageFile.getName(), imageRequestFile);\r\n\r\n            Log.d(&quot;Request Data&quot;, &quot;ID: &quot; + id);\r\n            Log.d(&quot;Request Data&quot;, &quot;UserName: &quot; + userName);\r\n            Log.d(&quot;Request Data&quot;, &quot;Email: &quot; + email);\r\n            Log.d(&quot;Request Data&quot;, &quot;image: &quot; + imagePart);\r\n\r\n            Call&lt;ResponseBody&gt; call = apiInterface.updateUserProfile(id, userName, email, imagePart);\r\n\r\n            call.enqueue(new Callback&lt;ResponseBody&gt;() {\r\n                @Override\r\n                public void onResponse(Call&lt;ResponseBody&gt; call, Response&lt;ResponseBody&gt; response) {\r\n\r\n                    int responseCode = response.code();\r\n                    Toast.makeText(EditProfile.this, &quot;code : &quot; + responseCode, Toast.LENGTH_SHORT).show();\r\n\r\n                    if (response.isSuccessful()) {\r\n\r\n                        String msg = &quot;Customer Updated Successfully&quot;;\r\n                        Toast.makeText(EditProfile.this, &quot;&quot; + msg, Toast.LENGTH_SHORT).show();\r\n                        finish();\r\n\r\n                    } else {\r\n                        mProgress.dismiss();\r\n                        Toast.makeText(EditProfile.this, &quot;Response is not success&quot;, Toast.LENGTH_SHORT).show();\r\n                    }\r\n\r\n                }\r\n\r\n                @Override\r\n                public void onFailure(Call&lt;ResponseBody&gt; call, Throwable t) {\r\n                    mProgress.dismiss();\r\n                    Log.e(&quot;Tag&quot;, &quot;Error : &quot; + t.getLocalizedMessage());\r\n                    Toast.makeText(EditProfile.this, &quot;Error &quot; + t.getLocalizedMessage(), Toast.LENGTH_SHORT).show();\r\n                }\r\n            });\r\n        }\r\n    } \r\n\r\n```\r\n\r\n\r\n\r\n\r\n\r\nWhen I am check the logcat then the data is showing correctly :\r\n\r\n**My log in logcat are:**\r\n\r\n**ID: 2**\r\n\r\n**UserName: myName**\r\n\r\n**Email: myName@gmail.com**\r\n\r\n**image: okhttp3.MultipartBody$Part@2afca0d**\r\n\r\n\r\n","title":"Status code 200 but still data not loading in server end","body":"<p>In my Android app, for update profile page I am using API, and when I call the API the response is showing success and I check the status code 200 but the data is not loaded in database, using Postman the data is loaded correctly but from my phone the data is not loaded,</p>\n<p>One day before it is working file but today it is not adding data, even I don't change a single word or line in code.</p>\n<p>The API is post API, and it is use form-data for data,</p>\n<p>Below is my API code</p>\n<p><strong>API Handler Class</strong></p>\n<pre><code>import okhttp3.OkHttpClient;\nimport retrofit2.Retrofit;\nimport retrofit2.converter.gson.GsonConverterFactory;\n\npublic class ApiHandler {\n\n    private static final String BASE_URL = &quot;https://rndtd.com/demos/scrapbazar/api/&quot;;\n\n    private static Retrofit retrofit;\n\n    public static Retrofit getRetrofitInstance() {\n\n        if(retrofit == null){\n\n          \n            retrofit = new Retrofit.Builder()\n                    .baseUrl(BASE_URL)\n                    .addConverterFactory(GsonConverterFactory.create())\n                    .build();\n        }\n\n        return retrofit;\n    }\n}\n\n</code></pre>\n<p><strong>Interface for API endpoint</strong></p>\n<pre><code>public interface ApiInterface {\n\n    @GET(&quot;allProducts&quot;)\n    Call&lt;List&lt;List&lt;Product&gt;&gt;&gt; getAllProducts();\n\n  @Multipart\n    @POST(&quot;updateprofile&quot;)\n    Call&lt;ResponseBody&gt; updateUserProfile(\n            @Part(&quot;id&quot;) int id,\n            @Part(&quot;first_name&quot;) String userName,\n            @Part(&quot;email&quot;) String email,\n            @Part MultipartBody.Part image\n            );\n\n}\n</code></pre>\n<p><strong>Method where I call the API</strong></p>\n<pre><code> public void updateProfile() {\n\n        ApiInterface apiInterface = getRetrofitInstance().create(ApiInterface.class);\n\n        int id = SaveSharedPreference.getUserId(this);\n        String userName = etUserName.getText().toString();\n        String email = etEmail.getText().toString();\n\n        if (userName.isEmpty() || email.isEmpty() || selectedImageUri == null) {\n            mProgress.dismiss();\n            Toast.makeText(this, &quot;All fields are required&quot;, Toast.LENGTH_SHORT).show();\n            return; // Exit the method if any field is missing\n        }\n\n        if (selectedImageUri != null) {\n            String fileName = getFileName(selectedImageUri);\n           \n            File imageFile = new File(getCacheDir(), fileName);\n\n            try {\n                InputStream inputStream = getContentResolver().openInputStream(selectedImageUri);\n                FileOutputStream fileOutputStream = new FileOutputStream(imageFile);\n                byte[] buffer = new byte[1024];\n                int bytesRead;\n                while ((bytesRead = inputStream.read(buffer)) != -1) {\n                    fileOutputStream.write(buffer, 0, bytesRead);\n                }\n                inputStream.close();\n                fileOutputStream.close();\n\n            }\n            catch (IOException e)  {\n                e.printStackTrace();\n            }\n\n\n\n            RequestBody imageRequestFile = RequestBody.create(MediaType.parse(getMimeType(selectedImageUri)), imageFile);\n            MultipartBody.Part imagePart = MultipartBody.Part.createFormData(&quot;image&quot;, imageFile.getName(), imageRequestFile);\n\n            Log.d(&quot;Request Data&quot;, &quot;ID: &quot; + id);\n            Log.d(&quot;Request Data&quot;, &quot;UserName: &quot; + userName);\n            Log.d(&quot;Request Data&quot;, &quot;Email: &quot; + email);\n            Log.d(&quot;Request Data&quot;, &quot;image: &quot; + imagePart);\n\n            Call&lt;ResponseBody&gt; call = apiInterface.updateUserProfile(id, userName, email, imagePart);\n\n            call.enqueue(new Callback&lt;ResponseBody&gt;() {\n                @Override\n                public void onResponse(Call&lt;ResponseBody&gt; call, Response&lt;ResponseBody&gt; response) {\n\n                    int responseCode = response.code();\n                    Toast.makeText(EditProfile.this, &quot;code : &quot; + responseCode, Toast.LENGTH_SHORT).show();\n\n                    if (response.isSuccessful()) {\n\n                        String msg = &quot;Customer Updated Successfully&quot;;\n                        Toast.makeText(EditProfile.this, &quot;&quot; + msg, Toast.LENGTH_SHORT).show();\n                        finish();\n\n                    } else {\n                        mProgress.dismiss();\n                        Toast.makeText(EditProfile.this, &quot;Response is not success&quot;, Toast.LENGTH_SHORT).show();\n                    }\n\n                }\n\n                @Override\n                public void onFailure(Call&lt;ResponseBody&gt; call, Throwable t) {\n                    mProgress.dismiss();\n                    Log.e(&quot;Tag&quot;, &quot;Error : &quot; + t.getLocalizedMessage());\n                    Toast.makeText(EditProfile.this, &quot;Error &quot; + t.getLocalizedMessage(), Toast.LENGTH_SHORT).show();\n                }\n            });\n        }\n    } \n\n</code></pre>\n<p>When I am check the logcat then the data is showing correctly :</p>\n<p><strong>My log in logcat are:</strong></p>\n<p><strong>ID: 2</strong></p>\n<p><strong>UserName: myName</strong></p>\n<p><strong>Email: myName@gmail.com</strong></p>\n<p><strong>image: okhttp3.MultipartBody$Part@2afca0d</strong></p>\n"},{"tags":["java","encryption"],"comments":[{"owner":{"account_id":85671,"reputation":40847,"user_id":238704,"display_name":"President James K. Polk"},"score":9,"creation_date":1354707653,"post_id":13721579,"comment_id":18849721,"body_markdown":"This usually means you&#39;ve done something wrong with packaging of the classes/jars and/or the classpath. You can&#39;t extract the BC classes from their jar and put them in another jar.","body":"This usually means you&#39;ve done something wrong with packaging of the classes/jars and/or the classpath. You can&#39;t extract the BC classes from their jar and put them in another jar."},{"owner":{"account_id":125069,"reputation":6157,"user_id":320594,"accept_rate":77,"display_name":"Jaime Hablutzel"},"score":1,"creation_date":1537663535,"post_id":13721579,"comment_id":91866271,"body_markdown":"Check you classpath, maybe you have several different versions of BouncyCastle JARs as it happened to me.","body":"Check you classpath, maybe you have several different versions of BouncyCastle JARs as it happened to me."}],"answers":[{"tags":[],"owner":{"account_id":218057,"reputation":67728,"user_id":474189,"accept_rate":72,"display_name":"Duncan Jones"},"down_vote_count":0,"up_vote_count":27,"is_accepted":true,"score":27,"last_activity_date":1354721072,"creation_date":1354721072,"answer_id":13726570,"question_id":13721579,"body_markdown":"To expand on the comment from GregS, all JCE provider JARs must be signed before they will be trusted by your Java runtime.\r\n\r\nBouncyCastle dutifully supplies signed JARs that will work without a problem. However, if you extract class files from this JAR, or recompile the source, it will remove the signature and cause Java to reject the code.\r\n\r\nSee this related SO question: https://stackoverflow.com/questions/1756801/how-to-sign-a-custom-jce-security-provider","title":"JCE cannot authenticate the provider BC in java swing application","body":"<p>To expand on the comment from GregS, all JCE provider JARs must be signed before they will be trusted by your Java runtime.</p>\n\n<p>BouncyCastle dutifully supplies signed JARs that will work without a problem. However, if you extract class files from this JAR, or recompile the source, it will remove the signature and cause Java to reject the code.</p>\n\n<p>See this related SO question: <a href=\"https://stackoverflow.com/questions/1756801/how-to-sign-a-custom-jce-security-provider\">How to sign a custom JCE security provider</a></p>\n"},{"tags":[],"owner":{"account_id":3483649,"reputation":571,"user_id":2915079,"display_name":"jiangzx"},"down_vote_count":1,"up_vote_count":57,"is_accepted":false,"score":56,"last_activity_date":1569863994,"creation_date":1382607178,"answer_id":19562164,"question_id":13721579,"body_markdown":"1. edit `jre\\lib\\security\\java.security`\r\n1. add `security.provider.10=org.bouncycastle.jce.provider.BouncyCastleProvider`\r\n1. copy `bc*.jar` to `jre\\lib\\ext`","title":"JCE cannot authenticate the provider BC in java swing application","body":"<ol>\n<li>edit <code>jre\\lib\\security\\java.security</code></li>\n<li>add <code>security.provider.10=org.bouncycastle.jce.provider.BouncyCastleProvider</code></li>\n<li>copy <code>bc*.jar</code> to <code>jre\\lib\\ext</code></li>\n</ol>\n"},{"tags":[],"owner":{"account_id":941474,"reputation":2004,"user_id":969478,"accept_rate":64,"display_name":"Giszmo"},"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1484523106,"creation_date":1465530194,"answer_id":37739524,"question_id":13721579,"body_markdown":"For those finding this issue but actually using `SpongyCastle`, it might be interesting to know that on Android there is no such signature test and for your tests you can use SpongyCastle via the openJDK-8 as that doesn&#39;t care about signatures neither.\r\n\r\nFor reference, with SpongyCastle the error reads:\r\n\r\n    java.lang.SecurityException: JCE cannot authenticate the provider SC\r\n\r\nMore information in [this issue](https://github.com/rtyley/spongycastle-old/issues/13)","title":"JCE cannot authenticate the provider BC in java swing application","body":"<p>For those finding this issue but actually using <code>SpongyCastle</code>, it might be interesting to know that on Android there is no such signature test and for your tests you can use SpongyCastle via the openJDK-8 as that doesn't care about signatures neither.</p>\n\n<p>For reference, with SpongyCastle the error reads:</p>\n\n<pre><code>java.lang.SecurityException: JCE cannot authenticate the provider SC\n</code></pre>\n\n<p>More information in <a href=\"https://github.com/rtyley/spongycastle-old/issues/13\" rel=\"nofollow noreferrer\">this issue</a></p>\n"},{"tags":[],"owner":{"account_id":192003,"reputation":30422,"user_id":432903,"accept_rate":64,"display_name":"prayagupa"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1525757178,"creation_date":1525756615,"answer_id":50226284,"question_id":13721579,"body_markdown":"For me the issue was `bcprov-ext-jdk16.jar` was being discarded by `sbt assembly`.\r\n\r\n    [warn] Merging &#39;META-INF/license/LICENSE.bouncycastle.txt&#39; with strategy &#39;discard&#39;\r\n    ..\r\n    [warn] Merging &#39;META-INF/maven/org.jasypt/jasypt/pom.properties&#39; with strategy &#39;discard&#39;\r\n    [warn] Merging &#39;META-INF/maven/org.jasypt/jasypt/pom.xml&#39; with strategy &#39;discard&#39;\r\n    ..\r\n\r\nSo I ended up using the `bouncycastle.jar` [from `-classpath`](https://stackoverflow.com/a/18413058/432903) as below, \r\n\r\n    java -Denvironment=dev -cp chat-server.jar:/Users/prayagupd/.ivy2/cache/org.bouncycastle/bcprov-ext-jdk16/jars/bcprov-ext-jdk16-1.46.jar com.chat.server.ChatServer\r\n\r\n**What also works is putting the bouncycastle.jar to `$JAVA_HOME/jre/lib/ext`,**\r\n\r\n    cp /Users/prayagupd/.ivy2/cache/org.bouncycastle/bcprov-ext-jdk16/jars/bcprov-ext-jdk16-1.46.jar $JAVA_HOME/jre/lib/ext/\r\n    \r\n    $ ls -l $JAVA_HOME/jre/lib/ext/\r\n    total 55208\r\n    -rw-r--r--  1 root  wheel   1887089 May  7 21:22 bcprov-ext-jdk16-1.46.jar\r\n    -rw-rw-r--  1 root  wheel   3860502 Sep  5  2017 cldrdata.jar\r\n    -rw-rw-r--  1 root  wheel      8286 Sep  5  2017 dnsns.jar\r\n    -rw-rw-r--  1 root  wheel     44516 Sep  5  2017 jaccess.jar\r\n    -rwxrwxr-x  1 root  wheel  18610276 Sep  5  2017 jfxrt.jar\r\n    -rw-rw-r--  1 root  wheel   1179093 Sep  5  2017 localedata.jar\r\n    -rw-rw-r--  1 root  wheel      1269 Sep  5  2017 meta-index\r\n    -rw-rw-r--  1 root  wheel   2022735 Sep  5  2017 nashorn.jar\r\n    -rw-rw-r--  1 root  wheel     41672 Sep  5  2017 sunec.jar\r\n    -rw-rw-r--  1 root  wheel    274148 Sep  5  2017 sunjce_provider.jar\r\n    -rw-rw-r--  1 root  wheel    248726 Sep  5  2017 sunpkcs11.jar\r\n    -rw-rw-r--  1 root  wheel     68924 Sep  5  2017 zipfs.jar\r\n\r\n","title":"JCE cannot authenticate the provider BC in java swing application","body":"<p>For me the issue was <code>bcprov-ext-jdk16.jar</code> was being discarded by <code>sbt assembly</code>.</p>\n\n<pre><code>[warn] Merging 'META-INF/license/LICENSE.bouncycastle.txt' with strategy 'discard'\n..\n[warn] Merging 'META-INF/maven/org.jasypt/jasypt/pom.properties' with strategy 'discard'\n[warn] Merging 'META-INF/maven/org.jasypt/jasypt/pom.xml' with strategy 'discard'\n..\n</code></pre>\n\n<p>So I ended up using the <code>bouncycastle.jar</code> <a href=\"https://stackoverflow.com/a/18413058/432903\">from <code>-classpath</code></a> as below, </p>\n\n<pre><code>java -Denvironment=dev -cp chat-server.jar:/Users/prayagupd/.ivy2/cache/org.bouncycastle/bcprov-ext-jdk16/jars/bcprov-ext-jdk16-1.46.jar com.chat.server.ChatServer\n</code></pre>\n\n<p><strong>What also works is putting the bouncycastle.jar to <code>$JAVA_HOME/jre/lib/ext</code>,</strong></p>\n\n<pre><code>cp /Users/prayagupd/.ivy2/cache/org.bouncycastle/bcprov-ext-jdk16/jars/bcprov-ext-jdk16-1.46.jar $JAVA_HOME/jre/lib/ext/\n\n$ ls -l $JAVA_HOME/jre/lib/ext/\ntotal 55208\n-rw-r--r--  1 root  wheel   1887089 May  7 21:22 bcprov-ext-jdk16-1.46.jar\n-rw-rw-r--  1 root  wheel   3860502 Sep  5  2017 cldrdata.jar\n-rw-rw-r--  1 root  wheel      8286 Sep  5  2017 dnsns.jar\n-rw-rw-r--  1 root  wheel     44516 Sep  5  2017 jaccess.jar\n-rwxrwxr-x  1 root  wheel  18610276 Sep  5  2017 jfxrt.jar\n-rw-rw-r--  1 root  wheel   1179093 Sep  5  2017 localedata.jar\n-rw-rw-r--  1 root  wheel      1269 Sep  5  2017 meta-index\n-rw-rw-r--  1 root  wheel   2022735 Sep  5  2017 nashorn.jar\n-rw-rw-r--  1 root  wheel     41672 Sep  5  2017 sunec.jar\n-rw-rw-r--  1 root  wheel    274148 Sep  5  2017 sunjce_provider.jar\n-rw-rw-r--  1 root  wheel    248726 Sep  5  2017 sunpkcs11.jar\n-rw-rw-r--  1 root  wheel     68924 Sep  5  2017 zipfs.jar\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13759209,"reputation":1,"user_id":9929338,"display_name":"imsimm"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1528856821,"creation_date":1528794687,"answer_id":50813383,"question_id":13721579,"body_markdown":"FYI: instead of modifying java.security and copying jar to \\jre\\lib\\ext, below steps resolved my issue as well. \r\n\r\n1. add Security.addProvider(new org.bouncycastle.jce.provider.BouncyCastleProvider()) in your class.\r\n2. add provided scope to bcprov.*.jar dependency in pom.xml.\r\n3. put bcprov.*.jar to your specific folder(e.g: \\lib), then refer it when run the project.\r\n","title":"JCE cannot authenticate the provider BC in java swing application","body":"<p>FYI: instead of modifying java.security and copying jar to \\jre\\lib\\ext, below steps resolved my issue as well. </p>\n\n<ol>\n<li>add Security.addProvider(new org.bouncycastle.jce.provider.BouncyCastleProvider()) in your class.</li>\n<li>add provided scope to bcprov.*.jar dependency in pom.xml.</li>\n<li>put bcprov.*.jar to your specific folder(e.g: \\lib), then refer it when run the project.</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":16597282,"reputation":11,"user_id":11993868,"display_name":"robcob"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1567075089,"creation_date":1567075089,"answer_id":57708361,"question_id":13721579,"body_markdown":"We have been suffering with the same issue for a few weeks and had tried a lot of the suggested steps to no avail. Providing our solution below so others don&#39;t have to suffer like we did!\r\n\r\nWe were attempting to use bcprov-ext-jdk15on-162.jar, added to classpath, included in JBoss lib directories, bundled with WAR, marked as provided and added to JBoss /lib directories but no luck.\r\n\r\nIn the end, we tried different versions of bouncycastle and found a less recent version who&#39;s signature could be verified by our particular Java version&#39;s jarsigner (1.5X).\r\n\r\nDespite the jar&#39;s signature being verifiable by our Java version, when the .jar is packaged into a WAR the signature was invalidated somehow by JBoss.\r\n\r\nIn the end, the solution for us was to;\r\n```\r\n1. Add bouncycastle jar to JBoss classpath\r\n2. Add &#39;org.bouncycastle.jce.provider.BouncyCastleProvider&#39; to &#39;java.security&#39; providers\r\n3. Mark bouncycastle in your WAR as a &#39;provided&#39; dependency\r\n```\r\n\r\nOnce we had a version of the .jar on our classpath and were sure that our WAR was not packaging it in we were golden.\r\n\r\nThe issue seems to be tightly coupled to whatever Java/JBoss version you happen to be using. So if this solution does not work for you I would suggest to test different versions of bouncycastle with \r\n```\r\njarsigner -verify &lt;bouncycastle.jar&gt;\r\n```\r\n\r\n","title":"JCE cannot authenticate the provider BC in java swing application","body":"<p>We have been suffering with the same issue for a few weeks and had tried a lot of the suggested steps to no avail. Providing our solution below so others don't have to suffer like we did!</p>\n\n<p>We were attempting to use bcprov-ext-jdk15on-162.jar, added to classpath, included in JBoss lib directories, bundled with WAR, marked as provided and added to JBoss /lib directories but no luck.</p>\n\n<p>In the end, we tried different versions of bouncycastle and found a less recent version who's signature could be verified by our particular Java version's jarsigner (1.5X).</p>\n\n<p>Despite the jar's signature being verifiable by our Java version, when the .jar is packaged into a WAR the signature was invalidated somehow by JBoss.</p>\n\n<p>In the end, the solution for us was to;</p>\n\n<pre><code>1. Add bouncycastle jar to JBoss classpath\n2. Add 'org.bouncycastle.jce.provider.BouncyCastleProvider' to 'java.security' providers\n3. Mark bouncycastle in your WAR as a 'provided' dependency\n</code></pre>\n\n<p>Once we had a version of the .jar on our classpath and were sure that our WAR was not packaging it in we were golden.</p>\n\n<p>The issue seems to be tightly coupled to whatever Java/JBoss version you happen to be using. So if this solution does not work for you I would suggest to test different versions of bouncycastle with </p>\n\n<pre><code>jarsigner -verify &lt;bouncycastle.jar&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10625892,"reputation":145,"user_id":7825532,"display_name":"Abhishek"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1577782900,"creation_date":1577782900,"answer_id":59541858,"question_id":13721579,"body_markdown":"There are lot of solutions to this problem but unfortunately nobody talks about the causing issue.\r\n\r\nIf you are generating an executable jar that has BC.jar in it(in form of any dependency) than this issue would occur if below condition matches:\r\n\r\n 1. Generating jar via eclipse&#39;s export option i.e. Export-&gt; Runnable Jar File -&gt; Libary Handling {extract required libraries into generated Jar}-&gt; FINISH\r\n\r\nBoom, now you have landed into trouble and you will face an error i.e. **JCE can&#39;t authenticate the provider BC**\r\n\r\nThe reason for above problem is, when you create a jar with option 1 than you are actually unpacking the BouncyCastle jar again that violates the security assosiated with BC. So, whenever you run it again java validates it and finds current BC.jar in your assosiated jar has an error.\r\n\r\nSo, guys make sure what you are doing is justified because by changing the JDK&#39;s security data that will make it work but not for everyone.\r\n\r\nHow to make it work?{This will work on local/personal machine only,not on every machine }\r\n\r\n 1. edit jre\\lib\\security\\java.security file\r\n 2. add security.provider.10=org.bouncycastle.jce.provider.BouncyCastleProvider\r\n 3. copy bc*.jar to jre\\lib\\ext\r\n\r\nThat&#39;s it.","title":"JCE cannot authenticate the provider BC in java swing application","body":"<p>There are lot of solutions to this problem but unfortunately nobody talks about the causing issue.</p>\n\n<p>If you are generating an executable jar that has BC.jar in it(in form of any dependency) than this issue would occur if below condition matches:</p>\n\n<ol>\n<li>Generating jar via eclipse's export option i.e. Export-> Runnable Jar File -> Libary Handling {extract required libraries into generated Jar}-> FINISH</li>\n</ol>\n\n<p>Boom, now you have landed into trouble and you will face an error i.e. <strong>JCE can't authenticate the provider BC</strong></p>\n\n<p>The reason for above problem is, when you create a jar with option 1 than you are actually unpacking the BouncyCastle jar again that violates the security assosiated with BC. So, whenever you run it again java validates it and finds current BC.jar in your assosiated jar has an error.</p>\n\n<p>So, guys make sure what you are doing is justified because by changing the JDK's security data that will make it work but not for everyone.</p>\n\n<p>How to make it work?{This will work on local/personal machine only,not on every machine }</p>\n\n<ol>\n<li>edit jre\\lib\\security\\java.security file</li>\n<li>add security.provider.10=org.bouncycastle.jce.provider.BouncyCastleProvider</li>\n<li>copy bc*.jar to jre\\lib\\ext</li>\n</ol>\n\n<p>That's it.</p>\n"},{"tags":[],"owner":{"account_id":27504089,"reputation":1,"user_id":20987139,"display_name":"Ayodeji Ajibade"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696692867,"creation_date":1696692867,"answer_id":77250436,"question_id":13721579,"body_markdown":"Just use Open JDK and the issue will disappear. I used openJDK21 ","title":"JCE cannot authenticate the provider BC in java swing application","body":"<p>Just use Open JDK and the issue will disappear. I used openJDK21</p>\n"}],"owner":{"account_id":1034128,"reputation":957,"user_id":1041858,"accept_rate":30,"display_name":"user1041858"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":90699,"favorite_count":0,"down_vote_count":0,"up_vote_count":32,"accepted_answer_id":13726570,"answer_count":8,"score":32,"last_activity_date":1696692867,"creation_date":1354704803,"question_id":13721579,"body_markdown":"I am creating a swing based application in Java which uses some encryption technique. But \r\njavax.crypto.KeyGenerator.getInstance(&quot;AES&quot;, &quot;BC&quot;) gives exception:\r\n\r\n\r\n    java.security.NoSuchProviderException: JCE cannot authenticate the provider BC\r\n            at javax.crypto.SunJCE_b.a(DashoA13*..)\r\n            at javax.crypto.KeyGenerator.getInstance(DashoA13*..)\r\n\r\n\r\nSo what is the problem?","title":"JCE cannot authenticate the provider BC in java swing application","body":"<p>I am creating a swing based application in Java which uses some encryption technique. But \njavax.crypto.KeyGenerator.getInstance(\"AES\", \"BC\") gives exception:</p>\n\n<pre><code>java.security.NoSuchProviderException: JCE cannot authenticate the provider BC\n        at javax.crypto.SunJCE_b.a(DashoA13*..)\n        at javax.crypto.KeyGenerator.getInstance(DashoA13*..)\n</code></pre>\n\n<p>So what is the problem?</p>\n"},{"tags":["java","algorithmic-trading","mql4","metatrader4"],"answers":[{"tags":[],"owner":{"account_id":2393411,"reputation":43,"user_id":2092792,"display_name":"Eric"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1480609250,"creation_date":1480594035,"answer_id":40910269,"question_id":39592718,"body_markdown":"If you need to send/receive synchronous message between MT4 and Java application, REST would be the best approach because fast response matters in this scenario. Message Queue solutions like ZeroMQ fits better in asynchronous solutions, so it won&#39;t help you. Once you choose REST approach, you can use MQL4 `WebRequest()` to call your Java application.\r\n\r\n","title":"How to send/receive data to/from MetaTrader Ternminal 4 with JAVA (or anything!)","body":"<p>If you need to send/receive synchronous message between MT4 and Java application, REST would be the best approach because fast response matters in this scenario. Message Queue solutions like ZeroMQ fits better in asynchronous solutions, so it won't help you. Once you choose REST approach, you can use MQL4 <code>WebRequest()</code> to call your Java application.</p>\n"},{"tags":[],"owner":{"account_id":4509730,"reputation":1,"user_id":3666197,"display_name":"user3666197"},"down_vote_count":2,"up_vote_count":8,"is_accepted":true,"score":6,"last_activity_date":1483425323,"creation_date":1480610682,"answer_id":40916034,"question_id":39592718,"body_markdown":"**A0:** yes, forget straight about REST and synchronous, blocking chains in FX-trading domain\r\n\r\n**A1:** well, not a typical way. MetaTrader Server is a proprietary suite of systems on the Broker-side and theirs API are not disclosed to allow some 3rd party integrations against.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n**A2:** **FIX-Protocol** is the industry standard LP-interfacing lingua franca. In case you have contracted relations with your institutional trading provider, incl. the FIX-Protocol GWY-port, this may provide you an A-level access to the Market and to integrate your trading tools against. If this is the case, forget about MT4 instrumentation, as prime-time cadences are far beyond the MT4 Terminal localhost processing architecture ( multiple events with a **sub-millisecond** TimeDOMAIN resolution are common, whereas MQL4 does not provide any direct support for multithreaded-concurrent / better parallel programme scheduling designs ). **FIX-Protocol events are simply off-the picture above, being far left, &quot;before&quot; the graph starts from 1st [ms] column.**\r\n\r\n**ZeroMQ** may help **liberate** your further designs from MQL4 limitations. May like to read my other posts on distributed systems, where MQL4 / ZeroMQ / ML-AI-predictors / GPU-processing infrastructures appear.\r\n\r\nAnyway:\r\n-------\r\n\r\n&gt;!Enjoy the Wild Worlds of **`MQL4/MQL5`**\r\n\r\n&lt;br&gt;**Interested?** [May also like reading other **MQL4**][2], [**ZeroMQ distributed processing**][3] and [**low-latency** trading posts][4]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/FufqL.gif\r\n  [2]: https://stackoverflow.com/search?tab=votes&amp;q=user%3A3666197%20[mql4]\r\n  [3]: https://stackoverflow.com/search?tab=votes&amp;q=user%3A3666197%20[ZeroMQ]\r\n  [4]: https://stackoverflow.com/search?tab=votes&amp;q=user%3A3666197%20[low-latency]","title":"How to send/receive data to/from MetaTrader Ternminal 4 with JAVA (or anything!)","body":"<p><strong>A0:</strong> yes, forget straight about REST and synchronous, blocking chains in FX-trading domain</p>\n\n<p><strong>A1:</strong> well, not a typical way. MetaTrader Server is a proprietary suite of systems on the Broker-side and theirs API are not disclosed to allow some 3rd party integrations against.</p>\n\n<p><a href=\"https://i.stack.imgur.com/FufqL.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/FufqL.gif\" alt=\"enter image description here\"></a></p>\n\n<p><strong>A2:</strong> <strong>FIX-Protocol</strong> is the industry standard LP-interfacing lingua franca. In case you have contracted relations with your institutional trading provider, incl. the FIX-Protocol GWY-port, this may provide you an A-level access to the Market and to integrate your trading tools against. If this is the case, forget about MT4 instrumentation, as prime-time cadences are far beyond the MT4 Terminal localhost processing architecture ( multiple events with a <strong>sub-millisecond</strong> TimeDOMAIN resolution are common, whereas MQL4 does not provide any direct support for multithreaded-concurrent / better parallel programme scheduling designs ). <strong>FIX-Protocol events are simply off-the picture above, being far left, \"before\" the graph starts from 1st [ms] column.</strong></p>\n\n<p><strong>ZeroMQ</strong> may help <strong>liberate</strong> your further designs from MQL4 limitations. May like to read my other posts on distributed systems, where MQL4 / ZeroMQ / ML-AI-predictors / GPU-processing infrastructures appear.</p>\n\n<h2>Anyway:</h2>\n\n<blockquote class=\"spoiler\">\n  <p>Enjoy the Wild Worlds of <strong><code>MQL4/MQL5</code></strong></p>\n</blockquote>\n\n<p><br><strong>Interested?</strong> <a href=\"https://stackoverflow.com/search?tab=votes&amp;q=user%3A3666197%20[mql4]\">May also like reading other <strong>MQL4</strong></a>, <a href=\"https://stackoverflow.com/search?tab=votes&amp;q=user%3A3666197%20[ZeroMQ]\"><strong>ZeroMQ distributed processing</strong></a> and <a href=\"https://stackoverflow.com/search?tab=votes&amp;q=user%3A3666197%20[low-latency]\"><strong>low-latency</strong> trading posts</a></p>\n"},{"tags":[],"owner":{"account_id":16172237,"reputation":21,"user_id":11675794,"display_name":"Pleplius"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1561037359,"creation_date":1561033251,"answer_id":56685884,"question_id":39592718,"body_markdown":"I started to code an expert with MQL5, naturally on MT5 platform, and I must admit that the difficulty of managing the application along with the increase of its complexity is high. It&#39;s not only due to a missing garbage collector, that of course imposes the deletion of the new instances, but also because Java offers a set of powerful data structures and syntax that MQL5 naturally doesn&#39;t have. Last but not least, talking about the community and the third party libraries available, there&#39;s a light year of the distance between Java and MQL5. I.e. if I need to find a library for a JSON conversion on the Java side I find dozens of official and stable versions, in the MQL5 community I have found only rubbish that I had to modify myself.\r\n\r\nSo, after numerous failed tries on coding my expert in MQL5 (not a simple one of course), I decided to adopt a radical approach: coding an application, client-side MQL5, and server-side Java, that provides a Java facade for the MT5 platform. Same API, same basic events and so on. Even though I thought more than once that I was getting stuck in a blind path, I kept coding and eventually, I made it, obtaining a really solid result.\r\nNaturally, the REST interface drastically reduces the performances, and each request, even with Tomcat and MT5 running in the same localhost, is in the order of milliseconds, not micros, but on the other side this reduces only the suitability of this architecture, it doesn&#39;t make it useless at all.\r\n\r\nStrategies like scalpelling and every kind of high-frequency trading are not good for such kind of scenario, vice-versa every other strategy in the longer period, even if intraday&#39;s ones, can be implemented successfully without any cons.\r\nLast but not least, it isn&#39;t necessary to use the WebRequest() MQL5 method to call any Servlet container, it is possible to import the wininet.dll from the OS (talking about Windows) and the strategy tester will work as if the strategy has been coded in MQL5, maybe just a little bit slower.\r\nTo sum up, I wouldn&#39;t be so sarcastic on the Java facade approach for the FX trading platforms, citing only the nude performances without contextualizing the overall scenario is a naive approach to face the argument.","title":"How to send/receive data to/from MetaTrader Ternminal 4 with JAVA (or anything!)","body":"<p>I started to code an expert with MQL5, naturally on MT5 platform, and I must admit that the difficulty of managing the application along with the increase of its complexity is high. It's not only due to a missing garbage collector, that of course imposes the deletion of the new instances, but also because Java offers a set of powerful data structures and syntax that MQL5 naturally doesn't have. Last but not least, talking about the community and the third party libraries available, there's a light year of the distance between Java and MQL5. I.e. if I need to find a library for a JSON conversion on the Java side I find dozens of official and stable versions, in the MQL5 community I have found only rubbish that I had to modify myself.</p>\n\n<p>So, after numerous failed tries on coding my expert in MQL5 (not a simple one of course), I decided to adopt a radical approach: coding an application, client-side MQL5, and server-side Java, that provides a Java facade for the MT5 platform. Same API, same basic events and so on. Even though I thought more than once that I was getting stuck in a blind path, I kept coding and eventually, I made it, obtaining a really solid result.\nNaturally, the REST interface drastically reduces the performances, and each request, even with Tomcat and MT5 running in the same localhost, is in the order of milliseconds, not micros, but on the other side this reduces only the suitability of this architecture, it doesn't make it useless at all.</p>\n\n<p>Strategies like scalpelling and every kind of high-frequency trading are not good for such kind of scenario, vice-versa every other strategy in the longer period, even if intraday's ones, can be implemented successfully without any cons.\nLast but not least, it isn't necessary to use the WebRequest() MQL5 method to call any Servlet container, it is possible to import the wininet.dll from the OS (talking about Windows) and the strategy tester will work as if the strategy has been coded in MQL5, maybe just a little bit slower.\nTo sum up, I wouldn't be so sarcastic on the Java facade approach for the FX trading platforms, citing only the nude performances without contextualizing the overall scenario is a naive approach to face the argument.</p>\n"},{"tags":[],"owner":{"account_id":25058442,"reputation":11,"user_id":18913571,"display_name":"Forex Hacker"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1650668718,"creation_date":1650668718,"answer_id":71975482,"question_id":39592718,"body_markdown":"WebRequest isn&#39;t the end of the world, you can submit http requests from your EA using API, works even with Strategy Tester.\r\n","title":"How to send/receive data to/from MetaTrader Ternminal 4 with JAVA (or anything!)","body":"<p>WebRequest isn't the end of the world, you can submit http requests from your EA using API, works even with Strategy Tester.</p>\n"}],"owner":{"account_id":9099347,"reputation":617,"user_id":6772101,"display_name":"Jay Povey"},"comment_count":0,"delete_vote_count":1,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":35359,"favorite_count":0,"down_vote_count":1,"up_vote_count":13,"closed_date":1696357644,"accepted_answer_id":40916034,"answer_count":4,"score":12,"last_activity_date":1696692817,"creation_date":1474370405,"question_id":39592718,"body_markdown":"I have been working on an algorithm ( Not mine, I am just modifying it ) that predicts when to buy and sell on the FOREX market. I need to be able to open and close orders, dynamically update parameters of the orders ( such as stoploss, maximum stop etc. ) and receive real time tick data.\r\n\r\nI have been researching for well over a week, and have no success.\r\n\r\nThe closest I have gotten is using [JavoNet][1] and [Mt4 Api][2]\r\n\r\nI managed to import the DLL into java and use a MQL4 function, which was `AccountBalance()`, however this has returned `0.0`, which was not the account balance, I messed around with the code and the settings on MT4 client but still no luck.\r\n\r\n**Q0:** Can anyone please point me in the right direction?\r\n\r\nI am new to automated FOREX trading but from what I understand there is a broker somewhere with a MT4 server and I connect to that server with my MT4 client on my windows machine.\r\n\r\n**Q1:** If this is the case, do I need to make an API work with the server side instead of my client side?\r\n\r\nAll these DLL&#39;s I have tried so far have been used with the MT4 client software on my machine.\r\n\r\nI have also been doing some reading on the FIX-Protocol and ZeroMQ.\r\n\r\n**Q2:** Can these help me achieve my goal in any way (instead of creating some bridges between JAVA and MT4 DLL&#39;s)?\r\n\r\n  [1]: https://www.javonet.com/\r\n  [2]: http://mtapi4.net/","title":"How to send/receive data to/from MetaTrader Ternminal 4 with JAVA (or anything!)","body":"<p>I have been working on an algorithm ( Not mine, I am just modifying it ) that predicts when to buy and sell on the FOREX market. I need to be able to open and close orders, dynamically update parameters of the orders ( such as stoploss, maximum stop etc. ) and receive real time tick data.</p>\n\n<p>I have been researching for well over a week, and have no success.</p>\n\n<p>The closest I have gotten is using <a href=\"https://www.javonet.com/\" rel=\"noreferrer\">JavoNet</a> and <a href=\"http://mtapi4.net/\" rel=\"noreferrer\">Mt4 Api</a></p>\n\n<p>I managed to import the DLL into java and use a MQL4 function, which was <code>AccountBalance()</code>, however this has returned <code>0.0</code>, which was not the account balance, I messed around with the code and the settings on MT4 client but still no luck.</p>\n\n<p><strong>Q0:</strong> Can anyone please point me in the right direction?</p>\n\n<p>I am new to automated FOREX trading but from what I understand there is a broker somewhere with a MT4 server and I connect to that server with my MT4 client on my windows machine.</p>\n\n<p><strong>Q1:</strong> If this is the case, do I need to make an API work with the server side instead of my client side?</p>\n\n<p>All these DLL's I have tried so far have been used with the MT4 client software on my machine.</p>\n\n<p>I have also been doing some reading on the FIX-Protocol and ZeroMQ.</p>\n\n<p><strong>Q2:</strong> Can these help me achieve my goal in any way (instead of creating some bridges between JAVA and MT4 DLL's)?</p>\n"},{"tags":["java","spring-boot","exception"],"answers":[{"tags":[],"owner":{"account_id":19462755,"reputation":56,"user_id":14236703,"display_name":"KM PRIYA AGRAWAL"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1696691961,"creation_date":1643549417,"answer_id":70915096,"question_id":70907689,"body_markdown":"Please add the property `SerializationFeature.FAIL_ON_EMPTY_BEANS= false` to your object mapper like `objectMapper.configure(SerializationFeature.FAIL_ON_EMPTY_BEANS, false);`\r\n\r\n  \r\nOr you can add this code to any class of springboot which have a `@Configuration` annotation on it.\r\n\r\n```java\r\n@Bean\r\npublic ObjectMapper getMapper() {\r\n\r\n    ObjectMapper objectMapper = new ObjectMapper();\r\n    objectMapper.configure(SerializationFeature.FAIL_ON_EMPTY_BEANS, false);\r\n\treturn objectMapper;\r\n}\r\n```\r\nSend Payload as\r\n```json \r\n{\r\n    &quot;custom_data&quot;: {},\r\n    &quot;email&quot;: &quot;emailvalue&quot;\r\n}\r\n```\r\nNow I am supposing your API is like this:\r\n```java\r\n@PostMapping(value = &quot;/show/recipient&quot;) /*  /preview-email-recipient*/\r\npublic ResponseEntity&lt;?&gt; showRecipient(@Valid @RequestBody Recipient recipient){\r\n    log.info(String.format(&quot;recipient received {%s} &quot;,recipient.toString()));\r\n\r\n    return new ResponseEntity&lt;&gt;(recipient,HttpStatus.OK);\r\n}\r\n```\r\ncurl call to the endpoint will be POST to a URL http://localhost:8080/show/recipient with request body as:\r\n```json\r\n{\r\n    &quot;customData&quot;: {},\r\n    &quot;email&quot;: &quot;emailvalue&quot;\r\n}\r\n```\r\nresponse:\r\n```\r\n{\r\n    &quot;customData&quot;: {},\r\n    &quot;email&quot;: &quot;emailvalue&quot;\r\n}\r\n````    \r\nThe reason for failure:\r\n  \r\nWhen you return your object i.e. (Recipient in this case) in response it is getting Serialized to JSON string using ObjectMapper which is used in spring&#39;s MessageConverter(i.e. Jackson2HttpMessageConverter) bean.  \r\n\r\nNow the error is caused by how ObjectMapper serializes your class. Your class has 2 fields, 1 of type String and 1 of type `JSONObject/GenericType`. ObjectMapper when serializing fields, tries to find the corresponding serializer based on the field type. There are some out-of-the-box implementations of serializers for known types like `String` but for your custom type you either need to provide a serializer to ObjectMapper bean or have to disable serialization via configuration of set property `SerializationFeature.FAIL_ON_EMPTY_BEANS` to false.\r\n\r\n\r\nNow what does `SerializationFeature.FAIL_ON_EMPTY_BEANS` do??\r\n```\r\n    /**\r\n     * Feature that determines what happens when no accessors are\r\n     * found for a type (and there are no annotations to indicate\r\n     * it is meant to be serialized). If enabled (default), an\r\n     * exception is thrown to indicate these as non-serializable\r\n     * types; if disabled, they are serialized as empty Objects,\r\n     * i.e. without any properties.\r\n     *&lt;p&gt;\r\n     * Note that empty types that this feature has only effect on\r\n     * those &quot;empty&quot; beans that do not have any recognized annotations\r\n     * (like &lt;code&gt;@JsonSerialize&lt;/code&gt;): ones that do have annotations\r\n     * do not result in an exception being thrown.\r\n     *&lt;p&gt;\r\n     * Feature is enabled by default.\r\n     */    \r\n     public static final SerializationFeature FAIL_ON_EMPTY_BEANS\r\n```\r\nSo:  \r\n1 way was to disable serialization on empty beans.  \r\n2nd way you can annotate CustomData class with `@JsonSerialize`. You are provinding the mapper which serializer you have to used for this param. Make CustomData class as:\r\n```java\r\n@NoArgsConstructor\r\n@JsonSerialize\r\npublic class CustomData&lt;T&gt; {}\r\n```","title":"InvalidDefinitionException No serializer found in java for generic class","body":"<p>Please add the property <code>SerializationFeature.FAIL_ON_EMPTY_BEANS= false</code> to your object mapper like <code>objectMapper.configure(SerializationFeature.FAIL_ON_EMPTY_BEANS, false);</code></p>\n<p>Or you can add this code to any class of springboot which have a <code>@Configuration</code> annotation on it.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Bean\npublic ObjectMapper getMapper() {\n\n    ObjectMapper objectMapper = new ObjectMapper();\n    objectMapper.configure(SerializationFeature.FAIL_ON_EMPTY_BEANS, false);\n    return objectMapper;\n}\n</code></pre>\n<p>Send Payload as</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n    &quot;custom_data&quot;: {},\n    &quot;email&quot;: &quot;emailvalue&quot;\n}\n</code></pre>\n<p>Now I am supposing your API is like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@PostMapping(value = &quot;/show/recipient&quot;) /*  /preview-email-recipient*/\npublic ResponseEntity&lt;?&gt; showRecipient(@Valid @RequestBody Recipient recipient){\n    log.info(String.format(&quot;recipient received {%s} &quot;,recipient.toString()));\n\n    return new ResponseEntity&lt;&gt;(recipient,HttpStatus.OK);\n}\n</code></pre>\n<p>curl call to the endpoint will be POST to a URL http://localhost:8080/show/recipient with request body as:</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n    &quot;customData&quot;: {},\n    &quot;email&quot;: &quot;emailvalue&quot;\n}\n</code></pre>\n<p>response:</p>\n<pre><code>{\n    &quot;customData&quot;: {},\n    &quot;email&quot;: &quot;emailvalue&quot;\n}\n</code></pre>\n<p>The reason for failure:</p>\n<p>When you return your object i.e. (Recipient in this case) in response it is getting Serialized to JSON string using ObjectMapper which is used in spring's MessageConverter(i.e. Jackson2HttpMessageConverter) bean.</p>\n<p>Now the error is caused by how ObjectMapper serializes your class. Your class has 2 fields, 1 of type String and 1 of type <code>JSONObject/GenericType</code>. ObjectMapper when serializing fields, tries to find the corresponding serializer based on the field type. There are some out-of-the-box implementations of serializers for known types like <code>String</code> but for your custom type you either need to provide a serializer to ObjectMapper bean or have to disable serialization via configuration of set property <code>SerializationFeature.FAIL_ON_EMPTY_BEANS</code> to false.</p>\n<p>Now what does <code>SerializationFeature.FAIL_ON_EMPTY_BEANS</code> do??</p>\n<pre><code>    /**\n     * Feature that determines what happens when no accessors are\n     * found for a type (and there are no annotations to indicate\n     * it is meant to be serialized). If enabled (default), an\n     * exception is thrown to indicate these as non-serializable\n     * types; if disabled, they are serialized as empty Objects,\n     * i.e. without any properties.\n     *&lt;p&gt;\n     * Note that empty types that this feature has only effect on\n     * those &quot;empty&quot; beans that do not have any recognized annotations\n     * (like &lt;code&gt;@JsonSerialize&lt;/code&gt;): ones that do have annotations\n     * do not result in an exception being thrown.\n     *&lt;p&gt;\n     * Feature is enabled by default.\n     */    \n     public static final SerializationFeature FAIL_ON_EMPTY_BEANS\n</code></pre>\n<p>So:<br />\n1 way was to disable serialization on empty beans.<br />\n2nd way you can annotate CustomData class with <code>@JsonSerialize</code>. You are provinding the mapper which serializer you have to used for this param. Make CustomData class as:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@NoArgsConstructor\n@JsonSerialize\npublic class CustomData&lt;T&gt; {}\n</code></pre>\n"}],"owner":{"account_id":8411933,"reputation":2522,"user_id":6313539,"display_name":"Sweta Sharma"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6650,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70915096,"answer_count":1,"score":0,"last_activity_date":1696691961,"creation_date":1643475243,"question_id":70907689,"body_markdown":"I have a generic class\r\n```\r\n@NoArgsConstructor\r\npublic class CustomData&lt;T&gt; {\r\n\r\n}\r\n```\r\nBelow is the class it is used.\r\n```\r\n@Data\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\n@Builder\r\npublic class Recipient {\r\n\t@NotEmpty(message = &quot;Please provide email details of recipient&quot;)\r\n\tpublic String email;\r\n    public CustomData&lt;?&gt; custom_data;\r\n}\r\n```\r\n\r\nBelow is the payload I&#39;m trying to use\r\n```\r\n&quot;recipients&quot;: [\r\n    {\r\n      &quot;custom_data&quot;: {},\r\n      &quot;email&quot;: &quot;string&quot;\r\n    }\r\n  ]\r\n```\r\n\r\nHowever I get an error saying com.fasterxml.jackson.databind.exc.InvalidDefinitionException: No serializer found for class\r\n\r\nCan someone please help? Thank you for your time","title":"InvalidDefinitionException No serializer found in java for generic class","body":"<p>I have a generic class</p>\n<pre><code>@NoArgsConstructor\npublic class CustomData&lt;T&gt; {\n\n}\n</code></pre>\n<p>Below is the class it is used.</p>\n<pre><code>@Data\n@AllArgsConstructor\n@NoArgsConstructor\n@Builder\npublic class Recipient {\n    @NotEmpty(message = &quot;Please provide email details of recipient&quot;)\n    public String email;\n    public CustomData&lt;?&gt; custom_data;\n}\n</code></pre>\n<p>Below is the payload I'm trying to use</p>\n<pre><code>&quot;recipients&quot;: [\n    {\n      &quot;custom_data&quot;: {},\n      &quot;email&quot;: &quot;string&quot;\n    }\n  ]\n</code></pre>\n<p>However I get an error saying com.fasterxml.jackson.databind.exc.InvalidDefinitionException: No serializer found for class</p>\n<p>Can someone please help? Thank you for your time</p>\n"},{"tags":["java","spring","hibernate","spring-data-jpa"],"comments":[{"owner":{"account_id":1223835,"reputation":75848,"user_id":1189885,"accept_rate":43,"display_name":"chrylis -cautiouslyoptimistic-"},"score":0,"creation_date":1489468032,"post_id":42778029,"comment_id":72670840,"body_markdown":"How do you know it&#39;s not saved? Does the cart get an ID when the method returns?","body":"How do you know it&#39;s not saved? Does the cart get an ID when the method returns?"},{"owner":{"account_id":10344652,"reputation":192,"user_id":7629986,"accept_rate":40,"display_name":"Harshad_Kenjale"},"score":0,"creation_date":1489468367,"post_id":42778029,"comment_id":72670924,"body_markdown":"@chrylis  i check it into database  , values not saves but it shows me successful message","body":"@chrylis  i check it into database  , values not saves but it shows me successful message"},{"owner":{"account_id":1223835,"reputation":75848,"user_id":1189885,"accept_rate":43,"display_name":"chrylis -cautiouslyoptimistic-"},"score":0,"creation_date":1489468596,"post_id":42778029,"comment_id":72670995,"body_markdown":"Shows you the successful message before or after the call to `save`? (You have a log statement *before*.) And do you get an ID assigned?","body":"Shows you the successful message before or after the call to <code>save</code>? (You have a log statement <i>before</i>.) And do you get an ID assigned?"},{"owner":{"account_id":10344652,"reputation":192,"user_id":7629986,"accept_rate":40,"display_name":"Harshad_Kenjale"},"score":0,"creation_date":1489468723,"post_id":42778029,"comment_id":72671046,"body_markdown":"after calling save method i got that message , hibernate does not create insert query it create an select query ,  i&#39;ll update that in question . Thank You","body":"after calling save method i got that message , hibernate does not create insert query it create an select query ,  i&#39;ll update that in question . Thank You"},{"owner":{"account_id":1223835,"reputation":75848,"user_id":1189885,"accept_rate":43,"display_name":"chrylis -cautiouslyoptimistic-"},"score":0,"creation_date":1489469393,"post_id":42778029,"comment_id":72671250,"body_markdown":"It looks like perhaps you&#39;re setting the ID manually instead of allowing JPA to generate it.","body":"It looks like perhaps you&#39;re setting the ID manually instead of allowing JPA to generate it."},{"owner":{"account_id":10344652,"reputation":192,"user_id":7629986,"accept_rate":40,"display_name":"Harshad_Kenjale"},"score":0,"creation_date":1489469921,"post_id":42778029,"comment_id":72671426,"body_markdown":"no i&#39;ll give it auto generated in model class , i think this problem is regarding to jpa configuration because when i change the dal layer from jpa to hibernate the values  saved successfully","body":"no i&#39;ll give it auto generated in model class , i think this problem is regarding to jpa configuration because when i change the dal layer from jpa to hibernate the values  saved successfully"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1489472112,"post_id":42778029,"comment_id":72672141,"body_markdown":"Don&#39;t ask the [same question](http://stackoverflow.com/questions/42717519/how-do-i-save-an-entity-using-spring-data-jpa) just because you don&#39;t get an answer!","body":"Don&#39;t ask the <a href=\"http://stackoverflow.com/questions/42717519/how-do-i-save-an-entity-using-spring-data-jpa\">same question</a> just because you don&#39;t get an answer!"},{"owner":{"account_id":10344652,"reputation":192,"user_id":7629986,"accept_rate":40,"display_name":"Harshad_Kenjale"},"score":0,"creation_date":1489472216,"post_id":42778029,"comment_id":72672182,"body_markdown":"@M.Deinum Extremely sorry for that ..","body":"@M.Deinum Extremely sorry for that .."}],"answers":[{"tags":[],"owner":{"account_id":6598150,"reputation":61,"user_id":5097233,"display_name":"arpit garg"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1489468346,"creation_date":1489468346,"answer_id":42778176,"question_id":42778029,"body_markdown":"Did you add below line in your rest.xml\r\n\r\n    &lt;repositories base-package=&quot;com.acme.repositories&quot; /&gt;\r\n\r\nIf not try with adding above line. It will setup Spring to create proxy instances for those interfaces.","title":"how to save data with save method of jpa Repository","body":"<p>Did you add below line in your rest.xml</p>\n\n<pre><code>&lt;repositories base-package=\"com.acme.repositories\" /&gt;\n</code></pre>\n\n<p>If not try with adding above line. It will setup Spring to create proxy instances for those interfaces.</p>\n"},{"tags":[],"owner":{"account_id":261166,"reputation":1670,"user_id":545164,"display_name":"VimalKumar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1489517108,"creation_date":1489517108,"answer_id":42794117,"question_id":42778029,"body_markdown":"You have defined both Hibernate Session factory and JPA Entity manager in your rest.xml. Use only one. Refer the below answer.\r\n\r\nhttps://stackoverflow.com/questions/30122829/saving-entity-in-repository-does-not-work-spring","title":"how to save data with save method of jpa Repository","body":"<p>You have defined both Hibernate Session factory and JPA Entity manager in your rest.xml. Use only one. Refer the below answer.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/30122829/saving-entity-in-repository-does-not-work-spring\">Saving entity in repository does not work SPRING</a></p>\n"}],"owner":{"account_id":10344652,"reputation":192,"user_id":7629986,"accept_rate":40,"display_name":"Harshad_Kenjale"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":8788,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1696691110,"creation_date":1489467508,"question_id":42778029,"body_markdown":"While adding the entity from service implemented class to Repository interface , it showing successful message but data does not inserted to the database i call the save(entity) method from JpaRepository interface . it does not show any error message instead of that it showing record inserted successfully message .    \r\n\r\nController --- &gt;&gt;.\r\n\r\n    @Controller\r\n    @RequestMapping(&quot;/cart&quot;)\r\n    public class CartController {\r\n    \t\r\n    \t@Autowired\r\n    \tCartService cartServices;\r\n    \t\r\n    \t/**\r\n    \t * Get All records in Cart\r\n    \t *  \r\n    \t * @return All Cart List\r\n    \t */\r\n    \t@RequestMapping(value = &quot;/list&quot;, method = RequestMethod.GET)\r\n    \tpublic @ResponseBody List&lt;Cart&gt; getCart() {\r\n    \r\n    \t\tList&lt;Cart&gt; cartList = null;\r\n    \t\ttry {\r\n    \t\t\tcartList = cartServices.getCartList();\r\n    if(cartList.isEmpty())\r\n    {\r\n    \tSystem.out.println(&quot;List is empty &quot;);\r\n    }\r\n    \t\t} catch (Exception e) {\r\n    \t\t\te.printStackTrace();\r\n    \t\t}\r\n    \r\n    \t\treturn cartList;\r\n    \t}\r\n    \t/**\r\n    \t * Add Cart\r\n    \t * \r\n    \t * @param representative\r\n    \t * @return Status\r\n    \t */\r\n    \t@RequestMapping(value = &quot;/create&quot;, method = RequestMethod.POST, consumes = MediaType.APPLICATION_JSON_VALUE)\r\n    \tpublic @ResponseBody Status addCart(@RequestBody Cart cart) {\r\n    \t\tSystem.out.println(&quot;i m from jpa controller&quot;);\r\n    \t\ttry {\r\n    \t\t\tcartServices.save(cart);\r\n    \t\t\treturn new Status(1, &quot;Cart added Successfully !&quot;);\r\n    \t\t} catch (Exception e) {\r\n    \t\t\t// e.printStackTrace();\r\n    \t\t\treturn new Status(0, e.toString());\r\n    \t\t}\r\n    \r\n    \t}\r\n\r\nService Implemented class------&gt;&gt;&gt;&gt;\r\n\r\n    @Service\r\n    public class CartServiceImpl implements CartService {\r\n    \r\n    \r\n    \t@Inject\r\n    \tCartRepository cartRepository;\r\n    \t\r\n    \t\r\n    \t/**\r\n    \t * Get All Cart\r\n    \t * \r\n    \t * @throws Exception\r\n    \t * @return All Cart List\r\n    \t */\r\n    \r\n    \t@Override\r\n    \t@Transactional\r\n    \tpublic List&lt;Cart&gt; getCartList() throws Exception {\r\n    \t\t// TODO Auto-generated method stub\r\n    \t\treturn cartRepository.findAll();\r\n    \t}\r\n    \r\n    \t/**\r\n    \t * Add Cart\r\n    \t * \r\n    \t * @param cart\r\n    \t * @throws Exception\r\n    \t * @return Boolean\r\n    \t */\r\n    \t@Override\r\n    \t@Transactional\r\n    \tpublic Cart save(Cart cart) throws Exception {\r\n    \t\tSystem.out.println(&quot;i m from jpa Service&quot;);\r\n    \t\t \r\n    \t\t\r\n    \t\tCart cart1 = cartRepository.save(cart);\r\n    \t\treturn    cart1;\r\n    \t}\r\n\r\nRepository Interface--------&gt;&gt;&gt;&gt;\r\n\r\n\r\n    package com.xptraining.repository;\r\n    \r\n    import org.springframework.data.jpa.repository.JpaRepository;\r\n    import org.springframework.stereotype.Repository;\r\n    import com.xptraining.model.Cart;\r\n    \r\n    \r\n    @Repository\r\n    public interface CartRepository extends JpaRepository&lt;Cart, Long&gt;\r\n    {\r\n    \r\n    \r\n    }\r\n\r\n\r\nWeb.xml\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;web-app xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns=&quot;http://xmlns.jcp.org/xml/ns/javaee&quot; xsi:schemaLocation=&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd&quot; id=&quot;WebApp_ID&quot; version=&quot;3.1&quot;&gt;\r\n      &lt;display-name&gt;xptraining&lt;/display-name&gt;\r\n      &lt;servlet&gt;\r\n      &lt;servlet-name&gt;mvc-dispatcher&lt;/servlet-name&gt;\r\n      &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;\r\n      &lt;init-param&gt;\r\n       &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\r\n       &lt;param-value&gt;/WEB-INF/rest.xml&lt;/param-value&gt;\r\n      &lt;/init-param&gt;\r\n      &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;\r\n     &lt;/servlet&gt;\r\n    \r\n     &lt;servlet-mapping&gt;\r\n      &lt;servlet-name&gt;mvc-dispatcher&lt;/servlet-name&gt;\r\n      &lt;url-pattern&gt;/&lt;/url-pattern&gt;\r\n     &lt;/servlet-mapping&gt;\r\n    \r\n    &lt;/web-app&gt;\r\n\r\n\r\n\r\nrest.xml\r\n\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\r\n    \txmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:context=&quot;http://www.springframework.org/schema/context&quot;\r\n    \txmlns:util=&quot;http://www.springframework.org/schema/util&quot; xmlns:jpa=&quot;http://www.springframework.org/schema/data/jpa&quot;\r\n    \txmlns:mvc=&quot;http://www.springframework.org/schema/mvc&quot;\r\n    \txsi:schemaLocation=&quot;http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.2.xsd\r\n      http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd\r\n      http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-3.2.xsd\r\n      http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.2.xsd  \r\n      http://www.springframework.org/schema/data/jpa \r\n      http://www.springframework.org/schema/data/jpa/spring-jpa.xsd&quot;&gt;\r\n      \r\n     &lt;context:component-scan base-package=&quot;com.xptraining&quot; /&gt;\r\n      &lt;jpa:repositories base-package=&quot;com.xptraining.repository&quot;\r\n                      entity-manager-factory-ref=&quot;entityManagerFactoryBean&quot;\r\n                      transaction-manager-ref=&quot;txManager&quot;/&gt;\r\n     &lt;!--  &lt;jpa:repositories base-package=&quot;com.xptraining.repository&quot;&gt;&lt;/jpa:repositories&gt; --&gt;\r\n    &lt;!-- &lt;jpa:repositories base-package=&quot;com.xptraining.repository&quot;\r\n                      entity-manager-factory-ref=&quot;cartRepository&quot;\r\n                      transaction-manager-ref=&quot;transactionManager&quot;/&gt;  --&gt;\r\n    \t\r\n    \t&lt;mvc:annotation-driven /&gt;\r\n    \t\r\n    &lt;bean id=&quot;entityManagerFactoryBean&quot; class=&quot;org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean&quot;&gt;\r\n          &lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot; /&gt;\r\n          &lt;!-- This makes /META-INF/persistence.xml is no longer necessary --&gt;\r\n          &lt;property name=&quot;packagesToScan&quot; value=&quot;com.xptraining.model&quot; /&gt;\r\n          &lt;!-- JpaVendorAdapter implementation for Hibernate EntityManager.\r\n               Exposes Hibernate&#39;s persistence provider and EntityManager extension interface --&gt;\r\n          &lt;property name=&quot;jpaVendorAdapter&quot;&gt;\r\n             &lt;bean class=&quot;org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter&quot; /&gt;\r\n          &lt;/property&gt;\r\n          &lt;property name=&quot;jpaProperties&quot;&gt;\r\n             &lt;props&gt;\r\n                &lt;prop key=&quot;hibernate.dialect&quot;&gt;org.hibernate.dialect.MySQL5Dialect&lt;/prop&gt;\r\n                    &lt;prop key=&quot;hibernate.show_sql&quot;&gt;${hibernate.show_sql}&lt;/prop&gt;\r\n                    &lt;prop key=&quot;hibernate.hbm2ddl.auto&quot;&gt;update&lt;/prop&gt;\r\n             &lt;/props&gt;\r\n          &lt;/property&gt;\r\n       &lt;/bean&gt;\r\n    \t&lt;bean id=&quot;dataSource&quot;\r\n    \t\tclass=&quot;org.springframework.jdbc.datasource.DriverManagerDataSource&quot;&gt;\r\n    \t\t&lt;property name=&quot;driverClassName&quot; value=&quot;com.mysql.jdbc.Driver&quot; /&gt;\r\n    \t\t&lt;property name=&quot;url&quot; value=&quot;jdbc:mysql://localhost:3306/training&quot; /&gt;\r\n    \t\t&lt;property name=&quot;username&quot; value=&quot;root&quot; /&gt;\r\n    \t\t&lt;property name=&quot;password&quot; value=&quot;xpointers&quot; /&gt;\r\n    \t&lt;/bean&gt;\r\n    \t\r\n    \t&lt;bean id=&quot;sessionFactory&quot;\r\n    \t\tclass=&quot;org.springframework.orm.hibernate4.LocalSessionFactoryBean&quot;&gt;\r\n    \t\t&lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot; /&gt;\r\n    \t\t&lt;property name=&quot;annotatedClasses&quot;&gt;\r\n    \t\t\t&lt;list&gt;\r\n    \t\t\t\t&lt;value&gt;com.xptraining.model.Product&lt;/value&gt;\r\n    \t\t\t\t&lt;value&gt;com.xptraining.model.Specialties&lt;/value&gt;\r\n    \t\t\t\t&lt;value&gt;com.xptraining.model.Representative&lt;/value&gt;\r\n    \t\t\t\t&lt;value&gt;com.xptraining.model.Cart&lt;/value&gt;\r\n    \t\t\t\t&lt;value&gt;com.xptraining.model.Sku&lt;/value&gt;\r\n    \t\t\t\t&lt;value&gt;com.xptraining.model.Order&lt;/value&gt;\r\n    \t\t\t&lt;/list&gt;\r\n    \t\t&lt;/property&gt;\r\n    \t\t&lt;property name=&quot;hibernateProperties&quot;&gt;\r\n    \t\t\t&lt;props&gt;\r\n    \t\t\t\t&lt;prop key=&quot;hibernate.dialect&quot;&gt;org.hibernate.dialect.MySQL5Dialect&lt;/prop&gt;\r\n    \t\t\t\t&lt;prop key=&quot;hibernate.show_sql&quot;&gt;${hibernate.show_sql}&lt;/prop&gt;\r\n    \t\t\t&lt;/props&gt;\r\n    \t\t&lt;/property&gt;\r\n    \t&lt;/bean&gt;\r\n    \t&lt;bean id=&quot;txManager&quot;\r\n    \t\tclass=&quot;org.springframework.orm.hibernate4.HibernateTransactionManager&quot;&gt;\r\n    \t\t&lt;property name=&quot;sessionFactory&quot; ref=&quot;sessionFactory&quot; /&gt;\r\n    \t&lt;/bean&gt;\r\n    \r\n    \t&lt;bean id=&quot;persistenceExceptionTranslationPostProcessor&quot;\r\n    \t\tclass=&quot;org.springframework.dao.annotation.PersistenceExceptionTranslationPostProcessor&quot; /&gt;\r\n    \r\n    \t&lt;bean id=&quot;dataDao&quot; class=&quot;com.xptraining.dal.impl.DataDaoImpl&quot;&gt;&lt;/bean&gt;\r\n    \t&lt;bean id=&quot;dataServices&quot; class=&quot;com.xptraining.services.impl.DataServicesImpl&quot;&gt;&lt;/bean&gt;\r\n    \t&lt;bean id=&quot;specialtiesDao&quot; class=&quot;com.xptraining.dal.impl.SpecialtiesDaoImpl&quot;&gt;&lt;/bean&gt;\r\n    \t&lt;bean id=&quot;specialtiesServices&quot; class=&quot;com.xptraining.services.impl.SpecialtiesServicesImpl&quot;&gt;&lt;/bean&gt;\r\n    \t&lt;bean id=&quot;representativeDao&quot; class=&quot;com.xptraining.dal.impl.RepresentativeDaoImpl&quot;&gt;&lt;/bean&gt;\r\n    \t&lt;bean id=&quot;representativeService&quot; class=&quot;com.xptraining.services.impl.RepresentativeServiceImpl&quot;&gt;&lt;/bean&gt;\r\n    \t&lt;bean id=&quot;skuDao&quot; class=&quot;com.xptraining.dal.impl.SkuDaoImpl&quot;&gt;&lt;/bean&gt;\r\n    \t&lt;bean id=&quot;skuServices&quot; class=&quot;com.xptraining.services.impl.SkuervicesImpl&quot;&gt;&lt;/bean&gt;\r\n    \t&lt;bean id=&quot;cartDao&quot; class=&quot;com.xptraining.dal.impl.CartDaoImpl&quot;&gt;&lt;/bean&gt;\r\n    \t&lt;bean id=&quot;cartServices&quot; class=&quot;com.xptraining.services.impl.CartServiceImpl&quot;&gt;&lt;/bean&gt;\r\n    \t&lt;bean id=&quot;orderDao&quot; class=&quot;com.xptraining.dal.impl.OrderDaoImpl&quot;&gt;&lt;/bean&gt;\r\n    \t&lt;bean id=&quot;orderServices&quot; class=&quot;com.xptraining.services.impl.OrderServicesImpl&quot;&gt;&lt;/bean&gt;\r\n    \t\r\n    &lt;/beans&gt;\r\n\r\n\r\n\r\n@My console when i call save method\r\n\r\n    10:48:55.219 [http-nio-8080-exec-10] DEBUG org.springframework.web.servlet.DispatcherServlet - DispatcherServlet with name &#39;mvc-dispatcher&#39; processing POST request for [/xptraining/cart/create]\r\n    10:48:55.220 [http-nio-8080-exec-10] DEBUG org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping - Looking up handler method for path /cart/create\r\n    10:48:55.220 [http-nio-8080-exec-10] DEBUG org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping - Returning handler method [public com.xptraining.model.Status com.xptraining.controller.CartController.addCart(com.xptraining.model.Cart)]\r\n    10:48:55.220 [http-nio-8080-exec-10] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean &#39;cartController&#39;\r\n    10:48:55.220 [http-nio-8080-exec-10] DEBUG org.springframework.web.servlet.mvc.method.annotation.RequestResponseBodyMethodProcessor - Read [class com.xptraining.model.Cart] as &quot;application/json&quot; with [org.springframework.http.converter.json.MappingJackson2HttpMessageConverter@48e069ed]\r\n    i m from jpa controller\r\n    i m from jpa Service\r\n    10:48:55.220 [http-nio-8080-exec-10] DEBUG org.springframework.orm.hibernate4.HibernateTransactionManager - Creating new transaction with name [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT; &#39;&#39;\r\n    10:48:55.220 [http-nio-8080-exec-10] DEBUG org.springframework.orm.hibernate4.HibernateTransactionManager - Opened new Session [SessionImpl(PersistenceContext[entityKeys=[],collectionKeys=[]];ActionQueue[insertions=org.hibernate.engine.spi.ExecutableList@23b8bcb1 updates=org.hibernate.engine.spi.ExecutableList@2d7f56b6 deletions=org.hibernate.engine.spi.ExecutableList@2940d7c1 orphanRemovals=org.hibernate.engine.spi.ExecutableList@6c425c8d collectionCreations=org.hibernate.engine.spi.ExecutableList@a793880 collectionRemovals=org.hibernate.engine.spi.ExecutableList@5d64159f collectionUpdates=org.hibernate.engine.spi.ExecutableList@72b52f2d collectionQueuedOps=org.hibernate.engine.spi.ExecutableList@c6da3c2 unresolvedInsertDependencies=UnresolvedEntityInsertActions[]])] for Hibernate transaction\r\n    10:48:55.220 [http-nio-8080-exec-10] DEBUG org.springframework.orm.hibernate4.HibernateTransactionManager - Preparing JDBC Connection of Hibernate Session [SessionImpl(PersistenceContext[entityKeys=[],collectionKeys=[]];ActionQueue[insertions=org.hibernate.engine.spi.ExecutableList@23b8bcb1 updates=org.hibernate.engine.spi.ExecutableList@2d7f56b6 deletions=org.hibernate.engine.spi.ExecutableList@2940d7c1 orphanRemovals=org.hibernate.engine.spi.ExecutableList@6c425c8d collectionCreations=org.hibernate.engine.spi.ExecutableList@a793880 collectionRemovals=org.hibernate.engine.spi.ExecutableList@5d64159f collectionUpdates=org.hibernate.engine.spi.ExecutableList@72b52f2d collectionQueuedOps=org.hibernate.engine.spi.ExecutableList@c6da3c2 unresolvedInsertDependencies=UnresolvedEntityInsertActions[]])]\r\n    10:48:55.220 [http-nio-8080-exec-10] DEBUG org.hibernate.engine.jdbc.internal.LogicalConnectionImpl - Obtaining JDBC connection\r\n    10:48:55.220 [http-nio-8080-exec-10] DEBUG org.springframework.jdbc.datasource.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/training]\r\n    10:48:55.223 [http-nio-8080-exec-10] DEBUG org.hibernate.engine.jdbc.internal.LogicalConnectionImpl - Obtained JDBC connection\r\n    10:48:55.223 [http-nio-8080-exec-10] DEBUG org.hibernate.engine.transaction.spi.AbstractTransactionImpl - begin\r\n    10:48:55.223 [http-nio-8080-exec-10] DEBUG org.hibernate.engine.transaction.internal.jdbc.JdbcTransaction - initial autocommit status: true\r\n    10:48:55.223 [http-nio-8080-exec-10] DEBUG org.hibernate.engine.transaction.internal.jdbc.JdbcTransaction - disabling autocommit\r\n    10:48:55.223 [http-nio-8080-exec-10] DEBUG org.springframework.orm.hibernate4.HibernateTransactionManager - Exposing Hibernate transaction as JDBC transaction [com.mysql.jdbc.JDBC4Connection@5c26bcfd]\r\n    10:48:55.224 [http-nio-8080-exec-10] DEBUG org.springframework.orm.jpa.EntityManagerFactoryUtils - Opening JPA EntityManager\r\n    10:48:55.224 [http-nio-8080-exec-10] DEBUG org.springframework.orm.jpa.EntityManagerFactoryUtils - Registering transaction synchronization for JPA EntityManager\r\n    10:48:55.224 [http-nio-8080-exec-10] DEBUG org.hibernate.loader.Loader - Loading entity: [com.xptraining.model.Cart#1]\r\n    10:48:55.224 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select cart0_.cart_id as cart_id1_0_0_, cart0_.prize as prize2_0_0_, cart0_.quantity as quantity3_0_0_, cart0_.representative_id as represen4_0_0_, cart0_.sku_id as sku_id5_0_0_ from cart cart0_ where cart0_.cart_id=?\r\n    10:48:55.224 [http-nio-8080-exec-10] DEBUG org.hibernate.engine.jdbc.internal.LogicalConnectionImpl - Obtaining JDBC connection\r\n    10:48:55.224 [http-nio-8080-exec-10] DEBUG org.springframework.jdbc.datasource.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/training]\r\n    10:48:55.226 [http-nio-8080-exec-10] DEBUG org.hibernate.engine.jdbc.internal.LogicalConnectionImpl - Obtained JDBC connection\r\n    10:48:55.226 [http-nio-8080-exec-10] DEBUG org.hibernate.loader.Loader - Result set row: 0\r\n    10:48:55.226 [http-nio-8080-exec-10] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.xptraining.model.Cart#1]\r\n    10:48:55.227 [http-nio-8080-exec-10] DEBUG org.hibernate.engine.internal.TwoPhaseLoad - Resolving associations for [com.xptraining.model.Cart#1]\r\n    10:48:55.227 [http-nio-8080-exec-10] DEBUG org.hibernate.engine.internal.TwoPhaseLoad - Done materializing entity [com.xptraining.model.Cart#1]\r\n    10:48:55.227 [http-nio-8080-exec-10] DEBUG org.hibernate.loader.Loader - Done entity load\r\n    10:48:55.227 [http-nio-8080-exec-10] DEBUG org.springframework.orm.jpa.EntityManagerFactoryUtils - Closing JPA EntityManager\r\n    10:48:55.227 [http-nio-8080-exec-10] DEBUG org.hibernate.engine.jdbc.internal.LogicalConnectionImpl - Releasing JDBC connection\r\n    10:48:55.227 [http-nio-8080-exec-10] DEBUG org.hibernate.engine.jdbc.internal.LogicalConnectionImpl - Released JDBC connection\r\n    10:48:55.227 [http-nio-8080-exec-10] DEBUG org.springframework.orm.hibernate4.HibernateTransactionManager - Initiating transaction commit\r\n    10:48:55.227 [http-nio-8080-exec-10] DEBUG org.springframework.orm.hibernate4.HibernateTransactionManager - Committing Hibernate transaction on Session [SessionImpl(PersistenceContext[entityKeys=[],collectionKeys=[]];ActionQueue[insertions=org.hibernate.engine.spi.ExecutableList@23b8bcb1 updates=org.hibernate.engine.spi.ExecutableList@2d7f56b6 deletions=org.hibernate.engine.spi.ExecutableList@2940d7c1 orphanRemovals=org.hibernate.engine.spi.ExecutableList@6c425c8d collectionCreations=org.hibernate.engine.spi.ExecutableList@a793880 collectionRemovals=org.hibernate.engine.spi.ExecutableList@5d64159f collectionUpdates=org.hibernate.engine.spi.ExecutableList@72b52f2d collectionQueuedOps=org.hibernate.engine.spi.ExecutableList@c6da3c2 unresolvedInsertDependencies=UnresolvedEntityInsertActions[]])]\r\n    10:48:55.227 [http-nio-8080-exec-10] DEBUG org.hibernate.engine.transaction.spi.AbstractTransactionImpl - committing\r\n    10:48:55.227 [http-nio-8080-exec-10] DEBUG org.hibernate.engine.transaction.internal.jdbc.JdbcTransaction - committed JDBC Connection\r\n    10:48:55.227 [http-nio-8080-exec-10] DEBUG org.hibernate.engine.transaction.internal.jdbc.JdbcTransaction - re-enabling autocommit\r\n    10:48:55.227 [http-nio-8080-exec-10] DEBUG org.springframework.orm.hibernate4.HibernateTransactionManager - Closing Hibernate Session [SessionImpl(PersistenceContext[entityKeys=[],collectionKeys=[]];ActionQueue[insertions=org.hibernate.engine.spi.ExecutableList@23b8bcb1 updates=org.hibernate.engine.spi.ExecutableList@2d7f56b6 deletions=org.hibernate.engine.spi.ExecutableList@2940d7c1 orphanRemovals=org.hibernate.engine.spi.ExecutableList@6c425c8d collectionCreations=org.hibernate.engine.spi.ExecutableList@a793880 collectionRemovals=org.hibernate.engine.spi.ExecutableList@5d64159f collectionUpdates=org.hibernate.engine.spi.ExecutableList@72b52f2d collectionQueuedOps=org.hibernate.engine.spi.ExecutableList@c6da3c2 unresolvedInsertDependencies=UnresolvedEntityInsertActions[]])] after transaction\r\n    10:48:55.227 [http-nio-8080-exec-10] DEBUG org.hibernate.engine.jdbc.internal.LogicalConnectionImpl - Releasing JDBC connection\r\n    10:48:55.227 [http-nio-8080-exec-10] DEBUG org.hibernate.engine.jdbc.internal.LogicalConnectionImpl - Released JDBC connection\r\n    10:48:55.228 [http-nio-8080-exec-10] DEBUG org.springframework.web.servlet.mvc.method.annotation.RequestResponseBodyMethodProcessor - Written [com.xptraining.model.Status@788e053b] as &quot;application/json&quot; using [org.springframework.http.converter.json.MappingJackson2HttpMessageConverter@48e069ed]\r\n    10:48:55.228 [http-nio-8080-exec-10] DEBUG org.springframework.web.servlet.DispatcherServlet - Null ModelAndView returned to DispatcherServlet with name &#39;mvc-dispatcher&#39;: assuming HandlerAdapter completed request handling\r\n    10:48:55.228 [http-nio-8080-exec-10] DEBUG org.springframework.web.servlet.DispatcherServlet - Successfully completed request\r\n\r\n","title":"how to save data with save method of jpa Repository","body":"<p>While adding the entity from service implemented class to Repository interface , it showing successful message but data does not inserted to the database i call the save(entity) method from JpaRepository interface . it does not show any error message instead of that it showing record inserted successfully message .    </p>\n\n<p>Controller --- >>.</p>\n\n<pre><code>@Controller\n@RequestMapping(\"/cart\")\npublic class CartController {\n\n    @Autowired\n    CartService cartServices;\n\n    /**\n     * Get All records in Cart\n     *  \n     * @return All Cart List\n     */\n    @RequestMapping(value = \"/list\", method = RequestMethod.GET)\n    public @ResponseBody List&lt;Cart&gt; getCart() {\n\n        List&lt;Cart&gt; cartList = null;\n        try {\n            cartList = cartServices.getCartList();\nif(cartList.isEmpty())\n{\n    System.out.println(\"List is empty \");\n}\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n\n        return cartList;\n    }\n    /**\n     * Add Cart\n     * \n     * @param representative\n     * @return Status\n     */\n    @RequestMapping(value = \"/create\", method = RequestMethod.POST, consumes = MediaType.APPLICATION_JSON_VALUE)\n    public @ResponseBody Status addCart(@RequestBody Cart cart) {\n        System.out.println(\"i m from jpa controller\");\n        try {\n            cartServices.save(cart);\n            return new Status(1, \"Cart added Successfully !\");\n        } catch (Exception e) {\n            // e.printStackTrace();\n            return new Status(0, e.toString());\n        }\n\n    }\n</code></pre>\n\n<p>Service Implemented class------>>>></p>\n\n<pre><code>@Service\npublic class CartServiceImpl implements CartService {\n\n\n    @Inject\n    CartRepository cartRepository;\n\n\n    /**\n     * Get All Cart\n     * \n     * @throws Exception\n     * @return All Cart List\n     */\n\n    @Override\n    @Transactional\n    public List&lt;Cart&gt; getCartList() throws Exception {\n        // TODO Auto-generated method stub\n        return cartRepository.findAll();\n    }\n\n    /**\n     * Add Cart\n     * \n     * @param cart\n     * @throws Exception\n     * @return Boolean\n     */\n    @Override\n    @Transactional\n    public Cart save(Cart cart) throws Exception {\n        System.out.println(\"i m from jpa Service\");\n\n\n        Cart cart1 = cartRepository.save(cart);\n        return    cart1;\n    }\n</code></pre>\n\n<p>Repository Interface-------->>>></p>\n\n<pre><code>package com.xptraining.repository;\n\nimport org.springframework.data.jpa.repository.JpaRepository;\nimport org.springframework.stereotype.Repository;\nimport com.xptraining.model.Cart;\n\n\n@Repository\npublic interface CartRepository extends JpaRepository&lt;Cart, Long&gt;\n{\n\n\n}\n</code></pre>\n\n<p>Web.xml</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;web-app xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns=\"http://xmlns.jcp.org/xml/ns/javaee\" xsi:schemaLocation=\"http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd\" id=\"WebApp_ID\" version=\"3.1\"&gt;\n  &lt;display-name&gt;xptraining&lt;/display-name&gt;\n  &lt;servlet&gt;\n  &lt;servlet-name&gt;mvc-dispatcher&lt;/servlet-name&gt;\n  &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;\n  &lt;init-param&gt;\n   &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\n   &lt;param-value&gt;/WEB-INF/rest.xml&lt;/param-value&gt;\n  &lt;/init-param&gt;\n  &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;\n &lt;/servlet&gt;\n\n &lt;servlet-mapping&gt;\n  &lt;servlet-name&gt;mvc-dispatcher&lt;/servlet-name&gt;\n  &lt;url-pattern&gt;/&lt;/url-pattern&gt;\n &lt;/servlet-mapping&gt;\n\n&lt;/web-app&gt;\n</code></pre>\n\n<p>rest.xml</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:context=\"http://www.springframework.org/schema/context\"\n    xmlns:util=\"http://www.springframework.org/schema/util\" xmlns:jpa=\"http://www.springframework.org/schema/data/jpa\"\n    xmlns:mvc=\"http://www.springframework.org/schema/mvc\"\n    xsi:schemaLocation=\"http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.2.xsd\n  http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd\n  http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-3.2.xsd\n  http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.2.xsd  \n  http://www.springframework.org/schema/data/jpa \n  http://www.springframework.org/schema/data/jpa/spring-jpa.xsd\"&gt;\n\n &lt;context:component-scan base-package=\"com.xptraining\" /&gt;\n  &lt;jpa:repositories base-package=\"com.xptraining.repository\"\n                  entity-manager-factory-ref=\"entityManagerFactoryBean\"\n                  transaction-manager-ref=\"txManager\"/&gt;\n &lt;!--  &lt;jpa:repositories base-package=\"com.xptraining.repository\"&gt;&lt;/jpa:repositories&gt; --&gt;\n&lt;!-- &lt;jpa:repositories base-package=\"com.xptraining.repository\"\n                  entity-manager-factory-ref=\"cartRepository\"\n                  transaction-manager-ref=\"transactionManager\"/&gt;  --&gt;\n\n    &lt;mvc:annotation-driven /&gt;\n\n&lt;bean id=\"entityManagerFactoryBean\" class=\"org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean\"&gt;\n      &lt;property name=\"dataSource\" ref=\"dataSource\" /&gt;\n      &lt;!-- This makes /META-INF/persistence.xml is no longer necessary --&gt;\n      &lt;property name=\"packagesToScan\" value=\"com.xptraining.model\" /&gt;\n      &lt;!-- JpaVendorAdapter implementation for Hibernate EntityManager.\n           Exposes Hibernate's persistence provider and EntityManager extension interface --&gt;\n      &lt;property name=\"jpaVendorAdapter\"&gt;\n         &lt;bean class=\"org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter\" /&gt;\n      &lt;/property&gt;\n      &lt;property name=\"jpaProperties\"&gt;\n         &lt;props&gt;\n            &lt;prop key=\"hibernate.dialect\"&gt;org.hibernate.dialect.MySQL5Dialect&lt;/prop&gt;\n                &lt;prop key=\"hibernate.show_sql\"&gt;${hibernate.show_sql}&lt;/prop&gt;\n                &lt;prop key=\"hibernate.hbm2ddl.auto\"&gt;update&lt;/prop&gt;\n         &lt;/props&gt;\n      &lt;/property&gt;\n   &lt;/bean&gt;\n    &lt;bean id=\"dataSource\"\n        class=\"org.springframework.jdbc.datasource.DriverManagerDataSource\"&gt;\n        &lt;property name=\"driverClassName\" value=\"com.mysql.jdbc.Driver\" /&gt;\n        &lt;property name=\"url\" value=\"jdbc:mysql://localhost:3306/training\" /&gt;\n        &lt;property name=\"username\" value=\"root\" /&gt;\n        &lt;property name=\"password\" value=\"xpointers\" /&gt;\n    &lt;/bean&gt;\n\n    &lt;bean id=\"sessionFactory\"\n        class=\"org.springframework.orm.hibernate4.LocalSessionFactoryBean\"&gt;\n        &lt;property name=\"dataSource\" ref=\"dataSource\" /&gt;\n        &lt;property name=\"annotatedClasses\"&gt;\n            &lt;list&gt;\n                &lt;value&gt;com.xptraining.model.Product&lt;/value&gt;\n                &lt;value&gt;com.xptraining.model.Specialties&lt;/value&gt;\n                &lt;value&gt;com.xptraining.model.Representative&lt;/value&gt;\n                &lt;value&gt;com.xptraining.model.Cart&lt;/value&gt;\n                &lt;value&gt;com.xptraining.model.Sku&lt;/value&gt;\n                &lt;value&gt;com.xptraining.model.Order&lt;/value&gt;\n            &lt;/list&gt;\n        &lt;/property&gt;\n        &lt;property name=\"hibernateProperties\"&gt;\n            &lt;props&gt;\n                &lt;prop key=\"hibernate.dialect\"&gt;org.hibernate.dialect.MySQL5Dialect&lt;/prop&gt;\n                &lt;prop key=\"hibernate.show_sql\"&gt;${hibernate.show_sql}&lt;/prop&gt;\n            &lt;/props&gt;\n        &lt;/property&gt;\n    &lt;/bean&gt;\n    &lt;bean id=\"txManager\"\n        class=\"org.springframework.orm.hibernate4.HibernateTransactionManager\"&gt;\n        &lt;property name=\"sessionFactory\" ref=\"sessionFactory\" /&gt;\n    &lt;/bean&gt;\n\n    &lt;bean id=\"persistenceExceptionTranslationPostProcessor\"\n        class=\"org.springframework.dao.annotation.PersistenceExceptionTranslationPostProcessor\" /&gt;\n\n    &lt;bean id=\"dataDao\" class=\"com.xptraining.dal.impl.DataDaoImpl\"&gt;&lt;/bean&gt;\n    &lt;bean id=\"dataServices\" class=\"com.xptraining.services.impl.DataServicesImpl\"&gt;&lt;/bean&gt;\n    &lt;bean id=\"specialtiesDao\" class=\"com.xptraining.dal.impl.SpecialtiesDaoImpl\"&gt;&lt;/bean&gt;\n    &lt;bean id=\"specialtiesServices\" class=\"com.xptraining.services.impl.SpecialtiesServicesImpl\"&gt;&lt;/bean&gt;\n    &lt;bean id=\"representativeDao\" class=\"com.xptraining.dal.impl.RepresentativeDaoImpl\"&gt;&lt;/bean&gt;\n    &lt;bean id=\"representativeService\" class=\"com.xptraining.services.impl.RepresentativeServiceImpl\"&gt;&lt;/bean&gt;\n    &lt;bean id=\"skuDao\" class=\"com.xptraining.dal.impl.SkuDaoImpl\"&gt;&lt;/bean&gt;\n    &lt;bean id=\"skuServices\" class=\"com.xptraining.services.impl.SkuervicesImpl\"&gt;&lt;/bean&gt;\n    &lt;bean id=\"cartDao\" class=\"com.xptraining.dal.impl.CartDaoImpl\"&gt;&lt;/bean&gt;\n    &lt;bean id=\"cartServices\" class=\"com.xptraining.services.impl.CartServiceImpl\"&gt;&lt;/bean&gt;\n    &lt;bean id=\"orderDao\" class=\"com.xptraining.dal.impl.OrderDaoImpl\"&gt;&lt;/bean&gt;\n    &lt;bean id=\"orderServices\" class=\"com.xptraining.services.impl.OrderServicesImpl\"&gt;&lt;/bean&gt;\n\n&lt;/beans&gt;\n</code></pre>\n\n<p>@My console when i call save method</p>\n\n<pre><code>10:48:55.219 [http-nio-8080-exec-10] DEBUG org.springframework.web.servlet.DispatcherServlet - DispatcherServlet with name 'mvc-dispatcher' processing POST request for [/xptraining/cart/create]\n10:48:55.220 [http-nio-8080-exec-10] DEBUG org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping - Looking up handler method for path /cart/create\n10:48:55.220 [http-nio-8080-exec-10] DEBUG org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping - Returning handler method [public com.xptraining.model.Status com.xptraining.controller.CartController.addCart(com.xptraining.model.Cart)]\n10:48:55.220 [http-nio-8080-exec-10] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean 'cartController'\n10:48:55.220 [http-nio-8080-exec-10] DEBUG org.springframework.web.servlet.mvc.method.annotation.RequestResponseBodyMethodProcessor - Read [class com.xptraining.model.Cart] as \"application/json\" with [org.springframework.http.converter.json.MappingJackson2HttpMessageConverter@48e069ed]\ni m from jpa controller\ni m from jpa Service\n10:48:55.220 [http-nio-8080-exec-10] DEBUG org.springframework.orm.hibernate4.HibernateTransactionManager - Creating new transaction with name [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT; ''\n10:48:55.220 [http-nio-8080-exec-10] DEBUG org.springframework.orm.hibernate4.HibernateTransactionManager - Opened new Session [SessionImpl(PersistenceContext[entityKeys=[],collectionKeys=[]];ActionQueue[insertions=org.hibernate.engine.spi.ExecutableList@23b8bcb1 updates=org.hibernate.engine.spi.ExecutableList@2d7f56b6 deletions=org.hibernate.engine.spi.ExecutableList@2940d7c1 orphanRemovals=org.hibernate.engine.spi.ExecutableList@6c425c8d collectionCreations=org.hibernate.engine.spi.ExecutableList@a793880 collectionRemovals=org.hibernate.engine.spi.ExecutableList@5d64159f collectionUpdates=org.hibernate.engine.spi.ExecutableList@72b52f2d collectionQueuedOps=org.hibernate.engine.spi.ExecutableList@c6da3c2 unresolvedInsertDependencies=UnresolvedEntityInsertActions[]])] for Hibernate transaction\n10:48:55.220 [http-nio-8080-exec-10] DEBUG org.springframework.orm.hibernate4.HibernateTransactionManager - Preparing JDBC Connection of Hibernate Session [SessionImpl(PersistenceContext[entityKeys=[],collectionKeys=[]];ActionQueue[insertions=org.hibernate.engine.spi.ExecutableList@23b8bcb1 updates=org.hibernate.engine.spi.ExecutableList@2d7f56b6 deletions=org.hibernate.engine.spi.ExecutableList@2940d7c1 orphanRemovals=org.hibernate.engine.spi.ExecutableList@6c425c8d collectionCreations=org.hibernate.engine.spi.ExecutableList@a793880 collectionRemovals=org.hibernate.engine.spi.ExecutableList@5d64159f collectionUpdates=org.hibernate.engine.spi.ExecutableList@72b52f2d collectionQueuedOps=org.hibernate.engine.spi.ExecutableList@c6da3c2 unresolvedInsertDependencies=UnresolvedEntityInsertActions[]])]\n10:48:55.220 [http-nio-8080-exec-10] DEBUG org.hibernate.engine.jdbc.internal.LogicalConnectionImpl - Obtaining JDBC connection\n10:48:55.220 [http-nio-8080-exec-10] DEBUG org.springframework.jdbc.datasource.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/training]\n10:48:55.223 [http-nio-8080-exec-10] DEBUG org.hibernate.engine.jdbc.internal.LogicalConnectionImpl - Obtained JDBC connection\n10:48:55.223 [http-nio-8080-exec-10] DEBUG org.hibernate.engine.transaction.spi.AbstractTransactionImpl - begin\n10:48:55.223 [http-nio-8080-exec-10] DEBUG org.hibernate.engine.transaction.internal.jdbc.JdbcTransaction - initial autocommit status: true\n10:48:55.223 [http-nio-8080-exec-10] DEBUG org.hibernate.engine.transaction.internal.jdbc.JdbcTransaction - disabling autocommit\n10:48:55.223 [http-nio-8080-exec-10] DEBUG org.springframework.orm.hibernate4.HibernateTransactionManager - Exposing Hibernate transaction as JDBC transaction [com.mysql.jdbc.JDBC4Connection@5c26bcfd]\n10:48:55.224 [http-nio-8080-exec-10] DEBUG org.springframework.orm.jpa.EntityManagerFactoryUtils - Opening JPA EntityManager\n10:48:55.224 [http-nio-8080-exec-10] DEBUG org.springframework.orm.jpa.EntityManagerFactoryUtils - Registering transaction synchronization for JPA EntityManager\n10:48:55.224 [http-nio-8080-exec-10] DEBUG org.hibernate.loader.Loader - Loading entity: [com.xptraining.model.Cart#1]\n10:48:55.224 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select cart0_.cart_id as cart_id1_0_0_, cart0_.prize as prize2_0_0_, cart0_.quantity as quantity3_0_0_, cart0_.representative_id as represen4_0_0_, cart0_.sku_id as sku_id5_0_0_ from cart cart0_ where cart0_.cart_id=?\n10:48:55.224 [http-nio-8080-exec-10] DEBUG org.hibernate.engine.jdbc.internal.LogicalConnectionImpl - Obtaining JDBC connection\n10:48:55.224 [http-nio-8080-exec-10] DEBUG org.springframework.jdbc.datasource.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/training]\n10:48:55.226 [http-nio-8080-exec-10] DEBUG org.hibernate.engine.jdbc.internal.LogicalConnectionImpl - Obtained JDBC connection\n10:48:55.226 [http-nio-8080-exec-10] DEBUG org.hibernate.loader.Loader - Result set row: 0\n10:48:55.226 [http-nio-8080-exec-10] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.xptraining.model.Cart#1]\n10:48:55.227 [http-nio-8080-exec-10] DEBUG org.hibernate.engine.internal.TwoPhaseLoad - Resolving associations for [com.xptraining.model.Cart#1]\n10:48:55.227 [http-nio-8080-exec-10] DEBUG org.hibernate.engine.internal.TwoPhaseLoad - Done materializing entity [com.xptraining.model.Cart#1]\n10:48:55.227 [http-nio-8080-exec-10] DEBUG org.hibernate.loader.Loader - Done entity load\n10:48:55.227 [http-nio-8080-exec-10] DEBUG org.springframework.orm.jpa.EntityManagerFactoryUtils - Closing JPA EntityManager\n10:48:55.227 [http-nio-8080-exec-10] DEBUG org.hibernate.engine.jdbc.internal.LogicalConnectionImpl - Releasing JDBC connection\n10:48:55.227 [http-nio-8080-exec-10] DEBUG org.hibernate.engine.jdbc.internal.LogicalConnectionImpl - Released JDBC connection\n10:48:55.227 [http-nio-8080-exec-10] DEBUG org.springframework.orm.hibernate4.HibernateTransactionManager - Initiating transaction commit\n10:48:55.227 [http-nio-8080-exec-10] DEBUG org.springframework.orm.hibernate4.HibernateTransactionManager - Committing Hibernate transaction on Session [SessionImpl(PersistenceContext[entityKeys=[],collectionKeys=[]];ActionQueue[insertions=org.hibernate.engine.spi.ExecutableList@23b8bcb1 updates=org.hibernate.engine.spi.ExecutableList@2d7f56b6 deletions=org.hibernate.engine.spi.ExecutableList@2940d7c1 orphanRemovals=org.hibernate.engine.spi.ExecutableList@6c425c8d collectionCreations=org.hibernate.engine.spi.ExecutableList@a793880 collectionRemovals=org.hibernate.engine.spi.ExecutableList@5d64159f collectionUpdates=org.hibernate.engine.spi.ExecutableList@72b52f2d collectionQueuedOps=org.hibernate.engine.spi.ExecutableList@c6da3c2 unresolvedInsertDependencies=UnresolvedEntityInsertActions[]])]\n10:48:55.227 [http-nio-8080-exec-10] DEBUG org.hibernate.engine.transaction.spi.AbstractTransactionImpl - committing\n10:48:55.227 [http-nio-8080-exec-10] DEBUG org.hibernate.engine.transaction.internal.jdbc.JdbcTransaction - committed JDBC Connection\n10:48:55.227 [http-nio-8080-exec-10] DEBUG org.hibernate.engine.transaction.internal.jdbc.JdbcTransaction - re-enabling autocommit\n10:48:55.227 [http-nio-8080-exec-10] DEBUG org.springframework.orm.hibernate4.HibernateTransactionManager - Closing Hibernate Session [SessionImpl(PersistenceContext[entityKeys=[],collectionKeys=[]];ActionQueue[insertions=org.hibernate.engine.spi.ExecutableList@23b8bcb1 updates=org.hibernate.engine.spi.ExecutableList@2d7f56b6 deletions=org.hibernate.engine.spi.ExecutableList@2940d7c1 orphanRemovals=org.hibernate.engine.spi.ExecutableList@6c425c8d collectionCreations=org.hibernate.engine.spi.ExecutableList@a793880 collectionRemovals=org.hibernate.engine.spi.ExecutableList@5d64159f collectionUpdates=org.hibernate.engine.spi.ExecutableList@72b52f2d collectionQueuedOps=org.hibernate.engine.spi.ExecutableList@c6da3c2 unresolvedInsertDependencies=UnresolvedEntityInsertActions[]])] after transaction\n10:48:55.227 [http-nio-8080-exec-10] DEBUG org.hibernate.engine.jdbc.internal.LogicalConnectionImpl - Releasing JDBC connection\n10:48:55.227 [http-nio-8080-exec-10] DEBUG org.hibernate.engine.jdbc.internal.LogicalConnectionImpl - Released JDBC connection\n10:48:55.228 [http-nio-8080-exec-10] DEBUG org.springframework.web.servlet.mvc.method.annotation.RequestResponseBodyMethodProcessor - Written [com.xptraining.model.Status@788e053b] as \"application/json\" using [org.springframework.http.converter.json.MappingJackson2HttpMessageConverter@48e069ed]\n10:48:55.228 [http-nio-8080-exec-10] DEBUG org.springframework.web.servlet.DispatcherServlet - Null ModelAndView returned to DispatcherServlet with name 'mvc-dispatcher': assuming HandlerAdapter completed request handling\n10:48:55.228 [http-nio-8080-exec-10] DEBUG org.springframework.web.servlet.DispatcherServlet - Successfully completed request\n</code></pre>\n"},{"tags":["java","kotlin","project-panama","java-ffm"],"comments":[{"owner":{"account_id":22394789,"reputation":1382,"user_id":16606223,"display_name":"Yahor Barkouski"},"score":2,"creation_date":1686476903,"post_id":76449639,"comment_id":134801184,"body_markdown":"Shouldn&#39;t you read a C_Pointer first? Like `MemorySegment.ofAddress(udidAddress.get(C_POINTER, 0))`","body":"Shouldn&#39;t you read a C_Pointer first? Like <code>MemorySegment.ofAddress(udidAddress.get(C_POINTER, 0))</code>"},{"owner":{"account_id":22394789,"reputation":1382,"user_id":16606223,"display_name":"Yahor Barkouski"},"score":0,"creation_date":1686476990,"post_id":76449639,"comment_id":134801192,"body_markdown":"Also please note that the getUtf8String() function might throw IndexOutOfBound if the string at udidPointer is not null-terminated, so you need to ensure that the string written by idevice_get_udid method is a null-terminated one","body":"Also please note that the getUtf8String() function might throw IndexOutOfBound if the string at udidPointer is not null-terminated, so you need to ensure that the string written by idevice_get_udid method is a null-terminated one"},{"owner":{"account_id":4555218,"reputation":32585,"user_id":3699139,"display_name":"Jorn Vernee"},"score":0,"creation_date":1686490010,"post_id":76449639,"comment_id":134802554,"body_markdown":"Note that `MemorySegment.ofAddress(udidAddress.address())` is essentially a no-op which just returns a new memory segment with the same address, but size 0.","body":"Note that <code>MemorySegment.ofAddress(udidAddress.address())</code> is essentially a no-op which just returns a new memory segment with the same address, but size 0."}],"answers":[{"tags":[],"owner":{"account_id":4555218,"reputation":32585,"user_id":3699139,"display_name":"Jorn Vernee"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686490029,"creation_date":1686490029,"answer_id":76450687,"question_id":76449639,"body_markdown":"There&#39;s no equivalent of the `&amp;` operator in the Panama API (Simply because Java values don&#39;t have a stable native address). So, step 1 is to rewrite your C code to not use it. We get something like this:\r\n\r\n    static char *udid = NULL;\r\n    \r\n    /* Device Handle */\r\n    idevice_t device = NULL;\r\n\r\n    /* Try to connect to first USB device */\r\n    idevice_t *device_ptr = malloc(sizeof *device_ptr);\r\n    if (idevice_new_with_options(device_ptr , NULL, IDEVICE_LOOKUP_USBMUX) != IDEVICE_E_SUCCESS) {\r\n      printf(&quot;ERROR: No device found!\\n&quot;);\r\n      return -1;\r\n    }\r\n    device = *device_ptr;\r\n    \r\n    /* Retrieve the udid of the connected device */\r\n    char **udid_ptr = malloc(sizeof *udid_ptr);\r\n    if (idevice_get_udid(device, udid_ptr) != IDEVICE_E_SUCCESS) {\r\n      printf(&quot;ERROR: Unable to get the device UDID.\\n&quot;);\r\n      idevice_free(device);\r\n      return -1;\r\n    }\r\n    udid = *uid_ptr;\r\n    \r\n    /* Outputs device identifier */\r\n    printf(&quot;Connected with UDID: %s\\n&quot;, udid);\r\n\r\n    free(device_ptr);\r\n    free(udid_ptr);\r\n\r\nNow it should be easier to see how this should be translated into Kotlin (I hope this is correctly eyeballed, as I&#39;m not super familiar with Kotlin):\r\n\r\n    class Device {\r\n        private val uid: MemorySegment\r\n        private val device: MemorySegment\r\n    \r\n        init {\r\n            Arena.openConfined().use { arena -&gt;\r\n                // you could even have just one of these and re-use it\r\n                val uidAddress: MemorySmegment = arena.allocate(C_POINTER)\r\n                val deviceAddress: MemorySegment = arena.allocate(C_POINTER)\r\n\r\n                if (idevice_new_with_options(deviceAddress, NULL(), IDEVICE_LOOKUP_USBMUX()) != IDEVICE_E_SUCCESS()) {\r\n                    throw Exception(&quot;ERROR: No device found!&quot;)\r\n                }\r\n                device = deviceAddress.get(C_POINTER, 0)\r\n\r\n                if (idevice_get_udid(device, uidAddress) != IDEVICE_E_SUCCESS()) {\r\n                    idevice_free(device)\r\n                    throw Exception(&quot;ERROR: Get UDID failed&quot;)\r\n                }\r\n                uid = udidAddress.get(C_POINTER, 0)\r\n\r\n                println(&quot;connected&quot;)\r\n                println(uid.getUtf8String(0))\r\n            }\r\n        }\r\n    }\r\n    \r\n    fun main() {\r\n        Device()\r\n    }","title":"Java Foreign API: How to get string from C_POINTER?","body":"<p>There's no equivalent of the <code>&amp;</code> operator in the Panama API (Simply because Java values don't have a stable native address). So, step 1 is to rewrite your C code to not use it. We get something like this:</p>\n<pre><code>static char *udid = NULL;\n\n/* Device Handle */\nidevice_t device = NULL;\n\n/* Try to connect to first USB device */\nidevice_t *device_ptr = malloc(sizeof *device_ptr);\nif (idevice_new_with_options(device_ptr , NULL, IDEVICE_LOOKUP_USBMUX) != IDEVICE_E_SUCCESS) {\n  printf(&quot;ERROR: No device found!\\n&quot;);\n  return -1;\n}\ndevice = *device_ptr;\n\n/* Retrieve the udid of the connected device */\nchar **udid_ptr = malloc(sizeof *udid_ptr);\nif (idevice_get_udid(device, udid_ptr) != IDEVICE_E_SUCCESS) {\n  printf(&quot;ERROR: Unable to get the device UDID.\\n&quot;);\n  idevice_free(device);\n  return -1;\n}\nudid = *uid_ptr;\n\n/* Outputs device identifier */\nprintf(&quot;Connected with UDID: %s\\n&quot;, udid);\n\nfree(device_ptr);\nfree(udid_ptr);\n</code></pre>\n<p>Now it should be easier to see how this should be translated into Kotlin (I hope this is correctly eyeballed, as I'm not super familiar with Kotlin):</p>\n<pre><code>class Device {\n    private val uid: MemorySegment\n    private val device: MemorySegment\n\n    init {\n        Arena.openConfined().use { arena -&gt;\n            // you could even have just one of these and re-use it\n            val uidAddress: MemorySmegment = arena.allocate(C_POINTER)\n            val deviceAddress: MemorySegment = arena.allocate(C_POINTER)\n\n            if (idevice_new_with_options(deviceAddress, NULL(), IDEVICE_LOOKUP_USBMUX()) != IDEVICE_E_SUCCESS()) {\n                throw Exception(&quot;ERROR: No device found!&quot;)\n            }\n            device = deviceAddress.get(C_POINTER, 0)\n\n            if (idevice_get_udid(device, uidAddress) != IDEVICE_E_SUCCESS()) {\n                idevice_free(device)\n                throw Exception(&quot;ERROR: Get UDID failed&quot;)\n            }\n            uid = udidAddress.get(C_POINTER, 0)\n\n            println(&quot;connected&quot;)\n            println(uid.getUtf8String(0))\n        }\n    }\n}\n\nfun main() {\n    Device()\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":28788557,"reputation":1,"user_id":22048475,"display_name":"purofle"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686493796,"creation_date":1686493796,"answer_id":76450960,"question_id":76449639,"body_markdown":"It worked when I write like this:\r\n```kotlin\r\nclass Device {\r\n    private var device: MemorySegment\r\n    private var udid: MemorySegment\r\n\r\n    init {\r\n        Arena.openConfined().use { arena -&gt;\r\n            val udidAddress: MemorySegment = arena.allocate(C_POINTER)\r\n            val deviceAddress: MemorySegment = arena.allocate(C_POINTER)\r\n\r\n            if (idevice_new_with_options(deviceAddress, NULL(), IDEVICE_LOOKUP_USBMUX()) != IDEVICE_E_SUCCESS()) {\r\n            throw Exception(&quot;ERROR: No device found!&quot;)\r\n            }\r\n            device = deviceAddress.get(C_POINTER, 0)\r\n\r\n            if (idevice_get_udid(deviceAddress, udidAddress) != IDEVICE_E_SUCCESS()) {\r\n                idevice_free(deviceAddress)\r\n                throw Exception(&quot;ERROR: Get UDID failed&quot;)\r\n            }\r\n            \r\n            udid = udidAddress.get(C_POINTER, 0).get(C_POINTER, 0)\r\n            println(&quot;connected&quot;)\r\n            println(udid.getUtf8String(0))\r\n        }\r\n    }\r\n}\r\n```","title":"Java Foreign API: How to get string from C_POINTER?","body":"<p>It worked when I write like this:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>class Device {\n    private var device: MemorySegment\n    private var udid: MemorySegment\n\n    init {\n        Arena.openConfined().use { arena -&gt;\n            val udidAddress: MemorySegment = arena.allocate(C_POINTER)\n            val deviceAddress: MemorySegment = arena.allocate(C_POINTER)\n\n            if (idevice_new_with_options(deviceAddress, NULL(), IDEVICE_LOOKUP_USBMUX()) != IDEVICE_E_SUCCESS()) {\n            throw Exception(&quot;ERROR: No device found!&quot;)\n            }\n            device = deviceAddress.get(C_POINTER, 0)\n\n            if (idevice_get_udid(deviceAddress, udidAddress) != IDEVICE_E_SUCCESS()) {\n                idevice_free(deviceAddress)\n                throw Exception(&quot;ERROR: Get UDID failed&quot;)\n            }\n            \n            udid = udidAddress.get(C_POINTER, 0).get(C_POINTER, 0)\n            println(&quot;connected&quot;)\n            println(udid.getUtf8String(0))\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":28788557,"reputation":1,"user_id":22048475,"display_name":"purofle"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":124,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1696690865,"creation_date":1686472427,"question_id":76449639,"body_markdown":"I want to use [libimobiledevice](https://libimobiledevice.org/#get-started) by Java Foreign API,\r\nThis is my code, written by Kotlin:\r\n```kotlin\r\nclass Device {\r\n    private val arena: Arena = Arena.openConfined()\r\n    private val udidAddress: MemorySegment = arena.allocate(C_POINTER)\r\n    private val deviceAddress: MemorySegment = arena.allocate(C_POINTER)\r\n\r\n    init {\r\n        if (idevice_new_with_options(deviceAddress, NULL(), IDEVICE_LOOKUP_USBMUX()) != IDEVICE_E_SUCCESS()) {\r\n            throw Exception(&quot;ERROR: No device found!&quot;)\r\n        }\r\n        if (idevice_get_udid(deviceAddress, udidAddress) != IDEVICE_E_SUCCESS()) {\r\n            idevice_free(deviceAddress)\r\n            throw Exception(&quot;ERROR: Get UDID failed&quot;)\r\n        } else {\r\n            println(&quot;connected&quot;)\r\n            println(MemorySegment.ofAddress(udidAddress.address()).getUtf8String(0))\r\n        }\r\n    }\r\n}\r\n\r\nfun main() {\r\n    Device()\r\n}\r\n```\r\nBut it got error while getting udid:\r\n```kotlin\r\nException in thread &quot;main&quot; java.lang.IndexOutOfBoundsException: Out of bound access on segment MemorySegment{ array: Optional.empty address:140202431639472 limit: 0 }; new offset = 0; new length = 1\r\n\tat java.base/jdk.internal.foreign.AbstractMemorySegmentImpl.outOfBoundException(AbstractMemorySegmentImpl.java:371)\r\n\tat java.base/jdk.internal.foreign.AbstractMemorySegmentImpl.apply(AbstractMemorySegmentImpl.java:357)\r\n\tat java.base/jdk.internal.foreign.AbstractMemorySegmentImpl.apply(AbstractMemorySegmentImpl.java:70)\r\n\tat java.base/jdk.internal.util.Preconditions.outOfBounds(Preconditions.java:98)\r\n\tat java.base/jdk.internal.util.Preconditions.outOfBoundsCheckIndex(Preconditions.java:124)\r\n\tat java.base/jdk.internal.util.Preconditions.checkIndex(Preconditions.java:448)\r\n\tat java.base/jdk.internal.foreign.AbstractMemorySegmentImpl.checkBounds(AbstractMemorySegmentImpl.java:346)\r\n\tat java.base/jdk.internal.foreign.AbstractMemorySegmentImpl.checkAccess(AbstractMemorySegmentImpl.java:311)\r\n\tat java.base/java.lang.invoke.VarHandleSegmentAsBytes.checkAddress(VarHandleSegmentAsBytes.java:81)\r\n\tat java.base/java.lang.invoke.VarHandleSegmentAsBytes.get(VarHandleSegmentAsBytes.java:108)\r\n\tat java.base/java.lang.foreign.MemorySegment.get(MemorySegment.java:1388)\r\n\tat java.base/jdk.internal.foreign.abi.SharedUtils.strlen(SharedUtils.java:199)\r\n\tat java.base/jdk.internal.foreign.abi.SharedUtils.toJavaStringInternal(SharedUtils.java:190)\r\n\tat java.base/java.lang.foreign.MemorySegment.getUtf8String(MemorySegment.java:890)\r\n\tat Device.&lt;init&gt;(Device.kt:21)\r\n\tat DeviceKt.main(Device.kt:27)\r\n\tat DeviceKt.main(Device.kt)\r\n```\r\n\r\nThe C language code i want:\r\n```c\r\nstatic char *udid = NULL;\r\n\r\n/* Device Handle */\r\nidevice_t device = NULL;\r\n\r\n/* Try to connect to first USB device */\r\nif (idevice_new_with_options(&amp;device, NULL, IDEVICE_LOOKUP_USBMUX) != IDEVICE_E_SUCCESS) {\r\n  printf(&quot;ERROR: No device found!\\n&quot;);\r\n  return -1;\r\n}\r\n\r\n/* Retrieve the udid of the connected device */\r\nif (idevice_get_udid(device, &amp;udid) != IDEVICE_E_SUCCESS) {\r\n  printf(&quot;ERROR: Unable to get the device UDID.\\n&quot;);\r\n  idevice_free(device);\r\n  return -1;\r\n}\r\n\r\n/* Outputs device identifier */\r\nprintf(&quot;Connected with UDID: %s\\n&quot;, udid);\r\n```\r\n\r\nhow to solve this problem? (sorry, this is my first time using stackoverflow)\r\n\r\nIt should return a udid, but I got an error, the code I tried is above.","title":"Java Foreign API: How to get string from C_POINTER?","body":"<p>I want to use <a href=\"https://libimobiledevice.org/#get-started\" rel=\"nofollow noreferrer\">libimobiledevice</a> by Java Foreign API,\nThis is my code, written by Kotlin:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>class Device {\n    private val arena: Arena = Arena.openConfined()\n    private val udidAddress: MemorySegment = arena.allocate(C_POINTER)\n    private val deviceAddress: MemorySegment = arena.allocate(C_POINTER)\n\n    init {\n        if (idevice_new_with_options(deviceAddress, NULL(), IDEVICE_LOOKUP_USBMUX()) != IDEVICE_E_SUCCESS()) {\n            throw Exception(&quot;ERROR: No device found!&quot;)\n        }\n        if (idevice_get_udid(deviceAddress, udidAddress) != IDEVICE_E_SUCCESS()) {\n            idevice_free(deviceAddress)\n            throw Exception(&quot;ERROR: Get UDID failed&quot;)\n        } else {\n            println(&quot;connected&quot;)\n            println(MemorySegment.ofAddress(udidAddress.address()).getUtf8String(0))\n        }\n    }\n}\n\nfun main() {\n    Device()\n}\n</code></pre>\n<p>But it got error while getting udid:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>Exception in thread &quot;main&quot; java.lang.IndexOutOfBoundsException: Out of bound access on segment MemorySegment{ array: Optional.empty address:140202431639472 limit: 0 }; new offset = 0; new length = 1\n    at java.base/jdk.internal.foreign.AbstractMemorySegmentImpl.outOfBoundException(AbstractMemorySegmentImpl.java:371)\n    at java.base/jdk.internal.foreign.AbstractMemorySegmentImpl.apply(AbstractMemorySegmentImpl.java:357)\n    at java.base/jdk.internal.foreign.AbstractMemorySegmentImpl.apply(AbstractMemorySegmentImpl.java:70)\n    at java.base/jdk.internal.util.Preconditions.outOfBounds(Preconditions.java:98)\n    at java.base/jdk.internal.util.Preconditions.outOfBoundsCheckIndex(Preconditions.java:124)\n    at java.base/jdk.internal.util.Preconditions.checkIndex(Preconditions.java:448)\n    at java.base/jdk.internal.foreign.AbstractMemorySegmentImpl.checkBounds(AbstractMemorySegmentImpl.java:346)\n    at java.base/jdk.internal.foreign.AbstractMemorySegmentImpl.checkAccess(AbstractMemorySegmentImpl.java:311)\n    at java.base/java.lang.invoke.VarHandleSegmentAsBytes.checkAddress(VarHandleSegmentAsBytes.java:81)\n    at java.base/java.lang.invoke.VarHandleSegmentAsBytes.get(VarHandleSegmentAsBytes.java:108)\n    at java.base/java.lang.foreign.MemorySegment.get(MemorySegment.java:1388)\n    at java.base/jdk.internal.foreign.abi.SharedUtils.strlen(SharedUtils.java:199)\n    at java.base/jdk.internal.foreign.abi.SharedUtils.toJavaStringInternal(SharedUtils.java:190)\n    at java.base/java.lang.foreign.MemorySegment.getUtf8String(MemorySegment.java:890)\n    at Device.&lt;init&gt;(Device.kt:21)\n    at DeviceKt.main(Device.kt:27)\n    at DeviceKt.main(Device.kt)\n</code></pre>\n<p>The C language code i want:</p>\n<pre class=\"lang-c prettyprint-override\"><code>static char *udid = NULL;\n\n/* Device Handle */\nidevice_t device = NULL;\n\n/* Try to connect to first USB device */\nif (idevice_new_with_options(&amp;device, NULL, IDEVICE_LOOKUP_USBMUX) != IDEVICE_E_SUCCESS) {\n  printf(&quot;ERROR: No device found!\\n&quot;);\n  return -1;\n}\n\n/* Retrieve the udid of the connected device */\nif (idevice_get_udid(device, &amp;udid) != IDEVICE_E_SUCCESS) {\n  printf(&quot;ERROR: Unable to get the device UDID.\\n&quot;);\n  idevice_free(device);\n  return -1;\n}\n\n/* Outputs device identifier */\nprintf(&quot;Connected with UDID: %s\\n&quot;, udid);\n</code></pre>\n<p>how to solve this problem? (sorry, this is my first time using stackoverflow)</p>\n<p>It should return a udid, but I got an error, the code I tried is above.</p>\n"},{"tags":["java","project-panama","java-21","java-ffm"],"answers":[{"tags":[],"owner":{"account_id":4555218,"reputation":32585,"user_id":3699139,"display_name":"Jorn Vernee"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1696046306,"creation_date":1693900831,"answer_id":77042737,"question_id":77042593,"body_markdown":"&gt; It seems that pointers.setAtIndex and pointers.getAtIndex do not preserve the MemorySegment byteSize. ?\r\n\r\nYes, that is correct. The address is stored into off-heap memory as a plain memory address. The size is dropped. So, when reading an address back from off-heap memory, the created memory segment has size 0.\r\n\r\nThis is explained in the [javadoc of MemorySegment](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/foreign/MemorySegment.html#wrapping-addresses) as well:\r\n\r\n&gt; When interacting with foreign functions, it is common for those\r\n&gt; functions to allocate a region of memory and return a pointer to that\r\n&gt; region. Modeling the region of memory with a memory segment is\r\n&gt; challenging because the Java runtime has no insight into the size of\r\n&gt; the region. **Only the address of the start of the region, stored in the\r\n&gt; pointer, is available**.\r\n&gt;\r\n&gt; ...\r\n&gt;\r\n&gt; The MemorySegment API uses zero-length memory segments to represent:\r\n&gt; \r\n&gt; - pointers returned from a foreign function;\r\n&gt; - pointers passed by a foreign function to an upcall stub; and\r\n&gt; - pointers read from a memory segment (more on that below).\r\n\r\nYour use case is the latter of the three.\r\n\r\nYou have to use [`MemorySegment::reinterpret`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/foreign/MemorySegment.html#reinterpret(long)) to resize the segment explicitly. Since for a C string the actual size is not known (it&#39;s indicated by a null terminator), you can resize the segment to `Long.MAX_VALUE` to make it accessible:\r\n\r\n    // 7. Copy the (reordered) strings from off-heap to on-heap\r\n    for (int i = 0; i &lt; javaStrings.length; i++) {\r\n        MemorySegment cString = pointers.getAtIndex(ValueLayout.ADDRESS, i);\r\n        cString = cString.reinterpret(Long.MAX_VALUE); // &lt;----\r\n        javaStrings[i] = cString.getUtf8String(0);\r\n    }\r\n\r\n---\r\n\r\nAlternatively, you can create an `AddressLayout` with a [target layout](https://download.java.net/java/early_access/jdk21/docs/api/java.base/java/lang/foreign/AddressLayout.html#withTargetLayout(java.lang.foreign.MemoryLayout)) that has the needed size, to avoid the separate call to `reinterpret`:\r\n\r\n    AddressLayout UNBOUNDED_POINTER = ValueLayout.ADDRESS\r\n            .withTargetLayout(MemoryLayout.sequenceLayout(Long.MAX_VALUE, ValueLayout.JAVA_BYTE));\r\n\r\nAnd then use that to do the dereference:\r\n\r\n    // 7. Copy the (reordered) strings from off-heap to on-heap\r\n    for (int i = 0; i &lt; javaStrings.length; i++) {\r\n        MemorySegment cString = pointers.getAtIndex(UNBOUNDED_POINTER, i);\r\n        // no reinterpret needed\r\n        javaStrings[i] = cString.getUtf8String(0);\r\n    }","title":"&#39;IndexOutOfBoundsException: Out of bound access on segment ...&#39; when accessing pointer read from MemorySegment","body":"<blockquote>\n<p>It seems that pointers.setAtIndex and pointers.getAtIndex do not preserve the MemorySegment byteSize. ?</p>\n</blockquote>\n<p>Yes, that is correct. The address is stored into off-heap memory as a plain memory address. The size is dropped. So, when reading an address back from off-heap memory, the created memory segment has size 0.</p>\n<p>This is explained in the <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/foreign/MemorySegment.html#wrapping-addresses\" rel=\"nofollow noreferrer\">javadoc of MemorySegment</a> as well:</p>\n<blockquote>\n<p>When interacting with foreign functions, it is common for those\nfunctions to allocate a region of memory and return a pointer to that\nregion. Modeling the region of memory with a memory segment is\nchallenging because the Java runtime has no insight into the size of\nthe region. <strong>Only the address of the start of the region, stored in the\npointer, is available</strong>.</p>\n<p>...</p>\n<p>The MemorySegment API uses zero-length memory segments to represent:</p>\n<ul>\n<li>pointers returned from a foreign function;</li>\n<li>pointers passed by a foreign function to an upcall stub; and</li>\n<li>pointers read from a memory segment (more on that below).</li>\n</ul>\n</blockquote>\n<p>Your use case is the latter of the three.</p>\n<p>You have to use <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/foreign/MemorySegment.html#reinterpret(long)\" rel=\"nofollow noreferrer\"><code>MemorySegment::reinterpret</code></a> to resize the segment explicitly. Since for a C string the actual size is not known (it's indicated by a null terminator), you can resize the segment to <code>Long.MAX_VALUE</code> to make it accessible:</p>\n<pre><code>// 7. Copy the (reordered) strings from off-heap to on-heap\nfor (int i = 0; i &lt; javaStrings.length; i++) {\n    MemorySegment cString = pointers.getAtIndex(ValueLayout.ADDRESS, i);\n    cString = cString.reinterpret(Long.MAX_VALUE); // &lt;----\n    javaStrings[i] = cString.getUtf8String(0);\n}\n</code></pre>\n<hr />\n<p>Alternatively, you can create an <code>AddressLayout</code> with a <a href=\"https://download.java.net/java/early_access/jdk21/docs/api/java.base/java/lang/foreign/AddressLayout.html#withTargetLayout(java.lang.foreign.MemoryLayout)\" rel=\"nofollow noreferrer\">target layout</a> that has the needed size, to avoid the separate call to <code>reinterpret</code>:</p>\n<pre><code>AddressLayout UNBOUNDED_POINTER = ValueLayout.ADDRESS\n        .withTargetLayout(MemoryLayout.sequenceLayout(Long.MAX_VALUE, ValueLayout.JAVA_BYTE));\n</code></pre>\n<p>And then use that to do the dereference:</p>\n<pre><code>// 7. Copy the (reordered) strings from off-heap to on-heap\nfor (int i = 0; i &lt; javaStrings.length; i++) {\n    MemorySegment cString = pointers.getAtIndex(UNBOUNDED_POINTER, i);\n    // no reinterpret needed\n    javaStrings[i] = cString.getUtf8String(0);\n}\n</code></pre>\n"}],"owner":{"account_id":29368999,"reputation":33,"user_id":22501991,"display_name":"Abdelfettah Ghazi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":176,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":77042737,"answer_count":1,"score":3,"last_activity_date":1696690833,"creation_date":1693899638,"question_id":77042593,"body_markdown":"I am attempting to test the Foreign Function and Memory features of Java 21. Here is my code :\r\n\r\n```\r\npublic static void main(String[] args) {\r\n        // 1. Find foreign function on the C library path\r\n        Linker linker = Linker.nativeLinker();\r\n        SymbolLookup stdlib = linker.defaultLookup();\r\n        MethodHandle radixsort = linker.downcallHandle(stdlib.find(&quot;radixsort&quot;).orElseThrow(), FunctionDescriptor.ofVoid(ValueLayout.ADDRESS, ValueLayout.JAVA_INT, ValueLayout.ADDRESS, ValueLayout.JAVA_CHAR));\r\n        // 2. Allocate on-heap memory to store four strings\r\n        String[] javaStrings = {&quot;mouse&quot;, &quot;cat&quot;, &quot;dog&quot;, &quot;car&quot;};\r\n\r\n        // 3. Use try-with-resources to manage the lifetime of off-heap memory\r\n        try (Arena offHeap = Arena.ofConfined()) {\r\n            // 4. Allocate a region of off-heap memory to store four pointers\r\n            MemorySegment pointers = offHeap.allocateArray(ValueLayout.ADDRESS, javaStrings.length);\r\n            // 5. Copy the strings from on-heap to off-heap\r\n            for (int i = 0; i &lt; javaStrings.length; i++) {\r\n                MemorySegment cString = offHeap.allocateUtf8String(javaStrings[i]);\r\n                pointers.setAtIndex(ValueLayout.ADDRESS, i, cString);\r\n                assert cString.getUtf8String(0).length() &gt; 0;\r\n            }\r\n            // 6. Sort the off-heap data by calling the foreign function\r\n            radixsort.invoke(pointers, javaStrings.length, MemorySegment.NULL, &#39;\\0&#39;);\r\n            // 7. Copy the (reordered) strings from off-heap to on-heap\r\n            for (int i = 0; i &lt; javaStrings.length; i++) {\r\n                MemorySegment cString = pointers.getAtIndex(ValueLayout.ADDRESS, i);\r\n                javaStrings[i] = cString.getUtf8String(0);\r\n            }\r\n        } // 8. All off-heap memory is deallocated here\r\n        catch (Throwable e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n        assert Arrays.equals(javaStrings, new String[]{&quot;car&quot;, &quot;c∞at&quot;, &quot;dog&quot;, &quot;mouse&quot;});  // true\r\n    }\r\n```\r\n\r\nbut I am encountering this error :\r\n\r\n`Exception in thread &quot;main&quot; java.lang.RuntimeException: java.lang.IndexOutOfBoundsException: Out of bound access on segment MemorySegment{ heapBase: Optional.empty address:105553153094096 limit: 0 }; new offset = 0; new length = 1`\r\n\r\nAt the line :\r\n\r\n`javaStrings\\[i\\] = cString.getUtf8String(0);`\r\nIt seems that `MemorySegment cString = pointers.getAtIndex(ValueLayout.ADDRESS, i);` returns a MemorySegment with a byteSize = 0\r\n\r\nWhen I use `cString.getUtf8String(0);` on the original cString, I do not encounter an error.\r\n\r\nIt seems that `pointers.setAtIndex` and `pointers.getAtIndex` do not preserve the MemorySegment byteSize. ?","title":"&#39;IndexOutOfBoundsException: Out of bound access on segment ...&#39; when accessing pointer read from MemorySegment","body":"<p>I am attempting to test the Foreign Function and Memory features of Java 21. Here is my code :</p>\n<pre><code>public static void main(String[] args) {\n        // 1. Find foreign function on the C library path\n        Linker linker = Linker.nativeLinker();\n        SymbolLookup stdlib = linker.defaultLookup();\n        MethodHandle radixsort = linker.downcallHandle(stdlib.find(&quot;radixsort&quot;).orElseThrow(), FunctionDescriptor.ofVoid(ValueLayout.ADDRESS, ValueLayout.JAVA_INT, ValueLayout.ADDRESS, ValueLayout.JAVA_CHAR));\n        // 2. Allocate on-heap memory to store four strings\n        String[] javaStrings = {&quot;mouse&quot;, &quot;cat&quot;, &quot;dog&quot;, &quot;car&quot;};\n\n        // 3. Use try-with-resources to manage the lifetime of off-heap memory\n        try (Arena offHeap = Arena.ofConfined()) {\n            // 4. Allocate a region of off-heap memory to store four pointers\n            MemorySegment pointers = offHeap.allocateArray(ValueLayout.ADDRESS, javaStrings.length);\n            // 5. Copy the strings from on-heap to off-heap\n            for (int i = 0; i &lt; javaStrings.length; i++) {\n                MemorySegment cString = offHeap.allocateUtf8String(javaStrings[i]);\n                pointers.setAtIndex(ValueLayout.ADDRESS, i, cString);\n                assert cString.getUtf8String(0).length() &gt; 0;\n            }\n            // 6. Sort the off-heap data by calling the foreign function\n            radixsort.invoke(pointers, javaStrings.length, MemorySegment.NULL, '\\0');\n            // 7. Copy the (reordered) strings from off-heap to on-heap\n            for (int i = 0; i &lt; javaStrings.length; i++) {\n                MemorySegment cString = pointers.getAtIndex(ValueLayout.ADDRESS, i);\n                javaStrings[i] = cString.getUtf8String(0);\n            }\n        } // 8. All off-heap memory is deallocated here\n        catch (Throwable e) {\n            throw new RuntimeException(e);\n        }\n        assert Arrays.equals(javaStrings, new String[]{&quot;car&quot;, &quot;c∞at&quot;, &quot;dog&quot;, &quot;mouse&quot;});  // true\n    }\n</code></pre>\n<p>but I am encountering this error :</p>\n<p><code>Exception in thread &quot;main&quot; java.lang.RuntimeException: java.lang.IndexOutOfBoundsException: Out of bound access on segment MemorySegment{ heapBase: Optional.empty address:105553153094096 limit: 0 }; new offset = 0; new length = 1</code></p>\n<p>At the line :</p>\n<p><code>javaStrings\\[i\\] = cString.getUtf8String(0);</code>\nIt seems that <code>MemorySegment cString = pointers.getAtIndex(ValueLayout.ADDRESS, i);</code> returns a MemorySegment with a byteSize = 0</p>\n<p>When I use <code>cString.getUtf8String(0);</code> on the original cString, I do not encounter an error.</p>\n<p>It seems that <code>pointers.setAtIndex</code> and <code>pointers.getAtIndex</code> do not preserve the MemorySegment byteSize. ?</p>\n"},{"tags":["java","java-20","java-ffm"],"answers":[{"tags":[],"owner":{"account_id":4555218,"reputation":32585,"user_id":3699139,"display_name":"Jorn Vernee"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1696677870,"creation_date":1696677870,"answer_id":77249547,"question_id":77249515,"body_markdown":"In java 20, you can use [`MemorySegment::ofAddress`](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/foreign/MemorySegment.html#ofAddress(long,long)) instead of `reinterpret`:\r\n\r\n    cString = MemorySegment.ofAddress(cString.address(), Long.MAX_VALUE);","title":"OpenJDK 20: JEP 434: Foreign Function &amp; Memory API (Second Preview)","body":"<p>In java 20, you can use <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/foreign/MemorySegment.html#ofAddress(long,long)\" rel=\"nofollow noreferrer\"><code>MemorySegment::ofAddress</code></a> instead of <code>reinterpret</code>:</p>\n<pre><code>cString = MemorySegment.ofAddress(cString.address(), Long.MAX_VALUE);\n</code></pre>\n"}],"owner":{"account_id":29615798,"reputation":51,"user_id":22697986,"display_name":"StackHeap"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":83,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77249547,"answer_count":1,"score":1,"last_activity_date":1696690788,"creation_date":1696677253,"question_id":77249515,"body_markdown":"How to reinterpret MemorySegment in Java 20 Preview like Java 21 Preview MemorySegment:\r\n\r\nMemorySegment reinterpret(long newSize) - Returns a new memory segment that has the same address and scope as this segment, but with the provided size?\r\n\r\nPlease refer to the following ccode snippet and the exception output details:\r\n\r\n```\r\nimport java.lang.foreign.Arena;\r\nimport java.lang.foreign.FunctionDescriptor;\r\nimport java.lang.foreign.Linker;\r\nimport java.lang.foreign.MemorySegment;\r\nimport java.lang.foreign.SymbolLookup;\r\nimport java.lang.foreign.ValueLayout;\r\nimport java.lang.invoke.MethodHandle;\r\nimport java.util.Arrays;\r\n\r\n// 434: Foreign Function &amp; Memory API (Second Preview) // https://openjdk.org/jeps/434\r\nclass ForeignFunctionMemoryAPISecondPreview {\r\n    private void radixsort() throws Throwable {\r\n\r\n\t// 1. Find foreign function on the C library path\r\n\tLinker linker          = Linker.nativeLinker();\r\n\tSymbolLookup stdlib    = linker.defaultLookup();\r\n\tMethodHandle radixsort = linker.downcallHandle(stdlib.find(&quot;radixsort&quot;).orElseThrow(), \r\n    \t    FunctionDescriptor.ofVoid(ValueLayout.ADDRESS, ValueLayout.JAVA_INT, ValueLayout.ADDRESS, ValueLayout.JAVA_CHAR));\r\n\r\n\t// 2. Allocate on-heap memory to store four strings\r\n\tString[] javaStrings = { &quot;mouse&quot;, &quot;cat&quot;, &quot;dog&quot;, &quot;car&quot; };\r\n     \tSystem.out.println(&quot;radixsort input: &quot; + Arrays.toString(javaStrings));\r\n\r\n\t// 3. Use try-with-resources to manage the lifetime of off-heap memory\r\n\ttry (Arena offHeap = Arena.openConfined()) {\r\n    \t    // 4. Allocate a region of off-heap memory to store four pointers\r\n    \t    MemorySegment pointers = offHeap.allocateArray(ValueLayout.ADDRESS, javaStrings.length);\r\n\r\n    \t    // 5. Copy the strings from on-heap to off-heap\r\n    \t    for (int i = 0; i &lt; javaStrings.length; i++) {\r\n            \tMemorySegment cString = offHeap.allocateUtf8String(javaStrings[i]);\r\n            \tpointers.setAtIndex(ValueLayout.ADDRESS, i, cString);\r\n    \t    }\r\n\r\n    \t    // 6. Sort the off-heap data by calling the foreign function\r\n    \t    radixsort.invoke(pointers, javaStrings.length, MemorySegment.NULL, &#39;\\0&#39;);\r\n\r\n    \t    // 7. Copy the (reordered) strings from off-heap to on-heap\r\n    \t    for (int i = 0; i &lt; javaStrings.length; i++) {\r\n            \tMemorySegment cString = pointers.getAtIndex(ValueLayout.ADDRESS, i);\r\n                // Java 21 Preview\r\n\t\t// cString = cString.reinterpret(Long.MAX_VALUE);\r\n            \t// javaStrings[i] = cString.getUtf8String(0);\r\n\t\tSystem.out.println(cString);\r\n    \t    }\r\n\t}\r\n\r\n\t// 8. All off-heap memory is deallocated here\r\n        System.out.println(&quot;radixsort output: &quot; + Arrays.toString(javaStrings));\r\n    }\r\n\r\n    public static void main(String[] args) throws Throwable {\r\n        System.out.println(String.format(&quot;Java Version: %s&quot;, System.getProperty(&quot;java.version&quot;)));\r\n\r\n\tvar previewForeignFunctionMemoryAPISecond = new ForeignFunctionMemoryAPISecondPreview();\r\n        previewForeignFunctionMemoryAPISecond.radixsort();\r\n    }\r\n}\r\n\r\n// Output\r\n/*\r\nWARNING: Using incubator modules: jdk.incubator.vector, jdk.incubator.concurrent\r\nNote: ForeignFunctionMemoryAPISecondPreview.java uses preview features of Java SE 20.\r\nNote: Recompile with -Xlint:preview for details.\r\nJava Version: 20.0.2\r\nradixsort input: [mouse, cat, dog, car]\r\nException in thread &quot;main&quot; java.lang.IndexOutOfBoundsException: Out of bound access on segment MemorySegment{ array: Optional.empty address:105553152688144 limit: 0 }; new offset = 0; new length = 1\r\n\tat java.base/jdk.internal.foreign.AbstractMemorySegmentImpl.outOfBoundException(AbstractMemorySegmentImpl.java:371)\r\n\tat java.base/jdk.internal.foreign.AbstractMemorySegmentImpl.apply(AbstractMemorySegmentImpl.java:357)\r\n\tat java.base/jdk.internal.foreign.AbstractMemorySegmentImpl.apply(AbstractMemorySegmentImpl.java:70)\r\n\tat java.base/jdk.internal.util.Preconditions.outOfBounds(Preconditions.java:98)\r\n\tat java.base/jdk.internal.util.Preconditions.outOfBoundsCheckIndex(Preconditions.java:124)\r\n\tat java.base/jdk.internal.util.Preconditions.checkIndex(Preconditions.java:448)\r\n\tat java.base/jdk.internal.foreign.AbstractMemorySegmentImpl.checkBounds(AbstractMemorySegmentImpl.java:346)\r\n\tat java.base/jdk.internal.foreign.AbstractMemorySegmentImpl.checkAccess(AbstractMemorySegmentImpl.java:311)\r\n\tat java.base/java.lang.invoke.VarHandleSegmentAsBytes.checkAddress(VarHandleSegmentAsBytes.java:81)\r\n\tat java.base/java.lang.invoke.VarHandleSegmentAsBytes.get(VarHandleSegmentAsBytes.java:108)\r\n\tat java.base/java.lang.foreign.MemorySegment.get(MemorySegment.java:1388)\r\n\tat java.base/jdk.internal.foreign.abi.SharedUtils.strlen(SharedUtils.java:199)\r\n\tat java.base/jdk.internal.foreign.abi.SharedUtils.toJavaStringInternal(SharedUtils.java:190)\r\n\tat java.base/java.lang.foreign.MemorySegment.getUtf8String(MemorySegment.java:890)\r\n\tat ForeignFunctionMemoryAPISecondPreview.radixsort(ForeignFunctionMemoryAPISecondPreview.java:43)\r\n\tat ForeignFunctionMemoryAPISecondPreview.main(ForeignFunctionMemoryAPISecondPreview.java:56)\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/21/docs//api/java.base/java/lang/foreign/MemorySegment.html#reinterpret(long)","title":"OpenJDK 20: JEP 434: Foreign Function &amp; Memory API (Second Preview)","body":"<p>How to reinterpret MemorySegment in Java 20 Preview like Java 21 Preview MemorySegment:</p>\n<p>MemorySegment reinterpret(long newSize) - Returns a new memory segment that has the same address and scope as this segment, but with the provided size?</p>\n<p>Please refer to the following ccode snippet and the exception output details:</p>\n<pre><code>import java.lang.foreign.Arena;\nimport java.lang.foreign.FunctionDescriptor;\nimport java.lang.foreign.Linker;\nimport java.lang.foreign.MemorySegment;\nimport java.lang.foreign.SymbolLookup;\nimport java.lang.foreign.ValueLayout;\nimport java.lang.invoke.MethodHandle;\nimport java.util.Arrays;\n\n// 434: Foreign Function &amp; Memory API (Second Preview) // https://openjdk.org/jeps/434\nclass ForeignFunctionMemoryAPISecondPreview {\n    private void radixsort() throws Throwable {\n\n    // 1. Find foreign function on the C library path\n    Linker linker          = Linker.nativeLinker();\n    SymbolLookup stdlib    = linker.defaultLookup();\n    MethodHandle radixsort = linker.downcallHandle(stdlib.find(&quot;radixsort&quot;).orElseThrow(), \n            FunctionDescriptor.ofVoid(ValueLayout.ADDRESS, ValueLayout.JAVA_INT, ValueLayout.ADDRESS, ValueLayout.JAVA_CHAR));\n\n    // 2. Allocate on-heap memory to store four strings\n    String[] javaStrings = { &quot;mouse&quot;, &quot;cat&quot;, &quot;dog&quot;, &quot;car&quot; };\n        System.out.println(&quot;radixsort input: &quot; + Arrays.toString(javaStrings));\n\n    // 3. Use try-with-resources to manage the lifetime of off-heap memory\n    try (Arena offHeap = Arena.openConfined()) {\n            // 4. Allocate a region of off-heap memory to store four pointers\n            MemorySegment pointers = offHeap.allocateArray(ValueLayout.ADDRESS, javaStrings.length);\n\n            // 5. Copy the strings from on-heap to off-heap\n            for (int i = 0; i &lt; javaStrings.length; i++) {\n                MemorySegment cString = offHeap.allocateUtf8String(javaStrings[i]);\n                pointers.setAtIndex(ValueLayout.ADDRESS, i, cString);\n            }\n\n            // 6. Sort the off-heap data by calling the foreign function\n            radixsort.invoke(pointers, javaStrings.length, MemorySegment.NULL, '\\0');\n\n            // 7. Copy the (reordered) strings from off-heap to on-heap\n            for (int i = 0; i &lt; javaStrings.length; i++) {\n                MemorySegment cString = pointers.getAtIndex(ValueLayout.ADDRESS, i);\n                // Java 21 Preview\n        // cString = cString.reinterpret(Long.MAX_VALUE);\n                // javaStrings[i] = cString.getUtf8String(0);\n        System.out.println(cString);\n            }\n    }\n\n    // 8. All off-heap memory is deallocated here\n        System.out.println(&quot;radixsort output: &quot; + Arrays.toString(javaStrings));\n    }\n\n    public static void main(String[] args) throws Throwable {\n        System.out.println(String.format(&quot;Java Version: %s&quot;, System.getProperty(&quot;java.version&quot;)));\n\n    var previewForeignFunctionMemoryAPISecond = new ForeignFunctionMemoryAPISecondPreview();\n        previewForeignFunctionMemoryAPISecond.radixsort();\n    }\n}\n\n// Output\n/*\nWARNING: Using incubator modules: jdk.incubator.vector, jdk.incubator.concurrent\nNote: ForeignFunctionMemoryAPISecondPreview.java uses preview features of Java SE 20.\nNote: Recompile with -Xlint:preview for details.\nJava Version: 20.0.2\nradixsort input: [mouse, cat, dog, car]\nException in thread &quot;main&quot; java.lang.IndexOutOfBoundsException: Out of bound access on segment MemorySegment{ array: Optional.empty address:105553152688144 limit: 0 }; new offset = 0; new length = 1\n    at java.base/jdk.internal.foreign.AbstractMemorySegmentImpl.outOfBoundException(AbstractMemorySegmentImpl.java:371)\n    at java.base/jdk.internal.foreign.AbstractMemorySegmentImpl.apply(AbstractMemorySegmentImpl.java:357)\n    at java.base/jdk.internal.foreign.AbstractMemorySegmentImpl.apply(AbstractMemorySegmentImpl.java:70)\n    at java.base/jdk.internal.util.Preconditions.outOfBounds(Preconditions.java:98)\n    at java.base/jdk.internal.util.Preconditions.outOfBoundsCheckIndex(Preconditions.java:124)\n    at java.base/jdk.internal.util.Preconditions.checkIndex(Preconditions.java:448)\n    at java.base/jdk.internal.foreign.AbstractMemorySegmentImpl.checkBounds(AbstractMemorySegmentImpl.java:346)\n    at java.base/jdk.internal.foreign.AbstractMemorySegmentImpl.checkAccess(AbstractMemorySegmentImpl.java:311)\n    at java.base/java.lang.invoke.VarHandleSegmentAsBytes.checkAddress(VarHandleSegmentAsBytes.java:81)\n    at java.base/java.lang.invoke.VarHandleSegmentAsBytes.get(VarHandleSegmentAsBytes.java:108)\n    at java.base/java.lang.foreign.MemorySegment.get(MemorySegment.java:1388)\n    at java.base/jdk.internal.foreign.abi.SharedUtils.strlen(SharedUtils.java:199)\n    at java.base/jdk.internal.foreign.abi.SharedUtils.toJavaStringInternal(SharedUtils.java:190)\n    at java.base/java.lang.foreign.MemorySegment.getUtf8String(MemorySegment.java:890)\n    at ForeignFunctionMemoryAPISecondPreview.radixsort(ForeignFunctionMemoryAPISecondPreview.java:43)\n    at ForeignFunctionMemoryAPISecondPreview.main(ForeignFunctionMemoryAPISecondPreview.java:56)\n\n\n  [1]: https://docs.oracle.com/en/java/javase/21/docs//api/java.base/java/lang/foreign/MemorySegment.html#reinterpret(long)\n</code></pre>\n"},{"tags":["java","spring","spring-boot"],"answers":[{"tags":[],"owner":{"account_id":28061162,"reputation":56,"user_id":21435267,"display_name":"Ahsan Zia"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1696384215,"creation_date":1696384215,"answer_id":77226308,"question_id":77226285,"body_markdown":"In the controller, you have defined the function as @PutMapping(&quot;/{email}&quot;) and in your url you are writing localhost:8080/update/{your_email} which seems to be incorrect. As there is empty string defined for the url (only the param is mentioned) so the url should just be localhost:8080/{your_email} instead of localhost:8080/update/{your_email}.","title":"How to fix BAD_REQUEST","body":"<p>In the controller, you have defined the function as @PutMapping(&quot;/{email}&quot;) and in your url you are writing localhost:8080/update/{your_email} which seems to be incorrect. As there is empty string defined for the url (only the param is mentioned) so the url should just be localhost:8080/{your_email} instead of localhost:8080/update/{your_email}.</p>\n"}],"owner":{"account_id":23511795,"reputation":9,"user_id":17560284,"display_name":"Quan Pham"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1696689999,"creation_date":1696383678,"question_id":77226285,"body_markdown":"I have  a problem, when I use postman it always be 400 even the header contain application/json and the body contain full information need\r\n\r\n![Controller](https://i.stack.imgur.com/KDSPI.png)\r\n\r\n![postman header contain application/json already](https://i.stack.imgur.com/7yHyw.png)\r\n\r\n![payload](https://i.stack.imgur.com/DLxX3.png)\r\n\r\nI want to fix it as soon as possible.","title":"How to fix BAD_REQUEST","body":"<p>I have  a problem, when I use postman it always be 400 even the header contain application/json and the body contain full information need</p>\n<p><img src=\"https://i.stack.imgur.com/KDSPI.png\" alt=\"Controller\" /></p>\n<p><img src=\"https://i.stack.imgur.com/7yHyw.png\" alt=\"postman header contain application/json already\" /></p>\n<p><img src=\"https://i.stack.imgur.com/DLxX3.png\" alt=\"payload\" /></p>\n<p>I want to fix it as soon as possible.</p>\n"},{"tags":["java","spring-boot","validation","javax.validation"],"answers":[{"tags":[],"owner":{"account_id":11501917,"reputation":105,"user_id":8429488,"display_name":"Yegor Saliev"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1610928615,"creation_date":1610928615,"answer_id":65767305,"question_id":65766861,"body_markdown":"if I understand you right, you want to do some custom validation?\r\n```\r\npublic class CustomValidator {\r\n\r\nValidatorFactory factory = Validation.buildDefaultValidatorFactory();\r\nValidator validator = factory.getValidator();\r\n\r\nvoid validate(Object object) {\r\n    Set&lt;ConstraintViolation&lt;?&gt;&gt; violations = validator.validate(object);\r\n    if (validations.size() &gt; 0) {\r\n    String errorMessage = \r\n    violations.stream().map(ConstraintViolation::getMessage).collect(Collectors.join(&quot;, &quot;);\r\n    throw new MethodArgumentNotValidException(errorMessage);\r\n  }\r\n }\r\n}","title":"Use javax.validation outside controller springboot","body":"<p>if I understand you right, you want to do some custom validation?</p>\n<pre><code>public class CustomValidator {\n\nValidatorFactory factory = Validation.buildDefaultValidatorFactory();\nValidator validator = factory.getValidator();\n\nvoid validate(Object object) {\n    Set&lt;ConstraintViolation&lt;?&gt;&gt; violations = validator.validate(object);\n    if (validations.size() &gt; 0) {\n    String errorMessage = \n    violations.stream().map(ConstraintViolation::getMessage).collect(Collectors.join(&quot;, &quot;);\n    throw new MethodArgumentNotValidException(errorMessage);\n  }\n }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2063502,"reputation":543,"user_id":1839558,"display_name":"lauksas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696688212,"creation_date":1696688212,"answer_id":77250159,"question_id":65766861,"body_markdown":"Annotating my class with `@Validated` from package `org.springframework.validation.annotation.Validated` worked for me.\r\nIt started using my `@Validate` annotation in all methods of the componentes in the service layer.","title":"Use javax.validation outside controller springboot","body":"<p>Annotating my class with <code>@Validated</code> from package <code>org.springframework.validation.annotation.Validated</code> worked for me.\nIt started using my <code>@Validate</code> annotation in all methods of the componentes in the service layer.</p>\n"}],"owner":{"account_id":19784145,"reputation":1,"user_id":14488517,"display_name":"Carlos Sanchez"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1004,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1696688212,"creation_date":1610924280,"question_id":65766861,"body_markdown":"I&#39;m trying to validate a class outside of the controller using javax.validation and generating an exception of type MethodArgumentNotValidException. I reviewed the following forums, but not so far they have not been helpful: &lt;br&gt;\r\nhttps://stackoverflow.com/questions/38357936/manually-call-spring-annotation-validation-outside-of-spring-mvc &lt;br&gt;\r\nhttps://stackoverflow.com/questions/9607491/using-spring-validator-outside-of-the-context-of-spring-mvc\r\n\r\nWhat I want to achieve is the following\r\n```\r\npublic class ClassTest {\r\n\t@NotEmpty\r\n\tprivate String property1;\r\n\r\n\t@NotNull\r\n\tprivate String property2;\r\n}\r\n```\r\nIn my validations class do the following (is not a controller), propagating the generated exception (NotNull, NotEmpty, NotBlank, Pattern, others)\r\n```\r\nvoid validationClass(boolean value) {\r\n    ClassTest classTest = new ClassTest();\r\n\r\n    if (value) {\r\n        //perform class validation\r\n        errors = validation(classTest);\r\n        throw new MethodArgumentNotValidException(errors);\r\n    } else {\r\n        //OK\r\n    }\r\n}\r\n```\r\n\r\nThanks for your help","title":"Use javax.validation outside controller springboot","body":"<p>I'm trying to validate a class outside of the controller using javax.validation and generating an exception of type MethodArgumentNotValidException. I reviewed the following forums, but not so far they have not been helpful: <br>\n<a href=\"https://stackoverflow.com/questions/38357936/manually-call-spring-annotation-validation-outside-of-spring-mvc\">Manually call Spring Annotation Validation Outside of Spring MVC</a> <br>\n<a href=\"https://stackoverflow.com/questions/9607491/using-spring-validator-outside-of-the-context-of-spring-mvc\">Using Spring Validator outside of the context of Spring MVC</a></p>\n<p>What I want to achieve is the following</p>\n<pre><code>public class ClassTest {\n    @NotEmpty\n    private String property1;\n\n    @NotNull\n    private String property2;\n}\n</code></pre>\n<p>In my validations class do the following (is not a controller), propagating the generated exception (NotNull, NotEmpty, NotBlank, Pattern, others)</p>\n<pre><code>void validationClass(boolean value) {\n    ClassTest classTest = new ClassTest();\n\n    if (value) {\n        //perform class validation\n        errors = validation(classTest);\n        throw new MethodArgumentNotValidException(errors);\n    } else {\n        //OK\n    }\n}\n</code></pre>\n<p>Thanks for your help</p>\n"},{"tags":["java","spring","spring-mvc","validation"],"answers":[{"tags":[],"owner":{"account_id":16878,"reputation":306133,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1327446712,"creation_date":1327446712,"answer_id":8995676,"question_id":8995570,"body_markdown":"Spring&#39;s docs show how to use Validator without a Controller in sight:\r\n\r\nhttp://static.springsource.org/spring/docs/2.0.x/reference/validation.html\r\n\r\nBeen possible since the beginning.  It&#39;s commonly used in Controllers and the web tier, but that&#39;s not required.  There&#39;s no dependency on the web tier in the validator framework.\r\n","title":"Spring-MVC: Calling a Validator, not from within a Controller","body":"<p>Spring's docs show how to use Validator without a Controller in sight:</p>\n\n<p><a href=\"http://static.springsource.org/spring/docs/2.0.x/reference/validation.html\" rel=\"nofollow\">http://static.springsource.org/spring/docs/2.0.x/reference/validation.html</a></p>\n\n<p>Been possible since the beginning.  It's commonly used in Controllers and the web tier, but that's not required.  There's no dependency on the web tier in the validator framework.</p>\n"},{"tags":[],"owner":{"account_id":2063502,"reputation":543,"user_id":1839558,"display_name":"lauksas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696688144,"creation_date":1696688144,"answer_id":77250153,"question_id":8995570,"body_markdown":"This is old, but anyone working with spring 2 or spring 3 and wanting to validate components outside the controller, just annotate your class with `@Validated` from package `org.springframework.validation.annotation.Validated`.\r\nIt started using my `@Validate` annotation in all methods of the componentes in the service layer.","title":"Spring-MVC: Calling a Validator, not from within a Controller","body":"<p>This is old, but anyone working with spring 2 or spring 3 and wanting to validate components outside the controller, just annotate your class with <code>@Validated</code> from package <code>org.springframework.validation.annotation.Validated</code>.\nIt started using my <code>@Validate</code> annotation in all methods of the componentes in the service layer.</p>\n"}],"owner":{"account_id":412097,"reputation":11870,"user_id":784980,"accept_rate":64,"display_name":"rapt"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2474,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1696688144,"creation_date":1327446101,"question_id":8995570,"body_markdown":"I would like to call a Validator on some object, but not from within a Controller, and then get the Error object.\r\n\r\nCould you provide a code sample for this?\r\n","title":"Spring-MVC: Calling a Validator, not from within a Controller","body":"<p>I would like to call a Validator on some object, but not from within a Controller, and then get the Error object.</p>\n\n<p>Could you provide a code sample for this?</p>\n"},{"tags":["java","eclipse","macos"],"comments":[{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1466458150,"post_id":37931499,"comment_id":63314849,"body_markdown":"Are you sure that is the correct variable path? Mine is `JAVA_HOME=$(/usr/libexec/java_home)`","body":"Are you sure that is the correct variable path? Mine is <code>JAVA_HOME=$(&#47;usr&#47;libexec&#47;java_home)</code>"}],"answers":[{"tags":[],"owner":{"account_id":62355,"reputation":12202,"user_id":185322,"accept_rate":67,"display_name":"martinez314"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1466458121,"creation_date":1466457709,"answer_id":37932018,"question_id":37931499,"body_markdown":"File type &quot;Application&quot; is actually a directory.  Right-click it (or control click) and select &quot;Show Package Contents&quot;.  You should find eclipse.ini at `Contents/MacOS/eclipse.ini` inside the Eclipse application directory.","title":"How to set Eclipse Java version in OS X","body":"<p>File type \"Application\" is actually a directory.  Right-click it (or control click) and select \"Show Package Contents\".  You should find eclipse.ini at <code>Contents/MacOS/eclipse.ini</code> inside the Eclipse application directory.</p>\n"},{"tags":[],"owner":{"account_id":3159259,"reputation":109665,"user_id":2670892,"display_name":"greg-449"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1466491634,"creation_date":1466491634,"answer_id":37937307,"question_id":37931499,"body_markdown":"You need to install the full JDK rather than the JRE before you can use it with Eclipse. The full JDK should set itself as the current Java. The JDK installs in something like `/Library/Java/JavaVirtualMachines/jdk1.8.0_92.jdk/Contents/Home`\r\n\r\nAs mentioned in the other answer the Eclipse application is actually a directory (called `Eclipse.app`) using &#39;Show Package Contents&#39; in Finder will show you the contents.","title":"How to set Eclipse Java version in OS X","body":"<p>You need to install the full JDK rather than the JRE before you can use it with Eclipse. The full JDK should set itself as the current Java. The JDK installs in something like <code>/Library/Java/JavaVirtualMachines/jdk1.8.0_92.jdk/Contents/Home</code></p>\n\n<p>As mentioned in the other answer the Eclipse application is actually a directory (called <code>Eclipse.app</code>) using 'Show Package Contents' in Finder will show you the contents.</p>\n"},{"tags":[],"owner":{"account_id":1715329,"reputation":1201,"user_id":1572532,"display_name":"rfreytag"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1696688002,"creation_date":1627501110,"answer_id":68566465,"question_id":37931499,"body_markdown":"This solution allows you to specify the JVM for a given eclipse installation, without changing any system properties. Make sure you have a valid JVM (usually JDK 8 for eclipse) installed.\r\n\r\nHere are the steps:\r\n - open finder and navigate to the location of Eclipse (i.e. Applications)\r\n - right-click on the eclipse application\r\n - select &quot;show package contents&quot;\r\n - navigate to `/Contents/Eclipse/eclipse.ini`\r\n - open the .ini with a text-editor\r\n - at the top of the file, add the following lines (or replace the existing -vm line)\r\n\r\n\r\n&gt;     -vm\r\n&gt;     /Library/Java/JavaVirtualMachines/adoptopenjdk-8.jdk/Contents/Home/bin\r\n\r\nYou need to replace `adoptopenjdk-8.jdk` with the name of your JVM.\r\n","title":"How to set Eclipse Java version in OS X","body":"<p>This solution allows you to specify the JVM for a given eclipse installation, without changing any system properties. Make sure you have a valid JVM (usually JDK 8 for eclipse) installed.</p>\n<p>Here are the steps:</p>\n<ul>\n<li>open finder and navigate to the location of Eclipse (i.e. Applications)</li>\n<li>right-click on the eclipse application</li>\n<li>select &quot;show package contents&quot;</li>\n<li>navigate to <code>/Contents/Eclipse/eclipse.ini</code></li>\n<li>open the .ini with a text-editor</li>\n<li>at the top of the file, add the following lines (or replace the existing -vm line)</li>\n</ul>\n<blockquote>\n<pre><code>-vm\n/Library/Java/JavaVirtualMachines/adoptopenjdk-8.jdk/Contents/Home/bin\n</code></pre>\n</blockquote>\n<p>You need to replace <code>adoptopenjdk-8.jdk</code> with the name of your JVM.</p>\n"}],"owner":{"account_id":215504,"reputation":52462,"user_id":470184,"accept_rate":91,"display_name":"blue-sky"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5566,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1696688002,"creation_date":1466455456,"question_id":37931499,"body_markdown":"When I download and expand Eclipse EE version a file of type Application is created : \r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/xHfOq.png\r\n\r\nI&#39;m new to using to Eclipse on MAC. I want to set the java version to \r\n\r\n    export JAVA_HOME=&quot;/Library/Internet Plug-Ins/JavaAppletPlugin.plugin/Contents/Home&quot;\r\n\r\nBut no eclipse.ini file is created. How to set and or install Eclipse on MAC and set the java version ?","title":"How to set Eclipse Java version in OS X","body":"<p>When I download and expand Eclipse EE version a file of type Application is created : </p>\n\n<p><a href=\"https://i.stack.imgur.com/xHfOq.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xHfOq.png\" alt=\"enter image description here\"></a></p>\n\n<p>I'm new to using to Eclipse on MAC. I want to set the java version to </p>\n\n<pre><code>export JAVA_HOME=\"/Library/Internet Plug-Ins/JavaAppletPlugin.plugin/Contents/Home\"\n</code></pre>\n\n<p>But no eclipse.ini file is created. How to set and or install Eclipse on MAC and set the java version ?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":1,"creation_date":1509429555,"post_id":47028747,"comment_id":81004353,"body_markdown":"Unclear what you&#39;re trying to do. What did you expect it output? Why?","body":"Unclear what you&#39;re trying to do. What did you expect it output? Why?"},{"owner":{"account_id":27393528,"reputation":353,"user_id":20896122,"display_name":"undefined symbol"},"score":0,"creation_date":1675895539,"post_id":47028747,"comment_id":133029061,"body_markdown":"Maybe [the documentation for String.format](https://docs.oracle.com/javase/7/docs/api/java/lang/String.html#format(java.lang.String,%20java.lang.Object...)) would help the OP figure out why his code makes no sense at all.","body":"Maybe <a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/String.html#format(java.lang.String,%20java.lang.Object...)\" rel=\"nofollow noreferrer\">the documentation for String.format</a> would help the OP figure out why his code makes no sense at all."}],"answers":[{"tags":[],"owner":{"account_id":145458,"reputation":2592,"user_id":355283,"accept_rate":80,"display_name":"User123456"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1509429876,"creation_date":1509429876,"answer_id":47028843,"question_id":47028747,"body_markdown":"you have to add string format to format the string you want.\r\nEx : \r\n\r\n    String value = &quot;#%1$s#.*?%#&quot;;\r\n    String patt = String.format(&quot;%s&quot;,value);\r\n\r\n    System.out.println(patt);\r\n\r\n[Read this][1]\r\n\r\n\r\n  [1]: https://dzone.com/articles/java-string-format-examples","title":"java.util.UnknownFormatConversionException: Conversion = &#39;#&#39;","body":"<p>you have to add string format to format the string you want.\nEx : </p>\n\n<pre><code>String value = \"#%1$s#.*?%#\";\nString patt = String.format(\"%s\",value);\n\nSystem.out.println(patt);\n</code></pre>\n\n<p><a href=\"https://dzone.com/articles/java-string-format-examples\" rel=\"nofollow noreferrer\">Read this</a></p>\n"},{"tags":[],"owner":{"account_id":11023131,"reputation":124,"user_id":8096788,"accept_rate":100,"display_name":"Pratik Thube"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1511980630,"creation_date":1509430069,"answer_id":47028885,"question_id":47028747,"body_markdown":"There are two format methods: \r\n\r\n    public static String format(String format, Object... args)  \r\nand\r\n\r\n    public static String format(Locale locale, String format, Object... args)  \r\n\r\nlocale : specifies the locale to be applied on the format() method.\r\n\r\nformat : format of the string.\r\n\r\nargs : arguments for the format string. It may be zero or more\r\n\r\nSo in your case, whatever format you are specifying is not proper I guess.\r\n\r\nYou can check different format which you can use over here: https://dzone.com/articles/java-string-format-examples\r\n","title":"java.util.UnknownFormatConversionException: Conversion = &#39;#&#39;","body":"<p>There are two format methods: </p>\n\n<pre><code>public static String format(String format, Object... args)  \n</code></pre>\n\n<p>and</p>\n\n<pre><code>public static String format(Locale locale, String format, Object... args)  \n</code></pre>\n\n<p>locale : specifies the locale to be applied on the format() method.</p>\n\n<p>format : format of the string.</p>\n\n<p>args : arguments for the format string. It may be zero or more</p>\n\n<p>So in your case, whatever format you are specifying is not proper I guess.</p>\n\n<p>You can check different format which you can use over here: <a href=\"https://dzone.com/articles/java-string-format-examples\" rel=\"nofollow noreferrer\">https://dzone.com/articles/java-string-format-examples</a></p>\n"},{"tags":[],"owner":{"account_id":12382337,"reputation":9,"user_id":9027395,"display_name":"ale"},"down_vote_count":2,"up_vote_count":1,"is_accepted":false,"score":-1,"last_activity_date":1511980419,"creation_date":1511980039,"answer_id":47559402,"question_id":47028747,"body_markdown":"The value:\r\n\r\n    String value = &quot;#%1$s#.*?%#&quot;;\r\n\r\ncan&#39;t contain the character % . It is used as a reserverd word. ","title":"java.util.UnknownFormatConversionException: Conversion = &#39;#&#39;","body":"<p>The value:</p>\n\n<pre><code>String value = \"#%1$s#.*?%#\";\n</code></pre>\n\n<p>can't contain the character % . It is used as a reserverd word. </p>\n"}],"owner":{"account_id":5556771,"reputation":213,"user_id":4407874,"accept_rate":25,"display_name":"yoganathan k"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":10090,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1696687300,"creation_date":1509429394,"question_id":47028747,"body_markdown":"This my code and it throws an exception while formatting the string with use of `String.Format` Java native method.\r\n\r\n    String value = &quot;#%1$s#.*?%#&quot;;\r\n    String patt = String.format(value);    \r\n    \r\n&gt; java.util.UnknownFormatConversionException: Conversion = &#39;#&#39;\r\n\r\n&gt; at java.util.Formatter.checkText(Unknown Source)\r\n\r\n&gt; at java.util.Formatter.parse(Unknown Source)\r\n\r\n&gt; at java.util.Formatter.format(Unknown Source)\r\n\r\n&gt; at java.util.Formatter.format(Unknown Source)\r\n\r\n&gt; at java.lang.String.format(Unknown Source)\r\n\r\nAny idea what&#39;s wrong?","title":"java.util.UnknownFormatConversionException: Conversion = &#39;#&#39;","body":"<p>This my code and it throws an exception while formatting the string with use of <code>String.Format</code> Java native method.</p>\n\n<pre><code>String value = \"#%1$s#.*?%#\";\nString patt = String.format(value);    \n</code></pre>\n\n<blockquote>\n  <p>java.util.UnknownFormatConversionException: Conversion = '#'</p>\n  \n  <p>at java.util.Formatter.checkText(Unknown Source)</p>\n  \n  <p>at java.util.Formatter.parse(Unknown Source)</p>\n  \n  <p>at java.util.Formatter.format(Unknown Source)</p>\n  \n  <p>at java.util.Formatter.format(Unknown Source)</p>\n  \n  <p>at java.lang.String.format(Unknown Source)</p>\n</blockquote>\n\n<p>Any idea what's wrong?</p>\n"},{"tags":["java","android","android-recyclerview","drag-and-drop","itemtouchhelper"],"comments":[{"owner":{"account_id":7528450,"reputation":6479,"user_id":5717640,"accept_rate":98,"display_name":"Nerdy Bunz"},"score":0,"creation_date":1569797715,"post_id":58159346,"comment_id":102701897,"body_markdown":"It would be helpful to include an embedded video demonstration or link showing the behavior you want.  For example, it&#39;s hard to imagine what you mean by &quot;where it is dropped&quot; ... since normally the item being dragged would be suspended in between *two* elements.","body":"It would be helpful to include an embedded video demonstration or link showing the behavior you want.  For example, it&#39;s hard to imagine what you mean by &quot;where it is dropped&quot; ... since normally the item being dragged would be suspended in between <i>two</i> elements."}],"answers":[{"tags":[],"owner":{"account_id":13654747,"reputation":38532,"user_id":9851608,"display_name":"Zain"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1569875072,"creation_date":1569796293,"answer_id":58159718,"question_id":58159346,"body_markdown":"You can achieve this by registering both the dragged item using onMove() method, and the dropped item using clearView() method; then modify the data source of your `RecyclerView` adapter; so you can use a temp item that stores the dragged item; then set the dropped-by item with the dragged one; and finally put the temp item on the dropped one. \r\n\r\nThen utilize `RecyclerView` adapter `notifyItemChanged()` for both items to update the layout with this change\r\n\r\n\r\nNote: here I disabled the swiping as your question mainly on the drag &amp; drop\r\n\r\n    final int[] oldPos = new int[1];\r\n    final int[] newPos = new int[1];\r\n    ItemTouchHelper itemTouchHelper = new ItemTouchHelper(new ItemTouchHelper.SimpleCallback(\r\n\r\n            ItemTouchHelper.UP |\r\n                    ItemTouchHelper.DOWN |\r\n                    ItemTouchHelper.LEFT |\r\n                    ItemTouchHelper.RIGHT,\r\n            0) {\r\n        @Override\r\n        public boolean onMove(@NonNull RecyclerView recyclerView, @NonNull RecyclerView.ViewHolder viewHolder, @NonNull RecyclerView.ViewHolder target) {\r\n            oldPos[0] = viewHolder.getAdapterPosition();\r\n            newPos[0] = target.getAdapterPosition();\r\n            return false;\r\n        }\r\n\r\n        @Override\r\n        public void onSwiped(@NonNull RecyclerView.ViewHolder viewHolder, int direction) {\r\n\r\n        }\r\n\r\n        @Override\r\n        public void clearView(@NonNull RecyclerView recyclerView, @NonNull RecyclerView.ViewHolder viewHolder) {\r\n            super.clearView(recyclerView, viewHolder);\r\n            moveItem(oldPos[0], newPos[0]);\r\n        }\r\n    });\r\n\r\n\r\n    private void moveItem(int oldPos, int newPos) {\r\n        Item temp = mItems.get(oldPos);\r\n        mItems.set(oldPos, mItems.get(newPos));\r\n        mItems.set(newPos, temp);\r\n        mAdapter.notifyItemChanged(oldPos);\r\n        mAdapter.notifyItemChanged(newPos);\r\n\r\n    }\r\n\r\n\r\n**The result**\r\n\r\n![](https://media.giphy.com/media/cIycoxfcCb6YNcUIHV/giphy.gif)\r\n","title":"how to create RecyclerView drag and drop (swap 2 item positions version)","body":"<p>You can achieve this by registering both the dragged item using onMove() method, and the dropped item using clearView() method; then modify the data source of your <code>RecyclerView</code> adapter; so you can use a temp item that stores the dragged item; then set the dropped-by item with the dragged one; and finally put the temp item on the dropped one. </p>\n\n<p>Then utilize <code>RecyclerView</code> adapter <code>notifyItemChanged()</code> for both items to update the layout with this change</p>\n\n<p>Note: here I disabled the swiping as your question mainly on the drag &amp; drop</p>\n\n<pre><code>final int[] oldPos = new int[1];\nfinal int[] newPos = new int[1];\nItemTouchHelper itemTouchHelper = new ItemTouchHelper(new ItemTouchHelper.SimpleCallback(\n\n        ItemTouchHelper.UP |\n                ItemTouchHelper.DOWN |\n                ItemTouchHelper.LEFT |\n                ItemTouchHelper.RIGHT,\n        0) {\n    @Override\n    public boolean onMove(@NonNull RecyclerView recyclerView, @NonNull RecyclerView.ViewHolder viewHolder, @NonNull RecyclerView.ViewHolder target) {\n        oldPos[0] = viewHolder.getAdapterPosition();\n        newPos[0] = target.getAdapterPosition();\n        return false;\n    }\n\n    @Override\n    public void onSwiped(@NonNull RecyclerView.ViewHolder viewHolder, int direction) {\n\n    }\n\n    @Override\n    public void clearView(@NonNull RecyclerView recyclerView, @NonNull RecyclerView.ViewHolder viewHolder) {\n        super.clearView(recyclerView, viewHolder);\n        moveItem(oldPos[0], newPos[0]);\n    }\n});\n\n\nprivate void moveItem(int oldPos, int newPos) {\n    Item temp = mItems.get(oldPos);\n    mItems.set(oldPos, mItems.get(newPos));\n    mItems.set(newPos, temp);\n    mAdapter.notifyItemChanged(oldPos);\n    mAdapter.notifyItemChanged(newPos);\n\n}\n</code></pre>\n\n<p><strong>The result</strong></p>\n\n<p><img src=\"https://media.giphy.com/media/cIycoxfcCb6YNcUIHV/giphy.gif\" alt=\"\"></p>\n"},{"tags":[],"owner":{"account_id":9321942,"reputation":636,"user_id":6920426,"display_name":"Ankit Chandora"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1696684833,"creation_date":1591084839,"answer_id":62147429,"question_id":58159346,"body_markdown":"I totally agree with @Zain answer but there is one problem i.e. suppose you want to replace the 1st item with the 3rd then you will click and hold the 3rd item and drag it over the 1st item. Once you drop, you will notice the 3rd item will get shifted to its original position and after that, both items will get updated properly. This is not looking seamlessly.\r\n\r\nI&#39;ve just slightly modified the @Zain answer.\r\n\r\n    private int fromPos = -1;\r\n    private int toPos = -1;\r\n    \r\n    ItemTouchHelper itemTouchHelper = new ItemTouchHelper(new \r\n    ItemTouchHelper.SimpleCallback(\r\n        ItemTouchHelper.UP | ItemTouchHelper.DOWN |\r\n        ItemTouchHelper.LEFT | ItemTouchHelper.RIGHT, 0) {\r\n  \r\n    @Override\r\n    public boolean onMove(@NonNull RecyclerView recyclerView,\r\n                          @NonNull RecyclerView.ViewHolder viewHolder,   \r\n                          @NonNull RecyclerView.ViewHolder target) {\r\n        toPos = target.getAdapterPosition();\r\n        return false;\r\n    }\r\n\r\n    @Override\r\n    public void onSwiped(@NonNull RecyclerView.ViewHolder viewHolder,\r\n                         int direction) {}\r\n\r\n    @Override\r\n    public void onSelectedChange(@NonNull RecyclerView.ViewHolder \r\n                               viewHolder, int actionState) {\r\n        switch(actionState){\r\n              case ItemTouchHelper.ACTION_STATE_DRAG:{\r\n                 fromPos = viewHolder.getAdapterPosition();\r\n                 break; \r\n              }\r\n\r\n              case ItemTouchHelper.ACTION_STATE_IDLE: {\r\n                  //Execute when the user dropped the item after dragging.\r\n                  if(fromPos != -1 &amp;&amp; toPos != -1      \r\n                     &amp;&amp; fromPos != toPos) {\r\n                   moveItem(fromPos, toPos);\r\n                   fromPos = -1;\r\n                   toPos = -1; \r\n               } \r\n               break;\r\n            }\r\n    }\r\n\r\n    private void moveItem(int oldPos, int newPos) {\r\n       Item temp = mItems.get(oldPos);\r\n       mItems.set(oldPos, mItems.get(newPos));\r\n       mItems.set(newPos, temp);\r\n       mAdapter.notifyItemChanged(oldPos);\r\n       mAdapter.notifyItemChanged(newPos);\r\n    }\r\n\r\n  ","title":"how to create RecyclerView drag and drop (swap 2 item positions version)","body":"<p>I totally agree with @Zain answer but there is one problem i.e. suppose you want to replace the 1st item with the 3rd then you will click and hold the 3rd item and drag it over the 1st item. Once you drop, you will notice the 3rd item will get shifted to its original position and after that, both items will get updated properly. This is not looking seamlessly.</p>\n<p>I've just slightly modified the @Zain answer.</p>\n<pre><code>private int fromPos = -1;\nprivate int toPos = -1;\n\nItemTouchHelper itemTouchHelper = new ItemTouchHelper(new \nItemTouchHelper.SimpleCallback(\n    ItemTouchHelper.UP | ItemTouchHelper.DOWN |\n    ItemTouchHelper.LEFT | ItemTouchHelper.RIGHT, 0) {\n\n@Override\npublic boolean onMove(@NonNull RecyclerView recyclerView,\n                      @NonNull RecyclerView.ViewHolder viewHolder,   \n                      @NonNull RecyclerView.ViewHolder target) {\n    toPos = target.getAdapterPosition();\n    return false;\n}\n\n@Override\npublic void onSwiped(@NonNull RecyclerView.ViewHolder viewHolder,\n                     int direction) {}\n\n@Override\npublic void onSelectedChange(@NonNull RecyclerView.ViewHolder \n                           viewHolder, int actionState) {\n    switch(actionState){\n          case ItemTouchHelper.ACTION_STATE_DRAG:{\n             fromPos = viewHolder.getAdapterPosition();\n             break; \n          }\n\n          case ItemTouchHelper.ACTION_STATE_IDLE: {\n              //Execute when the user dropped the item after dragging.\n              if(fromPos != -1 &amp;&amp; toPos != -1      \n                 &amp;&amp; fromPos != toPos) {\n               moveItem(fromPos, toPos);\n               fromPos = -1;\n               toPos = -1; \n           } \n           break;\n        }\n}\n\nprivate void moveItem(int oldPos, int newPos) {\n   Item temp = mItems.get(oldPos);\n   mItems.set(oldPos, mItems.get(newPos));\n   mItems.set(newPos, temp);\n   mAdapter.notifyItemChanged(oldPos);\n   mAdapter.notifyItemChanged(newPos);\n}\n</code></pre>\n"}],"owner":{"account_id":15261807,"reputation":721,"user_id":11011605,"display_name":"Kratos"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5321,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":58159718,"answer_count":2,"score":4,"last_activity_date":1696684833,"creation_date":1569792613,"question_id":58159346,"body_markdown":"I have ItemTouchHelper class that uses swiping and drag and drop for performing actions. But i want to change drag and drop behavior. It should swap positions of 2 elements, the first one I dragged and the other one where it is dropped on. i want to exchange the items of the dragged &amp; dropped positions. not to change positions of all items among both of them.\r\n\r\nHow to do it\r\n\r\nthis is my class for drag and drop\r\n\r\n    public class ItemTouchHelper extends \r\n    androidx.recyclerview.widget.ItemTouchHelper.Callback {\r\n\r\n    private Drawable icon;\r\n    private Context context;\r\n    private ColorDrawable background;\r\n    private final ItemTouchHelperListener dragDropListener;\r\n\r\n    public ItemTouchHelper(Context context, Drawable icon,\r\n                           ItemTouchHelperListener dragDropListener) {\r\n        this.icon = icon;\r\n        this.dragDropListener = dragDropListener;\r\n        this.context = context;\r\n        this.background = new ColorDrawable(context.getResources().getColor(R.color.deleteItem));\r\n    }\r\n\r\n    @Override\r\n    public void onChildDraw(@NonNull Canvas c, @NonNull RecyclerView recyclerView,\r\n                            @NonNull RecyclerView.ViewHolder viewHolder,\r\n                            float dX, float dY,\r\n                            int actionState, boolean isCurrentlyActive) {\r\n        super.onChildDraw(c, recyclerView, viewHolder, dX,\r\n                dY, actionState, isCurrentlyActive);\r\n        View itemView = viewHolder.itemView;\r\n\r\n        int iconMargin = (itemView.getHeight() - icon.getIntrinsicHeight()) / 2;\r\n        int iconTop = itemView.getTop() + (itemView.getHeight() - icon.getIntrinsicHeight()) / 2;\r\n        int iconBottom = iconTop + icon.getIntrinsicHeight();\r\n\r\n        if (dX &gt; 0) {\r\n            background = new ColorDrawable(context.getResources().getColor(R.color.deleteItem));\r\n\r\n            iconMargin = (itemView.getHeight() - icon.getIntrinsicHeight()) / 2;\r\n            iconTop = itemView.getTop() + (itemView.getHeight() - icon.getIntrinsicHeight()) / 2;\r\n            iconBottom = iconTop + icon.getIntrinsicHeight();\r\n\r\n            int iconRight = itemView.getLeft() + iconMargin + icon.getIntrinsicWidth();\r\n            int iconLeft = itemView.getLeft() + iconMargin;\r\n\r\n            icon.setBounds(iconLeft, iconTop, iconRight, iconBottom);\r\n\r\n            background.setBounds(itemView.getLeft(), itemView.getTop(),\r\n                    itemView.getLeft() + ((int) dX),\r\n                    itemView.getBottom());\r\n        } else if (dX &lt; 0) {\r\n            int iconRight = itemView.getRight() - iconMargin;\r\n            int iconLeft = itemView.getRight() - iconMargin - icon.getIntrinsicWidth();\r\n            icon.setBounds(iconLeft, iconTop, iconRight, iconBottom);\r\n            background.setBounds(itemView.getRight(), itemView.getTop(),\r\n                    itemView.getRight() + ((int) dX),\r\n                    itemView.getBottom());\r\n        } else {\r\n            background.setBounds(0, 0, 0, 0);\r\n            icon.setBounds(0, 0, 0, 0);\r\n        }\r\n\r\n        background.draw(c);\r\n        icon.draw(c);\r\n    }\r\n\r\n    @Override\r\n    public void onSwiped(@NonNull RecyclerView.ViewHolder viewHolder,\r\n                         int direction) {\r\n        dragDropListener.deleteElementDialog(viewHolder.getAdapterPosition());\r\n    }\r\n\r\n    @Override\r\n    public int getMovementFlags(@NonNull RecyclerView recyclerView, @NonNull RecyclerView.ViewHolder viewHolder) {\r\n        int dragFlags = UP | DOWN;\r\n        int swipeFlags = START | END;\r\n        return makeMovementFlags(dragFlags, swipeFlags);\r\n    }\r\n\r\n    @Override\r\n    public boolean onMove(@NonNull RecyclerView recyclerView, @NonNull RecyclerView.ViewHolder viewHolder,\r\n                          @NonNull RecyclerView.ViewHolder target) {\r\n        dragDropListener.onRowMoved(viewHolder.getAdapterPosition(), target.getAdapterPosition());\r\n        return true;\r\n    }\r\n\r\n    @Override\r\n    public void onSelectedChanged(RecyclerView.ViewHolder viewHolder,\r\n                                  int actionState) {\r\n        if (actionState != ACTION_STATE_IDLE &amp;&amp; actionState != ACTION_STATE_SWIPE) {\r\n            dragDropListener.onRowSelected(viewHolder);\r\n        }\r\n        super.onSelectedChanged(viewHolder, actionState);\r\n    }\r\n\r\n    @Override\r\n    public void clearView(@NonNull RecyclerView recyclerView,\r\n                          @NonNull RecyclerView.ViewHolder viewHolder) {\r\n        super.clearView(recyclerView, Objects.requireNonNull(viewHolder));\r\n        dragDropListener.onRowClear(Objects.requireNonNull(viewHolder));\r\n    }\r\n\r\n    @Override\r\n    public boolean isLongPressDragEnabled() {\r\n        return true;\r\n    }\r\n\r\n    }\r\n\r\n\r\nand this is my ItemTouchHelperListener:\r\n\r\n\r\n\r\n        public void setItemTouchHelperListener() {\r\n        ItemTouchHelperListener itemTouchHelperListener = new \r\n       ItemTouchHelperListener() {\r\n            @Override\r\n            public void onRowMoved(int fromPosition, int toPosition) {\r\n                presenter.rowMoved(fromPosition, toPosition);\r\n            }\r\n\r\n            @Override\r\n            public void onRowSelected(RecyclerView.ViewHolder myViewHolder) {\r\n                if (myViewHolder instanceof ElementsAdapter.ElementsViewHolder) {\r\n                    elementsAdapter.rowSelected((ElementsAdapter.ElementsViewHolder) myViewHolder);\r\n                    presenter.rowSelected(myViewHolder.getAdapterPosition());\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onRowClear(RecyclerView.ViewHolder myViewHolder) {\r\n                if (myViewHolder instanceof ElementsAdapter.ElementsViewHolder) {\r\n                    elementsAdapter.rowClear((ElementsAdapter.ElementsViewHolder) myViewHolder);\r\n                    presenter.rowClear(myViewHolder.getAdapterPosition());\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void deleteElementDialog(int adapterPosition) {\r\n                createDeleteDialog(adapterPosition);\r\n            }\r\n        };","title":"how to create RecyclerView drag and drop (swap 2 item positions version)","body":"<p>I have ItemTouchHelper class that uses swiping and drag and drop for performing actions. But i want to change drag and drop behavior. It should swap positions of 2 elements, the first one I dragged and the other one where it is dropped on. i want to exchange the items of the dragged &amp; dropped positions. not to change positions of all items among both of them.</p>\n\n<p>How to do it</p>\n\n<p>this is my class for drag and drop</p>\n\n<pre><code>public class ItemTouchHelper extends \nandroidx.recyclerview.widget.ItemTouchHelper.Callback {\n\nprivate Drawable icon;\nprivate Context context;\nprivate ColorDrawable background;\nprivate final ItemTouchHelperListener dragDropListener;\n\npublic ItemTouchHelper(Context context, Drawable icon,\n                       ItemTouchHelperListener dragDropListener) {\n    this.icon = icon;\n    this.dragDropListener = dragDropListener;\n    this.context = context;\n    this.background = new ColorDrawable(context.getResources().getColor(R.color.deleteItem));\n}\n\n@Override\npublic void onChildDraw(@NonNull Canvas c, @NonNull RecyclerView recyclerView,\n                        @NonNull RecyclerView.ViewHolder viewHolder,\n                        float dX, float dY,\n                        int actionState, boolean isCurrentlyActive) {\n    super.onChildDraw(c, recyclerView, viewHolder, dX,\n            dY, actionState, isCurrentlyActive);\n    View itemView = viewHolder.itemView;\n\n    int iconMargin = (itemView.getHeight() - icon.getIntrinsicHeight()) / 2;\n    int iconTop = itemView.getTop() + (itemView.getHeight() - icon.getIntrinsicHeight()) / 2;\n    int iconBottom = iconTop + icon.getIntrinsicHeight();\n\n    if (dX &gt; 0) {\n        background = new ColorDrawable(context.getResources().getColor(R.color.deleteItem));\n\n        iconMargin = (itemView.getHeight() - icon.getIntrinsicHeight()) / 2;\n        iconTop = itemView.getTop() + (itemView.getHeight() - icon.getIntrinsicHeight()) / 2;\n        iconBottom = iconTop + icon.getIntrinsicHeight();\n\n        int iconRight = itemView.getLeft() + iconMargin + icon.getIntrinsicWidth();\n        int iconLeft = itemView.getLeft() + iconMargin;\n\n        icon.setBounds(iconLeft, iconTop, iconRight, iconBottom);\n\n        background.setBounds(itemView.getLeft(), itemView.getTop(),\n                itemView.getLeft() + ((int) dX),\n                itemView.getBottom());\n    } else if (dX &lt; 0) {\n        int iconRight = itemView.getRight() - iconMargin;\n        int iconLeft = itemView.getRight() - iconMargin - icon.getIntrinsicWidth();\n        icon.setBounds(iconLeft, iconTop, iconRight, iconBottom);\n        background.setBounds(itemView.getRight(), itemView.getTop(),\n                itemView.getRight() + ((int) dX),\n                itemView.getBottom());\n    } else {\n        background.setBounds(0, 0, 0, 0);\n        icon.setBounds(0, 0, 0, 0);\n    }\n\n    background.draw(c);\n    icon.draw(c);\n}\n\n@Override\npublic void onSwiped(@NonNull RecyclerView.ViewHolder viewHolder,\n                     int direction) {\n    dragDropListener.deleteElementDialog(viewHolder.getAdapterPosition());\n}\n\n@Override\npublic int getMovementFlags(@NonNull RecyclerView recyclerView, @NonNull RecyclerView.ViewHolder viewHolder) {\n    int dragFlags = UP | DOWN;\n    int swipeFlags = START | END;\n    return makeMovementFlags(dragFlags, swipeFlags);\n}\n\n@Override\npublic boolean onMove(@NonNull RecyclerView recyclerView, @NonNull RecyclerView.ViewHolder viewHolder,\n                      @NonNull RecyclerView.ViewHolder target) {\n    dragDropListener.onRowMoved(viewHolder.getAdapterPosition(), target.getAdapterPosition());\n    return true;\n}\n\n@Override\npublic void onSelectedChanged(RecyclerView.ViewHolder viewHolder,\n                              int actionState) {\n    if (actionState != ACTION_STATE_IDLE &amp;&amp; actionState != ACTION_STATE_SWIPE) {\n        dragDropListener.onRowSelected(viewHolder);\n    }\n    super.onSelectedChanged(viewHolder, actionState);\n}\n\n@Override\npublic void clearView(@NonNull RecyclerView recyclerView,\n                      @NonNull RecyclerView.ViewHolder viewHolder) {\n    super.clearView(recyclerView, Objects.requireNonNull(viewHolder));\n    dragDropListener.onRowClear(Objects.requireNonNull(viewHolder));\n}\n\n@Override\npublic boolean isLongPressDragEnabled() {\n    return true;\n}\n\n}\n</code></pre>\n\n<p>and this is my ItemTouchHelperListener:</p>\n\n<pre><code>    public void setItemTouchHelperListener() {\n    ItemTouchHelperListener itemTouchHelperListener = new \n   ItemTouchHelperListener() {\n        @Override\n        public void onRowMoved(int fromPosition, int toPosition) {\n            presenter.rowMoved(fromPosition, toPosition);\n        }\n\n        @Override\n        public void onRowSelected(RecyclerView.ViewHolder myViewHolder) {\n            if (myViewHolder instanceof ElementsAdapter.ElementsViewHolder) {\n                elementsAdapter.rowSelected((ElementsAdapter.ElementsViewHolder) myViewHolder);\n                presenter.rowSelected(myViewHolder.getAdapterPosition());\n            }\n        }\n\n        @Override\n        public void onRowClear(RecyclerView.ViewHolder myViewHolder) {\n            if (myViewHolder instanceof ElementsAdapter.ElementsViewHolder) {\n                elementsAdapter.rowClear((ElementsAdapter.ElementsViewHolder) myViewHolder);\n                presenter.rowClear(myViewHolder.getAdapterPosition());\n            }\n        }\n\n        @Override\n        public void deleteElementDialog(int adapterPosition) {\n            createDeleteDialog(adapterPosition);\n        }\n    };\n</code></pre>\n"},{"tags":["java","zip"],"comments":[{"owner":{"account_id":7619085,"reputation":789,"user_id":5777603,"accept_rate":83,"display_name":"Alex"},"score":0,"creation_date":1551081688,"post_id":11468163,"comment_id":96494098,"body_markdown":"This snippet does exactly what this question aks for: https://stackoverflow.com/a/54861562/5777603","body":"This snippet does exactly what this question aks for: <a href=\"https://stackoverflow.com/a/54861562/5777603\">stackoverflow.com/a/54861562/5777603</a>"}],"answers":[{"tags":[],"owner":{"account_id":102965,"reputation":415230,"user_id":276052,"accept_rate":80,"display_name":"aioobe"},"down_vote_count":0,"up_vote_count":25,"is_accepted":false,"score":25,"last_activity_date":1696684681,"creation_date":1342173458,"answer_id":11468214,"question_id":11468163,"body_markdown":"I suggest you have a look at [`ZipFile.entries()`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/zip/ZipFile.html#entries%28%29).\r\n\r\nHere&#39;s some code:\r\n\r\n    try (ZipFile zipFile = new ZipFile(&quot;test.zip&quot;)) {\r\n        Enumeration&lt;? extends ZipEntry&gt; zipEntries = zipFile.entries();\r\n        while (zipEntries.hasMoreElements()) {\r\n            String fileName = zipEntries.nextElement().getName();\r\n            System.out.println(fileName);\r\n        }\r\n    }\r\n\r\nIf you&#39;re using **Java 8**, you can avoid the use of the almost deprecated `Enumeration` class using `ZipFile::stream` as follows:\r\n\r\n    zipFile.stream()\r\n           .map(ZipEntry::getName)\r\n           .forEach(System.out::println);\r\n\r\n\r\n----------\r\n\r\n\r\nIf you need to know whether an entry is a directory or not, you could use [`ZipEntry.isDirectory`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/zip/ZipEntry.html#isDirectory%28%29). You can&#39;t get much more information than that without extracting the file (for obvious reasons).\r\n\r\n\r\n----------\r\n\r\n\r\nIf you want to **avoid extracting *all* files,** you can extract one file at a time using [`ZipFile.getInputStream`](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/zip/ZipFile.html#getInputStream%28java.util.zip.ZipEntry%29) for each `ZipEntry`. (Note that you don&#39;t need to store the unpacked data on disk, you can just read the input stream and discard the bytes as you go.","title":"List .zip directories without extracting","body":"<p>I suggest you have a look at <a href=\"http://docs.oracle.com/javase/1.5.0/docs/api/java/util/zip/ZipFile.html#entries%28%29\" rel=\"nofollow noreferrer\"><code>ZipFile.entries()</code></a>.</p>\n<p>Here's some code:</p>\n<pre><code>try (ZipFile zipFile = new ZipFile(&quot;test.zip&quot;)) {\n    Enumeration&lt;? extends ZipEntry&gt; zipEntries = zipFile.entries();\n    while (zipEntries.hasMoreElements()) {\n        String fileName = zipEntries.nextElement().getName();\n        System.out.println(fileName);\n    }\n}\n</code></pre>\n<p>If you're using <strong>Java 8</strong>, you can avoid the use of the almost deprecated <code>Enumeration</code> class using <code>ZipFile::stream</code> as follows:</p>\n<pre><code>zipFile.stream()\n       .map(ZipEntry::getName)\n       .forEach(System.out::println);\n</code></pre>\n<hr />\n<p>If you need to know whether an entry is a directory or not, you could use <a href=\"http://docs.oracle.com/javase/1.5.0/docs/api/java/util/zip/ZipEntry.html#isDirectory%28%29\" rel=\"nofollow noreferrer\"><code>ZipEntry.isDirectory</code></a>. You can't get much more information than that without extracting the file (for obvious reasons).</p>\n<hr />\n<p>If you want to <strong>avoid extracting <em>all</em> files,</strong> you can extract one file at a time using <a href=\"http://docs.oracle.com/javase/1.4.2/docs/api/java/util/zip/ZipFile.html#getInputStream%28java.util.zip.ZipEntry%29\" rel=\"nofollow noreferrer\"><code>ZipFile.getInputStream</code></a> for each <code>ZipEntry</code>. (Note that you don't need to store the unpacked data on disk, you can just read the input stream and discard the bytes as you go.</p>\n"},{"tags":[],"owner":{"account_id":121787,"reputation":11660,"user_id":315129,"accept_rate":93,"display_name":"vbezhenar"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1342173502,"creation_date":1342173502,"answer_id":11468230,"question_id":11468163,"body_markdown":"For handling ZIP files you can use class [ZipFile][1]. It has method [entries()][2] which returns list of entries contained within ZIP file. This information is contained in the ZIP header and extraction is not required.\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/api/java/util/zip/ZipFile.html\r\n  [2]: http://docs.oracle.com/javase/7/docs/api/java/util/zip/ZipFile.html#entries%28%29","title":"List .zip directories without extracting","body":"<p>For handling ZIP files you can use class <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/zip/ZipFile.html\" rel=\"nofollow\">ZipFile</a>. It has method <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/zip/ZipFile.html#entries%28%29\" rel=\"nofollow\">entries()</a> which returns list of entries contained within ZIP file. This information is contained in the ZIP header and extraction is not required.</p>\n"},{"tags":[],"owner":{"account_id":369687,"reputation":56616,"user_id":717214,"accept_rate":86,"display_name":"Aleks G"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1342173550,"creation_date":1342173550,"answer_id":11468238,"question_id":11468163,"body_markdown":"Use `java.util.zip.ZipFile` class and, specifically, its `entries` method.\r\n\r\nYou&#39;ll have something like this:\r\n\r\n    ZipFile zipFile = new ZipFile(&quot;testfile.zip&quot;);\r\n    Enumeration zipEntries = zipFile.entries();\r\n    String fname;\r\n    while (zipEntries.hasMoreElements()) {\r\n        fname = ((ZipEntry)zipEntries.nextElement()).getName();\r\n        ...\r\n    }","title":"List .zip directories without extracting","body":"<p>Use <code>java.util.zip.ZipFile</code> class and, specifically, its <code>entries</code> method.</p>\n\n<p>You'll have something like this:</p>\n\n<pre><code>ZipFile zipFile = new ZipFile(\"testfile.zip\");\nEnumeration zipEntries = zipFile.entries();\nString fname;\nwhile (zipEntries.hasMoreElements()) {\n    fname = ((ZipEntry)zipEntries.nextElement()).getName();\n    ...\n}\n</code></pre>\n"}],"owner":{"account_id":1632226,"reputation":191,"user_id":1506546,"accept_rate":0,"display_name":"Bobi Adzi-Andov"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":28539,"favorite_count":0,"down_vote_count":0,"up_vote_count":13,"answer_count":3,"score":13,"last_activity_date":1696684681,"creation_date":1342173272,"question_id":11468163,"body_markdown":"I am building a file explorer in Java and I am listing the files/folders in JTrees. What I am trying to do now is when I get to a zipped folder I want to list its contents, but without extracting it first.\r\n\r\nIf anyone has an idea, please share.\r\n\r\n","title":"List .zip directories without extracting","body":"<p>I am building a file explorer in Java and I am listing the files/folders in JTrees. What I am trying to do now is when I get to a zipped folder I want to list its contents, but without extracting it first.</p>\n\n<p>If anyone has an idea, please share.</p>\n"},{"tags":["java","selenium-webdriver"],"comments":[{"owner":{"account_id":6078615,"reputation":485,"user_id":4745096,"display_name":"SNS"},"score":0,"creation_date":1522039678,"post_id":49484120,"comment_id":85971029,"body_markdown":"https://stackoverflow.com/questions/3500197/how-to-display-toast-in-android","body":"<a href=\"https://stackoverflow.com/questions/3500197/how-to-display-toast-in-android\" title=\"how to display toast in android\">stackoverflow.com/questions/3500197/&hellip;</a>"},{"owner":{"account_id":7810904,"reputation":12490,"user_id":6099347,"accept_rate":100,"display_name":"Aniket Sahrawat"},"score":2,"creation_date":1522039910,"post_id":49484120,"comment_id":85971076,"body_markdown":"Unfortunately your question boils down to *write code for me*, while many users are willing to produce code for a coder in distress, they usually only help when the poster has already tried to solve the problem on their own. A good way to demonstrate this effort is to include the code you&#39;ve written so far, example input, expected output, and the output you actually get (console output, tracebacks, etc.). Check the [FAQ](https://stackoverflow.com/tour) and [How to Ask](https://stackoverflow.com/questions/how-to-ask).","body":"Unfortunately your question boils down to <i>write code for me</i>, while many users are willing to produce code for a coder in distress, they usually only help when the poster has already tried to solve the problem on their own. A good way to demonstrate this effort is to include the code you&#39;ve written so far, example input, expected output, and the output you actually get (console output, tracebacks, etc.). Check the <a href=\"https://stackoverflow.com/tour\">FAQ</a> and <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>."},{"owner":{"account_id":7810904,"reputation":12490,"user_id":6099347,"accept_rate":100,"display_name":"Aniket Sahrawat"},"score":1,"creation_date":1522039923,"post_id":49484120,"comment_id":85971081,"body_markdown":"*Thanks in advance*, yeah you are welcome.","body":"<i>Thanks in advance</i>, yeah you are welcome."}],"answers":[{"tags":[],"owner":{"account_id":1352479,"reputation":928,"user_id":1291696,"display_name":"davidluckystar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1522040103,"creation_date":1522040103,"answer_id":49484201,"question_id":49484120,"body_markdown":"You need to open the page&#39;s source (F12) and find this &quot;toast&quot; element - it should be some `&lt;div&gt;` with either `id` or `class` which you can select with selenium. I dont know how this toast is implemented but I&#39;m pretty sure it&#39;s not re-created every time message is shown - so you can rely on your selector.\r\n\r\nThen you can just `driver.findElement(By.id(&quot;toast_id&quot;))` or `driver.findElement(By.className(&quot;toast-class-name&quot;))` in java and check it&#39;s text value","title":"How to get text from Toast message which gets disappeared within few seconds","body":"<p>You need to open the page's source (F12) and find this \"toast\" element - it should be some <code>&lt;div&gt;</code> with either <code>id</code> or <code>class</code> which you can select with selenium. I dont know how this toast is implemented but I'm pretty sure it's not re-created every time message is shown - so you can rely on your selector.</p>\n\n<p>Then you can just <code>driver.findElement(By.id(\"toast_id\"))</code> or <code>driver.findElement(By.className(\"toast-class-name\"))</code> in java and check it's text value</p>\n"},{"tags":[],"owner":{"account_id":15623605,"reputation":21,"user_id":11271813,"display_name":"Rajarajan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1554384219,"creation_date":1554384219,"answer_id":55517104,"question_id":49484120,"body_markdown":"Instead of using text() try\r\n\r\n    elem.getAttribute(&quot;innerHTML&quot;);","title":"How to get text from Toast message which gets disappeared within few seconds","body":"<p>Instead of using text() try</p>\n\n<pre><code>elem.getAttribute(\"innerHTML\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13833572,"reputation":1,"user_id":9985747,"display_name":"Chathuz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1571210697,"creation_date":1571210390,"answer_id":58407821,"question_id":49484120,"body_markdown":"This should work:\r\n       \r\n\r\n        String loginStatus = new WebDriverWait(webDriver, 10).until(ExpectedConditions.elementToBeClickable(By.id(&quot;toast-message&quot;))).getText();\r\n        if (loginStatus.contains(&quot;enter valid&quot;)) {\r\n            System.out.println(&quot;Login Failed: &quot; + loginStatus);\r\n        } else {\r\n            System.out.println(&quot;Login Success:&quot; + loginStatus);\r\n        }","title":"How to get text from Toast message which gets disappeared within few seconds","body":"<p>This should work:</p>\n\n<pre><code>    String loginStatus = new WebDriverWait(webDriver, 10).until(ExpectedConditions.elementToBeClickable(By.id(\"toast-message\"))).getText();\n    if (loginStatus.contains(\"enter valid\")) {\n        System.out.println(\"Login Failed: \" + loginStatus);\n    } else {\n        System.out.println(\"Login Success:\" + loginStatus);\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17375833,"reputation":496,"user_id":12588979,"display_name":"GHULAM NABI"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1578657884,"creation_date":1578640627,"answer_id":59677035,"question_id":49484120,"body_markdown":"from selenium import webdriver\r\n\r\n    driver = webdriver.Firefox(executable_path =&#39;C:\\\\....\\gekodriver&#39;)\r\n    driver.get(&quot;http://www.example.org&quot;)\r\n    toast_text = driver.find_element_by_xpath(&quot;Copy the xpath of toast and paste here...&quot;)\r\n    assert toast_text ==&quot;Text which is shown in toast paste here&quot;\r\n    print(&quot;Test case passed&quot;)","title":"How to get text from Toast message which gets disappeared within few seconds","body":"<p>from selenium import webdriver</p>\n\n<pre><code>driver = webdriver.Firefox(executable_path ='C:\\\\....\\gekodriver')\ndriver.get(\"http://www.example.org\")\ntoast_text = driver.find_element_by_xpath(\"Copy the xpath of toast and paste here...\")\nassert toast_text ==\"Text which is shown in toast paste here\"\nprint(\"Test case passed\")\n</code></pre>\n"}],"owner":{"account_id":12927633,"reputation":1,"user_id":9347737,"display_name":"Pooja thakur"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24557,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":4,"score":0,"last_activity_date":1696683765,"creation_date":1522039464,"question_id":49484120,"body_markdown":"There is a functionality, when i enter invalid login credentials, an error message appears on right side of page showing error message&quot;Please enter valid username and password&quot; but it appears only for few seconds (we call it toast message). I have to validate that error text message in selenium by java. Please suggest me what are the ways to achieve this. Thanks in advance","title":"How to get text from Toast message which gets disappeared within few seconds","body":"<p>There is a functionality, when i enter invalid login credentials, an error message appears on right side of page showing error message\"Please enter valid username and password\" but it appears only for few seconds (we call it toast message). I have to validate that error text message in selenium by java. Please suggest me what are the ways to achieve this. Thanks in advance</p>\n"},{"tags":["java","sftp","spring-integration"],"comments":[{"owner":{"account_id":9760,"reputation":85859,"user_id":18157,"accept_rate":100,"display_name":"Jim Garrison"},"score":0,"creation_date":1414713727,"post_id":26665396,"comment_id":41932743,"body_markdown":"How have you verified that the correct key file is in the right place and the correct value has been substituted for `${keyfile}`?  There are lots of places in that chain that could be broken.","body":"How have you verified that the correct key file is in the right place and the correct value has been substituted for <code>${keyfile}</code>?  There are lots of places in that chain that could be broken."},{"owner":{"account_id":5170882,"reputation":39,"user_id":4139424,"display_name":"user_1003"},"score":0,"creation_date":1414714006,"post_id":26665396,"comment_id":41932829,"body_markdown":"I have posted the log below. Could you please help me to understand why this Auth error, as i could see Poll resulted in Message: null as well after the error. Confused with the logs","body":"I have posted the log below. Could you please help me to understand why this Auth error, as i could see Poll resulted in Message: null as well after the error. Confused with the logs"},{"owner":{"account_id":203984,"reputation":21747,"user_id":451941,"accept_rate":100,"display_name":"Jeen Broekstra"},"score":0,"creation_date":1414715085,"post_id":26665396,"comment_id":41933132,"body_markdown":"@user_1003 don&#39;t post additional information in an answer - instead *edit your question* to provide additional details. Have a read through this: [How to ask](http://stackoverflow.com/help/how-to-ask).","body":"@user_1003 don&#39;t post additional information in an answer - instead <i>edit your question</i> to provide additional details. Have a read through this: <a href=\"http://stackoverflow.com/help/how-to-ask\">How to ask</a>."},{"owner":{"account_id":5170882,"reputation":39,"user_id":4139424,"display_name":"user_1003"},"score":0,"creation_date":1414715138,"post_id":26665396,"comment_id":41933148,"body_markdown":"HI Jim. Can u please respond . Please suggest me. I have pasted my logs below. As it dint allow me to paste logs in comment,I had to put them under Answer.Please suggest","body":"HI Jim. Can u please respond . Please suggest me. I have pasted my logs below. As it dint allow me to paste logs in comment,I had to put them under Answer.Please suggest"},{"owner":{"account_id":5170882,"reputation":39,"user_id":4139424,"display_name":"user_1003"},"score":0,"creation_date":1414715264,"post_id":26665396,"comment_id":41933180,"body_markdown":"Thanks Jeen, Sory about that, I have deleted the logs form Answers and put them in my question as u suggested. Thanks :).","body":"Thanks Jeen, Sory about that, I have deleted the logs form Answers and put them in my question as u suggested. Thanks :)."},{"owner":{"account_id":203984,"reputation":21747,"user_id":451941,"accept_rate":100,"display_name":"Jeen Broekstra"},"score":0,"creation_date":1414715473,"post_id":26665396,"comment_id":41933216,"body_markdown":"possible duplicate of [Spring Integration / JSch: Auth fail](http://stackoverflow.com/questions/16154361/spring-integration-jsch-auth-fail)","body":"possible duplicate of <a href=\"http://stackoverflow.com/questions/16154361/spring-integration-jsch-auth-fail\">Spring Integration / JSch: Auth fail</a>"},{"owner":{"account_id":5170882,"reputation":39,"user_id":4139424,"display_name":"user_1003"},"score":0,"creation_date":1414715971,"post_id":26665396,"comment_id":41933361,"body_markdown":"Just checked the link. But seems like it is not answered and i couldn&#39;t find any resolution there. AM i missing anything!.Please let me know.","body":"Just checked the link. But seems like it is not answered and i couldn&#39;t find any resolution there. AM i missing anything!.Please let me know."},{"owner":{"account_id":5170882,"reputation":39,"user_id":4139424,"display_name":"user_1003"},"score":0,"creation_date":1414718414,"post_id":26665396,"comment_id":41933940,"body_markdown":"Someone has any suggesions/answers for this. Please respond. Thanks in Advance.","body":"Someone has any suggesions/answers for this. Please respond. Thanks in Advance."},{"owner":{"account_id":5170882,"reputation":39,"user_id":4139424,"display_name":"user_1003"},"score":0,"creation_date":1414728952,"post_id":26665396,"comment_id":41936252,"body_markdown":"I got it resolved. It is picking up wrong user ID. checked server logs. and resolved it. Thanks everyone :)","body":"I got it resolved. It is picking up wrong user ID. checked server logs. and resolved it. Thanks everyone :)"}],"answers":[{"tags":[],"owner":{"account_id":1288095,"reputation":169316,"user_id":1240763,"display_name":"Gary Russell"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1414760249,"creation_date":1414760249,"answer_id":26675283,"question_id":26665396,"body_markdown":"For future readers:\r\n\r\nTurn on `DEBUG` logging for JSCH as [discussed in the reference manual](http://docs.spring.io/spring-integration/reference/html/sftp.html#sftp-jsch-logging). It should help you track it down.","title":"Caused by: com.jcraft.jsch.JSchException: Auth fail with sftp private key","body":"<p>For future readers:</p>\n\n<p>Turn on <code>DEBUG</code> logging for JSCH as <a href=\"http://docs.spring.io/spring-integration/reference/html/sftp.html#sftp-jsch-logging\" rel=\"nofollow\">discussed in the reference manual</a>. It should help you track it down.</p>\n"}],"owner":{"account_id":5170882,"reputation":39,"user_id":4139424,"display_name":"user_1003"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":9174,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":1,"score":1,"last_activity_date":1696683765,"creation_date":1414713076,"question_id":26665396,"body_markdown":"    &lt;bean id=&quot;sftpSessionFactory&quot;\r\n    \t\tclass=&quot;org.springframework.integration.sftp.session.DefaultSftpSessionFactory&quot;&gt;\r\n    \t\t&lt;property name=&quot;host&quot; value=&quot;${host}&quot; /&gt;\r\n    \t\t&lt;property name=&quot;privateKey&quot; value=&quot;file:${keyfile}&quot;/&gt;\r\n    \t\t&lt;property name=&quot;user&quot; value=&quot;${user}&quot; /&gt;\r\n    \t\t&lt;property name=&quot;port&quot; value=&quot;${port}&quot; /&gt;\r\n    &lt;/bean&gt;\r\n\r\nI have the above configuration. and I have public key under authorized keys ~/.ssh2 on server. I am still getting the **Caused by: com.jcraft.jsch.JSchException: Auth fail** error. All the credentials are correct and am able to sftp through command prompt. Kindly suggest asap. Confused.\r\nPlease see the logs:\r\n\r\nINFO   | jvm 1    | 2014/10/31 13:41:23 | \t... 21 more\r\nINFO   | jvm 1    | 2014/10/31 13:41:23 | Caused by: com.jcraft.jsch.JSchException: Auth fail\r\nINFO   | jvm 1    | 2014/10/31 13:41:23 | \tat com.jcraft.jsch.Session.connect(Session.java:464)\r\nINFO   | jvm 1    | 2014/10/31 13:41:23 | \tat com.jcraft.jsch.Session.connect(Session.java:158)\r\nINFO   | jvm 1    | 2014/10/31 13:41:23 | \tat org.springframework.integration.sftp.session.SftpSession.connect(SftpSession.java:198)\r\nINFO   | jvm 1    | 2014/10/31 13:41:23 | \t... 22 more\r\n\r\nThis is the detailed log. Iam Confused whether it is connecting or not. Could you please help me\r\n\r\n    ","title":"Caused by: com.jcraft.jsch.JSchException: Auth fail with sftp private key","body":"<pre><code>&lt;bean id=\"sftpSessionFactory\"\n        class=\"org.springframework.integration.sftp.session.DefaultSftpSessionFactory\"&gt;\n        &lt;property name=\"host\" value=\"${host}\" /&gt;\n        &lt;property name=\"privateKey\" value=\"file:${keyfile}\"/&gt;\n        &lt;property name=\"user\" value=\"${user}\" /&gt;\n        &lt;property name=\"port\" value=\"${port}\" /&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p>I have the above configuration. and I have public key under authorized keys ~/.ssh2 on server. I am still getting the <strong>Caused by: com.jcraft.jsch.JSchException: Auth fail</strong> error. All the credentials are correct and am able to sftp through command prompt. Kindly suggest asap. Confused.\nPlease see the logs:</p>\n\n<p>INFO   | jvm 1    | 2014/10/31 13:41:23 |   ... 21 more\nINFO   | jvm 1    | 2014/10/31 13:41:23 | Caused by: com.jcraft.jsch.JSchException: Auth fail\nINFO   | jvm 1    | 2014/10/31 13:41:23 |   at com.jcraft.jsch.Session.connect(Session.java:464)\nINFO   | jvm 1    | 2014/10/31 13:41:23 |   at com.jcraft.jsch.Session.connect(Session.java:158)\nINFO   | jvm 1    | 2014/10/31 13:41:23 |   at org.springframework.integration.sftp.session.SftpSession.connect(SftpSession.java:198)\nINFO   | jvm 1    | 2014/10/31 13:41:23 |   ... 22 more</p>\n\n<p>This is the detailed log. Iam Confused whether it is connecting or not. Could you please help me</p>\n"},{"tags":["java","web-services","jaxb","jax-ws","cxf"],"comments":[{"owner":{"account_id":114848,"reputation":134179,"user_id":301832,"accept_rate":60,"display_name":"Donal Fellows"},"score":0,"creation_date":1349170339,"post_id":12687528,"comment_id":17125683,"body_markdown":"Interesting question, but I don&#39;t know the answer.","body":"Interesting question, but I don&#39;t know the answer."},{"owner":{"account_id":1474276,"reputation":4564,"user_id":1385087,"display_name":"Konstantin V. Salikhov"},"score":1,"creation_date":1349181127,"post_id":12687528,"comment_id":17129536,"body_markdown":"This is for jaxrs, but may be it will work for jaxws too: http://cxf.apache.org/docs/jax-rs-data-bindings.html#JAX-RSDataBindings-SingleJAXBContextandextrauserclasses","body":"This is for jaxrs, but may be it will work for jaxws too: <a href=\"http://cxf.apache.org/docs/jax-rs-data-bindings.html#JAX-RSDataBindings-SingleJAXBContextandextrauserclasses\" rel=\"nofollow noreferrer\">cxf.apache.org/docs/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":888697,"reputation":6671,"user_id":927477,"accept_rate":77,"display_name":"Avner Levy"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1696681610,"creation_date":1349248358,"answer_id":12703547,"question_id":12687528,"body_markdown":"One possible way to solve it is by adding the following to the spring configuration:\r\n\r\n    &lt;bean class=&quot;org.apache.cxf.jaxb.JAXBDataBinding&quot; &gt;\r\n        &lt;constructor-arg index=&quot;0&quot; value=&quot;#{GlobalContextBean.context}&quot;/&gt;\r\n    &lt;/bean&gt;\r\n\r\nWhere the value is just a reference to a bean which holds the global (single) JAXBContext and has the following method:\r\n\r\n    public javax.xml.bind.JAXBContext getContext() {...}\r\n\r\nYou can see more details (including the CXF guru Daniel Kulp inputs) in the following thread:  \r\n[Reuse-JAXB-context-in-jaxws][1]\r\n\r\nAfter testing it I&#39;ve discovered that setting the current JAXBDataBinding as a global instance for multiple services won&#39;t work since there is an &quot;if&quot; statement in its initialize method which returns once the context was set by the first service.  \r\nThat&#39;s why I&#39;ve ended up by extending the class and collecting all the required services classes and model ones. After all services initialization ends, I create a global context with all required classes and return it to all services.    \r\nYou can use the following class.  \r\nAfter all your web services are initialized call the compileGlobalJAXBContext method for creating the global context. You can add there other classes which the application needs and the init missed.  \r\nDon&#39;t Forget to configure the services to work with this bean.  \r\n\r\n    public class GlobalJAXBDataBinding extends JAXBDataBinding\r\n    {\r\n    private Set&lt;Class&lt;?&gt;&gt; globalContextClasses;\r\n    private boolean contextBuilt = false;\r\n\r\n    public GlobalJAXBDataBinding(Set&lt;Class&lt;?&gt;&gt; classes) {\r\n        globalContextClasses = new HashSet&lt;&gt;(classes);\r\n        globalContextClasses.add(CPUUID.class);\r\n    }\r\n\r\n    public GlobalJAXBDataBinding() {\r\n    }\r\n\r\n    }\r\n\r\n    public synchronized void initialize(Service service) {\r\n        if (contextBuilt)\r\n            return;\r\n        super.initialize(service);\r\n        globalContextClasses.addAll(getContextClasses());\r\n        super.setContext(null);\r\n    }\r\n\r\n    public void compileGlobalJAXBContext() {\r\n        if (contextBuilt) return;\r\n        setContext(JAXBContext.newInstance(globalContextClasses));\r\n        contextBuilt *equals* true; \r\n    }\r\n\r\nFor some strange reason the editor didn&#39;t let me add the equal sign in the last line of compileGlobalJAXBContext so just replace the equals word with the relevant sign.\r\n\r\n\r\n  [1]: http://web.archive.org/web/20200204075513/http://cxf.547215.n5.nabble.com/Reuse-JAXB-context-in-jaxws-td5715356.html","title":"Reuse CXF jaxb context between multiple services","body":"<p>One possible way to solve it is by adding the following to the spring configuration:</p>\n<pre><code>&lt;bean class=&quot;org.apache.cxf.jaxb.JAXBDataBinding&quot; &gt;\n    &lt;constructor-arg index=&quot;0&quot; value=&quot;#{GlobalContextBean.context}&quot;/&gt;\n&lt;/bean&gt;\n</code></pre>\n<p>Where the value is just a reference to a bean which holds the global (single) JAXBContext and has the following method:</p>\n<pre><code>public javax.xml.bind.JAXBContext getContext() {...}\n</code></pre>\n<p>You can see more details (including the CXF guru Daniel Kulp inputs) in the following thread:<br />\n<a href=\"http://web.archive.org/web/20200204075513/http://cxf.547215.n5.nabble.com/Reuse-JAXB-context-in-jaxws-td5715356.html\" rel=\"nofollow noreferrer\">Reuse-JAXB-context-in-jaxws</a></p>\n<p>After testing it I've discovered that setting the current JAXBDataBinding as a global instance for multiple services won't work since there is an &quot;if&quot; statement in its initialize method which returns once the context was set by the first service.<br />\nThat's why I've ended up by extending the class and collecting all the required services classes and model ones. After all services initialization ends, I create a global context with all required classes and return it to all services.<br />\nYou can use the following class.<br />\nAfter all your web services are initialized call the compileGlobalJAXBContext method for creating the global context. You can add there other classes which the application needs and the init missed.<br />\nDon't Forget to configure the services to work with this bean.</p>\n<pre><code>public class GlobalJAXBDataBinding extends JAXBDataBinding\n{\nprivate Set&lt;Class&lt;?&gt;&gt; globalContextClasses;\nprivate boolean contextBuilt = false;\n\npublic GlobalJAXBDataBinding(Set&lt;Class&lt;?&gt;&gt; classes) {\n    globalContextClasses = new HashSet&lt;&gt;(classes);\n    globalContextClasses.add(CPUUID.class);\n}\n\npublic GlobalJAXBDataBinding() {\n}\n\n}\n\npublic synchronized void initialize(Service service) {\n    if (contextBuilt)\n        return;\n    super.initialize(service);\n    globalContextClasses.addAll(getContextClasses());\n    super.setContext(null);\n}\n\npublic void compileGlobalJAXBContext() {\n    if (contextBuilt) return;\n    setContext(JAXBContext.newInstance(globalContextClasses));\n    contextBuilt *equals* true; \n}\n</code></pre>\n<p>For some strange reason the editor didn't let me add the equal sign in the last line of compileGlobalJAXBContext so just replace the equals word with the relevant sign.</p>\n"}],"owner":{"account_id":888697,"reputation":6671,"user_id":927477,"accept_rate":77,"display_name":"Avner Levy"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3885,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"accepted_answer_id":12703547,"answer_count":1,"score":10,"last_activity_date":1696681610,"creation_date":1349169246,"question_id":12687528,"body_markdown":"I have multiple services which can return results out of thousands of classes.   \r\nSince each CXF service contains a private almost identical JAXB context, it causes a huge memory waste.  \r\nIs there a way to create the JAXB context myself and share it between the services?","title":"Reuse CXF jaxb context between multiple services","body":"<p>I have multiple services which can return results out of thousands of classes.<br>\nSince each CXF service contains a private almost identical JAXB context, it causes a huge memory waste.<br>\nIs there a way to create the JAXB context myself and share it between the services?</p>\n"},{"tags":["java","jar","executable","launch4j"],"comments":[{"owner":{"account_id":255453,"reputation":3554,"user_id":535515,"accept_rate":100,"display_name":"Gus"},"score":1,"creation_date":1435706836,"post_id":31150142,"comment_id":50310463,"body_markdown":"Here&#39;s another question.  Its answer may not help you, but there&#39;s a comment that indicates removing the `&lt;classpath&gt;` configuration entry helped.  http://stackoverflow.com/questions/2068133/launch4j-exe-has-nothing-to-say-for-itself-anyone-got-a-suggestion","body":"Here&#39;s another question.  Its answer may not help you, but there&#39;s a comment that indicates removing the <code>&lt;classpath&gt;</code> configuration entry helped.  <a href=\"http://stackoverflow.com/questions/2068133/launch4j-exe-has-nothing-to-say-for-itself-anyone-got-a-suggestion\" title=\"launch4j exe has nothing to say for itself anyone got a suggestion\">stackoverflow.com/questions/2068133/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":6554030,"reputation":121,"user_id":5067396,"display_name":"csw"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1435708770,"creation_date":1435708770,"answer_id":31150484,"question_id":31150142,"body_markdown":"I found the issue. Under Header, I had to switch the Header type from GUI to Console. After that I was able to run the exe.","title":"The .exe I created with Launch4j doesn&#39;t run","body":"<p>I found the issue. Under Header, I had to switch the Header type from GUI to Console. After that I was able to run the exe.</p>\n"},{"tags":[],"owner":{"account_id":6306781,"reputation":145,"user_id":4899649,"display_name":"shraddha bhardwaj"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1454496296,"creation_date":1454496296,"answer_id":35174857,"question_id":31150142,"body_markdown":"You may be accepting something as a command line argument which may be throwing an error like in my case .","title":"The .exe I created with Launch4j doesn&#39;t run","body":"<p>You may be accepting something as a command line argument which may be throwing an error like in my case .</p>\n"},{"tags":[],"owner":{"account_id":4685441,"reputation":11,"user_id":3792962,"display_name":"ipapagi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1610956433,"creation_date":1610956433,"answer_id":65770612,"question_id":31150142,"body_markdown":"For my case, it was the tick on &quot;Signle Instance&quot; tab: Allow only a single instance of the application.\r\nAlthough I had killed the process, for some unknown reason the exe had been recognized as alive. Thus, a reboot of the PC is recommended.","title":"The .exe I created with Launch4j doesn&#39;t run","body":"<p>For my case, it was the tick on &quot;Signle Instance&quot; tab: Allow only a single instance of the application.\nAlthough I had killed the process, for some unknown reason the exe had been recognized as alive. Thus, a reboot of the PC is recommended.</p>\n"},{"tags":[],"owner":{"account_id":2562742,"reputation":5917,"user_id":2851311,"display_name":"hfontanez"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649077766,"creation_date":1648850497,"answer_id":71713145,"question_id":31150142,"body_markdown":"These are the things I had to do for it to work on Windows 10:\r\n\r\nFirst, make sure the executable JAR you created actually executes. I could never got the JAR to execute by double-clicking. Instead, I created a `.bat` file where I added the `java -jar` command-line instruction to execute the jar, including the VM arguments. For example, to execute `foo.jar`, the `.bat` file should contain `java -jar --module-path %FX_HOME% --add-modules javafx.controls,javafx.fxml foo.jar`. Once you get the JAR to execute without errors (pay attention to the command prompt window), then your JAR is ready. Then, do the following from the Launch4J app: \r\n\r\n 1. Create ***FX_HOME*** environment variable. Make sure it points to the *lib* folder of the downloaded Java FX distribution is located.*\r\n 2. Set ***JAVA_HOME*** environment variable.*\r\n 3. Make sure ***JAVA_HOME*** is the first entry on the *Path* variable. Verify by opening a command prompt and typing *`where java`* and hitting the *ENTER* key.\r\n 4. Under Header, make sure &quot;*GUI*&quot; is selected.\r\n 5. Under JRE, set *Bundled JRE paths* to *%JAVA_HOME%*.\r\n 6. Under *VM Option*, enter `--module-path %FX_HOME% --add-modules javafx.controls,javafx.fxml`\r\n\r\n*If any of the paths contain spaces, make sure they are in quotes when you create the environment variable. For example: C:\\Program Files\\Java 17\\bin, should be in quotes. This is because the command-line parameters are space-delimited and &quot;Program Files&quot; contains a space, fooling the command-line interpreter to think *Program* is the end of one parameter and *Files* is the beginning of another. By putting in quotes, the interpreter now knows the space is part of that single parameter that represents the path.","title":"The .exe I created with Launch4j doesn&#39;t run","body":"<p>These are the things I had to do for it to work on Windows 10:</p>\n<p>First, make sure the executable JAR you created actually executes. I could never got the JAR to execute by double-clicking. Instead, I created a <code>.bat</code> file where I added the <code>java -jar</code> command-line instruction to execute the jar, including the VM arguments. For example, to execute <code>foo.jar</code>, the <code>.bat</code> file should contain <code>java -jar --module-path %FX_HOME% --add-modules javafx.controls,javafx.fxml foo.jar</code>. Once you get the JAR to execute without errors (pay attention to the command prompt window), then your JAR is ready. Then, do the following from the Launch4J app:</p>\n<ol>\n<li>Create <em><strong>FX_HOME</strong></em> environment variable. Make sure it points to the <em>lib</em> folder of the downloaded Java FX distribution is located.*</li>\n<li>Set <em><strong>JAVA_HOME</strong></em> environment variable.*</li>\n<li>Make sure <em><strong>JAVA_HOME</strong></em> is the first entry on the <em>Path</em> variable. Verify by opening a command prompt and typing <em><code>where java</code></em> and hitting the <em>ENTER</em> key.</li>\n<li>Under Header, make sure &quot;<em>GUI</em>&quot; is selected.</li>\n<li>Under JRE, set <em>Bundled JRE paths</em> to <em>%JAVA_HOME%</em>.</li>\n<li>Under <em>VM Option</em>, enter <code>--module-path %FX_HOME% --add-modules javafx.controls,javafx.fxml</code></li>\n</ol>\n<p>*If any of the paths contain spaces, make sure they are in quotes when you create the environment variable. For example: C:\\Program Files\\Java 17\\bin, should be in quotes. This is because the command-line parameters are space-delimited and &quot;Program Files&quot; contains a space, fooling the command-line interpreter to think <em>Program</em> is the end of one parameter and <em>Files</em> is the beginning of another. By putting in quotes, the interpreter now knows the space is part of that single parameter that represents the path.</p>\n"},{"tags":[],"owner":{"account_id":6184830,"reputation":11,"user_id":17621044,"display_name":"tans flou"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696681511,"creation_date":1695162456,"answer_id":77138283,"question_id":31150142,"body_markdown":"In my case, under Basic tab in Options section I checked &quot;Stay alive after launching GUI application&quot; (this doesn&#39;t work).\r\n\r\nInstead I switched to jSmooth.","title":"The .exe I created with Launch4j doesn&#39;t run","body":"<p>In my case, under Basic tab in Options section I checked &quot;Stay alive after launching GUI application&quot; (this doesn't work).</p>\n<p>Instead I switched to jSmooth.</p>\n"}],"owner":{"account_id":6554030,"reputation":121,"user_id":5067396,"display_name":"csw"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":12513,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":5,"score":5,"last_activity_date":1696681511,"creation_date":1435706451,"question_id":31150142,"body_markdown":"I was able to successfully create a .exe file from an executable jar. From Launch4j I can test the wrapper, and the output on the log is what I expect. However if I try to run the exe from the command line or from Windows Explorer, nothing happens. No error, no output to the console as expected. The program is also supposed to edit a text file which does happen when I run the jar using a batch file, but not when I run the exe. This is all on the same computer so I doubt it is a problem with the JRE. I have searched StackOverflow extensively but found nothing that helps with this situation. I did find this post with a similar problem: https://stackoverflow.com/questions/27192240/launch4j-executable-not-executing-as-expected but nobody actually answered the question. Thank you in advance for helping","title":"The .exe I created with Launch4j doesn&#39;t run","body":"<p>I was able to successfully create a .exe file from an executable jar. From Launch4j I can test the wrapper, and the output on the log is what I expect. However if I try to run the exe from the command line or from Windows Explorer, nothing happens. No error, no output to the console as expected. The program is also supposed to edit a text file which does happen when I run the jar using a batch file, but not when I run the exe. This is all on the same computer so I doubt it is a problem with the JRE. I have searched StackOverflow extensively but found nothing that helps with this situation. I did find this post with a similar problem: <a href=\"https://stackoverflow.com/questions/27192240/launch4j-executable-not-executing-as-expected\">Launch4J executable not executing as expected</a> but nobody actually answered the question. Thank you in advance for helping</p>\n"},{"tags":["java","rest","servlets","selenium-webdriver","web-api-testing"],"comments":[{"owner":{"account_id":4595854,"reputation":978,"user_id":3727942,"display_name":"Spoke44"},"score":1,"creation_date":1498725891,"post_id":44820297,"comment_id":76620658,"body_markdown":"For UI testing you must not do api calls. Mock them. You can&#39;t rely on network for UI tests.","body":"For UI testing you must not do api calls. Mock them. You can&#39;t rely on network for UI tests."},{"owner":{"account_id":10678688,"reputation":83,"user_id":7861421,"accept_rate":33,"display_name":"codefemme"},"score":0,"creation_date":1498726846,"post_id":44820297,"comment_id":76621351,"body_markdown":"for few of test cases in my UI testing, I need the response from api&#39;s. This is the reason, basically for functionality testing.","body":"for few of test cases in my UI testing, I need the response from api&#39;s. This is the reason, basically for functionality testing."}],"answers":[{"tags":[],"owner":{"account_id":10678688,"reputation":83,"user_id":7861421,"accept_rate":33,"display_name":"codefemme"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1696681253,"creation_date":1499071737,"answer_id":44881296,"question_id":44820297,"body_markdown":"Here is the solution:\r\nchanged,  \r\n   \r\n\r\n     request.setHeader(&quot;Cookie&quot;, SessionId.toString());\r\n\r\nto\r\n\r\n     request.setHeader(&quot;sessionId&quot;, SessionId.toString());\r\n\r\nThis was mentioned in the API document given by the API team. \r\nThen the session ID is given as output from the previous API call, which needs to be passed in the subsequent API calls. I had no idea about this since I am new to API testing. Hope my answer helps someone in a similar situation!!\r\n","title":"Java: how to pass session id for rest api call in api testing?","body":"<p>Here is the solution:\nchanged,</p>\n<pre><code> request.setHeader(&quot;Cookie&quot;, SessionId.toString());\n</code></pre>\n<p>to</p>\n<pre><code> request.setHeader(&quot;sessionId&quot;, SessionId.toString());\n</code></pre>\n<p>This was mentioned in the API document given by the API team.\nThen the session ID is given as output from the previous API call, which needs to be passed in the subsequent API calls. I had no idea about this since I am new to API testing. Hope my answer helps someone in a similar situation!!</p>\n"}],"owner":{"account_id":10678688,"reputation":83,"user_id":7861421,"accept_rate":33,"display_name":"codefemme"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7828,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1696681253,"creation_date":1498725855,"question_id":44820297,"body_markdown":"For UI automation testing, I need to do REST Api calls, to get the response. I am passing session id into the HEADER by request.setheader, but I recieved response as :\r\n\r\n    {&quot;result&quot;:{&quot;success&quot;:false,&quot;httpCode&quot;:200,&quot;errorCode&quot;:&quot;INVALID_SESSION_ID&quot;,&quot;errorMessage&quot;:&quot;Session ID not provided... Kindly Login !!&quot;}}\r\n\r\nI have tried displaying session id and it seems to be fine, What I don&#39;t understand is, why it is not been passed to the API. Below is the code:\r\n\r\n\t    HttpClient httpClient = HttpClientBuilder.create().build();\r\n\t\t\t    HttpGet request = new HttpGet(getUrl);\r\n\t\t\t\r\n\t\t\t    SessionId SessionId = ((FirefoxDriver)driver).getSessionId();\r\n    \t\t     request.setHeader(&quot;Cookie&quot;, SessionId.toString());\r\n\t  \t         HttpResponse response = httpClient.execute(request);\r\n\t\t\t \r\n\t\t\t       InputStream ips  = response.getEntity().getContent();\r\n\t\t           BufferedReader buf = new BufferedReader(new InputStreamReader(ips,&quot;UTF-8&quot;));\r\n\t\t           if(response.getStatusLine().getStatusCode()!=HttpStatus.SC_OK)\r\n\t\t           {\r\n\t\t               throw new Exception(response.getStatusLine().getReasonPhrase());\r\n\t\t           }\r\n\t\t           StringBuilder sb = new StringBuilder();\r\n\t\t           String s;\r\n\t\t           while(true )\r\n\t\t           {\r\n\t\t               s = buf.readLine();\r\n\t\t               if(s==null || s.length()==0)\r\n\t\t                   break;\r\n\t\t               sb.append(s);\r\n\r\n\t\t           }\r\n\t\t           buf.close();\r\n\t\t           ips.close();\r\n\t\t           System.out.println(&quot;After parsing: &quot;+sb.toString());\r\n\r\nOutput:\r\nAfter parsing: strong text\r\n\r\n    {&quot;result&quot;:{&quot;success&quot;:false,&quot;httpCode&quot;:200,&quot;errorCode&quot;:&quot;INVALID_SESSION_ID&quot;,&quot;errorMessage&quot;:&quot;Session ID not provided... Kindly Login !!&quot;}}\r\n\r\n","title":"Java: how to pass session id for rest api call in api testing?","body":"<p>For UI automation testing, I need to do REST Api calls, to get the response. I am passing session id into the HEADER by request.setheader, but I recieved response as :</p>\n\n<pre><code>{\"result\":{\"success\":false,\"httpCode\":200,\"errorCode\":\"INVALID_SESSION_ID\",\"errorMessage\":\"Session ID not provided... Kindly Login !!\"}}\n</code></pre>\n\n<p>I have tried displaying session id and it seems to be fine, What I don't understand is, why it is not been passed to the API. Below is the code:</p>\n\n<pre><code>    HttpClient httpClient = HttpClientBuilder.create().build();\n            HttpGet request = new HttpGet(getUrl);\n\n            SessionId SessionId = ((FirefoxDriver)driver).getSessionId();\n             request.setHeader(\"Cookie\", SessionId.toString());\n             HttpResponse response = httpClient.execute(request);\n\n               InputStream ips  = response.getEntity().getContent();\n               BufferedReader buf = new BufferedReader(new InputStreamReader(ips,\"UTF-8\"));\n               if(response.getStatusLine().getStatusCode()!=HttpStatus.SC_OK)\n               {\n                   throw new Exception(response.getStatusLine().getReasonPhrase());\n               }\n               StringBuilder sb = new StringBuilder();\n               String s;\n               while(true )\n               {\n                   s = buf.readLine();\n                   if(s==null || s.length()==0)\n                       break;\n                   sb.append(s);\n\n               }\n               buf.close();\n               ips.close();\n               System.out.println(\"After parsing: \"+sb.toString());\n</code></pre>\n\n<p>Output:\nAfter parsing: strong text</p>\n\n<pre><code>{\"result\":{\"success\":false,\"httpCode\":200,\"errorCode\":\"INVALID_SESSION_ID\",\"errorMessage\":\"Session ID not provided... Kindly Login !!\"}}\n</code></pre>\n"},{"tags":["java","android","keyboard","hide"],"comments":[{"owner":{"account_id":2032092,"reputation":36381,"user_id":1815485,"display_name":"A--C"},"score":0,"creation_date":1354050912,"post_id":13593069,"comment_id":18632676,"body_markdown":"You can hide it for the whole Activity, this sums it up nicely:\nhttp://stackoverflow.com/questions/7789514/how-to-get-activitys-windowtoken-without-view","body":"You can hide it for the whole Activity, this sums it up nicely: <a href=\"http://stackoverflow.com/questions/7789514/how-to-get-activitys-windowtoken-without-view\" title=\"how to get activitys windowtoken without view\">stackoverflow.com/questions/7789514/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":287192,"reputation":2548,"user_id":586859,"accept_rate":100,"display_name":"burmat"},"down_vote_count":0,"up_vote_count":63,"is_accepted":true,"score":63,"last_activity_date":1470653644,"creation_date":1354051045,"answer_id":13593232,"question_id":13593069,"body_markdown":"You could instead set it to your layout, ie:\r\n\r\n    LinearLayout mainLayout;\r\n    \r\n    // Get your layout set up, this is just an example\r\n    mainLayout = (LinearLayout)findViewById(R.id.myLinearLayout);\r\n    \r\n    // Then just use the following:\r\n    InputMethodManager imm = (InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE);\r\n    imm.hideSoftInputFromWindow(mainLayout.getWindowToken(), 0);\r\n\r\nThis is an example assuming that your layout will be created regardless of how many `EditText` objects (or other objects) are placed on it.\r\n\r\nEdit: Also, something I find very useful is to make sure that the keyboard is hidden when an activity first launches (ie: if an `EditText` is the first thing focused).  To do that, I put this in `onCreate()` method of Activity:\r\n\r\n     this.getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_HIDDEN);\r\n","title":"Android:Hide keyboard after button click","body":"<p>You could instead set it to your layout, ie:</p>\n\n<pre><code>LinearLayout mainLayout;\n\n// Get your layout set up, this is just an example\nmainLayout = (LinearLayout)findViewById(R.id.myLinearLayout);\n\n// Then just use the following:\nInputMethodManager imm = (InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE);\nimm.hideSoftInputFromWindow(mainLayout.getWindowToken(), 0);\n</code></pre>\n\n<p>This is an example assuming that your layout will be created regardless of how many <code>EditText</code> objects (or other objects) are placed on it.</p>\n\n<p>Edit: Also, something I find very useful is to make sure that the keyboard is hidden when an activity first launches (ie: if an <code>EditText</code> is the first thing focused).  To do that, I put this in <code>onCreate()</code> method of Activity:</p>\n\n<pre><code> this.getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_HIDDEN);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3128230,"reputation":1686,"user_id":2646705,"display_name":"Prashant Maheshwari Andro"},"down_vote_count":0,"up_vote_count":57,"is_accepted":false,"score":57,"last_activity_date":1457731153,"creation_date":1417437407,"answer_id":27228592,"question_id":13593069,"body_markdown":"**Dont forget to use try catch blog because in case when your keyboard not open and if you use key key board hide code app will crash**\t\r\n\r\n       \r\n    try {\r\n        InputMethodManager imm = (InputMethodManager)getSystemService(INPUT_METHOD_SERVICE);\r\n        imm.hideSoftInputFromWindow(getCurrentFocus().getWindowToken(), 0);\r\n    } catch (Exception e) {\r\n        // TODO: handle exception\r\n    }","title":"Android:Hide keyboard after button click","body":"<p><strong>Dont forget to use try catch blog because in case when your keyboard not open and if you use key key board hide code app will crash</strong> </p>\n\n<pre><code>try {\n    InputMethodManager imm = (InputMethodManager)getSystemService(INPUT_METHOD_SERVICE);\n    imm.hideSoftInputFromWindow(getCurrentFocus().getWindowToken(), 0);\n} catch (Exception e) {\n    // TODO: handle exception\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4129207,"reputation":75209,"user_id":3395198,"accept_rate":54,"display_name":"IntelliJ Amiya"},"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1515999560,"creation_date":1437726341,"answer_id":31605632,"question_id":13593069,"body_markdown":"You can hide the keyboard using the following code, probably on the **Button click Event :**\r\n\r\n    //================ Hide Virtual Key Board When  Clicking==================//\r\n    \r\n    InputMethodManager imm = (InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE);\r\n    imm.hideSoftInputFromWindow(&quot;Your Button/EditText Object&quot;.getWindowToken(), InputMethodManager.RESULT_UNCHANGED_SHOWN);\r\n    \r\n    //======== Hide Virtual Keyboard =====================//\r\n\r\n","title":"Android:Hide keyboard after button click","body":"<p>You can hide the keyboard using the following code, probably on the <strong>Button click Event :</strong></p>\n\n<pre><code>//================ Hide Virtual Key Board When  Clicking==================//\n\nInputMethodManager imm = (InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE);\nimm.hideSoftInputFromWindow(\"Your Button/EditText Object\".getWindowToken(), InputMethodManager.RESULT_UNCHANGED_SHOWN);\n\n//======== Hide Virtual Keyboard =====================//\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5547491,"reputation":3378,"user_id":4401692,"accept_rate":0,"display_name":"Pankaj Talaviya"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1477460672,"creation_date":1477460672,"answer_id":40254574,"question_id":13593069,"body_markdown":"You use this code\r\n\r\n    // Check if no view has focus:\r\n    View view = this.getCurrentFocus();\r\n    if (view != null) {  \r\n        InputMethodManager imm = (InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE);\r\n        imm.hideSoftInputFromWindow(view.getWindowToken(), 0);\r\n    }","title":"Android:Hide keyboard after button click","body":"<p>You use this code</p>\n\n<pre><code>// Check if no view has focus:\nView view = this.getCurrentFocus();\nif (view != null) {  \n    InputMethodManager imm = (InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE);\n    imm.hideSoftInputFromWindow(view.getWindowToken(), 0);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8622629,"reputation":97,"user_id":6456951,"display_name":"Binayak Banerjee"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1486718965,"creation_date":1486718965,"answer_id":42155842,"question_id":13593069,"body_markdown":"If the problem is on an activity simply the following will work:\r\n\r\n        try {\r\n            InputMethodManager imm = (InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE);\r\n            imm.hideSoftInputFromWindow(getCurrentFocus().getWindowToken(), 0);\r\n        } catch (Exception e) {\r\n            // TODO: handle exception\r\n        }\r\n        \r\n\r\nelse if the code is required in a fragment do the following\r\n\r\n        try {\r\n            InputMethodManager imm = (InputMethodManager)getActivity().getSystemService(Context.INPUT_METHOD_SERVICE);\r\n            imm.hideSoftInputFromWindow(getActivity().getCurrentFocus().getWindowToken(), 0);\r\n        } catch (Exception e) {\r\n            // TODO: handle exception\r\n        }\r\n\r\nThis will handle the hiding of keyboard on a button click or any other event as deemed specific when written within the event block.","title":"Android:Hide keyboard after button click","body":"<p>If the problem is on an activity simply the following will work:</p>\n\n<pre><code>    try {\n        InputMethodManager imm = (InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE);\n        imm.hideSoftInputFromWindow(getCurrentFocus().getWindowToken(), 0);\n    } catch (Exception e) {\n        // TODO: handle exception\n    }\n</code></pre>\n\n<p>else if the code is required in a fragment do the following</p>\n\n<pre><code>    try {\n        InputMethodManager imm = (InputMethodManager)getActivity().getSystemService(Context.INPUT_METHOD_SERVICE);\n        imm.hideSoftInputFromWindow(getActivity().getCurrentFocus().getWindowToken(), 0);\n    } catch (Exception e) {\n        // TODO: handle exception\n    }\n</code></pre>\n\n<p>This will handle the hiding of keyboard on a button click or any other event as deemed specific when written within the event block.</p>\n"},{"tags":[],"owner":{"account_id":9200745,"reputation":81,"user_id":6837793,"display_name":"Francesco O&#39;Bioh D&#39;Agostino"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1491932416,"creation_date":1491930512,"answer_id":43352233,"question_id":13593069,"body_markdown":"    InputMethodManager inputManager = (InputMethodManager) getActivity().getSystemService(Context.INPUT_METHOD_SERVICE);\r\n    inputManager.hideSoftInputFromWindow(rootView.getWindowToken(), 0);","title":"Android:Hide keyboard after button click","body":"<pre><code>InputMethodManager inputManager = (InputMethodManager) getActivity().getSystemService(Context.INPUT_METHOD_SERVICE);\ninputManager.hideSoftInputFromWindow(rootView.getWindowToken(), 0);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9089962,"reputation":3525,"user_id":6766264,"accept_rate":0,"display_name":"Makvin"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1510221228,"creation_date":1510221228,"answer_id":47198722,"question_id":13593069,"body_markdown":"    edittext.onEditorAction(EditorInfo.IME_ACTION_DONE);","title":"Android:Hide keyboard after button click","body":"<pre><code>edittext.onEditorAction(EditorInfo.IME_ACTION_DONE);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":69714,"reputation":6669,"user_id":202705,"accept_rate":56,"display_name":"magallanes"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1549579018,"creation_date":1549579018,"answer_id":54583382,"question_id":13593069,"body_markdown":"For the record and based in the answers of @burmat and @Prashant Maheshwari Andro\r\n\r\n\r\nLet&#39;s say that you call the click button as follow.  where buttonAndroidLogin_button is the Button object.\r\n\r\n\tprotected void onCreate(Bundle savedInstanceState) {\r\n        // your code...\r\n\t\tbuttonAndroidLogin_button.setOnClickListener(new View.OnClickListener() {\r\n\t\t\t@Override\r\n\t\t\tpublic void onClick(View v) {\r\n\t\t\t\thideKeyboard((Button)v);\r\n\t\t\t\t// ....\r\n\t} // end onCreate\r\n\r\nOn the activity, you must set the next method\r\n\r\n\tpublic void hideKeyboard(View view) {\r\n        try {\r\n            InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);\r\n            imm.hideSoftInputFromWindow(view.getWindowToken(), 0);\r\n        } catch(Exception ignored) {\r\n        }\r\n    }\r\n\r\n**It hides the input using the same button**, so we don&#39;t need any linear layout, text view or any other arbitrary control.  Also, the code is reusable for more buttons.","title":"Android:Hide keyboard after button click","body":"<p>For the record and based in the answers of @burmat and @Prashant Maheshwari Andro</p>\n\n<p>Let's say that you call the click button as follow.  where buttonAndroidLogin_button is the Button object.</p>\n\n<pre><code>protected void onCreate(Bundle savedInstanceState) {\n    // your code...\n    buttonAndroidLogin_button.setOnClickListener(new View.OnClickListener() {\n        @Override\n        public void onClick(View v) {\n            hideKeyboard((Button)v);\n            // ....\n} // end onCreate\n</code></pre>\n\n<p>On the activity, you must set the next method</p>\n\n<pre><code>public void hideKeyboard(View view) {\n    try {\n        InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);\n        imm.hideSoftInputFromWindow(view.getWindowToken(), 0);\n    } catch(Exception ignored) {\n    }\n}\n</code></pre>\n\n<p><strong>It hides the input using the same button</strong>, so we don't need any linear layout, text view or any other arbitrary control.  Also, the code is reusable for more buttons.</p>\n"},{"tags":[],"owner":{"account_id":13856648,"reputation":1610,"user_id":10003284,"display_name":"milad salimi"},"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1605621380,"creation_date":1600842391,"answer_id":64022163,"question_id":13593069,"body_markdown":"**IN KOTLIN :**\r\n\r\n**In your `fragment` :**\r\n\r\n**Create extension like this :**\r\n\r\n    fun Fragment.hideKeyboard() {\r\n        val imm = context?.getSystemService(Context.INPUT_METHOD_SERVICE) as InputMethodManager\r\n        imm.hideSoftInputFromWindow(requireView().windowToken, 0)\r\n    }\r\n\r\nThen use it like this :\r\n \r\n\r\n    hideKeyboard()\r\n\r\n**In your `activity` :**\r\n\r\n**Create extension like this :**\r\n\r\n    fun AppCompatActivity.hideKeyboard() {\r\n        val imm = this.getSystemService(Context.INPUT_METHOD_SERVICE) as InputMethodManager\r\n        imm.hideSoftInputFromWindow(this.window.attributes.token, 0)\r\n    }\r\n\r\nThen use it like this :\r\n\r\n       hideKeyboard()","title":"Android:Hide keyboard after button click","body":"<p><strong>IN KOTLIN :</strong></p>\n<p><strong>In your <code>fragment</code> :</strong></p>\n<p><strong>Create extension like this :</strong></p>\n<pre><code>fun Fragment.hideKeyboard() {\n    val imm = context?.getSystemService(Context.INPUT_METHOD_SERVICE) as InputMethodManager\n    imm.hideSoftInputFromWindow(requireView().windowToken, 0)\n}\n</code></pre>\n<p>Then use it like this :</p>\n<pre><code>hideKeyboard()\n</code></pre>\n<p><strong>In your <code>activity</code> :</strong></p>\n<p><strong>Create extension like this :</strong></p>\n<pre><code>fun AppCompatActivity.hideKeyboard() {\n    val imm = this.getSystemService(Context.INPUT_METHOD_SERVICE) as InputMethodManager\n    imm.hideSoftInputFromWindow(this.window.attributes.token, 0)\n}\n</code></pre>\n<p>Then use it like this :</p>\n<pre><code>   hideKeyboard()\n</code></pre>\n"},{"tags":[],"owner":{"account_id":28294809,"reputation":1,"user_id":21634415,"display_name":"Mohitkumar Soni"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696680816,"creation_date":1696416302,"answer_id":77228888,"question_id":13593069,"body_markdown":"This code is to remove keyboard from screen on Fragment.\r\n\r\n**The Code:**\r\n```\r\ntry {\r\n  InputMethodManager inputMethodManager = (InputMethodManager) requireActivity().getSystemService(Context.INPUT_METHOD_SERVICE);\r\n  inputMethodManager.hideSoftInputFromWindow(Objects.requireNonNull(requireActivity().getCurrentFocus()).getWindowToken(), 0);\r\n} catch (Exception e) {\r\n  Log.d(&quot;PROFILE KEYBOARD ERROR&quot;, e.toString());\r\n}\r\n```","title":"Android:Hide keyboard after button click","body":"<p>This code is to remove keyboard from screen on Fragment.</p>\n<p><strong>The Code:</strong></p>\n<pre><code>try {\n  InputMethodManager inputMethodManager = (InputMethodManager) requireActivity().getSystemService(Context.INPUT_METHOD_SERVICE);\n  inputMethodManager.hideSoftInputFromWindow(Objects.requireNonNull(requireActivity().getCurrentFocus()).getWindowToken(), 0);\n} catch (Exception e) {\n  Log.d(&quot;PROFILE KEYBOARD ERROR&quot;, e.toString());\n}\n</code></pre>\n"}],"owner":{"account_id":2059471,"reputation":545,"user_id":1836433,"accept_rate":50,"display_name":"Martin Shinks"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":85865,"favorite_count":0,"down_vote_count":0,"up_vote_count":38,"accepted_answer_id":13593232,"answer_count":10,"score":38,"last_activity_date":1696680816,"creation_date":1354050455,"question_id":13593069,"body_markdown":"I need to hide the android keyboard after a button click. \r\n\r\nI have seen many examples of how to do this, however, they all appear to use a specific editText object. \r\n\r\ne.g.\r\n\r\n    InputMethodManager imm = (InputMethodManager)getSystemService(\r\n          Context.INPUT_METHOD_SERVICE);\r\n    imm.hideSoftInputFromWindow(myEditText.getWindowToken(), 0);\r\n\r\nMy problem is that I am building the screen dynamically, thus there could be mane edit text fields. Is there a way the keyboard can be hidden without me having to specify which editText object I am hiding it for. \r\n","title":"Android:Hide keyboard after button click","body":"<p>I need to hide the android keyboard after a button click. </p>\n\n<p>I have seen many examples of how to do this, however, they all appear to use a specific editText object. </p>\n\n<p>e.g.</p>\n\n<pre><code>InputMethodManager imm = (InputMethodManager)getSystemService(\n      Context.INPUT_METHOD_SERVICE);\nimm.hideSoftInputFromWindow(myEditText.getWindowToken(), 0);\n</code></pre>\n\n<p>My problem is that I am building the screen dynamically, thus there could be mane edit text fields. Is there a way the keyboard can be hidden without me having to specify which editText object I am hiding it for. </p>\n"},{"tags":["java","spring","openapi","spring-webclient","openapi-generator"],"comments":[{"owner":{"account_id":12455565,"reputation":5317,"user_id":9068895,"display_name":"Alex"},"score":0,"creation_date":1652106902,"post_id":72142403,"comment_id":127519494,"body_markdown":"could you share more details about OpenAPI generator you are using and probably generated code for the WebClient? In case of &quot;non-standard&quot; content types, you need to provide encoder/decoder using `ClientCodecConfigurer` `clientCodecConfigurer.customCodecs().decoder(...)`.","body":"could you share more details about OpenAPI generator you are using and probably generated code for the WebClient? In case of &quot;non-standard&quot; content types, you need to provide encoder/decoder using <code>ClientCodecConfigurer</code> <code>clientCodecConfigurer.customCodecs().decoder(...)</code>."},{"owner":{"account_id":3498606,"reputation":5166,"user_id":2925962,"accept_rate":0,"display_name":"akortex"},"score":0,"creation_date":1652110575,"post_id":72142403,"comment_id":127521089,"body_markdown":"Details requested. The generator is the OpenAPI generator for Gradle version 5.4.0 as mentioned in my question. My current Gradle version is 7.4.1. I do not use any kind of custom content-types. My problem is that I am simply trying to instruct the generator to use abstracted file representations instead of the concrete `File` type as mentioned here https://openapi-generator.tech/docs/generators/java/#config-options","body":"Details requested. The generator is the OpenAPI generator for Gradle version 5.4.0 as mentioned in my question. My current Gradle version is 7.4.1. I do not use any kind of custom content-types. My problem is that I am simply trying to instruct the generator to use abstracted file representations instead of the concrete <code>File</code> type as mentioned here <a href=\"https://openapi-generator.tech/docs/generators/java/#config-options\" rel=\"nofollow noreferrer\">openapi-generator.tech/docs/generators/java/#config-options</a>"},{"owner":{"account_id":12455565,"reputation":5317,"user_id":9068895,"display_name":"Alex"},"score":0,"creation_date":1652111914,"post_id":72142403,"comment_id":127521602,"body_markdown":"Looking at the error, `application/zip` is a custom content type for WebClient. Also `Mono&lt;File&gt;` looks strange for body mapping. It&#39;s very hard to tell more without open api definition and generated code.","body":"Looking at the error, <code>application&#47;zip</code> is a custom content type for WebClient. Also <code>Mono&lt;File&gt;</code> looks strange for body mapping. It&#39;s very hard to tell more without open api definition and generated code."},{"owner":{"account_id":3498606,"reputation":5166,"user_id":2925962,"accept_rate":0,"display_name":"akortex"},"score":0,"creation_date":1652167713,"post_id":72142403,"comment_id":127534110,"body_markdown":"I think this is not a custom mapping and per their documentation this should be working fine. When using the Spring generator, everything works fine and maps to a `Mono&lt;Resource&gt;` which is OK. The problem occurs only when using the `WebClient` generator, which seems to ignore the flag in question.","body":"I think this is not a custom mapping and per their documentation this should be working fine. When using the Spring generator, everything works fine and maps to a <code>Mono&lt;Resource&gt;</code> which is OK. The problem occurs only when using the <code>WebClient</code> generator, which seems to ignore the flag in question."}],"answers":[{"tags":[],"owner":{"account_id":18907962,"reputation":321,"user_id":13794675,"display_name":"Alex Shavlovsky"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696678128,"creation_date":1696675620,"answer_id":77249439,"question_id":72142403,"body_markdown":"Based on test classes in openapi-generator, this property is intended to work with request body of the following type:\r\n\r\n      requestBody:\r\n        content:\r\n          multipart/form-data:\r\n            schema:\r\n              type: object\r\n              properties:\r\n                files:\r\n                  type: array\r\n                  description: &quot;Many files&quot;\r\n                  items:\r\n                    type: string\r\n                    format: binary\r\n\r\nYou can map File to any desired type like this:\r\n\r\n    openApiGenerate {\r\n        typeMappings = [&#39;File&#39;: &#39;byte[]&#39;]\r\n    }","title":"useAbstractionForFiles OpenAPI WebClient not working","body":"<p>Based on test classes in openapi-generator, this property is intended to work with request body of the following type:</p>\n<pre><code>  requestBody:\n    content:\n      multipart/form-data:\n        schema:\n          type: object\n          properties:\n            files:\n              type: array\n              description: &quot;Many files&quot;\n              items:\n                type: string\n                format: binary\n</code></pre>\n<p>You can map File to any desired type like this:</p>\n<pre><code>openApiGenerate {\n    typeMappings = ['File': 'byte[]']\n}\n</code></pre>\n"}],"owner":{"account_id":3498606,"reputation":5166,"user_id":2925962,"accept_rate":0,"display_name":"akortex"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":772,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1696678128,"creation_date":1651844288,"question_id":72142403,"body_markdown":"I am using OpenAPI generator (Gradle plugin version 5.4.0) to generate a few API calls. One of said calls, revolves a file download from an external service i.e my application calls that one and downloads and then should proxy the event. For that API call my returned `content-type` is set to `application-zip`. When invoking that API directly (i.e from a browser) everything works OK.\r\n\r\nUsing that API definition, I am trying to generate a WebClient to be used by another project that will effectively download that file. Doing so I am facing the following problems:\r\n\r\n 1. Whenever I try to invoke the API to download the file I am getting the following error: `nested exception is org.springframework.web.reactive.function.UnsupportedMediaTypeException: Content type &#39;application/zip&#39; not supported for bodyType=java.io.File`\r\n\r\n 2. My generated `WebClient` seems to return a `Mono&lt;File&gt;` instead of some other object instance. I tried to disable this behavior by setting the following openapi generator configuration option `useAbstractionForFiles` but is seems to get ignored.\r\n\r\n\r\nCan anyone shed some light as to how I can resolve this issue? For reference here is my OpenAPI Gradle Plugin configuration options:\r\n\r\n```\r\n\tconfigOptions = [\r\n\t\t\tdateLibrary            : &#39;java8&#39;,\r\n\t\t\tserializationLibrary   : &#39;jackson&#39;,\r\n\t\t\tlibrary                : &#39;webclient&#39;,\r\n\t\t\tuseAbstractionForFiles : &#39;true&#39;,\r\n\t\t\tuseBeanValidation      : &quot;true&quot;,\r\n\t\t\tinterfaceOnly          : &quot;true&quot;,\r\n\t\t\tserializableModel      : &quot;true&quot;,\r\n\t\t\tuseTags                : &quot;true&quot;,\r\n\t\t\treactive               : &quot;true&quot;,\r\n\t\t\tsourceFolder           : &#39;src/main/java&#39;,\r\n\t\t\ttestFolder             : &#39;src/test/java&#39;\r\n\t]\r\n","title":"useAbstractionForFiles OpenAPI WebClient not working","body":"<p>I am using OpenAPI generator (Gradle plugin version 5.4.0) to generate a few API calls. One of said calls, revolves a file download from an external service i.e my application calls that one and downloads and then should proxy the event. For that API call my returned <code>content-type</code> is set to <code>application-zip</code>. When invoking that API directly (i.e from a browser) everything works OK.</p>\n<p>Using that API definition, I am trying to generate a WebClient to be used by another project that will effectively download that file. Doing so I am facing the following problems:</p>\n<ol>\n<li><p>Whenever I try to invoke the API to download the file I am getting the following error: <code>nested exception is org.springframework.web.reactive.function.UnsupportedMediaTypeException: Content type 'application/zip' not supported for bodyType=java.io.File</code></p>\n</li>\n<li><p>My generated <code>WebClient</code> seems to return a <code>Mono&lt;File&gt;</code> instead of some other object instance. I tried to disable this behavior by setting the following openapi generator configuration option <code>useAbstractionForFiles</code> but is seems to get ignored.</p>\n</li>\n</ol>\n<p>Can anyone shed some light as to how I can resolve this issue? For reference here is my OpenAPI Gradle Plugin configuration options:</p>\n<pre><code>    configOptions = [\n            dateLibrary            : 'java8',\n            serializationLibrary   : 'jackson',\n            library                : 'webclient',\n            useAbstractionForFiles : 'true',\n            useBeanValidation      : &quot;true&quot;,\n            interfaceOnly          : &quot;true&quot;,\n            serializableModel      : &quot;true&quot;,\n            useTags                : &quot;true&quot;,\n            reactive               : &quot;true&quot;,\n            sourceFolder           : 'src/main/java',\n            testFolder             : 'src/test/java'\n    ]\n</code></pre>\n"},{"tags":["java","android","android-studio"],"comments":[{"owner":{"account_id":195854,"reputation":159194,"user_id":438992,"accept_rate":90,"display_name":"Dave Newton"},"score":0,"creation_date":1696676861,"post_id":77249493,"comment_id":136185971,"body_markdown":"You should either make it abstract (doesn’t seem right) or implement abstract method &#39;onError(Exception)’ (seems right). This information was contained in the error message.","body":"You should either make it abstract (doesn’t seem right) or implement abstract method &#39;onError(Exception)’ (seems right). This information was contained in the error message."}],"answers":[{"tags":[],"owner":{"account_id":29520193,"reputation":857,"user_id":22623172,"display_name":"Vlad Guriev"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696677349,"creation_date":1696677349,"answer_id":77249520,"question_id":77249493,"body_markdown":"In the snippet the wrong signature of `onError()` is used, so the required method is not implemented. Please try replacing the line `public void onError() {` with `public void onError(Exception e) {`","title":"Class &#39;Anonymous class derived from Callback&#39; must either be declared abstract or implement abstract method &#39;onError(Exception)&#39; in &#39;Callback&#39;","body":"<p>In the snippet the wrong signature of <code>onError()</code> is used, so the required method is not implemented. Please try replacing the line <code>public void onError() {</code> with <code>public void onError(Exception e) {</code></p>\n"},{"tags":[],"owner":{"account_id":216120,"reputation":49213,"user_id":471160,"accept_rate":90,"display_name":"marcinj"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696677980,"creation_date":1696677980,"answer_id":77249554,"question_id":77249493,"body_markdown":"Error message is telling you that your anonymous class derived from Callback must implement the abstract method `onError(Exception)`. In your code, you have implemented `onError()` without an Exception parameter. You need to modify your onError method to take an Exception as a parameter. \r\n\r\n    @Override\r\n    public void onError(Exception e) {\r\n    //...\r\n    }\r\n\r\nsee for reference: https://square.github.io/picasso/2.x/picasso/com/squareup/picasso/Callback.html","title":"Class &#39;Anonymous class derived from Callback&#39; must either be declared abstract or implement abstract method &#39;onError(Exception)&#39; in &#39;Callback&#39;","body":"<p>Error message is telling you that your anonymous class derived from Callback must implement the abstract method <code>onError(Exception)</code>. In your code, you have implemented <code>onError()</code> without an Exception parameter. You need to modify your onError method to take an Exception as a parameter.</p>\n<pre><code>@Override\npublic void onError(Exception e) {\n//...\n}\n</code></pre>\n<p>see for reference: <a href=\"https://square.github.io/picasso/2.x/picasso/com/squareup/picasso/Callback.html\" rel=\"nofollow noreferrer\">https://square.github.io/picasso/2.x/picasso/com/squareup/picasso/Callback.html</a></p>\n"}],"owner":{"account_id":29101093,"reputation":1,"user_id":22292910,"display_name":"Fahim Rahman"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":2,"score":-1,"last_activity_date":1696677980,"creation_date":1696676685,"question_id":77249493,"body_markdown":"\r\nClass &#39;Anonymous class derived from Callback&#39; must either be declared abstract or implement abstract method &#39;onError(Exception)&#39; in &#39;Callback&#39;\r\n\r\nI am opening an old project. Now how to solve this problem?\r\n\r\nmy code is:\r\n\r\n     Picasso.get().load(p.getImageUrl()).into(iv, new Callback() {\r\n                        @Override\r\n                        public void onSuccess() {\r\n\r\n                            Bitmap bitmap = convertImageViewToBitmap(iv);\r\n                            Bitmap hiResBitmap = getResizedBitmap(bitmap, 600, 1000);\r\n                            iv.setImageBitmap(hiResBitmap);\r\n\r\n                            // iv.setImageBitmap(bitmap);\r\n                            iv.setVisibility(View.VISIBLE);\r\n                            //   saveImageAndSavePathToSharedPrefrence(bitmap, p.getPost_id());\r\n                            Log.i(TAG, &quot;onSuccess: From WebUrl &quot; + &quot; Position :  &quot; + position + &quot; PostId: &quot; + p.getPost_id() + &quot; Url : &quot; + p.getImageUrl());\r\n\r\n                            tvPhotoLink.setText(&quot;Photo Link&quot;);\r\n                            tvPhotoLink.setTextColor(Color.BLUE);\r\n                            tvPhotoLink.setOnClickListener(new View.OnClickListener() {\r\n                                @Override\r\n                                public void onClick(View view) {\r\n                                    go_to_website(p.getImageUrl());\r\n                                }\r\n                            });\r\n                            tvPhotoLink.setVisibility(View.VISIBLE);\r\n                        }\r\n\r\n                        @Override\r\n                        public void onError() {\r\n\r\n                            Log.i(TAG, &quot;onSuccess:3_0 Picasso Error: from Net  &quot; + &quot; Image Position Url is not Valid: &quot; + &quot;ImageUrl is :  &quot; + p.getImageUrl());\r\n\r\n                            tvPhotoLink.setVisibility(View.GONE);\r\n                            iv.setVisibility(View.GONE);\r\n\r\n                        }\r\n                    });\r\n\r\nI want to run the file and find the solution","title":"Class &#39;Anonymous class derived from Callback&#39; must either be declared abstract or implement abstract method &#39;onError(Exception)&#39; in &#39;Callback&#39;","body":"<p>Class 'Anonymous class derived from Callback' must either be declared abstract or implement abstract method 'onError(Exception)' in 'Callback'</p>\n<p>I am opening an old project. Now how to solve this problem?</p>\n<p>my code is:</p>\n<pre><code> Picasso.get().load(p.getImageUrl()).into(iv, new Callback() {\n                    @Override\n                    public void onSuccess() {\n\n                        Bitmap bitmap = convertImageViewToBitmap(iv);\n                        Bitmap hiResBitmap = getResizedBitmap(bitmap, 600, 1000);\n                        iv.setImageBitmap(hiResBitmap);\n\n                        // iv.setImageBitmap(bitmap);\n                        iv.setVisibility(View.VISIBLE);\n                        //   saveImageAndSavePathToSharedPrefrence(bitmap, p.getPost_id());\n                        Log.i(TAG, &quot;onSuccess: From WebUrl &quot; + &quot; Position :  &quot; + position + &quot; PostId: &quot; + p.getPost_id() + &quot; Url : &quot; + p.getImageUrl());\n\n                        tvPhotoLink.setText(&quot;Photo Link&quot;);\n                        tvPhotoLink.setTextColor(Color.BLUE);\n                        tvPhotoLink.setOnClickListener(new View.OnClickListener() {\n                            @Override\n                            public void onClick(View view) {\n                                go_to_website(p.getImageUrl());\n                            }\n                        });\n                        tvPhotoLink.setVisibility(View.VISIBLE);\n                    }\n\n                    @Override\n                    public void onError() {\n\n                        Log.i(TAG, &quot;onSuccess:3_0 Picasso Error: from Net  &quot; + &quot; Image Position Url is not Valid: &quot; + &quot;ImageUrl is :  &quot; + p.getImageUrl());\n\n                        tvPhotoLink.setVisibility(View.GONE);\n                        iv.setVisibility(View.GONE);\n\n                    }\n                });\n</code></pre>\n<p>I want to run the file and find the solution</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9880,"page":137,"page_size":100}
