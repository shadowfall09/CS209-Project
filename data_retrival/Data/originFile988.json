{"items":[{"tags":["java","embedded-jetty","jetty-9"],"answers":[{"tags":[],"owner":{"account_id":39574,"reputation":24267,"user_id":114226,"accept_rate":79,"display_name":"PeterMmm"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1402326645,"creation_date":1402326645,"answer_id":24123217,"question_id":24123120,"body_markdown":"Propably you have some config in XML files. XML can be well-formated or even checked against a [DTD][1]. If the DTD resides on the Internet and you don&#39;t have a connection the XMLParser may fail.\r\n\r\nCould be a typo in your XML config file, because the DTD are normally included in the JAR.\r\n\r\n\r\n\r\n  [1]: http://en.wikipedia.org/wiki/Document_type_definition","title":"Jetty http lookup when not connected to internet","body":"<p>Propably you have some config in XML files. XML can be well-formated or even checked against a <a href=\"http://en.wikipedia.org/wiki/Document_type_definition\" rel=\"nofollow\">DTD</a>. If the DTD resides on the Internet and you don't have a connection the XMLParser may fail.</p>\n\n<p>Could be a typo in your XML config file, because the DTD are normally included in the JAR.</p>\n"},{"tags":[],"owner":{"account_id":256434,"reputation":744,"user_id":537151,"accept_rate":50,"display_name":"rxx"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1664915867,"creation_date":1402382109,"answer_id":24134407,"question_id":24123120,"body_markdown":"Removing following dtd from web.xml solved this issue.\r\n\r\n    \r\n    &lt;!DOCTYPE web-app PUBLIC &quot;-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN&quot; &quot;http://java.sun.com/dtd/web-app_2_3.dtd&quot;&gt;","title":"Jetty http lookup when not connected to internet","body":"<p>Removing following dtd from web.xml solved this issue.</p>\n<pre><code>&lt;!DOCTYPE web-app PUBLIC &quot;-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN&quot; &quot;http://java.sun.com/dtd/web-app_2_3.dtd&quot;&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3417768,"reputation":1027,"user_id":2866161,"display_name":"SzB"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1487680370,"creation_date":1487680370,"answer_id":42367470,"question_id":24123120,"body_markdown":"Adding\r\n\r\n    &lt;dependency&gt;\r\n       &lt;groupId&gt;org.eclipse.jetty.toolchain&lt;/groupId&gt;\r\n        &lt;artifactId&gt;jetty-schemas&lt;/artifactId&gt;\r\n        &lt;version&gt;3.1&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nsolved the problem for me.\r\n\r\nSee: [https://issues.apache.org/jira/browse/BROOKLYN-197][1]\r\n\r\n\r\n  [1]: https://issues.apache.org/jira/browse/BROOKLYN-197","title":"Jetty http lookup when not connected to internet","body":"<p>Adding</p>\n\n<pre><code>&lt;dependency&gt;\n   &lt;groupId&gt;org.eclipse.jetty.toolchain&lt;/groupId&gt;\n    &lt;artifactId&gt;jetty-schemas&lt;/artifactId&gt;\n    &lt;version&gt;3.1&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>solved the problem for me.</p>\n\n<p>See: <a href=\"https://issues.apache.org/jira/browse/BROOKLYN-197\" rel=\"noreferrer\">https://issues.apache.org/jira/browse/BROOKLYN-197</a></p>\n"}],"owner":{"account_id":256434,"reputation":744,"user_id":537151,"accept_rate":50,"display_name":"rxx"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1620,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":24134407,"answer_count":3,"score":3,"last_activity_date":1664915867,"creation_date":1402326279,"question_id":24123120,"body_markdown":"I have an embedded jetty server, it is using jetty 9. I am trying to run it&#39;s local instance with host=localhost and port =8080, now when my machine is connected to internet it works well. But when it is not it throws the exception - Any idea how can I fix this?\r\n\r\n    java.net.UnknownHostException: java.sun.com\r\n\tat java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:178)\r\n\tat java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)\r\n\tat java.net.Socket.connect(Socket.java:579)\r\n\tat java.net.Socket.connect(Socket.java:528)\r\n\tat sun.net.NetworkClient.doConnect(NetworkClient.java:180)\r\n\tat sun.net.www.http.HttpClient.openServer(HttpClient.java:432)\r\n\tat sun.net.www.http.HttpClient.openServer(HttpClient.java:527)\r\n\tat sun.net.www.http.HttpClient.&lt;init&gt;(HttpClient.java:211)\r\n\tat sun.net.www.http.HttpClient.New(HttpClient.java:308)\r\n\tat sun.net.www.http.HttpClient.New(HttpClient.java:326)\r\n\tat sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:996)\r\n\tat sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:932)\r\n\tat sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:850)\r\n\tat sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1300)\r\n\tat com.sun.org.apache.xerces.internal.impl.XMLEntityManager.setupCurrentEntity(XMLEntityManager.java:637)\r\n\tat com.sun.org.apache.xerces.internal.impl.XMLEntityManager.startEntity(XMLEntityManager.java:1290)\r\n\tat com.sun.org.apache.xerces.internal.impl.XMLEntityManager.startDTDEntity(XMLEntityManager.java:1257)\r\n\tat com.sun.org.apache.xerces.internal.impl.XMLDTDScannerImpl.setInputSource(XMLDTDScannerImpl.java:262)\r\n\tat com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl$DTDDriver.dispatch(XMLDocumentScannerImpl.java:1162)\r\n\tat com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl$DTDDriver.next(XMLDocumentScannerImpl.java:1050)\r\n\tat com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl$PrologDriver.next(XMLDocumentScannerImpl.java:964)\r\n\tat com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:606)\r\n\tat com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.next(XMLNSDocumentScannerImpl.java:117)\r\n\tat com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:510)\r\n\tat com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:848)\r\n\tat com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:777)\r\n\tat com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:141)\r\n\tat com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(AbstractSAXParser.java:1213)\r\n\tat com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.parse(SAXParserImpl.java:649)\r\n\tat com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl.parse(SAXParserImpl.java:333)\r\n\tat org.eclipse.jetty.xml.XmlParser.parse(XmlParser.java:246)\r\n\tat org.eclipse.jetty.webapp.Descriptor.parse(Descriptor.java:65)\r\n\tat org.eclipse.jetty.webapp.WebDescriptor.parse(WebDescriptor.java:181)\r\n\tat org.eclipse.jetty.webapp.MetaData.setWebXml(MetaData.java:172)\r\n\tat org.eclipse.jetty.webapp.WebXmlConfiguration.preConfigure(WebXmlConfiguration.java:60)\r\n\tat org.eclipse.jetty.webapp.WebAppContext.preConfigure(WebAppContext.java:455)\r\n\tat org.eclipse.jetty.webapp.WebAppContext.doStart(WebAppContext.java:491)\r\n\tat org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:69)\r\n\tat org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:117)\r\n\tat org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:99)\r\n\tat org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:60)\r\n\tat org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:69)\r\n\tat org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:117)\r\n\tat org.eclipse.jetty.server.Server.start(Server.java:355)\r\n\tat org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:99)\r\n\tat org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:60)\r\n\tat org.eclipse.jetty.server.Server.doStart(Server.java:324)\r\n\tat org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:69)","title":"Jetty http lookup when not connected to internet","body":"<p>I have an embedded jetty server, it is using jetty 9. I am trying to run it's local instance with host=localhost and port =8080, now when my machine is connected to internet it works well. But when it is not it throws the exception - Any idea how can I fix this?</p>\n\n<pre><code>java.net.UnknownHostException: java.sun.com\nat java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:178)\nat java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)\nat java.net.Socket.connect(Socket.java:579)\nat java.net.Socket.connect(Socket.java:528)\nat sun.net.NetworkClient.doConnect(NetworkClient.java:180)\nat sun.net.www.http.HttpClient.openServer(HttpClient.java:432)\nat sun.net.www.http.HttpClient.openServer(HttpClient.java:527)\nat sun.net.www.http.HttpClient.&lt;init&gt;(HttpClient.java:211)\nat sun.net.www.http.HttpClient.New(HttpClient.java:308)\nat sun.net.www.http.HttpClient.New(HttpClient.java:326)\nat sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:996)\nat sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:932)\nat sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:850)\nat sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1300)\nat com.sun.org.apache.xerces.internal.impl.XMLEntityManager.setupCurrentEntity(XMLEntityManager.java:637)\nat com.sun.org.apache.xerces.internal.impl.XMLEntityManager.startEntity(XMLEntityManager.java:1290)\nat com.sun.org.apache.xerces.internal.impl.XMLEntityManager.startDTDEntity(XMLEntityManager.java:1257)\nat com.sun.org.apache.xerces.internal.impl.XMLDTDScannerImpl.setInputSource(XMLDTDScannerImpl.java:262)\nat com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl$DTDDriver.dispatch(XMLDocumentScannerImpl.java:1162)\nat com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl$DTDDriver.next(XMLDocumentScannerImpl.java:1050)\nat com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl$PrologDriver.next(XMLDocumentScannerImpl.java:964)\nat com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:606)\nat com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.next(XMLNSDocumentScannerImpl.java:117)\nat com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:510)\nat com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:848)\nat com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:777)\nat com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:141)\nat com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(AbstractSAXParser.java:1213)\nat com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.parse(SAXParserImpl.java:649)\nat com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl.parse(SAXParserImpl.java:333)\nat org.eclipse.jetty.xml.XmlParser.parse(XmlParser.java:246)\nat org.eclipse.jetty.webapp.Descriptor.parse(Descriptor.java:65)\nat org.eclipse.jetty.webapp.WebDescriptor.parse(WebDescriptor.java:181)\nat org.eclipse.jetty.webapp.MetaData.setWebXml(MetaData.java:172)\nat org.eclipse.jetty.webapp.WebXmlConfiguration.preConfigure(WebXmlConfiguration.java:60)\nat org.eclipse.jetty.webapp.WebAppContext.preConfigure(WebAppContext.java:455)\nat org.eclipse.jetty.webapp.WebAppContext.doStart(WebAppContext.java:491)\nat org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:69)\nat org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:117)\nat org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:99)\nat org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:60)\nat org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:69)\nat org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:117)\nat org.eclipse.jetty.server.Server.start(Server.java:355)\nat org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:99)\nat org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:60)\nat org.eclipse.jetty.server.Server.doStart(Server.java:324)\nat org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:69)\n</code></pre>\n"},{"tags":["java","android"],"answers":[{"tags":[],"owner":{"account_id":5282904,"reputation":18287,"user_id":4217682,"accept_rate":50,"display_name":"snachmsm"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1664915820,"creation_date":1664915820,"answer_id":73953393,"question_id":73953074,"body_markdown":"you aren&#39;t pausing song, you are `stop()`ing it. use `sound.pause()` for pausing :)\r\n\r\nafter `stop()` `MediaPlayer` you have to prepare it again, use `prepare()` or `prepareAsync()`. `MediaPlayer.create(` makes that for you at the beginning, also if you would create `MediaPlayer` using its constructor you would also want to `prepare()`/`preapreAsync()` before calling `start()` in onClick\r\n\r\ncheck out [state diagram of `MediaPlayer`](https://developer.android.com/reference/android/media/MediaPlayer#StateDiagram)","title":"Adding music in android studio (java, MediaPlayer)","body":"<p>you aren't pausing song, you are <code>stop()</code>ing it. use <code>sound.pause()</code> for pausing :)</p>\n<p>after <code>stop()</code> <code>MediaPlayer</code> you have to prepare it again, use <code>prepare()</code> or <code>prepareAsync()</code>. <code>MediaPlayer.create(</code> makes that for you at the beginning, also if you would create <code>MediaPlayer</code> using its constructor you would also want to <code>prepare()</code>/<code>preapreAsync()</code> before calling <code>start()</code> in onClick</p>\n<p>check out <a href=\"https://developer.android.com/reference/android/media/MediaPlayer#StateDiagram\" rel=\"nofollow noreferrer\">state diagram of <code>MediaPlayer</code></a></p>\n"}],"owner":{"account_id":26524509,"reputation":25,"user_id":20159924,"display_name":"Oganes"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":87,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73953393,"answer_count":1,"score":0,"last_activity_date":1664915820,"creation_date":1664913569,"question_id":73953074,"body_markdown":"       buttonMusic = findViewById(R.id.buttonMus);\r\n\r\n        musicSound = MediaPlayer.create(this, R.raw.music);\r\n        buttonClick();\r\n    }\r\n\r\n    private Button buttonMusic;\r\n    private MediaPlayer musicSound;\r\n\r\n    public void buttonClick() {\r\n        buttonMusic.setOnClickListener(\r\n                new View.OnClickListener() {\r\n                    @Override\r\n                    public void onClick(View v) {\r\n                        soundPlay(musicSound);\r\n\r\n                    }\r\n                }\r\n        );\r\n    }\r\n\r\n    public void soundPlay(MediaPlayer sound) {\r\n        if (sound.isPlaying()) {\r\n            sound.stop();\r\n\r\n        }else {\r\n            sound.start();\r\n            sound.setLooping(true);\r\n        } }\r\n\r\nHello.\r\nThe code launches the music, is able to stop it, but it wont play again after pressing the play button, after pausing the song that is.","title":"Adding music in android studio (java, MediaPlayer)","body":"<pre><code>   buttonMusic = findViewById(R.id.buttonMus);\n\n    musicSound = MediaPlayer.create(this, R.raw.music);\n    buttonClick();\n}\n\nprivate Button buttonMusic;\nprivate MediaPlayer musicSound;\n\npublic void buttonClick() {\n    buttonMusic.setOnClickListener(\n            new View.OnClickListener() {\n                @Override\n                public void onClick(View v) {\n                    soundPlay(musicSound);\n\n                }\n            }\n    );\n}\n\npublic void soundPlay(MediaPlayer sound) {\n    if (sound.isPlaying()) {\n        sound.stop();\n\n    }else {\n        sound.start();\n        sound.setLooping(true);\n    } }\n</code></pre>\n<p>Hello.\nThe code launches the music, is able to stop it, but it wont play again after pressing the play button, after pausing the song that is.</p>\n"},{"tags":["java","if-statement","negative-number"],"comments":[{"owner":{"display_name":"user6073886"},"score":5,"creation_date":1664874146,"post_id":73945411,"comment_id":130564506,"body_markdown":"You are doing calculations with some rather large numbers there. Have you checked if what you are trying to calculate even fits in the `int` datatype? Maybe the numbers are to big and you are experiencing [integer overflow](https://stackoverflow.com/questions/3001836/how-does-java-handle-integer-underflows-and-overflows-and-how-would-you-check-fo)","body":"You are doing calculations with some rather large numbers there. Have you checked if what you are trying to calculate even fits in the <code>int</code> datatype? Maybe the numbers are to big and you are experiencing <a href=\"https://stackoverflow.com/questions/3001836/how-does-java-handle-integer-underflows-and-overflows-and-how-would-you-check-fo\">integer overflow</a>"},{"owner":{"account_id":74704,"reputation":11534,"user_id":214525,"accept_rate":100,"display_name":"f1sh"},"score":0,"creation_date":1664875328,"post_id":73945411,"comment_id":130564869,"body_markdown":"As a quick fix: try changing all your `int` variables to `long`. It might only be needed on the `hga` and `hgaa` variables, but it just might to the trick.","body":"As a quick fix: try changing all your <code>int</code> variables to <code>long</code>. It might only be needed on the <code>hga</code> and <code>hgaa</code> variables, but it just might to the trick."},{"owner":{"account_id":24832545,"reputation":13,"user_id":18711578,"display_name":"HERI"},"score":0,"creation_date":1664876141,"post_id":73945411,"comment_id":130565127,"body_markdown":"changing to &#39;long&#39;, its work. Guess Im forget about this data type. thanks anyway","body":"changing to &#39;long&#39;, its work. Guess Im forget about this data type. thanks anyway"},{"owner":{"account_id":2465829,"reputation":11057,"user_id":2148953,"accept_rate":96,"display_name":"aran"},"score":0,"creation_date":1664917384,"post_id":73945411,"comment_id":130578633,"body_markdown":"not enexpected at all...","body":"not enexpected at all..."}],"answers":[{"tags":[],"owner":{"account_id":4905682,"reputation":839,"user_id":3952494,"display_name":"Klapsa2503"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664914997,"creation_date":1664914997,"answer_id":73953286,"question_id":73945411,"body_markdown":"You are using `int` but you should use `long`. Integer can&#39;t be used in here as the value is just too big and overflows.\r\n\r\nCheck https://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html to see available data types and compare maximum values that you can fit into them.\r\n\r\nUse `Math.exact` and similar methods to immediately get an exception when value overflows. See https://stackoverflow.com/questions/21233582/how-can-i-detect-integer-overflow-on-32-bits-int","title":"if-else-if: getting an unexpected negative output","body":"<p>You are using <code>int</code> but you should use <code>long</code>. Integer can't be used in here as the value is just too big and overflows.</p>\n<p>Check <a href=\"https://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html</a> to see available data types and compare maximum values that you can fit into them.</p>\n<p>Use <code>Math.exact</code> and similar methods to immediately get an exception when value overflows. See <a href=\"https://stackoverflow.com/questions/21233582/how-can-i-detect-integer-overflow-on-32-bits-int\">How can I detect integer overflow on 32 bits int?</a></p>\n"}],"owner":{"account_id":24832545,"reputation":13,"user_id":18711578,"display_name":"HERI"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":100,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"answer_count":1,"score":-3,"last_activity_date":1664914997,"creation_date":1664873946,"question_id":73945411,"body_markdown":"So i have this program, where when I select the area and type, the DP will generate.[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/GJiuf.png\r\n\r\nThe problem is, when I select another type (tipe-45 and tipe-54), the result is showed in minus. What is the problem?\r\n\r\n    if(rb1.isSelected() &amp;&amp; t1.isSelected()){\r\n            hargabangunan.setText(&quot;90000000&quot;);\r\n            luas_tanah_asli.setText(&quot;60&quot;);}\r\n        else if(rb1.isSelected() &amp;&amp; t2.isSelected()){\r\n            hargabangunan.setText(&quot;120000000&quot;);\r\n            luas_tanah_asli.setText(&quot;90&quot;);}\r\n        else if(rb1.isSelected() &amp;&amp; t3.isSelected()){\r\n            hargabangunan.setText(&quot;150000000&quot;);\r\n            luas_tanah_asli.setText(&quot;110&quot;);}\r\n        \r\n        else if(rb2.isSelected() &amp;&amp; t1.isSelected()){\r\n            hargabangunan.setText(&quot;100000000&quot;);\r\n            luas_tanah_asli.setText(&quot;70&quot;);}\r\n        else if(rb2.isSelected() &amp;&amp; t2.isSelected()){\r\n            hargabangunan.setText(&quot;130000000&quot;);\r\n            luas_tanah_asli.setText(&quot;110&quot;);}\r\n        else if(rb2.isSelected() &amp;&amp; t3.isSelected()){\r\n            hargabangunan.setText(&quot;170000000&quot;);\r\n            luas_tanah_asli.setText(&quot;120&quot;);}\r\n       \r\n        else if(rb3.isSelected() &amp;&amp; t1.isSelected()){\r\n            hargabangunan.setText(&quot;120000000&quot;);\r\n            luas_tanah_asli.setText(&quot;80&quot;);}\r\n        else if(rb3.isSelected() &amp;&amp; t2.isSelected()){\r\n            hargabangunan.setText(&quot;140000000&quot;);\r\n            luas_tanah_asli.setText(&quot;120&quot;);}\r\n        else if(rb3.isSelected() &amp;&amp; t3.isSelected()){\r\n            hargabangunan.setText(&quot;200000000&quot;);\r\n            luas_tanah_asli.setText(&quot;140&quot;);}\r\n        \r\n        int htl = hargat*75/100;     \r\n        tst.setText(Integer.toString(htl));\r\n        \r\n        int lta = Integer.parseInt(luas_tanah_asli.getText());\r\n        int ltth = ltt - lta;\r\n        tsa.setText(Integer.toString(ltth));\r\n        \r\n        int hga = Integer.parseInt(hargabangunan.getText());\r\n        int hgaa = hga+lta*hargat+ltth*htl;\r\n        harga.setText(Integer.toString(hgaa));\r\n       \r\n        String hharga;\r\n        hharga = harga.getText();\r\n        int tharga = Integer.parseInt(hharga);\r\n        int dp = tharga*20/100;\r\n        dpf.setText(Integer.toString(dp));","title":"if-else-if: getting an unexpected negative output","body":"<p>So i have this program, where when I select the area and type, the DP will generate.<a href=\"https://i.stack.imgur.com/GJiuf.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/GJiuf.png\" alt=\"enter image description here\" /></a></p>\n<p>The problem is, when I select another type (tipe-45 and tipe-54), the result is showed in minus. What is the problem?</p>\n<pre><code>if(rb1.isSelected() &amp;&amp; t1.isSelected()){\n        hargabangunan.setText(&quot;90000000&quot;);\n        luas_tanah_asli.setText(&quot;60&quot;);}\n    else if(rb1.isSelected() &amp;&amp; t2.isSelected()){\n        hargabangunan.setText(&quot;120000000&quot;);\n        luas_tanah_asli.setText(&quot;90&quot;);}\n    else if(rb1.isSelected() &amp;&amp; t3.isSelected()){\n        hargabangunan.setText(&quot;150000000&quot;);\n        luas_tanah_asli.setText(&quot;110&quot;);}\n    \n    else if(rb2.isSelected() &amp;&amp; t1.isSelected()){\n        hargabangunan.setText(&quot;100000000&quot;);\n        luas_tanah_asli.setText(&quot;70&quot;);}\n    else if(rb2.isSelected() &amp;&amp; t2.isSelected()){\n        hargabangunan.setText(&quot;130000000&quot;);\n        luas_tanah_asli.setText(&quot;110&quot;);}\n    else if(rb2.isSelected() &amp;&amp; t3.isSelected()){\n        hargabangunan.setText(&quot;170000000&quot;);\n        luas_tanah_asli.setText(&quot;120&quot;);}\n   \n    else if(rb3.isSelected() &amp;&amp; t1.isSelected()){\n        hargabangunan.setText(&quot;120000000&quot;);\n        luas_tanah_asli.setText(&quot;80&quot;);}\n    else if(rb3.isSelected() &amp;&amp; t2.isSelected()){\n        hargabangunan.setText(&quot;140000000&quot;);\n        luas_tanah_asli.setText(&quot;120&quot;);}\n    else if(rb3.isSelected() &amp;&amp; t3.isSelected()){\n        hargabangunan.setText(&quot;200000000&quot;);\n        luas_tanah_asli.setText(&quot;140&quot;);}\n    \n    int htl = hargat*75/100;     \n    tst.setText(Integer.toString(htl));\n    \n    int lta = Integer.parseInt(luas_tanah_asli.getText());\n    int ltth = ltt - lta;\n    tsa.setText(Integer.toString(ltth));\n    \n    int hga = Integer.parseInt(hargabangunan.getText());\n    int hgaa = hga+lta*hargat+ltth*htl;\n    harga.setText(Integer.toString(hgaa));\n   \n    String hharga;\n    hharga = harga.getText();\n    int tharga = Integer.parseInt(hharga);\n    int dp = tharga*20/100;\n    dpf.setText(Integer.toString(dp));\n</code></pre>\n"},{"tags":["java","maven","dependencies"],"answers":[{"tags":[],"owner":{"account_id":24269,"reputation":63221,"user_id":61624,"accept_rate":60,"display_name":"Daniel Kaplan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1664914931,"creation_date":1370161387,"answer_id":16881042,"question_id":16881015,"body_markdown":"Yes, put it in the resource folder.  By default that&#39;s `src/main/resources`.  If you put a file in there, it&#39;ll become available in your classpath.\r\n\r\nAlternatively, you could modify your pom to say your folder where the xml file is in is a resource folder.  But, I consider this a bad practice *if* your xml file is under your `src/main/java` directory.  ","title":"Adding a non-jar dependency to my maven project","body":"<p>Yes, put it in the resource folder.  By default that's <code>src/main/resources</code>.  If you put a file in there, it'll become available in your classpath.</p>\n<p>Alternatively, you could modify your pom to say your folder where the xml file is in is a resource folder.  But, I consider this a bad practice <em>if</em> your xml file is under your <code>src/main/java</code> directory.</p>\n"},{"tags":[],"owner":{"account_id":354493,"reputation":2496,"user_id":692867,"accept_rate":67,"display_name":"dev_nut"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1370162252,"creation_date":1370162252,"answer_id":16881126,"question_id":16881015,"body_markdown":"You need to put the file in src/main/resources. After that the file is available on the classpath. Then it can be read with:\r\n\r\n        // Foo.class\r\n        // assuming xml file is foo.xml\r\n        InputStream is = Foo.class.getResourceAsStream(&quot;foo.xml&quot;); ","title":"Adding a non-jar dependency to my maven project","body":"<p>You need to put the file in src/main/resources. After that the file is available on the classpath. Then it can be read with:</p>\n\n<pre><code>    // Foo.class\n    // assuming xml file is foo.xml\n    InputStream is = Foo.class.getResourceAsStream(\"foo.xml\"); \n</code></pre>\n"},{"tags":[],"owner":{"account_id":2678195,"reputation":68091,"user_id":2314073,"accept_rate":56,"display_name":"Juned Ahsan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1370162366,"creation_date":1370162366,"answer_id":16881138,"question_id":16881015,"body_markdown":"Maven uses the resources folder for your project as you mention them in pom.xml. Here is a sample of pom. Anything added as a resource will be available in your classpath and can be accessed in your code.\r\n\r\n      &lt;build&gt;\r\n    \t&lt;finalName&gt;Examples&lt;/finalName&gt;\r\n    \t&lt;resources&gt;\r\n    \t\t&lt;resource&gt;\r\n    \t\t\t&lt;directory&gt;src/main/resources&lt;/directory&gt;\r\n    \t\t&lt;/resource&gt;\r\n    \t\t&lt;resource&gt;\r\n    \t\t\t&lt;directory&gt;src/main/config&lt;/directory&gt;\r\n    \t\t&lt;/resource&gt;\r\n    \t&lt;/resources&gt;\r\n    &lt;/build&gt;","title":"Adding a non-jar dependency to my maven project","body":"<p>Maven uses the resources folder for your project as you mention them in pom.xml. Here is a sample of pom. Anything added as a resource will be available in your classpath and can be accessed in your code.</p>\n\n<pre><code>  &lt;build&gt;\n    &lt;finalName&gt;Examples&lt;/finalName&gt;\n    &lt;resources&gt;\n        &lt;resource&gt;\n            &lt;directory&gt;src/main/resources&lt;/directory&gt;\n        &lt;/resource&gt;\n        &lt;resource&gt;\n            &lt;directory&gt;src/main/config&lt;/directory&gt;\n        &lt;/resource&gt;\n    &lt;/resources&gt;\n&lt;/build&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3271774,"reputation":329,"user_id":2754985,"display_name":"user2754985"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1409977741,"creation_date":1409977741,"answer_id":25696781,"question_id":16881015,"body_markdown":"This solution works for me.  I am using a WMQ table channel file from a Nexus repository.\r\n\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;wmq&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;wmq-channel-tab-file&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;1.0.0&lt;/version&gt;\r\n    \t\t\t&lt;type&gt;tab&lt;/type&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    ... \r\n    \r\n    &lt;plugin&gt;\r\n    \t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;version&gt;2.8&lt;/version&gt;\r\n    \t\t\t\t&lt;executions&gt;\r\n    \t\t\t\t\t&lt;execution&gt;\r\n    \t\t\t\t\t\t&lt;id&gt;copy&lt;/id&gt;\r\n    \t\t\t\t\t\t&lt;phase&gt;package&lt;/phase&gt;\r\n    \t\t\t\t\t\t&lt;goals&gt;\r\n    \t\t\t\t\t\t\t&lt;goal&gt;copy&lt;/goal&gt;\r\n    \t\t\t\t\t\t&lt;/goals&gt;\r\n    \t\t\t\t\t\t&lt;configuration&gt;\r\n    \t\t\t\t\t\t\t&lt;artifactItems&gt;\r\n    \t\t\t\t\t\t\t\t&lt;artifactItem&gt;\r\n    \t\t\t\t\t\t\t\t\t&lt;groupId&gt;wmq&lt;/groupId&gt;\r\n    \t\t\t\t\t\t\t\t\t&lt;artifactId&gt;wmq-channel-tab-file&lt;/artifactId&gt;\r\n    \t\t\t\t\t\t\t\t\t&lt;version&gt;1.0.0&lt;/version&gt;\r\n    \t\t\t\t\t\t\t\t\t&lt;type&gt;tab&lt;/type&gt;\r\n    \t\t\t\t\t\t\t\t\t&lt;overWrite&gt;true&lt;/overWrite&gt;\r\n    \t\t\t\t\t\t\t\t\t&lt;outputDirectory&gt;${project.build.directory}/${project.artifactId}-${project.version}/WEB-INF/classes&lt;/outputDirectory&gt;\r\n    \t\t\t\t\t\t\t\t\t&lt;destFileName&gt;wmq-channel-tab-file.tab&lt;/destFileName&gt;\r\n    \t\t\t\t\t\t\t\t&lt;/artifactItem&gt;\r\n    \t\t\t\t\t\t\t&lt;/artifactItems&gt;\r\n    \t\t\t\t\t\t\t&lt;!-- other configurations here --&gt;\r\n    \t\t\t\t\t\t&lt;/configuration&gt;\r\n    \t\t\t\t\t&lt;/execution&gt;\r\n    \t\t\t\t&lt;/executions&gt;\r\n    \t\t\t&lt;/plugin&gt;","title":"Adding a non-jar dependency to my maven project","body":"<p>This solution works for me.  I am using a WMQ table channel file from a Nexus repository.</p>\n\n<pre><code>        &lt;dependency&gt;\n            &lt;groupId&gt;wmq&lt;/groupId&gt;\n            &lt;artifactId&gt;wmq-channel-tab-file&lt;/artifactId&gt;\n            &lt;version&gt;1.0.0&lt;/version&gt;\n            &lt;type&gt;tab&lt;/type&gt;\n        &lt;/dependency&gt;\n\n... \n\n&lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt;\n                &lt;version&gt;2.8&lt;/version&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;copy&lt;/id&gt;\n                        &lt;phase&gt;package&lt;/phase&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;copy&lt;/goal&gt;\n                        &lt;/goals&gt;\n                        &lt;configuration&gt;\n                            &lt;artifactItems&gt;\n                                &lt;artifactItem&gt;\n                                    &lt;groupId&gt;wmq&lt;/groupId&gt;\n                                    &lt;artifactId&gt;wmq-channel-tab-file&lt;/artifactId&gt;\n                                    &lt;version&gt;1.0.0&lt;/version&gt;\n                                    &lt;type&gt;tab&lt;/type&gt;\n                                    &lt;overWrite&gt;true&lt;/overWrite&gt;\n                                    &lt;outputDirectory&gt;${project.build.directory}/${project.artifactId}-${project.version}/WEB-INF/classes&lt;/outputDirectory&gt;\n                                    &lt;destFileName&gt;wmq-channel-tab-file.tab&lt;/destFileName&gt;\n                                &lt;/artifactItem&gt;\n                            &lt;/artifactItems&gt;\n                            &lt;!-- other configurations here --&gt;\n                        &lt;/configuration&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n</code></pre>\n"}],"owner":{"account_id":2846493,"reputation":71,"user_id":2444735,"display_name":"aeneid"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2615,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":4,"score":5,"last_activity_date":1664914931,"creation_date":1370161134,"question_id":16881015,"body_markdown":"I&#39;d like to add an XML file to my project&#39;s dependencies. I&#39;ve been pretty successful in doing this but unfortunately I&#39;ve found that my XML file is not added to the classpath (which kind of makes sense as it is not a jar file).\r\n\r\nThe reason I want to have the XML file in my classpath is so that I could load it as a resource.\r\n\r\nWhat is the recommended way of doing this, if it is at all recommended?\r\n\r\nThanks","title":"Adding a non-jar dependency to my maven project","body":"<p>I'd like to add an XML file to my project's dependencies. I've been pretty successful in doing this but unfortunately I've found that my XML file is not added to the classpath (which kind of makes sense as it is not a jar file).</p>\n\n<p>The reason I want to have the XML file in my classpath is so that I could load it as a resource.</p>\n\n<p>What is the recommended way of doing this, if it is at all recommended?</p>\n\n<p>Thanks</p>\n"},{"tags":["java","postgresql","spring-boot"],"comments":[{"owner":{"account_id":2496,"reputation":266234,"user_id":3474,"accept_rate":83,"display_name":"erickson"},"score":0,"creation_date":1664914829,"post_id":73952792,"comment_id":130577926,"body_markdown":"This seems like a problem with your model. If &quot;title&quot; really has to be unique, mangling it is probably the wrong approach; perhaps there&#39;s a type missing from your model that relates to (references) the quote. More likely, the title is just some information in a record that doesn&#39;t need to be unique.","body":"This seems like a problem with your model. If &quot;title&quot; really has to be unique, mangling it is probably the wrong approach; perhaps there&#39;s a type missing from your model that relates to (references) the quote. More likely, the title is just some information in a record that doesn&#39;t need to be unique."}],"answers":[{"tags":[],"owner":{"account_id":26301533,"reputation":1119,"user_id":19966820,"display_name":"YJR"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1664914382,"creation_date":1664912035,"answer_id":73952829,"question_id":73952792,"body_markdown":"You can use `findByTitleLike` instead of `findByTitle` for your task.It will find titles  match with the given regex.","title":"Increase counter if a value exists","body":"<p>You can use <code>findByTitleLike</code> instead of <code>findByTitle</code> for your task.It will find titles  match with the given regex.</p>\n"},{"tags":[],"owner":{"account_id":10814530,"reputation":4195,"user_id":7954021,"display_name":"Renis1235"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1664914827,"creation_date":1664914827,"answer_id":73953263,"question_id":73952792,"body_markdown":"One way to solve this would be to add a `counter` column to your table and whenever you need to show your title, concatenate the title with this counter.\r\n\r\ne.g.\r\n\r\n```java\r\nint id = newQuoteRepository.findByTitle(data.getTitle()).size();\r\n\r\nif (id &gt; 0) {\r\n    data.setCounter(data.getCounter() + 1);\r\n    // persist it\r\n}\r\n\r\n// Show title:\r\nSystem.out.println(data.getTitle() + &quot; &quot; + data.getCounter());\r\n```\r\n\r\nThere are several advantages to this approach. \r\n\r\n - You work with numbers directly\r\n - No need to do some `String` magic to achieve what you want\r\n - Cleaner\r\n","title":"Increase counter if a value exists","body":"<p>One way to solve this would be to add a <code>counter</code> column to your table and whenever you need to show your title, concatenate the title with this counter.</p>\n<p>e.g.</p>\n<pre class=\"lang-java prettyprint-override\"><code>int id = newQuoteRepository.findByTitle(data.getTitle()).size();\n\nif (id &gt; 0) {\n    data.setCounter(data.getCounter() + 1);\n    // persist it\n}\n\n// Show title:\nSystem.out.println(data.getTitle() + &quot; &quot; + data.getCounter());\n</code></pre>\n<p>There are several advantages to this approach.</p>\n<ul>\n<li>You work with numbers directly</li>\n<li>No need to do some <code>String</code> magic to achieve what you want</li>\n<li>Cleaner</li>\n</ul>\n"}],"owner":{"account_id":17113839,"reputation":641,"user_id":12383916,"display_name":"xRay"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":88,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":73953263,"answer_count":2,"score":0,"last_activity_date":1664914827,"creation_date":1664911767,"question_id":73952792,"body_markdown":"In my database, I am searching for a specific value. If that value does not exist, it should simply be added, but if it exists, a counter should be added next to it. \r\n\r\nSo for instance, if the value *Hello World* already exists, the added value should be *Hello World 1*, the next one should be *Hello World 2* and so on...\r\n\r\n\r\nThis is what I have tried:\r\n```java\r\nint id = newQuoteRepository.findByTitle(data.getTitle()).size();\r\nSystem.out.println(id);\r\nif (id &gt; 0) {\r\n    data.setTitle(data.getTitle() + id);\r\n}\r\n```\r\n\r\nWell, basically it works but it is not really what I want. So if a value is `bar`, it will add `bar1`. And next time, it will add `bar1` again, because it is searching for `bar` and so the added value, which was `bar1`, will be ignored.\r\n\r\nSo this is what I have: bar, bar1, bar1, bar1 ...\r\n\r\nAnd this is how it should be: bar, bar1, bar2, bar3 ...\r\n\r\nWhat could be a solution for this issue?","title":"Increase counter if a value exists","body":"<p>In my database, I am searching for a specific value. If that value does not exist, it should simply be added, but if it exists, a counter should be added next to it.</p>\n<p>So for instance, if the value <em>Hello World</em> already exists, the added value should be <em>Hello World 1</em>, the next one should be <em>Hello World 2</em> and so on...</p>\n<p>This is what I have tried:</p>\n<pre class=\"lang-java prettyprint-override\"><code>int id = newQuoteRepository.findByTitle(data.getTitle()).size();\nSystem.out.println(id);\nif (id &gt; 0) {\n    data.setTitle(data.getTitle() + id);\n}\n</code></pre>\n<p>Well, basically it works but it is not really what I want. So if a value is <code>bar</code>, it will add <code>bar1</code>. And next time, it will add <code>bar1</code> again, because it is searching for <code>bar</code> and so the added value, which was <code>bar1</code>, will be ignored.</p>\n<p>So this is what I have: bar, bar1, bar1, bar1 ...</p>\n<p>And this is how it should be: bar, bar1, bar2, bar3 ...</p>\n<p>What could be a solution for this issue?</p>\n"},{"tags":["java","scala","maven","gradle"],"answers":[{"tags":[],"owner":{"account_id":4881746,"reputation":17,"user_id":16111063,"display_name":"Micah Rothenbuhler"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664908157,"creation_date":1664908157,"answer_id":73952154,"question_id":73951858,"body_markdown":"No: if Project-B imports Project-A, and Project-A has an internal dependency on Library-X, you usually don&#39;t need to do anything and it will resolve automatically. \r\n\r\nSome exceptions may include conflicts and libraries that exist in a private nexus. For the former, you need to resolve the conflict in the pom.xml. For the latter, you need to make sure your repo is accessible from wherever you&#39;re compiling.","title":"How does the library dependency is inherited/works in maven?","body":"<p>No: if Project-B imports Project-A, and Project-A has an internal dependency on Library-X, you usually don't need to do anything and it will resolve automatically.</p>\n<p>Some exceptions may include conflicts and libraries that exist in a private nexus. For the former, you need to resolve the conflict in the pom.xml. For the latter, you need to make sure your repo is accessible from wherever you're compiling.</p>\n"},{"tags":[],"owner":{"account_id":7034556,"reputation":12325,"user_id":5389127,"display_name":"Ga&#235;l J"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664909165,"creation_date":1664909165,"answer_id":73952326,"question_id":73951858,"body_markdown":"No.\r\n\r\nDependencies are transitive &quot;by default&quot; unless the opposite is specificied (either with _exclusions_ or _scopes_ (a test scoped dependency won&#39;t be transitively propagated for instance)).\r\n\r\nEDIT: you can use `mvn dependency:tree` to get a better understanding of your dependencies.\r\n\r\nOne possibility is that library X is pulled in different incompatible versions.","title":"How does the library dependency is inherited/works in maven?","body":"<p>No.</p>\n<p>Dependencies are transitive &quot;by default&quot; unless the opposite is specificied (either with <em>exclusions</em> or <em>scopes</em> (a test scoped dependency won't be transitively propagated for instance)).</p>\n<p>EDIT: you can use <code>mvn dependency:tree</code> to get a better understanding of your dependencies.</p>\n<p>One possibility is that library X is pulled in different incompatible versions.</p>\n"},{"tags":[],"owner":{"account_id":6164391,"reputation":719,"user_id":4804881,"accept_rate":67,"display_name":"coders"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664914719,"creation_date":1664914719,"answer_id":73953249,"question_id":73951858,"body_markdown":"Thank you for the having look at my post. By adding the Library-X under &lt;artifactSet&gt; tag in the Project-B pom.xml, worked.Something shown below\r\n\r\n    &lt;artifactSet&gt;                           \r\n    &lt;include&gt;x.y.stone:central-dl-spark-common-integration-logging&lt;/include&gt;\r\n    &lt;/artifactSet&gt;","title":"How does the library dependency is inherited/works in maven?","body":"<p>Thank you for the having look at my post. By adding the Library-X under  tag in the Project-B pom.xml, worked.Something shown below</p>\n<pre><code>&lt;artifactSet&gt;                           \n&lt;include&gt;x.y.stone:central-dl-spark-common-integration-logging&lt;/include&gt;\n&lt;/artifactSet&gt;\n</code></pre>\n"}],"owner":{"account_id":6164391,"reputation":719,"user_id":4804881,"accept_rate":67,"display_name":"coders"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":74,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1664914719,"creation_date":1664906327,"question_id":73951858,"body_markdown":"I have gradle scala project(Lets say **&quot;A&quot;**) which uses the library(Lets say **&quot;X&quot;**). And i have used this **Library-&quot;X&quot;** in the build.gradle of **Project-A** as shown below and i&#39;m using the **Library-X** classes to perform some operations.\r\n\r\nbuild.gradle of **Project-&quot;A&quot;**\r\n\r\n    implementation &quot;com.x.y.z.stone:central-dl-spark-common-integration-logging:0.4.0-SNAPSHOT&quot;\r\n\r\nNow **Project-&quot;A&quot;** is itself a library which is used in the **Project-&quot;B&quot;** and this **Project-B** is maven build. Now when i call the **Project-A** function which is acting as library in-turn uses **Library-X** function. But **Project-B** is complaining that class not found error as shown below. This is the **Library-X** class\r\n\r\n    java.lang.NoClassDefFoundError: com/x/y/z/integrationlogging/IntegrationLogging$\r\n\r\nMy question is do we even need to declare the **Library-X** in the pom.xml of **Project-B** as well?\r\n\r\n","title":"How does the library dependency is inherited/works in maven?","body":"<p>I have gradle scala project(Lets say <strong>&quot;A&quot;</strong>) which uses the library(Lets say <strong>&quot;X&quot;</strong>). And i have used this <strong>Library-&quot;X&quot;</strong> in the build.gradle of <strong>Project-A</strong> as shown below and i'm using the <strong>Library-X</strong> classes to perform some operations.</p>\n<p>build.gradle of <strong>Project-&quot;A&quot;</strong></p>\n<pre><code>implementation &quot;com.x.y.z.stone:central-dl-spark-common-integration-logging:0.4.0-SNAPSHOT&quot;\n</code></pre>\n<p>Now <strong>Project-&quot;A&quot;</strong> is itself a library which is used in the <strong>Project-&quot;B&quot;</strong> and this <strong>Project-B</strong> is maven build. Now when i call the <strong>Project-A</strong> function which is acting as library in-turn uses <strong>Library-X</strong> function. But <strong>Project-B</strong> is complaining that class not found error as shown below. This is the <strong>Library-X</strong> class</p>\n<pre><code>java.lang.NoClassDefFoundError: com/x/y/z/integrationlogging/IntegrationLogging$\n</code></pre>\n<p>My question is do we even need to declare the <strong>Library-X</strong> in the pom.xml of <strong>Project-B</strong> as well?</p>\n"},{"tags":["java","spring","eclipse","web","eclipse-jee"],"comments":[{"owner":{"account_id":1564273,"reputation":1454,"user_id":1453413,"display_name":"HoRn"},"score":0,"creation_date":1664906737,"post_id":73951783,"comment_id":130575693,"body_markdown":"Welcome to Stack Overflow! Please provide specific information about that attempt. To learn more about this community and how we can help you, please read [ask] and its linked resources. Could you provide a minimal reproducible example?","body":"Welcome to Stack Overflow! Please provide specific information about that attempt. To learn more about this community and how we can help you, please read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> and its linked resources. Could you provide a minimal reproducible example?"}],"answers":[{"tags":[],"owner":{"account_id":10463559,"reputation":2118,"user_id":7713562,"display_name":"zawarudo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1664908371,"creation_date":1664908371,"answer_id":73952184,"question_id":73951783,"body_markdown":"The Eclipse for some reason replaced WebContent with webapp folder.\r\nIt is basically a replacement for it, but if you really want WebContent you can download 2017 version.\r\nHere is the one that I have\r\nEclipse Java EE IDE for Web Developers.\r\n\r\nVersion: Oxygen.1a Release (4.7.1a)\r\nBuild id: 20171005-1200\r\n\r\nhttps://www.eclipse.org/downloads/packages/release/oxygen/1a\r\n\r\nhttps://www.eclipse.org/downloads/download.php?file=/technology/epp/downloads/release/oxygen/1a/eclipse-jee-oxygen-1a-win32-x86_64.zip\r\n\r\nAfter this version WebContent is replaced with webapp\r\n\r\nHere is also a picture of the project structure if you have an eclipse that creates webapp or WebContent, as you can see it is basically a replacement to make it look more like maven structure.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/q01ua.png","title":"WebContent folder does not exist, webapp instead","body":"<p>The Eclipse for some reason replaced WebContent with webapp folder.\nIt is basically a replacement for it, but if you really want WebContent you can download 2017 version.\nHere is the one that I have\nEclipse Java EE IDE for Web Developers.</p>\n<p>Version: Oxygen.1a Release (4.7.1a)\nBuild id: 20171005-1200</p>\n<p><a href=\"https://www.eclipse.org/downloads/packages/release/oxygen/1a\" rel=\"nofollow noreferrer\">https://www.eclipse.org/downloads/packages/release/oxygen/1a</a></p>\n<p><a href=\"https://www.eclipse.org/downloads/download.php?file=/technology/epp/downloads/release/oxygen/1a/eclipse-jee-oxygen-1a-win32-x86_64.zip\" rel=\"nofollow noreferrer\">https://www.eclipse.org/downloads/download.php?file=/technology/epp/downloads/release/oxygen/1a/eclipse-jee-oxygen-1a-win32-x86_64.zip</a></p>\n<p>After this version WebContent is replaced with webapp</p>\n<p>Here is also a picture of the project structure if you have an eclipse that creates webapp or WebContent, as you can see it is basically a replacement to make it look more like maven structure.</p>\n<p><a href=\"https://i.stack.imgur.com/q01ua.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/q01ua.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":[],"owner":{"account_id":13796,"reputation":19353,"user_id":27905,"display_name":"nitind"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664914389,"creation_date":1664914389,"answer_id":73953187,"question_id":73951783,"body_markdown":"&quot;WebContent&quot; was replaced to form a layout more easily transitioned to building a `.war` file with headless tools like Gradle and Maven. No one should be deploying to a production environment from their IDE. &quot;WebContent&quot; was also fairly unique to Eclipse&#39;s Web Tools. There&#39;s nothing special about it.\r\n\r\nYou don&#39;t need an older version, only to enter a different value when the New Dynamic Web Project wizard asks you what you want to use as your Content Directory on the third page of the wizard (**if** you don&#39;t want to use the new default):\r\n\r\n[![Page 3 in the New Dynamic Web Project wizard][1]][1]\r\n\r\n  [1]: https://i.stack.imgur.com/QjvwX.png","title":"WebContent folder does not exist, webapp instead","body":"<p>&quot;WebContent&quot; was replaced to form a layout more easily transitioned to building a <code>.war</code> file with headless tools like Gradle and Maven. No one should be deploying to a production environment from their IDE. &quot;WebContent&quot; was also fairly unique to Eclipse's Web Tools. There's nothing special about it.</p>\n<p>You don't need an older version, only to enter a different value when the New Dynamic Web Project wizard asks you what you want to use as your Content Directory on the third page of the wizard (<strong>if</strong> you don't want to use the new default):</p>\n<p><a href=\"https://i.stack.imgur.com/QjvwX.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/QjvwX.png\" alt=\"Page 3 in the New Dynamic Web Project wizard\" /></a></p>\n"}],"owner":{"account_id":26527963,"reputation":3,"user_id":20160638,"display_name":"marou"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":729,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":73952184,"answer_count":2,"score":-1,"last_activity_date":1664914389,"creation_date":1664905865,"question_id":73951783,"body_markdown":"I&#39;m taking the following course right now: &quot;Develop websites with Java EE&quot;.\r\nI encounter a problem when creating the Dynamic Web Project because instead of having a WebContent folder like on all the tutorials I&#39;ve seen, I get a src/main folder... \r\nWhat should I do to be able to have a WebContent folder","title":"WebContent folder does not exist, webapp instead","body":"<p>I'm taking the following course right now: &quot;Develop websites with Java EE&quot;.\nI encounter a problem when creating the Dynamic Web Project because instead of having a WebContent folder like on all the tutorials I've seen, I get a src/main folder...\nWhat should I do to be able to have a WebContent folder</p>\n"},{"tags":["java","redisson"],"answers":[{"tags":[],"owner":{"account_id":3113302,"reputation":11,"user_id":2634632,"display_name":"Venkov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664914366,"creation_date":1664914366,"answer_id":73953181,"question_id":65090015,"body_markdown":"        Iterable&lt;String&gt; keys = redissonClient.getKeys().getKeysByPattern(keyPattern);\r\n\r\n        var rBarch = redissonClient.createBatch();\r\n        Map &lt;String, Integer&gt; map = new HashMap&lt;&gt;();\r\n        for (String key : keys) {\r\n            rBarch.getList(key).sizeAsync().whenComplete((integer, throwable) -&gt; map.get(key, integer));\r\n        }\r\n        rBarch.execute();\r\n        return map;","title":"Redisson Multiget - Getting multiple key values in single call form Redisson","body":"<pre><code>    Iterable&lt;String&gt; keys = redissonClient.getKeys().getKeysByPattern(keyPattern);\n\n    var rBarch = redissonClient.createBatch();\n    Map &lt;String, Integer&gt; map = new HashMap&lt;&gt;();\n    for (String key : keys) {\n        rBarch.getList(key).sizeAsync().whenComplete((integer, throwable) -&gt; map.get(key, integer));\n    }\n    rBarch.execute();\n    return map;\n</code></pre>\n"}],"owner":{"account_id":6512341,"reputation":81,"user_id":5039167,"accept_rate":0,"display_name":"Satish Bhuria"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1257,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1664914366,"creation_date":1606823650,"question_id":65090015,"body_markdown":"I have a redis cache where each key is of type list and from redisson i want to make a map of each list key and their size... \r\n\r\nBelow code is working fine but I want to make single call to redis cache.\r\n\r\n    Iterable&lt;String&gt; keys = redissonClient.getKeys().getKeysByPattern(keyPattern);\r\n\r\n\r\n        Map&lt;String, Integer&gt; map = new HashMap&lt;&gt;();\r\n        for (String key : keys) {\r\n            map.put(key, redissonClient.getList(key).size());\r\n        }\r\n        return map;\r\n    }\r\n\r\nThanks in advance","title":"Redisson Multiget - Getting multiple key values in single call form Redisson","body":"<p>I have a redis cache where each key is of type list and from redisson i want to make a map of each list key and their size...</p>\n<p>Below code is working fine but I want to make single call to redis cache.</p>\n<pre><code>Iterable&lt;String&gt; keys = redissonClient.getKeys().getKeysByPattern(keyPattern);\n\n\n    Map&lt;String, Integer&gt; map = new HashMap&lt;&gt;();\n    for (String key : keys) {\n        map.put(key, redissonClient.getList(key).size());\n    }\n    return map;\n}\n</code></pre>\n<p>Thanks in advance</p>\n"},{"tags":["java","apache-kafka","spring-kafka"],"comments":[{"owner":{"account_id":1408815,"reputation":2002,"user_id":1811348,"accept_rate":88,"display_name":"swapyonubuntu"},"score":0,"creation_date":1664908576,"post_id":73952117,"comment_id":130576164,"body_markdown":"retry limit is set for kafka producer, it cannot infinitely retry sending message by default.\n\nhttps://kafka.apache.org/documentation/#producerconfigs_retries\nhttps://kafka.apache.org/documentation/#producerconfigs_delivery.timeout.ms","body":"retry limit is set for kafka producer, it cannot infinitely retry sending message by default.  <a href=\"https://kafka.apache.org/documentation/#producerconfigs_retries\" rel=\"nofollow noreferrer\">kafka.apache.org/documentation/#producerconfigs_retries</a> <a href=\"https://kafka.apache.org/documentation/#producerconfigs_delivery.timeout.ms\" rel=\"nofollow noreferrer\">kafka.apache.org/documentation/&hellip;</a>"},{"owner":{"account_id":16089670,"reputation":121,"user_id":11613429,"display_name":"Johnny B. Goode"},"score":0,"creation_date":1664913856,"post_id":73952117,"comment_id":130577654,"body_markdown":"is there a workaround to make it reconnect after disconnecting from broker?","body":"is there a workaround to make it reconnect after disconnecting from broker?"}],"answers":[{"tags":[],"owner":{"account_id":1288095,"reputation":169326,"user_id":1240763,"display_name":"Gary Russell"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664914054,"creation_date":1664914054,"answer_id":73953144,"question_id":73952117,"body_markdown":"You can wrap the `KafkaTemplate` call in a `RetryTemplate` or `@Retryable` method - see https://github.com/spring-projects/spring-retry - the `RetryTemplate` is already on the class path as a transitive dependency of spring-kafka.","title":"Kafka template connection with broker","body":"<p>You can wrap the <code>KafkaTemplate</code> call in a <code>RetryTemplate</code> or <code>@Retryable</code> method - see <a href=\"https://github.com/spring-projects/spring-retry\" rel=\"nofollow noreferrer\">https://github.com/spring-projects/spring-retry</a> - the <code>RetryTemplate</code> is already on the class path as a transitive dependency of spring-kafka.</p>\n"}],"owner":{"account_id":16089670,"reputation":121,"user_id":11613429,"display_name":"Johnny B. Goode"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":650,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1664914054,"creation_date":1664907915,"question_id":73952117,"body_markdown":"I&#39;ve got a @KafkaListener method in my service which processes message and send it to another topic using KafkaTemplate and from time to time it completely stops working due to some reasons. \r\n\r\n```\r\n2022-10-04 16:53:18.218 ERROR 1 --- [pool-1-thread-2] o.s.k.support.LoggingProducerListener    : Exception thrown when sending a message with key=&#39;null&#39; and payload=&#39;{&quot;type&quot;:&quot;INFORMATION&quot;,&quot;messageId&quot;:&quot;f39fabfd-e560-499b-9850-440ad811657b&quot;,&quot;phoneNumber&quot;:&quot;+100000000...&#39; to topic ss.fb.processing-notifications.send:\r\n\r\norg.apache.kafka.common.errors.TimeoutException: Topic ss.fb.processing-notifications.send not present in metadata after 60000 ms.\r\n\r\n2022-10-04 16:53:33.013  INFO 1 --- [ad | producer-1] org.apache.kafka.clients.NetworkClient   : [Producer clientId=producer-1] Disconnecting from node -2 due to socket connection setup timeout. The timeout value is 29794 ms.\r\n2022-10-04 16:53:33.014  WARN 1 --- [ad | producer-1] org.apache.kafka.clients.NetworkClient   : [Producer clientId=producer-1] Bootstrap broker prd-mqueue-srv2.obi.ru:9092 (id: -2 rack: null) disconnected\r\n2022-10-04 16:53:41.005  INFO 1 --- [ntainer#0-0-C-1] org.apache.kafka.clients.NetworkClient   : [Consumer clientId=consumer-nepcNotificationsGroup-1, groupId=nepcNotificationsGroup] Disconnecting from node -3 due to socket connection setup timeout. The timeout value is 27831 ms.\r\n2022-10-04 16:53:41.005  WARN 1 --- [ntainer#0-0-C-1] org.apache.kafka.clients.NetworkClient   : [Consumer clientId=consumer-nepcNotificationsGroup-1, groupId=nepcNotificationsGroup] Bootstrap broker prd-mqueue-srv3.obi.ru:9092 (id: -3 rack: null) disconnected\r\n```\r\nThere seems to be some network issues however after restarting the service everything works fine again. Anyway I wonder why eventually broker turns out to be disconnected? Is&#39;t producer supposed to infinitely try sending message to broker until it succedes? ","title":"Kafka template connection with broker","body":"<p>I've got a @KafkaListener method in my service which processes message and send it to another topic using KafkaTemplate and from time to time it completely stops working due to some reasons.</p>\n<pre><code>2022-10-04 16:53:18.218 ERROR 1 --- [pool-1-thread-2] o.s.k.support.LoggingProducerListener    : Exception thrown when sending a message with key='null' and payload='{&quot;type&quot;:&quot;INFORMATION&quot;,&quot;messageId&quot;:&quot;f39fabfd-e560-499b-9850-440ad811657b&quot;,&quot;phoneNumber&quot;:&quot;+100000000...' to topic ss.fb.processing-notifications.send:\n\norg.apache.kafka.common.errors.TimeoutException: Topic ss.fb.processing-notifications.send not present in metadata after 60000 ms.\n\n2022-10-04 16:53:33.013  INFO 1 --- [ad | producer-1] org.apache.kafka.clients.NetworkClient   : [Producer clientId=producer-1] Disconnecting from node -2 due to socket connection setup timeout. The timeout value is 29794 ms.\n2022-10-04 16:53:33.014  WARN 1 --- [ad | producer-1] org.apache.kafka.clients.NetworkClient   : [Producer clientId=producer-1] Bootstrap broker prd-mqueue-srv2.obi.ru:9092 (id: -2 rack: null) disconnected\n2022-10-04 16:53:41.005  INFO 1 --- [ntainer#0-0-C-1] org.apache.kafka.clients.NetworkClient   : [Consumer clientId=consumer-nepcNotificationsGroup-1, groupId=nepcNotificationsGroup] Disconnecting from node -3 due to socket connection setup timeout. The timeout value is 27831 ms.\n2022-10-04 16:53:41.005  WARN 1 --- [ntainer#0-0-C-1] org.apache.kafka.clients.NetworkClient   : [Consumer clientId=consumer-nepcNotificationsGroup-1, groupId=nepcNotificationsGroup] Bootstrap broker prd-mqueue-srv3.obi.ru:9092 (id: -3 rack: null) disconnected\n</code></pre>\n<p>There seems to be some network issues however after restarting the service everything works fine again. Anyway I wonder why eventually broker turns out to be disconnected? Is't producer supposed to infinitely try sending message to broker until it succedes?</p>\n"},{"tags":["java","spring","spring-boot"],"owner":{"account_id":26527947,"reputation":41,"user_id":20160624,"display_name":"Lewis12"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":336,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1664913990,"creation_date":1664913990,"question_id":73953137,"body_markdown":"I tried `MatchingStrategy` as `STRICT` but that won&#39;t update anything since I do not have same number properties in both source and destination.\r\n\r\n`STANDARD` is not working because there&#39;s this one property called `id` in source and `personId` in destination. so `id` is being mapped to `personId` which I do not want. If I skip this property then I am getting an error that `A mapping is missing a required destination member`.\r\n\r\n","title":"How do I configure ModelMapper to map only the exact matching fields in both source and destination?","body":"<p>I tried <code>MatchingStrategy</code> as <code>STRICT</code> but that won't update anything since I do not have same number properties in both source and destination.</p>\n<p><code>STANDARD</code> is not working because there's this one property called <code>id</code> in source and <code>personId</code> in destination. so <code>id</code> is being mapped to <code>personId</code> which I do not want. If I skip this property then I am getting an error that <code>A mapping is missing a required destination member</code>.</p>\n"},{"tags":["java","spring","spring-boot","jpa","spring-data-jpa"],"answers":[{"tags":[],"owner":{"account_id":26403792,"reputation":76,"user_id":20053884,"display_name":"TedEllis"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664913887,"creation_date":1664908747,"answer_id":73952255,"question_id":73952021,"body_markdown":"Leaving this here for reference for others, but the Question is NOT solved.\r\n\r\nIn AdminService your method:\r\n\r\n    public ClassEntity addUserToClass(AdminAddUserToClassModel userAndClassModel)\r\n                throws UserNotFoundException, ClassNotFoundException, UserAlreadyExistsException {\r\n            UserEntity user = userService.getUserEntity(userAndClassModel.getUserId());\r\n            ClassEntity schoolClass = classService.getClassEntity(userAndClassModel.getClassId());\r\n            if(schoolClass.getStudents().contains(user)) {\r\n                throw new UserAlreadyExistsException(&quot;user already in this class&quot;);\r\n            }\r\n            schoolClass.getStudents().add(user);\r\n            classRepo.save(schoolClass);\r\n            userRepo.save(user);\r\n            return schoolClass;\r\n        }\r\n\r\nDoes not indicate that it is a Transactional method: https://www.baeldung.com/transaction-configuration-with-jpa-and-spring\r\n\r\nWhile you call save, it is not performing a commit. Similarly to how in some SQL languages you can perform inserts, updates, deletes, and if you do not commit the result will not be present on your additional queries.\r\n\r\nSo change your ClassEntity to have @Transactional on top of it, which will cause a commit to occur at the end of the method.\r\n\r\nAdditionally ensure you enable TransactionManagement somewhere in your configuration\r\n\r\n    @Configuration\r\n    @EnableTransactionManagement\r\n    public class PersistenceJPAConfig {\r\n    \r\n    }","title":"Spring JPA doesn&#39;t update relation","body":"<p>Leaving this here for reference for others, but the Question is NOT solved.</p>\n<p>In AdminService your method:</p>\n<pre><code>public ClassEntity addUserToClass(AdminAddUserToClassModel userAndClassModel)\n            throws UserNotFoundException, ClassNotFoundException, UserAlreadyExistsException {\n        UserEntity user = userService.getUserEntity(userAndClassModel.getUserId());\n        ClassEntity schoolClass = classService.getClassEntity(userAndClassModel.getClassId());\n        if(schoolClass.getStudents().contains(user)) {\n            throw new UserAlreadyExistsException(&quot;user already in this class&quot;);\n        }\n        schoolClass.getStudents().add(user);\n        classRepo.save(schoolClass);\n        userRepo.save(user);\n        return schoolClass;\n    }\n</code></pre>\n<p>Does not indicate that it is a Transactional method: <a href=\"https://www.baeldung.com/transaction-configuration-with-jpa-and-spring\" rel=\"nofollow noreferrer\">https://www.baeldung.com/transaction-configuration-with-jpa-and-spring</a></p>\n<p>While you call save, it is not performing a commit. Similarly to how in some SQL languages you can perform inserts, updates, deletes, and if you do not commit the result will not be present on your additional queries.</p>\n<p>So change your ClassEntity to have @Transactional on top of it, which will cause a commit to occur at the end of the method.</p>\n<p>Additionally ensure you enable TransactionManagement somewhere in your configuration</p>\n<pre><code>@Configuration\n@EnableTransactionManagement\npublic class PersistenceJPAConfig {\n\n}\n</code></pre>\n"}],"owner":{"account_id":20204611,"reputation":559,"user_id":14819402,"display_name":"Cross"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":333,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1664913887,"creation_date":1664907265,"question_id":73952021,"body_markdown":"I develop a &quot;school electronic diary&quot; app and now I&#39;m trying to create a method that will add students to class. But here I faced with the problem. When I try to add the entity to list of entity - nothing is happening. \r\n\r\nSo here is controller which receives my requests:\r\n```java\r\n@RestController\r\n@RequestMapping(&quot;/api/admin/class&quot;)\r\npublic class AdminClassController {\r\n    @Autowired\r\n    private AdminService adminService;\r\n\r\n    @Autowired\r\n    private ClassService classService;\r\n\r\n    @PostMapping(&quot;/user&quot;)\r\n    public ResponseEntity&lt;Object&gt; addUserToClass(@RequestBody AdminAddUserToClassModel userAndClassData) {\r\n        try {\r\n            return ResponseEntity.ok(adminService.addUserToClass(userAndClassData));\r\n        } catch (UserNotFoundException | ClassNotFoundException e) {\r\n            return new ResponseEntity&lt;&gt;(e.getMessage(), HttpStatus.NOT_FOUND);\r\n        } catch (UserAlreadyExistsException e) {\r\n            return new ResponseEntity&lt;&gt;(e.getMessage(), HttpStatus.FORBIDDEN);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nHere&#39;s the **AdminService**\r\n```java\r\n@Service\r\npublic class AdminService {\r\n    @Autowired\r\n    private UserService userService;\r\n\r\n    @Autowired\r\n    private UserRepository userRepo;\r\n\r\n    @Autowired\r\n    private SchoolRepository schoolRepo;\r\n\r\n    @Autowired\r\n    private SchoolService schoolService;\r\n\r\n    @Autowired\r\n    private ClassService classService;\r\n\r\n    @Autowired\r\n    private ClassRepository classRepo;\r\n\r\n    public ClassEntity addUserToClass(AdminAddUserToClassModel userAndClassModel)\r\n            throws UserNotFoundException, ClassNotFoundException, UserAlreadyExistsException {\r\n        UserEntity user = userService.getUserEntity(userAndClassModel.getUserId());\r\n        ClassEntity schoolClass = classService.getClassEntity(userAndClassModel.getClassId());\r\n        if(schoolClass.getStudents().contains(user)) {\r\n            throw new UserAlreadyExistsException(&quot;user already in this class&quot;);\r\n        }\r\n        schoolClass.getStudents().add(user);\r\n        classRepo.save(schoolClass);\r\n        userRepo.save(user);\r\n        return schoolClass;\r\n    }\r\n}\r\n```\r\nAnd in the ```addUserToClass``` method, when I try to add user to **ClassEntity** and try to save it, nothing is happening!\r\n\r\nHere&#39;s the ```getUserEntity``` method of **UserService**\r\n```java\r\npublic UserEntity getUserEntity(long userId) throws UserNotFoundException {\r\n        return userRepo.findById(userId)\r\n                .orElseThrow(() -&gt; new UserNotFoundException(&quot;user with id &quot; + userId + &quot; not found&quot;));\r\n    }\r\n```\r\n\r\nAnd ```getClassEntity``` of **ClassService**\r\n```java\r\npublic ClassEntity getClassEntity(long classId) throws ClassNotFoundException {\r\n        return classRepo.findById(classId)\r\n                .orElseThrow(() -&gt; new ClassNotFoundException(&quot;class with such id doesn&#39;t exists&quot;));\r\n    }\r\n```\r\n\r\nAnd,of cource, entities:\r\n\r\n**UserEntity**\r\n```java\r\n@Entity\r\n@Table(name = &quot;users&quot;, schema = &quot;working_schema&quot;)\r\npublic class UserEntity {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.SEQUENCE)\r\n    @Getter @Setter\r\n    private long id;\r\n\r\n    @Getter @Setter\r\n    private String login;\r\n\r\n    @Getter @Setter\r\n    private String password;\r\n\r\n    @Getter @Setter\r\n    private String phoneNumber;\r\n\r\n    @Getter @Setter\r\n    private String email;\r\n\r\n    @Getter @Setter\r\n    private String name;\r\n\r\n    @Getter @Setter\r\n    private String surname;\r\n\r\n    @Getter @Setter\r\n    private String patronymic;\r\n\r\n    @ManyToOne\r\n    @JoinColumn(name = &quot;roleid&quot;, nullable = false)\r\n    @Getter @Setter\r\n    private RoleEntity role;\r\n\r\n    @ManyToOne\r\n    @JoinColumn(name = &quot;classid&quot;)\r\n    @Getter @Setter\r\n    private ClassEntity userClass;\r\n\r\n    @ManyToOne\r\n    @JoinColumn(name = &quot;schoolid&quot;)\r\n    @Getter @Setter\r\n    private SchoolEntity school;\r\n\r\n\r\n    public UserEntity() {\r\n    }\r\n}\r\n```\r\n\r\n**ClassEntity**\r\n```java\r\n@Entity\r\n@Table(name = &quot;classes&quot;, schema = &quot;working_schema&quot;)\r\npublic class ClassEntity {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.SEQUENCE)\r\n    @Getter @Setter\r\n    private long id;\r\n\r\n    @Getter @Setter\r\n    private int number;\r\n\r\n    @Getter @Setter\r\n    private char letter;\r\n\r\n    @OneToMany(mappedBy = &quot;userClass&quot;, cascade = CascadeType.ALL)\r\n    @Getter @Setter\r\n    @JsonIgnore\r\n    private List&lt;UserEntity&gt; students;\r\n\r\n    @ManyToOne\r\n    @JoinColumn(name = &quot;schoolid&quot;)\r\n    @Getter @Setter\r\n    private SchoolEntity school;\r\n\r\n    @OneToOne\r\n    @JoinColumn(name = &quot;timetableid&quot;)\r\n    @JsonIgnore @Getter\r\n    @Setter\r\n    private TimetableEntity timetable;\r\n\r\n    public ClassEntity() {\r\n    }\r\n}\r\n```\r\n\r\n**SchoolEntity**\r\n```java\r\n@Entity\r\n@Table(name = &quot;schools&quot;, schema = &quot;working_schema&quot;)\r\npublic class SchoolEntity {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.SEQUENCE)\r\n    @Getter @Setter\r\n    private long id;\r\n\r\n    @Getter @Setter\r\n    private long number;\r\n\r\n    @OneToMany(mappedBy = &quot;school&quot;, cascade = CascadeType.ALL)\r\n    @Getter @Setter\r\n    @JsonIgnore\r\n    private List&lt;UserEntity&gt; students;\r\n\r\n    @OneToMany(mappedBy = &quot;school&quot;, cascade = CascadeType.ALL)\r\n    @Getter @Setter\r\n    @JsonIgnore\r\n    private List&lt;ClassEntity&gt; classes;\r\n}\r\n```\r\n\r\nSo if you know what can be a problem, please tell me, I&#39;d really appreciate it!\r\n\r\n**UPDATE**\r\n\r\nHere&#39;s SQL queries:\r\n```sql\r\nHibernate: \r\n    select\r\n        classentit0_.id as id1_0_0_,\r\n        classentit0_.letter as letter2_0_0_,\r\n        classentit0_.number as number3_0_0_,\r\n        classentit0_.schoolid as schoolid4_0_0_,\r\n        classentit0_.timetableid as timetabl5_0_0_,\r\n        schoolenti1_.id as id1_2_1_,\r\n        schoolenti1_.number as number2_2_1_,\r\n        timetablee2_.id as id1_4_2_ \r\n    from\r\n        working_schema.classes classentit0_ \r\n    left outer join\r\n        working_schema.schools schoolenti1_ \r\n            on classentit0_.schoolid=schoolenti1_.id \r\n    left outer join\r\n        working_schema.timetables timetablee2_ \r\n            on classentit0_.timetableid=timetablee2_.id \r\n    where\r\n        classentit0_.id=?\r\n```","title":"Spring JPA doesn&#39;t update relation","body":"<p>I develop a &quot;school electronic diary&quot; app and now I'm trying to create a method that will add students to class. But here I faced with the problem. When I try to add the entity to list of entity - nothing is happening.</p>\n<p>So here is controller which receives my requests:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@RestController\n@RequestMapping(&quot;/api/admin/class&quot;)\npublic class AdminClassController {\n    @Autowired\n    private AdminService adminService;\n\n    @Autowired\n    private ClassService classService;\n\n    @PostMapping(&quot;/user&quot;)\n    public ResponseEntity&lt;Object&gt; addUserToClass(@RequestBody AdminAddUserToClassModel userAndClassData) {\n        try {\n            return ResponseEntity.ok(adminService.addUserToClass(userAndClassData));\n        } catch (UserNotFoundException | ClassNotFoundException e) {\n            return new ResponseEntity&lt;&gt;(e.getMessage(), HttpStatus.NOT_FOUND);\n        } catch (UserAlreadyExistsException e) {\n            return new ResponseEntity&lt;&gt;(e.getMessage(), HttpStatus.FORBIDDEN);\n        }\n    }\n}\n</code></pre>\n<p>Here's the <strong>AdminService</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>@Service\npublic class AdminService {\n    @Autowired\n    private UserService userService;\n\n    @Autowired\n    private UserRepository userRepo;\n\n    @Autowired\n    private SchoolRepository schoolRepo;\n\n    @Autowired\n    private SchoolService schoolService;\n\n    @Autowired\n    private ClassService classService;\n\n    @Autowired\n    private ClassRepository classRepo;\n\n    public ClassEntity addUserToClass(AdminAddUserToClassModel userAndClassModel)\n            throws UserNotFoundException, ClassNotFoundException, UserAlreadyExistsException {\n        UserEntity user = userService.getUserEntity(userAndClassModel.getUserId());\n        ClassEntity schoolClass = classService.getClassEntity(userAndClassModel.getClassId());\n        if(schoolClass.getStudents().contains(user)) {\n            throw new UserAlreadyExistsException(&quot;user already in this class&quot;);\n        }\n        schoolClass.getStudents().add(user);\n        classRepo.save(schoolClass);\n        userRepo.save(user);\n        return schoolClass;\n    }\n}\n</code></pre>\n<p>And in the <code>addUserToClass</code> method, when I try to add user to <strong>ClassEntity</strong> and try to save it, nothing is happening!</p>\n<p>Here's the <code>getUserEntity</code> method of <strong>UserService</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>public UserEntity getUserEntity(long userId) throws UserNotFoundException {\n        return userRepo.findById(userId)\n                .orElseThrow(() -&gt; new UserNotFoundException(&quot;user with id &quot; + userId + &quot; not found&quot;));\n    }\n</code></pre>\n<p>And <code>getClassEntity</code> of <strong>ClassService</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>public ClassEntity getClassEntity(long classId) throws ClassNotFoundException {\n        return classRepo.findById(classId)\n                .orElseThrow(() -&gt; new ClassNotFoundException(&quot;class with such id doesn't exists&quot;));\n    }\n</code></pre>\n<p>And,of cource, entities:</p>\n<p><strong>UserEntity</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>@Entity\n@Table(name = &quot;users&quot;, schema = &quot;working_schema&quot;)\npublic class UserEntity {\n    @Id\n    @GeneratedValue(strategy = GenerationType.SEQUENCE)\n    @Getter @Setter\n    private long id;\n\n    @Getter @Setter\n    private String login;\n\n    @Getter @Setter\n    private String password;\n\n    @Getter @Setter\n    private String phoneNumber;\n\n    @Getter @Setter\n    private String email;\n\n    @Getter @Setter\n    private String name;\n\n    @Getter @Setter\n    private String surname;\n\n    @Getter @Setter\n    private String patronymic;\n\n    @ManyToOne\n    @JoinColumn(name = &quot;roleid&quot;, nullable = false)\n    @Getter @Setter\n    private RoleEntity role;\n\n    @ManyToOne\n    @JoinColumn(name = &quot;classid&quot;)\n    @Getter @Setter\n    private ClassEntity userClass;\n\n    @ManyToOne\n    @JoinColumn(name = &quot;schoolid&quot;)\n    @Getter @Setter\n    private SchoolEntity school;\n\n\n    public UserEntity() {\n    }\n}\n</code></pre>\n<p><strong>ClassEntity</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>@Entity\n@Table(name = &quot;classes&quot;, schema = &quot;working_schema&quot;)\npublic class ClassEntity {\n    @Id\n    @GeneratedValue(strategy = GenerationType.SEQUENCE)\n    @Getter @Setter\n    private long id;\n\n    @Getter @Setter\n    private int number;\n\n    @Getter @Setter\n    private char letter;\n\n    @OneToMany(mappedBy = &quot;userClass&quot;, cascade = CascadeType.ALL)\n    @Getter @Setter\n    @JsonIgnore\n    private List&lt;UserEntity&gt; students;\n\n    @ManyToOne\n    @JoinColumn(name = &quot;schoolid&quot;)\n    @Getter @Setter\n    private SchoolEntity school;\n\n    @OneToOne\n    @JoinColumn(name = &quot;timetableid&quot;)\n    @JsonIgnore @Getter\n    @Setter\n    private TimetableEntity timetable;\n\n    public ClassEntity() {\n    }\n}\n</code></pre>\n<p><strong>SchoolEntity</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>@Entity\n@Table(name = &quot;schools&quot;, schema = &quot;working_schema&quot;)\npublic class SchoolEntity {\n    @Id\n    @GeneratedValue(strategy = GenerationType.SEQUENCE)\n    @Getter @Setter\n    private long id;\n\n    @Getter @Setter\n    private long number;\n\n    @OneToMany(mappedBy = &quot;school&quot;, cascade = CascadeType.ALL)\n    @Getter @Setter\n    @JsonIgnore\n    private List&lt;UserEntity&gt; students;\n\n    @OneToMany(mappedBy = &quot;school&quot;, cascade = CascadeType.ALL)\n    @Getter @Setter\n    @JsonIgnore\n    private List&lt;ClassEntity&gt; classes;\n}\n</code></pre>\n<p>So if you know what can be a problem, please tell me, I'd really appreciate it!</p>\n<p><strong>UPDATE</strong></p>\n<p>Here's SQL queries:</p>\n<pre class=\"lang-sql prettyprint-override\"><code>Hibernate: \n    select\n        classentit0_.id as id1_0_0_,\n        classentit0_.letter as letter2_0_0_,\n        classentit0_.number as number3_0_0_,\n        classentit0_.schoolid as schoolid4_0_0_,\n        classentit0_.timetableid as timetabl5_0_0_,\n        schoolenti1_.id as id1_2_1_,\n        schoolenti1_.number as number2_2_1_,\n        timetablee2_.id as id1_4_2_ \n    from\n        working_schema.classes classentit0_ \n    left outer join\n        working_schema.schools schoolenti1_ \n            on classentit0_.schoolid=schoolenti1_.id \n    left outer join\n        working_schema.timetables timetablee2_ \n            on classentit0_.timetableid=timetablee2_.id \n    where\n        classentit0_.id=?\n</code></pre>\n"},{"tags":["java","eclipse","android-studio","appium","appium-android"],"comments":[{"owner":{"account_id":26405796,"reputation":1,"user_id":20055604,"display_name":"Elvis"},"score":0,"creation_date":1664913993,"post_id":73953109,"comment_id":130577682,"body_markdown":"driver.get(&quot;https://google.com&quot;);\n\t\t //System.out.println(driver.getTitle());\n\t\t \n        Set&lt;String&gt; contexts=driver.getContextHandles();   \n          for(String contextName :contexts)\n        {\n\t\t System.out.println(contextName);\n       }\n        driver.context(&quot;WEBVIEW_chrome&quot;);\n   \n\t\t Thread.sleep(6000);\n        driver.findElement(By.name(&quot;q&quot;)).sendKeys(&quot;What is Appium&quot;);\n         driver.findElement(By.name(&quot;q&quot;)).sendKeys(Keys.ENTER);","body":"driver.get(&quot;<a href=\"https://google.com&quot;\" rel=\"nofollow noreferrer\">google.com&quot;</a>); \t\t //System.out.println(driver.getTitle()); \t\t          Set&lt;String&gt; contexts=driver.getContextHandles();              for(String contextName :contexts)         { \t\t System.out.println(contextName);        }         driver.context(&quot;WEBVIEW_chrome&quot;);     \t\t Thread.sleep(6000);         driver.findElement(By.name(&quot;q&quot;)).sendKeys(&quot;What is Appium&quot;);          driver.findElement(By.name(&quot;q&quot;)).sendKeys(Keys.ENTER);"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1664950220,"post_id":73953109,"comment_id":130583221,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."},{"owner":{"account_id":26405796,"reputation":1,"user_id":20055604,"display_name":"Elvis"},"score":0,"creation_date":1665052588,"post_id":73953109,"comment_id":130611180,"body_markdown":"import java.time.Duration;\nimport java.util.Set;\nimport org.openqa.selenium.By;\nimport org.openqa.selenium.Keys;\nimport org.testng.annotations.Test;\npublic class MobileBrowserTest extends BrowserBaseTest2 {\t\n@Test\n\tpublic void MobileBrowserDemo() \n\t{\ndriver.get(&quot;http://google.com&quot;); System.out.println(driver.getTitle());\nWebDriverWait w= new WebDriverWait(driver, Duration.ofSeconds(20));       w.until(ExpectedConditions.visibilityOfElementLocated(By.name(&quot;q&quot;)));\n driver.findElement(name(&quot;q&quot;)).sendKeys(&quot;What is Appium?&quot;);driver.findElement(name(&quot;q&quot;)).sendKeys(Keys.ENTER);\t\n}\n}","body":"import java.time.Duration; import java.util.Set; import org.openqa.selenium.By; import org.openqa.selenium.Keys; import org.testng.annotations.Test; public class MobileBrowserTest extends BrowserBaseTest2 {\t @Test \tpublic void MobileBrowserDemo()  \t{ driver.get(&quot;<a href=\"http://google.com&quot;\" rel=\"nofollow noreferrer\">google.com&quot;</a>); System.out.println(driver.getTitle()); WebDriverWait w= new WebDriverWait(driver, Duration.ofSeconds(20));       w.until(ExpectedConditions.visibilityOfElementLocated(By.nam&zwnj;&#8203;e(&quot;q&quot;)));  driver.findElement(name(&quot;q&quot;)).sendKeys(&quot;What is Appium?&quot;);driver.findElement(name(&quot;q&quot;)).sendKeys(Keys.ENTER)&zwnj;&#8203;;\t } }"}],"owner":{"account_id":26405796,"reputation":1,"user_id":20055604,"display_name":"Elvis"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":227,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1664913823,"creation_date":1664913823,"question_id":73953109,"body_markdown":"I am new trying to transition to Mobile Automation testing using appium, i get an error when i try to sendKeys to the search field in chrome browser on Android studio (virtual device) stating: org.openqa.selenium.NoSuchElementException: no such element: Unable to locate element: {&quot;method&quot;:&quot;css selector&quot;,&quot;selector&quot;:&quot;*[name=&#39;q&#39;]&quot;}\r\n\r\n\r\n","title":"Appium: no such element: Unable to locate element: {&quot;method&quot;:&quot;css selector&quot;,&quot;selector&quot;:&quot;*[name=&#39;q&#39;]&quot;}","body":"<p>I am new trying to transition to Mobile Automation testing using appium, i get an error when i try to sendKeys to the search field in chrome browser on Android studio (virtual device) stating: org.openqa.selenium.NoSuchElementException: no such element: Unable to locate element: {&quot;method&quot;:&quot;css selector&quot;,&quot;selector&quot;:&quot;*[name='q']&quot;}</p>\n"},{"tags":["java","android","kotlin","android-recyclerview","scrollview"],"comments":[{"owner":{"account_id":11974931,"reputation":1042,"user_id":8762338,"display_name":"Astha Garg"},"score":0,"creation_date":1667454912,"post_id":73942338,"comment_id":131171820,"body_markdown":"How did you achieve this?","body":"How did you achieve this?"},{"owner":{"account_id":12244902,"reputation":63,"user_id":8936827,"display_name":"Indirajith"},"score":1,"creation_date":1667785750,"post_id":73942338,"comment_id":131243052,"body_markdown":"Check this out -&gt; https://stackoverflow.com/a/73953044/8936827","body":"Check this out -&gt; <a href=\"https://stackoverflow.com/a/73953044/8936827\">stackoverflow.com/a/73953044/8936827</a>"},{"owner":{"account_id":11974931,"reputation":1042,"user_id":8762338,"display_name":"Astha Garg"},"score":0,"creation_date":1667790687,"post_id":73942338,"comment_id":131243792,"body_markdown":"Thanks. You must accept the answer which helped you","body":"Thanks. You must accept the answer which helped you"}],"answers":[{"tags":[],"owner":{"account_id":26518299,"reputation":26,"user_id":20152445,"display_name":"Ilya Pechuro"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1664903273,"creation_date":1664903273,"answer_id":73951349,"question_id":73942338,"body_markdown":"There is no standart view that looks like this one.\r\nBut you can write it by yourself with help of `RecyclerView`, `SnapHelper` and `RecyclerView.ItemDecoration`\r\nSee more:\r\nhttps://developer.android.com/reference/androidx/recyclerview/widget/SnapHelper\r\nhttps://developer.android.com/reference/androidx/recyclerview/widget/RecyclerView.ItemDecoration\r\n\r\nAlso, take a look at this example, which implements this:\r\nhttps://gist.github.com/Ilyshka991/a2759dd564da41859ad5ebac96f368e5","title":"Scrolling view similar to that of a camera app","body":"<p>There is no standart view that looks like this one.\nBut you can write it by yourself with help of <code>RecyclerView</code>, <code>SnapHelper</code> and <code>RecyclerView.ItemDecoration</code>\nSee more:\n<a href=\"https://developer.android.com/reference/androidx/recyclerview/widget/SnapHelper\" rel=\"nofollow noreferrer\">https://developer.android.com/reference/androidx/recyclerview/widget/SnapHelper</a>\n<a href=\"https://developer.android.com/reference/androidx/recyclerview/widget/RecyclerView.ItemDecoration\" rel=\"nofollow noreferrer\">https://developer.android.com/reference/androidx/recyclerview/widget/RecyclerView.ItemDecoration</a></p>\n<p>Also, take a look at this example, which implements this:\n<a href=\"https://gist.github.com/Ilyshka991/a2759dd564da41859ad5ebac96f368e5\" rel=\"nofollow noreferrer\">https://gist.github.com/Ilyshka991/a2759dd564da41859ad5ebac96f368e5</a></p>\n"},{"tags":[],"owner":{"account_id":18463410,"reputation":18363,"user_id":13598222,"display_name":"cactustictacs"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1664913353,"creation_date":1664913353,"answer_id":73953044,"question_id":73942338,"body_markdown":"This is pretty simple to do - the tricky part is the extra space at the start of the list. We can do that by adding a dummy item to the list with a fixed width.\r\n\r\nFirst get a basic item layout:\r\n\r\n````\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;FrameLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    android:layout_width=&quot;wrap_content&quot;\r\n    android:layout_height=&quot;wrap_content&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;&gt;\r\n\r\n    &lt;TextView\r\n        android:id=&quot;@+id/label&quot;\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:minWidth=&quot;100sp&quot;\r\n        android:textAppearance=&quot;@style/TextAppearance.MaterialComponents.Headline5&quot;\r\n        android:gravity=&quot;center&quot;\r\n        tools:text=&quot;1/800&quot;\r\n        /&gt;\r\n\r\n&lt;/FrameLayout&gt;\r\n````\r\n\r\nThe important thing here is the `minWidth` (in sp) which gives each item a consistent size. You could make it a fixed size too, if you want - this way just allows for longer labels. Really that value should be a *dimension resource*, e.g. `@dimen/stops_item_width` but we&#39;ll get to that later\r\n\r\n----\r\n\r\nNow you need an adapter:\r\n````\r\nclass StopsAdapter(private val items: List&lt;String&gt;) : RecyclerView.Adapter&lt;StopsViewHolder&gt;() {\r\n\r\n    companion object {\r\n        const val PADDING = 0\r\n        const val ITEM = 1\r\n    }\r\n\r\n    // treat the first item in the list as the header\r\n    override fun getItemViewType(position: Int) = if (position == 0) PADDING else ITEM\r\n\r\n    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): StopsViewHolder {\r\n        val inflater = LayoutInflater.from(parent.context)\r\n        val binding = StopsItemBinding.inflate(inflater)\r\n        return if (viewType == PADDING) StopsViewHolder.Padding(binding)\r\n        else StopsViewHolder.Item(binding)\r\n    }\r\n\r\n    override fun onBindViewHolder(holder: StopsViewHolder, position: Int) {\r\n        // need to offset the lookup, since item 0 in the list is displayed at position 1\r\n        if (holder is StopsViewHolder.Item) holder.binding.label.text = items[position - 1]\r\n    }\r\n\r\n    // add 1 to the list size to account for the padding object\r\n    override fun getItemCount() = items.size + 1\r\n}\r\n\r\nsealed class StopsViewHolder(view: View) : RecyclerView.ViewHolder(view) {\r\n    // basically reusing the same layout, just forcing a fixed width on it\r\n    class Padding(binding: StopsItemBinding) : StopsViewHolder(binding.root) {\r\n        init {\r\n            with(binding.label) {\r\n                // padding needs to be half the screen width, minus half an item (so it&#39;s centred)\r\n                val metrics = context.resources.displayMetrics\r\n                // really this 100 should be a dimension resource that the XML uses too, defined in one place\r\n                val minItemWidth = 100 * metrics.scaledDensity\r\n                width = ((metrics.widthPixels - minItemWidth) / 2f).roundToInt()\r\n            }\r\n        }\r\n    }\r\n\r\n    class Item(val binding: StopsItemBinding) : StopsViewHolder(binding.root)\r\n}\r\n````\r\n\r\nThe comments explain it, but there are basically two types of `ViewHolder` - one that displays items, and one that has a fixed width and only appears as the first item in the list. That size is calculated when the VH is created, and it depends on that *item width* in the XML (so it can offset enough that the first real item is centred). This is why it would be best as a resource - so it&#39;s only defined in one place, instead of hardcoded here *and* in the XML, where you&#39;d need to change both if you ever tweak it.\r\n\r\n----\r\n\r\nAnd then you just need to set it up on your `RecyclerView`\r\n\r\n````\r\nclass MainFragment : Fragment(R.layout.fragment_main) {\r\n\r\n    lateinit var binding: FragmentMainBinding\r\n\r\n    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {\r\n        super.onViewCreated(view, savedInstanceState)\r\n        binding = FragmentMainBinding.bind(view)\r\n        with(binding.recyclerView) {\r\n            adapter = StopsAdapter(listOf(\r\n                &quot;Auto&quot;, &quot;1/4000&quot;, &quot;1/3200&quot;, &quot;1/1600&quot;, &quot;1/1250&quot;, &quot;1/1000&quot;, &quot;1/800&quot;\r\n            ))\r\n            layoutManager =\r\n                LinearLayoutManager(requireContext(), LinearLayoutManager.HORIZONTAL, false)\r\n            // snaps the items to the middle of the screen\r\n            LinearSnapHelper().attachToRecyclerView(this)\r\n        }\r\n    }\r\n}\r\n\r\n````\r\n\r\nAnd that&#39;s about it!\r\n\r\n[![The working layout][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/MqDJ3.png","title":"Scrolling view similar to that of a camera app","body":"<p>This is pretty simple to do - the tricky part is the extra space at the start of the list. We can do that by adding a dummy item to the list with a fixed width.</p>\n<p>First get a basic item layout:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;FrameLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    android:layout_width=&quot;wrap_content&quot;\n    android:layout_height=&quot;wrap_content&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;&gt;\n\n    &lt;TextView\n        android:id=&quot;@+id/label&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:minWidth=&quot;100sp&quot;\n        android:textAppearance=&quot;@style/TextAppearance.MaterialComponents.Headline5&quot;\n        android:gravity=&quot;center&quot;\n        tools:text=&quot;1/800&quot;\n        /&gt;\n\n&lt;/FrameLayout&gt;\n</code></pre>\n<p>The important thing here is the <code>minWidth</code> (in sp) which gives each item a consistent size. You could make it a fixed size too, if you want - this way just allows for longer labels. Really that value should be a <em>dimension resource</em>, e.g. <code>@dimen/stops_item_width</code> but we'll get to that later</p>\n<hr />\n<p>Now you need an adapter:</p>\n<pre><code>class StopsAdapter(private val items: List&lt;String&gt;) : RecyclerView.Adapter&lt;StopsViewHolder&gt;() {\n\n    companion object {\n        const val PADDING = 0\n        const val ITEM = 1\n    }\n\n    // treat the first item in the list as the header\n    override fun getItemViewType(position: Int) = if (position == 0) PADDING else ITEM\n\n    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): StopsViewHolder {\n        val inflater = LayoutInflater.from(parent.context)\n        val binding = StopsItemBinding.inflate(inflater)\n        return if (viewType == PADDING) StopsViewHolder.Padding(binding)\n        else StopsViewHolder.Item(binding)\n    }\n\n    override fun onBindViewHolder(holder: StopsViewHolder, position: Int) {\n        // need to offset the lookup, since item 0 in the list is displayed at position 1\n        if (holder is StopsViewHolder.Item) holder.binding.label.text = items[position - 1]\n    }\n\n    // add 1 to the list size to account for the padding object\n    override fun getItemCount() = items.size + 1\n}\n\nsealed class StopsViewHolder(view: View) : RecyclerView.ViewHolder(view) {\n    // basically reusing the same layout, just forcing a fixed width on it\n    class Padding(binding: StopsItemBinding) : StopsViewHolder(binding.root) {\n        init {\n            with(binding.label) {\n                // padding needs to be half the screen width, minus half an item (so it's centred)\n                val metrics = context.resources.displayMetrics\n                // really this 100 should be a dimension resource that the XML uses too, defined in one place\n                val minItemWidth = 100 * metrics.scaledDensity\n                width = ((metrics.widthPixels - minItemWidth) / 2f).roundToInt()\n            }\n        }\n    }\n\n    class Item(val binding: StopsItemBinding) : StopsViewHolder(binding.root)\n}\n</code></pre>\n<p>The comments explain it, but there are basically two types of <code>ViewHolder</code> - one that displays items, and one that has a fixed width and only appears as the first item in the list. That size is calculated when the VH is created, and it depends on that <em>item width</em> in the XML (so it can offset enough that the first real item is centred). This is why it would be best as a resource - so it's only defined in one place, instead of hardcoded here <em>and</em> in the XML, where you'd need to change both if you ever tweak it.</p>\n<hr />\n<p>And then you just need to set it up on your <code>RecyclerView</code></p>\n<pre><code>class MainFragment : Fragment(R.layout.fragment_main) {\n\n    lateinit var binding: FragmentMainBinding\n\n    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {\n        super.onViewCreated(view, savedInstanceState)\n        binding = FragmentMainBinding.bind(view)\n        with(binding.recyclerView) {\n            adapter = StopsAdapter(listOf(\n                &quot;Auto&quot;, &quot;1/4000&quot;, &quot;1/3200&quot;, &quot;1/1600&quot;, &quot;1/1250&quot;, &quot;1/1000&quot;, &quot;1/800&quot;\n            ))\n            layoutManager =\n                LinearLayoutManager(requireContext(), LinearLayoutManager.HORIZONTAL, false)\n            // snaps the items to the middle of the screen\n            LinearSnapHelper().attachToRecyclerView(this)\n        }\n    }\n}\n\n</code></pre>\n<p>And that's about it!</p>\n<p><a href=\"https://i.stack.imgur.com/MqDJ3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/MqDJ3.png\" alt=\"The working layout\" /></a></p>\n"}],"owner":{"account_id":12244902,"reputation":63,"user_id":8936827,"display_name":"Indirajith"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":136,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1664913353,"creation_date":1664847370,"question_id":73942338,"body_markdown":"I&#39;m curious if there&#39;s anything that comes standard with Android that looks exactly like this.\r\n\r\nIf not, do we have a customised approach to accomplishing it?\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Mlycl.gif","title":"Scrolling view similar to that of a camera app","body":"<p>I'm curious if there's anything that comes standard with Android that looks exactly like this.</p>\n<p>If not, do we have a customised approach to accomplishing it?</p>\n<p><a href=\"https://i.stack.imgur.com/Mlycl.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Mlycl.gif\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","arrays","encryption","multidimensional-array"],"comments":[{"owner":{"account_id":8490813,"reputation":3810,"user_id":6367213,"display_name":"Janez Kuhar"},"score":2,"creation_date":1664893821,"post_id":73947126,"comment_id":130571293,"body_markdown":"Your current code does not compile. You&#39;re missing a return statement.","body":"Your current code does not compile. You&#39;re missing a return statement."}],"answers":[{"tags":[],"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1664896012,"creation_date":1664894204,"answer_id":73949562,"question_id":73947126,"body_markdown":"Refer to *javadoc* comments for method `cifradoTrans` in below code. Note that I replace spaces with underscores for better visualization.\r\n```java\r\npublic class CipherSq {\r\n\r\n    /**\r\n     * Places characters of &lt;var&gt;cadena&lt;/var&gt; in a matrix with &lt;var&gt;numberOfColumnsInMatrix&lt;/var&gt;\r\n     * columns and as many rows as required in order to hold all characters of &lt;var&gt;cadena&lt;/var&gt;.\r\n     * Stores the characters in rows, i.e. first character in &lt;var&gt;cadena&lt;/var&gt; is in first row,\r\n     * first column of matrix. Second character of &lt;var&gt;cadena&lt;/var&gt; is in first row, second column\r\n     * of matrix, and so on. Then a string is created by traversing the matrix column by column and\r\n     * concatenating the matrix elements, i.e. first character of returned string is character in\r\n     * first row, first column of matrix. Second character in string is second row, first column of\r\n     * matrix and so on.\r\n     * \r\n     * @param cadena                  - string to manipulate.\r\n     * @param numberOfColumnsInMatrix - number of columns in matrix.\r\n     * \r\n     * @return Manipulated string.\r\n     */\r\n    public static String cifradoTrans(String cadena, int numberOfColumnsInMatrix) {\r\n        cadena = cadena.replace(&#39; &#39;, &#39;_&#39;);\r\n        char[] characters = cadena.toCharArray();\r\n        int len = cadena.length();\r\n        int rows = (int) Math.ceil((double) len / numberOfColumnsInMatrix);\r\n        char[][] matrix = new char[rows][numberOfColumnsInMatrix];\r\n        int row = 0;\r\n        int col = 0;\r\n        int i = 0;\r\n        for (; i &lt; len; i++) {\r\n            col = i % numberOfColumnsInMatrix;\r\n            if (col == 0) {\r\n                row = i / numberOfColumnsInMatrix;\r\n                System.out.println();\r\n            }\r\n            matrix[row][col] = characters[i];\r\n            System.out.print(characters[i] + &quot; &quot;);\r\n        }\r\n        for (col++; col &lt; numberOfColumnsInMatrix; col++) {\r\n            matrix[row][col] = &#39;_&#39;;\r\n            System.out.print(matrix[row][col] + &quot; &quot;);\r\n        }\r\n        System.out.println(System.lineSeparator());\r\n        i = 0;\r\n        char[] newCharacters = new char[rows * numberOfColumnsInMatrix];\r\n        for (col = 0; col &lt; numberOfColumnsInMatrix; col++) {\r\n            for (row = 0; row &lt; rows; row++) {\r\n                newCharacters[i++] = matrix[row][col];\r\n            }\r\n        }\r\n        return new String(newCharacters);\r\n    }\r\n\r\n    /**\r\n     * Recognizes two command-line arguments. First is string to manipulate.\r\n     * Second is number of columns in matrix.\r\n     */\r\n    public static void main(String[] args) {\r\n        if (args.length &gt; 1) {\r\n            System.out.println(cifradoTrans(args[0], Integer.parseInt(args[1])));\r\n        }\r\n        else {\r\n            System.out.println(&quot;ARGS: string int&quot;);\r\n        }\r\n    }\r\n}\r\n```\r\nWhen I run above code with [command-line] arguments `&quot;NOS ATACAN CON CARBUNCO&quot;` and `5`, I get the following output:\r\n```none\r\nN O S _ A \r\nT A C A N \r\n_ C O N _ \r\nC A R B U \r\nN C O _ _ \r\n\r\nNT_CNOACACSCORO_ANB_AN_U_\r\n```\r\n","title":"A simple transposition cipher","body":"<p>Refer to <em>javadoc</em> comments for method <code>cifradoTrans</code> in below code. Note that I replace spaces with underscores for better visualization.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class CipherSq {\n\n    /**\n     * Places characters of &lt;var&gt;cadena&lt;/var&gt; in a matrix with &lt;var&gt;numberOfColumnsInMatrix&lt;/var&gt;\n     * columns and as many rows as required in order to hold all characters of &lt;var&gt;cadena&lt;/var&gt;.\n     * Stores the characters in rows, i.e. first character in &lt;var&gt;cadena&lt;/var&gt; is in first row,\n     * first column of matrix. Second character of &lt;var&gt;cadena&lt;/var&gt; is in first row, second column\n     * of matrix, and so on. Then a string is created by traversing the matrix column by column and\n     * concatenating the matrix elements, i.e. first character of returned string is character in\n     * first row, first column of matrix. Second character in string is second row, first column of\n     * matrix and so on.\n     * \n     * @param cadena                  - string to manipulate.\n     * @param numberOfColumnsInMatrix - number of columns in matrix.\n     * \n     * @return Manipulated string.\n     */\n    public static String cifradoTrans(String cadena, int numberOfColumnsInMatrix) {\n        cadena = cadena.replace(' ', '_');\n        char[] characters = cadena.toCharArray();\n        int len = cadena.length();\n        int rows = (int) Math.ceil((double) len / numberOfColumnsInMatrix);\n        char[][] matrix = new char[rows][numberOfColumnsInMatrix];\n        int row = 0;\n        int col = 0;\n        int i = 0;\n        for (; i &lt; len; i++) {\n            col = i % numberOfColumnsInMatrix;\n            if (col == 0) {\n                row = i / numberOfColumnsInMatrix;\n                System.out.println();\n            }\n            matrix[row][col] = characters[i];\n            System.out.print(characters[i] + &quot; &quot;);\n        }\n        for (col++; col &lt; numberOfColumnsInMatrix; col++) {\n            matrix[row][col] = '_';\n            System.out.print(matrix[row][col] + &quot; &quot;);\n        }\n        System.out.println(System.lineSeparator());\n        i = 0;\n        char[] newCharacters = new char[rows * numberOfColumnsInMatrix];\n        for (col = 0; col &lt; numberOfColumnsInMatrix; col++) {\n            for (row = 0; row &lt; rows; row++) {\n                newCharacters[i++] = matrix[row][col];\n            }\n        }\n        return new String(newCharacters);\n    }\n\n    /**\n     * Recognizes two command-line arguments. First is string to manipulate.\n     * Second is number of columns in matrix.\n     */\n    public static void main(String[] args) {\n        if (args.length &gt; 1) {\n            System.out.println(cifradoTrans(args[0], Integer.parseInt(args[1])));\n        }\n        else {\n            System.out.println(&quot;ARGS: string int&quot;);\n        }\n    }\n}\n</code></pre>\n<p>When I run above code with [command-line] arguments <code>&quot;NOS ATACAN CON CARBUNCO&quot;</code> and <code>5</code>, I get the following output:</p>\n<pre class=\"lang-none prettyprint-override\"><code>N O S _ A \nT A C A N \n_ C O N _ \nC A R B U \nN C O _ _ \n\nNT_CNOACACSCORO_ANB_AN_U_\n</code></pre>\n"}],"owner":{"account_id":25586465,"reputation":1,"user_id":19364149,"display_name":"Daniel Requena"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":309,"favorite_count":0,"down_vote_count":4,"up_vote_count":0,"answer_count":1,"score":-4,"last_activity_date":1664913322,"creation_date":1664882510,"question_id":73947126,"body_markdown":"I need to write a simple column transposition cipher program.\r\n\r\nHere&#39;s what I have so far:\r\n\r\n    public static String transpositionCipher(String text, int N) {\r\n        String output = &quot;&quot;;\r\n        char[][] split = new char[N][text.length()];\r\n        for (int i = 0; i &lt;= N; i++) {\r\n            for (int j = 0; j &lt; text.length(); j++) {\r\n                split[i][j] = text.charAt(i * text.length() + j);\r\n                System.out.println(split[i][j]);\r\n            }\r\n            System.out.println(&quot;&quot;);\r\n        }\r\n    }\r\n\r\nBellow are the inputs and expected outputs of my program:\r\n\r\n**INPUT #1**\r\n\r\n```\r\ntext = &quot;New atak&quot;, N = 3\r\n```\r\n\r\nTransposition matrix:\r\n\r\n```none\r\nN e w\r\n_ a t\r\na k _\r\n```\r\n\r\n**OUPUT #1**\r\n\r\n```\r\n&quot;N aeakwt&quot;\r\n```\r\n\r\n**INPUT #2**\r\n\r\n```\r\ntext = &quot;NOS ATACAN CON CARBUNCO&quot;, N = 5\r\n```\r\n\r\nTransposition matrix:\r\n\r\n```none\r\nN O S _ A\r\nT A C A N\r\n_ C O N _\r\nC A R B U\r\nN C O _ _\r\n```\r\n\r\n**OUPUT #2**\r\n\r\n```\r\n&quot;NT CNOACACSCORO ANB AN U&quot;\r\n```","title":"A simple transposition cipher","body":"<p>I need to write a simple column transposition cipher program.</p>\n<p>Here's what I have so far:</p>\n<pre><code>public static String transpositionCipher(String text, int N) {\n    String output = &quot;&quot;;\n    char[][] split = new char[N][text.length()];\n    for (int i = 0; i &lt;= N; i++) {\n        for (int j = 0; j &lt; text.length(); j++) {\n            split[i][j] = text.charAt(i * text.length() + j);\n            System.out.println(split[i][j]);\n        }\n        System.out.println(&quot;&quot;);\n    }\n}\n</code></pre>\n<p>Bellow are the inputs and expected outputs of my program:</p>\n<p><strong>INPUT #1</strong></p>\n<pre><code>text = &quot;New atak&quot;, N = 3\n</code></pre>\n<p>Transposition matrix:</p>\n<pre class=\"lang-none prettyprint-override\"><code>N e w\n_ a t\na k _\n</code></pre>\n<p><strong>OUPUT #1</strong></p>\n<pre><code>&quot;N aeakwt&quot;\n</code></pre>\n<p><strong>INPUT #2</strong></p>\n<pre><code>text = &quot;NOS ATACAN CON CARBUNCO&quot;, N = 5\n</code></pre>\n<p>Transposition matrix:</p>\n<pre class=\"lang-none prettyprint-override\"><code>N O S _ A\nT A C A N\n_ C O N _\nC A R B U\nN C O _ _\n</code></pre>\n<p><strong>OUPUT #2</strong></p>\n<pre><code>&quot;NT CNOACACSCORO ANB AN U&quot;\n</code></pre>\n"},{"tags":["java","loops","java.util.scanner","nosuchelementexception"],"comments":[{"owner":{"account_id":4390684,"reputation":1345,"user_id":3579174,"accept_rate":89,"display_name":"Ibrennan208"},"score":0,"creation_date":1664911152,"post_id":73952669,"comment_id":130576864,"body_markdown":"You&#39;ll want to become familiar with the concept of a loop. You may want a `while` loop here.","body":"You&#39;ll want to become familiar with the concept of a loop. You may want a <code>while</code> loop here."},{"owner":{"account_id":22337408,"reputation":1,"user_id":16557739,"display_name":"Brian Gomez"},"score":0,"creation_date":1664911644,"post_id":73952669,"comment_id":130577014,"body_markdown":"@Ibrennan208 I have looked at a while loop but was getting this error &#39;Exception in thread &quot;main&quot; java.util.NoSuchElementException&#39; so I thought there might be another solution since I am not sure how to solve that error. I forgot to add that part to the question.","body":"@Ibrennan208 I have looked at a while loop but was getting this error &#39;Exception in thread &quot;main&quot; java.util.NoSuchElementException&#39; so I thought there might be another solution since I am not sure how to solve that error. I forgot to add that part to the question."},{"owner":{"account_id":4390684,"reputation":1345,"user_id":3579174,"accept_rate":89,"display_name":"Ibrennan208"},"score":0,"creation_date":1664913183,"post_id":73952669,"comment_id":130577440,"body_markdown":"We would need more context regarding your previous implementation to tell you exactly what was happening with your `while` loop. It&#39;s possible the scope of the loop was giving you that exception. (Meaning the places you put your brackets and how the brackets could potentially be causing that issue)","body":"We would need more context regarding your previous implementation to tell you exactly what was happening with your <code>while</code> loop. It&#39;s possible the scope of the loop was giving you that exception. (Meaning the places you put your brackets and how the brackets could potentially be causing that issue)"}],"answers":[{"tags":[],"owner":{"account_id":24381519,"reputation":27,"user_id":18312979,"display_name":"kefomo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664912724,"creation_date":1664912724,"answer_id":73952930,"question_id":73952669,"body_markdown":"Like has been said you should learn about loops. There are two types while-loop and for-loop. In this case you should youse the while-loop.\r\n\r\nThe implementation of your problem could be this.\r\n\r\n```java\r\npublic class App {\r\n    public static void main(String[] args) throws Exception {\r\n        Scanner scanner = new Scanner(System.in);\r\n        System.out.println(&quot;What woul you like to do?&quot;);\r\n       \r\n        String response;\r\n        Transactions newTransaction = new Transactions();\r\n\r\n        \r\n        while (true) {\r\n                response = scanner.next().toLowerCase();        \r\n                if (response.equals(&quot;withdraw&quot;)) {\r\n                    newTransaction.Withdrawal();\r\n                    break;\r\n                } else if (response.equals(&quot;deposit&quot;)) {\r\n                    newTransaction.Deposit();\r\n                    break;\r\n                } else {\r\n                    System.out.println(&quot;Please select a valid choice&quot;);        \r\n                }\r\n        }\r\n\r\n        scanner.close();\r\n    }\r\n}","title":"NoSuchElementException error for ATM Machine app (Modified)","body":"<p>Like has been said you should learn about loops. There are two types while-loop and for-loop. In this case you should youse the while-loop.</p>\n<p>The implementation of your problem could be this.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class App {\n    public static void main(String[] args) throws Exception {\n        Scanner scanner = new Scanner(System.in);\n        System.out.println(&quot;What woul you like to do?&quot;);\n       \n        String response;\n        Transactions newTransaction = new Transactions();\n\n        \n        while (true) {\n                response = scanner.next().toLowerCase();        \n                if (response.equals(&quot;withdraw&quot;)) {\n                    newTransaction.Withdrawal();\n                    break;\n                } else if (response.equals(&quot;deposit&quot;)) {\n                    newTransaction.Deposit();\n                    break;\n                } else {\n                    System.out.println(&quot;Please select a valid choice&quot;);        \n                }\n        }\n\n        scanner.close();\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5447828,"reputation":160,"user_id":4465622,"display_name":"Salvatore Allegra"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1664913132,"creation_date":1664913132,"answer_id":73953010,"question_id":73952669,"body_markdown":"You can use a sentinel. A sentinel is a value entered that will end the iteration.\r\n\r\n    //incomplete code showing logic\r\n    int choice;\r\n    Scanner input = new Scanner(System.in);\r\n    System.out.println(&quot;Enter Choice&quot;);\r\n    choice = input.nextInt();\r\n    while(choice != -1){  //-1 is the sentinel, can be value you choose\r\n        //Some logic you want to do\r\n        System.out.println(&quot;Enter choice or -1 to end&quot;);\r\n        choice = input.NextInt();  //notice we input choice again here\r\n    }\r\n\r\n\r\n","title":"NoSuchElementException error for ATM Machine app (Modified)","body":"<p>You can use a sentinel. A sentinel is a value entered that will end the iteration.</p>\n<pre><code>//incomplete code showing logic\nint choice;\nScanner input = new Scanner(System.in);\nSystem.out.println(&quot;Enter Choice&quot;);\nchoice = input.nextInt();\nwhile(choice != -1){  //-1 is the sentinel, can be value you choose\n    //Some logic you want to do\n    System.out.println(&quot;Enter choice or -1 to end&quot;);\n    choice = input.NextInt();  //notice we input choice again here\n}\n</code></pre>\n"}],"owner":{"account_id":22337408,"reputation":1,"user_id":16557739,"display_name":"Brian Gomez"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":73,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":2,"score":-1,"last_activity_date":1664913132,"creation_date":1664911002,"question_id":73952669,"body_markdown":"I am currently learning Java and I am trying to retain the information I learned by building a ATM machine app (I plan on adding more to it in the future). \r\nMy current issue is I would like to ask a user &#39;What would you like to do&#39; repeatedly until a valid input is provided(current valid inputs are &#39;Withdraw&#39; and &#39;Deposit&#39;). \r\n\r\nI have a loop that will repeatedly ask the user &#39;Please select a valid choice&#39; if the input is not valid. If the input is valid it will execute only once, ask &#39;What would you like to do&#39;, and then display a NoSuchElementException. Not sure how to fix this. \r\n\r\nHere is my code:\r\n\r\n**App.java**\r\n```\r\nimport java.util.Scanner;\r\n\r\npublic class App {\r\n    public static void main(String[] args) throws Exception {\r\n        Scanner scanner = new Scanner(System.in); \r\n        boolean done = false;       \r\n\r\n        while(!done) {\r\n            System.out.println(&quot;What woul you like to do?&quot;);\r\n            String response = scanner.next().toLowerCase();\r\n            Transactions newTransaction = new Transactions();\r\n\r\n            if (response.equals(&quot;withdraw&quot;)) {\r\n                newTransaction.Withdrawal();\r\n            } else if (response.equals(&quot;deposit&quot;)) {\r\n                newTransaction.Deposit();\r\n            } else {\r\n                System.out.println(&quot;Please select a valid choice&quot;);\r\n            }   \r\n        }\r\n        scanner.close();\r\n    }\r\n}\r\n```\r\n**Transactions.java**\r\n\r\n```\r\nimport java.util.Scanner;\r\n\r\npublic class Transactions {\r\n    private int currentBalance = 100;\r\n\r\n    public void Withdrawal() {\r\n        Scanner scanner = new Scanner(System.in);\r\n        System.out.println(&quot;How much would you like to withdraw?&quot;);\r\n\r\n        int withdrawAmount = scanner.nextInt();\r\n\r\n        if (withdrawAmount &gt; 0) {\r\n            if (currentBalance &gt; 0) {\r\n\r\n                currentBalance -= withdrawAmount;\r\n                System.out.println(&quot;Amount withdrawn: $&quot; + withdrawAmount);\r\n                System.out.println(&quot;Current Balance: $&quot; + Balance());\r\n                if (currentBalance &lt; 0) {\r\n                    System.out.println(\r\n                            &quot;You have withdrawn more than you have in current balance.\\nYou will be charged a overdraft fee&quot;);\r\n                }\r\n            } else {\r\n                System.out.println(\r\n                        &quot;You have withdrawn more than you have in current balance.\\nYou will be charged a overdraft fee&quot;);\r\n            }\r\n        } else {\r\n            System.out.println(&quot;Can&#39;t remove 0 from account&quot;);\r\n        }\r\n\r\n        scanner.close();\r\n    }\r\n\r\n    public void Deposit() {\r\n        Scanner scanner = new Scanner(System.in);\r\n        System.out.println(&quot;How much would you like to deposit?&quot;);\r\n\r\n        int depositAmount = scanner.nextInt();\r\n\r\n        if (depositAmount &gt; 0) {\r\n            currentBalance += depositAmount;\r\n            Balance();\r\n        }\r\n        System.out.println(&quot;Amount deposited: $&quot; + depositAmount);\r\n        System.out.println(&quot;Current Balance: $&quot; + Balance());\r\n\r\n        scanner.close();\r\n    }\r\n\r\n    public int Balance() {\r\n        return currentBalance;\r\n    }\r\n}\r\n```\r\n\r\n**Error Message**\r\n\r\n[NoSuchElementException][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/QZOS5.png","title":"NoSuchElementException error for ATM Machine app (Modified)","body":"<p>I am currently learning Java and I am trying to retain the information I learned by building a ATM machine app (I plan on adding more to it in the future).\nMy current issue is I would like to ask a user 'What would you like to do' repeatedly until a valid input is provided(current valid inputs are 'Withdraw' and 'Deposit').</p>\n<p>I have a loop that will repeatedly ask the user 'Please select a valid choice' if the input is not valid. If the input is valid it will execute only once, ask 'What would you like to do', and then display a NoSuchElementException. Not sure how to fix this.</p>\n<p>Here is my code:</p>\n<p><strong>App.java</strong></p>\n<pre><code>import java.util.Scanner;\n\npublic class App {\n    public static void main(String[] args) throws Exception {\n        Scanner scanner = new Scanner(System.in); \n        boolean done = false;       \n\n        while(!done) {\n            System.out.println(&quot;What woul you like to do?&quot;);\n            String response = scanner.next().toLowerCase();\n            Transactions newTransaction = new Transactions();\n\n            if (response.equals(&quot;withdraw&quot;)) {\n                newTransaction.Withdrawal();\n            } else if (response.equals(&quot;deposit&quot;)) {\n                newTransaction.Deposit();\n            } else {\n                System.out.println(&quot;Please select a valid choice&quot;);\n            }   \n        }\n        scanner.close();\n    }\n}\n</code></pre>\n<p><strong>Transactions.java</strong></p>\n<pre><code>import java.util.Scanner;\n\npublic class Transactions {\n    private int currentBalance = 100;\n\n    public void Withdrawal() {\n        Scanner scanner = new Scanner(System.in);\n        System.out.println(&quot;How much would you like to withdraw?&quot;);\n\n        int withdrawAmount = scanner.nextInt();\n\n        if (withdrawAmount &gt; 0) {\n            if (currentBalance &gt; 0) {\n\n                currentBalance -= withdrawAmount;\n                System.out.println(&quot;Amount withdrawn: $&quot; + withdrawAmount);\n                System.out.println(&quot;Current Balance: $&quot; + Balance());\n                if (currentBalance &lt; 0) {\n                    System.out.println(\n                            &quot;You have withdrawn more than you have in current balance.\\nYou will be charged a overdraft fee&quot;);\n                }\n            } else {\n                System.out.println(\n                        &quot;You have withdrawn more than you have in current balance.\\nYou will be charged a overdraft fee&quot;);\n            }\n        } else {\n            System.out.println(&quot;Can't remove 0 from account&quot;);\n        }\n\n        scanner.close();\n    }\n\n    public void Deposit() {\n        Scanner scanner = new Scanner(System.in);\n        System.out.println(&quot;How much would you like to deposit?&quot;);\n\n        int depositAmount = scanner.nextInt();\n\n        if (depositAmount &gt; 0) {\n            currentBalance += depositAmount;\n            Balance();\n        }\n        System.out.println(&quot;Amount deposited: $&quot; + depositAmount);\n        System.out.println(&quot;Current Balance: $&quot; + Balance());\n\n        scanner.close();\n    }\n\n    public int Balance() {\n        return currentBalance;\n    }\n}\n</code></pre>\n<p><strong>Error Message</strong></p>\n<p><a href=\"https://i.stack.imgur.com/QZOS5.png\" rel=\"nofollow noreferrer\">NoSuchElementException</a></p>\n"},{"tags":["java","filter","xss"],"comments":[{"owner":{"account_id":3521854,"reputation":1144,"user_id":2943913,"display_name":"Pratik Bhajankar"},"score":0,"creation_date":1664526294,"post_id":57673516,"comment_id":130496529,"body_markdown":"I have same problem any solution you got @Vcima","body":"I have same problem any solution you got @Vcima"}],"answers":[{"tags":[],"owner":{"account_id":91502,"reputation":88301,"user_id":251173,"accept_rate":86,"display_name":"Buhake Sindi"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1664749820,"creation_date":1664749820,"answer_id":73929777,"question_id":57673516,"body_markdown":"Here &quot;might&quot; be your problem:\r\n\r\n    private boolean isFileUploadField(FileItem aFileItem){\r\n        return ! aFileItem.isFormField();\r\n    }\r\n\r\nIt&#39;s returning the opposite response of the boolean value (check the `!`). Remove it and test if that works.\r\n\r\nOnly if the `FileItem.isFormField()` that you can get the form parameter data.\r\n\r\n    private boolean isFileUploadField(FileItem aFileItem){\r\n        return aFileItem.isFormField();\r\n    }","title":"HttpServletRequestWrapper lose multipart inputs values","body":"<p>Here &quot;might&quot; be your problem:</p>\n<pre><code>private boolean isFileUploadField(FileItem aFileItem){\n    return ! aFileItem.isFormField();\n}\n</code></pre>\n<p>It's returning the opposite response of the boolean value (check the <code>!</code>). Remove it and test if that works.</p>\n<p>Only if the <code>FileItem.isFormField()</code> that you can get the form parameter data.</p>\n<pre><code>private boolean isFileUploadField(FileItem aFileItem){\n    return aFileItem.isFormField();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1408815,"reputation":2002,"user_id":1811348,"accept_rate":88,"display_name":"swapyonubuntu"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1664913092,"creation_date":1664913092,"answer_id":73953001,"question_id":57673516,"body_markdown":"If you see for `fRegularParams`, you are touching the `getParameter()` method of servlet lifecycle.\r\n\r\nHere the parameters are already **initialized** in this phase.\r\n\r\nFor `fFileParams` you are trying to get params in constructor, which is **too early** considering lifecycle of servlet and filters.\r\n\r\nImage for your reference:\r\n\r\n[![servlet lifecycle][1]][1]\r\n\r\n**Solution**:\r\n\r\nCan you try with method `request.getParts()` instead?\r\n\r\n\r\nYou can try this approach and override\r\n\r\nhttps://github.com/spring-projects/spring-framework/blob/2f20d6322b7a0fcbbaa80280849e7c31fc78d4a9/spring-web/src/main/java/org/springframework/web/multipart/support/StandardMultipartHttpServletRequest.java#L131\r\n\r\n\r\nWhich internally deals with request parts.\r\n\r\nhttps://github.com/spring-projects/spring-framework/blob/2f20d6322b7a0fcbbaa80280849e7c31fc78d4a9/spring-web/src/main/java/org/springframework/web/multipart/support/StandardMultipartHttpServletRequest.java#L91\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/8VhIb.png\r\n","title":"HttpServletRequestWrapper lose multipart inputs values","body":"<p>If you see for <code>fRegularParams</code>, you are touching the <code>getParameter()</code> method of servlet lifecycle.</p>\n<p>Here the parameters are already <strong>initialized</strong> in this phase.</p>\n<p>For <code>fFileParams</code> you are trying to get params in constructor, which is <strong>too early</strong> considering lifecycle of servlet and filters.</p>\n<p>Image for your reference:</p>\n<p><a href=\"https://i.stack.imgur.com/8VhIb.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8VhIb.png\" alt=\"servlet lifecycle\" /></a></p>\n<p><strong>Solution</strong>:</p>\n<p>Can you try with method <code>request.getParts()</code> instead?</p>\n<p>You can try this approach and override</p>\n<p><a href=\"https://github.com/spring-projects/spring-framework/blob/2f20d6322b7a0fcbbaa80280849e7c31fc78d4a9/spring-web/src/main/java/org/springframework/web/multipart/support/StandardMultipartHttpServletRequest.java#L131\" rel=\"nofollow noreferrer\">https://github.com/spring-projects/spring-framework/blob/2f20d6322b7a0fcbbaa80280849e7c31fc78d4a9/spring-web/src/main/java/org/springframework/web/multipart/support/StandardMultipartHttpServletRequest.java#L131</a></p>\n<p>Which internally deals with request parts.</p>\n<p><a href=\"https://github.com/spring-projects/spring-framework/blob/2f20d6322b7a0fcbbaa80280849e7c31fc78d4a9/spring-web/src/main/java/org/springframework/web/multipart/support/StandardMultipartHttpServletRequest.java#L91\" rel=\"nofollow noreferrer\">https://github.com/spring-projects/spring-framework/blob/2f20d6322b7a0fcbbaa80280849e7c31fc78d4a9/spring-web/src/main/java/org/springframework/web/multipart/support/StandardMultipartHttpServletRequest.java#L91</a></p>\n"}],"owner":{"account_id":5200323,"reputation":423,"user_id":4159935,"accept_rate":20,"display_name":"vcima"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":527,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1664913092,"creation_date":1566904573,"question_id":57673516,"body_markdown":"I&#39;m trying to develop a XSS Filter. All works fine, but the wrapper is losing the multipart fields. \r\n\r\nAfter the filter, in the controller, when I try to obtain the value of a multipart field always is empty. \r\n\r\nI have the following wrapper:\r\n\r\n    public class XSSRequestWrapperMultipart extends HttpServletRequestWrapper {\r\n\r\n    /** Constructor.  */\r\n    public XSSRequestWrapperMultipart(HttpServletRequest aRequest) throws IOException {\r\n        super(aRequest);\r\n        ServletFileUpload upload = new ServletFileUpload( new DiskFileItemFactory());\r\n        try {\r\n            List&lt;FileItem&gt; fileItems = upload.parseRequest(aRequest);\r\n            convertToMaps(fileItems);\r\n        }\r\n        catch(FileUploadException ex){\r\n            throw new IOException(&quot;Cannot parse underlying request: &quot; + ex.toString());\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Return all request parameter names, for both regular controls and file upload\r\n     * controls.\r\n     */\r\n    @Override public Enumeration&lt;String&gt; getParameterNames() {\r\n        Set&lt;String&gt; allNames = new LinkedHashSet&lt;&gt;();\r\n        allNames.addAll(fRegularParams.keySet());\r\n        allNames.addAll(fFileParams.keySet());\r\n        return Collections.enumeration(allNames);\r\n    }\r\n\r\n    /**\r\n     * Return the parameter value. Applies only to regular parameters, not to\r\n     * file upload parameters.\r\n     */\r\n    @Override public String getParameter(String aName) {\r\n        String result = null;\r\n        List&lt;String&gt; values = fRegularParams.get(aName);\r\n        if(values == null){\r\n            //you might try the wrappee, to see if it has a value\r\n        }\r\n        else if (values.isEmpty()) {\r\n            //param name known, but no values present\r\n            result = &quot;&quot;;\r\n        }\r\n        else {\r\n            //return first value in list\r\n            result = values.get(FIRST_VALUE);\r\n        }\r\n        return result;\r\n    }\r\n\r\n    /**\r\n     * Return the parameter values. Applies only to regular parameters,\r\n     * not to file upload parameters.\r\n     */\r\n    @Override public String[] getParameterValues(String aName) {\r\n        String[] result = null;\r\n        List&lt;String&gt; values = fRegularParams.get(aName);\r\n        if(values != null) {\r\n            result = values.toArray(new String[values.size()]);\r\n        }\r\n        return result;\r\n    }\r\n\r\n    /**\r\n     * Return a {@code Map&lt;String, List&lt;String&gt;&gt;} for all regular parameters.\r\n     * Does not return any file upload parameters at all.\r\n     */\r\n    @Override public Map&lt;String, List&lt;String&gt;&gt; getParameterMap() {\r\n        return Collections.unmodifiableMap(fRegularParams);\r\n    }\r\n\r\n    /**\r\n     * Return a {@code List&lt;FileItem&gt;}, in the same order as they appear\r\n     *  in the underlying request.\r\n     */\r\n    public List&lt;FileItem&gt; getFileItems(){\r\n        return new ArrayList&lt;FileItem&gt;(fFileParams.values());\r\n    }\r\n\r\n    /**\r\n     * Return the {@link FileItem} of the given name.\r\n     * &lt;P&gt;If the name is unknown, then return &lt;tt&gt;null&lt;/tt&gt;.\r\n     */\r\n    public FileItem getFileItem(String aFieldName){\r\n        return fFileParams.get(aFieldName);\r\n    }\r\n\r\n\r\n    // PRIVATE\r\n\r\n    /** Store regular params only. May be multivalued (hence the List).  */\r\n    private final Map&lt;String, List&lt;String&gt;&gt; fRegularParams = new LinkedHashMap&lt;&gt;();\r\n\r\n    /** Store file params only. */\r\n    private final Map&lt;String, FileItem&gt; fFileParams = new LinkedHashMap&lt;&gt;();\r\n    private static final int FIRST_VALUE = 0;\r\n\r\n    private void convertToMaps(List&lt;FileItem&gt; aFileItems){\r\n        for(FileItem item: aFileItems) {\r\n            if ( isFileUploadField(item) ) {\r\n                fFileParams.put(item.getFieldName(), item);\r\n            }\r\n            else {\r\n                if( alreadyHasValue(item) ){\r\n                    addMultivaluedItem(item);\r\n                }\r\n                else {\r\n                    addSingleValueItem(item);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    private boolean isFileUploadField(FileItem aFileItem){\r\n        return ! aFileItem.isFormField();\r\n    }\r\n\r\n    private boolean alreadyHasValue(FileItem aItem){\r\n        return fRegularParams.get(aItem.getFieldName()) != null;\r\n    }\r\n\r\n    private void addSingleValueItem(FileItem aItem){\r\n        List&lt;String&gt; list = new ArrayList&lt;&gt;();\r\n        list.add(aItem.getString());\r\n        fRegularParams.put(aItem.getFieldName(), list);\r\n    }\r\n\r\n    private void addMultivaluedItem(FileItem aItem){\r\n        List&lt;String&gt; values = fRegularParams.get(aItem.getFieldName());\r\n        values.add(aItem.getString());\r\n    }\r\n\r\n    }\r\n\r\nAll relative to the fRegularParams works fine, but the fFileParams always appears as null in the controller.\r\n\r\nWhat can I do to keep the values?\r\n\r\nRegards","title":"HttpServletRequestWrapper lose multipart inputs values","body":"<p>I'm trying to develop a XSS Filter. All works fine, but the wrapper is losing the multipart fields. </p>\n\n<p>After the filter, in the controller, when I try to obtain the value of a multipart field always is empty. </p>\n\n<p>I have the following wrapper:</p>\n\n<pre><code>public class XSSRequestWrapperMultipart extends HttpServletRequestWrapper {\n\n/** Constructor.  */\npublic XSSRequestWrapperMultipart(HttpServletRequest aRequest) throws IOException {\n    super(aRequest);\n    ServletFileUpload upload = new ServletFileUpload( new DiskFileItemFactory());\n    try {\n        List&lt;FileItem&gt; fileItems = upload.parseRequest(aRequest);\n        convertToMaps(fileItems);\n    }\n    catch(FileUploadException ex){\n        throw new IOException(\"Cannot parse underlying request: \" + ex.toString());\n    }\n}\n\n/**\n * Return all request parameter names, for both regular controls and file upload\n * controls.\n */\n@Override public Enumeration&lt;String&gt; getParameterNames() {\n    Set&lt;String&gt; allNames = new LinkedHashSet&lt;&gt;();\n    allNames.addAll(fRegularParams.keySet());\n    allNames.addAll(fFileParams.keySet());\n    return Collections.enumeration(allNames);\n}\n\n/**\n * Return the parameter value. Applies only to regular parameters, not to\n * file upload parameters.\n */\n@Override public String getParameter(String aName) {\n    String result = null;\n    List&lt;String&gt; values = fRegularParams.get(aName);\n    if(values == null){\n        //you might try the wrappee, to see if it has a value\n    }\n    else if (values.isEmpty()) {\n        //param name known, but no values present\n        result = \"\";\n    }\n    else {\n        //return first value in list\n        result = values.get(FIRST_VALUE);\n    }\n    return result;\n}\n\n/**\n * Return the parameter values. Applies only to regular parameters,\n * not to file upload parameters.\n */\n@Override public String[] getParameterValues(String aName) {\n    String[] result = null;\n    List&lt;String&gt; values = fRegularParams.get(aName);\n    if(values != null) {\n        result = values.toArray(new String[values.size()]);\n    }\n    return result;\n}\n\n/**\n * Return a {@code Map&lt;String, List&lt;String&gt;&gt;} for all regular parameters.\n * Does not return any file upload parameters at all.\n */\n@Override public Map&lt;String, List&lt;String&gt;&gt; getParameterMap() {\n    return Collections.unmodifiableMap(fRegularParams);\n}\n\n/**\n * Return a {@code List&lt;FileItem&gt;}, in the same order as they appear\n *  in the underlying request.\n */\npublic List&lt;FileItem&gt; getFileItems(){\n    return new ArrayList&lt;FileItem&gt;(fFileParams.values());\n}\n\n/**\n * Return the {@link FileItem} of the given name.\n * &lt;P&gt;If the name is unknown, then return &lt;tt&gt;null&lt;/tt&gt;.\n */\npublic FileItem getFileItem(String aFieldName){\n    return fFileParams.get(aFieldName);\n}\n\n\n// PRIVATE\n\n/** Store regular params only. May be multivalued (hence the List).  */\nprivate final Map&lt;String, List&lt;String&gt;&gt; fRegularParams = new LinkedHashMap&lt;&gt;();\n\n/** Store file params only. */\nprivate final Map&lt;String, FileItem&gt; fFileParams = new LinkedHashMap&lt;&gt;();\nprivate static final int FIRST_VALUE = 0;\n\nprivate void convertToMaps(List&lt;FileItem&gt; aFileItems){\n    for(FileItem item: aFileItems) {\n        if ( isFileUploadField(item) ) {\n            fFileParams.put(item.getFieldName(), item);\n        }\n        else {\n            if( alreadyHasValue(item) ){\n                addMultivaluedItem(item);\n            }\n            else {\n                addSingleValueItem(item);\n            }\n        }\n    }\n}\n\nprivate boolean isFileUploadField(FileItem aFileItem){\n    return ! aFileItem.isFormField();\n}\n\nprivate boolean alreadyHasValue(FileItem aItem){\n    return fRegularParams.get(aItem.getFieldName()) != null;\n}\n\nprivate void addSingleValueItem(FileItem aItem){\n    List&lt;String&gt; list = new ArrayList&lt;&gt;();\n    list.add(aItem.getString());\n    fRegularParams.put(aItem.getFieldName(), list);\n}\n\nprivate void addMultivaluedItem(FileItem aItem){\n    List&lt;String&gt; values = fRegularParams.get(aItem.getFieldName());\n    values.add(aItem.getString());\n}\n\n}\n</code></pre>\n\n<p>All relative to the fRegularParams works fine, but the fFileParams always appears as null in the controller.</p>\n\n<p>What can I do to keep the values?</p>\n\n<p>Regards</p>\n"},{"tags":["java","performance","csv","jmeter","jmx"],"comments":[{"owner":{"account_id":9754126,"reputation":1805,"user_id":7231449,"display_name":"acarlstein"},"score":0,"creation_date":1664916370,"post_id":73950119,"comment_id":130578357,"body_markdown":"Please provide a [Minimal Reproducible Example](https://stackoverflow.com/help/minimal-reproducible-example) of what you tried into your question. It will increase the chances of you receiving help from others and reduce the changes of having your question flagged and removed.","body":"Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">Minimal Reproducible Example</a> of what you tried into your question. It will increase the chances of you receiving help from others and reduce the changes of having your question flagged and removed."}],"answers":[{"tags":[],"owner":{"account_id":3460456,"reputation":162728,"user_id":2897748,"display_name":"Dmitri T"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1664912828,"creation_date":1664912828,"answer_id":73952952,"question_id":73950119,"body_markdown":"I don&#39;t know what do you mean by &quot;JMeter script processes&quot;, if you want to merge 3 CSV files into one and avoid reading the same value by different threads:\r\n\r\n 1. Set [Sharing Mode][1] of the CSV Data Set Config to `All threads`\r\n 2. Set Recycle on EOF to `False`\r\n 3. Set &quot;Stop thread on EOF&quot; to `True`\r\n\r\nThis way each JMeter thread (virtual user) you define in the [Thread Group][2] will read next line from the CSV file on each iteration so each line of data will be used only once by each thread and there won&#39;t be any duplicates. When JMeter reaches the end of file it will mean the end of the test. \r\n\r\n\r\n  [1]: https://www.blazemeter.com/blog/jmeter-csv-dataset-config\r\n  [2]: https://jmeter.apache.org/usermanual/component_reference.html#Thread_Group","title":"How do I implement a dynamic number of JMeter script processes?","body":"<p>I don't know what do you mean by &quot;JMeter script processes&quot;, if you want to merge 3 CSV files into one and avoid reading the same value by different threads:</p>\n<ol>\n<li>Set <a href=\"https://www.blazemeter.com/blog/jmeter-csv-dataset-config\" rel=\"nofollow noreferrer\">Sharing Mode</a> of the CSV Data Set Config to <code>All threads</code></li>\n<li>Set Recycle on EOF to <code>False</code></li>\n<li>Set &quot;Stop thread on EOF&quot; to <code>True</code></li>\n</ol>\n<p>This way each JMeter thread (virtual user) you define in the <a href=\"https://jmeter.apache.org/usermanual/component_reference.html#Thread_Group\" rel=\"nofollow noreferrer\">Thread Group</a> will read next line from the CSV file on each iteration so each line of data will be used only once by each thread and there won't be any duplicates. When JMeter reaches the end of file it will mean the end of the test.</p>\n"}],"owner":{"account_id":26526670,"reputation":15,"user_id":20159557,"display_name":"Filip Klosiewicz"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":61,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73952952,"answer_count":1,"score":0,"last_activity_date":1664912828,"creation_date":1664896835,"question_id":73950119,"body_markdown":"I currently have **three** JMeter scripts that run on **three** separate machines, each of the connected to a unique CSV file on the respective machine. The three scripts are essentially the same, they only differ in the name of the CSV file they call (1.csv, 2.csv, 3.csv), which contains unique identification numbers, this is done for the reason that when the three scripts run **simultaneously**, they do not overlap on the unique identifier and perform the work on them at the same time as it may cause errors. My goal is to consolidate these CSV files into one, and consolidate the three JMeter scripts into one, but be able to perform the same operation on the three separate machines with one CSV file and one JMeter script.\r\n\r\nAdditionally, I would like to be able to run **4 processes** on the three machines, for example (so one machine would run 2 processes instead of 1), and achieve the same result, with them not overlapping.","title":"How do I implement a dynamic number of JMeter script processes?","body":"<p>I currently have <strong>three</strong> JMeter scripts that run on <strong>three</strong> separate machines, each of the connected to a unique CSV file on the respective machine. The three scripts are essentially the same, they only differ in the name of the CSV file they call (1.csv, 2.csv, 3.csv), which contains unique identification numbers, this is done for the reason that when the three scripts run <strong>simultaneously</strong>, they do not overlap on the unique identifier and perform the work on them at the same time as it may cause errors. My goal is to consolidate these CSV files into one, and consolidate the three JMeter scripts into one, but be able to perform the same operation on the three separate machines with one CSV file and one JMeter script.</p>\n<p>Additionally, I would like to be able to run <strong>4 processes</strong> on the three machines, for example (so one machine would run 2 processes instead of 1), and achieve the same result, with them not overlapping.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":1435086,"reputation":4492,"user_id":2323964,"accept_rate":87,"display_name":"Novaterata"},"score":5,"creation_date":1664911275,"post_id":73952648,"comment_id":130576904,"body_markdown":"Requiring less files is a terrible reason, if a vehicle can only be driven a certain way, I would be annoyed if it &quot;lied&quot; about being able to drive the other way then threw an error. There are legitimate reasons for throwing an error (like if the wheels fell off), but it shouldn&#39;t be a way to jam a bunch of methods into a single interface","body":"Requiring less files is a terrible reason, if a vehicle can only be driven a certain way, I would be annoyed if it &quot;lied&quot; about being able to drive the other way then threw an error. There are legitimate reasons for throwing an error (like if the wheels fell off), but it shouldn&#39;t be a way to jam a bunch of methods into a single interface"},{"owner":{"account_id":4589753,"reputation":69926,"user_id":3723423,"accept_rate":50,"display_name":"Christophe"},"score":0,"creation_date":1664948881,"post_id":73952648,"comment_id":130582999,"body_markdown":"This question is not opinion based. The interface segregation principle tells which option is most suited and on an objective base.","body":"This question is not opinion based. The interface segregation principle tells which option is most suited and on an objective base."}],"answers":[{"tags":[],"owner":{"account_id":9643196,"reputation":593,"user_id":7156819,"display_name":"Rzvan Puiu"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1664911325,"creation_date":1664911325,"answer_id":73952718,"question_id":73952648,"body_markdown":"You should create interfaces that represent the abilities you want your classes to have. In your case the second example is correct: What is common amongst vehicles? You can drive them. Therefore a vehicle is Drivable. Bus and RaceCar are implementations of Drivable. They can also be Paintable, Washable, etc","title":"Should I implement one interface with two methods or two interfaces?","body":"<p>You should create interfaces that represent the abilities you want your classes to have. In your case the second example is correct: What is common amongst vehicles? You can drive them. Therefore a vehicle is Drivable. Bus and RaceCar are implementations of Drivable. They can also be Paintable, Washable, etc</p>\n"},{"tags":[],"owner":{"account_id":2734060,"reputation":263882,"user_id":2357112,"accept_rate":26,"display_name":"user2357112"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1664912383,"creation_date":1664912383,"answer_id":73952885,"question_id":73952648,"body_markdown":"Option 2 is terrible. Your objects are lying about what functionality they support. Reducing the number of files is nowhere near enough of a justification for that.\r\n\r\nOption 1 is better, but consider option 3: just don&#39;t write those interfaces at all.\r\n\r\nIt doesn&#39;t sound like you have any other classes that would implement those interfaces. The names &quot;RaceCarImpl&quot; and &quot;BusImpl&quot; strongly suggest that those are the *only* implementations. In that case, just use the classes directly.\r\n\r\nIf you later want to write more classes that *actually* share a common API, you&#39;ll have a better understanding of what your interfaces should look like - what methods really generalize, what methods are specific to particular implementations, etc. You can refactor any code that took concrete classes to take meaningful interfaces then.","title":"Should I implement one interface with two methods or two interfaces?","body":"<p>Option 2 is terrible. Your objects are lying about what functionality they support. Reducing the number of files is nowhere near enough of a justification for that.</p>\n<p>Option 1 is better, but consider option 3: just don't write those interfaces at all.</p>\n<p>It doesn't sound like you have any other classes that would implement those interfaces. The names &quot;RaceCarImpl&quot; and &quot;BusImpl&quot; strongly suggest that those are the <em>only</em> implementations. In that case, just use the classes directly.</p>\n<p>If you later want to write more classes that <em>actually</em> share a common API, you'll have a better understanding of what your interfaces should look like - what methods really generalize, what methods are specific to particular implementations, etc. You can refactor any code that took concrete classes to take meaningful interfaces then.</p>\n"}],"owner":{"account_id":1803665,"reputation":4255,"user_id":1641300,"accept_rate":36,"display_name":"Tinker"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":307,"favorite_count":0,"down_vote_count":2,"up_vote_count":4,"closed_date":1664913571,"answer_count":2,"score":2,"last_activity_date":1664912383,"creation_date":1664910911,"question_id":73952648,"body_markdown":"I have two classes that are similar in nature but they have different functional signatures. I am considering between having two interfaces vs having one. Let me illustrate: \r\n\r\n### Approach 1: two interfaces\r\n```\r\npublic interface RaceCar {\r\n\r\n    CompletableFuture&lt;Double&gt; drive(final Wheel arg1, Tactic tactic);\r\n\r\n}\r\n\r\npublic interface Bus {\r\n\r\n    CompletableFuture&lt;Double&gt; drive(final String someOtherKey, final Controller arg2);\r\n}\r\n```\r\n\r\nOne abstract class AbstractCar to share logic between the two: \r\n```\r\npublic abstract AbstractCar { \r\n    // Add shared logic here... \r\n} \r\n```\r\n\r\nAnd the implementation. \r\n```\r\n\r\npublic class RaceCarImpl extends AbstractCar implements RaceCar {\r\n... \r\n}\r\n\r\n\r\npublic class BusImpl extends AbstractCar implements Bus {\r\n...\r\n}\r\n```\r\n\r\nResults: 2 interfaces, 1 abstract, 2 implementation = 5 files. \r\n\r\n\r\n## Approach 2: One interface, two methods \r\n```\r\npublic interface Vehicle { \r\n\r\n    CompletableFuture&lt;Double&gt; drive(final Wheel arg1, Tactic tactic);\r\n\r\n    CompletableFuture&lt;Double&gt; drive(final String someOtherKey, final Controller arg2);\r\n\r\n} \r\n```\r\n\r\n```\r\npublic abstract AbstractVehicle implements Vehicle {\r\n    // Sharing code here \r\n} \r\n```\r\n\r\n```\r\npublic class RaceCar extends AbstractVehicle { \r\n\r\n    CompletableFuture&lt;Double&gt; drive(final Wheel arg1, Tactic tactic) { \r\n        // Implement this ... \r\n    } \r\n\r\n    CompletableFuture&lt;Double&gt; drive(final String someOtherKey, final Controller arg2) { \r\n        throw new IllegalStateException(&quot;Not implemented&quot;);  \r\n    } \r\n\r\n} \r\n\r\n\r\npublic class Bus extends AbstractVehicle { \r\n\r\n    CompletableFuture&lt;Double&gt; drive(final Wheel arg1, Tactic tactic) { \r\n        throw new IllegalStateException(&quot;Not implemented&quot;);  \r\n    } \r\n\r\n    CompletableFuture&lt;Double&gt; drive(final String someOtherKey, final Controller arg2) { \r\n        // Implement this \r\n    } \r\n\r\n} \r\n\r\n```\r\n\r\nResults: 1 interfaces, 1 abstract, 2 implementation = 4 files. \r\n\r\n\r\n## Verdict \r\n\r\nI think having 1 interface is superior because it requires less files. What are your thoughts? \r\n\r\nWhich approach above incurs less technical debt in the long term? \r\n","title":"Should I implement one interface with two methods or two interfaces?","body":"<p>I have two classes that are similar in nature but they have different functional signatures. I am considering between having two interfaces vs having one. Let me illustrate:</p>\n<h3>Approach 1: two interfaces</h3>\n<pre><code>public interface RaceCar {\n\n    CompletableFuture&lt;Double&gt; drive(final Wheel arg1, Tactic tactic);\n\n}\n\npublic interface Bus {\n\n    CompletableFuture&lt;Double&gt; drive(final String someOtherKey, final Controller arg2);\n}\n</code></pre>\n<p>One abstract class AbstractCar to share logic between the two:</p>\n<pre><code>public abstract AbstractCar { \n    // Add shared logic here... \n} \n</code></pre>\n<p>And the implementation.</p>\n<pre><code>\npublic class RaceCarImpl extends AbstractCar implements RaceCar {\n... \n}\n\n\npublic class BusImpl extends AbstractCar implements Bus {\n...\n}\n</code></pre>\n<p>Results: 2 interfaces, 1 abstract, 2 implementation = 5 files.</p>\n<h2>Approach 2: One interface, two methods</h2>\n<pre><code>public interface Vehicle { \n\n    CompletableFuture&lt;Double&gt; drive(final Wheel arg1, Tactic tactic);\n\n    CompletableFuture&lt;Double&gt; drive(final String someOtherKey, final Controller arg2);\n\n} \n</code></pre>\n<pre><code>public abstract AbstractVehicle implements Vehicle {\n    // Sharing code here \n} \n</code></pre>\n<pre><code>public class RaceCar extends AbstractVehicle { \n\n    CompletableFuture&lt;Double&gt; drive(final Wheel arg1, Tactic tactic) { \n        // Implement this ... \n    } \n\n    CompletableFuture&lt;Double&gt; drive(final String someOtherKey, final Controller arg2) { \n        throw new IllegalStateException(&quot;Not implemented&quot;);  \n    } \n\n} \n\n\npublic class Bus extends AbstractVehicle { \n\n    CompletableFuture&lt;Double&gt; drive(final Wheel arg1, Tactic tactic) { \n        throw new IllegalStateException(&quot;Not implemented&quot;);  \n    } \n\n    CompletableFuture&lt;Double&gt; drive(final String someOtherKey, final Controller arg2) { \n        // Implement this \n    } \n\n} \n\n</code></pre>\n<p>Results: 1 interfaces, 1 abstract, 2 implementation = 4 files.</p>\n<h2>Verdict</h2>\n<p>I think having 1 interface is superior because it requires less files. What are your thoughts?</p>\n<p>Which approach above incurs less technical debt in the long term?</p>\n"},{"tags":["java","methods"],"comments":[{"owner":{"account_id":1993154,"reputation":585,"user_id":1786699,"accept_rate":100,"display_name":"PapaAtHome"},"score":0,"creation_date":1664966264,"post_id":73952041,"comment_id":130587773,"body_markdown":"Please read [this](https://stackoverflow.com/help/how-to-ask)\nYour question is not clear, What have you tried? What were the results?","body":"Please read <a href=\"https://stackoverflow.com/help/how-to-ask\">this</a> Your question is not clear, What have you tried? What were the results?"}],"answers":[{"tags":[],"owner":{"account_id":22478656,"reputation":53,"user_id":18235324,"display_name":"NumericPrime"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664912359,"creation_date":1664912359,"answer_id":73952879,"question_id":73952041,"body_markdown":"The problem is: How is Java supposed to know wich method to call.\r\nUsually one would rename one methods but I see you are probably using conflicting interfaces. That way I&#39;m afraid it&#39;s not possible to do so.\r\nDid you write these interfaces yourself or are they beyond your controll?\r\n\r\nHowever if reeaaaly want to do something like this you can only implement the interface for your second method and have a instance of the interface with the first mehtod ready like this:\r\n```java\r\npublic class TestClass implements ConflictingInterface1{\r\n\t@Override\r\n\tpublic void method() {\r\n\t\tSystem.out.println(&quot;Hello there!&quot;);\r\n\t}\r\n\tpublic ConflictingInterface2 conflictingInterface2Instance=new ConflictingInterface2() {\r\n\r\n\t\t@Override\r\n\t\tpublic int method() {\r\n\t\t\tmethod();\r\n\t\t\treturn 0;\r\n\t\t}};\r\n}\r\n```\r\n\r\nHope this helps!","title":"How to solve conflicting java methods","body":"<p>The problem is: How is Java supposed to know wich method to call.\nUsually one would rename one methods but I see you are probably using conflicting interfaces. That way I'm afraid it's not possible to do so.\nDid you write these interfaces yourself or are they beyond your controll?</p>\n<p>However if reeaaaly want to do something like this you can only implement the interface for your second method and have a instance of the interface with the first mehtod ready like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class TestClass implements ConflictingInterface1{\n    @Override\n    public void method() {\n        System.out.println(&quot;Hello there!&quot;);\n    }\n    public ConflictingInterface2 conflictingInterface2Instance=new ConflictingInterface2() {\n\n        @Override\n        public int method() {\n            method();\n            return 0;\n        }};\n}\n</code></pre>\n<p>Hope this helps!</p>\n"}],"owner":{"account_id":26365805,"reputation":1,"user_id":20021305,"display_name":"stack"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":68,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":1,"score":-2,"last_activity_date":1664912359,"creation_date":1664907388,"question_id":73952041,"body_markdown":"Is there a way that I can not use the below method which just returns the handlerequests ? I just don&#39;t want the method handleRequest method. Can somone help me understand what is this method doing &#39;handlerequest&#39; ? Any alternative to not use this method ? Because it is conflicting with someother thing which I&#39;m trying to do.\r\n\r\n```\r\n @Override\r\n    public FutureResponse handleRequest(BackendRequestContext backendRequestContext, Request request, Metrics metrics) {\r\n        return handleRequests(backendRequestContext, ImmutableList.of(request), metrics).get(0);\r\n    }\r\n```\r\n```\r\n    @Override\r\n    public List&lt;FutureResponse&gt; handleRequests(BackendRequestContext context, List&lt;Request&gt; requests, Metrics metrics) {\r\n        StringRequest[] stringRequests = new StringRequest[requests.size()];\r\n\r\n        final String language = context.locale().toLanguageTag().replace(&quot;-&quot;, &quot;_&quot;);\r\n\r\n        for (int i = 0; i &lt; requests.size(); i++) {\r\n            final Request request = requests.get(i);\r\n\r\n            final String id = request.requiredPathParam(STRING_ID_PATH_PARAM);\r\n            final Optional&lt;String&gt; marketplaceDisplayName = request.queryParam(MARKETPLACE_NAME_QUERY_PARAM);\r\n            final Optional&lt;String&gt; stage = request.queryParam(STAGE_QUERY_PARAM);\r\n\r\n            final StringRequest stringRequest = new StringRequest(id);\r\n            stringRequest.setLanguage(language);\r\n            marketplaceDisplayName.ifPresent(stringRequest::setMarketplaceName);\r\n            stage.map(Stage::getStage).ifPresent(stringRequest::setStage);\r\n            stringRequests[i] = stringRequest;\r\n        }\r\n\r\n        ChainableFuture&lt;StringResultBatch&gt; batchFuture = ChainableFuture.immediate(invokeBatchSync(stringRequests));\r\n\r\n        ImmutableList.Builder&lt;FutureResponse&gt; results = ImmutableList.builder();\r\n        for (int i = 0; i &lt; requests.size(); i++) {\r\n            Request request = requests.get(i);\r\n            int index = i;\r\n            FutureResponse requestResponse = FutureResponse.of(request, batchFuture\r\n                    .transform(batchResponse -&gt; {\r\n                        try {\r\n                            if (batchResponse != null) {\r\n                                return transform(request, batchResponse.get(index), language);\r\n                            }\r\n                        } catch (IllegalArgumentException | IOException e) {\r\n                            LOGGER.error(&quot;&quot;, e);\r\n                        }\r\n                        return Response.builder()\r\n                                .withRequest(request)\r\n                                .withEntityDescriptor(EntityDescriptors.ERROR_V1)\r\n                                .withStatus(Http.Status.SERVICE_UNAVAILABLE)\r\n                                .withBody(ErrorResponses.ServerError.serviceUnavailable(ErrorResponse.InternalInfo.builder()\r\n                                        .withMessage(&quot;Error retrieving [&quot;\r\n                                                + request.requiredPathParam(STRING_ID_PATH_PARAM)\r\n                                                + &quot;]&quot;)\r\n                                        .build())\r\n                                        .tokens())\r\n                                .build();\r\n                    }));\r\n\r\n            results.add(requestResponse);\r\n        }\r\n\r\n        return results.build();\r\n    }\r\n```","title":"How to solve conflicting java methods","body":"<p>Is there a way that I can not use the below method which just returns the handlerequests ? I just don't want the method handleRequest method. Can somone help me understand what is this method doing 'handlerequest' ? Any alternative to not use this method ? Because it is conflicting with someother thing which I'm trying to do.</p>\n<pre><code> @Override\n    public FutureResponse handleRequest(BackendRequestContext backendRequestContext, Request request, Metrics metrics) {\n        return handleRequests(backendRequestContext, ImmutableList.of(request), metrics).get(0);\n    }\n</code></pre>\n<pre><code>    @Override\n    public List&lt;FutureResponse&gt; handleRequests(BackendRequestContext context, List&lt;Request&gt; requests, Metrics metrics) {\n        StringRequest[] stringRequests = new StringRequest[requests.size()];\n\n        final String language = context.locale().toLanguageTag().replace(&quot;-&quot;, &quot;_&quot;);\n\n        for (int i = 0; i &lt; requests.size(); i++) {\n            final Request request = requests.get(i);\n\n            final String id = request.requiredPathParam(STRING_ID_PATH_PARAM);\n            final Optional&lt;String&gt; marketplaceDisplayName = request.queryParam(MARKETPLACE_NAME_QUERY_PARAM);\n            final Optional&lt;String&gt; stage = request.queryParam(STAGE_QUERY_PARAM);\n\n            final StringRequest stringRequest = new StringRequest(id);\n            stringRequest.setLanguage(language);\n            marketplaceDisplayName.ifPresent(stringRequest::setMarketplaceName);\n            stage.map(Stage::getStage).ifPresent(stringRequest::setStage);\n            stringRequests[i] = stringRequest;\n        }\n\n        ChainableFuture&lt;StringResultBatch&gt; batchFuture = ChainableFuture.immediate(invokeBatchSync(stringRequests));\n\n        ImmutableList.Builder&lt;FutureResponse&gt; results = ImmutableList.builder();\n        for (int i = 0; i &lt; requests.size(); i++) {\n            Request request = requests.get(i);\n            int index = i;\n            FutureResponse requestResponse = FutureResponse.of(request, batchFuture\n                    .transform(batchResponse -&gt; {\n                        try {\n                            if (batchResponse != null) {\n                                return transform(request, batchResponse.get(index), language);\n                            }\n                        } catch (IllegalArgumentException | IOException e) {\n                            LOGGER.error(&quot;&quot;, e);\n                        }\n                        return Response.builder()\n                                .withRequest(request)\n                                .withEntityDescriptor(EntityDescriptors.ERROR_V1)\n                                .withStatus(Http.Status.SERVICE_UNAVAILABLE)\n                                .withBody(ErrorResponses.ServerError.serviceUnavailable(ErrorResponse.InternalInfo.builder()\n                                        .withMessage(&quot;Error retrieving [&quot;\n                                                + request.requiredPathParam(STRING_ID_PATH_PARAM)\n                                                + &quot;]&quot;)\n                                        .build())\n                                        .tokens())\n                                .build();\n                    }));\n\n            results.add(requestResponse);\n        }\n\n        return results.build();\n    }\n</code></pre>\n"},{"tags":["java","reflection","noclassdeffounderror","corba"],"comments":[{"owner":{"account_id":34833,"reputation":9231,"user_id":98525,"accept_rate":92,"display_name":"tuergeist"},"score":1,"creation_date":1353872653,"post_id":13517497,"comment_id":18567331,"body_markdown":"What is about your classpath?","body":"What is about your classpath?"},{"owner":{"account_id":222159,"reputation":396,"user_id":480579,"display_name":"Jeff"},"score":0,"creation_date":1360350590,"post_id":13517497,"comment_id":20692519,"body_markdown":"Your classloader may be confused.  Do you have more than one instance of the same JAR file(s) on your classpath?","body":"Your classloader may be confused.  Do you have more than one instance of the same JAR file(s) on your classpath?"}],"answers":[{"tags":[],"owner":{"account_id":2657758,"reputation":635,"user_id":2298085,"display_name":"mki"},"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1366368769,"creation_date":1366368769,"answer_id":16102962,"question_id":13517497,"body_markdown":"NoClassDefFoundError means that the class was found during compile time but NOT found during runtime.\r\nMost of the time you have a difference between the classpath your runtime environnement and the classpath of your compile environnement. And it will work after you find the difference and fix it.\r\n\r\nIf you have checked and you are 100% sure that the classpath are the same, then the error is more tricky and you can read this tutorial to solve the problem :\r\nhttp://javarevisited.blogspot.be/2011/06/noclassdeffounderror-exception-in.html\r\n","title":"java.lang.NoClassDefFoundError: org/omg/CORBA/InterfaceDef","body":"<p>NoClassDefFoundError means that the class was found during compile time but NOT found during runtime.\nMost of the time you have a difference between the classpath your runtime environnement and the classpath of your compile environnement. And it will work after you find the difference and fix it.</p>\n\n<p>If you have checked and you are 100% sure that the classpath are the same, then the error is more tricky and you can read this tutorial to solve the problem :\n<a href=\"http://javarevisited.blogspot.be/2011/06/noclassdeffounderror-exception-in.html\" rel=\"nofollow\">http://javarevisited.blogspot.be/2011/06/noclassdeffounderror-exception-in.html</a></p>\n"},{"tags":[],"owner":{"account_id":406122,"reputation":455,"user_id":775441,"display_name":"coz"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1641903409,"creation_date":1641903409,"answer_id":70666658,"question_id":13517497,"body_markdown":"The following error is generated after you install or upgrade the version of Java that a custom application uses: \r\n\r\n    Caused by: java.lang.NoClassDefFoundError: org/omg/CORBA/UserException\r\n\r\nThe problem occurs because the java.corba module (for example, org.omg.CORBA* packages) were deprecated in Java 9. In Java 11, that module is no longer be available.\r\n\r\nDeprecating the module means that the classes in the module are not available in the class path, by default. However, you can add them to the class path by including the --add-module java.corba option on the javac or java command line.\r\n\r\nNote: This option is available in Java 9 and Java 10. The CORBA modules are not available in Java 11. However, a workaround is available that enables you to add those modules for Java 11. See the following examples for Java 9 and 10, as well as the workaround for Java 11.\r\n\r\nExample for Java 9 and 10:\r\n\r\nIn Java 9 and 10, you need to change this command:\r\n\r\n    jdk-9.0.4/bin/java -classpath &quot;log4j.jar;sas.core.jar;sas.security.sspi.jar;sas.svc.connection.jar&quot; javaclass \r\n\r\nWhen you include --add-module java.corba , the command looks like this:\r\n\r\n    jdk-9.0.4/bin/java --add-modules=java.corba -classpath &quot;log4j.jar;sas.core.jar;sas.security.sspi.jar;sas.svc.connection.jar&quot; javaclass \r\n\r\nWorkaround for Java 11:\r\n\r\nTo add the CORBA modules to Java 11, you must download GlassFish CORBA JAR files externally from online resources and add them to the class path for Java 11. The following list shows the five GlassFish JAR files that you need:\r\n\r\n    glassfish-corba-internal-api.jar\r\n    glassfish-corba-omgapi.jar\r\n    glassfish-corba-orb.jar\r\n    pfl-basic.jar\r\n    pfl-tf.jar\r\n\r\n[http://support.sas.com/kb/63/716.html][1]\r\n\r\n\r\n  [1]: http://support.sas.com/kb/63/716.html","title":"java.lang.NoClassDefFoundError: org/omg/CORBA/InterfaceDef","body":"<p>The following error is generated after you install or upgrade the version of Java that a custom application uses:</p>\n<pre><code>Caused by: java.lang.NoClassDefFoundError: org/omg/CORBA/UserException\n</code></pre>\n<p>The problem occurs because the java.corba module (for example, org.omg.CORBA* packages) were deprecated in Java 9. In Java 11, that module is no longer be available.</p>\n<p>Deprecating the module means that the classes in the module are not available in the class path, by default. However, you can add them to the class path by including the --add-module java.corba option on the javac or java command line.</p>\n<p>Note: This option is available in Java 9 and Java 10. The CORBA modules are not available in Java 11. However, a workaround is available that enables you to add those modules for Java 11. See the following examples for Java 9 and 10, as well as the workaround for Java 11.</p>\n<p>Example for Java 9 and 10:</p>\n<p>In Java 9 and 10, you need to change this command:</p>\n<pre><code>jdk-9.0.4/bin/java -classpath &quot;log4j.jar;sas.core.jar;sas.security.sspi.jar;sas.svc.connection.jar&quot; javaclass \n</code></pre>\n<p>When you include --add-module java.corba , the command looks like this:</p>\n<pre><code>jdk-9.0.4/bin/java --add-modules=java.corba -classpath &quot;log4j.jar;sas.core.jar;sas.security.sspi.jar;sas.svc.connection.jar&quot; javaclass \n</code></pre>\n<p>Workaround for Java 11:</p>\n<p>To add the CORBA modules to Java 11, you must download GlassFish CORBA JAR files externally from online resources and add them to the class path for Java 11. The following list shows the five GlassFish JAR files that you need:</p>\n<pre><code>glassfish-corba-internal-api.jar\nglassfish-corba-omgapi.jar\nglassfish-corba-orb.jar\npfl-basic.jar\npfl-tf.jar\n</code></pre>\n<p><a href=\"http://support.sas.com/kb/63/716.html\" rel=\"noreferrer\">http://support.sas.com/kb/63/716.html</a></p>\n"}],"owner":{"account_id":1344625,"reputation":3248,"user_id":1285615,"accept_rate":55,"display_name":"sakthisundar"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":21303,"favorite_count":0,"down_vote_count":0,"up_vote_count":14,"answer_count":2,"score":14,"last_activity_date":1664912137,"creation_date":1353604914,"question_id":13517497,"body_markdown":"I am seeing `java.lang.NoClassDefFoundError: org/omg/CORBA/InterfaceDef` when I am calling the method `getMethod` of the `java.lang.Class`. I am trying to get the `getEmsSession` method in `EmsSeeionFactory_I` of TMF specific jars using reflection. But when I checked for the class in the `jacorb.jar`,  `org/omg/CORBA/InterfaceDef.class` is available on the class path. I have seen in other forums and I am seeing no answer for the same question in those forums as well. It looks like this exception being thrown from native VM code. I am left with no clue now. Any Ideas ? Complete stack trace is as below\r\n\r\n    java.lang.NoClassDefFoundError: org/omg/CORBA/InterfaceDef\r\n            at java.lang.Class.getDeclaredMethods0(Native Method)\r\n            at java.lang.Class.privateGetDeclaredMethods(Class.java:2427)\r\n            at java.lang.Class.getMethod0(Class.java:2670)\r\n            at java.lang.Class.getMethod0(Class.java:2688)\r\n            at java.lang.Class.getMethod(Class.java:1603)\r\n\r\n","title":"java.lang.NoClassDefFoundError: org/omg/CORBA/InterfaceDef","body":"<p>I am seeing <code>java.lang.NoClassDefFoundError: org/omg/CORBA/InterfaceDef</code> when I am calling the method <code>getMethod</code> of the <code>java.lang.Class</code>. I am trying to get the <code>getEmsSession</code> method in <code>EmsSeeionFactory_I</code> of TMF specific jars using reflection. But when I checked for the class in the <code>jacorb.jar</code>,  <code>org/omg/CORBA/InterfaceDef.class</code> is available on the class path. I have seen in other forums and I am seeing no answer for the same question in those forums as well. It looks like this exception being thrown from native VM code. I am left with no clue now. Any Ideas ? Complete stack trace is as below</p>\n\n<pre><code>java.lang.NoClassDefFoundError: org/omg/CORBA/InterfaceDef\n        at java.lang.Class.getDeclaredMethods0(Native Method)\n        at java.lang.Class.privateGetDeclaredMethods(Class.java:2427)\n        at java.lang.Class.getMethod0(Class.java:2670)\n        at java.lang.Class.getMethod0(Class.java:2688)\n        at java.lang.Class.getMethod(Class.java:1603)\n</code></pre>\n"},{"tags":["java","gradle","build.gradle","gradle-plugin"],"comments":[{"owner":{"account_id":4623673,"reputation":6002,"user_id":4161471,"display_name":"aSemy"},"score":1,"creation_date":1664919611,"post_id":73952772,"comment_id":130579174,"body_markdown":"&quot;You can use tasks fully qualified name to execute a specific task in a specific subproject. For example: `gradle :services:webservice:build` will run the build task of the webservice subproject.&quot;\n\nhttps://docs.gradle.org/current/userguide/intro_multi_project_builds.html#sec:executing_tasks_by_fully_qualified_name","body":"&quot;You can use tasks fully qualified name to execute a specific task in a specific subproject. For example: <code>gradle :services:webservice:build</code> will run the build task of the webservice subproject.&quot;  <a href=\"https://docs.gradle.org/current/userguide/intro_multi_project_builds.html#sec:executing_tasks_by_fully_qualified_name\" rel=\"nofollow noreferrer\">docs.gradle.org/current/userguide/&hellip;</a>"}],"owner":{"account_id":6186008,"reputation":3119,"user_id":4820101,"accept_rate":24,"display_name":"samshers"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":211,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1664911645,"creation_date":1664911645,"question_id":73952772,"body_markdown":"I have a gradle parent project with few sub-projects.\r\nFor example - my settings.gradle is like below - \r\n\r\n    rootProject.name = &#39;myproject-service&#39;\r\n    include &#39;myproject-service-restclient&#39;\r\n    include &#39;myproject-service-core&#39;\r\n    include &#39;myproject-service-server&#39;\r\n\r\n\r\nI have configured gradle maven-publish task in the root project&#39;s `build.gradle` and applied it to all sub-projects as I want to publish all the sub-projects.  \r\n\r\nTo publish above projects i am running -   \r\n`gradle publish`  \r\nand its publishing **all** of the above projects. \r\n\r\nSo far so good. But the problem I have is - when i do changes to `myproject-service-core`, I only want to publish `myproject-service-core`&#39;s binary(i.e `myproject-service-core.jar`) to maven repo. I am not able to figure out how to publish only selective projects. \r\n\r\nI need something like - `gradle publish --project myproject-service-core` &lt;-- how to achive this.\r\n \r\n\r\n","title":"gradle publish - only selective projects","body":"<p>I have a gradle parent project with few sub-projects.\nFor example - my settings.gradle is like below -</p>\n<pre><code>rootProject.name = 'myproject-service'\ninclude 'myproject-service-restclient'\ninclude 'myproject-service-core'\ninclude 'myproject-service-server'\n</code></pre>\n<p>I have configured gradle maven-publish task in the root project's <code>build.gradle</code> and applied it to all sub-projects as I want to publish all the sub-projects.</p>\n<p>To publish above projects i am running -<br />\n<code>gradle publish</code><br />\nand its publishing <strong>all</strong> of the above projects.</p>\n<p>So far so good. But the problem I have is - when i do changes to <code>myproject-service-core</code>, I only want to publish <code>myproject-service-core</code>'s binary(i.e <code>myproject-service-core.jar</code>) to maven repo. I am not able to figure out how to publish only selective projects.</p>\n<p>I need something like - <code>gradle publish --project myproject-service-core</code> &lt;-- how to achive this.</p>\n"},{"tags":["java","spring-data-jpa","many-to-many"],"comments":[{"owner":{"account_id":25822,"reputation":78747,"user_id":66686,"accept_rate":87,"display_name":"Jens Schauder"},"score":1,"creation_date":1664262912,"post_id":73860940,"comment_id":130424853,"body_markdown":"It is completely unclear to me what you are asking. `springUserRepository.findById(1L).get()` returns entity instances not JSON. Also what is &quot;strange&quot; about the result and what does &quot;working&quot; mean. Please state clearly what you do, what you expect as a result and what you actually get.","body":"It is completely unclear to me what you are asking. <code>springUserRepository.findById(1L).get()</code> returns entity instances not JSON. Also what is &quot;strange&quot; about the result and what does &quot;working&quot; mean. Please state clearly what you do, what you expect as a result and what you actually get."},{"owner":{"account_id":5195256,"reputation":381,"user_id":4156801,"accept_rate":54,"display_name":"John Zhang"},"score":0,"creation_date":1664284113,"post_id":73860940,"comment_id":130432186,"body_markdown":"@JensSchauder FindById return same role, three times. I updated My question.","body":"@JensSchauder FindById return same role, three times. I updated My question."},{"owner":{"account_id":25822,"reputation":78747,"user_id":66686,"accept_rate":87,"display_name":"Jens Schauder"},"score":0,"creation_date":1664284641,"post_id":73860940,"comment_id":130432412,"body_markdown":"Please share the actual code of the entities. The one you currently share isn&#39;t even close to compiling, so it also isn&#39;t even close to the one causing you problems. Also share the actual repository declaration and the SQL generated by the methods.","body":"Please share the actual code of the entities. The one you currently share isn&#39;t even close to compiling, so it also isn&#39;t even close to the one causing you problems. Also share the actual repository declaration and the SQL generated by the methods."},{"owner":{"account_id":5195256,"reputation":381,"user_id":4156801,"accept_rate":54,"display_name":"John Zhang"},"score":0,"creation_date":1664285961,"post_id":73860940,"comment_id":130432976,"body_markdown":"write a simple demo, updated my code @JensSchauder","body":"write a simple demo, updated my code @JensSchauder"},{"owner":{"account_id":5195256,"reputation":381,"user_id":4156801,"accept_rate":54,"display_name":"John Zhang"},"score":0,"creation_date":1664287409,"post_id":73860940,"comment_id":130433648,"body_markdown":"https://github.com/shuanshuan/demo-questions @JensSchauder","body":"<a href=\"https://github.com/shuanshuan/demo-questions\" rel=\"nofollow noreferrer\">github.com/shuanshuan/demo-questions</a> @JensSchauder"}],"answers":[{"tags":[],"owner":{"account_id":26506001,"reputation":2574,"user_id":20142156,"display_name":"Dhaval Gajjar"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1664911599,"creation_date":1664911599,"answer_id":73952767,"question_id":73860940,"body_markdown":"While fetching data using id Spring Data JPa considers your `fetch = FetchType.EAGER` but while fetching with other property it ignores and lazy loads those so you don&#39;t see duplicate records.\r\n\r\nTo achieve same output at both query you need to add how Spring Data JPA construct query.\r\n```\r\n@ManyToMany(fetch = FetchType.EAGER, cascade = CascadeType.REFRESH)\r\n@Fetch(FetchMode.SUBSELECT)\r\n@JoinTable(name = &quot;test_role_and_permission&quot;, inverseJoinColumns = \r\n    @JoinColumn(name = &quot;permission_id&quot;), joinColumns = @JoinColumn(name = &quot;role_id&quot;))\r\n```\r\nThe @Fetch annotation is from `org.hibernate.annotations` package.","title":"Spring data JPA: Three entities ManyToMany relations, query duplicate result with findById","body":"<p>While fetching data using id Spring Data JPa considers your <code>fetch = FetchType.EAGER</code> but while fetching with other property it ignores and lazy loads those so you don't see duplicate records.</p>\n<p>To achieve same output at both query you need to add how Spring Data JPA construct query.</p>\n<pre><code>@ManyToMany(fetch = FetchType.EAGER, cascade = CascadeType.REFRESH)\n@Fetch(FetchMode.SUBSELECT)\n@JoinTable(name = &quot;test_role_and_permission&quot;, inverseJoinColumns = \n    @JoinColumn(name = &quot;permission_id&quot;), joinColumns = @JoinColumn(name = &quot;role_id&quot;))\n</code></pre>\n<p>The @Fetch annotation is from <code>org.hibernate.annotations</code> package.</p>\n"}],"owner":{"account_id":5195256,"reputation":381,"user_id":4156801,"accept_rate":54,"display_name":"John Zhang"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":394,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":73952767,"answer_count":1,"score":-1,"last_activity_date":1664911599,"creation_date":1664235313,"question_id":73860940,"body_markdown":"    \r\nUser.java\r\n\r\n \r\n\r\n    @Entity\r\n    @Table(name = &quot;test_user&quot;)\r\n    public class User implements Serializable {\r\n    \tprivate static final long serialVersionUID = 1L;\r\n    \r\n    \t@Id\r\n    \t@GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    \tprivate Long id;\r\n    \r\n    \t@JsonProperty(access = Access.WRITE_ONLY)\r\n    \tprivate String password;\r\n    \r\n    \tprivate String username;\r\n    \r\n    \tprivate String name;\r\n    \r\n    \t@ManyToMany(fetch = FetchType.EAGER, cascade = CascadeType.ALL)\r\n    \t@JoinTable(name = &quot;test_user_and_role&quot;, inverseJoinColumns = @JoinColumn(name = &quot;role_id&quot;), joinColumns = @JoinColumn(name = &quot;user_id&quot;))\r\n    \tprivate List&lt;UserRole&gt; userRoles = new ArrayList&lt;&gt;();\r\n    \r\n    \tpublic User() {\r\n    \t}\r\n    \r\n    \tpublic Long getId() {\r\n    \t\treturn id;\r\n    \t}\r\n    \r\n    \tpublic void setId(Long id) {\r\n    \t\tthis.id = id;\r\n    \t}\r\n    \r\n    \tpublic String getPassword() {\r\n    \t\treturn password;\r\n    \t}\r\n    \r\n    \tpublic void setPassword(String password) {\r\n    \t\tthis.password = password;\r\n    \t}\r\n    \r\n    \tpublic String getUsername() {\r\n    \t\treturn username;\r\n    \t}\r\n    \r\n    \tpublic void setUsername(String username) {\r\n    \t\tthis.username = username;\r\n    \t}\r\n    \r\n    \tpublic String getName() {\r\n    \t\treturn name;\r\n    \t}\r\n    \r\n    \tpublic void setName(String name) {\r\n    \t\tthis.name = name;\r\n    \t}\r\n    \r\n    \tpublic List&lt;UserRole&gt; getUserRoles() {\r\n    \t\treturn userRoles;\r\n    \t}\r\n    \r\n    \tpublic void setUserRoles(List&lt;UserRole&gt; userRoles) {\r\n    \t\tthis.userRoles = userRoles;\r\n    \t}\r\n    \r\n    }\r\n\r\n UserRole.java\r\n\r\n  \r\n\r\n    @Entity\r\n    @Table(name = &quot;test_user_role&quot;)\r\n    public class UserRole implements Serializable {\r\n    \tprivate static final long serialVersionUID = 1L;\r\n    \r\n    \t@Id\r\n    \t@GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    \tprivate Long id;\r\n    \r\n    \tprivate String role;\r\n    \r\n    \t@ManyToMany(mappedBy = &quot;userRoles&quot;)\r\n    \t@JsonProperty(access = Access.WRITE_ONLY)\r\n    \tprivate List&lt;User&gt; users = new ArrayList&lt;&gt;();\r\n    \r\n    \t@ManyToMany(fetch = FetchType.EAGER, cascade = CascadeType.REFRESH)\r\n    \t@JoinTable(name = &quot;test_role_and_permission&quot;, inverseJoinColumns = @JoinColumn(name = &quot;permission_id&quot;), joinColumns = @JoinColumn(name = &quot;role_id&quot;))\r\n    \tprivate List&lt;RolePermission&gt; permissions = new ArrayList&lt;&gt;();\r\n    \r\n    \tpublic UserRole() {\r\n    \t}\r\n    \r\n    \tpublic Long getId() {\r\n    \t\treturn id;\r\n    \t}\r\n    \r\n    \tpublic void setId(Long id) {\r\n    \t\tthis.id = id;\r\n    \t}\r\n    \r\n    \tpublic String getRole() {\r\n    \t\treturn role;\r\n    \t}\r\n    \r\n    \tpublic void setRole(String role) {\r\n    \t\tthis.role = role;\r\n    \t}\r\n    \r\n    \tpublic List&lt;User&gt; getUsers() {\r\n    \t\treturn users;\r\n    \t}\r\n    \r\n    \tpublic void setUsers(List&lt;User&gt; users) {\r\n    \t\tthis.users = users;\r\n    \t}\r\n    \r\n    \tpublic List&lt;RolePermission&gt; getPermissions() {\r\n    \t\treturn permissions;\r\n    \t}\r\n    \r\n    \tpublic void setPermissions(List&lt;RolePermission&gt; permissions) {\r\n    \t\tthis.permissions = permissions;\r\n    \t}\r\n    \r\n    }\r\n\r\nRolePermission.java\r\n  \r\n\r\n    @Entity\r\n    @Table(name=&quot;test_role_permission&quot;)\r\n    public class RolePermission implements Serializable{\r\n    \r\n    \tprivate static final long serialVersionUID = 1L;\r\n    \r\n    \t@Id\r\n    \t@GeneratedValue(strategy=GenerationType.IDENTITY)\r\n    \tprivate Long id;\r\n    \t\r\n    \tprivate String code;\r\n    \r\n    \tprivate String des;\r\n    \t\r\n    \t\r\n    \t\r\n    \t@ManyToMany(mappedBy = &quot;permissions&quot;)\r\n    \t@JsonProperty(access = Access.WRITE_ONLY)\r\n    \tprivate List&lt;UserRole&gt; roles = new ArrayList&lt;&gt;();\r\n    \r\n    \tpublic String getAuthority() {\r\n    \t\treturn this.code;\r\n    \t}\r\n    \r\n    \tpublic Long getId() {\r\n    \t\treturn id;\r\n    \t}\r\n    \r\n    \tpublic void setId(Long id) {\r\n    \t\tthis.id = id;\r\n    \t}\r\n    \r\n    \tpublic String getCode() {\r\n    \t\treturn code;\r\n    \t}\r\n    \r\n    \tpublic void setCode(String code) {\r\n    \t\tthis.code = code;\r\n    \t}\r\n    \r\n    \tpublic String getDes() {\r\n    \t\treturn des;\r\n    \t}\r\n    \r\n    \tpublic void setDes(String des) {\r\n    \t\tthis.des = des;\r\n    \t}\r\n    \r\n    \tpublic List&lt;UserRole&gt; getRoles() {\r\n    \t\treturn roles;\r\n    \t}\r\n    \r\n    \tpublic void setRoles(List&lt;UserRole&gt; roles) {\r\n    \t\tthis.roles = roles;\r\n    \t}\r\n    \t\r\n    \t\r\n    }\r\n\r\n   \r\n\r\n    \r\nJDK:17\r\nSpringBoot:2.7.4\r\n\r\nfindById and findBy are also generate different structure SQL.\r\nfindById uses left outer Join.\r\nfindByName uses subquery.\r\n\r\nthe user only have one role, the role have three permissions.\r\n\r\nif use findByUsername \r\nIt will return the user info correctly. \r\n \r\n\r\n     {\r\n        &quot;username&quot;: &quot;admin&quot;,\r\n        &quot;userRoles&quot;: [\r\n            {\r\n                &quot;created&quot;: null,\r\n                &quot;id&quot;: 1,\r\n                &quot;role&quot;: &quot;admin&quot;,\r\n                &quot;roleName&quot;: &quot;admin&quot;,\r\n                &quot;permissions&quot;: [\r\n                    {\r\n                        &quot;authority&quot;: &quot;user_query&quot;,\r\n                        &quot;code&quot;: &quot;user_query&quot;,\r\n                        &quot;id&quot;: 1\r\n                    },\r\n                    {\r\n                        &quot;authority&quot;: &quot;role_query&quot;,\r\n                        &quot;code&quot;: &quot;role_query&quot;,\r\n                        &quot;id&quot;: 2\r\n                    },\r\n                    {\r\n                        &quot;authority&quot;: &quot;equ_query&quot;,\r\n                        &quot;code&quot;: &quot;equ_query&quot;,\r\n                        &quot;id&quot;: 3\r\n                    }\r\n                }\r\n            ]\r\n        }\r\n\r\nIf I use findById, the same role repeat three times\r\n\r\n     {\r\n    &quot;username&quot;: &quot;admin&quot;,\r\n    &quot;userRoles&quot;: [\r\n        {\r\n            &quot;id&quot;: 1,\r\n            &quot;permissions&quot;: [\r\n                {\r\n                    &quot;authority&quot;: &quot;user_query&quot;,\r\n                    &quot;code&quot;: &quot;user_query&quot;,\r\n                    &quot;id&quot;: 1\r\n                },\r\n                {\r\n                    &quot;authority&quot;: &quot;role_query&quot;,\r\n                    &quot;code&quot;: &quot;role_query&quot;,\r\n                    &quot;id&quot;: 2\r\n                },\r\n                {\r\n                    &quot;authority&quot;: &quot;equ_query&quot;,\r\n                    &quot;code&quot;: &quot;equ_query&quot;,\r\n                    &quot;id&quot;: 3\r\n                }\r\n            ],\r\n            &quot;role&quot;: &quot;admin&quot;,\r\n            &quot;roleName&quot;: &quot;admin&quot;,\r\n        },\r\n        {\r\n            &quot;id&quot;: 1,\r\n            &quot;permissions&quot;: [\r\n                {\r\n                    &quot;authority&quot;: &quot;user_query&quot;,\r\n                    &quot;code&quot;: &quot;user_query&quot;,\r\n                    &quot;id&quot;: 1\r\n                },\r\n                {\r\n                    &quot;authority&quot;: &quot;role_query&quot;,\r\n                    &quot;code&quot;: &quot;role_query&quot;,\r\n                    &quot;id&quot;: 2\r\n                },\r\n                {\r\n                    &quot;authority&quot;: &quot;equ_query&quot;,\r\n                    &quot;code&quot;: &quot;equ_query&quot;,\r\n                    &quot;id&quot;: 3\r\n                }\r\n            ],\r\n            &quot;role&quot;: &quot;admin&quot;,\r\n            &quot;roleName&quot;: &quot;admin&quot;,\r\n            &quot;updated&quot;: null\r\n        },\r\n        {\r\n           \r\n            &quot;id&quot;: 1,\r\n            &quot;permissions&quot;: [\r\n                {\r\n                    &quot;authority&quot;: &quot;user_query&quot;,\r\n                    &quot;code&quot;: &quot;user_query&quot;,\r\n                    &quot;id&quot;: 1\r\n                },\r\n                {\r\n                    &quot;authority&quot;: &quot;role_query&quot;,\r\n                    &quot;code&quot;: &quot;role_query&quot;,\r\n                    &quot;id&quot;: 2\r\n                },\r\n                {\r\n                    &quot;authority&quot;: &quot;equ_query&quot;,\r\n                    &quot;code&quot;: &quot;equ_query&quot;,\r\n                    &quot;id&quot;: 3\r\n                }\r\n            ],\r\n            &quot;role&quot;: &quot;admin&quot;,\r\n            &quot;roleName&quot;: &quot;admin&quot;,\r\n        }\r\n    ]\r\n}\r\n\r\n\r\ncode : https://github.com/shuanshuan/demo-questions","title":"Spring data JPA: Three entities ManyToMany relations, query duplicate result with findById","body":"<p>User.java</p>\n<pre><code>@Entity\n@Table(name = &quot;test_user&quot;)\npublic class User implements Serializable {\n    private static final long serialVersionUID = 1L;\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    @JsonProperty(access = Access.WRITE_ONLY)\n    private String password;\n\n    private String username;\n\n    private String name;\n\n    @ManyToMany(fetch = FetchType.EAGER, cascade = CascadeType.ALL)\n    @JoinTable(name = &quot;test_user_and_role&quot;, inverseJoinColumns = @JoinColumn(name = &quot;role_id&quot;), joinColumns = @JoinColumn(name = &quot;user_id&quot;))\n    private List&lt;UserRole&gt; userRoles = new ArrayList&lt;&gt;();\n\n    public User() {\n    }\n\n    public Long getId() {\n        return id;\n    }\n\n    public void setId(Long id) {\n        this.id = id;\n    }\n\n    public String getPassword() {\n        return password;\n    }\n\n    public void setPassword(String password) {\n        this.password = password;\n    }\n\n    public String getUsername() {\n        return username;\n    }\n\n    public void setUsername(String username) {\n        this.username = username;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    public List&lt;UserRole&gt; getUserRoles() {\n        return userRoles;\n    }\n\n    public void setUserRoles(List&lt;UserRole&gt; userRoles) {\n        this.userRoles = userRoles;\n    }\n\n}\n</code></pre>\n<p>UserRole.java</p>\n<pre><code>@Entity\n@Table(name = &quot;test_user_role&quot;)\npublic class UserRole implements Serializable {\n    private static final long serialVersionUID = 1L;\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    private String role;\n\n    @ManyToMany(mappedBy = &quot;userRoles&quot;)\n    @JsonProperty(access = Access.WRITE_ONLY)\n    private List&lt;User&gt; users = new ArrayList&lt;&gt;();\n\n    @ManyToMany(fetch = FetchType.EAGER, cascade = CascadeType.REFRESH)\n    @JoinTable(name = &quot;test_role_and_permission&quot;, inverseJoinColumns = @JoinColumn(name = &quot;permission_id&quot;), joinColumns = @JoinColumn(name = &quot;role_id&quot;))\n    private List&lt;RolePermission&gt; permissions = new ArrayList&lt;&gt;();\n\n    public UserRole() {\n    }\n\n    public Long getId() {\n        return id;\n    }\n\n    public void setId(Long id) {\n        this.id = id;\n    }\n\n    public String getRole() {\n        return role;\n    }\n\n    public void setRole(String role) {\n        this.role = role;\n    }\n\n    public List&lt;User&gt; getUsers() {\n        return users;\n    }\n\n    public void setUsers(List&lt;User&gt; users) {\n        this.users = users;\n    }\n\n    public List&lt;RolePermission&gt; getPermissions() {\n        return permissions;\n    }\n\n    public void setPermissions(List&lt;RolePermission&gt; permissions) {\n        this.permissions = permissions;\n    }\n\n}\n</code></pre>\n<p>RolePermission.java</p>\n<pre><code>@Entity\n@Table(name=&quot;test_role_permission&quot;)\npublic class RolePermission implements Serializable{\n\n    private static final long serialVersionUID = 1L;\n\n    @Id\n    @GeneratedValue(strategy=GenerationType.IDENTITY)\n    private Long id;\n    \n    private String code;\n\n    private String des;\n    \n    \n    \n    @ManyToMany(mappedBy = &quot;permissions&quot;)\n    @JsonProperty(access = Access.WRITE_ONLY)\n    private List&lt;UserRole&gt; roles = new ArrayList&lt;&gt;();\n\n    public String getAuthority() {\n        return this.code;\n    }\n\n    public Long getId() {\n        return id;\n    }\n\n    public void setId(Long id) {\n        this.id = id;\n    }\n\n    public String getCode() {\n        return code;\n    }\n\n    public void setCode(String code) {\n        this.code = code;\n    }\n\n    public String getDes() {\n        return des;\n    }\n\n    public void setDes(String des) {\n        this.des = des;\n    }\n\n    public List&lt;UserRole&gt; getRoles() {\n        return roles;\n    }\n\n    public void setRoles(List&lt;UserRole&gt; roles) {\n        this.roles = roles;\n    }\n    \n    \n}\n</code></pre>\n<p>JDK:17\nSpringBoot:2.7.4</p>\n<p>findById and findBy are also generate different structure SQL.\nfindById uses left outer Join.\nfindByName uses subquery.</p>\n<p>the user only have one role, the role have three permissions.</p>\n<p>if use findByUsername\nIt will return the user info correctly.</p>\n<pre><code> {\n    &quot;username&quot;: &quot;admin&quot;,\n    &quot;userRoles&quot;: [\n        {\n            &quot;created&quot;: null,\n            &quot;id&quot;: 1,\n            &quot;role&quot;: &quot;admin&quot;,\n            &quot;roleName&quot;: &quot;admin&quot;,\n            &quot;permissions&quot;: [\n                {\n                    &quot;authority&quot;: &quot;user_query&quot;,\n                    &quot;code&quot;: &quot;user_query&quot;,\n                    &quot;id&quot;: 1\n                },\n                {\n                    &quot;authority&quot;: &quot;role_query&quot;,\n                    &quot;code&quot;: &quot;role_query&quot;,\n                    &quot;id&quot;: 2\n                },\n                {\n                    &quot;authority&quot;: &quot;equ_query&quot;,\n                    &quot;code&quot;: &quot;equ_query&quot;,\n                    &quot;id&quot;: 3\n                }\n            }\n        ]\n    }\n</code></pre>\n<p>If I use findById, the same role repeat three times</p>\n<pre><code> {\n&quot;username&quot;: &quot;admin&quot;,\n&quot;userRoles&quot;: [\n    {\n        &quot;id&quot;: 1,\n        &quot;permissions&quot;: [\n            {\n                &quot;authority&quot;: &quot;user_query&quot;,\n                &quot;code&quot;: &quot;user_query&quot;,\n                &quot;id&quot;: 1\n            },\n            {\n                &quot;authority&quot;: &quot;role_query&quot;,\n                &quot;code&quot;: &quot;role_query&quot;,\n                &quot;id&quot;: 2\n            },\n            {\n                &quot;authority&quot;: &quot;equ_query&quot;,\n                &quot;code&quot;: &quot;equ_query&quot;,\n                &quot;id&quot;: 3\n            }\n        ],\n        &quot;role&quot;: &quot;admin&quot;,\n        &quot;roleName&quot;: &quot;admin&quot;,\n    },\n    {\n        &quot;id&quot;: 1,\n        &quot;permissions&quot;: [\n            {\n                &quot;authority&quot;: &quot;user_query&quot;,\n                &quot;code&quot;: &quot;user_query&quot;,\n                &quot;id&quot;: 1\n            },\n            {\n                &quot;authority&quot;: &quot;role_query&quot;,\n                &quot;code&quot;: &quot;role_query&quot;,\n                &quot;id&quot;: 2\n            },\n            {\n                &quot;authority&quot;: &quot;equ_query&quot;,\n                &quot;code&quot;: &quot;equ_query&quot;,\n                &quot;id&quot;: 3\n            }\n        ],\n        &quot;role&quot;: &quot;admin&quot;,\n        &quot;roleName&quot;: &quot;admin&quot;,\n        &quot;updated&quot;: null\n    },\n    {\n       \n        &quot;id&quot;: 1,\n        &quot;permissions&quot;: [\n            {\n                &quot;authority&quot;: &quot;user_query&quot;,\n                &quot;code&quot;: &quot;user_query&quot;,\n                &quot;id&quot;: 1\n            },\n            {\n                &quot;authority&quot;: &quot;role_query&quot;,\n                &quot;code&quot;: &quot;role_query&quot;,\n                &quot;id&quot;: 2\n            },\n            {\n                &quot;authority&quot;: &quot;equ_query&quot;,\n                &quot;code&quot;: &quot;equ_query&quot;,\n                &quot;id&quot;: 3\n            }\n        ],\n        &quot;role&quot;: &quot;admin&quot;,\n        &quot;roleName&quot;: &quot;admin&quot;,\n    }\n]\n</code></pre>\n<p>}</p>\n<p>code : <a href=\"https://github.com/shuanshuan/demo-questions\" rel=\"nofollow noreferrer\">https://github.com/shuanshuan/demo-questions</a></p>\n"},{"tags":["java","spring-boot","rest","docker","aws-xray"],"comments":[{"owner":{"account_id":8819026,"reputation":131,"user_id":6589517,"display_name":"Suresh"},"score":0,"creation_date":1595405567,"post_id":62171719,"comment_id":111459527,"body_markdown":"Did you resolve this issue. Stuck with the same issue and it would be great to help me.","body":"Did you resolve this issue. Stuck with the same issue and it would be great to help me."}],"answers":[{"tags":[],"owner":{"account_id":190312,"reputation":495,"user_id":430202,"display_name":"J. Christian"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1619717243,"creation_date":1619717243,"answer_id":67322314,"question_id":62171719,"body_markdown":"This could be because the app running in the Docker container cannot connect to the X-Ray daemon running locally on the host.\r\n\r\nYou might find [this answer](https://stackoverflow.com/a/67287691/430202) helpful. There is a simple Docker platform example that runs the daemon and the app side-by-side in separate containers.  It uses docker-compose networking and the `AWS_XRAY_DAEMON_ADDRESS` environment variable to connect the app container to the daemon.","title":"api unable to send the traces to aws-xray deamon in docker container","body":"<p>This could be because the app running in the Docker container cannot connect to the X-Ray daemon running locally on the host.</p>\n<p>You might find <a href=\"https://stackoverflow.com/a/67287691/430202\">this answer</a> helpful. There is a simple Docker platform example that runs the daemon and the app side-by-side in separate containers.  It uses docker-compose networking and the <code>AWS_XRAY_DAEMON_ADDRESS</code> environment variable to connect the app container to the daemon.</p>\n"},{"tags":[],"owner":{"account_id":15567971,"reputation":11,"user_id":11231187,"display_name":"G. Ionut"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1664911452,"creation_date":1664870475,"answer_id":73944759,"question_id":62171719,"body_markdown":"I solved the problem with this solution:\r\n\r\n 1. start the X-Ray container\r\n 2. `docker inspect` on this container and check which is the IP address\r\n 3. Create an environment variable `AWS_XRAY_DAEMON_ADDRESS` with the value obtained in previous step (ex: 172.XX.0.X:2000)\r\n 4. start the application container adding `-e AWS_XRAY_DAEMON_ADDRESS` to pass the variable to the container (ex: `docker run -e AWS_XRAY_DAEMON_ADDRESS --name my_containter image_name`)\r\n\r\nSteps 3 and 4 can be combined by directly passing the IP address to the container (`docker run -e AWS_XRAY_DAEMON_ADDRESS=ip_address --name my_containter image_name`)","title":"api unable to send the traces to aws-xray deamon in docker container","body":"<p>I solved the problem with this solution:</p>\n<ol>\n<li>start the X-Ray container</li>\n<li><code>docker inspect</code> on this container and check which is the IP address</li>\n<li>Create an environment variable <code>AWS_XRAY_DAEMON_ADDRESS</code> with the value obtained in previous step (ex: 172.XX.0.X:2000)</li>\n<li>start the application container adding <code>-e AWS_XRAY_DAEMON_ADDRESS</code> to pass the variable to the container (ex: <code>docker run -e AWS_XRAY_DAEMON_ADDRESS --name my_containter image_name</code>)</li>\n</ol>\n<p>Steps 3 and 4 can be combined by directly passing the IP address to the container (<code>docker run -e AWS_XRAY_DAEMON_ADDRESS=ip_address --name my_containter image_name</code>)</p>\n"},{"tags":[],"owner":{"account_id":26523159,"reputation":28,"user_id":20156533,"display_name":"Silvan Talos"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664872835,"creation_date":1664872326,"answer_id":73945092,"question_id":62171719,"body_markdown":"On Linux, starting containers in host network solves the issue (using `--network host` flag when starting container).\r\nOther than that, the `AWS_XRAY_DAEMON_ADDRESS` environment variable can be used for setting XRay container IP address, as mentioned by @G. Ionut in [his answer](https://stackoverflow.com/a/73944759/20156533).","title":"api unable to send the traces to aws-xray deamon in docker container","body":"<p>On Linux, starting containers in host network solves the issue (using <code>--network host</code> flag when starting container).\nOther than that, the <code>AWS_XRAY_DAEMON_ADDRESS</code> environment variable can be used for setting XRay container IP address, as mentioned by @G. Ionut in <a href=\"https://stackoverflow.com/a/73944759/20156533\">his answer</a>.</p>\n"}],"owner":{"account_id":3792142,"reputation":41,"user_id":3148335,"display_name":"user3148335"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2703,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1664911452,"creation_date":1591183684,"question_id":62171719,"body_markdown":"I have two docker containers for rest API and x-ray daemon up and running. In my local, API sends the traces to x-ray daemon successfully. But unable to achieve in docker.\r\n\r\nThese steps I have followed.\r\n\r\n - added was x-ray filter to API to instrument HTTP request\r\n - configured 0.0.0.0:2000 as x-ray deamon address to listen all request\r\n - pulled AWS x-ray daemon official docker image and run the image in docker\r\n \r\nwhenever I am trying to hit my API,I am getting exception like this\r\n\r\n    2020-06-03 08:08:33.799  INFO 1 --- [pool-1-thread-1] c.a.x.s.sampling.pollers.RulePoller      : Polling sampling rules.2020-06-03 08:08:34.413 ERROR 1 --- [pool-1-thread-1] c.a.x.s.sampling.pollers.RulePoller      : Encountered error polling GetSamplingRules:\r\n\r\ncom.amazonaws.SdkClientException: Unable to execute HTTP request: Connect to 0.0.0.0:2000 [/0.0.0.0] failed: Connection refused (Connection refused)\r\n        at com.amazonaws.http.AmazonHttpClient$RequestExecutor.handleRetryableException(AmazonHttpClient.java:1207) ~[aws-java-sdk-core-1.11.787.jar!/:na]\r\n        at com.amazonaws.http.AmazonHttpClient$RequestExecutor.executeHelper(AmazonHttpClient.java:1153) ~[aws-java-sdk-core-1.11.787.jar!/:na]\r\n        at com.amazonaws.http.AmazonHttpClient$RequestExecutor.doExecute(AmazonHttpClient.java:802) ~[aws-java-sdk-core-1.11.787.jar!/:na]\r\n        at com.amazonaws.http.AmazonHttpClient$RequestExecutor.executeWithTimer(AmazonHttpClient.java:770) ~[aws-java-sdk-core-1.11.787.jar!/:na]\r\n        at com.amazonaws.http.AmazonHttpClient$RequestExecutor.execute(AmazonHttpClient.java:744) ~[aws-java-sdk-core-1.11.787.jar!/:na]\r\n        at com.amazonaws.http.AmazonHttpClient$RequestExecutor.access$500(AmazonHttpClient.java:704) ~[aws-java-sdk-core-1.11.787.jar!/:na]\r\n        at com.amazonaws.http.AmazonHttpClient$RequestExecutionBuilderImpl.execute(AmazonHttpClient.java:686) ~[aws-java-sdk-core-1.11.787.jar!/:na]\r\n        at com.amazonaws.http.AmazonHttpClient.execute(AmazonHttpClient.java:550) ~[aws-java-sdk-core-1.11.787.jar!/:na]        at com.amazonaws.http.AmazonHttpClient.execute(AmazonHttpClient.java:530) ~[aws-java-sdk-core-1.11.787.jar!/:na]        at com.amazonaws.services.xray.AWSXRayClient.doInvoke(AWSXRayClient.java:1607) ~[aws-java-sdk-xray-1.11.787.jar!/:na]\r\n        at com.amazonaws.services.xray.AWSXRayClient.invoke(AWSXRayClient.java:1574) ~[aws-java-sdk-xray-1.11.787.jar!/:na]\r\n        at com.amazonaws.services.xray.AWSXRayClient.invoke(AWSXRayClient.java:1563) ~[aws-java-sdk-xray-1.11.787.jar!/:na]\r\n        at com.amazonaws.services.xray.AWSXRayClient.executeGetSamplingRules(AWSXRayClient.java:800) ~[aws-java-sdk-xray-1.11.787.jar!/:na]\r\n        at com.amazonaws.services.xray.AWSXRayClient.getSamplingRules(AWSXRayClient.java:771) ~[aws-java-sdk-xray-1.11.787.jar!/:na]\r\n        at com.amazonaws.xray.strategy.sampling.pollers.RulePoller.pollRule(RulePoller.java:65) ~[aws-xray-recorder-sdk-core-2.4.0.jar!/:na]\r\n        at com.amazonaws.xray.strategy.sampling.pollers.RulePoller.lambda$start$0(RulePoller.java:46) ~[aws-xray-recorder-sdk-core-2.4.0.jar!/:na]\r\n        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) ~[na:1.8.0_212]\r\n        at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308) ~[na:1.8.0_212]\r\n        at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) ~[na:1.8.0_212]\r\n        at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) ~[na:1.8.0_212]\r\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) ~[na:1.8.0_212]\r\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) ~[na:1.8.0_212]\r\n        at java.lang.Thread.run(Thread.java:748) ~[na:1.8.0_212]\r\nCaused by: org.apache.http.conn.HttpHostConnectException: Connect to 0.0.0.0:2000 [/0.0.0.0] failed: Connection refused (Connection refused)\r\n        at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:156) ~[httpclient-4.5.10.jar!/:4.5.10]\r\n        at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:374) ~[httpclient-4.5.10.jar!/:4.5.10]\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_212]\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_212]\r\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_212]\r\n        at java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_212]\r\n        at com.amazonaws.http.conn.ClientConnectionManagerFactory$Handler.invoke(ClientConnectionManagerFactory.java:76) ~[aws-java-sdk-core-1.11.787.jar!/:na]\r\n        at com.amazonaws.http.conn.$Proxy64.connect(Unknown Source) ~[na:na]\r\n        at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:393) ~[httpclient-4.5.10.jar!/:4.5.10]\r\n10]\r\n        at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186) ~[httpclient-4.5.10.jar!/:4.5.10]\r\n        at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185) ~[httpclient-4.5.10.jar!/:4.5.10]\r\n        at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:83) ~[httpclient-4.5.10.jar!/:4.5.10]\r\n        at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56) ~[httpclient-4.5.10.jar!/:4.5.10]\r\n        at com.amazonaws.http.apache.client.impl.SdkHttpClient.execute(SdkHttpClient.java:72) ~[aws-java-sdk-core-1.11.787.jar!/:na]\r\n        at com.amazonaws.http.AmazonHttpClient$RequestExecutor.executeOneRequest(AmazonHttpClient.java:1330) ~[aws-java-sdk-core-1.11.787.jar!/:na]\r\n        at com.amazonaws.http.AmazonHttpClient$RequestExecutor.executeHelper(AmazonHttpClient.java:1145) ~[aws-java-sdk-core-1.11.787.jar!/:na]\r\n        ... 21 common frames omitted\r\nCaused by: java.net.ConnectException: Connection refused (Connection refused)\r\n        at java.net.PlainSocketImpl.socketConnect(Native Method) ~[na:1.8.0_212]\r\n        at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) ~[na:1.8.0_212]\r\n        at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:204) ~[na:1.8.0_212]\r\n        at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) ~[na:1.8.0_212]\r\n        at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) ~[na:1.8.0_212]\r\n        at java.net.Socket.connect(Socket.java:589) ~[na:1.8.0_212]\r\n        at org.apache.http.conn.socket.PlainConnectionSocketFactory.connectSocket(PlainConnectionSocketFactory.java:75) ~[httpclient-4.5.10.jar!/:4.5.10]\r\n        at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:142) ~[httpclient-4.5.10.jar!/:4.5.10]\r\n        ... 37 common frames omitted\r\n\r\n","title":"api unable to send the traces to aws-xray deamon in docker container","body":"<p>I have two docker containers for rest API and x-ray daemon up and running. In my local, API sends the traces to x-ray daemon successfully. But unable to achieve in docker.</p>\n\n<p>These steps I have followed.</p>\n\n<ul>\n<li>added was x-ray filter to API to instrument HTTP request</li>\n<li>configured 0.0.0.0:2000 as x-ray deamon address to listen all request</li>\n<li>pulled AWS x-ray daemon official docker image and run the image in docker</li>\n</ul>\n\n<p>whenever I am trying to hit my API,I am getting exception like this</p>\n\n<pre><code>2020-06-03 08:08:33.799  INFO 1 --- [pool-1-thread-1] c.a.x.s.sampling.pollers.RulePoller      : Polling sampling rules.2020-06-03 08:08:34.413 ERROR 1 --- [pool-1-thread-1] c.a.x.s.sampling.pollers.RulePoller      : Encountered error polling GetSamplingRules:\n</code></pre>\n\n<p>com.amazonaws.SdkClientException: Unable to execute HTTP request: Connect to 0.0.0.0:2000 [/0.0.0.0] failed: Connection refused (Connection refused)\n        at com.amazonaws.http.AmazonHttpClient$RequestExecutor.handleRetryableException(AmazonHttpClient.java:1207) ~[aws-java-sdk-core-1.11.787.jar!/:na]\n        at com.amazonaws.http.AmazonHttpClient$RequestExecutor.executeHelper(AmazonHttpClient.java:1153) ~[aws-java-sdk-core-1.11.787.jar!/:na]\n        at com.amazonaws.http.AmazonHttpClient$RequestExecutor.doExecute(AmazonHttpClient.java:802) ~[aws-java-sdk-core-1.11.787.jar!/:na]\n        at com.amazonaws.http.AmazonHttpClient$RequestExecutor.executeWithTimer(AmazonHttpClient.java:770) ~[aws-java-sdk-core-1.11.787.jar!/:na]\n        at com.amazonaws.http.AmazonHttpClient$RequestExecutor.execute(AmazonHttpClient.java:744) ~[aws-java-sdk-core-1.11.787.jar!/:na]\n        at com.amazonaws.http.AmazonHttpClient$RequestExecutor.access$500(AmazonHttpClient.java:704) ~[aws-java-sdk-core-1.11.787.jar!/:na]\n        at com.amazonaws.http.AmazonHttpClient$RequestExecutionBuilderImpl.execute(AmazonHttpClient.java:686) ~[aws-java-sdk-core-1.11.787.jar!/:na]\n        at com.amazonaws.http.AmazonHttpClient.execute(AmazonHttpClient.java:550) ~[aws-java-sdk-core-1.11.787.jar!/:na]        at com.amazonaws.http.AmazonHttpClient.execute(AmazonHttpClient.java:530) ~[aws-java-sdk-core-1.11.787.jar!/:na]        at com.amazonaws.services.xray.AWSXRayClient.doInvoke(AWSXRayClient.java:1607) ~[aws-java-sdk-xray-1.11.787.jar!/:na]\n        at com.amazonaws.services.xray.AWSXRayClient.invoke(AWSXRayClient.java:1574) ~[aws-java-sdk-xray-1.11.787.jar!/:na]\n        at com.amazonaws.services.xray.AWSXRayClient.invoke(AWSXRayClient.java:1563) ~[aws-java-sdk-xray-1.11.787.jar!/:na]\n        at com.amazonaws.services.xray.AWSXRayClient.executeGetSamplingRules(AWSXRayClient.java:800) ~[aws-java-sdk-xray-1.11.787.jar!/:na]\n        at com.amazonaws.services.xray.AWSXRayClient.getSamplingRules(AWSXRayClient.java:771) ~[aws-java-sdk-xray-1.11.787.jar!/:na]\n        at com.amazonaws.xray.strategy.sampling.pollers.RulePoller.pollRule(RulePoller.java:65) ~[aws-xray-recorder-sdk-core-2.4.0.jar!/:na]\n        at com.amazonaws.xray.strategy.sampling.pollers.RulePoller.lambda$start$0(RulePoller.java:46) ~[aws-xray-recorder-sdk-core-2.4.0.jar!/:na]\n        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) ~[na:1.8.0_212]\n        at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308) ~[na:1.8.0_212]\n        at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) ~[na:1.8.0_212]\n        at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) ~[na:1.8.0_212]\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) ~[na:1.8.0_212]\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) ~[na:1.8.0_212]\n        at java.lang.Thread.run(Thread.java:748) ~[na:1.8.0_212]\nCaused by: org.apache.http.conn.HttpHostConnectException: Connect to 0.0.0.0:2000 [/0.0.0.0] failed: Connection refused (Connection refused)\n        at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:156) ~[httpclient-4.5.10.jar!/:4.5.10]\n        at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:374) ~[httpclient-4.5.10.jar!/:4.5.10]\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_212]\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_212]\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_212]\n        at java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_212]\n        at com.amazonaws.http.conn.ClientConnectionManagerFactory$Handler.invoke(ClientConnectionManagerFactory.java:76) ~[aws-java-sdk-core-1.11.787.jar!/:na]\n        at com.amazonaws.http.conn.$Proxy64.connect(Unknown Source) ~[na:na]\n        at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:393) ~[httpclient-4.5.10.jar!/:4.5.10]\n10]\n        at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186) ~[httpclient-4.5.10.jar!/:4.5.10]\n        at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185) ~[httpclient-4.5.10.jar!/:4.5.10]\n        at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:83) ~[httpclient-4.5.10.jar!/:4.5.10]\n        at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56) ~[httpclient-4.5.10.jar!/:4.5.10]\n        at com.amazonaws.http.apache.client.impl.SdkHttpClient.execute(SdkHttpClient.java:72) ~[aws-java-sdk-core-1.11.787.jar!/:na]\n        at com.amazonaws.http.AmazonHttpClient$RequestExecutor.executeOneRequest(AmazonHttpClient.java:1330) ~[aws-java-sdk-core-1.11.787.jar!/:na]\n        at com.amazonaws.http.AmazonHttpClient$RequestExecutor.executeHelper(AmazonHttpClient.java:1145) ~[aws-java-sdk-core-1.11.787.jar!/:na]\n        ... 21 common frames omitted\nCaused by: java.net.ConnectException: Connection refused (Connection refused)\n        at java.net.PlainSocketImpl.socketConnect(Native Method) ~[na:1.8.0_212]\n        at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) ~[na:1.8.0_212]\n        at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:204) ~[na:1.8.0_212]\n        at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) ~[na:1.8.0_212]\n        at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) ~[na:1.8.0_212]\n        at java.net.Socket.connect(Socket.java:589) ~[na:1.8.0_212]\n        at org.apache.http.conn.socket.PlainConnectionSocketFactory.connectSocket(PlainConnectionSocketFactory.java:75) ~[httpclient-4.5.10.jar!/:4.5.10]\n        at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:142) ~[httpclient-4.5.10.jar!/:4.5.10]\n        ... 37 common frames omitted</p>\n"},{"tags":["java","reactjs","spring-boot"],"comments":[{"owner":{"account_id":10835632,"reputation":541,"user_id":7968718,"display_name":"Daksharaj kamal"},"score":0,"creation_date":1664982097,"post_id":73949257,"comment_id":130593720,"body_markdown":"Have you added @crossorigin to your controller class?","body":"Have you added @crossorigin to your controller class?"},{"owner":{"display_name":"user19163958"},"score":0,"creation_date":1665044857,"post_id":73949257,"comment_id":130608310,"body_markdown":"@Daksharajkamal Yessir","body":"@Daksharajkamal Yessir"}],"owner":{"display_name":"user19163958"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":284,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1664911264,"creation_date":1664892736,"question_id":73949257,"body_markdown":"I&#39;m trying to get my CSRF working. I have a Spring Boot API which has a post controller method, I&#39;m trying to call it while sending along a CSRF-Token for it to work, but all I&#39;m getting back is a 403 Forbidden response.\r\n\r\nSpring Boot Controller:\r\n\r\n    @RequestMapping(&quot;/token&quot;)\r\n        public CsrfToken csrf(CsrfToken token){\r\n            return token;\r\n        }\r\n    \r\n        @PostMapping(value = &quot;/postendpoint&quot;)\r\n        public ResponseEntity&lt;?&gt; somePost(String text){\r\n            return ResponseEntity\r\n                    .ok()\r\n                    .header(&quot;Access-Control-Allow-Origin&quot;, &quot;http://localhost:3000&quot;)\r\n                    .body(text);\r\n        }\r\n\r\nConfiguration class:\r\n\r\n    @Configuration\r\n    public class SecurityConfiguration {\r\n        @Bean\r\n        public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n            http\r\n                    .csrf()\r\n                    .csrfTokenRepository(CookieCsrfTokenRepository.withHttpOnlyFalse())\r\n                    .and().cors();\r\n            return http.build();\r\n        }\r\n    }\r\n\r\nRequest from React:\r\n\r\n    response = await axios.get(&#39;http://127.0.0.1:8080/tasks/token&#39;, {withCredentials: true}).then((tokenResp) =&gt; {\r\n          console.log(tokenResp);\r\n    \r\n          return axios.post(&#39;http://127.0.0.1:8080/tasks/postendpoint&#39;,\r\n            {\r\n              withCredentials: true,\r\n              headers: {\r\n                &#39;X-CSRF-TOKEN&#39;: tokenResp.data.token\r\n              }\r\n            }\r\n          );\r\n        }).then((res) =&gt; console.log(res));\r\n\r\nsome of the dependencies in my pom.xml\r\n\r\n    &lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-security-web&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n    \r\n    &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;","title":"Spring Boot API returns 403 Forbidden as response to React App","body":"<p>I'm trying to get my CSRF working. I have a Spring Boot API which has a post controller method, I'm trying to call it while sending along a CSRF-Token for it to work, but all I'm getting back is a 403 Forbidden response.</p>\n<p>Spring Boot Controller:</p>\n<pre><code>@RequestMapping(&quot;/token&quot;)\n    public CsrfToken csrf(CsrfToken token){\n        return token;\n    }\n\n    @PostMapping(value = &quot;/postendpoint&quot;)\n    public ResponseEntity&lt;?&gt; somePost(String text){\n        return ResponseEntity\n                .ok()\n                .header(&quot;Access-Control-Allow-Origin&quot;, &quot;http://localhost:3000&quot;)\n                .body(text);\n    }\n</code></pre>\n<p>Configuration class:</p>\n<pre><code>@Configuration\npublic class SecurityConfiguration {\n    @Bean\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n        http\n                .csrf()\n                .csrfTokenRepository(CookieCsrfTokenRepository.withHttpOnlyFalse())\n                .and().cors();\n        return http.build();\n    }\n}\n</code></pre>\n<p>Request from React:</p>\n<pre><code>response = await axios.get('http://127.0.0.1:8080/tasks/token', {withCredentials: true}).then((tokenResp) =&gt; {\n      console.log(tokenResp);\n\n      return axios.post('http://127.0.0.1:8080/tasks/postendpoint',\n        {\n          withCredentials: true,\n          headers: {\n            'X-CSRF-TOKEN': tokenResp.data.token\n          }\n        }\n      );\n    }).then((res) =&gt; console.log(res));\n</code></pre>\n<p>some of the dependencies in my pom.xml</p>\n<pre><code>&lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-security-web&lt;/artifactId&gt;\n&lt;/dependency&gt;\n\n&lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":["java","enums","java-stream"],"answers":[{"tags":[],"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1664911161,"creation_date":1664910410,"answer_id":73952552,"question_id":73952303,"body_markdown":"There are several approaches you can take.\r\n\r\nThe map which would be used for accumulating the stream data can be prepopulated with entries corresponding to every *enum-member*. To access all existing *enum-members* you can use `values()` method or [`EnumSet.allOf()`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/EnumSet.html#allOf(java.lang.Class)).\r\n\r\nIt can be achieved using *three-args* version of [`collect()`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/Stream.html#collect(java.util.function.Supplier,java.util.function.BiConsumer,java.util.function.BiConsumer)) or through a custom collector created via `Collector.of()`.\r\n\r\n```\r\nMap&lt;Country, List&lt;Integer&gt;&gt; championsMap = wcList.stream()\r\n    .collect(\r\n        () -&gt; EnumSet.allOf(Country.class).stream()         // supplier\r\n            .collect(Collectors.toMap(\r\n                Function.identity(),\r\n                c -&gt; new ArrayList&lt;&gt;()\r\n            )),\r\n        (Map&lt;Country, List&lt;Integer&gt;&gt; map, WorldCup next) -&gt; // accumulator\r\n            map.get(next.getCountry()).add(next.getYear()),\r\n        (left, right) -&gt;                                    // combiner\r\n            right.forEach((k, v) -&gt; left.get(k).addAll(v))\r\n    );\r\n```\r\n\r\nAnother option is to add missing entries to the map after reduction of the stream has been finished.\r\n\r\nFor that we can use built-in *collector* [`collectingAndThen()`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/Collectors.html#collectingAndThen(java.util.stream.Collector,java.util.function.Function)).\r\n\r\n```\r\nMap&lt;Country, List&lt;Integer&gt;&gt; championsMap = wcList.stream()\r\n    .collect(Collectors.collectingAndThen(\r\n        Collectors.groupingBy(WorldCup::getCountry,\r\n            Collectors.mapping(WorldCup::getYear,\r\n                Collectors.toList())),\r\n        map -&gt; {\r\n            EnumSet.allOf(Country.class)\r\n                .forEach(country -&gt; map.computeIfAbsent(country, k -&gt; new ArrayList&lt;&gt;())); // if you&#39;re not going to mutate these lists - use Collections.emptyList()\r\n            return map;\r\n        }\r\n    ));\r\n```","title":"Have Java Streams GroupingBy result Map include a key for each value of an enum, even if value is an empty List","body":"<p>There are several approaches you can take.</p>\n<p>The map which would be used for accumulating the stream data can be prepopulated with entries corresponding to every <em>enum-member</em>. To access all existing <em>enum-members</em> you can use <code>values()</code> method or <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/EnumSet.html#allOf(java.lang.Class)\" rel=\"nofollow noreferrer\"><code>EnumSet.allOf()</code></a>.</p>\n<p>It can be achieved using <em>three-args</em> version of <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/Stream.html#collect(java.util.function.Supplier,java.util.function.BiConsumer,java.util.function.BiConsumer)\" rel=\"nofollow noreferrer\"><code>collect()</code></a> or through a custom collector created via <code>Collector.of()</code>.</p>\n<pre><code>Map&lt;Country, List&lt;Integer&gt;&gt; championsMap = wcList.stream()\n    .collect(\n        () -&gt; EnumSet.allOf(Country.class).stream()         // supplier\n            .collect(Collectors.toMap(\n                Function.identity(),\n                c -&gt; new ArrayList&lt;&gt;()\n            )),\n        (Map&lt;Country, List&lt;Integer&gt;&gt; map, WorldCup next) -&gt; // accumulator\n            map.get(next.getCountry()).add(next.getYear()),\n        (left, right) -&gt;                                    // combiner\n            right.forEach((k, v) -&gt; left.get(k).addAll(v))\n    );\n</code></pre>\n<p>Another option is to add missing entries to the map after reduction of the stream has been finished.</p>\n<p>For that we can use built-in <em>collector</em> <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/Collectors.html#collectingAndThen(java.util.stream.Collector,java.util.function.Function)\" rel=\"nofollow noreferrer\"><code>collectingAndThen()</code></a>.</p>\n<pre><code>Map&lt;Country, List&lt;Integer&gt;&gt; championsMap = wcList.stream()\n    .collect(Collectors.collectingAndThen(\n        Collectors.groupingBy(WorldCup::getCountry,\n            Collectors.mapping(WorldCup::getYear,\n                Collectors.toList())),\n        map -&gt; {\n            EnumSet.allOf(Country.class)\n                .forEach(country -&gt; map.computeIfAbsent(country, k -&gt; new ArrayList&lt;&gt;())); // if you're not going to mutate these lists - use Collections.emptyList()\n            return map;\n        }\n    ));\n</code></pre>\n"}],"owner":{"account_id":2425257,"reputation":5090,"user_id":2117355,"accept_rate":71,"display_name":"Mark"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":117,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1664911161,"creation_date":1664909012,"question_id":73952303,"body_markdown":"This question is about Java Streams&#39; groupingBy capability.\r\n\r\nSuppose I have a class, `WorldCup`:\r\n\r\n```\r\npublic class WorldCup {\r\n\r\n    int year;\r\n    Country champion;\r\n\r\n    // all-arg constructor, getter/setters, etc\r\n}\r\n```\r\n\r\nand an enum, `Country`:\r\n\r\n```\r\npublic enum Country {\r\n    Brazil, France, USA\r\n}\r\n```\r\n\r\nand the following code snippet:\r\n\r\n```\r\nWorldCup wc94 = new WorldCup(1994, Country.Brazil);\r\nWorldCup wc98 = new WorldCup(1998, Country.France);\r\n\r\nList&lt;WorldCup&gt; wcList = new ArrayList&lt;WorldCup&gt;();\r\nwcList.add(wc94);\r\nwcList.add(wc98);\r\n\r\nMap&lt;Country, List&lt;Integer&gt;&gt; championsMap = wcList.stream()\r\n    .collect(Collectors.groupingBy(WorldCup::getCountry, Collectors.mapping(WorldCup::getYear));\r\n```\r\n\r\nAfter running this code, `championsMap` will contain:\r\n```\r\nBrazil: [1994]\r\nFrance: [1998]\r\n```\r\n\r\nIs there a succinct way to have this list include an entry for all of the values of the enum?  What I&#39;m looking for is:\r\n\r\n```\r\nBrazil: [1994]\r\nFrance: [1998]\r\nUSA: []\r\n```","title":"Have Java Streams GroupingBy result Map include a key for each value of an enum, even if value is an empty List","body":"<p>This question is about Java Streams' groupingBy capability.</p>\n<p>Suppose I have a class, <code>WorldCup</code>:</p>\n<pre><code>public class WorldCup {\n\n    int year;\n    Country champion;\n\n    // all-arg constructor, getter/setters, etc\n}\n</code></pre>\n<p>and an enum, <code>Country</code>:</p>\n<pre><code>public enum Country {\n    Brazil, France, USA\n}\n</code></pre>\n<p>and the following code snippet:</p>\n<pre><code>WorldCup wc94 = new WorldCup(1994, Country.Brazil);\nWorldCup wc98 = new WorldCup(1998, Country.France);\n\nList&lt;WorldCup&gt; wcList = new ArrayList&lt;WorldCup&gt;();\nwcList.add(wc94);\nwcList.add(wc98);\n\nMap&lt;Country, List&lt;Integer&gt;&gt; championsMap = wcList.stream()\n    .collect(Collectors.groupingBy(WorldCup::getCountry, Collectors.mapping(WorldCup::getYear));\n</code></pre>\n<p>After running this code, <code>championsMap</code> will contain:</p>\n<pre><code>Brazil: [1994]\nFrance: [1998]\n</code></pre>\n<p>Is there a succinct way to have this list include an entry for all of the values of the enum?  What I'm looking for is:</p>\n<pre><code>Brazil: [1994]\nFrance: [1998]\nUSA: []\n</code></pre>\n"},{"tags":["java","spring","sts"],"comments":[{"owner":{"account_id":17815140,"reputation":111,"user_id":12938887,"display_name":"Nico"},"score":1,"creation_date":1664905723,"post_id":73951721,"comment_id":130575423,"body_markdown":"I&#39;m coming from the Spring Boot Context so I&#39;m not sure, but you would need to anotate `PollRepository` with `@Repository` there. Is there an pendant for that in Spring?","body":"I&#39;m coming from the Spring Boot Context so I&#39;m not sure, but you would need to anotate <code>PollRepository</code> with <code>@Repository</code> there. Is there an pendant for that in Spring?"},{"owner":{"account_id":572450,"reputation":4381,"user_id":218548,"accept_rate":87,"display_name":"CompanyDroneFromSector7G"},"score":0,"creation_date":1664909244,"post_id":73951721,"comment_id":130576309,"body_markdown":"Didn&#39;t fix the issue, but good to know, thanks!","body":"Didn&#39;t fix the issue, but good to know, thanks!"}],"answers":[{"tags":[],"owner":{"account_id":1408815,"reputation":2002,"user_id":1811348,"accept_rate":88,"display_name":"swapyonubuntu"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1664910913,"creation_date":1664906178,"answer_id":73951837,"question_id":73951721,"body_markdown":"Can you move application main class to `com.example` package instead?\r\n\r\n\r\nIf not,\r\nYou can try adding   \r\n`@EnableJpaRepositories(basePackages=&quot;com.example&quot;)` to QuickPollApplication class.\r\n\r\nAlso you require additional config like @EntityScan with base packages configured.\r\n\r\n**Explaination:**\r\n\r\nBy default, Spring Boot enables JPA repository support and looks in the package (and its subpackages) where @SpringBootApplication is located. If your configuration has JPA repository interface definitions located in a package that is not visible, you can point out alternate packages by using @EnableJpaRepositories and its type-safe basePackageClasses=MyRepository.class parameter.\r\n\r\n**Ref:** \r\nhttps://spring.io/guides/gs/accessing-data-jpa/","title":"Field &quot;&quot; in &quot;&quot; required a bean of type &quot;&quot; that could not be found","body":"<p>Can you move application main class to <code>com.example</code> package instead?</p>\n<p>If not,\nYou can try adding<br />\n<code>@EnableJpaRepositories(basePackages=&quot;com.example&quot;)</code> to QuickPollApplication class.</p>\n<p>Also you require additional config like @EntityScan with base packages configured.</p>\n<p><strong>Explaination:</strong></p>\n<p>By default, Spring Boot enables JPA repository support and looks in the package (and its subpackages) where @SpringBootApplication is located. If your configuration has JPA repository interface definitions located in a package that is not visible, you can point out alternate packages by using @EnableJpaRepositories and its type-safe basePackageClasses=MyRepository.class parameter.</p>\n<p><strong>Ref:</strong>\n<a href=\"https://spring.io/guides/gs/accessing-data-jpa/\" rel=\"nofollow noreferrer\">https://spring.io/guides/gs/accessing-data-jpa/</a></p>\n"}],"owner":{"account_id":572450,"reputation":4381,"user_id":218548,"accept_rate":87,"display_name":"CompanyDroneFromSector7G"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1051,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73951837,"answer_count":1,"score":0,"last_activity_date":1664910913,"creation_date":1664905491,"question_id":73951721,"body_markdown":"I&#39;m struggling through a Spring Web API tutorial, using STS4.\r\n\r\nI got to the state in the tutorial where I need to test it, but I just got a &quot;not found&quot;, so the routing doesn&#39;t seem to be working.\r\n\r\nI saw online comments that seem to suggest I need a `@ComponentScan(&quot;com.example&quot;)` adding to the `main()` function, something not mentioned in the tutorial.\r\n\r\nSo I did this but now I&#39;m getting the following.\r\n\r\n    ***************************\r\n    APPLICATION FAILED TO START\r\n    ***************************\r\n    \r\n    Description:\r\n    \r\n    Field pollRepository in com.example.controller.PollController required a bean of type &#39;com.example.repository.PollRepository&#39; that could not be found.\r\n    \r\n    The injection point has the following annotations:\r\n    \t- @javax.inject.Inject()\r\n    \r\n    \r\n    Action:\r\n    \r\n    Consider defining a bean of type &#39;com.example.repository.PollRepository&#39; in your configuration.\r\n\r\nMy project looks like this:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nThe `main` method (in `QuickPollApplication.java`):\r\n\r\n    package com.example.rest;\r\n    \r\n    import org.springframework.boot.SpringApplication;\r\n    import org.springframework.boot.autoconfigure.SpringBootApplication;\r\n    import org.springframework.context.annotation.ComponentScan;\r\n    \r\n    @ComponentScan(&quot;com.example&quot;)\r\n    @SpringBootApplication\r\n    public class QuickPollApplication {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tSpringApplication.run(QuickPollApplication.class, args);\r\n    \t}\r\n    \r\n    }\r\n\r\nand `PollController.java` looks like this:\r\n\r\n    package com.example.controller;\r\n    \r\n    import javax.inject.Inject;\r\n    \r\n    import org.springframework.http.HttpStatus;\r\n    import org.springframework.http.ResponseEntity;\r\n    import org.springframework.web.bind.annotation.GetMapping;\r\n    import org.springframework.web.bind.annotation.RestController;\r\n    \r\n    import com.example.domain.Poll;\r\n    import com.example.repository.PollRepository;\r\n    \r\n    @RestController\r\n    public class PollController {\r\n    \r\n    \t@Inject\r\n    \tprivate PollRepository pollRepository;\r\n    \t\r\n    \t@GetMapping(&quot;/polls&quot;)\r\n    \tpublic ResponseEntity&lt;Iterable&lt;Poll&gt;&gt; getAllPolls() {\r\n    \t\tIterable&lt;Poll&gt; allPolls = pollRepository.findAll();\r\n    \t\treturn new ResponseEntity&lt;&gt;(allPolls, HttpStatus.OK);\r\n    \t}\r\n    }\r\n\r\nand this is `PollRepository.java`:\r\n\r\n    package com.example.repository;\r\n    \r\n    import org.springframework.data.repository.CrudRepository;\r\n    import com.example.domain.Poll;\r\n    \r\n    \r\n    public interface PollRepository extends CrudRepository&lt;Poll, Long&gt; {\r\n    \r\n    }\r\n\r\nLet me know if it would be helpful to show anything else!\r\n\r\nAs per a suggestion I tried adding `@EnableJpaRepositories(basePackages=&quot;com.example&quot;)` to the QuickPollApplication class, but this just resulted in more errors, starting with:\r\n\r\n&gt; Error creating bean with name &#39;pollController&#39;: Unsatisfied dependency\r\n&gt; expressed through field &#39;pollRepository&#39;; nested exception is\r\n&gt; org.springframework.beans.factory.BeanCreationException: Error\r\n&gt; creating bean with name &#39;pollRepository&#39; defined in\r\n&gt; com.example.repository.PollRepository defined in\r\n&gt; @EnableJpaRepositories declared on QuickPollApplication: Invocation of\r\n&gt; init method failed; nested exception is\r\n&gt; java.lang.IllegalArgumentException: Not a managed type: class\r\n&gt; com.example.domain.Poll\r\n\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/m8LIr.png\r\n\r\n","title":"Field &quot;&quot; in &quot;&quot; required a bean of type &quot;&quot; that could not be found","body":"<p>I'm struggling through a Spring Web API tutorial, using STS4.</p>\n<p>I got to the state in the tutorial where I need to test it, but I just got a &quot;not found&quot;, so the routing doesn't seem to be working.</p>\n<p>I saw online comments that seem to suggest I need a <code>@ComponentScan(&quot;com.example&quot;)</code> adding to the <code>main()</code> function, something not mentioned in the tutorial.</p>\n<p>So I did this but now I'm getting the following.</p>\n<pre><code>***************************\nAPPLICATION FAILED TO START\n***************************\n\nDescription:\n\nField pollRepository in com.example.controller.PollController required a bean of type 'com.example.repository.PollRepository' that could not be found.\n\nThe injection point has the following annotations:\n    - @javax.inject.Inject()\n\n\nAction:\n\nConsider defining a bean of type 'com.example.repository.PollRepository' in your configuration.\n</code></pre>\n<p>My project looks like this:</p>\n<p><a href=\"https://i.stack.imgur.com/m8LIr.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/m8LIr.png\" alt=\"enter image description here\" /></a></p>\n<p>The <code>main</code> method (in <code>QuickPollApplication.java</code>):</p>\n<pre><code>package com.example.rest;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.context.annotation.ComponentScan;\n\n@ComponentScan(&quot;com.example&quot;)\n@SpringBootApplication\npublic class QuickPollApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(QuickPollApplication.class, args);\n    }\n\n}\n</code></pre>\n<p>and <code>PollController.java</code> looks like this:</p>\n<pre><code>package com.example.controller;\n\nimport javax.inject.Inject;\n\nimport org.springframework.http.HttpStatus;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.RestController;\n\nimport com.example.domain.Poll;\nimport com.example.repository.PollRepository;\n\n@RestController\npublic class PollController {\n\n    @Inject\n    private PollRepository pollRepository;\n    \n    @GetMapping(&quot;/polls&quot;)\n    public ResponseEntity&lt;Iterable&lt;Poll&gt;&gt; getAllPolls() {\n        Iterable&lt;Poll&gt; allPolls = pollRepository.findAll();\n        return new ResponseEntity&lt;&gt;(allPolls, HttpStatus.OK);\n    }\n}\n</code></pre>\n<p>and this is <code>PollRepository.java</code>:</p>\n<pre><code>package com.example.repository;\n\nimport org.springframework.data.repository.CrudRepository;\nimport com.example.domain.Poll;\n\n\npublic interface PollRepository extends CrudRepository&lt;Poll, Long&gt; {\n\n}\n</code></pre>\n<p>Let me know if it would be helpful to show anything else!</p>\n<p>As per a suggestion I tried adding <code>@EnableJpaRepositories(basePackages=&quot;com.example&quot;)</code> to the QuickPollApplication class, but this just resulted in more errors, starting with:</p>\n<blockquote>\n<p>Error creating bean with name 'pollController': Unsatisfied dependency\nexpressed through field 'pollRepository'; nested exception is\norg.springframework.beans.factory.BeanCreationException: Error\ncreating bean with name 'pollRepository' defined in\ncom.example.repository.PollRepository defined in\n@EnableJpaRepositories declared on QuickPollApplication: Invocation of\ninit method failed; nested exception is\njava.lang.IllegalArgumentException: Not a managed type: class\ncom.example.domain.Poll</p>\n</blockquote>\n"},{"tags":["java","exception"],"comments":[{"owner":{"account_id":6123,"reputation":58531,"user_id":10174,"display_name":"Jeffrey L Whitledge"},"score":2,"creation_date":1222521599,"post_id":143622,"comment_id":39495,"body_markdown":"Perhaps you could describe the &quot;odd behaviour&quot;?","body":"Perhaps you could describe the &quot;odd behaviour&quot;?"},{"owner":{"account_id":3393,"reputation":60796,"user_id":4893,"accept_rate":64,"display_name":"sblundy"},"score":0,"creation_date":1222526572,"post_id":143622,"comment_id":39570,"body_markdown":"Are you sure the ApplicationException isn&#39;t being thrown elsewhere and propagating up to this block?","body":"Are you sure the ApplicationException isn&#39;t being thrown elsewhere and propagating up to this block?"},{"owner":{"account_id":40774,"reputation":28739,"user_id":118228,"accept_rate":85,"display_name":"djangofan"},"score":0,"creation_date":1360366698,"post_id":143622,"comment_id":20698702,"body_markdown":"I noticed this in my Eclipse IDE. It is tyring to force me to put the &quot;throw new Exception&quot; in a try block but I don&#39;t know why.  I have done it in the past without doing that.  I don&#39;t see why a try block would be required.  Lots of examples on Google show people not needing a try block.  Is it because I am throwing inside an if statement?","body":"I noticed this in my Eclipse IDE. It is tyring to force me to put the &quot;throw new Exception&quot; in a try block but I don&#39;t know why.  I have done it in the past without doing that.  I don&#39;t see why a try block would be required.  Lots of examples on Google show people not needing a try block.  Is it because I am throwing inside an if statement?"}],"answers":[{"tags":[],"owner":{"account_id":9,"reputation":220293,"user_id":13,"accept_rate":100,"display_name":"C. K. Young"},"down_vote_count":0,"up_vote_count":298,"is_accepted":true,"score":298,"last_activity_date":1222521210,"creation_date":1222521210,"answer_id":143628,"question_id":143622,"body_markdown":"No, since the new `throw` is not in the `try` block directly.","title":"Exception thrown inside catch block - will it be caught again?","body":"<p>No, since the new <code>throw</code> is not in the <code>try</code> block directly.</p>\n"},{"tags":[],"owner":{"account_id":6452,"reputation":12850,"user_id":10853,"accept_rate":81,"display_name":"Ian P"},"down_vote_count":3,"up_vote_count":6,"is_accepted":false,"score":3,"last_activity_date":1222521331,"creation_date":1222521331,"answer_id":143631,"question_id":143622,"body_markdown":"No -- As Chris Jester-Young said, it will be thrown up to the next try-catch in the hierarchy.","title":"Exception thrown inside catch block - will it be caught again?","body":"<p>No -- As Chris Jester-Young said, it will be thrown up to the next try-catch in the hierarchy.</p>\n"},{"tags":[],"owner":{"account_id":8537,"reputation":40691,"user_id":15459,"accept_rate":70,"display_name":"PhiLho"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1222522714,"creation_date":1222522714,"answer_id":143660,"question_id":143622,"body_markdown":"As said above...  \r\nI would add that if you have trouble seeing what is going on, if you can&#39;t reproduce the issue in the debugger, you can add a trace before re-throwing the new exception (with the good old System.out.println at worse, with a good log system like log4j otherwise).","title":"Exception thrown inside catch block - will it be caught again?","body":"<p>As said above...<br>\nI would add that if you have trouble seeing what is going on, if you can't reproduce the issue in the debugger, you can add a trace before re-throwing the new exception (with the good old System.out.println at worse, with a good log system like log4j otherwise).</p>\n"},{"tags":[],"owner":{"account_id":3282,"reputation":146296,"user_id":4725,"accept_rate":100,"display_name":"Tom Hawtin - tackline"},"down_vote_count":1,"up_vote_count":86,"is_accepted":false,"score":85,"last_activity_date":1424287967,"creation_date":1222523314,"answer_id":143671,"question_id":143622,"body_markdown":"No. It&#39;s very easy to check.\r\n\r\n    public class Catch {\r\n        public static void main(String[] args) {\r\n            try {\r\n                throw new java.io.IOException();\r\n            } catch (java.io.IOException exc) {\r\n                System.err.println(&quot;In catch IOException: &quot;+exc.getClass());\r\n                throw new RuntimeException();\r\n            } catch (Exception exc) {\r\n                System.err.println(&quot;In catch Exception: &quot;+exc.getClass());\r\n            } finally {\r\n                System.err.println(&quot;In finally&quot;);\r\n            }\r\n        }\r\n    }\r\n\r\nShould print:\r\n\r\n&lt;pre&gt;\r\nIn catch IOException: class java.io.IOException\r\nIn finally\r\nException in thread &quot;main&quot; java.lang.RuntimeException\r\n        at Catch.main(Catch.java:8)&lt;/pre&gt;\r\n\r\nTechnically that could have been a compiler bug, implementation dependent, unspecified behaviour, or something. However, the JLS is pretty well nailed down and the compilers are good enough for this sort of simple thing (generics corner case may be a different matter).\r\n\r\nAlso note, if you swap around the two catch blocks, it wont compile. The second catch would be completely unreachable.\r\n\r\nNote the finally block always runs even if a catch block is executed (other than silly cases, such as infinite loops, attaching through the tools interface and killing the thread, rewriting bytecode, etc.).","title":"Exception thrown inside catch block - will it be caught again?","body":"<p>No. It's very easy to check.</p>\n\n<pre><code>public class Catch {\n    public static void main(String[] args) {\n        try {\n            throw new java.io.IOException();\n        } catch (java.io.IOException exc) {\n            System.err.println(\"In catch IOException: \"+exc.getClass());\n            throw new RuntimeException();\n        } catch (Exception exc) {\n            System.err.println(\"In catch Exception: \"+exc.getClass());\n        } finally {\n            System.err.println(\"In finally\");\n        }\n    }\n}\n</code></pre>\n\n<p>Should print:</p>\n\n<pre>\nIn catch IOException: class java.io.IOException\nIn finally\nException in thread \"main\" java.lang.RuntimeException\n        at Catch.main(Catch.java:8)</pre>\n\n<p>Technically that could have been a compiler bug, implementation dependent, unspecified behaviour, or something. However, the JLS is pretty well nailed down and the compilers are good enough for this sort of simple thing (generics corner case may be a different matter).</p>\n\n<p>Also note, if you swap around the two catch blocks, it wont compile. The second catch would be completely unreachable.</p>\n\n<p>Note the finally block always runs even if a catch block is executed (other than silly cases, such as infinite loops, attaching through the tools interface and killing the thread, rewriting bytecode, etc.).</p>\n"},{"tags":[],"owner":{"account_id":3591,"reputation":332917,"user_id":5190,"accept_rate":76,"display_name":"Vinko Vrsalovic"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1222523615,"creation_date":1222523615,"answer_id":143674,"question_id":143622,"body_markdown":"It won&#39;t be caught by the second catch block. Each Exception is caught only when inside a try block. You can nest tries though (not that it&#39;s a good idea generally):\r\n\r\n    try {\r\n        doSomething();\r\n    } catch (IOException) {\r\n       try {\r\n           doSomething();\r\n       } catch (IOException e) {\r\n           throw new ApplicationException(&quot;Failed twice at doSomething&quot; +\r\n           e.toString());\r\n       }          \r\n    } catch (Exception e) {\r\n    }","title":"Exception thrown inside catch block - will it be caught again?","body":"<p>It won't be caught by the second catch block. Each Exception is caught only when inside a try block. You can nest tries though (not that it's a good idea generally):</p>\n\n<pre><code>try {\n    doSomething();\n} catch (IOException) {\n   try {\n       doSomething();\n   } catch (IOException e) {\n       throw new ApplicationException(\"Failed twice at doSomething\" +\n       e.toString());\n   }          \n} catch (Exception e) {\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11857,"reputation":88771,"user_id":23072,"accept_rate":74,"display_name":"Uri"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1222553117,"creation_date":1222553117,"answer_id":144588,"question_id":143622,"body_markdown":"No, since the catches all refer to the same try block, so throwing from within a catch block would be caught by an enclosing try block (probably in the method that called this one) ","title":"Exception thrown inside catch block - will it be caught again?","body":"<p>No, since the catches all refer to the same try block, so throwing from within a catch block would be caught by an enclosing try block (probably in the method that called this one) </p>\n"},{"tags":[],"owner":{"account_id":4938,"reputation":69433,"user_id":7671,"accept_rate":70,"display_name":"Alex Miller"},"down_vote_count":0,"up_vote_count":33,"is_accepted":false,"score":33,"last_activity_date":1222565311,"creation_date":1222565311,"answer_id":144944,"question_id":143622,"body_markdown":"The Java Language Specification says in section 14.19.1:\n\n&gt; If execution of the try block completes abruptly because of a throw of a value V, then there is a choice:\n&gt;\n&gt;    * If the run-time type of V is assignable to the Parameter of any catch clause of the try statement, then the first (leftmost) such catch clause is selected. The value V is assigned to the parameter of the selected catch clause, and the Block of that catch clause is executed. If that block completes normally, then the try statement completes normally; **if that block completes abruptly for any reason, then the try statement completes abruptly for the same reason.**\n\nReference:\nhttp://java.sun.com/docs/books/jls/second_edition/html/statements.doc.html#24134\n\nIn other words, the first enclosing catch that can handle the exception does, and if an exception is thrown out of that catch, that&#39;s not in the scope of any other catch for the original try, so they will not try to handle it.  \n\nOne related and confusing thing to know is that in a try-[catch]-finally structure, a finally block may throw an exception and if so, any exception thrown by the try or catch block is lost.  That can be confusing the first time you see it.\n\n\n","title":"Exception thrown inside catch block - will it be caught again?","body":"<p>The Java Language Specification says in section 14.19.1:</p>\n<blockquote>\n<p>If execution of the try block completes abruptly because of a throw of a value V, then there is a choice:</p>\n<ul>\n<li>If the run-time type of V is assignable to the Parameter of any catch clause of the try statement, then the first (leftmost) such catch clause is selected. The value V is assigned to the parameter of the selected catch clause, and the Block of that catch clause is executed. If that block completes normally, then the try statement completes normally; <strong>if that block completes abruptly for any reason, then the try statement completes abruptly for the same reason.</strong></li>\n</ul>\n</blockquote>\n<p>Reference:\n<a href=\"http://java.sun.com/docs/books/jls/second_edition/html/statements.doc.html#24134\" rel=\"noreferrer\">http://java.sun.com/docs/books/jls/second_edition/html/statements.doc.html#24134</a></p>\n<p>In other words, the first enclosing catch that can handle the exception does, and if an exception is thrown out of that catch, that's not in the scope of any other catch for the original try, so they will not try to handle it.</p>\n<p>One related and confusing thing to know is that in a try-[catch]-finally structure, a finally block may throw an exception and if so, any exception thrown by the try or catch block is lost.  That can be confusing the first time you see it.</p>\n"},{"tags":[],"owner":{"account_id":936765,"reputation":429,"user_id":965571,"accept_rate":94,"display_name":"Mastergeek"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1371221571,"creation_date":1371221571,"answer_id":17111311,"question_id":143622,"body_markdown":"If you want to throw an exception from the catch block you must inform your method/class/etc. that it needs to throw said exception. Like so:\r\n\r\n    public void doStuff() throws MyException {\r\n        try {\r\n            //Stuff\r\n        } catch(StuffException e) {\r\n            throw new MyException();\r\n        }\r\n    }\r\n\r\nAnd now your compiler will not yell at you :)","title":"Exception thrown inside catch block - will it be caught again?","body":"<p>If you want to throw an exception from the catch block you must inform your method/class/etc. that it needs to throw said exception. Like so:</p>\n\n<pre><code>public void doStuff() throws MyException {\n    try {\n        //Stuff\n    } catch(StuffException e) {\n        throw new MyException();\n    }\n}\n</code></pre>\n\n<p>And now your compiler will not yell at you :)</p>\n"},{"tags":[],"owner":{"account_id":2677579,"reputation":1,"user_id":2324774,"display_name":"Ted K"},"down_vote_count":10,"up_vote_count":1,"is_accepted":false,"score":-9,"last_activity_date":1385873265,"creation_date":1385871893,"answer_id":20308711,"question_id":143622,"body_markdown":"Old post but &quot;e&quot; variable must be unique:\r\n\r\n    try {\r\n      // Do something\r\n    } catch(IOException ioE) {\r\n      throw new ApplicationException(&quot;Problem connecting to server&quot;);\r\n    } catch(Exception e) {\r\n      // Will the ApplicationException be caught here?\r\n    }\r\n\r\n","title":"Exception thrown inside catch block - will it be caught again?","body":"<p>Old post but \"e\" variable must be unique:</p>\n\n<pre><code>try {\n  // Do something\n} catch(IOException ioE) {\n  throw new ApplicationException(\"Problem connecting to server\");\n} catch(Exception e) {\n  // Will the ApplicationException be caught here?\n}\n</code></pre>\n"}],"owner":{"account_id":216,"reputation":29742,"user_id":270,"accept_rate":78,"display_name":"roryf"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":291982,"favorite_count":0,"down_vote_count":2,"up_vote_count":251,"accepted_answer_id":143628,"answer_count":9,"score":249,"last_activity_date":1664910909,"creation_date":1222521051,"question_id":143622,"body_markdown":"This may seem like a programming 101 question and I had thought I knew the answer but now find myself needing to double check. In this piece of code below, will the exception thrown in the first catch block then be caught by the general Exception catch block below?\r\n\r\n    try {\r\n      // Do something\r\n    } catch(IOException e) {\r\n      throw new ApplicationException(&quot;Problem connecting to server&quot;);\r\n    } catch(Exception e) {\r\n      // Will the ApplicationException be caught here?\r\n    }\r\n\r\nI always thought the answer would be no, but now I have some odd behaviour that could be caused by this. The answer is probably the same for most languages but I&#39;m working in Java.","title":"Exception thrown inside catch block - will it be caught again?","body":"<p>This may seem like a programming 101 question and I had thought I knew the answer but now find myself needing to double check. In this piece of code below, will the exception thrown in the first catch block then be caught by the general Exception catch block below?</p>\n\n<pre><code>try {\n  // Do something\n} catch(IOException e) {\n  throw new ApplicationException(\"Problem connecting to server\");\n} catch(Exception e) {\n  // Will the ApplicationException be caught here?\n}\n</code></pre>\n\n<p>I always thought the answer would be no, but now I have some odd behaviour that could be caused by this. The answer is probably the same for most languages but I'm working in Java.</p>\n"},{"tags":["java","amazon-s3","aws-sdk-java-2.0","aws-sdk-java"],"comments":[{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1631333821,"post_id":69138969,"comment_id":122199625,"body_markdown":"This is not Java 1 vs Java 2.  It is versions 1 and 2 of the AWS SDK for Java.  (For what it is worth, Java 1 and 2 were both obsolete 20 years ago.  Before AWS even existed.)","body":"This is not Java 1 vs Java 2.  It is versions 1 and 2 of the AWS SDK for Java.  (For what it is worth, Java 1 and 2 were both obsolete 20 years ago.  Before AWS even existed.)"},{"owner":{"account_id":4787038,"reputation":1,"user_id":3867198,"display_name":"user3867198"},"score":0,"creation_date":1631550374,"post_id":69138969,"comment_id":122246706,"body_markdown":"I agree @Stepehen C. Thank you for pointing this out - I have updated the question.","body":"I agree @Stepehen C. Thank you for pointing this out - I have updated the question."}],"answers":[{"tags":[],"owner":{"account_id":25518790,"reputation":1,"user_id":19309136,"display_name":"Soumya Naidu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664910458,"creation_date":1664910458,"answer_id":73952559,"question_id":69138969,"body_markdown":"[credentials][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/hl1py.png\r\n\r\nThe above is how the credentials file should be defined. You are probably missing that first line. I guess one library expects the credentials file to be defined this way and one does not","title":"AWS ProfileCredentialProvides AWS SDK1 VS AWS SDK 2 JAVA","body":"<p><a href=\"https://i.stack.imgur.com/hl1py.png\" rel=\"nofollow noreferrer\">credentials</a></p>\n<p>The above is how the credentials file should be defined. You are probably missing that first line. I guess one library expects the credentials file to be defined this way and one does not</p>\n"}],"owner":{"account_id":4787038,"reputation":1,"user_id":3867198,"display_name":"user3867198"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":482,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1664910458,"creation_date":1631317705,"question_id":69138969,"body_markdown":"Can someone please explain the difference between the two libraries below - \r\n\r\nI have two pieces of code, both trying to list s3 buckets in an account.\r\n\r\nJAVA 1 Library. that uses CredentialProvider from  [**com.amazonaws.auth.profile.ProfileCredentialsProvider**;][1]\r\n\r\n```\r\n            AmazonS3 s3Client = AmazonS3ClientBuilder.standard()\r\n                    .withCredentials(new ProfileCredentialsProvider(&quot;default&quot;))\r\n                    .withRegion(&quot;us-east-1&quot;)\r\n                    .build();\r\n\r\n            System.out.println(&quot;Number of buckets: &quot; + s3Client.listBuckets().size());\r\n```\r\n\r\nJava 2 Library that uses CredentialProvider from\r\n\r\n[software.amazon.awssdk.auth.credentials.ProfileCredentialsProvider;][2]\r\n\r\n```\r\nS3Client s3Client = S3Client.builder()\r\n                   .credentialsProvider(ProfileCredentialsProvider.builder().profileName(&quot;default&quot;)\r\n                    .build())\r\n                    .region(Region.of(&quot;us-east-1&quot;))\r\n                    .build();\r\n            System.out.println(&quot;Number of buckets: &quot; + s3Client.listBuckets().buckets().size());\r\n```\r\nThe Java2 library invocation succeeds and I can see the number of buckets printing.\r\n\r\nThe Java 1 library when used, always fails to load the profile from the config.\r\n\r\nThe ENV variables are set. I get this below exception:\r\n```\r\njava.lang.IllegalArgumentException: No AWS profile named &#39;default&#39;\r\n\tat com.amazonaws.auth.profile.ProfilesConfigFile.getCredentials(ProfilesConfigFile.java:158)\r\n\tat com.amazonaws.auth.profile.ProfileCredentialsProvider.getCredentials(ProfileCredentialsProvider.java:161)\r\n\tat com.s3.test.TestS3.testRead(TestS3.java:12)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n\tat org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)\r\n\tat org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\r\n\tat org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)\r\n\tat org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)\r\n\tat org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)\r\n\tat org.junit.runners.BlockJUnit4ClassRunner$1.evaluate(BlockJUnit4ClassRunner.java:100)\r\n\tat org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:366)\r\n\tat org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:103)\r\n\tat org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:63)\r\n\tat org.junit.runners.ParentRunner$4.run(ParentRunner.java:331)\r\n\tat org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:79)\r\n\tat org.junit.runners.ParentRunner.runChildren(ParentRunner.java:329)\r\n\tat org.junit.runners.ParentRunner.access$100(ParentRunner.java:66)\r\n\tat org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:293)\r\n\tat org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)\r\n\tat org.junit.runners.ParentRunner.run(ParentRunner.java:413)\r\n\tat org.junit.runner.JUnitCore.run(JUnitCore.java:137)\r\n\tat com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:69)\r\n\tat com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:33)\r\n\tat com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:235)\r\n\tat com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:54)\r\n```\r\n\r\n\r\n  [1]: https://docs.aws.amazon.com/AWSJavaSDK/latest/javadoc/com/amazonaws/auth/profile/ProfileCredentialsProvider.html#ProfileCredentia[%E2%80%A6]ava.lang.String-\r\n  [2]: https://sdk.amazonaws.com/java/api/latest/software/amazon/awssdk/auth/credentials/ProfileCredentialsProvider.html","title":"AWS ProfileCredentialProvides AWS SDK1 VS AWS SDK 2 JAVA","body":"<p>Can someone please explain the difference between the two libraries below -</p>\n<p>I have two pieces of code, both trying to list s3 buckets in an account.</p>\n<p>JAVA 1 Library. that uses CredentialProvider from  <a href=\"https://docs.aws.amazon.com/AWSJavaSDK/latest/javadoc/com/amazonaws/auth/profile/ProfileCredentialsProvider.html#ProfileCredentia%5B%E2%80%A6%5Dava.lang.String-\" rel=\"nofollow noreferrer\"><strong>com.amazonaws.auth.profile.ProfileCredentialsProvider</strong>;</a></p>\n<pre><code>            AmazonS3 s3Client = AmazonS3ClientBuilder.standard()\n                    .withCredentials(new ProfileCredentialsProvider(&quot;default&quot;))\n                    .withRegion(&quot;us-east-1&quot;)\n                    .build();\n\n            System.out.println(&quot;Number of buckets: &quot; + s3Client.listBuckets().size());\n</code></pre>\n<p>Java 2 Library that uses CredentialProvider from</p>\n<p><a href=\"https://sdk.amazonaws.com/java/api/latest/software/amazon/awssdk/auth/credentials/ProfileCredentialsProvider.html\" rel=\"nofollow noreferrer\">software.amazon.awssdk.auth.credentials.ProfileCredentialsProvider;</a></p>\n<pre><code>S3Client s3Client = S3Client.builder()\n                   .credentialsProvider(ProfileCredentialsProvider.builder().profileName(&quot;default&quot;)\n                    .build())\n                    .region(Region.of(&quot;us-east-1&quot;))\n                    .build();\n            System.out.println(&quot;Number of buckets: &quot; + s3Client.listBuckets().buckets().size());\n</code></pre>\n<p>The Java2 library invocation succeeds and I can see the number of buckets printing.</p>\n<p>The Java 1 library when used, always fails to load the profile from the config.</p>\n<p>The ENV variables are set. I get this below exception:</p>\n<pre><code>java.lang.IllegalArgumentException: No AWS profile named 'default'\n    at com.amazonaws.auth.profile.ProfilesConfigFile.getCredentials(ProfilesConfigFile.java:158)\n    at com.amazonaws.auth.profile.ProfileCredentialsProvider.getCredentials(ProfileCredentialsProvider.java:161)\n    at com.s3.test.TestS3.testRead(TestS3.java:12)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:566)\n    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)\n    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\n    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)\n    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)\n    at org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)\n    at org.junit.runners.BlockJUnit4ClassRunner$1.evaluate(BlockJUnit4ClassRunner.java:100)\n    at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:366)\n    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:103)\n    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:63)\n    at org.junit.runners.ParentRunner$4.run(ParentRunner.java:331)\n    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:79)\n    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:329)\n    at org.junit.runners.ParentRunner.access$100(ParentRunner.java:66)\n    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:293)\n    at org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)\n    at org.junit.runners.ParentRunner.run(ParentRunner.java:413)\n    at org.junit.runner.JUnitCore.run(JUnitCore.java:137)\n    at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:69)\n    at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:33)\n    at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:235)\n    at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:54)\n</code></pre>\n"},{"tags":["java","junit","jndi"],"comments":[{"owner":{"account_id":1354733,"reputation":1146,"user_id":1293377,"display_name":"fGo"},"score":0,"creation_date":1371114494,"post_id":17083142,"comment_id":24708435,"body_markdown":"it really depends on your app server . any ways take a look at this http://www.codeproject.com/Articles/25741/EJB-3-0-Remote-Session-Bean-Lookup","body":"it really depends on your app server . any ways take a look at this <a href=\"http://www.codeproject.com/Articles/25741/EJB-3-0-Remote-Session-Bean-Lookup\" rel=\"nofollow noreferrer\">codeproject.com/Articles/25741/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":40256,"reputation":46474,"user_id":116639,"accept_rate":25,"display_name":"Tom Anderson"},"down_vote_count":0,"up_vote_count":29,"is_accepted":true,"score":29,"last_activity_date":1520455828,"creation_date":1371115997,"answer_id":17083737,"question_id":17083142,"body_markdown":"The orthodox thing to do here would be to change you code so that the `Context` is injected into it (by a dependency injection framework, or manually). Then, you simply pass in a mock in your unit test.\r\n\r\nIf you can&#39;t do this, and your code must create the `IntialContext` itself, then you will need to set up a fake JNDI implementation into which you can inject mocks. If you search the web for [in-memory JNDI implementation](http://meri-stuff.blogspot.ca/2012/01/running-jndi-and-jpa-without-j2ee.html) or [mock JNDI implementation](https://theholyjava.wordpress.com/2010/05/05/mocking-out-ldapjndi-in-unit-tests/), you will find various options, or you could write one yourself. Basically, you will need an implementation of `InitialContextFactory` which simply returns a suitable mock, which you then select by setting the `java.naming.factory.initial` system property.\r\n\r\nI had a crack at writing the necessary classes. Here you go:\r\n\r\n    public class MockInitialContextFactory implements InitialContextFactory {\r\n        \r\n        private static final ThreadLocal&lt;Context&gt; currentContext = new ThreadLocal&lt;Context&gt;();\r\n        \r\n        @Override\r\n        public Context getInitialContext(Hashtable&lt;?, ?&gt; environment) throws NamingException {\r\n            return currentContext.get();\r\n        }\r\n        \r\n        public static void setCurrentContext(Context context) {\r\n            currentContext.set(context);\r\n        }\r\n        \r\n        public static void clearCurrentContext() {\r\n            currentContext.remove();\r\n        }\r\n        \r\n    }\r\n    \r\n    public class MockInitialContextRule implements TestRule {\r\n        \r\n        private final Context context;\r\n        \r\n        public MockInitialContextRule(Context context) {\r\n            this.context = context;\r\n        }\r\n        \r\n        @Override\r\n        public Statement apply(final Statement base, Description description) {\r\n            return new Statement() {\r\n                @Override\r\n                public void evaluate() throws Throwable {\r\n                    System.setProperty(Context.INITIAL_CONTEXT_FACTORY, MockInitialContextFactory.class.getName());\r\n                    MockInitialContextFactory.setCurrentContext(context);\r\n                    try {\r\n                        base.evaluate();\r\n                    } finally {\r\n                        System.clearProperty(Context.INITIAL_CONTEXT_FACTORY);\r\n                        MockInitialContextFactory.clearCurrentContext();\r\n                    }\r\n                }\r\n            };\r\n        }\r\n    }\r\n\r\nUse as follows:\r\n\r\n    public class FooTest {\r\n        \r\n        private final Context context = mock(Context.class);\r\n        \r\n        @Rule\r\n        public MockInitialContextRule mockInitialContextRule = new MockInitialContextRule(context);\r\n        \r\n        @Test\r\n        public void testName() throws Exception {\r\n            // set up stubbings on the context mock\r\n            // invoke the code under test\r\n        }\r\n    }\r\n","title":"Junit Testing JNDI InitialContext outside the application server","body":"<p>The orthodox thing to do here would be to change you code so that the <code>Context</code> is injected into it (by a dependency injection framework, or manually). Then, you simply pass in a mock in your unit test.</p>\n\n<p>If you can't do this, and your code must create the <code>IntialContext</code> itself, then you will need to set up a fake JNDI implementation into which you can inject mocks. If you search the web for <a href=\"http://meri-stuff.blogspot.ca/2012/01/running-jndi-and-jpa-without-j2ee.html\" rel=\"noreferrer\">in-memory JNDI implementation</a> or <a href=\"https://theholyjava.wordpress.com/2010/05/05/mocking-out-ldapjndi-in-unit-tests/\" rel=\"noreferrer\">mock JNDI implementation</a>, you will find various options, or you could write one yourself. Basically, you will need an implementation of <code>InitialContextFactory</code> which simply returns a suitable mock, which you then select by setting the <code>java.naming.factory.initial</code> system property.</p>\n\n<p>I had a crack at writing the necessary classes. Here you go:</p>\n\n<pre><code>public class MockInitialContextFactory implements InitialContextFactory {\n\n    private static final ThreadLocal&lt;Context&gt; currentContext = new ThreadLocal&lt;Context&gt;();\n\n    @Override\n    public Context getInitialContext(Hashtable&lt;?, ?&gt; environment) throws NamingException {\n        return currentContext.get();\n    }\n\n    public static void setCurrentContext(Context context) {\n        currentContext.set(context);\n    }\n\n    public static void clearCurrentContext() {\n        currentContext.remove();\n    }\n\n}\n\npublic class MockInitialContextRule implements TestRule {\n\n    private final Context context;\n\n    public MockInitialContextRule(Context context) {\n        this.context = context;\n    }\n\n    @Override\n    public Statement apply(final Statement base, Description description) {\n        return new Statement() {\n            @Override\n            public void evaluate() throws Throwable {\n                System.setProperty(Context.INITIAL_CONTEXT_FACTORY, MockInitialContextFactory.class.getName());\n                MockInitialContextFactory.setCurrentContext(context);\n                try {\n                    base.evaluate();\n                } finally {\n                    System.clearProperty(Context.INITIAL_CONTEXT_FACTORY);\n                    MockInitialContextFactory.clearCurrentContext();\n                }\n            }\n        };\n    }\n}\n</code></pre>\n\n<p>Use as follows:</p>\n\n<pre><code>public class FooTest {\n\n    private final Context context = mock(Context.class);\n\n    @Rule\n    public MockInitialContextRule mockInitialContextRule = new MockInitialContextRule(context);\n\n    @Test\n    public void testName() throws Exception {\n        // set up stubbings on the context mock\n        // invoke the code under test\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23506,"reputation":7505,"user_id":58962,"accept_rate":65,"display_name":"Michael B&#246;ckling"},"down_vote_count":1,"up_vote_count":9,"is_accepted":false,"score":8,"last_activity_date":1444738244,"creation_date":1444738244,"answer_id":33102380,"question_id":17083142,"body_markdown":"You can use the Spring implementation, it works like this:\r\n\r\n    import org.springframework.mock.jndi.SimpleNamingContextBuilder;\r\n    \r\n    [...]\r\n    \r\n    SimpleNamingContextBuilder builder = new SimpleNamingContextBuilder();\r\n    builder.bind(&quot;jdbc/myDataSource&quot;, myDS);\r\n    builder.activate();","title":"Junit Testing JNDI InitialContext outside the application server","body":"<p>You can use the Spring implementation, it works like this:</p>\n\n<pre><code>import org.springframework.mock.jndi.SimpleNamingContextBuilder;\n\n[...]\n\nSimpleNamingContextBuilder builder = new SimpleNamingContextBuilder();\nbuilder.bind(\"jdbc/myDataSource\", myDS);\nbuilder.activate();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8897426,"reputation":764,"user_id":6641978,"display_name":"Holger Thurow"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1488177198,"creation_date":1486207475,"answer_id":42039790,"question_id":17083142,"body_markdown":"This is easily done with Simple-JNDI. Create a property file &quot;jdbc/multiDS.properties&quot; in your working directory to configure your datasource with these properties:\r\n\r\n    type=javax.sql.DataSource\r\n    driver=org.gjt.mm.mysql.Driver\r\n    url=jdbc:mysql://localhost/testdb\r\n    user=testuser\r\n    password=testing\r\n\r\nThen instantiate the context with\r\n\r\n    final Hashtable&lt;String, String&gt; env = new Hashtable&lt;String, String&gt;();\r\n    env.put(&quot;org.osjava.sj.root&quot;, &quot;working_dir&quot;);\r\n    env.put(&quot;org.osjava.sj.jndi.shared&quot;, &quot;true&quot;);\r\n    env.put(&quot;java.naming.factory.initial&quot;, &quot;org.osjava.sj.SimpleContextFactory&quot;);\r\n    env.put(&quot;org.osjava.sj.delimiter&quot;, &quot;/&quot;);\r\n    env.put(&quot;org.osjava.sj.space&quot;, &quot;java:comp/env&quot;)\r\n    Context ctx = new InitialContext(env);\r\n\r\nAfter that you can call\r\n\r\n    dataSource = (DataSource) context.lookup(&quot;java:comp/env/jdbc/multiDS&quot;);\r\n\r\nFind more info about Simple-JNDI here https://github.com/h-thurow/Simple-JNDI","title":"Junit Testing JNDI InitialContext outside the application server","body":"<p>This is easily done with Simple-JNDI. Create a property file \"jdbc/multiDS.properties\" in your working directory to configure your datasource with these properties:</p>\n\n<pre><code>type=javax.sql.DataSource\ndriver=org.gjt.mm.mysql.Driver\nurl=jdbc:mysql://localhost/testdb\nuser=testuser\npassword=testing\n</code></pre>\n\n<p>Then instantiate the context with</p>\n\n<pre><code>final Hashtable&lt;String, String&gt; env = new Hashtable&lt;String, String&gt;();\nenv.put(\"org.osjava.sj.root\", \"working_dir\");\nenv.put(\"org.osjava.sj.jndi.shared\", \"true\");\nenv.put(\"java.naming.factory.initial\", \"org.osjava.sj.SimpleContextFactory\");\nenv.put(\"org.osjava.sj.delimiter\", \"/\");\nenv.put(\"org.osjava.sj.space\", \"java:comp/env\")\nContext ctx = new InitialContext(env);\n</code></pre>\n\n<p>After that you can call</p>\n\n<pre><code>dataSource = (DataSource) context.lookup(\"java:comp/env/jdbc/multiDS\");\n</code></pre>\n\n<p>Find more info about Simple-JNDI here <a href=\"https://github.com/h-thurow/Simple-JNDI\" rel=\"nofollow noreferrer\">https://github.com/h-thurow/Simple-JNDI</a></p>\n"},{"tags":[],"owner":{"account_id":3092,"reputation":2609,"user_id":4389,"accept_rate":75,"display_name":"Steve Bosman"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1648048955,"creation_date":1648048955,"answer_id":71589797,"question_id":17083142,"body_markdown":"I had problems using the suggested solutions on a legacy system I am adding tests to, but I have found that using Mockito.mockConstruction can be a simple approach:\r\n\r\n    public class FooTest {\r\n      private final Context mockContext = mock(Context.class);\r\n\r\n      @Test\r\n      public void myTest()\r\n          throws NamingException {\r\n\r\n        try (final MockedConstruction&lt;InitialContext&gt; ignored = \r\n                   mockConstruction(InitialContext.class,\r\n                   (mock, context) -&gt; \r\n                        when(mock.lookup(&quot;java:comp/env&quot;))\r\n                        .thenReturn(mockContext)) {\r\n        // Given\r\n        when(mockContext.lookup(&quot;environmentEntry&quot;))\r\n            .thenReturn(desiredResult);\r\n        ...\r\n      }\r\n    }","title":"Junit Testing JNDI InitialContext outside the application server","body":"<p>I had problems using the suggested solutions on a legacy system I am adding tests to, but I have found that using Mockito.mockConstruction can be a simple approach:</p>\n<pre><code>public class FooTest {\n  private final Context mockContext = mock(Context.class);\n\n  @Test\n  public void myTest()\n      throws NamingException {\n\n    try (final MockedConstruction&lt;InitialContext&gt; ignored = \n               mockConstruction(InitialContext.class,\n               (mock, context) -&gt; \n                    when(mock.lookup(&quot;java:comp/env&quot;))\n                    .thenReturn(mockContext)) {\n    // Given\n    when(mockContext.lookup(&quot;environmentEntry&quot;))\n        .thenReturn(desiredResult);\n    ...\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":2556648,"reputation":273,"user_id":2218466,"display_name":"ravichandra"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":37565,"favorite_count":0,"down_vote_count":0,"up_vote_count":27,"accepted_answer_id":17083737,"answer_count":4,"score":27,"last_activity_date":1664910236,"creation_date":1371114226,"question_id":17083142,"body_markdown":"    Context context = new InitialContext();\r\n    dataSource = (DataSource) context.lookup(&quot;java:comp/env/jdbc/multiDS&quot;);\r\n    connection = dataSource.getConnection();\r\n\r\nPlease help me to mock the above code.\r\n\r\n\r\nHi Tom Anderson \r\n\r\nI tried the below code \r\n\r\n\t @BeforeClass\r\n\t public static void setUpClass() throws Exception {\r\n\t        // rcarver - setup the jndi context and the datasource\r\n\t        try {\r\n\t            // Create initial context\r\n\t            System.setProperty(Context.INITIAL_CONTEXT_FACTORY,\r\n\t                &quot;org.apache.naming.java.javaURLContextFactory&quot;);\r\n\t            System.setProperty(Context.URL_PKG_PREFIXES, \r\n\t                &quot;org.apache.naming&quot;);            \r\n\t            Context ic = new InitialContext();\r\n\r\n\t            ic.createSubcontext(&quot;java:&quot;);\r\n\t            ic.createSubcontext(&quot;java:comp&quot;);\r\n\t            ic.createSubcontext(&quot;java:comp/env&quot;);\r\n\t            ic.createSubcontext(&quot;java:comp/env/jdbc&quot;);\r\n\t            ic.createSubcontext(&quot;java:comp/env/jdbc/multiDS&quot;);\r\n\t            // Construct DataSource\r\n\t            OracleConnectionPoolDataSource ds = new OracleConnectionPoolDataSource();\r\n\t            ds.setURL(&quot;jdbc:oracle:thin:@g9u0696.houston.hp.com:1525:CRNAD&quot;);\r\n\t            ds.setUser(&quot;uname&quot;);\r\n\t            ds.setPassword(&quot;pwd&quot;);\r\n\t        } catch (NamingException ex) {\r\n\t        \tex.printStackTrace();\r\n\t        }\r\n\t }\r\n\r\nBut its giving error as:\r\n\r\n    com.hp.corona.common.exception.CacheException: org.apache.naming.NamingContext cannot be cast to javax.sql.DataSource\r\n\r\nPlease help me to test the code i just want **connection** from JNDI datasource\r\n","title":"Junit Testing JNDI InitialContext outside the application server","body":"<pre><code>Context context = new InitialContext();\ndataSource = (DataSource) context.lookup(\"java:comp/env/jdbc/multiDS\");\nconnection = dataSource.getConnection();\n</code></pre>\n\n<p>Please help me to mock the above code.</p>\n\n<p>Hi Tom Anderson </p>\n\n<p>I tried the below code </p>\n\n<pre><code> @BeforeClass\n public static void setUpClass() throws Exception {\n        // rcarver - setup the jndi context and the datasource\n        try {\n            // Create initial context\n            System.setProperty(Context.INITIAL_CONTEXT_FACTORY,\n                \"org.apache.naming.java.javaURLContextFactory\");\n            System.setProperty(Context.URL_PKG_PREFIXES, \n                \"org.apache.naming\");            \n            Context ic = new InitialContext();\n\n            ic.createSubcontext(\"java:\");\n            ic.createSubcontext(\"java:comp\");\n            ic.createSubcontext(\"java:comp/env\");\n            ic.createSubcontext(\"java:comp/env/jdbc\");\n            ic.createSubcontext(\"java:comp/env/jdbc/multiDS\");\n            // Construct DataSource\n            OracleConnectionPoolDataSource ds = new OracleConnectionPoolDataSource();\n            ds.setURL(\"jdbc:oracle:thin:@g9u0696.houston.hp.com:1525:CRNAD\");\n            ds.setUser(\"uname\");\n            ds.setPassword(\"pwd\");\n        } catch (NamingException ex) {\n            ex.printStackTrace();\n        }\n }\n</code></pre>\n\n<p>But its giving error as:</p>\n\n<pre><code>com.hp.corona.common.exception.CacheException: org.apache.naming.NamingContext cannot be cast to javax.sql.DataSource\n</code></pre>\n\n<p>Please help me to test the code i just want <strong>connection</strong> from JNDI datasource</p>\n"},{"tags":["java","spring","spring-boot","dependency-injection"],"owner":{"account_id":10469593,"reputation":74,"user_id":7911017,"display_name":"Pavlo Kuchereshko"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":83,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1664910058,"creation_date":1664910058,"question_id":73952496,"body_markdown":"I have the following set of dependent objects I need to convert to the Spring beans and remove `new` operations from each constructor:\r\n\r\n    public class ServiceAlphaImpl implements ServiceAlpha {\r\n      private final Platform platform;\r\n      private final ServiceBeta serviceBeta;\r\n    \r\n      public ServiceAlphaImpl(final Platform platform) {\r\n        this.platform = platform;\r\n        this.serviceBeta = new ServiceBetaImpl(platform);\r\n      }\r\n\r\n      // some logic\r\n    }\r\n\r\n    public class ServiceBetaImpl implements ServiceBeta {\r\n      private final Platform platform;\r\n      private final ServiceGamma serviceGamma;\r\n    \r\n      public ServiceBetaImpl(final Platform platform) {\r\n        this.platform = platform;\r\n        this.serviceGamma = new ServiceGammaImpl(platform);\r\n      }\r\n\r\n      // some logic\r\n    }\r\n\r\n    public class ServiceGammaImpl implements ServiceGamma {\r\n      private final Platform platform;\r\n    \r\n      public ServiceGammaImpl(final Platform platform) {\r\n        this.platform = platform;\r\n      }\r\n\r\n      // some logic\r\n    }\r\n\r\nThe object of type `Platform` is **not** a bean, so I suppose I need to have those services dependent on Platform to be a prototype scoped, e.a. for each Platform object I would dynamically in runtime create a service. How can I get the bean of `ServiceAlpha` type with properly initialized nested prototypes with the same Platform object by doing simply `applicationContext.getBean(ServiceAlpha.class, new Platform(&quot;OMEGA&quot;))` or using some factory and having something like this at the end:\r\n\r\n    @Service\r\n    @Scope(ConfigurableBeanFactory.SCOPE_PROTOTYPE)\r\n    public class ServiceAlphaImpl implements ServiceAlpha {\r\n      private final Platform platform;\r\n      private final ServiceBeta serviceBeta;\r\n\r\n      // some logic\r\n    }\r\n\r\n    @Service\r\n    @Scope(ConfigurableBeanFactory.SCOPE_PROTOTYPE)\r\n    public class ServiceBetaImpl implements ServiceBeta {\r\n      private final Platform platform;\r\n      private final ServiceGamma serviceGamma;\r\n\r\n      // some logic\r\n    }\r\n\r\n    @Service\r\n    @Scope(ConfigurableBeanFactory.SCOPE_PROTOTYPE)\r\n    public class ServiceGammaImpl implements ServiceGamma {\r\n      private final Platform platform;\r\n\r\n      // some logic\r\n    }\r\n\r\nI would be glad also to know suggestions on the restructuring of the current hierarchy.","title":"Spring Prototype bean with nested prototype beans","body":"<p>I have the following set of dependent objects I need to convert to the Spring beans and remove <code>new</code> operations from each constructor:</p>\n<pre><code>public class ServiceAlphaImpl implements ServiceAlpha {\n  private final Platform platform;\n  private final ServiceBeta serviceBeta;\n\n  public ServiceAlphaImpl(final Platform platform) {\n    this.platform = platform;\n    this.serviceBeta = new ServiceBetaImpl(platform);\n  }\n\n  // some logic\n}\n\npublic class ServiceBetaImpl implements ServiceBeta {\n  private final Platform platform;\n  private final ServiceGamma serviceGamma;\n\n  public ServiceBetaImpl(final Platform platform) {\n    this.platform = platform;\n    this.serviceGamma = new ServiceGammaImpl(platform);\n  }\n\n  // some logic\n}\n\npublic class ServiceGammaImpl implements ServiceGamma {\n  private final Platform platform;\n\n  public ServiceGammaImpl(final Platform platform) {\n    this.platform = platform;\n  }\n\n  // some logic\n}\n</code></pre>\n<p>The object of type <code>Platform</code> is <strong>not</strong> a bean, so I suppose I need to have those services dependent on Platform to be a prototype scoped, e.a. for each Platform object I would dynamically in runtime create a service. How can I get the bean of <code>ServiceAlpha</code> type with properly initialized nested prototypes with the same Platform object by doing simply <code>applicationContext.getBean(ServiceAlpha.class, new Platform(&quot;OMEGA&quot;))</code> or using some factory and having something like this at the end:</p>\n<pre><code>@Service\n@Scope(ConfigurableBeanFactory.SCOPE_PROTOTYPE)\npublic class ServiceAlphaImpl implements ServiceAlpha {\n  private final Platform platform;\n  private final ServiceBeta serviceBeta;\n\n  // some logic\n}\n\n@Service\n@Scope(ConfigurableBeanFactory.SCOPE_PROTOTYPE)\npublic class ServiceBetaImpl implements ServiceBeta {\n  private final Platform platform;\n  private final ServiceGamma serviceGamma;\n\n  // some logic\n}\n\n@Service\n@Scope(ConfigurableBeanFactory.SCOPE_PROTOTYPE)\npublic class ServiceGammaImpl implements ServiceGamma {\n  private final Platform platform;\n\n  // some logic\n}\n</code></pre>\n<p>I would be glad also to know suggestions on the restructuring of the current hierarchy.</p>\n"},{"tags":["java","processing"],"answers":[{"tags":[],"owner":{"account_id":22478656,"reputation":53,"user_id":18235324,"display_name":"NumericPrime"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664910009,"creation_date":1664910009,"answer_id":73952486,"question_id":73952485,"body_markdown":"It is actually possible! Processing has two weakpoints one can exploit!&lt;br&gt;\r\nHere is the code that works in Processing 4 &amp; 3:&lt;br&gt;\r\n```java\r\nimport processing.awt.*;\r\nimport processing.opengl.*;\r\nimport processing.core.*;\r\n\r\nimport javax.swing.*;\r\nimport java.awt.*;\r\nimport java.util.*;\r\nimport java.lang.reflect.*;\r\n\r\nimport sun.misc.*;\r\n/**This class finds the active PApplet (Processing program)\r\n @author NumericPrime*/\r\npublic class PAppletFinder {\r\n  /**Unsafe instance used*/\r\n  public static Unsafe unsafe=null;\r\n  /**Unsafe Field offset*/\r\n  public static long fieldIndex=0;\r\n  /**Target field of the thread*/\r\n  public static Field threadTargField=null;\r\n  /**Here the three Fields unsafe,fieldIndex, threadTargField are initalized*/\r\n  static {\r\n    try {\r\n      Field f2=Unsafe.class.getDeclaredField(&quot;theUnsafe&quot;);\r\n      f2.setAccessible(true);\r\n      unsafe=(Unsafe) f2.get(null);\r\n      //System.out.println(&quot;Unsafe instance: &quot;+unsafe.toString());\r\n      threadTargField=Thread.class.getDeclaredField(&quot;target&quot;);\r\n      fieldIndex=unsafe.objectFieldOffset(threadTargField);\r\n    }\r\n    catch(Exception e) {\r\n      e.printStackTrace();\r\n    }\r\n  }\r\n  /**Getter-Method used to detect all PApplets. If the detection hasn&#39;t run yet this method will run it.\r\n   @param refresh if true: redetects all PApplets\r\n   @return all detected PApplets*/\r\n  public static PApplet[] getPApplets(boolean refresh) {\r\n    int allfpSize=0;\r\n    if (refresh) allFoundPapplets.clear();\r\n    if ((allfpSize=allFoundPapplets.size())==0) findAll();\r\n    return allFoundPapplets.toArray(new PApplet[allfpSize]);\r\n  }\r\n  /**All results will be saved here*/\r\n  public static java.util.List&lt;PApplet&gt; allFoundPapplets=new LinkedList&lt;PApplet&gt;();\r\n  /**This class takes the contents of the window and pieces together the PApplet\r\n   * @return PApplet of the current sketch.\r\n   * @param c contents of the Processing window (must be a SmoothCanvas)*/\r\n  public static void get(Component c) {\r\n    //System.out.println(&quot;Processing Window content&quot;);\r\n    PSurfaceAWT.SmoothCanvas sc=(PSurfaceAWT.SmoothCanvas) c;\r\n    try {\r\n      //gets the PSurface for the PApplet\r\n      PSurfaceAWT psa=(PSurfaceAWT) get(sc, &quot;this$0&quot;, sc.getClass());\r\n      //gets the PApplet\r\n      PApplet prg=(PApplet) get((PSurfaceNone)psa, &quot;sketch&quot;, PSurfaceNone.class);\r\n      allFoundPapplets.add(prg);\r\n    }\r\n    catch(Exception e) {\r\n      //System.err.println(&quot;Something went wrong&quot;);\r\n      e.printStackTrace();\r\n    }\r\n  }\r\n  /**This method tries to detect all PApplet used*/\r\n  public static void findAll() {\r\n    findFromWindow();\r\n    fromThreads();\r\n    //System.out.println(&quot;Detection done&quot;);\r\n  }\r\n\r\n  /**This looks out for processing-windows and gives the contents of the right one to the get method*/\r\n  public static void findFromWindow() {\r\n    //System.out.println(&quot;Searching Windows for instances&quot;);\r\n    JFrame mainWindow=null;\r\n    java.awt.Window win[]=java.awt.Window.getWindows();\r\n    for (int i=0; i&lt;win.length; i++) if (win[i] instanceof JFrame) {\r\n      mainWindow=(JFrame) win[i];\r\n      Component c=mainWindow.getContentPane().getComponents()[0];\r\n      if (c instanceof PSurfaceAWT.SmoothCanvas) get(c);\r\n    }\r\n  }\r\n  /**This is used to get the value of fields\r\n   * @return Object value of a field\r\n   * @param j the Object from which the value is taken\r\n   * @param target name of the field\r\n   * @param ref class the field is taken from*/\r\n  public static Object get(Object j, String target, Class&lt;?&gt; ref) {\r\n    try {\r\n      Field f=ref.getDeclaredField(target);\r\n      f.setAccessible(true);\r\n      return f.get(j);\r\n    } \r\n    catch (Exception e) {\r\n      e.printStackTrace();\r\n    } \r\n    return null;\r\n  }\r\n  /** When using P2D or P3D everything is built differently however there is a weakness to be found in \r\n    * PSurfaceJOGL as it dispatches a Thread using an annonymous inner class as Runnable*/\r\n  public static void fromThreads() {\r\n    //System.out.println(&quot;Searching Threads for instances&quot;);\r\n    //This fetches all threads\r\n    Set&lt;Thread&gt; threadSet=Thread.getAllStackTraces().keySet();\r\n    //It iterates upon the threads to find ones dispatched by PSurfaceJOGL\r\n    for (Thread th : threadSet) {\r\n    iteration:\r\n      {\r\n        try {\r\n          //Field f=th.getClass().getDeclaredField(&quot;target&quot;);\r\n          //f.setAccessible(true);\r\n          Object currinstance=null;\r\n          \r\n          //Here Unsafe is used to breach encapsulation of java.lang\r\n          currinstance=unsafe.getObject(th, fieldIndex);\r\n          if (!currinstance.getClass().toString().contains(&quot;PSurfaceJOGL$&quot;)) break iteration;\r\n          //System.out.println(&quot;Weak spot found! &quot;+th.getName());\r\n          //gets the PSurfaceJOGL\r\n          currinstance=getEnclosingInstance(currinstance);\r\n          //gets the PApplet\r\n          Field f=PSurfaceJOGL.class.getDeclaredField(&quot;sketch&quot;);\r\n          f.setAccessible(true);\r\n          allFoundPapplets.add((PApplet) (currinstance=f.get(currinstance)));\r\n          //System.out.println(&quot;Detection successful&quot;);\r\n        }\r\n        catch(Exception e) \r\n        {\r\n        catchBlock:\r\n          {\r\n            if (e instanceof NoSuchFieldException||e instanceof NullPointerException) {\r\n              //System.err.println(&quot;target not found &quot;+th.getName());\r\n              //A NullPointerException may occur\r\n              break catchBlock;\r\n            }\r\n            //System.err.println(&quot;Something went wrong!&quot;);\r\n            e.printStackTrace();\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n  //This will try to get the enclosing instance of an object (this can also be a lambda)\r\n  public static Object getEnclosingInstance(Object o) {\r\n    //This code will work for Processing 3 (uses annonymous inner classes)\r\n    try {\r\n      Class&lt;?&gt; classused=o.getClass();\r\n      Field this0=classused.getDeclaredField(&quot;this$0&quot;);\r\n      this0.setAccessible(true);\r\n      return this0.get(o);\r\n    }\r\n    catch(Exception e) {\r\n      //System.err.println(&quot;Can&#39;t find enclosing instance of Object, trying to use Lambdas... (To be expected with Processing 4)&quot;);\r\n    }\r\n    //This code should work for Processing 4 (lambdas are used instead of inner classes, Lambdas use arg$1 instead this$0) \r\n    try {\r\n      Class&lt;?&gt; classused=o.getClass();\r\n      Field this0=classused.getDeclaredField(&quot;arg$1&quot;);\r\n      this0.setAccessible(true);\r\n      return this0.get(o);\r\n    }\r\n    catch(Exception e) {\r\n      //System.err.println(&quot;Detection Failed!&quot;);\r\n    }\r\n    return null;\r\n  }\r\n}\r\n```\r\n\r\nWhy does this code work?&lt;br&gt;\r\nAs mentioned Processing 3 and 4 share two weakpoints. The first is exclusive to JAVA2D and the second exclusive to P2D and P3D:&lt;br&gt;\r\nThe JAVA2D weakpoint:&lt;br&gt;\r\nThere is a method in java.awt.Window that fetches all active instances of every subclass of itself: `java.awt.Window.getWindows();`&lt;br&gt;\r\nThis includes JFrames wich are used by Processing. In fact Processing uses a custom Component of the class PSurfaceAWT.SmoothCanvas that paints all the things done in Processing. From that point one only has to retrieve the enclosing instance and get it&#39;s sketch field.&lt;br&gt;&lt;br&gt;\r\nWeakpoint for P2D and P3D&lt;br&gt;\r\nThe second Weakpoint lies in PSurfaceJOGL https://github.com/processing/processing4/blob/main/core/src/processing/opengl/PSurfaceJOGL.java#L399-L417\r\nAt this point a thread is dispatched using a Runnable implemented via lambda. At line 405 this lambda uses drawException a field of PSurfaceJOGL. In doing so the lambda will hold a reference to its enclosing instance one can access.&lt;br&gt;\r\nBut how can we access the Runnable in the first place?&lt;br&gt;\r\nIn Java versions below 17 one just could use reflection to do that. However since Java 17 java.lang is encapsulated and Processing doesn&#39;t allow adding custom command-line args to open java.lang up!&lt;br&gt;\r\nThe answer to this problem is sun.misc.Unsafe&lt;br&gt;\r\nThis class doesn&#39;t care for encapsulation and can help get the field value.&lt;br&gt;\r\nThis does have on ugly side effect though: Using any SecurityManager will blow this class up!&lt;br&gt;\r\nLuckily Processing doesn&#39;t have a SecurityManager by default so I can use Unsafe to get the target field from java.lang.Thread. From there I need to grab its enclosing instance and can fetch the sketch field from there!\r\n\r\nIf it&#39;s requested I can post much simpler code (not using Unsafe) (but only works for Processing 3).","title":"Getting the current instance of the PApplet in Processing","body":"<p>It is actually possible! Processing has two weakpoints one can exploit!<br>\nHere is the code that works in Processing 4 &amp; 3:<br></p>\n<pre class=\"lang-java prettyprint-override\"><code>import processing.awt.*;\nimport processing.opengl.*;\nimport processing.core.*;\n\nimport javax.swing.*;\nimport java.awt.*;\nimport java.util.*;\nimport java.lang.reflect.*;\n\nimport sun.misc.*;\n/**This class finds the active PApplet (Processing program)\n @author NumericPrime*/\npublic class PAppletFinder {\n  /**Unsafe instance used*/\n  public static Unsafe unsafe=null;\n  /**Unsafe Field offset*/\n  public static long fieldIndex=0;\n  /**Target field of the thread*/\n  public static Field threadTargField=null;\n  /**Here the three Fields unsafe,fieldIndex, threadTargField are initalized*/\n  static {\n    try {\n      Field f2=Unsafe.class.getDeclaredField(&quot;theUnsafe&quot;);\n      f2.setAccessible(true);\n      unsafe=(Unsafe) f2.get(null);\n      //System.out.println(&quot;Unsafe instance: &quot;+unsafe.toString());\n      threadTargField=Thread.class.getDeclaredField(&quot;target&quot;);\n      fieldIndex=unsafe.objectFieldOffset(threadTargField);\n    }\n    catch(Exception e) {\n      e.printStackTrace();\n    }\n  }\n  /**Getter-Method used to detect all PApplets. If the detection hasn't run yet this method will run it.\n   @param refresh if true: redetects all PApplets\n   @return all detected PApplets*/\n  public static PApplet[] getPApplets(boolean refresh) {\n    int allfpSize=0;\n    if (refresh) allFoundPapplets.clear();\n    if ((allfpSize=allFoundPapplets.size())==0) findAll();\n    return allFoundPapplets.toArray(new PApplet[allfpSize]);\n  }\n  /**All results will be saved here*/\n  public static java.util.List&lt;PApplet&gt; allFoundPapplets=new LinkedList&lt;PApplet&gt;();\n  /**This class takes the contents of the window and pieces together the PApplet\n   * @return PApplet of the current sketch.\n   * @param c contents of the Processing window (must be a SmoothCanvas)*/\n  public static void get(Component c) {\n    //System.out.println(&quot;Processing Window content&quot;);\n    PSurfaceAWT.SmoothCanvas sc=(PSurfaceAWT.SmoothCanvas) c;\n    try {\n      //gets the PSurface for the PApplet\n      PSurfaceAWT psa=(PSurfaceAWT) get(sc, &quot;this$0&quot;, sc.getClass());\n      //gets the PApplet\n      PApplet prg=(PApplet) get((PSurfaceNone)psa, &quot;sketch&quot;, PSurfaceNone.class);\n      allFoundPapplets.add(prg);\n    }\n    catch(Exception e) {\n      //System.err.println(&quot;Something went wrong&quot;);\n      e.printStackTrace();\n    }\n  }\n  /**This method tries to detect all PApplet used*/\n  public static void findAll() {\n    findFromWindow();\n    fromThreads();\n    //System.out.println(&quot;Detection done&quot;);\n  }\n\n  /**This looks out for processing-windows and gives the contents of the right one to the get method*/\n  public static void findFromWindow() {\n    //System.out.println(&quot;Searching Windows for instances&quot;);\n    JFrame mainWindow=null;\n    java.awt.Window win[]=java.awt.Window.getWindows();\n    for (int i=0; i&lt;win.length; i++) if (win[i] instanceof JFrame) {\n      mainWindow=(JFrame) win[i];\n      Component c=mainWindow.getContentPane().getComponents()[0];\n      if (c instanceof PSurfaceAWT.SmoothCanvas) get(c);\n    }\n  }\n  /**This is used to get the value of fields\n   * @return Object value of a field\n   * @param j the Object from which the value is taken\n   * @param target name of the field\n   * @param ref class the field is taken from*/\n  public static Object get(Object j, String target, Class&lt;?&gt; ref) {\n    try {\n      Field f=ref.getDeclaredField(target);\n      f.setAccessible(true);\n      return f.get(j);\n    } \n    catch (Exception e) {\n      e.printStackTrace();\n    } \n    return null;\n  }\n  /** When using P2D or P3D everything is built differently however there is a weakness to be found in \n    * PSurfaceJOGL as it dispatches a Thread using an annonymous inner class as Runnable*/\n  public static void fromThreads() {\n    //System.out.println(&quot;Searching Threads for instances&quot;);\n    //This fetches all threads\n    Set&lt;Thread&gt; threadSet=Thread.getAllStackTraces().keySet();\n    //It iterates upon the threads to find ones dispatched by PSurfaceJOGL\n    for (Thread th : threadSet) {\n    iteration:\n      {\n        try {\n          //Field f=th.getClass().getDeclaredField(&quot;target&quot;);\n          //f.setAccessible(true);\n          Object currinstance=null;\n          \n          //Here Unsafe is used to breach encapsulation of java.lang\n          currinstance=unsafe.getObject(th, fieldIndex);\n          if (!currinstance.getClass().toString().contains(&quot;PSurfaceJOGL$&quot;)) break iteration;\n          //System.out.println(&quot;Weak spot found! &quot;+th.getName());\n          //gets the PSurfaceJOGL\n          currinstance=getEnclosingInstance(currinstance);\n          //gets the PApplet\n          Field f=PSurfaceJOGL.class.getDeclaredField(&quot;sketch&quot;);\n          f.setAccessible(true);\n          allFoundPapplets.add((PApplet) (currinstance=f.get(currinstance)));\n          //System.out.println(&quot;Detection successful&quot;);\n        }\n        catch(Exception e) \n        {\n        catchBlock:\n          {\n            if (e instanceof NoSuchFieldException||e instanceof NullPointerException) {\n              //System.err.println(&quot;target not found &quot;+th.getName());\n              //A NullPointerException may occur\n              break catchBlock;\n            }\n            //System.err.println(&quot;Something went wrong!&quot;);\n            e.printStackTrace();\n          }\n        }\n      }\n    }\n  }\n  //This will try to get the enclosing instance of an object (this can also be a lambda)\n  public static Object getEnclosingInstance(Object o) {\n    //This code will work for Processing 3 (uses annonymous inner classes)\n    try {\n      Class&lt;?&gt; classused=o.getClass();\n      Field this0=classused.getDeclaredField(&quot;this$0&quot;);\n      this0.setAccessible(true);\n      return this0.get(o);\n    }\n    catch(Exception e) {\n      //System.err.println(&quot;Can't find enclosing instance of Object, trying to use Lambdas... (To be expected with Processing 4)&quot;);\n    }\n    //This code should work for Processing 4 (lambdas are used instead of inner classes, Lambdas use arg$1 instead this$0) \n    try {\n      Class&lt;?&gt; classused=o.getClass();\n      Field this0=classused.getDeclaredField(&quot;arg$1&quot;);\n      this0.setAccessible(true);\n      return this0.get(o);\n    }\n    catch(Exception e) {\n      //System.err.println(&quot;Detection Failed!&quot;);\n    }\n    return null;\n  }\n}\n</code></pre>\n<p>Why does this code work?<br>\nAs mentioned Processing 3 and 4 share two weakpoints. The first is exclusive to JAVA2D and the second exclusive to P2D and P3D:<br>\nThe JAVA2D weakpoint:<br>\nThere is a method in java.awt.Window that fetches all active instances of every subclass of itself: <code>java.awt.Window.getWindows();</code><br>\nThis includes JFrames wich are used by Processing. In fact Processing uses a custom Component of the class PSurfaceAWT.SmoothCanvas that paints all the things done in Processing. From that point one only has to retrieve the enclosing instance and get it's sketch field.<br><br>\nWeakpoint for P2D and P3D<br>\nThe second Weakpoint lies in PSurfaceJOGL <a href=\"https://github.com/processing/processing4/blob/main/core/src/processing/opengl/PSurfaceJOGL.java#L399-L417\" rel=\"nofollow noreferrer\">https://github.com/processing/processing4/blob/main/core/src/processing/opengl/PSurfaceJOGL.java#L399-L417</a>\nAt this point a thread is dispatched using a Runnable implemented via lambda. At line 405 this lambda uses drawException a field of PSurfaceJOGL. In doing so the lambda will hold a reference to its enclosing instance one can access.<br>\nBut how can we access the Runnable in the first place?<br>\nIn Java versions below 17 one just could use reflection to do that. However since Java 17 java.lang is encapsulated and Processing doesn't allow adding custom command-line args to open java.lang up!<br>\nThe answer to this problem is sun.misc.Unsafe<br>\nThis class doesn't care for encapsulation and can help get the field value.<br>\nThis does have on ugly side effect though: Using any SecurityManager will blow this class up!<br>\nLuckily Processing doesn't have a SecurityManager by default so I can use Unsafe to get the target field from java.lang.Thread. From there I need to grab its enclosing instance and can fetch the sketch field from there!</p>\n<p>If it's requested I can post much simpler code (not using Unsafe) (but only works for Processing 3).</p>\n"}],"owner":{"account_id":22478656,"reputation":53,"user_id":18235324,"display_name":"NumericPrime"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":225,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1664910009,"creation_date":1664910009,"question_id":73952485,"body_markdown":"A lot of Processing libraries need the user to pass a PApplet object for the libraries class to operate on.&lt;br&gt;\r\nThe question is: Is it possible to create a static method `PAppletFinder.find()` to fetch the all PApplet instances?&lt;br&gt;\r\n(Link to the thread in the Processing Forum: https://discourse.processing.org/t/get-the-current-instance-of-papplet-from-a-library/36925/28)","title":"Getting the current instance of the PApplet in Processing","body":"<p>A lot of Processing libraries need the user to pass a PApplet object for the libraries class to operate on.<br>\nThe question is: Is it possible to create a static method <code>PAppletFinder.find()</code> to fetch the all PApplet instances?<br>\n(Link to the thread in the Processing Forum: <a href=\"https://discourse.processing.org/t/get-the-current-instance-of-papplet-from-a-library/36925/28\" rel=\"nofollow noreferrer\">https://discourse.processing.org/t/get-the-current-instance-of-papplet-from-a-library/36925/28</a>)</p>\n"},{"tags":["java","rest","jackson","resteasy"],"comments":[{"owner":{"account_id":7820084,"reputation":251,"user_id":5913490,"accept_rate":60,"display_name":"Sagar Kadu"},"score":0,"creation_date":1578390473,"post_id":59625400,"comment_id":105413922,"body_markdown":"you should validate request before hitting the database..Also have `NOT NULL` constraints on columns as well which will not allow null or empty values..This would make sure only valid requests can go through.","body":"you should validate request before hitting the database..Also have <code>NOT NULL</code> constraints on columns as well which will not allow null or empty values..This would make sure only valid requests can go through."},{"owner":{"account_id":450916,"reputation":1435,"user_id":846507,"accept_rate":64,"display_name":"Hauke"},"score":0,"creation_date":1578392593,"post_id":59625400,"comment_id":105415056,"body_markdown":"I am not quite sure if I wrote the question correct. I added an example below","body":"I am not quite sure if I wrote the question correct. I added an example below"}],"answers":[{"tags":[],"owner":{"account_id":461547,"reputation":3094,"user_id":863311,"accept_rate":62,"display_name":"Simon"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1578390355,"creation_date":1578390355,"answer_id":59625838,"question_id":59625400,"body_markdown":"A common technique is to track changes on the entity POJO.\r\n\r\n 1. Load Dog with `color` = black, `size` = null and `age` = null\r\n 2. Set `size` to null (the setter will mark this field as changed)\r\n 3. Run update SQL\r\n\r\nThe POJO will have an internal state knowning that `size` was changed, and thus include that field in the UPDATE. `age`, on the other hand, was never set, and is thus left unchanged. jOOQ works like that, I&#39;m sure there&#39;s others.","title":"REST API for updating informations with empty or null values","body":"<p>A common technique is to track changes on the entity POJO.</p>\n\n<ol>\n<li>Load Dog with <code>color</code> = black, <code>size</code> = null and <code>age</code> = null</li>\n<li>Set <code>size</code> to null (the setter will mark this field as changed)</li>\n<li>Run update SQL</li>\n</ol>\n\n<p>The POJO will have an internal state knowning that <code>size</code> was changed, and thus include that field in the UPDATE. <code>age</code>, on the other hand, was never set, and is thus left unchanged. jOOQ works like that, I'm sure there's others.</p>\n"},{"tags":[],"owner":{"account_id":7820084,"reputation":251,"user_id":5913490,"accept_rate":60,"display_name":"Sagar Kadu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1578396190,"creation_date":1578396190,"answer_id":59627457,"question_id":59625400,"body_markdown":"You can control empty or null values as below\r\n\r\n    public class Person{\r\n    \r\n        @JsonInclude(JsonInclude.Include.NON_NULL) \r\n        private BigDecimal salary;  // this will make sure salary can&#39;t be null or empty//\r\n        \r\n        private String phone;   //allow phone Number to be empty\r\n        // same logic for other fields\r\n    }\r\n\r\ni) As you&#39;re updating weight and removing the phone number,Ask client to send fields which needs to updated along with record identifier i.e id in this case\r\n\r\n    {\r\n       &quot;id&quot; : 2,\r\n       &quot;weight&quot; :78,\r\n       &quot;phone&quot; : null  \r\n    }\r\n\r\nii) As you&#39;re adding salary as one more column which is mandatory field &amp; client should be aware of it..may be you have to redesign contract\r\n\r\n","title":"REST API for updating informations with empty or null values","body":"<p>You can control empty or null values as below</p>\n\n<pre><code>public class Person{\n\n    @JsonInclude(JsonInclude.Include.NON_NULL) \n    private BigDecimal salary;  // this will make sure salary can't be null or empty//\n\n    private String phone;   //allow phone Number to be empty\n    // same logic for other fields\n}\n</code></pre>\n\n<p>i) As you're updating weight and removing the phone number,Ask client to send fields which needs to updated along with record identifier i.e id in this case</p>\n\n<pre><code>{\n   \"id\" : 2,\n   \"weight\" :78,\n   \"phone\" : null  \n}\n</code></pre>\n\n<p>ii) As you're adding salary as one more column which is mandatory field &amp; client should be aware of it..may be you have to redesign contract</p>\n"},{"tags":[],"owner":{"account_id":3262328,"reputation":2135,"user_id":2747642,"display_name":"Sree Kumar"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1578399438,"creation_date":1578399438,"answer_id":59628283,"question_id":59625400,"body_markdown":"&gt; 1. Only what should be updated is sent. Problem: How can you explicitly empty / delete a field? If a &quot;NULL&quot; is passed in the JSON, we get NULL in the object, but any other field that is not passed is NULL as well. Therefore we cannot distinguish which field can be deleted and which field cannot be touched.\r\n\r\nThe problem you have identified is genuine; I have faced this too. I think it is reasonable to **not** provide a technical solution for this, but rather document the API usage to let the caller know the impact of leaving out a field or sending it as ```null```. Of course, assuming that the validations on the server side are tight and ensure sanity.\r\n\r\n&gt; 2. The complete object is sent. Problem: Here the object could be fetched via a GET before, changed accordingly and returned via PUT. Now we get all information back and could write the information directly back into the database. Because empty fields were either already empty before or were cleared by the user.\r\n\r\nThis is &quot;straighter-forward&quot; and should be documented in the API.\r\n\r\n&gt; What happens if the objects are extended by an update of the API. \r\n\r\nWith the onus put on the caller through the documentation, this too is handled implicitly.\r\n\r\n&gt; Or do you have to create a separate endpoint for each field?\r\n\r\nThis, again, is a design issue, the solution to which varies from person-to-person. I would rather retain the API at a record level than at the level of individual value. However, there may be cases where they are needed to be that way. Eg, status updates.","title":"REST API for updating informations with empty or null values","body":"<blockquote>\n  <ol>\n  <li>Only what should be updated is sent. Problem: How can you explicitly empty / delete a field? If a \"NULL\" is passed in the JSON, we get NULL in the object, but any other field that is not passed is NULL as well. Therefore we cannot distinguish which field can be deleted and which field cannot be touched.</li>\n  </ol>\n</blockquote>\n\n<p>The problem you have identified is genuine; I have faced this too. I think it is reasonable to <strong>not</strong> provide a technical solution for this, but rather document the API usage to let the caller know the impact of leaving out a field or sending it as <code>null</code>. Of course, assuming that the validations on the server side are tight and ensure sanity.</p>\n\n<blockquote>\n  <ol start=\"2\">\n  <li>The complete object is sent. Problem: Here the object could be fetched via a GET before, changed accordingly and returned via PUT. Now we get all information back and could write the information directly back into the database. Because empty fields were either already empty before or were cleared by the user.</li>\n  </ol>\n</blockquote>\n\n<p>This is \"straighter-forward\" and should be documented in the API.</p>\n\n<blockquote>\n  <p>What happens if the objects are extended by an update of the API. </p>\n</blockquote>\n\n<p>With the onus put on the caller through the documentation, this too is handled implicitly.</p>\n\n<blockquote>\n  <p>Or do you have to create a separate endpoint for each field?</p>\n</blockquote>\n\n<p>This, again, is a design issue, the solution to which varies from person-to-person. I would rather retain the API at a record level than at the level of individual value. However, there may be cases where they are needed to be that way. Eg, status updates.</p>\n"},{"tags":[],"owner":{"account_id":22259,"reputation":53853,"user_id":54734,"accept_rate":29,"display_name":"VoiceOfUnreason"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1578402650,"creation_date":1578402283,"answer_id":59629014,"question_id":59625400,"body_markdown":"&gt; Suppose we extend the database by five more fields. The user of the API makes a GET, gets the 15 fields, but can only read the 10 fields he knows on his page (because he hasn&#39;t updated his side yet). Then he changes some of the 10 fields and sends them back via PUT. We would then update only the 10 fields on our site and the 5 new fields would be emptied from the database.\r\n\r\nSo let&#39;s start with an example - what would happen on the web, where clients are interacting with your API via HTML rendered in browsers.  The client would GET a form, and that form would have input controls for each of the fields.  Client updates the fields in the form, submits it, and you apply those changes to your database.\r\n\r\nWhen you want to extend the API to include more fields, you add those fields to the form.  The client doesn&#39;t know about those fields.  So what happens?\r\n\r\nOne way to manage this is that you make sure that you include in the form the correct default values for the new fields; then, if the client ignores the new fields, the correct value will be returned when the form is submitted.\r\n\r\nMore generally, the representations we exchange in our HTTP payloads are _messages_; if we want to support old clients, then we need the discipline of evolving the message schema in a backwards compatible way, and our clients have to be written with the understanding that the message schema may be extended with additional fields.\r\n\r\n&gt; The person using the API does not know that there is a new field in JSON for the salary. \r\n\r\nThe same idea holds here - the new representation includes a field &quot;salary&quot; that the client doesn&#39;t know about, so it is the responsibility of the client to forward that data back to you _unchanged_, rather than just dropping it on the floor assuming it is unimportant.\r\n\r\n\r\nThere&#39;s a bunch of prior art on this from 15-20 years ago, because people writing messages in XML were facing exactly the same sort of problems.  They have left some of their knowledge behind.  The easiest way to find it is to search for some key phases; for instance `must ignore` or `must forward`.\r\n\r\nSee:\r\n\r\n* [Versioning XML Vocabularies][1]\r\n* [Extensibility, XML Vocabularies, and XML Schema][2]\r\n\r\nEvents in an event store have the same kinds of problems.  [Greg Young][3]&#39;s book [Versioning in an Event Sourced System][4] covers a lot of the same ground (representations of events are also messages).\r\n\r\n\r\n  [1]: https://www.xml.com/pub/a/2003/12/03/versioning.html\r\n  [2]: https://www.xml.com/pub/a/2004/10/27/extend.html\r\n  [3]: https://eventstore.org/\r\n  [4]: https://leanpub.com/esversioning","title":"REST API for updating informations with empty or null values","body":"<blockquote>\n  <p>Suppose we extend the database by five more fields. The user of the API makes a GET, gets the 15 fields, but can only read the 10 fields he knows on his page (because he hasn't updated his side yet). Then he changes some of the 10 fields and sends them back via PUT. We would then update only the 10 fields on our site and the 5 new fields would be emptied from the database.</p>\n</blockquote>\n\n<p>So let's start with an example - what would happen on the web, where clients are interacting with your API via HTML rendered in browsers.  The client would GET a form, and that form would have input controls for each of the fields.  Client updates the fields in the form, submits it, and you apply those changes to your database.</p>\n\n<p>When you want to extend the API to include more fields, you add those fields to the form.  The client doesn't know about those fields.  So what happens?</p>\n\n<p>One way to manage this is that you make sure that you include in the form the correct default values for the new fields; then, if the client ignores the new fields, the correct value will be returned when the form is submitted.</p>\n\n<p>More generally, the representations we exchange in our HTTP payloads are <em>messages</em>; if we want to support old clients, then we need the discipline of evolving the message schema in a backwards compatible way, and our clients have to be written with the understanding that the message schema may be extended with additional fields.</p>\n\n<blockquote>\n  <p>The person using the API does not know that there is a new field in JSON for the salary. </p>\n</blockquote>\n\n<p>The same idea holds here - the new representation includes a field \"salary\" that the client doesn't know about, so it is the responsibility of the client to forward that data back to you <em>unchanged</em>, rather than just dropping it on the floor assuming it is unimportant.</p>\n\n<p>There's a bunch of prior art on this from 15-20 years ago, because people writing messages in XML were facing exactly the same sort of problems.  They have left some of their knowledge behind.  The easiest way to find it is to search for some key phases; for instance <code>must ignore</code> or <code>must forward</code>.</p>\n\n<p>See:</p>\n\n<ul>\n<li><a href=\"https://www.xml.com/pub/a/2003/12/03/versioning.html\" rel=\"nofollow noreferrer\">Versioning XML Vocabularies</a></li>\n<li><a href=\"https://www.xml.com/pub/a/2004/10/27/extend.html\" rel=\"nofollow noreferrer\">Extensibility, XML Vocabularies, and XML Schema</a></li>\n</ul>\n\n<p>Events in an event store have the same kinds of problems.  <a href=\"https://eventstore.org/\" rel=\"nofollow noreferrer\">Greg Young</a>'s book <a href=\"https://leanpub.com/esversioning\" rel=\"nofollow noreferrer\">Versioning in an Event Sourced System</a> covers a lot of the same ground (representations of events are also messages).</p>\n"},{"tags":[],"owner":{"account_id":15051661,"reputation":100,"user_id":10863209,"display_name":"C. Schmidt"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1578407960,"creation_date":1578407960,"answer_id":59630596,"question_id":59625400,"body_markdown":"You could deserialize your JSON to a Map&lt;String, Object&gt;. \r\nThis way, if a property has not been sent, the property is not present in the Map. If its null, its inside the map will a null value. \r\n\r\n\r\n      ObjectMapper mapper = new ObjectMapper();\r\n      TypeReference&lt;HashMap&lt;String, Object&gt;&gt; typeReference = new TypeReference&lt;&gt;() {};\r\n      HashMap&lt;String, Object&gt; jsonMap = mapper.readValue(json, typeReference);\r\n      jsonMap.entrySet().stream().map(Map.Entry::getKey).forEach(System.out::println);\r\n\r\nNot a very convenient solution, but it might work for you. \r\n","title":"REST API for updating informations with empty or null values","body":"<p>You could deserialize your JSON to a Map. \nThis way, if a property has not been sent, the property is not present in the Map. If its null, its inside the map will a null value. </p>\n\n<pre><code>  ObjectMapper mapper = new ObjectMapper();\n  TypeReference&lt;HashMap&lt;String, Object&gt;&gt; typeReference = new TypeReference&lt;&gt;() {};\n  HashMap&lt;String, Object&gt; jsonMap = mapper.readValue(json, typeReference);\n  jsonMap.entrySet().stream().map(Map.Entry::getKey).forEach(System.out::println);\n</code></pre>\n\n<p>Not a very convenient solution, but it might work for you. </p>\n"},{"tags":[],"owner":{"account_id":8104679,"reputation":1650,"user_id":6106641,"accept_rate":80,"display_name":"Archmede"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1664909138,"creation_date":1624037399,"answer_id":68039313,"question_id":59625400,"body_markdown":"The accepted answer works well but it has a huge caveat which is that it&#39;s completely untyped. If the object&#39;s fields change then you&#39;ll have no compile time warning that you&#39;re looking for the wrong fields.\r\n\r\nTherefore I would argue that it&#39;s better to force all fields to be present in the request body. Therefore a `null` means the user explicitly set it to `null` while if the user misses a field they&#39;ll receive a `400 Bad Request` with the request body describing the error in detail.\r\n\r\nHere&#39;s a great post on how to achieve this: https://stackoverflow.com/questions/28355891/configure-jackson-to-throw-an-exception-when-a-field-is-missing\r\n\r\nHere&#39;s my example in Kotlin:\r\n\r\n    data class PlacementRequestDto(\r\n        val contentId: Int,\r\n        @param:JsonProperty(required = true)\r\n        val tlxPlacementId: Int?,\r\n        val keywords: List&lt;Int&gt;,\r\n        val placementAdFormats: List&lt;Int&gt;\r\n    )\r\n\r\nNotice that the nullable field is marked as required. This way the user has to explicitly include it in the request body.\r\n","title":"REST API for updating informations with empty or null values","body":"<p>The accepted answer works well but it has a huge caveat which is that it's completely untyped. If the object's fields change then you'll have no compile time warning that you're looking for the wrong fields.</p>\n<p>Therefore I would argue that it's better to force all fields to be present in the request body. Therefore a <code>null</code> means the user explicitly set it to <code>null</code> while if the user misses a field they'll receive a <code>400 Bad Request</code> with the request body describing the error in detail.</p>\n<p>Here's a great post on how to achieve this: <a href=\"https://stackoverflow.com/questions/28355891/configure-jackson-to-throw-an-exception-when-a-field-is-missing\">Configure Jackson to throw an exception when a field is missing</a></p>\n<p>Here's my example in Kotlin:</p>\n<pre><code>data class PlacementRequestDto(\n    val contentId: Int,\n    @param:JsonProperty(required = true)\n    val tlxPlacementId: Int?,\n    val keywords: List&lt;Int&gt;,\n    val placementAdFormats: List&lt;Int&gt;\n)\n</code></pre>\n<p>Notice that the nullable field is marked as required. This way the user has to explicitly include it in the request body.</p>\n"}],"owner":{"account_id":450916,"reputation":1435,"user_id":846507,"accept_rate":64,"display_name":"Hauke"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":24110,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"accepted_answer_id":59630596,"answer_count":6,"score":8,"last_activity_date":1664909138,"creation_date":1578388792,"question_id":59625400,"body_markdown":"I have a general question about how best to build an API that can modify records in a database.\r\n\r\nSuppose we have a table with 10 columns and we can query these 10 columns using REST (GET). The JSON response will contain all 10 fields. This is easy and works without problems.\r\n\r\nThe next step is that someone wants to create a new record via POST. In this case the person sends only 8 of the 10 fields in the JSON Request. We would then only fill the 8 fields in the database (the rest would be NULL). This also works without problems.\r\n\r\nBut what happens if someone wants to update a record? We see here different possibilities with advantages and disadvantages. \r\n\r\n1. Only what should be updated is sent.\r\nProblem: How can you explicitly empty / delete a field? If a &quot;NULL&quot; is passed in the JSON, we get NULL in the object, but any other field that is not passed is NULL as well. Therefore we cannot distinguish which field can be deleted and which field cannot be touched.\r\n\r\n2. The complete object is sent.\r\nProblem: Here the object could be fetched via a GET before, changed accordingly and returned via PUT. Now we get all information back and could write the information directly back into the database. Because empty fields were either already empty before or were cleared by the user. \r\n\r\nWhat happens if the objects are extended by an update of the API. Suppose we extend the database by five more fields. The user of the API makes a GET, gets the 15 fields, but can only read the 10 fields he knows on his page (because he hasn&#39;t updated his side yet). Then he changes some of the 10 fields and sends them back via PUT. We would then update only the 10 fields on our site and the 5 new fields would be emptied from the database.\r\n\r\nOr do you have to create a separate endpoint for each field? We have also thought about creating a map with key / value, what exactly should be changed.\r\n\r\nAbout the technique: We use the `Wildfly 15 with Resteasy and Jackson`.\r\n\r\n\r\n**For example:**\r\n\r\nDatabase at the beginning\r\n\r\n    +----+----------+---------------+-----+--------+-------+\r\n    | ID | Name     | Country       | Age | Weight | Phone |\r\n    +----+----------+---------------+-----+--------+-------+\r\n    | 1  | Person 1 | Germany       | 22  | 60     | 12345 |\r\n    | 2  | Person 2 | United States | 32  | 78     | 56789 |\r\n    | 3  | Person 3 | Canada        | 52  | 102    | 99999 |\r\n    +----+----------+---------------+-----+--------+-------+\r\n\r\nGET .../person/2\r\n\r\n    {\r\n       &quot;id&quot; : 2,\r\n       &quot;name&quot; : &quot;Person 2&quot;,\r\n       &quot;country&quot; : &quot;United States&quot;,\r\n       &quot;age&quot; : 22,\r\n       &quot;weight&quot; :62,\r\n       &quot;phone&quot;: &quot;56789&quot;\r\n    }\r\n\r\n\r\nNow I want to update his weight and remove the phone number\r\n\r\n\r\nPUT .../person/2\r\n\r\n    {\r\n       &quot;id&quot; : 2,\r\n       &quot;name&quot; : &quot;Person 2&quot;,\r\n       &quot;country&quot; : &quot;United States&quot;,\r\n       &quot;age&quot; : 22,\r\n       &quot;weight&quot; :78\r\n    }\r\n\r\nor\r\n\r\n    {\r\n       &quot;id&quot; : 2,\r\n       &quot;name&quot; : &quot;Person 2&quot;,\r\n       &quot;country&quot; : &quot;United States&quot;,\r\n       &quot;age&quot; : 22,\r\n       &quot;weight&quot; :78,\r\n       &quot;phone&quot; : null\r\n    }\r\n\r\nNow the database should look like this:\r\n\r\n    +----+----------+---------------+-----+--------+-------+\r\n    | ID | Name     | Country       | Age | Weight | Phone |\r\n    +----+----------+---------------+-----+--------+-------+\r\n    | 1  | Person 1 | Germany       | 22  | 60     | 12345 |\r\n    | 2  | Person 2 | United States | 32  | 78     | NULL  |\r\n    | 3  | Person 3 | Canada        | 52  | 102    | 99999 |\r\n    +----+----------+---------------+-----+--------+-------+\r\n\r\n**The problem is**\r\n\r\nWe extend the table like this (salery)\r\n\r\n    +----+----------+---------------+-----+--------+--------+-------+\r\n    | ID | Name     | Country       | Age | Weight | Salery | Phone |\r\n    +----+----------+---------------+-----+--------+--------+-------+\r\n    | 1  | Person 1 | Germany       | 22  | 60     | 1929   | 12345 |\r\n    | 2  | Person 2 | United States | 32  | 78     | 2831   | NULL  |\r\n    | 3  | Person 3 | Canada        | 52  | 102    | 3921   | 99999 |\r\n    +----+----------+---------------+-----+--------+--------+-------+\r\n\r\nThe person using the API does not know that there is a new field in JSON for the salary. And this person now wants to change the phone number of someone again, but does not send the salary. This would also empty the salary:\r\n\r\n    {\r\n       &quot;id&quot; : 3,\r\n       &quot;name&quot; : &quot;Person 3&quot;,\r\n       &quot;country&quot; : &quot;Cananda&quot;,\r\n       &quot;age&quot; : 52,\r\n       &quot;weight&quot; :102,\r\n       &quot;phone&quot; : null\r\n    }\r\n\r\n\r\n    +----+----------+---------------+-----+--------+--------+-------+\r\n    | ID | Name     | Country       | Age | Weight | Salery | Phone |\r\n    +----+----------+---------------+-----+--------+--------+-------+\r\n    | 1  | Person 1 | Germany       | 22  | 60     | 1929   | 12345 |\r\n    | 2  | Person 2 | United States | 32  | 78     | 2831   | NULL  |\r\n    | 3  | Person 3 | Canada        | 52  | 102    | NULL   | NULL  |\r\n    +----+----------+---------------+-----+--------+--------+-------+\r\n\r\nAnd salary should not be null, because it was not set inside the JSON request","title":"REST API for updating informations with empty or null values","body":"<p>I have a general question about how best to build an API that can modify records in a database.</p>\n\n<p>Suppose we have a table with 10 columns and we can query these 10 columns using REST (GET). The JSON response will contain all 10 fields. This is easy and works without problems.</p>\n\n<p>The next step is that someone wants to create a new record via POST. In this case the person sends only 8 of the 10 fields in the JSON Request. We would then only fill the 8 fields in the database (the rest would be NULL). This also works without problems.</p>\n\n<p>But what happens if someone wants to update a record? We see here different possibilities with advantages and disadvantages. </p>\n\n<ol>\n<li><p>Only what should be updated is sent.\nProblem: How can you explicitly empty / delete a field? If a \"NULL\" is passed in the JSON, we get NULL in the object, but any other field that is not passed is NULL as well. Therefore we cannot distinguish which field can be deleted and which field cannot be touched.</p></li>\n<li><p>The complete object is sent.\nProblem: Here the object could be fetched via a GET before, changed accordingly and returned via PUT. Now we get all information back and could write the information directly back into the database. Because empty fields were either already empty before or were cleared by the user. </p></li>\n</ol>\n\n<p>What happens if the objects are extended by an update of the API. Suppose we extend the database by five more fields. The user of the API makes a GET, gets the 15 fields, but can only read the 10 fields he knows on his page (because he hasn't updated his side yet). Then he changes some of the 10 fields and sends them back via PUT. We would then update only the 10 fields on our site and the 5 new fields would be emptied from the database.</p>\n\n<p>Or do you have to create a separate endpoint for each field? We have also thought about creating a map with key / value, what exactly should be changed.</p>\n\n<p>About the technique: We use the <code>Wildfly 15 with Resteasy and Jackson</code>.</p>\n\n<p><strong>For example:</strong></p>\n\n<p>Database at the beginning</p>\n\n<pre><code>+----+----------+---------------+-----+--------+-------+\n| ID | Name     | Country       | Age | Weight | Phone |\n+----+----------+---------------+-----+--------+-------+\n| 1  | Person 1 | Germany       | 22  | 60     | 12345 |\n| 2  | Person 2 | United States | 32  | 78     | 56789 |\n| 3  | Person 3 | Canada        | 52  | 102    | 99999 |\n+----+----------+---------------+-----+--------+-------+\n</code></pre>\n\n<p>GET .../person/2</p>\n\n<pre><code>{\n   \"id\" : 2,\n   \"name\" : \"Person 2\",\n   \"country\" : \"United States\",\n   \"age\" : 22,\n   \"weight\" :62,\n   \"phone\": \"56789\"\n}\n</code></pre>\n\n<p>Now I want to update his weight and remove the phone number</p>\n\n<p>PUT .../person/2</p>\n\n<pre><code>{\n   \"id\" : 2,\n   \"name\" : \"Person 2\",\n   \"country\" : \"United States\",\n   \"age\" : 22,\n   \"weight\" :78\n}\n</code></pre>\n\n<p>or</p>\n\n<pre><code>{\n   \"id\" : 2,\n   \"name\" : \"Person 2\",\n   \"country\" : \"United States\",\n   \"age\" : 22,\n   \"weight\" :78,\n   \"phone\" : null\n}\n</code></pre>\n\n<p>Now the database should look like this:</p>\n\n<pre><code>+----+----------+---------------+-----+--------+-------+\n| ID | Name     | Country       | Age | Weight | Phone |\n+----+----------+---------------+-----+--------+-------+\n| 1  | Person 1 | Germany       | 22  | 60     | 12345 |\n| 2  | Person 2 | United States | 32  | 78     | NULL  |\n| 3  | Person 3 | Canada        | 52  | 102    | 99999 |\n+----+----------+---------------+-----+--------+-------+\n</code></pre>\n\n<p><strong>The problem is</strong></p>\n\n<p>We extend the table like this (salery)</p>\n\n<pre><code>+----+----------+---------------+-----+--------+--------+-------+\n| ID | Name     | Country       | Age | Weight | Salery | Phone |\n+----+----------+---------------+-----+--------+--------+-------+\n| 1  | Person 1 | Germany       | 22  | 60     | 1929   | 12345 |\n| 2  | Person 2 | United States | 32  | 78     | 2831   | NULL  |\n| 3  | Person 3 | Canada        | 52  | 102    | 3921   | 99999 |\n+----+----------+---------------+-----+--------+--------+-------+\n</code></pre>\n\n<p>The person using the API does not know that there is a new field in JSON for the salary. And this person now wants to change the phone number of someone again, but does not send the salary. This would also empty the salary:</p>\n\n<pre><code>{\n   \"id\" : 3,\n   \"name\" : \"Person 3\",\n   \"country\" : \"Cananda\",\n   \"age\" : 52,\n   \"weight\" :102,\n   \"phone\" : null\n}\n\n\n+----+----------+---------------+-----+--------+--------+-------+\n| ID | Name     | Country       | Age | Weight | Salery | Phone |\n+----+----------+---------------+-----+--------+--------+-------+\n| 1  | Person 1 | Germany       | 22  | 60     | 1929   | 12345 |\n| 2  | Person 2 | United States | 32  | 78     | 2831   | NULL  |\n| 3  | Person 3 | Canada        | 52  | 102    | NULL   | NULL  |\n+----+----------+---------------+-----+--------+--------+-------+\n</code></pre>\n\n<p>And salary should not be null, because it was not set inside the JSON request</p>\n"},{"tags":["java","sql","spring","oracle","spring-data-jpa"],"comments":[{"owner":{"account_id":5279068,"reputation":895,"user_id":4215032,"display_name":"Pp88"},"score":1,"creation_date":1664906849,"post_id":73951864,"comment_id":130575717,"body_markdown":"Checked the accepted [answer trick](https://stackoverflow.com/questions/68033607/why-can-i-not-parse-the-interval-as-a-parameter-in-jpa)?","body":"Checked the accepted <a href=\"https://stackoverflow.com/questions/68033607/why-can-i-not-parse-the-interval-as-a-parameter-in-jpa\">answer trick</a>?"},{"owner":{"account_id":4091641,"reputation":1488,"user_id":3359469,"accept_rate":50,"display_name":"Falco"},"score":0,"creation_date":1664908176,"post_id":73951864,"comment_id":130576053,"body_markdown":"@Pp88 thx! yes it fits, I did not find the question/answer searching by google, the only difference is the &quot;:&quot; instead of &quot;?&quot; because of oracle instead of postgresql","body":"@Pp88 thx! yes it fits, I did not find the question/answer searching by google, the only difference is the &quot;:&quot; instead of &quot;?&quot; because of oracle instead of postgresql"}],"answers":[{"tags":[],"owner":{"account_id":4091641,"reputation":1488,"user_id":3359469,"accept_rate":50,"display_name":"Falco"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1664908380,"creation_date":1664908380,"answer_id":73952189,"question_id":73951864,"body_markdown":"See comments on question, there is a similar question/answer for spring/jpa/postgresql, solution for me is:\r\n\r\n    @Query(nativeQuery = true, \r\n                value = &quot;SELECT * FROM MY_TABLE WHERE  SYSDATE &gt; MY_DATE + :myValue * (INTERVAL 1 DAY&quot;))\r\n    public List&lt;Object[]&gt; myMethod(@Param(&quot;myValue&quot;) int myValue );","title":"INTERVAL expression in Spring Data JPA Native Query","body":"<p>See comments on question, there is a similar question/answer for spring/jpa/postgresql, solution for me is:</p>\n<pre><code>@Query(nativeQuery = true, \n            value = &quot;SELECT * FROM MY_TABLE WHERE  SYSDATE &gt; MY_DATE + :myValue * (INTERVAL 1 DAY&quot;))\npublic List&lt;Object[]&gt; myMethod(@Param(&quot;myValue&quot;) int myValue );\n</code></pre>\n"}],"owner":{"account_id":4091641,"reputation":1488,"user_id":3359469,"accept_rate":50,"display_name":"Falco"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":453,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73952189,"answer_count":1,"score":0,"last_activity_date":1664908380,"creation_date":1664906356,"question_id":73951864,"body_markdown":"I have Spring JPA.\r\n\r\nI have a query ***like*** this in sql oracle:\r\n\r\n    SELECT * FROM MY_TABLE WHERE  SYSDATE &gt; MY_DATE + INTERVAL &#39;10&#39; DAY;\r\n\r\nI have a CrudRepository in which I use the above query in native mode, ***like*** this:\r\n\r\n\t\r\n\r\n    @Query(nativeQuery = true, \r\n    \t\t\tvalue = &quot;SELECT * FROM MY_TABLE WHERE  SYSDATE &gt; MY_DATE + INTERVAL :myValue DAY&quot;)\r\n    public List&lt;Object[]&gt; myMethod(@Param(&quot;myValue&quot;) String myValue );\r\n\r\nI get ORA-00933:\r\n\r\nPassing myValue as integer between quotes I get ORA-01867\r\n\r\nPassing myValue as integer without quotes I get ORA-00933\r\n\r\nHow to do it?","title":"INTERVAL expression in Spring Data JPA Native Query","body":"<p>I have Spring JPA.</p>\n<p>I have a query <em><strong>like</strong></em> this in sql oracle:</p>\n<pre><code>SELECT * FROM MY_TABLE WHERE  SYSDATE &gt; MY_DATE + INTERVAL '10' DAY;\n</code></pre>\n<p>I have a CrudRepository in which I use the above query in native mode, <em><strong>like</strong></em> this:</p>\n<pre><code>@Query(nativeQuery = true, \n            value = &quot;SELECT * FROM MY_TABLE WHERE  SYSDATE &gt; MY_DATE + INTERVAL :myValue DAY&quot;)\npublic List&lt;Object[]&gt; myMethod(@Param(&quot;myValue&quot;) String myValue );\n</code></pre>\n<p>I get ORA-00933:</p>\n<p>Passing myValue as integer between quotes I get ORA-01867</p>\n<p>Passing myValue as integer without quotes I get ORA-00933</p>\n<p>How to do it?</p>\n"},{"tags":["java","android","mvvm","android-sqlite","viewmodel"],"answers":[{"tags":[],"owner":{"account_id":16839534,"reputation":4249,"user_id":12175239,"display_name":"Squti"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1576932469,"creation_date":1576932469,"answer_id":59436322,"question_id":59436077,"body_markdown":"Your solution works but you break the `Dependency Inversion` rule in MVVM pattern. So you should implement `Dependency Injection` pattern using constructor injection or frameworks like `Dagger` to pass the `context` to your model layer. Your memory leak is because of breaking this rule too and by implementing Dependency Injection there is no need for global variables with multiple access in different layers which can cause memory leaks.","title":"MVVM - get context in a Model class","body":"<p>Your solution works but you break the <code>Dependency Inversion</code> rule in MVVM pattern. So you should implement <code>Dependency Injection</code> pattern using constructor injection or frameworks like <code>Dagger</code> to pass the <code>context</code> to your model layer. Your memory leak is because of breaking this rule too and by implementing Dependency Injection there is no need for global variables with multiple access in different layers which can cause memory leaks.</p>\n"},{"tags":[],"owner":{"account_id":1440945,"reputation":599,"user_id":1361120,"accept_rate":100,"display_name":"Ahmed M. Abed"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1576935972,"creation_date":1576935972,"answer_id":59436696,"question_id":59436077,"body_markdown":"You can pass the context to ViewModel using Factory, for Example:\r\n\r\n    public class ViewModelClass extends ViewModel{\r\n          private Context context;\r\n          public ViewModelClass(Context context){\r\n               this.context = context;\r\n          }\r\n    }\r\n\r\nand the factory class\r\n\r\n    public class ViewModelFactory implements ViewModelProvider.Factory{\r\n    private Context context;\r\n    \r\n        public ViewModelFactory(Context context){\r\n        this.context = context;\r\n        }\r\n        @Override\r\n            public &lt;T extends ViewModel&gt; T create(Class&lt;T&gt; modelClass) {\r\n                if (modelClass.isAssignableFrom(ViewModelClass.class)) {\r\n                    return (T) new ViewModelClass(context);\r\n                }\r\n                throw new IllegalArgumentException(&quot;Unknown ViewModel class&quot;);\r\n            }\r\n       }\r\n\r\nand when you used the ViewModel define the factory \r\n\r\n    ViewModelFactory viewModelFactory = new ViewModelFactory(context);\r\n\r\nthen pass it like this:\r\n\r\n    viewModel = ViewModelProviders.of(this, viewModelFactory).get(ViewModelClass.class)\r\n","title":"MVVM - get context in a Model class","body":"<p>You can pass the context to ViewModel using Factory, for Example:</p>\n\n<pre><code>public class ViewModelClass extends ViewModel{\n      private Context context;\n      public ViewModelClass(Context context){\n           this.context = context;\n      }\n}\n</code></pre>\n\n<p>and the factory class</p>\n\n<pre><code>public class ViewModelFactory implements ViewModelProvider.Factory{\nprivate Context context;\n\n    public ViewModelFactory(Context context){\n    this.context = context;\n    }\n    @Override\n        public &lt;T extends ViewModel&gt; T create(Class&lt;T&gt; modelClass) {\n            if (modelClass.isAssignableFrom(ViewModelClass.class)) {\n                return (T) new ViewModelClass(context);\n            }\n            throw new IllegalArgumentException(\"Unknown ViewModel class\");\n        }\n   }\n</code></pre>\n\n<p>and when you used the ViewModel define the factory </p>\n\n<pre><code>ViewModelFactory viewModelFactory = new ViewModelFactory(context);\n</code></pre>\n\n<p>then pass it like this:</p>\n\n<pre><code>viewModel = ViewModelProviders.of(this, viewModelFactory).get(ViewModelClass.class)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":248767,"reputation":1239,"user_id":524355,"display_name":"CaptainCrunch"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664908126,"creation_date":1664908126,"answer_id":73952147,"question_id":59436077,"body_markdown":"If you read the [View Model Documentation][1]\r\nyou will notice the very first line mentions [Known direct subclasses\r\nAndroidViewModel][2] which in turn has a public constructor that accepts the Application Context. Quote from the documentation:\r\n\r\n&gt; Application context aware ViewModel.\r\n&gt; Subclasses must have a constructor which accepts Application as the only parameter.\r\n\r\n\r\n\r\n\r\n  [1]: https://developer.android.com/reference/androidx/lifecycle/ViewModel\r\n  [2]: https://developer.android.com/reference/androidx/lifecycle/AndroidViewModel","title":"MVVM - get context in a Model class","body":"<p>If you read the <a href=\"https://developer.android.com/reference/androidx/lifecycle/ViewModel\" rel=\"nofollow noreferrer\">View Model Documentation</a>\nyou will notice the very first line mentions <a href=\"https://developer.android.com/reference/androidx/lifecycle/AndroidViewModel\" rel=\"nofollow noreferrer\">Known direct subclasses\nAndroidViewModel</a> which in turn has a public constructor that accepts the Application Context. Quote from the documentation:</p>\n<blockquote>\n<p>Application context aware ViewModel.\nSubclasses must have a constructor which accepts Application as the only parameter.</p>\n</blockquote>\n"}],"owner":{"account_id":13917263,"reputation":1622,"user_id":10048703,"display_name":"davidm"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7411,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":59436322,"answer_count":3,"score":2,"last_activity_date":1664908126,"creation_date":1576930307,"question_id":59436077,"body_markdown":"I&#39;m using MVVM to build my Android app and I need to connect the Model to a DB. Instead of Room I&#39;m using the SQLiteOpenHelper and to make a connection to the DB I need the context. But since this is a non activity class I&#39;m struggling to get it.\r\n[![mvvm][1]][1]\r\n\r\nMy current solution looks as follows but I keep getting a memory leak warning.\r\n\r\n```\r\npublic class MyApplication extends Application {\r\n\r\n    private static MyApplication mContext;\r\n\r\n    @Override\r\n    public void onCreate() {\r\n        super.onCreate();\r\n        mContext = this;\r\n    }\r\n\r\n    public static MyApplication getContext() {\r\n        return mContext;\r\n    }\r\n}\r\n```\r\n\r\nAny better solution or best practice?\r\n\r\n*edit: not using Dagger*\r\n\r\n  [1]: https://i.stack.imgur.com/VWoUa.png","title":"MVVM - get context in a Model class","body":"<p>I'm using MVVM to build my Android app and I need to connect the Model to a DB. Instead of Room I'm using the SQLiteOpenHelper and to make a connection to the DB I need the context. But since this is a non activity class I'm struggling to get it.\n<a href=\"https://i.stack.imgur.com/VWoUa.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VWoUa.png\" alt=\"mvvm\"></a></p>\n\n<p>My current solution looks as follows but I keep getting a memory leak warning.</p>\n\n<pre><code>public class MyApplication extends Application {\n\n    private static MyApplication mContext;\n\n    @Override\n    public void onCreate() {\n        super.onCreate();\n        mContext = this;\n    }\n\n    public static MyApplication getContext() {\n        return mContext;\n    }\n}\n</code></pre>\n\n<p>Any better solution or best practice?</p>\n\n<p><em>edit: not using Dagger</em></p>\n"},{"tags":["java","spring-boot","docusignapi"],"comments":[{"owner":{"account_id":3941825,"reputation":12902,"user_id":3255871,"display_name":"Inbar Gazit"},"score":0,"creation_date":1664573601,"post_id":73914125,"comment_id":130510765,"body_markdown":"There are 3 options for Java, I understand you picked the right-most (full), can you try one of the other 2?","body":"There are 3 options for Java, I understand you picked the right-most (full), can you try one of the other 2?"},{"owner":{"account_id":15241085,"reputation":29,"user_id":10997345,"display_name":"Vyassa"},"score":0,"creation_date":1664574837,"post_id":73914125,"comment_id":130511026,"body_markdown":"@InbarGazit thanks for the swift reply, actually I picked the middle one only &quot;Authorization code grant embedded signing example&quot;, tried it again just now as well it&#39;s the same 2 src folders.","body":"@InbarGazit thanks for the swift reply, actually I picked the middle one only &quot;Authorization code grant embedded signing example&quot;, tried it again just now as well it&#39;s the same 2 src folders."},{"owner":{"account_id":3941825,"reputation":12902,"user_id":3255871,"display_name":"Inbar Gazit"},"score":0,"creation_date":1664578168,"post_id":73914125,"comment_id":130511591,"body_markdown":"can you try the right-most option?","body":"can you try the right-most option?"},{"owner":{"account_id":3941825,"reputation":12902,"user_id":3255871,"display_name":"Inbar Gazit"},"score":0,"creation_date":1664835019,"post_id":73914125,"comment_id":130557617,"body_markdown":"UPDATE: This is fixed now, please try again","body":"UPDATE: This is fixed now, please try again"},{"owner":{"account_id":15241085,"reputation":29,"user_id":10997345,"display_name":"Vyassa"},"score":0,"creation_date":1664907987,"post_id":73914125,"comment_id":130576006,"body_markdown":"Thanks for working to resolve my problem, I have edited the question depicting the current state. I couldn&#39;t get the authorization grant flow OAuth client (Java Spring) working but at least the app depicting all APIs ( generated using extreme right side grant type) is functioning.","body":"Thanks for working to resolve my problem, I have edited the question depicting the current state. I couldn&#39;t get the authorization grant flow OAuth client (Java Spring) working but at least the app depicting all APIs ( generated using extreme right side grant type) is functioning."},{"owner":{"account_id":3941825,"reputation":12902,"user_id":3255871,"display_name":"Inbar Gazit"},"score":0,"creation_date":1664912287,"post_id":73914125,"comment_id":130577197,"body_markdown":"Did you start from scratch and download the middle project again? as I said here, we fixed the code and it should work now.","body":"Did you start from scratch and download the middle project again? as I said here, we fixed the code and it should work now."},{"owner":{"account_id":3941825,"reputation":12902,"user_id":3255871,"display_name":"Inbar Gazit"},"score":0,"creation_date":1664912298,"post_id":73914125,"comment_id":130577204,"body_markdown":"Please do everything from scratch again, don&#39;t use the older code/ZIP file","body":"Please do everything from scratch again, don&#39;t use the older code/ZIP file"},{"owner":{"account_id":15241085,"reputation":29,"user_id":10997345,"display_name":"Vyassa"},"score":0,"creation_date":1664913788,"post_id":73914125,"comment_id":130577635,"body_markdown":"Yeah, I am doing everything from scratch, got the new project generated today only, not referring to any older code or zip files. Facing errors as depicted in a picture I have added in the 10/04/22 edit above (where I am showing App class of ACG and full project side by side), the entry point class com.docusign.App is using OSDetector class which is located in the outer src folder, I never saw something like this ever earlier in any Java project. I am in for learning something new, but not getting.","body":"Yeah, I am doing everything from scratch, got the new project generated today only, not referring to any older code or zip files. Facing errors as depicted in a picture I have added in the 10/04/22 edit above (where I am showing App class of ACG and full project side by side), the entry point class com.docusign.App is using OSDetector class which is located in the outer src folder, I never saw something like this ever earlier in any Java project. I am in for learning something new, but not getting."},{"owner":{"account_id":3941825,"reputation":12902,"user_id":3255871,"display_name":"Inbar Gazit"},"score":0,"creation_date":1664914389,"post_id":73914125,"comment_id":130577793,"body_markdown":"Are you using Eclipse to compile this?","body":"Are you using Eclipse to compile this?"},{"owner":{"account_id":3941825,"reputation":12902,"user_id":3255871,"display_name":"Inbar Gazit"},"score":0,"creation_date":1664914400,"post_id":73914125,"comment_id":130577798,"body_markdown":"I try this from commandline and it works ok","body":"I try this from commandline and it works ok"},{"owner":{"account_id":15241085,"reputation":29,"user_id":10997345,"display_name":"Vyassa"},"score":0,"creation_date":1664916710,"post_id":73914125,"comment_id":130578467,"body_markdown":"I am using IntelliJ IDEA Ultimate for compiling and running.","body":"I am using IntelliJ IDEA Ultimate for compiling and running."},{"owner":{"account_id":15241085,"reputation":29,"user_id":10997345,"display_name":"Vyassa"},"score":0,"creation_date":1664917781,"post_id":73914125,"comment_id":130578754,"body_markdown":"Let me generate the project again and try running it using a different IDE or maybe like you are doing from the command line. Thanks for replying, have a blessed day!","body":"Let me generate the project again and try running it using a different IDE or maybe like you are doing from the command line. Thanks for replying, have a blessed day!"},{"owner":{"account_id":3941825,"reputation":12902,"user_id":3255871,"display_name":"Inbar Gazit"},"score":0,"creation_date":1664920314,"post_id":73914125,"comment_id":130579322,"body_markdown":"I run mvn package  and then I run java -Dspring.profiles.active=dev -jar target\\code-examples-java-acg-1.0-SNAPSHOT.jar","body":"I run mvn package  and then I run java -Dspring.profiles.active=dev -jar target\\code-examples-java-acg-1.0-SNAPSHOT.jar"},{"owner":{"account_id":15241085,"reputation":29,"user_id":10997345,"display_name":"Vyassa"},"score":0,"creation_date":1664985411,"post_id":73914125,"comment_id":130594951,"body_markdown":"Yes, the way you mentioned is working, thanks Inbar :)","body":"Yes, the way you mentioned is working, thanks Inbar :)"},{"owner":{"account_id":15241085,"reputation":29,"user_id":10997345,"display_name":"Vyassa"},"score":0,"creation_date":1664987833,"post_id":73914125,"comment_id":130595778,"body_markdown":"Looks like there is some problem with IntelliJ&#39;s embedded maven plugin, I should have tried maven itself directly from the command line, well learn and live :)","body":"Looks like there is some problem with IntelliJ&#39;s embedded maven plugin, I should have tried maven itself directly from the command line, well learn and live :)"},{"owner":{"account_id":3941825,"reputation":12902,"user_id":3255871,"display_name":"Inbar Gazit"},"score":0,"creation_date":1664989923,"post_id":73914125,"comment_id":130596442,"body_markdown":"Thanks, we&#39;ll check InteliJ and see if we can fix","body":"Thanks, we&#39;ll check InteliJ and see if we can fix"},{"owner":{"account_id":15241085,"reputation":29,"user_id":10997345,"display_name":"Vyassa"},"score":0,"creation_date":1665000298,"post_id":73914125,"comment_id":130599610,"body_markdown":"Hey, @InbarGazit all the sample apps shown on https://developers.docusign.com/sample-apps/ are written in different languages but Java, could you please guide me to some Java sample apps?","body":"Hey, @InbarGazit all the sample apps shown on <a href=\"https://developers.docusign.com/sample-apps/\" rel=\"nofollow noreferrer\">developers.docusign.com/sample-apps</a> are written in different languages but Java, could you please guide me to some Java sample apps?"},{"owner":{"account_id":3941825,"reputation":12902,"user_id":3255871,"display_name":"Inbar Gazit"},"score":0,"creation_date":1665002026,"post_id":73914125,"comment_id":130600091,"body_markdown":"We don&#39;t have one yet, but hope to have one soon. Sorry about that.","body":"We don&#39;t have one yet, but hope to have one soon. Sorry about that."},{"owner":{"account_id":15241085,"reputation":29,"user_id":10997345,"display_name":"Vyassa"},"score":1,"creation_date":1665004752,"post_id":73914125,"comment_id":130600835,"body_markdown":"Appreciate your response, thanks.","body":"Appreciate your response, thanks."}],"answers":[{"tags":[],"owner":{"account_id":3941825,"reputation":12902,"user_id":3255871,"display_name":"Inbar Gazit"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1664835046,"creation_date":1664586282,"answer_id":73915162,"question_id":73914125,"body_markdown":"**UPDATE 10/3/2022** - We have made a fix available, please try again and it should work properly. \r\n\r\nWe have identified a regression bug in the &quot;Authorization code grant embedded signing example&quot; (middle option) of the Java quickstart. You can try the right-most (full) option for now. We&#39;ll fix it soon.\r\nThe full option includes all code examples as well as both Auth Code Grant and JWT so should be good for now.","title":"Issues with the DocuSign quickstart tool&#39;s produced Java Spring Boot example (OAuth2 client authorization code grant) app?","body":"<p><strong>UPDATE 10/3/2022</strong> - We have made a fix available, please try again and it should work properly.</p>\n<p>We have identified a regression bug in the &quot;Authorization code grant embedded signing example&quot; (middle option) of the Java quickstart. You can try the right-most (full) option for now. We'll fix it soon.\nThe full option includes all code examples as well as both Auth Code Grant and JWT so should be good for now.</p>\n"}],"owner":{"account_id":15241085,"reputation":29,"user_id":10997345,"display_name":"Vyassa"},"comment_count":19,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":264,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73915162,"answer_count":1,"score":1,"last_activity_date":1664907712,"creation_date":1664573536,"question_id":73914125,"body_markdown":"Thanks for reading my question.\r\nI am trying to build an OAuth2 client app (Authorization code grant type) integrating with DocuSign. I followed the documentation and the recommended [quickstart][1] way of getting started with the Spring Boot Java code, firstly I couldn&#39;t understand why there are 2 src folders in the produced project.\r\n\r\nOther than this, the quickstart tool says to follow the README.md for further instructions but unfortunately, the project generated like above doesn&#39;t come with any README file. I followed the [Github][2] page of DocuSign java examples and tried to run the app in IntelliJ Ultimate but **I am facing errors viz. &quot;java: package com.docusign.common does not exist&quot;**, &quot;com.docusign.core.model.manifestModels does not exist&quot; I tried to invalidate cache and re-build and re-import the dependencies multiple times but no help. \r\n\r\nI am a bit perplexed by why there are some classes of the external src folder (like OSDetector etc) being used in the inner src folder, and is it really a Spring Boot project or Spring MVC or kind of in between?\r\n\r\nI would like to add for any Developer Advocate reading from DocuSign, instead of loading the examples with a number of libraries and making them complex try to showcase examples (maybe a few) just with your library/ SDK and minimum other dependencies so as we can see your SDK in action in isolation. Definitely, we will add to it as we will build a proper integration.\r\n\r\nThanks again!! :)   \r\n\r\n**EDIT - 10/04/22**\r\n\r\nAs advised I tried to generate the project using quick-start with the extreme right OAuth grant type option (Multiple code examples, ACG, and JWT grant) the project is coming up with one main &quot;src&quot; folder and separate projects for ACG and JWT in folders named as &quot;Quick_ACG&quot; and &quot;JWT Console App&quot;. I deleted the &quot;Quick_ACG&quot; and &quot;JWT Console App&quot; folders just to see if they are anywhere connected with the main app and as anticipated doesn&#39;t look like they are. After configuring and running the main project same is running fine, and I can use it as a starter code for prospective integration.\r\n\r\nI tried to generate an authorization-code-grant flow project using quick-start, but I can&#39;t run the same, adding a picture depicting both scenarios here (ACG on left and full app on right).[enter image description here][3]  \r\n\r\nRest I am still unclear why so many &quot;src&quot; folders are there as you can see in the above image for the ACG type project and here as well ([full project][4]), and moreover, classes from the inner &quot;src&quot; folder are referring to classes in outer src folder for example `OSDetector`\r\n\r\n\r\n  [1]: https://developers.docusign.com/docs/esign-rest-api/quickstart/\r\n  [2]: https://github.com/docusign/code-examples-java\r\n  [3]: https://i.stack.imgur.com/xqEcf.jpg\r\n  [4]: https://i.stack.imgur.com/GCJDw.png","title":"Issues with the DocuSign quickstart tool&#39;s produced Java Spring Boot example (OAuth2 client authorization code grant) app?","body":"<p>Thanks for reading my question.\nI am trying to build an OAuth2 client app (Authorization code grant type) integrating with DocuSign. I followed the documentation and the recommended <a href=\"https://developers.docusign.com/docs/esign-rest-api/quickstart/\" rel=\"nofollow noreferrer\">quickstart</a> way of getting started with the Spring Boot Java code, firstly I couldn't understand why there are 2 src folders in the produced project.</p>\n<p>Other than this, the quickstart tool says to follow the README.md for further instructions but unfortunately, the project generated like above doesn't come with any README file. I followed the <a href=\"https://github.com/docusign/code-examples-java\" rel=\"nofollow noreferrer\">Github</a> page of DocuSign java examples and tried to run the app in IntelliJ Ultimate but <strong>I am facing errors viz. &quot;java: package com.docusign.common does not exist&quot;</strong>, &quot;com.docusign.core.model.manifestModels does not exist&quot; I tried to invalidate cache and re-build and re-import the dependencies multiple times but no help.</p>\n<p>I am a bit perplexed by why there are some classes of the external src folder (like OSDetector etc) being used in the inner src folder, and is it really a Spring Boot project or Spring MVC or kind of in between?</p>\n<p>I would like to add for any Developer Advocate reading from DocuSign, instead of loading the examples with a number of libraries and making them complex try to showcase examples (maybe a few) just with your library/ SDK and minimum other dependencies so as we can see your SDK in action in isolation. Definitely, we will add to it as we will build a proper integration.</p>\n<p>Thanks again!! :)</p>\n<p><strong>EDIT - 10/04/22</strong></p>\n<p>As advised I tried to generate the project using quick-start with the extreme right OAuth grant type option (Multiple code examples, ACG, and JWT grant) the project is coming up with one main &quot;src&quot; folder and separate projects for ACG and JWT in folders named as &quot;Quick_ACG&quot; and &quot;JWT Console App&quot;. I deleted the &quot;Quick_ACG&quot; and &quot;JWT Console App&quot; folders just to see if they are anywhere connected with the main app and as anticipated doesn't look like they are. After configuring and running the main project same is running fine, and I can use it as a starter code for prospective integration.</p>\n<p>I tried to generate an authorization-code-grant flow project using quick-start, but I can't run the same, adding a picture depicting both scenarios here (ACG on left and full app on right).<a href=\"https://i.stack.imgur.com/xqEcf.jpg\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>Rest I am still unclear why so many &quot;src&quot; folders are there as you can see in the above image for the ACG type project and here as well (<a href=\"https://i.stack.imgur.com/GCJDw.png\" rel=\"nofollow noreferrer\">full project</a>), and moreover, classes from the inner &quot;src&quot; folder are referring to classes in outer src folder for example <code>OSDetector</code></p>\n"},{"tags":["java","listview","javafx","combobox","fxml"],"answers":[{"tags":[],"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1664907538,"creation_date":1664898688,"answer_id":73950474,"question_id":73950137,"body_markdown":"Edited version:\r\n\r\nAs pointed out in the comments, the mock-up in the OP has the button outside the list view, so that it is visible without scrolling to the bottom of the list view. You can accomplish this by creating a custom skin which overrides the `getPopupContent()` method:\r\n\r\n    import javafx.fxml.FXML;\r\n    import javafx.fxml.Initializable;\r\n    import javafx.geometry.Bounds;\r\n    import javafx.geometry.Pos;\r\n    import javafx.scene.Node;\r\n    import javafx.scene.control.Button;\r\n    import javafx.scene.control.ComboBox;\r\n    import javafx.scene.control.ListCell;\r\n    import javafx.scene.control.skin.ComboBoxListViewSkin;\r\n    import javafx.scene.layout.HBox;\r\n    import javafx.scene.layout.Pane;\r\n    import javafx.scene.layout.VBox;\r\n    \r\n    import java.net.URL;\r\n    import java.util.ResourceBundle;\r\n    \r\n    public class HelloController implements Initializable {\r\n    \r\n        @FXML\r\n        private ComboBox&lt;String&gt; frequencyPlanComboBox;\r\n    \r\n        @Override\r\n        public void initialize(URL pURL, ResourceBundle pResourceBundle) {\r\n    \r\n            for (int i = 1 ; i &lt;=20 ;i++) {\r\n                frequencyPlanComboBox.getItems().add(&quot;Item &quot;+i);\r\n            }\r\n    \r\n            ComboBoxListViewSkin&lt;String&gt; comboBoxListViewSkin = new ComboBoxListViewSkin&lt;String&gt;(frequencyPlanComboBox) {\r\n                private Button button = new Button(&quot;Add New&quot;);\r\n    \r\n                private VBox pane = new VBox();\r\n                {\r\n                    pane.setStyle(&quot;-fx-background-color: -fx-control-inner-background;&quot;);\r\n                }\r\n    \r\n                @Override\r\n                public Node getPopupContent() {\r\n                    Node defaultContent = super.getPopupContent();\r\n                    defaultContent.setManaged(true);\r\n                    pane.getChildren().setAll(defaultContent, button);\r\n                    return pane ;\r\n                }\r\n            };\r\n            comboBoxListViewSkin.setHideOnClick(false);\r\n            frequencyPlanComboBox.setSkin(comboBoxListViewSkin);\r\n    \r\n        }\r\n    }\r\n\r\n---\r\n\r\nHere is the original solution, which is probably less desirable:\r\n\r\nAdd a null value to the end of the combo box items list, and use a custom list cell which displays the button for that value.\r\n\r\n    import javafx.fxml.FXML;\r\n    import javafx.fxml.Initializable;\r\n    import javafx.scene.control.Button;\r\n    import javafx.scene.control.ComboBox;\r\n    import javafx.scene.control.ListCell;\r\n    import javafx.scene.control.skin.ComboBoxListViewSkin;\r\n    \r\n    import java.net.URL;\r\n    import java.util.ResourceBundle;\r\n    \r\n    public class HelloController implements Initializable {\r\n    \r\n        @FXML\r\n        private ComboBox&lt;String&gt; frequencyPlanComboBox;\r\n    \r\n        @Override\r\n        public void initialize(URL pURL, ResourceBundle pResourceBundle) {\r\n            frequencyPlanComboBox.getItems()\r\n                    .addAll(&quot;aaa&quot;, &quot;bbb&quot;, &quot;ccc&quot;, null);\r\n            ComboBoxListViewSkin&lt;String&gt; comboBoxListViewSkin = new ComboBoxListViewSkin&lt;String&gt;(frequencyPlanComboBox);\r\n            comboBoxListViewSkin.setHideOnClick(false);\r\n            frequencyPlanComboBox.setSkin(comboBoxListViewSkin);\r\n    \r\n            frequencyPlanComboBox.setCellFactory(lv -&gt; new ListCell&lt;&gt;() {\r\n                private Button button = new Button(&quot;Add New...&quot;);\r\n                {\r\n                    button.setOnAction(e -&gt; {\r\n                        /*\r\n                        Do something\r\n                         */\r\n                        System.out.println(&quot;Button pressed&quot;);\r\n                    });\r\n                }\r\n                @Override\r\n                protected void updateItem(String item, boolean empty) {\r\n                    super.updateItem(item, empty);\r\n                    if (empty) {\r\n                        setText(&quot;&quot;) ;\r\n                        setGraphic(null);\r\n                    } else if (item == null) {\r\n                        setText(&quot;&quot;);\r\n                        setGraphic(button);\r\n                    } else {\r\n                        setText(item);\r\n                        setGraphic(null);\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\nYou probably want to experiment a bit with styling that cell, so it doesn&#39;t appear selected.\r\n","title":"Add a button at the end of a ComboBox list view","body":"<p>Edited version:</p>\n<p>As pointed out in the comments, the mock-up in the OP has the button outside the list view, so that it is visible without scrolling to the bottom of the list view. You can accomplish this by creating a custom skin which overrides the <code>getPopupContent()</code> method:</p>\n<pre><code>import javafx.fxml.FXML;\nimport javafx.fxml.Initializable;\nimport javafx.geometry.Bounds;\nimport javafx.geometry.Pos;\nimport javafx.scene.Node;\nimport javafx.scene.control.Button;\nimport javafx.scene.control.ComboBox;\nimport javafx.scene.control.ListCell;\nimport javafx.scene.control.skin.ComboBoxListViewSkin;\nimport javafx.scene.layout.HBox;\nimport javafx.scene.layout.Pane;\nimport javafx.scene.layout.VBox;\n\nimport java.net.URL;\nimport java.util.ResourceBundle;\n\npublic class HelloController implements Initializable {\n\n    @FXML\n    private ComboBox&lt;String&gt; frequencyPlanComboBox;\n\n    @Override\n    public void initialize(URL pURL, ResourceBundle pResourceBundle) {\n\n        for (int i = 1 ; i &lt;=20 ;i++) {\n            frequencyPlanComboBox.getItems().add(&quot;Item &quot;+i);\n        }\n\n        ComboBoxListViewSkin&lt;String&gt; comboBoxListViewSkin = new ComboBoxListViewSkin&lt;String&gt;(frequencyPlanComboBox) {\n            private Button button = new Button(&quot;Add New&quot;);\n\n            private VBox pane = new VBox();\n            {\n                pane.setStyle(&quot;-fx-background-color: -fx-control-inner-background;&quot;);\n            }\n\n            @Override\n            public Node getPopupContent() {\n                Node defaultContent = super.getPopupContent();\n                defaultContent.setManaged(true);\n                pane.getChildren().setAll(defaultContent, button);\n                return pane ;\n            }\n        };\n        comboBoxListViewSkin.setHideOnClick(false);\n        frequencyPlanComboBox.setSkin(comboBoxListViewSkin);\n\n    }\n}\n</code></pre>\n<hr />\n<p>Here is the original solution, which is probably less desirable:</p>\n<p>Add a null value to the end of the combo box items list, and use a custom list cell which displays the button for that value.</p>\n<pre><code>import javafx.fxml.FXML;\nimport javafx.fxml.Initializable;\nimport javafx.scene.control.Button;\nimport javafx.scene.control.ComboBox;\nimport javafx.scene.control.ListCell;\nimport javafx.scene.control.skin.ComboBoxListViewSkin;\n\nimport java.net.URL;\nimport java.util.ResourceBundle;\n\npublic class HelloController implements Initializable {\n\n    @FXML\n    private ComboBox&lt;String&gt; frequencyPlanComboBox;\n\n    @Override\n    public void initialize(URL pURL, ResourceBundle pResourceBundle) {\n        frequencyPlanComboBox.getItems()\n                .addAll(&quot;aaa&quot;, &quot;bbb&quot;, &quot;ccc&quot;, null);\n        ComboBoxListViewSkin&lt;String&gt; comboBoxListViewSkin = new ComboBoxListViewSkin&lt;String&gt;(frequencyPlanComboBox);\n        comboBoxListViewSkin.setHideOnClick(false);\n        frequencyPlanComboBox.setSkin(comboBoxListViewSkin);\n\n        frequencyPlanComboBox.setCellFactory(lv -&gt; new ListCell&lt;&gt;() {\n            private Button button = new Button(&quot;Add New...&quot;);\n            {\n                button.setOnAction(e -&gt; {\n                    /*\n                    Do something\n                     */\n                    System.out.println(&quot;Button pressed&quot;);\n                });\n            }\n            @Override\n            protected void updateItem(String item, boolean empty) {\n                super.updateItem(item, empty);\n                if (empty) {\n                    setText(&quot;&quot;) ;\n                    setGraphic(null);\n                } else if (item == null) {\n                    setText(&quot;&quot;);\n                    setGraphic(button);\n                } else {\n                    setText(item);\n                    setGraphic(null);\n                }\n            }\n        });\n    }\n}\n</code></pre>\n<p>You probably want to experiment a bit with styling that cell, so it doesn't appear selected.</p>\n"}],"owner":{"account_id":3267109,"reputation":551,"user_id":2751394,"accept_rate":80,"display_name":"Skartt"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":182,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73950474,"answer_count":1,"score":1,"last_activity_date":1664907538,"creation_date":1664896930,"question_id":73950137,"body_markdown":"I need to create a combo box which can have a button at the end of its list view. This list can have items added or removed and displays a scroll bar when the number of items is over 5. Also, this list view does not close itself when an item is selected.\r\n\r\nHow to add a button &quot;New item&quot; like in the following screen shots ?\r\n\r\n[![enter image description here][1]][1]\r\n\r\nHere is the source code:\r\n\r\nhelloApplication.java\r\n\r\n    package com.example.demo;\r\n    \r\n    import javafx.application.Application;\r\n    import javafx.fxml.FXMLLoader;\r\n    import javafx.scene.Scene;\r\n    import javafx.stage.Stage;\r\n    \r\n    import java.io.IOException;\r\n    \r\n    public class HelloApplication extends Application {\r\n        @Override\r\n        public void start(Stage stage) throws IOException {\r\n            FXMLLoader fxmlLoader = new FXMLLoader(HelloApplication.class.getResource(&quot;hello-view.fxml&quot;));\r\n            Scene scene = new Scene(fxmlLoader.load(), 320, 240);\r\n            stage.setTitle(&quot;Hello!&quot;);\r\n            stage.setScene(scene);\r\n            stage.show();\r\n        }\r\n    \r\n        public static void main(String[] args) {\r\n            launch();\r\n        }\r\n    }\r\n\r\nHelloController.java\r\n\r\n    package com.example.demo;\r\n    \r\n    import javafx.fxml.FXML;\r\n    import javafx.fxml.Initializable;\r\n    import javafx.scene.control.ComboBox;\r\n    import javafx.scene.control.skin.ComboBoxListViewSkin;\r\n    \r\n    import java.net.URL;\r\n    import java.util.ResourceBundle;\r\n    \r\n    public class HelloController implements Initializable {\r\n    \r\n        @FXML\r\n        private ComboBox&lt;String&gt; frequencyPlanComboBox;\r\n    \r\n        @Override\r\n        public void initialize(URL pURL, ResourceBundle pResourceBundle) {\r\n            frequencyPlanComboBox.getItems()\r\n                                 .addAll(&quot;aaa&quot;, &quot;bbb&quot;, &quot;ccc&quot;);\r\n            ComboBoxListViewSkin&lt;String&gt; comboBoxListViewSkin = new ComboBoxListViewSkin&lt;String&gt;(frequencyPlanComboBox);\r\n            comboBoxListViewSkin.setHideOnClick(false);\r\n            frequencyPlanComboBox.setSkin(comboBoxListViewSkin);\r\n        }\r\n    }\r\n\r\nhello-view.fxml\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    \r\n    &lt;?import javafx.geometry.Insets?&gt;\r\n    &lt;?import javafx.scene.control.ComboBox?&gt;\r\n    &lt;?import javafx.scene.control.Label?&gt;\r\n    &lt;?import javafx.scene.layout.VBox?&gt;\r\n    \r\n    &lt;VBox alignment=&quot;CENTER&quot; spacing=&quot;20.0&quot; xmlns=&quot;http://javafx.com/javafx/null&quot; xmlns:fx=&quot;http://javafx.com/fxml/1&quot; fx:controller=&quot;com.example.demo.HelloController&quot;&gt;\r\n        &lt;padding&gt;\r\n            &lt;Insets bottom=&quot;20.0&quot; left=&quot;20.0&quot; right=&quot;20.0&quot; top=&quot;20.0&quot; /&gt;\r\n        &lt;/padding&gt;\r\n    \r\n        &lt;Label fx:id=&quot;welcomeText&quot; /&gt;\r\n       &lt;ComboBox fx:id=&quot;frequencyPlanComboBox&quot; prefWidth=&quot;150.0&quot; visibleRowCount=&quot;5&quot; /&gt;\r\n    &lt;/VBox&gt;\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/MZuUk.jpg","title":"Add a button at the end of a ComboBox list view","body":"<p>I need to create a combo box which can have a button at the end of its list view. This list can have items added or removed and displays a scroll bar when the number of items is over 5. Also, this list view does not close itself when an item is selected.</p>\n<p>How to add a button &quot;New item&quot; like in the following screen shots ?</p>\n<p><a href=\"https://i.stack.imgur.com/MZuUk.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/MZuUk.jpg\" alt=\"enter image description here\" /></a></p>\n<p>Here is the source code:</p>\n<p>helloApplication.java</p>\n<pre><code>package com.example.demo;\n\nimport javafx.application.Application;\nimport javafx.fxml.FXMLLoader;\nimport javafx.scene.Scene;\nimport javafx.stage.Stage;\n\nimport java.io.IOException;\n\npublic class HelloApplication extends Application {\n    @Override\n    public void start(Stage stage) throws IOException {\n        FXMLLoader fxmlLoader = new FXMLLoader(HelloApplication.class.getResource(&quot;hello-view.fxml&quot;));\n        Scene scene = new Scene(fxmlLoader.load(), 320, 240);\n        stage.setTitle(&quot;Hello!&quot;);\n        stage.setScene(scene);\n        stage.show();\n    }\n\n    public static void main(String[] args) {\n        launch();\n    }\n}\n</code></pre>\n<p>HelloController.java</p>\n<pre><code>package com.example.demo;\n\nimport javafx.fxml.FXML;\nimport javafx.fxml.Initializable;\nimport javafx.scene.control.ComboBox;\nimport javafx.scene.control.skin.ComboBoxListViewSkin;\n\nimport java.net.URL;\nimport java.util.ResourceBundle;\n\npublic class HelloController implements Initializable {\n\n    @FXML\n    private ComboBox&lt;String&gt; frequencyPlanComboBox;\n\n    @Override\n    public void initialize(URL pURL, ResourceBundle pResourceBundle) {\n        frequencyPlanComboBox.getItems()\n                             .addAll(&quot;aaa&quot;, &quot;bbb&quot;, &quot;ccc&quot;);\n        ComboBoxListViewSkin&lt;String&gt; comboBoxListViewSkin = new ComboBoxListViewSkin&lt;String&gt;(frequencyPlanComboBox);\n        comboBoxListViewSkin.setHideOnClick(false);\n        frequencyPlanComboBox.setSkin(comboBoxListViewSkin);\n    }\n}\n</code></pre>\n<p>hello-view.fxml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n\n&lt;?import javafx.geometry.Insets?&gt;\n&lt;?import javafx.scene.control.ComboBox?&gt;\n&lt;?import javafx.scene.control.Label?&gt;\n&lt;?import javafx.scene.layout.VBox?&gt;\n\n&lt;VBox alignment=&quot;CENTER&quot; spacing=&quot;20.0&quot; xmlns=&quot;http://javafx.com/javafx/null&quot; xmlns:fx=&quot;http://javafx.com/fxml/1&quot; fx:controller=&quot;com.example.demo.HelloController&quot;&gt;\n    &lt;padding&gt;\n        &lt;Insets bottom=&quot;20.0&quot; left=&quot;20.0&quot; right=&quot;20.0&quot; top=&quot;20.0&quot; /&gt;\n    &lt;/padding&gt;\n\n    &lt;Label fx:id=&quot;welcomeText&quot; /&gt;\n   &lt;ComboBox fx:id=&quot;frequencyPlanComboBox&quot; prefWidth=&quot;150.0&quot; visibleRowCount=&quot;5&quot; /&gt;\n&lt;/VBox&gt;\n</code></pre>\n"},{"tags":["java","json"],"answers":[{"tags":[],"owner":{"account_id":23665009,"reputation":88,"user_id":17692595,"display_name":"Roggi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1639760358,"creation_date":1639731385,"answer_id":70390605,"question_id":70389908,"body_markdown":"In general, you violated the Single Responsibility principal (SOLID), because your code do two different things together: parse a file and categorize items. You should split these responsibilities.\r\n\r\nOne of ways how you do this is to create classes that represents your data. Let&#39;s assume that these classes are `Item`, `Category`, `Order` and `CategorizedItems`. `Order` is a class that represents your source `JSONObject` and `CategorizedItems` - represents your result `JSONArray`.\r\n\r\nIn this case, you should firstly parse the file into these classes and only after that transform them into `JSONArray`.\r\n\r\nCode sample:\r\n\r\nData classes:\r\n\r\n```\r\nclass Order {\r\n    private final List&lt;Item&gt; items = new ArrayList&lt;&gt;();\r\n\r\n    public void addItem(Item item) {\r\n        items.add(item);\r\n    }\r\n\r\n    public List&lt;Item&gt; getAllItems() {\r\n        return new ArrayList&lt;&gt;(items);\r\n    }\r\n}\r\n\r\nenum Category {\r\n    DAIRY(&quot;Dairy&quot;),\r\n    MEAT(&quot;Meat&quot;);\r\n\r\n    private final String value;\r\n\r\n    Category(String value) {\r\n        this.value = value;\r\n    }\r\n\r\n    public String getValue() {\r\n        return value;\r\n    }\r\n\r\n    public static Category of(String value) {\r\n        for (Category category : values()) {\r\n            if (category.value.equals(value)) {\r\n                return category;\r\n            }\r\n        }\r\n\r\n        throw new IllegalArgumentException(&quot;Unknown category&quot;);\r\n    }\r\n}\r\n\r\nclass CategorizedItems {\r\n    private final Category category;\r\n    private final List&lt;Item&gt; items;\r\n\r\n    public CategorizedItems(Category category, List&lt;Item&gt; items) {\r\n        this.category = category;\r\n        this.items = items;\r\n    }\r\n\r\n    public Category getCategory() {\r\n        return category;\r\n    }\r\n\r\n    public List&lt;Item&gt; getItems() {\r\n        return items;\r\n    }\r\n}\r\nclass Item {\r\n    private final long id;\r\n    private final String name;\r\n    private final long price;\r\n    private final Category category;\r\n\r\n\r\n    public Item(long id, String name, long price, Category category) {\r\n        this.id = id;\r\n        this.name = name;\r\n        this.price = price;\r\n        this.category = category;\r\n    }\r\n\r\n    public long getId() {\r\n        return id;\r\n    }\r\n\r\n    public String getName() {\r\n        return name;\r\n    }\r\n\r\n    public long getPrice() {\r\n        return price;\r\n    }\r\n\r\n    public Category getCategory() {\r\n        return category;\r\n    }\r\n}\r\n``` \r\n\r\nNow you should write methods, for example, static ones in your `ReadOrderDetails`:\r\n\r\n```\r\n    private static JSONArray categorizedItemsToJSONArray(List&lt;CategorizedItems&gt; categorizedItems) {\r\n        JSONArray jsonArray = new JSONArray();\r\n        categorizedItems.forEach(category -&gt; jsonArray.add(toJSONObject(category)));\r\n\r\n        return jsonArray;\r\n    }\r\n\r\n    private static JSONObject toJSONObject(CategorizedItems categorizedItems) {\r\n        JSONObject jsonObject = new JSONObject();\r\n        jsonObject.put(&quot;category&quot;, categorizedItems.getCategory().getValue());\r\n        jsonObject.put(&quot;items&quot;, itemsToJSONArray(categorizedItems.getItems()));\r\n\r\n        return jsonObject;\r\n    }\r\n\r\n    private static JSONArray itemsToJSONArray(List&lt;Item&gt; items) {\r\n        JSONArray jsonArray = new JSONArray();\r\n        items.forEach(item -&gt; jsonArray.add(toJSONObject(item)));\r\n\r\n        return jsonArray;\r\n    }\r\n\r\n    private static JSONObject toJSONObject(Item item) {\r\n        JSONObject jsonObject = new JSONObject();\r\n        jsonObject.put(&quot;item-id&quot;, item.getId());\r\n        jsonObject.put(&quot;name&quot;, item.getName());\r\n        jsonObject.put(&quot;price&quot;, item.getName());\r\n        jsonObject.put(&quot;category&quot;, item.getCategory().getValue());\r\n\r\n        return jsonObject;\r\n    }\r\n\r\n\r\n    private static List&lt;CategorizedItems&gt; categorize(Order order) {\r\n        List&lt;CategorizedItems&gt; categorizedItems = new ArrayList&lt;&gt;();\r\n        for (Category category : Category.values()) {\r\n            categorizedItems.add(\r\n                    new CategorizedItems(\r\n                            category,\r\n                            order.getAllItems()\r\n                                    .stream()\r\n                                    .filter(item -&gt; item.getCategory() == category)\r\n                                    .collect(Collectors.toList())\r\n                    )\r\n            );\r\n        }\r\n\r\n        return categorizedItems;\r\n    }\r\n\r\n    private static Order orderFrom(JSONObject jsonObject) {\r\n        JSONArray itemsJsonArray = (JSONArray) jsonObject.get(&quot;items&quot;);\r\n\r\n        Order order = new Order();\r\n        for (Object jsonArrayMember : itemsJsonArray) {\r\n            JSONObject itemJsonObject = (JSONObject) jsonArrayMember;\r\n            order.addItem(itemFrom(itemJsonObject));\r\n        }\r\n\r\n        return order;\r\n    }\r\n\r\n    private static Item itemFrom(JSONObject jsonObject) {\r\n        long itemId = (Long) jsonObject.get(&quot;item-id&quot;);\r\n        String itemName = (String) jsonObject.get(&quot;name&quot;);\r\n        long itemPrice = (Long) jsonObject.get(&quot;price&quot;);\r\n        Category category = Category.of((String) jsonObject.get(&quot;category&quot;));\r\n\r\n        return new Item(\r\n                itemId,\r\n                itemName,\r\n                itemPrice,\r\n                category\r\n        );\r\n    }\r\n``` \r\n\r\nAfter that you should do the last step. Write a main function like:\r\n\r\n```\r\n    public static void main(String[] args) {\r\n        JSONParser parser = new JSONParser();\r\n\r\n\r\n        try {\r\n            JSONObject orderJsonObject = (JSONObject) parser.parse(new FileReader(&quot;order-details.json&quot;));\r\n            Order order = orderFrom(orderJsonObject);\r\n            List&lt;CategorizedItems&gt; categorizedItems = categorize(order);\r\n            JSONArray categorizedItemsJsonArray = categorizedItemsToJSONArray(categorizedItems);\r\n\r\n            // write categorizedItemsJsonArray to a file here\r\n        } catch(IOException | ParseException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n    }\r\n```\r\n\r\nNow your code is simply readable and clear. You can easily maintain it. I advise you to read about SOLID principals and about code style (I highly recommend Robert Martin. &quot;Clean code&quot;). These topics will help you learn how to write elegant and clear code.\r\n\r\nBesides, `ConcurrentModificationException` is a sign that you do something wrong with collections. In your particular case, I guess (not sure) the problem is modifying the JSONArray while you are iteratting it. Only some of Java collections allow it. \r\n\r\n**EDIT** Fix problem with integers by replacing them with long.\r\n\r\nGood luck with Java :)","title":"Split data in JSON file based on a key value using java","body":"<p>In general, you violated the Single Responsibility principal (SOLID), because your code do two different things together: parse a file and categorize items. You should split these responsibilities.</p>\n<p>One of ways how you do this is to create classes that represents your data. Let's assume that these classes are <code>Item</code>, <code>Category</code>, <code>Order</code> and <code>CategorizedItems</code>. <code>Order</code> is a class that represents your source <code>JSONObject</code> and <code>CategorizedItems</code> - represents your result <code>JSONArray</code>.</p>\n<p>In this case, you should firstly parse the file into these classes and only after that transform them into <code>JSONArray</code>.</p>\n<p>Code sample:</p>\n<p>Data classes:</p>\n<pre><code>class Order {\n    private final List&lt;Item&gt; items = new ArrayList&lt;&gt;();\n\n    public void addItem(Item item) {\n        items.add(item);\n    }\n\n    public List&lt;Item&gt; getAllItems() {\n        return new ArrayList&lt;&gt;(items);\n    }\n}\n\nenum Category {\n    DAIRY(&quot;Dairy&quot;),\n    MEAT(&quot;Meat&quot;);\n\n    private final String value;\n\n    Category(String value) {\n        this.value = value;\n    }\n\n    public String getValue() {\n        return value;\n    }\n\n    public static Category of(String value) {\n        for (Category category : values()) {\n            if (category.value.equals(value)) {\n                return category;\n            }\n        }\n\n        throw new IllegalArgumentException(&quot;Unknown category&quot;);\n    }\n}\n\nclass CategorizedItems {\n    private final Category category;\n    private final List&lt;Item&gt; items;\n\n    public CategorizedItems(Category category, List&lt;Item&gt; items) {\n        this.category = category;\n        this.items = items;\n    }\n\n    public Category getCategory() {\n        return category;\n    }\n\n    public List&lt;Item&gt; getItems() {\n        return items;\n    }\n}\nclass Item {\n    private final long id;\n    private final String name;\n    private final long price;\n    private final Category category;\n\n\n    public Item(long id, String name, long price, Category category) {\n        this.id = id;\n        this.name = name;\n        this.price = price;\n        this.category = category;\n    }\n\n    public long getId() {\n        return id;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public long getPrice() {\n        return price;\n    }\n\n    public Category getCategory() {\n        return category;\n    }\n}\n</code></pre>\n<p>Now you should write methods, for example, static ones in your <code>ReadOrderDetails</code>:</p>\n<pre><code>    private static JSONArray categorizedItemsToJSONArray(List&lt;CategorizedItems&gt; categorizedItems) {\n        JSONArray jsonArray = new JSONArray();\n        categorizedItems.forEach(category -&gt; jsonArray.add(toJSONObject(category)));\n\n        return jsonArray;\n    }\n\n    private static JSONObject toJSONObject(CategorizedItems categorizedItems) {\n        JSONObject jsonObject = new JSONObject();\n        jsonObject.put(&quot;category&quot;, categorizedItems.getCategory().getValue());\n        jsonObject.put(&quot;items&quot;, itemsToJSONArray(categorizedItems.getItems()));\n\n        return jsonObject;\n    }\n\n    private static JSONArray itemsToJSONArray(List&lt;Item&gt; items) {\n        JSONArray jsonArray = new JSONArray();\n        items.forEach(item -&gt; jsonArray.add(toJSONObject(item)));\n\n        return jsonArray;\n    }\n\n    private static JSONObject toJSONObject(Item item) {\n        JSONObject jsonObject = new JSONObject();\n        jsonObject.put(&quot;item-id&quot;, item.getId());\n        jsonObject.put(&quot;name&quot;, item.getName());\n        jsonObject.put(&quot;price&quot;, item.getName());\n        jsonObject.put(&quot;category&quot;, item.getCategory().getValue());\n\n        return jsonObject;\n    }\n\n\n    private static List&lt;CategorizedItems&gt; categorize(Order order) {\n        List&lt;CategorizedItems&gt; categorizedItems = new ArrayList&lt;&gt;();\n        for (Category category : Category.values()) {\n            categorizedItems.add(\n                    new CategorizedItems(\n                            category,\n                            order.getAllItems()\n                                    .stream()\n                                    .filter(item -&gt; item.getCategory() == category)\n                                    .collect(Collectors.toList())\n                    )\n            );\n        }\n\n        return categorizedItems;\n    }\n\n    private static Order orderFrom(JSONObject jsonObject) {\n        JSONArray itemsJsonArray = (JSONArray) jsonObject.get(&quot;items&quot;);\n\n        Order order = new Order();\n        for (Object jsonArrayMember : itemsJsonArray) {\n            JSONObject itemJsonObject = (JSONObject) jsonArrayMember;\n            order.addItem(itemFrom(itemJsonObject));\n        }\n\n        return order;\n    }\n\n    private static Item itemFrom(JSONObject jsonObject) {\n        long itemId = (Long) jsonObject.get(&quot;item-id&quot;);\n        String itemName = (String) jsonObject.get(&quot;name&quot;);\n        long itemPrice = (Long) jsonObject.get(&quot;price&quot;);\n        Category category = Category.of((String) jsonObject.get(&quot;category&quot;));\n\n        return new Item(\n                itemId,\n                itemName,\n                itemPrice,\n                category\n        );\n    }\n</code></pre>\n<p>After that you should do the last step. Write a main function like:</p>\n<pre><code>    public static void main(String[] args) {\n        JSONParser parser = new JSONParser();\n\n\n        try {\n            JSONObject orderJsonObject = (JSONObject) parser.parse(new FileReader(&quot;order-details.json&quot;));\n            Order order = orderFrom(orderJsonObject);\n            List&lt;CategorizedItems&gt; categorizedItems = categorize(order);\n            JSONArray categorizedItemsJsonArray = categorizedItemsToJSONArray(categorizedItems);\n\n            // write categorizedItemsJsonArray to a file here\n        } catch(IOException | ParseException e) {\n            throw new RuntimeException(e);\n        }\n    }\n</code></pre>\n<p>Now your code is simply readable and clear. You can easily maintain it. I advise you to read about SOLID principals and about code style (I highly recommend Robert Martin. &quot;Clean code&quot;). These topics will help you learn how to write elegant and clear code.</p>\n<p>Besides, <code>ConcurrentModificationException</code> is a sign that you do something wrong with collections. In your particular case, I guess (not sure) the problem is modifying the JSONArray while you are iteratting it. Only some of Java collections allow it.</p>\n<p><strong>EDIT</strong> Fix problem with integers by replacing them with long.</p>\n<p>Good luck with Java :)</p>\n"},{"tags":[],"owner":{"account_id":9463219,"reputation":9357,"user_id":7036419,"display_name":"Maurice Perry"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1639735923,"creation_date":1639735923,"answer_id":70391532,"question_id":70389908,"body_markdown":"You can&#39;t alter a collection while iterating it. Try this:\r\n\r\n                    Object[] subOrderArray = subOrders.toArray();\r\n                    for(Object o: subOrderArray) {\r\n                        JSONObject sitem = (JSONObject) o;\r\n","title":"Split data in JSON file based on a key value using java","body":"<p>You can't alter a collection while iterating it. Try this:</p>\n<pre><code>                Object[] subOrderArray = subOrders.toArray();\n                for(Object o: subOrderArray) {\n                    JSONObject sitem = (JSONObject) o;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":25095701,"reputation":11,"user_id":18946901,"display_name":"LeoTaylor"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1651733300,"creation_date":1651733300,"answer_id":72122993,"question_id":70389908,"body_markdown":"Here you want to group the JSON data by category under items array. The code will be very long if you try to get this done in Java. Just try using SPL, an open-source Java package, to do this. You only need one line of code:\r\n\r\n||A|\r\n|:-|:-|\r\n|1|=json(file(&quot;data.json&quot;).read()).items.group(#4;~:items)|\r\n\r\nSPL offers JDBC driver to be invoked by Java. Just store the above SPL script as group.splx and invoke it in a Java application as you call a stored procedure:\r\n```\r\n\r\nClass.forName(&quot;com.esproc.jdbc.InternalDriver&quot;);\r\ncon= DriverManager.getConnection(&quot;jdbc:esproc:local://&quot;);\r\nst = con.prepareCall(&quot;call group()&quot;);\r\nst.execute();\r\n\r\n```","title":"Split data in JSON file based on a key value using java","body":"<p>Here you want to group the JSON data by category under items array. The code will be very long if you try to get this done in Java. Just try using SPL, an open-source Java package, to do this. You only need one line of code:</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th style=\"text-align: left;\"></th>\n<th style=\"text-align: left;\">A</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align: left;\">1</td>\n<td style=\"text-align: left;\">=json(file(&quot;data.json&quot;).read()).items.group(#4;~:items)</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>SPL offers JDBC driver to be invoked by Java. Just store the above SPL script as group.splx and invoke it in a Java application as you call a stored procedure:</p>\n<pre><code>\nClass.forName(&quot;com.esproc.jdbc.InternalDriver&quot;);\ncon= DriverManager.getConnection(&quot;jdbc:esproc:local://&quot;);\nst = con.prepareCall(&quot;call group()&quot;);\nst.execute();\n\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13009011,"reputation":1105,"user_id":9402689,"display_name":"Raymond Choi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664907362,"creation_date":1664907362,"answer_id":73952038,"question_id":70389908,"body_markdown":"Library *Josson* can do the job with a very simple statement.\r\n\r\nhttps://github.com/octomix/josson\r\n\r\nDeserialization\r\n\r\n    Josson josson = Josson.fromJsonString(\r\n        &quot;{&quot; +\r\n        &quot;    \\&quot;items\\&quot;:[&quot; +\r\n        &quot;        {&quot; +\r\n        &quot;            \\&quot;item-id\\&quot;: 123,&quot; +\r\n        &quot;            \\&quot;name\\&quot;: \\&quot;Cheese\\&quot;,&quot; +\r\n        &quot;            \\&quot;price\\&quot;: 8,&quot; +\r\n        &quot;            \\&quot;category\\&quot;: \\&quot;Dairy\\&quot; &quot; +\r\n        &quot;        },&quot; +\r\n        &quot;        {&quot; +\r\n        &quot;            \\&quot;item-id\\&quot;: 124,&quot; +\r\n        &quot;            \\&quot;name\\&quot;: \\&quot;Milk\\&quot;,&quot; +\r\n        &quot;            \\&quot;price\\&quot;: 23,&quot; +\r\n        &quot;            \\&quot;category\\&quot;: \\&quot;Dairy\\&quot;&quot; +\r\n        &quot;        },&quot; +\r\n        &quot;        {&quot; +\r\n        &quot;            \\&quot;item-id\\&quot;: 125,&quot; +\r\n        &quot;            \\&quot;name\\&quot;: \\&quot;Chicken\\&quot;,&quot; +\r\n        &quot;            \\&quot;price\\&quot;: 100,&quot; +\r\n        &quot;            \\&quot;category\\&quot;: \\&quot;Meat\\&quot;&quot; +\r\n        &quot;        },&quot; +\r\n        &quot;        {&quot; +\r\n        &quot;            \\&quot;item-id\\&quot;: 126,&quot; +\r\n        &quot;            \\&quot;name\\&quot;: \\&quot;Fish\\&quot;,&quot; +\r\n        &quot;            \\&quot;price\\&quot;: 45,&quot; +\r\n        &quot;            \\&quot;category\\&quot;: \\&quot;Meat\\&quot;&quot; +\r\n        &quot;        }&quot; +\r\n        &quot;    ]&quot; +\r\n        &quot;}&quot;);\r\n\r\nTransformation\r\n\r\n    JsonNode node = josson.getNode(&quot;items.group(category, items:?)&quot;);\r\n    System.out.println(node.toPrettyString());\r\n    \r\nOutput\r\n\r\n    [ {\r\n      &quot;category&quot; : &quot;Dairy&quot;,\r\n      &quot;items&quot; : [ {\r\n        &quot;item-id&quot; : 123,\r\n        &quot;name&quot; : &quot;Cheese&quot;,\r\n        &quot;price&quot; : 8,\r\n        &quot;category&quot; : &quot;Dairy&quot;\r\n      }, {\r\n        &quot;item-id&quot; : 124,\r\n        &quot;name&quot; : &quot;Milk&quot;,\r\n        &quot;price&quot; : 23,\r\n        &quot;category&quot; : &quot;Dairy&quot;\r\n      } ]\r\n    }, {\r\n      &quot;category&quot; : &quot;Meat&quot;,\r\n      &quot;items&quot; : [ {\r\n        &quot;item-id&quot; : 125,\r\n        &quot;name&quot; : &quot;Chicken&quot;,\r\n        &quot;price&quot; : 100,\r\n        &quot;category&quot; : &quot;Meat&quot;\r\n      }, {\r\n        &quot;item-id&quot; : 126,\r\n        &quot;name&quot; : &quot;Fish&quot;,\r\n        &quot;price&quot; : 45,\r\n        &quot;category&quot; : &quot;Meat&quot;\r\n      } ]\r\n    } ]","title":"Split data in JSON file based on a key value using java","body":"<p>Library <em>Josson</em> can do the job with a very simple statement.</p>\n<p><a href=\"https://github.com/octomix/josson\" rel=\"nofollow noreferrer\">https://github.com/octomix/josson</a></p>\n<p>Deserialization</p>\n<pre><code>Josson josson = Josson.fromJsonString(\n    &quot;{&quot; +\n    &quot;    \\&quot;items\\&quot;:[&quot; +\n    &quot;        {&quot; +\n    &quot;            \\&quot;item-id\\&quot;: 123,&quot; +\n    &quot;            \\&quot;name\\&quot;: \\&quot;Cheese\\&quot;,&quot; +\n    &quot;            \\&quot;price\\&quot;: 8,&quot; +\n    &quot;            \\&quot;category\\&quot;: \\&quot;Dairy\\&quot; &quot; +\n    &quot;        },&quot; +\n    &quot;        {&quot; +\n    &quot;            \\&quot;item-id\\&quot;: 124,&quot; +\n    &quot;            \\&quot;name\\&quot;: \\&quot;Milk\\&quot;,&quot; +\n    &quot;            \\&quot;price\\&quot;: 23,&quot; +\n    &quot;            \\&quot;category\\&quot;: \\&quot;Dairy\\&quot;&quot; +\n    &quot;        },&quot; +\n    &quot;        {&quot; +\n    &quot;            \\&quot;item-id\\&quot;: 125,&quot; +\n    &quot;            \\&quot;name\\&quot;: \\&quot;Chicken\\&quot;,&quot; +\n    &quot;            \\&quot;price\\&quot;: 100,&quot; +\n    &quot;            \\&quot;category\\&quot;: \\&quot;Meat\\&quot;&quot; +\n    &quot;        },&quot; +\n    &quot;        {&quot; +\n    &quot;            \\&quot;item-id\\&quot;: 126,&quot; +\n    &quot;            \\&quot;name\\&quot;: \\&quot;Fish\\&quot;,&quot; +\n    &quot;            \\&quot;price\\&quot;: 45,&quot; +\n    &quot;            \\&quot;category\\&quot;: \\&quot;Meat\\&quot;&quot; +\n    &quot;        }&quot; +\n    &quot;    ]&quot; +\n    &quot;}&quot;);\n</code></pre>\n<p>Transformation</p>\n<pre><code>JsonNode node = josson.getNode(&quot;items.group(category, items:?)&quot;);\nSystem.out.println(node.toPrettyString());\n</code></pre>\n<p>Output</p>\n<pre><code>[ {\n  &quot;category&quot; : &quot;Dairy&quot;,\n  &quot;items&quot; : [ {\n    &quot;item-id&quot; : 123,\n    &quot;name&quot; : &quot;Cheese&quot;,\n    &quot;price&quot; : 8,\n    &quot;category&quot; : &quot;Dairy&quot;\n  }, {\n    &quot;item-id&quot; : 124,\n    &quot;name&quot; : &quot;Milk&quot;,\n    &quot;price&quot; : 23,\n    &quot;category&quot; : &quot;Dairy&quot;\n  } ]\n}, {\n  &quot;category&quot; : &quot;Meat&quot;,\n  &quot;items&quot; : [ {\n    &quot;item-id&quot; : 125,\n    &quot;name&quot; : &quot;Chicken&quot;,\n    &quot;price&quot; : 100,\n    &quot;category&quot; : &quot;Meat&quot;\n  }, {\n    &quot;item-id&quot; : 126,\n    &quot;name&quot; : &quot;Fish&quot;,\n    &quot;price&quot; : 45,\n    &quot;category&quot; : &quot;Meat&quot;\n  } ]\n} ]\n</code></pre>\n"}],"owner":{"account_id":23672740,"reputation":33,"user_id":17699293,"display_name":"Abhijith E A"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1589,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":70390605,"answer_count":4,"score":3,"last_activity_date":1664907362,"creation_date":1639727345,"question_id":70389908,"body_markdown":"I have a json file with which has an array of product items i want to split them based on the category of the item,\r\nThis is my json file looks like,\r\n```\r\n{\r\n    &quot;items&quot;:[\r\n        {\r\n            &quot;item-id&quot;: 123,\r\n            &quot;name&quot;: &quot;Cheese&quot;,\r\n            &quot;price&quot;: 8,\r\n            &quot;category&quot;: &quot;Dairy&quot; \r\n        },\r\n        {\r\n            &quot;item-id&quot;: 124,\r\n            &quot;name&quot;: &quot;Milk&quot;,\r\n            &quot;price&quot;: 23,\r\n            &quot;category&quot;: &quot;Dairy&quot;\r\n        },\r\n        {\r\n            &quot;item-id&quot;: 125,\r\n            &quot;name&quot;: &quot;Chicken&quot;,\r\n            &quot;price&quot;: 100,\r\n            &quot;category&quot;: &quot;Meat&quot;\r\n        },\r\n        {\r\n            &quot;item-id&quot;: 126,\r\n            &quot;name&quot;: &quot;Fish&quot;,\r\n            &quot;price&quot;: 45,\r\n            &quot;category&quot;: &quot;Meat&quot;\r\n        }\r\n    ]\r\n}\r\n\r\n```\r\n\r\ni want to split them like like this,\r\n\r\n```\r\n[\r\n    {\r\n        &quot;category&quot;:&quot;Dairy&quot;,\r\n        &quot;items&quot;:[\r\n            {\r\n                &quot;item-id&quot;: 123,\r\n                &quot;name&quot;: &quot;Cheese&quot;,\r\n                &quot;price&quot;: 8,\r\n                &quot;category&quot;: &quot;Dairy&quot; \r\n            },\r\n            {\r\n                &quot;item-id&quot;: 124,\r\n                &quot;name&quot;: &quot;Milk&quot;,\r\n                &quot;price&quot;: 23,\r\n                &quot;category&quot;: &quot;Dairy&quot;\r\n            }\r\n        ]\r\n    },\r\n    {\r\n        &quot;category&quot;:&quot;Meat&quot;,\r\n        &quot;items&quot;:[\r\n            {\r\n                &quot;item-id&quot;: 125,\r\n                &quot;name&quot;: &quot;Chicken&quot;,\r\n                &quot;price&quot;: 100,\r\n                &quot;category&quot;: &quot;Meat&quot;\r\n            },\r\n            {\r\n                &quot;item-id&quot;: 126,\r\n                &quot;name&quot;: &quot;Fish&quot;,\r\n                &quot;price&quot;: 45,\r\n                &quot;category&quot;: &quot;Meat&quot;\r\n            }\r\n        ]\r\n    }\r\n]\r\n\r\n```\r\n\r\nthis is the code i tried so far but can&#39;t find way to split them like the way i wanted, I&#39;m using java and also i am new to java\r\n```\r\nimport java.io.*; \r\nimport java.util.*;\r\nimport org.json.simple.*;\r\nimport org.json.simple.parser.*;\r\n\r\npublic class ReadOrderDetails {\r\n\r\n\t@SuppressWarnings(&quot;unused&quot;)\r\n\tpublic static void main(String[] args) {\r\n\t\tJSONParser parser = new JSONParser();\r\n\t\tJSONObject subOrder = new JSONObject();\r\n\t\tJSONArray  gitems = new JSONArray();\r\n\t\tJSONArray  subOrders = new JSONArray();\r\n\t\t\r\n\t\ttry {\r\n\t\t\tObject obj = parser.parse(new FileReader(&quot;order-details.json&quot;));\r\n\t\t\tJSONObject jsonObject = (JSONObject)obj;\r\n\t\t\tString orderId = (String)jsonObject.get(&quot;orderId&quot;);\r\n\t\t\tJSONArray items = (JSONArray)jsonObject.get(&quot;items&quot;);\r\n\t\t\t@SuppressWarnings(&quot;rawtypes&quot;)\r\n\t\t\tIterator iterator = items.iterator();\r\n\t\t\tSystem.out.println(&quot;Order Id: &quot; + orderId);\r\n\t\t\twhile(iterator.hasNext()) {\r\n\t\t\t\tJSONObject item = (JSONObject)iterator.next();\r\n\t\t\t\tif(subOrders.isEmpty()) {\r\n\t\t\t\t\tsubOrder.put(&quot;category&quot;, item.get(&quot;category&quot;));\r\n\t\t\t\t\tgitems.add(item);\r\n\t\t\t\t\tsubOrder.put(&quot;items&quot;, gitems);\r\n\t\t\t\t\tsubOrders.add(subOrder);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tIterator subOrdersIterator = subOrders.iterator();\r\n\t\t\t\t\tfor(int i=0; i&lt;subOrders.size(); i++) {\r\n\t\t\t\t\t\tJSONObject sitem = (JSONObject) subOrdersIterator.next();\r\n\t\t\t\t\t\tif(sitem.get(&quot;category&quot;) == item.get(&quot;category&quot;)) {\r\n\t\t\t\t\t\t\tgitems.add(item);\r\n\t\t\t\t\t\t\tsubOrder.put(&quot;items&quot;, gitems);\r\n\t\t\t\t\t\t\tsubOrders.add(subOrder);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tsubOrder.put(&quot;category&quot;, item.get(&quot;category&quot;));\r\n\t\t\t\t\t\t\tgitems.add(item);\r\n\t\t\t\t\t\t\tsubOrder.put(&quot;items&quot;, gitems);\r\n\t\t\t\t\t\t\tsubOrders.add(subOrder);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t} catch(Exception e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t\tSystem.out.println(subOrders);\r\n\t}\r\n\r\n}\r\n\r\n\r\n\r\n```\r\n\r\nand also i&#39;m getting an error at **java.util.ConcurrentModificationException** but that&#39;s not my main question, what i really wnated a way to split them i tried couple of things didn&#39;t working","title":"Split data in JSON file based on a key value using java","body":"<p>I have a json file with which has an array of product items i want to split them based on the category of the item,\nThis is my json file looks like,</p>\n<pre><code>{\n    &quot;items&quot;:[\n        {\n            &quot;item-id&quot;: 123,\n            &quot;name&quot;: &quot;Cheese&quot;,\n            &quot;price&quot;: 8,\n            &quot;category&quot;: &quot;Dairy&quot; \n        },\n        {\n            &quot;item-id&quot;: 124,\n            &quot;name&quot;: &quot;Milk&quot;,\n            &quot;price&quot;: 23,\n            &quot;category&quot;: &quot;Dairy&quot;\n        },\n        {\n            &quot;item-id&quot;: 125,\n            &quot;name&quot;: &quot;Chicken&quot;,\n            &quot;price&quot;: 100,\n            &quot;category&quot;: &quot;Meat&quot;\n        },\n        {\n            &quot;item-id&quot;: 126,\n            &quot;name&quot;: &quot;Fish&quot;,\n            &quot;price&quot;: 45,\n            &quot;category&quot;: &quot;Meat&quot;\n        }\n    ]\n}\n\n</code></pre>\n<p>i want to split them like like this,</p>\n<pre><code>[\n    {\n        &quot;category&quot;:&quot;Dairy&quot;,\n        &quot;items&quot;:[\n            {\n                &quot;item-id&quot;: 123,\n                &quot;name&quot;: &quot;Cheese&quot;,\n                &quot;price&quot;: 8,\n                &quot;category&quot;: &quot;Dairy&quot; \n            },\n            {\n                &quot;item-id&quot;: 124,\n                &quot;name&quot;: &quot;Milk&quot;,\n                &quot;price&quot;: 23,\n                &quot;category&quot;: &quot;Dairy&quot;\n            }\n        ]\n    },\n    {\n        &quot;category&quot;:&quot;Meat&quot;,\n        &quot;items&quot;:[\n            {\n                &quot;item-id&quot;: 125,\n                &quot;name&quot;: &quot;Chicken&quot;,\n                &quot;price&quot;: 100,\n                &quot;category&quot;: &quot;Meat&quot;\n            },\n            {\n                &quot;item-id&quot;: 126,\n                &quot;name&quot;: &quot;Fish&quot;,\n                &quot;price&quot;: 45,\n                &quot;category&quot;: &quot;Meat&quot;\n            }\n        ]\n    }\n]\n\n</code></pre>\n<p>this is the code i tried so far but can't find way to split them like the way i wanted, I'm using java and also i am new to java</p>\n<pre><code>import java.io.*; \nimport java.util.*;\nimport org.json.simple.*;\nimport org.json.simple.parser.*;\n\npublic class ReadOrderDetails {\n\n    @SuppressWarnings(&quot;unused&quot;)\n    public static void main(String[] args) {\n        JSONParser parser = new JSONParser();\n        JSONObject subOrder = new JSONObject();\n        JSONArray  gitems = new JSONArray();\n        JSONArray  subOrders = new JSONArray();\n        \n        try {\n            Object obj = parser.parse(new FileReader(&quot;order-details.json&quot;));\n            JSONObject jsonObject = (JSONObject)obj;\n            String orderId = (String)jsonObject.get(&quot;orderId&quot;);\n            JSONArray items = (JSONArray)jsonObject.get(&quot;items&quot;);\n            @SuppressWarnings(&quot;rawtypes&quot;)\n            Iterator iterator = items.iterator();\n            System.out.println(&quot;Order Id: &quot; + orderId);\n            while(iterator.hasNext()) {\n                JSONObject item = (JSONObject)iterator.next();\n                if(subOrders.isEmpty()) {\n                    subOrder.put(&quot;category&quot;, item.get(&quot;category&quot;));\n                    gitems.add(item);\n                    subOrder.put(&quot;items&quot;, gitems);\n                    subOrders.add(subOrder);\n                } else {\n                    Iterator subOrdersIterator = subOrders.iterator();\n                    for(int i=0; i&lt;subOrders.size(); i++) {\n                        JSONObject sitem = (JSONObject) subOrdersIterator.next();\n                        if(sitem.get(&quot;category&quot;) == item.get(&quot;category&quot;)) {\n                            gitems.add(item);\n                            subOrder.put(&quot;items&quot;, gitems);\n                            subOrders.add(subOrder);\n                        } else {\n                            subOrder.put(&quot;category&quot;, item.get(&quot;category&quot;));\n                            gitems.add(item);\n                            subOrder.put(&quot;items&quot;, gitems);\n                            subOrders.add(subOrder);\n                        }\n                    }\n                }\n                \n            }\n        } catch(Exception e) {\n            e.printStackTrace();\n        }\n        System.out.println(subOrders);\n    }\n\n}\n\n\n\n</code></pre>\n<p>and also i'm getting an error at <strong>java.util.ConcurrentModificationException</strong> but that's not my main question, what i really wnated a way to split them i tried couple of things didn't working</p>\n"},{"tags":["java","spring-data-jpa","consumer"],"comments":[{"owner":{"account_id":2338491,"reputation":5842,"user_id":2050306,"accept_rate":88,"display_name":"robert"},"score":1,"creation_date":1664905131,"post_id":73951638,"comment_id":130575253,"body_markdown":"Can you share what is in your `EventRepository` class? Maybe a simple `@Autowired` is missing.","body":"Can you share what is in your <code>EventRepository</code> class? Maybe a simple <code>@Autowired</code> is missing."},{"owner":{"account_id":4678213,"reputation":2831,"user_id":3787777,"accept_rate":92,"display_name":"Coderino Javarino"},"score":0,"creation_date":1664905295,"post_id":73951638,"comment_id":130575301,"body_markdown":"EventRepository is just some field, not autowired","body":"EventRepository is just some field, not autowired"},{"owner":{"account_id":19003227,"reputation":57,"user_id":13911459,"display_name":"gilvictor"},"score":0,"creation_date":1664905298,"post_id":73951638,"comment_id":130575304,"body_markdown":"i updated the question with more details!","body":"i updated the question with more details!"},{"owner":{"account_id":15974771,"reputation":1023,"user_id":11527968,"display_name":"Jimmy"},"score":0,"creation_date":1664907503,"post_id":73951638,"comment_id":130575891,"body_markdown":"`Autowire` the `EventConsumer` component as well along with `EventRepository` repository","body":"<code>Autowire</code> the <code>EventConsumer</code> component as well along with <code>EventRepository</code> repository"}],"answers":[{"tags":[],"owner":{"account_id":1408815,"reputation":2002,"user_id":1811348,"accept_rate":88,"display_name":"swapyonubuntu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664906298,"creation_date":1664905333,"answer_id":73951695,"question_id":73951638,"body_markdown":"Edit 1:\r\n\r\nalso you can try adding \r\n`@EnableJpaRepositories(basePackages=&quot;com.victor.simple.events&quot;)` or configure it your way so that expected repositories are scanned.\r\n\r\n----\r\n\r\n\r\nDid you missing autowiring EventRepository bean in EventConsumer class?\r\n\r\nCan you try like this:\r\n\r\n```\r\n@Autowired\r\nEventRepository eventRepository;\r\n```","title":"Spring Boot JPA - How to use JPA from a Consumer&lt;T&gt;","body":"<p>Edit 1:</p>\n<p>also you can try adding\n<code>@EnableJpaRepositories(basePackages=&quot;com.victor.simple.events&quot;)</code> or configure it your way so that expected repositories are scanned.</p>\n<hr />\n<p>Did you missing autowiring EventRepository bean in EventConsumer class?</p>\n<p>Can you try like this:</p>\n<pre><code>@Autowired\nEventRepository eventRepository;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13170666,"reputation":78669,"user_id":9513184,"display_name":"Unmitigated"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1664906561,"creation_date":1664906561,"answer_id":73951898,"question_id":73951638,"body_markdown":"You need to `Autowire` the `EventConsumer` in the `EventController`. If you manually instantiate it (as you are currently doing), the `Autowired` dependencies cannot be set by Spring.\r\n\r\n```java\r\n@Autowired\r\nprivate EventConsumer eventConsumer;\r\n```","title":"Spring Boot JPA - How to use JPA from a Consumer&lt;T&gt;","body":"<p>You need to <code>Autowire</code> the <code>EventConsumer</code> in the <code>EventController</code>. If you manually instantiate it (as you are currently doing), the <code>Autowired</code> dependencies cannot be set by Spring.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Autowired\nprivate EventConsumer eventConsumer;\n</code></pre>\n"}],"owner":{"account_id":19003227,"reputation":57,"user_id":13911459,"display_name":"gilvictor"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":188,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73951898,"answer_count":2,"score":1,"last_activity_date":1664907031,"creation_date":1664904964,"question_id":73951638,"body_markdown":"I am working on an spring boot application that listens to some events through a consumer.\r\n\r\nThe structure of my app is as follows:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nEverything seems to work fine except from when an event is emmited and therefore redirected to the consumer class, i can react to the consumer event but i cannot communicate from there to the ddbb. \r\n\r\nNext is my Event entity:\r\n```\r\npackage com.victor.simple.events.entities;\r\n\r\nimport javax.persistence.Entity;\r\nimport javax.persistence.Id;\r\n\r\n@Entity\r\npublic class Event {\r\n    @Id\r\n    private String id;\r\n    private String channel;\r\n    private String chaincode;\r\n\r\n    private String event;\r\n    private String iteration;\r\n    private String hash;\r\n    private String createdAt;\r\n    private String eventType;\r\n    private String tenantID;\r\n\r\n    @Override\r\n    public String toString() {\r\n        return &quot;Event{&quot; +\r\n                &quot;id=&#39;&quot; + id + &#39;\\&#39;&#39; +\r\n                &quot;, channel=&#39;&quot; + channel + &#39;\\&#39;&#39; +\r\n                &quot;, chaincode=&#39;&quot; + chaincode + &#39;\\&#39;&#39; +\r\n                &quot;, event=&#39;&quot; + event + &#39;\\&#39;&#39; +\r\n                &quot;, iteration=&#39;&quot; + iteration + &#39;\\&#39;&#39; +\r\n                &quot;, hash=&#39;&quot; + hash + &#39;\\&#39;&#39; +\r\n                &quot;, createdAt=&#39;&quot; + createdAt + &#39;\\&#39;&#39; +\r\n                &quot;, eventType=&#39;&quot; + eventType + &#39;\\&#39;&#39; +\r\n                &quot;, tenantID=&#39;&quot; + tenantID + &#39;\\&#39;&#39; +\r\n                &#39;}&#39;;\r\n    }\r\n\r\n    public String getId() {\r\n        return id;\r\n    }\r\n\r\n    public void setId(String id) {\r\n        this.id = id;\r\n    }\r\n\r\n    public String getChannel() {\r\n        return channel;\r\n    }\r\n\r\n    public void setChannel(String channel) {\r\n        this.channel = channel;\r\n    }\r\n\r\n    public String getChaincode() {\r\n        return chaincode;\r\n    }\r\n\r\n    public void setChaincode(String chaincode) {\r\n        this.chaincode = chaincode;\r\n    }\r\n\r\n    public String getEvent() {\r\n        return event;\r\n    }\r\n\r\n    public void setEvent(String event) {\r\n        this.event = event;\r\n    }\r\n\r\n    public String getIteration() {\r\n        return iteration;\r\n    }\r\n\r\n    public void setIteration(String iteration) {\r\n        this.iteration = iteration;\r\n    }\r\n\r\n    public String getHash() {\r\n        return hash;\r\n    }\r\n\r\n    public void setHash(String hash) {\r\n        this.hash = hash;\r\n    }\r\n\r\n    public String getCreatedAt() {\r\n        return createdAt;\r\n    }\r\n\r\n    public void setCreatedAt(String createdAt) {\r\n        this.createdAt = createdAt;\r\n    }\r\n\r\n    public String getEventType() {\r\n        return eventType;\r\n    }\r\n\r\n    public void setEventType(String eventType) {\r\n        this.eventType = eventType;\r\n    }\r\n\r\n    public String getTenantID() {\r\n        return tenantID;\r\n    }\r\n\r\n    public void setTenantID(String tenantID) {\r\n        this.tenantID = tenantID;\r\n    }\r\n\r\n}\r\n\r\n```\r\n\r\nNext is my EventRepository:\r\n\r\n```\r\npublic interface EventRepository extends JpaRepository&lt;Event,String&gt; {\r\n}\r\n```\r\nNext is my EventController:\r\n\r\n```\r\n@Slf4j\r\n@RequiredArgsConstructor\r\n@RestController\r\npublic class EventController {\r\n\r\n    @Autowired\r\n    EventRepository repository;\r\n    private final Gateway networkService;\r\n\r\n    @Value(&quot;${fabric.channel.contract}&quot;)\r\n    private String contractName;\r\n\r\n    @Value(&quot;${fabric.channel.name}&quot;)\r\n    private String channelName;\r\n\r\n    @PostConstruct\r\n    private void registerEvent() throws ContractException{\r\n        System.out.println(&quot;PostConstruct registerEvent() execution start&quot;);\r\n        Network network = networkService.getNetwork(&quot;corechannel&quot;);\r\n        Contract contract = network.getContract(&quot;sample-node-event-victor&quot;);\r\n\r\n\r\n        //Capture contract events\r\n        Consumer&lt;ContractEvent&gt; eventConsumer = new EventConsumer();\r\n        contract.addContractListener(eventConsumer);\r\n\r\n    }\r\n\r\n\r\n}\r\n```\r\n\r\nNext is my consumer class:\r\n\r\n```\r\n\r\n@Component\r\npublic class EventConsumer implements Consumer&lt;ContractEvent&gt; {\r\n\r\n    @Autowired\r\n    EventRepository repository;\r\n\r\n    @Override\r\n    public void accept(ContractEvent contractEvent) {\r\n        System.out.println(&quot;Leyendo eventos&quot;);\r\n        System.out.println(&quot;repo es: &quot;+repository);\r\n        //saveEvent();\r\n    }\r\n\r\n    void saveEvent() {\r\n\r\n        Event event=new Event();\r\n        event.setId(&quot;1&quot;);\r\n        repository.save(event);\r\n\r\n    }\r\n}\r\n```\r\n\r\nAny ideas? When i receive the event the sout(&quot;Leyendo eventos&quot;) works fine. But then it says that the repository is null..\r\n\r\n\r\nI also tried by some suggestion to see if the bean was recognized and the test was successfull:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/LyFUP.png","title":"Spring Boot JPA - How to use JPA from a Consumer&lt;T&gt;","body":"<p>I am working on an spring boot application that listens to some events through a consumer.</p>\n<p>The structure of my app is as follows:</p>\n<p><a href=\"https://i.stack.imgur.com/LyFUP.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/LyFUP.png\" alt=\"enter image description here\" /></a></p>\n<p>Everything seems to work fine except from when an event is emmited and therefore redirected to the consumer class, i can react to the consumer event but i cannot communicate from there to the ddbb.</p>\n<p>Next is my Event entity:</p>\n<pre><code>package com.victor.simple.events.entities;\n\nimport javax.persistence.Entity;\nimport javax.persistence.Id;\n\n@Entity\npublic class Event {\n    @Id\n    private String id;\n    private String channel;\n    private String chaincode;\n\n    private String event;\n    private String iteration;\n    private String hash;\n    private String createdAt;\n    private String eventType;\n    private String tenantID;\n\n    @Override\n    public String toString() {\n        return &quot;Event{&quot; +\n                &quot;id='&quot; + id + '\\'' +\n                &quot;, channel='&quot; + channel + '\\'' +\n                &quot;, chaincode='&quot; + chaincode + '\\'' +\n                &quot;, event='&quot; + event + '\\'' +\n                &quot;, iteration='&quot; + iteration + '\\'' +\n                &quot;, hash='&quot; + hash + '\\'' +\n                &quot;, createdAt='&quot; + createdAt + '\\'' +\n                &quot;, eventType='&quot; + eventType + '\\'' +\n                &quot;, tenantID='&quot; + tenantID + '\\'' +\n                '}';\n    }\n\n    public String getId() {\n        return id;\n    }\n\n    public void setId(String id) {\n        this.id = id;\n    }\n\n    public String getChannel() {\n        return channel;\n    }\n\n    public void setChannel(String channel) {\n        this.channel = channel;\n    }\n\n    public String getChaincode() {\n        return chaincode;\n    }\n\n    public void setChaincode(String chaincode) {\n        this.chaincode = chaincode;\n    }\n\n    public String getEvent() {\n        return event;\n    }\n\n    public void setEvent(String event) {\n        this.event = event;\n    }\n\n    public String getIteration() {\n        return iteration;\n    }\n\n    public void setIteration(String iteration) {\n        this.iteration = iteration;\n    }\n\n    public String getHash() {\n        return hash;\n    }\n\n    public void setHash(String hash) {\n        this.hash = hash;\n    }\n\n    public String getCreatedAt() {\n        return createdAt;\n    }\n\n    public void setCreatedAt(String createdAt) {\n        this.createdAt = createdAt;\n    }\n\n    public String getEventType() {\n        return eventType;\n    }\n\n    public void setEventType(String eventType) {\n        this.eventType = eventType;\n    }\n\n    public String getTenantID() {\n        return tenantID;\n    }\n\n    public void setTenantID(String tenantID) {\n        this.tenantID = tenantID;\n    }\n\n}\n\n</code></pre>\n<p>Next is my EventRepository:</p>\n<pre><code>public interface EventRepository extends JpaRepository&lt;Event,String&gt; {\n}\n</code></pre>\n<p>Next is my EventController:</p>\n<pre><code>@Slf4j\n@RequiredArgsConstructor\n@RestController\npublic class EventController {\n\n    @Autowired\n    EventRepository repository;\n    private final Gateway networkService;\n\n    @Value(&quot;${fabric.channel.contract}&quot;)\n    private String contractName;\n\n    @Value(&quot;${fabric.channel.name}&quot;)\n    private String channelName;\n\n    @PostConstruct\n    private void registerEvent() throws ContractException{\n        System.out.println(&quot;PostConstruct registerEvent() execution start&quot;);\n        Network network = networkService.getNetwork(&quot;corechannel&quot;);\n        Contract contract = network.getContract(&quot;sample-node-event-victor&quot;);\n\n\n        //Capture contract events\n        Consumer&lt;ContractEvent&gt; eventConsumer = new EventConsumer();\n        contract.addContractListener(eventConsumer);\n\n    }\n\n\n}\n</code></pre>\n<p>Next is my consumer class:</p>\n<pre><code>\n@Component\npublic class EventConsumer implements Consumer&lt;ContractEvent&gt; {\n\n    @Autowired\n    EventRepository repository;\n\n    @Override\n    public void accept(ContractEvent contractEvent) {\n        System.out.println(&quot;Leyendo eventos&quot;);\n        System.out.println(&quot;repo es: &quot;+repository);\n        //saveEvent();\n    }\n\n    void saveEvent() {\n\n        Event event=new Event();\n        event.setId(&quot;1&quot;);\n        repository.save(event);\n\n    }\n}\n</code></pre>\n<p>Any ideas? When i receive the event the sout(&quot;Leyendo eventos&quot;) works fine. But then it says that the repository is null..</p>\n<p>I also tried by some suggestion to see if the bean was recognized and the test was successfull:</p>\n<p><a href=\"https://i.stack.imgur.com/LyFUP.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/LyFUP.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","exception"],"comments":[{"owner":{"account_id":1937019,"reputation":4428,"user_id":1744230,"accept_rate":100,"display_name":"QBrute"},"score":0,"creation_date":1664900829,"post_id":73950754,"comment_id":130573833,"body_markdown":"Regarding the &quot;asap&quot;: [Under what circumstances may I add &quot;urgent&quot; or other similar phrases to my question, in order to obtain faster answers?](https://meta.stackoverflow.com/questions/326569/under-what-circumstances-may-i-add-urgent-or-other-similar-phrases-to-my-quest)","body":"Regarding the &quot;asap&quot;: <a href=\"https://meta.stackoverflow.com/questions/326569/under-what-circumstances-may-i-add-urgent-or-other-similar-phrases-to-my-quest\">Under what circumstances may I add &quot;urgent&quot; or other similar phrases to my question, in order to obtain faster answers?</a>"}],"answers":[{"tags":[],"owner":{"account_id":401843,"reputation":89788,"user_id":768644,"display_name":"rzwitserloot"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1664902263,"creation_date":1664902263,"answer_id":73951173,"question_id":73950754,"body_markdown":"All `sc.next` variants (except `sc.nextLine()` which is weird) work in the exact same way: They fetch __the next__ (hence the name) token from the stream of data, transforms it into what you asked for (`.nextInt()` transforms to an int, etc), and returns it. If the transformation cannot be done, for example, `&quot;aaa&quot;` cannot be transformed to an int, you get an exception.\r\n\r\nCrucially, if a conversion cannot be performed, __the token is not consumed__.\r\n\r\nIn other words:\r\n\r\n```java\r\nScanner s = new Scanner(&quot;aaa bbb 1234&quot;);\r\ntry {\r\n  s.nextInt(); // crashes, &#39;aaa&#39; is not an int\r\n} catch (InputMismatchException e) {\r\n  System.out.println(&quot;First token is not an int&quot;);\r\n}\r\n\r\nSystem.out.println(s.next()); // prints &#39;aaa&#39;\r\n```\r\n\r\nIn other words, the code you pasted &#39;works&#39; by using the fact that if a `.nextLong()` calls doesn&#39;t return normally but throws an exception instead, the token is still there. `.next()` reads a token and just returns it without attempting to transform it into a long or whatnot.\r\n\r\nThus, your code has the following behaviour:\r\n\r\n* If the token can be read fine but cannot be converted to a long, the code works as designed: That `sc.next()` call in the catch block will fetch the token and stuffs it into the exceptions&#39; message.\r\n* If the token _cannot_ be read, for example because the file is on a USB disk and you pulled the USB stick out halfway through, the `nextLong()` call fails, goes to the catch block, which then __fails again__, and now you get an exception in your exception block. This is bad style.\r\n\r\nThus, does the code work? Barely. It&#39;s not nice code. The error message is unclear, and if you want to do this, you should be catching `InputMismatchException`, not all exceptions.\r\n","title":"How sc.next() printed the value of the long that I entered inside try block","body":"<p>All <code>sc.next</code> variants (except <code>sc.nextLine()</code> which is weird) work in the exact same way: They fetch <strong>the next</strong> (hence the name) token from the stream of data, transforms it into what you asked for (<code>.nextInt()</code> transforms to an int, etc), and returns it. If the transformation cannot be done, for example, <code>&quot;aaa&quot;</code> cannot be transformed to an int, you get an exception.</p>\n<p>Crucially, if a conversion cannot be performed, <strong>the token is not consumed</strong>.</p>\n<p>In other words:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Scanner s = new Scanner(&quot;aaa bbb 1234&quot;);\ntry {\n  s.nextInt(); // crashes, 'aaa' is not an int\n} catch (InputMismatchException e) {\n  System.out.println(&quot;First token is not an int&quot;);\n}\n\nSystem.out.println(s.next()); // prints 'aaa'\n</code></pre>\n<p>In other words, the code you pasted 'works' by using the fact that if a <code>.nextLong()</code> calls doesn't return normally but throws an exception instead, the token is still there. <code>.next()</code> reads a token and just returns it without attempting to transform it into a long or whatnot.</p>\n<p>Thus, your code has the following behaviour:</p>\n<ul>\n<li>If the token can be read fine but cannot be converted to a long, the code works as designed: That <code>sc.next()</code> call in the catch block will fetch the token and stuffs it into the exceptions' message.</li>\n<li>If the token <em>cannot</em> be read, for example because the file is on a USB disk and you pulled the USB stick out halfway through, the <code>nextLong()</code> call fails, goes to the catch block, which then <strong>fails again</strong>, and now you get an exception in your exception block. This is bad style.</li>\n</ul>\n<p>Thus, does the code work? Barely. It's not nice code. The error message is unclear, and if you want to do this, you should be catching <code>InputMismatchException</code>, not all exceptions.</p>\n"}],"owner":{"account_id":26472841,"reputation":1,"user_id":20113201,"display_name":"IASSCybercmd"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":51,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1664906341,"creation_date":1664900180,"question_id":73950754,"body_markdown":"```java\r\nimport java.util.*;\r\n\r\npublic class User {\r\n  public static void main(String[] args) {\r\n\r\n    Scanner sc = new Scanner(System.in);\r\n    int t=sc.nextInt();\r\n\r\n    for(int i=0;i&lt;t;i++)\r\n    {\r\n\r\n        try\r\n        {\r\n            long x=sc.nextLong();\r\n            System.out.println(x+&quot; can be fitted in:&quot;);\r\n            if(x&gt;=-128 &amp;&amp; x&lt;=127)System.out.println(&quot;* byte&quot;);\r\n            if(x&gt;=(Math.pow(-2,15)) &amp;&amp; x&lt;=(Math.pow(2,15))-1)System.out.println(&quot;* short&quot;);\r\n            if(x&gt;=(Math.pow(-2,31)) &amp;&amp; x&lt;=(Math.pow(2,31))-1)System.out.println(&quot;* int&quot;);\r\n            if(x&gt;=(Math.pow(-2,63)) &amp;&amp; x&lt;=(Math.pow(2,63))-1)System.out.println(&quot;* long&quot;);\r\n        }\r\n        catch(Exception e)\r\n        {\r\n            System.out.println(sc.next()+&quot; can&#39;t be fitted anywhere.&quot;);\r\n        }\r\n\r\n    }\r\n    sc.close();\r\n  }\r\n}\r\n```\r\n\r\nSo I can&#39;t understand that how sc.next() printed the value that I entered in the sc.nextLong() \r\n\r\nTo know more about the problem view the link.\r\nhttps://www.hackerrank.com/challenges/java-datatypes/problem\r\n\r\n\r\n","title":"How sc.next() printed the value of the long that I entered inside try block","body":"<pre class=\"lang-java prettyprint-override\"><code>import java.util.*;\n\npublic class User {\n  public static void main(String[] args) {\n\n    Scanner sc = new Scanner(System.in);\n    int t=sc.nextInt();\n\n    for(int i=0;i&lt;t;i++)\n    {\n\n        try\n        {\n            long x=sc.nextLong();\n            System.out.println(x+&quot; can be fitted in:&quot;);\n            if(x&gt;=-128 &amp;&amp; x&lt;=127)System.out.println(&quot;* byte&quot;);\n            if(x&gt;=(Math.pow(-2,15)) &amp;&amp; x&lt;=(Math.pow(2,15))-1)System.out.println(&quot;* short&quot;);\n            if(x&gt;=(Math.pow(-2,31)) &amp;&amp; x&lt;=(Math.pow(2,31))-1)System.out.println(&quot;* int&quot;);\n            if(x&gt;=(Math.pow(-2,63)) &amp;&amp; x&lt;=(Math.pow(2,63))-1)System.out.println(&quot;* long&quot;);\n        }\n        catch(Exception e)\n        {\n            System.out.println(sc.next()+&quot; can't be fitted anywhere.&quot;);\n        }\n\n    }\n    sc.close();\n  }\n}\n</code></pre>\n<p>So I can't understand that how sc.next() printed the value that I entered in the sc.nextLong()</p>\n<p>To know more about the problem view the link.\n<a href=\"https://www.hackerrank.com/challenges/java-datatypes/problem\" rel=\"nofollow noreferrer\">https://www.hackerrank.com/challenges/java-datatypes/problem</a></p>\n"},{"tags":["java","arrays"],"comments":[{"owner":{"account_id":6964901,"reputation":10403,"user_id":5343269,"accept_rate":45,"display_name":"11thdimension"},"score":1,"creation_date":1461207543,"post_id":36758756,"comment_id":61097018,"body_markdown":"`[row+2]` and `[row+3]` are the cause of the errors, set the loop condition to `row &lt; a.length -3`","body":"<code>[row+2]</code> and <code>[row+3]</code> are the cause of the errors, set the loop condition to <code>row &lt; a.length -3</code>"},{"owner":{"account_id":5897936,"reputation":8081,"user_id":4642485,"accept_rate":73,"display_name":"Chris Gong"},"score":0,"creation_date":1461249248,"post_id":36758756,"comment_id":61122644,"body_markdown":"The comment above is correct, except in my answer I do row &lt;= a.length - 4 to fix it instead but both are acceptable.","body":"The comment above is correct, except in my answer I do row &lt;= a.length - 4 to fix it instead but both are acceptable."}],"answers":[{"tags":[],"owner":{"account_id":4220038,"reputation":315,"user_id":3455033,"display_name":"k1133"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1461211964,"creation_date":1461208752,"answer_id":36758986,"question_id":36758756,"body_markdown":"As a rule of thumb , always put debug points to see why you are getting exception/error. \r\n\r\nThe issue here is your outer loop runs from 0 to row-1 . But inside in inner loop you are using [row+2] and [row+3] and [row+1] . Now when the outer loop goes to row-2 iteration , you will get a out of bound exception. \r\n\r\nCan post the code here , but if you understand this , you should be able to solve it.  \r\n\r\n\r\n(EDIT) : example as asked in comment.\r\n\r\nassume you  have a 2D array A[][]of size 10X10 .\r\nNow if the current loop is at A[4][4] or (A[row][col])   : \r\nleft element : A[4][3] or (A[row][col-1])   // here we are  at same row but (column -1) as we want the left element.\r\ntop-right element :  A[3][5] or ((A[row-1][col+1])   //  here we are going to (4-1) row as we are interested in above row and (4+1)column as we want right element. \r\nbottom-left:  A[5][3] (A[row+1][col-1]) ...\r\n\r\nNow the two consecutive bottom-left elements will be (A[row+1][col-1]) and (A[row+2][col-2]).\r\n\r\nTry visualizing it  by drawing a 2D array and naming each cell in terms of A[i][j]. ","title":"java 2d array comparing UPDATED","body":"<p>As a rule of thumb , always put debug points to see why you are getting exception/error. </p>\n\n<p>The issue here is your outer loop runs from 0 to row-1 . But inside in inner loop you are using [row+2] and [row+3] and [row+1] . Now when the outer loop goes to row-2 iteration , you will get a out of bound exception. </p>\n\n<p>Can post the code here , but if you understand this , you should be able to solve it.  </p>\n\n<p>(EDIT) : example as asked in comment.</p>\n\n<p>assume you  have a 2D array A[][]of size 10X10 .\nNow if the current loop is at A[4][4] or (A[row][col])   : \nleft element : A[4][3] or (A[row][col-1])   // here we are  at same row but (column -1) as we want the left element.\ntop-right element :  A[3][5] or ((A[row-1][col+1])   //  here we are going to (4-1) row as we are interested in above row and (4+1)column as we want right element. \nbottom-left:  A[5][3] (A[row+1][col-1]) ...</p>\n\n<p>Now the two consecutive bottom-left elements will be (A[row+1][col-1]) and (A[row+2][col-2]).</p>\n\n<p>Try visualizing it  by drawing a 2D array and naming each cell in terms of A[i][j]. </p>\n"},{"tags":[],"owner":{"account_id":5897936,"reputation":8081,"user_id":4642485,"accept_rate":73,"display_name":"Chris Gong"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1461221488,"creation_date":1461221104,"answer_id":36761639,"question_id":36758756,"body_markdown":"Well one problem I noticed in the first nested for loop is this line of code,\r\n\r\n    for ( int row = 0; row &lt;= a.length - 3 ; row++) \r\n\r\nThe way you have it now, the row variable is going to be incremented with each iteration of the outer for loop. However, with how you&#39;re executing your program, the condition should be `row &lt;= a.length - 4` and here&#39;s why. Suppose you had a four by four 2D array. The nested for loop will go through one normal iteration of the inner loop, which actually checks every single column for possible matches of four consecutive matching numbers in a column. Here&#39;s what it looks like when actually running the program starting at the outer for loop and row = 0,\r\n\r\nIteration One of the inner for loop: \r\n\r\n    if (a[0][0] == a[1][0] &amp;&amp; a[2][0] == a[0][0] &amp;&amp; a[3][0] == a[0][0])\r\nIteration Two of the inner for loop: \r\n\r\n    if (a[0][1] == a[1][1] &amp;&amp; a[2][1] == a[0][1] &amp;&amp; a[3][1] == a[0][1])\r\nIteration Three of the inner for loop: \r\n\r\n    if (a[0][2] == a[1][2] &amp;&amp; a[2][2] == a[0][2] &amp;&amp; a[3][2] == a[0][2])\r\nLast Iteration of the inner for loop: \r\n\r\n    if (a[0][0] == a[1][3] &amp;&amp; a[2][3] == a[0][3] &amp;&amp; a[3][0] == a[0][3])\r\n\r\nOnce this is done, the row variable will be incremented according to the outer loop definition. This is what is most likely causing an error because now as we start iterating through the inner loop with row = 1, this happens\r\n\r\nIteration One of the inner for loop: \r\n\r\n    if (a[1][0] == a[2][0] &amp;&amp; a[3][0] == a[1][0] &amp;&amp; a[4][0] == a[1][0])\r\nHere, we already have an indexoutofboundsexception when trying to access the 5th row in a 4x4 2D array. So the simple fix here is to change \r\n\r\n`for(int row = 0; row &lt;= a.length - 3 ; row++)` \r\n\r\nto \r\n\r\n    for(int row = 0; row &lt;= a.length - 4 ; row++)`\r\n\r\nA similar argument can be made for the second nested for loop. If you don&#39;t believe me, do something similar to what I did for the rows and write out the iterations for it using a 4x4 2D array. You&#39;ll get the arrayindexoutofbounds exception in the first iteration of the outer for loop and in the second iteration of the inner for loop when row = 0 and col = 1, causing the program to make a check at the fifth column in the first row of a 2D array. So the simple fix should be to change \r\n\r\n    for (int col = 0; col &lt;= a[0].length - 3 ; col++)\r\nto\r\n\r\n    for (int col = 0; col &lt;= a[row].length - 4 ; col++)\r\n\r\nPersonally, I prefer to use a[row].length only because there could be some instances where it&#39;s not a perfect nxn 2D array. For example, some rows may have only 3 columns where the first row has 7 columns. If this is the case, then you&#39;ll get an outofbounds exception for trying to access columns that exist in the first row that don&#39;t exist in other rows.\r\n\r\nFor the third nested for loop, again, same argument can be made just by writing out the iterations and it should be changed to \r\n\r\n    for(int row = 0; row &lt;= a.length - 4 ; row++) {\r\n          for(int col = 0; col &lt;= a[row].length - 4 ; col++)\r\n\r\nThe last nested for loop has a logic problem pertaining to the inner for loop. Since you&#39;re decrementing from 0, you&#39;re going to get an out of bounds exception just from trying to access negative indices in the array. So the simple fix should be to initialize `col` to the last column and change the condition to col being greater than or equal to `3` since you&#39;re accessing elements at the columns, col, col-1, col-2, and col-3. If that is confusing, think about it this way. You&#39;re checking columns starting from col and the three that come before it. What if there aren&#39;t even four columns to begin with? This is why there&#39;s the condition `col &gt;= 3` because you check a column and the three that come before it until you&#39;ve reached column #4 (col = 3). Once you&#39;ve reached column #3 (col = 2), there&#39;s no way of checking that column and the three before because there are only 3 columns to check at this point. Changes similar to the other 3 nested loops should be made to `for ( int row = 0; row &lt;= a.length - 3 ; row++)` regarding the -3. It should end up looking like this,\r\n\r\n    for ( int row = 0; row &lt;= a.length - 4 ; row++) {\r\n                for (int col = a[row].length - 1; col &gt;= 3; col--) ","title":"java 2d array comparing UPDATED","body":"<p>Well one problem I noticed in the first nested for loop is this line of code,</p>\n\n<pre><code>for ( int row = 0; row &lt;= a.length - 3 ; row++) \n</code></pre>\n\n<p>The way you have it now, the row variable is going to be incremented with each iteration of the outer for loop. However, with how you're executing your program, the condition should be <code>row &lt;= a.length - 4</code> and here's why. Suppose you had a four by four 2D array. The nested for loop will go through one normal iteration of the inner loop, which actually checks every single column for possible matches of four consecutive matching numbers in a column. Here's what it looks like when actually running the program starting at the outer for loop and row = 0,</p>\n\n<p>Iteration One of the inner for loop: </p>\n\n<pre><code>if (a[0][0] == a[1][0] &amp;&amp; a[2][0] == a[0][0] &amp;&amp; a[3][0] == a[0][0])\n</code></pre>\n\n<p>Iteration Two of the inner for loop: </p>\n\n<pre><code>if (a[0][1] == a[1][1] &amp;&amp; a[2][1] == a[0][1] &amp;&amp; a[3][1] == a[0][1])\n</code></pre>\n\n<p>Iteration Three of the inner for loop: </p>\n\n<pre><code>if (a[0][2] == a[1][2] &amp;&amp; a[2][2] == a[0][2] &amp;&amp; a[3][2] == a[0][2])\n</code></pre>\n\n<p>Last Iteration of the inner for loop: </p>\n\n<pre><code>if (a[0][0] == a[1][3] &amp;&amp; a[2][3] == a[0][3] &amp;&amp; a[3][0] == a[0][3])\n</code></pre>\n\n<p>Once this is done, the row variable will be incremented according to the outer loop definition. This is what is most likely causing an error because now as we start iterating through the inner loop with row = 1, this happens</p>\n\n<p>Iteration One of the inner for loop: </p>\n\n<pre><code>if (a[1][0] == a[2][0] &amp;&amp; a[3][0] == a[1][0] &amp;&amp; a[4][0] == a[1][0])\n</code></pre>\n\n<p>Here, we already have an indexoutofboundsexception when trying to access the 5th row in a 4x4 2D array. So the simple fix here is to change </p>\n\n<p><code>for(int row = 0; row &lt;= a.length - 3 ; row++)</code> </p>\n\n<p>to </p>\n\n<pre><code>for(int row = 0; row &lt;= a.length - 4 ; row++)`\n</code></pre>\n\n<p>A similar argument can be made for the second nested for loop. If you don't believe me, do something similar to what I did for the rows and write out the iterations for it using a 4x4 2D array. You'll get the arrayindexoutofbounds exception in the first iteration of the outer for loop and in the second iteration of the inner for loop when row = 0 and col = 1, causing the program to make a check at the fifth column in the first row of a 2D array. So the simple fix should be to change </p>\n\n<pre><code>for (int col = 0; col &lt;= a[0].length - 3 ; col++)\n</code></pre>\n\n<p>to</p>\n\n<pre><code>for (int col = 0; col &lt;= a[row].length - 4 ; col++)\n</code></pre>\n\n<p>Personally, I prefer to use a[row].length only because there could be some instances where it's not a perfect nxn 2D array. For example, some rows may have only 3 columns where the first row has 7 columns. If this is the case, then you'll get an outofbounds exception for trying to access columns that exist in the first row that don't exist in other rows.</p>\n\n<p>For the third nested for loop, again, same argument can be made just by writing out the iterations and it should be changed to </p>\n\n<pre><code>for(int row = 0; row &lt;= a.length - 4 ; row++) {\n      for(int col = 0; col &lt;= a[row].length - 4 ; col++)\n</code></pre>\n\n<p>The last nested for loop has a logic problem pertaining to the inner for loop. Since you're decrementing from 0, you're going to get an out of bounds exception just from trying to access negative indices in the array. So the simple fix should be to initialize <code>col</code> to the last column and change the condition to col being greater than or equal to <code>3</code> since you're accessing elements at the columns, col, col-1, col-2, and col-3. If that is confusing, think about it this way. You're checking columns starting from col and the three that come before it. What if there aren't even four columns to begin with? This is why there's the condition <code>col &gt;= 3</code> because you check a column and the three that come before it until you've reached column #4 (col = 3). Once you've reached column #3 (col = 2), there's no way of checking that column and the three before because there are only 3 columns to check at this point. Changes similar to the other 3 nested loops should be made to <code>for ( int row = 0; row &lt;= a.length - 3 ; row++)</code> regarding the -3. It should end up looking like this,</p>\n\n<pre><code>for ( int row = 0; row &lt;= a.length - 4 ; row++) {\n            for (int col = a[row].length - 1; col &gt;= 3; col--) \n</code></pre>\n"}],"owner":{"account_id":7157966,"reputation":41,"user_id":5469648,"accept_rate":75,"display_name":"UchiaSky"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":179,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":36761639,"answer_count":2,"score":0,"last_activity_date":1664906239,"creation_date":1461207197,"question_id":36758756,"body_markdown":"(UPDATED)\r\nI&#39;m having trouble figuring out what to do here, i need to compare a 2d array that to see if any of the numbers match.  I need four numbers to match either up/down, left/right, or diagonal.  I just can&#39;t get it to test for the down/left diagonal ( / ) here is my updated code\r\n\r\n    public static boolean isAdjacentFour( int[][] a ) {\r\n        // Code to test if column has four adjacent numbers\r\n        for ( int row = 0; row &lt;= a.length - 3 ; row++) {\r\n            for (int col = 0; col &lt;= a[0].length - 1 ; col++) {\r\n                if (a[row][col] == a[row+1][col] &amp;&amp; a[row+2][col] == a[row][col]\r\n                        &amp;&amp; a[row+3][col] == a[row][col]) {\r\n                    return true;\r\n                } \r\n            }\r\n        }\r\n        // Code to test if row has four adjacent numbers\r\n        for ( int row = 0; row &lt;= a.length - 1 ; row++) {\r\n            for (int col = 0; col &lt;= a[0].length - 3 ; col++) {\r\n                if (a[row][col] == a[row][col+1] &amp;&amp; a[row][col] == a[row][col+2]\r\n                        &amp;&amp; a[row][col] == a[row][col+3]) {\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n            // Code to test if there are 4 adjacent numbers in a down/right ( \\ )diagonal\r\n            for ( int row = 0; row &lt;= a.length - 3 ; row++) {\r\n                for (int col = 0; col &lt;= a[0].length - 3 ; col++) {\r\n                    if (a[row][col] == a[row+1][col+1] &amp;&amp; a[row][col] == a[row+2][col+2]\r\n                            &amp;&amp; a[row][col] == a[row+3][col+3] ) {\r\n                        return true;\r\n                    }\r\n                }\r\n            }\r\n            for ( int row = 0; row &lt;= a.length - 3 ; row++) {\r\n                for (int col = 0; col &lt;= a[0].length + 3 ; col--) {\r\n                    if (a[row][col] == a[row+1][col-1] &amp;&amp; a[row][col] == a[row+2][col-2]\r\n                            &amp;&amp; a[row][col] == a[row+3][col-3] ) {\r\n                        return true;\r\n                    }\r\n                }\r\n            }\r\n        \r\n        return false;\r\n    }","title":"java 2d array comparing UPDATED","body":"<p>(UPDATED)\nI'm having trouble figuring out what to do here, i need to compare a 2d array that to see if any of the numbers match.  I need four numbers to match either up/down, left/right, or diagonal.  I just can't get it to test for the down/left diagonal ( / ) here is my updated code</p>\n\n<pre><code>public static boolean isAdjacentFour( int[][] a ) {\n    // Code to test if column has four adjacent numbers\n    for ( int row = 0; row &lt;= a.length - 3 ; row++) {\n        for (int col = 0; col &lt;= a[0].length - 1 ; col++) {\n            if (a[row][col] == a[row+1][col] &amp;&amp; a[row+2][col] == a[row][col]\n                    &amp;&amp; a[row+3][col] == a[row][col]) {\n                return true;\n            } \n        }\n    }\n    // Code to test if row has four adjacent numbers\n    for ( int row = 0; row &lt;= a.length - 1 ; row++) {\n        for (int col = 0; col &lt;= a[0].length - 3 ; col++) {\n            if (a[row][col] == a[row][col+1] &amp;&amp; a[row][col] == a[row][col+2]\n                    &amp;&amp; a[row][col] == a[row][col+3]) {\n                return true;\n            }\n        }\n    }\n        // Code to test if there are 4 adjacent numbers in a down/right ( \\ )diagonal\n        for ( int row = 0; row &lt;= a.length - 3 ; row++) {\n            for (int col = 0; col &lt;= a[0].length - 3 ; col++) {\n                if (a[row][col] == a[row+1][col+1] &amp;&amp; a[row][col] == a[row+2][col+2]\n                        &amp;&amp; a[row][col] == a[row+3][col+3] ) {\n                    return true;\n                }\n            }\n        }\n        for ( int row = 0; row &lt;= a.length - 3 ; row++) {\n            for (int col = 0; col &lt;= a[0].length + 3 ; col--) {\n                if (a[row][col] == a[row+1][col-1] &amp;&amp; a[row][col] == a[row+2][col-2]\n                        &amp;&amp; a[row][col] == a[row+3][col-3] ) {\n                    return true;\n                }\n            }\n        }\n\n    return false;\n}\n</code></pre>\n"},{"tags":["java","function","types","doubly-linked-list","sentinel"],"answers":[{"tags":[],"owner":{"account_id":7142980,"reputation":323243,"user_id":5459839,"display_name":"trincot"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1664906203,"creation_date":1664906203,"answer_id":73951840,"question_id":73949491,"body_markdown":"First of all, you don&#39;t need `length` to know whether the list is empty. You could also define the `isEmpty` method like this:\r\n\r\n```\r\n    public boolean isEmpty() {\r\n        return sentinel.next == sentinel;\r\n    }\r\n```\r\n\r\nNB: I prefer camelCase instead of all lowercased method names, so `isEmpty` instead of `isempty`, and `firstOut` instead of `firstout`.\r\n\r\nFor the `firstOut` and `lastOut` methods, I would first define a private method that removes a given node from the list (assuming it is in the list):\r\n\r\n```\r\n    private T removeNode(IntNode node) {\r\n        // Link neighbors to eachother, skipping over given node\r\n        node.previous.next = node.next;\r\n        node.next.previous = node.previous;\r\n        return node.data;\r\n    }\r\n```\r\n\r\nThis can then be used as follows:\r\n\r\n```    \r\n    public T firstOut() {\r\n        return removeNode(sentinel.next);\r\n    }\r\n    \r\n    public T lastOut() {\r\n        return removeNode(sentinel.previous);\r\n    }\r\n```\r\n\r\nIn this version, if the list is empty and `firstOut` or `lastOut` is called, the `removeNode` call will not change anything to the list, because the node it gets will be the sentinel node which links to itself, and so both assignments just confirm what is already the case. `firstOut` or `lastOut` will return the value of the sentinel node in that case. \r\n\r\nYou could alternatively throw an exception when the list is empty when `removeNode` is called. But exception handling is a topic on itself, so I will not dive into that here.","title":"Can someone please explain how can I remove first and last nodes in my doubly linked list?","body":"<p>First of all, you don't need <code>length</code> to know whether the list is empty. You could also define the <code>isEmpty</code> method like this:</p>\n<pre><code>    public boolean isEmpty() {\n        return sentinel.next == sentinel;\n    }\n</code></pre>\n<p>NB: I prefer camelCase instead of all lowercased method names, so <code>isEmpty</code> instead of <code>isempty</code>, and <code>firstOut</code> instead of <code>firstout</code>.</p>\n<p>For the <code>firstOut</code> and <code>lastOut</code> methods, I would first define a private method that removes a given node from the list (assuming it is in the list):</p>\n<pre><code>    private T removeNode(IntNode node) {\n        // Link neighbors to eachother, skipping over given node\n        node.previous.next = node.next;\n        node.next.previous = node.previous;\n        return node.data;\n    }\n</code></pre>\n<p>This can then be used as follows:</p>\n<pre><code>    public T firstOut() {\n        return removeNode(sentinel.next);\n    }\n    \n    public T lastOut() {\n        return removeNode(sentinel.previous);\n    }\n</code></pre>\n<p>In this version, if the list is empty and <code>firstOut</code> or <code>lastOut</code> is called, the <code>removeNode</code> call will not change anything to the list, because the node it gets will be the sentinel node which links to itself, and so both assignments just confirm what is already the case. <code>firstOut</code> or <code>lastOut</code> will return the value of the sentinel node in that case.</p>\n<p>You could alternatively throw an exception when the list is empty when <code>removeNode</code> is called. But exception handling is a topic on itself, so I will not dive into that here.</p>\n"}],"owner":{"account_id":22999051,"reputation":285,"user_id":17123296,"display_name":"Nutnicha"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":250,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":73951840,"answer_count":1,"score":-1,"last_activity_date":1664906203,"creation_date":1664893872,"question_id":73949491,"body_markdown":"I have created a class `SLList` where I take in a doubly linked list `SLList` and make some adaptations to it. \r\n\r\nNow, I&#39;m trying to remove the first node in the doubly linked list and the last node in the doubly linked list via two functions known as `public T firstout()` and `public T lastout()` and I think the purpose of each function is pretty self-explanatory.\r\n\r\nBased on the recommendation of StackOverflow user, I have decided to use just one sentinel to aid in my task. However, I&#39;m struggling to rightfully implement sentinels to my advantage.\r\n\r\nHere is my code so far:\r\n\r\n    public class SLList&lt;T&gt;{ // Add Generics here\r\n        private class IntNode {\r\n            private T data;\r\n            private IntNode previous;\r\n            private IntNode next;\r\n    \r\n            public IntNode (T data, IntNode previous, IntNode next) {\r\n                this.data = data;\r\n                this.previous = previous;\r\n                this.next = next;\r\n            }\r\n    \r\n            public IntNode () { // Self-referencing node\r\n                next = previous = this;\r\n            }\r\n        }\r\n    \r\n        IntNode sentinel; // One sentinel can serve both purposes\r\n        private int length = 0;\r\n    \r\n        public SLList(){\r\n            sentinel = new IntNode(); // Self referencing previous/next\r\n        }\r\n    \r\n        public void addFirst(T data) {\r\n            IntNode node = new IntNode(data, sentinel, sentinel.next);\r\n            sentinel.next = node;\r\n            node.next.previous = node;\r\n        }\r\n        public boolean isempty() {\r\n            return length == 0;\r\n        }\r\n    \r\n    \r\n        public T firstout() {\r\n        return sentinel.previous == null;\r\n    \r\n        }\r\n        public T lastout() {\r\n        return sentinel.next == null;\r\n        }\r\n\r\nBased on what I&#39;ve tried to find, I thought `.previous` points to the start of the list and setting it to null would effectively remove the first one and `.next` points to the next node, and setting it to null would also remove the last one.\r\n\r\nWhere has my understanding gone wrong here? Any tips or code improvements would be greatly appreciated","title":"Can someone please explain how can I remove first and last nodes in my doubly linked list?","body":"<p>I have created a class <code>SLList</code> where I take in a doubly linked list <code>SLList</code> and make some adaptations to it.</p>\n<p>Now, I'm trying to remove the first node in the doubly linked list and the last node in the doubly linked list via two functions known as <code>public T firstout()</code> and <code>public T lastout()</code> and I think the purpose of each function is pretty self-explanatory.</p>\n<p>Based on the recommendation of StackOverflow user, I have decided to use just one sentinel to aid in my task. However, I'm struggling to rightfully implement sentinels to my advantage.</p>\n<p>Here is my code so far:</p>\n<pre><code>public class SLList&lt;T&gt;{ // Add Generics here\n    private class IntNode {\n        private T data;\n        private IntNode previous;\n        private IntNode next;\n\n        public IntNode (T data, IntNode previous, IntNode next) {\n            this.data = data;\n            this.previous = previous;\n            this.next = next;\n        }\n\n        public IntNode () { // Self-referencing node\n            next = previous = this;\n        }\n    }\n\n    IntNode sentinel; // One sentinel can serve both purposes\n    private int length = 0;\n\n    public SLList(){\n        sentinel = new IntNode(); // Self referencing previous/next\n    }\n\n    public void addFirst(T data) {\n        IntNode node = new IntNode(data, sentinel, sentinel.next);\n        sentinel.next = node;\n        node.next.previous = node;\n    }\n    public boolean isempty() {\n        return length == 0;\n    }\n\n\n    public T firstout() {\n    return sentinel.previous == null;\n\n    }\n    public T lastout() {\n    return sentinel.next == null;\n    }\n</code></pre>\n<p>Based on what I've tried to find, I thought <code>.previous</code> points to the start of the list and setting it to null would effectively remove the first one and <code>.next</code> points to the next node, and setting it to null would also remove the last one.</p>\n<p>Where has my understanding gone wrong here? Any tips or code improvements would be greatly appreciated</p>\n"},{"tags":["java","hashmap"],"comments":[{"owner":{"account_id":2139538,"reputation":42501,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"score":0,"creation_date":1664903404,"post_id":73951172,"comment_id":130574687,"body_markdown":"&quot;*when I tried to write hashmap in generic it is not returning old data*&quot; Generics do not change runtime behaviour, so this cannot possibly be accurate.","body":"&quot;<i>when I tried to write hashmap in generic it is not returning old data</i>&quot; Generics do not change runtime behaviour, so this cannot possibly be accurate."},{"owner":{"account_id":2139538,"reputation":42501,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"score":0,"creation_date":1664903462,"post_id":73951172,"comment_id":130574713,"body_markdown":"The only way this can override entries in the map is if the array called `name` contains duplicates. You haven&#39;t shown where that&#39;s declared.","body":"The only way this can override entries in the map is if the array called <code>name</code> contains duplicates. You haven&#39;t shown where that&#39;s declared."},{"owner":{"account_id":26293291,"reputation":1,"user_id":19959974,"display_name":"Trisha"},"score":0,"creation_date":1664906370,"post_id":73951172,"comment_id":130575607,"body_markdown":"@Michael Thanks! for helping Sir, \nActually [ {FirstName: Name1 , Age: 51 } , {FirstName: Name2 , Age: 99 } ] &lt;- I want output like this, so maybe my key (FirstName, Age) are the same all the time, therefore it is overriding, isn&#39;t it..\nSo how to add this kind of data to the list?","body":"@Michael Thanks! for helping Sir,  Actually [ {FirstName: Name1 , Age: 51 } , {FirstName: Name2 , Age: 99 } ] &lt;- I want output like this, so maybe my key (FirstName, Age) are the same all the time, therefore it is overriding, isn&#39;t it.. So how to add this kind of data to the list?"},{"owner":{"account_id":5481715,"reputation":176,"user_id":4357942,"display_name":"Sachin"},"score":0,"creation_date":1664907403,"post_id":73951172,"comment_id":130575872,"body_markdown":"as per above comment. You need to create class say &quot;User&quot; with properties firstName,Age... And create a list&lt;User&gt;. This is the standard way to do things in java. Each user object are unique users. Try not to be so much generic. The HashMap impl also work but you need to create that many hashmap object which is not a good/standard way.","body":"as per above comment. You need to create class say &quot;User&quot; with properties firstName,Age... And create a list&lt;User&gt;. This is the standard way to do things in java. Each user object are unique users. Try not to be so much generic. The HashMap impl also work but you need to create that many hashmap object which is not a good/standard way."}],"answers":[{"tags":[],"owner":{"account_id":24360999,"reputation":3,"user_id":18295361,"display_name":"T-rex"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664905961,"creation_date":1664905961,"answer_id":73951794,"question_id":73951172,"body_markdown":"Based on the code snippet provided the values in hashMap will only get updated in case there are duplicates in your name array. I am not getting why you are creating a List of hashmap as you are only adding one hashmap in the list.\r\n\r\nI think what you are trying to say is as below\r\nname array ={tom, jerry, tom, jerry, duck}\r\nstoredata array ={d1, d2, d3, d4, d5}\r\n\r\noutput : {[tom,{d1,d3}],[jerry,{d2,d4}],[duck,{d5}]}\r\n\r\nSo if you want something like this then create a HashMap as below\r\n\r\n```\r\n\r\nLinkedHashMap&lt;String,List&lt;String&gt;&gt; hashMap=new LinkedHashMap&lt;&gt;();\r\nfor (int j = 0; j &lt; name.length; j++) {\r\n    System.out.print(&quot;Enter &quot; + name[j] + &quot;:&quot;);\r\n    storedata[j] = scanner.next();\r\n    if(!hashMap.containsKey(name[j])\r\n       hashMap.put(name[j],new ArrayList&lt;&gt;());\r\n    hashMap.put(name[j],storedata[j]);\r\n}\r\nSystem.out.println(hashMap);\r\n```\r\n","title":"List&lt;HashMap&gt; list = new ArrayList&lt;&gt;(); In java","body":"<p>Based on the code snippet provided the values in hashMap will only get updated in case there are duplicates in your name array. I am not getting why you are creating a List of hashmap as you are only adding one hashmap in the list.</p>\n<p>I think what you are trying to say is as below\nname array ={tom, jerry, tom, jerry, duck}\nstoredata array ={d1, d2, d3, d4, d5}</p>\n<p>output : {[tom,{d1,d3}],[jerry,{d2,d4}],[duck,{d5}]}</p>\n<p>So if you want something like this then create a HashMap as below</p>\n<pre><code>\nLinkedHashMap&lt;String,List&lt;String&gt;&gt; hashMap=new LinkedHashMap&lt;&gt;();\nfor (int j = 0; j &lt; name.length; j++) {\n    System.out.print(&quot;Enter &quot; + name[j] + &quot;:&quot;);\n    storedata[j] = scanner.next();\n    if(!hashMap.containsKey(name[j])\n       hashMap.put(name[j],new ArrayList&lt;&gt;());\n    hashMap.put(name[j],storedata[j]);\n}\nSystem.out.println(hashMap);\n</code></pre>\n"}],"owner":{"account_id":26293291,"reputation":1,"user_id":19959974,"display_name":"Trisha"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":91,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1664905961,"creation_date":1664902248,"question_id":73951172,"body_markdown":"In java, Is this wrong ? Whenever I tried to add something my old value is replaced with new value. Is it not possible to store data in list of hashmap like below statement?\r\nWhen I store data as string \r\nList&lt;String&gt; list = new ArrayList&lt;&gt;(); \r\nlike this.. it is working properly but when I tried to write hashmap in generic it is not returning old data..\r\nI need your advice.\r\n\r\n\r\n\r\n    List&lt;HashMap&gt; dataArrayList = new ArrayList&lt;&gt;();\r\n    LinkedHashMap&lt;String, String&gt; hashMap = new LinkedHashMap&lt;&gt;();\r\n    for (int j = 0; j &lt; name.length; j++) {\r\n        System.out.print(&quot;Enter &quot; + name[j] + &quot;:&quot;);\r\n        storedata[j] = scanner.next();\r\n        hashMap.put(name[j], storedata[j]);\r\n    }\r\n\r\n    dataArrayList.add(hashMap);\r\n\r\n","title":"List&lt;HashMap&gt; list = new ArrayList&lt;&gt;(); In java","body":"<p>In java, Is this wrong ? Whenever I tried to add something my old value is replaced with new value. Is it not possible to store data in list of hashmap like below statement?\nWhen I store data as string\nList list = new ArrayList&lt;&gt;();\nlike this.. it is working properly but when I tried to write hashmap in generic it is not returning old data..\nI need your advice.</p>\n<pre><code>List&lt;HashMap&gt; dataArrayList = new ArrayList&lt;&gt;();\nLinkedHashMap&lt;String, String&gt; hashMap = new LinkedHashMap&lt;&gt;();\nfor (int j = 0; j &lt; name.length; j++) {\n    System.out.print(&quot;Enter &quot; + name[j] + &quot;:&quot;);\n    storedata[j] = scanner.next();\n    hashMap.put(name[j], storedata[j]);\n}\n\ndataArrayList.add(hashMap);\n</code></pre>\n"},{"tags":["java","trace","datadog"],"owner":{"account_id":6099776,"reputation":1781,"user_id":4759182,"display_name":"rasilvap"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":752,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":0,"score":4,"last_activity_date":1664905858,"creation_date":1655844321,"question_id":72706933,"body_markdown":"I am following the Connecting Java logs and Traces from the Datadog docs:\r\nhttps://docs.datadoghq.com/tracing/connect_logs_and_traces/java/?tab=slf4jandlogback\r\n\r\nI added the next code to my endpoint:\r\n\r\n    import org.slf4j.MDC;\r\n    import datadog.trace.api.CorrelationIdentifier;\r\n    \r\n    // There must be spans started and active before this block.\r\n    try {\r\n        MDC.put(&quot;dd.trace_id&quot;, CorrelationIdentifier.getTraceId());\r\n        MDC.put(&quot;dd.span_id&quot;, CorrelationIdentifier.getSpanId());\r\n    \r\n    // Log something\r\n    \r\n    } finally {\r\n        MDC.remove(&quot;dd.trace_id&quot;);\r\n        MDC.remove(&quot;dd.span_id&quot;);\r\n    }\r\n\r\nIn the console I can see the next logs: `dd.trace_id&quot;:&quot;0&quot;,&quot;dd.span_id&quot;:&quot;0&quot;}`\r\n\r\nI am not pretty sure why I am not getting a correct trace_id and span_id and why these values are Zero. \r\n\r\nAny ideas?\r\n\r\n","title":"Connecting Java logs and Traces traceId and span Id have the value of Zero","body":"<p>I am following the Connecting Java logs and Traces from the Datadog docs:\n<a href=\"https://docs.datadoghq.com/tracing/connect_logs_and_traces/java/?tab=slf4jandlogback\" rel=\"nofollow noreferrer\">https://docs.datadoghq.com/tracing/connect_logs_and_traces/java/?tab=slf4jandlogback</a></p>\n<p>I added the next code to my endpoint:</p>\n<pre><code>import org.slf4j.MDC;\nimport datadog.trace.api.CorrelationIdentifier;\n\n// There must be spans started and active before this block.\ntry {\n    MDC.put(&quot;dd.trace_id&quot;, CorrelationIdentifier.getTraceId());\n    MDC.put(&quot;dd.span_id&quot;, CorrelationIdentifier.getSpanId());\n\n// Log something\n\n} finally {\n    MDC.remove(&quot;dd.trace_id&quot;);\n    MDC.remove(&quot;dd.span_id&quot;);\n}\n</code></pre>\n<p>In the console I can see the next logs: <code>dd.trace_id&quot;:&quot;0&quot;,&quot;dd.span_id&quot;:&quot;0&quot;}</code></p>\n<p>I am not pretty sure why I am not getting a correct trace_id and span_id and why these values are Zero.</p>\n<p>Any ideas?</p>\n"},{"tags":["java","maven","build","pom.xml","mybatis"],"comments":[{"owner":{"account_id":1408815,"reputation":2002,"user_id":1811348,"accept_rate":88,"display_name":"swapyonubuntu"},"score":1,"creation_date":1664903848,"post_id":73951073,"comment_id":130574854,"body_markdown":"Copying resources can be configured using `maven-resources-plugin`\n\nhttps://maven.apache.org/plugins/maven-resources-plugin/examples/include-exclude.html","body":"Copying resources can be configured using <code>maven-resources-plugin</code>  <a href=\"https://maven.apache.org/plugins/maven-resources-plugin/examples/include-exclude.html\" rel=\"nofollow noreferrer\">maven.apache.org/plugins/maven-resources-plugin/examples/&hellip;</a>"},{"owner":{"account_id":6673610,"reputation":61,"user_id":5529027,"display_name":"Guilherme Dambros"},"score":0,"creation_date":1664904725,"post_id":73951073,"comment_id":130575133,"body_markdown":"It&#39;s worked. I just add the resources section like docs and the .xml files are exported correctly. Thanks","body":"It&#39;s worked. I just add the resources section like docs and the .xml files are exported correctly. Thanks"}],"answers":[{"tags":[],"owner":{"account_id":6673610,"reputation":61,"user_id":5529027,"display_name":"Guilherme Dambros"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1664905834,"creation_date":1664905834,"answer_id":73951776,"question_id":73951073,"body_markdown":"I have just added the resources section at my pom file, like @swapyonubuntu comment.\r\n\r\n    &lt;resources&gt;\r\n      &lt;resource&gt;\r\n         &lt;directory&gt;src/main/java&lt;/directory&gt;\r\n           &lt;includes&gt;\r\n              &lt;include&gt;src/to/correct/folder/*.xml&lt;/include&gt;\r\n           &lt;/includes&gt;\r\n      &lt;/resource&gt;\r\n    &lt;/resources&gt;","title":"Mapper files (*.xml) not exported on build project. Using mybatis","body":"<p>I have just added the resources section at my pom file, like @swapyonubuntu comment.</p>\n<pre><code>&lt;resources&gt;\n  &lt;resource&gt;\n     &lt;directory&gt;src/main/java&lt;/directory&gt;\n       &lt;includes&gt;\n          &lt;include&gt;src/to/correct/folder/*.xml&lt;/include&gt;\n       &lt;/includes&gt;\n  &lt;/resource&gt;\n&lt;/resources&gt;\n</code></pre>\n"}],"owner":{"account_id":6673610,"reputation":61,"user_id":5529027,"display_name":"Guilherme Dambros"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":323,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1664905834,"creation_date":1664901745,"question_id":73951073,"body_markdown":"I&#39;m working on a maven project that use mybatis to DB tier. The `.xml` files isn&#39;t exported when I&#39;m building the project. But the `.java` files are being exported and they are at the same package. So the project run is giving me an &quot;not found&quot; error. \r\n\r\nI do a copy of `.xml` files and paste inside `target` folder (at the correct location) and the project runs perfectly.\r\n\r\nmy pom.xml file\r\n\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n  \r\n\r\n    &lt;modelVersion&gt; 4.0.0 &lt;/modelVersion&gt;\r\n\r\n      \r\n      &lt;groupId&gt;com&lt;/groupId&gt;\r\n      &lt;artifactId&gt;project&lt;/artifactId&gt;\r\n      &lt;version&gt;1.0.10&lt;/version&gt;\r\n      \r\n      &lt;name&gt;Description&lt;/name&gt;\r\n\t&lt;properties&gt;\r\n\t\t&lt;maven.build.timestamp.format&gt;yyyyMMdd-HHmm&lt;/maven.build.timestamp.format&gt;\r\n\t\t&lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n\t&lt;/properties&gt;\r\n\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;joda-time&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;joda-time&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.6&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;net.sf.supercsv&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;super-csv&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.1.0&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t    &lt;groupId&gt;com.oracle&lt;/groupId&gt;\r\n\t\t    &lt;artifactId&gt;ojdbc6&lt;/artifactId&gt;\r\n\t\t    &lt;version&gt;11.2.0.3&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;commons-codec&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;commons-codec&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.9&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t    &lt;groupId&gt;commons-dbcp&lt;/groupId&gt;\r\n\t\t    &lt;artifactId&gt;commons-dbcp&lt;/artifactId&gt;\r\n\t\t    &lt;version&gt;1.4&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t  \t&lt;groupId&gt;org.mybatis&lt;/groupId&gt;\r\n\t\t  \t&lt;artifactId&gt;mybatis&lt;/artifactId&gt;\r\n\t\t  \t&lt;version&gt;3.4.2&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.google.guava&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;guava&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;20.0&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t    &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\r\n\t\t    &lt;artifactId&gt;commons-io&lt;/artifactId&gt;\r\n\t\t    &lt;version&gt;1.3.2&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t  &lt;groupId&gt;org.freemarker&lt;/groupId&gt;\r\n\t\t  &lt;artifactId&gt;freemarker&lt;/artifactId&gt;\r\n\t\t  &lt;version&gt;2.3.26-incubating&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;3.6.1&lt;/version&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;debug&gt;true&lt;/debug&gt;\r\n\t\t\t\t\t&lt;source&gt;1.8&lt;/source&gt;\r\n\t\t\t\t\t&lt;target&gt;1.8&lt;/target&gt;\r\n\t\t\t\t\t&lt;!-- encoding: default &#233; project.build.sourceEncoding --&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;2.4&lt;/version&gt;\r\n\t\t\t\t&lt;!-- Para cria&#231;&#227;o do JAR simples (sem depend&#234;ncias) --&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;archive&gt;\r\n\t\t\t\t\t\t&lt;manifest&gt;\r\n\t\t\t\t\t\t\t&lt;mainClass&gt;com.workload.exporter.DataExporter&lt;/mainClass&gt;\r\n\t\t\t\t\t\t&lt;/manifest&gt;\r\n\t\t\t\t\t&lt;/archive&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t\t\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;2.6&lt;/version&gt;\r\n\t\t\t\t\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t\t\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;2.4&lt;/version&gt;\r\n\t\t\t\t&lt;executions&gt;\r\n\t\t\t\t\t&lt;execution&gt;\r\n\t\t\t\t\t\t&lt;phase&gt;package&lt;/phase&gt;\r\n\t\t\t\t\t\t&lt;goals&gt;\r\n\t\t\t\t\t\t\t&lt;goal&gt;single&lt;/goal&gt;\r\n\t\t\t\t\t\t&lt;/goals&gt;\r\n\t\t\t\t\t&lt;/execution&gt;\r\n\t\t\t\t&lt;/executions&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;descriptorRefs&gt;\r\n\t\t\t\t\t\t&lt;descriptorRef&gt;jar-with-dependencies&lt;/descriptorRef&gt;\r\n\t\t\t\t\t&lt;/descriptorRefs&gt;\r\n\t\t\t\t\t&lt;archive&gt;\r\n\t\t\t\t\t\t&lt;manifest&gt;\r\n\t\t\t\t\t\t\t&lt;addDefaultImplementationEntries&gt;true&lt;/addDefaultImplementationEntries&gt;\r\n\t\t\t\t\t\t\t&lt;mainClass&gt;com.workload.exporter.DataExporter&lt;/mainClass&gt;\r\n\t\t\t\t\t\t&lt;/manifest&gt;\r\n\t\t\t\t\t&lt;/archive&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n\r\n\r\nThere are any other config to set on my pom file?","title":"Mapper files (*.xml) not exported on build project. Using mybatis","body":"<p>I'm working on a maven project that use mybatis to DB tier. The <code>.xml</code> files isn't exported when I'm building the project. But the <code>.java</code> files are being exported and they are at the same package. So the project run is giving me an &quot;not found&quot; error.</p>\n<p>I do a copy of <code>.xml</code> files and paste inside <code>target</code> folder (at the correct location) and the project runs perfectly.</p>\n<p>my pom.xml file</p>\n<pre><code>&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n\n\n&lt;modelVersion&gt; 4.0.0 &lt;/modelVersion&gt;\n\n  \n  &lt;groupId&gt;com&lt;/groupId&gt;\n  &lt;artifactId&gt;project&lt;/artifactId&gt;\n  &lt;version&gt;1.0.10&lt;/version&gt;\n  \n  &lt;name&gt;Description&lt;/name&gt;\n&lt;properties&gt;\n    &lt;maven.build.timestamp.format&gt;yyyyMMdd-HHmm&lt;/maven.build.timestamp.format&gt;\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n&lt;/properties&gt;\n\n&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;joda-time&lt;/groupId&gt;\n        &lt;artifactId&gt;joda-time&lt;/artifactId&gt;\n        &lt;version&gt;1.6&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;net.sf.supercsv&lt;/groupId&gt;\n        &lt;artifactId&gt;super-csv&lt;/artifactId&gt;\n        &lt;version&gt;2.1.0&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.oracle&lt;/groupId&gt;\n        &lt;artifactId&gt;ojdbc6&lt;/artifactId&gt;\n        &lt;version&gt;11.2.0.3&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;commons-codec&lt;/groupId&gt;\n        &lt;artifactId&gt;commons-codec&lt;/artifactId&gt;\n        &lt;version&gt;1.9&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;commons-dbcp&lt;/groupId&gt;\n        &lt;artifactId&gt;commons-dbcp&lt;/artifactId&gt;\n        &lt;version&gt;1.4&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.mybatis&lt;/groupId&gt;\n        &lt;artifactId&gt;mybatis&lt;/artifactId&gt;\n        &lt;version&gt;3.4.2&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.google.guava&lt;/groupId&gt;\n        &lt;artifactId&gt;guava&lt;/artifactId&gt;\n        &lt;version&gt;20.0&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\n        &lt;artifactId&gt;commons-io&lt;/artifactId&gt;\n        &lt;version&gt;1.3.2&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.freemarker&lt;/groupId&gt;\n      &lt;artifactId&gt;freemarker&lt;/artifactId&gt;\n      &lt;version&gt;2.3.26-incubating&lt;/version&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n\n&lt;build&gt;\n    &lt;plugins&gt;\n\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n            &lt;version&gt;3.6.1&lt;/version&gt;\n            &lt;configuration&gt;\n                &lt;debug&gt;true&lt;/debug&gt;\n                &lt;source&gt;1.8&lt;/source&gt;\n                &lt;target&gt;1.8&lt;/target&gt;\n                &lt;!-- encoding: default  project.build.sourceEncoding --&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\n            &lt;version&gt;2.4&lt;/version&gt;\n            &lt;!-- Para criao do JAR simples (sem dependncias) --&gt;\n            &lt;configuration&gt;\n                &lt;archive&gt;\n                    &lt;manifest&gt;\n                        &lt;mainClass&gt;com.workload.exporter.DataExporter&lt;/mainClass&gt;\n                    &lt;/manifest&gt;\n                &lt;/archive&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n        \n        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\n            &lt;version&gt;2.6&lt;/version&gt;\n            \n        &lt;/plugin&gt;\n        \n        &lt;plugin&gt;\n            &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\n            &lt;version&gt;2.4&lt;/version&gt;\n            &lt;executions&gt;\n                &lt;execution&gt;\n                    &lt;phase&gt;package&lt;/phase&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;single&lt;/goal&gt;\n                    &lt;/goals&gt;\n                &lt;/execution&gt;\n            &lt;/executions&gt;\n            &lt;configuration&gt;\n                &lt;descriptorRefs&gt;\n                    &lt;descriptorRef&gt;jar-with-dependencies&lt;/descriptorRef&gt;\n                &lt;/descriptorRefs&gt;\n                &lt;archive&gt;\n                    &lt;manifest&gt;\n                        &lt;addDefaultImplementationEntries&gt;true&lt;/addDefaultImplementationEntries&gt;\n                        &lt;mainClass&gt;com.workload.exporter.DataExporter&lt;/mainClass&gt;\n                    &lt;/manifest&gt;\n                &lt;/archive&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n\n    &lt;/plugins&gt;\n&lt;/build&gt;\n</code></pre>\n\n<p>There are any other config to set on my pom file?</p>\n"},{"tags":["java","json","jolt"],"answers":[{"tags":[],"owner":{"account_id":6278449,"reputation":2408,"user_id":4880379,"display_name":"kasptom"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1643918922,"creation_date":1643915911,"answer_id":70977072,"question_id":70975621,"body_markdown":"The spec below should do the trick:\r\n```json\r\n[\r\n  {\r\n    &quot;operation&quot;: &quot;shift&quot;,\r\n    &quot;spec&quot;: {\r\n      &quot;*&quot;: {\r\n        &quot;*&quot;: {\r\n          &quot;*&quot;: {\r\n            &quot;$2&quot;: &quot;keyParts1&quot;,\r\n            &quot;key&quot;: &quot;keyParts2&quot;,\r\n            &quot;value&quot;: &quot;values&quot;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  },\r\n  {\r\n    &quot;operation&quot;: &quot;shift&quot;,\r\n    &quot;spec&quot;: {\r\n      &quot;keyParts1&quot;: {\r\n        &quot;*&quot;: &quot;[#1].part1&quot;\r\n      },\r\n      &quot;keyParts2&quot;: {\r\n        &quot;*&quot;: &quot;[#1].part2&quot;\r\n      },\r\n      &quot;values&quot;: {\r\n        &quot;*&quot;: &quot;[#1].value&quot;\r\n      }\r\n    }\r\n  },\r\n  {\r\n    &quot;operation&quot;: &quot;modify-default-beta&quot;,\r\n    &quot;spec&quot;: {\r\n      &quot;*&quot;: {\r\n        &quot;newKey&quot;: &quot;=split(&#39;-&#39;, @(1,part1))&quot;,\r\n        &quot;newKeyFirst&quot;: &quot;@(1,newKey[0])&quot;,\r\n        &quot;newKeyComplete&quot;: &quot;=concat(@(1,newKeyFirst),&#39;-&#39;,@(1,part2))&quot;\r\n      }\r\n    }\r\n  },\r\n  {\r\n    &quot;operation&quot;: &quot;shift&quot;,\r\n    &quot;spec&quot;: {\r\n      &quot;*&quot;: {\r\n        &quot;value&quot;: &quot;@(1,newKeyComplete)&quot;\r\n      }\r\n    }\r\n  }\r\n]\r\n```\r\nTry to apply each of the operations separately (for example in the [demo app](https://jolt-demo.appspot.com/)).\r\n\r\nCheck out the links to the jolt docs and the examples from [this answer](https://stackoverflow.com/a/65208580/4880379)\r\n\r\n---\r\n\r\n### Step by step explanation:\r\n\r\nFirst `&quot;shift&quot;` transformation places the components of the final result in the separate arrays:\r\n```json\r\n{\r\n  &quot;keyParts1&quot; : [ &quot;bloc1-1&quot;, &quot;bloc1-1&quot;, &quot;bloc2-1&quot;, &quot;bloc2-1&quot;, &quot;bloc2-1&quot; ],\r\n  &quot;keyParts2&quot; : [ &quot;key1&quot;, &quot;key2&quot;, &quot;key1&quot;, &quot;key2&quot;, &quot;key3&quot; ],\r\n  &quot;values&quot; : [ &quot;value1-1&quot;, &quot;value1-2&quot;, &quot;value2-1&quot;, &quot;value2-2&quot;, &quot;value2-3&quot; ]\r\n}\r\n```\r\nThe above operation let us have each of the components of the end result positioned in the right index of the desired result.\r\nNote that each array has the same size.\r\nIn the second operation we group each of the array elements by its index using the `#` operator. Looking at the [docs](https://github.com/bazaarvoice/jolt/blob/master/jolt-core/src/main/java/com/bazaarvoice/jolt/Shiftr.java#L261) `[#1]` can be translated to:\r\n\r\n&gt; &quot;Go up one level and ask that node how many matches it has had before finding the current element&quot;.\r\n\r\nThe node above is an array, so for the 3rd array element it will be the array index `2`.\r\n```json\r\n[\r\n  ...\r\n  {\r\n    &quot;part1&quot; : &quot;bloc2-1&quot;,\r\n    &quot;part2&quot; : &quot;key1&quot;,\r\n    &quot;value&quot; : &quot;value2-1&quot;\r\n  }\r\n  ...\r\n]\r\n```\r\nIn the 3rd operation **I have assumed** that the key of the desired result is the concatenation of the `&quot;blocX&quot;` substring of the `&quot;blocX-Y&quot;` key concatenated with the `&quot;key&quot;` value. That&#39;s why I&#39;ve used the `&quot;modify-default-beta&quot;`. Have a look at [the example from the demo app](https://jolt-demo.appspot.com/#modify-stringFunctions)\r\nEach of five elements of the array is transformed similarly to the 3rd array element:\r\n\r\n```json\r\n[\r\n  ...\r\n  {\r\n    &quot;part1&quot; : &quot;bloc2-1&quot;,\r\n    &quot;part2&quot; : &quot;key1&quot;,\r\n    &quot;value&quot; : &quot;value2-1&quot;,\r\n    &quot;newKey&quot; : [ &quot;bloc2&quot;, &quot;1&quot; ],\r\n    &quot;newKeyFirst&quot; : &quot;bloc2&quot;,\r\n    &quot;newKeyComplete&quot; : &quot;bloc2-key1&quot;\r\n  }\r\n  ...\r\n]\r\n```\r\nThe last operation produces the desired result from the 3rd operation&#39;s output.","title":"Java Jolt: can&#39;t find proper spec for my transformation","body":"<p>The spec below should do the trick:</p>\n<pre class=\"lang-json prettyprint-override\"><code>[\n  {\n    &quot;operation&quot;: &quot;shift&quot;,\n    &quot;spec&quot;: {\n      &quot;*&quot;: {\n        &quot;*&quot;: {\n          &quot;*&quot;: {\n            &quot;$2&quot;: &quot;keyParts1&quot;,\n            &quot;key&quot;: &quot;keyParts2&quot;,\n            &quot;value&quot;: &quot;values&quot;\n          }\n        }\n      }\n    }\n  },\n  {\n    &quot;operation&quot;: &quot;shift&quot;,\n    &quot;spec&quot;: {\n      &quot;keyParts1&quot;: {\n        &quot;*&quot;: &quot;[#1].part1&quot;\n      },\n      &quot;keyParts2&quot;: {\n        &quot;*&quot;: &quot;[#1].part2&quot;\n      },\n      &quot;values&quot;: {\n        &quot;*&quot;: &quot;[#1].value&quot;\n      }\n    }\n  },\n  {\n    &quot;operation&quot;: &quot;modify-default-beta&quot;,\n    &quot;spec&quot;: {\n      &quot;*&quot;: {\n        &quot;newKey&quot;: &quot;=split('-', @(1,part1))&quot;,\n        &quot;newKeyFirst&quot;: &quot;@(1,newKey[0])&quot;,\n        &quot;newKeyComplete&quot;: &quot;=concat(@(1,newKeyFirst),'-',@(1,part2))&quot;\n      }\n    }\n  },\n  {\n    &quot;operation&quot;: &quot;shift&quot;,\n    &quot;spec&quot;: {\n      &quot;*&quot;: {\n        &quot;value&quot;: &quot;@(1,newKeyComplete)&quot;\n      }\n    }\n  }\n]\n</code></pre>\n<p>Try to apply each of the operations separately (for example in the <a href=\"https://jolt-demo.appspot.com/\" rel=\"nofollow noreferrer\">demo app</a>).</p>\n<p>Check out the links to the jolt docs and the examples from <a href=\"https://stackoverflow.com/a/65208580/4880379\">this answer</a></p>\n<hr />\n<h3>Step by step explanation:</h3>\n<p>First <code>&quot;shift&quot;</code> transformation places the components of the final result in the separate arrays:</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;keyParts1&quot; : [ &quot;bloc1-1&quot;, &quot;bloc1-1&quot;, &quot;bloc2-1&quot;, &quot;bloc2-1&quot;, &quot;bloc2-1&quot; ],\n  &quot;keyParts2&quot; : [ &quot;key1&quot;, &quot;key2&quot;, &quot;key1&quot;, &quot;key2&quot;, &quot;key3&quot; ],\n  &quot;values&quot; : [ &quot;value1-1&quot;, &quot;value1-2&quot;, &quot;value2-1&quot;, &quot;value2-2&quot;, &quot;value2-3&quot; ]\n}\n</code></pre>\n<p>The above operation let us have each of the components of the end result positioned in the right index of the desired result.\nNote that each array has the same size.\nIn the second operation we group each of the array elements by its index using the <code>#</code> operator. Looking at the <a href=\"https://github.com/bazaarvoice/jolt/blob/master/jolt-core/src/main/java/com/bazaarvoice/jolt/Shiftr.java#L261\" rel=\"nofollow noreferrer\">docs</a> <code>[#1]</code> can be translated to:</p>\n<blockquote>\n<p>&quot;Go up one level and ask that node how many matches it has had before finding the current element&quot;.</p>\n</blockquote>\n<p>The node above is an array, so for the 3rd array element it will be the array index <code>2</code>.</p>\n<pre class=\"lang-json prettyprint-override\"><code>[\n  ...\n  {\n    &quot;part1&quot; : &quot;bloc2-1&quot;,\n    &quot;part2&quot; : &quot;key1&quot;,\n    &quot;value&quot; : &quot;value2-1&quot;\n  }\n  ...\n]\n</code></pre>\n<p>In the 3rd operation <strong>I have assumed</strong> that the key of the desired result is the concatenation of the <code>&quot;blocX&quot;</code> substring of the <code>&quot;blocX-Y&quot;</code> key concatenated with the <code>&quot;key&quot;</code> value. That's why I've used the <code>&quot;modify-default-beta&quot;</code>. Have a look at <a href=\"https://jolt-demo.appspot.com/#modify-stringFunctions\" rel=\"nofollow noreferrer\">the example from the demo app</a>\nEach of five elements of the array is transformed similarly to the 3rd array element:</p>\n<pre class=\"lang-json prettyprint-override\"><code>[\n  ...\n  {\n    &quot;part1&quot; : &quot;bloc2-1&quot;,\n    &quot;part2&quot; : &quot;key1&quot;,\n    &quot;value&quot; : &quot;value2-1&quot;,\n    &quot;newKey&quot; : [ &quot;bloc2&quot;, &quot;1&quot; ],\n    &quot;newKeyFirst&quot; : &quot;bloc2&quot;,\n    &quot;newKeyComplete&quot; : &quot;bloc2-key1&quot;\n  }\n  ...\n]\n</code></pre>\n<p>The last operation produces the desired result from the 3rd operation's output.</p>\n"},{"tags":[],"owner":{"account_id":13009011,"reputation":1105,"user_id":9402689,"display_name":"Raymond Choi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664905500,"creation_date":1664905500,"answer_id":73951722,"question_id":70975621,"body_markdown":"You may consider another library _Josson_.\r\n\r\nhttps://github.com/octomix/josson\r\n\r\n    Josson josson = Josson.fromJsonString(inputJSON);\r\n\r\n    JsonNode node = josson.getNode(\r\n        &quot;entries()&quot; +        // Field &quot;key&quot; generated by entries() is the same as the inner one.\r\n        &quot;.field(k:key)&quot; +    // So, rename it to &quot;k&quot;.\r\n        &quot;.unwind(value.*)&quot; + // Unwind the &quot;value&quot; generated by entries(), not the inner &quot;value&quot;.\r\n        &quot;.map(concat(k.keepBefore(&#39;-&#39;),&#39;-&#39;,key)::value)&quot; +\r\n        &quot;.mergeObjects()&quot;);\r\n    System.out.println(node.toPrettyString());\r\n\r\nOutput\r\n\r\n    {\r\n      &quot;bloc1-key1&quot; : &quot;value1-1&quot;,\r\n      &quot;bloc1-key2&quot; : &quot;value1-2&quot;,\r\n      &quot;bloc2-key1&quot; : &quot;value2-1&quot;,\r\n      &quot;bloc2-key2&quot; : &quot;value2-2&quot;,\r\n      &quot;bloc2-key3&quot; : &quot;value2-3&quot;\r\n    }","title":"Java Jolt: can&#39;t find proper spec for my transformation","body":"<p>You may consider another library <em>Josson</em>.</p>\n<p><a href=\"https://github.com/octomix/josson\" rel=\"nofollow noreferrer\">https://github.com/octomix/josson</a></p>\n<pre><code>Josson josson = Josson.fromJsonString(inputJSON);\n\nJsonNode node = josson.getNode(\n    &quot;entries()&quot; +        // Field &quot;key&quot; generated by entries() is the same as the inner one.\n    &quot;.field(k:key)&quot; +    // So, rename it to &quot;k&quot;.\n    &quot;.unwind(value.*)&quot; + // Unwind the &quot;value&quot; generated by entries(), not the inner &quot;value&quot;.\n    &quot;.map(concat(k.keepBefore('-'),'-',key)::value)&quot; +\n    &quot;.mergeObjects()&quot;);\nSystem.out.println(node.toPrettyString());\n</code></pre>\n<p>Output</p>\n<pre><code>{\n  &quot;bloc1-key1&quot; : &quot;value1-1&quot;,\n  &quot;bloc1-key2&quot; : &quot;value1-2&quot;,\n  &quot;bloc2-key1&quot; : &quot;value2-1&quot;,\n  &quot;bloc2-key2&quot; : &quot;value2-2&quot;,\n  &quot;bloc2-key3&quot; : &quot;value2-3&quot;\n}\n</code></pre>\n"}],"owner":{"account_id":24146613,"reputation":23,"user_id":18112106,"display_name":"JacquesD"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":156,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":70977072,"answer_count":2,"score":2,"last_activity_date":1664905500,"creation_date":1643908958,"question_id":70975621,"body_markdown":"I&#39;m struggling with that Jolt transformation:\r\nHere is my input JSON\r\n```json\r\n{\r\n  &quot;bloc1-1&quot;: {\r\n    &quot;bloc1-2&quot;: [\r\n      {\r\n        &quot;key&quot;: &quot;key1&quot;,\r\n        &quot;value&quot;: &quot;value1-1&quot;\r\n      },\r\n      {\r\n        &quot;key&quot;: &quot;key2&quot;,\r\n        &quot;value&quot;: &quot;value1-2&quot;\r\n      }\r\n    ]\r\n  },\r\n  &quot;bloc2-1&quot;: {\r\n    &quot;bloc2-2&quot;: [\r\n      {\r\n        &quot;key&quot;: &quot;key1&quot;,\r\n        &quot;value&quot;: &quot;value2-1&quot;\r\n      },\r\n      {\r\n        &quot;key&quot;: &quot;key2&quot;,\r\n        &quot;value&quot;: &quot;value2-2&quot;\r\n      },\r\n      {\r\n        &quot;key&quot;: &quot;key3&quot;,\r\n        &quot;value&quot;: &quot;value2-3&quot;\r\n      }\r\n    ]\r\n  }\r\n}\r\n````\r\nHere is what I&#39;m expecting\r\n```json\r\n{\r\n  &quot;bloc1-key1&quot; : &quot;value1-1&quot;,\r\n  &quot;bloc1-key2&quot; : &quot;value1-2&quot;,\r\n  &quot;bloc2-key1&quot; : &quot;value2-1&quot;,\r\n  &quot;bloc2-key2&quot; : &quot;value2-2&quot;,\r\n  &quot;bloc2-key3&quot; : &quot;value2-3&quot;\r\n}\r\n```\r\n\r\nI have tried the following spec, but I cannot figure out how to prefix the key in the RHS (the @ should be the first character)\r\n```json\r\n[\r\n  {\r\n    &quot;operation&quot;: &quot;shift&quot;,\r\n    &quot;spec&quot;: {\r\n      &quot;*&quot;: {\r\n        &quot;*&quot;: {\r\n          &quot;*&quot;: {\r\n            &quot;value&quot;: &quot;@(1,key)&quot;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n]\r\n``` \r\nand got that\r\n\r\n```json\r\n{\r\n  &quot;key1&quot; : [ &quot;value1-1&quot;, &quot;value2-1&quot; ],\r\n  &quot;key2&quot; : [ &quot;value1-2&quot;, &quot;value2-2&quot; ],\r\n  &quot;key3&quot; : &quot;value2-3&quot;\r\n}\r\n```\r\nAny help would be appreciated","title":"Java Jolt: can&#39;t find proper spec for my transformation","body":"<p>I'm struggling with that Jolt transformation:\nHere is my input JSON</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;bloc1-1&quot;: {\n    &quot;bloc1-2&quot;: [\n      {\n        &quot;key&quot;: &quot;key1&quot;,\n        &quot;value&quot;: &quot;value1-1&quot;\n      },\n      {\n        &quot;key&quot;: &quot;key2&quot;,\n        &quot;value&quot;: &quot;value1-2&quot;\n      }\n    ]\n  },\n  &quot;bloc2-1&quot;: {\n    &quot;bloc2-2&quot;: [\n      {\n        &quot;key&quot;: &quot;key1&quot;,\n        &quot;value&quot;: &quot;value2-1&quot;\n      },\n      {\n        &quot;key&quot;: &quot;key2&quot;,\n        &quot;value&quot;: &quot;value2-2&quot;\n      },\n      {\n        &quot;key&quot;: &quot;key3&quot;,\n        &quot;value&quot;: &quot;value2-3&quot;\n      }\n    ]\n  }\n}\n</code></pre>\n<p>Here is what I'm expecting</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;bloc1-key1&quot; : &quot;value1-1&quot;,\n  &quot;bloc1-key2&quot; : &quot;value1-2&quot;,\n  &quot;bloc2-key1&quot; : &quot;value2-1&quot;,\n  &quot;bloc2-key2&quot; : &quot;value2-2&quot;,\n  &quot;bloc2-key3&quot; : &quot;value2-3&quot;\n}\n</code></pre>\n<p>I have tried the following spec, but I cannot figure out how to prefix the key in the RHS (the @ should be the first character)</p>\n<pre class=\"lang-json prettyprint-override\"><code>[\n  {\n    &quot;operation&quot;: &quot;shift&quot;,\n    &quot;spec&quot;: {\n      &quot;*&quot;: {\n        &quot;*&quot;: {\n          &quot;*&quot;: {\n            &quot;value&quot;: &quot;@(1,key)&quot;\n          }\n        }\n      }\n    }\n  }\n]\n</code></pre>\n<p>and got that</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;key1&quot; : [ &quot;value1-1&quot;, &quot;value2-1&quot; ],\n  &quot;key2&quot; : [ &quot;value1-2&quot;, &quot;value2-2&quot; ],\n  &quot;key3&quot; : &quot;value2-3&quot;\n}\n</code></pre>\n<p>Any help would be appreciated</p>\n"},{"tags":["java","android","kotlin","dependency-injection","dagger-2"],"comments":[{"owner":{"account_id":4519550,"reputation":5971,"user_id":3673259,"accept_rate":94,"display_name":"Joshua"},"score":0,"creation_date":1548139134,"post_id":54302447,"comment_id":95424933,"body_markdown":"Your library should provide a custom `Application` that extends `DaggerApplication`. However, it is not recommended to use Dagger in a library.","body":"Your library should provide a custom <code>Application</code> that extends <code>DaggerApplication</code>. However, it is not recommended to use Dagger in a library."},{"owner":{"account_id":5417545,"reputation":316,"user_id":4312282,"accept_rate":40,"display_name":"mangkool"},"score":0,"creation_date":1548139486,"post_id":54302447,"comment_id":95425069,"body_markdown":"thanks @Joshua , are there any reasons why it is not recommended to use dagger in library ?","body":"thanks @Joshua , are there any reasons why it is not recommended to use dagger in library ?"},{"owner":{"account_id":4519550,"reputation":5971,"user_id":3673259,"accept_rate":94,"display_name":"Joshua"},"score":0,"creation_date":1548140379,"post_id":54302447,"comment_id":95425412,"body_markdown":"When you build a library, you should not require the application to use dependency inject framework because dependency inject framework is designed for application level. Instead, you should design your library to follow the principle. You can read more [here](https://stackoverflow.com/a/2047657/3673259).","body":"When you build a library, you should not require the application to use dependency inject framework because dependency inject framework is designed for application level. Instead, you should design your library to follow the principle. You can read more <a href=\"https://stackoverflow.com/a/2047657/3673259\">here</a>."},{"owner":{"account_id":5417545,"reputation":316,"user_id":4312282,"accept_rate":40,"display_name":"mangkool"},"score":0,"creation_date":1548141550,"post_id":54302447,"comment_id":95425925,"body_markdown":"okayy, I see, thanks","body":"okayy, I see, thanks"}],"answers":[{"tags":[],"owner":{"account_id":13532704,"reputation":7,"user_id":9762686,"display_name":"Kavinrajan"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1664905459,"creation_date":1664905459,"answer_id":73951710,"question_id":54302447,"body_markdown":"It was because of **missing android:name key** with the value of my Application subclass **to my manifest file**.\r\n\r\nEg:  Add **android:name=&quot;.**MyApplication**&quot;** in your manifest under application tag. Change the &#39;MyApplication&#39; to the name of your application class","title":"Using dagger 2 in stand alone android library project","body":"<p>It was because of <strong>missing android:name key</strong> with the value of my Application subclass <strong>to my manifest file</strong>.</p>\n<p>Eg:  Add <strong>android:name=&quot;.<strong>MyApplication</strong>&quot;</strong> in your manifest under application tag. Change the 'MyApplication' to the name of your application class</p>\n"}],"owner":{"account_id":5417545,"reputation":316,"user_id":4312282,"accept_rate":40,"display_name":"mangkool"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1114,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1664905459,"creation_date":1548138551,"question_id":54302447,"body_markdown":"I am trying to create a stand alone library and use dagger 2 in it, I already create the module and the component of the library, and make the initialisation of the library including the dagger component, my goal here is I wanted this library can be used even the project who implemented it did not use dagger. but it seems my configuration only can work if the project implemented it, also use dagger2 cause I got error :\r\n\r\n    Application does not implement dagger.android.HasDispatchingActivityInjector\r\n\r\nSo are there anyway I can still dagger2 in my library without having the project who implemented it also use dagger2 ?\r\n\r\nps : My library contain an activity\r\n","title":"Using dagger 2 in stand alone android library project","body":"<p>I am trying to create a stand alone library and use dagger 2 in it, I already create the module and the component of the library, and make the initialisation of the library including the dagger component, my goal here is I wanted this library can be used even the project who implemented it did not use dagger. but it seems my configuration only can work if the project implemented it, also use dagger2 cause I got error :</p>\n\n<pre><code>Application does not implement dagger.android.HasDispatchingActivityInjector\n</code></pre>\n\n<p>So are there anyway I can still dagger2 in my library without having the project who implemented it also use dagger2 ?</p>\n\n<p>ps : My library contain an activity</p>\n"},{"tags":["java","spring","spring-mvc","spring-batch","spring-framework-beans"],"answers":[{"tags":[],"owner":{"account_id":1408815,"reputation":2002,"user_id":1811348,"accept_rate":88,"display_name":"swapyonubuntu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1664904343,"creation_date":1664904343,"answer_id":73951527,"question_id":73949989,"body_markdown":"You can lazy initialize spring configuration for batch for this case.\r\n\r\n**Refer:**  \r\nhttps://www.baeldung.com/spring-lazy-annotation. \r\nhttps://howtodoinjava.com/spring5/core/spring-bean-eager-vs-lazy-init/\r\n","title":"how can i execute constructor only when i execute batch process?","body":"<p>You can lazy initialize spring configuration for batch for this case.</p>\n<p><strong>Refer:</strong><br />\n<a href=\"https://www.baeldung.com/spring-lazy-annotation\" rel=\"nofollow noreferrer\">https://www.baeldung.com/spring-lazy-annotation</a>.\n<a href=\"https://howtodoinjava.com/spring5/core/spring-bean-eager-vs-lazy-init/\" rel=\"nofollow noreferrer\">https://howtodoinjava.com/spring5/core/spring-bean-eager-vs-lazy-init/</a></p>\n"}],"owner":{"account_id":16002638,"reputation":15,"user_id":11548881,"display_name":"Companion Cube"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":127,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73951527,"answer_count":1,"score":0,"last_activity_date":1664904343,"creation_date":1664896171,"question_id":73949989,"body_markdown":"I&#39;m making batch process using spring batch. \r\n\r\n\r\nI intend to integrate spring batch into spring-webmvc project.\r\n\r\nBut, when I start spring-webmvc server, spring batch&#39;s ItemReader, ItemProcessor, ItemWriter Constructors called. \r\n\r\nI used constructors to get batch data from database, so I expect database&#39;s data will be remained in memory. \r\n\r\nI think it may cause waste of memory.\r\n\r\nSo how can I call these constructors only when I execute batch process?\r\n\r\nHere is my batch configuration. \r\n\r\n```java\r\n@Configuration\r\n@EnableBatchProcessing\r\npublic class DbSyncConfiguration {\r\n  @Autowired\r\n  private JobBuilderFactory jobBuilderFactory;\r\n  @Autowired\r\n  private StepBuilderFactory stepBuilderFactory;\r\n  private final int BATCH_SIZE = 1000;\r\n\r\n\r\n\r\n  @Bean\r\n  public Job dbSyncJob() {\r\n    return this.jobBuilderFactory.get(&quot;dbSyncJob&quot;)\r\n            .incrementer(new RunIdIncrementer())\r\n            .start(this.userParseStep())\r\n            .build();\r\n  }\r\n\r\n  @Bean\r\n  public Step userParseStep() {\r\n    return this.stepBuilderFactory.get(&quot;userParseStep&quot;)\r\n            .&lt;ParseItem, ParseItem&gt;chunk(BATCH_SIZE)\r\n            .reader(new UserItemParseReader())\r\n            .writer(new UserItemParseWriter())\r\n            .build();\r\n  }\r\n}\r\n```","title":"how can i execute constructor only when i execute batch process?","body":"<p>I'm making batch process using spring batch.</p>\n<p>I intend to integrate spring batch into spring-webmvc project.</p>\n<p>But, when I start spring-webmvc server, spring batch's ItemReader, ItemProcessor, ItemWriter Constructors called.</p>\n<p>I used constructors to get batch data from database, so I expect database's data will be remained in memory.</p>\n<p>I think it may cause waste of memory.</p>\n<p>So how can I call these constructors only when I execute batch process?</p>\n<p>Here is my batch configuration.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\n@EnableBatchProcessing\npublic class DbSyncConfiguration {\n  @Autowired\n  private JobBuilderFactory jobBuilderFactory;\n  @Autowired\n  private StepBuilderFactory stepBuilderFactory;\n  private final int BATCH_SIZE = 1000;\n\n\n\n  @Bean\n  public Job dbSyncJob() {\n    return this.jobBuilderFactory.get(&quot;dbSyncJob&quot;)\n            .incrementer(new RunIdIncrementer())\n            .start(this.userParseStep())\n            .build();\n  }\n\n  @Bean\n  public Step userParseStep() {\n    return this.stepBuilderFactory.get(&quot;userParseStep&quot;)\n            .&lt;ParseItem, ParseItem&gt;chunk(BATCH_SIZE)\n            .reader(new UserItemParseReader())\n            .writer(new UserItemParseWriter())\n            .build();\n  }\n}\n</code></pre>\n"},{"tags":["java","gradle","javafx","jpackage"],"answers":[{"tags":[],"owner":{"account_id":5347179,"reputation":10433,"user_id":4262407,"accept_rate":40,"display_name":"mipa"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1588837124,"creation_date":1588837124,"answer_id":61652289,"question_id":61651873,"body_markdown":"I have never used that plugin but I would try adding `&#39;--icon&#39;, &#39;icon.ico&#39;` to the installerOptions and not the imageOptions.","title":"How to set application icon in JavaFX 15-ea+3","body":"<p>I have never used that plugin but I would try adding <code>'--icon', 'icon.ico'</code> to the installerOptions and not the imageOptions.</p>\n"},{"tags":[],"owner":{"account_id":4881147,"reputation":340,"user_id":3934903,"display_name":"Joseph Sang"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664904215,"creation_date":1664904215,"answer_id":73951507,"question_id":61651873,"body_markdown":"If it&#39;s not too late, or for anyone else with this issue,instead of\r\n\r\n    imageOptions = [&#39;--icon icon.ico&#39;]\r\n\r\nuse \r\n\r\n    imageOptions = [&#39;--icon&#39;, &#39;icon.ico&#39;]\r\nThis worked for me.","title":"How to set application icon in JavaFX 15-ea+3","body":"<p>If it's not too late, or for anyone else with this issue,instead of</p>\n<pre><code>imageOptions = ['--icon icon.ico']\n</code></pre>\n<p>use</p>\n<pre><code>imageOptions = ['--icon', 'icon.ico']\n</code></pre>\n<p>This worked for me.</p>\n"}],"owner":{"account_id":13096837,"reputation":191,"user_id":9462532,"display_name":"Amir Victor"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":338,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1664904215,"creation_date":1588835606,"question_id":61651873,"body_markdown":"I have made a JavaFX project with the following details:\r\n\r\n**`OpenJFX 15-ea+3` / `JDK 14` / `Gradle` / `Non-modular`**\r\n\r\nAlso, I use the following Gradle plugins:\r\n\r\n**`javafxplugin version 0.0.8` / `org.beryx.runtime version 1.8.2` &amp; `com.github.johnrengelman.shadow version 5.2.0` (For creating native images)**\r\n\r\nIn addition, JDK 14 `jpackage` tool is used to create installer package for the application. Here is `build.gradle` file:\r\n\r\n```\r\nplugins {\r\n    id &#39;java&#39;\r\n    id &#39;application&#39;\r\n    id &#39;org.openjfx.javafxplugin&#39; version &#39;0.0.8&#39;\r\n    id &#39;org.beryx.runtime&#39; version &#39;1.8.2&#39;\r\n    id &quot;com.github.johnrengelman.shadow&quot; version &quot;5.2.0&quot;\r\n}\r\n\r\ngroup &#39;com.pastor&#39;\r\nversion &#39;1.0-SNAPSHOT&#39;\r\n\r\nsourceCompatibility = 14\r\ntargetCompatibility = 14\r\n//This option is for rendering persian characters encoding\r\ncompileJava.options.encoding = &#39;UTF-8&#39;\r\n\r\njavafx {\r\n    version = &quot;15-ea+3&quot;\r\n    modules = [ &#39;javafx.controls&#39;, &#39;javafx.fxml&#39;]\r\n}\r\n\r\nrepositories {\r\n    mavenCentral()\r\n}\r\n\r\ndependencies {\r\n    runtimeOnly &quot;org.openjfx:javafx-controls:$javafx.version:win&quot;\r\n    runtimeOnly &quot;org.openjfx:javafx-fxml:$javafx.version:win&quot;\r\n    runtimeOnly &quot;org.openjfx:javafx-media:$javafx.version:win&quot;\r\n    compile group: &#39;com.jfoenix&#39;, name: &#39;jfoenix&#39;, version: &#39;9.0.9&#39;\r\n    compile &#39;de.jensd:fontawesomefx-fontawesome:4.7.0-9.1.2&#39;\r\n    compile &#39;de.jensd:fontawesomefx-icons525:4.2.0-9.1.2&#39;\r\n    compile &#39;de.jensd:fontawesomefx-materialdesignfont:2.0.26-9.1.2&#39;\r\n    compile &#39;de.jensd:fontawesomefx-materialicons:2.2.0-9.1.2&#39;\r\n    compile group: &#39;org.controlsfx&#39;, name: &#39;controlsfx&#39;, version: &#39;11.0.1&#39;\r\n}\r\n\r\nruntime {\r\n    options = [&#39;--strip-debug&#39;, &#39;--compress&#39;, &#39;2&#39;, &#39;--no-header-files&#39;, &#39;--no-man-pages&#39;]\r\n    jpackage {\r\n        if(org.gradle.internal.os.OperatingSystem.current().windows) {\r\n            appVersion = &#39;1.0.0&#39;\r\n            skipInstaller = false\r\n            installerName = &#39;Pastor apartment unit management system&#39;\r\n            installerType = &#39;exe&#39;\r\n            installerOptions = [&#39;--win-per-user-install&#39;, &#39;--win-dir-chooser&#39;, &#39;--win-menu&#39;, &#39;--win-shortcut&#39;]\r\n        }\r\n    }\r\n}\r\nmainClassName = &#39;sample.Launcher&#39;\r\n```\r\n\r\nI already tried `imageOptions = [&#39;--icon icon.ico&#39;]` within `jpackage` block but I always get this kind of error:\r\n\r\n```\r\nError: Invalid Option: [--icon app.ico]\r\n``` \r\n\r\nAny useful suggestions or tips are greatly appreciated.","title":"How to set application icon in JavaFX 15-ea+3","body":"<p>I have made a JavaFX project with the following details:</p>\n\n<p><strong><code>OpenJFX 15-ea+3</code> / <code>JDK 14</code> / <code>Gradle</code> / <code>Non-modular</code></strong></p>\n\n<p>Also, I use the following Gradle plugins:</p>\n\n<p><strong><code>javafxplugin version 0.0.8</code> / <code>org.beryx.runtime version 1.8.2</code> &amp; <code>com.github.johnrengelman.shadow version 5.2.0</code> (For creating native images)</strong></p>\n\n<p>In addition, JDK 14 <code>jpackage</code> tool is used to create installer package for the application. Here is <code>build.gradle</code> file:</p>\n\n<pre><code>plugins {\n    id 'java'\n    id 'application'\n    id 'org.openjfx.javafxplugin' version '0.0.8'\n    id 'org.beryx.runtime' version '1.8.2'\n    id \"com.github.johnrengelman.shadow\" version \"5.2.0\"\n}\n\ngroup 'com.pastor'\nversion '1.0-SNAPSHOT'\n\nsourceCompatibility = 14\ntargetCompatibility = 14\n//This option is for rendering persian characters encoding\ncompileJava.options.encoding = 'UTF-8'\n\njavafx {\n    version = \"15-ea+3\"\n    modules = [ 'javafx.controls', 'javafx.fxml']\n}\n\nrepositories {\n    mavenCentral()\n}\n\ndependencies {\n    runtimeOnly \"org.openjfx:javafx-controls:$javafx.version:win\"\n    runtimeOnly \"org.openjfx:javafx-fxml:$javafx.version:win\"\n    runtimeOnly \"org.openjfx:javafx-media:$javafx.version:win\"\n    compile group: 'com.jfoenix', name: 'jfoenix', version: '9.0.9'\n    compile 'de.jensd:fontawesomefx-fontawesome:4.7.0-9.1.2'\n    compile 'de.jensd:fontawesomefx-icons525:4.2.0-9.1.2'\n    compile 'de.jensd:fontawesomefx-materialdesignfont:2.0.26-9.1.2'\n    compile 'de.jensd:fontawesomefx-materialicons:2.2.0-9.1.2'\n    compile group: 'org.controlsfx', name: 'controlsfx', version: '11.0.1'\n}\n\nruntime {\n    options = ['--strip-debug', '--compress', '2', '--no-header-files', '--no-man-pages']\n    jpackage {\n        if(org.gradle.internal.os.OperatingSystem.current().windows) {\n            appVersion = '1.0.0'\n            skipInstaller = false\n            installerName = 'Pastor apartment unit management system'\n            installerType = 'exe'\n            installerOptions = ['--win-per-user-install', '--win-dir-chooser', '--win-menu', '--win-shortcut']\n        }\n    }\n}\nmainClassName = 'sample.Launcher'\n</code></pre>\n\n<p>I already tried <code>imageOptions = ['--icon icon.ico']</code> within <code>jpackage</code> block but I always get this kind of error:</p>\n\n<pre><code>Error: Invalid Option: [--icon app.ico]\n</code></pre>\n\n<p>Any useful suggestions or tips are greatly appreciated.</p>\n"},{"tags":["java","selenium","button","xpath","webdriver"],"answers":[{"tags":[],"owner":{"account_id":15083819,"reputation":33038,"user_id":10885684,"display_name":"KunduK"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1664904206,"creation_date":1664901362,"answer_id":73950992,"question_id":73950795,"body_markdown":"\r\n\r\n    &lt;div class=&quot;row attachment-files-item&quot; style=&quot;display: none;&quot;&gt;\r\n    &lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-link add-row&quot;&gt;Upload File&lt;/button&gt;\r\n    &lt;/div&gt;\r\n\r\nIf you see the parent element of the button, Its style `style=&quot;display: none;` means it is hidden on the page.\r\nYou need to change the style to `style=&quot;display: block;` to unhide this.\r\n\r\nuse javascript executor to set the attribute.\r\n\r\n    ele =driver.findElement(By.xpath(&quot;//div[@class=&#39;row attachment-files-item&#39;]&quot;));\r\n    ((JavascriptExecutor) driver).executeScript(&quot;arguments[0].setAttribute(&#39;style&#39;,&#39;display:block;&#39;)&quot;, ele);\r\n    \r\n    driver.findElement(By.xpath(&quot;//div[@class=&#39;row attachment-files-item&#39;]//button[text()=&#39;Upload File&#39;]&quot;)).click();\r\n\r\nplease add delay while interacting either implicit or explicit.","title":"2-Buttons merged. Not able to select the first one in JAVA &amp; SELENIUM","body":"<pre><code>&lt;div class=&quot;row attachment-files-item&quot; style=&quot;display: none;&quot;&gt;\n&lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-link add-row&quot;&gt;Upload File&lt;/button&gt;\n&lt;/div&gt;\n</code></pre>\n<p>If you see the parent element of the button, Its style <code>style=&quot;display: none;</code> means it is hidden on the page.\nYou need to change the style to <code>style=&quot;display: block;</code> to unhide this.</p>\n<p>use javascript executor to set the attribute.</p>\n<pre><code>ele =driver.findElement(By.xpath(&quot;//div[@class='row attachment-files-item']&quot;));\n((JavascriptExecutor) driver).executeScript(&quot;arguments[0].setAttribute('style','display:block;')&quot;, ele);\n\ndriver.findElement(By.xpath(&quot;//div[@class='row attachment-files-item']//button[text()='Upload File']&quot;)).click();\n</code></pre>\n<p>please add delay while interacting either implicit or explicit.</p>\n"}],"owner":{"account_id":10668049,"reputation":773,"user_id":15061831,"display_name":"JustToKnow"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73950992,"answer_count":1,"score":1,"last_activity_date":1664904206,"creation_date":1664900422,"question_id":73950795,"body_markdown":"I&#39;m working with a multi-language page and i got a button called **Upload File**\r\n\r\n[![enter image description here][1]][1]\r\n\r\nI tried to click on that button using Selenium and JAVA but not matter what it cannot be clicked:\r\n\r\nThat button has this:\r\n\r\n    &lt;div class=&quot;row attachment-files-item&quot; style=&quot;display: none;&quot;&gt;\r\n    &lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-link add-row&quot;&gt;Upload File&lt;/button&gt;\r\n    &lt;/div&gt;\r\n\r\nThe XPATH is:\r\n\r\n    //*[@id=&quot;documentation&quot;]/div/div[2]/div/button\r\n\r\nI tried to do something like this:\r\n\r\n    driver.findElement(By.xpath(&quot;//*[@id=\\&quot;documentation\\&quot;]/div/div[2]/div/button&quot;)).click();\r\n\r\nIt is not working, i cannot reach to the second button.\r\n\r\nWhat am i doing wrong?\r\n\r\n----------------------------------\r\nEDIT#1:\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/gIK16.gif\r\n  [2]: https://i.stack.imgur.com/6myyO.gif","title":"2-Buttons merged. Not able to select the first one in JAVA &amp; SELENIUM","body":"<p>I'm working with a multi-language page and i got a button called <strong>Upload File</strong></p>\n<p><a href=\"https://i.stack.imgur.com/gIK16.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gIK16.gif\" alt=\"enter image description here\" /></a></p>\n<p>I tried to click on that button using Selenium and JAVA but not matter what it cannot be clicked:</p>\n<p>That button has this:</p>\n<pre><code>&lt;div class=&quot;row attachment-files-item&quot; style=&quot;display: none;&quot;&gt;\n&lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-link add-row&quot;&gt;Upload File&lt;/button&gt;\n&lt;/div&gt;\n</code></pre>\n<p>The XPATH is:</p>\n<pre><code>//*[@id=&quot;documentation&quot;]/div/div[2]/div/button\n</code></pre>\n<p>I tried to do something like this:</p>\n<pre><code>driver.findElement(By.xpath(&quot;//*[@id=\\&quot;documentation\\&quot;]/div/div[2]/div/button&quot;)).click();\n</code></pre>\n<p>It is not working, i cannot reach to the second button.</p>\n<p>What am i doing wrong?</p>\n<hr />\n<p>EDIT#1:\n<a href=\"https://i.stack.imgur.com/6myyO.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/6myyO.gif\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","hibernate","postgresql","jpa","uuid"],"comments":[{"owner":{"account_id":277416,"reputation":681848,"user_id":571407,"accept_rate":100,"display_name":"JB Nizet"},"score":1,"creation_date":1341166257,"post_id":11284359,"comment_id":14842503,"body_markdown":"possible duplicate of [Postgresql UUID supported by Hibernate?](http://stackoverflow.com/questions/4495233/postgresql-uuid-supported-by-hibernate)","body":"possible duplicate of <a href=\"http://stackoverflow.com/questions/4495233/postgresql-uuid-supported-by-hibernate\">Postgresql UUID supported by Hibernate?</a>"},{"owner":{"account_id":176507,"reputation":5460,"user_id":407249,"accept_rate":86,"display_name":"ehsanullahjan"},"score":0,"creation_date":1341195452,"post_id":11284359,"comment_id":14847213,"body_markdown":"As I mentioned in my post, there are many questions on SO with the same problem but they are all old and none seem to have a good, working solution. The post you mentioned is no exception (which, btw, I saw before I posted my question).","body":"As I mentioned in my post, there are many questions on SO with the same problem but they are all old and none seem to have a good, working solution. The post you mentioned is no exception (which, btw, I saw before I posted my question)."}],"answers":[{"tags":[],"owner":{"account_id":1086765,"reputation":9377,"user_id":1082300,"accept_rate":50,"display_name":"Steve Ebersole"},"down_vote_count":0,"up_vote_count":43,"is_accepted":true,"score":43,"last_activity_date":1349889400,"creation_date":1349889400,"answer_id":12824827,"question_id":11284359,"body_markdown":"The PostgreSQL JDBC driver has chosen an unfortunately way to represent non-JDBC-standard type codes.  They simply map all of them to Types.OTHER.  Long story short, you need to enable a special Hibernate type mapping for handling UUID mappings (to columns of the postgres-specific uuid datatype):\r\n\r\n    @Id\r\n    @Column(name = &quot;customer_id&quot;)\r\n    @org.hibernate.annotations.Type(type=&quot;org.hibernate.type.PostgresUUIDType&quot;)\r\n    private UUID id;\r\n\r\nor more succinctly:\r\n\r\n    @Id\r\n    @Column(name = &quot;customer_id&quot;)\r\n    @org.hibernate.annotations.Type(type=&quot;pg-uuid&quot;)\r\n    private UUID id;\r\n\r\nAnother (better) option is to register org.hibernate.type.PostgresUUIDType as the default Hibernate type mapping for all attributes exposed as java.util.UUID.  That is covered in the documentation @ http://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html/ch06.html#types-registry\r\n","title":"Persisting UUID in PostgreSQL using JPA","body":"<p>The PostgreSQL JDBC driver has chosen an unfortunately way to represent non-JDBC-standard type codes.  They simply map all of them to Types.OTHER.  Long story short, you need to enable a special Hibernate type mapping for handling UUID mappings (to columns of the postgres-specific uuid datatype):</p>\n\n<pre><code>@Id\n@Column(name = \"customer_id\")\n@org.hibernate.annotations.Type(type=\"org.hibernate.type.PostgresUUIDType\")\nprivate UUID id;\n</code></pre>\n\n<p>or more succinctly:</p>\n\n<pre><code>@Id\n@Column(name = \"customer_id\")\n@org.hibernate.annotations.Type(type=\"pg-uuid\")\nprivate UUID id;\n</code></pre>\n\n<p>Another (better) option is to register org.hibernate.type.PostgresUUIDType as the default Hibernate type mapping for all attributes exposed as java.util.UUID.  That is covered in the documentation @ <a href=\"http://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html/ch06.html#types-registry\">http://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html/ch06.html#types-registry</a></p>\n"},{"tags":[],"owner":{"account_id":259073,"reputation":8102,"user_id":541688,"display_name":"Oleg Estekhin"},"down_vote_count":1,"up_vote_count":20,"is_accepted":false,"score":19,"last_activity_date":1387551315,"creation_date":1372259575,"answer_id":17323965,"question_id":11284359,"body_markdown":"JPA 2.1 provides a very easy way to use the PostgreSQL uuid column type and `java.util.UUID` as the type of the corresponding entity field:\r\n\r\n    @javax.persistence.Converter(autoApply = true)\r\n    public class PostgresUuidConverter implements AttributeConverter&lt;UUID, UUID&gt; {\r\n    \r\n        @Override\r\n        public UUID convertToDatabaseColumn(UUID attribute) {\r\n            return attribute;\r\n        }\r\n    \r\n        @Override\r\n        public UUID convertToEntityAttribute(UUID dbData) {\r\n            return dbData;\r\n        }\r\n    \r\n    }\r\n\r\nJust add this class to your persistence configuration and annotate UUID fields with `@Column(columnDefinition=&quot;uuid&quot;)`.","title":"Persisting UUID in PostgreSQL using JPA","body":"<p>JPA 2.1 provides a very easy way to use the PostgreSQL uuid column type and <code>java.util.UUID</code> as the type of the corresponding entity field:</p>\n\n<pre><code>@javax.persistence.Converter(autoApply = true)\npublic class PostgresUuidConverter implements AttributeConverter&lt;UUID, UUID&gt; {\n\n    @Override\n    public UUID convertToDatabaseColumn(UUID attribute) {\n        return attribute;\n    }\n\n    @Override\n    public UUID convertToEntityAttribute(UUID dbData) {\n        return dbData;\n    }\n\n}\n</code></pre>\n\n<p>Just add this class to your persistence configuration and annotate UUID fields with <code>@Column(columnDefinition=\"uuid\")</code>.</p>\n"},{"tags":[],"owner":{"account_id":485627,"reputation":11,"user_id":902041,"display_name":"Ixim"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1406708859,"creation_date":1406708859,"answer_id":25032048,"question_id":11284359,"body_markdown":"The solution suggested by Oleg did not work perfectly for me (it failed if you tried to persist a null value). Here is a tweaked solution that also works for null values.\r\n\r\nIn my case i am using EclipseLink though so if you are using Hibernate you might not need this.\r\n\r\n    public class UuidConverter implements AttributeConverter&lt;UUID, Object&gt; {\r\n        @Override\r\n        public Object convertToDatabaseColumn(UUID uuid) {\r\n            PGobject object = new PGobject();\r\n            object.setType(&quot;uuid&quot;);\r\n            try {\r\n                if (uuid == null) {\r\n                    object.setValue(null);\r\n                } else {\r\n                    object.setValue(uuid.toString());\r\n                }\r\n            } catch (SQLException e) {\r\n                throw new IllegalArgumentException(&quot;Error when creating Postgres uuid&quot;, e);\r\n            }\r\n            return object;\r\n        }\r\n    \r\n        @Override\r\n        public UUID convertToEntityAttribute(Object dbData) {\r\n            return (UUID) dbData;\r\n        }\r\n    }","title":"Persisting UUID in PostgreSQL using JPA","body":"<p>The solution suggested by Oleg did not work perfectly for me (it failed if you tried to persist a null value). Here is a tweaked solution that also works for null values.</p>\n\n<p>In my case i am using EclipseLink though so if you are using Hibernate you might not need this.</p>\n\n<pre><code>public class UuidConverter implements AttributeConverter&lt;UUID, Object&gt; {\n    @Override\n    public Object convertToDatabaseColumn(UUID uuid) {\n        PGobject object = new PGobject();\n        object.setType(\"uuid\");\n        try {\n            if (uuid == null) {\n                object.setValue(null);\n            } else {\n                object.setValue(uuid.toString());\n            }\n        } catch (SQLException e) {\n            throw new IllegalArgumentException(\"Error when creating Postgres uuid\", e);\n        }\n        return object;\n    }\n\n    @Override\n    public UUID convertToEntityAttribute(Object dbData) {\n        return (UUID) dbData;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":57788,"reputation":46110,"user_id":173149,"accept_rate":62,"display_name":"gavenkoa"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1664904141,"creation_date":1410254915,"answer_id":25741125,"question_id":11284359,"body_markdown":"Newer version `&gt;= 8.4-701` of Postgresql JDBC driver correctly handle `java.util.UUID` mapping. And so do Hibernate `&gt;= 4.3.x`.\r\n\r\nSee details on https://stackoverflow.com/a/780922/173149:\r\n\r\n&gt; Map the database uuid type to java.util.UUID. This only works for\r\n&gt; relatively new server (8.3) and JDK (1.5) versions.","title":"Persisting UUID in PostgreSQL using JPA","body":"<p>Newer version <code>&gt;= 8.4-701</code> of Postgresql JDBC driver correctly handle <code>java.util.UUID</code> mapping. And so do Hibernate <code>&gt;= 4.3.x</code>.</p>\n<p>See details on <a href=\"https://stackoverflow.com/a/780922/173149\">https://stackoverflow.com/a/780922/173149</a>:</p>\n<blockquote>\n<p>Map the database uuid type to java.util.UUID. This only works for\nrelatively new server (8.3) and JDK (1.5) versions.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":8392695,"reputation":181,"user_id":6300929,"display_name":"Christophe"},"down_vote_count":0,"up_vote_count":18,"is_accepted":false,"score":18,"last_activity_date":1482208697,"creation_date":1482208697,"answer_id":41234990,"question_id":11284359,"body_markdown":"To have it working with Hibernate 5.1.x, you can follow Steve Ebersole [comment here][1]\r\n\r\n    @Id\r\n    @GeneratedValue\r\n    @Column( columnDefinition = &quot;uuid&quot;, updatable = false )\r\n    public UUID getId() {\r\n        return id;\r\n    }\r\n\r\n\r\n  [1]: https://hibernate.atlassian.net/browse/HHH-9562?focusedCommentId=66756&amp;page=com.atlassian.jira.plugin.system.issuetabpanels%3Acomment-tabpanel#comment-66756","title":"Persisting UUID in PostgreSQL using JPA","body":"<p>To have it working with Hibernate 5.1.x, you can follow Steve Ebersole <a href=\"https://hibernate.atlassian.net/browse/HHH-9562?focusedCommentId=66756&amp;page=com.atlassian.jira.plugin.system.issuetabpanels%3Acomment-tabpanel#comment-66756\" rel=\"noreferrer\">comment here</a></p>\n\n<pre><code>@Id\n@GeneratedValue\n@Column( columnDefinition = \"uuid\", updatable = false )\npublic UUID getId() {\n    return id;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11111404,"reputation":1,"user_id":8157076,"display_name":"Wesley Fuchter"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1512645433,"creation_date":1512645433,"answer_id":47693875,"question_id":11284359,"body_markdown":"Adds this flag on postgresql url connection: ?stringtype=unspecified\r\n\r\nlike that\r\n\r\njdbc:postgresql://localhost:5432/yourdatabase?stringtype=unspecified","title":"Persisting UUID in PostgreSQL using JPA","body":"<p>Adds this flag on postgresql url connection: ?stringtype=unspecified</p>\n\n<p>like that</p>\n\n<p>jdbc:postgresql://localhost:5432/yourdatabase?stringtype=unspecified</p>\n"}],"owner":{"account_id":176507,"reputation":5460,"user_id":407249,"accept_rate":86,"display_name":"ehsanullahjan"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":50953,"favorite_count":0,"down_vote_count":0,"up_vote_count":36,"accepted_answer_id":12824827,"answer_count":6,"score":36,"last_activity_date":1664904141,"creation_date":1341165275,"question_id":11284359,"body_markdown":"I&#39;m trying to persist an entity in PostgreSQL that uses UUID as primary key. I&#39;ve tried persisting it as a plain UUID:\r\n\r\n    @Id\r\n    @Column(name = &quot;customer_id&quot;)\r\n    private UUID id;\r\n\r\nWith the above, I get this error: \r\n\r\n    ERROR: column &quot;customer_id&quot; is of type uuid but expression is of type bytea\r\n    Hint: You will need to rewrite or cast the expression.\r\n    Position: 137\r\n\r\nI also tried persisting the UUID as byte[] to no avail:\r\n\r\n    @Transient\r\n    private UUID id;\r\n\r\n    @Id\r\n    @Column(name = &quot;customer_id&quot;)\r\n    @Access(AccessType.PROPERTY)\r\n    @Lob\r\n    protected byte[] getRowId() {\r\n        return id.toString().getBytes();\r\n    }\r\n\r\n    protected void setRowId(byte[] rowId) {\r\n        id = UUID.fromString(new String(rowId));\r\n    }\r\n\r\nIf I remove @Lob, the error I get is the same as the one posted above. But with @Lob applied, the error changes slightly to:\r\n\r\n    ERROR: column &quot;customer_id&quot; is of type uuid but expression is of type bigint\r\n    Hint: You will need to rewrite or cast the expression.\r\n    Position: 137\r\n\r\nI&#39;m feeling extremely bad being unable to do something as simple as this! \r\n\r\nI&#39;m using Hibernate 4.1.3.Final with PostgreSQL 9.1. \r\n\r\nI&#39;ve seen numerous questions on SO more or less with the same issue but they are all old and none seems to have a straight forward answer. \r\n\r\nI&#39;d like to achieve this in a standard way without resorting to ugly hacks. But if this can be achieved only though (ugly) hacks, then may be that&#39;s what I&#39;ll do. However, I don&#39;t want to store the UUID as a varchar in the database as that&#39;s not good for performance. Also, I&#39;d want to not introduce a Hibernate dependency in my code if possible.\r\n\r\nAny help would be greatly appreciated.\r\n\r\n*UPDATE 1* (2012-07-03 12:15 pm)\r\n\r\nWell, well, well... It&#39;s kinda interesting that I tested the exact same code (plain UUID, no conversion -- the first version of the code posted above) with SQL server 2008 R2 using the JTDS driver (v1.2.5) and, guess what, it worked as a charm (of course I had to change connection-related info in persistence.xml). \r\n\r\nNow, is it a PostgreSQL-specific issue or what?","title":"Persisting UUID in PostgreSQL using JPA","body":"<p>I'm trying to persist an entity in PostgreSQL that uses UUID as primary key. I've tried persisting it as a plain UUID:</p>\n\n<pre><code>@Id\n@Column(name = \"customer_id\")\nprivate UUID id;\n</code></pre>\n\n<p>With the above, I get this error: </p>\n\n<pre><code>ERROR: column \"customer_id\" is of type uuid but expression is of type bytea\nHint: You will need to rewrite or cast the expression.\nPosition: 137\n</code></pre>\n\n<p>I also tried persisting the UUID as byte[] to no avail:</p>\n\n<pre><code>@Transient\nprivate UUID id;\n\n@Id\n@Column(name = \"customer_id\")\n@Access(AccessType.PROPERTY)\n@Lob\nprotected byte[] getRowId() {\n    return id.toString().getBytes();\n}\n\nprotected void setRowId(byte[] rowId) {\n    id = UUID.fromString(new String(rowId));\n}\n</code></pre>\n\n<p>If I remove @Lob, the error I get is the same as the one posted above. But with @Lob applied, the error changes slightly to:</p>\n\n<pre><code>ERROR: column \"customer_id\" is of type uuid but expression is of type bigint\nHint: You will need to rewrite or cast the expression.\nPosition: 137\n</code></pre>\n\n<p>I'm feeling extremely bad being unable to do something as simple as this! </p>\n\n<p>I'm using Hibernate 4.1.3.Final with PostgreSQL 9.1. </p>\n\n<p>I've seen numerous questions on SO more or less with the same issue but they are all old and none seems to have a straight forward answer. </p>\n\n<p>I'd like to achieve this in a standard way without resorting to ugly hacks. But if this can be achieved only though (ugly) hacks, then may be that's what I'll do. However, I don't want to store the UUID as a varchar in the database as that's not good for performance. Also, I'd want to not introduce a Hibernate dependency in my code if possible.</p>\n\n<p>Any help would be greatly appreciated.</p>\n\n<p><em>UPDATE 1</em> (2012-07-03 12:15 pm)</p>\n\n<p>Well, well, well... It's kinda interesting that I tested the exact same code (plain UUID, no conversion -- the first version of the code posted above) with SQL server 2008 R2 using the JTDS driver (v1.2.5) and, guess what, it worked as a charm (of course I had to change connection-related info in persistence.xml). </p>\n\n<p>Now, is it a PostgreSQL-specific issue or what?</p>\n"},{"tags":["java","android","android-mediaplayer"],"answers":[{"tags":[],"owner":{"account_id":232182,"reputation":6622,"user_id":496854,"accept_rate":61,"display_name":"user496854"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664904137,"creation_date":1664706141,"answer_id":73925062,"question_id":73923427,"body_markdown":"Your code doesn&#39;t show MediaPlayer being initialized, so it would definitely crash as soon as you try to reference the `mp` instance. \r\n\r\nI&#39;m pretty sure that you misunderstood how `MediaPlayer` works. It&#39;s not a global service -- you have to manage each instance yourself. Based on your code, you&#39;re instantiating it twice in different places, and expecting them to somehow control the same instance. You&#39;re declaring and creating the `MediaPlayer`, and starting playback in your `FirebaseMessagingService` class, but you&#39;re trying to stop it in your `BroadcastReceiver` class. But there, you&#39;re trying to use a totally different instance of `MediaPlayer`, which has never been initialized, and that&#39;s why it&#39;s crashing.\r\n\r\nYou&#39;ll need to keep a global reference to your `mp` object (either in a singleton, or in your Application object), and change the rest of your code to use it properly. For example:\r\n\r\n     public class App extends Application {\r\n            public static MediaPlayer mp;\r\n        }\r\n    \r\n    public class Firebase extends FirebaseMessagingService {\r\n       ...\r\n\r\n       if(App.mp == null){\r\n            App.mp = MediaPlayer.create(this, Settings.System.DEFAULT_RINGTONE_URI);\r\n       }\r\n       App.mp.start();\r\n\r\n       ....\r\n    }\r\n\r\nand in your Broadcast Receiver:\r\n\r\n    if(App.mp != null){\r\n            App.mp.stop ();\r\n            App.mp = null\r\n       }\r\n\r\n","title":"mediaplayer.stop causes android app to crash","body":"<p>Your code doesn't show MediaPlayer being initialized, so it would definitely crash as soon as you try to reference the <code>mp</code> instance.</p>\n<p>I'm pretty sure that you misunderstood how <code>MediaPlayer</code> works. It's not a global service -- you have to manage each instance yourself. Based on your code, you're instantiating it twice in different places, and expecting them to somehow control the same instance. You're declaring and creating the <code>MediaPlayer</code>, and starting playback in your <code>FirebaseMessagingService</code> class, but you're trying to stop it in your <code>BroadcastReceiver</code> class. But there, you're trying to use a totally different instance of <code>MediaPlayer</code>, which has never been initialized, and that's why it's crashing.</p>\n<p>You'll need to keep a global reference to your <code>mp</code> object (either in a singleton, or in your Application object), and change the rest of your code to use it properly. For example:</p>\n<pre><code> public class App extends Application {\n        public static MediaPlayer mp;\n    }\n\npublic class Firebase extends FirebaseMessagingService {\n   ...\n\n   if(App.mp == null){\n        App.mp = MediaPlayer.create(this, Settings.System.DEFAULT_RINGTONE_URI);\n   }\n   App.mp.start();\n\n   ....\n}\n</code></pre>\n<p>and in your Broadcast Receiver:</p>\n<pre><code>if(App.mp != null){\n        App.mp.stop ();\n        App.mp = null\n   }\n</code></pre>\n"}],"owner":{"account_id":20527725,"reputation":163,"user_id":15065774,"display_name":"Ahamed"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":244,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1664904137,"creation_date":1664685856,"question_id":73923427,"body_markdown":"In our andorid broadcaster receiver class, we are trying to stop the ringtone that&#39;s initiated from mainactivity.class. We used mediaplayer.stop to stop the ringtone, which it successfully does, but it crashes the app. We have used .stop (), .pause (), .release (), but none of them is working unfortunately.  The codes of broadcastreceiver is as given hereunder\r\n\r\nFirebase class (summarized code) where media player is initialized and pending broadcast intent to buttonreceiver class is fired where mediaplayer is stopped.\r\n\r\n    public class Firebase extends FirebaseMessagingService {\r\n            \tpublic static Ringtone ringtone;\r\n            \tpublic static MediaPlayer mp;\r\n    \r\n    Intent buttonIntent = new Intent(this, ButtonReceiver.class);\r\n    buttonIntent.putExtra(&quot;notificationId&quot;,notification_id);\r\n    PendingIntent btsPendingIntent = PendingIntent.getBroadcast(this, requestID, buttonIntent,PendingIntent.FLAG_UPDATE_CURRENT);\r\n    NotificationCompat.Action action1 = new NotificationCompat.Action.Builder(R.mipmap.ic_launcher, &quot;Dismiss&quot;, btsPendingIntent).build();\r\n    \r\n    NotificationCompat.Builder notificationBuilder = new NotificationCompat.Builder(this, MainActivity.asw_fcm_channel)\r\n    \t\t\t\t\t.setSmallIcon(R.mipmap.ic_launcher)\r\n    \t\t\t\t\t.setContentTitle(title)\r\n    \t\t\t\t\t.setContentText(message)\r\n    \t\t\t\t\t.setDefaults(Notification.DEFAULT_ALL)\r\n    \t\t\t\t\t.setPriority(NotificationCompat.PRIORITY_HIGH)\r\n    \t\t\t\t\t.setTimeoutAfter(60000)\r\n    \t\t\t\t\t.setCategory(NotificationCompat.CATEGORY_CALL)\r\n    \t\t\t\t\t.setSound(RingtoneManager.getDefaultUri(RingtoneManager.TYPE_NOTIFICATION))\r\n    \t\t\t\t\t.setAutoCancel(false)\r\n    \t\t\t\t\t.setContentIntent(pendingIntent)\r\n    \t\t\t\t\t.addAction(action1)\r\n    \t\t\t\t\t.setVisibility(NotificationCompat.VISIBILITY_PUBLIC)\r\n    \t\t\t\t\t.setFullScreenIntent(pendingIntent2, true)\r\n    \t\t\t\t\t.setVibrate(new long[]{100, 200, 300, 400, 500, 400, 300, 200, 400});\r\n    \t\t\r\n            \t\tmp = MediaPlayer.create(this, Settings.System.DEFAULT_RINGTONE_URI);\r\n        \t\t\tmp.start();\r\n            }\r\n\r\n\r\nButton Receiver Class (where media player is stopped)\r\n    public class ButtonReceiver extends BroadcastReceiver {\r\n    \tpublic MediaPlayer mp;\r\n    \r\n    \t@Override\r\n    \tpublic void onReceive(Context context, Intent intent) {\r\n    \r\n    \t\tint notificationId = intent.getIntExtra(&quot;notificationId&quot;, 0);\r\n    \r\n    \t\r\n    \t\tmp.stop ();\r\n    \t\tmp.seekTo(0);\r\n    \r\n    \t\tNotificationManager manager = (NotificationManager) context.getSystemService(Context.NOTIFICATION_SERVICE);\r\n    \t\tmanager.cancel(notificationId);\r\n    \r\n    \t}\r\n    }\r\n\r\n\r\nPlease help us out on this issue.\r\n\r\n","title":"mediaplayer.stop causes android app to crash","body":"<p>In our andorid broadcaster receiver class, we are trying to stop the ringtone that's initiated from mainactivity.class. We used mediaplayer.stop to stop the ringtone, which it successfully does, but it crashes the app. We have used .stop (), .pause (), .release (), but none of them is working unfortunately.  The codes of broadcastreceiver is as given hereunder</p>\n<p>Firebase class (summarized code) where media player is initialized and pending broadcast intent to buttonreceiver class is fired where mediaplayer is stopped.</p>\n<pre><code>public class Firebase extends FirebaseMessagingService {\n            public static Ringtone ringtone;\n            public static MediaPlayer mp;\n\nIntent buttonIntent = new Intent(this, ButtonReceiver.class);\nbuttonIntent.putExtra(&quot;notificationId&quot;,notification_id);\nPendingIntent btsPendingIntent = PendingIntent.getBroadcast(this, requestID, buttonIntent,PendingIntent.FLAG_UPDATE_CURRENT);\nNotificationCompat.Action action1 = new NotificationCompat.Action.Builder(R.mipmap.ic_launcher, &quot;Dismiss&quot;, btsPendingIntent).build();\n\nNotificationCompat.Builder notificationBuilder = new NotificationCompat.Builder(this, MainActivity.asw_fcm_channel)\n                    .setSmallIcon(R.mipmap.ic_launcher)\n                    .setContentTitle(title)\n                    .setContentText(message)\n                    .setDefaults(Notification.DEFAULT_ALL)\n                    .setPriority(NotificationCompat.PRIORITY_HIGH)\n                    .setTimeoutAfter(60000)\n                    .setCategory(NotificationCompat.CATEGORY_CALL)\n                    .setSound(RingtoneManager.getDefaultUri(RingtoneManager.TYPE_NOTIFICATION))\n                    .setAutoCancel(false)\n                    .setContentIntent(pendingIntent)\n                    .addAction(action1)\n                    .setVisibility(NotificationCompat.VISIBILITY_PUBLIC)\n                    .setFullScreenIntent(pendingIntent2, true)\n                    .setVibrate(new long[]{100, 200, 300, 400, 500, 400, 300, 200, 400});\n        \n                mp = MediaPlayer.create(this, Settings.System.DEFAULT_RINGTONE_URI);\n                mp.start();\n        }\n</code></pre>\n<p>Button Receiver Class (where media player is stopped)\npublic class ButtonReceiver extends BroadcastReceiver {\npublic MediaPlayer mp;</p>\n<pre><code>    @Override\n    public void onReceive(Context context, Intent intent) {\n\n        int notificationId = intent.getIntExtra(&quot;notificationId&quot;, 0);\n\n    \n        mp.stop ();\n        mp.seekTo(0);\n\n        NotificationManager manager = (NotificationManager) context.getSystemService(Context.NOTIFICATION_SERVICE);\n        manager.cancel(notificationId);\n\n    }\n}\n</code></pre>\n<p>Please help us out on this issue.</p>\n"},{"tags":["java","spring","hibernate","principal"],"comments":[{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1664899556,"post_id":73950462,"comment_id":130573396,"body_markdown":"the naive solution: you have to logout &amp; re-login again! [i find many dups!](https://www.google.com/search?q=spring+change+principal+at+runtime) ... most promising answer (so far, from 2015): https://stackoverflow.com/a/30674697/592355","body":"the naive solution: you have to logout &amp; re-login again! <a href=\"https://www.google.com/search?q=spring+change+principal+at+runtime\" rel=\"nofollow noreferrer\">i find many dups!</a> ... most promising answer (so far, from 2015): <a href=\"https://stackoverflow.com/a/30674697/592355\">stackoverflow.com/a/30674697/592355</a>"}],"answers":[{"tags":[],"owner":{"account_id":1408815,"reputation":2002,"user_id":1811348,"accept_rate":88,"display_name":"swapyonubuntu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664904095,"creation_date":1664904095,"answer_id":73951493,"question_id":73950462,"body_markdown":"Assuming you are using spring security,\r\n\r\nPost your sucessful backend db calls,\r\n\r\nYou can do this with,\r\n\r\n`SecurityContextHolder.getContext().setAuthentication(newAuth);`\r\n\r\n\r\nRefer: https://stackoverflow.com/a/30674697/1811348","title":"How to update user data in Principal when changing his login?","body":"<p>Assuming you are using spring security,</p>\n<p>Post your sucessful backend db calls,</p>\n<p>You can do this with,</p>\n<p><code>SecurityContextHolder.getContext().setAuthentication(newAuth);</code></p>\n<p>Refer: <a href=\"https://stackoverflow.com/a/30674697/1811348\">https://stackoverflow.com/a/30674697/1811348</a></p>\n"}],"owner":{"account_id":23950049,"reputation":13,"user_id":17941791,"display_name":"Mark"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":324,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1664904095,"creation_date":1664898623,"question_id":73950462,"body_markdown":"I made a page with editing user information, where it is possible to change the login. When I change it and return to the user profile, I get an error that Account is null.\r\nFound out the reason. When changing the login, Principal&#39;s username remains the same as it was before the login change. I can&#39;t figure out how you can update Principal&#39;s username without logging out.\r\n\r\nMy AccountController:\r\n```\r\n    @GetMapping(&quot;/settings&quot;)\r\n    public String showAccountSettings(Principal principal, Model model) {\r\n        Account account = accountRepository.findByLogin(principal.getName());\r\n        model.addAttribute(&quot;account&quot;, account);\r\n\r\n        return &quot;settings&quot;;\r\n    }\r\n\r\n    @PostMapping(&quot;/settings/apply&quot;)\r\n    public String applyChangesInAccount(Principal principal, Account account) {\r\n        Account updAccount = accountRepository.findByLogin(principal.getName());\r\n\r\n        updAccount.getAccountInfo().setEmail(account.getAccountInfo().getEmail());\r\n        updAccount.getAccountInfo().setPhone(account.getAccountInfo().getPhone());\r\n        updAccount.setLogin(account.getLogin());\r\n\r\n        accountRepository.save(updAccount);\r\n\r\n        return &quot;redirect:/&quot;;\r\n    }\r\n```","title":"How to update user data in Principal when changing his login?","body":"<p>I made a page with editing user information, where it is possible to change the login. When I change it and return to the user profile, I get an error that Account is null.\nFound out the reason. When changing the login, Principal's username remains the same as it was before the login change. I can't figure out how you can update Principal's username without logging out.</p>\n<p>My AccountController:</p>\n<pre><code>    @GetMapping(&quot;/settings&quot;)\n    public String showAccountSettings(Principal principal, Model model) {\n        Account account = accountRepository.findByLogin(principal.getName());\n        model.addAttribute(&quot;account&quot;, account);\n\n        return &quot;settings&quot;;\n    }\n\n    @PostMapping(&quot;/settings/apply&quot;)\n    public String applyChangesInAccount(Principal principal, Account account) {\n        Account updAccount = accountRepository.findByLogin(principal.getName());\n\n        updAccount.getAccountInfo().setEmail(account.getAccountInfo().getEmail());\n        updAccount.getAccountInfo().setPhone(account.getAccountInfo().getPhone());\n        updAccount.setLogin(account.getLogin());\n\n        accountRepository.save(updAccount);\n\n        return &quot;redirect:/&quot;;\n    }\n</code></pre>\n"},{"tags":["java","spring-boot","log4j2"],"answers":[{"tags":[],"owner":{"account_id":1473276,"reputation":110999,"user_id":1384297,"accept_rate":100,"display_name":"Andy Wilkinson"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1664903233,"creation_date":1655294277,"answer_id":72630973,"question_id":72630132,"body_markdown":"Your pattern is invalid as it isn&#39;t in a form that&#39;s understood by Tomcat. It looks like you&#39;re trying to use Log4j2&#39;s pattern syntax. You need to use Tomcat&#39;s instead. You can learn more about the syntax and the pattern codes that are supported in [Tomcat&#39;s documentation](https://tomcat.apache.org/tomcat-9.0-doc/config/valve.html#Access_Log_Valve/Attributes):\r\n\r\n&gt; - `%a` - Remote IP address. See also `%{xxx}a` below.\r\n&gt; - `%A` - Local IP address\r\n&gt; - `%b` - Bytes sent, excluding HTTP headers, or &#39;-&#39; if zero\r\n&gt; - `%B` - Bytes sent, excluding HTTP headers\r\n&gt; - `%h` - Remote host name (or IP address if enableLookups for the connector is false)\r\n&gt; - `%H` - Request protocol\r\n&gt; - `%l` - Remote logical username from identd (always returns &#39;-&#39;)\r\n&gt; - `%m` - Request method (GET, POST, etc.)\r\n&gt; - `%p` - Local port on which this request was received. See also %{xxx}p below.\r\n&gt; - `%q` - Query string (prepended with a &#39;?&#39; if it exists)\r\n&gt; - `%r` - First line of the request (method and request URI)\r\n&gt; - `%s` - HTTP status code of the response\r\n&gt; - `%S` - User session ID\r\n&gt; - `%t` - Date and time, in Common Log Format\r\n&gt; - `%u` - Remote user that was authenticated (if any), else &#39;-&#39; (escaped if required)\r\n&gt; - `%U` - Requested URL path\r\n&gt; - `%v` - Local server name\r\n&gt; - `%D` - Time taken to process the request in millis. Note: In httpd `%D` is microseconds. Behaviour will be aligned to httpd in Tomcat 10 onwards.\r\n&gt; - `%T` - Time taken to process the request, in seconds. Note: This value has millisecond resolution whereas in httpd it has second resolution. Behaviour will be align to httpd in Tomcat 10 onwards.\r\n&gt; - `%F` - Time taken to commit the response, in milliseconds\r\n&gt; - `%I` - Current request thread name (can compare later with stacktraces)\r\n&gt; - `%X` - Connection status when response is completed:\r\n&gt;   - `X` = Connection aborted before the response completed.\r\n&gt;   - `+` = Connection may be kept alive after the response is sent.\r\n&gt;   - `-` = Connection will be closed after the response is sent.\r\n&gt; \r\n&gt; There is also support to write information incoming or outgoing headers, cookies, session or request attributes and special timestamp formats. It is modeled after the Apache HTTP Server log configuration syntax. Each of them can be used multiple times with different xxx keys:\r\n&gt;\r\n&gt; - `%{xxx}a` write remote address (client) (xxx==remote) or connection peer address (xxx=peer)\r\n&gt; - `%{xxx}i` write value of incoming header with name xxx (escaped if required)\r\n&gt; - `%{xxx}o` write value of outgoing header with name xxx (escaped if required)\r\n&gt; - `%{xxx}c` write value of cookie with name xxx (escaped if required)\r\n&gt; - `%{xxx}r` write value of ServletRequest attribute with name xxx (escaped if required)\r\n&gt; - `%{xxx}s` write value of HttpSession attribute with name xxx (escaped if required)\r\n&gt; - `%{xxx}p` write local (server) port (xxx==local) or remote (client) port (xxx=remote)\r\n&gt; - `%{xxx}t` write timestamp at the end of the request formatted using the enhanced SimpleDateFormat pattern xxx","title":"How to print Tomcat Access Logs to console in the json format in a Spring Boot Application?","body":"<p>Your pattern is invalid as it isn't in a form that's understood by Tomcat. It looks like you're trying to use Log4j2's pattern syntax. You need to use Tomcat's instead. You can learn more about the syntax and the pattern codes that are supported in <a href=\"https://tomcat.apache.org/tomcat-9.0-doc/config/valve.html#Access_Log_Valve/Attributes\" rel=\"nofollow noreferrer\">Tomcat's documentation</a>:</p>\n<blockquote>\n<ul>\n<li><code>%a</code> - Remote IP address. See also <code>%{xxx}a</code> below.</li>\n<li><code>%A</code> - Local IP address</li>\n<li><code>%b</code> - Bytes sent, excluding HTTP headers, or '-' if zero</li>\n<li><code>%B</code> - Bytes sent, excluding HTTP headers</li>\n<li><code>%h</code> - Remote host name (or IP address if enableLookups for the connector is false)</li>\n<li><code>%H</code> - Request protocol</li>\n<li><code>%l</code> - Remote logical username from identd (always returns '-')</li>\n<li><code>%m</code> - Request method (GET, POST, etc.)</li>\n<li><code>%p</code> - Local port on which this request was received. See also %{xxx}p below.</li>\n<li><code>%q</code> - Query string (prepended with a '?' if it exists)</li>\n<li><code>%r</code> - First line of the request (method and request URI)</li>\n<li><code>%s</code> - HTTP status code of the response</li>\n<li><code>%S</code> - User session ID</li>\n<li><code>%t</code> - Date and time, in Common Log Format</li>\n<li><code>%u</code> - Remote user that was authenticated (if any), else '-' (escaped if required)</li>\n<li><code>%U</code> - Requested URL path</li>\n<li><code>%v</code> - Local server name</li>\n<li><code>%D</code> - Time taken to process the request in millis. Note: In httpd <code>%D</code> is microseconds. Behaviour will be aligned to httpd in Tomcat 10 onwards.</li>\n<li><code>%T</code> - Time taken to process the request, in seconds. Note: This value has millisecond resolution whereas in httpd it has second resolution. Behaviour will be align to httpd in Tomcat 10 onwards.</li>\n<li><code>%F</code> - Time taken to commit the response, in milliseconds</li>\n<li><code>%I</code> - Current request thread name (can compare later with stacktraces)</li>\n<li><code>%X</code> - Connection status when response is completed:\n<ul>\n<li><code>X</code> = Connection aborted before the response completed.</li>\n<li><code>+</code> = Connection may be kept alive after the response is sent.</li>\n<li><code>-</code> = Connection will be closed after the response is sent.</li>\n</ul>\n</li>\n</ul>\n<p>There is also support to write information incoming or outgoing headers, cookies, session or request attributes and special timestamp formats. It is modeled after the Apache HTTP Server log configuration syntax. Each of them can be used multiple times with different xxx keys:</p>\n<ul>\n<li><code>%{xxx}a</code> write remote address (client) (xxx==remote) or connection peer address (xxx=peer)</li>\n<li><code>%{xxx}i</code> write value of incoming header with name xxx (escaped if required)</li>\n<li><code>%{xxx}o</code> write value of outgoing header with name xxx (escaped if required)</li>\n<li><code>%{xxx}c</code> write value of cookie with name xxx (escaped if required)</li>\n<li><code>%{xxx}r</code> write value of ServletRequest attribute with name xxx (escaped if required)</li>\n<li><code>%{xxx}s</code> write value of HttpSession attribute with name xxx (escaped if required)</li>\n<li><code>%{xxx}p</code> write local (server) port (xxx==local) or remote (client) port (xxx=remote)</li>\n<li><code>%{xxx}t</code> write timestamp at the end of the request formatted using the enhanced SimpleDateFormat pattern xxx</li>\n</ul>\n</blockquote>\n"}],"owner":{"account_id":4889629,"reputation":83,"user_id":3941132,"display_name":"acsh"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3461,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":72630973,"answer_count":1,"score":1,"last_activity_date":1664903233,"creation_date":1655290573,"question_id":72630132,"body_markdown":"I am using log4j2.xml and need to print the Tomcat Access Logs to the Console in my Spring Boot Application. Please help how to do it, as I have been stuck on this. I have tried to configure as follows in the application.properties, but the logger getting printed is not in a json format.\r\n```\r\n    server.tomcat.accesslog.enabled=true\r\n    server.tomcat.accesslog.directory=/dev\r\n    server.tomcat.accesslog.prefix=stdout\r\n    server.tomcat.accesslog.console.pattern=&quot;{\\&quot;time\\&quot;: \\&quot;%d\\&quot;, \\&quot;level\\&quot;: \\&quot;%p\\&quot;, \\&quot;correlation-id\\&quot;: \\&quot;%X{X-Correlation-Id}\\&quot;, \\&quot;source\\&quot;: \\&quot;%logger{63}:%L\\&quot;, \\&quot;message\\&quot;: \\&quot;%replace(%m%wEx{6}){&#39;[\\r\\n]+&#39;, &#39;\\\\n&#39;}%nopex\\&quot;, \\&quot;source\\&quot;:\\&quot;ACCESS_LOGS\\&quot;}%n&quot;\r\n    server.tomcat.accesslog.suffix=\r\n    server.tomcat.accesslog.file-date-format=\r\n    server.tomcat.basedir=.\r\n```\r\nThe logger is getting printed in form of junk characters as follows:\r\n```\r\n    &quot;{&quot;time&quot;: &quot;???d???&quot;, &quot;level&quot;: &quot;8080&quot;, &quot;correlation-id&quot;: &quot;+{X-Correlation-Id}&quot;, &quot;source&quot;: &quot;-ogger{63}:???L???&quot;, &quot;message&quot;: &quot;POST /v1/plan/fetchPlans HTTP/1.1eplace(POST???w???Ex{6}){&#39;[]+&#39;, &#39;\\n&#39;}???n???opex&quot;, &quot;source&quot;:&quot;ACCESS_LOGS&quot;}???n???&quot;\r\n```","title":"How to print Tomcat Access Logs to console in the json format in a Spring Boot Application?","body":"<p>I am using log4j2.xml and need to print the Tomcat Access Logs to the Console in my Spring Boot Application. Please help how to do it, as I have been stuck on this. I have tried to configure as follows in the application.properties, but the logger getting printed is not in a json format.</p>\n<pre><code>    server.tomcat.accesslog.enabled=true\n    server.tomcat.accesslog.directory=/dev\n    server.tomcat.accesslog.prefix=stdout\n    server.tomcat.accesslog.console.pattern=&quot;{\\&quot;time\\&quot;: \\&quot;%d\\&quot;, \\&quot;level\\&quot;: \\&quot;%p\\&quot;, \\&quot;correlation-id\\&quot;: \\&quot;%X{X-Correlation-Id}\\&quot;, \\&quot;source\\&quot;: \\&quot;%logger{63}:%L\\&quot;, \\&quot;message\\&quot;: \\&quot;%replace(%m%wEx{6}){'[\\r\\n]+', '\\\\n'}%nopex\\&quot;, \\&quot;source\\&quot;:\\&quot;ACCESS_LOGS\\&quot;}%n&quot;\n    server.tomcat.accesslog.suffix=\n    server.tomcat.accesslog.file-date-format=\n    server.tomcat.basedir=.\n</code></pre>\n<p>The logger is getting printed in form of junk characters as follows:</p>\n<pre><code>    &quot;{&quot;time&quot;: &quot;???d???&quot;, &quot;level&quot;: &quot;8080&quot;, &quot;correlation-id&quot;: &quot;+{X-Correlation-Id}&quot;, &quot;source&quot;: &quot;-ogger{63}:???L???&quot;, &quot;message&quot;: &quot;POST /v1/plan/fetchPlans HTTP/1.1eplace(POST???w???Ex{6}){'[]+', '\\n'}???n???opex&quot;, &quot;source&quot;:&quot;ACCESS_LOGS&quot;}???n???&quot;\n</code></pre>\n"},{"tags":["java","maven-2","build-process","build","dependencies"],"answers":[{"tags":[],"owner":{"account_id":70258,"reputation":590444,"user_id":203907,"accept_rate":81,"display_name":"Bozho"},"down_vote_count":5,"up_vote_count":162,"is_accepted":false,"score":157,"last_activity_date":1431500462,"creation_date":1265725953,"answer_id":2229775,"question_id":2229757,"body_markdown":"Using the `system` scope. `${basedir}` is the directory of your pom.\r\n\r\n&lt;!-- language: xml --&gt;\r\n\r\n    &lt;dependency&gt;\r\n        &lt;artifactId&gt;..&lt;/artifactId&gt;\r\n        &lt;groupId&gt;..&lt;/groupId&gt;\r\n        &lt;scope&gt;system&lt;/scope&gt;\r\n        &lt;systemPath&gt;${basedir}/lib/dependency.jar&lt;/systemPath&gt;\r\n    &lt;/dependency&gt;\r\n\r\nHowever it is advisable that you install your jar in the repository, and not commit it to the SCM - after all that&#39;s what maven tries to eliminate.","title":"Maven: add a dependency to a jar by relative path","body":"<p>Using the <code>system</code> scope. <code>${basedir}</code> is the directory of your pom.</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;artifactId&gt;..&lt;/artifactId&gt;\n    &lt;groupId&gt;..&lt;/groupId&gt;\n    &lt;scope&gt;system&lt;/scope&gt;\n    &lt;systemPath&gt;${basedir}/lib/dependency.jar&lt;/systemPath&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>However it is advisable that you install your jar in the repository, and not commit it to the SCM - after all that's what maven tries to eliminate.</p>\n"},{"tags":[],"owner":{"account_id":26957,"reputation":564361,"user_id":70604,"display_name":"Pascal Thivent"},"down_vote_count":2,"up_vote_count":380,"is_accepted":true,"score":378,"last_activity_date":1591195251,"creation_date":1265731531,"answer_id":2230464,"question_id":2229757,"body_markdown":"&gt; I want the jar to be in a 3rdparty lib in source control, and link to it by relative path from the pom.xml file.\r\n\r\nIf you really want this (understand, if you can&#39;t use a corporate repository), then my advice would be to use a &quot;file repository&quot; local to the project and to **not use** a `system` scoped dependency. The `system` scoped  should be avoided, such dependencies don&#39;t work well in many situation (e.g. in assembly), they cause more troubles than benefits. \r\n\r\nSo, instead, declare a repository local to the project:\r\n\r\n    &lt;repositories&gt;\r\n      &lt;repository&gt;\r\n        &lt;id&gt;my-local-repo&lt;/id&gt;\r\n        &lt;url&gt;file://${project.basedir}/my-repo&lt;/url&gt;\r\n      &lt;/repository&gt;\r\n    &lt;/repositories&gt;\r\n\r\nInstall your third party lib in there using `install:install-file` with the [`localRepositoryPath`][1] parameter:\r\n\r\n&lt;strike&gt;\r\n\r\n    mvn install:install-file -Dfile=&lt;path-to-file&gt; -DgroupId=&lt;myGroup&gt; \\ \r\n                             -DartifactId=&lt;myArtifactId&gt; -Dversion=&lt;myVersion&gt; \\\r\n                             -Dpackaging=&lt;myPackaging&gt; -DlocalRepositoryPath=&lt;path&gt;\r\n\r\n&lt;/strike&gt;\r\n\r\n**Update:** It appears that `install:install-file` ignores the `localRepositoryPath` when using the version 2.2 of the plugin. However, it works with version 2.3 and later of the plugin. So use the fully qualified name of the plugin to specify the version:\r\n\r\n    mvn org.apache.maven.plugins:maven-install-plugin:2.3.1:install-file \\\r\n                             -Dfile=&lt;path-to-file&gt; -DgroupId=&lt;myGroup&gt; \\ \r\n                             -DartifactId=&lt;myArtifactId&gt; -Dversion=&lt;myVersion&gt; \\\r\n                             -Dpackaging=&lt;myPackaging&gt; -DlocalRepositoryPath=&lt;path&gt;\r\n\r\n[maven-install-plugin documentation][2]\r\n\r\nFinally, declare it like any other dependency (but without the `system` scope):\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;your.group.id&lt;/groupId&gt;\r\n      &lt;artifactId&gt;3rdparty&lt;/artifactId&gt;\r\n      &lt;version&gt;X.Y.Z&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nThis is IMHO a better solution than using a `system` scope as your dependency will be treated like a good citizen (e.g. it will be included in an assembly and so on).\r\n\r\nNow, I have to mention that the &quot;right way&quot; to deal with this situation in a corporate environment (maybe not the case here) would be to use a corporate repository.\r\n\r\n\r\n  [1]: http://maven.apache.org/plugins/maven-install-plugin/install-file-mojo.html#localRepositoryPath\r\n  [2]: http://maven.apache.org/plugins-archives/maven-install-plugin-2.3.1/install-file-mojo.html","title":"Maven: add a dependency to a jar by relative path","body":"<blockquote>\n  <p>I want the jar to be in a 3rdparty lib in source control, and link to it by relative path from the pom.xml file.</p>\n</blockquote>\n\n<p>If you really want this (understand, if you can't use a corporate repository), then my advice would be to use a \"file repository\" local to the project and to <strong>not use</strong> a <code>system</code> scoped dependency. The <code>system</code> scoped  should be avoided, such dependencies don't work well in many situation (e.g. in assembly), they cause more troubles than benefits. </p>\n\n<p>So, instead, declare a repository local to the project:</p>\n\n<pre><code>&lt;repositories&gt;\n  &lt;repository&gt;\n    &lt;id&gt;my-local-repo&lt;/id&gt;\n    &lt;url&gt;file://${project.basedir}/my-repo&lt;/url&gt;\n  &lt;/repository&gt;\n&lt;/repositories&gt;\n</code></pre>\n\n<p>Install your third party lib in there using <code>install:install-file</code> with the <a href=\"http://maven.apache.org/plugins/maven-install-plugin/install-file-mojo.html#localRepositoryPath\" rel=\"noreferrer\"><code>localRepositoryPath</code></a> parameter:</p>\n\n<p><strike></p>\n\n<pre><code>mvn install:install-file -Dfile=&lt;path-to-file&gt; -DgroupId=&lt;myGroup&gt; \\ \n                         -DartifactId=&lt;myArtifactId&gt; -Dversion=&lt;myVersion&gt; \\\n                         -Dpackaging=&lt;myPackaging&gt; -DlocalRepositoryPath=&lt;path&gt;\n</code></pre>\n\n<p></strike></p>\n\n<p><strong>Update:</strong> It appears that <code>install:install-file</code> ignores the <code>localRepositoryPath</code> when using the version 2.2 of the plugin. However, it works with version 2.3 and later of the plugin. So use the fully qualified name of the plugin to specify the version:</p>\n\n<pre><code>mvn org.apache.maven.plugins:maven-install-plugin:2.3.1:install-file \\\n                         -Dfile=&lt;path-to-file&gt; -DgroupId=&lt;myGroup&gt; \\ \n                         -DartifactId=&lt;myArtifactId&gt; -Dversion=&lt;myVersion&gt; \\\n                         -Dpackaging=&lt;myPackaging&gt; -DlocalRepositoryPath=&lt;path&gt;\n</code></pre>\n\n<p><a href=\"http://maven.apache.org/plugins-archives/maven-install-plugin-2.3.1/install-file-mojo.html\" rel=\"noreferrer\">maven-install-plugin documentation</a></p>\n\n<p>Finally, declare it like any other dependency (but without the <code>system</code> scope):</p>\n\n<pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;your.group.id&lt;/groupId&gt;\n  &lt;artifactId&gt;3rdparty&lt;/artifactId&gt;\n  &lt;version&gt;X.Y.Z&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>This is IMHO a better solution than using a <code>system</code> scope as your dependency will be treated like a good citizen (e.g. it will be included in an assembly and so on).</p>\n\n<p>Now, I have to mention that the \"right way\" to deal with this situation in a corporate environment (maybe not the case here) would be to use a corporate repository.</p>\n"},{"tags":[],"owner":{"account_id":84984,"reputation":5857,"user_id":237237,"display_name":"Brett Porter"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1428509388,"creation_date":1265760170,"answer_id":2233461,"question_id":2229757,"body_markdown":"I&#39;ve previously [written about a pattern][1] for doing this.\r\n\r\n\r\nIt is very similar to the solution proposed by Pascal, though it moves all such dependencies into a dedicated repository module so that you don&#39;t have to repeat it everywhere the dependency is used if it is a multi-module build.\r\n\r\n\r\n  [1]: http://brettporter.wordpress.com/2009/06/10/a-maven-friendly-pattern-for-storing-dependencies-in-version-control/","title":"Maven: add a dependency to a jar by relative path","body":"<p>I've previously <a href=\"http://brettporter.wordpress.com/2009/06/10/a-maven-friendly-pattern-for-storing-dependencies-in-version-control/\" rel=\"nofollow noreferrer\">written about a pattern</a> for doing this.</p>\n\n<p>It is very similar to the solution proposed by Pascal, though it moves all such dependencies into a dedicated repository module so that you don't have to repeat it everywhere the dependency is used if it is a multi-module build.</p>\n"},{"tags":[],"owner":{"account_id":87230,"reputation":36816,"user_id":242042,"accept_rate":57,"display_name":"Archimedes Trajano"},"down_vote_count":0,"up_vote_count":30,"is_accepted":false,"score":30,"last_activity_date":1319662844,"creation_date":1319662844,"answer_id":7908872,"question_id":2229757,"body_markdown":"This is another method in addition to my previous answer at https://stackoverflow.com/questions/364114/can-i-add-jars-to-maven-2-build-classpath-without-installing-them/7748177#7748177 \r\n\r\nThis will get around the limit when using multi-module builds especially if the downloaded JAR is referenced in child projects outside of the parent.  This also reduces the setup work by creating the POM and the SHA1 files as part of the build.  It also allows the file to reside anywhere in the project without fixing the names or following the maven repository structure.\r\n\r\nThis uses the maven-install-plugin.  For this to work, you need to set up a multi-module project and have a new project representing the build to install files into the local repository and ensure that one is first.\r\n\r\nYou multi-module project pom.xml would look like this:\r\n\r\n\t&lt;packaging&gt;pom&lt;/packaging&gt;\r\n\t&lt;modules&gt;\r\n\t&lt;!-- The repository module must be first in order to ensure\r\n\t     that the local repository is populated --&gt;\r\n\t\t&lt;module&gt;repository&lt;/module&gt;\r\n\t\t&lt;module&gt;... other modules ...&lt;/module&gt;\r\n\t&lt;/modules&gt;\r\n\r\nThe repository/pom.xml file will then contain the definitions to load up the JARs that are part of your project.  The following are some snippets of the pom.xml file.\r\n\r\n    &lt;artifactId&gt;repository&lt;/artifactId&gt;\r\n    &lt;packaging&gt;pom&lt;/packaging&gt;\r\n\r\nThe pom packaging prevents this from doing any tests or compile or generating any jar file.  The meat of the pom.xml is in the build section where the maven-install-plugin is used.\r\n\r\n    &lt;build&gt;\r\n    \t&lt;plugins&gt;\r\n    \t\t&lt;plugin&gt;\r\n    \t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;maven-install-plugin&lt;/artifactId&gt;\r\n    \t\t\t&lt;executions&gt;\r\n    \t\t\t\t&lt;execution&gt;\r\n    \t\t\t\t\t\t&lt;id&gt;com.ibm.db2:db2jcc&lt;/id&gt;\r\n    \t\t\t\t\t\t&lt;phase&gt;verify&lt;/phase&gt;\r\n    \t\t\t\t\t\t&lt;goals&gt;\r\n    \t\t\t\t\t\t\t&lt;goal&gt;install-file&lt;/goal&gt;\r\n    \t\t\t\t\t\t&lt;/goals&gt;\r\n    \t\t\t\t\t\t&lt;configuration&gt;\r\n    \t\t\t\t\t\t\t&lt;groupId&gt;com.ibm.db2&lt;/groupId&gt;\r\n    \t\t\t\t\t\t\t&lt;artifactId&gt;db2jcc&lt;/artifactId&gt;\r\n    \t\t\t\t\t\t\t&lt;version&gt;9.0.0&lt;/version&gt;\r\n    \t\t\t\t\t\t\t&lt;packaging&gt;jar&lt;/packaging&gt;\r\n    \t\t\t\t\t\t\t&lt;file&gt;${basedir}/src/jars/db2jcc.jar&lt;/file&gt;\r\n    \t\t\t\t\t\t\t&lt;createChecksum&gt;true&lt;/createChecksum&gt;\r\n    \t\t\t\t\t\t\t&lt;generatePom&gt;true&lt;/generatePom&gt;\r\n    \t\t\t\t\t\t&lt;/configuration&gt;\r\n    \t\t\t\t&lt;/execution&gt;\r\n    \t\t\t\t&lt;execution&gt;...&lt;/execution&gt;\r\n    \t\t\t&lt;/executions&gt;\r\n    \t\t&lt;/plugin&gt;\r\n    \t&lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n\r\nTo install more than one file, just add more executions.","title":"Maven: add a dependency to a jar by relative path","body":"<p>This is another method in addition to my previous answer at <a href=\"https://stackoverflow.com/questions/364114/can-i-add-jars-to-maven-2-build-classpath-without-installing-them/7748177#7748177\">Can I add jars to maven 2 build classpath without installing them?</a> </p>\n\n<p>This will get around the limit when using multi-module builds especially if the downloaded JAR is referenced in child projects outside of the parent.  This also reduces the setup work by creating the POM and the SHA1 files as part of the build.  It also allows the file to reside anywhere in the project without fixing the names or following the maven repository structure.</p>\n\n<p>This uses the maven-install-plugin.  For this to work, you need to set up a multi-module project and have a new project representing the build to install files into the local repository and ensure that one is first.</p>\n\n<p>You multi-module project pom.xml would look like this:</p>\n\n<pre><code>&lt;packaging&gt;pom&lt;/packaging&gt;\n&lt;modules&gt;\n&lt;!-- The repository module must be first in order to ensure\n     that the local repository is populated --&gt;\n    &lt;module&gt;repository&lt;/module&gt;\n    &lt;module&gt;... other modules ...&lt;/module&gt;\n&lt;/modules&gt;\n</code></pre>\n\n<p>The repository/pom.xml file will then contain the definitions to load up the JARs that are part of your project.  The following are some snippets of the pom.xml file.</p>\n\n<pre><code>&lt;artifactId&gt;repository&lt;/artifactId&gt;\n&lt;packaging&gt;pom&lt;/packaging&gt;\n</code></pre>\n\n<p>The pom packaging prevents this from doing any tests or compile or generating any jar file.  The meat of the pom.xml is in the build section where the maven-install-plugin is used.</p>\n\n<pre><code>&lt;build&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-install-plugin&lt;/artifactId&gt;\n            &lt;executions&gt;\n                &lt;execution&gt;\n                        &lt;id&gt;com.ibm.db2:db2jcc&lt;/id&gt;\n                        &lt;phase&gt;verify&lt;/phase&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;install-file&lt;/goal&gt;\n                        &lt;/goals&gt;\n                        &lt;configuration&gt;\n                            &lt;groupId&gt;com.ibm.db2&lt;/groupId&gt;\n                            &lt;artifactId&gt;db2jcc&lt;/artifactId&gt;\n                            &lt;version&gt;9.0.0&lt;/version&gt;\n                            &lt;packaging&gt;jar&lt;/packaging&gt;\n                            &lt;file&gt;${basedir}/src/jars/db2jcc.jar&lt;/file&gt;\n                            &lt;createChecksum&gt;true&lt;/createChecksum&gt;\n                            &lt;generatePom&gt;true&lt;/generatePom&gt;\n                        &lt;/configuration&gt;\n                &lt;/execution&gt;\n                &lt;execution&gt;...&lt;/execution&gt;\n            &lt;/executions&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n&lt;/build&gt;\n</code></pre>\n\n<p>To install more than one file, just add more executions.</p>\n"},{"tags":[],"owner":{"account_id":244750,"reputation":19412,"user_id":517781,"accept_rate":82,"display_name":"Dean Hiller"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1357328752,"creation_date":1357328448,"answer_id":14163785,"question_id":2229757,"body_markdown":"we switched to gradle and this works much better in gradle ;).  we just specify a folder we can drop jars into for temporary situations like that.  We still have most of our jars defined i the typicaly dependency management section(ie. the same as maven).  This is just one more dependency we define.\r\n\r\nso basically now we can just drop any jar we want into our lib dir for temporary testing if it is not a in maven repository somewhere.","title":"Maven: add a dependency to a jar by relative path","body":"<p>we switched to gradle and this works much better in gradle ;).  we just specify a folder we can drop jars into for temporary situations like that.  We still have most of our jars defined i the typicaly dependency management section(ie. the same as maven).  This is just one more dependency we define.</p>\n\n<p>so basically now we can just drop any jar we want into our lib dir for temporary testing if it is not a in maven repository somewhere.</p>\n"},{"tags":[],"owner":{"account_id":140032,"reputation":59,"user_id":346038,"display_name":"veeseekay"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1435697854,"creation_date":1406793814,"answer_id":25053725,"question_id":2229757,"body_markdown":"One small addition to the solution posted by Pascal\r\n\r\nWhen I followed this route, I got an error in maven while installing ojdbc jar.\r\n\r\n&lt;!-- language-all: lang-none --&gt;\r\n\r\n    [INFO] --- maven-install-plugin:2.5.1:install-file (default-cli) @ validator ---\r\n    [INFO] pom.xml not found in ojdbc14.jar\r\n\r\nAfter adding -DpomFile, the problem was resolved.\r\n\r\n    $ mvn install:install-file -Dfile=./lib/ojdbc14.jar -DgroupId=ojdbc \\\r\n       -DartifactId=ojdbc -Dversion=14 -Dpackaging=jar -DlocalRepositoryPath=./repo \\\r\n       -DpomFile=~/.m2/repository/ojdbc/ojdbc/14/ojdbc-14.pom","title":"Maven: add a dependency to a jar by relative path","body":"<p>One small addition to the solution posted by Pascal</p>\n\n<p>When I followed this route, I got an error in maven while installing ojdbc jar.</p>\n\n\n\n<pre class=\"lang-none prettyprint-override\"><code>[INFO] --- maven-install-plugin:2.5.1:install-file (default-cli) @ validator ---\n[INFO] pom.xml not found in ojdbc14.jar\n</code></pre>\n\n<p>After adding -DpomFile, the problem was resolved.</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ mvn install:install-file -Dfile=./lib/ojdbc14.jar -DgroupId=ojdbc \\\n   -DartifactId=ojdbc -Dversion=14 -Dpackaging=jar -DlocalRepositoryPath=./repo \\\n   -DpomFile=~/.m2/repository/ojdbc/ojdbc/14/ojdbc-14.pom\n</code></pre>\n"},{"tags":[],"owner":{"account_id":469541,"reputation":419,"user_id":876170,"display_name":"Fulgencio Jara"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1416323742,"creation_date":1416323742,"answer_id":26997656,"question_id":2229757,"body_markdown":"Basically, add this to the pom.xml:\r\n\r\n    ...\r\n\r\n    &lt;repositories&gt;\r\n       &lt;repository&gt;\r\n           &lt;id&gt;lib_id&lt;/id&gt;\r\n           &lt;url&gt;file://${project.basedir}/lib&lt;/url&gt;\r\n       &lt;/repository&gt;\r\n    &lt;/repositories&gt;\r\n\r\n    ...\r\n\r\n    &lt;dependencies&gt;\r\n      ...\r\n      &lt;dependency&gt;\r\n          &lt;groupId&gt;com.mylibrary&lt;/groupId&gt;\r\n          &lt;artifactId&gt;mylibraryname&lt;/artifactId&gt;\r\n          &lt;version&gt;1.0.0&lt;/version&gt;\r\n      &lt;/dependency&gt;\r\n      ...\r\n    &lt;/dependencies&gt;","title":"Maven: add a dependency to a jar by relative path","body":"<p>Basically, add this to the pom.xml:</p>\n\n<pre><code>...\n\n&lt;repositories&gt;\n   &lt;repository&gt;\n       &lt;id&gt;lib_id&lt;/id&gt;\n       &lt;url&gt;file://${project.basedir}/lib&lt;/url&gt;\n   &lt;/repository&gt;\n&lt;/repositories&gt;\n\n...\n\n&lt;dependencies&gt;\n  ...\n  &lt;dependency&gt;\n      &lt;groupId&gt;com.mylibrary&lt;/groupId&gt;\n      &lt;artifactId&gt;mylibraryname&lt;/artifactId&gt;\n      &lt;version&gt;1.0.0&lt;/version&gt;\n  &lt;/dependency&gt;\n  ...\n&lt;/dependencies&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2197735,"reputation":60,"user_id":1942990,"display_name":"user1942990"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1452002936,"creation_date":1452002936,"answer_id":34613629,"question_id":2229757,"body_markdown":"You can use eclipse to generate a runnable Jar :\r\nExport/Runable Jar file","title":"Maven: add a dependency to a jar by relative path","body":"<p>You can use eclipse to generate a runnable Jar :\nExport/Runable Jar file</p>\n"},{"tags":[],"owner":{"account_id":3205539,"reputation":253,"user_id":2706643,"accept_rate":80,"display_name":"RufusSC2"},"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1477129043,"creation_date":1477129043,"answer_id":40190566,"question_id":2229757,"body_markdown":"This is working for me:\r\nLet&#39;s say I have this dependency\r\n\r\n\t&lt;dependency&gt;\r\n\t\t&lt;groupId&gt;com.company.app&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;my-library&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;1.0&lt;/version&gt;\r\n\t\t&lt;scope&gt;system&lt;/scope&gt;\r\n\t\t&lt;systemPath&gt;${project.basedir}/lib/my-library.jar&lt;/systemPath&gt;\r\n\t&lt;/dependency&gt;\r\n\r\nThen, add the class-path for your system dependency manually like this\r\n\r\n    &lt;Class-Path&gt;libs/my-library-1.0.jar&lt;/Class-Path&gt;\r\n\r\nFull config:\r\n\r\n\r\n    &lt;plugin&gt;\r\n    \t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\r\n    \t&lt;version&gt;2.4&lt;/version&gt;\r\n    \t&lt;configuration&gt;\r\n    \t\t&lt;archive&gt;\r\n    \t\t\t&lt;manifestEntries&gt;\r\n    \t\t\t\t&lt;Build-Jdk&gt;${jdk.version}&lt;/Build-Jdk&gt;\r\n    \t\t\t\t&lt;Implementation-Title&gt;${project.name}&lt;/Implementation-Title&gt;\r\n    \t\t\t\t&lt;Implementation-Version&gt;${project.version}&lt;/Implementation-Version&gt;\r\n    \t\t\t\t&lt;Specification-Title&gt;${project.name} Library&lt;/Specification-Title&gt;\r\n    \t\t\t\t&lt;Specification-Version&gt;${project.version}&lt;/Specification-Version&gt;\r\n    \t\t\t\t&lt;Class-Path&gt;libs/my-library-1.0.jar&lt;/Class-Path&gt;\r\n    \t\t\t&lt;/manifestEntries&gt;\r\n    \t\t\t&lt;manifest&gt;\r\n    \t\t\t\t&lt;addClasspath&gt;true&lt;/addClasspath&gt;\r\n    \t\t\t\t&lt;mainClass&gt;com.company.app.MainClass&lt;/mainClass&gt;\r\n    \t\t\t\t&lt;classpathPrefix&gt;libs/&lt;/classpathPrefix&gt;\r\n    \t\t\t&lt;/manifest&gt;\r\n    \t\t&lt;/archive&gt;\r\n    \t&lt;/configuration&gt;\r\n    &lt;/plugin&gt;\r\n    &lt;plugin&gt;\r\n    \t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt;\r\n    \t&lt;version&gt;2.5.1&lt;/version&gt;\r\n    \t&lt;executions&gt;\r\n    \t\t&lt;execution&gt;\r\n    \t\t\t&lt;id&gt;copy-dependencies&lt;/id&gt;\r\n    \t\t\t&lt;phase&gt;package&lt;/phase&gt;\r\n    \t\t\t&lt;goals&gt;\r\n    \t\t\t\t&lt;goal&gt;copy-dependencies&lt;/goal&gt;\r\n    \t\t\t&lt;/goals&gt;\r\n    \t\t\t&lt;configuration&gt;\r\n    \t\t\t\t&lt;outputDirectory&gt;${project.build.directory}/libs/&lt;/outputDirectory&gt;\r\n    \t\t\t&lt;/configuration&gt;\r\n    \t\t&lt;/execution&gt;\r\n    \t&lt;/executions&gt;\r\n    &lt;/plugin&gt;","title":"Maven: add a dependency to a jar by relative path","body":"<p>This is working for me:\nLet's say I have this dependency</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.company.app&lt;/groupId&gt;\n    &lt;artifactId&gt;my-library&lt;/artifactId&gt;\n    &lt;version&gt;1.0&lt;/version&gt;\n    &lt;scope&gt;system&lt;/scope&gt;\n    &lt;systemPath&gt;${project.basedir}/lib/my-library.jar&lt;/systemPath&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>Then, add the class-path for your system dependency manually like this</p>\n\n<pre><code>&lt;Class-Path&gt;libs/my-library-1.0.jar&lt;/Class-Path&gt;\n</code></pre>\n\n<p>Full config:</p>\n\n<pre><code>&lt;plugin&gt;\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n    &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\n    &lt;version&gt;2.4&lt;/version&gt;\n    &lt;configuration&gt;\n        &lt;archive&gt;\n            &lt;manifestEntries&gt;\n                &lt;Build-Jdk&gt;${jdk.version}&lt;/Build-Jdk&gt;\n                &lt;Implementation-Title&gt;${project.name}&lt;/Implementation-Title&gt;\n                &lt;Implementation-Version&gt;${project.version}&lt;/Implementation-Version&gt;\n                &lt;Specification-Title&gt;${project.name} Library&lt;/Specification-Title&gt;\n                &lt;Specification-Version&gt;${project.version}&lt;/Specification-Version&gt;\n                &lt;Class-Path&gt;libs/my-library-1.0.jar&lt;/Class-Path&gt;\n            &lt;/manifestEntries&gt;\n            &lt;manifest&gt;\n                &lt;addClasspath&gt;true&lt;/addClasspath&gt;\n                &lt;mainClass&gt;com.company.app.MainClass&lt;/mainClass&gt;\n                &lt;classpathPrefix&gt;libs/&lt;/classpathPrefix&gt;\n            &lt;/manifest&gt;\n        &lt;/archive&gt;\n    &lt;/configuration&gt;\n&lt;/plugin&gt;\n&lt;plugin&gt;\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n    &lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt;\n    &lt;version&gt;2.5.1&lt;/version&gt;\n    &lt;executions&gt;\n        &lt;execution&gt;\n            &lt;id&gt;copy-dependencies&lt;/id&gt;\n            &lt;phase&gt;package&lt;/phase&gt;\n            &lt;goals&gt;\n                &lt;goal&gt;copy-dependencies&lt;/goal&gt;\n            &lt;/goals&gt;\n            &lt;configuration&gt;\n                &lt;outputDirectory&gt;${project.build.directory}/libs/&lt;/outputDirectory&gt;\n            &lt;/configuration&gt;\n        &lt;/execution&gt;\n    &lt;/executions&gt;\n&lt;/plugin&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10228644,"reputation":21,"user_id":7550255,"display_name":"Daniel Casique"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1664903224,"creation_date":1664903224,"answer_id":73951341,"question_id":2229757,"body_markdown":"I was facing with the same issue, and it works just removing the DlocalRepositoryPath parameter and defining the correct path from current location in the Dfile parameter:\r\n\r\n    mvn install:install-file -Dfile=./repo/com/tridion/cd_core/1.0/cd_core-1.0.jar -DgroupId=com.tridion -DartifactId=cd_core -Dversion=1.0 -Dpackaging=jar\r\n\r\n\r\nNote: Apache Maven 3.8.6 ","title":"Maven: add a dependency to a jar by relative path","body":"<p>I was facing with the same issue, and it works just removing the DlocalRepositoryPath parameter and defining the correct path from current location in the Dfile parameter:</p>\n<pre><code>mvn install:install-file -Dfile=./repo/com/tridion/cd_core/1.0/cd_core-1.0.jar -DgroupId=com.tridion -DartifactId=cd_core -Dversion=1.0 -Dpackaging=jar\n</code></pre>\n<p>Note: Apache Maven 3.8.6</p>\n"}],"owner":{"account_id":24717,"reputation":264442,"user_id":63051,"accept_rate":95,"display_name":"flybywire"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":396049,"favorite_count":0,"down_vote_count":0,"up_vote_count":271,"accepted_answer_id":2230464,"answer_count":10,"score":271,"last_activity_date":1664903224,"creation_date":1265725822,"question_id":2229757,"body_markdown":"I have a proprietary jar that I want to add to my pom as a dependency.\r\n\r\nBut I don&#39;t want to add it to a repository. The reason is that I want my usual maven commands such as `mvn compile`, etc, to work out of the box. (Without demanding from the developers a to add it to some repository by themselves).\r\n\r\nI want the jar to be in a 3rdparty lib in source control, and link to it by relative path from the pom.xml file.\r\n\r\nCan this be done? How?","title":"Maven: add a dependency to a jar by relative path","body":"<p>I have a proprietary jar that I want to add to my pom as a dependency.</p>\n\n<p>But I don't want to add it to a repository. The reason is that I want my usual maven commands such as <code>mvn compile</code>, etc, to work out of the box. (Without demanding from the developers a to add it to some repository by themselves).</p>\n\n<p>I want the jar to be in a 3rdparty lib in source control, and link to it by relative path from the pom.xml file.</p>\n\n<p>Can this be done? How?</p>\n"},{"tags":["java","spring-boot"],"comments":[{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1664904873,"post_id":73951340,"comment_id":130575180,"body_markdown":"You have [tag:spring-security]! Who allowed/advised you to overwrite (built-in) log(/-in)out-controller!? &#128574;&#128521; (It does (probably!) (many) important things, you didn&#39;t consider...)","body":"You have <a href=\"https://stackoverflow.com/questions/tagged/spring-security\">spring-security</a>! Who allowed/advised you to overwrite (built-in) log(/-in)out-controller!?  (It does (probably!) (many) important things, you didn&#39;t consider...)"},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1664904995,"post_id":73951340,"comment_id":130575211,"body_markdown":"&quot;For this very purpose, Spring provides the LogoutHandler interface&quot; src: https://www.baeldung.com/spring-security-custom-logout-handler","body":"&quot;For this very purpose, Spring provides the LogoutHandler interface&quot; src: <a href=\"https://www.baeldung.com/spring-security-custom-logout-handler\" rel=\"nofollow noreferrer\">baeldung.com/spring-security-custom-logout-handler</a>"},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1664905190,"post_id":73951340,"comment_id":130575277,"body_markdown":"[Official, current doc:](https://docs.spring.io/spring-security/reference/servlet/authentication/logout.html) ...","body":"<a href=\"https://docs.spring.io/spring-security/reference/servlet/authentication/logout.html\" rel=\"nofollow noreferrer\">Official, current doc:</a> ..."},{"owner":{"account_id":26446486,"reputation":51,"user_id":20090266,"display_name":"Stefan Jankovic"},"score":0,"creation_date":1664961020,"post_id":73951340,"comment_id":130586115,"body_markdown":"Thank you for helping and advices. Btw I was following some tutorial about log/reg authentication and there it is. Btw, can I somehow delete user refresh token even I use provided LogoutHandler interface by Spring?","body":"Thank you for helping and advices. Btw I was following some tutorial about log/reg authentication and there it is. Btw, can I somehow delete user refresh token even I use provided LogoutHandler interface by Spring?"}],"owner":{"account_id":26446486,"reputation":51,"user_id":20090266,"display_name":"Stefan Jankovic"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":177,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1664903219,"creation_date":1664903219,"question_id":73951340,"body_markdown":"So I have a some logout implementation and its supposed to work on next way:\r\n\r\n- User click on logout button\r\n- User is redirected to login form\r\n- Refresh token in Mongo document is deleted because every time when user get logged in he gets refresh token and that refresh token has owner id, and that token is stored in mongo document\r\n\r\n**What is the problem?**\r\n\r\nWhen I click on logout user is logged out successfully and redirected to login form again but refresh token remain in mongo document.\r\n\r\n`This is method to logout user:`\r\n\r\n    @PostMapping(&quot;/logout&quot;)\r\n    public ResponseEntity&lt;?&gt; logoutPage(@RequestBody TokenDTO dto) {\r\n    \r\n        String refreshTokenString = dto.getRefreshToken();\r\n            if (jwtHelper.validateRefreshToken(refreshTokenString) &amp;&amp; refreshTokenRepository.existsById(jwtHelper.getTokenIdFromRefreshToken(refreshTokenString))) {\r\n                // valid and exists in db\r\n                refreshTokenRepository.deleteById(jwtHelper.getTokenIdFromRefreshToken(refreshTokenString));\r\n                return ResponseEntity.ok().build();\r\n            }\r\n    \r\n            throw new BadCredentialsException(&quot;invalid token&quot;);\r\n    \r\n        }\r\n\r\n`This is refreshToken repository:`\r\n\r\n    public interface RefreshTokenRepository extends MongoRepository&lt;RefreshToken, String&gt; {\r\n    void deleteByOwner_Id(ObjectId id);\r\n\r\n    default void deleteByOwner_Id(String id) {\r\n        deleteByOwner_Id(new ObjectId(id));\r\n    }\r\n    }\r\n\r\n\r\nThis is from `WebSecurityConfig` where I also have some log out config:\r\n\r\n    @Override\r\n    protected void configure(HttpSecurity http) throws Exception {\r\n        http.cors().and().csrf().disable()\r\n                .exceptionHandling().authenticationEntryPoint(accessTokenEntryPoint).and()\r\n                .sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS).and()\r\n                .authorizeRequests().antMatchers(&quot;/api/auth/**&quot;).permitAll().and()\r\n                .formLogin().loginPage(&quot;/api/auth/loginAndRegisterForm&quot;)\r\n                .permitAll()\r\n                .and()\r\n                .logout()\r\n                .invalidateHttpSession(true)\r\n                .clearAuthentication(true)\r\n                .logoutRequestMatcher(new AntPathRequestMatcher(&quot;/logout&quot;))\r\n                .logoutSuccessUrl(&quot;/api/auth/loginAndRegisterForm&quot;)\r\n                .deleteCookies(&quot;JSESSIONID&quot;)\r\n                .permitAll();\r\n\r\n        http.addFilterBefore(accessTokenFilter(), UsernamePasswordAuthenticationFilter.class);\r\n    }\r\n\r\nIf I need to provide something else to anyone that is willing to help I&#39;m here, lost a couple of hours but still didn&#39;t find nothing inside my code or somewhere on the internet","title":"Logout method doesn&#39;t delete refresh token from mongo document","body":"<p>So I have a some logout implementation and its supposed to work on next way:</p>\n<ul>\n<li>User click on logout button</li>\n<li>User is redirected to login form</li>\n<li>Refresh token in Mongo document is deleted because every time when user get logged in he gets refresh token and that refresh token has owner id, and that token is stored in mongo document</li>\n</ul>\n<p><strong>What is the problem?</strong></p>\n<p>When I click on logout user is logged out successfully and redirected to login form again but refresh token remain in mongo document.</p>\n<p><code>This is method to logout user:</code></p>\n<pre><code>@PostMapping(&quot;/logout&quot;)\npublic ResponseEntity&lt;?&gt; logoutPage(@RequestBody TokenDTO dto) {\n\n    String refreshTokenString = dto.getRefreshToken();\n        if (jwtHelper.validateRefreshToken(refreshTokenString) &amp;&amp; refreshTokenRepository.existsById(jwtHelper.getTokenIdFromRefreshToken(refreshTokenString))) {\n            // valid and exists in db\n            refreshTokenRepository.deleteById(jwtHelper.getTokenIdFromRefreshToken(refreshTokenString));\n            return ResponseEntity.ok().build();\n        }\n\n        throw new BadCredentialsException(&quot;invalid token&quot;);\n\n    }\n</code></pre>\n<p><code>This is refreshToken repository:</code></p>\n<pre><code>public interface RefreshTokenRepository extends MongoRepository&lt;RefreshToken, String&gt; {\nvoid deleteByOwner_Id(ObjectId id);\n\ndefault void deleteByOwner_Id(String id) {\n    deleteByOwner_Id(new ObjectId(id));\n}\n}\n</code></pre>\n<p>This is from <code>WebSecurityConfig</code> where I also have some log out config:</p>\n<pre><code>@Override\nprotected void configure(HttpSecurity http) throws Exception {\n    http.cors().and().csrf().disable()\n            .exceptionHandling().authenticationEntryPoint(accessTokenEntryPoint).and()\n            .sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS).and()\n            .authorizeRequests().antMatchers(&quot;/api/auth/**&quot;).permitAll().and()\n            .formLogin().loginPage(&quot;/api/auth/loginAndRegisterForm&quot;)\n            .permitAll()\n            .and()\n            .logout()\n            .invalidateHttpSession(true)\n            .clearAuthentication(true)\n            .logoutRequestMatcher(new AntPathRequestMatcher(&quot;/logout&quot;))\n            .logoutSuccessUrl(&quot;/api/auth/loginAndRegisterForm&quot;)\n            .deleteCookies(&quot;JSESSIONID&quot;)\n            .permitAll();\n\n    http.addFilterBefore(accessTokenFilter(), UsernamePasswordAuthenticationFilter.class);\n}\n</code></pre>\n<p>If I need to provide something else to anyone that is willing to help I'm here, lost a couple of hours but still didn't find nothing inside my code or somewhere on the internet</p>\n"},{"tags":["java","jdbc"],"answers":[{"tags":[],"owner":{"account_id":1064245,"reputation":85256,"user_id":1065197,"accept_rate":88,"display_name":"Luiggi Mendoza"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1404487772,"creation_date":1404487772,"answer_id":24577438,"question_id":24577358,"body_markdown":"Batch statements are basically for `INSERT`, `UPDATE` and `DELETE` statements, they&#39;re not intended for a `SELECT` statement nor a DDL statement. If you want to execute a `SELECT` statement, do it in another `Statement` or `PreparedStatement` that won&#39;t execute the batch statements.\r\n","title":"How to add SELECT statements in addBatch()?","body":"<p>Batch statements are basically for <code>INSERT</code>, <code>UPDATE</code> and <code>DELETE</code> statements, they're not intended for a <code>SELECT</code> statement nor a DDL statement. If you want to execute a <code>SELECT</code> statement, do it in another <code>Statement</code> or <code>PreparedStatement</code> that won't execute the batch statements.</p>\n"},{"tags":[],"owner":{"account_id":3980890,"reputation":8836,"user_id":3282808,"accept_rate":36,"display_name":"SparkOn"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1404490418,"creation_date":1404488309,"answer_id":24577570,"question_id":24577358,"body_markdown":"Even the javadoc says :  typically addBatch is a SQL `INSERT` or `UPDATE` statement. It is not designed to be  used for `SELECT` statements.[Refer addBatch(String sql)](http://docs.oracle.com/javase/7/docs/api/java/sql/Statement.html#addBatch(java.lang.String)) \r\n\r\nMoreover `addBatch(java.lang.String)` method cannot be called on a PreparedStatement or CallableStatement but `addBatch()` supports PreparedStatement. ","title":"How to add SELECT statements in addBatch()?","body":"<p>Even the javadoc says :  typically addBatch is a SQL <code>INSERT</code> or <code>UPDATE</code> statement. It is not designed to be  used for <code>SELECT</code> statements.<a href=\"http://docs.oracle.com/javase/7/docs/api/java/sql/Statement.html#addBatch%28java.lang.String%29\" rel=\"nofollow\">Refer addBatch(String sql)</a> </p>\n\n<p>Moreover <code>addBatch(java.lang.String)</code> method cannot be called on a PreparedStatement or CallableStatement but <code>addBatch()</code> supports PreparedStatement. </p>\n"},{"tags":[],"owner":{"account_id":8256277,"reputation":418,"user_id":6209355,"display_name":"Yauheni Leaniuk"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664903067,"creation_date":1664903067,"answer_id":73951310,"question_id":24577358,"body_markdown":"If you want to execute them in one connection, one of the options is to add logic like this:\r\n\r\n    if (query.startsWith(&quot;SELECT&quot;)) {\r\n        // process SELECT query \r\n    } else {\r\n        // process UPDATE/INSERT/DELETE queries\r\n    }\r\n\r\nbut in this case, all of your SELECT queries will be executed at first queue","title":"How to add SELECT statements in addBatch()?","body":"<p>If you want to execute them in one connection, one of the options is to add logic like this:</p>\n<pre><code>if (query.startsWith(&quot;SELECT&quot;)) {\n    // process SELECT query \n} else {\n    // process UPDATE/INSERT/DELETE queries\n}\n</code></pre>\n<p>but in this case, all of your SELECT queries will be executed at first queue</p>\n"}],"owner":{"account_id":202342,"reputation":13496,"user_id":449355,"accept_rate":91,"display_name":"Umesh K"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2484,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":24577438,"answer_count":3,"score":1,"last_activity_date":1664903067,"creation_date":1404487438,"question_id":24577358,"body_markdown":"Hi I am trying to execute couple of queries in a batch by using `statement.addBatch(sql)` Now I have found that if query is `SELECT BLAH BLAH` then it throws Exception saying `BatchUpdateExecption` So how do I add SELECT statement inside batch. For e.g. the following does not work because on batch contains SELECT statement\r\n\r\n    st.addBatch(&quot;UPDATE&quot;)\r\n    st.addBatch(&quot;CREATE&quot;)\r\n    st.addBatch(&quot;SELECT&quot;)\r\n    st.executeBatch()\r\n\r\nOne work around is I execute SELECT statement in `st.execute(&quot;SELECT&quot;)` instead of `st.addBatch(&quot;SELECT&quot;)`. Are there any recommended ways or best practice for this usecase? Please guide thanks in advance.","title":"How to add SELECT statements in addBatch()?","body":"<p>Hi I am trying to execute couple of queries in a batch by using <code>statement.addBatch(sql)</code> Now I have found that if query is <code>SELECT BLAH BLAH</code> then it throws Exception saying <code>BatchUpdateExecption</code> So how do I add SELECT statement inside batch. For e.g. the following does not work because on batch contains SELECT statement</p>\n\n<pre><code>st.addBatch(\"UPDATE\")\nst.addBatch(\"CREATE\")\nst.addBatch(\"SELECT\")\nst.executeBatch()\n</code></pre>\n\n<p>One work around is I execute SELECT statement in <code>st.execute(\"SELECT\")</code> instead of <code>st.addBatch(\"SELECT\")</code>. Are there any recommended ways or best practice for this usecase? Please guide thanks in advance.</p>\n"},{"tags":["java","csv","read.csv"],"comments":[{"owner":{"account_id":3575751,"reputation":374,"user_id":2985057,"display_name":"Kelsey"},"score":0,"creation_date":1664900664,"post_id":73950752,"comment_id":130573767,"body_markdown":"What prints out when you run this code, and how is it different from what you are expecting?","body":"What prints out when you run this code, and how is it different from what you are expecting?"},{"owner":{"account_id":3575751,"reputation":374,"user_id":2985057,"display_name":"Kelsey"},"score":1,"creation_date":1664900703,"post_id":73950752,"comment_id":130573782,"body_markdown":"Also please add the results and minimal reproducible example in the post rather than linking to it","body":"Also please add the results and minimal reproducible example in the post rather than linking to it"},{"owner":{"account_id":3575751,"reputation":374,"user_id":2985057,"display_name":"Kelsey"},"score":0,"creation_date":1664900817,"post_id":73950752,"comment_id":130573829,"body_markdown":"Does this answer your question? [Java reading cyrrilic CSV file, writing strange characters](https://stackoverflow.com/questions/18573313/java-reading-cyrrilic-csv-file-writing-strange-characters)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/18573313/java-reading-cyrrilic-csv-file-writing-strange-characters\">Java reading cyrrilic CSV file, writing strange characters</a>"},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1664900925,"post_id":73950752,"comment_id":130573866,"body_markdown":"Have you verified the input is UTF-8? Open the file with a text editor where you can mandate a character encoding. Or open with a hex editor to view the octets yourself. I would guess the file is *not* actually in UTF-8 encoding.","body":"Have you verified the input is UTF-8? Open the file with a text editor where you can mandate a character encoding. Or open with a hex editor to view the octets yourself. I would guess the file is <i>not</i> actually in UTF-8 encoding."},{"owner":{"account_id":25611656,"reputation":11,"user_id":19384989,"display_name":"Maikki"},"score":0,"creation_date":1664900947,"post_id":73950752,"comment_id":130573876,"body_markdown":"What prints out when you run this code:  I added a screenshot to the post; Generally there is a problem with signs such as: &#243;&#243;","body":"What prints out when you run this code:  I added a screenshot to the post; Generally there is a problem with signs such as: &#243;&#243;"},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1664900978,"post_id":73950752,"comment_id":130573884,"body_markdown":"Is this Polish text?","body":"Is this Polish text?"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1664901310,"post_id":73950752,"comment_id":130573996,"body_markdown":"Please tell us what happens when you remove the charset argument from the ```InputStreamReader```  ctor","body":"Please tell us what happens when you remove the charset argument from the <code>InputStreamReader</code>  ctor"},{"owner":{"account_id":25611656,"reputation":11,"user_id":19384989,"display_name":"Maikki"},"score":1,"creation_date":1664901372,"post_id":73950752,"comment_id":130574010,"body_markdown":"The file was not encoded in utf-8 but in ANSI; I changed StandardCharsets.UTF_8 to &quot;Cp1252&quot; and it works; thank you for the hint and sorry for the inconvenience :)","body":"The file was not encoded in utf-8 but in ANSI; I changed StandardCharsets.UTF_8 to &quot;Cp1252&quot; and it works; thank you for the hint and sorry for the inconvenience :)"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1664901549,"post_id":73950752,"comment_id":130574069,"body_markdown":"I think you might find it&#39;s ```Windows-1250```","body":"I think you might find it&#39;s <code>Windows-1250</code>"}],"answers":[{"tags":[],"owner":{"account_id":401843,"reputation":89788,"user_id":768644,"display_name":"rzwitserloot"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664903022,"creation_date":1664903022,"answer_id":73951304,"question_id":73950752,"body_markdown":"&gt; `https://stat.gov.pl/download/gfx/portalinformacyjny/pl/defaultstronaopisowa/4741/1/1/miesieczne_wskazniki_cen_towarow_i_uslug_konsumpcyjnych_od_1982_roku.csv`\r\n\r\n__That is not UTF-8!__\r\n\r\nHence why your code fails. You assumed it was UTF-8. It isn&#39;t. Also, the headers tell you it&#39;s &#39;binary&#39; (it really isn&#39;t, but the point is, the server isn&#39;t giving you a charset either), so you have to guess. It&#39;s probably Windows-1250.\r\n\r\nThis byte sequence is in that CSV:\r\n\r\n&gt; 57 61 72 74 6F 9C E6\r\n\r\nThe last 2 are &#39;interesting&#39; (the other are in the ASCII block so identical is just about every encoding). So that reads Warto?? where the ? are the interesting parts. If this is [Windows-1250](https://en.wikipedia.org/wiki/Windows-1250), it spells Warto. Google tells me that&#39;s polish.\r\n\r\nSo, you need to do three things to fix this:\r\n\r\n1. Stop assuming everything is UTF_8.\r\n2. Learn mojibake detective skills. This involves downloading stuff raw, using hex editors, hunting for things that seem like half of a familiar term (like Warto..), and then looking up likely code pages and checking if the bytes match up to what you thought it should be. It&#39;s a drag. There are no shortcuts for it, when the server doesn&#39;t tell you what the encoding is, mojibake detective skills are your only option.\r\n3. Replace `StandardCharsets.UTF_8` with `&quot;Windows-1250&quot;`, which I&#39;m pretty sure works on any JVM. If not, oof. You&#39;d have to write that codepage yourself and register it as a charset.\r\n\r\n","title":"How to read csv file from url with utf-8 chars in java","body":"<blockquote>\n<p><code>https://stat.gov.pl/download/gfx/portalinformacyjny/pl/defaultstronaopisowa/4741/1/1/miesieczne_wskazniki_cen_towarow_i_uslug_konsumpcyjnych_od_1982_roku.csv</code></p>\n</blockquote>\n<p><strong>That is not UTF-8!</strong></p>\n<p>Hence why your code fails. You assumed it was UTF-8. It isn't. Also, the headers tell you it's 'binary' (it really isn't, but the point is, the server isn't giving you a charset either), so you have to guess. It's probably Windows-1250.</p>\n<p>This byte sequence is in that CSV:</p>\n<blockquote>\n<p>57 61 72 74 6F 9C E6</p>\n</blockquote>\n<p>The last 2 are 'interesting' (the other are in the ASCII block so identical is just about every encoding). So that reads Warto?? where the ? are the interesting parts. If this is <a href=\"https://en.wikipedia.org/wiki/Windows-1250\" rel=\"nofollow noreferrer\">Windows-1250</a>, it spells Warto. Google tells me that's polish.</p>\n<p>So, you need to do three things to fix this:</p>\n<ol>\n<li>Stop assuming everything is UTF_8.</li>\n<li>Learn mojibake detective skills. This involves downloading stuff raw, using hex editors, hunting for things that seem like half of a familiar term (like Warto..), and then looking up likely code pages and checking if the bytes match up to what you thought it should be. It's a drag. There are no shortcuts for it, when the server doesn't tell you what the encoding is, mojibake detective skills are your only option.</li>\n<li>Replace <code>StandardCharsets.UTF_8</code> with <code>&quot;Windows-1250&quot;</code>, which I'm pretty sure works on any JVM. If not, oof. You'd have to write that codepage yourself and register it as a charset.</li>\n</ol>\n"}],"owner":{"account_id":25611656,"reputation":11,"user_id":19384989,"display_name":"Maikki"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":430,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1664903022,"creation_date":1664900174,"question_id":73950752,"body_markdown":"How to correctly read a .csv file in java? I have a utf-8 encoded file but cannot read certain characters correctly.\r\n\r\n[![enter image description here][1]][1]\r\n\r\nMy code:\r\n\r\n    String link = new String(&quot;https://stat.gov.pl/download/gfx/portalinformacyjny/pl/defaultstronaopisowa/4741/1/1/miesieczne_wskazniki_cen_towarow_i_uslug_konsumpcyjnych_od_1982_roku.csv&quot;);\r\n\r\n    URL url = new URL(link);\r\n\r\n    BufferedReader read = new BufferedReader(\r\n            new InputStreamReader(url.openStream(), StandardCharsets.UTF_8));\r\n    String i;\r\n    while ((i = read.readLine()) != null)\r\n        System.out.println(i);\r\n    read.close();\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/o6zbF.png","title":"How to read csv file from url with utf-8 chars in java","body":"<p>How to correctly read a .csv file in java? I have a utf-8 encoded file but cannot read certain characters correctly.</p>\n<p><a href=\"https://i.stack.imgur.com/o6zbF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/o6zbF.png\" alt=\"enter image description here\" /></a></p>\n<p>My code:</p>\n<pre><code>String link = new String(&quot;https://stat.gov.pl/download/gfx/portalinformacyjny/pl/defaultstronaopisowa/4741/1/1/miesieczne_wskazniki_cen_towarow_i_uslug_konsumpcyjnych_od_1982_roku.csv&quot;);\n\nURL url = new URL(link);\n\nBufferedReader read = new BufferedReader(\n        new InputStreamReader(url.openStream(), StandardCharsets.UTF_8));\nString i;\nwhile ((i = read.readLine()) != null)\n    System.out.println(i);\nread.close();\n</code></pre>\n"},{"tags":["java","android","grid","photo"],"comments":[{"owner":{"account_id":10927511,"reputation":3072,"user_id":8031784,"display_name":"Aniruddh Parihar"},"score":0,"creation_date":1664903298,"post_id":73951180,"comment_id":130574649,"body_markdown":"hope this will help you. https://github.com/abhisheklunagaria/FacebookTypeImageGrid","body":"hope this will help you. <a href=\"https://github.com/abhisheklunagaria/FacebookTypeImageGrid\" rel=\"nofollow noreferrer\">github.com/abhisheklunagaria/FacebookTypeImageGrid</a>"},{"owner":{"account_id":17851808,"reputation":1,"user_id":12967401,"display_name":"sentrax"},"score":0,"creation_date":1664904102,"post_id":73951180,"comment_id":130574939,"body_markdown":"thank you, I&#39;m having problem on that too, can you or someone help me how to use BitFrames? Because firebase storage is returning URI and the showBitFrame() method requires BeanImage which gives an error when i combine the two.","body":"thank you, I&#39;m having problem on that too, can you or someone help me how to use BitFrames? Because firebase storage is returning URI and the showBitFrame() method requires BeanImage which gives an error when i combine the two."}],"owner":{"account_id":17851808,"reputation":1,"user_id":12967401,"display_name":"sentrax"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":54,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1664902343,"creation_date":1664902343,"question_id":73951180,"body_markdown":"Is there any libraries aside from BitFrames to use so that I can make a Facebook like feed for photos more that 1? Because I don&#39;t know how to implement BitFrames Library on Firebase storage.\r\n\r\n[Like This Layout][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/F0kUF.png","title":"Facebook like Grid Photos Library","body":"<p>Is there any libraries aside from BitFrames to use so that I can make a Facebook like feed for photos more that 1? Because I don't know how to implement BitFrames Library on Firebase storage.</p>\n<p><a href=\"https://i.stack.imgur.com/F0kUF.png\" rel=\"nofollow noreferrer\">Like This Layout</a></p>\n"},{"tags":["java","spring","mocking"],"comments":[{"owner":{"account_id":5072626,"reputation":21,"user_id":4070977,"display_name":"ddnamaste"},"score":0,"creation_date":1664976674,"post_id":73951169,"comment_id":130591397,"body_markdown":"After more experimentation, I believe the problem is that when this test is run, the Spring system does not realize it needs a new application context. So the test code is using a mock, but the service code is still using a real class. Adding a class-level @DirtiesContext BEFORE_CLASS gets me a new application context and things work.","body":"After more experimentation, I believe the problem is that when this test is run, the Spring system does not realize it needs a new application context. So the test code is using a mock, but the service code is still using a real class. Adding a class-level @DirtiesContext BEFORE_CLASS gets me a new application context and things work."}],"owner":{"account_id":5072626,"reputation":21,"user_id":4070977,"display_name":"ddnamaste"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":65,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1664902217,"creation_date":1664902217,"question_id":73951169,"body_markdown":"I am trying to organize our usage of @MockBean to reduce the number of ApplicationContexts in use during our testing. My approach is to put shared\r\nmocks in super classes and then inherit into the actual test code.\r\n\r\nI have a hierarchy like this:\r\n\r\nBaseTest:\r\n```\r\n@ActiveProfiles({&quot;test&quot;, &quot;human-readable-logging&quot;})\r\n@ContextConfiguration(classes = Main.class)\r\n@ExtendWith(SpringExtension.class)\r\n@SpringBootTest(properties = {&quot;spring.cloud.gcp.credentials.location=&quot;})\r\n@AutoConfigureMockMvc(print = MockMvcPrint.NONE)\r\npublic class BaseTest {}\r\n```\r\nBaseUnitTestMocks: this has two subclasses\r\n```\r\npublic class BaseUnitTestMocks extends BaseTest {\r\n  @MockBean private ServiceA serviceA;\r\n  @MockBean private ServiceB serviceB;\r\n\r\n   ... accessors ...\r\n```\r\nBaseUnitTest: this is on the inheritance line with the problem.\r\n```\r\n@Tag(&quot;unit&quot;)\r\n@ActiveProfiles(&quot;unit-test&quot;)\r\npublic class BaseUnitTest extends BaseUnitTestMocks {}\r\n```\r\nBaseUnitTestPlusOneMock: this mock seems to not make it into the application context\r\n```\r\npublic class BaseUnitTestPlusOneMock extends BaseUnitTest {\r\n  @MockBean private ServiceC serviceC;\r\n   ... accessor ...\r\n}\r\n```\r\nThe test class looks like this:\r\n```\r\npublic class MyTest extends BaseUnitTestPlusOneMock {\r\n  private static final FAKE_THING = &quot;fake_thing&quot;;\r\n\r\n  @BeforeEach\r\n  public void setup() throws IOException {\r\n    when(mockServiceC().getRequiredThing(any())).thenReturn(FAKE_THING);\r\n  }\r\n\r\n    ... tests ...\r\n```\r\n\r\n**Expected Result:**\r\nThe mock is included in the application context and used in the Autowired in ServiceC.\r\n\r\n**Actual Result:**\r\nThis works when run from the debugger in IntelliJ. When run in a clean environment (cleaned project and stopped all gradle daemons), not in the debugger it fails because the actual ServiceC is used.\r\n\r\n","title":"Is it possible to use multiple layers of inherited @MockBean?","body":"<p>I am trying to organize our usage of @MockBean to reduce the number of ApplicationContexts in use during our testing. My approach is to put shared\nmocks in super classes and then inherit into the actual test code.</p>\n<p>I have a hierarchy like this:</p>\n<p>BaseTest:</p>\n<pre><code>@ActiveProfiles({&quot;test&quot;, &quot;human-readable-logging&quot;})\n@ContextConfiguration(classes = Main.class)\n@ExtendWith(SpringExtension.class)\n@SpringBootTest(properties = {&quot;spring.cloud.gcp.credentials.location=&quot;})\n@AutoConfigureMockMvc(print = MockMvcPrint.NONE)\npublic class BaseTest {}\n</code></pre>\n<p>BaseUnitTestMocks: this has two subclasses</p>\n<pre><code>public class BaseUnitTestMocks extends BaseTest {\n  @MockBean private ServiceA serviceA;\n  @MockBean private ServiceB serviceB;\n\n   ... accessors ...\n</code></pre>\n<p>BaseUnitTest: this is on the inheritance line with the problem.</p>\n<pre><code>@Tag(&quot;unit&quot;)\n@ActiveProfiles(&quot;unit-test&quot;)\npublic class BaseUnitTest extends BaseUnitTestMocks {}\n</code></pre>\n<p>BaseUnitTestPlusOneMock: this mock seems to not make it into the application context</p>\n<pre><code>public class BaseUnitTestPlusOneMock extends BaseUnitTest {\n  @MockBean private ServiceC serviceC;\n   ... accessor ...\n}\n</code></pre>\n<p>The test class looks like this:</p>\n<pre><code>public class MyTest extends BaseUnitTestPlusOneMock {\n  private static final FAKE_THING = &quot;fake_thing&quot;;\n\n  @BeforeEach\n  public void setup() throws IOException {\n    when(mockServiceC().getRequiredThing(any())).thenReturn(FAKE_THING);\n  }\n\n    ... tests ...\n</code></pre>\n<p><strong>Expected Result:</strong>\nThe mock is included in the application context and used in the Autowired in ServiceC.</p>\n<p><strong>Actual Result:</strong>\nThis works when run from the debugger in IntelliJ. When run in a clean environment (cleaned project and stopped all gradle daemons), not in the debugger it fails because the actual ServiceC is used.</p>\n"},{"tags":["java","cmd","openssl","inputstream","processbuilder"],"comments":[{"owner":{"account_id":974021,"reputation":63348,"user_id":995891,"accept_rate":83,"display_name":"zapl"},"score":0,"creation_date":1664570213,"post_id":73913667,"comment_id":130510082,"body_markdown":"what if you used pure java to do that? I bet bouncycastle has all the required functionality. Also why do you use `cmd.exe`? `new ProcessBuilder(&quot;java&quot;, &quot;-version&quot;)` etc should work directly. Could be https://superuser.com/a/1258521 (`cmd.exe /c`). Lastly, check [Process.html#getErrorStream()], it&#39;s likely there is your reason","body":"what if you used pure java to do that? I bet bouncycastle has all the required functionality. Also why do you use <code>cmd.exe</code>? <code>new ProcessBuilder(&quot;java&quot;, &quot;-version&quot;)</code> etc should work directly. Could be <a href=\"https://superuser.com/a/1258521\">superuser.com/a/1258521</a> (<code>cmd.exe &#47;c</code>). Lastly, check [Process.html#getErrorStream()], it&#39;s likely there is your reason"},{"owner":{"account_id":974021,"reputation":63348,"user_id":995891,"accept_rate":83,"display_name":"zapl"},"score":1,"creation_date":1664570743,"post_id":73913667,"comment_id":130510169,"body_markdown":"ah, you redirect error, so not that. But if I read the docs right `new Pb(&#39;cmd1&#39;).setCommand(&#39;cmd2&#39;)` ultimately sets the command to `&#39;cmd2&#39;` and ignores the initial one","body":"ah, you redirect error, so not that. But if I read the docs right <code>new Pb(&#39;cmd1&#39;).setCommand(&#39;cmd2&#39;)</code> ultimately sets the command to <code>&#39;cmd2&#39;</code> and ignores the initial one"},{"owner":{"account_id":17185334,"reputation":58,"user_id":12440050,"display_name":"Dmytro Moskovchenko"},"score":0,"creation_date":1664573221,"post_id":73913667,"comment_id":130510688,"body_markdown":"@zalp Hm... That&#39;s sure a blinder. I&#39;m surprised how my &quot;keytool&quot; commands managed to work well.\nNow I get an error &quot; `&#39;A_config.cnf&#39; is not recognized as an internal or external command`&quot;. PB has probably extracted cmd&#39;s &quot;/C&quot; flag in &quot;-config ./CA_config.cnf&quot;  part. So now I need to figure how to escape such cases.","body":"@zalp Hm... That&#39;s sure a blinder. I&#39;m surprised how my &quot;keytool&quot; commands managed to work well. Now I get an error &quot; <code>&#39;A_config.cnf&#39; is not recognized as an internal or external command</code>&quot;. PB has probably extracted cmd&#39;s &quot;/C&quot; flag in &quot;-config ./CA_config.cnf&quot;  part. So now I need to figure how to escape such cases."},{"owner":{"account_id":974021,"reputation":63348,"user_id":995891,"accept_rate":83,"display_name":"zapl"},"score":0,"creation_date":1664573486,"post_id":73913667,"comment_id":130510741,"body_markdown":"if you wanted to run `cmd /c java -version`, it might be that you need to do `(&quot;cmd&quot;, &quot;/c&quot;, &quot;java -version&quot;)` so that cmd sees the thing you want to execute as a single command, not multiple. That could be different without `cmd` because now `java` would want to know what it&#39;s arguments are","body":"if you wanted to run <code>cmd &#47;c java -version</code>, it might be that you need to do <code>(&quot;cmd&quot;, &quot;&#47;c&quot;, &quot;java -version&quot;)</code> so that cmd sees the thing you want to execute as a single command, not multiple. That could be different without <code>cmd</code> because now <code>java</code> would want to know what it&#39;s arguments are"}],"answers":[{"tags":[],"owner":{"account_id":3421244,"reputation":35863,"user_id":2868801,"display_name":"dave_thompson_085"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1664588576,"creation_date":1664588576,"answer_id":73915271,"question_id":73913667,"body_markdown":"&gt; It doesn&#39;t reach even the first input spot where I need to enter CA_certificate.crt password.\r\n\r\nYou use `BufferedReader.readLine` which returns when, and only when, it reads a line terminator aka end-of-line/EOL -- usually LF on Unix, CRLF on Windows, or CR on classic Mac, but it accepts any of the three on any type of system -- or the input stream hits end-of-file/EOF, and since the connection from a child process&#39; stdout or stderr (or both when you combine them) is a pipe, EOF occurs only when the child process closes its end of the pipe or exits. In general a prompt is neither terminated by LF/CRLF/CR nor followed immediately by closing or exiting, hence your code won&#39;t read it. But for _this_ prompt see more below.\r\n\r\n&gt; various ways of waiting for a while, so openssl would be ready to consume inputs from me\r\n\r\nThis is unnecessary and useless; the connection _to_ a child process&#39; stdin is also a pipe and pipes are buffered, so you can write at least a few kilobytes even if the child isn&#39;t ready to read yet.\r\n\r\nYour actual problem is that `openssl` _passphrase_ prompts do not use stderr (or stdout) and stdin, but instead directly use the _console_, which `ProcessBuilder` cannot capture or handle. Instead of trying to answer this prompt, add to your command two additional arguments `-passin pass:&lt;value&gt;`.\r\n\r\nAfter doing that you _can_ answer y+EOL to (with or without previously reading) the &#39;sign&#39; and &#39;commit&#39; prompts, but more easily you can add _another_ argument `-batch` which skips these prompts entirely.\r\n\r\nAside: since you&#39;re using keytool already, have you considered using `keytool -gencert` to generate the (child) cert from CSR instead of futzing with `openssl`? It doesn&#39;t maintain a &#39;database&#39; for you like `openssl ca` does, but if you actually want that you can do it yourself in Java, and probably better.","title":"Sign .csr file with &quot;openssl ca&quot; command using Java ProcessBuilder (through either cmd.exe or openssl.exe)","body":"<blockquote>\n<p>It doesn't reach even the first input spot where I need to enter CA_certificate.crt password.</p>\n</blockquote>\n<p>You use <code>BufferedReader.readLine</code> which returns when, and only when, it reads a line terminator aka end-of-line/EOL -- usually LF on Unix, CRLF on Windows, or CR on classic Mac, but it accepts any of the three on any type of system -- or the input stream hits end-of-file/EOF, and since the connection from a child process' stdout or stderr (or both when you combine them) is a pipe, EOF occurs only when the child process closes its end of the pipe or exits. In general a prompt is neither terminated by LF/CRLF/CR nor followed immediately by closing or exiting, hence your code won't read it. But for <em>this</em> prompt see more below.</p>\n<blockquote>\n<p>various ways of waiting for a while, so openssl would be ready to consume inputs from me</p>\n</blockquote>\n<p>This is unnecessary and useless; the connection <em>to</em> a child process' stdin is also a pipe and pipes are buffered, so you can write at least a few kilobytes even if the child isn't ready to read yet.</p>\n<p>Your actual problem is that <code>openssl</code> <em>passphrase</em> prompts do not use stderr (or stdout) and stdin, but instead directly use the <em>console</em>, which <code>ProcessBuilder</code> cannot capture or handle. Instead of trying to answer this prompt, add to your command two additional arguments <code>-passin pass:&lt;value&gt;</code>.</p>\n<p>After doing that you <em>can</em> answer y+EOL to (with or without previously reading) the 'sign' and 'commit' prompts, but more easily you can add <em>another</em> argument <code>-batch</code> which skips these prompts entirely.</p>\n<p>Aside: since you're using keytool already, have you considered using <code>keytool -gencert</code> to generate the (child) cert from CSR instead of futzing with <code>openssl</code>? It doesn't maintain a 'database' for you like <code>openssl ca</code> does, but if you actually want that you can do it yourself in Java, and probably better.</p>\n"},{"tags":[],"owner":{"account_id":17185334,"reputation":58,"user_id":12440050,"display_name":"Dmytro Moskovchenko"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664901835,"creation_date":1664901835,"answer_id":73951085,"question_id":73913667,"body_markdown":"First, I was invoking cmd.exe in the wrong way because of ProcessBuilder constructor&#39;s specifics. Now, the program, its flags and the command are all specified in the constructor.\r\n\r\nSecond, I didn&#39;t know the [specifics][1] of &quot;openssl ca&quot; command. There are helping options (`-passin pass:&lt;value&gt;, -batch`) that simplify the process of signing .csr files by minimising the interaction with Process object&#39;s streams. \r\nYou also need to pay attention to the order of options: `-infiles &lt;arg&gt;` must be the last one in the line). \r\n\r\nThe final code block looks like that:\r\n\r\n    private static void signCertReqWithOpenSSL() throws IOException {\r\n    String command = &quot;openssl ca -config ./CA_config.cnf -extensions my_client_cert -passin pass:B51D_AXfs2x -batch -infiles ./CA_certreqs/MY_CLIENT_AAAAAA.csr&quot;\r\n    \r\n    //init cmd process\r\n    ProcessBuilder pb = new ProcessBuilder(&quot;cmd.exe&quot;, &quot;/K&quot;, command);\r\n    File pathFromAppToNeededDir = new File(&quot;../dir1/dir2/&quot;).getAbsoluteFile();\r\n    pb.directory(relativePathFromAppToNeededDir);\r\n    Process process = pb.start();\r\n    \r\n    try (InputStream in = process.getInputStream())) {\r\n        readAllConsoleOutputFromBuffer(in, 4000); //outputs everything, including -BEGIN CERTIFICATE- part\r\n    }\r\n    process.destroy();\r\n    }\r\n\r\nSpecial thanks to dave_thompson_085!\r\n\r\n  [1]: https://www.openssl.org/docs/man1.0.2/man1/ca.html","title":"Sign .csr file with &quot;openssl ca&quot; command using Java ProcessBuilder (through either cmd.exe or openssl.exe)","body":"<p>First, I was invoking cmd.exe in the wrong way because of ProcessBuilder constructor's specifics. Now, the program, its flags and the command are all specified in the constructor.</p>\n<p>Second, I didn't know the <a href=\"https://www.openssl.org/docs/man1.0.2/man1/ca.html\" rel=\"nofollow noreferrer\">specifics</a> of &quot;openssl ca&quot; command. There are helping options (<code>-passin pass:&lt;value&gt;, -batch</code>) that simplify the process of signing .csr files by minimising the interaction with Process object's streams.\nYou also need to pay attention to the order of options: <code>-infiles &lt;arg&gt;</code> must be the last one in the line).</p>\n<p>The final code block looks like that:</p>\n<pre><code>private static void signCertReqWithOpenSSL() throws IOException {\nString command = &quot;openssl ca -config ./CA_config.cnf -extensions my_client_cert -passin pass:B51D_AXfs2x -batch -infiles ./CA_certreqs/MY_CLIENT_AAAAAA.csr&quot;\n\n//init cmd process\nProcessBuilder pb = new ProcessBuilder(&quot;cmd.exe&quot;, &quot;/K&quot;, command);\nFile pathFromAppToNeededDir = new File(&quot;../dir1/dir2/&quot;).getAbsoluteFile();\npb.directory(relativePathFromAppToNeededDir);\nProcess process = pb.start();\n\ntry (InputStream in = process.getInputStream())) {\n    readAllConsoleOutputFromBuffer(in, 4000); //outputs everything, including -BEGIN CERTIFICATE- part\n}\nprocess.destroy();\n}\n</code></pre>\n<p>Special thanks to dave_thompson_085!</p>\n"}],"owner":{"account_id":17185334,"reputation":58,"user_id":12440050,"display_name":"Dmytro Moskovchenko"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":261,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73915271,"answer_count":2,"score":1,"last_activity_date":1664901835,"creation_date":1664569710,"question_id":73913667,"body_markdown":"I&#39;m trying to automatize the process of manual generation of .p12 signed certificate for web authorization. \r\n\r\nKeyPair (.p12) and CertReq (.csr) files are generated using JDK&#39;s keytool program. Now I need to sign .p12 with an intermediate certificate using OpenSSL, but unlike executing &quot;keytool&quot; commands in `ProcessBuilder` or in `Runtime.getRuntime().exec(...)`, openssl struggles working through Java&#39;s Process object. I don&#39;t know what&#39;s wrong with it.\r\n\r\nThe command I need to be executed:\r\n\r\n    openssl ca -config ./CA_config.cnf -extensions my_client_cert -infiles ./CA_certreqs/MY_CLIENT_AAAAAA.csr\r\n\r\nThere are 3 moments when it waits for user input and outputs text in-between them:\r\n1) enter CA_certificate.crt password (the .crt file CA_config.cnf is pointing at);\r\n2) sign the certificate - [y/n];\r\n3) commit the results - [y/n].\r\n\r\nThe code snapshot is provided below. Most vars are replaced with hardcode for easier reading.\r\n\r\n    private static void signCertReqWithOpenSSL2() throws IOException {\r\n\t\tString command = &quot;openssl ca -config ./CA_config.cnf -extensions my_client_cert -infiles ./CA_certreqs/MY_CLIENT_AAAAAA.csr&quot;\r\n\t\tString[] commandSeparated = command.split(&quot; &quot;);\r\n\t\t\r\n\t\t//init cmd process\r\n\t\tProcessBuilder pb = new ProcessBuilder(&quot;cmd.exe&quot;);\r\n\t\tpb.redirectErrorStream(true);\r\n\t\tpb.directory(new File(&quot;../dir1/dir2/&quot;).getAbsoluteFile());\r\n\t\tpb.command(commandSeparated);\r\n\t\tProcess process = pb.start();\r\n\t\t\r\n\t\ttry (InputStream in = process.getInputStream());\r\n\t\t\t OutputStream out = process.getOutputStream()) {\r\n\t\t\tSystem.out.println(&quot;--- begin---&quot;);\r\n\t\t\t\r\n\t\t\treadAllConsoleOutputFromBuffer(in, 80); //93 bytes actually\r\n\t\t\t\r\n\t\t\t//enter CA_certificate.crt password\r\n\t\t\tenterUserInputToOutputStream(out, caPassword);\r\n\t\t\treadAllConsoleOutputFromBuffer(in, 10); //350\r\n\t\t\t\r\n\t\t\t//sign the certificate\r\n\t\t\tenterUserInputToOutputStream(out, &quot;y&quot;);\r\n\t\t\treadAllConsoleOutputFromBuffer(in, 10); //56\r\n\t\t\t\r\n\t\t\t//commit the certification\r\n\t\t\tenterUserInputToOutputStream(out, &quot;y&quot;);\r\n\t\t\treadAllConsoleOutputFromBuffer(process.getInputStream(), 10); //4815\r\n\r\n\t\t\tSystem.out.println(&quot;--- end ---&quot;);\r\n\t\t}\r\n\t\tprocess.destroy();\r\n\t}\r\n\r\n    private static void enterUserInputToOutputStream(OutputStream out, String input) throws IOException {\r\n\t\tout.write(String.format(&quot;%s%n&quot;, input).getBytes());\r\n\t\tout.flush();\r\n\t}\r\n\r\n    //if the stream has enough text to be printed (indicating that it&#39;s probably ready for user input), print it\r\n    private static void readAllConsoleOutputFromBuffer(InputStream in, int minTextSizeInBytes) throws IOException {\r\n    //loop is made just to make it scanning the stream during some time. I know there&#39;re better ways\r\n\t\tfor (int i = 0; i &lt; 100000; i++) {\r\n\t\t\tif (in.available() &gt; minTextSizeInBytes) {\r\n\t\t\t\tString line;\r\n\t\t\t\tBufferedReader buff = new BufferedReader(new InputStreamReader(in));\r\n\t\t\t\twhile ((line = buff.readLine()) != null) {\r\n\t\t\t\t\tSystem.out.println(line);\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\nProblem:\r\nI cannot make it reach the end, so it generates a new .pem file and/or outputs &quot;BEGIN CERTIFICATE&quot; text in the console for my further processing.\r\n\r\nIt doesn&#39;t reach even the first input spot where I need to enter CA_certificate.crt password.\r\nAt best, I catch the first output line &quot;Using configuration from ./CA_config.cnf&quot;.\r\n\r\n\r\nI&#39;m sure everything is set up fine. \r\n- openssl directory is present in %PATH%;\r\n- all files and folders exist and OpenSSL finds them (if I make a mistake in CA_config.cnf or remove any file needed for execution, I catch the error in the console output that something is not found).\r\n\r\nWhat I&#39;ve tried:\r\n- ignoring the console outputs (interaction with InputStream);\r\n- various ways of waiting for a while, so openssl would be ready to consume inputs from me (Thread.sleep, other Thread checking conditions or sleeping, for loop to make some time pass, etc.);\r\n- using openssl.exe as the executable instead of cmd.exe - I rewrote the paths in the command and CA_config.cnf and got the same result as with cmd.exe and its relative paths.\r\n- messing with strings and encodings in case it somehow stucks at the line terminator after the first output line being read, even though I doubt it&#39;s the root cause.\r\n\r\nAny help or ideas how to make work fine other than deligating the command to a .bat file? Maybe I don&#39;t interact with the Process object&#39;s Input and Output streams in the right way.\r\n\r\nAny help is appreciated!\r\n\r\nOS: Windows 10 x64","title":"Sign .csr file with &quot;openssl ca&quot; command using Java ProcessBuilder (through either cmd.exe or openssl.exe)","body":"<p>I'm trying to automatize the process of manual generation of .p12 signed certificate for web authorization.</p>\n<p>KeyPair (.p12) and CertReq (.csr) files are generated using JDK's keytool program. Now I need to sign .p12 with an intermediate certificate using OpenSSL, but unlike executing &quot;keytool&quot; commands in <code>ProcessBuilder</code> or in <code>Runtime.getRuntime().exec(...)</code>, openssl struggles working through Java's Process object. I don't know what's wrong with it.</p>\n<p>The command I need to be executed:</p>\n<pre><code>openssl ca -config ./CA_config.cnf -extensions my_client_cert -infiles ./CA_certreqs/MY_CLIENT_AAAAAA.csr\n</code></pre>\n<p>There are 3 moments when it waits for user input and outputs text in-between them:</p>\n<ol>\n<li>enter CA_certificate.crt password (the .crt file CA_config.cnf is pointing at);</li>\n<li>sign the certificate - [y/n];</li>\n<li>commit the results - [y/n].</li>\n</ol>\n<p>The code snapshot is provided below. Most vars are replaced with hardcode for easier reading.</p>\n<pre><code>private static void signCertReqWithOpenSSL2() throws IOException {\n    String command = &quot;openssl ca -config ./CA_config.cnf -extensions my_client_cert -infiles ./CA_certreqs/MY_CLIENT_AAAAAA.csr&quot;\n    String[] commandSeparated = command.split(&quot; &quot;);\n    \n    //init cmd process\n    ProcessBuilder pb = new ProcessBuilder(&quot;cmd.exe&quot;);\n    pb.redirectErrorStream(true);\n    pb.directory(new File(&quot;../dir1/dir2/&quot;).getAbsoluteFile());\n    pb.command(commandSeparated);\n    Process process = pb.start();\n    \n    try (InputStream in = process.getInputStream());\n         OutputStream out = process.getOutputStream()) {\n        System.out.println(&quot;--- begin---&quot;);\n        \n        readAllConsoleOutputFromBuffer(in, 80); //93 bytes actually\n        \n        //enter CA_certificate.crt password\n        enterUserInputToOutputStream(out, caPassword);\n        readAllConsoleOutputFromBuffer(in, 10); //350\n        \n        //sign the certificate\n        enterUserInputToOutputStream(out, &quot;y&quot;);\n        readAllConsoleOutputFromBuffer(in, 10); //56\n        \n        //commit the certification\n        enterUserInputToOutputStream(out, &quot;y&quot;);\n        readAllConsoleOutputFromBuffer(process.getInputStream(), 10); //4815\n\n        System.out.println(&quot;--- end ---&quot;);\n    }\n    process.destroy();\n}\n\nprivate static void enterUserInputToOutputStream(OutputStream out, String input) throws IOException {\n    out.write(String.format(&quot;%s%n&quot;, input).getBytes());\n    out.flush();\n}\n\n//if the stream has enough text to be printed (indicating that it's probably ready for user input), print it\nprivate static void readAllConsoleOutputFromBuffer(InputStream in, int minTextSizeInBytes) throws IOException {\n//loop is made just to make it scanning the stream during some time. I know there're better ways\n    for (int i = 0; i &lt; 100000; i++) {\n        if (in.available() &gt; minTextSizeInBytes) {\n            String line;\n            BufferedReader buff = new BufferedReader(new InputStreamReader(in));\n            while ((line = buff.readLine()) != null) {\n                System.out.println(line);\n            }\n            break;\n        }\n    }\n}\n</code></pre>\n<p>Problem:\nI cannot make it reach the end, so it generates a new .pem file and/or outputs &quot;BEGIN CERTIFICATE&quot; text in the console for my further processing.</p>\n<p>It doesn't reach even the first input spot where I need to enter CA_certificate.crt password.\nAt best, I catch the first output line &quot;Using configuration from ./CA_config.cnf&quot;.</p>\n<p>I'm sure everything is set up fine.</p>\n<ul>\n<li>openssl directory is present in %PATH%;</li>\n<li>all files and folders exist and OpenSSL finds them (if I make a mistake in CA_config.cnf or remove any file needed for execution, I catch the error in the console output that something is not found).</li>\n</ul>\n<p>What I've tried:</p>\n<ul>\n<li>ignoring the console outputs (interaction with InputStream);</li>\n<li>various ways of waiting for a while, so openssl would be ready to consume inputs from me (Thread.sleep, other Thread checking conditions or sleeping, for loop to make some time pass, etc.);</li>\n<li>using openssl.exe as the executable instead of cmd.exe - I rewrote the paths in the command and CA_config.cnf and got the same result as with cmd.exe and its relative paths.</li>\n<li>messing with strings and encodings in case it somehow stucks at the line terminator after the first output line being read, even though I doubt it's the root cause.</li>\n</ul>\n<p>Any help or ideas how to make work fine other than deligating the command to a .bat file? Maybe I don't interact with the Process object's Input and Output streams in the right way.</p>\n<p>Any help is appreciated!</p>\n<p>OS: Windows 10 x64</p>\n"},{"tags":["java","arrays","csv","writer"],"answers":[{"tags":[],"owner":{"account_id":3202753,"reputation":6346,"user_id":2704500,"accept_rate":50,"display_name":"pandaadb"},"down_vote_count":0,"up_vote_count":17,"is_accepted":true,"score":17,"last_activity_date":1456929325,"creation_date":1456927983,"answer_id":35749628,"question_id":35749250,"body_markdown":"have you considered using OpenCSV for writing your values:http://opencsv.sourceforge.net/\r\n\r\nThere is an example of how to write CSV files and it is very easy.\r\n\r\nAs to your problem, it appears you can&#39;t write the values because the Arraylist toString method will not return a comma separated string. You can use this: \r\n\r\n    public static void main(String[] args) throws IOException {\r\n\t\t\r\n\t\tFileWriter writer = new FileWriter(&quot;/Users/artur/tmp/csv/sto1.csv&quot;);\r\n\t\t\r\n\t\tList&lt;String&gt; test = new ArrayList&lt;&gt;();\r\n\t\ttest.add(&quot;Word1&quot;);\r\n\t\ttest.add(&quot;Word2&quot;);\r\n\t\ttest.add(&quot;Word3&quot;);\r\n\t\ttest.add(&quot;Word4&quot;);\r\n\t\t\r\n\t\tString collect = test.stream().collect(Collectors.joining(&quot;,&quot;));\r\n\t\tSystem.out.println(collect);\r\n\t\t\r\n\t\twriter.write(collect);\r\n\t\twriter.close();\r\n\t\t\r\n\t}\r\n\r\nSee the collector impl - it will collect all String objects and concatinate them, using the separator you provide. The output then loolks like:\r\n\r\n    Word1,Word2,Word3,Word4\r\n\r\nI hope that fixes your problem. Let me know if something&#39;s not clear. \r\n\r\nArtur\r\n\r\nEdit 2, for your question.\r\n\r\nIf your input is a String that you read, you can split it by the space first to get it in separated lines. If it is an actual array, it won&#39;t work. This is my example: \r\n\r\n    public static void main(String[] args) throws IOException {\r\n    \t\t\r\n    \t\tString input = &quot;[\\&quot;user1\\&quot;,\\&quot;track1\\&quot;,\\&quot;player1\\&quot;, \\&quot;user1\\&quot;,\\&quot;track2\\&quot;,\\&quot;player2\\&quot;, \\&quot;user1\\&quot;,\\&quot;track3\\&quot;,\\&quot;player3\\&quot;]&quot;;\r\n    \t\tinput = input.substring(1, input.length() - 1); // get rid of brackets\r\n    \t\tString[] split = input.split(&quot; &quot;);\r\n    \r\n    \t\tFileWriter writer = new FileWriter(&quot;/Users/artur/tmp/csv/sto1.csv&quot;);\r\n    \t\t\r\n    \t\tfor(String s : split) {\r\n    \t\t\tString[] split2 = s.split(&quot;,&quot;);\r\n    \t\t\twriter.write(Arrays.asList(split2).stream().collect(Collectors.joining(&quot;,&quot;)));\r\n    \t\t\twriter.write(&quot;\\n&quot;); // newline\r\n    \t\t}\r\n    \t\t\r\n    \t\twriter.close();\r\n    \t\t\r\n    \t}\r\n\r\nThe resulting file looks like this:\r\n\r\n    &quot;user1&quot;,&quot;track1&quot;,&quot;player1&quot;\r\n    &quot;user1&quot;,&quot;track2&quot;,&quot;player2&quot;\r\n    &quot;user1&quot;,&quot;track3&quot;,&quot;player3&quot;","title":"java write the list string into csv file","body":"<p>have you considered using OpenCSV for writing your values:<a href=\"http://opencsv.sourceforge.net/\" rel=\"noreferrer\">http://opencsv.sourceforge.net/</a></p>\n\n<p>There is an example of how to write CSV files and it is very easy.</p>\n\n<p>As to your problem, it appears you can't write the values because the Arraylist toString method will not return a comma separated string. You can use this: </p>\n\n<pre><code>public static void main(String[] args) throws IOException {\n\n    FileWriter writer = new FileWriter(\"/Users/artur/tmp/csv/sto1.csv\");\n\n    List&lt;String&gt; test = new ArrayList&lt;&gt;();\n    test.add(\"Word1\");\n    test.add(\"Word2\");\n    test.add(\"Word3\");\n    test.add(\"Word4\");\n\n    String collect = test.stream().collect(Collectors.joining(\",\"));\n    System.out.println(collect);\n\n    writer.write(collect);\n    writer.close();\n\n}\n</code></pre>\n\n<p>See the collector impl - it will collect all String objects and concatinate them, using the separator you provide. The output then loolks like:</p>\n\n<pre><code>Word1,Word2,Word3,Word4\n</code></pre>\n\n<p>I hope that fixes your problem. Let me know if something's not clear. </p>\n\n<p>Artur</p>\n\n<p>Edit 2, for your question.</p>\n\n<p>If your input is a String that you read, you can split it by the space first to get it in separated lines. If it is an actual array, it won't work. This is my example: </p>\n\n<pre><code>public static void main(String[] args) throws IOException {\n\n        String input = \"[\\\"user1\\\",\\\"track1\\\",\\\"player1\\\", \\\"user1\\\",\\\"track2\\\",\\\"player2\\\", \\\"user1\\\",\\\"track3\\\",\\\"player3\\\"]\";\n        input = input.substring(1, input.length() - 1); // get rid of brackets\n        String[] split = input.split(\" \");\n\n        FileWriter writer = new FileWriter(\"/Users/artur/tmp/csv/sto1.csv\");\n\n        for(String s : split) {\n            String[] split2 = s.split(\",\");\n            writer.write(Arrays.asList(split2).stream().collect(Collectors.joining(\",\")));\n            writer.write(\"\\n\"); // newline\n        }\n\n        writer.close();\n\n    }\n</code></pre>\n\n<p>The resulting file looks like this:</p>\n\n<pre><code>\"user1\",\"track1\",\"player1\"\n\"user1\",\"track2\",\"player2\"\n\"user1\",\"track3\",\"player3\"\n</code></pre>\n"}],"owner":{"account_id":2676501,"reputation":2361,"user_id":2312801,"accept_rate":68,"display_name":"mOna"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":71967,"favorite_count":0,"down_vote_count":1,"up_vote_count":5,"accepted_answer_id":35749628,"answer_count":1,"score":4,"last_activity_date":1664901723,"creation_date":1456927052,"question_id":35749250,"body_markdown":"I have some array strings like the following (note that there is space after each player which shows different lines...),\r\n\r\n    [&quot;user1&quot;,&quot;track1&quot;,&quot;player1&quot;, &quot;user1&quot;,&quot;track2&quot;,&quot;player2&quot;, &quot;user1&quot;,&quot;track3&quot;,&quot;player3&quot;, ...] \r\n\r\nI would like to divide this array into two parts (almost equal) based on the number of lines (spaces here). So, for example if there is 40 spaces in this array, I need to store the lines starting from the first to the half(20th line) in a file (let&#39;s call it file A) and put the rest in file B. \r\nI could divide the arraylist, but I could not write it in the correct way in the CSV file.\r\n\r\nHere is my code:\r\n\r\n    public static void main(String[] args) throws java.lang.Exception {\t\r\n\tBufferedReader userlines = new BufferedReader(new FileReader(&quot;/..../usertrackplayer.csv&quot;));       \r\n\tFileWriter output = new FileWriter(new File(&quot;/.../output.csv&quot;));\r\n\r\n\tString uLine = null;\t\r\n\tArrayList&lt;String&gt; list = new ArrayList&lt;String&gt;();\r\n\tList&lt;String&gt; arrayList = new ArrayList&lt;String&gt;();\r\n    String currentUserId = null;    \t\r\n\r\n\twhile ((uLine = userlines.readLine()) != null) {\r\n\t\t\r\n\t\tString[] userData = uLine.split(&quot;,&quot;);\r\n\t\tString userId = userData[0];\t\t\t\r\n\t\tif (userId.equals(currentUserId)) {\r\n          // Do what ever we need while buffering same userId\t\t\t\t\r\n\t\t}\r\n\t\telse{\r\n\t\t\tlist.add(uLine);\r\n\t\t\tint division = (int) Math.ceil(list.size()/2);\r\n\r\n\t\t\tList&lt;String&gt; sublist = list.subList(0, division); //TO DEVIDE THE DATA OF EACH USERID INTO TWO ALMOST EQUAL PARTS, IT PUT THE FIRST HALF IN SUBLIST\r\n\r\n         //HERE I NEED TO WRITE THE OUTPUT OF SUBLIST INTO A CSV FILE, BUT HOW????\r\n                output.write(sublits); //--&gt; THIS DOES NOT WORK SINCE SUBLIST IS NOT A STRING\r\n\t            currentUserId = userId;\r\n\t            list.clear();\r\n\t    }\t\t\r\n\t\t list.add(uLine);\r\n    }\r\n    \tuserlines.close();\r\n    \toutput.close();\r\n    }\r\n\r\nCould someone please help me know how could I write the data in a list string into an empty csv file?? \r\nMy second question is: how could I split them wherever there is space and consider it as a line.. \r\n\r\nThanks,\r\n ","title":"java write the list string into csv file","body":"<p>I have some array strings like the following (note that there is space after each player which shows different lines...),</p>\n\n<pre><code>[\"user1\",\"track1\",\"player1\", \"user1\",\"track2\",\"player2\", \"user1\",\"track3\",\"player3\", ...] \n</code></pre>\n\n<p>I would like to divide this array into two parts (almost equal) based on the number of lines (spaces here). So, for example if there is 40 spaces in this array, I need to store the lines starting from the first to the half(20th line) in a file (let's call it file A) and put the rest in file B. \nI could divide the arraylist, but I could not write it in the correct way in the CSV file.</p>\n\n<p>Here is my code:</p>\n\n<pre><code>public static void main(String[] args) throws java.lang.Exception { \nBufferedReader userlines = new BufferedReader(new FileReader(\"/..../usertrackplayer.csv\"));       \nFileWriter output = new FileWriter(new File(\"/.../output.csv\"));\n\nString uLine = null;    \nArrayList&lt;String&gt; list = new ArrayList&lt;String&gt;();\nList&lt;String&gt; arrayList = new ArrayList&lt;String&gt;();\nString currentUserId = null;        \n\nwhile ((uLine = userlines.readLine()) != null) {\n\n    String[] userData = uLine.split(\",\");\n    String userId = userData[0];            \n    if (userId.equals(currentUserId)) {\n      // Do what ever we need while buffering same userId               \n    }\n    else{\n        list.add(uLine);\n        int division = (int) Math.ceil(list.size()/2);\n\n        List&lt;String&gt; sublist = list.subList(0, division); //TO DEVIDE THE DATA OF EACH USERID INTO TWO ALMOST EQUAL PARTS, IT PUT THE FIRST HALF IN SUBLIST\n\n     //HERE I NEED TO WRITE THE OUTPUT OF SUBLIST INTO A CSV FILE, BUT HOW????\n            output.write(sublits); //--&gt; THIS DOES NOT WORK SINCE SUBLIST IS NOT A STRING\n            currentUserId = userId;\n            list.clear();\n    }       \n     list.add(uLine);\n}\n    userlines.close();\n    output.close();\n}\n</code></pre>\n\n<p>Could someone please help me know how could I write the data in a list string into an empty csv file?? \nMy second question is: how could I split them wherever there is space and consider it as a line.. </p>\n\n<p>Thanks,</p>\n"},{"tags":["java","java-stream"],"comments":[{"owner":{"account_id":36137,"reputation":178789,"user_id":102937,"accept_rate":90,"display_name":"Robert Harvey"},"score":0,"creation_date":1664895150,"post_id":73949769,"comment_id":130571788,"body_markdown":"I don&#39;t understand what you mean by `within one of the streams terminating forEach`","body":"I don&#39;t understand what you mean by <code>within one of the streams terminating forEach</code>"},{"owner":{"account_id":26526499,"reputation":3,"user_id":20159415,"display_name":"TeemoSays234"},"score":0,"creation_date":1664895241,"post_id":73949769,"comment_id":130571813,"body_markdown":"Is the `forEach` when using the Stream API considered a terminating operation?  Referencing a tutorial I saw.  `resultStorage.entrySet().stream()\n                        .forEach((....`","body":"Is the <code>forEach</code> when using the Stream API considered a terminating operation?  Referencing a tutorial I saw.  <code>resultStorage.entrySet().stream()                         .forEach((....</code>"},{"owner":{"account_id":26526499,"reputation":3,"user_id":20159415,"display_name":"TeemoSays234"},"score":0,"creation_date":1664895457,"post_id":73949769,"comment_id":130571912,"body_markdown":"For others reference:https://www.youtube.com/watch?v=t1-YZ6bF-g0&amp;t=190s","body":"For others reference:<a href=\"https://www.youtube.com/watch?v=t1-YZ6bF-g0&amp;t=190s\" rel=\"nofollow noreferrer\">youtube.com/watch?v=t1-YZ6bF-g0&amp;t=190s</a>"},{"owner":{"account_id":13170666,"reputation":78669,"user_id":9513184,"display_name":"Unmitigated"},"score":0,"creation_date":1664895461,"post_id":73949769,"comment_id":130571920,"body_markdown":"@RobertHarvey The tutorial probably meant terminal operation.","body":"@RobertHarvey The tutorial probably meant terminal operation."},{"owner":{"account_id":5168089,"reputation":26671,"user_id":4137489,"accept_rate":100,"display_name":"marstran"},"score":0,"creation_date":1664895467,"post_id":73949769,"comment_id":130571923,"body_markdown":"@RobertHarvey He means &quot;terminal operation&quot;, which is a standard term in the Streams-API. It&#39;s even in the docs for forEach: https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#forEach-java.util.function.Consumer-","body":"@RobertHarvey He means &quot;terminal operation&quot;, which is a standard term in the Streams-API. It&#39;s even in the docs for forEach: <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#forEach-java.util.function.Consumer-\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/8/docs/api/java/util/stream/&hellip;</a>"},{"owner":{"account_id":5168089,"reputation":26671,"user_id":4137489,"accept_rate":100,"display_name":"marstran"},"score":2,"creation_date":1664895563,"post_id":73949769,"comment_id":130571962,"body_markdown":"@TeemoSays234 Please describe the logic you are trying to implement. It hard to grasp just from your examples. Preferably give some example input with corresponding output.","body":"@TeemoSays234 Please describe the logic you are trying to implement. It hard to grasp just from your examples. Preferably give some example input with corresponding output."},{"owner":{"account_id":1992310,"reputation":11172,"user_id":1786065,"accept_rate":91,"display_name":"Rogue"},"score":1,"creation_date":1664896384,"post_id":73949769,"comment_id":130572277,"body_markdown":"You cannot use a terminal operation twice, as them being terminal by definition means they consume the stream. There are, however, intermediate operations that can be performed in a similar manner (see: `Stream#peek`)","body":"You cannot use a terminal operation twice, as them being terminal by definition means they consume the stream. There are, however, intermediate operations that can be performed in a similar manner (see: <code>Stream#peek</code>)"},{"owner":{"account_id":26526499,"reputation":3,"user_id":20159415,"display_name":"TeemoSays234"},"score":0,"creation_date":1664897325,"post_id":73949769,"comment_id":130572631,"body_markdown":"@Holder updated for additional clarity","body":"@Holder updated for additional clarity"},{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":0,"creation_date":1664898063,"post_id":73949769,"comment_id":130572882,"body_markdown":"For learning streams, I suggest the following (in no particular order): [Processing Data with Java SE 8 Streams](https://www.oracle.com/technical-resources/articles/java/architect-streams-pt2.html) (Article in Oracle Magazine by Urma), [javadoc](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/package-summary.html), Oracle&#39;s [Java tutorials](https://docs.oracle.com/javase/tutorial/collections/streams/index.html). Also, in my opinion, the book [Core Java](https://horstmann.com/corejava/), by Horstmann contains an excellent explanation of streams.","body":"For learning streams, I suggest the following (in no particular order): <a href=\"https://www.oracle.com/technical-resources/articles/java/architect-streams-pt2.html\" rel=\"nofollow noreferrer\">Processing Data with Java SE 8 Streams</a> (Article in Oracle Magazine by Urma), <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/package-summary.html\" rel=\"nofollow noreferrer\">javadoc</a>, Oracle&#39;s <a href=\"https://docs.oracle.com/javase/tutorial/collections/streams/index.html\" rel=\"nofollow noreferrer\">Java tutorials</a>. Also, in my opinion, the book <a href=\"https://horstmann.com/corejava/\" rel=\"nofollow noreferrer\">Core Java</a>, by Horstmann contains an excellent explanation of streams."},{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":0,"creation_date":1664898261,"post_id":73949769,"comment_id":130572953,"body_markdown":"There are **many** questions (with answers) regarding Java streams on this Web site. Just enter `[java] stream` into the search box at the top of this Web page. Also, consider posting a [mcve]. I think that will help people to answer your question.","body":"There are <b>many</b> questions (with answers) regarding Java streams on this Web site. Just enter <code>[java] stream</code> into the search box at the top of this Web page. Also, consider posting a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. I think that will help people to answer your question."}],"answers":[{"tags":[],"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1664898255,"creation_date":1664898255,"answer_id":73950398,"question_id":73949769,"body_markdown":"The terminal operation of `entrySet().stream().forEach()` is entirely unrelated to the `getUsers().forEach()` call within the `Consumer`. So theres no problem of multiple terminal operations here.\r\n\r\nHowever, replacing the `Map` operation `forEach((key, value) -&gt; ` with an `entrySet() .stream() .forEach(entry -&gt; )` rarely adds a benefit. So far, youre not only made the code longer, you introduced the necessity to deal with a `Map.Entry` instead of just using `key` and `value`.\r\n\r\nBut you can simplify your operation by using a single `computeIfAbsent` instead of `containsKey`, `put`, and `get`:\r\n\r\n```java\r\nresultStorage.forEach((key, value) -&gt; key.getUsers().forEach(user -&gt;\r\n    temp.computeIfAbsent(user.getMeta(), meta -&gt;\r\n        key.withCheck1(masterAccountId).withCheck2(getClientTimezone()).withCheck3(meta))\r\n    .getStreams().add(value)));\r\n```\r\n","title":"Java Streams - Are you able to have multiple terminal operations (e.g. forEach)","body":"<p>The terminal operation of <code>entrySet().stream().forEach()</code> is entirely unrelated to the <code>getUsers().forEach()</code> call within the <code>Consumer</code>. So theres no problem of multiple terminal operations here.</p>\n<p>However, replacing the <code>Map</code> operation <code>forEach((key, value) -&gt; </code> with an <code>entrySet() .stream() .forEach(entry -&gt; )</code> rarely adds a benefit. So far, youre not only made the code longer, you introduced the necessity to deal with a <code>Map.Entry</code> instead of just using <code>key</code> and <code>value</code>.</p>\n<p>But you can simplify your operation by using a single <code>computeIfAbsent</code> instead of <code>containsKey</code>, <code>put</code>, and <code>get</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>resultStorage.forEach((key, value) -&gt; key.getUsers().forEach(user -&gt;\n    temp.computeIfAbsent(user.getMeta(), meta -&gt;\n        key.withCheck1(masterAccountId).withCheck2(getClientTimezone()).withCheck3(meta))\n    .getStreams().add(value)));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664901421,"creation_date":1664901421,"answer_id":73951008,"question_id":73949769,"body_markdown":"Notes after the code.\r\n```java\r\nMap&lt;String, SomeConfig&gt; temp = resultStorage.keySet()\r\n                                            .stream()\r\n                                            .flatMap(key -&gt; key.getUsers()\r\n                                                               .stream()\r\n                                                               .map(user -&gt; new AbstractMap.SimpleEntry(user, key)))\r\n                                            .collect(Collectors.toMap(e -&gt; e.getKey().getMeta(),\r\n                                                                      e -&gt; e.getValue()\r\n                                                                            .withCheck1(masterAccountId)\r\n                                                                            .withCheck2(getClientTimezone())\r\n                                                                            .withCheck3(e.getKey().getMeta())\r\n```\r\n----------------\r\n```java\r\nresultStorage.keySet()\r\n```\r\nThis returns `Set&lt;SomeConfig&gt;`.\r\n```java\r\nstream()\r\n```\r\nThis returns a stream where every element in the stream is an instance of `SomeConfig`.\r\n```java\r\n.flatMap(key -&gt; key.getUsers()\r\n                   .stream()\r\n                   .map(user -&gt; new AbstractMap.SimpleEntry(user, key)))\r\n```\r\nMethod `flatMap()` must return a `Stream`. The above code returns a `Stream` where every element is an instance of [AbstractMap.SimpleEntry][1]. The &quot;entry&quot; key is the *user* and the entry value is the *key* from `resultStorage`.\r\n\r\nFinally I create a `Map&lt;String, SomeConfig&gt;` via [static] method `toMap` of class [Collectors][2].\r\n\r\nThe first argument to method `toMap` is the *key mapper*, i.e. a method that extracts the [map] key from the `AbstractMap.SimpleEntry`. In your case this is the value returned by method `getMeta()` of the *user* &amp;ndash; which is the key from `AbstractMap.SimpleEntry`, i.e. `e.getKey()` returns a *user* object.\r\n\r\nThe second argument to `toMap` is the *value mapper*. `e.getValue()` returns a `SomeConfig` object and the rest is your code, i.e. the `withCheck`s.\r\n\r\nThere is no way I can test the above code because not only did you not post a [minimal, reproducible example][3], you also did not post any sample data. Hence the above may be *way off* what you actually require.\r\n\r\nAlso note that the above code simply creates your `Map&lt;String, SomeConfig&gt; temp`. I could not understand the code in your question that processes that `Map` so I did not try to implement that part at all.\r\n\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/AbstractMap.SimpleEntry.html\r\n  [2]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/Collectors.html\r\n  [3]: https://stackoverflow.com/help/minimal-reproducible-example","title":"Java Streams - Are you able to have multiple terminal operations (e.g. forEach)","body":"<p>Notes after the code.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Map&lt;String, SomeConfig&gt; temp = resultStorage.keySet()\n                                            .stream()\n                                            .flatMap(key -&gt; key.getUsers()\n                                                               .stream()\n                                                               .map(user -&gt; new AbstractMap.SimpleEntry(user, key)))\n                                            .collect(Collectors.toMap(e -&gt; e.getKey().getMeta(),\n                                                                      e -&gt; e.getValue()\n                                                                            .withCheck1(masterAccountId)\n                                                                            .withCheck2(getClientTimezone())\n                                                                            .withCheck3(e.getKey().getMeta())\n</code></pre>\n<hr />\n<pre class=\"lang-java prettyprint-override\"><code>resultStorage.keySet()\n</code></pre>\n<p>This returns <code>Set&lt;SomeConfig&gt;</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>stream()\n</code></pre>\n<p>This returns a stream where every element in the stream is an instance of <code>SomeConfig</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>.flatMap(key -&gt; key.getUsers()\n                   .stream()\n                   .map(user -&gt; new AbstractMap.SimpleEntry(user, key)))\n</code></pre>\n<p>Method <code>flatMap()</code> must return a <code>Stream</code>. The above code returns a <code>Stream</code> where every element is an instance of <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/AbstractMap.SimpleEntry.html\" rel=\"nofollow noreferrer\">AbstractMap.SimpleEntry</a>. The &quot;entry&quot; key is the <em>user</em> and the entry value is the <em>key</em> from <code>resultStorage</code>.</p>\n<p>Finally I create a <code>Map&lt;String, SomeConfig&gt;</code> via [static] method <code>toMap</code> of class <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/Collectors.html\" rel=\"nofollow noreferrer\">Collectors</a>.</p>\n<p>The first argument to method <code>toMap</code> is the <em>key mapper</em>, i.e. a method that extracts the [map] key from the <code>AbstractMap.SimpleEntry</code>. In your case this is the value returned by method <code>getMeta()</code> of the <em>user</em>  which is the key from <code>AbstractMap.SimpleEntry</code>, i.e. <code>e.getKey()</code> returns a <em>user</em> object.</p>\n<p>The second argument to <code>toMap</code> is the <em>value mapper</em>. <code>e.getValue()</code> returns a <code>SomeConfig</code> object and the rest is your code, i.e. the <code>withCheck</code>s.</p>\n<p>There is no way I can test the above code because not only did you not post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal, reproducible example</a>, you also did not post any sample data. Hence the above may be <em>way off</em> what you actually require.</p>\n<p>Also note that the above code simply creates your <code>Map&lt;String, SomeConfig&gt; temp</code>. I could not understand the code in your question that processes that <code>Map</code> so I did not try to implement that part at all.</p>\n"}],"owner":{"account_id":26526499,"reputation":3,"user_id":20159415,"display_name":"TeemoSays234"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":223,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73950398,"answer_count":2,"score":0,"last_activity_date":1664901421,"creation_date":1664895032,"question_id":73949769,"body_markdown":"I&#39;m fairly new to Java and trying to learn how to use streams for easier code writing.  If I can code like this:\r\n\r\n```java\r\nMap&lt;String, SomeConfig&gt; temp = new HashMap&lt;&gt;();\r\n\r\nresultStorage.forEach((key, value) -&gt; key.getUsers().forEach(user -&gt; {\r\n    if (!temp.containsKey(user.getMeta())) {\r\n\r\n        SomeConfig emailConfiguration = key\r\n            .withCheck1(masterAccountId)\r\n            .withCheck2(getClientTimezone())\r\n            .withCheck3(user.getMeta());\r\n\r\n        temp.put(user.getMeta(), emailConfiguration);\r\n    }\r\n\r\n    temp.get(user. getMeta()).getStreams().add(value);\r\n\r\n}));\r\n\r\nreturn new ArrayList&lt;&gt;(temp.values());\r\n```\r\n\r\n`resultStorage` declaration:\r\n```java\r\nprivate Map&lt; SomeConfig, byte[]&gt; resultStorage = new ConcurrentHashMap&lt;&gt;();\r\n```\r\n`getStreams` is a getter on `SomeConfig` that returns a `List&lt;byte[]&gt;` as here:\r\n```java\r\n\tprivate List&lt;byte[]&gt; attachmentStreams = new ArrayList&lt;&gt;();\r\n\tpublic List&lt;byte[]&gt; getAttachmentStreams() {\r\n\t\treturn attachmentStreams;\r\n\t}\r\n```\r\n\r\nMy first attempt was something similar to this:\r\n\r\n```java\r\nresultStorage.entrySet().stream()\r\n    .forEach(entry -&gt; entry.getKey().getUsers().forEach(user -&gt; {\r\n\t\t\t\t\t\t\t\r\n    }));\r\n```\r\n\r\nAre we able to use a forEach within one of the streams terminating operation, forEach?  How would a stream benefit in this case as I saw documentation that it can significantly improve readability and performance of older pre-Java8 code?\r\n\r\n**Edit:**\r\n`resultStorage` holds a ConcurrentHashMap.  It will contain `Map&lt;SomeConfig, byte[]&gt;` for email and attachments. Using another HashMap `temp` that is initially empty - we analyze `resultStorage` , see if `temp` contains a specific email key, and then `put` or `add` based on the existence of a user&#39;s email","title":"Java Streams - Are you able to have multiple terminal operations (e.g. forEach)","body":"<p>I'm fairly new to Java and trying to learn how to use streams for easier code writing.  If I can code like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Map&lt;String, SomeConfig&gt; temp = new HashMap&lt;&gt;();\n\nresultStorage.forEach((key, value) -&gt; key.getUsers().forEach(user -&gt; {\n    if (!temp.containsKey(user.getMeta())) {\n\n        SomeConfig emailConfiguration = key\n            .withCheck1(masterAccountId)\n            .withCheck2(getClientTimezone())\n            .withCheck3(user.getMeta());\n\n        temp.put(user.getMeta(), emailConfiguration);\n    }\n\n    temp.get(user. getMeta()).getStreams().add(value);\n\n}));\n\nreturn new ArrayList&lt;&gt;(temp.values());\n</code></pre>\n<p><code>resultStorage</code> declaration:</p>\n<pre class=\"lang-java prettyprint-override\"><code>private Map&lt; SomeConfig, byte[]&gt; resultStorage = new ConcurrentHashMap&lt;&gt;();\n</code></pre>\n<p><code>getStreams</code> is a getter on <code>SomeConfig</code> that returns a <code>List&lt;byte[]&gt;</code> as here:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    private List&lt;byte[]&gt; attachmentStreams = new ArrayList&lt;&gt;();\n    public List&lt;byte[]&gt; getAttachmentStreams() {\n        return attachmentStreams;\n    }\n</code></pre>\n<p>My first attempt was something similar to this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>resultStorage.entrySet().stream()\n    .forEach(entry -&gt; entry.getKey().getUsers().forEach(user -&gt; {\n                            \n    }));\n</code></pre>\n<p>Are we able to use a forEach within one of the streams terminating operation, forEach?  How would a stream benefit in this case as I saw documentation that it can significantly improve readability and performance of older pre-Java8 code?</p>\n<p><strong>Edit:</strong>\n<code>resultStorage</code> holds a ConcurrentHashMap.  It will contain <code>Map&lt;SomeConfig, byte[]&gt;</code> for email and attachments. Using another HashMap <code>temp</code> that is initially empty - we analyze <code>resultStorage</code> , see if <code>temp</code> contains a specific email key, and then <code>put</code> or <code>add</code> based on the existence of a user's email</p>\n"},{"tags":["java","gradle","cyclic-dependency"],"comments":[{"owner":{"account_id":7072373,"reputation":3737,"user_id":5413565,"display_name":"Mushif Ali Nawaz"},"score":0,"creation_date":1569908027,"post_id":58178381,"comment_id":102737366,"body_markdown":"You might want to look at [this answer](https://stackoverflow.com/questions/51891074/avoid-circular-dependencies-in-gradle-build/51891870#51891870).","body":"You might want to look at <a href=\"https://stackoverflow.com/questions/51891074/avoid-circular-dependencies-in-gradle-build/51891870#51891870\">this answer</a>."},{"owner":{"account_id":10693974,"reputation":627,"user_id":7871852,"display_name":"Shehan Dhaleesha"},"score":0,"creation_date":1569909014,"post_id":58178381,"comment_id":102737655,"body_markdown":"When I configure the gradle using that, I can&#39;t go to the project files. And the content of the source directory is shown as empty. But it is not empty.","body":"When I configure the gradle using that, I can&#39;t go to the project files. And the content of the source directory is shown as empty. But it is not empty."}],"answers":[{"tags":[],"owner":{"account_id":5684621,"reputation":4943,"user_id":4494577,"display_name":"jannis"},"down_vote_count":0,"up_vote_count":11,"is_accepted":true,"score":11,"last_activity_date":1664901377,"creation_date":1569939188,"answer_id":58186686,"question_id":58178381,"body_markdown":"# Foreword\r\n\r\nThere is no magic that will let you compile your project when there&#39;s a cycle in your dependency graph. You&#39;ll need to do some refactoring to eliminate the cycle.\r\n\r\nThe way you deal with circular dependencies is that you split the modules and repeat that until the cycle is gone (or use the alternative given below).\r\n\r\n# Algorithm\r\n\r\n0) Starting point:\r\n\r\n    ```\r\n    A --&gt; B --&gt; C\r\n\t^           |\r\n    |           |\r\n    +-----------+\r\n    ```\r\n    \r\n1) Start with extracting the parts of `A` that are used by `C` to a separate module (let&#39;s call it `D`):\r\n\r\n    ```\r\n    A --&gt; B --&gt; C\r\n    |           |\r\n    |           |\r\n    +---&gt; D &lt;---+\r\n    ```\r\n\r\n    If `D` does not depend on any other module you&#39;re done. Otherwise continue cutting the cords.\r\n\r\n2) Let&#39;s say D stil has a B dependency:\r\n\r\n    ```\r\n    A --&gt; B --&gt; C\r\n    |     ^     |\r\n    |     |     |\r\n    +---&gt; D &lt;---+\r\n    ```\r\n\r\n    You need to analogically extract common parts from `B` (to let&#39;s call it `E`):\r\n\r\n    ```\r\n    A --&gt; B --&gt; C\r\n    |     |     |\r\n    |     v     |\r\n    |     E     |\r\n    |     ^     |\r\n    |     |     |\r\n    +---&gt; D &lt;---+\r\n    ```\r\n\r\n    Just like before - repeat if `E` still has problematic dependencies.\r\n\r\n3) Let&#39;s say E stil depends on C:\r\n\r\n    ```\r\n    A --&gt; B --&gt; C --+\r\n    |     |     ^   |\r\n    |     v     |   |\r\n    |     E ----+   |\r\n    |     ^         |\r\n    |     |         |\r\n    +---&gt; D &lt;-------+\r\n    ```\r\n\r\n    What do we do? Obvioulsy split `C` (by extracting `F`):\r\n\r\n    ```\r\n    A --&gt; B --&gt; C --+\r\n    |     |     |   |\r\n    |     v     v   |\r\n    |     E --&gt; F   |\r\n    |     ^         |\r\n    |     |         |\r\n    +---&gt; D &lt;-------+\r\n    ```\r\n\r\n4) Continue the loop until a point is reached where the newly introduced module has no more dependecies in the module graph.\r\n\r\n    For example in point 3) we&#39;re done if we assume that `F` is dependencyless. This means that the problematic part of `A` used by `C` has been extracted to the `D  E  F` subgraph.\r\n\r\n# Alternative\r\n\r\nNote that it might not be that easy if at all doable within a sane budget. So in some contexts it might be better to fall back to the less preferable alternative: duplicating the code in `A` which `C` relies on.","title":"Resolve circular dependency in gradle","body":"<h1>Foreword</h1>\n<p>There is no magic that will let you compile your project when there's a cycle in your dependency graph. You'll need to do some refactoring to eliminate the cycle.</p>\n<p>The way you deal with circular dependencies is that you split the modules and repeat that until the cycle is gone (or use the alternative given below).</p>\n<h1>Algorithm</h1>\n<ol start=\"0\">\n<li><p>Starting point:</p>\n<pre><code>A --&gt; B --&gt; C\n^           |\n|           |\n+-----------+\n</code></pre>\n</li>\n<li><p>Start with extracting the parts of <code>A</code> that are used by <code>C</code> to a separate module (let's call it <code>D</code>):</p>\n<pre><code>A --&gt; B --&gt; C\n|           |\n|           |\n+---&gt; D &lt;---+\n</code></pre>\n<p>If <code>D</code> does not depend on any other module you're done. Otherwise continue cutting the cords.</p>\n</li>\n<li><p>Let's say D stil has a B dependency:</p>\n<pre><code>A --&gt; B --&gt; C\n|     ^     |\n|     |     |\n+---&gt; D &lt;---+\n</code></pre>\n<p>You need to analogically extract common parts from <code>B</code> (to let's call it <code>E</code>):</p>\n<pre><code>A --&gt; B --&gt; C\n|     |     |\n|     v     |\n|     E     |\n|     ^     |\n|     |     |\n+---&gt; D &lt;---+\n</code></pre>\n<p>Just like before - repeat if <code>E</code> still has problematic dependencies.</p>\n</li>\n<li><p>Let's say E stil depends on C:</p>\n<pre><code>A --&gt; B --&gt; C --+\n|     |     ^   |\n|     v     |   |\n|     E ----+   |\n|     ^         |\n|     |         |\n+---&gt; D &lt;-------+\n</code></pre>\n<p>What do we do? Obvioulsy split <code>C</code> (by extracting <code>F</code>):</p>\n<pre><code>A --&gt; B --&gt; C --+\n|     |     |   |\n|     v     v   |\n|     E --&gt; F   |\n|     ^         |\n|     |         |\n+---&gt; D &lt;-------+\n</code></pre>\n</li>\n<li><p>Continue the loop until a point is reached where the newly introduced module has no more dependecies in the module graph.</p>\n<p>For example in point 3) we're done if we assume that <code>F</code> is dependencyless. This means that the problematic part of <code>A</code> used by <code>C</code> has been extracted to the <code>D  E  F</code> subgraph.</p>\n</li>\n</ol>\n<h1>Alternative</h1>\n<p>Note that it might not be that easy if at all doable within a sane budget. So in some contexts it might be better to fall back to the less preferable alternative: duplicating the code in <code>A</code> which <code>C</code> relies on.</p>\n"}],"owner":{"account_id":10693974,"reputation":627,"user_id":7871852,"display_name":"Shehan Dhaleesha"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4417,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":58186686,"answer_count":1,"score":6,"last_activity_date":1664901377,"creation_date":1569906626,"question_id":58178381,"body_markdown":"I recently started developing a java project which has some sub projects within it. All of them are gradle. So let&#39;s say there are two projects A and B which is already implemented. And I&#39;m going to introduce another graldle project C. And the dependencies are like this.\r\n\r\n - A has dependencies on B\r\n - B has dependencies on C\r\n - C has dependencies on A\r\n\r\nSo I need to implement this project C without cyclic dependencies error as it is given when I tried to build the project with gradle. I saw some answers that Interface is a solution for this. But in my case project A and B are large projects and I can&#39;t event think how to introduce a Interface for them. Only thing I can do is introducing interfaces for project C. So is there a way to solve my problem with these cases? If there isn&#39;t what is the way to have such an one? And please note that these A,B,C projects are individual projects so those can&#39;t combine as one. ","title":"Resolve circular dependency in gradle","body":"<p>I recently started developing a java project which has some sub projects within it. All of them are gradle. So let's say there are two projects A and B which is already implemented. And I'm going to introduce another graldle project C. And the dependencies are like this.</p>\n\n<ul>\n<li>A has dependencies on B</li>\n<li>B has dependencies on C</li>\n<li>C has dependencies on A</li>\n</ul>\n\n<p>So I need to implement this project C without cyclic dependencies error as it is given when I tried to build the project with gradle. I saw some answers that Interface is a solution for this. But in my case project A and B are large projects and I can't event think how to introduce a Interface for them. Only thing I can do is introducing interfaces for project C. So is there a way to solve my problem with these cases? If there isn't what is the way to have such an one? And please note that these A,B,C projects are individual projects so those can't combine as one. </p>\n"},{"tags":["java","hibernate","h2"],"comments":[{"owner":{"account_id":213468,"reputation":103488,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1664866119,"post_id":73943347,"comment_id":130562123,"body_markdown":"Which DBMS are you using? The error suggests H2, is that what you expect? If so, which version of H2 are you using?","body":"Which DBMS are you using? The error suggests H2, is that what you expect? If so, which version of H2 are you using?"},{"owner":{"account_id":7261263,"reputation":300,"user_id":5537902,"accept_rate":83,"display_name":"781850685"},"score":0,"creation_date":1664897207,"post_id":73943347,"comment_id":130572589,"body_markdown":"I&#39;m using com.h2database:h2:2.1.210 @MarkRotteveel","body":"I&#39;m using com.h2database:h2:2.1.210 @MarkRotteveel"},{"owner":{"account_id":7261263,"reputation":300,"user_id":5537902,"accept_rate":83,"display_name":"781850685"},"score":0,"creation_date":1664897438,"post_id":73943347,"comment_id":130572662,"body_markdown":"I think I am able to insert and read records with my model definition, but when I use @DataJpaTest in my integration test I see this error","body":"I think I am able to insert and read records with my model definition, but when I use @DataJpaTest in my integration test I see this error"}],"answers":[{"tags":[],"owner":{"account_id":179640,"reputation":15442,"user_id":412446,"accept_rate":41,"display_name":"Christian Beikov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664901136,"creation_date":1664901136,"answer_id":73950943,"question_id":73943347,"body_markdown":"With `@DataJpaTest` Spring will instruct Hibernate to create the schema and that will use the information that you provided in your annotations, but it seems this is not legal for H2.\r\n\r\nTry using the following instead:\r\n\r\n```\r\n@Column(columnDefinition = &quot;text array&quot;)\r\n```","title":"JdbcSQLSyntaxErrorException when using text array from hibernate types","body":"<p>With <code>@DataJpaTest</code> Spring will instruct Hibernate to create the schema and that will use the information that you provided in your annotations, but it seems this is not legal for H2.</p>\n<p>Try using the following instead:</p>\n<pre><code>@Column(columnDefinition = &quot;text array&quot;)\n</code></pre>\n"}],"owner":{"account_id":7261263,"reputation":300,"user_id":5537902,"accept_rate":83,"display_name":"781850685"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":227,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1664901136,"creation_date":1664860218,"question_id":73943347,"body_markdown":"I&#39;m using this [hibernate-types][1] that allows hibernate to translate SQL layer data types into java classes in my springboot application, here I&#39;m trying to add a text array field called user array.\r\n\r\n    @Entity\r\n    @Table(name = &quot;user_update&quot;)\r\n    @Getter\r\n    @Setter\r\n    @NoArgsConstructor\r\n    @RequiredArgsConstructor\r\n    @TypeDef(name = &quot;list-array&quot;, typeClass = ListArrayType.class)\r\n    public class UserUpdate {\r\n    \r\n      @Id @NonNull private String userKey;\r\n    \r\n      @Column @NonNull private String userName;\r\n    \r\n      @Column @NonNull private Instant updatedAt;\r\n    \r\n      @Type(type = &quot;list-array&quot;)\r\n      @Column(columnDefinition = &quot;text[]&quot;)\r\n      @NonNull\r\n      private List&lt;String&gt; userArray;\r\n    }\r\n\r\nI can insert data into the table, but now I want to add a test and I see the following error message from the table.sql\r\n\r\n    CREATE TABLE IF NOT EXISTS user_update (\r\n        user_key VARCHAR(255) NOT NULL,\r\n        user_name VARCHAR(255) NOT NULL,\r\n        updated_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP NOT NULL,\r\n        user_array TEXT ARRAY NOT NULL,\r\n        PRIMARY KEY(org_key)\r\n    );\r\n\r\nmaybe it is because the test I&#39;m running uses `@DataJpaTest` and for some reason it can not recognize the new text[] field ?\r\n\r\n    Error executing DDL &quot;create table user_update (user_key varchar(255) not null, user_name varchar(255), user_array text[], updated_at timestamp, primary key (user_key))&quot; via JDBC Statement\r\n    \r\n    Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Syntax error in SQL statement &quot;create table user_update (user_key varchar(255) not null, user_name varchar(255), user_array text[*][], updated_at timestamp, primary key (user_key))&quot;; expected &quot;(, ARRAY, INVISIBLE, VISIBLE, NOT, NULL, AS, DEFAULT, GENERATED, ON, NOT, NULL, DEFAULT, NULL_TO_DEFAULT, SEQUENCE, SELECTIVITY, COMMENT, CONSTRAINT, COMMENT, PRIMARY, UNIQUE, NOT, NULL, CHECK, REFERENCES, ,, )&quot;; SQL statement:\r\n    \r\n      \r\n\r\n\r\n[1]: https://github.com/vladmihalcea/hibernate-types\r\n\r\n\r\n","title":"JdbcSQLSyntaxErrorException when using text array from hibernate types","body":"<p>I'm using this <a href=\"https://github.com/vladmihalcea/hibernate-types\" rel=\"nofollow noreferrer\">hibernate-types</a> that allows hibernate to translate SQL layer data types into java classes in my springboot application, here I'm trying to add a text array field called user array.</p>\n<pre><code>@Entity\n@Table(name = &quot;user_update&quot;)\n@Getter\n@Setter\n@NoArgsConstructor\n@RequiredArgsConstructor\n@TypeDef(name = &quot;list-array&quot;, typeClass = ListArrayType.class)\npublic class UserUpdate {\n\n  @Id @NonNull private String userKey;\n\n  @Column @NonNull private String userName;\n\n  @Column @NonNull private Instant updatedAt;\n\n  @Type(type = &quot;list-array&quot;)\n  @Column(columnDefinition = &quot;text[]&quot;)\n  @NonNull\n  private List&lt;String&gt; userArray;\n}\n</code></pre>\n<p>I can insert data into the table, but now I want to add a test and I see the following error message from the table.sql</p>\n<pre><code>CREATE TABLE IF NOT EXISTS user_update (\n    user_key VARCHAR(255) NOT NULL,\n    user_name VARCHAR(255) NOT NULL,\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    user_array TEXT ARRAY NOT NULL,\n    PRIMARY KEY(org_key)\n);\n</code></pre>\n<p>maybe it is because the test I'm running uses <code>@DataJpaTest</code> and for some reason it can not recognize the new text[] field ?</p>\n<pre><code>Error executing DDL &quot;create table user_update (user_key varchar(255) not null, user_name varchar(255), user_array text[], updated_at timestamp, primary key (user_key))&quot; via JDBC Statement\n\nCaused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Syntax error in SQL statement &quot;create table user_update (user_key varchar(255) not null, user_name varchar(255), user_array text[*][], updated_at timestamp, primary key (user_key))&quot;; expected &quot;(, ARRAY, INVISIBLE, VISIBLE, NOT, NULL, AS, DEFAULT, GENERATED, ON, NOT, NULL, DEFAULT, NULL_TO_DEFAULT, SEQUENCE, SELECTIVITY, COMMENT, CONSTRAINT, COMMENT, PRIMARY, UNIQUE, NOT, NULL, CHECK, REFERENCES, ,, )&quot;; SQL statement:\n\n  \n</code></pre>\n"},{"tags":["java","arrays","algorithm"],"comments":[{"owner":{"account_id":1352170,"reputation":34246,"user_id":1291492,"accept_rate":100,"display_name":"ControlAltDel"},"score":1,"creation_date":1664901149,"post_id":73950904,"comment_id":130573938,"body_markdown":"Maybe I&#39;m not understanding, but what about A-F-C?","body":"Maybe I&#39;m not understanding, but what about A-F-C?"},{"owner":{"account_id":2345668,"reputation":13002,"user_id":2055998,"accept_rate":68,"display_name":"PM 77-1"},"score":0,"creation_date":1664901585,"post_id":73950904,"comment_id":130574080,"body_markdown":"Have a look: https://stackoverflow.com/questions/9535819/find-all-paths-between-two-graph-nodes","body":"Have a look: <a href=\"https://stackoverflow.com/questions/9535819/find-all-paths-between-two-graph-nodes\" title=\"find all paths between two graph nodes\">stackoverflow.com/questions/9535819/&hellip;</a>"}],"owner":{"account_id":12540755,"reputation":11,"user_id":13116990,"display_name":"obbiondo"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1664901866,"answer_count":0,"score":1,"last_activity_date":1664900912,"creation_date":1664900912,"question_id":73950904,"body_markdown":"Given a list of couple of character \r\n\r\n    [&quot;A-B&quot;, &quot;C-D&quot;, &quot;E-F&quot;, &quot;B-C&quot;, &quot;A-E&quot;, &quot;A-F&quot;, &quot;F-C&quot;]\r\n\r\nHow do I find all the direct links between two character?\r\nFor instance, let&#39;s say that the input of the algorithm is the list above and i want to find the connection between &quot;A-C&quot;, the desired output is:\r\n\r\n    [&quot;A-B-C&quot;, &quot;A-E-F-C&quot;]\r\n","title":"Get all possible links between two strings","body":"<p>Given a list of couple of character</p>\n<pre><code>[&quot;A-B&quot;, &quot;C-D&quot;, &quot;E-F&quot;, &quot;B-C&quot;, &quot;A-E&quot;, &quot;A-F&quot;, &quot;F-C&quot;]\n</code></pre>\n<p>How do I find all the direct links between two character?\nFor instance, let's say that the input of the algorithm is the list above and i want to find the connection between &quot;A-C&quot;, the desired output is:</p>\n<pre><code>[&quot;A-B-C&quot;, &quot;A-E-F-C&quot;]\n</code></pre>\n"},{"tags":["java","spring-boot","spring-mvc","integration-testing","spring-boot-test"],"comments":[{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":1,"creation_date":1664902111,"post_id":73950887,"comment_id":130574238,"body_markdown":"&quot;integration&quot; always comes with a &quot;scope&quot;...so, when you want to test the integration `Web -&gt; Controller -&gt; Interface`, then mocking at that place is &quot;ok&quot;/&quot;must&quot;. (and you can still call it integration test) but when you want to &quot;integration test&quot; all of `Web -&gt; ... -&gt; DB`, then you should not use mocks, but real instances.","body":"&quot;integration&quot; always comes with a &quot;scope&quot;...so, when you want to test the integration <code>Web -&gt; Controller -&gt; Interface</code>, then mocking at that place is &quot;ok&quot;/&quot;must&quot;. (and you can still call it integration test) but when you want to &quot;integration test&quot; all of <code>Web -&gt; ... -&gt; DB</code>, then you should not use mocks, but real instances."},{"owner":{"account_id":23727935,"reputation":117,"user_id":17747601,"display_name":"m_novak"},"score":0,"creation_date":1664903283,"post_id":73950887,"comment_id":130574646,"body_markdown":"So if I dont want to test evrything `Web -&gt; ... -&gt; DB`, but only the controller and its endpoints, I can just verify (`verify(interface).method()`) if the endpoint calls the right method from interface?","body":"So if I dont want to test evrything <code>Web -&gt; ... -&gt; DB</code>, but only the controller and its endpoints, I can just verify (<code>verify(interface).method()</code>) if the endpoint calls the right method from interface?"},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1664904123,"post_id":73950887,"comment_id":130574944,"body_markdown":"Exactly (just a matter of perspective/scope) but since it is easy&amp;&quot;cheap&quot;(er than mocking!?), Why not `...-&gt; DB`?;)","body":"Exactly (just a matter of perspective/scope) but since it is easy&amp;&quot;cheap&quot;(er than mocking!?), Why not <code>...-&gt; DB</code>?;)"},{"owner":{"account_id":1408815,"reputation":2002,"user_id":1811348,"accept_rate":88,"display_name":"swapyonubuntu"},"score":1,"creation_date":1664906753,"post_id":73950887,"comment_id":130575696,"body_markdown":"I had use cases where I had to connect with external third party systems over vpn to execute full api endpoint. In this case, I do not wish to fail my build due to reasons like socket timeout, also these integrations can go down anytime. So there I used mocks\nelse I agree with @xerx593, scope of test matters.","body":"I had use cases where I had to connect with external third party systems over vpn to execute full api endpoint. In this case, I do not wish to fail my build due to reasons like socket timeout, also these integrations can go down anytime. So there I used mocks else I agree with @xerx593, scope of test matters."},{"owner":{"account_id":23727935,"reputation":117,"user_id":17747601,"display_name":"m_novak"},"score":0,"creation_date":1664909363,"post_id":73950887,"comment_id":130576334,"body_markdown":"Since my app is not using any 3rd party systems or anything and its just a few endpoints, I will just stick with the idea of verifying if the endpoint calls the right method in the interface. Thank you very much for the answer :)","body":"Since my app is not using any 3rd party systems or anything and its just a few endpoints, I will just stick with the idea of verifying if the endpoint calls the right method in the interface. Thank you very much for the answer :)"}],"owner":{"account_id":23727935,"reputation":117,"user_id":17747601,"display_name":"m_novak"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":550,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1664900832,"creation_date":1664900832,"question_id":73950887,"body_markdown":"I&#39;m currently learning unit tests and integration tests. In my unit tests I have been using Mockito for mocking, such as when(something).thenReturn(something) etc. I used this approach to test the business logic of the application.\r\n\r\nNow I am trying to create integration tests to test all the endpoints of my application. The layers of my application are as follows: Controller -&gt; Interface -&gt; Service -&gt; Repository.\r\n\r\nWhen I tried to create an integration test for the POST method that creates a user, the request should have returned the created user, but returned an empty string. The test looked like this:\r\n\r\n    @Test\r\n      void create() throws Exception {\r\n        UserCreationDTO user = new UserCreationDTO(1L, &quot;Steve&quot;, &quot;steve@mail.com&quot;, &quot;password&quot;);\r\n    \r\n        ObjectMapper objectMapper = new ObjectMapper();\r\n        String text = objectMapper.writeValueAsString(user);\r\n    \r\n        this.mockMvc\r\n            .perform(\r\n                MockMvcRequestBuilders.post(&quot;/users&quot;).contentType(&quot;application/json&quot;).content(text))\r\n            .andExpect(MockMvcResultMatchers.status().isOk())\r\n            .andExpect(MockMvcResultMatchers.jsonPath(&quot;$.id&quot;).value(1))\r\n            .andExpect(MockMvcResultMatchers.jsonPath(&quot;$.name&quot;).value(&quot;Steve&quot;))\r\n            .andExpect(MockMvcResultMatchers.jsonPath(&quot;$.email&quot;).value(&quot;steve@mail.com&quot;))\r\n            .andExpect(MockMvcResultMatchers.jsonPath(&quot;$.password&quot;).value(&quot;password&quot;));\r\n    }\r\n\r\nI later found out that I need to add a line of code to mock the userInterface and what it should return.\r\n\r\n    Mockito.when(userInterface.create(Mockito.any())).thenReturn(user);\r\n\r\nAfter adding it, the method started returning the created user and the test passed. After reading a couple of articles, I came across an approach that says an **integration test should not contain mocking.**\r\n\r\n**So my question is:** Is this approach I have taken correct and can it be considered a correct integration test or do I need to get rid of the mocking of userInterface? In case I have to remove the mocking, how can I ensure that the test passes and returns not just an empty string, but an actually created user?","title":"Is it good approach to use Mocking for integration tests?","body":"<p>I'm currently learning unit tests and integration tests. In my unit tests I have been using Mockito for mocking, such as when(something).thenReturn(something) etc. I used this approach to test the business logic of the application.</p>\n<p>Now I am trying to create integration tests to test all the endpoints of my application. The layers of my application are as follows: Controller -&gt; Interface -&gt; Service -&gt; Repository.</p>\n<p>When I tried to create an integration test for the POST method that creates a user, the request should have returned the created user, but returned an empty string. The test looked like this:</p>\n<pre><code>@Test\n  void create() throws Exception {\n    UserCreationDTO user = new UserCreationDTO(1L, &quot;Steve&quot;, &quot;steve@mail.com&quot;, &quot;password&quot;);\n\n    ObjectMapper objectMapper = new ObjectMapper();\n    String text = objectMapper.writeValueAsString(user);\n\n    this.mockMvc\n        .perform(\n            MockMvcRequestBuilders.post(&quot;/users&quot;).contentType(&quot;application/json&quot;).content(text))\n        .andExpect(MockMvcResultMatchers.status().isOk())\n        .andExpect(MockMvcResultMatchers.jsonPath(&quot;$.id&quot;).value(1))\n        .andExpect(MockMvcResultMatchers.jsonPath(&quot;$.name&quot;).value(&quot;Steve&quot;))\n        .andExpect(MockMvcResultMatchers.jsonPath(&quot;$.email&quot;).value(&quot;steve@mail.com&quot;))\n        .andExpect(MockMvcResultMatchers.jsonPath(&quot;$.password&quot;).value(&quot;password&quot;));\n}\n</code></pre>\n<p>I later found out that I need to add a line of code to mock the userInterface and what it should return.</p>\n<pre><code>Mockito.when(userInterface.create(Mockito.any())).thenReturn(user);\n</code></pre>\n<p>After adding it, the method started returning the created user and the test passed. After reading a couple of articles, I came across an approach that says an <strong>integration test should not contain mocking.</strong></p>\n<p><strong>So my question is:</strong> Is this approach I have taken correct and can it be considered a correct integration test or do I need to get rid of the mocking of userInterface? In case I have to remove the mocking, how can I ensure that the test passes and returns not just an empty string, but an actually created user?</p>\n"},{"tags":["java","spring","spring-boot","spring-cloud","netflix-eureka"],"comments":[{"owner":{"account_id":308422,"reputation":1873,"user_id":620288,"accept_rate":100,"display_name":"Jeff"},"score":2,"creation_date":1479711324,"post_id":40705943,"comment_id":68656254,"body_markdown":"`eureka.client.enabled: false` causes the issue it seems, you can remove it for a workaround.","body":"<code>eureka.client.enabled: false</code> causes the issue it seems, you can remove it for a workaround."},{"owner":{"account_id":308422,"reputation":1873,"user_id":620288,"accept_rate":100,"display_name":"Jeff"},"score":2,"creation_date":1479712138,"post_id":40705943,"comment_id":68656633,"body_markdown":"Raised as an issue: https://github.com/spring-cloud/spring-cloud-netflix/issues/1484","body":"Raised as an issue: <a href=\"https://github.com/spring-cloud/spring-cloud-netflix/issues/1484\" rel=\"nofollow noreferrer\">github.com/spring-cloud/spring-cloud-netflix/issues/1484</a>"},{"owner":{"account_id":2136382,"reputation":317,"user_id":1896054,"accept_rate":75,"display_name":"paoloaq"},"score":0,"creation_date":1479719780,"post_id":40705943,"comment_id":68660169,"body_markdown":"Removing `eureka.client.enabled: false` another error is raised: \n`Parameter 0 of method traceFilterRegistration in org.springframework.cloud.netflix.eureka.server.EurekaServerConfiguration required a bean of type &#39;javax.servlet.Filter&#39; that could not be found.\n- Bean method &#39;resourceUrlEncodingFilter&#39; in &#39;FreeMarkerAutoConfiguration.FreeMarkerWebConfiguration&#39; not loaded because @ConditionalOnEnabledResourceChain did not find class org.webjars.WebJarAssetLocator\nAction: Consider revisiting the conditions above or defining a bean of type &#39;javax.servlet.Filter&#39; in your configuration.`","body":"Removing <code>eureka.client.enabled: false</code> another error is raised:  <code>Parameter 0 of method traceFilterRegistration in org.springframework.cloud.netflix.eureka.server.EurekaServer&zwnj;&#8203;Configuration required a bean of type &#39;javax.servlet.Filter&#39; that could not be found. - Bean method &#39;resourceUrlEncodingFilter&#39; in &#39;FreeMarkerAutoConfiguration.FreeMarkerWebConfiguration&#39; not loaded because @ConditionalOnEnabledResourceChain did not find class org.webjars.WebJarAssetLocator Action: Consider revisiting the conditions above or defining a bean of type &#39;javax.servlet.Filter&#39; in your configuration.</code>"},{"owner":{"account_id":8555322,"reputation":5065,"user_id":6446898,"accept_rate":77,"display_name":"Jeterson Miranda Gomes"},"score":1,"creation_date":1627416074,"post_id":40705943,"comment_id":121149852,"body_markdown":"any solution for this problem? The solution above not works for me","body":"any solution for this problem? The solution above not works for me"}],"answers":[{"tags":[],"owner":{"account_id":12327441,"reputation":59,"user_id":8994550,"display_name":"Mayur Vaid Mehta"},"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1512558123,"creation_date":1512556872,"answer_id":47672272,"question_id":40705943,"body_markdown":"Remove `eureka.client.enabled=false` from the configuration. Then it will start the server ","title":"Spring Boot 1.4.2.RELEASE with Eureka Server - Exception: org.springframework.beans.factory.NoSuchBeanDefinitionException","body":"<p>Remove <code>eureka.client.enabled=false</code> from the configuration. Then it will start the server </p>\n"},{"tags":[],"owner":{"account_id":14358321,"reputation":465,"user_id":10371480,"display_name":"Niraj Jha"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1538681961,"creation_date":1538681961,"answer_id":52653998,"question_id":40705943,"body_markdown":"In my case i have to use spring cloud version &quot;Edgware.SR4&quot; along with compatible parent pom version like &lt;version&gt;1.5.16.RELEASE&lt;/version&gt; to fix this.It seems to be some issue with cloud version and its associated dependencies.  ","title":"Spring Boot 1.4.2.RELEASE with Eureka Server - Exception: org.springframework.beans.factory.NoSuchBeanDefinitionException","body":"<p>In my case i have to use spring cloud version \"Edgware.SR4\" along with compatible parent pom version like 1.5.16.RELEASE to fix this.It seems to be some issue with cloud version and its associated dependencies.  </p>\n"},{"tags":[],"owner":{"account_id":12969674,"reputation":713,"user_id":9375838,"display_name":"Leena"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1629107757,"creation_date":1629107757,"answer_id":68800799,"question_id":40705943,"body_markdown":"In my case, there was a **spring boot and spring cloud version mismatch**. Use https://spring.io/projects/spring-cloud to check right version.","title":"Spring Boot 1.4.2.RELEASE with Eureka Server - Exception: org.springframework.beans.factory.NoSuchBeanDefinitionException","body":"<p>In my case, there was a <strong>spring boot and spring cloud version mismatch</strong>. Use <a href=\"https://spring.io/projects/spring-cloud\" rel=\"nofollow noreferrer\">https://spring.io/projects/spring-cloud</a> to check right version.</p>\n"},{"tags":[],"owner":{"account_id":16499774,"reputation":11,"user_id":11921376,"display_name":"Shastri Chavan"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1664900670,"creation_date":1664429143,"answer_id":73890648,"question_id":40705943,"body_markdown":"instead of `eureka.client.enabled=false` you can write `eureka.client.register-with-eureka: false`\r\n\r\nor remove `eureka.client.enabled=false` from configuration file.","title":"Spring Boot 1.4.2.RELEASE with Eureka Server - Exception: org.springframework.beans.factory.NoSuchBeanDefinitionException","body":"<p>instead of <code>eureka.client.enabled=false</code> you can write <code>eureka.client.register-with-eureka: false</code></p>\n<p>or remove <code>eureka.client.enabled=false</code> from configuration file.</p>\n"}],"owner":{"account_id":2136382,"reputation":317,"user_id":1896054,"accept_rate":75,"display_name":"paoloaq"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7449,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"answer_count":4,"score":9,"last_activity_date":1664900670,"creation_date":1479656481,"question_id":40705943,"body_markdown":"I am getting the following error while trying to run Spring Boot 1.4.2.RELEASE with Eureka server:\r\n\r\n\t2016-11-20 16:25:59.306  INFO 14263 --- [           main] s.c.a.AnnotationConfigApplicationContext : Refreshing org.springframework.context.annotation.AnnotationConfigApplicationContext@2177849e: startup date [Sun Nov 20 16:25:59 CET 2016]; root of context hierarchy\r\n\t2016-11-20 16:25:59.581  INFO 14263 --- [           main] f.a.AutowiredAnnotationBeanPostProcessor : JSR-330 &#39;javax.inject.Inject&#39; annotation found and supported for autowiring\r\n\t2016-11-20 16:25:59.606  INFO 14263 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean &#39;configurationPropertiesRebinderAutoConfiguration&#39; of type [class org.springframework.cloud.autoconfigure.ConfigurationPropertiesRebinderAutoConfiguration$$EnhancerBySpringCGLIB$$fc4b31a3] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)\r\n\r\n\t  .   ____          _            __ _ _\r\n\t /\\\\ / ___&#39;_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\r\n\t( ( )\\___ | &#39;_ | &#39;_| | &#39;_ \\/ _` | \\ \\ \\ \\\r\n\t \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\r\n\t  &#39;  |____| .__|_| |_|_| |_\\__, | / / / /\r\n\t =========|_|==============|___/=/_/_/_/\r\n\t :: Spring Boot ::        (v1.4.2.RELEASE)\r\n\r\n\t2016-11-20 16:26:04.988  INFO 14263 --- [           main] i.v.p.s.EurekaServerApplication          : No active profile set, falling back to default profiles: default\r\n\t2016-11-20 16:26:05.005  INFO 14263 --- [           main] ationConfigEmbeddedWebApplicationContext : Refreshing org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@3e14c16d: startup date [Sun Nov 20 16:26:05 CET 2016]; parent: org.springframework.context.annotation.AnnotationConfigApplicationContext@2177849e\r\n\t2016-11-20 16:26:05.589  WARN 14263 --- [           main] o.s.c.a.ConfigurationClassPostProcessor  : Cannot enhance @Configuration bean definition &#39;refreshScope&#39; since its singleton instance has been created too early. The typical cause is a non-static @Bean method with a BeanDefinitionRegistryPostProcessor return type: Consider declaring such methods as &#39;static&#39;.\r\n\t2016-11-20 16:26:05.774  INFO 14263 --- [           main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=05587591-c1ba-31c3-b56f-8b79a2e1951f\r\n\t2016-11-20 16:26:05.787  INFO 14263 --- [           main] f.a.AutowiredAnnotationBeanPostProcessor : JSR-330 &#39;javax.inject.Inject&#39; annotation found and supported for autowiring\r\n\t2016-11-20 16:26:05.857  INFO 14263 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean &#39;org.springframework.cloud.autoconfigure.ConfigurationPropertiesRebinderAutoConfiguration&#39; of type [class org.springframework.cloud.autoconfigure.ConfigurationPropertiesRebinderAutoConfiguration$$EnhancerBySpringCGLIB$$fc4b31a3] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)\r\n\t2016-11-20 16:26:06.180  INFO 14263 --- [           main] s.b.c.e.t.TomcatEmbeddedServletContainer : Tomcat initialized with port(s): 8761 (http)\r\n\t2016-11-20 16:26:06.197  INFO 14263 --- [           main] o.apache.catalina.core.StandardService   : Starting service Tomcat\r\n\t2016-11-20 16:26:06.198  INFO 14263 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet Engine: Apache Tomcat/8.5.6\r\n\t2016-11-20 16:26:06.326  INFO 14263 --- [ost-startStop-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext\r\n\t2016-11-20 16:26:06.327  INFO 14263 --- [ost-startStop-1] o.s.web.context.ContextLoader            : Root WebApplicationContext: initialization completed in 1322 ms\r\n\t2016-11-20 16:26:06.347 ERROR 14263 --- [ost-startStop-1] o.s.b.c.embedded.tomcat.TomcatStarter    : Error starting Tomcat context. Exception: org.springframework.beans.factory.UnsatisfiedDependencyException. Message: Error creating bean with name &#39;org.springframework.cloud.netflix.eureka.server.EurekaServerConfiguration&#39;: Unsatisfied dependency expressed through field &#39;applicationInfoManager&#39;; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type &#39;com.netflix.appinfo.ApplicationInfoManager&#39; available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}\r\n\t2016-11-20 16:26:06.375  WARN 14263 --- [           main] ationConfigEmbeddedWebApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.context.ApplicationContextException: Unable to start embedded container; nested exception is org.springframework.boot.context.embedded.EmbeddedServletContainerException: Unable to start embedded Tomcat\r\n\t2016-11-20 16:26:06.483 ERROR 14263 --- [           main] o.s.b.d.LoggingFailureAnalysisReporter   : \r\n\r\n\t***************************\r\n\tAPPLICATION FAILED TO START\r\n\t***************************\r\n\r\n\tDescription:\r\n\r\n\tField applicationInfoManager in org.springframework.cloud.netflix.eureka.server.EurekaServerConfiguration required a bean of type &#39;com.netflix.appinfo.ApplicationInfoManager&#39; that could not be found.\r\n\r\n\r\n\tAction:\r\n\r\n\tConsider defining a bean of type &#39;com.netflix.appinfo.ApplicationInfoManager&#39; in your configuration.\r\n\r\n----------\r\n\r\nHere is the **pom file**:\r\n\r\n\t&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n\t&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\t\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n\t\t&lt;groupId&gt;my.test.springMicroservices&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;EurekaServer&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t\t&lt;packaging&gt;jar&lt;/packaging&gt;\r\n\r\n\t\t&lt;name&gt;EurekaServer&lt;/name&gt;\r\n\t\t&lt;description&gt;Eureka discovery server example&lt;/description&gt;\r\n\r\n\t\t&lt;parent&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.4.2.RELEASE&lt;/version&gt;\r\n\t\t\t&lt;relativePath /&gt;\r\n\t\t&lt;/parent&gt;\r\n\r\n\t\t&lt;properties&gt;\r\n\t\t\t&lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n\t\t\t&lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\r\n\t\t\t&lt;java.version&gt;1.8&lt;/java.version&gt;\r\n\t\t&lt;/properties&gt;\r\n\r\n\t\t&lt;dependencies&gt;\r\n\t\t\t&lt;dependency&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\r\n\t\t\t&lt;/dependency&gt;\r\n\t\t\t&lt;dependency&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-cloud-starter-eureka-server&lt;/artifactId&gt;\r\n\t\t\t&lt;/dependency&gt;\r\n\r\n\t\t\t&lt;dependency&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t\t&lt;/dependency&gt;\r\n\t\t&lt;/dependencies&gt;\r\n\r\n\t\t&lt;dependencyManagement&gt;\r\n\t\t\t&lt;dependencies&gt;\r\n\t\t\t\t&lt;dependency&gt;\r\n\t\t\t\t\t&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt;\r\n\t\t\t\t\t&lt;version&gt;Camden.SR2&lt;/version&gt;\r\n\t\t\t\t\t&lt;type&gt;pom&lt;/type&gt;\r\n\t\t\t\t\t&lt;scope&gt;import&lt;/scope&gt;\r\n\t\t\t\t&lt;/dependency&gt;\r\n\t\t\t&lt;/dependencies&gt;\r\n\t\t&lt;/dependencyManagement&gt;\r\n\t\t\r\n\t\t&lt;build&gt;\r\n\t\t\t&lt;plugins&gt;\r\n\t\t\t\t&lt;plugin&gt;\r\n\t\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;/plugin&gt;\r\n\t\t\t&lt;/plugins&gt;\r\n\t\t&lt;/build&gt;\r\n\t&lt;/project&gt;\r\n\r\n----------\r\n\r\nThe **application.yml**:\r\n\r\n\tserver:\r\n\t  port: 8761\r\n\tspring:\r\n\t  application:\r\n\t    name: eureka-server1\r\n\teureka:\r\n\t  client:\r\n\t    enabled: false\r\n\t    fetch-registry: false\r\n\r\n----------\r\n\r\nMy **Spring boot application class**:\r\n\r\n    import org.springframework.boot.SpringApplication;\r\n    import org.springframework.boot.autoconfigure.SpringBootApplication;\r\n    import org.springframework.cloud.netflix.eureka.server.EnableEurekaServer;\r\n    \r\n    @SpringBootApplication\r\n    @EnableEurekaServer\r\n    public class EurekaServerApplication {\r\n    \tpublic static void main(String[] args) {\r\n    \t\tSpringApplication.run(EurekaServerApplication.class, args);\r\n    \t}\r\n    }\r\n\r\n----------\r\n\r\nThis is my environment: \r\n\r\n - MacOS Sierra 10.12.1\r\n - Spring Tool Suite - Version: 3.8.2.RELEASE (Build Id: 201610040743 - Platform: Eclipse Neon.1 (4.6.1))\r\n\r\n----------\r\n\r\nDo I missed something?\r\n\r\nThanks in advance","title":"Spring Boot 1.4.2.RELEASE with Eureka Server - Exception: org.springframework.beans.factory.NoSuchBeanDefinitionException","body":"<p>I am getting the following error while trying to run Spring Boot 1.4.2.RELEASE with Eureka server:</p>\n\n<pre><code>2016-11-20 16:25:59.306  INFO 14263 --- [           main] s.c.a.AnnotationConfigApplicationContext : Refreshing org.springframework.context.annotation.AnnotationConfigApplicationContext@2177849e: startup date [Sun Nov 20 16:25:59 CET 2016]; root of context hierarchy\n2016-11-20 16:25:59.581  INFO 14263 --- [           main] f.a.AutowiredAnnotationBeanPostProcessor : JSR-330 'javax.inject.Inject' annotation found and supported for autowiring\n2016-11-20 16:25:59.606  INFO 14263 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'configurationPropertiesRebinderAutoConfiguration' of type [class org.springframework.cloud.autoconfigure.ConfigurationPropertiesRebinderAutoConfiguration$$EnhancerBySpringCGLIB$$fc4b31a3] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)\n\n  .   ____          _            __ _ _\n /\\\\ / ___'_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\n( ( )\\___ | '_ | '_| | '_ \\/ _` | \\ \\ \\ \\\n \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\n  '  |____| .__|_| |_|_| |_\\__, | / / / /\n =========|_|==============|___/=/_/_/_/\n :: Spring Boot ::        (v1.4.2.RELEASE)\n\n2016-11-20 16:26:04.988  INFO 14263 --- [           main] i.v.p.s.EurekaServerApplication          : No active profile set, falling back to default profiles: default\n2016-11-20 16:26:05.005  INFO 14263 --- [           main] ationConfigEmbeddedWebApplicationContext : Refreshing org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@3e14c16d: startup date [Sun Nov 20 16:26:05 CET 2016]; parent: org.springframework.context.annotation.AnnotationConfigApplicationContext@2177849e\n2016-11-20 16:26:05.589  WARN 14263 --- [           main] o.s.c.a.ConfigurationClassPostProcessor  : Cannot enhance @Configuration bean definition 'refreshScope' since its singleton instance has been created too early. The typical cause is a non-static @Bean method with a BeanDefinitionRegistryPostProcessor return type: Consider declaring such methods as 'static'.\n2016-11-20 16:26:05.774  INFO 14263 --- [           main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=05587591-c1ba-31c3-b56f-8b79a2e1951f\n2016-11-20 16:26:05.787  INFO 14263 --- [           main] f.a.AutowiredAnnotationBeanPostProcessor : JSR-330 'javax.inject.Inject' annotation found and supported for autowiring\n2016-11-20 16:26:05.857  INFO 14263 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.cloud.autoconfigure.ConfigurationPropertiesRebinderAutoConfiguration' of type [class org.springframework.cloud.autoconfigure.ConfigurationPropertiesRebinderAutoConfiguration$$EnhancerBySpringCGLIB$$fc4b31a3] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)\n2016-11-20 16:26:06.180  INFO 14263 --- [           main] s.b.c.e.t.TomcatEmbeddedServletContainer : Tomcat initialized with port(s): 8761 (http)\n2016-11-20 16:26:06.197  INFO 14263 --- [           main] o.apache.catalina.core.StandardService   : Starting service Tomcat\n2016-11-20 16:26:06.198  INFO 14263 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet Engine: Apache Tomcat/8.5.6\n2016-11-20 16:26:06.326  INFO 14263 --- [ost-startStop-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext\n2016-11-20 16:26:06.327  INFO 14263 --- [ost-startStop-1] o.s.web.context.ContextLoader            : Root WebApplicationContext: initialization completed in 1322 ms\n2016-11-20 16:26:06.347 ERROR 14263 --- [ost-startStop-1] o.s.b.c.embedded.tomcat.TomcatStarter    : Error starting Tomcat context. Exception: org.springframework.beans.factory.UnsatisfiedDependencyException. Message: Error creating bean with name 'org.springframework.cloud.netflix.eureka.server.EurekaServerConfiguration': Unsatisfied dependency expressed through field 'applicationInfoManager'; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'com.netflix.appinfo.ApplicationInfoManager' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}\n2016-11-20 16:26:06.375  WARN 14263 --- [           main] ationConfigEmbeddedWebApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.context.ApplicationContextException: Unable to start embedded container; nested exception is org.springframework.boot.context.embedded.EmbeddedServletContainerException: Unable to start embedded Tomcat\n2016-11-20 16:26:06.483 ERROR 14263 --- [           main] o.s.b.d.LoggingFailureAnalysisReporter   : \n\n***************************\nAPPLICATION FAILED TO START\n***************************\n\nDescription:\n\nField applicationInfoManager in org.springframework.cloud.netflix.eureka.server.EurekaServerConfiguration required a bean of type 'com.netflix.appinfo.ApplicationInfoManager' that could not be found.\n\n\nAction:\n\nConsider defining a bean of type 'com.netflix.appinfo.ApplicationInfoManager' in your configuration.\n</code></pre>\n\n<hr>\n\n<p>Here is the <strong>pom file</strong>:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;my.test.springMicroservices&lt;/groupId&gt;\n    &lt;artifactId&gt;EurekaServer&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;packaging&gt;jar&lt;/packaging&gt;\n\n    &lt;name&gt;EurekaServer&lt;/name&gt;\n    &lt;description&gt;Eureka discovery server example&lt;/description&gt;\n\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;1.4.2.RELEASE&lt;/version&gt;\n        &lt;relativePath /&gt;\n    &lt;/parent&gt;\n\n    &lt;properties&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\n        &lt;java.version&gt;1.8&lt;/java.version&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-cloud-starter-eureka-server&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;dependencyManagement&gt;\n        &lt;dependencies&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt;\n                &lt;version&gt;Camden.SR2&lt;/version&gt;\n                &lt;type&gt;pom&lt;/type&gt;\n                &lt;scope&gt;import&lt;/scope&gt;\n            &lt;/dependency&gt;\n        &lt;/dependencies&gt;\n    &lt;/dependencyManagement&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n\n<hr>\n\n<p>The <strong>application.yml</strong>:</p>\n\n<pre><code>server:\n  port: 8761\nspring:\n  application:\n    name: eureka-server1\neureka:\n  client:\n    enabled: false\n    fetch-registry: false\n</code></pre>\n\n<hr>\n\n<p>My <strong>Spring boot application class</strong>:</p>\n\n<pre><code>import org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.cloud.netflix.eureka.server.EnableEurekaServer;\n\n@SpringBootApplication\n@EnableEurekaServer\npublic class EurekaServerApplication {\n    public static void main(String[] args) {\n        SpringApplication.run(EurekaServerApplication.class, args);\n    }\n}\n</code></pre>\n\n<hr>\n\n<p>This is my environment: </p>\n\n<ul>\n<li>MacOS Sierra 10.12.1</li>\n<li>Spring Tool Suite - Version: 3.8.2.RELEASE (Build Id: 201610040743 - Platform: Eclipse Neon.1 (4.6.1))</li>\n</ul>\n\n<hr>\n\n<p>Do I missed something?</p>\n\n<p>Thanks in advance</p>\n"},{"tags":["java","tomcat","intellij-idea","war"],"comments":[{"owner":{"account_id":1725529,"reputation":626,"user_id":1580304,"display_name":"OscarBcn"},"score":0,"creation_date":1467107535,"post_id":38072518,"comment_id":63582737,"body_markdown":"I think you need runtime dependency. It extends compile dependency. It should be:  runtime project(&#39;:library-services&#39;). According: https://docs.gradle.org/current/userguide/war_plugin.html (47.6)","body":"I think you need runtime dependency. It extends compile dependency. It should be:  runtime project(&#39;:library-services&#39;). According: <a href=\"https://docs.gradle.org/current/userguide/war_plugin.html\" rel=\"nofollow noreferrer\">docs.gradle.org/current/userguide/war_plugin.html</a> (47.6)"},{"owner":{"account_id":1065081,"reputation":14102,"user_id":1065869,"accept_rate":57,"display_name":"Elad Benda2"},"score":0,"creation_date":1467108084,"post_id":38072518,"comment_id":63583091,"body_markdown":"why? it&#39;s should be dependent in compile time. no?","body":"why? it&#39;s should be dependent in compile time. no?"},{"owner":{"account_id":1725529,"reputation":626,"user_id":1580304,"display_name":"OscarBcn"},"score":0,"creation_date":1467109687,"post_id":38072518,"comment_id":63584125,"body_markdown":"I think runtime extends compile and it seems that you need those classes in runtime, not only in compile time. With runtime your dependent project should be included in your lib folder and those classes will be ready for your web-services project","body":"I think runtime extends compile and it seems that you need those classes in runtime, not only in compile time. With runtime your dependent project should be included in your lib folder and those classes will be ready for your web-services project"},{"owner":{"account_id":1065081,"reputation":14102,"user_id":1065869,"accept_rate":57,"display_name":"Elad Benda2"},"score":0,"creation_date":1467110872,"post_id":38072518,"comment_id":63584794,"body_markdown":"it doesn&#39;t work. the project doesn&#39;t even run. module a missing classes from module b","body":"it doesn&#39;t work. the project doesn&#39;t even run. module a missing classes from module b"},{"owner":{"account_id":1725529,"reputation":626,"user_id":1580304,"display_name":"OscarBcn"},"score":0,"creation_date":1467140322,"post_id":38072518,"comment_id":63604735,"body_markdown":"If it can help you. I have created 1 project with one submodule. To be able to see it under libs it was needed to do: compile project(&#39;submodule&#39;)\n    runtime project(&#39;submodule&#39;). It seems that you will need to maintain your compile project adding one more line with runtime project","body":"If it can help you. I have created 1 project with one submodule. To be able to see it under libs it was needed to do: compile project(&#39;submodule&#39;)     runtime project(&#39;submodule&#39;). It seems that you will need to maintain your compile project adding one more line with runtime project"},{"owner":{"account_id":119440,"reputation":35402,"user_id":311130,"accept_rate":75,"display_name":"Elad Benda"},"score":0,"creation_date":1467208715,"post_id":38072518,"comment_id":63637462,"body_markdown":"After I removed this line the problem was solved:\n\n    #org.gradle.parallel=true","body":"After I removed this line the problem was solved:      #org.gradle.parallel=true"}],"answers":[{"tags":[],"owner":{"account_id":119440,"reputation":35402,"user_id":311130,"accept_rate":75,"display_name":"Elad Benda"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1467210433,"creation_date":1467210433,"answer_id":38102583,"question_id":38072518,"body_markdown":"After I removed this line the problem was solved:\r\n\r\n\r\ngradle.properties file:\r\n\r\n    #org.gradle.parallel=true\r\n\r\n","title":"running gradle &quot;war&quot; doesn&#39;t include dependent intellij project","body":"<p>After I removed this line the problem was solved:</p>\n\n<p>gradle.properties file:</p>\n\n<pre><code>#org.gradle.parallel=true\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3643191,"reputation":164,"user_id":3036855,"display_name":"agent-p"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664900355,"creation_date":1664900355,"answer_id":73950781,"question_id":38072518,"body_markdown":"Here is a weird gradle IntelliJ behavior I noticed. Might be just gradle, but I don&#39;t usually use gradle outside of IntelliJ. So, I can&#39;t say for sure.\r\nIn any case, when the source set module I am including has a name alphabetically after the name of the module I am including it in. The WAR is missing the classes from the included module. Not sure what is causing it, but I put an underscore at the beginning of the included module and it includes the classes.\r\nNot an ideal solution, but works for me because I have a single core source set that I include in my API modules. It took a while before it became a problem for me because my core module is called api-core. Everything worked fine until I added an &quot;activities&quot; API module.\r\nI am always reluctant to post this kind of work-around solution without knowing exactly what the mechanism is. I hope it is helpful, and if anyone knows what is the root cause and has a better solution. I am all ears. :)\r\n","title":"running gradle &quot;war&quot; doesn&#39;t include dependent intellij project","body":"<p>Here is a weird gradle IntelliJ behavior I noticed. Might be just gradle, but I don't usually use gradle outside of IntelliJ. So, I can't say for sure.\nIn any case, when the source set module I am including has a name alphabetically after the name of the module I am including it in. The WAR is missing the classes from the included module. Not sure what is causing it, but I put an underscore at the beginning of the included module and it includes the classes.\nNot an ideal solution, but works for me because I have a single core source set that I include in my API modules. It took a while before it became a problem for me because my core module is called api-core. Everything worked fine until I added an &quot;activities&quot; API module.\nI am always reluctant to post this kind of work-around solution without knowing exactly what the mechanism is. I hope it is helpful, and if anyone knows what is the root cause and has a better solution. I am all ears. :)</p>\n"}],"owner":{"account_id":119440,"reputation":35402,"user_id":311130,"accept_rate":75,"display_name":"Elad Benda"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":480,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":2,"score":-1,"last_activity_date":1664900355,"creation_date":1467106732,"question_id":38072518,"body_markdown":"I have an intellij project with two modules: \r\n\r\n`web-services` (my API), `library-services` (business logic).\r\n\r\n\r\nbuild.gradle of web-serivces:\r\n\r\n    apply plugin: &#39;java&#39;\r\n    apply plugin: &#39;war&#39;\r\n    apply plugin: &#39;maven-publish&#39;\r\n    apply from: ext.gradleDir + &#39;/common.gradle&#39;\r\n    apply from: ext.gradleDir + &#39;/integration_test.gradle&#39;\r\n    \r\n    sourceCompatibility = 1.8\r\n    targetCompatibility = 1.8\r\n    project.version = &#39;1.0.&#39; + getBuildNumber()\r\n    \r\n    \r\n    dependencies {\r\n        compile project(&#39;:library-services&#39;)\r\n        compile(&#39;com.waze.automation:common:1.0.80&#39;)\r\n    \r\n        compile(&#39;com.sun.jersey:jersey-bundle:1.19&#39;)\r\n        compile(&#39;com.sun.jersey:jersey-json:1.19&#39;)\r\n        compile group:  &#39;org.codehaus.jackson&#39;, name:&#39;jackson-jaxrs&#39;, version: &#39;1.1.1&#39;\r\n    \r\n        compile(&#39;com.google.guava:guava:18.0&#39;)\r\n    \r\n        testCompile group: &#39;junit&#39;, name: &#39;junit&#39;, version: &#39;4.11&#39;\r\n        testCompile(&#39;org.hamcrest:hamcrest-all:1.3&#39;)\r\n        testCompile(&#39;org.mockito:mockito-all:1.9.5&#39;)\r\n    \r\n    }\r\n    \r\n    war {\r\n        from &#39;src/main&#39; // include source files in war\r\n    }\r\n\r\nI run this gradle command:\r\n\r\n    ~/workspaceQa/MobileAutomationWebService/web-services \r\n     ./gradlew war   \r\n\r\n\r\nbut in the created war I don&#39;t see the classes of library-services\r\n\r\nand my service throws `ClassNoFound` exception.\r\n\r\n \r\nhere is part of my log. how can i fix this?\r\n\r\n    12:10:28.081 [INFO] [org.gradle.BuildLogger] Tasks to be executed: [task &#39;:library-services:compileJava&#39;, task &#39;:library-services:processResources&#39;, task &#39;:library-services:verifyDependencies&#39;, task &#39;:library-services:classes&#39;, task &#39;:library-services:setProjectVersion&#39;, task &#39;:library-services:jar&#39;, task &#39;:web-services:compileJava&#39;, task &#39;:web-services:processResources&#39;, task &#39;:web-services:verifyDependencies&#39;, task &#39;:web-services:classes&#39;, task &#39;:web-services:war&#39;]\r\n\r\n\r\n","title":"running gradle &quot;war&quot; doesn&#39;t include dependent intellij project","body":"<p>I have an intellij project with two modules: </p>\n\n<p><code>web-services</code> (my API), <code>library-services</code> (business logic).</p>\n\n<p>build.gradle of web-serivces:</p>\n\n<pre><code>apply plugin: 'java'\napply plugin: 'war'\napply plugin: 'maven-publish'\napply from: ext.gradleDir + '/common.gradle'\napply from: ext.gradleDir + '/integration_test.gradle'\n\nsourceCompatibility = 1.8\ntargetCompatibility = 1.8\nproject.version = '1.0.' + getBuildNumber()\n\n\ndependencies {\n    compile project(':library-services')\n    compile('com.waze.automation:common:1.0.80')\n\n    compile('com.sun.jersey:jersey-bundle:1.19')\n    compile('com.sun.jersey:jersey-json:1.19')\n    compile group:  'org.codehaus.jackson', name:'jackson-jaxrs', version: '1.1.1'\n\n    compile('com.google.guava:guava:18.0')\n\n    testCompile group: 'junit', name: 'junit', version: '4.11'\n    testCompile('org.hamcrest:hamcrest-all:1.3')\n    testCompile('org.mockito:mockito-all:1.9.5')\n\n}\n\nwar {\n    from 'src/main' // include source files in war\n}\n</code></pre>\n\n<p>I run this gradle command:</p>\n\n<pre><code>~/workspaceQa/MobileAutomationWebService/web-services \n ./gradlew war   \n</code></pre>\n\n<p>but in the created war I don't see the classes of library-services</p>\n\n<p>and my service throws <code>ClassNoFound</code> exception.</p>\n\n<p>here is part of my log. how can i fix this?</p>\n\n<pre><code>12:10:28.081 [INFO] [org.gradle.BuildLogger] Tasks to be executed: [task ':library-services:compileJava', task ':library-services:processResources', task ':library-services:verifyDependencies', task ':library-services:classes', task ':library-services:setProjectVersion', task ':library-services:jar', task ':web-services:compileJava', task ':web-services:processResources', task ':web-services:verifyDependencies', task ':web-services:classes', task ':web-services:war']\n</code></pre>\n"},{"tags":["java","hibernate","hql"],"answers":[{"tags":[],"owner":{"account_id":179640,"reputation":15442,"user_id":412446,"accept_rate":41,"display_name":"Christian Beikov"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1664899966,"creation_date":1664899966,"answer_id":73950709,"question_id":73916476,"body_markdown":"You can use almost the same query in HQL. Assuming your entity is called `Post` and the attribute for `WBS` is `wbs`, you can use:\r\n\r\n```sql\r\nSELECT p\r\nFROM Post p\r\nWHERE LENGTH(p.wbs) - LENGTH(REPLACE(p.wbs, &#39;.&#39;, &#39;&#39;)) = 1;\r\n```","title":"Hibernate, HQL: Count appearances of a specific character in a string","body":"<p>You can use almost the same query in HQL. Assuming your entity is called <code>Post</code> and the attribute for <code>WBS</code> is <code>wbs</code>, you can use:</p>\n<pre class=\"lang-sql prettyprint-override\"><code>SELECT p\nFROM Post p\nWHERE LENGTH(p.wbs) - LENGTH(REPLACE(p.wbs, '.', '')) = 1;\n</code></pre>\n"}],"owner":{"account_id":12660186,"reputation":60,"user_id":9203256,"display_name":"Dumitru"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":164,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1664899966,"creation_date":1664608491,"question_id":73916476,"body_markdown":"I have a table named &quot;POSTS&quot; with &quot;WBS&quot; field of type varchar(50).\r\nThe values in the WBS field match the following pattern:\r\n&lt;number.number.number..&gt; ex:  &quot;1.2.3&quot;, &quot;123.123&quot;, &quot;123&quot;, &quot;123.3.2.1&quot; etc.\r\n\r\nI need to select all records where the value of &quot;WBS&quot; field has two dots, one dot, or none.\r\n\r\nMy question is: How to count the appearances of a specific character in a string ?\r\n\r\nFor example, on MySQL and Oracle, I could try the following query:\r\n\r\n    SELECT *\r\n    FROM posts\r\n    WHERE LENGTH(WBS) - LENGTH(REPLACE(WBS, &#39;.&#39;, &#39;&#39;)) = 1;\r\nfound here: https://stackoverflow.com/questions/56642419/word-count-in-hibernate-query-language-hql\r\n\r\n","title":"Hibernate, HQL: Count appearances of a specific character in a string","body":"<p>I have a table named &quot;POSTS&quot; with &quot;WBS&quot; field of type varchar(50).\nThe values in the WBS field match the following pattern:\n&lt;number.number.number..&gt; ex:  &quot;1.2.3&quot;, &quot;123.123&quot;, &quot;123&quot;, &quot;123.3.2.1&quot; etc.</p>\n<p>I need to select all records where the value of &quot;WBS&quot; field has two dots, one dot, or none.</p>\n<p>My question is: How to count the appearances of a specific character in a string ?</p>\n<p>For example, on MySQL and Oracle, I could try the following query:</p>\n<pre><code>SELECT *\nFROM posts\nWHERE LENGTH(WBS) - LENGTH(REPLACE(WBS, '.', '')) = 1;\n</code></pre>\n<p>found here: <a href=\"https://stackoverflow.com/questions/56642419/word-count-in-hibernate-query-language-hql\">Word count in Hibernate Query Language (hql)</a></p>\n"},{"tags":["java","android","gif"],"comments":[{"owner":{"account_id":14584795,"reputation":2961,"user_id":10534012,"display_name":"Darkman"},"score":0,"creation_date":1664902601,"post_id":73950705,"comment_id":130574414,"body_markdown":"Which `opts` is null? Is it both?","body":"Which <code>opts</code> is null? Is it both?"},{"owner":{"account_id":16914364,"reputation":1806,"user_id":12232720,"display_name":"mathematics-and-caffeine"},"score":0,"creation_date":1664903776,"post_id":73950705,"comment_id":130574825,"body_markdown":"Yes, both are null","body":"Yes, both are null"},{"owner":{"account_id":14584795,"reputation":2961,"user_id":10534012,"display_name":"Darkman"},"score":0,"creation_date":1664904778,"post_id":73950705,"comment_id":130575151,"body_markdown":"Well, it is hard to find to problem without the whole source code in hand. There are some redundant variables like `ic` and `callback`. I&#39;d first check if the methods `onCreateInputConnection()` and `onCommitContent()` are called. Secondly, remove the `ic` variable (Maybe `callback` as well). Third, I&#39;d just return `new InputConnectionCompat.OnCommitContentListener()` instance. I&#39;ve noticed that you&#39;ve never return `callback` instance either.","body":"Well, it is hard to find to problem without the whole source code in hand. There are some redundant variables like <code>ic</code> and <code>callback</code>. I&#39;d first check if the methods <code>onCreateInputConnection()</code> and <code>onCommitContent()</code> are called. Secondly, remove the <code>ic</code> variable (Maybe <code>callback</code> as well). Third, I&#39;d just return <code>new InputConnectionCompat.OnCommitContentListener()</code> instance. I&#39;ve noticed that you&#39;ve never return <code>callback</code> instance either."}],"owner":{"account_id":16914364,"reputation":1806,"user_id":12232720,"display_name":"mathematics-and-caffeine"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":86,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1664899937,"creation_date":1664899937,"question_id":73950705,"body_markdown":"I have used code from StackOverflow and Google. This is it:\r\n\r\n```\r\neditText.setKeyBoardInputCallbackListener(new EditTextGIF.KeyBoardInputCallbackListener() {\r\n\t@Override\r\n\tpublic void onCommitContent(InputContentInfoCompat inputContentInfo,\r\n\t\t\t\t\t\t\t\tint flags, Bundle opts) {\r\n\t\t// you will get your gif/png/jpg here in opts bundle\r\n\t\tLog.d(TAG, &quot;Opts: &quot;+opts);\r\n\t}\r\n});\r\n```\r\n\r\nThis is EditText:\r\n\r\n```\r\n&lt;com.myapp.EditTextGIF\r\n\tandroid:id=&quot;@+id/editText&quot;\r\n\tandroid:layout_width=&quot;match_parent&quot;\r\n\tandroid:layout_height=&quot;wrap_content&quot;\r\n\tandroid:inputType=&quot;textCapSentences|textMultiLine&quot;\r\n\tandroid:textColor=&quot;@color/textcolor&quot;\r\n\tandroid:background=&quot;@null&quot;\r\n\tandroid:maxLength=&quot;@integer/max_chat_message_length&quot;\r\n\tandroid:hint=&quot;@string/type_a_message&quot; /&gt;\r\n```\r\n\r\nThis is the class `EditTextGIF`:\r\n\r\n```\r\npublic class EditTextGIF extends AXEmojiEditText {\r\n\r\n    private KeyBoardInputCallbackListener keyBoardInputCallbackListener;\r\n\r\n    public EditTextGIF(Context context) {\r\n        super(context);\r\n    }\r\n\r\n    public EditTextGIF(Context context, AttributeSet attrs) {\r\n        super(context, attrs);\r\n    }\r\n\r\n    @Override\r\n    public InputConnection onCreateInputConnection(EditorInfo editorInfo) {\r\n        final InputConnection ic = super.onCreateInputConnection(editorInfo);\r\n        EditorInfoCompat.setContentMimeTypes(editorInfo, new String [] {&quot;image/gif&quot;});\r\n\r\n        final InputConnectionCompat.OnCommitContentListener callback =\r\n                new InputConnectionCompat.OnCommitContentListener() {\r\n                    @Override\r\n                    public boolean onCommitContent(InputContentInfoCompat inputContentInfo,\r\n                                                   int flags, Bundle opts) {\r\n                        Logg.dr(&quot;Opts: &quot; + opts);\r\n                        // read and display inputContentInfo asynchronously\r\n                        if (BuildCompat.isAtLeastNMR1() &amp;&amp; (flags &amp;\r\n                                InputConnectionCompat.INPUT_CONTENT_GRANT_READ_URI_PERMISSION) != 0) {\r\n                            try {\r\n                                inputContentInfo.requestPermission();\r\n                            }\r\n                            catch (Exception e) {\r\n                                return false; // return false if failed\r\n                            }\r\n                        }\r\n\r\n                        // read and display inputContentInfo asynchronously.\r\n                        // call inputContentInfo.releasePermission() as needed.\r\n                        if (keyBoardInputCallbackListener != null) {\r\n                            keyBoardInputCallbackListener.onCommitContent(inputContentInfo, flags, opts);\r\n                        }\r\n\r\n                        return true;  // return true if succeeded\r\n                    }\r\n                };\r\n        return InputConnectionCompat.createWrapper(ic, editorInfo, callback);\r\n    }\r\n\r\n    public interface KeyBoardInputCallbackListener {\r\n        void onCommitContent(InputContentInfoCompat inputContentInfo,\r\n                             int flags, Bundle opts);\r\n    }\r\n\r\n    public void setKeyBoardInputCallbackListener(KeyBoardInputCallbackListener keyBoardInputCallbackListener) {\r\n        this.keyBoardInputCallbackListener = keyBoardInputCallbackListener;\r\n    }\r\n}\r\n```\r\n\r\nIt extends `AXEmojiEditText`, which is from a 3rd party [library][1] for an emoji keyboard.\r\n\r\nBut this code does not work properly. When I try to insert a GIF, it no longer displays the &quot;GIFs-not-allowed-toast&quot;, but the Logs always say that the bundle `opts` I am receiving is null. No matter which GIF I choose. How can this be fixed?\r\n\r\n\r\n  [1]: https://github.com/Aghajari/AXEmojiView","title":"EditText GIF insertion gives null always","body":"<p>I have used code from StackOverflow and Google. This is it:</p>\n<pre><code>editText.setKeyBoardInputCallbackListener(new EditTextGIF.KeyBoardInputCallbackListener() {\n    @Override\n    public void onCommitContent(InputContentInfoCompat inputContentInfo,\n                                int flags, Bundle opts) {\n        // you will get your gif/png/jpg here in opts bundle\n        Log.d(TAG, &quot;Opts: &quot;+opts);\n    }\n});\n</code></pre>\n<p>This is EditText:</p>\n<pre><code>&lt;com.myapp.EditTextGIF\n    android:id=&quot;@+id/editText&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;wrap_content&quot;\n    android:inputType=&quot;textCapSentences|textMultiLine&quot;\n    android:textColor=&quot;@color/textcolor&quot;\n    android:background=&quot;@null&quot;\n    android:maxLength=&quot;@integer/max_chat_message_length&quot;\n    android:hint=&quot;@string/type_a_message&quot; /&gt;\n</code></pre>\n<p>This is the class <code>EditTextGIF</code>:</p>\n<pre><code>public class EditTextGIF extends AXEmojiEditText {\n\n    private KeyBoardInputCallbackListener keyBoardInputCallbackListener;\n\n    public EditTextGIF(Context context) {\n        super(context);\n    }\n\n    public EditTextGIF(Context context, AttributeSet attrs) {\n        super(context, attrs);\n    }\n\n    @Override\n    public InputConnection onCreateInputConnection(EditorInfo editorInfo) {\n        final InputConnection ic = super.onCreateInputConnection(editorInfo);\n        EditorInfoCompat.setContentMimeTypes(editorInfo, new String [] {&quot;image/gif&quot;});\n\n        final InputConnectionCompat.OnCommitContentListener callback =\n                new InputConnectionCompat.OnCommitContentListener() {\n                    @Override\n                    public boolean onCommitContent(InputContentInfoCompat inputContentInfo,\n                                                   int flags, Bundle opts) {\n                        Logg.dr(&quot;Opts: &quot; + opts);\n                        // read and display inputContentInfo asynchronously\n                        if (BuildCompat.isAtLeastNMR1() &amp;&amp; (flags &amp;\n                                InputConnectionCompat.INPUT_CONTENT_GRANT_READ_URI_PERMISSION) != 0) {\n                            try {\n                                inputContentInfo.requestPermission();\n                            }\n                            catch (Exception e) {\n                                return false; // return false if failed\n                            }\n                        }\n\n                        // read and display inputContentInfo asynchronously.\n                        // call inputContentInfo.releasePermission() as needed.\n                        if (keyBoardInputCallbackListener != null) {\n                            keyBoardInputCallbackListener.onCommitContent(inputContentInfo, flags, opts);\n                        }\n\n                        return true;  // return true if succeeded\n                    }\n                };\n        return InputConnectionCompat.createWrapper(ic, editorInfo, callback);\n    }\n\n    public interface KeyBoardInputCallbackListener {\n        void onCommitContent(InputContentInfoCompat inputContentInfo,\n                             int flags, Bundle opts);\n    }\n\n    public void setKeyBoardInputCallbackListener(KeyBoardInputCallbackListener keyBoardInputCallbackListener) {\n        this.keyBoardInputCallbackListener = keyBoardInputCallbackListener;\n    }\n}\n</code></pre>\n<p>It extends <code>AXEmojiEditText</code>, which is from a 3rd party <a href=\"https://github.com/Aghajari/AXEmojiView\" rel=\"nofollow noreferrer\">library</a> for an emoji keyboard.</p>\n<p>But this code does not work properly. When I try to insert a GIF, it no longer displays the &quot;GIFs-not-allowed-toast&quot;, but the Logs always say that the bundle <code>opts</code> I am receiving is null. No matter which GIF I choose. How can this be fixed?</p>\n"},{"tags":["java","database","cassandra","selenium-chromedriver","dbconnection"],"comments":[{"owner":{"account_id":45934,"reputation":203649,"user_id":135589,"accept_rate":100,"display_name":"Jesper"},"score":3,"creation_date":1664876382,"post_id":73945733,"comment_id":130565199,"body_markdown":"This most likely happens because you are *running* your code with a different version of Google Guava than what you *compiled* it with, or because you are using a version of Google Guava that is incompatible with some other library (such as the Datastax driver). Make sure you use the correct version of Google Guava.","body":"This most likely happens because you are <i>running</i> your code with a different version of Google Guava than what you <i>compiled</i> it with, or because you are using a version of Google Guava that is incompatible with some other library (such as the Datastax driver). Make sure you use the correct version of Google Guava."}],"owner":{"account_id":24924440,"reputation":11,"user_id":18792391,"display_name":"Madhuri_2022"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":177,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1664899526,"creation_date":1664875441,"question_id":73945733,"body_markdown":"I am getting the below error:\r\n    \r\n    java.lang.NoSuchMethodError:\r\n    com.google.common.base.Objects.firstNonNull(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;\r\n    \tat com.datastax.driver.core.policies.Policies$Builder.build(Policies.java:285)\r\n    \tat com.datastax.driver.core.Cluster$Builder.getConfiguration(Cluster.java:1246)\r\n    \r\nThis is happening while trying to connect to Cassandra from java code.  I am able to connect in a different repo with some set of drivers.  But in an automation code base of Selenium I am getting this exception.\r\n\r\nPlease can you suggest if something else is missng which is causing this issue.\r\n    \r\nIts failing at this step:\r\n    \r\n    cluster = Cluster.builder().addContactPoint(&quot;connection_Details&quot;).withPort(9042)\r\n              .withCredentials(&quot;username&quot;, &quot;password&quot;).withSSL().withSocketOptions(new SocketOptions().setConnectTimeoutMillis(2000)).build();\r\n\r\nBelow is my Ivy file:\r\n    \r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;ISO-8859-1&quot;?&gt; &lt;ivy-module\r\n    version=&quot;2.0&quot; \txmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n    \txsi:noNamespaceSchemaLocation=&quot;http://ant.apache.org/ivy/schemas/ivy.xsd&quot;&gt;\r\n    \t&lt;info organisation=&quot;com.jcp.transformer&quot; module=&quot;Transformer&quot;\r\n    status=&quot;integration&quot;&gt; \t&lt;/info&gt;\r\n    \r\n    \t&lt;dependencies&gt; \t\t&lt;!--&lt;dependency org=&quot;io.appium&quot; name=&quot;java-client&quot;\r\n    rev=&quot;4.1.2&quot; /&gt;--&gt; \t\t&lt;dependency org=&quot;io.appium&quot; name=&quot;java-client&quot;\r\n    rev=&quot;6.1.0&quot;&gt; \t\t\t&lt;artifact name=&quot;java-client&quot; type=&quot;jar&quot;&gt;&lt;/artifact&gt;\r\n    \t\t\t&lt;exclude org=&quot;org.slf4j&quot; module=&quot;slf4j-jdk14&quot;/&gt;\r\n    \t\t \t&lt;exclude org=&quot;org.slf4j&quot; module=&quot;slf4j-log4j12&quot;/&gt;\r\n    \t\t \t&lt;exclude org=&quot;ch.qos.logback&quot; module=&quot;logback-classic&quot;/&gt; \t\t&lt;/dependency&gt; \t\t&lt;!--\r\n    https://mvnrepository.com/artifact/com.google.guava/guava --&gt;\r\n    &lt;dependency org=&quot;com.google.guava&quot; name=&quot;guava&quot; rev=&quot;19.0&quot;/&gt;\r\n    \r\n    \t\t&lt;dependency org=&quot;org.aspectj&quot; name=&quot;aspectjtools&quot; rev=&quot;1.9.1&quot;&gt;\r\n    \t\t\t&lt;artifact name=&quot;aspectjtools&quot; type=&quot;jar&quot;&gt;&lt;/artifact&gt;\r\n    \t\t&lt;/dependency&gt;  \t\t&lt;dependency org=&quot;org.aspectj&quot;\r\n    name=&quot;aspectjweaver&quot; rev=&quot;1.9.1&quot; /&gt; \t\t&lt;dependency\r\n    org=&quot;org.seleniumhq.selenium&quot; name=&quot;selenium-remote-driver&quot;\r\n    \t\t\trev=&quot;3.7.1&quot; /&gt; \t\t&lt;dependency org=&quot;org.seleniumhq.selenium&quot;\r\n    name=&quot;selenium-java&quot; \t\t\trev=&quot;3.7.1&quot; /&gt; \t\t&lt;dependency\r\n    org=&quot;org.seleniumhq.selenium&quot; name=&quot;selenium-support&quot; rev=&quot;3.0.0&quot;\r\n    force=&quot;true&quot;/&gt; \t\t&lt;dependency org=&quot;com.google.guava&quot; name=&quot;guava&quot;\r\n    rev=&quot;19.0&quot; /&gt; \t\t&lt;dependency org=&quot;org.imgscalr&quot; name=&quot;imgscalr-lib&quot;\r\n    rev=&quot;4.2&quot; /&gt; \t\t&lt;dependency org=&quot;com.madgag&quot; name=&quot;animated-gif-lib&quot;\r\n    rev=&quot;1.2&quot; /&gt; \t\t&lt;dependency org=&quot;com.github.fge&quot;\r\n    name=&quot;json-schema-validator&quot; \t\t\trev=&quot;2.2.6&quot; /&gt; \t\t&lt;dependency\r\n    org=&quot;com.jayway.restassured&quot; name=&quot;rest-assured&quot; \t\t\trev=&quot;2.4.1&quot; /&gt;\r\n    \t\t&lt;dependency org=&quot;com.jayway.restassured&quot;\r\n    name=&quot;json-schema-validator&quot; \t\t\trev=&quot;2.1.0&quot; /&gt; \t\t&lt;dependency\r\n    org=&quot;ant-contrib&quot; name=&quot;ant-contrib&quot; rev=&quot;1.0b3&quot;/&gt; \t\t&lt;dependency\r\n    org=&quot;javax.mail&quot; name=&quot;mail&quot; rev=&quot;1.4.7&quot;/&gt; \t\t&lt;dependency\r\n    org=&quot;net.sourceforge.htmlunit&quot; name=&quot;htmlunit&quot; rev=&quot;2.12&quot;/&gt;\r\n    \t\t&lt;dependency org=&quot;com.jayway.jsonpath&quot; name=&quot;json-path&quot; rev=&quot;1.1.0&quot;\r\n    /&gt; \t\t&lt;dependency org=&quot;com.jayway.jsonpath&quot; name=&quot;json-path-assert&quot;\r\n    \t\t\trev=&quot;1.1.0&quot; /&gt; \t\t&lt;dependency org=&quot;com.saucelabs&quot; name=&quot;saucerest&quot;\r\n    rev=&quot;1.0.35&quot;/&gt; \t\t&lt;dependency org=&quot;com.tibco&quot; name=&quot;tibjms&quot;\r\n    rev=&quot;6.0.1&quot; force=&quot;true&quot; changing=&quot;true&quot;&gt;\r\n    \t\t  &lt;artifact name=&quot;tibjms&quot; type=&quot;jar&quot;&gt; &lt;/artifact&gt; \t\t&lt;/dependency&gt; \t\t&lt;dependency org=&quot;com.jcpenney&quot; name=&quot;transformer&quot; rev=&quot;3.1.5&quot;&gt;\r\n    \t\t  &lt;artifact name=&quot;transformer&quot; type=&quot;jar&quot;&gt; &lt;/artifact&gt;\r\n    \t\t  &lt;/dependency&gt;  \t\t&lt;dependency org=&quot;com.sun.jersey&quot; name=&quot;jersey-client&quot; rev=&quot;1.11&quot;  /&gt; \t\t&lt;dependency\r\n    org=&quot;com.sun.jersey&quot; name=&quot;jersey-core&quot; rev=&quot;1.11&quot;&gt; \t\t\t&lt;exclude\r\n    name=&quot;mail&quot; type=&quot;jar&quot; /&gt; \t\t&lt;/dependency&gt; \t\t\t&lt;dependency\r\n    org=&quot;com.datastax.cassandra&quot; name=&quot;cassandra-driver-core&quot;\r\n    rev=&quot;3.0.0&quot;/&gt; \t\t&lt;dependency org=&quot;com.datastax.cassandra&quot;\r\n    name=&quot;cassandra-driver-mapping&quot; rev=&quot;3.0.0&quot;/&gt; \t\t&lt;dependency\r\n    org=&quot;com.sun.jersey.contribs&quot; name=&quot;jersey-apache-client&quot;\r\n    \t\t\trev=&quot;1.17.1&quot;/&gt;\r\n              &lt;dependency org=&quot;org.testng&quot; name=&quot;testng&quot; rev=&quot;6.9.10&quot;&gt; \t\t\t&lt;artifact name=&quot;testng&quot; type=&quot;jar&quot;&gt;&lt;/artifact&gt; \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency org=&quot;net.sourceforge.jexcelapi&quot; name=&quot;jxl&quot;\r\n    rev=&quot;2.6.12&quot; &gt; \t\t\t&lt;artifact name=&quot;jxl&quot; type=&quot;jar&quot;&gt;&lt;/artifact&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t \t\t&lt;dependency org=&quot;commons-codec&quot; name=&quot;commons-codec&quot; rev=&quot;1.8&quot; /&gt; \t\t&lt;dependency org=&quot;commons-configuration&quot;\r\n    name=&quot;commons-configuration&quot; \t\t\trev=&quot;1.7&quot; /&gt; \t\t\t&lt;dependency\r\n    org=&quot;commons-io&quot; name=&quot;commons-io&quot; rev=&quot;2.5&quot;/&gt; \t\t&lt;dependency\r\n    org=&quot;com.jayway.jsonpath&quot; name=&quot;json-path&quot; rev=&quot;0.8.1&quot; /&gt; \r\n    \t\t&lt;dependency org=&quot;com.jayway.jsonpath&quot; name=&quot;json-path-assert&quot;\r\n    \t\t\trev=&quot;0.8.1&quot; /&gt;\r\n    \t\t\t \t\t\t&lt;dependency org=&quot;org.json&quot; name=&quot;json&quot; rev=&quot;20160810&quot;/&gt; \t\t&lt;dependency org=&quot;sshtools&quot; name=&quot;j2ssh-core&quot; rev=&quot;0.2.9&quot; /&gt;\r\n    \t\t&lt;dependency org=&quot;org.apache.activemq&quot; name=&quot;activemq-all&quot;\r\n    rev=&quot;5.14.2&quot; force=&quot;true&quot; changing=&quot;true&quot;&gt;\r\n    \t\t  &lt;artifact name=&quot;activemq-all&quot; type=&quot;jar&quot;&gt; &lt;/artifact&gt;\t\t \t\t&lt;/dependency&gt;  \t\t&lt;dependency org=&quot;com.google.code.gson&quot;\r\n    name=&quot;gson&quot; rev=&quot;2.1&quot;&gt; \t\t\t&lt;artifact name=&quot;gson&quot;\r\n    type=&quot;jar&quot;&gt;&lt;/artifact&gt; \t\t&lt;/dependency&gt;\r\n    \t\t\t\t&lt;dependency org=&quot;org.skyscreamer&quot; name=&quot;jsonassert&quot; rev=&quot;1.4.0&quot;/&gt; \t\t&lt;dependency org=&quot;com.jayway.jsonpath&quot;\r\n    name=&quot;json-path&quot; rev=&quot;2.2.0&quot;/&gt; \t\t&lt;dependency org=&quot;net.lightbody.bmp&quot;\r\n    name=&quot;browsermob-proxy&quot; rev=&quot;2.0.0&quot;/&gt; \t\t&lt;dependency\r\n    org=&quot;io.rest-assured&quot; name=&quot;rest-assured&quot; rev=&quot;3.0.0&quot;/&gt;\r\n    \t\t&lt;dependency org=&quot;io.rest-assured&quot; name=&quot;json-path&quot; rev=&quot;3.0.0&quot;/&gt;\r\n    \t\t&lt;dependency org=&quot;io.rest-assured&quot; name=&quot;json-schema-validator&quot;\r\n    rev=&quot;3.0.0&quot;/&gt; \t\t&lt;dependency org=&quot;oracle&quot; name=&quot;ojdbc7&quot; force=&quot;true&quot;\r\n    rev=&quot;&quot; changing=&quot;true&quot;&gt;\r\n    \t\t  &lt;artifact name=&quot;ojdbc7&quot; type=&quot;jar&quot;&gt; &lt;/artifact&gt; \t\t&lt;/dependency&gt; \t\t&lt;dependency org=&quot;com.mysql.jdbc&quot; name=&quot;jdbc&quot; force=&quot;true&quot; rev=&quot;&quot;\r\n    changing=&quot;true&quot;&gt;\r\n    \t\t  &lt;artifact name=&quot;jdbc&quot; type=&quot;jar&quot;&gt; &lt;/artifact&gt; \t\t&lt;/dependency&gt; \t\t&lt;dependency org=&quot;com.microsoft.sqlserver&quot; name=&quot;mssql-jdbc&quot;\r\n    rev=&#39;7.0.0.jre8&#39;/&gt; \t\t&lt;dependency org=&quot;oracle.xdb&quot; name=&quot;oracle.xdb&quot;\r\n    force=&quot;true&quot; rev=&quot;&quot; changing=&quot;true&quot;&gt;\r\n    \t\t  &lt;artifact name=&quot;oracle.xdb_12.1.0&quot; type=&quot;jar&quot;&gt; &lt;/artifact&gt; \t\t&lt;/dependency&gt; \t\t&lt;dependency org=&quot;org.projectlombok&quot; name=&quot;lombok&quot;\r\n    rev=&quot;1.18.2&quot;/&gt; \t\t&lt;dependency org=&quot;io.netty&quot; name=&quot;netty-tcnative&quot;\r\n    rev=&quot;2.0.0.Final&quot;/&gt; \t\t&lt;dependency org=&quot;org.postgresql&quot;\r\n    name=&quot;postgresql&quot; rev=&quot;42.2.2&quot;/&gt; \t\t &lt;dependency\r\n    org=&quot;com.teradata.jdbc&quot; name=&quot;terajdbc4&quot; rev=&quot;14.00.00.21&quot;/&gt; \t\t\r\n    &lt;dependency org=&quot;com.teradata.jdbc&quot; name=&quot;tdgssconfig&quot;\r\n    rev=&quot;14.00.00.21&quot;/&gt; \t&lt;/dependencies&gt; &lt;/ivy-module&gt;\r\n","title":"java.lang.NoSuchMethodError when connecting to Cassandra with Selenium","body":"<p>I am getting the below error:</p>\n<pre><code>java.lang.NoSuchMethodError:\ncom.google.common.base.Objects.firstNonNull(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;\n    at com.datastax.driver.core.policies.Policies$Builder.build(Policies.java:285)\n    at com.datastax.driver.core.Cluster$Builder.getConfiguration(Cluster.java:1246)\n</code></pre>\n<p>This is happening while trying to connect to Cassandra from java code.  I am able to connect in a different repo with some set of drivers.  But in an automation code base of Selenium I am getting this exception.</p>\n<p>Please can you suggest if something else is missng which is causing this issue.</p>\n<p>Its failing at this step:</p>\n<pre><code>cluster = Cluster.builder().addContactPoint(&quot;connection_Details&quot;).withPort(9042)\n          .withCredentials(&quot;username&quot;, &quot;password&quot;).withSSL().withSocketOptions(new SocketOptions().setConnectTimeoutMillis(2000)).build();\n</code></pre>\n<p>Below is my Ivy file:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;ISO-8859-1&quot;?&gt; &lt;ivy-module\nversion=&quot;2.0&quot;   xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:noNamespaceSchemaLocation=&quot;http://ant.apache.org/ivy/schemas/ivy.xsd&quot;&gt;\n    &lt;info organisation=&quot;com.jcp.transformer&quot; module=&quot;Transformer&quot;\nstatus=&quot;integration&quot;&gt;   &lt;/info&gt;\n\n    &lt;dependencies&gt;      &lt;!--&lt;dependency org=&quot;io.appium&quot; name=&quot;java-client&quot;\nrev=&quot;4.1.2&quot; /&gt;--&gt;       &lt;dependency org=&quot;io.appium&quot; name=&quot;java-client&quot;\nrev=&quot;6.1.0&quot;&gt;            &lt;artifact name=&quot;java-client&quot; type=&quot;jar&quot;&gt;&lt;/artifact&gt;\n            &lt;exclude org=&quot;org.slf4j&quot; module=&quot;slf4j-jdk14&quot;/&gt;\n            &lt;exclude org=&quot;org.slf4j&quot; module=&quot;slf4j-log4j12&quot;/&gt;\n            &lt;exclude org=&quot;ch.qos.logback&quot; module=&quot;logback-classic&quot;/&gt;        &lt;/dependency&gt;       &lt;!--\nhttps://mvnrepository.com/artifact/com.google.guava/guava --&gt;\n&lt;dependency org=&quot;com.google.guava&quot; name=&quot;guava&quot; rev=&quot;19.0&quot;/&gt;\n\n        &lt;dependency org=&quot;org.aspectj&quot; name=&quot;aspectjtools&quot; rev=&quot;1.9.1&quot;&gt;\n            &lt;artifact name=&quot;aspectjtools&quot; type=&quot;jar&quot;&gt;&lt;/artifact&gt;\n        &lt;/dependency&gt;       &lt;dependency org=&quot;org.aspectj&quot;\nname=&quot;aspectjweaver&quot; rev=&quot;1.9.1&quot; /&gt;         &lt;dependency\norg=&quot;org.seleniumhq.selenium&quot; name=&quot;selenium-remote-driver&quot;\n            rev=&quot;3.7.1&quot; /&gt;      &lt;dependency org=&quot;org.seleniumhq.selenium&quot;\nname=&quot;selenium-java&quot;            rev=&quot;3.7.1&quot; /&gt;      &lt;dependency\norg=&quot;org.seleniumhq.selenium&quot; name=&quot;selenium-support&quot; rev=&quot;3.0.0&quot;\nforce=&quot;true&quot;/&gt;      &lt;dependency org=&quot;com.google.guava&quot; name=&quot;guava&quot;\nrev=&quot;19.0&quot; /&gt;       &lt;dependency org=&quot;org.imgscalr&quot; name=&quot;imgscalr-lib&quot;\nrev=&quot;4.2&quot; /&gt;        &lt;dependency org=&quot;com.madgag&quot; name=&quot;animated-gif-lib&quot;\nrev=&quot;1.2&quot; /&gt;        &lt;dependency org=&quot;com.github.fge&quot;\nname=&quot;json-schema-validator&quot;            rev=&quot;2.2.6&quot; /&gt;      &lt;dependency\norg=&quot;com.jayway.restassured&quot; name=&quot;rest-assured&quot;            rev=&quot;2.4.1&quot; /&gt;\n        &lt;dependency org=&quot;com.jayway.restassured&quot;\nname=&quot;json-schema-validator&quot;            rev=&quot;2.1.0&quot; /&gt;      &lt;dependency\norg=&quot;ant-contrib&quot; name=&quot;ant-contrib&quot; rev=&quot;1.0b3&quot;/&gt;      &lt;dependency\norg=&quot;javax.mail&quot; name=&quot;mail&quot; rev=&quot;1.4.7&quot;/&gt;      &lt;dependency\norg=&quot;net.sourceforge.htmlunit&quot; name=&quot;htmlunit&quot; rev=&quot;2.12&quot;/&gt;\n        &lt;dependency org=&quot;com.jayway.jsonpath&quot; name=&quot;json-path&quot; rev=&quot;1.1.0&quot;\n/&gt;      &lt;dependency org=&quot;com.jayway.jsonpath&quot; name=&quot;json-path-assert&quot;\n            rev=&quot;1.1.0&quot; /&gt;      &lt;dependency org=&quot;com.saucelabs&quot; name=&quot;saucerest&quot;\nrev=&quot;1.0.35&quot;/&gt;      &lt;dependency org=&quot;com.tibco&quot; name=&quot;tibjms&quot;\nrev=&quot;6.0.1&quot; force=&quot;true&quot; changing=&quot;true&quot;&gt;\n          &lt;artifact name=&quot;tibjms&quot; type=&quot;jar&quot;&gt; &lt;/artifact&gt;       &lt;/dependency&gt;       &lt;dependency org=&quot;com.jcpenney&quot; name=&quot;transformer&quot; rev=&quot;3.1.5&quot;&gt;\n          &lt;artifact name=&quot;transformer&quot; type=&quot;jar&quot;&gt; &lt;/artifact&gt;\n          &lt;/dependency&gt;         &lt;dependency org=&quot;com.sun.jersey&quot; name=&quot;jersey-client&quot; rev=&quot;1.11&quot;  /&gt;        &lt;dependency\norg=&quot;com.sun.jersey&quot; name=&quot;jersey-core&quot; rev=&quot;1.11&quot;&gt;             &lt;exclude\nname=&quot;mail&quot; type=&quot;jar&quot; /&gt;       &lt;/dependency&gt;           &lt;dependency\norg=&quot;com.datastax.cassandra&quot; name=&quot;cassandra-driver-core&quot;\nrev=&quot;3.0.0&quot;/&gt;       &lt;dependency org=&quot;com.datastax.cassandra&quot;\nname=&quot;cassandra-driver-mapping&quot; rev=&quot;3.0.0&quot;/&gt;       &lt;dependency\norg=&quot;com.sun.jersey.contribs&quot; name=&quot;jersey-apache-client&quot;\n            rev=&quot;1.17.1&quot;/&gt;\n          &lt;dependency org=&quot;org.testng&quot; name=&quot;testng&quot; rev=&quot;6.9.10&quot;&gt;          &lt;artifact name=&quot;testng&quot; type=&quot;jar&quot;&gt;&lt;/artifact&gt;      &lt;/dependency&gt;\n        &lt;dependency org=&quot;net.sourceforge.jexcelapi&quot; name=&quot;jxl&quot;\nrev=&quot;2.6.12&quot; &gt;          &lt;artifact name=&quot;jxl&quot; type=&quot;jar&quot;&gt;&lt;/artifact&gt;\n        &lt;/dependency&gt;\n                &lt;dependency org=&quot;commons-codec&quot; name=&quot;commons-codec&quot; rev=&quot;1.8&quot; /&gt;       &lt;dependency org=&quot;commons-configuration&quot;\nname=&quot;commons-configuration&quot;            rev=&quot;1.7&quot; /&gt;            &lt;dependency\norg=&quot;commons-io&quot; name=&quot;commons-io&quot; rev=&quot;2.5&quot;/&gt;      &lt;dependency\norg=&quot;com.jayway.jsonpath&quot; name=&quot;json-path&quot; rev=&quot;0.8.1&quot; /&gt; \n        &lt;dependency org=&quot;com.jayway.jsonpath&quot; name=&quot;json-path-assert&quot;\n            rev=&quot;0.8.1&quot; /&gt;\n                        &lt;dependency org=&quot;org.json&quot; name=&quot;json&quot; rev=&quot;20160810&quot;/&gt;         &lt;dependency org=&quot;sshtools&quot; name=&quot;j2ssh-core&quot; rev=&quot;0.2.9&quot; /&gt;\n        &lt;dependency org=&quot;org.apache.activemq&quot; name=&quot;activemq-all&quot;\nrev=&quot;5.14.2&quot; force=&quot;true&quot; changing=&quot;true&quot;&gt;\n          &lt;artifact name=&quot;activemq-all&quot; type=&quot;jar&quot;&gt; &lt;/artifact&gt;             &lt;/dependency&gt;       &lt;dependency org=&quot;com.google.code.gson&quot;\nname=&quot;gson&quot; rev=&quot;2.1&quot;&gt;          &lt;artifact name=&quot;gson&quot;\ntype=&quot;jar&quot;&gt;&lt;/artifact&gt;      &lt;/dependency&gt;\n                &lt;dependency org=&quot;org.skyscreamer&quot; name=&quot;jsonassert&quot; rev=&quot;1.4.0&quot;/&gt;       &lt;dependency org=&quot;com.jayway.jsonpath&quot;\nname=&quot;json-path&quot; rev=&quot;2.2.0&quot;/&gt;      &lt;dependency org=&quot;net.lightbody.bmp&quot;\nname=&quot;browsermob-proxy&quot; rev=&quot;2.0.0&quot;/&gt;       &lt;dependency\norg=&quot;io.rest-assured&quot; name=&quot;rest-assured&quot; rev=&quot;3.0.0&quot;/&gt;\n        &lt;dependency org=&quot;io.rest-assured&quot; name=&quot;json-path&quot; rev=&quot;3.0.0&quot;/&gt;\n        &lt;dependency org=&quot;io.rest-assured&quot; name=&quot;json-schema-validator&quot;\nrev=&quot;3.0.0&quot;/&gt;       &lt;dependency org=&quot;oracle&quot; name=&quot;ojdbc7&quot; force=&quot;true&quot;\nrev=&quot;&quot; changing=&quot;true&quot;&gt;\n          &lt;artifact name=&quot;ojdbc7&quot; type=&quot;jar&quot;&gt; &lt;/artifact&gt;       &lt;/dependency&gt;       &lt;dependency org=&quot;com.mysql.jdbc&quot; name=&quot;jdbc&quot; force=&quot;true&quot; rev=&quot;&quot;\nchanging=&quot;true&quot;&gt;\n          &lt;artifact name=&quot;jdbc&quot; type=&quot;jar&quot;&gt; &lt;/artifact&gt;         &lt;/dependency&gt;       &lt;dependency org=&quot;com.microsoft.sqlserver&quot; name=&quot;mssql-jdbc&quot;\nrev='7.0.0.jre8'/&gt;      &lt;dependency org=&quot;oracle.xdb&quot; name=&quot;oracle.xdb&quot;\nforce=&quot;true&quot; rev=&quot;&quot; changing=&quot;true&quot;&gt;\n          &lt;artifact name=&quot;oracle.xdb_12.1.0&quot; type=&quot;jar&quot;&gt; &lt;/artifact&gt;        &lt;/dependency&gt;       &lt;dependency org=&quot;org.projectlombok&quot; name=&quot;lombok&quot;\nrev=&quot;1.18.2&quot;/&gt;      &lt;dependency org=&quot;io.netty&quot; name=&quot;netty-tcnative&quot;\nrev=&quot;2.0.0.Final&quot;/&gt;         &lt;dependency org=&quot;org.postgresql&quot;\nname=&quot;postgresql&quot; rev=&quot;42.2.2&quot;/&gt;         &lt;dependency\norg=&quot;com.teradata.jdbc&quot; name=&quot;terajdbc4&quot; rev=&quot;14.00.00.21&quot;/&gt;        \n&lt;dependency org=&quot;com.teradata.jdbc&quot; name=&quot;tdgssconfig&quot;\nrev=&quot;14.00.00.21&quot;/&gt;     &lt;/dependencies&gt; &lt;/ivy-module&gt;\n</code></pre>\n"},{"tags":["java","java.util.scanner"],"comments":[{"owner":{"account_id":295883,"reputation":744,"user_id":600517,"accept_rate":71,"display_name":"Chip McCormick"},"score":2,"creation_date":1323663723,"post_id":8469882,"comment_id":10475576,"body_markdown":"Yes, that is a valid approach. I&#39;m not aware of a better way to do that. It would be more usable I think if you used nextString() and read them all in as a single line and parsed them","body":"Yes, that is a valid approach. I&#39;m not aware of a better way to do that. It would be more usable I think if you used nextString() and read them all in as a single line and parsed them"},{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":6,"creation_date":1323664015,"post_id":8469882,"comment_id":10475623,"body_markdown":"The main &quot;gotcha&quot; that I have to warn you about when using Scanner is that you have to be careful handling the End Of Line (EOL) token. The `nextInt()` method does not deal with the EOL token, while `nextLine()` does. There may be some times when you&#39;ll need to call `nextLine()` without saving the input just to handle the EOL token. It&#39;s not an issue in your current code, and there&#39;s no need to change it just yet.","body":"The main &quot;gotcha&quot; that I have to warn you about when using Scanner is that you have to be careful handling the End Of Line (EOL) token. The <code>nextInt()</code> method does not deal with the EOL token, while <code>nextLine()</code> does. There may be some times when you&#39;ll need to call <code>nextLine()</code> without saving the input just to handle the EOL token. It&#39;s not an issue in your current code, and there&#39;s no need to change it just yet."}],"answers":[{"tags":[],"owner":{"account_id":295168,"reputation":12465,"user_id":599436,"accept_rate":100,"display_name":"Jon Egeland"},"down_vote_count":0,"up_vote_count":17,"is_accepted":true,"score":17,"last_activity_date":1323663759,"creation_date":1323663759,"answer_id":8469902,"question_id":8469882,"body_markdown":"If every input asks the same question, you should use a `for` loop and an array of inputs:\r\n\r\n    Scanner dd = new Scanner(System.in);\r\n    int[] vars = new int[3];\r\n\r\n    for(int i = 0; i &lt; vars.length; i++) {\r\n      System.out.println(&quot;Enter next var: &quot;);\r\n      vars[i] = dd.nextInt();\r\n    }\r\n\r\nOr as Chip suggested, you can parse the input from one line:\r\n\r\n    Scanner in = new Scanner(System.in);\r\n    int[] vars = new int[3];\r\n\r\n    System.out.println(&quot;Enter &quot;+vars.length+&quot; vars: &quot;);\r\n    for(int i = 0; i &lt; vars.length; i++)\r\n      vars[i] = in.nextInt();\r\n\r\nYou were on the right track, and what you did works. This is just a nicer and more flexible way of doing things.","title":"Assigning multiple inputs to multiple variables using Scanner","body":"<p>If every input asks the same question, you should use a <code>for</code> loop and an array of inputs:</p>\n\n<pre><code>Scanner dd = new Scanner(System.in);\nint[] vars = new int[3];\n\nfor(int i = 0; i &lt; vars.length; i++) {\n  System.out.println(\"Enter next var: \");\n  vars[i] = dd.nextInt();\n}\n</code></pre>\n\n<p>Or as Chip suggested, you can parse the input from one line:</p>\n\n<pre><code>Scanner in = new Scanner(System.in);\nint[] vars = new int[3];\n\nSystem.out.println(\"Enter \"+vars.length+\" vars: \");\nfor(int i = 0; i &lt; vars.length; i++)\n  vars[i] = in.nextInt();\n</code></pre>\n\n<p>You were on the right track, and what you did works. This is just a nicer and more flexible way of doing things.</p>\n"}],"owner":{"account_id":991870,"reputation":381,"user_id":1008918,"accept_rate":96,"display_name":"John"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":185447,"favorite_count":0,"down_vote_count":1,"up_vote_count":11,"accepted_answer_id":8469902,"answer_count":1,"score":10,"last_activity_date":1664899485,"creation_date":1323663541,"question_id":8469882,"body_markdown":"What I am trying to do is have multiple inputs that all have different variables. Each variable will be part of different equations. I am looking for a way to do this, and I think I have an idea. I just want to know if this would be legal, and if there is a better way to do this.\r\n\r\n    import java.util.*;\r\n\r\n    public class Example{\r\n\t\r\n\tpublic static void main(String args[]){\r\n\t\t\r\n\t\tScanner dd = new Scanner(System.in);\r\n\t\t\r\n\t\tSystem.out.println(&quot;Enter number.&quot;);\r\n\t\tint a = dd.nextInt();\r\n\t\tSystem.out.println(&quot;Enter number.&quot;);\r\n\t\tint b = dd.nextInt();\r\n\t\tSystem.out.println(&quot;Enter number.&quot;);\r\n\t\tint c = dd.nextInt();\r\n\t  }\r\n    }\r\n","title":"Assigning multiple inputs to multiple variables using Scanner","body":"<p>What I am trying to do is have multiple inputs that all have different variables. Each variable will be part of different equations. I am looking for a way to do this, and I think I have an idea. I just want to know if this would be legal, and if there is a better way to do this.</p>\n<pre><code>import java.util.*;\n\npublic class Example{\n\npublic static void main(String args[]){\n    \n    Scanner dd = new Scanner(System.in);\n    \n    System.out.println(&quot;Enter number.&quot;);\n    int a = dd.nextInt();\n    System.out.println(&quot;Enter number.&quot;);\n    int b = dd.nextInt();\n    System.out.println(&quot;Enter number.&quot;);\n    int c = dd.nextInt();\n  }\n}\n</code></pre>\n"},{"tags":["java","oop","inheritance","polymorphism","instanceof"],"comments":[{"owner":{"account_id":1357786,"reputation":433,"user_id":1295826,"display_name":"Marco"},"score":0,"creation_date":1663865540,"post_id":6304056,"comment_id":130345559,"body_markdown":"By just compiling and executing your code you would have got the answer, at least to the first question.","body":"By just compiling and executing your code you would have got the answer, at least to the first question."},{"owner":{"account_id":221256,"reputation":1854,"user_id":479129,"accept_rate":97,"display_name":"ikbal"},"score":0,"creation_date":1664898981,"post_id":6304056,"comment_id":130573215,"body_markdown":"Of course. I think it was a rhetorical question as I was trying to make sense of type hierarchy in Java long time ago. I also wanted to invoke a good answer that could help the community.While it&#39;s obvious that Child is a subtype of Parent, it was questionable for me why it would also be an instance of it. To me it was only logical this to return true when it was the exact type. I would also expect a more explicit operator such as subtypeOf in that time","body":"Of course. I think it was a rhetorical question as I was trying to make sense of type hierarchy in Java long time ago. I also wanted to invoke a good answer that could help the community.While it&#39;s obvious that Child is a subtype of Parent, it was questionable for me why it would also be an instance of it. To me it was only logical this to return true when it was the exact type. I would also expect a more explicit operator such as subtypeOf in that time"}],"answers":[{"tags":[],"owner":{"account_id":151367,"reputation":13401,"user_id":365188,"accept_rate":94,"display_name":"Ozair Kafray"},"down_vote_count":0,"up_vote_count":74,"is_accepted":true,"score":74,"last_activity_date":1645787872,"creation_date":1307696131,"answer_id":6304115,"question_id":6304056,"body_markdown":"[Yes][1], it would. And why should it not?\r\n\r\nBecause child is in fact an instance of Parent. If, you want to perform an operation only for a child you should check \r\n\r\n    if (child instanceof Child){\r\n    }\r\n\r\nHowever you should remember the following statement from Effective C++, by Scott Meyers :\r\n\r\n&gt; &quot;Anytime you find yourself writing\r\n&gt; code of the form &quot;if the object is of\r\n&gt; type T1, then do something, but if\r\n&gt; it&#39;s of type T2, then do something\r\n&gt; else,&quot; slap yourself.\r\n\r\nwhich I think applies in this case too. If you want to *doSomething* based on what type of class the referenced object belongs to, the following code structure should help you with it. \r\n\r\n**NOTE:** I have not compiled it. \r\n\r\n    class Parent {\r\n        public void doSomething() {\r\n            System.out.println(&quot;I am the Parent, and I do as I like&quot;);\r\n        }\r\n    }\r\n     \r\n    class ChildA extends Parent {\r\n        public void doSomething() {\r\n            System.out.println(&quot;I am a child named A, but I have my own ways, different from Parent&quot;);\r\n        }\r\n    }\r\n     \r\n    class ChildB extends Parent {\r\n        public void doSomething() {\r\n            System.out.println(&quot;I am a child named B, but I have my own ways, different from my Parent and my siblings&quot;);\r\n        }\r\n    }\r\n     \r\n    public class Polymorphism101 {\r\n     \r\n        public static void main(String[] args) {\r\n     \r\n            Parent p = new Parent();\r\n            p.doSomething();\r\n     \r\n            p = new ChildA();\r\n            p.doSomething();\r\n     \r\n            p = new ChildB();\r\n            p.doSomething();\r\n     \r\n        }\r\n     \r\n    }\r\n\r\n**EDIT: A better example**\r\n\r\nYou could be developing a *drawing* application. An application that draws shapes of any kind. In that case, you should have an *abstract* type `Shape`. \r\n\r\nFor purpose(s) like; drawing all shapes; list all shapes; find a shape or delete a shape, you need to have a *list* of Shapes. Since the list is of a parent type, it can store any shapes.\r\n\r\nThe `Shape` *interface/abstract class/virtual class* should have an *abstract/pure virtual* function `Draw()`. So, in your DrawToDeviceLoop, you just call `Draw()` for each shape, you never need to check what shape it is.\r\n\r\nThe `Shape` interface can have an *abstract* implementation `AbstractShape`, which can have shape name or id as data members and GetName, Cleanup and other functions with functionality common to all shapes.\r\n\r\nRemember an abstract type **cannot** be instantiated, so `Shape` itself cannot be instantiated, as it cannot be drawn either.\r\n\r\n**EDIT 2: Polymorphism and Exception Handling** - [user1955934][2] asked &quot;What about checking for exception class&quot; For exception handling the best practices with respect to polymorphism are:\r\n 1. Prefer (to throw) specific exception - For example throw a NumberFormatException instead of IllegalArgumentException\r\n 2. Catch the most specific exception first - For example, if you catch an IllegalArgumentException first, you will never reach the catch block that should handle the more specific NumberFormatException because its a subclass of the IllegalArgumentException.\r\n\r\nSo, its principally the same, if an exception needs to be handled differently, a child/specific class should be defined, and the specific exception should be *caught* (not checked instanceof)\r\n\r\nTo know more best practices on exception handling. See [9 Best practices to handle exception in Java][3] and [Best practices for exceptions (C#)][4]\r\n\r\n**EDIT 3: I admit to an exception in this rule**\r\n\r\nSo, I am working with a legacy code (written in C++), which has mostly been written about 15 years ago, where they always check for the child class to perform certain actions. I was asked to add some code with the same logic, and I told my manager (he is a Dev too) I cannot do this, pointing to this answer, and then we discussed and accepted to this exception to the rule. In our case, this parent class has had just 2 children since the year 2000, and we do not see any child being added in the near future, with the core code limited for growth, we decided that with no addition to child classes and current number being just 2, it is more efficient to check for type, especially when that is how the code has been written, since ever. \r\n\r\nThere aren&#39;t many instances of this check too though, the parent implements the complicated functionalities mostly and it exists more for sharing code then specializing/differentiating them.\r\n\r\n  [1]: http://www.java2s.com/Tutorial/Java/0060__Operators/TheinstanceofKeyword.htm\r\n  [2]: https://stackoverflow.com/users/1955934\r\n  [3]: https://dzone.com/articles/9-best-practices-to-handle-exceptions-in-java\r\n  [4]: https://learn.microsoft.com/en-us/dotnet/standard/exceptions/best-practices-for-exceptions","title":"Does instanceof return true if instance of a parent?","body":"<p><a href=\"http://www.java2s.com/Tutorial/Java/0060__Operators/TheinstanceofKeyword.htm\" rel=\"noreferrer\">Yes</a>, it would. And why should it not?</p>\n<p>Because child is in fact an instance of Parent. If, you want to perform an operation only for a child you should check</p>\n<pre><code>if (child instanceof Child){\n}\n</code></pre>\n<p>However you should remember the following statement from Effective C++, by Scott Meyers :</p>\n<blockquote>\n<p>&quot;Anytime you find yourself writing\ncode of the form &quot;if the object is of\ntype T1, then do something, but if\nit's of type T2, then do something\nelse,&quot; slap yourself.</p>\n</blockquote>\n<p>which I think applies in this case too. If you want to <em>doSomething</em> based on what type of class the referenced object belongs to, the following code structure should help you with it.</p>\n<p><strong>NOTE:</strong> I have not compiled it.</p>\n<pre><code>class Parent {\n    public void doSomething() {\n        System.out.println(&quot;I am the Parent, and I do as I like&quot;);\n    }\n}\n \nclass ChildA extends Parent {\n    public void doSomething() {\n        System.out.println(&quot;I am a child named A, but I have my own ways, different from Parent&quot;);\n    }\n}\n \nclass ChildB extends Parent {\n    public void doSomething() {\n        System.out.println(&quot;I am a child named B, but I have my own ways, different from my Parent and my siblings&quot;);\n    }\n}\n \npublic class Polymorphism101 {\n \n    public static void main(String[] args) {\n \n        Parent p = new Parent();\n        p.doSomething();\n \n        p = new ChildA();\n        p.doSomething();\n \n        p = new ChildB();\n        p.doSomething();\n \n    }\n \n}\n</code></pre>\n<p><strong>EDIT: A better example</strong></p>\n<p>You could be developing a <em>drawing</em> application. An application that draws shapes of any kind. In that case, you should have an <em>abstract</em> type <code>Shape</code>.</p>\n<p>For purpose(s) like; drawing all shapes; list all shapes; find a shape or delete a shape, you need to have a <em>list</em> of Shapes. Since the list is of a parent type, it can store any shapes.</p>\n<p>The <code>Shape</code> <em>interface/abstract class/virtual class</em> should have an <em>abstract/pure virtual</em> function <code>Draw()</code>. So, in your DrawToDeviceLoop, you just call <code>Draw()</code> for each shape, you never need to check what shape it is.</p>\n<p>The <code>Shape</code> interface can have an <em>abstract</em> implementation <code>AbstractShape</code>, which can have shape name or id as data members and GetName, Cleanup and other functions with functionality common to all shapes.</p>\n<p>Remember an abstract type <strong>cannot</strong> be instantiated, so <code>Shape</code> itself cannot be instantiated, as it cannot be drawn either.</p>\n<p><strong>EDIT 2: Polymorphism and Exception Handling</strong> - <a href=\"https://stackoverflow.com/users/1955934\">user1955934</a> asked &quot;What about checking for exception class&quot; For exception handling the best practices with respect to polymorphism are:</p>\n<ol>\n<li>Prefer (to throw) specific exception - For example throw a NumberFormatException instead of IllegalArgumentException</li>\n<li>Catch the most specific exception first - For example, if you catch an IllegalArgumentException first, you will never reach the catch block that should handle the more specific NumberFormatException because its a subclass of the IllegalArgumentException.</li>\n</ol>\n<p>So, its principally the same, if an exception needs to be handled differently, a child/specific class should be defined, and the specific exception should be <em>caught</em> (not checked instanceof)</p>\n<p>To know more best practices on exception handling. See <a href=\"https://dzone.com/articles/9-best-practices-to-handle-exceptions-in-java\" rel=\"noreferrer\">9 Best practices to handle exception in Java</a> and <a href=\"https://learn.microsoft.com/en-us/dotnet/standard/exceptions/best-practices-for-exceptions\" rel=\"noreferrer\">Best practices for exceptions (C#)</a></p>\n<p><strong>EDIT 3: I admit to an exception in this rule</strong></p>\n<p>So, I am working with a legacy code (written in C++), which has mostly been written about 15 years ago, where they always check for the child class to perform certain actions. I was asked to add some code with the same logic, and I told my manager (he is a Dev too) I cannot do this, pointing to this answer, and then we discussed and accepted to this exception to the rule. In our case, this parent class has had just 2 children since the year 2000, and we do not see any child being added in the near future, with the core code limited for growth, we decided that with no addition to child classes and current number being just 2, it is more efficient to check for type, especially when that is how the code has been written, since ever.</p>\n<p>There aren't many instances of this check too though, the parent implements the complicated functionalities mostly and it exists more for sharing code then specializing/differentiating them.</p>\n"},{"tags":[],"owner":{"account_id":255796,"reputation":48503,"user_id":536086,"accept_rate":90,"display_name":"Yochai Timmer"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1307696176,"creation_date":1307696176,"answer_id":6304128,"question_id":6304056,"body_markdown":"**instanceof** will return true if it&#39;s a subclass...\r\n\r\n[**instanceof Documentation**][1] \r\n\r\n\r\n  [1]: http://java.sun.com/docs/books/jvms/second_edition/html/Instructions2.doc6.html#instanceof","title":"Does instanceof return true if instance of a parent?","body":"<p><strong>instanceof</strong> will return true if it's a subclass...</p>\n\n<p><a href=\"http://java.sun.com/docs/books/jvms/second_edition/html/Instructions2.doc6.html#instanceof\" rel=\"noreferrer\"><strong>instanceof Documentation</strong></a> </p>\n"},{"tags":[],"owner":{"account_id":246709,"reputation":1175,"user_id":520989,"accept_rate":83,"display_name":"yahh"},"down_vote_count":2,"up_vote_count":2,"is_accepted":false,"score":0,"last_activity_date":1307696514,"creation_date":1307696514,"answer_id":6304196,"question_id":6304056,"body_markdown":"ofcourse it returns true because child is an instance of the parent","title":"Does instanceof return true if instance of a parent?","body":"<p>ofcourse it returns true because child is an instance of the parent</p>\n"},{"tags":[],"owner":{"account_id":222360,"reputation":7605,"user_id":480894,"accept_rate":72,"display_name":"Roland"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1506405266,"creation_date":1502262062,"answer_id":45583689,"question_id":6304056,"body_markdown":"**Yes**. `instanceof` will be true whenever the reference(left side of the `instanceof` expression) can be cast to the *ReferenceType*(the type on the right side of the `instanceof` expression). This will be true for subclasses in relation to their parent:\n\n    Child child = new Child();\n    Parent parent = (Parent) child; //works!\n    assert child instanceof Parent; //true\n\nFrom [The Java Language Specification, Java SE 9 Edition](https://docs.oracle.com/javase/specs/jls/se9/html/index.html):\n\n&gt;[**15.20. Relational Operators**](https://docs.oracle.com/javase/specs/jls/se9/html/jls-15.html#jls-15.20)  \n&gt;...  \n&gt;*RelationalExpression* instanceof *ReferenceType*\n&gt;\n&gt;[**15.20.2. Type Comparison Operator instanceof**](https://docs.oracle.com/javase/specs/jls/se9/html/jls-15.html#jls-15.20.2)  \n&gt;...  \n&gt;At run time, the result of the `instanceof` operator is `true` if the value of the *RelationalExpression* is not `null` and the reference could be cast to the *ReferenceType* without raising a `ClassCastException`. Otherwise the result is `false`. \n","title":"Does instanceof return true if instance of a parent?","body":"<p><strong>Yes</strong>. <code>instanceof</code> will be true whenever the reference(left side of the <code>instanceof</code> expression) can be cast to the <em>ReferenceType</em>(the type on the right side of the <code>instanceof</code> expression). This will be true for subclasses in relation to their parent:</p>\n<pre><code>Child child = new Child();\nParent parent = (Parent) child; //works!\nassert child instanceof Parent; //true\n</code></pre>\n<p>From <a href=\"https://docs.oracle.com/javase/specs/jls/se9/html/index.html\" rel=\"nofollow noreferrer\">The Java Language Specification, Java SE 9 Edition</a>:</p>\n<blockquote>\n<p><a href=\"https://docs.oracle.com/javase/specs/jls/se9/html/jls-15.html#jls-15.20\" rel=\"nofollow noreferrer\"><strong>15.20. Relational Operators</strong></a><br />\n...<br />\n<em>RelationalExpression</em> instanceof <em>ReferenceType</em></p>\n<p><a href=\"https://docs.oracle.com/javase/specs/jls/se9/html/jls-15.html#jls-15.20.2\" rel=\"nofollow noreferrer\"><strong>15.20.2. Type Comparison Operator instanceof</strong></a><br />\n...<br />\nAt run time, the result of the <code>instanceof</code> operator is <code>true</code> if the value of the <em>RelationalExpression</em> is not <code>null</code> and the reference could be cast to the <em>ReferenceType</em> without raising a <code>ClassCastException</code>. Otherwise the result is <code>false</code>.</p>\n</blockquote>\n"}],"owner":{"account_id":221256,"reputation":1854,"user_id":479129,"accept_rate":97,"display_name":"ikbal"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":69785,"favorite_count":0,"down_vote_count":1,"up_vote_count":63,"accepted_answer_id":6304115,"answer_count":4,"score":62,"last_activity_date":1664899258,"creation_date":1307695792,"question_id":6304056,"body_markdown":"I have a class `Child` that extends `Parent`.\r\n\r\n    Parent child = new Child();\r\n    \r\n    if (child instanceof Parent){\r\n        // Do something\r\n    }\r\n\r\nDoes this return true or false, and why?\r\n","title":"Does instanceof return true if instance of a parent?","body":"<p>I have a class <code>Child</code> that extends <code>Parent</code>.</p>\n<pre><code>Parent child = new Child();\n\nif (child instanceof Parent){\n    // Do something\n}\n</code></pre>\n<p>Does this return true or false, and why?</p>\n"},{"tags":["java","hibernate"],"answers":[{"tags":[],"owner":{"account_id":179640,"reputation":15442,"user_id":412446,"accept_rate":41,"display_name":"Christian Beikov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664898900,"creation_date":1664898900,"answer_id":73950516,"question_id":73926687,"body_markdown":"You could try something like this, but I really wouldn&#39;t recommend you to do this as it is not very efficient.\r\n\r\n```\r\n@DiscriminatorFormula(&quot;case (select bikeLot.BikeTypeId from BikeLots bikeLot where bikeLot.BikeLotId = BikeLotId) when 1 then &#39;Dock&#39; when 2 then &#39;Dockless&#39; else null end&quot;)\r\n```","title":"Discriminator value is from another table","body":"<p>You could try something like this, but I really wouldn't recommend you to do this as it is not very efficient.</p>\n<pre><code>@DiscriminatorFormula(&quot;case (select bikeLot.BikeTypeId from BikeLots bikeLot where bikeLot.BikeLotId = BikeLotId) when 1 then 'Dock' when 2 then 'Dockless' else null end&quot;)\n</code></pre>\n"}],"owner":{"account_id":26507781,"reputation":1,"user_id":20143652,"display_name":"Sander Verheyen"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":137,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1664898900,"creation_date":1664721464,"question_id":73926687,"body_markdown":"So I&#39;m very new to hibernate and wanted to know if it was possible to have a discriminator value be of another table so I have 3 tables named Vehicles, BikeLots and BikeTypes. I want to map Vehicle based on the BikeType with my tables looking like this:\r\n\r\nVehicles (VehicleId, SerialNumber, BikeLotId, Point)\r\n\r\nBikeLots( BikeLotId, DeliveryDate,  BikeTypeId)\r\n\r\nBikeTypes( BikeTypeId, BikeTypeDescription )\r\n \r\nis it possible to map a vehicle to being Dock or Dockless based on the BikeTypeId ? \r\ncurrently my classes look like this\r\n\r\n```\r\n@Entity(name = &quot;Vehicles&quot;)\r\n@Inheritance(strategy = InheritanceType.SINGLE_TABLE)\r\n@DiscriminatorFormula(&quot;CASE ?&quot;)\r\npublic abstract class Vehicle {\r\n  @Id\r\n  @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n  @Getter\r\n  @Setter\r\n  private short vehicleId;\r\n\r\n  @Column(columnDefinition = &quot;nvarchar(50)&quot;)\r\n  @Getter\r\n  @Setter\r\n  private String serialNumber;\r\n\r\n  private Point point;\r\n\r\n  @ManyToOne\r\n  @JoinColumn(name = &quot;BikeLotId&quot;)\r\n  private Bikelot bikeLot;\r\n}\r\n```\r\n```\r\n@Entity\r\n@DiscriminatorValue(&quot;Dockless&quot;)\r\npublic class DocklessVehicle extends Vehicle{\r\n// valid code\r\n}\r\n```\r\n```\r\n@Entity\r\n@DiscriminatorValue(&quot;Dock&quot;)\r\npublic class DockVehicle extends Vehicle {\r\n}\r\n```\r\nIf there is anything more I need to provide or clarify let me know since this is the first question I&#39;m asking here.","title":"Discriminator value is from another table","body":"<p>So I'm very new to hibernate and wanted to know if it was possible to have a discriminator value be of another table so I have 3 tables named Vehicles, BikeLots and BikeTypes. I want to map Vehicle based on the BikeType with my tables looking like this:</p>\n<p>Vehicles (VehicleId, SerialNumber, BikeLotId, Point)</p>\n<p>BikeLots( BikeLotId, DeliveryDate,  BikeTypeId)</p>\n<p>BikeTypes( BikeTypeId, BikeTypeDescription )</p>\n<p>is it possible to map a vehicle to being Dock or Dockless based on the BikeTypeId ?\ncurrently my classes look like this</p>\n<pre><code>@Entity(name = &quot;Vehicles&quot;)\n@Inheritance(strategy = InheritanceType.SINGLE_TABLE)\n@DiscriminatorFormula(&quot;CASE ?&quot;)\npublic abstract class Vehicle {\n  @Id\n  @GeneratedValue(strategy = GenerationType.IDENTITY)\n  @Getter\n  @Setter\n  private short vehicleId;\n\n  @Column(columnDefinition = &quot;nvarchar(50)&quot;)\n  @Getter\n  @Setter\n  private String serialNumber;\n\n  private Point point;\n\n  @ManyToOne\n  @JoinColumn(name = &quot;BikeLotId&quot;)\n  private Bikelot bikeLot;\n}\n</code></pre>\n<pre><code>@Entity\n@DiscriminatorValue(&quot;Dockless&quot;)\npublic class DocklessVehicle extends Vehicle{\n// valid code\n}\n</code></pre>\n<pre><code>@Entity\n@DiscriminatorValue(&quot;Dock&quot;)\npublic class DockVehicle extends Vehicle {\n}\n</code></pre>\n<p>If there is anything more I need to provide or clarify let me know since this is the first question I'm asking here.</p>\n"},{"tags":["java","postgresql","jpa","querydsl"],"comments":[{"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"score":0,"creation_date":1664899363,"post_id":73950482,"comment_id":130573328,"body_markdown":"**(1)** `exists (select * from bar where bar.id = foo.id ...` was advocated to be better optimizable as opposed to `foo.id in (select`. **(2)** Should `join` not be a `where bar.field = alpha.field`? This join query looks explosive.","body":"<b>(1)</b> <code>exists (select * from bar where bar.id = foo.id ...</code> was advocated to be better optimizable as opposed to <code>foo.id in (select</code>. <b>(2)</b> Should <code>join</code> not be a <code>where bar.field = alpha.field</code>? This join query looks explosive."},{"owner":{"account_id":10142453,"reputation":29,"user_id":7491739,"display_name":"Wiz"},"score":0,"creation_date":1664900329,"post_id":73950482,"comment_id":130573665,"body_markdown":"I&#39;m not a sql expert by any means. But isn&#39;t the join needed to reference an equality statement between entities?","body":"I&#39;m not a sql expert by any means. But isn&#39;t the join needed to reference an equality statement between entities?"},{"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"score":0,"creation_date":1664955972,"post_id":73950482,"comment_id":130584583,"body_markdown":"No, if you got a headers table and a 1:N lines table, you _join_ them on the header ID. In effect multiplying every header record by its lines. That is the effect you saw. A _join_ is like a `from table1, table2 where table2.id = table1.table2_id`. Do some SQL tutorials, will be helpful, also with JPA.","body":"No, if you got a headers table and a 1:N lines table, you <i>join</i> them on the header ID. In effect multiplying every header record by its lines. That is the effect you saw. A <i>join</i> is like a <code>from table1, table2 where table2.id = table1.table2_id</code>. Do some SQL tutorials, will be helpful, also with JPA."}],"owner":{"account_id":10142453,"reputation":29,"user_id":7491739,"display_name":"Wiz"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":169,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1664898719,"creation_date":1664898719,"question_id":73950482,"body_markdown":"We&#39;re using spring and querying via querydsl/jpaexpressions. I noticed when using a subquery with joins, it duplicates the joins resulting in perf issues. For example,\r\n\r\n    select\r\n    \t*\r\n    from\r\n    \tfoo\r\n    where\r\n    \tfoo.id in (\r\n    \tselect\r\n    \t\tbar.id\r\n    \tfrom\r\n    \t\tbar\r\n    \tjoin alpha on\r\n    \t\tbar.field = alpha.field)\r\n\r\nwas resulting in\r\n\r\n    select\r\n    \t*\r\n    from\r\n    \tfoo\r\n    where\r\n    \tfoo.id in (\r\n    \tselect\r\n    \t\tbar.id\r\n    \tfrom\r\n    \t\tbar b,\r\n    \t\talpha a,\r\n    \t\tbar b1,\r\n    \t\talpha a1)\r\n\r\n\r\nHas anyone experienced issues with this? I&#39;m using JPAexpressions to generate my subquery\r\n\r\n    JPAExpressions.select(....)","title":"QueryDSL/JPAExpressions causing duplicate join statements in subquery","body":"<p>We're using spring and querying via querydsl/jpaexpressions. I noticed when using a subquery with joins, it duplicates the joins resulting in perf issues. For example,</p>\n<pre><code>select\n    *\nfrom\n    foo\nwhere\n    foo.id in (\n    select\n        bar.id\n    from\n        bar\n    join alpha on\n        bar.field = alpha.field)\n</code></pre>\n<p>was resulting in</p>\n<pre><code>select\n    *\nfrom\n    foo\nwhere\n    foo.id in (\n    select\n        bar.id\n    from\n        bar b,\n        alpha a,\n        bar b1,\n        alpha a1)\n</code></pre>\n<p>Has anyone experienced issues with this? I'm using JPAexpressions to generate my subquery</p>\n<pre><code>JPAExpressions.select(....)\n</code></pre>\n"},{"tags":["java","exception","null","nullpointerexception","illegalargumentexception"],"answers":[{"tags":[],"owner":{"account_id":26,"reputation":17674,"user_id":35,"accept_rate":90,"display_name":"Greg Hurlman"},"down_vote_count":30,"up_vote_count":343,"is_accepted":true,"score":313,"last_activity_date":1494762366,"creation_date":1218050964,"answer_id":3886,"question_id":3881,"body_markdown":"It seems like an `IllegalArgumentException` is called for if you don&#39;t want `null` to be an allowed value, and the `NullPointerException` would be thrown if you were trying to *use* a variable that turns out to be `null`.","title":"IllegalArgumentException or NullPointerException for a null parameter?","body":"<p>It seems like an <code>IllegalArgumentException</code> is called for if you don't want <code>null</code> to be an allowed value, and the <code>NullPointerException</code> would be thrown if you were trying to <em>use</em> a variable that turns out to be <code>null</code>.</p>\n"},{"tags":[],"owner":{"account_id":437,"reputation":4455,"user_id":560,"accept_rate":100,"display_name":"Jeremy Privett"},"down_vote_count":2,"up_vote_count":20,"is_accepted":false,"score":18,"last_activity_date":1472551863,"creation_date":1218051071,"answer_id":3890,"question_id":3881,"body_markdown":"If it&#39;s a `setter` method and `null` is being passed to it, I think it would make more sense to throw an `IllegalArgumentException`. A `NullPointerException` seems to make more sense in the case where you&#39;re attempting to actually use the `null`.\r\n\r\nSo, if you&#39;re using it and it&#39;s `null`, `NullPointer`. If it&#39;s being passed in and it&#39;s `null`, `IllegalArgument`.","title":"IllegalArgumentException or NullPointerException for a null parameter?","body":"<p>If it's a <code>setter</code> method and <code>null</code> is being passed to it, I think it would make more sense to throw an <code>IllegalArgumentException</code>. A <code>NullPointerException</code> seems to make more sense in the case where you're attempting to actually use the <code>null</code>.</p>\n\n<p>So, if you're using it and it's <code>null</code>, <code>NullPointer</code>. If it's being passed in and it's <code>null</code>, <code>IllegalArgument</code>.</p>\n"},{"tags":[],"owner":{"account_id":589,"reputation":30817,"user_id":758,"accept_rate":77,"display_name":"Mark Renouf"},"down_vote_count":3,"up_vote_count":78,"is_accepted":false,"score":75,"last_activity_date":1446586775,"creation_date":1218227704,"answer_id":6358,"question_id":3881,"body_markdown":"I tend to follow the design of JDK libraries, especially Collections and Concurrency (Joshua Bloch, Doug Lea, those guys know how to design solid APIs). Anyway, many APIs in the JDK pro-actively throws `NullPointerException`. \r\n\r\nFor example, the Javadoc for `Map.containsKey` states:\r\n&gt; @throws NullPointerException if the key is &lt;tt&gt;null&lt;/tt&gt; and this map\r\n&gt;   does not permit &lt;tt&gt;null&lt;/tt&gt; keys (optional).\r\n\r\nIt&#39;s perfectly valid to throw your own NPE. The convention is to include the parameter name which was null in the message of the exception. \r\n\r\nThe pattern goes:\r\n\r\n\tpublic void someMethod(Object mustNotBeNull) {  \r\n\t\tif (mustNotBeNull == null) {  \r\n\t\t\tthrow new NullPointerException(&quot;mustNotBeNull must not be null&quot;);  \r\n\t\t}  \r\n\t}\r\n\r\nWhatever you do, don&#39;t allow a bad value to get set and throw an exception later when other code attempts to use it. That makes debugging a nightmare. You should always the follow the &quot;fail-fast&quot; principle.","title":"IllegalArgumentException or NullPointerException for a null parameter?","body":"<p>I tend to follow the design of JDK libraries, especially Collections and Concurrency (Joshua Bloch, Doug Lea, those guys know how to design solid APIs). Anyway, many APIs in the JDK pro-actively throws <code>NullPointerException</code>. </p>\n\n<p>For example, the Javadoc for <code>Map.containsKey</code> states:</p>\n\n<blockquote>\n  <p>@throws NullPointerException if the key is null and this map\n    does not permit null keys (optional).</p>\n</blockquote>\n\n<p>It's perfectly valid to throw your own NPE. The convention is to include the parameter name which was null in the message of the exception. </p>\n\n<p>The pattern goes:</p>\n\n<pre><code>public void someMethod(Object mustNotBeNull) {  \n    if (mustNotBeNull == null) {  \n        throw new NullPointerException(\"mustNotBeNull must not be null\");  \n    }  \n}\n</code></pre>\n\n<p>Whatever you do, don't allow a bad value to get set and throw an exception later when other code attempts to use it. That makes debugging a nightmare. You should always the follow the \"fail-fast\" principle.</p>\n"},{"tags":[],"owner":{"account_id":776,"reputation":4705,"user_id":1009,"accept_rate":83,"display_name":"jassuncao"},"down_vote_count":7,"up_vote_count":2,"is_accepted":false,"score":-5,"last_activity_date":1218460839,"creation_date":1218460839,"answer_id":7770,"question_id":3881,"body_markdown":"If you choose to throw a NPE and you are using the argument in your method, it might be redundant and expensive to explicitly check for a null. I think the VM already does that for you.","title":"IllegalArgumentException or NullPointerException for a null parameter?","body":"<p>If you choose to throw a NPE and you are using the argument in your method, it might be redundant and expensive to explicitly check for a null. I think the VM already does that for you.</p>\n"},{"tags":[],"owner":{"account_id":197,"reputation":41504,"user_id":244,"accept_rate":50,"display_name":"Claude Houle"},"down_vote_count":2,"up_vote_count":8,"is_accepted":false,"score":6,"last_activity_date":1218483829,"creation_date":1218483829,"answer_id":8132,"question_id":3881,"body_markdown":"The accepted practice if to use the *IllegalArgumentException( String message )* to declare a parameter to be invalid and give as much detail as possible... So to say that a parameters was found to be null while exception non-null, you would do something like this:\r\n\r\n    if( variable == null )\r\n        throw new IllegalArgumentException(&quot;The object &#39;variable&#39; cannot be null&quot;);\r\n\r\nYou have virtually no reason to implicitly use the &quot;NullPointerException&quot;. The NullPointerException is an exception thrown by the Java Virtual Machine when you try to execute code on null reference (Like *toString()*).","title":"IllegalArgumentException or NullPointerException for a null parameter?","body":"<p>The accepted practice if to use the <em>IllegalArgumentException( String message )</em> to declare a parameter to be invalid and give as much detail as possible... So to say that a parameters was found to be null while exception non-null, you would do something like this:</p>\n\n<pre><code>if( variable == null )\n    throw new IllegalArgumentException(\"The object 'variable' cannot be null\");\n</code></pre>\n\n<p>You have virtually no reason to implicitly use the \"NullPointerException\". The NullPointerException is an exception thrown by the Java Virtual Machine when you try to execute code on null reference (Like <em>toString()</em>).</p>\n"},{"tags":[],"owner":{"account_id":793,"reputation":24042,"user_id":1035,"accept_rate":92,"display_name":"GaryF"},"down_vote_count":17,"up_vote_count":188,"is_accepted":false,"score":171,"last_activity_date":1539078486,"creation_date":1218485118,"answer_id":8160,"question_id":3881,"body_markdown":"The standard is to throw the `NullPointerException`. The generally infallible &quot;Effective Java&quot; discusses this briefly in Item 42 (first edition), Item 60 (second edition), or Item 72 (third edition) &quot;Favor the use of standard exceptions&quot;:\r\n\r\n&gt; &quot;Arguably, all erroneous method\r\n&gt; invocations boil down to an illegal\r\n&gt; argument or illegal state, but other\r\n&gt; exceptions are standardly used for\r\n&gt; certain kinds of illegal arguments and\r\n&gt; states. If a caller passes null in\r\n&gt; some parameter for which null values\r\n&gt; are prohibited, convention dictates\r\n&gt; that NullPointerException be thrown\r\n&gt; rather than IllegalArgumentException.&quot;","title":"IllegalArgumentException or NullPointerException for a null parameter?","body":"<p>The standard is to throw the <code>NullPointerException</code>. The generally infallible \"Effective Java\" discusses this briefly in Item 42 (first edition), Item 60 (second edition), or Item 72 (third edition) \"Favor the use of standard exceptions\":</p>\n\n<blockquote>\n  <p>\"Arguably, all erroneous method\n  invocations boil down to an illegal\n  argument or illegal state, but other\n  exceptions are standardly used for\n  certain kinds of illegal arguments and\n  states. If a caller passes null in\n  some parameter for which null values\n  are prohibited, convention dictates\n  that NullPointerException be thrown\n  rather than IllegalArgumentException.\"</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":1020,"reputation":2478,"user_id":1353,"display_name":"martinatime"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1218910400,"creation_date":1218910400,"answer_id":13262,"question_id":3881,"body_markdown":"The definitions from the links to the two exceptions above are\r\nIllegalArgumentException: Thrown to indicate that a method has been passed an illegal or inappropriate argument. \r\nNullPointerException: Thrown when an application attempts to use null in a case where an object is required.\r\n\r\nThe big difference here is the IllegalArgumentException is supposed to be used when checking that an argument to a method is valid. NullPointerException is supposed to be used whenever an object being &quot;used&quot; when it is null.\r\n\r\nI hope that helps put the two in perspective.","title":"IllegalArgumentException or NullPointerException for a null parameter?","body":"<p>The definitions from the links to the two exceptions above are\nIllegalArgumentException: Thrown to indicate that a method has been passed an illegal or inappropriate argument. \nNullPointerException: Thrown when an application attempts to use null in a case where an object is required.</p>\n\n<p>The big difference here is the IllegalArgumentException is supposed to be used when checking that an argument to a method is valid. NullPointerException is supposed to be used whenever an object being \"used\" when it is null.</p>\n\n<p>I hope that helps put the two in perspective.</p>\n"},{"tags":[],"owner":{"account_id":1781,"reputation":91962,"user_id":2443,"accept_rate":82,"display_name":"Allain Lalonde"},"down_vote_count":1,"up_vote_count":8,"is_accepted":false,"score":7,"last_activity_date":1219403495,"creation_date":1219403495,"answer_id":22074,"question_id":3881,"body_markdown":"Couldn&#39;t agree more with what&#39;s being said.  Fail early, fail fast.  Pretty good Exception mantra. \r\n\r\nThe question about which Exception to throw is mostly a matter of personal taste.  In my mind IllegalArgumentException seems more specific than using a NPE since it&#39;s telling me that the problem was with an argument I passed to the method and not with a value that may have been generated while performing the method.\r\n\r\nMy 2 Cents","title":"IllegalArgumentException or NullPointerException for a null parameter?","body":"<p>Couldn't agree more with what's being said.  Fail early, fail fast.  Pretty good Exception mantra. </p>\n\n<p>The question about which Exception to throw is mostly a matter of personal taste.  In my mind IllegalArgumentException seems more specific than using a NPE since it's telling me that the problem was with an argument I passed to the method and not with a value that may have been generated while performing the method.</p>\n\n<p>My 2 Cents</p>\n"},{"tags":[],"owner":{"account_id":2496,"reputation":266234,"user_id":3474,"accept_rate":83,"display_name":"erickson"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1219946599,"creation_date":1219946599,"answer_id":32940,"question_id":3881,"body_markdown":"If it&#39;s a &quot;setter&quot;, or somewhere I&#39;m getting a member to use later, I tend to use IllegalArgumentException.\r\n\r\nIf it&#39;s something I&#39;m going to use (dereference) right now in the method, I throw a NullPointerException proactively. I like this better than letting the runtime do it, because I can provide a helpful message (seems like the runtime could do this too, but that&#39;s a rant for another day).\r\n\r\nIf I&#39;m overriding a method, I use whatever the overridden method uses.\r\n","title":"IllegalArgumentException or NullPointerException for a null parameter?","body":"<p>If it's a \"setter\", or somewhere I'm getting a member to use later, I tend to use IllegalArgumentException.</p>\n\n<p>If it's something I'm going to use (dereference) right now in the method, I throw a NullPointerException proactively. I like this better than letting the runtime do it, because I can provide a helpful message (seems like the runtime could do this too, but that's a rant for another day).</p>\n\n<p>If I'm overriding a method, I use whatever the overridden method uses.</p>\n"},{"tags":[],"owner":{"display_name":"Martin OConnor"},"down_vote_count":5,"up_vote_count":10,"is_accepted":false,"score":5,"last_activity_date":1220610845,"creation_date":1220610845,"answer_id":45518,"question_id":3881,"body_markdown":"In general, a developer should **never** throw a NullPointerException. This exception is thrown by the runtime when code attempts to dereference a variable who&#39;s value is null. Therefore, if your method wants to explicitly disallow null, as opposed to just happening to have a null value raise a NullPointerException, you should throw an IllegalArgumentException.","title":"IllegalArgumentException or NullPointerException for a null parameter?","body":"<p>In general, a developer should <strong>never</strong> throw a NullPointerException. This exception is thrown by the runtime when code attempts to dereference a variable who's value is null. Therefore, if your method wants to explicitly disallow null, as opposed to just happening to have a null value raise a NullPointerException, you should throw an IllegalArgumentException.</p>\n"},{"tags":[],"owner":{"account_id":3416,"reputation":81767,"user_id":4926,"accept_rate":85,"display_name":"Jason Cohen"},"down_vote_count":22,"up_vote_count":466,"is_accepted":false,"score":444,"last_activity_date":1473927073,"creation_date":1220725747,"answer_id":47710,"question_id":3881,"body_markdown":"You should be using `IllegalArgumentException` (IAE), not `NullPointerException` (NPE) for the following reasons:\r\n\r\nFirst, the [NPE JavaDoc][1] explicitly lists the cases where NPE is appropriate.  Notice that all of them are thrown *by the runtime* when `null` is used inappropriately.  In contrast, the [IAE JavaDoc][2] couldn&#39;t be more clear: &quot;Thrown to indicate that a method has been passed an illegal or inappropriate argument.&quot;  Yup, that&#39;s you!\r\n\r\nSecond, when you see an NPE in a stack trace, what do you assume?  Probably that someone dereferenced a `null`.  When you see IAE, you assume the caller of the method at the top of the stack passed in an illegal value.  Again, the latter assumption is true, the former is misleading.\r\n\r\nThird, since IAE is clearly designed for validating parameters, you have to assume it as the default choice of exception, so why would you choose NPE instead?  Certainly not for different behavior -- do you really expect calling code to catch NPE&#39;s separately from IAE and do something different as a result?  Are you trying to communicate a more specific error message?  But you can do that in the exception message text anyway, as you should for all other incorrect parameters.\r\n\r\nFourth, all other incorrect parameter data will be IAE, so why not be consistent?  Why is it that an illegal `null` is so special that it deserves a separate exception from all other types of illegal arguments?\r\n\r\nFinally, I accept the argument given by other answers that parts of the Java API use NPE in this manner.  However, the Java API is inconsistent with everything from exception types to naming conventions, so I think just blindly copying (your favorite part of) the Java API isn&#39;t a good enough argument to trump these other considerations.\r\n\r\n  [1]: http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/NullPointerException.html\r\n  [2]: http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/IllegalArgumentException.html","title":"IllegalArgumentException or NullPointerException for a null parameter?","body":"<p>You should be using <code>IllegalArgumentException</code> (IAE), not <code>NullPointerException</code> (NPE) for the following reasons:</p>\n\n<p>First, the <a href=\"http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/NullPointerException.html\" rel=\"noreferrer\">NPE JavaDoc</a> explicitly lists the cases where NPE is appropriate.  Notice that all of them are thrown <em>by the runtime</em> when <code>null</code> is used inappropriately.  In contrast, the <a href=\"http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/IllegalArgumentException.html\" rel=\"noreferrer\">IAE JavaDoc</a> couldn't be more clear: \"Thrown to indicate that a method has been passed an illegal or inappropriate argument.\"  Yup, that's you!</p>\n\n<p>Second, when you see an NPE in a stack trace, what do you assume?  Probably that someone dereferenced a <code>null</code>.  When you see IAE, you assume the caller of the method at the top of the stack passed in an illegal value.  Again, the latter assumption is true, the former is misleading.</p>\n\n<p>Third, since IAE is clearly designed for validating parameters, you have to assume it as the default choice of exception, so why would you choose NPE instead?  Certainly not for different behavior -- do you really expect calling code to catch NPE's separately from IAE and do something different as a result?  Are you trying to communicate a more specific error message?  But you can do that in the exception message text anyway, as you should for all other incorrect parameters.</p>\n\n<p>Fourth, all other incorrect parameter data will be IAE, so why not be consistent?  Why is it that an illegal <code>null</code> is so special that it deserves a separate exception from all other types of illegal arguments?</p>\n\n<p>Finally, I accept the argument given by other answers that parts of the Java API use NPE in this manner.  However, the Java API is inconsistent with everything from exception types to naming conventions, so I think just blindly copying (your favorite part of) the Java API isn't a good enough argument to trump these other considerations.</p>\n"},{"tags":[],"owner":{"account_id":3643,"reputation":4356,"user_id":5266,"display_name":"Will Sargent"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1220933585,"creation_date":1220933585,"answer_id":51213,"question_id":3881,"body_markdown":"You should throw an IllegalArgumentException, as it will make it obvious to the programmer that he has done something invalid.  Developers are so used to seeing NPE thrown by the VM, that any programmer would not immediately realize his error, and would start looking around randomly, or worse, blame your code for being &#39;buggy&#39;.","title":"IllegalArgumentException or NullPointerException for a null parameter?","body":"<p>You should throw an IllegalArgumentException, as it will make it obvious to the programmer that he has done something invalid.  Developers are so used to seeing NPE thrown by the VM, that any programmer would not immediately realize his error, and would start looking around randomly, or worse, blame your code for being 'buggy'.</p>\n"},{"tags":[],"owner":{"account_id":2146,"reputation":51871,"user_id":2959,"accept_rate":67,"display_name":"Steve McLeod"},"down_vote_count":3,"up_vote_count":25,"is_accepted":false,"score":22,"last_activity_date":1224250305,"creation_date":1224250305,"answer_id":212119,"question_id":3881,"body_markdown":"It&#39;s a &quot;Holy War&quot; style question. In others words, both alternatives are good, but people will have their preferences which they will defend to the death.\r\n","title":"IllegalArgumentException or NullPointerException for a null parameter?","body":"<p>It's a \"Holy War\" style question. In others words, both alternatives are good, but people will have their preferences which they will defend to the death.</p>\n"},{"tags":[],"owner":{},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1225297226,"creation_date":1225297226,"answer_id":247447,"question_id":3881,"body_markdown":"In this case, IllegalArgumentException conveys clear information to the user using your API that the &quot;&lt;argument&gt; should not be null&quot;. As other forum users pointed out you could use NPE if you want to as long as you convey the right information to the user using your API. \r\n\r\nGaryF and tweakt dropped &quot;Effective Java&quot; (which I swear by) references which recommends using NPE. And looking at how other good APIs are constructed is the best way to see how to construct your API.\r\n\r\nAnother good example is to look at the Spring APIs. For example, org.springframework.beans.BeanUtils.instantiateClass(Constructor ctor, Object[] args) has a Assert.notNull(ctor, &quot;Constructor must not be null&quot;) line. org.springframework.util.Assert.notNull(Object object, String message) method checks to see if the argument (object) passed in is null and if it is it throws a new IllegalArgumentException(message) which is then caught in the org.springframework.beans.BeanUtils.instantiateClass(...) method.","title":"IllegalArgumentException or NullPointerException for a null parameter?","body":"<p>In this case, IllegalArgumentException conveys clear information to the user using your API that the \" should not be null\". As other forum users pointed out you could use NPE if you want to as long as you convey the right information to the user using your API. </p>\n\n<p>GaryF and tweakt dropped \"Effective Java\" (which I swear by) references which recommends using NPE. And looking at how other good APIs are constructed is the best way to see how to construct your API.</p>\n\n<p>Another good example is to look at the Spring APIs. For example, org.springframework.beans.BeanUtils.instantiateClass(Constructor ctor, Object[] args) has a Assert.notNull(ctor, \"Constructor must not be null\") line. org.springframework.util.Assert.notNull(Object object, String message) method checks to see if the argument (object) passed in is null and if it is it throws a new IllegalArgumentException(message) which is then caught in the org.springframework.beans.BeanUtils.instantiateClass(...) method.</p>\n"},{"tags":[],"owner":{"account_id":22642,"reputation":1471,"user_id":56038,"display_name":"Jason Fritcher"},"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1232151196,"creation_date":1232151196,"answer_id":452516,"question_id":3881,"body_markdown":"I wanted to single out Null arguments from other illegal arguments, so I derived an exception from IAE named NullArgumentException. Without even needing to read the exception message, I know that a null argument was passed into a method and by reading the message, I find out which argument was null. I still catch the NullArgumentException with an IAE handler, but in my logs is where I can see the difference quickly.","title":"IllegalArgumentException or NullPointerException for a null parameter?","body":"<p>I wanted to single out Null arguments from other illegal arguments, so I derived an exception from IAE named NullArgumentException. Without even needing to read the exception message, I know that a null argument was passed into a method and by reading the message, I find out which argument was null. I still catch the NullArgumentException with an IAE handler, but in my logs is where I can see the difference quickly.</p>\n"},{"tags":[],"owner":{"account_id":44642,"reputation":187,"user_id":131137,"display_name":"Brian T. Grant"},"down_vote_count":1,"up_vote_count":11,"is_accepted":false,"score":10,"last_activity_date":1246510034,"creation_date":1246510034,"answer_id":1072549,"question_id":3881,"body_markdown":"Apache Commons Lang has a [NullArgumentException][1] that does a number of the things discussed here: it extends IllegalArgumentException and its sole constructor takes the name of the argument which should have been non-null.\r\n\r\nWhile I feel that throwing something like a NullArgumentException or IllegalArgumentException more accurately describes the exceptional circumstances, my colleagues and I have chosen to defer to Bloch&#39;s advice on the subject.\r\n\r\n\r\n  [1]: http://commons.apache.org/lang/apidocs/org/apache/commons/lang/NullArgumentException.html","title":"IllegalArgumentException or NullPointerException for a null parameter?","body":"<p>Apache Commons Lang has a <a href=\"http://commons.apache.org/lang/apidocs/org/apache/commons/lang/NullArgumentException.html\" rel=\"noreferrer\">NullArgumentException</a> that does a number of the things discussed here: it extends IllegalArgumentException and its sole constructor takes the name of the argument which should have been non-null.</p>\n\n<p>While I feel that throwing something like a NullArgumentException or IllegalArgumentException more accurately describes the exceptional circumstances, my colleagues and I have chosen to defer to Bloch's advice on the subject.</p>\n"},{"tags":[],"owner":{"account_id":24045,"reputation":5432,"user_id":60871,"display_name":"Christopher Smith"},"down_vote_count":1,"up_vote_count":50,"is_accepted":false,"score":49,"last_activity_date":1342014802,"creation_date":1260338872,"answer_id":1871889,"question_id":3881,"body_markdown":"Voted up Jason Cohen&#39;s argument because it was well presented. Let me dismember it step by step. ;-)\r\n\r\n- The [NPE JavaDoc][1] explicitly says, *&quot;other illegal uses of the null object&quot;*. If it was just limited to situations where the runtime encounters a null when it shouldn&#39;t, all such cases could be defined far more succinctly.\r\n\r\n- Can&#39;t help it if you assume the wrong thing, but assuming encapsulation is applied properly, you really shouldn&#39;t care or notice whether a null was dereferenced inappropriately vs. whether a method detected an inappropriate null and fired an exception off.\r\n\r\n- I&#39;d choose [NPE][2] over [IAE][3] for multiple reasons\r\n   * It is more specific about the nature of the illegal operation\r\n   * Logic that mistakenly allows nulls tends to be very different from logic that mistakenly allows illegal values. For example, if I&#39;m validating data entered by a user, if I get value that is unacceptable, the source of that error is with the end user of the application. If I get a null, that&#39;s programmer error.\r\n   * Invalid values can cause things like stack overflows, out of memory errors, parsing exceptions, etc. Indeed, most errors generally present, at some point, as an invalid value in some method call. For this reason I see IAE as actually the *MOST GENERAL* of all exceptions under RuntimeException.\r\n\r\n- Actually, other invalid arguments can result in all kinds of other exceptions. [UnknownHostException][4], [FileNotFoundException][5], a variety of syntax error exceptions, [IndexOutOfBoundsException][6], authentication failures, etc., etc.\r\n\r\nIn general, I feel NPE is much maligned because traditionally has been associated with code that fails to follow the [fail fast principle][7]. That, plus the JDK&#39;s failure to populate NPE&#39;s with a message string really has created a strong negative sentiment that isn&#39;t well founded. Indeed, the difference between NPE and IAE from a runtime perspective is strictly the name. From that perspective, the more precise you are with the name, the more clarity you give to the caller.\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/api/\r\n  [2]: http://docs.oracle.com/javase/7/docs/api/\r\n  [3]: http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalArgumentException.html\r\n  [4]: http://docs.oracle.com/javase/7/docs/api/java/net/UnknownHostException.html\r\n  [5]: http://docs.oracle.com/javase/7/docs/api/java/io/FileNotFoundException.html\r\n  [6]: http://docs.oracle.com/javase/7/docs/api/java/lang/IndexOutOfBoundsException.html\r\n  [7]: http://www.martinfowler.com/ieeeSoftware/failFast.pdf","title":"IllegalArgumentException or NullPointerException for a null parameter?","body":"<p>Voted up Jason Cohen's argument because it was well presented. Let me dismember it step by step. ;-)</p>\n\n<ul>\n<li><p>The <a href=\"http://docs.oracle.com/javase/7/docs/api/\" rel=\"noreferrer\">NPE JavaDoc</a> explicitly says, <em>\"other illegal uses of the null object\"</em>. If it was just limited to situations where the runtime encounters a null when it shouldn't, all such cases could be defined far more succinctly.</p></li>\n<li><p>Can't help it if you assume the wrong thing, but assuming encapsulation is applied properly, you really shouldn't care or notice whether a null was dereferenced inappropriately vs. whether a method detected an inappropriate null and fired an exception off.</p></li>\n<li><p>I'd choose <a href=\"http://docs.oracle.com/javase/7/docs/api/\" rel=\"noreferrer\">NPE</a> over <a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalArgumentException.html\" rel=\"noreferrer\">IAE</a> for multiple reasons</p>\n\n<ul>\n<li>It is more specific about the nature of the illegal operation</li>\n<li>Logic that mistakenly allows nulls tends to be very different from logic that mistakenly allows illegal values. For example, if I'm validating data entered by a user, if I get value that is unacceptable, the source of that error is with the end user of the application. If I get a null, that's programmer error.</li>\n<li>Invalid values can cause things like stack overflows, out of memory errors, parsing exceptions, etc. Indeed, most errors generally present, at some point, as an invalid value in some method call. For this reason I see IAE as actually the <em>MOST GENERAL</em> of all exceptions under RuntimeException.</li>\n</ul></li>\n<li><p>Actually, other invalid arguments can result in all kinds of other exceptions. <a href=\"http://docs.oracle.com/javase/7/docs/api/java/net/UnknownHostException.html\" rel=\"noreferrer\">UnknownHostException</a>, <a href=\"http://docs.oracle.com/javase/7/docs/api/java/io/FileNotFoundException.html\" rel=\"noreferrer\">FileNotFoundException</a>, a variety of syntax error exceptions, <a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/IndexOutOfBoundsException.html\" rel=\"noreferrer\">IndexOutOfBoundsException</a>, authentication failures, etc., etc.</p></li>\n</ul>\n\n<p>In general, I feel NPE is much maligned because traditionally has been associated with code that fails to follow the <a href=\"http://www.martinfowler.com/ieeeSoftware/failFast.pdf\" rel=\"noreferrer\">fail fast principle</a>. That, plus the JDK's failure to populate NPE's with a message string really has created a strong negative sentiment that isn't well founded. Indeed, the difference between NPE and IAE from a runtime perspective is strictly the name. From that perspective, the more precise you are with the name, the more clarity you give to the caller.</p>\n"},{"tags":[],"owner":{"account_id":7006,"reputation":7395,"user_id":11961,"accept_rate":62,"display_name":"MB."},"down_vote_count":2,"up_vote_count":154,"is_accepted":false,"score":152,"last_activity_date":1352552234,"creation_date":1321728133,"answer_id":8196334,"question_id":3881,"body_markdown":"I was all in favour of throwing `IllegalArgumentException` for null parameters, until today, when I noticed the `java.util.Objects.requireNonNull` method in Java 7.  With that method, instead of doing:\r\n\r\n    if (param == null) {\r\n        throw new IllegalArgumentException(&quot;param cannot be null.&quot;);\r\n    }\r\n\r\nyou can do:\r\n\r\n    Objects.requireNonNull(param);\r\n\r\nand it will throw a `NullPointerException` if the parameter you pass it is `null`.\r\n\r\nGiven that that method is right bang in the middle of `java.util` I take its existence to be a pretty strong indication that throwing `NullPointerException` is &quot;the Java way of doing things&quot;.\r\n\r\nI think I&#39;m decided at any rate.\r\n\r\nNote that the arguments about hard debugging are bogus because you can of course provide a message to `NullPointerException` saying what was null and why it shouldn&#39;t be null.  Just like with `IllegalArgumentException`.\r\n\r\nOne added advantage of `NullPointerException` is that, in highly performance critical code, you could dispense with an explicit check for null (and a `NullPointerException` with a friendly error message), and just rely on the `NullPointerException` you&#39;ll get automatically when you call a method on the null parameter.  Provided you call a method quickly (i.e. fail fast), then you have essentially the same effect, just not quite as user friendly for the developer.  Most times it&#39;s probably better to check explicitly and throw with a useful message to indicate which parameter was null, but it&#39;s nice to have the option of changing that if performance dictates without breaking the published contract of the method/constructor.","title":"IllegalArgumentException or NullPointerException for a null parameter?","body":"<p>I was all in favour of throwing <code>IllegalArgumentException</code> for null parameters, until today, when I noticed the <code>java.util.Objects.requireNonNull</code> method in Java 7.  With that method, instead of doing:</p>\n\n<pre><code>if (param == null) {\n    throw new IllegalArgumentException(\"param cannot be null.\");\n}\n</code></pre>\n\n<p>you can do:</p>\n\n<pre><code>Objects.requireNonNull(param);\n</code></pre>\n\n<p>and it will throw a <code>NullPointerException</code> if the parameter you pass it is <code>null</code>.</p>\n\n<p>Given that that method is right bang in the middle of <code>java.util</code> I take its existence to be a pretty strong indication that throwing <code>NullPointerException</code> is \"the Java way of doing things\".</p>\n\n<p>I think I'm decided at any rate.</p>\n\n<p>Note that the arguments about hard debugging are bogus because you can of course provide a message to <code>NullPointerException</code> saying what was null and why it shouldn't be null.  Just like with <code>IllegalArgumentException</code>.</p>\n\n<p>One added advantage of <code>NullPointerException</code> is that, in highly performance critical code, you could dispense with an explicit check for null (and a <code>NullPointerException</code> with a friendly error message), and just rely on the <code>NullPointerException</code> you'll get automatically when you call a method on the null parameter.  Provided you call a method quickly (i.e. fail fast), then you have essentially the same effect, just not quite as user friendly for the developer.  Most times it's probably better to check explicitly and throw with a useful message to indicate which parameter was null, but it's nice to have the option of changing that if performance dictates without breaking the published contract of the method/constructor.</p>\n"},{"tags":[],"owner":{"account_id":1413157,"reputation":97,"user_id":1339367,"display_name":"Luis Daniel Mesa Velasquez"},"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1336868096,"creation_date":1334682909,"answer_id":10195862,"question_id":3881,"body_markdown":"the dichotomy... Are they non-overlapping? Only non-overlapping parts of a whole can make a dichotomy. As i see it:\r\n\r\n    throw new IllegalArgumentException(new NullPointerException(NULL_ARGUMENT_IN_METHOD_BAD_BOY_BAD));","title":"IllegalArgumentException or NullPointerException for a null parameter?","body":"<p>the dichotomy... Are they non-overlapping? Only non-overlapping parts of a whole can make a dichotomy. As i see it:</p>\n\n<pre><code>throw new IllegalArgumentException(new NullPointerException(NULL_ARGUMENT_IN_METHOD_BAD_BOY_BAD));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14008,"reputation":3782,"user_id":28465,"display_name":"Chris Povirk"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1664898465,"creation_date":1352477918,"answer_id":13311822,"question_id":3881,"body_markdown":"Some collections assume that `null` is rejected using `NullPointerException` rather than `IllegalArgumentException`. For example, if you compare a set containing `null` to a set that rejects `null`, the first set will call `containsAll` on the other and catch its `NullPointerException` -- but not `IllegalArgumentException`. (I&#39;m looking at the implementation of `AbstractSet.equals`.)\r\n\r\nYou could reasonably argue that using unchecked exceptions in this way is an antipattern, that comparing collections that contain `null` to collections that can&#39;t contain `null` is a likely bug that really _should_ produce an exception, or that putting `null` in a collection at all is a bad idea. Nevertheless, unless you&#39;re willing to say that `equals` should throw an exception in such a case, you&#39;re stuck remembering that `NullPointerException` is required in certain circumstances but not in others. (&quot;IAE before NPE except after &#39;c&#39;...&quot;)\r\n\r\nSomewhat similarly, build tools may insert null checks _automatically_. Notably, Kotlin&#39;s compiler [does this](https://kotlinlang.org/docs/java-interop.html#null-safety-and-platform-types) when passing a possibly null value to a Java API. And when a check fails, the result is a `NullPointerException`. So, to give consistent behavior to any Kotlin users and Java users that you have, you&#39;d need to use `NullPointerException`.","title":"IllegalArgumentException or NullPointerException for a null parameter?","body":"<p>Some collections assume that <code>null</code> is rejected using <code>NullPointerException</code> rather than <code>IllegalArgumentException</code>. For example, if you compare a set containing <code>null</code> to a set that rejects <code>null</code>, the first set will call <code>containsAll</code> on the other and catch its <code>NullPointerException</code> -- but not <code>IllegalArgumentException</code>. (I'm looking at the implementation of <code>AbstractSet.equals</code>.)</p>\n<p>You could reasonably argue that using unchecked exceptions in this way is an antipattern, that comparing collections that contain <code>null</code> to collections that can't contain <code>null</code> is a likely bug that really <em>should</em> produce an exception, or that putting <code>null</code> in a collection at all is a bad idea. Nevertheless, unless you're willing to say that <code>equals</code> should throw an exception in such a case, you're stuck remembering that <code>NullPointerException</code> is required in certain circumstances but not in others. (&quot;IAE before NPE except after 'c'...&quot;)</p>\n<p>Somewhat similarly, build tools may insert null checks <em>automatically</em>. Notably, Kotlin's compiler <a href=\"https://kotlinlang.org/docs/java-interop.html#null-safety-and-platform-types\" rel=\"nofollow noreferrer\">does this</a> when passing a possibly null value to a Java API. And when a check fails, the result is a <code>NullPointerException</code>. So, to give consistent behavior to any Kotlin users and Java users that you have, you'd need to use <code>NullPointerException</code>.</p>\n"},{"tags":[],"owner":{"account_id":14008,"reputation":3782,"user_id":28465,"display_name":"Chris Povirk"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1352478607,"creation_date":1352478607,"answer_id":13312050,"question_id":3881,"body_markdown":"Throwing an exception that&#39;s exclusive to `null` arguments (whether `NullPointerException` or a custom type) makes automated `null` testing more reliable. This automated testing can be done with reflection and a set of default values, as in [Guava][1]&#39;s [`NullPointerTester`][2]. For example, `NullPointerTester` would attempt to call the following method...\r\n\r\n    Foo(String string, List&lt;?&gt; list) {\r\n      checkArgument(string.length() &gt; 0);\r\n      // missing null check for list!\r\n      this.string = string;\r\n      this.list = list;\r\n    }\r\n\r\n...with two lists of arguments: `&quot;&quot;, null` and `null, ImmutableList.of()`. It would test that each of these calls throws the expected `NullPointerException`. For this implementation, passing a `null` list does _not_ produce `NullPointerException`. It does, however, happen to produce an `IllegalArgumentException` because `NullPointerTester` happens to use a default string of `&quot;&quot;`. If `NullPointerTester` expects only `NullPointerException` for `null` values, it catches the bug. If it expects `IllegalArgumentException`, it misses it.\r\n\r\n  [1]: http://code.google.com/p/guava-libraries/\r\n  [2]: http://code.google.com/p/guava-libraries/source/browse/guava-testlib/src/com/google/common/testing/NullPointerTester.java","title":"IllegalArgumentException or NullPointerException for a null parameter?","body":"<p>Throwing an exception that's exclusive to <code>null</code> arguments (whether <code>NullPointerException</code> or a custom type) makes automated <code>null</code> testing more reliable. This automated testing can be done with reflection and a set of default values, as in <a href=\"http://code.google.com/p/guava-libraries/\" rel=\"noreferrer\">Guava</a>'s <a href=\"http://code.google.com/p/guava-libraries/source/browse/guava-testlib/src/com/google/common/testing/NullPointerTester.java\" rel=\"noreferrer\"><code>NullPointerTester</code></a>. For example, <code>NullPointerTester</code> would attempt to call the following method...</p>\n\n<pre><code>Foo(String string, List&lt;?&gt; list) {\n  checkArgument(string.length() &gt; 0);\n  // missing null check for list!\n  this.string = string;\n  this.list = list;\n}\n</code></pre>\n\n<p>...with two lists of arguments: <code>\"\", null</code> and <code>null, ImmutableList.of()</code>. It would test that each of these calls throws the expected <code>NullPointerException</code>. For this implementation, passing a <code>null</code> list does <em>not</em> produce <code>NullPointerException</code>. It does, however, happen to produce an <code>IllegalArgumentException</code> because <code>NullPointerTester</code> happens to use a default string of <code>\"\"</code>. If <code>NullPointerTester</code> expects only <code>NullPointerException</code> for <code>null</code> values, it catches the bug. If it expects <code>IllegalArgumentException</code>, it misses it.</p>\n"},{"tags":[],"owner":{"account_id":2193760,"reputation":372,"user_id":1940048,"display_name":"Sascha Baumeister"},"down_vote_count":2,"up_vote_count":10,"is_accepted":false,"score":8,"last_activity_date":1356975897,"creation_date":1356975897,"answer_id":14104551,"question_id":3881,"body_markdown":"Actually, the question of throwing IllegalArgumentException or NullPointerException is in my humble view only a &quot;holy war&quot; for a minority with an incomlete understanding of exception handling in Java. In general, the rules are simple, and as follows:\r\n\r\n- argument constraint violations must be indicated as fast as possible (-&gt; fast fail), in order to avoid illegal states which are much harder to debug\r\n- in case of an invalid null pointer for whatever reason, throw NullPointerException\r\n- in case of an illegal array/collection index, throw ArrayIndexOutOfBounds\r\n- in case of a negative array/collection size, throw NegativeArraySizeException\r\n- in case of an illegal argument that is not covered by the above, and for which you don&#39;t have another more specific exception type, throw IllegalArgumentException as a wastebasket\r\n- on the other hand, in case of a constraint violation WITHIN A FIELD that could not be avoided by fast fail for some valid reason, catch and rethrow as IllegalStateException or a more specific checked exception. Never let pass the original NullPointerException, ArrayIndexOutOfBounds, etc in this case!\r\n\r\nThere are at least three very good reasons against the case of mapping all kinds of argument constraint violations to IllegalArgumentException, with the third probably being so severe as to mark the practice bad style:\r\n\r\n(1) A programmer cannot a safely assume that all cases of argument constraint violations result in IllegalArgumentException, because the large majority of standard classes use this exception rather as a wastebasket if there is no more specific kind of exception available. Trying to map all cases of argument constraint violations to IllegalArgumentException in your API only leads to programmer frustration using your classes, as the standard libraries mostly follow different rules that violate yours, and most of your API users will use them as well!\r\n\r\n(2) Mapping the exceptions actually results in a different kind of anomaly, caused by single inheritance: All Java exceptions are classes, and therefore support single inheritance only. Therefore, there is no way to create an exception that is truly say both a NullPointerException and an IllegalArgumentException, as subclasses can only inherit from one or the other. Throwing an IllegalArgumentException in case of a null argument therefore makes it harder for API users to distinguish between problems whenever a program tries to programmatically correct the problem, for example by feeding default values into a call repeat!\r\n\r\n(3) Mapping actually creates the danger of bug masking: In order to map argument constraint violations into IllegalArgumentException, you&#39;ll need to code an outer try-catch within every method that has any constrained arguments. However, simply catching RuntimeException in this catch block is out of the question, because that risks mapping documented RuntimeExceptions thrown by libery methods used within yours into IllegalArgumentException, even if they are no caused by argument constraint violations. So you need to be very specific, but even that effort doesn&#39;t protect you from the case that you accidentally map an undocumented runtime exception of another API (i.e. a bug) into an IllegalArgumentException of your API. Even the most careful mapping therefore risks masking programming errors of other library makers as argument constraint violations of your method&#39;s users, which is simply hillareous behavior!\r\n\r\nWith the standard practice on the other hand, the rules stay simple, and exception causes stay unmasked and specific. For the method caller, the rules are easy as well:\r\n- if you encounter a documented runtime exception of any kind because you passed an illegal value, either repeat the call with a default (for this specific exceptions are neccessary), or correct your code\r\n- if on the other hand you enccounter a runtime exception that is not documented to happen for a given set of arguments, file a bug report to the method&#39;s makers to ensure that either their code or their documentation is fixed.","title":"IllegalArgumentException or NullPointerException for a null parameter?","body":"<p>Actually, the question of throwing IllegalArgumentException or NullPointerException is in my humble view only a \"holy war\" for a minority with an incomlete understanding of exception handling in Java. In general, the rules are simple, and as follows:</p>\n\n<ul>\n<li>argument constraint violations must be indicated as fast as possible (-> fast fail), in order to avoid illegal states which are much harder to debug</li>\n<li>in case of an invalid null pointer for whatever reason, throw NullPointerException</li>\n<li>in case of an illegal array/collection index, throw ArrayIndexOutOfBounds</li>\n<li>in case of a negative array/collection size, throw NegativeArraySizeException</li>\n<li>in case of an illegal argument that is not covered by the above, and for which you don't have another more specific exception type, throw IllegalArgumentException as a wastebasket</li>\n<li>on the other hand, in case of a constraint violation WITHIN A FIELD that could not be avoided by fast fail for some valid reason, catch and rethrow as IllegalStateException or a more specific checked exception. Never let pass the original NullPointerException, ArrayIndexOutOfBounds, etc in this case!</li>\n</ul>\n\n<p>There are at least three very good reasons against the case of mapping all kinds of argument constraint violations to IllegalArgumentException, with the third probably being so severe as to mark the practice bad style:</p>\n\n<p>(1) A programmer cannot a safely assume that all cases of argument constraint violations result in IllegalArgumentException, because the large majority of standard classes use this exception rather as a wastebasket if there is no more specific kind of exception available. Trying to map all cases of argument constraint violations to IllegalArgumentException in your API only leads to programmer frustration using your classes, as the standard libraries mostly follow different rules that violate yours, and most of your API users will use them as well!</p>\n\n<p>(2) Mapping the exceptions actually results in a different kind of anomaly, caused by single inheritance: All Java exceptions are classes, and therefore support single inheritance only. Therefore, there is no way to create an exception that is truly say both a NullPointerException and an IllegalArgumentException, as subclasses can only inherit from one or the other. Throwing an IllegalArgumentException in case of a null argument therefore makes it harder for API users to distinguish between problems whenever a program tries to programmatically correct the problem, for example by feeding default values into a call repeat!</p>\n\n<p>(3) Mapping actually creates the danger of bug masking: In order to map argument constraint violations into IllegalArgumentException, you'll need to code an outer try-catch within every method that has any constrained arguments. However, simply catching RuntimeException in this catch block is out of the question, because that risks mapping documented RuntimeExceptions thrown by libery methods used within yours into IllegalArgumentException, even if they are no caused by argument constraint violations. So you need to be very specific, but even that effort doesn't protect you from the case that you accidentally map an undocumented runtime exception of another API (i.e. a bug) into an IllegalArgumentException of your API. Even the most careful mapping therefore risks masking programming errors of other library makers as argument constraint violations of your method's users, which is simply hillareous behavior!</p>\n\n<p>With the standard practice on the other hand, the rules stay simple, and exception causes stay unmasked and specific. For the method caller, the rules are easy as well:\n- if you encounter a documented runtime exception of any kind because you passed an illegal value, either repeat the call with a default (for this specific exceptions are neccessary), or correct your code\n- if on the other hand you enccounter a runtime exception that is not documented to happen for a given set of arguments, file a bug report to the method's makers to ensure that either their code or their documentation is fixed.</p>\n"},{"tags":[],"owner":{"account_id":4774187,"reputation":71,"user_id":4586938,"display_name":"leo"},"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1433508380,"creation_date":1433497393,"answer_id":30663317,"question_id":3881,"body_markdown":"According to your scenario, `IllegalArgumentException` is the best pick, because `null` is not a valid value for your property.","title":"IllegalArgumentException or NullPointerException for a null parameter?","body":"<p>According to your scenario, <code>IllegalArgumentException</code> is the best pick, because <code>null</code> is not a valid value for your property.</p>\n"},{"tags":[],"owner":{"account_id":6512317,"reputation":582,"user_id":5039151,"display_name":"Nitesh Soomani"},"down_vote_count":2,"up_vote_count":6,"is_accepted":false,"score":4,"last_activity_date":1574681909,"creation_date":1435067481,"answer_id":31004679,"question_id":3881,"body_markdown":"`NullPointerException` thrown when attempting to access an object with a reference variable whose current value is `null`.\r\n\r\n`IllegalArgumentException` thrown when a method receives an argument formatted differently than the method expects.","title":"IllegalArgumentException or NullPointerException for a null parameter?","body":"<p><code>NullPointerException</code> thrown when attempting to access an object with a reference variable whose current value is <code>null</code>.</p>\n\n<p><code>IllegalArgumentException</code> thrown when a method receives an argument formatted differently than the method expects.</p>\n"},{"tags":[],"owner":{"account_id":9032469,"reputation":17,"user_id":6729598,"display_name":"vijay"},"down_vote_count":3,"up_vote_count":2,"is_accepted":false,"score":-1,"last_activity_date":1471509606,"creation_date":1471509606,"answer_id":39013552,"question_id":3881,"body_markdown":"Ideally runtime exceptions should not be thrown. A checked exception(business exception) should be created for your scenario. Because if either of these exception is thrown and logged, it misguides the developer while going through the logs. Instead business exceptions do not create that panic and usually ignored while troubleshooting logs.","title":"IllegalArgumentException or NullPointerException for a null parameter?","body":"<p>Ideally runtime exceptions should not be thrown. A checked exception(business exception) should be created for your scenario. Because if either of these exception is thrown and logged, it misguides the developer while going through the logs. Instead business exceptions do not create that panic and usually ignored while troubleshooting logs.</p>\n"},{"tags":[],"owner":{"account_id":6955110,"reputation":493,"user_id":5336361,"display_name":"Ben Seidel"},"down_vote_count":1,"up_vote_count":9,"is_accepted":false,"score":8,"last_activity_date":1532531205,"creation_date":1474625232,"answer_id":39658107,"question_id":3881,"body_markdown":"As a subjective question this should be closed, but as it&#39;s still open:\r\n\r\nThis is part of the internal policy used at my previous place of employment and it worked really well. This is all from memory so I can&#39;t remember the exact wording. It&#39;s worth noting that they did not use checked exceptions, but that is beyond the scope of the question. The unchecked exceptions they did use fell into 3 main categories.\r\n\r\nNullPointerException: Do not throw intentionally. NPEs are to be thrown only by the VM when dereferencing a null reference. All possible effort is to be made to ensure that these are never thrown. @Nullable and @NotNull should be used in conjunction with code analysis tools to find these errors.\r\n\r\nIllegalArgumentException: Thrown when an argument to a function does not conform to the public documentation, such that the error can be identified and described in terms of the arguments passed in. The OP&#39;s situation would fall into this category.\r\n\r\nIllegalStateException: Thrown when a function is called and its arguments are either unexpected at the time they are passed or incompatible with the state of the object the method is a member of.\r\n\r\nFor example, there were two internal versions of the IndexOutOfBoundsException used in things that had a length. One a sub-class of IllegalStateException, used if the index was larger than the length. The other a subclass of IllegalArgumentException, used if the index was negative. This was because you could add more items to the object and the argument would be valid, while a negative number is never valid.\r\n\r\nAs I said, this system works really well, and it took someone to explain why the distinction is there: &quot;Depending on the type of error it is quite straightforward for you to figure out what to do. Even if you can&#39;t actually figure out what went wrong you can figure out where to catch that error and create additional debugging information.&quot;\r\n\r\nNullPointerException: Handle the Null case or put in an assertion so that the NPE is not thrown. If you put in an assertion is just one of the other two types. If possible, continue debugging as if the assertion was there in the first place.\r\n\r\nIllegalArgumentException: you have something wrong at your call site. If the values being passed in are from another function, find out why you are receiving an incorrect value. If you are passing in one of your arguments propagate the error checks up the call stack until you find the function that is not returning what you expect.\r\n\r\nIllegalStateException: You have not called your functions in the correct order. If you are using one of your arguments, check them and throw an IllegalArgumentException describing the issue. You can then propagate the cheeks up against the stack until you find the issue.\r\n\r\nAnyway, his point was that you can only copy the IllegalArgumentAssertions up the stack. There is no way for you to propagate the IllegalStateExceptions or NullPointerExceptions up the stack because they had something to do with your function.","title":"IllegalArgumentException or NullPointerException for a null parameter?","body":"<p>As a subjective question this should be closed, but as it's still open:</p>\n\n<p>This is part of the internal policy used at my previous place of employment and it worked really well. This is all from memory so I can't remember the exact wording. It's worth noting that they did not use checked exceptions, but that is beyond the scope of the question. The unchecked exceptions they did use fell into 3 main categories.</p>\n\n<p>NullPointerException: Do not throw intentionally. NPEs are to be thrown only by the VM when dereferencing a null reference. All possible effort is to be made to ensure that these are never thrown. @Nullable and @NotNull should be used in conjunction with code analysis tools to find these errors.</p>\n\n<p>IllegalArgumentException: Thrown when an argument to a function does not conform to the public documentation, such that the error can be identified and described in terms of the arguments passed in. The OP's situation would fall into this category.</p>\n\n<p>IllegalStateException: Thrown when a function is called and its arguments are either unexpected at the time they are passed or incompatible with the state of the object the method is a member of.</p>\n\n<p>For example, there were two internal versions of the IndexOutOfBoundsException used in things that had a length. One a sub-class of IllegalStateException, used if the index was larger than the length. The other a subclass of IllegalArgumentException, used if the index was negative. This was because you could add more items to the object and the argument would be valid, while a negative number is never valid.</p>\n\n<p>As I said, this system works really well, and it took someone to explain why the distinction is there: \"Depending on the type of error it is quite straightforward for you to figure out what to do. Even if you can't actually figure out what went wrong you can figure out where to catch that error and create additional debugging information.\"</p>\n\n<p>NullPointerException: Handle the Null case or put in an assertion so that the NPE is not thrown. If you put in an assertion is just one of the other two types. If possible, continue debugging as if the assertion was there in the first place.</p>\n\n<p>IllegalArgumentException: you have something wrong at your call site. If the values being passed in are from another function, find out why you are receiving an incorrect value. If you are passing in one of your arguments propagate the error checks up the call stack until you find the function that is not returning what you expect.</p>\n\n<p>IllegalStateException: You have not called your functions in the correct order. If you are using one of your arguments, check them and throw an IllegalArgumentException describing the issue. You can then propagate the cheeks up against the stack until you find the issue.</p>\n\n<p>Anyway, his point was that you can only copy the IllegalArgumentAssertions up the stack. There is no way for you to propagate the IllegalStateExceptions or NullPointerExceptions up the stack because they had something to do with your function.</p>\n"}],"owner":{"account_id":103,"reputation":44354,"user_id":122,"accept_rate":79,"display_name":"Mike Stone"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":202031,"favorite_count":0,"down_vote_count":3,"up_vote_count":577,"closed_date":1474637671,"accepted_answer_id":3886,"answer_count":26,"score":574,"last_activity_date":1664898465,"creation_date":1218050790,"question_id":3881,"body_markdown":"I have a simple setter method for a property and `null` is not appropriate for this particular property. I have always been torn in this situation: should I throw an [`IllegalArgumentException`][1], or a [`NullPointerException`][2]? From the javadocs, both seem appropriate. Is there some kind of an understood standard?  Or is this just one of those things that you should do whatever you prefer and both are really correct?\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalArgumentException.html\r\n  [2]: http://docs.oracle.com/javase/7/docs/api/java/lang/NullPointerException.html","title":"IllegalArgumentException or NullPointerException for a null parameter?","body":"<p>I have a simple setter method for a property and <code>null</code> is not appropriate for this particular property. I have always been torn in this situation: should I throw an <a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalArgumentException.html\" rel=\"noreferrer\"><code>IllegalArgumentException</code></a>, or a <a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/NullPointerException.html\" rel=\"noreferrer\"><code>NullPointerException</code></a>? From the javadocs, both seem appropriate. Is there some kind of an understood standard?  Or is this just one of those things that you should do whatever you prefer and both are really correct?</p>\n"},{"tags":["java","python","json","csv"],"comments":[{"owner":{"account_id":2580320,"reputation":1090,"user_id":2237151,"display_name":"Pietro"},"score":0,"creation_date":1616664220,"post_id":66796180,"comment_id":118075174,"body_markdown":"Do you know the structure of the object you want to build or do you need to extract that from the headers? In any case I don&#39;t think there is a library for it, but it should be easy to build each object parsing the file line by line.","body":"Do you know the structure of the object you want to build or do you need to extract that from the headers? In any case I don&#39;t think there is a library for it, but it should be easy to build each object parsing the file line by line."}],"answers":[{"tags":[],"owner":{"account_id":17914743,"reputation":11,"user_id":13015971,"display_name":"Tarun Kumar"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1616708396,"creation_date":1616664379,"answer_id":66796489,"question_id":66796180,"body_markdown":"    JSONObject jsonObject = new JSONObject(&quot;{\r\n    &quot;attrib1&quot;:{\r\n               &quot;x&quot;:1,\r\n               &quot;y&quot;:2,\r\n               &quot;z&quot;:[{&quot;p&quot;:100,&quot;c&quot;:200},{&quot;p&quot;:500,&quot;c&quot;:600}]\r\n              },\r\n    &quot;attrib2&quot;:{&quot;R&quot;:222,&quot;K&quot;:320},\r\n    &quot;attrib3&quot;:&quot;hello&quot;\r\n    }&quot;);\r\n\r\nJust try and out.\r\nIt may help","title":"how to convert a CSV into JSON using Python Or Java. The csv is representation of a nested JSON (Containing array of json objects and nested objects)","body":"<pre><code>JSONObject jsonObject = new JSONObject(&quot;{\n&quot;attrib1&quot;:{\n           &quot;x&quot;:1,\n           &quot;y&quot;:2,\n           &quot;z&quot;:[{&quot;p&quot;:100,&quot;c&quot;:200},{&quot;p&quot;:500,&quot;c&quot;:600}]\n          },\n&quot;attrib2&quot;:{&quot;R&quot;:222,&quot;K&quot;:320},\n&quot;attrib3&quot;:&quot;hello&quot;\n}&quot;);\n</code></pre>\n<p>Just try and out.\nIt may help</p>\n"},{"tags":[],"owner":{"account_id":11597557,"reputation":469,"user_id":8495832,"display_name":"SYED MUSTAFA HUSSAIN"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1616665873,"creation_date":1616665873,"answer_id":66796902,"question_id":66796180,"body_markdown":"First you iterate the `key` Then similarly iterate `value` and save into csv\r\n\r\n\r\n      String eol = System.getProperty(&quot;line.separator&quot;);\r\n                    try(Writer writer = new FileWriter(&quot;C:\\\\Users\\\\m.hussain\\\\Desktop\\\\CSV\\\\testing.csv&quot;))\r\n                    {\r\n                        for (Map&lt;String, Object&gt; map : objectRecords)\r\n                        {\r\n                            for (Map.Entry&lt;String, Object&gt; entry : map.entrySet())\r\n                            {\r\n                                writer.append(entry.getKey())\r\n                                        .append(&#39;,&#39;);\r\n                            }\r\n                            break;\r\n                        }\r\n                        writer.append(eol);\r\n                        for (Map&lt;String, Object&gt; map : objectRecords)\r\n                        {\r\n                            for (Map.Entry&lt;String, Object&gt; entry : map.entrySet())\r\n                            {\r\n                                JSONObject jsonObject;\r\n                                try\r\n                                {\r\n                                    jsonObject = new JSONObject(String.valueOf(entry.getValue()));\r\n                                    writer.append(jsonObject.getString(&quot;value&quot;));\r\n                                }\r\n                                catch (Exception e)\r\n                                {\r\n                                    writer.append(String.valueOf(entry.getValue()));\r\n                                }\r\n                                writer.append(&#39;,&#39;);\r\n                            }\r\n                            writer.append(eol);\r\n                        }","title":"how to convert a CSV into JSON using Python Or Java. The csv is representation of a nested JSON (Containing array of json objects and nested objects)","body":"<p>First you iterate the <code>key</code> Then similarly iterate <code>value</code> and save into csv</p>\n<pre><code>  String eol = System.getProperty(&quot;line.separator&quot;);\n                try(Writer writer = new FileWriter(&quot;C:\\\\Users\\\\m.hussain\\\\Desktop\\\\CSV\\\\testing.csv&quot;))\n                {\n                    for (Map&lt;String, Object&gt; map : objectRecords)\n                    {\n                        for (Map.Entry&lt;String, Object&gt; entry : map.entrySet())\n                        {\n                            writer.append(entry.getKey())\n                                    .append(',');\n                        }\n                        break;\n                    }\n                    writer.append(eol);\n                    for (Map&lt;String, Object&gt; map : objectRecords)\n                    {\n                        for (Map.Entry&lt;String, Object&gt; entry : map.entrySet())\n                        {\n                            JSONObject jsonObject;\n                            try\n                            {\n                                jsonObject = new JSONObject(String.valueOf(entry.getValue()));\n                                writer.append(jsonObject.getString(&quot;value&quot;));\n                            }\n                            catch (Exception e)\n                            {\n                                writer.append(String.valueOf(entry.getValue()));\n                            }\n                            writer.append(',');\n                        }\n                        writer.append(eol);\n                    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":25095701,"reputation":11,"user_id":18946901,"display_name":"LeoTaylor"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1651914526,"creation_date":1651914526,"answer_id":72151056,"question_id":66796180,"body_markdown":"The first row of your CSV contains field names (which uses the underline to show the hierarchical relationship) and detail data starts from the second line, and you need to transform the CSV to JSON format. Here the difficulty is dynamic parsing. It will involve grouping, recursion, loop, conditional judgment and string concatenation. The code will be rather lengthy if you try to do this in Java.\r\n\r\nTry using SPL, the open-source Java package, to do this. It is easy and five lines of code are enough:\r\n[enter image description here][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/i2inE.png\r\nSPL offers JDBC driver to be invoked by Java. Just store the above SPL script as recurse.splx and invoke it in a Java application as you call a stored procedure:\r\n```\r\n\r\nClass.forName(&quot;com.esproc.jdbc.InternalDriver&quot;);\r\ncon= DriverManager.getConnection(&quot;jdbc:esproc:local://&quot;);\r\nst = con.prepareCall(&quot;call recurse()&quot;);\r\nst.execute();\r\n\r\n```","title":"how to convert a CSV into JSON using Python Or Java. The csv is representation of a nested JSON (Containing array of json objects and nested objects)","body":"<p>The first row of your CSV contains field names (which uses the underline to show the hierarchical relationship) and detail data starts from the second line, and you need to transform the CSV to JSON format. Here the difficulty is dynamic parsing. It will involve grouping, recursion, loop, conditional judgment and string concatenation. The code will be rather lengthy if you try to do this in Java.</p>\n<p>Try using SPL, the open-source Java package, to do this. It is easy and five lines of code are enough:\n<a href=\"https://i.stack.imgur.com/i2inE.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>SPL offers JDBC driver to be invoked by Java. Just store the above SPL script as recurse.splx and invoke it in a Java application as you call a stored procedure:</p>\n<pre><code>\nClass.forName(&quot;com.esproc.jdbc.InternalDriver&quot;);\ncon= DriverManager.getConnection(&quot;jdbc:esproc:local://&quot;);\nst = con.prepareCall(&quot;call recurse()&quot;);\nst.execute();\n\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13009011,"reputation":1105,"user_id":9402689,"display_name":"Raymond Choi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664898274,"creation_date":1664898274,"answer_id":73950403,"question_id":66796180,"body_markdown":"Use library _Josson_ to build the JSON structure.\r\n\r\nFirst, split the csv file header and content, and build a Map. Then use function `unflatten()` to do transformation.\r\n\r\n    LinkedHashMap&lt;String, Object&gt; csv = new LinkedHashMap&lt;&gt;();\r\n    csv.put(&quot;attrib1_x&quot;, 1);\r\n    csv.put(&quot;attrib1_y&quot;, 2);\r\n    csv.put(&quot;attrib1_z_0_p&quot;, 100);\r\n    csv.put(&quot;attrib1_z_0_c&quot;, 200);\r\n    csv.put(&quot;attrib1_z_1_p&quot;, 500);\r\n    csv.put(&quot;attrib1_z_1_c&quot;, 600);\r\n    csv.put(&quot;attrib2_R&quot;, 222);\r\n    csv.put(&quot;attrib2_K&quot;, 320);\r\n    csv.put(&quot;attrib3&quot;, &quot;hello&quot;);\r\n\r\n    Josson josson = Josson.from(csv);\r\n    System.out.println(josson.getNode().toPrettyString()); // before unflatten\r\n\r\n    JsonNode node = josson.getNode(&quot;unflatten(&#39;_&#39;)&quot;);\r\n    System.out.println(node.toPrettyString()); // after unflatten\r\n\r\nOutput: before unflatten\r\n\r\n    {\r\n      &quot;attrib1_x&quot; : 1,\r\n      &quot;attrib1_y&quot; : 2,\r\n      &quot;attrib1_z_0_p&quot; : 100,\r\n      &quot;attrib1_z_0_c&quot; : 200,\r\n      &quot;attrib1_z_1_p&quot; : 500,\r\n      &quot;attrib1_z_1_c&quot; : 600,\r\n      &quot;attrib2_R&quot; : 222,\r\n      &quot;attrib2_K&quot; : 320,\r\n      &quot;attrib3&quot; : &quot;hello&quot;\r\n    }\r\n    \r\nOutput: after unflatten\r\n\r\n    {\r\n      &quot;attrib1&quot; : {\r\n        &quot;x&quot; : 1,\r\n        &quot;y&quot; : 2,\r\n        &quot;z&quot; : [ {\r\n          &quot;p&quot; : 100,\r\n          &quot;c&quot; : 200\r\n        }, {\r\n          &quot;p&quot; : 500,\r\n          &quot;c&quot; : 600\r\n        } ]\r\n      },\r\n      &quot;attrib2&quot; : {\r\n        &quot;R&quot; : 222,\r\n        &quot;K&quot; : 320\r\n      },\r\n      &quot;attrib3&quot; : &quot;hello&quot;\r\n    }","title":"how to convert a CSV into JSON using Python Or Java. The csv is representation of a nested JSON (Containing array of json objects and nested objects)","body":"<p>Use library <em>Josson</em> to build the JSON structure.</p>\n<p>First, split the csv file header and content, and build a Map. Then use function <code>unflatten()</code> to do transformation.</p>\n<pre><code>LinkedHashMap&lt;String, Object&gt; csv = new LinkedHashMap&lt;&gt;();\ncsv.put(&quot;attrib1_x&quot;, 1);\ncsv.put(&quot;attrib1_y&quot;, 2);\ncsv.put(&quot;attrib1_z_0_p&quot;, 100);\ncsv.put(&quot;attrib1_z_0_c&quot;, 200);\ncsv.put(&quot;attrib1_z_1_p&quot;, 500);\ncsv.put(&quot;attrib1_z_1_c&quot;, 600);\ncsv.put(&quot;attrib2_R&quot;, 222);\ncsv.put(&quot;attrib2_K&quot;, 320);\ncsv.put(&quot;attrib3&quot;, &quot;hello&quot;);\n\nJosson josson = Josson.from(csv);\nSystem.out.println(josson.getNode().toPrettyString()); // before unflatten\n\nJsonNode node = josson.getNode(&quot;unflatten('_')&quot;);\nSystem.out.println(node.toPrettyString()); // after unflatten\n</code></pre>\n<p>Output: before unflatten</p>\n<pre><code>{\n  &quot;attrib1_x&quot; : 1,\n  &quot;attrib1_y&quot; : 2,\n  &quot;attrib1_z_0_p&quot; : 100,\n  &quot;attrib1_z_0_c&quot; : 200,\n  &quot;attrib1_z_1_p&quot; : 500,\n  &quot;attrib1_z_1_c&quot; : 600,\n  &quot;attrib2_R&quot; : 222,\n  &quot;attrib2_K&quot; : 320,\n  &quot;attrib3&quot; : &quot;hello&quot;\n}\n</code></pre>\n<p>Output: after unflatten</p>\n<pre><code>{\n  &quot;attrib1&quot; : {\n    &quot;x&quot; : 1,\n    &quot;y&quot; : 2,\n    &quot;z&quot; : [ {\n      &quot;p&quot; : 100,\n      &quot;c&quot; : 200\n    }, {\n      &quot;p&quot; : 500,\n      &quot;c&quot; : 600\n    } ]\n  },\n  &quot;attrib2&quot; : {\n    &quot;R&quot; : 222,\n    &quot;K&quot; : 320\n  },\n  &quot;attrib3&quot; : &quot;hello&quot;\n}\n</code></pre>\n"}],"owner":{"account_id":20716598,"reputation":11,"user_id":15211865,"display_name":"rr1_Infinity"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":155,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":4,"score":0,"last_activity_date":1664898274,"creation_date":1616663180,"question_id":66796180,"body_markdown":"I get a csv file like :\r\n\r\n\r\nattrib1_x , attrib1_y , attrib1_z_0_p , attrib1_z_0_c , attrib1_z_1_p , attrib1_z_1_c , attrib2_R , attrib2_K , attrib3\r\n\r\n1 , 2 , 100 , 200 , 500 , 600 , 222 , 320 ,hello\r\n\r\n-------------------------------------------------------------\r\n\r\n\r\nThe csv represents a json like below.\r\n\r\n - ---------\r\n\r\n    {\r\n    &quot;attrib1&quot;:{\r\n               &quot;x&quot;:1,\r\n               &quot;y&quot;:2,\r\n               &quot;z&quot;:[{&quot;p&quot;:100,&quot;c&quot;:200},{&quot;p&quot;:500,&quot;c&quot;:600}]\r\n              },\r\n    &quot;attrib2&quot;:{&quot;R&quot;:222,&quot;K&quot;:320},\r\n    &quot;attrib3&quot;:&quot;hello&quot;\r\n    }\r\n\r\n------------------------------------------------------------------------\r\n\r\nSo basically here I get the above CSV, and need to convert it to the JSON structure shown\r\n------------------------------------------------------------------------\r\n\r\n. Not sure how to do it. is there any library(Python/Java) which can help me with this.\r\n\r\nIf any solution/suggestion with different csv header available that will also work. i can ask the team to provide me the csv with different header names to represent the nested / arrays.\r\n\r\n","title":"how to convert a CSV into JSON using Python Or Java. The csv is representation of a nested JSON (Containing array of json objects and nested objects)","body":"<p>I get a csv file like :</p>\n<p>attrib1_x , attrib1_y , attrib1_z_0_p , attrib1_z_0_c , attrib1_z_1_p , attrib1_z_1_c , attrib2_R , attrib2_K , attrib3</p>\n<p>1 , 2 , 100 , 200 , 500 , 600 , 222 , 320 ,hello</p>\n<hr />\n<p>The csv represents a json like below.</p>\n<hr />\n<pre><code>{\n&quot;attrib1&quot;:{\n           &quot;x&quot;:1,\n           &quot;y&quot;:2,\n           &quot;z&quot;:[{&quot;p&quot;:100,&quot;c&quot;:200},{&quot;p&quot;:500,&quot;c&quot;:600}]\n          },\n&quot;attrib2&quot;:{&quot;R&quot;:222,&quot;K&quot;:320},\n&quot;attrib3&quot;:&quot;hello&quot;\n}\n</code></pre>\n<hr />\n<h2>So basically here I get the above CSV, and need to convert it to the JSON structure shown</h2>\n<p>. Not sure how to do it. is there any library(Python/Java) which can help me with this.</p>\n<p>If any solution/suggestion with different csv header available that will also work. i can ask the team to provide me the csv with different header names to represent the nested / arrays.</p>\n"},{"tags":["java","nio","nio2","jimfs"],"comments":[{"owner":{"account_id":6528825,"reputation":21455,"user_id":5050667,"accept_rate":91,"display_name":"Yassin Hajaj"},"score":0,"creation_date":1469367798,"post_id":38552650,"comment_id":64496073,"body_markdown":"Use `ZipFile(String)` instead?","body":"Use <code>ZipFile(String)</code> instead?"},{"owner":{"account_id":6539656,"reputation":11090,"user_id":5057736,"accept_rate":84,"display_name":"Pavel_K"},"score":1,"creation_date":1469368331,"post_id":38552650,"comment_id":64496231,"body_markdown":"@Yassin Hajaj I get `FileNotFoundException` because it finds the file on default file system, but not on virtual one.","body":"@Yassin Hajaj I get <code>FileNotFoundException</code> because it finds the file on default file system, but not on virtual one."}],"answers":[{"tags":[],"owner":{"account_id":50585,"reputation":39940,"user_id":150978,"accept_rate":78,"display_name":"Robert"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1651131064,"creation_date":1469377497,"answer_id":38554195,"question_id":38552650,"body_markdown":"The `ZipFile` class is limited to files in the file-system.\r\n\r\nAn alternative would be to use `ZipInputStream` instead. Create an `InputStream` from your `Path` using \r\n\r\n    Path path = ...\r\n    InputStream in = Files.newInputStream(path, openOptions)\r\n\r\nand the use the `InputStream` to create an `ZipInputStream`. This way should work as expected:\r\n\r\n    ZipInputStream zin = new ZipInputStream(in)\r\n\r\nSo the recommended way to use it is:\r\n\r\n    try (ZipInputStream zin = new ZipInputStream(Files.newInputStream(path))) {\r\n        // do something with the ZipInputStream\r\n    }\r\n\r\nNote that decompressing certain ZIP files using `ZipInputStream` [will fail because of their ZIP structure][1]. This is a technical limitation of the ZIP format and can&#39;t be solved. In such cases you have to create a temporary file in file-system or memory and use a different ZIP class like `ZipFile`.\r\n\r\n\r\n  [1]: https://stackoverflow.com/q/47208272/150978","title":"Java: ZipFile using Path","body":"<p>The <code>ZipFile</code> class is limited to files in the file-system.</p>\n<p>An alternative would be to use <code>ZipInputStream</code> instead. Create an <code>InputStream</code> from your <code>Path</code> using</p>\n<pre><code>Path path = ...\nInputStream in = Files.newInputStream(path, openOptions)\n</code></pre>\n<p>and the use the <code>InputStream</code> to create an <code>ZipInputStream</code>. This way should work as expected:</p>\n<pre><code>ZipInputStream zin = new ZipInputStream(in)\n</code></pre>\n<p>So the recommended way to use it is:</p>\n<pre><code>try (ZipInputStream zin = new ZipInputStream(Files.newInputStream(path))) {\n    // do something with the ZipInputStream\n}\n</code></pre>\n<p>Note that decompressing certain ZIP files using <code>ZipInputStream</code> <a href=\"https://stackoverflow.com/q/47208272/150978\">will fail because of their ZIP structure</a>. This is a technical limitation of the ZIP format and can't be solved. In such cases you have to create a temporary file in file-system or memory and use a different ZIP class like <code>ZipFile</code>.</p>\n"},{"tags":[],"owner":{"account_id":29934,"reputation":3390,"user_id":81252,"accept_rate":90,"display_name":"Alexey Sviridov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664897839,"creation_date":1664897839,"answer_id":73950318,"question_id":38552650,"body_markdown":"I just solved exactly the same problem (I need to unpack zip file stored on JimFS filesystem)\r\n\r\nThere is a problem with Robert&#39;s response. `ZipFile` and `ZipInputStream` similar, but not equal. One of big disadvantage of ZipInputStream - it&#39;s doesn&#39;t fail in case of wrong or damaged zip file. It just return null on first `nextEntry` call. For example following test will pass without errors\r\n```kotlin\r\n    @Test\r\n    fun testZip() {\r\n        val randomBytes = Random.nextBytes(1000)\r\n\r\n        ZipInputStream(ByteArrayInputStream(randomBytes)).use { zis -&gt;\r\n            var zipEntry = zis.nextEntry\r\n            while (zipEntry != null) {\r\n                println(zipEntry.name)\r\n                zipEntry = zis.nextEntry\r\n            }\r\n        }\r\n    }\r\n```\r\n\r\n\r\nSo, if in case of zip files obtained from user input or by unstable network, there isn&#39;t any chance to check zip using `ZipInputStream`. The only option here - to use Java&#39;s `FileSystems`. The following test will fail with error `zip END header not found`. With correct zip file newFileSystem works fine, of course.\r\n\r\n```\r\n    @Test\r\n    fun testZipFS() {\r\n        val randomBytes = Random.nextBytes(1000)\r\n\r\n        val tmpFile = Files.createTempFile(Path.of(&quot;/tmp&quot;), &quot;tmp&quot;, &quot;.zip&quot;)\r\n        Files.write(tmpFile, randomBytes)\r\n\r\n        val zipFs = FileSystems.newFileSystem(srcZip, null)\r\n\r\n        val zipRoot = zipFs.rootDirectories.single()\r\n        Files.walk(zipRoot).forEach { p -&gt;\r\n            println(p.absolutePathString())\r\n        }\r\n    }\r\n\r\n```\r\n","title":"Java: ZipFile using Path","body":"<p>I just solved exactly the same problem (I need to unpack zip file stored on JimFS filesystem)</p>\n<p>There is a problem with Robert's response. <code>ZipFile</code> and <code>ZipInputStream</code> similar, but not equal. One of big disadvantage of ZipInputStream - it's doesn't fail in case of wrong or damaged zip file. It just return null on first <code>nextEntry</code> call. For example following test will pass without errors</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>    @Test\n    fun testZip() {\n        val randomBytes = Random.nextBytes(1000)\n\n        ZipInputStream(ByteArrayInputStream(randomBytes)).use { zis -&gt;\n            var zipEntry = zis.nextEntry\n            while (zipEntry != null) {\n                println(zipEntry.name)\n                zipEntry = zis.nextEntry\n            }\n        }\n    }\n</code></pre>\n<p>So, if in case of zip files obtained from user input or by unstable network, there isn't any chance to check zip using <code>ZipInputStream</code>. The only option here - to use Java's <code>FileSystems</code>. The following test will fail with error <code>zip END header not found</code>. With correct zip file newFileSystem works fine, of course.</p>\n<pre><code>    @Test\n    fun testZipFS() {\n        val randomBytes = Random.nextBytes(1000)\n\n        val tmpFile = Files.createTempFile(Path.of(&quot;/tmp&quot;), &quot;tmp&quot;, &quot;.zip&quot;)\n        Files.write(tmpFile, randomBytes)\n\n        val zipFs = FileSystems.newFileSystem(srcZip, null)\n\n        val zipRoot = zipFs.rootDirectories.single()\n        Files.walk(zipRoot).forEach { p -&gt;\n            println(p.absolutePathString())\n        }\n    }\n\n</code></pre>\n"}],"owner":{"account_id":6539656,"reputation":11090,"user_id":5057736,"accept_rate":84,"display_name":"Pavel_K"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3779,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":38554195,"answer_count":2,"score":3,"last_activity_date":1664897839,"creation_date":1469367664,"question_id":38552650,"body_markdown":"I have a `Path` to zip file on virtual filesystem (jimfs) and I need to open this zip file using `ZipFile`. \r\n\r\nBut there is no constructor in `ZipFile` to get `Path` as argument, only `File`.\r\n\r\nHowever, I can&#39;t create from my `Path` a `File` (path.toFile()) because I get `UnsupportedOperationException`. How can I open my zip file with `ZipFile`? Or maybe there are other ways of working with zip files which are not on default filesystem?\r\n","title":"Java: ZipFile using Path","body":"<p>I have a <code>Path</code> to zip file on virtual filesystem (jimfs) and I need to open this zip file using <code>ZipFile</code>. </p>\n\n<p>But there is no constructor in <code>ZipFile</code> to get <code>Path</code> as argument, only <code>File</code>.</p>\n\n<p>However, I can't create from my <code>Path</code> a <code>File</code> (path.toFile()) because I get <code>UnsupportedOperationException</code>. How can I open my zip file with <code>ZipFile</code>? Or maybe there are other ways of working with zip files which are not on default filesystem?</p>\n"},{"tags":["java","spring","spring-boot"],"answers":[{"tags":[],"owner":{"account_id":61566,"reputation":68924,"user_id":183406,"accept_rate":74,"display_name":"meriton"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1664897221,"creation_date":1664897221,"answer_id":73950195,"question_id":73949829,"body_markdown":"`@Conditional...` bean definitions are indeed the typical approach for this, and your approach sounds reasonable. If you&#39;re concerned that it might be hard to find which components depend on the configuration bean, you could:\r\n\r\n* declare your own `@Conditional` annotation, allowing you to find all matching components by scanning for the uses of that annotation, or\r\n* move all bean definitions sharing a condition into a configuration class with that condition, declaring the services using java based configuration. The disadvantage is that java based configuration makes constructor injection a bit verbose.\r\n* or you could move these into separate packages, and use conditional component scanning to only pick up the beans you want. However, that is only easy if the conditional packages are outside your normal package root, which is overkill in most cases.","title":"Conditionally enabling an external system integration in Spring Boot","body":"<p><code>@Conditional...</code> bean definitions are indeed the typical approach for this, and your approach sounds reasonable. If you're concerned that it might be hard to find which components depend on the configuration bean, you could:</p>\n<ul>\n<li>declare your own <code>@Conditional</code> annotation, allowing you to find all matching components by scanning for the uses of that annotation, or</li>\n<li>move all bean definitions sharing a condition into a configuration class with that condition, declaring the services using java based configuration. The disadvantage is that java based configuration makes constructor injection a bit verbose.</li>\n<li>or you could move these into separate packages, and use conditional component scanning to only pick up the beans you want. However, that is only easy if the conditional packages are outside your normal package root, which is overkill in most cases.</li>\n</ul>\n"}],"owner":{"account_id":3308824,"reputation":859,"user_id":2782785,"accept_rate":86,"display_name":"Markus Yrj&#246;l&#228;"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":62,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73950195,"answer_count":1,"score":1,"last_activity_date":1664897221,"creation_date":1664895351,"question_id":73949829,"body_markdown":"I&#39;m trying to implement support for several **alternative** integrations to external systems in a Spring Boot app. The idea is that a specific environment variable defines which integration is in use (there can only be one enabled at a time), and Spring Boot only initializes the components (`@Configuration`, `@Service`, `@RestController` etc.) specific to that integration. Is there a best practice approach for doing this?\r\n\r\nCurrently I&#39;m thinking of something like this:\r\n- Create one `@Configuration` class per integration, annotate it with `@ConditionalOnProperty`. Read all relevant environment variables during app initialization, validate them, and prevent the app from starting if the configurations are invalid.\r\n- Annotate all other components related to that particular integration with `@ConditionalOnBean`, and make them dependent on the configuration bean being initialized.\r\n\r\nSimplified example:\r\n\r\n```java\r\n@Configuration\r\n@ConditionalOnProperty(prefix = &quot;integration&quot;, name = &quot;name&quot;, havingValue = &quot;FOO&quot;)\r\nclass FooConfig {\r\n    // Read environment variables etc.\r\n}\r\n\r\n@Service\r\n@ConditionalOnBean(FooConfig.class)\r\nclass FooService implements ExternalSystemIntegration {\r\n\r\n    @Inject\r\n    // Inject the configuration to get access to the relevant environment variables\r\n    public FooService(FooConfig config, ...) { ... }\r\n\r\n    @Override\r\n    public void doIt() { ... }\r\n}\r\n```\r\n\r\nDoes this approach seem reasonable, or can you see some problems with it? One (small) downside is that it&#39;s not immediately clear which components are related to a specific integration (you need to find out which components depend on the configuration bean).\r\n\r\nOne alternative solution would be to create only one configuration class with a bunch of `@Bean` methods that would use the various `@Conditional*` annotations to control which components should be initialized. However, this would require manually feeding the dependencies to the created beans (as we use constructor injection), which I&#39;d very much like to avoid. And I&#39;m not sure if there&#39;s a good way to control which environment variables to read and validate during app bootstrapping with this solution.","title":"Conditionally enabling an external system integration in Spring Boot","body":"<p>I'm trying to implement support for several <strong>alternative</strong> integrations to external systems in a Spring Boot app. The idea is that a specific environment variable defines which integration is in use (there can only be one enabled at a time), and Spring Boot only initializes the components (<code>@Configuration</code>, <code>@Service</code>, <code>@RestController</code> etc.) specific to that integration. Is there a best practice approach for doing this?</p>\n<p>Currently I'm thinking of something like this:</p>\n<ul>\n<li>Create one <code>@Configuration</code> class per integration, annotate it with <code>@ConditionalOnProperty</code>. Read all relevant environment variables during app initialization, validate them, and prevent the app from starting if the configurations are invalid.</li>\n<li>Annotate all other components related to that particular integration with <code>@ConditionalOnBean</code>, and make them dependent on the configuration bean being initialized.</li>\n</ul>\n<p>Simplified example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\n@ConditionalOnProperty(prefix = &quot;integration&quot;, name = &quot;name&quot;, havingValue = &quot;FOO&quot;)\nclass FooConfig {\n    // Read environment variables etc.\n}\n\n@Service\n@ConditionalOnBean(FooConfig.class)\nclass FooService implements ExternalSystemIntegration {\n\n    @Inject\n    // Inject the configuration to get access to the relevant environment variables\n    public FooService(FooConfig config, ...) { ... }\n\n    @Override\n    public void doIt() { ... }\n}\n</code></pre>\n<p>Does this approach seem reasonable, or can you see some problems with it? One (small) downside is that it's not immediately clear which components are related to a specific integration (you need to find out which components depend on the configuration bean).</p>\n<p>One alternative solution would be to create only one configuration class with a bunch of <code>@Bean</code> methods that would use the various <code>@Conditional*</code> annotations to control which components should be initialized. However, this would require manually feeding the dependencies to the created beans (as we use constructor injection), which I'd very much like to avoid. And I'm not sure if there's a good way to control which environment variables to read and validate during app bootstrapping with this solution.</p>\n"},{"tags":["python","java","windows","frame"],"answers":[{"tags":[],"owner":{"account_id":277416,"reputation":681848,"user_id":571407,"accept_rate":100,"display_name":"JB Nizet"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1319218541,"creation_date":1319217302,"answer_id":7852896,"question_id":7852853,"body_markdown":"This can be done setting your `LayoutManager` to `null`, but it&#39;s highly discouraged precisely because it annihilates the goal of layouts, which is to be able to have good-looking frames, regardless of the look and feel, screen resolution, etc.\r\n\r\nYou&#39;d better [learn how to use layout managers][1], because that&#39;s the good way to design a GUI. \r\n\r\n\r\n  [1]: http://download.oracle.com/javase/tutorial/uiswing/layout/using.html","title":"How do I convert the .place() method in python to java?","body":"<p>This can be done setting your <code>LayoutManager</code> to <code>null</code>, but it's highly discouraged precisely because it annihilates the goal of layouts, which is to be able to have good-looking frames, regardless of the look and feel, screen resolution, etc.</p>\n\n<p>You'd better <a href=\"http://download.oracle.com/javase/tutorial/uiswing/layout/using.html\" rel=\"nofollow\">learn how to use layout managers</a>, because that's the good way to design a GUI. </p>\n"},{"tags":[],"owner":{"account_id":18250,"reputation":39302,"user_id":41655,"accept_rate":76,"display_name":"millimoose"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1319232878,"creation_date":1319232878,"answer_id":7855539,"question_id":7852853,"body_markdown":"There&#39;s a [Swing tutorial][1] that gives a concise example on positioning widgets absolutely.\r\n\r\n\r\n  [1]: http://download.oracle.com/javase/tutorial/uiswing/layout/none.html","title":"How do I convert the .place() method in python to java?","body":"<p>There's a <a href=\"http://download.oracle.com/javase/tutorial/uiswing/layout/none.html\" rel=\"nofollow\">Swing tutorial</a> that gives a concise example on positioning widgets absolutely.</p>\n"},{"tags":[],"owner":{"account_id":51881,"reputation":38016,"user_id":155020,"accept_rate":80,"display_name":"chubbsondubs"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1319233593,"creation_date":1319233593,"answer_id":7855645,"question_id":7852853,"body_markdown":"If you do start using LayoutManagers I recommend using TableLayout because it far easier and more powerful than GridBagLayout.\r\n\r\nhttp://java.sun.com/products/jfc/tsc/articles/tablelayout/\r\n\r\nHopefully your need to do absolute positioning is relatively small because it&#39;s not flexible should the user resize the window, and your components need to change their size.  If you are trying to build a component that renders to X,Y to draw graphics you can subclass JComponent and override paint().","title":"How do I convert the .place() method in python to java?","body":"<p>If you do start using LayoutManagers I recommend using TableLayout because it far easier and more powerful than GridBagLayout.</p>\n\n<p><a href=\"http://java.sun.com/products/jfc/tsc/articles/tablelayout/\" rel=\"nofollow\">http://java.sun.com/products/jfc/tsc/articles/tablelayout/</a></p>\n\n<p>Hopefully your need to do absolute positioning is relatively small because it's not flexible should the user resize the window, and your components need to change their size.  If you are trying to build a component that renders to X,Y to draw graphics you can subclass JComponent and override paint().</p>\n"}],"owner":{"account_id":964479,"reputation":2299,"user_id":988172,"accept_rate":74,"display_name":"Josh Menzel"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":163,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":7855539,"answer_count":3,"score":4,"last_activity_date":1664897113,"creation_date":1319216990,"question_id":7852853,"body_markdown":"I am trying to convert my Python Code to Java. I need a GUI that is similar to python where I can use `widgetname.place(x,y)` to place objects anywhere I want in the window. I want to be able to specify where the object is placed in the window. I have tried `GridLayout`, `GridBagLayout`, `BoxLayout` and `FlowLayout`. None of those are allowing me to secify x and y coordinates to place my objects(text fields, labels, buttons) where ever I want. I need to be able to specify where the object goes on the screen using x and y coordinates.\r\n\r\nAnyone have any ideas?","title":"How do I convert the .place() method in python to java?","body":"<p>I am trying to convert my Python Code to Java. I need a GUI that is similar to python where I can use <code>widgetname.place(x,y)</code> to place objects anywhere I want in the window. I want to be able to specify where the object is placed in the window. I have tried <code>GridLayout</code>, <code>GridBagLayout</code>, <code>BoxLayout</code> and <code>FlowLayout</code>. None of those are allowing me to secify x and y coordinates to place my objects(text fields, labels, buttons) where ever I want. I need to be able to specify where the object goes on the screen using x and y coordinates.</p>\n\n<p>Anyone have any ideas?</p>\n"},{"tags":["java","string","jexl"],"answers":[{"tags":[],"owner":{"account_id":11845668,"reputation":187,"user_id":8668250,"display_name":"henrib"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1664896721,"creation_date":1664896721,"answer_id":73950091,"question_id":73914307,"body_markdown":"JEXL offers many ways to achieve a tight integration but it requires some  code to do so.\r\n\r\nNot sure if JEXLs integration in your library allows this but JEXL misses some information to achieve what you seek. For JEXL to filter streams, it needs the definition of how to to do that.\r\n\r\nThe example below (running on JEXL 3.3 SNAPSHOT) does illustrate  one way of doing so by extending the JexlContext (could also be done by extending the JexlArithmetic).\r\n    \r\n    /**\r\n     * Mock driver.\r\n     */\r\n    public static class Driver0930 {\r\n        private String name;\r\n        Driver0930(String n) {\r\n            name = n;\r\n        }\r\n        public String getAttributeName() {\r\n            return name;\r\n        }\r\n    }\r\n\r\n    public static class Context0930 extends MapContext {\r\n        /**\r\n         * This allows using a JEXL lambda as a filter.\r\n         * @param stream the stream\r\n         * @param filter the lambda to use as filter\r\n         * @return the filtered stream\r\n         */\r\n        public Stream&lt;?&gt; filter(Stream&lt;?&gt; stream, JexlScript filter) {\r\n            return stream.filter(x -&gt; Boolean.TRUE.equals(filter.execute(this, x)));\r\n        }\r\n    }\r\n\r\n    @Test\r\n    public void testStackOvflw20220930() {\r\n        // fill some drivers in a list\r\n        List&lt;Driver0930&gt; values = new ArrayList&lt;&gt;();\r\n        for(int i = 0; i &lt; 8; ++i) {\r\n            values.add(new Driver0930(&quot;drvr&quot; + Integer.toOctalString(i)));\r\n        }\r\n        for(int i = 0; i &lt; 4; ++i) {\r\n            values.add(new Driver0930(&quot;favorite&quot; + Integer.toOctalString(i)));\r\n        }\r\n        // Use a context that can filter and that exposes Collectors\r\n        JexlEngine jexl = new JexlBuilder().safe(false).create();\r\n        JexlContext context = new Context0930();\r\n        context.set(&quot;values&quot;, values);\r\n        context.set(&quot;Collectors&quot;, Collectors.class);\r\n        // The script with a JEXL 3.2 (lambda function) and 3.3 syntax (lambda expression)\r\n        String src32 = &quot;values.stream().filter((driver) -&gt;{ driver.attributeName =^ &#39;favorite&#39; }).collect(Collectors.toList())&quot;;\r\n        String src33 = &quot;values.stream().filter(driver -&gt; driver.attributeName =^ &#39;favorite&#39;).collect(Collectors.toList())&quot;;\r\n        for(String src : Arrays.asList(src32, src33)) {\r\n            JexlExpression s = jexl.createExpression(src);\r\n            Assert.assertNotNull(s);\r\n\r\n            Object r = s.evaluate(context);\r\n            Assert.assertNotNull(r);\r\n            // got a filtered list of 4 drivers whose attribute name starts with &#39;favorite&#39;\r\n            List&lt;Driver0930&gt; l = (List&lt;Driver0930&gt;) r;\r\n            Assert.assertEquals(4, l.size());\r\n            for (Driver0930 d : l) {\r\n                Assert.assertTrue(d.getAttributeName().startsWith(&quot;favorite&quot;));\r\n            }\r\n        }\r\n    }","title":"Jexl expression string with stream, map and collect is throwing org.apache.commons.jexl3.JexlException$Parsing Exception","body":"<p>JEXL offers many ways to achieve a tight integration but it requires some  code to do so.</p>\n<p>Not sure if JEXLs integration in your library allows this but JEXL misses some information to achieve what you seek. For JEXL to filter streams, it needs the definition of how to to do that.</p>\n<p>The example below (running on JEXL 3.3 SNAPSHOT) does illustrate  one way of doing so by extending the JexlContext (could also be done by extending the JexlArithmetic).</p>\n<pre><code>/**\n * Mock driver.\n */\npublic static class Driver0930 {\n    private String name;\n    Driver0930(String n) {\n        name = n;\n    }\n    public String getAttributeName() {\n        return name;\n    }\n}\n\npublic static class Context0930 extends MapContext {\n    /**\n     * This allows using a JEXL lambda as a filter.\n     * @param stream the stream\n     * @param filter the lambda to use as filter\n     * @return the filtered stream\n     */\n    public Stream&lt;?&gt; filter(Stream&lt;?&gt; stream, JexlScript filter) {\n        return stream.filter(x -&gt; Boolean.TRUE.equals(filter.execute(this, x)));\n    }\n}\n\n@Test\npublic void testStackOvflw20220930() {\n    // fill some drivers in a list\n    List&lt;Driver0930&gt; values = new ArrayList&lt;&gt;();\n    for(int i = 0; i &lt; 8; ++i) {\n        values.add(new Driver0930(&quot;drvr&quot; + Integer.toOctalString(i)));\n    }\n    for(int i = 0; i &lt; 4; ++i) {\n        values.add(new Driver0930(&quot;favorite&quot; + Integer.toOctalString(i)));\n    }\n    // Use a context that can filter and that exposes Collectors\n    JexlEngine jexl = new JexlBuilder().safe(false).create();\n    JexlContext context = new Context0930();\n    context.set(&quot;values&quot;, values);\n    context.set(&quot;Collectors&quot;, Collectors.class);\n    // The script with a JEXL 3.2 (lambda function) and 3.3 syntax (lambda expression)\n    String src32 = &quot;values.stream().filter((driver) -&gt;{ driver.attributeName =^ 'favorite' }).collect(Collectors.toList())&quot;;\n    String src33 = &quot;values.stream().filter(driver -&gt; driver.attributeName =^ 'favorite').collect(Collectors.toList())&quot;;\n    for(String src : Arrays.asList(src32, src33)) {\n        JexlExpression s = jexl.createExpression(src);\n        Assert.assertNotNull(s);\n\n        Object r = s.evaluate(context);\n        Assert.assertNotNull(r);\n        // got a filtered list of 4 drivers whose attribute name starts with 'favorite'\n        List&lt;Driver0930&gt; l = (List&lt;Driver0930&gt;) r;\n        Assert.assertEquals(4, l.size());\n        for (Driver0930 d : l) {\n            Assert.assertTrue(d.getAttributeName().startsWith(&quot;favorite&quot;));\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":5033898,"reputation":99,"user_id":4043317,"accept_rate":20,"display_name":"Gowtham Kesa"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":743,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1664896721,"creation_date":1664575045,"question_id":73914307,"body_markdown":"I have a method `evaluateExpression` present in a different library and that library is using Jexl3 for evaluating `expressionString` passed to `evaluateExpression` method. &lt;br&gt;\r\n`inputMap` contains the object that is used for evaluating the expressionString on. This is the second parameter to that function.\r\n\r\n`expressionString` is `record.getDriversMap().values().stream().filter(myDriver -&gt; &#39;Fav_Driver&#39;.equals(vtd.getAttributeName())).collect(Collectors.toList())`\r\n\r\n`record` is a class which contains `driversMap` whose values are of type `MyDriver` class and it has an `attributeName` field. I have added a filter condition and tried to collect the list. Doing this I was getting an exception `org.apache.commons.jexl3.JexlException$Parsing` with message `(` \r\nwhich is unclear. Does anyone know how to resolve this issue.\r\n\r\nIt would be great if someone provides examples of jexl expression with stream, map and collect ?\r\nBelow is the method present in the library.\r\n  \r\n\r\n    Object evaluateExpression(String expressionString, Map&lt;String, Object&gt; inputMap) {\r\n            MapContext mapContext = new MapContext(inputMap);\r\n            JexlExpression jexlExpression = this.jexlEngine.createExpression(expressionString);\r\n            return jexlExpression.evaluate(mapContext);\r\n        }\r\n","title":"Jexl expression string with stream, map and collect is throwing org.apache.commons.jexl3.JexlException$Parsing Exception","body":"<p>I have a method <code>evaluateExpression</code> present in a different library and that library is using Jexl3 for evaluating <code>expressionString</code> passed to <code>evaluateExpression</code> method. <br>\n<code>inputMap</code> contains the object that is used for evaluating the expressionString on. This is the second parameter to that function.</p>\n<p><code>expressionString</code> is <code>record.getDriversMap().values().stream().filter(myDriver -&gt; 'Fav_Driver'.equals(vtd.getAttributeName())).collect(Collectors.toList())</code></p>\n<p><code>record</code> is a class which contains <code>driversMap</code> whose values are of type <code>MyDriver</code> class and it has an <code>attributeName</code> field. I have added a filter condition and tried to collect the list. Doing this I was getting an exception <code>org.apache.commons.jexl3.JexlException$Parsing</code> with message <code>(</code>\nwhich is unclear. Does anyone know how to resolve this issue.</p>\n<p>It would be great if someone provides examples of jexl expression with stream, map and collect ?\nBelow is the method present in the library.</p>\n<pre><code>Object evaluateExpression(String expressionString, Map&lt;String, Object&gt; inputMap) {\n        MapContext mapContext = new MapContext(inputMap);\n        JexlExpression jexlExpression = this.jexlEngine.createExpression(expressionString);\n        return jexlExpression.evaluate(mapContext);\n    }\n</code></pre>\n"},{"tags":["java","string","eclipse","utf-8","special-characters"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1664735793,"post_id":73927898,"comment_id":130535018,"body_markdown":"Your native encoding is not a unicode one. Why would you like it to be?","body":"Your native encoding is not a unicode one. Why would you like it to be?"},{"owner":{"account_id":13796,"reputation":19353,"user_id":27905,"display_name":"nitind"},"score":0,"creation_date":1664802328,"post_id":73927898,"comment_id":130547899,"body_markdown":"Is the same font used in both places?","body":"Is the same font used in both places?"},{"owner":{"account_id":4198672,"reputation":28840,"user_id":3439404,"display_name":"JosefZ"},"score":0,"creation_date":1664828185,"post_id":73927898,"comment_id":130556097,"body_markdown":"Please [edit] your question to enhance your [mcve]. Show us **1st** how do you use the `tester` class, and **2nd** output in the terminal using _all_ problematic characters (at least, `String s = &quot;&#246;&#228;&#252;&#241;&quot;;`).","body":"Please <a href=\"https://stackoverflow.com/posts/73927898/edit\">edit</a> your question to enhance your <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Show us <b>1st</b> how do you use the <code>tester</code> class, and <b>2nd</b> output in the terminal using <i>all</i> problematic characters (at least, <code>String s = &quot;&#246;&#228;&#252;&#241;&quot;;</code>)."},{"owner":{"account_id":23602515,"reputation":1,"user_id":17638780,"display_name":"TheArtificalAI"},"score":0,"creation_date":1664861496,"post_id":73927898,"comment_id":130561179,"body_markdown":"@g00se I want it to use UFT-8, to get it to display characters like &#246;&#228;&#252;&#241;.","body":"@g00se I want it to use UFT-8, to get it to display characters like &#246;&#228;&#252;&#241;."},{"owner":{"account_id":23602515,"reputation":1,"user_id":17638780,"display_name":"TheArtificalAI"},"score":0,"creation_date":1664861536,"post_id":73927898,"comment_id":130561188,"body_markdown":"@nitind where can I look up the font?","body":"@nitind where can I look up the font?"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1664871882,"post_id":73927898,"comment_id":130563838,"body_markdown":"*@g00se I want it to use UFT-8, to get it to display characters like &#246;&#228;&#252;&#241;* You already can:  `System.out.println(&quot;\\xf6\\xe4\\xfc\\xf1&quot;);`","body":"<i>@g00se I want it to use UFT-8, to get it to display characters like &#246;&#228;&#252;&#241;</i> You already can:  <code>System.out.println(&quot;\\xf6\\xe4\\xfc\\xf1&quot;);</code>"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1664876922,"post_id":73927898,"comment_id":130565369,"body_markdown":"*@g00se I want it to use UFT-8, to get it to display characters like &#246;&#228;&#252;&#241;* You already can: `System.out.println(&quot;\\u00f6\\u00e4\\u00fc\\u00f1&quot;);` Apologies for the previous comment - it seems hex escape sequences are no longer supported - I don&#39;t know when that happened!","body":"<i>@g00se I want it to use UFT-8, to get it to display characters like &#246;&#228;&#252;&#241;</i> You already can: <code>System.out.println(&quot;\\u00f6\\u00e4\\u00fc\\u00f1&quot;);</code> Apologies for the previous comment - it seems hex escape sequences are no longer supported - I don&#39;t know when that happened!"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1664877565,"post_id":73927898,"comment_id":130565581,"body_markdown":"Interestingly, octal escape sequences (impractical) still work: `System.out.println(&quot;\\366\\344\\374\\361&quot;);`","body":"Interestingly, octal escape sequences (impractical) still work: <code>System.out.println(&quot;\\366\\344\\374\\361&quot;);</code>"},{"owner":{"account_id":23602515,"reputation":1,"user_id":17638780,"display_name":"TheArtificalAI"},"score":0,"creation_date":1664896423,"post_id":73927898,"comment_id":130572286,"body_markdown":"Interestingly, octal escape sequences (impractical) still work: System.out.println(&quot;\\366\\344\\374\\361&quot;); Sorry, but not at my PC it displays: ","body":"Interestingly, octal escape sequences (impractical) still work: System.out.println(&quot;\\366\\344\\374\\361&quot;); Sorry, but not at my PC it displays: "},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1664897577,"post_id":73927898,"comment_id":130572715,"body_markdown":"Could you make that the *only* line of main please and precede it with ```System.out.println(System.getProperty(&quot;file.encoding&quot;));```  and tell us what you get?","body":"Could you make that the <i>only</i> line of main please and precede it with <code>System.out.println(System.getProperty(&quot;file.encoding&quot;));</code>  and tell us what you get?"}],"owner":{"account_id":23602515,"reputation":1,"user_id":17638780,"display_name":"TheArtificalAI"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":170,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1664896257,"creation_date":1664731553,"question_id":73927898,"body_markdown":"When I am running this program (I got most of it here: https://stackoverflow.com/questions/46361826/utf-8-encoding-is-not-working-in-java-build):\r\n\r\n```\r\nimport java.io.Console;\r\nimport java.io.IOException;\r\nimport java.io.OutputStreamWriter;\r\nimport java.io.PrintWriter;\r\n\r\npublic class tester {\r\n\r\n    public static void main(String[] args) throws IOException {\r\n        String s = &quot;&#191;Hola &#246;&#228;&#252;&#241; how geht&#39;s t&#250;?&quot;;\r\n        write(s);\r\n    }\r\n\r\n    private static void write(String s) throws IOException {\r\n        String encoding = new OutputStreamWriter(System.out).getEncoding();\r\n        Console console = System.console();\r\n        if (console != null) {\r\n            // if there is a console attached to the jvm, use it.\r\n            System.out.println(&quot;Using encoding &quot; + encoding + &quot; (Console)&quot;);\r\n            try (PrintWriter writer = console.writer()) {\r\n                writer.write(s);\r\n                writer.flush();\r\n            }\r\n        } else {\r\n            // fall back to &quot;normal&quot; system out\r\n            System.out.println(&quot;Using encoding &quot; + encoding + &quot; (System out)&quot;);\r\n            System.out.print(s);\r\n        }\r\n    }\r\n\r\n}\r\n```\r\n\r\nIt displays:\r\n\r\n    Using encoding Cp1252 (System out)\r\n    Hola  how geht&#39;s t?\r\n\r\nIn the terminal, whereas I want it to dispaly:\r\n\r\n    Using encoding UTF-8(or sth. else that works properly...) (System out)\r\n    &#191;Hola &#246;&#228;&#252;&#241; how geht&#39;s t&#250;?\r\n\r\nBut it doesn&#39;t.\r\n\r\nI have activated utf-8 in the Project settings, the General settings and under Run configurations &gt; common. And it still is not working. Any clue what I could try next?\r\n\r\nOther examples with slightly awkward outcomes:\r\n\r\nLine 9:\r\n\r\n    String s = &quot;&#246;&#228;&#252;&#241;&quot;;\r\n\r\nTerminal:\r\n\r\n    Using encoding Cp1252 (System out)\r\n    \r\n\r\nTheir literary the &#39;&#241;&#39; isn&#39;t even a ...?\r\nAs well here:\r\n\r\nLine 9:\r\n\r\n    String s = &quot;&#241;&quot;;\r\n\r\nTerminal:\r\n\r\n    Using encoding Cp1252 (System out)\r\n\r\nBut:\r\n\r\nLine 9:\r\n\r\n    String s = &quot;how &#241; wow&quot;;\r\n\r\nTerminal:\r\n\r\n    Using encoding Cp1252 (System out)\r\n    how  wow\r\n\r\nAnd if that could give you a better understanding\r\nthis part of code:\r\n\r\n    String str = &quot;&#191;Hola &#246;&#228;&#252;&#241; how geht&#39;s t&#250;?&quot;;  \r\n        \t//invokes the getBytes() method and stores an array of bytes into array[]  \r\n        \tbyte array[] = str.getBytes(&quot;UTF8&quot;);  \r\n        \tSystem.out.println(&quot;Encoded String: &quot;);  \r\n        \t//enhanced for loop that iterates over the array  \r\n        \tfor (byte x: array)   \r\n        \t{  \r\n        \t//prints the sequence of bytes      \r\n        \tSystem.out.print(x+&quot; &quot;); \r\n        \t}\r\n\r\nGives that output in the Terminal:\r\n\r\n    Encoded String: \r\n    -62 -65 72 111 108 97 32 -61 -74 -61 -92 -61 -68 -61 -79 32 104 111 119 32 103 101 104 116 39 115 32 116 -61 -70 63 \r\n\r\n","title":"Java string output in Eclipse does not set to utf-8 and does not display &#246;&#252;&#228;&#241;","body":"<p>When I am running this program (I got most of it here: <a href=\"https://stackoverflow.com/questions/46361826/utf-8-encoding-is-not-working-in-java-build\">UTF-8 encoding is not working in java build</a>):</p>\n<pre><code>import java.io.Console;\nimport java.io.IOException;\nimport java.io.OutputStreamWriter;\nimport java.io.PrintWriter;\n\npublic class tester {\n\n    public static void main(String[] args) throws IOException {\n        String s = &quot;Hola  how geht's t?&quot;;\n        write(s);\n    }\n\n    private static void write(String s) throws IOException {\n        String encoding = new OutputStreamWriter(System.out).getEncoding();\n        Console console = System.console();\n        if (console != null) {\n            // if there is a console attached to the jvm, use it.\n            System.out.println(&quot;Using encoding &quot; + encoding + &quot; (Console)&quot;);\n            try (PrintWriter writer = console.writer()) {\n                writer.write(s);\n                writer.flush();\n            }\n        } else {\n            // fall back to &quot;normal&quot; system out\n            System.out.println(&quot;Using encoding &quot; + encoding + &quot; (System out)&quot;);\n            System.out.print(s);\n        }\n    }\n\n}\n</code></pre>\n<p>It displays:</p>\n<pre><code>Using encoding Cp1252 (System out)\nHola  how geht's t?\n</code></pre>\n<p>In the terminal, whereas I want it to dispaly:</p>\n<pre><code>Using encoding UTF-8(or sth. else that works properly...) (System out)\nHola  how geht's t?\n</code></pre>\n<p>But it doesn't.</p>\n<p>I have activated utf-8 in the Project settings, the General settings and under Run configurations &gt; common. And it still is not working. Any clue what I could try next?</p>\n<p>Other examples with slightly awkward outcomes:</p>\n<p>Line 9:</p>\n<pre><code>String s = &quot;&quot;;\n</code></pre>\n<p>Terminal:</p>\n<pre><code>Using encoding Cp1252 (System out)\n\n</code></pre>\n<p>Their literary the '' isn't even a ...?\nAs well here:</p>\n<p>Line 9:</p>\n<pre><code>String s = &quot;&quot;;\n</code></pre>\n<p>Terminal:</p>\n<pre><code>Using encoding Cp1252 (System out)\n</code></pre>\n<p>But:</p>\n<p>Line 9:</p>\n<pre><code>String s = &quot;how  wow&quot;;\n</code></pre>\n<p>Terminal:</p>\n<pre><code>Using encoding Cp1252 (System out)\nhow  wow\n</code></pre>\n<p>And if that could give you a better understanding\nthis part of code:</p>\n<pre><code>String str = &quot;Hola  how geht's t?&quot;;  \n        //invokes the getBytes() method and stores an array of bytes into array[]  \n        byte array[] = str.getBytes(&quot;UTF8&quot;);  \n        System.out.println(&quot;Encoded String: &quot;);  \n        //enhanced for loop that iterates over the array  \n        for (byte x: array)   \n        {  \n        //prints the sequence of bytes      \n        System.out.print(x+&quot; &quot;); \n        }\n</code></pre>\n<p>Gives that output in the Terminal:</p>\n<pre><code>Encoded String: \n-62 -65 72 111 108 97 32 -61 -74 -61 -92 -61 -68 -61 -79 32 104 111 119 32 103 101 104 116 39 115 32 116 -61 -70 63 \n</code></pre>\n"},{"tags":["java","android","android-mediaplayer"],"answers":[{"tags":[],"owner":{"account_id":26518299,"reputation":26,"user_id":20152445,"display_name":"Ilya Pechuro"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664896102,"creation_date":1664896102,"answer_id":73949981,"question_id":73948428,"body_markdown":"If strMp3Link is a network URL of the audio stream, you also need to specify internet permission. Add the following to your application manifest\r\n\r\n    &lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;&gt;\r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\r\n    ...\r\n","title":"MediaPlayer method. PrepareAsync() does not call the onPrepared method","body":"<p>If strMp3Link is a network URL of the audio stream, you also need to specify internet permission. Add the following to your application manifest</p>\n<pre><code>&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\nxmlns:tools=&quot;http://schemas.android.com/tools&quot;&gt;\n\n&lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\n...\n</code></pre>\n"}],"owner":{"account_id":26525527,"reputation":3,"user_id":20158589,"display_name":"nat34"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":123,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1664896102,"creation_date":1664889106,"question_id":73948428,"body_markdown":"I&#39;ve been trying to build a simple service for listening to music in the background.\r\nIn the function onCommandStart I call Prepare async on the Mediaplayer object.\r\nFor some reason, the function OnPrepared, where I start the audio, doesn&#39;t get called...\r\n\r\nHere is my service class:\r\n```\r\npublic class playService extends Service implements MediaPlayer.OnCompletionListener,MediaPlayer.OnPreparedListener\r\n        ,MediaPlayer.OnSeekCompleteListener,MediaPlayer.OnInfoListener,\r\n        MediaPlayer.OnBufferingUpdateListener,MediaPlayer.OnErrorListener\r\n{\r\n    public playService()\r\n    {\r\n    }\r\n    MediaPlayer mediaPlayerMp3 = new MediaPlayer();\r\n    @Override\r\n    public void onCreate() {\r\n        mediaPlayerMp3.setOnCompletionListener(this);\r\n        mediaPlayerMp3.setOnCompletionListener(this);\r\n        mediaPlayerMp3.setOnBufferingUpdateListener(this);\r\n        mediaPlayerMp3.setOnSeekCompleteListener(this);\r\n        mediaPlayerMp3.setOnInfoListener(this);\r\n        mediaPlayerMp3.setOnPreparedListener(this);\r\n        super.onCreate();\r\n    }\r\n    @Override\r\n    public int onStartCommand(Intent intent, int flags, int startId)\r\n    {\r\n        String strMp3Link = intent.getExtras().getString(&quot;mp3Link&quot;);\r\n        if(!mediaPlayerMp3.isPlaying())\r\n        {\r\n            try\r\n            {\r\n                mediaPlayerMp3.setDataSource(strMp3Link);\r\n                mediaPlayerMp3.prepareAsync();\r\n            }\r\n            catch (IOException e)\r\n            {\r\n                Toast.makeText(this, e.toString(), Toast.LENGTH_LONG).show();\r\n            }\r\n        }\r\n        return START_STICKY;\r\n    }\r\n    @Override\r\n    public void onPrepared(MediaPlayer mediaPlayer)\r\n    {\r\n        if(!mediaPlayerMp3.isPlaying())\r\n        {\r\n            mediaPlayerMp3.start();\r\n        }\r\n    }\r\n    ....\r\n}\r\n```\r\n\r\n(I have all the other methods I implemented as well, they are just not relevant now.)\r\n\r\nSo I have a button, I press it, start the Intent (in MainActivity, it works fine) the function onStartCommand gets called. But when it reaches prepareAsync(), nothing happens. Audio isn&#39;t being played. How do I deal with that?","title":"MediaPlayer method. PrepareAsync() does not call the onPrepared method","body":"<p>I've been trying to build a simple service for listening to music in the background.\nIn the function onCommandStart I call Prepare async on the Mediaplayer object.\nFor some reason, the function OnPrepared, where I start the audio, doesn't get called...</p>\n<p>Here is my service class:</p>\n<pre><code>public class playService extends Service implements MediaPlayer.OnCompletionListener,MediaPlayer.OnPreparedListener\n        ,MediaPlayer.OnSeekCompleteListener,MediaPlayer.OnInfoListener,\n        MediaPlayer.OnBufferingUpdateListener,MediaPlayer.OnErrorListener\n{\n    public playService()\n    {\n    }\n    MediaPlayer mediaPlayerMp3 = new MediaPlayer();\n    @Override\n    public void onCreate() {\n        mediaPlayerMp3.setOnCompletionListener(this);\n        mediaPlayerMp3.setOnCompletionListener(this);\n        mediaPlayerMp3.setOnBufferingUpdateListener(this);\n        mediaPlayerMp3.setOnSeekCompleteListener(this);\n        mediaPlayerMp3.setOnInfoListener(this);\n        mediaPlayerMp3.setOnPreparedListener(this);\n        super.onCreate();\n    }\n    @Override\n    public int onStartCommand(Intent intent, int flags, int startId)\n    {\n        String strMp3Link = intent.getExtras().getString(&quot;mp3Link&quot;);\n        if(!mediaPlayerMp3.isPlaying())\n        {\n            try\n            {\n                mediaPlayerMp3.setDataSource(strMp3Link);\n                mediaPlayerMp3.prepareAsync();\n            }\n            catch (IOException e)\n            {\n                Toast.makeText(this, e.toString(), Toast.LENGTH_LONG).show();\n            }\n        }\n        return START_STICKY;\n    }\n    @Override\n    public void onPrepared(MediaPlayer mediaPlayer)\n    {\n        if(!mediaPlayerMp3.isPlaying())\n        {\n            mediaPlayerMp3.start();\n        }\n    }\n    ....\n}\n</code></pre>\n<p>(I have all the other methods I implemented as well, they are just not relevant now.)</p>\n<p>So I have a button, I press it, start the Intent (in MainActivity, it works fine) the function onStartCommand gets called. But when it reaches prepareAsync(), nothing happens. Audio isn't being played. How do I deal with that?</p>\n"},{"tags":["java","angular","oauth"],"answers":[{"tags":[],"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664241728,"creation_date":1664233853,"answer_id":73860827,"question_id":73851253,"body_markdown":"First, do not try to decode nor interpret access-tokens client side (in you Angular app). Just forward it in authorization header. If you need authenticated user data on the client, use ID-token (or query authorization-server user end-point)\r\n\r\nSecond, don&#39;t write OAuth2 logic yourself in your Angular app. Use a lib like [angular-auth-oidc-client][1] instead. It provides with interceptor (as the one you wrote), route guards, access-tokens refreshing (before it expires), and more.\r\n\r\nLast, you should urgently read [this article][2]. In OAuth2 wording, a Spring API is a &quot;resource-server&quot;, not a &quot;client&quot;. Configure it as follow (details in the article): \r\n- use `spring-boot-starter-oauth2-resource-server` instead of `spring-boot-starter-oauth2-client`\r\n- use `http.oauth2ResourceServer().jwt()` (or `http.oauth2ResourceServer().opaqueToken()` if access-tokens are not JWTs) instead of `http.oauth2Login(...)`\r\n\r\n\r\n  [1]: https://github.com/damienbod/angular-auth-oidc-client\r\n  [2]: https://dzone.com/articles/spring-oauth2-resource-servers","title":"How to secure my front Angular application with an OAuth and a BAck java?","body":"<p>First, do not try to decode nor interpret access-tokens client side (in you Angular app). Just forward it in authorization header. If you need authenticated user data on the client, use ID-token (or query authorization-server user end-point)</p>\n<p>Second, don't write OAuth2 logic yourself in your Angular app. Use a lib like <a href=\"https://github.com/damienbod/angular-auth-oidc-client\" rel=\"nofollow noreferrer\">angular-auth-oidc-client</a> instead. It provides with interceptor (as the one you wrote), route guards, access-tokens refreshing (before it expires), and more.</p>\n<p>Last, you should urgently read <a href=\"https://dzone.com/articles/spring-oauth2-resource-servers\" rel=\"nofollow noreferrer\">this article</a>. In OAuth2 wording, a Spring API is a &quot;resource-server&quot;, not a &quot;client&quot;. Configure it as follow (details in the article):</p>\n<ul>\n<li>use <code>spring-boot-starter-oauth2-resource-server</code> instead of <code>spring-boot-starter-oauth2-client</code></li>\n<li>use <code>http.oauth2ResourceServer().jwt()</code> (or <code>http.oauth2ResourceServer().opaqueToken()</code> if access-tokens are not JWTs) instead of <code>http.oauth2Login(...)</code></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":17330298,"reputation":127,"user_id":12553583,"display_name":"Jack Boch"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664896081,"creation_date":1664896081,"answer_id":73949975,"question_id":73851253,"body_markdown":"I use this  and work\r\n``````java\r\n@Configuration\r\n@EnableWebSecurity\r\npublic class OAuth2SecurityConfig {\r\n\r\n    @Bean\r\n    public SecurityFilterChain configure(final HttpSecurity http) throws Exception {\r\n\r\n        http.oauth2ResourceServer(OAuth2ResourceServerConfigurer::jwt)\r\n                .authorizeRequests().anyRequest().authenticated().and()\r\n.sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS)\r\n                .and().cors().and().csrf().disable();\r\n        return http.build();\r\n    }\r\n}\r\n``````\r\nBut I can&#39;t do the integration tests on my APIs and on the connection","title":"How to secure my front Angular application with an OAuth and a BAck java?","body":"<p>I use this  and work</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\n@EnableWebSecurity\npublic class OAuth2SecurityConfig {\n\n    @Bean\n    public SecurityFilterChain configure(final HttpSecurity http) throws Exception {\n\n        http.oauth2ResourceServer(OAuth2ResourceServerConfigurer::jwt)\n                .authorizeRequests().anyRequest().authenticated().and()\n.sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS)\n                .and().cors().and().csrf().disable();\n        return http.build();\n    }\n}\n</code></pre>\n<p>But I can't do the integration tests on my APIs and on the connection</p>\n"}],"owner":{"account_id":17330298,"reputation":127,"user_id":12553583,"display_name":"Jack Boch"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":584,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1664896081,"creation_date":1664179898,"question_id":73851253,"body_markdown":"I have a Java11 springboot Angular13 application with lib angular-oauth2-oidc, and I have open id connect authentication.\r\n\r\nSo, in front, I have the token and I add it my requests, and in Back I have security the application, but I don&#39;t have a log while I&#39;m in level TRACE, but I don&#39;t have no log on front calls.\r\n\r\nSo I don&#39;t know what is blocking the communication between the front and the java backend.\r\n\r\nCommunication back-OAuth ok, and front-OAuth ok\r\n\r\nOAuth2 mode is  \r\n\r\n\r\nrequest front Implicit Grant.\r\n``````\r\nRequest URL: http://localhost:8080/api/domains/sync\r\nReferrer Policy: strict-origin-when-cross-origin\r\nProvisional headers are shown\r\nLearn more\r\nAccept: application/json, text/plain, */*\r\nAuthorization: Bearer [object Object]\r\nContent-Type: application/json\r\nReferer: http://localhost:4200/\r\nsec-ch-ua: &quot;Google Chrome&quot;;v=&quot;105&quot;, &quot;Not)A;Brand&quot;;v=&quot;8&quot;, &quot;Chromium&quot;;v=&quot;105&quot;\r\nsec-ch-ua-mobile: ?0\r\nsec-ch-ua-platform: &quot;Windows&quot;\r\nUser-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/105.0.0.0 Safari/537.36\r\n\r\n\r\nRequest URL: http://localhost:8080/api/domains/sync\r\nReferrer Policy: strict-origin-when-cross-origin\r\nAccept: */*\r\nAccept-Encoding: gzip, deflate, br\r\nAccept-Language: fr-FR,fr;q=0.9\r\nAccess-Control-Request-Headers: authorization,content-type\r\nAccess-Control-Request-Method: POST\r\nConnection: keep-alive\r\nHost: localhost:8080\r\nOrigin: XXX\r\nReferer: http://localhost:4200/\r\nSec-Fetch-Dest: empty\r\nSec-Fetch-Mode: cors\r\nSec-Fetch-Site: same-site\r\nUser-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/105.0.0.0 Safari/537.36\r\n``````\r\nAngular\r\n``````js\r\n@Injectable({\r\n  providedIn: &#39;root&#39;,\r\n})\r\nexport class TokenInterceptorService implements HttpInterceptor {\r\n  constructor(private authService: InitialAuthService) {}\r\n  intercept(\r\n    request: HttpRequest&lt;any&gt;,\r\n    next: HttpHandler\r\n  ): Observable&lt;HttpEvent&lt;any&gt;&gt; {\r\n    const  token = this.authService.decodedAccessToken? this.authService.decodedAccessToken:null;\r\n    if (typeof token != &#39;undefined&#39; &amp;&amp; token) {\r\n      request = request.clone({\r\n        setHeaders: {\r\n          Authorization: `Bearer ` + token,\r\n        },\r\n      });\r\n      console.debug(&quot;new request =&gt;&quot;);\r\n      console.debug(request);\r\n    }\r\n    return next.handle(request).pipe(\r\n      catchError((err) =&gt; {\r\n        console.error(err);\r\n        if (err.status === 401) {\r\n        }\r\n        const error = err.error.message || err.statusText;\r\n        return throwError(error);\r\n      })\r\n    );\r\n  }\r\n}\r\n``````\r\nJava\r\n``````java\r\n@Configuration\r\npublic class OAuth2SecurityConfig {\r\n    @Bean\r\n    SecurityWebFilterChain springSecurityFilterChain(ServerHttpSecurity http) {\r\n        http\r\n                .authorizeExchange(exchanges -&gt;\r\n                        exchanges\r\n                                .pathMatchers(&quot;/&quot;, &quot;/error&quot;).permitAll()\r\n                                .anyExchange().authenticated()\r\n                );\r\n        return http.build();\r\n    }\r\n}\r\n@Controller\r\npublic class UserController {\r\n    @GetMapping(&quot;/&quot;)\r\n    public String index() {\r\n        return &quot;index&quot;;\r\n    }\r\n\r\n    @GetMapping(&quot;/user&quot;)\r\n    public String user(Model model,\r\n                       @AuthenticationPrincipal OidcUser oidcUser) {\r\n        model.addAttribute(&quot;userName&quot;, oidcUser.getName());\r\n        model.addAttribute(&quot;audience&quot;, oidcUser.getAudience());\r\n        return &quot;user&quot;;\r\n    }\r\n}\r\n``````\r\npom.xml\r\n``````xml\r\n&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-oauth2-client&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n``````\r\n\r\nafter change\r\n\r\nangular\r\n`````js\r\nimports: [OAuthModule.forRoot({\r\n    resourceServer: {\r\n        allowedUrls: [environment.url],\r\n        sendAccessToken: true\r\n    }\r\n})],\r\n``````\r\nJava\r\n``````java\r\n@Bean\r\n    SecurityWebFilterChain springSecurityFilterChain(ServerHttpSecurity http) {\r\n        http.oauth2ResourceServer().jwt();\r\n        http\r\n                .authorizeExchange(exchanges -&gt;\r\n                        exchanges\r\n                                .pathMatchers(&quot;/&quot;, &quot;/error&quot;).permitAll()\r\n                                .anyExchange().authenticated()\r\n                );\r\n        return http.build();\r\n``````\r\n``````\r\nAccept: application/json, text/plain, */*\r\nAccept-Encoding: gzip, deflate, br\r\nAccept-Language: fr,fr-FR;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6\r\nAuthorization: Bearer 4NzAsImNsaWVudF9pZCI6Ijg1OTE1NGRkZmFlNzQyMDdiN2ZmODc0ODc5ZjVhYTNjLU1TU0FkbWl...\r\nConnection: keep-alive\r\nHost: localhost:8080\r\nOrigin: http://localhost:4200\r\nReferer: http://localhost:4200/\r\nsec-ch-ua: &quot;Microsoft Edge&quot;;v=&quot;105&quot;, &quot;Not)A;Brand&quot;;v=&quot;8&quot;, &quot;Chromium&quot;;v=&quot;105&quot;\r\nsec-ch-ua-mobile: ?0\r\nsec-ch-ua-platform: &quot;Windows&quot;\r\nSec-Fetch-Dest: empty\r\nSec-Fetch-Mode: cors\r\nSec-Fetch-Site: same-site\r\nUser-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/105.0.0.0 Safari/537.36 Edg/105.0.1343.50\r\n``````\r\n\r\nI have no role, scope: &quot;openid&quot;\r\n\r\nI just want my services to be authenticated.\r\n\r\nI added the following options\r\n\r\nI have no control over the oauth2 server, because i just consume it and many other application use it\r\n\r\nI get this nothing happens level log debug i try example and example and my car\r\n\r\n`@EnableWebSecurity(debug = true)\r\n@EnableGlobalMethodSecurity(securedEnabled=true, jsr250Enabled=true, prePostEnabled=true)`\r\n\r\n\r\n``````\r\n************************************************************\r\n\r\nRequest received for OPTIONS &#39;/api/domains/&#39;:\r\n\r\norg.apache.catalina.connector.RequestFacade@18b486f4\r\n\r\nservletPath:/api/domains/\r\npathInfo:null\r\nheaders: \r\nhost: localhost:8080\r\nconnection: keep-alive\r\npragma: no-cache\r\ncache-control: no-cache\r\naccept: */*\r\naccess-control-request-method: POST\r\naccess-control-request-headers: authorization,content-type\r\norigin: XXX\r\nuser-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/105.0.0.0 Safari/537.36\r\nsec-fetch-mode: cors\r\nsec-fetch-site: same-site\r\nsec-fetch-dest: empty\r\nreferer: http://localhost:4200/\r\naccept-encoding: gzip, deflate, br\r\naccept-language: fr-FR,fr;q=0.9,en-US;q=0.8,en;q=0.7\r\n\r\n\r\nSecurity filter chain: [\r\n  DisableEncodeUrlFilter\r\n  ChannelProcessingFilter\r\n  WebAsyncManagerIntegrationFilter\r\n  SecurityContextPersistenceFilter\r\n  HeaderWriterFilter\r\n  CorsFilter\r\n  CsrfFilter\r\n  LogoutFilter\r\n  BearerTokenAuthenticationFilter\r\n  RequestCacheAwareFilter\r\n  SecurityContextHolderAwareRequestFilter\r\n  AnonymousAuthenticationFilter\r\n  SessionManagementFilter\r\n  ExceptionTranslationFilter\r\n  FilterSecurityInterceptor\r\n]\r\n\r\n\r\n************************************************************\r\n\r\n``````","title":"How to secure my front Angular application with an OAuth and a BAck java?","body":"<p>I have a Java11 springboot Angular13 application with lib angular-oauth2-oidc, and I have open id connect authentication.</p>\n<p>So, in front, I have the token and I add it my requests, and in Back I have security the application, but I don't have a log while I'm in level TRACE, but I don't have no log on front calls.</p>\n<p>So I don't know what is blocking the communication between the front and the java backend.</p>\n<p>Communication back-OAuth ok, and front-OAuth ok</p>\n<p>OAuth2 mode is</p>\n<p>request front Implicit Grant.</p>\n<pre><code>Request URL: http://localhost:8080/api/domains/sync\nReferrer Policy: strict-origin-when-cross-origin\nProvisional headers are shown\nLearn more\nAccept: application/json, text/plain, */*\nAuthorization: Bearer [object Object]\nContent-Type: application/json\nReferer: http://localhost:4200/\nsec-ch-ua: &quot;Google Chrome&quot;;v=&quot;105&quot;, &quot;Not)A;Brand&quot;;v=&quot;8&quot;, &quot;Chromium&quot;;v=&quot;105&quot;\nsec-ch-ua-mobile: ?0\nsec-ch-ua-platform: &quot;Windows&quot;\nUser-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/105.0.0.0 Safari/537.36\n\n\nRequest URL: http://localhost:8080/api/domains/sync\nReferrer Policy: strict-origin-when-cross-origin\nAccept: */*\nAccept-Encoding: gzip, deflate, br\nAccept-Language: fr-FR,fr;q=0.9\nAccess-Control-Request-Headers: authorization,content-type\nAccess-Control-Request-Method: POST\nConnection: keep-alive\nHost: localhost:8080\nOrigin: XXX\nReferer: http://localhost:4200/\nSec-Fetch-Dest: empty\nSec-Fetch-Mode: cors\nSec-Fetch-Site: same-site\nUser-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/105.0.0.0 Safari/537.36\n</code></pre>\n<p>Angular</p>\n<pre class=\"lang-js prettyprint-override\"><code>@Injectable({\n  providedIn: 'root',\n})\nexport class TokenInterceptorService implements HttpInterceptor {\n  constructor(private authService: InitialAuthService) {}\n  intercept(\n    request: HttpRequest&lt;any&gt;,\n    next: HttpHandler\n  ): Observable&lt;HttpEvent&lt;any&gt;&gt; {\n    const  token = this.authService.decodedAccessToken? this.authService.decodedAccessToken:null;\n    if (typeof token != 'undefined' &amp;&amp; token) {\n      request = request.clone({\n        setHeaders: {\n          Authorization: `Bearer ` + token,\n        },\n      });\n      console.debug(&quot;new request =&gt;&quot;);\n      console.debug(request);\n    }\n    return next.handle(request).pipe(\n      catchError((err) =&gt; {\n        console.error(err);\n        if (err.status === 401) {\n        }\n        const error = err.error.message || err.statusText;\n        return throwError(error);\n      })\n    );\n  }\n}\n</code></pre>\n<p>Java</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\npublic class OAuth2SecurityConfig {\n    @Bean\n    SecurityWebFilterChain springSecurityFilterChain(ServerHttpSecurity http) {\n        http\n                .authorizeExchange(exchanges -&gt;\n                        exchanges\n                                .pathMatchers(&quot;/&quot;, &quot;/error&quot;).permitAll()\n                                .anyExchange().authenticated()\n                );\n        return http.build();\n    }\n}\n@Controller\npublic class UserController {\n    @GetMapping(&quot;/&quot;)\n    public String index() {\n        return &quot;index&quot;;\n    }\n\n    @GetMapping(&quot;/user&quot;)\n    public String user(Model model,\n                       @AuthenticationPrincipal OidcUser oidcUser) {\n        model.addAttribute(&quot;userName&quot;, oidcUser.getName());\n        model.addAttribute(&quot;audience&quot;, oidcUser.getAudience());\n        return &quot;user&quot;;\n    }\n}\n</code></pre>\n<p>pom.xml</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-oauth2-client&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<p>after change</p>\n<p>angular</p>\n<pre class=\"lang-js prettyprint-override\"><code>imports: [OAuthModule.forRoot({\n    resourceServer: {\n        allowedUrls: [environment.url],\n        sendAccessToken: true\n    }\n})],\n</code></pre>\n<p>Java</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Bean\n    SecurityWebFilterChain springSecurityFilterChain(ServerHttpSecurity http) {\n        http.oauth2ResourceServer().jwt();\n        http\n                .authorizeExchange(exchanges -&gt;\n                        exchanges\n                                .pathMatchers(&quot;/&quot;, &quot;/error&quot;).permitAll()\n                                .anyExchange().authenticated()\n                );\n        return http.build();\n</code></pre>\n<pre><code>Accept: application/json, text/plain, */*\nAccept-Encoding: gzip, deflate, br\nAccept-Language: fr,fr-FR;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6\nAuthorization: Bearer 4NzAsImNsaWVudF9pZCI6Ijg1OTE1NGRkZmFlNzQyMDdiN2ZmODc0ODc5ZjVhYTNjLU1TU0FkbWl...\nConnection: keep-alive\nHost: localhost:8080\nOrigin: http://localhost:4200\nReferer: http://localhost:4200/\nsec-ch-ua: &quot;Microsoft Edge&quot;;v=&quot;105&quot;, &quot;Not)A;Brand&quot;;v=&quot;8&quot;, &quot;Chromium&quot;;v=&quot;105&quot;\nsec-ch-ua-mobile: ?0\nsec-ch-ua-platform: &quot;Windows&quot;\nSec-Fetch-Dest: empty\nSec-Fetch-Mode: cors\nSec-Fetch-Site: same-site\nUser-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/105.0.0.0 Safari/537.36 Edg/105.0.1343.50\n</code></pre>\n<p>I have no role, scope: &quot;openid&quot;</p>\n<p>I just want my services to be authenticated.</p>\n<p>I added the following options</p>\n<p>I have no control over the oauth2 server, because i just consume it and many other application use it</p>\n<p>I get this nothing happens level log debug i try example and example and my car</p>\n<p><code>@EnableWebSecurity(debug = true) @EnableGlobalMethodSecurity(securedEnabled=true, jsr250Enabled=true, prePostEnabled=true)</code></p>\n<pre><code>************************************************************\n\nRequest received for OPTIONS '/api/domains/':\n\norg.apache.catalina.connector.RequestFacade@18b486f4\n\nservletPath:/api/domains/\npathInfo:null\nheaders: \nhost: localhost:8080\nconnection: keep-alive\npragma: no-cache\ncache-control: no-cache\naccept: */*\naccess-control-request-method: POST\naccess-control-request-headers: authorization,content-type\norigin: XXX\nuser-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/105.0.0.0 Safari/537.36\nsec-fetch-mode: cors\nsec-fetch-site: same-site\nsec-fetch-dest: empty\nreferer: http://localhost:4200/\naccept-encoding: gzip, deflate, br\naccept-language: fr-FR,fr;q=0.9,en-US;q=0.8,en;q=0.7\n\n\nSecurity filter chain: [\n  DisableEncodeUrlFilter\n  ChannelProcessingFilter\n  WebAsyncManagerIntegrationFilter\n  SecurityContextPersistenceFilter\n  HeaderWriterFilter\n  CorsFilter\n  CsrfFilter\n  LogoutFilter\n  BearerTokenAuthenticationFilter\n  RequestCacheAwareFilter\n  SecurityContextHolderAwareRequestFilter\n  AnonymousAuthenticationFilter\n  SessionManagementFilter\n  ExceptionTranslationFilter\n  FilterSecurityInterceptor\n]\n\n\n************************************************************\n\n</code></pre>\n"},{"tags":["java","apache-kafka"],"answers":[{"tags":[],"owner":{"account_id":16791300,"reputation":83,"user_id":12138892,"display_name":"Mykyta Piddubskiy"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1664895817,"creation_date":1664796878,"answer_id":73934832,"question_id":73909501,"body_markdown":"As I found out if set log level to trace (not debug) then I see the reason:\r\n\r\n    About to close the idle connection from 2147482646 due to being idle for 540005 millis\r\n    Node 2147482646 disconnected.\r\n\r\nBecause:\r\n\r\n    connections.max.idle.ms 600000 (10mins) is default for server\r\n    connections.max.idle.ms 540000 (9mins) is default for consumers\r\n\r\nBut I still cant get why a connection is idle. Opened another question related to it. \r\nhttps://stackoverflow.com/questions/73947132/when-kafka-connection-is-idle","title":"Kafka group coordinator disconnects by uknown reason each 10 minis","body":"<p>As I found out if set log level to trace (not debug) then I see the reason:</p>\n<pre><code>About to close the idle connection from 2147482646 due to being idle for 540005 millis\nNode 2147482646 disconnected.\n</code></pre>\n<p>Because:</p>\n<pre><code>connections.max.idle.ms 600000 (10mins) is default for server\nconnections.max.idle.ms 540000 (9mins) is default for consumers\n</code></pre>\n<p>But I still cant get why a connection is idle. Opened another question related to it.\n<a href=\"https://stackoverflow.com/questions/73947132/when-kafka-connection-is-idle\">When Kafka connection is idle?</a></p>\n"}],"owner":{"account_id":16791300,"reputation":83,"user_id":12138892,"display_name":"Mykyta Piddubskiy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2902,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73934832,"answer_count":1,"score":1,"last_activity_date":1664895817,"creation_date":1664544410,"question_id":73909501,"body_markdown":"I faced an issue that my Kafka does rebalancing almost each 5-10 min for an unknown reason. I use Kafka and apache storm. A typical situation that logs before Backpressure (Strom stuff) repeating but after some time I see Node 2147482646 disconnected and other logs with  &quot;coordinator unavailable.isDisconnected: true&quot; and after this everything is rebalancing and as for me it&#39;s not a healthy situation despite the fact that Kafka works fine.\r\n\r\nAlmost all my topics have 3 replicas and 10 partitions and I have 10 Spouts (10 consumers)\r\n\r\nIve read that such configs as:\r\n\r\n    heartbeat.interval.ms\r\n    session.timeout.ms\r\n    rebalance.timeout.ms\r\ncan affect this. My set up was:\r\n\r\n    heartbeat.interval.ms: 5000\r\n    session.timeout.ms: 30000\r\n    rebalance.timeout.ms: 60000\r\nAnd I thought that maybe due to some connection issues 4-5 heartbeat messages are not enough and tried heartbeat.interval.ms: 2000 but it did not help.\r\n\r\nAs I understood from searching kafka lib is that it happens in NetworkClient in poll() method and later there handleDisconnections(responses, updatedNow) and there selector is already disconnected.\r\n\r\nWhat else can cause such kind of issue?\r\n```\r\n2022-09-30 10:59:54.599 o.a.s.k.s.KafkaSpout Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] Polled [0] records from Kafka\r\n2022-09-30 10:59:54.599 o.a.k.c.c.KafkaConsumer Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] [Consumer clientId=consumer-segmentation.check.groupid-1, groupId=segmentation.check.groupid] Resuming partitions []\r\n2022-09-30 10:59:54.601 o.a.s.k.s.KafkaSpoutRetryExponentialBackoff Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] Topic partitions with entries ready to be retried [{}] \r\n2022-09-30 10:59:54.601 o.a.k.c.c.KafkaConsumer Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] [Consumer clientId=consumer-segmentation.check.groupid-1, groupId=segmentation.check.groupid] Pausing partitions []\r\n2022-09-30 10:59:54.614 o.a.s.g.LoadAwareShuffleGrouping refresh-load-timer [DEBUG] targetTask 1 is in LocalityScope RACK_LOCAL\r\n2022-09-30 10:59:54.615 o.a.s.g.LoadAwareShuffleGrouping refresh-load-timer [DEBUG] targetTask 2 is in LocalityScope WORKER_LOCAL\r\n2022-09-30 10:59:54.615 o.a.s.g.LoadAwareShuffleGrouping refresh-load-timer [DEBUG] targetTask 3 is in LocalityScope RACK_LOCAL\r\n2022-09-30 10:59:54.615 o.a.s.g.LoadAwareShuffleGrouping refresh-load-timer [DEBUG] targetTask 4 is in LocalityScope WORKER_LOCAL\r\n2022-09-30 10:59:54.630 o.a.s.d.w.WorkerState backpressure-check-timer [DEBUG] Checking for change in Backpressure status on worker&#39;s tasks\r\n2022-09-30 10:59:54.630 o.a.s.d.w.BackPressureTracker backpressure-check-timer [DEBUG] Running Back Pressure status change check\r\n2022-09-30 10:59:54.680 o.a.s.d.w.WorkerState backpressure-check-timer [DEBUG] Checking for change in Backpressure status on worker&#39;s tasks\r\n2022-09-30 10:59:54.680 o.a.s.d.w.BackPressureTracker backpressure-check-timer [DEBUG] Running Back Pressure status change check\r\n2022-09-30 10:59:54.731 o.a.s.d.w.WorkerState backpressure-check-timer [DEBUG] Checking for change in Backpressure status on worker&#39;s tasks\r\n2022-09-30 10:59:54.731 o.a.s.d.w.BackPressureTracker backpressure-check-timer [DEBUG] Running Back Pressure status change check\r\n2022-09-30 10:59:54.781 o.a.s.d.w.WorkerState backpressure-check-timer [DEBUG] Checking for change in Backpressure status on worker&#39;s tasks\r\n2022-09-30 10:59:54.781 o.a.s.d.w.BackPressureTracker backpressure-check-timer [DEBUG] Running Back Pressure status change check\r\n2022-09-30 10:59:54.801 o.a.s.k.s.KafkaSpout Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] Polled [0] records from Kafka\r\n2022-09-30 10:59:54.801 o.a.k.c.c.KafkaConsumer Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] [Consumer clientId=consumer-segmentation.check.groupid-1, groupId=segmentation.check.groupid] Resuming partitions []\r\n2022-09-30 10:59:54.802 o.a.s.k.s.KafkaSpoutRetryExponentialBackoff Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] Topic partitions with entries ready to be retried [{}] \r\n2022-09-30 10:59:54.803 o.a.k.c.c.KafkaConsumer Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] [Consumer clientId=consumer-segmentation.check.groupid-1, groupId=segmentation.check.groupid] Pausing partitions []\r\n2022-09-30 10:59:54.831 o.a.s.d.w.WorkerState backpressure-check-timer [DEBUG] Checking for change in Backpressure status on worker&#39;s tasks\r\n2022-09-30 10:59:54.832 o.a.s.d.w.BackPressureTracker backpressure-check-timer [DEBUG] Running Back Pressure status change check\r\n2022-09-30 10:59:54.882 o.a.s.d.w.WorkerState backpressure-check-timer [DEBUG] Checking for change in Backpressure status on worker&#39;s tasks\r\n2022-09-30 10:59:54.882 o.a.s.d.w.BackPressureTracker backpressure-check-timer [DEBUG] Running Back Pressure status change check\r\n2022-09-30 10:59:54.933 o.a.s.d.w.WorkerState backpressure-check-timer [DEBUG] Checking for change in Backpressure status on worker&#39;s tasks\r\n2022-09-30 10:59:54.933 o.a.s.d.w.BackPressureTracker backpressure-check-timer [DEBUG] Running Back Pressure status change check\r\n2022-09-30 10:59:54.983 o.a.s.d.w.WorkerState backpressure-check-timer [DEBUG] Checking for change in Backpressure status on worker&#39;s tasks\r\n2022-09-30 10:59:54.983 o.a.s.d.w.BackPressureTracker backpressure-check-timer [DEBUG] Running Back Pressure status change check\r\n2022-09-30 10:59:54.995 o.a.k.c.NetworkClient Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] [Consumer clientId=consumer-segmentation.check.groupid-1, groupId=segmentation.check.groupid] Received FETCH response from node 1003 for request with header RequestHeader(apiKey=FETCH, apiVersion=11, clientId=consumer-segmentation.check.groupid-1, correlationId=2202): FetchResponseData(throttleTimeMs=0, errorCode=0, sessionId=808668183, responses=[])\r\n2022-09-30 10:59:54.995 o.a.k.c.FetchSessionHandler Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] [Consumer clientId=consumer-segmentation.check.groupid-1, groupId=segmentation.check.groupid] Node 1003 sent an incremental fetch response with throttleTimeMs = 0 for session 808668183 with 0 response partition(s), 1 implied partition(s)\r\n2022-09-30 10:59:54.996 o.a.k.c.c.i.Fetcher Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] [Consumer clientId=consumer-segmentation.check.groupid-1, groupId=segmentation.check.groupid] Added READ_UNCOMMITTED fetch request for partition segmentation.check.queue-1 at position FetchPosition{offset=1136153, offsetEpoch=Optional.empty, currentLeader=LeaderAndEpoch{leader=Optional[kafka-broker2:9092 (id: 1003 rack: /rack2)], epoch=4}} to node kafka-broker2:9092 (id: 1003 rack: /rack2)\r\n2022-09-30 10:59:54.996 o.a.k.c.FetchSessionHandler Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] [Consumer clientId=consumer-segmentation.check.groupid-1, groupId=segmentation.check.groupid] Built incremental fetch (sessionId=808668183, epoch=2152) for node 1003. Added 0 partition(s), altered 0 partition(s), removed 0 partition(s), replaced 0 partition(s) out of 1 partition(s)\r\n2022-09-30 10:59:54.996 o.a.k.c.c.i.Fetcher Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] [Consumer clientId=consumer-segmentation.check.groupid-1, groupId=segmentation.check.groupid] Sending READ_UNCOMMITTED IncrementalFetchRequest(toSend=(), toForget=(), toReplace=(), implied=(segmentation.check.queue-1), canUseTopicIds=False) to broker kafka-broker2:9092 (id: 1003 rack: /rack2)\r\n2022-09-30 10:59:54.996 o.a.k.c.NetworkClient Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] [Consumer clientId=consumer-segmentation.check.groupid-1, groupId=segmentation.check.groupid] Sending FETCH request with header RequestHeader(apiKey=FETCH, apiVersion=11, clientId=consumer-segmentation.check.groupid-1, correlationId=2203) and timeout 60000 to node 1003: FetchRequestData(clusterId=null, replicaId=-1, maxWaitMs=500, minBytes=1, maxBytes=52428800, isolationLevel=0, sessionId=808668183, sessionEpoch=2152, topics=[], forgottenTopicsData=[], rackId=&#39;&#39;)\r\n2022-09-30 10:59:55.003 o.a.s.k.s.KafkaSpout Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] Polled [0] records from Kafka\r\n2022-09-30 10:59:55.003 o.a.k.c.c.KafkaConsumer Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] [Consumer clientId=consumer-segmentation.check.groupid-1, groupId=segmentation.check.groupid] Resuming partitions []\r\n2022-09-30 10:59:55.005 o.a.s.k.s.KafkaSpoutRetryExponentialBackoff Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] Topic partitions with entries ready to be retried [{}] \r\n2022-09-30 10:59:55.005 o.a.k.c.c.KafkaConsumer Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] [Consumer clientId=consumer-segmentation.check.groupid-1, groupId=segmentation.check.groupid] Pausing partitions []\r\n2022-09-30 10:59:55.033 o.a.s.d.w.WorkerState backpressure-check-timer [DEBUG] Checking for change in Backpressure status on worker&#39;s tasks\r\n2022-09-30 10:59:55.034 o.a.s.d.w.BackPressureTracker backpressure-check-timer [DEBUG] Running Back Pressure status change check\r\n2022-09-30 10:59:55.084 o.a.s.d.w.WorkerState backpressure-check-timer [DEBUG] Checking for change in Backpressure status on worker&#39;s tasks\r\n2022-09-30 10:59:55.084 o.a.s.d.w.BackPressureTracker backpressure-check-timer [DEBUG] Running Back Pressure status change check\r\n2022-09-30 10:59:55.134 o.a.s.d.w.WorkerState backpressure-check-timer [DEBUG] Checking for change in Backpressure status on worker&#39;s tasks\r\n2022-09-30 10:59:55.134 o.a.s.d.w.BackPressureTracker backpressure-check-timer [DEBUG] Running Back Pressure status change check\r\n2022-09-30 10:59:55.185 o.a.s.d.w.WorkerState backpressure-check-timer [DEBUG] Checking for change in Backpressure status on worker&#39;s tasks\r\n2022-09-30 10:59:55.185 o.a.s.d.w.BackPressureTracker backpressure-check-timer [DEBUG] Running Back Pressure status change check\r\n2022-09-30 10:59:55.206 o.a.k.c.NetworkClient Thread-16-SegmentationCheck_Spout-executor[6, 6] [INFO] [Consumer clientId=consumer-segmentation.check.groupid-1, groupId=segmentation.check.groupid] Node 2147482646 disconnected.\r\n2022-09-30 10:59:55.206 o.a.s.k.s.KafkaSpout Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] Polled [0] records from Kafka\r\n2022-09-30 10:59:55.206 o.a.k.c.c.KafkaConsumer Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] [Consumer clientId=consumer-segmentation.check.groupid-1, groupId=segmentation.check.groupid] Resuming partitions []\r\n2022-09-30 10:59:55.208 o.a.s.k.s.KafkaSpoutRetryExponentialBackoff Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] Topic partitions with entries ready to be retried [{}] \r\n2022-09-30 10:59:55.208 o.a.k.c.c.KafkaConsumer Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] [Consumer clientId=consumer-segmentation.check.groupid-1, groupId=segmentation.check.groupid] Pausing partitions []\r\n2022-09-30 10:59:55.208 o.a.k.c.c.i.ConsumerCoordinator Thread-16-SegmentationCheck_Spout-executor[6, 6] [INFO] [Consumer clientId=consumer-segmentation.check.groupid-1, groupId=segmentation.check.groupid] Group coordinator kafka-broker0:9092 (id: 2147482646 rack: null) is unavailable or invalid due to cause: coordinator unavailable.isDisconnected: true. Rediscovery will be attempted.\r\n2022-09-30 10:59:55.208 o.a.k.c.c.i.ConsumerCoordinator Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] [Consumer clientId=consumer-segmentation.check.groupid-1, groupId=segmentation.check.groupid] Sending FindCoordinator request to broker kafka-broker0:9092 (id: 1001 rack: /rack0)\r\n2022-09-30 10:59:55.209 o.a.k.c.NetworkClient Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] [Consumer clientId=consumer-segmentation.check.groupid-1, groupId=segmentation.check.groupid] Sending metadata request MetadataRequestData(topics=[MetadataRequestTopic(topicId=AAAAAAAAAAAAAAAAAAAAAA, name=&#39;segmentation.check.queue&#39;)], allowAutoTopicCreation=true, includeClusterAuthorizedOperations=false, includeTopicAuthorizedOperations=false) to node kafka-broker0:9092 (id: 1001 rack: /rack0)\r\n2022-09-30 10:59:55.209 o.a.k.c.NetworkClient Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] [Consumer clientId=consumer-segmentation.check.groupid-1, groupId=segmentation.check.groupid] Sending METADATA request with header RequestHeader(apiKey=METADATA, apiVersion=9, clientId=consumer-segmentation.check.groupid-1, correlationId=2205) and timeout 60000 to node 1001: MetadataRequestData(topics=[MetadataRequestTopic(topicId=AAAAAAAAAAAAAAAAAAAAAA, name=&#39;segmentation.check.queue&#39;)], allowAutoTopicCreation=true, includeClusterAuthorizedOperations=false, includeTopicAuthorizedOperations=false)\r\n2022-09-30 10:59:55.210 o.a.k.c.NetworkClient Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] [Consumer clientId=consumer-segmentation.check.groupid-1, groupId=segmentation.check.groupid] Sending FIND_COORDINATOR request with header RequestHeader(apiKey=FIND_COORDINATOR, apiVersion=3, clientId=consumer-segmentation.check.groupid-1, correlationId=2204) and timeout 60000 to node 1001: FindCoordinatorRequestData(key=&#39;segmentation.check.groupid&#39;, keyType=0, coordinatorKeys=[])\r\n2022-09-30 10:59:55.212 o.a.k.c.NetworkClient Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] [Consumer clientId=consumer-segmentation.check.groupid-1, groupId=segmentation.check.groupid] Received METADATA response from node 1001 for request with header RequestHeader(apiKey=METADATA, apiVersion=9, clientId=consumer-segmentation.check.groupid-1, correlationId=2205): MetadataResponseData(throttleTimeMs=0, brokers=[MetadataResponseBroker(nodeId=1001, host=&#39;kafka-broker0&#39;, port=9092, rack=&#39;/rack0&#39;), MetadataResponseBroker(nodeId=1003, host=&#39;kafka-broker2&#39;, port=9092, rack=&#39;/rack2&#39;), MetadataResponseBroker(nodeId=1002, host=&#39;kafka-broker1&#39;, port=9092, rack=&#39;/rack1&#39;)], clusterId=&#39;fzb0hRraRb6mSwlmiWGOvA&#39;, controllerId=1001, topics=[MetadataResponseTopic(errorCode=0, name=&#39;segmentation.check.queue&#39;, topicId=AAAAAAAAAAAAAAAAAAAAAA, isInternal=false, partitions=[MetadataResponsePartition(errorCode=0, partitionIndex=0, leaderId=1002, leaderEpoch=3, replicaNodes=[1002, 1003, 1001], isrNodes=[1001, 1002, 1003], offlineReplicas=[]), MetadataResponsePartition(errorCode=0, partitionIndex=2, leaderId=1001, leaderEpoch=1, replicaNodes=[1001, 1002, 1003], isrNodes=[1001, 1002, 1003], offlineReplicas=[]), MetadataResponsePartition(errorCode=0, partitionIndex=1, leaderId=1003, leaderEpoch=4, replicaNodes=[1003, 1001, 1002], isrNodes=[1001, 1002, 1003], offlineReplicas=[])], topicAuthorizedOperations=0)], clusterAuthorizedOperations=0)\r\n2022-09-30 10:59:55.212 o.a.k.c.Metadata Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] [Consumer clientId=consumer-segmentation.check.groupid-1, groupId=segmentation.check.groupid] Updating last seen epoch for partition segmentation.check.queue-0 from 3 to epoch 3 from new metadata\r\n2022-09-30 10:59:55.212 o.a.k.c.Metadata Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] [Consumer clientId=consumer-segmentation.check.groupid-1, groupId=segmentation.check.groupid] Updating last seen epoch for partition segmentation.check.queue-2 from 1 to epoch 1 from new metadata\r\n2022-09-30 10:59:55.212 o.a.k.c.Metadata Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] [Consumer clientId=consumer-segmentation.check.groupid-1, groupId=segmentation.check.groupid] Updating last seen epoch for partition segmentation.check.queue-1 from 4 to epoch 4 from new metadata\r\n2022-09-30 10:59:55.213 o.a.k.c.Metadata Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] [Consumer clientId=consumer-segmentation.check.groupid-1, groupId=segmentation.check.groupid] Updated cluster metadata updateVersion 7 to MetadataCache{clusterId=&#39;fzb0hRraRb6mSwlmiWGOvA&#39;, nodes={1001=kafka-broker0:9092 (id: 1001 rack: /rack0), 1002=kafka-broker1:9092 (id: 1002 rack: /rack1), 1003=kafka-broker2:9092 (id: 1003 rack: /rack2)}, partitions=[PartitionMetadata(error=NONE, partition=segmentation.check.queue-0, leader=Optional[1002], leaderEpoch=Optional[3], replicas=1002,1003,1001, isr=1001,1002,1003, offlineReplicas=), PartitionMetadata(error=NONE, partition=segmentation.check.queue-2, leader=Optional[1001], leaderEpoch=Optional[1], replicas=1001,1002,1003, isr=1001,1002,1003, offlineReplicas=), PartitionMetadata(error=NONE, partition=segmentation.check.queue-1, leader=Optional[1003], leaderEpoch=Optional[4], replicas=1003,1001,1002, isr=1001,1002,1003, offlineReplicas=)], controller=kafka-broker0:9092 (id: 1001 rack: /rack0)}\r\n2022-09-30 10:59:55.213 o.a.k.c.NetworkClient Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] [Consumer clientId=consumer-segmentation.check.groupid-1, groupId=segmentation.check.groupid] Received FIND_COORDINATOR response from node 1001 for request with header RequestHeader(apiKey=FIND_COORDINATOR, apiVersion=3, clientId=consumer-segmentation.check.groupid-1, correlationId=2204): FindCoordinatorResponseData(throttleTimeMs=0, errorCode=0, errorMessage=&#39;NONE&#39;, nodeId=1001, host=&#39;kafka-broker0&#39;, port=9092, coordinators=[])\r\n2022-09-30 10:59:55.214 o.a.k.c.c.i.ConsumerCoordinator Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] [Consumer clientId=consumer-segmentation.check.groupid-1, groupId=segmentation.check.groupid] Received FindCoordinator response ClientResponse(receivedTimeMs=1664535595213, latencyMs=5, disconnected=false, requestHeader=RequestHeader(apiKey=FIND_COORDINATOR, apiVersion=3, clientId=consumer-segmentation.check.groupid-1, correlationId=2204), responseBody=FindCoordinatorResponseData(throttleTimeMs=0, errorCode=0, errorMessage=&#39;NONE&#39;, nodeId=1001, host=&#39;kafka-broker0&#39;, port=9092, coordinators=[]))\r\n2022-09-30 10:59:55.214 o.a.k.c.c.i.ConsumerCoordinator Thread-16-SegmentationCheck_Spout-executor[6, 6] [INFO] [Consumer clientId=consumer-segmentation.check.groupid-1, groupId=segmentation.check.groupid] Discovered group coordinator kafka-broker0:9092 (id: 2147482646 rack: null)\r\n2022-09-30 10:59:55.214 o.a.k.c.c.i.ConsumerCoordinator Thread-16-SegmentationCheck_Spout-executor[6, 6] [INFO] [Consumer clientId=consumer-segmentation.check.groupid-1, groupId=segmentation.check.groupid] Group coordinator kafka-broker0:9092 (id: 2147482646 rack: null) is unavailable or invalid due to cause: coordinator unavailable.isDisconnected: false. Rediscovery will be attempted.\r\n2022-09-30 10:59:55.214 o.a.k.c.c.i.ConsumerCoordinator Thread-16-SegmentationCheck_Spout-executor[6, 6] [INFO] [Consumer clientId=consumer-segmentation.check.groupid-1, groupId=segmentation.check.groupid] Requesting disconnect from last known coordinator kafka-broker0:9092 (id: 2147482646 rack: null)\r\n```","title":"Kafka group coordinator disconnects by uknown reason each 10 minis","body":"<p>I faced an issue that my Kafka does rebalancing almost each 5-10 min for an unknown reason. I use Kafka and apache storm. A typical situation that logs before Backpressure (Strom stuff) repeating but after some time I see Node 2147482646 disconnected and other logs with  &quot;coordinator unavailable.isDisconnected: true&quot; and after this everything is rebalancing and as for me it's not a healthy situation despite the fact that Kafka works fine.</p>\n<p>Almost all my topics have 3 replicas and 10 partitions and I have 10 Spouts (10 consumers)</p>\n<p>Ive read that such configs as:</p>\n<pre><code>heartbeat.interval.ms\nsession.timeout.ms\nrebalance.timeout.ms\n</code></pre>\n<p>can affect this. My set up was:</p>\n<pre><code>heartbeat.interval.ms: 5000\nsession.timeout.ms: 30000\nrebalance.timeout.ms: 60000\n</code></pre>\n<p>And I thought that maybe due to some connection issues 4-5 heartbeat messages are not enough and tried heartbeat.interval.ms: 2000 but it did not help.</p>\n<p>As I understood from searching kafka lib is that it happens in NetworkClient in poll() method and later there handleDisconnections(responses, updatedNow) and there selector is already disconnected.</p>\n<p>What else can cause such kind of issue?</p>\n<pre><code>2022-09-30 10:59:54.599 o.a.s.k.s.KafkaSpout Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] Polled [0] records from Kafka\n2022-09-30 10:59:54.599 o.a.k.c.c.KafkaConsumer Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] [Consumer clientId=consumer-segmentation.check.groupid-1, groupId=segmentation.check.groupid] Resuming partitions []\n2022-09-30 10:59:54.601 o.a.s.k.s.KafkaSpoutRetryExponentialBackoff Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] Topic partitions with entries ready to be retried [{}] \n2022-09-30 10:59:54.601 o.a.k.c.c.KafkaConsumer Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] [Consumer clientId=consumer-segmentation.check.groupid-1, groupId=segmentation.check.groupid] Pausing partitions []\n2022-09-30 10:59:54.614 o.a.s.g.LoadAwareShuffleGrouping refresh-load-timer [DEBUG] targetTask 1 is in LocalityScope RACK_LOCAL\n2022-09-30 10:59:54.615 o.a.s.g.LoadAwareShuffleGrouping refresh-load-timer [DEBUG] targetTask 2 is in LocalityScope WORKER_LOCAL\n2022-09-30 10:59:54.615 o.a.s.g.LoadAwareShuffleGrouping refresh-load-timer [DEBUG] targetTask 3 is in LocalityScope RACK_LOCAL\n2022-09-30 10:59:54.615 o.a.s.g.LoadAwareShuffleGrouping refresh-load-timer [DEBUG] targetTask 4 is in LocalityScope WORKER_LOCAL\n2022-09-30 10:59:54.630 o.a.s.d.w.WorkerState backpressure-check-timer [DEBUG] Checking for change in Backpressure status on worker's tasks\n2022-09-30 10:59:54.630 o.a.s.d.w.BackPressureTracker backpressure-check-timer [DEBUG] Running Back Pressure status change check\n2022-09-30 10:59:54.680 o.a.s.d.w.WorkerState backpressure-check-timer [DEBUG] Checking for change in Backpressure status on worker's tasks\n2022-09-30 10:59:54.680 o.a.s.d.w.BackPressureTracker backpressure-check-timer [DEBUG] Running Back Pressure status change check\n2022-09-30 10:59:54.731 o.a.s.d.w.WorkerState backpressure-check-timer [DEBUG] Checking for change in Backpressure status on worker's tasks\n2022-09-30 10:59:54.731 o.a.s.d.w.BackPressureTracker backpressure-check-timer [DEBUG] Running Back Pressure status change check\n2022-09-30 10:59:54.781 o.a.s.d.w.WorkerState backpressure-check-timer [DEBUG] Checking for change in Backpressure status on worker's tasks\n2022-09-30 10:59:54.781 o.a.s.d.w.BackPressureTracker backpressure-check-timer [DEBUG] Running Back Pressure status change check\n2022-09-30 10:59:54.801 o.a.s.k.s.KafkaSpout Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] Polled [0] records from Kafka\n2022-09-30 10:59:54.801 o.a.k.c.c.KafkaConsumer Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] [Consumer clientId=consumer-segmentation.check.groupid-1, groupId=segmentation.check.groupid] Resuming partitions []\n2022-09-30 10:59:54.802 o.a.s.k.s.KafkaSpoutRetryExponentialBackoff Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] Topic partitions with entries ready to be retried [{}] \n2022-09-30 10:59:54.803 o.a.k.c.c.KafkaConsumer Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] [Consumer clientId=consumer-segmentation.check.groupid-1, groupId=segmentation.check.groupid] Pausing partitions []\n2022-09-30 10:59:54.831 o.a.s.d.w.WorkerState backpressure-check-timer [DEBUG] Checking for change in Backpressure status on worker's tasks\n2022-09-30 10:59:54.832 o.a.s.d.w.BackPressureTracker backpressure-check-timer [DEBUG] Running Back Pressure status change check\n2022-09-30 10:59:54.882 o.a.s.d.w.WorkerState backpressure-check-timer [DEBUG] Checking for change in Backpressure status on worker's tasks\n2022-09-30 10:59:54.882 o.a.s.d.w.BackPressureTracker backpressure-check-timer [DEBUG] Running Back Pressure status change check\n2022-09-30 10:59:54.933 o.a.s.d.w.WorkerState backpressure-check-timer [DEBUG] Checking for change in Backpressure status on worker's tasks\n2022-09-30 10:59:54.933 o.a.s.d.w.BackPressureTracker backpressure-check-timer [DEBUG] Running Back Pressure status change check\n2022-09-30 10:59:54.983 o.a.s.d.w.WorkerState backpressure-check-timer [DEBUG] Checking for change in Backpressure status on worker's tasks\n2022-09-30 10:59:54.983 o.a.s.d.w.BackPressureTracker backpressure-check-timer [DEBUG] Running Back Pressure status change check\n2022-09-30 10:59:54.995 o.a.k.c.NetworkClient Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] [Consumer clientId=consumer-segmentation.check.groupid-1, groupId=segmentation.check.groupid] Received FETCH response from node 1003 for request with header RequestHeader(apiKey=FETCH, apiVersion=11, clientId=consumer-segmentation.check.groupid-1, correlationId=2202): FetchResponseData(throttleTimeMs=0, errorCode=0, sessionId=808668183, responses=[])\n2022-09-30 10:59:54.995 o.a.k.c.FetchSessionHandler Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] [Consumer clientId=consumer-segmentation.check.groupid-1, groupId=segmentation.check.groupid] Node 1003 sent an incremental fetch response with throttleTimeMs = 0 for session 808668183 with 0 response partition(s), 1 implied partition(s)\n2022-09-30 10:59:54.996 o.a.k.c.c.i.Fetcher Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] [Consumer clientId=consumer-segmentation.check.groupid-1, groupId=segmentation.check.groupid] Added READ_UNCOMMITTED fetch request for partition segmentation.check.queue-1 at position FetchPosition{offset=1136153, offsetEpoch=Optional.empty, currentLeader=LeaderAndEpoch{leader=Optional[kafka-broker2:9092 (id: 1003 rack: /rack2)], epoch=4}} to node kafka-broker2:9092 (id: 1003 rack: /rack2)\n2022-09-30 10:59:54.996 o.a.k.c.FetchSessionHandler Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] [Consumer clientId=consumer-segmentation.check.groupid-1, groupId=segmentation.check.groupid] Built incremental fetch (sessionId=808668183, epoch=2152) for node 1003. Added 0 partition(s), altered 0 partition(s), removed 0 partition(s), replaced 0 partition(s) out of 1 partition(s)\n2022-09-30 10:59:54.996 o.a.k.c.c.i.Fetcher Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] [Consumer clientId=consumer-segmentation.check.groupid-1, groupId=segmentation.check.groupid] Sending READ_UNCOMMITTED IncrementalFetchRequest(toSend=(), toForget=(), toReplace=(), implied=(segmentation.check.queue-1), canUseTopicIds=False) to broker kafka-broker2:9092 (id: 1003 rack: /rack2)\n2022-09-30 10:59:54.996 o.a.k.c.NetworkClient Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] [Consumer clientId=consumer-segmentation.check.groupid-1, groupId=segmentation.check.groupid] Sending FETCH request with header RequestHeader(apiKey=FETCH, apiVersion=11, clientId=consumer-segmentation.check.groupid-1, correlationId=2203) and timeout 60000 to node 1003: FetchRequestData(clusterId=null, replicaId=-1, maxWaitMs=500, minBytes=1, maxBytes=52428800, isolationLevel=0, sessionId=808668183, sessionEpoch=2152, topics=[], forgottenTopicsData=[], rackId='')\n2022-09-30 10:59:55.003 o.a.s.k.s.KafkaSpout Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] Polled [0] records from Kafka\n2022-09-30 10:59:55.003 o.a.k.c.c.KafkaConsumer Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] [Consumer clientId=consumer-segmentation.check.groupid-1, groupId=segmentation.check.groupid] Resuming partitions []\n2022-09-30 10:59:55.005 o.a.s.k.s.KafkaSpoutRetryExponentialBackoff Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] Topic partitions with entries ready to be retried [{}] \n2022-09-30 10:59:55.005 o.a.k.c.c.KafkaConsumer Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] [Consumer clientId=consumer-segmentation.check.groupid-1, groupId=segmentation.check.groupid] Pausing partitions []\n2022-09-30 10:59:55.033 o.a.s.d.w.WorkerState backpressure-check-timer [DEBUG] Checking for change in Backpressure status on worker's tasks\n2022-09-30 10:59:55.034 o.a.s.d.w.BackPressureTracker backpressure-check-timer [DEBUG] Running Back Pressure status change check\n2022-09-30 10:59:55.084 o.a.s.d.w.WorkerState backpressure-check-timer [DEBUG] Checking for change in Backpressure status on worker's tasks\n2022-09-30 10:59:55.084 o.a.s.d.w.BackPressureTracker backpressure-check-timer [DEBUG] Running Back Pressure status change check\n2022-09-30 10:59:55.134 o.a.s.d.w.WorkerState backpressure-check-timer [DEBUG] Checking for change in Backpressure status on worker's tasks\n2022-09-30 10:59:55.134 o.a.s.d.w.BackPressureTracker backpressure-check-timer [DEBUG] Running Back Pressure status change check\n2022-09-30 10:59:55.185 o.a.s.d.w.WorkerState backpressure-check-timer [DEBUG] Checking for change in Backpressure status on worker's tasks\n2022-09-30 10:59:55.185 o.a.s.d.w.BackPressureTracker backpressure-check-timer [DEBUG] Running Back Pressure status change check\n2022-09-30 10:59:55.206 o.a.k.c.NetworkClient Thread-16-SegmentationCheck_Spout-executor[6, 6] [INFO] [Consumer clientId=consumer-segmentation.check.groupid-1, groupId=segmentation.check.groupid] Node 2147482646 disconnected.\n2022-09-30 10:59:55.206 o.a.s.k.s.KafkaSpout Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] Polled [0] records from Kafka\n2022-09-30 10:59:55.206 o.a.k.c.c.KafkaConsumer Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] [Consumer clientId=consumer-segmentation.check.groupid-1, groupId=segmentation.check.groupid] Resuming partitions []\n2022-09-30 10:59:55.208 o.a.s.k.s.KafkaSpoutRetryExponentialBackoff Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] Topic partitions with entries ready to be retried [{}] \n2022-09-30 10:59:55.208 o.a.k.c.c.KafkaConsumer Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] [Consumer clientId=consumer-segmentation.check.groupid-1, groupId=segmentation.check.groupid] Pausing partitions []\n2022-09-30 10:59:55.208 o.a.k.c.c.i.ConsumerCoordinator Thread-16-SegmentationCheck_Spout-executor[6, 6] [INFO] [Consumer clientId=consumer-segmentation.check.groupid-1, groupId=segmentation.check.groupid] Group coordinator kafka-broker0:9092 (id: 2147482646 rack: null) is unavailable or invalid due to cause: coordinator unavailable.isDisconnected: true. Rediscovery will be attempted.\n2022-09-30 10:59:55.208 o.a.k.c.c.i.ConsumerCoordinator Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] [Consumer clientId=consumer-segmentation.check.groupid-1, groupId=segmentation.check.groupid] Sending FindCoordinator request to broker kafka-broker0:9092 (id: 1001 rack: /rack0)\n2022-09-30 10:59:55.209 o.a.k.c.NetworkClient Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] [Consumer clientId=consumer-segmentation.check.groupid-1, groupId=segmentation.check.groupid] Sending metadata request MetadataRequestData(topics=[MetadataRequestTopic(topicId=AAAAAAAAAAAAAAAAAAAAAA, name='segmentation.check.queue')], allowAutoTopicCreation=true, includeClusterAuthorizedOperations=false, includeTopicAuthorizedOperations=false) to node kafka-broker0:9092 (id: 1001 rack: /rack0)\n2022-09-30 10:59:55.209 o.a.k.c.NetworkClient Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] [Consumer clientId=consumer-segmentation.check.groupid-1, groupId=segmentation.check.groupid] Sending METADATA request with header RequestHeader(apiKey=METADATA, apiVersion=9, clientId=consumer-segmentation.check.groupid-1, correlationId=2205) and timeout 60000 to node 1001: MetadataRequestData(topics=[MetadataRequestTopic(topicId=AAAAAAAAAAAAAAAAAAAAAA, name='segmentation.check.queue')], allowAutoTopicCreation=true, includeClusterAuthorizedOperations=false, includeTopicAuthorizedOperations=false)\n2022-09-30 10:59:55.210 o.a.k.c.NetworkClient Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] [Consumer clientId=consumer-segmentation.check.groupid-1, groupId=segmentation.check.groupid] Sending FIND_COORDINATOR request with header RequestHeader(apiKey=FIND_COORDINATOR, apiVersion=3, clientId=consumer-segmentation.check.groupid-1, correlationId=2204) and timeout 60000 to node 1001: FindCoordinatorRequestData(key='segmentation.check.groupid', keyType=0, coordinatorKeys=[])\n2022-09-30 10:59:55.212 o.a.k.c.NetworkClient Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] [Consumer clientId=consumer-segmentation.check.groupid-1, groupId=segmentation.check.groupid] Received METADATA response from node 1001 for request with header RequestHeader(apiKey=METADATA, apiVersion=9, clientId=consumer-segmentation.check.groupid-1, correlationId=2205): MetadataResponseData(throttleTimeMs=0, brokers=[MetadataResponseBroker(nodeId=1001, host='kafka-broker0', port=9092, rack='/rack0'), MetadataResponseBroker(nodeId=1003, host='kafka-broker2', port=9092, rack='/rack2'), MetadataResponseBroker(nodeId=1002, host='kafka-broker1', port=9092, rack='/rack1')], clusterId='fzb0hRraRb6mSwlmiWGOvA', controllerId=1001, topics=[MetadataResponseTopic(errorCode=0, name='segmentation.check.queue', topicId=AAAAAAAAAAAAAAAAAAAAAA, isInternal=false, partitions=[MetadataResponsePartition(errorCode=0, partitionIndex=0, leaderId=1002, leaderEpoch=3, replicaNodes=[1002, 1003, 1001], isrNodes=[1001, 1002, 1003], offlineReplicas=[]), MetadataResponsePartition(errorCode=0, partitionIndex=2, leaderId=1001, leaderEpoch=1, replicaNodes=[1001, 1002, 1003], isrNodes=[1001, 1002, 1003], offlineReplicas=[]), MetadataResponsePartition(errorCode=0, partitionIndex=1, leaderId=1003, leaderEpoch=4, replicaNodes=[1003, 1001, 1002], isrNodes=[1001, 1002, 1003], offlineReplicas=[])], topicAuthorizedOperations=0)], clusterAuthorizedOperations=0)\n2022-09-30 10:59:55.212 o.a.k.c.Metadata Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] [Consumer clientId=consumer-segmentation.check.groupid-1, groupId=segmentation.check.groupid] Updating last seen epoch for partition segmentation.check.queue-0 from 3 to epoch 3 from new metadata\n2022-09-30 10:59:55.212 o.a.k.c.Metadata Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] [Consumer clientId=consumer-segmentation.check.groupid-1, groupId=segmentation.check.groupid] Updating last seen epoch for partition segmentation.check.queue-2 from 1 to epoch 1 from new metadata\n2022-09-30 10:59:55.212 o.a.k.c.Metadata Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] [Consumer clientId=consumer-segmentation.check.groupid-1, groupId=segmentation.check.groupid] Updating last seen epoch for partition segmentation.check.queue-1 from 4 to epoch 4 from new metadata\n2022-09-30 10:59:55.213 o.a.k.c.Metadata Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] [Consumer clientId=consumer-segmentation.check.groupid-1, groupId=segmentation.check.groupid] Updated cluster metadata updateVersion 7 to MetadataCache{clusterId='fzb0hRraRb6mSwlmiWGOvA', nodes={1001=kafka-broker0:9092 (id: 1001 rack: /rack0), 1002=kafka-broker1:9092 (id: 1002 rack: /rack1), 1003=kafka-broker2:9092 (id: 1003 rack: /rack2)}, partitions=[PartitionMetadata(error=NONE, partition=segmentation.check.queue-0, leader=Optional[1002], leaderEpoch=Optional[3], replicas=1002,1003,1001, isr=1001,1002,1003, offlineReplicas=), PartitionMetadata(error=NONE, partition=segmentation.check.queue-2, leader=Optional[1001], leaderEpoch=Optional[1], replicas=1001,1002,1003, isr=1001,1002,1003, offlineReplicas=), PartitionMetadata(error=NONE, partition=segmentation.check.queue-1, leader=Optional[1003], leaderEpoch=Optional[4], replicas=1003,1001,1002, isr=1001,1002,1003, offlineReplicas=)], controller=kafka-broker0:9092 (id: 1001 rack: /rack0)}\n2022-09-30 10:59:55.213 o.a.k.c.NetworkClient Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] [Consumer clientId=consumer-segmentation.check.groupid-1, groupId=segmentation.check.groupid] Received FIND_COORDINATOR response from node 1001 for request with header RequestHeader(apiKey=FIND_COORDINATOR, apiVersion=3, clientId=consumer-segmentation.check.groupid-1, correlationId=2204): FindCoordinatorResponseData(throttleTimeMs=0, errorCode=0, errorMessage='NONE', nodeId=1001, host='kafka-broker0', port=9092, coordinators=[])\n2022-09-30 10:59:55.214 o.a.k.c.c.i.ConsumerCoordinator Thread-16-SegmentationCheck_Spout-executor[6, 6] [DEBUG] [Consumer clientId=consumer-segmentation.check.groupid-1, groupId=segmentation.check.groupid] Received FindCoordinator response ClientResponse(receivedTimeMs=1664535595213, latencyMs=5, disconnected=false, requestHeader=RequestHeader(apiKey=FIND_COORDINATOR, apiVersion=3, clientId=consumer-segmentation.check.groupid-1, correlationId=2204), responseBody=FindCoordinatorResponseData(throttleTimeMs=0, errorCode=0, errorMessage='NONE', nodeId=1001, host='kafka-broker0', port=9092, coordinators=[]))\n2022-09-30 10:59:55.214 o.a.k.c.c.i.ConsumerCoordinator Thread-16-SegmentationCheck_Spout-executor[6, 6] [INFO] [Consumer clientId=consumer-segmentation.check.groupid-1, groupId=segmentation.check.groupid] Discovered group coordinator kafka-broker0:9092 (id: 2147482646 rack: null)\n2022-09-30 10:59:55.214 o.a.k.c.c.i.ConsumerCoordinator Thread-16-SegmentationCheck_Spout-executor[6, 6] [INFO] [Consumer clientId=consumer-segmentation.check.groupid-1, groupId=segmentation.check.groupid] Group coordinator kafka-broker0:9092 (id: 2147482646 rack: null) is unavailable or invalid due to cause: coordinator unavailable.isDisconnected: false. Rediscovery will be attempted.\n2022-09-30 10:59:55.214 o.a.k.c.c.i.ConsumerCoordinator Thread-16-SegmentationCheck_Spout-executor[6, 6] [INFO] [Consumer clientId=consumer-segmentation.check.groupid-1, groupId=segmentation.check.groupid] Requesting disconnect from last known coordinator kafka-broker0:9092 (id: 2147482646 rack: null)\n</code></pre>\n"},{"tags":["java","json","tree","jolt"],"answers":[{"tags":[],"owner":{"account_id":7712415,"reputation":60542,"user_id":5841306,"display_name":"Barbaros &#214;zhan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1662385269,"creation_date":1662385269,"answer_id":73610316,"question_id":73609108,"body_markdown":"You can use the following explained spec\r\n```json\r\n[\r\n  {\r\n    // Determine all key-value pairs partitioned under the main value and type.typeValue combinations \r\n    &quot;operation&quot;: &quot;shift&quot;,\r\n    &quot;spec&quot;: {\r\n      &quot;item&quot;: {\r\n        &quot;*&quot;: {\r\n          &quot;item&quot;: {\r\n            &quot;*&quot;: {\r\n              &quot;item&quot;: {\r\n                &quot;*&quot;: {\r\n                  &quot;type&quot;: {\r\n                    &quot;@(1,id)&quot;: &quot;@(2,id).@(1,typeName).id&quot;, //traverse } character twice in order to reach the main id of the object\r\n                    &quot;@(1,action)&quot;: &quot;@(2,id).@(1,typeName).action&quot;,\r\n                    &quot;*&quot;: &quot;@(2,id).@(1,typeName).&amp;1.&amp;&quot; // &amp;1 replicates &quot;type&quot; key, &amp; does the leaf value\r\n                  },\r\n                  &quot;*&quot;: &quot;@(1,id).@(1,type.typeName).&amp;&quot;\r\n                }\r\n              },\r\n              &quot;type&quot;: {\r\n                &quot;@(1,id)&quot;: &quot;@(2,id).@(1,typeName).id&quot;,\r\n                &quot;@(1,action)&quot;: &quot;@(2,id).@(1,typeName).action&quot;,\r\n                &quot;*&quot;: &quot;@(2,id).@(1,typeName).&amp;1.&amp;&quot;\r\n              },\r\n              &quot;*&quot;: &quot;@(1,id).@(1,type.typeName).&amp;&quot;\r\n            }\r\n          },\r\n          &quot;type&quot;: {\r\n            &quot;@(1,id)&quot;: &quot;@(2,id).@(1,typeName).id&quot;,\r\n            &quot;@(1,action)&quot;: &quot;@(2,id).@(1,typeName).action&quot;,\r\n            &quot;*&quot;: &quot;@(2,id).@(1,typeName).&amp;1.&amp;&quot;\r\n          },\r\n          &quot;*&quot;: &quot;@(1,id).@(1,type.typeName).&amp;&quot;\r\n        }\r\n      }\r\n    }\r\n  },\r\n  {\r\n    // Filter out by the desired value(in this case it&#39;s &quot;xx&quot;) \r\n    &quot;operation&quot;: &quot;shift&quot;,\r\n    &quot;spec&quot;: {\r\n      &quot;*&quot;: {\r\n        &quot;xx&quot;: &quot;&quot;\r\n      }\r\n    }\r\n  },\r\n  {\r\n    // Get rid of same repeating components of id and action arrays\r\n    &quot;operation&quot;: &quot;cardinality&quot;,\r\n    &quot;spec&quot;: {\r\n      &quot;*&quot;: {\r\n        &quot;id&quot;: &quot;ONE&quot;,\r\n        &quot;action&quot;: &quot;ONE&quot;\r\n      }\r\n    }\r\n  },\r\n  {\r\n    // Get rid of undesired attributes\r\n    &quot;operation&quot;: &quot;remove&quot;,\r\n    &quot;spec&quot;: {\r\n      &quot;*&quot;: {\r\n        &quot;type&quot;: {\r\n          &quot;typeGroup&quot;: &quot;&quot;,\r\n          &quot;typeValue&quot;: &quot;&quot;\r\n        },\r\n        &quot;det*&quot;: {\r\n          &quot;reason&quot;: &quot;&quot;\r\n        }\r\n      }\r\n    }\r\n  }\r\n]\r\n```","title":"JOLT shift transformation: filter by inner value of a property (not the name) - only some properties","body":"<p>You can use the following explained spec</p>\n<pre class=\"lang-json prettyprint-override\"><code>[\n  {\n    // Determine all key-value pairs partitioned under the main value and type.typeValue combinations \n    &quot;operation&quot;: &quot;shift&quot;,\n    &quot;spec&quot;: {\n      &quot;item&quot;: {\n        &quot;*&quot;: {\n          &quot;item&quot;: {\n            &quot;*&quot;: {\n              &quot;item&quot;: {\n                &quot;*&quot;: {\n                  &quot;type&quot;: {\n                    &quot;@(1,id)&quot;: &quot;@(2,id).@(1,typeName).id&quot;, //traverse } character twice in order to reach the main id of the object\n                    &quot;@(1,action)&quot;: &quot;@(2,id).@(1,typeName).action&quot;,\n                    &quot;*&quot;: &quot;@(2,id).@(1,typeName).&amp;1.&amp;&quot; // &amp;1 replicates &quot;type&quot; key, &amp; does the leaf value\n                  },\n                  &quot;*&quot;: &quot;@(1,id).@(1,type.typeName).&amp;&quot;\n                }\n              },\n              &quot;type&quot;: {\n                &quot;@(1,id)&quot;: &quot;@(2,id).@(1,typeName).id&quot;,\n                &quot;@(1,action)&quot;: &quot;@(2,id).@(1,typeName).action&quot;,\n                &quot;*&quot;: &quot;@(2,id).@(1,typeName).&amp;1.&amp;&quot;\n              },\n              &quot;*&quot;: &quot;@(1,id).@(1,type.typeName).&amp;&quot;\n            }\n          },\n          &quot;type&quot;: {\n            &quot;@(1,id)&quot;: &quot;@(2,id).@(1,typeName).id&quot;,\n            &quot;@(1,action)&quot;: &quot;@(2,id).@(1,typeName).action&quot;,\n            &quot;*&quot;: &quot;@(2,id).@(1,typeName).&amp;1.&amp;&quot;\n          },\n          &quot;*&quot;: &quot;@(1,id).@(1,type.typeName).&amp;&quot;\n        }\n      }\n    }\n  },\n  {\n    // Filter out by the desired value(in this case it's &quot;xx&quot;) \n    &quot;operation&quot;: &quot;shift&quot;,\n    &quot;spec&quot;: {\n      &quot;*&quot;: {\n        &quot;xx&quot;: &quot;&quot;\n      }\n    }\n  },\n  {\n    // Get rid of same repeating components of id and action arrays\n    &quot;operation&quot;: &quot;cardinality&quot;,\n    &quot;spec&quot;: {\n      &quot;*&quot;: {\n        &quot;id&quot;: &quot;ONE&quot;,\n        &quot;action&quot;: &quot;ONE&quot;\n      }\n    }\n  },\n  {\n    // Get rid of undesired attributes\n    &quot;operation&quot;: &quot;remove&quot;,\n    &quot;spec&quot;: {\n      &quot;*&quot;: {\n        &quot;type&quot;: {\n          &quot;typeGroup&quot;: &quot;&quot;,\n          &quot;typeValue&quot;: &quot;&quot;\n        },\n        &quot;det*&quot;: {\n          &quot;reason&quot;: &quot;&quot;\n        }\n      }\n    }\n  }\n]\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13009011,"reputation":1105,"user_id":9402689,"display_name":"Raymond Choi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664894410,"creation_date":1664894410,"answer_id":73949609,"question_id":73609108,"body_markdown":"You may try library _Josson_. Function `map()` build a new ObjectNode. Function `field()` modify the current ObjectNode and can be used to remove fields. The transformation statement is short and easy to understand.\r\n\r\nhttps://github.com/octomix/josson\r\n\r\n    Josson josson = Josson.fromJsonString(inputJSON);\r\n    JsonNode node = josson.getNode(\r\n        &quot;cumulateCollect(&quot; +\r\n        &quot;    [type.typeName=&#39;xx&#39;]&quot; +              // filter\r\n        &quot;        .field(type.map(id, typeName)&quot; + // need &quot;type.id&quot; and &quot;type.typeName&quot;\r\n        &quot;              ,details.field(reason:)&quot; + // remove &quot;details.reason&quot;\r\n        &quot;              ,item:)&quot; +                 // remove &quot;item&quot;\r\n        &quot;   ,item)&quot;);                             // next round\r\n    System.out.println(node.toPrettyString());\r\n","title":"JOLT shift transformation: filter by inner value of a property (not the name) - only some properties","body":"<p>You may try library <em>Josson</em>. Function <code>map()</code> build a new ObjectNode. Function <code>field()</code> modify the current ObjectNode and can be used to remove fields. The transformation statement is short and easy to understand.</p>\n<p><a href=\"https://github.com/octomix/josson\" rel=\"nofollow noreferrer\">https://github.com/octomix/josson</a></p>\n<pre><code>Josson josson = Josson.fromJsonString(inputJSON);\nJsonNode node = josson.getNode(\n    &quot;cumulateCollect(&quot; +\n    &quot;    [type.typeName='xx']&quot; +              // filter\n    &quot;        .field(type.map(id, typeName)&quot; + // need &quot;type.id&quot; and &quot;type.typeName&quot;\n    &quot;              ,details.field(reason:)&quot; + // remove &quot;details.reason&quot;\n    &quot;              ,item:)&quot; +                 // remove &quot;item&quot;\n    &quot;   ,item)&quot;);                             // next round\nSystem.out.println(node.toPrettyString());\n</code></pre>\n"}],"owner":{"account_id":16696811,"reputation":111,"user_id":12067782,"display_name":"Michal"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":132,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73610316,"answer_count":2,"score":0,"last_activity_date":1664894410,"creation_date":1662379551,"question_id":73609108,"body_markdown":"I am trying to transform a JSON using Jolt transformation looking for some input here.\r\nI am trying to filter by the inner value of the attribute.\r\n\r\n**My goal is to get an array that contains only the items with the typeName &#39;xx&#39;. But not all the item object, only some of the fields**\r\n\r\n```json\r\n{\r\n  &quot;id&quot;: &quot;11_1&quot;,\r\n  &quot;action&quot;: &quot;add&quot;,\r\n  &quot;payment&quot;: {\r\n    &quot;paied&quot;: true,\r\n    &quot;coin&quot;: &quot;dollar&quot;\r\n  },\r\n  &quot;type&quot;: {\r\n    &quot;id&quot;: &quot;11_1_xx&quot;,\r\n    &quot;typeName&quot;: &quot;xx&quot;\r\n  },\r\n  &quot;details&quot;: {\r\n    &quot;place&quot;: {\r\n      &quot;id&quot;: &quot;123&quot;,\r\n      &quot;name&quot;: &quot;xx&quot;\r\n    },\r\n    &quot;status&quot;: {\r\n      &quot;id&quot;: &quot;123&quot;,\r\n      &quot;name&quot;: &quot;xx&quot;\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nHere is my input and expected output:\r\n\r\n*Input*:\r\n\r\n```json\r\n{\r\n  &quot;id&quot;: 11,\r\n  &quot;item&quot;: [\r\n    {\r\n      &quot;id&quot;: &quot;11_1&quot;,\r\n      &quot;action&quot;: &quot;add&quot;,\r\n      &quot;payment&quot;: {\r\n        &quot;paied&quot;: true,\r\n        &quot;coin&quot;: &quot;dollar&quot;\r\n      },\r\n      &quot;type&quot;: {\r\n        &quot;id&quot;: &quot;11_1_xx&quot;,\r\n        &quot;typeName&quot;: &quot;xx&quot;,\r\n        &quot;typeGroup&quot;: &quot;xx&quot;,\r\n        &quot;typeValue&quot;: &quot;xx&quot;\r\n      },\r\n      &quot;details&quot;: {\r\n        &quot;place&quot;: {\r\n          &quot;id&quot;: &quot;123&quot;,\r\n          &quot;name&quot;: &quot;xx&quot;\r\n        },\r\n        &quot;status&quot;: {\r\n          &quot;id&quot;: &quot;123&quot;,\r\n          &quot;name&quot;: &quot;xx&quot;\r\n        },\r\n        &quot;reason&quot;: {\r\n          &quot;id&quot;: &quot;123&quot;,\r\n          &quot;name&quot;: &quot;xx&quot;\r\n        }\r\n      },\r\n      &quot;item&quot;: [\r\n        {\r\n          &quot;id&quot;: &quot;11_1_1&quot;,\r\n          &quot;action&quot;: &quot;add&quot;,\r\n          &quot;payment&quot;: {\r\n            &quot;paied&quot;: true,\r\n            &quot;coin&quot;: &quot;dollar&quot;\r\n          },\r\n          &quot;type&quot;: {\r\n            &quot;id&quot;: &quot;11_1_1_zz&quot;,\r\n            &quot;typeName&quot;: &quot;zz&quot;,\r\n            &quot;typeGroup&quot;: &quot;zz&quot;,\r\n            &quot;typeValue&quot;: &quot;zz&quot;\r\n          },\r\n          &quot;details&quot;: {\r\n            &quot;place&quot;: {\r\n              &quot;id&quot;: &quot;123&quot;,\r\n              &quot;name&quot;: &quot;xx&quot;\r\n            },\r\n            &quot;status&quot;: {\r\n              &quot;id&quot;: &quot;123&quot;,\r\n              &quot;name&quot;: &quot;xx&quot;\r\n            },\r\n            &quot;reason&quot;: {\r\n              &quot;id&quot;: &quot;123&quot;,\r\n              &quot;name&quot;: &quot;xx&quot;\r\n            }\r\n          },\r\n          &quot;item&quot;: [\r\n            {\r\n              &quot;id&quot;: &quot;11_1_1_1&quot;,\r\n              &quot;action&quot;: &quot;add&quot;,\r\n              &quot;payment&quot;: {\r\n                &quot;paied&quot;: true,\r\n                &quot;coin&quot;: &quot;NIS&quot;\r\n              },\r\n              &quot;type&quot;: {\r\n                &quot;id&quot;: &quot;11_1_1_1_xx&quot;,\r\n                &quot;typeName&quot;: &quot;xx&quot;,\r\n                &quot;typeGroup&quot;: &quot;xx&quot;,\r\n                &quot;typeValue&quot;: &quot;xx&quot;\r\n              },\r\n              &quot;details&quot;: {\r\n                &quot;place&quot;: {\r\n                  &quot;id&quot;: &quot;123&quot;,\r\n                  &quot;name&quot;: &quot;xx&quot;\r\n                },\r\n                &quot;status&quot;: {\r\n                  &quot;id&quot;: &quot;123&quot;,\r\n                  &quot;name&quot;: &quot;xx&quot;\r\n                },\r\n                &quot;reason&quot;: {\r\n                  &quot;id&quot;: &quot;123&quot;,\r\n                  &quot;name&quot;: &quot;xx&quot;\r\n                }\r\n              }\r\n            }\r\n          ]\r\n        },\r\n        {\r\n          &quot;id&quot;: &quot;11_1_2&quot;,\r\n          &quot;action&quot;: &quot;add&quot;,\r\n          &quot;payment&quot;: {\r\n            &quot;paied&quot;: false,\r\n            &quot;coin&quot;: &quot;dollar&quot;\r\n          },\r\n          &quot;type&quot;: {\r\n            &quot;id&quot;: &quot;11_1_2_xx&quot;,\r\n            &quot;typeName&quot;: &quot;xx&quot;,\r\n            &quot;typeGroup&quot;: &quot;xx&quot;,\r\n            &quot;typeValue&quot;: &quot;xx&quot;\r\n          },\r\n          &quot;details&quot;: {\r\n            &quot;place&quot;: {\r\n              &quot;id&quot;: &quot;123&quot;,\r\n              &quot;name&quot;: &quot;xx&quot;\r\n            },\r\n            &quot;status&quot;: {\r\n              &quot;id&quot;: &quot;123&quot;,\r\n              &quot;name&quot;: &quot;xx&quot;\r\n            },\r\n            &quot;reason&quot;: {\r\n              &quot;id&quot;: &quot;123&quot;,\r\n              &quot;name&quot;: &quot;xx&quot;\r\n            }\r\n          },\r\n          &quot;item&quot;: [\r\n            {\r\n              &quot;id&quot;: &quot;11_1_2_1&quot;,\r\n              &quot;action&quot;: &quot;add&quot;,\r\n              &quot;payment&quot;: {\r\n                &quot;paied&quot;: false,\r\n                &quot;coin&quot;: &quot;NIS&quot;\r\n              },\r\n              &quot;type&quot;: {\r\n                &quot;id&quot;: &quot;11_1_2_1_zz&quot;,\r\n                &quot;typeName&quot;: &quot;zz&quot;,\r\n                &quot;typeGroup&quot;: &quot;zz&quot;,\r\n                &quot;typeValue&quot;: &quot;zz&quot;\r\n              },\r\n              &quot;details&quot;: {\r\n                &quot;place&quot;: {\r\n                  &quot;id&quot;: &quot;123&quot;,\r\n                  &quot;name&quot;: &quot;xx&quot;\r\n                },\r\n                &quot;status&quot;: {\r\n                  &quot;id&quot;: &quot;123&quot;,\r\n                  &quot;name&quot;: &quot;xx&quot;\r\n                },\r\n                &quot;reason&quot;: {\r\n                  &quot;id&quot;: &quot;123&quot;,\r\n                  &quot;name&quot;: &quot;xx&quot;\r\n                }\r\n              }\r\n            }\r\n          ]\r\n        }\r\n      ]\r\n    }\r\n  ]\r\n}\r\n\r\n```\r\n\r\n*Expected output*:\r\n\r\n```json\r\n[\r\n  {\r\n    &quot;id&quot;: &quot;11_1&quot;,\r\n    &quot;action&quot;: &quot;add&quot;,\r\n    &quot;payment&quot;: {\r\n      &quot;paied&quot;: true,\r\n      &quot;coin&quot;: &quot;dollar&quot;\r\n    },\r\n    &quot;type&quot;: {\r\n      &quot;id&quot;: &quot;11_1_xx&quot;,\r\n      &quot;typeName&quot;: &quot;xx&quot;\r\n    },\r\n    &quot;details&quot;: {\r\n      &quot;place&quot;: {\r\n        &quot;id&quot;: &quot;123&quot;,\r\n        &quot;name&quot;: &quot;xx&quot;\r\n      },\r\n      &quot;status&quot;: {\r\n        &quot;id&quot;: &quot;123&quot;,\r\n        &quot;name&quot;: &quot;xx&quot;\r\n      }\r\n    }\r\n  },\r\n  {\r\n    &quot;id&quot;: &quot;11_1_1_1&quot;,\r\n    &quot;action&quot;: &quot;add&quot;,\r\n    &quot;payment&quot;: {\r\n      &quot;paied&quot;: true,\r\n      &quot;coin&quot;: &quot;NIS&quot;\r\n    },\r\n    &quot;type&quot;: {\r\n      &quot;id&quot;: &quot;11_1_1_1_xx&quot;,\r\n      &quot;typeName&quot;: &quot;xx&quot;\r\n    },\r\n    &quot;details&quot;: {\r\n      &quot;place&quot;: {\r\n        &quot;id&quot;: &quot;123&quot;,\r\n        &quot;name&quot;: &quot;xx&quot;\r\n      },\r\n      &quot;status&quot;: {\r\n        &quot;id&quot;: &quot;123&quot;,\r\n        &quot;name&quot;: &quot;xx&quot;\r\n      }\r\n    }\r\n  },\r\n  {\r\n    &quot;id&quot;: &quot;11_1_2&quot;,\r\n    &quot;action&quot;: &quot;add&quot;,\r\n    &quot;payment&quot;: {\r\n      &quot;paied&quot;: false,\r\n      &quot;coin&quot;: &quot;dollar&quot;\r\n    },\r\n    &quot;type&quot;: {\r\n      &quot;id&quot;: &quot;11_1_2_xx&quot;,\r\n      &quot;typeName&quot;: &quot;xx&quot;\r\n    },\r\n    &quot;details&quot;: {\r\n      &quot;place&quot;: {\r\n        &quot;id&quot;: &quot;123&quot;,\r\n        &quot;name&quot;: &quot;xx&quot;\r\n      },\r\n      &quot;status&quot;: {\r\n        &quot;id&quot;: &quot;123&quot;,\r\n        &quot;name&quot;: &quot;xx&quot;\r\n      }\r\n    }\r\n  }\r\n]\r\n\r\n```\r\n\r\nCan you please help me to write a simple spec that will do this?","title":"JOLT shift transformation: filter by inner value of a property (not the name) - only some properties","body":"<p>I am trying to transform a JSON using Jolt transformation looking for some input here.\nI am trying to filter by the inner value of the attribute.</p>\n<p><strong>My goal is to get an array that contains only the items with the typeName 'xx'. But not all the item object, only some of the fields</strong></p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;id&quot;: &quot;11_1&quot;,\n  &quot;action&quot;: &quot;add&quot;,\n  &quot;payment&quot;: {\n    &quot;paied&quot;: true,\n    &quot;coin&quot;: &quot;dollar&quot;\n  },\n  &quot;type&quot;: {\n    &quot;id&quot;: &quot;11_1_xx&quot;,\n    &quot;typeName&quot;: &quot;xx&quot;\n  },\n  &quot;details&quot;: {\n    &quot;place&quot;: {\n      &quot;id&quot;: &quot;123&quot;,\n      &quot;name&quot;: &quot;xx&quot;\n    },\n    &quot;status&quot;: {\n      &quot;id&quot;: &quot;123&quot;,\n      &quot;name&quot;: &quot;xx&quot;\n    }\n  }\n}\n</code></pre>\n<p>Here is my input and expected output:</p>\n<p><em>Input</em>:</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;id&quot;: 11,\n  &quot;item&quot;: [\n    {\n      &quot;id&quot;: &quot;11_1&quot;,\n      &quot;action&quot;: &quot;add&quot;,\n      &quot;payment&quot;: {\n        &quot;paied&quot;: true,\n        &quot;coin&quot;: &quot;dollar&quot;\n      },\n      &quot;type&quot;: {\n        &quot;id&quot;: &quot;11_1_xx&quot;,\n        &quot;typeName&quot;: &quot;xx&quot;,\n        &quot;typeGroup&quot;: &quot;xx&quot;,\n        &quot;typeValue&quot;: &quot;xx&quot;\n      },\n      &quot;details&quot;: {\n        &quot;place&quot;: {\n          &quot;id&quot;: &quot;123&quot;,\n          &quot;name&quot;: &quot;xx&quot;\n        },\n        &quot;status&quot;: {\n          &quot;id&quot;: &quot;123&quot;,\n          &quot;name&quot;: &quot;xx&quot;\n        },\n        &quot;reason&quot;: {\n          &quot;id&quot;: &quot;123&quot;,\n          &quot;name&quot;: &quot;xx&quot;\n        }\n      },\n      &quot;item&quot;: [\n        {\n          &quot;id&quot;: &quot;11_1_1&quot;,\n          &quot;action&quot;: &quot;add&quot;,\n          &quot;payment&quot;: {\n            &quot;paied&quot;: true,\n            &quot;coin&quot;: &quot;dollar&quot;\n          },\n          &quot;type&quot;: {\n            &quot;id&quot;: &quot;11_1_1_zz&quot;,\n            &quot;typeName&quot;: &quot;zz&quot;,\n            &quot;typeGroup&quot;: &quot;zz&quot;,\n            &quot;typeValue&quot;: &quot;zz&quot;\n          },\n          &quot;details&quot;: {\n            &quot;place&quot;: {\n              &quot;id&quot;: &quot;123&quot;,\n              &quot;name&quot;: &quot;xx&quot;\n            },\n            &quot;status&quot;: {\n              &quot;id&quot;: &quot;123&quot;,\n              &quot;name&quot;: &quot;xx&quot;\n            },\n            &quot;reason&quot;: {\n              &quot;id&quot;: &quot;123&quot;,\n              &quot;name&quot;: &quot;xx&quot;\n            }\n          },\n          &quot;item&quot;: [\n            {\n              &quot;id&quot;: &quot;11_1_1_1&quot;,\n              &quot;action&quot;: &quot;add&quot;,\n              &quot;payment&quot;: {\n                &quot;paied&quot;: true,\n                &quot;coin&quot;: &quot;NIS&quot;\n              },\n              &quot;type&quot;: {\n                &quot;id&quot;: &quot;11_1_1_1_xx&quot;,\n                &quot;typeName&quot;: &quot;xx&quot;,\n                &quot;typeGroup&quot;: &quot;xx&quot;,\n                &quot;typeValue&quot;: &quot;xx&quot;\n              },\n              &quot;details&quot;: {\n                &quot;place&quot;: {\n                  &quot;id&quot;: &quot;123&quot;,\n                  &quot;name&quot;: &quot;xx&quot;\n                },\n                &quot;status&quot;: {\n                  &quot;id&quot;: &quot;123&quot;,\n                  &quot;name&quot;: &quot;xx&quot;\n                },\n                &quot;reason&quot;: {\n                  &quot;id&quot;: &quot;123&quot;,\n                  &quot;name&quot;: &quot;xx&quot;\n                }\n              }\n            }\n          ]\n        },\n        {\n          &quot;id&quot;: &quot;11_1_2&quot;,\n          &quot;action&quot;: &quot;add&quot;,\n          &quot;payment&quot;: {\n            &quot;paied&quot;: false,\n            &quot;coin&quot;: &quot;dollar&quot;\n          },\n          &quot;type&quot;: {\n            &quot;id&quot;: &quot;11_1_2_xx&quot;,\n            &quot;typeName&quot;: &quot;xx&quot;,\n            &quot;typeGroup&quot;: &quot;xx&quot;,\n            &quot;typeValue&quot;: &quot;xx&quot;\n          },\n          &quot;details&quot;: {\n            &quot;place&quot;: {\n              &quot;id&quot;: &quot;123&quot;,\n              &quot;name&quot;: &quot;xx&quot;\n            },\n            &quot;status&quot;: {\n              &quot;id&quot;: &quot;123&quot;,\n              &quot;name&quot;: &quot;xx&quot;\n            },\n            &quot;reason&quot;: {\n              &quot;id&quot;: &quot;123&quot;,\n              &quot;name&quot;: &quot;xx&quot;\n            }\n          },\n          &quot;item&quot;: [\n            {\n              &quot;id&quot;: &quot;11_1_2_1&quot;,\n              &quot;action&quot;: &quot;add&quot;,\n              &quot;payment&quot;: {\n                &quot;paied&quot;: false,\n                &quot;coin&quot;: &quot;NIS&quot;\n              },\n              &quot;type&quot;: {\n                &quot;id&quot;: &quot;11_1_2_1_zz&quot;,\n                &quot;typeName&quot;: &quot;zz&quot;,\n                &quot;typeGroup&quot;: &quot;zz&quot;,\n                &quot;typeValue&quot;: &quot;zz&quot;\n              },\n              &quot;details&quot;: {\n                &quot;place&quot;: {\n                  &quot;id&quot;: &quot;123&quot;,\n                  &quot;name&quot;: &quot;xx&quot;\n                },\n                &quot;status&quot;: {\n                  &quot;id&quot;: &quot;123&quot;,\n                  &quot;name&quot;: &quot;xx&quot;\n                },\n                &quot;reason&quot;: {\n                  &quot;id&quot;: &quot;123&quot;,\n                  &quot;name&quot;: &quot;xx&quot;\n                }\n              }\n            }\n          ]\n        }\n      ]\n    }\n  ]\n}\n\n</code></pre>\n<p><em>Expected output</em>:</p>\n<pre class=\"lang-json prettyprint-override\"><code>[\n  {\n    &quot;id&quot;: &quot;11_1&quot;,\n    &quot;action&quot;: &quot;add&quot;,\n    &quot;payment&quot;: {\n      &quot;paied&quot;: true,\n      &quot;coin&quot;: &quot;dollar&quot;\n    },\n    &quot;type&quot;: {\n      &quot;id&quot;: &quot;11_1_xx&quot;,\n      &quot;typeName&quot;: &quot;xx&quot;\n    },\n    &quot;details&quot;: {\n      &quot;place&quot;: {\n        &quot;id&quot;: &quot;123&quot;,\n        &quot;name&quot;: &quot;xx&quot;\n      },\n      &quot;status&quot;: {\n        &quot;id&quot;: &quot;123&quot;,\n        &quot;name&quot;: &quot;xx&quot;\n      }\n    }\n  },\n  {\n    &quot;id&quot;: &quot;11_1_1_1&quot;,\n    &quot;action&quot;: &quot;add&quot;,\n    &quot;payment&quot;: {\n      &quot;paied&quot;: true,\n      &quot;coin&quot;: &quot;NIS&quot;\n    },\n    &quot;type&quot;: {\n      &quot;id&quot;: &quot;11_1_1_1_xx&quot;,\n      &quot;typeName&quot;: &quot;xx&quot;\n    },\n    &quot;details&quot;: {\n      &quot;place&quot;: {\n        &quot;id&quot;: &quot;123&quot;,\n        &quot;name&quot;: &quot;xx&quot;\n      },\n      &quot;status&quot;: {\n        &quot;id&quot;: &quot;123&quot;,\n        &quot;name&quot;: &quot;xx&quot;\n      }\n    }\n  },\n  {\n    &quot;id&quot;: &quot;11_1_2&quot;,\n    &quot;action&quot;: &quot;add&quot;,\n    &quot;payment&quot;: {\n      &quot;paied&quot;: false,\n      &quot;coin&quot;: &quot;dollar&quot;\n    },\n    &quot;type&quot;: {\n      &quot;id&quot;: &quot;11_1_2_xx&quot;,\n      &quot;typeName&quot;: &quot;xx&quot;\n    },\n    &quot;details&quot;: {\n      &quot;place&quot;: {\n        &quot;id&quot;: &quot;123&quot;,\n        &quot;name&quot;: &quot;xx&quot;\n      },\n      &quot;status&quot;: {\n        &quot;id&quot;: &quot;123&quot;,\n        &quot;name&quot;: &quot;xx&quot;\n      }\n    }\n  }\n]\n\n</code></pre>\n<p>Can you please help me to write a simple spec that will do this?</p>\n"},{"tags":["java","flutter","dart","objectbox","flutter-objectbox"],"answers":[{"tags":[],"owner":{"account_id":12639111,"reputation":1042,"user_id":9187282,"display_name":"Uwe - ObjectBox"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664894078,"creation_date":1661233824,"answer_id":73453717,"question_id":73393697,"body_markdown":"ObjectBox just supports storing [some base types by default][1]. For custom types you have to either [map them to a supported type][2], or I assume what you are looking for in this case [create a relation][3] to an `@Entity` class:\r\n\r\n    @Entity()\r\n    class Set {\r\n      int? id;\r\n      final exercise = ToOne&lt;Exercise&gt;();\r\n      final int? repetitions;\r\n    }\r\n\r\n    // To change the ToOne target:\r\n    set.exercise.target = Exercise();\r\n\r\n\r\n  [1]: https://docs.objectbox.io/advanced/custom-types\r\n  [2]: https://docs.objectbox.io/advanced/custom-types#convert-annotation-and-property-converter\r\n  [3]: https://docs.objectbox.io/relations","title":"Flutter ObjectBox - Can&#39;t generate DB model with custom class","body":"<p>ObjectBox just supports storing <a href=\"https://docs.objectbox.io/advanced/custom-types\" rel=\"nofollow noreferrer\">some base types by default</a>. For custom types you have to either <a href=\"https://docs.objectbox.io/advanced/custom-types#convert-annotation-and-property-converter\" rel=\"nofollow noreferrer\">map them to a supported type</a>, or I assume what you are looking for in this case <a href=\"https://docs.objectbox.io/relations\" rel=\"nofollow noreferrer\">create a relation</a> to an <code>@Entity</code> class:</p>\n<pre><code>@Entity()\nclass Set {\n  int? id;\n  final exercise = ToOne&lt;Exercise&gt;();\n  final int? repetitions;\n}\n\n// To change the ToOne target:\nset.exercise.target = Exercise();\n</code></pre>\n"}],"owner":{"account_id":20983655,"reputation":13,"user_id":15417961,"display_name":"Ali Haidar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":748,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1664894078,"creation_date":1660762893,"question_id":73393697,"body_markdown":"Following the [NoSQL Database Storage | Flutter ObjectBox (vs Sqlite, Sqflite, Hive)][1], I am trying to setup an ObjectBox database with multiple classes. I currently have the following classes,  \r\n\r\n**Exercise.dart**  \r\n```\r\nimport &#39;package:objectbox/objectbox.dart&#39;;\r\n\r\n@Entity()\r\n@Sync()\r\nclass Exercise {\r\n  int? id;\r\n  final String? name;\r\n  final String? target;\r\n  final String? bodyPart;\r\n  final String? equipment;\r\n  final String? gifUrl;\r\n\r\n   Exercise({\r\n    this.id = 0,\r\n    required this.name,\r\n    required this.target,\r\n    required this.bodyPart,\r\n    required this.equipment,\r\n    required this.gifUrl,\r\n  });\r\n\r\n  factory Exercise.fromJson(Map&lt;String, dynamic&gt; json) {\r\n    return Exercise(\r\n        id: int.tryParse(json[&#39;id&#39;].toString()),\r\n        name: json[&quot;name&quot;].toString(),\r\n        target: json[&quot;target&quot;].toString(),\r\n        bodyPart: json[&quot;bodyPart&quot;].toString(),\r\n        equipment: json[&quot;equipment&quot;].toString(),\r\n        gifUrl: json[&quot;gifUrl&quot;].toString());\r\n  }\r\n}\r\n```  \r\nand  \r\n**Set.dart**\r\n```\r\nimport &#39;package:objectbox/objectbox.dart&#39;;\r\nimport &#39;package:pump_that_iron/models/exercise.dart&#39;;\r\n\r\n@Entity()\r\n@Sync()\r\nclass Set {\r\n  int? id;\r\n  final Exercise? exercise;\r\n  final int? repetitions;\r\n\r\n  Set({\r\n    this.id = 0,\r\n    required this.exercise,\r\n    required this.repetitions,\r\n  });\r\n}\r\n```\r\n\r\nFrom these classes I am trying to build a model class using ObjectBox and the `flutter pub run build_runner build` command. However, whenever that command is run, I get the following error,  \r\n&gt; Cannot use the default constructor of &#39;Set&#39;: don&#39;t know how to initialize param exercise - no such property.  \r\n\r\nas well as\r\n\r\n&gt; [WARNING] objectbox_generator:resolver on lib/models/set.dart: skipping property &#39;exercise&#39; in entity &#39;Set&#39;, as it has an unsupported type: &#39;Exercise?&#39;\r\n\r\nInitially, when running the build command with the `Exercise.dart` being the only present class, it is successful. However, as soon as I add the `Set.dart` file **containing the Exercise class as a variable**, I am no longer able to build. Another thing to note, is that when the Exercice variable is omitted from the Set class, it runs successfully.  \r\n\r\nI found the following [How initialize Objectbox entity with custom type?][2] SO thread with a similar problem and tried to replicate the steps by,  \r\n1. Adding a getExercise getter in the `Set.dart` class and adding it to the constructor  \r\n```\r\nSet({\r\n    this.id = 0,\r\n    this.exercise = getExercise,\r\n    required this.repetitions,\r\n  });\r\n\r\n  get getExercise =&gt; Exercise(\r\n      name: &quot;name&quot;,\r\n      target: &quot;target&quot;,\r\n      bodyPart: &quot;bodyPart&quot;,\r\n      equipment: &quot;equipment&quot;,\r\n      gifUrl: &quot;gifUrl&quot;);\r\n```\r\n2. This required me to make the `Exercise.dart` constructor constant, and making the following changes  \r\n```\r\nclass Exercise {\r\n  @Id(assignable: true)\r\n  final int? id;\r\n  ...\r\n\r\n  const Exercise({\r\n    this.id = 0,\r\n    ...\r\n  });\r\n```\r\n\r\nThis is now giving me a `The default value of an optional parameter must be constant.` error when trying to set the exercise variable at `this.exercise = getExercise`. I tried following the instructions from another SO thread [https://stackoverflow.com/questions/51907159/default-values-of-an-optional-parameter-must-be-constant][3], but I am still having issues.  \r\n\r\nI was wondering if anybody could help me set up my database and explain what is going wrong. Any help is appreciated.\r\n\r\nThank you.\r\n\r\n\r\n  [1]: https://www.youtube.com/watch?v=BBlr8F8m9lo\r\n  [2]: https://stackoverflow.com/questions/70838139/how-initialize-objectbox-entity-with-custom-type\r\n  [3]: https://stackoverflow.com/questions/51907159/default-values-of-an-optional-parameter-must-be-constant","title":"Flutter ObjectBox - Can&#39;t generate DB model with custom class","body":"<p>Following the <a href=\"https://www.youtube.com/watch?v=BBlr8F8m9lo\" rel=\"nofollow noreferrer\">NoSQL Database Storage | Flutter ObjectBox (vs Sqlite, Sqflite, Hive)</a>, I am trying to setup an ObjectBox database with multiple classes. I currently have the following classes,</p>\n<p><strong>Exercise.dart</strong></p>\n<pre><code>import 'package:objectbox/objectbox.dart';\n\n@Entity()\n@Sync()\nclass Exercise {\n  int? id;\n  final String? name;\n  final String? target;\n  final String? bodyPart;\n  final String? equipment;\n  final String? gifUrl;\n\n   Exercise({\n    this.id = 0,\n    required this.name,\n    required this.target,\n    required this.bodyPart,\n    required this.equipment,\n    required this.gifUrl,\n  });\n\n  factory Exercise.fromJson(Map&lt;String, dynamic&gt; json) {\n    return Exercise(\n        id: int.tryParse(json['id'].toString()),\n        name: json[&quot;name&quot;].toString(),\n        target: json[&quot;target&quot;].toString(),\n        bodyPart: json[&quot;bodyPart&quot;].toString(),\n        equipment: json[&quot;equipment&quot;].toString(),\n        gifUrl: json[&quot;gifUrl&quot;].toString());\n  }\n}\n</code></pre>\n<p>and<br />\n<strong>Set.dart</strong></p>\n<pre><code>import 'package:objectbox/objectbox.dart';\nimport 'package:pump_that_iron/models/exercise.dart';\n\n@Entity()\n@Sync()\nclass Set {\n  int? id;\n  final Exercise? exercise;\n  final int? repetitions;\n\n  Set({\n    this.id = 0,\n    required this.exercise,\n    required this.repetitions,\n  });\n}\n</code></pre>\n<p>From these classes I am trying to build a model class using ObjectBox and the <code>flutter pub run build_runner build</code> command. However, whenever that command is run, I get the following error,</p>\n<blockquote>\n<p>Cannot use the default constructor of 'Set': don't know how to initialize param exercise - no such property.</p>\n</blockquote>\n<p>as well as</p>\n<blockquote>\n<p>[WARNING] objectbox_generator:resolver on lib/models/set.dart: skipping property 'exercise' in entity 'Set', as it has an unsupported type: 'Exercise?'</p>\n</blockquote>\n<p>Initially, when running the build command with the <code>Exercise.dart</code> being the only present class, it is successful. However, as soon as I add the <code>Set.dart</code> file <strong>containing the Exercise class as a variable</strong>, I am no longer able to build. Another thing to note, is that when the Exercice variable is omitted from the Set class, it runs successfully.</p>\n<p>I found the following <a href=\"https://stackoverflow.com/questions/70838139/how-initialize-objectbox-entity-with-custom-type\">How initialize Objectbox entity with custom type?</a> SO thread with a similar problem and tried to replicate the steps by,</p>\n<ol>\n<li>Adding a getExercise getter in the <code>Set.dart</code> class and adding it to the constructor</li>\n</ol>\n<pre><code>Set({\n    this.id = 0,\n    this.exercise = getExercise,\n    required this.repetitions,\n  });\n\n  get getExercise =&gt; Exercise(\n      name: &quot;name&quot;,\n      target: &quot;target&quot;,\n      bodyPart: &quot;bodyPart&quot;,\n      equipment: &quot;equipment&quot;,\n      gifUrl: &quot;gifUrl&quot;);\n</code></pre>\n<ol start=\"2\">\n<li>This required me to make the <code>Exercise.dart</code> constructor constant, and making the following changes</li>\n</ol>\n<pre><code>class Exercise {\n  @Id(assignable: true)\n  final int? id;\n  ...\n\n  const Exercise({\n    this.id = 0,\n    ...\n  });\n</code></pre>\n<p>This is now giving me a <code>The default value of an optional parameter must be constant.</code> error when trying to set the exercise variable at <code>this.exercise = getExercise</code>. I tried following the instructions from another SO thread <a href=\"https://stackoverflow.com/questions/51907159/default-values-of-an-optional-parameter-must-be-constant\">Default values of an optional parameter must be constant</a>, but I am still having issues.</p>\n<p>I was wondering if anybody could help me set up my database and explain what is going wrong. Any help is appreciated.</p>\n<p>Thank you.</p>\n"},{"tags":["java","dictionary","key-value"],"comments":[{"owner":{"account_id":7808,"reputation":24390,"user_id":13687,"display_name":"John Gardner"},"score":1,"creation_date":1238020021,"post_id":683518,"comment_id":497184,"body_markdown":"You don&#39;t need to use entryset/map.entry.  you can iterate over keys and values by using hashtable.keys as an enumeration or by using hashtable.keyset.iterator.","body":"You don&#39;t need to use entryset/map.entry.  you can iterate over keys and values by using hashtable.keys as an enumeration or by using hashtable.keyset.iterator."},{"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":5,"creation_date":1238022061,"post_id":683518,"comment_id":497278,"body_markdown":"I took the liberty to change the title, since not using hashes is not actually the problem, but keeping the insertion order.","body":"I took the liberty to change the title, since not using hashes is not actually the problem, but keeping the insertion order."},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1577581658,"post_id":683518,"comment_id":105203819,"body_markdown":"Similar Question, [*Java Ordered Map*](https://stackoverflow.com/q/663374/642706)","body":"Similar Question, <a href=\"https://stackoverflow.com/q/663374/642706\"><i>Java Ordered Map</i></a>"}],"answers":[{"tags":[],"owner":{"account_id":7745,"reputation":189755,"user_id":13531,"accept_rate":75,"display_name":"Michael Myers"},"down_vote_count":0,"up_vote_count":911,"is_accepted":true,"score":911,"last_activity_date":1664894035,"creation_date":1238016192,"answer_id":683524,"question_id":683518,"body_markdown":"I suggest a [`LinkedHashMap`][1] or a [`TreeMap`][2]. A `LinkedHashMap` keeps the keys in the order they were inserted, while a `TreeMap` is kept sorted via a `Comparator` or the natural `Comparable` ordering of the keys.\r\n\r\nSince it doesn&#39;t have to keep the elements sorted, `LinkedHashMap` should be faster for most cases; `TreeMap` has `O(log n)` performance for `containsKey`, `get`, `put`, and `remove`, according to the Javadocs, while `LinkedHashMap` is `O(1)` for each.\r\n\r\nIf your API that only expects a predictable sort order, as opposed to a specific sort order, consider using the interfaces these two classes implement, [`NavigableMap`][3] or [`SortedMap`][4]. This will allow you not to leak specific implementations into your API and switch to either of those specific classes or a completely different implementation at will afterwards.\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/api/java/util/LinkedHashMap.html\r\n  [2]: http://docs.oracle.com/javase/7/docs/api/java/util/TreeMap.html\r\n  [3]: http://docs.oracle.com/javase/7/docs/api/java/util/NavigableMap.html\r\n  [4]: http://docs.oracle.com/javase/7/docs/api/java/util/SortedMap.html","title":"Java Class that implements Map and keeps insertion order?","body":"<p>I suggest a <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/LinkedHashMap.html\" rel=\"noreferrer\"><code>LinkedHashMap</code></a> or a <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/TreeMap.html\" rel=\"noreferrer\"><code>TreeMap</code></a>. A <code>LinkedHashMap</code> keeps the keys in the order they were inserted, while a <code>TreeMap</code> is kept sorted via a <code>Comparator</code> or the natural <code>Comparable</code> ordering of the keys.</p>\n<p>Since it doesn't have to keep the elements sorted, <code>LinkedHashMap</code> should be faster for most cases; <code>TreeMap</code> has <code>O(log n)</code> performance for <code>containsKey</code>, <code>get</code>, <code>put</code>, and <code>remove</code>, according to the Javadocs, while <code>LinkedHashMap</code> is <code>O(1)</code> for each.</p>\n<p>If your API that only expects a predictable sort order, as opposed to a specific sort order, consider using the interfaces these two classes implement, <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/NavigableMap.html\" rel=\"noreferrer\"><code>NavigableMap</code></a> or <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/SortedMap.html\" rel=\"noreferrer\"><code>SortedMap</code></a>. This will allow you not to leak specific implementations into your API and switch to either of those specific classes or a completely different implementation at will afterwards.</p>\n"},{"tags":[],"owner":{"account_id":21356,"reputation":47248,"user_id":51831,"accept_rate":56,"display_name":"jpalecek"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1238016585,"creation_date":1238016585,"answer_id":683548,"question_id":683518,"body_markdown":"I don&#39;t know if it is opensource, but after a little googling, I found [this implementation of Map using ArrayList][1]. It seems to be pre-1.5 Java, so you might want to genericize it, which should be easy. Note that this implementation has O(N) access, but this shouldn&#39;t be a problem if you don&#39;t add hundreds of widgets to your JPanel, which you shouldn&#39;t anyway.\r\n\r\n\r\n  [1]: http://www.java2s.com/Code/Java/Collections-Data-Structure/ArrayMapextendsAbstractMap.htm","title":"Java Class that implements Map and keeps insertion order?","body":"<p>I don't know if it is opensource, but after a little googling, I found <a href=\"http://www.java2s.com/Code/Java/Collections-Data-Structure/ArrayMapextendsAbstractMap.htm\" rel=\"nofollow noreferrer\">this implementation of Map using ArrayList</a>. It seems to be pre-1.5 Java, so you might want to genericize it, which should be easy. Note that this implementation has O(N) access, but this shouldn't be a problem if you don't add hundreds of widgets to your JPanel, which you shouldn't anyway.</p>\n"},{"tags":[],"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1470002553,"creation_date":1238101485,"answer_id":687543,"question_id":683518,"body_markdown":"You can maintain a `Map` (for fast lookup) and `List` (for order) but a `LinkedHashMap` may be the simplest. You can also try a `SortedMap` e.g. `TreeMap`, which an have any order you specify.","title":"Java Class that implements Map and keeps insertion order?","body":"<p>You can maintain a <code>Map</code> (for fast lookup) and <code>List</code> (for order) but a <code>LinkedHashMap</code> may be the simplest. You can also try a <code>SortedMap</code> e.g. <code>TreeMap</code>, which an have any order you specify.</p>\n"},{"tags":[],"owner":{"account_id":177253,"reputation":1677,"user_id":408465,"display_name":"jvdneste"},"down_vote_count":1,"up_vote_count":21,"is_accepted":false,"score":20,"last_activity_date":1504517375,"creation_date":1282924204,"answer_id":3585920,"question_id":683518,"body_markdown":"**If an immutable map fits your needs** then there is a library by google called [guava][1] (see also [guava questions][2]) \r\n\r\n[Guava][3] provides an [ImmutableMap][4] with reliable user-specified iteration order. This [ImmutableMap][4] has O(1) performance for containsKey, get. Obviously put and remove are not supported. \r\n\r\n[ImmutableMap][4] objects are constructed by using either the elegant static convenience methods [of()][5] and [copyOf()][6] or a [Builder][7] object.\r\n\r\n\r\n  [1]: https://github.com/google/guava\r\n  [2]: https://stackoverflow.com/questions/tagged/guava\r\n  [3]: https://github.com/google/guava\r\n  [4]: http://google.github.io/guava/releases/snapshot/api/docs/com/google/common/collect/ImmutableMap.html\r\n  [5]: http://google.github.io/guava/releases/snapshot/api/docs/com/google/common/collect/ImmutableMap.html#of--\r\n  [6]: http://google.github.io/guava/releases/snapshot/api/docs/com/google/common/collect/ImmutableMap.html#copyOf-java.util.Map-\r\n  [7]: http://google.github.io/guava/releases/snapshot/api/docs/com/google/common/collect/ImmutableMap.html#builder--","title":"Java Class that implements Map and keeps insertion order?","body":"<p><strong>If an immutable map fits your needs</strong> then there is a library by google called <a href=\"https://github.com/google/guava\" rel=\"noreferrer\">guava</a> (see also <a href=\"https://stackoverflow.com/questions/tagged/guava\">guava questions</a>) </p>\n\n<p><a href=\"https://github.com/google/guava\" rel=\"noreferrer\">Guava</a> provides an <a href=\"http://google.github.io/guava/releases/snapshot/api/docs/com/google/common/collect/ImmutableMap.html\" rel=\"noreferrer\">ImmutableMap</a> with reliable user-specified iteration order. This <a href=\"http://google.github.io/guava/releases/snapshot/api/docs/com/google/common/collect/ImmutableMap.html\" rel=\"noreferrer\">ImmutableMap</a> has O(1) performance for containsKey, get. Obviously put and remove are not supported. </p>\n\n<p><a href=\"http://google.github.io/guava/releases/snapshot/api/docs/com/google/common/collect/ImmutableMap.html\" rel=\"noreferrer\">ImmutableMap</a> objects are constructed by using either the elegant static convenience methods <a href=\"http://google.github.io/guava/releases/snapshot/api/docs/com/google/common/collect/ImmutableMap.html#of--\" rel=\"noreferrer\">of()</a> and <a href=\"http://google.github.io/guava/releases/snapshot/api/docs/com/google/common/collect/ImmutableMap.html#copyOf-java.util.Map-\" rel=\"noreferrer\">copyOf()</a> or a <a href=\"http://google.github.io/guava/releases/snapshot/api/docs/com/google/common/collect/ImmutableMap.html#builder--\" rel=\"noreferrer\">Builder</a> object.</p>\n"},{"tags":[],"owner":{"account_id":3171071,"reputation":2453,"user_id":2680024,"accept_rate":20,"display_name":"Praveen Kishor"},"down_vote_count":0,"up_vote_count":59,"is_accepted":false,"score":59,"last_activity_date":1494278801,"creation_date":1494278801,"answer_id":43857540,"question_id":683518,"body_markdown":"LinkedHashMap will return the elements in the order they were inserted into the map when you iterate over the keySet(), entrySet() or values() of the map. \r\n\r\n    Map&lt;String, String&gt; map = new LinkedHashMap&lt;String, String&gt;();\r\n     \r\n    map.put(&quot;id&quot;, &quot;1&quot;);\r\n    map.put(&quot;name&quot;, &quot;rohan&quot;);\r\n    map.put(&quot;age&quot;, &quot;26&quot;);\r\n     \r\n    for (Map.Entry&lt;String, String&gt; entry : map.entrySet()) {\r\n        System.out.println(entry.getKey() + &quot; = &quot; + entry.getValue());\r\n    }\r\n\r\n\r\nThis will print the elements in the order they were put into the map: \r\n\r\n    id = 1\r\n    name = rohan \r\n    age = 26 \r\n\r\n","title":"Java Class that implements Map and keeps insertion order?","body":"<p>LinkedHashMap will return the elements in the order they were inserted into the map when you iterate over the keySet(), entrySet() or values() of the map. </p>\n\n<pre><code>Map&lt;String, String&gt; map = new LinkedHashMap&lt;String, String&gt;();\n\nmap.put(\"id\", \"1\");\nmap.put(\"name\", \"rohan\");\nmap.put(\"age\", \"26\");\n\nfor (Map.Entry&lt;String, String&gt; entry : map.entrySet()) {\n    System.out.println(entry.getKey() + \" = \" + entry.getValue());\n}\n</code></pre>\n\n<p>This will print the elements in the order they were put into the map: </p>\n\n<pre><code>id = 1\nname = rohan \nage = 26 \n</code></pre>\n"},{"tags":[],"owner":{"account_id":444211,"reputation":61229,"user_id":835883,"accept_rate":81,"display_name":"j2emanue"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1510216592,"creation_date":1510216592,"answer_id":47197281,"question_id":683518,"body_markdown":"Whenever i need to maintain the natural order of things that are known ahead of time, i use a [EnumMap][1]\r\n\r\n\r\nthe keys will be enums and you can insert in any order you want but when you iterate it will iterate in the enum order (the natural order).  \r\n\r\nAlso when using EnumMap there should be no collisions which can be more efficient.  \r\n\r\nI really find that using enumMap makes for clean readable code. \r\nHere is an [example][2]\r\n\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/7/docs/api/java/util/EnumMap.html\r\n  [2]: http://javarevisited.blogspot.com/2012/09/what-is-enummap-in-java-example-tutorial.html","title":"Java Class that implements Map and keeps insertion order?","body":"<p>Whenever i need to maintain the natural order of things that are known ahead of time, i use a <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/EnumMap.html\" rel=\"nofollow noreferrer\">EnumMap</a></p>\n\n<p>the keys will be enums and you can insert in any order you want but when you iterate it will iterate in the enum order (the natural order).  </p>\n\n<p>Also when using EnumMap there should be no collisions which can be more efficient.  </p>\n\n<p>I really find that using enumMap makes for clean readable code. \nHere is an <a href=\"http://javarevisited.blogspot.com/2012/09/what-is-enummap-in-java-example-tutorial.html\" rel=\"nofollow noreferrer\">example</a></p>\n"},{"tags":[],"owner":{"account_id":6689932,"reputation":81,"user_id":5159723,"display_name":"Pankaj Goyal"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1649107715,"creation_date":1525238940,"answer_id":50127647,"question_id":683518,"body_markdown":"You can use **LinkedHashMap** to main insertion order in Map \r\n\r\nThe important points about Java LinkedHashMap class are:\r\n\r\n 1. It contains only unique elements.\r\n 2. A LinkedHashMap contains values based on the key.\r\n 3. It may have one null key and multiple null values.\r\n 4. It is same as HashMap instead maintains insertion order\r\n\r\n        public class LinkedHashMap&lt;K,V&gt; extends HashMap&lt;K,V&gt; implements Map&lt;K,V&gt; \r\n\r\n\r\nBut if you want sort values in map using User-defined object or any primitive data type key then you should use **TreeMap** For more information, refer [this link][1]\r\n\r\n\r\n  [1]: https://theweblearn.blogspot.in/2018/05/sort-values-by-user-defined-object-in.html","title":"Java Class that implements Map and keeps insertion order?","body":"<p>You can use <strong>LinkedHashMap</strong> to main insertion order in Map</p>\n<p>The important points about Java LinkedHashMap class are:</p>\n<ol>\n<li><p>It contains only unique elements.</p>\n</li>\n<li><p>A LinkedHashMap contains values based on the key.</p>\n</li>\n<li><p>It may have one null key and multiple null values.</p>\n</li>\n<li><p>It is same as HashMap instead maintains insertion order</p>\n<pre><code>public class LinkedHashMap&lt;K,V&gt; extends HashMap&lt;K,V&gt; implements Map&lt;K,V&gt; \n</code></pre>\n</li>\n</ol>\n<p>But if you want sort values in map using User-defined object or any primitive data type key then you should use <strong>TreeMap</strong> For more information, refer <a href=\"https://theweblearn.blogspot.in/2018/05/sort-values-by-user-defined-object-in.html\" rel=\"noreferrer\">this link</a></p>\n"},{"tags":[],"owner":{"account_id":6575754,"reputation":9298,"user_id":5081877,"accept_rate":92,"display_name":"Yash"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1572432745,"creation_date":1572432745,"answer_id":58623768,"question_id":683518,"body_markdown":"Either You can use **`LinkedHashMap&lt;K, V&gt;`** or you can implement you own **CustomMap** which maintains insertion order.\r\n\r\nYou can use the Following **`CustomHashMap`** with the following features:\r\n\r\n * Insertion order is maintained, by using LinkedHashMap internally.\r\n * Keys with `null` or empty strings are not allowed.\r\n * Once key with value is created, we are not overriding its value.\r\n\r\n[`HashMap`](https://stackoverflow.com/a/48094803) vs `LinkedHashMap` vs `CustomHashMap`\r\n```lang-java\r\ninterface CustomMap&lt;K, V&gt; extends Map&lt;K, V&gt; {\r\n\tpublic boolean insertionRule(K key, V value);\r\n}\r\n\r\n@SuppressWarnings({ &quot;rawtypes&quot;, &quot;unchecked&quot; })\r\npublic class CustomHashMap&lt;K, V&gt; implements CustomMap&lt;K, V&gt; {\r\n\tprivate Map&lt;K, V&gt; entryMap;\r\n\t// SET: Adds the specified element to this set if it is not already present.\r\n\tprivate Set&lt;K&gt; entrySet;\r\n\r\n\tpublic CustomHashMap() {\r\n\t\tsuper();\r\n\t\tentryMap = new LinkedHashMap&lt;K, V&gt;();\r\n\t\tentrySet = new HashSet();\r\n\t}\r\n\t\r\n\t@Override\r\n\tpublic boolean insertionRule(K key, V value) {\r\n\t\t// KEY as null and EMPTY String is not allowed.\r\n\t\tif (key == null || (key instanceof String &amp;&amp; ((String) key).trim().equals(&quot;&quot;) ) ) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\t\r\n\t\t// If key already available then, we are not overriding its value.\r\n\t\tif (entrySet.contains(key)) { // Then override its value, but we are not allowing\r\n\t\t\treturn false;\r\n\t\t} else { // Add the entry\r\n\t\t\tentrySet.add(key);\r\n\t\t\tentryMap.put(key, value);\r\n\t\t\treturn true;\r\n\t\t}\r\n\t}\r\n\tpublic V put(K key, V value) {\r\n\t\tV oldValue = entryMap.get(key);\r\n\t\tinsertionRule(key, value);\r\n\t\treturn oldValue;\r\n\t}\r\n\tpublic void putAll(Map&lt;? extends K, ? extends V&gt; t) {\r\n\t\tfor (Iterator i = t.keySet().iterator(); i.hasNext();) {\r\n\t\t\tK key = (K) i.next();\r\n\t\t\tinsertionRule(key, t.get(key));\r\n\t\t}\r\n\t}\r\n\t\r\n\tpublic void clear() {\r\n\t\tentryMap.clear();\r\n\t\tentrySet.clear();\r\n\t}\r\n\tpublic boolean containsKey(Object key) {\r\n\t\treturn entryMap.containsKey(key);\r\n\t}\r\n\tpublic boolean containsValue(Object value) {\r\n\t\treturn entryMap.containsValue(value);\r\n\t}\r\n\tpublic Set entrySet() {\r\n\t\treturn entryMap.entrySet();\r\n\t}\r\n\tpublic boolean equals(Object o) {\r\n\t\treturn entryMap.equals(o);\r\n\t}\r\n\tpublic V get(Object key) {\r\n\t\treturn entryMap.get(key);\r\n\t}\r\n\tpublic int hashCode() {\r\n\t\treturn entryMap.hashCode();\r\n\t}\r\n\tpublic boolean isEmpty() {\r\n\t\treturn entryMap.isEmpty();\r\n\t}\r\n\tpublic Set keySet() {\r\n\t\treturn entrySet;\r\n\t}\r\n\tpublic V remove(Object key) {\r\n\t\tentrySet.remove(key);\r\n\t\treturn entryMap.remove(key);\r\n\t}\r\n\tpublic int size() {\r\n\t\treturn entryMap.size();\r\n\t}\r\n\tpublic Collection values() {\r\n\t\treturn entryMap.values();\r\n\t}\r\n}\r\n```\r\n\r\nUsage of `CustomHashMap`:\r\n\r\n```lang-java\r\npublic static void main(String[] args) {\r\n\tSystem.out.println(&quot;== LinkedHashMap ==&quot;);\r\n\tMap&lt;Object, String&gt; map2 = new LinkedHashMap&lt;Object, String&gt;();\r\n\taddData(map2);\r\n\t\r\n\tSystem.out.println(&quot;== CustomHashMap ==&quot;);\r\n\tMap&lt;Object, String&gt; map = new CustomHashMap&lt;Object, String&gt;();\r\n\taddData(map);\r\n}\r\npublic static void addData(Map&lt;Object, String&gt; map) {\r\n\tmap.put(null, &quot;1&quot;);\r\n\tmap.put(&quot;name&quot;, &quot;Yash&quot;);\r\n\tmap.put(&quot;1&quot;, &quot;1 - Str&quot;);\r\n\tmap.put(&quot;1&quot;, &quot;2 - Str&quot;); // Overriding value\r\n\tmap.put(&quot;&quot;, &quot;1&quot;); // Empty String\r\n\tmap.put(&quot; &quot;, &quot;1&quot;); // Empty String\r\n\tmap.put(1, &quot;Int&quot;);\r\n\tmap.put(null, &quot;2&quot;); // Null\r\n\t\r\n\tfor (Map.Entry&lt;Object, String&gt; entry : map.entrySet()) {\r\n\t\tSystem.out.println(entry.getKey() + &quot; = &quot; + entry.getValue());\r\n\t}\r\n}\r\n```\r\n\r\nO/P:\r\n```\r\n== LinkedHashMap == | == CustomHashMap ==\r\nnull = 2            | name = Yash\r\nname = Yash         | 1 = 1 - Str\r\n1 = 2 - Str         | 1 = Int\r\n = 1                |\r\n  = 1               |\r\n1 = Int             |\r\n```\r\n\r\n---\r\n\r\nIf you know the KEY&#39;s are fixed then you can use EnumMap. Get the values form Properties/XML files\r\n\r\nEX:\r\n```lang-java\r\nenum ORACLE {\r\n\tIP, URL, USER_NAME, PASSWORD, DB_Name;\r\n}\r\n\r\nEnumMap&lt;ORACLE, String&gt; props = new EnumMap&lt;ORACLE, String&gt;(ORACLE.class);\r\nprops.put(ORACLE.IP, &quot;127.0.0.1&quot;);\r\nprops.put(ORACLE.URL, &quot;...&quot;);\r\nprops.put(ORACLE.USER_NAME, &quot;Scott&quot;);\r\nprops.put(ORACLE.PASSWORD, &quot;Tiget&quot;);\r\nprops.put(ORACLE.DB_Name, &quot;MyDB&quot;);\r\n```\r\n\r\n","title":"Java Class that implements Map and keeps insertion order?","body":"<p>Either You can use <strong><code>LinkedHashMap&lt;K, V&gt;</code></strong> or you can implement you own <strong>CustomMap</strong> which maintains insertion order.</p>\n\n<p>You can use the Following <strong><code>CustomHashMap</code></strong> with the following features:</p>\n\n<ul>\n<li>Insertion order is maintained, by using LinkedHashMap internally.</li>\n<li>Keys with <code>null</code> or empty strings are not allowed.</li>\n<li>Once key with value is created, we are not overriding its value.</li>\n</ul>\n\n<p><a href=\"https://stackoverflow.com/a/48094803\"><code>HashMap</code></a> vs <code>LinkedHashMap</code> vs <code>CustomHashMap</code></p>\n\n<pre class=\"lang-java prettyprint-override\"><code>interface CustomMap&lt;K, V&gt; extends Map&lt;K, V&gt; {\n    public boolean insertionRule(K key, V value);\n}\n\n@SuppressWarnings({ \"rawtypes\", \"unchecked\" })\npublic class CustomHashMap&lt;K, V&gt; implements CustomMap&lt;K, V&gt; {\n    private Map&lt;K, V&gt; entryMap;\n    // SET: Adds the specified element to this set if it is not already present.\n    private Set&lt;K&gt; entrySet;\n\n    public CustomHashMap() {\n        super();\n        entryMap = new LinkedHashMap&lt;K, V&gt;();\n        entrySet = new HashSet();\n    }\n\n    @Override\n    public boolean insertionRule(K key, V value) {\n        // KEY as null and EMPTY String is not allowed.\n        if (key == null || (key instanceof String &amp;&amp; ((String) key).trim().equals(\"\") ) ) {\n            return false;\n        }\n\n        // If key already available then, we are not overriding its value.\n        if (entrySet.contains(key)) { // Then override its value, but we are not allowing\n            return false;\n        } else { // Add the entry\n            entrySet.add(key);\n            entryMap.put(key, value);\n            return true;\n        }\n    }\n    public V put(K key, V value) {\n        V oldValue = entryMap.get(key);\n        insertionRule(key, value);\n        return oldValue;\n    }\n    public void putAll(Map&lt;? extends K, ? extends V&gt; t) {\n        for (Iterator i = t.keySet().iterator(); i.hasNext();) {\n            K key = (K) i.next();\n            insertionRule(key, t.get(key));\n        }\n    }\n\n    public void clear() {\n        entryMap.clear();\n        entrySet.clear();\n    }\n    public boolean containsKey(Object key) {\n        return entryMap.containsKey(key);\n    }\n    public boolean containsValue(Object value) {\n        return entryMap.containsValue(value);\n    }\n    public Set entrySet() {\n        return entryMap.entrySet();\n    }\n    public boolean equals(Object o) {\n        return entryMap.equals(o);\n    }\n    public V get(Object key) {\n        return entryMap.get(key);\n    }\n    public int hashCode() {\n        return entryMap.hashCode();\n    }\n    public boolean isEmpty() {\n        return entryMap.isEmpty();\n    }\n    public Set keySet() {\n        return entrySet;\n    }\n    public V remove(Object key) {\n        entrySet.remove(key);\n        return entryMap.remove(key);\n    }\n    public int size() {\n        return entryMap.size();\n    }\n    public Collection values() {\n        return entryMap.values();\n    }\n}\n</code></pre>\n\n<p>Usage of <code>CustomHashMap</code>:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public static void main(String[] args) {\n    System.out.println(\"== LinkedHashMap ==\");\n    Map&lt;Object, String&gt; map2 = new LinkedHashMap&lt;Object, String&gt;();\n    addData(map2);\n\n    System.out.println(\"== CustomHashMap ==\");\n    Map&lt;Object, String&gt; map = new CustomHashMap&lt;Object, String&gt;();\n    addData(map);\n}\npublic static void addData(Map&lt;Object, String&gt; map) {\n    map.put(null, \"1\");\n    map.put(\"name\", \"Yash\");\n    map.put(\"1\", \"1 - Str\");\n    map.put(\"1\", \"2 - Str\"); // Overriding value\n    map.put(\"\", \"1\"); // Empty String\n    map.put(\" \", \"1\"); // Empty String\n    map.put(1, \"Int\");\n    map.put(null, \"2\"); // Null\n\n    for (Map.Entry&lt;Object, String&gt; entry : map.entrySet()) {\n        System.out.println(entry.getKey() + \" = \" + entry.getValue());\n    }\n}\n</code></pre>\n\n<p>O/P:</p>\n\n<pre><code>== LinkedHashMap == | == CustomHashMap ==\nnull = 2            | name = Yash\nname = Yash         | 1 = 1 - Str\n1 = 2 - Str         | 1 = Int\n = 1                |\n  = 1               |\n1 = Int             |\n</code></pre>\n\n<hr>\n\n<p>If you know the KEY's are fixed then you can use EnumMap. Get the values form Properties/XML files</p>\n\n<p>EX:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>enum ORACLE {\n    IP, URL, USER_NAME, PASSWORD, DB_Name;\n}\n\nEnumMap&lt;ORACLE, String&gt; props = new EnumMap&lt;ORACLE, String&gt;(ORACLE.class);\nprops.put(ORACLE.IP, \"127.0.0.1\");\nprops.put(ORACLE.URL, \"...\");\nprops.put(ORACLE.USER_NAME, \"Scott\");\nprops.put(ORACLE.PASSWORD, \"Tiget\");\nprops.put(ORACLE.DB_Name, \"MyDB\");\n</code></pre>\n"}],"owner":{"account_id":15783,"reputation":6135,"user_id":33725,"display_name":"Shane"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":405709,"favorite_count":0,"down_vote_count":0,"up_vote_count":605,"accepted_answer_id":683524,"answer_count":8,"score":605,"last_activity_date":1664894035,"creation_date":1238016124,"question_id":683518,"body_markdown":"I&#39;m looking for a class in java that has key-value association, but without using hashes.  Here is what I&#39;m currently doing:\r\n\r\n1. Add values to a `Hashtable`.\r\n2. Get an iterator for the `Hashtable.entrySet()`.\r\n3. Iterate through all values and:\r\n   1. Get a `Map.Entry` for the iterator.\r\n   2. Create an object of type `Module` (a custom class) based on the value.\r\n   3. Add the class to a JPanel.\r\n4. Show the panel.\r\n\r\nThe problem with this is that I do not have control over the order that I get the values back, so I cannot display the values in the a given order (without hard-coding the order).\r\n\r\nI would use an `ArrayList` or `Vector` for this, but later in the code I need to grab the `Module` object for a given Key, which I can&#39;t do with an `ArrayList` or `Vector`.\r\n\r\nDoes anyone know of a free/open-source Java class that will do this, or a way to get values out of a `Hashtable` based on when they were added?\r\n\r\nThanks!","title":"Java Class that implements Map and keeps insertion order?","body":"<p>I'm looking for a class in java that has key-value association, but without using hashes.  Here is what I'm currently doing:</p>\n\n<ol>\n<li>Add values to a <code>Hashtable</code>.</li>\n<li>Get an iterator for the <code>Hashtable.entrySet()</code>.</li>\n<li>Iterate through all values and:\n\n<ol>\n<li>Get a <code>Map.Entry</code> for the iterator.</li>\n<li>Create an object of type <code>Module</code> (a custom class) based on the value.</li>\n<li>Add the class to a JPanel.</li>\n</ol></li>\n<li>Show the panel.</li>\n</ol>\n\n<p>The problem with this is that I do not have control over the order that I get the values back, so I cannot display the values in the a given order (without hard-coding the order).</p>\n\n<p>I would use an <code>ArrayList</code> or <code>Vector</code> for this, but later in the code I need to grab the <code>Module</code> object for a given Key, which I can't do with an <code>ArrayList</code> or <code>Vector</code>.</p>\n\n<p>Does anyone know of a free/open-source Java class that will do this, or a way to get values out of a <code>Hashtable</code> based on when they were added?</p>\n\n<p>Thanks!</p>\n"},{"tags":["java","android","xml","data-binding"],"owner":{"account_id":11916869,"reputation":81,"user_id":8720567,"display_name":"Claudio P"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1664894033,"creation_date":1664894033,"question_id":73949523,"body_markdown":"i&#39;m facing a problem trying to use data binding in my android app.\r\nLong story short, I&#39;ve created a custom view WPLView as follow:\r\n\r\n```\r\npublic class WPLView extends LinearLayout {\r\n\r\n    private String text;\r\n    private int number;\r\n    private Drawable drawable;\r\n\r\n    public WPLView(Context context, @Nullable AttributeSet attrs) {\r\n        super(context, attrs);\r\n\r\n        inflate(context, R.layout.wplview_layout, this);\r\n\r\n        TypedArray a = context.getTheme().obtainStyledAttributes(\r\n                attrs,\r\n                R.styleable.WPLView,\r\n                0, 0);\r\n\r\n        try {\r\n            text = a.getString(R.styleable.WPLView_wplv_text);\r\n            number = a.getInteger(R.styleable.WPLView_wplv_number, -1);\r\n            drawable = a.getDrawable(R.styleable.WPLView_wplv_drawable);\r\n\r\n            TextView tvText = findViewById(R.id.tv_text);\r\n            tvText.setText(text);\r\n\r\n            TextView tvNumber = findViewById(R.id.tv_number);\r\n            tvNumber.setText(String.valueOf(number));\r\n\r\n            tvNumber.setCompoundDrawablesWithIntrinsicBounds(drawable, null, null, null);\r\n        } finally {\r\n            a.recycle();\r\n        }\r\n    }\r\n\r\n}\r\n```\r\n\r\nwith its own stylable attributes:\r\n\r\n```\r\n&lt;resources&gt;\r\n\r\n    &lt;declare-styleable name=&quot;WPLView&quot;&gt;\r\n        &lt;attr name=&quot;wplv_text&quot; format=&quot;string&quot; /&gt;\r\n        &lt;attr name=&quot;wplv_number&quot; format=&quot;integer&quot; /&gt;\r\n        &lt;attr name=&quot;wplv_drawable&quot; format=&quot;reference&quot; /&gt;\r\n    &lt;/declare-styleable&gt;\r\n\r\n&lt;/resources&gt;\r\n```\r\n\r\nI&#39;ve created an utility object for data binding like this:\r\n\r\n```\r\npublic class MyObject{\r\n\t\r\n\tpublic int number;\r\n\t\r\n\tpublic MyObject(int number) {\r\n\t\tthis.number = number;\r\n\t}\r\n\t\r\n}\r\n```\r\n\r\nand trying to use databinding like this:\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;layout\r\n    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;&gt;\r\n\r\n    &lt;data&gt;\r\n        &lt;import type=&quot;android.view.View&quot; /&gt;\r\n        &lt;variable name=&quot;obj&quot; type=&quot;MyObject&quot;/&gt;\r\n    &lt;/data&gt;\r\n\r\n    &lt;ScrollView\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;\r\n        android:orientation=&quot;vertical&quot;\r\n        android:fillViewport=&quot;false&quot; &gt;\r\n\r\n        ...\r\n\t\t\r\n\t\t&lt;WPLView\r\n                    android:layout_width=&quot;wrap_content&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    app:wplv_text=&quot;Losses&quot;\r\n                    app:wplv_drawable=&quot;@drawable/loss&quot;\r\n                    app:wplv_number=&quot;@{obj.number}&quot;&gt;&lt;/WPLView&gt;\r\n\t\t\r\n\t\t...\r\n\r\n    &lt;/ScrollView&gt;\r\n&lt;/layout&gt;\r\n```\r\n\r\n\r\nbut when i build my project I have this error:\r\n\r\nAAPT: error: &#39;@{obj.number}&#39; is incompatible with attribute wplv_number (attr) integer.\r\n\r\n\r\n\r\nWhat&#39;s the reason about it? I looked for it on web but I don&#39;t find a solution, I see always databinding for string attribute (like android:text) or similar but apparently nothing abount my case. Can you help me?","title":"Android data binding error with int attribute - &lt;value&gt;is incompatible with attribute &lt;attribute_name&gt; (attr) integer","body":"<p>i'm facing a problem trying to use data binding in my android app.\nLong story short, I've created a custom view WPLView as follow:</p>\n<pre><code>public class WPLView extends LinearLayout {\n\n    private String text;\n    private int number;\n    private Drawable drawable;\n\n    public WPLView(Context context, @Nullable AttributeSet attrs) {\n        super(context, attrs);\n\n        inflate(context, R.layout.wplview_layout, this);\n\n        TypedArray a = context.getTheme().obtainStyledAttributes(\n                attrs,\n                R.styleable.WPLView,\n                0, 0);\n\n        try {\n            text = a.getString(R.styleable.WPLView_wplv_text);\n            number = a.getInteger(R.styleable.WPLView_wplv_number, -1);\n            drawable = a.getDrawable(R.styleable.WPLView_wplv_drawable);\n\n            TextView tvText = findViewById(R.id.tv_text);\n            tvText.setText(text);\n\n            TextView tvNumber = findViewById(R.id.tv_number);\n            tvNumber.setText(String.valueOf(number));\n\n            tvNumber.setCompoundDrawablesWithIntrinsicBounds(drawable, null, null, null);\n        } finally {\n            a.recycle();\n        }\n    }\n\n}\n</code></pre>\n<p>with its own stylable attributes:</p>\n<pre><code>&lt;resources&gt;\n\n    &lt;declare-styleable name=&quot;WPLView&quot;&gt;\n        &lt;attr name=&quot;wplv_text&quot; format=&quot;string&quot; /&gt;\n        &lt;attr name=&quot;wplv_number&quot; format=&quot;integer&quot; /&gt;\n        &lt;attr name=&quot;wplv_drawable&quot; format=&quot;reference&quot; /&gt;\n    &lt;/declare-styleable&gt;\n\n&lt;/resources&gt;\n</code></pre>\n<p>I've created an utility object for data binding like this:</p>\n<pre><code>public class MyObject{\n    \n    public int number;\n    \n    public MyObject(int number) {\n        this.number = number;\n    }\n    \n}\n</code></pre>\n<p>and trying to use databinding like this:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;layout\n    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;&gt;\n\n    &lt;data&gt;\n        &lt;import type=&quot;android.view.View&quot; /&gt;\n        &lt;variable name=&quot;obj&quot; type=&quot;MyObject&quot;/&gt;\n    &lt;/data&gt;\n\n    &lt;ScrollView\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;match_parent&quot;\n        android:orientation=&quot;vertical&quot;\n        android:fillViewport=&quot;false&quot; &gt;\n\n        ...\n        \n        &lt;WPLView\n                    android:layout_width=&quot;wrap_content&quot;\n                    android:layout_height=&quot;wrap_content&quot;\n                    app:wplv_text=&quot;Losses&quot;\n                    app:wplv_drawable=&quot;@drawable/loss&quot;\n                    app:wplv_number=&quot;@{obj.number}&quot;&gt;&lt;/WPLView&gt;\n        \n        ...\n\n    &lt;/ScrollView&gt;\n&lt;/layout&gt;\n</code></pre>\n<p>but when i build my project I have this error:</p>\n<p>AAPT: error: '@{obj.number}' is incompatible with attribute wplv_number (attr) integer.</p>\n<p>What's the reason about it? I looked for it on web but I don't find a solution, I see always databinding for string attribute (like android:text) or similar but apparently nothing abount my case. Can you help me?</p>\n"},{"tags":["java","spring","hibernate","jpa"],"answers":[{"tags":[],"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1664893842,"creation_date":1664893842,"answer_id":73949486,"question_id":73945974,"body_markdown":"I don&#39;t understand your issue exactly, or more, I don&#39;t understand why you think a OneToMany is the solution. Your session has duplicate java instances for the same row data without having the OneToMany - persist cascading will not help you or change that. If you have multiple As referencing the same b1 row, they need to use the same b1 instance as well. The allInformationDTO.b(); is returning an instance that represents a row in the B table, say b1, and creating a new b1&#39; instance likely every time it is called.\r\n\r\nThe solution depends on what you need to do with the Bs and Cs in this set of allInformationDTO. If you care about changes to the B and C data, something like:\r\n\r\n        for (AllInformationDTO allInformationDTO : allInformationDTOS) {\r\n\r\n            BDTO bDTO = allInformationDTO.b();\r\n            CDTO cDTO = allInformationDTO.c();\r\n            ADTO aDTO = allInformationDTO.a();\r\n\r\n            B b = bClassRepository.save(convert(bDTO));//mapping from dto\r\n            C c = cClassRepository.save(convert(cDTO));//mapping from dto\r\n            A a = convert(aDTO));//mapping from dto\r\n\r\n            a.setB(b);\r\n            a.setC(c);\r\n\r\n            aClassRepository.save(a);\r\n        }\r\n\r\nNote though that every redefinition of B and C in your allInformationDTOS will overwrite what was previously there. \r\n\r\nYour provider should be able to batch up these save requests and issue them only when needed (when the transaction commits), but it depends on your configuration.","title":"How to persist Parent from Child in unidirectional @ManyToOne relation?","body":"<p>I don't understand your issue exactly, or more, I don't understand why you think a OneToMany is the solution. Your session has duplicate java instances for the same row data without having the OneToMany - persist cascading will not help you or change that. If you have multiple As referencing the same b1 row, they need to use the same b1 instance as well. The allInformationDTO.b(); is returning an instance that represents a row in the B table, say b1, and creating a new b1' instance likely every time it is called.</p>\n<p>The solution depends on what you need to do with the Bs and Cs in this set of allInformationDTO. If you care about changes to the B and C data, something like:</p>\n<pre><code>    for (AllInformationDTO allInformationDTO : allInformationDTOS) {\n\n        BDTO bDTO = allInformationDTO.b();\n        CDTO cDTO = allInformationDTO.c();\n        ADTO aDTO = allInformationDTO.a();\n\n        B b = bClassRepository.save(convert(bDTO));//mapping from dto\n        C c = cClassRepository.save(convert(cDTO));//mapping from dto\n        A a = convert(aDTO));//mapping from dto\n\n        a.setB(b);\n        a.setC(c);\n\n        aClassRepository.save(a);\n    }\n</code></pre>\n<p>Note though that every redefinition of B and C in your allInformationDTOS will overwrite what was previously there.</p>\n<p>Your provider should be able to batch up these save requests and issue them only when needed (when the transaction commits), but it depends on your configuration.</p>\n"}],"owner":{"account_id":14963595,"reputation":728,"user_id":10802597,"display_name":"MrFisherman"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":337,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1664893842,"creation_date":1664876464,"question_id":73945974,"body_markdown":"I have a case where in my Entity I have 2 unidirectional @ManyToOne relations like this:\r\n\r\n    @Entity\r\n    public class A {\r\n    \r\n    @Id\r\n    private Long apiId;\r\n    \r\n    //other fields\r\n    \r\n    @ManyToOne(fetch = FetchType.LAZY, cascade = {CascadeType.PERSIST, CascadeType.MERGE})\r\n    @JoinColumn(name = &quot;classBid&quot;, foreignKey = @ForeignKey(name = &quot;FK_classA_classB&quot;))\r\n    private B b;\r\n    \r\n    @ManyToOne(fetch = FetchType.LAZY, cascade = {CascadeType.PERSIST, CascadeType.MERGE})\r\n    @JoinColumn(name = &quot;classCid&quot;, foreignKey = @ForeignKey(name = &quot;FK_classA_classC&quot;))\r\n    private C C;\r\n    \r\n    //equals and hashcode\r\n    }\r\n\r\nThis class represents main domain object which comes from outside (by external api). Both B and C parents are equally important.\r\n\r\nNow I want to save incoming data:\r\n\r\n        @Override\r\n        @Transactional\r\n        public void updateAllInformation() {\r\n            Set&lt;AllInformationDTO&gt; allInformationDTOS = apiService.getAllInformation();\r\n    \r\n            Set&lt;A&gt; aClassToSaveOrUpdate = new HashSet&lt;&gt;();\r\n            for (AllInformationDTO allInformationDTO : allInformationDTOS) {\r\n    \r\n                BDTO bDTO = allInformationDTO.b();\r\n                CDTO cDTO = allInformationDTO.c();\r\n                ADTO aDTO = allInformationDTO.a();\r\n    \r\n                B b = //mapping from dto\r\n                C c = //mapping from dto\r\n                A a = //mapping from dto\r\n    \r\n                a.setB(b);\r\n                a.setC(c);\r\n    \r\n                aClassToSaveOrUpdate.add(a);\r\n            }\r\n    \r\n            aClassRepository.saveAll(aClassToSaveOrUpdate);\r\n        }\r\n\r\nBut there is a problem when same Parent is in incoming data: `DataIntegrityViolationException exception: A different object with the same identifier value was already associated with the session : B#78`\r\n\r\nHow to cascade persist parent entities from child side of @ManyToOne relation?\r\nShould I change it to bidirectional and persist child from parent? But which one (B or C) should I choose to persist from if they are equally important?\r\n\r\nI didn&#39;t want to make it @OneToMany based on this quote from Vlad&#39;s blog: [![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/J6AqI.png","title":"How to persist Parent from Child in unidirectional @ManyToOne relation?","body":"<p>I have a case where in my Entity I have 2 unidirectional @ManyToOne relations like this:</p>\n<pre><code>@Entity\npublic class A {\n\n@Id\nprivate Long apiId;\n\n//other fields\n\n@ManyToOne(fetch = FetchType.LAZY, cascade = {CascadeType.PERSIST, CascadeType.MERGE})\n@JoinColumn(name = &quot;classBid&quot;, foreignKey = @ForeignKey(name = &quot;FK_classA_classB&quot;))\nprivate B b;\n\n@ManyToOne(fetch = FetchType.LAZY, cascade = {CascadeType.PERSIST, CascadeType.MERGE})\n@JoinColumn(name = &quot;classCid&quot;, foreignKey = @ForeignKey(name = &quot;FK_classA_classC&quot;))\nprivate C C;\n\n//equals and hashcode\n}\n</code></pre>\n<p>This class represents main domain object which comes from outside (by external api). Both B and C parents are equally important.</p>\n<p>Now I want to save incoming data:</p>\n<pre><code>    @Override\n    @Transactional\n    public void updateAllInformation() {\n        Set&lt;AllInformationDTO&gt; allInformationDTOS = apiService.getAllInformation();\n\n        Set&lt;A&gt; aClassToSaveOrUpdate = new HashSet&lt;&gt;();\n        for (AllInformationDTO allInformationDTO : allInformationDTOS) {\n\n            BDTO bDTO = allInformationDTO.b();\n            CDTO cDTO = allInformationDTO.c();\n            ADTO aDTO = allInformationDTO.a();\n\n            B b = //mapping from dto\n            C c = //mapping from dto\n            A a = //mapping from dto\n\n            a.setB(b);\n            a.setC(c);\n\n            aClassToSaveOrUpdate.add(a);\n        }\n\n        aClassRepository.saveAll(aClassToSaveOrUpdate);\n    }\n</code></pre>\n<p>But there is a problem when same Parent is in incoming data: <code>DataIntegrityViolationException exception: A different object with the same identifier value was already associated with the session : B#78</code></p>\n<p>How to cascade persist parent entities from child side of @ManyToOne relation?\nShould I change it to bidirectional and persist child from parent? But which one (B or C) should I choose to persist from if they are equally important?</p>\n<p>I didn't want to make it @OneToMany based on this quote from Vlad's blog: <a href=\"https://i.stack.imgur.com/J6AqI.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/J6AqI.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","selenium","selenium-webdriver","xpath","drop-down-menu"],"comments":[{"owner":{"account_id":10404380,"reputation":2588,"user_id":7671727,"display_name":"AbiSaran"},"score":0,"creation_date":1664893082,"post_id":73949276,"comment_id":130570986,"body_markdown":"Can you post the URL?","body":"Can you post the URL?"},{"owner":{"account_id":10668049,"reputation":773,"user_id":15061831,"display_name":"JustToKnow"},"score":0,"creation_date":1664893155,"post_id":73949276,"comment_id":130571024,"body_markdown":"Hey pal. it&#39;s not public at all, it&#39;s hidden","body":"Hey pal. it&#39;s not public at all, it&#39;s hidden"},{"owner":{"account_id":10668049,"reputation":773,"user_id":15061831,"display_name":"JustToKnow"},"score":0,"creation_date":1664893247,"post_id":73949276,"comment_id":130571064,"body_markdown":"@AbiSaran i don&#39;t understand how to select an option from a select2 dropdown, tried a lot of different things","body":"@AbiSaran i don&#39;t understand how to select an option from a select2 dropdown, tried a lot of different things"}],"answers":[{"tags":[],"owner":{"account_id":17698173,"reputation":15901,"user_id":12848411,"display_name":"Md. Fazlul Hoque"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1664893648,"creation_date":1664893272,"answer_id":73949380,"question_id":73949276,"body_markdown":"Try:\r\n\r\n    driver.findElement(By.xpath(&quot;//*[@id=\\&quot;select2-OperativeUnit_Id-container\\&quot;]/li[2]&quot;).click()\r\n\r\n\r\n#OR\r\n\r\n\r\n    driver.findElement(By.xpath(&quot;//li[contains(text(),&#39;Company2&#39;)]&quot;)).click()","title":"Dropdown options are not getting selected (select 2) using SELENIUM and JAVA","body":"<p>Try:</p>\n<pre><code>driver.findElement(By.xpath(&quot;//*[@id=\\&quot;select2-OperativeUnit_Id-container\\&quot;]/li[2]&quot;).click()\n</code></pre>\n<p>#OR</p>\n<pre><code>driver.findElement(By.xpath(&quot;//li[contains(text(),'Company2')]&quot;)).click()\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4261091,"reputation":32684,"user_id":3485434,"accept_rate":97,"display_name":"Prophet"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1664893747,"creation_date":1664893322,"answer_id":73949392,"question_id":73949276,"body_markdown":"Instead of\r\n```java\r\ndriver.findElement(By.xpath(&quot;//*[@id=\\&quot;select2-OperativeUnit_Id-container\\&quot;]&quot;)).click();\r\n```\r\nTry\r\n```java\r\ndriver.findElement(By.xpath(&quot;//li[contains(.,&#39;Company2&#39;)]&quot;)).click();\r\n```\r\nYou can make the locator more precise with this:\r\n```java\r\ndriver.findElement(By.xpath(&quot;//li[@class=&#39;select2-results__option&#39; and contains(.,&#39;Company2&#39;)]&quot;)).click();\r\n```\r\n","title":"Dropdown options are not getting selected (select 2) using SELENIUM and JAVA","body":"<p>Instead of</p>\n<pre class=\"lang-java prettyprint-override\"><code>driver.findElement(By.xpath(&quot;//*[@id=\\&quot;select2-OperativeUnit_Id-container\\&quot;]&quot;)).click();\n</code></pre>\n<p>Try</p>\n<pre class=\"lang-java prettyprint-override\"><code>driver.findElement(By.xpath(&quot;//li[contains(.,'Company2')]&quot;)).click();\n</code></pre>\n<p>You can make the locator more precise with this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>driver.findElement(By.xpath(&quot;//li[@class='select2-results__option' and contains(.,'Company2')]&quot;)).click();\n</code></pre>\n"}],"owner":{"account_id":10668049,"reputation":773,"user_id":15061831,"display_name":"JustToKnow"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":552,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73949392,"answer_count":2,"score":1,"last_activity_date":1664893747,"creation_date":1664892800,"question_id":73949276,"body_markdown":"I&#39;ve been trying without success to select an option from a dropdown select 2 class.\r\n\r\n\r\n    &lt;span class=&quot;select2-selection__rendered&quot; id=&quot;select2-OperativeUnit_Id-container&quot; title=&quot;Newsan&quot;&gt;Newsan&lt;/span&gt;\r\n\r\nI did this then in Selenium and the dropdown is selected:\r\n\r\n    driver.findElement(By.xpath(&quot;//*[@id=\\&quot;select2-OperativeUnit_Id-container\\&quot;]&quot;)).click();\r\n\r\n\r\nThe problem is that i can select no option at all. The dropdown has this:\r\n\r\n    &lt;ul class=&quot;select2-results__options&quot; role=&quot;tree&quot; id=&quot;select2-OperativeUnit_Id-results&quot; aria-expanded=&quot;true&quot; aria-hidden=&quot;false&quot;&gt;\r\n    &lt;li class=&quot;select2-results__option select2-results__option--highlighted&quot; id=&quot;select2-OperativeUnit_Id-result-1jq8-81&quot; role=&quot;treeitem&quot; aria-selected=&quot;true&quot;&gt;Company1&lt;/li&gt;\r\n    &lt;li class=&quot;select2-results__option&quot; id=&quot;select2-OperativeUnit_Id-result-fjep-281&quot; role=&quot;treeitem&quot; aria-selected=&quot;false&quot;&gt;Company2&lt;/li&gt;\r\n    &lt;li class=&quot;select2-results__option&quot; id=&quot;select2-OperativeUnit_Id-result-e8a1-408&quot; role=&quot;treeitem&quot; aria-selected=&quot;false&quot;&gt;Company3&lt;/li&gt;\r\n    &lt;/ul&gt;\r\n\r\nWhat should i do to select the option &quot;Company2&quot;?\r\n\r\n","title":"Dropdown options are not getting selected (select 2) using SELENIUM and JAVA","body":"<p>I've been trying without success to select an option from a dropdown select 2 class.</p>\n<pre><code>&lt;span class=&quot;select2-selection__rendered&quot; id=&quot;select2-OperativeUnit_Id-container&quot; title=&quot;Newsan&quot;&gt;Newsan&lt;/span&gt;\n</code></pre>\n<p>I did this then in Selenium and the dropdown is selected:</p>\n<pre><code>driver.findElement(By.xpath(&quot;//*[@id=\\&quot;select2-OperativeUnit_Id-container\\&quot;]&quot;)).click();\n</code></pre>\n<p>The problem is that i can select no option at all. The dropdown has this:</p>\n<pre><code>&lt;ul class=&quot;select2-results__options&quot; role=&quot;tree&quot; id=&quot;select2-OperativeUnit_Id-results&quot; aria-expanded=&quot;true&quot; aria-hidden=&quot;false&quot;&gt;\n&lt;li class=&quot;select2-results__option select2-results__option--highlighted&quot; id=&quot;select2-OperativeUnit_Id-result-1jq8-81&quot; role=&quot;treeitem&quot; aria-selected=&quot;true&quot;&gt;Company1&lt;/li&gt;\n&lt;li class=&quot;select2-results__option&quot; id=&quot;select2-OperativeUnit_Id-result-fjep-281&quot; role=&quot;treeitem&quot; aria-selected=&quot;false&quot;&gt;Company2&lt;/li&gt;\n&lt;li class=&quot;select2-results__option&quot; id=&quot;select2-OperativeUnit_Id-result-e8a1-408&quot; role=&quot;treeitem&quot; aria-selected=&quot;false&quot;&gt;Company3&lt;/li&gt;\n&lt;/ul&gt;\n</code></pre>\n<p>What should i do to select the option &quot;Company2&quot;?</p>\n"},{"tags":["java","apache-kafka","avro","confluent-schema-registry"],"comments":[{"owner":{"account_id":466002,"reputation":20226,"user_id":870483,"accept_rate":81,"display_name":"Nishu Tayal"},"score":0,"creation_date":1547564371,"post_id":54195813,"comment_id":95229697,"body_markdown":"May be the link can help you : http://www.bigendiandata.com/2016-12-05-Data-Types-Compared/","body":"May be the link can help you : <a href=\"http://www.bigendiandata.com/2016-12-05-Data-Types-Compared/\" rel=\"nofollow noreferrer\">bigendiandata.com/2016-12-05-Data-Types-Compared</a>"}],"answers":[{"tags":[],"owner":{"account_id":9605621,"reputation":37107,"user_id":7131757,"accept_rate":77,"display_name":"Giorgos Myrianthous"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1547545873,"creation_date":1547544545,"answer_id":54196006,"question_id":54195813,"body_markdown":"It is a matter of speed and storage. When serializing data, you often need to transmit the actual schema and therefore, this cause an increase of payload size. \r\n\r\n                                Total Payload Size\r\n    +-----------------+--------------------------------------------------+\r\n    |     Schema      |                 Serialised Data                  |\r\n    +-----------------+--------------------------------------------------+\r\n\r\nSchema Registry provides a centralized repository for schemas and metadata so that all schemas are registered in a central system. This centralized system enables producers to only include the ID of the schema instead of the full schema itself (in text format).  \r\n\r\n                          Total Payload Size\r\n    +----+--------------------------------------------------+\r\n    | ID |                 Serialised Data                  |\r\n    +----+--------------------------------------------------+\r\nTherefore, the serialisation becomes faster.\r\n\r\nFurthermore, schema registry versioning enables the enforcement of data policies that might help to prevent newer schemas to break compatibility with existing versions that could potentially cause downtime or any other significant issues in your pipeline.\r\n\r\n\r\n&lt;br&gt;\r\nSome more benefits of Schema Registry are thoroughly explained in [this article by Confluent][1]. \r\n\r\n\r\n  [1]: https://www.confluent.io/blog/schema-registry-kafka-stream-processing-yes-virginia-you-really-need-one/","title":"Why use Avro with Kafka - How to handle POJOs","body":"<p>It is a matter of speed and storage. When serializing data, you often need to transmit the actual schema and therefore, this cause an increase of payload size. </p>\n\n<pre><code>                            Total Payload Size\n+-----------------+--------------------------------------------------+\n|     Schema      |                 Serialised Data                  |\n+-----------------+--------------------------------------------------+\n</code></pre>\n\n<p>Schema Registry provides a centralized repository for schemas and metadata so that all schemas are registered in a central system. This centralized system enables producers to only include the ID of the schema instead of the full schema itself (in text format).  </p>\n\n<pre><code>                      Total Payload Size\n+----+--------------------------------------------------+\n| ID |                 Serialised Data                  |\n+----+--------------------------------------------------+\n</code></pre>\n\n<p>Therefore, the serialisation becomes faster.</p>\n\n<p>Furthermore, schema registry versioning enables the enforcement of data policies that might help to prevent newer schemas to break compatibility with existing versions that could potentially cause downtime or any other significant issues in your pipeline.</p>\n\n<p><br>\nSome more benefits of Schema Registry are thoroughly explained in <a href=\"https://www.confluent.io/blog/schema-registry-kafka-stream-processing-yes-virginia-you-really-need-one/\" rel=\"nofollow noreferrer\">this article by Confluent</a>. </p>\n"},{"tags":[],"owner":{"account_id":1439802,"reputation":610,"user_id":1360276,"accept_rate":44,"display_name":"saabeilin"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1547600217,"creation_date":1547600217,"answer_id":54208985,"question_id":54195813,"body_markdown":"First of all - Kafka has no idea about the key/value content. It operates bytes and it&#39;s client (producer/consumer) responsibility to cake care of de/serialization.\r\n\r\nThe most common options so far seem to be JSON, protobuf and Avro.\r\n\r\nWhat I personally like with Avro and why I usually use it and recommend to others:\r\n\r\n1) It&#39;s a enough compact binary serialization, with a schema and _logical types_ (which help distinguish just a regular `long` from `timestamp in long millis`)\r\n\r\n2) the Avro schemas are very descriptive and perfectly documented\r\n\r\n3) wide support among most of widely-used programming languages is a must!\r\n\r\n4) Confluent (and others) provide a repository for schemas, a so-called &quot;schema registry&quot;, to have a centralized storage for your schemas. In Avro, the message contains just the schema version ID, not the schema itself.\r\n\r\n5) If you are using Java, you can have great benefits from using the POJO base class generation from the schema.\r\n\r\nSure you can have parts of these with other options. You should try and compare all the options that suite your use-case. \r\n\r\n_P.S. My very personal opinionated advice is: if it&#39;s not a `String`, go for Avro. Applies both for keys and values._\r\n\r\n\r\n","title":"Why use Avro with Kafka - How to handle POJOs","body":"<p>First of all - Kafka has no idea about the key/value content. It operates bytes and it's client (producer/consumer) responsibility to cake care of de/serialization.</p>\n\n<p>The most common options so far seem to be JSON, protobuf and Avro.</p>\n\n<p>What I personally like with Avro and why I usually use it and recommend to others:</p>\n\n<p>1) It's a enough compact binary serialization, with a schema and <em>logical types</em> (which help distinguish just a regular <code>long</code> from <code>timestamp in long millis</code>)</p>\n\n<p>2) the Avro schemas are very descriptive and perfectly documented</p>\n\n<p>3) wide support among most of widely-used programming languages is a must!</p>\n\n<p>4) Confluent (and others) provide a repository for schemas, a so-called \"schema registry\", to have a centralized storage for your schemas. In Avro, the message contains just the schema version ID, not the schema itself.</p>\n\n<p>5) If you are using Java, you can have great benefits from using the POJO base class generation from the schema.</p>\n\n<p>Sure you can have parts of these with other options. You should try and compare all the options that suite your use-case. </p>\n\n<p><em>P.S. My very personal opinionated advice is: if it's not a <code>String</code>, go for Avro. Applies both for keys and values.</em></p>\n"},{"tags":[],"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"down_vote_count":0,"up_vote_count":12,"is_accepted":true,"score":12,"last_activity_date":1664892832,"creation_date":1547615430,"answer_id":54210771,"question_id":54195813,"body_markdown":"You don&#39;t need AVSC, [you can use an AVDL file](https://avro.apache.org/docs/1.8.1/idl.html), which basically looks the same as a POJO with only the fields\r\n\r\n    @namespace(&quot;com.example.mycode.avro&quot;)\r\n    protocol ExampleProtocol {\r\n       record User {\r\n         long id;\r\n         string name;\r\n       }\r\n    }\r\n\r\nWhich, when using the `idl-protocol` goal of the Maven plugin, will create this AVSC for you, rather than you writing it yourself. \r\n\r\n    {\r\n      &quot;type&quot; : &quot;record&quot;,\r\n      &quot;name&quot; : &quot;User&quot;,\r\n      &quot;namespace&quot; : &quot;com.example.mycode.avro&quot;,\r\n      &quot;fields&quot; : [ {\r\n        &quot;name&quot; : &quot;id&quot;,\r\n        &quot;type&quot; : &quot;long&quot;\r\n      }, {\r\n        &quot;name&quot; : &quot;name&quot;,\r\n        &quot;type&quot; : &quot;string&quot;\r\n      } ]\r\n    }\r\n\r\nAnd it&#39;ll also place a `SpecificData` POJO `User.java` on your classpath for using in your code.\r\n\r\n---\r\n\r\nIf you already had a POJO, you don&#39;t need to use AVSC or AVDL files. There are libraries to convert POJOs. For example, you [**can use**  Jackson](https://github.com/FasterXML/jackson-dataformats-binary/tree/master/avro#generating-avro-schema-from-pojo-definition), which is not only for JSON, you would just need to likely create a `JacksonAvroSerializer` for Kafka, for example, or find if one exists. \r\n\r\nAvro also has [built-in library based on reflection](https://blog.jeffli.me/blog/2014/04/05/avro-cookbook-part-ii/#parse-schema-from-existing-java-class/). \r\n\r\nConfluent Schema Registry serializers have a setting for using reflect based models. \r\n\r\n---\r\n\r\nSo to the question - *why Avro (for Kafka)?*\r\n\r\nWell, having a schema is a *good thing*. Think about RDBMS tables, you can explain the table, and you see all the columns. Move to NoSQL document databases, and they can contain literally anything, and this is the JSON world of Kafka.  \r\n\r\nLet&#39;s assume you have consumers in your Kafka cluster that have no idea what is in the topic, they have to know exactly who/what has been produced into a topic. They can try the console consumer, and if it were a plaintext like JSON, then they have to figure out some fields they are interested in, then perform flaky HashMap-like `.get(&quot;name&quot;)` operations again and again, only to run into an NPE when a field doesn&#39;t exist. With Avro, you **clearly define** defaults and nullable fields.  \r\n\r\nYou aren&#39;t *required* to use a Schema Registry, but it provides that type of `explain topic` semantics for the RDBMS analogy. It also saves you from needing to send the schema along with every message, and the expense of extra bandwidth on the Kafka topic. The registry is not only useful for Kafka, though, as it could be used for Spark, Flink, Hive, etc for all Data Science analysis surrounding streaming data ingest. \r\n\r\n---\r\n\r\nAssuming you did want to use JSON, then [try using MsgPack instead](https://msgpack.org/) and you&#39;ll likely see an increase in your Kafka throughput and save disk space on the brokers\r\n\r\n---\r\n\r\nYou can also use other formats like Protobuf or Thrift, [as Uber has compared \r\n](https://eng.uber.com/trip-data-squeeze/)\r\n","title":"Why use Avro with Kafka - How to handle POJOs","body":"<p>You don't need AVSC, <a href=\"https://avro.apache.org/docs/1.8.1/idl.html\" rel=\"nofollow noreferrer\">you can use an AVDL file</a>, which basically looks the same as a POJO with only the fields</p>\n<pre><code>@namespace(&quot;com.example.mycode.avro&quot;)\nprotocol ExampleProtocol {\n   record User {\n     long id;\n     string name;\n   }\n}\n</code></pre>\n<p>Which, when using the <code>idl-protocol</code> goal of the Maven plugin, will create this AVSC for you, rather than you writing it yourself.</p>\n<pre><code>{\n  &quot;type&quot; : &quot;record&quot;,\n  &quot;name&quot; : &quot;User&quot;,\n  &quot;namespace&quot; : &quot;com.example.mycode.avro&quot;,\n  &quot;fields&quot; : [ {\n    &quot;name&quot; : &quot;id&quot;,\n    &quot;type&quot; : &quot;long&quot;\n  }, {\n    &quot;name&quot; : &quot;name&quot;,\n    &quot;type&quot; : &quot;string&quot;\n  } ]\n}\n</code></pre>\n<p>And it'll also place a <code>SpecificData</code> POJO <code>User.java</code> on your classpath for using in your code.</p>\n<hr />\n<p>If you already had a POJO, you don't need to use AVSC or AVDL files. There are libraries to convert POJOs. For example, you <a href=\"https://github.com/FasterXML/jackson-dataformats-binary/tree/master/avro#generating-avro-schema-from-pojo-definition\" rel=\"nofollow noreferrer\"><strong>can use</strong>  Jackson</a>, which is not only for JSON, you would just need to likely create a <code>JacksonAvroSerializer</code> for Kafka, for example, or find if one exists.</p>\n<p>Avro also has <a href=\"https://blog.jeffli.me/blog/2014/04/05/avro-cookbook-part-ii/#parse-schema-from-existing-java-class/\" rel=\"nofollow noreferrer\">built-in library based on reflection</a>.</p>\n<p>Confluent Schema Registry serializers have a setting for using reflect based models.</p>\n<hr />\n<p>So to the question - <em>why Avro (for Kafka)?</em></p>\n<p>Well, having a schema is a <em>good thing</em>. Think about RDBMS tables, you can explain the table, and you see all the columns. Move to NoSQL document databases, and they can contain literally anything, and this is the JSON world of Kafka.</p>\n<p>Let's assume you have consumers in your Kafka cluster that have no idea what is in the topic, they have to know exactly who/what has been produced into a topic. They can try the console consumer, and if it were a plaintext like JSON, then they have to figure out some fields they are interested in, then perform flaky HashMap-like <code>.get(&quot;name&quot;)</code> operations again and again, only to run into an NPE when a field doesn't exist. With Avro, you <strong>clearly define</strong> defaults and nullable fields.</p>\n<p>You aren't <em>required</em> to use a Schema Registry, but it provides that type of <code>explain topic</code> semantics for the RDBMS analogy. It also saves you from needing to send the schema along with every message, and the expense of extra bandwidth on the Kafka topic. The registry is not only useful for Kafka, though, as it could be used for Spark, Flink, Hive, etc for all Data Science analysis surrounding streaming data ingest.</p>\n<hr />\n<p>Assuming you did want to use JSON, then <a href=\"https://msgpack.org/\" rel=\"nofollow noreferrer\">try using MsgPack instead</a> and you'll likely see an increase in your Kafka throughput and save disk space on the brokers</p>\n<hr />\n<p>You can also use other formats like Protobuf or Thrift, <a href=\"https://eng.uber.com/trip-data-squeeze/\" rel=\"nofollow noreferrer\">as Uber has compared\n</a></p>\n"}],"owner":{"account_id":7326908,"reputation":209,"user_id":5581051,"display_name":"adpap"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5924,"favorite_count":0,"down_vote_count":1,"up_vote_count":13,"accepted_answer_id":54210771,"answer_count":3,"score":12,"last_activity_date":1664892832,"creation_date":1547543880,"question_id":54195813,"body_markdown":"I have a spring application that is my kafka producer and I was wondering why avro is the best way to go. \r\nI read about it and all it has to offer, but why can&#39;t I just serialize my POJO that I created myself with jackson for example and send it to kafka?\r\n\r\nI&#39;m saying this because the POJO generation from avro is not so straight forward. \r\nOn top of it, it requires the maven plugin and an .avsc file.\r\n\r\nSo for example I have a POJO on my kafka producer created myself called User:\r\n\r\n    public class User {\r\n    \r\n    \tprivate long\tuserId;\r\n    \r\n    \tprivate String\tname;\r\n    \r\n    \tpublic String getName() {\r\n    \t\treturn name;\r\n    \t}\r\n    \r\n    \tpublic void setName(String name) {\r\n    \t\tthis.name = name;\r\n    \t}\r\n    \r\n    \tpublic long getUserId() {\r\n    \t\treturn userId;\r\n    \t}\r\n    \r\n    \tpublic void setUserId(long userId) {\r\n    \t\tthis.userId = userId;\r\n    \t}\r\n    \r\n    }\r\n\r\nI serialize it and send it to my user topic in kafka. Then I have a consumer that itself has a POJO User and deserialize the message. \r\nIs it a matter of space? Is it also not faster to serialize and deserialize this way? Not to mention that there is an overhead of maintaining a schema-registry.","title":"Why use Avro with Kafka - How to handle POJOs","body":"<p>I have a spring application that is my kafka producer and I was wondering why avro is the best way to go. \nI read about it and all it has to offer, but why can't I just serialize my POJO that I created myself with jackson for example and send it to kafka?</p>\n\n<p>I'm saying this because the POJO generation from avro is not so straight forward. \nOn top of it, it requires the maven plugin and an .avsc file.</p>\n\n<p>So for example I have a POJO on my kafka producer created myself called User:</p>\n\n<pre><code>public class User {\n\n    private long    userId;\n\n    private String  name;\n\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    public long getUserId() {\n        return userId;\n    }\n\n    public void setUserId(long userId) {\n        this.userId = userId;\n    }\n\n}\n</code></pre>\n\n<p>I serialize it and send it to my user topic in kafka. Then I have a consumer that itself has a POJO User and deserialize the message. \nIs it a matter of space? Is it also not faster to serialize and deserialize this way? Not to mention that there is an overhead of maintaining a schema-registry.</p>\n"},{"tags":["java","sorting","collections","linked-list"],"comments":[{"owner":{"account_id":13170666,"reputation":78669,"user_id":9513184,"display_name":"Unmitigated"},"score":1,"creation_date":1664808591,"post_id":73937174,"comment_id":130550216,"body_markdown":"Is this your own singly linked list class?","body":"Is this your own singly linked list class?"},{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":1,"creation_date":1664809087,"post_id":73937174,"comment_id":130550376,"body_markdown":"This is **your** homework not our. Try to solve it by yourself and come back if you have a specific problem.","body":"This is <b>your</b> homework not our. Try to solve it by yourself and come back if you have a specific problem."},{"owner":{"account_id":25242983,"reputation":1,"user_id":19076619,"display_name":"Shubham Shekhar Das"},"score":0,"creation_date":1664814026,"post_id":73937174,"comment_id":130551968,"body_markdown":"Sorry to say but this isn&#39;t my homework I was solving a leetcode question where I have to merge a list of LinkedList and then have to sort the linked list. I have merged the List of Linked List in a Linked List but couldn&#39;t able to sort it directly therefore asked a doubt whether it can be sort directly or not. But I think you misunderstood my question don&#39;t know why you replied like this.","body":"Sorry to say but this isn&#39;t my homework I was solving a leetcode question where I have to merge a list of LinkedList and then have to sort the linked list. I have merged the List of Linked List in a Linked List but couldn&#39;t able to sort it directly therefore asked a doubt whether it can be sort directly or not. But I think you misunderstood my question don&#39;t know why you replied like this."}],"answers":[{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1664852038,"creation_date":1664809619,"answer_id":73937378,"question_id":73937174,"body_markdown":"If the (hypothetical) singly linked list implements the `java.util.List` interface, then you can sort it using `Collections.sort`.  Otherwise, it cannot be done using the (standard) Java collections framework.\r\n\r\nYou could ... of course ... copy the (hypothetical) linked list elements to (say) an `ArrayList`, sort that using `Collections.sort`, then copy the elements of the sorted `ArrayList` back replacing the linked list elements.\r\n\r\n--------------------\r\n\r\n&gt; Please try to answer the question in Java.\r\n\r\nEnglish is sufficiently expressive in this case.\r\n\r\n","title":"Sorting an Single Singly Linked list","body":"<p>If the (hypothetical) singly linked list implements the <code>java.util.List</code> interface, then you can sort it using <code>Collections.sort</code>.  Otherwise, it cannot be done using the (standard) Java collections framework.</p>\n<p>You could ... of course ... copy the (hypothetical) linked list elements to (say) an <code>ArrayList</code>, sort that using <code>Collections.sort</code>, then copy the elements of the sorted <code>ArrayList</code> back replacing the linked list elements.</p>\n<hr />\n<blockquote>\n<p>Please try to answer the question in Java.</p>\n</blockquote>\n<p>English is sufficiently expressive in this case.</p>\n"},{"tags":[],"owner":{"account_id":13017241,"reputation":85,"user_id":9407974,"display_name":"UmHeyThere"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664810039,"creation_date":1664810039,"answer_id":73937463,"question_id":73937174,"body_markdown":"The `java.util.Collections` contains the `Collections.sort();` function. Within that the `Collections.reverseOrder()` can be utilised.\r\n\r\nFor example:\r\n\r\n    import java.util.Arrays;  \r\n    import java.util.Collections;  //import Collections\r\n    import java.util.List;  \r\n    public class TestList  \r\n    {  \r\n    public static void main(String args[])   \r\n        {  \r\n            List&lt;Integer&gt; testList = Arrays.asList(5,4,3,2,1);  \r\n            Collections.sort(testList, Collections.reverseOrder()); //use Collections to reverse the list order\r\n            System.out.println(testList);  \r\n        }  \r\n    }  \r\n\r\nThe resultant console output would be `[1, 2, 3, 4, 5]`\r\n","title":"Sorting an Single Singly Linked list","body":"<p>The <code>java.util.Collections</code> contains the <code>Collections.sort();</code> function. Within that the <code>Collections.reverseOrder()</code> can be utilised.</p>\n<p>For example:</p>\n<pre><code>import java.util.Arrays;  \nimport java.util.Collections;  //import Collections\nimport java.util.List;  \npublic class TestList  \n{  \npublic static void main(String args[])   \n    {  \n        List&lt;Integer&gt; testList = Arrays.asList(5,4,3,2,1);  \n        Collections.sort(testList, Collections.reverseOrder()); //use Collections to reverse the list order\n        System.out.println(testList);  \n    }  \n}  \n</code></pre>\n<p>The resultant console output would be <code>[1, 2, 3, 4, 5]</code></p>\n"}],"owner":{"account_id":25242983,"reputation":1,"user_id":19076619,"display_name":"Shubham Shekhar Das"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":148,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"closed_date":1664862073,"accepted_answer_id":73937378,"answer_count":2,"score":-3,"last_activity_date":1664892611,"creation_date":1664808511,"question_id":73937174,"body_markdown":"Is there any way or method in java Collection framework through which we can sort a singly Linked list directly as we do with lists. ex Collections.sort(lists);\r\n\r\n\r\n","title":"Sorting an Single Singly Linked list","body":"<p>Is there any way or method in java Collection framework through which we can sort a singly Linked list directly as we do with lists. ex Collections.sort(lists);</p>\n"},{"tags":["java","debugging","plugins","rundeck"],"answers":[{"tags":[],"owner":{"account_id":14433269,"reputation":3831,"user_id":10426011,"display_name":"MegaDrive68k"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1664892602,"creation_date":1664886130,"answer_id":73947789,"question_id":73947179,"body_markdown":"Yes, with this flag it works (without the asterisk and colon):\r\n\r\n```java\r\n-agentlib:jdwp=transport=dt_socket,address=&lt;debug_port_to_listen&gt;,server=y,suspend=n\r\n```\r\n\r\ne.g (Rundeck WAR based instance):\r\n\r\n```\r\njava -agentlib:jdwp=transport=dt_socket,address=&lt;debug_port_to_listen&gt;,server=y,suspend=n -jar rundeck.war\r\n```","title":"How can I attach a remote java debugger for debugging a rundeck plugin?","body":"<p>Yes, with this flag it works (without the asterisk and colon):</p>\n<pre class=\"lang-java prettyprint-override\"><code>-agentlib:jdwp=transport=dt_socket,address=&lt;debug_port_to_listen&gt;,server=y,suspend=n\n</code></pre>\n<p>e.g (Rundeck WAR based instance):</p>\n<pre><code>java -agentlib:jdwp=transport=dt_socket,address=&lt;debug_port_to_listen&gt;,server=y,suspend=n -jar rundeck.war\n</code></pre>\n"}],"owner":{"account_id":199946,"reputation":2432,"user_id":445548,"accept_rate":64,"display_name":"Shatazone"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":172,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73947789,"answer_count":1,"score":0,"last_activity_date":1664892602,"creation_date":1664882740,"question_id":73947179,"body_markdown":"I am currently developing a custom java plugin for Rundeck.\r\nIs it possible attach a remote debugger on the java process to better understand and debug throughout the process?\r\n\r\nSomething like adding this flag to rundeck jvm:\r\n\r\n    -agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=*:5005\r\n\r\n","title":"How can I attach a remote java debugger for debugging a rundeck plugin?","body":"<p>I am currently developing a custom java plugin for Rundeck.\nIs it possible attach a remote debugger on the java process to better understand and debug throughout the process?</p>\n<p>Something like adding this flag to rundeck jvm:</p>\n<pre><code>-agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=*:5005\n</code></pre>\n"},{"tags":["java","android","flutter","dart","visual-studio-code"],"comments":[{"owner":{"account_id":8726421,"reputation":821,"user_id":15119028,"display_name":"Junaid Khalid"},"score":0,"creation_date":1649445739,"post_id":71799767,"comment_id":126886423,"body_markdown":"Please follow official guidelines I do not think you have your environment variables set","body":"Please follow official guidelines I do not think you have your environment variables set"}],"answers":[{"tags":[],"owner":{"account_id":15981524,"reputation":11,"user_id":11533101,"display_name":"erif &#199;i&#231;ek"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664892521,"creation_date":1664892521,"answer_id":73949212,"question_id":71799767,"body_markdown":"please check your definitions in environment variables.\r\n.net 3.5 framework path or other variable path may not be defined.","title":"The system cannot find message text for message number 0x2350 in the message file for Application visual studio code","body":"<p>please check your definitions in environment variables.\n.net 3.5 framework path or other variable path may not be defined.</p>\n"}],"owner":{"account_id":24874179,"reputation":21,"user_id":18748288,"display_name":"Rizal Surya Gunawan"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":756,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1664892521,"creation_date":1649432301,"question_id":71799767,"body_markdown":"Somebody please help me\r\n[enter image description here][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Fh4Kc.png\r\n\r\ncan&#39;t create flutter project,can&#39;t run flutter doctor in visual code.look picture &quot;The system cannot find message text for message number 0x2350 in the message file for Application.&quot;","title":"The system cannot find message text for message number 0x2350 in the message file for Application visual studio code","body":"<p>Somebody please help me\n<a href=\"https://i.stack.imgur.com/Fh4Kc.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>can't create flutter project,can't run flutter doctor in visual code.look picture &quot;The system cannot find message text for message number 0x2350 in the message file for Application.&quot;</p>\n"},{"tags":["java","spring","spring-mvc","configuration","web.xml"],"comments":[{"owner":{"account_id":136251,"reputation":87506,"user_id":339637,"accept_rate":55,"display_name":"Ken Chan"},"score":1,"creation_date":1664792370,"post_id":73925625,"comment_id":130544905,"body_markdown":"pure spring project or spring-boot project ?","body":"pure spring project or spring-boot project ?"},{"owner":{"account_id":1993154,"reputation":585,"user_id":1786699,"accept_rate":100,"display_name":"PapaAtHome"},"score":1,"creation_date":1664878283,"post_id":73925625,"comment_id":130565821,"body_markdown":"What have you tried and what were the results?","body":"What have you tried and what were the results?"},{"owner":{"account_id":21806266,"reputation":50,"user_id":16104419,"display_name":" "},"score":0,"creation_date":1664892243,"post_id":73925625,"comment_id":130570619,"body_markdown":"pure spring mvc, no boot or something","body":"pure spring mvc, no boot or something"},{"owner":{"account_id":21806266,"reputation":50,"user_id":16104419,"display_name":" "},"score":0,"creation_date":1664892333,"post_id":73925625,"comment_id":130570666,"body_markdown":"i didn&#39;t try anyting cause i had no idea how to solve this","body":"i didn&#39;t try anyting cause i had no idea how to solve this"}],"owner":{"account_id":21806266,"reputation":50,"user_id":16104419,"display_name":" "},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":178,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1664892404,"creation_date":1664711969,"question_id":73925625,"body_markdown":"i want to convert this:\r\n```\r\n&lt;filter&gt;\r\n    &lt;filter-name&gt;SassCompiler&lt;/filter-name&gt;\r\n    &lt;filter-class&gt;com.darrinholst.sass_java.SassCompilingFilter&lt;/filter-class&gt;\r\n&lt;/filter&gt;\r\n\r\n&lt;filter-mapping&gt;\r\n    &lt;filter-name&gt;SassCompiler&lt;/filter-name&gt;\r\n    &lt;url-pattern&gt;*.css&lt;/url-pattern&gt;\r\n&lt;/filter-mapping&gt; \r\n```\r\nin web.xml into **exactly the same** thing in Java configuration, what should i do?\r\n\r\nIt&#39;s pure spring mvc project, no boot or something","title":"How to convert this part of web.xml to Java configuration","body":"<p>i want to convert this:</p>\n<pre><code>&lt;filter&gt;\n    &lt;filter-name&gt;SassCompiler&lt;/filter-name&gt;\n    &lt;filter-class&gt;com.darrinholst.sass_java.SassCompilingFilter&lt;/filter-class&gt;\n&lt;/filter&gt;\n\n&lt;filter-mapping&gt;\n    &lt;filter-name&gt;SassCompiler&lt;/filter-name&gt;\n    &lt;url-pattern&gt;*.css&lt;/url-pattern&gt;\n&lt;/filter-mapping&gt; \n</code></pre>\n<p>in web.xml into <strong>exactly the same</strong> thing in Java configuration, what should i do?</p>\n<p>It's pure spring mvc project, no boot or something</p>\n"},{"tags":["java","asynchronous","exception","completable-future"],"comments":[{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1664882102,"post_id":73944922,"comment_id":130567002,"body_markdown":"Is changing `getName()` an option?","body":"Is changing <code>getName()</code> an option?"},{"owner":{"account_id":11102083,"reputation":1171,"user_id":9914653,"display_name":"hitchhiker"},"score":0,"creation_date":1664882466,"post_id":73944922,"comment_id":130567119,"body_markdown":"@Holger it depends what did you have in mind?","body":"@Holger it depends what did you have in mind?"},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1664882799,"post_id":73944922,"comment_id":130567225,"body_markdown":"The simplest solution is to put `throwWithoutCompletionStage();` in a `try  catch ` block, as returning a future but doing the actual work (including potentially throwing an exception) outside it, looks like a flawed design. If you return an already completed future in the successful case, you should return an already (exceptionally) completed future in the failed case. Of course, you could also create a new method fixing the issue by wrapping the `getName()` call, but this shouldnt be necessary for a `private` method.","body":"The simplest solution is to put <code>throwWithoutCompletionStage();</code> in a <code>try  catch </code> block, as returning a future but doing the actual work (including potentially throwing an exception) outside it, looks like a flawed design. If you return an already completed future in the successful case, you should return an already (exceptionally) completed future in the failed case. Of course, you could also create a new method fixing the issue by wrapping the <code>getName()</code> call, but this shouldnt be necessary for a <code>private</code> method."}],"answers":[{"tags":[],"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1664892260,"creation_date":1664892260,"answer_id":73949155,"question_id":73944922,"body_markdown":"If you dont want to change the behavior of the `getName()` method, you have to use something like\r\n\r\n```java\r\npublic CompletableFuture&lt;String&gt; process() {\r\n  return CompletableFuture.supplyAsync(this::getName, Runnable::run)\r\n      .thenCompose(Function.identity())\r\n      .thenApplyAsync(result -&gt; {\r\n        // do something\r\n        return result;\r\n      })\r\n      .handleAsync((result, exception) -&gt; {\r\n        if (exception != null) {\r\n          return result;\r\n        } else {\r\n          return null;\r\n        }\r\n      });\r\n}\r\n```\r\n\r\nBy using `Runnable::run` as `Executor` you ensure that the async operation is executed immediately in the caller thread, just like the direct invocation of `getName()` would do. Using `.thenCompose(Function.identity())`, you get a `CompletableFuture&lt;String&gt;` out of the `CompletableFuture&lt;CompletableFuture&lt;String&gt;&gt;`.\r\n\r\nHowever, if `getName()` returns a completed future in the successful case, it should also return a future in the exceptional case. This may look like\r\n\r\n```java\r\nprivate CompletableFuture&lt;String&gt; getName() {\r\n  try {\r\n    throwWithoutCompletionStage();\r\n    return CompletableFuture.completedFuture(&quot;name&quot;);\r\n  } catch(Throwable t) {\r\n    return CompletableFuture.failedFuture(t);\r\n  }\r\n}\r\n```\r\n\r\n[`failedFuture`] has been introduced in Java&#160;9. If you need a Java&#160;8 compatible solution, you have to add such a factory method to your code base\r\n\r\n```java\r\npublic static &lt;U&gt; CompletableFuture&lt;U&gt; failedFuture(Throwable ex) {\r\n  CompletableFuture&lt;U&gt; f = new CompletableFuture&lt;&gt;();\r\n  f.completeExceptionally(ex);\r\n  return f;\r\n}\r\n```\r\n\r\nOr you integrate this logic into the `getName()` method:\r\n\r\n```java\r\nprivate CompletableFuture&lt;String&gt; getName() {\r\n  CompletableFuture&lt;String&gt; result = new CompletableFuture&lt;&gt;();\r\n  try {\r\n    throwWithoutCompletionStage();\r\n    result.complete(&quot;name&quot;);\r\n  } catch(Throwable t) {\r\n    result.completeExceptionally(t);\r\n  }\r\n  return result;\r\n}\r\n```\r\n\r\n[`failedFuture`]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/CompletableFuture.html#failedFuture(java.lang.Throwable)","title":"How to use only `handleAsync` to handle non-async exceptions as well?","body":"<p>If you dont want to change the behavior of the <code>getName()</code> method, you have to use something like</p>\n<pre class=\"lang-java prettyprint-override\"><code>public CompletableFuture&lt;String&gt; process() {\n  return CompletableFuture.supplyAsync(this::getName, Runnable::run)\n      .thenCompose(Function.identity())\n      .thenApplyAsync(result -&gt; {\n        // do something\n        return result;\n      })\n      .handleAsync((result, exception) -&gt; {\n        if (exception != null) {\n          return result;\n        } else {\n          return null;\n        }\n      });\n}\n</code></pre>\n<p>By using <code>Runnable::run</code> as <code>Executor</code> you ensure that the async operation is executed immediately in the caller thread, just like the direct invocation of <code>getName()</code> would do. Using <code>.thenCompose(Function.identity())</code>, you get a <code>CompletableFuture&lt;String&gt;</code> out of the <code>CompletableFuture&lt;CompletableFuture&lt;String&gt;&gt;</code>.</p>\n<p>However, if <code>getName()</code> returns a completed future in the successful case, it should also return a future in the exceptional case. This may look like</p>\n<pre class=\"lang-java prettyprint-override\"><code>private CompletableFuture&lt;String&gt; getName() {\n  try {\n    throwWithoutCompletionStage();\n    return CompletableFuture.completedFuture(&quot;name&quot;);\n  } catch(Throwable t) {\n    return CompletableFuture.failedFuture(t);\n  }\n}\n</code></pre>\n<p><a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/CompletableFuture.html#failedFuture(java.lang.Throwable)\" rel=\"nofollow noreferrer\"><code>failedFuture</code></a> has been introduced in Java9. If you need a Java8 compatible solution, you have to add such a factory method to your code base</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static &lt;U&gt; CompletableFuture&lt;U&gt; failedFuture(Throwable ex) {\n  CompletableFuture&lt;U&gt; f = new CompletableFuture&lt;&gt;();\n  f.completeExceptionally(ex);\n  return f;\n}\n</code></pre>\n<p>Or you integrate this logic into the <code>getName()</code> method:</p>\n<pre class=\"lang-java prettyprint-override\"><code>private CompletableFuture&lt;String&gt; getName() {\n  CompletableFuture&lt;String&gt; result = new CompletableFuture&lt;&gt;();\n  try {\n    throwWithoutCompletionStage();\n    result.complete(&quot;name&quot;);\n  } catch(Throwable t) {\n    result.completeExceptionally(t);\n  }\n  return result;\n}\n</code></pre>\n"}],"owner":{"account_id":11102083,"reputation":1171,"user_id":9914653,"display_name":"hitchhiker"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1519,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73949155,"answer_count":1,"score":0,"last_activity_date":1664892260,"creation_date":1664871387,"question_id":73944922,"body_markdown":"Java&#39;s `handleAsync` will not handle exceptions which don&#39;t come from a completion stage, for example:\r\n```java\r\npackage my.package;\r\n\r\nimport java.util.concurrent.CompletableFuture;\r\n\r\npublic class Test {\r\n\r\n  private CompletableFuture&lt;String&gt; throwWithoutCompletionStage() {\r\n    throw new RuntimeException(&quot;error&quot;);\r\n  }\r\n\r\n  private CompletableFuture&lt;String&gt; getName() {\r\n    // calls external API, does some work then throws\r\n    throwWithoutCompletionStage();\r\n    return CompletableFuture.completedFuture(&quot;name&quot;);\r\n  }\r\n\r\n  public CompletableFuture&lt;String&gt; process() {\r\n    return getName()\r\n        .thenApplyAsync(result -&gt; {\r\n          // do something\r\n          return result;\r\n        })\r\n        .handleAsync((result, exception) -&gt; {\r\n          if (exception != null) {\r\n            return result;\r\n          } else {\r\n            return null;\r\n          }\r\n        });\r\n  }\r\n}\r\n```\r\n\r\nWhen `process` is called `handleAsync` will not be executed but rather the exception will be propagated to `process`&#39;s caller which is a bit confusing because one would think that `handleAsync` would catch the exception. So in this case I would also need to wrap `process` in try/catch to really catch all exceptions which looks weird in my opinion and is also error-prone: we need to always remember to wrap methods which return `CompletableFuture` in both `handleAsync` and try/catch.\r\n\r\nIs there a best practice to prevent this double exception catching? One solution I thought of is to call `supplyAsync` which would create a completion stage and then use `handleAsync` on it:\r\n```java\r\n  public CompletableFuture&lt;CompletableFuture&lt;String&gt;&gt; process() {\r\n     return CompletableFuture.supplyAsync(() -&gt; getName())\r\n        .handleAsync((result, exception) -&gt; {\r\n          if (exception != null) {\r\n            return null;\r\n          } else {\r\n            return result;\r\n          }\r\n        });\r\n  }\r\n```\r\nThe problem with this code is that now `process` return type is `CompletableFuture&lt;CompletableFuture&lt;String&gt;&gt;` but also this seems redundant to wrap code in `supplyAsync` solely in order to have `handleAsync` catch all exceptions.","title":"How to use only `handleAsync` to handle non-async exceptions as well?","body":"<p>Java's <code>handleAsync</code> will not handle exceptions which don't come from a completion stage, for example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package my.package;\n\nimport java.util.concurrent.CompletableFuture;\n\npublic class Test {\n\n  private CompletableFuture&lt;String&gt; throwWithoutCompletionStage() {\n    throw new RuntimeException(&quot;error&quot;);\n  }\n\n  private CompletableFuture&lt;String&gt; getName() {\n    // calls external API, does some work then throws\n    throwWithoutCompletionStage();\n    return CompletableFuture.completedFuture(&quot;name&quot;);\n  }\n\n  public CompletableFuture&lt;String&gt; process() {\n    return getName()\n        .thenApplyAsync(result -&gt; {\n          // do something\n          return result;\n        })\n        .handleAsync((result, exception) -&gt; {\n          if (exception != null) {\n            return result;\n          } else {\n            return null;\n          }\n        });\n  }\n}\n</code></pre>\n<p>When <code>process</code> is called <code>handleAsync</code> will not be executed but rather the exception will be propagated to <code>process</code>'s caller which is a bit confusing because one would think that <code>handleAsync</code> would catch the exception. So in this case I would also need to wrap <code>process</code> in try/catch to really catch all exceptions which looks weird in my opinion and is also error-prone: we need to always remember to wrap methods which return <code>CompletableFuture</code> in both <code>handleAsync</code> and try/catch.</p>\n<p>Is there a best practice to prevent this double exception catching? One solution I thought of is to call <code>supplyAsync</code> which would create a completion stage and then use <code>handleAsync</code> on it:</p>\n<pre class=\"lang-java prettyprint-override\"><code>  public CompletableFuture&lt;CompletableFuture&lt;String&gt;&gt; process() {\n     return CompletableFuture.supplyAsync(() -&gt; getName())\n        .handleAsync((result, exception) -&gt; {\n          if (exception != null) {\n            return null;\n          } else {\n            return result;\n          }\n        });\n  }\n</code></pre>\n<p>The problem with this code is that now <code>process</code> return type is <code>CompletableFuture&lt;CompletableFuture&lt;String&gt;&gt;</code> but also this seems redundant to wrap code in <code>supplyAsync</code> solely in order to have <code>handleAsync</code> catch all exceptions.</p>\n"},{"tags":["java","spring","spring-integration"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1664888482,"post_id":73947643,"comment_id":130569117,"body_markdown":"And it should becuase? Your `alarmHandler` doesn&#39;t return anything so there is nothing to process.","body":"And it should becuase? Your <code>alarmHandler</code> doesn&#39;t return anything so there is nothing to process."},{"owner":{"account_id":26521337,"reputation":15,"user_id":20154968,"display_name":"Jekshenov Chingiz"},"score":0,"creation_date":1664957806,"post_id":73947643,"comment_id":130585173,"body_markdown":"@M.Deinum you are right, thank you! It is better choice to use handlers as part of POJO rather than Configuration where possible for clear understanding  EIP pipe-filter principles.","body":"@M.Deinum you are right, thank you! It is better choice to use handlers as part of POJO rather than Configuration where possible for clear understanding  EIP pipe-filter principles."}],"answers":[{"tags":[],"owner":{"account_id":3273937,"reputation":114855,"user_id":2756547,"accept_rate":75,"display_name":"Artem Bilan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1664892221,"creation_date":1664892221,"answer_id":73949148,"question_id":73947643,"body_markdown":"The `MessageHandler` you use in your `alarmHandler()` bean definition has a contract like this:\r\n\r\n    void handleMessage(Message&lt;?&gt; message) throws MessagingException;\r\n\r\nIndeed it does not produce anything to the `outputChannel` since its return type is `void`. \r\n\r\nNot sure what is your expectations since you definitely placed yourself to that corner.\r\n\r\nTop make it send to the `testOutput` you must change your method signature like this, for example:\r\n\r\n    @ServiceActivator(inputChannel = CHANNEL_ALARM, requiresReply = &quot;true&quot;, outputChannel = &quot;testOutput&quot;)\r\n    public Strung alarmHandler(Message&lt;?&gt; message) {\r\n            System.out.println(CHANNEL_ALARM);\r\n            System.out.println(message.getHeaders());\r\n          return &quot;foo&quot;;\r\n    }","title":"Spring Integration @ServiceActivator Message Handler doesn&#39;t work","body":"<p>The <code>MessageHandler</code> you use in your <code>alarmHandler()</code> bean definition has a contract like this:</p>\n<pre><code>void handleMessage(Message&lt;?&gt; message) throws MessagingException;\n</code></pre>\n<p>Indeed it does not produce anything to the <code>outputChannel</code> since its return type is <code>void</code>.</p>\n<p>Not sure what is your expectations since you definitely placed yourself to that corner.</p>\n<p>Top make it send to the <code>testOutput</code> you must change your method signature like this, for example:</p>\n<pre><code>@ServiceActivator(inputChannel = CHANNEL_ALARM, requiresReply = &quot;true&quot;, outputChannel = &quot;testOutput&quot;)\npublic Strung alarmHandler(Message&lt;?&gt; message) {\n        System.out.println(CHANNEL_ALARM);\n        System.out.println(message.getHeaders());\n      return &quot;foo&quot;;\n}\n</code></pre>\n"}],"owner":{"account_id":26521337,"reputation":15,"user_id":20154968,"display_name":"Jekshenov Chingiz"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":425,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73949148,"answer_count":1,"score":0,"last_activity_date":1664892221,"creation_date":1664885308,"question_id":73947643,"body_markdown":"Why testOutputHandler() doesn&#39;t print anything? It seems that alarmHandler() doesn&#39;t push message to outputChannel = &quot;testOutput&quot;\r\n    \r\n    @Bean\r\n    @ServiceActivator(inputChannel = CHANNEL_ALARM, requiresReply = &quot;true&quot;, outputChannel = &quot;testOutput&quot;)\r\n    public MessageHandler alarmHandler(SessionFactory&lt;FTPFile&gt; sessionFactory) {\r\n        return message -&gt; {\r\n            System.out.println(CHANNEL_ALARM);\r\n            System.out.println(message.getHeaders());\r\n            };\r\n    }\r\n\r\n    @Bean\r\n    @ServiceActivator(inputChannel = &quot;testOutput&quot; )\r\n    public MessageHandler testOutputHandler() {\r\n        return message -&gt; {\r\n            System.out.println(&quot;test&quot;);\r\n            System.out.println(message.getHeaders());\r\n        };\r\n    }\r\nHere is console output, we can see that alarmHandler does its work, but testOutput doesn&#39;t\r\n &lt;pre&gt; 2022-10-04 17:56:53.710  INFO 26092 --- [           main] o.s.b.a.b.JobLauncherApplicationRunner   : Running default command line with: []\r\nalarm\r\n{file_remoteHostPort=192.168.1.44:21, file_remoteFileInfo={&quot;directory&quot;:false,&quot;filename&quot;:&quot;Alarm_Logs_12.9.2022_0.41.csv&quot;,&quot;link&quot;:false,&quot;modified&quot;:1664782140000,&quot;permissions&quot;:&quot;----------&quot;,&quot;remoteDirectory&quot;:&quot;for_it&quot;,&quot;size&quot;:88804}, file_remoteDirectory=for_it, channel=alarm, id=67d21ff6-e0ef-1992-2b32-ab759a8c1076, closeableResource=org.springframework.integration.file.remote.session.CachingSessionFactory$CachedSession@4b9ffb22, file_remoteFile=Alarm_Logs_12.9.2022_0.41.csv, timestamp=1664884618273}&lt;/pre&gt;","title":"Spring Integration @ServiceActivator Message Handler doesn&#39;t work","body":"<p>Why testOutputHandler() doesn't print anything? It seems that alarmHandler() doesn't push message to outputChannel = &quot;testOutput&quot;</p>\n<pre><code>@Bean\n@ServiceActivator(inputChannel = CHANNEL_ALARM, requiresReply = &quot;true&quot;, outputChannel = &quot;testOutput&quot;)\npublic MessageHandler alarmHandler(SessionFactory&lt;FTPFile&gt; sessionFactory) {\n    return message -&gt; {\n        System.out.println(CHANNEL_ALARM);\n        System.out.println(message.getHeaders());\n        };\n}\n\n@Bean\n@ServiceActivator(inputChannel = &quot;testOutput&quot; )\npublic MessageHandler testOutputHandler() {\n    return message -&gt; {\n        System.out.println(&quot;test&quot;);\n        System.out.println(message.getHeaders());\n    };\n}\n</code></pre>\n<p>Here is console output, we can see that alarmHandler does its work, but testOutput doesn't</p>\n <pre> 2022-10-04 17:56:53.710  INFO 26092 --- [           main] o.s.b.a.b.JobLauncherApplicationRunner   : Running default command line with: []\nalarm\n{file_remoteHostPort=192.168.1.44:21, file_remoteFileInfo={\"directory\":false,\"filename\":\"Alarm_Logs_12.9.2022_0.41.csv\",\"link\":false,\"modified\":1664782140000,\"permissions\":\"----------\",\"remoteDirectory\":\"for_it\",\"size\":88804}, file_remoteDirectory=for_it, channel=alarm, id=67d21ff6-e0ef-1992-2b32-ab759a8c1076, closeableResource=org.springframework.integration.file.remote.session.CachingSessionFactory$CachedSession@4b9ffb22, file_remoteFile=Alarm_Logs_12.9.2022_0.41.csv, timestamp=1664884618273}</pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":113294,"reputation":54886,"user_id":298455,"accept_rate":100,"display_name":"Nishant"},"score":0,"creation_date":1349787651,"post_id":12800588,"comment_id":17308928,"body_markdown":"I afraid you will have to download the file at least once to get exact size. (you may want to store for future, but if files changes on the server the data will be stale)","body":"I afraid you will have to download the file at least once to get exact size. (you may want to store for future, but if files changes on the server the data will be stale)"},{"owner":{"account_id":354298,"reputation":5638,"user_id":692560,"accept_rate":86,"display_name":"Vala"},"score":1,"creation_date":1349787816,"post_id":12800588,"comment_id":17309013,"body_markdown":"@Nishant That&#39;s not true. An `HTTP HEAD` request returns information about what you would get if you did an `HTTP GET` request, which should include size of the returned request. You could certainly do a `HEAD` request and parse the response.","body":"@Nishant That&#39;s not true. An <code>HTTP HEAD</code> request returns information about what you would get if you did an <code>HTTP GET</code> request, which should include size of the returned request. You could certainly do a <code>HEAD</code> request and parse the response."},{"owner":{"account_id":341129,"reputation":39091,"user_id":671543,"accept_rate":55,"display_name":"njzk2"},"score":1,"creation_date":1462241529,"post_id":12800588,"comment_id":61542906,"body_markdown":"but the `content-length` is optional and may not be present","body":"but the <code>content-length</code> is optional and may not be present"}],"answers":[{"tags":[],"owner":{"account_id":220789,"reputation":114430,"user_id":478399,"accept_rate":83,"display_name":"AlexR"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1349787756,"creation_date":1349787756,"answer_id":12800656,"question_id":12800588,"body_markdown":"Try to use HTTP HEAD method. It returns the HTTP headers only. The header `Content-Length` should contain information you need.","title":"How to calculate a file size from URL in java","body":"<p>Try to use HTTP HEAD method. It returns the HTTP headers only. The header <code>Content-Length</code> should contain information you need.</p>\n"},{"tags":[],"owner":{"account_id":448219,"reputation":2998,"user_id":842302,"accept_rate":56,"display_name":"Christopher Will"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1349787904,"creation_date":1349787904,"answer_id":12800710,"question_id":12800588,"body_markdown":"Did you try already to use [getContentLength](http://docs.oracle.com/javase/6/docs/api/java/net/URLConnection.html#getContentLength()) on the URL connection?\r\nIn case the server responses a valid header you should get the size of the document.\r\n\r\nBut be aware of the fact that the webserver might also return the file in chunks. In this case IIRC the content length method will return either the size of one chunk (&lt;=1.4) or -1 (&gt;1.4).","title":"How to calculate a file size from URL in java","body":"<p>Did you try already to use <a href=\"http://docs.oracle.com/javase/6/docs/api/java/net/URLConnection.html#getContentLength%28%29\" rel=\"nofollow\">getContentLength</a> on the URL connection?\nIn case the server responses a valid header you should get the size of the document.</p>\n\n<p>But be aware of the fact that the webserver might also return the file in chunks. In this case IIRC the content length method will return either the size of one chunk (&lt;=1.4) or -1 (>1.4).</p>\n"},{"tags":[],"owner":{"display_name":"user1723178"},"down_vote_count":1,"up_vote_count":47,"is_accepted":true,"score":46,"last_activity_date":1512728038,"creation_date":1349788186,"answer_id":12800801,"question_id":12800588,"body_markdown":"Using a HEAD request, you can do something like this:\r\n\r\n    private static int getFileSize(URL url) {\r\n        URLConnection conn = null;\r\n        try {\r\n            conn = url.openConnection();\r\n            if(conn instanceof HttpURLConnection) {\r\n                ((HttpURLConnection)conn).setRequestMethod(&quot;HEAD&quot;);\r\n            }\r\n            conn.getInputStream();\r\n            return conn.getContentLength();\r\n        } catch (IOException e) {\r\n            throw new RuntimeException(e);\r\n        } finally {\r\n            if(conn instanceof HttpURLConnection) {\r\n                ((HttpURLConnection)conn).disconnect();\r\n            }\r\n        }\r\n    }\r\n\r\n","title":"How to calculate a file size from URL in java","body":"<p>Using a HEAD request, you can do something like this:</p>\n\n<pre><code>private static int getFileSize(URL url) {\n    URLConnection conn = null;\n    try {\n        conn = url.openConnection();\n        if(conn instanceof HttpURLConnection) {\n            ((HttpURLConnection)conn).setRequestMethod(\"HEAD\");\n        }\n        conn.getInputStream();\n        return conn.getContentLength();\n    } catch (IOException e) {\n        throw new RuntimeException(e);\n    } finally {\n        if(conn instanceof HttpURLConnection) {\n            ((HttpURLConnection)conn).disconnect();\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"display_name":"user1723813"},"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1349788957,"creation_date":1349788957,"answer_id":12801048,"question_id":12800588,"body_markdown":"The HTTP response has a Content-Length header, so you could query the URLConnection object for this value.\r\n\r\nOnce the URL connection has been opened, you can try something like this:\r\n\r\n    List values = urlConnection.getHeaderFields().get(&quot;content-Length&quot;)\r\n    if (values != null &amp;&amp; !values.isEmpty()) {\r\n    \r\n        // getHeaderFields() returns a Map with key=(String) header \r\n        // name, value = List of String values for that header field. \r\n        // just use the first value here.\r\n        String sLength = (String) values.get(0);\r\n    \r\n        if (sLength != null) {\r\n           //parse the length into an integer...\r\n           ...\r\n        }\r\n    }","title":"How to calculate a file size from URL in java","body":"<p>The HTTP response has a Content-Length header, so you could query the URLConnection object for this value.</p>\n\n<p>Once the URL connection has been opened, you can try something like this:</p>\n\n<pre><code>List values = urlConnection.getHeaderFields().get(\"content-Length\")\nif (values != null &amp;&amp; !values.isEmpty()) {\n\n    // getHeaderFields() returns a Map with key=(String) header \n    // name, value = List of String values for that header field. \n    // just use the first value here.\n    String sLength = (String) values.get(0);\n\n    if (sLength != null) {\n       //parse the length into an integer...\n       ...\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7231313,"reputation":2321,"user_id":5518027,"display_name":"Arpan Sarkar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1462241357,"creation_date":1462241357,"answer_id":36994474,"question_id":12800588,"body_markdown":"You can try this..\r\n\r\n    private long getContentLength(HttpURLConnection conn) {\r\n\t\tString transferEncoding = conn.getHeaderField(&quot;Transfer-Encoding&quot;);\r\n\t\tif (transferEncoding == null || transferEncoding.equalsIgnoreCase(&quot;chunked&quot;)) {\r\n\t\t\treturn conn.getHeaderFieldInt(&quot;Content-Length&quot;, -1);\r\n\t\t} else {\r\n\t\t\treturn -1;\r\n\t\t}","title":"How to calculate a file size from URL in java","body":"<p>You can try this..</p>\n\n<pre><code>private long getContentLength(HttpURLConnection conn) {\n    String transferEncoding = conn.getHeaderField(\"Transfer-Encoding\");\n    if (transferEncoding == null || transferEncoding.equalsIgnoreCase(\"chunked\")) {\n        return conn.getHeaderFieldInt(\"Content-Length\", -1);\n    } else {\n        return -1;\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":242136,"reputation":3005,"user_id":513451,"accept_rate":61,"display_name":"Michel Jung"},"down_vote_count":0,"up_vote_count":19,"is_accepted":false,"score":19,"last_activity_date":1664792382,"creation_date":1477919791,"answer_id":40342982,"question_id":12800588,"body_markdown":"The accepted answer is prone to `NullPointerException`, doesn&#39;t work for files &gt; 2GiB and contains an unnecessary call to `getInputStream()`. Here&#39;s the fixed code:\r\n\r\n    public long getFileSize(URL url) {\r\n      HttpURLConnection conn = null;\r\n      try {\r\n        conn = (HttpURLConnection) url.openConnection();\r\n        conn.setRequestMethod(&quot;HEAD&quot;);\r\n        return conn.getContentLengthLong();\r\n      } catch (IOException e) {\r\n        throw new RuntimeException(e);\r\n      } finally {\r\n        if (conn != null) {\r\n          conn.disconnect();\r\n        }\r\n      }\r\n    }\r\n\r\n**Update:** The accepted was updated but still has issues.","title":"How to calculate a file size from URL in java","body":"<p>The accepted answer is prone to <code>NullPointerException</code>, doesn't work for files &gt; 2GiB and contains an unnecessary call to <code>getInputStream()</code>. Here's the fixed code:</p>\n<pre><code>public long getFileSize(URL url) {\n  HttpURLConnection conn = null;\n  try {\n    conn = (HttpURLConnection) url.openConnection();\n    conn.setRequestMethod(&quot;HEAD&quot;);\n    return conn.getContentLengthLong();\n  } catch (IOException e) {\n    throw new RuntimeException(e);\n  } finally {\n    if (conn != null) {\n      conn.disconnect();\n    }\n  }\n}\n</code></pre>\n<p><strong>Update:</strong> The accepted was updated but still has issues.</p>\n"},{"tags":[],"owner":{"account_id":796053,"reputation":115361,"user_id":878126,"accept_rate":51,"display_name":"android developer"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1551346988,"creation_date":1551345077,"answer_id":54921990,"question_id":12800588,"body_markdown":"In case you are on Android, here&#39;s a solution in Java:\r\n\r\n    /**@return the file size of the given file url , or -1L if there was any kind of error while doing so*/\r\n    @WorkerThread\r\n    public static long getUrlFileLength(String url) {\r\n        try {\r\n            final HttpURLConnection urlConnection = (HttpURLConnection) new URL(url).openConnection();\r\n            urlConnection.setRequestMethod(&quot;HEAD&quot;);\r\n            final String lengthHeaderField = urlConnection.getHeaderField(&quot;content-length&quot;);\r\n            Long result = lengthHeaderField == null ? null : Long.parseLong(lengthHeaderField);\r\n            return result == null || result &lt; 0L ? -1L : result;\r\n        } catch (Exception ignored) {\r\n        }\r\n        return -1L;\r\n    }\r\n\r\nAnd in Kotlin:\r\n\r\n    /**@return the file size of the given file url , or -1L if there was any kind of error while doing so*/\r\n    @WorkerThread\r\n    fun getUrlFileLength(url: String): Long {\r\n        return try {\r\n            val urlConnection = URL(url).openConnection() as HttpURLConnection\r\n            urlConnection.requestMethod = &quot;HEAD&quot;\r\n            urlConnection.getHeaderField(&quot;content-length&quot;)?.toLongOrNull()?.coerceAtLeast(-1L)\r\n                    ?: -1L\r\n        } catch (ignored: Exception) {\r\n            -1L\r\n        }\r\n    }\r\n\r\nIf your app is from Android N, you can use this instead:\r\n\r\n    /**@return the file size of the given file url , or -1L if there was any kind of error while doing so*/\r\n    @WorkerThread\r\n    fun getUrlFileLength(url: String): Long {\r\n        return try {\r\n            val urlConnection = URL(url).openConnection() as HttpURLConnection\r\n            urlConnection.requestMethod = &quot;HEAD&quot;\r\n            urlConnection.contentLengthLong.coerceAtLeast(-1L)\r\n        } catch (ignored: Exception) {\r\n            -1L\r\n        }\r\n    }\r\n","title":"How to calculate a file size from URL in java","body":"<p>In case you are on Android, here's a solution in Java:</p>\n\n<pre><code>/**@return the file size of the given file url , or -1L if there was any kind of error while doing so*/\n@WorkerThread\npublic static long getUrlFileLength(String url) {\n    try {\n        final HttpURLConnection urlConnection = (HttpURLConnection) new URL(url).openConnection();\n        urlConnection.setRequestMethod(\"HEAD\");\n        final String lengthHeaderField = urlConnection.getHeaderField(\"content-length\");\n        Long result = lengthHeaderField == null ? null : Long.parseLong(lengthHeaderField);\n        return result == null || result &lt; 0L ? -1L : result;\n    } catch (Exception ignored) {\n    }\n    return -1L;\n}\n</code></pre>\n\n<p>And in Kotlin:</p>\n\n<pre><code>/**@return the file size of the given file url , or -1L if there was any kind of error while doing so*/\n@WorkerThread\nfun getUrlFileLength(url: String): Long {\n    return try {\n        val urlConnection = URL(url).openConnection() as HttpURLConnection\n        urlConnection.requestMethod = \"HEAD\"\n        urlConnection.getHeaderField(\"content-length\")?.toLongOrNull()?.coerceAtLeast(-1L)\n                ?: -1L\n    } catch (ignored: Exception) {\n        -1L\n    }\n}\n</code></pre>\n\n<p>If your app is from Android N, you can use this instead:</p>\n\n<pre><code>/**@return the file size of the given file url , or -1L if there was any kind of error while doing so*/\n@WorkerThread\nfun getUrlFileLength(url: String): Long {\n    return try {\n        val urlConnection = URL(url).openConnection() as HttpURLConnection\n        urlConnection.requestMethod = \"HEAD\"\n        urlConnection.contentLengthLong.coerceAtLeast(-1L)\n    } catch (ignored: Exception) {\n        -1L\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":403508,"reputation":6422,"user_id":771318,"accept_rate":62,"display_name":"javaMan"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":36113,"favorite_count":0,"down_vote_count":0,"up_vote_count":25,"accepted_answer_id":12800801,"answer_count":7,"score":25,"last_activity_date":1664891923,"creation_date":1349787539,"question_id":12800588,"body_markdown":"I&#39;m attempting to get a bunch of pdf links from a web service and I want to give the user the file size of each link.\r\n\r\nIs there a way to accomplish this task?\r\n\r\nThanks","title":"How to calculate a file size from URL in java","body":"<p>I'm attempting to get a bunch of pdf links from a web service and I want to give the user the file size of each link.</p>\n\n<p>Is there a way to accomplish this task?</p>\n\n<p>Thanks</p>\n"},{"tags":["java","spring","spring-integration"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1664869080,"post_id":73943031,"comment_id":130562957,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."},{"owner":{"account_id":26521337,"reputation":15,"user_id":20154968,"display_name":"Jekshenov Chingiz"},"score":0,"creation_date":1664876869,"post_id":73943031,"comment_id":130565353,"body_markdown":"I added custom transformer that puts channel names depending on file name to the message headers through IntegrationMessageHeaderAccessor &amp; MessageBuilder and then I use HeaderValueRouter","body":"I added custom transformer that puts channel names depending on file name to the message headers through IntegrationMessageHeaderAccessor &amp; MessageBuilder and then I use HeaderValueRouter"}],"answers":[{"tags":[],"owner":{"account_id":3273937,"reputation":114855,"user_id":2756547,"accept_rate":75,"display_name":"Artem Bilan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1664891151,"creation_date":1664891151,"answer_id":73948873,"question_id":73943031,"body_markdown":"Well, you have already that `file_remoteFile` with all the info you need for routing.\r\n\r\nUse a `@Router` instead and plain POJO method:\r\n\r\n    @Router(inputChannel = CHANNEL_STREAMED_DATA)\r\n    String routeByRemoteFile(@Header(FileHeaders.REMOTE_FILE) String remoteFile) {\r\n        ...\r\n    }\r\n\r\nAnd return a respective channel name according your file name matching logic.\r\n\r\nSee more info in docs: https://docs.spring.io/spring-integration/docs/current/reference/html/message-routing.html#router-annotation","title":"How to filter file by filename and route to corresponding channel in Spring Integration?","body":"<p>Well, you have already that <code>file_remoteFile</code> with all the info you need for routing.</p>\n<p>Use a <code>@Router</code> instead and plain POJO method:</p>\n<pre><code>@Router(inputChannel = CHANNEL_STREAMED_DATA)\nString routeByRemoteFile(@Header(FileHeaders.REMOTE_FILE) String remoteFile) {\n    ...\n}\n</code></pre>\n<p>And return a respective channel name according your file name matching logic.</p>\n<p>See more info in docs: <a href=\"https://docs.spring.io/spring-integration/docs/current/reference/html/message-routing.html#router-annotation\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-integration/docs/current/reference/html/message-routing.html#router-annotation</a></p>\n"}],"owner":{"account_id":26521337,"reputation":15,"user_id":20154968,"display_name":"Jekshenov Chingiz"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":200,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73948873,"answer_count":1,"score":1,"last_activity_date":1664891151,"creation_date":1664856362,"question_id":73943031,"body_markdown":"I have remote FTP server to which I have mounted FtpStreamingMessageSource Inbound Channel Adapter and now I need to filter files by filename using regex and route to corresponding channels to launch batch job. The official documentation has PayloadTypeRouter, HeaderValueRouter but they are not suitable for this task. I can play with filters, but then I have to write several Inbound Channel Adapters for each file with specific filter. Is this normal approach or is  there a better solution?\r\n\r\nFor example: I have A.csv, B.csv, C.csv, D.csv files on FTP. After reading I need to route A.csv to chanell A, B.csv to channel B and so on.\r\n\r\nBelow is the **current working solution**, feel free to comment and correct\r\n\r\n     @Override\r\n    protected Object doTransform(Message&lt;?&gt; message) {\r\n        IntegrationMessageHeaderAccessor accessor = new IntegrationMessageHeaderAccessor(message);\r\n        MessageBuilder messageBuilder  = MessageBuilder.fromMessage(message);\r\n        String fileName = accessor.getHeader(&quot;file_remoteFile&quot;).toString();\r\n        if(fileName.contains(&quot;file_name1&quot;)){\r\n            messageBuilder.setHeader(&quot;channel&quot;, &quot;channel1&quot;);\r\n        } else if (fileName.contains(&quot;file_name2&quot;)){\r\n            messageBuilder.setHeader(&quot;channel&quot;, &quot;channel2&quot;);\r\n        } else if(fileName.contains(&quot;file_name3&quot;)) {\r\n            messageBuilder.setHeader(&quot;channel&quot;, &quot;channel3&quot;);\r\n        } else if (fileName.contains(&quot;file_name4&quot;)){\r\n            messageBuilder.setHeader(&quot;channel&quot;, &quot;channel4&quot;);\r\n        }\r\n        return messageBuilder.build();\r\n    }\r\n\r\nAnd here is Routing\r\n\r\n    @Bean\r\n    @org.springframework.integration.annotation.Transformer(inputChannel = CHANNEL_STREAMED_DATA, outputChannel = CHANNEL_DATA)\r\n    public CustomTransformer customTransformer() {\r\n        return new CustomTransformer();\r\n    }\r\n\r\n    @ServiceActivator(inputChannel = CHANNEL_DATA)\r\n    @Bean\r\n    public HeaderValueRouter router() {\r\n        HeaderValueRouter router = new HeaderValueRouter(&quot;channel&quot;);\r\n        router.setChannelMapping(&quot;channel1&quot;, &quot;channelA&quot;);\r\n        router.setChannelMapping(&quot;channel2&quot;, &quot;channelB&quot;);\r\n        return router;\r\n    }    ","title":"How to filter file by filename and route to corresponding channel in Spring Integration?","body":"<p>I have remote FTP server to which I have mounted FtpStreamingMessageSource Inbound Channel Adapter and now I need to filter files by filename using regex and route to corresponding channels to launch batch job. The official documentation has PayloadTypeRouter, HeaderValueRouter but they are not suitable for this task. I can play with filters, but then I have to write several Inbound Channel Adapters for each file with specific filter. Is this normal approach or is  there a better solution?</p>\n<p>For example: I have A.csv, B.csv, C.csv, D.csv files on FTP. After reading I need to route A.csv to chanell A, B.csv to channel B and so on.</p>\n<p>Below is the <strong>current working solution</strong>, feel free to comment and correct</p>\n<pre><code> @Override\nprotected Object doTransform(Message&lt;?&gt; message) {\n    IntegrationMessageHeaderAccessor accessor = new IntegrationMessageHeaderAccessor(message);\n    MessageBuilder messageBuilder  = MessageBuilder.fromMessage(message);\n    String fileName = accessor.getHeader(&quot;file_remoteFile&quot;).toString();\n    if(fileName.contains(&quot;file_name1&quot;)){\n        messageBuilder.setHeader(&quot;channel&quot;, &quot;channel1&quot;);\n    } else if (fileName.contains(&quot;file_name2&quot;)){\n        messageBuilder.setHeader(&quot;channel&quot;, &quot;channel2&quot;);\n    } else if(fileName.contains(&quot;file_name3&quot;)) {\n        messageBuilder.setHeader(&quot;channel&quot;, &quot;channel3&quot;);\n    } else if (fileName.contains(&quot;file_name4&quot;)){\n        messageBuilder.setHeader(&quot;channel&quot;, &quot;channel4&quot;);\n    }\n    return messageBuilder.build();\n}\n</code></pre>\n<p>And here is Routing</p>\n<pre><code>@Bean\n@org.springframework.integration.annotation.Transformer(inputChannel = CHANNEL_STREAMED_DATA, outputChannel = CHANNEL_DATA)\npublic CustomTransformer customTransformer() {\n    return new CustomTransformer();\n}\n\n@ServiceActivator(inputChannel = CHANNEL_DATA)\n@Bean\npublic HeaderValueRouter router() {\n    HeaderValueRouter router = new HeaderValueRouter(&quot;channel&quot;);\n    router.setChannelMapping(&quot;channel1&quot;, &quot;channelA&quot;);\n    router.setChannelMapping(&quot;channel2&quot;, &quot;channelB&quot;);\n    return router;\n}    \n</code></pre>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9004,"page":988,"page_size":100}
