{"items":[{"tags":["java"],"owner":{"account_id":1697325,"reputation":7484,"user_id":1558430,"accept_rate":76,"display_name":"Brian"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1674752993,"creation_date":1674752993,"question_id":75249487,"body_markdown":"I have an MSSQL (very much simplified) query that looks like this:\r\n\r\n    BEGIN TRY\r\n        BEGIN TRANSACTION\r\n        IF OBJECT_ID(N\\&#39;tempdb..#temptable\\&#39;) IS NOT NULL DROP TABLE #temptable;\r\n\r\n        CREATE TABLE #temptable (\r\n            id INT,\r\n            id2 INT\r\n        );\r\n\r\n        INSERT INTO #temptable (\r\n            id\r\n            id2\r\n        )\r\n        VALUES\r\n        %1$s;  -- One or more (int, int) pairs\r\n\r\n        INSERT INTO anothertable (\r\n            --other stuff\r\n        ) VALUES (\r\n            -- values dervied from #temptable\r\n        );\r\n\r\n        INSERT INTO anothertable2 (\r\n            --other stuff\r\n        ) VALUES (\r\n            -- values dervied from #temptable\r\n        );\r\n\r\n        COMMIT TRANSACTION;\r\n        SELECT 1 AS Result;\r\n    END TRY\r\n    BEGIN CATCH\r\n        ROLLBACK TRANSACTION\r\n        SELECT 0 AS Result, ERROR_MESSAGE() AS Error;\r\n    END CATCH\r\n\r\nIn the transaction, I need to be able to do a variable number of inserts, and also return the result of the transaction.\r\n\r\nThe `%1$s` in the query string preferably something that I can feed into a `NamedParameterJdbcTemplate`, which I call in the manner of:\r\n\r\n    // parameters is a Map&lt;String, Object&gt;\r\n    jdbcTemplate.queryForList(query, parameters)\r\n\r\n\r\n1. Due to the transactional and multi-statement nature of the query, I cannot use [`batchupdate`](https://stackoverflow.com/questions/42839595/namedparameterjdbctemplate-batchupdate-vs-insert-into-select) to generate the parameterized inserts.\r\n2. Due to the specific returns that I need from the query in the case of a failure, I cannot replace the `BEGIN TRANSACTION` with a java-side `@Transactional` either.\r\n3. Due to the variable nature of the number of inserts I need to make in `%1$s`, I cannot prepare the statement with [`?`s](https://stackoverflow.com/a/32096984/1558430).\r\n\r\n\r\nHow can I best generate the values for `%1$s` in the query?","title":"Insert dynamic values into DB with NamedParameterJdbcTemplate","body":"<p>I have an MSSQL (very much simplified) query that looks like this:</p>\n<pre><code>BEGIN TRY\n    BEGIN TRANSACTION\n    IF OBJECT_ID(N\\'tempdb..#temptable\\') IS NOT NULL DROP TABLE #temptable;\n\n    CREATE TABLE #temptable (\n        id INT,\n        id2 INT\n    );\n\n    INSERT INTO #temptable (\n        id\n        id2\n    )\n    VALUES\n    %1$s;  -- One or more (int, int) pairs\n\n    INSERT INTO anothertable (\n        --other stuff\n    ) VALUES (\n        -- values dervied from #temptable\n    );\n\n    INSERT INTO anothertable2 (\n        --other stuff\n    ) VALUES (\n        -- values dervied from #temptable\n    );\n\n    COMMIT TRANSACTION;\n    SELECT 1 AS Result;\nEND TRY\nBEGIN CATCH\n    ROLLBACK TRANSACTION\n    SELECT 0 AS Result, ERROR_MESSAGE() AS Error;\nEND CATCH\n</code></pre>\n<p>In the transaction, I need to be able to do a variable number of inserts, and also return the result of the transaction.</p>\n<p>The <code>%1$s</code> in the query string preferably something that I can feed into a <code>NamedParameterJdbcTemplate</code>, which I call in the manner of:</p>\n<pre><code>// parameters is a Map&lt;String, Object&gt;\njdbcTemplate.queryForList(query, parameters)\n</code></pre>\n<ol>\n<li>Due to the transactional and multi-statement nature of the query, I cannot use <a href=\"https://stackoverflow.com/questions/42839595/namedparameterjdbctemplate-batchupdate-vs-insert-into-select\"><code>batchupdate</code></a> to generate the parameterized inserts.</li>\n<li>Due to the specific returns that I need from the query in the case of a failure, I cannot replace the <code>BEGIN TRANSACTION</code> with a java-side <code>@Transactional</code> either.</li>\n<li>Due to the variable nature of the number of inserts I need to make in <code>%1$s</code>, I cannot prepare the statement with <a href=\"https://stackoverflow.com/a/32096984/1558430\"><code>?</code>s</a>.</li>\n</ol>\n<p>How can I best generate the values for <code>%1$s</code> in the query?</p>\n"},{"tags":["java","spring-boot","spring-security"],"comments":[{"owner":{"account_id":7134819,"reputation":5058,"user_id":5454842,"display_name":"Marcus Hert da Coregio"},"score":0,"creation_date":1674668713,"post_id":75237651,"comment_id":132765530,"body_markdown":"At first, it seems that everything is fine. Please add `logging.level.org.springframework.security=TRACE` to your `application.properties` and paste the output in the question.","body":"At first, it seems that everything is fine. Please add <code>logging.level.org.springframework.security=TRACE</code> to your <code>application.properties</code> and paste the output in the question."},{"owner":{"account_id":7134819,"reputation":5058,"user_id":5454842,"display_name":"Marcus Hert da Coregio"},"score":0,"creation_date":1674680273,"post_id":75237651,"comment_id":132768942,"body_markdown":"Did you add `@EnableWebSecurity`  and `@Configuration` to your `SecurityConfiguration` class?","body":"Did you add <code>@EnableWebSecurity</code>  and <code>@Configuration</code> to your <code>SecurityConfiguration</code> class?"},{"owner":{"account_id":1074107,"reputation":238,"user_id":1072625,"display_name":"Neeraj"},"score":0,"creation_date":1674697385,"post_id":75237651,"comment_id":132772123,"body_markdown":"If you have the @Configuration on the SecurityConfig it should work, it works perfectly on my machine.. If you have more set up details please share... With above we wont be able to replicate the issue...","body":"If you have the @Configuration on the SecurityConfig it should work, it works perfectly on my machine.. If you have more set up details please share... With above we wont be able to replicate the issue..."}],"answers":[{"tags":[],"owner":{"account_id":27572615,"reputation":1,"user_id":21043500,"display_name":"anar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674752256,"creation_date":1674752256,"answer_id":75249337,"question_id":75237651,"body_markdown":"I effectively forgot @Configuration annotation on my security configuration class. With it, it works as expected.\r\n\r\nThank you all.","title":"Spring boot + security 3.0 expose public services","body":"<p>I effectively forgot @Configuration annotation on my security configuration class. With it, it works as expected.</p>\n<p>Thank you all.</p>\n"}],"owner":{"account_id":27572615,"reputation":1,"user_id":21043500,"display_name":"anar"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":552,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1674752256,"creation_date":1674667386,"question_id":75237651,"body_markdown":"I&#39;m trying to figure out how we may secure applications with spring boot.\r\n\r\nI have a very basic HelloWorld Controller, with a services is supposed to be called only by authenticated users, and one that may be called by anyone :\r\n\r\n```\r\n@RestController \r\npublic class HelloWorldController {\r\n    \r\n    private static final Logger logger = LoggerFactory.getLogger(HelloWorldController.class);\r\n    \r\n    @GetMapping(&quot;/private&quot;)\r\n    public Map&lt;String, Object&gt; securedResource() {\r\n        logger.info(&quot;Called : HelloWorldController/private&quot;);\r\n        \r\n        Map&lt;String, Object&gt; model = new HashMap&lt;String, Object&gt;();\r\n        model.put(&quot;id&quot;, UUID.randomUUID().toString());\r\n        model.put(&quot;content&quot;, &quot;Hello collection&#39;s Private World&quot;);\r\n        return model;\r\n    }\r\n    \r\n    @GetMapping(&quot;/public&quot;)\r\n    public Map&lt;String, Object&gt; publicResource() {\r\n        logger.info(&quot;Called : HelloWorldController/public&quot;);\r\n        \r\n        Map&lt;String, Object&gt; model = new HashMap&lt;String, Object&gt;();\r\n        model.put(&quot;content&quot;, &quot;You well got public resource.&quot;);\r\n        return model;\r\n    }\r\n}\r\n```\r\n\r\n\r\nFor managing my authorizations, I tried to configure it :\r\n\r\n\r\n```\r\npublic class SecurityConfiguration {\r\n\r\n\t@Bean\r\n\tpublic SecurityFilterChain configure(HttpSecurity http)  throws Exception {\r\n\t\thttp\r\n\t\t\t// Beware : order of request matchers is important.\r\n\t\t\t.authorizeHttpRequests(requests -&gt; requests\r\n\t\t\t\t// Specify that requests on &quot;/public&quot; services&#39;s pattern may be called by anyone.\r\n\t\t\t\t.requestMatchers(HttpMethod.GET, &quot;/public&quot;).permitAll()\r\n\t\t\t\t// Specify that requests on &quot;/private&quot; services&#39;s pattern may be called by any authenticated user.\r\n\t\t\t\t.requestMatchers(HttpMethod.GET, &quot;/private&quot;).authenticated()\r\n\t\t\t\t// Specify that any other requests are not allowed by anyone.\r\n\t\t\t\t.anyRequest().denyAll())\r\n\t\t\t.httpBasic();\r\n\t\t\r\n\t\treturn http.build();\r\n\t}\r\n}\r\n```\r\n\r\nI though doing so will allow unauthenticated users to call the &quot;/public&quot; service. But when I call &quot;http://localhost:8080/public&quot; from postman, I get a 401 error, and it work only if I provide credentials in Basic Auth when I call the service.\r\n\r\nPerhaps have I done something wrong ? \r\n\r\nEdit : Below are some logs when calling the service\r\n```\r\n2023-01-25T19:25:11.888+01:00  INFO 2352 --- [nio-8080-exec-3] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet &#39;dispatcherServlet&#39;\r\n2023-01-25T19:25:11.888+01:00  INFO 2352 --- [nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Initializing Servlet &#39;dispatcherServlet&#39;\r\n2023-01-25T19:25:11.889+01:00  INFO 2352 --- [nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms\r\n2023-01-25T19:25:11.895+01:00 TRACE 2352 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@8adba4e, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@37348e64, org.springframework.security.web.context.SecurityContextHolderFilter@44ab0b55, org.springframework.security.web.header.HeaderWriterFilter@26490443, org.springframework.security.web.csrf.CsrfFilter@6c3ee96d, org.springframework.security.web.authentication.logout.LogoutFilter@6b97305f, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@36d829c6, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@3894a5e1, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@56ebb12, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@44bf732c, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@44ef0221, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@18a1c2ab, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@4390a01d, org.springframework.security.web.access.ExceptionTranslationFilter@2bb41cea, org.springframework.security.web.access.intercept.AuthorizationFilter@2aaea4a6]] (1/1)\r\n2023-01-25T19:25:11.896+01:00 DEBUG 2352 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /public\r\n2023-01-25T19:25:11.897+01:00 TRACE 2352 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/15)\r\n2023-01-25T19:25:11.897+01:00 TRACE 2352 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/15)\r\n2023-01-25T19:25:11.899+01:00 TRACE 2352 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/15)\r\n2023-01-25T19:25:11.900+01:00 TRACE 2352 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/15)\r\n2023-01-25T19:25:11.901+01:00 TRACE 2352 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking CsrfFilter (5/15)\r\n2023-01-25T19:25:11.902+01:00 TRACE 2352 --- [nio-8080-exec-3] o.s.security.web.csrf.CsrfFilter         : Did not protect against CSRF since request did not match CsrfNotRequired [TRACE, HEAD, GET, OPTIONS]\r\n2023-01-25T19:25:11.902+01:00 TRACE 2352 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (6/15)\r\n2023-01-25T19:25:11.902+01:00 TRACE 2352 --- [nio-8080-exec-3] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Ant [pattern=&#39;/logout&#39;, POST]\r\n2023-01-25T19:25:11.903+01:00 TRACE 2352 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking UsernamePasswordAuthenticationFilter (7/15)\r\n2023-01-25T19:25:11.903+01:00 TRACE 2352 --- [nio-8080-exec-3] w.a.UsernamePasswordAuthenticationFilter : Did not match request to Ant [pattern=&#39;/login&#39;, POST]\r\n2023-01-25T19:25:11.905+01:00 TRACE 2352 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking DefaultLoginPageGeneratingFilter (8/15)\r\n2023-01-25T19:25:11.905+01:00 TRACE 2352 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking DefaultLogoutPageGeneratingFilter (9/15)\r\n2023-01-25T19:25:11.907+01:00 TRACE 2352 --- [nio-8080-exec-3] .w.a.u.DefaultLogoutPageGeneratingFilter : Did not render default logout page since request did not match [Ant [pattern=&#39;/logout&#39;, GET]]\r\n2023-01-25T19:25:11.909+01:00 TRACE 2352 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking BasicAuthenticationFilter (10/15)\r\n2023-01-25T19:25:11.911+01:00 TRACE 2352 --- [nio-8080-exec-3] o.s.s.w.a.www.BasicAuthenticationFilter  : Did not process authentication request since failed to find username and password in Basic Authorization header\r\n2023-01-25T19:25:11.912+01:00 TRACE 2352 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (11/15)\r\n2023-01-25T19:25:11.913+01:00 TRACE 2352 --- [nio-8080-exec-3] o.s.s.w.s.HttpSessionRequestCache        : matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided\r\n2023-01-25T19:25:11.914+01:00 TRACE 2352 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (12/15)\r\n2023-01-25T19:25:11.915+01:00 TRACE 2352 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (13/15)\r\n2023-01-25T19:25:11.916+01:00 TRACE 2352 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (14/15)\r\n2023-01-25T19:25:11.916+01:00 TRACE 2352 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (15/15)\r\n2023-01-25T19:25:11.917+01:00 TRACE 2352 --- [nio-8080-exec-3] estMatcherDelegatingAuthorizationManager : Authorizing SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@843dacb]\r\n2023-01-25T19:25:11.917+01:00 TRACE 2352 --- [nio-8080-exec-3] estMatcherDelegatingAuthorizationManager : Checking authorization on SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@843dacb] using org.springframework.security.authorization.AuthenticatedAuthorizationManager@5dd1b7b8\r\n2023-01-25T19:25:11.918+01:00 TRACE 2352 --- [nio-8080-exec-3] w.c.HttpSessionSecurityContextRepository : No HttpSession currently exists\r\n2023-01-25T19:25:11.918+01:00 TRACE 2352 --- [nio-8080-exec-3] .s.s.w.c.SupplierDeferredSecurityContext : Created SecurityContextImpl [Null authentication]\r\n2023-01-25T19:25:11.919+01:00 TRACE 2352 --- [nio-8080-exec-3] .s.s.w.c.SupplierDeferredSecurityContext : Created SecurityContextImpl [Null authentication]\r\n2023-01-25T19:25:11.921+01:00 TRACE 2352 --- [nio-8080-exec-3] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to AnonymousAuthenticationToken [Principal=anonymousUser, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ANONYMOUS]]\r\n2023-01-25T19:25:11.921+01:00 TRACE 2352 --- [nio-8080-exec-3] o.s.s.w.a.ExceptionTranslationFilter     : Sending AnonymousAuthenticationToken [Principal=anonymousUser, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ANONYMOUS]] to authentication entry point since access is denied\r\n\r\norg.springframework.security.access.AccessDeniedException: Access Denied\r\n        at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:98) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n        at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n        at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n        at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n        at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n        at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n        at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:170) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.4.jar:6.0.4]\r\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n        at org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter.doFilterInternal(DefaultLogoutPageGeneratingFilter.java:58) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.4.jar:6.0.4]\r\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n        at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:188) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n        at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:174) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n        at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n        at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n        at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n        at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n        at org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:116) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.4.jar:6.0.4]\r\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n        at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n        at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.4.jar:6.0.4]\r\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n        at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n        at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n        at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.4.jar:6.0.4]\r\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n        at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.4.jar:6.0.4]\r\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n        at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n        at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n        at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:351) ~[spring-web-6.0.4.jar:6.0.4]\r\n        at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267) ~[spring-web-6.0.4.jar:6.0.4]\r\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\r\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\r\n        at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.0.4.jar:6.0.4]\r\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.4.jar:6.0.4]\r\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\r\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\r\n        at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.0.4.jar:6.0.4]\r\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.4.jar:6.0.4]\r\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\r\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\r\n        at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.0.4.jar:6.0.4]\r\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.4.jar:6.0.4]\r\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\r\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\r\n        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:177) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\r\n        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\r\n        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\r\n        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\r\n        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\r\n        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\r\n        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\r\n        at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\r\n        at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\r\n        at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:859) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\r\n        at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1734) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\r\n        at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\r\n        at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\r\n        at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\r\n        at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\r\n        at java.base/java.lang.Thread.run(Thread.java:1589) ~[na:na]\r\n```\r\n","title":"Spring boot + security 3.0 expose public services","body":"<p>I'm trying to figure out how we may secure applications with spring boot.</p>\n<p>I have a very basic HelloWorld Controller, with a services is supposed to be called only by authenticated users, and one that may be called by anyone :</p>\n<pre><code>@RestController \npublic class HelloWorldController {\n    \n    private static final Logger logger = LoggerFactory.getLogger(HelloWorldController.class);\n    \n    @GetMapping(&quot;/private&quot;)\n    public Map&lt;String, Object&gt; securedResource() {\n        logger.info(&quot;Called : HelloWorldController/private&quot;);\n        \n        Map&lt;String, Object&gt; model = new HashMap&lt;String, Object&gt;();\n        model.put(&quot;id&quot;, UUID.randomUUID().toString());\n        model.put(&quot;content&quot;, &quot;Hello collection's Private World&quot;);\n        return model;\n    }\n    \n    @GetMapping(&quot;/public&quot;)\n    public Map&lt;String, Object&gt; publicResource() {\n        logger.info(&quot;Called : HelloWorldController/public&quot;);\n        \n        Map&lt;String, Object&gt; model = new HashMap&lt;String, Object&gt;();\n        model.put(&quot;content&quot;, &quot;You well got public resource.&quot;);\n        return model;\n    }\n}\n</code></pre>\n<p>For managing my authorizations, I tried to configure it :</p>\n<pre><code>public class SecurityConfiguration {\n\n    @Bean\n    public SecurityFilterChain configure(HttpSecurity http)  throws Exception {\n        http\n            // Beware : order of request matchers is important.\n            .authorizeHttpRequests(requests -&gt; requests\n                // Specify that requests on &quot;/public&quot; services's pattern may be called by anyone.\n                .requestMatchers(HttpMethod.GET, &quot;/public&quot;).permitAll()\n                // Specify that requests on &quot;/private&quot; services's pattern may be called by any authenticated user.\n                .requestMatchers(HttpMethod.GET, &quot;/private&quot;).authenticated()\n                // Specify that any other requests are not allowed by anyone.\n                .anyRequest().denyAll())\n            .httpBasic();\n        \n        return http.build();\n    }\n}\n</code></pre>\n<p>I though doing so will allow unauthenticated users to call the &quot;/public&quot; service. But when I call &quot;http://localhost:8080/public&quot; from postman, I get a 401 error, and it work only if I provide credentials in Basic Auth when I call the service.</p>\n<p>Perhaps have I done something wrong ?</p>\n<p>Edit : Below are some logs when calling the service</p>\n<pre><code>2023-01-25T19:25:11.888+01:00  INFO 2352 --- [nio-8080-exec-3] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'\n2023-01-25T19:25:11.888+01:00  INFO 2352 --- [nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'\n2023-01-25T19:25:11.889+01:00  INFO 2352 --- [nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms\n2023-01-25T19:25:11.895+01:00 TRACE 2352 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@8adba4e, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@37348e64, org.springframework.security.web.context.SecurityContextHolderFilter@44ab0b55, org.springframework.security.web.header.HeaderWriterFilter@26490443, org.springframework.security.web.csrf.CsrfFilter@6c3ee96d, org.springframework.security.web.authentication.logout.LogoutFilter@6b97305f, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@36d829c6, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@3894a5e1, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@56ebb12, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@44bf732c, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@44ef0221, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@18a1c2ab, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@4390a01d, org.springframework.security.web.access.ExceptionTranslationFilter@2bb41cea, org.springframework.security.web.access.intercept.AuthorizationFilter@2aaea4a6]] (1/1)\n2023-01-25T19:25:11.896+01:00 DEBUG 2352 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /public\n2023-01-25T19:25:11.897+01:00 TRACE 2352 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/15)\n2023-01-25T19:25:11.897+01:00 TRACE 2352 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/15)\n2023-01-25T19:25:11.899+01:00 TRACE 2352 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/15)\n2023-01-25T19:25:11.900+01:00 TRACE 2352 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/15)\n2023-01-25T19:25:11.901+01:00 TRACE 2352 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking CsrfFilter (5/15)\n2023-01-25T19:25:11.902+01:00 TRACE 2352 --- [nio-8080-exec-3] o.s.security.web.csrf.CsrfFilter         : Did not protect against CSRF since request did not match CsrfNotRequired [TRACE, HEAD, GET, OPTIONS]\n2023-01-25T19:25:11.902+01:00 TRACE 2352 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (6/15)\n2023-01-25T19:25:11.902+01:00 TRACE 2352 --- [nio-8080-exec-3] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Ant [pattern='/logout', POST]\n2023-01-25T19:25:11.903+01:00 TRACE 2352 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking UsernamePasswordAuthenticationFilter (7/15)\n2023-01-25T19:25:11.903+01:00 TRACE 2352 --- [nio-8080-exec-3] w.a.UsernamePasswordAuthenticationFilter : Did not match request to Ant [pattern='/login', POST]\n2023-01-25T19:25:11.905+01:00 TRACE 2352 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking DefaultLoginPageGeneratingFilter (8/15)\n2023-01-25T19:25:11.905+01:00 TRACE 2352 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking DefaultLogoutPageGeneratingFilter (9/15)\n2023-01-25T19:25:11.907+01:00 TRACE 2352 --- [nio-8080-exec-3] .w.a.u.DefaultLogoutPageGeneratingFilter : Did not render default logout page since request did not match [Ant [pattern='/logout', GET]]\n2023-01-25T19:25:11.909+01:00 TRACE 2352 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking BasicAuthenticationFilter (10/15)\n2023-01-25T19:25:11.911+01:00 TRACE 2352 --- [nio-8080-exec-3] o.s.s.w.a.www.BasicAuthenticationFilter  : Did not process authentication request since failed to find username and password in Basic Authorization header\n2023-01-25T19:25:11.912+01:00 TRACE 2352 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (11/15)\n2023-01-25T19:25:11.913+01:00 TRACE 2352 --- [nio-8080-exec-3] o.s.s.w.s.HttpSessionRequestCache        : matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided\n2023-01-25T19:25:11.914+01:00 TRACE 2352 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (12/15)\n2023-01-25T19:25:11.915+01:00 TRACE 2352 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (13/15)\n2023-01-25T19:25:11.916+01:00 TRACE 2352 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (14/15)\n2023-01-25T19:25:11.916+01:00 TRACE 2352 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (15/15)\n2023-01-25T19:25:11.917+01:00 TRACE 2352 --- [nio-8080-exec-3] estMatcherDelegatingAuthorizationManager : Authorizing SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@843dacb]\n2023-01-25T19:25:11.917+01:00 TRACE 2352 --- [nio-8080-exec-3] estMatcherDelegatingAuthorizationManager : Checking authorization on SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@843dacb] using org.springframework.security.authorization.AuthenticatedAuthorizationManager@5dd1b7b8\n2023-01-25T19:25:11.918+01:00 TRACE 2352 --- [nio-8080-exec-3] w.c.HttpSessionSecurityContextRepository : No HttpSession currently exists\n2023-01-25T19:25:11.918+01:00 TRACE 2352 --- [nio-8080-exec-3] .s.s.w.c.SupplierDeferredSecurityContext : Created SecurityContextImpl [Null authentication]\n2023-01-25T19:25:11.919+01:00 TRACE 2352 --- [nio-8080-exec-3] .s.s.w.c.SupplierDeferredSecurityContext : Created SecurityContextImpl [Null authentication]\n2023-01-25T19:25:11.921+01:00 TRACE 2352 --- [nio-8080-exec-3] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to AnonymousAuthenticationToken [Principal=anonymousUser, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ANONYMOUS]]\n2023-01-25T19:25:11.921+01:00 TRACE 2352 --- [nio-8080-exec-3] o.s.s.w.a.ExceptionTranslationFilter     : Sending AnonymousAuthenticationToken [Principal=anonymousUser, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ANONYMOUS]] to authentication entry point since access is denied\n\norg.springframework.security.access.AccessDeniedException: Access Denied\n        at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:98) ~[spring-security-web-6.0.1.jar:6.0.1]\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.1.jar:6.0.1]\n        at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126) ~[spring-security-web-6.0.1.jar:6.0.1]\n        at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120) ~[spring-security-web-6.0.1.jar:6.0.1]\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.1.jar:6.0.1]\n        at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.0.1.jar:6.0.1]\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.1.jar:6.0.1]\n        at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.0.1.jar:6.0.1]\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.1.jar:6.0.1]\n        at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.0.1.jar:6.0.1]\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.1.jar:6.0.1]\n        at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:170) ~[spring-security-web-6.0.1.jar:6.0.1]\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.4.jar:6.0.4]\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.1.jar:6.0.1]\n        at org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter.doFilterInternal(DefaultLogoutPageGeneratingFilter.java:58) ~[spring-security-web-6.0.1.jar:6.0.1]\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.4.jar:6.0.4]\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.1.jar:6.0.1]\n        at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:188) ~[spring-security-web-6.0.1.jar:6.0.1]\n        at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:174) ~[spring-security-web-6.0.1.jar:6.0.1]\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.1.jar:6.0.1]\n        at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227) ~[spring-security-web-6.0.1.jar:6.0.1]\n        at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221) ~[spring-security-web-6.0.1.jar:6.0.1]\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.1.jar:6.0.1]\n        at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.0.1.jar:6.0.1]\n        at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.0.1.jar:6.0.1]\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.1.jar:6.0.1]\n        at org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:116) ~[spring-security-web-6.0.1.jar:6.0.1]\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.4.jar:6.0.4]\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.1.jar:6.0.1]\n        at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.0.1.jar:6.0.1]\n        at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.0.1.jar:6.0.1]\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.4.jar:6.0.4]\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.1.jar:6.0.1]\n        at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.0.1.jar:6.0.1]\n        at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.0.1.jar:6.0.1]\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.1.jar:6.0.1]\n        at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.0.1.jar:6.0.1]\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.4.jar:6.0.4]\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.1.jar:6.0.1]\n        at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.0.1.jar:6.0.1]\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.4.jar:6.0.4]\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.1.jar:6.0.1]\n        at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.0.1.jar:6.0.1]\n        at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.0.1.jar:6.0.1]\n        at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:351) ~[spring-web-6.0.4.jar:6.0.4]\n        at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267) ~[spring-web-6.0.4.jar:6.0.4]\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\n        at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.0.4.jar:6.0.4]\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.4.jar:6.0.4]\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\n        at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.0.4.jar:6.0.4]\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.4.jar:6.0.4]\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\n        at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.0.4.jar:6.0.4]\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.4.jar:6.0.4]\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\n        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:177) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\n        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\n        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\n        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\n        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\n        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\n        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\n        at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\n        at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\n        at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:859) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\n        at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1734) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\n        at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\n        at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\n        at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\n        at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\n        at java.base/java.lang.Thread.run(Thread.java:1589) ~[na:na]\n</code></pre>\n"},{"tags":["java","regex"],"comments":[{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":0,"creation_date":1519267975,"post_id":48918884,"comment_id":84844078,"body_markdown":"I see a question mark but no question.","body":"I see a question mark but no question."},{"owner":{"account_id":4225251,"reputation":2272,"user_id":3458919,"accept_rate":55,"display_name":"Balwinder Singh"},"score":0,"creation_date":1519268018,"post_id":48918884,"comment_id":84844096,"body_markdown":"Whats the question exactly?","body":"Whats the question exactly?"},{"owner":{"account_id":11893015,"reputation":35,"user_id":8703270,"display_name":"Ezell Buoee"},"score":0,"creation_date":1519268083,"post_id":48918884,"comment_id":84844114,"body_markdown":"you mean in the regex ?","body":"you mean in the regex ?"},{"owner":{"account_id":11893015,"reputation":35,"user_id":8703270,"display_name":"Ezell Buoee"},"score":0,"creation_date":1519268187,"post_id":48918884,"comment_id":84844131,"body_markdown":"@BalwinderSingh i will edit the question to make it more clearer, the question is how can i generate a string from regex correctly.","body":"@BalwinderSingh i will edit the question to make it more clearer, the question is how can i generate a string from regex correctly."},{"owner":{"account_id":2673407,"reputation":44640,"user_id":2310289,"display_name":"Scary Wombat"},"score":1,"creation_date":1519268421,"post_id":48918884,"comment_id":84844206,"body_markdown":"@shmosel *I see a question mark* I see three","body":"@shmosel <i>I see a question mark</i> I see three"},{"owner":{"account_id":6512643,"reputation":3777,"user_id":5039394,"display_name":"Keerthana Prabhakaran"},"score":0,"creation_date":1519268595,"post_id":48918884,"comment_id":84844251,"body_markdown":"Possible duplicate of [Using Regex to generate Strings rather than match them](https://stackoverflow.com/questions/22115/using-regex-to-generate-strings-rather-than-match-them)","body":"Possible duplicate of <a href=\"https://stackoverflow.com/questions/22115/using-regex-to-generate-strings-rather-than-match-them\">Using Regex to generate Strings rather than match them</a>"},{"owner":{"account_id":11893015,"reputation":35,"user_id":8703270,"display_name":"Ezell Buoee"},"score":0,"creation_date":1519269607,"post_id":48918884,"comment_id":84844474,"body_markdown":"@KeerthanaPrabhakaran it isn&#39;t really a duplicate, the suggession from that question doesn&#39;t work for me, They did advise using Xeger/Generex","body":"@KeerthanaPrabhakaran it isn&#39;t really a duplicate, the suggession from that question doesn&#39;t work for me, They did advise using Xeger/Generex"},{"owner":{"account_id":120028,"reputation":35734,"user_id":312172,"accept_rate":86,"display_name":"user unknown"},"score":0,"creation_date":1519271139,"post_id":48918884,"comment_id":84844859,"body_markdown":"Might be a good fit for CodeGolf like here: https://codegolf.stackexchange.com/q/156315/373 - maybe not welcomed, if you don&#39;t have a solution, just ask on meta. I would try the usual way: Didivide and impera. Solve subexpressions, than bigger expressions. Maybe a combination of analisis and brute forcing?","body":"Might be a good fit for CodeGolf like here: <a href=\"https://codegolf.stackexchange.com/q/156315/373\">codegolf.stackexchange.com/q/156315/373</a> - maybe not welcomed, if you don&#39;t have a solution, just ask on meta. I would try the usual way: Didivide and impera. Solve subexpressions, than bigger expressions. Maybe a combination of analisis and brute forcing?"},{"owner":{"account_id":4225251,"reputation":2272,"user_id":3458919,"accept_rate":55,"display_name":"Balwinder Singh"},"score":0,"creation_date":1519276645,"post_id":48918884,"comment_id":84846534,"body_markdown":"Have you looked at https://stackoverflow.com/questions/22115/using-regex-to-generate-strings-rather-than-match-them? Why Generex/Xeger isn&#39;t working for you?","body":"Have you looked at <a href=\"https://stackoverflow.com/questions/22115/using-regex-to-generate-strings-rather-than-match-them\" title=\"using regex to generate strings rather than match them\">stackoverflow.com/questions/22115/&hellip;</a>? Why Generex/Xeger isn&#39;t working for you?"},{"owner":{"account_id":11893015,"reputation":35,"user_id":8703270,"display_name":"Ezell Buoee"},"score":0,"creation_date":1519281044,"post_id":48918884,"comment_id":84848185,"body_markdown":"yes, Generex works with more simpler format of regex rather than the complicated onces, the two examples above is kinda complicated, but those regex isn&#39;t decided by me, so there is no way i can modify it","body":"yes, Generex works with more simpler format of regex rather than the complicated onces, the two examples above is kinda complicated, but those regex isn&#39;t decided by me, so there is no way i can modify it"},{"owner":{"account_id":3731798,"reputation":5057,"user_id":3103891,"display_name":"GalAbra"},"score":0,"creation_date":1519289695,"post_id":48918884,"comment_id":84852573,"body_markdown":"Xeger works for me with the regular expressions you&#39;ve provided","body":"Xeger works for me with the regular expressions you&#39;ve provided"},{"owner":{"account_id":11893015,"reputation":35,"user_id":8703270,"display_name":"Ezell Buoee"},"score":0,"creation_date":1519353359,"post_id":48918884,"comment_id":84887607,"body_markdown":"@G i tried using it, but it&#39;s generation some characters that isn&#39;t recognize and after validating with my PatternMatcher component return false","body":"@G i tried using it, but it&#39;s generation some characters that isn&#39;t recognize and after validating with my PatternMatcher component return false"}],"owner":{"account_id":11893015,"reputation":35,"user_id":8703270,"display_name":"Ezell Buoee"},"comment_count":12,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1362,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":0,"score":1,"last_activity_date":1674752019,"creation_date":1519267906,"question_id":48918884,"body_markdown":"am currently trying to generate a string that matches a given regex, I&#39;ve been working on this for few days without good solution. I tried using the Generex library which works find until i put in some more complicated regex like this \r\n\r\n`&quot;^((\\w+([-+.]\\w+)*@\\w+([-.]\\w+)*\\.\\w+([-.]\\w+)*)\\s*[;]{0,1}\\s*)+$&quot;` \r\n\r\nor \r\n\r\n`&quot;(?:(NGN|USA|TWN|IND|VN)\\h*,?\\h*(?!.*\\1))+&quot;`, \r\n\r\nthis have proven to be the biggest issue I&#39;ve encountered in Software Engineering Field.\r\n\r\nThe question is how can i generate random matching String from Regex correctly.\r\n\r\nNOTE: https://stackoverflow.com/questions/22115/using-regex-to-generate-strings-rather-than-match-them doesn&#39;t work for me, Generex works with more simpler format of regex rather than the complicated onces, the two examples above is kinda complicated, but those regex isn&#39;t decided by me, so there is no way i can modify it.","title":"How to generate a random String from a Regex?","body":"<p>am currently trying to generate a string that matches a given regex, I've been working on this for few days without good solution. I tried using the Generex library which works find until i put in some more complicated regex like this </p>\n\n<p><code>\"^((\\w+([-+.]\\w+)*@\\w+([-.]\\w+)*\\.\\w+([-.]\\w+)*)\\s*[;]{0,1}\\s*)+$\"</code> </p>\n\n<p>or </p>\n\n<p><code>\"(?:(NGN|USA|TWN|IND|VN)\\h*,?\\h*(?!.*\\1))+\"</code>, </p>\n\n<p>this have proven to be the biggest issue I've encountered in Software Engineering Field.</p>\n\n<p>The question is how can i generate random matching String from Regex correctly.</p>\n\n<p>NOTE: <a href=\"https://stackoverflow.com/questions/22115/using-regex-to-generate-strings-rather-than-match-them\">Using Regex to generate Strings rather than match them</a> doesn't work for me, Generex works with more simpler format of regex rather than the complicated onces, the two examples above is kinda complicated, but those regex isn't decided by me, so there is no way i can modify it.</p>\n"},{"tags":["java","rest","jax-rs","hibernate-validator"],"answers":[{"tags":[],"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674751997,"creation_date":1674751997,"answer_id":75249287,"question_id":75246849,"body_markdown":"Your `javax.ws.rs-api` dependency is not marked as provided. That means that it gets bundled into your application. The `@Provider` annotation on your class is the bundled one, but it&#39;s not the one JBoss is looking for - that&#39;s the one provided by JBoss.\r\n\r\nAny APIs from Java/Jakarta EE should be marked as provided when you&#39;re working with JBoss, WildFly, GlassFish, or other JEE containers. In your case that&#39;s not just `javax.ws.rs-api` but also `jaxb-api`. I think that the same holds for `resteasy-hibernatevalidator-provider`. I expected the same for `rt` but apparently you&#39;re getting errors without it.","title":"jax-rs @.Provider is not being called","body":"<p>Your <code>javax.ws.rs-api</code> dependency is not marked as provided. That means that it gets bundled into your application. The <code>@Provider</code> annotation on your class is the bundled one, but it's not the one JBoss is looking for - that's the one provided by JBoss.</p>\n<p>Any APIs from Java/Jakarta EE should be marked as provided when you're working with JBoss, WildFly, GlassFish, or other JEE containers. In your case that's not just <code>javax.ws.rs-api</code> but also <code>jaxb-api</code>. I think that the same holds for <code>resteasy-hibernatevalidator-provider</code>. I expected the same for <code>rt</code> but apparently you're getting errors without it.</p>\n"}],"owner":{"account_id":2174240,"reputation":1419,"user_id":1925356,"accept_rate":33,"display_name":"Alex Mi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":337,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1674751997,"creation_date":1674740079,"question_id":75246849,"body_markdown":"I have a RESTfull JAX-RS , which uses a custom @Provider for exception handling, which looks as follows:\r\n\r\n    @Provider\r\n    public class ValidationExceptionHandler implements ExceptionMapper&lt;MethodConstraintViolationException&gt; {\r\n    \t@Override\r\n    \tpublic Response toResponse(MethodConstraintViolationException exception) {\r\n                // some code here\r\n    \t\t\treturn Response.status(Status.OK).entity(claimWithPaymentResponse).build();\r\n    \t}\r\n    }\r\n\r\nThis provider used to work OK, when my application run under JBoss 6 EAP and Java 7. However, since upgrading to JBoss 7 EAP with JDK 11 and updating the required dependencies in my pom.xml, this Provider is not called at all.\r\n\r\nThis is an excerpt from my pom.xml with the relvant frameworks:\r\n\r\n    \t\t&lt;dependency&gt;\r\n\t\t\t\t&lt;groupId&gt;javax.validation&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;validation-api&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;1.0.0.GA&lt;/version&gt;\r\n\t\t\t\t&lt;scope&gt;provided&lt;/scope&gt;\r\n\t\t\t&lt;/dependency&gt;\r\n\t\t\t&lt;dependency&gt;\r\n\t\t\t\t&lt;groupId&gt;org.jboss.resteasy&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;resteasy-jaxrs&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;2.3.6.Final&lt;/version&gt;\r\n\t\t\t\t&lt;scope&gt;provided&lt;/scope&gt;\r\n\t\t\t&lt;/dependency&gt;\r\n\t\t\t&lt;!-- https://mvnrepository.com/artifact/javax.ws.rs/javax.ws.rs-api --&gt;\r\n\t\t\t&lt;dependency&gt;\r\n\t\t\t\t&lt;groupId&gt;javax.ws.rs&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;javax.ws.rs-api&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;2.1.1&lt;/version&gt;\r\n\t\t\t&lt;/dependency&gt;\r\n\t\t\t&lt;dependency&gt;\r\n\t\t\t\t&lt;groupId&gt;org.jboss.resteasy&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;resteasy-hibernatevalidator-provider&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;2.3.6.Final&lt;/version&gt;\r\n\t\t\t&lt;/dependency&gt;\r\n\t\t\t&lt;dependency&gt; &lt;!-- vpc9528, 2022-07-14, P1681-311 fixed &quot;Provider com.sun.xml.internal.ws.spi.ProviderImpl not found&quot;, @see https://stackoverflow.com/questions/54032558/jdk-11-jax-ws-provider-com-sun-xml-internal-ws-spi-providerimpl-not-found --&gt;\r\n\t\t\t\t&lt;groupId&gt;com.sun.xml.ws&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;rt&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;2.3.3&lt;/version&gt;\r\n\t\t\t&lt;/dependency&gt;\r\n\t\t\t&lt;dependency&gt;\r\n\t\t\t\t&lt;groupId&gt;javax.xml.bind&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;jaxb-api&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;2.3.1&lt;/version&gt;\r\n\t\t\t&lt;/dependency&gt;\r\n\t\t\t&lt;dependency&gt;\r\n\t\t\t\t&lt;groupId&gt;javax.xml.ws&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;jaxws-api&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;2.3.1&lt;/version&gt;\r\n\t\t\t&lt;/dependency&gt;\r\n\t\t\t&lt;dependency&gt;\r\n\t\t\t\t&lt;groupId&gt;javax.jws&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;javax.jws-api&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;1.1&lt;/version&gt;\r\n\t\t\t&lt;/dependency&gt;\r\n\t\t\t&lt;dependency&gt;\r\n\r\n","title":"jax-rs @.Provider is not being called","body":"<p>I have a RESTfull JAX-RS , which uses a custom @Provider for exception handling, which looks as follows:</p>\n<pre><code>@Provider\npublic class ValidationExceptionHandler implements ExceptionMapper&lt;MethodConstraintViolationException&gt; {\n    @Override\n    public Response toResponse(MethodConstraintViolationException exception) {\n            // some code here\n            return Response.status(Status.OK).entity(claimWithPaymentResponse).build();\n    }\n}\n</code></pre>\n<p>This provider used to work OK, when my application run under JBoss 6 EAP and Java 7. However, since upgrading to JBoss 7 EAP with JDK 11 and updating the required dependencies in my pom.xml, this Provider is not called at all.</p>\n<p>This is an excerpt from my pom.xml with the relvant frameworks:</p>\n<pre><code>        &lt;dependency&gt;\n            &lt;groupId&gt;javax.validation&lt;/groupId&gt;\n            &lt;artifactId&gt;validation-api&lt;/artifactId&gt;\n            &lt;version&gt;1.0.0.GA&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.jboss.resteasy&lt;/groupId&gt;\n            &lt;artifactId&gt;resteasy-jaxrs&lt;/artifactId&gt;\n            &lt;version&gt;2.3.6.Final&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;!-- https://mvnrepository.com/artifact/javax.ws.rs/javax.ws.rs-api --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.ws.rs&lt;/groupId&gt;\n            &lt;artifactId&gt;javax.ws.rs-api&lt;/artifactId&gt;\n            &lt;version&gt;2.1.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.jboss.resteasy&lt;/groupId&gt;\n            &lt;artifactId&gt;resteasy-hibernatevalidator-provider&lt;/artifactId&gt;\n            &lt;version&gt;2.3.6.Final&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt; &lt;!-- vpc9528, 2022-07-14, P1681-311 fixed &quot;Provider com.sun.xml.internal.ws.spi.ProviderImpl not found&quot;, @see https://stackoverflow.com/questions/54032558/jdk-11-jax-ws-provider-com-sun-xml-internal-ws-spi-providerimpl-not-found --&gt;\n            &lt;groupId&gt;com.sun.xml.ws&lt;/groupId&gt;\n            &lt;artifactId&gt;rt&lt;/artifactId&gt;\n            &lt;version&gt;2.3.3&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.xml.bind&lt;/groupId&gt;\n            &lt;artifactId&gt;jaxb-api&lt;/artifactId&gt;\n            &lt;version&gt;2.3.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.xml.ws&lt;/groupId&gt;\n            &lt;artifactId&gt;jaxws-api&lt;/artifactId&gt;\n            &lt;version&gt;2.3.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.jws&lt;/groupId&gt;\n            &lt;artifactId&gt;javax.jws-api&lt;/artifactId&gt;\n            &lt;version&gt;1.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n</code></pre>\n"},{"tags":["java","git","spring-boot"],"answers":[{"tags":[],"owner":{"account_id":1916554,"reputation":714,"user_id":1729034,"display_name":"ithinkisam"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1587998192,"creation_date":1587998192,"answer_id":61461320,"question_id":61458033,"body_markdown":"The last entry in your stack trace shows an invalid resource location.\r\n\r\n`java.lang.IllegalStateException: No directory at file:///C:lenovo G50git-localconfig-repo/limits-service.properties`\r\n\r\nSince this is running within a JVM, you don&#39;t need to use backslashes in the path. In this instance, the backslashes are being used to escape the character immediately following the slash. Change the backslashes to forward slashes and that should get you past this error. This isn&#39;t directly related to getting a config server up and running, so no guarantees that this will fix all your problems.\r\n\r\nAlso, best to format your stack trace as code to make it more readable for other users.","title":"connecting spring cloud config server to local git repo failed","body":"<p>The last entry in your stack trace shows an invalid resource location.</p>\n\n<p><code>java.lang.IllegalStateException: No directory at file:///C:lenovo G50git-localconfig-repo/limits-service.properties</code></p>\n\n<p>Since this is running within a JVM, you don't need to use backslashes in the path. In this instance, the backslashes are being used to escape the character immediately following the slash. Change the backslashes to forward slashes and that should get you past this error. This isn't directly related to getting a config server up and running, so no guarantees that this will fix all your problems.</p>\n\n<p>Also, best to format your stack trace as code to make it more readable for other users.</p>\n"},{"tags":[],"owner":{"account_id":18998523,"reputation":11,"user_id":13866367,"display_name":"Lakshay Sehgal"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1593907420,"creation_date":1593890775,"answer_id":62733520,"question_id":61458033,"body_markdown":"Remove all the backslashes from location path also and replace this with forward slash. Always remember to use `file://` before location path.\r\n\r\nE.g.: `file://C:/Users/google/Desktop/SpringLearning/Mocroservice_new_June/git-localconfig-repo`\r\n\r\nTry like this","title":"connecting spring cloud config server to local git repo failed","body":"<p>Remove all the backslashes from location path also and replace this with forward slash. Always remember to use <code>file://</code> before location path.</p>\n<p>E.g.: <code>file://C:/Users/google/Desktop/SpringLearning/Mocroservice_new_June/git-localconfig-repo</code></p>\n<p>Try like this</p>\n"},{"tags":[],"owner":{"account_id":18896655,"reputation":1,"user_id":13785666,"display_name":"Pavan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1595790557,"creation_date":1595788929,"answer_id":63104226,"question_id":61458033,"body_markdown":"You should remove `file://` and try like this:\r\n\r\n    C:/lenovo G50/git-localconfig-repo/","title":"connecting spring cloud config server to local git repo failed","body":"<p>You should remove <code>file://</code> and try like this:</p>\n<pre><code>C:/lenovo G50/git-localconfig-repo/\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8742947,"reputation":1,"user_id":6539406,"display_name":"Pankaj Vyas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1629104317,"creation_date":1611381659,"answer_id":65856213,"question_id":61458033,"body_markdown":"There should not be any space in the file names.\r\n\r\nRemove the space, change the folder name from &quot;lenovo G50&quot; to &quot;lenovo_G50&quot; and is not required to point to the properties files that it picked up from URL which is been used.\r\n\r\nUse below uri after removing the space:\r\n```text\r\nspring.cloud.config.server.git.uri=C:/lenovo_G50/git-localconfig-repo\r\n```","title":"connecting spring cloud config server to local git repo failed","body":"<p>There should not be any space in the file names.</p>\n<p>Remove the space, change the folder name from &quot;lenovo G50&quot; to &quot;lenovo_G50&quot; and is not required to point to the properties files that it picked up from URL which is been used.</p>\n<p>Use below uri after removing the space:</p>\n<pre><code>spring.cloud.config.server.git.uri=C:/lenovo_G50/git-localconfig-repo\n</code></pre>\n"},{"tags":[],"owner":{"account_id":21330074,"reputation":21,"user_id":15701979,"display_name":"chandra c"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1619183351,"creation_date":1618900395,"answer_id":67173657,"question_id":61458033,"body_markdown":"Replace application.properties:\r\n\r\n    spring.cloud.config.server.git.uri=file:///C:\\lenovo G50\\git-localconfig-repo/limits-service.properties\r\n\r\nwith \r\n\r\n    spring.cloud.config.server.git.uri=file://C:/lenovo G50/git-localconfig-repo\r\n\r\n![Check out this configuration for your reference][1]\r\n\r\n\r\n![check this output for your reference][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/R02Yi.png\r\n  [2]: https://i.stack.imgur.com/IU63p.png","title":"connecting spring cloud config server to local git repo failed","body":"<p>Replace application.properties:</p>\n<pre><code>spring.cloud.config.server.git.uri=file:///C:\\lenovo G50\\git-localconfig-repo/limits-service.properties\n</code></pre>\n<p>with</p>\n<pre><code>spring.cloud.config.server.git.uri=file://C:/lenovo G50/git-localconfig-repo\n</code></pre>\n<p><img src=\"https://i.stack.imgur.com/R02Yi.png\" alt=\"Check out this configuration for your reference\" /></p>\n<p><img src=\"https://i.stack.imgur.com/IU63p.png\" alt=\"check this output for your reference\" /></p>\n"},{"tags":[],"owner":{"account_id":4909492,"reputation":71,"user_id":3955182,"display_name":"Janardhan Maithil"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1629098853,"creation_date":1629048480,"answer_id":68793859,"question_id":61458033,"body_markdown":"I hope you would have gotten the answer by now.\r\nFaced same problem myself. Figured the exception say \r\n\r\n&gt; No directory at file\r\n\r\nthat means you are not providing the directory instead providing the path to file:\r\n```text\r\nfile:///C:\\lenovo G50\\git-localconfig-repo/limits-service.properties\r\n```\r\n\r\nJust Remove the file from the path:\r\n```text\r\nfile:///C:\\lenovo G50\\git-localconfig-repo/\r\n```\r\n\r\nCheers!","title":"connecting spring cloud config server to local git repo failed","body":"<p>I hope you would have gotten the answer by now.\nFaced same problem myself. Figured the exception say</p>\n<blockquote>\n<p>No directory at file</p>\n</blockquote>\n<p>that means you are not providing the directory instead providing the path to file:</p>\n<pre><code>file:///C:\\lenovo G50\\git-localconfig-repo/limits-service.properties\n</code></pre>\n<p>Just Remove the file from the path:</p>\n<pre><code>file:///C:\\lenovo G50\\git-localconfig-repo/\n</code></pre>\n<p>Cheers!</p>\n"},{"tags":[],"owner":{"account_id":7085635,"reputation":1,"user_id":5422527,"display_name":"user5422527"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649478453,"creation_date":1649478453,"answer_id":71805245,"question_id":61458033,"body_markdown":"windows it says to put \\ but I replaced it with / it works for me. \r\nlike \r\n\r\nspring.cloud.config.server.git.uri=file:///D:\\Programming\\git-localconfig-repo\r\n\r\nI got the same error I revert it and it works :) \r\n\r\nserver.port=8888\r\n\r\nspring.cloud.config.server.git.uri=file:///D:/Programming/git-localconfig-repo","title":"connecting spring cloud config server to local git repo failed","body":"<p>windows it says to put \\ but I replaced it with / it works for me.\nlike</p>\n<p>spring.cloud.config.server.git.uri=file:///D:\\Programming\\git-localconfig-repo</p>\n<p>I got the same error I revert it and it works :)</p>\n<p>server.port=8888</p>\n<p>spring.cloud.config.server.git.uri=file:///D:/Programming/git-localconfig-repo</p>\n"},{"tags":[],"owner":{"account_id":17059330,"reputation":81,"user_id":12343139,"display_name":"Edward795"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674302682,"creation_date":1674302682,"answer_id":75193177,"question_id":61458033,"body_markdown":"&lt;h3&gt;This has nothing to do with java or spring framework,it completely depends on your os (development environment) -&gt; Windows/Mac/Linux&lt;/h3&gt;\r\n\r\n&lt;p&gt;For windows i used the path syntax as below &amp; everything worked out perfectly:&lt;/p&gt;\r\n\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n  \r\n    spring.application.name=spring-cloud-config-server\r\n    server.port=8888\r\n    spring.cloud.config.server.git.uri=E:\\\\__WORKSPACE__\\\\MICROSERVICES\\\\git-local-config\r\n   \r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n","title":"connecting spring cloud config server to local git repo failed","body":"<h3>This has nothing to do with java or spring framework,it completely depends on your os (development environment) -> Windows/Mac/Linux</h3>\n<p>For windows i used the path syntax as below & everything worked out perfectly:</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>  \nspring.application.name=spring-cloud-config-server\nserver.port=8888\nspring.cloud.config.server.git.uri=E:\\\\__WORKSPACE__\\\\MICROSERVICES\\\\git-local-config\n   </code></pre>\r\n</div>\r\n</div>\r\n</p>\n"},{"tags":[],"owner":{"account_id":27598970,"reputation":1,"user_id":21064600,"display_name":"Aishwarya"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674558690,"creation_date":1674466638,"answer_id":75207684,"question_id":61458033,"body_markdown":"If you are on windows make sure you are using the correct formats. These formats always work for me.\r\n```\r\nspring.cloud.config.server.git.uri=file:\\\\\\C:/lenovo G50/git-localconfig-repo\r\n\r\nspring.cloud.config.server.git.uri=file:///C:/lenovo G50/git-localconfig-repo\r\n```\r\nHope this helps.","title":"connecting spring cloud config server to local git repo failed","body":"<p>If you are on windows make sure you are using the correct formats. These formats always work for me.</p>\n<pre><code>spring.cloud.config.server.git.uri=file:\\\\\\C:/lenovo G50/git-localconfig-repo\n\nspring.cloud.config.server.git.uri=file:///C:/lenovo G50/git-localconfig-repo\n</code></pre>\n<p>Hope this helps.</p>\n"}],"owner":{"account_id":18419016,"reputation":21,"user_id":13417162,"display_name":"Naga"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2202,"favorite_count":0,"down_vote_count":2,"up_vote_count":2,"answer_count":9,"score":0,"last_activity_date":1674751650,"creation_date":1587987513,"question_id":61458033,"body_markdown":"When I hit http://localhost:8888/limits-service/default I&#39;m getting:\r\n\r\n&lt;!-- language: none --&gt;\r\n\r\n    This application has no explicit mapping for /error, so you are seeing this as a fallback.\r\n    \r\n    Mon Apr 27 16:40:38 IST 2020\r\n    There was an unexpected error (type=Internal Server Error, status=500).\r\n    Cannot load environment\r\n    java.lang.IllegalStateException: Cannot load environment\r\n    \tat org.springframework.cloud.config.server.environment.JGitEnvironmentRepository.refresh(JGitEnvironmentRepository.java:299)\r\n    \tat org.springframework.cloud.config.server.environment.JGitEnvironmentRepository.getLocations(JGitEnvironmentRepository.java:246)\r\n    \tat org.springframework.cloud.config.server.environment.MultipleJGitEnvironmentRepository.getLocations(MultipleJGitEnvironmentRepository.java:146)\r\n    \tat org.springframework.cloud.config.server.environment.AbstractScmEnvironmentRepository.findOne(AbstractScmEnvironmentRepository.java:57)\r\n    \tat org.springframework.cloud.config.server.environment.MultipleJGitEnvironmentRepository.findOne(MultipleJGitEnvironmentRepository.java:187)\r\n    \tat org.springframework.cloud.config.server.environment.CompositeEnvironmentRepository.findOne(CompositeEnvironmentRepository.java:58)\r\n    \tat org.springframework.cloud.config.server.environment.EnvironmentEncryptorEnvironmentRepository.findOne(EnvironmentEncryptorEnvironmentRepository.java:61)\r\n    \tat org.springframework.cloud.config.server.environment.EnvironmentController.getEnvironment(EnvironmentController.java:136)\r\n    \tat org.springframework.cloud.config.server.environment.EnvironmentController.defaultLabel(EnvironmentController.java:108)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n    \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \tat java.lang.reflect.Method.invoke(Method.java:498)\r\n    \tat org.springframework.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:282)\r\n    \tat org.springframework.cloud.context.scope.GenericScope$LockedScopedProxyFactoryBean.invoke(GenericScope.java:499)\r\n    \tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n    \tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749)\r\n    \tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:691)\r\n    \tat org.springframework.cloud.config.server.environment.EnvironmentController$$EnhancerBySpringCGLIB$$61a7f28e.defaultLabel(&lt;generated&gt;)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n    \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \tat java.lang.reflect.Method.invoke(Method.java:498)\r\n    \tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:190)\r\n    \tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:138)\r\n    \tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:105)\r\n    \tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:879)\r\n    \tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:793)\r\n    \tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n    \tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1040)\r\n    \tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:943)\r\n    \tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)\r\n    \tat org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898)\r\n    \tat javax.servlet.http.HttpServlet.service(HttpServlet.java:634)\r\n    \tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)\r\n    \tat javax.servlet.http.HttpServlet.service(HttpServlet.java:741)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\r\n    \tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\r\n    \tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\r\n    \tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\r\n    \tat org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:109)\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\r\n    \tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\r\n    \tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)\r\n    \tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96)\r\n    \tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541)\r\n    \tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:139)\r\n    \tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n    \tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)\r\n    \tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)\r\n    \tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:373)\r\n    \tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n    \tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:868)\r\n    \tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1594)\r\n    \tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\r\n    \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n    \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n    \tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n    \tat java.lang.Thread.run(Thread.java:748)\r\n    Caused by: java.lang.IllegalStateException: No directory at file:///C:lenovo G50git-localconfig-repo/limits-service.properties\r\n    \tat org.springframework.util.Assert.state(Assert.java:73)\r\n    \tat org.springframework.cloud.config.server.environment.JGitEnvironmentRepository.copyFromLocalRepository(JGitEnvironmentRepository.java:576)\r\n    \tat org.springframework.cloud.config.server.environment.JGitEnvironmentRepository.copyRepository(JGitEnvironmentRepository.java:561)\r\n    \tat org.springframework.cloud.config.server.environment.JGitEnvironmentRepository.createGitClient(JGitEnvironmentRepository.java:547)\r\n    \tat org.springframework.cloud.config.server.environment.JGitEnvironmentRepository.refresh(JGitEnvironmentRepository.java:268)\r\n    \t... 72 more\r\n\r\n\r\nThis is my application.properties file:\r\n\r\n    spring.application.name=spring-cloud-config-server\r\n    server.port=8888\r\n    spring.cloud.config.server.git.uri=file:///C:\\lenovo G50\\git-localconfig-repo/limits-service.properties\r\n\r\nThis is the my local git repo file:\r\n\r\n    limits-service.minimum=8\r\n    limits-service.maximum=888\r\n\r\n\r\nThis is my main class:\r\n\r\n    package com.in28minutes.microservices.springcloudconfigserver;\r\n\r\n    import org.springframework.boot.SpringApplication;\r\n    import org.springframework.boot.autoconfigure.SpringBootApplication;\r\n    import org.springframework.cloud.config.server.EnableConfigServer;\r\n    \r\n    @EnableConfigServer\r\n    @SpringBootApplication\r\n    public class SpringCloudConfigServerApplication {\r\n        public static void main(String[] args) {\r\n            SpringApplication.run(SpringCloudConfigServerApplication.class, args);\r\n    \t}\r\n    }\r\n\r\nPlease help me to fix this.\r\n","title":"connecting spring cloud config server to local git repo failed","body":"<p>When I hit <a href=\"http://localhost:8888/limits-service/default\" rel=\"nofollow noreferrer\">http://localhost:8888/limits-service/default</a> I'm getting:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>This application has no explicit mapping for /error, so you are seeing this as a fallback.\n\nMon Apr 27 16:40:38 IST 2020\nThere was an unexpected error (type=Internal Server Error, status=500).\nCannot load environment\njava.lang.IllegalStateException: Cannot load environment\n    at org.springframework.cloud.config.server.environment.JGitEnvironmentRepository.refresh(JGitEnvironmentRepository.java:299)\n    at org.springframework.cloud.config.server.environment.JGitEnvironmentRepository.getLocations(JGitEnvironmentRepository.java:246)\n    at org.springframework.cloud.config.server.environment.MultipleJGitEnvironmentRepository.getLocations(MultipleJGitEnvironmentRepository.java:146)\n    at org.springframework.cloud.config.server.environment.AbstractScmEnvironmentRepository.findOne(AbstractScmEnvironmentRepository.java:57)\n    at org.springframework.cloud.config.server.environment.MultipleJGitEnvironmentRepository.findOne(MultipleJGitEnvironmentRepository.java:187)\n    at org.springframework.cloud.config.server.environment.CompositeEnvironmentRepository.findOne(CompositeEnvironmentRepository.java:58)\n    at org.springframework.cloud.config.server.environment.EnvironmentEncryptorEnvironmentRepository.findOne(EnvironmentEncryptorEnvironmentRepository.java:61)\n    at org.springframework.cloud.config.server.environment.EnvironmentController.getEnvironment(EnvironmentController.java:136)\n    at org.springframework.cloud.config.server.environment.EnvironmentController.defaultLabel(EnvironmentController.java:108)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at org.springframework.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:282)\n    at org.springframework.cloud.context.scope.GenericScope$LockedScopedProxyFactoryBean.invoke(GenericScope.java:499)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749)\n    at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:691)\n    at org.springframework.cloud.config.server.environment.EnvironmentController$$EnhancerBySpringCGLIB$$61a7f28e.defaultLabel(&lt;generated&gt;)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:190)\n    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:138)\n    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:105)\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:879)\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:793)\n    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\n    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1040)\n    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:943)\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)\n    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:634)\n    at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:741)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\n    at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\n    at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\n    at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\n    at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:109)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\n    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96)\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541)\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:139)\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)\n    at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:373)\n    at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\n    at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:868)\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1594)\n    at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\n    at java.lang.Thread.run(Thread.java:748)\nCaused by: java.lang.IllegalStateException: No directory at file:///C:lenovo G50git-localconfig-repo/limits-service.properties\n    at org.springframework.util.Assert.state(Assert.java:73)\n    at org.springframework.cloud.config.server.environment.JGitEnvironmentRepository.copyFromLocalRepository(JGitEnvironmentRepository.java:576)\n    at org.springframework.cloud.config.server.environment.JGitEnvironmentRepository.copyRepository(JGitEnvironmentRepository.java:561)\n    at org.springframework.cloud.config.server.environment.JGitEnvironmentRepository.createGitClient(JGitEnvironmentRepository.java:547)\n    at org.springframework.cloud.config.server.environment.JGitEnvironmentRepository.refresh(JGitEnvironmentRepository.java:268)\n    ... 72 more\n</code></pre>\n\n<p>This is my application.properties file:</p>\n\n<pre><code>spring.application.name=spring-cloud-config-server\nserver.port=8888\nspring.cloud.config.server.git.uri=file:///C:\\lenovo G50\\git-localconfig-repo/limits-service.properties\n</code></pre>\n\n<p>This is the my local git repo file:</p>\n\n<pre><code>limits-service.minimum=8\nlimits-service.maximum=888\n</code></pre>\n\n<p>This is my main class:</p>\n\n<pre><code>package com.in28minutes.microservices.springcloudconfigserver;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.cloud.config.server.EnableConfigServer;\n\n@EnableConfigServer\n@SpringBootApplication\npublic class SpringCloudConfigServerApplication {\n    public static void main(String[] args) {\n        SpringApplication.run(SpringCloudConfigServerApplication.class, args);\n    }\n}\n</code></pre>\n\n<p>Please help me to fix this.</p>\n"},{"tags":["java","excel","selenium","html-table","cucumber"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1674807443,"post_id":75249211,"comment_id":132795832,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."}],"owner":{"account_id":27628529,"reputation":11,"user_id":21088046,"display_name":"Michelle"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1674751646,"creation_date":1674751646,"question_id":75249211,"body_markdown":"### **Html table data**\r\n\r\n| Field | Value |\r\n| --- | --- |\r\n| account no | 127993388 |\r\n| name | Derek |\r\n| location | London |\r\n| credit date | 01/22/2023 |\r\n| amount | 168637286.367 |\r\n\r\n### **Excel sheet data**\r\n\r\n| Account no | name | location | credit date | amount |\r\n| --- | --- | --- | --- | --- |\r\n| 127993388 | Derek | London | 01/22/2023 | 168637286.367 |","title":"How can i compare my HTML table data with excel sheet using selenium java,","body":"<h3><strong>Html table data</strong></h3>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th>Field</th>\n<th>Value</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>account no</td>\n<td>127993388</td>\n</tr>\n<tr>\n<td>name</td>\n<td>Derek</td>\n</tr>\n<tr>\n<td>location</td>\n<td>London</td>\n</tr>\n<tr>\n<td>credit date</td>\n<td>01/22/2023</td>\n</tr>\n<tr>\n<td>amount</td>\n<td>168637286.367</td>\n</tr>\n</tbody>\n</table>\n</div><h3><strong>Excel sheet data</strong></h3>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th>Account no</th>\n<th>name</th>\n<th>location</th>\n<th>credit date</th>\n<th>amount</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>127993388</td>\n<td>Derek</td>\n<td>London</td>\n<td>01/22/2023</td>\n<td>168637286.367</td>\n</tr>\n</tbody>\n</table>\n</div>"},{"tags":["java","selenium","selenium-webdriver","webdriver","screenshot"],"comments":[{"owner":{"account_id":10049107,"reputation":186627,"user_id":7429447,"accept_rate":86,"display_name":"undetected Selenium"},"score":0,"creation_date":1495285915,"post_id":44085722,"comment_id":75194731,"body_markdown":"I have a Answer for you but I want to confirm if that works for you. So can you please consider detailing out what you mean by  `full entire web page, not only partial from the top using selenium` ? Thanks","body":"I have a Answer for you but I want to confirm if that works for you. So can you please consider detailing out what you mean by  <code>full entire web page, not only partial from the top using selenium</code> ? Thanks"}],"answers":[{"tags":[],"owner":{"account_id":1570316,"reputation":4062,"user_id":1458144,"display_name":"iamdanchiv"},"down_vote_count":0,"up_vote_count":25,"is_accepted":true,"score":25,"last_activity_date":1546432412,"creation_date":1495285125,"answer_id":44086163,"question_id":44085722,"body_markdown":"**LE:** I see quite a lot of people are interested in the full-page screenshot, so I thought I might update the answer with some positives (*silver bullets*).\r\n\r\nThere are quite a handful of web testing frameworks that can (*with minimal setup &amp; effort*) produce a ***full-page screenshot***. I come from a NodeJS testing environment, so I can only vouch the following: [WebdriverIO](http://webdriver.io) &amp; Google&#39;s [Puppeteer](https://pptr.dev/). \r\n\r\nIf anyone is interested in an easy way to do it with WebdriverIO, check [this](https://stackoverflow.com/a/53964987/1458144) answer.\r\n\r\n----------\r\n\r\n\r\nShort answer is **NO, YOU CANNOT**, *if you&#39;re only using Selenium* (detailed reason bellow). But, what you can do is make the most out of your device&#39;s(monitor) [viewport][1]. \r\n\r\nSo, start your browser instance (driver) using `ChromeOptions()`, which is the method for setting ChromeDriver-specific capabilities. We can do the following:\r\n\r\n - maximize the window (using the `--start-maximized` switch);\r\n - go full-screen (`F11`-key on Windows, `Control+Cmd+F` on Mac, using the `--start-fullscreen` switch). \r\n - Note: complete list of Chrome command-line-switches can be found [here][2].\r\n\r\n&gt; Your code should look like this:\r\n\r\n    // Setting your Chrome options (Desired capabilities)\r\n\tChromeOptions options = new ChromeOptions();\r\n\toptions.add_argument(&#39;--start-maximized&#39;);\r\n\toptions.add_argument(&#39;--start-fullscreen&#39;);\r\n\r\n\t// Creating a driver instance with the previous capabilities\r\n\tWebDriver driver = new ChromeDriver(options);\r\n\r\n\t// Load page &amp; take screenshot of full-screen page\r\n    driver.get(&quot;http://google.com&quot;);\r\n    File scrFile = ((TakesScreenshot)driver).getScreenshotAs(OutputType.FILE);\r\n\r\n\r\n  Now regarding the full page problem, all drivers (`chromedriver`, `geckodriver`, `IEDriver`, `EdgeDriver`, etc.) are implementing the [WebDriver W3C][3] standard. Thus, they are dependent on the way the WebDriver team wants to expose the functionality of different features, in our case, [&#39;Take Screenshot&#39;][4].\r\n\r\nIf you read the definition, it clearly states the following:\r\n&gt; The Take Screenshot command takes a screenshot of the top-level browsing context’s **VIEWPORT**.\r\n\r\nLegacy-wise, some drivers were able to produce a full-page screenshot (read more about it [here][5]), like the old FirefoxDriver, IEDriver, etc. That is no longer the case as they now all implement (to the letter) the WebDriver W3C standard.\r\n\r\n  [1]: https://www.w3schools.com/css/css_rwd_viewport.asp\r\n  [2]: http://peter.sh/experiments/chromium-command-line-switches/\r\n  [3]: https://w3c.github.io/webdriver/webdriver-spec.html\r\n  [4]: https://w3c.github.io/webdriver/webdriver-spec.html#take-screenshot\r\n  [5]: https://github.com/seleniumhq/selenium/issues/1141","title":"How to get screenshot of full webpage using Selenium and Java?","body":"<p><strong>LE:</strong> I see quite a lot of people are interested in the full-page screenshot, so I thought I might update the answer with some positives (<em>silver bullets</em>).</p>\n\n<p>There are quite a handful of web testing frameworks that can (<em>with minimal setup &amp; effort</em>) produce a <strong><em>full-page screenshot</em></strong>. I come from a NodeJS testing environment, so I can only vouch the following: <a href=\"http://webdriver.io\" rel=\"noreferrer\">WebdriverIO</a> &amp; Google's <a href=\"https://pptr.dev/\" rel=\"noreferrer\">Puppeteer</a>. </p>\n\n<p>If anyone is interested in an easy way to do it with WebdriverIO, check <a href=\"https://stackoverflow.com/a/53964987/1458144\">this</a> answer.</p>\n\n<hr>\n\n<p>Short answer is <strong>NO, YOU CANNOT</strong>, <em>if you're only using Selenium</em> (detailed reason bellow). But, what you can do is make the most out of your device's(monitor) <a href=\"https://www.w3schools.com/css/css_rwd_viewport.asp\" rel=\"noreferrer\">viewport</a>. </p>\n\n<p>So, start your browser instance (driver) using <code>ChromeOptions()</code>, which is the method for setting ChromeDriver-specific capabilities. We can do the following:</p>\n\n<ul>\n<li>maximize the window (using the <code>--start-maximized</code> switch);</li>\n<li>go full-screen (<code>F11</code>-key on Windows, <code>Control+Cmd+F</code> on Mac, using the <code>--start-fullscreen</code> switch). </li>\n<li>Note: complete list of Chrome command-line-switches can be found <a href=\"http://peter.sh/experiments/chromium-command-line-switches/\" rel=\"noreferrer\">here</a>.</li>\n</ul>\n\n<blockquote>\n  <p>Your code should look like this:</p>\n</blockquote>\n\n<pre><code>// Setting your Chrome options (Desired capabilities)\nChromeOptions options = new ChromeOptions();\noptions.add_argument('--start-maximized');\noptions.add_argument('--start-fullscreen');\n\n// Creating a driver instance with the previous capabilities\nWebDriver driver = new ChromeDriver(options);\n\n// Load page &amp; take screenshot of full-screen page\ndriver.get(\"http://google.com\");\nFile scrFile = ((TakesScreenshot)driver).getScreenshotAs(OutputType.FILE);\n</code></pre>\n\n<p>Now regarding the full page problem, all drivers (<code>chromedriver</code>, <code>geckodriver</code>, <code>IEDriver</code>, <code>EdgeDriver</code>, etc.) are implementing the <a href=\"https://w3c.github.io/webdriver/webdriver-spec.html\" rel=\"noreferrer\">WebDriver W3C</a> standard. Thus, they are dependent on the way the WebDriver team wants to expose the functionality of different features, in our case, <a href=\"https://w3c.github.io/webdriver/webdriver-spec.html#take-screenshot\" rel=\"noreferrer\">'Take Screenshot'</a>.</p>\n\n<p>If you read the definition, it clearly states the following:</p>\n\n<blockquote>\n  <p>The Take Screenshot command takes a screenshot of the top-level browsing context’s <strong>VIEWPORT</strong>.</p>\n</blockquote>\n\n<p>Legacy-wise, some drivers were able to produce a full-page screenshot (read more about it <a href=\"https://github.com/seleniumhq/selenium/issues/1141\" rel=\"noreferrer\">here</a>), like the old FirefoxDriver, IEDriver, etc. That is no longer the case as they now all implement (to the letter) the WebDriver W3C standard.</p>\n"},{"tags":[],"owner":{"account_id":9972562,"reputation":670,"user_id":7378175,"accept_rate":60,"display_name":"Krzysztof Walczewski"},"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1508997109,"creation_date":1508997109,"answer_id":46946751,"question_id":44085722,"body_markdown":"I have found a tutorial http://www.softwaretestingmaterial.com/how-to-capture-full-page-screenshot-using-selenium-webdriver/\r\nFor maven users: remember about adding dependendency from https://mvnrepository.com/artifact/ru.yandex.qatools.ashot/ashot\r\nWhen I testing this script, I&#39;ve got large pictures, which can&#39;t be open in browser (too large or broken).\r\n\r\nSo maybe someone know any script, which focus page on last used locator?","title":"How to get screenshot of full webpage using Selenium and Java?","body":"<p>I have found a tutorial <a href=\"http://www.softwaretestingmaterial.com/how-to-capture-full-page-screenshot-using-selenium-webdriver/\" rel=\"noreferrer\">http://www.softwaretestingmaterial.com/how-to-capture-full-page-screenshot-using-selenium-webdriver/</a>\nFor maven users: remember about adding dependendency from <a href=\"https://mvnrepository.com/artifact/ru.yandex.qatools.ashot/ashot\" rel=\"noreferrer\">https://mvnrepository.com/artifact/ru.yandex.qatools.ashot/ashot</a>\nWhen I testing this script, I've got large pictures, which can't be open in browser (too large or broken).</p>\n\n<p>So maybe someone know any script, which focus page on last used locator?</p>\n"},{"tags":[],"owner":{"account_id":9972562,"reputation":670,"user_id":7378175,"accept_rate":60,"display_name":"Krzysztof Walczewski"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1510756316,"creation_date":1510756316,"answer_id":47310063,"question_id":44085722,"body_markdown":"For some pages I neeed to take screenshot of begin and end of page. So I use to take 2 screenshots:\r\n\r\n    public static String javaIoTmpDir = System.getProperty(&quot;java.io.tmpdir&quot;); //tmp dir\r\n    //create screenshot\r\n\t\tdriver.manage().window().fullscreen();\r\n\t\t//For large pages - body over 850 px highh - take addition screenshot of the end of page\r\n\t\tif (driver.findElements(By.id(&quot;panel_body&quot;)).size()&gt;0) {\r\n\t\t\tWebElement body = driver.findElement(By.id(&quot;panel_body&quot;));\r\n\t\t\tint bodyHight = body.getSize().getHeight();\r\n\t\t\tif (bodyHight &gt; 850) {\r\n\t\t\t\tRobot robot = new Robot();\r\n\t\t\t\trobot.keyPress(KeyEvent.VK_END);\r\n\t\t\t\trobot.keyRelease(KeyEvent.VK_END);\r\n\t\t\t\tThread.sleep(1000);\r\n\t\t\t\tFile scrFile = ((TakesScreenshot) driver).getScreenshotAs(OutputType.FILE);\r\n\t\t\t\tString timePictureEnd = javaIoTmpDir+&quot;\\\\scr_&quot;+String.valueOf(System.currentTimeMillis())+getClass().toString().substring(getClass().toString().lastIndexOf(&quot;.qa.&quot;)+3)+&quot;.png&quot;;\r\n\t\t\t\tFileUtils.copyFile(scrFile, new File(timePictureEnd));\r\n\t\t\t\trobot.keyPress(KeyEvent.VK_HOME); //back to top page for next screen\r\n\t\t\t\trobot.keyRelease(KeyEvent.VK_HOME);\r\n\t\t\t\tThread.sleep(1000);\r\n\t\t\t}\r\n\t\t}\r\n\t\tString timePicture = javaIoTmpDir+&quot;\\\\scr_&quot;+String.valueOf(System.currentTimeMillis())+getClass().toString().substring(getClass().toString().lastIndexOf(&quot;.qa.&quot;)+3)+&quot;.png&quot;;\r\n\t\tFile scrFile = ((TakesScreenshot) driver).getScreenshotAs(OutputType.FILE);\r\n\t\tFileUtils.copyFile(scrFile, new File(timePicture));","title":"How to get screenshot of full webpage using Selenium and Java?","body":"<p>For some pages I neeed to take screenshot of begin and end of page. So I use to take 2 screenshots:</p>\n\n<pre><code>public static String javaIoTmpDir = System.getProperty(\"java.io.tmpdir\"); //tmp dir\n//create screenshot\n    driver.manage().window().fullscreen();\n    //For large pages - body over 850 px highh - take addition screenshot of the end of page\n    if (driver.findElements(By.id(\"panel_body\")).size()&gt;0) {\n        WebElement body = driver.findElement(By.id(\"panel_body\"));\n        int bodyHight = body.getSize().getHeight();\n        if (bodyHight &gt; 850) {\n            Robot robot = new Robot();\n            robot.keyPress(KeyEvent.VK_END);\n            robot.keyRelease(KeyEvent.VK_END);\n            Thread.sleep(1000);\n            File scrFile = ((TakesScreenshot) driver).getScreenshotAs(OutputType.FILE);\n            String timePictureEnd = javaIoTmpDir+\"\\\\scr_\"+String.valueOf(System.currentTimeMillis())+getClass().toString().substring(getClass().toString().lastIndexOf(\".qa.\")+3)+\".png\";\n            FileUtils.copyFile(scrFile, new File(timePictureEnd));\n            robot.keyPress(KeyEvent.VK_HOME); //back to top page for next screen\n            robot.keyRelease(KeyEvent.VK_HOME);\n            Thread.sleep(1000);\n        }\n    }\n    String timePicture = javaIoTmpDir+\"\\\\scr_\"+String.valueOf(System.currentTimeMillis())+getClass().toString().substring(getClass().toString().lastIndexOf(\".qa.\")+3)+\".png\";\n    File scrFile = ((TakesScreenshot) driver).getScreenshotAs(OutputType.FILE);\n    FileUtils.copyFile(scrFile, new File(timePicture));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11481068,"reputation":48,"user_id":8415112,"display_name":"TiantianHe"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1538133408,"creation_date":1538114751,"answer_id":52549283,"question_id":44085722,"body_markdown":"You can use Phantomjs to achieve it.\r\n\r\nHere is my java code:\r\n\r\n    public class PhantomjsTest {\r\n        public static void main(String[] args) {\r\n            try {\r\n    \r\n                long start=System.currentTimeMillis();\r\n                //The page you want to screenshot\r\n                String targetUrl=&quot;https://www.iqiyi.com/&quot;;\r\n                //File path\r\n                String targetImg=&quot;iqiyi.png&quot;;\r\n                String command = &quot;/Users/hetiantian/SoftWares/phantomjs/bin/phantomjs /Users/hetiantian/SoftWares/phantomjs/examples/rasterize.js &quot;+targetUrl + &quot; &quot; +targetImg;\r\n                Process p = Runtime.getRuntime().exec(command);\r\n                p.waitFor();\r\n                System.out.println((System.currentTimeMillis()-start));\r\n            } catch (Exception e) {\r\n                e.printStackTrace();\r\n            }\r\n    \r\n    \r\n        }\r\n    }\r\n\r\nSo you can get a screenshot of full webpage by Phantomjs. When you use Phantomjs to get a full screenshot, you need to download Phantomjs first. Then run Phantomjs script to screenshot. More about it you can reference [phantomjs.org][1].\r\n\r\n\r\n  [1]: http://phantomjs.org/","title":"How to get screenshot of full webpage using Selenium and Java?","body":"<p>You can use Phantomjs to achieve it.</p>\n\n<p>Here is my java code:</p>\n\n<pre><code>public class PhantomjsTest {\n    public static void main(String[] args) {\n        try {\n\n            long start=System.currentTimeMillis();\n            //The page you want to screenshot\n            String targetUrl=\"https://www.iqiyi.com/\";\n            //File path\n            String targetImg=\"iqiyi.png\";\n            String command = \"/Users/hetiantian/SoftWares/phantomjs/bin/phantomjs /Users/hetiantian/SoftWares/phantomjs/examples/rasterize.js \"+targetUrl + \" \" +targetImg;\n            Process p = Runtime.getRuntime().exec(command);\n            p.waitFor();\n            System.out.println((System.currentTimeMillis()-start));\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n\n\n    }\n}\n</code></pre>\n\n<p>So you can get a screenshot of full webpage by Phantomjs. When you use Phantomjs to get a full screenshot, you need to download Phantomjs first. Then run Phantomjs script to screenshot. More about it you can reference <a href=\"http://phantomjs.org/\" rel=\"nofollow noreferrer\">phantomjs.org</a>.</p>\n"},{"tags":[],"owner":{"account_id":15004353,"reputation":174,"user_id":10830909,"display_name":"Wenzhong Hu"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1553048798,"creation_date":1553048798,"answer_id":55252674,"question_id":44085722,"body_markdown":"Looks like this [article][1] suggesting [AShot][2] works for me. Also, I successfully embeded the full page screenshot into Cucumber report with following code\r\n\r\n\r\n        scenario.embed(takeScreenShotAsByte(getWebDriver()), &quot;image/png&quot;);\r\n    \r\n        private static byte[] takeScreenShotAsByte(WebDriver webDriver) throws IOException {\r\n            return takeFullPageScreenShotAsByte(webDriver);\r\n        }\r\n    \r\n        private static byte[] takeFullPageScreenShotAsByte(WebDriver webDriver) throws IOException {\r\n            Screenshot fpScreenshot = new AShot().shootingStrategy(ShootingStrategies.viewportPasting(1000))\r\n                    .takeScreenshot(webDriver);\r\n    \r\n            BufferedImage originalImage = fpScreenshot.getImage();\r\n    \r\n            try (ByteArrayOutputStream baos = new ByteArrayOutputStream()) {\r\n                ImageIO.write(originalImage, &quot;png&quot;, baos);\r\n                baos.flush();\r\n                return baos.toByteArray();\r\n            }\r\n        }\r\n\r\n\r\n  [1]: https://www.softwaretestingmaterial.com/how-to-capture-full-page-screenshot-using-selenium-webdriver/\r\n  [2]: https://github.com/pazone/ashot","title":"How to get screenshot of full webpage using Selenium and Java?","body":"<p>Looks like this <a href=\"https://www.softwaretestingmaterial.com/how-to-capture-full-page-screenshot-using-selenium-webdriver/\" rel=\"noreferrer\">article</a> suggesting <a href=\"https://github.com/pazone/ashot\" rel=\"noreferrer\">AShot</a> works for me. Also, I successfully embeded the full page screenshot into Cucumber report with following code</p>\n\n<pre><code>    scenario.embed(takeScreenShotAsByte(getWebDriver()), \"image/png\");\n\n    private static byte[] takeScreenShotAsByte(WebDriver webDriver) throws IOException {\n        return takeFullPageScreenShotAsByte(webDriver);\n    }\n\n    private static byte[] takeFullPageScreenShotAsByte(WebDriver webDriver) throws IOException {\n        Screenshot fpScreenshot = new AShot().shootingStrategy(ShootingStrategies.viewportPasting(1000))\n                .takeScreenshot(webDriver);\n\n        BufferedImage originalImage = fpScreenshot.getImage();\n\n        try (ByteArrayOutputStream baos = new ByteArrayOutputStream()) {\n            ImageIO.write(originalImage, \"png\", baos);\n            baos.flush();\n            return baos.toByteArray();\n        }\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16108367,"reputation":51,"user_id":11627322,"display_name":"Andre Fernandes Luiz"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1621671571,"creation_date":1560216535,"answer_id":56535317,"question_id":44085722,"body_markdown":"Here is my sample of get Full Screen ScreenShot using C#, but just change:\r\n\r\n&lt;!-- language: lang-cs --&gt;\r\n\r\n    string _currentPath = Path.GetDirectoryName(Assembly.GetAssembly(typeof(One of your objects)).Location) + @&quot;\\Attachs\\&quot;;\r\n    var filePath = _currentPath + sSName;\r\n\r\n    if (!Directory.Exists(_currentPath))\r\n        Directory.CreateDirectory(_currentPath);\r\n\r\n    Dictionary&lt;string, Object&gt; metrics = new Dictionary&lt;string, Object&gt;();\r\n    metrics[&quot;width&quot;] = _driver.ExecuteScript(&quot;return Math.max(window.innerWidth,document.body.scrollWidth,document.documentElement.scrollWidth)&quot;);\r\n    metrics[&quot;height&quot;] = _driver.ExecuteScript(&quot;return Math.max(window.innerHeight,document.body.scrollHeight,document.documentElement.scrollHeight)&quot;);\r\n    metrics[&quot;deviceScaleFactor&quot;] = (double)_driver.ExecuteScript(&quot;return window.devicePixelRatio&quot;);\r\n    metrics[&quot;mobile&quot;] = _driver.ExecuteScript(&quot;return typeof window.orientation !== &#39;undefined&#39;&quot;);\r\n    _driver.ExecuteChromeCommand(&quot;Emulation.setDeviceMetricsOverride&quot;, metrics);\r\n\r\n    _driver.GetScreenshot().SaveAsFile(filePath, ScreenshotImageFormat.Png);\r\n\r\n    _driver.ExecuteChromeCommand(&quot;Emulation.clearDeviceMetricsOverride&quot;, new Dictionary&lt;string, Object&gt;());\r\n    _driver.Close();","title":"How to get screenshot of full webpage using Selenium and Java?","body":"<p>Here is my sample of get Full Screen ScreenShot using C#, but just change:</p>\n<pre class=\"lang-cs prettyprint-override\"><code>string _currentPath = Path.GetDirectoryName(Assembly.GetAssembly(typeof(One of your objects)).Location) + @&quot;\\Attachs\\&quot;;\nvar filePath = _currentPath + sSName;\n\nif (!Directory.Exists(_currentPath))\n    Directory.CreateDirectory(_currentPath);\n\nDictionary&lt;string, Object&gt; metrics = new Dictionary&lt;string, Object&gt;();\nmetrics[&quot;width&quot;] = _driver.ExecuteScript(&quot;return Math.max(window.innerWidth,document.body.scrollWidth,document.documentElement.scrollWidth)&quot;);\nmetrics[&quot;height&quot;] = _driver.ExecuteScript(&quot;return Math.max(window.innerHeight,document.body.scrollHeight,document.documentElement.scrollHeight)&quot;);\nmetrics[&quot;deviceScaleFactor&quot;] = (double)_driver.ExecuteScript(&quot;return window.devicePixelRatio&quot;);\nmetrics[&quot;mobile&quot;] = _driver.ExecuteScript(&quot;return typeof window.orientation !== 'undefined'&quot;);\n_driver.ExecuteChromeCommand(&quot;Emulation.setDeviceMetricsOverride&quot;, metrics);\n\n_driver.GetScreenshot().SaveAsFile(filePath, ScreenshotImageFormat.Png);\n\n_driver.ExecuteChromeCommand(&quot;Emulation.clearDeviceMetricsOverride&quot;, new Dictionary&lt;string, Object&gt;());\n_driver.Close();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9404982,"reputation":123,"user_id":7411203,"display_name":"Talmtikisan"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1579711843,"creation_date":1579711843,"answer_id":59864595,"question_id":44085722,"body_markdown":"It is possible to start Chrome in headless mode and then set the window size to the same height of the page body.\r\n\r\nSince the height of your headless browser is not dependent on your monitor size you can use this headless mode to get full length screenshots as they are rendered in the Chrome browser.\r\n\r\nThe top answer for [Headless Chrome run with selenium][1] seems to show the right way to start Chrome in headless mode with java. I work with python bindings but the answer looks pretty similar to what I do.\r\n\r\nThis is the relevant part. This code should go before you start an instance of ChromeDriver.\r\n\r\n    ChromeOptions chromeOptions = new ChromeOptions();\r\n    chromeOptions.addArguments(&quot;--headless&quot;);\r\n\r\n    ChromeDriver driver = new ChromeDriver(chromeOptions);\r\n\r\nIf running chrome in a headless browser is not a viable option then you&#39;ll have to use Firefox or IE. Both of these browsers will give you a full length screenshot\r\n\r\n  [1]: https://stackoverflow.com/questions/47067188/headless-chrome-run-with-selenium\r\n","title":"How to get screenshot of full webpage using Selenium and Java?","body":"<p>It is possible to start Chrome in headless mode and then set the window size to the same height of the page body.</p>\n\n<p>Since the height of your headless browser is not dependent on your monitor size you can use this headless mode to get full length screenshots as they are rendered in the Chrome browser.</p>\n\n<p>The top answer for <a href=\"https://stackoverflow.com/questions/47067188/headless-chrome-run-with-selenium\">Headless Chrome run with selenium</a> seems to show the right way to start Chrome in headless mode with java. I work with python bindings but the answer looks pretty similar to what I do.</p>\n\n<p>This is the relevant part. This code should go before you start an instance of ChromeDriver.</p>\n\n<pre><code>ChromeOptions chromeOptions = new ChromeOptions();\nchromeOptions.addArguments(\"--headless\");\n\nChromeDriver driver = new ChromeDriver(chromeOptions);\n</code></pre>\n\n<p>If running chrome in a headless browser is not a viable option then you'll have to use Firefox or IE. Both of these browsers will give you a full length screenshot</p>\n"},{"tags":[],"owner":{"account_id":49071,"reputation":8670,"user_id":145976,"accept_rate":40,"display_name":"Charlie"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1607285852,"creation_date":1607285852,"answer_id":65172667,"question_id":44085722,"body_markdown":"Java code without using third party library:\r\n```\r\nint bodyHeight = webDriver.findElement(By.tagName(&quot;body&quot;)).getSize().getHeight();\r\nint windowChromeHeight = (int) (long) webDriver.executeScript(&quot;return window.outerHeight - window.innerHeight&quot;);\r\nDimension size = new Dimension(webDriver.manage().window().getSize().getWidth(), bodyHeight + windowChromeHeight);\r\nwebDriver.executeScript(&quot;window.scrollTo(0, 0);&quot;);\r\nwebDriver.manage().window().setSize(size);\r\n\t\t\t\r\nFile screenshotFile = new File(&quot;screenshot.png&quot;);\r\nFiles.write(screenshotFile.toPath(), webDriver.getScreenshotAs(OutputType.BYTES));\r\n```","title":"How to get screenshot of full webpage using Selenium and Java?","body":"<p>Java code without using third party library:</p>\n<pre><code>int bodyHeight = webDriver.findElement(By.tagName(&quot;body&quot;)).getSize().getHeight();\nint windowChromeHeight = (int) (long) webDriver.executeScript(&quot;return window.outerHeight - window.innerHeight&quot;);\nDimension size = new Dimension(webDriver.manage().window().getSize().getWidth(), bodyHeight + windowChromeHeight);\nwebDriver.executeScript(&quot;window.scrollTo(0, 0);&quot;);\nwebDriver.manage().window().setSize(size);\n            \nFile screenshotFile = new File(&quot;screenshot.png&quot;);\nFiles.write(screenshotFile.toPath(), webDriver.getScreenshotAs(OutputType.BYTES));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2691426,"reputation":3360,"user_id":2324685,"accept_rate":70,"display_name":"John29"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1617040137,"creation_date":1617040137,"answer_id":66859108,"question_id":44085722,"body_markdown":"Now there&#39;s an easy way to do it with Selenium 4 and Firefox.\r\n\r\n    byte[] imageBytes = ((FirefoxDriver)driver).getFullPageScreenshotAs(OutputType.BYTES);\r\n    Files.write(Paths.get(RESULT_FILENAME), imageBytes);\r\n\r\nOther browsers don&#39;t support `getFullPageScreenshotAs()` yet.","title":"How to get screenshot of full webpage using Selenium and Java?","body":"<p>Now there's an easy way to do it with Selenium 4 and Firefox.</p>\n<pre><code>byte[] imageBytes = ((FirefoxDriver)driver).getFullPageScreenshotAs(OutputType.BYTES);\nFiles.write(Paths.get(RESULT_FILENAME), imageBytes);\n</code></pre>\n<p>Other browsers don't support <code>getFullPageScreenshotAs()</code> yet.</p>\n"},{"tags":[],"owner":{"account_id":1203915,"reputation":10209,"user_id":1174024,"accept_rate":85,"display_name":"Nicholas DiPiazza"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1653150338,"creation_date":1653150338,"answer_id":72331370,"question_id":44085722,"body_markdown":"Here is a way to use DevTools + Chromedriver to do it:\r\n\r\n```\r\n  private String takeScreenshot(ChromeDriver driver, boolean fullscreen) {\r\n    if (fullscreen) {\r\n      Map&lt;String, Object&gt; layoutMetrics = driver.executeCdpCommand(&quot;Page.getLayoutMetrics&quot;, Collections.emptyMap());\r\n      Map&lt;String, Object&gt; screenshotConfig = Maps.newHashMap();\r\n      screenshotConfig.put(&quot;captureBeyondViewport&quot;, true);\r\n      screenshotConfig.put(&quot;fromSurface&quot;, true);\r\n      Map contentSize = (Map)layoutMetrics.get(&quot;contentSize&quot;);\r\n      screenshotConfig.put(&quot;clip&quot;, ImmutableMap.of(\r\n          &quot;width&quot;, contentSize.get(&quot;width&quot;),\r\n          &quot;height&quot;, contentSize.get(&quot;height&quot;),\r\n          &quot;x&quot;, 0,\r\n          &quot;y&quot;, 0,\r\n          &quot;scale&quot;, 1\r\n      ));\r\n      Map&lt;String, Object&gt; base64PngResult = driver.executeCdpCommand(&quot;Page.captureScreenshot&quot;, screenshotConfig);\r\n      return (String)base64PngResult.get(&quot;data&quot;);\r\n    }\r\n    return driver.getScreenshotAs(OutputType.BASE64);\r\n  }\r\n```","title":"How to get screenshot of full webpage using Selenium and Java?","body":"<p>Here is a way to use DevTools + Chromedriver to do it:</p>\n<pre><code>  private String takeScreenshot(ChromeDriver driver, boolean fullscreen) {\n    if (fullscreen) {\n      Map&lt;String, Object&gt; layoutMetrics = driver.executeCdpCommand(&quot;Page.getLayoutMetrics&quot;, Collections.emptyMap());\n      Map&lt;String, Object&gt; screenshotConfig = Maps.newHashMap();\n      screenshotConfig.put(&quot;captureBeyondViewport&quot;, true);\n      screenshotConfig.put(&quot;fromSurface&quot;, true);\n      Map contentSize = (Map)layoutMetrics.get(&quot;contentSize&quot;);\n      screenshotConfig.put(&quot;clip&quot;, ImmutableMap.of(\n          &quot;width&quot;, contentSize.get(&quot;width&quot;),\n          &quot;height&quot;, contentSize.get(&quot;height&quot;),\n          &quot;x&quot;, 0,\n          &quot;y&quot;, 0,\n          &quot;scale&quot;, 1\n      ));\n      Map&lt;String, Object&gt; base64PngResult = driver.executeCdpCommand(&quot;Page.captureScreenshot&quot;, screenshotConfig);\n      return (String)base64PngResult.get(&quot;data&quot;);\n    }\n    return driver.getScreenshotAs(OutputType.BASE64);\n  }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13945822,"reputation":291,"user_id":10070611,"display_name":"Vitaliy"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661418880,"creation_date":1661418880,"answer_id":73484931,"question_id":44085722,"body_markdown":"None of the options described here worked for me in my environment (go lang, chromedriver, fedesog implementation of web driver) What came to me eventually is zoom out! This approach can work for pages which are not too long, in which zooming out makes sense.\r\n\r\nI think this may be relevant for java or any other language using selenium, so posting it here for anyone who comes across this issue in any programming language :)\r\nThe following javascript code snippet allows to set zoom level:\r\n\r\n    document.body.style.zoom = &#39;0.5&#39;\r\n\r\nWhere 0.5 is the zoom level you want. It can be calculated dynamically based on actual page size, which can be retrieved using:\r\n\r\n    document.body.scrollHeight\r\nand \r\n\r\n    document.body.scrollWidth\r\n\r\nlike mentioned above, and executed like:\r\n\r\n    webDriver.executeScript(...)\r\nin java or \r\n\r\n    session.ExecuteScript(...)\r\nin golang using fedesog or similar webdriver framework\r\n\r\n\r\n\r\n \r\n\r\n","title":"How to get screenshot of full webpage using Selenium and Java?","body":"<p>None of the options described here worked for me in my environment (go lang, chromedriver, fedesog implementation of web driver) What came to me eventually is zoom out! This approach can work for pages which are not too long, in which zooming out makes sense.</p>\n<p>I think this may be relevant for java or any other language using selenium, so posting it here for anyone who comes across this issue in any programming language :)\nThe following javascript code snippet allows to set zoom level:</p>\n<pre><code>document.body.style.zoom = '0.5'\n</code></pre>\n<p>Where 0.5 is the zoom level you want. It can be calculated dynamically based on actual page size, which can be retrieved using:</p>\n<pre><code>document.body.scrollHeight\n</code></pre>\n<p>and</p>\n<pre><code>document.body.scrollWidth\n</code></pre>\n<p>like mentioned above, and executed like:</p>\n<pre><code>webDriver.executeScript(...)\n</code></pre>\n<p>in java or</p>\n<pre><code>session.ExecuteScript(...)\n</code></pre>\n<p>in golang using fedesog or similar webdriver framework</p>\n"},{"tags":[],"owner":{"account_id":6235501,"reputation":3140,"user_id":4850949,"accept_rate":57,"display_name":"not2savvy"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674751057,"creation_date":1674751057,"answer_id":75249083,"question_id":44085722,"body_markdown":"This is the simplest solution I found, which I guess should work most of the times:\r\n\r\nIn headless mode, you can set the viewport to virtually any size you want, indepedent from any existing physical screen size. For example:\r\n\r\n\t\tfinal ChromeOptions options = new ChromeOptions().setHeadless(true).addArguments(&quot;window-size=1200,3000&quot;);\r\n\t\tdriver = new RemoteWebDriver(remoteAddress, options);\r\n\r\nNote that you can use a large heights to try and fit the whole page.\r\n","title":"How to get screenshot of full webpage using Selenium and Java?","body":"<p>This is the simplest solution I found, which I guess should work most of the times:</p>\n<p>In headless mode, you can set the viewport to virtually any size you want, indepedent from any existing physical screen size. For example:</p>\n<pre><code>    final ChromeOptions options = new ChromeOptions().setHeadless(true).addArguments(&quot;window-size=1200,3000&quot;);\n    driver = new RemoteWebDriver(remoteAddress, options);\n</code></pre>\n<p>Note that you can use a large heights to try and fit the whole page.</p>\n"}],"owner":{"account_id":6391551,"reputation":483,"user_id":4957499,"accept_rate":78,"display_name":"Placinta Alexandru"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":83779,"favorite_count":0,"down_vote_count":0,"up_vote_count":27,"accepted_answer_id":44086163,"answer_count":12,"score":27,"last_activity_date":1674751057,"creation_date":1495282356,"question_id":44085722,"body_markdown":"How to take a screenshot of the entire web page (*full-page screenshot*), not only partial (*top-to-bottom*) using Selenium WebDriver?\r\n\r\n**My code:** (*Java bindings*)\r\n    \r\n    System.setProperty(&quot;webdriver.chrome.driver&quot;,&quot;/home/alex/Downloads/chromedriver_linux64/chromedriver&quot;);\r\n    WebDriver driver = new ChromeDriver();\r\n    driver.get(&quot;http://google.com&quot;);\r\n    File scrFile = ((TakesScreenshot)driver).getScreenshotAs(OutputType.FILE);\r\n    FileUtils.copyFile(scrFile, new File(RESULT_FILENAME));\r\n\r\nAny ideas on how to tackle this?","title":"How to get screenshot of full webpage using Selenium and Java?","body":"<p>How to take a screenshot of the entire web page (<em>full-page screenshot</em>), not only partial (<em>top-to-bottom</em>) using Selenium WebDriver?</p>\n\n<p><strong>My code:</strong> (<em>Java bindings</em>)</p>\n\n<pre><code>System.setProperty(\"webdriver.chrome.driver\",\"/home/alex/Downloads/chromedriver_linux64/chromedriver\");\nWebDriver driver = new ChromeDriver();\ndriver.get(\"http://google.com\");\nFile scrFile = ((TakesScreenshot)driver).getScreenshotAs(OutputType.FILE);\nFileUtils.copyFile(scrFile, new File(RESULT_FILENAME));\n</code></pre>\n\n<p>Any ideas on how to tackle this?</p>\n"},{"tags":["java","minecraft"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":1,"creation_date":1655443350,"post_id":72654113,"comment_id":128338113,"body_markdown":"version 63 is Java 19","body":"version 63 is Java 19"},{"owner":{"account_id":22514501,"reputation":41,"user_id":16708933,"display_name":"Gavin Niederman"},"score":0,"creation_date":1655443697,"post_id":72654113,"comment_id":128338172,"body_markdown":"ok but is there any way to fix this issue, I need to use java 17","body":"ok but is there any way to fix this issue, I need to use java 17"}],"answers":[{"tags":[],"owner":{"account_id":20215646,"reputation":11,"user_id":14826547,"display_name":"ImSamhel"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1655804775,"creation_date":1655804775,"answer_id":72698638,"question_id":72654113,"body_markdown":"1. Try and use JDK17 if you&#39;re using the newest gradle version\r\n2. Use Loom&#39;s &quot;0.12-SNAPSHOT&quot; version instead of the current one","title":"Compiling a fabric mod yeilds the error &quot;Unsupported class file major version 63&quot;","body":"<ol>\n<li>Try and use JDK17 if you're using the newest gradle version</li>\n<li>Use Loom's &quot;0.12-SNAPSHOT&quot; version instead of the current one</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":20967162,"reputation":381,"user_id":15405114,"display_name":"Usaid Asif"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674750838,"creation_date":1674750838,"answer_id":75249037,"question_id":72654113,"body_markdown":"I finally found the solution of this error :-\r\n\r\n[Unsupported class file major version 63][1]\r\n\r\nsoo just go at your project folder and then open :-\r\n\r\nandroid/gradle/wrapper/gradle-wrapper-properties\r\n\r\nchange this :- \r\n\r\ndistributionUrl=https://services.gradle.org/distributions/gradle-7.4-all.zip \r\n\r\nTo This :- \r\n\r\ndistributionUrl=https://services.gradle.org/distributions/gradle-7.6-all.zip \r\n\r\nand then your issue get solved &#128513;\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/dhRJ0.jpg","title":"Compiling a fabric mod yeilds the error &quot;Unsupported class file major version 63&quot;","body":"<p>I finally found the solution of this error :-</p>\n<p><a href=\"https://i.stack.imgur.com/dhRJ0.jpg\" rel=\"nofollow noreferrer\">Unsupported class file major version 63</a></p>\n<p>soo just go at your project folder and then open :-</p>\n<p>android/gradle/wrapper/gradle-wrapper-properties</p>\n<p>change this :-</p>\n<p>distributionUrl=https://services.gradle.org/distributions/gradle-7.4-all.zip</p>\n<p>To This :-</p>\n<p>distributionUrl=https://services.gradle.org/distributions/gradle-7.6-all.zip</p>\n<p>and then your issue get solved 😁</p>\n"}],"owner":{"account_id":22514501,"reputation":41,"user_id":16708933,"display_name":"Gavin Niederman"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2744,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":2,"score":0,"last_activity_date":1674750838,"creation_date":1655437652,"question_id":72654113,"body_markdown":"When I try to compile my fabric mod in intellij with gradle it fails during the :remapJar task and gives the error ```Unsupported class file major version 63``` I&#39;m pretty sure that class file major versions only go up to 61 so I am very confused about this error. Any help would be amazing. I&#39;m happy to give additional details if necessary.","title":"Compiling a fabric mod yeilds the error &quot;Unsupported class file major version 63&quot;","body":"<p>When I try to compile my fabric mod in intellij with gradle it fails during the :remapJar task and gives the error <code>Unsupported class file major version 63</code> I'm pretty sure that class file major versions only go up to 61 so I am very confused about this error. Any help would be amazing. I'm happy to give additional details if necessary.</p>\n"},{"tags":["java","oracle","hibernate","jpa","intellij-idea"],"comments":[{"owner":{"account_id":1888781,"reputation":2007,"user_id":1707427,"display_name":"S&#246;ren"},"score":0,"creation_date":1673549396,"post_id":75100996,"comment_id":132530179,"body_markdown":"You already have a unique identifier, why do you think you need another?","body":"You already have a unique identifier, why do you think you need another?"},{"owner":{"account_id":19585505,"reputation":71,"user_id":14333706,"display_name":"nejlasahin"},"score":1,"creation_date":1673550588,"post_id":75100996,"comment_id":132530580,"body_markdown":"It might be more accurate to associate it with a foreign key. You can establish a One To One relationship between Person and PoliceMan.","body":"It might be more accurate to associate it with a foreign key. You can establish a One To One relationship between Person and PoliceMan."},{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1673556816,"post_id":75100996,"comment_id":132532355,"body_markdown":"Your table structure doesn&#39;t show a FK from police-&gt;person. Nothing stops you from having a police_id attribute within your entity, it just can&#39;t be marked as THE id. You can have any number of unique identifiers within entities and tables - just mark the column with a uniqueness constraint. Plus one on this shouldn&#39;t be using inheritance despite that though. An officer (PoliceMan) is a role, not a defining characteristic of a person, and you&#39;ll have issues maintaining their existence as a person if it isn&#39;t separated out, just as you apparently are for the table data.","body":"Your table structure doesn&#39;t show a FK from police-&gt;person. Nothing stops you from having a police_id attribute within your entity, it just can&#39;t be marked as THE id. You can have any number of unique identifiers within entities and tables - just mark the column with a uniqueness constraint. Plus one on this shouldn&#39;t be using inheritance despite that though. An officer (PoliceMan) is a role, not a defining characteristic of a person, and you&#39;ll have issues maintaining their existence as a person if it isn&#39;t separated out, just as you apparently are for the table data."}],"answers":[{"tags":[],"owner":{"account_id":9045176,"reputation":21,"user_id":6737805,"display_name":"Csaba Ocsk&#243;-S&#243;s"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1673899649,"creation_date":1673899649,"answer_id":75139199,"question_id":75100996,"body_markdown":"You missed the Inheritance mapping. Just extending the Person class is not a JPA inheritance. By looking at your code I suppose that you wanted to make a joined table inheritance, because you tried to map each entity to a different table. \r\n\r\nTo do so you have to use the **@Inheritance(strategy = InheritanceType.JOINED)** annotation on the PoliceMan class.\r\n\r\n Also you should use the **@PrimaryKeyJoinColumn(referencedColumnName = &quot;person_id&quot;)** annotation on the PoliceMan class. This indicates that the PK of the PoliceMan entity is person_id and it has a foreign key constraint to the PK of the Person. **Remove the policeId field**. With the annotations above you already have the **person_id** column in both of your tables (you don&#39;t have to declare an id in your PoliceMan class).\r\n\r\nSo if you do it manually on SQL side you have to create a person_id primary key column in PERSON table and also in POLICE_MAN table, and you should have a foreign key in POLICE_MAN table on person_id column that references the person_id column of the PERSON table.\r\n\r\n\r\n","title":"Java Hibernate INHERITANCE","body":"<p>You missed the Inheritance mapping. Just extending the Person class is not a JPA inheritance. By looking at your code I suppose that you wanted to make a joined table inheritance, because you tried to map each entity to a different table.</p>\n<p>To do so you have to use the <strong>@Inheritance(strategy = InheritanceType.JOINED)</strong> annotation on the PoliceMan class.</p>\n<p>Also you should use the <strong>@PrimaryKeyJoinColumn(referencedColumnName = &quot;person_id&quot;)</strong> annotation on the PoliceMan class. This indicates that the PK of the PoliceMan entity is person_id and it has a foreign key constraint to the PK of the Person. <strong>Remove the policeId field</strong>. With the annotations above you already have the <strong>person_id</strong> column in both of your tables (you don't have to declare an id in your PoliceMan class).</p>\n<p>So if you do it manually on SQL side you have to create a person_id primary key column in PERSON table and also in POLICE_MAN table, and you should have a foreign key in POLICE_MAN table on person_id column that references the person_id column of the PERSON table.</p>\n"},{"tags":[],"owner":{"account_id":27512948,"reputation":71,"user_id":20994494,"display_name":"Amentos"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1674750164,"creation_date":1674750164,"answer_id":75248894,"question_id":75100996,"body_markdown":"&quot;It might be more accurate to associate it with a foreign key. You can establish a One To One relationship between Person and PoliceMan.&quot;\r\n\r\n&quot;our table structure doesn&#39;t show a FK from police-&gt;person. Nothing stops you from having a police_id attribute within your entity, it just can&#39;t be marked as THE id. You can have any number of unique identifiers within entities and tables - just mark the column with a uniqueness constraint. Plus one on this shouldn&#39;t be using inheritance despite that though. An officer (PoliceMan) is a role, not a defining characteristic of a person, and you&#39;ll have issues maintaining their existence as a person if it isn&#39;t separated out, just as you apparently are for the table data.&quot;\r\n\r\n\r\n\r\nThanks you all have right.","title":"Java Hibernate INHERITANCE","body":"<p>&quot;It might be more accurate to associate it with a foreign key. You can establish a One To One relationship between Person and PoliceMan.&quot;</p>\n<p>&quot;our table structure doesn't show a FK from police-&gt;person. Nothing stops you from having a police_id attribute within your entity, it just can't be marked as THE id. You can have any number of unique identifiers within entities and tables - just mark the column with a uniqueness constraint. Plus one on this shouldn't be using inheritance despite that though. An officer (PoliceMan) is a role, not a defining characteristic of a person, and you'll have issues maintaining their existence as a person if it isn't separated out, just as you apparently are for the table data.&quot;</p>\n<p>Thanks you all have right.</p>\n"}],"owner":{"account_id":27512948,"reputation":71,"user_id":20994494,"display_name":"Amentos"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":68,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75248894,"answer_count":2,"score":0,"last_activity_date":1674750164,"creation_date":1673549206,"question_id":75100996,"body_markdown":"Here is a basic drawing for my problem.\r\n\r\n[![Description of my problem](https://i.stack.imgur.com/jqLsH.png)](https://i.stack.imgur.com/jqLsH.png)\r\n\r\nSo I have a Person class.\r\n\r\n```\r\n@Getter\r\n@Setter\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\n@Entity\r\n@Table(name = &quot;PERSON&quot;)\r\npublic class Person {\r\n    @Id\r\n    @Column(name = &quot;person_id&quot;)\r\n    @SequenceGenerator(sequenceName = &quot;PERSON_ID_SEQ&quot;, allocationSize = 1, name=&quot;PERSON_ID_SEQ&quot;)\r\n    @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = &quot;PERSON_ID_SEQ&quot;)\r\n    private Long personId;\r\n    \r\n    private String name;\r\n}\r\n```\r\n\r\nand for example a Police class that is inherited from a Person.\r\n\r\n```\r\n@Getter\r\n@Setter\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\n@Entity\r\n@Table(name = &quot;POLICE_MAN&quot;)\r\npublic class PoliceMan extends Person{\r\n    @Id\r\n    @Column(name = &quot;police_id&quot;)\r\n    private Long policeId;\r\n    \r\n    private String something;\r\n}\r\n```\r\nSo the problem is, I can&#39;t use @Id annotation in PoliceMan because I have one in the Person class. How could I solve that? How can a police_id be an uniqu identifier?\r\n\r\nThanks for help.\r\n\r\n\r\nhttps://www.baeldung.com/hibernate-inheritance\r\n\r\nI tried something from that page, but ... ","title":"Java Hibernate INHERITANCE","body":"<p>Here is a basic drawing for my problem.</p>\n<p><a href=\"https://i.stack.imgur.com/jqLsH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jqLsH.png\" alt=\"Description of my problem\" /></a></p>\n<p>So I have a Person class.</p>\n<pre><code>@Getter\n@Setter\n@NoArgsConstructor\n@AllArgsConstructor\n@Entity\n@Table(name = &quot;PERSON&quot;)\npublic class Person {\n    @Id\n    @Column(name = &quot;person_id&quot;)\n    @SequenceGenerator(sequenceName = &quot;PERSON_ID_SEQ&quot;, allocationSize = 1, name=&quot;PERSON_ID_SEQ&quot;)\n    @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = &quot;PERSON_ID_SEQ&quot;)\n    private Long personId;\n    \n    private String name;\n}\n</code></pre>\n<p>and for example a Police class that is inherited from a Person.</p>\n<pre><code>@Getter\n@Setter\n@NoArgsConstructor\n@AllArgsConstructor\n@Entity\n@Table(name = &quot;POLICE_MAN&quot;)\npublic class PoliceMan extends Person{\n    @Id\n    @Column(name = &quot;police_id&quot;)\n    private Long policeId;\n    \n    private String something;\n}\n</code></pre>\n<p>So the problem is, I can't use @Id annotation in PoliceMan because I have one in the Person class. How could I solve that? How can a police_id be an uniqu identifier?</p>\n<p>Thanks for help.</p>\n<p><a href=\"https://www.baeldung.com/hibernate-inheritance\" rel=\"nofollow noreferrer\">https://www.baeldung.com/hibernate-inheritance</a></p>\n<p>I tried something from that page, but ...</p>\n"},{"tags":["java","elasticsearch"],"comments":[{"owner":{"account_id":1313740,"reputation":2571,"user_id":1261162,"accept_rate":60,"display_name":"Rafael"},"score":0,"creation_date":1682420730,"post_id":75248892,"comment_id":134208972,"body_markdown":"I am working in something similar and still not tested my code, but it seems you can pass a Query object to `UpdateQuery.builder` ... in fact it is called updateByQuery because you want to use a query to get the set of docs to apply the script. If you don&#39;t want that then probably you should try a different approach instead of updatebyQuery","body":"I am working in something similar and still not tested my code, but it seems you can pass a Query object to <code>UpdateQuery.builder</code> ... in fact it is called updateByQuery because you want to use a query to get the set of docs to apply the script. If you don&#39;t want that then probably you should try a different approach instead of updatebyQuery"}],"owner":{"account_id":20410879,"reputation":31,"user_id":14974303,"display_name":"Barbara"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":192,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1674750158,"creation_date":1674750158,"question_id":75248892,"body_markdown":"I want to remove a certain value from a list in every document that contains that value in that list. I tried using Update Query but it&#39;s not working, the UpdateQuery.builder() requires an id of the object I want to update.\r\n\r\n```\r\n  private final ElasticsearchRestTemplate restTemplate;\r\n\r\n  public void removeValueFromListInObjects(String listName, String value, Class&lt;?&gt; clazz) {\r\n    Map&lt;String, Object&gt; parameters = Collections.singletonMap(&quot;value&quot;, value);\r\n    String script =\r\n        &quot;if(ctx._source.&quot; + listName + &quot;.contains(params.value)) ctx._source.&quot; + listName + &quot;.remove(ctx._source.&quot;\r\n            + listName + &quot;.indexOf(params.value));&quot;;\r\n    updateAllByQuery(script, parameters, clazz);\r\n  }\r\n\r\n  private void updateAllByQuery(String script, Map&lt;String, Object&gt; parameters, Class&lt;?&gt; clazz) {\r\n    IndexCoordinates index = restTemplate.getIndexCoordinatesFor(clazz);\r\n    final UpdateQuery updateQuery = UpdateQuery.builder(&quot;&quot;)\r\n        .withScriptType(ScriptType.INLINE)\r\n        .withScript(script)\r\n        .withParams(parameters)\r\n        .build();\r\n    restTemplate.update(updateQuery, index);\r\n  }\r\n```\r\n\r\nIs there a workaround or am I completely off trying to use UpdateQuery here?","title":"How to run Elasticsearch updateQuery in Java without passing object id to UpdateQuery.builder()?","body":"<p>I want to remove a certain value from a list in every document that contains that value in that list. I tried using Update Query but it's not working, the UpdateQuery.builder() requires an id of the object I want to update.</p>\n<pre><code>  private final ElasticsearchRestTemplate restTemplate;\n\n  public void removeValueFromListInObjects(String listName, String value, Class&lt;?&gt; clazz) {\n    Map&lt;String, Object&gt; parameters = Collections.singletonMap(&quot;value&quot;, value);\n    String script =\n        &quot;if(ctx._source.&quot; + listName + &quot;.contains(params.value)) ctx._source.&quot; + listName + &quot;.remove(ctx._source.&quot;\n            + listName + &quot;.indexOf(params.value));&quot;;\n    updateAllByQuery(script, parameters, clazz);\n  }\n\n  private void updateAllByQuery(String script, Map&lt;String, Object&gt; parameters, Class&lt;?&gt; clazz) {\n    IndexCoordinates index = restTemplate.getIndexCoordinatesFor(clazz);\n    final UpdateQuery updateQuery = UpdateQuery.builder(&quot;&quot;)\n        .withScriptType(ScriptType.INLINE)\n        .withScript(script)\n        .withParams(parameters)\n        .build();\n    restTemplate.update(updateQuery, index);\n  }\n</code></pre>\n<p>Is there a workaround or am I completely off trying to use UpdateQuery here?</p>\n"},{"tags":["java","spring","spring-boot","websocket","spring-websocket"],"owner":{"account_id":15525089,"reputation":99,"user_id":11200149,"display_name":"NoobSailboat"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":112,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1674750085,"creation_date":1674680238,"question_id":75239777,"body_markdown":"I followed the https://spring.io/guides/gs/messaging-stomp-websocket/ and added a few modifications (mainly Spring Security Auth and dynamic topics(Rooms)). \r\n\r\nMy goal was to broadcast a **JOIN** message to all users except the one *joining*. I originally came from Socket.IO and there is a simple method that does this but in spring there doesn&#39;t seem to be one so I just used the `SimpUserRegistry`, to get a list of users, then removed the user joining the topic, and `simpMessagingTemplate.convertAndSendToUser` to send the message to the rest of the users.\r\n\r\n    // Socket.IO: sending to all clients except sender (Can&#39;t find if Spring has something like this.)\r\n    // My Spring Solution seems janky compared to this.\r\n    socket.broadcast.emit(&#39;message&#39;, &quot;this is a test&quot;);\r\nBut to even send messages directly to users already subscribed to a topic I need to have the client subscribe twice:\r\n\r\n        // Client-Side JS\r\n        // public/general\r\n        stompClient.subscribe(`/topic/${roomId}`, (message) =&gt; {...}\r\n        // private/direct user message\r\n        stompClient.subscribe(`/user/topic/${roomId}`, (message) =&gt; {...}\r\n\r\nIs my solution as janky as I think it is or is there a correct/better way that Spring already provides similar to the socket.io way?\r\n\r\nWebSocket Configuration file just in case:\r\n\r\n    @Configuration\r\n    @EnableWebSocketMessageBroker\r\n    public class WebSocketConfig implements WebSocketMessageBrokerConfigurer {\r\n    \t\r\n    \t@Override\r\n    \tpublic void configureMessageBroker(MessageBrokerRegistry config) {\r\n    \t\tconfig.enableSimpleBroker(&quot;/topic&quot;); \r\n    \t\tconfig.setApplicationDestinationPrefixes(&quot;/app&quot;); \r\n    \t\tconfig.setUserDestinationPrefix(&quot;/user&quot;);\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic void registerStompEndpoints(StompEndpointRegistry registry) {\r\n    \t\tregistry.addEndpoint(&quot;/fallback-websocket&quot;).withSockJS();\r\n    \t}\r\n    \r\n    }\r\n\r\n","title":"Spring WebSocket: Public &amp; Private(User specific) messaging using the same subscription","body":"<p>I followed the <a href=\"https://spring.io/guides/gs/messaging-stomp-websocket/\" rel=\"nofollow noreferrer\">https://spring.io/guides/gs/messaging-stomp-websocket/</a> and added a few modifications (mainly Spring Security Auth and dynamic topics(Rooms)).</p>\n<p>My goal was to broadcast a <strong>JOIN</strong> message to all users except the one <em>joining</em>. I originally came from Socket.IO and there is a simple method that does this but in spring there doesn't seem to be one so I just used the <code>SimpUserRegistry</code>, to get a list of users, then removed the user joining the topic, and <code>simpMessagingTemplate.convertAndSendToUser</code> to send the message to the rest of the users.</p>\n<pre><code>// Socket.IO: sending to all clients except sender (Can't find if Spring has something like this.)\n// My Spring Solution seems janky compared to this.\nsocket.broadcast.emit('message', &quot;this is a test&quot;);\n</code></pre>\n<p>But to even send messages directly to users already subscribed to a topic I need to have the client subscribe twice:</p>\n<pre><code>    // Client-Side JS\n    // public/general\n    stompClient.subscribe(`/topic/${roomId}`, (message) =&gt; {...}\n    // private/direct user message\n    stompClient.subscribe(`/user/topic/${roomId}`, (message) =&gt; {...}\n</code></pre>\n<p>Is my solution as janky as I think it is or is there a correct/better way that Spring already provides similar to the socket.io way?</p>\n<p>WebSocket Configuration file just in case:</p>\n<pre><code>@Configuration\n@EnableWebSocketMessageBroker\npublic class WebSocketConfig implements WebSocketMessageBrokerConfigurer {\n    \n    @Override\n    public void configureMessageBroker(MessageBrokerRegistry config) {\n        config.enableSimpleBroker(&quot;/topic&quot;); \n        config.setApplicationDestinationPrefixes(&quot;/app&quot;); \n        config.setUserDestinationPrefix(&quot;/user&quot;);\n    }\n\n    @Override\n    public void registerStompEndpoints(StompEndpointRegistry registry) {\n        registry.addEndpoint(&quot;/fallback-websocket&quot;).withSockJS();\n    }\n\n}\n</code></pre>\n"},{"tags":["java","ssl","apache-kafka","sasl"],"answers":[{"tags":[],"owner":{"account_id":18562970,"reputation":392,"user_id":13526580,"display_name":"Jessica Vasey"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1674722426,"creation_date":1674722426,"answer_id":75243795,"question_id":75243265,"body_markdown":"SASL_SSL used TLS encryption like SSL so you will need to create a certificate, and with SASL_SSL you need to specify an authentication method. \r\n\r\nThis page should help you https://developer.confluent.io/learn-kafka/security/authentication-ssl-and-sasl-ssl/\r\n\r\nSASL_PLAINTEXT doesn&#39;t use TLS encryption (SASL_PLAIN does and this uses the username/password authentication). \r\n\r\nIt really all depends on your security requirements. SASL_SSL is mainly used when integrating with a existing authentication server but this increases your vulnerability to attacks. ","title":"Do we need Certificate for Kafka SASL_SSL?","body":"<p>SASL_SSL used TLS encryption like SSL so you will need to create a certificate, and with SASL_SSL you need to specify an authentication method.</p>\n<p>This page should help you <a href=\"https://developer.confluent.io/learn-kafka/security/authentication-ssl-and-sasl-ssl/\" rel=\"nofollow noreferrer\">https://developer.confluent.io/learn-kafka/security/authentication-ssl-and-sasl-ssl/</a></p>\n<p>SASL_PLAINTEXT doesn't use TLS encryption (SASL_PLAIN does and this uses the username/password authentication).</p>\n<p>It really all depends on your security requirements. SASL_SSL is mainly used when integrating with a existing authentication server but this increases your vulnerability to attacks.</p>\n"}],"owner":{"account_id":8898928,"reputation":419,"user_id":6642944,"accept_rate":43,"display_name":"Thomson Mathew"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":564,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75243795,"answer_count":1,"score":1,"last_activity_date":1674749608,"creation_date":1674718796,"question_id":75243265,"body_markdown":"I am confused on SASL_SSL. Do we need SSL certificate configured for the Kafka producer application ? Or is it just the username and password ? What is the difference between SASL_SSL and SASL_PLAINTEXT ? I am sending message from a plain java application to a topic.","title":"Do we need Certificate for Kafka SASL_SSL?","body":"<p>I am confused on SASL_SSL. Do we need SSL certificate configured for the Kafka producer application ? Or is it just the username and password ? What is the difference between SASL_SSL and SASL_PLAINTEXT ? I am sending message from a plain java application to a topic.</p>\n"},{"tags":["java","apache-kafka"],"answers":[{"tags":[],"owner":{"account_id":19112276,"reputation":777,"user_id":13958041,"display_name":"Rishabh Sharma"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674749530,"creation_date":1674749530,"answer_id":75248766,"question_id":75154758,"body_markdown":"As per the [documentation][1]:\r\n\r\n\r\n&gt; Note that this method will raise TimeoutException if the transaction\r\n&gt; cannot be committed before expiration of max.block.ms. Additionally,\r\n&gt; it will raise InterruptException if interrupted. It is safe to retry\r\n&gt; in either case, but it is not possible to attempt a different\r\n&gt; operation (such as abortTransaction) since the commit may already be\r\n&gt; in the progress of completing. If not retrying, the only option is to\r\n&gt; close the producer.\r\n\r\nThe problem here is that the kafka producer has timed out and it does not know whether the kafka broker will complete the transaction or not. So it cannot provide you abort transaction functionality as there is a chance that the transaction might have been committed by the broker even after the producer times out.\r\n\r\nYou should configure your kafka producer with a sufficiently large `max.block.ms` and good number of `retries` to handle such scenarios (Not sure why you have configured your retries to 1). Ideally you should be timing out very rarely - like when there is some issue in the network or there is some actual issue going on in kafka brokers.\r\n\r\nIn such scenarios, it won&#39;t be possible for you to know if your last transaction was actually successful or not. You cannot do anything but close your kafka producer and create a new one.\r\n\r\n\r\n  [1]: https://kafka.apache.org/23/javadoc/org/apache/kafka/clients/producer/KafkaProducer.html#commitTransaction--","title":"Kafka transaction commit timeout exception handling","body":"<p>As per the <a href=\"https://kafka.apache.org/23/javadoc/org/apache/kafka/clients/producer/KafkaProducer.html#commitTransaction--\" rel=\"nofollow noreferrer\">documentation</a>:</p>\n<blockquote>\n<p>Note that this method will raise TimeoutException if the transaction\ncannot be committed before expiration of max.block.ms. Additionally,\nit will raise InterruptException if interrupted. It is safe to retry\nin either case, but it is not possible to attempt a different\noperation (such as abortTransaction) since the commit may already be\nin the progress of completing. If not retrying, the only option is to\nclose the producer.</p>\n</blockquote>\n<p>The problem here is that the kafka producer has timed out and it does not know whether the kafka broker will complete the transaction or not. So it cannot provide you abort transaction functionality as there is a chance that the transaction might have been committed by the broker even after the producer times out.</p>\n<p>You should configure your kafka producer with a sufficiently large <code>max.block.ms</code> and good number of <code>retries</code> to handle such scenarios (Not sure why you have configured your retries to 1). Ideally you should be timing out very rarely - like when there is some issue in the network or there is some actual issue going on in kafka brokers.</p>\n<p>In such scenarios, it won't be possible for you to know if your last transaction was actually successful or not. You cannot do anything but close your kafka producer and create a new one.</p>\n"}],"owner":{"account_id":16025247,"reputation":1,"user_id":11565660,"display_name":"pooja Mamidwar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":525,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1674749530,"creation_date":1674016856,"question_id":75154758,"body_markdown":"I am running kafka transactions on a large scale and below is the codepiece.\r\n\r\n    producer.initTransaction();\r\n    try {\r\n        producer.beginTransaction();\r\n        producer.send(new ProducerRecord&lt;&gt;(producerTopic, element));\r\n        producer.commitTransaction();\r\n    } catch (ProducerFencedException | OutOfOrderSequenceException | AuthorizationException e) {\r\n        producer.close();\r\n        canSendNext = false;\r\n    }catch (KafkaException e) {\r\n        producer.abortTransaction();\r\n    }\r\n\r\n\r\nproperties used:\r\n&gt; ProducerConfig.KEY_SERIALIZER_CLASS_CONFIG, STRING_SERIALIZER\r\n&gt; ProducerConfig.VALUE_SERIALIZER_CLASS_CONFIG, BYTE_ARRAY_SERIALIZER\r\n&gt; ProducerConfig.TRANSACTIONAL_ID_CONFIG, UUID.randomUUID().toString()\r\n&gt; bootstrap.servers=localhost:9092\r\n&gt; acks=all\r\n&gt; retries=1\r\n&gt; partitioner.class=org.apache.kafka.clients.producer.RoundRobinPartitioner\r\n\r\n        \r\nwhile the commitTransaction is timing out the catch block of KafkaException runs and try to abort the transaction.\r\nWhich fails with the error: **\r\nCannot attempt operation `abortTransaction` because the previous call to `commitTransaction` timed out and must be retried**\r\n\r\nhow to handle commit transaction timeout scenario\r\n\r\nexpecting the code to work","title":"Kafka transaction commit timeout exception handling","body":"<p>I am running kafka transactions on a large scale and below is the codepiece.</p>\n<pre><code>producer.initTransaction();\ntry {\n    producer.beginTransaction();\n    producer.send(new ProducerRecord&lt;&gt;(producerTopic, element));\n    producer.commitTransaction();\n} catch (ProducerFencedException | OutOfOrderSequenceException | AuthorizationException e) {\n    producer.close();\n    canSendNext = false;\n}catch (KafkaException e) {\n    producer.abortTransaction();\n}\n</code></pre>\n<p>properties used:</p>\n<blockquote>\n<p>ProducerConfig.KEY_SERIALIZER_CLASS_CONFIG, STRING_SERIALIZER\nProducerConfig.VALUE_SERIALIZER_CLASS_CONFIG, BYTE_ARRAY_SERIALIZER\nProducerConfig.TRANSACTIONAL_ID_CONFIG, UUID.randomUUID().toString()\nbootstrap.servers=localhost:9092\nacks=all\nretries=1\npartitioner.class=org.apache.kafka.clients.producer.RoundRobinPartitioner</p>\n</blockquote>\n<p>while the commitTransaction is timing out the catch block of KafkaException runs and try to abort the transaction.\nWhich fails with the error: **\nCannot attempt operation <code>abortTransaction</code> because the previous call to <code>commitTransaction</code> timed out and must be retried**</p>\n<p>how to handle commit transaction timeout scenario</p>\n<p>expecting the code to work</p>\n"},{"tags":["java","file","file-upload","upload","submit"],"comments":[{"owner":{"account_id":1223835,"reputation":75848,"user_id":1189885,"accept_rate":43,"display_name":"chrylis -cautiouslyoptimistic-"},"score":1,"creation_date":1481754988,"post_id":41153410,"comment_id":69508780,"body_markdown":"What does &quot;no real personal help&quot; mean?","body":"What does &quot;no real personal help&quot; mean?"},{"owner":{"display_name":"user7298925"},"score":0,"creation_date":1481755389,"post_id":41153410,"comment_id":69508939,"body_markdown":"@chrylis I appreciate the question, I just mean that it should be able to run by itself by one click. The user should not have to click multiple things to upload one file, just one click and the app would do the rest.","body":"@chrylis I appreciate the question, I just mean that it should be able to run by itself by one click. The user should not have to click multiple things to upload one file, just one click and the app would do the rest."},{"owner":{"account_id":1223835,"reputation":75848,"user_id":1189885,"accept_rate":43,"display_name":"chrylis -cautiouslyoptimistic-"},"score":0,"creation_date":1481755504,"post_id":41153410,"comment_id":69508983,"body_markdown":"Are you writing the backend as well?","body":"Are you writing the backend as well?"},{"owner":{"display_name":"user7298925"},"score":0,"creation_date":1481756429,"post_id":41153410,"comment_id":69509337,"body_markdown":"@chrylis If you mean the website, form and submit (PHP) then yes.","body":"@chrylis If you mean the website, form and submit (PHP) then yes."}],"answers":[{"tags":[],"owner":{"account_id":9853597,"reputation":21,"user_id":7298878,"display_name":"R. Salame"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1481758901,"creation_date":1481758901,"answer_id":41154121,"question_id":41153410,"body_markdown":"This link might be useful to you:\r\nhttp://commons.apache.org/proper/commons-fileupload/ \r\n\r\nThe Commons FileUpload package makes it easy to add robust, high-performance, file upload capability to your servlets and web applications.","title":"Upload file to a website using Java","body":"<p>This link might be useful to you:\n<a href=\"http://commons.apache.org/proper/commons-fileupload/\" rel=\"nofollow noreferrer\">http://commons.apache.org/proper/commons-fileupload/</a> </p>\n\n<p>The Commons FileUpload package makes it easy to add robust, high-performance, file upload capability to your servlets and web applications.</p>\n"},{"tags":[],"owner":{"account_id":4526333,"reputation":1103,"user_id":3678023,"accept_rate":86,"display_name":"Aaron Esau"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1481760054,"creation_date":1481758962,"answer_id":41154134,"question_id":41153410,"body_markdown":"This can be accomplished more easily by using [Apache HttpComponents][1]. I&#39;d advise using it, because Java&#39;s http client is not very good. If you don&#39;t want to use a 3rd party library, you can find a more complicated and less robust version [on this post][2]. Here&#39;s a sample using Apache HttpComponents:\r\n\r\n    public String uploadFile(String url, String paramater, File file)\r\n        HttpClient httpclient = new DefaultHttpClient();\r\n        httpclient.getParams().setParameter(CoreProtocolPNames.PROTOCOL_VERSION, HttpVersion.HTTP_1_1);\r\n        HttpPost httppost = new HttpPost(url);\r\n        MultipartEntity mpEntity = new MultipartEntity();\r\n        ContentBody cbFile = new FileBody(file, &quot;image/jpeg&quot;);\r\n        mpEntity.addPart(parameter, cbFile);\r\n        httppost.setEntity(mpEntity);\r\n        HttpResponse response = httpclient.execute(httppost);\r\n        HttpEntity resEntity = response.getEntity();\r\n        String response = response.getStatusLine();\r\n        httpclient.getConnectionManager().shutdown();\r\n        return response;\r\n    }\r\n\r\nWhere `String url` is the URL to upload the file to, `String parameter` is the parameter name for the http post request, and `File file` is the file to upload.\r\n\r\n\r\n  [1]: http://hc.apache.org/httpcomponents-client-ga/\r\n  [2]: https://stackoverflow.com/questions/2469451/upload-files-from-java-client-to-a-http-server","title":"Upload file to a website using Java","body":"<p>This can be accomplished more easily by using <a href=\"http://hc.apache.org/httpcomponents-client-ga/\" rel=\"nofollow noreferrer\">Apache HttpComponents</a>. I'd advise using it, because Java's http client is not very good. If you don't want to use a 3rd party library, you can find a more complicated and less robust version <a href=\"https://stackoverflow.com/questions/2469451/upload-files-from-java-client-to-a-http-server\">on this post</a>. Here's a sample using Apache HttpComponents:</p>\n\n<pre><code>public String uploadFile(String url, String paramater, File file)\n    HttpClient httpclient = new DefaultHttpClient();\n    httpclient.getParams().setParameter(CoreProtocolPNames.PROTOCOL_VERSION, HttpVersion.HTTP_1_1);\n    HttpPost httppost = new HttpPost(url);\n    MultipartEntity mpEntity = new MultipartEntity();\n    ContentBody cbFile = new FileBody(file, \"image/jpeg\");\n    mpEntity.addPart(parameter, cbFile);\n    httppost.setEntity(mpEntity);\n    HttpResponse response = httpclient.execute(httppost);\n    HttpEntity resEntity = response.getEntity();\n    String response = response.getStatusLine();\n    httpclient.getConnectionManager().shutdown();\n    return response;\n}\n</code></pre>\n\n<p>Where <code>String url</code> is the URL to upload the file to, <code>String parameter</code> is the parameter name for the http post request, and <code>File file</code> is the file to upload.</p>\n"},{"tags":[],"owner":{"account_id":2029577,"reputation":1180,"user_id":1813682,"accept_rate":50,"display_name":"toto"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1481775749,"creation_date":1481765397,"answer_id":41154987,"question_id":41153410,"body_markdown":"Try it: \r\nSTEP1: created and interface for events.\r\n\r\n    public interface IHTTPMultipart {\r\n    \r\n        public void OnFileUploading(String fileName, long uploading, long filesize, float porcent);\r\n    \r\n        public void OnFileUploaded(String fileName);\r\n        \r\n        public void OnAllFilesUploaded();\r\n    \r\n        public void OnDataReceived(byte[] content);\r\n    \r\n        public void OnError(int codeError);\r\n    \r\n        public void OnDownloadingData(long received, long max, float porcent);\r\n    }\r\n\r\nStep 2: Created a class uploader a files that implements IHTTPMultipart\r\n\r\n    import java.io.BufferedInputStream;\r\n    import java.io.ByteArrayOutputStream;\r\n    import java.io.File;\r\n    import java.io.FileInputStream;\r\n    import java.io.OutputStream;\r\n    import java.net.HttpURLConnection;\r\n    import java.net.URL;\r\n    import java.net.URLConnection;\r\n    import java.util.HashMap;\r\n    import java.util.Iterator;\r\n    import java.util.Map;\r\n    \r\n    /**\r\n     *\r\n     * @author Owner\r\n     */\r\n    public class HTTPMultipart implements Runnable {\r\n    \r\n        private final String boundary = &quot;===&quot; + System.currentTimeMillis() + &quot;===&quot;;\r\n        private static final String LINE_FEED = &quot;\\r\\n&quot;;\r\n        private HttpURLConnection httpConn;\r\n        private String charset = &quot;uft-8&quot;;\r\n        private final HashMap&lt;String, String&gt; variables = new HashMap&lt;String, String&gt;();\r\n        private final HashMap&lt;String, File&gt; files = new HashMap&lt;String, File&gt;();\r\n        private final String url;\r\n        private Thread th1 = null;\r\n        private IHTTPMultipart event = null;\r\n        private int buffer = 4096;\r\n        private int responseCode = -1;\r\n        private byte[] responseData = null;\r\n        private int timeOut = 120000;\r\n    \r\n        HTTPMultipart(String url) {\r\n            this.url = url;\r\n        }\r\n    \r\n        public void setEvent(IHTTPMultipart event) {\r\n            this.event = event;\r\n        }\r\n    \r\n        public void setBuffer(int buffer) {\r\n            this.buffer = buffer;\r\n        }\r\n    \r\n        public void setEncode(String enc) {\r\n            this.charset = enc;\r\n        }\r\n    \r\n        public void addVariable(String key, String value) {\r\n            if (!variables.containsKey(key)) {\r\n                variables.put(key, value);\r\n            }\r\n        }\r\n    \r\n        public void addFile(String key, File file) {\r\n            if (!files.containsKey(key)) {\r\n                files.put(key, file);\r\n            }\r\n        }\r\n    \r\n        public void addFile(String key, String file) {\r\n            if (!files.containsKey(key)) {\r\n                files.put(key, new File(file));\r\n            }\r\n        }\r\n    \r\n        public void setTimeOut(int timeOut) {\r\n            this.timeOut = timeOut;\r\n        }\r\n    \r\n        public int getResponseCode() {\r\n            return this.responseCode;\r\n        }\r\n    \r\n        public byte[] getResponseData() {\r\n            return this.responseData;\r\n        }\r\n    \r\n        public void send() {\r\n            th1 = new Thread(this);\r\n            th1.start();\r\n        }\r\n    \r\n        @Override\r\n        public void run() {\r\n            try {\r\n    \r\n                URL url1 = new URL(this.url);\r\n                httpConn = (HttpURLConnection) url1.openConnection();\r\n                httpConn.setUseCaches(false);\r\n                httpConn.setDoOutput(true); // indicates POST method\r\n                httpConn.setDoInput(true);\r\n                if (this.timeOut&gt;0){\r\n                httpConn.setConnectTimeout(this.timeOut);\r\n                }\r\n                httpConn.setRequestProperty(&quot;Content-Type&quot;,\r\n                        &quot;multipart/form-data; boundary=&quot; + boundary);\r\n                \r\n    \r\n                StringBuilder str = new StringBuilder();\r\n                //Read all variables.\r\n                Iterator it = this.variables.entrySet().iterator();\r\n    \r\n                while (it.hasNext()) {\r\n                    Map.Entry pairs = (Map.Entry) it.next();\r\n                    str.append(&quot;--&quot;).append(boundary).append(LINE_FEED);\r\n                    str.append(&quot;Content-Disposition: form-data; name=\\&quot;&quot;).append(String.valueOf(pairs.getKey())).append(&quot;\\&quot;&quot;)\r\n                            .append(LINE_FEED);\r\n                    str.append(&quot;Content-Type: text/plain; charset=&quot;).append(charset).append(\r\n                            LINE_FEED);\r\n                    str.append(LINE_FEED);\r\n                    str.append(String.valueOf(pairs.getValue())).append(LINE_FEED);\r\n                }\r\n    \r\n                \r\n                OutputStream os = httpConn.getOutputStream();\r\n                os.write(str.toString().getBytes());\r\n    \r\n              \r\n                it = this.files.entrySet().iterator();\r\n    \r\n                while (it.hasNext()) {\r\n                    str = new StringBuilder();\r\n                    Map.Entry pairs = (Map.Entry) it.next();\r\n                    File file = (File) pairs.getValue();\r\n                    String fieldName = String.valueOf(pairs.getKey());\r\n    \r\n                    String fileName = file.getName();\r\n                    str.append(&quot;--&quot;).append(boundary).append(LINE_FEED);\r\n                    str.append(&quot;Content-Disposition: form-data; name=\\&quot;&quot;).append(fieldName).append(&quot;\\&quot;; filename=\\&quot;&quot;).append(fileName).append(&quot;\\&quot;&quot;)\r\n                            .append(LINE_FEED);\r\n                    str.append(&quot;Content-Type: &quot;).append(URLConnection.guessContentTypeFromName(fileName))\r\n                            .append(LINE_FEED);\r\n                    str.append(&quot;Content-Transfer-Encoding: binary&quot;).append(LINE_FEED);\r\n                    str.append(LINE_FEED);\r\n                    \r\n    \r\n                    os.write(str.toString().getBytes());\r\n    \r\n                    FileInputStream inputStream = new FileInputStream(file);\r\n    \r\n                    byte[] buff = new byte[buffer];\r\n                    int bytesRead;\r\n                    long fileSize = file.length();\r\n                    long uploading = 0;\r\n                    while ((bytesRead = inputStream.read(buff)) != -1) {\r\n                        os.write(buff, 0, bytesRead);\r\n                        uploading += bytesRead;\r\n                        if (event != null) {\r\n                            float porcent = (uploading * 100) / fileSize;\r\n                            event.OnFileUploading(fileName, uploading, fileSize, porcent);\r\n                        }\r\n                    }\r\n                    inputStream.close();\r\n                    if (event != null) {\r\n                        event.OnFileUploading(fileName, fileSize, fileSize, 100f);\r\n                        event.OnFileUploaded(fileName);\r\n                    }\r\n    \r\n                }\r\n    \r\n                try {\r\n                    os.flush();\r\n                } catch (Exception e) {\r\n                }\r\n    \r\n                os.close();\r\n    \r\n                if (event != null) {\r\n                    event.OnAllFilesUploaded();\r\n                }\r\n    \r\n                if (httpConn.getResponseCode() == HttpURLConnection.HTTP_OK) {\r\n    \r\n                    BufferedInputStream bis2 = new BufferedInputStream(httpConn.getInputStream());\r\n                    ByteArrayOutputStream bos = new ByteArrayOutputStream();\r\n                    long maxSize = httpConn.getContentLengthLong();\r\n                    long received = 0l;\r\n                    byte[] buf = new byte[buffer];\r\n                    int bytesRead = -1;\r\n                    while ((bytesRead = bis2.read(buf)) != -1) {\r\n                        bos.write(buf, 0, bytesRead);\r\n                        received += bytesRead;\r\n                        if (event != null) {\r\n                            float porcent = (received * 100) / maxSize;\r\n                            event.OnDownloadingData(received, maxSize, porcent);\r\n                        }\r\n                    }\r\n    \r\n                    bis2.close();\r\n                    bos.close();\r\n    \r\n                    this.responseCode = 0;\r\n                    this.responseData = bos.toByteArray();\r\n    \r\n                    if (event != null) {\r\n                        this.event.OnDataReceived(this.responseData);\r\n                    }\r\n    \r\n                } else {\r\n    \r\n                    this.responseCode = 998;\r\n                    this.responseData = (httpConn.getResponseCode() + &quot;&quot;).getBytes();\r\n                    if (event != null) {\r\n                        this.event.OnError(httpConn.getResponseCode());\r\n                    }\r\n    \r\n                }\r\n    \r\n            } catch (Exception e) {\r\n                this.responseCode = 999;\r\n                this.responseData = e.getMessage().getBytes();\r\n                if (event != null) {\r\n                    event.OnError(999);\r\n                }\r\n            }\r\n        }\r\n    \r\n    }\r\n\r\nSTEP 3: TEST THE CODE.\r\n\r\n   \r\n\r\n    String url = &quot;add here your url http&quot;;\r\n    HTTPMultipart upload = new HTTPMultipart(url);\r\n    File file = new File(&quot;add here your file dir&quot;);\r\n    String variableName = &quot;myFile&quot;;\r\n    //Add one file or more files.\r\n    upload.addFile(variableName, file);\r\n    //Add variable example\r\n    upload.addVariable(&quot;var1&quot;, &quot;hello&quot;);\r\n    //Set the asyncronic events.\r\n    upload.setEvent(new Net.HTTP.IHTTPMultipart() {\r\n        @Override\r\n        public void OnFileUploading(String fileName, long uploading, long filesize, float porcent) {\r\n\r\n        }\r\n\r\n        @Override\r\n        public void OnFileUploaded(String fileName) {\r\n\r\n        }\r\n\r\n        @Override\r\n        public void OnAllFilesUploaded() {\r\n\r\n        }\r\n\r\n        @Override\r\n        public void OnDataReceived(byte[] content) {\r\n\r\n        }\r\n\r\n        @Override\r\n        public void OnError(int codeError) {\r\n\r\n        }\r\n\r\n        @Override\r\n        public void OnDownloadingData(long received, long max, float porcent) {\r\n\r\n        }\r\n    });\r\n    upload.send();\r\n\r\n","title":"Upload file to a website using Java","body":"<p>Try it: \nSTEP1: created and interface for events.</p>\n\n<pre><code>public interface IHTTPMultipart {\n\n    public void OnFileUploading(String fileName, long uploading, long filesize, float porcent);\n\n    public void OnFileUploaded(String fileName);\n\n    public void OnAllFilesUploaded();\n\n    public void OnDataReceived(byte[] content);\n\n    public void OnError(int codeError);\n\n    public void OnDownloadingData(long received, long max, float porcent);\n}\n</code></pre>\n\n<p>Step 2: Created a class uploader a files that implements IHTTPMultipart</p>\n\n<pre><code>import java.io.BufferedInputStream;\nimport java.io.ByteArrayOutputStream;\nimport java.io.File;\nimport java.io.FileInputStream;\nimport java.io.OutputStream;\nimport java.net.HttpURLConnection;\nimport java.net.URL;\nimport java.net.URLConnection;\nimport java.util.HashMap;\nimport java.util.Iterator;\nimport java.util.Map;\n\n/**\n *\n * @author Owner\n */\npublic class HTTPMultipart implements Runnable {\n\n    private final String boundary = \"===\" + System.currentTimeMillis() + \"===\";\n    private static final String LINE_FEED = \"\\r\\n\";\n    private HttpURLConnection httpConn;\n    private String charset = \"uft-8\";\n    private final HashMap&lt;String, String&gt; variables = new HashMap&lt;String, String&gt;();\n    private final HashMap&lt;String, File&gt; files = new HashMap&lt;String, File&gt;();\n    private final String url;\n    private Thread th1 = null;\n    private IHTTPMultipart event = null;\n    private int buffer = 4096;\n    private int responseCode = -1;\n    private byte[] responseData = null;\n    private int timeOut = 120000;\n\n    HTTPMultipart(String url) {\n        this.url = url;\n    }\n\n    public void setEvent(IHTTPMultipart event) {\n        this.event = event;\n    }\n\n    public void setBuffer(int buffer) {\n        this.buffer = buffer;\n    }\n\n    public void setEncode(String enc) {\n        this.charset = enc;\n    }\n\n    public void addVariable(String key, String value) {\n        if (!variables.containsKey(key)) {\n            variables.put(key, value);\n        }\n    }\n\n    public void addFile(String key, File file) {\n        if (!files.containsKey(key)) {\n            files.put(key, file);\n        }\n    }\n\n    public void addFile(String key, String file) {\n        if (!files.containsKey(key)) {\n            files.put(key, new File(file));\n        }\n    }\n\n    public void setTimeOut(int timeOut) {\n        this.timeOut = timeOut;\n    }\n\n    public int getResponseCode() {\n        return this.responseCode;\n    }\n\n    public byte[] getResponseData() {\n        return this.responseData;\n    }\n\n    public void send() {\n        th1 = new Thread(this);\n        th1.start();\n    }\n\n    @Override\n    public void run() {\n        try {\n\n            URL url1 = new URL(this.url);\n            httpConn = (HttpURLConnection) url1.openConnection();\n            httpConn.setUseCaches(false);\n            httpConn.setDoOutput(true); // indicates POST method\n            httpConn.setDoInput(true);\n            if (this.timeOut&gt;0){\n            httpConn.setConnectTimeout(this.timeOut);\n            }\n            httpConn.setRequestProperty(\"Content-Type\",\n                    \"multipart/form-data; boundary=\" + boundary);\n\n\n            StringBuilder str = new StringBuilder();\n            //Read all variables.\n            Iterator it = this.variables.entrySet().iterator();\n\n            while (it.hasNext()) {\n                Map.Entry pairs = (Map.Entry) it.next();\n                str.append(\"--\").append(boundary).append(LINE_FEED);\n                str.append(\"Content-Disposition: form-data; name=\\\"\").append(String.valueOf(pairs.getKey())).append(\"\\\"\")\n                        .append(LINE_FEED);\n                str.append(\"Content-Type: text/plain; charset=\").append(charset).append(\n                        LINE_FEED);\n                str.append(LINE_FEED);\n                str.append(String.valueOf(pairs.getValue())).append(LINE_FEED);\n            }\n\n\n            OutputStream os = httpConn.getOutputStream();\n            os.write(str.toString().getBytes());\n\n\n            it = this.files.entrySet().iterator();\n\n            while (it.hasNext()) {\n                str = new StringBuilder();\n                Map.Entry pairs = (Map.Entry) it.next();\n                File file = (File) pairs.getValue();\n                String fieldName = String.valueOf(pairs.getKey());\n\n                String fileName = file.getName();\n                str.append(\"--\").append(boundary).append(LINE_FEED);\n                str.append(\"Content-Disposition: form-data; name=\\\"\").append(fieldName).append(\"\\\"; filename=\\\"\").append(fileName).append(\"\\\"\")\n                        .append(LINE_FEED);\n                str.append(\"Content-Type: \").append(URLConnection.guessContentTypeFromName(fileName))\n                        .append(LINE_FEED);\n                str.append(\"Content-Transfer-Encoding: binary\").append(LINE_FEED);\n                str.append(LINE_FEED);\n\n\n                os.write(str.toString().getBytes());\n\n                FileInputStream inputStream = new FileInputStream(file);\n\n                byte[] buff = new byte[buffer];\n                int bytesRead;\n                long fileSize = file.length();\n                long uploading = 0;\n                while ((bytesRead = inputStream.read(buff)) != -1) {\n                    os.write(buff, 0, bytesRead);\n                    uploading += bytesRead;\n                    if (event != null) {\n                        float porcent = (uploading * 100) / fileSize;\n                        event.OnFileUploading(fileName, uploading, fileSize, porcent);\n                    }\n                }\n                inputStream.close();\n                if (event != null) {\n                    event.OnFileUploading(fileName, fileSize, fileSize, 100f);\n                    event.OnFileUploaded(fileName);\n                }\n\n            }\n\n            try {\n                os.flush();\n            } catch (Exception e) {\n            }\n\n            os.close();\n\n            if (event != null) {\n                event.OnAllFilesUploaded();\n            }\n\n            if (httpConn.getResponseCode() == HttpURLConnection.HTTP_OK) {\n\n                BufferedInputStream bis2 = new BufferedInputStream(httpConn.getInputStream());\n                ByteArrayOutputStream bos = new ByteArrayOutputStream();\n                long maxSize = httpConn.getContentLengthLong();\n                long received = 0l;\n                byte[] buf = new byte[buffer];\n                int bytesRead = -1;\n                while ((bytesRead = bis2.read(buf)) != -1) {\n                    bos.write(buf, 0, bytesRead);\n                    received += bytesRead;\n                    if (event != null) {\n                        float porcent = (received * 100) / maxSize;\n                        event.OnDownloadingData(received, maxSize, porcent);\n                    }\n                }\n\n                bis2.close();\n                bos.close();\n\n                this.responseCode = 0;\n                this.responseData = bos.toByteArray();\n\n                if (event != null) {\n                    this.event.OnDataReceived(this.responseData);\n                }\n\n            } else {\n\n                this.responseCode = 998;\n                this.responseData = (httpConn.getResponseCode() + \"\").getBytes();\n                if (event != null) {\n                    this.event.OnError(httpConn.getResponseCode());\n                }\n\n            }\n\n        } catch (Exception e) {\n            this.responseCode = 999;\n            this.responseData = e.getMessage().getBytes();\n            if (event != null) {\n                event.OnError(999);\n            }\n        }\n    }\n\n}\n</code></pre>\n\n<p>STEP 3: TEST THE CODE.</p>\n\n<pre><code>String url = \"add here your url http\";\nHTTPMultipart upload = new HTTPMultipart(url);\nFile file = new File(\"add here your file dir\");\nString variableName = \"myFile\";\n//Add one file or more files.\nupload.addFile(variableName, file);\n//Add variable example\nupload.addVariable(\"var1\", \"hello\");\n//Set the asyncronic events.\nupload.setEvent(new Net.HTTP.IHTTPMultipart() {\n    @Override\n    public void OnFileUploading(String fileName, long uploading, long filesize, float porcent) {\n\n    }\n\n    @Override\n    public void OnFileUploaded(String fileName) {\n\n    }\n\n    @Override\n    public void OnAllFilesUploaded() {\n\n    }\n\n    @Override\n    public void OnDataReceived(byte[] content) {\n\n    }\n\n    @Override\n    public void OnError(int codeError) {\n\n    }\n\n    @Override\n    public void OnDownloadingData(long received, long max, float porcent) {\n\n    }\n});\nupload.send();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2868397,"reputation":39,"user_id":2462210,"display_name":"user2462210"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674749508,"creation_date":1674490687,"answer_id":75212230,"question_id":41153410,"body_markdown":"My suggestion : \r\nuse Asynchronous Http Client from com.ning.http.client.\r\n\r\nversion in the example below : \r\n```\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;com.ning&lt;/groupId&gt;\r\n    &lt;artifactId&gt;async-http-client&lt;/artifactId&gt;\r\n    &lt;version&gt;1.9.31&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\nCode Example :\r\n```\r\npackage url;\r\n\r\nimport com.ning.http.client.AsyncHttpClient;\r\nimport com.ning.http.client.AsyncHttpClientConfig;\r\nimport com.ning.http.client.Response;\r\nimport com.ning.http.client.multipart.FilePart;\r\n\r\nimport java.io.File;\r\nimport java.io.IOException;\r\nimport java.nio.charset.StandardCharsets;\r\nimport java.util.concurrent.ExecutionException;\r\n\r\npublic class Upload {\r\n    public static void main(String[] args) throws IOException, ExecutionException, InterruptedException {\r\n        String url = &quot;http://...&quot;;\r\n        FilePart file = new FilePart(&quot;file&quot;, new File(&quot;c:/tmp/014.csv&quot;), &quot;text/csv&quot;, StandardCharsets.UTF_8, &quot;014.csv&quot;);\r\n        AsyncHttpClientConfig.Builder builder = new AsyncHttpClientConfig.Builder();\r\n        try (AsyncHttpClient httpClient = new AsyncHttpClient(builder.build())) {\r\n            AsyncHttpClient.BoundRequestBuilder requestBuilder = httpClient.preparePost(url).addBodyPart(file);\r\n            requestBuilder.addHeader(&quot;Content-Type&quot;, &quot;multipart/form-data&quot;);\r\n            Response response = requestBuilder.execute().get();\r\n            int status = response.getStatusCode();\r\n            String body = response.getResponseBody();\r\n            System.out.println(status + &quot;|&quot; + body + &quot;|&quot;);\r\n        }\r\n    }\r\n}\r\n```\r\nYou do not have to use MultipartBody or MultipartUtils classes.\r\n\r\nFrom this code, the request body will be :\r\n```\r\n--6wlOhAzOFwLqU5b1acdqVfknDfLVJwj4o5OAvhk\r\nContent-Disposition: form-data; name=&quot;file&quot;; filename=&quot;014.csv&quot;\r\nContent-Type: text/csv; charset=UTF-8\r\nContent-Transfer-Encoding: binary\r\n\r\n014;csv\r\n--6wlOhAzOFwLqU5b1acdqVfknDfLVJwj4o5OAvhk--\r\n```\r\nwhere &#39;014;csv&#39; is the content of the file named 014.csv.\r\n\r\nThe headers are :\r\n```\r\ncontent-length=238\r\ncontent-type=multipart/form-data; boundary=6wlOhAzOFwLqU5b1acdqVfknDfLVJwj4o5OAvhk\r\nconnection=keep-alive\r\nhost=localhost:8580\r\naccept=*/*\r\nuser-agent=AHC/1.0\r\n```\r\n\r\nNote that the physical name of the file is not transmitted, only the file name passed as last argument of FilePart constructor.\r\n","title":"Upload file to a website using Java","body":"<p>My suggestion :\nuse Asynchronous Http Client from com.ning.http.client.</p>\n<p>version in the example below :</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.ning&lt;/groupId&gt;\n    &lt;artifactId&gt;async-http-client&lt;/artifactId&gt;\n    &lt;version&gt;1.9.31&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Code Example :</p>\n<pre><code>package url;\n\nimport com.ning.http.client.AsyncHttpClient;\nimport com.ning.http.client.AsyncHttpClientConfig;\nimport com.ning.http.client.Response;\nimport com.ning.http.client.multipart.FilePart;\n\nimport java.io.File;\nimport java.io.IOException;\nimport java.nio.charset.StandardCharsets;\nimport java.util.concurrent.ExecutionException;\n\npublic class Upload {\n    public static void main(String[] args) throws IOException, ExecutionException, InterruptedException {\n        String url = &quot;http://...&quot;;\n        FilePart file = new FilePart(&quot;file&quot;, new File(&quot;c:/tmp/014.csv&quot;), &quot;text/csv&quot;, StandardCharsets.UTF_8, &quot;014.csv&quot;);\n        AsyncHttpClientConfig.Builder builder = new AsyncHttpClientConfig.Builder();\n        try (AsyncHttpClient httpClient = new AsyncHttpClient(builder.build())) {\n            AsyncHttpClient.BoundRequestBuilder requestBuilder = httpClient.preparePost(url).addBodyPart(file);\n            requestBuilder.addHeader(&quot;Content-Type&quot;, &quot;multipart/form-data&quot;);\n            Response response = requestBuilder.execute().get();\n            int status = response.getStatusCode();\n            String body = response.getResponseBody();\n            System.out.println(status + &quot;|&quot; + body + &quot;|&quot;);\n        }\n    }\n}\n</code></pre>\n<p>You do not have to use MultipartBody or MultipartUtils classes.</p>\n<p>From this code, the request body will be :</p>\n<pre><code>--6wlOhAzOFwLqU5b1acdqVfknDfLVJwj4o5OAvhk\nContent-Disposition: form-data; name=&quot;file&quot;; filename=&quot;014.csv&quot;\nContent-Type: text/csv; charset=UTF-8\nContent-Transfer-Encoding: binary\n\n014;csv\n--6wlOhAzOFwLqU5b1acdqVfknDfLVJwj4o5OAvhk--\n</code></pre>\n<p>where '014;csv' is the content of the file named 014.csv.</p>\n<p>The headers are :</p>\n<pre><code>content-length=238\ncontent-type=multipart/form-data; boundary=6wlOhAzOFwLqU5b1acdqVfknDfLVJwj4o5OAvhk\nconnection=keep-alive\nhost=localhost:8580\naccept=*/*\nuser-agent=AHC/1.0\n</code></pre>\n<p>Note that the physical name of the file is not transmitted, only the file name passed as last argument of FilePart constructor.</p>\n"}],"owner":{"display_name":"user7298925"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4300,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":4,"score":1,"last_activity_date":1674749508,"creation_date":1481754884,"question_id":41153410,"body_markdown":"I am not completely sure if this is possible, but I would like to upload a file to a website of which I have created. I would like to upload this file, by only using Java and no real personal help. By this I mean a user would be able to click the application and then the application would do the rest. \r\nSo lets say I have a variable with the file like so `final static File file = new File (”file.txt”);` and then in some way connect to a website like `http://example.com/` which would then have a form to upload files to. The code would then upload the `file.txt` to the form and submit it. \r\nIn theory it seems possible, but I am not completely sure where to start and whether there are any Jar libraries or already written codes, which could possibly help. If this is not possible I would like to know if there are any other possible way, which could achieve the same thing in another way.  ","title":"Upload file to a website using Java","body":"<p>I am not completely sure if this is possible, but I would like to upload a file to a website of which I have created. I would like to upload this file, by only using Java and no real personal help. By this I mean a user would be able to click the application and then the application would do the rest. \nSo lets say I have a variable with the file like so <code>final static File file = new File (”file.txt”);</code> and then in some way connect to a website like <code>http://example.com/</code> which would then have a form to upload files to. The code would then upload the <code>file.txt</code> to the form and submit it. \nIn theory it seems possible, but I am not completely sure where to start and whether there are any Jar libraries or already written codes, which could possibly help. If this is not possible I would like to know if there are any other possible way, which could achieve the same thing in another way.  </p>\n"},{"tags":["java","apache-kafka","apache-kafka-streams"],"answers":[{"tags":[],"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674602961,"creation_date":1674602961,"answer_id":75228329,"question_id":75227682,"body_markdown":"Don&#39;t use just one `String#contains`, then. \r\n\r\n```\r\n.branch((k, v) -&gt; v != null &amp;&amp; v.contains(&quot;abc&quot;) &amp;&amp; v.contains(&quot;xyz&quot;), Branched.as(&quot;both&quot;))\r\n```","title":"Kafka Stream with Java: Send the same object to multiple topics if it matches certain criteria","body":"<p>Don't use just one <code>String#contains</code>, then.</p>\n<pre><code>.branch((k, v) -&gt; v != null &amp;&amp; v.contains(&quot;abc&quot;) &amp;&amp; v.contains(&quot;xyz&quot;), Branched.as(&quot;both&quot;))\n</code></pre>\n"}],"owner":{"account_id":5814483,"reputation":1,"user_id":4584576,"display_name":"Dmitriy M."},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":411,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1674749416,"creation_date":1674597263,"question_id":75227682,"body_markdown":"**Task**: there is a Kafka-topic we listen to. After processing we want to see messages in three different output topics whereas *the same message might go to several output topics*. How to model a such demultiplexer with Kafka-Streams?\r\n\r\nI have tried to use:\r\n\r\n```\r\n        Map&lt;String, KStream&lt;String, String&gt;&gt; branches = builder\r\n                .stream(&quot;input&quot;, Consumed.with(Serdes.String(), Serdes.String()))\r\n                .transform(supplier1, &quot;TRANSIT_STORE_NAME&quot;)\r\n                .split(Named.as(&quot;prepare_data&quot;))\r\n                .branch((k, v) -&gt; v != null &amp;&amp; v.contains(&quot;xyz&quot;), Branched.as(&quot;xyz&quot;))\r\n                .branch((k, v) -&gt; v != null &amp;&amp; v.contains(&quot;abc&quot;), Branched.as(&quot;abc&quot;))\r\n                .noDefaultBranch();\r\n        branches.get(&quot;prepare_dataxyz&quot;)\r\n                .transform(supplier2)\r\n                .to(&quot;output.xyz&quot;);\r\n        branches.get(&quot;prepare_dataabc&quot;)\r\n                .transform(supplier2)\r\n                .to(&quot;output.abc&quot;);\r\n```\r\n\r\nSo a record having value = *&quot;abcxyz_blabla&quot;* should theoretically go to the topic &quot;output.xyz&quot; __and__ to the topic &quot;output.abc&quot;.\r\n\r\nBut *branch()* acts in the way that the messages go to the first appropriate branch/topic.\r\nThe same effect has *filter()*.","title":"Kafka Stream with Java: Send the same object to multiple topics if it matches certain criteria","body":"<p><strong>Task</strong>: there is a Kafka-topic we listen to. After processing we want to see messages in three different output topics whereas <em>the same message might go to several output topics</em>. How to model a such demultiplexer with Kafka-Streams?</p>\n<p>I have tried to use:</p>\n<pre><code>        Map&lt;String, KStream&lt;String, String&gt;&gt; branches = builder\n                .stream(&quot;input&quot;, Consumed.with(Serdes.String(), Serdes.String()))\n                .transform(supplier1, &quot;TRANSIT_STORE_NAME&quot;)\n                .split(Named.as(&quot;prepare_data&quot;))\n                .branch((k, v) -&gt; v != null &amp;&amp; v.contains(&quot;xyz&quot;), Branched.as(&quot;xyz&quot;))\n                .branch((k, v) -&gt; v != null &amp;&amp; v.contains(&quot;abc&quot;), Branched.as(&quot;abc&quot;))\n                .noDefaultBranch();\n        branches.get(&quot;prepare_dataxyz&quot;)\n                .transform(supplier2)\n                .to(&quot;output.xyz&quot;);\n        branches.get(&quot;prepare_dataabc&quot;)\n                .transform(supplier2)\n                .to(&quot;output.abc&quot;);\n</code></pre>\n<p>So a record having value = <em>&quot;abcxyz_blabla&quot;</em> should theoretically go to the topic &quot;output.xyz&quot; <strong>and</strong> to the topic &quot;output.abc&quot;.</p>\n<p>But <em>branch()</em> acts in the way that the messages go to the first appropriate branch/topic.\nThe same effect has <em>filter()</em>.</p>\n"},{"tags":["java","imap","gmail-imap"],"comments":[{"owner":{"account_id":1550376,"reputation":10772,"user_id":1442918,"display_name":"Max"},"score":1,"creation_date":1674745650,"post_id":75247657,"comment_id":132782951,"body_markdown":"It has been a while but I do seem to believe that in some positions GIMAP would eat the character;  it if you fetched the whole message raw (so it didn’t have to parse it) it would come through fine (eg fetch part RFC822 or BODY)","body":"It has been a while but I do seem to believe that in some positions GIMAP would eat the character;  it if you fetched the whole message raw (so it didn’t have to parse it) it would come through fine (eg fetch part RFC822 or BODY)"},{"owner":{"account_id":171978,"reputation":1460,"user_id":399723,"accept_rate":25,"display_name":"Douglas Held"},"score":0,"creation_date":1674748222,"post_id":75247657,"comment_id":132783949,"body_markdown":"I&#39;m storing the raw header in a CLOB, so I&#39;ll try that right now. Thank you.","body":"I&#39;m storing the raw header in a CLOB, so I&#39;ll try that right now. Thank you."},{"owner":{"account_id":171978,"reputation":1460,"user_id":399723,"accept_rate":25,"display_name":"Douglas Held"},"score":0,"creation_date":1674748882,"post_id":75247657,"comment_id":132784193,"body_markdown":"Yes! That is definitely how to do it.  I&#39;m now fetching `UID FETCH 936238 (RFC822)` and I added `System.out.println( new String( bytes, StandardCharsets.ISO_8859_1 ) );`\n\nPlease create in the format of an answer, and I will accept it.","body":"Yes! That is definitely how to do it.  I&#39;m now fetching <code>UID FETCH 936238 (RFC822)</code> and I added <code>System.out.println( new String( bytes, StandardCharsets.ISO_8859_1 ) );</code>  Please create in the format of an answer, and I will accept it."},{"owner":{"account_id":1550376,"reputation":10772,"user_id":1442918,"display_name":"Max"},"score":0,"creation_date":1674749053,"post_id":75247657,"comment_id":132784255,"body_markdown":"Will do!  One moment.","body":"Will do!  One moment."},{"owner":{"account_id":458052,"reputation":9149,"user_id":857727,"display_name":"arnt"},"score":0,"creation_date":1674814889,"post_id":75247657,"comment_id":132797893,"body_markdown":"Max&#39;s answer solvers your problem, but I&#39;m such a pedant, I digress, and I love to answer side trivia that solve noone&#39;s problems. So... IMAP&#39;s semantics are such that Google has to either provide access to the original bytes in the message or provide access to the output of their charset guesser. IMAP lets a server do either, but not both. And that&#39;s why you don&#39;t get the guessed charset.","body":"Max&#39;s answer solvers your problem, but I&#39;m such a pedant, I digress, and I love to answer side trivia that solve noone&#39;s problems. So... IMAP&#39;s semantics are such that Google has to either provide access to the original bytes in the message or provide access to the output of their charset guesser. IMAP lets a server do either, but not both. And that&#39;s why you don&#39;t get the guessed charset."},{"owner":{"account_id":171978,"reputation":1460,"user_id":399723,"accept_rate":25,"display_name":"Douglas Held"},"score":0,"creation_date":1674815151,"post_id":75247657,"comment_id":132797978,"body_markdown":"Please turn in your pedant card, now. I would have been happy with either, but I believe Google provided neither. They returned to me the original bytes - after interpreting as UTF-8 - which lost the information of the ISO-8859-1 character value.","body":"Please turn in your pedant card, now. I would have been happy with either, but I believe Google provided neither. They returned to me the original bytes - after interpreting as UTF-8 - which lost the information of the ISO-8859-1 character value."}],"answers":[{"tags":[],"owner":{"account_id":1550376,"reputation":10772,"user_id":1442918,"display_name":"Max"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1674749176,"creation_date":1674749176,"answer_id":75248698,"question_id":75247657,"body_markdown":"In my past experience with GIMAP server, if it had to parse the headers to fulfill your request, it would tend to eat illegal characters. You can work around this by fetching the whole message in one go, and then the server will likely give you the raw data, unfiltered.\r\n\r\nI recommend trying to fetch RFC822 or the whole BODY section.","title":"How to retrieve an original byte from Google Gimap (rather than the replacement character)","body":"<p>In my past experience with GIMAP server, if it had to parse the headers to fulfill your request, it would tend to eat illegal characters. You can work around this by fetching the whole message in one go, and then the server will likely give you the raw data, unfiltered.</p>\n<p>I recommend trying to fetch RFC822 or the whole BODY section.</p>\n"}],"owner":{"account_id":171978,"reputation":1460,"user_id":399723,"accept_rate":25,"display_name":"Douglas Held"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":81,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75248698,"answer_count":1,"score":0,"last_activity_date":1674749176,"creation_date":1674744210,"question_id":75247657,"body_markdown":"I am creating an IMAP client for Google&#39;s Gimap service (IMAP4v2 with some extensions).\r\n\r\nI have a small number of emails for which, the FETCH command is returning the UTF-8 replacement character. Meanwhile, the character is displayed correctly in the Gmail web ui.\r\n\r\nFor an orientation, here&#39;s what the protocol exchange looks like with openssl s_client:\r\n\r\n&lt;pre&gt;\r\n    &lt;b&gt;openssl s_client -crlf -quiet -connect imap.gmail.com:993&lt;/b&gt;\r\n    * OK Gimap ready for requests from 80.229.146.237 q15mb3103507wmo\r\n    &lt;b&gt;1 LOGIN user@gmail.com app-password&lt;/b&gt;\r\n    * CAPABILITY IMAP4rev1 UNSELECT IDLE NAMESPACE QUOTA ID XLIST CHILDREN X-GM-EXT-1 UIDPLUS COMPRESS=DEFLATE ENABLE MOVE CONDSTORE ESEARCH UTF8=ACCEPT LIST-EXTENDED LIST-STATUS LITERAL- SPECIAL-USE APPENDLIMIT=35651584\r\n    1 OK user@gmail.com authenticated (Success)\r\n    &lt;b&gt;2 EXAMINE &quot;[Gmail]/All Mail&quot;&lt;/b&gt;\r\n    * FLAGS (\\Answered \\Flagged \\Draft \\Deleted \\Seen $Forwarded $Junk $MailFlagBit0 $NotJunk $NotPhishing $Phishing Forwarded Junk NotJunk)\r\n    * OK [PERMANENTFLAGS ()] Flags permitted.\r\n    * OK [UIDVALIDITY 1] UIDs valid.\r\n    * 95696 EXISTS\r\n    * 0 RECENT\r\n    * OK [UIDNEXT 1110737] Predicted next UID.\r\n    * OK [HIGHESTMODSEQ 11952911]\r\n    2 OK [READ-ONLY] [Gmail]/All Mail selected. (Success)\r\n    &lt;b&gt;3 UID FETCH 936238 (BODY[HEADER.FIELDS (Subject)])&lt;/b&gt;\r\n    * 44300 FETCH (UID 936238 BODY[HEADER.FIELDS (Subject)] {64}\r\n    Subject: Luc�a Cxxxxxxxxxxxxxxx posted a discussion on ASW\r\n    \r\n    )\r\n    3 OK Success\r\n    &lt;b&gt;4 LOGOUT&lt;/b&gt;\r\n    * BYE LOGOUT Requested\r\n    LOGOUT OK 73 good day (Success)\r\n    read:errno=0\r\n&lt;/pre&gt;\r\n\r\nThe terminal shows the UTF-8 replacement character, but that&#39;s not a necessary indicator of the problem. The true finding is when I read the bytes in Java code, Gimap passes me back the three UTF-8 bytes encoding the Unicode replacement character. I have underlined them below:\r\n\r\n    [ 53 , 75 , 62 , 6A , 65 , 63 , 74 , 3A , 20 , 4C , 75 , 63 , EF , BF , BD , 61 , 20 ,\r\n                                                                  ^^^  ^^^  ^^^\r\n\r\nMeanwhile, the email displays correctly in Gmail. Here is Google&#39;s &quot;view original&quot;...\r\n[![Screenshot of the Gmail &quot;view original&quot; page. The image shows the Subject header which includes a West European accented letter E character.][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/xQXPj.png\r\n\r\nBy RFC2822 all these header keys and values should be in 7-bit ASCII characters. That is obviously not the case with this email - but how does that explain that Google &quot;knows&quot; what the correct character is, but won&#39;t provide that same character to me through their API?\r\n\r\nI just wondered, if possibly I am not using IMAP4v1 correctly? I notice Gimap supports &quot;ENABLE=UTF-8&quot;, but the addition of this command sequence did not result in a difference in the behaviour.\r\n\r\n**Summary:**\r\n\r\n**Observation:** Original email to Google was invalid, and Google figured out how to store the proper character that was intended by the sender.\r\n\r\n**Expected result:** Google would give me the bytes they display, when I request this field\r\n\r\n**Actual result:** Google does not give me any bytes to describe the &#237;. Instead, Google&#39;s API returns to me bytes for the replacement character.\r\n\r\n**Discussion:** Maybe it is a Google implementation error - but I came here with my post to ensure I am actually handling the protocol interaction incorrectly.\r\n\r\nBelow is my minimal test case, Java code that I can use to access and print out the bytes.\r\n\r\n    package stackoverflow;\r\n    \r\n    import java.io.IOException;\r\n    import java.nio.charset.StandardCharsets;\r\n    import java.util.regex.Pattern;\r\n    import java.io.IOException;\r\n    import java.io.InputStream;\r\n    import java.io.PrintWriter;\r\n    import java.net.InetSocketAddress;\r\n    import java.net.Socket;\r\n    import javax.net.ssl.SSLSocketFactory;\r\n    \r\n    public class StackOverflowTestCase {\r\n    \r\n    \t/**\r\n    \t * Connect to Gimap server, download a single email&#39;s Subject header.\r\n    \t */\r\n    \tpublic static void main( String[] argzes ) throws IOException {\r\n    \r\n    \t\tSimpleIMAPClient g = new SimpleIMAPClient();\r\n    \t\ttry {\r\n    \t\t\tg.changeToLoggedInState().changeToSelectedState();\r\n    \t\t\tString input = &quot;&quot;;\r\n    \t\t\tPattern expectedResponse = Pattern.compile( &quot;\\\\* [1234567890]+ FETCH \\\\(UID 936238 .*&quot; );\r\n    \t\t\tg.sendCommand( &quot;4 UID FETCH 936238 (BODY[HEADER.FIELDS (Subject)])&quot; );\r\n    \t\t\twhile (!input.startsWith( &quot;4 OK &quot; )) {\r\n    \t\t\t\tinput = g.readLine();\r\n    \t\t\t\tif ( expectedResponse.matcher( input ).matches() ) {\r\n    \t\t\t\t\t// find the {999} construct in the response and parse the number.\r\n    \t\t\t\t\tint bytesToRead = Integer.parseInt( input.split( &quot;\\\\{|}&quot; )[1] );\r\n    \t\t\t\t\tbyte[] bytes = g.response.readNBytes( bytesToRead );\r\n    \t\t\t\t\tlog( bytes );\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t}\r\n    \t\tfinally {\r\n    \t\t\tg.logout();\r\n    \t\t}\r\n    \t}\r\n    \r\n    \t/**\r\n    \t * Pretty-print a byte array.\r\n    \t */\r\n    \tprivate static void log( byte[] bytes ) {\r\n    \t\tStringBuffer out = new StringBuffer();\r\n    \t\tout.append( &#39;[&#39; );\r\n    \t\tString prefix = &quot; &quot;;\r\n    \t\tfor (byte b : bytes) {\r\n    \t\t\tout.append( prefix + String.format( &quot;%02X &quot;, b ) );\r\n    \t\t\tprefix = &quot;, &quot;;\r\n    \t\t}\r\n    \t\tout.append( &#39;]&#39; );\r\n    \t\tSystem.out.println( out.toString() );\r\n    \t}\r\n    \r\n    \t/**\r\n    \t * Class that implements a subset of the IMAP 4v2 protocol.\r\n    \t * Only enough function is available to reproduce the test case for downloading one email header.\r\n    \t * */\r\n    \tprivate static class SimpleIMAPClient {\r\n    \r\n    \t\t/**\r\n    \t\t * When true, the line exchanges between IMAP client and IMAP server\r\n    \t\t * are printed to stdout and stderr respectively.\r\n    \t\t * */\r\n    \t\tstatic final boolean debug = true;\r\n    \r\n    \t\t/**\r\n    \t\t * IMAP connection state, per RFC3501#3\r\n    \t\t * */\r\n    \t\tpublic static class State {\r\n    \t\t\tpublic static final State NOT_AUTHENTICATED = new State();\r\n    \t\t\tpublic static final State AUTHENTICATED = new State();\r\n    \t\t\tpublic static final State SELECTED = new State();\r\n    \t\t\tpublic static final State LOGGED_OUT = new State();\r\n    \r\n    \t\t\tprivate State () {\r\n    \t\t\t}\r\n    \t\t}\r\n    \r\n    \t\t/**\r\n    \t\t * Outbound stream to the server\r\n    \t\t * */\r\n    \t\tpublic final PrintWriter request;\r\n    \t\t\r\n    \t\t/**\r\n    \t\t * Inbound stream from the server\r\n    \t\t */\r\n    \t\tpublic final InputStream response;\r\n    \t\t\r\n    \t\tprivate final Socket imap;\r\n    \t\tprivate State state;\r\n    \r\n    \t\t/**\r\n    \t\t * Constructs a connection to the Gmail Gimap server using the default ciphers available in the JDK.\r\n    \t\t * If established successfully, the object enters NOT_AUTHENTICATED state.\r\n    \t\t * @throws ExceptionInInitializerError if the connection cannot be established.\r\n    \t\t * */\r\n    \t\tpublic SimpleIMAPClient () {\r\n    \t\t\ttry {\r\n    \t\t\t\timap = SSLSocketFactory.getDefault().createSocket();\r\n    \t\t\t\timap.connect( new InetSocketAddress( &quot;imap.gmail.com&quot;, 993 ) );\r\n    \t\t\t\tSystem.out.println( &quot;Connection established to &quot; + imap.getRemoteSocketAddress() + &quot; from local port &quot;\r\n    \t\t\t\t\t\t+ imap.getLocalPort() );\r\n    \t\t\t\trequest = new PrintWriter( imap.getOutputStream(), true );\r\n    \t\t\t\tresponse = imap.getInputStream();\r\n    \t\t\t}\r\n    \t\t\tcatch ( IOException e ) {\r\n    \t\t\t\tthrow new ExceptionInInitializerError( e );\r\n    \t\t\t}\r\n    \t\t\tthis.state = State.NOT_AUTHENTICATED;\r\n    \t\t}\r\n    \r\n    \t\t/**\r\n    \t\t * Moves the state to LOGGED_OUT. The class can no longer be used after calling this method.\r\n    \t\t * */\r\n    \t\tpublic void logout() throws IOException {\r\n    \t\t\tsendCommand( &quot;LOGOUT LOGOUT&quot; );\r\n    \t\t\tString input = readLine();\r\n    \t\t\twhile (!input.startsWith( &quot;LOGOUT OK&quot; )) {\r\n    \t\t\t\tinput = readLine();\r\n    \t\t\t}\r\n    \t\t\tresponse.close();\r\n    \t\t\trequest.close();\r\n    \t\t\timap.close();\r\n    \t\t\tSystem.out.println( &quot;Disconnected.&quot; );\r\n    \t\t\tthis.state = State.LOGGED_OUT;\r\n    \t\t}\r\n    \r\n    \t\t/**\r\n    \t\t * Change the state to SELECTED by opening the &quot;All Mail&quot; mailbox in\r\n    \t\t * readonly mode. Returns a reference to this object.\r\n    \t\t * @throws IllegalStateException if the beginning state is not AUTHENTICATED.\r\n    \t\t */\r\n    \t\tpublic SimpleIMAPClient changeToSelectedState() throws IOException {\r\n    \r\n    \t\t\tif ( !state.equals( State.AUTHENTICATED ) )\r\n    \t\t\t\tthrow new IllegalStateException();\r\n    \r\n    \t\t\tsendCommand( &quot;3 EXAMINE \\&quot;[Gmail]/All Mail\\&quot;&quot; );\r\n    \t\t\tString input = readLine();\r\n    \t\t\twhile (!input.startsWith( &quot;3 OK &quot; )) {\r\n    \t\t\t\tinput = readLine();\r\n    \t\t\t}\r\n    \t\t\tthis.state = State.SELECTED;\r\n    \t\t\treturn this;\r\n    \t\t}\r\n    \r\n    \t\t/**\r\n    \t\t * Change the state to AUTHENTICATED; and then returns a reference to\r\n    \t\t * this object.\r\n    \t\t * TODO Note, the account and app-password are hard-coded into this method implementation.\r\n    \t\t * @throws IllegalStateException if the beginning state is not NOT_AUTHENTICATED.\r\n    \t\t */\r\n    \t\tpublic SimpleIMAPClient changeToLoggedInState() throws IOException {\r\n    \r\n    \t\t\tif ( !state.equals( State.NOT_AUTHENTICATED ) )\r\n    \t\t\t\tthrow new IllegalStateException();\r\n    \r\n    \t\t\tString input = readLine();\r\n    \t\t\twhile (!input.startsWith( &quot;* OK &quot; )) {\r\n    \t\t\t\tinput = readLine();\r\n    \t\t\t}\r\n    \t\t\tsendCommand( &quot;1 LOGIN user@gmail.com ***********&quot; );\r\n    \t\t\twhile (!input.startsWith( &quot;1 OK &quot; )) {\r\n    \t\t\t\tinput = readLine();\r\n    \t\t\t}\r\n    \r\n    \t\t\tthis.state = State.AUTHENTICATED;\r\n    \t\t\treturn this;\r\n    \t\t}\r\n    \r\n    \t\t/**\r\n    \t\t * Send the command to the IMAP server.\r\n    \t\t */\r\n    \t\tpublic void sendCommand( String message ) {\r\n    \r\n    \t\t\trequest.print( message );\r\n    \t\t\tif ( !message.endsWith( &quot;\\r\\n&quot; ) )\r\n    \t\t\t\trequest.print( &quot;\\r\\n&quot; );\r\n    \t\t\trequest.flush();\r\n    \t\t\tSystem.out.println( message );\r\n    \t\t}\r\n    \r\n    \t\t/**\r\n    \t\t * Reads String in the default Charset. Stray \\\\r or \\\\n characters will raise\r\n    \t\t * IOException. Only the \\\\r\\\\n sequence is allowed per RFC 3501#2.2.\r\n    \t\t * \r\n    \t\t * @returns The line, identified by its terminator \\\\r\\\\n.\r\n    \t\t */\r\n    \t\tpublic String readLine() throws IOException {\r\n    \r\n    \t\t\tStringBuffer line = new StringBuffer();\r\n    \t\t\tint ch = response.read();\r\n    \t\t\tchar prev = &#39;\\0&#39;;\r\n    \t\t\twhile (ch != -1) {\r\n    \t\t\t\tif ( line.length() == 0 ) {\r\n    \t\t\t\t\tif ( ( char ) ch == &#39;\\n&#39; ) {\r\n    \t\t\t\t\t\tthrow new IOException( &quot;Line begins with \\\\n&quot; );\r\n    \t\t\t\t\t}\r\n    \t\t\t\t} else {\r\n    \t\t\t\t\tif ( prev == &#39;\\r&#39; &amp;&amp; ( char ) ch == &#39;\\n&#39; ) {\r\n    \t\t\t\t\t\tline.setLength( line.length() - 1 ); // chop off \\r\r\n    \t\t\t\t\t\tSystem.err.println( line.toString() );\r\n    \t\t\t\t\t\treturn line.toString();\r\n    \t\t\t\t\t} else if ( ( char ) ch == &#39;\\n&#39; ) {\r\n    \t\t\t\t\t\tthrow new IOException( &quot;Encountered \\\\n without \\\\r.&quot; );\r\n    \t\t\t\t\t}\r\n    \t\t\t\t}\r\n    \t\t\t\tprev = ( char ) ch;\r\n    \t\t\t\tline.append( prev );\r\n    \t\t\t\tch = response.read();\r\n    \t\t\t}\r\n    \t\t\tthrow new IOException( &quot;end of stream.&quot; );\r\n    \t\t}\r\n    \t}\r\n    }\r\n","title":"How to retrieve an original byte from Google Gimap (rather than the replacement character)","body":"<p>I am creating an IMAP client for Google's Gimap service (IMAP4v2 with some extensions).</p>\n<p>I have a small number of emails for which, the FETCH command is returning the UTF-8 replacement character. Meanwhile, the character is displayed correctly in the Gmail web ui.</p>\n<p>For an orientation, here's what the protocol exchange looks like with openssl s_client:</p>\n<pre>\n    <b>openssl s_client -crlf -quiet -connect imap.gmail.com:993</b>\n    * OK Gimap ready for requests from 80.229.146.237 q15mb3103507wmo\n    <b>1 LOGIN user@gmail.com app-password</b>\n    * CAPABILITY IMAP4rev1 UNSELECT IDLE NAMESPACE QUOTA ID XLIST CHILDREN X-GM-EXT-1 UIDPLUS COMPRESS=DEFLATE ENABLE MOVE CONDSTORE ESEARCH UTF8=ACCEPT LIST-EXTENDED LIST-STATUS LITERAL- SPECIAL-USE APPENDLIMIT=35651584\n    1 OK user@gmail.com authenticated (Success)\n    <b>2 EXAMINE \"[Gmail]/All Mail\"</b>\n    * FLAGS (\\Answered \\Flagged \\Draft \\Deleted \\Seen $Forwarded $Junk $MailFlagBit0 $NotJunk $NotPhishing $Phishing Forwarded Junk NotJunk)\n    * OK [PERMANENTFLAGS ()] Flags permitted.\n    * OK [UIDVALIDITY 1] UIDs valid.\n    * 95696 EXISTS\n    * 0 RECENT\n    * OK [UIDNEXT 1110737] Predicted next UID.\n    * OK [HIGHESTMODSEQ 11952911]\n    2 OK [READ-ONLY] [Gmail]/All Mail selected. (Success)\n    <b>3 UID FETCH 936238 (BODY[HEADER.FIELDS (Subject)])</b>\n    * 44300 FETCH (UID 936238 BODY[HEADER.FIELDS (Subject)] {64}\n    Subject: Luc�a Cxxxxxxxxxxxxxxx posted a discussion on ASW\n    \n    )\n    3 OK Success\n    <b>4 LOGOUT</b>\n    * BYE LOGOUT Requested\n    LOGOUT OK 73 good day (Success)\n    read:errno=0\n</pre>\n<p>The terminal shows the UTF-8 replacement character, but that's not a necessary indicator of the problem. The true finding is when I read the bytes in Java code, Gimap passes me back the three UTF-8 bytes encoding the Unicode replacement character. I have underlined them below:</p>\n<pre><code>[ 53 , 75 , 62 , 6A , 65 , 63 , 74 , 3A , 20 , 4C , 75 , 63 , EF , BF , BD , 61 , 20 ,\n                                                              ^^^  ^^^  ^^^\n</code></pre>\n<p>Meanwhile, the email displays correctly in Gmail. Here is Google's &quot;view original&quot;...\n<a href=\"https://i.stack.imgur.com/xQXPj.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xQXPj.png\" alt=\"Screenshot of the Gmail &quot;view original&quot; page. The image shows the Subject header which includes a West European accented letter E character.\" /></a></p>\n<p>By RFC2822 all these header keys and values should be in 7-bit ASCII characters. That is obviously not the case with this email - but how does that explain that Google &quot;knows&quot; what the correct character is, but won't provide that same character to me through their API?</p>\n<p>I just wondered, if possibly I am not using IMAP4v1 correctly? I notice Gimap supports &quot;ENABLE=UTF-8&quot;, but the addition of this command sequence did not result in a difference in the behaviour.</p>\n<p><strong>Summary:</strong></p>\n<p><strong>Observation:</strong> Original email to Google was invalid, and Google figured out how to store the proper character that was intended by the sender.</p>\n<p><strong>Expected result:</strong> Google would give me the bytes they display, when I request this field</p>\n<p><strong>Actual result:</strong> Google does not give me any bytes to describe the í. Instead, Google's API returns to me bytes for the replacement character.</p>\n<p><strong>Discussion:</strong> Maybe it is a Google implementation error - but I came here with my post to ensure I am actually handling the protocol interaction incorrectly.</p>\n<p>Below is my minimal test case, Java code that I can use to access and print out the bytes.</p>\n<pre><code>package stackoverflow;\n\nimport java.io.IOException;\nimport java.nio.charset.StandardCharsets;\nimport java.util.regex.Pattern;\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.io.PrintWriter;\nimport java.net.InetSocketAddress;\nimport java.net.Socket;\nimport javax.net.ssl.SSLSocketFactory;\n\npublic class StackOverflowTestCase {\n\n    /**\n     * Connect to Gimap server, download a single email's Subject header.\n     */\n    public static void main( String[] argzes ) throws IOException {\n\n        SimpleIMAPClient g = new SimpleIMAPClient();\n        try {\n            g.changeToLoggedInState().changeToSelectedState();\n            String input = &quot;&quot;;\n            Pattern expectedResponse = Pattern.compile( &quot;\\\\* [1234567890]+ FETCH \\\\(UID 936238 .*&quot; );\n            g.sendCommand( &quot;4 UID FETCH 936238 (BODY[HEADER.FIELDS (Subject)])&quot; );\n            while (!input.startsWith( &quot;4 OK &quot; )) {\n                input = g.readLine();\n                if ( expectedResponse.matcher( input ).matches() ) {\n                    // find the {999} construct in the response and parse the number.\n                    int bytesToRead = Integer.parseInt( input.split( &quot;\\\\{|}&quot; )[1] );\n                    byte[] bytes = g.response.readNBytes( bytesToRead );\n                    log( bytes );\n                }\n            }\n        }\n        finally {\n            g.logout();\n        }\n    }\n\n    /**\n     * Pretty-print a byte array.\n     */\n    private static void log( byte[] bytes ) {\n        StringBuffer out = new StringBuffer();\n        out.append( '[' );\n        String prefix = &quot; &quot;;\n        for (byte b : bytes) {\n            out.append( prefix + String.format( &quot;%02X &quot;, b ) );\n            prefix = &quot;, &quot;;\n        }\n        out.append( ']' );\n        System.out.println( out.toString() );\n    }\n\n    /**\n     * Class that implements a subset of the IMAP 4v2 protocol.\n     * Only enough function is available to reproduce the test case for downloading one email header.\n     * */\n    private static class SimpleIMAPClient {\n\n        /**\n         * When true, the line exchanges between IMAP client and IMAP server\n         * are printed to stdout and stderr respectively.\n         * */\n        static final boolean debug = true;\n\n        /**\n         * IMAP connection state, per RFC3501#3\n         * */\n        public static class State {\n            public static final State NOT_AUTHENTICATED = new State();\n            public static final State AUTHENTICATED = new State();\n            public static final State SELECTED = new State();\n            public static final State LOGGED_OUT = new State();\n\n            private State () {\n            }\n        }\n\n        /**\n         * Outbound stream to the server\n         * */\n        public final PrintWriter request;\n        \n        /**\n         * Inbound stream from the server\n         */\n        public final InputStream response;\n        \n        private final Socket imap;\n        private State state;\n\n        /**\n         * Constructs a connection to the Gmail Gimap server using the default ciphers available in the JDK.\n         * If established successfully, the object enters NOT_AUTHENTICATED state.\n         * @throws ExceptionInInitializerError if the connection cannot be established.\n         * */\n        public SimpleIMAPClient () {\n            try {\n                imap = SSLSocketFactory.getDefault().createSocket();\n                imap.connect( new InetSocketAddress( &quot;imap.gmail.com&quot;, 993 ) );\n                System.out.println( &quot;Connection established to &quot; + imap.getRemoteSocketAddress() + &quot; from local port &quot;\n                        + imap.getLocalPort() );\n                request = new PrintWriter( imap.getOutputStream(), true );\n                response = imap.getInputStream();\n            }\n            catch ( IOException e ) {\n                throw new ExceptionInInitializerError( e );\n            }\n            this.state = State.NOT_AUTHENTICATED;\n        }\n\n        /**\n         * Moves the state to LOGGED_OUT. The class can no longer be used after calling this method.\n         * */\n        public void logout() throws IOException {\n            sendCommand( &quot;LOGOUT LOGOUT&quot; );\n            String input = readLine();\n            while (!input.startsWith( &quot;LOGOUT OK&quot; )) {\n                input = readLine();\n            }\n            response.close();\n            request.close();\n            imap.close();\n            System.out.println( &quot;Disconnected.&quot; );\n            this.state = State.LOGGED_OUT;\n        }\n\n        /**\n         * Change the state to SELECTED by opening the &quot;All Mail&quot; mailbox in\n         * readonly mode. Returns a reference to this object.\n         * @throws IllegalStateException if the beginning state is not AUTHENTICATED.\n         */\n        public SimpleIMAPClient changeToSelectedState() throws IOException {\n\n            if ( !state.equals( State.AUTHENTICATED ) )\n                throw new IllegalStateException();\n\n            sendCommand( &quot;3 EXAMINE \\&quot;[Gmail]/All Mail\\&quot;&quot; );\n            String input = readLine();\n            while (!input.startsWith( &quot;3 OK &quot; )) {\n                input = readLine();\n            }\n            this.state = State.SELECTED;\n            return this;\n        }\n\n        /**\n         * Change the state to AUTHENTICATED; and then returns a reference to\n         * this object.\n         * TODO Note, the account and app-password are hard-coded into this method implementation.\n         * @throws IllegalStateException if the beginning state is not NOT_AUTHENTICATED.\n         */\n        public SimpleIMAPClient changeToLoggedInState() throws IOException {\n\n            if ( !state.equals( State.NOT_AUTHENTICATED ) )\n                throw new IllegalStateException();\n\n            String input = readLine();\n            while (!input.startsWith( &quot;* OK &quot; )) {\n                input = readLine();\n            }\n            sendCommand( &quot;1 LOGIN user@gmail.com ***********&quot; );\n            while (!input.startsWith( &quot;1 OK &quot; )) {\n                input = readLine();\n            }\n\n            this.state = State.AUTHENTICATED;\n            return this;\n        }\n\n        /**\n         * Send the command to the IMAP server.\n         */\n        public void sendCommand( String message ) {\n\n            request.print( message );\n            if ( !message.endsWith( &quot;\\r\\n&quot; ) )\n                request.print( &quot;\\r\\n&quot; );\n            request.flush();\n            System.out.println( message );\n        }\n\n        /**\n         * Reads String in the default Charset. Stray \\\\r or \\\\n characters will raise\n         * IOException. Only the \\\\r\\\\n sequence is allowed per RFC 3501#2.2.\n         * \n         * @returns The line, identified by its terminator \\\\r\\\\n.\n         */\n        public String readLine() throws IOException {\n\n            StringBuffer line = new StringBuffer();\n            int ch = response.read();\n            char prev = '\\0';\n            while (ch != -1) {\n                if ( line.length() == 0 ) {\n                    if ( ( char ) ch == '\\n' ) {\n                        throw new IOException( &quot;Line begins with \\\\n&quot; );\n                    }\n                } else {\n                    if ( prev == '\\r' &amp;&amp; ( char ) ch == '\\n' ) {\n                        line.setLength( line.length() - 1 ); // chop off \\r\n                        System.err.println( line.toString() );\n                        return line.toString();\n                    } else if ( ( char ) ch == '\\n' ) {\n                        throw new IOException( &quot;Encountered \\\\n without \\\\r.&quot; );\n                    }\n                }\n                prev = ( char ) ch;\n                line.append( prev );\n                ch = response.read();\n            }\n            throw new IOException( &quot;end of stream.&quot; );\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","kotlin","arraylist","collections","get"],"answers":[{"tags":[],"owner":{"account_id":55050,"reputation":190509,"user_id":164835,"accept_rate":80,"display_name":"Kent"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1674731019,"creation_date":1674731019,"answer_id":75245256,"question_id":75245118,"body_markdown":"do you really need an extension for it? To call the extension you have to pass the concrete type of `T` right? Otherwise, he function doesn&#39;t know which type to check.\r\n\r\nHow about simply:\r\n\r\n    yourResult = yourList[5] as? ConcreteT","title":"How I can do it: typed Extension for Arraylist","body":"<p>do you really need an extension for it? To call the extension you have to pass the concrete type of <code>T</code> right? Otherwise, he function doesn't know which type to check.</p>\n<p>How about simply:</p>\n<pre><code>yourResult = yourList[5] as? ConcreteT\n</code></pre>\n"},{"tags":[],"owner":{"account_id":269240,"reputation":5686,"user_id":558457,"accept_rate":62,"display_name":"Viacheslav Smityukh"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1674736546,"creation_date":1674736546,"answer_id":75246219,"question_id":75245118,"body_markdown":"I think you have to check requirements because the function seems strange:\r\n\r\nBut if you really need it:\r\n\r\n    inline fun &lt;TE : Any, reified T: TE&gt; ArrayList&lt;TE&gt;.getTypeOrNull(index:Int) : T? =\r\n        getOrNull(index) as? T\r\n\r\nand now you can use it:\r\n\r\n    fun test() {\r\n        val list = ArrayList&lt;CharSequence&gt;()\r\n        val str: String? = list.getTypeOrNull(5)\r\n    }","title":"How I can do it: typed Extension for Arraylist","body":"<p>I think you have to check requirements because the function seems strange:</p>\n<p>But if you really need it:</p>\n<pre><code>inline fun &lt;TE : Any, reified T: TE&gt; ArrayList&lt;TE&gt;.getTypeOrNull(index:Int) : T? =\n    getOrNull(index) as? T\n</code></pre>\n<p>and now you can use it:</p>\n<pre><code>fun test() {\n    val list = ArrayList&lt;CharSequence&gt;()\n    val str: String? = list.getTypeOrNull(5)\n}\n</code></pre>\n"}],"owner":{"account_id":23772235,"reputation":11,"user_id":18251378,"display_name":"Антон"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1674749095,"creation_date":1674730252,"question_id":75245118,"body_markdown":"I try it:\r\n\r\n\r\n```\r\nfun &lt;T : E&gt; ArrayList&lt;E&gt;.getTypeOrNull(index:Int) : T? {\r\n  val item = this.getOrNull(index)\r\n  return if(item is T) item else null\r\n}\r\n```\r\n\r\n\r\nHow I can do it? I am newb on kotlin java","title":"How I can do it: typed Extension for Arraylist","body":"<p>I try it:</p>\n<pre><code>fun &lt;T : E&gt; ArrayList&lt;E&gt;.getTypeOrNull(index:Int) : T? {\n  val item = this.getOrNull(index)\n  return if(item is T) item else null\n}\n</code></pre>\n<p>How I can do it? I am newb on kotlin java</p>\n"},{"tags":["java","spring","algorithm","rest","tic-tac-toe"],"comments":[{"owner":{"account_id":9995852,"reputation":6086,"user_id":7393478,"display_name":"Kaddath"},"score":0,"creation_date":1674738040,"post_id":75246421,"comment_id":132780257,"body_markdown":"What&#39;s your question exacly, an idea for what? If you have errors, please include them in the question","body":"What&#39;s your question exacly, an idea for what? If you have errors, please include them in the question"},{"owner":{"account_id":23058102,"reputation":11,"user_id":17173862,"display_name":"Kacper Rydzyński"},"score":0,"creation_date":1674738263,"post_id":75246421,"comment_id":132780317,"body_markdown":"Sorry, just did","body":"Sorry, just did"},{"owner":{"account_id":9995852,"reputation":6086,"user_id":7393478,"display_name":"Kaddath"},"score":0,"creation_date":1674742580,"post_id":75246421,"comment_id":132781775,"body_markdown":"I find the code quite complex for what it does, it would have been easier to work with arrays rather than a flat list. Can you expand on &quot;not working as it&#39;s should&quot;, what do you get that inexpected?","body":"I find the code quite complex for what it does, it would have been easier to work with arrays rather than a flat list. Can you expand on &quot;not working as it&#39;s should&quot;, what do you get that inexpected?"},{"owner":{"account_id":23058102,"reputation":11,"user_id":17173862,"display_name":"Kacper Rydzyński"},"score":0,"creation_date":1674746450,"post_id":75246421,"comment_id":132783260,"body_markdown":"Then I will need to convert GameBoard to arrays just for those menthods, that&#39;s unnecessary. I got different bugs in differnet board corners. Sometimes its one player move too fast sometimes I nned to put 4 in row not 3.","body":"Then I will need to convert GameBoard to arrays just for those menthods, that&#39;s unnecessary. I got different bugs in differnet board corners. Sometimes its one player move too fast sometimes I nned to put 4 in row not 3."},{"owner":{"account_id":9995852,"reputation":6086,"user_id":7393478,"display_name":"Kaddath"},"score":0,"creation_date":1674746981,"post_id":75246421,"comment_id":132783463,"body_markdown":"Yes this was just a remark, don&#39;t change your data just to fit some methods, but it can be a reminder for future projects, what I meant is that does the method return win when it shouldn&#39;t, or does it fail to report a win, or both? You seem to say that it fails to report wins rather?","body":"Yes this was just a remark, don&#39;t change your data just to fit some methods, but it can be a reminder for future projects, what I meant is that does the method return win when it shouldn&#39;t, or does it fail to report a win, or both? You seem to say that it fails to report wins rather?"}],"answers":[{"tags":[],"owner":{"account_id":7142980,"reputation":323243,"user_id":5459839,"display_name":"trincot"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1674748988,"creation_date":1674748657,"answer_id":75248598,"question_id":75246421,"body_markdown":"The problem is that with `candidate = getPawnAtCoords(gameBoard, gameSize, row, 0)` you read a cell that might not be in the region you want to inspect: the column 0 might not be anywhere near. Yet, you **count** that cell. So for instance, with a 3-in-a-row game, when you scan the first row where a move was made in column 10, then that row might look like this:\r\n\r\n```none\r\nX------XX-X----\r\n          ^ last move\r\n       ^ inner loop starts here, but count is already 1 before it starts\r\n^ this X is counted erroneously\r\n```\r\n\r\nYour initialisation of `candidate` will count the left X and then will find two more X starting at index 7 (i.e. 10 - 3), and conclude there is a 3-in-a-row, but this is a false positive.\r\n\r\nYou can solve this in many ways. For instance, this will do the trick:\r\n\r\n    char candidate = &#39;-&#39;;\r\n    int counter = 0;\r\n\r\nSecondly, your encoding of an index (from row/column) is different from the *decoding* of an index (into row/column). In `getPawnAtCoords` the `column` is the smaller unit, and the `row` the bigger one (it is multiplied), yet in `checkHorizontalWin` you extract `moveX` as the bigger unit (as you divide), which is later used for the loop variable `column`.\r\n\r\nYou can fix this by changing the initialisation of `moveX` and `moveY` to:\r\n\r\n```\r\n    int moveX = moveIdx % gameSize;\r\n    int moveY = moveIdx / gameSize;\r\n```\r\n\r\nFinally, this is an overly complex algorithm. You already know what the last move was, as you can read `gameBoard[moveX]` and it is **that** character you want to check with, nothing else. So the variable `candidate` could be set to it -- only once. Then you don&#39;t need that `pawn == &#39;-&#39;` check anymore and only need to reset the counter to 0 when you find a character that is different from `candidate`.\r\n\r\nMoreover, for horizontal wins it is not necessary to look at any other row than the row of the last move.\r\n\r\n\r\n\r\n\r\n\r\n","title":"Algorithm That Checks Just Part Of Custom Size TicTacToe Game","body":"<p>The problem is that with <code>candidate = getPawnAtCoords(gameBoard, gameSize, row, 0)</code> you read a cell that might not be in the region you want to inspect: the column 0 might not be anywhere near. Yet, you <strong>count</strong> that cell. So for instance, with a 3-in-a-row game, when you scan the first row where a move was made in column 10, then that row might look like this:</p>\n<pre class=\"lang-none prettyprint-override\"><code>X------XX-X----\n          ^ last move\n       ^ inner loop starts here, but count is already 1 before it starts\n^ this X is counted erroneously\n</code></pre>\n<p>Your initialisation of <code>candidate</code> will count the left X and then will find two more X starting at index 7 (i.e. 10 - 3), and conclude there is a 3-in-a-row, but this is a false positive.</p>\n<p>You can solve this in many ways. For instance, this will do the trick:</p>\n<pre><code>char candidate = '-';\nint counter = 0;\n</code></pre>\n<p>Secondly, your encoding of an index (from row/column) is different from the <em>decoding</em> of an index (into row/column). In <code>getPawnAtCoords</code> the <code>column</code> is the smaller unit, and the <code>row</code> the bigger one (it is multiplied), yet in <code>checkHorizontalWin</code> you extract <code>moveX</code> as the bigger unit (as you divide), which is later used for the loop variable <code>column</code>.</p>\n<p>You can fix this by changing the initialisation of <code>moveX</code> and <code>moveY</code> to:</p>\n<pre><code>    int moveX = moveIdx % gameSize;\n    int moveY = moveIdx / gameSize;\n</code></pre>\n<p>Finally, this is an overly complex algorithm. You already know what the last move was, as you can read <code>gameBoard[moveX]</code> and it is <strong>that</strong> character you want to check with, nothing else. So the variable <code>candidate</code> could be set to it -- only once. Then you don't need that <code>pawn == '-'</code> check anymore and only need to reset the counter to 0 when you find a character that is different from <code>candidate</code>.</p>\n<p>Moreover, for horizontal wins it is not necessary to look at any other row than the row of the last move.</p>\n"}],"owner":{"account_id":23058102,"reputation":11,"user_id":17173862,"display_name":"Kacper Rydzyński"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1674748988,"creation_date":1674737648,"question_id":75246421,"body_markdown":"I wrote algortihm tht checks just part of tic tac toe game board, let&#39;s say its 10x10 size.\r\nThere&#39;s no need to iterate throught whole board every time, just around player move index + game diffuculty in each direction.\r\n\r\nHere is my impl:\r\n\r\n     private boolean checkHorizontalWin(String gameBoard, int gameSize, int gameDifficulty, int moveIdx) {\r\n        // CHECK HORIZONTAL WIN\r\n        int moveX = moveIdx / gameSize; // 15/10=1\r\n        int moveY = moveIdx % gameSize; // 15%10=5\r\n\r\n        int startX = clamp(moveX - gameDifficulty, 0, gameSize);\r\n        int startY = clamp(moveY - gameDifficulty, 0, gameSize);\r\n        int endX = clamp(moveX + gameDifficulty, 0, gameSize);\r\n        int endY = clamp(moveY + gameDifficulty, 0, gameSize);\r\n\r\n        for (int row = startY; row &lt; endY; row++) {\r\n            char candidate = getPawnAtCoords(gameBoard, gameSize, row, 0);\r\n            int counter = 1;\r\n            for (int column = startX; column &lt; endX; column++) {\r\n                char pawn = getPawnAtCoords(gameBoard, gameSize, row, column);\r\n\r\n                if ((pawn == candidate) &amp;&amp; (pawn != &#39;-&#39;)) {\r\n                    counter++;\r\n                } else {\r\n                    counter = 1;\r\n                    candidate = pawn;\r\n                }\r\n\r\n                if (counter == gameDifficulty) {\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n-----\r\n\r\n     private int clamp(int val, int min, int max) {\r\n        return Math.max(min, Math.min(max, val));\r\n    }\r\n\r\n-----\r\n\r\n     private char getPawnAtCoords(String board, int gameSize, int row, int column) {\r\n        int index = row * gameSize + column; // 1 * 10 + 5\r\n        return board.charAt(index);\r\n    }\r\n\r\nAlgorithm is not working as it&#39;s should when player move index is placed on board corner.\r\nAnyone gat an idea?","title":"Algorithm That Checks Just Part Of Custom Size TicTacToe Game","body":"<p>I wrote algortihm tht checks just part of tic tac toe game board, let's say its 10x10 size.\nThere's no need to iterate throught whole board every time, just around player move index + game diffuculty in each direction.</p>\n<p>Here is my impl:</p>\n<pre><code> private boolean checkHorizontalWin(String gameBoard, int gameSize, int gameDifficulty, int moveIdx) {\n    // CHECK HORIZONTAL WIN\n    int moveX = moveIdx / gameSize; // 15/10=1\n    int moveY = moveIdx % gameSize; // 15%10=5\n\n    int startX = clamp(moveX - gameDifficulty, 0, gameSize);\n    int startY = clamp(moveY - gameDifficulty, 0, gameSize);\n    int endX = clamp(moveX + gameDifficulty, 0, gameSize);\n    int endY = clamp(moveY + gameDifficulty, 0, gameSize);\n\n    for (int row = startY; row &lt; endY; row++) {\n        char candidate = getPawnAtCoords(gameBoard, gameSize, row, 0);\n        int counter = 1;\n        for (int column = startX; column &lt; endX; column++) {\n            char pawn = getPawnAtCoords(gameBoard, gameSize, row, column);\n\n            if ((pawn == candidate) &amp;&amp; (pawn != '-')) {\n                counter++;\n            } else {\n                counter = 1;\n                candidate = pawn;\n            }\n\n            if (counter == gameDifficulty) {\n                return true;\n            }\n        }\n    }\n    return false;\n}\n</code></pre>\n<hr />\n<pre><code> private int clamp(int val, int min, int max) {\n    return Math.max(min, Math.min(max, val));\n}\n</code></pre>\n<hr />\n<pre><code> private char getPawnAtCoords(String board, int gameSize, int row, int column) {\n    int index = row * gameSize + column; // 1 * 10 + 5\n    return board.charAt(index);\n}\n</code></pre>\n<p>Algorithm is not working as it's should when player move index is placed on board corner.\nAnyone gat an idea?</p>\n"},{"tags":["java","unit-testing","gradle","mocking","mockito"],"comments":[{"owner":{"account_id":4623673,"reputation":6002,"user_id":4161471,"display_name":"aSemy"},"score":0,"creation_date":1674897112,"post_id":75248610,"comment_id":132814945,"body_markdown":"_&quot;there is zero articles/documentation on how to properly test and mock Gradle Plugins&quot;_ There is documentation on testing Gradle plugins here: https://docs.gradle.org/7.6/userguide/testing_gradle_plugins.html","body":"<i>&quot;there is zero articles/documentation on how to properly test and mock Gradle Plugins&quot;</i> There is documentation on testing Gradle plugins here: <a href=\"https://docs.gradle.org/7.6/userguide/testing_gradle_plugins.html\" rel=\"nofollow noreferrer\">docs.gradle.org/7.6/userguide/testing_gradle_plugins.html</a>"},{"owner":{"account_id":57416,"reputation":7345,"user_id":171991,"accept_rate":86,"display_name":"marverix"},"score":2,"creation_date":1675012619,"post_id":75248610,"comment_id":132832196,"body_markdown":"Sorry, but this documentation is almost useless. There is no information how to mock Gradle projects.","body":"Sorry, but this documentation is almost useless. There is no information how to mock Gradle projects."}],"owner":{"account_id":57416,"reputation":7345,"user_id":171991,"accept_rate":86,"display_name":"marverix"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":243,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1674748715,"creation_date":1674748715,"question_id":75248610,"body_markdown":"I&#39;m trying to write UT for my Gradle plugin. I faced a wall while trying to mock Gradle Project methods. Under the hood, I&#39;m using Gradle Properties to calculate the plugin&#39;s extension providers. Example:\r\n\r\n```java\r\nthis.outputDir = project.getObjects().property(String.class);\r\nthis.outputDir.convention(project.provider(() -&gt; {\r\n  if (project.hasProperty(&quot;com.example.outputDir&quot;)) {\r\n    return project.property(&quot;com.example.outputDir&quot;).toString();\r\n  }\r\n  return &quot;./default-output&quot;;\r\n}));\r\n```\r\n\r\nI wanted to write simple tests checking if I provide the `com.example.outputDir` property, it will be returned by the convention. So I figured out, that I will mock `project.hasProperty` and `project.property`:\r\n\r\n```java\r\n// Creating Gradle Project on the fly\r\nProjectBuilder builder = ProjectBuilder.builder();\r\n\r\n// Mocking the Project (Project is an interface)\r\nProject testProject = Mockito.spy(builder.build());\r\n\r\n// Applying the plugin to the mocked project\r\ntestProject.getPlugins().apply(PLUGIN_NAME);\r\n\r\n// Enabling mock\r\nwhen(testProject.hasProperty(&quot;com.example.outputDir&quot;)).thenReturn(true);\r\n\r\n// This works (obviously)\r\nAssertions.assertEquals(true, testProject.hasProperty(&quot;com.example.outputDir&quot;));\r\n\r\n// This does not work\r\nMyExtension ext = (MyExtension) testProject.getExtensions().getByName(&quot;my-extension&quot;);\r\nAssertions.assertEquals(&quot;hello-world&quot;, ext.ouputDir.get());\r\n```\r\n\r\nAfter digging in into IntelliJ debugger, it seems that Gradle is keeping a registry of the projects... So when the extension is created, it&#39;s getting a reference to the original project, not mocked one. Which is super weird for me, because I&#39;m using `testProject.getPlugins().apply(PLUGIN_NAME);` so why on earth Gradle would not use a reference of the project that has called the function, and instead it&#39;s checking &quot;own source&quot;?\r\n\r\nSo I&#39;m wondering if is it even possible to test and mock Gradle Projects (and Plugins)? I heard that Gradle is a super popular tool, but there is zero articles/documentation on how to properly test and mock Gradle Plugins.\r\n\r\nI would appreciate for any help and guidance in this area. ","title":"Is it possible to mock Gradle Project methods?","body":"<p>I'm trying to write UT for my Gradle plugin. I faced a wall while trying to mock Gradle Project methods. Under the hood, I'm using Gradle Properties to calculate the plugin's extension providers. Example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>this.outputDir = project.getObjects().property(String.class);\nthis.outputDir.convention(project.provider(() -&gt; {\n  if (project.hasProperty(&quot;com.example.outputDir&quot;)) {\n    return project.property(&quot;com.example.outputDir&quot;).toString();\n  }\n  return &quot;./default-output&quot;;\n}));\n</code></pre>\n<p>I wanted to write simple tests checking if I provide the <code>com.example.outputDir</code> property, it will be returned by the convention. So I figured out, that I will mock <code>project.hasProperty</code> and <code>project.property</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>// Creating Gradle Project on the fly\nProjectBuilder builder = ProjectBuilder.builder();\n\n// Mocking the Project (Project is an interface)\nProject testProject = Mockito.spy(builder.build());\n\n// Applying the plugin to the mocked project\ntestProject.getPlugins().apply(PLUGIN_NAME);\n\n// Enabling mock\nwhen(testProject.hasProperty(&quot;com.example.outputDir&quot;)).thenReturn(true);\n\n// This works (obviously)\nAssertions.assertEquals(true, testProject.hasProperty(&quot;com.example.outputDir&quot;));\n\n// This does not work\nMyExtension ext = (MyExtension) testProject.getExtensions().getByName(&quot;my-extension&quot;);\nAssertions.assertEquals(&quot;hello-world&quot;, ext.ouputDir.get());\n</code></pre>\n<p>After digging in into IntelliJ debugger, it seems that Gradle is keeping a registry of the projects... So when the extension is created, it's getting a reference to the original project, not mocked one. Which is super weird for me, because I'm using <code>testProject.getPlugins().apply(PLUGIN_NAME);</code> so why on earth Gradle would not use a reference of the project that has called the function, and instead it's checking &quot;own source&quot;?</p>\n<p>So I'm wondering if is it even possible to test and mock Gradle Projects (and Plugins)? I heard that Gradle is a super popular tool, but there is zero articles/documentation on how to properly test and mock Gradle Plugins.</p>\n<p>I would appreciate for any help and guidance in this area.</p>\n"},{"tags":["java","html","css","angular","typescript"],"answers":[{"tags":[],"owner":{"account_id":21589224,"reputation":101,"user_id":15919145,"display_name":"NaingMinZaw"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1621444724,"creation_date":1621444724,"answer_id":67607980,"question_id":67607412,"body_markdown":"the solution\r\n\r\n          private fetchPost(){\r\n          return this.http.get(&#39;https://ng-complete-guide-b3d7f-default- \r\n          rtdb.firebaseio.com/posts.json&#39;)\r\n        .pipe(map((responseData:{[data:number]:any}) =&gt;  {\r\n         const dataArray = [];\r\n         for(let key in responseData){\r\n      if(responseData.hasOwnProperty(key)){\r\n        dataArray.push({...responseData[key], id:key});\r\n      }\r\n      }\r\n        return dataArray;\r\n      }))\r\n     .subscribe( responseData =&gt; {\r\n      console.log(responseData)\r\n     })\r\n     }\r\n\r\n     .pipe(map((responseData:{[data:number]:any}) //object type","title":"TS7053: Element implicitly has an &#39;any&#39; type because expression of type &#39;string&#39; can&#39;t be used to index type &#39;Object&#39;","body":"<p>the solution</p>\n<pre><code>      private fetchPost(){\n      return this.http.get('https://ng-complete-guide-b3d7f-default- \n      rtdb.firebaseio.com/posts.json')\n    .pipe(map((responseData:{[data:number]:any}) =&gt;  {\n     const dataArray = [];\n     for(let key in responseData){\n  if(responseData.hasOwnProperty(key)){\n    dataArray.push({...responseData[key], id:key});\n  }\n  }\n    return dataArray;\n  }))\n .subscribe( responseData =&gt; {\n  console.log(responseData)\n })\n }\n\n .pipe(map((responseData:{[data:number]:any}) //object type\n</code></pre>\n"},{"tags":[],"owner":{"account_id":20908619,"reputation":1,"user_id":15360002,"display_name":"HHH"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674748544,"creation_date":1674748412,"answer_id":75248552,"question_id":67607412,"body_markdown":"The Firebase nested object can be converted to this data type in the map function:&lt;br&gt;\r\n**responseData:{[key:string]:any}**\r\n\r\n ```javascript\r\nprivate fetchPosts() {\r\n    this.http\r\n      .get(&#39;https://ng-complete-guide-b3d7f-default- \r\n      rtdb.firebaseio.com/posts.json&#39;)\r\n      .pipe(map(\r\n        (responseData:{[key:string]:any}) =&gt; {\r\n        const dataArray = [];\r\n        for (const key in responseData) {\r\n          if(responseData.hasOwnProperty(key)){\r\n            dataArray.push({ ...responseData[key], id:key})\r\n          }\r\n        }\r\n        return dataArray;\r\n      }))\r\n      .subscribe(posts =&gt; {\r\n        console.log(posts);\r\n      });\r\n  }\r\n```\r\nI agree that we should avoid using &#39;any&#39; as much as possible. If you find a more accurate type compilable with the latest Angular version, please share it!","title":"TS7053: Element implicitly has an &#39;any&#39; type because expression of type &#39;string&#39; can&#39;t be used to index type &#39;Object&#39;","body":"<p>The Firebase nested object can be converted to this data type in the map function:<br>\n<strong>responseData:{[key:string]:any}</strong></p>\n<pre class=\"lang-js prettyprint-override\"><code>private fetchPosts() {\n   this.http\n     .get('https://ng-complete-guide-b3d7f-default- \n     rtdb.firebaseio.com/posts.json')\n     .pipe(map(\n       (responseData:{[key:string]:any}) =&gt; {\n       const dataArray = [];\n       for (const key in responseData) {\n         if(responseData.hasOwnProperty(key)){\n           dataArray.push({ ...responseData[key], id:key})\n         }\n       }\n       return dataArray;\n     }))\n     .subscribe(posts =&gt; {\n       console.log(posts);\n     });\n }\n</code></pre>\n<p>I agree that we should avoid using 'any' as much as possible. If you find a more accurate type compilable with the latest Angular version, please share it!</p>\n"}],"owner":{"account_id":21589224,"reputation":101,"user_id":15919145,"display_name":"NaingMinZaw"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":656,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":67607980,"answer_count":2,"score":1,"last_activity_date":1674748544,"creation_date":1621442505,"question_id":67607412,"body_markdown":"I try to post datas by using templateDrivenForm directly and get datas from fireBase but show the following type error.\r\n\r\nMy part of codes\r\n\r\n    //directly posts datas using submitButton from templateDrivenForm\r\n     onCreatePosts(postDatas:{title:string, content:string}){\r\n    this.http.post(&#39;https://ng-complete-guide-b3d7f-default-rtdb.firebaseio.com/posts.json&#39;,\r\n     postDatas)\r\n    .subscribe(\r\n     responseData =&gt; {\r\n      console.log(responseData);\r\n     });\r\n     }\r\n\r\n     //get datas from database\r\n       private fetchPost(){\r\n         return this.http.get(&#39;https://ng-complete-guide-b3d7f-default-rtdb.firebaseio.com/posts.json&#39;)\r\n       .pipe(map(responseData =&gt;  {\r\n         const dataArray = [];\r\n        for(let key in responseData){\r\n        if(responseData.hasOwnProperty(key)){\r\n        dataArray.push({...responseData[key], id:key});\r\n        }\r\n      }\r\n      return dataArray;\r\n     }))\r\n      .subscribe( responseData =&gt; {\r\n      console.log(responseData)\r\n     })\r\n    }\r\n\r\nMy error is \r\n\r\n         Error: src/app/app.component.ts:40:28 - error TS7053: Element implicitly has an &#39;any&#39; type \r\n          because \r\n         expression of type &#39;string&#39; can&#39;t be used to index type &#39;Object&#39;.\r\n          No index signature with a parameter of type &#39;string&#39; was found on type &#39;Object&#39;.\r\n\r\n         40         dataArray.push({...responseData[key], id:key});","title":"TS7053: Element implicitly has an &#39;any&#39; type because expression of type &#39;string&#39; can&#39;t be used to index type &#39;Object&#39;","body":"<p>I try to post datas by using templateDrivenForm directly and get datas from fireBase but show the following type error.</p>\n<p>My part of codes</p>\n<pre><code>//directly posts datas using submitButton from templateDrivenForm\n onCreatePosts(postDatas:{title:string, content:string}){\nthis.http.post('https://ng-complete-guide-b3d7f-default-rtdb.firebaseio.com/posts.json',\n postDatas)\n.subscribe(\n responseData =&gt; {\n  console.log(responseData);\n });\n }\n\n //get datas from database\n   private fetchPost(){\n     return this.http.get('https://ng-complete-guide-b3d7f-default-rtdb.firebaseio.com/posts.json')\n   .pipe(map(responseData =&gt;  {\n     const dataArray = [];\n    for(let key in responseData){\n    if(responseData.hasOwnProperty(key)){\n    dataArray.push({...responseData[key], id:key});\n    }\n  }\n  return dataArray;\n }))\n  .subscribe( responseData =&gt; {\n  console.log(responseData)\n })\n}\n</code></pre>\n<p>My error is</p>\n<pre><code>     Error: src/app/app.component.ts:40:28 - error TS7053: Element implicitly has an 'any' type \n      because \n     expression of type 'string' can't be used to index type 'Object'.\n      No index signature with a parameter of type 'string' was found on type 'Object'.\n\n     40         dataArray.push({...responseData[key], id:key});\n</code></pre>\n"},{"tags":["java","proxy","selenium-webdriver"],"answers":[{"tags":[],"owner":{"account_id":27625246,"reputation":29,"user_id":21085370,"display_name":"Daniel Delimata"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674747998,"creation_date":1674747998,"answer_id":75248487,"question_id":12033981,"body_markdown":"One way to connect to a proxy server with a user name and password is by using the tool `sshuttle` running on your machine. This tool allows you to create a connection to your proxy server using SSH, and then route all of your traffic.\r\n```\r\n$ sshuttle -r username@remotehost 0.0.0.0/0\r\n```\r\n\r\nSee https://sshuttle.readthedocs.io/en/stable/usage.html for further information.\r\n\r\nAnother approach is to add a Chrome extension. This approach is a bit more complex, but it allows you to use the Chrome WebDriver without any tools running in the background. You would need to create a Chrome extension by including two files in an archive named `proxy.zip`: `Background.js` and `manifest.js`.\r\n\r\n**Background.js**:\r\n```javascript\r\nvar config = {\r\n    mode: &quot;fixed_servers&quot;,\r\n    rules: {\r\n        singleProxy: {\r\n            scheme: &quot;http&quot;,\r\n            host: &quot;YOUR_PROXY_ADDRESS&quot;,\r\n            port: parseInt(PROXY_PORT)\r\n        },\r\n        bypassList: [&quot;foobar.com&quot;]\r\n    }\r\n};\r\nchrome.proxy.settings.set({ value: config, scope: &quot;regular&quot; }, function () { });\r\nfunction callbackFn(details) {\r\n    return {\r\n        authCredentials: {\r\n            username: &quot;PROXY_USERNAME&quot;,\r\n            password: &quot;PROXY_PASSWORD&quot;\r\n        }\r\n    };\r\n}\r\n\r\nchrome.webRequest.onAuthRequired.addListener(\r\n    callbackFn,\r\n    { urls: [&quot;&lt;all_urls&gt;&quot;] },\r\n    [&#39;blocking&#39;]\r\n);\r\n```\r\n\r\n**manifest.js**:\r\n```javascript\r\nvar config = {\r\n    mode: &quot;fixed_servers&quot;,\r\n    rules: {\r\n        singleProxy: {\r\n            scheme: &quot;http&quot;,\r\n            host: &quot;YOUR_PROXY_ADDRESS&quot;,\r\n            port: parseInt(PROXY_PORT)\r\n        },\r\n        bypassList: [&quot;foobar.com&quot;]\r\n    }\r\n};\r\nchrome.proxy.settings.set({ value: config, scope: &quot;regular&quot; }, function () { });\r\nfunction callbackFn(details) {\r\n    return {\r\n        authCredentials: {\r\n            username: &quot;PROXY_USERNAME&quot;,\r\n            password: &quot;PROXY_PASSWORD&quot;\r\n        }{\r\n            &quot;version&quot;: &quot;1.0.0&quot;,\r\n            &quot;manifest_version&quot;: 3,\r\n            &quot;name&quot;: &quot;Chrome Proxy&quot;,\r\n            &quot;permissions&quot;: [\r\n            &quot;Proxy&quot;,\r\n            &quot;Tabs&quot;,\r\n            &quot;unlimitedStorage&quot;,\r\n            &quot;Storage&quot;,\r\n            &quot;&lt;all_urls&gt;&quot;,\r\n            &quot;webRequest&quot;,\r\n            &quot;webRequestBlocking&quot;\r\n            ],\r\n            &quot;background&quot;: {\r\n            &quot;scripts&quot;: [&quot;background.js&quot;]\r\n            },\r\n            &quot;Minimum_chrome_version&quot;:&quot;76.0.0&quot;\r\n            }\r\n    };\r\n}\r\n\r\nchrome.webRequest.onAuthRequired.addListener(\r\n    callbackFn,\r\n    { urls: [&quot;&lt;all_urls&gt;&quot;] },\r\n    [&#39;blocking&#39;]\r\n);\r\n```\r\n\r\nThen you would need to add the Chrome extension to the ChromeOptions using the `addExtension` method:\r\n```java\r\n        ChromeOptions options = new ChromeOptions();\r\n        options.addExtensions(&quot;proxy.zip&quot;);\r\n```\r\n\r\nThe details are described (for Python) on the page: https://www.browserstack.com/guide/set-proxy-in-selenium","title":"selenium chromedriver authentication proxy","body":"<p>One way to connect to a proxy server with a user name and password is by using the tool <code>sshuttle</code> running on your machine. This tool allows you to create a connection to your proxy server using SSH, and then route all of your traffic.</p>\n<pre><code>$ sshuttle -r username@remotehost 0.0.0.0/0\n</code></pre>\n<p>See <a href=\"https://sshuttle.readthedocs.io/en/stable/usage.html\" rel=\"nofollow noreferrer\">https://sshuttle.readthedocs.io/en/stable/usage.html</a> for further information.</p>\n<p>Another approach is to add a Chrome extension. This approach is a bit more complex, but it allows you to use the Chrome WebDriver without any tools running in the background. You would need to create a Chrome extension by including two files in an archive named <code>proxy.zip</code>: <code>Background.js</code> and <code>manifest.js</code>.</p>\n<p><strong>Background.js</strong>:</p>\n<pre class=\"lang-js prettyprint-override\"><code>var config = {\n    mode: &quot;fixed_servers&quot;,\n    rules: {\n        singleProxy: {\n            scheme: &quot;http&quot;,\n            host: &quot;YOUR_PROXY_ADDRESS&quot;,\n            port: parseInt(PROXY_PORT)\n        },\n        bypassList: [&quot;foobar.com&quot;]\n    }\n};\nchrome.proxy.settings.set({ value: config, scope: &quot;regular&quot; }, function () { });\nfunction callbackFn(details) {\n    return {\n        authCredentials: {\n            username: &quot;PROXY_USERNAME&quot;,\n            password: &quot;PROXY_PASSWORD&quot;\n        }\n    };\n}\n\nchrome.webRequest.onAuthRequired.addListener(\n    callbackFn,\n    { urls: [&quot;&lt;all_urls&gt;&quot;] },\n    ['blocking']\n);\n</code></pre>\n<p><strong>manifest.js</strong>:</p>\n<pre class=\"lang-js prettyprint-override\"><code>var config = {\n    mode: &quot;fixed_servers&quot;,\n    rules: {\n        singleProxy: {\n            scheme: &quot;http&quot;,\n            host: &quot;YOUR_PROXY_ADDRESS&quot;,\n            port: parseInt(PROXY_PORT)\n        },\n        bypassList: [&quot;foobar.com&quot;]\n    }\n};\nchrome.proxy.settings.set({ value: config, scope: &quot;regular&quot; }, function () { });\nfunction callbackFn(details) {\n    return {\n        authCredentials: {\n            username: &quot;PROXY_USERNAME&quot;,\n            password: &quot;PROXY_PASSWORD&quot;\n        }{\n            &quot;version&quot;: &quot;1.0.0&quot;,\n            &quot;manifest_version&quot;: 3,\n            &quot;name&quot;: &quot;Chrome Proxy&quot;,\n            &quot;permissions&quot;: [\n            &quot;Proxy&quot;,\n            &quot;Tabs&quot;,\n            &quot;unlimitedStorage&quot;,\n            &quot;Storage&quot;,\n            &quot;&lt;all_urls&gt;&quot;,\n            &quot;webRequest&quot;,\n            &quot;webRequestBlocking&quot;\n            ],\n            &quot;background&quot;: {\n            &quot;scripts&quot;: [&quot;background.js&quot;]\n            },\n            &quot;Minimum_chrome_version&quot;:&quot;76.0.0&quot;\n            }\n    };\n}\n\nchrome.webRequest.onAuthRequired.addListener(\n    callbackFn,\n    { urls: [&quot;&lt;all_urls&gt;&quot;] },\n    ['blocking']\n);\n</code></pre>\n<p>Then you would need to add the Chrome extension to the ChromeOptions using the <code>addExtension</code> method:</p>\n<pre class=\"lang-java prettyprint-override\"><code>        ChromeOptions options = new ChromeOptions();\n        options.addExtensions(&quot;proxy.zip&quot;);\n</code></pre>\n<p>The details are described (for Python) on the page: <a href=\"https://www.browserstack.com/guide/set-proxy-in-selenium\" rel=\"nofollow noreferrer\">https://www.browserstack.com/guide/set-proxy-in-selenium</a></p>\n"}],"owner":{"account_id":1659886,"reputation":71,"user_id":1609459,"display_name":"Nimrod Ben-Simon"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":4037,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"answer_count":1,"score":7,"last_activity_date":1674747998,"creation_date":1345449025,"question_id":12033981,"body_markdown":"I need to connect to a proxy server with a\r\nuser name and password (i.e USERNAME:PASSWD@IP:PORT)\r\nwith chromedriver webdriver in selenium 2 in java.\r\nI&#39;ve found how to do it without using a user name \r\nand password, but haven&#39;t found a way to do it with.\r\n\r\nThanks.","title":"selenium chromedriver authentication proxy","body":"<p>I need to connect to a proxy server with a\nuser name and password (i.e USERNAME:PASSWD@IP:PORT)\nwith chromedriver webdriver in selenium 2 in java.\nI've found how to do it without using a user name \nand password, but haven't found a way to do it with.</p>\n\n<p>Thanks.</p>\n"},{"tags":["java","date","java-8","localdate"],"comments":[{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1674715500,"post_id":75241672,"comment_id":132774005,"body_markdown":"*looking for an alternate solution in java 8* Yes, this is 100 % what you want. What you have observed is how `SimpleDateFormat` misbehaves. Also you have got nothing to use it for here. Try the no-arg `LocalDate.parse()` without giving any formatter, or try `DateTimeFormatter.ISO_LOCAL_DATE`. `LocalDate.parse(&quot;2023-02-29&quot;)` and `LocalDate.parse(&quot;2023-13-21&quot;)` both throw exceptions.","body":"<i>looking for an alternate solution in java 8</i> Yes, this is 100 % what you want. What you have observed is how <code>SimpleDateFormat</code> misbehaves. Also you have got nothing to use it for here. Try the no-arg <code>LocalDate.parse()</code> without giving any formatter, or try <code>DateTimeFormatter.ISO_LOCAL_DATE</code>. <code>LocalDate.parse(&quot;2023-02-29&quot;)</code> and <code>LocalDate.parse(&quot;2023-13-21&quot;)</code> both throw exceptions."}],"answers":[{"tags":[],"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1674742975,"creation_date":1674699666,"answer_id":75241764,"question_id":75241672,"body_markdown":"Try it like this. Don&#39;t use Date or SimpleDateFormat. As stated by [Ole V.V](https://stackoverflow.com/users/5772882/ole-v-v) the default, strict, format is `DateTimeFormatter.ISO_LOCAL_DATE` is used by `LocalDate.parse()`. \r\nThat also matches your requirements.  \r\n```\r\nimport java.time.LocalDate;\r\nimport java.time.format.DateTimeFormatter;\r\nimport java.time.format.DateTimeParseException;\r\n\r\npublic static LocalDate stringToLD(String inputDate) {\r\n    \r\n    try {\r\n        return LocalDate.parse(inputDate);\r\n       \r\n    } catch (DateTimeParseException e) {\r\n        throw new IllegalArgumentException(&quot;Unable to parse date, &quot; + inputDate);\r\n    }\r\n}","title":"Why is the below SimpleDateFormat showing incorrect date?","body":"<p>Try it like this. Don't use Date or SimpleDateFormat. As stated by <a href=\"https://stackoverflow.com/users/5772882/ole-v-v\">Ole V.V</a> the default, strict, format is <code>DateTimeFormatter.ISO_LOCAL_DATE</code> is used by <code>LocalDate.parse()</code>.\nThat also matches your requirements.</p>\n<pre><code>import java.time.LocalDate;\nimport java.time.format.DateTimeFormatter;\nimport java.time.format.DateTimeParseException;\n\npublic static LocalDate stringToLD(String inputDate) {\n    \n    try {\n        return LocalDate.parse(inputDate);\n       \n    } catch (DateTimeParseException e) {\n        throw new IllegalArgumentException(&quot;Unable to parse date, &quot; + inputDate);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":17965359,"reputation":305,"user_id":13055352,"display_name":"happytohelp"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":82,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1674745792,"accepted_answer_id":75241764,"answer_count":1,"score":1,"last_activity_date":1674747342,"creation_date":1674698377,"question_id":75241672,"body_markdown":"I am trying to validate incoming date string and then convert it to a LocalDate. Here is my code:\r\n\r\n```java\r\npublic class DateTester {\r\n\r\n    public static void main(String[] args) {\r\n        System.out.println(&quot;converted date is&quot; +stringToLD(&quot;2023-01-23&quot;)); \r\n        System.out.println(&quot;converted date is&quot; +stringToLD(&quot;2023-13-21&quot;)); \r\n        System.out.println(&quot;converted date is&quot; +stringToLD(&quot;2023-24-31&quot;)); \r\n        System.out.println(&quot;converted date is&quot; +stringToLD(&quot;2023-36-34&quot;));\r\n\r\n//        converted date is 2023-01-23\r\n//        converted date is2024-01-21\r\n//        converted date is2024-12-31\r\n//        converted date is2026-01-03 \r\n    }\r\n\r\n    public static LocalDate stringToLD(String inputDate) {\r\n        SimpleDateFormat sdf = new SimpleDateFormat(&quot;yyyy-MM-dd&quot;);\r\n        Date date;\r\n        try {\r\n            date = sdf.parse(inputDate);\r\n        } catch (ParseException e) {\r\n            throw new IllegalArgumentException(&quot;Unable to parse date, &quot; + inputDate);\r\n        }\r\n        return LocalDate.parse(sdf.format(date));\r\n    }\r\n}\r\n```\r\n\r\nbut however when I send invalid date like 2023-13-21 I get back converted date as 2024-01-21 which is invalid and unwanted result. So I wanted to understand why this is happening and also looking for an alternate solution in java 8","title":"Why is the below SimpleDateFormat showing incorrect date?","body":"<p>I am trying to validate incoming date string and then convert it to a LocalDate. Here is my code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class DateTester {\n\n    public static void main(String[] args) {\n        System.out.println(&quot;converted date is&quot; +stringToLD(&quot;2023-01-23&quot;)); \n        System.out.println(&quot;converted date is&quot; +stringToLD(&quot;2023-13-21&quot;)); \n        System.out.println(&quot;converted date is&quot; +stringToLD(&quot;2023-24-31&quot;)); \n        System.out.println(&quot;converted date is&quot; +stringToLD(&quot;2023-36-34&quot;));\n\n//        converted date is 2023-01-23\n//        converted date is2024-01-21\n//        converted date is2024-12-31\n//        converted date is2026-01-03 \n    }\n\n    public static LocalDate stringToLD(String inputDate) {\n        SimpleDateFormat sdf = new SimpleDateFormat(&quot;yyyy-MM-dd&quot;);\n        Date date;\n        try {\n            date = sdf.parse(inputDate);\n        } catch (ParseException e) {\n            throw new IllegalArgumentException(&quot;Unable to parse date, &quot; + inputDate);\n        }\n        return LocalDate.parse(sdf.format(date));\n    }\n}\n</code></pre>\n<p>but however when I send invalid date like 2023-13-21 I get back converted date as 2024-01-21 which is invalid and unwanted result. So I wanted to understand why this is happening and also looking for an alternate solution in java 8</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":1475,"reputation":533754,"user_id":1968,"accept_rate":83,"display_name":"Konrad Rudolph"},"score":0,"creation_date":1674738727,"post_id":75246529,"comment_id":132780478,"body_markdown":"You basically can&#39;t (see https://stackoverflow.com/a/501284/1968 for the reason why). What you *can* do of course is use type erasure and store the specific enum inside a non-generic `SomeDomainValidationException` in an `object`. It&#39;s not very satisfactory but here we are.","body":"You basically can&#39;t (see <a href=\"https://stackoverflow.com/a/501284/1968\">stackoverflow.com/a/501284/1968</a> for the reason why). What you <i>can</i> do of course is use type erasure and store the specific enum inside a non-generic <code>SomeDomainValidationException</code> in an <code>object</code>. It&#39;s not very satisfactory but here we are."},{"owner":{"account_id":2360785,"reputation":11123,"user_id":2067492,"display_name":"matt"},"score":0,"creation_date":1674738865,"post_id":75246529,"comment_id":132780520,"body_markdown":"Why not just have the upper bounds for your field instead of an E?","body":"Why not just have the upper bounds for your field instead of an E?"},{"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":1,"creation_date":1674738885,"post_id":75246529,"comment_id":132780525,"body_markdown":"Why is it generic in the first place? Do you just not want to rewrite the `hint` field and the constructor every time?","body":"Why is it generic in the first place? Do you just not want to rewrite the <code>hint</code> field and the constructor every time?"},{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":0,"creation_date":1674738975,"post_id":75246529,"comment_id":132780552,"body_markdown":"@Sweeper wouldn&#39;t the constructor have to be written in any case? Or did you mean the getter instead?","body":"@Sweeper wouldn&#39;t the constructor have to be written in any case? Or did you mean the getter instead?"},{"owner":{"account_id":7980951,"reputation":2003,"user_id":6022333,"accept_rate":100,"display_name":"Matley"},"score":0,"creation_date":1674739129,"post_id":75246529,"comment_id":132780602,"body_markdown":"@Sweeper can you give me some example?","body":"@Sweeper can you give me some example?"},{"owner":{"account_id":2139538,"reputation":42501,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"score":0,"creation_date":1674739254,"post_id":75246529,"comment_id":132780658,"body_markdown":"The whole abstract exception seems useless. You save typing `private final WarehouseWrongDatesEnum hint;` and equivalents in each impl, but instead have to type `extends SomeDomainValidationException&lt;WarehouseWrongDatesEnum&gt;`.","body":"The whole abstract exception seems useless. You save typing <code>private final WarehouseWrongDatesEnum hint;</code> and equivalents in each impl, but instead have to type <code>extends SomeDomainValidationException&lt;WarehouseWrongDatesEnum&gt;</code>."},{"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":1,"creation_date":1674739269,"post_id":75246529,"comment_id":132780661,"body_markdown":"I mean just inherit `WarehouseMatchingException` directly from `ValidationException`. `hint` would be of type `WarehouseWrongDatesEnum` rather than `E`. I don&#39;t understand why the generic abstract class is needed.","body":"I mean just inherit <code>WarehouseMatchingException</code> directly from <code>ValidationException</code>. <code>hint</code> would be of type <code>WarehouseWrongDatesEnum</code> rather than <code>E</code>. I don&#39;t understand why the generic abstract class is needed."},{"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":0,"creation_date":1674739354,"post_id":75246529,"comment_id":132780693,"body_markdown":"@Thomas Yeah you&#39;re right. I brainfarted.","body":"@Thomas Yeah you&#39;re right. I brainfarted."},{"owner":{"account_id":2360785,"reputation":11123,"user_id":2067492,"display_name":"matt"},"score":0,"creation_date":1674838040,"post_id":75246529,"comment_id":132805396,"body_markdown":"@Sweeper especially enums. If it is an enum it should be an enum of the necessary type. Why would you have types extending an Enum?","body":"@Sweeper especially enums. If it is an enum it should be an enum of the necessary type. Why would you have types extending an Enum?"}],"answers":[{"tags":[],"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1674747107,"creation_date":1674741429,"answer_id":75247098,"question_id":75246529,"body_markdown":"You _could_ use some interfaces to achieve something like this but this feels a little hacky. I&#39;ll post it anyway to let you decide for yourself.\r\n\r\nFirst, we&#39;ll create 3 interfaces: one to return the &quot;raw&quot; hin, one to return the &quot;generic&quot; hint and one to do a cast:\r\n\r\n    //return the raw hint - this is an internal interface\r\n    interface RawxceptionHint {\r\n\t\tObject getRawHint();\r\n\t}\r\n\r\n    //return the generic hint - this is a public interface\r\n    interface ExceptionHint&lt;T&gt;{\r\n\t\tT getHint();\r\n\t}\r\n\r\n    //adapter to cast the raw hint to the generic one\r\n    interface ExceptionHintAdapter&lt;T&gt; extends ExceptionHint&lt;T&gt;, RawxceptionHint {\r\n\t\tdefault T getHint() {\r\n\t\t\treturn (T)getRawHint();\r\n\t\t}\t\t\t\t\r\n\t}\r\n\r\nNow you can implement your exceptions:  \r\n\r\n    public abstract class SomeDomainValidationException extends ValidationException implements RawxceptionHint {\r\n\r\n      private final Object  hint;\r\n\r\n      public SomeDomainValidationException(String message, Object hint) {\r\n          super(message);\r\n          this.hint = hint;\r\n      }\r\n \r\n      public Object getRawHint() {\r\n        return hint;\r\n      }\r\n    }\r\n   \r\n    class WarehouseMatchingException \r\n               extends SomeDomainValidationException \r\n               implements ExceptionHintAdapter&lt;WarehouseWrongDatesEnum&gt; {\r\n      WarehouseMatchingException (String message, WarehouseWrongDatesEnum hint) {\r\n         super(message, hint);\r\n      }\r\n    }\r\n\r\nNow you can access the hint via `Object getRawHint()` or `WarehouseWrongDatesEnum getHint()`. If you want to restrict access to `getRawHint()` you could cast the exception to `ExceptionHint&lt;WarehouseWrongDatesEnum&gt;`.\r\n\r\n**Note**: as stated initially this feels somewhat hacky and I&#39;m not sure this would even provide any benefit. Maybe there&#39;s a better solution that I can&#39;t think of right now and which supports what you need/want. However, not using that generic &quot;middle class&quot; `SomeDomainValidationException` and putting the hint and its methods directly into `WarehouseMatchingException` would be the safer and less hacky option.","title":"How to create abstract generic class that extends RuntimeException","body":"<p>You <em>could</em> use some interfaces to achieve something like this but this feels a little hacky. I'll post it anyway to let you decide for yourself.</p>\n<p>First, we'll create 3 interfaces: one to return the &quot;raw&quot; hin, one to return the &quot;generic&quot; hint and one to do a cast:</p>\n<pre><code>//return the raw hint - this is an internal interface\ninterface RawxceptionHint {\n    Object getRawHint();\n}\n\n//return the generic hint - this is a public interface\ninterface ExceptionHint&lt;T&gt;{\n    T getHint();\n}\n\n//adapter to cast the raw hint to the generic one\ninterface ExceptionHintAdapter&lt;T&gt; extends ExceptionHint&lt;T&gt;, RawxceptionHint {\n    default T getHint() {\n        return (T)getRawHint();\n    }               \n}\n</code></pre>\n<p>Now you can implement your exceptions:</p>\n<pre><code>public abstract class SomeDomainValidationException extends ValidationException implements RawxceptionHint {\n\n  private final Object  hint;\n\n  public SomeDomainValidationException(String message, Object hint) {\n      super(message);\n      this.hint = hint;\n  }\n\n  public Object getRawHint() {\n    return hint;\n  }\n}\n\nclass WarehouseMatchingException \n           extends SomeDomainValidationException \n           implements ExceptionHintAdapter&lt;WarehouseWrongDatesEnum&gt; {\n  WarehouseMatchingException (String message, WarehouseWrongDatesEnum hint) {\n     super(message, hint);\n  }\n}\n</code></pre>\n<p>Now you can access the hint via <code>Object getRawHint()</code> or <code>WarehouseWrongDatesEnum getHint()</code>. If you want to restrict access to <code>getRawHint()</code> you could cast the exception to <code>ExceptionHint&lt;WarehouseWrongDatesEnum&gt;</code>.</p>\n<p><strong>Note</strong>: as stated initially this feels somewhat hacky and I'm not sure this would even provide any benefit. Maybe there's a better solution that I can't think of right now and which supports what you need/want. However, not using that generic &quot;middle class&quot; <code>SomeDomainValidationException</code> and putting the hint and its methods directly into <code>WarehouseMatchingException</code> would be the safer and less hacky option.</p>\n"}],"owner":{"account_id":7980951,"reputation":2003,"user_id":6022333,"accept_rate":100,"display_name":"Matley"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":115,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1674747107,"creation_date":1674738347,"question_id":75246529,"body_markdown":"I want to create some generic abstract class:\r\n\r\n```\r\npublic abstract class SomeDomainValidationException&lt;E extends Enum&lt;E&gt;&gt; extends ValidationException {\r\n\r\n    private final E hint;\r\n\r\n    public SomeDomainValidationException(String message, E hint) {\r\n        super(message);\r\n        this.hint = hint;\r\n    }\r\n}\r\n```\r\n\r\nwhere:\r\n\r\n```\r\n@ResponseStatus(value = HttpStatus.BAD_REQUEST)\r\npublic class ValidationException extends RuntimeException {\r\n    public ValidationException(String message) {\r\n        super(message);\r\n    }\r\n}\r\n```\r\n\r\nI want to group different types of exceptions in my code, eg I want to create different types of exceptions like:\r\n\r\n```\r\nWarehouseMatchingException \r\n               extends SomeDomainValidationException&lt;WarehouseWrongDatesEnum&gt;\r\n```\r\nbut of course I can&#39;t because generic class may not extend &#39;java.lang.Throwable&#39;\r\n\r\n\r\nHow to create generic class that represents different types of exceptions included in some enums like `WarehouseWrongDatesEnum`?","title":"How to create abstract generic class that extends RuntimeException","body":"<p>I want to create some generic abstract class:</p>\n<pre><code>public abstract class SomeDomainValidationException&lt;E extends Enum&lt;E&gt;&gt; extends ValidationException {\n\n    private final E hint;\n\n    public SomeDomainValidationException(String message, E hint) {\n        super(message);\n        this.hint = hint;\n    }\n}\n</code></pre>\n<p>where:</p>\n<pre><code>@ResponseStatus(value = HttpStatus.BAD_REQUEST)\npublic class ValidationException extends RuntimeException {\n    public ValidationException(String message) {\n        super(message);\n    }\n}\n</code></pre>\n<p>I want to group different types of exceptions in my code, eg I want to create different types of exceptions like:</p>\n<pre><code>WarehouseMatchingException \n               extends SomeDomainValidationException&lt;WarehouseWrongDatesEnum&gt;\n</code></pre>\n<p>but of course I can't because generic class may not extend 'java.lang.Throwable'</p>\n<p>How to create generic class that represents different types of exceptions included in some enums like <code>WarehouseWrongDatesEnum</code>?</p>\n"},{"tags":["java","sql","hibernate","join","hql"],"comments":[{"owner":{"account_id":4564696,"reputation":43122,"user_id":3706016,"display_name":"jarlh"},"score":0,"creation_date":1674741376,"post_id":75246613,"comment_id":132781328,"body_markdown":"`...FROM t1 JOIN t2 ON t1.cx = t2.cy...`","body":"<code>...FROM t1 JOIN t2 ON t1.cx = t2.cy...</code>"}],"answers":[{"tags":[],"owner":{"account_id":22384219,"reputation":108,"user_id":16597286,"display_name":"Windir"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674747089,"creation_date":1674747089,"answer_id":75248292,"question_id":75246613,"body_markdown":"```\r\nSELECT e.employeeNumber, \r\n       e.fullName, \r\n       d.departmentName \r\nFROM  \r\n       Employee e \r\nJOIN   Department d where e.department=d.departmentId&quot;).getResultList();\r\n```\r\n&quot;HQL queries are case insensitive; however, the names of Java classes and properties are case-sensitive HQL is used to execute queries against database.&quot;\r\n","title":"HQL with where clause with join doesn&#39;t work","body":"<pre><code>SELECT e.employeeNumber, \n       e.fullName, \n       d.departmentName \nFROM  \n       Employee e \nJOIN   Department d where e.department=d.departmentId&quot;).getResultList();\n</code></pre>\n<p>&quot;HQL queries are case insensitive; however, the names of Java classes and properties are case-sensitive HQL is used to execute queries against database.&quot;</p>\n"}],"owner":{"account_id":27626884,"reputation":1,"user_id":21086709,"display_name":"Dani"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1674747089,"creation_date":1674738822,"question_id":75246613,"body_markdown":"`Hi, I&#39;m beginner to hibernate and I have to make a select with join. I have two classes Employees and Departments mapped one-to-one, bidirectional that look like this: \r\n\r\n\r\n         @Entity(name=&quot;employee&quot;)\r\n         @Table(name=&quot;employee&quot;)\r\n         public class Employees {\r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n\t@Column(name=&quot;employee_id&quot;)\r\n\tInteger employeeNumber;\r\n\t@Column(name=&quot;full_name&quot;)\r\n\tString fullName;\r\n\t@Column(name=&quot;email_address&quot;)\r\n\tString emailAddress;\r\n\t@Column(name=&quot;phone_number&quot;)\r\n\tlong phoneNumber;\r\n\t@Column(name=&quot;birth_date&quot;)\r\n\tDate birthDate;\r\n\t@Column(name=&quot;gender&quot;)\r\n\tString gender;\r\n\t@Column(name=&quot;address&quot;)\r\n\tString address;\r\n\t@Column(name=&quot;country&quot;)\r\n\tString country;\r\n\t@Column(name=&quot;city&quot;)\r\n\tString city;\r\n\t@Column(name=&quot;region&quot;)\r\n\tString region;\r\n\t@Column(name=&quot;post_code&quot;)\r\n\tString postCode;\r\n\t@Column(name=&quot;hire_date&quot;)\r\n\tDate hireDate;\r\n\t@Column(name=&quot;resignation_date&quot;)\r\n\tDate resignationDate;\r\n\t@Column(name=&quot;position&quot;)\r\n\tString position;\r\n\t@Column(name=&quot;cnp_pin&quot;)\r\n\tString cnp;\r\n\t@Column(name=&quot;document_no&quot;)\r\n\tInteger documentNumber;\r\n\t@Column(name=&quot;expire_doc_no&quot;)\r\n\tDate expireDocument;\r\n\t\r\n\t @OneToOne(cascade=CascadeType.ALL)\r\n\t @JoinColumn(name=&quot;department_id&quot;)\r\n\tDepartments department;\r\n\r\n\r\n\r\n    @Entity(name=&quot;department&quot;)\r\n    @Table(name=&quot;department&quot;)\r\n    public class Departments {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    @Column(name=&quot;department_id&quot;)\r\n    int departmentId;\r\n    @Column(name=&quot;department_name&quot;)\r\n    String departmentName;\r\n    @Column(name=&quot;leader&quot;)\r\n    String leader;\r\n\r\n    @OneToOne(mappedBy=&quot;department&quot;)\r\n    Employees employee;\r\n\t\r\n\t\r\n\t\r\n\r\nI tried this: \r\n\r\n    @Test\r\n    public List&lt;Employees&gt; listEmployee() {\r\n\t\t   session.beginTransaction();\r\n\t\t  List&lt;Employees&gt; employee = (List&lt;Employees&gt;) session.createQuery(&quot;select         e.employeeNumber, e.fullName, d.departmentName from  employee e JOIN department d where e.department=d.departmentId&quot;).getResultList();\r\n    for(Employees emp:employee) {\r\n    System.out.println(emp);\r\n\t\t}\r\n\t\treturn employee;\r\n\r\n\t}\r\n\r\n  I want to select employeeNumber, fullName and departmentName with JOIN between tables but I have this         error: java.sql.SQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that  corresponds to your MySQL server version for the right syntax to use near &#39;where employees0_.department_id=department1_.department_id&#39; at line 1. Can You help me please?`","title":"HQL with where clause with join doesn&#39;t work","body":"<p>`Hi, I'm beginner to hibernate and I have to make a select with join. I have two classes Employees and Departments mapped one-to-one, bidirectional that look like this:</p>\n<pre><code>     @Entity(name=&quot;employee&quot;)\n     @Table(name=&quot;employee&quot;)\n     public class Employees {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n@Column(name=&quot;employee_id&quot;)\nInteger employeeNumber;\n@Column(name=&quot;full_name&quot;)\nString fullName;\n@Column(name=&quot;email_address&quot;)\nString emailAddress;\n@Column(name=&quot;phone_number&quot;)\nlong phoneNumber;\n@Column(name=&quot;birth_date&quot;)\nDate birthDate;\n@Column(name=&quot;gender&quot;)\nString gender;\n@Column(name=&quot;address&quot;)\nString address;\n@Column(name=&quot;country&quot;)\nString country;\n@Column(name=&quot;city&quot;)\nString city;\n@Column(name=&quot;region&quot;)\nString region;\n@Column(name=&quot;post_code&quot;)\nString postCode;\n@Column(name=&quot;hire_date&quot;)\nDate hireDate;\n@Column(name=&quot;resignation_date&quot;)\nDate resignationDate;\n@Column(name=&quot;position&quot;)\nString position;\n@Column(name=&quot;cnp_pin&quot;)\nString cnp;\n@Column(name=&quot;document_no&quot;)\nInteger documentNumber;\n@Column(name=&quot;expire_doc_no&quot;)\nDate expireDocument;\n\n @OneToOne(cascade=CascadeType.ALL)\n @JoinColumn(name=&quot;department_id&quot;)\nDepartments department;\n\n\n\n@Entity(name=&quot;department&quot;)\n@Table(name=&quot;department&quot;)\npublic class Departments {\n@Id\n@GeneratedValue(strategy = GenerationType.IDENTITY)\n@Column(name=&quot;department_id&quot;)\nint departmentId;\n@Column(name=&quot;department_name&quot;)\nString departmentName;\n@Column(name=&quot;leader&quot;)\nString leader;\n\n@OneToOne(mappedBy=&quot;department&quot;)\nEmployees employee;\n</code></pre>\n<p>I tried this:</p>\n<pre><code>@Test\npublic List&lt;Employees&gt; listEmployee() {\n       session.beginTransaction();\n      List&lt;Employees&gt; employee = (List&lt;Employees&gt;) session.createQuery(&quot;select         e.employeeNumber, e.fullName, d.departmentName from  employee e JOIN department d where e.department=d.departmentId&quot;).getResultList();\nfor(Employees emp:employee) {\nSystem.out.println(emp);\n    }\n    return employee;\n\n}\n</code></pre>\n<p>I want to select employeeNumber, fullName and departmentName with JOIN between tables but I have this         error: java.sql.SQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that  corresponds to your MySQL server version for the right syntax to use near 'where employees0_.department_id=department1_.department_id' at line 1. Can You help me please?`</p>\n"},{"tags":["java","redis","jedis"],"answers":[{"tags":[],"owner":{"account_id":4829511,"reputation":5855,"user_id":4021802,"display_name":"sazzad"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1674746960,"creation_date":1674746960,"answer_id":75248262,"question_id":75246783,"body_markdown":"`UnifiedJedis` could act differently depending on parameters.\r\n\r\nIn your object creation, I can see `new JedisPooled(poolConfig, dbUrl, dbPort);`, which means you are actually creating and using `JedisPooled`&lt;sup&gt;[1]&lt;/sup&gt;. This narrows down the possible behaviors of UnifiedJedis and so I am providing answer to your questions only for JedisPooled.\r\n\r\n---\r\n\r\n### The Answer:\r\n\r\nIn JedisPooled you don&#39;t have to get a connection from pool and release it after sending a command. It is automatically done JedisPooled methods.\r\n\r\n---\r\n\r\nNote [1]: JedisPooled is a sub-class of UnifiedJedis. That&#39;s why you could set a JedisPooled object in a UnifiedJedis variable.","title":"Using UnifiedJedis with ConnectionPoolConfig in multi-thread environment","body":"<p><code>UnifiedJedis</code> could act differently depending on parameters.</p>\n<p>In your object creation, I can see <code>new JedisPooled(poolConfig, dbUrl, dbPort);</code>, which means you are actually creating and using <code>JedisPooled</code><sup>[1]</sup>. This narrows down the possible behaviors of UnifiedJedis and so I am providing answer to your questions only for JedisPooled.</p>\n<hr />\n<h3>The Answer:</h3>\n<p>In JedisPooled you don't have to get a connection from pool and release it after sending a command. It is automatically done JedisPooled methods.</p>\n<hr />\n<p>Note [1]: JedisPooled is a sub-class of UnifiedJedis. That's why you could set a JedisPooled object in a UnifiedJedis variable.</p>\n"}],"owner":{"account_id":2365474,"reputation":345,"user_id":2071226,"display_name":"Ve9"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":332,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75248262,"answer_count":1,"score":0,"last_activity_date":1674746960,"creation_date":1674739708,"question_id":75246783,"body_markdown":"I&#39;m new using Jedis and I&#39;m not sure if the configuration i used is correct.\r\n\r\nI&#39;m trying to use Jedis in a API server application as a cache used by my handlers. For this reason the environment is a multi-threaded one and i&#39;m looking for the correct configuration for this scenario.\r\n\r\nI found lot of example mentioning the &quot;JedisPool&quot; such as the following:\r\n\r\n    JedisPoolConfig jedisPoolConfig = new JedisPoolConfig();\r\n    ShardedJedisPool pool = new ShardedJedisPool(jedisPoolConfig, shards);\r\n\r\n    try (ShardedJedis jedis = pool.getResource()) {\r\n        jedis.set(&quot;a&quot;, &quot;foo&quot;);\r\n    }\r\n    pool.close();\r\n\r\nBut in my case i need to use a **UnifiedJadis** object in order to have access to **jsonSet** and **jsonGet** methods, which &quot;normal&quot; Jedis does not provide.\r\n\r\nThis is what i&#39;ve done.\r\n\r\nThis is the class i use to manage a UnifiedJedis object as **singleton**.\r\n\r\n```\r\npublic class MyDB{\r\n    //singleton\r\n    public static UnifiedJedis jedisPooled;\r\n    \r\n    //called at startup\r\n    public void init() throws DBConnectionException {\r\n        ConnectionPoolConfig poolConfig = RedisConfig.getRediConfiguration();\r\n        jedisPooled = new JedisPooled(poolConfig, dbUrl, dbPort);\r\n    }\r\n}\r\n```\r\nAt application startup i initialize the connection and inject the singleton everywhere is needed (e.g. in my handlers).\r\n\r\n```\r\npublic class App{\r\n    public static void main(String[] args) throws Exception {\r\n        MyDB db = new MyDB();\r\n        db.init();\r\n        \r\n        //...inject db where needed\r\n    }\r\n}\r\n```\r\n\r\nFinally in my handlers I use the variable injected to use the **jedisPooled** methods jsonGet and jsonSet.\r\n\r\n```\r\npublic class MyHandler{\r\n\r\n    // in the MyHandler constructor i receive the db variable\r\n\r\n    @Override\r\n    public void handle() throws Exception {\r\n        //...\r\n        db.jedisPooled.jsonSet(redisKey, Path.of(&quot;.&quot;), myPojo);\r\n    }\r\n}\r\n```\r\n\r\nMy question is: since there is no method &quot;getResource&quot; in the UnifiedJedis object, i can i get a connection from the pool and then release it after i send a command? Is it automatically done by the UnifiedJedis methods?\r\n\r\nIs my solution correct?\r\n\r\nThank you","title":"Using UnifiedJedis with ConnectionPoolConfig in multi-thread environment","body":"<p>I'm new using Jedis and I'm not sure if the configuration i used is correct.</p>\n<p>I'm trying to use Jedis in a API server application as a cache used by my handlers. For this reason the environment is a multi-threaded one and i'm looking for the correct configuration for this scenario.</p>\n<p>I found lot of example mentioning the &quot;JedisPool&quot; such as the following:</p>\n<pre><code>JedisPoolConfig jedisPoolConfig = new JedisPoolConfig();\nShardedJedisPool pool = new ShardedJedisPool(jedisPoolConfig, shards);\n\ntry (ShardedJedis jedis = pool.getResource()) {\n    jedis.set(&quot;a&quot;, &quot;foo&quot;);\n}\npool.close();\n</code></pre>\n<p>But in my case i need to use a <strong>UnifiedJadis</strong> object in order to have access to <strong>jsonSet</strong> and <strong>jsonGet</strong> methods, which &quot;normal&quot; Jedis does not provide.</p>\n<p>This is what i've done.</p>\n<p>This is the class i use to manage a UnifiedJedis object as <strong>singleton</strong>.</p>\n<pre><code>public class MyDB{\n    //singleton\n    public static UnifiedJedis jedisPooled;\n    \n    //called at startup\n    public void init() throws DBConnectionException {\n        ConnectionPoolConfig poolConfig = RedisConfig.getRediConfiguration();\n        jedisPooled = new JedisPooled(poolConfig, dbUrl, dbPort);\n    }\n}\n</code></pre>\n<p>At application startup i initialize the connection and inject the singleton everywhere is needed (e.g. in my handlers).</p>\n<pre><code>public class App{\n    public static void main(String[] args) throws Exception {\n        MyDB db = new MyDB();\n        db.init();\n        \n        //...inject db where needed\n    }\n}\n</code></pre>\n<p>Finally in my handlers I use the variable injected to use the <strong>jedisPooled</strong> methods jsonGet and jsonSet.</p>\n<pre><code>public class MyHandler{\n\n    // in the MyHandler constructor i receive the db variable\n\n    @Override\n    public void handle() throws Exception {\n        //...\n        db.jedisPooled.jsonSet(redisKey, Path.of(&quot;.&quot;), myPojo);\n    }\n}\n</code></pre>\n<p>My question is: since there is no method &quot;getResource&quot; in the UnifiedJedis object, i can i get a connection from the pool and then release it after i send a command? Is it automatically done by the UnifiedJedis methods?</p>\n<p>Is my solution correct?</p>\n<p>Thank you</p>\n"},{"tags":["java","spring"],"answers":[{"tags":[],"owner":{"account_id":1330083,"reputation":619,"user_id":1274184,"accept_rate":47,"display_name":"Alex Smoke"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674746608,"creation_date":1674746608,"answer_id":75248194,"question_id":75248094,"body_markdown":"My mistake, it does everything automatically, just fixed path format like this:\r\n\r\n    screenshot.path=D:\\\\Projects\\\\myproject\\\\screenshots","title":"Inject @Value to a Path variable directly","body":"<p>My mistake, it does everything automatically, just fixed path format like this:</p>\n<pre><code>screenshot.path=D:\\\\Projects\\\\myproject\\\\screenshots\n</code></pre>\n"}],"owner":{"account_id":1330083,"reputation":619,"user_id":1274184,"accept_rate":47,"display_name":"Alex Smoke"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1674746608,"creation_date":1674746179,"question_id":75248094,"body_markdown":"I want to inject Path variable directly without converting it from string like this:\r\n\r\n    @Value(&quot;${screenshot.path}&quot;)\r\n    private Path path;\r\n\r\nproperty file:\r\n\r\n    screenshot.path=D:\\Projects\\myproject\\screenshots\r\n\r\n\r\nError:\r\n\r\n&gt; Unsatisfied dependency expressed through field &#39;path&#39;; nested\r\n&gt; exception is org.springframework.beans.TypeMismatchException: Failed\r\n&gt; to convert value of type &#39;java.lang.String&#39; to required type\r\n&gt; &#39;java.nio.file.Path&#39;; nested exception is\r\n&gt; java.lang.IllegalArgumentException: Failed to retrieve file for class\r\n&gt; path resource [D:/Projects/myproject/screenshots]\r\n\r\nIs there a way to do that without injecting String and then doing Paths.get?","title":"Inject @Value to a Path variable directly","body":"<p>I want to inject Path variable directly without converting it from string like this:</p>\n<pre><code>@Value(&quot;${screenshot.path}&quot;)\nprivate Path path;\n</code></pre>\n<p>property file:</p>\n<pre><code>screenshot.path=D:\\Projects\\myproject\\screenshots\n</code></pre>\n<p>Error:</p>\n<blockquote>\n<p>Unsatisfied dependency expressed through field 'path'; nested\nexception is org.springframework.beans.TypeMismatchException: Failed\nto convert value of type 'java.lang.String' to required type\n'java.nio.file.Path'; nested exception is\njava.lang.IllegalArgumentException: Failed to retrieve file for class\npath resource [D:/Projects/myproject/screenshots]</p>\n</blockquote>\n<p>Is there a way to do that without injecting String and then doing Paths.get?</p>\n"},{"tags":["java","spring"],"owner":{"account_id":13717542,"reputation":125,"user_id":9898348,"display_name":"Federico Arona"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1674746531,"creation_date":1674746531,"question_id":75248175,"body_markdown":"I want to create a generic controller that would like something like this:\r\n\r\n```\r\n@RequestMapping(&quot;/api/v1/resource/{resource}&quot;)\r\npublic class StandardController {\r\n\r\n    private StandardResourceService standardResourceService;\r\n\r\n\r\n    public StandardController(StandardResourceService standardResourceService) {\r\n        this.standardResourceService = standardResourceService;\r\n    }\r\n\r\n    @GetMapping(&quot;/{id}&quot;)\r\n    public Object getResource(\r\n            @PathVariable(value=&quot;resource&quot;) String resource,\r\n            @PathVariable(value=&quot;id&quot;) Long id,\r\n            HttpServletRequest request){\r\n\r\n        return standardResourceService.getEntity(id, resource);\r\n    }\r\n\r\n    @PostMapping\r\n    @Transactional\r\n    Object newResource(@PathVariable(value=&quot;resource&quot;) String resource, @RequestBody Object newObject) {\r\n        standardResourceService.postResource(resource, newObject);\r\n        return newObject;\r\n    }\r\n}\r\n```\r\n\r\nThe idea is that I don&#39;t want to have a lot of endpoints/services/controllers for each entity I&#39;ll define in the project. I want to create a standard one for each entity and if I need some custom behaviour for some entities, I&#39;ll just extend the base service/controller.\r\n\r\nThe service I&#39;ve made looks like this:\r\n\r\n```\r\n@Service\r\npublic class StandardResourceService {\r\n\r\n    @Autowired\r\n    private EntityManager entityManager;\r\n\r\n    @Autowired\r\n    private ModelMapper modelMapper;\r\n\r\n    public &lt;T, ID&gt; T findById(Class&lt;T&gt; type, ID id) {\r\n        return entityManager.find(type, id);\r\n    }\r\n\r\n    @Transactional\r\n    public void saveObject(Object object) {\r\n        entityManager.persist(object);\r\n    }\r\n\r\n    public Object getEntity(long resourceId, String resource) throws EntityNotFoundException {\r\n        Object resourceOpt;\r\n        Object dto;\r\n\r\n        try{\r\n            Class&lt;?&gt; cls = Class.forName(&quot;com.base.package.models.&quot; + resource);\r\n            resourceOpt = findById(cls, resourceId);\r\n\r\n        }catch (ClassNotFoundException ex){\r\n            throw new EntityNotFoundException(&quot;Resource &quot; + resource + &quot; could not be found with id: &quot; + resourceId);\r\n        }\r\n\r\n        if(resourceOpt == null) {\r\n            throw new EntityNotFoundException(&quot;Resource &quot; + resource + &quot; could not be found with id: &quot; + resourceId);\r\n        }\r\n\r\n        try {\r\n            Class&lt;?&gt; dtoClass = Class.forName(&quot;com.base.package.dto.&quot; + resource + &quot;DTO&quot;);\r\n            dto = modelMapper.map(resourceOpt, dtoClass);\r\n        } catch (ClassNotFoundException ex) {\r\n            return resourceOpt;\r\n        }\r\n\r\n        return dto;\r\n    }\r\n\r\n    public Object postResource(String resource, Object newObject) throws RuntimeException {\r\n        try{\r\n            Class&lt;?&gt; clazz = Class.forName(&quot;com.base.package.models.&quot; + resource);\r\n\r\n            //saveObject(instance);\r\n\r\n\r\n        }catch (ClassNotFoundException ex){\r\n            throw new EntityNotFoundException(&quot;&quot;);\r\n        } catch (InvocationTargetException e) {\r\n            throw new RuntimeException(e);\r\n        } catch (NoSuchMethodException e) {\r\n            throw new RuntimeException(e);\r\n        } catch (InstantiationException e) {\r\n            throw new RuntimeException(e);\r\n        } catch (IllegalAccessException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n\r\n        return newObject;\r\n    }\r\n}\r\n\r\n```\r\n\r\nThe GET is working pretty good. I return a DTO if any, otherwise I return the entity itself.\r\n\r\nBy the way when using the POST I don&#39;t know how to instantiate the correct class with the body I&#39;m sending in the POST.\r\n\r\nIs there a way to do this? \r\nAm I approaching this problem correctly?","title":"Spring: Generic Resource Controller","body":"<p>I want to create a generic controller that would like something like this:</p>\n<pre><code>@RequestMapping(&quot;/api/v1/resource/{resource}&quot;)\npublic class StandardController {\n\n    private StandardResourceService standardResourceService;\n\n\n    public StandardController(StandardResourceService standardResourceService) {\n        this.standardResourceService = standardResourceService;\n    }\n\n    @GetMapping(&quot;/{id}&quot;)\n    public Object getResource(\n            @PathVariable(value=&quot;resource&quot;) String resource,\n            @PathVariable(value=&quot;id&quot;) Long id,\n            HttpServletRequest request){\n\n        return standardResourceService.getEntity(id, resource);\n    }\n\n    @PostMapping\n    @Transactional\n    Object newResource(@PathVariable(value=&quot;resource&quot;) String resource, @RequestBody Object newObject) {\n        standardResourceService.postResource(resource, newObject);\n        return newObject;\n    }\n}\n</code></pre>\n<p>The idea is that I don't want to have a lot of endpoints/services/controllers for each entity I'll define in the project. I want to create a standard one for each entity and if I need some custom behaviour for some entities, I'll just extend the base service/controller.</p>\n<p>The service I've made looks like this:</p>\n<pre><code>@Service\npublic class StandardResourceService {\n\n    @Autowired\n    private EntityManager entityManager;\n\n    @Autowired\n    private ModelMapper modelMapper;\n\n    public &lt;T, ID&gt; T findById(Class&lt;T&gt; type, ID id) {\n        return entityManager.find(type, id);\n    }\n\n    @Transactional\n    public void saveObject(Object object) {\n        entityManager.persist(object);\n    }\n\n    public Object getEntity(long resourceId, String resource) throws EntityNotFoundException {\n        Object resourceOpt;\n        Object dto;\n\n        try{\n            Class&lt;?&gt; cls = Class.forName(&quot;com.base.package.models.&quot; + resource);\n            resourceOpt = findById(cls, resourceId);\n\n        }catch (ClassNotFoundException ex){\n            throw new EntityNotFoundException(&quot;Resource &quot; + resource + &quot; could not be found with id: &quot; + resourceId);\n        }\n\n        if(resourceOpt == null) {\n            throw new EntityNotFoundException(&quot;Resource &quot; + resource + &quot; could not be found with id: &quot; + resourceId);\n        }\n\n        try {\n            Class&lt;?&gt; dtoClass = Class.forName(&quot;com.base.package.dto.&quot; + resource + &quot;DTO&quot;);\n            dto = modelMapper.map(resourceOpt, dtoClass);\n        } catch (ClassNotFoundException ex) {\n            return resourceOpt;\n        }\n\n        return dto;\n    }\n\n    public Object postResource(String resource, Object newObject) throws RuntimeException {\n        try{\n            Class&lt;?&gt; clazz = Class.forName(&quot;com.base.package.models.&quot; + resource);\n\n            //saveObject(instance);\n\n\n        }catch (ClassNotFoundException ex){\n            throw new EntityNotFoundException(&quot;&quot;);\n        } catch (InvocationTargetException e) {\n            throw new RuntimeException(e);\n        } catch (NoSuchMethodException e) {\n            throw new RuntimeException(e);\n        } catch (InstantiationException e) {\n            throw new RuntimeException(e);\n        } catch (IllegalAccessException e) {\n            throw new RuntimeException(e);\n        }\n\n        return newObject;\n    }\n}\n\n</code></pre>\n<p>The GET is working pretty good. I return a DTO if any, otherwise I return the entity itself.</p>\n<p>By the way when using the POST I don't know how to instantiate the correct class with the body I'm sending in the POST.</p>\n<p>Is there a way to do this?\nAm I approaching this problem correctly?</p>\n"},{"tags":["java","spring","mongodb","spring-boot","mongo-java-driver"],"answers":[{"tags":[],"owner":{"account_id":1972832,"reputation":378,"user_id":1771344,"accept_rate":75,"display_name":"MetaCoder"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1674746469,"creation_date":1674746469,"answer_id":75248156,"question_id":75227881,"body_markdown":"Ok so the Problem was on the GCP cloud run side. The CPU wasn&#39;t dedicated so the connections to Mongo were getting cut.","title":"Spring Mongo - Connecting to Multiple Mongo DB&#39;s results in Connection Timeouts","body":"<p>Ok so the Problem was on the GCP cloud run side. The CPU wasn't dedicated so the connections to Mongo were getting cut.</p>\n"}],"owner":{"account_id":1972832,"reputation":378,"user_id":1771344,"accept_rate":75,"display_name":"MetaCoder"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":196,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75248156,"answer_count":1,"score":0,"last_activity_date":1674746469,"creation_date":1674598883,"question_id":75227881,"body_markdown":"I have a problem which has me stumped. Hoping someone can help me here.\r\n\r\nSo I&#39;m sadly in the position of having a micro-service which for the moment needs to connect to 4 mongo databases all running in the cloud (Mongo Cloud Atlas) and on the same cluster. After setting everything up and deploying my service, I&#39;m constantly getting errors for timeouts etc every couple of hours. \r\n\r\nThe various errors are as follows:\r\n```\r\nMongoSocketReadTimeoutException: Timeout while receiving message\r\nMongoSocketReadException: Exception receiving message\r\nMongoSocketOpenException: Exception opening socket\r\nMongoSocketWriteException: Exception sending message\r\nMongoSocketException: cluster0-shard-00-00-pri.xxxxxx.mongodb.net: Temporary failure in name resolution\r\n```\r\n\r\n** Its worth noting that all my other Spring services which connect to the same cluster but are only configured for a single database do not have any timeout issues\r\n\r\nFor further context, all my Java services are in in GCP (using cloud run) and all services are running on a VPC with peering to Mongo Atlas. \r\n\r\nFor the micro-service(s) which connect to a single Mongo DB I configure my Mongo Client like so:\r\n\r\n```java\r\n\r\n@Configuration\r\npublic class MongoConfiguration {\r\n\r\n    @Value(&quot;${spring.data.mongodb.host}&quot;)\r\n    private String connectionString;\r\n\r\n    @Bean\r\n    public MongoClient mongoClient() {\r\n        CodecRegistry pojoCodecRegistry = fromProviders(PojoCodecProvider.builder().automatic(true).build());\r\n        CodecRegistry codecRegistry = fromRegistries(MongoClientSettings.getDefaultCodecRegistry(), pojoCodecRegistry);\r\n        return MongoClients.create(MongoClientSettings.builder()\r\n                .applyConnectionString(new ConnectionString(connectionString))\r\n                .uuidRepresentation(UuidRepresentation.STANDARD)\r\n                .codecRegistry(codecRegistry)\r\n                .build());\r\n    }\r\n\r\n    @Bean\r\n    public MongoClientSettings mongoClientSettings() {\r\n        return MongoClientSettings.builder()\r\n                .retryWrites(true)\r\n                .applyToClusterSettings(builder -&gt;\r\n                        builder.serverSelectionTimeout(5000, TimeUnit.MILLISECONDS))\r\n                .applyToConnectionPoolSettings((ConnectionPoolSettings.Builder builder) -&gt; builder.maxSize(300) //connections count\r\n                        .minSize(100)\r\n                        .maxConnectionLifeTime(1000, TimeUnit.MILLISECONDS)\r\n                        .maintenanceFrequency(5000, TimeUnit.MILLISECONDS)\r\n                        .maxConnectionIdleTime(1000, TimeUnit.MILLISECONDS)\r\n                        .maxWaitTime(150, TimeUnit.MILLISECONDS))\r\n                .applyToSocketSettings(builder -&gt; builder.connectTimeout(10, TimeUnit.SECONDS)\r\n                        .readTimeout(15, TimeUnit.SECONDS))\r\n                .applicationName(&quot;ProfileServiceApplication&quot;)\r\n                .retryWrites(true)\r\n                .build();\r\n    }\r\n\r\n    @Bean\r\n    public MongoCustomConversions mongoCustomConversions() {\r\n        return new MongoCustomConversions(Arrays.asList(\r\n                new BigDecimalDecimal128Converter(),\r\n                new Decimal128BigDecimalConverter()\r\n        ));\r\n\r\n    }\r\n\r\n    @WritingConverter\r\n    private static class BigDecimalDecimal128Converter implements Converter&lt;BigDecimal, Decimal128&gt; {\r\n\r\n        @Override\r\n        public Decimal128 convert(@NonNull BigDecimal source) {\r\n            return new Decimal128(source);\r\n        }\r\n    }\r\n\r\n    @ReadingConverter\r\n    private static class Decimal128BigDecimalConverter implements Converter&lt;Decimal128, BigDecimal&gt; {\r\n\r\n        @Override\r\n        public BigDecimal convert(@NonNull Decimal128 source) {\r\n            return source.bigDecimalValue();\r\n        }\r\n\r\n    }\r\n}\r\n```\r\n\r\nOn the (problematic) service which connects to multiple Mongo DB&#39;s here&#39;s how I&#39;ve configured my mongo clients:\r\n\r\n*Primary Mongo Client*\r\n\r\n```java\r\n@Configuration\r\npublic class TorchMongoConfig {\r\n    @Autowired\r\n    private Environment env;\r\n\r\n    @Primary\r\n    @Bean(name = &quot;TorchMongoDBFactory&quot;)\r\n    public MongoDatabaseFactory torchFactory(@Qualifier(&quot;TORCH_CLIENT&quot;) MongoClient mongoClient) {\r\n        return new SimpleMongoClientDatabaseFactory(mongoClient, &quot;Torch&quot;);\r\n    }\r\n\r\n    @Primary\r\n    @Bean\r\n    public MongoTemplate torchMongoTemplate(@Qualifier(&quot;TORCH_CLIENT&quot;) MongoClient client) {\r\n        return new MongoTemplate(torchFactory(client));\r\n    }\r\n\r\n    @Bean(&quot;TORCH_CLIENT&quot;)\r\n    @Primary\r\n    public MongoClient mongoClient() {\r\n        CodecRegistry pojoCodecRegistry = fromProviders(PojoCodecProvider.builder().automatic(true).build());\r\n        CodecRegistry codecRegistry = fromRegistries(MongoClientSettings.getDefaultCodecRegistry(), pojoCodecRegistry);\r\n        return MongoClients.create(MongoClientSettings.builder()\r\n                .applyConnectionString(new ConnectionString(env.getProperty(&quot;spring.data.mongo.torchdb.uri&quot;)))\r\n                .uuidRepresentation(UuidRepresentation.STANDARD)\r\n                .codecRegistry(codecRegistry)\r\n                .applyToConnectionPoolSettings(builder -&gt; {\r\n                    builder.maxConnectionLifeTime(1000, TimeUnit.MILLISECONDS)\r\n                            .maintenanceFrequency(5000, TimeUnit.MILLISECONDS)\r\n                            .maxConnectionIdleTime(1000, TimeUnit.MILLISECONDS)\r\n                            .maxWaitTime(150, TimeUnit.MILLISECONDS);\r\n                })\r\n                .applyToClusterSettings(builder -&gt; {\r\n                    builder.serverSelectionTimeout(5000, TimeUnit.MILLISECONDS);\r\n                })\r\n                .build());\r\n        }\r\n        \r\n    @Bean\r\n    public MongoClientSettingsBuilderCustomizer mongoDBDefaultSettings() {\r\n        return builder -&gt; {\r\n            builder.applyToSocketSettings(builderSettings -&gt; {\r\n                builderSettings.connectTimeout(10, TimeUnit.SECONDS)\r\n                        .readTimeout(15, TimeUnit.SECONDS);\r\n            });\r\n\r\n            builder.applyToClusterSettings(builderSettings -&gt; {\r\n                builderSettings\r\n                        .serverSelectionTimeout(5000, TimeUnit.MILLISECONDS);\r\n            });\r\n\r\n            builder.applyToConnectionPoolSettings(builderSettings -&gt; {\r\n                builderSettings.maxSize(300) //connections count\r\n                        .minSize(100)\r\n                        .maxConnectionLifeTime(1000, TimeUnit.MILLISECONDS)\r\n                        .maintenanceFrequency(5000, TimeUnit.MILLISECONDS)\r\n                        .maxConnectionIdleTime(1000, TimeUnit.MILLISECONDS)\r\n                        .maxWaitTime(150, TimeUnit.MILLISECONDS);\r\n            });\r\n            // Apply other settings to the builder.\r\n        };\r\n    }\r\n\r\n    @Bean\r\n    public MongoCustomConversions mongoCustomConversions() {\r\n        return new MongoCustomConversions(Arrays.asList(\r\n                new BigDecimalDecimal128Converter(),\r\n                new Decimal128BigDecimalConverter()\r\n        ));\r\n    }\r\n\r\n    @WritingConverter\r\n    private static class BigDecimalDecimal128Converter implements Converter&lt;BigDecimal, Decimal128&gt; {\r\n\r\n        @Override\r\n        public Decimal128 convert(@NonNull BigDecimal source) {\r\n            return new Decimal128(source);\r\n        }\r\n    }\r\n\r\n    @ReadingConverter\r\n    private static class Decimal128BigDecimalConverter implements Converter&lt;Decimal128, BigDecimal&gt; {\r\n\r\n        @Override\r\n        public BigDecimal convert(@NonNull Decimal128 source) {\r\n            return source.bigDecimalValue();\r\n        }\r\n\r\n    }\r\n}\r\n```\r\n*Secondary MongoClient*\r\n```java\r\n@Configuration\r\npublic class ProjectInformationMongoConfig {\r\n    @Autowired\r\n    private Environment env;\r\n\r\n    @Bean(name = &quot;ProjectInformationMongoDBFactory&quot;)\r\n    public MongoDatabaseFactory userProjectMongoDatabaseFactory(@Qualifier(&quot;ProjectInformation&quot;) MongoClient mongoClient) {\r\n        return new SimpleMongoClientDatabaseFactory(mongoClient, &quot;ProjectInformation&quot;);\r\n    }\r\n\r\n    @Bean(name = &quot;projectInformationMongoTemplate&quot;)\r\n    public MongoTemplate userProjectMongoTemplate(@Qualifier(&quot;ProjectInformationMongoDBFactory&quot;) MongoDatabaseFactory mongoDatabaseFactory) {\r\n        return new MongoTemplate(mongoDatabaseFactory);\r\n    }\r\n\r\n    @Bean(&quot;ProjectInformation&quot;)\r\n    public MongoClient mongoClient() {\r\n        CodecRegistry pojoCodecRegistry = fromProviders(PojoCodecProvider.builder().automatic(true).build());\r\n        CodecRegistry codecRegistry = fromRegistries(MongoClientSettings.getDefaultCodecRegistry(), pojoCodecRegistry);\r\n        return MongoClients.create(MongoClientSettings.builder()\r\n                .applyConnectionString(new ConnectionString(env.getProperty(&quot;spring.data.mongo.projectinformation.uri&quot;)))\r\n                .uuidRepresentation(UuidRepresentation.STANDARD)\r\n                .codecRegistry(codecRegistry)\r\n                .applyToConnectionPoolSettings(builder -&gt; {\r\n                    builder.maxConnectionLifeTime(30, TimeUnit.MINUTES)\r\n                            .maintenanceFrequency(5000, TimeUnit.MILLISECONDS)\r\n                            .maxConnectionIdleTime(1000, TimeUnit.MILLISECONDS)\r\n                            .maxWaitTime(150, TimeUnit.MILLISECONDS);\r\n                })\r\n                .applyToClusterSettings(builder -&gt; {\r\n                    builder.serverSelectionTimeout(5000, TimeUnit.MILLISECONDS);\r\n                })\r\n                .build());\r\n    }\r\n}\r\n```\r\n\r\nThe third and forth connections are identical to the above two so I will not repeat the code again.\r\n\r\nNow when I want to access data on Mongo here&#39;s how I&#39;m doing it via my DAL:\r\n\r\n```java\r\nRepository\r\npublic class SavedUserProfilesDALImpl implements SavedUserProfilesDal {\r\n    private static final Logger logger = LoggerFactory.getLogger(SavedUserProfilesDal.class);\r\n\r\n    @Autowired\r\n    @Qualifier(&quot;torchMongoTemplate&quot;)\r\n    private final MongoTemplate mongoTemplate;\r\n\r\n    public SavedUserProfilesDALImpl(@Qualifier(&quot;torchMongoTemplate&quot;) MongoTemplate mongoTemplate) {\r\n        this.mongoTemplate = mongoTemplate;\r\n    }\r\n\r\n\r\n    @Override\r\n    public SavedUserProfiles save(SavedUserProfiles savedUserProfile) {\r\n        logger.info(&quot;MONGO: Executing query save / update UserSavedQuery with userId {}&quot;, savedUserProfile.getUserId());\r\n        try {\r\n            return mongoTemplate.save(savedUserProfile);\r\n        } catch (Exception ex) {\r\n            logger.error(&quot;Unable to perform Mongo Operation Save SavedUserProfiles  {}&quot;, ex.getLocalizedMessage());\r\n            throw new ServiceUnavailableException(&quot;Unable to perform Mongo Operation {&quot; + ex.getLocalizedMessage() + &quot;}&quot;, &quot;SavedUserProfiles&quot;);\r\n        }\r\n    }\r\n```\r\nAnd when I want to query something which is not using the primary bean I do like so:\r\n\r\n```java\r\n@Repository\r\npublic class ThirdPartyDALImpl implements ThirdPartyContentDAL {\r\n    private final static Logger logger = LoggerFactory.getLogger(ThirdPartyDALImpl.class);\r\n\r\n    @Autowired\r\n    @Qualifier(&quot;projectInformationMongoTemplate&quot;)\r\n    private final MongoTemplate mongoTemplate;\r\n\r\n    public ThirdPartyDALImpl(@Qualifier(&quot;projectInformationMongoTemplate&quot;) MongoTemplate mongoTemplate) {\r\n        this.mongoTemplate = mongoTemplate;\r\n    }\r\n\r\n  @Override\r\n    public ThirdPartyContent fetchContentById(String thirdPartyContentId) {\r\n        Query query = new Query();\r\n        query.addCriteria(Criteria.where(&quot;_id&quot;).is(thirdPartyContentId));\r\n        try {\r\n            return mongoTemplate.findOne(query, ThirdPartyContent.class);\r\n        } catch (Exception ex) {\r\n            throw new ServiceUnavailableException(&quot;Unable to perform Mongo Operation {&quot; + ex.getLocalizedMessage() + &quot;}&quot;, &quot;Project&quot;);\r\n        }\r\n    }\r\n```\r\n\r\nI&#39;d like to stress, I believe the issues I&#39;m having are related to something in my configuration above. I think given that all other services (connecting to a single Mongo DB) are all on the same network, firewall, VPC etc. \r\n\r\nI guess this is a cry for help as I&#39;m pulling my hair out with constant alerts :-D \r\nAny help would be amazing.\r\n\r\nThanks","title":"Spring Mongo - Connecting to Multiple Mongo DB&#39;s results in Connection Timeouts","body":"<p>I have a problem which has me stumped. Hoping someone can help me here.</p>\n<p>So I'm sadly in the position of having a micro-service which for the moment needs to connect to 4 mongo databases all running in the cloud (Mongo Cloud Atlas) and on the same cluster. After setting everything up and deploying my service, I'm constantly getting errors for timeouts etc every couple of hours.</p>\n<p>The various errors are as follows:</p>\n<pre><code>MongoSocketReadTimeoutException: Timeout while receiving message\nMongoSocketReadException: Exception receiving message\nMongoSocketOpenException: Exception opening socket\nMongoSocketWriteException: Exception sending message\nMongoSocketException: cluster0-shard-00-00-pri.xxxxxx.mongodb.net: Temporary failure in name resolution\n</code></pre>\n<p>** Its worth noting that all my other Spring services which connect to the same cluster but are only configured for a single database do not have any timeout issues</p>\n<p>For further context, all my Java services are in in GCP (using cloud run) and all services are running on a VPC with peering to Mongo Atlas.</p>\n<p>For the micro-service(s) which connect to a single Mongo DB I configure my Mongo Client like so:</p>\n<pre class=\"lang-java prettyprint-override\"><code>\n@Configuration\npublic class MongoConfiguration {\n\n    @Value(&quot;${spring.data.mongodb.host}&quot;)\n    private String connectionString;\n\n    @Bean\n    public MongoClient mongoClient() {\n        CodecRegistry pojoCodecRegistry = fromProviders(PojoCodecProvider.builder().automatic(true).build());\n        CodecRegistry codecRegistry = fromRegistries(MongoClientSettings.getDefaultCodecRegistry(), pojoCodecRegistry);\n        return MongoClients.create(MongoClientSettings.builder()\n                .applyConnectionString(new ConnectionString(connectionString))\n                .uuidRepresentation(UuidRepresentation.STANDARD)\n                .codecRegistry(codecRegistry)\n                .build());\n    }\n\n    @Bean\n    public MongoClientSettings mongoClientSettings() {\n        return MongoClientSettings.builder()\n                .retryWrites(true)\n                .applyToClusterSettings(builder -&gt;\n                        builder.serverSelectionTimeout(5000, TimeUnit.MILLISECONDS))\n                .applyToConnectionPoolSettings((ConnectionPoolSettings.Builder builder) -&gt; builder.maxSize(300) //connections count\n                        .minSize(100)\n                        .maxConnectionLifeTime(1000, TimeUnit.MILLISECONDS)\n                        .maintenanceFrequency(5000, TimeUnit.MILLISECONDS)\n                        .maxConnectionIdleTime(1000, TimeUnit.MILLISECONDS)\n                        .maxWaitTime(150, TimeUnit.MILLISECONDS))\n                .applyToSocketSettings(builder -&gt; builder.connectTimeout(10, TimeUnit.SECONDS)\n                        .readTimeout(15, TimeUnit.SECONDS))\n                .applicationName(&quot;ProfileServiceApplication&quot;)\n                .retryWrites(true)\n                .build();\n    }\n\n    @Bean\n    public MongoCustomConversions mongoCustomConversions() {\n        return new MongoCustomConversions(Arrays.asList(\n                new BigDecimalDecimal128Converter(),\n                new Decimal128BigDecimalConverter()\n        ));\n\n    }\n\n    @WritingConverter\n    private static class BigDecimalDecimal128Converter implements Converter&lt;BigDecimal, Decimal128&gt; {\n\n        @Override\n        public Decimal128 convert(@NonNull BigDecimal source) {\n            return new Decimal128(source);\n        }\n    }\n\n    @ReadingConverter\n    private static class Decimal128BigDecimalConverter implements Converter&lt;Decimal128, BigDecimal&gt; {\n\n        @Override\n        public BigDecimal convert(@NonNull Decimal128 source) {\n            return source.bigDecimalValue();\n        }\n\n    }\n}\n</code></pre>\n<p>On the (problematic) service which connects to multiple Mongo DB's here's how I've configured my mongo clients:</p>\n<p><em>Primary Mongo Client</em></p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\npublic class TorchMongoConfig {\n    @Autowired\n    private Environment env;\n\n    @Primary\n    @Bean(name = &quot;TorchMongoDBFactory&quot;)\n    public MongoDatabaseFactory torchFactory(@Qualifier(&quot;TORCH_CLIENT&quot;) MongoClient mongoClient) {\n        return new SimpleMongoClientDatabaseFactory(mongoClient, &quot;Torch&quot;);\n    }\n\n    @Primary\n    @Bean\n    public MongoTemplate torchMongoTemplate(@Qualifier(&quot;TORCH_CLIENT&quot;) MongoClient client) {\n        return new MongoTemplate(torchFactory(client));\n    }\n\n    @Bean(&quot;TORCH_CLIENT&quot;)\n    @Primary\n    public MongoClient mongoClient() {\n        CodecRegistry pojoCodecRegistry = fromProviders(PojoCodecProvider.builder().automatic(true).build());\n        CodecRegistry codecRegistry = fromRegistries(MongoClientSettings.getDefaultCodecRegistry(), pojoCodecRegistry);\n        return MongoClients.create(MongoClientSettings.builder()\n                .applyConnectionString(new ConnectionString(env.getProperty(&quot;spring.data.mongo.torchdb.uri&quot;)))\n                .uuidRepresentation(UuidRepresentation.STANDARD)\n                .codecRegistry(codecRegistry)\n                .applyToConnectionPoolSettings(builder -&gt; {\n                    builder.maxConnectionLifeTime(1000, TimeUnit.MILLISECONDS)\n                            .maintenanceFrequency(5000, TimeUnit.MILLISECONDS)\n                            .maxConnectionIdleTime(1000, TimeUnit.MILLISECONDS)\n                            .maxWaitTime(150, TimeUnit.MILLISECONDS);\n                })\n                .applyToClusterSettings(builder -&gt; {\n                    builder.serverSelectionTimeout(5000, TimeUnit.MILLISECONDS);\n                })\n                .build());\n        }\n        \n    @Bean\n    public MongoClientSettingsBuilderCustomizer mongoDBDefaultSettings() {\n        return builder -&gt; {\n            builder.applyToSocketSettings(builderSettings -&gt; {\n                builderSettings.connectTimeout(10, TimeUnit.SECONDS)\n                        .readTimeout(15, TimeUnit.SECONDS);\n            });\n\n            builder.applyToClusterSettings(builderSettings -&gt; {\n                builderSettings\n                        .serverSelectionTimeout(5000, TimeUnit.MILLISECONDS);\n            });\n\n            builder.applyToConnectionPoolSettings(builderSettings -&gt; {\n                builderSettings.maxSize(300) //connections count\n                        .minSize(100)\n                        .maxConnectionLifeTime(1000, TimeUnit.MILLISECONDS)\n                        .maintenanceFrequency(5000, TimeUnit.MILLISECONDS)\n                        .maxConnectionIdleTime(1000, TimeUnit.MILLISECONDS)\n                        .maxWaitTime(150, TimeUnit.MILLISECONDS);\n            });\n            // Apply other settings to the builder.\n        };\n    }\n\n    @Bean\n    public MongoCustomConversions mongoCustomConversions() {\n        return new MongoCustomConversions(Arrays.asList(\n                new BigDecimalDecimal128Converter(),\n                new Decimal128BigDecimalConverter()\n        ));\n    }\n\n    @WritingConverter\n    private static class BigDecimalDecimal128Converter implements Converter&lt;BigDecimal, Decimal128&gt; {\n\n        @Override\n        public Decimal128 convert(@NonNull BigDecimal source) {\n            return new Decimal128(source);\n        }\n    }\n\n    @ReadingConverter\n    private static class Decimal128BigDecimalConverter implements Converter&lt;Decimal128, BigDecimal&gt; {\n\n        @Override\n        public BigDecimal convert(@NonNull Decimal128 source) {\n            return source.bigDecimalValue();\n        }\n\n    }\n}\n</code></pre>\n<p><em>Secondary MongoClient</em></p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\npublic class ProjectInformationMongoConfig {\n    @Autowired\n    private Environment env;\n\n    @Bean(name = &quot;ProjectInformationMongoDBFactory&quot;)\n    public MongoDatabaseFactory userProjectMongoDatabaseFactory(@Qualifier(&quot;ProjectInformation&quot;) MongoClient mongoClient) {\n        return new SimpleMongoClientDatabaseFactory(mongoClient, &quot;ProjectInformation&quot;);\n    }\n\n    @Bean(name = &quot;projectInformationMongoTemplate&quot;)\n    public MongoTemplate userProjectMongoTemplate(@Qualifier(&quot;ProjectInformationMongoDBFactory&quot;) MongoDatabaseFactory mongoDatabaseFactory) {\n        return new MongoTemplate(mongoDatabaseFactory);\n    }\n\n    @Bean(&quot;ProjectInformation&quot;)\n    public MongoClient mongoClient() {\n        CodecRegistry pojoCodecRegistry = fromProviders(PojoCodecProvider.builder().automatic(true).build());\n        CodecRegistry codecRegistry = fromRegistries(MongoClientSettings.getDefaultCodecRegistry(), pojoCodecRegistry);\n        return MongoClients.create(MongoClientSettings.builder()\n                .applyConnectionString(new ConnectionString(env.getProperty(&quot;spring.data.mongo.projectinformation.uri&quot;)))\n                .uuidRepresentation(UuidRepresentation.STANDARD)\n                .codecRegistry(codecRegistry)\n                .applyToConnectionPoolSettings(builder -&gt; {\n                    builder.maxConnectionLifeTime(30, TimeUnit.MINUTES)\n                            .maintenanceFrequency(5000, TimeUnit.MILLISECONDS)\n                            .maxConnectionIdleTime(1000, TimeUnit.MILLISECONDS)\n                            .maxWaitTime(150, TimeUnit.MILLISECONDS);\n                })\n                .applyToClusterSettings(builder -&gt; {\n                    builder.serverSelectionTimeout(5000, TimeUnit.MILLISECONDS);\n                })\n                .build());\n    }\n}\n</code></pre>\n<p>The third and forth connections are identical to the above two so I will not repeat the code again.</p>\n<p>Now when I want to access data on Mongo here's how I'm doing it via my DAL:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Repository\npublic class SavedUserProfilesDALImpl implements SavedUserProfilesDal {\n    private static final Logger logger = LoggerFactory.getLogger(SavedUserProfilesDal.class);\n\n    @Autowired\n    @Qualifier(&quot;torchMongoTemplate&quot;)\n    private final MongoTemplate mongoTemplate;\n\n    public SavedUserProfilesDALImpl(@Qualifier(&quot;torchMongoTemplate&quot;) MongoTemplate mongoTemplate) {\n        this.mongoTemplate = mongoTemplate;\n    }\n\n\n    @Override\n    public SavedUserProfiles save(SavedUserProfiles savedUserProfile) {\n        logger.info(&quot;MONGO: Executing query save / update UserSavedQuery with userId {}&quot;, savedUserProfile.getUserId());\n        try {\n            return mongoTemplate.save(savedUserProfile);\n        } catch (Exception ex) {\n            logger.error(&quot;Unable to perform Mongo Operation Save SavedUserProfiles  {}&quot;, ex.getLocalizedMessage());\n            throw new ServiceUnavailableException(&quot;Unable to perform Mongo Operation {&quot; + ex.getLocalizedMessage() + &quot;}&quot;, &quot;SavedUserProfiles&quot;);\n        }\n    }\n</code></pre>\n<p>And when I want to query something which is not using the primary bean I do like so:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Repository\npublic class ThirdPartyDALImpl implements ThirdPartyContentDAL {\n    private final static Logger logger = LoggerFactory.getLogger(ThirdPartyDALImpl.class);\n\n    @Autowired\n    @Qualifier(&quot;projectInformationMongoTemplate&quot;)\n    private final MongoTemplate mongoTemplate;\n\n    public ThirdPartyDALImpl(@Qualifier(&quot;projectInformationMongoTemplate&quot;) MongoTemplate mongoTemplate) {\n        this.mongoTemplate = mongoTemplate;\n    }\n\n  @Override\n    public ThirdPartyContent fetchContentById(String thirdPartyContentId) {\n        Query query = new Query();\n        query.addCriteria(Criteria.where(&quot;_id&quot;).is(thirdPartyContentId));\n        try {\n            return mongoTemplate.findOne(query, ThirdPartyContent.class);\n        } catch (Exception ex) {\n            throw new ServiceUnavailableException(&quot;Unable to perform Mongo Operation {&quot; + ex.getLocalizedMessage() + &quot;}&quot;, &quot;Project&quot;);\n        }\n    }\n</code></pre>\n<p>I'd like to stress, I believe the issues I'm having are related to something in my configuration above. I think given that all other services (connecting to a single Mongo DB) are all on the same network, firewall, VPC etc.</p>\n<p>I guess this is a cry for help as I'm pulling my hair out with constant alerts :-D\nAny help would be amazing.</p>\n<p>Thanks</p>\n"},{"tags":["java","amazon-s3","apache-flink"],"comments":[{"owner":{"account_id":3092852,"reputation":113,"user_id":2618629,"display_name":"Xogaz"},"score":0,"creation_date":1674749541,"post_id":75245278,"comment_id":132784445,"body_markdown":"Ok, I dramatically increased the memory limit (from 512Mb to 2Gig) and the task manager is not crashing anymore.","body":"Ok, I dramatically increased the memory limit (from 512Mb to 2Gig) and the task manager is not crashing anymore."}],"owner":{"account_id":3092852,"reputation":113,"user_id":2618629,"display_name":"Xogaz"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":253,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1674746282,"creation_date":1674731197,"question_id":75245278,"body_markdown":"I have a job receiving events with a s3 link. It attempts to load the resource using the following snippet \r\n\r\n```java\r\n// value of s3 source is &quot;s3://bucket_id/path/to/object.json&quot;\r\nList&lt;String&gt; collect = ExecutionEnvironment.getExecutionEnvironment().readTextFile(s3_source.toString()).collect();\r\n````\r\n\r\nFlink is configured accordingly in flink-conf.yaml\r\n````yaml\r\n    s3.access-key: XXX\r\n    s3.secret-key: XXX\r\n    s3.endpoint: s3.openshift-storage.svc\r\n    s3.path.style.access: true  \r\n````\r\n\r\nThe library `flink-s3-fs-hadoop-1.16.0.jar` is in path `/opt/flink/plugins/flink-s3-fs-hadoop`. I had some issues setting up the self-signed certificates (see [this Gist][1] for my config), but it seems to be working. \r\n\r\nWhen starting the job through the JobManager&#39;s WebUI, I get the following logs\r\n\r\n*Job is starting*\r\n````\r\n2023-01-26 10:33:09,891 INFO  org.apache.flink.runtime.taskexecutor.TaskExecutor           [] - Receive slot request f9f291f0e4b74471e59a74602212060b for job c62504dec97d185a3e86fc390256e3f9 from resource manager with leader id 00000000000000000000000000000000.\r\n2023-01-26 10:33:09,894 DEBUG org.apache.flink.runtime.memory.MemoryManager                [] - Initialized MemoryManager with total memory size 178956973 and page size 32768.\r\n2023-01-26 10:33:09,895 INFO  org.apache.flink.runtime.taskexecutor.TaskExecutor           [] - Allocated slot for f9f291f0e4b74471e59a74602212060b.\r\n2023-01-26 10:33:09,896 INFO  org.apache.flink.runtime.taskexecutor.DefaultJobLeaderService [] - Add job c62504dec97d185a3e86fc390256e3f9 for job leader monitoring.\r\n2023-01-26 10:33:09,897 DEBUG org.apache.flink.runtime.taskexecutor.DefaultJobLeaderService [] - New leader information for job c62504dec97d185a3e86fc390256e3f9. Address: akka.tcp://flink@flink-jobmanager:6123/user/rpc/jobmanager_10, leader id: 00000000000000000000000000000000.\r\n2023-01-26 10:33:09,897 INFO  org.apache.flink.runtime.taskexecutor.DefaultJobLeaderService [] - Try to register at job manager akka.tcp://flink@flink-jobmanager:6123/user/rpc/jobmanager_10 with leader id 00000000-0000-0000-0000-000000000000.\r\n2023-01-26 10:33:09,898 DEBUG org.apache.flink.runtime.rpc.akka.AkkaRpcService             [] - Try to connect to remote RPC endpoint with address akka.tcp://flink@flink-jobmanager:6123/user/rpc/jobmanager_10. Returning a org.apache.flink.runtime.jobmaster.JobMasterGateway gateway.\r\n2023-01-26 10:33:09,910 INFO  org.apache.flink.runtime.taskexecutor.DefaultJobLeaderService [] - Resolved JobManager address, beginning registration\r\n2023-01-26 10:33:09,910 DEBUG org.apache.flink.runtime.taskexecutor.DefaultJobLeaderService [] - Registration at JobManager attempt 1 (timeout=100ms)\r\n2023-01-26 10:33:09,991 DEBUG org.apache.flink.runtime.taskexecutor.DefaultJobLeaderService [] - Registration with JobManager at akka.tcp://flink@flink-jobmanager:6123/user/rpc/jobmanager_10 was successful.\r\n2023-01-26 10:33:09,993 INFO  org.apache.flink.runtime.taskexecutor.DefaultJobLeaderService [] - Successful registration at job manager akka.tcp://flink@flink-jobmanager:6123/user/rpc/jobmanager_10 for job c62504dec97d185a3e86fc390256e3f9.\r\n2023-01-26 10:33:09,993 INFO  org.apache.flink.runtime.taskexecutor.TaskExecutor           [] - Establish JobManager connection for job c62504dec97d185a3e86fc390256e3f9.\r\n2023-01-26 10:33:09,995 INFO  org.apache.flink.runtime.taskexecutor.TaskExecutor           [] - Offer reserved slots to the leader of job c62504dec97d185a3e86fc390256e3f9.\r\n2023-01-26 10:33:10,011 INFO  org.apache.flink.runtime.taskexecutor.slot.TaskSlotTableImpl [] - Activate slot f9f291f0e4b74471e59a74602212060b.\r\n````\r\n\r\n*Event is received from RabbitMQ Stream*\r\n````\r\n2023-01-26 10:33:11,193 INFO  io.av360.maverick.insights.rmqstreams.RMQStreamSource        [] - Running event consumer as stream source\r\n2023-01-26 10:33:11,194 INFO  io.av360.maverick.insights.rmqstreams.config.RMQStreamsConfig [] - Creating consumer for stream &#39;events&#39;\r\n2023-01-26 10:33:11,195 INFO  io.av360.maverick.insights.rmqstreams.config.RMQStreamsConfig [] - Creating environment required to connect to a RabbitMQ Stream.\r\n2023-01-26 10:33:11,195 DEBUG io.av360.maverick.insights.rmqstreams.config.StreamsClientFactory [] - Building environment\r\n2023-01-26 10:33:11,195 INFO  io.av360.maverick.insights.rmqstreams.config.StreamsClientFactory [] - Valid configuration for host &#39;rabbitmq&#39;\r\n....\r\n2023-01-26 10:33:14,907 INFO  XXX   [] - Event of type &#39;crawled.source.channel&#39; with source &#39;s3://bucket-d9c5a56e-c4a9-4b48-82dc-04241cb2b72c/scraped/source/channel/channel_UCucD43ut3DEx6QDK2JOEI1w.json&#39;\r\n````\r\n\r\n*Attempting to read from s3*\r\n```\r\n2023-01-26 10:33:15,303 DEBUG org.apache.flink.fs.s3.common.AbstractS3FileSystemFactory    [] - Creating S3 file system backed by Hadoop s3a file system\r\n2023-01-26 10:33:15,303 DEBUG org.apache.flink.fs.s3.common.AbstractS3FileSystemFactory    [] - Loading Hadoop configuration for Hadoop s3a file system\r\n2023-01-26 10:33:15,500 DEBUG org.apache.flink.fs.s3hadoop.common.HadoopConfigLoader       [] - Adding Flink config entry for s3.secret-key as fs.s3a.secret-key to Hadoop config\r\n2023-01-26 10:33:15,500 DEBUG org.apache.flink.fs.s3hadoop.common.HadoopConfigLoader       [] - Adding Flink config entry for s3.endpoint as fs.s3a.endpoint to Hadoop config\r\n2023-01-26 10:33:15,500 DEBUG org.apache.flink.fs.s3hadoop.common.HadoopConfigLoader       [] - Adding Flink config entry for s3.access-key as fs.s3a.access-key to Hadoop config\r\n2023-01-26 10:33:15,500 DEBUG org.apache.flink.fs.s3hadoop.common.HadoopConfigLoader       [] - Adding Flink config entry for s3.path.style.access as fs.s3a.path.style.access to Hadoop config\r\n2023-01-26 10:33:15,705 DEBUG org.apache.flink.fs.s3hadoop.S3FileSystemFactory             [] - Using scheme s3://bucket-d9c5a56e-c4a9-4b48-82dc-04241cb2b72c/scraped/source/channel/channel_UCucD43ut3DEx6QDK2JOEI1w.json for s3a file system backing the S3 File System\r\n```\r\n\r\n*a few hadoop exceptions (relevant?)*\r\n```\r\n2023-01-26 10:33:15,800 DEBUG org.apache.hadoop.util.Shell                                 [] - Failed to detect a valid hadoop home directory\r\njava.io.FileNotFoundException: HADOOP_HOME and hadoop.home.dir are unset.\r\n...\r\n2023-01-26 10:33:16,108 DEBUG org.apache.hadoop.metrics2.impl.MetricsConfig                [] - Could not locate file hadoop-metrics2-s3a-file-system.properties\r\norg.apache.commons.configuration2.ex.ConfigurationException: Could not locate: org.apache.commons.configuration2.io.FileLocator@4ac69a5d[fileName=hadoop-metrics2-s3a-file-system.properties,basePath=&lt;null&gt;,sourceURL=,encoding=&lt;null&gt;,fileSystem=&lt;null&gt;,locationStrategy=&lt;null&gt;]\r\n...\r\n2023-01-26 10:33:16,111 DEBUG org.apache.hadoop.metrics2.impl.MetricsConfig                [] - Could not locate file hadoop-metrics2.properties\r\norg.apache.commons.configuration2.ex.ConfigurationException: Could not locate: org.apache.commons.configuration2.io.FileLocator@4faa9611[fileName=hadoop-metrics2.properties,basePath=&lt;null&gt;,sourceURL=,encoding=&lt;null&gt;,fileSystem=&lt;null&gt;,locationStrategy=&lt;null&gt;]\r\n...\r\n2023-01-26 10:33:16,508 DEBUG org.apache.hadoop.util.NativeCodeLoader                      [] - Failed to load native-hadoop with error: java.lang.UnsatisfiedLinkError: no hadoop in java.library.path: [/usr/java/packages/lib, /usr/lib64, /lib64, /lib, /usr/lib]\r\n2023-01-26 10:33:16,508 DEBUG org.apache.hadoop.util.NativeCodeLoader                      [] - java.library.path=/usr/java/packages/lib:/usr/lib64:/lib64:/lib:/usr/lib\r\n2023-01-26 10:33:16,508 WARN  org.apache.hadoop.util.NativeCodeLoader                      [] - Unable to load native-hadoop library for your platform... using builtin-java classes where applicable\r\n2023-01-26 10:33:16,508 DEBUG org.apache.hadoop.util.PerformanceAdvisory                   [] - Falling back to shell based\r\n...\r\n2023-01-26 10:33:17,119 DEBUG org.apache.hadoop.security.ssl.DelegatingSSLSocketFactory    [] - Initializing SSL Context to channel mode Default_JSSE\r\n2023-01-26 10:33:17,710 DEBUG org.apache.hadoop.fs.s3a.impl.NetworkBinding                 [] - Unable to create class org.apache.hadoop.fs.s3a.impl.ConfigureShadedAWSSocketFactory, value of fs.s3a.ssl.channel.mode will be ignored\r\njava.lang.NoClassDefFoundError: com/amazonaws/thirdparty/apache/http/conn/socket/ConnectionSocketFactory\r\n```\r\n\r\n*Connection attempt*\r\n```\r\n2023-01-26 10:33:17,997 DEBUG org.apache.hadoop.fs.s3a.DefaultS3ClientFactory              [] - Creating endpoint configuration for &quot;s3.openshift-storage.svc&quot;\r\n2023-01-26 10:33:17,998 DEBUG org.apache.hadoop.fs.s3a.DefaultS3ClientFactory              [] - Endpoint URI = https://s3.openshift-storage.svc\r\n2023-01-26 10:33:18,096 DEBUG org.apache.hadoop.fs.s3a.DefaultS3ClientFactory              [] - Endpoint https://s3.openshift-storage.svc is not the default; parsing\r\n2023-01-26 10:33:18,097 DEBUG org.apache.hadoop.fs.s3a.DefaultS3ClientFactory              [] - Region for endpoint s3.openshift-storage.svc, URI https://s3.openshift-storage.svc is determined as openshift-storage\r\n...\r\n2023-01-26 10:33:18,806 DEBUG com.amazonaws.request                                        [] - Sending Request: HEAD https://s3.openshift-storage.svc /bucket-d9c5a56e-c4a9-4b48-82dc-04241cb2b72c/scraped/source/channel/channel_UCucD43ut3DEx6QDK2JOEI1w.json Headers: (amz-sdk-invocation-id: xxx, Content-Type: application/octet-stream, User-Agent: Hadoop 3.3.2, aws-sdk-java/1.11.951 Linux/4.18.0-372.26.1.el8_6.x86_64 OpenJDK_64-Bit_Server_VM/11.0.17+8 java/11.0.17 vendor/Eclipse_Adoptium, ) \r\n\r\n...\r\n2023-01-26 10:33:20,108 DEBUG org.apache.hadoop.fs.s3a.Invoker                             [] - Starting: open s3a://bucket-d9c5a56e-c4a9-4b48-82dc-04241cb2b72c/scraped/source/channel/channel_UCucD43ut3DEx6QDK2JOEI1w.json at 0\r\n\r\n...\r\n2023-01-26 10:33:19,598 DEBUG com.amazonaws.request                                        [] - Received successful response: 200, AWS Request ID: ldcyiwlo-6w4j96-om3\r\n```\r\n\r\n*Everything looks fine for now, last logs are*\r\n\r\n```\r\n2023-01-26 10:33:24,299 INFO  org.apache.flink.runtime.taskexecutor.TaskManagerServices    [] - Temporary file directory &#39;/tmp&#39;: total 119 GB, usable 48 GB (40.34% usable)\r\n2023-01-26 10:33:24,299 DEBUG org.apache.flink.runtime.io.disk.FileChannelManagerImpl      [] - FileChannelManager uses directory /tmp/flink-io-15f45aea-fa25-4f90-be7e-ad49e8722980 for spill files.\r\n2023-01-26 10:33:24,299 INFO  org.apache.flink.runtime.io.disk.iomanager.IOManager         [] - Created a new FileChannelManager for spilling of task related data to disk (joins, sorting, ...). Used directories:\r\n\t/tmp/flink-io-15f45aea-fa25-4f90-be7e-ad49e8722980\r\n2023-01-26 10:33:24,301 DEBUG org.apache.flink.runtime.io.disk.FileChannelManagerImpl      [] - FileChannelManager uses directory /tmp/flink-netty-shuffle-ff78f4af-d02b-412b-b305-414b570917a8 for spill files.\r\n2023-01-26 10:33:24,301 INFO  org.apache.flink.runtime.io.network.NettyShuffleServiceFactory [] - Created a new FileChannelManager for storing result partitions of BLOCKING shuffles. Used directories:\r\n\t/tmp/flink-netty-shuffle-ff78f4af-d02b-412b-b305-414b570917a8\r\n\r\n```\r\n\r\nThese are the last logs. From this point on, the job fails and the task manager is gone (and restarted through K8S). \r\n\r\nMy two questions are: \r\n- Can I tune the log levels to find out more (root and hadoop are on trace)?\r\n- What am I missing here?\r\n\r\n  [1]: https://gist.github.com/pajoma/b01ef58f21f38e0a5e1f34c2110f39ee","title":"Flink Taskmanager crashed while accessing S3 FileSource (on Kubernetes/OpenShift)","body":"<p>I have a job receiving events with a s3 link. It attempts to load the resource using the following snippet</p>\n<pre class=\"lang-java prettyprint-override\"><code>// value of s3 source is &quot;s3://bucket_id/path/to/object.json&quot;\nList&lt;String&gt; collect = ExecutionEnvironment.getExecutionEnvironment().readTextFile(s3_source.toString()).collect();\n</code></pre>\n<p>Flink is configured accordingly in flink-conf.yaml</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>    s3.access-key: XXX\n    s3.secret-key: XXX\n    s3.endpoint: s3.openshift-storage.svc\n    s3.path.style.access: true  \n</code></pre>\n<p>The library <code>flink-s3-fs-hadoop-1.16.0.jar</code> is in path <code>/opt/flink/plugins/flink-s3-fs-hadoop</code>. I had some issues setting up the self-signed certificates (see <a href=\"https://gist.github.com/pajoma/b01ef58f21f38e0a5e1f34c2110f39ee\" rel=\"nofollow noreferrer\">this Gist</a> for my config), but it seems to be working.</p>\n<p>When starting the job through the JobManager's WebUI, I get the following logs</p>\n<p><em>Job is starting</em></p>\n<pre><code>2023-01-26 10:33:09,891 INFO  org.apache.flink.runtime.taskexecutor.TaskExecutor           [] - Receive slot request f9f291f0e4b74471e59a74602212060b for job c62504dec97d185a3e86fc390256e3f9 from resource manager with leader id 00000000000000000000000000000000.\n2023-01-26 10:33:09,894 DEBUG org.apache.flink.runtime.memory.MemoryManager                [] - Initialized MemoryManager with total memory size 178956973 and page size 32768.\n2023-01-26 10:33:09,895 INFO  org.apache.flink.runtime.taskexecutor.TaskExecutor           [] - Allocated slot for f9f291f0e4b74471e59a74602212060b.\n2023-01-26 10:33:09,896 INFO  org.apache.flink.runtime.taskexecutor.DefaultJobLeaderService [] - Add job c62504dec97d185a3e86fc390256e3f9 for job leader monitoring.\n2023-01-26 10:33:09,897 DEBUG org.apache.flink.runtime.taskexecutor.DefaultJobLeaderService [] - New leader information for job c62504dec97d185a3e86fc390256e3f9. Address: akka.tcp://flink@flink-jobmanager:6123/user/rpc/jobmanager_10, leader id: 00000000000000000000000000000000.\n2023-01-26 10:33:09,897 INFO  org.apache.flink.runtime.taskexecutor.DefaultJobLeaderService [] - Try to register at job manager akka.tcp://flink@flink-jobmanager:6123/user/rpc/jobmanager_10 with leader id 00000000-0000-0000-0000-000000000000.\n2023-01-26 10:33:09,898 DEBUG org.apache.flink.runtime.rpc.akka.AkkaRpcService             [] - Try to connect to remote RPC endpoint with address akka.tcp://flink@flink-jobmanager:6123/user/rpc/jobmanager_10. Returning a org.apache.flink.runtime.jobmaster.JobMasterGateway gateway.\n2023-01-26 10:33:09,910 INFO  org.apache.flink.runtime.taskexecutor.DefaultJobLeaderService [] - Resolved JobManager address, beginning registration\n2023-01-26 10:33:09,910 DEBUG org.apache.flink.runtime.taskexecutor.DefaultJobLeaderService [] - Registration at JobManager attempt 1 (timeout=100ms)\n2023-01-26 10:33:09,991 DEBUG org.apache.flink.runtime.taskexecutor.DefaultJobLeaderService [] - Registration with JobManager at akka.tcp://flink@flink-jobmanager:6123/user/rpc/jobmanager_10 was successful.\n2023-01-26 10:33:09,993 INFO  org.apache.flink.runtime.taskexecutor.DefaultJobLeaderService [] - Successful registration at job manager akka.tcp://flink@flink-jobmanager:6123/user/rpc/jobmanager_10 for job c62504dec97d185a3e86fc390256e3f9.\n2023-01-26 10:33:09,993 INFO  org.apache.flink.runtime.taskexecutor.TaskExecutor           [] - Establish JobManager connection for job c62504dec97d185a3e86fc390256e3f9.\n2023-01-26 10:33:09,995 INFO  org.apache.flink.runtime.taskexecutor.TaskExecutor           [] - Offer reserved slots to the leader of job c62504dec97d185a3e86fc390256e3f9.\n2023-01-26 10:33:10,011 INFO  org.apache.flink.runtime.taskexecutor.slot.TaskSlotTableImpl [] - Activate slot f9f291f0e4b74471e59a74602212060b.\n</code></pre>\n<p><em>Event is received from RabbitMQ Stream</em></p>\n<pre><code>2023-01-26 10:33:11,193 INFO  io.av360.maverick.insights.rmqstreams.RMQStreamSource        [] - Running event consumer as stream source\n2023-01-26 10:33:11,194 INFO  io.av360.maverick.insights.rmqstreams.config.RMQStreamsConfig [] - Creating consumer for stream 'events'\n2023-01-26 10:33:11,195 INFO  io.av360.maverick.insights.rmqstreams.config.RMQStreamsConfig [] - Creating environment required to connect to a RabbitMQ Stream.\n2023-01-26 10:33:11,195 DEBUG io.av360.maverick.insights.rmqstreams.config.StreamsClientFactory [] - Building environment\n2023-01-26 10:33:11,195 INFO  io.av360.maverick.insights.rmqstreams.config.StreamsClientFactory [] - Valid configuration for host 'rabbitmq'\n....\n2023-01-26 10:33:14,907 INFO  XXX   [] - Event of type 'crawled.source.channel' with source 's3://bucket-d9c5a56e-c4a9-4b48-82dc-04241cb2b72c/scraped/source/channel/channel_UCucD43ut3DEx6QDK2JOEI1w.json'\n</code></pre>\n<p><em>Attempting to read from s3</em></p>\n<pre><code>2023-01-26 10:33:15,303 DEBUG org.apache.flink.fs.s3.common.AbstractS3FileSystemFactory    [] - Creating S3 file system backed by Hadoop s3a file system\n2023-01-26 10:33:15,303 DEBUG org.apache.flink.fs.s3.common.AbstractS3FileSystemFactory    [] - Loading Hadoop configuration for Hadoop s3a file system\n2023-01-26 10:33:15,500 DEBUG org.apache.flink.fs.s3hadoop.common.HadoopConfigLoader       [] - Adding Flink config entry for s3.secret-key as fs.s3a.secret-key to Hadoop config\n2023-01-26 10:33:15,500 DEBUG org.apache.flink.fs.s3hadoop.common.HadoopConfigLoader       [] - Adding Flink config entry for s3.endpoint as fs.s3a.endpoint to Hadoop config\n2023-01-26 10:33:15,500 DEBUG org.apache.flink.fs.s3hadoop.common.HadoopConfigLoader       [] - Adding Flink config entry for s3.access-key as fs.s3a.access-key to Hadoop config\n2023-01-26 10:33:15,500 DEBUG org.apache.flink.fs.s3hadoop.common.HadoopConfigLoader       [] - Adding Flink config entry for s3.path.style.access as fs.s3a.path.style.access to Hadoop config\n2023-01-26 10:33:15,705 DEBUG org.apache.flink.fs.s3hadoop.S3FileSystemFactory             [] - Using scheme s3://bucket-d9c5a56e-c4a9-4b48-82dc-04241cb2b72c/scraped/source/channel/channel_UCucD43ut3DEx6QDK2JOEI1w.json for s3a file system backing the S3 File System\n</code></pre>\n<p><em>a few hadoop exceptions (relevant?)</em></p>\n<pre><code>2023-01-26 10:33:15,800 DEBUG org.apache.hadoop.util.Shell                                 [] - Failed to detect a valid hadoop home directory\njava.io.FileNotFoundException: HADOOP_HOME and hadoop.home.dir are unset.\n...\n2023-01-26 10:33:16,108 DEBUG org.apache.hadoop.metrics2.impl.MetricsConfig                [] - Could not locate file hadoop-metrics2-s3a-file-system.properties\norg.apache.commons.configuration2.ex.ConfigurationException: Could not locate: org.apache.commons.configuration2.io.FileLocator@4ac69a5d[fileName=hadoop-metrics2-s3a-file-system.properties,basePath=&lt;null&gt;,sourceURL=,encoding=&lt;null&gt;,fileSystem=&lt;null&gt;,locationStrategy=&lt;null&gt;]\n...\n2023-01-26 10:33:16,111 DEBUG org.apache.hadoop.metrics2.impl.MetricsConfig                [] - Could not locate file hadoop-metrics2.properties\norg.apache.commons.configuration2.ex.ConfigurationException: Could not locate: org.apache.commons.configuration2.io.FileLocator@4faa9611[fileName=hadoop-metrics2.properties,basePath=&lt;null&gt;,sourceURL=,encoding=&lt;null&gt;,fileSystem=&lt;null&gt;,locationStrategy=&lt;null&gt;]\n...\n2023-01-26 10:33:16,508 DEBUG org.apache.hadoop.util.NativeCodeLoader                      [] - Failed to load native-hadoop with error: java.lang.UnsatisfiedLinkError: no hadoop in java.library.path: [/usr/java/packages/lib, /usr/lib64, /lib64, /lib, /usr/lib]\n2023-01-26 10:33:16,508 DEBUG org.apache.hadoop.util.NativeCodeLoader                      [] - java.library.path=/usr/java/packages/lib:/usr/lib64:/lib64:/lib:/usr/lib\n2023-01-26 10:33:16,508 WARN  org.apache.hadoop.util.NativeCodeLoader                      [] - Unable to load native-hadoop library for your platform... using builtin-java classes where applicable\n2023-01-26 10:33:16,508 DEBUG org.apache.hadoop.util.PerformanceAdvisory                   [] - Falling back to shell based\n...\n2023-01-26 10:33:17,119 DEBUG org.apache.hadoop.security.ssl.DelegatingSSLSocketFactory    [] - Initializing SSL Context to channel mode Default_JSSE\n2023-01-26 10:33:17,710 DEBUG org.apache.hadoop.fs.s3a.impl.NetworkBinding                 [] - Unable to create class org.apache.hadoop.fs.s3a.impl.ConfigureShadedAWSSocketFactory, value of fs.s3a.ssl.channel.mode will be ignored\njava.lang.NoClassDefFoundError: com/amazonaws/thirdparty/apache/http/conn/socket/ConnectionSocketFactory\n</code></pre>\n<p><em>Connection attempt</em></p>\n<pre><code>2023-01-26 10:33:17,997 DEBUG org.apache.hadoop.fs.s3a.DefaultS3ClientFactory              [] - Creating endpoint configuration for &quot;s3.openshift-storage.svc&quot;\n2023-01-26 10:33:17,998 DEBUG org.apache.hadoop.fs.s3a.DefaultS3ClientFactory              [] - Endpoint URI = https://s3.openshift-storage.svc\n2023-01-26 10:33:18,096 DEBUG org.apache.hadoop.fs.s3a.DefaultS3ClientFactory              [] - Endpoint https://s3.openshift-storage.svc is not the default; parsing\n2023-01-26 10:33:18,097 DEBUG org.apache.hadoop.fs.s3a.DefaultS3ClientFactory              [] - Region for endpoint s3.openshift-storage.svc, URI https://s3.openshift-storage.svc is determined as openshift-storage\n...\n2023-01-26 10:33:18,806 DEBUG com.amazonaws.request                                        [] - Sending Request: HEAD https://s3.openshift-storage.svc /bucket-d9c5a56e-c4a9-4b48-82dc-04241cb2b72c/scraped/source/channel/channel_UCucD43ut3DEx6QDK2JOEI1w.json Headers: (amz-sdk-invocation-id: xxx, Content-Type: application/octet-stream, User-Agent: Hadoop 3.3.2, aws-sdk-java/1.11.951 Linux/4.18.0-372.26.1.el8_6.x86_64 OpenJDK_64-Bit_Server_VM/11.0.17+8 java/11.0.17 vendor/Eclipse_Adoptium, ) \n\n...\n2023-01-26 10:33:20,108 DEBUG org.apache.hadoop.fs.s3a.Invoker                             [] - Starting: open s3a://bucket-d9c5a56e-c4a9-4b48-82dc-04241cb2b72c/scraped/source/channel/channel_UCucD43ut3DEx6QDK2JOEI1w.json at 0\n\n...\n2023-01-26 10:33:19,598 DEBUG com.amazonaws.request                                        [] - Received successful response: 200, AWS Request ID: ldcyiwlo-6w4j96-om3\n</code></pre>\n<p><em>Everything looks fine for now, last logs are</em></p>\n<pre><code>2023-01-26 10:33:24,299 INFO  org.apache.flink.runtime.taskexecutor.TaskManagerServices    [] - Temporary file directory '/tmp': total 119 GB, usable 48 GB (40.34% usable)\n2023-01-26 10:33:24,299 DEBUG org.apache.flink.runtime.io.disk.FileChannelManagerImpl      [] - FileChannelManager uses directory /tmp/flink-io-15f45aea-fa25-4f90-be7e-ad49e8722980 for spill files.\n2023-01-26 10:33:24,299 INFO  org.apache.flink.runtime.io.disk.iomanager.IOManager         [] - Created a new FileChannelManager for spilling of task related data to disk (joins, sorting, ...). Used directories:\n    /tmp/flink-io-15f45aea-fa25-4f90-be7e-ad49e8722980\n2023-01-26 10:33:24,301 DEBUG org.apache.flink.runtime.io.disk.FileChannelManagerImpl      [] - FileChannelManager uses directory /tmp/flink-netty-shuffle-ff78f4af-d02b-412b-b305-414b570917a8 for spill files.\n2023-01-26 10:33:24,301 INFO  org.apache.flink.runtime.io.network.NettyShuffleServiceFactory [] - Created a new FileChannelManager for storing result partitions of BLOCKING shuffles. Used directories:\n    /tmp/flink-netty-shuffle-ff78f4af-d02b-412b-b305-414b570917a8\n\n</code></pre>\n<p>These are the last logs. From this point on, the job fails and the task manager is gone (and restarted through K8S).</p>\n<p>My two questions are:</p>\n<ul>\n<li>Can I tune the log levels to find out more (root and hadoop are on trace)?</li>\n<li>What am I missing here?</li>\n</ul>\n"},{"tags":["java","eclipse","github","clone"],"answers":[{"tags":[],"owner":{"account_id":8754628,"reputation":582,"user_id":6546584,"display_name":"desoss"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1674746170,"creation_date":1674746170,"answer_id":75248093,"question_id":75247919,"body_markdown":"If it&#39;s a Maven project using the smart import might help.\r\n\r\n [![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/rS0lV.png","title":"Why I can&#39;t build path for a project that was cloned from Github in Eclipse?","body":"<p>If it's a Maven project using the smart import might help.</p>\n<p><a href=\"https://i.stack.imgur.com/rS0lV.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/rS0lV.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":24154267,"reputation":13,"user_id":18118704,"display_name":"Comet"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":52,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75248093,"answer_count":1,"score":0,"last_activity_date":1674746170,"creation_date":1674745407,"question_id":75247919,"body_markdown":"I cloned a project of my teams from Github using a link to my Folder Java. I only used the Clone tools in Eclipse and added it to my Package Explorer as a General Project. But when I open the project, all the package became normal folder, I click into the folder to the Build Path but there&#39;s nothing I can&#39;t do. I don&#39;t understand why, please help me!","title":"Why I can&#39;t build path for a project that was cloned from Github in Eclipse?","body":"<p>I cloned a project of my teams from Github using a link to my Folder Java. I only used the Clone tools in Eclipse and added it to my Package Explorer as a General Project. But when I open the project, all the package became normal folder, I click into the folder to the Build Path but there's nothing I can't do. I don't understand why, please help me!</p>\n"},{"tags":["java","xpath","expression"],"comments":[{"owner":{"account_id":74704,"reputation":11534,"user_id":214525,"accept_rate":100,"display_name":"f1sh"},"score":0,"creation_date":1674745974,"post_id":75247990,"comment_id":132783070,"body_markdown":"`//SomeNode[boolean(Text_2/@*)]/Text` is a vague attempt, i am not 100% sure that `boolean(Text_2/@*)` reliably checks for the existence of attributes.","body":"<code>&#47;&#47;SomeNode[boolean(Text_2&#47;@*)]&#47;Text</code> is a vague attempt, i am not 100% sure that <code>boolean(Text_2&#47;@*)</code> reliably checks for the existence of attributes."}],"answers":[{"tags":[],"owner":{"account_id":91947,"reputation":161814,"user_id":252228,"accept_rate":80,"display_name":"Martin Honnen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674746109,"creation_date":1674746109,"answer_id":75248079,"question_id":75247990,"body_markdown":"Your text says &quot;want to get, using xpath expression, text from Text node only if Text_2 contains elements&quot;, with your given sample that would be `//SomeNode[Text_2/*]/Text`. For some reasons I don&#39;t understand, however, in your sample the `Text_2` element doesn&#39;t have any child elements.","title":"XPath expression with where statement","body":"<p>Your text says &quot;want to get, using xpath expression, text from Text node only if Text_2 contains elements&quot;, with your given sample that would be <code>//SomeNode[Text_2/*]/Text</code>. For some reasons I don't understand, however, in your sample the <code>Text_2</code> element doesn't have any child elements.</p>\n"}],"owner":{"account_id":19882007,"reputation":17,"user_id":14565822,"display_name":"blindDriver"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"answer_count":1,"score":-3,"last_activity_date":1674746109,"creation_date":1674745725,"question_id":75247990,"body_markdown":"I have xml and I want to get, using xpath expression, text from Text node only if Text_2 contains elements. Is there any possibility? I couldn&#39;t find out any. \r\n\r\n```\r\n&lt;List&gt;\r\n   &lt;Response&gt;\r\n\t&lt;Node&gt;\r\n\t   &lt;SomeNode&gt;\r\n\t\t&lt;Text&gt;text&lt;/Text&gt;\r\n\t\t&lt;Text_1&gt;text_1&lt;/Text_1&gt;\r\n\t\t&lt;Text_2 value_1=&quot;some value 1&quot; value_2=&quot;some value 2&quot; /&gt;\r\n\t   &lt;/SomeNode&gt;\r\n\t&lt;/Node&gt;\r\n    &lt;/Response&gt;\r\n&lt;/List&gt;\r\n```\r\n\r\nI tried to get Text_2 elements using //*[@value_1] but I stuck and do not have any other idea","title":"XPath expression with where statement","body":"<p>I have xml and I want to get, using xpath expression, text from Text node only if Text_2 contains elements. Is there any possibility? I couldn't find out any.</p>\n<pre><code>&lt;List&gt;\n   &lt;Response&gt;\n    &lt;Node&gt;\n       &lt;SomeNode&gt;\n        &lt;Text&gt;text&lt;/Text&gt;\n        &lt;Text_1&gt;text_1&lt;/Text_1&gt;\n        &lt;Text_2 value_1=&quot;some value 1&quot; value_2=&quot;some value 2&quot; /&gt;\n       &lt;/SomeNode&gt;\n    &lt;/Node&gt;\n    &lt;/Response&gt;\n&lt;/List&gt;\n</code></pre>\n<p>I tried to get Text_2 elements using //*[@value_1] but I stuck and do not have any other idea</p>\n"},{"tags":["java","selenium","cucumber"],"comments":[{"owner":{"account_id":6077817,"reputation":1213,"user_id":4744568,"display_name":"pcalkins"},"score":0,"creation_date":1674748991,"post_id":75248006,"comment_id":132784238,"body_markdown":"debug and check complexityComboBox value.  It may be null.  (If the element doesn&#39;t exist yet, it&#39;ll throw no such element exception and I don&#39;t think it&#39;ll ever intialize.)  The webdriverwait should be added to the findby....","body":"debug and check complexityComboBox value.  It may be null.  (If the element doesn&#39;t exist yet, it&#39;ll throw no such element exception and I don&#39;t think it&#39;ll ever intialize.)  The webdriverwait should be added to the findby...."},{"owner":{"account_id":27528457,"reputation":39,"user_id":21007380,"display_name":"Pratik"},"score":0,"creation_date":1674836925,"post_id":75248006,"comment_id":132805044,"body_markdown":"I tried debugging and found the same. The complexity combo box element value is shown as the exception value","body":"I tried debugging and found the same. The complexity combo box element value is shown as the exception value"},{"owner":{"account_id":6077817,"reputation":1213,"user_id":4744568,"display_name":"pcalkins"},"score":0,"creation_date":1674842956,"post_id":75248006,"comment_id":132806958,"body_markdown":"I&#39;d add the webdriverwait to the findby annotations/methods... you should try/catch there so you can deal with any timeout exceptions thrown.","body":"I&#39;d add the webdriverwait to the findby annotations/methods... you should try/catch there so you can deal with any timeout exceptions thrown."}],"owner":{"account_id":27528457,"reputation":39,"user_id":21007380,"display_name":"Pratik"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":372,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1674745863,"creation_date":1674745813,"question_id":75248006,"body_markdown":"I am writing a UI automation code wherein I am trying to wait for an element to load i.e. visibility of an element but getting a null pointer exception. When I tried to debug, I found that the element value being passed is &quot;com.sun.jdi.InvocationException: Exception occurred in target VM occurred invoking method&quot; hence I am getting null pointer.\r\n\r\nI am not aware what this error is and I am stuck. \r\n\r\nBelow is my code.\r\n\r\n`\r\n\r\n    public static void waitForElementToLoad(WebDriver driver, WebElement element, int waitTimeInSeconds) {\r\n            WebDriverWait wait = new WebDriverWait(driver,waitTimeInSeconds);\r\n            wait.until(ExpectedConditions.visibilityOf(element));\r\n        }\r\n\r\n`\r\n\r\nThe argument element says Invocation exception. The method where I am calling this method is\r\n`\r\n\r\n    public void waitForShareHolderInputScreenToLoad() {\r\n    \t\tWaitActions.waitForElementToLoad(driver, complexityComboBox, Utils.EXPLICIT_WAIT_VALUE_LONG);\r\n    \t}\r\n\r\n`\r\n\r\nThe locator complexityComboBox is as follows.\r\n`\r\n\r\n    @FindBy(xpath = &quot;//div[@role=&#39;combobox&#39;]/span&quot;)\r\n    \tprivate static WebElement complexityComboBox;\r\n\r\n`\r\n\r\nNot getting what exactly is the issue here.","title":"Getting com.sun.jdi.InvocationException: Exception occurred in target VM occurred invoking method Selenium","body":"<p>I am writing a UI automation code wherein I am trying to wait for an element to load i.e. visibility of an element but getting a null pointer exception. When I tried to debug, I found that the element value being passed is &quot;com.sun.jdi.InvocationException: Exception occurred in target VM occurred invoking method&quot; hence I am getting null pointer.</p>\n<p>I am not aware what this error is and I am stuck.</p>\n<p>Below is my code.</p>\n<p>`</p>\n<pre><code>public static void waitForElementToLoad(WebDriver driver, WebElement element, int waitTimeInSeconds) {\n        WebDriverWait wait = new WebDriverWait(driver,waitTimeInSeconds);\n        wait.until(ExpectedConditions.visibilityOf(element));\n    }\n</code></pre>\n<p>`</p>\n<p>The argument element says Invocation exception. The method where I am calling this method is\n`</p>\n<pre><code>public void waitForShareHolderInputScreenToLoad() {\n        WaitActions.waitForElementToLoad(driver, complexityComboBox, Utils.EXPLICIT_WAIT_VALUE_LONG);\n    }\n</code></pre>\n<p>`</p>\n<p>The locator complexityComboBox is as follows.\n`</p>\n<pre><code>@FindBy(xpath = &quot;//div[@role='combobox']/span&quot;)\n    private static WebElement complexityComboBox;\n</code></pre>\n<p>`</p>\n<p>Not getting what exactly is the issue here.</p>\n"},{"tags":["java","google-cloud-platform","recaptcha","invisible-recaptcha"],"owner":{"account_id":20545235,"reputation":19,"user_id":15079261,"display_name":"SUCHITRA GIRI"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":99,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1674745761,"creation_date":1674734307,"question_id":75245807,"body_markdown":"```java\r\npublic static float getRecaptchaScore(\r\n    String projectName, String recaptchaSiteKey, String token, String action) {\r\n  log.info(&quot;inside getRecaptchaScore&quot;);\r\n  float recaptchaScore = 0;\r\n  String assessmentName = action + &quot;_assessment&quot;;\r\n  String projectPath = &quot;projects/&quot; + projectName;\r\n  log.info(&quot;inside getRecaptchaScore&quot;);\r\n  try (RecaptchaEnterpriseServiceClient client = RecaptchaEnterpriseServiceClient.create()) {\r\n    log.info(&quot;inside RecaptchaEnterpriseServiceClient&quot;);\r\n    Event event =\r\n        Event.newBuilder().setToken(token).setSiteKey(recaptchaSiteKey).setExpectedAction(action)\r\n            .build();\r\n    log.info(&quot;event: &quot; + event);\r\n    Assessment assessment =\r\n        Assessment.newBuilder().setEvent(event).setName(assessmentName).build();\r\n    log.info(&quot;assessment: &quot; + assessment);\r\n    CreateAssessmentRequest createAssessmentRequest =\r\n        CreateAssessmentRequest.newBuilder()\r\n            .setParent(projectPath)\r\n            .setAssessment(assessment)\r\n            .build();\r\n    log.info(&quot;createAssessmentRequest: &quot; + createAssessmentRequest);\r\n    Assessment assessmentResponse = client.createAssessment(createAssessmentRequest);\r\n    log.info(&quot;assessmentResponse: &quot; + assessmentResponse);\r\n    if (assessmentResponse.getTokenProperties().getValid()\r\n        &amp;&amp; assessmentResponse.getEvent().getExpectedAction().equalsIgnoreCase(action)) {\r\n      recaptchaScore = assessmentResponse.getRiskAnalysis().getScore();\r\n\r\n      log.info(&quot;The reCAPTCHA score is: &quot; + recaptchaScore);\r\n      log.info(&quot;Assessment Response :: &quot; + assessmentResponse);\r\n    }\r\n  } catch (Exception e) {\r\n    log.log(Level.SEVERE, &quot;Exception while recaptcha process getRecaptchaScore:: &quot;,\r\n        e.getMessage());\r\n  }\r\n  return recaptchaScore;\r\n}\r\n```\r\n\r\nThe above code snippet in `RecaptchaEnterpriseServiceClient.create()` is getting unexpected error, so unable to get score from google recaptcha enterprise.\r\nHere is the error can someone help me out that where might be the issue.\r\n\r\nI am using java8, Gradle for build tool, spring project.\r\n\r\n```none\r\ncom.google.auth.oauth2.ComputeEngineCredentials runningOnComputeEngine: Failed to detect whether we are running on Google Compute Engine.\r\njava.io.IOException: \r\n\tat com.google.appengine.api.urlfetch.URLFetchServiceImpl.convertApplicationException(URLFetchServiceImpl.java:209)\r\n\tat com.google.appengine.api.urlfetch.URLFetchServiceImpl.fetch(URLFetchServiceImpl.java:59)\r\n\tat com.google.apphosting.utils.security.urlfetch.URLFetchServiceStreamHandler$Connection.fetchResponse(URLFetchServiceStreamHandler.java:608)\r\n\tat com.google.apphosting.utils.security.urlfetch.URLFetchServiceStreamHandler$Connection.getInputStream(URLFetchServiceStreamHandler.java:487)\r\n\tat com.google.apphosting.utils.security.urlfetch.URLFetchServiceStreamHandler$Connection.getResponseCode(URLFetchServiceStreamHandler.java:340)\r\n\tat com.google.api.client.http.javanet.NetHttpResponse.&lt;init&gt;(NetHttpResponse.java:37)\r\n\tat com.google.api.client.http.javanet.NetHttpRequest.execute(NetHttpRequest.java:105)\r\n\tat com.google.api.client.http.HttpRequest.execute(HttpRequest.java:981)\r\n\tat com.google.auth.oauth2.ComputeEngineCredentials.runningOnComputeEngine(ComputeEngineCredentials.java:191)\r\n\tat com.google.auth.oauth2.DefaultCredentialsProvider.tryGetComputeCredentials(DefaultCredentialsProvider.java:270)\r\n\tat com.google.auth.oauth2.DefaultCredentialsProvider.getDefaultCredentialsUnsynchronized(DefaultCredentialsProvider.java:194)\r\n\tat com.google.auth.oauth2.DefaultCredentialsProvider.getDefaultCredentials(DefaultCredentialsProvider.java:112)\r\n\tat com.google.auth.oauth2.GoogleCredentials.getApplicationDefault(GoogleCredentials.java:127)\r\n\tat com.google.auth.oauth2.GoogleCredentials.getApplicationDefault(GoogleCredentials.java:100)\r\n\tat com.google.api.gax.core.GoogleCredentialsProvider.getCredentials(GoogleCredentialsProvider.java:59)\r\n\tat com.google.api.gax.rpc.ClientContext.create(ClientContext.java:134)\r\n\tat com.google.cloud.recaptchaenterprise.v1.stub.GrpcRecaptchaEnterpriseServiceStub.create(GrpcRecaptchaEnterpriseServiceStub.java:137)\r\n\tat com.google.cloud.recaptchaenterprise.v1.stub.RecaptchaEnterpriseServiceStubSettings.createStub(RecaptchaEnterpriseServiceStubSettings.java:155)\r\n\tat com.google.cloud.recaptchaenterprise.v1.RecaptchaEnterpriseServiceClient.&lt;init&gt;(RecaptchaEnterpriseServiceClient.java:156)\r\n\tat com.google.cloud.recaptchaenterprise.v1.RecaptchaEnterpriseServiceClient.create(RecaptchaEnterpriseServiceClient.java:136)\r\n\tat com.google.cloud.recaptchaenterprise.v1.RecaptchaEnterpriseServiceClient.create(RecaptchaEnterpriseServiceClient.java:126)\r\n\tat website.register.v2.RegistrationHelper.getRecaptchaScore(RegistrationHelper.java:151)\r\n\tat website.register.v2.RegistrationService.processRecaptcha(RegistrationService.java:167)\r\n\tat website.register.v2.RegistrationController.leadRegisteration(RegistrationController.java:43)\r\n\tat website.register.v2.RegistrationController$$FastClassBySpringCGLIB$$6617efaf.invoke(&lt;generated&gt;)\r\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:746)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:88)\r\n\tat signup.fullmetrics.FullMetricsAspect.newRegistrationFullMetricsAspect(FullMetricsAspect.java:34)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:644)\r\n\tat org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:633)\r\n\tat org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:175)\r\n\tat org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:93)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\r\n\tat website.register.v2.RegistrationController$$EnhancerBySpringCGLIB$$ea08a53c.leadRegisteration(&lt;generated&gt;)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:137)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:800)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1038)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:942)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:998)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:901)\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:707)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:875)\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:790)\r\n\tat org.eclipse.jetty.servlet.ServletHolder$NotAsync.service(ServletHolder.java:1459)\r\n\tat org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:799)\r\n\tat org.eclipse.jetty.servlet.ServletHandler$ChainEnd.doFilter(ServletHandler.java:1656)\r\n\tat com.google.apphosting.utils.servlet.JdbcMySqlConnectionCleanupFilter.doFilter(JdbcMySqlConnectionCleanupFilter.java:78)\r\n\tat org.eclipse.jetty.servlet.FilterHolder.doFilter(FilterHolder.java:193)\r\n\tat org.eclipse.jetty.servlet.ServletHandler$Chain.doFilter(ServletHandler.java:1626)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:320)\r\n\tat website.register.Filters.RateLimitValidatorFilter.doFilter(RateLimitValidatorFilter.java:71)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)\r\n\tat website.register.Filters.RequestOriginValidatorFilter.doFilter(RequestOriginValidatorFilter.java:45)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)\r\n\tat org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:215)\r\n\tat org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178)\r\n\tat org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:357)\r\n\tat org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:270)\r\n\tat org.eclipse.jetty.servlet.FilterHolder.doFilter(FilterHolder.java:193)\r\n\tat org.eclipse.jetty.servlet.ServletHandler$Chain.doFilter(ServletHandler.java:1626)\r\n\tat org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:552)\r\n\tat org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:143)\r\n\tat org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:571)\r\n\tat org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:127)\r\n\tat org.eclipse.jetty.server.handler.ScopedHandler.nextHandle(ScopedHandler.java:235)\r\n\tat org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:1624)\r\n\tat org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:143)\r\n\tat org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:127)\r\n\tat com.google.apphosting.runtime.jetty9.ParseBlobUploadHandler.handle(ParseBlobUploadHandler.java:124)\r\n\tat org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:127)\r\n\tat org.eclipse.jetty.server.handler.ScopedHandler.nextHandle(ScopedHandler.java:235)\r\n\tat org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1440)\r\n\tat com.google.apphosting.runtime.jetty94.AppEngineWebAppContext.doHandle(AppEngineWebAppContext.java:289)\r\n\tat org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:188)\r\n\tat org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:505)\r\n\tat org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:1594)\r\n\tat org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:186)\r\n\tat org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1355)\r\n\tat org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:141)\r\n\tat com.google.apphosting.runtime.jetty94.AppVersionHandlerMap.handle(AppVersionHandlerMap.java:113)\r\n\tat org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:127)\r\n\tat org.eclipse.jetty.server.Server.handle(Server.java:516)\r\n\tat org.eclipse.jetty.server.HttpChannel.lambda$handle$1(HttpChannel.java:487)\r\n\tat org.eclipse.jetty.server.HttpChannel.dispatch(HttpChannel.java:732)\r\n\tat org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:479)\r\n\tat com.google.apphosting.runtime.jetty94.RpcConnection.handle(RpcConnection.java:270)\r\n\tat com.google.apphosting.runtime.jetty94.RpcConnector.serviceRequest(RpcConnector.java:99)\r\n\tat com.google.apphosting.runtime.jetty94.JettyServletEngineAdapter.serviceRequest(JettyServletEngineAdapter.java:184)\r\n\tat com.google.apphosting.runtime.RequestRunner.dispatchServletRequest(RequestRunner.java:264)\r\n\tat com.google.apphosting.runtime.RequestRunner.dispatchRequest(RequestRunner.java:229)\r\n\tat com.google.apphosting.runtime.RequestRunner.run(RequestRunner.java:194)\r\n\tat com.google.apphosting.runtime.ThreadGroupPool$PoolEntry.run(ThreadGroupPool.java:273)\r\n\tat java.lang.Thread.run(Thread.java:748)\r\n```    \r\n\r\nThank you in advance","title":"Getting error while using recaptcha enterprise to get score","body":"<pre class=\"lang-java prettyprint-override\"><code>public static float getRecaptchaScore(\n    String projectName, String recaptchaSiteKey, String token, String action) {\n  log.info(&quot;inside getRecaptchaScore&quot;);\n  float recaptchaScore = 0;\n  String assessmentName = action + &quot;_assessment&quot;;\n  String projectPath = &quot;projects/&quot; + projectName;\n  log.info(&quot;inside getRecaptchaScore&quot;);\n  try (RecaptchaEnterpriseServiceClient client = RecaptchaEnterpriseServiceClient.create()) {\n    log.info(&quot;inside RecaptchaEnterpriseServiceClient&quot;);\n    Event event =\n        Event.newBuilder().setToken(token).setSiteKey(recaptchaSiteKey).setExpectedAction(action)\n            .build();\n    log.info(&quot;event: &quot; + event);\n    Assessment assessment =\n        Assessment.newBuilder().setEvent(event).setName(assessmentName).build();\n    log.info(&quot;assessment: &quot; + assessment);\n    CreateAssessmentRequest createAssessmentRequest =\n        CreateAssessmentRequest.newBuilder()\n            .setParent(projectPath)\n            .setAssessment(assessment)\n            .build();\n    log.info(&quot;createAssessmentRequest: &quot; + createAssessmentRequest);\n    Assessment assessmentResponse = client.createAssessment(createAssessmentRequest);\n    log.info(&quot;assessmentResponse: &quot; + assessmentResponse);\n    if (assessmentResponse.getTokenProperties().getValid()\n        &amp;&amp; assessmentResponse.getEvent().getExpectedAction().equalsIgnoreCase(action)) {\n      recaptchaScore = assessmentResponse.getRiskAnalysis().getScore();\n\n      log.info(&quot;The reCAPTCHA score is: &quot; + recaptchaScore);\n      log.info(&quot;Assessment Response :: &quot; + assessmentResponse);\n    }\n  } catch (Exception e) {\n    log.log(Level.SEVERE, &quot;Exception while recaptcha process getRecaptchaScore:: &quot;,\n        e.getMessage());\n  }\n  return recaptchaScore;\n}\n</code></pre>\n<p>The above code snippet in <code>RecaptchaEnterpriseServiceClient.create()</code> is getting unexpected error, so unable to get score from google recaptcha enterprise.\nHere is the error can someone help me out that where might be the issue.</p>\n<p>I am using java8, Gradle for build tool, spring project.</p>\n<pre class=\"lang-none prettyprint-override\"><code>com.google.auth.oauth2.ComputeEngineCredentials runningOnComputeEngine: Failed to detect whether we are running on Google Compute Engine.\njava.io.IOException: \n    at com.google.appengine.api.urlfetch.URLFetchServiceImpl.convertApplicationException(URLFetchServiceImpl.java:209)\n    at com.google.appengine.api.urlfetch.URLFetchServiceImpl.fetch(URLFetchServiceImpl.java:59)\n    at com.google.apphosting.utils.security.urlfetch.URLFetchServiceStreamHandler$Connection.fetchResponse(URLFetchServiceStreamHandler.java:608)\n    at com.google.apphosting.utils.security.urlfetch.URLFetchServiceStreamHandler$Connection.getInputStream(URLFetchServiceStreamHandler.java:487)\n    at com.google.apphosting.utils.security.urlfetch.URLFetchServiceStreamHandler$Connection.getResponseCode(URLFetchServiceStreamHandler.java:340)\n    at com.google.api.client.http.javanet.NetHttpResponse.&lt;init&gt;(NetHttpResponse.java:37)\n    at com.google.api.client.http.javanet.NetHttpRequest.execute(NetHttpRequest.java:105)\n    at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:981)\n    at com.google.auth.oauth2.ComputeEngineCredentials.runningOnComputeEngine(ComputeEngineCredentials.java:191)\n    at com.google.auth.oauth2.DefaultCredentialsProvider.tryGetComputeCredentials(DefaultCredentialsProvider.java:270)\n    at com.google.auth.oauth2.DefaultCredentialsProvider.getDefaultCredentialsUnsynchronized(DefaultCredentialsProvider.java:194)\n    at com.google.auth.oauth2.DefaultCredentialsProvider.getDefaultCredentials(DefaultCredentialsProvider.java:112)\n    at com.google.auth.oauth2.GoogleCredentials.getApplicationDefault(GoogleCredentials.java:127)\n    at com.google.auth.oauth2.GoogleCredentials.getApplicationDefault(GoogleCredentials.java:100)\n    at com.google.api.gax.core.GoogleCredentialsProvider.getCredentials(GoogleCredentialsProvider.java:59)\n    at com.google.api.gax.rpc.ClientContext.create(ClientContext.java:134)\n    at com.google.cloud.recaptchaenterprise.v1.stub.GrpcRecaptchaEnterpriseServiceStub.create(GrpcRecaptchaEnterpriseServiceStub.java:137)\n    at com.google.cloud.recaptchaenterprise.v1.stub.RecaptchaEnterpriseServiceStubSettings.createStub(RecaptchaEnterpriseServiceStubSettings.java:155)\n    at com.google.cloud.recaptchaenterprise.v1.RecaptchaEnterpriseServiceClient.&lt;init&gt;(RecaptchaEnterpriseServiceClient.java:156)\n    at com.google.cloud.recaptchaenterprise.v1.RecaptchaEnterpriseServiceClient.create(RecaptchaEnterpriseServiceClient.java:136)\n    at com.google.cloud.recaptchaenterprise.v1.RecaptchaEnterpriseServiceClient.create(RecaptchaEnterpriseServiceClient.java:126)\n    at website.register.v2.RegistrationHelper.getRecaptchaScore(RegistrationHelper.java:151)\n    at website.register.v2.RegistrationService.processRecaptcha(RegistrationService.java:167)\n    at website.register.v2.RegistrationController.leadRegisteration(RegistrationController.java:43)\n    at website.register.v2.RegistrationController$$FastClassBySpringCGLIB$$6617efaf.invoke(&lt;generated&gt;)\n    at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:746)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n    at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:88)\n    at signup.fullmetrics.FullMetricsAspect.newRegistrationFullMetricsAspect(FullMetricsAspect.java:34)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:644)\n    at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:633)\n    at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:175)\n    at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:93)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n    at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n    at website.register.v2.RegistrationController$$EnhancerBySpringCGLIB$$ea08a53c.leadRegisteration(&lt;generated&gt;)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)\n    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:137)\n    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102)\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:800)\n    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\n    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1038)\n    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:942)\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:998)\n    at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:901)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:707)\n    at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:875)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:790)\n    at org.eclipse.jetty.servlet.ServletHolder$NotAsync.service(ServletHolder.java:1459)\n    at org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:799)\n    at org.eclipse.jetty.servlet.ServletHandler$ChainEnd.doFilter(ServletHandler.java:1656)\n    at com.google.apphosting.utils.servlet.JdbcMySqlConnectionCleanupFilter.doFilter(JdbcMySqlConnectionCleanupFilter.java:78)\n    at org.eclipse.jetty.servlet.FilterHolder.doFilter(FilterHolder.java:193)\n    at org.eclipse.jetty.servlet.ServletHandler$Chain.doFilter(ServletHandler.java:1626)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:320)\n    at website.register.Filters.RateLimitValidatorFilter.doFilter(RateLimitValidatorFilter.java:71)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)\n    at website.register.Filters.RequestOriginValidatorFilter.doFilter(RequestOriginValidatorFilter.java:45)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)\n    at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:215)\n    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178)\n    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:357)\n    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:270)\n    at org.eclipse.jetty.servlet.FilterHolder.doFilter(FilterHolder.java:193)\n    at org.eclipse.jetty.servlet.ServletHandler$Chain.doFilter(ServletHandler.java:1626)\n    at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:552)\n    at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:143)\n    at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:571)\n    at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:127)\n    at org.eclipse.jetty.server.handler.ScopedHandler.nextHandle(ScopedHandler.java:235)\n    at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:1624)\n    at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:143)\n    at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:127)\n    at com.google.apphosting.runtime.jetty9.ParseBlobUploadHandler.handle(ParseBlobUploadHandler.java:124)\n    at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:127)\n    at org.eclipse.jetty.server.handler.ScopedHandler.nextHandle(ScopedHandler.java:235)\n    at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1440)\n    at com.google.apphosting.runtime.jetty94.AppEngineWebAppContext.doHandle(AppEngineWebAppContext.java:289)\n    at org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:188)\n    at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:505)\n    at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:1594)\n    at org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:186)\n    at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1355)\n    at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:141)\n    at com.google.apphosting.runtime.jetty94.AppVersionHandlerMap.handle(AppVersionHandlerMap.java:113)\n    at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:127)\n    at org.eclipse.jetty.server.Server.handle(Server.java:516)\n    at org.eclipse.jetty.server.HttpChannel.lambda$handle$1(HttpChannel.java:487)\n    at org.eclipse.jetty.server.HttpChannel.dispatch(HttpChannel.java:732)\n    at org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:479)\n    at com.google.apphosting.runtime.jetty94.RpcConnection.handle(RpcConnection.java:270)\n    at com.google.apphosting.runtime.jetty94.RpcConnector.serviceRequest(RpcConnector.java:99)\n    at com.google.apphosting.runtime.jetty94.JettyServletEngineAdapter.serviceRequest(JettyServletEngineAdapter.java:184)\n    at com.google.apphosting.runtime.RequestRunner.dispatchServletRequest(RequestRunner.java:264)\n    at com.google.apphosting.runtime.RequestRunner.dispatchRequest(RequestRunner.java:229)\n    at com.google.apphosting.runtime.RequestRunner.run(RequestRunner.java:194)\n    at com.google.apphosting.runtime.ThreadGroupPool$PoolEntry.run(ThreadGroupPool.java:273)\n    at java.lang.Thread.run(Thread.java:748)\n</code></pre>\n<p>Thank you in advance</p>\n"},{"tags":["java","spring-boot","hibernate"],"comments":[{"owner":{"account_id":11260582,"reputation":102,"user_id":8259045,"display_name":"T4puSD"},"score":0,"creation_date":1674751687,"post_id":75247947,"comment_id":132785202,"body_markdown":"What are you actually trying to do? Are you trying to remove the `cardid` property from the response or want help fixing the exception?","body":"What are you actually trying to do? Are you trying to remove the <code>cardid</code> property from the response or want help fixing the exception?"},{"owner":{"account_id":27316723,"reputation":42,"user_id":20837394,"display_name":"Yevgeniy"},"score":0,"creation_date":1674757332,"post_id":75247947,"comment_id":132786969,"body_markdown":"@T4puSD I am trying to remove the cardid from the response","body":"@T4puSD I am trying to remove the cardid from the response"}],"owner":{"account_id":27316723,"reputation":42,"user_id":20837394,"display_name":"Yevgeniy"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":65,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1674745507,"creation_date":1674745507,"question_id":75247947,"body_markdown":"Such a problem. I have a DTO in which the fields of the tables **boat_cards** and **engines** are combined. Now I want to get data from table **engines** excluding the **cardid** field. The option with the **@JsonIgnore** annotation is not suitable, since this field may need to be displayed when querying the **engines** table itself Here is my code:\r\n\r\nDAO class:\r\n\r\n    @Repository\r\n    public interface EnginesDao extends JpaRepository&lt;Engines, Integer&gt; {\r\n    \r\n        List&lt;Engines&gt; findAllByCardidCardid(Integer cardid);\r\n    \r\n        @Query(value = &quot;SELECT engid, engname, engvin, engpwr, recdate FROM gims.engines  where cardid = :cardid&quot;,\r\n                nativeQuery = true)\r\n        List&lt;Engines&gt; findAllByCardidQuery(@Param(&quot;cardid&quot;) Integer cardid);\r\n    \r\n    }\r\n\r\nService class:\r\n\r\n    @Service\r\n    public class EnginesServiceImpl implements EnginesService{\r\n    \r\n        @Autowired\r\n        private EnginesDao enginesDao;\r\n    \r\n        @Override\r\n        public List&lt;Engines&gt; getAllByCardidQuery(Integer id) {\r\n            return enginesDao.findAllByCardidQuery(id);\r\n        }\r\n    }\r\n\r\nDTO class:\r\n\r\n    @JsonIgnoreProperties(ignoreUnknown = true)\r\n    public class BoatCardsDto extends BoatCards implements Serializable {\r\n    \r\n        private List&lt;Engines&gt; engines;\r\n    \r\n    \r\n        public BoatCardsDto(BoatCards boatCards, List&lt;Engines&gt; engines) {\r\n            this.cardid = boatCards.getCardid();\r\n            this.regNum = boatCards.getRegNum();\r\n            this.tiketNum = boatCards.getTiketNum();\r\n            this.boatName = boatCards.getBoatName();\r\n            this.boatType = boatCards.getBoatType();\r\n            this.boatYear = boatCards.getBoatYear();\r\n            this.boatVin = boatCards.getBoatVin();\r\n            this.parkingPlace = boatCards.getParkingPlace();\r\n            this.saCategory = boatCards.getSaCategory();\r\n            this.boatLength = boatCards.getBoatLength();\r\n            this.boatWidth = boatCards.getBoatWidth();\r\n            this.boatHeight = boatCards.getBoatHeight();\r\n            this.bodyMaterial = boatCards.getBodyMaterial();\r\n            this.boatPayload = boatCards.getBoatPayload();\r\n            this.passengersNum = boatCards.getPassengersNum();\r\n            this.serviceLife = boatCards.getServiceLife();\r\n            this.engineNum = boatCards.getEngineNum();\r\n            this.owner = boatCards.getOwner();\r\n            this.agent = boatCards.getAgent();\r\n            this.note = boatCards.getNote();\r\n            this.engines = engines;\r\n        }\r\n    \r\n        public List&lt;Engines&gt; getEngines() {\r\n            return engines;\r\n        }\r\n    \r\n        public void setEngines(List&lt;Engines&gt; engines) {\r\n            this.engines = engines;\r\n        }\r\n    }\r\n\r\nand my exception is:\r\n\r\n    2023-01-26T18:02:10.206+03:00 ERROR 19892 --- [nio-8080-exec-1] o.a.c.c.C.[.[.[/].[dispatcherServlet]:\r\n    Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception\r\n    [Request processing failed: org.springframework.dao.InvalidDataAccessResourceUsageException:\r\n    Unable to find column position by name: cardid; SQL [n/a]] with root cause\r\n\r\nMy engine entity:\r\n\r\n    @Entity\r\n    @Table(name = &quot;engines&quot;)\r\n    @Data\r\n    @NoArgsConstructor\r\n    @FieldDefaults(level = AccessLevel.PRIVATE)\r\n    public class Engines {\r\n    \r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n        @Column(name = &quot;engid&quot;)\r\n        Integer engid;\r\n    \r\n        @ManyToOne(fetch = FetchType.LAZY)\r\n        @JoinColumn(name = &quot;cardid&quot;)\r\n        BoatCards cardid;\r\n    \r\n        @Column(name = &quot;engname&quot;)\r\n        String engname;\r\n    \r\n        @Column(name = &quot;engvin&quot;)\r\n        String engvin;\r\n    \r\n        @Column(name = &quot;engpwr&quot;)\r\n        String engpwr;\r\n    \r\n        @Column(name = &quot;recdate&quot;)\r\n        @JsonFormat(pattern = &quot;yyyy-MM-dd HH:mm:ss.SSS&quot;)\r\n        Timestamp recdate;\r\n    \r\n    }\r\n\r\n","title":"How not to display a field from a table?","body":"<p>Such a problem. I have a DTO in which the fields of the tables <strong>boat_cards</strong> and <strong>engines</strong> are combined. Now I want to get data from table <strong>engines</strong> excluding the <strong>cardid</strong> field. The option with the <strong>@JsonIgnore</strong> annotation is not suitable, since this field may need to be displayed when querying the <strong>engines</strong> table itself Here is my code:</p>\n<p>DAO class:</p>\n<pre><code>@Repository\npublic interface EnginesDao extends JpaRepository&lt;Engines, Integer&gt; {\n\n    List&lt;Engines&gt; findAllByCardidCardid(Integer cardid);\n\n    @Query(value = &quot;SELECT engid, engname, engvin, engpwr, recdate FROM gims.engines  where cardid = :cardid&quot;,\n            nativeQuery = true)\n    List&lt;Engines&gt; findAllByCardidQuery(@Param(&quot;cardid&quot;) Integer cardid);\n\n}\n</code></pre>\n<p>Service class:</p>\n<pre><code>@Service\npublic class EnginesServiceImpl implements EnginesService{\n\n    @Autowired\n    private EnginesDao enginesDao;\n\n    @Override\n    public List&lt;Engines&gt; getAllByCardidQuery(Integer id) {\n        return enginesDao.findAllByCardidQuery(id);\n    }\n}\n</code></pre>\n<p>DTO class:</p>\n<pre><code>@JsonIgnoreProperties(ignoreUnknown = true)\npublic class BoatCardsDto extends BoatCards implements Serializable {\n\n    private List&lt;Engines&gt; engines;\n\n\n    public BoatCardsDto(BoatCards boatCards, List&lt;Engines&gt; engines) {\n        this.cardid = boatCards.getCardid();\n        this.regNum = boatCards.getRegNum();\n        this.tiketNum = boatCards.getTiketNum();\n        this.boatName = boatCards.getBoatName();\n        this.boatType = boatCards.getBoatType();\n        this.boatYear = boatCards.getBoatYear();\n        this.boatVin = boatCards.getBoatVin();\n        this.parkingPlace = boatCards.getParkingPlace();\n        this.saCategory = boatCards.getSaCategory();\n        this.boatLength = boatCards.getBoatLength();\n        this.boatWidth = boatCards.getBoatWidth();\n        this.boatHeight = boatCards.getBoatHeight();\n        this.bodyMaterial = boatCards.getBodyMaterial();\n        this.boatPayload = boatCards.getBoatPayload();\n        this.passengersNum = boatCards.getPassengersNum();\n        this.serviceLife = boatCards.getServiceLife();\n        this.engineNum = boatCards.getEngineNum();\n        this.owner = boatCards.getOwner();\n        this.agent = boatCards.getAgent();\n        this.note = boatCards.getNote();\n        this.engines = engines;\n    }\n\n    public List&lt;Engines&gt; getEngines() {\n        return engines;\n    }\n\n    public void setEngines(List&lt;Engines&gt; engines) {\n        this.engines = engines;\n    }\n}\n</code></pre>\n<p>and my exception is:</p>\n<pre><code>2023-01-26T18:02:10.206+03:00 ERROR 19892 --- [nio-8080-exec-1] o.a.c.c.C.[.[.[/].[dispatcherServlet]:\nServlet.service() for servlet [dispatcherServlet] in context with path [] threw exception\n[Request processing failed: org.springframework.dao.InvalidDataAccessResourceUsageException:\nUnable to find column position by name: cardid; SQL [n/a]] with root cause\n</code></pre>\n<p>My engine entity:</p>\n<pre><code>@Entity\n@Table(name = &quot;engines&quot;)\n@Data\n@NoArgsConstructor\n@FieldDefaults(level = AccessLevel.PRIVATE)\npublic class Engines {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @Column(name = &quot;engid&quot;)\n    Integer engid;\n\n    @ManyToOne(fetch = FetchType.LAZY)\n    @JoinColumn(name = &quot;cardid&quot;)\n    BoatCards cardid;\n\n    @Column(name = &quot;engname&quot;)\n    String engname;\n\n    @Column(name = &quot;engvin&quot;)\n    String engvin;\n\n    @Column(name = &quot;engpwr&quot;)\n    String engpwr;\n\n    @Column(name = &quot;recdate&quot;)\n    @JsonFormat(pattern = &quot;yyyy-MM-dd HH:mm:ss.SSS&quot;)\n    Timestamp recdate;\n\n}\n</code></pre>\n"},{"tags":["java","amazon-s3"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1674807174,"post_id":75247711,"comment_id":132795759,"body_markdown":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer.","body":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer."}],"owner":{"account_id":18160037,"reputation":1,"user_id":21087335,"display_name":"A V"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1674744482,"creation_date":1674744482,"question_id":75247711,"body_markdown":"I need to write into a file on amazon s3.\r\n\r\nWhen event A occurs, I need to get the object and write it to the end of the csv file on s3. When event B occurs I need to get the object and write it to the end of the same csv file on s3.\r\n\r\nHow can I do it?\r\n\r\nP.S. Java\r\n\r\nI tried to use outputstream but the one there isn&#39;t in c3 library &quot;sofware.amazone.awssdk.services.s3&quot;","title":"Row-by-row writing into a file on amazon s3","body":"<p>I need to write into a file on amazon s3.</p>\n<p>When event A occurs, I need to get the object and write it to the end of the csv file on s3. When event B occurs I need to get the object and write it to the end of the same csv file on s3.</p>\n<p>How can I do it?</p>\n<p>P.S. Java</p>\n<p>I tried to use outputstream but the one there isn't in c3 library &quot;sofware.amazone.awssdk.services.s3&quot;</p>\n"},{"tags":["java","spring-boot","visual-studio-code"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1674743920,"post_id":75246554,"comment_id":132782313,"body_markdown":"You are using the spring boot maven plugin from Spring Boot 3.0.2 where the rest is Spring BOot 2.3.3.. THe versions don&#39;t match. Ideally you should have a spring boot starter as parent and don&#39;t specify any further versions. You also marked tomcat as provided and thus no servlet container is going to be available. Finally you should use `Main.class` instead of `myController.class` in your main method to launch the app.","body":"You are using the spring boot maven plugin from Spring Boot 3.0.2 where the rest is Spring BOot 2.3.3.. THe versions don&#39;t match. Ideally you should have a spring boot starter as parent and don&#39;t specify any further versions. You also marked tomcat as provided and thus no servlet container is going to be available. Finally you should use <code>Main.class</code> instead of <code>myController.class</code> in your main method to launch the app."}],"answers":[{"tags":[],"owner":{"account_id":26698569,"reputation":875,"user_id":20306007,"display_name":"life888888"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1674744272,"creation_date":1674743637,"answer_id":75247543,"question_id":75246554,"body_markdown":"Change Main.java\r\n\r\nchange `SpringApplication.run(myController.class,args);`\r\n\r\nto\r\n   `SpringApplication.run(Main.class, args);`\r\n\r\n```\r\npublic static void main(String[] args)\r\n    {\r\n        //SpringApplication.run(myController.class,args);\r\n        SpringApplication.run(Main.class, args);\r\n    }\r\n```\r\n\r\n# pom.xml\r\n\r\nyou can remove `spring-boot-starter-tomcat`\r\n\r\n```\r\n&lt;project&gt;\r\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n  &lt;groupId&gt;com.example.myproject&lt;/groupId&gt;\r\n  &lt;artifactId&gt;Java_API&lt;/artifactId&gt;\r\n  &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n  &lt;dependencies&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n      &lt;version&gt;2.3.3.RELEASE&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n      &lt;!--\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\r\n        &lt;version&gt;2.3.3.RELEASE&lt;/version&gt;\r\n        &lt;scope&gt;provided&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n    --&gt;\r\n  &lt;/dependencies&gt;\r\n  &lt;properties&gt;\r\n     &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\r\n     &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\r\n  &lt;/properties&gt;\r\n\r\n  &lt;build&gt;\r\n    &lt;plugins&gt;\r\n      &lt;plugin&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n         &lt;version&gt;3.0.2&lt;/version&gt;\r\n      &lt;/plugin&gt;\r\n    &lt;/plugins&gt;\r\n  &lt;/build&gt;\r\n&lt;/project&gt;\r\n```\r\n\r\npackage and run\r\n\r\n```\r\nmvn clean package spring-boot:run\r\n```\r\n\r\ntest\r\n\r\n```\r\ncurl http://localhost:8080/employee/22\r\n```\r\n\r\n# I can&#39;t get enough information from your question. I change my test code:\r\n\r\n## myController.java\r\n\r\n```\r\npackage com.example.myproject;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.web.bind.annotation.GetMapping;\r\nimport org.springframework.web.bind.annotation.PathVariable;\r\nimport org.springframework.web.bind.annotation.PostMapping;\r\nimport org.springframework.web.bind.annotation.RequestBody;\r\nimport org.springframework.web.bind.annotation.RestController;\r\n\r\n@RestController\r\npublic class myController {\r\n    //@Autowired\r\n    //private EmployeeService employeeService;\r\n\r\n    @GetMapping(&quot;/employee/{id}&quot;)\r\n    public Employee getEmployee(@PathVariable int id) {\r\n        Employee e1=new Employee();\r\n        e1.setId(id);\r\n        e1.setName(&quot;Hello World&quot;);\r\n        return e1;\r\n        //return employeeService.getEmployee(id);\r\n    }\r\n\r\n    @PostMapping(&quot;/employee&quot;)\r\n    public void createEmployee(@RequestBody Employee employee) {\r\n        System.out.println(&quot;DEBUG-&quot;+ employee.getId()+&quot;\\t&quot;+employee.getName());\r\n        //EmployeeService.createEmployee(employee);\r\n    }\r\n}\r\n```\r\n\r\n## Employee.java\r\n\r\n```\r\npackage com.example.myproject;\r\n\r\npublic class Employee {\r\n    private int id;\r\n    private String name;\r\n\r\n    public int getId() {\r\n        return id;\r\n    }\r\n\r\n    public void setId(int id) {\r\n        this.id = id;\r\n    }\r\n\r\n    public String getName() {\r\n        return name;\r\n    }\r\n\r\n    public void setName(String name) {\r\n        this.name = name;\r\n    }\r\n}\r\n```\r\n\r\nI use the following code to test on my machine and it can be executed. At the same time, when you change `SpringApplication.run(Main.class, args);` back to `SpringApplication.run(myController.class, args) ;`, when executed it throws the same error message as in the question, `Unable to start web server; nested exception is org.springframework.context.ApplicationContextException: Unable to start ServletWebServerApplicationContext due to missing ServletWebServerFactory bean.`\r\n\r\n\r\nIf there are other error messages generated, it should be part of your `EmployeeService`. You did not provide enough information.\r\n","title":"Maven Spring Boot App Failing to Start from VS Code","body":"<p>Change Main.java</p>\n<p>change <code>SpringApplication.run(myController.class,args);</code></p>\n<p>to\n<code>SpringApplication.run(Main.class, args);</code></p>\n<pre><code>public static void main(String[] args)\n    {\n        //SpringApplication.run(myController.class,args);\n        SpringApplication.run(Main.class, args);\n    }\n</code></pre>\n<h1>pom.xml</h1>\n<p>you can remove <code>spring-boot-starter-tomcat</code></p>\n<pre><code>&lt;project&gt;\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n  &lt;groupId&gt;com.example.myproject&lt;/groupId&gt;\n  &lt;artifactId&gt;Java_API&lt;/artifactId&gt;\n  &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n  &lt;dependencies&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n      &lt;version&gt;2.3.3.RELEASE&lt;/version&gt;\n    &lt;/dependency&gt;\n      &lt;!--\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\n        &lt;version&gt;2.3.3.RELEASE&lt;/version&gt;\n        &lt;scope&gt;provided&lt;/scope&gt;\n    &lt;/dependency&gt;\n    --&gt;\n  &lt;/dependencies&gt;\n  &lt;properties&gt;\n     &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\n     &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\n  &lt;/properties&gt;\n\n  &lt;build&gt;\n    &lt;plugins&gt;\n      &lt;plugin&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n         &lt;version&gt;3.0.2&lt;/version&gt;\n      &lt;/plugin&gt;\n    &lt;/plugins&gt;\n  &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n<p>package and run</p>\n<pre><code>mvn clean package spring-boot:run\n</code></pre>\n<p>test</p>\n<pre><code>curl http://localhost:8080/employee/22\n</code></pre>\n<h1>I can't get enough information from your question. I change my test code:</h1>\n<h2>myController.java</h2>\n<pre><code>package com.example.myproject;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.PathVariable;\nimport org.springframework.web.bind.annotation.PostMapping;\nimport org.springframework.web.bind.annotation.RequestBody;\nimport org.springframework.web.bind.annotation.RestController;\n\n@RestController\npublic class myController {\n    //@Autowired\n    //private EmployeeService employeeService;\n\n    @GetMapping(&quot;/employee/{id}&quot;)\n    public Employee getEmployee(@PathVariable int id) {\n        Employee e1=new Employee();\n        e1.setId(id);\n        e1.setName(&quot;Hello World&quot;);\n        return e1;\n        //return employeeService.getEmployee(id);\n    }\n\n    @PostMapping(&quot;/employee&quot;)\n    public void createEmployee(@RequestBody Employee employee) {\n        System.out.println(&quot;DEBUG-&quot;+ employee.getId()+&quot;\\t&quot;+employee.getName());\n        //EmployeeService.createEmployee(employee);\n    }\n}\n</code></pre>\n<h2>Employee.java</h2>\n<pre><code>package com.example.myproject;\n\npublic class Employee {\n    private int id;\n    private String name;\n\n    public int getId() {\n        return id;\n    }\n\n    public void setId(int id) {\n        this.id = id;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n}\n</code></pre>\n<p>I use the following code to test on my machine and it can be executed. At the same time, when you change <code>SpringApplication.run(Main.class, args);</code> back to <code>SpringApplication.run(myController.class, args) ;</code>, when executed it throws the same error message as in the question, <code>Unable to start web server; nested exception is org.springframework.context.ApplicationContextException: Unable to start ServletWebServerApplicationContext due to missing ServletWebServerFactory bean.</code></p>\n<p>If there are other error messages generated, it should be part of your <code>EmployeeService</code>. You did not provide enough information.</p>\n"}],"owner":{"account_id":27626862,"reputation":33,"user_id":21086690,"display_name":"user21086690"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":511,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75247543,"answer_count":1,"score":1,"last_activity_date":1674744272,"creation_date":1674738509,"question_id":75246554,"body_markdown":"Attempting to write a Java RESTful API When I run `mvn clean install` I build no problem. When I run `mvn spring-boot run` I get the following runtime error. I have included the `pom.xml` and `classes` that I think are relevant. I also have a service layer and entity class not listed, though I don&#39;t think they are the issue. I can add if maybe someone would like to see them as well. Any help would be greatly appreciated.Thank you in advance.\r\n\r\n\r\n```\r\norg.springframework.context.ApplicationContextException: Unable to start web server; nested exception is org.springframework.context.ApplicationContextException: Unable to start ServletWebServerApplicationContext due to missing ServletWebServerFactory bean.\r\n        at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.onRefresh(ServletWebServerApplicationContext.java:161) ~[spring-boot-2.3.3.RELEASE.jar:2.3.3.RELEASE]\r\n        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:545) ~[spring-context-5.2.8.RELEASE.jar:5.2.8.RELEASE]\r\n        at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:143) ~[spring-boot-2.3.3.RELEASE.jar:2.3.3.RELEASE]\r\n        at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:758) ~[spring-boot-2.3.3.RELEASE.jar:2.3.3.RELEASE]\r\n```\r\n\r\n\r\nbelow is code that I think could potentially be causing the problem:\r\n\r\n`pom.xml` \r\n\r\n\r\n```\r\n&lt;project&gt;\r\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n  &lt;groupId&gt;com.example.myproject&lt;/groupId&gt;\r\n  &lt;artifactId&gt;Java_API&lt;/artifactId&gt;\r\n  &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n  &lt;dependencies&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n      &lt;version&gt;2.3.3.RELEASE&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\r\n        &lt;version&gt;2.3.3.RELEASE&lt;/version&gt;\r\n        &lt;scope&gt;provided&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n  &lt;/dependencies&gt;\r\n  &lt;properties&gt;\r\n     &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\r\n     &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\r\n  &lt;/properties&gt;\r\n\r\n  &lt;build&gt;\r\n    &lt;plugins&gt;\r\n      &lt;plugin&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n         &lt;version&gt;3.0.2&lt;/version&gt;\r\n      &lt;/plugin&gt;\r\n    &lt;/plugins&gt;\r\n  &lt;/build&gt;\r\n&lt;/project&gt;\r\n```\r\n\r\n\r\n`Main.java`\r\n```\r\npackage com.example.myproject;\r\n\r\nimport org.springframework.boot.SpringApplication;\r\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\r\n\r\n@SpringBootApplication\r\npublic class Main {\r\n    \r\n    public static void main(String[] args)\r\n    {\r\n        SpringApplication.run(myController.class,args);\r\n    }\r\n}\r\n```\r\n`myController.java`\r\n\r\n\r\n```\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.web.bind.annotation.GetMapping;\r\nimport org.springframework.web.bind.annotation.PathVariable;\r\nimport org.springframework.web.bind.annotation.PostMapping;\r\nimport org.springframework.web.bind.annotation.RequestBody;\r\nimport org.springframework.web.bind.annotation.RestController;\r\n\r\n@RestController\r\npublic class myController {\r\n\r\n\r\n    @Autowired\r\n    private EmployeeService employeeService;\r\n\r\n    @GetMapping(&quot;/employee/{id}&quot;)\r\n    public Employee getEmployee(@PathVariable int id) {\r\n        return employeeService.getEmployee(id);\r\n    }\r\n\r\n    @PostMapping(&quot;/employee&quot;)\r\n    public void createEmployee(@RequestBody Employee employee) {\r\n        EmployeeService.createEmployee(employee);\r\n    }\r\n}\r\n```\r\n\r\n\r\n- I have tried only having `starter-web` instead of both `starter-web` and `starter-tomcat`, but it yields the same result. The versioning seems right.\r\n- tried adding `&lt;scope&gt;provided&lt;/scope&gt;`, granted I&#39;m not entirely sure what it does. \r\n- A number of other things that may come to me, blanking on everything I have tried. Really stumped on what it does not like.","title":"Maven Spring Boot App Failing to Start from VS Code","body":"<p>Attempting to write a Java RESTful API When I run <code>mvn clean install</code> I build no problem. When I run <code>mvn spring-boot run</code> I get the following runtime error. I have included the <code>pom.xml</code> and <code>classes</code> that I think are relevant. I also have a service layer and entity class not listed, though I don't think they are the issue. I can add if maybe someone would like to see them as well. Any help would be greatly appreciated.Thank you in advance.</p>\n<pre><code>org.springframework.context.ApplicationContextException: Unable to start web server; nested exception is org.springframework.context.ApplicationContextException: Unable to start ServletWebServerApplicationContext due to missing ServletWebServerFactory bean.\n        at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.onRefresh(ServletWebServerApplicationContext.java:161) ~[spring-boot-2.3.3.RELEASE.jar:2.3.3.RELEASE]\n        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:545) ~[spring-context-5.2.8.RELEASE.jar:5.2.8.RELEASE]\n        at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:143) ~[spring-boot-2.3.3.RELEASE.jar:2.3.3.RELEASE]\n        at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:758) ~[spring-boot-2.3.3.RELEASE.jar:2.3.3.RELEASE]\n</code></pre>\n<p>below is code that I think could potentially be causing the problem:</p>\n<p><code>pom.xml</code></p>\n<pre><code>&lt;project&gt;\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n  &lt;groupId&gt;com.example.myproject&lt;/groupId&gt;\n  &lt;artifactId&gt;Java_API&lt;/artifactId&gt;\n  &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n  &lt;dependencies&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n      &lt;version&gt;2.3.3.RELEASE&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\n        &lt;version&gt;2.3.3.RELEASE&lt;/version&gt;\n        &lt;scope&gt;provided&lt;/scope&gt;\n    &lt;/dependency&gt;\n  &lt;/dependencies&gt;\n  &lt;properties&gt;\n     &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\n     &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\n  &lt;/properties&gt;\n\n  &lt;build&gt;\n    &lt;plugins&gt;\n      &lt;plugin&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n         &lt;version&gt;3.0.2&lt;/version&gt;\n      &lt;/plugin&gt;\n    &lt;/plugins&gt;\n  &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n<p><code>Main.java</code></p>\n<pre><code>package com.example.myproject;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\n\n@SpringBootApplication\npublic class Main {\n    \n    public static void main(String[] args)\n    {\n        SpringApplication.run(myController.class,args);\n    }\n}\n</code></pre>\n<p><code>myController.java</code></p>\n<pre><code>import org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.PathVariable;\nimport org.springframework.web.bind.annotation.PostMapping;\nimport org.springframework.web.bind.annotation.RequestBody;\nimport org.springframework.web.bind.annotation.RestController;\n\n@RestController\npublic class myController {\n\n\n    @Autowired\n    private EmployeeService employeeService;\n\n    @GetMapping(&quot;/employee/{id}&quot;)\n    public Employee getEmployee(@PathVariable int id) {\n        return employeeService.getEmployee(id);\n    }\n\n    @PostMapping(&quot;/employee&quot;)\n    public void createEmployee(@RequestBody Employee employee) {\n        EmployeeService.createEmployee(employee);\n    }\n}\n</code></pre>\n<ul>\n<li>I have tried only having <code>starter-web</code> instead of both <code>starter-web</code> and <code>starter-tomcat</code>, but it yields the same result. The versioning seems right.</li>\n<li>tried adding <code>&lt;scope&gt;provided&lt;/scope&gt;</code>, granted I'm not entirely sure what it does.</li>\n<li>A number of other things that may come to me, blanking on everything I have tried. Really stumped on what it does not like.</li>\n</ul>\n"},{"tags":["java","spring","exception","named-query"],"comments":[{"owner":{"account_id":11683,"reputation":1438179,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":3,"creation_date":1674743501,"post_id":75247501,"comment_id":132782148,"body_markdown":"It looks like your `employee_id` is an integer value - what are you hoping that a `LIKE` filter will achieve?","body":"It looks like your <code>employee_id</code> is an integer value - what are you hoping that a <code>LIKE</code> filter will achieve?"},{"owner":{"account_id":39208,"reputation":251240,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":0,"creation_date":1674743618,"post_id":75247501,"comment_id":132782194,"body_markdown":"Where are you calling `searchDaysForMonth`? You are not showing the call of that method. Or is the exception already thrown in/before the controller method?","body":"Where are you calling <code>searchDaysForMonth</code>? You are not showing the call of that method. Or is the exception already thrown in/before the controller method?"},{"owner":{"account_id":2094057,"reputation":506074,"user_id":1863229,"accept_rate":58,"display_name":"Tim Biegeleisen"},"score":0,"creation_date":1674743967,"post_id":75247501,"comment_id":132782334,"body_markdown":"Just use `AND e.employee_id = :employee_id`","body":"Just use <code>AND e.employee_id = :employee_id</code>"},{"owner":{"account_id":25979860,"reputation":9,"user_id":19712163,"display_name":"SealAnia"},"score":0,"creation_date":1674744474,"post_id":75247501,"comment_id":132782544,"body_markdown":"After I corrected my query it still doesn&#39;t work.  @Query(value = &quot;SELECT * FROM working_day w INNER JOIN \\r\\n&quot;\n\t\t\t+ &quot;employees_days e ON \\r\\n&quot;\n\t\t\t+ &quot;w.day_id = e.day_id\\r\\n&quot;\n\t\t\t+ &quot;WHERE w.date LIKE %:date% AND e.employee_id = %:employee_id%&quot;, nativeQuery = true)","body":"After I corrected my query it still doesn&#39;t work.  @Query(value = &quot;SELECT * FROM working_day w INNER JOIN \\r\\n&quot; \t\t\t+ &quot;employees_days e ON \\r\\n&quot; \t\t\t+ &quot;w.day_id = e.day_id\\r\\n&quot; \t\t\t+ &quot;WHERE w.date LIKE %:date% AND e.employee_id = %:employee_id%&quot;, nativeQuery = true)"},{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":0,"creation_date":1674744787,"post_id":75247501,"comment_id":132782678,"body_markdown":"`&quot;...e.employee_id = %:employee_id%&quot;` doesn&#39;t seem corrected. Do you realize that the `%...%` syntax is for the `like` operator? Why don&#39;t you use what Tim suggested: `&quot; ... e.employee_id = :employee_id&quot;`?","body":"<code>&quot;...e.employee_id = %:employee_id%&quot;</code> doesn&#39;t seem corrected. Do you realize that the <code>%...%</code> syntax is for the <code>like</code> operator? Why don&#39;t you use what Tim suggested: <code>&quot; ... e.employee_id = :employee_id&quot;</code>?"},{"owner":{"account_id":25979860,"reputation":9,"user_id":19712163,"display_name":"SealAnia"},"score":0,"creation_date":1674744949,"post_id":75247501,"comment_id":132782706,"body_markdown":"e.employee_id = :employee_id doesn&#39;t work too","body":"e.employee_id = :employee_id doesn&#39;t work too"}],"owner":{"account_id":25979860,"reputation":9,"user_id":19712163,"display_name":"SealAnia"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":290,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1674743920,"creation_date":1674743395,"question_id":75247501,"body_markdown":"I make a method of search using named query\r\n\r\n```\r\n@Query(value = &quot;SELECT * FROM working_day w INNER JOIN \\r\\n&quot;\r\n\t\t\t+ &quot;employees_days e ON \\r\\n&quot;\r\n\t\t\t+ &quot;w.day_id = e.day_id\\r\\n&quot;\r\n\t\t\t+ &quot;WHERE w.date LIKE %:date% AND e.employee_id LIKE %:employee_id%&quot;, nativeQuery = true)\r\n\tList&lt;WorkingDay&gt; searchDaysForMonth(@Param(&quot;date&quot;) String date, @Param(&quot;employee_id&quot;) Long employeeId);\r\n```\r\n\r\nService: \r\n\r\n    public List&lt;WorkingDay&gt; countDays(String date, Long employeeId) {\r\n\t\treturn workingDayRepository.searchDaysForMonth(date, employeeId);\r\n\t}\r\n\r\nController method: \r\n\r\n```\r\n@RequestMapping(value = &quot;/employees&quot;)\r\n\r\n@GetMapping(value = &quot;/employees/days_in_month&quot;)\r\n    public ModelAndView getDaysForEmployee(@RequestParam(value = &quot;date&quot;, required = false) String date,\r\n                                           @RequestParam(value = &quot;employee_id&quot;) Long employeeId) {\r\n\r\n        ModelAndView modelAndView = new ModelAndView();\r\n        modelAndView.setViewName(&quot;days_employees&quot;);\r\n\r\n        var daysForEmployee = employeeService.countDays(date, employeeId);\r\n        modelAndView.addObject(&quot;days_employees&quot;, daysForEmployee);\r\n\r\n        Employee employee = employeeService.getById(employeeId);\r\n        modelAndView.addObject(&quot;employee&quot;, employee);\r\n\r\n        var totalDays = daysForEmployee.size();\r\n        modelAndView.addObject(&quot;totalDays&quot;, totalDays);\r\n\r\n        return modelAndView;\r\n    }\r\n```\r\n\r\n\r\nWhen I enter the following mapping value \r\n\r\n`http://localhost:8080/employees/days_in_month?date=2023-01&amp;employee_id=2`\r\n\r\nI get `MethodArgumentTypeMismatchException. Failed to convert value of type &#39;java.lang.String&#39; to required type &#39;java.lang.Long&#39;;`\r\n\r\nHow to solve this? ","title":"Failed to convert value of type &#39;java.lang.String&#39; to required type &#39;java.lang.Long&#39;;","body":"<p>I make a method of search using named query</p>\n<pre><code>@Query(value = &quot;SELECT * FROM working_day w INNER JOIN \\r\\n&quot;\n            + &quot;employees_days e ON \\r\\n&quot;\n            + &quot;w.day_id = e.day_id\\r\\n&quot;\n            + &quot;WHERE w.date LIKE %:date% AND e.employee_id LIKE %:employee_id%&quot;, nativeQuery = true)\n    List&lt;WorkingDay&gt; searchDaysForMonth(@Param(&quot;date&quot;) String date, @Param(&quot;employee_id&quot;) Long employeeId);\n</code></pre>\n<p>Service:</p>\n<pre><code>public List&lt;WorkingDay&gt; countDays(String date, Long employeeId) {\n    return workingDayRepository.searchDaysForMonth(date, employeeId);\n}\n</code></pre>\n<p>Controller method:</p>\n<pre><code>@RequestMapping(value = &quot;/employees&quot;)\n\n@GetMapping(value = &quot;/employees/days_in_month&quot;)\n    public ModelAndView getDaysForEmployee(@RequestParam(value = &quot;date&quot;, required = false) String date,\n                                           @RequestParam(value = &quot;employee_id&quot;) Long employeeId) {\n\n        ModelAndView modelAndView = new ModelAndView();\n        modelAndView.setViewName(&quot;days_employees&quot;);\n\n        var daysForEmployee = employeeService.countDays(date, employeeId);\n        modelAndView.addObject(&quot;days_employees&quot;, daysForEmployee);\n\n        Employee employee = employeeService.getById(employeeId);\n        modelAndView.addObject(&quot;employee&quot;, employee);\n\n        var totalDays = daysForEmployee.size();\n        modelAndView.addObject(&quot;totalDays&quot;, totalDays);\n\n        return modelAndView;\n    }\n</code></pre>\n<p>When I enter the following mapping value</p>\n<p><code>http://localhost:8080/employees/days_in_month?date=2023-01&amp;employee_id=2</code></p>\n<p>I get <code>MethodArgumentTypeMismatchException. Failed to convert value of type 'java.lang.String' to required type 'java.lang.Long';</code></p>\n<p>How to solve this?</p>\n"},{"tags":["java","android","android-studio","react-native"],"comments":[{"owner":{"account_id":1654563,"reputation":57569,"user_id":1524450,"display_name":"Michael"},"score":0,"creation_date":1614431920,"post_id":66399125,"comment_id":117386567,"body_markdown":"_&quot;If the jdk path is invalid then why it is running in android studio?&quot;_ My first guess would be that Android Studio is using its own bundled JDK.","body":"<i>&quot;If the jdk path is invalid then why it is running in android studio?&quot;</i> My first guess would be that Android Studio is using its own bundled JDK."},{"owner":{"account_id":14088702,"reputation":65,"user_id":10177756,"display_name":"Muhammad Shah Sawar"},"score":0,"creation_date":1614432325,"post_id":66399125,"comment_id":117386674,"body_markdown":"hi Michael! can you please guide me on how I check and if it is using its own bundle how could I set my own to either as code or both, as for environment variables I set JAVA_HOME already as mentioned above,","body":"hi Michael! can you please guide me on how I check and if it is using its own bundle how could I set my own to either as code or both, as for environment variables I set JAVA_HOME already as mentioned above,"},{"owner":{"account_id":13445819,"reputation":1965,"user_id":9701793,"display_name":"rahat"},"score":0,"creation_date":1614434265,"post_id":66399125,"comment_id":117387147,"body_markdown":"I had the same issue while setting up for react native, set up java home to the proper directory, and then check in the terminal if `java` command and `javac` command works. If both works then shutdown the system after closing all programs and then start it over.","body":"I had the same issue while setting up for react native, set up java home to the proper directory, and then check in the terminal if <code>java</code> command and <code>javac</code> command works. If both works then shutdown the system after closing all programs and then start it over."},{"owner":{"account_id":12583055,"reputation":447,"user_id":9732672,"display_name":"NomadMaker"},"score":0,"creation_date":1614437045,"post_id":66399125,"comment_id":117387830,"body_markdown":"JAVA_HOME should be a single directory. In your case, it should be C:\\Program Files\\Java\\jdk-15.0.1","body":"JAVA_HOME should be a single directory. In your case, it should be C:\\Program Files\\Java\\jdk-15.0.1"},{"owner":{"account_id":7121054,"reputation":5814,"user_id":5445670,"display_name":"Solomon Ucko"},"score":0,"creation_date":1674742454,"post_id":66399125,"comment_id":132781727,"body_markdown":"Are you using Android Studio or VS Code??","body":"Are you using Android Studio or VS Code??"}],"answers":[{"tags":[],"owner":{"account_id":19353288,"reputation":69,"user_id":14150158,"display_name":"Rojhat"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1614435559,"creation_date":1614435559,"answer_id":66399706,"question_id":66399125,"body_markdown":"You should edit your path as &quot;C:\\Program Files\\Java\\jdk-15.0.1&quot; bin is not required.\r\n\r\nTo set JAVA_HOME&lt;br&gt;\r\n1-Search for Environment Variables &lt;br&gt;\r\n2-Under system variables click new &lt;br&gt;\r\n3-In the variable name enter JAVA_HOME, in the variable value enter the JDK path  &lt;br&gt;which is &quot;C:\\Program Files\\Java\\jdk-15.0.1&quot;","title":"JAVA_HOME is set to an invalid directory- vs code","body":"<p>You should edit your path as &quot;C:\\Program Files\\Java\\jdk-15.0.1&quot; bin is not required.</p>\n<p>To set JAVA_HOME<br>\n1-Search for Environment Variables <br>\n2-Under system variables click new <br>\n3-In the variable name enter JAVA_HOME, in the variable value enter the JDK path  <br>which is &quot;C:\\Program Files\\Java\\jdk-15.0.1&quot;</p>\n"},{"tags":[],"owner":{"account_id":12690043,"reputation":489,"user_id":9220478,"display_name":"Sudarshan Gaikwad"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1637697605,"creation_date":1637697605,"answer_id":70087116,"question_id":66399125,"body_markdown":"It seems the terminal caches the earlier environment variables.\r\nBefore moving ahead make sure you have already changed the correct path for JAVA_HOME.\r\n\r\nNow, Open Visual code and close the terminal, and reopen it (ctrl + ~) \r\nerror should be gone","title":"JAVA_HOME is set to an invalid directory- vs code","body":"<p>It seems the terminal caches the earlier environment variables.\nBefore moving ahead make sure you have already changed the correct path for JAVA_HOME.</p>\n<p>Now, Open Visual code and close the terminal, and reopen it (ctrl + ~)\nerror should be gone</p>\n"},{"tags":[],"owner":{"account_id":23101759,"reputation":81,"user_id":17211088,"display_name":"BurhanY"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674743258,"creation_date":1674741746,"answer_id":75247175,"question_id":66399125,"body_markdown":"I was getting this error in flutter. I deleted the &quot;JAVA_HOME&quot; &quot;C:\\Program Files\\Java\\jre7&quot; value that I wrote earlier in the system variables section under the environment variables menu. I ran the terminal again and ran &quot;flutter doctor --android-licenses&quot; in the terminal. Problem solved.\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/CpjPf.png","title":"JAVA_HOME is set to an invalid directory- vs code","body":"<p>I was getting this error in flutter. I deleted the &quot;JAVA_HOME&quot; &quot;C:\\Program Files\\Java\\jre7&quot; value that I wrote earlier in the system variables section under the environment variables menu. I ran the terminal again and ran &quot;flutter doctor --android-licenses&quot; in the terminal. Problem solved.\n<a href=\"https://i.stack.imgur.com/CpjPf.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/CpjPf.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":14088702,"reputation":65,"user_id":10177756,"display_name":"Muhammad Shah Sawar"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10876,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1674743258,"creation_date":1614431267,"question_id":66399125,"body_markdown":"I have completely followed [Setting up the development environment][1] for the **react-native project**, now when I am running the first app from Andriod studio **run BUTTON** it installs and runs perfectly. The problem comes when I run the command ` yarn react-native run-android` it throws the following error:\r\n\r\n\r\n----------\r\n\r\ninfo JS server already running\r\n\r\ninfo Installing the app...\r\n\r\n    ERROR: JAVA_HOME is set to an invalid directory: C:\\Program Files\\Java\\jdk-15.0.1;C:\\Program Files\\Java\\jdk-15.0.1\\bin;\r\n\r\nPlease set the `JAVA_HOME` variable in your environment to match the\r\nlocation of your Java installation.\r\n\r\nerror Failed to install the app. Make sure you have the Android development environment set up:\r\n\r\n https://reactnative.dev/docs/environment-setup. Run CLI with --verbose flag for more details.\r\n\r\n        Error: Command failed: gradlew.bat app:installDebug -PreactNativeDevServerPort=8081\r\n    \r\n    error Command failed with exit code 1.\r\n    info Visit https://yarnpkg.com/en/docs/cli/run for documentation about this co\r\n\r\n----------\r\n[snapshot is here][2]\r\n\r\n**My jdk path:**\r\nC:\\Program Files\\Java\\jdk-15.0.1;\r\nC:\\Program Files\\Java\\jdk-15.0.1\\bin;\r\n\r\nMy question is:\r\n=======\r\n\r\nIf the jdk path is invalid then why it is running in android studio? \r\n\r\n  [1]: https://reactnative.dev/docs/environment-setup\r\n  [2]: https://i.stack.imgur.com/dydbG.png\r\n\r\n","title":"JAVA_HOME is set to an invalid directory- vs code","body":"<p>I have completely followed <a href=\"https://reactnative.dev/docs/environment-setup\" rel=\"nofollow noreferrer\">Setting up the development environment</a> for the <strong>react-native project</strong>, now when I am running the first app from Andriod studio <strong>run BUTTON</strong> it installs and runs perfectly. The problem comes when I run the command <code> yarn react-native run-android</code> it throws the following error:</p>\n<hr />\n<p>info JS server already running</p>\n<p>info Installing the app...</p>\n<pre><code>ERROR: JAVA_HOME is set to an invalid directory: C:\\Program Files\\Java\\jdk-15.0.1;C:\\Program Files\\Java\\jdk-15.0.1\\bin;\n</code></pre>\n<p>Please set the <code>JAVA_HOME</code> variable in your environment to match the\nlocation of your Java installation.</p>\n<p>error Failed to install the app. Make sure you have the Android development environment set up:</p>\n<p><a href=\"https://reactnative.dev/docs/environment-setup\" rel=\"nofollow noreferrer\">https://reactnative.dev/docs/environment-setup</a>. Run CLI with --verbose flag for more details.</p>\n<pre><code>    Error: Command failed: gradlew.bat app:installDebug -PreactNativeDevServerPort=8081\n\nerror Command failed with exit code 1.\ninfo Visit https://yarnpkg.com/en/docs/cli/run for documentation about this co\n</code></pre>\n<hr />\n<p><a href=\"https://i.stack.imgur.com/dydbG.png\" rel=\"nofollow noreferrer\">snapshot is here</a></p>\n<p><strong>My jdk path:</strong>\nC:\\Program Files\\Java\\jdk-15.0.1;\nC:\\Program Files\\Java\\jdk-15.0.1\\bin;</p>\n<h1>My question is:</h1>\n<p>If the jdk path is invalid then why it is running in android studio?</p>\n"},{"tags":["java","spring-boot","keycloak"],"comments":[{"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"score":0,"creation_date":1598204687,"post_id":62199105,"comment_id":112375089,"body_markdown":"Do not esitate to comment why my answer doesn&#39;t solve your problem (or accept it...)","body":"Do not esitate to comment why my answer doesn&#39;t solve your problem (or accept it...)"}],"answers":[{"tags":[],"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1674742737,"creation_date":1597369249,"answer_id":63405348,"question_id":62199105,"body_markdown":"# 2023 update\r\nThe [deprecated Keycloak adapters for Spring](https://github.com/keycloak/keycloak/discussions/10187) (where `KeycloakAuthenticationToken` is defined) are not compatible with spring-boot 3. Alternatives in the accepted answer to [&quot;Use Keycloak Spring Adapter with Spring Boot 3&quot;](https://stackoverflow.com/questions/74571191/use-keycloak-spring-adapter-with-spring-boot-3/74572732#74572732) \r\n\r\n# Original answer\r\n\r\nAs I already wrote in my answer to the first question you linked, `@WithMockUser` populates the security context with a `UsernamePaswordAuthenticationToken` when your code / conf probably expect a `KeycloakAuthenticationToken`.\r\n\r\nIf you read carefully the same answer, you&#39;ll find an alternative to using my lib to do this: manually populate the security-context with a  `KeycloakAuthenticationToken` instance or mock in each test.\r\n\r\n**Minimal** sample with Mockito I [added to my repo][1]:\r\n``` java\r\n    @Test\r\n    public void test() {\r\n\t\tfinal var principal = mock(Principal.class);\r\n\t\twhen(principal.getName()).thenReturn(&quot;user&quot;);\r\n\r\n\t\tfinal var account = mock(OidcKeycloakAccount.class);\r\n\t\twhen(account.getRoles()).thenReturn(Set.of(&quot;offline_access&quot;, &quot;uma_authorization&quot;));\r\n\t\twhen(account.getPrincipal()).thenReturn(principal);\r\n\r\n\t\tfinal var authentication = mock(KeycloakAuthenticationToken.class);\r\n\t\twhen(authentication.getAccount()).thenReturn(account);\r\n\r\n        // post(...).with(authentication(authentication))\r\n        // limits to testing secured @Controller with MockMvc\r\n        // I prefer to set security context directly instead:\r\n\t\tSecurityContextHolder.getContext().setAuthentication(authentication);\r\n\r\n        //TODO: invoque mockmvc to test @Controller or test any other type of @Component as usual\r\n    }\r\n```\r\n\r\nMaybe, after you mesure how much this clutters your tests (there are very few claims set here) you&#39;ll reconsider using my lib (or copying from it as it&#39;s opensource).\r\n\r\nWith my annotation, above sample becomes:\r\n``` java\r\n\t@Test\r\n\t@WithMockKeycloakAuth\r\n\tpublic void test() throws Exception {\r\n        //TODO: invoque mockmvc to test @Controller or test any other type of @Component as usual\r\n\t}\r\n```\r\n\r\nRegarding spring test config with Keycloak involved, you could dig a bit into the tests of `spring-addons-keycloak` module. You&#39;d find a [complete app using `KeycloakAuthenticationToken`][2] with unit tests (and working test conf).\r\n\r\nLast (and maybe off-topic) you could read the [repo main README][3] and consider using a more generic OIDC implementation than Keycloak&#39;s one. I provide one, along with test annotation, and wrote tutorials on how to extend it to your app specific needs.\r\n\r\n\r\n  [1]: https://github.com/ch4mpy/spring-addons/blob/84fa11c483555c636e09363d7d50c19d0e901714/spring-addons-keycloak/src/test/java/com/c4_soft/springaddons/samples/webmvc/keycloak/web/GreetingControllerMockitoTest.java#L61\r\n  [2]: https://github.com/ch4mpy/spring-addons/tree/84fa11c483555c636e09363d7d50c19d0e901714/spring-addons-keycloak/src/test/java/com/c4_soft/springaddons/samples/webmvc/keycloak\r\n  [3]: https://github.com/ch4mpy/spring-addons","title":"How to unit test a SpringBoot controller secured by keycloak?","body":"<h1>2023 update</h1>\n<p>The <a href=\"https://github.com/keycloak/keycloak/discussions/10187\" rel=\"nofollow noreferrer\">deprecated Keycloak adapters for Spring</a> (where <code>KeycloakAuthenticationToken</code> is defined) are not compatible with spring-boot 3. Alternatives in the accepted answer to <a href=\"https://stackoverflow.com/questions/74571191/use-keycloak-spring-adapter-with-spring-boot-3/74572732#74572732\">&quot;Use Keycloak Spring Adapter with Spring Boot 3&quot;</a></p>\n<h1>Original answer</h1>\n<p>As I already wrote in my answer to the first question you linked, <code>@WithMockUser</code> populates the security context with a <code>UsernamePaswordAuthenticationToken</code> when your code / conf probably expect a <code>KeycloakAuthenticationToken</code>.</p>\n<p>If you read carefully the same answer, you'll find an alternative to using my lib to do this: manually populate the security-context with a  <code>KeycloakAuthenticationToken</code> instance or mock in each test.</p>\n<p><strong>Minimal</strong> sample with Mockito I <a href=\"https://github.com/ch4mpy/spring-addons/blob/84fa11c483555c636e09363d7d50c19d0e901714/spring-addons-keycloak/src/test/java/com/c4_soft/springaddons/samples/webmvc/keycloak/web/GreetingControllerMockitoTest.java#L61\" rel=\"nofollow noreferrer\">added to my repo</a>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @Test\n    public void test() {\n        final var principal = mock(Principal.class);\n        when(principal.getName()).thenReturn(&quot;user&quot;);\n\n        final var account = mock(OidcKeycloakAccount.class);\n        when(account.getRoles()).thenReturn(Set.of(&quot;offline_access&quot;, &quot;uma_authorization&quot;));\n        when(account.getPrincipal()).thenReturn(principal);\n\n        final var authentication = mock(KeycloakAuthenticationToken.class);\n        when(authentication.getAccount()).thenReturn(account);\n\n        // post(...).with(authentication(authentication))\n        // limits to testing secured @Controller with MockMvc\n        // I prefer to set security context directly instead:\n        SecurityContextHolder.getContext().setAuthentication(authentication);\n\n        //TODO: invoque mockmvc to test @Controller or test any other type of @Component as usual\n    }\n</code></pre>\n<p>Maybe, after you mesure how much this clutters your tests (there are very few claims set here) you'll reconsider using my lib (or copying from it as it's opensource).</p>\n<p>With my annotation, above sample becomes:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @Test\n    @WithMockKeycloakAuth\n    public void test() throws Exception {\n        //TODO: invoque mockmvc to test @Controller or test any other type of @Component as usual\n    }\n</code></pre>\n<p>Regarding spring test config with Keycloak involved, you could dig a bit into the tests of <code>spring-addons-keycloak</code> module. You'd find a <a href=\"https://github.com/ch4mpy/spring-addons/tree/84fa11c483555c636e09363d7d50c19d0e901714/spring-addons-keycloak/src/test/java/com/c4_soft/springaddons/samples/webmvc/keycloak\" rel=\"nofollow noreferrer\">complete app using <code>KeycloakAuthenticationToken</code></a> with unit tests (and working test conf).</p>\n<p>Last (and maybe off-topic) you could read the <a href=\"https://github.com/ch4mpy/spring-addons\" rel=\"nofollow noreferrer\">repo main README</a> and consider using a more generic OIDC implementation than Keycloak's one. I provide one, along with test annotation, and wrote tutorials on how to extend it to your app specific needs.</p>\n"}],"owner":{"account_id":6085757,"reputation":1307,"user_id":4749871,"accept_rate":80,"display_name":"Ant&#243;nio Quadrado"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5004,"favorite_count":0,"down_vote_count":1,"up_vote_count":7,"answer_count":1,"score":6,"last_activity_date":1674742737,"creation_date":1591286495,"question_id":62199105,"body_markdown":"I know that there are already similar questions, [here][1] and [here][2], regarding this problem but every solution proposed failed to help me. There is also mention to [this][3] library in most of those answers but (with all due respect) I would like to avoid depending on an external library just to be able to test a simple controller. \r\n\r\nSo, I have a very simple api that is accessed using a bearer token generated by keycloak and I would like to test the controller. Something along these lines:\r\n\r\n    @Test\r\n    @DisplayName(&quot;Should be ok&quot;)\r\n    @WithMockUser\r\n    void whenCalled_shouldBeOk() throws Exception {\r\n        SecurityContext context = SecurityContextHolder.getContext();\r\n        Authentication authentication = context.getAuthentication();\r\n        mockMvc.perform(\r\n            post(&quot;/api/url/something&quot;)\r\n                .content(&quot;{}&quot;)\r\n                .contentType(APPLICATION_JSON)\r\n                .with(authentication(authentication))\r\n        ).andExpect(status().isOk());\r\n    }\r\n\r\n\r\nThe problem is that I will always get a null pointer exception thrown by the `KeycloakDeploymentBuilder` for it&#39;s missing the adapter config. In our SecurityConfig we extend the `KeycloakWebSecurityConfigurerAdapter` and do all the required configurations for the app to work but I am failing to mock/by-pass this process in the test. Normally I find my way around this authentication problems in the tests (when keycloak isn&#39;t used) with @WithMockUser annotation but not this time.\r\n\r\nIsn&#39;t there way to mock the adapter or the filter process in order to by-pass this issue?\r\n\r\nI have tried everything that was answered in the other questions (except the library) with no luck. If you have any clue that could be of help or at least point me in the correct direction (since this can be due to a lack of knowledge on spring security from my part) that would very much appreciated.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/49144953/mocking-a-keycloak-token-for-testing-a-spring-controller\r\n  [2]: https://stackoverflow.com/questions/51711268/how-to-test-keycloak-authentication-in-spring-boot-application\r\n  [3]: https://github.com/ch4mpy/spring-addons","title":"How to unit test a SpringBoot controller secured by keycloak?","body":"<p>I know that there are already similar questions, <a href=\"https://stackoverflow.com/questions/49144953/mocking-a-keycloak-token-for-testing-a-spring-controller\">here</a> and <a href=\"https://stackoverflow.com/questions/51711268/how-to-test-keycloak-authentication-in-spring-boot-application\">here</a>, regarding this problem but every solution proposed failed to help me. There is also mention to <a href=\"https://github.com/ch4mpy/spring-addons\" rel=\"noreferrer\">this</a> library in most of those answers but (with all due respect) I would like to avoid depending on an external library just to be able to test a simple controller. </p>\n\n<p>So, I have a very simple api that is accessed using a bearer token generated by keycloak and I would like to test the controller. Something along these lines:</p>\n\n<pre><code>@Test\n@DisplayName(\"Should be ok\")\n@WithMockUser\nvoid whenCalled_shouldBeOk() throws Exception {\n    SecurityContext context = SecurityContextHolder.getContext();\n    Authentication authentication = context.getAuthentication();\n    mockMvc.perform(\n        post(\"/api/url/something\")\n            .content(\"{}\")\n            .contentType(APPLICATION_JSON)\n            .with(authentication(authentication))\n    ).andExpect(status().isOk());\n}\n</code></pre>\n\n<p>The problem is that I will always get a null pointer exception thrown by the <code>KeycloakDeploymentBuilder</code> for it's missing the adapter config. In our SecurityConfig we extend the <code>KeycloakWebSecurityConfigurerAdapter</code> and do all the required configurations for the app to work but I am failing to mock/by-pass this process in the test. Normally I find my way around this authentication problems in the tests (when keycloak isn't used) with @WithMockUser annotation but not this time.</p>\n\n<p>Isn't there way to mock the adapter or the filter process in order to by-pass this issue?</p>\n\n<p>I have tried everything that was answered in the other questions (except the library) with no luck. If you have any clue that could be of help or at least point me in the correct direction (since this can be due to a lack of knowledge on spring security from my part) that would very much appreciated.</p>\n"},{"tags":["java","liferay","liferay-7"],"answers":[{"tags":[],"owner":{"account_id":1693594,"reputation":482,"user_id":1555487,"display_name":"Byob "},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674742598,"creation_date":1674742598,"answer_id":75247345,"question_id":75159617,"body_markdown":"I had similar permissions issues during the execution of custom code that updated ExpandoBridge attributes.  Try the following update:\r\n\r\n```\r\nboolean isSecure = false; // Forces the use of ExpandoBridgeLocalService w/o permissions checking\r\n// I first update a custom field showing if the site is active or not\r\ngroup.getExpandoBridge().setAttribute(&quot;Status&quot;, &quot;Actief&quot;, isSecure);\r\n\r\nLayoutSetLocalServiceUtil.updateLayoutSetPrototypeLinkEnabled(groupId, true, true, privateTemp);\r\n```\r\n\r\nReference:\r\nhttps://docs.liferay.com/dxp/portal/7.4-latest/javadocs/portal-kernel/com/liferay/expando/kernel/model/ExpandoBridge.html#setAttribute-java.lang.String-java.io.Serializable-boolean-","title":"I keep getting a permission error when trying to update a site&#39;s template in liferay 7.3","body":"<p>I had similar permissions issues during the execution of custom code that updated ExpandoBridge attributes.  Try the following update:</p>\n<pre><code>boolean isSecure = false; // Forces the use of ExpandoBridgeLocalService w/o permissions checking\n// I first update a custom field showing if the site is active or not\ngroup.getExpandoBridge().setAttribute(&quot;Status&quot;, &quot;Actief&quot;, isSecure);\n\nLayoutSetLocalServiceUtil.updateLayoutSetPrototypeLinkEnabled(groupId, true, true, privateTemp);\n</code></pre>\n<p>Reference:\n<a href=\"https://docs.liferay.com/dxp/portal/7.4-latest/javadocs/portal-kernel/com/liferay/expando/kernel/model/ExpandoBridge.html#setAttribute-java.lang.String-java.io.Serializable-boolean-\" rel=\"nofollow noreferrer\">https://docs.liferay.com/dxp/portal/7.4-latest/javadocs/portal-kernel/com/liferay/expando/kernel/model/ExpandoBridge.html#setAttribute-java.lang.String-java.io.Serializable-boolean-</a></p>\n"}],"owner":{"account_id":20696487,"reputation":57,"user_id":15196570,"display_name":"Lincolnmyth"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":400,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1674742598,"creation_date":1674046776,"question_id":75159617,"body_markdown":"I&#39;ve encountered an issue when trying to update a site&#39;s(group) template. The template is assigned and works correctly but a couple errors are thrown when doing so. They all read the same thing:\r\n\r\n\r\n```\r\n2023-01-18 10:42:24.934 ERROR [http-nio-8080-exec-48][FragmentRendererControllerImpl:120] Unable to render content of fragment entry 0:com.liferay.fragment.exception.FragmentEntryContentException: com.liferay.portal.kernel.portlet.PortletContainerException: java.lang.IllegalArgumentException: Someone may be trying to circumvent the permission checker: {company&gt;\r\n2023-01-18 10:42:24.936 ERROR [http-nio-8080-exec-48][FragmentRendererControllerImpl:120] Unable to render content of fragment entry 0:com.liferay.fragment.exception.FragmentEntryContentException: java.lang.NullPointerException\r\n\r\n```\r\n\r\nthis is not an error i understand. As i&#39;m not checking for permission, someone without permission simply wouldn&#39;t see the button and couldn&#39;t press it. I have code for that in my view.jsp, but even when i remove it the error still persist.\r\n\r\nThis is the code i have for updating a group:\r\n\r\n```\r\n// I first update a custom field showing if the site is active or not\r\ngroup.getExpandoBridge().setAttribute(&quot;Status&quot;, &quot;Actief&quot; );\r\n\r\nLayoutSetLocalServiceUtil.updateLayoutSetPrototypeLinkEnabled(groupId, true, true, privateTemp);\r\n```\r\n\r\n\r\nLike I said I tried removing any permission checking code but this had no effect. The method i&#39;m using is from the LayoutSetLocalServiceUtil class. Given that it&#39;s a local this method shouldn&#39;t check for permission either. I&#39;m also logged in as admin when I try to run my code so I should have the permission to do this anyway.\r\n\r\nI also tried to hide the error using:\r\n\r\n\r\n```\r\nSessionMessages.add(portletRequest, PortalUtil.getPortletId(portletRequest) + SessionMessages.KEY_SUFFIX_HIDE_DEFAULT_ERROR_MESSAGE);\r\n```\r\nBut this didn&#39;t actually hide it for some reason and it doesn&#39;t solve the issue either. Did anyone encounter this before? And why do i keep getting a permission error without checking any permission?","title":"I keep getting a permission error when trying to update a site&#39;s template in liferay 7.3","body":"<p>I've encountered an issue when trying to update a site's(group) template. The template is assigned and works correctly but a couple errors are thrown when doing so. They all read the same thing:</p>\n<pre><code>2023-01-18 10:42:24.934 ERROR [http-nio-8080-exec-48][FragmentRendererControllerImpl:120] Unable to render content of fragment entry 0:com.liferay.fragment.exception.FragmentEntryContentException: com.liferay.portal.kernel.portlet.PortletContainerException: java.lang.IllegalArgumentException: Someone may be trying to circumvent the permission checker: {company&gt;\n2023-01-18 10:42:24.936 ERROR [http-nio-8080-exec-48][FragmentRendererControllerImpl:120] Unable to render content of fragment entry 0:com.liferay.fragment.exception.FragmentEntryContentException: java.lang.NullPointerException\n\n</code></pre>\n<p>this is not an error i understand. As i'm not checking for permission, someone without permission simply wouldn't see the button and couldn't press it. I have code for that in my view.jsp, but even when i remove it the error still persist.</p>\n<p>This is the code i have for updating a group:</p>\n<pre><code>// I first update a custom field showing if the site is active or not\ngroup.getExpandoBridge().setAttribute(&quot;Status&quot;, &quot;Actief&quot; );\n\nLayoutSetLocalServiceUtil.updateLayoutSetPrototypeLinkEnabled(groupId, true, true, privateTemp);\n</code></pre>\n<p>Like I said I tried removing any permission checking code but this had no effect. The method i'm using is from the LayoutSetLocalServiceUtil class. Given that it's a local this method shouldn't check for permission either. I'm also logged in as admin when I try to run my code so I should have the permission to do this anyway.</p>\n<p>I also tried to hide the error using:</p>\n<pre><code>SessionMessages.add(portletRequest, PortalUtil.getPortletId(portletRequest) + SessionMessages.KEY_SUFFIX_HIDE_DEFAULT_ERROR_MESSAGE);\n</code></pre>\n<p>But this didn't actually hide it for some reason and it doesn't solve the issue either. Did anyone encounter this before? And why do i keep getting a permission error without checking any permission?</p>\n"},{"tags":["java","jmx","java-module","java-17","illegalaccessexception"],"answers":[{"tags":[],"owner":{"account_id":4555218,"reputation":32585,"user_id":3699139,"display_name":"Jorn Vernee"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1674742538,"creation_date":1674742538,"answer_id":75247336,"question_id":75239006,"body_markdown":"In the command:\r\n\r\n    printf &quot;open  25522\\n&quot; | java -jar jmxterm/target/jmxterm-1.0.4-uber.jar --add-exports jdk.jconsole/sun.tools.jconsole=ALL-UNNAMED -v verbose\r\n\r\nYou are passing the `--add-exports` flag as a program argument, rather than a VM argument.\r\n\r\nThe flag should be passed before the `-jar` flag instead:\r\n\r\n    printf &quot;open  25522\\n&quot; | java --add-exports jdk.jconsole/sun.tools.jconsole=ALL-UNNAMED -jar jmxterm/target/jmxterm-1.0.4-uber.jar -v verbose","title":"How do I give jmxterm access to sun.tools.jconsole.LocalVirtualMachine in Java 17?","body":"<p>In the command:</p>\n<pre><code>printf &quot;open  25522\\n&quot; | java -jar jmxterm/target/jmxterm-1.0.4-uber.jar --add-exports jdk.jconsole/sun.tools.jconsole=ALL-UNNAMED -v verbose\n</code></pre>\n<p>You are passing the <code>--add-exports</code> flag as a program argument, rather than a VM argument.</p>\n<p>The flag should be passed before the <code>-jar</code> flag instead:</p>\n<pre><code>printf &quot;open  25522\\n&quot; | java --add-exports jdk.jconsole/sun.tools.jconsole=ALL-UNNAMED -jar jmxterm/target/jmxterm-1.0.4-uber.jar -v verbose\n</code></pre>\n"}],"owner":{"account_id":2164330,"reputation":2179,"user_id":1917745,"display_name":"gla3dr"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":382,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75247336,"answer_count":1,"score":1,"last_activity_date":1674742538,"creation_date":1674675360,"question_id":75239006,"body_markdown":"I am trying to use [jmxterm](https://github.com/jiaqi/jmxterm) with [Eclipse Temurin Java 17](https://adoptium.net/temurin/releases/?version=17), but because of the module encapsulation changes in Java 17, jmxterm no longer has access to the class [`sun.tools.jconsole.LocalVirtualMachine`](https://github.com/openjdk/jdk17/blob/master/src/jdk.jconsole/share/classes/sun/tools/jconsole/LocalVirtualMachine.java) in the `jdk.jconsole` module. So, running the following command:\r\n\r\n```\r\nprintf &quot;open  25522\\n&quot; | java -jar jmxterm-1.0.4-uber.jar -v verbose\r\n```\r\noutputs the following exception:\r\n```\r\njava.lang.reflect.UndeclaredThrowableException\r\n        at jdk.proxy2/jdk.proxy2.$Proxy6.getAllVirtualMachines(Unknown Source)\r\n        at org.cyclopsgroup.jmxterm.jdk6.Jdk6JavaProcessManager.get(Jdk6JavaProcessManager.java:28)\r\n        at org.cyclopsgroup.jmxterm.SyntaxUtils.getUrl(SyntaxUtils.java:41)\r\n        at org.cyclopsgroup.jmxterm.cmd.OpenCommand.execute(OpenCommand.java:64)\r\n        at org.cyclopsgroup.jmxterm.cc.CommandCenter.doExecute(CommandCenter.java:161)\r\n        at org.cyclopsgroup.jmxterm.cc.CommandCenter.doExecute(CommandCenter.java:134)\r\n        at org.cyclopsgroup.jmxterm.cc.CommandCenter.execute(CommandCenter.java:176)\r\n        at org.cyclopsgroup.jmxterm.boot.CliMain.execute(CliMain.java:149)\r\n        at org.cyclopsgroup.jmxterm.boot.CliMain.main(CliMain.java:41)\r\nCaused by: java.lang.IllegalAccessException: class org.cyclopsgroup.jmxterm.utils.WeakCastUtils$2 cannot access class sun.tools.jconsole.LocalVirtualMachine (in module jdk.jconsole) because module jdk.jconsole does not export sun.tools.jconsole to unnamed module @3bb50eaa\r\n        at java.base/jdk.internal.reflect.Reflection.newIllegalAccessException(Reflection.java:392)\r\n        at java.base/java.lang.reflect.AccessibleObject.checkAccess(AccessibleObject.java:674)\r\n        at java.base/java.lang.reflect.Method.invoke(Method.java:560)\r\n        at org.cyclopsgroup.jmxterm.utils.WeakCastUtils$2.invoke(WeakCastUtils.java:136)\r\n        ... 9 more\r\n```\r\n\r\nTo fix this, I thought I would have to recompile jmxterm with the `--add-exports` option, so to do that, I added this plugin to the [pom.xml](https://github.com/jiaqi/jmxterm/blob/main/pom.xml):\r\n```lang-xml\r\n      &lt;plugin&gt;\r\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n        &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n        &lt;version&gt;3.10.1&lt;/version&gt;\r\n        &lt;configuration&gt;\r\n          &lt;source&gt;8&lt;/source&gt;\r\n          &lt;target&gt;17&lt;/target&gt;\r\n          &lt;compilerArgs&gt;\r\n            &lt;arg&gt;--add-exports&lt;/arg&gt;\r\n            &lt;arg&gt;jdk.jconsole/sun.tools.jconsole=ALL-UNNAMED&lt;/arg&gt;\r\n          &lt;/compilerArgs&gt;\r\n        &lt;/configuration&gt;\r\n      &lt;/plugin&gt;\r\n```\r\nand I also had to add this config to the surefire plugin:\r\n```lang-xml\r\n          &lt;argLine&gt;\r\n              --add-opens java.base/java.lang=ALL-UNNAMED\r\n              --add-opens java.management/javax.management.openmbean=ALL-UNNAMED\r\n          &lt;/argLine&gt;\r\n```\r\nI have verified that Maven is using the correct JDK to build jmxterm:\r\n```\r\n$ mvn --version\r\nApache Maven 3.6.3 (cecedd343002696d0abb50b32b541b8a6ba2883f)\r\nMaven home: /opt/maven\r\nJava version: 17.0.4.1, vendor: Eclipse Adoptium, runtime: /usr/lib/jvm/temurin-17-jdk\r\nDefault locale: en_CA, platform encoding: UTF-8\r\nOS name: &quot;linux&quot;, version: &quot;3.10.0-1160.el7.x86_64&quot;, arch: &quot;amd64&quot;, family: &quot;unix&quot;\r\n```\r\nSo with these changes I was able to build a new jmxterm uber jar with `mvn package`.\r\n\r\nI then tried to run my new jmxterm jar with `--add-exports` using this command:\r\n```\r\nprintf &quot;open  25522\\n&quot; | java -jar jmxterm/target/jmxterm-1.0.4-uber.jar --add-exports jdk.jconsole/sun.tools.jconsole=ALL-UNNAMED -v verbose\r\n```\r\nbut it still threw the same exception as above.\r\n\r\nOther things I have tried that also didn&#39;t work:\r\n* Using `--add-opens` instead of `--add-exports` in the `java` command even though I don&#39;t think that should be necessary\r\n* Setting the `source` to 17 in `pom.xml`\r\n* Adding `--add-modules jdk.jconsole` argument to the `java` command as well as to `pom.xml`\r\n\r\nIs there something I am missing or is this just not possible?","title":"How do I give jmxterm access to sun.tools.jconsole.LocalVirtualMachine in Java 17?","body":"<p>I am trying to use <a href=\"https://github.com/jiaqi/jmxterm\" rel=\"nofollow noreferrer\">jmxterm</a> with <a href=\"https://adoptium.net/temurin/releases/?version=17\" rel=\"nofollow noreferrer\">Eclipse Temurin Java 17</a>, but because of the module encapsulation changes in Java 17, jmxterm no longer has access to the class <a href=\"https://github.com/openjdk/jdk17/blob/master/src/jdk.jconsole/share/classes/sun/tools/jconsole/LocalVirtualMachine.java\" rel=\"nofollow noreferrer\"><code>sun.tools.jconsole.LocalVirtualMachine</code></a> in the <code>jdk.jconsole</code> module. So, running the following command:</p>\n<pre><code>printf &quot;open  25522\\n&quot; | java -jar jmxterm-1.0.4-uber.jar -v verbose\n</code></pre>\n<p>outputs the following exception:</p>\n<pre><code>java.lang.reflect.UndeclaredThrowableException\n        at jdk.proxy2/jdk.proxy2.$Proxy6.getAllVirtualMachines(Unknown Source)\n        at org.cyclopsgroup.jmxterm.jdk6.Jdk6JavaProcessManager.get(Jdk6JavaProcessManager.java:28)\n        at org.cyclopsgroup.jmxterm.SyntaxUtils.getUrl(SyntaxUtils.java:41)\n        at org.cyclopsgroup.jmxterm.cmd.OpenCommand.execute(OpenCommand.java:64)\n        at org.cyclopsgroup.jmxterm.cc.CommandCenter.doExecute(CommandCenter.java:161)\n        at org.cyclopsgroup.jmxterm.cc.CommandCenter.doExecute(CommandCenter.java:134)\n        at org.cyclopsgroup.jmxterm.cc.CommandCenter.execute(CommandCenter.java:176)\n        at org.cyclopsgroup.jmxterm.boot.CliMain.execute(CliMain.java:149)\n        at org.cyclopsgroup.jmxterm.boot.CliMain.main(CliMain.java:41)\nCaused by: java.lang.IllegalAccessException: class org.cyclopsgroup.jmxterm.utils.WeakCastUtils$2 cannot access class sun.tools.jconsole.LocalVirtualMachine (in module jdk.jconsole) because module jdk.jconsole does not export sun.tools.jconsole to unnamed module @3bb50eaa\n        at java.base/jdk.internal.reflect.Reflection.newIllegalAccessException(Reflection.java:392)\n        at java.base/java.lang.reflect.AccessibleObject.checkAccess(AccessibleObject.java:674)\n        at java.base/java.lang.reflect.Method.invoke(Method.java:560)\n        at org.cyclopsgroup.jmxterm.utils.WeakCastUtils$2.invoke(WeakCastUtils.java:136)\n        ... 9 more\n</code></pre>\n<p>To fix this, I thought I would have to recompile jmxterm with the <code>--add-exports</code> option, so to do that, I added this plugin to the <a href=\"https://github.com/jiaqi/jmxterm/blob/main/pom.xml\" rel=\"nofollow noreferrer\">pom.xml</a>:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>      &lt;plugin&gt;\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n        &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n        &lt;version&gt;3.10.1&lt;/version&gt;\n        &lt;configuration&gt;\n          &lt;source&gt;8&lt;/source&gt;\n          &lt;target&gt;17&lt;/target&gt;\n          &lt;compilerArgs&gt;\n            &lt;arg&gt;--add-exports&lt;/arg&gt;\n            &lt;arg&gt;jdk.jconsole/sun.tools.jconsole=ALL-UNNAMED&lt;/arg&gt;\n          &lt;/compilerArgs&gt;\n        &lt;/configuration&gt;\n      &lt;/plugin&gt;\n</code></pre>\n<p>and I also had to add this config to the surefire plugin:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>          &lt;argLine&gt;\n              --add-opens java.base/java.lang=ALL-UNNAMED\n              --add-opens java.management/javax.management.openmbean=ALL-UNNAMED\n          &lt;/argLine&gt;\n</code></pre>\n<p>I have verified that Maven is using the correct JDK to build jmxterm:</p>\n<pre><code>$ mvn --version\nApache Maven 3.6.3 (cecedd343002696d0abb50b32b541b8a6ba2883f)\nMaven home: /opt/maven\nJava version: 17.0.4.1, vendor: Eclipse Adoptium, runtime: /usr/lib/jvm/temurin-17-jdk\nDefault locale: en_CA, platform encoding: UTF-8\nOS name: &quot;linux&quot;, version: &quot;3.10.0-1160.el7.x86_64&quot;, arch: &quot;amd64&quot;, family: &quot;unix&quot;\n</code></pre>\n<p>So with these changes I was able to build a new jmxterm uber jar with <code>mvn package</code>.</p>\n<p>I then tried to run my new jmxterm jar with <code>--add-exports</code> using this command:</p>\n<pre><code>printf &quot;open  25522\\n&quot; | java -jar jmxterm/target/jmxterm-1.0.4-uber.jar --add-exports jdk.jconsole/sun.tools.jconsole=ALL-UNNAMED -v verbose\n</code></pre>\n<p>but it still threw the same exception as above.</p>\n<p>Other things I have tried that also didn't work:</p>\n<ul>\n<li>Using <code>--add-opens</code> instead of <code>--add-exports</code> in the <code>java</code> command even though I don't think that should be necessary</li>\n<li>Setting the <code>source</code> to 17 in <code>pom.xml</code></li>\n<li>Adding <code>--add-modules jdk.jconsole</code> argument to the <code>java</code> command as well as to <code>pom.xml</code></li>\n</ul>\n<p>Is there something I am missing or is this just not possible?</p>\n"},{"tags":["java","spring-boot","redis","spring-data","spring-data-redis"],"comments":[{"owner":{"account_id":5336230,"reputation":5228,"user_id":4255107,"accept_rate":50,"display_name":"sonus21"},"score":0,"creation_date":1608637100,"post_id":65392303,"comment_id":115638463,"body_markdown":"Once a key is expired means you won&#39;t find the same key in Redis. What&#39;s the deal here?","body":"Once a key is expired means you won&#39;t find the same key in Redis. What&#39;s the deal here?"},{"owner":{"account_id":8825988,"reputation":61,"user_id":6594226,"display_name":"Andreea"},"score":0,"creation_date":1623655023,"post_id":65392303,"comment_id":120130407,"body_markdown":"@sonus21 I was talking about the phantom key","body":"@sonus21 I was talking about the phantom key"}],"answers":[{"tags":[],"owner":{"account_id":2230810,"reputation":66,"user_id":1968425,"display_name":"anche"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674742317,"creation_date":1674742317,"answer_id":75247284,"question_id":65392303,"body_markdown":"I had a similar issue and I had to set the property enableKeyspaceEvents in @EnableRedisRepositories annotation.\r\n       \r\n`enableKeyspaceEvents = RedisKeyValueAdapter.EnableKeyspaceEvents.ON_STARTUP`  \r\n\r\nI got the idea after reading the documentation for [Spring Data Redis (Time To Live section) ][1]\r\n\r\n&gt; By default, the key expiry listener is disabled when initializing the application. The startup mode can be adjusted in @EnableRedisRepositories or RedisKeyValueAdapter to start the listener with the application or upon the first insert of an entity with a TTL. See EnableKeyspaceEvents for possible values.\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-data/redis/docs/2.7.2/reference/html/#redis.repositories.expirations\r\n\r\nI hope this helps.","title":"Redis Template does not automatically save a phantom entity","body":"<p>I had a similar issue and I had to set the property enableKeyspaceEvents in @EnableRedisRepositories annotation.</p>\n<p><code>enableKeyspaceEvents = RedisKeyValueAdapter.EnableKeyspaceEvents.ON_STARTUP</code></p>\n<p>I got the idea after reading the documentation for <a href=\"https://docs.spring.io/spring-data/redis/docs/2.7.2/reference/html/#redis.repositories.expirations\" rel=\"nofollow noreferrer\">Spring Data Redis (Time To Live section) </a></p>\n<blockquote>\n<p>By default, the key expiry listener is disabled when initializing the application. The startup mode can be adjusted in @EnableRedisRepositories or RedisKeyValueAdapter to start the listener with the application or upon the first insert of an entity with a TTL. See EnableKeyspaceEvents for possible values.</p>\n</blockquote>\n<p>I hope this helps.</p>\n"}],"owner":{"account_id":8825988,"reputation":61,"user_id":6594226,"display_name":"Andreea"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":547,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1674742317,"creation_date":1608551592,"question_id":65392303,"body_markdown":"At the risk of making a fool out of myself, I have a question regarding redis that has plagued me for 2 days.\r\nI have a basic project with spring boot 2.4.0 (spring-data-redis included).\r\nI have the following RedisEntity:\r\n\r\n     @RedisHash\r\n     @Getter\r\n     @Setter\r\n     @ToString\r\n    public class RedisEntity implements Serializable {\r\n      private @Id String id;\r\n      private @Indexed String secondaryIndex;\r\n      private @TimeToLive Long expirationTime;\r\n    \r\n     \r\n     \r\n\r\nAnd a basic service that saves my redis entity:\r\n \r\n\r\n     public String persistEntity() {\r\n        RedisEntity myEntity = new RedisEntity();\r\n        myEntity.setId(&quot;1234&quot;);\r\n        myEntity.setExpirationTime(10L);\r\n        myEntity.setSecondaryIndex(&quot;456&quot;);\r\n    \r\n        cacheTemplate.opsForValue().set(myEntity.getId(), myEntity,\r\n    \t\tmyEntity.getExpirationTime(), TimeUnit.SECONDS);\r\n          \r\n        log.info(&quot;Saved entity to REDIS! Entity=&quot; + myEntity);\r\n        return myEntity.toString();\r\n      }\r\n\r\nThe redis template configuration is the following:\r\n \r\n\r\n    @Bean\r\n      public RedisTemplate redisTemplate(RedisConnectionFactory rcf) {\r\n        return createTemplate(rcf, new Jackson2JsonRedisSerializer(RedisEntity.class));\r\n    \r\n      }\r\n    \r\n      private &lt;K, V, S extends RedisSerializer&gt; RedisTemplate&lt;K, V&gt; createTemplate(\r\n          RedisConnectionFactory factory, S valueSerializer) {\r\n        RedisTemplate&lt;K, V&gt; redisTemplate = new RedisTemplate&lt;&gt;();\r\n        redisTemplate.setConnectionFactory(factory);\r\n        redisTemplate.setKeySerializer(new StringRedisSerializer());\r\n        redisTemplate.setValueSerializer(valueSerializer);\r\n        redisTemplate.setHashKeySerializer(new StringRedisSerializer());\r\n        redisTemplate.setHashValueSerializer(new GenericJackson2JsonRedisSerializer());\r\n        redisTemplate.afterPropertiesSet();\r\n        return redisTemplate;\r\n      }\r\nThe entity is saved in redis, but when it expires, I cannot retrieve the value ( the phantom entity is not present)\r\nI have put the `@EnableRedisRepositories(shadowCopy = ShadowCopy.ON)` on my main class but to no avail.\r\nWhen the entity expires, redis deletes everything.\r\n\r\nHas someone experienced something similar? Do I need to manually save a copy and put its expiration time at 5 minutes?\r\n\r\n","title":"Redis Template does not automatically save a phantom entity","body":"<p>At the risk of making a fool out of myself, I have a question regarding redis that has plagued me for 2 days.\nI have a basic project with spring boot 2.4.0 (spring-data-redis included).\nI have the following RedisEntity:</p>\n<pre><code> @RedisHash\n @Getter\n @Setter\n @ToString\npublic class RedisEntity implements Serializable {\n  private @Id String id;\n  private @Indexed String secondaryIndex;\n  private @TimeToLive Long expirationTime;\n\n \n \n</code></pre>\n<p>And a basic service that saves my redis entity:</p>\n<pre><code> public String persistEntity() {\n    RedisEntity myEntity = new RedisEntity();\n    myEntity.setId(&quot;1234&quot;);\n    myEntity.setExpirationTime(10L);\n    myEntity.setSecondaryIndex(&quot;456&quot;);\n\n    cacheTemplate.opsForValue().set(myEntity.getId(), myEntity,\n        myEntity.getExpirationTime(), TimeUnit.SECONDS);\n      \n    log.info(&quot;Saved entity to REDIS! Entity=&quot; + myEntity);\n    return myEntity.toString();\n  }\n</code></pre>\n<p>The redis template configuration is the following:</p>\n<pre><code>@Bean\n  public RedisTemplate redisTemplate(RedisConnectionFactory rcf) {\n    return createTemplate(rcf, new Jackson2JsonRedisSerializer(RedisEntity.class));\n\n  }\n\n  private &lt;K, V, S extends RedisSerializer&gt; RedisTemplate&lt;K, V&gt; createTemplate(\n      RedisConnectionFactory factory, S valueSerializer) {\n    RedisTemplate&lt;K, V&gt; redisTemplate = new RedisTemplate&lt;&gt;();\n    redisTemplate.setConnectionFactory(factory);\n    redisTemplate.setKeySerializer(new StringRedisSerializer());\n    redisTemplate.setValueSerializer(valueSerializer);\n    redisTemplate.setHashKeySerializer(new StringRedisSerializer());\n    redisTemplate.setHashValueSerializer(new GenericJackson2JsonRedisSerializer());\n    redisTemplate.afterPropertiesSet();\n    return redisTemplate;\n  }\n</code></pre>\n<p>The entity is saved in redis, but when it expires, I cannot retrieve the value ( the phantom entity is not present)\nI have put the <code>@EnableRedisRepositories(shadowCopy = ShadowCopy.ON)</code> on my main class but to no avail.\nWhen the entity expires, redis deletes everything.</p>\n<p>Has someone experienced something similar? Do I need to manually save a copy and put its expiration time at 5 minutes?</p>\n"},{"tags":["java","json","protocol-buffers","grpc","grpc-java"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1674680113,"post_id":75233997,"comment_id":132768887,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"answers":[{"tags":[],"owner":{"account_id":10941198,"reputation":4394,"user_id":8041003,"display_name":"John Williams"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1674741518,"creation_date":1674652951,"answer_id":75234627,"question_id":75233997,"body_markdown":"Try this:\r\n\r\n    FieldDescriptor fieldDescriptor = message.getDescriptorForType().findFieldByName(&quot;someField&quot;);\r\n    Object value = message.getField(fieldDescriptor);\r\n\r\n\r\nTo get a list of all the fields:\r\n\r\n    Map&lt;Descriptors.FieldDescriptor, Object&gt; allFields = message.getAllFields();\r\n\r\nTo get a nested value do this:\r\n\r\n    Message subMessage =\r\n        (Message)message.getField(\r\n            message.getDescriptorForType().findFieldByName(&quot;field3&quot;));\r\n    Message subSubMessage =\r\n        (Message)subMessage.getField(\r\n        subMessage.getDescriptorForType().findFieldByName(&quot;key3&quot;));\r\n    String subSubSubMessage veryNestedString =\r\n        (String)subSubMessage.getField(\r\n        subSubMessage.getDescriptorForType().findFieldByName(&quot;netsed_key_1&quot;));","title":"Converting protobuf Dynamic Message returned by gRPC call into JSON or similar object","body":"<p>Try this:</p>\n<pre><code>FieldDescriptor fieldDescriptor = message.getDescriptorForType().findFieldByName(&quot;someField&quot;);\nObject value = message.getField(fieldDescriptor);\n</code></pre>\n<p>To get a list of all the fields:</p>\n<pre><code>Map&lt;Descriptors.FieldDescriptor, Object&gt; allFields = message.getAllFields();\n</code></pre>\n<p>To get a nested value do this:</p>\n<pre><code>Message subMessage =\n    (Message)message.getField(\n        message.getDescriptorForType().findFieldByName(&quot;field3&quot;));\nMessage subSubMessage =\n    (Message)subMessage.getField(\n    subMessage.getDescriptorForType().findFieldByName(&quot;key3&quot;));\nString subSubSubMessage veryNestedString =\n    (String)subSubMessage.getField(\n    subSubMessage.getDescriptorForType().findFieldByName(&quot;netsed_key_1&quot;));\n</code></pre>\n"}],"owner":{"account_id":24057171,"reputation":73,"user_id":18034851,"display_name":"GlidingSwords997"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":608,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75234627,"answer_count":1,"score":0,"last_activity_date":1674741518,"creation_date":1674649686,"question_id":75233997,"body_markdown":"I am making a gRPC call to a server using reflection which returns Dynamic Message as the response message. Now, although this object looks similar to a nested object, its structure is slightly different from a JSON. This makes fetching of values based on fields, like \r\n```\r\nsomeObject.get(someField) \r\n```\r\ndifficult. One way is to parse this message to an object and then fetch the desired values. Any suggestions on parsing here ?\r\n\r\nThis is the class getting returned : \r\n```\r\ncom.google.protobuf.DynamicMessage\r\n\r\n```\r\nBut, although it looks like a nested JSON, we can&#39;t fetch values based on fields.\r\n\r\nTo have an overview of the shema, this is how the response looks:\r\n\r\n    field1 {\r\n      key1: &quot;value1&quot;\r\n    }\r\n    field2 {\r\n      key1: &quot;value1&quot;\r\n      key2: value2\r\n      key3 {\r\n        netsed_key_1: &quot;nested_val_1&quot;\r\n        netsed_key_2: &quot;nested_val_2&quot;\r\n      }\r\n      key4 {\r\n        netsed_key_1: &quot;nested_val_1&quot;\r\n        netsed_key_2: &quot;nested_val_2&quot;\r\n      }\r\n    }","title":"Converting protobuf Dynamic Message returned by gRPC call into JSON or similar object","body":"<p>I am making a gRPC call to a server using reflection which returns Dynamic Message as the response message. Now, although this object looks similar to a nested object, its structure is slightly different from a JSON. This makes fetching of values based on fields, like</p>\n<pre><code>someObject.get(someField) \n</code></pre>\n<p>difficult. One way is to parse this message to an object and then fetch the desired values. Any suggestions on parsing here ?</p>\n<p>This is the class getting returned :</p>\n<pre><code>com.google.protobuf.DynamicMessage\n\n</code></pre>\n<p>But, although it looks like a nested JSON, we can't fetch values based on fields.</p>\n<p>To have an overview of the shema, this is how the response looks:</p>\n<pre><code>field1 {\n  key1: &quot;value1&quot;\n}\nfield2 {\n  key1: &quot;value1&quot;\n  key2: value2\n  key3 {\n    netsed_key_1: &quot;nested_val_1&quot;\n    netsed_key_2: &quot;nested_val_2&quot;\n  }\n  key4 {\n    netsed_key_1: &quot;nested_val_1&quot;\n    netsed_key_2: &quot;nested_val_2&quot;\n  }\n}\n</code></pre>\n"},{"tags":["java","android","clock"],"comments":[{"owner":{"account_id":3131299,"reputation":37922,"user_id":2649012,"accept_rate":100,"display_name":"Phant&#244;maxx"},"score":0,"creation_date":1392308910,"post_id":21759456,"comment_id":32915090,"body_markdown":"I think you have to resort to some atomic clock around the world. So, an internet connection must be active, to sync the internal clock of the device - and it will sync basing on the current UTC offset setting.","body":"I think you have to resort to some atomic clock around the world. So, an internet connection must be active, to sync the internal clock of the device - and it will sync basing on the current UTC offset setting."}],"answers":[{"tags":[],"owner":{"account_id":39846,"reputation":991133,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"down_vote_count":0,"up_vote_count":8,"is_accepted":true,"score":8,"last_activity_date":1392310996,"creation_date":1392310056,"answer_id":21760337,"question_id":21759456,"body_markdown":"&gt; Is that possible?\r\n\r\nThat depends upon your definition of &quot;that&quot;.\r\n\r\nSo, let&#39;s examine the rest of your material first...\r\n\r\n&gt; it would start with the GPS\r\n\r\n[GPS times are not especially accurate depending on hardware][1]. I think you&#39;d also need to use an `NmeaListener` to try to parse the time data out of the NMEA sentences directly, as AFAIK `getTime()` on `Location` is the system time, not some GPS time. Also, bear in mind that GPS access is not universal (user may have disabled it specifically, &lt;strike&gt;user might have put device in airplane mode,&lt;/strike&gt; user may be in a large building with no available GPS signals).\r\n\r\n&gt; fall back to SNTP\r\n\r\nThere are plenty of SNTP client code bits out there that you can try. Bear in mind that Internet connectivity is not universal (device may be WiFi-only outside of any known access point, user might have put device in airplane mode, device may be mobile-data-capable but have no signal strength in current location).\r\n\r\n&gt; if that doesn&#39;t work ask Android to refresh its wall clock with via its own SNTP or carrier NITZ\r\n\r\nIt&#39;s conceivable that a rooted device might be able to do this, somehow, but there&#39;s nothing in the Android SDK for ordinary apps to force such a refresh. Bear in mind that connectivity is not universal (see roster in previous paragraph).\r\n\r\nSo, going back to:\r\n\r\n&gt; Is that possible?\r\n\r\nIf &quot;that&quot; is a solution that is guaranteed to work in all cases, then no, it is not possible, as you are not guaranteed any ability to communicate with any time source.\r\n\r\nIf &quot;that&quot; is a solution that is guaranteed to work if the device has Internet connectivity, then you&#39;d need to ask your SNTP client library implementers if they can achieve 100ms accuracy. SNTP is the only one of your strategies that is completely under your control, other than the connectivity issue, as GPS may not be accurate and NITZ isn&#39;t something you manage yourself.\r\n\r\n  [1]: https://groups.google.com/forum/#!topic/android-developers/VwbqlB9ugLg","title":"How do I get the most accurate time with Android?","body":"<blockquote>\n  <p>Is that possible?</p>\n</blockquote>\n\n<p>That depends upon your definition of \"that\".</p>\n\n<p>So, let's examine the rest of your material first...</p>\n\n<blockquote>\n  <p>it would start with the GPS</p>\n</blockquote>\n\n<p><a href=\"https://groups.google.com/forum/#!topic/android-developers/VwbqlB9ugLg\" rel=\"noreferrer\">GPS times are not especially accurate depending on hardware</a>. I think you'd also need to use an <code>NmeaListener</code> to try to parse the time data out of the NMEA sentences directly, as AFAIK <code>getTime()</code> on <code>Location</code> is the system time, not some GPS time. Also, bear in mind that GPS access is not universal (user may have disabled it specifically, <strike>user might have put device in airplane mode,</strike> user may be in a large building with no available GPS signals).</p>\n\n<blockquote>\n  <p>fall back to SNTP</p>\n</blockquote>\n\n<p>There are plenty of SNTP client code bits out there that you can try. Bear in mind that Internet connectivity is not universal (device may be WiFi-only outside of any known access point, user might have put device in airplane mode, device may be mobile-data-capable but have no signal strength in current location).</p>\n\n<blockquote>\n  <p>if that doesn't work ask Android to refresh its wall clock with via its own SNTP or carrier NITZ</p>\n</blockquote>\n\n<p>It's conceivable that a rooted device might be able to do this, somehow, but there's nothing in the Android SDK for ordinary apps to force such a refresh. Bear in mind that connectivity is not universal (see roster in previous paragraph).</p>\n\n<p>So, going back to:</p>\n\n<blockquote>\n  <p>Is that possible?</p>\n</blockquote>\n\n<p>If \"that\" is a solution that is guaranteed to work in all cases, then no, it is not possible, as you are not guaranteed any ability to communicate with any time source.</p>\n\n<p>If \"that\" is a solution that is guaranteed to work if the device has Internet connectivity, then you'd need to ask your SNTP client library implementers if they can achieve 100ms accuracy. SNTP is the only one of your strategies that is completely under your control, other than the connectivity issue, as GPS may not be accurate and NITZ isn't something you manage yourself.</p>\n"},{"tags":[],"owner":{"account_id":7022008,"reputation":6287,"user_id":5380942,"display_name":"Googlian"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674741349,"creation_date":1674741349,"answer_id":75247078,"question_id":21759456,"body_markdown":"Simple SNTP Client class for retrieving network time on Android (SNTPClient)\r\n\r\nGet the SNTP Helper class from the below repository\r\n\r\nhttps://github.com/aslamanver/sntp-client-android\r\n\r\nCopy the `SNTPClient.java` into your project, and there you go. It&#39;s ready.\r\n\r\nUsage\r\nRetrieve the time of a specific time zone.\r\n```java\r\nSNTPClient.getDate(TimeZone.getTimeZone(&quot;Asia/Colombo&quot;), new SNTPClient.Listener() {\r\n\r\n    @Override\r\n    public void onTimeResponse(String rawDate, Date date, Exception ex) {\r\n\r\n    }\r\n});\r\n```\r\n\r\nCurrent time zone can be passed to retrieve the current time of the device zone.\r\n\r\n```java\r\nCalendar.getInstance().getTimeZone();\r\n```\r\n\r\nAbout more\r\n\r\nThe output time is formatted according to ISO 8601 format.\r\n&gt; yyyy-MM-dd&#39;T&#39;HH:mm:ssZ\r\n\r\nTime server host is Google\r\n&gt; time.google.com","title":"How do I get the most accurate time with Android?","body":"<p>Simple SNTP Client class for retrieving network time on Android (SNTPClient)</p>\n<p>Get the SNTP Helper class from the below repository</p>\n<p><a href=\"https://github.com/aslamanver/sntp-client-android\" rel=\"nofollow noreferrer\">https://github.com/aslamanver/sntp-client-android</a></p>\n<p>Copy the <code>SNTPClient.java</code> into your project, and there you go. It's ready.</p>\n<p>Usage\nRetrieve the time of a specific time zone.</p>\n<pre class=\"lang-java prettyprint-override\"><code>SNTPClient.getDate(TimeZone.getTimeZone(&quot;Asia/Colombo&quot;), new SNTPClient.Listener() {\n\n    @Override\n    public void onTimeResponse(String rawDate, Date date, Exception ex) {\n\n    }\n});\n</code></pre>\n<p>Current time zone can be passed to retrieve the current time of the device zone.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Calendar.getInstance().getTimeZone();\n</code></pre>\n<p>About more</p>\n<p>The output time is formatted according to ISO 8601 format.</p>\n<blockquote>\n<p>yyyy-MM-dd'T'HH:mm:ssZ</p>\n</blockquote>\n<p>Time server host is Google</p>\n<blockquote>\n<p>time.google.com</p>\n</blockquote>\n"}],"owner":{"account_id":1188022,"reputation":2187,"user_id":1161573,"accept_rate":68,"display_name":"ScottyB"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5038,"favorite_count":0,"down_vote_count":1,"up_vote_count":9,"accepted_answer_id":21760337,"answer_count":2,"score":8,"last_activity_date":1674741349,"creation_date":1392307741,"question_id":21759456,"body_markdown":"I really don&#39;t think this question is a duplicate.  \r\nMost answers to similar questions say to use System.currentTimeMillis() as the most accurate time, but I&#39;ve noticed that two Android devices side-by-side may be off up to 5 seconds or more from each other or (more importantly) the real time, and I believe currentTimeMillis() will reflect that difference.\r\n\r\nSo what I&#39;m really looking for is a comprehensive solution to get the most **accurate** time possible in a given moment.  \r\nFor example, it would start with the GPS and, if that&#39;s not available or there&#39;s no signal, fall back to SNTP, or if that doesn&#39;t work ask Android to refresh its wall clock with via its own SNTP or carrier NITZ.\r\n\r\nMy goal is accuracy within .1 seconds.  \r\nIs that possible?  \r\nThanks.\r\n","title":"How do I get the most accurate time with Android?","body":"<p>I really don't think this question is a duplicate.<br>\nMost answers to similar questions say to use System.currentTimeMillis() as the most accurate time, but I've noticed that two Android devices side-by-side may be off up to 5 seconds or more from each other or (more importantly) the real time, and I believe currentTimeMillis() will reflect that difference.</p>\n\n<p>So what I'm really looking for is a comprehensive solution to get the most <strong>accurate</strong> time possible in a given moment.<br>\nFor example, it would start with the GPS and, if that's not available or there's no signal, fall back to SNTP, or if that doesn't work ask Android to refresh its wall clock with via its own SNTP or carrier NITZ.</p>\n\n<p>My goal is accuracy within .1 seconds.<br>\nIs that possible?<br>\nThanks.</p>\n"},{"tags":["java"],"answers":[{"tags":[],"owner":{"account_id":4739993,"reputation":1837,"user_id":3833111,"accept_rate":100,"display_name":"Mr_Thorynque"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674741300,"creation_date":1674741300,"answer_id":75247067,"question_id":75246264,"body_markdown":"With Jmx / MBean you can get that kind of info. Java process will run as fast as the CPU limit. So that measurement doesn&#39;t make sense on different machine. \r\n\r\nTo have an idea you need to develop on docker with CPU limits and check wall clock to validate requirement of the service with load tests like gatling https://gatling.io/.","title":"Getting cpu usage by process within container with limits","body":"<p>With Jmx / MBean you can get that kind of info. Java process will run as fast as the CPU limit. So that measurement doesn't make sense on different machine.</p>\n<p>To have an idea you need to develop on docker with CPU limits and check wall clock to validate requirement of the service with load tests like gatling <a href=\"https://gatling.io/\" rel=\"nofollow noreferrer\">https://gatling.io/</a>.</p>\n"}],"owner":{"account_id":7023980,"reputation":4823,"user_id":5382150,"accept_rate":86,"display_name":"Gilgamesz"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":95,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1674741300,"creation_date":1674736828,"question_id":75246264,"body_markdown":"Do you know whether exist a library for Java that makes it possible to get recent CPU usage, let&#39;s say for the last few seconds?\r\n\r\nThis library should work on different OSes (Mac, Linux, Windows) and be container-aware - let&#39;s say that our JVM was run in container and CPU was limited to 1000 ticks per any period. Then, cpu usage by process should be relative to the limit.","title":"Getting cpu usage by process within container with limits","body":"<p>Do you know whether exist a library for Java that makes it possible to get recent CPU usage, let's say for the last few seconds?</p>\n<p>This library should work on different OSes (Mac, Linux, Windows) and be container-aware - let's say that our JVM was run in container and CPU was limited to 1000 ticks per any period. Then, cpu usage by process should be relative to the limit.</p>\n"},{"tags":["java","spring","hibernate","hibernate-onetomany"],"comments":[{"owner":{"account_id":9571720,"reputation":6305,"user_id":7109162,"accept_rate":84,"display_name":"XtremeBaumer"},"score":0,"creation_date":1674742923,"post_id":75247052,"comment_id":132781918,"body_markdown":"I would think that `SistemaEntidad sistema = this.tablasServicio.buscarSistemaByIdEntidad(sistemaId);` causes the problem, as that entity has multiple lazily fetched collections. If lazy fetched, the collection is a proxy only that has not been initialized. You could try to force initialization using `Hibernate.initialize()`","body":"I would think that <code>SistemaEntidad sistema = this.tablasServicio.buscarSistemaByIdEntidad(sistemaId);</code> causes the problem, as that entity has multiple lazily fetched collections. If lazy fetched, the collection is a proxy only that has not been initialized. You could try to force initialization using <code>Hibernate.initialize()</code>"},{"owner":{"account_id":27626965,"reputation":1,"user_id":21086770,"display_name":"Samuelpi"},"score":0,"creation_date":1674747744,"post_id":75247052,"comment_id":132783757,"body_markdown":"I have tried with Hibernate.initialize to every lazy collection of SistemaEntidad. Now the error is: `org.hibernate.PersistentObjectException: detached entity passed to persist: es.sjtr.persistencia.TipoSistemaEntidad`...","body":"I have tried with Hibernate.initialize to every lazy collection of SistemaEntidad. Now the error is: <code>org.hibernate.PersistentObjectException: detached entity passed to persist: es.sjtr.persistencia.TipoSistemaEntidad</code>..."},{"owner":{"account_id":27626965,"reputation":1,"user_id":21086770,"display_name":"Samuelpi"},"score":0,"creation_date":1674748094,"post_id":75247052,"comment_id":132783901,"body_markdown":"To avoid detached entity error, I have changed on SistemaEntidad all cascadeType.All to cascadeType.Merge. Now the problem is Hibernate is trying to insert on table SISTEMAS, but that is wrong because that SISTEMA exists, so PK constrsint violation is throw","body":"To avoid detached entity error, I have changed on SistemaEntidad all cascadeType.All to cascadeType.Merge. Now the problem is Hibernate is trying to insert on table SISTEMAS, but that is wrong because that SISTEMA exists, so PK constrsint violation is throw"},{"owner":{"account_id":27626965,"reputation":1,"user_id":21086770,"display_name":"Samuelpi"},"score":0,"creation_date":1674804545,"post_id":75247052,"comment_id":132795109,"body_markdown":"Finally resolved calling to Hibernate.initialize just before persisting DestinatariosAlertasEntidad. Thanks for your help!","body":"Finally resolved calling to Hibernate.initialize just before persisting DestinatariosAlertasEntidad. Thanks for your help!"}],"owner":{"account_id":27626965,"reputation":1,"user_id":21086770,"display_name":"Samuelpi"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":75,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1674741212,"creation_date":1674741212,"question_id":75247052,"body_markdown":"I have googled a lot, but I have not found any solution. Error showed in the log:\r\n\r\n```\r\norg.hibernate.PersistentObjectException: uninitialized proxy passed to persist()\r\n\tat org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:99)\r\n\tat org.hibernate.internal.SessionImpl.firePersist(SessionImpl.java:762)\r\n\tat org.hibernate.internal.SessionImpl.persist(SessionImpl.java:755)\r\n\tat org.hibernate.engine.spi.CascadingAction$7.cascade(CascadingAction.java:315)\r\n\tat org.hibernate.engine.internal.Cascade.cascadeToOne(Cascade.java:399)\r\n\tat org.hibernate.engine.internal.Cascade.cascadeAssociation(Cascade.java:342)\r\n\tat org.hibernate.engine.internal.Cascade.cascadeProperty(Cascade.java:208)\r\n\tat org.hibernate.engine.internal.Cascade.cascade(Cascade.java:165)\r\n\tat org.hibernate.event.internal.AbstractSaveEventListener.cascadeBeforeSave(AbstractSaveEventListener.java:424)\r\n\tat org.hibernate.event.internal.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:263)\r\n\tat org.hibernate.event.internal.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:192)\r\n\tat org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:135)\r\n\tat org.hibernate.event.internal.DefaultPersistEventListener.entityIsTransient(DefaultPersistEventListener.java:208)\r\n\tat org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:151)\r\n```\r\n\r\nHibernate querys in the log:\r\n\r\n```\r\n(SqlStatementLogger.java:104) - insert into DEST_ALERTAS (EMAIL, ID_DESTINATARIO) values (?, ?)\r\n(SqlStatementLogger.java:104) - update DEST_ALERTAS_SISTEMA set ACTIVO=? where ID_DESTINATARIO=? and ID_SISTEMA=?\r\n```\r\nI am inserting a new DEST_ALERTAS, so the first insert is ok, and **the update is wrong, it should also be a insert**.\r\n\r\nMy code: \r\n\r\n**DEST_ALERTAS entity**\r\n\r\n```\r\n@Entity\r\n@Table(name = &quot;DEST_ALERTAS&quot;)\r\npublic class DestinatariosAlertasEntidad implements Serializable {\r\n\r\n \r\n  private static final long serialVersionUID = 1L;\r\n\r\n  @Id\r\n  @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = &quot;Identificador_DEST_ALERTAS_PK&quot;)\r\n  @SequenceGenerator(name = &quot;Identificador_DEST_ALERTAS_PK&quot;, sequenceName = &quot;SEC_GI_DEST_ALERTAS&quot;, allocationSize = 1)\r\n  @Column(name = &quot;ID_DESTINATARIO&quot;, unique = true, nullable = false)\r\n  private int idDestinatario;\r\n\r\n  @Column(name = &quot;EMAIL&quot;, length = 100)\r\n  private String email;\r\n\r\n  @OneToMany(mappedBy = &quot;destinatario&quot;, fetch = FetchType.LAZY, cascade = CascadeType.ALL)\r\n  @JsonIgnore\r\n  private Set&lt;DestinatariosAlertasSistemaEntidad&gt; destinatarioSistema = new HashSet&lt;DestinatariosAlertasSistemaEntidad&gt;();\r\n  \r\n\r\n```\r\n\r\n**DEST_ALERTAS_SISTEMA entity**\r\n\r\n```\r\n@Entity\r\n@Table(name = &quot;DEST_ALERTAS_SISTEMA&quot;)\r\npublic class DestinatariosAlertasSistemaEntidad implements Serializable {\r\n\r\n\r\n  private static final long serialVersionUID = 1L;\r\n  \r\n  @EmbeddedId\r\n  private DestinatarioSistemaKey clave;\r\n\r\n  @MapsId(&quot;idSistema&quot;)\r\n  @ManyToOne(fetch = FetchType.EAGER)\r\n  @JoinColumn(name = &quot;ID_SISTEMA&quot;, referencedColumnName = &quot;ID_SISTEMA&quot;, insertable = false, updatable = false)\r\n  private SistemaEntidad sistema;\r\n\r\n  @MapsId(&quot;idDestinatario&quot;)\r\n  @ManyToOne(fetch = FetchType.EAGER, cascade = CascadeType.ALL)\r\n  @JoinColumn(name = &quot;ID_DESTINATARIO&quot;, referencedColumnName = &quot;ID_DESTINATARIO&quot;, insertable = false, updatable = false)\r\n  private DestinatariosAlertasEntidad destinatario;\r\n\r\n\r\n```\r\n\r\nClass used to map the composite key is **DestinatarioSistemaKey**\r\n\r\n```\r\n@Embeddable\r\npublic class DestinatarioSistemaKey implements Serializable {\r\n\r\n\tprivate static final long serialVersionUID = 1L;\r\n\r\n\t@Column(name = &quot;ID_SISTEMA&quot;)\r\n\tprivate Integer idSistema;\r\n\t\r\n\t@Column(name = &quot;ID_DESTINATARIO&quot;)\r\n\tprivate Integer idDestinatario;\r\n```\r\n\r\n**SISTEMAS entity class**:\r\n\r\n```\r\n@Entity\r\n@Table(name = &quot;SISTEMAS&quot;)\r\npublic class SistemaEntidad implements Serializable {\r\n\r\n  private static final long serialVersionUID = 1L;\r\n\r\n  @Id\r\n  @Column(name = &quot;ID_SISTEMA&quot;, unique = true, nullable = false, precision = 10)\r\n  private Integer id;\r\n\r\n  @OneToMany(mappedBy = &quot;sistema&quot;, fetch = FetchType.EAGER, cascade = CascadeType.ALL)\r\n  private Set&lt;SistemaMotivoEntidad&gt; motivos = new HashSet&lt;SistemaMotivoEntidad&gt;();\r\n\r\n  @OneToMany(mappedBy = &quot;sistema&quot;, fetch = FetchType.LAZY, cascade = CascadeType.ALL)\r\n  private Set&lt;SistemaCausaEntidad&gt; causas = new HashSet&lt;SistemaCausaEntidad&gt;();\r\n\r\n  @OneToMany(mappedBy = &quot;sistema&quot;, fetch = FetchType.LAZY, cascade = CascadeType.ALL)\r\n  private Set&lt;SistemaProblemaEntidad&gt; problemas = new HashSet&lt;SistemaProblemaEntidad&gt;();\r\n\r\n  @ManyToOne(fetch = FetchType.LAZY, cascade = CascadeType.ALL)\r\n  @JoinColumn(name = &quot;ID_TIPO_SISTEMA&quot;)\r\n  private TipoSistemaEntidad tipo;\r\n\r\n```\r\n\r\nMy controller is:\r\n\r\n\r\n```\r\n@RequestMapping(value = &quot;/creaDestinatariosAlertas&quot;, method = RequestMethod.POST)\r\n  public String creaDestinatariosAlertas(\r\n      @Validated @ModelAttribute(&quot;filtro&quot;) FiltroDestinatarioSistemaAlertas usuarioAlerta,\r\n      Model model, RedirectAttributes flash, SessionStatus status, HttpServletRequest request, BindingResult result) {\r\n    \r\n    if (result.hasErrors()) {\r\n      return VISTA_CREACION_DESTINATARIOS_ALERTAS;\r\n    }\r\n    \r\n    DestinatariosAlertasEntidad entidad = new DestinatariosAlertasEntidad();\r\n    try {\r\n      entidad.setEmail(usuarioAlerta.getEmail());\r\n      entidad.setDestinatarioSistema(obtenerListaEntidad(usuarioAlerta.getSistemas(), entidad));\r\n      alertasServicio.guardarDestinatario(entidad);\r\n    } catch (Exception e) {\r\n      logger.error(&quot; Ha fallado a la hora de crear un destinatario. &quot; + e.getMessage() + &quot; - &quot; + e);\r\n    }\r\n    String mensajeFlash = (entidad.getIdDestinatario() != 0) ? &quot;Destinatario Creado con &#233;xito!&quot;\r\n        : &quot;No se ha podido crear el Destinatario.!&quot;;\r\n    flash.addFlashAttribute(SUCCESS, mensajeFlash);\r\n\r\n    // Se procede a borrar la sesion.\r\n    status.setComplete();\r\n\r\n    return OK;\r\n  }\r\n\r\n\r\n  private Set&lt;DestinatariosAlertasSistemaEntidad&gt; obtenerListaEntidad(List&lt;Integer&gt; lista, DestinatariosAlertasEntidad usuarioAlerta) {\r\n\r\n    Set&lt;DestinatariosAlertasSistemaEntidad&gt; sistemas = new HashSet&lt;DestinatariosAlertasSistemaEntidad&gt;();\r\n    \r\n    for (Integer sistemaId:lista) {\r\n      //Get sistema from DB\r\n      SistemaEntidad sistema = this.tablasServicio.buscarSistemaByIdEntidad(sistemaId);\r\n      \r\n      //Composite key creation\r\n      DestinatarioSistemaKey key = new DestinatarioSistemaKey();\r\n      key.setIdDestinatario(usuarioAlerta.getIdDestinatario());\r\n      key.setIdSistema(sistemaId);\r\n      \r\n      DestinatariosAlertasSistemaEntidad entidad = new DestinatariosAlertasSistemaEntidad();\r\n      entidad.setClave(key);\r\n      entidad.setDestinatario(usuarioAlerta);\r\n      entidad.setSistema(sistema);\r\n      entidad.setActivo(true);\r\n      \r\n      sistemas.add(entidad);\r\n    }\r\n    \r\n    return sistemas;\r\n  }\r\n\r\n```\r\nAlertasServicio is an interface for calling RepoClass. What RepoClass does is: *this.persist(destinatarioAlertasEntidad);*\r\n\r\nAny help appreciated.\r\n\r\nSorry for the spanish code!\r\n\r\nI have tried deleting cascades on SistemaEntidad , but same result.","title":"@OneToMany relationship with @EmbeddedId, giving uninitialized proxy passed to persist()","body":"<p>I have googled a lot, but I have not found any solution. Error showed in the log:</p>\n<pre><code>org.hibernate.PersistentObjectException: uninitialized proxy passed to persist()\n    at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:99)\n    at org.hibernate.internal.SessionImpl.firePersist(SessionImpl.java:762)\n    at org.hibernate.internal.SessionImpl.persist(SessionImpl.java:755)\n    at org.hibernate.engine.spi.CascadingAction$7.cascade(CascadingAction.java:315)\n    at org.hibernate.engine.internal.Cascade.cascadeToOne(Cascade.java:399)\n    at org.hibernate.engine.internal.Cascade.cascadeAssociation(Cascade.java:342)\n    at org.hibernate.engine.internal.Cascade.cascadeProperty(Cascade.java:208)\n    at org.hibernate.engine.internal.Cascade.cascade(Cascade.java:165)\n    at org.hibernate.event.internal.AbstractSaveEventListener.cascadeBeforeSave(AbstractSaveEventListener.java:424)\n    at org.hibernate.event.internal.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:263)\n    at org.hibernate.event.internal.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:192)\n    at org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:135)\n    at org.hibernate.event.internal.DefaultPersistEventListener.entityIsTransient(DefaultPersistEventListener.java:208)\n    at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:151)\n</code></pre>\n<p>Hibernate querys in the log:</p>\n<pre><code>(SqlStatementLogger.java:104) - insert into DEST_ALERTAS (EMAIL, ID_DESTINATARIO) values (?, ?)\n(SqlStatementLogger.java:104) - update DEST_ALERTAS_SISTEMA set ACTIVO=? where ID_DESTINATARIO=? and ID_SISTEMA=?\n</code></pre>\n<p>I am inserting a new DEST_ALERTAS, so the first insert is ok, and <strong>the update is wrong, it should also be a insert</strong>.</p>\n<p>My code:</p>\n<p><strong>DEST_ALERTAS entity</strong></p>\n<pre><code>@Entity\n@Table(name = &quot;DEST_ALERTAS&quot;)\npublic class DestinatariosAlertasEntidad implements Serializable {\n\n \n  private static final long serialVersionUID = 1L;\n\n  @Id\n  @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = &quot;Identificador_DEST_ALERTAS_PK&quot;)\n  @SequenceGenerator(name = &quot;Identificador_DEST_ALERTAS_PK&quot;, sequenceName = &quot;SEC_GI_DEST_ALERTAS&quot;, allocationSize = 1)\n  @Column(name = &quot;ID_DESTINATARIO&quot;, unique = true, nullable = false)\n  private int idDestinatario;\n\n  @Column(name = &quot;EMAIL&quot;, length = 100)\n  private String email;\n\n  @OneToMany(mappedBy = &quot;destinatario&quot;, fetch = FetchType.LAZY, cascade = CascadeType.ALL)\n  @JsonIgnore\n  private Set&lt;DestinatariosAlertasSistemaEntidad&gt; destinatarioSistema = new HashSet&lt;DestinatariosAlertasSistemaEntidad&gt;();\n  \n\n</code></pre>\n<p><strong>DEST_ALERTAS_SISTEMA entity</strong></p>\n<pre><code>@Entity\n@Table(name = &quot;DEST_ALERTAS_SISTEMA&quot;)\npublic class DestinatariosAlertasSistemaEntidad implements Serializable {\n\n\n  private static final long serialVersionUID = 1L;\n  \n  @EmbeddedId\n  private DestinatarioSistemaKey clave;\n\n  @MapsId(&quot;idSistema&quot;)\n  @ManyToOne(fetch = FetchType.EAGER)\n  @JoinColumn(name = &quot;ID_SISTEMA&quot;, referencedColumnName = &quot;ID_SISTEMA&quot;, insertable = false, updatable = false)\n  private SistemaEntidad sistema;\n\n  @MapsId(&quot;idDestinatario&quot;)\n  @ManyToOne(fetch = FetchType.EAGER, cascade = CascadeType.ALL)\n  @JoinColumn(name = &quot;ID_DESTINATARIO&quot;, referencedColumnName = &quot;ID_DESTINATARIO&quot;, insertable = false, updatable = false)\n  private DestinatariosAlertasEntidad destinatario;\n\n\n</code></pre>\n<p>Class used to map the composite key is <strong>DestinatarioSistemaKey</strong></p>\n<pre><code>@Embeddable\npublic class DestinatarioSistemaKey implements Serializable {\n\n    private static final long serialVersionUID = 1L;\n\n    @Column(name = &quot;ID_SISTEMA&quot;)\n    private Integer idSistema;\n    \n    @Column(name = &quot;ID_DESTINATARIO&quot;)\n    private Integer idDestinatario;\n</code></pre>\n<p><strong>SISTEMAS entity class</strong>:</p>\n<pre><code>@Entity\n@Table(name = &quot;SISTEMAS&quot;)\npublic class SistemaEntidad implements Serializable {\n\n  private static final long serialVersionUID = 1L;\n\n  @Id\n  @Column(name = &quot;ID_SISTEMA&quot;, unique = true, nullable = false, precision = 10)\n  private Integer id;\n\n  @OneToMany(mappedBy = &quot;sistema&quot;, fetch = FetchType.EAGER, cascade = CascadeType.ALL)\n  private Set&lt;SistemaMotivoEntidad&gt; motivos = new HashSet&lt;SistemaMotivoEntidad&gt;();\n\n  @OneToMany(mappedBy = &quot;sistema&quot;, fetch = FetchType.LAZY, cascade = CascadeType.ALL)\n  private Set&lt;SistemaCausaEntidad&gt; causas = new HashSet&lt;SistemaCausaEntidad&gt;();\n\n  @OneToMany(mappedBy = &quot;sistema&quot;, fetch = FetchType.LAZY, cascade = CascadeType.ALL)\n  private Set&lt;SistemaProblemaEntidad&gt; problemas = new HashSet&lt;SistemaProblemaEntidad&gt;();\n\n  @ManyToOne(fetch = FetchType.LAZY, cascade = CascadeType.ALL)\n  @JoinColumn(name = &quot;ID_TIPO_SISTEMA&quot;)\n  private TipoSistemaEntidad tipo;\n\n</code></pre>\n<p>My controller is:</p>\n<pre><code>@RequestMapping(value = &quot;/creaDestinatariosAlertas&quot;, method = RequestMethod.POST)\n  public String creaDestinatariosAlertas(\n      @Validated @ModelAttribute(&quot;filtro&quot;) FiltroDestinatarioSistemaAlertas usuarioAlerta,\n      Model model, RedirectAttributes flash, SessionStatus status, HttpServletRequest request, BindingResult result) {\n    \n    if (result.hasErrors()) {\n      return VISTA_CREACION_DESTINATARIOS_ALERTAS;\n    }\n    \n    DestinatariosAlertasEntidad entidad = new DestinatariosAlertasEntidad();\n    try {\n      entidad.setEmail(usuarioAlerta.getEmail());\n      entidad.setDestinatarioSistema(obtenerListaEntidad(usuarioAlerta.getSistemas(), entidad));\n      alertasServicio.guardarDestinatario(entidad);\n    } catch (Exception e) {\n      logger.error(&quot; Ha fallado a la hora de crear un destinatario. &quot; + e.getMessage() + &quot; - &quot; + e);\n    }\n    String mensajeFlash = (entidad.getIdDestinatario() != 0) ? &quot;Destinatario Creado con éxito!&quot;\n        : &quot;No se ha podido crear el Destinatario.!&quot;;\n    flash.addFlashAttribute(SUCCESS, mensajeFlash);\n\n    // Se procede a borrar la sesion.\n    status.setComplete();\n\n    return OK;\n  }\n\n\n  private Set&lt;DestinatariosAlertasSistemaEntidad&gt; obtenerListaEntidad(List&lt;Integer&gt; lista, DestinatariosAlertasEntidad usuarioAlerta) {\n\n    Set&lt;DestinatariosAlertasSistemaEntidad&gt; sistemas = new HashSet&lt;DestinatariosAlertasSistemaEntidad&gt;();\n    \n    for (Integer sistemaId:lista) {\n      //Get sistema from DB\n      SistemaEntidad sistema = this.tablasServicio.buscarSistemaByIdEntidad(sistemaId);\n      \n      //Composite key creation\n      DestinatarioSistemaKey key = new DestinatarioSistemaKey();\n      key.setIdDestinatario(usuarioAlerta.getIdDestinatario());\n      key.setIdSistema(sistemaId);\n      \n      DestinatariosAlertasSistemaEntidad entidad = new DestinatariosAlertasSistemaEntidad();\n      entidad.setClave(key);\n      entidad.setDestinatario(usuarioAlerta);\n      entidad.setSistema(sistema);\n      entidad.setActivo(true);\n      \n      sistemas.add(entidad);\n    }\n    \n    return sistemas;\n  }\n\n</code></pre>\n<p>AlertasServicio is an interface for calling RepoClass. What RepoClass does is: <em>this.persist(destinatarioAlertasEntidad);</em></p>\n<p>Any help appreciated.</p>\n<p>Sorry for the spanish code!</p>\n<p>I have tried deleting cascades on SistemaEntidad , but same result.</p>\n"},{"tags":["java","android","android-studio","geolocation"],"owner":{"account_id":27627208,"reputation":1,"user_id":21086974,"display_name":"nimesh"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":25,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1674741106,"creation_date":1674741106,"question_id":75247033,"body_markdown":"i want my app to sent message with cordinates even when my app is not in ram \r\n\r\n\r\n```\r\npublic class ReceiveSms extends BroadcastReceiver {\r\n    FusedLocationProviderClient fusedLocationProviderClient;\r\n    SmsManager mySmsManager = SmsManager.getDefault();\r\n    final String password = &quot;pass&quot;;\r\n\r\n\r\n    @Override\r\n    public void onReceive(Context context, @NonNull Intent intent) {\r\n        fusedLocationProviderClient = LocationServices.getFusedLocationProviderClient(context);\r\n\r\n\r\n        Bundle b = intent.getExtras();\r\n        if (intent.getAction().equalsIgnoreCase(&quot;android.provider.Telephony.SMS_RECEIVED&quot;)) {\r\n            Toast.makeText(context, &quot;SmsReceived!&quot;, Toast.LENGTH_SHORT).show();\r\n            if (b != null) {\r\n\r\n                final Object[] pdusObj = (Object[]) b.get(&quot;pdus&quot;);\r\n                SmsMessage[] messages = new SmsMessage[pdusObj.length];\r\n                for (int i = 0; i &lt; messages.length; i++) {\r\n                    String format = b.getString(&quot;format&quot;);\r\n                    messages[i] = SmsMessage.createFromPdu((byte[]) pdusObj[i], format);\r\n                    ///SmsMessage currentMessage = SmsMessage.createFromPdu((byte[]) pdusObj[i]);\r\n                    String senderNum = messages[i].getOriginatingAddress();\r\n                    String message = messages[i].getMessageBody();//\r\n                    String[] messagess = message.split(&quot; &quot;);\r\n                    if (messagess[0].equalsIgnoreCase(&quot;myhelper&quot;)&amp;&amp;messagess[1].equalsIgnoreCase(password)) {\r\n\r\n                        SmsManager mySmsManager = SmsManager.getDefault();\r\n                        Toast.makeText(context, senderNum + &quot;:&quot; + message, Toast.LENGTH_SHORT).show();\r\n\r\n                        //location\r\n                        if (messagess[2].equalsIgnoreCase(&quot;location&quot;)) {\r\n                            setlocation(senderNum, context);\r\n\r\n                        }\r\n                        else {\r\n                        Toast.makeText(context, &quot;message not found&quot;, Toast.LENGTH_SHORT).show();\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n```\r\n\r\nthis is my location function\r\n\r\n\r\n```\r\npublic void setlocation(String phno, Context context) {\r\n\r\n        Toast.makeText(context, &quot;null1&quot;, Toast.LENGTH_SHORT).show();\r\n        final String[] cordinates = new String[2];\r\n        LocationManager locationManager = (LocationManager) context.getSystemService(Context.LOCATION_SERVICE);\r\n        Toast.makeText(context, &quot;null2&quot;, Toast.LENGTH_SHORT).show();\r\n\r\n        if (locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER) || locationManager.isProviderEnabled(LocationManager.NETWORK_PROVIDER)) {\r\n            Toast.makeText(context, &quot;null3&quot;, Toast.LENGTH_SHORT).show();\r\n\r\n            fusedLocationProviderClient.getLastLocation().addOnCompleteListener(task -&gt; {\r\n                Location location = task.getResult();\r\n                if (location != null) {\r\n\r\n\r\n                    Toast.makeText(context,&quot; null 7&quot;, Toast.LENGTH_SHORT).show();\r\n\r\n                    mySmsManager.sendTextMessage(phno, null, &quot;latitude = &quot; + location.getLatitude() + &quot; longitude = &quot; + location.getLongitude() + &quot;1&quot;, null, null);\r\n                    Toast.makeText(context,&quot; null 8&quot;, Toast.LENGTH_SHORT).show();\r\n\r\n                } else {\r\n                    Toast.makeText(context, &quot;null4&quot;, Toast.LENGTH_SHORT).show();\r\n\r\n                    LocationRequest locationRequest = LocationRequest.create().setPriority(Priority.PRIORITY_HIGH_ACCURACY).setInterval(10000).setFastestInterval(1000).setNumUpdates(1);\r\n                    LocationCallback locationCallback = new LocationCallback() {\r\n\r\n\r\n                        public void onLocationResult(@NonNull LocationResult locationResult) {\r\n                            Location location1 = locationResult.getLastLocation();\r\n\r\n\r\n                            cordinates[0] = String.valueOf(location1.getLatitude());\r\n                            cordinates[1] = String.valueOf(location1.getLongitude());\r\n                            String messages = &quot;latitude = &quot; + cordinates[0] + &quot; longitude = &quot; + cordinates[1] + &quot;2&quot;;\r\n\r\n                            Toast.makeText(context, messages, Toast.LENGTH_SHORT).show();\r\n\r\n                            SmsManager mySmsManager = SmsManager.getDefault();\r\n                            mySmsManager.sendTextMessage(phno, null, messages, null, null);\r\n\r\n\r\n                        }\r\n\r\n                    };\r\n                    fusedLocationProviderClient.requestLocationUpdates(locationRequest, locationCallback, Looper.myLooper());\r\n                }\r\n            });\r\n\r\n        } else {\r\n            Toast.makeText(context, &quot;null5&quot;, Toast.LENGTH_SHORT).show();\r\n\r\n            context.startActivity(new Intent(Settings.ACTION_LOCATION_SOURCE_SETTINGS).setFlags(Intent.FLAG_ACTIVITY_NEW_TASK));\r\n        }\r\n\r\n    }\r\n```\r\nyou can sell full code in this github repository : https://github.com/Nimeshchandegra/android-spottr.git\r\n\r\nwell I am currently new to android studio so can someone help\r\n\r\n\r\ncurrently the app is sending message with cordinates if the app is on(not even working in background )","title":"want to send location cordinates using text message whenever i get a specific message","body":"<p>i want my app to sent message with cordinates even when my app is not in ram</p>\n<pre><code>public class ReceiveSms extends BroadcastReceiver {\n    FusedLocationProviderClient fusedLocationProviderClient;\n    SmsManager mySmsManager = SmsManager.getDefault();\n    final String password = &quot;pass&quot;;\n\n\n    @Override\n    public void onReceive(Context context, @NonNull Intent intent) {\n        fusedLocationProviderClient = LocationServices.getFusedLocationProviderClient(context);\n\n\n        Bundle b = intent.getExtras();\n        if (intent.getAction().equalsIgnoreCase(&quot;android.provider.Telephony.SMS_RECEIVED&quot;)) {\n            Toast.makeText(context, &quot;SmsReceived!&quot;, Toast.LENGTH_SHORT).show();\n            if (b != null) {\n\n                final Object[] pdusObj = (Object[]) b.get(&quot;pdus&quot;);\n                SmsMessage[] messages = new SmsMessage[pdusObj.length];\n                for (int i = 0; i &lt; messages.length; i++) {\n                    String format = b.getString(&quot;format&quot;);\n                    messages[i] = SmsMessage.createFromPdu((byte[]) pdusObj[i], format);\n                    ///SmsMessage currentMessage = SmsMessage.createFromPdu((byte[]) pdusObj[i]);\n                    String senderNum = messages[i].getOriginatingAddress();\n                    String message = messages[i].getMessageBody();//\n                    String[] messagess = message.split(&quot; &quot;);\n                    if (messagess[0].equalsIgnoreCase(&quot;myhelper&quot;)&amp;&amp;messagess[1].equalsIgnoreCase(password)) {\n\n                        SmsManager mySmsManager = SmsManager.getDefault();\n                        Toast.makeText(context, senderNum + &quot;:&quot; + message, Toast.LENGTH_SHORT).show();\n\n                        //location\n                        if (messagess[2].equalsIgnoreCase(&quot;location&quot;)) {\n                            setlocation(senderNum, context);\n\n                        }\n                        else {\n                        Toast.makeText(context, &quot;message not found&quot;, Toast.LENGTH_SHORT).show();\n                    }\n                }\n            }\n        }\n    }\n</code></pre>\n<p>this is my location function</p>\n<pre><code>public void setlocation(String phno, Context context) {\n\n        Toast.makeText(context, &quot;null1&quot;, Toast.LENGTH_SHORT).show();\n        final String[] cordinates = new String[2];\n        LocationManager locationManager = (LocationManager) context.getSystemService(Context.LOCATION_SERVICE);\n        Toast.makeText(context, &quot;null2&quot;, Toast.LENGTH_SHORT).show();\n\n        if (locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER) || locationManager.isProviderEnabled(LocationManager.NETWORK_PROVIDER)) {\n            Toast.makeText(context, &quot;null3&quot;, Toast.LENGTH_SHORT).show();\n\n            fusedLocationProviderClient.getLastLocation().addOnCompleteListener(task -&gt; {\n                Location location = task.getResult();\n                if (location != null) {\n\n\n                    Toast.makeText(context,&quot; null 7&quot;, Toast.LENGTH_SHORT).show();\n\n                    mySmsManager.sendTextMessage(phno, null, &quot;latitude = &quot; + location.getLatitude() + &quot; longitude = &quot; + location.getLongitude() + &quot;1&quot;, null, null);\n                    Toast.makeText(context,&quot; null 8&quot;, Toast.LENGTH_SHORT).show();\n\n                } else {\n                    Toast.makeText(context, &quot;null4&quot;, Toast.LENGTH_SHORT).show();\n\n                    LocationRequest locationRequest = LocationRequest.create().setPriority(Priority.PRIORITY_HIGH_ACCURACY).setInterval(10000).setFastestInterval(1000).setNumUpdates(1);\n                    LocationCallback locationCallback = new LocationCallback() {\n\n\n                        public void onLocationResult(@NonNull LocationResult locationResult) {\n                            Location location1 = locationResult.getLastLocation();\n\n\n                            cordinates[0] = String.valueOf(location1.getLatitude());\n                            cordinates[1] = String.valueOf(location1.getLongitude());\n                            String messages = &quot;latitude = &quot; + cordinates[0] + &quot; longitude = &quot; + cordinates[1] + &quot;2&quot;;\n\n                            Toast.makeText(context, messages, Toast.LENGTH_SHORT).show();\n\n                            SmsManager mySmsManager = SmsManager.getDefault();\n                            mySmsManager.sendTextMessage(phno, null, messages, null, null);\n\n\n                        }\n\n                    };\n                    fusedLocationProviderClient.requestLocationUpdates(locationRequest, locationCallback, Looper.myLooper());\n                }\n            });\n\n        } else {\n            Toast.makeText(context, &quot;null5&quot;, Toast.LENGTH_SHORT).show();\n\n            context.startActivity(new Intent(Settings.ACTION_LOCATION_SOURCE_SETTINGS).setFlags(Intent.FLAG_ACTIVITY_NEW_TASK));\n        }\n\n    }\n</code></pre>\n<p>you can sell full code in this github repository : <a href=\"https://github.com/Nimeshchandegra/android-spottr.git\" rel=\"nofollow noreferrer\">https://github.com/Nimeshchandegra/android-spottr.git</a></p>\n<p>well I am currently new to android studio so can someone help</p>\n<p>currently the app is sending message with cordinates if the app is on(not even working in background )</p>\n"},{"tags":["java","spring","reactive"],"comments":[{"owner":{"account_id":27619142,"reputation":11,"user_id":21080621,"display_name":"truongt2"},"score":0,"creation_date":1674855878,"post_id":75246809,"comment_id":132810241,"body_markdown":"Is there anyone has information about this?","body":"Is there anyone has information about this?"}],"owner":{"account_id":27619142,"reputation":11,"user_id":21080621,"display_name":"truongt2"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":84,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1674740858,"creation_date":1674739882,"question_id":75246809,"body_markdown":"I am using Spring boot to implement reactive micro-services. However, the reactive code is never executed in lambda function. My implementation as below. publishEventScheduler is created during application start-up. I am using this code together with Kafka to send an event to user micro-service to create user.\r\n\r\nMainServiceApplication.java\r\n```\r\n\r\npublic class MainServiceApplication {\r\n\tprivate final Integer threadPoolSize;\r\n\tprivate final Integer taskQueueSize;\r\n\r\n\tpublic MainServiceApplication(\r\n\t\t@Value(&quot;${app.threadPoolSize:10}&quot;) Integer threadPoolSize,\r\n\t\t@Value(&quot;${app.taskQueueSize:100}&quot;) Integer taskQueueSize) {\r\n\t\tthis.threadPoolSize = threadPoolSize;\r\n\t\tthis.taskQueueSize = taskQueueSize;\r\n\t}\r\n\r\n\t@Bean\r\n\tpublic Scheduler publishEventScheduler() {\r\n\t\tLOG.info(&quot;Creating a message scheduler with connectionPoolSize = {}&quot;, threadPoolSize);\r\n\t\treturn Schedulers.newBoundedElastic(threadPoolSize, taskQueueSize, &quot;publish-pool&quot;);\r\n\t}\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tSpringApplication.run(MainServiceApplication.class, args);\r\n\t}\r\n\r\n}\r\n```\r\n\r\n\r\nMainIntegration.java\r\nthe function createUser() is called with a POST request from Postman (break point stop at subscribeOn(publishEventScheduler)) but sendMessageUser() is never executed (break point in the function not working) \r\n```\r\n@Component\r\npublic class MainIntegration implements UserService, TodoService {\r\n    private final String todoServiceUrl;\r\n    private final String userServiceUrl;\r\n\r\n    private final WebClient webClient;\r\n    private final StreamBridge streamBridge;\r\n    private final Scheduler publishEventScheduler;\r\n\r\n    public MainIntegration(\r\n        @Qualifier(&quot;publishEventScheduler&quot;) Scheduler publishEventScheduler,\r\n\r\n        WebClient.Builder webClient,\r\n        StreamBridge streamBridge,\r\n\r\n        @Value(&quot;${app.user-service.host}&quot;) String userServiceHost,\r\n        @Value(&quot;${app.user-service.port}&quot;) int userServicePort\r\n    ) {\r\n        this.publishEventScheduler = publishEventScheduler;\r\n        this.webClient = webClient.build();\r\n        this.streamBridge = streamBridge;\r\n\r\n        userServiceUrl = &quot;http://&quot; + userServiceHost + &quot;:&quot; + userServicePort + &quot;/user&quot;;\r\n    }\r\n\r\n    @Override\r\n    public Mono&lt;User&gt; createUser(User body) {\r\n        return Mono.fromCallable(() -&gt; {\r\n            sendMessageUser(&quot;user-out-0&quot;, new Event&lt;Event.Type, String, User &gt;(Event.Type.CREATE, body.getUserName(), body));\r\n            return body;\r\n        }).subscribeOn(publishEventScheduler);\r\n    }\r\n\r\n    private void sendMessageUser(String bindingName, Event&lt;Type, String, User&gt; event) {\r\n        LOG.debug(&quot;Sending a {} message to {}&quot;, bindingName, event.getEventType());\r\n        Message&lt;Event&lt;Type, String, User&gt;&gt; message = MessageBuilder.withPayload(event)\r\n            .setHeader(&quot;partitionKey&quot;, event.getKey())\r\n            .build();\r\n        streamBridge.send(bindingName, message);\r\n    }\r\n```\r\n\r\napplication.yaml\r\n\r\n```\r\nserver.port: 7000\r\nserver.error.include-message: always\r\n\r\napp:\r\n  user-service:\r\n    host: localhost\r\n    port: 7002\r\n\r\nspring:\r\n  cloud:\r\n    stream:\r\n      default-binder: kafka\r\n      default-contentType: application/json\r\n      bindings:\r\n        user-out-0:\r\n          destination: user-service\r\n          producer:\r\n            required-groups: auditGroup\r\n\r\n      kafka:\r\n        binder:\r\n          brokers: 127.0.0.1\r\n          defaultBrokerPort: 2181\r\n      rabbitmq:\r\n        host: 127.0.0.1\r\n        port: 5672\r\n        username: guest\r\n        password: guest\r\n\r\n```\r\n","title":"Why the the reactive code is not executed in spring-boot?","body":"<p>I am using Spring boot to implement reactive micro-services. However, the reactive code is never executed in lambda function. My implementation as below. publishEventScheduler is created during application start-up. I am using this code together with Kafka to send an event to user micro-service to create user.</p>\n<p>MainServiceApplication.java</p>\n<pre><code>\npublic class MainServiceApplication {\n    private final Integer threadPoolSize;\n    private final Integer taskQueueSize;\n\n    public MainServiceApplication(\n        @Value(&quot;${app.threadPoolSize:10}&quot;) Integer threadPoolSize,\n        @Value(&quot;${app.taskQueueSize:100}&quot;) Integer taskQueueSize) {\n        this.threadPoolSize = threadPoolSize;\n        this.taskQueueSize = taskQueueSize;\n    }\n\n    @Bean\n    public Scheduler publishEventScheduler() {\n        LOG.info(&quot;Creating a message scheduler with connectionPoolSize = {}&quot;, threadPoolSize);\n        return Schedulers.newBoundedElastic(threadPoolSize, taskQueueSize, &quot;publish-pool&quot;);\n    }\n\n    public static void main(String[] args) {\n        SpringApplication.run(MainServiceApplication.class, args);\n    }\n\n}\n</code></pre>\n<p>MainIntegration.java\nthe function createUser() is called with a POST request from Postman (break point stop at subscribeOn(publishEventScheduler)) but sendMessageUser() is never executed (break point in the function not working)</p>\n<pre><code>@Component\npublic class MainIntegration implements UserService, TodoService {\n    private final String todoServiceUrl;\n    private final String userServiceUrl;\n\n    private final WebClient webClient;\n    private final StreamBridge streamBridge;\n    private final Scheduler publishEventScheduler;\n\n    public MainIntegration(\n        @Qualifier(&quot;publishEventScheduler&quot;) Scheduler publishEventScheduler,\n\n        WebClient.Builder webClient,\n        StreamBridge streamBridge,\n\n        @Value(&quot;${app.user-service.host}&quot;) String userServiceHost,\n        @Value(&quot;${app.user-service.port}&quot;) int userServicePort\n    ) {\n        this.publishEventScheduler = publishEventScheduler;\n        this.webClient = webClient.build();\n        this.streamBridge = streamBridge;\n\n        userServiceUrl = &quot;http://&quot; + userServiceHost + &quot;:&quot; + userServicePort + &quot;/user&quot;;\n    }\n\n    @Override\n    public Mono&lt;User&gt; createUser(User body) {\n        return Mono.fromCallable(() -&gt; {\n            sendMessageUser(&quot;user-out-0&quot;, new Event&lt;Event.Type, String, User &gt;(Event.Type.CREATE, body.getUserName(), body));\n            return body;\n        }).subscribeOn(publishEventScheduler);\n    }\n\n    private void sendMessageUser(String bindingName, Event&lt;Type, String, User&gt; event) {\n        LOG.debug(&quot;Sending a {} message to {}&quot;, bindingName, event.getEventType());\n        Message&lt;Event&lt;Type, String, User&gt;&gt; message = MessageBuilder.withPayload(event)\n            .setHeader(&quot;partitionKey&quot;, event.getKey())\n            .build();\n        streamBridge.send(bindingName, message);\n    }\n</code></pre>\n<p>application.yaml</p>\n<pre><code>server.port: 7000\nserver.error.include-message: always\n\napp:\n  user-service:\n    host: localhost\n    port: 7002\n\nspring:\n  cloud:\n    stream:\n      default-binder: kafka\n      default-contentType: application/json\n      bindings:\n        user-out-0:\n          destination: user-service\n          producer:\n            required-groups: auditGroup\n\n      kafka:\n        binder:\n          brokers: 127.0.0.1\n          defaultBrokerPort: 2181\n      rabbitmq:\n        host: 127.0.0.1\n        port: 5672\n        username: guest\n        password: guest\n\n</code></pre>\n"},{"tags":["java","maven","quarkus","bitbucket-pipelines","azure-container-registry"],"owner":{"account_id":9109578,"reputation":1,"user_id":6778812,"display_name":"Zalo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":97,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1674740827,"creation_date":1674740827,"question_id":75246993,"body_markdown":"I have used Quarkus and bitbucket pipelines for more than 2 years and it normally functions very well. From Quarkus version 2.15 I got a problem when pushing the tag/container to Azure Container Registry. The error is:\r\n\r\n\r\n```\r\n [io.quarkus.deployment.util.ExecUtil] tag does not exist: my-company.azurecr.io/my-app:1.2.30\r\n```\r\n\r\nThe only difference from when it functions is that the Quarkus version is 2.15 and 2.16.\r\n\r\nHere is the pipeline:\r\n\r\n\r\n```\r\nimage: maven:3.8.7\r\npipelines:\r\n  branches:\r\n    master:\r\n      - step:\r\n          size: 2x\r\n          name: Build and Deploy Artifacts\r\n          caches:\r\n            - maven\r\n            - docker\r\n          services:\r\n            - docker\r\n          script:\r\n            - git config --global user.email &quot;pipeline@bitbucket.com&quot;\r\n            - git config --global user.name &quot;Bitbucket Pipeline&quot;\r\n            - git remote set-url origin ${BITBUCKET_GIT_SSH_ORIGIN}\r\n\r\n            - docker login my-company.azurecr.io -u $AZURE_CLIENT_ID --password $AZURE_SECRET\r\n\r\n            - mvn -B -DdryRun=true release:prepare -Dbitbucket.url=${BITBUCKET_GIT_SSH_ORIGIN}\r\n            - mvn -B release:clean release:prepare -Dbitbucket.url=${BITBUCKET_GIT_SSH_ORIGIN} -DscmCommentPrefix=&quot;[skip ci] &quot; -Darguments=&quot;-Dmaven.test.skip=true&quot;\r\n            - mvn -B release:perform -Dbitbucket.url=${BITBUCKET_GIT_SSH_ORIGIN} -DscmCommentPrefix=&quot;[skip ci] &quot; -Darguments=&quot;-Dmaven.deploy.skip=true -Dmaven.test.skip=true -Pnative -Dquarkus.native.container-build=true -Dquarkus.container-image.push=true -Dquarkus.native.native-image-xmx=4g -Dquarkus.container-image.additional-tags=latest&quot;\r\n            - git status\r\n            - git push\r\n\r\ndefinitions:\r\n  services:\r\n    docker:\r\n      memory: 7100\r\n```\r\n\r\n\r\nStack trace:\r\n\r\n\r\n```\r\n[INFO] [INFO] [io.quarkus.deployment.util.ExecUtil] tag does not exist: my-company.azurecr.io/my-app:1.2.30\r\n[INFO] [INFO] ------------------------------------------------------------------------\r\n[INFO] [INFO] BUILD FAILURE\r\n[INFO] [INFO] ------------------------------------------------------------------------\r\n[INFO] [INFO] Total time:  04:50 min\r\n[INFO] [INFO] Finished at: 2023-01-26T10:43:00Z\r\n[INFO] [INFO] ------------------------------------------------------------------------\r\n[INFO] [ERROR] Failed to execute goal io.quarkus.platform:quarkus-maven-plugin:2.16.0.Final:build (default) on project integration-experian: Failed to build quarkus application: io.quarkus.builder.BuildException: Build failure: Build failed due to errors\r\n[INFO] [ERROR] \t[error]: Build step io.quarkus.container.image.docker.deployment.DockerProcessor#dockerBuildFromNativeImage threw an exception: java.lang.RuntimeException: Execution of &#39;docker push $ACR_HELM_REPOinsight.azurecr.io/si-integration-experian:1.2.30&#39; failed. See docker output for more details\r\n[INFO] [ERROR] \tat io.quarkus.container.image.docker.deployment.DockerProcessor.dockerException(DockerProcessor.java:338)\r\n[INFO] [ERROR] \tat io.quarkus.container.image.docker.deployment.DockerProcessor.pushImage(DockerProcessor.java:331)\r\n[INFO] [ERROR] \tat io.quarkus.container.image.docker.deployment.DockerProcessor.lambda$createContainerImage$3(DockerProcessor.java:229)\r\n[INFO] [ERROR] \tat java.base/java.util.stream.Streams$StreamBuilderImpl.forEachRemaining(Streams.java:411)\r\n[INFO] [ERROR] \tat java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)\r\n[INFO] [ERROR] \tat java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)\r\n[INFO] [ERROR] \tat io.quarkus.container.image.docker.deployment.DockerProcessor.createContainerImage(DockerProcessor.java:229)\r\n[INFO] [ERROR] \tat io.quarkus.container.image.docker.deployment.DockerProcessor.dockerBuildFromNativeImage(DockerProcessor.java:153)\r\n[INFO] [ERROR] \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n[INFO] [ERROR] \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n[INFO] [ERROR] \tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n[INFO] [ERROR] \tat java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n[INFO] [ERROR] \tat io.quarkus.deployment.ExtensionLoader$3.execute(ExtensionLoader.java:909)\r\n[INFO] [ERROR] \tat io.quarkus.builder.BuildContext.run(BuildContext.java:281)\r\n[INFO] [ERROR] \tat org.jboss.threads.ContextHandler$1.runWith(ContextHandler.java:18)\r\n[INFO] [ERROR] \tat org.jboss.threads.EnhancedQueueExecutor$Task.run(EnhancedQueueExecutor.java:2449)\r\n[INFO] [ERROR] \tat org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1478)\r\n[INFO] [ERROR] \tat java.base/java.lang.Thread.run(Thread.java:833)\r\n[INFO] [ERROR] \tat org.jboss.threads.JBossThread.run(JBossThread.java:501)\r\n[INFO] [ERROR] -&gt; [Help 1]\r\n[INFO] [ERROR] \r\n[INFO] [ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\r\n[INFO] [ERROR] Re-run Maven using the -X switch to enable full debug logging.\r\n[INFO] [ERROR] \r\n[INFO] [ERROR] For more information about the errors and possible solutions, please read the following articles:\r\n[INFO] [ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException\r\n```\r\n\r\n\r\nI just tried to build the Quarkus app using bitbucket pipeline and push it to ACR.","title":"Error: &quot;tag does not exist&quot; when using maven release:perform to push container to ACR in bitbucket pipelines","body":"<p>I have used Quarkus and bitbucket pipelines for more than 2 years and it normally functions very well. From Quarkus version 2.15 I got a problem when pushing the tag/container to Azure Container Registry. The error is:</p>\n<pre><code> [io.quarkus.deployment.util.ExecUtil] tag does not exist: my-company.azurecr.io/my-app:1.2.30\n</code></pre>\n<p>The only difference from when it functions is that the Quarkus version is 2.15 and 2.16.</p>\n<p>Here is the pipeline:</p>\n<pre><code>image: maven:3.8.7\npipelines:\n  branches:\n    master:\n      - step:\n          size: 2x\n          name: Build and Deploy Artifacts\n          caches:\n            - maven\n            - docker\n          services:\n            - docker\n          script:\n            - git config --global user.email &quot;pipeline@bitbucket.com&quot;\n            - git config --global user.name &quot;Bitbucket Pipeline&quot;\n            - git remote set-url origin ${BITBUCKET_GIT_SSH_ORIGIN}\n\n            - docker login my-company.azurecr.io -u $AZURE_CLIENT_ID --password $AZURE_SECRET\n\n            - mvn -B -DdryRun=true release:prepare -Dbitbucket.url=${BITBUCKET_GIT_SSH_ORIGIN}\n            - mvn -B release:clean release:prepare -Dbitbucket.url=${BITBUCKET_GIT_SSH_ORIGIN} -DscmCommentPrefix=&quot;[skip ci] &quot; -Darguments=&quot;-Dmaven.test.skip=true&quot;\n            - mvn -B release:perform -Dbitbucket.url=${BITBUCKET_GIT_SSH_ORIGIN} -DscmCommentPrefix=&quot;[skip ci] &quot; -Darguments=&quot;-Dmaven.deploy.skip=true -Dmaven.test.skip=true -Pnative -Dquarkus.native.container-build=true -Dquarkus.container-image.push=true -Dquarkus.native.native-image-xmx=4g -Dquarkus.container-image.additional-tags=latest&quot;\n            - git status\n            - git push\n\ndefinitions:\n  services:\n    docker:\n      memory: 7100\n</code></pre>\n<p>Stack trace:</p>\n<pre><code>[INFO] [INFO] [io.quarkus.deployment.util.ExecUtil] tag does not exist: my-company.azurecr.io/my-app:1.2.30\n[INFO] [INFO] ------------------------------------------------------------------------\n[INFO] [INFO] BUILD FAILURE\n[INFO] [INFO] ------------------------------------------------------------------------\n[INFO] [INFO] Total time:  04:50 min\n[INFO] [INFO] Finished at: 2023-01-26T10:43:00Z\n[INFO] [INFO] ------------------------------------------------------------------------\n[INFO] [ERROR] Failed to execute goal io.quarkus.platform:quarkus-maven-plugin:2.16.0.Final:build (default) on project integration-experian: Failed to build quarkus application: io.quarkus.builder.BuildException: Build failure: Build failed due to errors\n[INFO] [ERROR]  [error]: Build step io.quarkus.container.image.docker.deployment.DockerProcessor#dockerBuildFromNativeImage threw an exception: java.lang.RuntimeException: Execution of 'docker push $ACR_HELM_REPOinsight.azurecr.io/si-integration-experian:1.2.30' failed. See docker output for more details\n[INFO] [ERROR]  at io.quarkus.container.image.docker.deployment.DockerProcessor.dockerException(DockerProcessor.java:338)\n[INFO] [ERROR]  at io.quarkus.container.image.docker.deployment.DockerProcessor.pushImage(DockerProcessor.java:331)\n[INFO] [ERROR]  at io.quarkus.container.image.docker.deployment.DockerProcessor.lambda$createContainerImage$3(DockerProcessor.java:229)\n[INFO] [ERROR]  at java.base/java.util.stream.Streams$StreamBuilderImpl.forEachRemaining(Streams.java:411)\n[INFO] [ERROR]  at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)\n[INFO] [ERROR]  at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)\n[INFO] [ERROR]  at io.quarkus.container.image.docker.deployment.DockerProcessor.createContainerImage(DockerProcessor.java:229)\n[INFO] [ERROR]  at io.quarkus.container.image.docker.deployment.DockerProcessor.dockerBuildFromNativeImage(DockerProcessor.java:153)\n[INFO] [ERROR]  at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n[INFO] [ERROR]  at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n[INFO] [ERROR]  at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n[INFO] [ERROR]  at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n[INFO] [ERROR]  at io.quarkus.deployment.ExtensionLoader$3.execute(ExtensionLoader.java:909)\n[INFO] [ERROR]  at io.quarkus.builder.BuildContext.run(BuildContext.java:281)\n[INFO] [ERROR]  at org.jboss.threads.ContextHandler$1.runWith(ContextHandler.java:18)\n[INFO] [ERROR]  at org.jboss.threads.EnhancedQueueExecutor$Task.run(EnhancedQueueExecutor.java:2449)\n[INFO] [ERROR]  at org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1478)\n[INFO] [ERROR]  at java.base/java.lang.Thread.run(Thread.java:833)\n[INFO] [ERROR]  at org.jboss.threads.JBossThread.run(JBossThread.java:501)\n[INFO] [ERROR] -&gt; [Help 1]\n[INFO] [ERROR] \n[INFO] [ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\n[INFO] [ERROR] Re-run Maven using the -X switch to enable full debug logging.\n[INFO] [ERROR] \n[INFO] [ERROR] For more information about the errors and possible solutions, please read the following articles:\n[INFO] [ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException\n</code></pre>\n<p>I just tried to build the Quarkus app using bitbucket pipeline and push it to ACR.</p>\n"},{"tags":["java","amazon-ec2","jboss","wildfly","cicd"],"owner":{"account_id":26434968,"reputation":45,"user_id":20080481,"display_name":"User01"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":101,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1674740695,"creation_date":1674740695,"question_id":75246965,"body_markdown":"I&#39;m trying do deploy a java spring project on ec2 but the deployment fails.\r\nOn Jenkins I get this message:\r\n\r\n    &quot;Failed to connect to the host via ssh: Shared connection to *ip* closed.&quot;, &quot;unreachable&quot;: true\r\n\r\nchecking the server logs, I found this error:\r\n\r\n    ERROR [org.jboss.as.server] (management-handler-thread - 2) WFLYSRV0022: \r\n    Deploy of deployment &quot;*.war&quot; was rolled back with no failure message","title":"deployment &quot;.war&quot; was rolled back with no failure message","body":"<p>I'm trying do deploy a java spring project on ec2 but the deployment fails.\nOn Jenkins I get this message:</p>\n<pre><code>&quot;Failed to connect to the host via ssh: Shared connection to *ip* closed.&quot;, &quot;unreachable&quot;: true\n</code></pre>\n<p>checking the server logs, I found this error:</p>\n<pre><code>ERROR [org.jboss.as.server] (management-handler-thread - 2) WFLYSRV0022: \nDeploy of deployment &quot;*.war&quot; was rolled back with no failure message\n</code></pre>\n"},{"tags":["java","java-ee-8"],"comments":[{"owner":{"account_id":4739993,"reputation":1837,"user_id":3833111,"accept_rate":100,"display_name":"Mr_Thorynque"},"score":0,"creation_date":1674738210,"post_id":75246450,"comment_id":132780301,"body_markdown":"Why you convert byte[] to String with new String(bytes) ? Maybe try to avoid that.","body":"Why you convert byte[] to String with new String(bytes) ? Maybe try to avoid that."},{"owner":{"account_id":1658807,"reputation":31819,"user_id":1527544,"accept_rate":54,"display_name":"Antoniossss"},"score":1,"creation_date":1674738836,"post_id":75246450,"comment_id":132780512,"body_markdown":"W**? `new String(bytes)`","body":"W**? <code>new String(bytes)</code>"},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":1,"creation_date":1674742611,"post_id":75246450,"comment_id":132781788,"body_markdown":"As Thomas said, `new String(bytes)` *corrupts your data.*  Java is not C.  A Java String is *not* a holder of bytes; it holds text.  If you want to send bytes, always send them as a byte array, not as a String.","body":"As Thomas said, <code>new String(bytes)</code> <i>corrupts your data.</i>  Java is not C.  A Java String is <i>not</i> a holder of bytes; it holds text.  If you want to send bytes, always send them as a byte array, not as a String."}],"answers":[{"tags":[],"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1674740544,"creation_date":1674740544,"answer_id":75246945,"question_id":75246450,"body_markdown":"A zip file is not a string. You should drop the round trip from byte array to string and back to byte array.\r\n\r\nDeclare your `sendFile()` method as\r\n\r\n    public default void sendFile(byte[] content, String fileName, FileExtension extension, ContentType type, HttpServletResponse response) {\r\n        response.setContentType(type.getExpression());\r\n        response.setHeader(&quot;Content-Disposition&quot;, &quot;attachment; filename=\\&quot;&quot; + FileUtils.encodeForFileName(fileName) + &quot;.&quot; + extension.getExtension() + &quot;\\&quot;&quot;);\r\n        OutputStream out = response.getOutputStream();\r\n        out.write(content);\r\n        out.flush();\r\n        out.close();\r\n    }\r\n\r\nAnd call it as\r\n\r\n    sendFile(bytes, fileName, extension, type, response);\r\n\r\nThe problem with your approach is that `new String(content).getBytes()` does not return a byte array with the same content as you started with.","title":"Corrupted Zip File , sent to the client side , java ee","body":"<p>A zip file is not a string. You should drop the round trip from byte array to string and back to byte array.</p>\n<p>Declare your <code>sendFile()</code> method as</p>\n<pre><code>public default void sendFile(byte[] content, String fileName, FileExtension extension, ContentType type, HttpServletResponse response) {\n    response.setContentType(type.getExpression());\n    response.setHeader(&quot;Content-Disposition&quot;, &quot;attachment; filename=\\&quot;&quot; + FileUtils.encodeForFileName(fileName) + &quot;.&quot; + extension.getExtension() + &quot;\\&quot;&quot;);\n    OutputStream out = response.getOutputStream();\n    out.write(content);\n    out.flush();\n    out.close();\n}\n</code></pre>\n<p>And call it as</p>\n<pre><code>sendFile(bytes, fileName, extension, type, response);\n</code></pre>\n<p>The problem with your approach is that <code>new String(content).getBytes()</code> does not return a byte array with the same content as you started with.</p>\n"}],"owner":{"account_id":27625844,"reputation":11,"user_id":21085855,"display_name":"loupTerawatt"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":218,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1674740544,"creation_date":1674737884,"question_id":75246450,"body_markdown":"I&#39;m currently developping on a webserver for my company , and i&#39;am facing a corrupted zip file problem. At the end of a servlet. Here&#39;s the function header called at the very end of the servlet.\r\n\r\n```\r\nsendFile(directory, &quot;s&quot; + this.optimizerId + &quot;-&quot; + this.optimizerName + &quot;-&quot; + start.toDate(Defs.DB.DATE_PATTERN) + &quot;-&quot; + end.toDate(Defs.DB.DATE_PATTERN), FileExtension.NONE, ContentType.ZIP, response);\r\n```\r\n\r\nHere is the first send File function ...\r\n\r\n```\r\npublic default void sendFile(File file, String fileName, FileExtension extension, ContentType type, HttpServletResponse response) {\r\n\tif(type == ContentType.ZIP) {\r\n\t\tString[] files = file.list();\r\n\t\tif(files != null &amp;&amp; files.length &gt; 0) {\r\n\t\t\tbyte[] bytes = FileUtils.getZipBytes(file, files);\r\n\t\t\tsendFile(new String(bytes), fileName, extension, type, response);\r\n\t\t}\r\n\t}\r\n}\r\n```\r\n\r\nThe &quot;FileUtils.getZipBytes(file, files)&quot; function is doing fine , it returns a byteArray.\r\nI even tried to create a zip file with ZipOutputStream a File , and on the server , the zip has litterally no problem.\r\n( I will send the source code of this function if you think it&#39;s important , but i don&#39;t want to add useless complexity ).\r\n\r\nThen , here&#39;s the code of the second sendFile function that is called from the first one.\r\n\r\n```\r\npublic default void sendFile(String content, String fileName, FileExtension extension, ContentType type, HttpServletResponse response) {\r\n\tresponse.setContentType(type.getExpression());\r\n\tresponse.setHeader(&quot;Content-Disposition&quot;, &quot;attachment; filename=\\&quot;&quot; + FileUtils.encodeForFileName(fileName) + &quot;.&quot; + extension.getExtension() + &quot;\\&quot;&quot;);\r\n\tOutputStream out = response.getOutputStream();\r\n\tout.write(content.getBytes());\r\n\tout.flush();\r\n\tout.close();\r\n}\r\n```\r\n\r\nDo you see any problem in these functions ?\r\n\r\nThe zip file is downloaded from the server. He is not empty (about 15.7KB).\r\nBut when i try to open it , the file explorer of Fedora tell me that the file is corrupted.\r\n\r\nI also tried to use the unzip command on the file , and i have the following error message.\r\n\r\n```\r\nArchive:  s192-Syst&#232;me U carquefou-2023-01-26 000000-2023-01-26 235959(1).zip\r\n\r\ncaution:  zipfile comment truncated\r\nerror [s192-Syst&#232;me U carquefou-2023-01-26 000000-2023-01-26 235959(1).zip]:  missing 3249308257 bytes in zipfile\r\n  (attempting to process anyway)\r\nerror [s192-Syst&#232;me U carquefou-2023-01-26 000000-2023-01-26 235959(1).zip]:  attempt to seek before beginning of zipfile\r\n  (please check that you have transferred or created the zipfile in the\r\n  appropriate BINARY mode and that you have compiled UnZip properly)\r\n```\r\n\r\nI thought it may be the FileUtils.getZipBytes(file, files) that returns a corrupted ByteArray. But i really don&#39;t think it is ... Here&#39;s the source code of this function\r\n\r\n```\r\n\tpublic static byte[] getZipBytes(File directory, String[] files) throws IOException {\r\n\t\tByteArrayOutputStream baos = new ByteArrayOutputStream();\r\n\t\tZipOutputStream zos = new ZipOutputStream(baos);\r\n\t\tbyte bytes[] = new byte[2048];\r\n\t\tfor (String fileName : files) {\r\n\t\t\tFileInputStream fis = new FileInputStream(directory.getPath() + \r\n\t\t\t\t\tSystem.getProperty(&quot;file.separator&quot;) + fileName);\r\n\t\t\tBufferedInputStream bis = new BufferedInputStream(fis);\r\n\t\t\tzos.putNextEntry(new ZipEntry(fileName));\r\n\t\t\tint bytesRead;\r\n\t\t\twhile ((bytesRead = bis.read(bytes)) != -1) {\r\n\t\t\t\tzos.write(bytes, 0, bytesRead);\r\n\t\t\t}\r\n\t\t\tzos.closeEntry();\r\n\t\t\tbis.close();\r\n\t\t\tfis.close();\r\n\t\t}\r\n\t\tzos.flush();\r\n\t\tbaos.flush();\r\n\t\tzos.close();\r\n\t\tbaos.close();\r\n\t\treturn baos.toByteArray();\r\n}\r\n```","title":"Corrupted Zip File , sent to the client side , java ee","body":"<p>I'm currently developping on a webserver for my company , and i'am facing a corrupted zip file problem. At the end of a servlet. Here's the function header called at the very end of the servlet.</p>\n<pre><code>sendFile(directory, &quot;s&quot; + this.optimizerId + &quot;-&quot; + this.optimizerName + &quot;-&quot; + start.toDate(Defs.DB.DATE_PATTERN) + &quot;-&quot; + end.toDate(Defs.DB.DATE_PATTERN), FileExtension.NONE, ContentType.ZIP, response);\n</code></pre>\n<p>Here is the first send File function ...</p>\n<pre><code>public default void sendFile(File file, String fileName, FileExtension extension, ContentType type, HttpServletResponse response) {\n    if(type == ContentType.ZIP) {\n        String[] files = file.list();\n        if(files != null &amp;&amp; files.length &gt; 0) {\n            byte[] bytes = FileUtils.getZipBytes(file, files);\n            sendFile(new String(bytes), fileName, extension, type, response);\n        }\n    }\n}\n</code></pre>\n<p>The &quot;FileUtils.getZipBytes(file, files)&quot; function is doing fine , it returns a byteArray.\nI even tried to create a zip file with ZipOutputStream a File , and on the server , the zip has litterally no problem.\n( I will send the source code of this function if you think it's important , but i don't want to add useless complexity ).</p>\n<p>Then , here's the code of the second sendFile function that is called from the first one.</p>\n<pre><code>public default void sendFile(String content, String fileName, FileExtension extension, ContentType type, HttpServletResponse response) {\n    response.setContentType(type.getExpression());\n    response.setHeader(&quot;Content-Disposition&quot;, &quot;attachment; filename=\\&quot;&quot; + FileUtils.encodeForFileName(fileName) + &quot;.&quot; + extension.getExtension() + &quot;\\&quot;&quot;);\n    OutputStream out = response.getOutputStream();\n    out.write(content.getBytes());\n    out.flush();\n    out.close();\n}\n</code></pre>\n<p>Do you see any problem in these functions ?</p>\n<p>The zip file is downloaded from the server. He is not empty (about 15.7KB).\nBut when i try to open it , the file explorer of Fedora tell me that the file is corrupted.</p>\n<p>I also tried to use the unzip command on the file , and i have the following error message.</p>\n<pre><code>Archive:  s192-Système U carquefou-2023-01-26 000000-2023-01-26 235959(1).zip\n\ncaution:  zipfile comment truncated\nerror [s192-Système U carquefou-2023-01-26 000000-2023-01-26 235959(1).zip]:  missing 3249308257 bytes in zipfile\n  (attempting to process anyway)\nerror [s192-Système U carquefou-2023-01-26 000000-2023-01-26 235959(1).zip]:  attempt to seek before beginning of zipfile\n  (please check that you have transferred or created the zipfile in the\n  appropriate BINARY mode and that you have compiled UnZip properly)\n</code></pre>\n<p>I thought it may be the FileUtils.getZipBytes(file, files) that returns a corrupted ByteArray. But i really don't think it is ... Here's the source code of this function</p>\n<pre><code>    public static byte[] getZipBytes(File directory, String[] files) throws IOException {\n        ByteArrayOutputStream baos = new ByteArrayOutputStream();\n        ZipOutputStream zos = new ZipOutputStream(baos);\n        byte bytes[] = new byte[2048];\n        for (String fileName : files) {\n            FileInputStream fis = new FileInputStream(directory.getPath() + \n                    System.getProperty(&quot;file.separator&quot;) + fileName);\n            BufferedInputStream bis = new BufferedInputStream(fis);\n            zos.putNextEntry(new ZipEntry(fileName));\n            int bytesRead;\n            while ((bytesRead = bis.read(bytes)) != -1) {\n                zos.write(bytes, 0, bytesRead);\n            }\n            zos.closeEntry();\n            bis.close();\n            fis.close();\n        }\n        zos.flush();\n        baos.flush();\n        zos.close();\n        baos.close();\n        return baos.toByteArray();\n}\n</code></pre>\n"},{"tags":["java","hql","hibernate-mapping","coalesce"],"owner":{"account_id":10339877,"reputation":21,"user_id":7626644,"display_name":"Alassane"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1674740476,"creation_date":1674740476,"question_id":75246931,"body_markdown":"I&#39;d like to do the following in HQL: join the main truncated table only if corresponding entry is found - IF NOT FOUND - join with table&#39;s backup (which contains the rest of the data)\r\nSomething like:\r\n```\r\nselect a TranxtionAuthorization left join fetch a.tranxtion *left join fetch mybackupTable IF main join entries are NULL*\r\n```\r\nNow two issues:\r\n\r\n 1. coalesce is not an option since I am not fetching individual fields\r\n 2. and mainly my myBackupTable is not mapped in TranxtionAuthorization\r\n    xml file (only the main table is &lt;=&gt; 1st join). So I cannot build\r\n    the second join anyway\r\n\r\nI would like to know what options if this is possible and if so - what are my options.\r\n\r\nBest answers I&#39;ve found so far would be to reference the two tables in Tranxtion xml file (which itself is referenced to in TranxtionAuthorization). Details here: [https://stackoverflow.com/questions/4997950/map-two-identical-tables-same-schema-to-same-entity-in-hibernate][1]. \r\nIt seems like that could help figure out Issue #2 liste above. In that case does it mean that I would not need the second join. And would actually fetch the first non null entry mapped from either main table or the backup?\r\n\r\nNot sure. Any input/guidance is appreciated.\r\n\r\nThanks in advance\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/4997950/map-two-identical-tables-same-schema-to-same-entity-in-hibernate","title":"Hibernate | HQL join with table1 if exists OR table1_OLD_backup if not","body":"<p>I'd like to do the following in HQL: join the main truncated table only if corresponding entry is found - IF NOT FOUND - join with table's backup (which contains the rest of the data)\nSomething like:</p>\n<pre><code>select a TranxtionAuthorization left join fetch a.tranxtion *left join fetch mybackupTable IF main join entries are NULL*\n</code></pre>\n<p>Now two issues:</p>\n<ol>\n<li>coalesce is not an option since I am not fetching individual fields</li>\n<li>and mainly my myBackupTable is not mapped in TranxtionAuthorization\nxml file (only the main table is &lt;=&gt; 1st join). So I cannot build\nthe second join anyway</li>\n</ol>\n<p>I would like to know what options if this is possible and if so - what are my options.</p>\n<p>Best answers I've found so far would be to reference the two tables in Tranxtion xml file (which itself is referenced to in TranxtionAuthorization). Details here: <a href=\"https://stackoverflow.com/questions/4997950/map-two-identical-tables-same-schema-to-same-entity-in-hibernate\">Map Two Identical tables ( same schema...) to same entity in Hibernate</a>.\nIt seems like that could help figure out Issue #2 liste above. In that case does it mean that I would not need the second join. And would actually fetch the first non null entry mapped from either main table or the backup?</p>\n<p>Not sure. Any input/guidance is appreciated.</p>\n<p>Thanks in advance</p>\n"},{"tags":["java","algorithm","maps"],"comments":[{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1674740591,"post_id":75238964,"comment_id":132781036,"body_markdown":"You appear to be using a *Mercator projection* for your map.  You may find https://en.wikipedia.org/wiki/Mercator_projection#Mercator_projection_transformations or https://mathworld.wolfram.com/MercatorProjection.html helpful.","body":"You appear to be using a <i>Mercator projection</i> for your map.  You may find <a href=\"https://en.wikipedia.org/wiki/Mercator_projection#Mercator_projection_transformations\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/&hellip;</a> or <a href=\"https://mathworld.wolfram.com/MercatorProjection.html\" rel=\"nofollow noreferrer\">mathworld.wolfram.com/MercatorProjection.html</a> helpful."}],"answers":[{"tags":[],"owner":{"account_id":2124329,"reputation":612,"user_id":1886904,"display_name":"egeorge"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1674676550,"creation_date":1674676550,"answer_id":75239179,"question_id":75238964,"body_markdown":"Unfortunately, this problem is **way** harder than it seems.\r\n\r\nThat map is a **Projection**, so it is distorted from the original (roughly) spherical coordinate system your data is in. \r\n\r\n(actually, your lat &amp; long values may themselve be in one of several different projections, but that only really matters if you are doing very precise measurements.)\r\n\r\nSo your first order of business is to find out exactly what projection the map is using, then start looking for GIS libraries you can use in Java (I think there are several) to perform the translation.","title":"how to Convert longitude and latitude coordinates for world map image to cordinates (x , y) in pixels using java","body":"<p>Unfortunately, this problem is <strong>way</strong> harder than it seems.</p>\n<p>That map is a <strong>Projection</strong>, so it is distorted from the original (roughly) spherical coordinate system your data is in.</p>\n<p>(actually, your lat &amp; long values may themselve be in one of several different projections, but that only really matters if you are doing very precise measurements.)</p>\n<p>So your first order of business is to find out exactly what projection the map is using, then start looking for GIS libraries you can use in Java (I think there are several) to perform the translation.</p>\n"},{"tags":[],"owner":{"account_id":4058424,"reputation":11,"user_id":3335599,"display_name":"MBucari"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674678412,"creation_date":1674678412,"answer_id":75239496,"question_id":75238964,"body_markdown":"Decide on a radius, r, for your globe model. Your map will be 2πr pixels wide.\r\nDecide on a a latitude cutoff. You can&#39;t project a pole to a plane, and at extreme latitudes things get so distorted as to be unusable. 85 degrees is a common choice.\r\n\r\nExpress your latitude in radians: lat_r\r\n\r\nYou X coordinate is r * (lat_r+ π). So at 180&#176; W your X coordinate is r * (-π + π) = 0, and at 180&#176; E your X coordinate is r * (π + π) = 2πr\r\n\r\nExpress your longitude in radians: lon_r\r\n\r\nYour Y coordinate is r * tan(lon_r) * (1 - cos(lon_r)). So at 85&#176; N your Y coordinate is r * tan(1.4835) * (1 - cos(1.4835)) = 10.4r","title":"how to Convert longitude and latitude coordinates for world map image to cordinates (x , y) in pixels using java","body":"<p>Decide on a radius, r, for your globe model. Your map will be 2πr pixels wide.\nDecide on a a latitude cutoff. You can't project a pole to a plane, and at extreme latitudes things get so distorted as to be unusable. 85 degrees is a common choice.</p>\n<p>Express your latitude in radians: lat_r</p>\n<p>You X coordinate is r * (lat_r+ π). So at 180° W your X coordinate is r * (-π + π) = 0, and at 180° E your X coordinate is r * (π + π) = 2πr</p>\n<p>Express your longitude in radians: lon_r</p>\n<p>Your Y coordinate is r * tan(lon_r) * (1 - cos(lon_r)). So at 85° N your Y coordinate is r * tan(1.4835) * (1 - cos(1.4835)) = 10.4r</p>\n"}],"owner":{"account_id":24590318,"reputation":9,"user_id":18494324,"display_name":"Tareq Khanfar"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":141,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1674740389,"creation_date":1674675117,"question_id":75238964,"body_markdown":"I have a map of world.\r\n\r\nI need to create a function that gets two double parameters (longitude and latitude) and that function should draw a small circle on that area in the map image.\r\n\r\nI have the following info about the map:\r\n\r\n* The width of the map in pixels\r\n* The height of the map in pixels\r\n\r\n** I get to pixel X, Y based on that image.\r\n\r\nI tried longitude = -106.346771 and latitude = 56.130366;\r\n\r\nmapWidth = 3840.0 and mapHeight = 2160.0 ;\r\n\r\n\r\n\r\n\r\n    double x = (longitude + 180) / 360 * mapWidth;\r\n    double y = (1 - Math.log(Math.tan(Math.toRadians(latitude)) + 1 / \r\n        Math.cos(Math.toRadians(latitude))) / Math.PI) / 2 * mapHeight;\r\n\r\n\r\n\r\nresult : [lon: -106.346771 lat: 56.130366]: X: 785.6344426666666 Y: 671.2084211650845\r\n\r\nbut not selected in right location.\r\n\r\n\r\n[enter image description here][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/eTEOv.jpg","title":"how to Convert longitude and latitude coordinates for world map image to cordinates (x , y) in pixels using java","body":"<p>I have a map of world.</p>\n<p>I need to create a function that gets two double parameters (longitude and latitude) and that function should draw a small circle on that area in the map image.</p>\n<p>I have the following info about the map:</p>\n<ul>\n<li>The width of the map in pixels</li>\n<li>The height of the map in pixels</li>\n</ul>\n<p>** I get to pixel X, Y based on that image.</p>\n<p>I tried longitude = -106.346771 and latitude = 56.130366;</p>\n<p>mapWidth = 3840.0 and mapHeight = 2160.0 ;</p>\n<pre><code>double x = (longitude + 180) / 360 * mapWidth;\ndouble y = (1 - Math.log(Math.tan(Math.toRadians(latitude)) + 1 / \n    Math.cos(Math.toRadians(latitude))) / Math.PI) / 2 * mapHeight;\n</code></pre>\n<p>result : [lon: -106.346771 lat: 56.130366]: X: 785.6344426666666 Y: 671.2084211650845</p>\n<p>but not selected in right location.</p>\n<p><a href=\"https://i.stack.imgur.com/eTEOv.jpg\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n"},{"tags":["java","spring","jpa","spring-data","spring-data-jpa"],"answers":[{"tags":[],"owner":{"account_id":26084,"reputation":26325,"user_id":67598,"accept_rate":79,"display_name":"digitaljoel"},"down_vote_count":2,"up_vote_count":141,"is_accepted":false,"score":139,"last_activity_date":1470947206,"creation_date":1380041236,"answer_id":18987480,"question_id":18987292,"body_markdown":"For any method in a Spring CrudRepository you should be able to specify the @Query yourself.  Something like this should work: \r\n\r\n    @Query( &quot;select o from MyObject o where inventoryId in :ids&quot; )\r\n    List&lt;MyObject&gt; findByInventoryIds(@Param(&quot;ids&quot;) List&lt;Long&gt; inventoryIdList);\r\n\r\n","title":"Spring CrudRepository findByInventoryIds(List&lt;Long&gt; inventoryIdList) - equivalent to IN clause","body":"<p>For any method in a Spring CrudRepository you should be able to specify the @Query yourself.  Something like this should work: </p>\n\n<pre><code>@Query( \"select o from MyObject o where inventoryId in :ids\" )\nList&lt;MyObject&gt; findByInventoryIds(@Param(\"ids\") List&lt;Long&gt; inventoryIdList);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9744,"reputation":80826,"user_id":18122,"accept_rate":80,"display_name":"Oliver Drotbohm"},"down_vote_count":0,"up_vote_count":427,"is_accepted":true,"score":427,"last_activity_date":1674740385,"creation_date":1380084127,"answer_id":18996367,"question_id":18987292,"body_markdown":"`findByInventoryIdIn(List&lt;Long&gt; inventoryIdList)` should do the trick.\r\n\r\nThe HTTP request parameter format would be like so:\r\n    \r\n    Yes ?id=1,2,3\r\n    No  ?id=1&amp;id=2&amp;id=3\r\n\r\nThe complete list of JPA repository keywords can be found in the [current documentation listing][1]. It shows that `IsIn` is equivalent – if you prefer the verb for readability – and that JPA also supports `NotIn` and `IsNotIn`.\r\n\r\nIf `inventoryId` has the primary key, you can simply use `yourRepo.findAll(inventoryIdList)`.\r\n\r\n\r\n  [1]: http://docs.spring.io/spring-data/jpa/docs/current/reference/html/#repository-query-keywords","title":"Spring CrudRepository findByInventoryIds(List&lt;Long&gt; inventoryIdList) - equivalent to IN clause","body":"<p><code>findByInventoryIdIn(List&lt;Long&gt; inventoryIdList)</code> should do the trick.</p>\n<p>The HTTP request parameter format would be like so:</p>\n<pre><code>Yes ?id=1,2,3\nNo  ?id=1&amp;id=2&amp;id=3\n</code></pre>\n<p>The complete list of JPA repository keywords can be found in the <a href=\"http://docs.spring.io/spring-data/jpa/docs/current/reference/html/#repository-query-keywords\" rel=\"noreferrer\">current documentation listing</a>. It shows that <code>IsIn</code> is equivalent – if you prefer the verb for readability – and that JPA also supports <code>NotIn</code> and <code>IsNotIn</code>.</p>\n<p>If <code>inventoryId</code> has the primary key, you can simply use <code>yourRepo.findAll(inventoryIdList)</code>.</p>\n"},{"tags":[],"owner":{"account_id":9792584,"reputation":509,"user_id":7256724,"display_name":"Dzinot"},"down_vote_count":1,"up_vote_count":45,"is_accepted":false,"score":44,"last_activity_date":1494515438,"creation_date":1494515438,"answer_id":43919322,"question_id":18987292,"body_markdown":"Yes, that is supported.\r\n\r\nCheck the documentation provided [here][1] for the supported keywords inside method names.\r\n\r\nYou can just define the method in the repository interface without using the **@Query** annotation and writing your custom query. In your case it would be as followed:\r\n\r\n    List&lt;Inventory&gt; findByIdIn(List&lt;Long&gt; ids);\r\n\r\nI assume that you have the **Inventory** entity and the **InventoryRepository** interface. The code in your case should look like this:\r\n\r\n**The Entity**\r\n\r\n    @Entity\r\n    public class Inventory implements Serializable {\r\n\r\n      private static final long serialVersionUID = 1L;\r\n\r\n      private Long id;\r\n\r\n      // other fields\r\n      // getters/setters\r\n\r\n    }\r\n\r\n**The Repository**\r\n\r\n    @Repository\r\n    @Transactional\r\n    public interface InventoryRepository extends PagingAndSortingRepository&lt;Inventory, Long&gt; {\r\n\r\n\t  List&lt;Inventory&gt; findByIdIn(List&lt;Long&gt; ids);\r\n\r\n    }\r\n\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#jpa.query-methods.query-creation &quot;here&quot; ","title":"Spring CrudRepository findByInventoryIds(List&lt;Long&gt; inventoryIdList) - equivalent to IN clause","body":"<p>Yes, that is supported.</p>\n\n<p>Check the documentation provided <a href=\"https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#jpa.query-methods.query-creation\" rel=\"noreferrer\" title=\"here\">here</a> for the supported keywords inside method names.</p>\n\n<p>You can just define the method in the repository interface without using the <strong>@Query</strong> annotation and writing your custom query. In your case it would be as followed:</p>\n\n<pre><code>List&lt;Inventory&gt; findByIdIn(List&lt;Long&gt; ids);\n</code></pre>\n\n<p>I assume that you have the <strong>Inventory</strong> entity and the <strong>InventoryRepository</strong> interface. The code in your case should look like this:</p>\n\n<p><strong>The Entity</strong></p>\n\n<pre><code>@Entity\npublic class Inventory implements Serializable {\n\n  private static final long serialVersionUID = 1L;\n\n  private Long id;\n\n  // other fields\n  // getters/setters\n\n}\n</code></pre>\n\n<p><strong>The Repository</strong></p>\n\n<pre><code>@Repository\n@Transactional\npublic interface InventoryRepository extends PagingAndSortingRepository&lt;Inventory, Long&gt; {\n\n  List&lt;Inventory&gt; findByIdIn(List&lt;Long&gt; ids);\n\n}\n</code></pre>\n"}],"owner":{"account_id":1957539,"reputation":5468,"user_id":1760179,"accept_rate":56,"display_name":"Espresso"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":365371,"favorite_count":0,"down_vote_count":1,"up_vote_count":271,"accepted_answer_id":18996367,"answer_count":3,"score":270,"last_activity_date":1674740385,"creation_date":1380040622,"question_id":18987292,"body_markdown":"In Spring CrudRepository, do we have support for &quot;IN clause&quot; for a field? ie something similar to the following? \r\n\r\n\r\n     findByInventoryIds(List&lt;Long&gt; inventoryIdList) \r\n\r\n\r\nIf such support is not available, what elegant options can be considered? Firing queries for each id may not be optimal.","title":"Spring CrudRepository findByInventoryIds(List&lt;Long&gt; inventoryIdList) - equivalent to IN clause","body":"<p>In Spring CrudRepository, do we have support for \"IN clause\" for a field? ie something similar to the following? </p>\n\n<pre><code> findByInventoryIds(List&lt;Long&gt; inventoryIdList) \n</code></pre>\n\n<p>If such support is not available, what elegant options can be considered? Firing queries for each id may not be optimal.</p>\n"},{"tags":["java","metasploit","interactive-shell"],"comments":[{"owner":{"account_id":462194,"reputation":5746,"user_id":864369,"accept_rate":100,"display_name":"Dan W"},"score":0,"creation_date":1522701470,"post_id":49618073,"comment_id":86243923,"body_markdown":"See this answer using the Robot class - https://stackoverflow.com/a/2549184/864369","body":"See this answer using the Robot class - <a href=\"https://stackoverflow.com/a/2549184/864369\">stackoverflow.com/a/2549184/864369</a>"},{"owner":{"account_id":12506710,"reputation":49,"user_id":9103340,"display_name":"Vru26"},"score":0,"creation_date":1522916327,"post_id":49618073,"comment_id":86344682,"body_markdown":"Thank you for your reply but I am still not able to execute commands. I have included an image indicating where I actually want to execute the commands. Using &quot;Robot&quot; class I am able to execute the terminal specific commands on the terminal but I am not able to execute the commands after starting the Metasploit Console.","body":"Thank you for your reply but I am still not able to execute commands. I have included an image indicating where I actually want to execute the commands. Using &quot;Robot&quot; class I am able to execute the terminal specific commands on the terminal but I am not able to execute the commands after starting the Metasploit Console."},{"owner":{"account_id":12506710,"reputation":49,"user_id":9103340,"display_name":"Vru26"},"score":0,"creation_date":1523471823,"post_id":49618073,"comment_id":86579757,"body_markdown":"The above problem has been solved but now when I try to invoke the functions to type the commands by clicking on a button then the actionPerformed function is executed infinite number of times. The commands are typed using the Robot Class as suggested above. Can anyone help me out with this new problem?","body":"The above problem has been solved but now when I try to invoke the functions to type the commands by clicking on a button then the actionPerformed function is executed infinite number of times. The commands are typed using the Robot Class as suggested above. Can anyone help me out with this new problem?"},{"owner":{"account_id":326479,"reputation":34449,"user_id":648265,"accept_rate":88,"display_name":"ivan_pozdeev"},"score":0,"creation_date":1536542206,"post_id":49618073,"comment_id":91447955,"body_markdown":"Possible duplicate of [Running interactive shell program in Java](https://stackoverflow.com/questions/29733038/running-interactive-shell-program-in-java)","body":"Possible duplicate of <a href=\"https://stackoverflow.com/questions/29733038/running-interactive-shell-program-in-java\">Running interactive shell program in Java</a>"}],"owner":{"account_id":12506710,"reputation":49,"user_id":9103340,"display_name":"Vru26"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":587,"favorite_count":0,"down_vote_count":1,"up_vote_count":5,"answer_count":0,"score":4,"last_activity_date":1674740306,"creation_date":1522699643,"question_id":49618073,"body_markdown":"I am trying to develop a UI based app in Java to use Metasploit (OS: Kali Linux). Basically I want to start a terminal and run the command &quot;msfconsole&quot; and then once the Metasploit Framework Console starts I want to execute commands in it.\r\n\r\nUsing ProcessBuilder Class of Java I am able to open up a terminal and start the Metasploit Framework Console but I am unable to execute any commands under the Framework. I am new to Runtime and ProcessBuilder class of Java. After starting the Framework Console, I did try executing the &quot;help&quot; command of the Metasploit Framework but that command was directly executed under the terminal and hence terminal help was displayed. So can anyone help me out with this? The code snippet is given below. Also I have included a supporting image at the end of this post.\r\n\r\n        String line;\r\n        Scanner scan = new Scanner(System.in);\r\n\r\n        ProcessBuilder builder = new ProcessBuilder(&quot;/bin/bash&quot;);\r\n        builder.redirectErrorStream(true);\r\n        Process process = builder.start();\r\n\r\n        OutputStream stdin = process.getOutputStream();\r\n        InputStream stderr = process.getErrorStream();\r\n        InputStream stdout = process.getInputStream();\r\n        BufferedReader reader = new BufferedReader(new InputStreamReader(stdout));\r\n        BufferedWriter writer = new BufferedWriter(new OutputStreamWriter(stdin));\r\n\r\n        String input = scan.nextLine();\r\n        input += &quot;\\n&quot;;\r\n        writer.write(input);\r\n        writer.flush()\r\n\r\n        input = scan.nextLine();\r\n        input += &quot;\\n&quot;;\r\n        writer.write(input);\r\n        writer.flush();\r\n\r\n        while ((line = reader.readLine()) != null) {\r\n            System.out.println(&quot;Stdout: &quot; + line);\r\n        }\r\n        writer.close();\r\n\r\nI have encircled the part where I want to enter the commands. The image shows Metasploit Console running inside a terminal window:\r\n\r\n[![I have encircled the part where I want to enter the commands. The image shows Metasploit Console running inside a terminal window.][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/1d4CT.png","title":"Executing metasploit commands using Java","body":"<p>I am trying to develop a UI based app in Java to use Metasploit (OS: Kali Linux). Basically I want to start a terminal and run the command \"msfconsole\" and then once the Metasploit Framework Console starts I want to execute commands in it.</p>\n\n<p>Using ProcessBuilder Class of Java I am able to open up a terminal and start the Metasploit Framework Console but I am unable to execute any commands under the Framework. I am new to Runtime and ProcessBuilder class of Java. After starting the Framework Console, I did try executing the \"help\" command of the Metasploit Framework but that command was directly executed under the terminal and hence terminal help was displayed. So can anyone help me out with this? The code snippet is given below. Also I have included a supporting image at the end of this post.</p>\n\n<pre><code>    String line;\n    Scanner scan = new Scanner(System.in);\n\n    ProcessBuilder builder = new ProcessBuilder(\"/bin/bash\");\n    builder.redirectErrorStream(true);\n    Process process = builder.start();\n\n    OutputStream stdin = process.getOutputStream();\n    InputStream stderr = process.getErrorStream();\n    InputStream stdout = process.getInputStream();\n    BufferedReader reader = new BufferedReader(new InputStreamReader(stdout));\n    BufferedWriter writer = new BufferedWriter(new OutputStreamWriter(stdin));\n\n    String input = scan.nextLine();\n    input += \"\\n\";\n    writer.write(input);\n    writer.flush()\n\n    input = scan.nextLine();\n    input += \"\\n\";\n    writer.write(input);\n    writer.flush();\n\n    while ((line = reader.readLine()) != null) {\n        System.out.println(\"Stdout: \" + line);\n    }\n    writer.close();\n</code></pre>\n\n<p>I have encircled the part where I want to enter the commands. The image shows Metasploit Console running inside a terminal window:</p>\n\n<p><a href=\"https://i.stack.imgur.com/1d4CT.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1d4CT.png\" alt=\"I have encircled the part where I want to enter the commands. The image shows Metasploit Console running inside a terminal window.\"></a></p>\n"},{"tags":["java","multithreading","httpclient","executorservice"],"owner":{"account_id":149784,"reputation":8168,"user_id":362531,"accept_rate":69,"display_name":"adamw"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":201,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":0,"score":4,"last_activity_date":1674739518,"creation_date":1674739518,"question_id":75246754,"body_markdown":"I&#39;m trying to send an HTTP request using the `HttpClient` bundled with Java (tested using JDK17), but using a custom thread pool / executor. Such an executor can be specified when building the client, as in the code below:\r\n\r\n```java\r\npackage test;\r\n\r\nimport java.io.IOException;\r\nimport java.net.URI;\r\nimport java.net.http.HttpClient;\r\nimport java.net.http.HttpRequest;\r\nimport java.net.http.HttpResponse;\r\nimport java.util.concurrent.ExecutionException;\r\nimport java.util.concurrent.Executors;\r\n\r\npublic class Test {\r\n    public static void main(String[] args) throws IOException, InterruptedException, ExecutionException {\r\n        var executor = Executors.newCachedThreadPool();\r\n        var client = HttpClient.newBuilder().executor(executor).build();\r\n\r\n        client.sendAsync(\r\n                HttpRequest\r\n                        .newBuilder()\r\n                        .uri(URI.create(&quot;https://www.google.com&quot;))\r\n                        .build(),\r\n                HttpResponse.BodyHandlers.ofInputStream()\r\n        ).get();\r\n\r\n        System.out.println(&quot;Done&quot;);\r\n        System.in.read();\r\n    }\r\n}\r\n```\r\n\r\nHowever, some additional threads are always started. One is a `SelectorManager`, which is hard-coded to be started [here](https://github.com/openjdk/jdk/blob/master/src/java.net.http/share/classes/jdk/internal/net/http/HttpClientImpl.java#L507-L531). It has a clear scope and probably needs to be a separate thread. \r\n\r\nAdditionally, when using `.sendAsync`, the default fork-join pool is also *always* started. I think this is due to the [following code in `HttpClient`](https://github.com/openjdk/jdk/blob/master/src/java.net.http/share/classes/jdk/internal/net/http/HttpClientImpl.java#L990-L995):\r\n\r\n```java\r\n// makes sure that any dependent actions happen in the CF default\r\n// executor. This is only needed for sendAsync(...), when\r\n// exchangeExecutor is non-null.\r\nif (exchangeExecutor != null) {\r\n    res = res.whenCompleteAsync((r, t) -&gt; { /* do nothing */}, ASYNC_POOL);\r\n}\r\n```\r\n\r\nI suspect this is needed to always shift any further processing of the response (which might block) to another thread pool (to avoid blocking the thread that processes incoming HTTP data). However:\r\n\r\n1. shouldn&#39;t this shifting happen onto the provided executor, instead of shifting to `ASYNC_POOL` always?\r\n2. is my justification for the existence of the above `HttpClient` snippet correct?\r\n3. maybe there are other reasons why the ForkJoin pool must be started?","title":"Why is the default fork-join pool always started when sending a request using JDK&#39;s HttpClient?","body":"<p>I'm trying to send an HTTP request using the <code>HttpClient</code> bundled with Java (tested using JDK17), but using a custom thread pool / executor. Such an executor can be specified when building the client, as in the code below:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package test;\n\nimport java.io.IOException;\nimport java.net.URI;\nimport java.net.http.HttpClient;\nimport java.net.http.HttpRequest;\nimport java.net.http.HttpResponse;\nimport java.util.concurrent.ExecutionException;\nimport java.util.concurrent.Executors;\n\npublic class Test {\n    public static void main(String[] args) throws IOException, InterruptedException, ExecutionException {\n        var executor = Executors.newCachedThreadPool();\n        var client = HttpClient.newBuilder().executor(executor).build();\n\n        client.sendAsync(\n                HttpRequest\n                        .newBuilder()\n                        .uri(URI.create(&quot;https://www.google.com&quot;))\n                        .build(),\n                HttpResponse.BodyHandlers.ofInputStream()\n        ).get();\n\n        System.out.println(&quot;Done&quot;);\n        System.in.read();\n    }\n}\n</code></pre>\n<p>However, some additional threads are always started. One is a <code>SelectorManager</code>, which is hard-coded to be started <a href=\"https://github.com/openjdk/jdk/blob/master/src/java.net.http/share/classes/jdk/internal/net/http/HttpClientImpl.java#L507-L531\" rel=\"nofollow noreferrer\">here</a>. It has a clear scope and probably needs to be a separate thread.</p>\n<p>Additionally, when using <code>.sendAsync</code>, the default fork-join pool is also <em>always</em> started. I think this is due to the <a href=\"https://github.com/openjdk/jdk/blob/master/src/java.net.http/share/classes/jdk/internal/net/http/HttpClientImpl.java#L990-L995\" rel=\"nofollow noreferrer\">following code in <code>HttpClient</code></a>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>// makes sure that any dependent actions happen in the CF default\n// executor. This is only needed for sendAsync(...), when\n// exchangeExecutor is non-null.\nif (exchangeExecutor != null) {\n    res = res.whenCompleteAsync((r, t) -&gt; { /* do nothing */}, ASYNC_POOL);\n}\n</code></pre>\n<p>I suspect this is needed to always shift any further processing of the response (which might block) to another thread pool (to avoid blocking the thread that processes incoming HTTP data). However:</p>\n<ol>\n<li>shouldn't this shifting happen onto the provided executor, instead of shifting to <code>ASYNC_POOL</code> always?</li>\n<li>is my justification for the existence of the above <code>HttpClient</code> snippet correct?</li>\n<li>maybe there are other reasons why the ForkJoin pool must be started?</li>\n</ol>\n"},{"tags":["java","spring","spring-mvc","spring-data-jpa","thymeleaf"],"comments":[{"owner":{"account_id":13318942,"reputation":3000,"user_id":9614331,"display_name":"Avijit Barua"},"score":0,"creation_date":1537273533,"post_id":52380195,"comment_id":91717417,"body_markdown":"Did you check your database ? Is there data available ?","body":"Did you check your database ? Is there data available ?"},{"owner":{"account_id":2372172,"reputation":366,"user_id":2076538,"accept_rate":81,"display_name":"Vishal Torne"},"score":0,"creation_date":1537308171,"post_id":52380195,"comment_id":91735473,"body_markdown":"Service method?","body":"Service method?"}],"answers":[{"tags":[],"owner":{"account_id":2372172,"reputation":366,"user_id":2076538,"accept_rate":81,"display_name":"Vishal Torne"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1537263217,"creation_date":1537263217,"answer_id":52383446,"question_id":52380195,"body_markdown":"Try to use \r\n\r\n    List&lt;Customer&gt; customers = new customerRepository.findAll();\r\n    Model.addAttribute(&quot;c&quot; , customers);\r\nSee my question for more information https://stackoverflow.com/questions/52114455/store-pictures-in-h2-database-spring-boot-thymleaf","title":"Problem with saving data from Thymeleaf form to database with Spring MVC","body":"<p>Try to use </p>\n\n<pre><code>List&lt;Customer&gt; customers = new customerRepository.findAll();\nModel.addAttribute(\"c\" , customers);\n</code></pre>\n\n<p>See my question for more information <a href=\"https://stackoverflow.com/questions/52114455/store-pictures-in-h2-database-spring-boot-thymleaf\">Store pictures in H2 database spring boot thymleaf</a></p>\n"},{"tags":[],"owner":{"account_id":13786274,"reputation":358,"user_id":9950085,"display_name":"Falcon"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1546638337,"creation_date":1546638337,"answer_id":54046522,"question_id":52380195,"body_markdown":"Another way, with this code:\r\n\r\n      model.addAttribute(&quot;customers&quot;, customerRepository.findAll());\r\n\r\n\r\nfor result template:\r\n\r\n    &lt;th:block th:each=&quot;customer : ${customers}&quot;&gt;\r\n      &lt;td th:text=&quot;${customer.id}&quot;&gt;customer ID&lt;/td&gt;\r\n      &lt;td th:text=&quot;${customer.firstName}&quot;&gt;first name&lt;/td&gt;\r\n      &lt;td th:text=&quot;${customer.lastName}&quot;&gt;last name&lt;/td&gt;\r\n    &lt;/th:block&gt;\r\n\r\n\r\n\r\n","title":"Problem with saving data from Thymeleaf form to database with Spring MVC","body":"<p>Another way, with this code:</p>\n\n<pre><code>  model.addAttribute(\"customers\", customerRepository.findAll());\n</code></pre>\n\n<p>for result template:</p>\n\n<pre><code>&lt;th:block th:each=\"customer : ${customers}\"&gt;\n  &lt;td th:text=\"${customer.id}\"&gt;customer ID&lt;/td&gt;\n  &lt;td th:text=\"${customer.firstName}\"&gt;first name&lt;/td&gt;\n  &lt;td th:text=\"${customer.lastName}\"&gt;last name&lt;/td&gt;\n&lt;/th:block&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9591005,"reputation":53,"user_id":7121896,"display_name":"Mattyas yahya"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1605154616,"creation_date":1605154616,"answer_id":64797850,"question_id":52380195,"body_markdown":"try this :\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-js --&gt;\r\n\r\n    @PostMapping(&quot;/customer&quot;)\r\n    public String createCustomer(Customer customer,BindingResult result)\r\n    {\r\n        if (result.hasErrors())\r\n     {\r\n                return &quot;your error page in here&quot;;\r\n            }\r\n        customerRepository.save(customer);\r\n        return &quot;customer&quot;;\r\n    }\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n","title":"Problem with saving data from Thymeleaf form to database with Spring MVC","body":"<p>try this :</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>@PostMapping(\"/customer\")\npublic String createCustomer(Customer customer,BindingResult result)\n{\n    if (result.hasErrors())\n {\n            return \"your error page in here\";\n        }\n    customerRepository.save(customer);\n    return \"customer\";\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"},{"tags":[],"owner":{"account_id":19396277,"reputation":1,"user_id":14183899,"display_name":"Kyera"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674739472,"creation_date":1674739472,"answer_id":75246748,"question_id":52380195,"body_markdown":"Although this post is already old, I just stumbled upon it when debugging my own code; my answer may still help someone in the future.\r\n\r\nI believe I had a similar issue, where the Thymeleaf form didn&#39;t actually assign values to the entity&#39;s fields. For me the issue was that the entity had no setters for its fields - it looks like you have that problem here as well.","title":"Problem with saving data from Thymeleaf form to database with Spring MVC","body":"<p>Although this post is already old, I just stumbled upon it when debugging my own code; my answer may still help someone in the future.</p>\n<p>I believe I had a similar issue, where the Thymeleaf form didn't actually assign values to the entity's fields. For me the issue was that the entity had no setters for its fields - it looks like you have that problem here as well.</p>\n"}],"owner":{"account_id":12920306,"reputation":81,"user_id":9343040,"display_name":"James121"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2293,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":4,"score":0,"last_activity_date":1674739472,"creation_date":1537252086,"question_id":52380195,"body_markdown":"I&#39;ve just started learning Spring MVC. I try to save some data from the Thymeleaf form to repository, which extends CrudRepository. Unfortunately, the data doesn&#39;t display.\r\n\r\nWhen I go to the results page I see used IDs but no data typed to form. Where is the mistake?\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\nHere is a **Controller**\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    package com.jtm.twiservice.controller;\r\n    import com.jtm.twiservice.Main;\r\n    import com.jtm.twiservice.model.Customer;\r\n    import com.jtm.twiservice.repository.CustomerRepository;\r\n    import org.slf4j.Logger;\r\n    import org.slf4j.LoggerFactory;\r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.stereotype.Controller;\r\n    import org.springframework.ui.Model;\r\n    import org.springframework.web.bind.annotation.*;\r\n\r\n    @Controller\r\n    public class CustomerClientController {\r\n    private static final Logger myLog = LoggerFactory.getLogger(Main.class);\r\n    \r\n    @Autowired\r\n    private CustomerRepository customerRepository;\r\n\r\n    @GetMapping(&quot;/customer&quot;)\r\n    public String customerForm(Model model) {\r\n        model.addAttribute(&quot;customer&quot;, new Customer());\r\n        return &quot;customer&quot;;\r\n    }\r\n\r\n    @PostMapping(&quot;/customer&quot;)\r\n    public String createCustomer(Customer customer, Model model) {\r\n        customerRepository.save(customer);\r\n        return &quot;customer&quot;;\r\n    }\r\n\r\n    @GetMapping(&quot;/customers&quot;)\r\n    public String getCustomers(Model model) {\r\n        model.addAttribute(&quot;customers&quot;, customerRepository.findAll());\r\n        return &quot;customers;\r\n    }\r\n    }\r\n\r\n`**Model**:\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    package com.jtm.twiservice.model;\r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n\r\n    import javax.persistence.Entity;\r\n    import javax.persistence.GeneratedValue;\r\n    import javax.persistence.GenerationType;\r\n    import javax.persistence.Id;\r\n\r\n    @Entity\r\n    public class Customer {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy=GenerationType.AUTO)\r\n    private Long id;\r\n    private String firstName;\r\n    private String lastName;\r\n    private String email;\r\n    private String schoolForm;\r\n\r\n    public Customer() {}\r\n\r\n    public Customer(String firstName, String lastName, String email, String schoolForm) {\r\n        this.firstName = firstName;\r\n        this.lastName = lastName;\r\n        this.email = email;\r\n        this.schoolForm = schoolForm;\r\n    }\r\n\r\n    @Override\r\n    public String toString() {\r\n        return String.format(\r\n                &quot;Customer[id=%d, firstName=&#39;%s&#39;, lastName=&#39;%s&#39;, email=&#39;%s&#39;, schoolForm=&#39;%s&#39;]&quot;,\r\n                id, firstName, lastName, email, schoolForm);\r\n    }\r\n\r\n    public Long getId() {\r\n        return id;\r\n    }\r\n\r\n    public String getFirstName() {\r\n        return firstName;\r\n    }\r\n\r\n    public String getLastName() {\r\n        return lastName;\r\n    }\r\n\r\n    public String getEmail() {\r\n        return email;\r\n    }\r\n\r\n    public String getSchoolForm() {\r\n        return schoolForm;\r\n    }\r\n    }\r\n\r\n**repository**:\r\n        \r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    package com.jtm.twiservice.repository;\r\n\r\n    import com.jtm.twiservice.model.Customer;\r\n    import org.springframework.data.repository.CrudRepository;\r\n\r\n    public interface CustomerRepository extends CrudRepository&lt;Customer, Long&gt; { }\r\n\r\n**form** extract:\r\n\r\n&lt;!-- language: lang-xml --&gt;\r\n\r\n            &lt;form action=&quot;#&quot; th:action=&quot;@{/customer}&quot; th:object=&quot;${customer}&quot; method=&quot;post&quot;&gt;\r\n                &lt;p class=&quot;text&quot;&gt;&lt;label&gt;first name:&lt;/label&gt;  &lt;input type=&quot;text&quot; th:field=&quot;*{firstName}&quot; /&gt;&lt;/p&gt;\r\n                &lt;p class=&quot;text&quot;&gt;&lt;label&gt;last name:&lt;/label&gt; &lt;input type=&quot;text&quot; th:field=&quot;*{lastName}&quot; /&gt;&lt;/p\r\n                &lt;p class=&quot;text&quot;&gt;&lt;label&gt;school form:&lt;/label&gt; &lt;input type=&quot;text&quot; th:field=&quot;*{schoolForm}&quot; /&gt;&lt;/p&gt;\r\n                &lt;div class=&quot;text&quot;&gt;email: &lt;input type=&quot;text&quot; th:field=&quot;*{email}&quot; /&gt;&lt;/div&gt;\r\n                &lt;p&gt;&lt;input type=&quot;submit&quot; value=&quot;Submit&quot; /&gt; &lt;input type=&quot;reset&quot; value=&quot;Reset&quot; /&gt; &lt;/p&gt;\r\n\r\n            &lt;/form&gt;\r\nAnd extract from **results template**:\r\n\r\n&lt;!-- language: lang-xml --&gt;    \r\n\r\n    &lt;td th:text=&quot;${customer.id}&quot;&gt;customer ID&lt;/td&gt;\r\n    &lt;td th:text=&quot;${customer.firstName}&quot;&gt;first name&lt;/td&gt;\r\n    &lt;td th:text=&quot;${customer.lastName}&quot;&gt;last name&lt;/td&gt;\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/fdT9a.png","title":"Problem with saving data from Thymeleaf form to database with Spring MVC","body":"<p>I've just started learning Spring MVC. I try to save some data from the Thymeleaf form to repository, which extends CrudRepository. Unfortunately, the data doesn't display.</p>\n\n<p>When I go to the results page I see used IDs but no data typed to form. Where is the mistake?</p>\n\n<p><a href=\"https://i.stack.imgur.com/fdT9a.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/fdT9a.png\" alt=\"enter image description here\"></a></p>\n\n<p>Here is a <strong>Controller</strong></p>\n\n<pre class=\"lang-java prettyprint-override\"><code>package com.jtm.twiservice.controller;\nimport com.jtm.twiservice.Main;\nimport com.jtm.twiservice.model.Customer;\nimport com.jtm.twiservice.repository.CustomerRepository;\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Controller;\nimport org.springframework.ui.Model;\nimport org.springframework.web.bind.annotation.*;\n\n@Controller\npublic class CustomerClientController {\nprivate static final Logger myLog = LoggerFactory.getLogger(Main.class);\n\n@Autowired\nprivate CustomerRepository customerRepository;\n\n@GetMapping(\"/customer\")\npublic String customerForm(Model model) {\n    model.addAttribute(\"customer\", new Customer());\n    return \"customer\";\n}\n\n@PostMapping(\"/customer\")\npublic String createCustomer(Customer customer, Model model) {\n    customerRepository.save(customer);\n    return \"customer\";\n}\n\n@GetMapping(\"/customers\")\npublic String getCustomers(Model model) {\n    model.addAttribute(\"customers\", customerRepository.findAll());\n    return \"customers;\n}\n}\n</code></pre>\n\n<p>`<strong>Model</strong>:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>package com.jtm.twiservice.model;\nimport org.springframework.beans.factory.annotation.Autowired;\n\nimport javax.persistence.Entity;\nimport javax.persistence.GeneratedValue;\nimport javax.persistence.GenerationType;\nimport javax.persistence.Id;\n\n@Entity\npublic class Customer {\n\n@Id\n@GeneratedValue(strategy=GenerationType.AUTO)\nprivate Long id;\nprivate String firstName;\nprivate String lastName;\nprivate String email;\nprivate String schoolForm;\n\npublic Customer() {}\n\npublic Customer(String firstName, String lastName, String email, String schoolForm) {\n    this.firstName = firstName;\n    this.lastName = lastName;\n    this.email = email;\n    this.schoolForm = schoolForm;\n}\n\n@Override\npublic String toString() {\n    return String.format(\n            \"Customer[id=%d, firstName='%s', lastName='%s', email='%s', schoolForm='%s']\",\n            id, firstName, lastName, email, schoolForm);\n}\n\npublic Long getId() {\n    return id;\n}\n\npublic String getFirstName() {\n    return firstName;\n}\n\npublic String getLastName() {\n    return lastName;\n}\n\npublic String getEmail() {\n    return email;\n}\n\npublic String getSchoolForm() {\n    return schoolForm;\n}\n}\n</code></pre>\n\n<p><strong>repository</strong>:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>package com.jtm.twiservice.repository;\n\nimport com.jtm.twiservice.model.Customer;\nimport org.springframework.data.repository.CrudRepository;\n\npublic interface CustomerRepository extends CrudRepository&lt;Customer, Long&gt; { }\n</code></pre>\n\n<p><strong>form</strong> extract:</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>        &lt;form action=\"#\" th:action=\"@{/customer}\" th:object=\"${customer}\" method=\"post\"&gt;\n            &lt;p class=\"text\"&gt;&lt;label&gt;first name:&lt;/label&gt;  &lt;input type=\"text\" th:field=\"*{firstName}\" /&gt;&lt;/p&gt;\n            &lt;p class=\"text\"&gt;&lt;label&gt;last name:&lt;/label&gt; &lt;input type=\"text\" th:field=\"*{lastName}\" /&gt;&lt;/p\n            &lt;p class=\"text\"&gt;&lt;label&gt;school form:&lt;/label&gt; &lt;input type=\"text\" th:field=\"*{schoolForm}\" /&gt;&lt;/p&gt;\n            &lt;div class=\"text\"&gt;email: &lt;input type=\"text\" th:field=\"*{email}\" /&gt;&lt;/div&gt;\n            &lt;p&gt;&lt;input type=\"submit\" value=\"Submit\" /&gt; &lt;input type=\"reset\" value=\"Reset\" /&gt; &lt;/p&gt;\n\n        &lt;/form&gt;\n</code></pre>\n\n<p>And extract from <strong>results template</strong>:</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;td th:text=\"${customer.id}\"&gt;customer ID&lt;/td&gt;\n&lt;td th:text=\"${customer.firstName}\"&gt;first name&lt;/td&gt;\n&lt;td th:text=\"${customer.lastName}\"&gt;last name&lt;/td&gt;\n</code></pre>\n"},{"tags":["java","criteria-api"],"comments":[{"owner":{"account_id":465793,"reputation":16048,"user_id":870122,"accept_rate":88,"display_name":"perissf"},"score":0,"creation_date":1491836892,"post_id":43322504,"comment_id":73717810,"body_markdown":"What do you mean by `where p1 and p2 or p3`? `where (p1 and p2) or p3`? `where p1 and (p2 or p3)`?","body":"What do you mean by <code>where p1 and p2 or p3</code>? <code>where (p1 and p2) or p3</code>? <code>where p1 and (p2 or p3)</code>?"}],"answers":[{"tags":[],"owner":{"account_id":465793,"reputation":16048,"user_id":870122,"accept_rate":88,"display_name":"perissf"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1491901885,"creation_date":1491839083,"answer_id":43327590,"question_id":43322504,"body_markdown":"Simply combine your arrays of predicates into simple predicates, using [`CriteriaBuilder.and(Predicate... restrictions)`][1] and [`CriteriaBuilder.or(Predicate... restrictions)`][2]\r\n\r\nFor getting `where (p1 and p2) or p3`, where `p1`, `p2` and `p3` are all arrays of predicates concatenated with `and` statements:\r\n\r\n    Predicate[] p1 = new Predicate[2];\r\n    Predicate[] p2 = new Predicate[2];\r\n    Predicate[] p3 = new Predicate[2];\r\n    // add your predicates to the arrays.     \r\n    Predicate p1all = cb.and(p1);    \r\n    Predicate p2all = cb.and(p2);\r\n    Predicate p3all = cb.and(p3);\r\n    Predicate pFinal = cb.or(cb.and(p1all, p2all), p3all);\r\n    criteria.where(pFinal);\r\n\r\nFor getting `where p1 and (p2 or p3)`:\r\n\r\n    Predicate pFinal = cb.and(cb.or(p2all, p3all), p1all);\r\n    criteria.where(pFinal);\r\n\r\nFinally, if you want to build a single predicate by concatenating an array of predicates with `or` statements, use this:\r\n\r\n    Predicate p1all = cb.or(p1); \r\n\r\n\r\n  [1]: http://docs.oracle.com/javaee/6/api/javax/persistence/criteria/CriteriaBuilder.html#and(javax.persistence.criteria.Predicate...)\r\n  [2]: http://docs.oracle.com/javaee/6/api/javax/persistence/criteria/CriteriaBuilder.html#or(javax.persistence.criteria.Predicate...)","title":"Criteria query combine and predicates and or predicates in where method","body":"<p>Simply combine your arrays of predicates into simple predicates, using <a href=\"http://docs.oracle.com/javaee/6/api/javax/persistence/criteria/CriteriaBuilder.html#and(javax.persistence.criteria.Predicate...)\" rel=\"nofollow noreferrer\"><code>CriteriaBuilder.and(Predicate... restrictions)</code></a> and <a href=\"http://docs.oracle.com/javaee/6/api/javax/persistence/criteria/CriteriaBuilder.html#or(javax.persistence.criteria.Predicate...)\" rel=\"nofollow noreferrer\"><code>CriteriaBuilder.or(Predicate... restrictions)</code></a></p>\n\n<p>For getting <code>where (p1 and p2) or p3</code>, where <code>p1</code>, <code>p2</code> and <code>p3</code> are all arrays of predicates concatenated with <code>and</code> statements:</p>\n\n<pre><code>Predicate[] p1 = new Predicate[2];\nPredicate[] p2 = new Predicate[2];\nPredicate[] p3 = new Predicate[2];\n// add your predicates to the arrays.     \nPredicate p1all = cb.and(p1);    \nPredicate p2all = cb.and(p2);\nPredicate p3all = cb.and(p3);\nPredicate pFinal = cb.or(cb.and(p1all, p2all), p3all);\ncriteria.where(pFinal);\n</code></pre>\n\n<p>For getting <code>where p1 and (p2 or p3)</code>:</p>\n\n<pre><code>Predicate pFinal = cb.and(cb.or(p2all, p3all), p1all);\ncriteria.where(pFinal);\n</code></pre>\n\n<p>Finally, if you want to build a single predicate by concatenating an array of predicates with <code>or</code> statements, use this:</p>\n\n<pre><code>Predicate p1all = cb.or(p1); \n</code></pre>\n"},{"tags":[],"owner":{"account_id":1570860,"reputation":384,"user_id":1458576,"accept_rate":50,"display_name":"ieselisra"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674739214,"creation_date":1674738792,"answer_id":75246601,"question_id":43322504,"body_markdown":"By default all predicates are understood as &quot;AND&quot;.\r\n\r\nYou can &quot;play&quot; adding more complexity to the predicates using cb.and / cb.or (nested if needed)\r\n\r\nYou can create a list like this:\r\n\r\n    Root&lt;BeanA&gt; queryRoot = cq.from(BeanA.class);\r\n    \r\n    List&lt;Predicate&gt; predicates = new ArrayList&lt;&gt;();\r\n    predicates.add(cb.equal(queryRoot.get(&quot;id&quot;), valueA);\r\n    predicates.add(cb.or(\r\n                    cb.equal(queryRoot.get(&quot;id&quot;), valueA,\r\n                    cb.equal(queryRoot.get(&quot;id&quot;), valueB\r\n            ));\r\n    predicates.add(cb.and(\r\n           cb.equal(queryRoot.get(&quot;valueC&quot;), valueC),\r\n           cb.or(\r\n                 cb.equal(queryRoot.get(&quot;id&quot;), valueA,\r\n                 cb.equal(queryRoot.get(&quot;id&quot;), valueB\r\n            ))\r\n    );\r\n    \r\n    cq.where(predicates.toArray(Predicate[]::new));\r\n\r\n\r\nIf needed, you can use a multiselect too (adding here the result of subqueries if you want to handle them)\r\n\r\n     List&lt;Selection&gt; selectList = new ArrayList&lt;&gt;();\r\n\r\n     selectList.add(queryRoot.get(&quot;id&quot;));\r\n     selectList.add(queryRoot.get(&quot;title&quot;));\r\n\r\n     cq.multiselect(selectList.toArray(Selection[]::new));\r\n\r\n\r\nAfter adding a multiselect you could need an orderBy.\r\nyou can follow the same concept but using a Expression list\r\n\r\n    List&lt;Expression&gt; groupByList = new ArrayList&lt;&gt;();\r\n\r\n    groupByList.add(proyectoJoin.get(&quot;id&quot;));\r\n    groupByList.add(proyectoJoin.get(&quot;title&quot;));\r\n     \r\n    cq.groupBy(groupByList.toArray(Expression[]::new));","title":"Criteria query combine and predicates and or predicates in where method","body":"<p>By default all predicates are understood as &quot;AND&quot;.</p>\n<p>You can &quot;play&quot; adding more complexity to the predicates using cb.and / cb.or (nested if needed)</p>\n<p>You can create a list like this:</p>\n<pre><code>Root&lt;BeanA&gt; queryRoot = cq.from(BeanA.class);\n\nList&lt;Predicate&gt; predicates = new ArrayList&lt;&gt;();\npredicates.add(cb.equal(queryRoot.get(&quot;id&quot;), valueA);\npredicates.add(cb.or(\n                cb.equal(queryRoot.get(&quot;id&quot;), valueA,\n                cb.equal(queryRoot.get(&quot;id&quot;), valueB\n        ));\npredicates.add(cb.and(\n       cb.equal(queryRoot.get(&quot;valueC&quot;), valueC),\n       cb.or(\n             cb.equal(queryRoot.get(&quot;id&quot;), valueA,\n             cb.equal(queryRoot.get(&quot;id&quot;), valueB\n        ))\n);\n\ncq.where(predicates.toArray(Predicate[]::new));\n</code></pre>\n<p>If needed, you can use a multiselect too (adding here the result of subqueries if you want to handle them)</p>\n<pre><code> List&lt;Selection&gt; selectList = new ArrayList&lt;&gt;();\n\n selectList.add(queryRoot.get(&quot;id&quot;));\n selectList.add(queryRoot.get(&quot;title&quot;));\n\n cq.multiselect(selectList.toArray(Selection[]::new));\n</code></pre>\n<p>After adding a multiselect you could need an orderBy.\nyou can follow the same concept but using a Expression list</p>\n<pre><code>List&lt;Expression&gt; groupByList = new ArrayList&lt;&gt;();\n\ngroupByList.add(proyectoJoin.get(&quot;id&quot;));\ngroupByList.add(proyectoJoin.get(&quot;title&quot;));\n \ncq.groupBy(groupByList.toArray(Expression[]::new));\n</code></pre>\n"}],"owner":{"account_id":7279932,"reputation":724,"user_id":5550041,"accept_rate":56,"display_name":"V&#237;ctor G&#243;mez"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7490,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":43327590,"answer_count":2,"score":1,"last_activity_date":1674739214,"creation_date":1491825365,"question_id":43322504,"body_markdown":"The `where` method of CriteriBuilder \r\n\r\n&gt; restricts the query result according to the conjunction of the specified restriction predicates\r\n\r\nIn other words, concatenate all predicates with AND. I pass a list of predicates to this method in this way:\r\n\r\n    criteria.where(preds.toArray(new Predicate[0]));\r\n\r\nThe result query is something like this:\r\n\r\n    ... where p1 and p2 and p3\r\n\r\nhowever what I need is:\r\n\r\n    ... where p1 and p2 or p3\r\n\r\nI tried to use two list of preds, one for &quot;ANDS&quot; and another one for &quot;ORS&quot;:\r\n\r\n    if(preds.isEmpty() &amp;&amp; !orPreds.isEmpty()) {\r\n\t    criteria.where(cb.or(orPreds.toArray(new Predicate[orPreds.size()])));\r\n\t}\r\n\telse if(!preds.isEmpty() &amp;&amp; !orPreds.isEmpty()) {\r\n\t    criteria.where(cb.and(preds.toArray(new Predicate[preds.size()])), \r\n        cb.or(orPreds.toArray(new Predicate[orPreds.size()])));\r\n\t}\r\n\telse {\r\n\t    criteria.where(preds.toArray(new Predicate[0]));\r\n\t}\r\n\r\nBut the result query is the same:\r\n\r\n    ... where p1 and p2 and p3\r\n\r\nAny idea?","title":"Criteria query combine and predicates and or predicates in where method","body":"<p>The <code>where</code> method of CriteriBuilder </p>\n\n<blockquote>\n  <p>restricts the query result according to the conjunction of the specified restriction predicates</p>\n</blockquote>\n\n<p>In other words, concatenate all predicates with AND. I pass a list of predicates to this method in this way:</p>\n\n<pre><code>criteria.where(preds.toArray(new Predicate[0]));\n</code></pre>\n\n<p>The result query is something like this:</p>\n\n<pre><code>... where p1 and p2 and p3\n</code></pre>\n\n<p>however what I need is:</p>\n\n<pre><code>... where p1 and p2 or p3\n</code></pre>\n\n<p>I tried to use two list of preds, one for \"ANDS\" and another one for \"ORS\":</p>\n\n<pre><code>if(preds.isEmpty() &amp;&amp; !orPreds.isEmpty()) {\n    criteria.where(cb.or(orPreds.toArray(new Predicate[orPreds.size()])));\n}\nelse if(!preds.isEmpty() &amp;&amp; !orPreds.isEmpty()) {\n    criteria.where(cb.and(preds.toArray(new Predicate[preds.size()])), \n    cb.or(orPreds.toArray(new Predicate[orPreds.size()])));\n}\nelse {\n    criteria.where(preds.toArray(new Predicate[0]));\n}\n</code></pre>\n\n<p>But the result query is the same:</p>\n\n<pre><code>... where p1 and p2 and p3\n</code></pre>\n\n<p>Any idea?</p>\n"},{"tags":["java","kotlin"],"owner":{"account_id":24365613,"reputation":36,"user_id":18299392,"display_name":"cls_404"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":405,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1674739045,"creation_date":1674739045,"question_id":75246662,"body_markdown":"Im getting this error.&lt;br/&gt; What I was doing was the code I want to run didnt run rather it showed up the **Edit Configurations**&lt;br/&gt;\r\n&lt;br/&gt;The error: ```Failed to download Amazon Corretto 18.0.2. EventQueue.isDispatchThread()=false Current thread: Thread[ApplicationImpl pooled thread 110,4,main] 2031890033 SystemEventQueueThread: Thread[AWT-EventQueue-0,6,main] 1808191328```&lt;br/&gt;\r\n\r\n&lt;br/&gt; This was what I was trying to fix: [Image][1] ``` Cannot access &#39;java.io.Serializable&#39; which is a supertype of &#39;kotlin.Array&#39;. Check your module classpath for missing or conflicting dependencies ```\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/vmT0a.png\r\n\r\nAnd it says that the **JDK &quot;corretto-18&quot; is not found on the disk or corrupted**.\r\n&lt;br/&gt;&lt;br/&gt;Im using: IntelliJ up to date, Java 18\r\n\r\nDoes anyone has a solution for this issue??\r\n\r\nThanks-","title":"Error on Intellij Idea when trying to run a kotlin project","body":"<p>Im getting this error.<br/> What I was doing was the code I want to run didnt run rather it showed up the <strong>Edit Configurations</strong><br/>\n<br/>The error: <code>Failed to download Amazon Corretto 18.0.2. EventQueue.isDispatchThread()=false Current thread: Thread[ApplicationImpl pooled thread 110,4,main] 2031890033 SystemEventQueueThread: Thread[AWT-EventQueue-0,6,main] 1808191328</code><br/></p>\n<p><br/> This was what I was trying to fix: <a href=\"https://i.stack.imgur.com/vmT0a.png\" rel=\"nofollow noreferrer\">Image</a> <code>Cannot access 'java.io.Serializable' which is a supertype of 'kotlin.Array'. Check your module classpath for missing or conflicting dependencies</code></p>\n<p>And it says that the <strong>JDK &quot;corretto-18&quot; is not found on the disk or corrupted</strong>.\n<br/><br/>Im using: IntelliJ up to date, Java 18</p>\n<p>Does anyone has a solution for this issue??</p>\n<p>Thanks-</p>\n"},{"tags":["java","jpa","criteria"],"comments":[{"owner":{"account_id":228790,"reputation":2446,"user_id":491320,"accept_rate":85,"display_name":"danizmax"},"score":0,"creation_date":1433493843,"post_id":18958614,"comment_id":49386422,"body_markdown":"possible duplicate of [Union All and Sum with JPA CriteriaBuilder](http://stackoverflow.com/questions/9104989/union-all-and-sum-with-jpa-criteriabuilder)","body":"possible duplicate of <a href=\"http://stackoverflow.com/questions/9104989/union-all-and-sum-with-jpa-criteriabuilder\">Union All and Sum with JPA CriteriaBuilder</a>"}],"answers":[{"tags":[],"owner":{"account_id":1319573,"reputation":21851,"user_id":1265660,"accept_rate":75,"display_name":"Masudul"},"down_vote_count":0,"up_vote_count":45,"is_accepted":true,"score":45,"last_activity_date":1550601302,"creation_date":1379937870,"answer_id":18958802,"question_id":18958614,"body_markdown":"SQL supports UNION, but JPA 2.0 JPQL does not. Most unions can be done in terms of joins, but some can not, and some are more difficult to express using joins.\r\n\r\nEclipseLink supports UNION.","title":"UNION to JPA Query","body":"<p>SQL supports UNION, but JPA 2.0 JPQL does not. Most unions can be done in terms of joins, but some can not, and some are more difficult to express using joins.</p>\n\n<p>EclipseLink supports UNION.</p>\n"},{"tags":[],"owner":{"account_id":4845979,"reputation":809,"user_id":3909596,"display_name":"szczepanpp"},"down_vote_count":0,"up_vote_count":44,"is_accepted":false,"score":44,"last_activity_date":1407231372,"creation_date":1407231372,"answer_id":25135559,"question_id":18958614,"body_markdown":"Depending on the case, one could use sub queries, something like:\r\n\r\n    select e\r\n    from Entity e\r\n    where e.id in\r\n    (\r\n      select e.id\r\n      from Entity2 e2\r\n           join e2.entity e\r\n      where e2.someProperty = &#39;value&#39;\r\n    )\r\n          or e.id in\r\n    (\r\n      select e.id\r\n      from Entity3 e3\r\n           join e3.entity e\r\n      where e3.someProperty = &#39;value2&#39;\r\n    )\r\n\r\n","title":"UNION to JPA Query","body":"<p>Depending on the case, one could use sub queries, something like:</p>\n\n<pre><code>select e\nfrom Entity e\nwhere e.id in\n(\n  select e.id\n  from Entity2 e2\n       join e2.entity e\n  where e2.someProperty = 'value'\n)\n      or e.id in\n(\n  select e.id\n  from Entity3 e3\n       join e3.entity e\n  where e3.someProperty = 'value2'\n)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1811553,"reputation":1736,"user_id":1647509,"display_name":"cslotty"},"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1471358680,"creation_date":1471357365,"answer_id":38977477,"question_id":18958614,"body_markdown":"One thing just comes to my mind (searching for the exact same problem): \r\n\r\nPerform two different JPA queries on the same entity mapping and simply add the objects of the second result to the list (or set to avoid duplicates) of the first result.\r\n\r\nThat way you get the same effect as with a UNION, the difference being that you use two SQL statements instead of one. But actually, I would expect that to perform just as good as issueing one UNION statement.","title":"UNION to JPA Query","body":"<p>One thing just comes to my mind (searching for the exact same problem): </p>\n\n<p>Perform two different JPA queries on the same entity mapping and simply add the objects of the second result to the list (or set to avoid duplicates) of the first result.</p>\n\n<p>That way you get the same effect as with a UNION, the difference being that you use two SQL statements instead of one. But actually, I would expect that to perform just as good as issueing one UNION statement.</p>\n"},{"tags":[],"owner":{"account_id":3343454,"reputation":11,"user_id":2809140,"display_name":"Aman Sehgal"},"down_vote_count":4,"up_vote_count":0,"is_accepted":false,"score":-4,"last_activity_date":1490876573,"creation_date":1490876573,"answer_id":43117761,"question_id":18958614,"body_markdown":"You can directly use UNION in your query.\r\nThe following query returns id of friends from FRIENDSHIP table.\r\n \r\nEg:\r\n\r\n    TypedQuery&lt;String&gt; queryFriend = em.createQuery(&quot;SELECT f.Id FROM Friendship f WHERE f.frStuId = :stuId UNION &quot;\r\n                                     + &quot;SELECT f.frStuId FROM Friendship f WHERE f.FriendId = :stuId&quot;, String.class);\r\n    queryFriend.setParameter(&quot;stuId&quot;, stuId);\r\n        \r\n    List&lt;String&gt; futureFriends = queryFriend.getResultList();","title":"UNION to JPA Query","body":"<p>You can directly use UNION in your query.\nThe following query returns id of friends from FRIENDSHIP table.</p>\n\n<p>Eg:</p>\n\n<pre><code>TypedQuery&lt;String&gt; queryFriend = em.createQuery(\"SELECT f.Id FROM Friendship f WHERE f.frStuId = :stuId UNION \"\n                                 + \"SELECT f.frStuId FROM Friendship f WHERE f.FriendId = :stuId\", String.class);\nqueryFriend.setParameter(\"stuId\", stuId);\n\nList&lt;String&gt; futureFriends = queryFriend.getResultList();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10693952,"reputation":115,"user_id":7871836,"display_name":"Thieu Anh"},"down_vote_count":3,"up_vote_count":4,"is_accepted":false,"score":1,"last_activity_date":1529562777,"creation_date":1529562777,"answer_id":50961822,"question_id":18958614,"body_markdown":"using EntityManager.createNativeQuery(...);\r\nIt&#39;s allow you use UNION","title":"UNION to JPA Query","body":"<p>using EntityManager.createNativeQuery(...);\nIt's allow you use UNION</p>\n"},{"tags":[],"owner":{"account_id":8088812,"reputation":4423,"user_id":6095444,"display_name":"Pravin Bansal"},"down_vote_count":2,"up_vote_count":11,"is_accepted":false,"score":9,"last_activity_date":1550273325,"creation_date":1550273325,"answer_id":54718344,"question_id":18958614,"body_markdown":"write native query (set it true , default its false) - ex.\r\n\r\n    String findQuery = &quot;select xyz from abc union select abc from def&quot;\r\n    @Query(value = findQuery, nativeQuery = true)\r\n    //method","title":"UNION to JPA Query","body":"<p>write native query (set it true , default its false) - ex.</p>\n\n<pre><code>String findQuery = \"select xyz from abc union select abc from def\"\n@Query(value = findQuery, nativeQuery = true)\n//method\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7184343,"reputation":850,"user_id":5486945,"display_name":"yOshi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1553267377,"creation_date":1553266981,"answer_id":55302501,"question_id":18958614,"body_markdown":"There is no direct union for JPA, what I did was to build two specifications.\r\n\r\n    Specification&lt;Task&gt; specification = Specification.where(null);\r\n    Specification&lt;Task&gt; specification2 = Specification.where(null;\r\n\r\nThey belong to a single table but return different values\r\n\r\n    specification = specification.and((root, criteriaQuery, criteriaBuilder) -&gt; criteriaBuilder.equal(criteriaBuilder.function(MONTH, Integer.class, root.get(&quot;deliveryExpirationDate&quot;)), month));\r\n            specification2 = specification2.and((root, criteriaQuery, criteriaBuilder) -&gt; criteriaBuilder.lessThan(criteriaBuilder.function(MONTH, Integer.class, root.get(&quot;deliveryExpirationDate&quot;)), month))\r\n                .and((root, criteriaQuery, criteriaBuilder) -&gt; criteriaBuilder.equal(root.get(&quot;enable&quot;), true));\r\n\r\nfor this example it is a table of tasks that in the first specification I need the tasks of the current month enabled and disabled, and in the second specification I only need the tasks enabled of the previous months.\r\n\r\n    Specification&lt;Task&gt; specificationFullJoin = Specification.where(specification).or(specification2);\r\n\r\nEsto es muy &#250;til para que la lista de tareas devueltas tenga paginaci&#243;n.\r\n\r\n    taskRepository.findAll(specificationFullJoin, pageable).map(TaskResponse::new); //Here you can continue adding filters, sort or search.\r\n\r\nIt helps me a lot, I hope it is what they are looking for or that it serves them something.\r\n\r\n\r\n","title":"UNION to JPA Query","body":"<p>There is no direct union for JPA, what I did was to build two specifications.</p>\n\n<pre><code>Specification&lt;Task&gt; specification = Specification.where(null);\nSpecification&lt;Task&gt; specification2 = Specification.where(null;\n</code></pre>\n\n<p>They belong to a single table but return different values</p>\n\n<pre><code>specification = specification.and((root, criteriaQuery, criteriaBuilder) -&gt; criteriaBuilder.equal(criteriaBuilder.function(MONTH, Integer.class, root.get(\"deliveryExpirationDate\")), month));\n        specification2 = specification2.and((root, criteriaQuery, criteriaBuilder) -&gt; criteriaBuilder.lessThan(criteriaBuilder.function(MONTH, Integer.class, root.get(\"deliveryExpirationDate\")), month))\n            .and((root, criteriaQuery, criteriaBuilder) -&gt; criteriaBuilder.equal(root.get(\"enable\"), true));\n</code></pre>\n\n<p>for this example it is a table of tasks that in the first specification I need the tasks of the current month enabled and disabled, and in the second specification I only need the tasks enabled of the previous months.</p>\n\n<pre><code>Specification&lt;Task&gt; specificationFullJoin = Specification.where(specification).or(specification2);\n</code></pre>\n\n<p>Esto es muy útil para que la lista de tareas devueltas tenga paginación.</p>\n\n<pre><code>taskRepository.findAll(specificationFullJoin, pageable).map(TaskResponse::new); //Here you can continue adding filters, sort or search.\n</code></pre>\n\n<p>It helps me a lot, I hope it is what they are looking for or that it serves them something.</p>\n"},{"tags":[],"owner":{"account_id":4790702,"reputation":21,"user_id":3869979,"display_name":"user3869979"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1656234448,"creation_date":1656234448,"answer_id":72760234,"question_id":18958614,"body_markdown":"I have solved this in my project.\r\n\r\n**Union/Union All will work if you change it to native query and use like below** \r\n\r\n    //In Your Entity class\r\n    @NamedNativeQuery(name=&quot;EntityClassName.functionName&quot;, \r\n    query=&quot;your_native_query&quot;)\r\n\r\n    //In your Repository class\r\n    @Query(native=true)\r\n    List&lt;Result&gt; functionName();\r\n\r\n**Below method of defining Native query in JPA repository will not solve this problem** \r\n\r\n    @Query(value=&quot;your_native_query&quot;, native=true)\r\n\r\n will not","title":"UNION to JPA Query","body":"<p>I have solved this in my project.</p>\n<p><strong>Union/Union All will work if you change it to native query and use like below</strong></p>\n<pre><code>//In Your Entity class\n@NamedNativeQuery(name=&quot;EntityClassName.functionName&quot;, \nquery=&quot;your_native_query&quot;)\n\n//In your Repository class\n@Query(native=true)\nList&lt;Result&gt; functionName();\n</code></pre>\n<p><strong>Below method of defining Native query in JPA repository will not solve this problem</strong></p>\n<pre><code>@Query(value=&quot;your_native_query&quot;, native=true)\n</code></pre>\n<p>will not</p>\n"}],"owner":{"account_id":3168929,"reputation":753,"user_id":2678337,"accept_rate":80,"display_name":"Giovane"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":121378,"favorite_count":0,"down_vote_count":0,"up_vote_count":46,"accepted_answer_id":18958802,"answer_count":8,"score":46,"last_activity_date":1674738965,"creation_date":1379937337,"question_id":18958614,"body_markdown":"Is it possible to query &quot;UNION&quot; in JPA and even &quot;Criteria Builder&quot;?\r\n\r\nI&#39;m looking for examples, but so far i got no result.\r\n\r\nDoes anyone have any examples of how to use it?\r\n\r\nOr would that be with native sql?","title":"UNION to JPA Query","body":"<p>Is it possible to query \"UNION\" in JPA and even \"Criteria Builder\"?</p>\n\n<p>I'm looking for examples, but so far i got no result.</p>\n\n<p>Does anyone have any examples of how to use it?</p>\n\n<p>Or would that be with native sql?</p>\n"},{"tags":["java","maven","pom.xml","dependency-management"],"comments":[{"owner":{"account_id":19716283,"reputation":79,"user_id":14435654,"display_name":"mrxaxen"},"score":0,"creation_date":1674216388,"post_id":75183519,"comment_id":132671875,"body_markdown":"It seems maven can&#39;t find the package `com.hcb.neurotec.migrations.conversion` in the poms. Are you sure you have included it?","body":"It seems maven can&#39;t find the package <code>com.hcb.neurotec.migrations.conversion</code> in the poms. Are you sure you have included it?"},{"owner":{"account_id":9531412,"reputation":2010,"user_id":7082956,"display_name":"Valerij Dobler"},"score":0,"creation_date":1674218810,"post_id":75183519,"comment_id":132672634,"body_markdown":"Did you `mvn install`ed the required dependency before?","body":"Did you <code>mvn install</code>ed the required dependency before?"},{"owner":{"account_id":25606831,"reputation":1,"user_id":19380802,"display_name":"Ikechukwu Paul Anene"},"score":0,"creation_date":1674403700,"post_id":75183519,"comment_id":132702588,"body_markdown":"@mrxaxen, yes it is included in the older module. \n\nPS: Excuse the late reply please, been very unwell.","body":"@mrxaxen, yes it is included in the older module.   PS: Excuse the late reply please, been very unwell."},{"owner":{"account_id":25606831,"reputation":1,"user_id":19380802,"display_name":"Ikechukwu Paul Anene"},"score":0,"creation_date":1674403711,"post_id":75183519,"comment_id":132702591,"body_markdown":"@ValerijDobler, yes I did this first before building the new module.","body":"@ValerijDobler, yes I did this first before building the new module."}],"answers":[{"tags":[],"owner":{"account_id":25606831,"reputation":1,"user_id":19380802,"display_name":"Ikechukwu Paul Anene"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674738946,"creation_date":1674738946,"answer_id":75246642,"question_id":75183519,"body_markdown":"Solved the error. Found out that the module I intend on importing as a dependency when built with mvn clean install, does not build correctly in the first place because:\r\n\r\n```\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n&lt;!--            Add class with main method to manifest--&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;2.3.4.RELEASE&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;mainClass&gt;com.hcb.neurotec.migrations.conversion.AbisExportConverter&lt;/mainClass&gt;\r\n                &lt;/configuration&gt;\r\n                &lt;executions&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;repackage&lt;/goal&gt;\r\n                        &lt;/goals&gt;\r\n                    &lt;/execution&gt;\r\n                &lt;/executions&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n```\r\n\r\nThe module is not a spring project, so when the build gets to this block of code, it encounters issues that aren&#39;t surprisingly flagged. Removing this block in the old module allowed the new module build successfully.","title":"Cannot find classes from imported module during maven build","body":"<p>Solved the error. Found out that the module I intend on importing as a dependency when built with mvn clean install, does not build correctly in the first place because:</p>\n<pre><code>    &lt;build&gt;\n        &lt;plugins&gt;\n&lt;!--            Add class with main method to manifest--&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;2.3.4.RELEASE&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;mainClass&gt;com.hcb.neurotec.migrations.conversion.AbisExportConverter&lt;/mainClass&gt;\n                &lt;/configuration&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;repackage&lt;/goal&gt;\n                        &lt;/goals&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n</code></pre>\n<p>The module is not a spring project, so when the build gets to this block of code, it encounters issues that aren't surprisingly flagged. Removing this block in the old module allowed the new module build successfully.</p>\n"}],"owner":{"account_id":25606831,"reputation":1,"user_id":19380802,"display_name":"Ikechukwu Paul Anene"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":148,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1674738946,"creation_date":1674214728,"question_id":75183519,"body_markdown":"I am working on a module in a project that&#39;s to convert old data structure to match updated data structure. Since most of the methods and classes required for said conversion have already been implemented in a prior module in the same project, I added the prior module as a dependency in the new module.\r\nIt works, as I can access the required classes and their public methods. However, when I run &#39;mvn clean install&#39; to build the new module, the new module&#39;s build fails with errors about not finding the imported classes.\r\n\r\nHere is the parent pom file:\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;!--suppress MavenModelInspection --&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    &lt;groupId&gt;com.hcb.migration.bioenrol&lt;/groupId&gt;\r\n    &lt;artifactId&gt;hcb-migration-bienrol&lt;/artifactId&gt;\r\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n\r\n    &lt;packaging&gt;pom&lt;/packaging&gt;\r\n\r\n    &lt;properties&gt;\r\n        &lt;java.version&gt;1.8&lt;/java.version&gt;\r\n\r\n        &lt;maven.compiler.version&gt;3.8.0&lt;/maven.compiler.version&gt;\r\n        &lt;maven.compiler.source&gt;${java.version}&lt;/maven.compiler.source&gt;\r\n        &lt;maven.compiler.target&gt;${java.version}&lt;/maven.compiler.target&gt;\r\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n        &lt;project.build.resourceEncoding&gt;UTF-8&lt;/project.build.resourceEncoding&gt;\r\n        &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\r\n    &lt;/properties&gt;\r\n\r\n    &lt;modules&gt;\r\n        &lt;module&gt;abis-migrations-imports&lt;/module&gt;\r\n        &lt;module&gt;abis-migrations-export&lt;/module&gt;\r\n        &lt;module&gt;abis-migrations-conversion&lt;/module&gt;\r\n        &lt;module&gt;runtime-migrations-export&lt;/module&gt;\r\n        &lt;module&gt;runtime-migrations-conversion&lt;/module&gt;\r\n        &lt;module&gt;runtime-migrations-import&lt;/module&gt;\r\n\r\n    &lt;/modules&gt;\r\n    &lt;distributionManagement&gt;\r\n        &lt;snapshotRepository&gt;\r\n            &lt;!-- This repo requires credentials from your ~/.m2/settings.xml --&gt;\r\n            &lt;id&gt;archiva-snapshot-repo&lt;/id&gt;\r\n            &lt;name&gt;hcb-snapshot-repo&lt;/name&gt;\r\n            &lt;url&gt;http://archiva.hcb:8080/repository/archiva-snapshot-repo/&lt;/url&gt;\r\n        &lt;/snapshotRepository&gt;\r\n        &lt;repository&gt;\r\n            &lt;!-- This repo requires credentials from your ~/.m2/settings.xml --&gt;\r\n            &lt;id&gt;archiva-release-repo&lt;/id&gt;\r\n            &lt;name&gt;hcb-release-repo&lt;/name&gt;\r\n            &lt;url&gt;http://archiva.hcb:8080/repository/archiva-release-repo/&lt;/url&gt;\r\n        &lt;/repository&gt;\r\n    &lt;/distributionManagement&gt;\r\n    &lt;repositories&gt;\r\n        &lt;repository&gt;\r\n            &lt;!-- This repo requires credentials from your ~/.m2/settings.xml --&gt;\r\n            &lt;snapshots&gt;\r\n                &lt;enabled&gt;true&lt;/enabled&gt;\r\n            &lt;/snapshots&gt;\r\n            &lt;id&gt;archiva-snapshot-repo&lt;/id&gt;\r\n            &lt;name&gt;hcb-snapshot-repo&lt;/name&gt;\r\n            &lt;url&gt;http://archiva.hcb:8080/repository/archiva-snapshot-repo/&lt;/url&gt;\r\n        &lt;/repository&gt;\r\n        &lt;repository&gt;\r\n            &lt;!-- This repo requires credentials from your ~/.m2/settings.xml --&gt;\r\n            &lt;id&gt;archiva-release-repo&lt;/id&gt;\r\n            &lt;name&gt;hcb-release-repo&lt;/name&gt;\r\n            &lt;url&gt;http://archiva.hcb:8080/repository/archiva-release-repo/&lt;/url&gt;\r\n        &lt;/repository&gt;\r\n    &lt;/repositories&gt;\r\n&lt;/project&gt;\r\n```\r\n\r\n\r\nThis is the pom file of the older module:\r\n\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    &lt;parent&gt;\r\n        &lt;artifactId&gt;hcb-migration-bienrol&lt;/artifactId&gt;\r\n        &lt;groupId&gt;com.hcb.migration.bioenrol&lt;/groupId&gt;\r\n        &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n    &lt;/parent&gt;\r\n\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n    &lt;packaging&gt;jar&lt;/packaging&gt;\r\n    &lt;artifactId&gt;abis-migrations-conversion&lt;/artifactId&gt;\r\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n\r\n    &lt;dependencies&gt;\r\n\r\n        &lt;!-- MMABIS client --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.hcb.3rdparty.libs&lt;/groupId&gt;\r\n            &lt;artifactId&gt;neurotec-abis-client-management-rest&lt;/artifactId&gt;\r\n            &lt;version&gt;12.0.0.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.hcb.services.bioenroll&lt;/groupId&gt;\r\n            &lt;artifactId&gt;bioenroll-inf&lt;/artifactId&gt;\r\n            &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n\r\n            &lt;exclusions&gt;\r\n                &lt;exclusion&gt;\r\n                    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;spring-boot-starter-logging&lt;/artifactId&gt;\r\n                &lt;/exclusion&gt;\r\n\r\n                &lt;exclusion&gt;\r\n                    &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\r\n                &lt;/exclusion&gt;\r\n            &lt;/exclusions&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n&lt;!--            Add class with main method to manifest--&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;2.3.4.RELEASE&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;mainClass&gt;com.hcb.neurotec.migrations.conversion.AbisExportConverter&lt;/mainClass&gt;\r\n                &lt;/configuration&gt;\r\n                &lt;executions&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;repackage&lt;/goal&gt;\r\n                        &lt;/goals&gt;\r\n                    &lt;/execution&gt;\r\n                &lt;/executions&gt;\r\n\r\n            &lt;/plugin&gt;\r\n\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n```\r\n\r\n\r\nThis is the pom file of the module I am working on whose build fails:\r\n\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    &lt;parent&gt;\r\n        &lt;artifactId&gt;hcb-migration-bienrol&lt;/artifactId&gt;\r\n        &lt;groupId&gt;com.hcb.migration.bioenrol&lt;/groupId&gt;\r\n        &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n    &lt;/parent&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    &lt;artifactId&gt;runtime-migrations-conversion&lt;/artifactId&gt;\r\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n\r\n    &lt;packaging&gt;jar&lt;/packaging&gt;\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.hcb.migration.bioenrol&lt;/groupId&gt;\r\n            &lt;artifactId&gt;abis-migrations-conversion&lt;/artifactId&gt;\r\n            &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n            &lt;scope&gt;compile&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;2.3.4.RELEASE&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;mainClass&gt;com.hcb.runtime.migrations.conversion.RuntimeConversionApplication&lt;/mainClass&gt;\r\n                &lt;/configuration&gt;\r\n                &lt;executions&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;repackage&lt;/goal&gt;\r\n                        &lt;/goals&gt;\r\n                    &lt;/execution&gt;\r\n                &lt;/executions&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n```\r\n\r\n\r\nHere is the build error:\r\n\r\n\r\n```\r\n[INFO] 45 errors\r\n[INFO] -------------------------------------------------------------\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] BUILD FAILURE\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] Total time:  12.418 s\r\n[INFO] Finished at: 2023-01-20T12:23:07+01:00\r\n[INFO] ------------------------------------------------------------------------\r\n[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.1:compile (default-compile) on project runtime-migrations-conversion: Compilation failure: Compilation failure:\r\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/pojo/RConversionSubInfo.java:[4,46] package com.hcb.neurotec.migrations.conversion does not exist\r\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/pojo/RConversionSubInfo.java:[5,46] package com.hcb.neurotec.migrations.conversion does not exist\r\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/pojo/RConversionSubInfo.java:[6,46] package com.hcb.neurotec.migrations.conversion does not exist\r\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/pojo/RConversionSubInfo.java:[7,46] package com.hcb.neurotec.migrations.conversion does not exist\r\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/pojo/RConversionSubInfo.java:[8,56] package com.hcb.neurotec.migrations.conversion.exception does not exist\r\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/pojo/RConversionSubInfo.java:[9,52] package com.hcb.neurotec.migrations.conversion.pojos does not exist\r\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/pojo/RConversionSubInfo.java:[10,52] package com.hcb.neurotec.migrations.conversion.pojos does not exist\r\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/pojo/RConversionSubInfo.java:[11,52] package com.hcb.neurotec.migrations.conversion.pojos does not exist\r\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/pojo/RConversionSubInfo.java:[12,52] package com.hcb.neurotec.migrations.conversion.pojos does not exist\r\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/pojo/RConversionSubInfo.java:[13,52] package com.hcb.neurotec.migrations.conversion.utils does not exist\r\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/pojo/RConversionSubInfo.java:[27,59] package com.hcb.neurotec.migrations.conversion.utils does not exist\r\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/pojo/RConversionSubInfo.java:[31,13] cannot find symbol\r\n[ERROR]   symbol:   class DirectoryUtils\r\n[ERROR]   location: class com.hcb.runtime.migrations.conversion.pojo.RConversionSubInfo\r\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/pojo/RConversionSubInfo.java:[32,13] cannot find symbol\r\n[ERROR]   symbol:   class ConversionDemograhpicsInfo\r\n[ERROR]   location: class com.hcb.runtime.migrations.conversion.pojo.RConversionSubInfo\r\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/pojo/RConversionSubInfo.java:[33,13] cannot find symbol\r\n[ERROR]   symbol:   class ConversionFaceInfo\r\n[ERROR]   location: class com.hcb.runtime.migrations.conversion.pojo.RConversionSubInfo\r\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/pojo/RConversionSubInfo.java:[34,13] cannot find symbol\r\n[ERROR]   symbol:   class ConversionPrintInfo\r\n[ERROR]   location: class com.hcb.runtime.migrations.conversion.pojo.RConversionSubInfo\r\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/pojo/RConversionSubInfo.java:[35,13] cannot find symbol\r\n[ERROR]   symbol:   class ConversionIrisInfo\r\n[ERROR]   location: class com.hcb.runtime.migrations.conversion.pojo.RConversionSubInfo\r\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/pojo/RConversionSubInfo.java:[39,13] cannot find symbol\r\n[ERROR]   symbol:   class SubjectDemographicsConverter\r\n[ERROR]   location: class com.hcb.runtime.migrations.conversion.pojo.RConversionSubInfo\r\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/pojo/RConversionSubInfo.java:[44,74] cannot find symbol\r\n[ERROR]   symbol:   class SubjectDemographicsConverter\r\n[ERROR]   location: class com.hcb.runtime.migrations.conversion.pojo.RConversionSubInfo\r\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/pojo/RConversionSubInfo.java:[50,42] cannot find symbol\r\n[ERROR]   symbol:   class ConversionException\r\n[ERROR]   location: class com.hcb.runtime.migrations.conversion.pojo.RConversionSubInfo\r\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/pojo/RConversionSubInfo.java:[63,42] cannot find symbol\r\n[ERROR]   symbol:   class ConversionException\r\n[ERROR]   location: class com.hcb.runtime.migrations.conversion.pojo.RConversionSubInfo\r\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/pojo/RConversionSubInfo.java:[95,35] cannot find symbol\r\n[ERROR]   symbol:   class SubjectDemographicsConverter\r\n[ERROR]   location: class com.hcb.runtime.migrations.conversion.pojo.RConversionSubInfo\r\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/pojo/RConversionSubInfo.java:[95,101] cannot find symbol\r\n[ERROR]   symbol:   class ConversionException\r\n[ERROR]   location: class com.hcb.runtime.migrations.conversion.pojo.RConversionSubInfo\r\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/pojo/RConversionSubInfo.java:[171,43] cannot find symbol\r\n[ERROR]   symbol:   class ConversionException\r\n[ERROR]   location: class com.hcb.runtime.migrations.conversion.pojo.RConversionSubInfo\r\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/pojo/RConversionSubInfo.java:[205,43] cannot find symbol\r\n[ERROR]   symbol:   class ConversionException\r\n[ERROR]   location: class com.hcb.runtime.migrations.conversion.pojo.RConversionSubInfo\r\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/pojo/RConversionSubInfo.java:[238,12] cannot find symbol\r\n[ERROR]   symbol:   class ConversionDemograhpicsInfo\r\n[ERROR]   location: class com.hcb.runtime.migrations.conversion.pojo.RConversionSubInfo\r\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/RConvertedRecordInfo.java:[7,56] package com.hcb.neurotec.migrations.conversion.exception does not exist\r\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/RConvertedRecordInfo.java:[8,52] package com.hcb.neurotec.migrations.conversion.utils does not exist\r\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/RConvertedRecordInfo.java:[25,13] cannot find symbol\r\n[ERROR]   symbol:   class DirectoryUtils\r\n[ERROR]   location: class com.hcb.runtime.migrations.conversion.RConvertedRecordInfo\r\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/RConvertedRecordInfo.java:[63,69] cannot find symbol\r\n[ERROR]   symbol:   class ConversionException\r\n[ERROR]   location: class com.hcb.runtime.migrations.conversion.RConvertedRecordInfo\r\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/RuntimeConversionApplication.java:[3,56] package com.hcb.neurotec.migrations.conversion.exception does not exist\r\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/RuntimeConversionApplication.java:[4,54] package com.hcb.neurotec.migrations.conversion.network does not exist\r\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/RuntimeConversionApplication.java:[5,54] package com.hcb.neurotec.migrations.conversion.network does not exist\r\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/RuntimeConversionApplication.java:[6,61] package com.hcb.neurotec.migrations.conversion.network.config does not exist\r\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/RuntimeConversionApplication.java:[18,51] cannot find symbol\r\n[ERROR]   symbol:   class ConversionException\r\n[ERROR]   location: class com.hcb.runtime.migrations.conversion.RuntimeConversionApplication\r\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/RuntimeConversionImpl.java:[3,46] package com.hcb.neurotec.migrations.conversion does not exist\r\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/RuntimeConversionImpl.java:[4,56] package com.hcb.neurotec.migrations.conversion.exception does not exist\r\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/RuntimeConversionImpl.java:[5,54] package com.hcb.neurotec.migrations.conversion.network does not exist\r\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/RuntimeConversionImpl.java:[6,54] package com.hcb.neurotec.migrations.conversion.network does not exist\r\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/RuntimeConversionImpl.java:[7,52] package com.hcb.neurotec.migrations.conversion.utils does not exist\r\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/RuntimeConversionImpl.java:[15,59] package com.hcb.neurotec.migrations.conversion.utils does not exist\r\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/RuntimeConversionImpl.java:[15,1] static import only from classes and interfaces\r\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/RuntimeConversionImpl.java:[19,19] cannot find symbol\r\n[ERROR]   symbol:   class SubjectDemographicsConverter\r\n[ERROR]   location: class com.hcb.runtime.migrations.conversion.RuntimeConversionImpl\r\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/RuntimeConversionImpl.java:[22,34] cannot find symbol\r\n[ERROR]   symbol:   class EnrolmentAPI\r\n[ERROR]   location: class com.hcb.runtime.migrations.conversion.RuntimeConversionImpl\r\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/RuntimeConversionImpl.java:[22,61] cannot find symbol\r\n[ERROR]   symbol:   class ConfigurationAPI\r\n[ERROR]   location: class com.hcb.runtime.migrations.conversion.RuntimeConversionImpl\r\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/RuntimeConversionImpl.java:[26,80] cannot find symbol\r\n[ERROR]   symbol:   class ConversionException\r\n[ERROR]   location: class com.hcb.runtime.migrations.conversion.RuntimeConversionImpl\r\n[ERROR] -&gt; [Help 1]\r\n[ERROR]\r\n[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\r\n[ERROR] Re-run Maven using the -X switch to enable full debug logging.\r\n[ERROR]\r\n[ERROR] For more information about the errors and possible solutions, please read the following articles:\r\n[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException\r\n\r\n```\r\n\r\n\r\n\r\n\r\nI have checked that they&#39;re both accounted for in the parent pom, I also ensured that the older module built successfully with &#39;mvn clean install&#39; before trying to build the module where it is used as a dependency.\r\n\r\n","title":"Cannot find classes from imported module during maven build","body":"<p>I am working on a module in a project that's to convert old data structure to match updated data structure. Since most of the methods and classes required for said conversion have already been implemented in a prior module in the same project, I added the prior module as a dependency in the new module.\nIt works, as I can access the required classes and their public methods. However, when I run 'mvn clean install' to build the new module, the new module's build fails with errors about not finding the imported classes.</p>\n<p>Here is the parent pom file:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;!--suppress MavenModelInspection --&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;groupId&gt;com.hcb.migration.bioenrol&lt;/groupId&gt;\n    &lt;artifactId&gt;hcb-migration-bienrol&lt;/artifactId&gt;\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n\n    &lt;packaging&gt;pom&lt;/packaging&gt;\n\n    &lt;properties&gt;\n        &lt;java.version&gt;1.8&lt;/java.version&gt;\n\n        &lt;maven.compiler.version&gt;3.8.0&lt;/maven.compiler.version&gt;\n        &lt;maven.compiler.source&gt;${java.version}&lt;/maven.compiler.source&gt;\n        &lt;maven.compiler.target&gt;${java.version}&lt;/maven.compiler.target&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;project.build.resourceEncoding&gt;UTF-8&lt;/project.build.resourceEncoding&gt;\n        &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\n    &lt;/properties&gt;\n\n    &lt;modules&gt;\n        &lt;module&gt;abis-migrations-imports&lt;/module&gt;\n        &lt;module&gt;abis-migrations-export&lt;/module&gt;\n        &lt;module&gt;abis-migrations-conversion&lt;/module&gt;\n        &lt;module&gt;runtime-migrations-export&lt;/module&gt;\n        &lt;module&gt;runtime-migrations-conversion&lt;/module&gt;\n        &lt;module&gt;runtime-migrations-import&lt;/module&gt;\n\n    &lt;/modules&gt;\n    &lt;distributionManagement&gt;\n        &lt;snapshotRepository&gt;\n            &lt;!-- This repo requires credentials from your ~/.m2/settings.xml --&gt;\n            &lt;id&gt;archiva-snapshot-repo&lt;/id&gt;\n            &lt;name&gt;hcb-snapshot-repo&lt;/name&gt;\n            &lt;url&gt;http://archiva.hcb:8080/repository/archiva-snapshot-repo/&lt;/url&gt;\n        &lt;/snapshotRepository&gt;\n        &lt;repository&gt;\n            &lt;!-- This repo requires credentials from your ~/.m2/settings.xml --&gt;\n            &lt;id&gt;archiva-release-repo&lt;/id&gt;\n            &lt;name&gt;hcb-release-repo&lt;/name&gt;\n            &lt;url&gt;http://archiva.hcb:8080/repository/archiva-release-repo/&lt;/url&gt;\n        &lt;/repository&gt;\n    &lt;/distributionManagement&gt;\n    &lt;repositories&gt;\n        &lt;repository&gt;\n            &lt;!-- This repo requires credentials from your ~/.m2/settings.xml --&gt;\n            &lt;snapshots&gt;\n                &lt;enabled&gt;true&lt;/enabled&gt;\n            &lt;/snapshots&gt;\n            &lt;id&gt;archiva-snapshot-repo&lt;/id&gt;\n            &lt;name&gt;hcb-snapshot-repo&lt;/name&gt;\n            &lt;url&gt;http://archiva.hcb:8080/repository/archiva-snapshot-repo/&lt;/url&gt;\n        &lt;/repository&gt;\n        &lt;repository&gt;\n            &lt;!-- This repo requires credentials from your ~/.m2/settings.xml --&gt;\n            &lt;id&gt;archiva-release-repo&lt;/id&gt;\n            &lt;name&gt;hcb-release-repo&lt;/name&gt;\n            &lt;url&gt;http://archiva.hcb:8080/repository/archiva-release-repo/&lt;/url&gt;\n        &lt;/repository&gt;\n    &lt;/repositories&gt;\n&lt;/project&gt;\n</code></pre>\n<p>This is the pom file of the older module:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;parent&gt;\n        &lt;artifactId&gt;hcb-migration-bienrol&lt;/artifactId&gt;\n        &lt;groupId&gt;com.hcb.migration.bioenrol&lt;/groupId&gt;\n        &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n    &lt;/parent&gt;\n\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;packaging&gt;jar&lt;/packaging&gt;\n    &lt;artifactId&gt;abis-migrations-conversion&lt;/artifactId&gt;\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n\n    &lt;dependencies&gt;\n\n        &lt;!-- MMABIS client --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.hcb.3rdparty.libs&lt;/groupId&gt;\n            &lt;artifactId&gt;neurotec-abis-client-management-rest&lt;/artifactId&gt;\n            &lt;version&gt;12.0.0.0&lt;/version&gt;\n        &lt;/dependency&gt;\n\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.hcb.services.bioenroll&lt;/groupId&gt;\n            &lt;artifactId&gt;bioenroll-inf&lt;/artifactId&gt;\n            &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                    &lt;artifactId&gt;spring-boot-starter-logging&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n                    &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n&lt;!--            Add class with main method to manifest--&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;2.3.4.RELEASE&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;mainClass&gt;com.hcb.neurotec.migrations.conversion.AbisExportConverter&lt;/mainClass&gt;\n                &lt;/configuration&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;repackage&lt;/goal&gt;\n                        &lt;/goals&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n\n            &lt;/plugin&gt;\n\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p>This is the pom file of the module I am working on whose build fails:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;parent&gt;\n        &lt;artifactId&gt;hcb-migration-bienrol&lt;/artifactId&gt;\n        &lt;groupId&gt;com.hcb.migration.bioenrol&lt;/groupId&gt;\n        &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n    &lt;/parent&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;artifactId&gt;runtime-migrations-conversion&lt;/artifactId&gt;\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n\n    &lt;packaging&gt;jar&lt;/packaging&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.hcb.migration.bioenrol&lt;/groupId&gt;\n            &lt;artifactId&gt;abis-migrations-conversion&lt;/artifactId&gt;\n            &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n            &lt;scope&gt;compile&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;2.3.4.RELEASE&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;mainClass&gt;com.hcb.runtime.migrations.conversion.RuntimeConversionApplication&lt;/mainClass&gt;\n                &lt;/configuration&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;repackage&lt;/goal&gt;\n                        &lt;/goals&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p>Here is the build error:</p>\n<pre><code>[INFO] 45 errors\n[INFO] -------------------------------------------------------------\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD FAILURE\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time:  12.418 s\n[INFO] Finished at: 2023-01-20T12:23:07+01:00\n[INFO] ------------------------------------------------------------------------\n[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.1:compile (default-compile) on project runtime-migrations-conversion: Compilation failure: Compilation failure:\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/pojo/RConversionSubInfo.java:[4,46] package com.hcb.neurotec.migrations.conversion does not exist\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/pojo/RConversionSubInfo.java:[5,46] package com.hcb.neurotec.migrations.conversion does not exist\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/pojo/RConversionSubInfo.java:[6,46] package com.hcb.neurotec.migrations.conversion does not exist\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/pojo/RConversionSubInfo.java:[7,46] package com.hcb.neurotec.migrations.conversion does not exist\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/pojo/RConversionSubInfo.java:[8,56] package com.hcb.neurotec.migrations.conversion.exception does not exist\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/pojo/RConversionSubInfo.java:[9,52] package com.hcb.neurotec.migrations.conversion.pojos does not exist\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/pojo/RConversionSubInfo.java:[10,52] package com.hcb.neurotec.migrations.conversion.pojos does not exist\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/pojo/RConversionSubInfo.java:[11,52] package com.hcb.neurotec.migrations.conversion.pojos does not exist\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/pojo/RConversionSubInfo.java:[12,52] package com.hcb.neurotec.migrations.conversion.pojos does not exist\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/pojo/RConversionSubInfo.java:[13,52] package com.hcb.neurotec.migrations.conversion.utils does not exist\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/pojo/RConversionSubInfo.java:[27,59] package com.hcb.neurotec.migrations.conversion.utils does not exist\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/pojo/RConversionSubInfo.java:[31,13] cannot find symbol\n[ERROR]   symbol:   class DirectoryUtils\n[ERROR]   location: class com.hcb.runtime.migrations.conversion.pojo.RConversionSubInfo\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/pojo/RConversionSubInfo.java:[32,13] cannot find symbol\n[ERROR]   symbol:   class ConversionDemograhpicsInfo\n[ERROR]   location: class com.hcb.runtime.migrations.conversion.pojo.RConversionSubInfo\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/pojo/RConversionSubInfo.java:[33,13] cannot find symbol\n[ERROR]   symbol:   class ConversionFaceInfo\n[ERROR]   location: class com.hcb.runtime.migrations.conversion.pojo.RConversionSubInfo\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/pojo/RConversionSubInfo.java:[34,13] cannot find symbol\n[ERROR]   symbol:   class ConversionPrintInfo\n[ERROR]   location: class com.hcb.runtime.migrations.conversion.pojo.RConversionSubInfo\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/pojo/RConversionSubInfo.java:[35,13] cannot find symbol\n[ERROR]   symbol:   class ConversionIrisInfo\n[ERROR]   location: class com.hcb.runtime.migrations.conversion.pojo.RConversionSubInfo\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/pojo/RConversionSubInfo.java:[39,13] cannot find symbol\n[ERROR]   symbol:   class SubjectDemographicsConverter\n[ERROR]   location: class com.hcb.runtime.migrations.conversion.pojo.RConversionSubInfo\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/pojo/RConversionSubInfo.java:[44,74] cannot find symbol\n[ERROR]   symbol:   class SubjectDemographicsConverter\n[ERROR]   location: class com.hcb.runtime.migrations.conversion.pojo.RConversionSubInfo\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/pojo/RConversionSubInfo.java:[50,42] cannot find symbol\n[ERROR]   symbol:   class ConversionException\n[ERROR]   location: class com.hcb.runtime.migrations.conversion.pojo.RConversionSubInfo\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/pojo/RConversionSubInfo.java:[63,42] cannot find symbol\n[ERROR]   symbol:   class ConversionException\n[ERROR]   location: class com.hcb.runtime.migrations.conversion.pojo.RConversionSubInfo\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/pojo/RConversionSubInfo.java:[95,35] cannot find symbol\n[ERROR]   symbol:   class SubjectDemographicsConverter\n[ERROR]   location: class com.hcb.runtime.migrations.conversion.pojo.RConversionSubInfo\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/pojo/RConversionSubInfo.java:[95,101] cannot find symbol\n[ERROR]   symbol:   class ConversionException\n[ERROR]   location: class com.hcb.runtime.migrations.conversion.pojo.RConversionSubInfo\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/pojo/RConversionSubInfo.java:[171,43] cannot find symbol\n[ERROR]   symbol:   class ConversionException\n[ERROR]   location: class com.hcb.runtime.migrations.conversion.pojo.RConversionSubInfo\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/pojo/RConversionSubInfo.java:[205,43] cannot find symbol\n[ERROR]   symbol:   class ConversionException\n[ERROR]   location: class com.hcb.runtime.migrations.conversion.pojo.RConversionSubInfo\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/pojo/RConversionSubInfo.java:[238,12] cannot find symbol\n[ERROR]   symbol:   class ConversionDemograhpicsInfo\n[ERROR]   location: class com.hcb.runtime.migrations.conversion.pojo.RConversionSubInfo\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/RConvertedRecordInfo.java:[7,56] package com.hcb.neurotec.migrations.conversion.exception does not exist\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/RConvertedRecordInfo.java:[8,52] package com.hcb.neurotec.migrations.conversion.utils does not exist\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/RConvertedRecordInfo.java:[25,13] cannot find symbol\n[ERROR]   symbol:   class DirectoryUtils\n[ERROR]   location: class com.hcb.runtime.migrations.conversion.RConvertedRecordInfo\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/RConvertedRecordInfo.java:[63,69] cannot find symbol\n[ERROR]   symbol:   class ConversionException\n[ERROR]   location: class com.hcb.runtime.migrations.conversion.RConvertedRecordInfo\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/RuntimeConversionApplication.java:[3,56] package com.hcb.neurotec.migrations.conversion.exception does not exist\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/RuntimeConversionApplication.java:[4,54] package com.hcb.neurotec.migrations.conversion.network does not exist\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/RuntimeConversionApplication.java:[5,54] package com.hcb.neurotec.migrations.conversion.network does not exist\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/RuntimeConversionApplication.java:[6,61] package com.hcb.neurotec.migrations.conversion.network.config does not exist\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/RuntimeConversionApplication.java:[18,51] cannot find symbol\n[ERROR]   symbol:   class ConversionException\n[ERROR]   location: class com.hcb.runtime.migrations.conversion.RuntimeConversionApplication\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/RuntimeConversionImpl.java:[3,46] package com.hcb.neurotec.migrations.conversion does not exist\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/RuntimeConversionImpl.java:[4,56] package com.hcb.neurotec.migrations.conversion.exception does not exist\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/RuntimeConversionImpl.java:[5,54] package com.hcb.neurotec.migrations.conversion.network does not exist\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/RuntimeConversionImpl.java:[6,54] package com.hcb.neurotec.migrations.conversion.network does not exist\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/RuntimeConversionImpl.java:[7,52] package com.hcb.neurotec.migrations.conversion.utils does not exist\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/RuntimeConversionImpl.java:[15,59] package com.hcb.neurotec.migrations.conversion.utils does not exist\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/RuntimeConversionImpl.java:[15,1] static import only from classes and interfaces\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/RuntimeConversionImpl.java:[19,19] cannot find symbol\n[ERROR]   symbol:   class SubjectDemographicsConverter\n[ERROR]   location: class com.hcb.runtime.migrations.conversion.RuntimeConversionImpl\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/RuntimeConversionImpl.java:[22,34] cannot find symbol\n[ERROR]   symbol:   class EnrolmentAPI\n[ERROR]   location: class com.hcb.runtime.migrations.conversion.RuntimeConversionImpl\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/RuntimeConversionImpl.java:[22,61] cannot find symbol\n[ERROR]   symbol:   class ConfigurationAPI\n[ERROR]   location: class com.hcb.runtime.migrations.conversion.RuntimeConversionImpl\n[ERROR] /C:/Users/ikechukwua/IdeaProjects/migration-bioenrol/runtime-migrations-conversion/src/main/java/com/hcb/runtime/migrations/conversion/RuntimeConversionImpl.java:[26,80] cannot find symbol\n[ERROR]   symbol:   class ConversionException\n[ERROR]   location: class com.hcb.runtime.migrations.conversion.RuntimeConversionImpl\n[ERROR] -&gt; [Help 1]\n[ERROR]\n[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\n[ERROR] Re-run Maven using the -X switch to enable full debug logging.\n[ERROR]\n[ERROR] For more information about the errors and possible solutions, please read the following articles:\n[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException\n\n</code></pre>\n<p>I have checked that they're both accounted for in the parent pom, I also ensured that the older module built successfully with 'mvn clean install' before trying to build the module where it is used as a dependency.</p>\n"},{"tags":["java","spring-boot","spring-boot-test"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1674673140,"post_id":75237933,"comment_id":132766968,"body_markdown":"The first one fails because you should use or `@DataJpaTest` (for a test slice) **or** `@SpringBootTest` for a full blown integration test. Adding both to a testcase doesn&#39;t make sense. Your tests fail because there is no `@SpringBootConfiguration` class to be found because you removed the application. You now basically have a regular Spring application without Spring Boot features. So you will need to manually configure your testing by providing the configuration.","body":"The first one fails because you should use or <code>@DataJpaTest</code> (for a test slice) <b>or</b> <code>@SpringBootTest</code> for a full blown integration test. Adding both to a testcase doesn&#39;t make sense. Your tests fail because there is no <code>@SpringBootConfiguration</code> class to be found because you removed the application. You now basically have a regular Spring application without Spring Boot features. So you will need to manually configure your testing by providing the configuration."},{"owner":{"account_id":90166,"reputation":3781,"user_id":248304,"accept_rate":88,"display_name":"angelcervera"},"score":0,"creation_date":1674684165,"post_id":75237933,"comment_id":132770000,"body_markdown":"Thanks for your comment, but this is exactly what I explain (I don&#39;t have SpringBootTest because it&#39;s not an application and first case is not working because I have multiple initialisations). My question is about how to test it and which set of annotations I need. I expected the last one working.","body":"Thanks for your comment, but this is exactly what I explain (I don&#39;t have SpringBootTest because it&#39;s not an application and first case is not working because I have multiple initialisations). My question is about how to test it and which set of annotations I need. I expected the last one working."},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1674713726,"post_id":75237933,"comment_id":132773765,"body_markdown":"Why would the last one work as that still is an `@SpringBootTest` which cannot find the class with `@SpringBootApplication` to inspect it to know what to instantiate. (Or the `@SpringBootConfiguration` that is), without that ther will be no auto configuration.","body":"Why would the last one work as that still is an <code>@SpringBootTest</code> which cannot find the class with <code>@SpringBootApplication</code> to inspect it to know what to instantiate. (Or the <code>@SpringBootConfiguration</code> that is), without that ther will be no auto configuration."},{"owner":{"account_id":90166,"reputation":3781,"user_id":248304,"accept_rate":88,"display_name":"angelcervera"},"score":0,"creation_date":1674718082,"post_id":75237933,"comment_id":132774428,"body_markdown":"Could I use @SpringBootConfiguration someplace in the Test to enable the Spring Boot autoconfiguration?","body":"Could I use @SpringBootConfiguration someplace in the Test to enable the Spring Boot autoconfiguration?"}],"answers":[{"tags":[],"owner":{"account_id":90166,"reputation":3781,"user_id":248304,"accept_rate":88,"display_name":"angelcervera"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1674738834,"creation_date":1674737945,"answer_id":75246454,"question_id":75237933,"body_markdown":"This is the working approach:\r\n\r\n\r\n```java\r\n@ExtendWith(SpringExtension.class)\r\n@DataJpaTest\r\npublic class CustomerRepositoryTests {\r\n\r\n   @SpringBootApplication\r\n   static class TestConfig {}\r\n\r\n   @Autowired\r\n   private TestEntityManager entityManager;\r\n\r\n   @Autowired\r\n   private CustomerRepository customers;\r\n\r\n   @Test\r\n   public void testFindByLastName() {\r\n      ......\r\n\r\n   }\r\n}\r\n```\r\n\r\nSo each test class will autoconfigure the context using Spring Boot.\r\n\r\nReference: [spring-data-examples repository](https://github.com/spring-projects/spring-data-examples/blob/main/jpa/showcase/src/test/java/example/springdata/jpa/showcase/AbstractShowcaseTest.java)\r\n\r\n\r\n","title":"Testing library that is using spring boot 3","body":"<p>This is the working approach:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@ExtendWith(SpringExtension.class)\n@DataJpaTest\npublic class CustomerRepositoryTests {\n\n   @SpringBootApplication\n   static class TestConfig {}\n\n   @Autowired\n   private TestEntityManager entityManager;\n\n   @Autowired\n   private CustomerRepository customers;\n\n   @Test\n   public void testFindByLastName() {\n      ......\n\n   }\n}\n</code></pre>\n<p>So each test class will autoconfigure the context using Spring Boot.</p>\n<p>Reference: <a href=\"https://github.com/spring-projects/spring-data-examples/blob/main/jpa/showcase/src/test/java/example/springdata/jpa/showcase/AbstractShowcaseTest.java\" rel=\"nofollow noreferrer\">spring-data-examples repository</a></p>\n"}],"owner":{"account_id":90166,"reputation":3781,"user_id":248304,"accept_rate":88,"display_name":"angelcervera"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1712,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":75246454,"answer_count":1,"score":1,"last_activity_date":1674738834,"creation_date":1674669176,"question_id":75237933,"body_markdown":"I have a library and I want to implement an integrations test for the Repository (only an example for a more complex case).\r\n\r\nTo reproduce the case, I used [this official example](https://github.com/spring-guides/gs-accessing-data-jpa/tree/main/complete), but removing the [`AccessingDataJpaApplication.java`](https://github.com/spring-guides/gs-accessing-data-jpa/blob/main/complete/src/main/java/com/example/accessingdatajpa/AccessingDataJpaApplication.java) class because I will expose it as a library and not as application.\r\n\r\nNow that the repo does not have the `@SpringBootApplication` annotation, [the test](https://github.com/spring-guides/gs-accessing-data-jpa/blob/main/complete/src/test/java/com/example/accessingdatajpa/CustomerRepositoryTests.java) will fail because can not inject the [`private CustomerRepository customers;`](https://github.com/spring-guides/gs-accessing-data-jpa/blob/968981c6a08362eab5ef864b86418347e959bb1d/complete/src/test/java/com/example/accessingdatajpa/CustomerRepositoryTests.java#L34)\r\n\r\n\r\nHow to reproduce the case:\r\n```bash\r\ngit clone https://github.com/spring-guides/gs-accessing-data-jpa.git\r\ncd gs-accessing-data-jpa/complete\r\nmvn test # Working\r\nrm src/main/java/com/example/accessingdatajpa/AccessingDataJpaApplication.java\r\nmvn test # not working\r\n```\r\n\r\n**The question is, which is the right way to annotate this test if it is not an application?**\r\n\r\n\r\nI tried annotating the test with few combinations like:\r\n- Adding `@SpringBootTest`:\r\n  ```java\r\n  @ExtendWith(SpringExtension.class)\r\n  @DataJpaTest\r\n  @SpringBootTest\r\n  public class CustomerRepositoryTests {\r\n  }\r\n  ```\r\n  The error looks like try to say that there are multiple inizializations, I suppose that each annotation try to do its own:\r\n  ```txt\r\n    [ERROR] Tests run: 1, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 0.067 s &lt;&lt;&lt; FAILURE! - in com.example.accessingdatajpa.CustomerRepositoryTests\r\n    [ERROR] com.example.accessingdatajpa.CustomerRepositoryTests  Time elapsed: 0.067 s  &lt;&lt;&lt; ERROR!\r\n    java.lang.IllegalStateException: Configuration error: found multiple declarations of @BootstrapWith for test class [com.example.accessingdatajpa.CustomerRepositoryTests]: [@org.springframework.test.context.BootstrapWith(value=org.springframework.boot.test.autoconfigure.orm.jpa.DataJpaTestContextBootstrapper.class), @org.springframework.test.context.BootstrapWith(value=org.springframework.boot.test.context.SpringBootTestContextBootstrapper.class)]\r\n    ```\r\n- Setting only `@SpringBootTest`\r\n  ```java\r\n  @ExtendWith(SpringExtension.class)\r\n  @SpringBootTest\r\n  public class CustomerRepositoryTests {}\r\n  ```\r\n  Then I can not use the `TestEntityManager` and still is not able to inject the repository\r\n  ```txt\r\n   17:29:01.951 [main] DEBUG org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Neither @ContextConfiguration nor @ContextHierarchy found for test class [CustomerRepositoryTests]: using SpringBootContextLoader\r\n   17:29:01.954 [main] DEBUG org.springframework.test.context.support.AbstractContextLoader - Could not detect default resource locations for test class [com.example.accessingdatajpa.CustomerRepositoryTests]: no resource found for suffixes {-context.xml, Context.groovy}.\r\n   17:29:01.954 [main] INFO org.springframework.test.context.support.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [com.example.accessingdatajpa.CustomerRepositoryTests]: CustomerRepositoryTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.\r\n   17:29:01.964 [main] DEBUG org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Using ContextCustomizers for test class [CustomerRepositoryTests]: [ExcludeFilterContextCustomizer, DuplicateJsonObjectContextCustomizer, MockitoContextCustomizer, TestRestTemplateContextCustomizer, DisableObservabilityContextCustomizer, PropertyMappingContextCustomizer, Customizer]\r\n   [ERROR] Tests run: 1, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 0.117 s &lt;&lt;&lt; FAILURE! - in com.example.accessingdatajpa.CustomerRepositoryTests\r\n   [ERROR] com.example.accessingdatajpa.CustomerRepositoryTests  Time elapsed: 0.116 s  &lt;&lt;&lt; ERROR!\r\n   java.lang.NullPointerException: Cannot invoke &quot;java.lang.Class.getName()&quot; because &quot;found&quot; is null\r\n  ```\r\n- And `@SpringBootTest(classes = {CustomerRepository.class})`:\r\n  ```java \r\n  @ExtendWith(SpringExtension.class)\r\n  @SpringBootTest(classes = {CustomerRepository.class})\r\n  public class CustomerRepositoryTests {}\r\n  ```\r\n  With error: \r\n  ```text\r\n   org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;com.example.accessingdatajpa.CustomerRepositoryTests&#39;: Unsatisfied dependency expressed through field &#39;customers&#39;: No qualifying bean of type &#39;com.example.accessingdatajpa.CustomerRepository&#39; available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}\r\n  ```\r\n  \r\nMaybe the solution is related to `[com.example.accessingdatajpa.CustomerRepositoryTests]: CustomerRepositoryTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.`. But how to do it exactly? \r\n\r\nBTW: I found [this response](https://stackoverflow.com/questions/58175467/testing-spring-boot-library-modules) in Stackoverflow, but it is not working. Maybe because the Spring version.\r\n  \r\n","title":"Testing library that is using spring boot 3","body":"<p>I have a library and I want to implement an integrations test for the Repository (only an example for a more complex case).</p>\n<p>To reproduce the case, I used <a href=\"https://github.com/spring-guides/gs-accessing-data-jpa/tree/main/complete\" rel=\"nofollow noreferrer\">this official example</a>, but removing the <a href=\"https://github.com/spring-guides/gs-accessing-data-jpa/blob/main/complete/src/main/java/com/example/accessingdatajpa/AccessingDataJpaApplication.java\" rel=\"nofollow noreferrer\"><code>AccessingDataJpaApplication.java</code></a> class because I will expose it as a library and not as application.</p>\n<p>Now that the repo does not have the <code>@SpringBootApplication</code> annotation, <a href=\"https://github.com/spring-guides/gs-accessing-data-jpa/blob/main/complete/src/test/java/com/example/accessingdatajpa/CustomerRepositoryTests.java\" rel=\"nofollow noreferrer\">the test</a> will fail because can not inject the <a href=\"https://github.com/spring-guides/gs-accessing-data-jpa/blob/968981c6a08362eab5ef864b86418347e959bb1d/complete/src/test/java/com/example/accessingdatajpa/CustomerRepositoryTests.java#L34\" rel=\"nofollow noreferrer\"><code>private CustomerRepository customers;</code></a></p>\n<p>How to reproduce the case:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>git clone https://github.com/spring-guides/gs-accessing-data-jpa.git\ncd gs-accessing-data-jpa/complete\nmvn test # Working\nrm src/main/java/com/example/accessingdatajpa/AccessingDataJpaApplication.java\nmvn test # not working\n</code></pre>\n<p><strong>The question is, which is the right way to annotate this test if it is not an application?</strong></p>\n<p>I tried annotating the test with few combinations like:</p>\n<ul>\n<li>Adding <code>@SpringBootTest</code>:\n<pre class=\"lang-java prettyprint-override\"><code>@ExtendWith(SpringExtension.class)\n@DataJpaTest\n@SpringBootTest\npublic class CustomerRepositoryTests {\n}\n</code></pre>\nThe error looks like try to say that there are multiple inizializations, I suppose that each annotation try to do its own:\n<pre><code>  [ERROR] Tests run: 1, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 0.067 s &lt;&lt;&lt; FAILURE! - in com.example.accessingdatajpa.CustomerRepositoryTests\n  [ERROR] com.example.accessingdatajpa.CustomerRepositoryTests  Time elapsed: 0.067 s  &lt;&lt;&lt; ERROR!\n  java.lang.IllegalStateException: Configuration error: found multiple declarations of @BootstrapWith for test class [com.example.accessingdatajpa.CustomerRepositoryTests]: [@org.springframework.test.context.BootstrapWith(value=org.springframework.boot.test.autoconfigure.orm.jpa.DataJpaTestContextBootstrapper.class), @org.springframework.test.context.BootstrapWith(value=org.springframework.boot.test.context.SpringBootTestContextBootstrapper.class)]\n</code></pre>\n</li>\n<li>Setting only <code>@SpringBootTest</code>\n<pre class=\"lang-java prettyprint-override\"><code>@ExtendWith(SpringExtension.class)\n@SpringBootTest\npublic class CustomerRepositoryTests {}\n</code></pre>\nThen I can not use the <code>TestEntityManager</code> and still is not able to inject the repository\n<pre><code>17:29:01.951 [main] DEBUG org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Neither @ContextConfiguration nor @ContextHierarchy found for test class [CustomerRepositoryTests]: using SpringBootContextLoader\n17:29:01.954 [main] DEBUG org.springframework.test.context.support.AbstractContextLoader - Could not detect default resource locations for test class [com.example.accessingdatajpa.CustomerRepositoryTests]: no resource found for suffixes {-context.xml, Context.groovy}.\n17:29:01.954 [main] INFO org.springframework.test.context.support.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [com.example.accessingdatajpa.CustomerRepositoryTests]: CustomerRepositoryTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.\n17:29:01.964 [main] DEBUG org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Using ContextCustomizers for test class [CustomerRepositoryTests]: [ExcludeFilterContextCustomizer, DuplicateJsonObjectContextCustomizer, MockitoContextCustomizer, TestRestTemplateContextCustomizer, DisableObservabilityContextCustomizer, PropertyMappingContextCustomizer, Customizer]\n[ERROR] Tests run: 1, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 0.117 s &lt;&lt;&lt; FAILURE! - in com.example.accessingdatajpa.CustomerRepositoryTests\n[ERROR] com.example.accessingdatajpa.CustomerRepositoryTests  Time elapsed: 0.116 s  &lt;&lt;&lt; ERROR!\njava.lang.NullPointerException: Cannot invoke &quot;java.lang.Class.getName()&quot; because &quot;found&quot; is null\n</code></pre>\n</li>\n<li>And <code>@SpringBootTest(classes = {CustomerRepository.class})</code>:\n<pre class=\"lang-java prettyprint-override\"><code>@ExtendWith(SpringExtension.class)\n@SpringBootTest(classes = {CustomerRepository.class})\npublic class CustomerRepositoryTests {}\n</code></pre>\nWith error:\n<pre><code>org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'com.example.accessingdatajpa.CustomerRepositoryTests': Unsatisfied dependency expressed through field 'customers': No qualifying bean of type 'com.example.accessingdatajpa.CustomerRepository' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}\n</code></pre>\n</li>\n</ul>\n<p>Maybe the solution is related to <code>[com.example.accessingdatajpa.CustomerRepositoryTests]: CustomerRepositoryTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.</code>. But how to do it exactly?</p>\n<p>BTW: I found <a href=\"https://stackoverflow.com/questions/58175467/testing-spring-boot-library-modules\">this response</a> in Stackoverflow, but it is not working. Maybe because the Spring version.</p>\n"},{"tags":["java","mongodb","spring-boot","serialization","jackson"],"answers":[{"tags":[],"owner":{"account_id":13141463,"reputation":116,"user_id":9492915,"display_name":"SputNick"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1674738663,"creation_date":1674724433,"answer_id":75244141,"question_id":75238797,"body_markdown":"In Springboot, we have used the RedisTemplate to connect to the redis instance running in the cloud. The RedisTemplate is configured as a custom bean in the spring configuration. There you have the option of adding a custom serializer/deserializer. We have used spring&#39;s **GenericJackson2JsonRedisSerializer**, this serializer includes the object&#39;s type names in the serialized string and this would help during deserialization.\r\n\r\nIf you want to add any custom logic during serialization and deserialization, you can extend this class and override the respective methods.\r\n\r\nThe custom serializer can then be added to the redis template using the following code.\r\n\r\n    @Bean\r\n    public RedisTemplate&lt;String, Map&lt;String, Object&gt;&gt; redisTemplateStandAlone(LettuceConnectionFactory redisConnectionFactory) {\r\n    \tGenericJackson2JsonRedisSerializer serializer = new GenericJackson2JsonRedisSerializer();    \t      \r\n        RedisTemplate&lt;String, Map&lt;String, Object&gt;&gt; redisTemplate = new RedisTemplate&lt;&gt;();\r\n        redisTemplate.setConnectionFactory(redisConnectionFactory);\r\n        redisTemplate.setKeySerializer(serializer);\r\n        redisTemplate.setValueSerializer(serializer);         \r\n        redisTemplate.afterPropertiesSet();\r\n        return redisTemplate;\r\n    }\r\n\r\n\r\nIn case of Mongo DB, I believe a similar concept can be applied using custom converters.\r\n\r\nThe following sample code shows how to configure custom converters in your mongo configuration in spring\r\n\r\n      @Override\r\n      public MongoCustomConversions customConversions() {\r\n        List&lt;Converter&lt;?, ?&gt;&gt; converters = new ArrayList&lt;Converter&lt;?, ?&gt;&gt;();\r\n        converters.add(new CustomConverter());\r\n        return new MongoCustomConversions(converters);\r\n    }\r\n\r\n\r\nplease refer to the following links for more information on the same\r\n\r\n\r\n- https://docs.spring.io/spring-data/data-mongo/docs/1.5.1.RELEASE/reference/html/mapping-chapter.html\r\n- https://www.baeldung.com/spring-data-mongodb-index-annotations-converter\r\n- https://www.baeldung.com/spring-data-mongodb-zoneddatetime\r\n","title":"Java Serializer and Deserializer for MongoDB and Redis","body":"<p>In Springboot, we have used the RedisTemplate to connect to the redis instance running in the cloud. The RedisTemplate is configured as a custom bean in the spring configuration. There you have the option of adding a custom serializer/deserializer. We have used spring's <strong>GenericJackson2JsonRedisSerializer</strong>, this serializer includes the object's type names in the serialized string and this would help during deserialization.</p>\n<p>If you want to add any custom logic during serialization and deserialization, you can extend this class and override the respective methods.</p>\n<p>The custom serializer can then be added to the redis template using the following code.</p>\n<pre><code>@Bean\npublic RedisTemplate&lt;String, Map&lt;String, Object&gt;&gt; redisTemplateStandAlone(LettuceConnectionFactory redisConnectionFactory) {\n    GenericJackson2JsonRedisSerializer serializer = new GenericJackson2JsonRedisSerializer();             \n    RedisTemplate&lt;String, Map&lt;String, Object&gt;&gt; redisTemplate = new RedisTemplate&lt;&gt;();\n    redisTemplate.setConnectionFactory(redisConnectionFactory);\n    redisTemplate.setKeySerializer(serializer);\n    redisTemplate.setValueSerializer(serializer);         \n    redisTemplate.afterPropertiesSet();\n    return redisTemplate;\n}\n</code></pre>\n<p>In case of Mongo DB, I believe a similar concept can be applied using custom converters.</p>\n<p>The following sample code shows how to configure custom converters in your mongo configuration in spring</p>\n<pre><code>  @Override\n  public MongoCustomConversions customConversions() {\n    List&lt;Converter&lt;?, ?&gt;&gt; converters = new ArrayList&lt;Converter&lt;?, ?&gt;&gt;();\n    converters.add(new CustomConverter());\n    return new MongoCustomConversions(converters);\n}\n</code></pre>\n<p>please refer to the following links for more information on the same</p>\n<ul>\n<li><a href=\"https://docs.spring.io/spring-data/data-mongo/docs/1.5.1.RELEASE/reference/html/mapping-chapter.html\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-data/data-mongo/docs/1.5.1.RELEASE/reference/html/mapping-chapter.html</a></li>\n<li><a href=\"https://www.baeldung.com/spring-data-mongodb-index-annotations-converter\" rel=\"nofollow noreferrer\">https://www.baeldung.com/spring-data-mongodb-index-annotations-converter</a></li>\n<li><a href=\"https://www.baeldung.com/spring-data-mongodb-zoneddatetime\" rel=\"nofollow noreferrer\">https://www.baeldung.com/spring-data-mongodb-zoneddatetime</a></li>\n</ul>\n"}],"owner":{"account_id":18044315,"reputation":1227,"user_id":13115701,"display_name":"Paul Marcelin Bejan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":450,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75244141,"answer_count":1,"score":0,"last_activity_date":1674738663,"creation_date":1674674130,"question_id":75238797,"body_markdown":"in the past, I used the Jackson annotation called @JsonSerialize and @JsonDeserialize to serialize java object to json and vice versa:\r\n\r\n    public class Dummy {\r\n\r\n        @JsonSerialize(using = CustomNumberSerializer.class)\r\n        @JsonDeserialize(using = CustomNumberDeserializer.class)\r\n        public BigDecimal money;\r\n    \r\n        @JsonSerialize(using = CustomDateSerializer.class)\r\n        @JsonDeserialize(using = CustomDateDeserializer.class)\r\n        public Date eventDate;\r\n\r\n    }\r\n\r\nand that works perfectly as I want. \r\n&lt;p&gt;Now I&#39;m wondering if there is any alternative that does the same job, but during the calls to databases like MongoDB and Redis.\r\n\r\nSo for example:\r\n\r\n    BigDecimal money = new BigDecimal(&quot;1234.56&quot;);\r\n    Date eventDate = new Date();\r\n    Dummy dummy = new Dummy(money, eventDate);\r\n\r\nStoring the dummy object into DB, I want to see the variables stored as String \r\n&lt;br&gt;money &quot;1.234,56&quot; \r\n&lt;br&gt;eventDate &quot;25/01/2023&quot;\r\n&lt;p&gt;when I query the db, I want that those strings are transformed back to their Type.\r\n&lt;br&gt;In this way, I can use a specific patter for each field.\r\n\r\nAny documentation/tutorial about that would be really appreciated.","title":"Java Serializer and Deserializer for MongoDB and Redis","body":"<p>in the past, I used the Jackson annotation called @JsonSerialize and @JsonDeserialize to serialize java object to json and vice versa:</p>\n<pre><code>public class Dummy {\n\n    @JsonSerialize(using = CustomNumberSerializer.class)\n    @JsonDeserialize(using = CustomNumberDeserializer.class)\n    public BigDecimal money;\n\n    @JsonSerialize(using = CustomDateSerializer.class)\n    @JsonDeserialize(using = CustomDateDeserializer.class)\n    public Date eventDate;\n\n}\n</code></pre>\n<p>and that works perfectly as I want.</p>\n<p>Now I'm wondering if there is any alternative that does the same job, but during the calls to databases like MongoDB and Redis.\n<p>So for example:</p>\n<pre><code>BigDecimal money = new BigDecimal(&quot;1234.56&quot;);\nDate eventDate = new Date();\nDummy dummy = new Dummy(money, eventDate);\n</code></pre>\n<p>Storing the dummy object into DB, I want to see the variables stored as String\n<br>money &quot;1.234,56&quot;\n<br>eventDate &quot;25/01/2023&quot;</p>\n<p>when I query the db, I want that those strings are transformed back to their Type.\n<br>In this way, I can use a specific patter for each field.\n<p>Any documentation/tutorial about that would be really appreciated.</p>\n"},{"tags":["java","spring","spring-boot","spring-security"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1674714104,"post_id":75242167,"comment_id":132773815,"body_markdown":"The failed request doesn&#39;t include a BASIC auth header, so no authentication, no access.","body":"The failed request doesn&#39;t include a BASIC auth header, so no authentication, no access."},{"owner":{"account_id":18207211,"reputation":134,"user_id":13250408,"display_name":"Ledrake"},"score":0,"creation_date":1674722342,"post_id":75242167,"comment_id":132775482,"body_markdown":"@M.Deinum I added the fetch request to the question, i have an auth header on the request , am i doing it wrong??","body":"@M.Deinum I added the fetch request to the question, i have an auth header on the request , am i doing it wrong??"},{"owner":{"account_id":6463892,"reputation":15974,"user_id":5277820,"accept_rate":68,"display_name":"dur"},"score":1,"creation_date":1674735702,"post_id":75242167,"comment_id":132779568,"body_markdown":"@Ledrake Your screenshot shows that you didn&#39;t send an `Authentication` header, so you are not logged in. It looks like your React script is wrong.","body":"@Ledrake Your screenshot shows that you didn&#39;t send an <code>Authentication</code> header, so you are not logged in. It looks like your React script is wrong."},{"owner":{"account_id":7134819,"reputation":5058,"user_id":5454842,"display_name":"Marcus Hert da Coregio"},"score":0,"creation_date":1674739095,"post_id":75242167,"comment_id":132780593,"body_markdown":"IIIRC, you cannot use `allowedOrigins = *` with `allowCredentials = true`. You&#39;d have to specify your frontend URL, like `allowedOrigins = http://localhost:3000`","body":"IIIRC, you cannot use <code>allowedOrigins = *</code> with <code>allowCredentials = true</code>. You&#39;d have to specify your frontend URL, like <code>allowedOrigins = http:&#47;&#47;localhost:3000</code>"}],"owner":{"account_id":18207211,"reputation":134,"user_id":13250408,"display_name":"Ledrake"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1674760346,"answer_count":0,"score":0,"last_activity_date":1674738209,"creation_date":1674705992,"question_id":75242167,"body_markdown":"Here is the security config from the Spring Boot backend:\r\n\r\n```java\r\n@Configuration\r\n@EnableWebSecurity\r\n@EnableGlobalMethodSecurity(securedEnabled = true, prePostEnabled = true)\r\npublic class SecurityConfig\r\n{\r\n    \r\n    @Resource\r\n    private DataSource dataSource;\r\n \r\n    @Autowired\r\n    private UserDetailsService userDetailsService;\r\n\r\n    @Bean\r\n    SecurityFilterChain defaultSecurityFilterChain(HttpSecurity http) throws Exception\r\n    {\r\n        CorsConfiguration corsConfiguration = new CorsConfiguration();\r\n        corsConfiguration.setAllowedHeaders(List.of(&quot;Authorization&quot;, &quot;Cache-Control&quot;, &quot;Content-Type&quot;));\r\n        corsConfiguration.setAllowedMethods(List.of(&quot;GET&quot;, &quot;POST&quot;, &quot;PUT&quot;, &quot;DELETE&quot;, &quot;PUT&quot;,&quot;OPTIONS&quot;,&quot;PATCH&quot;, &quot;DELETE&quot;));\r\n        corsConfiguration.setAllowedOriginPatterns(List.of(&quot;*&quot;));\r\n        corsConfiguration.setAllowCredentials(true);\r\n        corsConfiguration.setExposedHeaders(List.of(&quot;Authorization&quot;));\r\n        \r\n        \r\n        http\r\n            .authorizeHttpRequests(auth -&gt; auth\r\n                .requestMatchers(HttpMethod.POST,  &quot;/api/users&quot;).permitAll()\r\n                 requestMatchers(&quot;/api/authority&quot;).hasAuthority(Constants.ADMIN)\r\n                .anyRequest().authenticated()\r\n            )\r\n            .userDetailsService(userDetailsService)\r\n            .sessionManagement(s -&gt; s\r\n                .sessionCreationPolicy(SessionCreationPolicy.STATELESS)\r\n            )\r\n            .cors()\r\n                .configurationSource(request -&gt; corsConfiguration)\r\n                .and()\r\n            .csrf().disable()\r\n            .httpBasic();\r\n               \r\n        http\r\n            .headers()\r\n                .frameOptions().sameOrigin();\r\n        \r\n        return http.build();\r\n    }\r\n}\r\n```\r\n\r\nHere is the failed request in javascript React:\r\n\r\n```js\r\nconst headers = {}\r\nheaders[&quot;Authorization&quot;] = &quot;Basic &quot; + btoa(&quot;root:root&quot;);\r\nconst res = await fetch(&quot;http://localhost:7979/api/users&quot;, headers);\r\nconsole.log(res);\r\nconst data = await res.json();\r\nconsole.log(data);\r\n```\r\n\r\nthe spring backend is run on `localhost:7979` and the React app is run on `localhost:3000`. Also, maybe important, I am on Windows and run the React app on Windows Subsystem for Linux but the Spring app uses the default runner of Intellij.\r\n\r\nI&#39;m quite stumped and I can&#39;t figure out how to debug Spring Security, everyone just says enable logging which I have done but the Spring Security logging offers 0 useful info (unless I don&#39;t understand what I&#39;m seeing)\r\n\r\n\r\n# Update:\r\n\r\nI found a way to activate logging on Spring Security, here are the logs for a successful request:\r\n\r\n```\r\n2023-01-26T06:04:15.985+02:00 DEBUG 9708 --- [nio-7979-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/users\r\n2023-01-26T06:04:16.069+02:00 DEBUG 9708 --- [nio-7979-exec-1] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user\r\n2023-01-26T06:04:16.070+02:00 DEBUG 9708 --- [nio-7979-exec-1] o.s.s.w.a.www.BasicAuthenticationFilter  : Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=gr.hua.dit.it22023_it22026.models.SecurityUserDetails@6bb270f7, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=172.20.196.70, SessionId=null], Granted Authorities=[ADMIN]]\r\n2023-01-26T06:04:16.071+02:00 DEBUG 9708 --- [nio-7979-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/users\r\n```\r\n\r\nAnd here are the logs for a failed request:\r\n\r\n```\r\n2023-01-26T02:02:23.041+02:00 DEBUG 17932 --- [nio-7979-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/users\r\n2023-01-26T02:02:23.042+02:00 DEBUG 17932 --- [nio-7979-exec-1] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext\r\n2023-01-26T02:02:23.042+02:00 DEBUG 17932 --- [nio-7979-exec-1] s.w.a.DelegatingAuthenticationEntryPoint : Trying to match using RequestHeaderRequestMatcher [expectedHeaderName=X-Requested-With, expectedHeaderValue=XMLHttpRequest]\r\n2023-01-26T02:02:23.042+02:00 DEBUG 17932 --- [nio-7979-exec-1] s.w.a.DelegatingAuthenticationEntryPoint : No match found. Using default entry point org.springframework.security.web.authentication.www.BasicAuthenticationEntryPoint@456e1a23\r\n2023-01-26T02:02:23.042+02:00 DEBUG 17932 --- [nio-7979-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /error\r\n2023-01-26T02:02:23.042+02:00 DEBUG 17932 --- [nio-7979-exec-1] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext\r\n2023-01-26T02:02:23.042+02:00 DEBUG 17932 --- [nio-7979-exec-1] s.w.a.DelegatingAuthenticationEntryPoint : Trying to match using RequestHeaderRequestMatcher [expectedHeaderName=X-Requested-With, expectedHeaderValue=XMLHttpRequest]\r\n2023-01-26T02:02:23.042+02:00 DEBUG 17932 --- [nio-7979-exec-1] s.w.a.DelegatingAuthenticationEntryPoint : No match found. Using default entry point org.springframework.security.web.authentication.www.BasicAuthenticationEntryPoint@456e1a23\r\n```\r\n\r\nScreenshot of the request:\r\n[![enter image description here][1]][1]\r\n[![enter image description here][2]][2]\r\n[![enter image description here][3]][3]\r\n\r\nThe Request but in text , incase you want to copy anything\r\n```\r\nGeneral:\r\n{\r\nRequest URL: http://localhost:7979/api/users\r\nRequest Method: GET\r\nStatus Code: 401 \r\nRemote Address: [::1]:7979\r\nReferrer Policy: strict-origin-when-cross-origin\r\n}\r\n\r\nResponse Headers:\r\n{\r\nHTTP/1.1 401\r\nVary: Origin\r\nVary: Access-Control-Request-Method\r\nVary: Access-Control-Request-Headers\r\nAccess-Control-Allow-Origin: http://localhost:3000\r\nAccess-Control-Expose-Headers: Authorization\r\nAccess-Control-Allow-Credentials: true\r\nWWW-Authenticate: Basic realm=&quot;Realm&quot;\r\nX-Content-Type-Options: nosniff\r\nX-XSS-Protection: 0\r\nCache-Control: no-cache, no-store, max-age=0, must-revalidate\r\nPragma: no-cache\r\nExpires: 0\r\nX-Frame-Options: SAMEORIGIN\r\nWWW-Authenticate: Basic realm=&quot;Realm&quot;\r\nContent-Length: 0\r\nDate: Thu, 26 Jan 2023 11:32:00 GMT\r\nKeep-Alive: timeout=60\r\nConnection: keep-alive\r\n}\r\n\r\nRequest Headers:\r\n{\r\nGET /api/users HTTP/1.1\r\nAccept: */*\r\nAccept-Encoding: gzip, deflate, br\r\nAccept-Language: en-GB,en;q=0.9,el-GR;q=0.8,el;q=0.7,en-US;q=0.6\r\nConnection: keep-alive\r\nHost: localhost:7979\r\nOrigin: http://localhost:3000\r\nReferer: http://localhost:3000/\r\nSec-Fetch-Dest: empty\r\nSec-Fetch-Mode: cors\r\nSec-Fetch-Site: same-site\r\nUser-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36\r\nsec-ch-ua: &quot;Not_A Brand&quot;;v=&quot;99&quot;, &quot;Google Chrome&quot;;v=&quot;109&quot;, &quot;Chromium&quot;;v=&quot;109&quot;\r\nsec-ch-ua-mobile: ?0\r\nsec-ch-ua-platform: &quot;Windows&quot;\r\n}\r\n```\r\n\r\nI don&#39;t understand the fail request logs at all, can any Spring Boot security expert help?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/OmynM.png\r\n  [2]: https://i.stack.imgur.com/KrqaF.png\r\n  [3]: https://i.stack.imgur.com/d5IUi.png","title":"React request to Spring Boot database fails due to Spring Security","body":"<p>Here is the security config from the Spring Boot backend:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\n@EnableWebSecurity\n@EnableGlobalMethodSecurity(securedEnabled = true, prePostEnabled = true)\npublic class SecurityConfig\n{\n    \n    @Resource\n    private DataSource dataSource;\n \n    @Autowired\n    private UserDetailsService userDetailsService;\n\n    @Bean\n    SecurityFilterChain defaultSecurityFilterChain(HttpSecurity http) throws Exception\n    {\n        CorsConfiguration corsConfiguration = new CorsConfiguration();\n        corsConfiguration.setAllowedHeaders(List.of(&quot;Authorization&quot;, &quot;Cache-Control&quot;, &quot;Content-Type&quot;));\n        corsConfiguration.setAllowedMethods(List.of(&quot;GET&quot;, &quot;POST&quot;, &quot;PUT&quot;, &quot;DELETE&quot;, &quot;PUT&quot;,&quot;OPTIONS&quot;,&quot;PATCH&quot;, &quot;DELETE&quot;));\n        corsConfiguration.setAllowedOriginPatterns(List.of(&quot;*&quot;));\n        corsConfiguration.setAllowCredentials(true);\n        corsConfiguration.setExposedHeaders(List.of(&quot;Authorization&quot;));\n        \n        \n        http\n            .authorizeHttpRequests(auth -&gt; auth\n                .requestMatchers(HttpMethod.POST,  &quot;/api/users&quot;).permitAll()\n                 requestMatchers(&quot;/api/authority&quot;).hasAuthority(Constants.ADMIN)\n                .anyRequest().authenticated()\n            )\n            .userDetailsService(userDetailsService)\n            .sessionManagement(s -&gt; s\n                .sessionCreationPolicy(SessionCreationPolicy.STATELESS)\n            )\n            .cors()\n                .configurationSource(request -&gt; corsConfiguration)\n                .and()\n            .csrf().disable()\n            .httpBasic();\n               \n        http\n            .headers()\n                .frameOptions().sameOrigin();\n        \n        return http.build();\n    }\n}\n</code></pre>\n<p>Here is the failed request in javascript React:</p>\n<pre class=\"lang-js prettyprint-override\"><code>const headers = {}\nheaders[&quot;Authorization&quot;] = &quot;Basic &quot; + btoa(&quot;root:root&quot;);\nconst res = await fetch(&quot;http://localhost:7979/api/users&quot;, headers);\nconsole.log(res);\nconst data = await res.json();\nconsole.log(data);\n</code></pre>\n<p>the spring backend is run on <code>localhost:7979</code> and the React app is run on <code>localhost:3000</code>. Also, maybe important, I am on Windows and run the React app on Windows Subsystem for Linux but the Spring app uses the default runner of Intellij.</p>\n<p>I'm quite stumped and I can't figure out how to debug Spring Security, everyone just says enable logging which I have done but the Spring Security logging offers 0 useful info (unless I don't understand what I'm seeing)</p>\n<h1>Update:</h1>\n<p>I found a way to activate logging on Spring Security, here are the logs for a successful request:</p>\n<pre><code>2023-01-26T06:04:15.985+02:00 DEBUG 9708 --- [nio-7979-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/users\n2023-01-26T06:04:16.069+02:00 DEBUG 9708 --- [nio-7979-exec-1] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user\n2023-01-26T06:04:16.070+02:00 DEBUG 9708 --- [nio-7979-exec-1] o.s.s.w.a.www.BasicAuthenticationFilter  : Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=gr.hua.dit.it22023_it22026.models.SecurityUserDetails@6bb270f7, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=172.20.196.70, SessionId=null], Granted Authorities=[ADMIN]]\n2023-01-26T06:04:16.071+02:00 DEBUG 9708 --- [nio-7979-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/users\n</code></pre>\n<p>And here are the logs for a failed request:</p>\n<pre><code>2023-01-26T02:02:23.041+02:00 DEBUG 17932 --- [nio-7979-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/users\n2023-01-26T02:02:23.042+02:00 DEBUG 17932 --- [nio-7979-exec-1] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext\n2023-01-26T02:02:23.042+02:00 DEBUG 17932 --- [nio-7979-exec-1] s.w.a.DelegatingAuthenticationEntryPoint : Trying to match using RequestHeaderRequestMatcher [expectedHeaderName=X-Requested-With, expectedHeaderValue=XMLHttpRequest]\n2023-01-26T02:02:23.042+02:00 DEBUG 17932 --- [nio-7979-exec-1] s.w.a.DelegatingAuthenticationEntryPoint : No match found. Using default entry point org.springframework.security.web.authentication.www.BasicAuthenticationEntryPoint@456e1a23\n2023-01-26T02:02:23.042+02:00 DEBUG 17932 --- [nio-7979-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /error\n2023-01-26T02:02:23.042+02:00 DEBUG 17932 --- [nio-7979-exec-1] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext\n2023-01-26T02:02:23.042+02:00 DEBUG 17932 --- [nio-7979-exec-1] s.w.a.DelegatingAuthenticationEntryPoint : Trying to match using RequestHeaderRequestMatcher [expectedHeaderName=X-Requested-With, expectedHeaderValue=XMLHttpRequest]\n2023-01-26T02:02:23.042+02:00 DEBUG 17932 --- [nio-7979-exec-1] s.w.a.DelegatingAuthenticationEntryPoint : No match found. Using default entry point org.springframework.security.web.authentication.www.BasicAuthenticationEntryPoint@456e1a23\n</code></pre>\n<p>Screenshot of the request:\n<a href=\"https://i.stack.imgur.com/OmynM.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/OmynM.png\" alt=\"enter image description here\" /></a>\n<a href=\"https://i.stack.imgur.com/KrqaF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/KrqaF.png\" alt=\"enter image description here\" /></a>\n<a href=\"https://i.stack.imgur.com/d5IUi.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/d5IUi.png\" alt=\"enter image description here\" /></a></p>\n<p>The Request but in text , incase you want to copy anything</p>\n<pre><code>General:\n{\nRequest URL: http://localhost:7979/api/users\nRequest Method: GET\nStatus Code: 401 \nRemote Address: [::1]:7979\nReferrer Policy: strict-origin-when-cross-origin\n}\n\nResponse Headers:\n{\nHTTP/1.1 401\nVary: Origin\nVary: Access-Control-Request-Method\nVary: Access-Control-Request-Headers\nAccess-Control-Allow-Origin: http://localhost:3000\nAccess-Control-Expose-Headers: Authorization\nAccess-Control-Allow-Credentials: true\nWWW-Authenticate: Basic realm=&quot;Realm&quot;\nX-Content-Type-Options: nosniff\nX-XSS-Protection: 0\nCache-Control: no-cache, no-store, max-age=0, must-revalidate\nPragma: no-cache\nExpires: 0\nX-Frame-Options: SAMEORIGIN\nWWW-Authenticate: Basic realm=&quot;Realm&quot;\nContent-Length: 0\nDate: Thu, 26 Jan 2023 11:32:00 GMT\nKeep-Alive: timeout=60\nConnection: keep-alive\n}\n\nRequest Headers:\n{\nGET /api/users HTTP/1.1\nAccept: */*\nAccept-Encoding: gzip, deflate, br\nAccept-Language: en-GB,en;q=0.9,el-GR;q=0.8,el;q=0.7,en-US;q=0.6\nConnection: keep-alive\nHost: localhost:7979\nOrigin: http://localhost:3000\nReferer: http://localhost:3000/\nSec-Fetch-Dest: empty\nSec-Fetch-Mode: cors\nSec-Fetch-Site: same-site\nUser-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36\nsec-ch-ua: &quot;Not_A Brand&quot;;v=&quot;99&quot;, &quot;Google Chrome&quot;;v=&quot;109&quot;, &quot;Chromium&quot;;v=&quot;109&quot;\nsec-ch-ua-mobile: ?0\nsec-ch-ua-platform: &quot;Windows&quot;\n}\n</code></pre>\n<p>I don't understand the fail request logs at all, can any Spring Boot security expert help?</p>\n"},{"tags":["java","android","spring","android-volley"],"answers":[{"tags":[],"owner":{"account_id":10435634,"reputation":220,"user_id":7694025,"display_name":"Bessem Manita"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1647522209,"creation_date":1647522209,"answer_id":71512791,"question_id":71511992,"body_markdown":"Use ip adress of pc where spring boot app turn (**ex :** http://192.168.100.100:port) as base url for volley request.\r\n\r\nThe two device must be connected to the same access point(WI-FI).","title":"How to test springboot with from an android emulator app","body":"<p>Use ip adress of pc where spring boot app turn (<strong>ex :</strong> <a href=\"http://192.168.100.100:port\" rel=\"nofollow noreferrer\">http://192.168.100.100:port</a>) as base url for volley request.</p>\n<p>The two device must be connected to the same access point(WI-FI).</p>\n"}],"owner":{"account_id":24465371,"reputation":95,"user_id":18385822,"display_name":"Omolayo Seun"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":462,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71512791,"answer_count":1,"score":0,"last_activity_date":1674737948,"creation_date":1647518640,"question_id":71511992,"body_markdown":"I am working on an android project which I used springboot for the webservice. It the any possible way of testing the spring boot project before deployment. What I mean is-*how can I run the spring boot project and and make the app from the emulator to work with it*.\r\nI&#39;m using volley for the http client request. ","title":"How to test springboot with from an android emulator app","body":"<p>I am working on an android project which I used springboot for the webservice. It the any possible way of testing the spring boot project before deployment. What I mean is-<em>how can I run the spring boot project and and make the app from the emulator to work with it</em>.\nI'm using volley for the http client request.</p>\n"},{"tags":["java","android","xml","spring","localdatetime"],"comments":[{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1670985035,"post_id":74792412,"comment_id":131997716,"body_markdown":"What does your JSON look like? A [mre], please? And why the xml tag?","body":"What does your JSON look like? A <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, please? And why the xml tag?"},{"owner":{"account_id":2179728,"reputation":73047,"user_id":10819573,"display_name":"Arvind Kumar Avinash"},"score":1,"creation_date":1671032372,"post_id":74792412,"comment_id":132010661,"body_markdown":"You do not need a `DateTimeFormatter`. Simply use `LocalDateTime.parse(routeDate.getText().toString())` as your date-time string is already in the ISO 8601 format.","body":"You do not need a <code>DateTimeFormatter</code>. Simply use <code>LocalDateTime.parse(routeDate.getText().toString())</code> as your date-time string is already in the ISO 8601 format."}],"owner":{"account_id":23300269,"reputation":3,"user_id":17381023,"display_name":"Man Tas"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":247,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1674737594,"creation_date":1670978193,"question_id":74792412,"body_markdown":"I have built android app. The application gets date from a string field.\r\nI parse that string to right format to get LocalDateTime.\r\n```java\r\nDateTimeFormatter dateTimeFormatter = DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd HH:mm:ss&quot;);\r\n\r\nLocalDateTime date = LocalDateTime.parse(routeDate.getText().toString(), dateTimeFormatter);\r\n```\r\nbut when i make post request it fails. My backend is springboot app. I get from it error:\r\n```java\r\nWARN 29948 --- [nio-8080-exec-5] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved [org.springframework.http.converter.HttpMessageNotReadableException: JSON parse error: Cannot deserialize value of type `java.time.LocalDateTime` from Object value (token `JsonToken.START_OBJECT`); nested exception is com.fasterxml.jackson.databind.exc.MismatchedInputException: Cannot deserialize value of type `java.time.LocalDateTime` from Object value (token `JsonToken.START_OBJECT`)&lt;EOL&gt; at [Source: (org.springframework.util.StreamUtils$NonClosingInputStream); line: 1, column: 9] (through reference chain: com.university.logisticsappbe.model.api.CreateCheckpointRequest[&quot;date&quot;])]\r\n```\r\n\r\nBy logging out date to console I get 2022-02-02T10:00\r\n\r\nAny ideas what problem it could be?\r\n\r\nOn angular web application post works.","title":"Can not make POST, getting error &quot;Cannot deserialize value of type `java.time.LocalDateTime` from Object value&quot;","body":"<p>I have built android app. The application gets date from a string field.\nI parse that string to right format to get LocalDateTime.</p>\n<pre class=\"lang-java prettyprint-override\"><code>DateTimeFormatter dateTimeFormatter = DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd HH:mm:ss&quot;);\n\nLocalDateTime date = LocalDateTime.parse(routeDate.getText().toString(), dateTimeFormatter);\n</code></pre>\n<p>but when i make post request it fails. My backend is springboot app. I get from it error:</p>\n<pre class=\"lang-java prettyprint-override\"><code>WARN 29948 --- [nio-8080-exec-5] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved [org.springframework.http.converter.HttpMessageNotReadableException: JSON parse error: Cannot deserialize value of type `java.time.LocalDateTime` from Object value (token `JsonToken.START_OBJECT`); nested exception is com.fasterxml.jackson.databind.exc.MismatchedInputException: Cannot deserialize value of type `java.time.LocalDateTime` from Object value (token `JsonToken.START_OBJECT`)&lt;EOL&gt; at [Source: (org.springframework.util.StreamUtils$NonClosingInputStream); line: 1, column: 9] (through reference chain: com.university.logisticsappbe.model.api.CreateCheckpointRequest[&quot;date&quot;])]\n</code></pre>\n<p>By logging out date to console I get 2022-02-02T10:00</p>\n<p>Any ideas what problem it could be?</p>\n<p>On angular web application post works.</p>\n"},{"tags":["java","android","firebase"],"comments":[{"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1675096887,"post_id":75246327,"comment_id":132850253,"body_markdown":"If the app crashes, there is a stack trace. Please look that up on logcat, and add it to your question.","body":"If the app crashes, there is a stack trace. Please look that up on logcat, and add it to your question."},{"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":1,"creation_date":1675097406,"post_id":75246327,"comment_id":132850451,"body_markdown":"Besides that, if you encounter problems, it&#39;s best to create a [MCVE](https://stackoverflow.com/help/mcve) when posting a question. You posted almost **300** (three hundred) lines of code for this issue. That&#39;s a lot for people to parse and try to debug online. Please edit your question and isolate the problem, in that way you increase your chances of being helped.  Please take a moment and read [how to ask a question](https://stackoverflow.com/help/how-to-ask).","body":"Besides that, if you encounter problems, it&#39;s best to create a <a href=\"https://stackoverflow.com/help/mcve\">MCVE</a> when posting a question. You posted almost <b>300</b> (three hundred) lines of code for this issue. That&#39;s a lot for people to parse and try to debug online. Please edit your question and isolate the problem, in that way you increase your chances of being helped.  Please take a moment and read <a href=\"https://stackoverflow.com/help/how-to-ask\">how to ask a question</a>."}],"owner":{"account_id":25393624,"reputation":144,"user_id":19204200,"display_name":"routerking2802"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":55,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1674737164,"creation_date":1674737164,"question_id":75246327,"body_markdown":"I&#39;m new to android and was developing a quiz game. My problem is that when the second player connects to the game, where the first player is already waiting, the second player&#39;s game page closes while the first player doesn&#39;t. To manage the player&#39;s turn, I created a reference to the &quot;turn&quot; node and then on the &quot;setQuiz()&quot; method I used the reference to retrieve the username of the player who has the turn. Can someone help me? Thank you!\r\n\r\n\r\n```\r\npackage com.example.genialone;\r\n\r\nimport android.app.ProgressDialog;\r\nimport android.net.Uri;\r\nimport android.os.Bundle;\r\nimport android.view.View;\r\nimport android.widget.Button;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.annotation.NonNull;\r\n\r\nimport com.bumptech.glide.Glide;\r\nimport com.example.genialone.data.RealtimeDatabase;\r\nimport com.example.genialone.model.TurnManager;\r\nimport com.example.genialone.model.Utente;\r\nimport com.example.genialone.preference.PreferencesManager;\r\nimport com.example.genialone.util.RandomCategory;\r\nimport com.google.firebase.database.DataSnapshot;\r\nimport com.google.firebase.database.DatabaseError;\r\nimport com.google.firebase.database.DatabaseReference;\r\nimport com.google.firebase.database.FirebaseDatabase;\r\nimport com.google.firebase.database.MutableData;\r\nimport com.google.firebase.database.Query;\r\nimport com.google.firebase.database.Transaction;\r\nimport com.google.firebase.database.ValueEventListener;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.HashMap;\r\nimport java.util.List;\r\nimport java.util.Map;\r\n\r\nimport de.hdodenhof.circleimageview.CircleImageView;\r\n\r\npublic class GiocoActivity extends BaseActivity {\r\n\r\n    private Button next;\r\n    private PreferencesManager preferencesManager;\r\n\r\n    private TextView opponent;\r\n    private CircleImageView imageOpponent;\r\n\r\n    private TextView player;\r\n    private CircleImageView imagePlayer;\r\n    private ProgressDialog progressDialog;\r\n\r\n    private FirebaseDatabase database = FirebaseDatabase.getInstance();\r\n\r\n    private TextView question;\r\n    private Button option1, option2, option3, option4;\r\n    private String rightAnswer;\r\n    private String player1;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_gioco);\r\n\r\n        player = findViewById(R.id.player);\r\n        imagePlayer = findViewById(R.id.imagePlayer);\r\n\r\n        opponent = findViewById(R.id.opponent);\r\n        imageOpponent = findViewById(R.id.imageOpponent);\r\n\r\n        question = findViewById(R.id.question);\r\n\r\n        option1 = findViewById(R.id.option1);\r\n        option2 = findViewById(R.id.option2);\r\n        option3 = findViewById(R.id.option3);\r\n        option4 = findViewById(R.id.option4);\r\n\r\n        preferencesManager = new PreferencesManager(GiocoActivity.this);\r\n        player1 = preferencesManager.getUsername();\r\n\r\n        next = findViewById(R.id.continuaButton);\r\n        next.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                // next turn\r\n            }\r\n        });\r\n\r\n        progressDialog = new ProgressDialog(GiocoActivity.this);\r\n        progressDialog.setCancelable(false);\r\n        progressDialog.setMessage(&quot;In cerca di un avversario...&quot;);\r\n        progressDialog.show();\r\n\r\n        startGame();\r\n    }\r\n\r\n    public void loadProfilePhoto(String user, CircleImageView imageProfilePhoto) {\r\n        DatabaseReference imageRef = database.getReference(&quot;Utenti&quot;).child(user);\r\n\r\n        imageRef.addValueEventListener(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\r\n                String imageUrl = dataSnapshot.child(&quot;imagineProfilo&quot;).getValue(String.class);\r\n                Glide.with(GiocoActivity.this).load(imageUrl)\r\n                        .placeholder(com.firebase.ui.database.R.drawable.common_google_signin_btn_icon_dark)\r\n                        .circleCrop()\r\n                        .error(com.firebase.ui.database.R.drawable.common_google_signin_btn_icon_dark_normal)\r\n                        .into(imageProfilePhoto);\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError databaseError) {\r\n                // Gestione degli errori\r\n            }\r\n        });\r\n    }\r\n\r\n    private void startGame() {\r\n        player.setText(player1);\r\n        loadProfilePhoto(player1, imagePlayer);\r\n        DatabaseReference connectionRef = database.getReference(&quot;connections&quot;);\r\n        Query availableConnections = connectionRef.orderByChild(&quot;player2&quot;).equalTo(null);\r\n\r\n        availableConnections.addListenerForSingleValueEvent(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                if(snapshot.exists()){\r\n                    for (DataSnapshot gameSnapshot : snapshot.getChildren()) {\r\n                        String connectionId = gameSnapshot.getKey();\r\n                        connectionRef.child(connectionId).child(&quot;player2&quot;).setValue(player1);\r\n                        join(connectionId);\r\n                        break;\r\n                    }\r\n                } else {\r\n                    DatabaseReference newRef = database.getReference(&quot;connections&quot;).push();\r\n                    String connectionId = newRef.getKey();\r\n                    assignPlayersToGame(connectionId, player1);\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n            }\r\n        });\r\n    }\r\n\r\n    private void join(String connectionId) {\r\n        DatabaseReference connectionRef = database.getReference(&quot;connections&quot;).child(connectionId);\r\n\r\n        connectionRef.addValueEventListener(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                String usernameOpponent = snapshot.child(&quot;player1&quot;).getValue(String.class);\r\n                showInfoOpponent(usernameOpponent);\r\n                if (progressDialog.isShowing()) {\r\n                    progressDialog.dismiss();\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n            }\r\n        });\r\n    }\r\n\r\n    private String playerTurn;\r\n    private String turnKey;\r\n\r\n    private void assignPlayersToGame(String connectionId, String username) {\r\n        DatabaseReference connectionRef = database.getReference(&quot;connections&quot;).child(connectionId);\r\n        DatabaseReference turnRef = database.getReference(&quot;turn&quot;);\r\n        turnKey = turnRef.push().getKey();\r\n\r\n        Map&lt;String, Object&gt; playerData = new HashMap&lt;&gt;();\r\n        playerData.put(&quot;player1&quot;, username);\r\n        connectionRef.updateChildren(playerData);\r\n        turnRef.updateChildren(playerData);\r\n\r\n        connectionRef.addValueEventListener(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                String usernameOpponent = snapshot.child(&quot;player2&quot;).getValue(String.class);\r\n\r\n                if (usernameOpponent != null) {\r\n                    showInfoOpponent(usernameOpponent);\r\n                    if (progressDialog.isShowing()) {\r\n                        progressDialog.dismiss();\r\n                    }\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n            }\r\n        });\r\n    }\r\n\r\n    private void showInfoOpponent(String username) {\r\n        DatabaseReference usersRef = database.getReference(&quot;Utenti&quot;);\r\n\r\n        usersRef.child(username).addValueEventListener(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                Utente opponentInfo = snapshot.getValue(Utente.class);\r\n                opponent.setText(opponentInfo.getNomeUtente()); // username\r\n                loadProfilePhoto(opponentInfo.getNomeUtente(), imageOpponent); // image profile\r\n                loadPage();\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n            }\r\n        });\r\n    }\r\n\r\n    private void setQuiz(String questionD, ArrayList&lt;String&gt; options, String answer) {\r\n        DatabaseReference turnRef = database.getReference(&quot;turn&quot;).child(turnKey);\r\n\r\n        turnRef.addValueEventListener(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                playerTurn = snapshot.child(&quot;player1&quot;).getValue(String.class);\r\n                if (player1.equals(playerTurn)) {\r\n                    question.setText(questionD);\r\n                    rightAnswer = answer;\r\n                    Button[] buttons = {option1, option2, option3, option4};\r\n\r\n                    for (int i = 0; i &lt; options.size(); i++) {\r\n                        buttons[i].setText(options.get(i));\r\n                    }\r\n                    next.setVisibility(View.VISIBLE);\r\n                } else {\r\n                    progressDialog = new ProgressDialog(GiocoActivity.this);\r\n                    progressDialog.setCancelable(false);\r\n                    progressDialog.setMessage(&quot;Wait...&quot;);\r\n                    progressDialog.show();\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError error) {\r\n                // Gestione degli errori\r\n            }\r\n        });\r\n    }\r\n\r\n    private void loadPage() {\r\n        DatabaseReference quizRef = database.getReference(&quot;Quiz&quot;);\r\n        String category = RandomCategory.getCategory();\r\n\r\n        quizRef.child(category).addValueEventListener(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                int idQuestion = RandomCategory.getQuestion();\r\n                String quest = snapshot.child(&quot;Domande&quot;).child(String.valueOf(idQuestion)).getValue(String.class);\r\n                ArrayList&lt;String&gt; options = new ArrayList&lt;&gt;();\r\n                for (DataSnapshot opt : snapshot.child(&quot;Opzioni&quot;).child(String.valueOf(idQuestion)).getChildren()) {\r\n                    String currentOpt = opt.getValue(String.class);\r\n                    options.add(currentOpt);\r\n                }\r\n                String rightA = snapshot.child(&quot;Risposta&quot;).child(String.valueOf(idQuestion)).getValue(String.class);\r\n                setQuiz(quest, options, rightA);\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n            }\r\n        });\r\n    }\r\n\r\n}\r\n```\r\n","title":"Turn management between 2 players","body":"<p>I'm new to android and was developing a quiz game. My problem is that when the second player connects to the game, where the first player is already waiting, the second player's game page closes while the first player doesn't. To manage the player's turn, I created a reference to the &quot;turn&quot; node and then on the &quot;setQuiz()&quot; method I used the reference to retrieve the username of the player who has the turn. Can someone help me? Thank you!</p>\n<pre><code>package com.example.genialone;\n\nimport android.app.ProgressDialog;\nimport android.net.Uri;\nimport android.os.Bundle;\nimport android.view.View;\nimport android.widget.Button;\nimport android.widget.TextView;\nimport android.widget.Toast;\n\nimport androidx.annotation.NonNull;\n\nimport com.bumptech.glide.Glide;\nimport com.example.genialone.data.RealtimeDatabase;\nimport com.example.genialone.model.TurnManager;\nimport com.example.genialone.model.Utente;\nimport com.example.genialone.preference.PreferencesManager;\nimport com.example.genialone.util.RandomCategory;\nimport com.google.firebase.database.DataSnapshot;\nimport com.google.firebase.database.DatabaseError;\nimport com.google.firebase.database.DatabaseReference;\nimport com.google.firebase.database.FirebaseDatabase;\nimport com.google.firebase.database.MutableData;\nimport com.google.firebase.database.Query;\nimport com.google.firebase.database.Transaction;\nimport com.google.firebase.database.ValueEventListener;\n\nimport java.util.ArrayList;\nimport java.util.HashMap;\nimport java.util.List;\nimport java.util.Map;\n\nimport de.hdodenhof.circleimageview.CircleImageView;\n\npublic class GiocoActivity extends BaseActivity {\n\n    private Button next;\n    private PreferencesManager preferencesManager;\n\n    private TextView opponent;\n    private CircleImageView imageOpponent;\n\n    private TextView player;\n    private CircleImageView imagePlayer;\n    private ProgressDialog progressDialog;\n\n    private FirebaseDatabase database = FirebaseDatabase.getInstance();\n\n    private TextView question;\n    private Button option1, option2, option3, option4;\n    private String rightAnswer;\n    private String player1;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_gioco);\n\n        player = findViewById(R.id.player);\n        imagePlayer = findViewById(R.id.imagePlayer);\n\n        opponent = findViewById(R.id.opponent);\n        imageOpponent = findViewById(R.id.imageOpponent);\n\n        question = findViewById(R.id.question);\n\n        option1 = findViewById(R.id.option1);\n        option2 = findViewById(R.id.option2);\n        option3 = findViewById(R.id.option3);\n        option4 = findViewById(R.id.option4);\n\n        preferencesManager = new PreferencesManager(GiocoActivity.this);\n        player1 = preferencesManager.getUsername();\n\n        next = findViewById(R.id.continuaButton);\n        next.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                // next turn\n            }\n        });\n\n        progressDialog = new ProgressDialog(GiocoActivity.this);\n        progressDialog.setCancelable(false);\n        progressDialog.setMessage(&quot;In cerca di un avversario...&quot;);\n        progressDialog.show();\n\n        startGame();\n    }\n\n    public void loadProfilePhoto(String user, CircleImageView imageProfilePhoto) {\n        DatabaseReference imageRef = database.getReference(&quot;Utenti&quot;).child(user);\n\n        imageRef.addValueEventListener(new ValueEventListener() {\n            @Override\n            public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\n                String imageUrl = dataSnapshot.child(&quot;imagineProfilo&quot;).getValue(String.class);\n                Glide.with(GiocoActivity.this).load(imageUrl)\n                        .placeholder(com.firebase.ui.database.R.drawable.common_google_signin_btn_icon_dark)\n                        .circleCrop()\n                        .error(com.firebase.ui.database.R.drawable.common_google_signin_btn_icon_dark_normal)\n                        .into(imageProfilePhoto);\n            }\n\n            @Override\n            public void onCancelled(@NonNull DatabaseError databaseError) {\n                // Gestione degli errori\n            }\n        });\n    }\n\n    private void startGame() {\n        player.setText(player1);\n        loadProfilePhoto(player1, imagePlayer);\n        DatabaseReference connectionRef = database.getReference(&quot;connections&quot;);\n        Query availableConnections = connectionRef.orderByChild(&quot;player2&quot;).equalTo(null);\n\n        availableConnections.addListenerForSingleValueEvent(new ValueEventListener() {\n            @Override\n            public void onDataChange(@NonNull DataSnapshot snapshot) {\n                if(snapshot.exists()){\n                    for (DataSnapshot gameSnapshot : snapshot.getChildren()) {\n                        String connectionId = gameSnapshot.getKey();\n                        connectionRef.child(connectionId).child(&quot;player2&quot;).setValue(player1);\n                        join(connectionId);\n                        break;\n                    }\n                } else {\n                    DatabaseReference newRef = database.getReference(&quot;connections&quot;).push();\n                    String connectionId = newRef.getKey();\n                    assignPlayersToGame(connectionId, player1);\n                }\n            }\n\n            @Override\n            public void onCancelled(@NonNull DatabaseError error) {\n\n            }\n        });\n    }\n\n    private void join(String connectionId) {\n        DatabaseReference connectionRef = database.getReference(&quot;connections&quot;).child(connectionId);\n\n        connectionRef.addValueEventListener(new ValueEventListener() {\n            @Override\n            public void onDataChange(@NonNull DataSnapshot snapshot) {\n                String usernameOpponent = snapshot.child(&quot;player1&quot;).getValue(String.class);\n                showInfoOpponent(usernameOpponent);\n                if (progressDialog.isShowing()) {\n                    progressDialog.dismiss();\n                }\n            }\n\n            @Override\n            public void onCancelled(@NonNull DatabaseError error) {\n\n            }\n        });\n    }\n\n    private String playerTurn;\n    private String turnKey;\n\n    private void assignPlayersToGame(String connectionId, String username) {\n        DatabaseReference connectionRef = database.getReference(&quot;connections&quot;).child(connectionId);\n        DatabaseReference turnRef = database.getReference(&quot;turn&quot;);\n        turnKey = turnRef.push().getKey();\n\n        Map&lt;String, Object&gt; playerData = new HashMap&lt;&gt;();\n        playerData.put(&quot;player1&quot;, username);\n        connectionRef.updateChildren(playerData);\n        turnRef.updateChildren(playerData);\n\n        connectionRef.addValueEventListener(new ValueEventListener() {\n            @Override\n            public void onDataChange(@NonNull DataSnapshot snapshot) {\n                String usernameOpponent = snapshot.child(&quot;player2&quot;).getValue(String.class);\n\n                if (usernameOpponent != null) {\n                    showInfoOpponent(usernameOpponent);\n                    if (progressDialog.isShowing()) {\n                        progressDialog.dismiss();\n                    }\n                }\n            }\n\n            @Override\n            public void onCancelled(@NonNull DatabaseError error) {\n\n            }\n        });\n    }\n\n    private void showInfoOpponent(String username) {\n        DatabaseReference usersRef = database.getReference(&quot;Utenti&quot;);\n\n        usersRef.child(username).addValueEventListener(new ValueEventListener() {\n            @Override\n            public void onDataChange(@NonNull DataSnapshot snapshot) {\n                Utente opponentInfo = snapshot.getValue(Utente.class);\n                opponent.setText(opponentInfo.getNomeUtente()); // username\n                loadProfilePhoto(opponentInfo.getNomeUtente(), imageOpponent); // image profile\n                loadPage();\n            }\n\n            @Override\n            public void onCancelled(@NonNull DatabaseError error) {\n\n            }\n        });\n    }\n\n    private void setQuiz(String questionD, ArrayList&lt;String&gt; options, String answer) {\n        DatabaseReference turnRef = database.getReference(&quot;turn&quot;).child(turnKey);\n\n        turnRef.addValueEventListener(new ValueEventListener() {\n            @Override\n            public void onDataChange(@NonNull DataSnapshot snapshot) {\n                playerTurn = snapshot.child(&quot;player1&quot;).getValue(String.class);\n                if (player1.equals(playerTurn)) {\n                    question.setText(questionD);\n                    rightAnswer = answer;\n                    Button[] buttons = {option1, option2, option3, option4};\n\n                    for (int i = 0; i &lt; options.size(); i++) {\n                        buttons[i].setText(options.get(i));\n                    }\n                    next.setVisibility(View.VISIBLE);\n                } else {\n                    progressDialog = new ProgressDialog(GiocoActivity.this);\n                    progressDialog.setCancelable(false);\n                    progressDialog.setMessage(&quot;Wait...&quot;);\n                    progressDialog.show();\n                }\n            }\n\n            @Override\n            public void onCancelled(@NonNull DatabaseError error) {\n                // Gestione degli errori\n            }\n        });\n    }\n\n    private void loadPage() {\n        DatabaseReference quizRef = database.getReference(&quot;Quiz&quot;);\n        String category = RandomCategory.getCategory();\n\n        quizRef.child(category).addValueEventListener(new ValueEventListener() {\n            @Override\n            public void onDataChange(@NonNull DataSnapshot snapshot) {\n                int idQuestion = RandomCategory.getQuestion();\n                String quest = snapshot.child(&quot;Domande&quot;).child(String.valueOf(idQuestion)).getValue(String.class);\n                ArrayList&lt;String&gt; options = new ArrayList&lt;&gt;();\n                for (DataSnapshot opt : snapshot.child(&quot;Opzioni&quot;).child(String.valueOf(idQuestion)).getChildren()) {\n                    String currentOpt = opt.getValue(String.class);\n                    options.add(currentOpt);\n                }\n                String rightA = snapshot.child(&quot;Risposta&quot;).child(String.valueOf(idQuestion)).getValue(String.class);\n                setQuiz(quest, options, rightA);\n            }\n\n            @Override\n            public void onCancelled(@NonNull DatabaseError error) {\n\n            }\n        });\n    }\n\n}\n</code></pre>\n"},{"tags":["java","swing"],"answers":[{"tags":[],"owner":{"account_id":6055,"reputation":14786,"user_id":10026,"accept_rate":68,"display_name":"ykaganovich"},"down_vote_count":1,"up_vote_count":8,"is_accepted":false,"score":7,"last_activity_date":1226691775,"creation_date":1226691775,"answer_id":291141,"question_id":291115,"body_markdown":"Use [JComponent.scrollRectToVisible()][1]\r\n\r\nIf you need more info, [here&#39;s an article][2]\r\n\r\n\r\n  [1]: http://java.sun.com/javase/6/docs/api/javax/swing/JComponent.html#scrollRectToVisible(java.awt.Rectangle)\r\n  [2]: http://www.chka.de/swing/components/scrolling.html","title":"Java Swing - Using JScrollPane and Having it scroll back to top","body":"<p>Use <a href=\"http://java.sun.com/javase/6/docs/api/javax/swing/JComponent.html#scrollRectToVisible(java.awt.Rectangle)\" rel=\"noreferrer\">JComponent.scrollRectToVisible()</a></p>\n\n<p>If you need more info, <a href=\"http://www.chka.de/swing/components/scrolling.html\" rel=\"noreferrer\">here's an article</a></p>\n"},{"tags":[],"owner":{"account_id":13598,"reputation":102599,"user_id":27439,"accept_rate":100,"display_name":"Vincent Ramdhanie"},"down_vote_count":2,"up_vote_count":9,"is_accepted":false,"score":7,"last_activity_date":1226704492,"creation_date":1226704492,"answer_id":291748,"question_id":291115,"body_markdown":"You can try this:\r\n\r\n     scrollPane.getViewport().setViewPosition(new Point(0,0));\r\n\r\nAccording to the JavaDocs setViewPosition() behaves like this:\r\n\r\n&gt; Sets the view coordinates that appear in the upper left hand corner of the viewport, does nothing if there&#39;s no view. \r\n","title":"Java Swing - Using JScrollPane and Having it scroll back to top","body":"<p>You can try this:</p>\n\n<pre><code> scrollPane.getViewport().setViewPosition(new Point(0,0));\n</code></pre>\n\n<p>According to the JavaDocs setViewPosition() behaves like this:</p>\n\n<blockquote>\n  <p>Sets the view coordinates that appear in the upper left hand corner of the viewport, does nothing if there's no view. </p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":9043,"reputation":1519,"user_id":16528,"display_name":"Craig"},"down_vote_count":1,"up_vote_count":149,"is_accepted":false,"score":148,"last_activity_date":1226704624,"creation_date":1226704624,"answer_id":291753,"question_id":291115,"body_markdown":"Calling [setCaretPosition(0)][1] on your text component will cause it to scroll to the top.\r\n\r\n\r\n  [1]: http://java.sun.com/javase/6/docs/api/javax/swing/text/JTextComponent.html#setCaretPosition(int)","title":"Java Swing - Using JScrollPane and Having it scroll back to top","body":"<p>Calling <a href=\"http://java.sun.com/javase/6/docs/api/javax/swing/text/JTextComponent.html#setCaretPosition(int)\" rel=\"noreferrer\">setCaretPosition(0)</a> on your text component will cause it to scroll to the top.</p>\n"},{"tags":[],"owner":{"account_id":84829,"reputation":1163,"user_id":236895,"display_name":"Eric Warriner"},"down_vote_count":1,"up_vote_count":42,"is_accepted":false,"score":41,"last_activity_date":1282574696,"creation_date":1282574696,"answer_id":3548638,"question_id":291115,"body_markdown":"Just in case you are not using a text component take a look at the thread posted here.... [https://stackoverflow.com/questions/1166072/setting-scroll-bar-on-a-jscrollpane][1]\r\n\r\nTheir solution is to spin off a thread via invokeLater\r\n\r\n    final JScrollPane scroll = new JScrollPane(text);\r\n    javax.swing.SwingUtilities.invokeLater(new Runnable() {\r\n       public void run() { \r\n           scroll.getVerticalScrollBar().setValue(0);\r\n       }\r\n    });\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/1166072/setting-scroll-bar-on-a-jscrollpane","title":"Java Swing - Using JScrollPane and Having it scroll back to top","body":"<p>Just in case you are not using a text component take a look at the thread posted here.... <a href=\"https://stackoverflow.com/questions/1166072/setting-scroll-bar-on-a-jscrollpane\">Setting Scroll Bar on a JScrollPane</a></p>\n\n<p>Their solution is to spin off a thread via invokeLater</p>\n\n<pre><code>final JScrollPane scroll = new JScrollPane(text);\njavax.swing.SwingUtilities.invokeLater(new Runnable() {\n   public void run() { \n       scroll.getVerticalScrollBar().setValue(0);\n   }\n});\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2010255,"reputation":130,"user_id":1798878,"display_name":"Pb600"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1358897502,"creation_date":1358897502,"answer_id":14469969,"question_id":291115,"body_markdown":"This will make the work:\r\n\r\n    DefaultCaret caret = (DefaultCaret) textArea.getCaret();\r\n    caret.setUpdatePolicy(DefaultCaret.NEVER_UPDATE);","title":"Java Swing - Using JScrollPane and Having it scroll back to top","body":"<p>This will make the work:</p>\n\n<pre><code>DefaultCaret caret = (DefaultCaret) textArea.getCaret();\ncaret.setUpdatePolicy(DefaultCaret.NEVER_UPDATE);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6867487,"reputation":177,"user_id":5279331,"display_name":"aosphyma"},"down_vote_count":2,"up_vote_count":11,"is_accepted":false,"score":9,"last_activity_date":1440837848,"creation_date":1440834254,"answer_id":32283824,"question_id":291115,"body_markdown":"You can use the method `setCaretPosition(0)` just after `setText(String t)` of your text component.","title":"Java Swing - Using JScrollPane and Having it scroll back to top","body":"<p>You can use the method <code>setCaretPosition(0)</code> just after <code>setText(String t)</code> of your text component.</p>\n"},{"tags":[],"owner":{"account_id":13432,"reputation":4622,"user_id":26976,"accept_rate":56,"display_name":"Richard T"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1523628787,"creation_date":1523628787,"answer_id":49819017,"question_id":291115,"body_markdown":"Here&#39;s how:\r\n\r\n    textArea.setSelectionStart(0);\r\n    textArea.setSelectionEnd(0); \r\n\r\n","title":"Java Swing - Using JScrollPane and Having it scroll back to top","body":"<p>Here's how:</p>\n\n<pre><code>textArea.setSelectionStart(0);\ntextArea.setSelectionEnd(0); \n</code></pre>\n"}],"owner":{"display_name":"Robyn"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":77073,"favorite_count":0,"down_vote_count":0,"up_vote_count":88,"answer_count":7,"score":88,"last_activity_date":1674737156,"creation_date":1226691216,"question_id":291115,"body_markdown":"I&#39;m using JScrollPane to allow scrolling in a JFrame that has a text component that&#39;s serving as a text editor.  What I want to do, after setting the text in this editor, is have  it scroll back up to the top, so you can see what&#39;s at the beginning of the file.\r\n\r\nDoes anyone know how to do this?","title":"Java Swing - Using JScrollPane and Having it scroll back to top","body":"<p>I'm using JScrollPane to allow scrolling in a JFrame that has a text component that's serving as a text editor.  What I want to do, after setting the text in this editor, is have  it scroll back up to the top, so you can see what's at the beginning of the file.</p>\n\n<p>Does anyone know how to do this?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":26147295,"reputation":168,"user_id":19835740,"display_name":"Daxelarne"},"score":0,"creation_date":1674737182,"post_id":75162948,"comment_id":132780007,"body_markdown":"Maybe you can found some help [arround here](https://stackoverflow.com/questions/3174375/java-httpurlconnection-uses-socks-proxy-instead-of-http)","body":"Maybe you can found some help <a href=\"https://stackoverflow.com/questions/3174375/java-httpurlconnection-uses-socks-proxy-instead-of-http\">arround here</a>"},{"owner":{"account_id":1884031,"reputation":1371,"user_id":1703619,"display_name":"Miguel"},"score":0,"creation_date":1675244780,"post_id":75162948,"comment_id":132884992,"body_markdown":"This problem seems to be quite related to this StackOverflow question, it maybe can help here to solve this issue:\n\nhttps://stackoverflow.com/questions/27215053/why-does-my-socks-proxy-code-throw-socketexception-malformed-reply-from-socks-s","body":"This problem seems to be quite related to this StackOverflow question, it maybe can help here to solve this issue:  <a href=\"https://stackoverflow.com/questions/27215053/why-does-my-socks-proxy-code-throw-socketexception-malformed-reply-from-socks-s\" title=\"why does my socks proxy code throw socketexception malformed reply from socks s\">stackoverflow.com/questions/27215053/&hellip;</a>"}],"owner":{"account_id":483619,"reputation":2340,"user_id":898801,"accept_rate":62,"display_name":"kiran"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":158,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1674736867,"creation_date":1674062333,"question_id":75162948,"body_markdown":"I am trying to connect to a server through proxy. Below is the code I am using to set the proxy. \r\n\r\n\t\ttry {\r\n\t\t\tSystem.setProperty(&quot;java.net.useSystemProxies&quot;, &quot;true&quot;);\r\n\t\t\tSystem.out.println(&quot;detecting proxies&quot;);\r\n\t\t\tList l = null;\r\n\t\t\ttry {\r\n\t\t\t\tl = ProxySelector.getDefault().select(new URI(&quot;https://www.google.com&quot;));\r\n\t\t\t} catch (URISyntaxException e) {\r\n\t\t\t\te.printStackTrace();\r\n\t\t\t\tSystem.out.println(&quot;Failed to list the proxy...&quot; + e.getMessage());\r\n\t\t\t}\r\n\t\t\tif (l != null) {\r\n\t\t\t\tfor (Iterator iter = l.iterator(); iter.hasNext();) {\r\n\t\t\t\t\tjava.net.Proxy proxy = (java.net.Proxy) iter.next();\r\n\t\t\t\t\tSystem.out.println(&quot;proxy type: &quot; + proxy.type());\r\n\t\t\t\t\tInetSocketAddress addr = (InetSocketAddress) proxy.address();\r\n\t\t\t\t\tif (addr == null) {\r\n\t\t\t\t\t\tSystem.out.println(&quot;No Proxy&quot;);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tSystem.out.println(&quot;proxy hostname: &quot; + addr.getHostName());\r\n\t\t\t\t\t\tSystem.setProperty(&quot;http.proxyHost&quot;, addr.getHostName());\r\n\t\t\t\t\t\tSystem.setProperty(&quot;https.proxyHost&quot;, addr.getHostName());\r\n\t\t\t\t\t\tSystem.out.println(&quot;proxy port: &quot; + addr.getPort());\r\n\t\t\t\t\t\tSystem.setProperty(&quot;http.proxyPort&quot;, Integer.toString(addr.getPort()));\r\n\t\t\t\t\t\tSystem.setProperty(&quot;https.proxyPort&quot;, Integer.toString(addr.getPort()));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} catch (Exception e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\r\nAnd I am using the below code to send the server requests.\r\n\r\n\t\tRequestBody body = RequestBody.create(MediaType.parse(&quot;application/json; charset=utf-8&quot;), jsonValue);\r\n\t\tRequest request = new Request.Builder().url(settings.getServiceUrl() + &quot;/&quot; + service).addHeader(&quot;Authorization&quot;, Credentials.basic(settings.getServiceUserName(), settings.getServicePassword())).post(body).build();\r\n\t\tOkHttpClient.Builder builder =new OkHttpClient.Builder();\r\n\t\tOkHttpClient client = builder.readTimeout(6000 * 1000, TimeUnit.MILLISECONDS)\r\n\t\t\t\t.writeTimeout(6000 * 1000, TimeUnit.MILLISECONDS).build();\r\n\t\tCall call = client.newCall(request);\r\n\t\tResponse response = call.execute();\r\n\r\nAnd I am getting the below error message.\r\n\r\n\r\n    java.net.SocketException: Malformed reply from SOCKS server\r\n\tat java.net.SocksSocketImpl.readSocksReply(Unknown Source)\r\n\tat java.net.SocksSocketImpl.connect(Unknown Source)\r\n\tat java.net.Socket.connect(Unknown Source)\r\n\tat okhttp3.internal.platform.Platform.connectSocket(Platform.java:130)\r\n\tat okhttp3.internal.connection.RealConnection.connectSocket(RealConnection.java:263)\r\n\tat okhttp3.internal.connection.RealConnection.connectTunnel(RealConnection.java:235)\r\n\tat okhttp3.internal.connection.RealConnection.connect(RealConnection.java:177)\r\n\tat okhttp3.internal.connection.ExchangeFinder.findConnection(ExchangeFinder.java:224)\r\n\r\n\r\nAny idea on how to resolve this ?","title":"Java Proxy using SOCKS instead of Http","body":"<p>I am trying to connect to a server through proxy. Below is the code I am using to set the proxy.</p>\n<pre><code>    try {\n        System.setProperty(&quot;java.net.useSystemProxies&quot;, &quot;true&quot;);\n        System.out.println(&quot;detecting proxies&quot;);\n        List l = null;\n        try {\n            l = ProxySelector.getDefault().select(new URI(&quot;https://www.google.com&quot;));\n        } catch (URISyntaxException e) {\n            e.printStackTrace();\n            System.out.println(&quot;Failed to list the proxy...&quot; + e.getMessage());\n        }\n        if (l != null) {\n            for (Iterator iter = l.iterator(); iter.hasNext();) {\n                java.net.Proxy proxy = (java.net.Proxy) iter.next();\n                System.out.println(&quot;proxy type: &quot; + proxy.type());\n                InetSocketAddress addr = (InetSocketAddress) proxy.address();\n                if (addr == null) {\n                    System.out.println(&quot;No Proxy&quot;);\n                } else {\n                    System.out.println(&quot;proxy hostname: &quot; + addr.getHostName());\n                    System.setProperty(&quot;http.proxyHost&quot;, addr.getHostName());\n                    System.setProperty(&quot;https.proxyHost&quot;, addr.getHostName());\n                    System.out.println(&quot;proxy port: &quot; + addr.getPort());\n                    System.setProperty(&quot;http.proxyPort&quot;, Integer.toString(addr.getPort()));\n                    System.setProperty(&quot;https.proxyPort&quot;, Integer.toString(addr.getPort()));\n                }\n            }\n        }\n    } catch (Exception e) {\n        e.printStackTrace();\n    }\n</code></pre>\n<p>And I am using the below code to send the server requests.</p>\n<pre><code>    RequestBody body = RequestBody.create(MediaType.parse(&quot;application/json; charset=utf-8&quot;), jsonValue);\n    Request request = new Request.Builder().url(settings.getServiceUrl() + &quot;/&quot; + service).addHeader(&quot;Authorization&quot;, Credentials.basic(settings.getServiceUserName(), settings.getServicePassword())).post(body).build();\n    OkHttpClient.Builder builder =new OkHttpClient.Builder();\n    OkHttpClient client = builder.readTimeout(6000 * 1000, TimeUnit.MILLISECONDS)\n            .writeTimeout(6000 * 1000, TimeUnit.MILLISECONDS).build();\n    Call call = client.newCall(request);\n    Response response = call.execute();\n</code></pre>\n<p>And I am getting the below error message.</p>\n<pre><code>java.net.SocketException: Malformed reply from SOCKS server\nat java.net.SocksSocketImpl.readSocksReply(Unknown Source)\nat java.net.SocksSocketImpl.connect(Unknown Source)\nat java.net.Socket.connect(Unknown Source)\nat okhttp3.internal.platform.Platform.connectSocket(Platform.java:130)\nat okhttp3.internal.connection.RealConnection.connectSocket(RealConnection.java:263)\nat okhttp3.internal.connection.RealConnection.connectTunnel(RealConnection.java:235)\nat okhttp3.internal.connection.RealConnection.connect(RealConnection.java:177)\nat okhttp3.internal.connection.ExchangeFinder.findConnection(ExchangeFinder.java:224)\n</code></pre>\n<p>Any idea on how to resolve this ?</p>\n"},{"tags":["java","telegram"],"comments":[{"owner":{"account_id":6313442,"reputation":36281,"user_id":5625547,"display_name":"0stone0"},"score":0,"creation_date":1674736695,"post_id":75246174,"comment_id":132779862,"body_markdown":"Does this answer your question? [Sending message in telegram bot with images](https://stackoverflow.com/questions/37860889/sending-message-in-telegram-bot-with-images)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/37860889/sending-message-in-telegram-bot-with-images\">Sending message in telegram bot with images</a>"}],"owner":{"account_id":26370194,"reputation":21,"user_id":20025005,"display_name":"Dmitriy Kandalov"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":179,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1674736261,"creation_date":1674736261,"question_id":75246174,"body_markdown":"i need help with sending the image along with the SendMessage entity. \r\nI need help with sending the image along with the SendMessage entity. I tried to do it through markdown markup, but it doesn&#39;t work - the image is displayed as a preview and the link is also visible.\r\n\r\n    sendMessage.enableMarkdown(true);\r\n    sendMessage.setText(&quot;&lt;image src=\\&quot;https://info-master.su/programming/web/html/images/images-in-html.jpg\\&quot; alt=\\&quot;Текст с описанием картинки\\&quot;&gt;&quot;)\r\nresult\r\nhttps://disk.yandex.ru/i/8ibJJVBAaVNrUQ\r\n\r\nhow do I make exactly an embedded image, without a link, please help me","title":"Inserting an image into a Telegram bot message","body":"<p>i need help with sending the image along with the SendMessage entity.\nI need help with sending the image along with the SendMessage entity. I tried to do it through markdown markup, but it doesn't work - the image is displayed as a preview and the link is also visible.</p>\n<pre><code>sendMessage.enableMarkdown(true);\nsendMessage.setText(&quot;&lt;image src=\\&quot;https://info-master.su/programming/web/html/images/images-in-html.jpg\\&quot; alt=\\&quot;Текст с описанием картинки\\&quot;&gt;&quot;)\n</code></pre>\n<p>result\n<a href=\"https://disk.yandex.ru/i/8ibJJVBAaVNrUQ\" rel=\"nofollow noreferrer\">https://disk.yandex.ru/i/8ibJJVBAaVNrUQ</a></p>\n<p>how do I make exactly an embedded image, without a link, please help me</p>\n"},{"tags":["java","selenium","for-loop","selenium-webdriver"],"comments":[{"owner":{"account_id":2772450,"reputation":22416,"user_id":2386774,"display_name":"JeffC"},"score":0,"creation_date":1674744961,"post_id":75245719,"comment_id":132782711,"body_markdown":"Is there some reason you can&#39;t add the text as part of an XPath and find the right element from the start? This will be faster than finding a handful of elements, looping through each to find the one that contains the desired text, and then proceeding.","body":"Is there some reason you can&#39;t add the text as part of an XPath and find the right element from the start? This will be faster than finding a handful of elements, looping through each to find the one that contains the desired text, and then proceeding."}],"answers":[{"tags":[],"owner":{"account_id":4261091,"reputation":32684,"user_id":3485434,"accept_rate":97,"display_name":"Prophet"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1674736145,"creation_date":1674734289,"answer_id":75245804,"question_id":75245719,"body_markdown":"You can not apply `contains()` method directly on a list of WebElement objects.  \r\nThis method can be applied on String object only.  \r\nYou also can not extract text directly from list of WebElement objects.  \r\nWhat you can do is:  \r\nGet the list of WebElements matching the given locator, iterate over the WebElements in the list extracting their text contents and checking if that text content contains the desired text, as following:\r\n```java\r\npublic static boolean waitForTextInElementList(WebDriver driver, By locator, String expectedText, int timeout) {\r\n    try {\r\n        List&lt;WebElement&gt; list;\r\n        for (int i = 0; i &lt; timeout; i++) {\r\n            list = driver.findElements(locator);\r\n            for (WebElement element : list) {\r\n                if (element.getText().contains(expectedText)) {\r\n                    return true;\r\n                }\r\n            }\r\n            i++;\r\n        }\r\n    } catch (Exception e) {\r\n        ConsoleLogger.error(&quot;Could not find the expected text &quot; + expectedText + &quot; on specified element list&quot; + e.getMessage());\r\n    }\r\n    return false;\r\n}\r\n```","title":"Selenium - Filter/ loop through elements to check for specific text","body":"<p>You can not apply <code>contains()</code> method directly on a list of WebElement objects.<br />\nThis method can be applied on String object only.<br />\nYou also can not extract text directly from list of WebElement objects.<br />\nWhat you can do is:<br />\nGet the list of WebElements matching the given locator, iterate over the WebElements in the list extracting their text contents and checking if that text content contains the desired text, as following:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static boolean waitForTextInElementList(WebDriver driver, By locator, String expectedText, int timeout) {\n    try {\n        List&lt;WebElement&gt; list;\n        for (int i = 0; i &lt; timeout; i++) {\n            list = driver.findElements(locator);\n            for (WebElement element : list) {\n                if (element.getText().contains(expectedText)) {\n                    return true;\n                }\n            }\n            i++;\n        }\n    } catch (Exception e) {\n        ConsoleLogger.error(&quot;Could not find the expected text &quot; + expectedText + &quot; on specified element list&quot; + e.getMessage());\n    }\n    return false;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15083819,"reputation":33038,"user_id":10885684,"display_name":"KunduK"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1674734365,"creation_date":1674734365,"answer_id":75245821,"question_id":75245719,"body_markdown":"Once you get the element list.You can try something like that. this will return true or false.\r\n\r\n    elementsList.stream().anyMatch(e -&gt; e.getText().trim().contains(&quot;specficelementtext&quot;)","title":"Selenium - Filter/ loop through elements to check for specific text","body":"<p>Once you get the element list.You can try something like that. this will return true or false.</p>\n<pre><code>elementsList.stream().anyMatch(e -&gt; e.getText().trim().contains(&quot;specficelementtext&quot;)\n</code></pre>\n"}],"owner":{"account_id":11432133,"reputation":227,"user_id":8380535,"accept_rate":0,"display_name":"Kermi"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":393,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75245821,"answer_count":2,"score":1,"last_activity_date":1674736145,"creation_date":1674733824,"question_id":75245719,"body_markdown":"As Java is not my &quot;best language&quot; I would like to ask for support. I&#39;m trying to validate if element from the list contains a specific value. \r\n\r\n1) I&#39;m having element which locates at least 5+ elements\r\n2) I&#39;m trying to get that element:\r\neg.         `List&lt;WebElement&gt; elementsList = getWebElementList(target, false);`\r\n3) I&#39;m trying to validate if specific text is a part of the taken list. By doing something like: \r\n\r\n    `elementsList.contains(valueToCheck);`\r\n\r\nit does not work...\r\n\r\nalso I found a way of using `stream()` method which looks more/less like this but I&#39;m having troubles with continuation:  \r\n `elementsList.stream().filter(WebElement::getText.....`\r\n\r\n---\r\nCan you please explain me how lists are handled in Java in modern/ nowadays way? In C# I was mostly using LINQ but don&#39;t know if Java has similar functionality.","title":"Selenium - Filter/ loop through elements to check for specific text","body":"<p>As Java is not my &quot;best language&quot; I would like to ask for support. I'm trying to validate if element from the list contains a specific value.</p>\n<ol>\n<li><p>I'm having element which locates at least 5+ elements</p>\n</li>\n<li><p>I'm trying to get that element:\neg.         <code>List&lt;WebElement&gt; elementsList = getWebElementList(target, false);</code></p>\n</li>\n<li><p>I'm trying to validate if specific text is a part of the taken list. By doing something like:</p>\n<p><code>elementsList.contains(valueToCheck);</code></p>\n</li>\n</ol>\n<p>it does not work...</p>\n<p>also I found a way of using <code>stream()</code> method which looks more/less like this but I'm having troubles with continuation:<br />\n<code>elementsList.stream().filter(WebElement::getText.....</code></p>\n<hr />\n<p>Can you please explain me how lists are handled in Java in modern/ nowadays way? In C# I was mostly using LINQ but don't know if Java has similar functionality.</p>\n"},{"tags":["java","android","kotlin","android-fragments"],"answers":[{"tags":[],"owner":{"account_id":269240,"reputation":5686,"user_id":558457,"accept_rate":62,"display_name":"Viacheslav Smityukh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674736088,"creation_date":1674736088,"answer_id":75246132,"question_id":75245985,"body_markdown":"You can&#39;t enforce it by compiler because a fragment have to be public to restore fragment manager&#39;s state.\r\n\r\nYou can add a custom lint/detekt rule to your project which will fail build if Fragment&#39;s constructor called every where except the fragment&#39;s factory.","title":"Preventing a Fragment class from being instantiated and inherited (Android)","body":"<p>You can't enforce it by compiler because a fragment have to be public to restore fragment manager's state.</p>\n<p>You can add a custom lint/detekt rule to your project which will fail build if Fragment's constructor called every where except the fragment's factory.</p>\n"}],"owner":{"account_id":16914364,"reputation":1806,"user_id":12232720,"display_name":"mathematics-and-caffeine"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1674736088,"creation_date":1674735199,"question_id":75245985,"body_markdown":"I want to enforce the factory pattern for certain Fragment, since according to [this question][1], it&#39;s the way to go for passing data to Fragments.\r\n\r\nHowever, to enforce it, me must prevent instantiating the fragment. The way to do this is making the constructor private, according to [this question][2].\r\n\r\nThe problem is that I get this error: `could not find Fragment constructor`\r\n\r\nAccording to [this question][3], `All Fragment classes you create must have a public, no-arg constructor.`\r\n\r\nSo apparently I cannot make the constructor private. So how can I enforce the Factory pattern? \r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/9245408/best-practice-for-instantiating-a-new-android-fragment\r\n  [2]: https://stackoverflow.com/q/56811040/12232720\r\n  [3]: https://stackoverflow.com/questions/51831053/could-not-find-fragment-constructor","title":"Preventing a Fragment class from being instantiated and inherited (Android)","body":"<p>I want to enforce the factory pattern for certain Fragment, since according to <a href=\"https://stackoverflow.com/questions/9245408/best-practice-for-instantiating-a-new-android-fragment\">this question</a>, it's the way to go for passing data to Fragments.</p>\n<p>However, to enforce it, me must prevent instantiating the fragment. The way to do this is making the constructor private, according to <a href=\"https://stackoverflow.com/q/56811040/12232720\">this question</a>.</p>\n<p>The problem is that I get this error: <code>could not find Fragment constructor</code></p>\n<p>According to <a href=\"https://stackoverflow.com/questions/51831053/could-not-find-fragment-constructor\">this question</a>, <code>All Fragment classes you create must have a public, no-arg constructor.</code></p>\n<p>So apparently I cannot make the constructor private. So how can I enforce the Factory pattern?</p>\n"},{"tags":["java","intellij-idea","sonarqube"],"comments":[{"owner":{"account_id":4181375,"reputation":5091,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"score":0,"creation_date":1674734449,"post_id":75245640,"comment_id":132779185,"body_markdown":"sounds like you have never tried to optimize selenium scenarios where QA team stabilizes execution using `Thread.sleep(10_000)`  :(","body":"sounds like you have never tried to optimize selenium scenarios where QA team stabilizes execution using <code>Thread.sleep(10_000)</code>  :("},{"owner":{"account_id":2139538,"reputation":42501,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"score":2,"creation_date":1674735652,"post_id":75245640,"comment_id":132779553,"body_markdown":"The rule already explains itself, like all rules do: &quot;*It creates brittle tests that can fail unpredictably depending on environment (&quot;Passes on my machine!&quot;) or load. Don’t rely on timing*&quot;","body":"The rule already explains itself, like all rules do: &quot;<i>It creates brittle tests that can fail unpredictably depending on environment (&quot;Passes on my machine!&quot;) or load. Don’t rely on timing</i>&quot;"}],"answers":[{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1674736058,"creation_date":1674735403,"answer_id":75246015,"question_id":75245640,"body_markdown":"Here&#39;s a logical reason for you:\r\n\r\n    Thread.sleep(2000);\r\n\r\nwill block the current thread for at least 2 seconds.\r\n\r\nBy contrast:\r\n\r\n    await().atMost(2, Duration.SECONDS).until(didTheThing());\r\n\r\nor equivalent code will block the current thread for up to 2 seconds, and will stop waiting when the event occurs.\r\n\r\nThe latter is more responsive.\r\n\r\nThe only situation where `sleep()` might be preferable are where the thread is not waiting for an event related to another Java thread.  Even then, `sleep` may end up waiting longer than you asked for, so it is not suitable for &quot;real time&quot; timing.\r\n\r\nThis specific warning is in the context of test code, but the advice against using `sleep()` applies more generally.\r\n\r\n------------------\r\n\r\nI&#39;ve never come across `Awaitility` before, but it seems like it is designed to make it easier to write unit tests that entail timing checks.  In the example in questions ... it appears that it would have the benefit of making your tests run faster!  \r\n\r\nAnd as a commenter pointed out, the [documentation][1] for the rule explains the reasoning itself:\r\n\r\n&gt; `Thread.sleep` should not be used in tests\r\n&gt;\r\n&gt; Using `Thread.sleep` in a test is just generally a bad idea. It creates brittle tests that can fail unpredictably depending on environment (&quot;Passes on my machine!&quot;) or load. Don&#39;t rely on timing. Use mocks or use libraries such as `Awaitility` for asynchronous testing.\r\n\r\n\r\n  [1]: https://rules.sonarsource.com/java/RSPEC-2925","title":"Why does Sonar recommend avoiding Thread.sleep?","body":"<p>Here's a logical reason for you:</p>\n<pre><code>Thread.sleep(2000);\n</code></pre>\n<p>will block the current thread for at least 2 seconds.</p>\n<p>By contrast:</p>\n<pre><code>await().atMost(2, Duration.SECONDS).until(didTheThing());\n</code></pre>\n<p>or equivalent code will block the current thread for up to 2 seconds, and will stop waiting when the event occurs.</p>\n<p>The latter is more responsive.</p>\n<p>The only situation where <code>sleep()</code> might be preferable are where the thread is not waiting for an event related to another Java thread.  Even then, <code>sleep</code> may end up waiting longer than you asked for, so it is not suitable for &quot;real time&quot; timing.</p>\n<p>This specific warning is in the context of test code, but the advice against using <code>sleep()</code> applies more generally.</p>\n<hr />\n<p>I've never come across <code>Awaitility</code> before, but it seems like it is designed to make it easier to write unit tests that entail timing checks.  In the example in questions ... it appears that it would have the benefit of making your tests run faster!</p>\n<p>And as a commenter pointed out, the <a href=\"https://rules.sonarsource.com/java/RSPEC-2925\" rel=\"nofollow noreferrer\">documentation</a> for the rule explains the reasoning itself:</p>\n<blockquote>\n<p><code>Thread.sleep</code> should not be used in tests</p>\n<p>Using <code>Thread.sleep</code> in a test is just generally a bad idea. It creates brittle tests that can fail unpredictably depending on environment (&quot;Passes on my machine!&quot;) or load. Don't rely on timing. Use mocks or use libraries such as <code>Awaitility</code> for asynchronous testing.</p>\n</blockquote>\n"}],"owner":{"account_id":1942157,"reputation":91,"user_id":1748107,"display_name":"DeXoN"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1147,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1674736058,"creation_date":1674733374,"question_id":75245640,"body_markdown":"According to this document (rule) S2925\r\nhttps://rules.sonarsource.com/java/RSPEC-2925\r\nWe need to change the **`Thread.sleep`** with:\r\n\r\n    await().atMost(2, Duration.SECONDS).until(didTheThing())\r\n\r\nCan someone give me any logical answer why we need to do that?\r\n\r\nWhen this **Awaitility** class creates thread in the backend. What is the point of this rule?","title":"Why does Sonar recommend avoiding Thread.sleep?","body":"<p>According to this document (rule) S2925\n<a href=\"https://rules.sonarsource.com/java/RSPEC-2925\" rel=\"nofollow noreferrer\">https://rules.sonarsource.com/java/RSPEC-2925</a>\nWe need to change the <strong><code>Thread.sleep</code></strong> with:</p>\n<pre><code>await().atMost(2, Duration.SECONDS).until(didTheThing())\n</code></pre>\n<p>Can someone give me any logical answer why we need to do that?</p>\n<p>When this <strong>Awaitility</strong> class creates thread in the backend. What is the point of this rule?</p>\n"},{"tags":["java","spring-boot"],"comments":[{"owner":{"account_id":213468,"reputation":103485,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1674736055,"post_id":75245687,"comment_id":132779661,"body_markdown":"You can use `@Service`, or just plain `@Component`.","body":"You can use <code>@Service</code>, or just plain <code>@Component</code>."}],"answers":[{"tags":[],"owner":{"account_id":2453179,"reputation":1066,"user_id":2138953,"accept_rate":83,"display_name":"PAX"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1674734657,"creation_date":1674734657,"answer_id":75245877,"question_id":75245687,"body_markdown":"You can use Spring&#39;s `CommandLineRunner`. It will be executed after startup when everything is initialized and ready. See: https://www.baeldung.com/spring-boot-console-app\r\n\r\n```\r\n@SpringBootApplication\r\npublic class Application implements CommandLineRunner {\r\n    public static void main(String[] args) {\r\n        SpringApplication.run(Application.class, args);\r\n    }\r\n \r\n    @Override\r\n    public void run(String... args) {\r\n        // TODO implementation of your task manager\r\n    }\r\n}\r\n```","title":"Best approach implementing server-side logic with some sort of TaskManager class","body":"<p>You can use Spring's <code>CommandLineRunner</code>. It will be executed after startup when everything is initialized and ready. See: <a href=\"https://www.baeldung.com/spring-boot-console-app\" rel=\"nofollow noreferrer\">https://www.baeldung.com/spring-boot-console-app</a></p>\n<pre><code>@SpringBootApplication\npublic class Application implements CommandLineRunner {\n    public static void main(String[] args) {\n        SpringApplication.run(Application.class, args);\n    }\n \n    @Override\n    public void run(String... args) {\n        // TODO implementation of your task manager\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":446100,"reputation":43,"user_id":838936,"display_name":"mrxjn"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1674735806,"creation_date":1674735806,"answer_id":75246076,"question_id":75245687,"body_markdown":"I don&#39;t really know if the manager runs continuously or not (in a loop), also if the animals are hard coded or not and if those intervals are configurable at runtime or not.. \r\nbut perhaps this helps : \r\n\r\nYou could create a component (for your manager) with a @PostConstruct that start doing your stuff then (after bootup) https://www.baeldung.com/spring-postconstruct-predestroy.\r\n\r\nYou can also call methods at certain intervals with\r\nhttps://www.baeldung.com/spring-scheduled-tasks\r\n\r\nIt is also possible the animals don&#39;t need a Manager and are components that just react to incoming messages.\r\n\r\n","title":"Best approach implementing server-side logic with some sort of TaskManager class","body":"<p>I don't really know if the manager runs continuously or not (in a loop), also if the animals are hard coded or not and if those intervals are configurable at runtime or not..\nbut perhaps this helps :</p>\n<p>You could create a component (for your manager) with a @PostConstruct that start doing your stuff then (after bootup) <a href=\"https://www.baeldung.com/spring-postconstruct-predestroy\" rel=\"nofollow noreferrer\">https://www.baeldung.com/spring-postconstruct-predestroy</a>.</p>\n<p>You can also call methods at certain intervals with\n<a href=\"https://www.baeldung.com/spring-scheduled-tasks\" rel=\"nofollow noreferrer\">https://www.baeldung.com/spring-scheduled-tasks</a></p>\n<p>It is also possible the animals don't need a Manager and are components that just react to incoming messages.</p>\n"}],"owner":{"account_id":15326941,"reputation":685,"user_id":11057811,"display_name":"BitQueen"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1674736011,"creation_date":1674733652,"question_id":75245687,"body_markdown":"I&#39;m usually coding in Node, but want to try Spring Boot and before I start a project I want to build, I wanted to ask for best approaches to save time.\r\n\r\nMy project requires some sort of Manager class that manages a set of custom classes I am going to code, for example an AnimalManager that manages a bunch of Animal.class objects. \r\n\r\nAll Animals are using websockets to receive data from third party APIs. I need some Manager class to handle all these Animals and call their functions based on custom intervals etcetera. \r\n\r\nWhat I am confused about now is how to implement such Manager classes that need to start working after start up without instantiation. From my understanding @Service is more like business logic for database operations. Is there some equivalent for Manager classes or standalone classes that don&#39;t interact with databases or controllers and are meant to just run tasks?","title":"Best approach implementing server-side logic with some sort of TaskManager class","body":"<p>I'm usually coding in Node, but want to try Spring Boot and before I start a project I want to build, I wanted to ask for best approaches to save time.</p>\n<p>My project requires some sort of Manager class that manages a set of custom classes I am going to code, for example an AnimalManager that manages a bunch of Animal.class objects.</p>\n<p>All Animals are using websockets to receive data from third party APIs. I need some Manager class to handle all these Animals and call their functions based on custom intervals etcetera.</p>\n<p>What I am confused about now is how to implement such Manager classes that need to start working after start up without instantiation. From my understanding @Service is more like business logic for database operations. Is there some equivalent for Manager classes or standalone classes that don't interact with databases or controllers and are meant to just run tasks?</p>\n"},{"tags":["java","html","swing","size"],"answers":[{"tags":[],"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1249597549,"creation_date":1249597549,"answer_id":1241875,"question_id":1241645,"body_markdown":"The height can&#39;t be calculated until the width is known. When dealing with Swing components I think you need to do something like:\r\n\r\n    component.setSize(100, 1);\r\n    Dimension size = component.getPreferredSize();\r\n\r\nOr maybe you can use the concepts present in this [posting][1]:\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/1126584/make-jtextpane-adjust-height-to-content","title":"Swing&#39;s BasicHTML.createHTMLView metrics usage","body":"<p>The height can't be calculated until the width is known. When dealing with Swing components I think you need to do something like:</p>\n\n<pre><code>component.setSize(100, 1);\nDimension size = component.getPreferredSize();\n</code></pre>\n\n<p>Or maybe you can use the concepts present in this <a href=\"https://stackoverflow.com/questions/1126584/make-jtextpane-adjust-height-to-content\">posting</a>:</p>\n"},{"tags":[],"owner":{"account_id":18835,"reputation":82183,"user_id":43582,"accept_rate":83,"display_name":"Bombe"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674735899,"creation_date":1674735899,"answer_id":75246097,"question_id":1241645,"body_markdown":"I have had success with this:\r\n\r\n``` java\r\nvar view = BasicHTML.createHTMLView(new JLabel(), &quot;&lt;html&gt;some html&lt;/html&gt;&quot;);\r\nSystem.out.println(view.getPreferredSpan(View.X_AXIS));\r\nSystem.out.println(view.getPreferredSpan(View.Y_AXIS));\r\n```","title":"Swing&#39;s BasicHTML.createHTMLView metrics usage","body":"<p>I have had success with this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>var view = BasicHTML.createHTMLView(new JLabel(), &quot;&lt;html&gt;some html&lt;/html&gt;&quot;);\nSystem.out.println(view.getPreferredSpan(View.X_AXIS));\nSystem.out.println(view.getPreferredSpan(View.Y_AXIS));\n</code></pre>\n"}],"owner":{"account_id":1781,"reputation":91962,"user_id":2443,"accept_rate":82,"display_name":"Allain Lalonde"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":312,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1674735899,"creation_date":1249594636,"question_id":1241645,"body_markdown":"I&#39;m doing some graphics processing and HTML is a perfect choice for styling the displayed content. I&#39;m trying to reuse swing&#39;s built in html support, and it works perfectly if I hard code the height passed to View.paint, but I can&#39;t figure out how to determine how tall the bounds of the rendered content would be at runtime given a specific width.\r\n\r\n    Graphics2D g = ...\r\n    JLabel label = new JLabel(&quot;blah blah blah...&quot;);\r\n\r\n    View view = BasicHTML.createView(label, label.getText());\r\n    int minHeight = .... // Calculation magic goes here\r\n    Rectangle htmlSize = new Rectangle(0, 0, 50, minHeight);\r\n    g.setClip(htmlSize);\r\n    view.paint(g, htmlSize);\r\n\r\nIf I ask the JLabel direction with getPreferredSize() it doesn&#39;t consider wrapping at all. If I try using a JEditorPane it returns a larger, but fixed size rectangle.\r\n\r\nThank you.\r\n","title":"Swing&#39;s BasicHTML.createHTMLView metrics usage","body":"<p>I'm doing some graphics processing and HTML is a perfect choice for styling the displayed content. I'm trying to reuse swing's built in html support, and it works perfectly if I hard code the height passed to View.paint, but I can't figure out how to determine how tall the bounds of the rendered content would be at runtime given a specific width.</p>\n\n<pre><code>Graphics2D g = ...\nJLabel label = new JLabel(\"blah blah blah...\");\n\nView view = BasicHTML.createView(label, label.getText());\nint minHeight = .... // Calculation magic goes here\nRectangle htmlSize = new Rectangle(0, 0, 50, minHeight);\ng.setClip(htmlSize);\nview.paint(g, htmlSize);\n</code></pre>\n\n<p>If I ask the JLabel direction with getPreferredSize() it doesn't consider wrapping at all. If I try using a JEditorPane it returns a larger, but fixed size rectangle.</p>\n\n<p>Thank you.</p>\n"},{"tags":["java","multithreading","spring-boot"],"answers":[{"tags":[],"owner":{"account_id":10568655,"reputation":337,"user_id":7786149,"display_name":"Joe"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1674735887,"creation_date":1674735887,"answer_id":75246095,"question_id":75245662,"body_markdown":"So ... I figured it out. It was indeed a trivial thing that I somehow missed (embarrassingly so). \r\n\r\nBy specifying which thread pool to use in my logic, I made sure to effectively tell `@Async` above `myMethod(...)` which of 3 available beans to use. But I forgot that I have one more `@Async` above `beginProcessing()` method. So naturally it was confused with these changes and was throwing the exception I mentioned. By specifying which thread pool it needs to use (using bean name trick I mentioned I know), the code works like a charm.","title":"How to select to use a specific task executor in a method in springboot java?","body":"<p>So ... I figured it out. It was indeed a trivial thing that I somehow missed (embarrassingly so).</p>\n<p>By specifying which thread pool to use in my logic, I made sure to effectively tell <code>@Async</code> above <code>myMethod(...)</code> which of 3 available beans to use. But I forgot that I have one more <code>@Async</code> above <code>beginProcessing()</code> method. So naturally it was confused with these changes and was throwing the exception I mentioned. By specifying which thread pool it needs to use (using bean name trick I mentioned I know), the code works like a charm.</p>\n"}],"owner":{"account_id":10568655,"reputation":337,"user_id":7786149,"display_name":"Joe"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":389,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75246095,"answer_count":1,"score":0,"last_activity_date":1674735887,"creation_date":1674733501,"question_id":75245662,"body_markdown":"I have an application that uses CompletableFuture to process data from a stream async. The demo showcasing my async implementation is as follows:\r\n\r\n```\r\n    @Async\r\n    @Transactional(readOnly = true)\r\n    public void beginProcessing() {\r\n        try(Stream&lt;String&gt; st = myJpa.getMyStream()) { // use spring jpa to get a stream of data from db \r\n            CompletableFuture.allOf(st.map(i -&gt; CompletableFuture.supplyAsync(() -&gt;\r\n                            myMethod(i)))\r\n                    .toArray(CompletableFuture[]::new)).join();\r\n        }\r\n    }\r\n\r\n    @Async\r\n    private CompletableFuture&lt;Void&gt; myMethod(String i) {\r\n       // logic goes here\r\n    }\r\n```\r\nAnd it works fine. However, at the moment the CompletableFuture uses some default thread pool to do its job. I would like to use a custom defined taskExecutor instead. This can be achieved by supplying a name of the taskExecutor as a 2nd argument of `supplyAsync(...)` method. I have done it with `ForkJoin` thread pool before, so I am positive that it works.\r\n\r\nNow, I want to make it work with taskExecutor, so I have added a new bean to my config class as below (as well as another one which I will use elsewhere):\r\n```\r\n@Configuration\r\npublic class MyConfigClass {\r\n\r\n    @Bean\r\n    public TaskExecutor myNewExecutor() {\r\n        RejectedExecutionHandler re = new ThreadPoolExecutor.CallerRunsPolicy();\r\n        ThreadPoolTaskExecutor executor = new ThreadPoolTaskExecutor();\r\n        executor.setCorePoolSize(10);\r\n        executor.setMaxPoolSize(100);\r\n        executor.setQueueCapacity(0);\r\n        executor.setThreadNamePrefix(&quot;myNewExecutor-&quot;);\r\n        executor.setRejectedExecutionHandler(re);\r\n        return executor;\r\n    }\r\n\r\n    @Bean\r\n    public TaskExecutor someOtherExecutor() { // would be used elsewhere\r\n        RejectedExecutionHandler re = new ThreadPoolExecutor.CallerRunsPolicy();\r\n        ThreadPoolTaskExecutor executor = new ThreadPoolTaskExecutor();\r\n        executor.setCorePoolSize(10);\r\n        executor.setMaxPoolSize(100); \r\n        executor.setQueueCapacity(0);\r\n        executor.setThreadNamePrefix(&quot;someOtherExecutor-&quot;);\r\n        executor.setRejectedExecutionHandler(re);\r\n        return executor;\r\n    }\r\n  \r\n}\r\n```\r\nAnd then I autowired TaskExecutor into my class and added the 2nd arg. So the code looks like below:\r\n\r\n```\r\n    @Autowired\r\n    private TaskExecutor myNewExecutor;\r\n\r\n    @Async\r\n    @Transactional(readOnly = true)\r\n    public void beginProcessing() {\r\n        try(Stream&lt;String&gt; st = myJpa.getMyStream()) { // use spring jpa to get a stream of data from db \r\n            CompletableFuture.allOf(st.map(i -&gt; CompletableFuture.supplyAsync(() -&gt;\r\n                            myMethod(i),myNewExecutor))\r\n                    .toArray(CompletableFuture[]::new)).join();\r\n        }\r\n    }\r\n\r\n    @Async\r\n    private CompletableFuture&lt;Void&gt; myMethod(String i) {\r\n       // logic goes here\r\n    }\r\n```\r\nHowever, that does not work since we have multiple beans of type TaskExecutor, so I get the following exception\r\n```\r\nCaused by: org.springframework.beans.factory.NoUniqueBeanDefinitionException: \r\nNo qualifying bean of type &#39;org.springframework.core.task.TaskExecutor&#39; available: expected single matching bean but found 3: myNewExecutor, someOtherExecutor, taskScheduler\r\n```\r\nOk, so I thought I would be able to solve it by using `@Qualifier` annotation. However, it didn&#39;t work for me - the exception is still being thrown (I used said annotation under the `@Bean` annotaiton in a config class and then under the `@Autowired` annotation in my class where logic is.). \r\n\r\nI know that you can make a method use a custom thread pool by giving each bean a name and having the corresponding name being passed as an arg to `@Async` annotation. So, I guess I could rework my code to be a simple `for` loop that calls `mytMethod(...)` with method&#39;s async annotation being replaced with `@Async(&quot;myNewExecutor&quot;)`. That would probably work but I would like to preserve CompletableFuture if I can, so wonder if anyone can identify what am I missing that results in the error mentioned above?\r\n\r\nI feel like I am missing something trivial to make it work but I just cannot see it.","title":"How to select to use a specific task executor in a method in springboot java?","body":"<p>I have an application that uses CompletableFuture to process data from a stream async. The demo showcasing my async implementation is as follows:</p>\n<pre><code>    @Async\n    @Transactional(readOnly = true)\n    public void beginProcessing() {\n        try(Stream&lt;String&gt; st = myJpa.getMyStream()) { // use spring jpa to get a stream of data from db \n            CompletableFuture.allOf(st.map(i -&gt; CompletableFuture.supplyAsync(() -&gt;\n                            myMethod(i)))\n                    .toArray(CompletableFuture[]::new)).join();\n        }\n    }\n\n    @Async\n    private CompletableFuture&lt;Void&gt; myMethod(String i) {\n       // logic goes here\n    }\n</code></pre>\n<p>And it works fine. However, at the moment the CompletableFuture uses some default thread pool to do its job. I would like to use a custom defined taskExecutor instead. This can be achieved by supplying a name of the taskExecutor as a 2nd argument of <code>supplyAsync(...)</code> method. I have done it with <code>ForkJoin</code> thread pool before, so I am positive that it works.</p>\n<p>Now, I want to make it work with taskExecutor, so I have added a new bean to my config class as below (as well as another one which I will use elsewhere):</p>\n<pre><code>@Configuration\npublic class MyConfigClass {\n\n    @Bean\n    public TaskExecutor myNewExecutor() {\n        RejectedExecutionHandler re = new ThreadPoolExecutor.CallerRunsPolicy();\n        ThreadPoolTaskExecutor executor = new ThreadPoolTaskExecutor();\n        executor.setCorePoolSize(10);\n        executor.setMaxPoolSize(100);\n        executor.setQueueCapacity(0);\n        executor.setThreadNamePrefix(&quot;myNewExecutor-&quot;);\n        executor.setRejectedExecutionHandler(re);\n        return executor;\n    }\n\n    @Bean\n    public TaskExecutor someOtherExecutor() { // would be used elsewhere\n        RejectedExecutionHandler re = new ThreadPoolExecutor.CallerRunsPolicy();\n        ThreadPoolTaskExecutor executor = new ThreadPoolTaskExecutor();\n        executor.setCorePoolSize(10);\n        executor.setMaxPoolSize(100); \n        executor.setQueueCapacity(0);\n        executor.setThreadNamePrefix(&quot;someOtherExecutor-&quot;);\n        executor.setRejectedExecutionHandler(re);\n        return executor;\n    }\n  \n}\n</code></pre>\n<p>And then I autowired TaskExecutor into my class and added the 2nd arg. So the code looks like below:</p>\n<pre><code>    @Autowired\n    private TaskExecutor myNewExecutor;\n\n    @Async\n    @Transactional(readOnly = true)\n    public void beginProcessing() {\n        try(Stream&lt;String&gt; st = myJpa.getMyStream()) { // use spring jpa to get a stream of data from db \n            CompletableFuture.allOf(st.map(i -&gt; CompletableFuture.supplyAsync(() -&gt;\n                            myMethod(i),myNewExecutor))\n                    .toArray(CompletableFuture[]::new)).join();\n        }\n    }\n\n    @Async\n    private CompletableFuture&lt;Void&gt; myMethod(String i) {\n       // logic goes here\n    }\n</code></pre>\n<p>However, that does not work since we have multiple beans of type TaskExecutor, so I get the following exception</p>\n<pre><code>Caused by: org.springframework.beans.factory.NoUniqueBeanDefinitionException: \nNo qualifying bean of type 'org.springframework.core.task.TaskExecutor' available: expected single matching bean but found 3: myNewExecutor, someOtherExecutor, taskScheduler\n</code></pre>\n<p>Ok, so I thought I would be able to solve it by using <code>@Qualifier</code> annotation. However, it didn't work for me - the exception is still being thrown (I used said annotation under the <code>@Bean</code> annotaiton in a config class and then under the <code>@Autowired</code> annotation in my class where logic is.).</p>\n<p>I know that you can make a method use a custom thread pool by giving each bean a name and having the corresponding name being passed as an arg to <code>@Async</code> annotation. So, I guess I could rework my code to be a simple <code>for</code> loop that calls <code>mytMethod(...)</code> with method's async annotation being replaced with <code>@Async(&quot;myNewExecutor&quot;)</code>. That would probably work but I would like to preserve CompletableFuture if I can, so wonder if anyone can identify what am I missing that results in the error mentioned above?</p>\n<p>I feel like I am missing something trivial to make it work but I just cannot see it.</p>\n"},{"tags":["java","selenium-webdriver"],"comments":[{"owner":{"account_id":6892782,"reputation":1553,"user_id":5295657,"accept_rate":31,"display_name":"Mahsum Akbas"},"score":0,"creation_date":1442317754,"post_id":32584866,"comment_id":53024138,"body_markdown":"already you maximize it before execute your test step. so where is the problem exactly?","body":"already you maximize it before execute your test step. so where is the problem exactly?"},{"owner":{"account_id":6921963,"reputation":783,"user_id":5314309,"accept_rate":6,"display_name":"Uziii"},"score":0,"creation_date":1442318838,"post_id":32584866,"comment_id":53024854,"body_markdown":"@MahsumAkbas the problem is that for firefox it initially open the browser in restored state and after couple of seconds it maximizes it, but with the chromeOptions, I can initiate the chrome browser in maximized form, there is no delay in that. I am asking if there is a similar way for firefox as well.","body":"@MahsumAkbas the problem is that for firefox it initially open the browser in restored state and after couple of seconds it maximizes it, but with the chromeOptions, I can initiate the chrome browser in maximized form, there is no delay in that. I am asking if there is a similar way for firefox as well."}],"answers":[{"tags":[],"owner":{"account_id":27625246,"reputation":29,"user_id":21085370,"display_name":"Daniel Delimata"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674735861,"creation_date":1674735861,"answer_id":75246088,"question_id":32584866,"body_markdown":"I am afraid that you will not find anything better than `driver.manage().window().maximize();`.\r\n\r\nLook at this workitem. It was raised 10 years ago.\r\n\r\nhttps://bugzilla.mozilla.org/show_bug.cgi?id=873618","title":"Start firefox browser in maximized form - Selenium Webdriver","body":"<p>I am afraid that you will not find anything better than <code>driver.manage().window().maximize();</code>.</p>\n<p>Look at this workitem. It was raised 10 years ago.</p>\n<p><a href=\"https://bugzilla.mozilla.org/show_bug.cgi?id=873618\" rel=\"nofollow noreferrer\">https://bugzilla.mozilla.org/show_bug.cgi?id=873618</a></p>\n"}],"owner":{"account_id":6921963,"reputation":783,"user_id":5314309,"accept_rate":6,"display_name":"Uziii"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1900,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":1,"score":4,"last_activity_date":1674735861,"creation_date":1442316513,"question_id":32584866,"body_markdown":"I wanted to ask if there is a way in selenium webdriver to initiate the firefox driver in maximized form. \r\n\r\nI know `driver.manage().window().maximize();` will do the job, but with this the browser is opened in restored form and after couple of seconds it goes to maximized form. What I want is to open the browser in maximized instantly when my test runs. ChromeOptions works for chrome browser like following,\r\n\r\n    System.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;chromedriver.exe&quot;);\r\n    \t\t\tChromeOptions options = new ChromeOptions();\r\n    \t\t\toptions.addArguments(&quot;--start-maximized&quot;);\r\n    \t\t\tdriver = new ChromeDriver(options);\r\n\r\nIs there a similar way for firefox as well?","title":"Start firefox browser in maximized form - Selenium Webdriver","body":"<p>I wanted to ask if there is a way in selenium webdriver to initiate the firefox driver in maximized form. </p>\n\n<p>I know <code>driver.manage().window().maximize();</code> will do the job, but with this the browser is opened in restored form and after couple of seconds it goes to maximized form. What I want is to open the browser in maximized instantly when my test runs. ChromeOptions works for chrome browser like following,</p>\n\n<pre><code>System.setProperty(\"webdriver.chrome.driver\", \"chromedriver.exe\");\n            ChromeOptions options = new ChromeOptions();\n            options.addArguments(\"--start-maximized\");\n            driver = new ChromeDriver(options);\n</code></pre>\n\n<p>Is there a similar way for firefox as well?</p>\n"},{"tags":["java","xml","maven","maven-archetype"],"owner":{"account_id":12062531,"reputation":13,"user_id":8821004,"display_name":"Robert Sperchez"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1674735725,"creation_date":1674735725,"question_id":75246058,"body_markdown":"I&#39;m trying to create an archetype that I&#39;ll use for multiple services. The archetype generates a project just fine, all modules and files that I want included. Problem is, I&#39;d like to set custom names for the modules and folders that the project has, depending on the service I&#39;ll be creating\r\nCurrently I have something like this (just an example): \r\n\r\n```\r\n    &lt;requiredProperties&gt;\r\n        &lt;requiredProperty key=&quot;testName&quot;/&gt;\r\n    &lt;/requiredProperties&gt;\r\n    &lt;module id=&quot;service-data&quot; dir=&quot;service-data&quot; name=&quot;service-data&quot; /&gt;\r\n```\r\n\r\nWhat I&#39;d like to happen is something like this:\r\n```\r\n    &lt;requiredProperties&gt;\r\n        &lt;requiredProperty key=&quot;testName&quot;/&gt;\r\n    &lt;/requiredProperties&gt;\r\n    &lt;module id=&quot;${testName}-data&quot; dir=&quot;${testName}-data&quot; name=&quot;${testName}-data&quot; /&gt;\r\n```\r\nBasically, I&#39;d like to give the archetype a parameter so that when I create a project using it, instead of service-data being my module name everytime, it ends up being say test-project (if testName = test).\r\nI tried using the testName parameter as shown in this example, but what ends up happening is the module will literally be named ${testName}-data.\r\nUsing the requiredProperty works just fine for other pom.xml or other files in the project, but I&#39;m really interested if I can set custom properties that will work directly in the archetype-metadata.xml file. \r\nThanks!","title":"Custom properties when creating maven archetype (archetype-metadata.xml)","body":"<p>I'm trying to create an archetype that I'll use for multiple services. The archetype generates a project just fine, all modules and files that I want included. Problem is, I'd like to set custom names for the modules and folders that the project has, depending on the service I'll be creating\nCurrently I have something like this (just an example):</p>\n<pre><code>    &lt;requiredProperties&gt;\n        &lt;requiredProperty key=&quot;testName&quot;/&gt;\n    &lt;/requiredProperties&gt;\n    &lt;module id=&quot;service-data&quot; dir=&quot;service-data&quot; name=&quot;service-data&quot; /&gt;\n</code></pre>\n<p>What I'd like to happen is something like this:</p>\n<pre><code>    &lt;requiredProperties&gt;\n        &lt;requiredProperty key=&quot;testName&quot;/&gt;\n    &lt;/requiredProperties&gt;\n    &lt;module id=&quot;${testName}-data&quot; dir=&quot;${testName}-data&quot; name=&quot;${testName}-data&quot; /&gt;\n</code></pre>\n<p>Basically, I'd like to give the archetype a parameter so that when I create a project using it, instead of service-data being my module name everytime, it ends up being say test-project (if testName = test).\nI tried using the testName parameter as shown in this example, but what ends up happening is the module will literally be named ${testName}-data.\nUsing the requiredProperty works just fine for other pom.xml or other files in the project, but I'm really interested if I can set custom properties that will work directly in the archetype-metadata.xml file.\nThanks!</p>\n"},{"tags":["java","user-interface","javafx","interface"],"comments":[{"owner":{"account_id":16865861,"reputation":372,"user_id":12195587,"display_name":"Fuzail"},"score":0,"creation_date":1674723990,"post_id":75243653,"comment_id":132775968,"body_markdown":"Have you tried setting up the scene (along with its properties like color) with an empty border first and then after that, adding children (title label) to the border&#39;s top region.","body":"Have you tried setting up the scene (along with its properties like color) with an empty border first and then after that, adding children (title label) to the border&#39;s top region."},{"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"score":0,"creation_date":1674736208,"post_id":75243653,"comment_id":132779710,"body_markdown":"hint: the borderpane fills the complete area of the scene (== covers it). Unrelated: don&#39;t hard-code sizing constraints (like min/max/pref)!","body":"hint: the borderpane fills the complete area of the scene (== covers it). Unrelated: don&#39;t hard-code sizing constraints (like min/max/pref)!"},{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":4,"creation_date":1674737476,"post_id":75243653,"comment_id":132780090,"body_markdown":"Creating any kind of control will cause the default style sheet to be applied to the contents of the scene, which gives an opaque color to the root node (the border pane in your case). Either make the root transparent, or apply your gradient to the root instead of the scene.","body":"Creating any kind of control will cause the default style sheet to be applied to the contents of the scene, which gives an opaque color to the root node (the border pane in your case). Either make the root transparent, or apply your gradient to the root instead of the scene."}],"owner":{"account_id":27243845,"reputation":1,"user_id":20769518,"display_name":"Bahaa ALsulaiman"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1674737831,"answer_count":0,"score":0,"last_activity_date":1674735645,"creation_date":1674721570,"question_id":75243653,"body_markdown":"I have a program that&#39;s going to be a tic tac toe game GUI and I decided to set the scene color with `LinearGradient` which is far better than plain color but once I add any control to it, it instantly changes its color to the default color of Netbeans GUI &quot;White&quot;. I tried to check the size of the label that. might cause kinda stuff but it didn&#39;t work. Also, I used `StackPane` and this caused the same thing sadly\r\n\r\n\r\n\r\n\r\n```\r\n\r\nimport javafx.application.Application;\r\nimport javafx.event.ActionEvent;\r\nimport javafx.event.EventHandler;\r\nimport javafx.geometry.Insets;\r\nimport javafx.geometry.Pos;\r\nimport javafx.scene.Scene;\r\nimport javafx.scene.control.Button;\r\nimport javafx.scene.control.Label;\r\nimport javafx.scene.control.RadioButton;\r\nimport javafx.scene.control.TextField;\r\nimport javafx.scene.image.Image;\r\nimport javafx.scene.image.ImageView;\r\nimport javafx.scene.layout.Background;\r\nimport javafx.scene.layout.BackgroundFill;\r\nimport javafx.scene.layout.BorderPane;\r\nimport javafx.scene.layout.CornerRadii;\r\nimport javafx.scene.layout.FlowPane;\r\nimport javafx.scene.layout.HBox;\r\nimport javafx.scene.layout.StackPane;\r\nimport javafx.scene.layout.VBox;\r\nimport javafx.scene.paint.Color;\r\nimport javafx.scene.text.Font;\r\nimport static javafx.scene.text.Font.font;\r\nimport javafx.scene.text.FontWeight;\r\nimport javafx.stage.Stage;\r\nimport javafx.scene.paint.LinearGradient;\r\nimport javafx.scene.paint.Stop;\r\nimport javafx.scene.paint.CycleMethod;\r\n\r\npublic class GUIProject extends Application {\r\n\r\n    @Override\r\n    public void start(Stage stage) throws Exception {\r\n        \r\n        BorderPane border = new BorderPane();\r\n        \r\n      FlowPane top = new FlowPane();\r\n //---------------------------------------------------------------------------//\r\n//-------------------------------Top Scene------------------------------------//\r\n//----------------------------------------------------------------------------//\r\n       \r\n       \r\n     Label title = new Label (&quot;F&quot;);\r\n      \r\n      title.setFont(Font.font(&quot;Arial Bold&quot;, FontWeight.BOLD, 20));\r\n     top.setBackground(new Background(new BackgroundFill(Color.ORANGE, CornerRadii.EMPTY,Insets.EMPTY)));\r\n       title.setTextFill(Color.WHITE);\r\n       top.setMinHeight(100);\r\n      title.setAlignment(Pos.CENTER);\r\n       \r\n      \r\n    top.getChildren().add(title);\r\n      \r\n      border.setTop(top);\r\n    \r\n //---------------------------------------------------------------------------//\r\n//-------------------------------Scene Set Up---------------------------------//\r\n//----------------------------------------------------------------------------//\r\n\r\n       \r\n        Scene scene = new Scene(border,900,700);\r\n        \r\n        stage.setScene(scene);\r\n       \r\n        stage.setTitle(&quot;Tic Tac Toe&quot;);\r\n        \r\n        Stop[] stops = new Stop[] { new Stop(0,Color.rgb(1,255,255)), \r\n            new Stop(1,Color.BLUE)};\r\n             \r\n    \r\n       LinearGradient g1 = new LinearGradient(0,0,1,0, true, CycleMethod.NO_CYCLE, stops);\r\n        scene.setFill(g1);\r\n        stage.show();\r\n        \r\n        }\r\n  \r\n    public static void main(String[] args){\r\n        \r\n        \r\n        launch(args);\r\n    }\r\n    \r\n    \r\n}\r\n```\r\n","title":"My Scene changes its color once I add element to it","body":"<p>I have a program that's going to be a tic tac toe game GUI and I decided to set the scene color with <code>LinearGradient</code> which is far better than plain color but once I add any control to it, it instantly changes its color to the default color of Netbeans GUI &quot;White&quot;. I tried to check the size of the label that. might cause kinda stuff but it didn't work. Also, I used <code>StackPane</code> and this caused the same thing sadly</p>\n<pre><code>\nimport javafx.application.Application;\nimport javafx.event.ActionEvent;\nimport javafx.event.EventHandler;\nimport javafx.geometry.Insets;\nimport javafx.geometry.Pos;\nimport javafx.scene.Scene;\nimport javafx.scene.control.Button;\nimport javafx.scene.control.Label;\nimport javafx.scene.control.RadioButton;\nimport javafx.scene.control.TextField;\nimport javafx.scene.image.Image;\nimport javafx.scene.image.ImageView;\nimport javafx.scene.layout.Background;\nimport javafx.scene.layout.BackgroundFill;\nimport javafx.scene.layout.BorderPane;\nimport javafx.scene.layout.CornerRadii;\nimport javafx.scene.layout.FlowPane;\nimport javafx.scene.layout.HBox;\nimport javafx.scene.layout.StackPane;\nimport javafx.scene.layout.VBox;\nimport javafx.scene.paint.Color;\nimport javafx.scene.text.Font;\nimport static javafx.scene.text.Font.font;\nimport javafx.scene.text.FontWeight;\nimport javafx.stage.Stage;\nimport javafx.scene.paint.LinearGradient;\nimport javafx.scene.paint.Stop;\nimport javafx.scene.paint.CycleMethod;\n\npublic class GUIProject extends Application {\n\n    @Override\n    public void start(Stage stage) throws Exception {\n        \n        BorderPane border = new BorderPane();\n        \n      FlowPane top = new FlowPane();\n //---------------------------------------------------------------------------//\n//-------------------------------Top Scene------------------------------------//\n//----------------------------------------------------------------------------//\n       \n       \n     Label title = new Label (&quot;F&quot;);\n      \n      title.setFont(Font.font(&quot;Arial Bold&quot;, FontWeight.BOLD, 20));\n     top.setBackground(new Background(new BackgroundFill(Color.ORANGE, CornerRadii.EMPTY,Insets.EMPTY)));\n       title.setTextFill(Color.WHITE);\n       top.setMinHeight(100);\n      title.setAlignment(Pos.CENTER);\n       \n      \n    top.getChildren().add(title);\n      \n      border.setTop(top);\n    \n //---------------------------------------------------------------------------//\n//-------------------------------Scene Set Up---------------------------------//\n//----------------------------------------------------------------------------//\n\n       \n        Scene scene = new Scene(border,900,700);\n        \n        stage.setScene(scene);\n       \n        stage.setTitle(&quot;Tic Tac Toe&quot;);\n        \n        Stop[] stops = new Stop[] { new Stop(0,Color.rgb(1,255,255)), \n            new Stop(1,Color.BLUE)};\n             \n    \n       LinearGradient g1 = new LinearGradient(0,0,1,0, true, CycleMethod.NO_CYCLE, stops);\n        scene.setFill(g1);\n        stage.show();\n        \n        }\n  \n    public static void main(String[] args){\n        \n        \n        launch(args);\n    }\n    \n    \n}\n</code></pre>\n"},{"tags":["java","jaxb","w3c"],"answers":[{"tags":[],"owner":{"account_id":7440798,"reputation":1877,"user_id":5658642,"display_name":"beat"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1464791305,"creation_date":1464791305,"answer_id":37571564,"question_id":36862882,"body_markdown":"You must marshall it to a Document, from which you can get the Element(s):\r\n\r\n    Letter letter = new Letter();\r\n    \r\n    // convert to DOM document\r\n    Document document = DocumentBuilderFactory.newInstance().newDocumentBuilder().newDocument();\r\n    JAXBContext context = JAXBContext.newInstance(Letter.class.getPackage().getName());\r\n    Marshaller marshaller = context.createMarshaller();\r\n    \r\n    XMLDocument xmlDocument = new XMLDocument();\r\n    xmlDocument.setAny(document.getDocumentElement());\r\n\r\nReference: https://stackoverflow.com/q/17078308/5658642","title":"can you convert a jaxb object to org.w3c.dom.Element?","body":"<p>You must marshall it to a Document, from which you can get the Element(s):</p>\n\n<pre><code>Letter letter = new Letter();\n\n// convert to DOM document\nDocument document = DocumentBuilderFactory.newInstance().newDocumentBuilder().newDocument();\nJAXBContext context = JAXBContext.newInstance(Letter.class.getPackage().getName());\nMarshaller marshaller = context.createMarshaller();\n\nXMLDocument xmlDocument = new XMLDocument();\nxmlDocument.setAny(document.getDocumentElement());\n</code></pre>\n\n<p>Reference: <a href=\"https://stackoverflow.com/q/17078308/5658642\">how to marshal a JAXB object to org.w3c.dom.Document?</a></p>\n"}],"owner":{"account_id":445814,"reputation":2018,"user_id":838494,"accept_rate":77,"display_name":"Albert Hendriks"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8592,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":1,"score":6,"last_activity_date":1674735634,"creation_date":1461668156,"question_id":36862882,"body_markdown":"I got some .xsd files from another department that doesn&#39;t use Java. I need to write xml that corresponds to the specified format. So I jaxb-converted them to Java classes and I&#39;m able to write some of the xml. So far so good. But now one of the element/classes contains a property where you can (/you&#39;re supposed to be able to) insert any xml. I need to insert one of the other jaxb elements there.\r\n\r\nIn java, we have:\r\n\r\n    import org.w3c.dom.Element;\r\n    ...\r\n            @XmlAccessorType(XmlAccessType.FIELD)\r\n            @XmlType(name = &quot;&quot;, propOrder = {\r\n                &quot;any&quot;\r\n            })\r\n            public static class XMLDocument {\r\n\r\n                @XmlAnyElement\r\n                protected Element any;\r\n\r\n                /**\r\n                 * Gets the value of the any property.\r\n                 * \r\n                 * @return\r\n                 *     possible object is\r\n                 *     {@link Element }\r\n                 *     \r\n                 */\r\n                public Element getAny() {\r\n                    return any;\r\n                }\r\n\r\n                /**\r\n                 * Sets the value of the any property.\r\n                 * \r\n                 * @param value\r\n                 *     allowed object is\r\n                 *     {@link Element }\r\n                 *     \r\n                 */\r\n                public void setAny(Element value) {\r\n                    this.any = value;\r\n                }\r\n\r\n            }\r\n\r\nAnd the object I want to insert, is of this class:\r\n\r\n    @XmlAccessorType(XmlAccessType.FIELD)\r\n    @XmlType(name = &quot;&quot;, propOrder = {\r\n        &quot;contactInfo&quot;,\r\n        ...\r\n    })\r\n    @XmlRootElement(name = &quot;Letter&quot;)\r\n    public class Letter {\r\n    \r\n        @XmlElement(name = &quot;ContactInfo&quot;, required = true)\r\n        protected ContactInformationLetter contactInfo;\r\n        ...\r\n\r\nI was hoping I could do something like this:\r\n\r\n    Letter letter = new Letter();\r\n    \r\n    XMLDocument xmlDocument = new XMLDocument();\r\n    xmlDocument.setAny(letter);\r\n\r\nBut of course letter is not of type &quot;Element&quot;.","title":"can you convert a jaxb object to org.w3c.dom.Element?","body":"<p>I got some .xsd files from another department that doesn't use Java. I need to write xml that corresponds to the specified format. So I jaxb-converted them to Java classes and I'm able to write some of the xml. So far so good. But now one of the element/classes contains a property where you can (/you're supposed to be able to) insert any xml. I need to insert one of the other jaxb elements there.</p>\n\n<p>In java, we have:</p>\n\n<pre><code>import org.w3c.dom.Element;\n...\n        @XmlAccessorType(XmlAccessType.FIELD)\n        @XmlType(name = \"\", propOrder = {\n            \"any\"\n        })\n        public static class XMLDocument {\n\n            @XmlAnyElement\n            protected Element any;\n\n            /**\n             * Gets the value of the any property.\n             * \n             * @return\n             *     possible object is\n             *     {@link Element }\n             *     \n             */\n            public Element getAny() {\n                return any;\n            }\n\n            /**\n             * Sets the value of the any property.\n             * \n             * @param value\n             *     allowed object is\n             *     {@link Element }\n             *     \n             */\n            public void setAny(Element value) {\n                this.any = value;\n            }\n\n        }\n</code></pre>\n\n<p>And the object I want to insert, is of this class:</p>\n\n<pre><code>@XmlAccessorType(XmlAccessType.FIELD)\n@XmlType(name = \"\", propOrder = {\n    \"contactInfo\",\n    ...\n})\n@XmlRootElement(name = \"Letter\")\npublic class Letter {\n\n    @XmlElement(name = \"ContactInfo\", required = true)\n    protected ContactInformationLetter contactInfo;\n    ...\n</code></pre>\n\n<p>I was hoping I could do something like this:</p>\n\n<pre><code>Letter letter = new Letter();\n\nXMLDocument xmlDocument = new XMLDocument();\nxmlDocument.setAny(letter);\n</code></pre>\n\n<p>But of course letter is not of type \"Element\".</p>\n"},{"tags":["java","multithreading","selenium","testing","performance-testing"],"comments":[{"owner":{"account_id":12680234,"reputation":828,"user_id":12576581,"display_name":"DeadSec"},"score":0,"creation_date":1674734400,"post_id":75245559,"comment_id":132779168,"body_markdown":"Do you need javascript rendering?","body":"Do you need javascript rendering?"},{"owner":{"account_id":12680234,"reputation":828,"user_id":12576581,"display_name":"DeadSec"},"score":0,"creation_date":1674734452,"post_id":75245559,"comment_id":132779186,"body_markdown":"Selenium is known for huge RAM and CPU consumption. If you don&#39;t need JavaScript rendering use scrapy or BS4.","body":"Selenium is known for huge RAM and CPU consumption. If you don&#39;t need JavaScript rendering use scrapy or BS4."},{"owner":{"account_id":12680234,"reputation":828,"user_id":12576581,"display_name":"DeadSec"},"score":0,"creation_date":1674734667,"post_id":75245559,"comment_id":132779249,"body_markdown":"Btw you might aswell buy a big ass rendering server from AWS if you want 200 selenium browsers working in parallel. Thats nuts","body":"Btw you might aswell buy a big ass rendering server from AWS if you want 200 selenium browsers working in parallel. Thats nuts"},{"owner":{"account_id":6077817,"reputation":1213,"user_id":4744568,"display_name":"pcalkins"},"score":0,"creation_date":1674766425,"post_id":75245559,"comment_id":132789229,"body_markdown":"it&#39;s not the right tool for load testing.  Having said that, using HTMLUnit will vastly increase the speed.","body":"it&#39;s not the right tool for load testing.  Having said that, using HTMLUnit will vastly increase the speed."}],"answers":[{"tags":[],"owner":{"account_id":3460456,"reputation":162728,"user_id":2897748,"display_name":"Dmitri T"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1674735473,"creation_date":1674735473,"answer_id":75246024,"question_id":75245559,"body_markdown":"I don&#39;t think you can, real browser means real browser and real browsers are resource intensive. For example [Firefox 109][1] requires 1 CPU core and 2 GB or RAM **per instance** and Chrome tends to consume even more. \r\n\r\nMoreover [it is not recommended to use Selenium for performance testing][2] in the Selenium official documentation, they suggest to use [JMeter][3] for that. Given you [properly configure JMeter to behave like a real browser][4] from the system under test point of view there will be no difference whether you use Selenium or JMeter for testing.  \r\n\r\n\r\n  [1]: https://www.mozilla.org/en-US/firefox/109.0/system-requirements/\r\n  [2]: https://www.selenium.dev/documentation/test_practices/discouraged/performance_testing/\r\n  [3]: https://jmeter.apache.org/\r\n  [4]: https://guide.blazemeter.com/hc/en-us/articles/206733719-How-to-make-JMeter-behave-more-like-a-real-browser","title":"Selenium Multithreaded Usage Performance Tuning","body":"<p>I don't think you can, real browser means real browser and real browsers are resource intensive. For example <a href=\"https://www.mozilla.org/en-US/firefox/109.0/system-requirements/\" rel=\"nofollow noreferrer\">Firefox 109</a> requires 1 CPU core and 2 GB or RAM <strong>per instance</strong> and Chrome tends to consume even more.</p>\n<p>Moreover <a href=\"https://www.selenium.dev/documentation/test_practices/discouraged/performance_testing/\" rel=\"nofollow noreferrer\">it is not recommended to use Selenium for performance testing</a> in the Selenium official documentation, they suggest to use <a href=\"https://jmeter.apache.org/\" rel=\"nofollow noreferrer\">JMeter</a> for that. Given you <a href=\"https://guide.blazemeter.com/hc/en-us/articles/206733719-How-to-make-JMeter-behave-more-like-a-real-browser\" rel=\"nofollow noreferrer\">properly configure JMeter to behave like a real browser</a> from the system under test point of view there will be no difference whether you use Selenium or JMeter for testing.</p>\n"}],"owner":{"account_id":9267443,"reputation":6364,"user_id":6882497,"accept_rate":77,"display_name":"Akiner Alkan"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":219,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1674735473,"creation_date":1674732874,"question_id":75245559,"body_markdown":"I am using multiple webdrivers with different threads. However, drivers are consuming a lot of memory and cpu usage. I am looking for efficient solution which can utilise many drivers usage with low memory/cpu footprint.\r\n\r\nI have the following code: \r\n\r\n    for (int i = 0; i &lt; 200; i++) {\r\n        Thread t = new Thread(this::workWithNewWebDriver, &quot;Browser&quot; + i);\r\n        t.start();\r\n    }\r\n\r\n    public void workWithNewWebDriver(){\r\n        ChromeOptions bestPerformanceOptions = new ChromeOptions();\r\n        WebDriver driver = new ChromeDriver(bestPerformanceOptions);\r\n        driver.get(&quot;anysite.com&quot;);\r\n        // Do stuff...\r\n    }\r\n\r\nI am currently using that kind of user tests with selenium but framework is subject to change and I am looking for most performant lightweight solution.\r\n\r\nTests are only requiring user login and interactions, Any framework can click the button with a user is okay by me. \r\n\r\nI have already tested the `headless` option for selenium but it only gives a slight improvement to performance metrics.\r\n\r\n&gt; Where can I find the preset of performant options for chrome driver?\r\n\r\n&gt; How can I improve the performance of selenium that tests 200 different parallel users use case ie.?","title":"Selenium Multithreaded Usage Performance Tuning","body":"<p>I am using multiple webdrivers with different threads. However, drivers are consuming a lot of memory and cpu usage. I am looking for efficient solution which can utilise many drivers usage with low memory/cpu footprint.</p>\n<p>I have the following code:</p>\n<pre><code>for (int i = 0; i &lt; 200; i++) {\n    Thread t = new Thread(this::workWithNewWebDriver, &quot;Browser&quot; + i);\n    t.start();\n}\n\npublic void workWithNewWebDriver(){\n    ChromeOptions bestPerformanceOptions = new ChromeOptions();\n    WebDriver driver = new ChromeDriver(bestPerformanceOptions);\n    driver.get(&quot;anysite.com&quot;);\n    // Do stuff...\n}\n</code></pre>\n<p>I am currently using that kind of user tests with selenium but framework is subject to change and I am looking for most performant lightweight solution.</p>\n<p>Tests are only requiring user login and interactions, Any framework can click the button with a user is okay by me.</p>\n<p>I have already tested the <code>headless</code> option for selenium but it only gives a slight improvement to performance metrics.</p>\n<blockquote>\n<p>Where can I find the preset of performant options for chrome driver?</p>\n</blockquote>\n<blockquote>\n<p>How can I improve the performance of selenium that tests 200 different parallel users use case ie.?</p>\n</blockquote>\n"},{"tags":["java","printf","double"],"comments":[{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":0,"creation_date":1674733795,"post_id":75245660,"comment_id":132778963,"body_markdown":"I&#39;m not sure the format string supports truncation but you can to it on your own. A simple way might be to do `(int)(number1 * 100)/100.0` (this might suffer from some precision issues though). A safer option would be to use `BigDecimal` with it&#39;s `round()` method and providing a proper `RoundingMode` to the `MathContext`.","body":"I&#39;m not sure the format string supports truncation but you can to it on your own. A simple way might be to do <code>(int)(number1 * 100)&#47;100.0</code> (this might suffer from some precision issues though). A safer option would be to use <code>BigDecimal</code> with it&#39;s <code>round()</code> method and providing a proper <code>RoundingMode</code> to the <code>MathContext</code>."}],"answers":[{"tags":[],"owner":{"account_id":6714862,"reputation":16230,"user_id":5176992,"display_name":"Eritrean"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1674734980,"creation_date":1674734980,"answer_id":75245951,"question_id":75245660,"body_markdown":"You can use `DecimalFormat` with an apropriate pattern and a `RoundingMode` to specify rounding behavior:\r\n\r\n    double number1 = 19.867;\r\n\r\n    DecimalFormat df = new DecimalFormat(&quot;#.##&quot;);\r\n    df.setRoundingMode(RoundingMode.DOWN);\r\n\r\n    System.out.println(df.format(number1));\r\n\r\nThe same can be achieved by converting the double value to `BigDecimal` and use `BigDecimal`‘s `setScale()` method with a `RoundingMode`\r\n\r\n    BigDecimal bigDecimalNumber1 = new BigDecimal(number1).setScale(2, RoundingMode.DOWN);\r\n    System.out.println(bigDecimalNumber1.doubleValue());","title":"Format Java double with only 2 decimal places without rounding","body":"<p>You can use <code>DecimalFormat</code> with an apropriate pattern and a <code>RoundingMode</code> to specify rounding behavior:</p>\n<pre><code>double number1 = 19.867;\n\nDecimalFormat df = new DecimalFormat(&quot;#.##&quot;);\ndf.setRoundingMode(RoundingMode.DOWN);\n\nSystem.out.println(df.format(number1));\n</code></pre>\n<p>The same can be achieved by converting the double value to <code>BigDecimal</code> and use <code>BigDecimal</code>‘s <code>setScale()</code> method with a <code>RoundingMode</code></p>\n<pre><code>BigDecimal bigDecimalNumber1 = new BigDecimal(number1).setScale(2, RoundingMode.DOWN);\nSystem.out.println(bigDecimalNumber1.doubleValue());\n</code></pre>\n"}],"owner":{"account_id":26775965,"reputation":25,"user_id":20371605,"display_name":"BBA"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":376,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75245951,"answer_count":1,"score":0,"last_activity_date":1674735236,"creation_date":1674733478,"question_id":75245660,"body_markdown":"I have variables that are doubles and I want to get the double with only 2 numbers after the decimal point. I tried it with \r\n\r\n`System.out.printf(&quot;%1.2f&quot;, number1);` \r\nbut the decimal places get rounded. For example if I have number1 = 19.867, I just want to get 19.86 and not the rounded version 19.87. How can I do that?\r\n","title":"Format Java double with only 2 decimal places without rounding","body":"<p>I have variables that are doubles and I want to get the double with only 2 numbers after the decimal point. I tried it with</p>\n<p><code>System.out.printf(&quot;%1.2f&quot;, number1);</code>\nbut the decimal places get rounded. For example if I have number1 = 19.867, I just want to get 19.86 and not the rounded version 19.87. How can I do that?</p>\n"},{"tags":["java","swing","jpopupmenu","jmenuitem","jpopup"],"answers":[{"tags":[],"owner":{"account_id":368268,"reputation":109587,"user_id":714968,"accept_rate":90,"display_name":"mKorbel"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1342707761,"creation_date":1342707761,"answer_id":11562919,"question_id":11562728,"body_markdown":"you look at\r\n\r\n1. `PopupMenuListener`\r\n\r\nbetter could be\r\n\r\n2. `JMenuItem`(s) can returns `ButtonModel`, \r\n\r\n3. `ButtonModel` returns `isRollover()`, `isArmend()`, `isPressed()` e.i.\r\n\r\n4. each of `JButtons JComponents` (JButton, JCheckBox, JRadioButton and JMenuXxx) implemented diferrent methods from `ButtonModel`\r\n\r\n","title":"Handle JPopupMenu closed","body":"<p>you look at</p>\n\n<ol>\n<li><code>PopupMenuListener</code></li>\n</ol>\n\n<p>better could be</p>\n\n<ol>\n<li><p><code>JMenuItem</code>(s) can returns <code>ButtonModel</code>, </p></li>\n<li><p><code>ButtonModel</code> returns <code>isRollover()</code>, <code>isArmend()</code>, <code>isPressed()</code> e.i.</p></li>\n<li><p>each of <code>JButtons JComponents</code> (JButton, JCheckBox, JRadioButton and JMenuXxx) implemented diferrent methods from <code>ButtonModel</code></p></li>\n</ol>\n"},{"tags":[],"owner":{"account_id":8546,"reputation":17688,"user_id":15472,"accept_rate":87,"display_name":"tucuxi"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1674735180,"creation_date":1342708514,"answer_id":11563138,"question_id":11562728,"body_markdown":"Something like this should do the trick:\r\n\r\n    myPopupMenu.addPopupMenuListener(new PopupMenuListener() {\r\n\r\n         @Override\r\n         public void popupMenuCanceled(final PopupMenuEvent e) {\r\n             highlightOff();\r\n         }\r\n\r\n         @Override\r\n         public void popupMenuWillBecomeInvisible(final PopupMenuEvent e) {\r\n             highlightOff();\r\n         }\r\n\r\n         @Override\r\n         public void popupMenuWillBecomeVisible(final PopupMenuEvent e) { }\r\n    }\r\n\r\n\r\n\r\nJust remember to add the listener before you make it visible, or inside its constructor.","title":"Handle JPopupMenu closed","body":"<p>Something like this should do the trick:</p>\n<pre><code>myPopupMenu.addPopupMenuListener(new PopupMenuListener() {\n\n     @Override\n     public void popupMenuCanceled(final PopupMenuEvent e) {\n         highlightOff();\n     }\n\n     @Override\n     public void popupMenuWillBecomeInvisible(final PopupMenuEvent e) {\n         highlightOff();\n     }\n\n     @Override\n     public void popupMenuWillBecomeVisible(final PopupMenuEvent e) { }\n}\n</code></pre>\n<p>Just remember to add the listener before you make it visible, or inside its constructor.</p>\n"}],"owner":{"account_id":791608,"reputation":7269,"user_id":880787,"accept_rate":83,"display_name":"AvrDragon"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2891,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":11562919,"answer_count":2,"score":2,"last_activity_date":1674735180,"creation_date":1342707090,"question_id":11562728,"body_markdown":"I want to highlight some elements on screen, when one JMenuItem in PopupMenu ist selected(mouse over). So i use MouseListener on my JMenuItem with\r\n\r\n\t\t\t@Override\r\n\t\t\tpublic void mouseEntered(MouseEvent e) {\r\n\t\t\t\thighlightOn();\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t@Override\r\n\t\t\tpublic void mouseExited(MouseEvent e) {\r\n\t\t\t\thighlightOff();\r\n\t\t\t}\r\n\r\nIt works fine, but if i press Esc the popup menu will be closed, without clean the highligt. How can i intercept the closing of JPopupMenu to handle this? ","title":"Handle JPopupMenu closed","body":"<p>I want to highlight some elements on screen, when one JMenuItem in PopupMenu ist selected(mouse over). So i use MouseListener on my JMenuItem with</p>\n\n<pre><code>        @Override\n        public void mouseEntered(MouseEvent e) {\n            highlightOn();\n        }\n\n        @Override\n        public void mouseExited(MouseEvent e) {\n            highlightOff();\n        }\n</code></pre>\n\n<p>It works fine, but if i press Esc the popup menu will be closed, without clean the highligt. How can i intercept the closing of JPopupMenu to handle this? </p>\n"},{"tags":["java","selenium-webdriver","url","selenium-chromedriver","google-chrome-headless"],"answers":[{"tags":[],"owner":{"account_id":27625246,"reputation":29,"user_id":21085370,"display_name":"Daniel Delimata"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674734974,"creation_date":1674732064,"answer_id":75245415,"question_id":75242129,"body_markdown":"Headless mode has different reaction times. Make sure that your problem is not related to this, i.e. if your website is rendering the content before you want to interact with it. If not, then add some waiting. For quick checking, you can add `Thread.sleep(2000)` after the `get()` method and before checking the `WebElement`, but do not leave it in the final version of your tests and rather use the class `WebDriverWait` instead.\r\n\r\nIf this does not solve your problem, then try to check your code on some other page and provide a minimal example, for example:\r\n```java\r\n    public static void main(String[] args) {\r\n        ChromeOptions options = new ChromeOptions()\r\n                .addArguments(&quot;--headless&quot;);\r\n        WebDriver driver = new ChromeDriver(options);\r\n\r\n        driver.get(&quot;https://www.google.com/search?q=stackoverflow&quot;);\r\n        if (driver\r\n                .findElements(new By.ByPartialLinkText(&quot;Stack Overflow - Where Developers Learn&quot;))\r\n                .isEmpty()) {\r\n            System.out.println(&quot;Not found results of query passed in the URL&quot;);\r\n        } else {\r\n            System.out.println(&quot;Argument was passed in the URL correctly&quot;);\r\n        }\r\n        driver.quit();\r\n    }\r\n```\r\nThe correct output is:\r\n```\r\nArgument was passed in the URL correctly\r\n```","title":"passing url parameters in chrome headless are not working with selenium java","body":"<p>Headless mode has different reaction times. Make sure that your problem is not related to this, i.e. if your website is rendering the content before you want to interact with it. If not, then add some waiting. For quick checking, you can add <code>Thread.sleep(2000)</code> after the <code>get()</code> method and before checking the <code>WebElement</code>, but do not leave it in the final version of your tests and rather use the class <code>WebDriverWait</code> instead.</p>\n<p>If this does not solve your problem, then try to check your code on some other page and provide a minimal example, for example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    public static void main(String[] args) {\n        ChromeOptions options = new ChromeOptions()\n                .addArguments(&quot;--headless&quot;);\n        WebDriver driver = new ChromeDriver(options);\n\n        driver.get(&quot;https://www.google.com/search?q=stackoverflow&quot;);\n        if (driver\n                .findElements(new By.ByPartialLinkText(&quot;Stack Overflow - Where Developers Learn&quot;))\n                .isEmpty()) {\n            System.out.println(&quot;Not found results of query passed in the URL&quot;);\n        } else {\n            System.out.println(&quot;Argument was passed in the URL correctly&quot;);\n        }\n        driver.quit();\n    }\n</code></pre>\n<p>The correct output is:</p>\n<pre><code>Argument was passed in the URL correctly\n</code></pre>\n"}],"owner":{"account_id":15014628,"reputation":321,"user_id":10837994,"display_name":"rarunp04"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":244,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1674734974,"creation_date":1674705269,"question_id":75242129,"body_markdown":"Please suggest some approach on passing url parameters with Chrome Headless using Selenium- Java\r\n\r\nI am passing url parameters as below while launching url and those values are passed correctly and the UI renders as per the values passed in url - while executing in Chrome without headless\r\n\r\nURL example : {domain}/?**ref=pd_sl_5szpgfto9i_e**\r\n\r\nWhile executing same script in Chrome headless the url parameters are passed but the UI is not rendered as per the parameters passed in URL\r\n{domain}/?**ref=pd_sl_5szpgfto9i_e**\r\n\r\nbased on ?**ref=pd_sl_5szpgfto9i_e** this parameter the UI working should change to other view","title":"passing url parameters in chrome headless are not working with selenium java","body":"<p>Please suggest some approach on passing url parameters with Chrome Headless using Selenium- Java</p>\n<p>I am passing url parameters as below while launching url and those values are passed correctly and the UI renders as per the values passed in url - while executing in Chrome without headless</p>\n<p>URL example : {domain}/?<strong>ref=pd_sl_5szpgfto9i_e</strong></p>\n<p>While executing same script in Chrome headless the url parameters are passed but the UI is not rendered as per the parameters passed in URL\n{domain}/?<strong>ref=pd_sl_5szpgfto9i_e</strong></p>\n<p>based on ?<strong>ref=pd_sl_5szpgfto9i_e</strong> this parameter the UI working should change to other view</p>\n"},{"tags":["java","android","connection","wifi","android-wifi"],"owner":{"account_id":20434039,"reputation":41,"user_id":14992344,"display_name":"XxTaro_"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":205,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1674734877,"creation_date":1674734877,"question_id":75245928,"body_markdown":"Recently i discovered that the implementation to connect to a Wifi in Android is deprecated for Android 10 or above and I&#39;m trying to fix my application using WifiNetworkSpecifier. But I notice the WifiNetworkSpecifier do not save the network connection and just stay connected while the application is running and when it&#39;s closed, the wifi is disconnected and do not save the password. \r\n\r\nI&#39;m using this code:\r\n```\r\nprivate void connectByWifiNetworkSpecifier(String wifiSsid, String pass) {\r\n        Log.d(TAG, &quot;connectByWifiNetworkSpecifier: wifi=&quot; + wifiSsid + &quot;, pass=&quot; + pass);\r\n        connectivityManager = (ConnectivityManager) context.getApplicationContext().getSystemService(Context.CONNECTIVITY_SERVICE);\r\n        WifiNetworkSpecifier.Builder specifierBuilder = new WifiNetworkSpecifier.Builder()\r\n                .setSsid(wifiSsid)\r\n                .setWpa2Passphrase(pass);\r\n\r\n        NetworkRequest request = new NetworkRequest.Builder()\r\n                .addTransportType(NetworkCapabilities.TRANSPORT_WIFI)\r\n                .removeCapability(NetworkCapabilities.NET_CAPABILITY_INTERNET)\r\n                .setNetworkSpecifier(specifierBuilder.build())\r\n                .build();\r\n\r\n        networkCallback = new ConnectivityManager.NetworkCallback() {\r\n            @Override\r\n            public void onAvailable(Network network) {\r\n                super.onAvailable(network);\r\n                Log.d(TAG, &quot;onAvailable: network=&quot; + network);\r\n                // do success processing here..\r\n                connectivityManager.bindProcessToNetwork(network);\r\n            }\r\n\r\n            @Override\r\n            public void onUnavailable() {\r\n                super.onUnavailable();\r\n                Log.d(TAG, &quot;onUnavailable: &quot;);\r\n                // do failure processing here..\r\n            }\r\n        };\r\n        connectivityManager.requestNetwork(request, networkCallback);\r\n    }\r\n```\r\n\r\nHave it any way to save the connection &quot;permanently&quot; (without me having to connect all the time and always put the password) using WifiNetworkSpecifier or another API?\r\n\r\n.                                                                             ","title":"Save a wifi network connection (password) with WifiNetworkSpecifier? Android","body":"<p>Recently i discovered that the implementation to connect to a Wifi in Android is deprecated for Android 10 or above and I'm trying to fix my application using WifiNetworkSpecifier. But I notice the WifiNetworkSpecifier do not save the network connection and just stay connected while the application is running and when it's closed, the wifi is disconnected and do not save the password.</p>\n<p>I'm using this code:</p>\n<pre><code>private void connectByWifiNetworkSpecifier(String wifiSsid, String pass) {\n        Log.d(TAG, &quot;connectByWifiNetworkSpecifier: wifi=&quot; + wifiSsid + &quot;, pass=&quot; + pass);\n        connectivityManager = (ConnectivityManager) context.getApplicationContext().getSystemService(Context.CONNECTIVITY_SERVICE);\n        WifiNetworkSpecifier.Builder specifierBuilder = new WifiNetworkSpecifier.Builder()\n                .setSsid(wifiSsid)\n                .setWpa2Passphrase(pass);\n\n        NetworkRequest request = new NetworkRequest.Builder()\n                .addTransportType(NetworkCapabilities.TRANSPORT_WIFI)\n                .removeCapability(NetworkCapabilities.NET_CAPABILITY_INTERNET)\n                .setNetworkSpecifier(specifierBuilder.build())\n                .build();\n\n        networkCallback = new ConnectivityManager.NetworkCallback() {\n            @Override\n            public void onAvailable(Network network) {\n                super.onAvailable(network);\n                Log.d(TAG, &quot;onAvailable: network=&quot; + network);\n                // do success processing here..\n                connectivityManager.bindProcessToNetwork(network);\n            }\n\n            @Override\n            public void onUnavailable() {\n                super.onUnavailable();\n                Log.d(TAG, &quot;onUnavailable: &quot;);\n                // do failure processing here..\n            }\n        };\n        connectivityManager.requestNetwork(request, networkCallback);\n    }\n</code></pre>\n<p>Have it any way to save the connection &quot;permanently&quot; (without me having to connect all the time and always put the password) using WifiNetworkSpecifier or another API?</p>\n<p>.</p>\n"},{"tags":["java","apache-kafka","spring-kafka","kafka-producer-api"],"comments":[{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1674673412,"post_id":75234927,"comment_id":132767046,"body_markdown":"Please show a [mcve]. What is `eventKey`? What is calling `send()`? Where are you using to check what the key is? What consumer code do you have?","body":"Please show a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. What is <code>eventKey</code>? What is calling <code>send()</code>? Where are you using to check what the key is? What consumer code do you have?"},{"owner":{"account_id":14888291,"reputation":69,"user_id":17676354,"display_name":"BugsAreEverywhere"},"score":0,"creation_date":1674738310,"post_id":75234927,"comment_id":132780334,"body_markdown":"@OneCricketeer eventKey as said is a string following the format &quot;1-some numbers&quot;. send() is the internal method of KafkaTemplate class in org.springframework.kafka.core package. I still don&#39;t have any consumer for that topic. I attached an edit within the question","body":"@OneCricketeer eventKey as said is a string following the format &quot;1-some numbers&quot;. send() is the internal method of KafkaTemplate class in org.springframework.kafka.core package. I still don&#39;t have any consumer for that topic. I attached an edit within the question"},{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1674746704,"post_id":75234927,"comment_id":132783343,"body_markdown":"[Kafka doesn&#39;t default to Integer or String serializer.](https://kafka.apache.org/documentation/#producerconfigs) As I asked, please show more of your code and your Spring config","body":"<a href=\"https://kafka.apache.org/documentation/#producerconfigs\" rel=\"nofollow noreferrer\">Kafka doesn&#39;t default to Integer or String serializer.</a> As I asked, please show more of your code and your Spring config"}],"owner":{"account_id":14888291,"reputation":69,"user_id":17676354,"display_name":"BugsAreEverywhere"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":276,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1674734841,"creation_date":1674654413,"question_id":75234927,"body_markdown":"I&#39;m facing a weird scenario in a Spring Boot application that uses Kafka and I don&#39;t really understand why.\r\n\r\nI have a Kafka Producer that sends kafka message that can represent several types of events. Those events are represented by a couple of mandatory fields, `eventType` and `eventKey`. the second field may represent different information from a conceptual point of view depending on the kind of event represented, although it will always be a string. \r\n\r\nAs the key of the kafka message I am assigning the same value that the `eventKey` field has, so it would be a string as well. However, I have observed that sometimes instead of putting the value that I indicate the key of the message kafka is initialized to &quot;1&quot;. This is when the value is a string containing dashes &quot;-&quot;.\r\n\r\nThis is the way I&#39;m generating the Kafka message.\r\n\r\n    public Mono&lt;SendResult&lt;String, GenericJsonMessage&gt;&gt; send(final String eventKey, @Valid final ObjectRest message)\r\n    {\r\n        requireNonNull(message, &quot;Message can&#39;t be null&quot;);\r\n\r\n        final GenericJsonMessage jsonMessage = TypedJsonMessage\r\n            .jsonBuilder(ObjectRest.class)\r\n            .build(message).toGenericJsonMessage();\r\n\r\n        final ProducerRecord&lt;String, GenericJsonMessage&gt; producerRecord = new ProducerRecord&lt;&gt;(topicName, eventKey, jsonMessage);\r\n        return Mono.fromCallable(() -&gt; kafkaTemplate.send(producerRecord).get()).subscribeOn(scheduler);\r\n    }\r\n\r\n\r\nI&#39;m wondering why this apparent limitation of the `ProducerRecord ` class and I imagine it has to do with the type of characters supported, which produces an error, and then sets the key to 1.\r\n\r\nI have never seen this before and have not been able to find an explanation that confirms my suspicions.\r\n\r\nI&#39;m not facing really a blocking problem. I already applied a workaround and deleted the hypens. Just curious about it.\r\n\r\n\r\nEdit:\r\n\r\nThe assumption of the setting to 1 was wrong. Doing some more research on how it works and how the key of a kafka message is processed internally I found out that it is binarized and that one option is to assign Serializers of string, integer and other data types and then, on the consumer, implement its consequent deserializer.\r\n\r\nNow I realize that what was happening was not that it was set to 1 but what kafka does when a string serializer is not assigned is to truncate the key where it finds a non-numeric character (I imagine that by default it must apply aninteger serializer). As my keys started with 1 followed by a - and some numbers the key was truncated after the first character, a 1, and therefore the key remained as 1.\r\n\r\n","title":"Kafka ProducerRecord setting kafka message key to &quot;1&quot;","body":"<p>I'm facing a weird scenario in a Spring Boot application that uses Kafka and I don't really understand why.</p>\n<p>I have a Kafka Producer that sends kafka message that can represent several types of events. Those events are represented by a couple of mandatory fields, <code>eventType</code> and <code>eventKey</code>. the second field may represent different information from a conceptual point of view depending on the kind of event represented, although it will always be a string.</p>\n<p>As the key of the kafka message I am assigning the same value that the <code>eventKey</code> field has, so it would be a string as well. However, I have observed that sometimes instead of putting the value that I indicate the key of the message kafka is initialized to &quot;1&quot;. This is when the value is a string containing dashes &quot;-&quot;.</p>\n<p>This is the way I'm generating the Kafka message.</p>\n<pre><code>public Mono&lt;SendResult&lt;String, GenericJsonMessage&gt;&gt; send(final String eventKey, @Valid final ObjectRest message)\n{\n    requireNonNull(message, &quot;Message can't be null&quot;);\n\n    final GenericJsonMessage jsonMessage = TypedJsonMessage\n        .jsonBuilder(ObjectRest.class)\n        .build(message).toGenericJsonMessage();\n\n    final ProducerRecord&lt;String, GenericJsonMessage&gt; producerRecord = new ProducerRecord&lt;&gt;(topicName, eventKey, jsonMessage);\n    return Mono.fromCallable(() -&gt; kafkaTemplate.send(producerRecord).get()).subscribeOn(scheduler);\n}\n</code></pre>\n<p>I'm wondering why this apparent limitation of the <code>ProducerRecord </code> class and I imagine it has to do with the type of characters supported, which produces an error, and then sets the key to 1.</p>\n<p>I have never seen this before and have not been able to find an explanation that confirms my suspicions.</p>\n<p>I'm not facing really a blocking problem. I already applied a workaround and deleted the hypens. Just curious about it.</p>\n<p>Edit:</p>\n<p>The assumption of the setting to 1 was wrong. Doing some more research on how it works and how the key of a kafka message is processed internally I found out that it is binarized and that one option is to assign Serializers of string, integer and other data types and then, on the consumer, implement its consequent deserializer.</p>\n<p>Now I realize that what was happening was not that it was set to 1 but what kafka does when a string serializer is not assigned is to truncate the key where it finds a non-numeric character (I imagine that by default it must apply aninteger serializer). As my keys started with 1 followed by a - and some numbers the key was truncated after the first character, a 1, and therefore the key remained as 1.</p>\n"},{"tags":["java","jar","war"],"comments":[{"owner":{"account_id":8320124,"reputation":2078,"user_id":6252134,"accept_rate":82,"display_name":"Paul Lemarchand"},"score":0,"creation_date":1557315194,"post_id":56039804,"comment_id":98721670,"body_markdown":"Possible duplicate of [java &#39;jar&#39; is not recognized as an internal or external command](https://stackoverflow.com/questions/29180639/java-jar-is-not-recognized-as-an-internal-or-external-command)","body":"Possible duplicate of <a href=\"https://stackoverflow.com/questions/29180639/java-jar-is-not-recognized-as-an-internal-or-external-command\">java &#39;jar&#39; is not recognized as an internal or external command</a>"},{"owner":{"account_id":15510200,"reputation":340,"user_id":11189140,"display_name":"Anirudh Simha"},"score":0,"creation_date":1557315503,"post_id":56039804,"comment_id":98721841,"body_markdown":"do you have jdk installed?The jar command is present there","body":"do you have jdk installed?The jar command is present there"}],"answers":[{"tags":[],"owner":{"account_id":164316,"reputation":738,"user_id":386991,"accept_rate":50,"display_name":"Machisuji"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1557315542,"creation_date":1557315542,"answer_id":56039961,"question_id":56039804,"body_markdown":"You probably don&#39;t have a JDK installed. Either way it&#39;s just a plain old zip archive with another file extension. So on Linux just use unzip or on Windows just rename the file to .zip and the explorer will be able to extract it for you.","title":"Extracting a jar of .m2 folder","body":"<p>You probably don't have a JDK installed. Either way it's just a plain old zip archive with another file extension. So on Linux just use unzip or on Windows just rename the file to .zip and the explorer will be able to extract it for you.</p>\n"}],"owner":{"account_id":15659470,"reputation":7,"user_id":11298756,"display_name":"Ankit Pande"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2567,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1674734529,"creation_date":1557315097,"question_id":56039804,"body_markdown":"I have to extract a war file.\r\n\r\nthe command is &quot;jar -xvf CameraSimulator-0.0.1-SNAPSHOT.war&quot;, but when I fire the command terminal it says &#39;jar&#39; is not recognized as an internal or external command.\r\n\r\nIf i try to use &quot;java jar CameraSimulator-0.0.1-SNAPSHOT.war&quot; it doesn&#39;t work.\r\nPlease help me out. I am stuck\r\nThanks in Advance.","title":"Extracting a jar of .m2 folder","body":"<p>I have to extract a war file.</p>\n\n<p>the command is \"jar -xvf CameraSimulator-0.0.1-SNAPSHOT.war\", but when I fire the command terminal it says 'jar' is not recognized as an internal or external command.</p>\n\n<p>If i try to use \"java jar CameraSimulator-0.0.1-SNAPSHOT.war\" it doesn't work.\nPlease help me out. I am stuck\nThanks in Advance.</p>\n"},{"tags":["java","unit-testing","groovy","mocking","spock"],"comments":[{"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"score":1,"creation_date":1674662357,"post_id":75233429,"comment_id":132763258,"body_markdown":"It is kind of hard to reason about invisible code. There could be all kinds of reasons why this is not working. How about a minimal reproducer? Your Spock spec uses at least 5 classes I cannot see. I have no idea what they are doing. I also cannot magically know which kind of maybe popular library or API the classes originate from, because even your spec is incomplete (no import statements). Please enable others to reproduce your problem, that would be better than someone making educated guesses about why it might not work.","body":"It is kind of hard to reason about invisible code. There could be all kinds of reasons why this is not working. How about a minimal reproducer? Your Spock spec uses at least 5 classes I cannot see. I have no idea what they are doing. I also cannot magically know which kind of maybe popular library or API the classes originate from, because even your spec is incomplete (no import statements). Please enable others to reproduce your problem, that would be better than someone making educated guesses about why it might not work."},{"owner":{"account_id":3053258,"reputation":177,"user_id":2587422,"accept_rate":38,"display_name":"Luigi D."},"score":0,"creation_date":1674729312,"post_id":75233429,"comment_id":132777694,"body_markdown":"@kriegaex you&#39;re right, I added the code for the class constructor I&#39;m trying to test. Please let me know if this is enough.","body":"@kriegaex you&#39;re right, I added the code for the class constructor I&#39;m trying to test. Please let me know if this is enough."},{"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"score":0,"creation_date":1674741298,"post_id":75233429,"comment_id":132781307,"body_markdown":"The actual code under test, despite still incomplete, indeed was key to answering the question more easily, because it makes the problem reproducible. Just parsing the test in my head was not that helpful, because the answer was quite subtle.","body":"The actual code under test, despite still incomplete, indeed was key to answering the question more easily, because it makes the problem reproducible. Just parsing the test in my head was not that helpful, because the answer was quite subtle."}],"answers":[{"tags":[],"owner":{"account_id":67966,"reputation":12546,"user_id":2145769,"accept_rate":67,"display_name":"Leonard Br&#252;nings"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1674734492,"creation_date":1674734492,"answer_id":75245842,"question_id":75233429,"body_markdown":"The Problem lies in this line `getColumnName(_ as int) &gt;&gt; COL_NAME`\r\nit works when you change it to `getColumnName(_ as Integer) &gt;&gt; COL_NAME` or just `getColumnName(_) &gt;&gt; COL_NAME`.\r\n\r\nMy current assumptions as to why this is happening, is that the actual arguments in the mock are passed as an `Object[]` and that can&#39;t contain primitive types.\r\n\r\nHere is a runnable reproducer\r\n\r\n```groovy\r\nimport spock.lang.*;\r\nimport java.sql.*;\r\n\r\nclass ASpec extends Specification {\r\n    def &quot;initialising a SQL table&quot;() {\r\n        given:\r\n            def COL_NAME = &quot;someColumnName&quot;\r\n            def mockResSetMeta = Mock(ResultSetMetaData) {\r\n                getColumnCount() &gt;&gt; 1\r\n                getColumnName(_ as Integer) &gt;&gt; COL_NAME\r\n            }\r\n\r\n        and:\r\n            def mockResSet = Mock(ResultSet) {\r\n                getMetaData() &gt;&gt; mockResSetMeta\r\n            }\r\n\r\n        and:\r\n            def mockStatement = Mock(Statement) {\r\n                executeQuery(_ as String) &gt;&gt; mockResSet\r\n            }\r\n\r\n        and:\r\n            def mockConn = Mock(Connection) {\r\n                createStatement() &gt;&gt; mockStatement\r\n            }\r\n\r\n        when: &quot;SqlTable object&quot;\r\n        def table = new SqlTable(mockConn, &quot;some query&quot;)\r\n\r\n        then: &quot;the table contains the categorical column&quot;\r\n        table.columns[0].getName() == COL_NAME\r\n    }\r\n}\r\n\r\n@groovy.transform.Canonical\r\nclass Column {\r\n    String name\r\n}\r\n\r\nclass SqlTable {\r\n    def columns\r\n    public SqlTable(Connection conn, String query) throws Exception {\r\n        def statement = conn.createStatement();\r\n        def resultSet = statement.executeQuery(query);\r\n\r\n        def meta = resultSet.getMetaData();\r\n        int n = meta.getColumnCount();\r\n        columns = new Column[n];\r\n\r\n        for (int c = 0; c &lt; n; c++) {\r\n            columns[c] = new Column(meta.getColumnName(c+1));\r\n            // ...\r\n        }\r\n    }\r\n}\r\n```\r\nTry it in the [Groovy Web Console][1]\r\n\r\nFor future reference, I easily detect the issue by actually performing mocking and not just stubbing.\r\n\r\n```groovy\r\nthen:\r\n1 * mockResSetMeta.getColumnName(_ as int) &gt;&gt; COL_NAME\r\n```\r\n\r\nwill print\r\n\r\n```\r\n               1 * mockResSetMeta.getColumnName(_ as int) &gt;&gt; COL_NAME   (0 invocations)\r\n            \r\n               Unmatched invocations (ordered by similarity):\r\n            \r\n               1 * mockResSetMeta.getColumnName(1)\r\n               One or more arguments(s) didn&#39;t match:\r\n               0: argument instanceof int\r\n                  |        |          |\r\n                  |        false      int\r\n                  1 (java.lang.Integer)\r\n```\r\n\r\n\r\n  [1]: https://gwc-experiment.appspot.com/?g=groovy_3_0&amp;codez=eJyVU8Fu2zAMvfsrCJ-cZVDb67IUK7IeBjQdOu9WBIWiMJ46W0osOUkx5N9HWbZsJ82husiiH8lH8lEWG11aMBst_rKcq4x9mkTSG1_5jjOzzZ0pEjk3Bu7SDQrAg0W1MuAeci0Ft1Ir-BcBnRWuIZZKWslzaaTKgEP69ACWL3OMk1EDcyeTO1RfwrP1nv18eHm8m9_DFGKjC5zpvCrUIy8wPsMWRPsXmhTtHC0njzkZErJUuW2M37nl_awhO1ofeaYrZYnY7S3cXEa5_MkLcAM_lMUMy9qh5TrwO0bhydXqvMCO9BnhC0TbOjzLYdEfTp1abrFAFbIHw3vZ8YCisvhUYfnm609tSWM9YfJhFjOtVEvAfaNwInqPgSiR-AWSXQ-C6VLy_R_SF8TpNv_t1Ad6-UppOhU5LrUuiYjCPbTApCX42SsQtq76eNRFtj4yXU0AoZXlUhn3B2ghMNMlLUZOP5x6upw1nHmreb5eMBpvra0RTKdDPR0jquVbVmq9e2O25MqsdVmwGVdaudjNTnp9No3zwwFFEZ23R4QGdCvaEKjfm2qZS9FV343DlUVNaILWXRhRhaXeG7g_CNz0Fr-NbHrycu7sbH6TAb5stU_44MsGsvOJJ9HAr_ALH9zZYE-6HJKYOKU5PDtd-g7WNKRRggc9q0UvKTUfEhdNEOh6QtdXUHSNx6eqbacrFoNwyZBCPXUxvhn1WLhzdQWMsWA6Bi38B0einrk","title":"Mocking with Spock returns null for nested mocking and stubbing","body":"<p>The Problem lies in this line <code>getColumnName(_ as int) &gt;&gt; COL_NAME</code>\nit works when you change it to <code>getColumnName(_ as Integer) &gt;&gt; COL_NAME</code> or just <code>getColumnName(_) &gt;&gt; COL_NAME</code>.</p>\n<p>My current assumptions as to why this is happening, is that the actual arguments in the mock are passed as an <code>Object[]</code> and that can't contain primitive types.</p>\n<p>Here is a runnable reproducer</p>\n<pre><code>import spock.lang.*;\nimport java.sql.*;\n\nclass ASpec extends Specification {\n    def &quot;initialising a SQL table&quot;() {\n        given:\n            def COL_NAME = &quot;someColumnName&quot;\n            def mockResSetMeta = Mock(ResultSetMetaData) {\n                getColumnCount() &gt;&gt; 1\n                getColumnName(_ as Integer) &gt;&gt; COL_NAME\n            }\n\n        and:\n            def mockResSet = Mock(ResultSet) {\n                getMetaData() &gt;&gt; mockResSetMeta\n            }\n\n        and:\n            def mockStatement = Mock(Statement) {\n                executeQuery(_ as String) &gt;&gt; mockResSet\n            }\n\n        and:\n            def mockConn = Mock(Connection) {\n                createStatement() &gt;&gt; mockStatement\n            }\n\n        when: &quot;SqlTable object&quot;\n        def table = new SqlTable(mockConn, &quot;some query&quot;)\n\n        then: &quot;the table contains the categorical column&quot;\n        table.columns[0].getName() == COL_NAME\n    }\n}\n\n@groovy.transform.Canonical\nclass Column {\n    String name\n}\n\nclass SqlTable {\n    def columns\n    public SqlTable(Connection conn, String query) throws Exception {\n        def statement = conn.createStatement();\n        def resultSet = statement.executeQuery(query);\n\n        def meta = resultSet.getMetaData();\n        int n = meta.getColumnCount();\n        columns = new Column[n];\n\n        for (int c = 0; c &lt; n; c++) {\n            columns[c] = new Column(meta.getColumnName(c+1));\n            // ...\n        }\n    }\n}\n</code></pre>\n<p>Try it in the <a href=\"https://gwc-experiment.appspot.com/?g=groovy_3_0&amp;codez=eJyVU8Fu2zAMvfsrCJ-cZVDb67IUK7IeBjQdOu9WBIWiMJ46W0osOUkx5N9HWbZsJ82husiiH8lH8lEWG11aMBst_rKcq4x9mkTSG1_5jjOzzZ0pEjk3Bu7SDQrAg0W1MuAeci0Ft1Ir-BcBnRWuIZZKWslzaaTKgEP69ACWL3OMk1EDcyeTO1RfwrP1nv18eHm8m9_DFGKjC5zpvCrUIy8wPsMWRPsXmhTtHC0njzkZErJUuW2M37nl_awhO1ofeaYrZYnY7S3cXEa5_MkLcAM_lMUMy9qh5TrwO0bhydXqvMCO9BnhC0TbOjzLYdEfTp1abrFAFbIHw3vZ8YCisvhUYfnm609tSWM9YfJhFjOtVEvAfaNwInqPgSiR-AWSXQ-C6VLy_R_SF8TpNv_t1Ad6-UppOhU5LrUuiYjCPbTApCX42SsQtq76eNRFtj4yXU0AoZXlUhn3B2ghMNMlLUZOP5x6upw1nHmreb5eMBpvra0RTKdDPR0jquVbVmq9e2O25MqsdVmwGVdaudjNTnp9No3zwwFFEZ23R4QGdCvaEKjfm2qZS9FV343DlUVNaILWXRhRhaXeG7g_CNz0Fr-NbHrycu7sbH6TAb5stU_44MsGsvOJJ9HAr_ALH9zZYE-6HJKYOKU5PDtd-g7WNKRRggc9q0UvKTUfEhdNEOh6QtdXUHSNx6eqbacrFoNwyZBCPXUxvhn1WLhzdQWMsWA6Bi38B0einrk\" rel=\"nofollow noreferrer\">Groovy Web Console</a></p>\n<p>For future reference, I easily detect the issue by actually performing mocking and not just stubbing.</p>\n<pre><code>then:\n1 * mockResSetMeta.getColumnName(_ as int) &gt;&gt; COL_NAME\n</code></pre>\n<p>will print</p>\n<pre><code>               1 * mockResSetMeta.getColumnName(_ as int) &gt;&gt; COL_NAME   (0 invocations)\n            \n               Unmatched invocations (ordered by similarity):\n            \n               1 * mockResSetMeta.getColumnName(1)\n               One or more arguments(s) didn't match:\n               0: argument instanceof int\n                  |        |          |\n                  |        false      int\n                  1 (java.lang.Integer)\n</code></pre>\n"}],"owner":{"account_id":3053258,"reputation":177,"user_id":2587422,"accept_rate":38,"display_name":"Luigi D."},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":466,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75245842,"answer_count":1,"score":0,"last_activity_date":1674734492,"creation_date":1674646714,"question_id":75233429,"body_markdown":"I am writing unit tests with Spock for a series of nested objects. The code I&#39;m writing tests for is quite legacy and doesn&#39;t use dependency injection. However it is also quite mission-critical so I&#39;d rather not touch it unless I really need to. \r\n\r\nHere is the constructor of the class I&#39;m trying to test:\r\n\r\n```java\r\npublic SqlTable(Connection conn, String query) throws Exception {\r\n    this.statement = conn.createStatement();\r\n    this.resultSet = statement.executeQuery(query);\r\n\r\n    meta = resultSet.getMetaData();\r\n    int n = meta.getColumnCount();\r\n    columns = new Column[n];\r\n\r\n    for (int c = 0; c &lt; n; c++) {\r\n        columns[c] = new Column(meta.getColumnName(c+1));\r\n        // ...\r\n    }\r\n}\r\n```\r\n\r\nIn the tests I stub the nested mocks in a `.groovy` file, like this:\r\n\r\n```scala\r\ndef &quot;initialising a SQL table&quot;() {\r\n    given:\r\n    def COL_NAME = &quot;someColumnName&quot;\r\n    def mockResSetMeta = Mock(ResultSetMetaData) {\r\n        getColumnCount() &gt;&gt; 1\r\n        getColumnName(_ as int) &gt;&gt; COL_NAME\r\n    }\r\n\r\n    and:\r\n    def mockResSet = Mock(ResultSet) {\r\n        getMetaData() &gt;&gt; mockResSetMeta\r\n    }\r\n\r\n    and:\r\n    def mockStatement = Mock(Statement) {\r\n        executeQuery(_ as String) &gt;&gt; mockResSet\r\n    }\r\n\r\n    and:\r\n    def mockConn = Mock(Connection) {\r\n        createStatement() &gt;&gt; mockStatement\r\n    }\r\n\r\n    when: &quot;SqlTable object&quot;\r\n    def table = new SqlTable(mockConn, &quot;some query&quot;)\r\n\r\n    then: &quot;the table contains the categorical column&quot;\r\n    table.columns[0].getName() == COL_NAME\r\n}\r\n```\r\n\r\nHowever the test fails. By debugging, I found that, in the `SqlTable` constructor, the mock for the `ResultSetMetaData` object, when `getColumnName()` is called, always returns `null`.\r\n\r\nI did some digging, and it seems like this is due to how stubbing and mocking are handled together by Spock. I found two promising answers on SO:\r\n\r\n* https://stackoverflow.com/questions/41841668\r\n* https://stackoverflow.com/questions/55916321\r\n\r\nHowever for the life of me I wasn&#39;t able to modify the test in order to make it work.","title":"Mocking with Spock returns null for nested mocking and stubbing","body":"<p>I am writing unit tests with Spock for a series of nested objects. The code I'm writing tests for is quite legacy and doesn't use dependency injection. However it is also quite mission-critical so I'd rather not touch it unless I really need to.</p>\n<p>Here is the constructor of the class I'm trying to test:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public SqlTable(Connection conn, String query) throws Exception {\n    this.statement = conn.createStatement();\n    this.resultSet = statement.executeQuery(query);\n\n    meta = resultSet.getMetaData();\n    int n = meta.getColumnCount();\n    columns = new Column[n];\n\n    for (int c = 0; c &lt; n; c++) {\n        columns[c] = new Column(meta.getColumnName(c+1));\n        // ...\n    }\n}\n</code></pre>\n<p>In the tests I stub the nested mocks in a <code>.groovy</code> file, like this:</p>\n<pre class=\"lang-scala prettyprint-override\"><code>def &quot;initialising a SQL table&quot;() {\n    given:\n    def COL_NAME = &quot;someColumnName&quot;\n    def mockResSetMeta = Mock(ResultSetMetaData) {\n        getColumnCount() &gt;&gt; 1\n        getColumnName(_ as int) &gt;&gt; COL_NAME\n    }\n\n    and:\n    def mockResSet = Mock(ResultSet) {\n        getMetaData() &gt;&gt; mockResSetMeta\n    }\n\n    and:\n    def mockStatement = Mock(Statement) {\n        executeQuery(_ as String) &gt;&gt; mockResSet\n    }\n\n    and:\n    def mockConn = Mock(Connection) {\n        createStatement() &gt;&gt; mockStatement\n    }\n\n    when: &quot;SqlTable object&quot;\n    def table = new SqlTable(mockConn, &quot;some query&quot;)\n\n    then: &quot;the table contains the categorical column&quot;\n    table.columns[0].getName() == COL_NAME\n}\n</code></pre>\n<p>However the test fails. By debugging, I found that, in the <code>SqlTable</code> constructor, the mock for the <code>ResultSetMetaData</code> object, when <code>getColumnName()</code> is called, always returns <code>null</code>.</p>\n<p>I did some digging, and it seems like this is due to how stubbing and mocking are handled together by Spock. I found two promising answers on SO:</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/41841668\">Spock mock returns wrong value</a></li>\n<li><a href=\"https://stackoverflow.com/questions/55916321\">Mocked method returns null when invocations are checked as well</a></li>\n</ul>\n<p>However for the life of me I wasn't able to modify the test in order to make it work.</p>\n"},{"tags":["java","oracle-adf"],"comments":[{"owner":{"account_id":9571720,"reputation":6305,"user_id":7109162,"accept_rate":84,"display_name":"XtremeBaumer"},"score":0,"creation_date":1673876624,"post_id":75135031,"comment_id":132588591,"body_markdown":"Does this answer your question? [How to upload file using JSF 2.2 &lt;h:inputFile&gt;? Where is the saved File?](https://stackoverflow.com/questions/27677397/how-to-upload-file-using-jsf-2-2-hinputfile-where-is-the-saved-file)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/27677397/how-to-upload-file-using-jsf-2-2-hinputfile-where-is-the-saved-file\">How to upload file using JSF 2.2 &lt;h:inputFile&gt;? Where is the saved File?</a>"},{"owner":{"account_id":27316723,"reputation":42,"user_id":20837394,"display_name":"Yevgeniy"},"score":0,"creation_date":1673877016,"post_id":75135031,"comment_id":132588714,"body_markdown":"@XtremeBaumer I don&#39;t think this article answers my question, thanks!","body":"@XtremeBaumer I don&#39;t think this article answers my question, thanks!"},{"owner":{"account_id":1652896,"reputation":2486,"user_id":1523120,"display_name":"Timo Hahn"},"score":0,"creation_date":1673957401,"post_id":75135031,"comment_id":132607860,"body_markdown":"Try to debug the method by setting a breakpoint to the first line in the method. If you don&#39;t see any of your messages in the log, check that the log level is set to &#39;WARNING&#39; at least. Or, just for a test, use a `System.out.println` for the message and see if you see those in the logs.","body":"Try to debug the method by setting a breakpoint to the first line in the method. If you don&#39;t see any of your messages in the log, check that the log level is set to &#39;WARNING&#39; at least. Or, just for a test, use a <code>System.out.println</code> for the message and see if you see those in the logs."},{"owner":{"account_id":2658183,"reputation":967,"user_id":2298444,"accept_rate":91,"display_name":"Cedric"},"score":0,"creation_date":1674020332,"post_id":75135031,"comment_id":132623283,"body_markdown":"Does this answer your question? [ADF af:inputFile does not trigger ValueChangeEvent with valueChangeListener](https://stackoverflow.com/questions/36032476/adf-afinputfile-does-not-trigger-valuechangeevent-with-valuechangelistener)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/36032476/adf-afinputfile-does-not-trigger-valuechangeevent-with-valuechangelistener\">ADF af:inputFile does not trigger ValueChangeEvent with valueChangeListener</a>"},{"owner":{"account_id":27316723,"reputation":42,"user_id":20837394,"display_name":"Yevgeniy"},"score":0,"creation_date":1674031893,"post_id":75135031,"comment_id":132625823,"body_markdown":"I resolve this problem. I have &lt;af:form in other jsff class, and i added the setting there usesUpload=&quot;true&quot;. Thank you!","body":"I resolve this problem. I have &lt;af:form in other jsff class, and i added the setting there usesUpload=&quot;true&quot;. Thank you!"}],"answers":[{"tags":[],"owner":{"account_id":27316723,"reputation":42,"user_id":20837394,"display_name":"Yevgeniy"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1674734435,"creation_date":1674734435,"answer_id":75245831,"question_id":75135031,"body_markdown":"The solution to this problem is to add a parameter **usesUpload=&quot;true&quot;**. I have this form **&lt;af:form** was set in another .jsff file, so I added the **usesUpload=&quot;true&quot;** parameter to the file where the form was located.","title":"Import data from XLS and XLSX (Excel) to ADF Table Using Apache POI","body":"<p>The solution to this problem is to add a parameter <strong>usesUpload=&quot;true&quot;</strong>. I have this form <strong>&lt;af:form</strong> was set in another .jsff file, so I added the <strong>usesUpload=&quot;true&quot;</strong> parameter to the file where the form was located.</p>\n"}],"owner":{"account_id":27316723,"reputation":42,"user_id":20837394,"display_name":"Yevgeniy"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":131,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75245831,"answer_count":1,"score":0,"last_activity_date":1674734435,"creation_date":1673876387,"question_id":75135031,"body_markdown":"I need to add the ability to upload an XLSX file in an existing project. I act according to the instructions http://www.awasthiashish.com/2017/01/import-data-from-xls-and-xlsx-excel-to.html. The question is that when I select an XLSX file, nothing happens. I put the logs inside the uploadFileVCE method, when I upload a file it doesn&#39;t output anything, as if it doesn&#39;t even enter the method. Help, can anyone come across.\r\n\r\n\r\n\r\nADF version: Studio Edition Version 12.2.1.0.0\r\n\r\n\r\n\r\nHere is my jsff file:\r\n\r\n    &lt;af:inputFile label=&quot;Upload file&quot; id=&quot;if1&quot;\r\n    valueChangeListener=&quot;#{pageFlowScope.Class1Bean.uploadFileVCE}&quot;\r\n    autoSubmit=&quot;true&quot; \r\n    labelStyle=&quot;font-weight:bold;color:navy;&quot;/&gt;\r\n\r\nhere is my Bean class:\r\n   \r\n\r\n     public void uploadFileVCE(ValueChangeEvent valueChangeEvent) {\r\n            log.warn(&quot;FIRST&quot;);\r\n                UploadedFile file = (UploadedFile) valueChangeEvent.getNewValue();\r\n                log.warn(&quot;SECOND&quot;);\r\n                try {\r\n                    //Check if file is XLSX\r\n                    log.warn(&quot;THIRD&quot;);\r\n                    if (file.getContentType().equalsIgnoreCase(&quot;application/vnd.openxmlformats-officedocument.spreadsheetml.sheet&quot;) ||\r\n                        file.getContentType().equalsIgnoreCase(&quot;application/xlsx&quot;)) {\r\n                        log.warn(&quot;FOURTH&quot;);\r\n                        readNProcessExcelx(file.getInputStream()); //for xlsx\r\n    \r\n                    }\r\n                    //Check if file is XLS\r\n                    else if (file.getContentType().equalsIgnoreCase(&quot;application/vnd.ms-excel&quot;)) {\r\n    \r\n                        if (file.getFilename().toUpperCase().endsWith(&quot;.XLS&quot;)) {\r\n                           // readNProcessExcel(file.getInputStream()); //for xls\r\n                        }\r\n    \r\n                    } else {\r\n                        FacesMessage msg = new FacesMessage(&quot;File format not supported.-- Upload XLS or XLSX file&quot;);\r\n                        msg.setSeverity(FacesMessage.SEVERITY_WARN);\r\n                        FacesContext.getCurrentInstance().addMessage(null, msg);\r\n                    }\r\n                    AdfFacesContext.getCurrentInstance().addPartialTarget(empTable);\r\n    \r\n                } catch (Exception e) {\r\n                    log.warn(e);\r\n                }\r\n            }\r\n\r\n","title":"Import data from XLS and XLSX (Excel) to ADF Table Using Apache POI","body":"<p>I need to add the ability to upload an XLSX file in an existing project. I act according to the instructions <a href=\"http://www.awasthiashish.com/2017/01/import-data-from-xls-and-xlsx-excel-to.html\" rel=\"nofollow noreferrer\">http://www.awasthiashish.com/2017/01/import-data-from-xls-and-xlsx-excel-to.html</a>. The question is that when I select an XLSX file, nothing happens. I put the logs inside the uploadFileVCE method, when I upload a file it doesn't output anything, as if it doesn't even enter the method. Help, can anyone come across.</p>\n<p>ADF version: Studio Edition Version 12.2.1.0.0</p>\n<p>Here is my jsff file:</p>\n<pre><code>&lt;af:inputFile label=&quot;Upload file&quot; id=&quot;if1&quot;\nvalueChangeListener=&quot;#{pageFlowScope.Class1Bean.uploadFileVCE}&quot;\nautoSubmit=&quot;true&quot; \nlabelStyle=&quot;font-weight:bold;color:navy;&quot;/&gt;\n</code></pre>\n<p>here is my Bean class:</p>\n<pre><code> public void uploadFileVCE(ValueChangeEvent valueChangeEvent) {\n        log.warn(&quot;FIRST&quot;);\n            UploadedFile file = (UploadedFile) valueChangeEvent.getNewValue();\n            log.warn(&quot;SECOND&quot;);\n            try {\n                //Check if file is XLSX\n                log.warn(&quot;THIRD&quot;);\n                if (file.getContentType().equalsIgnoreCase(&quot;application/vnd.openxmlformats-officedocument.spreadsheetml.sheet&quot;) ||\n                    file.getContentType().equalsIgnoreCase(&quot;application/xlsx&quot;)) {\n                    log.warn(&quot;FOURTH&quot;);\n                    readNProcessExcelx(file.getInputStream()); //for xlsx\n\n                }\n                //Check if file is XLS\n                else if (file.getContentType().equalsIgnoreCase(&quot;application/vnd.ms-excel&quot;)) {\n\n                    if (file.getFilename().toUpperCase().endsWith(&quot;.XLS&quot;)) {\n                       // readNProcessExcel(file.getInputStream()); //for xls\n                    }\n\n                } else {\n                    FacesMessage msg = new FacesMessage(&quot;File format not supported.-- Upload XLS or XLSX file&quot;);\n                    msg.setSeverity(FacesMessage.SEVERITY_WARN);\n                    FacesContext.getCurrentInstance().addMessage(null, msg);\n                }\n                AdfFacesContext.getCurrentInstance().addPartialTarget(empTable);\n\n            } catch (Exception e) {\n                log.warn(e);\n            }\n        }\n</code></pre>\n"},{"tags":["java","google-cloud-platform","publish-subscribe","google-cloud-pubsub"],"answers":[{"tags":[],"owner":{"account_id":1136268,"reputation":15739,"user_id":1121288,"display_name":"Kamal Aboul-Hosn"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1674734177,"creation_date":1674734177,"answer_id":75245782,"question_id":75239055,"body_markdown":"It is not possible to set a max delivery attempt count without setting a dead letter topic. The max delivery attempt count indicates the number of times to attempt delivery before the message is sent to the dead letter topic.\r\n\r\nIf the dead letter topic cannot be used because it was deleted or proper publish permission has not been set up, then the message will continue to be delivered to subscribers on the original subscription until it is acknowledged, the dead letter topic is available, or the retention period has passed. In this case, the oldest unacked message age will increase until one of these things happens.","title":"How deadline exceeded messages are handled in pubsub","body":"<p>It is not possible to set a max delivery attempt count without setting a dead letter topic. The max delivery attempt count indicates the number of times to attempt delivery before the message is sent to the dead letter topic.</p>\n<p>If the dead letter topic cannot be used because it was deleted or proper publish permission has not been set up, then the message will continue to be delivered to subscribers on the original subscription until it is acknowledged, the dead letter topic is available, or the retention period has passed. In this case, the oldest unacked message age will increase until one of these things happens.</p>\n"}],"owner":{"account_id":3774672,"reputation":97,"user_id":3135811,"display_name":"subham"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":234,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75245782,"answer_count":1,"score":0,"last_activity_date":1674734177,"creation_date":1674675733,"question_id":75239055,"body_markdown":"I have set pubsub topic configuration as following:\r\n1. Acknowledgement deadline 600 sec\r\n2. max delivery attempt 10\r\n3. dead letter topic is not enabled\r\n\r\nMy question is:\r\n\r\n1. After 10 retry attempt, if pusub does not receive ack from subscriber, does it delete message from subscription or it will still be there in subscription till message retention period but will not be consumed.\r\n2. And if it is there in subscription till retention period will it keep increasing oldest unacked message age","title":"How deadline exceeded messages are handled in pubsub","body":"<p>I have set pubsub topic configuration as following:</p>\n<ol>\n<li>Acknowledgement deadline 600 sec</li>\n<li>max delivery attempt 10</li>\n<li>dead letter topic is not enabled</li>\n</ol>\n<p>My question is:</p>\n<ol>\n<li>After 10 retry attempt, if pusub does not receive ack from subscriber, does it delete message from subscription or it will still be there in subscription till message retention period but will not be consumed.</li>\n<li>And if it is there in subscription till retention period will it keep increasing oldest unacked message age</li>\n</ol>\n"},{"tags":["java","oop","inheritance","constructor"],"answers":[{"tags":[],"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1674733343,"creation_date":1674733343,"answer_id":75245631,"question_id":75245462,"body_markdown":"&gt; What if the base class has a lot of fields\r\n\r\nThe first question of course would be why you need that and whether there might be another way. In this answer I&#39;ll assume you&#39;ve already answered that question and came to the conclusion you need it.\r\n\r\n&gt; Let&#39;s say I have a `List&lt;A&gt; listA`, how can I create a constructor so I can easily turn this list to `List&lt;B&gt; listB`?\r\n\r\nYou could do a copy constructor and maybe also do something like this:\r\n\r\n    class A { \r\n      A(A other) {\r\n        //copy fields\r\n      }\r\n    }\r\n\r\n    class B extends A {\r\n      B(A other) {\r\n        super(other);\r\n        //init B fields\r\n      }\r\n    }\r\n\r\nWith this in place you can use plain iteration or streaming to turn a `List&lt;A&gt;` into a `List&lt;B&gt;`:\r\n\r\n    List&lt;B&gt; convertedList = origList.stream().map(a -&gt; new B(a)).collect(Collectors.toList());\r\n\r\nAnother option might be delegation but that would depend on your classes:\r\n\r\n    class B extends A {\r\n      A delegate;      \r\n\r\n      B(A delegate) {\r\n        this.delegate = delegate;\r\n        //init B fields\r\n      }\r\n \r\n      @Override\r\n      void setField1(String value) {\r\n        delegate.setField1(value);\r\n      }\r\n\r\n      @Override\r\n      String getField1() {\r\n        return delegate.getField1();\r\n      }\r\n    }\r\n\r\nDoing it like this would leave B&#39;s &quot;field1&quot; empty so it might not be the best option. If you have an interface for A it would look similar but leave less &quot;empty&quot; fields:\r\n\r\n    interface AInterface {\r\n      void setField1(String value);\r\n      String getField1();\r\n    }\r\n\r\n    class A implements AInterface {\r\n       ...\r\n    }\r\n\r\n    class B implements AInterface {\r\n      AInterface delegate;\r\n      \r\n      B(AInterface delegate) {\r\n         this.delegate = delegate;\r\n        //init B fields\r\n      }\r\n\r\n      @Override //this is not an actual override but an implementation\r\n      public void setField1(String value) {\r\n        delegate.setField1(value);\r\n      }\r\n\r\n      @Override //this is not an actual override but an implementation\r\n      public String getField1() {\r\n        return delegate.getField1();\r\n      }\r\n    }","title":"Java creating devired class from base","body":"<blockquote>\n<p>What if the base class has a lot of fields</p>\n</blockquote>\n<p>The first question of course would be why you need that and whether there might be another way. In this answer I'll assume you've already answered that question and came to the conclusion you need it.</p>\n<blockquote>\n<p>Let's say I have a <code>List&lt;A&gt; listA</code>, how can I create a constructor so I can easily turn this list to <code>List&lt;B&gt; listB</code>?</p>\n</blockquote>\n<p>You could do a copy constructor and maybe also do something like this:</p>\n<pre><code>class A { \n  A(A other) {\n    //copy fields\n  }\n}\n\nclass B extends A {\n  B(A other) {\n    super(other);\n    //init B fields\n  }\n}\n</code></pre>\n<p>With this in place you can use plain iteration or streaming to turn a <code>List&lt;A&gt;</code> into a <code>List&lt;B&gt;</code>:</p>\n<pre><code>List&lt;B&gt; convertedList = origList.stream().map(a -&gt; new B(a)).collect(Collectors.toList());\n</code></pre>\n<p>Another option might be delegation but that would depend on your classes:</p>\n<pre><code>class B extends A {\n  A delegate;      \n\n  B(A delegate) {\n    this.delegate = delegate;\n    //init B fields\n  }\n\n  @Override\n  void setField1(String value) {\n    delegate.setField1(value);\n  }\n\n  @Override\n  String getField1() {\n    return delegate.getField1();\n  }\n}\n</code></pre>\n<p>Doing it like this would leave B's &quot;field1&quot; empty so it might not be the best option. If you have an interface for A it would look similar but leave less &quot;empty&quot; fields:</p>\n<pre><code>interface AInterface {\n  void setField1(String value);\n  String getField1();\n}\n\nclass A implements AInterface {\n   ...\n}\n\nclass B implements AInterface {\n  AInterface delegate;\n  \n  B(AInterface delegate) {\n     this.delegate = delegate;\n    //init B fields\n  }\n\n  @Override //this is not an actual override but an implementation\n  public void setField1(String value) {\n    delegate.setField1(value);\n  }\n\n  @Override //this is not an actual override but an implementation\n  public String getField1() {\n    return delegate.getField1();\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":12973262,"reputation":610,"user_id":9560002,"display_name":"Arzybek"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":46,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75245631,"answer_count":1,"score":1,"last_activity_date":1674734155,"creation_date":1674732330,"question_id":75245462,"body_markdown":"Let&#39;s say I have a base class:\r\n\r\n```\r\nClass A {\r\n    public String field1;\r\n\r\n    public A(String field1){\r\n        this.field1 = field1;\r\n    }\r\n}\r\n```\r\n\r\nAnd a devired class:\r\n\r\n```\r\nClass B extends A {\r\n    public String field2;\r\n}\r\n```\r\n\r\nLet&#39;s say I have a `List&lt;A&gt; listA`, how can I create a constructor so I can easily turn this list to `List&lt;B&gt; listB`? I want to have a constructor in `B class` that will take `A object` and fill in all the fields from `A` in `B` and have some logic to construct new fields. Something like this:\r\n\r\n```\r\nClass B extends A {\r\n    public String field2;\r\n\r\n    public B (A a){\r\n        this = a;\r\n        this.field2 = doLogic(a);\r\n    }\r\n}\r\n```\r\n\r\nOr at least just fill in all the fields from A in B:\r\n\r\n```\r\npublic B(A a){\r\n    this = a;\r\n}\r\n```\r\n\r\nSo later I can just manually set the field from `B`, to something like this:\r\n\r\n```\r\nlistA.stream().map(x -&gt; new B(x)).map(x -&gt; x.setField2(logic(x)));\r\n```\r\n\r\nI know I can do it like this:\r\n\r\n```\r\nClass B extends A {\r\n    public String field2;\r\n\r\n    public B(A a){\r\n        super(a.getField1());\r\n    }\r\n}\r\n```\r\n\r\nBut this just doesn&#39;t look right to me, getting the fields of the object just to call a constructor of the same class.\r\n\r\nWhat if the base class has a lot of fields, will you need to get all of the fields to call in the constructor? It doesn&#39;t look good, so I&#39;m wondering if is there any better way.","title":"Java creating devired class from base","body":"<p>Let's say I have a base class:</p>\n<pre><code>Class A {\n    public String field1;\n\n    public A(String field1){\n        this.field1 = field1;\n    }\n}\n</code></pre>\n<p>And a devired class:</p>\n<pre><code>Class B extends A {\n    public String field2;\n}\n</code></pre>\n<p>Let's say I have a <code>List&lt;A&gt; listA</code>, how can I create a constructor so I can easily turn this list to <code>List&lt;B&gt; listB</code>? I want to have a constructor in <code>B class</code> that will take <code>A object</code> and fill in all the fields from <code>A</code> in <code>B</code> and have some logic to construct new fields. Something like this:</p>\n<pre><code>Class B extends A {\n    public String field2;\n\n    public B (A a){\n        this = a;\n        this.field2 = doLogic(a);\n    }\n}\n</code></pre>\n<p>Or at least just fill in all the fields from A in B:</p>\n<pre><code>public B(A a){\n    this = a;\n}\n</code></pre>\n<p>So later I can just manually set the field from <code>B</code>, to something like this:</p>\n<pre><code>listA.stream().map(x -&gt; new B(x)).map(x -&gt; x.setField2(logic(x)));\n</code></pre>\n<p>I know I can do it like this:</p>\n<pre><code>Class B extends A {\n    public String field2;\n\n    public B(A a){\n        super(a.getField1());\n    }\n}\n</code></pre>\n<p>But this just doesn't look right to me, getting the fields of the object just to call a constructor of the same class.</p>\n<p>What if the base class has a lot of fields, will you need to get all of the fields to call in the constructor? It doesn't look good, so I'm wondering if is there any better way.</p>\n"},{"tags":["java","pdf","adobe","zebra-printers"],"comments":[{"owner":{"account_id":25086,"reputation":6435,"user_id":64238,"accept_rate":84,"display_name":"Ovi Tisler"},"score":2,"creation_date":1406057138,"post_id":24887961,"comment_id":38674597,"body_markdown":"nope.  Printing from Acrobat using a driver rasters the pdf into zpl and prints that way. If you can convert the PDF into an image, and then convert and store the image on the printer (zebra has an SDK to dither and convert to 1-bit-per-pixel BW image), you can print that image by recalling it with some zpl","body":"nope.  Printing from Acrobat using a driver rasters the pdf into zpl and prints that way. If you can convert the PDF into an image, and then convert and store the image on the printer (zebra has an SDK to dither and convert to 1-bit-per-pixel BW image), you can print that image by recalling it with some zpl"},{"owner":{"account_id":3440462,"reputation":5298,"user_id":2882550,"accept_rate":65,"display_name":"VH-NZZ"},"score":0,"creation_date":1410452819,"post_id":24887961,"comment_id":40341252,"body_markdown":"@OviTisler Would that work from an Android device too? Namely, could you print a PDF or an image from an Android device to a Zebra printer?","body":"@OviTisler Would that work from an Android device too? Namely, could you print a PDF or an image from an Android device to a Zebra printer?"},{"owner":{"account_id":25086,"reputation":6435,"user_id":64238,"accept_rate":84,"display_name":"Ovi Tisler"},"score":1,"creation_date":1410482417,"post_id":24887961,"comment_id":40353791,"body_markdown":"yeah, if you use the Zebra android SDK","body":"yeah, if you use the Zebra android SDK"}],"answers":[{"tags":[],"owner":{"account_id":56380,"reputation":51071,"user_id":168868,"display_name":"Charles"},"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1406444107,"creation_date":1406444107,"answer_id":24978637,"question_id":24887961,"body_markdown":"&gt; The zebra printer works fine when printed through Acrobat Reader, does Adobe Reader translate the PDF into zpl?\r\n\r\nNo.  Adobe Reader prepares a document that the system&#39;s print service can consume.  The print service then invokes the Zebra drivers, and *those* are what convert the document into the printer&#39;s native language.  This is how all print drivers work on all platforms, not just on Windows.  CUPS does the same thing on Linux and MacOS.  \r\n\r\nDon&#39;t spend time building a PDF =&gt; image =&gt; ZPL translator.  Your time will be better spent simply having your application speak to the OS native print service.  I don&#39;t do Java, but a bit of time on my search engine of choice suggests that Java seems to support printing this way.","title":"Can you direct pdf print to a zebra printer","body":"<blockquote>\n  <p>The zebra printer works fine when printed through Acrobat Reader, does Adobe Reader translate the PDF into zpl?</p>\n</blockquote>\n\n<p>No.  Adobe Reader prepares a document that the system's print service can consume.  The print service then invokes the Zebra drivers, and <em>those</em> are what convert the document into the printer's native language.  This is how all print drivers work on all platforms, not just on Windows.  CUPS does the same thing on Linux and MacOS.  </p>\n\n<p>Don't spend time building a PDF => image => ZPL translator.  Your time will be better spent simply having your application speak to the OS native print service.  I don't do Java, but a bit of time on my search engine of choice suggests that Java seems to support printing this way.</p>\n"},{"tags":[],"owner":{"account_id":3665508,"reputation":57,"user_id":3054067,"display_name":"umairnaqvi"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1415374568,"creation_date":1415373414,"answer_id":26804323,"question_id":24887961,"body_markdown":"A better but slightly not so reusable way is to use ZPL or EPL (whatever your particular zebra printer supports).\r\n \r\n  By the way ZPL is Zebra programming language which is proprietary to Zebra. You can directly write the ZPL String on to the serial or parallel port without installing any Zebra driver (rather using Windows Generic Text Printer driver). For example you can send following string directly to printer port (Serial, Parallel or Network)\r\n\r\n    ^XA^FO40,40^AC2,20^FD^FS^FO40,60^BY2,2.8,10^BCN,100,Y,N,N^FD Barcode label ^FS^XZ\r\n\r\nHope it helps. ","title":"Can you direct pdf print to a zebra printer","body":"<p>A better but slightly not so reusable way is to use ZPL or EPL (whatever your particular zebra printer supports).</p>\n\n<p>By the way ZPL is Zebra programming language which is proprietary to Zebra. You can directly write the ZPL String on to the serial or parallel port without installing any Zebra driver (rather using Windows Generic Text Printer driver). For example you can send following string directly to printer port (Serial, Parallel or Network)</p>\n\n<pre><code>^XA^FO40,40^AC2,20^FD^FS^FO40,60^BY2,2.8,10^BCN,100,Y,N,N^FD Barcode label ^FS^XZ\n</code></pre>\n\n<p>Hope it helps. </p>\n"},{"tags":[],"owner":{"account_id":7730949,"reputation":1,"user_id":5854120,"display_name":"Printer Guru"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1454013434,"creation_date":1454013434,"answer_id":35071534,"question_id":24887961,"body_markdown":"You can print a PDF to a Zebra printer using the Mobi Print Utility for android and iOS. It can print bluetooth or wifi.\r\n\r\n","title":"Can you direct pdf print to a zebra printer","body":"<p>You can print a PDF to a Zebra printer using the Mobi Print Utility for android and iOS. It can print bluetooth or wifi.</p>\n"},{"tags":[],"owner":{"account_id":9536151,"reputation":31,"user_id":11628074,"display_name":"Justin Bennett"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1560204811,"creation_date":1560204811,"answer_id":56534157,"question_id":24887961,"body_markdown":"If you have a printer with Link-OS you can purchase and install PDF Direct from Zebra on the printer firmware. You can then send a pdf directly to the printer. We do this by connecting to port 9100 and sending the PDF.\r\n\r\n\r\nhttps://www.zebra.com/us/en/products/software/barcode-printers/link-os/pdf-virtual-device.html","title":"Can you direct pdf print to a zebra printer","body":"<p>If you have a printer with Link-OS you can purchase and install PDF Direct from Zebra on the printer firmware. You can then send a pdf directly to the printer. We do this by connecting to port 9100 and sending the PDF.</p>\n\n<p><a href=\"https://www.zebra.com/us/en/products/software/barcode-printers/link-os/pdf-virtual-device.html\" rel=\"nofollow noreferrer\">https://www.zebra.com/us/en/products/software/barcode-printers/link-os/pdf-virtual-device.html</a></p>\n"},{"tags":[],"owner":{"account_id":19335399,"reputation":1,"user_id":14136087,"display_name":"David M"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1614029108,"creation_date":1614012284,"answer_id":66319825,"question_id":24887961,"body_markdown":"* Download Zebra setup printer on ios :   \r\n&lt;https://apps.apple.com/us/app/zebra-printer-setup-utility/id1454308745&gt;.\r\n* Then go to Device Language, and choose PDF.\r\n* Then a simple post request like :\r\n\r\n\r\n\r\n\r\n      const pdfData = {\r\n            uri: localUrl, // &lt;- your file\r\n            type: &#39;application/pdf&#39;,\r\n            name: &#39;file_name&#39;,\r\n        }\r\n\r\n        const data = new FormData()\r\n        data.append(&#39;pdf&#39;, pdfData)\r\n\r\n        fetch(printerUrl, { // &lt;- &quot;http://${IP}:9100/pstprnt/&quot;\r\n            method: &#39;POST&#39;,\r\n            headers: {\r\n                &#39;Content-Type&#39;: &#39;multipart/form-data&#39;,\r\n            },\r\n            body: pdfData,\r\n        })\r\n","title":"Can you direct pdf print to a zebra printer","body":"<ul>\n<li><p>Download Zebra setup printer on ios :<br />\n<a href=\"https://apps.apple.com/us/app/zebra-printer-setup-utility/id1454308745\" rel=\"nofollow noreferrer\">https://apps.apple.com/us/app/zebra-printer-setup-utility/id1454308745</a>.</p>\n</li>\n<li><p>Then go to Device Language, and choose PDF.</p>\n</li>\n<li><p>Then a simple post request like :</p>\n<pre><code>const pdfData = {\n      uri: localUrl, // &lt;- your file\n      type: 'application/pdf',\n      name: 'file_name',\n  }\n\n  const data = new FormData()\n  data.append('pdf', pdfData)\n\n  fetch(printerUrl, { // &lt;- &quot;http://${IP}:9100/pstprnt/&quot;\n      method: 'POST',\n      headers: {\n          'Content-Type': 'multipart/form-data',\n      },\n      body: pdfData,\n  })\n</code></pre>\n</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":4417909,"reputation":11,"user_id":6404702,"display_name":"amber"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1656578193,"creation_date":1656578193,"answer_id":72812695,"question_id":24887961,"body_markdown":"To complete Justin answer, Link_OS printers addon PDF-direct is free for over the year. Just update to latest printer firmware, and same way upload PDF-direct addon to printer. Then pdf printing with generic text driver just working. Also tested on value series ZD220 ans ZD230 printers.","title":"Can you direct pdf print to a zebra printer","body":"<p>To complete Justin answer, Link_OS printers addon PDF-direct is free for over the year. Just update to latest printer firmware, and same way upload PDF-direct addon to printer. Then pdf printing with generic text driver just working. Also tested on value series ZD220 ans ZD230 printers.</p>\n"}],"owner":{"account_id":3572952,"reputation":81,"user_id":2982867,"display_name":"user2982867"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":38088,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"answer_count":6,"score":8,"last_activity_date":1674733933,"creation_date":1406033569,"question_id":24887961,"body_markdown":"Is it possible to direct print a stored pdf via a zebra printer in Java?  I can&#39;t find any mention of them being compatible with direct printing and I can&#39;t get it to print.  Would I need to communicate directly via zpl? \r\n\r\nThe zebra printer works fine when printed through Acrobat Reader, does Adobe Reader translate the PDF into zpl? \r\n","title":"Can you direct pdf print to a zebra printer","body":"<p>Is it possible to direct print a stored pdf via a zebra printer in Java?  I can't find any mention of them being compatible with direct printing and I can't get it to print.  Would I need to communicate directly via zpl? </p>\n\n<p>The zebra printer works fine when printed through Acrobat Reader, does Adobe Reader translate the PDF into zpl? </p>\n"},{"tags":["java","spring-boot","cucumber-java","citrus-framework"],"owner":{"account_id":25049200,"reputation":3,"user_id":18905307,"display_name":"user18905307"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1674733711,"creation_date":1674733711,"question_id":75245700,"body_markdown":"I&#39;m trying to setup an auth token authentication in the bean configuration of the CitrusEndpoints bean instead of use it in each request. \r\n\r\n\r\nIn my configuration class I&#39;ve something like this:\r\n\r\n```\r\n@Bean\r\n    public HttpClient httpClient() throws Exception {\r\n        return CitrusEndpoints\r\n                .http()\r\n                .client()\r\n                .requestUrl(String.format(&quot;http://%s:%s&quot;, HOST, PORT))\r\n                .build();\r\n    }\r\n```\r\nI need to add an authentication in the bean configuration. Currently I&#39;m setting it in each request\r\n\r\n```\r\nrunner.given(http()\r\n                .client(httpClient)\r\n                .send()\r\n                .post(path)\r\n                .message()\r\n                .contentType(MediaType.APPLICATION_JSON_VALUE)\r\n                .header(&quot;Authorization&quot;, &quot;Bearer &quot; + CORE_BE_TOKEN)\r\n                .body(channel.toString())\r\n        );\r\n```\r\nBut I need to set it globally in the bean configuration. \r\nThe only examples I&#39;ve found are using the basic auth but i need the bearer token auth\r\n","title":"Setup Auth Token for CitrusEndpoints bean","body":"<p>I'm trying to setup an auth token authentication in the bean configuration of the CitrusEndpoints bean instead of use it in each request.</p>\n<p>In my configuration class I've something like this:</p>\n<pre><code>@Bean\n    public HttpClient httpClient() throws Exception {\n        return CitrusEndpoints\n                .http()\n                .client()\n                .requestUrl(String.format(&quot;http://%s:%s&quot;, HOST, PORT))\n                .build();\n    }\n</code></pre>\n<p>I need to add an authentication in the bean configuration. Currently I'm setting it in each request</p>\n<pre><code>runner.given(http()\n                .client(httpClient)\n                .send()\n                .post(path)\n                .message()\n                .contentType(MediaType.APPLICATION_JSON_VALUE)\n                .header(&quot;Authorization&quot;, &quot;Bearer &quot; + CORE_BE_TOKEN)\n                .body(channel.toString())\n        );\n</code></pre>\n<p>But I need to set it globally in the bean configuration.\nThe only examples I've found are using the basic auth but i need the bearer token auth</p>\n"},{"tags":["java","garbage-collection"],"answers":[{"tags":[],"owner":{"account_id":1496697,"reputation":8191,"user_id":1402453,"display_name":"Alexey Ragozin"},"down_vote_count":0,"up_vote_count":240,"is_accepted":true,"score":240,"last_activity_date":1552899077,"creation_date":1423189268,"answer_id":28357523,"question_id":28342736,"body_markdown":"&quot;Allocation Failure&quot; is a cause of GC cycle to kick in.\r\n\r\n&quot;Allocation Failure&quot; means that no more space left in Eden to allocate object. So, it is normal cause of young GC.\r\n\r\nOlder JVM were not printing GC cause for minor GC cycles.\r\n\r\n&quot;Allocation Failure&quot; is almost only possible cause for minor GC. Another reason for minor GC to kick could be CMS remark phase (if `+XX:+ScavengeBeforeRemark` is enabled).","title":"Java GC (Allocation Failure)","body":"<p>\"Allocation Failure\" is a cause of GC cycle to kick in.</p>\n\n<p>\"Allocation Failure\" means that no more space left in Eden to allocate object. So, it is normal cause of young GC.</p>\n\n<p>Older JVM were not printing GC cause for minor GC cycles.</p>\n\n<p>\"Allocation Failure\" is almost only possible cause for minor GC. Another reason for minor GC to kick could be CMS remark phase (if <code>+XX:+ScavengeBeforeRemark</code> is enabled).</p>\n"},{"tags":[],"owner":{"account_id":1772231,"reputation":225,"user_id":1616788,"accept_rate":67,"display_name":"Hatter  Bush"},"down_vote_count":12,"up_vote_count":6,"is_accepted":false,"score":-6,"last_activity_date":1506386204,"creation_date":1506386204,"answer_id":46416112,"question_id":28342736,"body_markdown":"When use CMS GC in jdk1.8 will appeare this error, i change the G1 Gc solve this problem.\r\n\r\n     -Xss512k -Xms6g -Xmx6g -XX:+UseG1GC -XX:MaxGCPauseMillis=200 -XX:InitiatingHeapOccupancyPercent=70 -XX:NewRatio=1 -XX:SurvivorRatio=6 -XX:G1ReservePercent=10 -XX:G1HeapRegionSize=32m -XX:ConcGCThreads=6 -Xloggc:gc.log -XX:+HeapDumpOnOutOfMemoryError -XX:+PrintGC -XX:+PrintGCDetails -XX:+PrintGCTimeStamps ","title":"Java GC (Allocation Failure)","body":"<p>When use CMS GC in jdk1.8 will appeare this error, i change the G1 Gc solve this problem.</p>\n\n<pre><code> -Xss512k -Xms6g -Xmx6g -XX:+UseG1GC -XX:MaxGCPauseMillis=200 -XX:InitiatingHeapOccupancyPercent=70 -XX:NewRatio=1 -XX:SurvivorRatio=6 -XX:G1ReservePercent=10 -XX:G1HeapRegionSize=32m -XX:ConcGCThreads=6 -Xloggc:gc.log -XX:+HeapDumpOnOutOfMemoryError -XX:+PrintGC -XX:+PrintGCDetails -XX:+PrintGCTimeStamps \n</code></pre>\n"},{"tags":[],"owner":{"account_id":10532402,"reputation":161,"user_id":7761343,"display_name":"Kamal Rathod"},"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1674733672,"creation_date":1540522146,"answer_id":53000746,"question_id":28342736,"body_markdown":"&gt; &quot;Allocation Failure&quot; is cause of GC to kick \r\n\r\nis not correct. It is an **outcome** of GC operation.\r\n\r\nGC kicks in when there is no space to allocate( depending on region minor or major GC is performed).\r\nOnce GC is performed, if space is freed all is good, but if there is not enough contiguous space there is still an issue.\r\nThis is reported as &quot;Allocation failure&quot;. \r\nBelow document have good explanation\r\nhttps://docs.oracle.com/javase/8/docs/technotes/guides/vm/gctuning/g1_gc.html","title":"Java GC (Allocation Failure)","body":"<blockquote>\n<p>&quot;Allocation Failure&quot; is cause of GC to kick</p>\n</blockquote>\n<p>is not correct. It is an <strong>outcome</strong> of GC operation.</p>\n<p>GC kicks in when there is no space to allocate( depending on region minor or major GC is performed).\nOnce GC is performed, if space is freed all is good, but if there is not enough contiguous space there is still an issue.\nThis is reported as &quot;Allocation failure&quot;.\nBelow document have good explanation\n<a href=\"https://docs.oracle.com/javase/8/docs/technotes/guides/vm/gctuning/g1_gc.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/8/docs/technotes/guides/vm/gctuning/g1_gc.html</a></p>\n"}],"owner":{"account_id":4480522,"reputation":2486,"user_id":3644708,"accept_rate":68,"display_name":"user3644708"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":307077,"favorite_count":0,"down_vote_count":0,"up_vote_count":162,"accepted_answer_id":28357523,"answer_count":3,"score":162,"last_activity_date":1674733672,"creation_date":1423135602,"question_id":28342736,"body_markdown":"Why always &quot;GC (Allocation Failure)&quot;?\r\n\r\nJava HotSpot(TM) 64-Bit Server VM (25.25-b02) for linux-amd64 JRE (**1.8.0_25**-b17), \r\n\r\n    CommandLine flags: \r\n    -XX:CMSInitiatingOccupancyFraction=60 \r\n    -XX:GCLogFileSize=10485760 \r\n    -XX:+HeapDumpOnOutOfMemoryError \r\n    -XX:InitialHeapSize=32212254720 \r\n    -XX:MaxHeapSize=32212254720 \r\n    -XX:NewRatio=10 \r\n    -XX:OldPLABSize=16 \r\n    -XX:ParallelGCThreads=4 \r\n    -XX:+PrintGC \r\n    -XX:+PrintGCDetails \r\n    -XX:+PrintGCTimeStamps \r\n    -XX:+PrintStringTableStatistics \r\n    -XX:+PrintTenuringDistribution \r\n    -XX:StringTableSize=1000003 \r\n    -XX:SurvivorRatio=4 \r\n    -XX:TargetSurvivorRatio=50 \r\n    -XX:+UseCompressedClassPointers \r\n    -XX:+UseCompressedOops\r\n    -XX:+UseParNewGC \r\n    -XX:+UseConcMarkSweepGC\r\n\r\n&lt;!-- --&gt;\r\n\r\n    27.329: [GC (Allocation Failure) 27.329: [ParNew\r\n    Desired survivor size 44728320 bytes, new threshold 15 (max 15)\r\n    - age   1:   16885304 bytes,   16885304 total\r\n    : 349568K-&gt;16618K(436928K), 0.2069129 secs] 349568K-&gt;16618K(31369920K), 0.2070712 secs] [Times: user=0.78 sys=0.04, real=0.21 secs]\r\n    \r\n    \r\n    28.210: [GC (Allocation Failure) 28.210: [ParNew\r\n    Desired survivor size 44728320 bytes, new threshold 15 (max 15)\r\n    - age   1:   28866504 bytes,   28866504 total\r\n    - age   2:   12582536 bytes,   41449040 total\r\n    : 366186K-&gt;47987K(436928K), 0.2144807 secs] 366186K-&gt;47987K(31369920K), 0.2146024 secs] [Times: user=0.84 sys=0.01, real=0.22 secs]\r\n    \r\n    \r\n    29.037: [GC (Allocation Failure) 29.038: [ParNew\r\n    Desired survivor size 44728320 bytes, new threshold 2 (max 15)\r\n    - age   1:   28443488 bytes,   28443488 total\r\n    - age   2:   28386624 bytes,   56830112 total\r\n    - age   3:   12579928 bytes,   69410040 total\r\n    : 397555K-&gt;76018K(436928K), 0.2357352 secs] 397555K-&gt;76018K(31369920K), 0.2358535 secs] [Times: user=0.93 sys=0.01, real=0.23 secs]\r\n\r\n","title":"Java GC (Allocation Failure)","body":"<p>Why always \"GC (Allocation Failure)\"?</p>\n\n<p>Java HotSpot(TM) 64-Bit Server VM (25.25-b02) for linux-amd64 JRE (<strong>1.8.0_25</strong>-b17), </p>\n\n<pre><code>CommandLine flags: \n-XX:CMSInitiatingOccupancyFraction=60 \n-XX:GCLogFileSize=10485760 \n-XX:+HeapDumpOnOutOfMemoryError \n-XX:InitialHeapSize=32212254720 \n-XX:MaxHeapSize=32212254720 \n-XX:NewRatio=10 \n-XX:OldPLABSize=16 \n-XX:ParallelGCThreads=4 \n-XX:+PrintGC \n-XX:+PrintGCDetails \n-XX:+PrintGCTimeStamps \n-XX:+PrintStringTableStatistics \n-XX:+PrintTenuringDistribution \n-XX:StringTableSize=1000003 \n-XX:SurvivorRatio=4 \n-XX:TargetSurvivorRatio=50 \n-XX:+UseCompressedClassPointers \n-XX:+UseCompressedOops\n-XX:+UseParNewGC \n-XX:+UseConcMarkSweepGC\n</code></pre>\n\n\n\n<pre><code>27.329: [GC (Allocation Failure) 27.329: [ParNew\nDesired survivor size 44728320 bytes, new threshold 15 (max 15)\n- age   1:   16885304 bytes,   16885304 total\n: 349568K-&gt;16618K(436928K), 0.2069129 secs] 349568K-&gt;16618K(31369920K), 0.2070712 secs] [Times: user=0.78 sys=0.04, real=0.21 secs]\n\n\n28.210: [GC (Allocation Failure) 28.210: [ParNew\nDesired survivor size 44728320 bytes, new threshold 15 (max 15)\n- age   1:   28866504 bytes,   28866504 total\n- age   2:   12582536 bytes,   41449040 total\n: 366186K-&gt;47987K(436928K), 0.2144807 secs] 366186K-&gt;47987K(31369920K), 0.2146024 secs] [Times: user=0.84 sys=0.01, real=0.22 secs]\n\n\n29.037: [GC (Allocation Failure) 29.038: [ParNew\nDesired survivor size 44728320 bytes, new threshold 2 (max 15)\n- age   1:   28443488 bytes,   28443488 total\n- age   2:   28386624 bytes,   56830112 total\n- age   3:   12579928 bytes,   69410040 total\n: 397555K-&gt;76018K(436928K), 0.2357352 secs] 397555K-&gt;76018K(31369920K), 0.2358535 secs] [Times: user=0.93 sys=0.01, real=0.23 secs]\n</code></pre>\n"},{"tags":["java","sonarqube","sonarqube-scan"],"owner":{"account_id":27617793,"reputation":21,"user_id":21079498,"display_name":"Pavel"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1674733284,"creation_date":1674733009,"question_id":75245583,"body_markdown":"I&#39;m trying to find the proper way to identify the dangerous usage of nullable library methods with SonarQube.\r\n\r\n\r\nThe example below illustrates the potential NullPointerException that may be raised by calling `asText()` method on the nullable JsonNode object returned from the `node.get(&quot;something&quot;)` call.\r\n\r\n```\r\nimport com.fasterxml.jackson.databind.JsonNode;\r\nimport com.fasterxml.jackson.databind.ObjectMapper;\r\n\r\npublic class Tst {\r\n    public String getSomething(String json) throws Exception {\r\n        JsonNode node = new ObjectMapper().readTree(json);\r\n        \r\n        return node.get(&quot;something&quot;).asText();\r\n    }\r\n}\r\n```\r\n\r\nI expect to have the line `return node.get(&quot;something&quot;).asText();` to be marked as the bug, but the problem is not identified by our SonarQube 9.8 Server.\r\n\r\nHow to let SonarQube understand that ***com.fasterxml.jackson.databind.JsonNode.get()*** method is nullable?","title":"How to let SonarQube to check NullPointerException when calling library method","body":"<p>I'm trying to find the proper way to identify the dangerous usage of nullable library methods with SonarQube.</p>\n<p>The example below illustrates the potential NullPointerException that may be raised by calling <code>asText()</code> method on the nullable JsonNode object returned from the <code>node.get(&quot;something&quot;)</code> call.</p>\n<pre><code>import com.fasterxml.jackson.databind.JsonNode;\nimport com.fasterxml.jackson.databind.ObjectMapper;\n\npublic class Tst {\n    public String getSomething(String json) throws Exception {\n        JsonNode node = new ObjectMapper().readTree(json);\n        \n        return node.get(&quot;something&quot;).asText();\n    }\n}\n</code></pre>\n<p>I expect to have the line <code>return node.get(&quot;something&quot;).asText();</code> to be marked as the bug, but the problem is not identified by our SonarQube 9.8 Server.</p>\n<p>How to let SonarQube understand that <em><strong>com.fasterxml.jackson.databind.JsonNode.get()</strong></em> method is nullable?</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":25739271,"reputation":653,"user_id":19493508,"display_name":"Hanif Shaikh"},"score":0,"creation_date":1674701018,"post_id":75241850,"comment_id":132772507,"body_markdown":"can you please put your splash screen code .","body":"can you please put your splash screen code ."},{"owner":{"account_id":25739271,"reputation":653,"user_id":19493508,"display_name":"Hanif Shaikh"},"score":0,"creation_date":1674784517,"post_id":75241850,"comment_id":132792448,"body_markdown":"i thing my code help you.","body":"i thing my code help you."}],"answers":[{"tags":[],"owner":{"account_id":25739271,"reputation":653,"user_id":19493508,"display_name":"Hanif Shaikh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674733143,"creation_date":1674701226,"answer_id":75241880,"question_id":75241850,"body_markdown":"    new Handler().postDelayed(\r\n        new Runnable() {\r\n            @Override\r\n            public void run() {\r\n                Intent intent = new Intent(SplashScreen.this, Login.class);\r\n                finish();\r\n            }\r\n        },\r\n        4000);","title":"Arrange activities in android studio","body":"<pre><code>new Handler().postDelayed(\n    new Runnable() {\n        @Override\n        public void run() {\n            Intent intent = new Intent(SplashScreen.this, Login.class);\n            finish();\n        }\n    },\n    4000);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12924971,"reputation":2766,"user_id":9346054,"accept_rate":100,"display_name":"Ticherhaz FreePalestine"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1674704362,"creation_date":1674704362,"answer_id":75242081,"question_id":75241850,"body_markdown":"There are few ways to achieve this. This is one of my way.\r\n\r\nFirst, at your `AndroidManifest.xml`, make sure you make your `SplashActivity` becomes your `launcher`. Then, at the `onCreate` method for your `SplashActivity`, do some delay, checking some stuff, is this user login or not. Last, go to next activity.\r\n\r\n        &lt;activity\r\n            android:name=&quot;company.com.ui.SplashActivity&quot;\r\n            android:exported=&quot;true&quot;&gt;\r\n            &lt;intent-filter&gt;\r\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\r\n\r\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\r\n            &lt;/intent-filter&gt;\r\n        &lt;/activity&gt;\r\n\r\n\r\n","title":"Arrange activities in android studio","body":"<p>There are few ways to achieve this. This is one of my way.</p>\n<p>First, at your <code>AndroidManifest.xml</code>, make sure you make your <code>SplashActivity</code> becomes your <code>launcher</code>. Then, at the <code>onCreate</code> method for your <code>SplashActivity</code>, do some delay, checking some stuff, is this user login or not. Last, go to next activity.</p>\n<pre><code>    &lt;activity\n        android:name=&quot;company.com.ui.SplashActivity&quot;\n        android:exported=&quot;true&quot;&gt;\n        &lt;intent-filter&gt;\n            &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\n\n            &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\n        &lt;/intent-filter&gt;\n    &lt;/activity&gt;\n</code></pre>\n"}],"owner":{"account_id":27623532,"reputation":29,"user_id":21084003,"display_name":"Sriram S"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":58,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"answer_count":2,"score":-1,"last_activity_date":1674733143,"creation_date":1674700774,"question_id":75241850,"body_markdown":"I have a splash screen in my project it opens first with intent filter. After that it opens the main activity. But i created new activity that should be opened next to splash screen how to do that?\r\n\r\nI have created three activities for example splash screen, main activity, login screen, Splash screen first opens next to that i need to open the login screen next only main activity.\r\n\r\n\r\nxml code\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;&gt;\r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_COARSE_LOCATION&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_FINE_LOCATION&quot; /&gt;\r\n\r\n    &lt;application\r\n        android:allowBackup=&quot;true&quot;\r\n        android:hardwareAccelerated=&quot;true&quot;\r\n        android:icon=&quot;@mipmap/ic_main&quot;\r\n        android:label=&quot;@string/app_name&quot;\r\n        android:roundIcon=&quot;@mipmap/ic_main_round&quot;\r\n        android:supportsRtl=&quot;true&quot;\r\n        android:theme=&quot;@style/Theme.WeatherApp&quot;&gt;\r\n\r\n        &lt;activity\r\n            android:name=&quot;.SplashScreen&quot;\r\n            android:exported=&quot;true&quot;\r\n            android:screenOrientation=&quot;portrait&quot;\r\n            android:windowSoftInputMode=&quot;stateAlwaysHidden&quot;\r\n            tools:ignore=&quot;LockedOrientationActivity&quot;&gt;\r\n            &lt;intent-filter&gt;\r\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\r\n\r\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\r\n            &lt;/intent-filter&gt;\r\n        &lt;/activity&gt;\r\n\r\n        &lt;activity\r\n            android:name=&quot;.LoginActivity&quot;\r\n            android:exported=&quot;false&quot;\r\n            android:screenOrientation=&quot;portrait&quot;\r\n            android:windowSoftInputMode=&quot;stateAlwaysHidden&quot;\r\n            tools:ignore=&quot;LockedOrientationActivity&quot; /&gt;\r\n        &lt;activity\r\n            android:name=&quot;.HomeActivity&quot;\r\n            android:exported=&quot;false&quot;\r\n            android:screenOrientation=&quot;portrait&quot;\r\n            android:windowSoftInputMode=&quot;stateAlwaysHidden&quot;\r\n            tools:ignore=&quot;LockedOrientationActivity&quot; /&gt;\r\n    &lt;/application&gt;\r\n\r\n&lt;/manifest&gt;","title":"Arrange activities in android studio","body":"<p>I have a splash screen in my project it opens first with intent filter. After that it opens the main activity. But i created new activity that should be opened next to splash screen how to do that?</p>\n<p>I have created three activities for example splash screen, main activity, login screen, Splash screen first opens next to that i need to open the login screen next only main activity.</p>\n<p>xml code</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n</code></pre>\n<p></p>\n<pre><code>&lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\n&lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; /&gt;\n&lt;uses-permission android:name=&quot;android.permission.ACCESS_COARSE_LOCATION&quot; /&gt;\n&lt;uses-permission android:name=&quot;android.permission.ACCESS_FINE_LOCATION&quot; /&gt;\n\n&lt;application\n    android:allowBackup=&quot;true&quot;\n    android:hardwareAccelerated=&quot;true&quot;\n    android:icon=&quot;@mipmap/ic_main&quot;\n    android:label=&quot;@string/app_name&quot;\n    android:roundIcon=&quot;@mipmap/ic_main_round&quot;\n    android:supportsRtl=&quot;true&quot;\n    android:theme=&quot;@style/Theme.WeatherApp&quot;&gt;\n\n    &lt;activity\n        android:name=&quot;.SplashScreen&quot;\n        android:exported=&quot;true&quot;\n        android:screenOrientation=&quot;portrait&quot;\n        android:windowSoftInputMode=&quot;stateAlwaysHidden&quot;\n        tools:ignore=&quot;LockedOrientationActivity&quot;&gt;\n        &lt;intent-filter&gt;\n            &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\n\n            &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\n        &lt;/intent-filter&gt;\n    &lt;/activity&gt;\n\n    &lt;activity\n        android:name=&quot;.LoginActivity&quot;\n        android:exported=&quot;false&quot;\n        android:screenOrientation=&quot;portrait&quot;\n        android:windowSoftInputMode=&quot;stateAlwaysHidden&quot;\n        tools:ignore=&quot;LockedOrientationActivity&quot; /&gt;\n    &lt;activity\n        android:name=&quot;.HomeActivity&quot;\n        android:exported=&quot;false&quot;\n        android:screenOrientation=&quot;portrait&quot;\n        android:windowSoftInputMode=&quot;stateAlwaysHidden&quot;\n        tools:ignore=&quot;LockedOrientationActivity&quot; /&gt;\n&lt;/application&gt;\n</code></pre>\n\n"},{"tags":["java","spring","jackson"],"comments":[{"owner":{"account_id":8436158,"reputation":700,"user_id":6395007,"display_name":"Ionut Alexandru"},"score":1,"creation_date":1674725922,"post_id":75244262,"comment_id":132776607,"body_markdown":"This mechanism is called type erasure, where the type parameter is available at runtime. https://www.baeldung.com/java-type-erasure","body":"This mechanism is called type erasure, where the type parameter is available at runtime. <a href=\"https://www.baeldung.com/java-type-erasure\" rel=\"nofollow noreferrer\">baeldung.com/java-type-erasure</a>"},{"owner":{"account_id":139494,"reputation":804,"user_id":345130,"accept_rate":40,"display_name":"ILya Cyclone"},"score":1,"creation_date":1674726168,"post_id":75244262,"comment_id":132776707,"body_markdown":"`TypeReference&lt;&gt;()` also uses &quot;diamond&quot; operator, which is short for `TypeReference&lt;Book&gt;()` in this case.","body":"<code>TypeReference&lt;&gt;()</code> also uses &quot;diamond&quot; operator, which is short for <code>TypeReference&lt;Book&gt;()</code> in this case."},{"owner":{"account_id":1801257,"reputation":8969,"user_id":1639556,"accept_rate":79,"display_name":"Leos Literak"},"score":0,"creation_date":1674726851,"post_id":75244262,"comment_id":132776948,"body_markdown":"I see. A compiler will use Book from the assignment, correct?","body":"I see. A compiler will use Book from the assignment, correct?"}],"answers":[{"tags":[],"owner":{"account_id":1684429,"reputation":4685,"user_id":1547989,"display_name":"Michael Simons"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1674733051,"creation_date":1674733051,"answer_id":75245589,"question_id":75244262,"body_markdown":"It&#39;s a clever way to deal with Java Generics type erasure. From [&quot;Type Erasure][1]\r\n\r\n&gt; To implement generics, the Java compiler applies type erasure to:\r\n&gt; \r\n&gt; * Replace all type parameters in generic types with their bounds or\r\n&gt; Object if the type parameters are unbounded. The produced bytecode,\r\n&gt; therefore, contains only ordinary classes, interfaces, and methods.\r\n&gt; * Insert type casts if necessary to preserve type safety. \r\n&gt; * Generate bridge methods to preserve polymorphism in extended generic types.\r\n\r\n[Neil Gafter][2] refers to\r\n\r\n```java\r\npublic abstract class TypeReference&lt;T&gt; {}\r\n```\r\n\r\nas _super type tokens_. \r\n\r\nWhen you now do a \r\n\r\n```java\r\nTypeReference&lt;Book&gt; x = new TypeReference&lt;Book&gt;() {};\r\n``` \r\n\r\nor in Neals [example][3]\r\n\r\n```\r\nTypeReference&lt;List&lt;String&gt;&gt; x = new TypeReference&lt;List&lt;String&gt;&gt;() {};\r\n```\r\n\r\nthere is no type erasure happening for the anonymous class created on the right-hand-side of the assignment. It has a fixed generic type, which can be accessed by the super class like this:\r\n\r\n```java\r\n  protected TypeReference() {\r\n        Type superclass = getClass().getGenericSuperclass();\r\n        if (superclass instanceof Class) {\r\n            throw new RuntimeException(&quot;Missing type parameter.&quot;);\r\n        }\r\n        this.type = ((ParameterizedType) superclass).getActualTypeArguments()[0];\r\n    }\r\n```\r\n\r\nJacksons `ObjectMapper` will use the `this.type` later to figure out the type of things you want to deserialise. \r\n\r\nObservation of the diamond operator is ofc correct.\r\n\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/tutorial/java/generics/erasure.html\r\n  [2]: http://www.gafter.com/~neal/\r\n  [3]: http://gafter.blogspot.com/2006/12/super-type-tokens.html","title":"ObjectMapper deserialization with TypeReference without a concrete class","body":"<p>It's a clever way to deal with Java Generics type erasure. From <a href=\"https://docs.oracle.com/javase/tutorial/java/generics/erasure.html\" rel=\"nofollow noreferrer\">&quot;Type Erasure</a></p>\n<blockquote>\n<p>To implement generics, the Java compiler applies type erasure to:</p>\n<ul>\n<li>Replace all type parameters in generic types with their bounds or\nObject if the type parameters are unbounded. The produced bytecode,\ntherefore, contains only ordinary classes, interfaces, and methods.</li>\n<li>Insert type casts if necessary to preserve type safety.</li>\n<li>Generate bridge methods to preserve polymorphism in extended generic types.</li>\n</ul>\n</blockquote>\n<p><a href=\"http://www.gafter.com/%7Eneal/\" rel=\"nofollow noreferrer\">Neil Gafter</a> refers to</p>\n<pre class=\"lang-java prettyprint-override\"><code>public abstract class TypeReference&lt;T&gt; {}\n</code></pre>\n<p>as <em>super type tokens</em>.</p>\n<p>When you now do a</p>\n<pre class=\"lang-java prettyprint-override\"><code>TypeReference&lt;Book&gt; x = new TypeReference&lt;Book&gt;() {};\n</code></pre>\n<p>or in Neals <a href=\"http://gafter.blogspot.com/2006/12/super-type-tokens.html\" rel=\"nofollow noreferrer\">example</a></p>\n<pre><code>TypeReference&lt;List&lt;String&gt;&gt; x = new TypeReference&lt;List&lt;String&gt;&gt;() {};\n</code></pre>\n<p>there is no type erasure happening for the anonymous class created on the right-hand-side of the assignment. It has a fixed generic type, which can be accessed by the super class like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>  protected TypeReference() {\n        Type superclass = getClass().getGenericSuperclass();\n        if (superclass instanceof Class) {\n            throw new RuntimeException(&quot;Missing type parameter.&quot;);\n        }\n        this.type = ((ParameterizedType) superclass).getActualTypeArguments()[0];\n    }\n</code></pre>\n<p>Jacksons <code>ObjectMapper</code> will use the <code>this.type</code> later to figure out the type of things you want to deserialise.</p>\n<p>Observation of the diamond operator is ofc correct.</p>\n"}],"owner":{"account_id":1801257,"reputation":8969,"user_id":1639556,"accept_rate":79,"display_name":"Leos Literak"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":335,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":75245589,"answer_count":1,"score":0,"last_activity_date":1674733051,"creation_date":1674725354,"question_id":75244262,"body_markdown":"I came across a following source code that I do not understand:\r\n\r\n    final Book book = objectMapper.readValue(string, new TypeReference&lt;&gt;() {\r\n        });\r\n\r\nHow will Jackson understand what class to deserialize from the provided string?\r\n\r\nI found a similar construct in [this article][1], where it is written it will throw an exception. But the code actually works and Book is deserialized. What is this black magic?\r\n\r\n\r\n  [1]: https://northcoder.com/post/jackson-object-mapper-which-way-is/","title":"ObjectMapper deserialization with TypeReference without a concrete class","body":"<p>I came across a following source code that I do not understand:</p>\n<pre><code>final Book book = objectMapper.readValue(string, new TypeReference&lt;&gt;() {\n    });\n</code></pre>\n<p>How will Jackson understand what class to deserialize from the provided string?</p>\n<p>I found a similar construct in <a href=\"https://northcoder.com/post/jackson-object-mapper-which-way-is/\" rel=\"nofollow noreferrer\">this article</a>, where it is written it will throw an exception. But the code actually works and Book is deserialized. What is this black magic?</p>\n"},{"tags":["java","junit5"],"comments":[{"owner":{"account_id":1534652,"reputation":8621,"user_id":1431016,"accept_rate":100,"display_name":"Sormuras"},"score":0,"creation_date":1621399170,"post_id":67596876,"comment_id":119480654,"body_markdown":"Running with JUnit Platform 1.7.2?","body":"Running with JUnit Platform 1.7.2?"},{"owner":{"account_id":13063951,"reputation":809,"user_id":9440062,"display_name":"spiderloop"},"score":0,"creation_date":1621400940,"post_id":67596876,"comment_id":119481012,"body_markdown":"~/Documents/workspace/email-service-junit - (master) \n$ java -version\nopenjdk version &quot;11.0.11&quot; 2021-04-20\n\nOpenJDK Runtime Environment AdoptOpenJDK-11.0.11+9 (build 11.0.11+9)\n\nOpenJDK 64-Bit Server VM AdoptOpenJDK-11.0.11+9 (build 11.0.11+9, mixed mode)","body":"~/Documents/workspace/email-service-junit - (master)  $ java -version openjdk version &quot;11.0.11&quot; 2021-04-20  OpenJDK Runtime Environment AdoptOpenJDK-11.0.11+9 (build 11.0.11+9)  OpenJDK 64-Bit Server VM AdoptOpenJDK-11.0.11+9 (build 11.0.11+9, mixed mode)"},{"owner":{"account_id":1534652,"reputation":8621,"user_id":1431016,"accept_rate":100,"display_name":"Sormuras"},"score":0,"creation_date":1621406117,"post_id":67596876,"comment_id":119482537,"body_markdown":"I wanted to know the version of JUnit you are using, not the version of Java. Can you please add a filter matching like described here: https://junit.org/junit5/docs/current/user-guide/#launcher-api-execution","body":"I wanted to know the version of JUnit you are using, not the version of Java. Can you please add a filter matching like described here: <a href=\"https://junit.org/junit5/docs/current/user-guide/#launcher-api-execution\" rel=\"nofollow noreferrer\">junit.org/junit5/docs/current/user-guide/&hellip;</a>"},{"owner":{"account_id":13063951,"reputation":809,"user_id":9440062,"display_name":"spiderloop"},"score":0,"creation_date":1621437674,"post_id":67596876,"comment_id":119496796,"body_markdown":"jupiterVersion = 5.7.1\njunit-platform-commons:1.7.1","body":"jupiterVersion = 5.7.1 junit-platform-commons:1.7.1"},{"owner":{"account_id":13063951,"reputation":809,"user_id":9440062,"display_name":"spiderloop"},"score":0,"creation_date":1621439163,"post_id":67596876,"comment_id":119497552,"body_markdown":"@Sormuras i tired the filter as well, requestBuilder.filters(includeClassNamePatterns(&quot;.*&quot;)); , doesn&#39;t help","body":"@Sormuras i tired the filter as well, requestBuilder.filters(includeClassNamePatterns(&quot;.*&quot;)); , doesn&#39;t help"},{"owner":{"account_id":1534652,"reputation":8621,"user_id":1431016,"accept_rate":100,"display_name":"Sormuras"},"score":0,"creation_date":1621488762,"post_id":67596876,"comment_id":119512025,"body_markdown":"Same with 1.7.2? And please provide your complete setup, preferably as a shared project.","body":"Same with 1.7.2? And please provide your complete setup, preferably as a shared project."}],"answers":[{"tags":[],"owner":{"account_id":1212752,"reputation":746,"user_id":1180993,"display_name":"White_King"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674732312,"creation_date":1674732312,"answer_id":75245457,"question_id":67596876,"body_markdown":"This might be because your main folder is not in the same context as your tests.\r\nYou can add this to your `build` tag `pom.xml` file so it will compile your test classes to the same path as the rest of the project classes.\r\n`&lt;testOutputDirectory&gt;target/classes&lt;/testOutputDirectory&gt;`\r\n\r\nHere is an example:\r\n```XML\r\n &lt;build&gt;\r\n        &lt;testOutputDirectory&gt;target/classes&lt;/testOutputDirectory&gt;\r\n        &lt;plugins&gt;\r\n            ... \r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n```\r\n\r\nYou won&#39;t be able to select your classes directly with \r\n\r\n```java\r\nLauncherDiscoveryRequestBuilder.request().selectors(selectClass(my.package.tests.MyClass.class))\r\n```\r\n\r\nBut you should not have any problem with the `selectPackage` method you are using.\r\n\r\nThere might be other work-arounds that I&#39;m not aware of but this is working for JUnit5 right now.","title":"Junit5 LauncherDiscoveryRequestBuilder selectPackage does not find tests","body":"<p>This might be because your main folder is not in the same context as your tests.\nYou can add this to your <code>build</code> tag <code>pom.xml</code> file so it will compile your test classes to the same path as the rest of the project classes.\n<code>&lt;testOutputDirectory&gt;target/classes&lt;/testOutputDirectory&gt;</code></p>\n<p>Here is an example:</p>\n<pre><code> &lt;build&gt;\n        &lt;testOutputDirectory&gt;target/classes&lt;/testOutputDirectory&gt;\n        &lt;plugins&gt;\n            ... \n        &lt;/plugins&gt;\n    &lt;/build&gt;\n</code></pre>\n<p>You won't be able to select your classes directly with</p>\n<pre class=\"lang-java prettyprint-override\"><code>LauncherDiscoveryRequestBuilder.request().selectors(selectClass(my.package.tests.MyClass.class))\n</code></pre>\n<p>But you should not have any problem with the <code>selectPackage</code> method you are using.</p>\n<p>There might be other work-arounds that I'm not aware of but this is working for JUnit5 right now.</p>\n"}],"owner":{"account_id":13063951,"reputation":809,"user_id":9440062,"display_name":"spiderloop"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":873,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1674732312,"creation_date":1621397852,"question_id":67596876,"body_markdown":"I am trying to write my own Junit5 test runner using LauncherDiscoveryRequestBuilder, when i use the class selector, I am able to run the test no problem. However, when I try to use the package selector, no test can be discovered. \r\n\r\nHere is the code using selectClass that works:\r\n```\r\nLauncherDiscoveryRequestBuilder requestBuilder = new LauncherDiscoveryRequestBuilder();\r\nrequestBuilder.selectors(selectClass(&quot;com.abc.myservice.tests.MyTests&quot;));\r\nLauncherDiscoveryRequest request = requestBuilder.build();\r\nLauncher launcher = LauncherFactory.create();\r\nlauncher.execute(request);\r\n```\r\n\r\nHere is the code using selectPackage that cannot find any test:\r\n```\r\nLauncherDiscoveryRequestBuilder requestBuilder = new LauncherDiscoveryRequestBuilder();\r\nrequestBuilder.selectors(selectPackage(&quot;com.abc.myservice.tests&quot;));\r\nLauncherDiscoveryRequest request = requestBuilder.build();\r\nLauncher launcher = LauncherFactory.create();\r\nlauncher.execute(request);\r\n```\r\n\r\nHere is my test code\r\n```\r\npackage com.abc.myservice.tests;\r\n\r\nimport org.junit.jupiter.api.Test;\r\nimport java.util.*;\r\nimport static org.junit.jupiter.api.Assertions.assertEquals;\r\n\r\npublic class MyTests {\r\n\t@Test\r\n\tpublic void eqTest() {\r\n\t\tassertEquals(2, 2);\r\n\t}\r\n}\r\n```\r\n\r\nAny help would be appreciate!","title":"Junit5 LauncherDiscoveryRequestBuilder selectPackage does not find tests","body":"<p>I am trying to write my own Junit5 test runner using LauncherDiscoveryRequestBuilder, when i use the class selector, I am able to run the test no problem. However, when I try to use the package selector, no test can be discovered.</p>\n<p>Here is the code using selectClass that works:</p>\n<pre><code>LauncherDiscoveryRequestBuilder requestBuilder = new LauncherDiscoveryRequestBuilder();\nrequestBuilder.selectors(selectClass(&quot;com.abc.myservice.tests.MyTests&quot;));\nLauncherDiscoveryRequest request = requestBuilder.build();\nLauncher launcher = LauncherFactory.create();\nlauncher.execute(request);\n</code></pre>\n<p>Here is the code using selectPackage that cannot find any test:</p>\n<pre><code>LauncherDiscoveryRequestBuilder requestBuilder = new LauncherDiscoveryRequestBuilder();\nrequestBuilder.selectors(selectPackage(&quot;com.abc.myservice.tests&quot;));\nLauncherDiscoveryRequest request = requestBuilder.build();\nLauncher launcher = LauncherFactory.create();\nlauncher.execute(request);\n</code></pre>\n<p>Here is my test code</p>\n<pre><code>package com.abc.myservice.tests;\n\nimport org.junit.jupiter.api.Test;\nimport java.util.*;\nimport static org.junit.jupiter.api.Assertions.assertEquals;\n\npublic class MyTests {\n    @Test\n    public void eqTest() {\n        assertEquals(2, 2);\n    }\n}\n</code></pre>\n<p>Any help would be appreciate!</p>\n"},{"tags":["java","debugging"],"comments":[{"owner":{"account_id":15800454,"reputation":120,"user_id":11401122,"display_name":"Bonniu"},"score":0,"creation_date":1674728757,"post_id":75244808,"comment_id":132777530,"body_markdown":"Please provide some more information, we can see only jdbc connection error","body":"Please provide some more information, we can see only jdbc connection error"},{"owner":{"account_id":6875395,"reputation":1037,"user_id":5284011,"display_name":"JohnXF"},"score":0,"creation_date":1674729502,"post_id":75244808,"comment_id":132777765,"body_markdown":"The JDBC error is presumably the problem, and not the adding of GTM?","body":"The JDBC error is presumably the problem, and not the adding of GTM?"},{"owner":{"account_id":551394,"reputation":8315,"user_id":916225,"accept_rate":69,"display_name":"seenukarthi"},"score":0,"creation_date":1674732091,"post_id":75244808,"comment_id":132778480,"body_markdown":"[Please do not upload images of code/data/errors when asking a question.](//meta.stackoverflow.com/q/285551)","body":"<a href=\"//meta.stackoverflow.com/q/285551\">Please do not upload images of code/data/errors when asking a question.</a>"},{"owner":{"account_id":13073544,"reputation":175,"user_id":9446417,"display_name":"Aperture Prometheus"},"score":0,"creation_date":1674732739,"post_id":75244808,"comment_id":132778675,"body_markdown":"In the log, they point out that you have some problem with JDBC, which could related to faulty database connection. Check if your database credential is correct or connection to your database is stable","body":"In the log, they point out that you have some problem with JDBC, which could related to faulty database connection. Check if your database credential is correct or connection to your database is stable"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1674807565,"post_id":75244808,"comment_id":132795861,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."},{"owner":{"account_id":27508734,"reputation":1,"user_id":20991045,"display_name":"hash"},"score":0,"creation_date":1674971323,"post_id":75244808,"comment_id":132825770,"body_markdown":"I don&#39;t know exactly the problem was but here is the link for your reference to have a  view about what&#39;s going on to my site. https://rfpproject.com/","body":"I don&#39;t know exactly the problem was but here is the link for your reference to have a  view about what&#39;s going on to my site. <a href=\"https://rfpproject.com/\" rel=\"nofollow noreferrer\">rfpproject.com</a>"},{"owner":{"account_id":27508734,"reputation":1,"user_id":20991045,"display_name":"hash"},"score":0,"creation_date":1674972755,"post_id":75244808,"comment_id":132825905,"body_markdown":"HTTP Status 500 – Internal Server Error\nType Exception Report\n\nMessage org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction; nested exception is org.hibernate.exception.GenericJDBCException: Unable to acquire JDBC Connection\n\nDescription The server encountered an unexpected condition that prevented it from fulfilling the request.","body":"HTTP Status 500 – Internal Server Error Type Exception Report  Message org.springframework.transaction.CannotCreateTransactionExcep&zwnj;&#8203;tion: Could not open JPA EntityManager for transaction; nested exception is org.hibernate.exception.GenericJDBCException: Unable to acquire JDBC Connection  Description The server encountered an unexpected condition that prevented it from fulfilling the request."}],"owner":{"account_id":27508734,"reputation":1,"user_id":20991045,"display_name":"hash"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1674732151,"creation_date":1674728544,"question_id":75244808,"body_markdown":"[![enter image description here](https://i.stack.imgur.com/WJn9n.png)](https://i.stack.imgur.com/WJn9n.png)\r\n\r\nHi there, the above picture is the error I am facing through. I run Google Tag Manager then afterward, the web pages show this &quot;HTTP error 500&quot;.\r\n\r\nI am configuring Google Tag Manager to add a script to web pages, but then the site displays this error.","title":"I have an issue on my website (HTTP STATUS 500 - Internal Server Error)","body":"<p><a href=\"https://i.stack.imgur.com/WJn9n.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/WJn9n.png\" alt=\"enter image description here\" /></a></p>\n<p>Hi there, the above picture is the error I am facing through. I run Google Tag Manager then afterward, the web pages show this &quot;HTTP error 500&quot;.</p>\n<p>I am configuring Google Tag Manager to add a script to web pages, but then the site displays this error.</p>\n"},{"tags":["java","algorithm","recursion","backtracking","knights-tour"],"comments":[{"owner":{"account_id":9635091,"reputation":12798,"user_id":7151494,"display_name":"Fureeish"},"score":0,"creation_date":1545168868,"post_id":53841223,"comment_id":94531021,"body_markdown":"Did you step through your code with a debugger to inspect what&#39;s really happening? From your question, without going in depth into the code, I can see that it could also be an infinite loop, a particular test case where this change affects speed and in another case it will decrease it, combination of both, and such. Did you run multiple (at least thousands of) tests to see when and where this change makes the actual code faster? How can you be sure that it&#39;s indeed always better?","body":"Did you step through your code with a debugger to inspect what&#39;s really happening? From your question, without going in depth into the code, I can see that it could also be an infinite loop, a particular test case where this change affects speed and in another case it will decrease it, combination of both, and such. Did you run multiple (at least thousands of) tests to see when and where this change makes the actual code faster? How can you be sure that it&#39;s indeed always better?"},{"owner":{"account_id":6136522,"reputation":76953,"user_id":4785185,"display_name":"Prune"},"score":0,"creation_date":1545170329,"post_id":53841223,"comment_id":94531611,"body_markdown":"See this lovely [debug](https://ericlippert.com/2014/03/05/how-to-debug-small-programs/) blog for help.","body":"See this lovely <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">debug</a> blog for help."}],"answers":[{"tags":[],"owner":{"account_id":286249,"reputation":43941,"user_id":585411,"accept_rate":60,"display_name":"btilly"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1545173792,"creation_date":1545173792,"answer_id":53842319,"question_id":53841223,"body_markdown":"You are doing a brute force search through a very large search space.  If you&#39;re unlucky in how you do your search, you can spend a long time with no solution showing up.\r\n\r\nThe answer is that either you are lucky in your choice of starting place/starting pattern, or else you need to be smarter about recognizing &quot;hopelessly stuck&quot;.\r\n\r\nFor example every 10,000 times that you backtrack, do a scan of the whole board.  If you can find hole that you cannot possibly get back to, then set a flag that causes you to backtrack to the last move that you could have visited it from.  Then continue.  This lets you skip over a potentially big chunk of useless work and get back to finding one of the [many possible tours](https://math.stackexchange.com/questions/636/how-many-knights-tours-are-there) that are to be found.","title":"Knight tour problem - order of moves affect performance","body":"<p>You are doing a brute force search through a very large search space.  If you're unlucky in how you do your search, you can spend a long time with no solution showing up.</p>\n\n<p>The answer is that either you are lucky in your choice of starting place/starting pattern, or else you need to be smarter about recognizing \"hopelessly stuck\".</p>\n\n<p>For example every 10,000 times that you backtrack, do a scan of the whole board.  If you can find hole that you cannot possibly get back to, then set a flag that causes you to backtrack to the last move that you could have visited it from.  Then continue.  This lets you skip over a potentially big chunk of useless work and get back to finding one of the <a href=\"https://math.stackexchange.com/questions/636/how-many-knights-tours-are-there\">many possible tours</a> that are to be found.</p>\n"}],"owner":{"account_id":5088059,"reputation":5319,"user_id":4081949,"accept_rate":64,"display_name":"KitKarson"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":215,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":53842319,"answer_count":1,"score":1,"last_activity_date":1674731884,"creation_date":1545167943,"question_id":53841223,"body_markdown":"I was trying to implement a solution for knight tour problem. I faced an interesting issue. I would like to know the reason for the behavior.\r\n\r\nThis is the code - it works fine. \r\n\r\n\r\n    public class OpenKnightTour {\r\n    \r\n        private int[][] chessTable;\r\n        private int startRow;\r\n        private int startCol;\r\n        private int ChessBoardSize;\r\n    \r\n    \r\n        private final int[][] moves = {\r\n                {-1, -2},\r\n                {-2, -1},\r\n                {-2, 1},\r\n                {-1, 2},\r\n                {1, -2},\r\n                {2, -1},\r\n                {2, 1},\r\n                {1, 2}\r\n        };\r\n    \r\n        public OpenKnightTour(int ChessBoardSize, int startRow, int startCol){\r\n            this.ChessBoardSize = ChessBoardSize;\r\n            this.startRow = startRow;\r\n            this.startCol = startCol;\r\n            this.chessTable = new int[ChessBoardSize][ChessBoardSize];\r\n        }\r\n    \r\n        void move(){\r\n            //first move\r\n            this.chessTable[this.startRow][this.startCol] = 1;\r\n    \r\n            //start with 2nd move recursively\r\n            moveHelper(this.startRow, this.startCol, 2);\r\n    \r\n            //print results\r\n            this.print();\r\n    \r\n        }\r\n    \r\n        private boolean moveHelper(int r, int c, int count){\r\n            if((count-1) == (this.ChessBoardSize * this.ChessBoardSize))\r\n                return true;\r\n    \r\n            for(int[] move: moves){\r\n                int nextR = r + move[0];\r\n                int nextC = c + move[1];\r\n                if(isMoveValid(nextR, nextC)){\r\n                    chessTable[nextR][nextC] = count;\r\n                    if(moveHelper(nextR, nextC, count + 1)){\r\n                        return true;\r\n                    }\r\n                    chessTable[nextR][nextC] = 0;\r\n                }\r\n            }\r\n            return false;\r\n        }\r\n    \r\n        private void print(){\r\n            Arrays.stream(this.chessTable)\r\n                    .forEach(a -&gt; System.out.println(Arrays.toString(a)));\r\n        }\r\n    \r\n        private boolean isMoveValid(int r, int c){\r\n            if(!(r &gt;= 0 &amp;&amp; r &lt; this.ChessBoardSize))\r\n                return false;\r\n            if(!(c &gt;= 0 &amp;&amp; c &lt; this.ChessBoardSize))\r\n                return false;\r\n            return chessTable[r][c]==0;\r\n        }\r\n        \r\n    }\r\n\r\n\r\nNow we could run this, starting with knight position as `(2, 2)` in the matrix\r\n\r\n        OpenKnightTour o = new OpenKnightTour(8, 2, 2);\r\n        o.move();\r\n\r\nWhen i tried to run the starting position as `(0, 0)` , it ran continuously without showing any results. So i thought there could not be any solution for it. But if i change below order slightly, It works fine immediately.\r\n\r\n\r\n    private final int[][] moves = {\r\n            {-1, -2},\r\n            {-2, -1},\r\n            {-2, 1},\r\n            {-1, 2},\r\n            {1, -2},\r\n            {1, 2}, //moved from last \r\n            {2, -1},\r\n            {2, 1},\r\n    };\r\n\r\nWhat is really going on? how does this position of moves could affect the performance this much? then in that case, how do we know the correct order of the moves?","title":"Knight tour problem - order of moves affect performance","body":"<p>I was trying to implement a solution for knight tour problem. I faced an interesting issue. I would like to know the reason for the behavior.</p>\n\n<p>This is the code - it works fine. </p>\n\n<pre><code>public class OpenKnightTour {\n\n    private int[][] chessTable;\n    private int startRow;\n    private int startCol;\n    private int ChessBoardSize;\n\n\n    private final int[][] moves = {\n            {-1, -2},\n            {-2, -1},\n            {-2, 1},\n            {-1, 2},\n            {1, -2},\n            {2, -1},\n            {2, 1},\n            {1, 2}\n    };\n\n    public OpenKnightTour(int ChessBoardSize, int startRow, int startCol){\n        this.ChessBoardSize = ChessBoardSize;\n        this.startRow = startRow;\n        this.startCol = startCol;\n        this.chessTable = new int[ChessBoardSize][ChessBoardSize];\n    }\n\n    void move(){\n        //first move\n        this.chessTable[this.startRow][this.startCol] = 1;\n\n        //start with 2nd move recursively\n        moveHelper(this.startRow, this.startCol, 2);\n\n        //print results\n        this.print();\n\n    }\n\n    private boolean moveHelper(int r, int c, int count){\n        if((count-1) == (this.ChessBoardSize * this.ChessBoardSize))\n            return true;\n\n        for(int[] move: moves){\n            int nextR = r + move[0];\n            int nextC = c + move[1];\n            if(isMoveValid(nextR, nextC)){\n                chessTable[nextR][nextC] = count;\n                if(moveHelper(nextR, nextC, count + 1)){\n                    return true;\n                }\n                chessTable[nextR][nextC] = 0;\n            }\n        }\n        return false;\n    }\n\n    private void print(){\n        Arrays.stream(this.chessTable)\n                .forEach(a -&gt; System.out.println(Arrays.toString(a)));\n    }\n\n    private boolean isMoveValid(int r, int c){\n        if(!(r &gt;= 0 &amp;&amp; r &lt; this.ChessBoardSize))\n            return false;\n        if(!(c &gt;= 0 &amp;&amp; c &lt; this.ChessBoardSize))\n            return false;\n        return chessTable[r][c]==0;\n    }\n\n}\n</code></pre>\n\n<p>Now we could run this, starting with knight position as <code>(2, 2)</code> in the matrix</p>\n\n<pre><code>    OpenKnightTour o = new OpenKnightTour(8, 2, 2);\n    o.move();\n</code></pre>\n\n<p>When i tried to run the starting position as <code>(0, 0)</code> , it ran continuously without showing any results. So i thought there could not be any solution for it. But if i change below order slightly, It works fine immediately.</p>\n\n<pre><code>private final int[][] moves = {\n        {-1, -2},\n        {-2, -1},\n        {-2, 1},\n        {-1, 2},\n        {1, -2},\n        {1, 2}, //moved from last \n        {2, -1},\n        {2, 1},\n};\n</code></pre>\n\n<p>What is really going on? how does this position of moves could affect the performance this much? then in that case, how do we know the correct order of the moves?</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9294,"page":698,"page_size":100}
