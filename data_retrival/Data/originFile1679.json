{"items":[{"tags":["java","android","kotlin","android-camerax"],"answers":[{"tags":[],"owner":{"account_id":10510169,"reputation":18796,"user_id":7746134,"display_name":"Saurabh Thorat"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1592917514,"creation_date":1592917514,"answer_id":62535461,"question_id":62534795,"body_markdown":"You also need to bind the preview use case to a lifecycle owner.\r\n\r\n    preview.setSurfaceProvider(mCameraView.createSurfaceProvider());\r\n    cameraProvider.unbindAll();\r\n    Camera camera = cameraProvider.bindToLifecycle(this, cameraSelector, preview);\r\n    // Do stuff with camera","title":"How to set viewfinder using CameraX in Java?","body":"<p>You also need to bind the preview use case to a lifecycle owner.</p>\n<pre><code>preview.setSurfaceProvider(mCameraView.createSurfaceProvider());\ncameraProvider.unbindAll();\nCamera camera = cameraProvider.bindToLifecycle(this, cameraSelector, preview);\n// Do stuff with camera\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9846377,"reputation":428,"user_id":7293728,"display_name":"rosuh"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1642245862,"creation_date":1642245862,"answer_id":70720951,"question_id":62534795,"body_markdown":" Although this issue may be long gone, I hope it gives a clue to those who follow up.\r\n\r\nFirst I believe you should have seen this sample code from Google: https://developer.android.com/codelabs/camerax-getting-started\r\nwhere the so-called `viewFinder` is actually the id of a component in the `xml` layout file, i.e. your `R.id.previewView`. \r\n\r\nSince the Google example uses the `kotlin-android-extensions` plugin, you can use the component&#39;s id directly in kotlin code.\r\n\r\nIt&#39;s not unusual that you won&#39;t find it in the native kotlin code.\r\nHere is the xml file for the Google example.\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;? &gt;\r\n&lt;androidx.constraintlayout.widget.ConstraintLayout\r\n   xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n   xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n   xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n   android:layout_width=&quot;match_parent&quot;\r\n   android:layout_height=&quot;match_parent&quot;\r\n   tools:context=&quot;.MainActivity&quot;&gt;\r\n\r\n   &lt;Button\r\n       android:id=&quot;@+id/camera_capture_button&quot;\r\n       android:layout_width=&quot;100dp&quot;\r\n       android:layout_height=&quot;100dp&quot;\r\n       android:layout_marginBottom=&quot;50dp&quot;\r\n       android:scaleType=&quot;fitCenter&quot;\r\n       android:text=&quot;Take Photo&quot;\r\n       app:layout_constraintLeft_toLeftOf=&quot;parent&quot;\r\n       app:layout_constraintRight_toRightOf=&quot;parent&quot;\r\n       app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n       android:elevation=&quot;2dp&quot; /&gt;\r\n\r\n   &lt;androidx.camera.view.PreviewView\r\n       android:id=&quot;@+id/viewFinder&quot;\r\n       android:layout_width=&quot;match_parent&quot;\r\n       android:layout_height=&quot;match_parent&quot; /&gt;\r\n\r\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\r\n````","title":"How to set viewfinder using CameraX in Java?","body":"<p>Although this issue may be long gone, I hope it gives a clue to those who follow up.</p>\n<p>First I believe you should have seen this sample code from Google: <a href=\"https://developer.android.com/codelabs/camerax-getting-started\" rel=\"nofollow noreferrer\">https://developer.android.com/codelabs/camerax-getting-started</a>\nwhere the so-called <code>viewFinder</code> is actually the id of a component in the <code>xml</code> layout file, i.e. your <code>R.id.previewView</code>.</p>\n<p>Since the Google example uses the <code>kotlin-android-extensions</code> plugin, you can use the component's id directly in kotlin code.</p>\n<p>It's not unusual that you won't find it in the native kotlin code.\nHere is the xml file for the Google example.</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;? &gt;\n&lt;androidx.constraintlayout.widget.ConstraintLayout\n   xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n   xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n   xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n   android:layout_width=&quot;match_parent&quot;\n   android:layout_height=&quot;match_parent&quot;\n   tools:context=&quot;.MainActivity&quot;&gt;\n\n   &lt;Button\n       android:id=&quot;@+id/camera_capture_button&quot;\n       android:layout_width=&quot;100dp&quot;\n       android:layout_height=&quot;100dp&quot;\n       android:layout_marginBottom=&quot;50dp&quot;\n       android:scaleType=&quot;fitCenter&quot;\n       android:text=&quot;Take Photo&quot;\n       app:layout_constraintLeft_toLeftOf=&quot;parent&quot;\n       app:layout_constraintRight_toRightOf=&quot;parent&quot;\n       app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\n       android:elevation=&quot;2dp&quot; /&gt;\n\n   &lt;androidx.camera.view.PreviewView\n       android:id=&quot;@+id/viewFinder&quot;\n       android:layout_width=&quot;match_parent&quot;\n       android:layout_height=&quot;match_parent&quot; /&gt;\n\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n</code></pre>\n"}],"owner":{"account_id":8841536,"reputation":141,"user_id":6603833,"display_name":"doomsday"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2204,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1642245862,"creation_date":1592915477,"question_id":62534795,"body_markdown":"I have been working on an app which needed to use CameraX for it&#39;s preview stream but it also needs a viewfinder. I have successfully implemented the preview but for the viewfinder part most of the codes that I can find online is in Kotlin and I being a newbie can&#39;t seem to effectively convert it to my java based code. Any help would be really appreciated.\r\n\r\nMy XML preview code:\r\n\r\n    &lt;androidx.camera.view.PreviewView\r\n        android:id=&quot;@+id/previewView&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;675dp&quot;\r\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n        app:layout_constraintTop_toBottomOf=&quot;@+id/toolbar&quot;&gt;\r\n\r\nMy CameraX preview code:\r\n\r\n     PreviewView mCameraView;\r\n     Camera camera;\r\n     void startCamera() {\r\n        mCameraView = findViewById(R.id.previewView);\r\n\r\n        cameraProviderFuture = ProcessCameraProvider.getInstance(this);\r\n\r\n        cameraProviderFuture.addListener(() -&gt; {\r\n            try {\r\n                ProcessCameraProvider cameraProvider = cameraProviderFuture.get();\r\n                bindPreview(cameraProvider);\r\n            } catch (ExecutionException | InterruptedException e) {\r\n                // No errors need to be handled for this Future.\r\n                // This should never be reached.\r\n            }\r\n        }, ContextCompat.getMainExecutor(this));\r\n    }\r\n\r\n     void bindPreview(@NonNull ProcessCameraProvider cameraProvider) {\r\n        Preview preview = new Preview.Builder().\r\n                setTargetResolution(BestSize())\r\n                .build();\r\n\r\n        CameraSelector cameraSelector = new CameraSelector.Builder()\r\n                .requireLensFacing(CameraSelector.LENS_FACING_BACK)\r\n                .build();\r\n\r\n        preview.setSurfaceProvider(mCameraView.createSurfaceProvider());\r\n        camera = cameraProvider.bindToLifecycle(this, cameraSelector, preview);\r\n\r\n        }\r\n\r\n        private int degreesToFirebaseRotation(int degrees) {\r\n        switch (degrees) {\r\n            case 0:\r\n                return FirebaseVisionImageMetadata.ROTATION_0;\r\n            case 90:\r\n                return FirebaseVisionImageMetadata.ROTATION_90;\r\n            case 180:\r\n                return FirebaseVisionImageMetadata.ROTATION_180;\r\n            case 270:\r\n                return FirebaseVisionImageMetadata.ROTATION_270;\r\n            default:\r\n                throw new IllegalArgumentException(\r\n                        &quot;Rotation must be 0, 90, 180, or 270.&quot;);\r\n        }\r\n    }\r\n\r\nSorry for the weird indentation and if the question is stupid. Thanks in advance.\r\n\r\n\r\n","title":"How to set viewfinder using CameraX in Java?","body":"<p>I have been working on an app which needed to use CameraX for it's preview stream but it also needs a viewfinder. I have successfully implemented the preview but for the viewfinder part most of the codes that I can find online is in Kotlin and I being a newbie can't seem to effectively convert it to my java based code. Any help would be really appreciated.</p>\n<p>My XML preview code:</p>\n<pre><code>&lt;androidx.camera.view.PreviewView\n    android:id=&quot;@+id/previewView&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;675dp&quot;\n    app:layout_constraintStart_toStartOf=&quot;parent&quot;\n    app:layout_constraintTop_toBottomOf=&quot;@+id/toolbar&quot;&gt;\n</code></pre>\n<p>My CameraX preview code:</p>\n<pre><code> PreviewView mCameraView;\n Camera camera;\n void startCamera() {\n    mCameraView = findViewById(R.id.previewView);\n\n    cameraProviderFuture = ProcessCameraProvider.getInstance(this);\n\n    cameraProviderFuture.addListener(() -&gt; {\n        try {\n            ProcessCameraProvider cameraProvider = cameraProviderFuture.get();\n            bindPreview(cameraProvider);\n        } catch (ExecutionException | InterruptedException e) {\n            // No errors need to be handled for this Future.\n            // This should never be reached.\n        }\n    }, ContextCompat.getMainExecutor(this));\n}\n\n void bindPreview(@NonNull ProcessCameraProvider cameraProvider) {\n    Preview preview = new Preview.Builder().\n            setTargetResolution(BestSize())\n            .build();\n\n    CameraSelector cameraSelector = new CameraSelector.Builder()\n            .requireLensFacing(CameraSelector.LENS_FACING_BACK)\n            .build();\n\n    preview.setSurfaceProvider(mCameraView.createSurfaceProvider());\n    camera = cameraProvider.bindToLifecycle(this, cameraSelector, preview);\n\n    }\n\n    private int degreesToFirebaseRotation(int degrees) {\n    switch (degrees) {\n        case 0:\n            return FirebaseVisionImageMetadata.ROTATION_0;\n        case 90:\n            return FirebaseVisionImageMetadata.ROTATION_90;\n        case 180:\n            return FirebaseVisionImageMetadata.ROTATION_180;\n        case 270:\n            return FirebaseVisionImageMetadata.ROTATION_270;\n        default:\n            throw new IllegalArgumentException(\n                    &quot;Rotation must be 0, 90, 180, or 270.&quot;);\n    }\n}\n</code></pre>\n<p>Sorry for the weird indentation and if the question is stupid. Thanks in advance.</p>\n"},{"tags":["java","arrays","sorting"],"comments":[{"owner":{"display_name":"user6073886"},"score":1,"creation_date":1635957364,"post_id":69828465,"comment_id":123432281,"body_markdown":"If you worked on this problem for the past few days you should share your results so far. Even if it doesn&#39;t work sharing some code that show your attempt is always a good idea.","body":"If you worked on this problem for the past few days you should share your results so far. Even if it doesn&#39;t work sharing some code that show your attempt is always a good idea."},{"owner":{"display_name":"user14215102"},"score":0,"creation_date":1635959121,"post_id":69828465,"comment_id":123433055,"body_markdown":"Are you sure your `mat` example is such a quadratic array? It does not resemble the description image very well. Were you given this as a correct example or was that your attempt at making one?","body":"Are you sure your <code>mat</code> example is such a quadratic array? It does not resemble the description image very well. Were you given this as a correct example or was that your attempt at making one?"}],"answers":[{"tags":[],"owner":{"account_id":19333049,"reputation":184,"user_id":14134202,"display_name":"Deffa"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1635966709,"creation_date":1635959000,"answer_id":69828907,"question_id":69828465,"body_markdown":"I don&#39;t think the 2D array you have given is correct according to the picture you&#39;ve provided. All values in a higher quadrant (numbered clock-wise, starting from the top left) need to be bigger than all values in a lower quadrant. And this rule also applies for all sub-arrays until a size of 1x1 is reached. For example:\r\n\r\nElement 24 is placed in position 2-1-3, meaning position 3 in the first sub-quadrant of the second main-quadrant.\r\n\r\nLikewise, element 19 is placed in position 2-2-1, so after 2-1-3\r\n\r\nI hope I understood correctly.\r\n\r\n**Edit:**\r\n\r\nHere&#39;s how I would proceed. I&#39;ll let you figure out the missing parts yourself.\r\nFirst, define a function that returns the quadrant bounds:\r\n\r\n    int[][] getQuadrantBounds(int iMin, int iMax, int jMin, int jMax){...}\r\nLet this function return a int[4][4]. It contains the `iMin, iMax, jMin, jMax` for four quadrants.\r\n\r\nThen check if the smallest element in the third quadrant is bigger or smaller or equal to `num`. Remember, the smallest element in any quadrant is always at `[jMin][iMin]` or `[iMin][jMin]` depending on your implementation. \r\n\r\nAfter that you know if the element is either in quadrants 1,2 or 3,4. Repeat the process but adapt it for two quadrants. Now you know in which quadrant `num` is.\r\n\r\nOf course you did all that in a while loop like:\r\n\r\n    while(iMax - iMin &gt; 0){ \r\n        int[][] quadrants = getQuadrantBounds(iMin, iMax, jMin, jMax);\r\n        //TODO find first element in third quadrant\r\n        //TODO nested if statements\r\n        //TODO update iMin, iMax, jMin, jMax accordingly inside if statements\r\n    } \r\n\r\nRepeat until found or until the while condition is no longer given.\r\n\r\nThere&#39;s probably a lot of room for improvement but this should give a O(log_2(n)) execution time.","title":"Searching an element in a &#39;circular sorted&#39; 2d array","body":"<p>I don't think the 2D array you have given is correct according to the picture you've provided. All values in a higher quadrant (numbered clock-wise, starting from the top left) need to be bigger than all values in a lower quadrant. And this rule also applies for all sub-arrays until a size of 1x1 is reached. For example:</p>\n<p>Element 24 is placed in position 2-1-3, meaning position 3 in the first sub-quadrant of the second main-quadrant.</p>\n<p>Likewise, element 19 is placed in position 2-2-1, so after 2-1-3</p>\n<p>I hope I understood correctly.</p>\n<p><strong>Edit:</strong></p>\n<p>Here's how I would proceed. I'll let you figure out the missing parts yourself.\nFirst, define a function that returns the quadrant bounds:</p>\n<pre><code>int[][] getQuadrantBounds(int iMin, int iMax, int jMin, int jMax){...}\n</code></pre>\n<p>Let this function return a int[4][4]. It contains the <code>iMin, iMax, jMin, jMax</code> for four quadrants.</p>\n<p>Then check if the smallest element in the third quadrant is bigger or smaller or equal to <code>num</code>. Remember, the smallest element in any quadrant is always at <code>[jMin][iMin]</code> or <code>[iMin][jMin]</code> depending on your implementation.</p>\n<p>After that you know if the element is either in quadrants 1,2 or 3,4. Repeat the process but adapt it for two quadrants. Now you know in which quadrant <code>num</code> is.</p>\n<p>Of course you did all that in a while loop like:</p>\n<pre><code>while(iMax - iMin &gt; 0){ \n    int[][] quadrants = getQuadrantBounds(iMin, iMax, jMin, jMax);\n    //TODO find first element in third quadrant\n    //TODO nested if statements\n    //TODO update iMin, iMax, jMin, jMax accordingly inside if statements\n} \n</code></pre>\n<p>Repeat until found or until the while condition is no longer given.</p>\n<p>There's probably a lot of room for improvement but this should give a O(log_2(n)) execution time.</p>\n"},{"tags":[],"owner":{"account_id":23897515,"reputation":1,"user_id":17896227,"display_name":"Dan Melamud"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1641844813,"creation_date":1641844813,"answer_id":70658257,"question_id":69828465,"body_markdown":"   \r\n\r\n     public static boolean search (int [][] mat, int num)\r\n    {\r\n        int size=mat.length;\r\n        int currentQuadrantRow=0;\r\n        int currentQuadrantCol=0;\r\n        int minQ1=mat[0][0];\r\n        int minQ2=mat[0][size/2];\r\n        int minQ3=mat[size/2][size/2];\r\n        int minQ4=mat[size/2][0];\r\n        int maxQ1;\r\n        int maxQ2;\r\n        int maxQ3;\r\n        int maxQ4;\r\n        if (size / 2 == 0)\r\n        {\r\n            maxQ1 = minQ1;\r\n            maxQ2 = minQ2;\r\n            maxQ3=minQ3;\r\n            maxQ4=minQ4;\r\n        }\r\n        else\r\n        {\r\n            maxQ1 = mat[(size/ 2)-1][0];\r\n            maxQ2 = mat[((size/ 2) - 1)][0+(size / 2)];\r\n            maxQ3 = mat[(size - 1)][0+(size / 2)];\r\n            maxQ4 = mat[(size - 1)][0];\r\n        }\r\n        while (size&gt;1)\r\n        {\r\n            if (minQ1 &gt; num) {\r\n                return false;\r\n            } else if (num &lt;= maxQ1) {\r\n                size = size/ 2;\r\n            } else if (minQ2 &gt; num) {\r\n                return false;\r\n            } else if (num &lt;= maxQ2) {\r\n                size = size/ 2;\r\n                currentQuadrantCol = currentQuadrantCol + size;\r\n            } else if (minQ3 &gt; num) {\r\n                return false;\r\n            } else if (num &lt;= maxQ3) {\r\n                size = size/ 2;\r\n                currentQuadrantRow = currentQuadrantRow + size;\r\n                currentQuadrantCol = currentQuadrantCol + size;\r\n            } else if (minQ4 &gt; num) {\r\n                return false;\r\n            } else if (num &lt;= maxQ4) {\r\n                size = size/ 2;\r\n                currentQuadrantRow = currentQuadrantRow + size;\r\n            } else if (num &gt; maxQ4) {\r\n                return false;\r\n            }\r\n            System.out.println(currentQuadrantRow);\r\n            System.out.println(currentQuadrantCol);\r\n            minQ1 = mat[currentQuadrantRow][currentQuadrantCol];\r\n            minQ2 = mat[currentQuadrantRow][currentQuadrantCol+(size / 2)];\r\n            minQ3 = mat[currentQuadrantRow+(size / 2)][currentQuadrantCol+(size / 2)];\r\n            minQ4 = mat[currentQuadrantRow+(size / 2)][currentQuadrantCol];\r\n            if (size / 2 == 0)\r\n            {\r\n                maxQ1 = minQ1;\r\n                maxQ2 = minQ2;\r\n                maxQ3=minQ3;\r\n                maxQ4=minQ4;\r\n            }\r\n            else\r\n            {\r\n                maxQ1 = mat[currentQuadrantRow+((size/ 2) - 1)][currentQuadrantCol];\r\n                maxQ2 = mat[currentQuadrantRow+((size/ 2) - 1)][currentQuadrantCol+(size / 2)];\r\n                maxQ3 = mat[currentQuadrantRow+(size - 1)][currentQuadrantCol+(size / 2)];\r\n                maxQ4 = mat[currentQuadrantRow+(size - 1)][currentQuadrantCol];\r\n            }\r\n        }\r\n        if(mat[currentQuadrantRow][currentQuadrantCol]==num)\r\n        {\r\n            return true;\r\n        }\r\n        return false;\r\n    }","title":"Searching an element in a &#39;circular sorted&#39; 2d array","body":"<pre><code> public static boolean search (int [][] mat, int num)\n{\n    int size=mat.length;\n    int currentQuadrantRow=0;\n    int currentQuadrantCol=0;\n    int minQ1=mat[0][0];\n    int minQ2=mat[0][size/2];\n    int minQ3=mat[size/2][size/2];\n    int minQ4=mat[size/2][0];\n    int maxQ1;\n    int maxQ2;\n    int maxQ3;\n    int maxQ4;\n    if (size / 2 == 0)\n    {\n        maxQ1 = minQ1;\n        maxQ2 = minQ2;\n        maxQ3=minQ3;\n        maxQ4=minQ4;\n    }\n    else\n    {\n        maxQ1 = mat[(size/ 2)-1][0];\n        maxQ2 = mat[((size/ 2) - 1)][0+(size / 2)];\n        maxQ3 = mat[(size - 1)][0+(size / 2)];\n        maxQ4 = mat[(size - 1)][0];\n    }\n    while (size&gt;1)\n    {\n        if (minQ1 &gt; num) {\n            return false;\n        } else if (num &lt;= maxQ1) {\n            size = size/ 2;\n        } else if (minQ2 &gt; num) {\n            return false;\n        } else if (num &lt;= maxQ2) {\n            size = size/ 2;\n            currentQuadrantCol = currentQuadrantCol + size;\n        } else if (minQ3 &gt; num) {\n            return false;\n        } else if (num &lt;= maxQ3) {\n            size = size/ 2;\n            currentQuadrantRow = currentQuadrantRow + size;\n            currentQuadrantCol = currentQuadrantCol + size;\n        } else if (minQ4 &gt; num) {\n            return false;\n        } else if (num &lt;= maxQ4) {\n            size = size/ 2;\n            currentQuadrantRow = currentQuadrantRow + size;\n        } else if (num &gt; maxQ4) {\n            return false;\n        }\n        System.out.println(currentQuadrantRow);\n        System.out.println(currentQuadrantCol);\n        minQ1 = mat[currentQuadrantRow][currentQuadrantCol];\n        minQ2 = mat[currentQuadrantRow][currentQuadrantCol+(size / 2)];\n        minQ3 = mat[currentQuadrantRow+(size / 2)][currentQuadrantCol+(size / 2)];\n        minQ4 = mat[currentQuadrantRow+(size / 2)][currentQuadrantCol];\n        if (size / 2 == 0)\n        {\n            maxQ1 = minQ1;\n            maxQ2 = minQ2;\n            maxQ3=minQ3;\n            maxQ4=minQ4;\n        }\n        else\n        {\n            maxQ1 = mat[currentQuadrantRow+((size/ 2) - 1)][currentQuadrantCol];\n            maxQ2 = mat[currentQuadrantRow+((size/ 2) - 1)][currentQuadrantCol+(size / 2)];\n            maxQ3 = mat[currentQuadrantRow+(size - 1)][currentQuadrantCol+(size / 2)];\n            maxQ4 = mat[currentQuadrantRow+(size - 1)][currentQuadrantCol];\n        }\n    }\n    if(mat[currentQuadrantRow][currentQuadrantCol]==num)\n    {\n        return true;\n    }\n    return false;\n}\n</code></pre>\n"}],"owner":{"account_id":19974206,"reputation":9,"user_id":14638951,"display_name":"Nadav Avnon"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":774,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1642245800,"creation_date":1635957039,"question_id":69828465,"body_markdown":"For the past few days I&#39;ve been trying to find a way to efficiently binary search this kind of array and get it to work on any given 2d array of this kind.\r\n\r\nInstructions: \r\nIn this question, you will refer to quadratic two-dimensional arrays, that is, the number of rows and columns is equal to the number of rows and columns equal to n. defining a split into four quarters of n/2 size as follows:\r\n![Illustration of the array][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/qcxFq.png\r\n\r\n\r\n\r\nGiven this kind of array, I was asked to search an element with logarithmic time complexity, and if it was found I should print the row and column of the element in the array.\r\n\r\n\r\nDoes anyone have a solution for this? A full solution would be amazing, but any answer would be appreciated.\r\n\r\nI will share the piece of code that is very messy but this is where I got so far and it works for most of the array elements, which is not good enough since it means whole logic is wrong.\r\n \r\n\r\n    int[][] mat = {\r\n                {1, 2, 3, 4, 17, 18, 19, 20},\r\n                {8, 7, 6, 5, 24, 23, 22, 21},\r\n                {12, 11, 10, 9, 28, 27, 26, 25},\r\n                {16, 15, 14, 13, 32, 31, 30, 29},\r\n                {49, 50, 51, 52, 33, 34, 35, 36},\r\n                {56, 55, 54, 53, 40, 39, 38, 37},\r\n                {60, 59, 58, 57, 45, 46, 41, 42},\r\n                {64, 63, 62, 61, 48, 47, 44, 43}};\r\n    public static boolean search(int[][] mat, int num) {\r\n        int n = mat.length;\r\n        int i = 0;\r\n        int j = 0;\r\n        int[] indic = {-1, -1};\r\n        if (num &gt; mat[n - 1][0] || num &lt; mat[0][0]) {\r\n            return false;\r\n        }\r\n        while (n &gt; 1) {\r\n            int minS1 = mat[i][j];\r\n            int maxS1 = mat[(n / 2) - 1 + i][j];\r\n            int minS2 = mat[i][(n / 2) + j];\r\n            int maxS2 = mat[(n / 2) - 1 + i][(n / 2) + j];\r\n            int minS3 = mat[(n / 2) + i][(n / 2) + j];\r\n            int maxS3 = mat[(n - 1) + i][(n / 2) + j];\r\n\r\n            int minS4 = mat[(n / 2) + i][j];\r\n            int maxS4 = mat[(n - 1) + i][j];\r\n            checkSquare(num, n, indic, i, j, minS1, minS2, minS3, minS4, maxS1, maxS2, maxS3, maxS4);\r\n            if (indic[0] != -1 &amp;&amp; indic[1] != -1) {\r\n                System.out.println(&quot;num=&quot; + num);\r\n                System.out.println(&quot;row=&quot; + indic[0]);\r\n                System.out.println(&quot;col=&quot; + indic[1]);\r\n                return true;\r\n            }\r\n            boolean x = false;\r\n            if (num &gt; maxS2) {\r\n                if (num &gt; maxS3) {\r\n                    i += n / 2;\r\n                } else {\r\n                    if (n &lt;= mat.length / 2 &amp;&amp; i &lt;= (n / 2)) {\r\n                        x = true;\r\n                        i += 1;\r\n                        j += 1;\r\n                    } else {\r\n                        if (i &gt;= n / 2 &amp;&amp; j &lt; n / 2 &amp;&amp; ((i &lt; n) &amp;&amp; (j &lt; n))) {\r\n                            i += 1;\r\n                            j += 1;\r\n                        } else {\r\n\r\n                            System.out.println(minS1);\r\n                            System.out.println(minS2);\r\n                            System.out.println(minS3);\r\n                            i += 1;\r\n                            j += 1;\r\n                        }\r\n                    }\r\n                }\r\n            } else {\r\n                if (num &gt; maxS1) {\r\n                    j += n / 2;\r\n                } else {\r\n\r\n                    if (num &gt; minS2) {\r\n                        if (j &gt; (mat.length / 2))\r\n                            j = 0;\r\n                        j += 1;\r\n                        x = true;\r\n                    } else j += 1;\r\n                }\r\n            }\r\n            if (num == mat[i][j]) {\r\n                System.out.println(&quot;num=&quot; + num);\r\n                System.out.println(&quot;row=&quot; + i);\r\n                System.out.println(&quot;col=&quot; + j);\r\n                return true;\r\n            }\r\n            if (!x)\r\n                n = (n / 2);\r\n        }\r\n        return false;\r\n    }\r\n\r\n","title":"Searching an element in a &#39;circular sorted&#39; 2d array","body":"<p>For the past few days I've been trying to find a way to efficiently binary search this kind of array and get it to work on any given 2d array of this kind.</p>\n<p>Instructions:\nIn this question, you will refer to quadratic two-dimensional arrays, that is, the number of rows and columns is equal to the number of rows and columns equal to n. defining a split into four quarters of n/2 size as follows:\n<img src=\"https://i.stack.imgur.com/qcxFq.png\" alt=\"Illustration of the array\" /></p>\n<p>Given this kind of array, I was asked to search an element with logarithmic time complexity, and if it was found I should print the row and column of the element in the array.</p>\n<p>Does anyone have a solution for this? A full solution would be amazing, but any answer would be appreciated.</p>\n<p>I will share the piece of code that is very messy but this is where I got so far and it works for most of the array elements, which is not good enough since it means whole logic is wrong.</p>\n<pre><code>int[][] mat = {\n            {1, 2, 3, 4, 17, 18, 19, 20},\n            {8, 7, 6, 5, 24, 23, 22, 21},\n            {12, 11, 10, 9, 28, 27, 26, 25},\n            {16, 15, 14, 13, 32, 31, 30, 29},\n            {49, 50, 51, 52, 33, 34, 35, 36},\n            {56, 55, 54, 53, 40, 39, 38, 37},\n            {60, 59, 58, 57, 45, 46, 41, 42},\n            {64, 63, 62, 61, 48, 47, 44, 43}};\npublic static boolean search(int[][] mat, int num) {\n    int n = mat.length;\n    int i = 0;\n    int j = 0;\n    int[] indic = {-1, -1};\n    if (num &gt; mat[n - 1][0] || num &lt; mat[0][0]) {\n        return false;\n    }\n    while (n &gt; 1) {\n        int minS1 = mat[i][j];\n        int maxS1 = mat[(n / 2) - 1 + i][j];\n        int minS2 = mat[i][(n / 2) + j];\n        int maxS2 = mat[(n / 2) - 1 + i][(n / 2) + j];\n        int minS3 = mat[(n / 2) + i][(n / 2) + j];\n        int maxS3 = mat[(n - 1) + i][(n / 2) + j];\n\n        int minS4 = mat[(n / 2) + i][j];\n        int maxS4 = mat[(n - 1) + i][j];\n        checkSquare(num, n, indic, i, j, minS1, minS2, minS3, minS4, maxS1, maxS2, maxS3, maxS4);\n        if (indic[0] != -1 &amp;&amp; indic[1] != -1) {\n            System.out.println(&quot;num=&quot; + num);\n            System.out.println(&quot;row=&quot; + indic[0]);\n            System.out.println(&quot;col=&quot; + indic[1]);\n            return true;\n        }\n        boolean x = false;\n        if (num &gt; maxS2) {\n            if (num &gt; maxS3) {\n                i += n / 2;\n            } else {\n                if (n &lt;= mat.length / 2 &amp;&amp; i &lt;= (n / 2)) {\n                    x = true;\n                    i += 1;\n                    j += 1;\n                } else {\n                    if (i &gt;= n / 2 &amp;&amp; j &lt; n / 2 &amp;&amp; ((i &lt; n) &amp;&amp; (j &lt; n))) {\n                        i += 1;\n                        j += 1;\n                    } else {\n\n                        System.out.println(minS1);\n                        System.out.println(minS2);\n                        System.out.println(minS3);\n                        i += 1;\n                        j += 1;\n                    }\n                }\n            }\n        } else {\n            if (num &gt; maxS1) {\n                j += n / 2;\n            } else {\n\n                if (num &gt; minS2) {\n                    if (j &gt; (mat.length / 2))\n                        j = 0;\n                    j += 1;\n                    x = true;\n                } else j += 1;\n            }\n        }\n        if (num == mat[i][j]) {\n            System.out.println(&quot;num=&quot; + num);\n            System.out.println(&quot;row=&quot; + i);\n            System.out.println(&quot;col=&quot; + j);\n            return true;\n        }\n        if (!x)\n            n = (n / 2);\n    }\n    return false;\n}\n</code></pre>\n"},{"tags":["java","mysql","spring-boot","docker","docker-compose"],"comments":[{"owner":{"account_id":21994,"reputation":73798,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":0,"creation_date":1605096811,"post_id":64786024,"comment_id":114546347,"body_markdown":"localhost inside docker is very boring. Either map in the port or use the name of the MySQL container.","body":"localhost inside docker is very boring. Either map in the port or use the name of the MySQL container."},{"owner":{"account_id":2732640,"reputation":399,"user_id":2356062,"accept_rate":100,"display_name":"atkuzmanov"},"score":0,"creation_date":1605097122,"post_id":64786024,"comment_id":114546487,"body_markdown":"@Thorbj&#248;rnRavnAndersen, thanks, I am not sure I understand you correctly.     I am overwriting it in docker-compose: ```environment:\n      - spring.datasource.jdbc-url=jdbc:genesysmysql://db_example:3306?useSSL=false&amp;allowPublicKeyRetrieval=true&amp;autoReconnect=true``` and I have set `genesysmysql` as the container name. What should I change?","body":"@Thorbj&#248;rnRavnAndersen, thanks, I am not sure I understand you correctly.     I am overwriting it in docker-compose: <code>environment:       - spring.datasource.jdbc-url=jdbc:genesysmysql:&#47;&#47;db_example:33&zwnj;&#8203;06?useSSL=false&amp;allo&zwnj;&#8203;wPublicKeyRetrieval=&zwnj;&#8203;true&amp;autoReconnect=t&zwnj;&#8203;rue</code> and I have set <code>genesysmysql</code> as the container name. What should I change?"}],"answers":[{"tags":[],"owner":{"account_id":2779049,"reputation":89,"user_id":2391970,"display_name":"Naitonium"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1605099594,"creation_date":1605099594,"answer_id":64786929,"question_id":64786024,"body_markdown":"To fix it you just need to change parameter **spring.datasource.jdbc-url** to **spring.datasource.url** and connection string to **jdbc:mysql://genesysmysql:3306/db_example?useSSL=false&amp;allowPublicKeyRetrieval=true&amp;autoReconnect=true**. Your connection string has an error.","title":"The dreaded Java SpringBoot app not connecting to MySQL with Docker-compose java.net.ConnectException: Connection refused","body":"<p>To fix it you just need to change parameter <strong>spring.datasource.jdbc-url</strong> to <strong>spring.datasource.url</strong> and connection string to <strong>jdbc:mysql://genesysmysql:3306/db_example?useSSL=false&amp;allowPublicKeyRetrieval=true&amp;autoReconnect=true</strong>. Your connection string has an error.</p>\n"}],"owner":{"account_id":2732640,"reputation":399,"user_id":2356062,"accept_rate":100,"display_name":"atkuzmanov"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1841,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":64786929,"answer_count":1,"score":1,"last_activity_date":1642245248,"creation_date":1605095958,"question_id":64786024,"body_markdown":"I have been struggling with the following issue - the dreaded Java SpringBoot app not connecting to MySQL with docker compose exceptions:\r\n\r\n&gt; com.mysql.cj.jdbc.exceptions.CommunicationsException: Communications link failure\r\n&gt;\r\n&gt; JDBCConnectionException: Unable to open JDBC Connection for DDL execution\r\n&gt;\r\n&gt; java.net.ConnectException: Connection refused\r\n\r\nThe app works fine on its own, but it can&#39;t seem to connect to mysql once I get it in Docker. I think I have all parameters correct, what am I missing?\r\n\r\n- Platform:\r\n\r\n```text\r\nMacOS Mojave 10.14.6\r\n---\r\nDocker version 19.03.13, build 4484c46d9d\r\ndocker-compose version 1.27.4, build 40524192\r\n---\r\nmysql  Ver 8.0.21 for osx10.14 on x86_64 (Homebrew)\r\n---\r\nopenjdk 11.0.8 2020-07-14\r\nOpenJDK Runtime Environment AdoptOpenJDK (build 11.0.8+10)\r\nOpenJDK 64-Bit Server VM AdoptOpenJDK (build 11.0.8+10, mixed mode)\r\n---\r\nSpring CLI v2.3.4.RELEASE\r\n---\r\nApache Maven 3.5.4 (1edded0938998edf8bf061f1ceb3cfdeccf443fe; 2018-06-17T21:33:14+03:00)\r\nMaven home: /usr/local/Cellar/maven@3.5/3.5.4_1/libexec\r\nJava version: 11.0.8, vendor: AdoptOpenJDK, runtime: /Library/Java/JavaVirtualMachines/adoptopenjdk-11.jdk/Contents/Home\r\nDefault locale: en_GB, platform encoding: UTF-8\r\nOS name: &quot;mac os x&quot;, version: &quot;10.14.6&quot;, arch: &quot;x86_64&quot;, family: &quot;mac&quot;\r\n```\r\n\r\nHere is the whole codebase: [Codebase][1]\r\n\r\nRun with command:\r\n```sh\r\ndocker-compose up --build --remove-orphans\r\n```\r\n\r\nMy docker-compose.yml (The commented out stuff is things I tried):\r\n```yaml\r\nversion: &quot;3.8&quot;\r\nservices:\r\n  genesysmysql:\r\n    container_name: genesysmysql\r\n#    container_name: genesysmysql_container\r\n    image: &quot;mysql:8.0.21&quot;\r\n    restart: always\r\n    environment:\r\n      - MYSQL_ROOT_PASSWORD=root\r\n      - MYSQL_DATABASE=db_example\r\n      - MYSQL_USER=springuser\r\n      - MYSQL_PASSWORD=ThePassword\r\n    ports:\r\n      - 3306:3306\r\n    volumes:\r\n      - ./setup.sql:/docker-entrypoint-initdb.d/setup.sql:ro\r\n    healthcheck:\r\n      test: [ &quot;CMD&quot;, &quot;mysqladmin&quot; ,&quot;ping&quot;, &quot;-h&quot;, &quot;localhost&quot; ]\r\n      timeout: 20s\r\n      retries: 20\r\n  genesys:\r\n    build: .\r\n    ports:\r\n      - 8080:8080\r\n    depends_on:\r\n      genesysmysql:\r\n        condition: service_healthy\r\n    environment:\r\n      - spring.datasource.jdbc-url=jdbc:genesysmysql://db_example:3306?useSSL=false&amp;allowPublicKeyRetrieval=true&amp;autoReconnect=true\r\n#      - spring.datasource.jdbc-url=jdbc:genesysmysql://db_example:3306?useSSL=false&amp;allowPublicKeyRetrieval=true&amp;serverTimezone=UTC&amp;autoReconnect=true\r\n      - spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver\r\n#      - spring.datasource.username=root\r\n#      - spring.datasource.password=root\r\n#      - spring.datasource.username=springuser\r\n#      - spring.datasource.password=ThePassword\r\n#      - spring.jpa.hibernate.ddl-auto=create-drop\r\n      - spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQL5Dialect\r\n#      - spring.data.jpa.repositories.enabled=true\r\n#      - spring.jpa.database-platform=org.hibernate.dialect.MySQL5Dialect\r\n#      - spring.jpa.generate-ddl=true\r\n```\r\n\r\nMy setup.sql script:\r\n```sh\r\nCREATE DATABASE db_example;\r\nCREATE USER &#39;springuser&#39;@&#39;%&#39; IDENTIFIED BY &#39;ThePassword&#39;;\r\nGRANT ALL ON db_example.* to &#39;springuser&#39;@&#39;%&#39;;\r\nGRANT ALL ON db_example.* TO &#39;springuser&#39;@&#39;localhost&#39;;\r\nGRANT ALL ON db_example.* TO &#39;springuser&#39;@&#39;genesysmysql_container&#39;;\r\nGRANT ALL ON db_example.* TO &#39;springuser&#39;@&#39;genesysmysql&#39;;\r\n```\r\n\r\nMy dockerfile:\r\n```sh\r\nFROM adoptopenjdk/openjdk11:alpine\r\nMAINTAINER  atkuzmanov &lt;https://github.com/atkuzmanov&gt;\r\nRUN addgroup -S spring &amp;&amp; adduser -S spring -G spring\r\nUSER spring:spring\r\nARG JAR_FILE=target/*.jar\r\nCOPY ${JAR_FILE} app.jar\r\nEXPOSE 8080\r\nENTRYPOINT [&quot;java&quot;,&quot;-jar&quot;,&quot;/app.jar&quot;]\r\n```\r\n\r\nMy application.properties file:\r\n```sh\r\n### Spring properties\r\nspring.application.name=@project.name@\r\n#spring.output.ansi.console-available=true\r\n#server.port=8080\r\nspring.output.ansi.enabled=ALWAYS\r\n\r\n### Spring banner properties\r\n#spring.banner.location=classpath:banner.txt\r\n#spring.main.banner-mode=off\r\ninfo.app.name=@project.name@\r\ninfo.app.version=@project.version@\r\ninfo.app.url=@project.url@\r\n\r\n### Spring Actuator properties\r\n## Do not expose or enable the &#39;shutdown&#39; option in a public production application.\r\n#management.endpoint.shutdown.enabled=true\r\nmanagement.endpoints.web.exposure.include=health,info,httptrace\r\n\r\n### Spring Devtools properties\r\n#spring.devtools.add-properties=false\r\n#spring.devtools.restart.log-condition-evaluation-delta=false\r\n#spring.devtools.restart.enabled=false\r\n#spring.devtools.livereload.enabled=false\r\n\r\n### Spring logging properties\r\n## Change logging levels as appropriate when debugging\r\nlogging.level.=WARN\r\nlogging.level.customLogbackLevel=INFO\r\nlogging.level.org.springframework=WARN\r\nlogging.level.org.springframework.web.servlet.=ERROR\r\nlogging.level.org.hibernate=ERROR\r\nlogging.level.org.apache.catalina.core.ContainerBase.=WARN\r\n\r\n### Spring Distributed Tracing properties\r\n## Zipkin properties\r\nspring.zipkin.enabled=true\r\nspring.zipkin.base-url=http://127.0.0.1:9411/\r\n## Sleuth properties\r\nspring.sleuth.enabled=true\r\nspring.sleuth.sampler.percentage=0.5\r\n#spring.sleuth.web.skipPattern=(^cleanup.*|.+favicon.*)\r\n\r\n### Spring Data properties\r\n## These are just to get things started, should be changed afterwards.\r\n#spring.jpa.hibernate.ddl-auto=none\r\nspring.jpa.hibernate.ddl-auto=update\r\nspring.datasource.url=jdbc:mysql://${MYSQL_HOST:localhost}:3306/db_example?useSSL=false&amp;allowPublicKeyRetrieval=true\r\nspring.datasource.username=springuser\r\nspring.datasource.password=ThePassword\r\n#spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQL5\r\n\r\n### Spring Open Session properties\r\n### Warning message by default:\r\n## &quot;spring.jpa.open-in-view is enabled by default.\r\n## Therefore, database queries may be performed during view rendering.\r\n## Explicitly configure spring.jpa.open-in-view to disable this warning&quot;\r\n## See:\r\n## RE: spring.jpa.open-in-view Warning\r\n## - &lt;https://stackoverflow.com/questions/30549489/what-is-this-spring-jpa-open-in-view-true-property-in-spring-boot&gt;\r\n## - &lt;https://www.baeldung.com/spring-open-session-in-view&gt;\r\nspring.jpa.open-in-view=true\r\n\r\n### Spring Thymeleaf properties\r\nspring.thymeleaf.cache=false\r\n```\r\n\r\nHere are the exception messages:\r\n\r\n- Exception 1:\r\n[Exception 1][2]\r\n\r\n- Eception 2:\r\n[Exception 2][3]\r\n\r\n- Exception 3:\r\n[Exception 3][4]\r\n\r\n- Exception 4, which encapsulates all of them:\r\n[Exception 4][5]\r\n```json\r\n{\r\n  &quot;app&quot;: &quot;GeneSys&quot;,\r\n  &quot;logMsgId&quot;: &quot;f7b6c3cc-0dce-4eb6-b6c3-cc0dce1eb69c&quot;,\r\n  &quot;@timestamp&quot;: &quot;2020-11-11T11:20:31.822Z&quot;,\r\n  &quot;@version&quot;: &quot;1&quot;,\r\n  &quot;logger&quot;: &quot;org.springframework.boot.SpringApplication&quot;,\r\n  &quot;level&quot;: &quot;ERROR&quot;,\r\n  &quot;thread&quot;: &quot;main&quot;,\r\n  &quot;stackTrace&quot;: &quot;org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;timestampRepository&#39; defined in com.atkuzmanov.genesys.dao.TimestampRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Cannot resolve reference to bean &#39;jpaMappingContext&#39; while setting bean property &#39;mappingContext&#39;; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;jpaMappingContext&#39;: Invocation of init method failed; nested exception is javax.persistence.PersistenceException: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.exception.JDBCConnectionException: Unable to open JDBC Connection for DDL execution\r\n\tat org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:342)\r\n\tat org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:113)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1697)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1442)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:593)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:516)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:324)\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:322)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeansOfType(DefaultListableBeanFactory.java:624)\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeansOfType(DefaultListableBeanFactory.java:612)\r\n\tat org.springframework.data.repository.config.DeferredRepositoryInitializationListener.onApplicationEvent(DeferredRepositoryInitializationListener.java:51)\r\n\tat org.springframework.data.repository.config.DeferredRepositoryInitializationListener.onApplicationEvent(DeferredRepositoryInitializationListener.java:36)\r\n\tat org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:172)\r\n\tat org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:165)\r\n\tat org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:139)\r\n\tat org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:404)\r\n\tat org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:361)\r\n\tat org.springframework.context.support.AbstractApplicationContext.finishRefresh(AbstractApplicationContext.java:898)\r\n\tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:554)\r\n\tat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:143)\r\n\tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:758)\r\n\tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:750)\r\n\tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:397)\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:315)\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1237)\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1226)\r\n\tat com.atkuzmanov.genesys.GenesysApplication.main(GenesysApplication.java:15)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n\tat org.springframework.boot.loader.MainMethodRunner.run(MainMethodRunner.java:49)\r\n\tat org.springframework.boot.loader.Launcher.launch(Launcher.java:107)\r\n\tat org.springframework.boot.loader.Launcher.launch(Launcher.java:58)\r\n\tat org.springframework.boot.loader.JarLauncher.main(JarLauncher.java:88)\r\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;jpaMappingContext&#39;: Invocation of init method failed; nested exception is javax.persistence.PersistenceException: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.exception.JDBCConnectionException: Unable to open JDBC Connection for DDL execution\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1794)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:594)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:516)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:324)\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:322)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)\r\n\tat org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:330)\r\n\t... 36 common frames omitted\r\nCaused by: javax.persistence.PersistenceException: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.exception.JDBCConnectionException: Unable to open JDBC Connection for DDL execution\r\n\tat org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:403)\r\n\tat java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\r\n\tat java.base/java.lang.Thread.run(Thread.java:834)\r\nCaused by: org.hibernate.exception.JDBCConnectionException: Unable to open JDBC Connection for DDL execution\r\n\tat org.hibernate.exception.internal.SQLStateConversionDelegate.convert(SQLStateConversionDelegate.java:112)\r\n\tat org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:42)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:113)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:99)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.DdlTransactionIsolatorNonJtaImpl.getIsolatedConnection(DdlTransactionIsolatorNonJtaImpl.java:69)\r\n\tat org.hibernate.tool.schema.internal.exec.ImprovedExtractionContextImpl.getJdbcConnection(ImprovedExtractionContextImpl.java:60)\r\n\tat org.hibernate.tool.schema.internal.exec.ImprovedExtractionContextImpl.getJdbcDatabaseMetaData(ImprovedExtractionContextImpl.java:67)\r\n\tat org.hibernate.tool.schema.extract.internal.InformationExtractorJdbcDatabaseMetaDataImpl.getTables(InformationExtractorJdbcDatabaseMetaDataImpl.java:333)\r\n\tat org.hibernate.tool.schema.extract.internal.DatabaseInformationImpl.getTablesInformation(DatabaseInformationImpl.java:120)\r\n\tat org.hibernate.tool.schema.internal.GroupedSchemaMigratorImpl.performTablesMigration(GroupedSchemaMigratorImpl.java:65)\r\n\tat org.hibernate.tool.schema.internal.AbstractSchemaMigrator.performMigration(AbstractSchemaMigrator.java:207)\r\n\tat org.hibernate.tool.schema.internal.AbstractSchemaMigrator.doMigration(AbstractSchemaMigrator.java:114)\r\n\tat org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:184)\r\n\tat org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:73)\r\n\tat org.hibernate.internal.SessionFactoryImpl.&lt;init&gt;(SessionFactoryImpl.java:316)\r\n\tat org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:469)\r\n\tat org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1259)\r\n\tat org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:58)\r\n\tat org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:365)\r\n\tat org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:391)\r\n\t... 4 common frames omitted\r\nCaused by: com.mysql.cj.jdbc.exceptions.CommunicationsException: Communications link failure\r\n\r\nThe last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.\r\n\tat com.mysql.cj.jdbc.exceptions.SQLError.createCommunicationsException(SQLError.java:174)\r\n\tat com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:64)\r\n\tat com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:836)\r\n\tat com.mysql.cj.jdbc.ConnectionImpl.&lt;init&gt;(ConnectionImpl.java:456)\r\n\tat com.mysql.cj.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:246)\r\n\tat com.mysql.cj.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:197)\r\n\tat com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:138)\r\n\tat com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:358)\r\n\tat com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:206)\r\n\tat com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:477)\r\n\tat com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:560)\r\n\tat com.zaxxer.hikari.pool.HikariPool.&lt;init&gt;(HikariPool.java:115)\r\n\tat com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:112)\r\n\tat org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:122)\r\n\tat org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$ConnectionProviderJdbcConnectionAccess.obtainConnection(JdbcEnvironmentInitiator.java:180)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.DdlTransactionIsolatorNonJtaImpl.getIsolatedConnection(DdlTransactionIsolatorNonJtaImpl.java:43)\r\n\t... 19 common frames omitted\r\nCaused by: com.mysql.cj.exceptions.CJCommunicationsException: Communications link failure\r\n\r\nThe last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.\r\n\tat java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\r\n\tat java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\r\n\tat java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:490)\r\n\tat com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:61)\r\n\tat com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:105)\r\n\tat com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:151)\r\n\tat com.mysql.cj.exceptions.ExceptionFactory.createCommunicationsException(ExceptionFactory.java:167)\r\n\tat com.mysql.cj.protocol.a.NativeSocketConnection.connect(NativeSocketConnection.java:91)\r\n\tat com.mysql.cj.NativeSession.connect(NativeSession.java:144)\r\n\tat com.mysql.cj.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:956)\r\n\tat com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:826)\r\n\t... 32 common frames omitted\r\nCaused by: java.net.ConnectException: Connection refused (Connection refused)\r\n\tat java.base/java.net.PlainSocketImpl.socketConnect(Native Method)\r\n\tat java.base/java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:399)\r\n\tat java.base/java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:242)\r\n\tat java.base/java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:224)\r\n\tat java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:403)\r\n\tat java.base/java.net.Socket.connect(Socket.java:609)\r\n\tat com.mysql.cj.protocol.StandardSocketFactory.connect(StandardSocketFactory.java:155)\r\n\tat com.mysql.cj.protocol.a.NativeSocketConnection.connect(NativeSocketConnection.java:65)\r\n\t... 35 common frames omitted\r\n&quot;,\r\n  &quot;message&quot;: &quot;Application run failed&quot;,\r\n  &quot;method&quot;: &quot;reportFailure&quot;,\r\n  &quot;class&quot;: &quot;org.springframework.boot.SpringApplication&quot;\r\n}\r\n```\r\n\r\n\r\n  [1]: https://github.com/atkuzmanov/genesys-java-springboot-docker\r\n  [2]: https://github.com/atkuzmanov/genesys-java-springboot-docker/blob/main/src/main/java/com/atkuzmanov/genesys/temporarytodelete/json1.json\r\n  [3]: https://github.com/atkuzmanov/genesys-java-springboot-docker/blob/main/src/main/java/com/atkuzmanov/genesys/temporarytodelete/json2.json\r\n  [4]: https://github.com/atkuzmanov/genesys-java-springboot-docker/blob/main/src/main/java/com/atkuzmanov/genesys/temporarytodelete/json3.json\r\n  [5]: https://github.com/atkuzmanov/genesys-java-springboot-docker/blob/main/src/main/java/com/atkuzmanov/genesys/temporarytodelete/json4.json","title":"The dreaded Java SpringBoot app not connecting to MySQL with Docker-compose java.net.ConnectException: Connection refused","body":"<p>I have been struggling with the following issue - the dreaded Java SpringBoot app not connecting to MySQL with docker compose exceptions:</p>\n<blockquote>\n<p>com.mysql.cj.jdbc.exceptions.CommunicationsException: Communications link failure</p>\n<p>JDBCConnectionException: Unable to open JDBC Connection for DDL execution</p>\n<p>java.net.ConnectException: Connection refused</p>\n</blockquote>\n<p>The app works fine on its own, but it can't seem to connect to mysql once I get it in Docker. I think I have all parameters correct, what am I missing?</p>\n<ul>\n<li>Platform:</li>\n</ul>\n<pre><code>MacOS Mojave 10.14.6\n---\nDocker version 19.03.13, build 4484c46d9d\ndocker-compose version 1.27.4, build 40524192\n---\nmysql  Ver 8.0.21 for osx10.14 on x86_64 (Homebrew)\n---\nopenjdk 11.0.8 2020-07-14\nOpenJDK Runtime Environment AdoptOpenJDK (build 11.0.8+10)\nOpenJDK 64-Bit Server VM AdoptOpenJDK (build 11.0.8+10, mixed mode)\n---\nSpring CLI v2.3.4.RELEASE\n---\nApache Maven 3.5.4 (1edded0938998edf8bf061f1ceb3cfdeccf443fe; 2018-06-17T21:33:14+03:00)\nMaven home: /usr/local/Cellar/maven@3.5/3.5.4_1/libexec\nJava version: 11.0.8, vendor: AdoptOpenJDK, runtime: /Library/Java/JavaVirtualMachines/adoptopenjdk-11.jdk/Contents/Home\nDefault locale: en_GB, platform encoding: UTF-8\nOS name: &quot;mac os x&quot;, version: &quot;10.14.6&quot;, arch: &quot;x86_64&quot;, family: &quot;mac&quot;\n</code></pre>\n<p>Here is the whole codebase: <a href=\"https://github.com/atkuzmanov/genesys-java-springboot-docker\" rel=\"nofollow noreferrer\">Codebase</a></p>\n<p>Run with command:</p>\n<pre class=\"lang-sh prettyprint-override\"><code>docker-compose up --build --remove-orphans\n</code></pre>\n<p>My docker-compose.yml (The commented out stuff is things I tried):</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>version: &quot;3.8&quot;\nservices:\n  genesysmysql:\n    container_name: genesysmysql\n#    container_name: genesysmysql_container\n    image: &quot;mysql:8.0.21&quot;\n    restart: always\n    environment:\n      - MYSQL_ROOT_PASSWORD=root\n      - MYSQL_DATABASE=db_example\n      - MYSQL_USER=springuser\n      - MYSQL_PASSWORD=ThePassword\n    ports:\n      - 3306:3306\n    volumes:\n      - ./setup.sql:/docker-entrypoint-initdb.d/setup.sql:ro\n    healthcheck:\n      test: [ &quot;CMD&quot;, &quot;mysqladmin&quot; ,&quot;ping&quot;, &quot;-h&quot;, &quot;localhost&quot; ]\n      timeout: 20s\n      retries: 20\n  genesys:\n    build: .\n    ports:\n      - 8080:8080\n    depends_on:\n      genesysmysql:\n        condition: service_healthy\n    environment:\n      - spring.datasource.jdbc-url=jdbc:genesysmysql://db_example:3306?useSSL=false&amp;allowPublicKeyRetrieval=true&amp;autoReconnect=true\n#      - spring.datasource.jdbc-url=jdbc:genesysmysql://db_example:3306?useSSL=false&amp;allowPublicKeyRetrieval=true&amp;serverTimezone=UTC&amp;autoReconnect=true\n      - spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver\n#      - spring.datasource.username=root\n#      - spring.datasource.password=root\n#      - spring.datasource.username=springuser\n#      - spring.datasource.password=ThePassword\n#      - spring.jpa.hibernate.ddl-auto=create-drop\n      - spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQL5Dialect\n#      - spring.data.jpa.repositories.enabled=true\n#      - spring.jpa.database-platform=org.hibernate.dialect.MySQL5Dialect\n#      - spring.jpa.generate-ddl=true\n</code></pre>\n<p>My setup.sql script:</p>\n<pre class=\"lang-sh prettyprint-override\"><code>CREATE DATABASE db_example;\nCREATE USER 'springuser'@'%' IDENTIFIED BY 'ThePassword';\nGRANT ALL ON db_example.* to 'springuser'@'%';\nGRANT ALL ON db_example.* TO 'springuser'@'localhost';\nGRANT ALL ON db_example.* TO 'springuser'@'genesysmysql_container';\nGRANT ALL ON db_example.* TO 'springuser'@'genesysmysql';\n</code></pre>\n<p>My dockerfile:</p>\n<pre class=\"lang-sh prettyprint-override\"><code>FROM adoptopenjdk/openjdk11:alpine\nMAINTAINER  atkuzmanov &lt;https://github.com/atkuzmanov&gt;\nRUN addgroup -S spring &amp;&amp; adduser -S spring -G spring\nUSER spring:spring\nARG JAR_FILE=target/*.jar\nCOPY ${JAR_FILE} app.jar\nEXPOSE 8080\nENTRYPOINT [&quot;java&quot;,&quot;-jar&quot;,&quot;/app.jar&quot;]\n</code></pre>\n<p>My application.properties file:</p>\n<pre class=\"lang-sh prettyprint-override\"><code>### Spring properties\nspring.application.name=@project.name@\n#spring.output.ansi.console-available=true\n#server.port=8080\nspring.output.ansi.enabled=ALWAYS\n\n### Spring banner properties\n#spring.banner.location=classpath:banner.txt\n#spring.main.banner-mode=off\ninfo.app.name=@project.name@\ninfo.app.version=@project.version@\ninfo.app.url=@project.url@\n\n### Spring Actuator properties\n## Do not expose or enable the 'shutdown' option in a public production application.\n#management.endpoint.shutdown.enabled=true\nmanagement.endpoints.web.exposure.include=health,info,httptrace\n\n### Spring Devtools properties\n#spring.devtools.add-properties=false\n#spring.devtools.restart.log-condition-evaluation-delta=false\n#spring.devtools.restart.enabled=false\n#spring.devtools.livereload.enabled=false\n\n### Spring logging properties\n## Change logging levels as appropriate when debugging\nlogging.level.=WARN\nlogging.level.customLogbackLevel=INFO\nlogging.level.org.springframework=WARN\nlogging.level.org.springframework.web.servlet.=ERROR\nlogging.level.org.hibernate=ERROR\nlogging.level.org.apache.catalina.core.ContainerBase.=WARN\n\n### Spring Distributed Tracing properties\n## Zipkin properties\nspring.zipkin.enabled=true\nspring.zipkin.base-url=http://127.0.0.1:9411/\n## Sleuth properties\nspring.sleuth.enabled=true\nspring.sleuth.sampler.percentage=0.5\n#spring.sleuth.web.skipPattern=(^cleanup.*|.+favicon.*)\n\n### Spring Data properties\n## These are just to get things started, should be changed afterwards.\n#spring.jpa.hibernate.ddl-auto=none\nspring.jpa.hibernate.ddl-auto=update\nspring.datasource.url=jdbc:mysql://${MYSQL_HOST:localhost}:3306/db_example?useSSL=false&amp;allowPublicKeyRetrieval=true\nspring.datasource.username=springuser\nspring.datasource.password=ThePassword\n#spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQL5\n\n### Spring Open Session properties\n### Warning message by default:\n## &quot;spring.jpa.open-in-view is enabled by default.\n## Therefore, database queries may be performed during view rendering.\n## Explicitly configure spring.jpa.open-in-view to disable this warning&quot;\n## See:\n## RE: spring.jpa.open-in-view Warning\n## - &lt;https://stackoverflow.com/questions/30549489/what-is-this-spring-jpa-open-in-view-true-property-in-spring-boot&gt;\n## - &lt;https://www.baeldung.com/spring-open-session-in-view&gt;\nspring.jpa.open-in-view=true\n\n### Spring Thymeleaf properties\nspring.thymeleaf.cache=false\n</code></pre>\n<p>Here are the exception messages:</p>\n<ul>\n<li><p>Exception 1:\n<a href=\"https://github.com/atkuzmanov/genesys-java-springboot-docker/blob/main/src/main/java/com/atkuzmanov/genesys/temporarytodelete/json1.json\" rel=\"nofollow noreferrer\">Exception 1</a></p>\n</li>\n<li><p>Eception 2:\n<a href=\"https://github.com/atkuzmanov/genesys-java-springboot-docker/blob/main/src/main/java/com/atkuzmanov/genesys/temporarytodelete/json2.json\" rel=\"nofollow noreferrer\">Exception 2</a></p>\n</li>\n<li><p>Exception 3:\n<a href=\"https://github.com/atkuzmanov/genesys-java-springboot-docker/blob/main/src/main/java/com/atkuzmanov/genesys/temporarytodelete/json3.json\" rel=\"nofollow noreferrer\">Exception 3</a></p>\n</li>\n<li><p>Exception 4, which encapsulates all of them:\n<a href=\"https://github.com/atkuzmanov/genesys-java-springboot-docker/blob/main/src/main/java/com/atkuzmanov/genesys/temporarytodelete/json4.json\" rel=\"nofollow noreferrer\">Exception 4</a></p>\n</li>\n</ul>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;app&quot;: &quot;GeneSys&quot;,\n  &quot;logMsgId&quot;: &quot;f7b6c3cc-0dce-4eb6-b6c3-cc0dce1eb69c&quot;,\n  &quot;@timestamp&quot;: &quot;2020-11-11T11:20:31.822Z&quot;,\n  &quot;@version&quot;: &quot;1&quot;,\n  &quot;logger&quot;: &quot;org.springframework.boot.SpringApplication&quot;,\n  &quot;level&quot;: &quot;ERROR&quot;,\n  &quot;thread&quot;: &quot;main&quot;,\n  &quot;stackTrace&quot;: &quot;org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'timestampRepository' defined in com.atkuzmanov.genesys.dao.TimestampRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Cannot resolve reference to bean 'jpaMappingContext' while setting bean property 'mappingContext'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'jpaMappingContext': Invocation of init method failed; nested exception is javax.persistence.PersistenceException: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.exception.JDBCConnectionException: Unable to open JDBC Connection for DDL execution\n    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:342)\n    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:113)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1697)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1442)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:593)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:516)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:324)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:322)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeansOfType(DefaultListableBeanFactory.java:624)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeansOfType(DefaultListableBeanFactory.java:612)\n    at org.springframework.data.repository.config.DeferredRepositoryInitializationListener.onApplicationEvent(DeferredRepositoryInitializationListener.java:51)\n    at org.springframework.data.repository.config.DeferredRepositoryInitializationListener.onApplicationEvent(DeferredRepositoryInitializationListener.java:36)\n    at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:172)\n    at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:165)\n    at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:139)\n    at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:404)\n    at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:361)\n    at org.springframework.context.support.AbstractApplicationContext.finishRefresh(AbstractApplicationContext.java:898)\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:554)\n    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:143)\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:758)\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:750)\n    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:397)\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:315)\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1237)\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1226)\n    at com.atkuzmanov.genesys.GenesysApplication.main(GenesysApplication.java:15)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:566)\n    at org.springframework.boot.loader.MainMethodRunner.run(MainMethodRunner.java:49)\n    at org.springframework.boot.loader.Launcher.launch(Launcher.java:107)\n    at org.springframework.boot.loader.Launcher.launch(Launcher.java:58)\n    at org.springframework.boot.loader.JarLauncher.main(JarLauncher.java:88)\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'jpaMappingContext': Invocation of init method failed; nested exception is javax.persistence.PersistenceException: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.exception.JDBCConnectionException: Unable to open JDBC Connection for DDL execution\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1794)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:594)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:516)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:324)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:322)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)\n    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:330)\n    ... 36 common frames omitted\nCaused by: javax.persistence.PersistenceException: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.exception.JDBCConnectionException: Unable to open JDBC Connection for DDL execution\n    at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:403)\n    at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\n    at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\n    at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\n    at java.base/java.lang.Thread.run(Thread.java:834)\nCaused by: org.hibernate.exception.JDBCConnectionException: Unable to open JDBC Connection for DDL execution\n    at org.hibernate.exception.internal.SQLStateConversionDelegate.convert(SQLStateConversionDelegate.java:112)\n    at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:42)\n    at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:113)\n    at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:99)\n    at org.hibernate.resource.transaction.backend.jdbc.internal.DdlTransactionIsolatorNonJtaImpl.getIsolatedConnection(DdlTransactionIsolatorNonJtaImpl.java:69)\n    at org.hibernate.tool.schema.internal.exec.ImprovedExtractionContextImpl.getJdbcConnection(ImprovedExtractionContextImpl.java:60)\n    at org.hibernate.tool.schema.internal.exec.ImprovedExtractionContextImpl.getJdbcDatabaseMetaData(ImprovedExtractionContextImpl.java:67)\n    at org.hibernate.tool.schema.extract.internal.InformationExtractorJdbcDatabaseMetaDataImpl.getTables(InformationExtractorJdbcDatabaseMetaDataImpl.java:333)\n    at org.hibernate.tool.schema.extract.internal.DatabaseInformationImpl.getTablesInformation(DatabaseInformationImpl.java:120)\n    at org.hibernate.tool.schema.internal.GroupedSchemaMigratorImpl.performTablesMigration(GroupedSchemaMigratorImpl.java:65)\n    at org.hibernate.tool.schema.internal.AbstractSchemaMigrator.performMigration(AbstractSchemaMigrator.java:207)\n    at org.hibernate.tool.schema.internal.AbstractSchemaMigrator.doMigration(AbstractSchemaMigrator.java:114)\n    at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:184)\n    at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:73)\n    at org.hibernate.internal.SessionFactoryImpl.&lt;init&gt;(SessionFactoryImpl.java:316)\n    at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:469)\n    at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1259)\n    at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:58)\n    at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:365)\n    at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:391)\n    ... 4 common frames omitted\nCaused by: com.mysql.cj.jdbc.exceptions.CommunicationsException: Communications link failure\n\nThe last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.\n    at com.mysql.cj.jdbc.exceptions.SQLError.createCommunicationsException(SQLError.java:174)\n    at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:64)\n    at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:836)\n    at com.mysql.cj.jdbc.ConnectionImpl.&lt;init&gt;(ConnectionImpl.java:456)\n    at com.mysql.cj.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:246)\n    at com.mysql.cj.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:197)\n    at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:138)\n    at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:358)\n    at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:206)\n    at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:477)\n    at com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:560)\n    at com.zaxxer.hikari.pool.HikariPool.&lt;init&gt;(HikariPool.java:115)\n    at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:112)\n    at org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:122)\n    at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$ConnectionProviderJdbcConnectionAccess.obtainConnection(JdbcEnvironmentInitiator.java:180)\n    at org.hibernate.resource.transaction.backend.jdbc.internal.DdlTransactionIsolatorNonJtaImpl.getIsolatedConnection(DdlTransactionIsolatorNonJtaImpl.java:43)\n    ... 19 common frames omitted\nCaused by: com.mysql.cj.exceptions.CJCommunicationsException: Communications link failure\n\nThe last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.\n    at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n    at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\n    at java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\n    at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:490)\n    at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:61)\n    at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:105)\n    at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:151)\n    at com.mysql.cj.exceptions.ExceptionFactory.createCommunicationsException(ExceptionFactory.java:167)\n    at com.mysql.cj.protocol.a.NativeSocketConnection.connect(NativeSocketConnection.java:91)\n    at com.mysql.cj.NativeSession.connect(NativeSession.java:144)\n    at com.mysql.cj.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:956)\n    at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:826)\n    ... 32 common frames omitted\nCaused by: java.net.ConnectException: Connection refused (Connection refused)\n    at java.base/java.net.PlainSocketImpl.socketConnect(Native Method)\n    at java.base/java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:399)\n    at java.base/java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:242)\n    at java.base/java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:224)\n    at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:403)\n    at java.base/java.net.Socket.connect(Socket.java:609)\n    at com.mysql.cj.protocol.StandardSocketFactory.connect(StandardSocketFactory.java:155)\n    at com.mysql.cj.protocol.a.NativeSocketConnection.connect(NativeSocketConnection.java:65)\n    ... 35 common frames omitted\n&quot;,\n  &quot;message&quot;: &quot;Application run failed&quot;,\n  &quot;method&quot;: &quot;reportFailure&quot;,\n  &quot;class&quot;: &quot;org.springframework.boot.SpringApplication&quot;\n}\n</code></pre>\n"},{"tags":["java","spring-boot","unit-testing","mocking","mockito"],"comments":[{"owner":{"account_id":22354823,"reputation":16499,"user_id":16572295,"display_name":"Jo&#227;o Dias"},"score":1,"creation_date":1642208267,"post_id":70718032,"comment_id":125018045,"body_markdown":"`@SpringBootTest` is supposed to be used to do Integration Tests. When you do Integration Tests you usually don&#39;t want to mock stuff. Consider implementing Unit Tests instead and taking a look at https://stackoverflow.com/questions/5357601/whats-the-difference-between-unit-tests-and-integration-tests / https://dzone.com/articles/unit-and-integration-tests-in-spring-boot-2 / https://www.baeldung.com/spring-boot-testing.","body":"<code>@SpringBootTest</code> is supposed to be used to do Integration Tests. When you do Integration Tests you usually don&#39;t want to mock stuff. Consider implementing Unit Tests instead and taking a look at <a href=\"https://stackoverflow.com/questions/5357601/whats-the-difference-between-unit-tests-and-integration-tests\" title=\"whats the difference between unit tests and integration tests\">stackoverflow.com/questions/5357601/&hellip;</a> / <a href=\"https://dzone.com/articles/unit-and-integration-tests-in-spring-boot-2\" rel=\"nofollow noreferrer\">dzone.com/articles/unit-and-integration-tests-in-spring-boot&zwnj;&#8203;-2</a> / <a href=\"https://www.baeldung.com/spring-boot-testing\" rel=\"nofollow noreferrer\">baeldung.com/spring-boot-testing</a>."},{"owner":{"account_id":301230,"reputation":28997,"user_id":608820,"accept_rate":89,"display_name":"Augusto"},"score":0,"creation_date":1642251830,"post_id":70718032,"comment_id":125023969,"body_markdown":"To add to what Joao mentioned above: using spring boot tests will slow down your tests considerably, so use it sparingly.","body":"To add to what Joao mentioned above: using spring boot tests will slow down your tests considerably, so use it sparingly."}],"answers":[{"tags":[],"owner":{"account_id":136251,"reputation":87506,"user_id":339637,"accept_rate":55,"display_name":"Ken Chan"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1642244940,"creation_date":1642244612,"answer_id":70720838,"question_id":70718032,"body_markdown":"I am sorry that you are in the wrong path.  \r\n\r\nIf `FileService` is just an interface, you do not need to test it.\r\n\r\nIf `FileService` is an implementation, you should create an actual instance to test it but not a mock.\r\n\r\nThe mock is only useful for the direct dependencies of the class that you are testing (i.e `FileSerivice`) such that you can easily stub the result when calling methods on these dependencies and verify if the class you are testing interacts with them correctly. (i.e. call the correct methods with the correct parameters etc.)\r\n\r\nAs I cannot see `FileSerivice` &#39;s source codes , but if `UserPrincipal` and `User` are not its dependencies , it does not make sense to mock them.\r\n\r\nAlso as mentioned by other in the comment, as you are not doing the integration testing with some Spring framework stuff, you should simply rewrite your test as a plain Mockito test which is simpler and run faster : \r\n\r\n``` java\r\n@ExtendWith(MockitoExtension.class)\r\npublic class FileServiceImplTest {\r\n\r\n\r\n}\r\n```","title":"Java writing Spring Boot Unit Tests","body":"<p>I am sorry that you are in the wrong path.</p>\n<p>If <code>FileService</code> is just an interface, you do not need to test it.</p>\n<p>If <code>FileService</code> is an implementation, you should create an actual instance to test it but not a mock.</p>\n<p>The mock is only useful for the direct dependencies of the class that you are testing (i.e <code>FileSerivice</code>) such that you can easily stub the result when calling methods on these dependencies and verify if the class you are testing interacts with them correctly. (i.e. call the correct methods with the correct parameters etc.)</p>\n<p>As I cannot see <code>FileSerivice</code> 's source codes , but if <code>UserPrincipal</code> and <code>User</code> are not its dependencies , it does not make sense to mock them.</p>\n<p>Also as mentioned by other in the comment, as you are not doing the integration testing with some Spring framework stuff, you should simply rewrite your test as a plain Mockito test which is simpler and run faster :</p>\n<pre class=\"lang-java prettyprint-override\"><code>@ExtendWith(MockitoExtension.class)\npublic class FileServiceImplTest {\n\n\n}\n</code></pre>\n"}],"owner":{"account_id":22746087,"reputation":21,"user_id":16906859,"display_name":"user16906859"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":534,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1642244940,"creation_date":1642207672,"question_id":70718032,"body_markdown":"I was wondering if I wrote this test in a proper way to mock a real situation. Can you please provide any feedback?\r\n\r\nI&#39;m using Mockito in a Spring Boot environment. I&#39;m new to Mockito and other mocking techniques, but I want to know if I&#39;m on the right path or not.\r\n```java\r\n@RunWith(MockitoJUnitRunner.class)\r\n@SpringBootTest\r\nclass FileServiceImplTest {\r\n    @Mock\r\n    private UserPrincipal userPrincipal;\r\n    @Mock\r\n    private User user;\r\n    @Mock\r\n    private FileService fileService;\r\n\r\n    @BeforeEach\r\n    void initialize() {\r\n        user = new User(&quot;testUser&quot;, &quot;test@email.com&quot;, &quot;testPassword&quot;);\r\n        user.setId(1L);\r\n        user.setRoles(List.of(Role.User));\r\n        userPrincipal = UserPrincipal.create(user);\r\n    }\r\n\r\n    @Test\r\n    void usedMockUpsShouldNotBeNull() {\r\n        assertAll(&quot;All mock instaces of classes should not be null&quot;,\r\n                () -&gt; assertNotNull(fileService),\r\n                () -&gt; assertNotNull(userPrincipal),\r\n                () -&gt; assertNotNull(user)\r\n        );\r\n    }\r\n\r\n    @Test\r\n    void collectionOfFilesShouldChangeAfterNewFileIsAdded_Mockito() throws ExecutionException, InterruptedException {\r\n        Image image = createImageFile();\r\n        List&lt;? super File&gt; files = createFilesCollection();\r\n\r\n        doReturn(files).when(fileService).getAll(userPrincipal);\r\n        int initialSize = fileService.getAll(userPrincipal).size();\r\n\r\n        fileService.save(image);\r\n        doReturn(files.add(image)).when(fileService).save(image);\r\n        int newSize = fileService.getAll(userPrincipal).size();\r\n\r\n        assertNotEquals(newSize, initialSize);\r\n        Mockito.verify(fileService, atLeast(2)).getAll(userPrincipal);\r\n        Mockito.verify(fileService).save(image);\r\n    }\r\n}\r\n```","title":"Java writing Spring Boot Unit Tests","body":"<p>I was wondering if I wrote this test in a proper way to mock a real situation. Can you please provide any feedback?</p>\n<p>I'm using Mockito in a Spring Boot environment. I'm new to Mockito and other mocking techniques, but I want to know if I'm on the right path or not.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@RunWith(MockitoJUnitRunner.class)\n@SpringBootTest\nclass FileServiceImplTest {\n    @Mock\n    private UserPrincipal userPrincipal;\n    @Mock\n    private User user;\n    @Mock\n    private FileService fileService;\n\n    @BeforeEach\n    void initialize() {\n        user = new User(&quot;testUser&quot;, &quot;test@email.com&quot;, &quot;testPassword&quot;);\n        user.setId(1L);\n        user.setRoles(List.of(Role.User));\n        userPrincipal = UserPrincipal.create(user);\n    }\n\n    @Test\n    void usedMockUpsShouldNotBeNull() {\n        assertAll(&quot;All mock instaces of classes should not be null&quot;,\n                () -&gt; assertNotNull(fileService),\n                () -&gt; assertNotNull(userPrincipal),\n                () -&gt; assertNotNull(user)\n        );\n    }\n\n    @Test\n    void collectionOfFilesShouldChangeAfterNewFileIsAdded_Mockito() throws ExecutionException, InterruptedException {\n        Image image = createImageFile();\n        List&lt;? super File&gt; files = createFilesCollection();\n\n        doReturn(files).when(fileService).getAll(userPrincipal);\n        int initialSize = fileService.getAll(userPrincipal).size();\n\n        fileService.save(image);\n        doReturn(files.add(image)).when(fileService).save(image);\n        int newSize = fileService.getAll(userPrincipal).size();\n\n        assertNotEquals(newSize, initialSize);\n        Mockito.verify(fileService, atLeast(2)).getAll(userPrincipal);\n        Mockito.verify(fileService).save(image);\n    }\n}\n</code></pre>\n"},{"tags":["java","xml","xpath"],"comments":[{"owner":{"account_id":2562742,"reputation":5917,"user_id":2851311,"display_name":"hfontanez"},"score":0,"creation_date":1642191578,"post_id":70715916,"comment_id":125014491,"body_markdown":"Does this help? https://stackoverflow.com/questions/5239685/xml-namespace-breaking-my-xpath","body":"Does this help? <a href=\"https://stackoverflow.com/questions/5239685/xml-namespace-breaking-my-xpath\" title=\"xml namespace breaking my xpath\">stackoverflow.com/questions/5239685/&hellip;</a>"},{"owner":{"account_id":117317,"reputation":11245,"user_id":307297,"accept_rate":62,"display_name":"chris01"},"score":0,"creation_date":1642191862,"post_id":70715916,"comment_id":125014578,"body_markdown":"Sorry, but no. It is working the way I expect it in other languages. But I do not get it in Java.","body":"Sorry, but no. It is working the way I expect it in other languages. But I do not get it in Java."},{"owner":{"account_id":2562742,"reputation":5917,"user_id":2851311,"display_name":"hfontanez"},"score":0,"creation_date":1642191998,"post_id":70715916,"comment_id":125014620,"body_markdown":"If you examine the link I sent you in detail, you should notice that this line in your code, `snc.bindNamespaceUri (&quot;aaa&quot;, &quot;http://aaa&quot;);`, appears to be incorrect. The URL on that call should be the URL where that namespace is defined.","body":"If you examine the link I sent you in detail, you should notice that this line in your code, <code>snc.bindNamespaceUri (&quot;aaa&quot;, &quot;http:&#47;&#47;aaa&quot;);</code>, appears to be incorrect. The URL on that call should be the URL where that namespace is defined."},{"owner":{"account_id":2562742,"reputation":5917,"user_id":2851311,"display_name":"hfontanez"},"score":0,"creation_date":1642192152,"post_id":70715916,"comment_id":125014660,"body_markdown":"If you were binding the namespace in the actual XML, you would need to provide the URL where `table` is defined (for `aaa` namespace). That same URL is needed on the Java side.","body":"If you were binding the namespace in the actual XML, you would need to provide the URL where <code>table</code> is defined (for <code>aaa</code> namespace). That same URL is needed on the Java side."},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":4,"creation_date":1642193758,"post_id":70715916,"comment_id":125015110,"body_markdown":"Remember to call [setNamespaceAware(true)](https://docs.oracle.com/en/java/javase/17/docs/api/java.xml/javax/xml/parsers/DocumentBuilderFactory.html#setNamespaceAware(boolean)) on your DocumentBuilderFactory.  It’s false by default.","body":"Remember to call <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.xml/javax/xml/parsers/DocumentBuilderFactory.html#setNamespaceAware(boolean)\" rel=\"nofollow noreferrer\">setNamespaceAware(true)</a> on your DocumentBuilderFactory.  It’s false by default."},{"owner":{"account_id":117317,"reputation":11245,"user_id":307297,"accept_rate":62,"display_name":"chris01"},"score":0,"creation_date":1642198228,"post_id":70715916,"comment_id":125016288,"body_markdown":"Thank! That does the trick!","body":"Thank! That does the trick!"}],"owner":{"account_id":117317,"reputation":11245,"user_id":307297,"accept_rate":62,"display_name":"chris01"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1642196257,"answer_count":0,"score":1,"last_activity_date":1642244416,"creation_date":1642190231,"question_id":70715916,"body_markdown":"I try to use XPath with namespaces, but I do not get it going the way I would expect it.\r\n\r\n    import org.springframework.util.xml.*;\r\n    import javax.xml.namespace.*;\r\n    import javax.xml.parsers.*;\r\n    import javax.xml.xpath.*;\r\n    \r\n\r\n\r\n    public String foo () throws Exception\r\n\t{\t\r\n\t\tString xml = &quot;&lt;aaa:test xmlns:aaa=\\&quot;http://aaa\\&quot;&gt;123&lt;/aaa:test&gt;&quot;;\r\n\t\t\r\n\t\t\r\n\t\t\r\n\t\tDocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance ();\r\n\t\tDocumentBuilder db = dbf.newDocumentBuilder ();\r\n\t\tDocument doc = db.parse (new ByteArrayInputStream (xml.getBytes()));\t//new ByteArrayInputStream (bodies.get (0)));\r\n\t\t\r\n\t\t\r\n\t\t\r\n\t\tXPath xp = XPathFactory.newInstance ().newXPath ();\r\n\t\tSimpleNamespaceContext snc = new SimpleNamespaceContext ();\r\n\t\tsnc.bindNamespaceUri (&quot;aaa&quot;, &quot;http://aaa&quot;);\r\n\t\txp.setNamespaceContext (snc);\r\n\t\tString str1 = (String) xp.compile (&quot;/test&quot;).evaluate (doc, XPathConstants.STRING);\r\n\t\tString str2 = (String) xp.compile (&quot;/aaa:test&quot;).evaluate (doc, XPathConstants.STRING);\r\n\t\tSystem.out.println (&quot;str1=&quot;+str1 + &quot;    str2=&quot;+str2);\r\n        // output: str1=123    str2=\r\n    \r\n\t\t\r\n\t\t\r\n\t\t\r\n\t\txp = XPathFactory.newInstance ().newXPath ();\r\n\t\txp.setNamespaceContext(new NamespaceContext() \r\n\t\t{\r\n\t\t\tpublic String getNamespaceURI(String arg0)\r\n\t\t\t{\r\n\t\t\t\tif (&quot;aaa&quot;.equals(arg0)) \r\n\t\t\t\t{\r\n          \t\t\t  return &quot;http://aaa&quot;;\r\n        \t\t}\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\tpublic String getPrefix(String arg0) {\t\r\n\t\t\t    return null;\r\n\t\t\t}\r\n\t\t\tpublic Iterator&lt;String&gt; getPrefixes(String arg0) {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t    });\r\n\t\tstr1 = (String) xp.compile (&quot;/test&quot;).evaluate (doc, XPathConstants.STRING);\r\n\t\tstr2 = (String) xp.compile (&quot;/aaa:test&quot;).evaluate (doc, XPathConstants.STRING);\r\n\t\tSystem.out.println (&quot;str1=&quot;+str1 + &quot;    str2=&quot;+str2);\r\n        // output: str1=123    str2=\r\n    }\r\n\t\r\nI would - at least - expect str2 to be equal to str1. \r\nOr better str2 with the value 123 and str1 with nothing - if namespaces are in use.\r\n\r\nBut what I get is str1 with the value and str2 with nothing.\r\n\r\nI expect to use the namespace in the XPath query if one is in use. but it does not get me the value.\r\n\r\nAs you can see, I tried to define the namespace in two different ways, but none seems to be OK.\r\n","title":"XPath with namespace does not get the expected result","body":"<p>I try to use XPath with namespaces, but I do not get it going the way I would expect it.</p>\n<pre><code>import org.springframework.util.xml.*;\nimport javax.xml.namespace.*;\nimport javax.xml.parsers.*;\nimport javax.xml.xpath.*;\n\n\n\npublic String foo () throws Exception\n{   \n    String xml = &quot;&lt;aaa:test xmlns:aaa=\\&quot;http://aaa\\&quot;&gt;123&lt;/aaa:test&gt;&quot;;\n    \n    \n    \n    DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance ();\n    DocumentBuilder db = dbf.newDocumentBuilder ();\n    Document doc = db.parse (new ByteArrayInputStream (xml.getBytes()));    //new ByteArrayInputStream (bodies.get (0)));\n    \n    \n    \n    XPath xp = XPathFactory.newInstance ().newXPath ();\n    SimpleNamespaceContext snc = new SimpleNamespaceContext ();\n    snc.bindNamespaceUri (&quot;aaa&quot;, &quot;http://aaa&quot;);\n    xp.setNamespaceContext (snc);\n    String str1 = (String) xp.compile (&quot;/test&quot;).evaluate (doc, XPathConstants.STRING);\n    String str2 = (String) xp.compile (&quot;/aaa:test&quot;).evaluate (doc, XPathConstants.STRING);\n    System.out.println (&quot;str1=&quot;+str1 + &quot;    str2=&quot;+str2);\n    // output: str1=123    str2=\n\n    \n    \n    \n    xp = XPathFactory.newInstance ().newXPath ();\n    xp.setNamespaceContext(new NamespaceContext() \n    {\n        public String getNamespaceURI(String arg0)\n        {\n            if (&quot;aaa&quot;.equals(arg0)) \n            {\n                  return &quot;http://aaa&quot;;\n            }\n            return null;\n        }\n        public String getPrefix(String arg0) {  \n            return null;\n        }\n        public Iterator&lt;String&gt; getPrefixes(String arg0) {\n            return null;\n        }\n    });\n    str1 = (String) xp.compile (&quot;/test&quot;).evaluate (doc, XPathConstants.STRING);\n    str2 = (String) xp.compile (&quot;/aaa:test&quot;).evaluate (doc, XPathConstants.STRING);\n    System.out.println (&quot;str1=&quot;+str1 + &quot;    str2=&quot;+str2);\n    // output: str1=123    str2=\n}\n</code></pre>\n<p>I would - at least - expect str2 to be equal to str1.\nOr better str2 with the value 123 and str1 with nothing - if namespaces are in use.</p>\n<p>But what I get is str1 with the value and str2 with nothing.</p>\n<p>I expect to use the namespace in the XPath query if one is in use. but it does not get me the value.</p>\n<p>As you can see, I tried to define the namespace in two different ways, but none seems to be OK.</p>\n"},{"tags":["java","swing","jlabel"],"comments":[{"owner":{"account_id":108033,"reputation":17201,"user_id":286934,"display_name":"Progman"},"score":0,"creation_date":1642007085,"post_id":70685509,"comment_id":124959799,"body_markdown":"Are the `JLabel` instances *directly* on the `frame` component or are they placed inside other panels, which are added to the `frame` component? The list returned by `getComponents()` is not recursively.","body":"Are the <code>JLabel</code> instances <i>directly</i> on the <code>frame</code> component or are they placed inside other panels, which are added to the <code>frame</code> component? The list returned by <code>getComponents()</code> is not recursively."},{"owner":{"account_id":108033,"reputation":17201,"user_id":286934,"display_name":"Progman"},"score":0,"creation_date":1642007120,"post_id":70685509,"comment_id":124959815,"body_markdown":"See other questions like https://stackoverflow.com/questions/6495769/how-to-get-all-elements-inside-a-jframe","body":"See other questions like <a href=\"https://stackoverflow.com/questions/6495769/how-to-get-all-elements-inside-a-jframe\" title=\"how to get all elements inside a jframe\">stackoverflow.com/questions/6495769/&hellip;</a>"},{"owner":{"account_id":667308,"reputation":46349,"user_id":1161878,"accept_rate":81,"display_name":"Gene"},"score":0,"creation_date":1642007389,"post_id":70685509,"comment_id":124959923,"body_markdown":"Use your tools fully. Set a breakpoint in the debugger at the if statement.  Set a display on i so you can inspect the actual type, not what a hover display decides to depict them as. nb: The important thing in play here is learning how dig at problems like this yourself.","body":"Use your tools fully. Set a breakpoint in the debugger at the if statement.  Set a display on i so you can inspect the actual type, not what a hover display decides to depict them as. nb: The important thing in play here is learning how dig at problems like this yourself."},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":1,"creation_date":1642007398,"post_id":70685509,"comment_id":124959927,"body_markdown":"Add a `System.out.println(i.getClass())` statement to your code to set what the components are. Components are NOT added directly to the frame. They are added to the content pane of the frame. See: [Using Top Level Containers](https://docs.oracle.com/javase/tutorial/uiswing/components/toplevel.html) for the basic structure of a frame. If you really need access to the labels why not add them to the ArrayList when you add them to the layered pane?","body":"Add a <code>System.out.println(i.getClass())</code> statement to your code to set what the components are. Components are NOT added directly to the frame. They are added to the content pane of the frame. See: <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/components/toplevel.html\" rel=\"nofollow noreferrer\">Using Top Level Containers</a> for the basic structure of a frame. If you really need access to the labels why not add them to the ArrayList when you add them to the layered pane?"},{"owner":{"account_id":23686915,"reputation":11,"user_id":17711736,"display_name":"Jan Jon&#225;š"},"score":0,"creation_date":1642007704,"post_id":70685509,"comment_id":124960061,"body_markdown":"@Progman they are added to the LayeredPane","body":"@Progman they are added to the LayeredPane"},{"owner":{"account_id":23686915,"reputation":11,"user_id":17711736,"display_name":"Jan Jon&#225;š"},"score":0,"creation_date":1642008136,"post_id":70685509,"comment_id":124960252,"body_markdown":"@camickr there is around twenty labels that were generated via the eclipse windowbuilder, I know that I could just go to each JLabel declaration and add them to the list there, but I plan on making even more frames with even more JLabels, so I just wanted to see if I could just collect all of them into one place","body":"@camickr there is around twenty labels that were generated via the eclipse windowbuilder, I know that I could just go to each JLabel declaration and add them to the list there, but I plan on making even more frames with even more JLabels, so I just wanted to see if I could just collect all of them into one place"},{"owner":{"account_id":2507550,"reputation":10975,"user_id":2180785,"accept_rate":90,"display_name":"Frakcool"},"score":1,"creation_date":1642012384,"post_id":70685509,"comment_id":124961934,"body_markdown":"Your last edit you could post it as an answer instead, and removing the insult to yourself, then accept the answer to mark it as solved","body":"Your last edit you could post it as an answer instead, and removing the insult to yourself, then accept the answer to mark it as solved"}],"answers":[{"tags":[],"owner":{"account_id":23686915,"reputation":11,"user_id":17711736,"display_name":"Jan Jon&#225;š"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1642244046,"creation_date":1642101492,"answer_id":70701935,"question_id":70685509,"body_markdown":"    ArrayList&lt;JLabel&gt; labelList = new ArrayList&lt;&gt;();\r\n    \r\n    for(Component i : layeredPane.getComponents() ) { //layeredPane being the name of the JLayeredPane, suprisingly\r\n\r\n            labelList.add((JLabel) i); \r\n    }\r\n    \r\n    System.out.println(labelList.toArray().length);\r\n\r\n\r\nis the solution. It didn&#39;t work due to me trying to grab everything from the frame, but the only thing on the frame was the layered Pane, where all the other components were.","title":"Why does a JLabel Component not convert into a JLabel, yet doesn&#39;t give any errors?","body":"<pre><code>ArrayList&lt;JLabel&gt; labelList = new ArrayList&lt;&gt;();\n\nfor(Component i : layeredPane.getComponents() ) { //layeredPane being the name of the JLayeredPane, suprisingly\n\n        labelList.add((JLabel) i); \n}\n\nSystem.out.println(labelList.toArray().length);\n</code></pre>\n<p>is the solution. It didn't work due to me trying to grab everything from the frame, but the only thing on the frame was the layered Pane, where all the other components were.</p>\n"}],"owner":{"account_id":23686915,"reputation":11,"user_id":17711736,"display_name":"Jan Jon&#225;š"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":63,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":70701935,"answer_count":1,"score":1,"last_activity_date":1642244046,"creation_date":1642006919,"question_id":70685509,"body_markdown":"Okay, so I have this JFrame frame and I&#39;m trying to load all of the components into a JLabel ArrayList. the frame has a LayeredPane and around 20 JLabels scattered across. Some of them have a different z-index/layer index\r\n\r\n\r\n\r\n       ArrayList&lt;JLabel&gt; labelList = new ArrayList&lt;&gt;();\r\n\t\t\r\n\t\tfor(Component i : frame.getComponents() ) {\r\n\t\t\t\r\n\t\t\t\r\n\t\t\tif (i instanceof JLabel) {\r\n\t\t\t\tlabelList.add((JLabel) i);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tSystem.out.println(labelList);\r\n\r\n\r\nbut when I try to print out the ArrayList, it just prints an empty Array.\r\n\r\nWhen I hover over the .getComponents(), it actually shows that all of the JLabels are in fact contained in the method.\r\n\r\nAnd it doesn&#39;t give out any errors either, like Component not being able to convert to JLabel etc. \r\n\r\n\r\n\r\nedit: I did as @camickr suggested, and it show that only the contentPane is grabbed. I probably misunderstood how the .getComponents() works.\r\n\r\n\r\nedit2 just changed the code to: \r\n\r\n        ArrayList&lt;JLabel&gt; labelList = new ArrayList&lt;&gt;();\r\n\t\t\r\n\t\tfor(Component i : layeredPane.getComponents() ) { //layeredPane being the name of the JLayeredPane, suprisingly\r\n\r\n\t\t\t\tlabelList.add((JLabel) i); \r\n\t\t}\r\n\t\t\r\n\t\tSystem.out.println(labelList.toArray().length);\r\n\r\nAnd it works.\r\nI am a very dumb indiviudal.","title":"Why does a JLabel Component not convert into a JLabel, yet doesn&#39;t give any errors?","body":"<p>Okay, so I have this JFrame frame and I'm trying to load all of the components into a JLabel ArrayList. the frame has a LayeredPane and around 20 JLabels scattered across. Some of them have a different z-index/layer index</p>\n<pre><code>   ArrayList&lt;JLabel&gt; labelList = new ArrayList&lt;&gt;();\n    \n    for(Component i : frame.getComponents() ) {\n        \n        \n        if (i instanceof JLabel) {\n            labelList.add((JLabel) i);\n        }\n    }\n    \n    System.out.println(labelList);\n</code></pre>\n<p>but when I try to print out the ArrayList, it just prints an empty Array.</p>\n<p>When I hover over the .getComponents(), it actually shows that all of the JLabels are in fact contained in the method.</p>\n<p>And it doesn't give out any errors either, like Component not being able to convert to JLabel etc.</p>\n<p>edit: I did as @camickr suggested, and it show that only the contentPane is grabbed. I probably misunderstood how the .getComponents() works.</p>\n<p>edit2 just changed the code to:</p>\n<pre><code>    ArrayList&lt;JLabel&gt; labelList = new ArrayList&lt;&gt;();\n    \n    for(Component i : layeredPane.getComponents() ) { //layeredPane being the name of the JLayeredPane, suprisingly\n\n            labelList.add((JLabel) i); \n    }\n    \n    System.out.println(labelList.toArray().length);\n</code></pre>\n<p>And it works.\nI am a very dumb indiviudal.</p>\n"},{"tags":["java","android"],"answers":[{"tags":[],"owner":{"account_id":15343899,"reputation":321,"user_id":11069991,"display_name":"Shein Arcium"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1599185840,"creation_date":1599185507,"answer_id":63733897,"question_id":63280870,"body_markdown":"After you set `button-enum, piece-place-enum, and button-place-enum` in .xml or .java, you  have to initialize the builder for each button in your activity.\r\n\r\nCreate an array of images to show on each boomButton (unless you want them to be the same)\r\n\r\n`Integer[] bmbImages = {R.drawable.ic_image, R.drawable.ic_image2, R.drawable.ic_image3}`\r\n\r\nCreate an array for the text inside\r\n\r\n`String[] bmbText = {getString(R.string.your_string), getString(R.string.text2), getString(R.string.text3)};`\r\n\r\nLoop through each boomButton to customize\r\n\r\n    for (int i = 0; i &lt; developer_options.getPiecePlaceEnum().pieceNumber(); i++) {\r\n         HamButton.Builder builder = new HamButton.Builder()\r\n            .normalImageRes(bmbImages[i])\r\n            .normalTextRes(bmbText[i])\r\n            .subNormalTextRes(&quot;array of subtext here&quot;);\r\n\r\n         developer_options.addBuilder(builder);}\r\n\r\n\r\nHere is the link where I got this information from:\r\n[BoomMenu on GitHub][1]\r\n\r\n\r\n  [1]: https://github.com/Nightonke/BoomMenu/wiki/Ham-Button","title":"BoomMenu not showing","body":"<p>After you set <code>button-enum, piece-place-enum, and button-place-enum</code> in .xml or .java, you  have to initialize the builder for each button in your activity.</p>\n<p>Create an array of images to show on each boomButton (unless you want them to be the same)</p>\n<p><code>Integer[] bmbImages = {R.drawable.ic_image, R.drawable.ic_image2, R.drawable.ic_image3}</code></p>\n<p>Create an array for the text inside</p>\n<p><code>String[] bmbText = {getString(R.string.your_string), getString(R.string.text2), getString(R.string.text3)};</code></p>\n<p>Loop through each boomButton to customize</p>\n<pre><code>for (int i = 0; i &lt; developer_options.getPiecePlaceEnum().pieceNumber(); i++) {\n     HamButton.Builder builder = new HamButton.Builder()\n        .normalImageRes(bmbImages[i])\n        .normalTextRes(bmbText[i])\n        .subNormalTextRes(&quot;array of subtext here&quot;);\n\n     developer_options.addBuilder(builder);}\n</code></pre>\n<p>Here is the link where I got this information from:\n<a href=\"https://github.com/Nightonke/BoomMenu/wiki/Ham-Button\" rel=\"nofollow noreferrer\">BoomMenu on GitHub</a></p>\n"}],"owner":{"account_id":11547848,"reputation":1276,"user_id":8461344,"display_name":"Code Demon"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":174,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":63733897,"answer_count":1,"score":0,"last_activity_date":1642242216,"creation_date":1596706887,"question_id":63280870,"body_markdown":"I am trying to create a boom Menu.my device is an android 10.Am using BoomMenu 2.1.1 \r\nthis is my xml code .Problem is that my activity crushes when opened with the below error \r\n\r\n     java.lang.IndexOutOfBoundsException: Index: 0, Size: 0\r\n        at java.util.ArrayList.get(ArrayList.java:437)\r\n        at com.nightonke.boommenu.BoomMenuButton.createPieces(BoomMenuButton.java:408)\r\n        at com.nightonke.boommenu.BoomMenuButton.doLayoutJobs(BoomMenuButton.java:390)\r\n        at com.nightonke.boommenu.BoomMenuButton.onLayout(BoomMenuButton.java:376)\r\n        at android.view.View.layout(View.java:22090)\r\n        at android.view.ViewGroup.layout(ViewGroup.java:6358)\r\n        at android.widget.RelativeLayout.onLayout(RelativeLayout.java:1103)\r\n        at android.view.View.layout(View.java:22090)\r\n        at android.view.ViewGroup.layout(ViewGroup.java:6358)\r\n        at android.support.v4.view.ViewPager.onLayout(ViewPager.java:1775)\r\n        at android.view.View.layout(View.java:22090)\r\n        at android.view.ViewGroup.layout(ViewGroup.java:6358)\r\n        at android.support.design.widget.HeaderScrollingViewBehavior.layoutChild(HeaderScrollingViewBehavior.java:142)\r\n        at android.support.design.widget.ViewOffsetBehavior.onLayoutChild(ViewOffsetBehavior.java:41)\r\n        at android.support.design.widget.AppBarLayout$ScrollingViewBehavior.onLayoutChild(AppBarLayout.java:1556)\r\n        at android.support.design.widget.CoordinatorLayout.onLayout(CoordinatorLayout.java:888)\r\n        at android.view.View.layout(View.java:22090)\r\n        at android.view.ViewGroup.layout(ViewGroup.java:6358)\r\n        at android.widget.FrameLayout.layoutChildren(FrameLayout.java:332)\r\n        at android.widget.FrameLayout.onLayout(FrameLayout.java:270)\r\n        at android.view.View.layout(View.java:22090)\r\n        at android.view.ViewGroup.layout(ViewGroup.java:6358)\r\n        at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1829)\r\n        at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1673)\r\n        at android.widget.LinearLayout.onLayout(LinearLayout.java:1582)\r\n        at android.view.View.layout(View.java:22090)\r\n        at android.view.ViewGroup.layout(ViewGroup.java:6358)\r\n        at android.widget.FrameLayout.layoutChildren(FrameLayout.java:332)\r\n        at android.widget.FrameLayout.onLayout(FrameLayout.java:270)\r\n        at android.view.View.layout(View.java:22090)\r\n        at android.view.ViewGroup.layout(ViewGroup.java:6358)\r\n        at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1829)\r\n        at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1673)\r\n        at android.widget.LinearLayout.onLayout(LinearLayout.java:1582)\r\n        at android.view.View.layout(View.java:22090)\r\n        at android.view.ViewGroup.layout(ViewGroup.java:6358)\r\n        at android.widget.FrameLayout.layoutChildren(FrameLayout.java:332)\r\n        at android.widget.FrameLayout.onLayout(FrameLayout.java:270)\r\n        at com.android.internal.policy.DecorView.onLayout(DecorView.java:783)\r\n        at android.view.View.layout(View.java:22090)\r\n        at android.view.ViewGroup.layout(ViewGroup.java:6358)\r\n        at android.view.ViewRootImpl.performLayout(ViewRootImpl.java:3239)\r\n        at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:2735)\r\n        at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:1821)\r\n        at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:7916)\r\n        at android.view.Choreographer$CallbackRecord.run(Choreographer.java:980)\r\n        at android.view.Choreographer.doCallbacks(Choreographer.java:804)\r\n        at android.view.Choreographer.doFrame(Choreographer.java:739)\r\n        at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:965)\r\n        at android.os.Handler.handleCallback(Handler.java:883)\r\n        at android.os.Handler.dispatchMessage(Handler.java:100)\r\n        at android.os.Looper.loop(Looper.java:264)\r\n\r\nBelow is my current xml and java code.I set `bmb_buttonEnum`  and `bmb_piecePlaceEnum` and `bmb_buttonPlaceEnum` from my activity(Even without setting or instantiating the BoomMenuButton,still crushes on openint the activity)\r\n\r\n     &lt;com.nightonke.boommenu.BoomMenuButton\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:layout_gravity=&quot;bottom|end&quot;\r\n        android:layout_alignParentBottom=&quot;true&quot;\r\n        android:layout_alignParentRight=&quot;true&quot;\r\n        android:layout_margin=&quot;@dimen/fab_margin&quot;\r\n         android:id=&quot;@+id/bmb&quot;\r\n\r\n       /&gt;\r\n\r\n    developer_options = (BoomMenuButton) rootView.findViewById(R.id.bmb);\r\n                    developer_options.setButtonEnum(ButtonEnum.Ham);\r\n                    developer_options.setPiecePlaceEnum(PiecePlaceEnum.HAM_3);\r\n                    developer_options.setButtonPlaceEnum(ButtonPlaceEnum.HAM_3);\r\n                    \r\n\r\ni had tried to use the below with nothing on the activity side but stil crushes\r\n\r\n        &lt;com.nightonke.boommenu.BoomMenuButton\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:layout_gravity=&quot;bottom|end&quot;\r\n        android:layout_alignParentBottom=&quot;true&quot;\r\n        android:layout_alignParentRight=&quot;true&quot;\r\n        android:layout_margin=&quot;@dimen/fab_margin&quot;\r\n        app:bmb_buttonEnum=&quot;ham&quot;\r\n        app:bmb_piecePlaceEnum=&quot;piecePlace_ham_4&quot;\r\n        app:bmb_buttonPlaceEnum=&quot;buttonPlace_ham_4&quot;\r\n        android:id=&quot;@+id/bmb&quot;\r\n        /&gt;\r\n","title":"BoomMenu not showing","body":"<p>I am trying to create a boom Menu.my device is an android 10.Am using BoomMenu 2.1.1\nthis is my xml code .Problem is that my activity crushes when opened with the below error</p>\n<pre><code> java.lang.IndexOutOfBoundsException: Index: 0, Size: 0\n    at java.util.ArrayList.get(ArrayList.java:437)\n    at com.nightonke.boommenu.BoomMenuButton.createPieces(BoomMenuButton.java:408)\n    at com.nightonke.boommenu.BoomMenuButton.doLayoutJobs(BoomMenuButton.java:390)\n    at com.nightonke.boommenu.BoomMenuButton.onLayout(BoomMenuButton.java:376)\n    at android.view.View.layout(View.java:22090)\n    at android.view.ViewGroup.layout(ViewGroup.java:6358)\n    at android.widget.RelativeLayout.onLayout(RelativeLayout.java:1103)\n    at android.view.View.layout(View.java:22090)\n    at android.view.ViewGroup.layout(ViewGroup.java:6358)\n    at android.support.v4.view.ViewPager.onLayout(ViewPager.java:1775)\n    at android.view.View.layout(View.java:22090)\n    at android.view.ViewGroup.layout(ViewGroup.java:6358)\n    at android.support.design.widget.HeaderScrollingViewBehavior.layoutChild(HeaderScrollingViewBehavior.java:142)\n    at android.support.design.widget.ViewOffsetBehavior.onLayoutChild(ViewOffsetBehavior.java:41)\n    at android.support.design.widget.AppBarLayout$ScrollingViewBehavior.onLayoutChild(AppBarLayout.java:1556)\n    at android.support.design.widget.CoordinatorLayout.onLayout(CoordinatorLayout.java:888)\n    at android.view.View.layout(View.java:22090)\n    at android.view.ViewGroup.layout(ViewGroup.java:6358)\n    at android.widget.FrameLayout.layoutChildren(FrameLayout.java:332)\n    at android.widget.FrameLayout.onLayout(FrameLayout.java:270)\n    at android.view.View.layout(View.java:22090)\n    at android.view.ViewGroup.layout(ViewGroup.java:6358)\n    at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1829)\n    at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1673)\n    at android.widget.LinearLayout.onLayout(LinearLayout.java:1582)\n    at android.view.View.layout(View.java:22090)\n    at android.view.ViewGroup.layout(ViewGroup.java:6358)\n    at android.widget.FrameLayout.layoutChildren(FrameLayout.java:332)\n    at android.widget.FrameLayout.onLayout(FrameLayout.java:270)\n    at android.view.View.layout(View.java:22090)\n    at android.view.ViewGroup.layout(ViewGroup.java:6358)\n    at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1829)\n    at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1673)\n    at android.widget.LinearLayout.onLayout(LinearLayout.java:1582)\n    at android.view.View.layout(View.java:22090)\n    at android.view.ViewGroup.layout(ViewGroup.java:6358)\n    at android.widget.FrameLayout.layoutChildren(FrameLayout.java:332)\n    at android.widget.FrameLayout.onLayout(FrameLayout.java:270)\n    at com.android.internal.policy.DecorView.onLayout(DecorView.java:783)\n    at android.view.View.layout(View.java:22090)\n    at android.view.ViewGroup.layout(ViewGroup.java:6358)\n    at android.view.ViewRootImpl.performLayout(ViewRootImpl.java:3239)\n    at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:2735)\n    at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:1821)\n    at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:7916)\n    at android.view.Choreographer$CallbackRecord.run(Choreographer.java:980)\n    at android.view.Choreographer.doCallbacks(Choreographer.java:804)\n    at android.view.Choreographer.doFrame(Choreographer.java:739)\n    at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:965)\n    at android.os.Handler.handleCallback(Handler.java:883)\n    at android.os.Handler.dispatchMessage(Handler.java:100)\n    at android.os.Looper.loop(Looper.java:264)\n</code></pre>\n<p>Below is my current xml and java code.I set <code>bmb_buttonEnum</code>  and <code>bmb_piecePlaceEnum</code> and <code>bmb_buttonPlaceEnum</code> from my activity(Even without setting or instantiating the BoomMenuButton,still crushes on openint the activity)</p>\n<pre><code> &lt;com.nightonke.boommenu.BoomMenuButton\n    android:layout_width=&quot;wrap_content&quot;\n    android:layout_height=&quot;wrap_content&quot;\n    android:layout_gravity=&quot;bottom|end&quot;\n    android:layout_alignParentBottom=&quot;true&quot;\n    android:layout_alignParentRight=&quot;true&quot;\n    android:layout_margin=&quot;@dimen/fab_margin&quot;\n     android:id=&quot;@+id/bmb&quot;\n\n   /&gt;\n\ndeveloper_options = (BoomMenuButton) rootView.findViewById(R.id.bmb);\n                developer_options.setButtonEnum(ButtonEnum.Ham);\n                developer_options.setPiecePlaceEnum(PiecePlaceEnum.HAM_3);\n                developer_options.setButtonPlaceEnum(ButtonPlaceEnum.HAM_3);\n                \n</code></pre>\n<p>i had tried to use the below with nothing on the activity side but stil crushes</p>\n<pre><code>    &lt;com.nightonke.boommenu.BoomMenuButton\n    android:layout_width=&quot;wrap_content&quot;\n    android:layout_height=&quot;wrap_content&quot;\n    android:layout_gravity=&quot;bottom|end&quot;\n    android:layout_alignParentBottom=&quot;true&quot;\n    android:layout_alignParentRight=&quot;true&quot;\n    android:layout_margin=&quot;@dimen/fab_margin&quot;\n    app:bmb_buttonEnum=&quot;ham&quot;\n    app:bmb_piecePlaceEnum=&quot;piecePlace_ham_4&quot;\n    app:bmb_buttonPlaceEnum=&quot;buttonPlace_ham_4&quot;\n    android:id=&quot;@+id/bmb&quot;\n    /&gt;\n</code></pre>\n"},{"tags":["java","command-line-interface","calculator"],"answers":[{"tags":[],"owner":{"account_id":19036830,"reputation":1,"user_id":13897759,"display_name":"Vaiker"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1642242165,"creation_date":1642242165,"answer_id":70720578,"question_id":70720423,"body_markdown":"I suppose it can&#39;t be done. I tried to solve the problem and this is a waste of time. If it helps, you can use special characters like &quot;\\b&quot; to delete the previous character or &quot;\\r&quot; to write from the beginning of the string. But when you press Enter, you can&#39;t change the previous line.","title":"How to add clear option to my command line calculator","body":"<p>I suppose it can't be done. I tried to solve the problem and this is a waste of time. If it helps, you can use special characters like &quot;\\b&quot; to delete the previous character or &quot;\\r&quot; to write from the beginning of the string. But when you press Enter, you can't change the previous line.</p>\n"}],"owner":{"account_id":20422824,"reputation":11,"user_id":14983461,"display_name":"JasonSizemore24"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":87,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1642405595,"answer_count":1,"score":0,"last_activity_date":1642242165,"creation_date":1642240798,"question_id":70720423,"body_markdown":"I am making a CLI calculator and I am trying to add a clear button but cannot figure out how to clear all the user input and start the display from the beginning. I tried using the reset method and that didn&#39;t seem to do the trick.\r\n\r\n     \r\n           \r\n\r\n            System.out.println(&quot;Enter any of the following:&quot;);\r\n            System.out.println(&quot; 1 2 3 4 5 6 7 8 9 &quot;);\r\n            System.out.println(&quot; + - * / = &quot;);\r\n            System.out.println(&quot;Enter AC to reset &quot;);\r\n\r\n            double firstNum = input.nextDouble();\r\n            input.nextLine();\r\n\r\n            if (input.equals(clear)) {\r\n                input.reset();\r\n\r\n            }\r\n            System.out.println(&quot;Display 1: &quot; + firstNum);\r\n            System.out.println(&quot;Display 2: &quot; + firstNum);\r\n\r\n            System.out.println(&quot;Operator: &quot;);\r\n            String operand = input.nextLine();\r\n\r\n            System.out.println(&quot;Display 1: &quot; + firstNum + &quot; &quot; + operand);\r\n            System.out.println(&quot;Display 2: &quot; + firstNum  );\r\n\r\n            if (operand.equals(&quot;=&quot;)) {\r\n                break;\r\n            }\r\n\r\n            System.out.println(&quot;Enter your next number: &quot;);\r\n            double secondNum = input.nextDouble();\r\n            input.nextLine();\r\n\r\n            calculate(firstNum, operand, secondNum);\r\n\r\n            System.out.println(&quot;Display 1: &quot; + firstNum + &quot; &quot; + operand + &quot; &quot; + secondNum );\r\n            firstNum = answer;\r\n            System.out.println(&quot;Display 2: &quot; + answer);\r\n\r\n\r\n             }\r\n              System.out.println(&quot;Answer: &quot; + answer);\r\n            }\r\n \r\n    ","title":"How to add clear option to my command line calculator","body":"<p>I am making a CLI calculator and I am trying to add a clear button but cannot figure out how to clear all the user input and start the display from the beginning. I tried using the reset method and that didn't seem to do the trick.</p>\n<pre><code>        System.out.println(&quot;Enter any of the following:&quot;);\n        System.out.println(&quot; 1 2 3 4 5 6 7 8 9 &quot;);\n        System.out.println(&quot; + - * / = &quot;);\n        System.out.println(&quot;Enter AC to reset &quot;);\n\n        double firstNum = input.nextDouble();\n        input.nextLine();\n\n        if (input.equals(clear)) {\n            input.reset();\n\n        }\n        System.out.println(&quot;Display 1: &quot; + firstNum);\n        System.out.println(&quot;Display 2: &quot; + firstNum);\n\n        System.out.println(&quot;Operator: &quot;);\n        String operand = input.nextLine();\n\n        System.out.println(&quot;Display 1: &quot; + firstNum + &quot; &quot; + operand);\n        System.out.println(&quot;Display 2: &quot; + firstNum  );\n\n        if (operand.equals(&quot;=&quot;)) {\n            break;\n        }\n\n        System.out.println(&quot;Enter your next number: &quot;);\n        double secondNum = input.nextDouble();\n        input.nextLine();\n\n        calculate(firstNum, operand, secondNum);\n\n        System.out.println(&quot;Display 1: &quot; + firstNum + &quot; &quot; + operand + &quot; &quot; + secondNum );\n        firstNum = answer;\n        System.out.println(&quot;Display 2: &quot; + answer);\n\n\n         }\n          System.out.println(&quot;Answer: &quot; + answer);\n        }\n</code></pre>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":212417,"reputation":43624,"user_id":465223,"accept_rate":75,"display_name":"dunni"},"score":0,"creation_date":1642185736,"post_id":70713748,"comment_id":125012598,"body_markdown":"Can you try and remove the ComponentScan annotation with the a.b.c package? I think this might override the Spring Boot default configuration so that your AppConfig class is now not recognized correctly anymore.","body":"Can you try and remove the ComponentScan annotation with the a.b.c package? I think this might override the Spring Boot default configuration so that your AppConfig class is now not recognized correctly anymore."},{"owner":{"account_id":81495,"reputation":3962,"user_id":229743,"display_name":"Taylor"},"score":0,"creation_date":1642187103,"post_id":70713748,"comment_id":125013070,"body_markdown":"Is your config getting invoked?  add a breakpoint in your `englishDictionary` method and see if it&#39;s invoked.","body":"Is your config getting invoked?  add a breakpoint in your <code>englishDictionary</code> method and see if it&#39;s invoked."},{"owner":{"account_id":9064433,"reputation":568,"user_id":6749813,"display_name":"S.Tushinov"},"score":0,"creation_date":1642196427,"post_id":70713748,"comment_id":125015813,"body_markdown":"Can you please send us your package structure. I&#39;m asking because the only reason I see this failing is that your `AppConfig` class is not in the same package(or under the same package) as your `Main` class.","body":"Can you please send us your package structure. I&#39;m asking because the only reason I see this failing is that your <code>AppConfig</code> class is not in the same package(or under the same package) as your <code>Main</code> class."}],"answers":[{"tags":[],"owner":{"account_id":9064433,"reputation":568,"user_id":6749813,"display_name":"S.Tushinov"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1642197366,"creation_date":1642197366,"answer_id":70716957,"question_id":70713748,"body_markdown":"Your `AppConfig` class is not getting picked up by the Spring context and this is why you&#39;re receiving this exception. Please verify that your `AppConfig` class is in the same (or under the same) package as your `Main` class.\r\n\r\nIn other words, if your `Main` class is in package `com.example.demo` but your `AppConfig` class is in `com.example.beans` your Spring application will fail to start.","title":"Injecting a non-spring object into a spring project","body":"<p>Your <code>AppConfig</code> class is not getting picked up by the Spring context and this is why you're receiving this exception. Please verify that your <code>AppConfig</code> class is in the same (or under the same) package as your <code>Main</code> class.</p>\n<p>In other words, if your <code>Main</code> class is in package <code>com.example.demo</code> but your <code>AppConfig</code> class is in <code>com.example.beans</code> your Spring application will fail to start.</p>\n"},{"tags":[],"owner":{"account_id":9625696,"reputation":51,"user_id":7145392,"display_name":"Udit kaushik"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1642241104,"creation_date":1642241104,"answer_id":70720465,"question_id":70713748,"body_markdown":"From my perspective the better solution would be to have @Component(from Spring) annotation written at the class level.\r\n\r\n    package a.b.c;\r\n        @Component\r\n        public class EnglishDictionary implements Dictionary {\r\n    }\r\n    \r\n    package a.b.c;\r\n        @Component\r\n        public class FrenchDictionary implements Dictionary {\r\n    }","title":"Injecting a non-spring object into a spring project","body":"<p>From my perspective the better solution would be to have @Component(from Spring) annotation written at the class level.</p>\n<pre><code>package a.b.c;\n    @Component\n    public class EnglishDictionary implements Dictionary {\n}\n\npackage a.b.c;\n    @Component\n    public class FrenchDictionary implements Dictionary {\n}\n</code></pre>\n"}],"owner":{"account_id":15886,"reputation":457,"user_id":34026,"accept_rate":22,"display_name":"cdoe"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":318,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":70716957,"answer_count":2,"score":1,"last_activity_date":1642241104,"creation_date":1642178151,"question_id":70713748,"body_markdown":"Relatively new to Spring framework, so not sure if what I&#39;m trying to do is even possible.\r\n\r\nI have the following non-spring classes / interface.\r\n\r\n    package a.b.c;\r\n        public interface Dictionary {\r\n    }\r\n\r\n    package a.b.c;\r\n        public class EnglishDictionary implements Dictionary {\r\n    }\r\n\r\n    package a.b.c;\r\n        public class FrenchDictionary implements Dictionary {\r\n    }\r\n\r\nI want to inject these classes into a spring managed application. So I created a config class like this\r\n\r\n    @Configuration\r\n    @ComponentScan({&quot;a.b.c&quot;)}\r\n    public class AppConfig {\r\n    \r\n        @Bean\r\n        Dictionary englishDictionary() {\r\n            return new EnglishDictionary();\r\n        }\r\n    \r\n        @Bean\r\n        Dictionary frenchDictionary() {\r\n            return new FrenchDictionary();\r\n        }\r\n    }\r\n\r\nAnd use these dictionaries in a Spring component class like this\r\n\r\n    @Component\r\n    public class MyClass {\r\n    \r\n        @Autowired\r\n        Dictionary englishDictionary;\r\n    }\r\n\r\nHowever, the application refuses to start with an error message saying &quot;*Field englishDictionary required a bean of type &#39;a.b.c.Dictionary&#39; that could not be found. Consider defining a bean of type &#39;a.b.c.Dictionary&#39; in your configuration*.\r\n\r\nWhat am I doing wrong?\r\n\r\nThanks\r\n\r\n","title":"Injecting a non-spring object into a spring project","body":"<p>Relatively new to Spring framework, so not sure if what I'm trying to do is even possible.</p>\n<p>I have the following non-spring classes / interface.</p>\n<pre><code>package a.b.c;\n    public interface Dictionary {\n}\n\npackage a.b.c;\n    public class EnglishDictionary implements Dictionary {\n}\n\npackage a.b.c;\n    public class FrenchDictionary implements Dictionary {\n}\n</code></pre>\n<p>I want to inject these classes into a spring managed application. So I created a config class like this</p>\n<pre><code>@Configuration\n@ComponentScan({&quot;a.b.c&quot;)}\npublic class AppConfig {\n\n    @Bean\n    Dictionary englishDictionary() {\n        return new EnglishDictionary();\n    }\n\n    @Bean\n    Dictionary frenchDictionary() {\n        return new FrenchDictionary();\n    }\n}\n</code></pre>\n<p>And use these dictionaries in a Spring component class like this</p>\n<pre><code>@Component\npublic class MyClass {\n\n    @Autowired\n    Dictionary englishDictionary;\n}\n</code></pre>\n<p>However, the application refuses to start with an error message saying &quot;<em>Field englishDictionary required a bean of type 'a.b.c.Dictionary' that could not be found. Consider defining a bean of type 'a.b.c.Dictionary' in your configuration</em>.</p>\n<p>What am I doing wrong?</p>\n<p>Thanks</p>\n"},{"tags":["java","android","signed"],"answers":[{"tags":[],"owner":{"account_id":13086701,"reputation":80,"user_id":9455456,"display_name":"Vahid Mohtasham"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1642240951,"creation_date":1642240951,"answer_id":70720443,"question_id":70716449,"body_markdown":"Add this line and [create a JKS file][1] into an app folder.\r\n\r\nbe sure you use last version of [Android Studio][2]\r\n\r\n    android {\r\n    ...\r\n    signingConfigs {\r\n        release {\r\n            keyAlias &#39;name your choosen&#39;\r\n            keyPassword &#39;pass&#39;\r\n            storeFile file(&#39;key.jks&#39;)\r\n            storePassword &#39;pass&#39;\r\n        }\r\n    }\r\n    \r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/66981453/how-can-i-create-keystore-in-android-studio\r\n  [2]: https://developer.android.com/studio","title":"How to generate a signed key for my bundle in Android Studio?","body":"<p>Add this line and <a href=\"https://stackoverflow.com/questions/66981453/how-can-i-create-keystore-in-android-studio\">create a JKS file</a> into an app folder.</p>\n<p>be sure you use last version of <a href=\"https://developer.android.com/studio\" rel=\"nofollow noreferrer\">Android Studio</a></p>\n<pre><code>android {\n...\nsigningConfigs {\n    release {\n        keyAlias 'name your choosen'\n        keyPassword 'pass'\n        storeFile file('key.jks')\n        storePassword 'pass'\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":16949796,"reputation":71,"user_id":12259617,"display_name":"Nathan McKenzie"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":403,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1642240951,"creation_date":1642193836,"question_id":70716449,"body_markdown":"I&#39;m trying to export and upload a key from Android Studio but all the tutorials I&#39;ve seen instruct you to click on &quot;Build&quot; and then &quot;Generate Signed Bundle or APK&quot; in Android Studio but I don&#39;t have that option. [![enter image description here][1]][1]\r\n\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/VpioM.png\r\n\r\nI currently have Android Studio Arctic Fox 2020.3.1 Patch 4 installed. ","title":"How to generate a signed key for my bundle in Android Studio?","body":"<p>I'm trying to export and upload a key from Android Studio but all the tutorials I've seen instruct you to click on &quot;Build&quot; and then &quot;Generate Signed Bundle or APK&quot; in Android Studio but I don't have that option. <a href=\"https://i.stack.imgur.com/VpioM.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VpioM.png\" alt=\"enter image description here\" /></a></p>\n<p>I currently have Android Studio Arctic Fox 2020.3.1 Patch 4 installed.</p>\n"},{"tags":["java","thymeleaf"],"comments":[{"owner":{"account_id":5152799,"reputation":19367,"user_id":4126893,"display_name":"Metroids"},"score":0,"creation_date":1642097408,"post_id":70700095,"comment_id":124987453,"body_markdown":"Does this answer your question? [Thymeleaf th:text does not work in some case](https://stackoverflow.com/questions/68149717/thymeleaf-thtext-does-not-work-in-some-case)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/68149717/thymeleaf-thtext-does-not-work-in-some-case\">Thymeleaf th:text does not work in some case</a>"},{"owner":{"account_id":23575143,"reputation":35,"user_id":17614890,"display_name":"sjs"},"score":0,"creation_date":1642098665,"post_id":70700095,"comment_id":124987903,"body_markdown":"No, because I have tried it as well and it does not work.","body":"No, because I have tried it as well and it does not work."},{"owner":{"account_id":5152799,"reputation":19367,"user_id":4126893,"display_name":"Metroids"},"score":0,"creation_date":1642099590,"post_id":70700095,"comment_id":124988289,"body_markdown":"What exactly have you tried?  Model attributes are not persisted across redirects, and I&#39;ve used FlashAttributes before to solve this exact problem. Edit: you have multiple redirects... do you other flash attributes work? `bindingModel`?","body":"What exactly have you tried?  Model attributes are not persisted across redirects, and I&#39;ve used FlashAttributes before to solve this exact problem. Edit: you have multiple redirects... do you other flash attributes work? <code>bindingModel</code>?"},{"owner":{"account_id":23575143,"reputation":35,"user_id":17614890,"display_name":"sjs"},"score":0,"creation_date":1642111238,"post_id":70700095,"comment_id":124992066,"body_markdown":"The binding model which I use with flash attribute is visible because I have     @ModelAttribute(&quot;bindingModel&quot;) public BookingBindingModel bindingModel() {\nreturn new BookingBindingModel(); } . I have tried adding rAtt.addFlashAttribute(&quot;errorMessages&quot;, rooms); I also tried with this line                    \n if (!model.containsAttribute(&quot;messages&quot;))  but didn&#39;t work either. It is only visible with  @ModelAttribute(&quot;errorMessages&quot;) as in the example above but it is empty.","body":"The binding model which I use with flash attribute is visible because I have     @ModelAttribute(&quot;bindingModel&quot;) public BookingBindingModel bindingModel() { return new BookingBindingModel(); } . I have tried adding rAtt.addFlashAttribute(&quot;errorMessages&quot;, rooms); I also tried with this line                      if (!model.containsAttribute(&quot;messages&quot;))  but didn&#39;t work either. It is only visible with  @ModelAttribute(&quot;errorMessages&quot;) as in the example above but it is empty."},{"owner":{"account_id":23575143,"reputation":35,"user_id":17614890,"display_name":"sjs"},"score":0,"creation_date":1642113582,"post_id":70700095,"comment_id":124992708,"body_markdown":"I got it working with this rAtt.addFlashAttribute(&quot;messages&quot;, roomMessages); and this  @ModelAttribute(&quot;messages&quot;) RoomMessages roomMessages","body":"I got it working with this rAtt.addFlashAttribute(&quot;messages&quot;, roomMessages); and this  @ModelAttribute(&quot;messages&quot;) RoomMessages roomMessages"}],"owner":{"account_id":23575143,"reputation":35,"user_id":17614890,"display_name":"sjs"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":469,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1642240602,"creation_date":1642092141,"question_id":70700095,"body_markdown":"I have this code which should be displaying the messages using Thymeleaf\r\n\r\n    if (!rooms.isEmpty()) {\r\n        model.addAttribute(&quot;errorMessages&quot;, rooms);\r\n\r\n        return &quot;redirect:booking-form&quot;;\r\n    }\r\n\r\nInstead, Thymeleaf is not able to resolve the model (it gets underlined in red).\r\n\r\nIt becomes visible when I add the below code but with no values.\r\n\r\n    @ModelAttribute(&quot;errorMessages&quot;)\r\n    public Map&lt;String, String&gt; msg() {\r\n        return new HashMap&lt;&gt;();\r\n    }\r\n\r\nHow can I display the messages here?\r\n\r\n```html\r\n&lt;div th:each=&quot;e : ${errorMessages.values()}&quot;\r\n     class=&quot;alert alert-success alert-dismissible fade show&quot;\r\n     role=&quot;alert&quot;&gt;\r\n    &lt;strong&gt;&lt;span&gt;&lt;i class=&#39;bx bx-calendar-exclamation bx-tada&#39;&gt;&lt;/i&gt;&lt;/span&gt;&lt;/span&gt;&lt;/strong&gt; &lt;span th:text=&quot;${e}&quot;&gt;Error&lt;/span&gt;\r\n    &lt;button type=&quot;button&quot; class=&quot;close&quot; data-dismiss=&quot;alert&quot;\r\n            aria-label=&quot;Close&quot;&gt;\r\n        &lt;span aria-hidden=&quot;true&quot;&gt;&amp;times;&lt;/span&gt;\r\n    &lt;/button&gt;\r\n&lt;/div&gt;\r\n```\r\n\r\nHere is the controller:\r\n\r\n    @GetMapping(&quot;/check-availability&quot;)\r\n    public String checkAvailability(@Valid BookingBindingModel bindingModel, BindingResult br,\r\n                                    RedirectAttributes rAtt, Model model,\r\n                                    @AuthenticationPrincipal CustomUser user) {\r\n        if (br.hasErrors()) {\r\n            rAtt\r\n                    .addFlashAttribute(&quot;bindingModel&quot;, bindingModel)\r\n                    .addFlashAttribute(&quot;org.springframework.validation.BindingResult.bindingModel&quot;, br);\r\n            return &quot;redirect:booking-form&quot;;\r\n        }\r\n\r\n        CheckAvailabilityDto dto = this.mapper.map(bindingModel, CheckAvailabilityDto.class);\r\n        Map&lt;String, String&gt; rooms = this.bookingService.checkAvailability(dto);\r\n\r\n        if (!rooms.isEmpty()) {\r\n            model.addAttribute(&quot;errorMessages&quot;, rooms);\r\n\r\n            return &quot;redirect:booking-form&quot;;\r\n        }\r\n        return &quot;redirect:/details&quot;;\r\n\r\n    }","title":"Model attribute not visible by thymeleaf","body":"<p>I have this code which should be displaying the messages using Thymeleaf</p>\n<pre><code>if (!rooms.isEmpty()) {\n    model.addAttribute(&quot;errorMessages&quot;, rooms);\n\n    return &quot;redirect:booking-form&quot;;\n}\n</code></pre>\n<p>Instead, Thymeleaf is not able to resolve the model (it gets underlined in red).</p>\n<p>It becomes visible when I add the below code but with no values.</p>\n<pre><code>@ModelAttribute(&quot;errorMessages&quot;)\npublic Map&lt;String, String&gt; msg() {\n    return new HashMap&lt;&gt;();\n}\n</code></pre>\n<p>How can I display the messages here?</p>\n<pre class=\"lang-html prettyprint-override\"><code>&lt;div th:each=&quot;e : ${errorMessages.values()}&quot;\n     class=&quot;alert alert-success alert-dismissible fade show&quot;\n     role=&quot;alert&quot;&gt;\n    &lt;strong&gt;&lt;span&gt;&lt;i class='bx bx-calendar-exclamation bx-tada'&gt;&lt;/i&gt;&lt;/span&gt;&lt;/span&gt;&lt;/strong&gt; &lt;span th:text=&quot;${e}&quot;&gt;Error&lt;/span&gt;\n    &lt;button type=&quot;button&quot; class=&quot;close&quot; data-dismiss=&quot;alert&quot;\n            aria-label=&quot;Close&quot;&gt;\n        &lt;span aria-hidden=&quot;true&quot;&gt;&amp;times;&lt;/span&gt;\n    &lt;/button&gt;\n&lt;/div&gt;\n</code></pre>\n<p>Here is the controller:</p>\n<pre><code>@GetMapping(&quot;/check-availability&quot;)\npublic String checkAvailability(@Valid BookingBindingModel bindingModel, BindingResult br,\n                                RedirectAttributes rAtt, Model model,\n                                @AuthenticationPrincipal CustomUser user) {\n    if (br.hasErrors()) {\n        rAtt\n                .addFlashAttribute(&quot;bindingModel&quot;, bindingModel)\n                .addFlashAttribute(&quot;org.springframework.validation.BindingResult.bindingModel&quot;, br);\n        return &quot;redirect:booking-form&quot;;\n    }\n\n    CheckAvailabilityDto dto = this.mapper.map(bindingModel, CheckAvailabilityDto.class);\n    Map&lt;String, String&gt; rooms = this.bookingService.checkAvailability(dto);\n\n    if (!rooms.isEmpty()) {\n        model.addAttribute(&quot;errorMessages&quot;, rooms);\n\n        return &quot;redirect:booking-form&quot;;\n    }\n    return &quot;redirect:/details&quot;;\n\n}\n</code></pre>\n"},{"tags":["java","eclipse"],"answers":[{"tags":[],"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1642240560,"creation_date":1642238762,"answer_id":70720227,"question_id":70720157,"body_markdown":"Your code is asking the user to enter an `int`, so the type of variable `side` should be `int` and not `double`. Alternatively, call method [nextDouble][1] rather than `nextInt`.\r\n\r\nSince you are summing `int` values, the type for variable `perimeter` should also be `int`.\r\n\r\nThere is no need for variable `counter` since you are you using a `for` loop and variable `x` is essentially your *counter*.\r\n\r\nAlso no need for variable `valid` since a simple `if` statement will suffice for determining whether the entered number is greater than zero or not.\r\n\r\nAfter each number is entered, you need to add that number to the current value of variable `perimeter` &amp;ndash; but only if the entered number is greater than zero. So before adding the number, you need to test whether the entered number is greater than zero. If it is not, you need to decrement the value of `x`, because it is automatically incremented before every loop iteration, and ask the user to re-enter the value.\r\n```java\r\nimport java.util.Scanner;\r\n\r\npublic class Polygons {\r\n\r\n    public static void main(String[] args) {\r\n        Scanner input = new Scanner(System.in);\r\n        int side = 0;\r\n        int perimeter = 0;\r\n        for (int x = 0; x &lt; 5; x++) {\r\n            System.out.println(&quot;Please enter the length of one side of the irregular polygon&quot;);\r\n            side = input.nextInt(); // store the user-entered number in variable &#39;side&#39;\r\n            if (side &gt; 0) { // test whether the user-entered number is greater than zero\r\n                perimeter += side; // add the user-entered number to current value of variable &#39;perimeter&#39;\r\n            }\r\n            else { // user-entered number is not greater than zero\r\n                System.out.println(&quot;Must be greater than zero. Please re-enter.&quot;);\r\n                x--; // decrement the loop counter\r\n            }\r\n        }\r\n        System.out.println(&quot;Perimeter = &quot; + perimeter);\r\n    }\r\n}\r\n```\r\nEdit\r\n----\r\nDue to OP [comment][2].\r\n```java\r\nimport java.util.Scanner;\r\n\r\npublic class Polygons {\r\n\r\n    public static void main(String[] args) {\r\n        Scanner input = new Scanner(System.in);\r\n        double side = 0; \r\n        double perimeter = 0;\r\n        boolean valid = true; \r\n        var counter = 0;\r\n        while (counter &lt; 5) {\r\n            System.out.println(&quot;Please enter the length of one side of the irregular polygon&quot;);\r\n            side = input.nextDouble();\r\n            if (valid) {\r\n                perimeter += side;\r\n                valid = side &gt; 0;\r\n            }\r\n            counter++;\r\n        }\r\n        if (valid) {\r\n            System.out.println(&quot;Perimeter = &quot; + perimeter);\r\n        }\r\n        else {\r\n            System.out.println(&quot;Please try again and make sure that all sides have a value greater than 0&quot;);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Scanner.html#nextDouble()\r\n  [2]: https://stackoverflow.com/questions/70720157/i-am-stuck-on-making-this-portion-of-my-code-what-do-i-do-from-here/70720227#comment125021692_70720227","title":"I am stuck on making this portion of my code, what do I do from here?","body":"<p>Your code is asking the user to enter an <code>int</code>, so the type of variable <code>side</code> should be <code>int</code> and not <code>double</code>. Alternatively, call method <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Scanner.html#nextDouble()\" rel=\"nofollow noreferrer\">nextDouble</a> rather than <code>nextInt</code>.</p>\n<p>Since you are summing <code>int</code> values, the type for variable <code>perimeter</code> should also be <code>int</code>.</p>\n<p>There is no need for variable <code>counter</code> since you are you using a <code>for</code> loop and variable <code>x</code> is essentially your <em>counter</em>.</p>\n<p>Also no need for variable <code>valid</code> since a simple <code>if</code> statement will suffice for determining whether the entered number is greater than zero or not.</p>\n<p>After each number is entered, you need to add that number to the current value of variable <code>perimeter</code> – but only if the entered number is greater than zero. So before adding the number, you need to test whether the entered number is greater than zero. If it is not, you need to decrement the value of <code>x</code>, because it is automatically incremented before every loop iteration, and ask the user to re-enter the value.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.Scanner;\n\npublic class Polygons {\n\n    public static void main(String[] args) {\n        Scanner input = new Scanner(System.in);\n        int side = 0;\n        int perimeter = 0;\n        for (int x = 0; x &lt; 5; x++) {\n            System.out.println(&quot;Please enter the length of one side of the irregular polygon&quot;);\n            side = input.nextInt(); // store the user-entered number in variable 'side'\n            if (side &gt; 0) { // test whether the user-entered number is greater than zero\n                perimeter += side; // add the user-entered number to current value of variable 'perimeter'\n            }\n            else { // user-entered number is not greater than zero\n                System.out.println(&quot;Must be greater than zero. Please re-enter.&quot;);\n                x--; // decrement the loop counter\n            }\n        }\n        System.out.println(&quot;Perimeter = &quot; + perimeter);\n    }\n}\n</code></pre>\n<h2>Edit</h2>\n<p>Due to OP <a href=\"https://stackoverflow.com/questions/70720157/i-am-stuck-on-making-this-portion-of-my-code-what-do-i-do-from-here/70720227#comment125021692_70720227\">comment</a>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.Scanner;\n\npublic class Polygons {\n\n    public static void main(String[] args) {\n        Scanner input = new Scanner(System.in);\n        double side = 0; \n        double perimeter = 0;\n        boolean valid = true; \n        var counter = 0;\n        while (counter &lt; 5) {\n            System.out.println(&quot;Please enter the length of one side of the irregular polygon&quot;);\n            side = input.nextDouble();\n            if (valid) {\n                perimeter += side;\n                valid = side &gt; 0;\n            }\n            counter++;\n        }\n        if (valid) {\n            System.out.println(&quot;Perimeter = &quot; + perimeter);\n        }\n        else {\n            System.out.println(&quot;Please try again and make sure that all sides have a value greater than 0&quot;);\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":23947255,"reputation":1,"user_id":17939433,"display_name":"TheCodingJayy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":64,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":70720227,"answer_count":1,"score":-1,"last_activity_date":1642240560,"creation_date":1642237976,"question_id":70720157,"body_markdown":"```java\r\nimport java.util.Scanner;\r\n\r\npublic class Polygons {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tScanner input = new Scanner(System.in);\r\n\t\tdouble side = 0; \r\n\t\tdouble perimeter = 0;\r\n\t\tboolean valid = true; \r\n\t\tvar counter = 0;\r\n\t\tfor (int x=0;x&lt;5;x++) {\r\n\t\t\tSystem.out.println(&quot;Please enter the length of one side of the irregular polygon&quot;);\r\n\t\t\tside = input.nextInt();\r\n\t\t}\r\n\t\t// TODO Auto-generated method stub\r\n\t}\r\n}\r\n```\r\nI need to add this following to my code now, but I don&#39;t know what to add from here, can someone please help me out?\r\n\r\nIf the value of side is greater than 0 \r\n           Add that value to perimeter (Hint: perimeter=perimeter+side;) and\r\nSet the value of valid equal to true\r\n","title":"I am stuck on making this portion of my code, what do I do from here?","body":"<pre class=\"lang-java prettyprint-override\"><code>import java.util.Scanner;\n\npublic class Polygons {\n\n    public static void main(String[] args) {\n        Scanner input = new Scanner(System.in);\n        double side = 0; \n        double perimeter = 0;\n        boolean valid = true; \n        var counter = 0;\n        for (int x=0;x&lt;5;x++) {\n            System.out.println(&quot;Please enter the length of one side of the irregular polygon&quot;);\n            side = input.nextInt();\n        }\n        // TODO Auto-generated method stub\n    }\n}\n</code></pre>\n<p>I need to add this following to my code now, but I don't know what to add from here, can someone please help me out?</p>\n<p>If the value of side is greater than 0\nAdd that value to perimeter (Hint: perimeter=perimeter+side;) and\nSet the value of valid equal to true</p>\n"},{"tags":["java","date","string-to-datetime"],"comments":[{"owner":{"account_id":213468,"reputation":103486,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1642240286,"post_id":70707725,"comment_id":125021783,"body_markdown":"A `Date` itself has no format (its `toString()` has a fixed format), if you want to *print* the date with a specific format, you need to use `SimpleDateFormat`. As an aside, it is highly recommended to stop using `Date`, and instead switch to the `java.time` classes.","body":"A <code>Date</code> itself has no format (its <code>toString()</code> has a fixed format), if you want to <i>print</i> the date with a specific format, you need to use <code>SimpleDateFormat</code>. As an aside, it is highly recommended to stop using <code>Date</code>, and instead switch to the <code>java.time</code> classes."}],"answers":[{"tags":[],"owner":{"account_id":23557777,"reputation":193,"user_id":17600104,"display_name":"Cookie"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1642149803,"creation_date":1642148478,"answer_id":70707800,"question_id":70707725,"body_markdown":"      SimpleDateFormat simpleDateFormat = new SimpleDateFormat(&quot;HH:mm:ss.SS&quot;);\r\n      hour = simpleDateFormat.parse(a);\r\n\r\n      System.out.println(simpleDateFormat.format(hour));","title":"I want to convert string to date in java","body":"<pre><code>  SimpleDateFormat simpleDateFormat = new SimpleDateFormat(&quot;HH:mm:ss.SS&quot;);\n  hour = simpleDateFormat.parse(a);\n\n  System.out.println(simpleDateFormat.format(hour));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1894950,"reputation":18007,"user_id":1712135,"display_name":"deHaar"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1642149708,"creation_date":1642148850,"answer_id":70707861,"question_id":70707725,"body_markdown":"**Hint:** Your example `String` is of the format `HH:mm:ss.SSSSSS`, **not** `&quot;hh:mm:ss.SSSSSS`.\r\n\r\n---\r\nIf you want to parse and format time of day exclusively (independent from a day/date), then use a `java.time.LocalTime` for that:\r\n\r\n```Java\r\npublic static void main(String[] args) throws IOException {\r\n\tString a = &quot;20:50:45.268743&quot;;\r\n\t// parse the String to a class representing a time of day\r\n\tLocalTime localTime = LocalTime.parse(a);\r\n\t// print it\r\n\tSystem.out.println(localTime);\r\n\t// or print it in a different format\r\n\tSystem.out.println(\r\n\t\t\tlocalTime.format(\r\n\t\t\t\t\tDateTimeFormatter.ofPattern(&quot;hh:mm:ss a&quot;, Locale.ENGLISH)));\r\n\t// or print it exactly as desired\r\n\tSystem.out.println(\r\n\t\t\tlocalTime.format(\r\n\t\t\t\t\tDateTimeFormatter.ofPattern(&quot;HH:mm:ss.SS&quot;, Locale.ENGLISH)));\r\n}\r\n```\r\n\r\nOutput is\r\n\r\n```lang-none\r\n20:50:45.268743\r\n08:50:45 PM\r\n20:50:45.26\r\n```","title":"I want to convert string to date in java","body":"<p><strong>Hint:</strong> Your example <code>String</code> is of the format <code>HH:mm:ss.SSSSSS</code>, <strong>not</strong> <code>&quot;hh:mm:ss.SSSSSS</code>.</p>\n<hr />\n<p>If you want to parse and format time of day exclusively (independent from a day/date), then use a <code>java.time.LocalTime</code> for that:</p>\n<pre><code>public static void main(String[] args) throws IOException {\n    String a = &quot;20:50:45.268743&quot;;\n    // parse the String to a class representing a time of day\n    LocalTime localTime = LocalTime.parse(a);\n    // print it\n    System.out.println(localTime);\n    // or print it in a different format\n    System.out.println(\n            localTime.format(\n                    DateTimeFormatter.ofPattern(&quot;hh:mm:ss a&quot;, Locale.ENGLISH)));\n    // or print it exactly as desired\n    System.out.println(\n            localTime.format(\n                    DateTimeFormatter.ofPattern(&quot;HH:mm:ss.SS&quot;, Locale.ENGLISH)));\n}\n</code></pre>\n<p>Output is</p>\n<pre class=\"lang-none prettyprint-override\"><code>20:50:45.268743\n08:50:45 PM\n20:50:45.26\n</code></pre>\n"}],"owner":{"display_name":"user14360671"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":134,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"closed_date":1642240329,"answer_count":2,"score":2,"last_activity_date":1642240192,"creation_date":1642148018,"question_id":70707725,"body_markdown":"I have a string like `&quot;hh:mm:ss.SSSSSS&quot;` and I want to convert this string to `Date` and I want to get `&quot;hh:mm:ss.SS&quot;`. However, when I compile my code, it still gives the day month year time and timezone like `&quot;Thu Jan 01 10:50:55 TRT 1970&quot;`. I attached my code below to the text.\r\n\r\n```Java\r\nString a = &quot;20:50:45.268743&quot;;\r\nDate hour;\r\ntry {\r\n    hour = new SimpleDateFormat(&quot;hh:mm:ss.SS&quot;).parse(a);\r\n    System.out.println(hour);\r\n} catch(ParseException e) {\r\n    e.printStackTrace();\r\n}\r\n```\r\n\r\nMy output is hu Jan 01 20:55:13 TRT 1970 but I want to get 20:55:45.26.  \r\nIs there anyone who can help me about this situation?\r\n\r\n","title":"I want to convert string to date in java","body":"<p>I have a string like <code>&quot;hh:mm:ss.SSSSSS&quot;</code> and I want to convert this string to <code>Date</code> and I want to get <code>&quot;hh:mm:ss.SS&quot;</code>. However, when I compile my code, it still gives the day month year time and timezone like <code>&quot;Thu Jan 01 10:50:55 TRT 1970&quot;</code>. I attached my code below to the text.</p>\n<pre><code>String a = &quot;20:50:45.268743&quot;;\nDate hour;\ntry {\n    hour = new SimpleDateFormat(&quot;hh:mm:ss.SS&quot;).parse(a);\n    System.out.println(hour);\n} catch(ParseException e) {\n    e.printStackTrace();\n}\n</code></pre>\n<p>My output is hu Jan 01 20:55:13 TRT 1970 but I want to get 20:55:45.26.<br />\nIs there anyone who can help me about this situation?</p>\n"},{"tags":["java","spring","spring-webflux"],"comments":[{"owner":{"account_id":3192259,"reputation":117609,"user_id":2696260,"display_name":"M. Deinum"},"score":2,"creation_date":1635770990,"post_id":69797121,"comment_id":123374831,"body_markdown":"No you can read the body only once. Why would you need it both as the raw payload and serialized to the object? What is your usecase, what are you trying to solve?","body":"No you can read the body only once. Why would you need it both as the raw payload and serialized to the object? What is your usecase, what are you trying to solve?"},{"owner":{"account_id":14429973,"reputation":2483,"user_id":10423604,"display_name":"Volodya Lombrozo"},"score":0,"creation_date":1635773428,"post_id":69797121,"comment_id":123375801,"body_markdown":"@M.Deinum I wanna verify the request signature and then handle other work.","body":"@M.Deinum I wanna verify the request signature and then handle other work."},{"owner":{"account_id":3192259,"reputation":117609,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1635774602,"post_id":69797121,"comment_id":123376284,"body_markdown":"Do that as part of your flow not in your controller. Write a `WebFilter` that validates the signature, if it fails abort the flow/return an error.","body":"Do that as part of your flow not in your controller. Write a <code>WebFilter</code> that validates the signature, if it fails abort the flow/return an error."},{"owner":{"account_id":14429973,"reputation":2483,"user_id":10423604,"display_name":"Volodya Lombrozo"},"score":0,"creation_date":1635775667,"post_id":69797121,"comment_id":123376727,"body_markdown":"@M.Deinum I&#39;ve tried to do exactly what you suggest. In the case of `WebFilter`, I got a hardly-understandable code (It has a problem with reading of raw body too). I have only 3 controller methods with such behavior and for this reason, I decided to follow a simple, clear path with &#39;two bodies&#39;... Which doesn&#39;t work.","body":"@M.Deinum I&#39;ve tried to do exactly what you suggest. In the case of <code>WebFilter</code>, I got a hardly-understandable code (It has a problem with reading of raw body too). I have only 3 controller methods with such behavior and for this reason, I decided to follow a simple, clear path with &#39;two bodies&#39;... Which doesn&#39;t work."},{"owner":{"account_id":3192259,"reputation":117609,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1635778096,"post_id":69797121,"comment_id":123377647,"body_markdown":"There is only 1 body so no you cannot do this with 2 arguments. You would need to do the serializing yourself and validate in your method. Also now you have 3 until you don&#39;t have 3 but 10 of these then you really want a separate crosscutting concern for this. You also might want to use `Mono&lt;String&gt;` instead of `String` as the body, that way you can do the validation before the mapping to an object in your code (and maybe make it partially reusable).","body":"There is only 1 body so no you cannot do this with 2 arguments. You would need to do the serializing yourself and validate in your method. Also now you have 3 until you don&#39;t have 3 but 10 of these then you really want a separate crosscutting concern for this. You also might want to use <code>Mono&lt;String&gt;</code> instead of <code>String</code> as the body, that way you can do the validation before the mapping to an object in your code (and maybe make it partially reusable)."},{"owner":{"account_id":14429973,"reputation":2483,"user_id":10423604,"display_name":"Volodya Lombrozo"},"score":0,"creation_date":1635782717,"post_id":69797121,"comment_id":123379489,"body_markdown":"Thank you for your detailed answer. I agree with you, in the case of 10 - much better to use `WebFilter` and I will. I tried to use `Mono&lt;String&gt;` in the current implementation and It works well.  Thank you.","body":"Thank you for your detailed answer. I agree with you, in the case of 10 - much better to use <code>WebFilter</code> and I will. I tried to use <code>Mono&lt;String&gt;</code> in the current implementation and It works well.  Thank you."}],"answers":[{"tags":[],"owner":{"account_id":22354823,"reputation":16499,"user_id":16572295,"display_name":"Jo&#227;o Dias"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1635771259,"creation_date":1635771259,"answer_id":69797229,"question_id":69797121,"body_markdown":"Having multiple `@RequestBody` is not possible. If you really need both original JSON and its serialized version the best you can do is receive the request body as a plain `String` and then convert it to the corresponding Java object as follows:\r\n```java\r\n@Autowired\r\nprivate ObjectMapper objectMapper;\r\n\r\n@PostMapping(&quot;/play&quot;)\r\npublic Mono&lt;PlayResponse&gt; play(@RequestBody String body){\r\n    PlayCommand playCommand = objectMapper.readValue(body, PlayCommand.class);\r\n}\r\n```","title":"Spring WebFlux. How to get the request body in two different formats using @RequestBody annotation?","body":"<p>Having multiple <code>@RequestBody</code> is not possible. If you really need both original JSON and its serialized version the best you can do is receive the request body as a plain <code>String</code> and then convert it to the corresponding Java object as follows:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Autowired\nprivate ObjectMapper objectMapper;\n\n@PostMapping(&quot;/play&quot;)\npublic Mono&lt;PlayResponse&gt; play(@RequestBody String body){\n    PlayCommand playCommand = objectMapper.readValue(body, PlayCommand.class);\n}\n</code></pre>\n"}],"owner":{"account_id":14429973,"reputation":2483,"user_id":10423604,"display_name":"Volodya Lombrozo"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1678,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":69797229,"answer_count":1,"score":0,"last_activity_date":1642240150,"creation_date":1635770711,"question_id":69797121,"body_markdown":"I&#39;m using Spring Boot 2.5.6 and Spring WebFlux. In my business case, I need to use the HTTP request body in two different forms: \r\n1) Raw JSON string\r\n2) Already parsed Java DTO\r\n\r\nThere are my `RestContoller`:\r\n```java\r\n@PostMapping(&quot;/play&quot;)\r\npublic Mono&lt;PlayResponse&gt; play(@RequestBody PlayCommand parsedBody,\r\n                               @RequestBody String jsonBody) {\r\n    //code here\r\n}\r\n```\r\n\r\nWhen I run tests I get the next exception:\r\n```\r\njava.lang.IllegalStateException: Only one connection receive subscriber allowed.\r\n\tat reactor.netty.channel.FluxReceive.startReceiver(FluxReceive.java:182) ~[reactor-netty-core-1.0.12.jar:1.0.12]\r\n\tSuppressed: reactor.core.publisher.FluxOnAssembly$OnAssemblyException: \r\nError has been observed at the following site(s):\r\n\t*__checkpoint ⇢ HTTP POST &quot;/play&quot; [ExceptionHandlingWebHandler]\r\n```\r\n\r\nWhen I use the next method signature:\r\n```java\r\n@PostMapping(&quot;/play&quot;)\r\npublic Mono&lt;PlayResponse&gt; play(PlayCommand playCommand,\r\n                               @RequestBody String body){\r\n    //code here\r\n}\r\n```\r\n`PlayCommand parsedBody` has all fields is set to &#39;null&#39;.\r\nI can&#39;t find a way to receive the body properly. \r\n\r\nI understand, that I can use `objectMapper` and convert `playCommand` back to JSON, but this is additional work that does not need to be done.\r\nIs it possible to receive the request body in two different forms? Or maybe, I&#39;m doing something wrong in my examples?","title":"Spring WebFlux. How to get the request body in two different formats using @RequestBody annotation?","body":"<p>I'm using Spring Boot 2.5.6 and Spring WebFlux. In my business case, I need to use the HTTP request body in two different forms:</p>\n<ol>\n<li>Raw JSON string</li>\n<li>Already parsed Java DTO</li>\n</ol>\n<p>There are my <code>RestContoller</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@PostMapping(&quot;/play&quot;)\npublic Mono&lt;PlayResponse&gt; play(@RequestBody PlayCommand parsedBody,\n                               @RequestBody String jsonBody) {\n    //code here\n}\n</code></pre>\n<p>When I run tests I get the next exception:</p>\n<pre><code>java.lang.IllegalStateException: Only one connection receive subscriber allowed.\n    at reactor.netty.channel.FluxReceive.startReceiver(FluxReceive.java:182) ~[reactor-netty-core-1.0.12.jar:1.0.12]\n    Suppressed: reactor.core.publisher.FluxOnAssembly$OnAssemblyException: \nError has been observed at the following site(s):\n    *__checkpoint ⇢ HTTP POST &quot;/play&quot; [ExceptionHandlingWebHandler]\n</code></pre>\n<p>When I use the next method signature:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@PostMapping(&quot;/play&quot;)\npublic Mono&lt;PlayResponse&gt; play(PlayCommand playCommand,\n                               @RequestBody String body){\n    //code here\n}\n</code></pre>\n<p><code>PlayCommand parsedBody</code> has all fields is set to 'null'.\nI can't find a way to receive the body properly.</p>\n<p>I understand, that I can use <code>objectMapper</code> and convert <code>playCommand</code> back to JSON, but this is additional work that does not need to be done.\nIs it possible to receive the request body in two different forms? Or maybe, I'm doing something wrong in my examples?</p>\n"},{"tags":["java","servlets"],"answers":[{"tags":[],"owner":{"account_id":23655315,"reputation":41,"user_id":17683701,"display_name":"AvocadoGirl"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1642239942,"creation_date":1642239942,"answer_id":70720344,"question_id":70720150,"body_markdown":"So basically, I only needed to do was just use B class instead of Object\r\n\r\n```\r\npackage servlet;\r\n\r\nimport lombok.Data;\r\n\r\n@Data\r\npublic class A {\r\n    public B key1;\r\n}\r\n```\r\n\r\nand in servlet ask from A class both key1, key2 and loop them\r\n\r\n```\r\n@Override\r\n    public void doPost(HttpServletRequest request,\r\n                       HttpServletResponse response) throws IOException {\r\n\r\n        String input = request.getReader().lines().collect(Collectors.joining(&quot;/n&quot;));\r\n\r\n        A a = new ObjectMapper().readValue(input, new TypeReference&lt;A&gt;() {});\r\n\r\n        int sum = 0;\r\n        for (Integer b: a.getKey1().getKey2()) {\r\n            sum += b;\r\n        }\r\n\r\n        String output = new ObjectMapper().writeValueAsString(sum);\r\n        response.getWriter().write(output);\r\n    }\r\n```\r\n","title":"Using objectmapper for nested objects","body":"<p>So basically, I only needed to do was just use B class instead of Object</p>\n<pre><code>package servlet;\n\nimport lombok.Data;\n\n@Data\npublic class A {\n    public B key1;\n}\n</code></pre>\n<p>and in servlet ask from A class both key1, key2 and loop them</p>\n<pre><code>@Override\n    public void doPost(HttpServletRequest request,\n                       HttpServletResponse response) throws IOException {\n\n        String input = request.getReader().lines().collect(Collectors.joining(&quot;/n&quot;));\n\n        A a = new ObjectMapper().readValue(input, new TypeReference&lt;A&gt;() {});\n\n        int sum = 0;\n        for (Integer b: a.getKey1().getKey2()) {\n            sum += b;\n        }\n\n        String output = new ObjectMapper().writeValueAsString(sum);\n        response.getWriter().write(output);\n    }\n</code></pre>\n"}],"owner":{"account_id":23655315,"reputation":41,"user_id":17683701,"display_name":"AvocadoGirl"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":709,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":70720344,"answer_count":1,"score":1,"last_activity_date":1642239942,"creation_date":1642237822,"question_id":70720150,"body_markdown":"I have an object inside another object. When I ask `key1` value in `Servlet.java` with ObjectMapper I will get `A(key1={key2=[1, 5, 7]})`, but I&#39;d like to know how to separate `key2` List value.\r\n\r\nString input: `{&quot;key1&quot;:{&quot;key2&quot;:[1,5,7]}}`\r\n\r\nFinal result: `13` -&gt; `calculated from key2 array values (1 + 5 + 7)`\r\n\r\nBasically, I&#39;ve already done everything, but getting values from key2 is still missing.\r\n\r\nA.java\r\n```\r\npackage servlet;\r\n\r\nimport lombok.Data;\r\n\r\n@Data\r\npublic class A {\r\n    public Object key1;\r\n}\r\n```\r\n\r\nB.java\r\n```\r\npackage servlet;\r\n\r\nimport lombok.Data;\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\n@Data\r\npublic class B{\r\n    List&lt;Integer&gt; key2 = new ArrayList&lt;&gt;();\r\n\r\n}\r\n```\r\n\r\nServlet.java\r\n```\r\npackage servlet;\r\n\r\nimport com.fasterxml.jackson.core.type.TypeReference;\r\nimport com.fasterxml.jackson.databind.ObjectMapper;\r\n\r\nimport javax.servlet.annotation.WebServlet;\r\nimport javax.servlet.http.HttpServlet;\r\nimport javax.servlet.http.HttpServletRequest;\r\nimport javax.servlet.http.HttpServletResponse;\r\nimport java.io.IOException;\r\nimport java.util.ArrayList;\r\nimport java.util.stream.Collectors;\r\n\r\n@WebServlet(&quot;/validate&quot;)\r\npublic class Servlet extends HttpServlet {\r\n\r\n    @Override\r\n    protected void doGet(HttpServletRequest request,\r\n                         HttpServletResponse response)\r\n            throws IOException {\r\n\r\n        response.getWriter().print(&quot;Hello!&quot;);\r\n    }\r\n\r\n    @Override\r\n    public void doPost(HttpServletRequest request,\r\n                       HttpServletResponse response) throws IOException {\r\n\r\n        String input = request.getReader().lines().collect(Collectors.joining(&quot;/n&quot;));\r\n\r\n        A a = new ObjectMapper().readValue(input, new TypeReference&lt;A&gt;() {});\r\n        System.out.println(a); // A(key1={key2=[1, 5, 7]})\r\n        System.out.println(a.getKey1()); // {key2=[1, 5, 7]}\r\n\r\n        // Object in object ?\r\n\r\n        int sum = 0;\r\n        String output = new ObjectMapper().writeValueAsString(sum);\r\n        response.getWriter().write(output);\r\n    } \r\n}\r\n```\r\n\r\nHow am I able to separate `key2` from it to calculate the sum of key2 array values?\r\n\r\nAnother restriction is that I cannot use split, replace, match etc.","title":"Using objectmapper for nested objects","body":"<p>I have an object inside another object. When I ask <code>key1</code> value in <code>Servlet.java</code> with ObjectMapper I will get <code>A(key1={key2=[1, 5, 7]})</code>, but I'd like to know how to separate <code>key2</code> List value.</p>\n<p>String input: <code>{&quot;key1&quot;:{&quot;key2&quot;:[1,5,7]}}</code></p>\n<p>Final result: <code>13</code> -&gt; <code>calculated from key2 array values (1 + 5 + 7)</code></p>\n<p>Basically, I've already done everything, but getting values from key2 is still missing.</p>\n<p>A.java</p>\n<pre><code>package servlet;\n\nimport lombok.Data;\n\n@Data\npublic class A {\n    public Object key1;\n}\n</code></pre>\n<p>B.java</p>\n<pre><code>package servlet;\n\nimport lombok.Data;\nimport java.util.ArrayList;\nimport java.util.List;\n\n@Data\npublic class B{\n    List&lt;Integer&gt; key2 = new ArrayList&lt;&gt;();\n\n}\n</code></pre>\n<p>Servlet.java</p>\n<pre><code>package servlet;\n\nimport com.fasterxml.jackson.core.type.TypeReference;\nimport com.fasterxml.jackson.databind.ObjectMapper;\n\nimport javax.servlet.annotation.WebServlet;\nimport javax.servlet.http.HttpServlet;\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletResponse;\nimport java.io.IOException;\nimport java.util.ArrayList;\nimport java.util.stream.Collectors;\n\n@WebServlet(&quot;/validate&quot;)\npublic class Servlet extends HttpServlet {\n\n    @Override\n    protected void doGet(HttpServletRequest request,\n                         HttpServletResponse response)\n            throws IOException {\n\n        response.getWriter().print(&quot;Hello!&quot;);\n    }\n\n    @Override\n    public void doPost(HttpServletRequest request,\n                       HttpServletResponse response) throws IOException {\n\n        String input = request.getReader().lines().collect(Collectors.joining(&quot;/n&quot;));\n\n        A a = new ObjectMapper().readValue(input, new TypeReference&lt;A&gt;() {});\n        System.out.println(a); // A(key1={key2=[1, 5, 7]})\n        System.out.println(a.getKey1()); // {key2=[1, 5, 7]}\n\n        // Object in object ?\n\n        int sum = 0;\n        String output = new ObjectMapper().writeValueAsString(sum);\n        response.getWriter().write(output);\n    } \n}\n</code></pre>\n<p>How am I able to separate <code>key2</code> from it to calculate the sum of key2 array values?</p>\n<p>Another restriction is that I cannot use split, replace, match etc.</p>\n"},{"tags":["java","mqtt","paho"],"answers":[{"tags":[],"owner":{"account_id":418312,"reputation":36,"user_id":794794,"display_name":"Amit Jain"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1504782503,"creation_date":1504778176,"answer_id":46093387,"question_id":36793280,"body_markdown":"You can use `MqttConnectOptions.setAutomaticReconnect(true)` to enable automatic reconnect.","title":"How to reconnect to MQTT with Paho drivers","body":"<p>You can use <code>MqttConnectOptions.setAutomaticReconnect(true)</code> to enable automatic reconnect.</p>\n"},{"tags":[],"owner":{"account_id":9731713,"reputation":21,"user_id":7216513,"display_name":"trickyedecay"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1642239497,"creation_date":1642239497,"answer_id":70720314,"question_id":36793280,"body_markdown":"I tried to use `MqttConnectOptions.setAutomaticReconnect(true)` but it cannot reconnect successfully when connection failure.\r\n\r\nso i try to manage reconnect myself using some code like below and it work!\r\n```kotlin\r\n// make the client nullable and set it to null before to reconnect\r\nprivate var mqttClient: MqttAndroidClient? = null\r\n```\r\n\r\n```kotlin\r\n// setup connection options and connect\r\nprivate fun setupMQTT(){\r\n    Log.d(&quot;mqtt-log&quot;, &quot;setup mqtt&quot;)\r\n    val serverIP = &quot;192.168.0.198&quot;\r\n    val serverPort = &quot;1883&quot;\r\n    val serverURI = &quot;tcp://${serverIP}:${serverPort}&quot;\r\n    mqttClient = MqttAndroidClient(this, serverURI, &quot;kotlin_client&quot;)\r\n    val options = MqttConnectOptions()\r\n    // don&#39;t use build-in automaticRecconnect\r\n    options.isAutomaticReconnect = false\r\n    options.connectionTimeout = 0\r\n    options.isCleanSession = false\r\n    try {\r\n        mqttClient!!.connect(options, null, iMqttActionListener)\r\n    } catch (e: MqttException) {\r\n        e.printStackTrace()\r\n        Log.d(&quot;mqtt-log&quot;, &quot;Exception&quot;)\r\n    }\r\n}\r\n```\r\n\r\n```kotlin\r\n// handle connection action\r\nval iMqttActionListener = object : IMqttActionListener {\r\n    override fun onSuccess(asyncActionToken: IMqttToken?) {\r\n        Log.d(&quot;mqtt-log&quot;, &quot;Connection success&quot;)\r\n        subscribeMQTT() // some methods for subscribing topics\r\n    }\r\n\r\n    override fun onFailure(asyncActionToken: IMqttToken?, exception: Throwable?) {\r\n        Log.d(&quot;mqtt-log&quot;, &quot;Connection failure&quot;)\r\n\r\n        // retry after 3s.\r\n        // its the very important part to retry.\r\n        Handler(Looper.getMainLooper()).postDelayed({\r\n            with(mqttClient!!) {\r\n                unregisterResources()\r\n                close()\r\n                disconnect()\r\n                setCallback(null)\r\n            }\r\n            mqttClient = null\r\n            setupMQTT() \r\n        },3000)\r\n    }\r\n}\r\n```\r\n\r\n```kotlin\r\n// when connection is complete try to subscribe topics\r\nprivate fun subscribeMQTT(){\r\n    mqttClient?.setCallback(object : MqttCallback {\r\n        override fun messageArrived(topic: String?, message: MqttMessage?) {\r\n            Log.d(&quot;mqtt-log&quot;, &quot;Receive message: ${message.toString()} from topic: $topic&quot;)\r\n        }\r\n\r\n        override fun connectionLost(cause: Throwable?) {\r\n            Log.d(&quot;mqtt-log&quot;, &quot;Connection lost ${cause.toString()}&quot;)\r\n            Handler(Looper.getMainLooper()).postDelayed({\r\n                with(mqttClient!!) {\r\n                    unregisterResources()\r\n                    close()\r\n                    disconnect()\r\n                    setCallback(null)\r\n                }\r\n                mqttClient = null\r\n                setupMQTT()\r\n            },3000)\r\n        }\r\n\r\n        override fun deliveryComplete(token: IMqttDeliveryToken?) {\r\n\r\n        }\r\n    })\r\n    mqttClient?.subscribe(&quot;topic&quot;, 1, null, object : IMqttActionListener {\r\n        override fun onSuccess(asyncActionToken: IMqttToken?) {\r\n            Log.d(&quot;mqtt-log&quot;, &quot;Subscribed to topic&quot;)\r\n        }\r\n\r\n        override fun onFailure(asyncActionToken: IMqttToken?, exception: Throwable?) {\r\n            Log.d(&quot;mqtt-log&quot;, &quot;Failed to subscribe topic&quot;)\r\n        }\r\n    })\r\n}\r\n```\r\n\r\nand the build-in `setAutomaticReconnect(true)` will only reconnect when the connection is already setup. manage reconnection by myself can trigger reconnect before the connection is setup.","title":"How to reconnect to MQTT with Paho drivers","body":"<p>I tried to use <code>MqttConnectOptions.setAutomaticReconnect(true)</code> but it cannot reconnect successfully when connection failure.</p>\n<p>so i try to manage reconnect myself using some code like below and it work!</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>// make the client nullable and set it to null before to reconnect\nprivate var mqttClient: MqttAndroidClient? = null\n</code></pre>\n<pre class=\"lang-kotlin prettyprint-override\"><code>// setup connection options and connect\nprivate fun setupMQTT(){\n    Log.d(&quot;mqtt-log&quot;, &quot;setup mqtt&quot;)\n    val serverIP = &quot;192.168.0.198&quot;\n    val serverPort = &quot;1883&quot;\n    val serverURI = &quot;tcp://${serverIP}:${serverPort}&quot;\n    mqttClient = MqttAndroidClient(this, serverURI, &quot;kotlin_client&quot;)\n    val options = MqttConnectOptions()\n    // don't use build-in automaticRecconnect\n    options.isAutomaticReconnect = false\n    options.connectionTimeout = 0\n    options.isCleanSession = false\n    try {\n        mqttClient!!.connect(options, null, iMqttActionListener)\n    } catch (e: MqttException) {\n        e.printStackTrace()\n        Log.d(&quot;mqtt-log&quot;, &quot;Exception&quot;)\n    }\n}\n</code></pre>\n<pre class=\"lang-kotlin prettyprint-override\"><code>// handle connection action\nval iMqttActionListener = object : IMqttActionListener {\n    override fun onSuccess(asyncActionToken: IMqttToken?) {\n        Log.d(&quot;mqtt-log&quot;, &quot;Connection success&quot;)\n        subscribeMQTT() // some methods for subscribing topics\n    }\n\n    override fun onFailure(asyncActionToken: IMqttToken?, exception: Throwable?) {\n        Log.d(&quot;mqtt-log&quot;, &quot;Connection failure&quot;)\n\n        // retry after 3s.\n        // its the very important part to retry.\n        Handler(Looper.getMainLooper()).postDelayed({\n            with(mqttClient!!) {\n                unregisterResources()\n                close()\n                disconnect()\n                setCallback(null)\n            }\n            mqttClient = null\n            setupMQTT() \n        },3000)\n    }\n}\n</code></pre>\n<pre class=\"lang-kotlin prettyprint-override\"><code>// when connection is complete try to subscribe topics\nprivate fun subscribeMQTT(){\n    mqttClient?.setCallback(object : MqttCallback {\n        override fun messageArrived(topic: String?, message: MqttMessage?) {\n            Log.d(&quot;mqtt-log&quot;, &quot;Receive message: ${message.toString()} from topic: $topic&quot;)\n        }\n\n        override fun connectionLost(cause: Throwable?) {\n            Log.d(&quot;mqtt-log&quot;, &quot;Connection lost ${cause.toString()}&quot;)\n            Handler(Looper.getMainLooper()).postDelayed({\n                with(mqttClient!!) {\n                    unregisterResources()\n                    close()\n                    disconnect()\n                    setCallback(null)\n                }\n                mqttClient = null\n                setupMQTT()\n            },3000)\n        }\n\n        override fun deliveryComplete(token: IMqttDeliveryToken?) {\n\n        }\n    })\n    mqttClient?.subscribe(&quot;topic&quot;, 1, null, object : IMqttActionListener {\n        override fun onSuccess(asyncActionToken: IMqttToken?) {\n            Log.d(&quot;mqtt-log&quot;, &quot;Subscribed to topic&quot;)\n        }\n\n        override fun onFailure(asyncActionToken: IMqttToken?, exception: Throwable?) {\n            Log.d(&quot;mqtt-log&quot;, &quot;Failed to subscribe topic&quot;)\n        }\n    })\n}\n</code></pre>\n<p>and the build-in <code>setAutomaticReconnect(true)</code> will only reconnect when the connection is already setup. manage reconnection by myself can trigger reconnect before the connection is setup.</p>\n"}],"owner":{"account_id":6671551,"reputation":1151,"user_id":5147553,"accept_rate":52,"display_name":"Phoste"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1183,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1642239497,"creation_date":1461326385,"question_id":36793280,"body_markdown":"I&#39;m using the MQTT client Java library for some of my applications and I think I&#39;m reconnecting to the broker the bad way. For now I have a class who handles the MQTT actions like connect, disconnect, publish and subscribe.\r\n\r\n    public class MqttConnection {\r\n    \r\n        private static final String BROKER_ADDRESS = Preferences.getProperty(&quot;mqtt-address&quot;);\r\n        private static final String BROKER_PORT = Preferences.getProperty(&quot;mqtt-port&quot;);\r\n        private static final String BROKER_URI = &quot;tcp://&quot; + BROKER_ADDRESS + &quot;:&quot; + BROKER_PORT;\r\n    \r\n        private static final String VHOST = Preferences.getProperty(&quot;mqtt-vhost&quot;);\r\n        private static final String USERNAME = Preferences.getProperty(&quot;mqtt-username&quot;);\r\n        private static final String PASSWORD = Preferences.getProperty(&quot;mqtt-password&quot;);\r\n    \r\n        private static MqttClient client;\r\n    \r\n        private static final Logger logger = LogManager.getLogger(MqttConnection.class);\r\n    \r\n        static {\r\n            try {\r\n                client = new MqttClient(BROKER_URI, MqttClient.generateClientId());\r\n            } catch (MqttException ex) {\r\n                logger.fatal(ex);\r\n            }\r\n            client.setCallback(new MqttCallback() {\r\n                @Override\r\n                public void connectionLost(Throwable thrwbl) {\r\n                    logger.info(&quot;MQTT : Perte de connexion...&quot;);\r\n                    MqttConnection.start();\r\n                }\r\n    \r\n                @Override\r\n                public void messageArrived(String topic, MqttMessage message) throws Exception {\r\n                    // CODE HERE\r\n                }\r\n    \r\n                @Override\r\n                public void deliveryComplete(IMqttDeliveryToken imdt) { }\r\n            });\r\n        }\r\n    \r\n        public static void start() {\r\n            connect();\r\n        }\r\n    \r\n        private static void connect() {\r\n            if (!client.isConnected()) {\r\n                try {\r\n                    if (Preferences.getProperty(&quot;mqtt-isauth&quot;).equalsIgnoreCase(&quot;true&quot;)) {\r\n                        MqttConnectOptions options = new MqttConnectOptions();\r\n                        String username = (VHOST.equals(&quot;&quot;)) ? USERNAME : VHOST + &quot;:&quot; + USERNAME;\r\n                        options.setUserName(username);\r\n                        options.setPassword(PASSWORD.toCharArray());\r\n                        client.connect(options);\r\n                    } else {\r\n                        client.connect();\r\n                    }\r\n                    logger.info(&quot;MQTT : Connect&#233; au broker.&quot;);\r\n                } catch (MqttException ex) {\r\n                    logger.fatal(ex);\r\n                    try {\r\n                        Thread.sleep(5000);\r\n                    } catch (InterruptedException e) {\r\n                        logger.fatal(e);\r\n                    }\r\n                    connect();\r\n                }\r\n            }\r\n        }\r\n    \r\n        private static void subscribe() {\r\n            if (client.isConnected()) {\r\n                try {\r\n                    client.subscribe(&quot;+/SWI1&quot;);\r\n                } catch (MqttException e) {\r\n                    logger.fatal(e);\r\n                }\r\n            }\r\n        }\r\n    }\r\nBut it seems to open many connections when it tries to reconnect, and makes the broker bug.\r\nWhat is the best way to reconnect to a MQTT broker ?","title":"How to reconnect to MQTT with Paho drivers","body":"<p>I'm using the MQTT client Java library for some of my applications and I think I'm reconnecting to the broker the bad way. For now I have a class who handles the MQTT actions like connect, disconnect, publish and subscribe.</p>\n\n<pre><code>public class MqttConnection {\n\n    private static final String BROKER_ADDRESS = Preferences.getProperty(\"mqtt-address\");\n    private static final String BROKER_PORT = Preferences.getProperty(\"mqtt-port\");\n    private static final String BROKER_URI = \"tcp://\" + BROKER_ADDRESS + \":\" + BROKER_PORT;\n\n    private static final String VHOST = Preferences.getProperty(\"mqtt-vhost\");\n    private static final String USERNAME = Preferences.getProperty(\"mqtt-username\");\n    private static final String PASSWORD = Preferences.getProperty(\"mqtt-password\");\n\n    private static MqttClient client;\n\n    private static final Logger logger = LogManager.getLogger(MqttConnection.class);\n\n    static {\n        try {\n            client = new MqttClient(BROKER_URI, MqttClient.generateClientId());\n        } catch (MqttException ex) {\n            logger.fatal(ex);\n        }\n        client.setCallback(new MqttCallback() {\n            @Override\n            public void connectionLost(Throwable thrwbl) {\n                logger.info(\"MQTT : Perte de connexion...\");\n                MqttConnection.start();\n            }\n\n            @Override\n            public void messageArrived(String topic, MqttMessage message) throws Exception {\n                // CODE HERE\n            }\n\n            @Override\n            public void deliveryComplete(IMqttDeliveryToken imdt) { }\n        });\n    }\n\n    public static void start() {\n        connect();\n    }\n\n    private static void connect() {\n        if (!client.isConnected()) {\n            try {\n                if (Preferences.getProperty(\"mqtt-isauth\").equalsIgnoreCase(\"true\")) {\n                    MqttConnectOptions options = new MqttConnectOptions();\n                    String username = (VHOST.equals(\"\")) ? USERNAME : VHOST + \":\" + USERNAME;\n                    options.setUserName(username);\n                    options.setPassword(PASSWORD.toCharArray());\n                    client.connect(options);\n                } else {\n                    client.connect();\n                }\n                logger.info(\"MQTT : Connecté au broker.\");\n            } catch (MqttException ex) {\n                logger.fatal(ex);\n                try {\n                    Thread.sleep(5000);\n                } catch (InterruptedException e) {\n                    logger.fatal(e);\n                }\n                connect();\n            }\n        }\n    }\n\n    private static void subscribe() {\n        if (client.isConnected()) {\n            try {\n                client.subscribe(\"+/SWI1\");\n            } catch (MqttException e) {\n                logger.fatal(e);\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>But it seems to open many connections when it tries to reconnect, and makes the broker bug.\nWhat is the best way to reconnect to a MQTT broker ?</p>\n"},{"tags":["java","spring-boot","rest","post","response-entity"],"comments":[{"owner":{"account_id":22354823,"reputation":16499,"user_id":16572295,"display_name":"Jo&#227;o Dias"},"score":0,"creation_date":1642184684,"post_id":70714918,"comment_id":125012245,"body_markdown":"Have you tried adding getters and setters to your `PostResponse` class? Additionally, since you are using Spring-Boot, get rid of the Jackson dependencies versions. You don&#39;t need them. In fact, you shouldn&#39;t even need them if you have `spring-boot-starter-web` as a dependency.","body":"Have you tried adding getters and setters to your <code>PostResponse</code> class? Additionally, since you are using Spring-Boot, get rid of the Jackson dependencies versions. You don&#39;t need them. In fact, you shouldn&#39;t even need them if you have <code>spring-boot-starter-web</code> as a dependency."},{"owner":{"account_id":13571762,"reputation":35,"user_id":9790326,"display_name":"&#214;zg&#252;r Akdeniz"},"score":0,"creation_date":1642185531,"post_id":70714918,"comment_id":125012522,"body_markdown":"Yes, i tried but result didn&#39;t change, it still returned null.","body":"Yes, i tried but result didn&#39;t change, it still returned null."},{"owner":{"account_id":22354823,"reputation":16499,"user_id":16572295,"display_name":"Jo&#227;o Dias"},"score":1,"creation_date":1642185659,"post_id":70714918,"comment_id":125012568,"body_markdown":"And are you sure `created` is not `null`?","body":"And are you sure <code>created</code> is not <code>null</code>?"},{"owner":{"account_id":13571762,"reputation":35,"user_id":9790326,"display_name":"&#214;zg&#252;r Akdeniz"},"score":1,"creation_date":1642186215,"post_id":70714918,"comment_id":125012761,"body_markdown":"Yes, i used logger to see if it&#39;s going to else part and it is","body":"Yes, i used logger to see if it&#39;s going to else part and it is"},{"owner":{"account_id":9763630,"reputation":16595,"user_id":7237884,"display_name":"Panagiotis Bougioukos"},"score":1,"creation_date":1642188919,"post_id":70714918,"comment_id":125013673,"body_markdown":"@&#214;zg&#252;rAkdeniz The error must be in the `postService.createVInfo(v);`. Add the relevant code to be able to help you more","body":"@&#214;zg&#252;rAkdeniz The error must be in the <code>postService.createVInfo(v);</code>. Add the relevant code to be able to help you more"}],"answers":[{"tags":[],"owner":{"account_id":8408747,"reputation":71,"user_id":6311418,"display_name":"Fahim Fahad"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1642184420,"creation_date":1642184420,"answer_id":70714968,"question_id":70714918,"body_markdown":"you will need getter/setter for PostResponse class","title":"ResponseEntity do not return json response for Post Method","body":"<p>you will need getter/setter for PostResponse class</p>\n"},{"tags":[],"owner":{"account_id":10050309,"reputation":445,"user_id":7430325,"display_name":"Torino"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1642185221,"creation_date":1642185221,"answer_id":70715092,"question_id":70714918,"body_markdown":"Try to put annotation `@RestController` on the class.","title":"ResponseEntity do not return json response for Post Method","body":"<p>Try to put annotation <code>@RestController</code> on the class.</p>\n"},{"tags":[],"owner":{"account_id":5492101,"reputation":16,"user_id":4364786,"display_name":"bhanuja"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1642216689,"creation_date":1642216689,"answer_id":70718633,"question_id":70714918,"body_markdown":"Do you have Getters and Setters in below class ? \r\n\r\n    public class PostResponse {\r\n    @JsonProperty(&quot;Avalue&quot;)\r\n    public String A_VALUE;\r\n    @JsonProperty(&quot;Bvalue&quot;)\r\n    public String B_VALUE;}","title":"ResponseEntity do not return json response for Post Method","body":"<p>Do you have Getters and Setters in below class ?</p>\n<pre><code>public class PostResponse {\n@JsonProperty(&quot;Avalue&quot;)\npublic String A_VALUE;\n@JsonProperty(&quot;Bvalue&quot;)\npublic String B_VALUE;}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9625696,"reputation":51,"user_id":7145392,"display_name":"Udit kaushik"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1642239465,"creation_date":1642239465,"answer_id":70720308,"question_id":70714918,"body_markdown":"**You have A_VALUE and B_VALUE as attributes in your class whereas you&#39;re setting values of a_value and b_value**.\r\n\r\nDo Autowire your PostService class and also remove these(Jackson) dependencies when you have starter-web dependency already. I would also recommend you to use Lombok&#39;s **@Data and @NoArgsConstructor** annotations at class level.\r\n","title":"ResponseEntity do not return json response for Post Method","body":"<p><strong>You have A_VALUE and B_VALUE as attributes in your class whereas you're setting values of a_value and b_value</strong>.</p>\n<p>Do Autowire your PostService class and also remove these(Jackson) dependencies when you have starter-web dependency already. I would also recommend you to use Lombok's <strong>@Data and @NoArgsConstructor</strong> annotations at class level.</p>\n"}],"owner":{"account_id":13571762,"reputation":35,"user_id":9790326,"display_name":"&#214;zg&#252;r Akdeniz"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1236,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":70720308,"answer_count":4,"score":2,"last_activity_date":1642239465,"creation_date":1642184126,"question_id":70714918,"body_markdown":"I&#39;m having a hard time at getting response as JSON format while sending post method.\r\nMy controller and response class is below. Also I used Jackson dependencies at my `pom.xml` and, I&#39;m using `@RestController` as Controller annotation.\r\n```xml\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n    &lt;artifactId&gt;jackson-core&lt;/artifactId&gt;\r\n    &lt;version&gt;2.8.0&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n     &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n     &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\r\n     &lt;version&gt;2.8.0&lt;/version&gt;\r\n &lt;/dependency&gt;\r\n &lt;dependency&gt;\r\n     &lt;artifactId&gt;jackson-annotations&lt;/artifactId&gt;\r\n     &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n     &lt;version&gt;2.8.0&lt;/version&gt;\r\n &lt;/dependency&gt;\r\n```\r\nI&#39;m expecting response to be as {Avalue:a, Bvalue:b} but instead it returns null for response.\r\nCan you help me to find where I&#39;m missing?\r\n\r\n```\r\n@RestController\r\npublic class Controller{\r\n   private PostService postService;\r\n   @RequestMapping(value = &quot;/create&quot;, method = RequestMethod.POST, produces = {MediaType.APPLICATION_JSON_VALUE})\r\n   public ResponseEntity&lt;PostResponse&gt; create(@RequestBody VInfo v) {\r\n     VInfo created = postService.createVInfo(v);\r\n     PostResponse pr = new PostResponse();\r\n     if (created == null) {\r\n         return new ResponseEntity(HttpStatus.INTERNAL_SERVER_ERROR);\r\n     } else {\r\n         pr.a_value= v.a_value;\r\n         pr.b_value= v.b_value;\r\n         return new ResponseEntity&lt;PostResponse&gt;(pr,HttpStatus.OK);\r\n      }\r\n   }\r\n}\r\n```\r\n```java\r\npublic class PostResponse {\r\n    @JsonProperty(&quot;Avalue&quot;)\r\n    public String A_VALUE;\r\n    @JsonProperty(&quot;Bvalue&quot;)\r\n    public String B_VALUE;\r\n}\r\n```\r\n\r\n```\r\n@Service\r\npublic class PostService {\r\n    @Autowired\r\n    private CreateVRepository postRepository;\r\n    public VInfo createVInfo(VInfo vInfo){\r\n        VInfo v1= new VInfo ();\r\n        v1.setA_VALUE(vInfo.getA_VALUE());\r\n        v1.setB_VALUE(vInfo.getB_VALUE());\r\n        postRepository.save(v1);\r\n        return v1;\r\n    }\r\n\r\n}\r\n```\r\nI used logger at my controller and I can see logger passing to else brackets without any problem. When I log my pr.a and pr.b objects,  they returns expected values. However response still returns null.\r\n","title":"ResponseEntity do not return json response for Post Method","body":"<p>I'm having a hard time at getting response as JSON format while sending post method.\nMy controller and response class is below. Also I used Jackson dependencies at my <code>pom.xml</code> and, I'm using <code>@RestController</code> as Controller annotation.</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n    &lt;artifactId&gt;jackson-core&lt;/artifactId&gt;\n    &lt;version&gt;2.8.0&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n     &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n     &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\n     &lt;version&gt;2.8.0&lt;/version&gt;\n &lt;/dependency&gt;\n &lt;dependency&gt;\n     &lt;artifactId&gt;jackson-annotations&lt;/artifactId&gt;\n     &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n     &lt;version&gt;2.8.0&lt;/version&gt;\n &lt;/dependency&gt;\n</code></pre>\n<p>I'm expecting response to be as {Avalue:a, Bvalue:b} but instead it returns null for response.\nCan you help me to find where I'm missing?</p>\n<pre><code>@RestController\npublic class Controller{\n   private PostService postService;\n   @RequestMapping(value = &quot;/create&quot;, method = RequestMethod.POST, produces = {MediaType.APPLICATION_JSON_VALUE})\n   public ResponseEntity&lt;PostResponse&gt; create(@RequestBody VInfo v) {\n     VInfo created = postService.createVInfo(v);\n     PostResponse pr = new PostResponse();\n     if (created == null) {\n         return new ResponseEntity(HttpStatus.INTERNAL_SERVER_ERROR);\n     } else {\n         pr.a_value= v.a_value;\n         pr.b_value= v.b_value;\n         return new ResponseEntity&lt;PostResponse&gt;(pr,HttpStatus.OK);\n      }\n   }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>public class PostResponse {\n    @JsonProperty(&quot;Avalue&quot;)\n    public String A_VALUE;\n    @JsonProperty(&quot;Bvalue&quot;)\n    public String B_VALUE;\n}\n</code></pre>\n<pre><code>@Service\npublic class PostService {\n    @Autowired\n    private CreateVRepository postRepository;\n    public VInfo createVInfo(VInfo vInfo){\n        VInfo v1= new VInfo ();\n        v1.setA_VALUE(vInfo.getA_VALUE());\n        v1.setB_VALUE(vInfo.getB_VALUE());\n        postRepository.save(v1);\n        return v1;\n    }\n\n}\n</code></pre>\n<p>I used logger at my controller and I can see logger passing to else brackets without any problem. When I log my pr.a and pr.b objects,  they returns expected values. However response still returns null.</p>\n"},{"tags":["java","arrays","list","class"],"answers":[{"tags":[],"owner":{"account_id":23803283,"reputation":126,"user_id":17813175,"display_name":"Mohaideen Samsudeen"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1642239368,"creation_date":1642239368,"answer_id":70720292,"question_id":70719937,"body_markdown":"Your two dimensional array should of size (m * n) where m is length of box list and n is fixed 3 for three properties (h, w, l). \r\n\r\nGet the length of arrayList ```  int length = listBox1.size(); ```\r\n\r\nA sample code as below.\r\n\r\n```\r\n      int[][] array = new int[length][3];\r\n      for(Box box : listBox1){\r\n            int index = listBox1.indexOf(box);\r\n            array[index][0] = box.h;\r\n            array[index][1] = box.w;\r\n            array[index][2] = box.l;\r\n        }\r\n\r\n      for(int i=0 ; i&lt;array.length; i++){\r\n         System.out.println(array[i][0] + &quot; &quot; + array[i][1] + &quot; &quot; + array[i][2]);\r\n       }        \r\n```","title":"How to convert custom class list to two dimensional array","body":"<p>Your two dimensional array should of size (m * n) where m is length of box list and n is fixed 3 for three properties (h, w, l).</p>\n<p>Get the length of arrayList <code> int length = listBox1.size();</code></p>\n<p>A sample code as below.</p>\n<pre><code>      int[][] array = new int[length][3];\n      for(Box box : listBox1){\n            int index = listBox1.indexOf(box);\n            array[index][0] = box.h;\n            array[index][1] = box.w;\n            array[index][2] = box.l;\n        }\n\n      for(int i=0 ; i&lt;array.length; i++){\n         System.out.println(array[i][0] + &quot; &quot; + array[i][1] + &quot; &quot; + array[i][2]);\n       }        \n</code></pre>\n"}],"owner":{"account_id":16979771,"reputation":33,"user_id":17431891,"display_name":"eques"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":110,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":70720292,"answer_count":1,"score":1,"last_activity_date":1642239368,"creation_date":1642235570,"question_id":70719937,"body_markdown":"I have class `Box`, which describes parameters of box (height, width, length):\r\n\r\n    public class Box {\r\n    public int h; \r\n    public int w; \r\n    public int l; \r\n\r\n    public Box(int h, int w, int l) {\r\n        this.h = h;\r\n        this.w = w;\r\n        this.l = l;\r\n    }\r\n\r\n In input i have list of boxes, how to convert it to two dimensional array? One row = one box:\r\n\r\n     List&lt;Box&gt; listBox1 = new ArrayList&lt;&gt;();\r\n     listBox1.add(new Box(12, 11, 12));\r\n     listBox1.add(new Box(11, 12, 12));\r\n     listBox1.add(new Box(1, 1, 1));\r\n     listBox1.add(new Box(67, 34, 13));\r\nOutput:\r\n\r\n    12 11 12 // 1st box and e.t.c...\r\n    11 12 12\r\n    1  1  1\r\n    67 34 13\r\n\r\n","title":"How to convert custom class list to two dimensional array","body":"<p>I have class <code>Box</code>, which describes parameters of box (height, width, length):</p>\n<pre><code>public class Box {\npublic int h; \npublic int w; \npublic int l; \n\npublic Box(int h, int w, int l) {\n    this.h = h;\n    this.w = w;\n    this.l = l;\n}\n</code></pre>\n<p>In input i have list of boxes, how to convert it to two dimensional array? One row = one box:</p>\n<pre><code> List&lt;Box&gt; listBox1 = new ArrayList&lt;&gt;();\n listBox1.add(new Box(12, 11, 12));\n listBox1.add(new Box(11, 12, 12));\n listBox1.add(new Box(1, 1, 1));\n listBox1.add(new Box(67, 34, 13));\n</code></pre>\n<p>Output:</p>\n<pre><code>12 11 12 // 1st box and e.t.c...\n11 12 12\n1  1  1\n67 34 13\n</code></pre>\n"},{"tags":["java","spring-boot","tls1.2","consul","spring-cloud-consul"],"comments":[{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1589526674,"post_id":61813667,"comment_id":109334637,"body_markdown":"I don&#39;t see how it can be an IPv6 bug, but it can certainly be a TLS problem, especially if it asked you for a client certifiate and you didn&#39;t supply one. Health-checks in general are a terrible idea, and over TLS they are even worse. HTTP(s) doesn&#39;t have one, for example, to name the most widely used application protocol on the planet.","body":"I don&#39;t see how it can be an IPv6 bug, but it can certainly be a TLS problem, especially if it asked you for a client certifiate and you didn&#39;t supply one. Health-checks in general are a terrible idea, and over TLS they are even worse. HTTP(s) doesn&#39;t have one, for example, to name the most widely used application protocol on the planet."},{"owner":{"account_id":1653169,"reputation":9535,"user_id":1523342,"accept_rate":91,"display_name":"mthmulders"},"score":4,"creation_date":1589530081,"post_id":61813667,"comment_id":109336225,"body_markdown":"You could restart the app with `-Djavax.net.debug=ssl:handshake`. It will create a lot of output, which will contain detailed information about the TLS handshake. Maybe it contains some pointers...","body":"You could restart the app with <code>-Djavax.net.debug=ssl:handshake</code>. It will create a lot of output, which will contain detailed information about the TLS handshake. Maybe it contains some pointers..."},{"owner":{"account_id":4154148,"reputation":1449,"user_id":3405822,"display_name":"jhkuperus"},"score":0,"creation_date":1589543241,"post_id":61813667,"comment_id":109342578,"body_markdown":"Definitiely trying that. More info is better at this stage. Let&#39;s see all that output.","body":"Definitiely trying that. More info is better at this stage. Let&#39;s see all that output."},{"owner":{"account_id":4154148,"reputation":1449,"user_id":3405822,"display_name":"jhkuperus"},"score":0,"creation_date":1589649478,"post_id":61813667,"comment_id":109379858,"body_markdown":"Tried the handshake debugging. Results have been added to the post above.","body":"Tried the handshake debugging. Results have been added to the post above."}],"answers":[{"tags":[],"owner":{"account_id":4154148,"reputation":1449,"user_id":3405822,"display_name":"jhkuperus"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1642239358,"creation_date":1589972836,"answer_id":61911534,"question_id":61813667,"body_markdown":"After some more digging and trying other versions of things. I found that using GraalVM produces a different, but slightly more descriptive error. When trying to connect to the Consul-application, it immediately terminates with this message:\r\n\r\n```\r\nCaused by: javax.net.ssl.SSLHandshakeException: extension (5) should not be presented in certificate_request\r\n\tat java.base/sun.security.ssl.Alert.createSSLException(Alert.java:131)\r\n\tat java.base/sun.security.ssl.Alert.createSSLException(Alert.java:117)\r\n\tat java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:307)\r\n\tat java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:263)\r\n\tat java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:254)\r\n\tat java.base/sun.security.ssl.SSLExtensions.&lt;init&gt;(SSLExtensions.java:90)\r\n\tat java.base/sun.security.ssl.CertificateRequest$T13CertificateRequestMessage.&lt;init&gt;(CertificateRequest.java:818)\r\n\tat java.base/sun.security.ssl.CertificateRequest$T13CertificateRequestConsumer.consume(CertificateRequest.java:922)\r\n\tat java.base/sun.security.ssl.SSLHandshake.consume(SSLHandshake.java:392)\r\n\tat java.base/sun.security.ssl.HandshakeContext.dispatch(HandshakeContext.java:443)\r\n\tat java.base/sun.security.ssl.HandshakeContext.dispatch(HandshakeContext.java:421)\r\n\tat java.base/sun.security.ssl.TransportContext.dispatch(TransportContext.java:177)\r\n\tat java.base/sun.security.ssl.SSLTransport.decode(SSLTransport.java:164)\r\n\tat java.base/sun.security.ssl.SSLSocketImpl.decode(SSLSocketImpl.java:1151)\r\n\tat java.base/sun.security.ssl.SSLSocketImpl.readHandshakeRecord(SSLSocketImpl.java:1062)\r\n\tat java.base/sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:402)\r\n\tat org.apache.http.conn.ssl.SSLConnectionSocketFactory.createLayeredSocket(SSLConnectionSocketFactory.java:394)\r\n\tat org.apache.http.conn.ssl.SSLConnectionSocketFactory.connectSocket(SSLConnectionSocketFactory.java:353)\r\n\tat org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:134)\r\n\tat org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:353)\r\n\tat org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:380)\r\n\tat org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)\r\n\tat org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:184)\r\n\tat org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:88)\r\n\tat org.apache.http.impl.execchain.RedirectExec.execute(RedirectExec.java:110)\r\n\tat org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:184)\r\n\tat org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:71)\r\n\tat org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:220)\r\n\tat org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:164)\r\n\tat org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:139)\r\n\tat com.ecwid.consul.transport.AbstractHttpTransport.executeRequest(AbstractHttpTransport.java:61)\r\n```\r\n\r\nThis then led me to an issue on the Golang GitHub-page: https://github.com/golang/go/issues/35722. It details similar issues from various people, but constantly with slightly different details. In that thread, there is mention of a discrepancy between TLS 1.3 implementations between Go and Java. The OpenJDK-maintainers also chip in and refer to this issue: https://bugs.openjdk.java.net/browse/JDK-8236039. \r\n\r\nIt has been fixed and closed, but is not yet available in any of my regular binary distributions. I will try to check whether that version actually fixes the problem. However, there is a workaround by forcing Java to use only TLS1.2. You can do this by adding `-Djdk.tls.client.protocols=TLSv1.2` to the startup arguments.","title":"Why is the SSL connection between a Spring Boot app and Consul failing after a few minutes?","body":"<p>After some more digging and trying other versions of things. I found that using GraalVM produces a different, but slightly more descriptive error. When trying to connect to the Consul-application, it immediately terminates with this message:</p>\n<pre><code>Caused by: javax.net.ssl.SSLHandshakeException: extension (5) should not be presented in certificate_request\n    at java.base/sun.security.ssl.Alert.createSSLException(Alert.java:131)\n    at java.base/sun.security.ssl.Alert.createSSLException(Alert.java:117)\n    at java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:307)\n    at java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:263)\n    at java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:254)\n    at java.base/sun.security.ssl.SSLExtensions.&lt;init&gt;(SSLExtensions.java:90)\n    at java.base/sun.security.ssl.CertificateRequest$T13CertificateRequestMessage.&lt;init&gt;(CertificateRequest.java:818)\n    at java.base/sun.security.ssl.CertificateRequest$T13CertificateRequestConsumer.consume(CertificateRequest.java:922)\n    at java.base/sun.security.ssl.SSLHandshake.consume(SSLHandshake.java:392)\n    at java.base/sun.security.ssl.HandshakeContext.dispatch(HandshakeContext.java:443)\n    at java.base/sun.security.ssl.HandshakeContext.dispatch(HandshakeContext.java:421)\n    at java.base/sun.security.ssl.TransportContext.dispatch(TransportContext.java:177)\n    at java.base/sun.security.ssl.SSLTransport.decode(SSLTransport.java:164)\n    at java.base/sun.security.ssl.SSLSocketImpl.decode(SSLSocketImpl.java:1151)\n    at java.base/sun.security.ssl.SSLSocketImpl.readHandshakeRecord(SSLSocketImpl.java:1062)\n    at java.base/sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:402)\n    at org.apache.http.conn.ssl.SSLConnectionSocketFactory.createLayeredSocket(SSLConnectionSocketFactory.java:394)\n    at org.apache.http.conn.ssl.SSLConnectionSocketFactory.connectSocket(SSLConnectionSocketFactory.java:353)\n    at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:134)\n    at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:353)\n    at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:380)\n    at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)\n    at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:184)\n    at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:88)\n    at org.apache.http.impl.execchain.RedirectExec.execute(RedirectExec.java:110)\n    at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:184)\n    at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:71)\n    at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:220)\n    at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:164)\n    at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:139)\n    at com.ecwid.consul.transport.AbstractHttpTransport.executeRequest(AbstractHttpTransport.java:61)\n</code></pre>\n<p>This then led me to an issue on the Golang GitHub-page: <a href=\"https://github.com/golang/go/issues/35722\" rel=\"nofollow noreferrer\">https://github.com/golang/go/issues/35722</a>. It details similar issues from various people, but constantly with slightly different details. In that thread, there is mention of a discrepancy between TLS 1.3 implementations between Go and Java. The OpenJDK-maintainers also chip in and refer to this issue: <a href=\"https://bugs.openjdk.java.net/browse/JDK-8236039\" rel=\"nofollow noreferrer\">https://bugs.openjdk.java.net/browse/JDK-8236039</a>.</p>\n<p>It has been fixed and closed, but is not yet available in any of my regular binary distributions. I will try to check whether that version actually fixes the problem. However, there is a workaround by forcing Java to use only TLS1.2. You can do this by adding <code>-Djdk.tls.client.protocols=TLSv1.2</code> to the startup arguments.</p>\n"}],"owner":{"account_id":4154148,"reputation":1449,"user_id":3405822,"display_name":"jhkuperus"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3215,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"accepted_answer_id":61911534,"answer_count":1,"score":10,"last_activity_date":1642239358,"creation_date":1589526468,"question_id":61813667,"body_markdown":"I&#39;m in the process of upgrading an environment with new versions of Ubuntu, Consul and Spring Boot. At first glance, everything seems to be working just fine. The app connects to Consul, requests its configuration and boots up. After a few minutes however, something breaks and this message is repeated approximately every 2 seconds:\r\n\r\n```\r\ncom.ecwid.consul.transport.TransportException: javax.net.ssl.SSLHandshakeException: Remote host terminated the handshake\r\n\tat com.ecwid.consul.transport.AbstractHttpTransport.executeRequest(AbstractHttpTransport.java:77)\r\n\tat com.ecwid.consul.transport.AbstractHttpTransport.makeGetRequest(AbstractHttpTransport.java:34)\r\n\tat com.ecwid.consul.v1.ConsulRawClient.makeGetRequest(ConsulRawClient.java:128)\r\n\tat com.ecwid.consul.v1.catalog.CatalogConsulClient.getCatalogServices(CatalogConsulClient.java:120)\r\n\tat com.ecwid.consul.v1.ConsulClient.getCatalogServices(ConsulClient.java:372)\r\n\tat org.springframework.cloud.consul.discovery.ConsulCatalogWatch.catalogServicesWatch(ConsulCatalogWatch.java:129)\r\n\tat org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)\r\n\tat java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)\r\n\tat java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:305)\r\n\tat java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\r\n\tat java.base/java.lang.Thread.run(Thread.java:834)\r\nCaused by: javax.net.ssl.SSLHandshakeException: Remote host terminated the handshake\r\n\tat java.base/sun.security.ssl.SSLSocketImpl.handleEOF(SSLSocketImpl.java:1313)\r\n\tat java.base/sun.security.ssl.SSLSocketImpl.decode(SSLSocketImpl.java:1152)\r\n\tat java.base/sun.security.ssl.SSLSocketImpl.readHandshakeRecord(SSLSocketImpl.java:1055)\r\n\tat java.base/sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:395)\r\n\tat org.apache.http.conn.ssl.SSLConnectionSocketFactory.createLayeredSocket(SSLConnectionSocketFactory.java:394)\r\n\tat org.apache.http.conn.ssl.SSLConnectionSocketFactory.connectSocket(SSLConnectionSocketFactory.java:353)\r\n\tat org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:134)\r\n\tat org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:353)\r\n\tat org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:380)\r\n```\r\n\r\nI traced the fact that the message appears every 2 seconds to the apps health-check. Once the error occurs for the first time, it continues to occur on each subsequent health-check. This was confirmed by turning the health-check off and rebooting. This caused the error to occur exactly once, when the TTL on the Consul-data was reached.\r\n\r\nThis is where my understanding of the problem ends. I&#39;ve tried to trace it to several things, but none of these led to a solution:\r\n\r\n* **Checking the certificates** - The certificates used are generated by Vault, signed by an intermediate certificate, signed by a self-signed root-certificate. These are then placed in a pkcs12 bundle, with the key and provided to the application. This works on all TLS-connections, also from the CLI tools and with `curl`. This seems like a dead end.\r\n* **Network Connectivity** - Since the connection is being reset, I tried to see if it was due to firewall or security-group issues. However, the relevant port (8501) is open for both TCP and UDP traffic and all manual tests with `nc` show the ports to be reachable.\r\n* **IPv6 bug** - Somewhere, I found a post saying this could be due to a bug with IPv6. I tried turning IPv6 off on the machine, reboot everything and try again. No luck, still the same error.\r\n* **Versions of Consul** - I tried running the application in our old environment, where Consul 1.2.3 is running and the error there does not show up. I&#39;m still in the process of trying to find out if there is a specific Consul-version where this problem begins to occur, but haven&#39;t found it yet.\r\n* **TLS bugs** - Between Consul 1.2.3 and 1.7.2 there have been some changes to Consul&#39;s TLS-support as well as to the underlying Go TLS implementations. This came to light when testing with Consul 1.4.0, which provided a slightly different TLS error. Some suggestions on the internet were that there are conflicting implementations between Go and OpenJDK. I tried forcing the Java-application to use TLS 1.2, but again, no luck.\r\n* **Handshake Debugging** - Based on a tip from the comments, I used `-Djavax.net.debug=ssl:handshake` to find out what is happening during the handshake. During the first couple of minutes, the produced extra output shows what looks to me like normal handshakes. Once the problem occurs, the output of the handshakes stops right after &quot;Produced Client Hello message&quot; with a &quot;Remote host terminated the handshake&quot;. I haven&#39;t been able to do the same with the other side of this connection. Consul is a Golang application. If anyone knows how to get the same debugging-information for a Golan app, please advise.\r\n\r\nI hope someone has an idea about how to find the cause of this problem, or better yet, have a solution for it.","title":"Why is the SSL connection between a Spring Boot app and Consul failing after a few minutes?","body":"<p>I'm in the process of upgrading an environment with new versions of Ubuntu, Consul and Spring Boot. At first glance, everything seems to be working just fine. The app connects to Consul, requests its configuration and boots up. After a few minutes however, something breaks and this message is repeated approximately every 2 seconds:</p>\n\n<pre><code>com.ecwid.consul.transport.TransportException: javax.net.ssl.SSLHandshakeException: Remote host terminated the handshake\n    at com.ecwid.consul.transport.AbstractHttpTransport.executeRequest(AbstractHttpTransport.java:77)\n    at com.ecwid.consul.transport.AbstractHttpTransport.makeGetRequest(AbstractHttpTransport.java:34)\n    at com.ecwid.consul.v1.ConsulRawClient.makeGetRequest(ConsulRawClient.java:128)\n    at com.ecwid.consul.v1.catalog.CatalogConsulClient.getCatalogServices(CatalogConsulClient.java:120)\n    at com.ecwid.consul.v1.ConsulClient.getCatalogServices(ConsulClient.java:372)\n    at org.springframework.cloud.consul.discovery.ConsulCatalogWatch.catalogServicesWatch(ConsulCatalogWatch.java:129)\n    at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)\n    at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)\n    at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:305)\n    at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)\n    at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\n    at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\n    at java.base/java.lang.Thread.run(Thread.java:834)\nCaused by: javax.net.ssl.SSLHandshakeException: Remote host terminated the handshake\n    at java.base/sun.security.ssl.SSLSocketImpl.handleEOF(SSLSocketImpl.java:1313)\n    at java.base/sun.security.ssl.SSLSocketImpl.decode(SSLSocketImpl.java:1152)\n    at java.base/sun.security.ssl.SSLSocketImpl.readHandshakeRecord(SSLSocketImpl.java:1055)\n    at java.base/sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:395)\n    at org.apache.http.conn.ssl.SSLConnectionSocketFactory.createLayeredSocket(SSLConnectionSocketFactory.java:394)\n    at org.apache.http.conn.ssl.SSLConnectionSocketFactory.connectSocket(SSLConnectionSocketFactory.java:353)\n    at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:134)\n    at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:353)\n    at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:380)\n</code></pre>\n\n<p>I traced the fact that the message appears every 2 seconds to the apps health-check. Once the error occurs for the first time, it continues to occur on each subsequent health-check. This was confirmed by turning the health-check off and rebooting. This caused the error to occur exactly once, when the TTL on the Consul-data was reached.</p>\n\n<p>This is where my understanding of the problem ends. I've tried to trace it to several things, but none of these led to a solution:</p>\n\n<ul>\n<li><strong>Checking the certificates</strong> - The certificates used are generated by Vault, signed by an intermediate certificate, signed by a self-signed root-certificate. These are then placed in a pkcs12 bundle, with the key and provided to the application. This works on all TLS-connections, also from the CLI tools and with <code>curl</code>. This seems like a dead end.</li>\n<li><strong>Network Connectivity</strong> - Since the connection is being reset, I tried to see if it was due to firewall or security-group issues. However, the relevant port (8501) is open for both TCP and UDP traffic and all manual tests with <code>nc</code> show the ports to be reachable.</li>\n<li><strong>IPv6 bug</strong> - Somewhere, I found a post saying this could be due to a bug with IPv6. I tried turning IPv6 off on the machine, reboot everything and try again. No luck, still the same error.</li>\n<li><strong>Versions of Consul</strong> - I tried running the application in our old environment, where Consul 1.2.3 is running and the error there does not show up. I'm still in the process of trying to find out if there is a specific Consul-version where this problem begins to occur, but haven't found it yet.</li>\n<li><strong>TLS bugs</strong> - Between Consul 1.2.3 and 1.7.2 there have been some changes to Consul's TLS-support as well as to the underlying Go TLS implementations. This came to light when testing with Consul 1.4.0, which provided a slightly different TLS error. Some suggestions on the internet were that there are conflicting implementations between Go and OpenJDK. I tried forcing the Java-application to use TLS 1.2, but again, no luck.</li>\n<li><strong>Handshake Debugging</strong> - Based on a tip from the comments, I used <code>-Djavax.net.debug=ssl:handshake</code> to find out what is happening during the handshake. During the first couple of minutes, the produced extra output shows what looks to me like normal handshakes. Once the problem occurs, the output of the handshakes stops right after \"Produced Client Hello message\" with a \"Remote host terminated the handshake\". I haven't been able to do the same with the other side of this connection. Consul is a Golang application. If anyone knows how to get the same debugging-information for a Golan app, please advise.</li>\n</ul>\n\n<p>I hope someone has an idea about how to find the cause of this problem, or better yet, have a solution for it.</p>\n"},{"tags":["java","android","xml","android-studio","user-interface"],"comments":[{"owner":{"account_id":11547848,"reputation":1276,"user_id":8461344,"display_name":"Code Demon"},"score":0,"creation_date":1642239427,"post_id":70720230,"comment_id":125021616,"body_markdown":"This is possible but first you have to create a map view then see how to add the custom marker icons fro images :https://www.geeksforgeeks.org/how-to-add-custom-marker-to-google-maps-in-android/","body":"This is possible but first you have to create a map view then see how to add the custom marker icons fro images :<a href=\"https://www.geeksforgeeks.org/how-to-add-custom-marker-to-google-maps-in-android/\" rel=\"nofollow noreferrer\">geeksforgeeks.org/&hellip;</a>"},{"owner":{"account_id":2538535,"reputation":431,"user_id":2204958,"accept_rate":94,"display_name":"puti26"},"score":0,"creation_date":1642239935,"post_id":70720230,"comment_id":125021725,"body_markdown":"Yes, but I would like to obtain that exact kind. not using google maps","body":"Yes, but I would like to obtain that exact kind. not using google maps"}],"owner":{"account_id":2538535,"reputation":431,"user_id":2204958,"accept_rate":94,"display_name":"puti26"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":171,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1642238787,"creation_date":1642238787,"question_id":70720230,"body_markdown":"I have an app that has two activities, main_activity and second_activity. This app allow the user to book the entire house from a map. \r\nFrom the first activity the user press the button and the second activity open.\r\n\r\nNow I would like to implement on the second activity a customized map with customized markers. That looks like this, but I have no idea how to realize it, I have found a pic on google of what similar of what I would like to implement.\r\n\r\n[![map custom][1]][1]\r\n\r\nCould someone help me and explain me how I could reach this result?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/HJBdo.jpg","title":"How to create custom map with customized markers in android studio XML","body":"<p>I have an app that has two activities, main_activity and second_activity. This app allow the user to book the entire house from a map.\nFrom the first activity the user press the button and the second activity open.</p>\n<p>Now I would like to implement on the second activity a customized map with customized markers. That looks like this, but I have no idea how to realize it, I have found a pic on google of what similar of what I would like to implement.</p>\n<p><a href=\"https://i.stack.imgur.com/HJBdo.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/HJBdo.jpg\" alt=\"map custom\" /></a></p>\n<p>Could someone help me and explain me how I could reach this result?</p>\n"},{"tags":["java","spring-boot","spring-data-jpa","mapstruct","modelmapper"],"comments":[{"owner":{"account_id":1038596,"reputation":34548,"user_id":1045142,"accept_rate":67,"display_name":"Simon Martinelli"},"score":2,"creation_date":1641827042,"post_id":70654342,"comment_id":124901701,"body_markdown":"That&#39;s not how it works.","body":"That&#39;s not how it works."}],"answers":[{"tags":[],"owner":{"account_id":1310803,"reputation":2557,"user_id":1258838,"accept_rate":68,"display_name":"Juliyanage Silva"},"down_vote_count":1,"up_vote_count":0,"is_accepted":true,"score":-1,"last_activity_date":1641828648,"creation_date":1641828648,"answer_id":70654877,"question_id":70654342,"body_markdown":"I would suggest implementing toString only to check the all null case:\r\n\r\n    toString(){&quot;id:&quot;+id+&quot;,name:&quot;+name;}\r\n\r\nSo if this returns &quot;id:null,name:null&quot; then you can be sure it&#39;s null and return null after checking equals","title":"Mapping DTO an Entity, leave entity null if all your field is null","body":"<p>I would suggest implementing toString only to check the all null case:</p>\n<pre><code>toString(){&quot;id:&quot;+id+&quot;,name:&quot;+name;}\n</code></pre>\n<p>So if this returns &quot;id:null,name:null&quot; then you can be sure it's null and return null after checking equals</p>\n"},{"tags":[],"owner":{"account_id":1128956,"reputation":19765,"user_id":1115491,"display_name":"Filip"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1642238613,"creation_date":1642238613,"answer_id":70720214,"question_id":70654342,"body_markdown":"In the upcoming 1.5 release MapStruct is adding support for conditional mapping. In the current released Beta2 of 1.5 there is no support for conditional support parameters. However, there is an open [enhancement request](https://github.com/mapstruct/mapstruct/issues/2610) to add this for source parameters.\r\n\r\nWhat this means is that you can do something like:\r\n\r\n```\r\npublic class MappingUtils {\r\n\r\n    @Condition\r\n    public static boolean isPresent(TestEntityDTO dto) {\r\n        if (dto == null) {\r\n            return false;\r\n        }\r\n\r\n        return dto.getId() != null || dto.getName() != null;\r\n    }\r\n\r\n}\r\n```\r\n\r\nWhich means that you can have a mapper like:\r\n\r\n```\r\n@Mapper(uses = MappingUtils.class)\r\npublic interface TestEntityMapper {\r\n\r\n    TestEntity testEntityDTOToTestEntity(TestEntityDTO testEntityDTO);\r\n\r\n}\r\n```\r\n\r\nand the implementation will look like:\r\n\r\n```\r\npublic class TestEntityMapperImpl implements {\r\n\r\n    @Override\r\n    public TestEntity testEntityDTOToTestEntity(TestEntityDTO dto) {\r\n        if (!MappingUtils.isPresent(dto)) {\r\n            return null\r\n        }\r\n\r\n        // the rest of the mapping\r\n    }\r\n}\r\n```\r\n\r\nNote: this is not yet possible in a release version, but this is how it will work. Apart from this future solution there is no other solution out-of-the-box with MapStruct.","title":"Mapping DTO an Entity, leave entity null if all your field is null","body":"<p>In the upcoming 1.5 release MapStruct is adding support for conditional mapping. In the current released Beta2 of 1.5 there is no support for conditional support parameters. However, there is an open <a href=\"https://github.com/mapstruct/mapstruct/issues/2610\" rel=\"nofollow noreferrer\">enhancement request</a> to add this for source parameters.</p>\n<p>What this means is that you can do something like:</p>\n<pre><code>public class MappingUtils {\n\n    @Condition\n    public static boolean isPresent(TestEntityDTO dto) {\n        if (dto == null) {\n            return false;\n        }\n\n        return dto.getId() != null || dto.getName() != null;\n    }\n\n}\n</code></pre>\n<p>Which means that you can have a mapper like:</p>\n<pre><code>@Mapper(uses = MappingUtils.class)\npublic interface TestEntityMapper {\n\n    TestEntity testEntityDTOToTestEntity(TestEntityDTO testEntityDTO);\n\n}\n</code></pre>\n<p>and the implementation will look like:</p>\n<pre><code>public class TestEntityMapperImpl implements {\n\n    @Override\n    public TestEntity testEntityDTOToTestEntity(TestEntityDTO dto) {\n        if (!MappingUtils.isPresent(dto)) {\n            return null\n        }\n\n        // the rest of the mapping\n    }\n}\n</code></pre>\n<p>Note: this is not yet possible in a release version, but this is how it will work. Apart from this future solution there is no other solution out-of-the-box with MapStruct.</p>\n"}],"owner":{"account_id":5819693,"reputation":23,"user_id":4588171,"display_name":"Ailton Da Costa"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2271,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":70654877,"answer_count":2,"score":2,"last_activity_date":1642238613,"creation_date":1641826451,"question_id":70654342,"body_markdown":"My entity is return fields null example: EntityTest{id=null, name=null}\r\n\r\nbut I need that if all fields are null return EntityTest = null\r\n\r\n**TestEntity**\r\n\r\n```\r\n@Entity\r\n@Table(name=&quot;TestEntity&quot;)\r\npublic class TestEntity {\r\n    @Id\r\n    @Column(name=&quot;id&quot;)\r\n    @GeneratedValue(strategy = GenerationType.AUTO)\r\n    private long id;\r\n\r\n    @Column(name=&quot;test_name&quot;)\r\n    private String testName;\r\n}\r\n```\r\n**TestEntityDto**\r\n\r\n```\r\npublic class TestEntityDto {\r\n\r\n    private long id;\r\n    private String test_name;\r\n}\r\n```\r\n**TestEntityMapper**\r\n\r\n```\r\n@Mapper\r\npublic interface TestEntityMapper {\r\n    TestEntity TestEntityDTOToTestEntity(TestEntityDTO testEntityDTO);\r\n\r\n```\r\nImplementa\r\n```\r\ntestEntityDTO.setId(null);\r\ntestEntityDTO.setNameTest(null);\r\nTestEntity testEntity = TestEntityMapper.TestEntityDTOToTestEntity(testEntityDTO);\r\n\r\n```\r\n\r\n**Actual Result:**\r\n\r\n```\r\nEntityTest{id=null, name=null}\r\n```\r\n\r\n**Expected Result:**\r\n```\r\nEntityTest = null\r\n```\r\n\r\n\r\n","title":"Mapping DTO an Entity, leave entity null if all your field is null","body":"<p>My entity is return fields null example: EntityTest{id=null, name=null}</p>\n<p>but I need that if all fields are null return EntityTest = null</p>\n<p><strong>TestEntity</strong></p>\n<pre><code>@Entity\n@Table(name=&quot;TestEntity&quot;)\npublic class TestEntity {\n    @Id\n    @Column(name=&quot;id&quot;)\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    private long id;\n\n    @Column(name=&quot;test_name&quot;)\n    private String testName;\n}\n</code></pre>\n<p><strong>TestEntityDto</strong></p>\n<pre><code>public class TestEntityDto {\n\n    private long id;\n    private String test_name;\n}\n</code></pre>\n<p><strong>TestEntityMapper</strong></p>\n<pre><code>@Mapper\npublic interface TestEntityMapper {\n    TestEntity TestEntityDTOToTestEntity(TestEntityDTO testEntityDTO);\n\n</code></pre>\n<p>Implementa</p>\n<pre><code>testEntityDTO.setId(null);\ntestEntityDTO.setNameTest(null);\nTestEntity testEntity = TestEntityMapper.TestEntityDTOToTestEntity(testEntityDTO);\n\n</code></pre>\n<p><strong>Actual Result:</strong></p>\n<pre><code>EntityTest{id=null, name=null}\n</code></pre>\n<p><strong>Expected Result:</strong></p>\n<pre><code>EntityTest = null\n</code></pre>\n"},{"tags":["java","interface","mapping","pojo","mapstruct"],"answers":[{"tags":[],"owner":{"account_id":2507795,"reputation":11,"user_id":2180948,"display_name":"Saman Perera"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1641803878,"creation_date":1641803878,"answer_id":70649706,"question_id":70649625,"body_markdown":"Apply below annotation in DtoMapper interface \r\n\r\n @InheritInverseConfiguration\r\n ExampleModel dtoToDdModel(ExampleDto exampleDto)","title":"MapStuct partial implementation - Java","body":"<p>Apply below annotation in DtoMapper interface</p>\n<p>@InheritInverseConfiguration\nExampleModel dtoToDdModel(ExampleDto exampleDto)</p>\n"},{"tags":[],"owner":{"account_id":1128956,"reputation":19765,"user_id":1115491,"display_name":"Filip"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1642238243,"creation_date":1642238243,"answer_id":70720185,"question_id":70649625,"body_markdown":"MapStruct will only implement the abstract methods. Which means that if you provide a custom default methods then MapStruct will not implement it.\r\n\r\ne.g.\r\n\r\n```\r\n@Mapper\r\npublic interface DtoMapper {\r\n    DtoMapper MAPPER = Mappers.getMapper(DtoMapper.class);\r\n\r\n    default ExampleModel dtoToDdModel(ExampleDto exampleDto) {\r\n        //TODO write implementation\r\n    }\r\n\r\n    ExampleDto someOtherEntityToDto(OtherEntity otherEntity);\r\n}\r\n```\r\n\r\nNote: the `@Mapper` does not have to be an `interface` it can also be an abstract class.","title":"MapStuct partial implementation - Java","body":"<p>MapStruct will only implement the abstract methods. Which means that if you provide a custom default methods then MapStruct will not implement it.</p>\n<p>e.g.</p>\n<pre><code>@Mapper\npublic interface DtoMapper {\n    DtoMapper MAPPER = Mappers.getMapper(DtoMapper.class);\n\n    default ExampleModel dtoToDdModel(ExampleDto exampleDto) {\n        //TODO write implementation\n    }\n\n    ExampleDto someOtherEntityToDto(OtherEntity otherEntity);\n}\n</code></pre>\n<p>Note: the <code>@Mapper</code> does not have to be an <code>interface</code> it can also be an abstract class.</p>\n"}],"owner":{"account_id":8099270,"reputation":145,"user_id":6102739,"display_name":"Anamika Patel"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":318,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1642238243,"creation_date":1641803455,"question_id":70649625,"body_markdown":"My code goes like this, \r\n\r\n```\r\n@Mapper\r\npublic interface DtoMapper {\r\n    DtoMapper MAPPER = Mappers.getMapper(DtoMapper.class);\r\n\r\n    ExampleModel dtoToDdModel(ExampleDto exampleDto);\r\n\r\n    ExampleDto someOtherEntityToDto(OtherEntity otherEntity);\r\n}\r\n```\r\n\r\n\r\n```\r\npublic class DtoMapperImpl implements DtoMapper {\r\n    @Override\r\n    public ExampleDto someOtherEntityToDto(OtherEntity otherEntity){\r\n        if ( OtherEntity == null ) {\r\n            return null;\r\n        }\r\n        // Conversion\r\n    }\r\n\r\n    // I don&#39;t want to define dtoToDdModel\r\n}\r\n```\r\n\r\nIs it possible to only provide implementation of `someOtherEntityToDto` in `DtoMapperImpl`? While `dtoToDdModel` follows the default mapping provided by MapStruct? \r\n\r\n\r\nThank you in Advance!  \r\n","title":"MapStuct partial implementation - Java","body":"<p>My code goes like this,</p>\n<pre><code>@Mapper\npublic interface DtoMapper {\n    DtoMapper MAPPER = Mappers.getMapper(DtoMapper.class);\n\n    ExampleModel dtoToDdModel(ExampleDto exampleDto);\n\n    ExampleDto someOtherEntityToDto(OtherEntity otherEntity);\n}\n</code></pre>\n<pre><code>public class DtoMapperImpl implements DtoMapper {\n    @Override\n    public ExampleDto someOtherEntityToDto(OtherEntity otherEntity){\n        if ( OtherEntity == null ) {\n            return null;\n        }\n        // Conversion\n    }\n\n    // I don't want to define dtoToDdModel\n}\n</code></pre>\n<p>Is it possible to only provide implementation of <code>someOtherEntityToDto</code> in <code>DtoMapperImpl</code>? While <code>dtoToDdModel</code> follows the default mapping provided by MapStruct?</p>\n<p>Thank you in Advance!</p>\n"},{"tags":["java","gradle","io","filewriter"],"comments":[{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":1,"creation_date":1639988661,"post_id":70418910,"comment_id":124479259,"body_markdown":"The problem is most likely in the Gradle file ... not the Java source code you are trying to compile.  The fix will be to update the Gradle file ... not downgrade Gradle.","body":"The problem is most likely in the Gradle file ... not the Java source code you are trying to compile.  The fix will be to update the Gradle file ... not downgrade Gradle."},{"owner":{"account_id":18729807,"reputation":25,"user_id":13655487,"display_name":"Serya"},"score":0,"creation_date":1640063535,"post_id":70418910,"comment_id":124500471,"body_markdown":"I upgrade to the latest gradle,but it still doesn&#39;t work\n`distributionUrl=https://services.gradle.org/distributions/gradle-7.3.2-bin.zip`","body":"I upgrade to the latest gradle,but it still doesn&#39;t work <code>distributionUrl=https:&#47;&#47;services.gradle.org&#47;distributions&#47;gr&zwnj;&#8203;adle-7.3.2-bin.zip</code>"},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1640063736,"post_id":70418910,"comment_id":124500508,"body_markdown":"I didn&#39;t say &quot;upgrade Gradle&quot;.  I said update the gradle file.  The file that specifies how Gradle builds your application.  (The &quot;gradle document&quot; as you have called it.)","body":"I didn&#39;t say &quot;upgrade Gradle&quot;.  I said update the gradle file.  The file that specifies how Gradle builds your application.  (The &quot;gradle document&quot; as you have called it.)"},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":1,"creation_date":1640063949,"post_id":70418910,"comment_id":124500540,"body_markdown":"According to https://stackoverflow.com/questions/51610420, you can find out which deprecated features Gradle is talking about by adding `--warning-mode=all` to the gradle command line options.","body":"According to <a href=\"https://stackoverflow.com/questions/51610420\">stackoverflow.com/questions/51610420</a>, you can find out which deprecated features Gradle is talking about by adding <code>--warning-mode=all</code> to the gradle command line options."}],"answers":[{"tags":[],"owner":{"account_id":18729807,"reputation":25,"user_id":13655487,"display_name":"Serya"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1640065428,"creation_date":1640065428,"answer_id":70431128,"question_id":70418910,"body_markdown":"I finally found the problem.I used `./gradlew lint --warning-mode fail` to testify the program and returned the failure says `FAILURE: Build failed with an exception.`so probably my absolute path was wrong.The reasons why the code doesn&#39;t work is because absolute path formal is invalid.\r\nIn Windows environment,we use &quot;\\\\&quot; to separate the folder between folder in IntelliJ. ex.\r\n`D:\\\\Documents\\\\course\\\\practice.txt`\r\nOn the other hand,in Mac environment,you don&#39;t have to change anything in your path.ex.`/Users/Eric/Desktop/writer.txt`,and it will work","title":"&quot;Deprecated Gradle features were used in this build, making it incompatible with Gradle 8.0.&quot; while using FileWriter Class to output the file in Java","body":"<p>I finally found the problem.I used <code>./gradlew lint --warning-mode fail</code> to testify the program and returned the failure says <code>FAILURE: Build failed with an exception.</code>so probably my absolute path was wrong.The reasons why the code doesn't work is because absolute path formal is invalid.\nIn Windows environment,we use &quot;\\&quot; to separate the folder between folder in IntelliJ. ex.\n<code>D:\\\\Documents\\\\course\\\\practice.txt</code>\nOn the other hand,in Mac environment,you don't have to change anything in your path.ex.<code>/Users/Eric/Desktop/writer.txt</code>,and it will work</p>\n"},{"tags":[],"owner":{"account_id":3710600,"reputation":8911,"user_id":3088045,"accept_rate":46,"display_name":"Kamafeather"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1642237435,"creation_date":1642237435,"answer_id":70720119,"question_id":70418910,"body_markdown":"Try `gradle --version` and compare it with `./gradlew wrapper --version`; maybe what you need to downgrade is *gradle-wrapper* rather than *gradle* itself.\r\n\r\n---\r\n\r\nHowever, that&#39;s simply a warning that your code or some dependency is using some Gradle feature that was deprecated.\r\n\r\n**This is not an error per-se.**\r\n\r\nA deprecation is just a warning, about the need to update the currently running code in order to be able to upgrade when the Gradle 8.0 API will be released.\\\r\nOnly at that point you&#39;ll be forced to fix the problem.\r\n\r\n**You can ignore it, for now.** But don&#39;t forget it.","title":"&quot;Deprecated Gradle features were used in this build, making it incompatible with Gradle 8.0.&quot; while using FileWriter Class to output the file in Java","body":"<p>Try <code>gradle --version</code> and compare it with <code>./gradlew wrapper --version</code>; maybe what you need to downgrade is <em>gradle-wrapper</em> rather than <em>gradle</em> itself.</p>\n<hr />\n<p>However, that's simply a warning that your code or some dependency is using some Gradle feature that was deprecated.</p>\n<p><strong>This is not an error per-se.</strong></p>\n<p>A deprecation is just a warning, about the need to update the currently running code in order to be able to upgrade when the Gradle 8.0 API will be released.<br />\nOnly at that point you'll be forced to fix the problem.</p>\n<p><strong>You can ignore it, for now.</strong> But don't forget it.</p>\n"}],"owner":{"account_id":18729807,"reputation":25,"user_id":13655487,"display_name":"Serya"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10808,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":70720119,"answer_count":2,"score":1,"last_activity_date":1642237435,"creation_date":1639987412,"question_id":70418910,"body_markdown":"I tried to write an FileWriter to output my file.\r\n\r\n```\r\npublic class TestWriter{\r\n    public static void main(String[] args){\r\n        FileWriter fw = new FileWriter(&quot;\\\\User\\\\Eric\\\\Desktop\\\\writer.txt&quot;); //absolute position\r\n            fw.write(&quot;testing&quot;);           //write some content in my text file\r\n            fw.flush();                    //force to output the source from buffer zone\r\n            fw.close();                    //close the IOstream and release the source\r\n    }\r\n}\r\n```\r\n\r\nand the result said\r\n \r\n```&quot;Deprecated Gradle features were used in this build, making it incompatible with Gradle 8.0.&quot;```\r\n\r\nI have tried to lower my gradle version ,but it still didn&#39;t work.\r\nSorry to ask this basic question and I&#39;ll really appreciate anyone to solve my problem.\r\n\r\nHere&#39;s my gradle document\r\n\r\n```\r\nplugins {\r\n    id &#39;org.jetbrains.kotlin.jvm&#39; version &#39;1.5.10&#39;\r\n    id &#39;java&#39;\r\n}\r\n\r\ngroup &#39;org.example&#39;\r\nversion &#39;1.0-SNAPSHOT&#39;\r\n\r\nrepositories {\r\n    mavenCentral()\r\n    mavenCentral()\r\n}\r\n\r\n\r\ndependencies {\r\n    implementation &quot;org.jetbrains.kotlin:kotlin-stdlib&quot;\r\n    testImplementation &#39;org.junit.jupiter:junit-jupiter-api:5.7.0&#39;\r\n    testRuntimeOnly &#39;org.junit.jupiter:junit-jupiter-engine:5.7.0&#39;\r\n    // https://mvnrepository.com/artifact/org.junit.jupiter/junit-jupiter-api\r\n\r\n}\r\n\r\ntest {\r\n    useJUnitPlatform()\r\n}\r\n ```","title":"&quot;Deprecated Gradle features were used in this build, making it incompatible with Gradle 8.0.&quot; while using FileWriter Class to output the file in Java","body":"<p>I tried to write an FileWriter to output my file.</p>\n<pre><code>public class TestWriter{\n    public static void main(String[] args){\n        FileWriter fw = new FileWriter(&quot;\\\\User\\\\Eric\\\\Desktop\\\\writer.txt&quot;); //absolute position\n            fw.write(&quot;testing&quot;);           //write some content in my text file\n            fw.flush();                    //force to output the source from buffer zone\n            fw.close();                    //close the IOstream and release the source\n    }\n}\n</code></pre>\n<p>and the result said</p>\n<p><code>&quot;Deprecated Gradle features were used in this build, making it incompatible with Gradle 8.0.&quot;</code></p>\n<p>I have tried to lower my gradle version ,but it still didn't work.\nSorry to ask this basic question and I'll really appreciate anyone to solve my problem.</p>\n<p>Here's my gradle document</p>\n<pre><code>plugins {\n    id 'org.jetbrains.kotlin.jvm' version '1.5.10'\n    id 'java'\n}\n\ngroup 'org.example'\nversion '1.0-SNAPSHOT'\n\nrepositories {\n    mavenCentral()\n    mavenCentral()\n}\n\n\ndependencies {\n    implementation &quot;org.jetbrains.kotlin:kotlin-stdlib&quot;\n    testImplementation 'org.junit.jupiter:junit-jupiter-api:5.7.0'\n    testRuntimeOnly 'org.junit.jupiter:junit-jupiter-engine:5.7.0'\n    // https://mvnrepository.com/artifact/org.junit.jupiter/junit-jupiter-api\n\n}\n\ntest {\n    useJUnitPlatform()\n}\n</code></pre>\n"},{"tags":["java","multithreading","polling","awaitility"],"answers":[{"tags":[],"owner":{"account_id":2123179,"reputation":10922,"user_id":1886012,"display_name":"bowmore"},"down_vote_count":1,"up_vote_count":7,"is_accepted":true,"score":6,"last_activity_date":1473597394,"creation_date":1473592794,"answer_id":39435533,"question_id":39434257,"body_markdown":"One way is to make a specialized Callable implementation that remembers it : \r\n\r\n    public Version waitForNewConfig() throws Exception {\r\n        NewVersionIsReady newVersionIsReady = new NewVersionIsReady(deploymentClient.getCurrentConfigVersion(appName));\r\n        await().atMost(1, MINUTES).pollInterval(5, SECONDS).until(newVersionIsReady);\r\n\r\n        return newVersionIsReady.getNewVersion();\r\n    }\r\n\r\n    private final class NewVersionIsReady implements Callable&lt;Boolean&gt; {\r\n        private final Version oldVersion;\r\n        private Version newVersion;\r\n\r\n        private NewVersionIsReady(Version oldVersion) {\r\n            this.oldVersion = oldVersion;\r\n        }\r\n\r\n        public Boolean call() throws Exception {\r\n            Version newVersion = deploymentClient.getCurrentConfigVersion(appName);\r\n\r\n            return !oldVersion.equals(newVersion);\r\n        }\r\n\r\n        public Version getNewVersion() {\r\n            return newVersion;\r\n        }\r\n    }\r\n\r\nAnother is to store it in a container (as an example I use an array)\r\n\r\n    public Version waitForNewConfig() throws Exception {\r\n        Version[] currentVersionHolder = new Version[1];\r\n        Version oldVersion = deploymentClient.getCurrentConfigVersion(appName);\r\n        await().atMost(1, MINUTES).pollInterval(5, SECONDS).until(() -&gt; {\r\n            Version newVersion = deploymentClient.getCurrentConfigVersion(appName);\r\n            currentVersionHolder[0] = newVersion;\r\n            return !oldVersion.equals(newVersion);\r\n        });\r\n\r\n        return currentVersionHolder[0];\r\n    }\r\n\r\nIf you don&#39;t use java 8 yet, you can do it using an anonymous inner class as well.","title":"How can I save aside an object in awaitility callback?","body":"<p>One way is to make a specialized Callable implementation that remembers it : </p>\n\n<pre><code>public Version waitForNewConfig() throws Exception {\n    NewVersionIsReady newVersionIsReady = new NewVersionIsReady(deploymentClient.getCurrentConfigVersion(appName));\n    await().atMost(1, MINUTES).pollInterval(5, SECONDS).until(newVersionIsReady);\n\n    return newVersionIsReady.getNewVersion();\n}\n\nprivate final class NewVersionIsReady implements Callable&lt;Boolean&gt; {\n    private final Version oldVersion;\n    private Version newVersion;\n\n    private NewVersionIsReady(Version oldVersion) {\n        this.oldVersion = oldVersion;\n    }\n\n    public Boolean call() throws Exception {\n        Version newVersion = deploymentClient.getCurrentConfigVersion(appName);\n\n        return !oldVersion.equals(newVersion);\n    }\n\n    public Version getNewVersion() {\n        return newVersion;\n    }\n}\n</code></pre>\n\n<p>Another is to store it in a container (as an example I use an array)</p>\n\n<pre><code>public Version waitForNewConfig() throws Exception {\n    Version[] currentVersionHolder = new Version[1];\n    Version oldVersion = deploymentClient.getCurrentConfigVersion(appName);\n    await().atMost(1, MINUTES).pollInterval(5, SECONDS).until(() -&gt; {\n        Version newVersion = deploymentClient.getCurrentConfigVersion(appName);\n        currentVersionHolder[0] = newVersion;\n        return !oldVersion.equals(newVersion);\n    });\n\n    return currentVersionHolder[0];\n}\n</code></pre>\n\n<p>If you don't use java 8 yet, you can do it using an anonymous inner class as well.</p>\n"},{"tags":[],"owner":{"account_id":1096470,"reputation":26066,"user_id":1089967,"accept_rate":59,"display_name":"lance-java"},"down_vote_count":0,"up_vote_count":24,"is_accepted":false,"score":24,"last_activity_date":1642237196,"creation_date":1594121490,"answer_id":62774307,"question_id":39434257,"body_markdown":"You can use [ConditionFactory.until(Callable[T], Predicate[T])](https://javadoc.io/static/org.awaitility/awaitility/4.0.3/org/awaitility/core/ConditionFactory.html#until-java.util.concurrent.Callable-java.util.function.Predicate-)\r\n\r\nEg:\r\n```\r\nCallable&lt;MyObject&gt; supplier = () -&gt; queryForMyObject();\r\nPredicate&lt;MyObject&gt; predicate = myObject -&gt; myObject.getFooCount() &gt; 3;\r\n\r\nMyObject myObject = Awaitility.await()\r\n   .atMost(1, TimeUnit.MINUTE)\r\n   .pollInterval(Duration.ofSeconds(5))\r\n   .until(supplier, predicate);\r\n\r\ndoStuff(myObject);\r\n```\r\n","title":"How can I save aside an object in awaitility callback?","body":"<p>You can use <a href=\"https://javadoc.io/static/org.awaitility/awaitility/4.0.3/org/awaitility/core/ConditionFactory.html#until-java.util.concurrent.Callable-java.util.function.Predicate-\" rel=\"noreferrer\">ConditionFactory.until(Callable[T], Predicate[T])</a></p>\n<p>Eg:</p>\n<pre><code>Callable&lt;MyObject&gt; supplier = () -&gt; queryForMyObject();\nPredicate&lt;MyObject&gt; predicate = myObject -&gt; myObject.getFooCount() &gt; 3;\n\nMyObject myObject = Awaitility.await()\n   .atMost(1, TimeUnit.MINUTE)\n   .pollInterval(Duration.ofSeconds(5))\n   .until(supplier, predicate);\n\ndoStuff(myObject);\n</code></pre>\n"}],"owner":{"account_id":1065081,"reputation":14112,"user_id":1065869,"accept_rate":57,"display_name":"Elad Benda2"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9095,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"accepted_answer_id":39435533,"answer_count":2,"score":10,"last_activity_date":1642237196,"creation_date":1473582747,"question_id":39434257,"body_markdown":"My code calls a server and get a `old-response`.\r\n\r\nThen I want to poll until I get a different response from the server (aka `new-response`).\r\n\r\nI I use while loop I can hold the `new-response` and use it after polling.\r\n\r\nIf I use `awaitility` how can I get the `new-response` easily?\r\n\r\nHere is my code:\r\n\r\n    public Version waitForNewConfig() throws Exception {\r\n        Version oldVersion = deploymentClient.getCurrentConfigVersion(appName);\r\n        await().atMost(1, MINUTES).pollInterval(5, SECONDS).until(newVersionIsReady(oldVersion));\r\n        Version newVersion = deploymentClient.getCurrentConfigVersion(appName);\r\n\r\n    }\r\n\r\n    private Callable&lt;Boolean&gt; newVersionIsReady(Version oldVersion) {\r\n        return new Callable&lt;Boolean&gt;() {\r\n            public Boolean call() throws Exception {\r\n                Version newVersion = deploymentClient.getCurrentConfigVersion(appName);\r\n\r\n                return !oldVersion.equals(newVersion);\r\n            }\r\n        };\r\n    }","title":"How can I save aside an object in awaitility callback?","body":"<p>My code calls a server and get a <code>old-response</code>.</p>\n\n<p>Then I want to poll until I get a different response from the server (aka <code>new-response</code>).</p>\n\n<p>I I use while loop I can hold the <code>new-response</code> and use it after polling.</p>\n\n<p>If I use <code>awaitility</code> how can I get the <code>new-response</code> easily?</p>\n\n<p>Here is my code:</p>\n\n<pre><code>public Version waitForNewConfig() throws Exception {\n    Version oldVersion = deploymentClient.getCurrentConfigVersion(appName);\n    await().atMost(1, MINUTES).pollInterval(5, SECONDS).until(newVersionIsReady(oldVersion));\n    Version newVersion = deploymentClient.getCurrentConfigVersion(appName);\n\n}\n\nprivate Callable&lt;Boolean&gt; newVersionIsReady(Version oldVersion) {\n    return new Callable&lt;Boolean&gt;() {\n        public Boolean call() throws Exception {\n            Version newVersion = deploymentClient.getCurrentConfigVersion(appName);\n\n            return !oldVersion.equals(newVersion);\n        }\n    };\n}\n</code></pre>\n"},{"tags":["java","android","eclipse","ide","apk"],"comments":[{"owner":{"account_id":3159259,"reputation":109668,"user_id":2670892,"display_name":"greg-449"},"score":0,"creation_date":1642237300,"post_id":70720076,"comment_id":125021270,"body_markdown":"Eclipse has not been supported for Android development for several years now.","body":"Eclipse has not been supported for Android development for several years now."},{"owner":{"account_id":19456942,"reputation":1,"user_id":15035674,"display_name":"RSC1919"},"score":0,"creation_date":1642237648,"post_id":70720076,"comment_id":125021326,"body_markdown":"is Intellij supported? If not what is?","body":"is Intellij supported? If not what is?"},{"owner":{"account_id":19456942,"reputation":1,"user_id":15035674,"display_name":"RSC1919"},"score":0,"creation_date":1642237690,"post_id":70720076,"comment_id":125021333,"body_markdown":"I really like eclipse so if there is any way to use it that would be great.","body":"I really like eclipse so if there is any way to use it that would be great."},{"owner":{"account_id":3159259,"reputation":109668,"user_id":2670892,"display_name":"greg-449"},"score":0,"creation_date":1642241468,"post_id":70720076,"comment_id":125022012,"body_markdown":"Android Studio is the only supported IDE [tag:android-studio]","body":"Android Studio is the only supported IDE <a href=\"https://stackoverflow.com/questions/tagged/android-studio\">android-studio</a>"}],"owner":{"account_id":19456942,"reputation":1,"user_id":15035674,"display_name":"RSC1919"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1642236936,"creation_date":1642236936,"question_id":70720076,"body_markdown":"I need to set up a workspace in eclipse to edit an APK so that I can mod it. I have the decompiled and deobfed java sources but I have never done this before, and I can&#39;t get eclipse working with android. I have installed the sdk and the software for eclipse, but I have some errors after creating a new basic project. Here are some of the many errors, Probably stemming from 1 problem that I just cant figure out.\r\n\r\nXML:\r\n\r\nError in an XML file: aborting build.\r\n\r\n\\res\\values-v14\\styles.xml:8: error: Error retrieving parent for item: No resource found that matches the given name &#39;Theme.AppCompat.Light.DarkActionBar&#39;.\r\n\r\nAmong many, many more XML errors that look similair.\r\n\r\nJava:\r\n\r\nActionBarActivity cannot be resolved to a type\r\n\r\nR cannot be resolved to a variable\r\n\r\nThe import android.support cannot be resolved\r\n\r\nThe method getMenuInflater() is undefined for the type MainActivity\r\n\r\nThere are definitely some jars that should be in the build path that are not there, but I don&#39;t know why they aren&#39;t there and what is missing. I probably set it up wrong but I tried uninstalling and reinstalling and that did not help.\r\n\r\nSorry for the shitty formatting I have no idea how to format and this is my first question on here sorry!","title":"Having trouble setting up Eclipse for android development","body":"<p>I need to set up a workspace in eclipse to edit an APK so that I can mod it. I have the decompiled and deobfed java sources but I have never done this before, and I can't get eclipse working with android. I have installed the sdk and the software for eclipse, but I have some errors after creating a new basic project. Here are some of the many errors, Probably stemming from 1 problem that I just cant figure out.</p>\n<p>XML:</p>\n<p>Error in an XML file: aborting build.</p>\n<p>\\res\\values-v14\\styles.xml:8: error: Error retrieving parent for item: No resource found that matches the given name 'Theme.AppCompat.Light.DarkActionBar'.</p>\n<p>Among many, many more XML errors that look similair.</p>\n<p>Java:</p>\n<p>ActionBarActivity cannot be resolved to a type</p>\n<p>R cannot be resolved to a variable</p>\n<p>The import android.support cannot be resolved</p>\n<p>The method getMenuInflater() is undefined for the type MainActivity</p>\n<p>There are definitely some jars that should be in the build path that are not there, but I don't know why they aren't there and what is missing. I probably set it up wrong but I tried uninstalling and reinstalling and that did not help.</p>\n<p>Sorry for the shitty formatting I have no idea how to format and this is my first question on here sorry!</p>\n"},{"tags":["java","eclipse"],"comments":[{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":2,"creation_date":1642237767,"post_id":70720072,"comment_id":125021349,"body_markdown":"In my opinion, if you want other people to easily read and understand your code, then you should follow Java coding conventions which Eclipse tries to enforce and which your desired format does not follow. Hence you are essentially asking Eclipse to format code in a way that Eclipse assumes will never be done. I believe that this cannot be done easily.","body":"In my opinion, if you want other people to easily read and understand your code, then you should follow Java coding conventions which Eclipse tries to enforce and which your desired format does not follow. Hence you are essentially asking Eclipse to format code in a way that Eclipse assumes will never be done. I believe that this cannot be done easily."},{"owner":{"account_id":3159259,"reputation":109668,"user_id":2670892,"display_name":"greg-449"},"score":0,"creation_date":1642237941,"post_id":70720072,"comment_id":125021378,"body_markdown":"New formatters are supported, but they have to be an Eclipse plug-in. They require a lot of knowledge of the Eclipse JDT Abstract Syntax Table. A quick look at the default formatter shows it is at least 10,000 lines of code.","body":"New formatters are supported, but they have to be an Eclipse plug-in. They require a lot of knowledge of the Eclipse JDT Abstract Syntax Table. A quick look at the default formatter shows it is at least 10,000 lines of code."},{"owner":{"account_id":23946630,"reputation":1,"user_id":17938885,"display_name":"William Fenlason"},"score":0,"creation_date":1642348606,"post_id":70720072,"comment_id":125041730,"body_markdown":"Abra, sorry I wasn&#39;t more clear.  I wouldn&#39;t suggest that anyone use my custom formatter, and of course if I publish my code, it would be viewed using the Eclipse standard format.","body":"Abra, sorry I wasn&#39;t more clear.  I wouldn&#39;t suggest that anyone use my custom formatter, and of course if I publish my code, it would be viewed using the Eclipse standard format."},{"owner":{"account_id":23946630,"reputation":1,"user_id":17938885,"display_name":"William Fenlason"},"score":0,"creation_date":1642350208,"post_id":70720072,"comment_id":125042094,"body_markdown":"reg-449, thank you.","body":"reg-449, thank you."}],"owner":{"account_id":23946630,"reputation":1,"user_id":17938885,"display_name":"William Fenlason"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1642236876,"creation_date":1642236876,"question_id":70720072,"body_markdown":"I&#39;d like to generate a custom Eclipse Java formatter that collapses the otherwise empty lines containing the block ending right braces onto the prior code line.  \r\n\r\nFor example: \r\n\r\n        if (a == b) {\r\n            first();\r\n            second();\r\n        }\r\n\r\n  should be formatted as:\r\n\r\n        if (a == b) {\r\n            first();\r\n            second(); }\r\n\r\nand this:\r\n\r\n        test: if (a == b) {\r\n            for (int i = 0; i &lt; 9; i++) {\r\n                if (c == d) {\r\n                    for (int j = 0; j &lt; 9; j++) {\r\n                        // ...\r\n                        break test;      \r\n                    }\r\n                }\r\n            }\r\n        }\r\n   \r\nshould format as:\r\n\r\n        test: if (a == b) {\r\n            for (int i = 0; i &lt; 9; i++) {\r\n                if (c == d) {\r\n                    for (int j = 0; j &lt; 9; j++) {\r\n                        // ...\r\n                        break test; } } } }      \r\n\r\nand so on.  \r\n\r\nThe Window -&gt; Preferences -&gt; Java -&gt; Code Style -&gt; Formatter -&gt; Active Profile: &quot;NewFormatter&quot; -&gt; Edit -&gt; Brace Positions : list of options control the left brace, but the right brace seems to always be on a new line.  Has anyone solved this problem?  \r\n\r\nIf this formatter can be accomplished in a relatively straight forward way I&#39;ll roll up my sleeves and dig into the formatter details.  But if it requires heavy code changes in Eclipse itself I&#39;ll have to skip it.  I&#39;ll appreciate any and all comments or suggestions.  ","title":"Eclipse custom Java formatter for right braces to end of prior line?","body":"<p>I'd like to generate a custom Eclipse Java formatter that collapses the otherwise empty lines containing the block ending right braces onto the prior code line.</p>\n<p>For example:</p>\n<pre><code>    if (a == b) {\n        first();\n        second();\n    }\n</code></pre>\n<p>should be formatted as:</p>\n<pre><code>    if (a == b) {\n        first();\n        second(); }\n</code></pre>\n<p>and this:</p>\n<pre><code>    test: if (a == b) {\n        for (int i = 0; i &lt; 9; i++) {\n            if (c == d) {\n                for (int j = 0; j &lt; 9; j++) {\n                    // ...\n                    break test;      \n                }\n            }\n        }\n    }\n</code></pre>\n<p>should format as:</p>\n<pre><code>    test: if (a == b) {\n        for (int i = 0; i &lt; 9; i++) {\n            if (c == d) {\n                for (int j = 0; j &lt; 9; j++) {\n                    // ...\n                    break test; } } } }      \n</code></pre>\n<p>and so on.</p>\n<p>The Window -&gt; Preferences -&gt; Java -&gt; Code Style -&gt; Formatter -&gt; Active Profile: &quot;NewFormatter&quot; -&gt; Edit -&gt; Brace Positions : list of options control the left brace, but the right brace seems to always be on a new line.  Has anyone solved this problem?</p>\n<p>If this formatter can be accomplished in a relatively straight forward way I'll roll up my sleeves and dig into the formatter details.  But if it requires heavy code changes in Eclipse itself I'll have to skip it.  I'll appreciate any and all comments or suggestions.</p>\n"},{"tags":["java","long-integer"],"comments":[{"owner":{"account_id":21994,"reputation":73798,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":1,"creation_date":1642232464,"post_id":70719585,"comment_id":125020579,"body_markdown":"The result won’t fit in a long and is truncated","body":"The result won’t fit in a long and is truncated"},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":1,"creation_date":1642237887,"post_id":70719585,"comment_id":125021368,"body_markdown":"Java Language Specification [15.17.1](https://docs.oracle.com/javase/specs/jls/se17/html/jls-15.html#jls-15.17.1-200): *&quot;If an integer multiplication overflows, then the result is the low-order bits of the mathematical product as represented in some sufficiently large two&#39;s-complement format. ...&quot;* and [4.2.2](https://docs.oracle.com/javase/specs/jls/se17/html/jls-4.html#jls-4.2.2-220): *&quot;The integer operators do not indicate overflow or underflow in any way.&quot;*","body":"Java Language Specification <a href=\"https://docs.oracle.com/javase/specs/jls/se17/html/jls-15.html#jls-15.17.1-200\" rel=\"nofollow noreferrer\">15.17.1</a>: <i>&quot;If an integer multiplication overflows, then the result is the low-order bits of the mathematical product as represented in some sufficiently large two&#39;s-complement format. ...&quot;</i> and <a href=\"https://docs.oracle.com/javase/specs/jls/se17/html/jls-4.html#jls-4.2.2-220\" rel=\"nofollow noreferrer\">4.2.2</a>: <i>&quot;The integer operators do not indicate overflow or underflow in any way.&quot;</i>"}],"answers":[{"tags":[],"owner":{"account_id":14346646,"reputation":124,"user_id":10363360,"display_name":"Nicolas Peron"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1642236250,"creation_date":1642236250,"answer_id":70720004,"question_id":70719585,"body_markdown":"Java has a BigInteger class to manage such integers.","title":"Calculation exceeding the Java Long type maximum","body":"<p>Java has a BigInteger class to manage such integers.</p>\n"},{"tags":[],"owner":{"account_id":23783500,"reputation":5175,"user_id":17795888,"display_name":"Chaosfire"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1642236834,"creation_date":1642236834,"answer_id":70720066,"question_id":70719585,"body_markdown":"The result is too big to fit in a long, and it overflows, that&#39;s why you get those results. If you need to work with such big number correctly you should use the BigInteger class.\r\n\r\n    BigInteger int1 = BigInteger.valueOf(9223372036854775807L);\r\n    BigInteger int2 = BigInteger.valueOf(9223372036854775807L);\r\n    BigInteger n = BigInteger.valueOf(5);\r\n    System.out.println(int1.multiply(n));\r\n    System.out.println(int1.multiply(int2));\r\n\r\nOr if you want the overflow to throw an error you could use `Math.multiplyExact(long, long)`\r\n\r\n    long long1 = 9223372036854775807L;\r\n    long long2 = 9223372036854775807L;\r\n    int n = 5;\r\n    System.out.println(Math.multiplyExact(long1, n));\r\n    System.out.println(Math.multiplyExact(long1, long2));","title":"Calculation exceeding the Java Long type maximum","body":"<p>The result is too big to fit in a long, and it overflows, that's why you get those results. If you need to work with such big number correctly you should use the BigInteger class.</p>\n<pre><code>BigInteger int1 = BigInteger.valueOf(9223372036854775807L);\nBigInteger int2 = BigInteger.valueOf(9223372036854775807L);\nBigInteger n = BigInteger.valueOf(5);\nSystem.out.println(int1.multiply(n));\nSystem.out.println(int1.multiply(int2));\n</code></pre>\n<p>Or if you want the overflow to throw an error you could use <code>Math.multiplyExact(long, long)</code></p>\n<pre><code>long long1 = 9223372036854775807L;\nlong long2 = 9223372036854775807L;\nint n = 5;\nSystem.out.println(Math.multiplyExact(long1, n));\nSystem.out.println(Math.multiplyExact(long1, long2));\n</code></pre>\n"}],"owner":{"account_id":23928837,"reputation":11,"user_id":17923629,"display_name":"shindang5"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":217,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"closed_date":1642241941,"accepted_answer_id":70720066,"answer_count":2,"score":0,"last_activity_date":1642236834,"creation_date":1642231543,"question_id":70719585,"body_markdown":"\r\nMultiplication with the maximum value of the Long type in eclipse results in the following result. I wonder what the result means.\r\n\r\n\r\n\t\tlong long1 = 9223372036854775807L;\r\n\t\tlong long2 = 9223372036854775807L;\r\n\t\tint n = 5;\r\n\t\tlong tmp_long = long1*long2;\r\n\t\t\r\n\t\tSystem.out.println(long1*n);\r\n\t\tSystem.out.println(tmp_long);\r\n\r\n\r\n[enter image description here][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/7ig3h.png","title":"Calculation exceeding the Java Long type maximum","body":"<p>Multiplication with the maximum value of the Long type in eclipse results in the following result. I wonder what the result means.</p>\n<pre><code>    long long1 = 9223372036854775807L;\n    long long2 = 9223372036854775807L;\n    int n = 5;\n    long tmp_long = long1*long2;\n    \n    System.out.println(long1*n);\n    System.out.println(tmp_long);\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/7ig3h.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n"},{"tags":["java","android","linux","raspberry-pi","arm"],"comments":[{"owner":{"account_id":11547848,"reputation":1276,"user_id":8461344,"display_name":"Code Demon"},"score":0,"creation_date":1642236261,"post_id":70719971,"comment_id":125021106,"body_markdown":"Simple answer no.Not even with a docker.You could however use java jar and so files not dependent on android platform","body":"Simple answer no.Not even with a docker.You could however use java jar and so files not dependent on android platform"},{"owner":{"account_id":166843,"reputation":167,"user_id":391268,"accept_rate":0,"display_name":"Nilesh"},"score":0,"creation_date":1642243995,"post_id":70719971,"comment_id":125022491,"body_markdown":"You have mentioned SDK so it means wanted to build app .. i think it is possible.","body":"You have mentioned SDK so it means wanted to build app .. i think it is possible."}],"owner":{"account_id":18348447,"reputation":67,"user_id":13363151,"display_name":"Atlasy"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":543,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1642236684,"creation_date":1642235936,"question_id":70719971,"body_markdown":"I want to start off by saying that I am not a Java developer. I&#39;ve never ventured outside of Windows and C#. But for my current goal neither C# nor Windows is adequate.\r\n\r\nI am planning on using RPI4. The problem is the hardware I would like to integrate only provides SDK for Linux(x64 x32) and Android 4.0+. Now RPI4 has a an arm based CPU so using the linux sdk is out of the question. But the android SDK is for ARM based devices and it also supports arm64-v8a which would be the RPI.\r\n\r\nSo my question is whether I could use these .so and .jar files to make something on the RPI or am I out of luck?","title":"Is it possible to use an Android SDK on Raspberry Pi 4?","body":"<p>I want to start off by saying that I am not a Java developer. I've never ventured outside of Windows and C#. But for my current goal neither C# nor Windows is adequate.</p>\n<p>I am planning on using RPI4. The problem is the hardware I would like to integrate only provides SDK for Linux(x64 x32) and Android 4.0+. Now RPI4 has a an arm based CPU so using the linux sdk is out of the question. But the android SDK is for ARM based devices and it also supports arm64-v8a which would be the RPI.</p>\n<p>So my question is whether I could use these .so and .jar files to make something on the RPI or am I out of luck?</p>\n"},{"tags":["java","reflection","field","bukkit"],"comments":[{"owner":{"account_id":541997,"reputation":7814,"user_id":910736,"display_name":"JamesB"},"score":0,"creation_date":1404897978,"post_id":24649555,"comment_id":38209752,"body_markdown":"Assuming you are writing this plugin, why not just get rid of the redundant imports?","body":"Assuming you are writing this plugin, why not just get rid of the redundant imports?"},{"owner":{"account_id":4722034,"reputation":51,"user_id":3819650,"display_name":"Maximvdw"},"score":0,"creation_date":1404898180,"post_id":24649555,"comment_id":38209868,"body_markdown":"I am not writing the plugins I want to get the fields of, so I can&#39;t modify them.","body":"I am not writing the plugins I want to get the fields of, so I can&#39;t modify them."}],"answers":[{"tags":[],"owner":{"account_id":17795,"reputation":24571,"user_id":40214,"accept_rate":79,"display_name":"Dennis C"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1410628340,"creation_date":1410628340,"answer_id":25825642,"question_id":24649555,"body_markdown":"Why should you care the fields while missing dependencies?\r\n\r\nIf it happen, the class should never have an instance at runtime. I don&#39;t think JRE will allows to create instance of object with missing class for it&#39;s field.\r\n\r\nIt might mean something if you read getDeclaredMethods.\r\n\r\nASM / BCEL is a good direction to go, but not virtually create the missing classes (as you will not know who they are). You are use them to read/parse the &quot;class file&quot; to decode it signature (i.e. getDeclaredFields without using classloader).","title":"Java getDeclaredFields of a class with missing dependencies","body":"<p>Why should you care the fields while missing dependencies?</p>\n\n<p>If it happen, the class should never have an instance at runtime. I don't think JRE will allows to create instance of object with missing class for it's field.</p>\n\n<p>It might mean something if you read getDeclaredMethods.</p>\n\n<p>ASM / BCEL is a good direction to go, but not virtually create the missing classes (as you will not know who they are). You are use them to read/parse the \"class file\" to decode it signature (i.e. getDeclaredFields without using classloader).</p>\n"},{"tags":[],"owner":{"account_id":4232920,"reputation":1116,"user_id":3464870,"accept_rate":100,"display_name":"gyurix"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1642236643,"creation_date":1439506502,"answer_id":31999734,"question_id":24649555,"body_markdown":"First of all make sure, that your target plugin is loaded before your plugin:\r\nYou could force it to load, before your plugin, by adding this line to your plugin.yml file:\r\n\r\n```yaml\r\n...\r\nsoftdepend: [plugin_name1]\r\n...\r\n```\r\n \r\n\r\nWhere the `plugin_name1` is your reflection target plugin.\r\n\r\nSecondly, you should only get the fields, you need from this plugin, not listing every field, but if you would like to get it&#39;s all fields, than just decompile it&#39;s code and make a custom field getter method:\r\n\r\n    public ArrayList&lt;Field&gt; getFields(Class cl, String... analyze) {\r\n        ArrayList&lt;Field&gt; fields = new ArrayList&lt;Field&gt;();\r\n\r\n        for (String f : analyze) {\r\n            try {\r\n                Field field = cl.getDeclaredField(f);\r\n                field.setAccessible(true);\r\n                fields.add(field);\r\n            } catch (Throwable err) {}\r\n        }\r\n\r\n        return fields;\r\n    }","title":"Java getDeclaredFields of a class with missing dependencies","body":"<p>First of all make sure, that your target plugin is loaded before your plugin:\nYou could force it to load, before your plugin, by adding this line to your plugin.yml file:</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>...\nsoftdepend: [plugin_name1]\n...\n</code></pre>\n<p>Where the <code>plugin_name1</code> is your reflection target plugin.</p>\n<p>Secondly, you should only get the fields, you need from this plugin, not listing every field, but if you would like to get it's all fields, than just decompile it's code and make a custom field getter method:</p>\n<pre><code>public ArrayList&lt;Field&gt; getFields(Class cl, String... analyze) {\n    ArrayList&lt;Field&gt; fields = new ArrayList&lt;Field&gt;();\n\n    for (String f : analyze) {\n        try {\n            Field field = cl.getDeclaredField(f);\n            field.setAccessible(true);\n            fields.add(field);\n        } catch (Throwable err) {}\n    }\n\n    return fields;\n}\n</code></pre>\n"}],"owner":{"account_id":4722034,"reputation":51,"user_id":3819650,"display_name":"Maximvdw"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1704,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":2,"score":5,"last_activity_date":1642236643,"creation_date":1404896954,"question_id":24649555,"body_markdown":"I am having trouble getting the declared fields of an Object that is missing/not using specific dependencies.\r\n\r\n    Field[] fields = OBJECT.getClass().getDeclaredFields();\r\n\r\nthrows a `NoClassDefFoundError` when that object has imports to missing classes.\r\n\r\nThe reason I want to do this is for a Bukkit plugin. I want to get the fields of a plugin instance that has missing dependencies (they are not used, but the plugin can start).\r\n\r\nAt runtime that plugin will check if the required dependencies are present and depending on that it will load those specific fields.\r\n\r\nPossible solutions I thought of:&lt;br&gt;\r\n1) Virtually create the missing classes + packages and try again using ASM. But I don&#39;t really know how to do this.\r\n\r\nRegards,&lt;br&gt;\r\nMaxim","title":"Java getDeclaredFields of a class with missing dependencies","body":"<p>I am having trouble getting the declared fields of an Object that is missing/not using specific dependencies.</p>\n\n<pre><code>Field[] fields = OBJECT.getClass().getDeclaredFields();\n</code></pre>\n\n<p>throws a <code>NoClassDefFoundError</code> when that object has imports to missing classes.</p>\n\n<p>The reason I want to do this is for a Bukkit plugin. I want to get the fields of a plugin instance that has missing dependencies (they are not used, but the plugin can start).</p>\n\n<p>At runtime that plugin will check if the required dependencies are present and depending on that it will load those specific fields.</p>\n\n<p>Possible solutions I thought of:<br>\n1) Virtually create the missing classes + packages and try again using ASM. But I don't really know how to do this.</p>\n\n<p>Regards,<br>\nMaxim</p>\n"},{"tags":["java","spring","spring-boot","spring-data-jpa","spring-boot-devtools"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1643016364,"post_id":70719665,"comment_id":125218747,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."}],"answers":[{"tags":[],"owner":{"account_id":23783500,"reputation":5175,"user_id":17795888,"display_name":"Chaosfire"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1642235970,"creation_date":1642235970,"answer_id":70719977,"question_id":70719665,"body_markdown":"Looks as if you are directly returning a view after a post request, when you should be redirecting. Returning a redirect response to the page you need after succesful registration should fix your problem. The easiest way to do it in spring in your case should be returning - &quot;redirect:/your-redirect-url&quot;.\r\n\r\nThis [SO question][1] should be useful as well.\r\n\r\nAlso this - [how to redirect][2].\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/1083357/do-you-always-redirect-after-post-if-yes-how-do-you-manage-it\r\n  [2]: https://www.baeldung.com/spring-redirect-and-forward","title":"spring boot application with data JPA added data many time","body":"<p>Looks as if you are directly returning a view after a post request, when you should be redirecting. Returning a redirect response to the page you need after succesful registration should fix your problem. The easiest way to do it in spring in your case should be returning - &quot;redirect:/your-redirect-url&quot;.</p>\n<p>This <a href=\"https://stackoverflow.com/questions/1083357/do-you-always-redirect-after-post-if-yes-how-do-you-manage-it\">SO question</a> should be useful as well.</p>\n<p>Also this - <a href=\"https://www.baeldung.com/spring-redirect-and-forward\" rel=\"nofollow noreferrer\">how to redirect</a>.</p>\n"}],"owner":{"account_id":22755343,"reputation":1,"user_id":16914879,"display_name":"yogesh erande"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":80,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1642235970,"creation_date":1642232560,"question_id":70719665,"body_markdown":"I created Spring Boot application with data JPA and add Dev Tool dependency and created one simple \r\nlogin page in JSP and and Registration page . when I fill register form and register data is fetch in controller using @ModelAttribute and save this data to Data Base and  go back to login page and refresh login page  2 or 3 times then my data save 2,3 times in data base.\r\n[User Entity Class][1]\r\n\r\n\r\n[Login JSP Page][2]\r\n\r\n\r\n[Registration JSP page][3]\r\n\r\n\r\n[Controller Class][4]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/ERfVs.png\r\n  [2]: https://i.stack.imgur.com/MFYoI.png\r\n  [3]: https://i.stack.imgur.com/OgRDU.png\r\n  [4]: https://i.stack.imgur.com/iEQqe.png","title":"spring boot application with data JPA added data many time","body":"<p>I created Spring Boot application with data JPA and add Dev Tool dependency and created one simple\nlogin page in JSP and and Registration page . when I fill register form and register data is fetch in controller using @ModelAttribute and save this data to Data Base and  go back to login page and refresh login page  2 or 3 times then my data save 2,3 times in data base.\n<a href=\"https://i.stack.imgur.com/ERfVs.png\" rel=\"nofollow noreferrer\">User Entity Class</a></p>\n<p><a href=\"https://i.stack.imgur.com/MFYoI.png\" rel=\"nofollow noreferrer\">Login JSP Page</a></p>\n<p><a href=\"https://i.stack.imgur.com/OgRDU.png\" rel=\"nofollow noreferrer\">Registration JSP page</a></p>\n<p><a href=\"https://i.stack.imgur.com/iEQqe.png\" rel=\"nofollow noreferrer\">Controller Class</a></p>\n"},{"tags":["java","casting","byte"],"comments":[{"owner":{"account_id":15790129,"reputation":36,"user_id":11393596,"display_name":"Haniyeh"},"score":0,"creation_date":1642202496,"post_id":70717547,"comment_id":125017196,"body_markdown":"I guess this might help you\n[byte + byte = int java](https://stackoverflow.com/a/18483732/11393596)","body":"I guess this might help you <a href=\"https://stackoverflow.com/a/18483732/11393596\">byte + byte = int java</a>"},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":1,"creation_date":1642206209,"post_id":70717547,"comment_id":125017763,"body_markdown":"BTW you can avoid to use the cast by doing `sum += array[i]`","body":"BTW you can avoid to use the cast by doing <code>sum += array[i]</code>"},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":1,"creation_date":1642208683,"post_id":70717547,"comment_id":125018108,"body_markdown":"And if you want to know ... this is the same in C#.","body":"And if you want to know ... this is the same in C#."}],"owner":{"account_id":5904748,"reputation":1,"user_id":4646958,"display_name":"naswari"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1642203253,"answer_count":0,"score":0,"last_activity_date":1642234770,"creation_date":1642202175,"question_id":70717547,"body_markdown":"Can someone kindly tell me why I need the following cast in my Java class?\r\n\r\n    sum = (byte)(sum + array[i]);\r\n\r\nIf I have the cast the program compiles, but if I remove it the program won&#39;t compile.\r\n\r\nBut in this case both **array** and **sum** are declared as byte. So why can&#39;t you add two byte types to get a byte result? If I change byte to int, then it will work fine. But why?\r\n\r\nThanks very much.\r\n```\r\npublic class FindSumOfByteArray\r\n{\r\n    public static void main(String[] args)\r\n    {\r\n        byte[] array = {-2,  9,  0,  7};\r\n\r\n        byte sum = 0;\r\n\r\n        for(int i = 0; i &lt; array.length; i++)\r\n        {\r\n            sum = (byte)(sum + array[i]);\r\n        }\r\n\r\n        System.out.println(&quot;Sum = &quot; + sum);\r\n    }\r\n}\r\n```\r\nThe error message would say:\r\n```\r\nFindSumOfByteArray.java:18: error: incompatible types: possible lossy conversion from int to byte\r\n            sum = sum + array[i];\r\n                      ^\r\n1 error\r\n```","title":"Why do you need to use a cast?","body":"<p>Can someone kindly tell me why I need the following cast in my Java class?</p>\n<pre><code>sum = (byte)(sum + array[i]);\n</code></pre>\n<p>If I have the cast the program compiles, but if I remove it the program won't compile.</p>\n<p>But in this case both <strong>array</strong> and <strong>sum</strong> are declared as byte. So why can't you add two byte types to get a byte result? If I change byte to int, then it will work fine. But why?</p>\n<p>Thanks very much.</p>\n<pre><code>public class FindSumOfByteArray\n{\n    public static void main(String[] args)\n    {\n        byte[] array = {-2,  9,  0,  7};\n\n        byte sum = 0;\n\n        for(int i = 0; i &lt; array.length; i++)\n        {\n            sum = (byte)(sum + array[i]);\n        }\n\n        System.out.println(&quot;Sum = &quot; + sum);\n    }\n}\n</code></pre>\n<p>The error message would say:</p>\n<pre><code>FindSumOfByteArray.java:18: error: incompatible types: possible lossy conversion from int to byte\n            sum = sum + array[i];\n                      ^\n1 error\n</code></pre>\n"},{"tags":["java","server"],"answers":[{"tags":[],"owner":{"account_id":18902091,"reputation":11,"user_id":14590641,"display_name":"Dharmesh Chauhan"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1634125901,"creation_date":1634125901,"answer_id":69555044,"question_id":68473460,"body_markdown":"I faced same problem, but got issuer id after generating key for appstore connect api.","title":"Can&#39;t find Issuer ID when use App Store Server API of Apple","body":"<p>I faced same problem, but got issuer id after generating key for appstore connect api.</p>\n"},{"tags":[],"owner":{"account_id":297506,"reputation":1169,"user_id":603069,"display_name":"Animal451"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1642234766,"creation_date":1642234766,"answer_id":70719866,"question_id":68473460,"body_markdown":"  The Issuer ID is indeed at the top of the page of https://appstoreconnect.apple.com/access/api (the place you get to once you login, select &#39;Users and Access&#39; and then &#39;Keys&#39;), but *only after you&#39;ve created your first App Store Connect API Key*.\r\n\r\n  I went through the process of creating an IAP Key, following the Apple instructions, but obviously missed any reference to creating an API Key first.\r\n\r\n  In short - create an API Key on the &#39;App Store Connect API&#39; selection, your issuer ID will appear near the top of that page.","title":"Can&#39;t find Issuer ID when use App Store Server API of Apple","body":"<p>The Issuer ID is indeed at the top of the page of <a href=\"https://appstoreconnect.apple.com/access/api\" rel=\"noreferrer\">https://appstoreconnect.apple.com/access/api</a> (the place you get to once you login, select 'Users and Access' and then 'Keys'), but <em>only after you've created your first App Store Connect API Key</em>.</p>\n<p>I went through the process of creating an IAP Key, following the Apple instructions, but obviously missed any reference to creating an API Key first.</p>\n<p>In short - create an API Key on the 'App Store Connect API' selection, your issuer ID will appear near the top of that page.</p>\n"}],"owner":{"account_id":235190,"reputation":1106,"user_id":501836,"accept_rate":55,"display_name":"user501836"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4533,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":2,"score":6,"last_activity_date":1642234766,"creation_date":1626885958,"question_id":68473460,"body_markdown":"I want to use the App Store Server API. so need to generate the JWT.\r\nthe document is: https://developer.apple.com/documentation/appstoreserverapi/generating_tokens_for_api_requests\r\n\r\n```\r\nTo get your issuer ID, log in to App Store Connect, then:\r\n\r\n1. Select Users and Access, then select the Keys tab.\r\n\r\n2. The issuer ID appears near the top of the page. To copy the issuer ID, click Copy next to the ID.\r\n```\r\n\r\nin the step 2, I can&#39;t find the issuer ID on the top of the page.\r\n\r\ndo you have the same issue?","title":"Can&#39;t find Issuer ID when use App Store Server API of Apple","body":"<p>I want to use the App Store Server API. so need to generate the JWT.\nthe document is: <a href=\"https://developer.apple.com/documentation/appstoreserverapi/generating_tokens_for_api_requests\" rel=\"noreferrer\">https://developer.apple.com/documentation/appstoreserverapi/generating_tokens_for_api_requests</a></p>\n<pre><code>To get your issuer ID, log in to App Store Connect, then:\n\n1. Select Users and Access, then select the Keys tab.\n\n2. The issuer ID appears near the top of the page. To copy the issuer ID, click Copy next to the ID.\n</code></pre>\n<p>in the step 2, I can't find the issuer ID on the top of the page.</p>\n<p>do you have the same issue?</p>\n"},{"tags":["java","selenium","selenium-webdriver","html-select","webdriverwait"],"comments":[{"owner":{"account_id":23419335,"reputation":108,"user_id":17479815,"display_name":"Yan"},"score":0,"creation_date":1641204063,"post_id":70558295,"comment_id":124738119,"body_markdown":"it should work i realy dont see what&#39;s causing this probleme i even tried it on my computer and it returns the error","body":"it should work i realy dont see what&#39;s causing this probleme i even tried it on my computer and it returns the error"}],"answers":[{"tags":[],"owner":{"account_id":10049107,"reputation":186627,"user_id":7429447,"accept_rate":86,"display_name":"undetected Selenium"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1642234037,"creation_date":1641217031,"answer_id":70566609,"question_id":70558295,"body_markdown":"To select the [tag:select-options] **Ishu1** from a [tag:html-select] tag you need to induce [WebDriverWait](https://stackoverflow.com/questions/48989049/selenium-how-selenium-identifies-elements-visIshu1ible-or-not-is-is-possible-that-i/48990165#48990165) for the `visibilityOfElementLocated()` and you can use either of the following [Locator Strategies](https://stackoverflow.com/questions/48369043/official-locator-strategies-for-the-webdriver/48376890#48376890):\r\n\r\n- Using _id_:\r\n\r\n\t  new Select(new WebDriverWait(driver, 20).until(ExpectedConditions.elementToBeClickable(By.id(&quot;portfolioid&quot;)))).selectByVisibleText(&quot;Ishu1&quot;);\r\n\r\n- Using _cssSelector_:\r\n\r\n\t  new Select(new WebDriverWait(driver, 20).until(ExpectedConditions.visibilityOfElementLocated(By.cssSelector(&quot;select#portfolioid&quot;)))).selectByVisibleText(&quot;Ishu1&quot;);\r\n\r\n- Using _xpath_:\r\n\r\n\t  new Select(new WebDriverWait(driver, 20).until(ExpectedConditions.visibilityOfElementLocated(By.xpath(&quot;//select[@id=&#39;portfolioid&#39;]&quot;)))).selectByVisibleText(&quot;Ishu1&quot;);\r\n","title":"selectByVisibleText method with incorrect option text doesn&#39;t generates error using Selenium and Java","body":"<p>To select the <a href=\"/questions/tagged/select-options\" class=\"post-tag\" title=\"show questions tagged &#39;select-options&#39;\" rel=\"tag\">select-options</a> <strong>Ishu1</strong> from a <a href=\"/questions/tagged/html-select\" class=\"post-tag\" title=\"show questions tagged &#39;html-select&#39;\" rel=\"tag\">html-select</a> tag you need to induce <a href=\"https://stackoverflow.com/questions/48989049/selenium-how-selenium-identifies-elements-visIshu1ible-or-not-is-is-possible-that-i/48990165#48990165\">WebDriverWait</a> for the <code>visibilityOfElementLocated()</code> and you can use either of the following <a href=\"https://stackoverflow.com/questions/48369043/official-locator-strategies-for-the-webdriver/48376890#48376890\">Locator Strategies</a>:</p>\n<ul>\n<li><p>Using <em>id</em>:</p>\n<pre><code>new Select(new WebDriverWait(driver, 20).until(ExpectedConditions.elementToBeClickable(By.id(&quot;portfolioid&quot;)))).selectByVisibleText(&quot;Ishu1&quot;);\n</code></pre>\n</li>\n<li><p>Using <em>cssSelector</em>:</p>\n<pre><code>new Select(new WebDriverWait(driver, 20).until(ExpectedConditions.visibilityOfElementLocated(By.cssSelector(&quot;select#portfolioid&quot;)))).selectByVisibleText(&quot;Ishu1&quot;);\n</code></pre>\n</li>\n<li><p>Using <em>xpath</em>:</p>\n<pre><code>new Select(new WebDriverWait(driver, 20).until(ExpectedConditions.visibilityOfElementLocated(By.xpath(&quot;//select[@id='portfolioid']&quot;)))).selectByVisibleText(&quot;Ishu1&quot;);\n</code></pre>\n</li>\n</ul>\n"}],"owner":{"account_id":18742299,"reputation":3,"user_id":13665325,"display_name":"Shashwat Aryan"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":626,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1642234037,"creation_date":1641145358,"question_id":70558295,"body_markdown":"When I am trying to find element using `selectByVisibleText()` method from a dropdown, the program is getting executed even if there is no such text in the dropdown. Though after execution of program it is showing an error.\r\n\r\nHTML element:\r\n```\r\n&lt;select id=&quot;portfolioid&quot;&gt;\r\n    &lt;option value=&quot;2021218&quot; selected=&quot;selected&quot;&gt;Ishu8&lt;/option&gt;\r\n    &lt;option value=&quot;2021219&quot;&gt;Ishu7&lt;/option&gt;\r\n    &lt;option value=&quot;2021220&quot;&gt;Ishu6&lt;/option&gt;\r\n    &lt;option value=&quot;2021221&quot;&gt;Ishu&lt;/option&gt;\r\n&lt;/select&gt;\r\n```\r\n\r\nMy Code:\r\n```\r\nWebElement wb=driver.findElement(By.id(&quot;portfolioid&quot;));\r\nSelect dropdown=new Select(wb);\r\ndropdown.selectByVisibleText(&quot;Ishu1&quot;);\r\n```\r\nThis is selecting the first element(i.e. &quot;Ishu8&quot;) in dropdown and executing rest of the program, while it should stop the execution after an error. Rest of the scenarios are working fine ","title":"selectByVisibleText method with incorrect option text doesn&#39;t generates error using Selenium and Java","body":"<p>When I am trying to find element using <code>selectByVisibleText()</code> method from a dropdown, the program is getting executed even if there is no such text in the dropdown. Though after execution of program it is showing an error.</p>\n<p>HTML element:</p>\n<pre><code>&lt;select id=&quot;portfolioid&quot;&gt;\n    &lt;option value=&quot;2021218&quot; selected=&quot;selected&quot;&gt;Ishu8&lt;/option&gt;\n    &lt;option value=&quot;2021219&quot;&gt;Ishu7&lt;/option&gt;\n    &lt;option value=&quot;2021220&quot;&gt;Ishu6&lt;/option&gt;\n    &lt;option value=&quot;2021221&quot;&gt;Ishu&lt;/option&gt;\n&lt;/select&gt;\n</code></pre>\n<p>My Code:</p>\n<pre><code>WebElement wb=driver.findElement(By.id(&quot;portfolioid&quot;));\nSelect dropdown=new Select(wb);\ndropdown.selectByVisibleText(&quot;Ishu1&quot;);\n</code></pre>\n<p>This is selecting the first element(i.e. &quot;Ishu8&quot;) in dropdown and executing rest of the program, while it should stop the execution after an error. Rest of the scenarios are working fine</p>\n"},{"tags":["java","xml","xslt","xsd"],"comments":[{"owner":{"account_id":91947,"reputation":161814,"user_id":252228,"accept_rate":80,"display_name":"Martin Honnen"},"score":0,"creation_date":1642169528,"post_id":70711843,"comment_id":125006137,"body_markdown":"Which tool or which API do you use to parse the XML and/or run the XSLT? Which encoding does the input XML have? Which encoding does the output of the XSLT have, how do you render it, look at it?","body":"Which tool or which API do you use to parse the XML and/or run the XSLT? Which encoding does the input XML have? Which encoding does the output of the XSLT have, how do you render it, look at it?"},{"owner":{"account_id":22957737,"reputation":23,"user_id":17088081,"display_name":"shashi sharma"},"score":0,"creation_date":1642171895,"post_id":70711843,"comment_id":125007123,"body_markdown":"Hi Martin, I am using Saxon parser is used to parse the XML through XSL","body":"Hi Martin, I am using Saxon parser is used to parse the XML through XSL"},{"owner":{"account_id":91947,"reputation":161814,"user_id":252228,"accept_rate":80,"display_name":"Martin Honnen"},"score":0,"creation_date":1642172140,"post_id":70711843,"comment_id":125007228,"body_markdown":"Well, then tell us exactly which version of Saxon you use and show us exactly how you use it, whether and how you run it from the command line or which Java or C# code you have written to run it. Somehow your input parsing goes wrong but we can&#39;t tell based on some code samples of XML and/or XSLT alone, you will need to explain what you do exactly.","body":"Well, then tell us exactly which version of Saxon you use and show us exactly how you use it, whether and how you run it from the command line or which Java or C# code you have written to run it. Somehow your input parsing goes wrong but we can&#39;t tell based on some code samples of XML and/or XSLT alone, you will need to explain what you do exactly."},{"owner":{"account_id":22957737,"reputation":23,"user_id":17088081,"display_name":"shashi sharma"},"score":0,"creation_date":1642233022,"post_id":70711843,"comment_id":125020646,"body_markdown":"Hi Martin I had added the transformation code too which converts the XML.","body":"Hi Martin I had added the transformation code too which converts the XML."}],"answers":[{"tags":[],"owner":{"account_id":529122,"reputation":158120,"user_id":415448,"accept_rate":33,"display_name":"Michael Kay"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1642169678,"creation_date":1642169678,"answer_id":70711931,"question_id":70711843,"body_markdown":"The problem will be that the input file is not encoded the way the XML parser thinks it is, so the XML parser is decoding the characters incorrectly. Check whether the input XML file has an XML declaration that declares the encoding, and check whether the bullet character at the start of the line is actually encoded the way it should be.\r\n\r\nA good XML editor like Oxygen should help you resolve this.\r\n\r\nOf course, once you discover exactly what the encoding problem is, you need to investigate how it happened, and ensure that it doesn&#39;t happen again.\r\n\r\n(Incidentally, it&#39;s &quot;ascii&quot; not &quot;ascaii&quot;, and the characters you are seeing are non-ASCII characters. When you&#39;re dealing with character encoding problems, you need to be precise.)","title":"Using XSL it can show ASCII value of some special character","body":"<p>The problem will be that the input file is not encoded the way the XML parser thinks it is, so the XML parser is decoding the characters incorrectly. Check whether the input XML file has an XML declaration that declares the encoding, and check whether the bullet character at the start of the line is actually encoded the way it should be.</p>\n<p>A good XML editor like Oxygen should help you resolve this.</p>\n<p>Of course, once you discover exactly what the encoding problem is, you need to investigate how it happened, and ensure that it doesn't happen again.</p>\n<p>(Incidentally, it's &quot;ascii&quot; not &quot;ascaii&quot;, and the characters you are seeing are non-ASCII characters. When you're dealing with character encoding problems, you need to be precise.)</p>\n"},{"tags":[],"owner":{"account_id":91947,"reputation":161814,"user_id":252228,"accept_rate":80,"display_name":"Martin Honnen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1642233613,"creation_date":1642233613,"answer_id":70719766,"question_id":70711843,"body_markdown":"If you have a Java String with Unicode characters than the right way to feed them to the XML parser/JAXP Transformer would be a `StreamSource` over a `StringReader` i.e. `StreamSource src = new StreamSource(new StringReader(xml));`. \r\nYou haven&#39;t shown how you construct the String `xml` but once you have a String with the characters use a StringReader. \r\n\r\nOf course, if you have a file, use a StreamSource over a FileInputStream, all attempts to guess encoding and do the decoding by hand are not necessary and error-prone, an XML parser is usually pretty good at detecting the encoding based on the XML declaration and decoding as necessary.\r\n\r\nAs you also want a String for the transformation result I would additionally recommend a StreamResult over a StringWriter.","title":"Using XSL it can show ASCII value of some special character","body":"<p>If you have a Java String with Unicode characters than the right way to feed them to the XML parser/JAXP Transformer would be a <code>StreamSource</code> over a <code>StringReader</code> i.e. <code>StreamSource src = new StreamSource(new StringReader(xml));</code>.\nYou haven't shown how you construct the String <code>xml</code> but once you have a String with the characters use a StringReader.</p>\n<p>Of course, if you have a file, use a StreamSource over a FileInputStream, all attempts to guess encoding and do the decoding by hand are not necessary and error-prone, an XML parser is usually pretty good at detecting the encoding based on the XML declaration and decoding as necessary.</p>\n<p>As you also want a String for the transformation result I would additionally recommend a StreamResult over a StringWriter.</p>\n"}],"owner":{"account_id":22957737,"reputation":23,"user_id":17088081,"display_name":"shashi sharma"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":307,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70719766,"answer_count":2,"score":0,"last_activity_date":1642233768,"creation_date":1642169269,"question_id":70711843,"body_markdown":"I am facing some issues when I convert the XML using XSL then it didn&#39;t parse the bullet it gives me some ASCII characters as shown below.\r\n\r\nHere is the XSL that convert the complex xml into simplified XML.\r\n            \r\n            &lt;xsl:stylesheet version=&quot;2.0&quot;\r\n            xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot;\r\n            xpath-default-namespace=&quot;http://www.abbyy.com/FineReader_xml/FineReader10-schema-v1.xml&quot;&gt;\r\n            &lt;xsl:output method=&quot;xml&quot; indent=&quot;yes&quot;/&gt;\r\n            &lt;xsl:template match=&quot;/document&quot;&gt;\r\n                &lt;document&gt;\r\n                    &lt;xsl:for-each select=&quot;page&quot;&gt;\r\n                        &lt;page&gt;\r\n                            &lt;xsl:for-each select=&quot;block&quot;&gt;\r\n                                &lt;block blockType=&quot;{@blockType}&quot;&gt;\r\n                                   &lt;xsl:for-each select=&quot;text&quot;&gt;\r\n                                       &lt;text&gt;\r\n                                            &lt;xsl:for-each select=&quot;par&quot;&gt;\r\n                                                &lt;paragraph&gt;\r\n                                                    &lt;line&gt;\r\n                                                        &lt;xsl:value-of select=&quot;line&quot;/&gt;\r\n                                                    &lt;/line&gt;\r\n                                                &lt;/paragraph&gt;\r\n                                            &lt;/xsl:for-each&gt;\r\n                                        &lt;/text&gt;\r\n                                    &lt;/xsl:for-each&gt;\r\n                                &lt;/block&gt;\r\n                            &lt;/xsl:for-each&gt;\r\n                        &lt;/page&gt;\r\n                    &lt;/xsl:for-each&gt;\r\n                &lt;/document&gt;\r\n            &lt;/xsl:template&gt;\r\n            &lt;/xsl:stylesheet&gt;\r\n            \r\nAt the beginning of \\&lt;line\\&gt; it needs to show the bullet bt it show some ascii value when we convert the xml using xsl from complex xml. i used the saxon transformation to transform the xml using xsl stylesheet language \r\n             \r\n            &lt;paragraph&gt;\r\n                           &lt;line&gt;?&#162;&#226;?&#172;?&#162; If you have to take a picture of a document in poor lighting and need the flash, try to use the flash from 20 inches away and try to find additional light sources.&lt;/line&gt;\r\n                        &lt;/paragraph&gt;\r\n        \r\n&gt; XSL is a family of recommendations for defining XML document transformation and presentation. An XSLT stylesheet specifies the presentation of a class of XML documents by describing how an instance of the class is transformed into an XML document that uses a formatting vocabulary or Extensible Markup Language (XML) is a markup language that defines a set of rules for encoding documents in a format that is both human-readable and machine-readable\r\n        \r\nHere is the XML that is converted using XML Stylesheet language. when I used online XSL transformation it gives me a correct answer but using Saxon transformation will not give me the exact result. I don&#39;t know where I was doing wrong why it does not give me the correct result. what&#39;s the issue behind that is it with Transformation or with XSL?\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;\r\n    &lt;document xmlns=&quot;http://www.abbyy.com/FineReader_xml/FineReader10-schema-v1.xml&quot; version=&quot;1.0&quot; producer=&quot;ABBYY FineReader Engine 12&quot; pagesCount=&quot;2&quot; languages=&quot;&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://www.abbyy.com/FineReader_xml/FineReader10-schema-v1.xml http://www.abbyy.com/FineReader_xml/FineReader10-schema-v1.xml&quot;&gt;\r\n    &lt;page width=&quot;2550&quot; height=&quot;3300&quot; resolution=&quot;300&quot; originalCoords=&quot;1&quot;&gt;\r\n    &lt;block blockType=&quot;Text&quot; blockName=&quot;&quot; l=&quot;273&quot; t=&quot;1721&quot; r=&quot;2281&quot; b=&quot;2618&quot;&gt;&lt;region&gt;&lt;rect l=&quot;273&quot; t=&quot;1721&quot; r=&quot;2281&quot; b=&quot;2618&quot;/&gt;&lt;/region&gt;\r\n    &lt;text&gt;\r\n    &lt;par leftIndent=&quot;3600&quot; startIndent=&quot;-1800&quot; lineSpacing=&quot;1152&quot; isListItem=&quot;1&quot; lstLvl=&quot;0&quot;&gt;\r\n    &lt;line baseline=&quot;2232&quot; l=&quot;355&quot; t=&quot;2201&quot; r=&quot;2275&quot; b=&quot;2240&quot;&gt;&lt;formatting lang=&quot;EnglishUnitedStates&quot;&gt;• Use the white balance feature. If your camera has manual white balance, use a white sheet of paper&lt;/formatting&gt;&lt;/line&gt;\r\n    &lt;line baseline=&quot;2280&quot; l=&quot;429&quot; t=&quot;2249&quot; r=&quot;2209&quot; b=&quot;2288&quot;&gt;&lt;formatting lang=&quot;EnglishUnitedStates&quot;&gt;to set white balance. Otherwise, select the appropriate balance mode for your lighting conditions.&lt;/formatting&gt;&lt;/line&gt;&lt;/par&gt;\r\n    &lt;par startIndent=&quot;1800&quot; lineSpacing=&quot;1152&quot; isListItem=&quot;1&quot; lstLvl=&quot;0&quot;&gt;\r\n    &lt;line baseline=&quot;2331&quot; l=&quot;355&quot; t=&quot;2300&quot; r=&quot;1416&quot; b=&quot;2339&quot;&gt;&lt;formatting lang=&quot;EnglishUnitedStates&quot;&gt;• Enable the anti-shake setting: otherwise, use a tripod.&lt;/formatting&gt;&lt;/line&gt;&lt;/par&gt;\r\n    &lt;par lineSpacing=&quot;1152&quot;&gt;\r\n    &lt;line baseline=&quot;2403&quot; l=&quot;282&quot; t=&quot;2373&quot; r=&quot;759&quot; b=&quot;2412&quot;&gt;&lt;formatting lang=&quot;EnglishUnitedStates&quot;&gt;In poor lighting conditions:&lt;/formatting&gt;&lt;/line&gt;&lt;/par&gt;\r\n    &lt;par startIndent=&quot;1800&quot; lineSpacing=&quot;1152&quot; isListItem=&quot;1&quot; lstLvl=&quot;0&quot;&gt;\r\n    &lt;line baseline=&quot;2454&quot; l=&quot;355&quot; t=&quot;2423&quot; r=&quot;1930&quot; b=&quot;2462&quot;&gt;&lt;formatting lang=&quot;EnglishUnitedStates&quot;&gt;• Auto focus may function incorrectly: therefore, you should switch to manual focus.&lt;/formatting&gt;&lt;/line&gt;&lt;/par&gt;\r\n    &lt;par leftIndent=&quot;3600&quot; startIndent=&quot;-1800&quot; lineSpacing=&quot;1152&quot; isListItem=&quot;1&quot; lstLvl=&quot;0&quot;&gt;\r\n    &lt;line baseline=&quot;2505&quot; l=&quot;355&quot; t=&quot;2474&quot; r=&quot;2154&quot; b=&quot;2513&quot;&gt;&lt;formatting lang=&quot;EnglishUnitedStates&quot;&gt;• Use the maximum aperture allowed by the camera (2.3 or 4.5). (In bright daylight, use smaller&lt;/formatting&gt;&lt;/line&gt;\r\n    &lt;line baseline=&quot;2553&quot; l=&quot;430&quot; t=&quot;2522&quot; r=&quot;1245&quot; b=&quot;2561&quot;&gt;&lt;formatting lang=&quot;EnglishUnitedStates&quot;&gt;apertures: this will produce sharper images).&lt;/formatting&gt;&lt;/line&gt;&lt;/par&gt;\r\n    &lt;par startIndent=&quot;1800&quot; lineSpacing=&quot;1152&quot; isListItem=&quot;1&quot; lstLvl=&quot;0&quot;&gt;\r\n    &lt;line baseline=&quot;2603&quot; l=&quot;355&quot; t=&quot;2572&quot; r=&quot;2121&quot; b=&quot;2612&quot;&gt;&lt;formatting lang=&quot;EnglishUnitedStates&quot;&gt;• If your camera gives you more than one choice of ISO speed, select the highest ISO setting.&lt;/formatting&gt;&lt;/line&gt;&lt;/par&gt;\r\n    &lt;/text&gt;\r\n    &lt;/block&gt;\r\n    &lt;block blockType=&quot;Picture&quot; blockName=&quot;&quot; l=&quot;315&quot; t=&quot;1349&quot; r=&quot;697&quot; b=&quot;1693&quot;&gt;&lt;region&gt;&lt;rect l=&quot;315&quot; t=&quot;1349&quot; r=&quot;697&quot; b=&quot;1693&quot;/&gt;&lt;/region&gt;\r\n    &lt;/block&gt;\r\n    &lt;block blockType=&quot;Text&quot; blockName=&quot;&quot; l=&quot;1270&quot; t=&quot;3021&quot; r=&quot;1304&quot; b=&quot;3067&quot;&gt;&lt;region&gt;&lt;rect l=&quot;1270&quot; t=&quot;3021&quot; r=&quot;1304&quot; b=&quot;3067&quot;/&gt;&lt;/region&gt;\r\n    &lt;text&gt;\r\n    &lt;par lineSpacing=&quot;1380&quot;&gt;\r\n    &lt;line baseline=&quot;3061&quot; l=&quot;1276&quot; t=&quot;3027&quot; r=&quot;1297&quot; b=&quot;3061&quot;&gt;&lt;formatting lang=&quot;EnglishUnitedStates&quot;&gt;2&lt;/formatting&gt;&lt;/line&gt;&lt;/par&gt;\r\n    &lt;/text&gt;\r\n    &lt;/block&gt;\r\n    &lt;/page&gt;\r\n    &lt;/document&gt;\r\n\r\n    Here is the saxon parser transformation that used to translate it\r\n    public static String saxonTransform(String xml, String xsl) throws TransformerException, FileNotFoundException {\r\n            TransformerFactoryImpl f = new net.sf.saxon.TransformerFactoryImpl();\r\n            f.setAttribute(&quot;http://saxon.sf.net/feature/version-warning&quot;, Boolean.FALSE);\r\n            try {\r\n                StreamSource xsrc = new StreamSource(new ByteArrayInputStream(xsl.getBytes(Charset.forName(&quot;UTF-8&quot;))));\r\n                Transformer t = f.newTransformer(xsrc);\r\n                StreamSource src = new StreamSource(new ByteArrayInputStream(xml.getBytes(Charset.forName(&quot;UTF-8&quot;))));\r\n                StreamResult res = new StreamResult(new ByteArrayOutputStream());\r\n                t.transform(src, res);\r\n                return res.getOutputStream().toString();\r\n            } catch (Exception e) {\r\n                logger.warn(e.getMessage());\r\n            }\r\n            return null;\r\n        }\r\n\r\n    here is the way that convert the file into XML\r\n     public  String  FileToXmlString( String path){\r\n            String str=&quot;&quot;;\r\n            String str1=&quot;&quot;;\r\n            try {\r\n                str=new String(Files.readAllBytes(Paths.get(path)));\r\n                str1=str.substring(3);\r\n                }\r\n                catch (IOException e) {\r\n                    logger.error(e.getMessage());\r\n                }\r\n            return str1;        \r\n        }","title":"Using XSL it can show ASCII value of some special character","body":"<p>I am facing some issues when I convert the XML using XSL then it didn't parse the bullet it gives me some ASCII characters as shown below.</p>\n<p>Here is the XSL that convert the complex xml into simplified XML.</p>\n<pre><code>        &lt;xsl:stylesheet version=&quot;2.0&quot;\n        xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot;\n        xpath-default-namespace=&quot;http://www.abbyy.com/FineReader_xml/FineReader10-schema-v1.xml&quot;&gt;\n        &lt;xsl:output method=&quot;xml&quot; indent=&quot;yes&quot;/&gt;\n        &lt;xsl:template match=&quot;/document&quot;&gt;\n            &lt;document&gt;\n                &lt;xsl:for-each select=&quot;page&quot;&gt;\n                    &lt;page&gt;\n                        &lt;xsl:for-each select=&quot;block&quot;&gt;\n                            &lt;block blockType=&quot;{@blockType}&quot;&gt;\n                               &lt;xsl:for-each select=&quot;text&quot;&gt;\n                                   &lt;text&gt;\n                                        &lt;xsl:for-each select=&quot;par&quot;&gt;\n                                            &lt;paragraph&gt;\n                                                &lt;line&gt;\n                                                    &lt;xsl:value-of select=&quot;line&quot;/&gt;\n                                                &lt;/line&gt;\n                                            &lt;/paragraph&gt;\n                                        &lt;/xsl:for-each&gt;\n                                    &lt;/text&gt;\n                                &lt;/xsl:for-each&gt;\n                            &lt;/block&gt;\n                        &lt;/xsl:for-each&gt;\n                    &lt;/page&gt;\n                &lt;/xsl:for-each&gt;\n            &lt;/document&gt;\n        &lt;/xsl:template&gt;\n        &lt;/xsl:stylesheet&gt;\n        \n</code></pre>\n<p>At the beginning of &lt;line&gt; it needs to show the bullet bt it show some ascii value when we convert the xml using xsl from complex xml. i used the saxon transformation to transform the xml using xsl stylesheet language</p>\n<pre><code>        &lt;paragraph&gt;\n                       &lt;line&gt;?¢â?¬?¢ If you have to take a picture of a document in poor lighting and need the flash, try to use the flash from 20 inches away and try to find additional light sources.&lt;/line&gt;\n                    &lt;/paragraph&gt;\n    \n</code></pre>\n<blockquote>\n<p>XSL is a family of recommendations for defining XML document transformation and presentation. An XSLT stylesheet specifies the presentation of a class of XML documents by describing how an instance of the class is transformed into an XML document that uses a formatting vocabulary or Extensible Markup Language (XML) is a markup language that defines a set of rules for encoding documents in a format that is both human-readable and machine-readable</p>\n</blockquote>\n<p>Here is the XML that is converted using XML Stylesheet language. when I used online XSL transformation it gives me a correct answer but using Saxon transformation will not give me the exact result. I don't know where I was doing wrong why it does not give me the correct result. what's the issue behind that is it with Transformation or with XSL?</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;\n&lt;document xmlns=&quot;http://www.abbyy.com/FineReader_xml/FineReader10-schema-v1.xml&quot; version=&quot;1.0&quot; producer=&quot;ABBYY FineReader Engine 12&quot; pagesCount=&quot;2&quot; languages=&quot;&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://www.abbyy.com/FineReader_xml/FineReader10-schema-v1.xml http://www.abbyy.com/FineReader_xml/FineReader10-schema-v1.xml&quot;&gt;\n&lt;page width=&quot;2550&quot; height=&quot;3300&quot; resolution=&quot;300&quot; originalCoords=&quot;1&quot;&gt;\n&lt;block blockType=&quot;Text&quot; blockName=&quot;&quot; l=&quot;273&quot; t=&quot;1721&quot; r=&quot;2281&quot; b=&quot;2618&quot;&gt;&lt;region&gt;&lt;rect l=&quot;273&quot; t=&quot;1721&quot; r=&quot;2281&quot; b=&quot;2618&quot;/&gt;&lt;/region&gt;\n&lt;text&gt;\n&lt;par leftIndent=&quot;3600&quot; startIndent=&quot;-1800&quot; lineSpacing=&quot;1152&quot; isListItem=&quot;1&quot; lstLvl=&quot;0&quot;&gt;\n&lt;line baseline=&quot;2232&quot; l=&quot;355&quot; t=&quot;2201&quot; r=&quot;2275&quot; b=&quot;2240&quot;&gt;&lt;formatting lang=&quot;EnglishUnitedStates&quot;&gt;• Use the white balance feature. If your camera has manual white balance, use a white sheet of paper&lt;/formatting&gt;&lt;/line&gt;\n&lt;line baseline=&quot;2280&quot; l=&quot;429&quot; t=&quot;2249&quot; r=&quot;2209&quot; b=&quot;2288&quot;&gt;&lt;formatting lang=&quot;EnglishUnitedStates&quot;&gt;to set white balance. Otherwise, select the appropriate balance mode for your lighting conditions.&lt;/formatting&gt;&lt;/line&gt;&lt;/par&gt;\n&lt;par startIndent=&quot;1800&quot; lineSpacing=&quot;1152&quot; isListItem=&quot;1&quot; lstLvl=&quot;0&quot;&gt;\n&lt;line baseline=&quot;2331&quot; l=&quot;355&quot; t=&quot;2300&quot; r=&quot;1416&quot; b=&quot;2339&quot;&gt;&lt;formatting lang=&quot;EnglishUnitedStates&quot;&gt;• Enable the anti-shake setting: otherwise, use a tripod.&lt;/formatting&gt;&lt;/line&gt;&lt;/par&gt;\n&lt;par lineSpacing=&quot;1152&quot;&gt;\n&lt;line baseline=&quot;2403&quot; l=&quot;282&quot; t=&quot;2373&quot; r=&quot;759&quot; b=&quot;2412&quot;&gt;&lt;formatting lang=&quot;EnglishUnitedStates&quot;&gt;In poor lighting conditions:&lt;/formatting&gt;&lt;/line&gt;&lt;/par&gt;\n&lt;par startIndent=&quot;1800&quot; lineSpacing=&quot;1152&quot; isListItem=&quot;1&quot; lstLvl=&quot;0&quot;&gt;\n&lt;line baseline=&quot;2454&quot; l=&quot;355&quot; t=&quot;2423&quot; r=&quot;1930&quot; b=&quot;2462&quot;&gt;&lt;formatting lang=&quot;EnglishUnitedStates&quot;&gt;• Auto focus may function incorrectly: therefore, you should switch to manual focus.&lt;/formatting&gt;&lt;/line&gt;&lt;/par&gt;\n&lt;par leftIndent=&quot;3600&quot; startIndent=&quot;-1800&quot; lineSpacing=&quot;1152&quot; isListItem=&quot;1&quot; lstLvl=&quot;0&quot;&gt;\n&lt;line baseline=&quot;2505&quot; l=&quot;355&quot; t=&quot;2474&quot; r=&quot;2154&quot; b=&quot;2513&quot;&gt;&lt;formatting lang=&quot;EnglishUnitedStates&quot;&gt;• Use the maximum aperture allowed by the camera (2.3 or 4.5). (In bright daylight, use smaller&lt;/formatting&gt;&lt;/line&gt;\n&lt;line baseline=&quot;2553&quot; l=&quot;430&quot; t=&quot;2522&quot; r=&quot;1245&quot; b=&quot;2561&quot;&gt;&lt;formatting lang=&quot;EnglishUnitedStates&quot;&gt;apertures: this will produce sharper images).&lt;/formatting&gt;&lt;/line&gt;&lt;/par&gt;\n&lt;par startIndent=&quot;1800&quot; lineSpacing=&quot;1152&quot; isListItem=&quot;1&quot; lstLvl=&quot;0&quot;&gt;\n&lt;line baseline=&quot;2603&quot; l=&quot;355&quot; t=&quot;2572&quot; r=&quot;2121&quot; b=&quot;2612&quot;&gt;&lt;formatting lang=&quot;EnglishUnitedStates&quot;&gt;• If your camera gives you more than one choice of ISO speed, select the highest ISO setting.&lt;/formatting&gt;&lt;/line&gt;&lt;/par&gt;\n&lt;/text&gt;\n&lt;/block&gt;\n&lt;block blockType=&quot;Picture&quot; blockName=&quot;&quot; l=&quot;315&quot; t=&quot;1349&quot; r=&quot;697&quot; b=&quot;1693&quot;&gt;&lt;region&gt;&lt;rect l=&quot;315&quot; t=&quot;1349&quot; r=&quot;697&quot; b=&quot;1693&quot;/&gt;&lt;/region&gt;\n&lt;/block&gt;\n&lt;block blockType=&quot;Text&quot; blockName=&quot;&quot; l=&quot;1270&quot; t=&quot;3021&quot; r=&quot;1304&quot; b=&quot;3067&quot;&gt;&lt;region&gt;&lt;rect l=&quot;1270&quot; t=&quot;3021&quot; r=&quot;1304&quot; b=&quot;3067&quot;/&gt;&lt;/region&gt;\n&lt;text&gt;\n&lt;par lineSpacing=&quot;1380&quot;&gt;\n&lt;line baseline=&quot;3061&quot; l=&quot;1276&quot; t=&quot;3027&quot; r=&quot;1297&quot; b=&quot;3061&quot;&gt;&lt;formatting lang=&quot;EnglishUnitedStates&quot;&gt;2&lt;/formatting&gt;&lt;/line&gt;&lt;/par&gt;\n&lt;/text&gt;\n&lt;/block&gt;\n&lt;/page&gt;\n&lt;/document&gt;\n\nHere is the saxon parser transformation that used to translate it\npublic static String saxonTransform(String xml, String xsl) throws TransformerException, FileNotFoundException {\n        TransformerFactoryImpl f = new net.sf.saxon.TransformerFactoryImpl();\n        f.setAttribute(&quot;http://saxon.sf.net/feature/version-warning&quot;, Boolean.FALSE);\n        try {\n            StreamSource xsrc = new StreamSource(new ByteArrayInputStream(xsl.getBytes(Charset.forName(&quot;UTF-8&quot;))));\n            Transformer t = f.newTransformer(xsrc);\n            StreamSource src = new StreamSource(new ByteArrayInputStream(xml.getBytes(Charset.forName(&quot;UTF-8&quot;))));\n            StreamResult res = new StreamResult(new ByteArrayOutputStream());\n            t.transform(src, res);\n            return res.getOutputStream().toString();\n        } catch (Exception e) {\n            logger.warn(e.getMessage());\n        }\n        return null;\n    }\n\nhere is the way that convert the file into XML\n public  String  FileToXmlString( String path){\n        String str=&quot;&quot;;\n        String str1=&quot;&quot;;\n        try {\n            str=new String(Files.readAllBytes(Paths.get(path)));\n            str1=str.substring(3);\n            }\n            catch (IOException e) {\n                logger.error(e.getMessage());\n            }\n        return str1;        \n    }\n</code></pre>\n"},{"tags":["java","performance","jit","jmh"],"comments":[{"owner":{"account_id":1328773,"reputation":37883,"user_id":1273080,"accept_rate":100,"display_name":"Petr Janeček"},"score":4,"creation_date":1642175072,"post_id":70712882,"comment_id":125008409,"body_markdown":"Okay, so: Writing a correct microbenchmark in Java by hand is **hard**: https://stackoverflow.com/questions/504103/how-do-i-write-a-correct-micro-benchmark-in-java. Yours is obviously flawed. Use [JMH](https://github.com/openjdk/jmh). That said, the result you&#39;re getting is interesting on its own and I&#39;d like to understand the reason for the behaviour.","body":"Okay, so: Writing a correct microbenchmark in Java by hand is <b>hard</b>: <a href=\"https://stackoverflow.com/questions/504103/how-do-i-write-a-correct-micro-benchmark-in-java\" title=\"how do i write a correct micro benchmark in java\">stackoverflow.com/questions/504103/&hellip;</a>. Yours is obviously flawed. Use <a href=\"https://github.com/openjdk/jmh\" rel=\"nofollow noreferrer\">JMH</a>. That said, the result you&#39;re getting is interesting on its own and I&#39;d like to understand the reason for the behaviour."},{"owner":{"account_id":5998820,"reputation":12666,"user_id":4712734,"display_name":"DuncG"},"score":2,"creation_date":1642175212,"post_id":70712882,"comment_id":125008473,"body_markdown":"If A1/B/A2 are switched around, the third one always seems to take a lot longer than the first","body":"If A1/B/A2 are switched around, the third one always seems to take a lot longer than the first"},{"owner":{"account_id":19878841,"reputation":71,"user_id":14563274,"display_name":"Jakes"},"score":0,"creation_date":1642175575,"post_id":70712882,"comment_id":125008643,"body_markdown":"@DuncG yes, that is another weird property of this experiment","body":"@DuncG yes, that is another weird property of this experiment"},{"owner":{"account_id":19878841,"reputation":71,"user_id":14563274,"display_name":"Jakes"},"score":0,"creation_date":1642175752,"post_id":70712882,"comment_id":125008717,"body_markdown":"@PetrJaneček, this is an oversimplified class to **clearly** show the weird results happening here, and not a final test template to be used as a benchmark model. The ones I use are way more complex using different heuristics","body":"@PetrJaneček, this is an oversimplified class to <b>clearly</b> show the weird results happening here, and not a final test template to be used as a benchmark model. The ones I use are way more complex using different heuristics"},{"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":0,"creation_date":1642176412,"post_id":70712882,"comment_id":125009001,"body_markdown":"This is perfectly normal on the JVM, and the reason you use benchmarking tools.","body":"This is perfectly normal on the JVM, and the reason you use benchmarking tools."},{"owner":{"account_id":1328773,"reputation":37883,"user_id":1273080,"accept_rate":100,"display_name":"Petr Janeček"},"score":1,"creation_date":1642177870,"post_id":70712882,"comment_id":125009581,"body_markdown":"@LouisWasserman Normally I&#39;d fully agree. Even in this case it&#39;s not hard to convince the compiler to completely eliminate all code in `expectedResults()` and make it finish in a millisecond. That&#39;s understandable. But still, just for our JVM undertanding, how does it happen that a loop doing nothing suddenly slows down 10*, and continues to be super-slow even if we continue calling it? What tool can we use to isolate / understand the behaviour?","body":"@LouisWasserman Normally I&#39;d fully agree. Even in this case it&#39;s not hard to convince the compiler to completely eliminate all code in <code>expectedResults()</code> and make it finish in a millisecond. That&#39;s understandable. But still, just for our JVM undertanding, how does it happen that a loop doing nothing suddenly slows down 10*, and continues to be super-slow even if we continue calling it? What tool can we use to isolate / understand the behaviour?"},{"owner":{"account_id":19878841,"reputation":71,"user_id":14563274,"display_name":"Jakes"},"score":0,"creation_date":1642177996,"post_id":70712882,"comment_id":125009635,"body_markdown":"@PetrJaneček, like you said (and that was the reason I posted the code here) when escalating it one can confirm that it will go on forever with a higher (but stable) time values even though the first 2 are always lower. This is even more noticeable when using higher loop ranges","body":"@PetrJaneček, like you said (and that was the reason I posted the code here) when escalating it one can confirm that it will go on forever with a higher (but stable) time values even though the first 2 are always lower. This is even more noticeable when using higher loop ranges"},{"owner":{"account_id":1328773,"reputation":37883,"user_id":1273080,"accept_rate":100,"display_name":"Petr Janeček"},"score":0,"creation_date":1642207804,"post_id":70712882,"comment_id":125017995,"body_markdown":"@Jakes I took to liberty to simplify your code to its minimal form, and rewrote the question to specifically ask for the reason of the single effect we&#39;re looking at. Please feel free to revert / edit my text to your liking. I simply tried to focus the question on the subject matter,","body":"@Jakes I took to liberty to simplify your code to its minimal form, and rewrote the question to specifically ask for the reason of the single effect we&#39;re looking at. Please feel free to revert / edit my text to your liking. I simply tried to focus the question on the subject matter,"},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1642209502,"post_id":70712882,"comment_id":125018190,"body_markdown":"The explanation is probably related to JIT compilation.  An my guess is that your &quot;unrolling&quot; of the loop in `main` is implicated too. That means you have 4 distinct lambdas instead of one.  Each one will be bytecode compiled to a distinct .class file, so the JIT compiler (probably) won&#39;t compile them all at the same time.","body":"The explanation is probably related to JIT compilation.  An my guess is that your &quot;unrolling&quot; of the loop in <code>main</code> is implicated too. That means you have 4 distinct lambdas instead of one.  Each one will be bytecode compiled to a distinct .class file, so the JIT compiler (probably) won&#39;t compile them all at the same time."},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1642209943,"post_id":70712882,"comment_id":125018237,"body_markdown":"The various tweaks that make the &quot;effect&quot; go away will all affect the JIT compiler in one way or another.  But the bottom line is that you shouldn&#39;t see this thing in *typical* (i.e. long running) Java applications because it would get all of the JIT compilation done early.  (And if not, use a JVM that supports AOT compilation ...)","body":"The various tweaks that make the &quot;effect&quot; go away will all affect the JIT compiler in one way or another.  But the bottom line is that you shouldn&#39;t see this thing in <i>typical</i> (i.e. long running) Java applications because it would get all of the JIT compilation done early.  (And if not, use a JVM that supports AOT compilation ...)"},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1642210228,"post_id":70712882,"comment_id":125018269,"body_markdown":"If you really want to see what is happening, turn on JIT compiler logging.  And if necessary, examine the native code it emits.  But I suspect the &quot;when&quot; the JIT compiler runs will reveal the clues you need to understand.","body":"If you really want to see what is happening, turn on JIT compiler logging.  And if necessary, examine the native code it emits.  But I suspect the &quot;when&quot; the JIT compiler runs will reveal the clues you need to understand."},{"owner":{"account_id":19878841,"reputation":71,"user_id":14563274,"display_name":"Jakes"},"score":0,"creation_date":1642289142,"post_id":70712882,"comment_id":125032402,"body_markdown":"@PetrJaneček well this is a bit odd and a strange way to approach my initial question, I believe. My questions was abstract to lambdas or any form of expression and was regarding the multiple execution of the same line of code. But if this is the normal way to go, than so be it","body":"@PetrJaneček well this is a bit odd and a strange way to approach my initial question, I believe. My questions was abstract to lambdas or any form of expression and was regarding the multiple execution of the same line of code. But if this is the normal way to go, than so be it"}],"answers":[{"tags":[],"owner":{"account_id":2690669,"reputation":18637,"user_id":2613885,"display_name":"Aleksey Shipilev"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1642233277,"creation_date":1642232896,"answer_id":70719700,"question_id":70712882,"body_markdown":"You can actually replicate this with JMH SingleShot mode:\r\n\r\n```\r\n@BenchmarkMode(Mode.SingleShotTime)\r\n@Warmup(iterations = 0)\r\n@Measurement(iterations = 1)\r\n@Fork(1)\r\npublic class Lambdas {\r\n\r\n    @Benchmark\r\n    public static void doOne() {\r\n        execute(() -&gt; {});\r\n    }\r\n\r\n    @Benchmark\r\n    public static void doFour() {\r\n        execute(() -&gt; {});\r\n        execute(() -&gt; {});\r\n        execute(() -&gt; {});\r\n        execute(() -&gt; {});\r\n    }\r\n\r\n    public static void execute(Runnable task) {\r\n        for (int i = 0; i &lt; 100_000_000; i++) {\r\n            task.run();\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n```\r\nBenchmark            Mode  Cnt  Score   Error  Units\r\nLambdas.doFour         ss       0.446           s/op\r\nLambdas.doOne          ss       0.006           s/op\r\n```\r\n\r\nIf you look at `-prof perfasm` profile for `doFour` test, you would get a fat clue:\r\n\r\n```\r\n....[Hottest Methods (after inlining)]..............................................................\r\n 32.19%         c2, level 4  org.openjdk.Lambdas$$Lambda$44.0x0000000800c258b8::run, version 664 \r\n 26.16%         c2, level 4  org.openjdk.Lambdas$$Lambda$43.0x0000000800c25698::run, version 658 \r\n```\r\n\r\nThere are at least two hot lambdas, and those are represented by different classes. So what you are seeing is likely monomorphic (one target), then bimorphic (two targets), then polymorphic virtual call at `task.run`.\r\n\r\nVirtual call has to choose which _class_ to call the implementation from. The more classes you have, the worse it gets for optimizer. JVM tries to adapt, but it gets worse and worse as the run progresses. Roughly like this:\r\n\r\n```\r\nexecute(() -&gt; {}); // compiles with single target, fast\r\nexecute(() -&gt; {}); // recompiles with two targets, a bit slower\r\nexecute(() -&gt; {}); // recompiles with three targets, slow\r\nexecute(() -&gt; {}); // continues to be slow\r\n```\r\n\r\nNow, the elimination of the loop requires seeing through the `task.run()`. In monomorphic and bimorphic cases it is easy: one or both targets are inlined, their empty body is discovered, done. In both cases, you would have to do typechecks, which means it is not completely free, with bimorphic costing a bit extra. When you experience a polymorphic call, there is no such luck at all: it is opaque call.\r\n\r\nYou can add two more benchmarks in the mix to see it:\r\n\r\n```\r\n    @Benchmark\r\n    public static void doFour_Same() {\r\n        Runnable l = () -&gt; {};\r\n        execute(l);\r\n        execute(l);\r\n        execute(l);\r\n        execute(l);\r\n    }\r\n\r\n    @Benchmark\r\n    public static void doFour_Pair() {\r\n        Runnable l1 = () -&gt; {};\r\n        Runnable l2 = () -&gt; {};\r\n        execute(l1);\r\n        execute(l1);\r\n        execute(l2);\r\n        execute(l2);\r\n    }\r\n```\r\n\r\nWhich would then yield:\r\n\r\n```\r\nBenchmark            Mode  Cnt  Score   Error  Units\r\nLambdas.doFour         ss       0.445           s/op ; polymorphic\r\nLambdas.doFour_Pair    ss       0.016           s/op ; bimorphic\r\nLambdas.doFour_Same    ss       0.008           s/op ; monomorphic\r\nLambdas.doOne          ss       0.006           s/op\r\n```\r\n\r\nThis also explains why your &quot;fixes&quot; help:\r\n\r\n\r\n&gt; using 1-2 nested classes instead of lambdas,\r\n\r\nBimorphic inlining.\r\n\r\n&gt;     using 1-2 lambda instances instead of 4 different ones,\r\n\r\nBimorphic inlining.\r\n\r\n&gt;     not calling task.run() lambdas inside the loop,\r\n\r\nAvoids polymorphic (opaque) call in the loop, allows loop elimination.\r\n\r\n&gt;     inlining the execute() method, still maintaining 4 different lambdas.\r\n\r\nAvoids a single call site that experiences multiple call targets. In other words, turns a single polymorphic call site into a series of monomorphic call sites each with its own target.\r\n","title":"Why does running multiple lambdas in loops suddenly slow down?","body":"<p>You can actually replicate this with JMH SingleShot mode:</p>\n<pre><code>@BenchmarkMode(Mode.SingleShotTime)\n@Warmup(iterations = 0)\n@Measurement(iterations = 1)\n@Fork(1)\npublic class Lambdas {\n\n    @Benchmark\n    public static void doOne() {\n        execute(() -&gt; {});\n    }\n\n    @Benchmark\n    public static void doFour() {\n        execute(() -&gt; {});\n        execute(() -&gt; {});\n        execute(() -&gt; {});\n        execute(() -&gt; {});\n    }\n\n    public static void execute(Runnable task) {\n        for (int i = 0; i &lt; 100_000_000; i++) {\n            task.run();\n        }\n    }\n}\n</code></pre>\n<pre><code>Benchmark            Mode  Cnt  Score   Error  Units\nLambdas.doFour         ss       0.446           s/op\nLambdas.doOne          ss       0.006           s/op\n</code></pre>\n<p>If you look at <code>-prof perfasm</code> profile for <code>doFour</code> test, you would get a fat clue:</p>\n<pre><code>....[Hottest Methods (after inlining)]..............................................................\n 32.19%         c2, level 4  org.openjdk.Lambdas$$Lambda$44.0x0000000800c258b8::run, version 664 \n 26.16%         c2, level 4  org.openjdk.Lambdas$$Lambda$43.0x0000000800c25698::run, version 658 \n</code></pre>\n<p>There are at least two hot lambdas, and those are represented by different classes. So what you are seeing is likely monomorphic (one target), then bimorphic (two targets), then polymorphic virtual call at <code>task.run</code>.</p>\n<p>Virtual call has to choose which <em>class</em> to call the implementation from. The more classes you have, the worse it gets for optimizer. JVM tries to adapt, but it gets worse and worse as the run progresses. Roughly like this:</p>\n<pre><code>execute(() -&gt; {}); // compiles with single target, fast\nexecute(() -&gt; {}); // recompiles with two targets, a bit slower\nexecute(() -&gt; {}); // recompiles with three targets, slow\nexecute(() -&gt; {}); // continues to be slow\n</code></pre>\n<p>Now, the elimination of the loop requires seeing through the <code>task.run()</code>. In monomorphic and bimorphic cases it is easy: one or both targets are inlined, their empty body is discovered, done. In both cases, you would have to do typechecks, which means it is not completely free, with bimorphic costing a bit extra. When you experience a polymorphic call, there is no such luck at all: it is opaque call.</p>\n<p>You can add two more benchmarks in the mix to see it:</p>\n<pre><code>    @Benchmark\n    public static void doFour_Same() {\n        Runnable l = () -&gt; {};\n        execute(l);\n        execute(l);\n        execute(l);\n        execute(l);\n    }\n\n    @Benchmark\n    public static void doFour_Pair() {\n        Runnable l1 = () -&gt; {};\n        Runnable l2 = () -&gt; {};\n        execute(l1);\n        execute(l1);\n        execute(l2);\n        execute(l2);\n    }\n</code></pre>\n<p>Which would then yield:</p>\n<pre><code>Benchmark            Mode  Cnt  Score   Error  Units\nLambdas.doFour         ss       0.445           s/op ; polymorphic\nLambdas.doFour_Pair    ss       0.016           s/op ; bimorphic\nLambdas.doFour_Same    ss       0.008           s/op ; monomorphic\nLambdas.doOne          ss       0.006           s/op\n</code></pre>\n<p>This also explains why your &quot;fixes&quot; help:</p>\n<blockquote>\n<p>using 1-2 nested classes instead of lambdas,</p>\n</blockquote>\n<p>Bimorphic inlining.</p>\n<blockquote>\n<pre><code>using 1-2 lambda instances instead of 4 different ones,\n</code></pre>\n</blockquote>\n<p>Bimorphic inlining.</p>\n<blockquote>\n<pre><code>not calling task.run() lambdas inside the loop,\n</code></pre>\n</blockquote>\n<p>Avoids polymorphic (opaque) call in the loop, allows loop elimination.</p>\n<blockquote>\n<pre><code>inlining the execute() method, still maintaining 4 different lambdas.\n</code></pre>\n</blockquote>\n<p>Avoids a single call site that experiences multiple call targets. In other words, turns a single polymorphic call site into a series of monomorphic call sites each with its own target.</p>\n"}],"owner":{"account_id":19878841,"reputation":71,"user_id":14563274,"display_name":"Jakes"},"comment_count":12,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":184,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":1,"score":4,"last_activity_date":1642233277,"creation_date":1642174001,"question_id":70712882,"body_markdown":"Consider the following code:\r\n\r\n```java\r\npublic class Playground {\r\n\r\n\tprivate static final int MAX = 100_000_000;\r\n\r\n\tpublic static void main(String... args) {\r\n\t\texecute(() -&gt; {});\r\n\t\texecute(() -&gt; {});\r\n\t\texecute(() -&gt; {});\r\n\t\texecute(() -&gt; {});\r\n\t}\r\n\r\n\tpublic static void execute(Runnable task) {\r\n\t\tStopwatch stopwatch = Stopwatch.createStarted();\r\n\t\tfor (int i = 0; i &lt; MAX; i++) {\r\n\t\t\ttask.run();\r\n\t\t}\r\n\t\tSystem.out.println(stopwatch);\r\n\t}\r\n\r\n}\r\n```\r\n\r\nThis currently prints the following on my Intel MBP on Temurin 17:\r\n\r\n```\r\n3.675 ms\r\n1.948 ms\r\n216.9 ms\r\n243.3 ms\r\n```\r\n\r\nNotice the 100* slowdown for the third (and any subsequent) execution. Now, obviously, this is [*NOT* how to write benchmarks in Java](https://stackoverflow.com/questions/504103/how-do-i-write-a-correct-micro-benchmark-in-java?noredirect=1&amp;lq=1). The loop code doesn&#39;t do anything, so I&#39;d expect it to be eliminated for all and any repetitions. Also I could not repeat this effect using JMH which tells me the reason is tricky and fragile.\r\n\r\nSo, why does this happen? Why would there suddenly be such a catastrophic slowdown, what&#39;s going on under the hood? An assumption is that C2 bails on us, but which limitation are we bumping into?\r\n\r\nThings that don&#39;t change the behavior:\r\n- using anonymous inner classes instead of lambdas,\r\n- using 3+ different nested classes instead of lambdas.\r\n\r\nThings that &quot;fix&quot; the behavior. Actually the third invocation and all subsequent appear to be much faster, hinting that compilation correctly eliminated the loops completely:\r\n- using 1-2 nested classes instead of lambdas,\r\n- using 1-2 lambda instances instead of 4 different ones,\r\n- not calling `task.run()` lambdas inside the loop,\r\n- inlining the `execute()` method, still maintaining 4 different lambdas.","title":"Why does running multiple lambdas in loops suddenly slow down?","body":"<p>Consider the following code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Playground {\n\n    private static final int MAX = 100_000_000;\n\n    public static void main(String... args) {\n        execute(() -&gt; {});\n        execute(() -&gt; {});\n        execute(() -&gt; {});\n        execute(() -&gt; {});\n    }\n\n    public static void execute(Runnable task) {\n        Stopwatch stopwatch = Stopwatch.createStarted();\n        for (int i = 0; i &lt; MAX; i++) {\n            task.run();\n        }\n        System.out.println(stopwatch);\n    }\n\n}\n</code></pre>\n<p>This currently prints the following on my Intel MBP on Temurin 17:</p>\n<pre><code>3.675 ms\n1.948 ms\n216.9 ms\n243.3 ms\n</code></pre>\n<p>Notice the 100* slowdown for the third (and any subsequent) execution. Now, obviously, this is <a href=\"https://stackoverflow.com/questions/504103/how-do-i-write-a-correct-micro-benchmark-in-java?noredirect=1&amp;lq=1\"><em>NOT</em> how to write benchmarks in Java</a>. The loop code doesn't do anything, so I'd expect it to be eliminated for all and any repetitions. Also I could not repeat this effect using JMH which tells me the reason is tricky and fragile.</p>\n<p>So, why does this happen? Why would there suddenly be such a catastrophic slowdown, what's going on under the hood? An assumption is that C2 bails on us, but which limitation are we bumping into?</p>\n<p>Things that don't change the behavior:</p>\n<ul>\n<li>using anonymous inner classes instead of lambdas,</li>\n<li>using 3+ different nested classes instead of lambdas.</li>\n</ul>\n<p>Things that &quot;fix&quot; the behavior. Actually the third invocation and all subsequent appear to be much faster, hinting that compilation correctly eliminated the loops completely:</p>\n<ul>\n<li>using 1-2 nested classes instead of lambdas,</li>\n<li>using 1-2 lambda instances instead of 4 different ones,</li>\n<li>not calling <code>task.run()</code> lambdas inside the loop,</li>\n<li>inlining the <code>execute()</code> method, still maintaining 4 different lambdas.</li>\n</ul>\n"},{"tags":["java","processing"],"comments":[{"owner":{"account_id":5964120,"reputation":4275,"user_id":4688321,"display_name":"kiner_shah"},"score":0,"creation_date":1642153427,"post_id":70708618,"comment_id":125000404,"body_markdown":"What is this code? Java?","body":"What is this code? Java?"},{"owner":{"account_id":5964120,"reputation":4275,"user_id":4688321,"display_name":"kiner_shah"},"score":0,"creation_date":1642153527,"post_id":70708618,"comment_id":125000431,"body_markdown":"Please add the relevant programming language tag and also please provide a [mre] with sufficient details.","body":"Please add the relevant programming language tag and also please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> with sufficient details."},{"owner":{"account_id":5130038,"reputation":900,"user_id":7042795,"accept_rate":40,"display_name":"Bastian"},"score":1,"creation_date":1642153546,"post_id":70708618,"comment_id":125000439,"body_markdown":"It&#39;s probably Processing https://processing.org/ ... based on java.","body":"It&#39;s probably Processing <a href=\"https://processing.org/\" rel=\"nofollow noreferrer\">processing.org</a> ... based on java."}],"answers":[{"tags":[],"owner":{"account_id":7322082,"reputation":205321,"user_id":5577765,"display_name":"Rabbid76"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1642232807,"creation_date":1642161484,"answer_id":70710225,"question_id":70708618,"body_markdown":"You need to draw all the circles in a loop with a different color in each frame:\r\n\r\n```java\r\nvoid draw() {\r\n    background(255);\r\n    fill(random(256), random(256), random(256));\r\n    for (int i = 0; i&lt; numPointsX; ++i) {\r\n        circle(xPos[i], yPos[i], DIAM);\r\n    }\r\n}\r\n```\r\n\r\n---\r\n\r\nComplete example:\r\n\r\n```java\r\nfloat colour = random(256);\r\nfinal int DIAM = 20;\r\nfinal int MAX_NUM = 1000;\r\nint numPointsX = 0;\r\nint numPointsY = 0;\r\nint [] xPos = new int[MAX_NUM];\r\nint [] yPos = new int [MAX_NUM];\r\nboolean start = false;\r\n\r\nvoid setup() {\r\n    size (500, 500);\r\n}\r\n\r\nvoid draw() {\r\n    background(255);\r\n    fill(random(256), random(256), random(256));\r\n    for (int i = 0; i&lt; numPointsX; ++i) {\r\n        circle(xPos[i], yPos[i], DIAM);\r\n    }\r\n}\r\n\r\nvoid mouseClicked() {\r\n    insertXandY();\r\n}\r\n\r\nvoid insertXandY() {\r\n    int x = mouseX;\r\n    int y = mouseY;\r\n    \r\n    xPos[numPointsX] = x;\r\n    yPos[numPointsY] = y;\r\n    \r\n    numPointsX += 1;\r\n    numPointsY += 1;\r\n    start = true;\r\n}\r\n```","title":"How do i make all circles flicker","body":"<p>You need to draw all the circles in a loop with a different color in each frame:</p>\n<pre class=\"lang-java prettyprint-override\"><code>void draw() {\n    background(255);\n    fill(random(256), random(256), random(256));\n    for (int i = 0; i&lt; numPointsX; ++i) {\n        circle(xPos[i], yPos[i], DIAM);\n    }\n}\n</code></pre>\n<hr />\n<p>Complete example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>float colour = random(256);\nfinal int DIAM = 20;\nfinal int MAX_NUM = 1000;\nint numPointsX = 0;\nint numPointsY = 0;\nint [] xPos = new int[MAX_NUM];\nint [] yPos = new int [MAX_NUM];\nboolean start = false;\n\nvoid setup() {\n    size (500, 500);\n}\n\nvoid draw() {\n    background(255);\n    fill(random(256), random(256), random(256));\n    for (int i = 0; i&lt; numPointsX; ++i) {\n        circle(xPos[i], yPos[i], DIAM);\n    }\n}\n\nvoid mouseClicked() {\n    insertXandY();\n}\n\nvoid insertXandY() {\n    int x = mouseX;\n    int y = mouseY;\n    \n    xPos[numPointsX] = x;\n    yPos[numPointsY] = y;\n    \n    numPointsX += 1;\n    numPointsY += 1;\n    start = true;\n}\n</code></pre>\n"}],"owner":{"account_id":23278641,"reputation":31,"user_id":17362382,"display_name":"processingboy1"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1642232807,"creation_date":1642153278,"question_id":70708618,"body_markdown":"i am trying to make all the circles i draw flicker in my code. i am currently able to make the latest circle that was drawn to flicker but the goal is to make all the circles on the canvas flicker.\r\nhere is my code;\r\n\r\n \r\n``` lang-processing\r\nfloat colour = random(256);\r\nfinal int DIAM = 20;\r\nfinal int MAX_NUM = 1000;\r\nint numPointsX = 0;\r\nint numPointsY = 0;\r\nint [] xPos = new int[MAX_NUM];\r\nint [] yPos = new int [MAX_NUM];\r\nboolean start = false;\r\n\r\nvoid setup() {\r\n    size (500, 500);\r\n}\r\n\r\nvoid draw() {\r\n    if (start) {\r\n        if (xPos[numPointsX-1] &gt; 0 || (yPos[numPointsY-1]&gt;0)) {\r\n            fill(random(256), random(256), random(256));\r\n            circle(xPos[numPointsX-1], yPos[numPointsY-1], DIAM);\r\n        }\r\n    }\r\n    \r\n    println(xPos[0]);\r\n}\r\n\r\nvoid mouseClicked() {\r\n    insertXandY();\r\n}\r\n\r\nvoid insertXandY() {\r\n    int x = mouseX;\r\n    int y = mouseY;\r\n    \r\n    xPos[numPointsX] = x;\r\n    yPos[numPointsY] = y;\r\n    \r\n    numPointsX += 1;\r\n    numPointsY += 1;\r\n    start = true;\r\n}\r\n```\r\n   ","title":"How do i make all circles flicker","body":"<p>i am trying to make all the circles i draw flicker in my code. i am currently able to make the latest circle that was drawn to flicker but the goal is to make all the circles on the canvas flicker.\nhere is my code;</p>\n<pre class=\"lang-processing prettyprint-override\"><code>float colour = random(256);\nfinal int DIAM = 20;\nfinal int MAX_NUM = 1000;\nint numPointsX = 0;\nint numPointsY = 0;\nint [] xPos = new int[MAX_NUM];\nint [] yPos = new int [MAX_NUM];\nboolean start = false;\n\nvoid setup() {\n    size (500, 500);\n}\n\nvoid draw() {\n    if (start) {\n        if (xPos[numPointsX-1] &gt; 0 || (yPos[numPointsY-1]&gt;0)) {\n            fill(random(256), random(256), random(256));\n            circle(xPos[numPointsX-1], yPos[numPointsY-1], DIAM);\n        }\n    }\n    \n    println(xPos[0]);\n}\n\nvoid mouseClicked() {\n    insertXandY();\n}\n\nvoid insertXandY() {\n    int x = mouseX;\n    int y = mouseY;\n    \n    xPos[numPointsX] = x;\n    yPos[numPointsY] = y;\n    \n    numPointsX += 1;\n    numPointsY += 1;\n    start = true;\n}\n</code></pre>\n"},{"tags":["java","swing","java-9","highdpi"],"answers":[{"tags":[],"owner":{"account_id":4281210,"reputation":1058,"user_id":3500521,"display_name":"Dreamspace President"},"down_vote_count":0,"up_vote_count":13,"is_accepted":true,"score":13,"last_activity_date":1642232407,"creation_date":1507462976,"answer_id":46630710,"question_id":43057457,"body_markdown":"(EDIT: Pasted new version from my library in the form that resulted after about 2 years of use. Comments may not be up to date, but is more production-code worthy now.)\r\n\r\nThe scaling in Java 9 seems to work like this: Your paint(Component)() methods receive a Graphics2D object **which is already scaled.** Additionally, the component sizes (e.g. myJFrame.setSize(), myJPanel.getWidth()) are scaled **invisibly to the program,** meaning that when you say setSize(800,600) on a 200% desktop, the component will be 1600x1200 but getWidth/getHeight will return 800/600.\r\n\r\n&gt; Can i disable the scaling for this one JPanel to handle drawing myself?\r\n\r\nTo &quot;reset&quot; your Graphics object to scaling 1, do this:\r\n\r\n    final Graphics2D g = (Graphics2D) graphics;\r\n    final AffineTransform t = g.getTransform();\r\n    final double scaling = t.getScaleX(); // Assuming square pixels :P\r\n    t.setToScale(1, 1);\r\n    g.setTransform(t);\r\n\r\nTo get the correct dimensions, e.g. for filling the whole background with blackness before drawing:\r\n\r\n    final int w = (int) Math.round(getWidth() * scaling);\r\n\r\nIf you do it like this, you should get the desired result on Java 9 **and** Java 8.\r\n\r\n----\r\n\r\nI just created a class for Java devs who strive for a more custom Component design and/or raw drawing, where the system&#39;s display scaling should be known and manual scaling is often necessary. It should solve all scaling problems on Java 8 and Java 9. Here it is:\r\n\r\n\timport javax.swing.*;\r\n\timport java.awt.*;\r\n\timport java.awt.geom.AffineTransform;\r\n\r\n\r\n\t// Please note: This class emerged over time. It gets the job done, but it&#39;s horrible. Even the commenting is horrible.\r\n\r\n\r\n\r\n\r\n\t/**\r\n\t * TL;DR:\r\n\t * &lt;p&gt;\r\n\t * Call GUIScaling.initialize() at application start on the Swing thread.\r\n\t * &lt;p&gt;\r\n\t * If you set your own Component font sizes or border sizes or window sizes, multiply them by GUIScaling.GUISCALINGFACTOR_COMPONENTSANDFONTS and/or use the\r\n\t * helper methods newDimension() and scaleForComponent(). Works on Java 8 and 9.\r\n\t * &lt;p&gt;\r\n\t * If you do your own custom graphics and want to have control down to the actual pixel, create an instance of GUIScalingCustomGraphics to obtain your\r\n\t * Graphics2D at scaling 1 and your component&#39;s true physical width and height (Which Java 9 reports differently!), and scale all your graphics using\r\n\t * GUIScaling.GUISCALINGFACTOR_CUSTOMGRAPHICS and/or use the helper method scaleForCustom(). The helper method scaleForRealComponentSize() can transform your\r\n\t * mouse coordinates to the real physical coordinate, which Java 9 reports differently!\r\n\t * &lt;p&gt;\r\n\t * &lt;p&gt;\r\n\t * &lt;p&gt;\r\n\t * &lt;p&gt;\r\n\t * &lt;p&gt;\r\n\t * &lt;p&gt;\r\n\t * &lt;p&gt;\r\n\t * &lt;p&gt;\r\n\t * &lt;p&gt;\r\n\t * &lt;p&gt;\r\n\t * GUIScaling class v[4, 2022-01-15 07!00 UTC] by dreamspace-president.com\r\n\t * &lt;p&gt;\r\n\t * This Swing class detects the system&#39;s display scaling setting, which is important to make your GUI and custom graphics scale properly like the user wants it.\r\n\t * On a 4K display, for example, you&#39;d probably set 200% in your system.\r\n\t * &lt;p&gt;\r\n\t * Not tested with Java less than 8!\r\n\t * &lt;p&gt;\r\n\t * On Java 8 (and with most but not all (e.g. no the default) LooksAndFeels), component sizes (e.g. JButton) and their font sizes will scale automatically, but\r\n\t * if you have a certain border width in mind, or decided for a certain min and default window size or a certain font size, you have to upscale those on a\r\n\t * non-100%-system. With this class, just multiply the values with GUISCALINGFACTOR_COMPONENTSANDFONTS. Done. newDimension() and scaleForComponent() help with\r\n\t * that.\r\n\t * &lt;p&gt;\r\n\t * On Java 9, component sizes and their font sizes DO NOT SCALE from the perspective of the application, but in reality they are scaled: A window set to 800x600\r\n\t * size will really be 1600x1200, but it will still report half this size when asked. A border of 50 pixels will really be 100 pixels. A Graphics2D object\r\n\t * (paint method etc.) will have a scaling of 2! (Not if you just create a BufferedImage object and do createGraphics(), the scale here will be 1.) So, you\r\n\t * don&#39;t have to bother with GUI scaling here at all. YOU CAN STILL USE GUISCALINGFACTOR_COMPONENTSANDFONTS, because this class will set it to 1 on Java 9. This\r\n\t * is detected by indeed checking the scaling of a Graphics2D object. So, your Java 8 and 9 component/font code will be exactly the same in regards to scaling.\r\n\t * &lt;p&gt;\r\n\t * CUSTOM GRAPHICS: If you do your own painting and want to insist on true physical pixels (in which case obviously you&#39;d have to scale your fonts with\r\n\t * GUISCALINGFACTOR_CUSTOMGRAPHICS instead of GUISCALINGFACTOR_COMPONENTSANDFONTS), on Java 9 you have to reset the scaling of the Graphics2D object the\r\n\t * paint(Component)() method gives you from 2 to 1, and (also Java 9) you have to adjust the width/height reported by your component. Both is done by making an\r\n\t * instance of GUIScalingCustomGraphics. You can do this blindly on Java 8 and 9, your code will stay the same. And then, apply this class&#39;\r\n\t * GUISCALINGFACTOR_CUSTOMGRAPHICS to scale everything according to system settings. Or, instead of insisting on true physical pixels, you could trust Java 9\r\n\t * and not mess with the initial scaling - but then you&#39;d have to distinguish whether you&#39;re dealing with Java 8 or 9, because on 8, you&#39;d still have to scale\r\n\t * your custom graphics. In case you decide for this, use GUISCALINGFACTOR_COMPONENTSANDFONTS for your custom graphics instead of\r\n\t * GUISCALINGFACTOR_CUSTOMGRAPHICS because the former will be ***1*** on Java 9 but will be proper (e.g. 2.0 for a 200% system) on Java 8.\r\n\t * &lt;p&gt;\r\n\t * A weird problem that comes with Java 9: If you use the mouse coordinates as reported by the system (instead of, say, quasi-fix the physical mouse pointer\r\n\t * invisibly at the screen center and make your own pointer based on coordinate differences), you will have HALF THE USUAL RESOLUTION. On Java 8, a 3840x2160\r\n\t * screen will give you according mouse coordinates, but on Java 9, you get half these coordinates (if the system is set to scaling 200%). While\r\n\t * scaleForRealComponentSize() helps correct this, a custom drawn mouse pointer will now step in 2 pixel distances, it can not reach every individual pixel any\r\n\t * longer. I wish they had updated the MouseEvent class accordingly with additional float methods.\r\n\t */\r\n\tfinal public class GUIScaling { // INITIAL TOUCHING of this class MUST be on Swing thread!\r\n\r\n\r\n\t\t/**\r\n\t\t * Call this at the start of your application ON THE SWING THREAD. This initializes the class and hence its values.\r\n\t\t */\r\n\t\tpublic static void initialize() {\r\n\r\n\t\t\tSystem.err.print(&quot;&quot;);\r\n\t\t}\r\n\r\n\r\n\t\tpublic static void setLookAndFeelDefault() {\r\n\t\t\t// The last three (Nimbus etc.) DO NOT automatically scale their font sizes with the system&#39;s GUI scaling,\r\n\t\t\t// so using the font size in those cases to derive the scaling WILL FAIL.\r\n\t\t\t// Btw., the JButton font size at 100% Windows 10 system scaling is 11.0 in all cases but the last three.\r\n\t\t\tGUIScaling.setLookAndFeel(&quot;Windows&quot;,\r\n\t\t\t\t\t\t\t\t\t  UIManager.getSystemLookAndFeelClassName(),\r\n\t\t\t\t\t\t\t\t\t  UIManager.getCrossPlatformLookAndFeelClassName(),\r\n\t\t\t\t\t\t\t\t\t  &quot;Windows Classic&quot;,\r\n\t\t\t\t\t\t\t\t\t  &quot;Nimbus&quot;,\r\n\t\t\t\t\t\t\t\t\t  &quot;Metal&quot;,\r\n\t\t\t\t\t\t\t\t\t  &quot;CDE/Motif&quot;);\r\n\t\t}\r\n\r\n\r\n\t\t/**\r\n\t\t * By calling this, you ALSO initialize the class, so you don&#39;t HAVE TO use initialize() in that case (but it really doesn&#39;t matter). And you can indeed set\r\n\t\t * a LookAndFeel of your choice, even though initialization of this class also sets AND TEMPORARILY USES a LookAndFeel.\r\n\t\t *\r\n\t\t * @param intendedLAFIs ANYTHING, but ideally a LookAndFeel name or several. The first value that equalsIgnoreCase an installed LookAndFeelInfo.getName()\r\n\t\t *                      will be used.\r\n\t\t */\r\n\t\tpublic static void setLookAndFeel(final String... intendedLAFIs) {\r\n\r\n\t\t\tif (intendedLAFIs != null &amp;&amp; intendedLAFIs.length &gt; 0) {\r\n\t\t\t\tfinal UIManager.LookAndFeelInfo[] installedLAFIs = UIManager.getInstalledLookAndFeels();\r\n\t\t\t\tLAFILOOP:\r\n\t\t\t\tfor (String intendedLAFI : intendedLAFIs) {\r\n\t\t\t\t\tfor (final UIManager.LookAndFeelInfo lafi : UIManager.getInstalledLookAndFeels()) {\r\n\t\t\t\t\t\tif (lafi.getName().equalsIgnoreCase(intendedLAFI)) {\r\n\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\tUIManager.setLookAndFeel(lafi.getClassName());\r\n\t\t\t\t\t\t\t\tbreak LAFILOOP;\r\n\t\t\t\t\t\t\t} catch (Exception e) {\r\n\t\t\t\t\t\t\t\tcontinue LAFILOOP;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tthrow new IllegalArgumentException(&quot;intendedLAFIs is null or empty.&quot;);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\t/**\r\n\t\t * Convenience method, compatible with Java 8 and 9.\r\n\t\t */\r\n\t\tpublic static Dimension newDimension(final int w,\r\n\t\t\t\t\t\t\t\t\t\t\t final int h) {\r\n\r\n\t\t\treturn new Dimension(scaleForComponent(w), scaleForComponent(h));\r\n\t\t}\r\n\r\n\r\n\t\t/**\r\n\t\t * @param v E.g. the width of a component, or the size of a border.\r\n\t\t * @return v scaled by the necessary display scaling factor for components and fonts, compatible with Java 8 and 9.\r\n\t\t */\r\n\t\tpublic static int scaleForComponent(final double v) {\r\n\r\n\t\t\treturn (int) Math.round(v * GUISCALINGFACTOR_COMPONENTSANDFONTS);\r\n\t\t}\r\n\r\n\r\n\t\t/**\r\n\t\t * @param v E.g. the width of a rectangle being drawn in a paint() or paintComponent() override.\r\n\t\t * @return v scaled by the necessary display scaling factor for custom graphics, compatible with Java 8 and 9.\r\n\t\t */\r\n\t\tpublic static int scaleForCustom(final double v) {\r\n\r\n\t\t\treturn (int) Math.round(v * GUISCALINGFACTOR_CUSTOMGRAPHICS);\r\n\t\t}\r\n\r\n\r\n\t\t/**\r\n\t\t * E.g. when the GraphicsContext tells you the screen bounds. Which in Java 8 on 2x 4K desktop will be the full 4K numbers. But, same conditions except Java\r\n\t\t * 9, will be half that. Even though you still need the full size.\r\n\t\t * &lt;p&gt;\r\n\t\t * But this is just an example case. The method was originally made for different cases.\r\n\t\t *\r\n\t\t * @param v E.g. the width as reported by a component. (Java 9 on 200% desktop reports e.g. 200, but the physical size is actually 400. This method returns\r\n\t\t *          400 then.)\r\n\t\t * @return v scaled so that it represents real physical pixels, compatible with Java 8 and 9.\r\n\t\t */\r\n\t\tpublic static int scaleForRealComponentSize(final double v) {\r\n\r\n\t\t\treturn (int) Math.round(v * GUISCALINGFACTOR_REALCOMPONENTSIZE);\r\n\t\t}\r\n\r\n\r\n\t\t/**\r\n\t\t * E.g. when you scaled the mouse location with the partner method, and now you want to use the mouse action result to scale/locate a window - then you need\r\n\t\t * to UNDO the damage.\r\n\t\t */\r\n\t\tpublic static int scaleForRealComponentSizeInverted(final double v) {\r\n\r\n\t\t\treturn (int) Math.round(v / GUISCALINGFACTOR_REALCOMPONENTSIZE);\r\n\t\t}\r\n\r\n\r\n\t\tpublic static Point scaleMouseEventCoordinatesForCustomGraphics(final Point mouseEventPoint) {\r\n\r\n\t\t\treturn new Point(scaleForRealComponentSize(mouseEventPoint.x),\r\n\t\t\t\t\t\t\t scaleForRealComponentSize(mouseEventPoint.y));\r\n\t\t}\r\n\r\n\r\n\t\t/**\r\n\t\t * @param font A font instance (Or null. Returns null.) whose size has been derived kinda like this: &quot;new JLabel().getFont().getSize()&quot; So it will look\r\n\t\t *             correct when used in components, no matter the current Java version. ......... WAIT WTF why does that look correct on Java 8\r\n\t\t *             ?!??!?!?!?!?!?!?! Anyway ... when you want to use THAT font in custom drawing, you&#39;ll have a bad time once you get on Java 9. Because\r\n\t\t *             components will have SMALLER font sizes than on Java 8 on a 200% desktop because their Graphics objects are scaled. But if you use custom\r\n\t\t *             drawing, you&#39;ll use the class GUIScalingCustomGraphics below, which reset the scaling to 1. But then the font is too small. THIS METHOD\r\n\t\t *             RETURNS THE SCALED FONT independent of the Java version.\r\n\t\t * @return\r\n\t\t */\r\n\t\tpublic static Font scaleFontForCustom(final Font font) {\r\n\r\n\t\t\tif (font != null) {\r\n\t\t\t\treturn font.deriveFont(font.getSize2D() * (float) GUISCALINGFACTOR_REALCOMPONENTSIZE);\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\r\n\t\t/**\r\n\t\t * @param font A font instance (Or null. Returns null.) whose size is just a constant number in your source code, and which you want to use in an already\r\n\t\t *             normalized custom graphics context (meaning you used GUIScaling.GUIScalingCustomGraphics on it.) This font has to be scaled simply by the\r\n\t\t *             derived System scaling factor to look correct. This method does that.\r\n\t\t * @return\r\n\t\t */\r\n\t\tpublic static Font scaleMagicConstantFontForCustom(final Font font) {\r\n\r\n\t\t\tif (font != null) {\r\n\t\t\t\treturn font.deriveFont(font.getSize2D() * (float) GUISCALINGFACTOR_SYSTEM);\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\r\n\t\t/**\r\n\t\t * For Java 9, but can blindly be used in Java 8, too. Ensures that the scaling of a paint(Component)()&#39;s Graphics2D object is 1. Conveniently does the\r\n\t\t * usual casting, too.\r\n\t\t * &lt;p&gt;\r\n\t\t * Also calculates the physical pixel width/height of the component, which is reported differently on Java 9 if the display scaling is not 100%.\r\n\t\t */\r\n\t\tfinal public static class GUIScalingCustomGraphics {\r\n\r\n\r\n\t\t\tfinal public double guiScalingFactor_manualDrawing = GUISCALINGFACTOR_CUSTOMGRAPHICS;\r\n\t\t\tfinal public double guiScalingFactor_fontsThatLookCorrectInComponents = GUISCALINGFACTOR_FONTINCUSTOMGRAPHICSCONTEXT;\r\n\r\n\t\t\tfinal public Component component; // Just for convenience. You can hand the whole instance down your paint call hierarchy.\r\n\t\t\tfinal public int w; // The physical pixel width of the component.\r\n\t\t\tfinal public int h; // dto. height\r\n\t\t\tfinal public Graphics2D g; // Scale will be 1, even on Java 9 with a non-100% display scaling.\r\n\r\n\r\n\t\t\t/**\r\n\t\t\t * @param component NOT NULL. The component (e.g. JPanel or JFrame) whose paint() method you&#39;re overriding.\r\n\t\t\t * @param graphics  NOT NULL. The Graphics argument given to your paint() method.\r\n\t\t\t */\r\n\t\t\tpublic GUIScalingCustomGraphics(final Component component,\r\n\t\t\t\t\t\t\t\t\t\t\tfinal Graphics graphics) {\r\n\r\n\t\t\t\tthis.component = component;\r\n\t\t\t\tw = scaleForRealComponentSize(component.getWidth());\r\n\t\t\t\th = scaleForRealComponentSize(component.getHeight());\r\n\r\n\t\t\t\tg = (Graphics2D) graphics;\r\n\t\t\t\tfinal AffineTransform t = g.getTransform();\r\n\t\t\t\tfinal double xTrans = t.getTranslateX();\r\n\t\t\t\tfinal double yTrans = t.getTranslateY();\r\n\t\t\t\tt.setToScale(1, 1);\r\n\t\t\t\tt.translate(xTrans, yTrans);\r\n\t\t\t\tg.setTransform(t);\r\n\t\t\t}\r\n\r\n\r\n\t\t\t/**\r\n\t\t\t * @param graphics NOT NULL. The Graphics argument given to your paint() method.\r\n\t\t\t */\r\n\t\t\tpublic GUIScalingCustomGraphics(final Graphics graphics) {\r\n\r\n\t\t\t\tcomponent = null;\r\n\t\t\t\tw = 0;\r\n\t\t\t\th = 0;\r\n\r\n\t\t\t\tg = (Graphics2D) graphics;\r\n\t\t\t\tfinal AffineTransform t = g.getTransform();\r\n\t\t\t\tt.setToScale(1, 1);\r\n\t\t\t\tg.setTransform(t);\r\n\t\t\t}\r\n\r\n\r\n\t\t\t/**\r\n\t\t\t * @param x E.g. the width of a rectangle to be drawn.\r\n\t\t\t * @return x scaled so that it represents real physical pixels, compatible with Java 8 and 9.\r\n\t\t\t */\r\n\t\t\tpublic int scale(final double x) {\r\n\r\n\t\t\t\treturn (int) Math.round(x * guiScalingFactor_manualDrawing);\r\n\t\t\t}\r\n\r\n\r\n\t\t\t/**\r\n\t\t\t * Scales the font and then sets it. Assumption: The given font looked correct in components. In Java 9, it would be TOO SMALL in custom graphics via\r\n\t\t\t * this class. This method fixes that.\r\n\t\t\t *\r\n\t\t\t * @param font NULL = null will be returned and G&#39;s font will not change.\r\n\t\t\t * @return returns the set font for convenience. NULL if your argument was null.\r\n\t\t\t */\r\n\t\t\tpublic Font setFont(final Font font) {\r\n\r\n\t\t\t\tfinal Font ret = font == null ? null : font.deriveFont(font.getSize2D() * (float) guiScalingFactor_fontsThatLookCorrectInComponents);\r\n\t\t\t\tg.setFont(ret);\r\n\t\t\t\treturn ret;\r\n\t\t\t}\r\n\r\n\r\n\t\t\t@Override\r\n\t\t\tpublic String toString() {\r\n\r\n\t\t\t\treturn &quot;[GUIScalingCustomGraphics&quot; +\r\n\t\t\t\t\t\t&quot; guiScalingFactor_manualDrawing=&quot; + guiScalingFactor_manualDrawing +\r\n\t\t\t\t\t\t&quot; w=&quot; + w +\r\n\t\t\t\t\t\t&quot; h=&quot; + h +\r\n\t\t\t\t\t\t&quot; component=&quot; + component +\r\n\t\t\t\t\t\t&quot; g=&quot; + g +\r\n\t\t\t\t\t\t&#39;]&#39;;\r\n\t\t\t}\r\n\r\n\r\n\t\t\t/**\r\n\t\t\t * Convenience method that saves you unnecessary calls and code clutter. In your live painting method, you&#39;ll probably check first if your component has\r\n\t\t\t * any pixels, aka if with AND height are at least 1. If they&#39;re not, you return before doing anything.\r\n\t\t\t * &lt;p&gt;\r\n\t\t\t * This method is a shortcut. Call this right at the beginning. If it returns true, you abort.\r\n\t\t\t */\r\n\t\t\tpublic boolean isSizeZero() {\r\n\r\n\t\t\t\treturn w &lt; 1 || h &lt; 1;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\r\n\t\t/**\r\n\t\t * A tiny rectangle will be filled with the current color and width/height of HAIRLINETHICKNESS.\r\n\t\t */\r\n\t\tpublic static void drawPixel(final Graphics2D g,\r\n\t\t\t\t\t\t\t\t\t final int x,\r\n\t\t\t\t\t\t\t\t\t final int y) {\r\n\r\n\t\t\tg.fillRect(x - GUIScaling.HAIRLINETHICKNESS_HALF,\r\n\t\t\t\t\t   y - GUIScaling.HAIRLINETHICKNESS_HALF,\r\n\t\t\t\t\t   GUIScaling.HAIRLINETHICKNESS,\r\n\t\t\t\t\t   GUIScaling.HAIRLINETHICKNESS);\r\n\t\t}\r\n\r\n\r\n\t\tfinal public static double JBUTTONFONTSIZE_ON_100PERCENTSCALE_JAVA8_W10_WITH_LOOKANDFEEL_WINDOWSORSYSTEMORXPLATFORMORWINCLASSIC = 11.0;\r\n\t\tfinal public static float JBUTTONFONTSIZE_ON_UNKNOWNSCALE_UNKNOWNJAVA_UNKNOWNOS_WITH_LOOKANDFEEL_WINDOWSORSYSTEMORXPLATFORMORWINCLASSIC;\r\n\r\n\t\tfinal public static double GUISCALINGFACTOR_SYSTEM; // The scaling set in the system.\r\n\t\tfinal public static double GUISCALINGFACTOR_COMPONENTSANDFONTS; // The scaling necessary if you set component/font sizes yourself.\r\n\t\tfinal public static double GUISCALINGFACTOR_CUSTOMGRAPHICS; // The scaling necessary if you want your custom graphics, too, to be scaled according to System settings.\r\n\t\tfinal public static double GUISCALINGFACTOR_REALCOMPONENTSIZE; // The factor by which getWidth() and such return values have to be multiplied, because Java 9 reports them differently.\r\n\t\tfinal public static double GUISCALINGFACTOR_FONTINCUSTOMGRAPHICSCONTEXT; // (This is exactly the custom graphics scaling probed by this class.) The factor by which a proper looking font would have to be scaled when used in custom graphics whose scale is 1. (Java 9 pre-scales it to e.g. 2 if Desktop is at 200%, then you reset that with the class above. Then the fonts that look right in the components will be TOO SMALL in the custom graphics. Use this factor / the method above to fix that.)\r\n\r\n\r\n\t\tfinal public static int HAIRLINETHICKNESS; // A &quot;hairline&quot; would be a line with pixel thickness 1. However, if the GUI is scaled up, that should be a little thicker. This value will have a value of AT LEAST 1. If the GUI scaling of the system is 200%, the value will be 2. If it&#39;s 175%, the value will ALSO be 2 due to rounding.\r\n\r\n\t\tfinal public static int HAIRLINETHICKNESS_HALF;\r\n\t\tfinal public static double HAIRLINETHICKNESS_HALF_DOUBLE;\r\n\r\n\r\n\t\tstatic {\r\n\r\n\t\t\tif (!SwingUtilities.isEventDispatchThread()) { // This also makes sure an obfuscator doesn&#39;t remove this method and its calls.\r\n\t\t\t\tthrow new IllegalStateException(&quot;Must be initialized on Swing thread!&quot;);\r\n\t\t\t}\r\n\r\n\t\t\tSystem.err.println(&quot;Initializing GUI scaling ...&quot;);\r\n\r\n\t\t\tGUIScaling.setLookAndFeelDefault();\r\n\r\n\t\t\tJBUTTONFONTSIZE_ON_UNKNOWNSCALE_UNKNOWNJAVA_UNKNOWNOS_WITH_LOOKANDFEEL_WINDOWSORSYSTEMORXPLATFORMORWINCLASSIC =\r\n\t\t\t\t\tnew JButton().getFont().getSize2D();  // 21.0 on 200% desktop on Java 8 // 11.0 on 100% desktop on Java 8\r\n\r\n\t\t\tfinal Integer[] paintScalingInPercent = new Integer[1];\r\n\r\n\t\t\tfinal JDialog bruteForceJava9ScalingCheck = new JDialog((Frame) null, &quot;&quot;, true) {\r\n\r\n\t\t\t\t{\r\n\t\t\t\t\t//                setLocation(-1000, -1000); // Outamysight!\r\n\t\t\t\t\tsetLocation(100,\r\n\t\t\t\t\t\t\t\t100); // else you might have compatibility problems (see stackoverflow where I posted this class)\r\n\r\n\t\t\t\t\tfinal Runnable fallbackInCaseOlderJavaVersionDoesNotEndUpClosingThisWindow = () -&gt; {\r\n\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\tThread.sleep(500);\r\n\t\t\t\t\t\t} catch (InterruptedException e) {\r\n\t\t\t\t\t\t\te.printStackTrace();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tSwingUtilities.invokeLater(() -&gt; {\r\n\t\t\t\t\t\t\tpaintScalingInPercent[0] = 100;\r\n\t\t\t\t\t\t\tdispose();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t};\r\n\t\t\t\t\tfinal Thread t = new Thread(fallbackInCaseOlderJavaVersionDoesNotEndUpClosingThisWindow);\r\n\t\t\t\t\tt.setDaemon(true);\r\n\t\t\t\t\tt.setName(&quot;GUI scaling detector fallback thread&quot;);\r\n\t\t\t\t\tt.start();\r\n\t\t\t\t}\r\n\r\n\t\t\t\t@Override\r\n\t\t\t\tpublic void paint(final Graphics graphics) {\r\n\r\n\t\t\t\t\tfinal Graphics2D g = (Graphics2D) graphics;\r\n\t\t\t\t\tfinal AffineTransform originalTransform = g.getTransform();\r\n\t\t\t\t\tpaintScalingInPercent[0] = (int) Math.round(originalTransform.getScaleX() * 100);\r\n\t\t\t\t\tdispose();\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tbruteForceJava9ScalingCheck.setVisible(true); // This call blocks until dispose() is reached.\r\n\r\n\t\t\tif (paintScalingInPercent[0] == null) {\r\n\r\n\t\t\t\tthrow new Error(&quot;Unexpected behavior: Modal dialog did not block!&quot;);\r\n\r\n\t\t\t} else if (paintScalingInPercent[0] != 100) {\r\n\r\n\t\t\t\t// Must be Java 9 (or newer?).\r\n\r\n\t\t\t\tGUISCALINGFACTOR_SYSTEM = paintScalingInPercent[0] * 0.01;\r\n\t\t\t\tGUISCALINGFACTOR_COMPONENTSANDFONTS = 1; // Java 9 does everything. The developer&#39;s considerations are made unnecessary/harmless by this &quot;1&quot;.\r\n\t\t\t\tGUISCALINGFACTOR_CUSTOMGRAPHICS = GUISCALINGFACTOR_SYSTEM;\r\n\t\t\t\tGUISCALINGFACTOR_FONTINCUSTOMGRAPHICSCONTEXT = GUISCALINGFACTOR_SYSTEM;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// Either Java 8 (or older?) or scaling IS just at the normal 1 (100).\r\n\r\n\t\t\t\tfinal double factorPreliminary = JBUTTONFONTSIZE_ON_UNKNOWNSCALE_UNKNOWNJAVA_UNKNOWNOS_WITH_LOOKANDFEEL_WINDOWSORSYSTEMORXPLATFORMORWINCLASSIC / JBUTTONFONTSIZE_ON_100PERCENTSCALE_JAVA8_W10_WITH_LOOKANDFEEL_WINDOWSORSYSTEMORXPLATFORMORWINCLASSIC;\r\n\t\t\t\t//            System.err.println(&quot;FIX MEEEEEEEEEEEEEEEEEEEEEEEEEEEEE!&quot;);\r\n\t\t\t\t//            final double factorPreliminary = 1;\r\n\r\n\t\t\t\t// If we just divide the two, we get 1.454545... on a 150% desktop, because the font sizes\r\n\t\t\t\t// chosen by Java are integer values, so we experience a rounding error.\r\n\t\t\t\t// The crappy but probably in most cases nicely working solution is: We round the result to .25 steps!\r\n\r\n\t\t\t\tGUISCALINGFACTOR_SYSTEM = Math.round(factorPreliminary * 4) / 4d;\r\n\t\t\t\tGUISCALINGFACTOR_COMPONENTSANDFONTS = GUISCALINGFACTOR_SYSTEM;\r\n\t\t\t\tGUISCALINGFACTOR_CUSTOMGRAPHICS = GUISCALINGFACTOR_SYSTEM;\r\n\t\t\t\tGUISCALINGFACTOR_FONTINCUSTOMGRAPHICSCONTEXT = 1; // No font scaling, the fonts used will look correct in custom scaling without extra treatment.\r\n\t\t\t}\r\n\r\n\t\t\tGUISCALINGFACTOR_REALCOMPONENTSIZE = GUISCALINGFACTOR_CUSTOMGRAPHICS / GUISCALINGFACTOR_COMPONENTSANDFONTS;\r\n\r\n\r\n\t\t\tHAIRLINETHICKNESS = (int) Math.max(1, Math.round(GUISCALINGFACTOR_CUSTOMGRAPHICS));\r\n\t\t\tHAIRLINETHICKNESS_HALF_DOUBLE = HAIRLINETHICKNESS * 0.5;\r\n\t\t\tHAIRLINETHICKNESS_HALF = (int) Math.round(HAIRLINETHICKNESS_HALF_DOUBLE);\r\n\r\n\t\t\t//        System.err.println(&quot;GUISCALINGFACTOR_SYSTEM             = &quot; + GUISCALINGFACTOR_SYSTEM);\r\n\t\t\t//        System.err.println(&quot;GUISCALINGFACTOR_COMPONENTSANDFONTS = &quot; + GUISCALINGFACTOR_COMPONENTSANDFONTS);\r\n\t\t\t//        System.err.println(&quot;GUISCALINGFACTOR_CUSTOMGRAPHICS     = &quot; + GUISCALINGFACTOR_CUSTOMGRAPHICS);\r\n\t\t\t//        System.err.println(&quot;GUISCALINGFACTOR_REALCOMPONENTSIZE  = &quot; + GUISCALINGFACTOR_REALCOMPONENTSIZE);\r\n\r\n\t\t\tSystem.err.println(&quot;... done.&quot;);\r\n\r\n\t\t}\r\n\r\n\t}\r\n","title":"jdk 9 high dpi disable for specific panel","body":"<p>(EDIT: Pasted new version from my library in the form that resulted after about 2 years of use. Comments may not be up to date, but is more production-code worthy now.)</p>\n<p>The scaling in Java 9 seems to work like this: Your paint(Component)() methods receive a Graphics2D object <strong>which is already scaled.</strong> Additionally, the component sizes (e.g. myJFrame.setSize(), myJPanel.getWidth()) are scaled <strong>invisibly to the program,</strong> meaning that when you say setSize(800,600) on a 200% desktop, the component will be 1600x1200 but getWidth/getHeight will return 800/600.</p>\n<blockquote>\n<p>Can i disable the scaling for this one JPanel to handle drawing myself?</p>\n</blockquote>\n<p>To &quot;reset&quot; your Graphics object to scaling 1, do this:</p>\n<pre><code>final Graphics2D g = (Graphics2D) graphics;\nfinal AffineTransform t = g.getTransform();\nfinal double scaling = t.getScaleX(); // Assuming square pixels :P\nt.setToScale(1, 1);\ng.setTransform(t);\n</code></pre>\n<p>To get the correct dimensions, e.g. for filling the whole background with blackness before drawing:</p>\n<pre><code>final int w = (int) Math.round(getWidth() * scaling);\n</code></pre>\n<p>If you do it like this, you should get the desired result on Java 9 <strong>and</strong> Java 8.</p>\n<hr />\n<p>I just created a class for Java devs who strive for a more custom Component design and/or raw drawing, where the system's display scaling should be known and manual scaling is often necessary. It should solve all scaling problems on Java 8 and Java 9. Here it is:</p>\n<pre><code>import javax.swing.*;\nimport java.awt.*;\nimport java.awt.geom.AffineTransform;\n\n\n// Please note: This class emerged over time. It gets the job done, but it's horrible. Even the commenting is horrible.\n\n\n\n\n/**\n * TL;DR:\n * &lt;p&gt;\n * Call GUIScaling.initialize() at application start on the Swing thread.\n * &lt;p&gt;\n * If you set your own Component font sizes or border sizes or window sizes, multiply them by GUIScaling.GUISCALINGFACTOR_COMPONENTSANDFONTS and/or use the\n * helper methods newDimension() and scaleForComponent(). Works on Java 8 and 9.\n * &lt;p&gt;\n * If you do your own custom graphics and want to have control down to the actual pixel, create an instance of GUIScalingCustomGraphics to obtain your\n * Graphics2D at scaling 1 and your component's true physical width and height (Which Java 9 reports differently!), and scale all your graphics using\n * GUIScaling.GUISCALINGFACTOR_CUSTOMGRAPHICS and/or use the helper method scaleForCustom(). The helper method scaleForRealComponentSize() can transform your\n * mouse coordinates to the real physical coordinate, which Java 9 reports differently!\n * &lt;p&gt;\n * &lt;p&gt;\n * &lt;p&gt;\n * &lt;p&gt;\n * &lt;p&gt;\n * &lt;p&gt;\n * &lt;p&gt;\n * &lt;p&gt;\n * &lt;p&gt;\n * &lt;p&gt;\n * GUIScaling class v[4, 2022-01-15 07!00 UTC] by dreamspace-president.com\n * &lt;p&gt;\n * This Swing class detects the system's display scaling setting, which is important to make your GUI and custom graphics scale properly like the user wants it.\n * On a 4K display, for example, you'd probably set 200% in your system.\n * &lt;p&gt;\n * Not tested with Java less than 8!\n * &lt;p&gt;\n * On Java 8 (and with most but not all (e.g. no the default) LooksAndFeels), component sizes (e.g. JButton) and their font sizes will scale automatically, but\n * if you have a certain border width in mind, or decided for a certain min and default window size or a certain font size, you have to upscale those on a\n * non-100%-system. With this class, just multiply the values with GUISCALINGFACTOR_COMPONENTSANDFONTS. Done. newDimension() and scaleForComponent() help with\n * that.\n * &lt;p&gt;\n * On Java 9, component sizes and their font sizes DO NOT SCALE from the perspective of the application, but in reality they are scaled: A window set to 800x600\n * size will really be 1600x1200, but it will still report half this size when asked. A border of 50 pixels will really be 100 pixels. A Graphics2D object\n * (paint method etc.) will have a scaling of 2! (Not if you just create a BufferedImage object and do createGraphics(), the scale here will be 1.) So, you\n * don't have to bother with GUI scaling here at all. YOU CAN STILL USE GUISCALINGFACTOR_COMPONENTSANDFONTS, because this class will set it to 1 on Java 9. This\n * is detected by indeed checking the scaling of a Graphics2D object. So, your Java 8 and 9 component/font code will be exactly the same in regards to scaling.\n * &lt;p&gt;\n * CUSTOM GRAPHICS: If you do your own painting and want to insist on true physical pixels (in which case obviously you'd have to scale your fonts with\n * GUISCALINGFACTOR_CUSTOMGRAPHICS instead of GUISCALINGFACTOR_COMPONENTSANDFONTS), on Java 9 you have to reset the scaling of the Graphics2D object the\n * paint(Component)() method gives you from 2 to 1, and (also Java 9) you have to adjust the width/height reported by your component. Both is done by making an\n * instance of GUIScalingCustomGraphics. You can do this blindly on Java 8 and 9, your code will stay the same. And then, apply this class'\n * GUISCALINGFACTOR_CUSTOMGRAPHICS to scale everything according to system settings. Or, instead of insisting on true physical pixels, you could trust Java 9\n * and not mess with the initial scaling - but then you'd have to distinguish whether you're dealing with Java 8 or 9, because on 8, you'd still have to scale\n * your custom graphics. In case you decide for this, use GUISCALINGFACTOR_COMPONENTSANDFONTS for your custom graphics instead of\n * GUISCALINGFACTOR_CUSTOMGRAPHICS because the former will be ***1*** on Java 9 but will be proper (e.g. 2.0 for a 200% system) on Java 8.\n * &lt;p&gt;\n * A weird problem that comes with Java 9: If you use the mouse coordinates as reported by the system (instead of, say, quasi-fix the physical mouse pointer\n * invisibly at the screen center and make your own pointer based on coordinate differences), you will have HALF THE USUAL RESOLUTION. On Java 8, a 3840x2160\n * screen will give you according mouse coordinates, but on Java 9, you get half these coordinates (if the system is set to scaling 200%). While\n * scaleForRealComponentSize() helps correct this, a custom drawn mouse pointer will now step in 2 pixel distances, it can not reach every individual pixel any\n * longer. I wish they had updated the MouseEvent class accordingly with additional float methods.\n */\nfinal public class GUIScaling { // INITIAL TOUCHING of this class MUST be on Swing thread!\n\n\n    /**\n     * Call this at the start of your application ON THE SWING THREAD. This initializes the class and hence its values.\n     */\n    public static void initialize() {\n\n        System.err.print(&quot;&quot;);\n    }\n\n\n    public static void setLookAndFeelDefault() {\n        // The last three (Nimbus etc.) DO NOT automatically scale their font sizes with the system's GUI scaling,\n        // so using the font size in those cases to derive the scaling WILL FAIL.\n        // Btw., the JButton font size at 100% Windows 10 system scaling is 11.0 in all cases but the last three.\n        GUIScaling.setLookAndFeel(&quot;Windows&quot;,\n                                  UIManager.getSystemLookAndFeelClassName(),\n                                  UIManager.getCrossPlatformLookAndFeelClassName(),\n                                  &quot;Windows Classic&quot;,\n                                  &quot;Nimbus&quot;,\n                                  &quot;Metal&quot;,\n                                  &quot;CDE/Motif&quot;);\n    }\n\n\n    /**\n     * By calling this, you ALSO initialize the class, so you don't HAVE TO use initialize() in that case (but it really doesn't matter). And you can indeed set\n     * a LookAndFeel of your choice, even though initialization of this class also sets AND TEMPORARILY USES a LookAndFeel.\n     *\n     * @param intendedLAFIs ANYTHING, but ideally a LookAndFeel name or several. The first value that equalsIgnoreCase an installed LookAndFeelInfo.getName()\n     *                      will be used.\n     */\n    public static void setLookAndFeel(final String... intendedLAFIs) {\n\n        if (intendedLAFIs != null &amp;&amp; intendedLAFIs.length &gt; 0) {\n            final UIManager.LookAndFeelInfo[] installedLAFIs = UIManager.getInstalledLookAndFeels();\n            LAFILOOP:\n            for (String intendedLAFI : intendedLAFIs) {\n                for (final UIManager.LookAndFeelInfo lafi : UIManager.getInstalledLookAndFeels()) {\n                    if (lafi.getName().equalsIgnoreCase(intendedLAFI)) {\n                        try {\n                            UIManager.setLookAndFeel(lafi.getClassName());\n                            break LAFILOOP;\n                        } catch (Exception e) {\n                            continue LAFILOOP;\n                        }\n                    }\n                }\n            }\n        } else {\n            throw new IllegalArgumentException(&quot;intendedLAFIs is null or empty.&quot;);\n        }\n    }\n\n\n    /**\n     * Convenience method, compatible with Java 8 and 9.\n     */\n    public static Dimension newDimension(final int w,\n                                         final int h) {\n\n        return new Dimension(scaleForComponent(w), scaleForComponent(h));\n    }\n\n\n    /**\n     * @param v E.g. the width of a component, or the size of a border.\n     * @return v scaled by the necessary display scaling factor for components and fonts, compatible with Java 8 and 9.\n     */\n    public static int scaleForComponent(final double v) {\n\n        return (int) Math.round(v * GUISCALINGFACTOR_COMPONENTSANDFONTS);\n    }\n\n\n    /**\n     * @param v E.g. the width of a rectangle being drawn in a paint() or paintComponent() override.\n     * @return v scaled by the necessary display scaling factor for custom graphics, compatible with Java 8 and 9.\n     */\n    public static int scaleForCustom(final double v) {\n\n        return (int) Math.round(v * GUISCALINGFACTOR_CUSTOMGRAPHICS);\n    }\n\n\n    /**\n     * E.g. when the GraphicsContext tells you the screen bounds. Which in Java 8 on 2x 4K desktop will be the full 4K numbers. But, same conditions except Java\n     * 9, will be half that. Even though you still need the full size.\n     * &lt;p&gt;\n     * But this is just an example case. The method was originally made for different cases.\n     *\n     * @param v E.g. the width as reported by a component. (Java 9 on 200% desktop reports e.g. 200, but the physical size is actually 400. This method returns\n     *          400 then.)\n     * @return v scaled so that it represents real physical pixels, compatible with Java 8 and 9.\n     */\n    public static int scaleForRealComponentSize(final double v) {\n\n        return (int) Math.round(v * GUISCALINGFACTOR_REALCOMPONENTSIZE);\n    }\n\n\n    /**\n     * E.g. when you scaled the mouse location with the partner method, and now you want to use the mouse action result to scale/locate a window - then you need\n     * to UNDO the damage.\n     */\n    public static int scaleForRealComponentSizeInverted(final double v) {\n\n        return (int) Math.round(v / GUISCALINGFACTOR_REALCOMPONENTSIZE);\n    }\n\n\n    public static Point scaleMouseEventCoordinatesForCustomGraphics(final Point mouseEventPoint) {\n\n        return new Point(scaleForRealComponentSize(mouseEventPoint.x),\n                         scaleForRealComponentSize(mouseEventPoint.y));\n    }\n\n\n    /**\n     * @param font A font instance (Or null. Returns null.) whose size has been derived kinda like this: &quot;new JLabel().getFont().getSize()&quot; So it will look\n     *             correct when used in components, no matter the current Java version. ......... WAIT WTF why does that look correct on Java 8\n     *             ?!??!?!?!?!?!?!?! Anyway ... when you want to use THAT font in custom drawing, you'll have a bad time once you get on Java 9. Because\n     *             components will have SMALLER font sizes than on Java 8 on a 200% desktop because their Graphics objects are scaled. But if you use custom\n     *             drawing, you'll use the class GUIScalingCustomGraphics below, which reset the scaling to 1. But then the font is too small. THIS METHOD\n     *             RETURNS THE SCALED FONT independent of the Java version.\n     * @return\n     */\n    public static Font scaleFontForCustom(final Font font) {\n\n        if (font != null) {\n            return font.deriveFont(font.getSize2D() * (float) GUISCALINGFACTOR_REALCOMPONENTSIZE);\n        }\n        return null;\n    }\n\n\n    /**\n     * @param font A font instance (Or null. Returns null.) whose size is just a constant number in your source code, and which you want to use in an already\n     *             normalized custom graphics context (meaning you used GUIScaling.GUIScalingCustomGraphics on it.) This font has to be scaled simply by the\n     *             derived System scaling factor to look correct. This method does that.\n     * @return\n     */\n    public static Font scaleMagicConstantFontForCustom(final Font font) {\n\n        if (font != null) {\n            return font.deriveFont(font.getSize2D() * (float) GUISCALINGFACTOR_SYSTEM);\n        }\n        return null;\n    }\n\n\n    /**\n     * For Java 9, but can blindly be used in Java 8, too. Ensures that the scaling of a paint(Component)()'s Graphics2D object is 1. Conveniently does the\n     * usual casting, too.\n     * &lt;p&gt;\n     * Also calculates the physical pixel width/height of the component, which is reported differently on Java 9 if the display scaling is not 100%.\n     */\n    final public static class GUIScalingCustomGraphics {\n\n\n        final public double guiScalingFactor_manualDrawing = GUISCALINGFACTOR_CUSTOMGRAPHICS;\n        final public double guiScalingFactor_fontsThatLookCorrectInComponents = GUISCALINGFACTOR_FONTINCUSTOMGRAPHICSCONTEXT;\n\n        final public Component component; // Just for convenience. You can hand the whole instance down your paint call hierarchy.\n        final public int w; // The physical pixel width of the component.\n        final public int h; // dto. height\n        final public Graphics2D g; // Scale will be 1, even on Java 9 with a non-100% display scaling.\n\n\n        /**\n         * @param component NOT NULL. The component (e.g. JPanel or JFrame) whose paint() method you're overriding.\n         * @param graphics  NOT NULL. The Graphics argument given to your paint() method.\n         */\n        public GUIScalingCustomGraphics(final Component component,\n                                        final Graphics graphics) {\n\n            this.component = component;\n            w = scaleForRealComponentSize(component.getWidth());\n            h = scaleForRealComponentSize(component.getHeight());\n\n            g = (Graphics2D) graphics;\n            final AffineTransform t = g.getTransform();\n            final double xTrans = t.getTranslateX();\n            final double yTrans = t.getTranslateY();\n            t.setToScale(1, 1);\n            t.translate(xTrans, yTrans);\n            g.setTransform(t);\n        }\n\n\n        /**\n         * @param graphics NOT NULL. The Graphics argument given to your paint() method.\n         */\n        public GUIScalingCustomGraphics(final Graphics graphics) {\n\n            component = null;\n            w = 0;\n            h = 0;\n\n            g = (Graphics2D) graphics;\n            final AffineTransform t = g.getTransform();\n            t.setToScale(1, 1);\n            g.setTransform(t);\n        }\n\n\n        /**\n         * @param x E.g. the width of a rectangle to be drawn.\n         * @return x scaled so that it represents real physical pixels, compatible with Java 8 and 9.\n         */\n        public int scale(final double x) {\n\n            return (int) Math.round(x * guiScalingFactor_manualDrawing);\n        }\n\n\n        /**\n         * Scales the font and then sets it. Assumption: The given font looked correct in components. In Java 9, it would be TOO SMALL in custom graphics via\n         * this class. This method fixes that.\n         *\n         * @param font NULL = null will be returned and G's font will not change.\n         * @return returns the set font for convenience. NULL if your argument was null.\n         */\n        public Font setFont(final Font font) {\n\n            final Font ret = font == null ? null : font.deriveFont(font.getSize2D() * (float) guiScalingFactor_fontsThatLookCorrectInComponents);\n            g.setFont(ret);\n            return ret;\n        }\n\n\n        @Override\n        public String toString() {\n\n            return &quot;[GUIScalingCustomGraphics&quot; +\n                    &quot; guiScalingFactor_manualDrawing=&quot; + guiScalingFactor_manualDrawing +\n                    &quot; w=&quot; + w +\n                    &quot; h=&quot; + h +\n                    &quot; component=&quot; + component +\n                    &quot; g=&quot; + g +\n                    ']';\n        }\n\n\n        /**\n         * Convenience method that saves you unnecessary calls and code clutter. In your live painting method, you'll probably check first if your component has\n         * any pixels, aka if with AND height are at least 1. If they're not, you return before doing anything.\n         * &lt;p&gt;\n         * This method is a shortcut. Call this right at the beginning. If it returns true, you abort.\n         */\n        public boolean isSizeZero() {\n\n            return w &lt; 1 || h &lt; 1;\n        }\n\n    }\n\n\n    /**\n     * A tiny rectangle will be filled with the current color and width/height of HAIRLINETHICKNESS.\n     */\n    public static void drawPixel(final Graphics2D g,\n                                 final int x,\n                                 final int y) {\n\n        g.fillRect(x - GUIScaling.HAIRLINETHICKNESS_HALF,\n                   y - GUIScaling.HAIRLINETHICKNESS_HALF,\n                   GUIScaling.HAIRLINETHICKNESS,\n                   GUIScaling.HAIRLINETHICKNESS);\n    }\n\n\n    final public static double JBUTTONFONTSIZE_ON_100PERCENTSCALE_JAVA8_W10_WITH_LOOKANDFEEL_WINDOWSORSYSTEMORXPLATFORMORWINCLASSIC = 11.0;\n    final public static float JBUTTONFONTSIZE_ON_UNKNOWNSCALE_UNKNOWNJAVA_UNKNOWNOS_WITH_LOOKANDFEEL_WINDOWSORSYSTEMORXPLATFORMORWINCLASSIC;\n\n    final public static double GUISCALINGFACTOR_SYSTEM; // The scaling set in the system.\n    final public static double GUISCALINGFACTOR_COMPONENTSANDFONTS; // The scaling necessary if you set component/font sizes yourself.\n    final public static double GUISCALINGFACTOR_CUSTOMGRAPHICS; // The scaling necessary if you want your custom graphics, too, to be scaled according to System settings.\n    final public static double GUISCALINGFACTOR_REALCOMPONENTSIZE; // The factor by which getWidth() and such return values have to be multiplied, because Java 9 reports them differently.\n    final public static double GUISCALINGFACTOR_FONTINCUSTOMGRAPHICSCONTEXT; // (This is exactly the custom graphics scaling probed by this class.) The factor by which a proper looking font would have to be scaled when used in custom graphics whose scale is 1. (Java 9 pre-scales it to e.g. 2 if Desktop is at 200%, then you reset that with the class above. Then the fonts that look right in the components will be TOO SMALL in the custom graphics. Use this factor / the method above to fix that.)\n\n\n    final public static int HAIRLINETHICKNESS; // A &quot;hairline&quot; would be a line with pixel thickness 1. However, if the GUI is scaled up, that should be a little thicker. This value will have a value of AT LEAST 1. If the GUI scaling of the system is 200%, the value will be 2. If it's 175%, the value will ALSO be 2 due to rounding.\n\n    final public static int HAIRLINETHICKNESS_HALF;\n    final public static double HAIRLINETHICKNESS_HALF_DOUBLE;\n\n\n    static {\n\n        if (!SwingUtilities.isEventDispatchThread()) { // This also makes sure an obfuscator doesn't remove this method and its calls.\n            throw new IllegalStateException(&quot;Must be initialized on Swing thread!&quot;);\n        }\n\n        System.err.println(&quot;Initializing GUI scaling ...&quot;);\n\n        GUIScaling.setLookAndFeelDefault();\n\n        JBUTTONFONTSIZE_ON_UNKNOWNSCALE_UNKNOWNJAVA_UNKNOWNOS_WITH_LOOKANDFEEL_WINDOWSORSYSTEMORXPLATFORMORWINCLASSIC =\n                new JButton().getFont().getSize2D();  // 21.0 on 200% desktop on Java 8 // 11.0 on 100% desktop on Java 8\n\n        final Integer[] paintScalingInPercent = new Integer[1];\n\n        final JDialog bruteForceJava9ScalingCheck = new JDialog((Frame) null, &quot;&quot;, true) {\n\n            {\n                //                setLocation(-1000, -1000); // Outamysight!\n                setLocation(100,\n                            100); // else you might have compatibility problems (see stackoverflow where I posted this class)\n\n                final Runnable fallbackInCaseOlderJavaVersionDoesNotEndUpClosingThisWindow = () -&gt; {\n                    try {\n                        Thread.sleep(500);\n                    } catch (InterruptedException e) {\n                        e.printStackTrace();\n                    }\n                    SwingUtilities.invokeLater(() -&gt; {\n                        paintScalingInPercent[0] = 100;\n                        dispose();\n                    });\n                };\n                final Thread t = new Thread(fallbackInCaseOlderJavaVersionDoesNotEndUpClosingThisWindow);\n                t.setDaemon(true);\n                t.setName(&quot;GUI scaling detector fallback thread&quot;);\n                t.start();\n            }\n\n            @Override\n            public void paint(final Graphics graphics) {\n\n                final Graphics2D g = (Graphics2D) graphics;\n                final AffineTransform originalTransform = g.getTransform();\n                paintScalingInPercent[0] = (int) Math.round(originalTransform.getScaleX() * 100);\n                dispose();\n            }\n        };\n\n        bruteForceJava9ScalingCheck.setVisible(true); // This call blocks until dispose() is reached.\n\n        if (paintScalingInPercent[0] == null) {\n\n            throw new Error(&quot;Unexpected behavior: Modal dialog did not block!&quot;);\n\n        } else if (paintScalingInPercent[0] != 100) {\n\n            // Must be Java 9 (or newer?).\n\n            GUISCALINGFACTOR_SYSTEM = paintScalingInPercent[0] * 0.01;\n            GUISCALINGFACTOR_COMPONENTSANDFONTS = 1; // Java 9 does everything. The developer's considerations are made unnecessary/harmless by this &quot;1&quot;.\n            GUISCALINGFACTOR_CUSTOMGRAPHICS = GUISCALINGFACTOR_SYSTEM;\n            GUISCALINGFACTOR_FONTINCUSTOMGRAPHICSCONTEXT = GUISCALINGFACTOR_SYSTEM;\n\n        } else {\n\n            // Either Java 8 (or older?) or scaling IS just at the normal 1 (100).\n\n            final double factorPreliminary = JBUTTONFONTSIZE_ON_UNKNOWNSCALE_UNKNOWNJAVA_UNKNOWNOS_WITH_LOOKANDFEEL_WINDOWSORSYSTEMORXPLATFORMORWINCLASSIC / JBUTTONFONTSIZE_ON_100PERCENTSCALE_JAVA8_W10_WITH_LOOKANDFEEL_WINDOWSORSYSTEMORXPLATFORMORWINCLASSIC;\n            //            System.err.println(&quot;FIX MEEEEEEEEEEEEEEEEEEEEEEEEEEEEE!&quot;);\n            //            final double factorPreliminary = 1;\n\n            // If we just divide the two, we get 1.454545... on a 150% desktop, because the font sizes\n            // chosen by Java are integer values, so we experience a rounding error.\n            // The crappy but probably in most cases nicely working solution is: We round the result to .25 steps!\n\n            GUISCALINGFACTOR_SYSTEM = Math.round(factorPreliminary * 4) / 4d;\n            GUISCALINGFACTOR_COMPONENTSANDFONTS = GUISCALINGFACTOR_SYSTEM;\n            GUISCALINGFACTOR_CUSTOMGRAPHICS = GUISCALINGFACTOR_SYSTEM;\n            GUISCALINGFACTOR_FONTINCUSTOMGRAPHICSCONTEXT = 1; // No font scaling, the fonts used will look correct in custom scaling without extra treatment.\n        }\n\n        GUISCALINGFACTOR_REALCOMPONENTSIZE = GUISCALINGFACTOR_CUSTOMGRAPHICS / GUISCALINGFACTOR_COMPONENTSANDFONTS;\n\n\n        HAIRLINETHICKNESS = (int) Math.max(1, Math.round(GUISCALINGFACTOR_CUSTOMGRAPHICS));\n        HAIRLINETHICKNESS_HALF_DOUBLE = HAIRLINETHICKNESS * 0.5;\n        HAIRLINETHICKNESS_HALF = (int) Math.round(HAIRLINETHICKNESS_HALF_DOUBLE);\n\n        //        System.err.println(&quot;GUISCALINGFACTOR_SYSTEM             = &quot; + GUISCALINGFACTOR_SYSTEM);\n        //        System.err.println(&quot;GUISCALINGFACTOR_COMPONENTSANDFONTS = &quot; + GUISCALINGFACTOR_COMPONENTSANDFONTS);\n        //        System.err.println(&quot;GUISCALINGFACTOR_CUSTOMGRAPHICS     = &quot; + GUISCALINGFACTOR_CUSTOMGRAPHICS);\n        //        System.err.println(&quot;GUISCALINGFACTOR_REALCOMPONENTSIZE  = &quot; + GUISCALINGFACTOR_REALCOMPONENTSIZE);\n\n        System.err.println(&quot;... done.&quot;);\n\n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":1382190,"reputation":357,"user_id":1314947,"accept_rate":60,"display_name":"Philipp K&#246;nig"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3816,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"accepted_answer_id":46630710,"answer_count":1,"score":10,"last_activity_date":1642232407,"creation_date":1490653531,"question_id":43057457,"body_markdown":"With JDK 9 my swing app works well on Windows with 4k highdpi and\r\nnormal 1080p normal dpi. Labels, Comboboxes etc. all look nice and are \r\nscaled up on the 4k screen. \r\nBut so is my JPanel where i draw custom images. Can i disable\r\nthe scaling for this one JPanel to handle drawing myself? I am using\r\napache-commons bicubic interpolation to draw more details on the higher \r\nunscaled resolution, but as it is scaled out of the box, i just have the &quot;normal&quot; dimensions to draw.\r\n\r\nKind regards ","title":"jdk 9 high dpi disable for specific panel","body":"<p>With JDK 9 my swing app works well on Windows with 4k highdpi and\nnormal 1080p normal dpi. Labels, Comboboxes etc. all look nice and are \nscaled up on the 4k screen. \nBut so is my JPanel where i draw custom images. Can i disable\nthe scaling for this one JPanel to handle drawing myself? I am using\napache-commons bicubic interpolation to draw more details on the higher \nunscaled resolution, but as it is scaled out of the box, i just have the \"normal\" dimensions to draw.</p>\n\n<p>Kind regards </p>\n"},{"tags":["java","data-structures","lambda","hashmap","priority-queue"],"comments":[{"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":2,"creation_date":1642229184,"post_id":70719349,"comment_id":125020173,"body_markdown":"Nope.  You don&#39;t put it in the `HashMap` construction at all, you only put it in when you&#39;re creating the priority queues to put in the map.","body":"Nope.  You don&#39;t put it in the <code>HashMap</code> construction at all, you only put it in when you&#39;re creating the priority queues to put in the map."}],"answers":[{"tags":[],"owner":{"account_id":15732107,"reputation":71,"user_id":13718790,"display_name":"Jeremy Dsilva"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1642232177,"creation_date":1642232177,"answer_id":70719637,"question_id":70719349,"body_markdown":"You need to create the PriorityQueue with the Comparator every time you insert a key.  \r\n\r\n```java\r\nMap&lt;String, PriorityQueue&lt;Integer&gt;&gt; map = new HashMap&lt;&gt;();\r\nmap.put(&quot;key&quot;, new PriorityQueue&lt;&gt;((Integer b, Integer a) -&gt; a.compareTo(b)));\r\n```\r\n\r\nSide note the Comparator can be simplified to \r\n```java\r\nmap.put(&quot;key&quot;, new PriorityQueue&lt;&gt;(Comparator.reverseOrder()));\r\n```","title":"How to use the lambda expression in the value of Hashmap","body":"<p>You need to create the PriorityQueue with the Comparator every time you insert a key.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Map&lt;String, PriorityQueue&lt;Integer&gt;&gt; map = new HashMap&lt;&gt;();\nmap.put(&quot;key&quot;, new PriorityQueue&lt;&gt;((Integer b, Integer a) -&gt; a.compareTo(b)));\n</code></pre>\n<p>Side note the Comparator can be simplified to</p>\n<pre class=\"lang-java prettyprint-override\"><code>map.put(&quot;key&quot;, new PriorityQueue&lt;&gt;(Comparator.reverseOrder()));\n</code></pre>\n"}],"owner":{"account_id":11781735,"reputation":11,"user_id":8621013,"display_name":"zzz17"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":152,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1642232177,"creation_date":1642228221,"question_id":70719349,"body_markdown":"I want to put a priority queue in the value part of a HashMap and I want to define the lambda of the queue by myself. I know where to put the lambda when creating the priority queue itself, but I&#39;m confused that where to put the lambda if I want to put in the PQ which is in the value part of a HashMap.\r\n\r\nIs the code below correct and the best way to do it? (We want to make the priority queue max heap)\r\n\r\n```\r\nMap&lt;String, PriorityQueue&lt;Integer&gt;&gt; map = new HashMap&lt;&gt;((Integer b, Integer a) -&gt; a.CompareTo(b));\r\n```\r\n\r\n","title":"How to use the lambda expression in the value of Hashmap","body":"<p>I want to put a priority queue in the value part of a HashMap and I want to define the lambda of the queue by myself. I know where to put the lambda when creating the priority queue itself, but I'm confused that where to put the lambda if I want to put in the PQ which is in the value part of a HashMap.</p>\n<p>Is the code below correct and the best way to do it? (We want to make the priority queue max heap)</p>\n<pre><code>Map&lt;String, PriorityQueue&lt;Integer&gt;&gt; map = new HashMap&lt;&gt;((Integer b, Integer a) -&gt; a.CompareTo(b));\n</code></pre>\n"},{"tags":["java","selenium"],"comments":[{"owner":{"account_id":3758602,"reputation":10072,"user_id":3124333,"accept_rate":100,"display_name":"SiKing"},"score":1,"creation_date":1642198393,"post_id":70717046,"comment_id":125016316,"body_markdown":"You probably want to find a basic tutorial on Java, and figure out inheritance.","body":"You probably want to find a basic tutorial on Java, and figure out inheritance."},{"owner":{"account_id":6077817,"reputation":1213,"user_id":4744568,"display_name":"pcalkins"},"score":0,"creation_date":1642201898,"post_id":70717046,"comment_id":125017085,"body_markdown":"you can use Dependency Injection for this, but I would re-consider the use of Page-Object-Model at this point... and ditch the @test annotation, &quot;Field&quot;, and extended class. \n (those are generally used with a framework of some sort) Selenium is a time-line based series of actions, which means you can use a much more direct, script-like approach.  If you find that you need to re-use some components, you can develop class objects, base classes and dependency injection and build an architecture which suits your needs.","body":"you can use Dependency Injection for this, but I would re-consider the use of Page-Object-Model at this point... and ditch the @test annotation, &quot;Field&quot;, and extended class.   (those are generally used with a framework of some sort) Selenium is a time-line based series of actions, which means you can use a much more direct, script-like approach.  If you find that you need to re-use some components, you can develop class objects, base classes and dependency injection and build an architecture which suits your needs."}],"answers":[{"tags":[],"owner":{"account_id":6788662,"reputation":2778,"user_id":5226491,"display_name":"Max Daroshchanka"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1642231430,"creation_date":1642231430,"answer_id":70719581,"question_id":70717046,"body_markdown":"##### How to pass one object to another\r\n\r\n`emailField` is `LoginPage` class variable, you can access it via `LoginPage` object instance.\r\n\r\nFor passing objects to some classes the basic way is to set them in constructor. \r\nThe same you&#39;ve already done for driver.\r\n\r\n```\r\npublic class HomePage{\r\n    private WebDriver driver;\r\n    private LoginPage loginPage;\r\n\r\n    public HomePage(WebDriver driver, LoginPage loginPage){\r\n        this.driver = driver;\r\n        this.loginPage = loginPage;\r\n    }\r\n\r\n    // not sure what this method should do, but if it called get.. by naming conventions it should return something, so I changed it&#39;s type to Field and added return. But it&#39;s up to you, you may leave void, this is not related to your question.\r\n    public Field getEmailValue(){\r\n         return loginPage.emailField; // now this will work\r\n    }\r\n}\r\n\r\n```\r\nDo not forget to pass LoginPage object instance when instantiate \r\nHomePage.\r\n\r\n```\r\npublic class LoginPage{\r\n    private Field logInField = new Field(FieldType.INPUT, By.id(&quot;test1&quot;));\r\n    public Field emailField = new Field(FieldType.INPUT, By.id(&quot;test2&quot;));\r\n    private WebDriver driver;\r\n\r\n    public LoginPage(WebDriver driver){\r\n        this.driver = driver;\r\n        emailField.setValue(&quot;something&quot;);\r\n        getSite(&quot;https://apply.commonapp.org/login&quot;);\r\n    }\r\n\r\n    public HomePage logIn(Object object){\r\n        //some actions\r\n        driver.findElement(logInField.getSelector()).click();\r\n        return new HomePage(driver, this); // this means current class instance\r\n    }\r\n}\r\n```\r\n\r\n---\r\n##### Some tutorials\r\n\r\nhttps://www.w3schools.com/java/java_constructors.asp\r\nhttp://tutorials.jenkov.com/java/constructors.html\r\n","title":"How to pass one object to another","body":"<h5>How to pass one object to another</h5>\n<p><code>emailField</code> is <code>LoginPage</code> class variable, you can access it via <code>LoginPage</code> object instance.</p>\n<p>For passing objects to some classes the basic way is to set them in constructor.\nThe same you've already done for driver.</p>\n<pre><code>public class HomePage{\n    private WebDriver driver;\n    private LoginPage loginPage;\n\n    public HomePage(WebDriver driver, LoginPage loginPage){\n        this.driver = driver;\n        this.loginPage = loginPage;\n    }\n\n    // not sure what this method should do, but if it called get.. by naming conventions it should return something, so I changed it's type to Field and added return. But it's up to you, you may leave void, this is not related to your question.\n    public Field getEmailValue(){\n         return loginPage.emailField; // now this will work\n    }\n}\n\n</code></pre>\n<p>Do not forget to pass LoginPage object instance when instantiate\nHomePage.</p>\n<pre><code>public class LoginPage{\n    private Field logInField = new Field(FieldType.INPUT, By.id(&quot;test1&quot;));\n    public Field emailField = new Field(FieldType.INPUT, By.id(&quot;test2&quot;));\n    private WebDriver driver;\n\n    public LoginPage(WebDriver driver){\n        this.driver = driver;\n        emailField.setValue(&quot;something&quot;);\n        getSite(&quot;https://apply.commonapp.org/login&quot;);\n    }\n\n    public HomePage logIn(Object object){\n        //some actions\n        driver.findElement(logInField.getSelector()).click();\n        return new HomePage(driver, this); // this means current class instance\n    }\n}\n</code></pre>\n<hr />\n<h5>Some tutorials</h5>\n<p><a href=\"https://www.w3schools.com/java/java_constructors.asp\" rel=\"nofollow noreferrer\">https://www.w3schools.com/java/java_constructors.asp</a>\n<a href=\"http://tutorials.jenkov.com/java/constructors.html\" rel=\"nofollow noreferrer\">http://tutorials.jenkov.com/java/constructors.html</a></p>\n"}],"owner":{"account_id":15464675,"reputation":61,"user_id":11156387,"display_name":"Tom"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1642231430,"creation_date":1642197966,"question_id":70717046,"body_markdown":"In my test class (Test.java) I create object variables: loginPage and homePage.\r\nIn HomePage class I create Field object: emailField with value: &quot;something&quot;\r\nHow can I get &quot;emailField&quot; value (and the entire object as well) inside HomePage class?\r\n\r\n\r\nWhen i try to use emailField.getValue() or loginPage.emailField in getEmailValue() method I get errors: Cannot resolve symbol &#39;emailField&#39;/Cannot resolve symbol &#39;loginPage&#39;\r\n\r\nTest.java:\r\n\r\n    public class Test extends GeneralTest {\r\n        @Test\r\n        public void test() {\r\n            LoginPage loginPage = new LoginPage(driver);\r\n            HomePage homePage = loginPage.logIn(loginPage);\r\n            homePage.getEmailValue();\r\n        }\r\n    }\r\n\r\nHomePage.java:\r\n\r\n    public class LoginPage{\r\n        private Field logInField = new Field(FieldType.INPUT, By.id(&quot;test1&quot;));\r\n        public Field emailField = new Field(FieldType.INPUT, By.id(&quot;test2&quot;));\r\n        private WebDriver driver;\r\n    \r\n        public LoginPage(WebDriver driver){\r\n            this.driver = driver;\r\n            emailField.setValue(&quot;something&quot;);\r\n            getSite(&quot;https://apply.commonapp.org/login&quot;);\r\n        }\r\n    \r\n        public HomePage logIn(Object object){\r\n            //some actions\r\n            driver.findElement(logInField.getSelector()).click();\r\n            return new HomePage(driver);\r\n        }\r\n    }\r\n\r\nHomePage.class:\r\n\r\n    public class HomePage{\r\n        private WebDriver driver;\r\n    \r\n        public HomePage(WebDriver driver){\r\n            this.driver = driver;\r\n        }\r\n    \r\n        public void getEmailValue(){\r\n            // emailField.getValue() -&gt; Cannot resolve symbol &#39;emailField&#39;\r\n            // loginPage.emailField -&gt; Cannot resolve symbol &#39;loginPage&#39;\r\n        }\r\n    }a","title":"How to pass one object to another","body":"<p>In my test class (Test.java) I create object variables: loginPage and homePage.\nIn HomePage class I create Field object: emailField with value: &quot;something&quot;\nHow can I get &quot;emailField&quot; value (and the entire object as well) inside HomePage class?</p>\n<p>When i try to use emailField.getValue() or loginPage.emailField in getEmailValue() method I get errors: Cannot resolve symbol 'emailField'/Cannot resolve symbol 'loginPage'</p>\n<p>Test.java:</p>\n<pre><code>public class Test extends GeneralTest {\n    @Test\n    public void test() {\n        LoginPage loginPage = new LoginPage(driver);\n        HomePage homePage = loginPage.logIn(loginPage);\n        homePage.getEmailValue();\n    }\n}\n</code></pre>\n<p>HomePage.java:</p>\n<pre><code>public class LoginPage{\n    private Field logInField = new Field(FieldType.INPUT, By.id(&quot;test1&quot;));\n    public Field emailField = new Field(FieldType.INPUT, By.id(&quot;test2&quot;));\n    private WebDriver driver;\n\n    public LoginPage(WebDriver driver){\n        this.driver = driver;\n        emailField.setValue(&quot;something&quot;);\n        getSite(&quot;https://apply.commonapp.org/login&quot;);\n    }\n\n    public HomePage logIn(Object object){\n        //some actions\n        driver.findElement(logInField.getSelector()).click();\n        return new HomePage(driver);\n    }\n}\n</code></pre>\n<p>HomePage.class:</p>\n<pre><code>public class HomePage{\n    private WebDriver driver;\n\n    public HomePage(WebDriver driver){\n        this.driver = driver;\n    }\n\n    public void getEmailValue(){\n        // emailField.getValue() -&gt; Cannot resolve symbol 'emailField'\n        // loginPage.emailField -&gt; Cannot resolve symbol 'loginPage'\n    }\n}a\n</code></pre>\n"},{"tags":["java","eclipse","maven","testng","java-module"],"answers":[{"tags":[],"owner":{"account_id":23944711,"reputation":21,"user_id":17937226,"display_name":"javalearner84"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1642220129,"creation_date":1642220129,"answer_id":70718833,"question_id":70718151,"body_markdown":"Thanks everyone who looked at this. I solved it by following these steps:\r\n\r\n1. Delete module-info.java. This turns it into a nonmodular project which is fine for me. I hesitated to do this because the Maven JavaFX archetype included it, but as it says here somewhere \r\n\r\nhttps://openjfx.io/openjfx-docs/#IDE-Eclipse\r\n\r\nyou can just delete it after its created. \r\n\r\n2. The problem then if you try to run the project is it will give you a warning that JavaFX isn&#39;t included as a module. It will still run, but its best to get rid of this incase of problems down the road. So you need to download the JavaFX libraries, place them in your hard drive, and then include them in your project via VM arguments in Eclipse:\r\n\r\nright click project -&gt; Run configuration -&gt; Arguments tab -&gt; add in the VM arguments area something like:\r\n\r\n--module-path [fully qualified path to lib folder containing downloaded JavaFX] --add-modules javafx.controls\r\n\r\npath would be like &quot;C:\\javafx\\lib&quot; or wherever you placed the downloaded JavaFX.\r\n\r\nThen it should run, and project will still build using Maven, but I&#39;m not sure if its using the JavaFX which is still in the Maven POM or the one I specified on the C drive. But it works. Any help on whats happening there would be appreciated. Thanks","title":"How do I include src/test/java files to run TestNG tests?","body":"<p>Thanks everyone who looked at this. I solved it by following these steps:</p>\n<ol>\n<li>Delete module-info.java. This turns it into a nonmodular project which is fine for me. I hesitated to do this because the Maven JavaFX archetype included it, but as it says here somewhere</li>\n</ol>\n<p><a href=\"https://openjfx.io/openjfx-docs/#IDE-Eclipse\" rel=\"nofollow noreferrer\">https://openjfx.io/openjfx-docs/#IDE-Eclipse</a></p>\n<p>you can just delete it after its created.</p>\n<ol start=\"2\">\n<li>The problem then if you try to run the project is it will give you a warning that JavaFX isn't included as a module. It will still run, but its best to get rid of this incase of problems down the road. So you need to download the JavaFX libraries, place them in your hard drive, and then include them in your project via VM arguments in Eclipse:</li>\n</ol>\n<p>right click project -&gt; Run configuration -&gt; Arguments tab -&gt; add in the VM arguments area something like:</p>\n<p>--module-path [fully qualified path to lib folder containing downloaded JavaFX] --add-modules javafx.controls</p>\n<p>path would be like &quot;C:\\javafx\\lib&quot; or wherever you placed the downloaded JavaFX.</p>\n<p>Then it should run, and project will still build using Maven, but I'm not sure if its using the JavaFX which is still in the Maven POM or the one I specified on the C drive. But it works. Any help on whats happening there would be appreciated. Thanks</p>\n"}],"owner":{"account_id":23944711,"reputation":21,"user_id":17937226,"display_name":"javalearner84"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":387,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1642229989,"creation_date":1642209223,"question_id":70718151,"body_markdown":"I&#39;m just learning Java and could use your help. I&#39;m using Eclipse, and created a Maven project using the org.openjfx archetype. Everything seems to work fine except when I try to write tests in src/test/java, which causes an error.\r\n\r\n\r\n&gt; An error occurred while instantiating class\r\n&gt; starcraft.warcraft.test.TestClass: Unable to make public\r\n&gt; starcraft.warcraft.test.TestClass() accessible: module\r\n&gt; starcraft.warcraft does not &quot;exports starcraft.warcraft.test&quot; to\r\n&gt; module org.testng\r\n\r\n\r\nThis is how I created the project with default settings in Eclipse:\r\n\r\n[Project Setup with Maven Archetype Selection][1]\r\n\r\nNow, when Eclipse creates the project, it doesn&#39;t have a src/test/java folder, so I create that manually. Then I create a class called &quot;TestClass&quot; inside a package &quot;starcraft.warcraft.test&quot; inside src/test/java, and I add a simple method to test inside the App class called &quot;adder&quot;. You can see the project structure\r\n\r\n[Project Structure][2]\r\n\r\n    package starcraft.warcraft;\r\n    \r\n    import javafx.application.Application;\r\n    import javafx.scene.Scene;\r\n    import javafx.scene.control.Label;\r\n    import javafx.scene.layout.StackPane;\r\n    import javafx.stage.Stage;\r\n    public class App extends Application {\r\n    \r\n        @Override\r\n        public void start(Stage stage) {\r\n            var javaVersion = SystemInfo.javaVersion();\r\n            var javafxVersion = SystemInfo.javafxVersion();\r\n    \r\n            var label = new Label(&quot;Hello, JavaFX &quot; + javafxVersion + &quot;, running on Java &quot; + javaVersion + &quot;.&quot;);\r\n            var scene = new Scene(new StackPane(label), 640, 480);\r\n            stage.setScene(scene);\r\n            stage.show();\r\n        }\r\n        \r\n        // WILL TEST THIS METHOD\r\n        public static int adder(int digit1, int digit2) {\r\n        \treturn digit1 + digit2;\r\n        }\r\n        \r\n        public static void main(String[] args) {\r\n            launch();\r\n        }\r\n    \r\n    }\r\n\r\n\r\nNow I want to use TestNG for the tests, and so I include it in my POM which is\r\n\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n      xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;&gt;\r\n        &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n        &lt;groupId&gt;starcraft&lt;/groupId&gt;\r\n        &lt;artifactId&gt;warcraft&lt;/artifactId&gt;\r\n        &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n        &lt;properties&gt;\r\n            &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n            &lt;maven.compiler.source&gt;11&lt;/maven.compiler.source&gt;\r\n            &lt;maven.compiler.target&gt;11&lt;/maven.compiler.target&gt;\r\n        &lt;/properties&gt;\r\n        &lt;dependencies&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\r\n                &lt;artifactId&gt;javafx-controls&lt;/artifactId&gt;\r\n                &lt;version&gt;13&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n          \t&lt;!-- https://mvnrepository.com/artifact/org.testng/testng --&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t    &lt;groupId&gt;org.testng&lt;/groupId&gt;\r\n    \t\t    &lt;artifactId&gt;testng&lt;/artifactId&gt;\r\n    \t\t    &lt;version&gt;7.5&lt;/version&gt;\r\n    \t\t    &lt;scope&gt;test&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n        &lt;/dependencies&gt;\r\n        &lt;build&gt;\r\n            &lt;plugins&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;3.8.0&lt;/version&gt;\r\n                    &lt;configuration&gt;\r\n                        &lt;release&gt;11&lt;/release&gt;\r\n                    &lt;/configuration&gt;\r\n                &lt;/plugin&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;javafx-maven-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;0.0.6&lt;/version&gt;\r\n                    &lt;executions&gt;\r\n                        &lt;execution&gt;\r\n                            &lt;!-- Default configuration for running --&gt;\r\n                            &lt;!-- Usage: mvn clean javafx:run --&gt;\r\n                            &lt;id&gt;default-cli&lt;/id&gt;\r\n                            &lt;configuration&gt;\r\n                                &lt;mainClass&gt;starcraft.warcraft.App&lt;/mainClass&gt;\r\n                            &lt;/configuration&gt;\r\n                        &lt;/execution&gt;\r\n                    &lt;/executions&gt;\r\n                &lt;/plugin&gt;\r\n            &lt;/plugins&gt;\r\n        &lt;/build&gt;\r\n    &lt;/project&gt;\r\n\r\nThis is the default POM created by the Maven archetype except for the TestNG dependency I added. When I try to use TestNG, Eclipse makes me add it to the module path like so:\r\n\r\n[Maven saying I need to add the TestNG library][3]\r\n\r\nAnd here is my module-info:\r\n\r\n    module starcraft.warcraft {\r\n        requires javafx.controls;\r\n    \trequires org.testng;\r\n    \t\r\n        exports starcraft.warcraft;\r\n    }\r\n\r\nOK, all good so far, but now when I try to run my test inside TestClass:\r\n\r\n    package starcraft.warcraft.test;\r\n    \r\n    import org.testng.annotations.Test;\r\n    \r\n    import starcraft.warcraft.App;\r\n    \r\n    public class TestClass {\r\n    \r\n    \t@Test\r\n    \tpublic void testAdder() {\r\n    \t\t\r\n    \t\tint sum = App.adder(1, 2);\r\n    \t\t\r\n    \t\tSystem.out.println(sum);\r\n    \t\t\r\n    \t}\r\n    }\r\n\r\nI get the error, which again is\r\n\r\n\r\n&gt; An error occurred while instantiating class\r\n&gt; starcraft.warcraft.test.TestClass: Unable to make public\r\n&gt; starcraft.warcraft.test.TestClass() accessible: module\r\n&gt; starcraft.warcraft does not &quot;exports starcraft.warcraft.test&quot; to\r\n&gt; module org.testng\r\n\r\nI can&#39;t figure out how to do the export. When I try making the entry in module-info, it doesn&#39;t give me the option of adding the package in src/test/java, the only packages it allows me to choose from are in src/main/java. \r\n\r\nI don&#39;t understand modules well. How can I get the program to let me run tests from src/test/java?\r\n\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Wvwfr.png\r\n  [2]: https://i.stack.imgur.com/lEroF.png\r\n  [3]: https://i.stack.imgur.com/b11Dg.png","title":"How do I include src/test/java files to run TestNG tests?","body":"<p>I'm just learning Java and could use your help. I'm using Eclipse, and created a Maven project using the org.openjfx archetype. Everything seems to work fine except when I try to write tests in src/test/java, which causes an error.</p>\n<blockquote>\n<p>An error occurred while instantiating class\nstarcraft.warcraft.test.TestClass: Unable to make public\nstarcraft.warcraft.test.TestClass() accessible: module\nstarcraft.warcraft does not &quot;exports starcraft.warcraft.test&quot; to\nmodule org.testng</p>\n</blockquote>\n<p>This is how I created the project with default settings in Eclipse:</p>\n<p><a href=\"https://i.stack.imgur.com/Wvwfr.png\" rel=\"nofollow noreferrer\">Project Setup with Maven Archetype Selection</a></p>\n<p>Now, when Eclipse creates the project, it doesn't have a src/test/java folder, so I create that manually. Then I create a class called &quot;TestClass&quot; inside a package &quot;starcraft.warcraft.test&quot; inside src/test/java, and I add a simple method to test inside the App class called &quot;adder&quot;. You can see the project structure</p>\n<p><a href=\"https://i.stack.imgur.com/lEroF.png\" rel=\"nofollow noreferrer\">Project Structure</a></p>\n<pre><code>package starcraft.warcraft;\n\nimport javafx.application.Application;\nimport javafx.scene.Scene;\nimport javafx.scene.control.Label;\nimport javafx.scene.layout.StackPane;\nimport javafx.stage.Stage;\npublic class App extends Application {\n\n    @Override\n    public void start(Stage stage) {\n        var javaVersion = SystemInfo.javaVersion();\n        var javafxVersion = SystemInfo.javafxVersion();\n\n        var label = new Label(&quot;Hello, JavaFX &quot; + javafxVersion + &quot;, running on Java &quot; + javaVersion + &quot;.&quot;);\n        var scene = new Scene(new StackPane(label), 640, 480);\n        stage.setScene(scene);\n        stage.show();\n    }\n    \n    // WILL TEST THIS METHOD\n    public static int adder(int digit1, int digit2) {\n        return digit1 + digit2;\n    }\n    \n    public static void main(String[] args) {\n        launch();\n    }\n\n}\n</code></pre>\n<p>Now I want to use TestNG for the tests, and so I include it in my POM which is</p>\n<pre><code>&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n  xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;groupId&gt;starcraft&lt;/groupId&gt;\n    &lt;artifactId&gt;warcraft&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;properties&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;maven.compiler.source&gt;11&lt;/maven.compiler.source&gt;\n        &lt;maven.compiler.target&gt;11&lt;/maven.compiler.target&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\n            &lt;artifactId&gt;javafx-controls&lt;/artifactId&gt;\n            &lt;version&gt;13&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;!-- https://mvnrepository.com/artifact/org.testng/testng --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.testng&lt;/groupId&gt;\n            &lt;artifactId&gt;testng&lt;/artifactId&gt;\n            &lt;version&gt;7.5&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.8.0&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;release&gt;11&lt;/release&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\n                &lt;artifactId&gt;javafx-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;0.0.6&lt;/version&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;!-- Default configuration for running --&gt;\n                        &lt;!-- Usage: mvn clean javafx:run --&gt;\n                        &lt;id&gt;default-cli&lt;/id&gt;\n                        &lt;configuration&gt;\n                            &lt;mainClass&gt;starcraft.warcraft.App&lt;/mainClass&gt;\n                        &lt;/configuration&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n<p>This is the default POM created by the Maven archetype except for the TestNG dependency I added. When I try to use TestNG, Eclipse makes me add it to the module path like so:</p>\n<p><a href=\"https://i.stack.imgur.com/b11Dg.png\" rel=\"nofollow noreferrer\">Maven saying I need to add the TestNG library</a></p>\n<p>And here is my module-info:</p>\n<pre><code>module starcraft.warcraft {\n    requires javafx.controls;\n    requires org.testng;\n    \n    exports starcraft.warcraft;\n}\n</code></pre>\n<p>OK, all good so far, but now when I try to run my test inside TestClass:</p>\n<pre><code>package starcraft.warcraft.test;\n\nimport org.testng.annotations.Test;\n\nimport starcraft.warcraft.App;\n\npublic class TestClass {\n\n    @Test\n    public void testAdder() {\n        \n        int sum = App.adder(1, 2);\n        \n        System.out.println(sum);\n        \n    }\n}\n</code></pre>\n<p>I get the error, which again is</p>\n<blockquote>\n<p>An error occurred while instantiating class\nstarcraft.warcraft.test.TestClass: Unable to make public\nstarcraft.warcraft.test.TestClass() accessible: module\nstarcraft.warcraft does not &quot;exports starcraft.warcraft.test&quot; to\nmodule org.testng</p>\n</blockquote>\n<p>I can't figure out how to do the export. When I try making the entry in module-info, it doesn't give me the option of adding the package in src/test/java, the only packages it allows me to choose from are in src/main/java.</p>\n<p>I don't understand modules well. How can I get the program to let me run tests from src/test/java?</p>\n"},{"tags":["java","logging","log4j","log4j2"],"comments":[{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":3,"creation_date":1642230301,"post_id":70719454,"comment_id":125020320,"body_markdown":"I suggest you read:  https://stackoverflow.com/questions/35900555.  One important take-away from that Q&amp;A is that you need to read the documentation.  Reading the documentation is the first step to understanding what your properties will need to look like.","body":"I suggest you read:  <a href=\"https://stackoverflow.com/questions/35900555\">stackoverflow.com/questions/35900555</a>.  One important take-away from that Q&amp;A is that you need to read the documentation.  Reading the documentation is the first step to understanding what your properties will need to look like."},{"owner":{"account_id":16269349,"reputation":13452,"user_id":11748454,"display_name":"Piotr P. Karwasz"},"score":0,"creation_date":1642236878,"post_id":70719454,"comment_id":125021206,"body_markdown":"You can also use the [`Log4j1ConfigurationConverter`](https://logging.apache.org/log4j/2.x/log4j-1.2-api/apidocs/org/apache/log4j/config/Log4j1ConfigurationConverter.html) included in `log4j-1.2-api`. BTW: there are errors in your configuration, like the double `log4j.rootLogger` key.","body":"You can also use the <a href=\"https://logging.apache.org/log4j/2.x/log4j-1.2-api/apidocs/org/apache/log4j/config/Log4j1ConfigurationConverter.html\" rel=\"nofollow noreferrer\"><code>Log4j1ConfigurationConverter</code></a> included in <code>log4j-1.2-api</code>. BTW: there are errors in your configuration, like the double <code>log4j.rootLogger</code> key."},{"owner":{"account_id":23754979,"reputation":63,"user_id":17771205,"display_name":"Pradeep Kumar"},"score":0,"creation_date":1642237410,"post_id":70719454,"comment_id":125021287,"body_markdown":"@PiotrP.Karwasz,thanks for pointing double log4j.rootLogger.","body":"@PiotrP.Karwasz,thanks for pointing double log4j.rootLogger."},{"owner":{"account_id":23754979,"reputation":63,"user_id":17771205,"display_name":"Pradeep Kumar"},"score":0,"creation_date":1642238055,"post_id":70719454,"comment_id":125021394,"body_markdown":"@PiotrP.Karwasz, i am working in legacy application there we migrating log4j1.x to log4j-2.17. In application we are using some custom log level(let say-custom). for this we want print all the higher level the  like .. warn, error,and Fatal include custom. when i given the threshold value to Custom,  logs is not printing. is there any configuration we missing? any help is appreciated.","body":"@PiotrP.Karwasz, i am working in legacy application there we migrating log4j1.x to log4j-2.17. In application we are using some custom log level(let say-custom). for this we want print all the higher level the  like .. warn, error,and Fatal include custom. when i given the threshold value to Custom,  logs is not printing. is there any configuration we missing? any help is appreciated."}],"owner":{"account_id":23754979,"reputation":63,"user_id":17771205,"display_name":"Pradeep Kumar"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":137,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1642516435,"answer_count":0,"score":1,"last_activity_date":1642229763,"creation_date":1642229763,"question_id":70719454,"body_markdown":"I have updated the logging jars from log4j1 to log4j2.17. However I am not able to convert my log4j.properties file into log4j2..properties file. Below is my log4j.properties file\r\n\r\n    \r\n    log4j.loggerFactory=com.test.control.log.MyLoggerFactory\r\n    \r\n    log4j.appender.STDOUT=org.apache.log4j.ConsoleAppender\r\n    log4j.appender.STDOUT.Threshold = ERROR\r\n    log4j.appender.STDOUT.layout = org.apache.log4j.PatternLayout\r\n    log4j.appender.STDOUT.layout.ConversionPattern = [%d] %-5p [%t] %C %M - %m%n\r\n    \r\n    log4j.rootLogger=DEBUG,STDOUT\r\n    log4j.rootLogger=ERROR,CUSTOM\r\n    log4j.logger.com.test = CUSTOM\r\n    log4j.appender.MY_APP_APPENDER = org.apache.log4j.RollingFileAppender\r\n    log4j.appender.MY_APP_APPENDER.Threshold = CUSTOM#com.test.control.log.LogLevel\r\n    log4j.appender.MY_APP_APPENDER.layout = org.apache.log4j.PatternLayout\r\n    log4j.appender.MY_APP_APPENDER.layout.ConversionPattern = [%d] %-5p [%t] %C %m%n\r\n    log4j.appender.MY_APP_APPENDER.File = myApp.log\r\n    log4j.appender.MY_APP_APPENDER.append = true\r\n\r\nI need to migrate from log4j to log4j2 and I need to change properties file as above. Maybe somebody can help me to understand how would be log4j2.properties look like.\t\t\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","title":"How to convert the log4j.properties file to log4j2.properties file","body":"<p>I have updated the logging jars from log4j1 to log4j2.17. However I am not able to convert my log4j.properties file into log4j2..properties file. Below is my log4j.properties file</p>\n<pre><code>log4j.loggerFactory=com.test.control.log.MyLoggerFactory\n\nlog4j.appender.STDOUT=org.apache.log4j.ConsoleAppender\nlog4j.appender.STDOUT.Threshold = ERROR\nlog4j.appender.STDOUT.layout = org.apache.log4j.PatternLayout\nlog4j.appender.STDOUT.layout.ConversionPattern = [%d] %-5p [%t] %C %M - %m%n\n\nlog4j.rootLogger=DEBUG,STDOUT\nlog4j.rootLogger=ERROR,CUSTOM\nlog4j.logger.com.test = CUSTOM\nlog4j.appender.MY_APP_APPENDER = org.apache.log4j.RollingFileAppender\nlog4j.appender.MY_APP_APPENDER.Threshold = CUSTOM#com.test.control.log.LogLevel\nlog4j.appender.MY_APP_APPENDER.layout = org.apache.log4j.PatternLayout\nlog4j.appender.MY_APP_APPENDER.layout.ConversionPattern = [%d] %-5p [%t] %C %m%n\nlog4j.appender.MY_APP_APPENDER.File = myApp.log\nlog4j.appender.MY_APP_APPENDER.append = true\n</code></pre>\n<p>I need to migrate from log4j to log4j2 and I need to change properties file as above. Maybe somebody can help me to understand how would be log4j2.properties look like.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":1324952,"reputation":5977,"user_id":1270000,"accept_rate":100,"display_name":"sorifiend"},"score":0,"creation_date":1642228900,"post_id":70719334,"comment_id":125020135,"body_markdown":"The code that does the animations needs to dispose the JFrame or make it invisible `setVisible(false);` once the animation is complete","body":"The code that does the animations needs to dispose the JFrame or make it invisible <code>setVisible(false);</code> once the animation is complete"}],"answers":[{"tags":[],"owner":{"account_id":23943737,"reputation":312,"user_id":17936388,"display_name":"esramish"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1642229441,"creation_date":1642228815,"answer_id":70719381,"question_id":70719334,"body_markdown":"Does it work to call [dispose](https://docs.oracle.com/javase/8/docs/api/java/awt/Window.html#dispose--) or [setVisible](https://docs.oracle.com/javase/8/docs/api/java/awt/Window.html#setVisible-boolean- ) on the RainfallStudy instance? For example:\r\n\r\n```\r\nRainfallStudy rs = new RainfallStudy();\r\nrs.setVisible(false);\r\n```","title":"How to close a constructor frame?","body":"<p>Does it work to call <a href=\"https://docs.oracle.com/javase/8/docs/api/java/awt/Window.html#dispose--\" rel=\"nofollow noreferrer\">dispose</a> or <a href=\"https://docs.oracle.com/javase/8/docs/api/java/awt/Window.html#setVisible-boolean-\" rel=\"nofollow noreferrer\">setVisible</a> on the RainfallStudy instance? For example:</p>\n<pre><code>RainfallStudy rs = new RainfallStudy();\nrs.setVisible(false);\n</code></pre>\n"}],"owner":{"account_id":20709360,"reputation":1,"user_id":15206363,"display_name":"D2K6"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1642229441,"creation_date":1642227872,"question_id":70719334,"body_markdown":"    public class RainfallStudy extends JFrame{\r\n\t/**\r\n\t * Declare global variables\r\n\t */\r\n\tint x = 20, y = 567; //starting location for the title \r\n\tint xSpeed = 20, ySpeed = 20; // the speed for x and y directions\r\n\tint delay = 20; // to slow down my title \r\n\tImageIcon BackGnd, pic; // variables for the pictures\r\n\r\n\t/**\r\n\t * Constructor to build the frame\r\n\t */\r\n\tpublic RainfallStudy() {\r\n\t\t// this builds a window with a title\r\n\t\tsuper(&quot;Weather Report&quot;);\r\n\t\tsetSize(1000,567);\r\n\r\n\t\t//loading the picture files\r\n\t\tBackGnd = new ImageIcon (&quot;weatherBack.png&quot;);\r\n\t\tpic = new ImageIcon (&quot;weatherIcon.png&quot;);\r\n\r\n\t\tsetResizable(false);\r\n\t\tsetVisible(true);\r\n\t\tsetDefaultCloseOperation(EXIT_ON_CLOSE);\r\n\t}\r\n\r\nThis is how I made my frame, I then did my animations in `public void paint(Graphics g)`.\r\n\r\nnow after I call it in the main using `new RainfallStudy();`, the window stays open after the animation is done, how can I manually close it?","title":"How to close a constructor frame?","body":"<pre><code>public class RainfallStudy extends JFrame{\n/**\n * Declare global variables\n */\nint x = 20, y = 567; //starting location for the title \nint xSpeed = 20, ySpeed = 20; // the speed for x and y directions\nint delay = 20; // to slow down my title \nImageIcon BackGnd, pic; // variables for the pictures\n\n/**\n * Constructor to build the frame\n */\npublic RainfallStudy() {\n    // this builds a window with a title\n    super(&quot;Weather Report&quot;);\n    setSize(1000,567);\n\n    //loading the picture files\n    BackGnd = new ImageIcon (&quot;weatherBack.png&quot;);\n    pic = new ImageIcon (&quot;weatherIcon.png&quot;);\n\n    setResizable(false);\n    setVisible(true);\n    setDefaultCloseOperation(EXIT_ON_CLOSE);\n}\n</code></pre>\n<p>This is how I made my frame, I then did my animations in <code>public void paint(Graphics g)</code>.</p>\n<p>now after I call it in the main using <code>new RainfallStudy();</code>, the window stays open after the animation is done, how can I manually close it?</p>\n"},{"tags":["java","android","sqlite","sql-update","android-sqlite"],"answers":[{"tags":[],"owner":{"account_id":14535244,"reputation":161554,"user_id":10498828,"display_name":"forpas"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1641846325,"creation_date":1641820586,"answer_id":70653020,"question_id":70650997,"body_markdown":"You can use a subquery in the `WHERE` clause argument of the `update()` method, so that there is no need for a `SELECT` query to retrieve the last `id`:\r\n\r\n    public static void addScore(int studentScore) {\r\n        String table = DataContract.StudentTable.TABLE_NAME1;\r\n        String id = DataContract.StudentTable.COLUMN_ID;\r\n\r\n        ContentValues cv = new ContentValues();\r\n        cv.put(DataContract.StudentTable.COLUMN_SCORE, studentScore);\r\n        db.update(\r\n            table, \r\n            cv, \r\n            id + &quot; = (SELECT MAX(&quot; + id + &quot;) FROM &quot; + table + &quot;)&quot;, \r\n            null\r\n        );\r\n        db.close();\r\n    }","title":"How to add a value of a variable in a sqlite database existing column?","body":"<p>You can use a subquery in the <code>WHERE</code> clause argument of the <code>update()</code> method, so that there is no need for a <code>SELECT</code> query to retrieve the last <code>id</code>:</p>\n<pre><code>public static void addScore(int studentScore) {\n    String table = DataContract.StudentTable.TABLE_NAME1;\n    String id = DataContract.StudentTable.COLUMN_ID;\n\n    ContentValues cv = new ContentValues();\n    cv.put(DataContract.StudentTable.COLUMN_SCORE, studentScore);\n    db.update(\n        table, \n        cv, \n        id + &quot; = (SELECT MAX(&quot; + id + &quot;) FROM &quot; + table + &quot;)&quot;, \n        null\n    );\n    db.close();\n}\n</code></pre>\n"}],"owner":{"account_id":23838408,"reputation":37,"user_id":17843835,"display_name":"fotonio"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":321,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":70653020,"answer_count":1,"score":1,"last_activity_date":1642229288,"creation_date":1641810821,"question_id":70650997,"body_markdown":"I would like to ask for some help with my android code. I am trying to develop a quiz app using SQLite.My Database has two Tables. One for Students Information and one for the Questions and answers. Students Information such as Name, Student ID e.c. are inputs through textViews . After taking the Quiz in the Result activity the Score shown up. But i also want this score to be kept in a column COLUMN_SCORE of Student_trable.\r\n\r\nI tried to update the table using this method:\r\n\r\n     `public static void addScore (int StudentScore){\r\n\r\n        ContentValues cv = new ContentValues();\r\n        cv.put(DataContract.StudentTable.COLUMN_SCORE, StudentScore);\r\n\r\n        Cursor c = db.rawQuery(&quot;SELECT * FROM student_info ORDER BY id DESC LIMIT 1 &quot; ,null);\r\n\r\n        db.update(DataContract.StudentTable.TABLE_NAME1, cv, DataContract.StudentTable.COLUMN_SCORE +  &quot;= ?&quot;, new String[] {String.valueOf (c)});\r\n        db.close();`\r\n\r\nbut i failed. Any suggestion please? \r\nHere is some more details of my code:\r\n\r\n","title":"How to add a value of a variable in a sqlite database existing column?","body":"<p>I would like to ask for some help with my android code. I am trying to develop a quiz app using SQLite.My Database has two Tables. One for Students Information and one for the Questions and answers. Students Information such as Name, Student ID e.c. are inputs through textViews . After taking the Quiz in the Result activity the Score shown up. But i also want this score to be kept in a column COLUMN_SCORE of Student_trable.</p>\n<p>I tried to update the table using this method:</p>\n<pre><code> `public static void addScore (int StudentScore){\n\n    ContentValues cv = new ContentValues();\n    cv.put(DataContract.StudentTable.COLUMN_SCORE, StudentScore);\n\n    Cursor c = db.rawQuery(&quot;SELECT * FROM student_info ORDER BY id DESC LIMIT 1 &quot; ,null);\n\n    db.update(DataContract.StudentTable.TABLE_NAME1, cv, DataContract.StudentTable.COLUMN_SCORE +  &quot;= ?&quot;, new String[] {String.valueOf (c)});\n    db.close();`\n</code></pre>\n<p>but i failed. Any suggestion please?\nHere is some more details of my code:</p>\n"},{"tags":["java","android","android-sqlite","android-drawable"],"answers":[{"tags":[],"owner":{"account_id":12044851,"reputation":735,"user_id":8810290,"display_name":"Mobin Yardim"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1642003542,"creation_date":1642003542,"answer_id":70684726,"question_id":70684441,"body_markdown":"Drawable id is an integer and it&#39;s not a string that you can convert to integer your code must be this:\r\n\r\n```\r\nContext context =tvImgQuest.getContext();\r\nint id = context.getResources().getIdentifier(name, &quot;drawable&quot;, context .getPackageName());\r\ntvImgQuest.setImageResource(id);\r\n```\r\n","title":"How can i get an image from drawable using image name stored in SQLite?","body":"<p>Drawable id is an integer and it's not a string that you can convert to integer your code must be this:</p>\n<pre><code>Context context =tvImgQuest.getContext();\nint id = context.getResources().getIdentifier(name, &quot;drawable&quot;, context .getPackageName());\ntvImgQuest.setImageResource(id);\n</code></pre>\n"}],"owner":{"account_id":23838408,"reputation":37,"user_id":17843835,"display_name":"fotonio"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":101,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70684726,"answer_count":1,"score":0,"last_activity_date":1642229209,"creation_date":1642002320,"question_id":70684441,"body_markdown":" I am trying to develop an Android quiz app using SQLite.My Database has a table containing   the Questions and answers. Questions may have text or images. So i put images in drawable and the name in a column of Quiz table. I tried to load the content of the image (using the value of that column) in the ImageView associated to each one of my quiz questions but im not sure if i used the right code.I don&#39;t want to use blobs. Any suggestion ? Any answer will be much appreciated. Thank you.\r\n\r\n That&#39;s what i thought to write so to call the image from db and drawable:\r\n\r\n     `String  y =  &quot;R.drawable.&quot;+currentQuestion.getImage();\r\n               tvImgQuest.setImageResource(Integer.parseInt (y));`\r\n\r\n","title":"How can i get an image from drawable using image name stored in SQLite?","body":"<p>I am trying to develop an Android quiz app using SQLite.My Database has a table containing   the Questions and answers. Questions may have text or images. So i put images in drawable and the name in a column of Quiz table. I tried to load the content of the image (using the value of that column) in the ImageView associated to each one of my quiz questions but im not sure if i used the right code.I don't want to use blobs. Any suggestion ? Any answer will be much appreciated. Thank you.</p>\n<p>That's what i thought to write so to call the image from db and drawable:</p>\n<pre><code> `String  y =  &quot;R.drawable.&quot;+currentQuestion.getImage();\n           tvImgQuest.setImageResource(Integer.parseInt (y));`\n</code></pre>\n"},{"tags":["java","android","android-studio","radio-button","android-sqlite"],"comments":[{"owner":{"account_id":14102121,"reputation":625,"user_id":10187218,"display_name":"Yasin Ege"},"score":0,"creation_date":1641413794,"post_id":70598426,"comment_id":124801593,"body_markdown":"We need to show error, can you share the error on console ?","body":"We need to show error, can you share the error on console ?"},{"owner":{"account_id":23838408,"reputation":37,"user_id":17843835,"display_name":"fotonio"},"score":0,"creation_date":1641414055,"post_id":70598426,"comment_id":124801695,"body_markdown":"There is no error in console...just not work...button is still visible with no text.","body":"There is no error in console...just not work...button is still visible with no text."},{"owner":{"account_id":23838408,"reputation":37,"user_id":17843835,"display_name":"fotonio"},"score":0,"creation_date":1641414362,"post_id":70598426,"comment_id":124801776,"body_markdown":"If i put the cursor on code the pop up box shows that: Condition &#39;DataContract.QuestionTable.COLUMN_ANSWER4 == null&#39; is always &#39;false&#39;","body":"If i put the cursor on code the pop up box shows that: Condition &#39;DataContract.QuestionTable.COLUMN_ANSWER4 == null&#39; is always &#39;false&#39;"}],"answers":[{"tags":[],"owner":{"account_id":6077735,"reputation":52951,"user_id":4744514,"accept_rate":96,"display_name":"MikeT"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1641513701,"creation_date":1641446150,"answer_id":70602784,"question_id":70598426,"body_markdown":"Here&#39;s a demo with a suggested technique, considering the limited amount of code posted with the question.\r\n\r\nThis utilises two tables to conform with a normalised approach. A table for the questions and a table for answers. Each answer (the Children) has a link/map/relationship/association with a single Question (the Parent). To prevent referential integrity issues a Foreign Key constraint has been used.\r\n\r\nFirst a few POJO&#39;s for the **Questions**, the **Answers** and **QuestionWithAnswers** (i.e. it&#39;s answers)\r\n\r\n**QuestionPOJO**\r\n\r\n    class QuestionPOJO {\r\n        long questionId;\r\n        String questionText;\r\n    \r\n        public QuestionPOJO(long questionId, String questionText) {\r\n            this.questionId = questionId;\r\n            this.questionText = questionText;\r\n        }\r\n    \r\n        public long getQuestionId() {\r\n            return questionId;\r\n        }\r\n    \r\n        public void setQuestionId(long questionId) {\r\n            this.questionId = questionId;\r\n        }\r\n    \r\n        public String getQuestionText() {\r\n            return questionText;\r\n        }\r\n    \r\n        public void setQuestionText(String questionText) {\r\n            this.questionText = questionText;\r\n        }\r\n    }\r\n\r\n**AnswerPOJO**\r\n\r\n    class AnswerPOJO {\r\n        long answerId;\r\n        long questionMap;\r\n        String answerText;\r\n        boolean correct = false;\r\n    \r\n        public AnswerPOJO(long answerid, long questionMap, String answerText, boolean correct) {\r\n            this.answerId = answerid;\r\n            this.questionMap = questionMap;\r\n            this.answerText = answerText;\r\n            this.correct = correct;\r\n        }\r\n    \r\n        public long getAnswerId() {\r\n            return answerId;\r\n        }\r\n    \r\n        public void setAnswerId(long answerId) {\r\n            this.answerId = answerId;\r\n        }\r\n    \r\n        public long getQuestionMap() {\r\n            return questionMap;\r\n        }\r\n    \r\n        public void setQuestionMap(long questionMap) {\r\n            this.questionMap = questionMap;\r\n        }\r\n    \r\n        public boolean isCorrect() {\r\n            return correct;\r\n        }\r\n    \r\n        public void setCorrect(boolean correct) {\r\n            this.correct = correct;\r\n        }\r\n    \r\n        public String getAnswerText() {\r\n            return answerText;\r\n        }\r\n    \r\n        public void setAnswerText(String answerText) {\r\n            this.answerText = answerText;\r\n        }\r\n    }\r\n\r\nand **QuestionWithAnswerPOJO**\r\n\r\n    class QuestionWithAnswersPOJO {\r\n        QuestionPOJO question;\r\n        ArrayList&lt;AnswerPOJO&gt; answers = new ArrayList&lt;&gt;();\r\n    \r\n        public QuestionWithAnswersPOJO(QuestionPOJO question, List&lt;AnswerPOJO&gt; answers) {\r\n            this.question = question;\r\n            this.answers.clear();\r\n            this.answers.addAll(answers);\r\n        }\r\n    \r\n        public QuestionPOJO getQuestion() {\r\n            return question;\r\n        }\r\n    \r\n        public void setQuestion(QuestionPOJO question) {\r\n            this.question = question;\r\n        }\r\n    \r\n        public ArrayList&lt;AnswerPOJO&gt; getAnswers() {\r\n            return answers;\r\n        }\r\n    \r\n        public void setAnswers(ArrayList&lt;AnswerPOJO&gt; answers) {\r\n            this.answers = answers;\r\n        }\r\n    }\r\n\r\nNow the DatabaseHelper, that handles all the database activity. Including methods to add and get Questions and the Answers and notably to get the Answers that belong to a question.\r\n\r\n    class DatabaseHelper extends SQLiteOpenHelper {\r\n    \r\n        public static final String DATABASE_NAME = &quot;questions.db&quot;;\r\n        public static final int DATABASE_VERSION = 1;\r\n    \r\n        public static final String QUESTION_TABLE = &quot;question&quot;;\r\n        public static final String QUESTION_ID_COLUMN = BaseColumns._ID;\r\n        public static final String QUESTION_TEXT_COLUMN = &quot;question_text&quot;;\r\n        public static final String ANSWER_TABLE = &quot;answer&quot;;\r\n        public static final String ANSWER_ID_COLUMN = BaseColumns._ID;\r\n        public static final String ANSWER_TEXT_COLUMN = &quot;answer_text&quot;;\r\n        public static final String ANSWER_QUESTION_MAP_COLUMN = &quot;question_map&quot;;\r\n        public static final String ANSWER_CORRECT_COLUMN = &quot;correct&quot;;\r\n    \r\n        private static volatile DatabaseHelper instance = null;\r\n        private DatabaseHelper(Context context) {\r\n            super(context,DATABASE_NAME,null,DATABASE_VERSION);\r\n        }\r\n    \r\n        private static SQLiteDatabase db = null;\r\n    \r\n        public static DatabaseHelper getInstance(Context context, boolean forceOpen) {\r\n            if (instance == null) {\r\n                instance = new DatabaseHelper(context);\r\n            }\r\n            if (forceOpen) {\r\n                db = instance.getWritableDatabase();\r\n            }\r\n            return instance;\r\n        }\r\n        @Override\r\n        public void onCreate(SQLiteDatabase db) {\r\n    \r\n            db.execSQL(&quot;CREATE TABLE IF NOT EXISTS &quot; + QUESTION_TABLE + &quot;(&quot; +\r\n                    QUESTION_ID_COLUMN + &quot; INTEGER PRIMARY KEY,&quot; +\r\n                    QUESTION_TEXT_COLUMN + &quot; TEXT&quot; +\r\n                    &quot;);&quot;);\r\n            db.execSQL(&quot;CREATE TABLE IF NOT EXISTS &quot; + ANSWER_TABLE + &quot;(&quot; +\r\n                    ANSWER_ID_COLUMN + &quot; INTEGER PRIMARY KEY,&quot; +\r\n                    ANSWER_TEXT_COLUMN + &quot; TEXT,&quot; +\r\n                    ANSWER_QUESTION_MAP_COLUMN + &quot; INTEGER REFERENCES &quot; + QUESTION_TABLE + &quot;(&quot; + QUESTION_ID_COLUMN + &quot;) ON DELETE CASCADE ON UPDATE CASCADE,&quot; +\r\n                    ANSWER_CORRECT_COLUMN + &quot; INTEGER DEFAULT 0 /* false */&quot; +\r\n                    &quot;);&quot;);\r\n        }\r\n    \r\n        @Override\r\n        public void onUpgrade(SQLiteDatabase db, int i, int i1) {\r\n    \r\n        }\r\n    \r\n        // Fully comprehensive Question insert\r\n        public long insertQuestion(Long questionId, String questionText) {\r\n            init_db_AsWriteableDatabase();\r\n            long rv = -2;\r\n            ContentValues cv = new ContentValues();\r\n            if (questionId != null &amp;&amp; questionId &gt; 0) {\r\n                cv.put(QUESTION_ID_COLUMN,questionId);\r\n            }\r\n            if (questionText != null &amp;&amp; questionText.length() &gt; 0) {\r\n                cv.put(QUESTION_TEXT_COLUMN,questionText);\r\n            }\r\n            if (cv.size() &gt; 0) {\r\n                rv = db.insert(QUESTION_TABLE,null,cv);\r\n            }\r\n            return rv;\r\n        }\r\n    \r\n        // Concise Question insert\r\n        public long insertQuestion(String questionText) {\r\n            return insertQuestion(null,questionText);\r\n        }\r\n    \r\n        // Fully comprehensive Answer insert\r\n        public long insertAnswer(Long answerId, long questionMap, String answerText, boolean correct) {\r\n            init_db_AsWriteableDatabase();\r\n            long rv = -2;\r\n            ContentValues cv = new ContentValues();\r\n            if (answerId != null &amp;&amp; answerId &gt; 0) {\r\n                cv.put(ANSWER_ID_COLUMN,answerId);\r\n            }\r\n            if (answerText != null &amp;&amp; answerText.length() &gt; 0) {\r\n                cv.put(ANSWER_CORRECT_COLUMN,correct);\r\n                cv.put(ANSWER_TEXT_COLUMN,answerText);\r\n                cv.put(ANSWER_QUESTION_MAP_COLUMN,questionMap);\r\n                rv = db.insert(ANSWER_TABLE,null,cv);\r\n            }\r\n            return rv;\r\n        }\r\n    \r\n        // long concise Answer insert\r\n        public long insertAnswer(long questionMap, String answerText, boolean correct) {\r\n            return insertAnswer(null,questionMap,answerText,correct);\r\n        }\r\n        public long insertAnswer(long questionMap, String answerText) {\r\n            return insertAnswer(questionMap,answerText,false);\r\n        }\r\n        // short concise Answer insert\r\n        private void init_db_AsWriteableDatabase() {\r\n            if (db == null) {\r\n                db = this.getWritableDatabase();\r\n            }\r\n        }\r\n    \r\n    \r\n        @SuppressLint(&quot;Range&quot;)\r\n        public QuestionPOJO getQuestionById(long questionId) {\r\n            QuestionPOJO rv = null;\r\n            init_db_AsWriteableDatabase();\r\n            Cursor csr = db.query(QUESTION_TABLE,null,QUESTION_ID_COLUMN+&quot;=?&quot;,new String[]{String.valueOf(questionId)},null,null,null);\r\n            if (csr.moveToNext()) {\r\n                rv = new QuestionPOJO(csr.getLong(csr.getColumnIndex(QUESTION_ID_COLUMN)),csr.getString(csr.getColumnIndex(QUESTION_TEXT_COLUMN)));\r\n            }\r\n            csr.close();\r\n            return rv;\r\n        }\r\n    \r\n        @SuppressLint(&quot;Range&quot;)\r\n        public List&lt;AnswerPOJO&gt; getAnswersForQuestion(long questionId, boolean onlyCorrect) {\r\n            init_db_AsWriteableDatabase();\r\n            ArrayList&lt;AnswerPOJO&gt; rv = new ArrayList&lt;&gt;();\r\n            StringBuilder whereClause = new StringBuilder();\r\n            whereClause.append(ANSWER_QUESTION_MAP_COLUMN + &quot;=?&quot;);\r\n            if (onlyCorrect) {\r\n                whereClause.append(&quot; AND &quot;).append(ANSWER_CORRECT_COLUMN);\r\n            }\r\n            Cursor csr = db.query(ANSWER_TABLE,null,whereClause.toString(),new String[]{String.valueOf(questionId)},null,null,null);\r\n            while (csr.moveToNext()) {\r\n                rv.add(\r\n                    new AnswerPOJO(\r\n                            csr.getLong(csr.getColumnIndex(ANSWER_ID_COLUMN)),\r\n                            questionId,\r\n                            csr.getString(csr.getColumnIndex(ANSWER_TEXT_COLUMN)),\r\n                            csr.getInt(csr.getColumnIndex(ANSWER_CORRECT_COLUMN)) &gt; 0\r\n                    )\r\n                );\r\n            }\r\n            csr.close();\r\n            return rv;\r\n        }\r\n    }\r\n\r\nFinally to put it all together and activity that has a layout for 4 radio buttons along with the associated answer as a TextView.\r\n\r\nSo the layout is:-\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n        android:orientation=&quot;vertical&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;\r\n        tools:context=&quot;.MainActivity&quot;&gt;\r\n    \r\n        &lt;TextView\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:text=&quot;Hello World!&quot;&gt;\r\n        &lt;/TextView&gt;\r\n    \r\n        &lt;RadioGroup\r\n            android:id=&quot;@+id/question_radiogroup&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;wrap_content&quot;&gt;\r\n    \r\n            &lt;RadioButton\r\n                android:id=&quot;@+id/answer1_radioButton&quot;\r\n                android:layout_width=&quot;wrap_content&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                tools:ignore=&quot;DuplicateSpeakableTextCheck&quot;&gt;&lt;/RadioButton&gt;\r\n            &lt;TextView\r\n                android:id=&quot;@+id/answer1_textview&quot;\r\n                android:layout_width=&quot;wrap_content&quot;\r\n                android:layout_height=&quot;wrap_content&quot;&gt;\r\n            &lt;/TextView&gt;\r\n            &lt;RadioButton\r\n                android:id=&quot;@+id/answer2_radioButton&quot;\r\n                android:layout_width=&quot;wrap_content&quot;\r\n                android:layout_height=&quot;wrap_content&quot;&gt;\r\n            &lt;/RadioButton&gt;\r\n            &lt;TextView\r\n                android:id=&quot;@+id/answer2_textview&quot;\r\n                android:layout_width=&quot;wrap_content&quot;\r\n                android:layout_height=&quot;wrap_content&quot;&gt;\r\n            &lt;/TextView&gt;\r\n            &lt;RadioButton\r\n                android:id=&quot;@+id/answer3_radioButton&quot;\r\n                android:layout_width=&quot;wrap_content&quot;\r\n                android:layout_height=&quot;wrap_content&quot;&gt;\r\n            &lt;/RadioButton&gt;\r\n            &lt;TextView\r\n                android:id=&quot;@+id/answer3_textview&quot;\r\n                android:layout_width=&quot;wrap_content&quot;\r\n                android:layout_height=&quot;wrap_content&quot;&gt;\r\n            &lt;/TextView&gt;\r\n    \r\n            &lt;RadioButton\r\n                android:id=&quot;@+id/answer4_radioButton&quot;\r\n                android:layout_width=&quot;wrap_content&quot;\r\n                android:layout_height=&quot;wrap_content&quot;&gt;\r\n            &lt;/RadioButton&gt;\r\n            &lt;TextView\r\n                android:id=&quot;@+id/answer4_textview&quot;\r\n                android:layout_width=&quot;wrap_content&quot;\r\n                android:layout_height=&quot;wrap_content&quot;&gt;\r\n            &lt;/TextView&gt;\r\n        &lt;/RadioGroup&gt;\r\n    \r\n    &lt;/LinearLayout&gt;\r\n\r\n- simple enough to show how hiding the buttons depending upon the number of answers (or a limit according to the number of Buttons/Textviews)\r\n\r\nAnd the activity to demonstrate:-\r\n\r\n    public class MainActivity extends AppCompatActivity {\r\n        DatabaseHelper dbHelper;\r\n        RadioButton[] radiobuttons = new RadioButton[4];\r\n        TextView[] answerTexts = new TextView[4];\r\n        QuestionWithAnswersPOJO currentQuestionWithAnswers;\r\n    \r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_main);\r\n    \r\n            /*\r\n                prepare Radion Buttons and associated TextViews\r\n             */\r\n            radiobuttons[0] = this.findViewById(R.id.answer1_radioButton);\r\n            radiobuttons[1] = this.findViewById(R.id.answer2_radioButton);\r\n            radiobuttons[2] = this.findViewById(R.id.answer3_radioButton);\r\n            radiobuttons[3] = this.findViewById(R.id.answer4_radioButton);\r\n            answerTexts[0] = this.findViewById(R.id.answer1_textview);\r\n            answerTexts[1] = this.findViewById(R.id.answer2_textview);\r\n            answerTexts[2] = this.findViewById(R.id.answer3_textview);\r\n            answerTexts[3] = this.findViewById(R.id.answer4_textview);\r\n    \r\n            /*\r\n                Prepare to use Database\r\n             */\r\n            dbHelper = DatabaseHelper.getInstance(this,true);\r\n            SQLiteDatabase db = dbHelper.getWritableDatabase();\r\n            /* Clear any existing data for consistent results */\r\n            db.delete(DatabaseHelper.ANSWER_TABLE,null,null);\r\n            db.delete(DatabaseHelper.QUESTION_TABLE,null,null);\r\n            /* Add some demo data  1 question with 5 answers (comment out to reduce number of answers)*/\r\n            long q1id = dbHelper.insertQuestion(&quot;What is 1 + 1&quot;);\r\n            dbHelper.insertAnswer(q1id,&quot;It is 1&quot;);\r\n            dbHelper.insertAnswer(q1id,&quot;it is 2&quot;, true);\r\n            dbHelper.insertAnswer(q1id,&quot;It is 3&quot;);\r\n            dbHelper.insertAnswer(q1id,&quot;It is 4&quot;);\r\n            dbHelper.insertAnswer(q1id,&quot;It is something Else&quot;); // will be ignored because only 4 radio buttons\r\n    \r\n            /* Get the question with the answers, however many ot has */\r\n            currentQuestionWithAnswers = new QuestionWithAnswersPOJO(dbHelper.getQuestionById(q1id),dbHelper.getAnswersForQuestion(q1id,false));\r\n            /* setup (refresh) the radio buttons and textviews */\r\n            getAndSetRadioButtons(currentQuestionWithAnswers);\r\n        }\r\n    \r\n        /*\r\n            Does as it says\r\n         */\r\n        private void getAndSetRadioButtons(QuestionWithAnswersPOJO qwa) {\r\n            // Clear All\r\n    \r\n            for (int i=0;i &lt; radiobuttons.length; i++) {\r\n                radiobuttons[i].setVisibility(View.GONE);\r\n                answerTexts[i].setText(&quot;&quot;);\r\n                answerTexts[i].setVisibility(View.GONE);\r\n            }\r\n            /* show only the least of answers/radio buttons */\r\n            int numberToShow = radiobuttons.length;\r\n            if (qwa.answers.size() &lt; radiobuttons.length) {\r\n                numberToShow = qwa.answers.size();\r\n            }\r\n            int i = 0;\r\n            for(AnswerPOJO a: qwa.answers) {\r\n                if (i &lt; numberToShow) {\r\n                    radiobuttons[i].setVisibility(View.VISIBLE);\r\n                    answerTexts[i].setVisibility(View.VISIBLE);\r\n                    answerTexts[i++].setText(a.answerText);\r\n                } else {\r\n                    /* nothing more to do so early break out of the loop */\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n**Results**\r\n\r\n\r\n**Result 1 - run with the 5 answers *(see comments re 5th answer)***\r\n\r\n[![enter image description here][1]][1]\r\n\r\n**Result 2 - All bar 1 answer comment out so the question has just the 1 answer**\r\n\r\nThe code used:-\r\n\r\n        long q1id = dbHelper.insertQuestion(&quot;What is 1 + 1&quot;);\r\n        dbHelper.insertAnswer(q1id,&quot;It is 1&quot;);\r\n        //dbHelper.insertAnswer(q1id,&quot;it is 2&quot;, true);\r\n        //dbHelper.insertAnswer(q1id,&quot;It is 3&quot;);\r\n        //dbHelper.insertAnswer(q1id,&quot;It is 4&quot;);\r\n        //dbHelper.insertAnswer(q1id,&quot;It is something Else&quot;); // will be ignored because only 4 radio buttons\r\n\r\nThe display :-\r\n\r\n[![enter image description here][2]][2]\r\n\r\n**Result 3 - first and 5th answers only inserted**\r\n\r\n[![enter image description here][3]][3]\r\n\r\nand so on.\r\n\r\n----\r\n\r\nAdditional after code has been posted.\r\n\r\n***Additional Answer as code has now been added.***\r\n\r\nYou say:-\r\n\r\n&gt; Tried to use:\r\n    ```if (DataContract.QuestionTable.COLUMN_ANSWER4.isEmpty ()){ \r\n    radioButton4.setVisibility (View.INVISIBLE); }```\r\nbut does not seem to work.\r\n\r\nIf **DataContract.QuestionTable.COLUMN_ANSWER4** were empty then would be facing more serious issues as it is the **column name**. \r\n\r\nYou should be checking for the contents of the column which has been retrieved from DB and placed into **currentQuestion**, for the question being inspected.\r\n\r\nI believe that using (old code commented out):-\r\n\r\n            radioButton1.setText(currentQuestion.getAnswer1 ());\r\n            radioButton2.setText(currentQuestion.getAnswer2 ());\r\n            radioButton3.setText(currentQuestion.getAnswer3 ());\r\n            radioButton4.setText(currentQuestion.getAnswer4 ());\r\n            if(currentQuestion.getAnswer4() == null || currentQuestion.getAnswer4().isEmpty()) {\r\n                radioButton4.setVisibility(View.INVISIBLE);\r\n            } else {\r\n                radioButton4.setVisibility(View.VISIBLE); // just in case it is INVISIBLE\r\n                radioButton4.setText(currentQuestion.getAnswer4());\r\n            }\r\n            /*\r\n            if (DataContract.QuestionTable.COLUMN_ANSWER4.isEmpty ()){\r\n                radioButton4.setVisibility (View.INVISIBLE);\r\n            } else {\r\n                radioButton4.setText(currentQuestion.getAnswer4 ());\r\n            }\r\n             */\r\n\r\nWill resolve this issue. e.g. at Q3:-\r\n\r\n[![enter image description here][4]][4]\r\n\r\n\r\n  [4]: https://i.stack.imgur.com/7CpkK.png\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/k2Kfz.png\r\n  [2]: https://i.stack.imgur.com/j3384.png\r\n  [3]: https://i.stack.imgur.com/HGgZx.png\r\n","title":"I need to hide a radio button in a quiz app android","body":"<p>Here's a demo with a suggested technique, considering the limited amount of code posted with the question.</p>\n<p>This utilises two tables to conform with a normalised approach. A table for the questions and a table for answers. Each answer (the Children) has a link/map/relationship/association with a single Question (the Parent). To prevent referential integrity issues a Foreign Key constraint has been used.</p>\n<p>First a few POJO's for the <strong>Questions</strong>, the <strong>Answers</strong> and <strong>QuestionWithAnswers</strong> (i.e. it's answers)</p>\n<p><strong>QuestionPOJO</strong></p>\n<pre><code>class QuestionPOJO {\n    long questionId;\n    String questionText;\n\n    public QuestionPOJO(long questionId, String questionText) {\n        this.questionId = questionId;\n        this.questionText = questionText;\n    }\n\n    public long getQuestionId() {\n        return questionId;\n    }\n\n    public void setQuestionId(long questionId) {\n        this.questionId = questionId;\n    }\n\n    public String getQuestionText() {\n        return questionText;\n    }\n\n    public void setQuestionText(String questionText) {\n        this.questionText = questionText;\n    }\n}\n</code></pre>\n<p><strong>AnswerPOJO</strong></p>\n<pre><code>class AnswerPOJO {\n    long answerId;\n    long questionMap;\n    String answerText;\n    boolean correct = false;\n\n    public AnswerPOJO(long answerid, long questionMap, String answerText, boolean correct) {\n        this.answerId = answerid;\n        this.questionMap = questionMap;\n        this.answerText = answerText;\n        this.correct = correct;\n    }\n\n    public long getAnswerId() {\n        return answerId;\n    }\n\n    public void setAnswerId(long answerId) {\n        this.answerId = answerId;\n    }\n\n    public long getQuestionMap() {\n        return questionMap;\n    }\n\n    public void setQuestionMap(long questionMap) {\n        this.questionMap = questionMap;\n    }\n\n    public boolean isCorrect() {\n        return correct;\n    }\n\n    public void setCorrect(boolean correct) {\n        this.correct = correct;\n    }\n\n    public String getAnswerText() {\n        return answerText;\n    }\n\n    public void setAnswerText(String answerText) {\n        this.answerText = answerText;\n    }\n}\n</code></pre>\n<p>and <strong>QuestionWithAnswerPOJO</strong></p>\n<pre><code>class QuestionWithAnswersPOJO {\n    QuestionPOJO question;\n    ArrayList&lt;AnswerPOJO&gt; answers = new ArrayList&lt;&gt;();\n\n    public QuestionWithAnswersPOJO(QuestionPOJO question, List&lt;AnswerPOJO&gt; answers) {\n        this.question = question;\n        this.answers.clear();\n        this.answers.addAll(answers);\n    }\n\n    public QuestionPOJO getQuestion() {\n        return question;\n    }\n\n    public void setQuestion(QuestionPOJO question) {\n        this.question = question;\n    }\n\n    public ArrayList&lt;AnswerPOJO&gt; getAnswers() {\n        return answers;\n    }\n\n    public void setAnswers(ArrayList&lt;AnswerPOJO&gt; answers) {\n        this.answers = answers;\n    }\n}\n</code></pre>\n<p>Now the DatabaseHelper, that handles all the database activity. Including methods to add and get Questions and the Answers and notably to get the Answers that belong to a question.</p>\n<pre><code>class DatabaseHelper extends SQLiteOpenHelper {\n\n    public static final String DATABASE_NAME = &quot;questions.db&quot;;\n    public static final int DATABASE_VERSION = 1;\n\n    public static final String QUESTION_TABLE = &quot;question&quot;;\n    public static final String QUESTION_ID_COLUMN = BaseColumns._ID;\n    public static final String QUESTION_TEXT_COLUMN = &quot;question_text&quot;;\n    public static final String ANSWER_TABLE = &quot;answer&quot;;\n    public static final String ANSWER_ID_COLUMN = BaseColumns._ID;\n    public static final String ANSWER_TEXT_COLUMN = &quot;answer_text&quot;;\n    public static final String ANSWER_QUESTION_MAP_COLUMN = &quot;question_map&quot;;\n    public static final String ANSWER_CORRECT_COLUMN = &quot;correct&quot;;\n\n    private static volatile DatabaseHelper instance = null;\n    private DatabaseHelper(Context context) {\n        super(context,DATABASE_NAME,null,DATABASE_VERSION);\n    }\n\n    private static SQLiteDatabase db = null;\n\n    public static DatabaseHelper getInstance(Context context, boolean forceOpen) {\n        if (instance == null) {\n            instance = new DatabaseHelper(context);\n        }\n        if (forceOpen) {\n            db = instance.getWritableDatabase();\n        }\n        return instance;\n    }\n    @Override\n    public void onCreate(SQLiteDatabase db) {\n\n        db.execSQL(&quot;CREATE TABLE IF NOT EXISTS &quot; + QUESTION_TABLE + &quot;(&quot; +\n                QUESTION_ID_COLUMN + &quot; INTEGER PRIMARY KEY,&quot; +\n                QUESTION_TEXT_COLUMN + &quot; TEXT&quot; +\n                &quot;);&quot;);\n        db.execSQL(&quot;CREATE TABLE IF NOT EXISTS &quot; + ANSWER_TABLE + &quot;(&quot; +\n                ANSWER_ID_COLUMN + &quot; INTEGER PRIMARY KEY,&quot; +\n                ANSWER_TEXT_COLUMN + &quot; TEXT,&quot; +\n                ANSWER_QUESTION_MAP_COLUMN + &quot; INTEGER REFERENCES &quot; + QUESTION_TABLE + &quot;(&quot; + QUESTION_ID_COLUMN + &quot;) ON DELETE CASCADE ON UPDATE CASCADE,&quot; +\n                ANSWER_CORRECT_COLUMN + &quot; INTEGER DEFAULT 0 /* false */&quot; +\n                &quot;);&quot;);\n    }\n\n    @Override\n    public void onUpgrade(SQLiteDatabase db, int i, int i1) {\n\n    }\n\n    // Fully comprehensive Question insert\n    public long insertQuestion(Long questionId, String questionText) {\n        init_db_AsWriteableDatabase();\n        long rv = -2;\n        ContentValues cv = new ContentValues();\n        if (questionId != null &amp;&amp; questionId &gt; 0) {\n            cv.put(QUESTION_ID_COLUMN,questionId);\n        }\n        if (questionText != null &amp;&amp; questionText.length() &gt; 0) {\n            cv.put(QUESTION_TEXT_COLUMN,questionText);\n        }\n        if (cv.size() &gt; 0) {\n            rv = db.insert(QUESTION_TABLE,null,cv);\n        }\n        return rv;\n    }\n\n    // Concise Question insert\n    public long insertQuestion(String questionText) {\n        return insertQuestion(null,questionText);\n    }\n\n    // Fully comprehensive Answer insert\n    public long insertAnswer(Long answerId, long questionMap, String answerText, boolean correct) {\n        init_db_AsWriteableDatabase();\n        long rv = -2;\n        ContentValues cv = new ContentValues();\n        if (answerId != null &amp;&amp; answerId &gt; 0) {\n            cv.put(ANSWER_ID_COLUMN,answerId);\n        }\n        if (answerText != null &amp;&amp; answerText.length() &gt; 0) {\n            cv.put(ANSWER_CORRECT_COLUMN,correct);\n            cv.put(ANSWER_TEXT_COLUMN,answerText);\n            cv.put(ANSWER_QUESTION_MAP_COLUMN,questionMap);\n            rv = db.insert(ANSWER_TABLE,null,cv);\n        }\n        return rv;\n    }\n\n    // long concise Answer insert\n    public long insertAnswer(long questionMap, String answerText, boolean correct) {\n        return insertAnswer(null,questionMap,answerText,correct);\n    }\n    public long insertAnswer(long questionMap, String answerText) {\n        return insertAnswer(questionMap,answerText,false);\n    }\n    // short concise Answer insert\n    private void init_db_AsWriteableDatabase() {\n        if (db == null) {\n            db = this.getWritableDatabase();\n        }\n    }\n\n\n    @SuppressLint(&quot;Range&quot;)\n    public QuestionPOJO getQuestionById(long questionId) {\n        QuestionPOJO rv = null;\n        init_db_AsWriteableDatabase();\n        Cursor csr = db.query(QUESTION_TABLE,null,QUESTION_ID_COLUMN+&quot;=?&quot;,new String[]{String.valueOf(questionId)},null,null,null);\n        if (csr.moveToNext()) {\n            rv = new QuestionPOJO(csr.getLong(csr.getColumnIndex(QUESTION_ID_COLUMN)),csr.getString(csr.getColumnIndex(QUESTION_TEXT_COLUMN)));\n        }\n        csr.close();\n        return rv;\n    }\n\n    @SuppressLint(&quot;Range&quot;)\n    public List&lt;AnswerPOJO&gt; getAnswersForQuestion(long questionId, boolean onlyCorrect) {\n        init_db_AsWriteableDatabase();\n        ArrayList&lt;AnswerPOJO&gt; rv = new ArrayList&lt;&gt;();\n        StringBuilder whereClause = new StringBuilder();\n        whereClause.append(ANSWER_QUESTION_MAP_COLUMN + &quot;=?&quot;);\n        if (onlyCorrect) {\n            whereClause.append(&quot; AND &quot;).append(ANSWER_CORRECT_COLUMN);\n        }\n        Cursor csr = db.query(ANSWER_TABLE,null,whereClause.toString(),new String[]{String.valueOf(questionId)},null,null,null);\n        while (csr.moveToNext()) {\n            rv.add(\n                new AnswerPOJO(\n                        csr.getLong(csr.getColumnIndex(ANSWER_ID_COLUMN)),\n                        questionId,\n                        csr.getString(csr.getColumnIndex(ANSWER_TEXT_COLUMN)),\n                        csr.getInt(csr.getColumnIndex(ANSWER_CORRECT_COLUMN)) &gt; 0\n                )\n            );\n        }\n        csr.close();\n        return rv;\n    }\n}\n</code></pre>\n<p>Finally to put it all together and activity that has a layout for 4 radio buttons along with the associated answer as a TextView.</p>\n<p>So the layout is:-</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:orientation=&quot;vertical&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    tools:context=&quot;.MainActivity&quot;&gt;\n\n    &lt;TextView\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:text=&quot;Hello World!&quot;&gt;\n    &lt;/TextView&gt;\n\n    &lt;RadioGroup\n        android:id=&quot;@+id/question_radiogroup&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;&gt;\n\n        &lt;RadioButton\n            android:id=&quot;@+id/answer1_radioButton&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            tools:ignore=&quot;DuplicateSpeakableTextCheck&quot;&gt;&lt;/RadioButton&gt;\n        &lt;TextView\n            android:id=&quot;@+id/answer1_textview&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;&gt;\n        &lt;/TextView&gt;\n        &lt;RadioButton\n            android:id=&quot;@+id/answer2_radioButton&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;&gt;\n        &lt;/RadioButton&gt;\n        &lt;TextView\n            android:id=&quot;@+id/answer2_textview&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;&gt;\n        &lt;/TextView&gt;\n        &lt;RadioButton\n            android:id=&quot;@+id/answer3_radioButton&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;&gt;\n        &lt;/RadioButton&gt;\n        &lt;TextView\n            android:id=&quot;@+id/answer3_textview&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;&gt;\n        &lt;/TextView&gt;\n\n        &lt;RadioButton\n            android:id=&quot;@+id/answer4_radioButton&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;&gt;\n        &lt;/RadioButton&gt;\n        &lt;TextView\n            android:id=&quot;@+id/answer4_textview&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;&gt;\n        &lt;/TextView&gt;\n    &lt;/RadioGroup&gt;\n\n&lt;/LinearLayout&gt;\n</code></pre>\n<ul>\n<li>simple enough to show how hiding the buttons depending upon the number of answers (or a limit according to the number of Buttons/Textviews)</li>\n</ul>\n<p>And the activity to demonstrate:-</p>\n<pre><code>public class MainActivity extends AppCompatActivity {\n    DatabaseHelper dbHelper;\n    RadioButton[] radiobuttons = new RadioButton[4];\n    TextView[] answerTexts = new TextView[4];\n    QuestionWithAnswersPOJO currentQuestionWithAnswers;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        /*\n            prepare Radion Buttons and associated TextViews\n         */\n        radiobuttons[0] = this.findViewById(R.id.answer1_radioButton);\n        radiobuttons[1] = this.findViewById(R.id.answer2_radioButton);\n        radiobuttons[2] = this.findViewById(R.id.answer3_radioButton);\n        radiobuttons[3] = this.findViewById(R.id.answer4_radioButton);\n        answerTexts[0] = this.findViewById(R.id.answer1_textview);\n        answerTexts[1] = this.findViewById(R.id.answer2_textview);\n        answerTexts[2] = this.findViewById(R.id.answer3_textview);\n        answerTexts[3] = this.findViewById(R.id.answer4_textview);\n\n        /*\n            Prepare to use Database\n         */\n        dbHelper = DatabaseHelper.getInstance(this,true);\n        SQLiteDatabase db = dbHelper.getWritableDatabase();\n        /* Clear any existing data for consistent results */\n        db.delete(DatabaseHelper.ANSWER_TABLE,null,null);\n        db.delete(DatabaseHelper.QUESTION_TABLE,null,null);\n        /* Add some demo data  1 question with 5 answers (comment out to reduce number of answers)*/\n        long q1id = dbHelper.insertQuestion(&quot;What is 1 + 1&quot;);\n        dbHelper.insertAnswer(q1id,&quot;It is 1&quot;);\n        dbHelper.insertAnswer(q1id,&quot;it is 2&quot;, true);\n        dbHelper.insertAnswer(q1id,&quot;It is 3&quot;);\n        dbHelper.insertAnswer(q1id,&quot;It is 4&quot;);\n        dbHelper.insertAnswer(q1id,&quot;It is something Else&quot;); // will be ignored because only 4 radio buttons\n\n        /* Get the question with the answers, however many ot has */\n        currentQuestionWithAnswers = new QuestionWithAnswersPOJO(dbHelper.getQuestionById(q1id),dbHelper.getAnswersForQuestion(q1id,false));\n        /* setup (refresh) the radio buttons and textviews */\n        getAndSetRadioButtons(currentQuestionWithAnswers);\n    }\n\n    /*\n        Does as it says\n     */\n    private void getAndSetRadioButtons(QuestionWithAnswersPOJO qwa) {\n        // Clear All\n\n        for (int i=0;i &lt; radiobuttons.length; i++) {\n            radiobuttons[i].setVisibility(View.GONE);\n            answerTexts[i].setText(&quot;&quot;);\n            answerTexts[i].setVisibility(View.GONE);\n        }\n        /* show only the least of answers/radio buttons */\n        int numberToShow = radiobuttons.length;\n        if (qwa.answers.size() &lt; radiobuttons.length) {\n            numberToShow = qwa.answers.size();\n        }\n        int i = 0;\n        for(AnswerPOJO a: qwa.answers) {\n            if (i &lt; numberToShow) {\n                radiobuttons[i].setVisibility(View.VISIBLE);\n                answerTexts[i].setVisibility(View.VISIBLE);\n                answerTexts[i++].setText(a.answerText);\n            } else {\n                /* nothing more to do so early break out of the loop */\n                break;\n            }\n        }\n    }\n}\n</code></pre>\n<p><strong>Results</strong></p>\n<p><strong>Result 1 - run with the 5 answers <em>(see comments re 5th answer)</em></strong></p>\n<p><a href=\"https://i.stack.imgur.com/k2Kfz.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/k2Kfz.png\" alt=\"enter image description here\" /></a></p>\n<p><strong>Result 2 - All bar 1 answer comment out so the question has just the 1 answer</strong></p>\n<p>The code used:-</p>\n<pre><code>    long q1id = dbHelper.insertQuestion(&quot;What is 1 + 1&quot;);\n    dbHelper.insertAnswer(q1id,&quot;It is 1&quot;);\n    //dbHelper.insertAnswer(q1id,&quot;it is 2&quot;, true);\n    //dbHelper.insertAnswer(q1id,&quot;It is 3&quot;);\n    //dbHelper.insertAnswer(q1id,&quot;It is 4&quot;);\n    //dbHelper.insertAnswer(q1id,&quot;It is something Else&quot;); // will be ignored because only 4 radio buttons\n</code></pre>\n<p>The display :-</p>\n<p><a href=\"https://i.stack.imgur.com/j3384.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/j3384.png\" alt=\"enter image description here\" /></a></p>\n<p><strong>Result 3 - first and 5th answers only inserted</strong></p>\n<p><a href=\"https://i.stack.imgur.com/HGgZx.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/HGgZx.png\" alt=\"enter image description here\" /></a></p>\n<p>and so on.</p>\n<hr />\n<p>Additional after code has been posted.</p>\n<p><em><strong>Additional Answer as code has now been added.</strong></em></p>\n<p>You say:-</p>\n<blockquote>\n<p>Tried to use:\n<code>if (DataContract.QuestionTable.COLUMN_ANSWER4.isEmpty ()){  radioButton4.setVisibility (View.INVISIBLE); }</code>\nbut does not seem to work.</p>\n</blockquote>\n<p>If <strong>DataContract.QuestionTable.COLUMN_ANSWER4</strong> were empty then would be facing more serious issues as it is the <strong>column name</strong>.</p>\n<p>You should be checking for the contents of the column which has been retrieved from DB and placed into <strong>currentQuestion</strong>, for the question being inspected.</p>\n<p>I believe that using (old code commented out):-</p>\n<pre><code>        radioButton1.setText(currentQuestion.getAnswer1 ());\n        radioButton2.setText(currentQuestion.getAnswer2 ());\n        radioButton3.setText(currentQuestion.getAnswer3 ());\n        radioButton4.setText(currentQuestion.getAnswer4 ());\n        if(currentQuestion.getAnswer4() == null || currentQuestion.getAnswer4().isEmpty()) {\n            radioButton4.setVisibility(View.INVISIBLE);\n        } else {\n            radioButton4.setVisibility(View.VISIBLE); // just in case it is INVISIBLE\n            radioButton4.setText(currentQuestion.getAnswer4());\n        }\n        /*\n        if (DataContract.QuestionTable.COLUMN_ANSWER4.isEmpty ()){\n            radioButton4.setVisibility (View.INVISIBLE);\n        } else {\n            radioButton4.setText(currentQuestion.getAnswer4 ());\n        }\n         */\n</code></pre>\n<p>Will resolve this issue. e.g. at Q3:-</p>\n<p><a href=\"https://i.stack.imgur.com/7CpkK.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/7CpkK.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":23838408,"reputation":37,"user_id":17843835,"display_name":"fotonio"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":172,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":70602784,"answer_count":1,"score":0,"last_activity_date":1642229105,"creation_date":1641410040,"question_id":70598426,"body_markdown":"I would like to ask for some help with my android code. I am trying to develop a quiz app using SQLite.Number of possible answers differs so i need to hide radio buttons from the main screen if answers e.g. are 3 and not 4 (4 is by default the number of the radio buttons). Tried to use:  \r\n\r\n`if (DataContract.QuestionTable.COLUMN_ANSWER4.isEmpty ()){\r\n                radioButton4.setVisibility (View.INVISIBLE);\r\n            }`\r\n\r\nbut does not seem to work.I&#39;m new in android programming and this is my first project so every comment will be very helpful. Thank you.\r\n\r\n","title":"I need to hide a radio button in a quiz app android","body":"<p>I would like to ask for some help with my android code. I am trying to develop a quiz app using SQLite.Number of possible answers differs so i need to hide radio buttons from the main screen if answers e.g. are 3 and not 4 (4 is by default the number of the radio buttons). Tried to use:</p>\n<p><code>if (DataContract.QuestionTable.COLUMN_ANSWER4.isEmpty ()){ radioButton4.setVisibility (View.INVISIBLE); }</code></p>\n<p>but does not seem to work.I'm new in android programming and this is my first project so every comment will be very helpful. Thank you.</p>\n"},{"tags":["java","node.js","cryptography","cryptojs"],"comments":[{"owner":{"account_id":50585,"reputation":39940,"user_id":150978,"accept_rate":78,"display_name":"Robert"},"score":0,"creation_date":1642163282,"post_id":70693834,"comment_id":125003765,"body_markdown":"You should edit your question and include a sample output of the Java part. I would also recommend to post the full key-loading JS code.","body":"You should edit your question and include a sample output of the Java part. I would also recommend to post the full key-loading JS code."}],"answers":[{"tags":[],"owner":{"account_id":12359353,"reputation":42427,"user_id":9014097,"display_name":"Topaco"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1642174091,"creation_date":1642074747,"answer_id":70696144,"question_id":70693834,"body_markdown":"The import fails because both codes use different key formats: Currently, the public key in the Java code is exported in _compressed_ format using `ecKey.getQ().getEncoded(true)`, while the NodeJS code expects the public key in X.509/SPKI format (DER encoded). \r\n\r\nIf in the Java code `ecKey.getEncoded()` is used instead, the public key is exported in X.509/SPKI format (DER encoded) and is compatible with the NodeJS side. \r\n\r\nNote that in the NodeJS code, a possible Base64 encoding on the Java side must be reversed:&lt;br&gt;`var receiverPublicKey = Buffer.from(&#39;&lt;Base64 encoded X.509/SPKI key&gt;&#39;, &#39;base64&#39;);`\r\n\r\n---------\r\n\r\nChanging the Java code is probably unavoidable, since importing compressed, uncompressed or raw keys is not supported by [`crypto.createPublicKey()`][1] according to the documentation. The [ECDH][2] class, which does handle uncompressed keys, is also not an option since curve 25519 is not supported.\r\n\r\n[1]: https://nodejs.org/api/crypto.html#cryptocreatepublickeykey\r\n[2]: https://nodejs.org/api/crypto.html#cryptocreateecdhcurvename","title":"Loading Java Keypair in nodejs","body":"<p>The import fails because both codes use different key formats: Currently, the public key in the Java code is exported in <em>compressed</em> format using <code>ecKey.getQ().getEncoded(true)</code>, while the NodeJS code expects the public key in X.509/SPKI format (DER encoded).</p>\n<p>If in the Java code <code>ecKey.getEncoded()</code> is used instead, the public key is exported in X.509/SPKI format (DER encoded) and is compatible with the NodeJS side.</p>\n<p>Note that in the NodeJS code, a possible Base64 encoding on the Java side must be reversed:<br><code>var receiverPublicKey = Buffer.from('&lt;Base64 encoded X.509/SPKI key&gt;', 'base64');</code></p>\n<hr />\n<p>Changing the Java code is probably unavoidable, since importing compressed, uncompressed or raw keys is not supported by <a href=\"https://nodejs.org/api/crypto.html#cryptocreatepublickeykey\" rel=\"nofollow noreferrer\"><code>crypto.createPublicKey()</code></a> according to the documentation. The <a href=\"https://nodejs.org/api/crypto.html#cryptocreateecdhcurvename\" rel=\"nofollow noreferrer\">ECDH</a> class, which does handle uncompressed keys, is also not an option since curve 25519 is not supported.</p>\n"},{"tags":[],"owner":{"account_id":3421244,"reputation":35863,"user_id":2868801,"display_name":"dave_thompson_085"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1642228253,"creation_date":1642227915,"answer_id":70719336,"question_id":70693834,"body_markdown":"First, to be clear, using curve25519 in Weierstrass form is not standard (at least not yet; draft NIST SP800-186 if and when adopted will allow it with the name W-25519, though it&#39;s not clear anybody wants to or will use it for anything) and is definitely not approved by Bernstein; specifically this is NOT compatible with the standard X25519 or XDH25519 algorithm adopted by many protocols and systems, which uses Montgomery-form equation and computations and X-only representation of points. That&#39;s probably why Bouncy has it under &#39;Custom&#39;. \r\n\r\nOpenSSL, which underlies nodejs crypto, follows standards (well, this time) and does not support this curve by name in X9/Weierstrass form, but it does support arbitrary &#39;explicit&#39; Weierstrass curves and (fortunately?) your Java code, by using the `X9ECParamters` and `ECParameterSpec` classes, uses the (now generally disfavored) explicit format. The encoding of the SPKI format for X9-type ECDH (and ECDSA) depends on values _and_ their lengths for the curve parameters (fixed for a curve) and the point representation (whose value varies, but has one of two fixed lengths for a curve) -- thus the SPKI format for a curve and point representation consists of a fixed prefix followed by the point representation, and for explicit curve25519(W) compressed that prefix is\r\n```\r\n&quot;\\x30\\x82\\x01\\x11\\x30\\x81\\xea\\x06\\x07\\x2a\\x86\\x48\\xce\\x3d\\x02\\x01&quot;+\r\n&quot;\\x30\\x81\\xde\\x02\\x01\\x01\\x30\\x2b\\x06\\x07\\x2a\\x86\\x48\\xce\\x3d\\x01&quot;+\r\n&quot;\\x01\\x02\\x20\\x7f\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff&quot;+\r\n&quot;\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff&quot;+\r\n&quot;\\xff\\xff\\xed\\x30\\x44\\x04\\x20\\x2a\\xaa\\xaa\\xaa\\xaa\\xaa\\xaa\\xaa\\xaa&quot;+\r\n&quot;\\xaa\\xaa\\xaa\\xaa\\xaa\\xaa\\xaa\\xaa\\xaa\\xaa\\xaa\\xaa\\xaa\\xaa\\xaa\\xaa&quot;+\r\n&quot;\\xaa\\xaa\\x98\\x49\\x14\\xa1\\x44\\x04\\x20\\x7b\\x42\\x5e\\xd0\\x97\\xb4\\x25&quot;+\r\n&quot;\\xed\\x09\\x7b\\x42\\x5e\\xd0\\x97\\xb4\\x25\\xed\\x09\\x7b\\x42\\x5e\\xd0\\x97&quot;+\r\n&quot;\\xb4\\x26\\x0b\\x5e\\x9c\\x77\\x10\\xc8\\x64\\x04\\x41\\x04\\x2a\\xaa\\xaa\\xaa&quot;+\r\n&quot;\\xaa\\xaa\\xaa\\xaa\\xaa\\xaa\\xaa\\xaa\\xaa\\xaa\\xaa\\xaa\\xaa\\xaa\\xaa\\xaa&quot;+\r\n&quot;\\xaa\\xaa\\xaa\\xaa\\xaa\\xaa\\xaa\\xaa\\xaa\\xad\\x24\\x5a\\x20\\xae\\x19\\xa1&quot;+\r\n&quot;\\xb8\\xa0\\x86\\xb4\\xe0\\x1e\\xdd\\x2c\\x77\\x48\\xd1\\x4c\\x92\\x3d\\x4d\\x7e&quot;+\r\n&quot;\\x6d\\x7c\\x61\\xb2\\x29\\xe9\\xc5\\xa2\\x7e\\xce\\xd3\\xd9\\x02\\x20\\x10\\x00&quot;+\r\n&quot;\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x14\\xde&quot;+\r\n&quot;\\xf9\\xde\\xa2\\xf7\\x9c\\xd6\\x58\\x12\\x63\\x1a\\x5c\\xf5\\xd3\\xed\\x02\\x01&quot;+\r\n&quot;\\x08\\x03\\x22\\x00&quot;\r\n```\r\nwhich you can simply concatenate to what you have (after un-base64-ing as Topaco noted; as a check it must be exactly 33 bytes with the first byte 0x02 or 0x03).\r\n","title":"Loading Java Keypair in nodejs","body":"<p>First, to be clear, using curve25519 in Weierstrass form is not standard (at least not yet; draft NIST SP800-186 if and when adopted will allow it with the name W-25519, though it's not clear anybody wants to or will use it for anything) and is definitely not approved by Bernstein; specifically this is NOT compatible with the standard X25519 or XDH25519 algorithm adopted by many protocols and systems, which uses Montgomery-form equation and computations and X-only representation of points. That's probably why Bouncy has it under 'Custom'.</p>\n<p>OpenSSL, which underlies nodejs crypto, follows standards (well, this time) and does not support this curve by name in X9/Weierstrass form, but it does support arbitrary 'explicit' Weierstrass curves and (fortunately?) your Java code, by using the <code>X9ECParamters</code> and <code>ECParameterSpec</code> classes, uses the (now generally disfavored) explicit format. The encoding of the SPKI format for X9-type ECDH (and ECDSA) depends on values <em>and</em> their lengths for the curve parameters (fixed for a curve) and the point representation (whose value varies, but has one of two fixed lengths for a curve) -- thus the SPKI format for a curve and point representation consists of a fixed prefix followed by the point representation, and for explicit curve25519(W) compressed that prefix is</p>\n<pre><code>&quot;\\x30\\x82\\x01\\x11\\x30\\x81\\xea\\x06\\x07\\x2a\\x86\\x48\\xce\\x3d\\x02\\x01&quot;+\n&quot;\\x30\\x81\\xde\\x02\\x01\\x01\\x30\\x2b\\x06\\x07\\x2a\\x86\\x48\\xce\\x3d\\x01&quot;+\n&quot;\\x01\\x02\\x20\\x7f\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff&quot;+\n&quot;\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff&quot;+\n&quot;\\xff\\xff\\xed\\x30\\x44\\x04\\x20\\x2a\\xaa\\xaa\\xaa\\xaa\\xaa\\xaa\\xaa\\xaa&quot;+\n&quot;\\xaa\\xaa\\xaa\\xaa\\xaa\\xaa\\xaa\\xaa\\xaa\\xaa\\xaa\\xaa\\xaa\\xaa\\xaa\\xaa&quot;+\n&quot;\\xaa\\xaa\\x98\\x49\\x14\\xa1\\x44\\x04\\x20\\x7b\\x42\\x5e\\xd0\\x97\\xb4\\x25&quot;+\n&quot;\\xed\\x09\\x7b\\x42\\x5e\\xd0\\x97\\xb4\\x25\\xed\\x09\\x7b\\x42\\x5e\\xd0\\x97&quot;+\n&quot;\\xb4\\x26\\x0b\\x5e\\x9c\\x77\\x10\\xc8\\x64\\x04\\x41\\x04\\x2a\\xaa\\xaa\\xaa&quot;+\n&quot;\\xaa\\xaa\\xaa\\xaa\\xaa\\xaa\\xaa\\xaa\\xaa\\xaa\\xaa\\xaa\\xaa\\xaa\\xaa\\xaa&quot;+\n&quot;\\xaa\\xaa\\xaa\\xaa\\xaa\\xaa\\xaa\\xaa\\xaa\\xad\\x24\\x5a\\x20\\xae\\x19\\xa1&quot;+\n&quot;\\xb8\\xa0\\x86\\xb4\\xe0\\x1e\\xdd\\x2c\\x77\\x48\\xd1\\x4c\\x92\\x3d\\x4d\\x7e&quot;+\n&quot;\\x6d\\x7c\\x61\\xb2\\x29\\xe9\\xc5\\xa2\\x7e\\xce\\xd3\\xd9\\x02\\x20\\x10\\x00&quot;+\n&quot;\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x14\\xde&quot;+\n&quot;\\xf9\\xde\\xa2\\xf7\\x9c\\xd6\\x58\\x12\\x63\\x1a\\x5c\\xf5\\xd3\\xed\\x02\\x01&quot;+\n&quot;\\x08\\x03\\x22\\x00&quot;\n</code></pre>\n<p>which you can simply concatenate to what you have (after un-base64-ing as Topaco noted; as a check it must be exactly 33 bytes with the first byte 0x02 or 0x03).</p>\n"}],"owner":{"account_id":14597427,"reputation":430,"user_id":10542695,"display_name":"HushAtom"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":456,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1642228253,"creation_date":1642064483,"question_id":70693834,"body_markdown":"i am generating a curve25519 ECDH keypair in java like this\r\n```java\r\npublic static final String ALGORITHM = &quot;ECDH&quot;;\r\npublic static final String CURVE = &quot;curve25519&quot;;\r\n\r\npublic static byte[] getEncodedPublicKey(PublicKey key) throws Exception {\r\n        ECPublicKey ecKey = (ECPublicKey) key;\r\n        return ecKey.getQ().getEncoded(true);\r\n}\r\nSecurity.addProvider(new BouncyCastleProvider());\r\nKeyPairGenerator keyPairGenerator = KeyPairGenerator.getInstance(ALGORITHM, PROVIDER);\r\nX9ECParameters ecParameters = CustomNamedCurves.getByName(CURVE);\r\nECParameterSpec ecSpec = new ECParameterSpec(ecParameters.getCurve(), ecParameters.getG(), ecParameters.getN(), ecParameters.getH(), ecParameters.getSeed());\r\nKeyPair recieverKeypair = keyPairGenerator.initialize(ecSpec, new SecureRandom());\r\nsystem.out.println(new String(org.bouncycastle.util.encoders.Base64.encode((getEncodedPublicKey(receiverKeyPair.getPublic()))))\r\n```\r\nand i am using public key that is printed in above in my nodejs project like this\r\n\r\n```js\r\ncrypto.createPublicKey({\r\n      key: receiverPublicKey, //string\r\n      format:&#39;der&#39;,\r\n      type: &#39;spki&#39;,\r\n})\r\n\r\n```\r\nwhich throws this error:\r\n```none\r\nError: error:0D07209B:asn1 encoding routines:ASN1_get_object:too long\r\n    at Object.createPublicKey (node:internal/crypto/keys:595:12)\r\n    at generateSharedKey (/home/wsl/projects/node-ndhm-crypto/src/EncryptData.ts:133:23)\r\n    at Object.exports.encrypt (/home/wsl/projects/node-ndhm-crypto/src/EncryptData.ts:61:21)\r\n\r\n```\r\nany help would be appreciated. thanks.","title":"Loading Java Keypair in nodejs","body":"<p>i am generating a curve25519 ECDH keypair in java like this</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static final String ALGORITHM = &quot;ECDH&quot;;\npublic static final String CURVE = &quot;curve25519&quot;;\n\npublic static byte[] getEncodedPublicKey(PublicKey key) throws Exception {\n        ECPublicKey ecKey = (ECPublicKey) key;\n        return ecKey.getQ().getEncoded(true);\n}\nSecurity.addProvider(new BouncyCastleProvider());\nKeyPairGenerator keyPairGenerator = KeyPairGenerator.getInstance(ALGORITHM, PROVIDER);\nX9ECParameters ecParameters = CustomNamedCurves.getByName(CURVE);\nECParameterSpec ecSpec = new ECParameterSpec(ecParameters.getCurve(), ecParameters.getG(), ecParameters.getN(), ecParameters.getH(), ecParameters.getSeed());\nKeyPair recieverKeypair = keyPairGenerator.initialize(ecSpec, new SecureRandom());\nsystem.out.println(new String(org.bouncycastle.util.encoders.Base64.encode((getEncodedPublicKey(receiverKeyPair.getPublic()))))\n</code></pre>\n<p>and i am using public key that is printed in above in my nodejs project like this</p>\n<pre class=\"lang-js prettyprint-override\"><code>crypto.createPublicKey({\n      key: receiverPublicKey, //string\n      format:'der',\n      type: 'spki',\n})\n\n</code></pre>\n<p>which throws this error:</p>\n<pre class=\"lang-none prettyprint-override\"><code>Error: error:0D07209B:asn1 encoding routines:ASN1_get_object:too long\n    at Object.createPublicKey (node:internal/crypto/keys:595:12)\n    at generateSharedKey (/home/wsl/projects/node-ndhm-crypto/src/EncryptData.ts:133:23)\n    at Object.exports.encrypt (/home/wsl/projects/node-ndhm-crypto/src/EncryptData.ts:61:21)\n\n</code></pre>\n<p>any help would be appreciated. thanks.</p>\n"},{"tags":["java","jmeter"],"answers":[{"tags":[],"owner":{"account_id":3460456,"reputation":162728,"user_id":2897748,"display_name":"Dmitri T"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1642226755,"creation_date":1642226755,"answer_id":70719254,"question_id":70714592,"body_markdown":"Either just go for [__P() function][1] like:\r\n\r\n    ${__P(some_id,)}\r\n\r\nor use the correct syntax for the [__groovy() function][2] like:\r\n\r\n    ${__groovy(props.get(&#39;some_id&#39;),)}\r\n\r\n\r\nIf you&#39;re uncertain regarding proper syntax for this or that function - consider using the [Function Helper Dialog][3]\r\n\r\nMore information on JMeter Functions concept: [Apache JMeter Functions - An Introduction][4]\r\n\r\n\r\n  [1]: https://jmeter.apache.org/usermanual/functions.html#__P\r\n  [2]: https://jmeter.apache.org/usermanual/functions.html#__groovy\r\n  [3]: https://jmeter.apache.org/usermanual/functions.html#function_helper\r\n  [4]: https://www.blazemeter.com/blog/apache-jmeter-functions-introduction","title":"pass a property to JDBC post processor in Jmeter","body":"<p>Either just go for <a href=\"https://jmeter.apache.org/usermanual/functions.html#__P\" rel=\"nofollow noreferrer\">__P() function</a> like:</p>\n<pre><code>${__P(some_id,)}\n</code></pre>\n<p>or use the correct syntax for the <a href=\"https://jmeter.apache.org/usermanual/functions.html#__groovy\" rel=\"nofollow noreferrer\">__groovy() function</a> like:</p>\n<pre><code>${__groovy(props.get('some_id'),)}\n</code></pre>\n<p>If you're uncertain regarding proper syntax for this or that function - consider using the <a href=\"https://jmeter.apache.org/usermanual/functions.html#function_helper\" rel=\"nofollow noreferrer\">Function Helper Dialog</a></p>\n<p>More information on JMeter Functions concept: <a href=\"https://www.blazemeter.com/blog/apache-jmeter-functions-introduction\" rel=\"nofollow noreferrer\">Apache JMeter Functions - An Introduction</a></p>\n"}],"owner":{"account_id":1245793,"reputation":3093,"user_id":1207289,"accept_rate":84,"display_name":"user1207289"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":236,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70719254,"answer_count":1,"score":0,"last_activity_date":1642226755,"creation_date":1642182321,"question_id":70714592,"body_markdown":"I am trying to pass a property, which is set in a JSR223 step,  in JDBC post processor like below but I get `No such property: some_id for class: script xxx`\r\n\r\n  \r\n\r\n    Select t.column1, t.column2 from someTable t where t.some_id = &#39;${_groovy(_property(some_id),)}&#39; ;\r\n\r\nI am setting and then checking `some_id` in a JSR223 PostProcessor placed just before JDBC  like this\r\n\r\n `props.put(&quot;some_id&quot;, someMethod(someParam))`\r\n\r\n`log.info(props.getProperty(&quot;some_id&quot;));\r\n//prints some_id\r\n`\r\n\r\nfrom above, it seems property is set correctly , so why does it say no such property. Is what I am doing not possible?\r\n\r\n","title":"pass a property to JDBC post processor in Jmeter","body":"<p>I am trying to pass a property, which is set in a JSR223 step,  in JDBC post processor like below but I get <code>No such property: some_id for class: script xxx</code></p>\n<pre><code>Select t.column1, t.column2 from someTable t where t.some_id = '${_groovy(_property(some_id),)}' ;\n</code></pre>\n<p>I am setting and then checking <code>some_id</code> in a JSR223 PostProcessor placed just before JDBC  like this</p>\n<p><code>props.put(&quot;some_id&quot;, someMethod(someParam))</code></p>\n<p><code>log.info(props.getProperty(&quot;some_id&quot;)); //prints some_id </code></p>\n<p>from above, it seems property is set correctly , so why does it say no such property. Is what I am doing not possible?</p>\n"},{"tags":["java","android","firebase-authentication"],"answers":[{"tags":[],"owner":{"account_id":22564906,"reputation":3594,"user_id":17133283,"display_name":"Sambhav Khandelwal"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1642225892,"creation_date":1642225892,"answer_id":70719187,"question_id":70719090,"body_markdown":"    mAuth.createUserWithEmailAndPassword(emailpassword\r\n                .addOnCompleteListener(task -&gt; {\r\n                    //task completed\r\n                    if(task.isSuccessfull()) Log.d(&quot;signIn&quot;,&quot;success&quot;); //sign in success\r\n                    else Log.d(&quot;signIn&quot;,&quot;fail&quot;) //sign in failed\r\n                });\r\n\r\nThis will help you\r\n","title":"Not able to add onCompleteListener","body":"<pre><code>mAuth.createUserWithEmailAndPassword(emailpassword\n            .addOnCompleteListener(task -&gt; {\n                //task completed\n                if(task.isSuccessfull()) Log.d(&quot;signIn&quot;,&quot;success&quot;); //sign in success\n                else Log.d(&quot;signIn&quot;,&quot;fail&quot;) //sign in failed\n            });\n</code></pre>\n<p>This will help you</p>\n"}],"owner":{"account_id":23939412,"reputation":23,"user_id":17932735,"display_name":"Yashas"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":82,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":70719187,"answer_count":1,"score":0,"last_activity_date":1642225892,"creation_date":1642224509,"question_id":70719090,"body_markdown":"    private void createUserAcccount(String email, String name, String password) {\r\n        mAuth.createUserWithEmailAndPassword(email, password)\r\nI want to know after this is completed but when I add addOnCompleteListener it shows unable to resolve symbol. What is the solution to this?","title":"Not able to add onCompleteListener","body":"<pre><code>private void createUserAcccount(String email, String name, String password) {\n    mAuth.createUserWithEmailAndPassword(email, password)\n</code></pre>\n<p>I want to know after this is completed but when I add addOnCompleteListener it shows unable to resolve symbol. What is the solution to this?</p>\n"},{"tags":["java","sonarlint"],"comments":[{"owner":{"account_id":12975459,"reputation":1665,"user_id":9379617,"display_name":"Ben"},"score":3,"creation_date":1527592975,"post_id":50583109,"comment_id":88175298,"body_markdown":"There is a chance for e.g. your `rs.close` to throw an exception leading to `stmt` and `con` to never be closed. Use try-with-resources as suggested as they all implement `AutoClosable` anyways.","body":"There is a chance for e.g. your <code>rs.close</code> to throw an exception leading to <code>stmt</code> and <code>con</code> to never be closed. Use try-with-resources as suggested as they all implement <code>AutoClosable</code> anyways."},{"owner":{"account_id":12975459,"reputation":1665,"user_id":9379617,"display_name":"Ben"},"score":0,"creation_date":1527593054,"post_id":50583109,"comment_id":88175347,"body_markdown":"Also your close calls in the try are redundant. The finally executes anyways. And why is it in a try/catch in the finally but not in your first try? If you replicate code then at least... replicate it fully. That code really is just a mess.","body":"Also your close calls in the try are redundant. The finally executes anyways. And why is it in a try/catch in the finally but not in your first try? If you replicate code then at least... replicate it fully. That code really is just a mess."},{"owner":{"account_id":3588572,"reputation":165,"user_id":2995123,"accept_rate":0,"display_name":"vishnu"},"score":0,"creation_date":1527593326,"post_id":50583109,"comment_id":88175585,"body_markdown":"@Ben..close calls in try block was a mistake while copying code here.edited the code. thanks for noticing it. Issue is replicable with this code","body":"@Ben..close calls in try block was a mistake while copying code here.edited the code. thanks for noticing it. Issue is replicable with this code"},{"owner":{"account_id":3588572,"reputation":165,"user_id":2995123,"accept_rate":0,"display_name":"vishnu"},"score":0,"creation_date":1527593810,"post_id":50583109,"comment_id":88175911,"body_markdown":"@Ben.. There are so many methods like this in my code and the try blocks are more complex in my codes. I just taken a small method call for example. making these methods to &#39;try with resource&#39; is difficult in my code. yeh..We can do it. But can we handle the issue through finally block itself? Any ways for doing this?","body":"@Ben.. There are so many methods like this in my code and the try blocks are more complex in my codes. I just taken a small method call for example. making these methods to &#39;try with resource&#39; is difficult in my code. yeh..We can do it. But can we handle the issue through finally block itself? Any ways for doing this?"}],"answers":[{"tags":[],"owner":{"account_id":9847991,"reputation":56906,"user_id":7294900,"accept_rate":94,"display_name":"Ori Marko"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1527665921,"creation_date":1527661602,"answer_id":50597661,"question_id":50583109,"body_markdown":"Without try-with-resources you can only improve the code by using methods for re-usability, call main method: \r\n\r\n    closeResources(rs, stmt, con);\r\n\r\nWhich will call each for each resource a different method for example Statement:\r\n\r\n     public void closeResource(Statement stmt) {\r\n        if (stmt != null) {\r\n            stmt.close();\r\n        } catch (SQLException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\nBTW, you better use logger instead of [e.printStackTrace()][1]\r\n\r\nFor complete solution, you can check [extensive example][2] which add resources in array and close them in a loop:\r\n\r\n&gt;     for (Closeable resource : resources) {\r\n&gt;        try {\r\n&gt;          resource.close();\r\n\r\n[1]:https://stackoverflow.com/questions/10477607/avoid-printstacktrace-use-a-logger-call-instead\r\n\r\n[2]:http://illegalargumentexception.blogspot.com/2008/10/java-how-not-to-make-mess-of-stream.html","title":"SonarLint is still showing blocker errors even though we have handled the statement, Connection closes in finally block","body":"<p>Without try-with-resources you can only improve the code by using methods for re-usability, call main method: </p>\n\n<pre><code>closeResources(rs, stmt, con);\n</code></pre>\n\n<p>Which will call each for each resource a different method for example Statement:</p>\n\n<pre><code> public void closeResource(Statement stmt) {\n    if (stmt != null) {\n        stmt.close();\n    } catch (SQLException e) {\n        e.printStackTrace();\n    }\n</code></pre>\n\n<p>BTW, you better use logger instead of <a href=\"https://stackoverflow.com/questions/10477607/avoid-printstacktrace-use-a-logger-call-instead\">e.printStackTrace()</a></p>\n\n<p>For complete solution, you can check <a href=\"http://illegalargumentexception.blogspot.com/2008/10/java-how-not-to-make-mess-of-stream.html\" rel=\"nofollow noreferrer\">extensive example</a> which add resources in array and close them in a loop:</p>\n\n<blockquote>\n<pre><code>for (Closeable resource : resources) {\n   try {\n     resource.close();\n</code></pre>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":4902825,"reputation":1,"user_id":3950483,"display_name":"thusila"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1642225644,"creation_date":1642225644,"answer_id":70719161,"question_id":50583109,"body_markdown":"Use Try-with-resources. This is the best option.","title":"SonarLint is still showing blocker errors even though we have handled the statement, Connection closes in finally block","body":"<p>Use Try-with-resources. This is the best option.</p>\n"}],"owner":{"account_id":3588572,"reputation":165,"user_id":2995123,"accept_rate":0,"display_name":"vishnu"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1088,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":2,"score":3,"last_activity_date":1642225644,"creation_date":1527592873,"question_id":50583109,"body_markdown":"SonarLint is showing below errors:\r\n\r\n1. &#39;Use try-with-resources or close this &quot;Statement&quot; in a &quot;finally&quot; clause.&#39;\r\n2. &#39;Use try-with-resources or close this &quot;Connection&quot; in a &quot;finally&quot; clause.&#39;   \r\nblocker errors even though we have closed the Statement stmt, Connection con in finally block.  \t\r\n\r\nPlease find the sample code.\r\n\r\n    public String getProductNumber() throws BusinessDelegateException {\r\n    \r\n    \t\tString productNo = null;\r\n    \t\tConnection con = null;\r\n    \t\tStatement stmt = null;\r\n    \t\tResultSet \trs  = null;\r\n    \t\tString query  = //some query\r\n    \t\ttry {\r\n    \t\t\tDataSource ds = getDataSource();\r\n    \t\t\tcon = ds.getConnection();\r\n    \t\t\tstmt = con.createStatement();\r\n    \t\t\trs \t = stmt.executeQuery(query);\r\n    \t\t\tproductNo =.......\r\n    \t\t\t....................\r\n    \t\t}catch (Exception e) {\r\n    \t\t\tString errorMsg = &quot;Error occured in getProductNumber()&quot;;\r\n    \t\t\tthrow new BusinessDelegateException(errorMsg, e);\r\n    \t\t}finally{\r\n    \t\t\ttry {\r\n    \t\t\t\tif(rs != null)\r\n    \t\t\t\t\trs.close();\r\n    \t\t\t\tif (stmt != null)\r\n    \t\t\t\t\tstmt.close();\r\n    \t\t\t\tif (con != null)\r\n    \t\t\t\t\tcon.close();\r\n    \t\t\t} catch (SQLException e) {\r\n    \t\t\t\te.printStackTrace();\r\n    \t\t\t}\r\n    \t\t}\r\n    \r\n    \t\treturn productNo;\r\n    \t}\r\n\r\n\r\nWe were able to fix the issue by modifying the finally block in below manner. But still it seems like repetition of catch blocks. Any other way we can fix this?\r\n\r\n\r\n    finally{\r\n            try {\r\n                if(rs != null)\r\n                    rs.close();\r\n            } catch (SQLException e) {\r\n                e.printStackTrace();\r\n            }\r\n            try {\r\n            \tif (stmt != null)\r\n                    stmt.close();\r\n            } catch (SQLException e) {\r\n                e.printStackTrace();\r\n            }\r\n            try {\r\n            \tif (con != null)\r\n                    con.close();\r\n            } catch (SQLException e) {\r\n                e.printStackTrace();\r\n            }\r\n        }","title":"SonarLint is still showing blocker errors even though we have handled the statement, Connection closes in finally block","body":"<p>SonarLint is showing below errors:</p>\n\n<ol>\n<li>'Use try-with-resources or close this \"Statement\" in a \"finally\" clause.'</li>\n<li>'Use try-with-resources or close this \"Connection\" in a \"finally\" clause.'<br>\nblocker errors even though we have closed the Statement stmt, Connection con in finally block.      </li>\n</ol>\n\n<p>Please find the sample code.</p>\n\n<pre><code>public String getProductNumber() throws BusinessDelegateException {\n\n        String productNo = null;\n        Connection con = null;\n        Statement stmt = null;\n        ResultSet   rs  = null;\n        String query  = //some query\n        try {\n            DataSource ds = getDataSource();\n            con = ds.getConnection();\n            stmt = con.createStatement();\n            rs   = stmt.executeQuery(query);\n            productNo =.......\n            ....................\n        }catch (Exception e) {\n            String errorMsg = \"Error occured in getProductNumber()\";\n            throw new BusinessDelegateException(errorMsg, e);\n        }finally{\n            try {\n                if(rs != null)\n                    rs.close();\n                if (stmt != null)\n                    stmt.close();\n                if (con != null)\n                    con.close();\n            } catch (SQLException e) {\n                e.printStackTrace();\n            }\n        }\n\n        return productNo;\n    }\n</code></pre>\n\n<p>We were able to fix the issue by modifying the finally block in below manner. But still it seems like repetition of catch blocks. Any other way we can fix this?</p>\n\n<pre><code>finally{\n        try {\n            if(rs != null)\n                rs.close();\n        } catch (SQLException e) {\n            e.printStackTrace();\n        }\n        try {\n            if (stmt != null)\n                stmt.close();\n        } catch (SQLException e) {\n            e.printStackTrace();\n        }\n        try {\n            if (con != null)\n                con.close();\n        } catch (SQLException e) {\n            e.printStackTrace();\n        }\n    }\n</code></pre>\n"},{"tags":["java","spring-boot","aes","rsa","private-key"],"comments":[{"owner":{"account_id":16873181,"reputation":164,"user_id":12201243,"display_name":"Nathaniel Blanquel"},"score":0,"creation_date":1642212394,"post_id":70716907,"comment_id":125018506,"body_markdown":"What are you passing into the stringKey parameter? A public key? A private one?","body":"What are you passing into the stringKey parameter? A public key? A private one?"},{"owner":{"account_id":3421244,"reputation":35863,"user_id":2868801,"display_name":"dave_thompson_085"},"score":2,"creation_date":1642222253,"post_id":70716907,"comment_id":125019398,"body_markdown":"Why do you have an encrypted public key? That makes no sense; the whole point of public keys is that they aren&#39;t secrets and can be safely exposed. But without knowing exactly what form your JSON element values have (and maybe your environment&#39;s default charset) it&#39;s impossible to say if and how you are wrong, and obviously you can&#39;t post them. Are they all printable chars or not? If yes, are they restricted to either of the base64 alphabets or the hex alphabet? If no, are they all below U+0100 and do they cover most of the range hex 00-FF and is the first below hex 80 or not?","body":"Why do you have an encrypted public key? That makes no sense; the whole point of public keys is that they aren&#39;t secrets and can be safely exposed. But without knowing exactly what form your JSON element values have (and maybe your environment&#39;s default charset) it&#39;s impossible to say if and how you are wrong, and obviously you can&#39;t post them. Are they all printable chars or not? If yes, are they restricted to either of the base64 alphabets or the hex alphabet? If no, are they all below U+0100 and do they cover most of the range hex 00-FF and is the first below hex 80 or not?"},{"owner":{"account_id":3421244,"reputation":35863,"user_id":2868801,"display_name":"dave_thompson_085"},"score":1,"creation_date":1642222404,"post_id":70716907,"comment_id":125019414,"body_markdown":"... And what is the length of each element? Relatedly, 1024 and 2048 bits (NOT bytes) are common &#39;sizes&#39; for RSA keys (the &#39;size&#39; measures only the modulus, which determines the cryptographic strength, not the whole key), but they are not required by most standards (NIST FIPS186 is an exception) and other sizes are widely permitted and sometimes used. @NathanielBlanquel: any object described as a key that has elements named e,n,d,p,q,dmp1,dmq1,coeff pretty much has to be a PKCS1 CRT-form RSA private key.","body":"... And what is the length of each element? Relatedly, 1024 and 2048 bits (NOT bytes) are common &#39;sizes&#39; for RSA keys (the &#39;size&#39; measures only the modulus, which determines the cryptographic strength, not the whole key), but they are not required by most standards (NIST FIPS186 is an exception) and other sizes are widely permitted and sometimes used. @NathanielBlanquel: any object described as a key that has elements named e,n,d,p,q,dmp1,dmq1,coeff pretty much has to be a PKCS1 CRT-form RSA private key."},{"owner":{"account_id":13765071,"reputation":167,"user_id":9933821,"display_name":"StackOverflow Asker"},"score":0,"creation_date":1642224097,"post_id":70716907,"comment_id":125019593,"body_markdown":"@NathanielBlanquel I am passing a utf8 string as parameter. I am doing third party integration in my  application. According to their documentation, I have to get a encrypted private key and have to decrypt using shared key which I already have.  I did as they mentioned, but after decrypting with shared key I got a byte array, I converted that byte array to utf8 string and I am passing that string to the posted method parameter to get a private key and using that private key to decrypt the string(which is encrypted with public key)","body":"@NathanielBlanquel I am passing a utf8 string as parameter. I am doing third party integration in my  application. According to their documentation, I have to get a encrypted private key and have to decrypt using shared key which I already have.  I did as they mentioned, but after decrypting with shared key I got a byte array, I converted that byte array to utf8 string and I am passing that string to the posted method parameter to get a private key and using that private key to decrypt the string(which is encrypted with public key)"},{"owner":{"account_id":13765071,"reputation":167,"user_id":9933821,"display_name":"StackOverflow Asker"},"score":0,"creation_date":1642224190,"post_id":70716907,"comment_id":125019601,"body_markdown":"@dave_thompson_085 Sorry, If I didn&#39;t post my question correctly, I have a string which is encrypted with public key and I am trying to decrypt that string using my private key.","body":"@dave_thompson_085 Sorry, If I didn&#39;t post my question correctly, I have a string which is encrypted with public key and I am trying to decrypt that string using my private key."},{"owner":{"account_id":13765071,"reputation":167,"user_id":9933821,"display_name":"StackOverflow Asker"},"score":0,"creation_date":1642224513,"post_id":70716907,"comment_id":125019631,"body_markdown":"@dave_thompson_085 Sorry, I meant to say 2046 bits. I have updated my question.  Is it okay if my private key is 2046 bits? I am unable to decrypt the data with my private key. So I am not sure whether the mistake is with my private key which is 2046 bits or I am doing something wrong when decrypting the string with private key.","body":"@dave_thompson_085 Sorry, I meant to say 2046 bits. I have updated my question.  Is it okay if my private key is 2046 bits? I am unable to decrypt the data with my private key. So I am not sure whether the mistake is with my private key which is 2046 bits or I am doing something wrong when decrypting the string with private key."}],"owner":{"account_id":13765071,"reputation":167,"user_id":9933821,"display_name":"StackOverflow Asker"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":132,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1642224283,"creation_date":1642196959,"question_id":70716907,"body_markdown":"I have a encrypted private key which I have to decrypt using Shared key,which I did and got byte[]. I have converted the byte[] to utf8 string and then converted that string to **Private** key. Now, I have to use this private key to decrypt one time encrypted public key. While doing that, I am getting the following error.\r\n\r\n    javax.crypto.BadPaddingException: Decryption error\r\n\tat sun.security.rsa.RSAPadding.unpadV15(RSAPadding.java:370) ~[na:1.8.0_311]\r\n\r\nThis is how I generated private key.\r\n\r\n     public static PrivateKey decrypt(String stringKey) throws Exception {\r\n        JSONObject jsonKey = new JSONObject(stringKey);\r\n\r\n        BigInteger e = new BigInteger( jsonKey.getString(&quot;e&quot;)); // Public exponent\r\n        BigInteger n = new BigInteger(jsonKey.getString(&quot;n&quot;).getBytes());\r\n        BigInteger d = new BigInteger(jsonKey.getString(&quot;d&quot;).getBytes());\r\n        BigInteger p = new BigInteger(jsonKey.getString(&quot;p&quot;).getBytes());\r\n        BigInteger q = new BigInteger(jsonKey.getString(&quot;q&quot;).getBytes());\r\n        BigInteger dmp1 = new BigInteger(jsonKey.getString(&quot;dmp1&quot;).getBytes());\r\n        BigInteger dmq1 = new BigInteger(jsonKey.getString(&quot;dmq1&quot;).getBytes());\r\n        BigInteger coeff = new BigInteger(jsonKey.getString(&quot;coeff&quot;).getBytes());\r\n\r\n\r\n        RSAPrivateCrtKeySpec privateKeySpec = new RSAPrivateCrtKeySpec(n, e, d, p, q, dmp1, dmq1, coeff);\r\n        KeyFactory keyFactory = KeyFactory.getInstance(&quot;RSA&quot;);\r\n         PrivateKey privateKey = keyFactory.generatePrivate(privateKeySpec);\r\n\r\n        return  privateKey;\r\n    }\r\n\r\nI tried many solutions from the Stack Overflow but nothing worked. I am getting my private key as 2046 bits but when I looked online I found out that it should be 1024 or 2048 bits. Am I generating my Private key wrong? If it is wrong, how should I add two bits to it to make it 2048 bits.\r\n\r\nThanks in advance.","title":"Getting decryption error when decrypting the data string which is encrypted with public key","body":"<p>I have a encrypted private key which I have to decrypt using Shared key,which I did and got byte[]. I have converted the byte[] to utf8 string and then converted that string to <strong>Private</strong> key. Now, I have to use this private key to decrypt one time encrypted public key. While doing that, I am getting the following error.</p>\n<pre><code>javax.crypto.BadPaddingException: Decryption error\nat sun.security.rsa.RSAPadding.unpadV15(RSAPadding.java:370) ~[na:1.8.0_311]\n</code></pre>\n<p>This is how I generated private key.</p>\n<pre><code> public static PrivateKey decrypt(String stringKey) throws Exception {\n    JSONObject jsonKey = new JSONObject(stringKey);\n\n    BigInteger e = new BigInteger( jsonKey.getString(&quot;e&quot;)); // Public exponent\n    BigInteger n = new BigInteger(jsonKey.getString(&quot;n&quot;).getBytes());\n    BigInteger d = new BigInteger(jsonKey.getString(&quot;d&quot;).getBytes());\n    BigInteger p = new BigInteger(jsonKey.getString(&quot;p&quot;).getBytes());\n    BigInteger q = new BigInteger(jsonKey.getString(&quot;q&quot;).getBytes());\n    BigInteger dmp1 = new BigInteger(jsonKey.getString(&quot;dmp1&quot;).getBytes());\n    BigInteger dmq1 = new BigInteger(jsonKey.getString(&quot;dmq1&quot;).getBytes());\n    BigInteger coeff = new BigInteger(jsonKey.getString(&quot;coeff&quot;).getBytes());\n\n\n    RSAPrivateCrtKeySpec privateKeySpec = new RSAPrivateCrtKeySpec(n, e, d, p, q, dmp1, dmq1, coeff);\n    KeyFactory keyFactory = KeyFactory.getInstance(&quot;RSA&quot;);\n     PrivateKey privateKey = keyFactory.generatePrivate(privateKeySpec);\n\n    return  privateKey;\n}\n</code></pre>\n<p>I tried many solutions from the Stack Overflow but nothing worked. I am getting my private key as 2046 bits but when I looked online I found out that it should be 1024 or 2048 bits. Am I generating my Private key wrong? If it is wrong, how should I add two bits to it to make it 2048 bits.</p>\n<p>Thanks in advance.</p>\n"},{"tags":["java","eclipse"],"comments":[{"owner":{"account_id":969721,"reputation":344518,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1423107717,"post_id":28335787,"comment_id":45017726,"body_markdown":"Well, now that you&#39;ve violated the single thread rules of Swing as well as made use of a deprecated method, I would say you&#39;re not off to a brilliant start","body":"Well, now that you&#39;ve violated the single thread rules of Swing as well as made use of a deprecated method, I would say you&#39;re not off to a brilliant start"},{"owner":{"account_id":969721,"reputation":344518,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1423107732,"post_id":28335787,"comment_id":45017731,"body_markdown":"@KickButtowski I don&#39;t seem to be able to escape ;)","body":"@KickButtowski I don&#39;t seem to be able to escape ;)"},{"owner":{"account_id":969721,"reputation":344518,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1423107829,"post_id":28335787,"comment_id":45017755,"body_markdown":"I would start by taking a look at some of the available animation frameworks, like [Timing Framework](https://java.net/projects/timingframework) and [Universal Tween Engine](https://code.google.com/p/java-universal-tween-engine/)","body":"I would start by taking a look at some of the available animation frameworks, like <a href=\"https://java.net/projects/timingframework\" rel=\"nofollow noreferrer\">Timing Framework</a> and <a href=\"https://code.google.com/p/java-universal-tween-engine/\" rel=\"nofollow noreferrer\">Universal Tween Engine</a>"},{"owner":{"account_id":5688060,"reputation":3,"user_id":4496939,"display_name":"Ken.B"},"score":0,"creation_date":1423109490,"post_id":28335787,"comment_id":45018217,"body_markdown":"I&#39;m new to java and OOP. lol I thought I knew enough to get by, but it looks like i&#39;m breaking rules that i didn&#39;t even know i was suppose to know. \nI was reluctant to use those animation frameworks because I wanted to understand the process of coding my animation needs from scratch. Not that I will always do so but i&#39;d like the option.","body":"I&#39;m new to java and OOP. lol I thought I knew enough to get by, but it looks like i&#39;m breaking rules that i didn&#39;t even know i was suppose to know.  I was reluctant to use those animation frameworks because I wanted to understand the process of coding my animation needs from scratch. Not that I will always do so but i&#39;d like the option."},{"owner":{"account_id":969721,"reputation":344518,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1423109613,"post_id":28335787,"comment_id":45018248,"body_markdown":"Start by taking a look at [Concurrency in Swing](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/) and [How to use Swing Timers](http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html) for starters.  Also `Thread#stop` is deprecated and shouldn&#39;t be used","body":"Start by taking a look at <a href=\"http://docs.oracle.com/javase/tutorial/uiswing/concurrency/\" rel=\"nofollow noreferrer\">Concurrency in Swing</a> and <a href=\"http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html\" rel=\"nofollow noreferrer\">How to use Swing Timers</a> for starters.  Also <code>Thread#stop</code> is deprecated and shouldn&#39;t be used"},{"owner":{"account_id":969721,"reputation":344518,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1423109828,"post_id":28335787,"comment_id":45018314,"body_markdown":"Easing would require you to change the speed of an object based over time (speeding up or slowing down based on your needs).  The TimingFramework has a good example of how that can be achieved, so you could dig around the code there.  I remember a VERY long time ago, I did something very similar, but I&#39;d have a hard time now putting something back together","body":"Easing would require you to change the speed of an object based over time (speeding up or slowing down based on your needs).  The TimingFramework has a good example of how that can be achieved, so you could dig around the code there.  I remember a VERY long time ago, I did something very similar, but I&#39;d have a hard time now putting something back together"}],"answers":[{"tags":[],"owner":{"account_id":969721,"reputation":344518,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1642223620,"creation_date":1423120486,"answer_id":28338188,"question_id":28335787,"body_markdown":"Okay, so animation is a rather complex and in-depth subject, which I&#39;m not going to cover here, it also involves lots of maths which I don&#39;t really understand, so we&#39;re not going to go into a massive amount depth or detail, there are better people then me who can explain it, you can read about it on the web\r\n\r\nSo to begin with, we make some assumptions...\r\n\r\nAnimation is the change over time, where time is variable.  Easement is the variation of (in this case) speed over the time.  This means that the speed of the animation is variable for any given point in time.\r\n\r\nBasically, what we want to do is &quot;normalise&quot; everything.  That is, at the start of the animation, time is 0 and at the end it&#39;s 1, everything else in between is a fraction between those two values.\r\n\r\nIf you can think like this, things become much easier.  So based on a given point on the timeline, you can make decisions about what should be done.  For example, at 50% of the time, you should be half way between your start and end points\r\n\r\nOkay, but how does all that help us?  If we were to graph a ease-in and ease-out animation, it would look something like...\r\n\r\n![BellCurve][1]\r\n\r\nWhere the x-axis is time and the y-axis is speed (between 0 and 1 on both axis).  So at any given point along x (in time), we should be able to calculate the speed.\r\n\r\nNow, we can do this using some maths with B&#233;zier spine/curve and calculate the speed of the object at a given point on the timeline.\r\n\r\nNow, I borrowed most of the code directly from the Timing Framework, but if you&#39;re really interested, you can also look at [B&#233;zier Curves for your Games: A Tutorial](http://devmag.org.za/2011/04/05/bzier-curves-a-tutorial/)\r\n\r\n*(nb: I actually did wrote something like this, then 2 days later, discovered that the Timing Framework had already implemented...was a fun exercise...)*\r\n\r\nNow, what&#39;s important to note about this implementation is that it won&#39;t actually return you the speed of the object, but it will return a progression of time along the timeline (0-1), okay, that sounds weird, but what it does allow you to do is calculate the current position between your start and end points `(startValue + ((endValue - startValue) * progress))` along the time line\r\n\r\nI&#39;m won&#39;t go into a lot of detail about this, as I really don&#39;t understand the maths, I simply know how to apply it, but basically, we calculate the points (x/y) along the curve, we then normalize these values (0-1) to make it easier to look up.\r\n\r\nThe `interpolate` method uses a binary search to find the closest matching point for a given fraction of time and then calculates the speed/y position of that point\r\n\r\n\tpublic class SplineInterpolator {\r\n\r\n\t\tprivate final double points[];\r\n\t\tprivate final List&lt;PointUnit&gt; normalisedCurve;\r\n\r\n\t\tpublic SplineInterpolator(double x1, double y1, double x2, double y2) {\r\n\t\t\tpoints = new double[]{ x1, y1, x2, y2 };\r\n\r\n\t\t\tfinal List&lt;Double&gt; baseLengths = new ArrayList&lt;&gt;();\r\n\t\t\tdouble prevX = 0;\r\n\t\t\tdouble prevY = 0;\r\n\t\t\tdouble cumulativeLength = 0;\r\n\t\t\tfor (double t = 0; t &lt;= 1; t += 0.01) {\r\n\t\t\t\tPoint2D xy = getXY(t);\r\n\t\t\t\tdouble length = cumulativeLength\r\n\t\t\t\t\t\t\t\t+ Math.sqrt((xy.getX() - prevX) * (xy.getX() - prevX)\r\n\t\t\t\t\t\t\t\t\t\t\t\t+ (xy.getY() - prevY) * (xy.getY() - prevY));\r\n\r\n\t\t\t\tbaseLengths.add(length);\r\n\t\t\t\tcumulativeLength = length;\r\n\t\t\t\tprevX = xy.getX();\r\n\t\t\t\tprevY = xy.getY();\r\n\t\t\t}\r\n\r\n\t\t\tnormalisedCurve = new ArrayList&lt;&gt;(baseLengths.size());\r\n\t\t\tint index = 0;\r\n\t\t\tfor (double t = 0; t &lt;= 1; t += 0.01) {\r\n\t\t\t\tdouble length = baseLengths.get(index++);\r\n\t\t\t\tdouble normalLength = length / cumulativeLength;\r\n\t\t\t\tnormalisedCurve.add(new PointUnit(t, normalLength));\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tpublic double interpolate(double fraction) {\r\n\t\t\tint low = 1;\r\n\t\t\tint high = normalisedCurve.size() - 1;\r\n\t\t\tint mid = 0;\r\n\t\t\twhile (low &lt;= high) {\r\n\t\t\t\tmid = (low + high) / 2;\r\n\r\n\t\t\t\tif (fraction &gt; normalisedCurve.get(mid).getPoint()) {\r\n\t\t\t\t\tlow = mid + 1;\r\n\t\t\t\t} else if (mid &gt; 0 &amp;&amp; fraction &lt; normalisedCurve.get(mid - 1).getPoint()) {\r\n\t\t\t\t\thigh = mid - 1;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t/*\r\n\t\t\t * The answer lies between the &quot;mid&quot; item and its predecessor.\r\n\t\t\t */\r\n\t\t\tfinal PointUnit prevItem = normalisedCurve.get(mid - 1);\r\n\t\t\tfinal double prevFraction = prevItem.getPoint();\r\n\t\t\tfinal double prevT = prevItem.getDistance();\r\n\r\n\t\t\tfinal PointUnit item = normalisedCurve.get(mid);\r\n\t\t\tfinal double proportion = (fraction - prevFraction) / (item.getPoint() - prevFraction);\r\n\t\t\tfinal double interpolatedT = prevT + (proportion * (item.getDistance() - prevT));\r\n\t\t\treturn getY(interpolatedT);\r\n\t\t}\r\n\r\n\t\tprotected Point2D getXY(double t) {\r\n\t\t\tfinal double invT = 1 - t;\r\n\t\t\tfinal double b1 = 3 * t * invT * invT;\r\n\t\t\tfinal double b2 = 3 * t * t * invT;\r\n\t\t\tfinal double b3 = t * t * t;\r\n\t\t\tfinal Point2D xy = new Point2D.Double((b1 * points[0]) + (b2 * points[2]) + b3, (b1 * points[1]) + (b2 * points[3]) + b3);\r\n\t\t\treturn xy;\r\n\t\t}\r\n\r\n\t\tprotected double getY(double t) {\r\n\t\t\tfinal double invT = 1 - t;\r\n\t\t\tfinal double b1 = 3 * t * invT * invT;\r\n\t\t\tfinal double b2 = 3 * t * t * invT;\r\n\t\t\tfinal double b3 = t * t * t;\r\n\t\t\treturn (b1 * points[2]) + (b2 * points[3]) + b3;\r\n\t\t}\r\n\r\n\t\tpublic class PointUnit {\r\n\r\n\t\t\tprivate final double distance;\r\n\t\t\tprivate final double point;\r\n\r\n\t\t\tpublic PointUnit(double distance, double point) {\r\n\t\t\t\tthis.distance = distance;\r\n\t\t\t\tthis.point = point;\r\n\t\t\t}\r\n\r\n\t\t\tpublic double getDistance() {\r\n\t\t\t\treturn distance;\r\n\t\t\t}\r\n\r\n\t\t\tpublic double getPoint() {\r\n\t\t\t\treturn point;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\nIf we do something like...\r\n\r\n\tSplineInterpolator si = new SplineInterpolator(1, 0, 0, 1);\r\n\tfor (double t = 0; t &lt;= 1; t += 0.1) {\r\n\t\tSystem.out.println(si.interpolate(t));\r\n\t}\r\n\r\nWe get something like...\r\n\r\n    0.0\r\n    0.011111693284790492\r\n    0.057295031944523504\r\n    0.16510933001160544\r\n    0.3208510585798438\r\n    0.4852971690762217\r\n    0.6499037832761319\r\n    0.8090819765428142\r\n    0.9286158775101805\r\n    0.9839043020410436\r\n    0.999702\r\n\r\nOkay, now you&#39;re probably thinking, &quot;wait a minute, that&#39;s a linear progression!&quot;, but it&#39;s not, if you graphed it, you would find that the first three and last three values are very close together, and the others spread out by varying degrees, this is our &quot;progress&quot; value, how far along the timeline we should be\r\n\r\nSo about now, your head should be about to explode (mine is) - this is why I say, use a framework!\r\n\r\nBut how would you use it?!  This is the fun part, now remember, everything is variable, the duration of the animation, the speed of the object over time, the number of ticks or updates, it&#39;s all variable...\r\n\r\nThis is important, as this is where the power of something like this comes in!  If for example, the animation is stalled due to some outside factor, this implementation is capable of simply skipping those &quot;frames&quot;, rather than getting bottlenecked and staggering.  This might sound like a bad thing, but trust me, this is all about fooling the eye into &quot;think&quot; something is changing ;)\r\n\r\n(The following is like 8fps, so it&#39;s pretty crappy)\r\n\r\n![Animate][2]\r\n\r\n\timport java.awt.Color;\r\n\timport java.awt.Dimension;\r\n\timport java.awt.EventQueue;\r\n\timport java.awt.Graphics;\r\n\timport java.awt.Graphics2D;\r\n\timport java.awt.event.ActionEvent;\r\n\timport java.awt.event.ActionListener;\r\n\timport java.awt.event.MouseAdapter;\r\n\timport java.awt.event.MouseEvent;\r\n\timport java.awt.geom.Point2D;\r\n\timport java.util.ArrayList;\r\n\timport java.util.List;\r\n\timport javax.swing.JFrame;\r\n\timport javax.swing.JPanel;\r\n\timport javax.swing.Timer;\r\n\timport javax.swing.UIManager;\r\n\timport javax.swing.UnsupportedLookAndFeelException;\r\n\r\n\tpublic class Test {\r\n\r\n\t\tpublic static void main(String[] args) {\r\n\t\t\tnew Test();\r\n\t\t}\r\n\r\n\t\tpublic Test() {\r\n\t\t\tEventQueue.invokeLater(new Runnable() {\r\n\t\t\t\t@Override\r\n\t\t\t\tpublic void run() {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tUIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());\r\n\t\t\t\t\t} catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {\r\n\t\t\t\t\t\tex.printStackTrace();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tJFrame frame = new JFrame(&quot;Testing&quot;);\r\n\t\t\t\t\tframe.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n\t\t\t\t\tframe.add(new TestPane());\r\n\t\t\t\t\tframe.pack();\r\n\t\t\t\t\tframe.setLocationRelativeTo(null);\r\n\t\t\t\t\tframe.setVisible(true);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tpublic class TestPane extends JPanel {\r\n\r\n\t\t\tprivate int startAt = 0;\r\n\t\t\tprivate int endAt;\r\n\t\t\tprivate int x = startAt;\r\n\t\t\tprivate Timer timer;\r\n\t\t\tprivate SplineInterpolator splineInterpolator;\r\n\t\t\tprivate long startTime = -1;\r\n\t\t\tprivate long playTime = 5000; // 5 seconds\r\n\r\n\t\t\tpublic TestPane() {\r\n\t\t\t\tsplineInterpolator = new SplineInterpolator(1, 0, 0, 1);\r\n\t\t\t\ttimer = new Timer(5, new ActionListener() {\r\n\t\t\t\t\t@Override\r\n\t\t\t\t\tpublic void actionPerformed(ActionEvent e) {\r\n\t\t\t\t\t\tif (startTime &lt; 0) {\r\n\t\t\t\t\t\t\tstartTime = System.currentTimeMillis();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tlong now = System.currentTimeMillis();\r\n\t\t\t\t\t\tlong duration = now - startTime;\r\n\t\t\t\t\t\tdouble t = (double) duration / (double) playTime;\r\n\t\t\t\t\t\tif (duration &gt;= playTime) {\r\n\t\t\t\t\t\t\tt = 1;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tdouble progress = splineInterpolator.interpolate(t);\r\n\r\n\t\t\t\t\t\tx = startAt + ((int) Math.round((endAt - startAt) * progress));\r\n\t\t\t\t\t\trepaint();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\ttimer.setInitialDelay(0);\r\n\t\t\t\taddMouseListener(new MouseAdapter() {\r\n\t\t\t\t\t@Override\r\n\t\t\t\t\tpublic void mouseClicked(MouseEvent e) {\r\n\t\t\t\t\t\tif (!timer.isRunning()) {\r\n                            startTime = -1;\r\n\t\t\t\t\t\t\tstartAt = 0;\r\n\t\t\t\t\t\t\tendAt = getWidth() - 10;\r\n\t\t\t\t\t\t\ttimer.start();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\t@Override\r\n\t\t\tpublic Dimension getPreferredSize() {\r\n\t\t\t\treturn new Dimension(200, 200);\r\n\t\t\t}\r\n\r\n\t\t\t@Override\r\n\t\t\tprotected void paintComponent(Graphics g) {\r\n\t\t\t\tsuper.paintComponent(g);\r\n\t\t\t\tGraphics2D g2d = (Graphics2D) g.create();\r\n\t\t\t\tg2d.setColor(Color.RED);\r\n\t\t\t\tg2d.fillRect(x, (getHeight() / 2) - 5, 10, 10);\r\n\t\t\t\tg2d.dispose();\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tpublic static class SplineInterpolator {\r\n\r\n\t\t\tprivate final double points[];\r\n\t\t\tprivate final List&lt;PointUnit&gt; normalisedCurve;\r\n\r\n\t\t\tpublic SplineInterpolator(double x1, double y1, double x2, double y2) {\r\n\t\t\t\tpoints = new double[]{x1, y1, x2, y2};\r\n\r\n\t\t\t\tfinal List&lt;Double&gt; baseLengths = new ArrayList&lt;&gt;();\r\n\t\t\t\tdouble prevX = 0;\r\n\t\t\t\tdouble prevY = 0;\r\n\t\t\t\tdouble cumulativeLength = 0;\r\n\t\t\t\tfor (double t = 0; t &lt;= 1; t += 0.01) {\r\n\t\t\t\t\tPoint2D xy = getXY(t);\r\n\t\t\t\t\tdouble length = cumulativeLength\r\n\t\t\t\t\t\t\t\t\t+ Math.sqrt((xy.getX() - prevX) * (xy.getX() - prevX)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t+ (xy.getY() - prevY) * (xy.getY() - prevY));\r\n\r\n\t\t\t\t\tbaseLengths.add(length);\r\n\t\t\t\t\tcumulativeLength = length;\r\n\t\t\t\t\tprevX = xy.getX();\r\n\t\t\t\t\tprevY = xy.getY();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tnormalisedCurve = new ArrayList&lt;&gt;(baseLengths.size());\r\n\t\t\t\tint index = 0;\r\n\t\t\t\tfor (double t = 0; t &lt;= 1; t += 0.01) {\r\n\t\t\t\t\tdouble length = baseLengths.get(index++);\r\n\t\t\t\t\tdouble normalLength = length / cumulativeLength;\r\n\t\t\t\t\tnormalisedCurve.add(new PointUnit(t, normalLength));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tpublic double interpolate(double fraction) {\r\n\t\t\t\tint low = 1;\r\n\t\t\t\tint high = normalisedCurve.size() - 1;\r\n\t\t\t\tint mid = 0;\r\n\t\t\t\twhile (low &lt;= high) {\r\n\t\t\t\t\tmid = (low + high) / 2;\r\n\r\n\t\t\t\t\tif (fraction &gt; normalisedCurve.get(mid).getPoint()) {\r\n\t\t\t\t\t\tlow = mid + 1;\r\n\t\t\t\t\t} else if (mid &gt; 0 &amp;&amp; fraction &lt; normalisedCurve.get(mid - 1).getPoint()) {\r\n\t\t\t\t\t\thigh = mid - 1;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t/*\r\n\t\t\t\t * The answer lies between the &quot;mid&quot; item and its predecessor.\r\n\t\t\t\t */\r\n\t\t\t\tfinal PointUnit prevItem = normalisedCurve.get(mid - 1);\r\n\t\t\t\tfinal double prevFraction = prevItem.getPoint();\r\n\t\t\t\tfinal double prevT = prevItem.getDistance();\r\n\r\n\t\t\t\tfinal PointUnit item = normalisedCurve.get(mid);\r\n\t\t\t\tfinal double proportion = (fraction - prevFraction) / (item.getPoint() - prevFraction);\r\n\t\t\t\tfinal double interpolatedT = prevT + (proportion * (item.getDistance() - prevT));\r\n\t\t\t\treturn getY(interpolatedT);\r\n\t\t\t}\r\n\r\n\t\t\tprotected Point2D getXY(double t) {\r\n\t\t\t\tfinal double invT = 1 - t;\r\n\t\t\t\tfinal double b1 = 3 * t * invT * invT;\r\n\t\t\t\tfinal double b2 = 3 * t * t * invT;\r\n\t\t\t\tfinal double b3 = t * t * t;\r\n\t\t\t\tfinal Point2D xy = new Point2D.Double((b1 * points[0]) + (b2 * points[2]) + b3, (b1 * points[1]) + (b2 * points[3]) + b3);\r\n\t\t\t\treturn xy;\r\n\t\t\t}\r\n\r\n\t\t\tprotected double getY(double t) {\r\n\t\t\t\tfinal double invT = 1 - t;\r\n\t\t\t\tfinal double b1 = 3 * t * invT * invT;\r\n\t\t\t\tfinal double b2 = 3 * t * t * invT;\r\n\t\t\t\tfinal double b3 = t * t * t;\r\n\t\t\t\treturn (b1 * points[2]) + (b2 * points[3]) + b3;\r\n\t\t\t}\r\n\r\n\t\t\tpublic class PointUnit {\r\n\r\n\t\t\t\tprivate final double distance;\r\n\t\t\t\tprivate final double point;\r\n\r\n\t\t\t\tpublic PointUnit(double distance, double point) {\r\n\t\t\t\t\tthis.distance = distance;\r\n\t\t\t\t\tthis.point = point;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tpublic double getDistance() {\r\n\t\t\t\t\treturn distance;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tpublic double getPoint() {\r\n\t\t\t\t\treturn point;\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/zcvTm.png\r\n  [2]: http://i.stack.imgur.com/HDC8T.gif\r\n\r\nSo, apart from the `SplineInterpolator`, the magic happens inside the `ActionListener` for the `javax.swing.Timer` (and some in the `mouseClicked` event handler)\r\n\r\nBasically, this calculates the amount of time (`duration`) the animation has been playing, this becomes our normalised time `t` or `fraction` value (0-1) over the time line, we then use this to calculate our &quot;progression&quot; through the timeline with the `SplineInterpolator` and update the position of our object based on the difference between it&#39;s start and end positions multiplied by the current &quot;progression&quot;\r\n\r\n\tif (startTime &lt; 0) {\r\n\t\tstartTime = System.currentTimeMillis();\r\n\t}\r\n\tlong now = System.currentTimeMillis();\r\n\tlong duration = now - startTime;\r\n\tdouble t = (double) duration / (double) playTime;\r\n\tif (duration &gt;= playTime) {\r\n\t\tt = 1;\r\n\t}\r\n\r\n\tdouble progress = splineInterpolator.interpolate(t);\r\n\r\n\tx = startAt + ((int) Math.round((endAt - startAt) * progress));\r\n\trepaint();\r\n\r\nAnd voila, we have a ease-in and ease-out animation!\r\n\r\nNow, go use an animation framework!  It&#39;s just SOOOO much simpler :P\r\n\r\n- For &quot;fast in/slow out&quot;, you can use `0, 0, 1, 1`\r\n- For &quot;slow in/fast out&quot;, you can use `0, 1, 0, 0`\r\n- For &quot;slow in&quot;, you can use `1, 0, 1, 1`\r\n- For &quot;slow out&quot;, you can use `0, 0, 0, 1`\r\n\r\n(or at least those are the values I use)\r\n\r\nExperiment and see what you get","title":"How can I implement easing functions with a thread","body":"<p>Okay, so animation is a rather complex and in-depth subject, which I'm not going to cover here, it also involves lots of maths which I don't really understand, so we're not going to go into a massive amount depth or detail, there are better people then me who can explain it, you can read about it on the web</p>\n<p>So to begin with, we make some assumptions...</p>\n<p>Animation is the change over time, where time is variable.  Easement is the variation of (in this case) speed over the time.  This means that the speed of the animation is variable for any given point in time.</p>\n<p>Basically, what we want to do is &quot;normalise&quot; everything.  That is, at the start of the animation, time is 0 and at the end it's 1, everything else in between is a fraction between those two values.</p>\n<p>If you can think like this, things become much easier.  So based on a given point on the timeline, you can make decisions about what should be done.  For example, at 50% of the time, you should be half way between your start and end points</p>\n<p>Okay, but how does all that help us?  If we were to graph a ease-in and ease-out animation, it would look something like...</p>\n<p><img src=\"https://i.stack.imgur.com/zcvTm.png\" alt=\"BellCurve\" /></p>\n<p>Where the x-axis is time and the y-axis is speed (between 0 and 1 on both axis).  So at any given point along x (in time), we should be able to calculate the speed.</p>\n<p>Now, we can do this using some maths with Bézier spine/curve and calculate the speed of the object at a given point on the timeline.</p>\n<p>Now, I borrowed most of the code directly from the Timing Framework, but if you're really interested, you can also look at <a href=\"http://devmag.org.za/2011/04/05/bzier-curves-a-tutorial/\" rel=\"nofollow noreferrer\">Bézier Curves for your Games: A Tutorial</a></p>\n<p><em>(nb: I actually did wrote something like this, then 2 days later, discovered that the Timing Framework had already implemented...was a fun exercise...)</em></p>\n<p>Now, what's important to note about this implementation is that it won't actually return you the speed of the object, but it will return a progression of time along the timeline (0-1), okay, that sounds weird, but what it does allow you to do is calculate the current position between your start and end points <code>(startValue + ((endValue - startValue) * progress))</code> along the time line</p>\n<p>I'm won't go into a lot of detail about this, as I really don't understand the maths, I simply know how to apply it, but basically, we calculate the points (x/y) along the curve, we then normalize these values (0-1) to make it easier to look up.</p>\n<p>The <code>interpolate</code> method uses a binary search to find the closest matching point for a given fraction of time and then calculates the speed/y position of that point</p>\n<pre><code>public class SplineInterpolator {\n\n    private final double points[];\n    private final List&lt;PointUnit&gt; normalisedCurve;\n\n    public SplineInterpolator(double x1, double y1, double x2, double y2) {\n        points = new double[]{ x1, y1, x2, y2 };\n\n        final List&lt;Double&gt; baseLengths = new ArrayList&lt;&gt;();\n        double prevX = 0;\n        double prevY = 0;\n        double cumulativeLength = 0;\n        for (double t = 0; t &lt;= 1; t += 0.01) {\n            Point2D xy = getXY(t);\n            double length = cumulativeLength\n                            + Math.sqrt((xy.getX() - prevX) * (xy.getX() - prevX)\n                                            + (xy.getY() - prevY) * (xy.getY() - prevY));\n\n            baseLengths.add(length);\n            cumulativeLength = length;\n            prevX = xy.getX();\n            prevY = xy.getY();\n        }\n\n        normalisedCurve = new ArrayList&lt;&gt;(baseLengths.size());\n        int index = 0;\n        for (double t = 0; t &lt;= 1; t += 0.01) {\n            double length = baseLengths.get(index++);\n            double normalLength = length / cumulativeLength;\n            normalisedCurve.add(new PointUnit(t, normalLength));\n        }\n    }\n\n    public double interpolate(double fraction) {\n        int low = 1;\n        int high = normalisedCurve.size() - 1;\n        int mid = 0;\n        while (low &lt;= high) {\n            mid = (low + high) / 2;\n\n            if (fraction &gt; normalisedCurve.get(mid).getPoint()) {\n                low = mid + 1;\n            } else if (mid &gt; 0 &amp;&amp; fraction &lt; normalisedCurve.get(mid - 1).getPoint()) {\n                high = mid - 1;\n            } else {\n                break;\n            }\n        }\n        /*\n         * The answer lies between the &quot;mid&quot; item and its predecessor.\n         */\n        final PointUnit prevItem = normalisedCurve.get(mid - 1);\n        final double prevFraction = prevItem.getPoint();\n        final double prevT = prevItem.getDistance();\n\n        final PointUnit item = normalisedCurve.get(mid);\n        final double proportion = (fraction - prevFraction) / (item.getPoint() - prevFraction);\n        final double interpolatedT = prevT + (proportion * (item.getDistance() - prevT));\n        return getY(interpolatedT);\n    }\n\n    protected Point2D getXY(double t) {\n        final double invT = 1 - t;\n        final double b1 = 3 * t * invT * invT;\n        final double b2 = 3 * t * t * invT;\n        final double b3 = t * t * t;\n        final Point2D xy = new Point2D.Double((b1 * points[0]) + (b2 * points[2]) + b3, (b1 * points[1]) + (b2 * points[3]) + b3);\n        return xy;\n    }\n\n    protected double getY(double t) {\n        final double invT = 1 - t;\n        final double b1 = 3 * t * invT * invT;\n        final double b2 = 3 * t * t * invT;\n        final double b3 = t * t * t;\n        return (b1 * points[2]) + (b2 * points[3]) + b3;\n    }\n\n    public class PointUnit {\n\n        private final double distance;\n        private final double point;\n\n        public PointUnit(double distance, double point) {\n            this.distance = distance;\n            this.point = point;\n        }\n\n        public double getDistance() {\n            return distance;\n        }\n\n        public double getPoint() {\n            return point;\n        }\n\n    }\n\n}\n</code></pre>\n<p>If we do something like...</p>\n<pre><code>SplineInterpolator si = new SplineInterpolator(1, 0, 0, 1);\nfor (double t = 0; t &lt;= 1; t += 0.1) {\n    System.out.println(si.interpolate(t));\n}\n</code></pre>\n<p>We get something like...</p>\n<pre><code>0.0\n0.011111693284790492\n0.057295031944523504\n0.16510933001160544\n0.3208510585798438\n0.4852971690762217\n0.6499037832761319\n0.8090819765428142\n0.9286158775101805\n0.9839043020410436\n0.999702\n</code></pre>\n<p>Okay, now you're probably thinking, &quot;wait a minute, that's a linear progression!&quot;, but it's not, if you graphed it, you would find that the first three and last three values are very close together, and the others spread out by varying degrees, this is our &quot;progress&quot; value, how far along the timeline we should be</p>\n<p>So about now, your head should be about to explode (mine is) - this is why I say, use a framework!</p>\n<p>But how would you use it?!  This is the fun part, now remember, everything is variable, the duration of the animation, the speed of the object over time, the number of ticks or updates, it's all variable...</p>\n<p>This is important, as this is where the power of something like this comes in!  If for example, the animation is stalled due to some outside factor, this implementation is capable of simply skipping those &quot;frames&quot;, rather than getting bottlenecked and staggering.  This might sound like a bad thing, but trust me, this is all about fooling the eye into &quot;think&quot; something is changing ;)</p>\n<p>(The following is like 8fps, so it's pretty crappy)</p>\n<p><img src=\"https://i.stack.imgur.com/HDC8T.gif\" alt=\"Animate\" /></p>\n<pre><code>import java.awt.Color;\nimport java.awt.Dimension;\nimport java.awt.EventQueue;\nimport java.awt.Graphics;\nimport java.awt.Graphics2D;\nimport java.awt.event.ActionEvent;\nimport java.awt.event.ActionListener;\nimport java.awt.event.MouseAdapter;\nimport java.awt.event.MouseEvent;\nimport java.awt.geom.Point2D;\nimport java.util.ArrayList;\nimport java.util.List;\nimport javax.swing.JFrame;\nimport javax.swing.JPanel;\nimport javax.swing.Timer;\nimport javax.swing.UIManager;\nimport javax.swing.UnsupportedLookAndFeelException;\n\npublic class Test {\n\n    public static void main(String[] args) {\n        new Test();\n    }\n\n    public Test() {\n        EventQueue.invokeLater(new Runnable() {\n            @Override\n            public void run() {\n                try {\n                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());\n                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {\n                    ex.printStackTrace();\n                }\n\n                JFrame frame = new JFrame(&quot;Testing&quot;);\n                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n                frame.add(new TestPane());\n                frame.pack();\n                frame.setLocationRelativeTo(null);\n                frame.setVisible(true);\n            }\n        });\n    }\n\n    public class TestPane extends JPanel {\n\n        private int startAt = 0;\n        private int endAt;\n        private int x = startAt;\n        private Timer timer;\n        private SplineInterpolator splineInterpolator;\n        private long startTime = -1;\n        private long playTime = 5000; // 5 seconds\n\n        public TestPane() {\n            splineInterpolator = new SplineInterpolator(1, 0, 0, 1);\n            timer = new Timer(5, new ActionListener() {\n                @Override\n                public void actionPerformed(ActionEvent e) {\n                    if (startTime &lt; 0) {\n                        startTime = System.currentTimeMillis();\n                    }\n                    long now = System.currentTimeMillis();\n                    long duration = now - startTime;\n                    double t = (double) duration / (double) playTime;\n                    if (duration &gt;= playTime) {\n                        t = 1;\n                    }\n\n                    double progress = splineInterpolator.interpolate(t);\n\n                    x = startAt + ((int) Math.round((endAt - startAt) * progress));\n                    repaint();\n                }\n            });\n            timer.setInitialDelay(0);\n            addMouseListener(new MouseAdapter() {\n                @Override\n                public void mouseClicked(MouseEvent e) {\n                    if (!timer.isRunning()) {\n                        startTime = -1;\n                        startAt = 0;\n                        endAt = getWidth() - 10;\n                        timer.start();\n                    }\n                }\n            });\n        }\n\n        @Override\n        public Dimension getPreferredSize() {\n            return new Dimension(200, 200);\n        }\n\n        @Override\n        protected void paintComponent(Graphics g) {\n            super.paintComponent(g);\n            Graphics2D g2d = (Graphics2D) g.create();\n            g2d.setColor(Color.RED);\n            g2d.fillRect(x, (getHeight() / 2) - 5, 10, 10);\n            g2d.dispose();\n        }\n\n    }\n\n    public static class SplineInterpolator {\n\n        private final double points[];\n        private final List&lt;PointUnit&gt; normalisedCurve;\n\n        public SplineInterpolator(double x1, double y1, double x2, double y2) {\n            points = new double[]{x1, y1, x2, y2};\n\n            final List&lt;Double&gt; baseLengths = new ArrayList&lt;&gt;();\n            double prevX = 0;\n            double prevY = 0;\n            double cumulativeLength = 0;\n            for (double t = 0; t &lt;= 1; t += 0.01) {\n                Point2D xy = getXY(t);\n                double length = cumulativeLength\n                                + Math.sqrt((xy.getX() - prevX) * (xy.getX() - prevX)\n                                                + (xy.getY() - prevY) * (xy.getY() - prevY));\n\n                baseLengths.add(length);\n                cumulativeLength = length;\n                prevX = xy.getX();\n                prevY = xy.getY();\n            }\n\n            normalisedCurve = new ArrayList&lt;&gt;(baseLengths.size());\n            int index = 0;\n            for (double t = 0; t &lt;= 1; t += 0.01) {\n                double length = baseLengths.get(index++);\n                double normalLength = length / cumulativeLength;\n                normalisedCurve.add(new PointUnit(t, normalLength));\n            }\n        }\n\n        public double interpolate(double fraction) {\n            int low = 1;\n            int high = normalisedCurve.size() - 1;\n            int mid = 0;\n            while (low &lt;= high) {\n                mid = (low + high) / 2;\n\n                if (fraction &gt; normalisedCurve.get(mid).getPoint()) {\n                    low = mid + 1;\n                } else if (mid &gt; 0 &amp;&amp; fraction &lt; normalisedCurve.get(mid - 1).getPoint()) {\n                    high = mid - 1;\n                } else {\n                    break;\n                }\n            }\n            /*\n             * The answer lies between the &quot;mid&quot; item and its predecessor.\n             */\n            final PointUnit prevItem = normalisedCurve.get(mid - 1);\n            final double prevFraction = prevItem.getPoint();\n            final double prevT = prevItem.getDistance();\n\n            final PointUnit item = normalisedCurve.get(mid);\n            final double proportion = (fraction - prevFraction) / (item.getPoint() - prevFraction);\n            final double interpolatedT = prevT + (proportion * (item.getDistance() - prevT));\n            return getY(interpolatedT);\n        }\n\n        protected Point2D getXY(double t) {\n            final double invT = 1 - t;\n            final double b1 = 3 * t * invT * invT;\n            final double b2 = 3 * t * t * invT;\n            final double b3 = t * t * t;\n            final Point2D xy = new Point2D.Double((b1 * points[0]) + (b2 * points[2]) + b3, (b1 * points[1]) + (b2 * points[3]) + b3);\n            return xy;\n        }\n\n        protected double getY(double t) {\n            final double invT = 1 - t;\n            final double b1 = 3 * t * invT * invT;\n            final double b2 = 3 * t * t * invT;\n            final double b3 = t * t * t;\n            return (b1 * points[2]) + (b2 * points[3]) + b3;\n        }\n\n        public class PointUnit {\n\n            private final double distance;\n            private final double point;\n\n            public PointUnit(double distance, double point) {\n                this.distance = distance;\n                this.point = point;\n            }\n\n            public double getDistance() {\n                return distance;\n            }\n\n            public double getPoint() {\n                return point;\n            }\n\n        }\n\n    }\n\n}\n</code></pre>\n<p>So, apart from the <code>SplineInterpolator</code>, the magic happens inside the <code>ActionListener</code> for the <code>javax.swing.Timer</code> (and some in the <code>mouseClicked</code> event handler)</p>\n<p>Basically, this calculates the amount of time (<code>duration</code>) the animation has been playing, this becomes our normalised time <code>t</code> or <code>fraction</code> value (0-1) over the time line, we then use this to calculate our &quot;progression&quot; through the timeline with the <code>SplineInterpolator</code> and update the position of our object based on the difference between it's start and end positions multiplied by the current &quot;progression&quot;</p>\n<pre><code>if (startTime &lt; 0) {\n    startTime = System.currentTimeMillis();\n}\nlong now = System.currentTimeMillis();\nlong duration = now - startTime;\ndouble t = (double) duration / (double) playTime;\nif (duration &gt;= playTime) {\n    t = 1;\n}\n\ndouble progress = splineInterpolator.interpolate(t);\n\nx = startAt + ((int) Math.round((endAt - startAt) * progress));\nrepaint();\n</code></pre>\n<p>And voila, we have a ease-in and ease-out animation!</p>\n<p>Now, go use an animation framework!  It's just SOOOO much simpler :P</p>\n<ul>\n<li>For &quot;fast in/slow out&quot;, you can use <code>0, 0, 1, 1</code></li>\n<li>For &quot;slow in/fast out&quot;, you can use <code>0, 1, 0, 0</code></li>\n<li>For &quot;slow in&quot;, you can use <code>1, 0, 1, 1</code></li>\n<li>For &quot;slow out&quot;, you can use <code>0, 0, 0, 1</code></li>\n</ul>\n<p>(or at least those are the values I use)</p>\n<p>Experiment and see what you get</p>\n"}],"owner":{"account_id":5688060,"reputation":3,"user_id":4496939,"display_name":"Ken.B"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1791,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":28338188,"answer_count":1,"score":0,"last_activity_date":1642223620,"creation_date":1423107548,"question_id":28335787,"body_markdown":"I&#39;m trying to find an efficient, normal, or simple way to implementing easing-functions into my java program. I got the easing function to work but i feel like there is a more efficient way to do it; one that I can&#39;t see, possibly because of tunnel vision. here&#39;s the code I have; can someone show me what I should do differently or point me in the direction I need to go research\r\n\r\n\r\n\tpublic class slide extends JPanel implements Runnable {\r\n\r\n\t\tThread ease = new Thread(this);\r\n\t\tfloat total = 0;\r\n\t\tfloat dur;\r\n\r\n\t\tslide() {\r\n\r\n\t\t\tease.start();\r\n\t\t\tsetLayout(null);\r\n\r\n\t\t}\r\n\r\n\t\tpublic float calc(float t, float b, float c, float d) {\r\n\r\n\t\t\treturn c * t / d + b;\r\n\r\n\t\t}\r\n\r\n\t\tpublic void run() {\r\n\t\t\twhile (true) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tif (total &lt; 50) {\r\n\t\t\t\t\t\ttotal += 1;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tease.stop();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tsetBounds(400, Math.round(200 * total / 50 + 0), 250, 150);\r\n\t\t\t\t\trepaint();\r\n\t\t\t\t\tSystem.out.println(total + &quot; &quot; + dur);\r\n\t\t\t\t\tease.sleep(10);\r\n\t\t\t\t} catch (Exception e) {\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t}\r\n\r\nI tried to implement the calc() method for a linear easing function I found online but it&#39;s practically useless because I was forced I couldn&#39;t get it to work unless inserted the equation directly into the ","title":"How can I implement easing functions with a thread","body":"<p>I'm trying to find an efficient, normal, or simple way to implementing easing-functions into my java program. I got the easing function to work but i feel like there is a more efficient way to do it; one that I can't see, possibly because of tunnel vision. here's the code I have; can someone show me what I should do differently or point me in the direction I need to go research</p>\n\n<pre><code>public class slide extends JPanel implements Runnable {\n\n    Thread ease = new Thread(this);\n    float total = 0;\n    float dur;\n\n    slide() {\n\n        ease.start();\n        setLayout(null);\n\n    }\n\n    public float calc(float t, float b, float c, float d) {\n\n        return c * t / d + b;\n\n    }\n\n    public void run() {\n        while (true) {\n            try {\n                if (total &lt; 50) {\n                    total += 1;\n                } else {\n                    ease.stop();\n                }\n                setBounds(400, Math.round(200 * total / 50 + 0), 250, 150);\n                repaint();\n                System.out.println(total + \" \" + dur);\n                ease.sleep(10);\n            } catch (Exception e) {\n            }\n        }\n\n    }\n}\n</code></pre>\n\n<p>I tried to implement the calc() method for a linear easing function I found online but it's practically useless because I was forced I couldn't get it to work unless inserted the equation directly into the </p>\n"},{"tags":["java","arrays","string","exception","getmessage"],"comments":[{"owner":{"account_id":22450291,"reputation":364,"user_id":16653700,"display_name":"Alias Cartellano"},"score":1,"creation_date":1642193464,"post_id":70716232,"comment_id":125015038,"body_markdown":"Try moving the logic into some method(eg. `getHolder()`) that returns the message so your constructor can just have `super(getHolder());`.","body":"Try moving the logic into some method(eg. <code>getHolder()</code>) that returns the message so your constructor can just have <code>super(getHolder());</code>."}],"answers":[{"tags":[],"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1642222233,"creation_date":1642193552,"answer_id":70716399,"question_id":70716232,"body_markdown":"One way is to create a private static method, since static methods exist irrespective of constructors and instantiation:\r\n\r\n    public NoWheelsException(Car[] carArray){\r\n        super(buildMessageFrom(carArray));\r\n    }\r\n\r\n\r\n    private static String buildMessageFrom(Car[] cars) {\r\n        StringBuilder message = new StringBuilder();\r\n\r\n        String separator = &quot;&quot;;\r\n        for (Car car : cars) {\r\n            message.append(separator);\r\n            message.append(car.name);\r\n            separator = &quot;, &quot;;\r\n        }\r\n\r\n        return message.toString();\r\n    }\r\n\r\n(When building a String in a loop, StringBuilder is much more efficient than string concatenation.  Each iteration of ‘holder = holder + …’ would create a new String object that eventually needs to be garbage collected.)\r\n\r\nIf you’re comfortable with Streams, you can do it all on one line:\r\n\r\n    public NoWheelsException(Car[] carArray){\r\n        super(Arrays.stream(carArray).map(c -&gt; c.name).collect(Collectors.joining(&quot;, &quot;)));\r\n    }\r\n","title":"How do I get around the limitation of having to place super constructor in the first line?","body":"<p>One way is to create a private static method, since static methods exist irrespective of constructors and instantiation:</p>\n<pre><code>public NoWheelsException(Car[] carArray){\n    super(buildMessageFrom(carArray));\n}\n\n\nprivate static String buildMessageFrom(Car[] cars) {\n    StringBuilder message = new StringBuilder();\n\n    String separator = &quot;&quot;;\n    for (Car car : cars) {\n        message.append(separator);\n        message.append(car.name);\n        separator = &quot;, &quot;;\n    }\n\n    return message.toString();\n}\n</code></pre>\n<p>(When building a String in a loop, StringBuilder is much more efficient than string concatenation.  Each iteration of ‘holder = holder + …’ would create a new String object that eventually needs to be garbage collected.)</p>\n<p>If you’re comfortable with Streams, you can do it all on one line:</p>\n<pre><code>public NoWheelsException(Car[] carArray){\n    super(Arrays.stream(carArray).map(c -&gt; c.name).collect(Collectors.joining(&quot;, &quot;)));\n}\n</code></pre>\n"}],"owner":{"account_id":23338163,"reputation":27,"user_id":17936179,"display_name":"pron1ghtmare360"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":61,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":70716399,"answer_count":1,"score":0,"last_activity_date":1642222233,"creation_date":1642192393,"question_id":70716232,"body_markdown":"       public NoWheelsException(Car[] carArray){\r\n            String holder = &quot;&quot;;\r\n            for (int i=0; i&lt;carArray.length; i++) {\r\n                if (i == carArray.length - 1) {\r\n                    holder = holder + carArray[i].name;\r\n                }else{\r\n                    holder = holder + carArray[i].name + &quot;, &quot;;\r\n                }\r\n            }\r\n            String message = holder + &quot; has/have no wheels.&quot;;\r\n            super(message);\r\n        }\r\n\r\nWritten above is the ideal scenario that I&#39;d have for my code, with the super constructor at the end. Although, since super has to be the first statement, I cannot figure out how to develop the string out of the array inline. I can&#39;t straight up use `.toString()` as there&#39;s certain criteria into what the string should look like. I&#39;ve managed to figure out everything regarding Exceptions except this itty bitty detail. Any help would be greatly appreciated!\r\n\r\n## Update ##\r\nI got suggested to try Strin.join in order to link them together although unfortunately the object reference names differ from the name variable in the array objects...\r\n","title":"How do I get around the limitation of having to place super constructor in the first line?","body":"<pre><code>   public NoWheelsException(Car[] carArray){\n        String holder = &quot;&quot;;\n        for (int i=0; i&lt;carArray.length; i++) {\n            if (i == carArray.length - 1) {\n                holder = holder + carArray[i].name;\n            }else{\n                holder = holder + carArray[i].name + &quot;, &quot;;\n            }\n        }\n        String message = holder + &quot; has/have no wheels.&quot;;\n        super(message);\n    }\n</code></pre>\n<p>Written above is the ideal scenario that I'd have for my code, with the super constructor at the end. Although, since super has to be the first statement, I cannot figure out how to develop the string out of the array inline. I can't straight up use <code>.toString()</code> as there's certain criteria into what the string should look like. I've managed to figure out everything regarding Exceptions except this itty bitty detail. Any help would be greatly appreciated!</p>\n<h2>Update</h2>\n<p>I got suggested to try Strin.join in order to link them together although unfortunately the object reference names differ from the name variable in the array objects...</p>\n"},{"tags":["java","encryption","cryptography","aes"],"answers":[{"tags":[],"owner":{"account_id":401843,"reputation":89788,"user_id":768644,"display_name":"rzwitserloot"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1642046907,"creation_date":1642046907,"answer_id":70691303,"question_id":70691137,"body_markdown":"Reading is fundamental. The docs for `getOutputSize` indicate you can&#39;t use it for this purpose:\r\n\r\n&gt; The actual output length of the next update or doFinal call may be smaller than the length returned by this method.\r\n\r\nEncrypt it then check the resulting byte array, or do something with the return value of the `doFinal` method (which really tells you how many bytes it made), or make a `ByteArrayOutputStream` and send both the iv and the bytes from `doFinal` (taking into account what it returns) there, then ask it for the `byte[]`, or use a ByteBuffer.\r\n\r\nNote that CBC is dubious,  as is pass hashing with SHA-256. It works, but it&#39;s &#39;too fast&#39;, it&#39;s very easy for a hacker to try a few billion passwords a second. In general you shouldn&#39;t be handrolling this stuff.","title":"AES decryption gives extra zeros in the result","body":"<p>Reading is fundamental. The docs for <code>getOutputSize</code> indicate you can't use it for this purpose:</p>\n<blockquote>\n<p>The actual output length of the next update or doFinal call may be smaller than the length returned by this method.</p>\n</blockquote>\n<p>Encrypt it then check the resulting byte array, or do something with the return value of the <code>doFinal</code> method (which really tells you how many bytes it made), or make a <code>ByteArrayOutputStream</code> and send both the iv and the bytes from <code>doFinal</code> (taking into account what it returns) there, then ask it for the <code>byte[]</code>, or use a ByteBuffer.</p>\n<p>Note that CBC is dubious,  as is pass hashing with SHA-256. It works, but it's 'too fast', it's very easy for a hacker to try a few billion passwords a second. In general you shouldn't be handrolling this stuff.</p>\n"},{"tags":[],"owner":{"account_id":3421244,"reputation":35863,"user_id":2868801,"display_name":"dave_thompson_085"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1642221404,"creation_date":1642047468,"answer_id":70691359,"question_id":70691137,"body_markdown":"CBC mode as normally used requires padding, which your code correctly specifies, so the ciphertext (before adding and after removing the IV) is longer than the plaintext. You allocate a buffer for this longer size and `Cipher.doFinal` only stores the actual plaintext to it, leaving the remaining bytes with the value initialized by `new byte[n]` which is (always) zero. \r\n\r\n1. &lt;strike&gt;You could determine the size the output will be using `ciper.getOutputSize(int)` much as you did for encrypt&lt;/strike&gt; This doesn&#39;t work; Maarten is right. \r\n\r\n2. You could continue to overallocate the output buffer, but save the return value from `cipher.doFinal (input,off,len, output,off)` which is an `int` that tells you the number of bytes output (decrypted), and then use only that many bytes from the buffer e.g. `new String (output, 0, outlen, charset)` or `Arrays.copyOf(output, outlen)` \r\n\r\n3. But the easiest way is to use the `doFinal` overload that allocates the buffer itself (with the correct size) and returns it:\r\n`return cipher.doFinal(decodedCipherText, cipher.getBlockSize(), decodedCipherText.length - cipher.getBlockSize());`\r\n\r\nConcur with not using a simple hash on a _password_, but your example doesn&#39;t show or say if your &#39;key&#39; is really a password (handled by humans, and needing &#39;stretching&#39;) or just a text form of something with adequate entropy, for which a simple hash is okay.","title":"AES decryption gives extra zeros in the result","body":"<p>CBC mode as normally used requires padding, which your code correctly specifies, so the ciphertext (before adding and after removing the IV) is longer than the plaintext. You allocate a buffer for this longer size and <code>Cipher.doFinal</code> only stores the actual plaintext to it, leaving the remaining bytes with the value initialized by <code>new byte[n]</code> which is (always) zero.</p>\n<ol>\n<li><p><strike>You could determine the size the output will be using <code>ciper.getOutputSize(int)</code> much as you did for encrypt</strike> This doesn't work; Maarten is right.</p>\n</li>\n<li><p>You could continue to overallocate the output buffer, but save the return value from <code>cipher.doFinal (input,off,len, output,off)</code> which is an <code>int</code> that tells you the number of bytes output (decrypted), and then use only that many bytes from the buffer e.g. <code>new String (output, 0, outlen, charset)</code> or <code>Arrays.copyOf(output, outlen)</code></p>\n</li>\n<li><p>But the easiest way is to use the <code>doFinal</code> overload that allocates the buffer itself (with the correct size) and returns it:\n<code>return cipher.doFinal(decodedCipherText, cipher.getBlockSize(), decodedCipherText.length - cipher.getBlockSize());</code></p>\n</li>\n</ol>\n<p>Concur with not using a simple hash on a <em>password</em>, but your example doesn't show or say if your 'key' is really a password (handled by humans, and needing 'stretching') or just a text form of something with adequate entropy, for which a simple hash is okay.</p>\n"}],"owner":{"account_id":23925216,"reputation":3,"user_id":17920397,"display_name":"Kemat Rochi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":462,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70691359,"answer_count":2,"score":0,"last_activity_date":1642221404,"creation_date":1642045096,"question_id":70691137,"body_markdown":"I have the following code to encrypt-decrypt a string using a key and random IV. However during decrypt I get a lot of zeros at the end in my IDE. \r\n\r\n    public class Example {\r\n    \r\n        private static final String AES_MODE = &quot;AES/CBC/PKCS5Padding&quot;;\r\n        private static final String CHARSET = &quot;UTF-8&quot;;\r\n        private static final String HASH_ALGORITHM = &quot;SHA-256&quot;;\r\n        private static final String KEY = &quot;SUPER_SECURE_KEY&quot;;\r\n    \r\n        private static SecretKeySpec getSecretKey() throws NoSuchAlgorithmException, UnsupportedEncodingException {\r\n            final MessageDigest digest = MessageDigest.getInstance(HASH_ALGORITHM);\r\n            byte[] bytes = KEY.getBytes(CHARSET);\r\n            digest.update(bytes, 0, bytes.length);\r\n            byte[] key = digest.digest();\r\n    \r\n            return new SecretKeySpec(key, &quot;AES&quot;);\r\n        }\r\n    \r\n        public static String encrypt(String message) {\r\n            if(message == null || message.isEmpty()) {\r\n                return &quot;&quot;;\r\n            }\r\n    \r\n            try {\r\n                final SecretKeySpec key = getSecretKey();\r\n                byte[] cipherText = encrypt(key, message.getBytes(CHARSET));\r\n                return Base64.getEncoder().encodeToString(cipherText);\r\n            } catch (Exception e) {\r\n                System.out.print(e.toString());\r\n                return &quot;&quot;;\r\n            }\r\n        }\r\n    \r\n        private static byte[] encrypt(final SecretKeySpec key, final byte[] message) throws GeneralSecurityException {\r\n    \r\n            final Cipher cipher = Cipher.getInstance(AES_MODE);\r\n    \r\n            byte[] iv = new byte[cipher.getBlockSize()];\r\n            new SecureRandom().nextBytes(iv);\r\n    \r\n            IvParameterSpec ivSpec = new IvParameterSpec(iv);\r\n            cipher.init(Cipher.ENCRYPT_MODE, key, ivSpec);\r\n    \r\n            byte[] ciphertext = new byte[iv.length + cipher.getOutputSize(message.length)];\r\n            System.arraycopy(iv, 0, ciphertext, 0, iv.length);\r\n            cipher.doFinal(message, 0, message.length, ciphertext, iv.length);\r\n            return ciphertext;\r\n        }\r\n    \r\n        // ========================================================================================\r\n    \r\n        public static String decrypt(String base64EncodedCipherText) {\r\n            if(base64EncodedCipherText == null || base64EncodedCipherText.isEmpty()) {\r\n                return &quot;&quot;;\r\n            }\r\n    \r\n            try {\r\n                final SecretKeySpec key = getSecretKey();\r\n    \r\n                byte[] decodedCipherText = Base64.getDecoder().decode(base64EncodedCipherText);\r\n                byte[] decryptedBytes = decrypt(key, decodedCipherText);\r\n    \r\n                return new String(decryptedBytes, CHARSET);\r\n            } catch (Exception e) {\r\n                System.out.print(e.toString());\r\n                return &quot;&quot;;\r\n            }\r\n        }\r\n    \r\n        private static byte[] decrypt(final SecretKeySpec key, final byte[] decodedCipherText) throws GeneralSecurityException {\r\n            final Cipher cipher = Cipher.getInstance(AES_MODE);\r\n    \r\n            IvParameterSpec ivSpec = new IvParameterSpec(decodedCipherText, 0, cipher.getBlockSize());\r\n            cipher.init(Cipher.DECRYPT_MODE, key, ivSpec);\r\n    \r\n            int plainTextLength  = decodedCipherText.length - cipher.getBlockSize();\r\n            byte[] plaintext = new byte[plainTextLength];\r\n    \r\n            cipher.doFinal(decodedCipherText, cipher.getBlockSize(), plainTextLength, plaintext, 0);\r\n    \r\n            return plaintext;\r\n    \r\n            // return cipher.doFinal(decodedCipherText);\r\n        }\r\n    \r\n        // ========================================================================================\r\n    \r\n        public static void main(String[] args) {\r\n    \r\n            String message = &quot;Message to encrypt.&quot;;\r\n    \r\n            String encryptedText = encrypt(message);\r\n            System.out.println(encryptedText);\r\n    \r\n            String decryptedText= decrypt(encryptedText);\r\n            System.out.println(decryptedText);\r\n    \r\n        }\r\n    \r\n    }\r\n\r\nThe output I get in IntelliJ IDEA is:\r\n[here][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/ZqfnI.png\r\n\r\nI think I am correctly separating the IV from the ciphertext, and decrypt the ciphertext with the key and the random IV. But still end up getting zeros in the end. Any pointers to what is wrong?","title":"AES decryption gives extra zeros in the result","body":"<p>I have the following code to encrypt-decrypt a string using a key and random IV. However during decrypt I get a lot of zeros at the end in my IDE.</p>\n<pre><code>public class Example {\n\n    private static final String AES_MODE = &quot;AES/CBC/PKCS5Padding&quot;;\n    private static final String CHARSET = &quot;UTF-8&quot;;\n    private static final String HASH_ALGORITHM = &quot;SHA-256&quot;;\n    private static final String KEY = &quot;SUPER_SECURE_KEY&quot;;\n\n    private static SecretKeySpec getSecretKey() throws NoSuchAlgorithmException, UnsupportedEncodingException {\n        final MessageDigest digest = MessageDigest.getInstance(HASH_ALGORITHM);\n        byte[] bytes = KEY.getBytes(CHARSET);\n        digest.update(bytes, 0, bytes.length);\n        byte[] key = digest.digest();\n\n        return new SecretKeySpec(key, &quot;AES&quot;);\n    }\n\n    public static String encrypt(String message) {\n        if(message == null || message.isEmpty()) {\n            return &quot;&quot;;\n        }\n\n        try {\n            final SecretKeySpec key = getSecretKey();\n            byte[] cipherText = encrypt(key, message.getBytes(CHARSET));\n            return Base64.getEncoder().encodeToString(cipherText);\n        } catch (Exception e) {\n            System.out.print(e.toString());\n            return &quot;&quot;;\n        }\n    }\n\n    private static byte[] encrypt(final SecretKeySpec key, final byte[] message) throws GeneralSecurityException {\n\n        final Cipher cipher = Cipher.getInstance(AES_MODE);\n\n        byte[] iv = new byte[cipher.getBlockSize()];\n        new SecureRandom().nextBytes(iv);\n\n        IvParameterSpec ivSpec = new IvParameterSpec(iv);\n        cipher.init(Cipher.ENCRYPT_MODE, key, ivSpec);\n\n        byte[] ciphertext = new byte[iv.length + cipher.getOutputSize(message.length)];\n        System.arraycopy(iv, 0, ciphertext, 0, iv.length);\n        cipher.doFinal(message, 0, message.length, ciphertext, iv.length);\n        return ciphertext;\n    }\n\n    // ========================================================================================\n\n    public static String decrypt(String base64EncodedCipherText) {\n        if(base64EncodedCipherText == null || base64EncodedCipherText.isEmpty()) {\n            return &quot;&quot;;\n        }\n\n        try {\n            final SecretKeySpec key = getSecretKey();\n\n            byte[] decodedCipherText = Base64.getDecoder().decode(base64EncodedCipherText);\n            byte[] decryptedBytes = decrypt(key, decodedCipherText);\n\n            return new String(decryptedBytes, CHARSET);\n        } catch (Exception e) {\n            System.out.print(e.toString());\n            return &quot;&quot;;\n        }\n    }\n\n    private static byte[] decrypt(final SecretKeySpec key, final byte[] decodedCipherText) throws GeneralSecurityException {\n        final Cipher cipher = Cipher.getInstance(AES_MODE);\n\n        IvParameterSpec ivSpec = new IvParameterSpec(decodedCipherText, 0, cipher.getBlockSize());\n        cipher.init(Cipher.DECRYPT_MODE, key, ivSpec);\n\n        int plainTextLength  = decodedCipherText.length - cipher.getBlockSize();\n        byte[] plaintext = new byte[plainTextLength];\n\n        cipher.doFinal(decodedCipherText, cipher.getBlockSize(), plainTextLength, plaintext, 0);\n\n        return plaintext;\n\n        // return cipher.doFinal(decodedCipherText);\n    }\n\n    // ========================================================================================\n\n    public static void main(String[] args) {\n\n        String message = &quot;Message to encrypt.&quot;;\n\n        String encryptedText = encrypt(message);\n        System.out.println(encryptedText);\n\n        String decryptedText= decrypt(encryptedText);\n        System.out.println(decryptedText);\n\n    }\n\n}\n</code></pre>\n<p>The output I get in IntelliJ IDEA is:\n<a href=\"https://i.stack.imgur.com/ZqfnI.png\" rel=\"nofollow noreferrer\">here</a></p>\n<p>I think I am correctly separating the IV from the ciphertext, and decrypt the ciphertext with the key and the random IV. But still end up getting zeros in the end. Any pointers to what is wrong?</p>\n"},{"tags":["java","netbeans","jar"],"answers":[{"tags":[],"owner":{"account_id":1711670,"reputation":2138,"user_id":1569604,"accept_rate":50,"display_name":"maslan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1538575782,"creation_date":1538575782,"answer_id":52628940,"question_id":52628641,"body_markdown":"Theoretically JAR files cannot contain dependencies within, as java does not support it out of the box. WAR and EAR archives can. What You want to do is not standard, but is named fat jar. Fat jars are used i.e. by spring-boot maven plugin, but you could try this: \r\nhttps://dzone.com/articles/how-build-fat-jar-using\r\nAnd some more explanation:\r\nhttps://stackoverflow.com/questions/2212913/netbeans-deploying-all-in-one-jar","title":"Create JAR file using Net Beans including all dependent libs and folders","body":"<p>Theoretically JAR files cannot contain dependencies within, as java does not support it out of the box. WAR and EAR archives can. What You want to do is not standard, but is named fat jar. Fat jars are used i.e. by spring-boot maven plugin, but you could try this: \n<a href=\"https://dzone.com/articles/how-build-fat-jar-using\" rel=\"nofollow noreferrer\">https://dzone.com/articles/how-build-fat-jar-using</a>\nAnd some more explanation:\n<a href=\"https://stackoverflow.com/questions/2212913/netbeans-deploying-all-in-one-jar\">NetBeans - deploying all in one jar</a></p>\n"},{"tags":[],"owner":{"account_id":23945679,"reputation":1,"user_id":17938059,"display_name":"Tim de Vries"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1642219768,"creation_date":1642219768,"answer_id":70718812,"question_id":52628641,"body_markdown":"Use tecreations Deploy. Put all your sources into a path declared as Tecreations.getProjectPath(), run BuildAll to create your corresponding classes, put your jars in projectpath/jars and select the appropriate settings, whether to include jars, sources or classes. Select your main class and click Deploy. Unsigned and signed output jars are produced in user/Documents.\r\n\r\nDownload: https://tecreations.ca/java/downloads/release.","title":"Create JAR file using Net Beans including all dependent libs and folders","body":"<p>Use tecreations Deploy. Put all your sources into a path declared as Tecreations.getProjectPath(), run BuildAll to create your corresponding classes, put your jars in projectpath/jars and select the appropriate settings, whether to include jars, sources or classes. Select your main class and click Deploy. Unsigned and signed output jars are produced in user/Documents.</p>\n<p>Download: <a href=\"https://tecreations.ca/java/downloads/release\" rel=\"nofollow noreferrer\">https://tecreations.ca/java/downloads/release</a>.</p>\n"}],"owner":{"account_id":14294363,"reputation":659,"user_id":10325459,"display_name":"Dinesh"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":552,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":52628940,"answer_count":2,"score":0,"last_activity_date":1642219768,"creation_date":1538574831,"question_id":52628641,"body_markdown":"I have created a JavaFX application using NetBeans IDE and below is my folder structure.\r\n\r\n[![Project Root Folder][1]][1]\r\n\r\n[![dist][2]][2]\r\nI want to a build a single jar file including all dependencies for this jar to work properly.\r\nThis jar requires testplanner and batch folder from project root directory and files inside dist folder to work properly.\r\nHow can I package all this to a single jar file?\r\n\r\n  [1]: https://i.stack.imgur.com/otC3L.png\r\n  [2]: https://i.stack.imgur.com/btBq6.png","title":"Create JAR file using Net Beans including all dependent libs and folders","body":"<p>I have created a JavaFX application using NetBeans IDE and below is my folder structure.</p>\n\n<p><a href=\"https://i.stack.imgur.com/otC3L.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/otC3L.png\" alt=\"Project Root Folder\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/btBq6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/btBq6.png\" alt=\"dist\"></a>\nI want to a build a single jar file including all dependencies for this jar to work properly.\nThis jar requires testplanner and batch folder from project root directory and files inside dist folder to work properly.\nHow can I package all this to a single jar file?</p>\n"},{"tags":["java","postgresql","spring-boot","jdbc","spring-jdbc"],"answers":[{"tags":[],"owner":{"account_id":145899,"reputation":8031,"user_id":356011,"accept_rate":95,"display_name":"marathon"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1642217532,"creation_date":1642217532,"answer_id":70718672,"question_id":70717792,"body_markdown":"adding spaces around the parameter and casting it in the sql query, e.g.\r\n\r\n```\r\nselect * from testing where col1 @&gt; ARRAY[ CAST ( :item AS text) ]\r\n```\r\nfixed it","title":"How to used a NamedJDBCTemplate placeholder in the where clause of a postgres ARRAY comparison?","body":"<p>adding spaces around the parameter and casting it in the sql query, e.g.</p>\n<pre><code>select * from testing where col1 @&gt; ARRAY[ CAST ( :item AS text) ]\n</code></pre>\n<p>fixed it</p>\n"}],"owner":{"account_id":145899,"reputation":8031,"user_id":356011,"accept_rate":95,"display_name":"marathon"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":380,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1642217532,"creation_date":1642204906,"question_id":70717792,"body_markdown":"I&#39;m attempting to do a postgres query with an `ARRAY`/GIN where clause using spring-jdbc. \r\n `NamedParameterJdbcTemplate` throws an error when I attempt to use a named parameter inside an `ARRAY[]`.\r\n\r\nminimal example:\r\n```lang-sql\r\nCREATE TABLE testing(col1 text[]);\r\nINSERT INTO testing VALUES (&#39;{item1, item2, item3}&#39;);\r\nINSERT INTO testing VALUES (&#39;{item4, item5, item6}&#39;);\r\n\r\n=&gt; select * from testing where col1 @&gt; ARRAY[&#39;item4&#39;];\r\n        col1         \r\n---------------------\r\n {item4,item5,item6}\r\n```\r\nJava:\r\n```lang-java\r\n        var sql = &quot;select * from testing where col1 @&gt; ARRAY[:item]&quot;;\r\n        var paramMap = Map.of(&quot;item&quot;, &quot;item4&quot;);\r\n        var results = namedJDBCTemplate.queryForList(sql, paramMap);\r\n```\r\nException:\r\n```\r\norg.springframework.dao.InvalidDataAccessApiUsageException: No value supplied for the SQL parameter &#39;item]&#39;: No value registered for key &#39;item]&#39;\r\n\tat org.springframework.jdbc.core.namedparam.NamedParameterUtils.buildValueArray\r\n\tat org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.getPreparedStatementCreator\r\n\tat org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.getPreparedStatementCreator\r\n\tat org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.query\r\n\tat org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForList\r\n\tat org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForList","title":"How to used a NamedJDBCTemplate placeholder in the where clause of a postgres ARRAY comparison?","body":"<p>I'm attempting to do a postgres query with an <code>ARRAY</code>/GIN where clause using spring-jdbc.\n<code>NamedParameterJdbcTemplate</code> throws an error when I attempt to use a named parameter inside an <code>ARRAY[]</code>.</p>\n<p>minimal example:</p>\n<pre class=\"lang-sql prettyprint-override\"><code>CREATE TABLE testing(col1 text[]);\nINSERT INTO testing VALUES ('{item1, item2, item3}');\nINSERT INTO testing VALUES ('{item4, item5, item6}');\n\n=&gt; select * from testing where col1 @&gt; ARRAY['item4'];\n        col1         \n---------------------\n {item4,item5,item6}\n</code></pre>\n<p>Java:</p>\n<pre class=\"lang-java prettyprint-override\"><code>        var sql = &quot;select * from testing where col1 @&gt; ARRAY[:item]&quot;;\n        var paramMap = Map.of(&quot;item&quot;, &quot;item4&quot;);\n        var results = namedJDBCTemplate.queryForList(sql, paramMap);\n</code></pre>\n<p>Exception:</p>\n<pre><code>org.springframework.dao.InvalidDataAccessApiUsageException: No value supplied for the SQL parameter 'item]': No value registered for key 'item]'\n    at org.springframework.jdbc.core.namedparam.NamedParameterUtils.buildValueArray\n    at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.getPreparedStatementCreator\n    at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.getPreparedStatementCreator\n    at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.query\n    at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForList\n    at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForList\n</code></pre>\n"},{"tags":["java","schedule"],"comments":[{"owner":{"account_id":5012123,"reputation":13192,"user_id":4028085,"display_name":"brso05"},"score":0,"creation_date":1440596652,"post_id":32228345,"comment_id":52339156,"body_markdown":"You can use a timer. There are libraries out there you can use to do this...","body":"You can use a timer. There are libraries out there you can use to do this..."},{"owner":{"account_id":3598094,"reputation":701,"user_id":3002166,"accept_rate":52,"display_name":"user3002166"},"score":1,"creation_date":1440596850,"post_id":32228345,"comment_id":52339316,"body_markdown":"you might be better off using a scheduler: http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ScheduledExecutorService.html","body":"you might be better off using a scheduler: <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ScheduledExecutorService.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/7/docs/api/java/util/concurrent/&hellip;</a>"},{"owner":{"account_id":1087930,"reputation":845,"user_id":1083220,"accept_rate":17,"display_name":"Misgevolution"},"score":0,"creation_date":1440596898,"post_id":32228345,"comment_id":52339357,"body_markdown":"It has already been answered here http://stackoverflow.com/questions/4044729/java-timer-task-schedule","body":"It has already been answered here <a href=\"http://stackoverflow.com/questions/4044729/java-timer-task-schedule\" title=\"java timer task schedule\">stackoverflow.com/questions/4044729/java-timer-task-schedule</a>"}],"answers":[{"tags":[],"owner":{"account_id":389881,"reputation":53027,"user_id":749588,"accept_rate":65,"display_name":"Jean Logeart"},"down_vote_count":0,"up_vote_count":23,"is_accepted":true,"score":23,"last_activity_date":1440597064,"creation_date":1440596722,"answer_id":32228421,"question_id":32228345,"body_markdown":"Use a [``ScheduledExecutorService``][1]:\r\n\r\n    ScheduledExecutorService ses = Executors.newSingleThreadScheduledExecutor();\r\n    ses.scheduleAtFixedRate(new Runnable() {\r\n        @Override\r\n        public void run() {\r\n            sendScreenShot();\r\n        }\r\n    }, 0, 1, TimeUnit.HOURS);\r\n\r\nPrefer using a ``ScheduledExecutorService`` over ``Timer``: \r\nhttps://stackoverflow.com/questions/409932/java-timer-vs-executorservice\r\n\r\n  [1]: http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ScheduledExecutorService.html","title":"Run java function every hour","body":"<p>Use a <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ScheduledExecutorService.html\" rel=\"noreferrer\"><code>ScheduledExecutorService</code></a>:</p>\n\n<pre><code>ScheduledExecutorService ses = Executors.newSingleThreadScheduledExecutor();\nses.scheduleAtFixedRate(new Runnable() {\n    @Override\n    public void run() {\n        sendScreenShot();\n    }\n}, 0, 1, TimeUnit.HOURS);\n</code></pre>\n\n<p>Prefer using a <code>ScheduledExecutorService</code> over <code>Timer</code>: \n<a href=\"https://stackoverflow.com/questions/409932/java-timer-vs-executorservice\">Java Timer vs ExecutorService?</a></p>\n"},{"tags":[],"owner":{"account_id":2172319,"reputation":1248,"user_id":1923959,"accept_rate":50,"display_name":"twentylemon"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1440597213,"creation_date":1440596796,"answer_id":32228450,"question_id":32228345,"body_markdown":"java&#39;s `Timer` works fine here.\r\n\r\nhttp://docs.oracle.com/javase/6/docs/api/java/util/Timer.html\r\n\r\n    Timer t = new Timer();\r\n    t.scheduleAtFixedRate(new TimerTask() {\r\n        public void run() {\r\n            // ...\r\n        }\r\n    }, delay, 1 * 3600 * 1000); // 1 hour between calls","title":"Run java function every hour","body":"<p>java's <code>Timer</code> works fine here.</p>\n\n<p><a href=\"http://docs.oracle.com/javase/6/docs/api/java/util/Timer.html\" rel=\"nofollow\">http://docs.oracle.com/javase/6/docs/api/java/util/Timer.html</a></p>\n\n<pre><code>Timer t = new Timer();\nt.scheduleAtFixedRate(new TimerTask() {\n    public void run() {\n        // ...\n    }\n}, delay, 1 * 3600 * 1000); // 1 hour between calls\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2418222,"reputation":408,"user_id":2111834,"accept_rate":86,"display_name":"Edwin Lambregts"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1457790601,"creation_date":1457790601,"answer_id":35958447,"question_id":32228345,"body_markdown":"According to [this article by Oracle][1], it&#39;s also possible to use the `@Schedule` annotation:\r\n\r\n    @Schedule(hour = &quot;*&quot;)\r\n    public void doSomething() {\r\n        System.out.println(&quot;hello world&quot;);\r\n    }\r\n\r\nFor example, seconds and minutes can have values 0-59, hours 0-23, months 1-12.\r\n\r\nFurther options are also described there.\r\n\r\n  [1]: http://docs.oracle.com/javaee/6/tutorial/doc/bnboy.html","title":"Run java function every hour","body":"<p>According to <a href=\"http://docs.oracle.com/javaee/6/tutorial/doc/bnboy.html\" rel=\"nofollow\">this article by Oracle</a>, it's also possible to use the <code>@Schedule</code> annotation:</p>\n\n<pre><code>@Schedule(hour = \"*\")\npublic void doSomething() {\n    System.out.println(\"hello world\");\n}\n</code></pre>\n\n<p>For example, seconds and minutes can have values 0-59, hours 0-23, months 1-12.</p>\n\n<p>Further options are also described there.</p>\n"},{"tags":[],"owner":{"account_id":6705957,"reputation":687,"user_id":5170898,"display_name":"Abdelhalim FELLAGUE CHEBRA"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1533192944,"creation_date":1533192944,"answer_id":51647297,"question_id":32228345,"body_markdown":"For this type of period execution, meaning every day or every hour, all you need is using a Timer like this :\r\n\r\n    public static void main(String[] args) throws InterruptedException {\r\n            Calendar today = Calendar.getInstance();\r\n            today.set(Calendar.HOUR_OF_DAY, 7);\r\n            today.set(Calendar.MINUTE, 45);\r\n            today.set(Calendar.SECOND, 0);\r\n    \r\n            Timer timer = new Timer();\r\n            TimerTask task = new TimerTask() {\r\n                @Override\r\n                public void run() {\r\n                    System.out.println(&quot;I am the timer&quot;);\r\n                }\r\n            };\r\n    //        timer.schedule(task, today.getTime(), TimeUnit.MILLISECONDS.convert(1, TimeUnit.DAYS)); // period: 1 day\r\n            timer.schedule(task, today.getTime(), TimeUnit.MILLISECONDS.convert(5, TimeUnit.SECONDS)); // period: 5 seconds\r\n    \r\n        }\r\nthis exemple will execute the timetask every 5 seconds from the current date and 7:45 am.\r\nGood Luck.","title":"Run java function every hour","body":"<p>For this type of period execution, meaning every day or every hour, all you need is using a Timer like this :</p>\n\n<pre><code>public static void main(String[] args) throws InterruptedException {\n        Calendar today = Calendar.getInstance();\n        today.set(Calendar.HOUR_OF_DAY, 7);\n        today.set(Calendar.MINUTE, 45);\n        today.set(Calendar.SECOND, 0);\n\n        Timer timer = new Timer();\n        TimerTask task = new TimerTask() {\n            @Override\n            public void run() {\n                System.out.println(\"I am the timer\");\n            }\n        };\n//        timer.schedule(task, today.getTime(), TimeUnit.MILLISECONDS.convert(1, TimeUnit.DAYS)); // period: 1 day\n        timer.schedule(task, today.getTime(), TimeUnit.MILLISECONDS.convert(5, TimeUnit.SECONDS)); // period: 5 seconds\n\n    }\n</code></pre>\n\n<p>this exemple will execute the timetask every 5 seconds from the current date and 7:45 am.\nGood Luck.</p>\n"},{"tags":[],"owner":{"account_id":5717094,"reputation":61,"user_id":4516893,"display_name":"Palmeta"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1642216176,"creation_date":1642216176,"answer_id":70718597,"question_id":32228345,"body_markdown":"    while (true) {\r\n\t\t\t\r\n\t\t\tDateTime d = new DateTime();\r\n\t\t\tswitch(d.getMinuteOfHour()) {\r\n\t\t\t\t\r\n\t\t\tcase 56:\r\n\t\t\t\trunHourly();\r\n\t\t\t\tbreak;\r\n\t\t\t\t\r\n\t\t\tcase 41:\r\n\t\t\t\tif(d.getHourOfDay() == 2) {\r\n\t\t\t\t\trunAt0241Daily();\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\t}\t\r\n\t\t\tSUM.wait(59000);\r\n\t\t}\r\n\r\nHow about this for something you can control and understand?","title":"Run java function every hour","body":"<pre><code>while (true) {\n        \n        DateTime d = new DateTime();\n        switch(d.getMinuteOfHour()) {\n            \n        case 56:\n            runHourly();\n            break;\n            \n        case 41:\n            if(d.getHourOfDay() == 2) {\n                runAt0241Daily();\n            }\n            break;\n        }   \n        SUM.wait(59000);\n    }\n</code></pre>\n<p>How about this for something you can control and understand?</p>\n"}],"owner":{"account_id":6671145,"reputation":401,"user_id":5147243,"accept_rate":38,"display_name":"Jannik"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":25270,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":32228421,"answer_count":5,"score":6,"last_activity_date":1642216176,"creation_date":1440596546,"question_id":32228345,"body_markdown":"I want to run a function every hour, to email users a hourly screenshot of their progress. I code set up to do so in a function called sendScreenshot()\r\n\r\nHow can I run this timer in the background to call the function sendScreenshot() every hour, while the rest of the program is running?\r\n\r\nHere is my code:\r\n\r\n    public int onLoop() throws Exception{\r\n\t\tif(getLocalPlayer().getHealth() == 0){\r\n\t\t\tplayerHasDied();\r\n\t\t}\r\n\t\treturn Calculations.random(200, 300);\r\n\t\t\r\n\t}\r\n\t\r\n\tpublic void sendScreenShot() throws Exception{\r\n\t\tRobot robot = new Robot();\r\n\t\tBufferedImage screenshot = robot.createScreenCapture(new Rectangle(Toolkit.getDefaultToolkit().getScreenSize()));\r\n\t\tscreenshotNumber = getNewestScreenshot();\r\n\t\tfileName = new File(&quot;C:/Users/%username%/Dreambot/Screenshots/Screenshot&quot; + screenshotNumber +&quot;.&quot;);\r\n\t\tImageIO.write(screenshot, &quot;JPEG&quot;, fileName);\r\n\t\t\r\n\t\tmail.setSubject(&quot;Your hourly progress on account &quot; + accName);\r\n\t\tmail.setBody(&quot;Here is your hourly progress report on account &quot; + accName +&quot;. Progress is attached in this mail.&quot;);\r\n\t\tmail.addAttachment(fileName.toString());\r\n\t\tmail.setTo(reciepents);\r\n\t\tmail.send();\r\n\t\t\r\n\t}","title":"Run java function every hour","body":"<p>I want to run a function every hour, to email users a hourly screenshot of their progress. I code set up to do so in a function called sendScreenshot()</p>\n\n<p>How can I run this timer in the background to call the function sendScreenshot() every hour, while the rest of the program is running?</p>\n\n<p>Here is my code:</p>\n\n<pre><code>public int onLoop() throws Exception{\n    if(getLocalPlayer().getHealth() == 0){\n        playerHasDied();\n    }\n    return Calculations.random(200, 300);\n\n}\n\npublic void sendScreenShot() throws Exception{\n    Robot robot = new Robot();\n    BufferedImage screenshot = robot.createScreenCapture(new Rectangle(Toolkit.getDefaultToolkit().getScreenSize()));\n    screenshotNumber = getNewestScreenshot();\n    fileName = new File(\"C:/Users/%username%/Dreambot/Screenshots/Screenshot\" + screenshotNumber +\".\");\n    ImageIO.write(screenshot, \"JPEG\", fileName);\n\n    mail.setSubject(\"Your hourly progress on account \" + accName);\n    mail.setBody(\"Here is your hourly progress report on account \" + accName +\". Progress is attached in this mail.\");\n    mail.addAttachment(fileName.toString());\n    mail.setTo(reciepents);\n    mail.send();\n\n}\n</code></pre>\n"},{"tags":["java","spring","mongodb","maven","spring-boot"],"comments":[{"owner":{"account_id":14766609,"reputation":4337,"user_id":10664446,"display_name":"stacker"},"score":0,"creation_date":1542667452,"post_id":53383570,"comment_id":93643404,"body_markdown":"you forgot to add the port in your url","body":"you forgot to add the port in your url"},{"owner":{"account_id":12546089,"reputation":327,"user_id":9129342,"display_name":"paul035"},"score":0,"creation_date":1681021466,"post_id":53383570,"comment_id":133990336,"body_markdown":"You can refer this, https://paulsofts.com/crud-operations-how-to-integrate-spring-boot-with-monogdb","body":"You can refer this, <a href=\"https://paulsofts.com/crud-operations-how-to-integrate-spring-boot-with-monogdb\" rel=\"nofollow noreferrer\">paulsofts.com/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":11773221,"reputation":535,"user_id":8615621,"display_name":"Federico Gatti"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1542704706,"creation_date":1542704706,"answer_id":53389527,"question_id":53383570,"body_markdown":"Are you sure about your MongoDB URI? Usually, the URI has the form ```        mongodb://localhost:27017/foo```.\r\n\r\nIf you use **Spring-boot** instead of using a Configuration bean I suggest you use _application.properties_ file. In this file write a property likes ```spring.data.mongodb.uri=mongodb://localhost:27017/foo``` and **Spring-boot** automatically injects the properties in MongoClient without any configuration at the code level.","title":"Java Spring Boot MongoDB Configuration","body":"<p>Are you sure about your MongoDB URI? Usually, the URI has the form <code>mongodb://localhost:27017/foo</code>.</p>\n\n<p>If you use <strong>Spring-boot</strong> instead of using a Configuration bean I suggest you use <em>application.properties</em> file. In this file write a property likes <code>spring.data.mongodb.uri=mongodb://localhost:27017/foo</code> and <strong>Spring-boot</strong> automatically injects the properties in MongoClient without any configuration at the code level.</p>\n"},{"tags":[],"owner":{"account_id":13570044,"reputation":412,"user_id":9789035,"display_name":"Gabriel Garc&#237;a Garrido"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1563261890,"creation_date":1563261890,"answer_id":57052036,"question_id":53383570,"body_markdown":"Try as @Federico Gatti said by configuring Mongo iuth properties file:\r\n\r\n```\r\nspring.data.mongodb.database=MongoDatabaseName\r\nspring.data.mongodb.host=localhost\r\nspring.data.mongodb.port=27017\r\n```","title":"Java Spring Boot MongoDB Configuration","body":"<p>Try as @Federico Gatti said by configuring Mongo iuth properties file:</p>\n\n<pre><code>spring.data.mongodb.database=MongoDatabaseName\nspring.data.mongodb.host=localhost\nspring.data.mongodb.port=27017\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15369366,"reputation":19,"user_id":12046321,"display_name":"Hitesh Yadav"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1642215866,"creation_date":1642215866,"answer_id":70718573,"question_id":53383570,"body_markdown":"Use properties file to configure your database with application and let the spring boot do everything for you with db configuration.\r\n\r\nGo to the resources/application.properties file, and add the following content to it:\r\n\r\n    spring.data.mongodb.host=localhost\r\n    spring.data.mongodb.port=27017\r\n    spring.data.mongodb.database=mydatabase\r\n\r\nThat will allow your application to correctly connect to your MongoDB database.\r\n\r\nAlso, Go to the main application class, and add the following annotation before its declaration:\r\n\r\n    @EnableMongoRepositories(basePackageClasses = foo.class)\r\n","title":"Java Spring Boot MongoDB Configuration","body":"<p>Use properties file to configure your database with application and let the spring boot do everything for you with db configuration.</p>\n<p>Go to the resources/application.properties file, and add the following content to it:</p>\n<pre><code>spring.data.mongodb.host=localhost\nspring.data.mongodb.port=27017\nspring.data.mongodb.database=mydatabase\n</code></pre>\n<p>That will allow your application to correctly connect to your MongoDB database.</p>\n<p>Also, Go to the main application class, and add the following annotation before its declaration:</p>\n<pre><code>@EnableMongoRepositories(basePackageClasses = foo.class)\n</code></pre>\n"}],"owner":{"account_id":14784446,"reputation":11,"user_id":10677082,"display_name":"Djypzi"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7959,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1642215866,"creation_date":1542666518,"question_id":53383570,"body_markdown":"I am new and I try to develop an API with Java Spring Boot.\r\nI have a problem with MongoDB Config and I have no problem in another project. I don&#39;t understand why.\r\nI have already looked but the solutions proposed do not work.\r\n\r\n**SBApplication.java :**  \r\n\r\n    package basket;\r\n\r\n    import org.springframework.boot.SpringApplication;\r\n    import org.springframework.boot.autoconfigure.EnableAutoConfiguration;\r\n    import org.springframework.boot.autoconfigure.SpringBootApplication;\r\n    import org.springframework.boot.autoconfigure.data.mongo.MongoRepositoriesAutoConfiguration;\r\n    import org.springframework.boot.autoconfigure.domain.EntityScan;\r\n    import org.springframework.boot.autoconfigure.mongo.MongoAutoConfiguration;\r\n\r\n    import springfox.documentation.swagger2.annotations.EnableSwagger2;\r\n\r\n    @SpringBootApplication (scanBasePackages = { &quot;basket.instrastructure.dao&quot; })\r\n    @EnableSwagger2\r\n    @EnableAutoConfiguration //(exclude={MongoAutoConfiguration.class, MongoRepositoriesAutoConfiguration.class})\r\n    public class SBApplication {\r\n\r\n        public static void main(String[] args) {\r\n            SpringApplication.run(SBApplication.class, args);\r\n        }\r\n    }\r\n\r\n**BasketRepository.java :** \r\n\r\n    package basket.infrastructure.dao;\r\n\r\n    import java.util.ArrayList;\r\n\r\n    import org.springframework.data.mongodb.repository.MongoRepository;\r\n    import org.springframework.stereotype.Repository;\r\n\r\n    import basket.domaine.model.Basket;\r\n\r\n    @Repository \r\n    public interface BasketRepository extends MongoRepository&lt;Basket, Long&gt; {\r\n\t\r\n        public ArrayList&lt;Basket&gt; findAll();\r\n        public Basket findById(String id);    \r\n    }\r\n\r\n**ItemRepository.java :** \r\n\r\n    package basket.infrastructure.dao;\r\n\r\n    import java.util.ArrayList;\r\n\r\n    import org.springframework.data.mongodb.repository.MongoRepository;\r\n    import org.springframework.stereotype.Repository;\r\n\r\n    import basket.domaine.model.Item;\r\n\r\n\r\n    @Repository\r\n    public interface ItemRepository extends MongoRepository&lt;Item, Long&gt; {\r\n        public Item findByName(String name);\r\n        public ArrayList&lt;Item&gt; findAll();\r\n        public Item findById(String id);\r\n    }\r\n\r\n**MongoConfig.java :**\r\n\r\n    package basket.application.components;\r\n\r\n    import org.springframework.context.annotation.Bean;\r\n    import org.springframework.context.annotation.Configuration;\r\n    import org.springframework.data.mongodb.config.AbstractMongoConfiguration;\r\n    import org.springframework.data.mongodb.repository.config.EnableMongoRepositories;\r\n\r\n    import com.mongodb.Mongo;\r\n    import com.mongodb.MongoClient;\r\n    import com.mongodb.MongoClientURI;\r\n    import com.mongodb.client.MongoDatabase;\r\n\r\n    @Configuration\r\n    @EnableMongoRepositories (&quot;basket.infrastructure.dao&quot;)\r\n    public class MongoConfig extends  AbstractMongoConfiguration {\r\n\r\n\t    @Override\r\n\t    @Bean\r\n\t    public Mongo mongo() throws Exception {\r\n\t\t    MongoClientURI uri = new MongoClientURI(&quot;mongodb+srv://owner:AAAAA@basketcluster-feebu.mongodb.net/test?retryWrites=true&quot;);\r\n\t\t    MongoClient mongoClient = new MongoClient(uri);\r\n\t\t    MongoDatabase database = mongoClient.getDatabase(&quot;test&quot;);\r\n\t\t    return mongoClient;\r\n\t    }\r\n\r\n\t    @Override\r\n\t    protected String getDatabaseName() {\r\n\t\t    return &quot;test&quot;;\r\n\t    }\r\n    }\r\n\r\n\r\nAnd I have this error \r\n\r\n    com.mongodb.MongoSocketOpenException: Exception opening socket\r\n\t    at com.mongodb.connection.SocketStream.open(SocketStream.java:63) ~[mongodb-driver-core-3.4.2.jar:na]\r\n\t    at com.mongodb.connection.InternalStreamConnection.open(InternalStreamConnection.java:115) ~[mongodb-driver-core-3.4.2.jar:na]\r\n\t    at com.mongodb.connection.DefaultServerMonitor$ServerMonitorRunnable.run(DefaultServerMonitor.java:113) ~[mongodb-driver-core-3.4.2.jar:na]\r\n\t    at java.lang.Thread.run(Thread.java:748) [na:1.8.0_181]\r\n    Caused by: java.net.ConnectException: Connection refused (Connection refused)\r\n\t    at java.net.PlainSocketImpl.socketConnect(Native Method) ~[na:1.8.0_181]\r\n\t    at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) ~[na:1.8.0_181]\r\n\t    at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) ~[na:1.8.0_181]\r\n\t    at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) ~[na:1.8.0_181]\r\n\t    at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) ~[na:1.8.0_181]\r\n\t    at java.net.Socket.connect(Socket.java:589) ~[na:1.8.0_181]\r\n\t    at com.mongodb.connection.SocketStreamHelper.initialize(SocketStreamHelper.java:57) ~[mongodb-driver-core-3.4.2.jar:na]\r\n\t    at com.mongodb.connection.SocketStream.open(SocketStream.java:58) ~[mongodb-driver-core-3.4.2.jar:na]\r\n\t    ... 3 common frames omitted\r\n\r\n\r\nCan you help me to understand my mistake.\r\nThank you, any help is very much appreciated!","title":"Java Spring Boot MongoDB Configuration","body":"<p>I am new and I try to develop an API with Java Spring Boot.\nI have a problem with MongoDB Config and I have no problem in another project. I don't understand why.\nI have already looked but the solutions proposed do not work.</p>\n\n<p><strong>SBApplication.java :</strong>  </p>\n\n<pre><code>package basket;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.EnableAutoConfiguration;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.boot.autoconfigure.data.mongo.MongoRepositoriesAutoConfiguration;\nimport org.springframework.boot.autoconfigure.domain.EntityScan;\nimport org.springframework.boot.autoconfigure.mongo.MongoAutoConfiguration;\n\nimport springfox.documentation.swagger2.annotations.EnableSwagger2;\n\n@SpringBootApplication (scanBasePackages = { \"basket.instrastructure.dao\" })\n@EnableSwagger2\n@EnableAutoConfiguration //(exclude={MongoAutoConfiguration.class, MongoRepositoriesAutoConfiguration.class})\npublic class SBApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(SBApplication.class, args);\n    }\n}\n</code></pre>\n\n<p><strong>BasketRepository.java :</strong> </p>\n\n<pre><code>package basket.infrastructure.dao;\n\nimport java.util.ArrayList;\n\nimport org.springframework.data.mongodb.repository.MongoRepository;\nimport org.springframework.stereotype.Repository;\n\nimport basket.domaine.model.Basket;\n\n@Repository \npublic interface BasketRepository extends MongoRepository&lt;Basket, Long&gt; {\n\n    public ArrayList&lt;Basket&gt; findAll();\n    public Basket findById(String id);    \n}\n</code></pre>\n\n<p><strong>ItemRepository.java :</strong> </p>\n\n<pre><code>package basket.infrastructure.dao;\n\nimport java.util.ArrayList;\n\nimport org.springframework.data.mongodb.repository.MongoRepository;\nimport org.springframework.stereotype.Repository;\n\nimport basket.domaine.model.Item;\n\n\n@Repository\npublic interface ItemRepository extends MongoRepository&lt;Item, Long&gt; {\n    public Item findByName(String name);\n    public ArrayList&lt;Item&gt; findAll();\n    public Item findById(String id);\n}\n</code></pre>\n\n<p><strong>MongoConfig.java :</strong></p>\n\n<pre><code>package basket.application.components;\n\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.data.mongodb.config.AbstractMongoConfiguration;\nimport org.springframework.data.mongodb.repository.config.EnableMongoRepositories;\n\nimport com.mongodb.Mongo;\nimport com.mongodb.MongoClient;\nimport com.mongodb.MongoClientURI;\nimport com.mongodb.client.MongoDatabase;\n\n@Configuration\n@EnableMongoRepositories (\"basket.infrastructure.dao\")\npublic class MongoConfig extends  AbstractMongoConfiguration {\n\n    @Override\n    @Bean\n    public Mongo mongo() throws Exception {\n        MongoClientURI uri = new MongoClientURI(\"mongodb+srv://owner:AAAAA@basketcluster-feebu.mongodb.net/test?retryWrites=true\");\n        MongoClient mongoClient = new MongoClient(uri);\n        MongoDatabase database = mongoClient.getDatabase(\"test\");\n        return mongoClient;\n    }\n\n    @Override\n    protected String getDatabaseName() {\n        return \"test\";\n    }\n}\n</code></pre>\n\n<p>And I have this error </p>\n\n<pre><code>com.mongodb.MongoSocketOpenException: Exception opening socket\n    at com.mongodb.connection.SocketStream.open(SocketStream.java:63) ~[mongodb-driver-core-3.4.2.jar:na]\n    at com.mongodb.connection.InternalStreamConnection.open(InternalStreamConnection.java:115) ~[mongodb-driver-core-3.4.2.jar:na]\n    at com.mongodb.connection.DefaultServerMonitor$ServerMonitorRunnable.run(DefaultServerMonitor.java:113) ~[mongodb-driver-core-3.4.2.jar:na]\n    at java.lang.Thread.run(Thread.java:748) [na:1.8.0_181]\nCaused by: java.net.ConnectException: Connection refused (Connection refused)\n    at java.net.PlainSocketImpl.socketConnect(Native Method) ~[na:1.8.0_181]\n    at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) ~[na:1.8.0_181]\n    at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) ~[na:1.8.0_181]\n    at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) ~[na:1.8.0_181]\n    at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) ~[na:1.8.0_181]\n    at java.net.Socket.connect(Socket.java:589) ~[na:1.8.0_181]\n    at com.mongodb.connection.SocketStreamHelper.initialize(SocketStreamHelper.java:57) ~[mongodb-driver-core-3.4.2.jar:na]\n    at com.mongodb.connection.SocketStream.open(SocketStream.java:58) ~[mongodb-driver-core-3.4.2.jar:na]\n    ... 3 common frames omitted\n</code></pre>\n\n<p>Can you help me to understand my mistake.\nThank you, any help is very much appreciated!</p>\n"},{"tags":["java","reactjs","spring-boot","maven"],"answers":[{"tags":[],"owner":{"account_id":5492101,"reputation":16,"user_id":4364786,"display_name":"bhanuja"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1642215373,"creation_date":1642215373,"answer_id":70718548,"question_id":70718256,"body_markdown":"I can see a few issues as below,\r\n1. When you try to call via a web browser it&#39;s always calling as HTTP GET. But in your RestController, there is no GET method. It only has a POST method. Try to use Postman or CURL to call post method instead of GET.  \r\n2. Your URL is wrong. Since you appending `/n` for the PostMapping annotation it should be (`http://localhost:3000/api/n`)\r\n3. Only you want fullName as request body try to use PathVariable instead. No point to use RequestBody only for 1 parameter. Sample code as below.\r\n\r\n        @PostMapping(value=&quot;/{fullName}&quot;, consumes = MediaType.APPLICATION_JSON_VALUE)\r\n        public String postBody(@PathVariable String fullName) {\r\n            System.out.println(fullName);\r\n            return &quot;Hello &quot; + fullName; //returns response\r\n        }","title":"PostMapping annotation causes a whitelabel error page in SpringBoot","body":"<p>I can see a few issues as below,</p>\n<ol>\n<li><p>When you try to call via a web browser it's always calling as HTTP GET. But in your RestController, there is no GET method. It only has a POST method. Try to use Postman or CURL to call post method instead of GET.</p>\n</li>\n<li><p>Your URL is wrong. Since you appending <code>/n</code> for the PostMapping annotation it should be (<code>http://localhost:3000/api/n</code>)</p>\n</li>\n<li><p>Only you want fullName as request body try to use PathVariable instead. No point to use RequestBody only for 1 parameter. Sample code as below.</p>\n<pre><code> @PostMapping(value=&quot;/{fullName}&quot;, consumes = MediaType.APPLICATION_JSON_VALUE)\n public String postBody(@PathVariable String fullName) {\n     System.out.println(fullName);\n     return &quot;Hello &quot; + fullName; //returns response\n }\n</code></pre>\n</li>\n</ol>\n"}],"owner":{"account_id":22024075,"reputation":11,"user_id":16292377,"display_name":"Arman Sherwani"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":262,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1642215373,"creation_date":1642210600,"question_id":70718256,"body_markdown":" I&#39;m new to Java and react web development and I&#39;m having an issue with my postBody method. After sending a post request, the console prints the data posted from my frontend correctly, but it shows a whitelabel error page that says (type=Not Found, status=404) in localhost:8080/api and (type=Method Not Allowed, status=405) in localhost:8080/api/data. Below is the HelloController code.\r\n\r\n    package com.java.java.practice;\r\n\r\n    import org.springframework.web.bind.annotation.CrossOrigin;\r\n    import org.springframework.web.bind.annotation.GetMapping;\r\n    import org.springframework.web.bind.annotation.PostMapping;\r\n    import org.springframework.web.bind.annotation.RequestBody;\r\n    import org.springframework.web.bind.annotation.RequestMapping;\r\n    import org.springframework.web.bind.annotation.RestController;\r\n    import org.springframework.http.MediaType;\r\n    import org.springframework.web.cors.CorsConfiguration;\r\n    import java.util.ArrayList;\r\n    import java.util.Arrays;\r\n    import java.util.Map;\r\n\r\n\r\n    @RestController\r\n    @RequestMapping(&quot;/api&quot;)\r\n    public class HelloController {\r\n\t//this performes a post and get request\r\n\t@CrossOrigin(origins = &quot;http://localhost:3000/api&quot;)\r\n\t@PostMapping(value=&quot;/n&quot;, consumes = MediaType.APPLICATION_JSON_VALUE)\r\n\t\tpublic String postBody(@RequestBody String fullName) {\r\n\t\t\tSystem.out.println(fullName);\r\n\t\t\treturn &quot;Hello &quot; + fullName; //returns response\r\n\t\t}\r\n\r\n    }\r\nBelow is the main application\r\n\r\n    package com.java.java.practice;\r\n\r\n\r\n\r\n    import org.springframework.boot.SpringApplication;\r\n    import org.springframework.boot.autoconfigure.SpringBootApplication;\r\n    import org.springframework.context.annotation.ComponentScan;\r\n\r\n    @SpringBootApplication\r\n    @ComponentScan(basePackages=&quot;com.java.java.practice&quot;)\r\n    public class PracticeApplication {\r\n\tpublic static void main(String[] args) {\r\n\t\tSpringApplication.run(PracticeApplication.class, args);\r\n\t}\r\n\r\n    }\r\n\r\nThe weird thing is, when I replace my HelloController code with the one posted underneath, the whitelabel page goes away and shows text on the screen.\r\n\r\n    package com.java.java.practice;\r\n\r\n\r\n\r\n    import org.springframework.web.bind.annotation.CrossOrigin;\r\n    import org.springframework.web.bind.annotation.GetMapping;\r\n    import org.springframework.web.bind.annotation.PostMapping;\r\n    import org.springframework.web.bind.annotation.RequestBody;\r\n    import org.springframework.web.bind.annotation.RequestMapping;\r\n    import org.springframework.web.bind.annotation.RestController;\r\n    import org.springframework.http.MediaType;\r\n    import org.springframework.web.cors.CorsConfiguration;\r\n    import java.util.ArrayList;\r\n    import java.util.Arrays;\r\n    import java.util.Map;\r\n\r\n\r\n    @RestController\r\n    public class HelloController {\r\n\t//this performes a post and get request\r\n\t@CrossOrigin(origins = &quot;http://localhost:3000/api&quot;)\r\n\t@RequestMapping(&quot;/api&quot;)\r\n\t\tpublic String postBody() {\r\n\t\t\treturn &quot;Hello&quot;; //returns response\r\n\t\t}\r\n\r\n     }\r\n\r\nAny help would be much appreciated.\r\n\r\n\r\n","title":"PostMapping annotation causes a whitelabel error page in SpringBoot","body":"<p>I'm new to Java and react web development and I'm having an issue with my postBody method. After sending a post request, the console prints the data posted from my frontend correctly, but it shows a whitelabel error page that says (type=Not Found, status=404) in localhost:8080/api and (type=Method Not Allowed, status=405) in localhost:8080/api/data. Below is the HelloController code.</p>\n<pre><code>package com.java.java.practice;\n\nimport org.springframework.web.bind.annotation.CrossOrigin;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.PostMapping;\nimport org.springframework.web.bind.annotation.RequestBody;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RestController;\nimport org.springframework.http.MediaType;\nimport org.springframework.web.cors.CorsConfiguration;\nimport java.util.ArrayList;\nimport java.util.Arrays;\nimport java.util.Map;\n\n\n@RestController\n@RequestMapping(&quot;/api&quot;)\npublic class HelloController {\n//this performes a post and get request\n@CrossOrigin(origins = &quot;http://localhost:3000/api&quot;)\n@PostMapping(value=&quot;/n&quot;, consumes = MediaType.APPLICATION_JSON_VALUE)\n    public String postBody(@RequestBody String fullName) {\n        System.out.println(fullName);\n        return &quot;Hello &quot; + fullName; //returns response\n    }\n\n}\n</code></pre>\n<p>Below is the main application</p>\n<pre><code>package com.java.java.practice;\n\n\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.context.annotation.ComponentScan;\n\n@SpringBootApplication\n@ComponentScan(basePackages=&quot;com.java.java.practice&quot;)\npublic class PracticeApplication {\npublic static void main(String[] args) {\n    SpringApplication.run(PracticeApplication.class, args);\n}\n\n}\n</code></pre>\n<p>The weird thing is, when I replace my HelloController code with the one posted underneath, the whitelabel page goes away and shows text on the screen.</p>\n<pre><code>package com.java.java.practice;\n\n\n\nimport org.springframework.web.bind.annotation.CrossOrigin;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.PostMapping;\nimport org.springframework.web.bind.annotation.RequestBody;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RestController;\nimport org.springframework.http.MediaType;\nimport org.springframework.web.cors.CorsConfiguration;\nimport java.util.ArrayList;\nimport java.util.Arrays;\nimport java.util.Map;\n\n\n@RestController\npublic class HelloController {\n//this performes a post and get request\n@CrossOrigin(origins = &quot;http://localhost:3000/api&quot;)\n@RequestMapping(&quot;/api&quot;)\n    public String postBody() {\n        return &quot;Hello&quot;; //returns response\n    }\n\n }\n</code></pre>\n<p>Any help would be much appreciated.</p>\n"},{"tags":["java","generics","extends"],"comments":[{"owner":{"account_id":2645973,"reputation":65777,"user_id":2288659,"accept_rate":90,"display_name":"Silvio Mayolo"},"score":1,"creation_date":1642209690,"post_id":70717985,"comment_id":125018215,"body_markdown":"As a general note, due to type erasure, you *can&#39;t* use generic type variables in any runtime context, including `instanceof` checks, `new` calls, array allocations, etc. I&#39;m honestly surprised `(h instanceof G)` compiles *at all*.","body":"As a general note, due to type erasure, you <i>can&#39;t</i> use generic type variables in any runtime context, including <code>instanceof</code> checks, <code>new</code> calls, array allocations, etc. I&#39;m honestly surprised <code>(h instanceof G)</code> compiles <i>at all</i>."},{"owner":{"account_id":6770357,"reputation":1169,"user_id":6393903,"display_name":"Soundbytes"},"score":0,"creation_date":1642213870,"post_id":70717985,"comment_id":125018644,"body_markdown":"Interestingly there is a type check at compile time. The condition (g instanceof H) won&#39;t compile because it contradicts the inheritance hierarchy defined by the function.","body":"Interestingly there is a type check at compile time. The condition (g instanceof H) won&#39;t compile because it contradicts the inheritance hierarchy defined by the function."}],"answers":[{"tags":[],"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1642215248,"creation_date":1642208244,"answer_id":70718073,"question_id":70717985,"body_markdown":"\r\nIt compiles, because `IF` is a &quot;upper bound&quot; for *both* `H` *and* `G`.\r\n\r\nMeans: Generics are not that &quot;dynamic&quot; as we think, and we could also write:\r\n```lang-java\r\nstatic &lt;G extends IF, H extends IF&gt; ... // just pointing out that G *could* differ from H \r\n```\r\n\r\n\r\n----------\r\n\r\nDisregarding null check, is this, what you want:\r\n```lang-java\r\n  static &lt;G extends IF, H extends G&gt; String justTesting(G g, H h) {\r\n    if (g.getClass().isAssignableFrom(h.getClass())) {\r\n      return h.get() + &quot; (&quot; + h.getClass() + &quot;) is instance of &quot; + g.getClass() + &quot;. &quot;;\r\n    } else {\r\n      return &quot;it is the other way round!&quot;;\r\n    }\r\n  }\r\n```\r\n? \r\n\r\n[`Class.isAssignableFrom()`][1]\r\n\r\n\r\n----------\r\n\r\n\r\nPrints:\r\n```lang-txt\r\nbar (class com.example.test.generics.Main$Bar) is instance of class com.example.test.generics.Main$Foo. \r\nit is the other way round!\r\n```\r\n\r\n\r\n----------\r\n\r\n\r\nAnd watch out with &quot;anonymous classes&quot;, e.g.:\r\n```lang-java\r\nSystem.out.println(\r\n  justTesting(\r\n    new IF() {\r\n      @Override\r\n      public String get() {\r\n        return &quot;haha&quot;;\r\n      }\r\n    }, foo)\r\n);\r\n\r\nSystem.out.println(\r\n  justTesting(\r\n    foo, new IF() {\r\n      @Override\r\n      public String get() {\r\n        return &quot;haha&quot;;\r\n      }\r\n    }\r\n  )\r\n);\r\n```\r\nprint both &quot;it is the other way round!&quot;, so the decision here is not that &quot;binary&quot;.\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Class.html#isAssignableFrom(java.lang.Class)","title":"Class hierarchy problem with java generics","body":"<p>It compiles, because <code>IF</code> is a &quot;upper bound&quot; for <em>both</em> <code>H</code> <em>and</em> <code>G</code>.</p>\n<p>Means: Generics are not that &quot;dynamic&quot; as we think, and we could also write:</p>\n<pre class=\"lang-java prettyprint-override\"><code>static &lt;G extends IF, H extends IF&gt; ... // just pointing out that G *could* differ from H \n</code></pre>\n<hr />\n<p>Disregarding null check, is this, what you want:</p>\n<pre class=\"lang-java prettyprint-override\"><code>  static &lt;G extends IF, H extends G&gt; String justTesting(G g, H h) {\n    if (g.getClass().isAssignableFrom(h.getClass())) {\n      return h.get() + &quot; (&quot; + h.getClass() + &quot;) is instance of &quot; + g.getClass() + &quot;. &quot;;\n    } else {\n      return &quot;it is the other way round!&quot;;\n    }\n  }\n</code></pre>\n<p>?</p>\n<p><a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Class.html#isAssignableFrom(java.lang.Class)\" rel=\"nofollow noreferrer\"><code>Class.isAssignableFrom()</code></a></p>\n<hr />\n<p>Prints:</p>\n<pre class=\"lang-txt prettyprint-override\"><code>bar (class com.example.test.generics.Main$Bar) is instance of class com.example.test.generics.Main$Foo. \nit is the other way round!\n</code></pre>\n<hr />\n<p>And watch out with &quot;anonymous classes&quot;, e.g.:</p>\n<pre class=\"lang-java prettyprint-override\"><code>System.out.println(\n  justTesting(\n    new IF() {\n      @Override\n      public String get() {\n        return &quot;haha&quot;;\n      }\n    }, foo)\n);\n\nSystem.out.println(\n  justTesting(\n    foo, new IF() {\n      @Override\n      public String get() {\n        return &quot;haha&quot;;\n      }\n    }\n  )\n);\n</code></pre>\n<p>print both &quot;it is the other way round!&quot;, so the decision here is not that &quot;binary&quot;.</p>\n"}],"owner":{"account_id":6770357,"reputation":1169,"user_id":6393903,"display_name":"Soundbytes"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":147,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":70718073,"answer_count":1,"score":3,"last_activity_date":1642215248,"creation_date":1642207059,"question_id":70717985,"body_markdown":"I have run into a problem with class hierarchy in a generic function. \r\nI need to enforce that, with the two classes `T` and `U` specified in the function, one is the child of the other.\r\nI have found to much surprise that the construct `&lt;T extends U&gt;` does not at all enforce a parent child relation of `U` and `T`. \r\nInstead it also allows `T` and `U` to be the same type.    \r\n\r\nThis creates a problem because it looks like in a case where `U extends T` Java will not indicate the error but instead it will happily deduce both objects to be of type `T` (which is true no doubt) and then compile and run the code without any complaint.\r\n\r\nHere is an example that illustrates the issue:\r\n\r\n    public class MyClass {\r\n        public static void main(String args[]) {\r\n          Foo foo = new Foo();\r\n          Bar bar = new Bar();\r\n\r\n          // This code is written as intended\r\n          System.out.println( justTesting(foo, bar) );\r\n    \r\n          // This line shouldn&#39;t even compile\r\n          System.out.println( justTesting(bar, foo) );\r\n        }\r\n        \r\n        static interface IF {\r\n           String get(); \r\n        }\r\n        \r\n        static class Foo implements IF {\r\n           public String get(){return &quot;foo&quot;;} \r\n        }\r\n        \r\n        static class Bar extends Foo {\r\n            public String get(){return &quot;bar&quot;;}\r\n            \r\n        }\r\n        \r\n        static &lt;G extends IF , H extends G&gt; String justTesting(G g, H h) {\r\n            if (h instanceof G)\r\n                return h.get() + &quot; (&quot; + h.getClass() + &quot;) is instance of &quot; + g.getClass() + &quot;. &quot;;\r\n            else\r\n                return &quot;it is the other way round!&quot;;\r\n        }\r\n    }\r\n\r\nAnd this is the output:\r\n\r\n    bar (class MyClass$Bar) is instance of class MyClass$Foo. \r\n    foo (class MyClass$Foo) is instance of class MyClass$Bar. \r\n\r\nI need to ensure that the parent child relation of the generic classes is observed by  the compiler. Is there any way to do that?  ","title":"Class hierarchy problem with java generics","body":"<p>I have run into a problem with class hierarchy in a generic function.\nI need to enforce that, with the two classes <code>T</code> and <code>U</code> specified in the function, one is the child of the other.\nI have found to much surprise that the construct <code>&lt;T extends U&gt;</code> does not at all enforce a parent child relation of <code>U</code> and <code>T</code>.\nInstead it also allows <code>T</code> and <code>U</code> to be the same type.</p>\n<p>This creates a problem because it looks like in a case where <code>U extends T</code> Java will not indicate the error but instead it will happily deduce both objects to be of type <code>T</code> (which is true no doubt) and then compile and run the code without any complaint.</p>\n<p>Here is an example that illustrates the issue:</p>\n<pre><code>public class MyClass {\n    public static void main(String args[]) {\n      Foo foo = new Foo();\n      Bar bar = new Bar();\n\n      // This code is written as intended\n      System.out.println( justTesting(foo, bar) );\n\n      // This line shouldn't even compile\n      System.out.println( justTesting(bar, foo) );\n    }\n    \n    static interface IF {\n       String get(); \n    }\n    \n    static class Foo implements IF {\n       public String get(){return &quot;foo&quot;;} \n    }\n    \n    static class Bar extends Foo {\n        public String get(){return &quot;bar&quot;;}\n        \n    }\n    \n    static &lt;G extends IF , H extends G&gt; String justTesting(G g, H h) {\n        if (h instanceof G)\n            return h.get() + &quot; (&quot; + h.getClass() + &quot;) is instance of &quot; + g.getClass() + &quot;. &quot;;\n        else\n            return &quot;it is the other way round!&quot;;\n    }\n}\n</code></pre>\n<p>And this is the output:</p>\n<pre><code>bar (class MyClass$Bar) is instance of class MyClass$Foo. \nfoo (class MyClass$Foo) is instance of class MyClass$Bar. \n</code></pre>\n<p>I need to ensure that the parent child relation of the generic classes is observed by  the compiler. Is there any way to do that?</p>\n"},{"tags":["java","postgresql","spring-boot","scheduling","quartz"],"comments":[{"owner":{"account_id":3801446,"reputation":1793,"user_id":3154987,"display_name":"BrianC"},"score":0,"creation_date":1638226083,"post_id":70161025,"comment_id":124027678,"body_markdown":"Do you see the CRON details being populated in CRON job table?","body":"Do you see the CRON details being populated in CRON job table?"},{"owner":{"account_id":13411174,"reputation":63,"user_id":9677571,"display_name":"smith"},"score":0,"creation_date":1638245475,"post_id":70161025,"comment_id":124031043,"body_markdown":"@BrianC No the CRON details are not getting populated in the CRON job table. I have attached the sceenshots of the each table data. I can see data in only two tables qrtz_scheduler_state and qrtz_locks.","body":"@BrianC No the CRON details are not getting populated in the CRON job table. I have attached the sceenshots of the each table data. I can see data in only two tables qrtz_scheduler_state and qrtz_locks."},{"owner":{"account_id":2563377,"reputation":7174,"user_id":2224047,"display_name":"Nikolai  Shevchenko"},"score":0,"creation_date":1638342682,"post_id":70161025,"comment_id":124059851,"body_markdown":"TestJob isn&#39;t fired because you don&#39;t have a code that launches it as a Quartz job. Placing `@Component` on TestJob isn&#39;t enough","body":"TestJob isn&#39;t fired because you don&#39;t have a code that launches it as a Quartz job. Placing <code>@Component</code> on TestJob isn&#39;t enough"},{"owner":{"account_id":3801446,"reputation":1793,"user_id":3154987,"display_name":"BrianC"},"score":0,"creation_date":1638464938,"post_id":70161025,"comment_id":124101502,"body_markdown":"I see where you created the trigger, but do not see any place a scheduler was created and that trigger was attached to it.","body":"I see where you created the trigger, but do not see any place a scheduler was created and that trigger was attached to it."},{"owner":{"account_id":13411174,"reputation":63,"user_id":9677571,"display_name":"smith"},"score":0,"creation_date":1638495134,"post_id":70161025,"comment_id":124110304,"body_markdown":"@BrianC It is attached. If you see clearly in the ConfigQuartz class in SchedulerBeanFactory I am doing factory.setTriggers(triggers.toArray(new Trigger[triggers.size()])) where triggers is the list of all the triggers.","body":"@BrianC It is attached. If you see clearly in the ConfigQuartz class in SchedulerBeanFactory I am doing factory.setTriggers(triggers.toArray(new Trigger[triggers.size()])) where triggers is the list of all the triggers."},{"owner":{"account_id":6107867,"reputation":1493,"user_id":4765105,"accept_rate":50,"display_name":"Ashutosh Jha"},"score":0,"creation_date":1667993383,"post_id":70161025,"comment_id":131298817,"body_markdown":"@smith were you able to solve this problem.","body":"@smith were you able to solve this problem."}],"answers":[{"tags":[],"owner":{"account_id":23943214,"reputation":11,"user_id":17935943,"display_name":"Sameer Pande"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1642215219,"creation_date":1642190252,"answer_id":70715923,"question_id":70161025,"body_markdown":"Your TriggerListener class (`SimpleTriggerFactoryBean`) doesn&#39;t seem to be implementing `TriggerListener` interface of quartz. \r\n\r\nYou can create custom class which implements `TriggerListener` and see if that works.\r\n\r\n[Reference](https://github.com/sameer766/covid-vaccine-notifier/blob/master/scheduler/src/main/java/com/sameer/scheduler/service/SimpleTriggerListener.java)","title":"How to schedule the Quartz cron jobs on spring boot app startup?","body":"<p>Your TriggerListener class (<code>SimpleTriggerFactoryBean</code>) doesn't seem to be implementing <code>TriggerListener</code> interface of quartz.</p>\n<p>You can create custom class which implements <code>TriggerListener</code> and see if that works.</p>\n<p><a href=\"https://github.com/sameer766/covid-vaccine-notifier/blob/master/scheduler/src/main/java/com/sameer/scheduler/service/SimpleTriggerListener.java\" rel=\"nofollow noreferrer\">Reference</a></p>\n"}],"owner":{"account_id":13411174,"reputation":63,"user_id":9677571,"display_name":"smith"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3714,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1642215219,"creation_date":1638218224,"question_id":70161025,"body_markdown":"I am integrating Quartz with Spring boot and postgres. \r\nI have created all the required tables for quartz.\r\n\r\n**Issue** : The application starts but the Job is not getting executed as per the cron.\r\n\r\nI want that the jobs should be **automatically scheduled on start-up** and should run as per the cron expression.\r\n\r\nBut right now the application starts and no trigger is fired.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\nThe QuartzJobFactory class\r\n```\r\npublic class QuartzJobFactory extends SpringBeanJobFactory implements ApplicationContextAware {\r\n\r\n    private transient AutowireCapableBeanFactory beanFactory;\r\n\r\n    @Override\r\n    public void setApplicationContext(ApplicationContext applicationContext) throws BeansException {\r\n\r\n        beanFactory = applicationContext.getAutowireCapableBeanFactory();\r\n    }\r\n\r\n    @Override\r\n    protected Object createJobInstance(TriggerFiredBundle bundle) throws Exception {\r\n\r\n        final Object job = super.createJobInstance(bundle);\r\n        beanFactory.autowireBean(job);\r\n        return job;\r\n    }\r\n\r\n}\r\n```\r\nThe ConfigQuartz class\r\n```\r\n@Configuration\r\npublic class ConfigQuartz {\r\n\r\n    @Value(&quot;${quartz.dataSource.myDS.URL}&quot;)\r\n    String orgQuartzDatasourceMydsUrl;\r\n\r\n    @Value(&quot;${spring.datasource.username}&quot;)\r\n    String orgQuartzDatasourceMydsUser;\r\n\r\n    @Value(&quot;${spring.datasource.password}&quot;)\r\n    String orgQuartzDatasourceMydsPassword;\r\n\r\n    @Value(&quot;${quartz.enabled}&quot;)\r\n    Boolean isQuartzEnabled;\r\n\r\n    private static List&lt;Trigger&gt; triggers = new ArrayList&lt;&gt;();\r\n\r\n\r\n    @Bean\r\n    public JobFactory jobFactory(ApplicationContext applicationContext) {\r\n        QuartzJobFactory sampleJobFactory = new QuartzJobFactory();\r\n        sampleJobFactory.setApplicationContext(applicationContext);\r\n        return sampleJobFactory;\r\n    }\r\n\r\n    @Bean\r\n    public SchedulerFactoryBean schedulerFactoryBean(DataSource dataSource, JobFactory jobFactory)\r\n            throws IOException {\r\n        SchedulerFactoryBean factory = new SchedulerFactoryBean();\r\n        factory.setOverwriteExistingJobs(true);\r\n        factory.setAutoStartup(isQuartzEnabled);\r\n//         factory.setDataSource(dataSource);\r\n        factory.setJobFactory(jobFactory);\r\n        factory.setQuartzProperties(quartzProperties());\r\n        factory.setTriggers(triggers.toArray(new Trigger[triggers.size()]));\r\n\r\n        return factory;\r\n    }\r\n\r\n    public Properties setQuartzProperties() {\r\n        Properties properties = new Properties();\r\n        properties.setProperty(&quot;org.quartz.dataSource.myDS.URL&quot;,orgQuartzDatasourceMydsUrl);\r\n        properties.setProperty(&quot;org.quartz.dataSource.myDS.user&quot;,orgQuartzDatasourceMydsUser);\r\n        properties.setProperty(&quot;org.quartz.dataSource.myDS.password&quot;,orgQuartzDatasourceMydsPassword);\r\n        return properties;\r\n    }\r\n\r\n    @Bean\r\n    public Properties quartzProperties() throws IOException {\r\n        PropertiesFactoryBean propertiesFactoryBean = new PropertiesFactoryBean();\r\n        propertiesFactoryBean.setLocation(new ClassPathResource(&quot;quartz.properties&quot;));\r\n        propertiesFactoryBean.setProperties(setQuartzProperties());\r\n        propertiesFactoryBean.afterPropertiesSet();\r\n        return propertiesFactoryBean.getObject();\r\n    }\r\n\r\n    public static SimpleTriggerFactoryBean createTrigger(JobDetail jobDetail, long pollFrequencyMs,\r\n                                                         String triggerName) {\r\n        SimpleTriggerFactoryBean factoryBean = new SimpleTriggerFactoryBean();\r\n        factoryBean.setJobDetail(jobDetail);\r\n        factoryBean.setStartDelay(0L);\r\n        factoryBean.setRepeatInterval(pollFrequencyMs);\r\n        factoryBean.setRepeatCount(SimpleTrigger.REPEAT_INDEFINITELY);\r\n        factoryBean.setName(triggerName);\r\n        // in case of misfire, ignore all missed triggers and continue :\r\n        factoryBean.setMisfireInstruction(\r\n                SimpleTrigger.MISFIRE_INSTRUCTION_RESCHEDULE_NEXT_WITH_REMAINING_COUNT);\r\n        return factoryBean;\r\n    }\r\n\r\n    // Use this method for creating cron triggers instead of simple triggers:\r\n    public static CronTriggerFactoryBean createCronTrigger(JobDetail jobDetail, String cronExpression,\r\n                                                           String triggerName) throws Exception {\r\n        CronTriggerFactoryBean factoryBean = new CronTriggerFactoryBean();\r\n        factoryBean.setJobDetail(jobDetail);\r\n        factoryBean.setCronExpression(cronExpression);\r\n        factoryBean.setMisfireInstruction(SimpleTrigger.MISFIRE_INSTRUCTION_FIRE_NOW);\r\n        factoryBean.setName(triggerName);\r\n        try {\r\n            factoryBean.afterPropertiesSet();\r\n        } catch (ParseException e) {\r\n            throw new Exception(e.getMessage());\r\n        }\r\n        triggers.add(factoryBean.getObject());\r\n        return factoryBean;\r\n    }\r\n\r\n    public static JobDetailFactoryBean createJobDetail(Class jobClass) {\r\n        JobDetailFactoryBean factoryBean = new JobDetailFactoryBean();\r\n        factoryBean.setJobClass(jobClass);\r\n        // job has to be durable to be stored in DB:\r\n        factoryBean.setDurability(true);\r\n        return factoryBean;\r\n    }\r\n\r\n}\r\n\r\n```\r\n\r\nThe QuartzJobFactory class\r\n```\r\npublic class QuartzJobFactory extends SpringBeanJobFactory implements ApplicationContextAware {\r\n\r\n    private transient AutowireCapableBeanFactory beanFactory;\r\n\r\n    @Override\r\n    public void setApplicationContext(ApplicationContext applicationContext) throws BeansException {\r\n\r\n        beanFactory = applicationContext.getAutowireCapableBeanFactory();\r\n    }\r\n\r\n    @Override\r\n    protected Object createJobInstance(TriggerFiredBundle bundle) throws Exception {\r\n\r\n        final Object job = super.createJobInstance(bundle);\r\n        beanFactory.autowireBean(job);\r\n        return job;\r\n    }\r\n\r\n}\r\n```\r\n\r\nThe CronExpression class\r\n```\r\npublic class CronExpression {\r\n    private static final Map&lt;String, String&gt; cronExpressionMap = ImmutableMap\r\n            .&lt;String, String&gt;builder()\r\n            .put(TestJob.CLASS_NAME, &quot;* 0 0 ? * * *&quot;)\r\n            .build();\r\n\r\n    public static String get(String key) {\r\n        return cronExpressionMap.get(key);\r\n    }\r\n}\r\n```\r\nThe TestJob class\r\n```\r\n@Component\r\n@DisallowConcurrentExecution\r\npublic class TestJob implements Job {\r\n\r\n    public static final String CLASS_NAME = &quot;TestJob&quot;;\r\n\r\n    private final String JOB_BEAN_NAME = CLASS_NAME + AppConstants.QUARTZ_JOB_SUFFIX;\r\n\r\n    private final String TRIGGER_BEAN_NAME = CLASS_NAME + AppConstants.QUARTZ_TRIGGER_SUFFIX;\r\n\r\n    @Override\r\n    public void execute(JobExecutionContext jobExecutionContext) throws JobExecutionException {\r\n        LocalDateTime start = LocalDateTime.now();\r\n        System.out.println(&quot;*************** execute method is running *******&quot;);\r\n    }\r\n\r\n    @Bean(name = JOB_BEAN_NAME)\r\n    public JobDetailFactoryBean sampleJob() {\r\n        return ConfigQuartz.createJobDetail(this.getClass());\r\n    }\r\n\r\n    @Bean(name = TRIGGER_BEAN_NAME)\r\n    public CronTriggerFactoryBean sampleJobTrigger(\r\n            @Qualifier(JOB_BEAN_NAME) JobDetailFactoryBean jobDetail) throws Exception {\r\n        return ConfigQuartz.createCronTrigger(jobDetail.getObject(), CronExpression.get(CLASS_NAME),\r\n                CLASS_NAME);\r\n    }\r\n}\r\n\r\n```\r\nThe main class\r\n```\r\nEnableConfigurationProperties\r\n@EntityScan(basePackages = {&quot;com.example&quot;})\r\n@ComponentScan({&quot;com.example&quot;})\r\n@SpringBootApplication\r\n@EnableScheduling\r\npublic class QuartzSchedulerApplication {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tSpringApplication.run(QuartzSchedulerApplication.class, args);\r\n\t}\r\n\r\n}\r\n```\r\n\r\napplication.properties\r\n\r\n```\r\nspring.datasource.url=jdbc:postgresql://localhost:5432/quartz\r\nspring.datasource.username=postgres\r\nspring.datasource.password=mysecretpassword\r\nspring.jpa.database-platform=org.hibernate.dialect.PostgreSQL9Dialect\r\nspring.jpa.show-sql=true\r\nspring.jpa.database=POSTGRESQL\r\nspring.datasource.platform=postgres\r\nspring.datasource.driverClassName=org.postgresql.Driver\r\nspring.jpa.hibernate.ddl-auto=none\r\nspring.datasource.hikari.maximum-pool-size=5\r\n\r\nspring.jpa.properties.hibernate.temp.use_jdbc_metadata_defaults=false\r\n\r\nquartz.dataSource.myDS.URL=jdbc:postgresql://localhost:5432/quartz\r\nquartz.enabled=true\r\n```\r\n\r\nThe quartz.properties\r\n```\r\n#============================================================================\r\n# Configure Main Scheduler Properties\r\n#============================================================================\r\norg.quartz.scheduler.instanceName = PropScheduler\r\norg.quartz.scheduler.instanceId = 10\r\n#org.quartz.scheduler.instanceId = AUTO\r\norg.quartz.threadPool.class = org.quartz.simpl.SimpleThreadPool\r\norg.quartz.threadPool.threadCount = 10\r\n#============================================================================\r\n# Configure JobStore\r\n#============================================================================\r\norg.quartz.jobStore.class = org.quartz.impl.jdbcjobstore.JobStoreTX\r\norg.quartz.jobStore.driverDelegateClass=org.quartz.impl.jdbcjobstore.PostgreSQLDelegate\r\norg.quartz.jobStore.useProperties = false\r\norg.quartz.jobStore.dataSource=myDS\r\n\r\norg.quartz.jobStore.isClustered = true\r\n\r\norg.quartz.jobStore.clusterCheckinInterval = 5000\r\norg.quartz.scheduler.name=test-schedulers\r\n\r\n#============================================================================\r\n# Configure Datasources\r\n#============================================================================\r\n\r\norg.quartz.dataSource.myDS.driver=org.postgresql.Driver\r\n\r\norg.quartz.dataSource.myDS.maxConnections = 5\r\norg.quartz.dataSource.myDS.validationQuery = select 1\r\n\r\n#============================================================================\r\n# Configure trigger history loging , enble if needed more information regaring triggers\r\n#============================================================================\r\n#org.quartz.plugin.triggerHistory.class=org.quartz.plugins.history.LoggingTriggerHistoryPlugin\r\n#org.quartz.plugin.triggerHistory.triggerFiredMessage=Trigger [{1}.{0}] fired job [{6}.{5}] scheduled at: {2, date, dd-MM-yyyy HH:mm:ss.SSS}, next scheduled at: {3, date, dd-MM-yyyy HH:mm:ss.SSS}\r\n#org.quartz.plugin.triggerHistory.triggerCompleteMessage=Trigger [{1}.{0}] completed firing job [{6}.{5}] with resulting trigger instruction code: {9}. Next scheduled at: {3, date, dd-MM-yyyy HH:mm:ss.SSS}\r\n#org.quartz.plugin.triggerHistory.triggerMisfiredMessage=Trigger [{1}.{0}] misfired job [{6}.{5}]. Should have fired at: {3, date, dd-MM-yyyy HH:mm:ss.SSS}\r\n```\r\n\r\n[![enter image description here][2]][2]\r\n\r\n[![enter image description here][3]][3]\r\n\r\n[![enter image description here][4]][4]\r\n\r\n[![enter image description here][5]][5]\r\n\r\n[![enter image description here][6]][6]\r\n\r\n[![enter image description here][7]][7]\r\n\r\n[![enter image description here][8]][8]\r\n\r\n[![enter image description here][9]][9]\r\n\r\n[![enter image description here][10]][10]\r\n\r\n[![enter image description here][11]][11]\r\n\r\n[![enter image description here][12]][12]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/22YOc.jpg\r\n  [2]: https://i.stack.imgur.com/SP2CS.png\r\n  [3]: https://i.stack.imgur.com/gfnPH.png\r\n  [4]: https://i.stack.imgur.com/b4Ar9.png\r\n  [5]: https://i.stack.imgur.com/TEQsP.png\r\n  [6]: https://i.stack.imgur.com/FXrqH.png\r\n  [7]: https://i.stack.imgur.com/duYcb.png\r\n  [8]: https://i.stack.imgur.com/ar7sC.png\r\n  [9]: https://i.stack.imgur.com/XJXXb.png\r\n  [10]: https://i.stack.imgur.com/H0L27.png\r\n  [11]: https://i.stack.imgur.com/o1eTC.png\r\n  [12]: https://i.stack.imgur.com/F6D31.png","title":"How to schedule the Quartz cron jobs on spring boot app startup?","body":"<p>I am integrating Quartz with Spring boot and postgres.\nI have created all the required tables for quartz.</p>\n<p><strong>Issue</strong> : The application starts but the Job is not getting executed as per the cron.</p>\n<p>I want that the jobs should be <strong>automatically scheduled on start-up</strong> and should run as per the cron expression.</p>\n<p>But right now the application starts and no trigger is fired.</p>\n<p><a href=\"https://i.stack.imgur.com/22YOc.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/22YOc.jpg\" alt=\"enter image description here\" /></a></p>\n<p>The QuartzJobFactory class</p>\n<pre><code>public class QuartzJobFactory extends SpringBeanJobFactory implements ApplicationContextAware {\n\n    private transient AutowireCapableBeanFactory beanFactory;\n\n    @Override\n    public void setApplicationContext(ApplicationContext applicationContext) throws BeansException {\n\n        beanFactory = applicationContext.getAutowireCapableBeanFactory();\n    }\n\n    @Override\n    protected Object createJobInstance(TriggerFiredBundle bundle) throws Exception {\n\n        final Object job = super.createJobInstance(bundle);\n        beanFactory.autowireBean(job);\n        return job;\n    }\n\n}\n</code></pre>\n<p>The ConfigQuartz class</p>\n<pre><code>@Configuration\npublic class ConfigQuartz {\n\n    @Value(&quot;${quartz.dataSource.myDS.URL}&quot;)\n    String orgQuartzDatasourceMydsUrl;\n\n    @Value(&quot;${spring.datasource.username}&quot;)\n    String orgQuartzDatasourceMydsUser;\n\n    @Value(&quot;${spring.datasource.password}&quot;)\n    String orgQuartzDatasourceMydsPassword;\n\n    @Value(&quot;${quartz.enabled}&quot;)\n    Boolean isQuartzEnabled;\n\n    private static List&lt;Trigger&gt; triggers = new ArrayList&lt;&gt;();\n\n\n    @Bean\n    public JobFactory jobFactory(ApplicationContext applicationContext) {\n        QuartzJobFactory sampleJobFactory = new QuartzJobFactory();\n        sampleJobFactory.setApplicationContext(applicationContext);\n        return sampleJobFactory;\n    }\n\n    @Bean\n    public SchedulerFactoryBean schedulerFactoryBean(DataSource dataSource, JobFactory jobFactory)\n            throws IOException {\n        SchedulerFactoryBean factory = new SchedulerFactoryBean();\n        factory.setOverwriteExistingJobs(true);\n        factory.setAutoStartup(isQuartzEnabled);\n//         factory.setDataSource(dataSource);\n        factory.setJobFactory(jobFactory);\n        factory.setQuartzProperties(quartzProperties());\n        factory.setTriggers(triggers.toArray(new Trigger[triggers.size()]));\n\n        return factory;\n    }\n\n    public Properties setQuartzProperties() {\n        Properties properties = new Properties();\n        properties.setProperty(&quot;org.quartz.dataSource.myDS.URL&quot;,orgQuartzDatasourceMydsUrl);\n        properties.setProperty(&quot;org.quartz.dataSource.myDS.user&quot;,orgQuartzDatasourceMydsUser);\n        properties.setProperty(&quot;org.quartz.dataSource.myDS.password&quot;,orgQuartzDatasourceMydsPassword);\n        return properties;\n    }\n\n    @Bean\n    public Properties quartzProperties() throws IOException {\n        PropertiesFactoryBean propertiesFactoryBean = new PropertiesFactoryBean();\n        propertiesFactoryBean.setLocation(new ClassPathResource(&quot;quartz.properties&quot;));\n        propertiesFactoryBean.setProperties(setQuartzProperties());\n        propertiesFactoryBean.afterPropertiesSet();\n        return propertiesFactoryBean.getObject();\n    }\n\n    public static SimpleTriggerFactoryBean createTrigger(JobDetail jobDetail, long pollFrequencyMs,\n                                                         String triggerName) {\n        SimpleTriggerFactoryBean factoryBean = new SimpleTriggerFactoryBean();\n        factoryBean.setJobDetail(jobDetail);\n        factoryBean.setStartDelay(0L);\n        factoryBean.setRepeatInterval(pollFrequencyMs);\n        factoryBean.setRepeatCount(SimpleTrigger.REPEAT_INDEFINITELY);\n        factoryBean.setName(triggerName);\n        // in case of misfire, ignore all missed triggers and continue :\n        factoryBean.setMisfireInstruction(\n                SimpleTrigger.MISFIRE_INSTRUCTION_RESCHEDULE_NEXT_WITH_REMAINING_COUNT);\n        return factoryBean;\n    }\n\n    // Use this method for creating cron triggers instead of simple triggers:\n    public static CronTriggerFactoryBean createCronTrigger(JobDetail jobDetail, String cronExpression,\n                                                           String triggerName) throws Exception {\n        CronTriggerFactoryBean factoryBean = new CronTriggerFactoryBean();\n        factoryBean.setJobDetail(jobDetail);\n        factoryBean.setCronExpression(cronExpression);\n        factoryBean.setMisfireInstruction(SimpleTrigger.MISFIRE_INSTRUCTION_FIRE_NOW);\n        factoryBean.setName(triggerName);\n        try {\n            factoryBean.afterPropertiesSet();\n        } catch (ParseException e) {\n            throw new Exception(e.getMessage());\n        }\n        triggers.add(factoryBean.getObject());\n        return factoryBean;\n    }\n\n    public static JobDetailFactoryBean createJobDetail(Class jobClass) {\n        JobDetailFactoryBean factoryBean = new JobDetailFactoryBean();\n        factoryBean.setJobClass(jobClass);\n        // job has to be durable to be stored in DB:\n        factoryBean.setDurability(true);\n        return factoryBean;\n    }\n\n}\n\n</code></pre>\n<p>The QuartzJobFactory class</p>\n<pre><code>public class QuartzJobFactory extends SpringBeanJobFactory implements ApplicationContextAware {\n\n    private transient AutowireCapableBeanFactory beanFactory;\n\n    @Override\n    public void setApplicationContext(ApplicationContext applicationContext) throws BeansException {\n\n        beanFactory = applicationContext.getAutowireCapableBeanFactory();\n    }\n\n    @Override\n    protected Object createJobInstance(TriggerFiredBundle bundle) throws Exception {\n\n        final Object job = super.createJobInstance(bundle);\n        beanFactory.autowireBean(job);\n        return job;\n    }\n\n}\n</code></pre>\n<p>The CronExpression class</p>\n<pre><code>public class CronExpression {\n    private static final Map&lt;String, String&gt; cronExpressionMap = ImmutableMap\n            .&lt;String, String&gt;builder()\n            .put(TestJob.CLASS_NAME, &quot;* 0 0 ? * * *&quot;)\n            .build();\n\n    public static String get(String key) {\n        return cronExpressionMap.get(key);\n    }\n}\n</code></pre>\n<p>The TestJob class</p>\n<pre><code>@Component\n@DisallowConcurrentExecution\npublic class TestJob implements Job {\n\n    public static final String CLASS_NAME = &quot;TestJob&quot;;\n\n    private final String JOB_BEAN_NAME = CLASS_NAME + AppConstants.QUARTZ_JOB_SUFFIX;\n\n    private final String TRIGGER_BEAN_NAME = CLASS_NAME + AppConstants.QUARTZ_TRIGGER_SUFFIX;\n\n    @Override\n    public void execute(JobExecutionContext jobExecutionContext) throws JobExecutionException {\n        LocalDateTime start = LocalDateTime.now();\n        System.out.println(&quot;*************** execute method is running *******&quot;);\n    }\n\n    @Bean(name = JOB_BEAN_NAME)\n    public JobDetailFactoryBean sampleJob() {\n        return ConfigQuartz.createJobDetail(this.getClass());\n    }\n\n    @Bean(name = TRIGGER_BEAN_NAME)\n    public CronTriggerFactoryBean sampleJobTrigger(\n            @Qualifier(JOB_BEAN_NAME) JobDetailFactoryBean jobDetail) throws Exception {\n        return ConfigQuartz.createCronTrigger(jobDetail.getObject(), CronExpression.get(CLASS_NAME),\n                CLASS_NAME);\n    }\n}\n\n</code></pre>\n<p>The main class</p>\n<pre><code>EnableConfigurationProperties\n@EntityScan(basePackages = {&quot;com.example&quot;})\n@ComponentScan({&quot;com.example&quot;})\n@SpringBootApplication\n@EnableScheduling\npublic class QuartzSchedulerApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(QuartzSchedulerApplication.class, args);\n    }\n\n}\n</code></pre>\n<p>application.properties</p>\n<pre><code>spring.datasource.url=jdbc:postgresql://localhost:5432/quartz\nspring.datasource.username=postgres\nspring.datasource.password=mysecretpassword\nspring.jpa.database-platform=org.hibernate.dialect.PostgreSQL9Dialect\nspring.jpa.show-sql=true\nspring.jpa.database=POSTGRESQL\nspring.datasource.platform=postgres\nspring.datasource.driverClassName=org.postgresql.Driver\nspring.jpa.hibernate.ddl-auto=none\nspring.datasource.hikari.maximum-pool-size=5\n\nspring.jpa.properties.hibernate.temp.use_jdbc_metadata_defaults=false\n\nquartz.dataSource.myDS.URL=jdbc:postgresql://localhost:5432/quartz\nquartz.enabled=true\n</code></pre>\n<p>The quartz.properties</p>\n<pre><code>#============================================================================\n# Configure Main Scheduler Properties\n#============================================================================\norg.quartz.scheduler.instanceName = PropScheduler\norg.quartz.scheduler.instanceId = 10\n#org.quartz.scheduler.instanceId = AUTO\norg.quartz.threadPool.class = org.quartz.simpl.SimpleThreadPool\norg.quartz.threadPool.threadCount = 10\n#============================================================================\n# Configure JobStore\n#============================================================================\norg.quartz.jobStore.class = org.quartz.impl.jdbcjobstore.JobStoreTX\norg.quartz.jobStore.driverDelegateClass=org.quartz.impl.jdbcjobstore.PostgreSQLDelegate\norg.quartz.jobStore.useProperties = false\norg.quartz.jobStore.dataSource=myDS\n\norg.quartz.jobStore.isClustered = true\n\norg.quartz.jobStore.clusterCheckinInterval = 5000\norg.quartz.scheduler.name=test-schedulers\n\n#============================================================================\n# Configure Datasources\n#============================================================================\n\norg.quartz.dataSource.myDS.driver=org.postgresql.Driver\n\norg.quartz.dataSource.myDS.maxConnections = 5\norg.quartz.dataSource.myDS.validationQuery = select 1\n\n#============================================================================\n# Configure trigger history loging , enble if needed more information regaring triggers\n#============================================================================\n#org.quartz.plugin.triggerHistory.class=org.quartz.plugins.history.LoggingTriggerHistoryPlugin\n#org.quartz.plugin.triggerHistory.triggerFiredMessage=Trigger [{1}.{0}] fired job [{6}.{5}] scheduled at: {2, date, dd-MM-yyyy HH:mm:ss.SSS}, next scheduled at: {3, date, dd-MM-yyyy HH:mm:ss.SSS}\n#org.quartz.plugin.triggerHistory.triggerCompleteMessage=Trigger [{1}.{0}] completed firing job [{6}.{5}] with resulting trigger instruction code: {9}. Next scheduled at: {3, date, dd-MM-yyyy HH:mm:ss.SSS}\n#org.quartz.plugin.triggerHistory.triggerMisfiredMessage=Trigger [{1}.{0}] misfired job [{6}.{5}]. Should have fired at: {3, date, dd-MM-yyyy HH:mm:ss.SSS}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/SP2CS.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/SP2CS.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/gfnPH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gfnPH.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/b4Ar9.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/b4Ar9.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/TEQsP.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/TEQsP.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/FXrqH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/FXrqH.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/duYcb.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/duYcb.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/ar7sC.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ar7sC.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/XJXXb.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/XJXXb.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/H0L27.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/H0L27.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/o1eTC.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/o1eTC.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/F6D31.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/F6D31.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","spring","spring-boot","tomcat","weblogic"],"comments":[{"owner":{"account_id":16657879,"reputation":2625,"user_id":12038714,"display_name":"J Asgarov"},"score":2,"creation_date":1620362905,"post_id":67428269,"comment_id":119183817,"body_markdown":"Actually you don’t need do anything excepting producing a war instead of jar - you configure that in Pom.xml https://www.baeldung.com/spring-boot-war-tomcat-deploy","body":"Actually you don’t need do anything excepting producing a war instead of jar - you configure that in Pom.xml <a href=\"https://www.baeldung.com/spring-boot-war-tomcat-deploy\" rel=\"nofollow noreferrer\">baeldung.com/spring-boot-war-tomcat-deploy</a>"}],"answers":[{"tags":[],"owner":{"account_id":15369366,"reputation":19,"user_id":12046321,"display_name":"Hitesh Yadav"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1642214947,"creation_date":1642214947,"answer_id":70718519,"question_id":67428269,"body_markdown":"Web logic to Tomcat conversion for spring boot application takes few steps like:\r\n1. Change in dependencies.\r\n2. Change in servletinitializer\r\n3. Deployment : generate jar/war file \r\n\r\nBelow is checklist \r\n\r\n![enter image description here](https://i.stack.imgur.com/fnXdx.jpg)\r\n\r\nTo get the things done in proper way I recommend you to visit the below post : \r\n\r\nhttps://dev.to/varshithv/migration-of-java-spring-boot-applications-from-weblogic-to-tomcat-server-jpd","title":"Java spring / spring boot Application : Web logic to Tomcat conversion","body":"<p>Web logic to Tomcat conversion for spring boot application takes few steps like:</p>\n<ol>\n<li>Change in dependencies.</li>\n<li>Change in servletinitializer</li>\n<li>Deployment : generate jar/war file</li>\n</ol>\n<p>Below is checklist</p>\n<p><img src=\"https://i.stack.imgur.com/fnXdx.jpg\" alt=\"enter image description here\" /></p>\n<p>To get the things done in proper way I recommend you to visit the below post :</p>\n<p><a href=\"https://dev.to/varshithv/migration-of-java-spring-boot-applications-from-weblogic-to-tomcat-server-jpd\" rel=\"nofollow noreferrer\">https://dev.to/varshithv/migration-of-java-spring-boot-applications-from-weblogic-to-tomcat-server-jpd</a></p>\n"}],"owner":{"account_id":96255,"reputation":181,"user_id":261708,"accept_rate":44,"display_name":"One Developer"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":389,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1642214947,"creation_date":1620354682,"question_id":67428269,"body_markdown":"I am asked to convert the existing Java spring / spring boot Application that runs on Web logic to Tomcat. I understood that dependencies need to be updated and main class needs an update. However I don&#39;t have the checklist for the Tomcat migration, hope someone could have gone through the same migration process and documented.\r\n\r\nCan you please assist with the checklist / process to be followed for migrating the existing Java spring / spring boot Application that runs on Web logic to Tomcat?\r\n\r\n","title":"Java spring / spring boot Application : Web logic to Tomcat conversion","body":"<p>I am asked to convert the existing Java spring / spring boot Application that runs on Web logic to Tomcat. I understood that dependencies need to be updated and main class needs an update. However I don't have the checklist for the Tomcat migration, hope someone could have gone through the same migration process and documented.</p>\n<p>Can you please assist with the checklist / process to be followed for migrating the existing Java spring / spring boot Application that runs on Web logic to Tomcat?</p>\n"},{"tags":["java","spring-boot","tomcat","connection-timeout","embedded-tomcat-8"],"answers":[{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1642214743,"creation_date":1642213937,"answer_id":70718450,"question_id":70718261,"body_markdown":"According to the [Tomcat 9.0 documentation][1], the `connection-timeout` is:\r\n\r\n&gt; The number of milliseconds this Connector will wait, after accepting a connection, for the request URI line to be presented. [...] Unless `disableUploadTimeout` is set to `false`, this timeout will also be used when reading the request body (if any).\r\n\r\nThat is a time taken for the client to send the request.  This is **unrelated** to the time that the server takes to respond to the request.\r\n\r\nSo ...\r\n\r\n&gt; If this wait takes more then 3 seconds, will the tomcat connection time out?\r\n\r\nNo, it won&#39;t&lt;sup&gt;1&lt;/sup&gt;.  In fact, it appears that Tomcat doesn&#39;t have any limits on how long a (synchronous) request may take to complete.\r\n\r\nOf course, the client could timeout a request if the server takes too long.  It is unlikely that the server will notice this so that it can abandon the request.\r\n\r\n------------------\r\n\r\n&lt;sup&gt;1 - Assuming that the documentation is accurate.  However, that config option has been present for a number of Tomcat versions, with the same description.  If the documentation was wrong, this would surely have been noticed, reported and fixed.&lt;/sup&gt;\r\n\r\n\r\n  [1]: https://tomcat.apache.org/tomcat-9.0-doc/config/http.html","title":"Will a tomcat request connection also time out when a server side process is taking too long to send a response?","body":"<p>According to the <a href=\"https://tomcat.apache.org/tomcat-9.0-doc/config/http.html\" rel=\"nofollow noreferrer\">Tomcat 9.0 documentation</a>, the <code>connection-timeout</code> is:</p>\n<blockquote>\n<p>The number of milliseconds this Connector will wait, after accepting a connection, for the request URI line to be presented. [...] Unless <code>disableUploadTimeout</code> is set to <code>false</code>, this timeout will also be used when reading the request body (if any).</p>\n</blockquote>\n<p>That is a time taken for the client to send the request.  This is <strong>unrelated</strong> to the time that the server takes to respond to the request.</p>\n<p>So ...</p>\n<blockquote>\n<p>If this wait takes more then 3 seconds, will the tomcat connection time out?</p>\n</blockquote>\n<p>No, it won't<sup>1</sup>.  In fact, it appears that Tomcat doesn't have any limits on how long a (synchronous) request may take to complete.</p>\n<p>Of course, the client could timeout a request if the server takes too long.  It is unlikely that the server will notice this so that it can abandon the request.</p>\n<hr />\n<p><sup>1 - Assuming that the documentation is accurate.  However, that config option has been present for a number of Tomcat versions, with the same description.  If the documentation was wrong, this would surely have been noticed, reported and fixed.</sup></p>\n"}],"owner":{"account_id":8468157,"reputation":6871,"user_id":6351733,"accept_rate":22,"display_name":"Maurice"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1061,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70718450,"answer_count":1,"score":0,"last_activity_date":1642214743,"creation_date":1642210702,"question_id":70718261,"body_markdown":"I have a spring boot application with an embedded tomcat server. To limit the impact of DOS attacks i&#39;ve set the property `server.tomcat.connection-timeout` to 3 seconds. A `connectionTimeout` is the limit of time after which the [server will automatically close the connection with the client][1]. \r\n\r\nSo if in my case the client takes more then 3 seconds to finish the request the connection will automatically time out. However, its not yet clear to me what exactly happens when instead it is a process on the server side that is causing a delay.\r\n\r\nTo give an example, My web application is using a hikari connection pool that manages connections to the database. It can have a maximum of 10 database connections. If all 10 are in use any incoming request will have to wait for one of the database connections to become available. If this wait takes more then 3 seconds, will the tomcat connection time out? Or will the connection remain available since the delay isn&#39;t caused by the client?\r\n\r\nThank you\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/39643647/what-exactly-does-connectiontimeout-means-in-tomcat","title":"Will a tomcat request connection also time out when a server side process is taking too long to send a response?","body":"<p>I have a spring boot application with an embedded tomcat server. To limit the impact of DOS attacks i've set the property <code>server.tomcat.connection-timeout</code> to 3 seconds. A <code>connectionTimeout</code> is the limit of time after which the <a href=\"https://stackoverflow.com/questions/39643647/what-exactly-does-connectiontimeout-means-in-tomcat\">server will automatically close the connection with the client</a>.</p>\n<p>So if in my case the client takes more then 3 seconds to finish the request the connection will automatically time out. However, its not yet clear to me what exactly happens when instead it is a process on the server side that is causing a delay.</p>\n<p>To give an example, My web application is using a hikari connection pool that manages connections to the database. It can have a maximum of 10 database connections. If all 10 are in use any incoming request will have to wait for one of the database connections to become available. If this wait takes more then 3 seconds, will the tomcat connection time out? Or will the connection remain available since the delay isn't caused by the client?</p>\n<p>Thank you</p>\n"},{"tags":["java","html","htmlunit"],"answers":[{"tags":[],"owner":{"account_id":9284974,"reputation":2973,"user_id":6895166,"accept_rate":40,"display_name":"SamHoque"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1642214089,"creation_date":1642214089,"answer_id":70718462,"question_id":70718448,"body_markdown":"You can use the `URLEncoder` class for this.\r\nhttps://docs.oracle.com/javase/7/docs/api/java/net/URLEncoder.html\r\n\r\n\r\n    URLEncoder.encode(&quot;Your String here&quot;, StandardCharsets.UTF_8);","title":"How can I convert a string to a url string?","body":"<p>You can use the <code>URLEncoder</code> class for this.\n<a href=\"https://docs.oracle.com/javase/7/docs/api/java/net/URLEncoder.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/7/docs/api/java/net/URLEncoder.html</a></p>\n<pre><code>URLEncoder.encode(&quot;Your String here&quot;, StandardCharsets.UTF_8);\n</code></pre>\n"}],"owner":{"account_id":10441754,"reputation":109,"user_id":7698156,"display_name":"Denny Williams"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":123,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":70718462,"answer_count":1,"score":1,"last_activity_date":1642214089,"creation_date":1642213886,"question_id":70718448,"body_markdown":"I want to convert a string to the url version of that string. For example:\r\n\r\n&gt; The quick brown fox jumps over the lazy dog \r\n\r\nto\r\n&gt; The%20quick%20brown%20fox%20jumps%20over%20the%20lazy%20dog\r\n\r\nObviously in this example I could just replace space with %20, but I&#39;d like it to work with more complex input strings too, for example with symbols. Here&#39;s how I&#39;m doing it right now, but it&#39;s very slow:\r\n\r\n    public static String toURLString(String str)\r\n    \t{\r\n    \t\ttry\r\n    \t\t{\r\n    \t\t\tWebClient webClient = new WebClient();\r\n    \t\t\tHtmlPage page = webClient.getPage(&quot;https://www.google.com/search?q=&quot; + str);\r\n    \t\t\tString prefix = &quot;https://www.google.com/search?q=&quot;;\r\n    \t\t\tString tokens = page.getUrl().toString().substring(prefix.length());\r\n    \t\t\twebClient.close();\r\n    \t\t\treturn tokens;\r\n    \t\t} catch (FailingHttpStatusCodeException | IOException e)\r\n    \t\t{\r\n    \t\t\te.printStackTrace();\r\n    \t\t\treturn null;\r\n    \t\t}\r\n    \t}\r\n\r\nThis is just using htmlunit to search google with the string and then get back the string from the url, but there has to be a better way. This method is very slow because of creating the webclient and searching google. How do I do it better?","title":"How can I convert a string to a url string?","body":"<p>I want to convert a string to the url version of that string. For example:</p>\n<blockquote>\n<p>The quick brown fox jumps over the lazy dog</p>\n</blockquote>\n<p>to</p>\n<blockquote>\n<p>The%20quick%20brown%20fox%20jumps%20over%20the%20lazy%20dog</p>\n</blockquote>\n<p>Obviously in this example I could just replace space with %20, but I'd like it to work with more complex input strings too, for example with symbols. Here's how I'm doing it right now, but it's very slow:</p>\n<pre><code>public static String toURLString(String str)\n    {\n        try\n        {\n            WebClient webClient = new WebClient();\n            HtmlPage page = webClient.getPage(&quot;https://www.google.com/search?q=&quot; + str);\n            String prefix = &quot;https://www.google.com/search?q=&quot;;\n            String tokens = page.getUrl().toString().substring(prefix.length());\n            webClient.close();\n            return tokens;\n        } catch (FailingHttpStatusCodeException | IOException e)\n        {\n            e.printStackTrace();\n            return null;\n        }\n    }\n</code></pre>\n<p>This is just using htmlunit to search google with the string and then get back the string from the url, but there has to be a better way. This method is very slow because of creating the webclient and searching google. How do I do it better?</p>\n"},{"tags":["java","floating-point","ieee-754","single-precision"],"comments":[{"owner":{"account_id":3415784,"reputation":60457,"user_id":2864740,"accept_rate":78,"display_name":"user2864740"},"score":1,"creation_date":1385342272,"post_id":20183330,"comment_id":30090362,"body_markdown":"`println` is a dirty liar - I suspect it is rounding unexpectedly and throwing off the test-case results/observations. Try with an explicit String.format.","body":"<code>println</code> is a dirty liar - I suspect it is rounding unexpectedly and throwing off the test-case results/observations. Try with an explicit String.format."},{"owner":{"account_id":3415784,"reputation":60457,"user_id":2864740,"accept_rate":78,"display_name":"user2864740"},"score":0,"creation_date":1385342606,"post_id":20183330,"comment_id":30090441,"body_markdown":"That is, `println(String.format(&quot;%.20f&quot;, v))` should result in representative display values.","body":"That is, <code>println(String.format(&quot;%.20f&quot;, v))</code> should result in representative display values."},{"owner":{"account_id":1259917,"reputation":1534,"user_id":1218500,"accept_rate":85,"display_name":"mmaag"},"score":0,"creation_date":1385343025,"post_id":20183330,"comment_id":30090534,"body_markdown":"If `println` was the problem, I&#39;d still expect `8099.9995f + 0.00025f == 8099.99975f` to be true. And I know that floating point arithmetic isn&#39;t exact. I know that my result is not going to be exactly 8099.99975. But the first two numbers are represented exactly. They aren&#39;t rounded or anything. I don&#39;t see why the addition of two numbers doesn&#39;t result in the same result as the decimal to single float conversion.","body":"If <code>println</code> was the problem, I&#39;d still expect <code>8099.9995f + 0.00025f == 8099.99975f</code> to be true. And I know that floating point arithmetic isn&#39;t exact. I know that my result is not going to be exactly 8099.99975. But the first two numbers are represented exactly. They aren&#39;t rounded or anything. I don&#39;t see why the addition of two numbers doesn&#39;t result in the same result as the decimal to single float conversion."},{"owner":{"account_id":2009857,"reputation":25959,"user_id":1798593,"display_name":"Patricia Shanahan"},"score":0,"creation_date":1385348954,"post_id":20183330,"comment_id":30091598,"body_markdown":"The key to understanding this sort of thing is to look at the exact values of the floats. Try printing `new BigDecimal(8099.99975f).toString()` etc. The BigDecimal constructor and its toString() are both exact.","body":"The key to understanding this sort of thing is to look at the exact values of the floats. Try printing <code>new BigDecimal(8099.99975f).toString()</code> etc. The BigDecimal constructor and its toString() are both exact."},{"owner":{"account_id":113187,"reputation":200947,"user_id":298225,"accept_rate":100,"display_name":"Eric Postpischil"},"score":0,"creation_date":1385376471,"post_id":20183330,"comment_id":30101201,"body_markdown":"Here we have yet another question incorrectly closed as a duplicate. This question specifically involves not just the behavior of the floating-point arithmetic system but how Java displays floating-point values. This latter is not addressed in the purported original question or its answers.","body":"Here we have yet another question incorrectly closed as a duplicate. This question specifically involves not just the behavior of the floating-point arithmetic system but how Java displays floating-point values. This latter is not addressed in the purported original question or its answers."},{"owner":{"account_id":113187,"reputation":200947,"user_id":298225,"accept_rate":100,"display_name":"Eric Postpischil"},"score":0,"creation_date":1385376763,"post_id":20183330,"comment_id":30101363,"body_markdown":"`8099.99975f` is converted to the nearest floating-point value, which is a number very slightly greater than 8099.9995, which is why it is selected instead of 8100. However, when Java `println` converts floating-point values to decimal, it does not generally show all digits. It shows just enough digits that converting back to floating-point shows the same value. Thus you see only “8099.995”&#39; but the actual value is slightly greater.","body":"<code>8099.99975f</code> is converted to the nearest floating-point value, which is a number very slightly greater than 8099.9995, which is why it is selected instead of 8100. However, when Java <code>println</code> converts floating-point values to decimal, it does not generally show all digits. It shows just enough digits that converting back to floating-point shows the same value. Thus you see only “8099.995”&#39; but the actual value is slightly greater."},{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":0,"creation_date":1385376962,"post_id":20183330,"comment_id":30101491,"body_markdown":"@Eric I agree entirely with both of your comments.  That other question is absolutely NOT a duplicate of this one.  It seems that the people who closed the question didn&#39;t bother to read both questions.  I have voted to re-open and I urge others to do the same.  Moreover, if this question DOES get re-opened, please convert your second comment to an answer, and I will upvote it.  Whereas it&#39;s similar to my answer, it does give a slightly different perspective, which I consider valuable.","body":"@Eric I agree entirely with both of your comments.  That other question is absolutely NOT a duplicate of this one.  It seems that the people who closed the question didn&#39;t bother to read both questions.  I have voted to re-open and I urge others to do the same.  Moreover, if this question DOES get re-opened, please convert your second comment to an answer, and I will upvote it.  Whereas it&#39;s similar to my answer, it does give a slightly different perspective, which I consider valuable."},{"owner":{"account_id":113187,"reputation":200947,"user_id":298225,"accept_rate":100,"display_name":"Eric Postpischil"},"score":0,"creation_date":1385377343,"post_id":20183330,"comment_id":30101708,"body_markdown":"@DavidWallace: I would suggest just adding to your good answer. You could give the specific Java rule and explain how to see the full value (or otherwise change the display from Java’s default). That gives readers knowledge they can use to understand, probe, and control the behaviors involved. I can provide the Java rule if you like; I have quoted it from the specification in old answers but am on a small device at the moment and do not want to dig it up this way.","body":"@DavidWallace: I would suggest just adding to your good answer. You could give the specific Java rule and explain how to see the full value (or otherwise change the display from Java’s default). That gives readers knowledge they can use to understand, probe, and control the behaviors involved. I can provide the Java rule if you like; I have quoted it from the specification in old answers but am on a small device at the moment and do not want to dig it up this way."},{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":0,"creation_date":1385377581,"post_id":20183330,"comment_id":30101853,"body_markdown":"@EricPostpischil I&#39;ll give it some time.  If sanity prevails and this question gets re-opened, I think an answer from you would be a welcome addition to the two that are already here.  If it hasn&#39;t been re-opened in a day or two, I&#39;ll edit your remarks into my answer, giving you due credit of course.","body":"@EricPostpischil I&#39;ll give it some time.  If sanity prevails and this question gets re-opened, I think an answer from you would be a welcome addition to the two that are already here.  If it hasn&#39;t been re-opened in a day or two, I&#39;ll edit your remarks into my answer, giving you due credit of course."},{"owner":{"account_id":113187,"reputation":200947,"user_id":298225,"accept_rate":100,"display_name":"Eric Postpischil"},"score":0,"creation_date":1385385371,"post_id":20183330,"comment_id":30106886,"body_markdown":"@DavidWallace: Here is the Java [toString documentation](http://docs.oracle.com/javase/7/docs/api/java/lang/Float.html#toString(float)) for the `float` type, which is what is used for `println`. The wording is “There must be at least one digit to represent the fractional part, and beyond that as many, but only as many, more digits as are needed to uniquely distinguish the argument value from adjacent values of type `float`.”","body":"@DavidWallace: Here is the Java <a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/Float.html#toString(float)\" rel=\"nofollow noreferrer\">toString documentation</a> for the <code>float</code> type, which is what is used for <code>println</code>. The wording is “There must be at least one digit to represent the fractional part, and beyond that as many, but only as many, more digits as are needed to uniquely distinguish the argument value from adjacent values of type <code>float</code>.”"}],"answers":[{"tags":[],"owner":{"account_id":9760,"reputation":85859,"user_id":18157,"accept_rate":100,"display_name":"Jim Garrison"},"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1385344654,"creation_date":1385344341,"answer_id":20183628,"question_id":20183330,"body_markdown":"The decimal value `8099.99975` has nine significant digits. This is more than can be represented exactly in a float.  If you use the [floating point analysis tool at CUNY](http://babbage.cs.qc.cuny.edu/IEEE-754/) you&#39;ll see that the binary representation closest to `8099.9995` is `45FD1FFF`.  When you attempt to add `0.00025` you are suffering a &quot;loss of significance&quot;.  In order not to lose significant (left-hand) digits of the larger number, the significand of the smaller has to be shifted right to match the scale (exponent) of the larger.  When this happens, its value becomes ZERO as it shifts off the right end of the register.\r\n\r\n    Decimal     Exponent        Significand\r\n    ---------   --------------  -------------------------\r\n    8099.9995   10001011 (+12)  1.11111010001111111111111\r\n       0.00025  01110011 (-12)  1.00000110001001001101111\r\n\r\nTo line these up for addition, the second one has to shift right 24 bits, but there are only 23 bits in the significand of a single-precision float.  The significand disappears, leaving zero, so the addition has no effect.\r\n\r\nIf you want this to work, switch to double-precision arithmetic.\r\n","title":"Why is 8099.99975f != 8100f?","body":"<p>The decimal value <code>8099.99975</code> has nine significant digits. This is more than can be represented exactly in a float.  If you use the <a href=\"http://babbage.cs.qc.cuny.edu/IEEE-754/\" rel=\"nofollow\">floating point analysis tool at CUNY</a> you'll see that the binary representation closest to <code>8099.9995</code> is <code>45FD1FFF</code>.  When you attempt to add <code>0.00025</code> you are suffering a \"loss of significance\".  In order not to lose significant (left-hand) digits of the larger number, the significand of the smaller has to be shifted right to match the scale (exponent) of the larger.  When this happens, its value becomes ZERO as it shifts off the right end of the register.</p>\n\n<pre><code>Decimal     Exponent        Significand\n---------   --------------  -------------------------\n8099.9995   10001011 (+12)  1.11111010001111111111111\n   0.00025  01110011 (-12)  1.00000110001001001101111\n</code></pre>\n\n<p>To line these up for addition, the second one has to shift right 24 bits, but there are only 23 bits in the significand of a single-precision float.  The significand disappears, leaving zero, so the addition has no effect.</p>\n\n<p>If you want this to work, switch to double-precision arithmetic.</p>\n"},{"tags":[],"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1385347954,"creation_date":1385347954,"answer_id":20183943,"question_id":20183330,"body_markdown":"The key point to realise is that the value of a floating point number can be worked out in two different ways, that aren&#39;t in general equal.\r\n\r\n - There&#39;s the value that the bits in the floating point number give the exact binary representation of.\r\n - There&#39;s the &quot;decimal display value&quot; of a floating point number, which is the number with the least decimal places that is closer to that floating point number than any other number.\r\n\r\nTo understand the difference, consider the number whose exponent is 10001011 and whose significand is 1.11111010001111111111111.  This is the exact binary representation of 8099.99951171875.  But the decimal value 8099.9995 has fewer decimal places, and is closer to this floating point number than to any other floating point number.  Therefore, 8099.9995 is the value that will be displayed when you print out that number.\r\n\r\nNote that this particular floating point number is the next lowest one after 8100.\r\n\r\nNow consider 8099.99975.  It&#39;s slightly closer to 8099.99951171875 than it is to 8100.  Therefore, to represent it in single precision floating point, Java will pick the floating point number which is the exact binary representation of 8099.99951171875.  If you try to print it, you&#39;ll see 8099.9995.\r\n\r\nLastly, when you do 8099.9995 + 0.00025 in single precision floating point, the numbers involved are the exact binary representations of 8099.99951171875 and 0.0002499999827705323696136474609375.  But because the latter is slightly more than 1/2^12, the result of addition will be closer to 8100 than to 8099.99951171875, and so it will be rounded up, not down at the end, making it 8100.\r\n","title":"Why is 8099.99975f != 8100f?","body":"<p>The key point to realise is that the value of a floating point number can be worked out in two different ways, that aren't in general equal.</p>\n\n<ul>\n<li>There's the value that the bits in the floating point number give the exact binary representation of.</li>\n<li>There's the \"decimal display value\" of a floating point number, which is the number with the least decimal places that is closer to that floating point number than any other number.</li>\n</ul>\n\n<p>To understand the difference, consider the number whose exponent is 10001011 and whose significand is 1.11111010001111111111111.  This is the exact binary representation of 8099.99951171875.  But the decimal value 8099.9995 has fewer decimal places, and is closer to this floating point number than to any other floating point number.  Therefore, 8099.9995 is the value that will be displayed when you print out that number.</p>\n\n<p>Note that this particular floating point number is the next lowest one after 8100.</p>\n\n<p>Now consider 8099.99975.  It's slightly closer to 8099.99951171875 than it is to 8100.  Therefore, to represent it in single precision floating point, Java will pick the floating point number which is the exact binary representation of 8099.99951171875.  If you try to print it, you'll see 8099.9995.</p>\n\n<p>Lastly, when you do 8099.9995 + 0.00025 in single precision floating point, the numbers involved are the exact binary representations of 8099.99951171875 and 0.0002499999827705323696136474609375.  But because the latter is slightly more than 1/2^12, the result of addition will be closer to 8100 than to 8099.99951171875, and so it will be rounded up, not down at the end, making it 8100.</p>\n"}],"owner":{"account_id":1259917,"reputation":1534,"user_id":1218500,"accept_rate":85,"display_name":"mmaag"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":143,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":20183943,"answer_count":2,"score":1,"last_activity_date":1642213508,"creation_date":1385341914,"question_id":20183330,"body_markdown":"**Edit:** I know floating point arithmetic is not exact. And the arithmetic isn&#39;t even my problem. The addition gives the result I expected. `8099.99975f` doesn&#39;t.\r\n\r\n---\r\n\r\nSo I have this little program:\r\n\r\n    public class Test {\r\n\t    public static void main(String[] args) {\r\n\t\t    System.out.println(8099.99975f); // 8099.9995\r\n\t\t    System.out.println(8099.9995f + 0.00025f); // 8100.0\r\n\t\t    System.out.println(8100f == 8099.99975f); // false\r\n\t\t    System.out.println(8099.9995f + 0.00025f == 8099.99975f); // false\r\n            // I know comparing floats with == can be troublesome\r\n            // but here they really should be equal in every bit.\r\n\t    }\r\n    }\r\n\r\nI wrote it to check if `8099.99975` is rounded to `8100` when written as an IEEE 754 single precision float. To my surprise Java converts it to `8099.9995` when written as a float literal (`8099.99975f`). I checked my calculations and the IEEE standard again but couldn&#39;t find any mistakes. `8100` is just as far away from `8099.99975` as `8099.9995` but the last bit of `8100` is `0` which should make it the right representation.\r\n\r\nSo I checked the Java language spec to see if I missed something. After a quick search I found two things:\r\n\r\n - &gt;The Java programming language requires that floating-point arithmetic behave as if every floating-point operator rounded its floating-point result to the result precision. Inexact results must be rounded to the representable value nearest to the infinitely precise result; if the two nearest representable values are equally near, the one with its least significant bit zero is chosen.\r\n\r\n - &gt;The Java programming language uses round toward zero when converting a floating value to an integer [...].\r\n\r\nI noticed here that nothing was said about float literals. So I thought that float literals maybe are just doubles which when cast to float are rounded to zero similarly to the float to int casting. That would explain why `8099.99975f` was rounded to zero.\r\n\r\nI wrote the little program you can see above to check my theory and indeed found that when adding two float literals that should result in `8100` the correct float is computed. (Note here that `8099.9995` and `0.00025` can be represented exactly as single floats so there&#39;s no rounding that could lead to a different result) This confused me since it didn&#39;t make much sense to me that float literals and computed floats behaved differently so I dug around in the language spec some more and found this: \r\n\r\n&gt; A floating-point literal is of type float if it is suffixed with an ASCII letter F or f [...]. The elements of the types float [...] are those values that can be represented using the IEEE 754 32-bit single-precision [...] binary floating-point formats.\r\n\r\nThis ultimately states that the literal should be rounded according to the IEEE standard which in this case is to `8100`. So why is it `8099.9995`?","title":"Why is 8099.99975f != 8100f?","body":"<p><strong>Edit:</strong> I know floating point arithmetic is not exact. And the arithmetic isn't even my problem. The addition gives the result I expected. <code>8099.99975f</code> doesn't.</p>\n<hr />\n<p>So I have this little program:</p>\n<pre><code>public class Test {\n    public static void main(String[] args) {\n        System.out.println(8099.99975f); // 8099.9995\n        System.out.println(8099.9995f + 0.00025f); // 8100.0\n        System.out.println(8100f == 8099.99975f); // false\n        System.out.println(8099.9995f + 0.00025f == 8099.99975f); // false\n        // I know comparing floats with == can be troublesome\n        // but here they really should be equal in every bit.\n    }\n}\n</code></pre>\n<p>I wrote it to check if <code>8099.99975</code> is rounded to <code>8100</code> when written as an IEEE 754 single precision float. To my surprise Java converts it to <code>8099.9995</code> when written as a float literal (<code>8099.99975f</code>). I checked my calculations and the IEEE standard again but couldn't find any mistakes. <code>8100</code> is just as far away from <code>8099.99975</code> as <code>8099.9995</code> but the last bit of <code>8100</code> is <code>0</code> which should make it the right representation.</p>\n<p>So I checked the Java language spec to see if I missed something. After a quick search I found two things:</p>\n<ul>\n<li>\n<blockquote>\n<p>The Java programming language requires that floating-point arithmetic behave as if every floating-point operator rounded its floating-point result to the result precision. Inexact results must be rounded to the representable value nearest to the infinitely precise result; if the two nearest representable values are equally near, the one with its least significant bit zero is chosen.</p>\n</blockquote>\n</li>\n<li>\n<blockquote>\n<p>The Java programming language uses round toward zero when converting a floating value to an integer [...].</p>\n</blockquote>\n</li>\n</ul>\n<p>I noticed here that nothing was said about float literals. So I thought that float literals maybe are just doubles which when cast to float are rounded to zero similarly to the float to int casting. That would explain why <code>8099.99975f</code> was rounded to zero.</p>\n<p>I wrote the little program you can see above to check my theory and indeed found that when adding two float literals that should result in <code>8100</code> the correct float is computed. (Note here that <code>8099.9995</code> and <code>0.00025</code> can be represented exactly as single floats so there's no rounding that could lead to a different result) This confused me since it didn't make much sense to me that float literals and computed floats behaved differently so I dug around in the language spec some more and found this:</p>\n<blockquote>\n<p>A floating-point literal is of type float if it is suffixed with an ASCII letter F or f [...]. The elements of the types float [...] are those values that can be represented using the IEEE 754 32-bit single-precision [...] binary floating-point formats.</p>\n</blockquote>\n<p>This ultimately states that the literal should be rounded according to the IEEE standard which in this case is to <code>8100</code>. So why is it <code>8099.9995</code>?</p>\n"},{"tags":["java","macos"],"comments":[{"owner":{"account_id":3122089,"reputation":1689,"user_id":2641657,"display_name":"Jamal S"},"score":2,"creation_date":1590224106,"post_id":61969439,"comment_id":109603654,"body_markdown":"https://www.java.com/en/download/help/mac_controlpanel.xml","body":"<a href=\"https://www.java.com/en/download/help/mac_controlpanel.xml\" rel=\"nofollow noreferrer\">java.com/en/download/help/mac_controlpanel.xml</a>"},{"owner":{"account_id":10214393,"reputation":705,"user_id":7540535,"display_name":"NiYanchun"},"score":0,"creation_date":1615185296,"post_id":61969439,"comment_id":117603125,"body_markdown":"see this [MacOS Java Control Panel Missing on Mojave](https://stackoverflow.com/questions/53176089/macos-java-control-panel-missing-on-mojave/53176853).","body":"see this <a href=\"https://stackoverflow.com/questions/53176089/macos-java-control-panel-missing-on-mojave/53176853\">MacOS Java Control Panel Missing on Mojave</a>."}],"answers":[{"tags":[],"owner":{"account_id":5795525,"reputation":66,"user_id":4571465,"display_name":"mrk90"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1590235090,"creation_date":1590223346,"answer_id":61969510,"question_id":61969439,"body_markdown":"    MacOS 10.5 version and later. JDK installed location will be \r\n    in /usr/libexec/..\r\n    \r\n    I guess you’re trying to set your JAVA_HOME. \r\n    \r\n    Follow below steps\r\n    1. Install jdk and open Terminal\r\n    2. run &#39;java -version&#39;\r\n    3. Setting java home\r\n    run &#39;export JAVA_HOME=$(/usr/libexec/java_home)&#39;\r\n    4. To check &#39;echo $JAVA_HOME&#39;\r\n\r\n","title":"Java control panel missing on macOS?","body":"<pre><code>MacOS 10.5 version and later. JDK installed location will be \nin /usr/libexec/..\n\nI guess you’re trying to set your JAVA_HOME. \n\nFollow below steps\n1. Install jdk and open Terminal\n2. run 'java -version'\n3. Setting java home\nrun 'export JAVA_HOME=$(/usr/libexec/java_home)'\n4. To check 'echo $JAVA_HOME'\n</code></pre>\n"}],"owner":{"account_id":18659803,"reputation":39,"user_id":13601287,"display_name":"charles vilmos"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2775,"favorite_count":0,"down_vote_count":1,"up_vote_count":4,"answer_count":1,"score":3,"last_activity_date":1642212269,"creation_date":1590222919,"question_id":61969439,"body_markdown":"I could not find the java control panel on my macOS after the installation of Java JDK.\r\n\r\nI tried searching on the web but couldn&#39;t find any solution for the problem.\r\n\r\n**How to find to the Java Control Panel on macOS ?**","title":"Java control panel missing on macOS?","body":"<p>I could not find the java control panel on my macOS after the installation of Java JDK.</p>\n\n<p>I tried searching on the web but couldn't find any solution for the problem.</p>\n\n<p><strong>How to find to the Java Control Panel on macOS ?</strong></p>\n"},{"tags":["java","macos","java-11"],"answers":[{"tags":[],"owner":{"account_id":1181589,"reputation":3787,"user_id":1156412,"display_name":"El Hoss"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1584788675,"creation_date":1584788675,"answer_id":60787010,"question_id":60786967,"body_markdown":"Normally the JDK is located under \r\n`/Library/Java/JavaVirtualMachines`.\r\n\r\nThe AdaptOpenJdk for example is located here: `/Library/Java/JavaVirtualMachines/adoptopenjdk-11.jdk`\r\n","title":"Unable to find JAVA icon in System-Preference or Library of my MAC","body":"<p>Normally the JDK is located under \n<code>/Library/Java/JavaVirtualMachines</code>.</p>\n\n<p>The AdaptOpenJdk for example is located here: <code>/Library/Java/JavaVirtualMachines/adoptopenjdk-11.jdk</code></p>\n"},{"tags":[],"owner":{"account_id":12314870,"reputation":151,"user_id":8985460,"accept_rate":50,"display_name":"SymboCoder"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1584837890,"creation_date":1584837890,"answer_id":60794848,"question_id":60786967,"body_markdown":"Now, after hunting around for a while I have figured the following out:\r\n\r\n \r\n\r\n 1. You won&#39;t get JAVA in your Mac&#39;s *System Preference* until you have added JAVA home directory in your bash profile, irrespective of the java version installed\r\n 2. Generally be default Java gets installed in your **MacintoshHD**\r\n 3. So, open your MacintoshHD &amp; then go to **GO** option from your Finder\r\n 4. Next click on **Go to folder** option and type-in *~/Library*\r\n 5. Now you will see a **Java** folder and under that **JavaVirtualMachines**\r\n 6. You will now have JDK folder of whichever java version installed\r\n 7. Right click on JDK folder and click on info, copy the &#39;Where&#39; location\r\n 8. Open your bash profile with following command **vi .bash_profile**\r\n 9. Once in VI editor, insert the following:\r\n\r\nexport JAVA_HOME=copied Where location from JDK folder followed by /Contents/Home\r\n\r\nIt should look something like below\r\nexport JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk-11.0.6.jdk/Contents/Home\r\n\r\n 10. Now quit editor by **:wq** and restart your machine and you will now have JAVA in your system preference. \r\n\r\nHope this helps!!\r\n\r\n","title":"Unable to find JAVA icon in System-Preference or Library of my MAC","body":"<p>Now, after hunting around for a while I have figured the following out:</p>\n\n<ol>\n<li>You won't get JAVA in your Mac's <em>System Preference</em> until you have added JAVA home directory in your bash profile, irrespective of the java version installed</li>\n<li>Generally be default Java gets installed in your <strong>MacintoshHD</strong></li>\n<li>So, open your MacintoshHD &amp; then go to <strong>GO</strong> option from your Finder</li>\n<li>Next click on <strong>Go to folder</strong> option and type-in <em>~/Library</em></li>\n<li>Now you will see a <strong>Java</strong> folder and under that <strong>JavaVirtualMachines</strong></li>\n<li>You will now have JDK folder of whichever java version installed</li>\n<li>Right click on JDK folder and click on info, copy the 'Where' location</li>\n<li>Open your bash profile with following command <strong>vi .bash_profile</strong></li>\n<li>Once in VI editor, insert the following:</li>\n</ol>\n\n<p>export JAVA_HOME=copied Where location from JDK folder followed by /Contents/Home</p>\n\n<p>It should look something like below\nexport JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk-11.0.6.jdk/Contents/Home</p>\n\n<ol start=\"10\">\n<li>Now quit editor by <strong>:wq</strong> and restart your machine and you will now have JAVA in your system preference. </li>\n</ol>\n\n<p>Hope this helps!!</p>\n"},{"tags":[],"owner":{"account_id":9685841,"reputation":1379,"user_id":7436256,"display_name":"Wilson"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1642212141,"creation_date":1642212141,"answer_id":70718346,"question_id":60786967,"body_markdown":"For those of you that are still struggling with it. Here is the thing.\r\n\r\n&gt; The Java Preferences app was part of Apple Java installation and is not used by Oracle Java. Therefore, OS X releases from Apple that do not include Apple Java will not include Java Preferences.\r\n\r\n[ &quot;What happened to the Java Preferences app in Application -&gt; Utilities?&quot;][1]\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/technotes/guides/install/mac_install_faq.html#osxfaq_java_pref_app","title":"Unable to find JAVA icon in System-Preference or Library of my MAC","body":"<p>For those of you that are still struggling with it. Here is the thing.</p>\n<blockquote>\n<p>The Java Preferences app was part of Apple Java installation and is not used by Oracle Java. Therefore, OS X releases from Apple that do not include Apple Java will not include Java Preferences.</p>\n</blockquote>\n<p><a href=\"https://docs.oracle.com/javase/8/docs/technotes/guides/install/mac_install_faq.html#osxfaq_java_pref_app\" rel=\"nofollow noreferrer\"> &quot;What happened to the Java Preferences app in Application -&gt; Utilities?&quot;</a></p>\n"}],"owner":{"account_id":12314870,"reputation":151,"user_id":8985460,"accept_rate":50,"display_name":"SymboCoder"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8249,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":3,"score":1,"last_activity_date":1642212141,"creation_date":1584788346,"question_id":60786967,"body_markdown":"I have been a Windows user all my life and have recently got a MAC. My Mac is using MacOS Catalina. \r\nI am trying to set-up JDK and get going on a project, however the issue is after I have installed JDK 11.0.4, I don&#39;t see any Java-icon on my system preference nor could I find Java folder in my ~library. However, when I go to terminal and do *java -version* I do see java being present as below \r\n\r\n    ~ % java -version\r\n    java version &quot;11.0.6&quot; 2020-01-14 LTS\r\n    Java(TM) SE Runtime Environment 18.9 (build 11.0.6+8-LTS)\r\n    Java HotSpot(TM) 64-Bit Server VM 18.9 (build 11.0.6+8-LTS, mixed mode)\r\n\r\nI need help to see how I can resolved this, and then add my java installed location to my **.bash_profile**","title":"Unable to find JAVA icon in System-Preference or Library of my MAC","body":"<p>I have been a Windows user all my life and have recently got a MAC. My Mac is using MacOS Catalina. \nI am trying to set-up JDK and get going on a project, however the issue is after I have installed JDK 11.0.4, I don't see any Java-icon on my system preference nor could I find Java folder in my ~library. However, when I go to terminal and do <em>java -version</em> I do see java being present as below </p>\n\n<pre><code>~ % java -version\njava version \"11.0.6\" 2020-01-14 LTS\nJava(TM) SE Runtime Environment 18.9 (build 11.0.6+8-LTS)\nJava HotSpot(TM) 64-Bit Server VM 18.9 (build 11.0.6+8-LTS, mixed mode)\n</code></pre>\n\n<p>I need help to see how I can resolved this, and then add my java installed location to my <strong>.bash_profile</strong></p>\n"},{"tags":["java","android","textview"],"comments":[{"owner":{"account_id":22564906,"reputation":3594,"user_id":17133283,"display_name":"Sambhav Khandelwal"},"score":0,"creation_date":1642088569,"post_id":70698261,"comment_id":124983820,"body_markdown":"try replacing `p.setStyle(Paint.Style.FILL);` with `p.setStyle(Paint.Style.STROKE);`","body":"try replacing <code>p.setStyle(Paint.Style.FILL);</code> with <code>p.setStyle(Paint.Style.STROKE);</code>"},{"owner":{"account_id":3316324,"reputation":103,"user_id":2788613,"display_name":"Muhammad Waqas"},"score":0,"creation_date":1642099557,"post_id":70698261,"comment_id":124988274,"body_markdown":"@SambhavKhandelwal it will only get it worse. We need to use Paint.Style.FILL first in order to make text filled with desired &quot;textColor&quot;, otherwise text will be transparent.","body":"@SambhavKhandelwal it will only get it worse. We need to use Paint.Style.FILL first in order to make text filled with desired &quot;textColor&quot;, otherwise text will be transparent."},{"owner":{"account_id":8373673,"reputation":61868,"user_id":6287910,"display_name":"Cheticamp"},"score":0,"creation_date":1642103939,"post_id":70698261,"comment_id":124989843,"body_markdown":"Reverse the drawing of the text and outline: Draw the outline first then the text.","body":"Reverse the drawing of the text and outline: Draw the outline first then the text."},{"owner":{"account_id":22564906,"reputation":3594,"user_id":17133283,"display_name":"Sambhav Khandelwal"},"score":1,"creation_date":1642135065,"post_id":70698261,"comment_id":124996287,"body_markdown":"I am not very sure as I have not used it but u can try this library -&gt; `https://github.com/Maggie-Wan/StrokeTextView`","body":"I am not very sure as I have not used it but u can try this library -&gt; <code>https:&#47;&#47;github.com&#47;Maggie-Wan&#47;StrokeTextView</code>"},{"owner":{"account_id":3316324,"reputation":103,"user_id":2788613,"display_name":"Muhammad Waqas"},"score":0,"creation_date":1642166716,"post_id":70698261,"comment_id":125005055,"body_markdown":"@SambhavKhandelwal this library seems to be helpful. I&#39;ll try this with modifications for custom use.","body":"@SambhavKhandelwal this library seems to be helpful. I&#39;ll try this with modifications for custom use."},{"owner":{"account_id":3316324,"reputation":103,"user_id":2788613,"display_name":"Muhammad Waqas"},"score":0,"creation_date":1642170230,"post_id":70698261,"comment_id":125006450,"body_markdown":"@SambhavKhandelwal as I said earlier it seems to be helpful, but I cannot change stroke values on runtime. I&#39;ve tried but it doesn&#39;t. Can you suggest something, or can you try modifying this library&#39;s code?","body":"@SambhavKhandelwal as I said earlier it seems to be helpful, but I cannot change stroke values on runtime. I&#39;ve tried but it doesn&#39;t. Can you suggest something, or can you try modifying this library&#39;s code?"},{"owner":{"account_id":22564906,"reputation":3594,"user_id":17133283,"display_name":"Sambhav Khandelwal"},"score":0,"creation_date":1642170396,"post_id":70698261,"comment_id":125006516,"body_markdown":"try this -&gt; `https://github.com/melihaksoy/StrokedTextView`","body":"try this -&gt; <code>https:&#47;&#47;github.com&#47;melihaksoy&#47;StrokedTextView</code>"},{"owner":{"account_id":3316324,"reputation":103,"user_id":2788613,"display_name":"Muhammad Waqas"},"score":0,"creation_date":1642188000,"post_id":70698261,"comment_id":125013357,"body_markdown":"@Cheticamp it messes up the textView. Try this on your own and you&#39;ll get the idea.","body":"@Cheticamp it messes up the textView. Try this on your own and you&#39;ll get the idea."},{"owner":{"account_id":3316324,"reputation":103,"user_id":2788613,"display_name":"Muhammad Waqas"},"score":0,"creation_date":1642188133,"post_id":70698261,"comment_id":125013397,"body_markdown":"@SambhavKhandelwal the library you recommended later, is coded in Kotlin. I&#39;ll only be able to use it as a library and I won&#39;t be able to use it&#39;s custom class which he extended with TextView. If I would be able to use is custom textView class, I&#39;d be able to modify it&#39;s function to meet my needs. I hope I&#39;m being clear","body":"@SambhavKhandelwal the library you recommended later, is coded in Kotlin. I&#39;ll only be able to use it as a library and I won&#39;t be able to use it&#39;s custom class which he extended with TextView. If I would be able to use is custom textView class, I&#39;d be able to modify it&#39;s function to meet my needs. I hope I&#39;m being clear"},{"owner":{"account_id":3316324,"reputation":103,"user_id":2788613,"display_name":"Muhammad Waqas"},"score":0,"creation_date":1642188187,"post_id":70698261,"comment_id":125013419,"body_markdown":"@SambhavKhandelwal if it was coded in Java like the earlier library, then I might use it&#39;s code after modifications. But I&#39;m not that good at Kotlin yet.","body":"@SambhavKhandelwal if it was coded in Java like the earlier library, then I might use it&#39;s code after modifications. But I&#39;m not that good at Kotlin yet."},{"owner":{"account_id":22564906,"reputation":3594,"user_id":17133283,"display_name":"Sambhav Khandelwal"},"score":0,"creation_date":1642220161,"post_id":70698261,"comment_id":125019204,"body_markdown":"then try this -.&gt; `https://github.com/HamCheeseDev/OutlinedTextView` I tried it. It also allows you to change stroke width, color etc on runtime","body":"then try this -.&gt; <code>https:&#47;&#47;github.com&#47;HamCheeseDev&#47;OutlinedTextView</code> I tried it. It also allows you to change stroke width, color etc on runtime"},{"owner":{"account_id":3316324,"reputation":103,"user_id":2788613,"display_name":"Muhammad Waqas"},"score":0,"creation_date":1642253437,"post_id":70698261,"comment_id":125024323,"body_markdown":"Thank you for all your suggestions and your time dear , I&#39;ve found helpful solution by @Cheticamp and I&#39;m using that now. Cheers Pal!","body":"Thank you for all your suggestions and your time dear , I&#39;ve found helpful solution by @Cheticamp and I&#39;m using that now. Cheers Pal!"}],"answers":[{"tags":[],"owner":{"account_id":8373673,"reputation":61868,"user_id":6287910,"display_name":"Cheticamp"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1642211721,"creation_date":1642211721,"answer_id":70718320,"question_id":70698261,"body_markdown":"The following draws the outline of the characters in a _TextView_ but takes care to clip out the characters themselves so they are not drawn over.\r\n\r\n**OutlineTextView.java**\r\n\r\n    public class OutlineTextView extends androidx.appcompat.widget.AppCompatTextView {\r\n        private final Paint mOutlinePaint = new Paint();\r\n        private final Path mOutlinePath = new Path();\r\n        private float mStrokeWidth = 0f;\r\n\r\n        public OutlineTextView(Context context) {\r\n            super(context);\r\n            init();\r\n        }\r\n\r\n        public OutlineTextView(Context context, @Nullable AttributeSet attrs) {\r\n            super(context, attrs);\r\n            init();\r\n        }\r\n\r\n        public OutlineTextView(Context context, @Nullable AttributeSet attrs, int defStyleAttr) {\r\n            super(context, attrs, defStyleAttr);\r\n            init();\r\n        }\r\n\r\n        private void init() {\r\n            mOutlinePaint.setStrokeWidth(0f);\r\n            mOutlinePaint.setStyle(Paint.Style.STROKE);\r\n            mOutlinePaint.setColor(Color.RED);\r\n        }\r\n\r\n        @Override\r\n        protected void onLayout(boolean changed, int left, int top, int right, int bottom) {\r\n            super.onLayout(changed, left, top, right, bottom);\r\n\r\n            float xOffset = getLayout().getLineLeft(0) + getPaddingLeft();\r\n            float baseline = getLayout().getLineBaseline(0) + getPaddingTop();\r\n            getPaint().getTextPath(getText().toString(), 0, getText().length(), xOffset, baseline, mOutlinePath);\r\n        }\r\n\r\n        @Override\r\n        protected void onDraw(Canvas canvas) {\r\n            super.onDraw(canvas);\r\n\r\n            if (mStrokeWidth &gt; 0) {\r\n                canvas.save();\r\n                // The following insures that we don&#39;t draw inside the characters.\r\n                if (Build.VERSION.SDK_INT &lt; Build.VERSION_CODES.O) {\r\n                    canvas.clipPath(mOutlinePath, Region.Op.DIFFERENCE);\r\n                } else {\r\n                    canvas.clipOutPath(mOutlinePath);\r\n                }\r\n                canvas.drawPath(mOutlinePath, mOutlinePaint);\r\n                canvas.restore();\r\n            }\r\n        }\r\n\r\n        public void setStrokeWidth(Float strokeWidth) {\r\n            mStrokeWidth = strokeWidth;\r\n            mOutlinePaint.setStrokeWidth(strokeWidth);\r\n            invalidate();\r\n        }\r\n    }\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/ssq4u.gif","title":"How to add stroke on outside of TextView","body":"<p>The following draws the outline of the characters in a <em>TextView</em> but takes care to clip out the characters themselves so they are not drawn over.</p>\n<p><strong>OutlineTextView.java</strong></p>\n<pre><code>public class OutlineTextView extends androidx.appcompat.widget.AppCompatTextView {\n    private final Paint mOutlinePaint = new Paint();\n    private final Path mOutlinePath = new Path();\n    private float mStrokeWidth = 0f;\n\n    public OutlineTextView(Context context) {\n        super(context);\n        init();\n    }\n\n    public OutlineTextView(Context context, @Nullable AttributeSet attrs) {\n        super(context, attrs);\n        init();\n    }\n\n    public OutlineTextView(Context context, @Nullable AttributeSet attrs, int defStyleAttr) {\n        super(context, attrs, defStyleAttr);\n        init();\n    }\n\n    private void init() {\n        mOutlinePaint.setStrokeWidth(0f);\n        mOutlinePaint.setStyle(Paint.Style.STROKE);\n        mOutlinePaint.setColor(Color.RED);\n    }\n\n    @Override\n    protected void onLayout(boolean changed, int left, int top, int right, int bottom) {\n        super.onLayout(changed, left, top, right, bottom);\n\n        float xOffset = getLayout().getLineLeft(0) + getPaddingLeft();\n        float baseline = getLayout().getLineBaseline(0) + getPaddingTop();\n        getPaint().getTextPath(getText().toString(), 0, getText().length(), xOffset, baseline, mOutlinePath);\n    }\n\n    @Override\n    protected void onDraw(Canvas canvas) {\n        super.onDraw(canvas);\n\n        if (mStrokeWidth &gt; 0) {\n            canvas.save();\n            // The following insures that we don't draw inside the characters.\n            if (Build.VERSION.SDK_INT &lt; Build.VERSION_CODES.O) {\n                canvas.clipPath(mOutlinePath, Region.Op.DIFFERENCE);\n            } else {\n                canvas.clipOutPath(mOutlinePath);\n            }\n            canvas.drawPath(mOutlinePath, mOutlinePaint);\n            canvas.restore();\n        }\n    }\n\n    public void setStrokeWidth(Float strokeWidth) {\n        mStrokeWidth = strokeWidth;\n        mOutlinePaint.setStrokeWidth(strokeWidth);\n        invalidate();\n    }\n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/ssq4u.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ssq4u.gif\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":3316324,"reputation":103,"user_id":2788613,"display_name":"Muhammad Waqas"},"comment_count":12,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":428,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":70718320,"answer_count":1,"score":2,"last_activity_date":1642211721,"creation_date":1642084044,"question_id":70698261,"body_markdown":"Any ideas, code snippets are welcome!\r\n-------------------------------------\r\n\r\nI have created a `CustomTextView` class that extends `AppCompatTextView` and I did this to add **stroke** support to boring `TextView`. The problem is, `Paint.Style.STROKE` adds stroke on the inside of `TextView`. There should be something which allows us to choose between outer-stroke and inner-stroke.&lt;br/&gt;&lt;br/&gt;\r\nP.S: I can share the complete `CustomTextView` class if needed, not a big deal.\r\n\r\n\r\n - What we currently have:&lt;br&gt;\r\n[![enter image description here][1]][1]\r\n - What we want to achieve:&lt;br&gt;\r\n[![enter image description here][2]][2]\r\n\r\nThis is the `onDraw` method from our `CustomTextView` which is used to add stroke to textView.\r\n\r\n        @Override\r\n        protected void onDraw(Canvas canvas) {\r\n            if(_strokeWidth &gt; 0) {\r\n                //set paint to fill mode\r\n                Paint p = getPaint();\r\n                p.setStyle(Paint.Style.FILL);\r\n                //draw the fill part of text\r\n                super.onDraw(canvas);\r\n                //save the text color\r\n                int currentTextColor = getCurrentTextColor();\r\n                //set paint to stroke mode and specify\r\n                //stroke color and width\r\n                p.setStyle(Paint.Style.STROKE);\r\n                p.setStrokeWidth(_strokeWidth);\r\n                setTextColor(_strokeColor);\r\n                //draw text stroke\r\n                super.onDraw(canvas);\r\n                //revert the color back to the one\r\n                //initially specified\r\n                setTextColor(currentTextColor);\r\n            } else {\r\n                super.onDraw(canvas);\r\n            }\r\n        }\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/WRiCc.gif\r\n  [2]: https://i.stack.imgur.com/z5GrD.gif","title":"How to add stroke on outside of TextView","body":"<h2>Any ideas, code snippets are welcome!</h2>\n<p>I have created a <code>CustomTextView</code> class that extends <code>AppCompatTextView</code> and I did this to add <strong>stroke</strong> support to boring <code>TextView</code>. The problem is, <code>Paint.Style.STROKE</code> adds stroke on the inside of <code>TextView</code>. There should be something which allows us to choose between outer-stroke and inner-stroke.<br/><br/>\nP.S: I can share the complete <code>CustomTextView</code> class if needed, not a big deal.</p>\n<ul>\n<li>What we currently have:<br>\n<a href=\"https://i.stack.imgur.com/WRiCc.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/WRiCc.gif\" alt=\"enter image description here\" /></a></li>\n<li>What we want to achieve:<br>\n<a href=\"https://i.stack.imgur.com/z5GrD.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/z5GrD.gif\" alt=\"enter image description here\" /></a></li>\n</ul>\n<p>This is the <code>onDraw</code> method from our <code>CustomTextView</code> which is used to add stroke to textView.</p>\n<pre><code>    @Override\n    protected void onDraw(Canvas canvas) {\n        if(_strokeWidth &gt; 0) {\n            //set paint to fill mode\n            Paint p = getPaint();\n            p.setStyle(Paint.Style.FILL);\n            //draw the fill part of text\n            super.onDraw(canvas);\n            //save the text color\n            int currentTextColor = getCurrentTextColor();\n            //set paint to stroke mode and specify\n            //stroke color and width\n            p.setStyle(Paint.Style.STROKE);\n            p.setStrokeWidth(_strokeWidth);\n            setTextColor(_strokeColor);\n            //draw text stroke\n            super.onDraw(canvas);\n            //revert the color back to the one\n            //initially specified\n            setTextColor(currentTextColor);\n        } else {\n            super.onDraw(canvas);\n        }\n    }\n</code></pre>\n"},{"tags":["java","multithreading","concurrency","executorservice","threadpoolexecutor"],"comments":[{"owner":{"account_id":62440,"reputation":23185,"user_id":185541,"display_name":"rsp"},"score":1,"creation_date":1259187804,"post_id":1800317,"comment_id":1688340,"body_markdown":"What is your question? Isn&#39;t your 2nd code example the answer to your title?","body":"What is your question? Isn&#39;t your 2nd code example the answer to your title?"},{"owner":{"account_id":75652,"reputation":12214,"user_id":216941,"accept_rate":86,"display_name":"Matt Wonlaw"},"score":6,"creation_date":1259230601,"post_id":1800317,"comment_id":1690823,"body_markdown":"I want a thread pool that will add threads on demand as the number of tasks grow, but will never add more than some max number of threads.  CachedThreadPool already does this, except it will add an unlimited number of threads and not stop at some pre-defined size.  The size I define in the examples is 3.  The second example adds 1 thread, but doesn&#39;t add two more as new tasks arrive while the other tasks have not yet completed.","body":"I want a thread pool that will add threads on demand as the number of tasks grow, but will never add more than some max number of threads.  CachedThreadPool already does this, except it will add an unlimited number of threads and not stop at some pre-defined size.  The size I define in the examples is 3.  The second example adds 1 thread, but doesn&#39;t add two more as new tasks arrive while the other tasks have not yet completed."},{"owner":{"account_id":874677,"reputation":59,"user_id":924574,"accept_rate":25,"display_name":"ethan"},"score":0,"creation_date":1336624106,"post_id":1800317,"comment_id":13617008,"body_markdown":"Check this, it solves it, http://debuggingisfun.blogspot.com/2012/05/java-cachedthreadpool-with-min-and-max.html","body":"Check this, it solves it, <a href=\"http://debuggingisfun.blogspot.com/2012/05/java-cachedthreadpool-with-min-and-max.html\" rel=\"nofollow noreferrer\">debuggingisfun.blogspot.com/2012/05/&hellip;</a>"},{"owner":{"account_id":60171,"reputation":115485,"user_id":179850,"accept_rate":100,"display_name":"Gray"},"score":0,"creation_date":1503322397,"post_id":1800317,"comment_id":78554681,"body_markdown":"Related to: https://stackoverflow.com/questions/19528304/how-to-get-the-threadpoolexecutor-to-increase-threads-to-max-before-queueing/19528305#19528305","body":"Related to: <a href=\"https://stackoverflow.com/questions/19528304/how-to-get-the-threadpoolexecutor-to-increase-threads-to-max-before-queueing/19528305#19528305\" title=\"how to get the threadpoolexecutor to increase threads to max before queueing\">stackoverflow.com/questions/19528304/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":42065,"reputation":53627,"user_id":122428,"display_name":"jitter"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1472809474,"creation_date":1259187800,"answer_id":1800341,"question_id":1800317,"body_markdown":"This is what you want (atleast I guess so). For an explanation check [Jonathan Feinberg answer][1]\r\n\r\n[`Executors.newFixedThreadPool(int n)`][2] \r\n\r\n&gt;Creates a thread pool that reuses a fixed number of threads operating off a shared unbounded queue. At any point, at most nThreads threads will be active processing tasks. If additional tasks are submitted when all threads are active, they will wait in the queue until a thread is available. If any thread terminates due to a failure during execution prior to shutdown, a new one will take its place if needed to execute subsequent tasks. The threads in the pool will exist until it is explicitly shutdown.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/1800317/impossible-to-make-a-cached-thread-pool-with-a-size-limit/1800369#1800369\r\n  [2]: https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/Executors.html#newFixedThreadPool-int-","title":"Impossible to make a cached thread pool with a size limit?","body":"<p>This is what you want (atleast I guess so). For an explanation check <a href=\"https://stackoverflow.com/questions/1800317/impossible-to-make-a-cached-thread-pool-with-a-size-limit/1800369#1800369\">Jonathan Feinberg answer</a></p>\n\n<p><a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/Executors.html#newFixedThreadPool-int-\" rel=\"nofollow noreferrer\"><code>Executors.newFixedThreadPool(int n)</code></a> </p>\n\n<blockquote>\n  <p>Creates a thread pool that reuses a fixed number of threads operating off a shared unbounded queue. At any point, at most nThreads threads will be active processing tasks. If additional tasks are submitted when all threads are active, they will wait in the queue until a thread is available. If any thread terminates due to a failure during execution prior to shutdown, a new one will take its place if needed to execute subsequent tasks. The threads in the pool will exist until it is explicitly shutdown.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":48447,"reputation":44848,"user_id":143938,"display_name":"Jonathan Feinberg"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1259188204,"creation_date":1259188204,"answer_id":1800369,"question_id":1800317,"body_markdown":"Per the Javadoc for ThreadPoolExecutor:\r\n\r\n&gt;If there are more than corePoolSize but less than maximumPoolSize threads running, a new thread will be created *only if the queue is full*. By setting corePoolSize and maximumPoolSize the same, you create a fixed-size thread pool.\r\n\r\n(Emphasis mine.)\r\n\r\njitter&#39;s answer is what you want, although mine answers your other question. :)","title":"Impossible to make a cached thread pool with a size limit?","body":"<p>Per the Javadoc for ThreadPoolExecutor:</p>\n\n<blockquote>\n  <p>If there are more than corePoolSize but less than maximumPoolSize threads running, a new thread will be created <em>only if the queue is full</em>. By setting corePoolSize and maximumPoolSize the same, you create a fixed-size thread pool.</p>\n</blockquote>\n\n<p>(Emphasis mine.)</p>\n\n<p>jitter's answer is what you want, although mine answers your other question. :)</p>\n"},{"tags":[],"owner":{"account_id":8011,"reputation":29400,"user_id":14139,"accept_rate":84,"display_name":"brianegge"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1259188614,"creation_date":1259188614,"answer_id":1800412,"question_id":1800317,"body_markdown":"In your first example, subsequent tasks are rejected because the `AbortPolicy` is the default `RejectedExecutionHandler`.  The ThreadPoolExecutor contains the following policies, which you can change via the `setRejectedExecutionHandler` method:\r\n\r\n    CallerRunsPolicy\r\n    AbortPolicy\r\n    DiscardPolicy\r\n    DiscardOldestPolicy\r\n\r\nIt sounds like you want cached thread pool with a CallerRunsPolicy.","title":"Impossible to make a cached thread pool with a size limit?","body":"<p>In your first example, subsequent tasks are rejected because the <code>AbortPolicy</code> is the default <code>RejectedExecutionHandler</code>.  The ThreadPoolExecutor contains the following policies, which you can change via the <code>setRejectedExecutionHandler</code> method:</p>\n\n<pre><code>CallerRunsPolicy\nAbortPolicy\nDiscardPolicy\nDiscardOldestPolicy\n</code></pre>\n\n<p>It sounds like you want cached thread pool with a CallerRunsPolicy.</p>\n"},{"tags":[],"owner":{"account_id":46369,"reputation":7786,"user_id":136928,"accept_rate":60,"display_name":"sjlee"},"down_vote_count":0,"up_vote_count":245,"is_accepted":true,"score":245,"last_activity_date":1642211080,"creation_date":1259190660,"answer_id":1800583,"question_id":1800317,"body_markdown":"The `ThreadPoolExecutor` has the following several key behaviors, and your problems can be explained by these behaviors.\r\n\r\nWhen tasks are submitted,\r\n\r\n 1. If the thread pool has not reached the core size, it creates new threads.\r\n 2. If the core size has been reached and there is no idle threads, it queues tasks.\r\n 3. If the core size has been reached, there is no idle threads, and the queue becomes full, it creates new threads (until it reaches the max size).\r\n 4. If the max size has been reached, there is no idle threads, and the queue becomes full, the rejection policy kicks in.\r\n\r\nIn the first example, note that the `SynchronousQueue` has essentially size of 0.  Therefore, the moment you reach the max size (3), the rejection policy kicks in (#4).\r\n\r\nIn the second example, the queue of choice is a `LinkedBlockingQueue` which has an unlimited size.  Therefore, you get stuck with behavior #2.\r\n\r\nYou cannot really tinker much with the cached type or the fixed type, as their behavior is almost completely determined.\r\n\r\nIf you want to have a bounded and dynamic thread pool, you need to use a positive core size and max size combined with a queue of a finite size.  For example,\r\n\r\n    new ThreadPoolExecutor(10, // core size\r\n        50, // max size\r\n        10*60, // idle timeout\r\n        TimeUnit.SECONDS,\r\n        new ArrayBlockingQueue&lt;Runnable&gt;(20)); // queue with a size\r\n\r\n\r\n**Addendum**: this is a fairly old answer, and it appears that JDK changed its behavior when it comes to core size of 0. Since JDK 1.6, if the core size is 0 and the pool does not have any threads, the ThreadPoolExecutor will add a thread to execute that task. Therefore, the core size of 0 is an exception to the rule above. Thanks [Steve][1] for [bringing][2] that to my attention.\r\n\r\n\r\n  [1]: https://stackoverflow.com/users/3595685/steve\r\n  [2]: https://stackoverflow.com/questions/52253164/threadpoolexecutor-with-corepoolsize-0-should-not-execute-tasks-until-task-queue","title":"Impossible to make a cached thread pool with a size limit?","body":"<p>The <code>ThreadPoolExecutor</code> has the following several key behaviors, and your problems can be explained by these behaviors.</p>\n<p>When tasks are submitted,</p>\n<ol>\n<li>If the thread pool has not reached the core size, it creates new threads.</li>\n<li>If the core size has been reached and there is no idle threads, it queues tasks.</li>\n<li>If the core size has been reached, there is no idle threads, and the queue becomes full, it creates new threads (until it reaches the max size).</li>\n<li>If the max size has been reached, there is no idle threads, and the queue becomes full, the rejection policy kicks in.</li>\n</ol>\n<p>In the first example, note that the <code>SynchronousQueue</code> has essentially size of 0.  Therefore, the moment you reach the max size (3), the rejection policy kicks in (#4).</p>\n<p>In the second example, the queue of choice is a <code>LinkedBlockingQueue</code> which has an unlimited size.  Therefore, you get stuck with behavior #2.</p>\n<p>You cannot really tinker much with the cached type or the fixed type, as their behavior is almost completely determined.</p>\n<p>If you want to have a bounded and dynamic thread pool, you need to use a positive core size and max size combined with a queue of a finite size.  For example,</p>\n<pre><code>new ThreadPoolExecutor(10, // core size\n    50, // max size\n    10*60, // idle timeout\n    TimeUnit.SECONDS,\n    new ArrayBlockingQueue&lt;Runnable&gt;(20)); // queue with a size\n</code></pre>\n<p><strong>Addendum</strong>: this is a fairly old answer, and it appears that JDK changed its behavior when it comes to core size of 0. Since JDK 1.6, if the core size is 0 and the pool does not have any threads, the ThreadPoolExecutor will add a thread to execute that task. Therefore, the core size of 0 is an exception to the rule above. Thanks <a href=\"https://stackoverflow.com/users/3595685/steve\">Steve</a> for <a href=\"https://stackoverflow.com/questions/52253164/threadpoolexecutor-with-corepoolsize-0-should-not-execute-tasks-until-task-queue\">bringing</a> that to my attention.</p>\n"},{"tags":[],"owner":{"account_id":680988,"reputation":51,"user_id":530888,"display_name":"paul"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1324398135,"creation_date":1291510898,"answer_id":4356792,"question_id":1800317,"body_markdown":"None of the answers here fixed my problem, which had to do with creating a limited amount of HTTP connections using Apache&#39;s HTTP client (3.x version). Since it took me some hours to figure out a good setup, I&#39;ll share:\r\n\r\n    private ExecutorService executor = new ThreadPoolExecutor(5, 10, 60L,\r\n      TimeUnit.SECONDS, new SynchronousQueue&lt;Runnable&gt;(),\r\n      Executors.defaultThreadFactory(), new ThreadPoolExecutor.CallerRunsPolicy());\r\n\r\n\r\nThis creates a `ThreadPoolExecutor` which starts with five and holds a maximum of ten simultaneously running threads using `CallerRunsPolicy` for executing.","title":"Impossible to make a cached thread pool with a size limit?","body":"<p>None of the answers here fixed my problem, which had to do with creating a limited amount of HTTP connections using Apache's HTTP client (3.x version). Since it took me some hours to figure out a good setup, I'll share:</p>\n\n<pre><code>private ExecutorService executor = new ThreadPoolExecutor(5, 10, 60L,\n  TimeUnit.SECONDS, new SynchronousQueue&lt;Runnable&gt;(),\n  Executors.defaultThreadFactory(), new ThreadPoolExecutor.CallerRunsPolicy());\n</code></pre>\n\n<p>This creates a <code>ThreadPoolExecutor</code> which starts with five and holds a maximum of ten simultaneously running threads using <code>CallerRunsPolicy</code> for executing.</p>\n"},{"tags":[],"owner":{"account_id":805970,"reputation":29,"user_id":917600,"display_name":"Ashkrit"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1314636553,"creation_date":1314612646,"answer_id":7228740,"question_id":1800317,"body_markdown":"there is one more option. Instead of using new SynchronousQueue you can use any other queue also, but you have to make sure its size is 1, so that will force executorservice to create new thread.","title":"Impossible to make a cached thread pool with a size limit?","body":"<p>there is one more option. Instead of using new SynchronousQueue you can use any other queue also, but you have to make sure its size is 1, so that will force executorservice to create new thread.</p>\n"},{"tags":[],"owner":{"account_id":974653,"reputation":41,"user_id":996322,"display_name":"Stuart"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1318636655,"creation_date":1318635558,"answer_id":7774672,"question_id":1800317,"body_markdown":"Doesn&#39;t look as though any of the answers actually answer the question - in fact I can&#39;t see a way of doing this - even if you subclass from PooledExecutorService since many of the methods/properties are private e.g. making addIfUnderMaximumPoolSize was protected you could do the following:\r\n\r\n    class MyThreadPoolService extends ThreadPoolService {\r\n        public void execute(Runnable run) {\r\n            if (poolSize() == 0) {\r\n                if (addIfUnderMaximumPoolSize(run) != null)\r\n                    return;\r\n            }\r\n            super.execute(run);\r\n        }\r\n    }\r\n\r\nThe closest I got was this - but even that isn&#39;t a very good solution\r\n\r\n    new ThreadPoolExecutor(min, max, 60L, TimeUnit.SECONDS, new LinkedBlockingQueue&lt;Runnable&gt;()) {\r\n        public void execute(Runnable command) {\r\n            if (getPoolSize() == 0 &amp;&amp; getActiveCount() &lt; getMaximumPoolSize()) {\t\t\r\n                super.setCorePoolSize(super.getCorePoolSize() + 1);\r\n            }\r\n            super.execute(command);\r\n        }\r\n\r\n        protected void afterExecute(Runnable r, Throwable t) {\r\n             // nothing in the queue\r\n             if (getQueue().isEmpty() &amp;&amp; getPoolSize() &gt; min) {\r\n                 setCorePoolSize(getCorePoolSize() - 1);\r\n             }\r\n        };\r\n     };\r\n\r\np.s. not tested the above\r\n","title":"Impossible to make a cached thread pool with a size limit?","body":"<p>Doesn't look as though any of the answers actually answer the question - in fact I can't see a way of doing this - even if you subclass from PooledExecutorService since many of the methods/properties are private e.g. making addIfUnderMaximumPoolSize was protected you could do the following:</p>\n\n<pre><code>class MyThreadPoolService extends ThreadPoolService {\n    public void execute(Runnable run) {\n        if (poolSize() == 0) {\n            if (addIfUnderMaximumPoolSize(run) != null)\n                return;\n        }\n        super.execute(run);\n    }\n}\n</code></pre>\n\n<p>The closest I got was this - but even that isn't a very good solution</p>\n\n<pre><code>new ThreadPoolExecutor(min, max, 60L, TimeUnit.SECONDS, new LinkedBlockingQueue&lt;Runnable&gt;()) {\n    public void execute(Runnable command) {\n        if (getPoolSize() == 0 &amp;&amp; getActiveCount() &lt; getMaximumPoolSize()) {        \n            super.setCorePoolSize(super.getCorePoolSize() + 1);\n        }\n        super.execute(command);\n    }\n\n    protected void afterExecute(Runnable r, Throwable t) {\n         // nothing in the queue\n         if (getQueue().isEmpty() &amp;&amp; getPoolSize() &gt; min) {\n             setCorePoolSize(getCorePoolSize() - 1);\n         }\n    };\n };\n</code></pre>\n\n<p>p.s. not tested the above</p>\n"},{"tags":[],"owner":{"account_id":974653,"reputation":41,"user_id":996322,"display_name":"Stuart"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1318643339,"creation_date":1318641503,"answer_id":7775135,"question_id":1800317,"body_markdown":"Here is another solution. I think this solution  behaves as you want it to (though not proud of this solution):\r\n\r\n\tfinal LinkedBlockingQueue&lt;Runnable&gt; queue = new LinkedBlockingQueue&lt;Runnable&gt;() {\r\n\t\tpublic boolean offer(Runnable o) {\r\n\t\t\tif (size() &gt; 1)\r\n\t\t\t\treturn false;\r\n\t\t\treturn super.offer(o);\r\n\t\t};\r\n\t\t\r\n\t    public boolean add(Runnable o) {\r\n\t        if (super.offer(o))\r\n\t            return true;\r\n\t        else\r\n\t            throw new IllegalStateException(&quot;Queue full&quot;);\r\n\t    }\r\n\t};\r\n\t\r\n\tRejectedExecutionHandler handler = new RejectedExecutionHandler() {\t\t\t\r\n\t\tpublic void rejectedExecution(Runnable r, ThreadPoolExecutor executor) {\r\n\t\t\tqueue.add(r);\r\n\t\t}\r\n\t};\r\n\t\r\n\tdbThreadExecutor =\r\n\t\t\tnew ThreadPoolExecutor(min, max, 60L, TimeUnit.SECONDS, queue, handler);\r\n\r\n","title":"Impossible to make a cached thread pool with a size limit?","body":"<p>Here is another solution. I think this solution  behaves as you want it to (though not proud of this solution):</p>\n\n<pre><code>final LinkedBlockingQueue&lt;Runnable&gt; queue = new LinkedBlockingQueue&lt;Runnable&gt;() {\n    public boolean offer(Runnable o) {\n        if (size() &gt; 1)\n            return false;\n        return super.offer(o);\n    };\n\n    public boolean add(Runnable o) {\n        if (super.offer(o))\n            return true;\n        else\n            throw new IllegalStateException(\"Queue full\");\n    }\n};\n\nRejectedExecutionHandler handler = new RejectedExecutionHandler() {         \n    public void rejectedExecution(Runnable r, ThreadPoolExecutor executor) {\n        queue.add(r);\n    }\n};\n\ndbThreadExecutor =\n        new ThreadPoolExecutor(min, max, 60L, TimeUnit.SECONDS, queue, handler);\n</code></pre>\n"},{"tags":[],"owner":{"display_name":"user1046052"},"down_vote_count":2,"up_vote_count":66,"is_accepted":false,"score":64,"last_activity_date":1321291496,"creation_date":1321291496,"answer_id":8125505,"question_id":1800317,"body_markdown":"Unless I&#39;ve missed something, the solution to the original question is simple. The following code implements the desired behavior as described by the original poster. It will spawn up to 5 threads to work on an unbounded queue and idle threads will terminate after 60 seconds.\r\n\r\n\ttp = new ThreadPoolExecutor(5, 5, 60, TimeUnit.SECONDS,\r\n                        new LinkedBlockingQueue&lt;Runnable&gt;());\r\n\ttp.allowCoreThreadTimeOut(true);\r\n\r\n\r\n","title":"Impossible to make a cached thread pool with a size limit?","body":"<p>Unless I've missed something, the solution to the original question is simple. The following code implements the desired behavior as described by the original poster. It will spawn up to 5 threads to work on an unbounded queue and idle threads will terminate after 60 seconds.</p>\n\n<pre><code>tp = new ThreadPoolExecutor(5, 5, 60, TimeUnit.SECONDS,\n                    new LinkedBlockingQueue&lt;Runnable&gt;());\ntp.allowCoreThreadTimeOut(true);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1251686,"reputation":29348,"user_id":1531054,"accept_rate":95,"display_name":"s.d"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1376145661,"creation_date":1376145312,"answer_id":18162910,"question_id":1800317,"body_markdown":"Had same issue. *Since no other answer puts all issues together, I&#39;m adding mine:*\r\n\r\nIt is now clearly written in [docs][1]: If you use a queue that does not blocks (`LinkedBlockingQueue`) max threads setting has no effect, only core threads are used.\r\n\r\nso:\r\n\r\n    public class MyExecutor extends ThreadPoolExecutor {\r\n    \r\n        public MyExecutor() {\r\n            super(4, 4, 5,TimeUnit.SECONDS, new LinkedBlockingQueue&lt;Runnable&gt;());\r\n            allowCoreThreadTimeOut(true);\r\n        }\r\n      \r\n        public void setThreads(int n){\r\n            setMaximumPoolSize(Math.max(1, n));\r\n            setCorePoolSize(Math.max(1, n));\r\n        }\r\n    \r\n    }\r\n\r\nThis executor has:\r\n\r\n 1. No concept of max threads as we are using an unbounded queue. This is a good thing because such queue may cause executor to create massive number of non-core, extra threads if it follows its usual policy.\r\n\r\n 2. A queue of max size `Integer.MAX_VALUE`. `Submit()` will throw `RejectedExecutionException` if number of pending tasks exceeds `Integer.MAX_VALUE`. Not sure we will run out of memory first or this will happen.\r\n\r\n 3. Has 4 core threads possible. Idle core threads automatically exit if idle for 5 seconds.So, yes, strictly on demand threads.Number can be varied using `setThreads()` method.\r\n\r\n 4. Makes sure min number of core threads is never less than one, or else `submit()` will reject every task. Since core threads need to be &gt;= max threads the method `setThreads()` sets max threads as well, though max thread setting is useless for an unbounded queue.  \r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ThreadPoolExecutor.html","title":"Impossible to make a cached thread pool with a size limit?","body":"<p>Had same issue. <em>Since no other answer puts all issues together, I'm adding mine:</em></p>\n\n<p>It is now clearly written in <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ThreadPoolExecutor.html\">docs</a>: If you use a queue that does not blocks (<code>LinkedBlockingQueue</code>) max threads setting has no effect, only core threads are used.</p>\n\n<p>so:</p>\n\n<pre><code>public class MyExecutor extends ThreadPoolExecutor {\n\n    public MyExecutor() {\n        super(4, 4, 5,TimeUnit.SECONDS, new LinkedBlockingQueue&lt;Runnable&gt;());\n        allowCoreThreadTimeOut(true);\n    }\n\n    public void setThreads(int n){\n        setMaximumPoolSize(Math.max(1, n));\n        setCorePoolSize(Math.max(1, n));\n    }\n\n}\n</code></pre>\n\n<p>This executor has:</p>\n\n<ol>\n<li><p>No concept of max threads as we are using an unbounded queue. This is a good thing because such queue may cause executor to create massive number of non-core, extra threads if it follows its usual policy.</p></li>\n<li><p>A queue of max size <code>Integer.MAX_VALUE</code>. <code>Submit()</code> will throw <code>RejectedExecutionException</code> if number of pending tasks exceeds <code>Integer.MAX_VALUE</code>. Not sure we will run out of memory first or this will happen.</p></li>\n<li><p>Has 4 core threads possible. Idle core threads automatically exit if idle for 5 seconds.So, yes, strictly on demand threads.Number can be varied using <code>setThreads()</code> method.</p></li>\n<li><p>Makes sure min number of core threads is never less than one, or else <code>submit()</code> will reject every task. Since core threads need to be >= max threads the method <code>setThreads()</code> sets max threads as well, though max thread setting is useless for an unbounded queue.  </p></li>\n</ol>\n"},{"tags":[],"owner":{"account_id":6453072,"reputation":37996,"user_id":4999394,"accept_rate":98,"display_name":"Ravindra babu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1456887599,"creation_date":1456887599,"answer_id":35737672,"question_id":1800317,"body_markdown":"1. You can use `ThreadPoolExecutor` as suggested by **@sjlee**\r\n   \r\n   You can control the size of the pool dynamically. Have a look at this question for more details : \r\n\r\n  https://stackoverflow.com/questions/32527078/dynamic-thread-pool/32527532#32527532\r\n\r\n OR\r\n\r\n2. You can use [newWorkStealingPool][1] API, which has been introduced with java 8.\r\n\r\n        public static ExecutorService newWorkStealingPool()\r\n\r\n &gt; Creates a work-stealing thread pool using all available processors as its target parallelism level.\r\n\r\nBy default, the parallelism level is set to number of CPU cores in your server. If you have 4 core CPU server, thread pool size would be 4. This API returns `ForkJoinPool` type of `ExecutorService`  and allow work stealing of idle threads by stealing tasks from busy threads in ForkJoinPool. \r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/Executors.html#newWorkStealingPool--","title":"Impossible to make a cached thread pool with a size limit?","body":"<ol>\n<li><p>You can use <code>ThreadPoolExecutor</code> as suggested by <strong>@sjlee</strong></p>\n\n<p>You can control the size of the pool dynamically. Have a look at this question for more details : </p>\n\n<p><a href=\"https://stackoverflow.com/questions/32527078/dynamic-thread-pool/32527532#32527532\">Dynamic Thread Pool</a></p>\n\n<p>OR</p></li>\n<li><p>You can use <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/Executors.html#newWorkStealingPool--\" rel=\"nofollow noreferrer\">newWorkStealingPool</a> API, which has been introduced with java 8.</p>\n\n<pre><code>public static ExecutorService newWorkStealingPool()\n</code></pre>\n\n<blockquote>\n  <p>Creates a work-stealing thread pool using all available processors as its target parallelism level.</p>\n</blockquote></li>\n</ol>\n\n<p>By default, the parallelism level is set to number of CPU cores in your server. If you have 4 core CPU server, thread pool size would be 4. This API returns <code>ForkJoinPool</code> type of <code>ExecutorService</code>  and allow work stealing of idle threads by stealing tasks from busy threads in ForkJoinPool. </p>\n"},{"tags":[],"owner":{"account_id":1281146,"reputation":1594,"user_id":1235217,"display_name":"Stefan Feuerhahn"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1565247653,"creation_date":1565081165,"answer_id":57372189,"question_id":1800317,"body_markdown":"The problem was summarized as follows:\r\n&gt;  I want something exactly like the cached thread pool (it creates threads on demand and then kills them after some timeout) but with a limit on the number of threads that it can create and the ability to continue to queue additional tasks once it has hit its thread limit.\r\n\r\nBefore pointing to the solution I will explain why the following solutions don&#39;t work:\r\n\r\n    new ThreadPoolExecutor(0, 3, 60L, TimeUnit.SECONDS, new SynchronousQueue&lt;&gt;());\r\n\r\nThis will not queue any tasks when the limit of 3 is reached because SynchronousQueue, by definition, cannot hold any elements.\r\n\r\n    new ThreadPoolExecutor(0, 3, 60L, TimeUnit.SECONDS, new LinkedBlockingQueue&lt;&gt;());\r\n\r\nThis will not create more than a single thread because ThreadPoolExecutor only creates threads exceeding the corePoolSize if the queue is full. But LinkedBlockingQueue is never full.\r\n\r\n    ThreadPoolExecutor executor = new ThreadPoolExecutor(3, 3, 60, TimeUnit.SECONDS,\r\n        new LinkedBlockingQueue&lt;Runnable&gt;());\r\n    executor.allowCoreThreadTimeOut(true);\r\n\r\nThis will not reuse threads until the corePoolSize has been reached because ThreadPoolExecutor increases the number of threads until the corePoolSize is reached even if existing threads are idle. If you can live with this disadvantage then this is the easiest solution to the problem. It is also the solution described in &quot;Java Concurrency in Practice&quot; (footnote on p172).\r\n\r\nThe only complete solution to the described problem seems to be the one involving overriding the queue&#39;s `offer` method and writing a `RejectedExecutionHandler` as explained in the answers to this question: https://stackoverflow.com/q/19528304/1235217\r\n","title":"Impossible to make a cached thread pool with a size limit?","body":"<p>The problem was summarized as follows:</p>\n\n<blockquote>\n  <p>I want something exactly like the cached thread pool (it creates threads on demand and then kills them after some timeout) but with a limit on the number of threads that it can create and the ability to continue to queue additional tasks once it has hit its thread limit.</p>\n</blockquote>\n\n<p>Before pointing to the solution I will explain why the following solutions don't work:</p>\n\n<pre><code>new ThreadPoolExecutor(0, 3, 60L, TimeUnit.SECONDS, new SynchronousQueue&lt;&gt;());\n</code></pre>\n\n<p>This will not queue any tasks when the limit of 3 is reached because SynchronousQueue, by definition, cannot hold any elements.</p>\n\n<pre><code>new ThreadPoolExecutor(0, 3, 60L, TimeUnit.SECONDS, new LinkedBlockingQueue&lt;&gt;());\n</code></pre>\n\n<p>This will not create more than a single thread because ThreadPoolExecutor only creates threads exceeding the corePoolSize if the queue is full. But LinkedBlockingQueue is never full.</p>\n\n<pre><code>ThreadPoolExecutor executor = new ThreadPoolExecutor(3, 3, 60, TimeUnit.SECONDS,\n    new LinkedBlockingQueue&lt;Runnable&gt;());\nexecutor.allowCoreThreadTimeOut(true);\n</code></pre>\n\n<p>This will not reuse threads until the corePoolSize has been reached because ThreadPoolExecutor increases the number of threads until the corePoolSize is reached even if existing threads are idle. If you can live with this disadvantage then this is the easiest solution to the problem. It is also the solution described in \"Java Concurrency in Practice\" (footnote on p172).</p>\n\n<p>The only complete solution to the described problem seems to be the one involving overriding the queue's <code>offer</code> method and writing a <code>RejectedExecutionHandler</code> as explained in the answers to this question: <a href=\"https://stackoverflow.com/q/19528304/1235217\">How to get the ThreadPoolExecutor to increase threads to max before queueing?</a></p>\n"},{"tags":[],"owner":{"account_id":15833837,"reputation":21,"user_id":11424295,"display_name":"Ondřej"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1572088789,"creation_date":1571836722,"answer_id":58523814,"question_id":1800317,"body_markdown":"This works for Java8+ (and other, for now..)\r\n\r\n         Executor executor = new ThreadPoolExecutor(3, 3, 5, TimeUnit.SECONDS,\r\n                    new LinkedBlockingQueue&lt;&gt;()){{allowCoreThreadTimeOut(true);}};\r\nwhere 3 is the limit of threads count, and 5 is timeout for idle threads.\r\n\r\nIf you want to **check if it works yourself**, here is the code to do the job:\r\n\r\n    public static void main(String[] args) throws InterruptedException {\r\n        final int DESIRED_NUMBER_OF_THREADS=3; // limit of number of Threads for the task at a time\r\n        final int DESIRED_THREAD_IDLE_DEATH_TIMEOUT=5; //any idle Thread ends if it remains idle for X seconds\r\n        \r\n        System.out.println( java.lang.Thread.activeCount() + &quot; threads&quot;);\r\n        Executor executor = new ThreadPoolExecutor(DESIRED_NUMBER_OF_THREADS, DESIRED_NUMBER_OF_THREADS, DESIRED_THREAD_IDLE_DEATH_TIMEOUT, TimeUnit.SECONDS,\r\n                new LinkedBlockingQueue&lt;&gt;()) {{allowCoreThreadTimeOut(true);}};\r\n\r\n        System.out.println(java.lang.Thread.activeCount() + &quot; threads&quot;);\r\n\r\n        for (int i = 0; i &lt; 5; i++) {\r\n            final int fi = i;\r\n            executor.execute(() -&gt; waitsout(&quot;starting hard thread computation &quot; + fi, &quot;hard thread computation done &quot; + fi,2000));\r\n        }\r\n        System.out.println(&quot;If this is UP, it works&quot;);\r\n\r\n        while (true) {\r\n            System.out.println(\r\n                    java.lang.Thread.activeCount() + &quot; threads&quot;);\r\n            Thread.sleep(700);\r\n        }\r\n\r\n    }\r\n\r\n    static void waitsout(String pre, String post, int timeout) {\r\n        try {\r\n            System.out.println(pre);\r\n            Thread.sleep(timeout);\r\n            System.out.println(post);\r\n        } catch (Exception e) {\r\n        }\r\n    }\r\n\r\noutput of the code above for me is \r\n\r\n    1 threads\r\n    1 threads\r\n    If this is UP, it works\r\n    starting hard thread computation 0\r\n    4 threads\r\n    starting hard thread computation 2\r\n    starting hard thread computation 1\r\n    4 threads\r\n    4 threads\r\n    hard thread computation done 2\r\n    hard thread computation done 0\r\n    hard thread computation done 1\r\n    starting hard thread computation 3\r\n    starting hard thread computation 4\r\n    4 threads\r\n    4 threads\r\n    4 threads\r\n    hard thread computation done 3\r\n    hard thread computation done 4\r\n    4 threads\r\n    4 threads\r\n    4 threads\r\n    4 threads\r\n    3 threads\r\n    3 threads\r\n    3 threads\r\n    1 threads\r\n    1 threads","title":"Impossible to make a cached thread pool with a size limit?","body":"<p>This works for Java8+ (and other, for now..)</p>\n\n<pre><code>     Executor executor = new ThreadPoolExecutor(3, 3, 5, TimeUnit.SECONDS,\n                new LinkedBlockingQueue&lt;&gt;()){{allowCoreThreadTimeOut(true);}};\n</code></pre>\n\n<p>where 3 is the limit of threads count, and 5 is timeout for idle threads.</p>\n\n<p>If you want to <strong>check if it works yourself</strong>, here is the code to do the job:</p>\n\n<pre><code>public static void main(String[] args) throws InterruptedException {\n    final int DESIRED_NUMBER_OF_THREADS=3; // limit of number of Threads for the task at a time\n    final int DESIRED_THREAD_IDLE_DEATH_TIMEOUT=5; //any idle Thread ends if it remains idle for X seconds\n\n    System.out.println( java.lang.Thread.activeCount() + \" threads\");\n    Executor executor = new ThreadPoolExecutor(DESIRED_NUMBER_OF_THREADS, DESIRED_NUMBER_OF_THREADS, DESIRED_THREAD_IDLE_DEATH_TIMEOUT, TimeUnit.SECONDS,\n            new LinkedBlockingQueue&lt;&gt;()) {{allowCoreThreadTimeOut(true);}};\n\n    System.out.println(java.lang.Thread.activeCount() + \" threads\");\n\n    for (int i = 0; i &lt; 5; i++) {\n        final int fi = i;\n        executor.execute(() -&gt; waitsout(\"starting hard thread computation \" + fi, \"hard thread computation done \" + fi,2000));\n    }\n    System.out.println(\"If this is UP, it works\");\n\n    while (true) {\n        System.out.println(\n                java.lang.Thread.activeCount() + \" threads\");\n        Thread.sleep(700);\n    }\n\n}\n\nstatic void waitsout(String pre, String post, int timeout) {\n    try {\n        System.out.println(pre);\n        Thread.sleep(timeout);\n        System.out.println(post);\n    } catch (Exception e) {\n    }\n}\n</code></pre>\n\n<p>output of the code above for me is </p>\n\n<pre><code>1 threads\n1 threads\nIf this is UP, it works\nstarting hard thread computation 0\n4 threads\nstarting hard thread computation 2\nstarting hard thread computation 1\n4 threads\n4 threads\nhard thread computation done 2\nhard thread computation done 0\nhard thread computation done 1\nstarting hard thread computation 3\nstarting hard thread computation 4\n4 threads\n4 threads\n4 threads\nhard thread computation done 3\nhard thread computation done 4\n4 threads\n4 threads\n4 threads\n4 threads\n3 threads\n3 threads\n3 threads\n1 threads\n1 threads\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13351537,"reputation":1050,"user_id":9636618,"display_name":"Sepehr"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1612280176,"creation_date":1612280176,"answer_id":66012819,"question_id":1800317,"body_markdown":"I Recommend using [Signal][1] approach\r\n\r\n\r\n  [1]: https://github.com/signalapp/Signal-Android\r\n\r\nfrom **SignalExecutors** class:\r\n\r\n&gt; ThreadPoolExecutor will only create a new thread if the provided queue returns false from offer(). That means if you give it an unbounded queue, it&#39;ll only ever create 1 thread, no matter how long the queue gets. But if you bound the queue and submit more runnables than there are threads, your task is rejected and throws an exception. So we make a queue that will always return false if it&#39;s non-empty to ensure new threads get created. Then, if a task gets rejected, we simply add it to the queue.\r\n\r\n\r\n\r\n        public static ExecutorService newCachedBoundedExecutor(final String name, int minThreads, int maxThreads) {\r\n        ThreadPoolExecutor threadPool = new ThreadPoolExecutor(minThreads,\r\n                maxThreads,\r\n                30,\r\n                TimeUnit.SECONDS,\r\n                new LinkedBlockingQueue&lt;Runnable&gt;() {\r\n                    @Override\r\n                    public boolean offer(Runnable runnable) {\r\n                        if (size() &gt; 1 &amp;&amp; size() &lt;= maxThreads) {\r\n                            //create new thread\r\n                            return false;\r\n                        } else {\r\n                            return super.offer(runnable);\r\n                        }\r\n                    }\r\n                }, new NumberedThreadFactory(name));\r\n\r\n        threadPool.setRejectedExecutionHandler((runnable, executor) -&gt; {\r\n            try {\r\n                executor.getQueue().put(runnable);\r\n            } catch (InterruptedException e) {\r\n                Thread.currentThread().interrupt();\r\n            }\r\n        });\r\n\r\n        return threadPool;\r\n    }\r\n\r\n   \r\n\r\n","title":"Impossible to make a cached thread pool with a size limit?","body":"<p>I Recommend using <a href=\"https://github.com/signalapp/Signal-Android\" rel=\"nofollow noreferrer\">Signal</a> approach</p>\n<p>from <strong>SignalExecutors</strong> class:</p>\n<blockquote>\n<p>ThreadPoolExecutor will only create a new thread if the provided queue returns false from offer(). That means if you give it an unbounded queue, it'll only ever create 1 thread, no matter how long the queue gets. But if you bound the queue and submit more runnables than there are threads, your task is rejected and throws an exception. So we make a queue that will always return false if it's non-empty to ensure new threads get created. Then, if a task gets rejected, we simply add it to the queue.</p>\n</blockquote>\n<pre><code>    public static ExecutorService newCachedBoundedExecutor(final String name, int minThreads, int maxThreads) {\n    ThreadPoolExecutor threadPool = new ThreadPoolExecutor(minThreads,\n            maxThreads,\n            30,\n            TimeUnit.SECONDS,\n            new LinkedBlockingQueue&lt;Runnable&gt;() {\n                @Override\n                public boolean offer(Runnable runnable) {\n                    if (size() &gt; 1 &amp;&amp; size() &lt;= maxThreads) {\n                        //create new thread\n                        return false;\n                    } else {\n                        return super.offer(runnable);\n                    }\n                }\n            }, new NumberedThreadFactory(name));\n\n    threadPool.setRejectedExecutionHandler((runnable, executor) -&gt; {\n        try {\n            executor.getQueue().put(runnable);\n        } catch (InterruptedException e) {\n            Thread.currentThread().interrupt();\n        }\n    });\n\n    return threadPool;\n}\n</code></pre>\n"}],"owner":{"account_id":75652,"reputation":12214,"user_id":216941,"accept_rate":86,"display_name":"Matt Wonlaw"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":64061,"favorite_count":0,"down_vote_count":0,"up_vote_count":144,"accepted_answer_id":1800583,"answer_count":14,"score":144,"last_activity_date":1642211080,"creation_date":1259187486,"question_id":1800317,"body_markdown":"It seems to be impossible to make a cached thread pool with a limit to the number of threads that it can create.\r\n\r\nHere is how static `Executors.newCachedThreadPool` is implemented in the standard Java library:\r\n\r\n     public static ExecutorService newCachedThreadPool() {\r\n        return new ThreadPoolExecutor(0, Integer.MAX_VALUE,\r\n                                      60L, TimeUnit.SECONDS,\r\n                                      new SynchronousQueue&lt;Runnable&gt;());\r\n    }\r\n\r\nSo, using that template to go on to create a fixed sized cached thread pool:\r\n\r\n    new ThreadPoolExecutor(0, 3, 60L, TimeUnit.SECONDS, new SynchronusQueue&lt;Runable&gt;());\r\n\r\nNow if you use this and submit 3 tasks, everything will be fine.  Submitting any further tasks will result in rejected execution exceptions.\r\n\r\nTrying this:\r\n\r\n    new ThreadPoolExecutor(0, 3, 60L, TimeUnit.SECONDS, new LinkedBlockingQueue&lt;Runable&gt;());\r\n\r\nWill result in all threads executing sequentially.  I.e., the thread pool will never make more than one thread to handle your tasks.\r\n\r\nThis is a bug in the execute method of `ThreadPoolExecutor`?  Or maybe this is intentional?  Or there is some other way?\r\n\r\nEdit: I want something exactly like the cached thread pool (it creates threads on demand and then kills them after some timeout) but with a limit on the number of threads that it can create and the ability to continue to queue additional tasks once it has hit its thread limit.  According to sjlee&#39;s response this is impossible.  Looking at the `execute()` method of `ThreadPoolExecutor` it is indeed impossible.  I would need to subclass `ThreadPoolExecutor` and override `execute()` somewhat like `SwingWorker` does, but what `SwingWorker` does in its `execute()` is a complete hack.","title":"Impossible to make a cached thread pool with a size limit?","body":"<p>It seems to be impossible to make a cached thread pool with a limit to the number of threads that it can create.</p>\n<p>Here is how static <code>Executors.newCachedThreadPool</code> is implemented in the standard Java library:</p>\n<pre><code> public static ExecutorService newCachedThreadPool() {\n    return new ThreadPoolExecutor(0, Integer.MAX_VALUE,\n                                  60L, TimeUnit.SECONDS,\n                                  new SynchronousQueue&lt;Runnable&gt;());\n}\n</code></pre>\n<p>So, using that template to go on to create a fixed sized cached thread pool:</p>\n<pre><code>new ThreadPoolExecutor(0, 3, 60L, TimeUnit.SECONDS, new SynchronusQueue&lt;Runable&gt;());\n</code></pre>\n<p>Now if you use this and submit 3 tasks, everything will be fine.  Submitting any further tasks will result in rejected execution exceptions.</p>\n<p>Trying this:</p>\n<pre><code>new ThreadPoolExecutor(0, 3, 60L, TimeUnit.SECONDS, new LinkedBlockingQueue&lt;Runable&gt;());\n</code></pre>\n<p>Will result in all threads executing sequentially.  I.e., the thread pool will never make more than one thread to handle your tasks.</p>\n<p>This is a bug in the execute method of <code>ThreadPoolExecutor</code>?  Or maybe this is intentional?  Or there is some other way?</p>\n<p>Edit: I want something exactly like the cached thread pool (it creates threads on demand and then kills them after some timeout) but with a limit on the number of threads that it can create and the ability to continue to queue additional tasks once it has hit its thread limit.  According to sjlee's response this is impossible.  Looking at the <code>execute()</code> method of <code>ThreadPoolExecutor</code> it is indeed impossible.  I would need to subclass <code>ThreadPoolExecutor</code> and override <code>execute()</code> somewhat like <code>SwingWorker</code> does, but what <code>SwingWorker</code> does in its <code>execute()</code> is a complete hack.</p>\n"},{"tags":["java","logging","log4j","log4j2","logback"],"owner":{"account_id":14117739,"reputation":101,"user_id":10199101,"display_name":"Di_"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":205,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1642211062,"creation_date":1640877645,"question_id":70533521,"body_markdown":"I&#39;m trying to convert an xml configuration file from log4j to logback, this is my log4j code that have\r\n\r\n    &lt;Property name=&quot;LOG_EXCEPTION_CONVERSION_WORD&quot;&gt;%xwEx&lt;/Property&gt;\r\n    &lt;Property name=&quot;LOG_DATEFORMAT_PATTERN&quot;&gt;yyyy-MM-dd HH:mm:ss.SSS&lt;/Property&gt;\r\n    &lt;Property name=&quot;LOG_LEVEL_PATTERN&quot;&gt;%highlight{%5level}{FATAL=white, ERROR=red, WARN=blue, INFO=black, DEBUG=green, TRACE=blue}&lt;/Property&gt;\r\n    &lt;Property name=&quot;CONSOLE_LOG_PATTERN&quot;&gt;%clr{%d{${LOG_DATEFORMAT_PATTERN}} ${LOG_LEVEL_PATTERN} ${sys:PID} --- [%t] %-40.40c{1.} : %m%n${sys:LOG_EXCEPTION_CONVERSION_WORD}}&lt;/Property&gt;\r\n\r\nI dont understand the property `LOG_EXCEPTION_CONVERSION_WORD`, what is `%xwEx` and what does it change on the pattern at the end, when I converted to logback, I didn&#39;t use it but I feel like I&#39;m missing something.\r\n\r\n**Edit:** saw what it means somewhere but dont know how to have the same thing with logback\r\n\r\nxwEx – the throwable conversion word. The ExtendedWhitespaceThrowablePatternConverter adds additional whitespace around the stack trace","title":"logback pattern conversion from log4j to logback","body":"<p>I'm trying to convert an xml configuration file from log4j to logback, this is my log4j code that have</p>\n<pre><code>&lt;Property name=&quot;LOG_EXCEPTION_CONVERSION_WORD&quot;&gt;%xwEx&lt;/Property&gt;\n&lt;Property name=&quot;LOG_DATEFORMAT_PATTERN&quot;&gt;yyyy-MM-dd HH:mm:ss.SSS&lt;/Property&gt;\n&lt;Property name=&quot;LOG_LEVEL_PATTERN&quot;&gt;%highlight{%5level}{FATAL=white, ERROR=red, WARN=blue, INFO=black, DEBUG=green, TRACE=blue}&lt;/Property&gt;\n&lt;Property name=&quot;CONSOLE_LOG_PATTERN&quot;&gt;%clr{%d{${LOG_DATEFORMAT_PATTERN}} ${LOG_LEVEL_PATTERN} ${sys:PID} --- [%t] %-40.40c{1.} : %m%n${sys:LOG_EXCEPTION_CONVERSION_WORD}}&lt;/Property&gt;\n</code></pre>\n<p>I dont understand the property <code>LOG_EXCEPTION_CONVERSION_WORD</code>, what is <code>%xwEx</code> and what does it change on the pattern at the end, when I converted to logback, I didn't use it but I feel like I'm missing something.</p>\n<p><strong>Edit:</strong> saw what it means somewhere but dont know how to have the same thing with logback</p>\n<p>xwEx – the throwable conversion word. The ExtendedWhitespaceThrowablePatternConverter adds additional whitespace around the stack trace</p>\n"},{"tags":["java","swing","jbutton","actionlistener","classcastexception"],"answers":[{"tags":[],"owner":{"account_id":247613,"reputation":284090,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1641646794,"creation_date":1641646274,"answer_id":70632467,"question_id":70632435,"body_markdown":"Here is likely your problem:\r\n\r\n```\r\nJFrame mainMenu = (JFrame) e.getSource();\r\nJFrame dimensions = (JFrame) e.getSource();\r\n```\r\n\r\nThe `ActionEvent#getSource()` method returns the *source* that triggers the action, here a JButton, and you are trying to cast the ***same*** JButton object returned from this method as two different JFrames, which really doesn&#39;t make much sense, both because, again, the method doesn&#39;t return a JFrame and secondly, casting doesn&#39;t convert an object into two different objects. If you need a reference to the JFrame, pass it to where it is needed, such as by giving your ActionListener class a constructor that takes a JFrame parameter:\r\n\r\n```\r\nActionDimensions actionDimensions = new ActionDimensions(this);\r\n```\r\n\r\nand\r\n\r\n```\r\npublic class ActionDimensions implements ActionListener {\r\n\tprivate  MainMenu mainMenu;\r\n\t\r\n\tpublic ActionDimensions(MainMenu mainMenu) {\r\n\t\tthis.mainMenu = mainMenu;\r\n\t}\r\n\r\n\t@Override\r\n\tpublic void actionPerformed(ActionEvent e) {\r\n\t\t// JFrame mainMenu = (JFrame) e.getSource();\r\n\t\t// JFrame dimensions = (JFrame) e.getSource();\r\n\t\tmainMenu.setVisible(false);\r\n\t\t\r\n\t\t// create a new Dimensions JFrame here?\r\n\t\tDimensions dimensions = new Dimensions();\r\n\t\t// .... other code\r\n\t\t\r\n\t\tdimensions.setVisible(true);\r\n\t}\r\n}\r\n```\r\n\r\n Alternatively, you can get the JFrame that the button sits on by calling `SwingUtilities.getWindowAncestor(yourJButton)`.\r\n\r\nHaving said this, understand that no user is going to enjoy having multiple windows thrust at them, which is what swapping JFrames does, and there are much better ways of cleanly swapping views, such as with a [CardLayout tutorial](http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html).  Please read [The Use of Multiple JFrames, Good/Bad Practice?](http://stackoverflow.com/questions/9554636).","title":"Error when using ActionListener button click to hide a JFrame and reveal another","body":"<p>Here is likely your problem:</p>\n<pre><code>JFrame mainMenu = (JFrame) e.getSource();\nJFrame dimensions = (JFrame) e.getSource();\n</code></pre>\n<p>The <code>ActionEvent#getSource()</code> method returns the <em>source</em> that triggers the action, here a JButton, and you are trying to cast the <em><strong>same</strong></em> JButton object returned from this method as two different JFrames, which really doesn't make much sense, both because, again, the method doesn't return a JFrame and secondly, casting doesn't convert an object into two different objects. If you need a reference to the JFrame, pass it to where it is needed, such as by giving your ActionListener class a constructor that takes a JFrame parameter:</p>\n<pre><code>ActionDimensions actionDimensions = new ActionDimensions(this);\n</code></pre>\n<p>and</p>\n<pre><code>public class ActionDimensions implements ActionListener {\n    private  MainMenu mainMenu;\n    \n    public ActionDimensions(MainMenu mainMenu) {\n        this.mainMenu = mainMenu;\n    }\n\n    @Override\n    public void actionPerformed(ActionEvent e) {\n        // JFrame mainMenu = (JFrame) e.getSource();\n        // JFrame dimensions = (JFrame) e.getSource();\n        mainMenu.setVisible(false);\n        \n        // create a new Dimensions JFrame here?\n        Dimensions dimensions = new Dimensions();\n        // .... other code\n        \n        dimensions.setVisible(true);\n    }\n}\n</code></pre>\n<p>Alternatively, you can get the JFrame that the button sits on by calling <code>SwingUtilities.getWindowAncestor(yourJButton)</code>.</p>\n<p>Having said this, understand that no user is going to enjoy having multiple windows thrust at them, which is what swapping JFrames does, and there are much better ways of cleanly swapping views, such as with a <a href=\"http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html\" rel=\"nofollow noreferrer\">CardLayout tutorial</a>.  Please read <a href=\"http://stackoverflow.com/questions/9554636\">The Use of Multiple JFrames, Good/Bad Practice?</a>.</p>\n"}],"owner":{"account_id":13417687,"reputation":45,"user_id":15411439,"display_name":"Teo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":827,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":70632467,"answer_count":1,"score":1,"last_activity_date":1642210403,"creation_date":1641646045,"question_id":70632435,"body_markdown":"I&#39;m trying to &quot;open&quot; a different JFrame window on button click (in this case, the dimensions button), like when going through a menu. I have my 2 windows, Main function and ActionListener as separate classes.  When i click on the button that is supposed to redirect me to the other window, it simply shows an error, and doesn&#39;t hide the first window and reveal the second one. The error is: \r\n\r\n&gt;&quot;Exception in thread &quot;AWT-EventQueue-0&quot; java.lang.ClassCastException: class javax.swing.JButton cannot be cast to class javax.swing.JFrame (javax.swing.JButton and javax.swing.JFrame are in module java.desktop of loader &#39;bootstrap&#39;)\r\n\tat ActionDimensions.actionPerformed(ActionDimensions.java:8)\r\n\tat java.desktop/javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:1972)\r\n\tat java.desktop/javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2313)\r\n\tat java.desktop/javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:405)\r\n\tat java.desktop/javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:262)\r\n\tat java.desktop/javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:279)\r\n\tat java.desktop/java.awt.Component.processMouseEvent(Component.java:6626)\r\n\tat java.desktop/javax.swing.JComponent.processMouseEvent(JComponent.java:3389)\r\n\tat java.desktop/java.awt.Component.processEvent(Component.java:6391)\r\n\tat java.desktop/java.awt.Container.processEvent(Container.java:2266)\r\n\tat java.desktop/java.awt.Component.dispatchEventImpl(Component.java:5001)\r\n\tat java.desktop/java.awt.Container.dispatchEventImpl(Container.java:2324)\r\n\tat java.desktop/java.awt.Component.dispatchEvent(Component.java:4833)\r\n\tat java.desktop/java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4948)\r\n\tat java.desktop/java.awt.LightweightDispatcher.processMouseEvent(Container.java:4575)\r\n\tat java.desktop/java.awt.LightweightDispatcher.dispatchEvent(Container.java:4516)\r\n\tat java.desktop/java.awt.Container.dispatchEventImpl(Container.java:2310)\r\n\tat java.desktop/java.awt.Window.dispatchEventImpl(Window.java:2780)\r\n\tat java.desktop/java.awt.Component.dispatchEvent(Component.java:4833)\r\n\tat java.desktop/java.awt.EventQueue.dispatchEventImpl(EventQueue.java:773)\r\n\tat java.desktop/java.awt.EventQueue$4.run(EventQueue.java:722)\r\n\tat java.desktop/java.awt.EventQueue$4.run(EventQueue.java:716)\r\n\tat java.base/java.security.AccessController.doPrivileged(AccessController.java:399)\r\n\tat java.base/java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:86)\r\n\tat java.base/java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:97)\r\n\tat java.desktop/java.awt.EventQueue$5.run(EventQueue.java:746)\r\n\tat java.desktop/java.awt.EventQueue$5.run(EventQueue.java:744)\r\n\tat java.base/java.security.AccessController.doPrivileged(AccessController.java:399)\r\n\tat java.base/java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:86)\r\n\tat java.desktop/java.awt.EventQueue.dispatchEvent(EventQueue.java:743)\r\n\tat java.desktop/java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:203)\r\n\tat java.desktop/java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:124)\r\n\tat java.desktop/java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:113)\r\n\tat java.desktop/java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:109)\r\n\tat java.desktop/java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:101)\r\n\tat java.desktop/java.awt.EventDispatchThread.run(EventDispatchThread.java:90)\r\n&quot;\r\n\r\nFirst window:\r\n\r\n ```\r\npublic class MainMenu extends JFrame {\r\n    public MainMenu(){\r\n        setSize(300,600);\r\n        JPanel center = new JPanel();\r\n        center.setLayout(new GridLayout(3,1));\r\n        JButton MainMenuButtonStart = new JButton(&quot;Start&quot;);\r\n        JButton MainMenuButtonContinue = new JButton(&quot;Continue&quot;);\r\n        JButton MainMenuButtonDimensions = new JButton(&quot;Dimensions&quot;);\r\n        center.add(MainMenuButtonStart);\r\n        center.add(MainMenuButtonContinue);\r\n        center.add(MainMenuButtonDimensions);\r\n        ActionDimensions actionDimensions = new ActionDimensions();\r\n        MainMenuButtonDimensions.addActionListener(actionDimensions);\r\n        add(center, BorderLayout.CENTER);\r\n\r\n    }\r\n}\r\n ```\r\nSecond window:\r\n ```\r\nimport javax.swing.*;\r\nimport java.awt.*;\r\n\r\npublic class Dimensions extends JFrame {\r\n    public Dimensions(){\r\n        setSize(600,500);\r\n        JPanel north = new JPanel();\r\n        JLabel labelnorth = new JLabel(&quot;Enter Dimensions! Rows and Columns&quot;);\r\n        north.add(labelnorth);\r\n        JPanel center = new JPanel();\r\n        JPanel south = new JPanel();\r\n        JButton buttonsouth = new JButton(&quot;Return to Main Menu&quot;);\r\n        south.add(buttonsouth);\r\n        center.setLayout(new GridLayout(1,2));\r\n        TextField rowtextfield = new TextField();\r\n        TextField columntextfield = new TextField();\r\n        center.add(rowtextfield);\r\n        center.add(columntextfield);\r\n        add(north,BorderLayout.NORTH);\r\n        add(center,BorderLayout.CENTER);\r\n        add(south,BorderLayout.SOUTH);\r\n ```\r\nMain function:\r\n ```\r\n public class Main {\r\n    public static void main(String[] args) {\r\n        MainMenu mainMenu = new MainMenu();\r\n        Dimensions dimensions = new Dimensions();\r\n        dimensions.setVisible(false);\r\n        mainMenu.setVisible(true);\r\n        mainMenu.setDefaultCloseOperation(3);\r\n\r\n    }\r\n}\r\n ```\r\nThe action listener:\r\n ```\r\npublic class ActionDimensions implements ActionListener {\r\n    @Override\r\n    public void actionPerformed(ActionEvent e) {\r\n    JFrame mainMenu = (JFrame) e.getSource();\r\n    JFrame dimensions = (JFrame) e.getSource();\r\n    mainMenu.setVisible(false);\r\n    dimensions.setVisible(true);\r\n    }\r\n}\r\n ```\r\nI think the problem is that i&#39;m trying to use the getsource() method through a frame, but otherwise i can&#39;t access the instances (mainmenu and dimensions) if i don&#39;t specify that method. If that is the case, what other way can i connect the setVisible methods to the instances inside the ActionListener? ","title":"Error when using ActionListener button click to hide a JFrame and reveal another","body":"<p>I'm trying to &quot;open&quot; a different JFrame window on button click (in this case, the dimensions button), like when going through a menu. I have my 2 windows, Main function and ActionListener as separate classes.  When i click on the button that is supposed to redirect me to the other window, it simply shows an error, and doesn't hide the first window and reveal the second one. The error is:</p>\n<blockquote>\n<p>&quot;Exception in thread &quot;AWT-EventQueue-0&quot; java.lang.ClassCastException: class javax.swing.JButton cannot be cast to class javax.swing.JFrame (javax.swing.JButton and javax.swing.JFrame are in module java.desktop of loader 'bootstrap')\nat ActionDimensions.actionPerformed(ActionDimensions.java:8)\nat java.desktop/javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:1972)\nat java.desktop/javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2313)\nat java.desktop/javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:405)\nat java.desktop/javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:262)\nat java.desktop/javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:279)\nat java.desktop/java.awt.Component.processMouseEvent(Component.java:6626)\nat java.desktop/javax.swing.JComponent.processMouseEvent(JComponent.java:3389)\nat java.desktop/java.awt.Component.processEvent(Component.java:6391)\nat java.desktop/java.awt.Container.processEvent(Container.java:2266)\nat java.desktop/java.awt.Component.dispatchEventImpl(Component.java:5001)\nat java.desktop/java.awt.Container.dispatchEventImpl(Container.java:2324)\nat java.desktop/java.awt.Component.dispatchEvent(Component.java:4833)\nat java.desktop/java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4948)\nat java.desktop/java.awt.LightweightDispatcher.processMouseEvent(Container.java:4575)\nat java.desktop/java.awt.LightweightDispatcher.dispatchEvent(Container.java:4516)\nat java.desktop/java.awt.Container.dispatchEventImpl(Container.java:2310)\nat java.desktop/java.awt.Window.dispatchEventImpl(Window.java:2780)\nat java.desktop/java.awt.Component.dispatchEvent(Component.java:4833)\nat java.desktop/java.awt.EventQueue.dispatchEventImpl(EventQueue.java:773)\nat java.desktop/java.awt.EventQueue$4.run(EventQueue.java:722)\nat java.desktop/java.awt.EventQueue$4.run(EventQueue.java:716)\nat java.base/java.security.AccessController.doPrivileged(AccessController.java:399)\nat java.base/java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:86)\nat java.base/java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:97)\nat java.desktop/java.awt.EventQueue$5.run(EventQueue.java:746)\nat java.desktop/java.awt.EventQueue$5.run(EventQueue.java:744)\nat java.base/java.security.AccessController.doPrivileged(AccessController.java:399)\nat java.base/java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:86)\nat java.desktop/java.awt.EventQueue.dispatchEvent(EventQueue.java:743)\nat java.desktop/java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:203)\nat java.desktop/java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:124)\nat java.desktop/java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:113)\nat java.desktop/java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:109)\nat java.desktop/java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:101)\nat java.desktop/java.awt.EventDispatchThread.run(EventDispatchThread.java:90)\n&quot;</p>\n</blockquote>\n<p>First window:</p>\n<pre><code>public class MainMenu extends JFrame {\n   public MainMenu(){\n       setSize(300,600);\n       JPanel center = new JPanel();\n       center.setLayout(new GridLayout(3,1));\n       JButton MainMenuButtonStart = new JButton(&quot;Start&quot;);\n       JButton MainMenuButtonContinue = new JButton(&quot;Continue&quot;);\n       JButton MainMenuButtonDimensions = new JButton(&quot;Dimensions&quot;);\n       center.add(MainMenuButtonStart);\n       center.add(MainMenuButtonContinue);\n       center.add(MainMenuButtonDimensions);\n       ActionDimensions actionDimensions = new ActionDimensions();\n       MainMenuButtonDimensions.addActionListener(actionDimensions);\n       add(center, BorderLayout.CENTER);\n\n   }\n}\n</code></pre>\n<p>Second window:</p>\n<pre><code>import javax.swing.*;\nimport java.awt.*;\n\npublic class Dimensions extends JFrame {\n   public Dimensions(){\n       setSize(600,500);\n       JPanel north = new JPanel();\n       JLabel labelnorth = new JLabel(&quot;Enter Dimensions! Rows and Columns&quot;);\n       north.add(labelnorth);\n       JPanel center = new JPanel();\n       JPanel south = new JPanel();\n       JButton buttonsouth = new JButton(&quot;Return to Main Menu&quot;);\n       south.add(buttonsouth);\n       center.setLayout(new GridLayout(1,2));\n       TextField rowtextfield = new TextField();\n       TextField columntextfield = new TextField();\n       center.add(rowtextfield);\n       center.add(columntextfield);\n       add(north,BorderLayout.NORTH);\n       add(center,BorderLayout.CENTER);\n       add(south,BorderLayout.SOUTH);\n</code></pre>\n<p>Main function:</p>\n<pre><code>public class Main {\n   public static void main(String[] args) {\n       MainMenu mainMenu = new MainMenu();\n       Dimensions dimensions = new Dimensions();\n       dimensions.setVisible(false);\n       mainMenu.setVisible(true);\n       mainMenu.setDefaultCloseOperation(3);\n\n   }\n}\n</code></pre>\n<p>The action listener:</p>\n<pre><code>public class ActionDimensions implements ActionListener {\n   @Override\n   public void actionPerformed(ActionEvent e) {\n   JFrame mainMenu = (JFrame) e.getSource();\n   JFrame dimensions = (JFrame) e.getSource();\n   mainMenu.setVisible(false);\n   dimensions.setVisible(true);\n   }\n}\n</code></pre>\n<p>I think the problem is that i'm trying to use the getsource() method through a frame, but otherwise i can't access the instances (mainmenu and dimensions) if i don't specify that method. If that is the case, what other way can i connect the setVisible methods to the instances inside the ActionListener?</p>\n"},{"tags":["java","postgresql","hibernate","lazy-loading"],"answers":[{"tags":[],"owner":{"account_id":18098038,"reputation":1240,"user_id":13156126,"display_name":"fladdimir"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1642209967,"creation_date":1642209967,"answer_id":70718205,"question_id":70692623,"body_markdown":"The lazy fetching does not include the computed property in your `SELECT DISTINCT` clause, which then causes this error, since there is now a property in the `ORDER BY` clause, which is not selected.\r\n\r\nThis is restricted by postgres because the `DISTINCT` could remove duplicate rows from the result which may actually have different `ORDER BY` values, so that the decision on how to order the selected rows cannot be made:\r\nhttps://stackoverflow.com/questions/12693089/pgerror-select-distinct-order-by-expressions-must-appear-in-select-list","title":"Hibernate @Formula lazy-loading for JPA Sort","body":"<p>The lazy fetching does not include the computed property in your <code>SELECT DISTINCT</code> clause, which then causes this error, since there is now a property in the <code>ORDER BY</code> clause, which is not selected.</p>\n<p>This is restricted by postgres because the <code>DISTINCT</code> could remove duplicate rows from the result which may actually have different <code>ORDER BY</code> values, so that the decision on how to order the selected rows cannot be made:\n<a href=\"https://stackoverflow.com/questions/12693089/pgerror-select-distinct-order-by-expressions-must-appear-in-select-list\">PG::Error: SELECT DISTINCT, ORDER BY expressions must appear in select list</a></p>\n"}],"owner":{"account_id":23926635,"reputation":37,"user_id":17921672,"display_name":"Damir Yablonskikh"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":716,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":70718205,"answer_count":1,"score":1,"last_activity_date":1642209967,"creation_date":1642057515,"question_id":70692623,"body_markdown":"I have Entity with `@Formula` field, which contains select expression. Then I refer to this field as Hibernate meta-model&#39;s string attribute and use it in `Sort.by()` and therefore in `PageRequest.of()` methods. It works just fine until I add `@Basic(fetch = FetchType.Lazy)`, after that I get `Caused by: org.postgresql.util.PSQLException: ERROR: for SELECT DISTINCT, ORDER BY expressions must appear in select list` with `o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 0, SQLState: 42P10`.\r\n\r\nWhat exactly I&#39;m doing wrong?\r\n\r\nP. S. I&#39;ve turned on hibernate-enhance with `enableLazyInitialization = true` (otherwise lazy-loading for @Formula field won&#39;t work, as much as I know)\r\n\r\nField code looks like this:\r\n\r\n```java\r\n    @Formula(&quot;(SELECT st.fio &quot; +\r\n            &quot;FROM conjunction_table ct &quot; +\r\n            &quot;JOIN second_table st ON st.id = ct.second_table_id &quot; +\r\n            &quot;WHERE ct.first_table_id = id &quot; +\r\n            &quot;ORDER BY st.fio &quot; +\r\n            &quot;LIMIT 1)&quot;)\r\n    @Basic(fetch = FetchType.LAZY)\r\n    private String secondTableFio;\r\n```","title":"Hibernate @Formula lazy-loading for JPA Sort","body":"<p>I have Entity with <code>@Formula</code> field, which contains select expression. Then I refer to this field as Hibernate meta-model's string attribute and use it in <code>Sort.by()</code> and therefore in <code>PageRequest.of()</code> methods. It works just fine until I add <code>@Basic(fetch = FetchType.Lazy)</code>, after that I get <code>Caused by: org.postgresql.util.PSQLException: ERROR: for SELECT DISTINCT, ORDER BY expressions must appear in select list</code> with <code>o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 0, SQLState: 42P10</code>.</p>\n<p>What exactly I'm doing wrong?</p>\n<p>P. S. I've turned on hibernate-enhance with <code>enableLazyInitialization = true</code> (otherwise lazy-loading for @Formula field won't work, as much as I know)</p>\n<p>Field code looks like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @Formula(&quot;(SELECT st.fio &quot; +\n            &quot;FROM conjunction_table ct &quot; +\n            &quot;JOIN second_table st ON st.id = ct.second_table_id &quot; +\n            &quot;WHERE ct.first_table_id = id &quot; +\n            &quot;ORDER BY st.fio &quot; +\n            &quot;LIMIT 1)&quot;)\n    @Basic(fetch = FetchType.LAZY)\n    private String secondTableFio;\n</code></pre>\n"},{"tags":["java","garbage-collection"],"comments":[{"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":1,"creation_date":1642139971,"post_id":70706497,"comment_id":124996928,"body_markdown":"You can always cap the heap smaller.","body":"You can always cap the heap smaller."},{"owner":{"account_id":3739057,"reputation":3667,"user_id":3109248,"display_name":"Khanna111"},"score":0,"creation_date":1642145662,"post_id":70706497,"comment_id":124998040,"body_markdown":"the more full gc events, the lesser the application throughput. There is always a tradeoff. Reduce the heap and the GC events will increase. Whether these are full GCs or not depends on a variety of factors and there are different for different algorithms and JVM versions.","body":"the more full gc events, the lesser the application throughput. There is always a tradeoff. Reduce the heap and the GC events will increase. Whether these are full GCs or not depends on a variety of factors and there are different for different algorithms and JVM versions."},{"owner":{"account_id":1941777,"reputation":3143,"user_id":1747834,"accept_rate":58,"display_name":"Mikhail T."},"score":0,"creation_date":1642184008,"post_id":70706497,"comment_id":125012016,"body_markdown":"@LouisWasserman, we had the heap at 1Gb initially -- it would get busted _once in a while_, when the demand for memory spikes. So we increased it to 4Gb and now we see it _always_ hovering around 3Gb instead of only, when there is actual demand. This seems to be G1&#39;s standard behavior -- either we need to tweak it out of it, or change to ParallelGC, I guess... Hence, this question...","body":"@LouisWasserman, we had the heap at 1Gb initially -- it would get busted <i>once in a while</i>, when the demand for memory spikes. So we increased it to 4Gb and now we see it <i>always</i> hovering around 3Gb instead of only, when there is actual demand. This seems to be G1&#39;s standard behavior -- either we need to tweak it out of it, or change to ParallelGC, I guess... Hence, this question..."}],"answers":[{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1642208187,"creation_date":1642144027,"answer_id":70707089,"question_id":70706497,"body_markdown":"&gt; How to force a Java-process to perform GC?\r\n\r\nIt can trigger a full garbage collection by calling `System.gc()`.  Or you can do this externally; e.g. with `jconsole` or (I think) `jcmd`.\r\n\r\nCaveats:\r\n\r\n 1.  Depending on JVM&#39;s command line options a call to `System.gc()` may be ignored; i.e. it may do nothing.\r\n\r\n 2.  Calling `System.gc()` on a regular basis is a bad idea.  It is bad for performance, because a full GC is expensive (compared to a new generation  collection) and because running the GC when there isn&#39;t a lot of garbage does a lot of work for little benefit.\r\n\r\n     See https://stackoverflow.com/questions/2414105\r\n\r\n---------------\r\n\r\nThe interesting issue is why triggering a GC had that (on the face of it) beneficial effect.  There is not enough evidence to be sure, but I suspect that your JVM&#39;s heap had probably expanded to deal with a previous event where it has a very large working set.  Those object were presumably garbage collected, but the JVM was left with an oversized heap.\r\n\r\nThe JVM will downsize the heap when it detects that it is too large.  However that determination is only made following a full GC.  Presumably, since what was happening before you hit the button was that the JVM was only doing new space collections ... because the fast majority of new objects were &quot;dying young&quot;.  That meant that the heap stayed large.\r\n\r\nIf the above hypothesis is correct, there is a related issue.  What if the heap actually needs to be that large in the long term?  What if you get *another* event where the GC needs a very large working set?  Answer, it will need to grow the heap again.  And that will entail at least one full GC and possibly more ... to get it to the required size.\r\n\r\nWhat to do?\r\n\r\n- Some Java GCs allow you to tune the heap resizing parameters.\r\n- Some Java GCs allow you to run the GC periodically ... and make the periodic GC a full GC.\r\n- Some Java GCs are designed to be less inclined to &quot;hog&quot; memory.\r\n\r\nI would recommend using those rather than calling `System.gc()` ... and hoping.\r\n\r\nOr maybe the best thing to do would be to leave it alone.  \r\n\r\nQuestion: Imagine if you squeeze the JVM&#39;s heap usage and then use the RAM you reclaimed for other things. Then another batch comes on requiring a (temporarily) large heap again.  What happens?  \r\n\r\nAnswer: bad things!  Your Java heap expands to accommodate the larger working set, the system runs short of RAM and starts stealing pages from other processes, the system thrashing, and the OOM killer starts killing process.\r\n\r\n------------------------------\r\n\r\nProbably the most up to date resource on GC tuning is:\r\n\r\n  - [HotSpot Virtual Machine Garbage Collection Tuning Guide for Java 17.][1]\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/17/gctuning/","title":"How to force a Java-process to perform GC?","body":"<blockquote>\n<p>How to force a Java-process to perform GC?</p>\n</blockquote>\n<p>It can trigger a full garbage collection by calling <code>System.gc()</code>.  Or you can do this externally; e.g. with <code>jconsole</code> or (I think) <code>jcmd</code>.</p>\n<p>Caveats:</p>\n<ol>\n<li><p>Depending on JVM's command line options a call to <code>System.gc()</code> may be ignored; i.e. it may do nothing.</p>\n</li>\n<li><p>Calling <code>System.gc()</code> on a regular basis is a bad idea.  It is bad for performance, because a full GC is expensive (compared to a new generation  collection) and because running the GC when there isn't a lot of garbage does a lot of work for little benefit.</p>\n<p>See <a href=\"https://stackoverflow.com/questions/2414105\">Why is it bad practice to call System.gc()?</a></p>\n</li>\n</ol>\n<hr />\n<p>The interesting issue is why triggering a GC had that (on the face of it) beneficial effect.  There is not enough evidence to be sure, but I suspect that your JVM's heap had probably expanded to deal with a previous event where it has a very large working set.  Those object were presumably garbage collected, but the JVM was left with an oversized heap.</p>\n<p>The JVM will downsize the heap when it detects that it is too large.  However that determination is only made following a full GC.  Presumably, since what was happening before you hit the button was that the JVM was only doing new space collections ... because the fast majority of new objects were &quot;dying young&quot;.  That meant that the heap stayed large.</p>\n<p>If the above hypothesis is correct, there is a related issue.  What if the heap actually needs to be that large in the long term?  What if you get <em>another</em> event where the GC needs a very large working set?  Answer, it will need to grow the heap again.  And that will entail at least one full GC and possibly more ... to get it to the required size.</p>\n<p>What to do?</p>\n<ul>\n<li>Some Java GCs allow you to tune the heap resizing parameters.</li>\n<li>Some Java GCs allow you to run the GC periodically ... and make the periodic GC a full GC.</li>\n<li>Some Java GCs are designed to be less inclined to &quot;hog&quot; memory.</li>\n</ul>\n<p>I would recommend using those rather than calling <code>System.gc()</code> ... and hoping.</p>\n<p>Or maybe the best thing to do would be to leave it alone.</p>\n<p>Question: Imagine if you squeeze the JVM's heap usage and then use the RAM you reclaimed for other things. Then another batch comes on requiring a (temporarily) large heap again.  What happens?</p>\n<p>Answer: bad things!  Your Java heap expands to accommodate the larger working set, the system runs short of RAM and starts stealing pages from other processes, the system thrashing, and the OOM killer starts killing process.</p>\n<hr />\n<p>Probably the most up to date resource on GC tuning is:</p>\n<ul>\n<li><a href=\"https://docs.oracle.com/en/java/javase/17/gctuning/\" rel=\"nofollow noreferrer\">HotSpot Virtual Machine Garbage Collection Tuning Guide for Java 17.</a></li>\n</ul>\n"}],"owner":{"account_id":1941777,"reputation":3143,"user_id":1747834,"accept_rate":58,"display_name":"Mikhail T."},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1235,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1642208187,"creation_date":1642139393,"question_id":70706497,"body_markdown":"While watching a Java-process with `jconsole`, I saw its heap-usage fluctuate between under 1Gb and above 3Gb. The same figures were output by the process itself -- we have GC-logging enabled.\r\n\r\nOn a whim I pressed the &quot;Perform GC&quot; button in `jconsole`, and the effect was quite dramatic -- the heap-usage fell under 1Gb _and stayed there_. It was still fluctuating, as might be expected, but never to the heights seen before.\r\n\r\n[![the red arrow points at when I forced garbage-collection][1]][1]\r\n\r\n  [1]: https://i.stack.imgur.com/ds5ej.png\r\n\r\nThis is Java-11 on Linux. Are there, perhaps, some JVM options to achieve more aggressive garbage-collection without a manual intervention? We have the CPU -- this app is mostly I/O bound anyway -- but we could use the 2Gb better than to store _garbage_...\r\n\r\nUpdate, no, this is not a duplicate of [the earlier question](/questions/30458195/):\r\n* I&#39;m not asking _why_ here, I&#39;m asking for practical tips on _what to do_.\r\n* The JVM is much newer -- 7 years, and G1 is now the default GC, unlike back then.","title":"How to force a Java-process to perform GC?","body":"<p>While watching a Java-process with <code>jconsole</code>, I saw its heap-usage fluctuate between under 1Gb and above 3Gb. The same figures were output by the process itself -- we have GC-logging enabled.</p>\n<p>On a whim I pressed the &quot;Perform GC&quot; button in <code>jconsole</code>, and the effect was quite dramatic -- the heap-usage fell under 1Gb <em>and stayed there</em>. It was still fluctuating, as might be expected, but never to the heights seen before.</p>\n<p><a href=\"https://i.stack.imgur.com/ds5ej.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ds5ej.png\" alt=\"the red arrow points at when I forced garbage-collection\" /></a></p>\n<p>This is Java-11 on Linux. Are there, perhaps, some JVM options to achieve more aggressive garbage-collection without a manual intervention? We have the CPU -- this app is mostly I/O bound anyway -- but we could use the 2Gb better than to store <em>garbage</em>...</p>\n<p>Update, no, this is not a duplicate of <a href=\"/questions/30458195/\">the earlier question</a>:</p>\n<ul>\n<li>I'm not asking <em>why</em> here, I'm asking for practical tips on <em>what to do</em>.</li>\n<li>The JVM is much newer -- 7 years, and G1 is now the default GC, unlike back then.</li>\n</ul>\n"},{"tags":["java","log4j"],"answers":[{"tags":[],"owner":{"account_id":16372083,"reputation":2070,"user_id":11825162,"display_name":"IQbrod"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1601460258,"creation_date":1601460258,"answer_id":64135257,"question_id":64121046,"body_markdown":"Using a custom `ThreadPoolExecutor` did fix my problem.  \r\nFound this solution using this [answer][1].\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/19329668/11825162","title":"Log4j ThreadContext MultiThread won&#39;t inherit","body":"<p>Using a custom <code>ThreadPoolExecutor</code> did fix my problem.<br />\nFound this solution using this <a href=\"https://stackoverflow.com/a/19329668/11825162\">answer</a>.</p>\n"},{"tags":[],"owner":{"account_id":21555005,"reputation":23,"user_id":15890420,"display_name":"jonathan"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1642206824,"creation_date":1642206824,"answer_id":70717962,"question_id":64121046,"body_markdown":"Just encountered this problem.  Found setting -DisThreadContextMapInheritable=true at application startup works, even though setting it in the code does not.","title":"Log4j ThreadContext MultiThread won&#39;t inherit","body":"<p>Just encountered this problem.  Found setting -DisThreadContextMapInheritable=true at application startup works, even though setting it in the code does not.</p>\n"}],"owner":{"account_id":16372083,"reputation":2070,"user_id":11825162,"display_name":"IQbrod"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1738,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1642206824,"creation_date":1601387500,"question_id":64121046,"body_markdown":"I encounter this [post][1]&#39;s problem  \r\nHere my sample of code \r\n```java\r\npublic class StackOverflow implements RequestHandler&lt;Map&lt;String, String&gt;, ApiGatewayResponse&gt; {\r\n    private static final Logger LOGGER = LogManager.getLogger(StackOverflow.class);\r\n\r\n    public abstract class StreamGobbler extends Thread {\r\n        // Working Interceptor using this.print(&quot;message&quot;)\r\n        public abstract void print(String line);\r\n    }\r\n\r\n    private class ErrStreamGobbler extends StreamGobbler {\r\n        ErrStreamGobbler(InputStream in) { super(in); }\r\n\r\n        @Override\r\n        public void print(String line) { LOGGER.error(line); }\r\n    }\r\n\r\n    private class OutStreamGobbler extends StreamGobbler {\r\n        OutStreamGobbler(InputStream in) { super(in); }\r\n\r\n        @Override\r\n        public void print(String line) { LOGGER.info(line); }\r\n    }\r\n\r\n\r\n    // MAIN METHOD\r\n    @Override\r\n    public ApiGatewayResponse handleRequest(Map&lt;String, String&gt; params, Context context) {\r\n        // ThreadContext propagation\r\n        System.setProperty(&quot;isThreadContextMapInheritable&quot;, &quot;true&quot;);\r\n        ThreadContext.put(&quot;foo&quot;, &quot;bar&quot;);\r\n\r\n        LOGGER.info(&quot;Hello from main&quot;);\r\n\r\n        // My process will return value on System.in &amp; System.out\r\n        ProcessBuilder pb = new ProcessBuilder(&quot;sh&quot;, String.format(&quot;batchs/JOB_FOO/run.sh&quot;));\r\n        Process p = pb.start();\r\n        // Intercept those logs\r\n        new ErrStreamGobbler(p.getErrorStream()).start();\r\n        new OutStreamGobbler(p.getInputStream()).start();\r\n        p.waitFor();\r\n    }\r\n}\r\n```\r\nThe `ThreadContext` from `LOGGER.info(&quot;Hello from main&quot;);` does work and also prints `foo: bar`.  \r\nBut my child threads `StreamGobbler` doesn&#39;t get `ThreadContext` and won&#39;t print `foo: bar` as a log4j property event if `isThreadContextMapInheritable` is set to `true`.\r\n\r\n  [1]: https://stackoverflow.com/questions/49675779/log4j2-threadcontext-map-is-not-working-for-parallelstream","title":"Log4j ThreadContext MultiThread won&#39;t inherit","body":"<p>I encounter this <a href=\"https://stackoverflow.com/questions/49675779/log4j2-threadcontext-map-is-not-working-for-parallelstream\">post</a>'s problem<br />\nHere my sample of code</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class StackOverflow implements RequestHandler&lt;Map&lt;String, String&gt;, ApiGatewayResponse&gt; {\n    private static final Logger LOGGER = LogManager.getLogger(StackOverflow.class);\n\n    public abstract class StreamGobbler extends Thread {\n        // Working Interceptor using this.print(&quot;message&quot;)\n        public abstract void print(String line);\n    }\n\n    private class ErrStreamGobbler extends StreamGobbler {\n        ErrStreamGobbler(InputStream in) { super(in); }\n\n        @Override\n        public void print(String line) { LOGGER.error(line); }\n    }\n\n    private class OutStreamGobbler extends StreamGobbler {\n        OutStreamGobbler(InputStream in) { super(in); }\n\n        @Override\n        public void print(String line) { LOGGER.info(line); }\n    }\n\n\n    // MAIN METHOD\n    @Override\n    public ApiGatewayResponse handleRequest(Map&lt;String, String&gt; params, Context context) {\n        // ThreadContext propagation\n        System.setProperty(&quot;isThreadContextMapInheritable&quot;, &quot;true&quot;);\n        ThreadContext.put(&quot;foo&quot;, &quot;bar&quot;);\n\n        LOGGER.info(&quot;Hello from main&quot;);\n\n        // My process will return value on System.in &amp; System.out\n        ProcessBuilder pb = new ProcessBuilder(&quot;sh&quot;, String.format(&quot;batchs/JOB_FOO/run.sh&quot;));\n        Process p = pb.start();\n        // Intercept those logs\n        new ErrStreamGobbler(p.getErrorStream()).start();\n        new OutStreamGobbler(p.getInputStream()).start();\n        p.waitFor();\n    }\n}\n</code></pre>\n<p>The <code>ThreadContext</code> from <code>LOGGER.info(&quot;Hello from main&quot;);</code> does work and also prints <code>foo: bar</code>.<br />\nBut my child threads <code>StreamGobbler</code> doesn't get <code>ThreadContext</code> and won't print <code>foo: bar</code> as a log4j property event if <code>isThreadContextMapInheritable</code> is set to <code>true</code>.</p>\n"},{"tags":["java","if-statement","conditional-statements"],"comments":[{"owner":{"account_id":123953,"reputation":16498,"user_id":318749,"accept_rate":82,"display_name":"Randy"},"score":1,"creation_date":1395074233,"post_id":22460065,"comment_id":34161984,"body_markdown":"how about a case statement?","body":"how about a case statement?"},{"owner":{"account_id":2366187,"reputation":60152,"user_id":2071828,"accept_rate":88,"display_name":"Boris the Spider"},"score":0,"creation_date":1395074300,"post_id":22460065,"comment_id":34162032,"body_markdown":"If you can store your fields in a `List` or `Map` then just loop. Then with Java 8 you can `stream()` that collection and use a lambda. Without knowing the general structure of your code we cannot recommend what changes you could make to simplify your code.","body":"If you can store your fields in a <code>List</code> or <code>Map</code> then just loop. Then with Java 8 you can <code>stream()</code> that collection and use a lambda. Without knowing the general structure of your code we cannot recommend what changes you could make to simplify your code."},{"owner":{"account_id":1957068,"reputation":22025,"user_id":1759845,"accept_rate":65,"display_name":"BackSlash"},"score":2,"creation_date":1395074301,"post_id":22460065,"comment_id":34162035,"body_markdown":"Side note: It would be better to use `&quot;&quot;.equals(text1)` (and so on), to avoid `NullPointerException`s :)","body":"Side note: It would be better to use <code>&quot;&quot;.equals(text1)</code> (and so on), to avoid <code>NullPointerException</code>s :)"},{"owner":{"account_id":1101161,"reputation":119804,"user_id":1093528,"accept_rate":65,"display_name":"fge"},"score":3,"creation_date":1395074305,"post_id":22460065,"comment_id":34162039,"body_markdown":"Well, if you use Java 6+ you can replace that with `text1.isEmpty()`... Not that this answers your question.","body":"Well, if you use Java 6+ you can replace that with <code>text1.isEmpty()</code>... Not that this answers your question."},{"owner":{"account_id":935202,"reputation":49046,"user_id":964243,"accept_rate":66,"display_name":"Boann"},"score":0,"creation_date":1395074357,"post_id":22460065,"comment_id":34162078,"body_markdown":"@BackSlash How is that better?","body":"@BackSlash How is that better?"},{"owner":{"account_id":1261327,"reputation":1121,"user_id":1219539,"accept_rate":89,"display_name":"Works On Mine"},"score":0,"creation_date":1395074368,"post_id":22460065,"comment_id":34162086,"body_markdown":"how about a function? you could handle exceptions too!","body":"how about a function? you could handle exceptions too!"},{"owner":{"account_id":1101161,"reputation":119804,"user_id":1093528,"accept_rate":65,"display_name":"fge"},"score":0,"creation_date":1395074404,"post_id":22460065,"comment_id":34162109,"body_markdown":"A question is where you use that statement; is that in a loop?","body":"A question is where you use that statement; is that in a loop?"},{"owner":{"account_id":1750215,"reputation":2335,"user_id":1599472,"accept_rate":67,"display_name":"Fabio Marcolini"},"score":0,"creation_date":1395074433,"post_id":22460065,"comment_id":34162124,"body_markdown":"I had the same problem I made a StringUtils class which contains a method isEqualsAny(string checked, string...args) which check inside a for if any of the args equals to the checked string. It might be useful if you have to do that check in multiple places.","body":"I had the same problem I made a StringUtils class which contains a method isEqualsAny(string checked, string...args) which check inside a for if any of the args equals to the checked string. It might be useful if you have to do that check in multiple places."},{"owner":{"account_id":542952,"reputation":44662,"user_id":911930,"accept_rate":97,"display_name":"Ilja"},"score":0,"creation_date":1395074448,"post_id":22460065,"comment_id":34162140,"body_markdown":"@fge no simple if condition inside a method, not looping.","body":"@fge no simple if condition inside a method, not looping."},{"owner":{"account_id":1957068,"reputation":22025,"user_id":1759845,"accept_rate":65,"display_name":"BackSlash"},"score":0,"creation_date":1395075137,"post_id":22460065,"comment_id":34162544,"body_markdown":"@Boann It was a suggestion, because doing like I suggested will avoid `NullPointerException`s if `text1` (and all others) is `null`","body":"@Boann It was a suggestion, because doing like I suggested will avoid <code>NullPointerException</code>s if <code>text1</code> (and all others) is <code>null</code>"},{"owner":{"account_id":935202,"reputation":49046,"user_id":964243,"accept_rate":66,"display_name":"Boann"},"score":0,"creation_date":1395075722,"post_id":22460065,"comment_id":34162973,"body_markdown":"@BackSlash I see that. I just don&#39;t see how suppressing exceptions makes things better, or how allowing null or *non*-empty input is likely to be useful.","body":"@BackSlash I see that. I just don&#39;t see how suppressing exceptions makes things better, or how allowing null or <i>non</i>-empty input is likely to be useful."}],"answers":[{"tags":[],"owner":{"account_id":1101161,"reputation":119804,"user_id":1093528,"accept_rate":65,"display_name":"fge"},"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1395075130,"creation_date":1395074456,"answer_id":22460165,"question_id":22460065,"body_markdown":"You can do something like this:\r\n\r\n    if (Arrays.asList(text1, text2, etc).contains(&quot;&quot;))\r\n\r\nBut a better solution would depend on the context.\r\n\r\nNote however that this is  a little slower than your current code. If you don&#39;t execute that test a bazillion times a second, though, it should not matter.\r\n\r\n---\r\n**EDIT** since it has been learned in the comments that strings with only spaces should also satisfy the condition... Here goes:\r\n\r\n    private static final Pattern PATTERN = Pattern.compile(&quot;\\\\s*&quot;);\r\n    \r\n    private static boolean emptyOrSpacesOnly(final String... strings)\r\n    {\r\n        for (final String s: strings)\r\n            if (PATTERN.matcher(s).matches())\r\n                return true;\r\n        return false;\r\n    }\r\n\r\nThen, in code:\r\n\r\n    if (emptyOrSpacesOnly(text1, text2, etc))","title":"Is it correct to use multiple OR conditions in one if statement, what are alternatives?","body":"<p>You can do something like this:</p>\n\n<pre><code>if (Arrays.asList(text1, text2, etc).contains(\"\"))\n</code></pre>\n\n<p>But a better solution would depend on the context.</p>\n\n<p>Note however that this is  a little slower than your current code. If you don't execute that test a bazillion times a second, though, it should not matter.</p>\n\n<hr>\n\n<p><strong>EDIT</strong> since it has been learned in the comments that strings with only spaces should also satisfy the condition... Here goes:</p>\n\n<pre><code>private static final Pattern PATTERN = Pattern.compile(\"\\\\s*\");\n\nprivate static boolean emptyOrSpacesOnly(final String... strings)\n{\n    for (final String s: strings)\n        if (PATTERN.matcher(s).matches())\n            return true;\n    return false;\n}\n</code></pre>\n\n<p>Then, in code:</p>\n\n<pre><code>if (emptyOrSpacesOnly(text1, text2, etc))\n</code></pre>\n"},{"tags":[],"owner":{"account_id":218057,"reputation":67728,"user_id":474189,"accept_rate":72,"display_name":"Duncan Jones"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1395075052,"creation_date":1395075052,"answer_id":22460383,"question_id":22460065,"body_markdown":"[fge&#39;s solution](https://stackoverflow.com/a/22460165/474189) is certainly clever and reduces the lines of code. However, I feel some of the meaning is lost when glancing at that snippet of code.\r\n\r\nI would encourage you to embrace readable code, even if it&#39;s slightly more verbose. My solution would be to test these preconditions before beginning a method. If the precondition fails, throw an exception.\r\n\r\nEither write your own validation methods or use something like Apache Commons Lang [`Validate`](http://commons.apache.org/proper/commons-lang/javadocs/api-3.3/org/apache/commons/lang3/Validate.html) class. Then your code would look something like:\r\n\r\n    Validate.notEmpty(text1, &quot;error message&quot;);\r\n    Validate.notEmpty(text2, &quot;error message&quot;);\r\n    Validate.notEmpty(text3, &quot;error message&quot;);\r\n    Validate.notEmpty(text4, &quot;error message&quot;);\r\n    \r\n    // This line is only reached if all fields are non-empty\r\n\r\nI think this is easy to read, which is half the battle won.","title":"Is it correct to use multiple OR conditions in one if statement, what are alternatives?","body":"<p><a href=\"https://stackoverflow.com/a/22460165/474189\">fge's solution</a> is certainly clever and reduces the lines of code. However, I feel some of the meaning is lost when glancing at that snippet of code.</p>\n\n<p>I would encourage you to embrace readable code, even if it's slightly more verbose. My solution would be to test these preconditions before beginning a method. If the precondition fails, throw an exception.</p>\n\n<p>Either write your own validation methods or use something like Apache Commons Lang <a href=\"http://commons.apache.org/proper/commons-lang/javadocs/api-3.3/org/apache/commons/lang3/Validate.html\" rel=\"nofollow noreferrer\"><code>Validate</code></a> class. Then your code would look something like:</p>\n\n<pre><code>Validate.notEmpty(text1, \"error message\");\nValidate.notEmpty(text2, \"error message\");\nValidate.notEmpty(text3, \"error message\");\nValidate.notEmpty(text4, \"error message\");\n\n// This line is only reached if all fields are non-empty\n</code></pre>\n\n<p>I think this is easy to read, which is half the battle won.</p>\n"}],"owner":{"account_id":542952,"reputation":44662,"user_id":911930,"accept_rate":97,"display_name":"Ilja"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":115,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":22460165,"answer_count":2,"score":1,"last_activity_date":1642204739,"creation_date":1395074187,"question_id":22460065,"body_markdown":"I would like to know which way is more suitable and efficient in achieving something like: checking if text was entered in a field\r\n\r\n    if(text1.equals(&quot;&quot;) || text2.equals(&quot;&quot;) || text3.equals(&quot;&quot;) || text4.equals(&quot;&quot;)) {\r\n      //Do Stuff\r\n    }\r\n\r\nI can see how this gets messy quickly with more than 2 fields, and would like to know if this is a correct way to do this, or do alternatives exist?","title":"Is it correct to use multiple OR conditions in one if statement, what are alternatives?","body":"<p>I would like to know which way is more suitable and efficient in achieving something like: checking if text was entered in a field</p>\n<pre><code>if(text1.equals(&quot;&quot;) || text2.equals(&quot;&quot;) || text3.equals(&quot;&quot;) || text4.equals(&quot;&quot;)) {\n  //Do Stuff\n}\n</code></pre>\n<p>I can see how this gets messy quickly with more than 2 fields, and would like to know if this is a correct way to do this, or do alternatives exist?</p>\n"},{"tags":["java","dropwizard"],"comments":[{"owner":{"account_id":5494430,"reputation":1492,"user_id":4366051,"accept_rate":58,"display_name":"heaphach"},"score":0,"creation_date":1447085091,"post_id":30123271,"comment_id":55000669,"body_markdown":"2.) I think it is a dropwizard duration so you can do this:expireAfterAccess=15seconds","body":"2.) I think it is a dropwizard duration so you can do this:expireAfterAccess=15seconds"}],"answers":[{"tags":[],"owner":{"account_id":3013228,"reputation":205797,"user_id":2587435,"accept_rate":88,"display_name":"Paul Samsotha"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1431258850,"creation_date":1431258850,"answer_id":30151081,"question_id":30123271,"body_markdown":"I don&#39;t know about about &quot;2)&quot; but for &quot;1)&quot;, you simply need to wire the authenticator up to the Basic auth provider\r\n\r\n    CachingAuthenticator&lt;BasicCredentials, AuthUser&gt; cachingAuthenticator =\r\n            new CachingAuthenticator&lt;&gt;(environment.metrics(), new WebAuthenticator(), \r\n                    configuration.getAuthenticationCachePolicy());\r\n\r\n    environment.jersey().register(AuthFactory.binder(\r\n                new BasicAuthFactory&lt;&gt;(cachingAuthenticator,\r\n                         &quot;Example Realm&quot;, AuthUser.class)));","title":"Use of CachingAuthenticator in Dropwizard","body":"<p>I don't know about about \"2)\" but for \"1)\", you simply need to wire the authenticator up to the Basic auth provider</p>\n\n<pre><code>CachingAuthenticator&lt;BasicCredentials, AuthUser&gt; cachingAuthenticator =\n        new CachingAuthenticator&lt;&gt;(environment.metrics(), new WebAuthenticator(), \n                configuration.getAuthenticationCachePolicy());\n\nenvironment.jersey().register(AuthFactory.binder(\n            new BasicAuthFactory&lt;&gt;(cachingAuthenticator,\n                     \"Example Realm\", AuthUser.class)));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5384829,"reputation":343,"user_id":4500953,"accept_rate":100,"display_name":"Kedar Javalkar"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1496922336,"creation_date":1496922336,"answer_id":44434882,"question_id":30123271,"body_markdown":"Working solution\r\n\r\n    /** authentication config */\r\n\tCachingAuthenticator&lt;BasicCredentials, AuthUser&gt; cachingAuthenticator = new CachingAuthenticator&lt;&gt;(\r\n\t\tenvironment.metrics(), new MyAuthenticator(), configuration.getAuthenticationCachePolicy());\r\n\t\r\n    environment.jersey().register(new AuthDynamicFeature(new BasicCredentialAuthFilter.Builder&lt;AuthUser&gt;()\r\n\t\t.setAuthenticator(cachingAuthenticator).setRealm(&quot;kedar.javalkar.realm&quot;).buildAuthFilter()));\r\n\t\r\n    environment.jersey().register(new AuthValueFactoryProvider.Binder&lt;&gt;(AuthUser.class));\r\n\r\n\r\nThe yml can either have \r\n\r\n    # Caching authenticator.\r\n    authenticationCachePolicy: maximumSize=10000, expireAfterAccess=10m\r\n\r\nor\r\n\r\n    # Caching authenticator.\r\n    authenticationCachePolicy: maximumSize=10000, expireAfterAccess=1s","title":"Use of CachingAuthenticator in Dropwizard","body":"<p>Working solution</p>\n\n<pre><code>/** authentication config */\nCachingAuthenticator&lt;BasicCredentials, AuthUser&gt; cachingAuthenticator = new CachingAuthenticator&lt;&gt;(\n    environment.metrics(), new MyAuthenticator(), configuration.getAuthenticationCachePolicy());\n\nenvironment.jersey().register(new AuthDynamicFeature(new BasicCredentialAuthFilter.Builder&lt;AuthUser&gt;()\n    .setAuthenticator(cachingAuthenticator).setRealm(\"kedar.javalkar.realm\").buildAuthFilter()));\n\nenvironment.jersey().register(new AuthValueFactoryProvider.Binder&lt;&gt;(AuthUser.class));\n</code></pre>\n\n<p>The yml can either have </p>\n\n<pre><code># Caching authenticator.\nauthenticationCachePolicy: maximumSize=10000, expireAfterAccess=10m\n</code></pre>\n\n<p>or</p>\n\n<pre><code># Caching authenticator.\nauthenticationCachePolicy: maximumSize=10000, expireAfterAccess=1s\n</code></pre>\n"}],"owner":{"account_id":5384829,"reputation":343,"user_id":4500953,"accept_rate":100,"display_name":"Kedar Javalkar"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1446,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":44434882,"answer_count":2,"score":3,"last_activity_date":1642204703,"creation_date":1431086258,"question_id":30123271,"body_markdown":"I want to discard old authentications from dropwizard, which is why I&#39;m using blow configuration of CachingAuthenticator.\r\n\r\n    @Override \r\n    public void run(WebConfiguration configuration, Environment environment) {\r\n\t   environment.jersey().register(new ActivityResource());\r\n\t\t\r\n\t   CachingAuthenticator&lt;BasicCredentials, AuthUser&gt; cachingAuthenticator =\r\n\t\t\tnew CachingAuthenticator&lt;&gt;(environment.metrics(), new WebAuthenticator(), \r\n\t\t\t\t\tconfiguration.getAuthenticationCachePolicy());\r\n    }\r\n\r\n\r\nPolicy is in yml file as \r\n\r\n    authenticationCachePolicy: maximumSize=10, expireAfterAccess=1m\r\n\r\nMy questions are:\r\n\r\n1. how do I register(get it working) cachingAuthenticator so every request will be authenticated?\r\n\r\n2. How to set expireAfterAccess in seconds?\r\n\r\n3. Anything which is wrong in code, please suggest...\r\n","title":"Use of CachingAuthenticator in Dropwizard","body":"<p>I want to discard old authentications from dropwizard, which is why I'm using blow configuration of CachingAuthenticator.</p>\n<pre><code>@Override \npublic void run(WebConfiguration configuration, Environment environment) {\n   environment.jersey().register(new ActivityResource());\n    \n   CachingAuthenticator&lt;BasicCredentials, AuthUser&gt; cachingAuthenticator =\n        new CachingAuthenticator&lt;&gt;(environment.metrics(), new WebAuthenticator(), \n                configuration.getAuthenticationCachePolicy());\n}\n</code></pre>\n<p>Policy is in yml file as</p>\n<pre><code>authenticationCachePolicy: maximumSize=10, expireAfterAccess=1m\n</code></pre>\n<p>My questions are:</p>\n<ol>\n<li><p>how do I register(get it working) cachingAuthenticator so every request will be authenticated?</p>\n</li>\n<li><p>How to set expireAfterAccess in seconds?</p>\n</li>\n<li><p>Anything which is wrong in code, please suggest...</p>\n</li>\n</ol>\n"},{"tags":["java","saml","onelogin"],"comments":[{"owner":{"account_id":9955874,"reputation":1,"user_id":17916815,"display_name":"Joop Kaashoek"},"score":0,"creation_date":1642204182,"post_id":70685545,"comment_id":125017470,"body_markdown":"I.E. how does one represent SAML attributes with the Onelogin keys?","body":"I.E. how does one represent SAML attributes with the Onelogin keys?"},{"owner":{"account_id":9955874,"reputation":1,"user_id":17916815,"display_name":"Joop Kaashoek"},"score":0,"creation_date":1642207567,"post_id":70685545,"comment_id":125017971,"body_markdown":"I think we have an SP, not an  IDP","body":"I think we have an SP, not an  IDP"}],"owner":{"account_id":9955874,"reputation":1,"user_id":17916815,"display_name":"Joop Kaashoek"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":286,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1642203606,"creation_date":1642007069,"question_id":70685545,"body_markdown":"We have an IDP and like for our clients to include first and last name. Do we need to specify that in our metadata? We use the Java open source kit.\r\n\r\nI presume we need to add this to the metadata:\r\n```\r\n&lt;saml:AttributeStatement&gt;\r\n            &lt;saml:Attribute Name=&quot;EmailAddress&quot; NameFormat=&quot;urn:oasis:names:tc:SAML:2.0:attrname-format:basic&quot;&gt;\r\n                &lt;saml:AttributeValue&gt;first_last@example.com&lt;/saml:AttributeValue&gt;\r\n            &lt;/saml:Attribute&gt;\r\n            &lt;saml:Attribute Name=&quot;FirstName&quot; NameFormat=&quot;urn:oasis:names:tc:SAML:2.0:attrname-format:basic&quot;&gt;\r\n                &lt;saml:AttributeValue&gt;First&lt;/saml:AttributeValue&gt;\r\n            &lt;/saml:Attribute&gt;\r\n            &lt;saml:Attribute Name=&quot;LastName&quot; NameFormat=&quot;urn:oasis:names:tc:SAML:2.0:attrname-format:basic&quot;&gt;\r\n                &lt;saml:AttributeValue&gt;Last&lt;/saml:AttributeValue&gt;\r\n            &lt;/saml:Attribute&gt;\r\n&lt;/saml:AttributeStatement&gt;\r\n```\r\nBut how do you do that when we use keys to create the metadata, such as\r\n```\r\n samlData.put(&quot;onelogin.saml2.sp.single_logout_service.binding&quot;, &quot;urn:oasis:names:tc:SAML:2.0:bindings:HTTP-Redirect&quot;);\r\n```","title":"How to include givenName and surname in SAML metadata so that it is included, optionally","body":"<p>We have an IDP and like for our clients to include first and last name. Do we need to specify that in our metadata? We use the Java open source kit.</p>\n<p>I presume we need to add this to the metadata:</p>\n<pre><code>&lt;saml:AttributeStatement&gt;\n            &lt;saml:Attribute Name=&quot;EmailAddress&quot; NameFormat=&quot;urn:oasis:names:tc:SAML:2.0:attrname-format:basic&quot;&gt;\n                &lt;saml:AttributeValue&gt;first_last@example.com&lt;/saml:AttributeValue&gt;\n            &lt;/saml:Attribute&gt;\n            &lt;saml:Attribute Name=&quot;FirstName&quot; NameFormat=&quot;urn:oasis:names:tc:SAML:2.0:attrname-format:basic&quot;&gt;\n                &lt;saml:AttributeValue&gt;First&lt;/saml:AttributeValue&gt;\n            &lt;/saml:Attribute&gt;\n            &lt;saml:Attribute Name=&quot;LastName&quot; NameFormat=&quot;urn:oasis:names:tc:SAML:2.0:attrname-format:basic&quot;&gt;\n                &lt;saml:AttributeValue&gt;Last&lt;/saml:AttributeValue&gt;\n            &lt;/saml:Attribute&gt;\n&lt;/saml:AttributeStatement&gt;\n</code></pre>\n<p>But how do you do that when we use keys to create the metadata, such as</p>\n<pre><code> samlData.put(&quot;onelogin.saml2.sp.single_logout_service.binding&quot;, &quot;urn:oasis:names:tc:SAML:2.0:bindings:HTTP-Redirect&quot;);\n</code></pre>\n"},{"tags":["java","data-structures","linked-list"],"answers":[{"tags":[],"owner":{"account_id":2253934,"reputation":152,"user_id":2779074,"display_name":"Humpity"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1642194666,"creation_date":1642194666,"answer_id":70716554,"question_id":70716379,"body_markdown":"        current = new Node(data);\r\n\r\nIf current is null, this is effectively\r\n\r\nnull = new Node(data);\r\n\r\nwhich is an error and does not link your list.\r\n\r\nnull is not the end of your list, \r\nthe node that points to null is the end (not null).\r\n\r\nAnd you have to find and hold onto that.\r\n","title":"Linked List implementation: why cannot move to head.next before creating new node","body":"<pre><code>    current = new Node(data);\n</code></pre>\n<p>If current is null, this is effectively</p>\n<p>null = new Node(data);</p>\n<p>which is an error and does not link your list.</p>\n<p>null is not the end of your list,\nthe node that points to null is the end (not null).</p>\n<p>And you have to find and hold onto that.</p>\n"},{"tags":[],"owner":{"account_id":7142980,"reputation":323253,"user_id":5459839,"display_name":"trincot"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1642202850,"creation_date":1642202850,"answer_id":70717621,"question_id":70716379,"body_markdown":"This statement:\r\n\r\n    current = new Node(data);\r\n\r\n...does not mutate the list. It just stores a new node in a *variable*. But the list is not influenced by that assignment. In order to *add* a node to a non-empty list, you&#39;ll have to update the `next` attribute of a node, more particularly, the tail node. But the important difference here is between assigning to a local variable (does not influence a list), and to an attribute of a node that is already in the list (that *does* influence the list).\r\n\r\nSo the job of the code must be to find the tail node. That is what the loop is for. The wrong code, overshoots the last node, and so there is no reference to the tail node when the loop exits. And so -- empty handed -- there is no way to assign the new node to a `next` attribute of the tail node.","title":"Linked List implementation: why cannot move to head.next before creating new node","body":"<p>This statement:</p>\n<pre><code>current = new Node(data);\n</code></pre>\n<p>...does not mutate the list. It just stores a new node in a <em>variable</em>. But the list is not influenced by that assignment. In order to <em>add</em> a node to a non-empty list, you'll have to update the <code>next</code> attribute of a node, more particularly, the tail node. But the important difference here is between assigning to a local variable (does not influence a list), and to an attribute of a node that is already in the list (that <em>does</em> influence the list).</p>\n<p>So the job of the code must be to find the tail node. That is what the loop is for. The wrong code, overshoots the last node, and so there is no reference to the tail node when the loop exits. And so -- empty handed -- there is no way to assign the new node to a <code>next</code> attribute of the tail node.</p>\n"}],"owner":{"account_id":21793206,"reputation":23,"user_id":16093128,"display_name":"popular coffee"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":199,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70717621,"answer_count":2,"score":0,"last_activity_date":1642202850,"creation_date":1642193432,"question_id":70716379,"body_markdown":"I am solving [a challenge from hackerrank.](https://www.hackerrank.com/challenges/30-linked-list/problem?h_r=next-challenge&amp;h_v=legacy&amp;isFullScreen=true)\r\n[This is the description of the question.][2]\r\n```java\r\nimport java.io.*;\r\nimport java.util.*;\r\n\r\nclass Node {\r\n\tint data;\r\n\tNode next;\r\n\tNode(int d) {\r\n        data = d;\r\n        next = null;\r\n    }\r\n}\r\n\r\nclass Solution {\r\n\r\n    public static  Node insert(Node head,int data) {\r\n        //Complete this method        \r\n    }\r\n\r\n\tpublic static void display(Node head) {\r\n        Node start = head;\r\n        while(start != null) {\r\n            System.out.print(start.data + &quot; &quot;);\r\n            start = start.next;\r\n        }\r\n    }\r\n\r\n    public static void main(String args[]) {\r\n        Scanner sc = new Scanner(System.in);\r\n        Node head = null;\r\n        int N = sc.nextInt();\r\n\r\n        while(N-- &gt; 0) {\r\n            int ele = sc.nextInt();\r\n            head = insert(head,ele);\r\n        }\r\n        display(head);\r\n        sc.close();\r\n    }\r\n}\r\n```\r\nIt is basically implementing a Linked List, and I eventually did solve the problem. However I have some question about the code.\r\n\r\nThis is the correct code which gives the desired output:\r\n```java\r\n\tpublic static  Node insert(Node head,int data) {\r\n\t\tif (head == null) {\r\n        head = new Node(data);\r\n    } else {\r\n        Node current = head;\r\n        while(current.next != null)\r\n            current = current.next;\r\n        current.next = new Node(data);\r\n    }\r\n    return head;\r\n    }\r\n```\r\n\r\nThis is the incorrect code I wrote at first:\r\n```java\r\n\tpublic static  Node insert(Node head,int data) {\r\n\t\tif (head == null) {\r\n            head = new Node(data);\r\n        } else {\r\n        \tNode current = head;\r\n            while(current != null)\r\n                current = current.next;     \r\n            current = new Node(data);\r\n        }        \r\n        return head;\r\n    }\r\n```\r\nThe difference is the the while loop statement and the code after while loop.\r\nWhen running the entire java code, using the sample input, the incorrect code only output `2`, where the expected output being `2 3 4 1`\r\n\r\nI am guessing it is something about the pointer reference? \r\nBut when I break the code into steps, the incorrect code still seems reasonable to me.\r\n- the correct code, `current` stays on `head` before it creates new node with data.\r\n- the incorrect code, `current` goes to `head.next` before it creates new node with data.\r\n\r\n[I draw out the steps of the code][1] (upper is the correct code, below is incorrect code), and end up with two question:\r\n\r\n1. Is the incorrect code wrong because what I circled in the image? like I cannot create a node when I am at null? (if that is the case, why no exception error then?)\r\n2. Another things that bothers me is that the code I underline in the image seem equivalent.\r\n\r\nCan someone point out why the incorrect code cannot give the desired output? Thank you!\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Ki1tG.png\r\n  [2]: https://i.stack.imgur.com/rT6eo.png","title":"Linked List implementation: why cannot move to head.next before creating new node","body":"<p>I am solving <a href=\"https://www.hackerrank.com/challenges/30-linked-list/problem?h_r=next-challenge&amp;h_v=legacy&amp;isFullScreen=true\" rel=\"nofollow noreferrer\">a challenge from hackerrank.</a>\n<a href=\"https://i.stack.imgur.com/rT6eo.png\" rel=\"nofollow noreferrer\">This is the description of the question.</a></p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.io.*;\nimport java.util.*;\n\nclass Node {\n    int data;\n    Node next;\n    Node(int d) {\n        data = d;\n        next = null;\n    }\n}\n\nclass Solution {\n\n    public static  Node insert(Node head,int data) {\n        //Complete this method        \n    }\n\n    public static void display(Node head) {\n        Node start = head;\n        while(start != null) {\n            System.out.print(start.data + &quot; &quot;);\n            start = start.next;\n        }\n    }\n\n    public static void main(String args[]) {\n        Scanner sc = new Scanner(System.in);\n        Node head = null;\n        int N = sc.nextInt();\n\n        while(N-- &gt; 0) {\n            int ele = sc.nextInt();\n            head = insert(head,ele);\n        }\n        display(head);\n        sc.close();\n    }\n}\n</code></pre>\n<p>It is basically implementing a Linked List, and I eventually did solve the problem. However I have some question about the code.</p>\n<p>This is the correct code which gives the desired output:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    public static  Node insert(Node head,int data) {\n        if (head == null) {\n        head = new Node(data);\n    } else {\n        Node current = head;\n        while(current.next != null)\n            current = current.next;\n        current.next = new Node(data);\n    }\n    return head;\n    }\n</code></pre>\n<p>This is the incorrect code I wrote at first:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    public static  Node insert(Node head,int data) {\n        if (head == null) {\n            head = new Node(data);\n        } else {\n            Node current = head;\n            while(current != null)\n                current = current.next;     \n            current = new Node(data);\n        }        \n        return head;\n    }\n</code></pre>\n<p>The difference is the the while loop statement and the code after while loop.\nWhen running the entire java code, using the sample input, the incorrect code only output <code>2</code>, where the expected output being <code>2 3 4 1</code></p>\n<p>I am guessing it is something about the pointer reference?\nBut when I break the code into steps, the incorrect code still seems reasonable to me.</p>\n<ul>\n<li>the correct code, <code>current</code> stays on <code>head</code> before it creates new node with data.</li>\n<li>the incorrect code, <code>current</code> goes to <code>head.next</code> before it creates new node with data.</li>\n</ul>\n<p><a href=\"https://i.stack.imgur.com/Ki1tG.png\" rel=\"nofollow noreferrer\">I draw out the steps of the code</a> (upper is the correct code, below is incorrect code), and end up with two question:</p>\n<ol>\n<li>Is the incorrect code wrong because what I circled in the image? like I cannot create a node when I am at null? (if that is the case, why no exception error then?)</li>\n<li>Another things that bothers me is that the code I underline in the image seem equivalent.</li>\n</ol>\n<p>Can someone point out why the incorrect code cannot give the desired output? Thank you!</p>\n"},{"tags":["java","xml","parsing"],"answers":[{"tags":[],"owner":{"account_id":11683,"reputation":1438179,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1273067392,"creation_date":1273067392,"answer_id":2773757,"question_id":2773733,"body_markdown":"[StAX][1] would seem to be one obvious solution: it&#39;s a pull parser rather than either the &quot;push&quot; of SAX or the &quot;buffer the whole thing&quot; approach of DOM. Can&#39;t say I&#39;ve used it though. A [&quot;StAX tutorial&quot; search][2] may come in handy :)\r\n\r\n\r\n  [1]: http://stax.codehaus.org/Home\r\n  [2]: http://www.google.co.uk/search?q=stax+tutorial","title":"How to transform huge xml files in java?","body":"<p><a href=\"http://stax.codehaus.org/Home\" rel=\"noreferrer\">StAX</a> would seem to be one obvious solution: it's a pull parser rather than either the \"push\" of SAX or the \"buffer the whole thing\" approach of DOM. Can't say I've used it though. A <a href=\"http://www.google.co.uk/search?q=stax+tutorial\" rel=\"noreferrer\">\"StAX tutorial\" search</a> may come in handy :)</p>\n"},{"tags":[],"owner":{"account_id":110220,"reputation":37362,"user_id":291741,"accept_rate":87,"display_name":"Chris Lercher"},"down_vote_count":0,"up_vote_count":9,"is_accepted":true,"score":9,"last_activity_date":1273067869,"creation_date":1273067403,"answer_id":2773762,"question_id":2773733,"body_markdown":"Yes, just write a SAX content handler, and when it encounters a certain element, you build a dom tree on that element. I&#39;ve done this with very large files, and it works very well.\r\n\r\nIt&#39;s actually very easy: As soon as you encounter the start of the element you want, you set a flag in your content handler, and from there on, you forward everything to the DOM builder. When you encounter the end of the element, you set the flag to false, and write out the result.\r\n\r\n(For more complex cases with nested elements of the same element name, you&#39;ll need to create a stack or a counter, but that&#39;s still quite easy to do.)","title":"How to transform huge xml files in java?","body":"<p>Yes, just write a SAX content handler, and when it encounters a certain element, you build a dom tree on that element. I've done this with very large files, and it works very well.</p>\n\n<p>It's actually very easy: As soon as you encounter the start of the element you want, you set a flag in your content handler, and from there on, you forward everything to the DOM builder. When you encounter the end of the element, you set the flag to false, and write out the result.</p>\n\n<p>(For more complex cases with nested elements of the same element name, you'll need to create a stack or a counter, but that's still quite easy to do.)</p>\n"},{"tags":[],"owner":{"account_id":50732,"reputation":1753,"user_id":151372,"accept_rate":60,"display_name":"ilikeorangutans"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1273067464,"creation_date":1273067464,"answer_id":2773776,"question_id":2773733,"body_markdown":"Have a look at [StAX][1], this might be what you need. There&#39;s a good introduction on [IBM Developer Works][2].\r\n\r\n\r\n [1]:http://stax.codehaus.org/Home\r\n [2]:http://www.ibm.com/developerworks/xml/library/x-tipstx2/index.html","title":"How to transform huge xml files in java?","body":"<p>Have a look at <a href=\"http://stax.codehaus.org/Home\" rel=\"nofollow noreferrer\">StAX</a>, this might be what you need. There's a good introduction on <a href=\"http://www.ibm.com/developerworks/xml/library/x-tipstx2/index.html\" rel=\"nofollow noreferrer\">IBM Developer Works</a>.</p>\n"},{"tags":[],"owner":{"account_id":60494,"reputation":34013,"user_id":180659,"accept_rate":54,"display_name":"jarnbjo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1273067543,"creation_date":1273067543,"answer_id":2773786,"question_id":2773733,"body_markdown":"You can do this quite easily with an `XMLEventReader` and several `XMLEventWriter`s from the javax.xml.stream package.","title":"How to transform huge xml files in java?","body":"<p>You can do this quite easily with an <code>XMLEventReader</code> and several <code>XMLEventWriter</code>s from the javax.xml.stream package.</p>\n"},{"tags":[],"owner":{"account_id":52822,"reputation":1088970,"user_id":157882,"accept_rate":93,"display_name":"BalusC"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1273067658,"creation_date":1273067658,"answer_id":2773805,"question_id":2773733,"body_markdown":"Since you&#39;re talking about GB&#39;s, I would rather prioritize the memory usage in the consideration. SAX needs about 2 times of memory as the document big is, while DOM needs it to be  *at least* 5 times. So if your XML file is 1GB big, then DOM would require a minimum of 5GB of free memory. That&#39;s not funny anymore. So SAX (or any variant on it, like StAX) is the best option here.\r\n\r\nIf you want the most memory efficient approach, look at [VTD-XML][1]. It requires only *a little* more memory than the file big is.\r\n\r\n\r\n  [1]: http://vtd-xml.sourceforge.net/","title":"How to transform huge xml files in java?","body":"<p>Since you're talking about GB's, I would rather prioritize the memory usage in the consideration. SAX needs about 2 times of memory as the document big is, while DOM needs it to be  <em>at least</em> 5 times. So if your XML file is 1GB big, then DOM would require a minimum of 5GB of free memory. That's not funny anymore. So SAX (or any variant on it, like StAX) is the best option here.</p>\n\n<p>If you want the most memory efficient approach, look at <a href=\"http://vtd-xml.sourceforge.net/\" rel=\"nofollow noreferrer\">VTD-XML</a>. It requires only <em>a little</em> more memory than the file big is.</p>\n"},{"tags":[],"owner":{"account_id":122932,"reputation":51815,"user_id":317052,"accept_rate":86,"display_name":"Daniel Haley"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1642202735,"creation_date":1273089485,"answer_id":2776346,"question_id":2773733,"body_markdown":"For such a large XML document something with a streaming architecture, like Omnimark, would be ideal.\r\n\r\nIt wouldn&#39;t have to be anything complex either. An Omnimark script like what&#39;s below could give you what you need:\r\n\r\n```none\r\nprocess\r\n\r\nsubmit #main-input\r\n\r\nmacro upto (arg string) is\r\n\t((lookahead not string) any)*\r\nmacro-end\r\n\r\nfind ((&quot;&lt;keep&quot;) upto (&quot;&lt;/keep&gt;&quot;) &quot;&lt;/keep&gt;&quot;)=&gt;keep\r\n\toutput keep\r\n\r\nfind any\r\n```","title":"How to transform huge xml files in java?","body":"<p>For such a large XML document something with a streaming architecture, like Omnimark, would be ideal.</p>\n<p>It wouldn't have to be anything complex either. An Omnimark script like what's below could give you what you need:</p>\n<pre class=\"lang-none prettyprint-override\"><code>process\n\nsubmit #main-input\n\nmacro upto (arg string) is\n    ((lookahead not string) any)*\nmacro-end\n\nfind ((&quot;&lt;keep&quot;) upto (&quot;&lt;/keep&gt;&quot;) &quot;&lt;/keep&gt;&quot;)=&gt;keep\n    output keep\n\nfind any\n</code></pre>\n"},{"tags":[],"owner":{"account_id":105855,"reputation":8933,"user_id":282229,"accept_rate":80,"display_name":"Christian Semrau"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1273181574,"creation_date":1273090915,"answer_id":2776502,"question_id":2773733,"body_markdown":"I made good experiences with [STX][1] (**Streaming Transformations for XML**). Basically, it is a streamed version of XSLT, well suited to parsing huge amounts of data with minimal memory footprint. It has an implementation in Java named [Joost][2].\r\n\r\nIt should be easy to come up with a STX transform that ignores all elements until the element matches a given XPath, copies that element and all its children (using an identity template within a template group), and continues to ignore elements until the next match.\r\n\r\n**UPDATE**\r\n\r\nI hacked together a STX transform that does what I understand you want. It mostly depends on STX-only features like template groups and configurable default templates.\r\n\r\n    &lt;stx:transform xmlns:stx=&quot;http://stx.sourceforge.net/2002/ns&quot;\r\n        version=&quot;1.0&quot; pass-through=&quot;none&quot; output-method=&quot;xml&quot;&gt;\r\n        &lt;stx:template match=&quot;element/child&quot;&gt;\r\n            &lt;stx:process-self group=&quot;copy&quot; /&gt;\r\n        &lt;/stx:template&gt;\r\n        &lt;stx:group name=&quot;copy&quot; pass-through=&quot;all&quot;&gt;\r\n        &lt;/stx:group&gt;\r\n    &lt;/stx:transform&gt;\r\n\r\nThe `pass-through=&quot;none&quot;` at the `stx:transform` configures the default templates (for nodes, attributes etc.) to produce no output, but process child elements. Then the `stx:template` matches the XPath `element/child` (this is the place where you put your match expression), it &quot;processes self&quot; in the &quot;copy&quot; group, meaning that the matching template from the `group name=&quot;copy&quot;` is invoked on the current element. That group has `pass-though=&quot;all&quot;`, so the default templates copy their input and process child elements. When the `element/child` element is ended, control is passed back to the template that invoked `process-self`, and the following elements are ignored again. Until the template matches again.\r\n\r\nThe following is an example input file:\r\n\r\n    &lt;root&gt;\r\n        &lt;child attribute=&quot;no-parent, so no copy&quot;&gt;\r\n        &lt;/child&gt;\r\n        &lt;element id=&quot;id1&quot;&gt;\r\n            &lt;child attribute=&quot;value1&quot;&gt;\r\n                text1&lt;b&gt;bold&lt;/b&gt;\r\n            &lt;/child&gt;\r\n        &lt;/element&gt;\r\n        &lt;element id=&quot;id2&quot;&gt;\r\n            &lt;child attribute=&quot;value2&quot;&gt;\r\n                text2\r\n                &lt;x:childX xmlns:x=&quot;http://x.example.com/x&quot;&gt;\r\n                &lt;!-- comment --&gt;\r\n                    yet more&lt;b i=&quot;i&quot; x:i=&quot;x-i&quot; &gt;&lt;/b&gt;\r\n                &lt;/x:childX&gt;\r\n            &lt;/child&gt;\r\n        &lt;/element&gt;\r\n    &lt;/root&gt;\r\n\r\nThis is the corresponding output file:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;child attribute=&quot;value1&quot;&gt;\r\n                text1&lt;b&gt;bold&lt;/b&gt;\r\n            &lt;/child&gt;&lt;child attribute=&quot;value2&quot;&gt;\r\n                text2\r\n                &lt;x:childX xmlns:x=&quot;http://x.example.com/x&quot;&gt;\r\n                &lt;!-- comment --&gt;\r\n                    yet more&lt;b i=&quot;i&quot; x:i=&quot;x-i&quot; /&gt;\r\n                &lt;/x:childX&gt;\r\n            &lt;/child&gt;\r\n\r\nThe unusual formatting is a result of skipping the text nodes containing newlines outside the `child` elements.\r\n\r\n [1]: http://stx.sourceforge.net/\r\n [2]: http://joost.sourceforge.net/\r\n\r\n\r\n\r\n","title":"How to transform huge xml files in java?","body":"<p>I made good experiences with <a href=\"http://stx.sourceforge.net/\" rel=\"nofollow noreferrer\">STX</a> (<strong>Streaming Transformations for XML</strong>). Basically, it is a streamed version of XSLT, well suited to parsing huge amounts of data with minimal memory footprint. It has an implementation in Java named <a href=\"http://joost.sourceforge.net/\" rel=\"nofollow noreferrer\">Joost</a>.</p>\n\n<p>It should be easy to come up with a STX transform that ignores all elements until the element matches a given XPath, copies that element and all its children (using an identity template within a template group), and continues to ignore elements until the next match.</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>I hacked together a STX transform that does what I understand you want. It mostly depends on STX-only features like template groups and configurable default templates.</p>\n\n<pre><code>&lt;stx:transform xmlns:stx=\"http://stx.sourceforge.net/2002/ns\"\n    version=\"1.0\" pass-through=\"none\" output-method=\"xml\"&gt;\n    &lt;stx:template match=\"element/child\"&gt;\n        &lt;stx:process-self group=\"copy\" /&gt;\n    &lt;/stx:template&gt;\n    &lt;stx:group name=\"copy\" pass-through=\"all\"&gt;\n    &lt;/stx:group&gt;\n&lt;/stx:transform&gt;\n</code></pre>\n\n<p>The <code>pass-through=\"none\"</code> at the <code>stx:transform</code> configures the default templates (for nodes, attributes etc.) to produce no output, but process child elements. Then the <code>stx:template</code> matches the XPath <code>element/child</code> (this is the place where you put your match expression), it \"processes self\" in the \"copy\" group, meaning that the matching template from the <code>group name=\"copy\"</code> is invoked on the current element. That group has <code>pass-though=\"all\"</code>, so the default templates copy their input and process child elements. When the <code>element/child</code> element is ended, control is passed back to the template that invoked <code>process-self</code>, and the following elements are ignored again. Until the template matches again.</p>\n\n<p>The following is an example input file:</p>\n\n<pre><code>&lt;root&gt;\n    &lt;child attribute=\"no-parent, so no copy\"&gt;\n    &lt;/child&gt;\n    &lt;element id=\"id1\"&gt;\n        &lt;child attribute=\"value1\"&gt;\n            text1&lt;b&gt;bold&lt;/b&gt;\n        &lt;/child&gt;\n    &lt;/element&gt;\n    &lt;element id=\"id2\"&gt;\n        &lt;child attribute=\"value2\"&gt;\n            text2\n            &lt;x:childX xmlns:x=\"http://x.example.com/x\"&gt;\n            &lt;!-- comment --&gt;\n                yet more&lt;b i=\"i\" x:i=\"x-i\" &gt;&lt;/b&gt;\n            &lt;/x:childX&gt;\n        &lt;/child&gt;\n    &lt;/element&gt;\n&lt;/root&gt;\n</code></pre>\n\n<p>This is the corresponding output file:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;child attribute=\"value1\"&gt;\n            text1&lt;b&gt;bold&lt;/b&gt;\n        &lt;/child&gt;&lt;child attribute=\"value2\"&gt;\n            text2\n            &lt;x:childX xmlns:x=\"http://x.example.com/x\"&gt;\n            &lt;!-- comment --&gt;\n                yet more&lt;b i=\"i\" x:i=\"x-i\" /&gt;\n            &lt;/x:childX&gt;\n        &lt;/child&gt;\n</code></pre>\n\n<p>The unusual formatting is a result of skipping the text nodes containing newlines outside the <code>child</code> elements.</p>\n"}],"owner":{"account_id":117054,"reputation":921,"user_id":306708,"accept_rate":100,"display_name":"user306708"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9549,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"accepted_answer_id":2773762,"answer_count":7,"score":9,"last_activity_date":1642202735,"creation_date":1273067170,"question_id":2773733,"body_markdown":"As the title says it, I have a huge xml file (GBs)  \r\n\r\n    &lt;root&gt;  \r\n    &lt;keep&gt;  \r\n       &lt;stuff&gt;  ...  &lt;/stuff&gt;  \r\n       &lt;morestuff&gt; ... &lt;/morestuff&gt;  \r\n    &lt;/keep&gt;  \r\n    &lt;discard&gt;  \r\n       &lt;stuff&gt;  ...  &lt;/stuff&gt;  \r\n       &lt;morestuff&gt; ... &lt;/morestuff&gt;\r\n    &lt;/discard&gt;  \r\n    &lt;/root&gt;  \r\n\r\nand I&#39;d like to transform it into a much smaller one which retains only a few of the elements.   \r\nMy parser should do the following:   \r\n1. Parse through the file until a relevant element starts.  \r\n2. Copy the whole relevant element (with children) to the output file. go to 1.  \r\n\r\nstep 1 is easy with SAX and impossible for DOM-parsers.  \r\nstep 2 is annoying with SAX, but easy with the DOM-Parser or XSLT.\r\n\r\nso what? - is there a neat way to combine SAX and DOM-Parser to do the task?\r\n\r\n\r\n","title":"How to transform huge xml files in java?","body":"<p>As the title says it, I have a huge xml file (GBs)  </p>\n\n<pre><code>&lt;root&gt;  \n&lt;keep&gt;  \n   &lt;stuff&gt;  ...  &lt;/stuff&gt;  \n   &lt;morestuff&gt; ... &lt;/morestuff&gt;  \n&lt;/keep&gt;  \n&lt;discard&gt;  \n   &lt;stuff&gt;  ...  &lt;/stuff&gt;  \n   &lt;morestuff&gt; ... &lt;/morestuff&gt;\n&lt;/discard&gt;  \n&lt;/root&gt;  \n</code></pre>\n\n<p>and I'd like to transform it into a much smaller one which retains only a few of the elements.<br>\nMy parser should do the following:<br>\n1. Parse through the file until a relevant element starts.<br>\n2. Copy the whole relevant element (with children) to the output file. go to 1.  </p>\n\n<p>step 1 is easy with SAX and impossible for DOM-parsers.<br>\nstep 2 is annoying with SAX, but easy with the DOM-Parser or XSLT.</p>\n\n<p>so what? - is there a neat way to combine SAX and DOM-Parser to do the task?</p>\n"},{"tags":["java","spring-security","oauth-2.0","spring-security-oauth2"],"answers":[{"tags":[],"owner":{"account_id":21488921,"reputation":4715,"user_id":15835039,"display_name":"Steve Riesenberg"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1642201643,"creation_date":1642201643,"answer_id":70717499,"question_id":70717354,"body_markdown":"Yes, you can have different expiration times per client. You would use the `tokenSettings` of each `RegisteredClient`, as in the following example:\r\n\r\n```java\r\nRegisteredClient registeredClient = RegisteredClient.withId(UUID.randomUUID().toString())\r\n\t\t\t\t.clientId(&quot;messaging-client&quot;)\r\n\t\t\t\t.clientSecret(&quot;{noop}secret&quot;)\r\n\t\t\t\t.clientAuthenticationMethod(ClientAuthenticationMethod.CLIENT_SECRET_BASIC)\r\n\t\t\t\t.authorizationGrantType(AuthorizationGrantType.AUTHORIZATION_CODE)\r\n\t\t\t\t.authorizationGrantType(AuthorizationGrantType.REFRESH_TOKEN)\r\n\t\t\t\t.authorizationGrantType(AuthorizationGrantType.CLIENT_CREDENTIALS)\r\n\t\t\t\t.redirectUri(&quot;http://127.0.0.1:8080/login/oauth2/code/messaging-client-oidc&quot;)\r\n\t\t\t\t.redirectUri(&quot;http://127.0.0.1:8080/authorized&quot;)\r\n\t\t\t\t.scope(OidcScopes.OPENID)\r\n\t\t\t\t.scope(&quot;message.read&quot;)\r\n\t\t\t\t.scope(&quot;message.write&quot;)\r\n\t\t\t\t.tokenSettings(TokenSettings.builder()\r\n\t\t\t\t\t\t.accessTokenTimeToLive(Duration.ofMinutes(5))\r\n\t\t\t\t\t\t.refreshTokenTimeToLive(Duration.ofHours(2))\r\n\t\t\t\t\t\t.build())\r\n\t\t\t\t.clientSettings(ClientSettings.builder().requireAuthorizationConsent(true).build())\r\n\t\t\t\t.build();\r\n```\r\n\r\nSee the [sample config](https://github.com/spring-projects/spring-authorization-server/blob/main/samples/default-authorizationserver/src/main/java/sample/config/AuthorizationServerConfig.java) for full context.","title":"OAuth2 different token expiration time per client","body":"<p>Yes, you can have different expiration times per client. You would use the <code>tokenSettings</code> of each <code>RegisteredClient</code>, as in the following example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>RegisteredClient registeredClient = RegisteredClient.withId(UUID.randomUUID().toString())\n                .clientId(&quot;messaging-client&quot;)\n                .clientSecret(&quot;{noop}secret&quot;)\n                .clientAuthenticationMethod(ClientAuthenticationMethod.CLIENT_SECRET_BASIC)\n                .authorizationGrantType(AuthorizationGrantType.AUTHORIZATION_CODE)\n                .authorizationGrantType(AuthorizationGrantType.REFRESH_TOKEN)\n                .authorizationGrantType(AuthorizationGrantType.CLIENT_CREDENTIALS)\n                .redirectUri(&quot;http://127.0.0.1:8080/login/oauth2/code/messaging-client-oidc&quot;)\n                .redirectUri(&quot;http://127.0.0.1:8080/authorized&quot;)\n                .scope(OidcScopes.OPENID)\n                .scope(&quot;message.read&quot;)\n                .scope(&quot;message.write&quot;)\n                .tokenSettings(TokenSettings.builder()\n                        .accessTokenTimeToLive(Duration.ofMinutes(5))\n                        .refreshTokenTimeToLive(Duration.ofHours(2))\n                        .build())\n                .clientSettings(ClientSettings.builder().requireAuthorizationConsent(true).build())\n                .build();\n</code></pre>\n<p>See the <a href=\"https://github.com/spring-projects/spring-authorization-server/blob/main/samples/default-authorizationserver/src/main/java/sample/config/AuthorizationServerConfig.java\" rel=\"noreferrer\">sample config</a> for full context.</p>\n"}],"owner":{"account_id":4706918,"reputation":764,"user_id":3808721,"display_name":"Vishal"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2038,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":70717499,"answer_count":1,"score":1,"last_activity_date":1642201643,"creation_date":1642200361,"question_id":70717354,"body_markdown":"I am using [spring-security-oauth2][1] to implement my OAuth2 Authorization server. spring-security-oauth2 is going away and I understand I need to replace it with [spring-authorization-server][2]\r\n\r\n**Question:**\r\nIs it possible to have different token-expiry-time for different clients (here client represents client-id/client-secret pair)?\r\n\r\nIf Yes, can you please share documentation/sample code around `spring-authorization-server`?\r\n\r\nIf no, is it a limitation of spring-authorization-server OR it is not allowed by OAuth2 spec?\r\n\r\n(To clarify, I am NOT saying that it was possible in spring-security-oauth2, if it was I would like to know as well)\r\n\r\n  [1]: https://spring.io/projects/spring-security-oauth\r\n  [2]: https://github.com/spring-projects/spring-authorization-server","title":"OAuth2 different token expiration time per client","body":"<p>I am using <a href=\"https://spring.io/projects/spring-security-oauth\" rel=\"nofollow noreferrer\">spring-security-oauth2</a> to implement my OAuth2 Authorization server. spring-security-oauth2 is going away and I understand I need to replace it with <a href=\"https://github.com/spring-projects/spring-authorization-server\" rel=\"nofollow noreferrer\">spring-authorization-server</a></p>\n<p><strong>Question:</strong>\nIs it possible to have different token-expiry-time for different clients (here client represents client-id/client-secret pair)?</p>\n<p>If Yes, can you please share documentation/sample code around <code>spring-authorization-server</code>?</p>\n<p>If no, is it a limitation of spring-authorization-server OR it is not allowed by OAuth2 spec?</p>\n<p>(To clarify, I am NOT saying that it was possible in spring-security-oauth2, if it was I would like to know as well)</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":41594,"reputation":152717,"user_id":120955,"accept_rate":88,"display_name":"StriplingWarrior"},"score":2,"creation_date":1642200175,"post_id":70717298,"comment_id":125016682,"body_markdown":"Read up more on the `while` loop. Where you&#39;ve got `true` right now, you can replace that with a condition that will become false when you&#39;re ready to stop repeating.","body":"Read up more on the <code>while</code> loop. Where you&#39;ve got <code>true</code> right now, you can replace that with a condition that will become false when you&#39;re ready to stop repeating."},{"owner":{"account_id":969721,"reputation":344518,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1642200361,"post_id":70717298,"comment_id":125016737,"body_markdown":"See [The while and do-while Statements](https://docs.oracle.com/javase/tutorial/java/nutsandbolts/while.html) for more details","body":"See <a href=\"https://docs.oracle.com/javase/tutorial/java/nutsandbolts/while.html\" rel=\"nofollow noreferrer\">The while and do-while Statements</a> for more details"}],"answers":[{"tags":[],"owner":{"account_id":2174712,"reputation":498,"user_id":2039591,"accept_rate":88,"display_name":"user007"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1642200723,"creation_date":1642200373,"answer_id":70717355,"question_id":70717298,"body_markdown":"You could control your loop with a boolean variable - desiredAnswer in this case:\r\n\r\n    boolean desiredAnswer = false;\r\n    while(!desiredAnswer)\r\n    {\r\n        //shows the options the player can pick\r\n        System.out.println(&quot;Start Game: 1&quot;);\r\n        System.out.println(&quot;Close Game: 2&quot;);\r\n        String choice = input.nextLine();\r\n    \r\n        switch(choice)\r\n        {\r\n            case &quot;1&quot;: Variables.clear(); introduction(); desiredAnswer = true; break;\r\n            case &quot;2&quot;: System.exit(0);\r\n            default: Variables.invalidAnswer(); Variables.clear();\r\n        }\r\n    }\r\n\r\n\r\n\r\nwhile loop works only when the expression returns true, so negating it would cause breaking the loop.","title":"Can I repeat a section of code until I get a desired answer","body":"<p>You could control your loop with a boolean variable - desiredAnswer in this case:</p>\n<pre><code>boolean desiredAnswer = false;\nwhile(!desiredAnswer)\n{\n    //shows the options the player can pick\n    System.out.println(&quot;Start Game: 1&quot;);\n    System.out.println(&quot;Close Game: 2&quot;);\n    String choice = input.nextLine();\n\n    switch(choice)\n    {\n        case &quot;1&quot;: Variables.clear(); introduction(); desiredAnswer = true; break;\n        case &quot;2&quot;: System.exit(0);\n        default: Variables.invalidAnswer(); Variables.clear();\n    }\n}\n</code></pre>\n<p>while loop works only when the expression returns true, so negating it would cause breaking the loop.</p>\n"},{"tags":[],"owner":{"account_id":13848741,"reputation":10825,"user_id":9997212,"display_name":"enzo"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1642200562,"creation_date":1642200562,"answer_id":70717378,"question_id":70717298,"body_markdown":"Doing a `break` inside a switch-block will break the switch-block, not the while-loop. To break the outer while-loop, you can use a label:\r\n\r\n```java\r\nimport java.util.Scanner;\r\n\r\nclass Program {\r\n    public static void main(String[] args) {\r\n        Scanner input = new Scanner(System.in);\r\n        inputLoop: while (true) {\r\n            System.out.println(&quot;Start Game: 1&quot;);\r\n            System.out.println(&quot;Close Game: 2&quot;);\r\n            String choice = input.nextLine();\r\n        \r\n            switch(choice)\r\n            {\r\n                case &quot;1&quot;: {\r\n                    // Start the game\r\n                    System.out.println(&quot;Game started&quot;);\r\n                    break inputLoop;\r\n                }\r\n                case &quot;2&quot;: {\r\n                    // End the game\r\n                    System.out.println(&quot;Game finished&quot;);\r\n                    break inputLoop;\r\n                }\r\n                default: {\r\n                    // Do nothing (the loop will be repeated)\r\n                    System.out.println(&quot;Invalid answer&quot;);\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n```","title":"Can I repeat a section of code until I get a desired answer","body":"<p>Doing a <code>break</code> inside a switch-block will break the switch-block, not the while-loop. To break the outer while-loop, you can use a label:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.Scanner;\n\nclass Program {\n    public static void main(String[] args) {\n        Scanner input = new Scanner(System.in);\n        inputLoop: while (true) {\n            System.out.println(&quot;Start Game: 1&quot;);\n            System.out.println(&quot;Close Game: 2&quot;);\n            String choice = input.nextLine();\n        \n            switch(choice)\n            {\n                case &quot;1&quot;: {\n                    // Start the game\n                    System.out.println(&quot;Game started&quot;);\n                    break inputLoop;\n                }\n                case &quot;2&quot;: {\n                    // End the game\n                    System.out.println(&quot;Game finished&quot;);\n                    break inputLoop;\n                }\n                default: {\n                    // Do nothing (the loop will be repeated)\n                    System.out.println(&quot;Invalid answer&quot;);\n                }\n            }\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":969721,"reputation":344518,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1642200932,"creation_date":1642200932,"answer_id":70717433,"question_id":70717298,"body_markdown":"I&#39;m always curious as to why people seem to forget that a `do-while` actually exists.  Consider for a moment, the overall requirement - you must perform the loop at least once, so, we don&#39;t care about the exit condition until the end of the loop, for example...\r\n\r\n    String exitOption = &quot;2&quot;;\r\n    String choice = null;\r\n    do {\r\n        System.out.println(&quot;Start Game: 1&quot;);\r\n        System.out.println(&quot;Close Game: 2&quot;);\r\n        choice = input.nextLine();\r\n\r\n        switch (choice) {\r\n            case &quot;1&quot;:\r\n                Variables.clear();\r\n                introduction();\r\n                break;\r\n            default:\r\n                Variables.invalidAnswer();\r\n        }\r\n    } while (!exitOption.equals(choice));\r\n\r\nHere, I&#39;m assuming you only ever want to exit the loop when the user selects `2`, just beware of that\r\n\r\nFlow control is a pretty basic concept of programming, you should take a closer look up:\r\n\r\n* [Control Flow Statements](https://docs.oracle.com/javase/tutorial/java/nutsandbolts/flow.html)\r\n* [The while and do-while Statements](https://docs.oracle.com/javase/tutorial/java/nutsandbolts/while.html)","title":"Can I repeat a section of code until I get a desired answer","body":"<p>I'm always curious as to why people seem to forget that a <code>do-while</code> actually exists.  Consider for a moment, the overall requirement - you must perform the loop at least once, so, we don't care about the exit condition until the end of the loop, for example...</p>\n<pre><code>String exitOption = &quot;2&quot;;\nString choice = null;\ndo {\n    System.out.println(&quot;Start Game: 1&quot;);\n    System.out.println(&quot;Close Game: 2&quot;);\n    choice = input.nextLine();\n\n    switch (choice) {\n        case &quot;1&quot;:\n            Variables.clear();\n            introduction();\n            break;\n        default:\n            Variables.invalidAnswer();\n    }\n} while (!exitOption.equals(choice));\n</code></pre>\n<p>Here, I'm assuming you only ever want to exit the loop when the user selects <code>2</code>, just beware of that</p>\n<p>Flow control is a pretty basic concept of programming, you should take a closer look up:</p>\n<ul>\n<li><a href=\"https://docs.oracle.com/javase/tutorial/java/nutsandbolts/flow.html\" rel=\"nofollow noreferrer\">Control Flow Statements</a></li>\n<li><a href=\"https://docs.oracle.com/javase/tutorial/java/nutsandbolts/while.html\" rel=\"nofollow noreferrer\">The while and do-while Statements</a></li>\n</ul>\n"}],"owner":{"account_id":23696471,"reputation":1,"user_id":17720128,"display_name":"Logan.Ferris"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":50,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1642200932,"creation_date":1642199998,"question_id":70717298,"body_markdown":"so I&#39;ve been learning java in my CS class at my high school, and I decided to remake a game that was my final project last year and add a bit more to it. \r\n\r\nMy problem is that I have the player input a number in order to make a specific choice, but if they input an invalid option, the code just ends, I&#39;ve found a user with a similar problem [here,](https://stackoverflow.com/questions/32812722/restarting-program-from-a-certain-point-after-an-if) but they are using if/else statements, and I&#39;m using a switch statement\r\n```\r\n//shows the options the player can pick\r\n    System.out.println(&quot;Start Game: 1&quot;);\r\n    System.out.println(&quot;Close Game: 2&quot;);\r\n    String choice = input.nextLine();\r\n\r\n    switch(choice)\r\n    {\r\n        case &quot;1&quot;: Variables.clear(); introduction(); break;\r\n        case &quot;2&quot;: System.exit(0);\r\n        default: Variables.invalidAnswer();\r\n    }\r\n\r\npublic static void introduction()\r\n    {\r\n        System.out.println(&quot;test&quot;);\r\n    }\r\n```\r\n\r\nOne of the answers was to try using a while(true) loop, which I tried\r\n\r\n```\r\nwhile(true)\r\n{\r\n    //shows the options the player can pick\r\n    System.out.println(&quot;Start Game: 1&quot;);\r\n    System.out.println(&quot;Close Game: 2&quot;);\r\n    String choice = input.nextLine();\r\n\r\n    switch(choice)\r\n    {\r\n        case &quot;1&quot;: Variables.clear(); introduction(); break;\r\n        case &quot;2&quot;: System.exit(0);\r\n        default: Variables.invalidAnswer(); Variables.clear();\r\n    }\r\n}\r\n\r\n```\r\nbut when I do that, it just loops no matter what, I thought about adding another break statement after case &quot;1&quot;, but I realized that wouldn&#39;t work. So I was wondering if there was a way to be able to make this work, or if there was a solution like this that works with a switch statement, any advice would be great, thanks.","title":"Can I repeat a section of code until I get a desired answer","body":"<p>so I've been learning java in my CS class at my high school, and I decided to remake a game that was my final project last year and add a bit more to it.</p>\n<p>My problem is that I have the player input a number in order to make a specific choice, but if they input an invalid option, the code just ends, I've found a user with a similar problem <a href=\"https://stackoverflow.com/questions/32812722/restarting-program-from-a-certain-point-after-an-if\">here,</a> but they are using if/else statements, and I'm using a switch statement</p>\n<pre><code>//shows the options the player can pick\n    System.out.println(&quot;Start Game: 1&quot;);\n    System.out.println(&quot;Close Game: 2&quot;);\n    String choice = input.nextLine();\n\n    switch(choice)\n    {\n        case &quot;1&quot;: Variables.clear(); introduction(); break;\n        case &quot;2&quot;: System.exit(0);\n        default: Variables.invalidAnswer();\n    }\n\npublic static void introduction()\n    {\n        System.out.println(&quot;test&quot;);\n    }\n</code></pre>\n<p>One of the answers was to try using a while(true) loop, which I tried</p>\n<pre><code>while(true)\n{\n    //shows the options the player can pick\n    System.out.println(&quot;Start Game: 1&quot;);\n    System.out.println(&quot;Close Game: 2&quot;);\n    String choice = input.nextLine();\n\n    switch(choice)\n    {\n        case &quot;1&quot;: Variables.clear(); introduction(); break;\n        case &quot;2&quot;: System.exit(0);\n        default: Variables.invalidAnswer(); Variables.clear();\n    }\n}\n\n</code></pre>\n<p>but when I do that, it just loops no matter what, I thought about adding another break statement after case &quot;1&quot;, but I realized that wouldn't work. So I was wondering if there was a way to be able to make this work, or if there was a solution like this that works with a switch statement, any advice would be great, thanks.</p>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":246313,"reputation":10189,"user_id":520394,"display_name":"barti_ddu"},"score":0,"creation_date":1642195568,"post_id":70716593,"comment_id":125015551,"body_markdown":"You may need either to add `@Configuration` annotation to `ProductService` class or enable it before application run with `@EnableConfigurationProperties` annotation. Also I would move the property-related part out of `@Service` into separate `POJO`.","body":"You may need either to add <code>@Configuration</code> annotation to <code>ProductService</code> class or enable it before application run with <code>@EnableConfigurationProperties</code> annotation. Also I would move the property-related part out of <code>@Service</code> into separate <code>POJO</code>."},{"owner":{"account_id":23198799,"reputation":37,"user_id":17293984,"display_name":"Marin8"},"score":0,"creation_date":1642196270,"post_id":70716593,"comment_id":125015756,"body_markdown":"@barti_ddu I&#39;ve tried adding `@EnableConfigurationProperties` and move reading part to other `bean` but it didn&#39;t work. I&#39;d like to do it in the same service than making other bean or `POJO` fot that","body":"@barti_ddu I&#39;ve tried adding <code>@EnableConfigurationProperties</code> and move reading part to other <code>bean</code> but it didn&#39;t work. I&#39;d like to do it in the same service than making other bean or <code>POJO</code> fot that"},{"owner":{"account_id":9763630,"reputation":16595,"user_id":7237884,"display_name":"Panagiotis Bougioukos"},"score":1,"creation_date":1642196855,"post_id":70716593,"comment_id":125015948,"body_markdown":"@barti_ddu `@Configuration` works like `@Service` in order to create a spring bean. So this is not the cause of the error. Of course the best practice would not be the `@Service` but this is not why the properties are not loaded. Fixing what I describe in my answer should fix the issue","body":"@barti_ddu <code>@Configuration</code> works like <code>@Service</code> in order to create a spring bean. So this is not the cause of the error. Of course the best practice would not be the <code>@Service</code> but this is not why the properties are not loaded. Fixing what I describe in my answer should fix the issue"},{"owner":{"account_id":246313,"reputation":10189,"user_id":520394,"display_name":"barti_ddu"},"score":1,"creation_date":1642197714,"post_id":70716593,"comment_id":125016193,"body_markdown":"@PanagiotisBougioukos: can&#39;t believe I&#39;ve missed that, kudos to You!","body":"@PanagiotisBougioukos: can&#39;t believe I&#39;ve missed that, kudos to You!"}],"answers":[{"tags":[],"owner":{"account_id":9763630,"reputation":16595,"user_id":7237884,"display_name":"Panagiotis Bougioukos"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1642199124,"creation_date":1642196697,"answer_id":70716866,"question_id":70716593,"body_markdown":"Considering that you use the `prefix = &quot;product-service&quot;` \r\n\r\nyou should declare your class fields as following.\r\n  \r\n        private double first;\r\n        private double second;\r\n        private double third;\r\n\r\nYou should also update getters and setters.\r\n\r\nYou also have another error in your code as well\r\n\r\n    private List&lt;ProductDTO&gt; productList = Arrays.asList(\r\n                new ProductDTO(1,&quot;Tomb Raider&quot;,first),\r\n                new ProductDTO(2,&quot;10000 rp to lol&quot;,second),\r\n                new ProductDTO(3,&quot;2k valorant points&quot;,third)\r\n        );\r\n\r\nThis field is initialized when your class is initialized. But Spring initializes your bean with a proxy. So when the class is initialized your `productList` will have `0` values for `first`, `second`,`third`.\r\n\r\nIf you wish this to work you should replace \r\n\r\n    public List&lt;ProductDTO&gt; findAllProducts() {\r\n            return productList;\r\n        }\r\n\r\nwith\r\n\r\n    public List&lt;ProductDTO&gt; findAllProducts() {\r\n            return Arrays.asList(\r\n                    new ProductDTO(1,&quot;Tomb Raider&quot;,first),\r\n                    new ProductDTO(2,&quot;10000 rp to lol&quot;,second),\r\n                    new ProductDTO(3,&quot;2k valorant points&quot;,third)\r\n            );\r\n        }\r\n\r\n","title":"Springboot can&#39;t read values from properties file","body":"<p>Considering that you use the <code>prefix = &quot;product-service&quot;</code></p>\n<p>you should declare your class fields as following.</p>\n<pre><code>    private double first;\n    private double second;\n    private double third;\n</code></pre>\n<p>You should also update getters and setters.</p>\n<p>You also have another error in your code as well</p>\n<pre><code>private List&lt;ProductDTO&gt; productList = Arrays.asList(\n            new ProductDTO(1,&quot;Tomb Raider&quot;,first),\n            new ProductDTO(2,&quot;10000 rp to lol&quot;,second),\n            new ProductDTO(3,&quot;2k valorant points&quot;,third)\n    );\n</code></pre>\n<p>This field is initialized when your class is initialized. But Spring initializes your bean with a proxy. So when the class is initialized your <code>productList</code> will have <code>0</code> values for <code>first</code>, <code>second</code>,<code>third</code>.</p>\n<p>If you wish this to work you should replace</p>\n<pre><code>public List&lt;ProductDTO&gt; findAllProducts() {\n        return productList;\n    }\n</code></pre>\n<p>with</p>\n<pre><code>public List&lt;ProductDTO&gt; findAllProducts() {\n        return Arrays.asList(\n                new ProductDTO(1,&quot;Tomb Raider&quot;,first),\n                new ProductDTO(2,&quot;10000 rp to lol&quot;,second),\n                new ProductDTO(3,&quot;2k valorant points&quot;,third)\n        );\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1622089,"reputation":17709,"user_id":1498427,"accept_rate":89,"display_name":"catch23"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1642200121,"creation_date":1642198382,"answer_id":70717098,"question_id":70716593,"body_markdown":"Don&#39;t mix your configuration properties with the service layer.\r\n\r\nYou have a few ways:\r\n\r\n- create a separate configuration class:\r\n```\r\n@ConfigurationProperties(&quot;product-service&quot;)\r\npublic class ProductProperties {\r\n    private Double first;\r\n    private Double second;\r\n    private Double third;\r\n    // getters &amp; setters\r\n}\r\n```\r\n\r\nAnd use it directly at your service class:\r\n\r\n```\r\nclass ProductService {\r\n    private ProductProperties properties;\r\n\r\n    // use at code: properties.getFirst()\r\n}\r\n```\r\n\r\ndepending on your Spring Boot version you may need `@EnableConfigurationProperties({ProductProperties.class})` under any class marked with `@Configuration`\r\n\r\n- use `@Value`:\r\n\r\n```\r\nclass ProductService {\r\n    @Value(&quot;${product-service.first}&quot;)\r\n    private double first;\r\n    //...\r\n}\r\n```\r\n\r\nYou should set to your main class:\r\n\r\nUseful links: \r\n- [Guide to @ConfigurationProperties in Spring Boot](https://www.baeldung.com/configuration-properties-in-spring-boot)\r\n- [Quick Guide to Spring @Value](https://www.baeldung.com/spring-value-annotation)\r\n","title":"Springboot can&#39;t read values from properties file","body":"<p>Don't mix your configuration properties with the service layer.</p>\n<p>You have a few ways:</p>\n<ul>\n<li>create a separate configuration class:</li>\n</ul>\n<pre><code>@ConfigurationProperties(&quot;product-service&quot;)\npublic class ProductProperties {\n    private Double first;\n    private Double second;\n    private Double third;\n    // getters &amp; setters\n}\n</code></pre>\n<p>And use it directly at your service class:</p>\n<pre><code>class ProductService {\n    private ProductProperties properties;\n\n    // use at code: properties.getFirst()\n}\n</code></pre>\n<p>depending on your Spring Boot version you may need <code>@EnableConfigurationProperties({ProductProperties.class})</code> under any class marked with <code>@Configuration</code></p>\n<ul>\n<li>use <code>@Value</code>:</li>\n</ul>\n<pre><code>class ProductService {\n    @Value(&quot;${product-service.first}&quot;)\n    private double first;\n    //...\n}\n</code></pre>\n<p>You should set to your main class:</p>\n<p>Useful links:</p>\n<ul>\n<li><a href=\"https://www.baeldung.com/configuration-properties-in-spring-boot\" rel=\"nofollow noreferrer\">Guide to @ConfigurationProperties in Spring Boot</a></li>\n<li><a href=\"https://www.baeldung.com/spring-value-annotation\" rel=\"nofollow noreferrer\">Quick Guide to Spring @Value</a></li>\n</ul>\n"}],"owner":{"account_id":23198799,"reputation":37,"user_id":17293984,"display_name":"Marin8"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2193,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":70716866,"answer_count":2,"score":2,"last_activity_date":1642200587,"creation_date":1642194945,"question_id":70716593,"body_markdown":"I have the following problem: \r\nI&#39;ve wanted to read some values (the price of products) from `.properties` file. \r\n\r\nHowever I&#39;m trying, It&#39;s always getting `0.00` as a value.\r\n\r\nThis is my service bean, which in I want to create a product list:\r\n\r\n```\r\n@Service\r\n@ConfigurationProperties(prefix = &quot;product-service&quot;)\r\npublic class ProductService {\r\n\r\n    private double first;\r\n    private double second;\r\n    private double third;\r\n\r\n    public double getFirst() {\r\n        return first;\r\n    }\r\n\r\n    public void setFirst(double first) {\r\n        this.first = first;\r\n    }\r\n\r\n    public double getSecond() {\r\n        return second;\r\n    }\r\n\r\n    public void setSecond(double second) {\r\n        this.second = second;\r\n    }\r\n\r\n    public double getThird() {\r\n        return third;\r\n    }\r\n\r\n    public void setThird(double third) {\r\n        this.third = third;\r\n    }\r\n\r\n    private List&lt;ProductDTO&gt; productList = Arrays.asList(\r\n            new ProductDTO(1, &quot;Tomb Raider&quot;, first),\r\n            new ProductDTO(2, &quot;10000 rp to lol&quot;, second),\r\n            new ProductDTO(3, &quot;2k valorant points&quot;, third)\r\n    );\r\n\r\n    public List&lt;ProductDTO&gt; findAllProducts() {\r\n        return productList;\r\n    }\r\n}\r\n\r\n```\r\n\r\nAnd this is the property file:\r\n\r\n```\r\nproduct-service.first = 225.00\r\nproduct-service.second = 320.50\r\nproduct-service.third = 150.99\r\n```","title":"Springboot can&#39;t read values from properties file","body":"<p>I have the following problem:\nI've wanted to read some values (the price of products) from <code>.properties</code> file.</p>\n<p>However I'm trying, It's always getting <code>0.00</code> as a value.</p>\n<p>This is my service bean, which in I want to create a product list:</p>\n<pre><code>@Service\n@ConfigurationProperties(prefix = &quot;product-service&quot;)\npublic class ProductService {\n\n    private double first;\n    private double second;\n    private double third;\n\n    public double getFirst() {\n        return first;\n    }\n\n    public void setFirst(double first) {\n        this.first = first;\n    }\n\n    public double getSecond() {\n        return second;\n    }\n\n    public void setSecond(double second) {\n        this.second = second;\n    }\n\n    public double getThird() {\n        return third;\n    }\n\n    public void setThird(double third) {\n        this.third = third;\n    }\n\n    private List&lt;ProductDTO&gt; productList = Arrays.asList(\n            new ProductDTO(1, &quot;Tomb Raider&quot;, first),\n            new ProductDTO(2, &quot;10000 rp to lol&quot;, second),\n            new ProductDTO(3, &quot;2k valorant points&quot;, third)\n    );\n\n    public List&lt;ProductDTO&gt; findAllProducts() {\n        return productList;\n    }\n}\n\n</code></pre>\n<p>And this is the property file:</p>\n<pre><code>product-service.first = 225.00\nproduct-service.second = 320.50\nproduct-service.third = 150.99\n</code></pre>\n"},{"tags":["java","null"],"comments":[{"owner":{"account_id":247613,"reputation":284090,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":0,"creation_date":1642205000,"post_id":70717266,"comment_id":125017602,"body_markdown":"Possible duplicate of [What is a debugger](https://stackoverflow.com/questions/25385173/what-is-a-debugger-and-how-can-it-help-me-diagnose-problems)","body":"Possible duplicate of <a href=\"https://stackoverflow.com/questions/25385173/what-is-a-debugger-and-how-can-it-help-me-diagnose-problems\">What is a debugger</a>"},{"owner":{"account_id":14685418,"reputation":1,"user_id":11717481,"display_name":"user11717481"},"score":0,"creation_date":1642244606,"post_id":70717266,"comment_id":125022583,"body_markdown":"Does this answer your question? [What is a debugger and how can it help me diagnose problems?](https://stackoverflow.com/questions/25385173/what-is-a-debugger-and-how-can-it-help-me-diagnose-problems)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/25385173/what-is-a-debugger-and-how-can-it-help-me-diagnose-problems\">What is a debugger and how can it help me diagnose problems?</a>"}],"answers":[{"tags":[],"owner":{"account_id":23943737,"reputation":312,"user_id":17936388,"display_name":"esramish"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1642200177,"creation_date":1642200177,"answer_id":70717322,"question_id":70717266,"body_markdown":"When you instantiate a new array as you did for `namesWomen` and `namesMen`, all of its elements are initialized to `null`. It looks like, in your code, there&#39;s only one place where you&#39;re changing a value within `namesWomen`: \r\n\r\n```\r\nnamesWomen[namesWomen.length- 1] = name;\r\n```\r\n\r\nand one place where you&#39;re changing a value within `namesMen`:\r\n\r\n```\r\nnamesMen[namesMen.length- 1] = name;\r\n```\r\n\r\nBoth times, you&#39;re only changing the last element in the list, so all of the other elements remain `null` throughout the entire program.","title":"Printed result are null","body":"<p>When you instantiate a new array as you did for <code>namesWomen</code> and <code>namesMen</code>, all of its elements are initialized to <code>null</code>. It looks like, in your code, there's only one place where you're changing a value within <code>namesWomen</code>:</p>\n<pre><code>namesWomen[namesWomen.length- 1] = name;\n</code></pre>\n<p>and one place where you're changing a value within <code>namesMen</code>:</p>\n<pre><code>namesMen[namesMen.length- 1] = name;\n</code></pre>\n<p>Both times, you're only changing the last element in the list, so all of the other elements remain <code>null</code> throughout the entire program.</p>\n"}],"owner":{"account_id":23944100,"reputation":1,"user_id":17936698,"display_name":"Pietia"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":32,"favorite_count":0,"down_vote_count":4,"up_vote_count":0,"answer_count":1,"score":-4,"last_activity_date":1642200177,"creation_date":1642199752,"question_id":70717266,"body_markdown":"This is excercise from my classes. I passed but I&#39;m receiving null from last println&#39;s. Could you please help with examples? I want to understand code rather than make it work ;)\r\n\r\n   Thank you!\r\n\r\n    import java.io.IOException;\r\n    import java.util.Arrays;\r\n    import java.util.Scanner;\r\n    public class Main {\r\n    \r\n        public static void main(String[] args) throws IOException {\r\n            String[] namesWomen = new String[5];\r\n            String[] namesMen = new String[5];\r\n            String[] names = new String[5];\r\n            Scanner reading = new Scanner(System.in);\r\n    \r\n            for (int i = 0; i &lt; 5; i++) {\r\n                System.out.println(&quot;Enter the name: &quot;);\r\n                names[i] = reading.nextLine();\r\n                System.out.println(&quot;Thank you!&quot;);\r\n    \r\n            }\r\n            for(int i=0; i&lt;5;i++) {\r\n                var name = names[i];\r\n                if (name.charAt(name.length() - 1) == &#39;a&#39;) {\r\n                    System.out.println(&quot;woman&quot;);\r\n                    namesWomen[namesWomen.length- 1] = name;\r\n                } else {\r\n                    System.out.println(&quot;men&quot;);\r\n                    namesMen[namesMen.length- 1] = name;\r\n                }\r\n            }\r\n            System.out.println(Arrays.toString(namesMen));\r\n            System.out.println(Arrays.toString(namesWomen));\r\n        }\r\n    }","title":"Printed result are null","body":"<p>This is excercise from my classes. I passed but I'm receiving null from last println's. Could you please help with examples? I want to understand code rather than make it work ;)</p>\n<p>Thank you!</p>\n<pre><code>import java.io.IOException;\nimport java.util.Arrays;\nimport java.util.Scanner;\npublic class Main {\n\n    public static void main(String[] args) throws IOException {\n        String[] namesWomen = new String[5];\n        String[] namesMen = new String[5];\n        String[] names = new String[5];\n        Scanner reading = new Scanner(System.in);\n\n        for (int i = 0; i &lt; 5; i++) {\n            System.out.println(&quot;Enter the name: &quot;);\n            names[i] = reading.nextLine();\n            System.out.println(&quot;Thank you!&quot;);\n\n        }\n        for(int i=0; i&lt;5;i++) {\n            var name = names[i];\n            if (name.charAt(name.length() - 1) == 'a') {\n                System.out.println(&quot;woman&quot;);\n                namesWomen[namesWomen.length- 1] = name;\n            } else {\n                System.out.println(&quot;men&quot;);\n                namesMen[namesMen.length- 1] = name;\n            }\n        }\n        System.out.println(Arrays.toString(namesMen));\n        System.out.println(Arrays.toString(namesWomen));\n    }\n}\n</code></pre>\n"},{"tags":["java","android","oop","polymorphism","realm"],"comments":[{"owner":{"account_id":1790714,"reputation":91128,"user_id":1631193,"accept_rate":71,"display_name":"Gabe Sechan"},"score":0,"creation_date":1436316226,"post_id":31281642,"comment_id":50556514,"body_markdown":"Something to consider-  if it doesn&#39;t support a feature you need, maybe you should use another library that does?","body":"Something to consider-  if it doesn&#39;t support a feature you need, maybe you should use another library that does?"},{"owner":{"account_id":1253566,"reputation":1651,"user_id":1213485,"display_name":"Emanuelez"},"score":0,"creation_date":1436342582,"post_id":31281642,"comment_id":50565661,"body_markdown":"You could use composition over inheritance as suggested by the Gang of Four (Design Patterns) and Joshua Bloch (Effective Java).\n\nAs a side note, we are considering allowing inheritance, but it could only be used during object modelling and not while querying, which would make it feel crippled. What&#39;s your opinion about that?","body":"You could use composition over inheritance as suggested by the Gang of Four (Design Patterns) and Joshua Bloch (Effective Java).  As a side note, we are considering allowing inheritance, but it could only be used during object modelling and not while querying, which would make it feel crippled. What&#39;s your opinion about that?"},{"owner":{"account_id":223982,"reputation":10895,"user_id":483520,"accept_rate":77,"display_name":"Nolan Amy"},"score":0,"creation_date":1436379641,"post_id":31281642,"comment_id":50591493,"body_markdown":"@Emanuelez I&#39;ve had trouble figuring out how composition would help here... are you suggesting that I split each object across two records in Realm –&#160;one for shared fields and another for type-specific fields?\n\nAs I understand the query limitations, it does sound like it would be crippling. Querying abstract models works on iOS, right? What&#39;s the issue on Android?","body":"@Emanuelez I&#39;ve had trouble figuring out how composition would help here... are you suggesting that I split each object across two records in Realm – one for shared fields and another for type-specific fields?  As I understand the query limitations, it does sound like it would be crippling. Querying abstract models works on iOS, right? What&#39;s the issue on Android?"},{"owner":{"account_id":1253566,"reputation":1651,"user_id":1213485,"display_name":"Emanuelez"},"score":0,"creation_date":1436430279,"post_id":31281642,"comment_id":50612183,"body_markdown":"No it does not work on iOS. They face the same limitations.","body":"No it does not work on iOS. They face the same limitations."},{"owner":{"account_id":223982,"reputation":10895,"user_id":483520,"accept_rate":77,"display_name":"Nolan Amy"},"score":0,"creation_date":1436468377,"post_id":31281642,"comment_id":50638355,"body_markdown":"@Emanuelez Huh. Maybe I don&#39;t understand what the query issues are... we&#39;re using model inheritance on iOS and it works as expected. Is the limitation that queries on shared fields can&#39;t return a mix of inherited types? If so, that&#39;s totally fine for our purposes: we almost always deal with one inherited type at a time; when we do need to apply an operation to all inherited types, we do a separate query for each type. Sure, it&#39;s ugly to maintain a list of the inherited types, but in practice, that&#39;s a small price to pay for having shared fields and functionality...","body":"@Emanuelez Huh. Maybe I don&#39;t understand what the query issues are... we&#39;re using model inheritance on iOS and it works as expected. Is the limitation that queries on shared fields can&#39;t return a mix of inherited types? If so, that&#39;s totally fine for our purposes: we almost always deal with one inherited type at a time; when we do need to apply an operation to all inherited types, we do a separate query for each type. Sure, it&#39;s ugly to maintain a list of the inherited types, but in practice, that&#39;s a small price to pay for having shared fields and functionality..."},{"owner":{"account_id":1253566,"reputation":1651,"user_id":1213485,"display_name":"Emanuelez"},"score":0,"creation_date":1436637046,"post_id":31281642,"comment_id":50701211,"body_markdown":"Yes iOS supports model inheritance, but it&#39;s not allowed to perform queries that span across inheritance. With composition you can achieve the same result while maintaining full composability and decent query support (especially as soon as we support back-links)","body":"Yes iOS supports model inheritance, but it&#39;s not allowed to perform queries that span across inheritance. With composition you can achieve the same result while maintaining full composability and decent query support (especially as soon as we support back-links)"},{"owner":{"account_id":223982,"reputation":10895,"user_id":483520,"accept_rate":77,"display_name":"Nolan Amy"},"score":0,"creation_date":1436656483,"post_id":31281642,"comment_id":50706146,"body_markdown":"@Emanuelez could you elaborate? How do you suggest using composition here? Using a wrapper class for each `RealmObject` subclass, such that the wrapper has-an instance of its corresponding subclass? Splitting classes with shared fields across multiple `RealmObject` subclasses [as suggested by @AliSoftware on github](https://github.com/realm/realm-java/issues/761#issuecomment-119559100) (&quot;Adding a relationship from the Dog and Cat RLMObjects to the Animal RLMObject (composition instead of inheritance)&quot;)? Something else?","body":"@Emanuelez could you elaborate? How do you suggest using composition here? Using a wrapper class for each <code>RealmObject</code> subclass, such that the wrapper has-an instance of its corresponding subclass? Splitting classes with shared fields across multiple <code>RealmObject</code> subclasses <a href=\"https://github.com/realm/realm-java/issues/761#issuecomment-119559100\" rel=\"nofollow noreferrer\">as suggested by @AliSoftware on github</a> (&quot;Adding a relationship from the Dog and Cat RLMObjects to the Animal RLMObject (composition instead of inheritance)&quot;)? Something else?"},{"owner":{"account_id":1253566,"reputation":1651,"user_id":1213485,"display_name":"Emanuelez"},"score":0,"creation_date":1436787702,"post_id":31281642,"comment_id":50742354,"body_markdown":"I mean something in the lines of:\n   `class Animal: int numberOfLegs` and\n   `class Dog: String name, Animal animal`","body":"I mean something in the lines of:    <code>class Animal: int numberOfLegs</code> and    <code>class Dog: String name, Animal animal</code>"},{"owner":{"account_id":223982,"reputation":10895,"user_id":483520,"accept_rate":77,"display_name":"Nolan Amy"},"score":0,"creation_date":1436808271,"post_id":31281642,"comment_id":50755913,"body_markdown":"@Emanuelez Okay, thanks. So if this were a SQL database, there&#39;d be a `Dog` table, a `Sparrow` table, and an `Animal` table. Each `Dog` has an `Animal`, and each `Sparrow`  has an `Animal`. The application would have to make sure to give each `Dog` or `Sparrow` created its own `Animal`, and to remove the corresponding `Animal` whenever a `Dog` or `Sparrow` is removed. Is that right?","body":"@Emanuelez Okay, thanks. So if this were a SQL database, there&#39;d be a <code>Dog</code> table, a <code>Sparrow</code> table, and an <code>Animal</code> table. Each <code>Dog</code> has an <code>Animal</code>, and each <code>Sparrow</code>  has an <code>Animal</code>. The application would have to make sure to give each <code>Dog</code> or <code>Sparrow</code> created its own <code>Animal</code>, and to remove the corresponding <code>Animal</code> whenever a <code>Dog</code> or <code>Sparrow</code> is removed. Is that right?"},{"owner":{"account_id":1253566,"reputation":1651,"user_id":1213485,"display_name":"Emanuelez"},"score":0,"creation_date":1436808509,"post_id":31281642,"comment_id":50756085,"body_markdown":"Yes, that is correct.","body":"Yes, that is correct."}],"answers":[{"tags":[],"owner":{"account_id":4286100,"reputation":4815,"user_id":3503855,"accept_rate":100,"display_name":"Anis LOUNIS aka AnixPasBesoin"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1532511858,"creation_date":1483979189,"answer_id":41552457,"question_id":31281642,"body_markdown":"I had the same issue when I found out that `realmObjects` should inherit directly form `RealmObject` class (no support for inheritance). \r\nIn order to get back the benefits of polymorphism, I considered a similar solution to yours combined with some composition tricks that would avoid me attribute duplication.\r\n\r\n&gt; &quot;Talk is cheap show me the code.&quot;\r\n\r\n# Code examples\r\n\r\n    interface IPerson {\r\n        String getName();\r\n    }\r\n\r\n    class Person extends RealmObject implements IPerson {\r\n\r\n        String name;\r\n\r\n        @Override\r\n        public String getName() {\r\n            return name;\r\n        }\r\n    }\r\n\r\n    interface IWorker extends IPerson {\r\n        int getSalary();\r\n    }\r\n\r\n    class Worker extends RealmObject implements IWorker {\r\n\r\n        Person person;\r\n        int salary;\r\n\r\n        @Override\r\n        public String getName() {\r\n            return person.getName();\r\n        }\r\n\r\n        @Override\r\n        public int getSalary() {\r\n            return salary;\r\n        }\r\n    }\r\n\r\n# Some benefits\r\n\r\nYou won&#39;t have to duplicate your attributes in each extending class.\r\n\r\nPolymorphism is back! For example, now you can simulate a cast (with getPerson() in this example).\r\n\r\n# Some limits\r\n\r\nWhen using a serialization library that uses reflection (suppose it&#39;s Gson), your serialized models will have their parents attributes embedded. Not something that you would have had if you were using classic inheritance.\r\n\r\n# Example with JSON\r\n\r\nLet&#39;s suppose John Doe is making 500$ a month. (He&#39;s a Worker and a Person right?).\r\n\r\nWith classic inheritance, John Doe would look like this:\r\n\r\n    {\r\n      &quot;name&quot;:&quot;John Doe&quot;,\r\n      &quot;salary&quot;: 500\r\n    }\r\n\r\nBut with this inheritance workaround ... :\r\n\r\n    {\r\n      &quot;person&quot; : {\r\n      &quot;name&quot;:&quot;John Doe&quot;\r\n      },\r\n      &quot;salary&quot;: 500\r\n    }\r\n\r\nHope this helps!\r\n\r\n## Note\r\n\r\nPrimaryKeys unfortunately have to be duplicated.\r\n\r\n# Bonus\r\n\r\nYou might want to check [RealmFieldNamesHelper][1], a library made by [Christian Melchior][2] &quot;to make Realm queries more type safe&quot;.\r\n\r\n  [1]: https://github.com/cmelchior/realmfieldnameshelper\r\n  [2]: https://stackoverflow.com/users/1389357/christian-melchior","title":"Sharing Realm fields on Android","body":"<p>I had the same issue when I found out that <code>realmObjects</code> should inherit directly form <code>RealmObject</code> class (no support for inheritance). \nIn order to get back the benefits of polymorphism, I considered a similar solution to yours combined with some composition tricks that would avoid me attribute duplication.</p>\n\n<blockquote>\n  <p>\"Talk is cheap show me the code.\"</p>\n</blockquote>\n\n<h1>Code examples</h1>\n\n<pre><code>interface IPerson {\n    String getName();\n}\n\nclass Person extends RealmObject implements IPerson {\n\n    String name;\n\n    @Override\n    public String getName() {\n        return name;\n    }\n}\n\ninterface IWorker extends IPerson {\n    int getSalary();\n}\n\nclass Worker extends RealmObject implements IWorker {\n\n    Person person;\n    int salary;\n\n    @Override\n    public String getName() {\n        return person.getName();\n    }\n\n    @Override\n    public int getSalary() {\n        return salary;\n    }\n}\n</code></pre>\n\n<h1>Some benefits</h1>\n\n<p>You won't have to duplicate your attributes in each extending class.</p>\n\n<p>Polymorphism is back! For example, now you can simulate a cast (with getPerson() in this example).</p>\n\n<h1>Some limits</h1>\n\n<p>When using a serialization library that uses reflection (suppose it's Gson), your serialized models will have their parents attributes embedded. Not something that you would have had if you were using classic inheritance.</p>\n\n<h1>Example with JSON</h1>\n\n<p>Let's suppose John Doe is making 500$ a month. (He's a Worker and a Person right?).</p>\n\n<p>With classic inheritance, John Doe would look like this:</p>\n\n<pre><code>{\n  \"name\":\"John Doe\",\n  \"salary\": 500\n}\n</code></pre>\n\n<p>But with this inheritance workaround ... :</p>\n\n<pre><code>{\n  \"person\" : {\n  \"name\":\"John Doe\"\n  },\n  \"salary\": 500\n}\n</code></pre>\n\n<p>Hope this helps!</p>\n\n<h2>Note</h2>\n\n<p>PrimaryKeys unfortunately have to be duplicated.</p>\n\n<h1>Bonus</h1>\n\n<p>You might want to check <a href=\"https://github.com/cmelchior/realmfieldnameshelper\" rel=\"nofollow noreferrer\">RealmFieldNamesHelper</a>, a library made by <a href=\"https://stackoverflow.com/users/1389357/christian-melchior\">Christian Melchior</a> \"to make Realm queries more type safe\".</p>\n"},{"tags":[],"owner":{"account_id":2806090,"reputation":80148,"user_id":2413303,"accept_rate":100,"display_name":"EpicPandaForce"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1523532204,"creation_date":1523532204,"answer_id":49795275,"question_id":31281642,"body_markdown":"If you use Kotlin, sharing the fields via an interface becomes even more trivial:\r\n\r\n    interface PersonBase {\r\n        var name: String?\r\n        var salary: Int\r\n    }\r\n\r\nThen\r\n\r\n    class Person: RealmObject(), PersonBase {\r\n    }","title":"Sharing Realm fields on Android","body":"<p>If you use Kotlin, sharing the fields via an interface becomes even more trivial:</p>\n\n<pre><code>interface PersonBase {\n    var name: String?\n    var salary: Int\n}\n</code></pre>\n\n<p>Then</p>\n\n<pre><code>class Person: RealmObject(), PersonBase {\n}\n</code></pre>\n"}],"owner":{"account_id":223982,"reputation":10895,"user_id":483520,"accept_rate":77,"display_name":"Nolan Amy"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1820,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":2,"score":3,"last_activity_date":1642200095,"creation_date":1436315571,"question_id":31281642,"body_markdown":"Realm on Android [doesn&#39;t support model inheritance/polymorphism][1].\r\n\r\nSo is there any way to share fields on Android? We have 5 models that all share the same synchronization-related fields and code. We use inheritance in our current SQLite models; if we switch to Realm, is our only choice to duplicate the sync fields across each of the 5 model classes?\r\n\r\nAs a workaround, I&#39;m thinking about having those classes implement a `Syncable` interface with getters and setters for the shared fields, which at least let me share sync functionality. Is there a better way?\r\n\r\nTo share sync functionality, my best guess is to make a static `Synchronizer` class and pass it `Syncable` model objects. `Synchronizer` methods will use the `Syncable` interface to operate directly on model objects&#39; shared, sync-related fields and delegate operations on type-specific fields. Alternatively, I could provide each model object its own `Synchronizer` instance...\r\n\r\nTrying to find the right way to work around the inheritance limitation is really stretching my OOP skills... help is appreciated!\r\n\r\n  [1]: https://github.com/realm/realm-java/issues/761","title":"Sharing Realm fields on Android","body":"<p>Realm on Android <a href=\"https://github.com/realm/realm-java/issues/761\" rel=\"nofollow\">doesn't support model inheritance/polymorphism</a>.</p>\n\n<p>So is there any way to share fields on Android? We have 5 models that all share the same synchronization-related fields and code. We use inheritance in our current SQLite models; if we switch to Realm, is our only choice to duplicate the sync fields across each of the 5 model classes?</p>\n\n<p>As a workaround, I'm thinking about having those classes implement a <code>Syncable</code> interface with getters and setters for the shared fields, which at least let me share sync functionality. Is there a better way?</p>\n\n<p>To share sync functionality, my best guess is to make a static <code>Synchronizer</code> class and pass it <code>Syncable</code> model objects. <code>Synchronizer</code> methods will use the <code>Syncable</code> interface to operate directly on model objects' shared, sync-related fields and delegate operations on type-specific fields. Alternatively, I could provide each model object its own <code>Synchronizer</code> instance...</p>\n\n<p>Trying to find the right way to work around the inheritance limitation is really stretching my OOP skills... help is appreciated!</p>\n"},{"tags":["java","android","inheritance","model","realm"],"comments":[{"owner":{"account_id":1489026,"reputation":3565,"user_id":1396606,"display_name":"beeender"},"score":1,"creation_date":1457319328,"post_id":35818414,"comment_id":59337751,"body_markdown":"1) The related Realm issue is https://github.com/realm/realm-java/issues/761 . I don&#39;t think inheritance can totally be replaced by composition, however it could be helpful in same cases. The `RealmObject` and `RealmList` field in a model is also typed, you cannot do `ExtendCar extendedCar; setExtendCar(NewTypeHondaCar newCar)`  2) The feature &quot;better object&quot; has already been merged to Realm&#39;s master, it will be released very soon in 0.88.0. You can try with snapshot before release. With this feature, you don&#39;t have to write any setters/getters for `RealmObject` .","body":"1) The related Realm issue is <a href=\"https://github.com/realm/realm-java/issues/761\" rel=\"nofollow noreferrer\">github.com/realm/realm-java/issues/761</a> . I don&#39;t think inheritance can totally be replaced by composition, however it could be helpful in same cases. The <code>RealmObject</code> and <code>RealmList</code> field in a model is also typed, you cannot do <code>ExtendCar extendedCar; setExtendCar(NewTypeHondaCar newCar)</code>  2) The feature &quot;better object&quot; has already been merged to Realm&#39;s master, it will be released very soon in 0.88.0. You can try with snapshot before release. With this feature, you don&#39;t have to write any setters/getters for <code>RealmObject</code> ."},{"owner":{"display_name":"user4875457"},"score":0,"creation_date":1457363336,"post_id":35818414,"comment_id":59359674,"body_markdown":"For 1) I understand that you could not do &quot; ... extend car&quot;, though you could create a car object which extends realm object and a honda object which also extends realm object. You could then create a car object which contains a honda object, and set both objects to have the same unique identifier--or @primarykey. Does this sound like a viable solution? Also for 2) that&#39;s awesome! i have been waiting for this for quite some time now.","body":"For 1) I understand that you could not do &quot; ... extend car&quot;, though you could create a car object which extends realm object and a honda object which also extends realm object. You could then create a car object which contains a honda object, and set both objects to have the same unique identifier--or @primarykey. Does this sound like a viable solution? Also for 2) that&#39;s awesome! i have been waiting for this for quite some time now."},{"owner":{"account_id":1489026,"reputation":3565,"user_id":1396606,"display_name":"beeender"},"score":0,"creation_date":1457402530,"post_id":35818414,"comment_id":59380652,"body_markdown":"For 1) I think that would work. `Honda` could have `Car` for common fields, and with the 0.88.0, `Honda` can implements some interface like `getCarProps` which could also be implemented by `Toyota`. Almost like inheritance then ;)","body":"For 1) I think that would work. <code>Honda</code> could have <code>Car</code> for common fields, and with the 0.88.0, <code>Honda</code> can implements some interface like <code>getCarProps</code> which could also be implemented by <code>Toyota</code>. Almost like inheritance then ;)"}],"answers":[{"tags":[],"owner":{"account_id":4286100,"reputation":4815,"user_id":3503855,"accept_rate":100,"display_name":"Anis LOUNIS aka AnixPasBesoin"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1566317137,"creation_date":1483979898,"answer_id":41552692,"question_id":35818414,"body_markdown":"# A workaround I&#39;ve used (in a nutshell)\r\n\r\nComposition + Interface inheritance would allow you to get some polymorphism benefits back to your realmObjects.\r\n\r\n## Some code demonstration\r\n\r\n    interface IPerson {\r\n\r\n        String getName();\r\n    }\r\n\r\n    class Person extends RealmObject implements IPerson {\r\n\r\n        String name;\r\n\r\n        @Override\r\n        public String getName() {\r\n            return name;\r\n        }\r\n    }\r\n\r\n    interface IWorker extends IPerson {\r\n        int getSalary();\r\n    }\r\n\r\n    class Worker extends RealmObject implements IWorker {\r\n\r\n        Person person;\r\n        int salary;\r\n\r\n        @Override\r\n        public String getName() {\r\n            return person.getName();\r\n        }\r\n\r\n        @Override\r\n        public int getSalary() {\r\n            return salary;\r\n        }\r\n    }\r\n\r\n## Note\r\n\r\nPrimaryKeys unfortunately have to be duplicated.\r\n \r\n\r\nCheck this [answer][1] of mine to get more details about this workaround.\r\n\r\n  [1]: https://stackoverflow.com/a/41552457/3503855","title":"Using composition as a workaround for inheritance in realm (android)?","body":"<h1>A workaround I've used (in a nutshell)</h1>\n\n<p>Composition + Interface inheritance would allow you to get some polymorphism benefits back to your realmObjects.</p>\n\n<h2>Some code demonstration</h2>\n\n<pre><code>interface IPerson {\n\n    String getName();\n}\n\nclass Person extends RealmObject implements IPerson {\n\n    String name;\n\n    @Override\n    public String getName() {\n        return name;\n    }\n}\n\ninterface IWorker extends IPerson {\n    int getSalary();\n}\n\nclass Worker extends RealmObject implements IWorker {\n\n    Person person;\n    int salary;\n\n    @Override\n    public String getName() {\n        return person.getName();\n    }\n\n    @Override\n    public int getSalary() {\n        return salary;\n    }\n}\n</code></pre>\n\n<h2>Note</h2>\n\n<p>PrimaryKeys unfortunately have to be duplicated.</p>\n\n<p>Check this <a href=\"https://stackoverflow.com/a/41552457/3503855\">answer</a> of mine to get more details about this workaround.</p>\n"}],"owner":{"display_name":"user4875457"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3654,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":1,"score":6,"last_activity_date":1642200060,"creation_date":1457204272,"question_id":35818414,"body_markdown":"In my app, I am using **realm** as a database platform. **Realm** has been great thus far- super easy to use, make queries, etc.-though, I have two qualms with it that I am trying to work around.\r\n\r\n1) Realm does not support inheritance in model object classes which extend RealmObject.\r\n- I am wondering if any developers out there have used composition as a workaround to the inheritance issue and if its worked for them.\r\n- In other words, say I have a class &quot;car&quot; which extends RealmObject and then I have other classes such as &quot;honda&quot;, &quot;toyota&quot;, etc. Does it make sense to make separate car objects for each of these which contain either a honda, toyota, etc.?\r\n\r\n2) Realm only supports getters and setters in model object classes\r\n- My current workaround for this is by creating static methods within the model object classes.\r\n- In other words, say I want to modify a honda&#39;s color, I would call something such as, Honda.updateColor(honda, blue).\r\n- ^ Is this sloppy, or is this essentially the only way to handle such methods.\r\n\r\nReally any feedback would be great!\r\n","title":"Using composition as a workaround for inheritance in realm (android)?","body":"<p>In my app, I am using <strong>realm</strong> as a database platform. <strong>Realm</strong> has been great thus far- super easy to use, make queries, etc.-though, I have two qualms with it that I am trying to work around.</p>\n\n<p>1) Realm does not support inheritance in model object classes which extend RealmObject.\n- I am wondering if any developers out there have used composition as a workaround to the inheritance issue and if its worked for them.\n- In other words, say I have a class \"car\" which extends RealmObject and then I have other classes such as \"honda\", \"toyota\", etc. Does it make sense to make separate car objects for each of these which contain either a honda, toyota, etc.?</p>\n\n<p>2) Realm only supports getters and setters in model object classes\n- My current workaround for this is by creating static methods within the model object classes.\n- In other words, say I want to modify a honda's color, I would call something such as, Honda.updateColor(honda, blue).\n- ^ Is this sloppy, or is this essentially the only way to handle such methods.</p>\n\n<p>Really any feedback would be great!</p>\n"},{"tags":["java","spring-boot","logging","log4j2"],"comments":[{"owner":{"account_id":16269349,"reputation":13452,"user_id":11748454,"display_name":"Piotr P. Karwasz"},"score":0,"creation_date":1642137897,"post_id":70703862,"comment_id":124996616,"body_markdown":"How do you setup the `LoggerConfig` for your `special.com` logger? If you want to have the same `LoggerContext` as the rest of the application, you need to apply your modifications **after** Spring Boot changed the `Configuration`. Alternatively you can use a separate `LoggerContext`.","body":"How do you setup the <code>LoggerConfig</code> for your <code>special.com</code> logger? If you want to have the same <code>LoggerContext</code> as the rest of the application, you need to apply your modifications <b>after</b> Spring Boot changed the <code>Configuration</code>. Alternatively you can use a separate <code>LoggerContext</code>."},{"owner":{"account_id":4431299,"reputation":487,"user_id":3608412,"accept_rate":67,"display_name":"Tamaki Sakura"},"score":0,"creation_date":1642180849,"post_id":70703862,"comment_id":125010786,"body_markdown":"The LoggerConfig is set up by code, I will share a code snippet later.","body":"The LoggerConfig is set up by code, I will share a code snippet later."},{"owner":{"account_id":4431299,"reputation":487,"user_id":3608412,"accept_rate":67,"display_name":"Tamaki Sakura"},"score":0,"creation_date":1642180886,"post_id":70703862,"comment_id":125010795,"body_markdown":"I tried create a different LoggerContext but it also resulted in with logger config overwritten by Spring.","body":"I tried create a different LoggerContext but it also resulted in with logger config overwritten by Spring."}],"answers":[{"tags":[],"owner":{"account_id":4431299,"reputation":487,"user_id":3608412,"accept_rate":67,"display_name":"Tamaki Sakura"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1642199707,"creation_date":1642199707,"answer_id":70717261,"question_id":70703862,"body_markdown":"Figure out what happened.\r\n```\r\n        LoggerContext ctx = Configurator.initialize(builder.build());\r\n        ctx.start();\r\n```\r\nIn both Application A and B, `builder.build()` has the right information, but Application B&#39;s `ctx` does not have the custom configuration\r\n\r\nInvestigate inside `Configurator.initalize`, this attempts to trigger `Log4jContextFactory`:\r\n```\r\n    public LoggerContext getContext(final String fqcn, final ClassLoader loader, final Object externalContext,\r\n            final boolean currentContext, final Configuration configuration) {\r\n        final LoggerContext ctx = selector.getContext(fqcn, loader, currentContext, null);\r\n        if (externalContext != null &amp;&amp; ctx.getExternalContext() == null) {\r\n            ctx.setExternalContext(externalContext);\r\n        }\r\n        if (ctx.getState() == LifeCycle.State.INITIALIZED) {\r\n            ContextAnchor.THREAD_CONTEXT.set(ctx);\r\n            try {\r\n                ctx.start(configuration);\r\n            } finally {\r\n                ContextAnchor.THREAD_CONTEXT.remove();\r\n            }\r\n        }\r\n        return ctx;\r\n    }\r\n```\r\nNote that the `configuration` is not used unless the context currently has state `INITIALIZED`\r\n\r\nProbably because Spring will initialize some sort of Log4j internally in either way, even if you set `-Dorg.springframework.boot.logging.LoggingSystem=none`, the returned ctx is always `STARTED`.\r\n\r\nThe hack to it is that always call reinitailize to force configuration being updated to whatever that&#39;s inside `builder.build()`:\r\n\r\n```\r\n        BuiltConfiguration configuration = builder.build();\r\n        LoggerContext ctx = Configurator.initialize(configuration);\r\n        ctx.reconfigure(configuration);\r\n        ctx.start();\r\n``` ","title":"Is there anyway to stop Spring Boot from overwriting my log config?","body":"<p>Figure out what happened.</p>\n<pre><code>        LoggerContext ctx = Configurator.initialize(builder.build());\n        ctx.start();\n</code></pre>\n<p>In both Application A and B, <code>builder.build()</code> has the right information, but Application B's <code>ctx</code> does not have the custom configuration</p>\n<p>Investigate inside <code>Configurator.initalize</code>, this attempts to trigger <code>Log4jContextFactory</code>:</p>\n<pre><code>    public LoggerContext getContext(final String fqcn, final ClassLoader loader, final Object externalContext,\n            final boolean currentContext, final Configuration configuration) {\n        final LoggerContext ctx = selector.getContext(fqcn, loader, currentContext, null);\n        if (externalContext != null &amp;&amp; ctx.getExternalContext() == null) {\n            ctx.setExternalContext(externalContext);\n        }\n        if (ctx.getState() == LifeCycle.State.INITIALIZED) {\n            ContextAnchor.THREAD_CONTEXT.set(ctx);\n            try {\n                ctx.start(configuration);\n            } finally {\n                ContextAnchor.THREAD_CONTEXT.remove();\n            }\n        }\n        return ctx;\n    }\n</code></pre>\n<p>Note that the <code>configuration</code> is not used unless the context currently has state <code>INITIALIZED</code></p>\n<p>Probably because Spring will initialize some sort of Log4j internally in either way, even if you set <code>-Dorg.springframework.boot.logging.LoggingSystem=none</code>, the returned ctx is always <code>STARTED</code>.</p>\n<p>The hack to it is that always call reinitailize to force configuration being updated to whatever that's inside <code>builder.build()</code>:</p>\n<pre><code>        BuiltConfiguration configuration = builder.build();\n        LoggerContext ctx = Configurator.initialize(configuration);\n        ctx.reconfigure(configuration);\n        ctx.start();\n</code></pre>\n"}],"owner":{"account_id":4431299,"reputation":487,"user_id":3608412,"accept_rate":67,"display_name":"Tamaki Sakura"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":795,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70717261,"answer_count":1,"score":0,"last_activity_date":1642199707,"creation_date":1642112763,"question_id":70703862,"body_markdown":"I have a logger that has the following properties:\r\n```\r\nPrivateConfig [loggerConfig=Special, config=org.apache.logging.log4j.core.config.builder.impl.BuiltConfiguration@709a148, loggerConfigLevel=INFO, intLevel=400, logger=Special.com:INFO in 73d16e93]\r\n```\r\nThis is a Special logger that has a specific format and specific destination needed for my application\r\n\r\nThis Special logger is created through:\r\n```\r\n        Level level = Level.toLevel(logLevel);\r\n\r\n        ConfigurationBuilder&lt;BuiltConfiguration&gt; builder = ConfigurationBuilderFactory.newConfigurationBuilder();\r\n        builder.setStatusLevel(level);\r\n        builder.setConfigurationName(&quot;whatever&quot;);\r\n\r\n        LoggerComponentBuilder specialLogger = builder.newLogger(&quot;Special&quot;, level);\r\n        AppenderComponentBuilder specialAppenderBuilder =  builder\r\n                    .newAppender(&quot;Special&quot;, &quot;RollingFile&quot;)\r\n                    .otherComponents();\r\n        specialAppenderBuilder.add(\r\n              builder\r\n                    .newLayout(&quot;PatternLayout&quot;)\r\n                    .otherComponents();\r\n        builder.add(specialAppenderBuilder);\r\n        specialLogger = specialLogger\r\n              .add(builder.newAppenderRef(&quot;Special&quot;))\r\n              .addAttribute(&quot;additivity&quot;, false);\r\n        builder.add(specialLogger);\r\n\r\n        LoggerContext ctx = Configurator.initialize(builder.build());\r\n        ctx.start();\r\n```\r\n\r\n\r\nThis logger work in Application A, which is not using Spring Boot\r\n\r\n\r\nI import part of Application A to Application B, which is Spring Boot based, but then the exact same logger become:\r\n```\r\nPrivateConfig [loggerConfig=root, config=XmlConfiguration[location=jar:file:/Users/stamaki/.gradle/caches/modules-2/files-2.1/org.springframework.boot/spring-boot/2.4.4/38392ae406009e55efe873baee4633bfa6b766b3/spring-boot-2.4.4.jar!/org/springframework/boot/logging/log4j2/log4j2.xml], loggerConfigLevel=INFO, intLevel=400, logger=Special.com:INFO in 18b4aac2]\r\n```\r\n\r\nNote that the logger config is being overwritten from `Special` to `root`, it no longer follows my custom written `BuiltConfiguration` but use something from Springboot&#39;s internal xml.\r\n\r\nHow do I stop Spring Boot from overwriting my config?\r\n\r\nThere appears to be a similar question:\r\nhttps://stackoverflow.com/questions/28419024/spring-is-resetting-my-logging-configuration-how-do-i-work-around-this\r\nBut the solution doesn&#39;t work\r\n\r\nI also tried https://stackoverflow.com/questions/29609996/spring-boot-loggingapplicationlistener-interfering-with-application-server-logg But their solution still don&#39;t work for me as it change my logger into \r\n```\r\nPrivateConfig [loggerConfig=root, config=org.springframework.boot.logging.log4j2.SpringBootConfigurationFactory$SpringBootConfiguration@16a3cc88, loggerConfigLevel=ERROR, intLevel=200, logger=NonSensitive.com.textiq.precisionenhancer.service.PrecisionEnhancerBackendService:ERROR in 18b4aac2]\r\n```\r\ni.e. still use Root Config, not the Special Config I set up, only different from above being that this is the default Root Logger config.\r\n\r\nPlease do not make suggestions like &quot;Update XML so it has the same format&quot;, this is not modular enough. I just wanted to use the same logger created by my library without having it being overwritten by Spring Boot.","title":"Is there anyway to stop Spring Boot from overwriting my log config?","body":"<p>I have a logger that has the following properties:</p>\n<pre><code>PrivateConfig [loggerConfig=Special, config=org.apache.logging.log4j.core.config.builder.impl.BuiltConfiguration@709a148, loggerConfigLevel=INFO, intLevel=400, logger=Special.com:INFO in 73d16e93]\n</code></pre>\n<p>This is a Special logger that has a specific format and specific destination needed for my application</p>\n<p>This Special logger is created through:</p>\n<pre><code>        Level level = Level.toLevel(logLevel);\n\n        ConfigurationBuilder&lt;BuiltConfiguration&gt; builder = ConfigurationBuilderFactory.newConfigurationBuilder();\n        builder.setStatusLevel(level);\n        builder.setConfigurationName(&quot;whatever&quot;);\n\n        LoggerComponentBuilder specialLogger = builder.newLogger(&quot;Special&quot;, level);\n        AppenderComponentBuilder specialAppenderBuilder =  builder\n                    .newAppender(&quot;Special&quot;, &quot;RollingFile&quot;)\n                    .otherComponents();\n        specialAppenderBuilder.add(\n              builder\n                    .newLayout(&quot;PatternLayout&quot;)\n                    .otherComponents();\n        builder.add(specialAppenderBuilder);\n        specialLogger = specialLogger\n              .add(builder.newAppenderRef(&quot;Special&quot;))\n              .addAttribute(&quot;additivity&quot;, false);\n        builder.add(specialLogger);\n\n        LoggerContext ctx = Configurator.initialize(builder.build());\n        ctx.start();\n</code></pre>\n<p>This logger work in Application A, which is not using Spring Boot</p>\n<p>I import part of Application A to Application B, which is Spring Boot based, but then the exact same logger become:</p>\n<pre><code>PrivateConfig [loggerConfig=root, config=XmlConfiguration[location=jar:file:/Users/stamaki/.gradle/caches/modules-2/files-2.1/org.springframework.boot/spring-boot/2.4.4/38392ae406009e55efe873baee4633bfa6b766b3/spring-boot-2.4.4.jar!/org/springframework/boot/logging/log4j2/log4j2.xml], loggerConfigLevel=INFO, intLevel=400, logger=Special.com:INFO in 18b4aac2]\n</code></pre>\n<p>Note that the logger config is being overwritten from <code>Special</code> to <code>root</code>, it no longer follows my custom written <code>BuiltConfiguration</code> but use something from Springboot's internal xml.</p>\n<p>How do I stop Spring Boot from overwriting my config?</p>\n<p>There appears to be a similar question:\n<a href=\"https://stackoverflow.com/questions/28419024/spring-is-resetting-my-logging-configuration-how-do-i-work-around-this\">Spring is resetting my logging configuration - how do I work around this?</a>\nBut the solution doesn't work</p>\n<p>I also tried <a href=\"https://stackoverflow.com/questions/29609996/spring-boot-loggingapplicationlistener-interfering-with-application-server-logg\">Spring Boot: LoggingApplicationListener interfering with Application Server logging</a> But their solution still don't work for me as it change my logger into</p>\n<pre><code>PrivateConfig [loggerConfig=root, config=org.springframework.boot.logging.log4j2.SpringBootConfigurationFactory$SpringBootConfiguration@16a3cc88, loggerConfigLevel=ERROR, intLevel=200, logger=NonSensitive.com.textiq.precisionenhancer.service.PrecisionEnhancerBackendService:ERROR in 18b4aac2]\n</code></pre>\n<p>i.e. still use Root Config, not the Special Config I set up, only different from above being that this is the default Root Logger config.</p>\n<p>Please do not make suggestions like &quot;Update XML so it has the same format&quot;, this is not modular enough. I just wanted to use the same logger created by my library without having it being overwritten by Spring Boot.</p>\n"},{"tags":["java","mapstruct"],"answers":[{"tags":[],"owner":{"account_id":1128956,"reputation":19765,"user_id":1115491,"display_name":"Filip"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1544034323,"creation_date":1544034323,"answer_id":53638535,"question_id":53614489,"body_markdown":"I would suggest not mocking out Mapper and setup a test with CDI that can actually create all Mappers properly (not experienced with CDI to suggest a solution). \r\n\r\nHaving said that you can use the `Mapper#injectionStrategy` from 1.3. You can use a constructor injection and inject your mocks in it.","title":"MapStruct Junit - Injecting Inner Mapper with CDI","body":"<p>I would suggest not mocking out Mapper and setup a test with CDI that can actually create all Mappers properly (not experienced with CDI to suggest a solution). </p>\n\n<p>Having said that you can use the <code>Mapper#injectionStrategy</code> from 1.3. You can use a constructor injection and inject your mocks in it.</p>\n"},{"tags":[],"owner":{"account_id":1468166,"reputation":457,"user_id":4391202,"display_name":"Bluurr"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1544037407,"creation_date":1544037407,"answer_id":53639274,"question_id":53614489,"body_markdown":"Without creating a CDI context one option is to define the inner class using Mockito for example:\r\n\r\n    @Spy\r\n    private B uses = Mappers.getMapper(B.class);\r\n    \r\n    @InjectMocks\r\n    private A mapper = Mappers.getMapper(A.class);\r\n\r\n    @Test\r\n    public void test() {\r\n       ADto = mapper.toDto(AEntity);\r\n       // asserts...\r\n    }\r\n\r\nThis will set the inner mapper for A when it uses B. ","title":"MapStruct Junit - Injecting Inner Mapper with CDI","body":"<p>Without creating a CDI context one option is to define the inner class using Mockito for example:</p>\n\n<pre><code>@Spy\nprivate B uses = Mappers.getMapper(B.class);\n\n@InjectMocks\nprivate A mapper = Mappers.getMapper(A.class);\n\n@Test\npublic void test() {\n   ADto = mapper.toDto(AEntity);\n   // asserts...\n}\n</code></pre>\n\n<p>This will set the inner mapper for A when it uses B. </p>\n"}],"owner":{"account_id":10770743,"reputation":81,"user_id":7924273,"display_name":"JustADude"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1767,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1642199296,"creation_date":1543931576,"question_id":53614489,"body_markdown":"Currently have Mapper containing inner Mappers (sometimes, themselves containing other inner Mappers).\r\n\r\nThey&#39;re defined like so:\r\n\r\n    @Mapper(componentModel = &quot;cdi&quot;, uses = B.class)\r\n    public interface A {\r\n    \tADto toDto(AEntity entity);\r\n    }\r\n\r\n    @Mapper(componentModel = &quot;cdi&quot;)\r\n    public interface B {\r\n    \tBDto toDto(BEntity entity);\r\n    }\r\n\r\nWhen the application runs, I can simply inject the main Mapper A without any problems and the entities get converted.\r\n\r\nHowever, through JUnit, I can&#39;t seem to figure out how to instanciate inner mapper.\r\n\r\n    public class InformationChassisMapperTest {\r\n        @InjectMocks\r\n    \tpublic A mapper = new AImpl();\r\n    \r\n        public AEntity;\r\n        @Before\r\n        public void init() {\r\n           AEntity = new AEntity();\r\n           // fill entity...\r\n        }\r\n        \r\n        @Test\r\n        public void test() {\r\n           ADto = mapper.toDto(AEntity);\r\n           // asserts...\r\n        }\r\n    }\r\n\r\nAnd I get an NPE because the inner mapper B is not instanciated during the mapping. Since the generated A mapper class uses @Inject B, during my JUnit tests CDI bean mapping is off (no arquillian). How could I mock or inject or instanciate the 2nd mapper in order to make my test pass?\r\n\r\nI&#39;ve looked other answers but they only cover Spring.","title":"MapStruct Junit - Injecting Inner Mapper with CDI","body":"<p>Currently have Mapper containing inner Mappers (sometimes, themselves containing other inner Mappers).</p>\n\n<p>They're defined like so:</p>\n\n<pre><code>@Mapper(componentModel = \"cdi\", uses = B.class)\npublic interface A {\n    ADto toDto(AEntity entity);\n}\n\n@Mapper(componentModel = \"cdi\")\npublic interface B {\n    BDto toDto(BEntity entity);\n}\n</code></pre>\n\n<p>When the application runs, I can simply inject the main Mapper A without any problems and the entities get converted.</p>\n\n<p>However, through JUnit, I can't seem to figure out how to instanciate inner mapper.</p>\n\n<pre><code>public class InformationChassisMapperTest {\n    @InjectMocks\n    public A mapper = new AImpl();\n\n    public AEntity;\n    @Before\n    public void init() {\n       AEntity = new AEntity();\n       // fill entity...\n    }\n\n    @Test\n    public void test() {\n       ADto = mapper.toDto(AEntity);\n       // asserts...\n    }\n}\n</code></pre>\n\n<p>And I get an NPE because the inner mapper B is not instanciated during the mapping. Since the generated A mapper class uses @Inject B, during my JUnit tests CDI bean mapping is off (no arquillian). How could I mock or inject or instanciate the 2nd mapper in order to make my test pass?</p>\n\n<p>I've looked other answers but they only cover Spring.</p>\n"},{"tags":["java","class","methods","output"],"answers":[{"tags":[],"owner":{"account_id":2253934,"reputation":152,"user_id":2779074,"display_name":"Humpity"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1642198394,"creation_date":1642198394,"answer_id":70717099,"question_id":70716331,"body_markdown":"Example is a class, not a method. It&#39;s like a template for an object.\r\n\r\nBut you can put a method in that class that returns what you want.\r\n\r\nExample.java\r\n\r\n\t\tpackage myPackage;\r\n\r\n\t\tpublic class Example \r\n\t\t{\r\n\t\t public static int a, b;\r\n\r\n\t\t Example(int inputForA, int inputForB)\r\n\t\t {\r\n\t\t   a = inputForA;\r\n\t\t   b = inputForB;\r\n\t\t }\r\n\t\t float compute ()\r\n\t\t {\r\n\t\t\treturn (float)a/(float)b;\r\n\t\t }\r\n\t\t}//_Example\r\n\r\nNow we create an instance of Example and use this object in another class.\r\n\r\nMain.java\r\n\r\n\t\tpackage myPackage;\r\n\r\n\t\tpublic class Main\r\n\t\t{\r\n\t\t public static void main(String []args)\r\n\t\t {\r\n\t\t\tExample exp = new Example (3, 2);\r\n\t\t\tSystem.out.println(exp.compute());\r\n\r\n\t\t }//_main\r\n\t\t}//_Main\r\n","title":"Getting a new variable with custom output and not a constructor location (name@xxxxx) - Java","body":"<p>Example is a class, not a method. It's like a template for an object.</p>\n<p>But you can put a method in that class that returns what you want.</p>\n<p>Example.java</p>\n<pre><code>    package myPackage;\n\n    public class Example \n    {\n     public static int a, b;\n\n     Example(int inputForA, int inputForB)\n     {\n       a = inputForA;\n       b = inputForB;\n     }\n     float compute ()\n     {\n        return (float)a/(float)b;\n     }\n    }//_Example\n</code></pre>\n<p>Now we create an instance of Example and use this object in another class.</p>\n<p>Main.java</p>\n<pre><code>    package myPackage;\n\n    public class Main\n    {\n     public static void main(String []args)\n     {\n        Example exp = new Example (3, 2);\n        System.out.println(exp.compute());\n\n     }//_main\n    }//_Main\n</code></pre>\n"}],"owner":{"account_id":20746910,"reputation":29,"user_id":15235313,"display_name":"HMNNikoloz"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70717099,"answer_count":1,"score":0,"last_activity_date":1642198394,"creation_date":1642193044,"question_id":70716331,"body_markdown":"I&#39;ve been trying to make a custom output from the constructor in Java, but it keeps giving me the location of it. The ```return``` does not work and throws up an error. The code is:\r\n```\r\nPublic class Example {\r\npublic static int a, b;\r\n\r\nExample(int inputForA, int inputForB){\r\n   a = inputForA;\r\n   b = inputForB;\r\n   }\r\n}\r\n```\r\nThe output i want is a/b (a fraction, for example 3/2).\r\nI tried a return command, but it does not work:\r\n```\r\nPublic class Example {\r\npublic static int a, b;\r\n\r\nExample(int inputForA, int inputForB){\r\n   a = inputForA;\r\n   b = inputForB;\r\n   return a +&quot;/&quot;+ b; //i even tried making String Example(){...} in the beginning but it still does not work, throws an error\r\n   }\r\n}\r\n```\r\nThe output i&#39;m getting, when i am trying to print Example (3, 2)```System.out.println(Example(3, 2))``` is ```Example@4dd8dc3``` and as mentioned i need ```3/2```.\r\n\r\nIs there a way to do it?\r\nThanks!","title":"Getting a new variable with custom output and not a constructor location (name@xxxxx) - Java","body":"<p>I've been trying to make a custom output from the constructor in Java, but it keeps giving me the location of it. The <code>return</code> does not work and throws up an error. The code is:</p>\n<pre><code>Public class Example {\npublic static int a, b;\n\nExample(int inputForA, int inputForB){\n   a = inputForA;\n   b = inputForB;\n   }\n}\n</code></pre>\n<p>The output i want is a/b (a fraction, for example 3/2).\nI tried a return command, but it does not work:</p>\n<pre><code>Public class Example {\npublic static int a, b;\n\nExample(int inputForA, int inputForB){\n   a = inputForA;\n   b = inputForB;\n   return a +&quot;/&quot;+ b; //i even tried making String Example(){...} in the beginning but it still does not work, throws an error\n   }\n}\n</code></pre>\n<p>The output i'm getting, when i am trying to print Example (3, 2)<code>System.out.println(Example(3, 2))</code> is <code>Example@4dd8dc3</code> and as mentioned i need <code>3/2</code>.</p>\n<p>Is there a way to do it?\nThanks!</p>\n"},{"tags":["java","windows-security"],"comments":[{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":0,"creation_date":1640947206,"post_id":70540435,"comment_id":124696255,"body_markdown":"Did you try searching the Internet for **debug rmi**?","body":"Did you try searching the Internet for <b>debug rmi</b>?"}],"answers":[{"tags":[],"owner":{"account_id":23791451,"reputation":1,"user_id":17802841,"display_name":"Ben"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1642197782,"creation_date":1642197782,"answer_id":70717011,"question_id":70540435,"body_markdown":"Sorry for the delay on this - the issue ended up being that IPv6 was disabled. Re-enabled that - and the application was happy again.\r\n\r\nFor others reference - \r\nhttps://learn.microsoft.com/en-us/troubleshoot/windows-server/networking/configure-ipv6-in-windows","title":"Issue with java-based app in RMIScoketFactory within locked down environment","body":"<p>Sorry for the delay on this - the issue ended up being that IPv6 was disabled. Re-enabled that - and the application was happy again.</p>\n<p>For others reference -\n<a href=\"https://learn.microsoft.com/en-us/troubleshoot/windows-server/networking/configure-ipv6-in-windows\" rel=\"nofollow noreferrer\">https://learn.microsoft.com/en-us/troubleshoot/windows-server/networking/configure-ipv6-in-windows</a></p>\n"}],"owner":{"account_id":23791451,"reputation":1,"user_id":17802841,"display_name":"Ben"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1642197782,"creation_date":1640939589,"question_id":70540435,"body_markdown":"Our company uses a java application as one of its core business applications - it works fine on the existing Windows 7 environment.\r\n\r\nOne of (the many) things I&#39;m doing is moving the organization to windows 10 21H2 - with a greater focus on security. \r\n\r\nThis core business application fails within a secured desktop. By secured, i mean following the CIS Windows 10 lockdown recommendations on an if not/why not basis - so if there is a reason not to follow one, we don&#39;t.\r\n\r\nAfter a great deal of troubleshooting, i believe the core of the issue is the following lines from the application\r\n```none\r\nFound network address: /0:0:0:0:0:0:0:1 (loopback)\r\nFound network address: /127.0.0.1 (loopback)\r\njava.lang.IllegalStateException: No suitable network interface found.\r\n at &lt;appname&gt;/net.MulitopleNetworkadapaterRMISocketfactory.(init)\r\nCouldn&#39;t create socketfactory: No suitable network interface found.\r\n```\r\nThis occurs running with the firewall off and running from an elevated command prompt - so these basics have been covered off.\r\n\r\nI don&#39;t know Java at all - and what I&#39;m looking for assistance on is anyone that knows &quot;socketfactory&quot; - how it works. Will it be running all commands in a user security context ? What method does it use to to lookup the local NIC&#39;s? I&#39;m trying to work out where it is being blocked.\r\n\r\nI&#39;m accepting that it is one of the security lockdowns causing the issue - but I&#39;m having trouble finding it and would like some pointers.\r\n\r\nAs far as asking the vendor... well... they are not helpful.\r\n\r\nI&#39;ve trawled event logs and process monitor with no success\r\n\r\n","title":"Issue with java-based app in RMIScoketFactory within locked down environment","body":"<p>Our company uses a java application as one of its core business applications - it works fine on the existing Windows 7 environment.</p>\n<p>One of (the many) things I'm doing is moving the organization to windows 10 21H2 - with a greater focus on security.</p>\n<p>This core business application fails within a secured desktop. By secured, i mean following the CIS Windows 10 lockdown recommendations on an if not/why not basis - so if there is a reason not to follow one, we don't.</p>\n<p>After a great deal of troubleshooting, i believe the core of the issue is the following lines from the application</p>\n<pre class=\"lang-none prettyprint-override\"><code>Found network address: /0:0:0:0:0:0:0:1 (loopback)\nFound network address: /127.0.0.1 (loopback)\njava.lang.IllegalStateException: No suitable network interface found.\n at &lt;appname&gt;/net.MulitopleNetworkadapaterRMISocketfactory.(init)\nCouldn't create socketfactory: No suitable network interface found.\n</code></pre>\n<p>This occurs running with the firewall off and running from an elevated command prompt - so these basics have been covered off.</p>\n<p>I don't know Java at all - and what I'm looking for assistance on is anyone that knows &quot;socketfactory&quot; - how it works. Will it be running all commands in a user security context ? What method does it use to to lookup the local NIC's? I'm trying to work out where it is being blocked.</p>\n<p>I'm accepting that it is one of the security lockdowns causing the issue - but I'm having trouble finding it and would like some pointers.</p>\n<p>As far as asking the vendor... well... they are not helpful.</p>\n<p>I've trawled event logs and process monitor with no success</p>\n"},{"tags":["java","android","android-alertdialog","system-alert-window"],"owner":{"account_id":10814854,"reputation":4137,"user_id":7954210,"accept_rate":73,"display_name":"Mouaad Abdelghafour AITALI"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":260,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1642197706,"creation_date":1642197706,"question_id":70717001,"body_markdown":"Right now, I&#39;m using the following permission to show a dialog over another app : \r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.SYSTEM_ALERT_WINDOW&quot;/&gt;\r\n\r\nDialog :\r\n\r\n     dialogBuilder = new AlertDialog.Builder(activity);\r\n     LayoutInflater inflater2 = (LayoutInflater) AppController.getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);\r\n     View dialogView = inflater2.inflate(R.layout.dialog_view, null);\r\n     dialogBuilder.setView(dialogView);\r\n     dialog = dialogBuilder.create();\r\n     dialog.setCancelable(true);\r\n     final WindowManager.LayoutParams layoutParams = new WindowManager.LayoutParams();\r\n     layoutParams.width = WindowManager.LayoutParams.MATCH_PARENT;\r\n     layoutParams.height = WindowManager.LayoutParams.WRAP_CONTENT;\r\n     final Window dialogWindow = dialog.getWindow();\r\n     if (dialogWindow != null) {\r\n                dialogWindow.setAttributes(layoutParams);\r\n                if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {\r\n                    dialogWindow.setType(WindowManager.LayoutParams.TYPE_APPLICATION_OVERLAY);\r\n                } else {\r\n                    dialogWindow.setType(WindowManager.LayoutParams.TYPE_PHONE);\r\n                }\r\n      }\r\n     dialog.show();\r\n\r\n[Snaptube][1] app, shows a dialog over the YouTube app without asking for any permission : \r\n\r\n&lt;img src=&quot;https://i.stack.imgur.com/EgPo3.png&quot; width=&quot;250&quot;/&gt;\r\n\r\nHow I can achieve that?\r\n\r\n  [1]: https://www.snaptubeapp.com/\r\n","title":"Show dialog over another app without SYSTEM_ALERT_WINDOW permission","body":"<p>Right now, I'm using the following permission to show a dialog over another app :</p>\n<pre><code>&lt;uses-permission android:name=&quot;android.permission.SYSTEM_ALERT_WINDOW&quot;/&gt;\n</code></pre>\n<p>Dialog :</p>\n<pre><code> dialogBuilder = new AlertDialog.Builder(activity);\n LayoutInflater inflater2 = (LayoutInflater) AppController.getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);\n View dialogView = inflater2.inflate(R.layout.dialog_view, null);\n dialogBuilder.setView(dialogView);\n dialog = dialogBuilder.create();\n dialog.setCancelable(true);\n final WindowManager.LayoutParams layoutParams = new WindowManager.LayoutParams();\n layoutParams.width = WindowManager.LayoutParams.MATCH_PARENT;\n layoutParams.height = WindowManager.LayoutParams.WRAP_CONTENT;\n final Window dialogWindow = dialog.getWindow();\n if (dialogWindow != null) {\n            dialogWindow.setAttributes(layoutParams);\n            if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {\n                dialogWindow.setType(WindowManager.LayoutParams.TYPE_APPLICATION_OVERLAY);\n            } else {\n                dialogWindow.setType(WindowManager.LayoutParams.TYPE_PHONE);\n            }\n  }\n dialog.show();\n</code></pre>\n<p><a href=\"https://www.snaptubeapp.com/\" rel=\"nofollow noreferrer\">Snaptube</a> app, shows a dialog over the YouTube app without asking for any permission :</p>\n<img src=\"https://i.stack.imgur.com/EgPo3.png\" width=\"250\"/>\n<p>How I can achieve that?</p>\n"},{"tags":["java","xml","soap","apache-camel"],"answers":[{"tags":[],"owner":{"account_id":23301548,"reputation":55,"user_id":17382114,"display_name":"Italo Vieira "},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1642197342,"creation_date":1642197342,"answer_id":70716952,"question_id":70701260,"body_markdown":"just found it\r\n\r\nIn my data class Account inside ConsultParameters in my attributes code, name, address I just add the follow annotation in each, like:\r\n\r\n    @XmlElement(namespace = &quot;otherNamespace&quot;)\r\n    protected String code;","title":"SOAP Element/XML Type In Java/Camel","body":"<p>just found it</p>\n<p>In my data class Account inside ConsultParameters in my attributes code, name, address I just add the follow annotation in each, like:</p>\n<pre><code>@XmlElement(namespace = &quot;otherNamespace&quot;)\nprotected String code;\n</code></pre>\n"}],"owner":{"account_id":23301548,"reputation":55,"user_id":17382114,"display_name":"Italo Vieira "},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":79,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70716952,"answer_count":1,"score":0,"last_activity_date":1642197342,"creation_date":1642097907,"question_id":70701260,"body_markdown":"I&#39;m developing a java/camel CXF service, and I have to generate this body in the WSDL read\r\n\r\n    &lt;soapenv:Envelope \r\n    xmlns:soapenv=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot; \r\n    xmlns:v12=&quot;nameSpace&quot; \r\n    xmlns:v13=&quot;otherNamespace&quot;&gt;\r\n       &lt;soapenv:Body&gt;\r\n          &lt;v12:consult&gt;\r\n             &lt;account&gt;\r\n                &lt;!--Optional:--&gt;\r\n                &lt;v13:code&gt;?&lt;/v13:code&gt;\r\n                &lt;!--Optional:--&gt;\r\n                &lt;v13:name&gt;?&lt;/v13:name&gt;\r\n                &lt;!--Optional:--&gt;\r\n                &lt;v13:address&gt;?&lt;/v13:address&gt;\r\n             &lt;/account&gt;\r\n          &lt;/v12:consult&gt;\r\n       &lt;/soapenv:Body&gt;\r\n    &lt;/soapenv:Envelope&gt;\r\n\r\nIn my serviceClass I declare consult like this:\r\n\r\n\t\t\t\t@WebParam(partName = &quot;Parametro&quot;, name = &quot;consult&quot;, targetNamespace = &quot;nameSpace&quot;)\r\n                ConsultParameters parameters,\r\n\r\nConsultParameters is class which utilize @XmlRootElement/@XmlType\r\n\r\nHow can I insert the v13 namespace in those attributes inside a object, can I do this modifying the serviceClass or the data class with XMLType?\r\n","title":"SOAP Element/XML Type In Java/Camel","body":"<p>I'm developing a java/camel CXF service, and I have to generate this body in the WSDL read</p>\n<pre><code>&lt;soapenv:Envelope \nxmlns:soapenv=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot; \nxmlns:v12=&quot;nameSpace&quot; \nxmlns:v13=&quot;otherNamespace&quot;&gt;\n   &lt;soapenv:Body&gt;\n      &lt;v12:consult&gt;\n         &lt;account&gt;\n            &lt;!--Optional:--&gt;\n            &lt;v13:code&gt;?&lt;/v13:code&gt;\n            &lt;!--Optional:--&gt;\n            &lt;v13:name&gt;?&lt;/v13:name&gt;\n            &lt;!--Optional:--&gt;\n            &lt;v13:address&gt;?&lt;/v13:address&gt;\n         &lt;/account&gt;\n      &lt;/v12:consult&gt;\n   &lt;/soapenv:Body&gt;\n&lt;/soapenv:Envelope&gt;\n</code></pre>\n<p>In my serviceClass I declare consult like this:</p>\n<pre><code>            @WebParam(partName = &quot;Parametro&quot;, name = &quot;consult&quot;, targetNamespace = &quot;nameSpace&quot;)\n            ConsultParameters parameters,\n</code></pre>\n<p>ConsultParameters is class which utilize @XmlRootElement/@XmlType</p>\n<p>How can I insert the v13 namespace in those attributes inside a object, can I do this modifying the serviceClass or the data class with XMLType?</p>\n"},{"tags":["java","opengl","video","embedding"],"comments":[{"owner":{"account_id":2348025,"reputation":15224,"user_id":2057709,"display_name":"VC.One"},"score":0,"creation_date":1642252973,"post_id":70715721,"comment_id":125024232,"body_markdown":"I don&#39;t use JOGL but forget Youtube for a moment (that&#39;s just HTML text, not video data). First are you able to play any MP4 file in JOGL? If yes then your next is to get the MP4 from Youtube. The easiest way would be to save via some online downloader. Either pre-save the MP4 file in another server where you can use via direct web link or just load it from your hard drive.","body":"I don&#39;t use JOGL but forget Youtube for a moment (that&#39;s just HTML text, not video data). First are you able to play any MP4 file in JOGL? If yes then your next is to get the MP4 from Youtube. The easiest way would be to save via some online downloader. Either pre-save the MP4 file in another server where you can use via direct web link or just load it from your hard drive."},{"owner":{"account_id":2348025,"reputation":15224,"user_id":2057709,"display_name":"VC.One"},"score":0,"creation_date":1642255690,"post_id":70715721,"comment_id":125024814,"body_markdown":"**PS:** Even when MP4 works in Java, you might also have to screen grab each frame as it plays to update your `texture` variable.","body":"<b>PS:</b> Even when MP4 works in Java, you might also have to screen grab each frame as it plays to update your <code>texture</code> variable."},{"owner":{"account_id":2348025,"reputation":15224,"user_id":2057709,"display_name":"VC.One"},"score":0,"creation_date":1642285801,"post_id":70715721,"comment_id":125031868,"body_markdown":"**PPS**: See: [gamedev.stackexchange.com - Playing movies with OpenGL in Java](https://gamedev.stackexchange.com/questions/57864/playing-movies-with-opengl-in-java).","body":"<b>PPS</b>: See: <a href=\"https://gamedev.stackexchange.com/questions/57864/playing-movies-with-opengl-in-java\">gamedev.stackexchange.com - Playing movies with OpenGL in Java</a>."},{"owner":{"account_id":5580553,"reputation":51,"user_id":4422546,"display_name":"Thornack"},"score":0,"creation_date":1642449985,"post_id":70715721,"comment_id":125069048,"body_markdown":"As I understand it, I basically have to decode the video so I can update a texture frame buffer, frame by frame (have never done this before) as I render the texture using open GL.","body":"As I understand it, I basically have to decode the video so I can update a texture frame buffer, frame by frame (have never done this before) as I render the texture using open GL."},{"owner":{"account_id":5580553,"reputation":51,"user_id":4422546,"display_name":"Thornack"},"score":0,"creation_date":1642456336,"post_id":70715721,"comment_id":125071002,"body_markdown":"I am having issues with streaming a texture to the GPU. I know I have to have two (or more) textures or PixelBuffer Objects that I upload the video frame data to and render respectively: -&gt; Upload frame to texture1, Draw texture2 -&gt; Upload to texture2, Draw texture1 -&gt;. Repeat","body":"I am having issues with streaming a texture to the GPU. I know I have to have two (or more) textures or PixelBuffer Objects that I upload the video frame data to and render respectively: -&gt; Upload frame to texture1, Draw texture2 -&gt; Upload to texture2, Draw texture1 -&gt;. Repeat"},{"owner":{"account_id":2348025,"reputation":15224,"user_id":2057709,"display_name":"VC.One"},"score":0,"creation_date":1642775673,"post_id":70715721,"comment_id":125168866,"body_markdown":"Does your JOGL have a media player API? See if [this demo code](https://github.com/sgothel/jogl/blob/master/src/test/com/jogamp/opengl/test/junit/jogl/demos/es2/av/MovieCube.java) works for you? If working, then you can see how they pass video as texture (_ie:_ less work than constant draw).","body":"Does your JOGL have a media player API? See if <a href=\"https://github.com/sgothel/jogl/blob/master/src/test/com/jogamp/opengl/test/junit/jogl/demos/es2/av/MovieCube.java\" rel=\"nofollow noreferrer\">this demo code</a> works for you? If working, then you can see how they pass video as texture (<i>ie:</i> less work than constant draw)."}],"owner":{"account_id":5580553,"reputation":51,"user_id":4422546,"display_name":"Thornack"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":120,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1642197247,"creation_date":1642188954,"question_id":70715721,"body_markdown":"I am working on adding cutscenes to a game mod I am writing. The game renders GUI elements using JOGL, so I have created a render event for the Player&#39;s Heads Up Display (HUD) and I want to render an overlay on this HUD which plays an embedded youtube video and then cancel the render once the youtube video stops.\r\n\r\n    @SubscribeEvent(priority=EventPriority.LOWEST)\r\n\tpublic void onRender(RenderGameOverlayEvent.Post event) {\r\n\t\tplayer = mc.thePlayer;\r\n\t\tint height = event.resolution.getScaledHeight();\r\n\t\tint width = event.resolution.getScaledWidth();\r\n\t\t\t\t\t\r\n\t\tif(isVisible){\r\n\t\t\tGL11.glPushMatrix();\r\n\t\t\tthis.mc.getTextureManager().bindTexture(texture);\r\n\t\t\tdrawPlayerHUD(videoCutScenePath, width, height, event);\r\n\t\t\tGL11.glEnable(GL11.GL_BLEND);\r\n\t\t\tGL11.glDisable(GL11.GL_DEPTH_TEST);\r\n\t\t\tGL11.glDepthMask(false);\r\n\t\t\tGL11.glColor4f(1.0F, 1.0F, 1.0F, guiOpacity);\r\n\t\t\tGL11.glBlendFunc(GL11.GL_SRC_ALPHA, GL11.GL_ONE_MINUS_SRC_ALPHA);\r\n\t\t\tGL11.glPopMatrix();\t\r\n\t\t}\r\n\t}\r\n\r\nWhen isVisible is set true - play cut scene from embeded youtube video inside the frame. I have access to the resolution of the frame (Height and Width), mouseX, mouseY, partialTick count and I have successfully displayed an image texture in png format on this frame already. I am looking to now render a video from youtube specifically. How would you accomplish this?\r\n\r\n    private void drawPlayerHUD(String path, int width, int height, RenderGameOverlayEvent.Post event){                                                      \r\n        //getYouTube video so the onRender method can render it??                                                                                             \r\n    }\r\n\r\n[Edit] I have tried to open the Youtube URL using the following method which also returns the status for debugging purposes and this works but it opens in a new window. I now want to merge the two and am unsure how.\r\n\r\n\r\n      \t\r\n  \t  public static String openWebpage() {                                 \r\n       if (Desktop.isDesktopSupported()) {\r\n  \t       try {\r\n  \t        Desktop.getDesktop().browse(new URI(&quot;https://www.youtube.com/watch_popup?v=[videoID]?&amp;autoplay=1&quot;));\r\n  \t       } catch (IOException e) {\r\n  \t        e.printStackTrace();\r\n  \t        return &quot;Can&#39;t open browser for some reason&quot;;\r\n  \t       } catch (URISyntaxException e) {\r\n  \t        e.printStackTrace();\r\n  \t        return &quot;Bug Detected: The URL is invalid for some reason.&quot;;\r\n  \t       }\r\n  \t   } else {\r\n  \t   return &quot;For some reason You Can&#39;t open the browser&quot;;\r\n  \t  }\r\n  \t  return null;\r\n  \t}\r\n","title":"How can you Embed YouTube Video using JOGL","body":"<p>I am working on adding cutscenes to a game mod I am writing. The game renders GUI elements using JOGL, so I have created a render event for the Player's Heads Up Display (HUD) and I want to render an overlay on this HUD which plays an embedded youtube video and then cancel the render once the youtube video stops.</p>\n<pre><code>@SubscribeEvent(priority=EventPriority.LOWEST)\npublic void onRender(RenderGameOverlayEvent.Post event) {\n    player = mc.thePlayer;\n    int height = event.resolution.getScaledHeight();\n    int width = event.resolution.getScaledWidth();\n                \n    if(isVisible){\n        GL11.glPushMatrix();\n        this.mc.getTextureManager().bindTexture(texture);\n        drawPlayerHUD(videoCutScenePath, width, height, event);\n        GL11.glEnable(GL11.GL_BLEND);\n        GL11.glDisable(GL11.GL_DEPTH_TEST);\n        GL11.glDepthMask(false);\n        GL11.glColor4f(1.0F, 1.0F, 1.0F, guiOpacity);\n        GL11.glBlendFunc(GL11.GL_SRC_ALPHA, GL11.GL_ONE_MINUS_SRC_ALPHA);\n        GL11.glPopMatrix(); \n    }\n}\n</code></pre>\n<p>When isVisible is set true - play cut scene from embeded youtube video inside the frame. I have access to the resolution of the frame (Height and Width), mouseX, mouseY, partialTick count and I have successfully displayed an image texture in png format on this frame already. I am looking to now render a video from youtube specifically. How would you accomplish this?</p>\n<pre><code>private void drawPlayerHUD(String path, int width, int height, RenderGameOverlayEvent.Post event){                                                      \n    //getYouTube video so the onRender method can render it??                                                                                             \n}\n</code></pre>\n<p>[Edit] I have tried to open the Youtube URL using the following method which also returns the status for debugging purposes and this works but it opens in a new window. I now want to merge the two and am unsure how.</p>\n<pre><code>  public static String openWebpage() {                                 \n   if (Desktop.isDesktopSupported()) {\n       try {\n        Desktop.getDesktop().browse(new URI(&quot;https://www.youtube.com/watch_popup?v=[videoID]?&amp;autoplay=1&quot;));\n       } catch (IOException e) {\n        e.printStackTrace();\n        return &quot;Can't open browser for some reason&quot;;\n       } catch (URISyntaxException e) {\n        e.printStackTrace();\n        return &quot;Bug Detected: The URL is invalid for some reason.&quot;;\n       }\n   } else {\n   return &quot;For some reason You Can't open the browser&quot;;\n  }\n  return null;\n}\n</code></pre>\n"},{"tags":["java","dictionary","data-structures","isometric"],"comments":[{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":1,"creation_date":1326628796,"post_id":8869439,"comment_id":11083479,"body_markdown":"That question is a bit too broad and maybe you might want to ask this in the game developers forum: http://gamedev.stackexchange.com/","body":"That question is a bit too broad and maybe you might want to ask this in the game developers forum: <a href=\"http://gamedev.stackexchange.com/\">gamedev.stackexchange.com</a>"}],"answers":[{"tags":[],"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1326629374,"creation_date":1326629374,"answer_id":8869504,"question_id":8869439,"body_markdown":"Although you might have more success asking on https://gamedev.stackexchange.com/ I&#39;ll try and provide some ideas:\r\n\r\nYou should create a `Tile` class might contain a collection of entities on that tile. Additionally entities might hold a reference to the tile(s) it is located on.\r\n\r\nAs for the map representation, it depends on how the map would be represented. If you have a fixed size map you might use a 2D array (the array would only contain links to tiles which might be null if not currently needed), otherwise you might use a map whose index would be the position of the tile. Then query the map for the tiles you need to display. \r\n\r\nAdditionally you might want to employ some caching and load a few tiles that surround the displayed area. When tiles are outside that cached area and you need memory they might be removed from the map.\r\n\r\n","title":"Isometric game data structure and rendering","body":"<p>Although you might have more success asking on <a href=\"https://gamedev.stackexchange.com/\">https://gamedev.stackexchange.com/</a> I'll try and provide some ideas:</p>\n\n<p>You should create a <code>Tile</code> class might contain a collection of entities on that tile. Additionally entities might hold a reference to the tile(s) it is located on.</p>\n\n<p>As for the map representation, it depends on how the map would be represented. If you have a fixed size map you might use a 2D array (the array would only contain links to tiles which might be null if not currently needed), otherwise you might use a map whose index would be the position of the tile. Then query the map for the tiles you need to display. </p>\n\n<p>Additionally you might want to employ some caching and load a few tiles that surround the displayed area. When tiles are outside that cached area and you need memory they might be removed from the map.</p>\n"}],"owner":{"account_id":1173711,"reputation":11,"user_id":1150235,"display_name":"user1150235"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1064,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1642196962,"creation_date":1326628631,"question_id":8869439,"body_markdown":"I&#39;m starting development of a 2d isometric(tiled, roguelike) game and I&#39;m brainstorming which kind of data structure I would use to store runtime data like tiles and entities, but I don&#39;t want to use an 2d array(as the world will be huge). How I would handle rendering in such cases?","title":"Isometric game data structure and rendering","body":"<p>I'm starting development of a 2d isometric(tiled, roguelike) game and I'm brainstorming which kind of data structure I would use to store runtime data like tiles and entities, but I don't want to use an 2d array(as the world will be huge). How I would handle rendering in such cases?</p>\n"},{"tags":["java","javafx"],"comments":[{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":0,"creation_date":1642195941,"post_id":70716708,"comment_id":125015662,"body_markdown":"The `Image` constructor wants a URL, not a filename. See the duplicate, or https://edencoding.com/where-to-put-resource-files-in-javafx/","body":"The <code>Image</code> constructor wants a URL, not a filename. See the duplicate, or <a href=\"https://edencoding.com/where-to-put-resource-files-in-javafx/\" rel=\"nofollow noreferrer\">edencoding.com/where-to-put-resource-files-in-javafx</a>"},{"owner":{"account_id":18545294,"reputation":1997,"user_id":13512812,"display_name":"coderoftheday"},"score":0,"creation_date":1642196301,"post_id":70716708,"comment_id":125015768,"body_markdown":"@James_D unfortunately that still didn&#39;t work.","body":"@James_D unfortunately that still didn&#39;t work."},{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":0,"creation_date":1642196356,"post_id":70716708,"comment_id":125015787,"body_markdown":"Update your question to show what you tried, along with the results of following the “troubleshooting” section in the linked question","body":"Update your question to show what you tried, along with the results of following the “troubleshooting” section in the linked question"},{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":0,"creation_date":1642213314,"post_id":70716708,"comment_id":125018599,"body_markdown":"Right at the top of the answer to the question I linked, it says *”For images, call `toExternalForm()` on the `URL` to generate the `String` to pass to the `Image` constructor.”*. And then, *”To troubleshoot, examine the contents of your **build** folder, not your **source** folder.”*. Maybe try those things, instead of repeatedly spamming this site with copies of the same question.","body":"Right at the top of the answer to the question I linked, it says <i>”For images, call <code>toExternalForm()</code> on the <code>URL</code> to generate the <code>String</code> to pass to the <code>Image</code> constructor.”</i>. And then, <i>”To troubleshoot, examine the contents of your <b>build</b> folder, not your <b>source</b> folder.”</i>. Maybe try those things, instead of repeatedly spamming this site with copies of the same question."}],"owner":{"account_id":18545294,"reputation":1997,"user_id":13512812,"display_name":"coderoftheday"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":82,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"closed_date":1642195920,"answer_count":0,"score":0,"last_activity_date":1642196861,"creation_date":1642195640,"question_id":70716708,"body_markdown":"I&#39;ve searched the stackoverflow but no solutions are working for my code.\r\n\r\nThe image for some reason isn&#39;t rendering. There is no Icon for the Stage\r\n\r\nI tried this: https://stackoverflow.com/questions/24260019/javafx-image-not-showing-in-stage/47042512 but the image still wouldn&#39;t render.\r\nCode:\r\n```\r\npackage com.example.javafxfirst;\r\n\r\nimport javafx.application.Application;\r\nimport javafx.scene.Group;\r\nimport javafx.scene.Scene;\r\nimport javafx.scene.image.Image;\r\nimport javafx.stage.Stage;\r\nimport javafx.scene.paint.Color;\r\n\r\nimport java.io.File;\r\n\r\npublic class HelloApplication extends Application {\r\n\r\n    public static void main(String[] args) {\r\n        launch(args);\r\n    }\r\n\r\n    @Override\r\n    public void start(Stage stage) throws Exception {\r\n\r\n        //Stage stage = new Stage();\r\n        Group root = new Group();\r\n        Scene scene = new Scene(root,Color.BLACK);\r\n\r\n        Image icon = new Image(new File(&quot;resources/javafxlogo.png&quot;).toURI().toString());\r\n        stage.getIcons().add(icon);\r\n        stage.setTitle(&quot;Program&quot;);\r\n        stage.setScene(scene);\r\n        stage.show();\r\n    }\r\n}\r\n```\r\n\r\nProject Structure\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/24260019/javafx-image-not-showing-in-stage/47042512\r\n  [2]: https://i.stack.imgur.com/Qyd8H.png\r\n\r\nUpdate:\r\n\r\nI replaced\r\n```\r\nImage icon = new Image(new File(&quot;resources/javafxlogo.png&quot;).toURI().toString());\r\n```\r\nwith\r\n```\r\nImage icon = new Image(getClass().getResource(&quot;/img/javafxlogo.png&quot;));\r\n```\r\nNow I get the error:\r\n```\r\njava: no suitable constructor found for Image(java.net.URL)\r\n    constructor javafx.scene.image.Image.Image(java.lang.String) is not applicable\r\n      (argument mismatch; java.net.URL cannot be converted to java.lang.String)\r\n    constructor javafx.scene.image.Image.Image(java.io.InputStream) is not applicable\r\n      (argument mismatch; java.net.URL cannot be converted to java.io.InputStream)\r\n    constructor javafx.scene.image.Image.Image(javafx.scene.image.PixelBuffer) is not applicable\r\n      (argument mismatch; java.net.URL cannot be converted to javafx.scene.image.PixelBuffer)\r\n    constructor javafx.scene.image.Image.Image(java.lang.Object) is not applicable\r\n      (Image(java.lang.Object) has private access in javafx.scene.image.Image)\r\n```\r\n","title":"My Image is not rendering despite no errors JavaFx","body":"<p>I've searched the stackoverflow but no solutions are working for my code.</p>\n<p>The image for some reason isn't rendering. There is no Icon for the Stage</p>\n<p>I tried this: <a href=\"https://stackoverflow.com/questions/24260019/javafx-image-not-showing-in-stage/47042512\">JavaFX Image not showing in stage</a> but the image still wouldn't render.\nCode:</p>\n<pre><code>package com.example.javafxfirst;\n\nimport javafx.application.Application;\nimport javafx.scene.Group;\nimport javafx.scene.Scene;\nimport javafx.scene.image.Image;\nimport javafx.stage.Stage;\nimport javafx.scene.paint.Color;\n\nimport java.io.File;\n\npublic class HelloApplication extends Application {\n\n    public static void main(String[] args) {\n        launch(args);\n    }\n\n    @Override\n    public void start(Stage stage) throws Exception {\n\n        //Stage stage = new Stage();\n        Group root = new Group();\n        Scene scene = new Scene(root,Color.BLACK);\n\n        Image icon = new Image(new File(&quot;resources/javafxlogo.png&quot;).toURI().toString());\n        stage.getIcons().add(icon);\n        stage.setTitle(&quot;Program&quot;);\n        stage.setScene(scene);\n        stage.show();\n    }\n}\n</code></pre>\n<p>Project Structure\n<a href=\"https://i.stack.imgur.com/Qyd8H.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Qyd8H.png\" alt=\"enter image description here\" /></a></p>\n<p>Update:</p>\n<p>I replaced</p>\n<pre><code>Image icon = new Image(new File(&quot;resources/javafxlogo.png&quot;).toURI().toString());\n</code></pre>\n<p>with</p>\n<pre><code>Image icon = new Image(getClass().getResource(&quot;/img/javafxlogo.png&quot;));\n</code></pre>\n<p>Now I get the error:</p>\n<pre><code>java: no suitable constructor found for Image(java.net.URL)\n    constructor javafx.scene.image.Image.Image(java.lang.String) is not applicable\n      (argument mismatch; java.net.URL cannot be converted to java.lang.String)\n    constructor javafx.scene.image.Image.Image(java.io.InputStream) is not applicable\n      (argument mismatch; java.net.URL cannot be converted to java.io.InputStream)\n    constructor javafx.scene.image.Image.Image(javafx.scene.image.PixelBuffer) is not applicable\n      (argument mismatch; java.net.URL cannot be converted to javafx.scene.image.PixelBuffer)\n    constructor javafx.scene.image.Image.Image(java.lang.Object) is not applicable\n      (Image(java.lang.Object) has private access in javafx.scene.image.Image)\n</code></pre>\n"},{"tags":["java","reflection"],"comments":[{"owner":{"account_id":26957,"reputation":564361,"user_id":70604,"display_name":"Pascal Thivent"},"score":1,"creation_date":1266949649,"post_id":2320404,"comment_id":2289208,"body_markdown":"I don&#39;t think that Java is the right tool for that, Groovy would be better suited IMO.","body":"I don&#39;t think that Java is the right tool for that, Groovy would be better suited IMO."},{"owner":{"account_id":9608,"reputation":17506,"user_id":17832,"display_name":"JeeBee"},"score":0,"creation_date":1266950757,"post_id":2320404,"comment_id":2289403,"body_markdown":"Personally I don&#39;t see the problem with having a Java model that maps to your database model. Also when creating SQL queries, make sure to use PreparedStatements to avoid SQL Injection, rather than building SQL strings.","body":"Personally I don&#39;t see the problem with having a Java model that maps to your database model. Also when creating SQL queries, make sure to use PreparedStatements to avoid SQL Injection, rather than building SQL strings."}],"answers":[{"tags":[],"owner":{"account_id":36759,"reputation":38034,"user_id":104950,"accept_rate":93,"display_name":"Amir Afghani"},"down_vote_count":0,"up_vote_count":33,"is_accepted":false,"score":33,"last_activity_date":1266947617,"creation_date":1266947617,"answer_id":2320465,"question_id":2320404,"body_markdown":"There are many different ways to achieve this (e.g proxies, ASM), but the simplest approach, one that you can start with when prototyping is:\r\n\r\n    import java.io.*;\r\n    import java.util.*;\r\n    import java.lang.reflect.*;\r\n    \r\n    public class MakeTodayClass {\r\n      Date today = new Date();\r\n      String todayMillis = Long.toString(today.getTime());\r\n      String todayClass = &quot;z_&quot; + todayMillis;\r\n      String todaySource = todayClass + &quot;.java&quot;;\r\n      \r\n      public static void main (String args[]){\r\n        MakeTodayClass mtc = new MakeTodayClass();\r\n        mtc.createIt();\r\n        if (mtc.compileIt()) {\r\n           System.out.println(&quot;Running &quot; + mtc.todayClass + &quot;:\\n\\n&quot;);\r\n           mtc.runIt();\r\n           }\r\n        else\r\n           System.out.println(mtc.todaySource + &quot; is bad.&quot;);\r\n        }\r\n    \r\n      public void createIt() {\r\n        try {\r\n          FileWriter aWriter = new FileWriter(todaySource, true);\r\n          aWriter.write(&quot;public class &quot;+ todayClass + &quot;{&quot;);\r\n          aWriter.write(&quot; public void doit() {&quot;);\r\n          aWriter.write(&quot; System.out.println(\\&quot;&quot;+todayMillis+&quot;\\&quot;);&quot;);\r\n          aWriter.write(&quot; }}\\n&quot;);\r\n          aWriter.flush();      \r\n          aWriter.close();\r\n          }\r\n        catch(Exception e){\r\n          e.printStackTrace();\r\n          }\r\n        }\r\n      \r\n      public boolean compileIt() {\r\n        String [] source = { new String(todaySource)};\r\n        ByteArrayOutputStream baos= new ByteArrayOutputStream();\r\n    \r\n        new sun.tools.javac.Main(baos,source[0]).compile(source);\r\n        // if using JDK &gt;= 1.3 then use\r\n        //   public static int com.sun.tools.javac.Main.compile(source);    \r\n        return (baos.toString().indexOf(&quot;error&quot;)==-1);\r\n        }\r\n        \r\n      public void runIt() {\r\n        try {\r\n          Class params[] = {};\r\n          Object paramsObj[] = {};\r\n          Class thisClass = Class.forName(todayClass);\r\n          Object iClass = thisClass.newInstance();\r\n          Method thisMethod = thisClass.getDeclaredMethod(&quot;doit&quot;, params);\r\n          thisMethod.invoke(iClass, paramsObj);\r\n          }\r\n        catch (Exception e) {\r\n          e.printStackTrace();\r\n          }\r\n        }\r\n    }","title":"Creating classes dynamically with Java","body":"<p>There are many different ways to achieve this (e.g proxies, ASM), but the simplest approach, one that you can start with when prototyping is:</p>\n\n<pre><code>import java.io.*;\nimport java.util.*;\nimport java.lang.reflect.*;\n\npublic class MakeTodayClass {\n  Date today = new Date();\n  String todayMillis = Long.toString(today.getTime());\n  String todayClass = \"z_\" + todayMillis;\n  String todaySource = todayClass + \".java\";\n\n  public static void main (String args[]){\n    MakeTodayClass mtc = new MakeTodayClass();\n    mtc.createIt();\n    if (mtc.compileIt()) {\n       System.out.println(\"Running \" + mtc.todayClass + \":\\n\\n\");\n       mtc.runIt();\n       }\n    else\n       System.out.println(mtc.todaySource + \" is bad.\");\n    }\n\n  public void createIt() {\n    try {\n      FileWriter aWriter = new FileWriter(todaySource, true);\n      aWriter.write(\"public class \"+ todayClass + \"{\");\n      aWriter.write(\" public void doit() {\");\n      aWriter.write(\" System.out.println(\\\"\"+todayMillis+\"\\\");\");\n      aWriter.write(\" }}\\n\");\n      aWriter.flush();      \n      aWriter.close();\n      }\n    catch(Exception e){\n      e.printStackTrace();\n      }\n    }\n\n  public boolean compileIt() {\n    String [] source = { new String(todaySource)};\n    ByteArrayOutputStream baos= new ByteArrayOutputStream();\n\n    new sun.tools.javac.Main(baos,source[0]).compile(source);\n    // if using JDK &gt;= 1.3 then use\n    //   public static int com.sun.tools.javac.Main.compile(source);    \n    return (baos.toString().indexOf(\"error\")==-1);\n    }\n\n  public void runIt() {\n    try {\n      Class params[] = {};\n      Object paramsObj[] = {};\n      Class thisClass = Class.forName(todayClass);\n      Object iClass = thisClass.newInstance();\n      Method thisMethod = thisClass.getDeclaredMethod(\"doit\", params);\n      thisMethod.invoke(iClass, paramsObj);\n      }\n    catch (Exception e) {\n      e.printStackTrace();\n      }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":46925,"reputation":8408,"user_id":138837,"accept_rate":60,"display_name":"Drew Wills"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1464547923,"creation_date":1266947625,"answer_id":2320470,"question_id":2320404,"body_markdown":"This is possible, but (I believe) you need something like [ASM][1] or [BCEL][2].\r\n\r\nAlternately, you could use something with more power (like [Groovy][3]).\r\n\r\n\r\n  [1]: http://asm.ow2.org/\r\n  [2]: http://jakarta.apache.org/bcel/\r\n  [3]: http://groovy-lang.org/metaprogramming.html","title":"Creating classes dynamically with Java","body":"<p>This is possible, but (I believe) you need something like <a href=\"http://asm.ow2.org/\" rel=\"nofollow noreferrer\">ASM</a> or <a href=\"http://jakarta.apache.org/bcel/\" rel=\"nofollow noreferrer\">BCEL</a>.</p>\n\n<p>Alternately, you could use something with more power (like <a href=\"http://groovy-lang.org/metaprogramming.html\" rel=\"nofollow noreferrer\">Groovy</a>).</p>\n"},{"tags":[],"owner":{"account_id":70258,"reputation":590444,"user_id":203907,"accept_rate":81,"display_name":"Bozho"},"down_vote_count":2,"up_vote_count":33,"is_accepted":true,"score":31,"last_activity_date":1266992262,"creation_date":1266948175,"answer_id":2320537,"question_id":2320404,"body_markdown":"It is possible to generate classes (via &lt;a href=&quot;http://cglib.sourceforge.net/&quot;&gt;cglib&lt;/a&gt;, &lt;a href=&quot;http://asm.ow2.org/&quot;&gt;asm&lt;/a&gt;, &lt;a href=&quot;http://www.csg.is.titech.ac.jp/~chiba/javassist/&quot;&gt;javassist&lt;/a&gt;, &lt;a href=&quot;http://jakarta.apache.org/bcel/&quot;&gt;bcel&lt;/a&gt;), but you shouldn&#39;t do it that way. Why?\r\n\r\n- the code that&#39;s using the library should expect type `Object` and get all the fields using reflection - not a good idea\r\n- java is statically typed language, and you want to introduce dynamic typing - it&#39;s not the place.\r\n\r\nIf you simply want the data in an undefined format, then you can return it in an array, like `Object[]`, or `Map&lt;String, Object&gt;` if you want them named, and get it from there - it will save you much trouble with unneeded class generation for the only purpose of containing some data that will be obtained by reflection.\r\n\r\nWhat you can do instead is have predefined classes that will hold the data, and pass them as arguments to querying methods. For example:\r\n\r\n     public &lt;T&gt; T executeQuery(Class&lt;T&gt; expectedResultClass, \r\n          String someArg, Object.. otherArgs) {..}\r\n\r\nThus you can use reflection on the passed `expectedResultClass` to create a new object of that type and populate it with the result of the query.\r\n\r\nThat said, I think you could use something existing, like an ORM framework (Hibernate, EclipseLink), spring&#39;s `JdbcTemplate`, etc.","title":"Creating classes dynamically with Java","body":"<p>It is possible to generate classes (via <a href=\"http://cglib.sourceforge.net/\" rel=\"noreferrer\">cglib</a>, <a href=\"http://asm.ow2.org/\" rel=\"noreferrer\">asm</a>, <a href=\"http://www.csg.is.titech.ac.jp/~chiba/javassist/\" rel=\"noreferrer\">javassist</a>, <a href=\"http://jakarta.apache.org/bcel/\" rel=\"noreferrer\">bcel</a>), but you shouldn't do it that way. Why?</p>\n\n<ul>\n<li>the code that's using the library should expect type <code>Object</code> and get all the fields using reflection - not a good idea</li>\n<li>java is statically typed language, and you want to introduce dynamic typing - it's not the place.</li>\n</ul>\n\n<p>If you simply want the data in an undefined format, then you can return it in an array, like <code>Object[]</code>, or <code>Map&lt;String, Object&gt;</code> if you want them named, and get it from there - it will save you much trouble with unneeded class generation for the only purpose of containing some data that will be obtained by reflection.</p>\n\n<p>What you can do instead is have predefined classes that will hold the data, and pass them as arguments to querying methods. For example:</p>\n\n<pre><code> public &lt;T&gt; T executeQuery(Class&lt;T&gt; expectedResultClass, \n      String someArg, Object.. otherArgs) {..}\n</code></pre>\n\n<p>Thus you can use reflection on the passed <code>expectedResultClass</code> to create a new object of that type and populate it with the result of the query.</p>\n\n<p>That said, I think you could use something existing, like an ORM framework (Hibernate, EclipseLink), spring's <code>JdbcTemplate</code>, etc.</p>\n"},{"tags":[],"owner":{"account_id":9608,"reputation":17506,"user_id":17832,"display_name":"JeeBee"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1266951267,"creation_date":1266951267,"answer_id":2320848,"question_id":2320404,"body_markdown":"It will take a couple of minutes to create a data model class for each table, which you can easily map to the database with an ORM like Hibernate or by writing your own JDBC DAOs. It is far easier than delving deeply into reflection.\r\n\r\nYou could create a utility that interrogates the database structure for a table, and creates the data model class and DAO for you. Alternatively you could create the model in Java and create a utility to create the database schema and DAO from that (using reflection and Java 5 Annotations to assist). Don&#39;t forget that javaFieldNames are different from database_column_names typically.","title":"Creating classes dynamically with Java","body":"<p>It will take a couple of minutes to create a data model class for each table, which you can easily map to the database with an ORM like Hibernate or by writing your own JDBC DAOs. It is far easier than delving deeply into reflection.</p>\n\n<p>You could create a utility that interrogates the database structure for a table, and creates the data model class and DAO for you. Alternatively you could create the model in Java and create a utility to create the database schema and DAO from that (using reflection and Java 5 Annotations to assist). Don't forget that javaFieldNames are different from database_column_names typically.</p>\n"},{"tags":[],"owner":{"account_id":19190605,"reputation":47,"user_id":14020402,"display_name":"Leandro Neves"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1642196506,"creation_date":1642196506,"answer_id":70716832,"question_id":2320404,"body_markdown":"Recently I needed to create about 200 simple classes from medatata (objects filled with static data) and I did it through the open source [burningwave][1] library, with the following scenario:\r\n\r\n - The classes needed to have a certain prefix in the name, for example **&quot;Registro &quot;*.java**;\r\n - The classes needed to extend from a superclass **Registro.java**\r\n - The classes needed to contain JPA annotations like **@Entity**, **@Column** (in attributes), **Lombok** annotations and custom annotations.\r\n\r\nHere is the link to the repository with the complete project: https://github.com/leandrosoares6/criacao-classes-entidade-efd\r\n\r\nHere is the code snippet responsible for creating the classes:\r\n\r\n    public class RegistrosClassFactory {\r\n    \tprivate static final String PACOTE = &quot;com.example.demo.model.registros&quot;;\r\n    \tprivate static final String SCHEMA = &quot;MY_SCHEMA&quot;;\r\n    \tprivate static final String PREFIXO = &quot;Registro&quot;;\r\n    \r\n    \tstatic void criaRegistros() {\r\n    \t\tList&lt;RegistroTest&gt; registros = RegistroMetadataFactory.criaMetadados();\r\n    \t\tcriaClasses(registros);\r\n    \t}\r\n    \r\n    \tprivate static void criaClasses(List&lt;RegistroTest&gt; registros) {\r\n    \t\tfor (RegistroTest registroTest : registros) {\r\n    \t\t\tUnitSourceGenerator gerador = UnitSourceGenerator.create(PACOTE);\r\n    \t\t\tClassSourceGenerator registro = ClassSourceGenerator\r\n    \t\t\t\t\t.create(TypeDeclarationSourceGenerator.create(PREFIXO + registroTest.getNome()))\r\n    \t\t\t\t\t.addModifier(Modifier.PUBLIC)\r\n    \t\t\t\t\t.addAnnotation(AnnotationSourceGenerator.create(Getter.class))\r\n    \t\t\t\t\t.addAnnotation(AnnotationSourceGenerator.create(Setter.class))\r\n    \t\t\t\t\t.addAnnotation(AnnotationSourceGenerator.create(NoArgsConstructor.class))\r\n    \t\t\t\t\t.addAnnotation(AnnotationSourceGenerator.create(ToString.class))\r\n    \t\t\t\t\t.addAnnotation(AnnotationSourceGenerator.create(Entity.class))\r\n    \t\t\t\t\t.addAnnotation(AnnotationSourceGenerator.create(Table.class)\r\n    \t\t\t\t\t\t\t.addParameter(&quot;name&quot;,\r\n    \t\t\t\t\t\t\t\t\tVariableSourceGenerator.create(String.format(&quot;\\&quot;%s\\&quot;&quot;,\r\n    \t\t\t\t\t\t\t\t\t\t\tregistroTest.getNomeTabelaBd())))\r\n    \t\t\t\t\t\t\t.addParameter(&quot;schema&quot;, VariableSourceGenerator\r\n    \t\t\t\t\t\t\t\t\t.create(String.format(&quot;\\&quot;%s\\&quot;&quot;, SCHEMA))));\r\n    \r\n    \t\t\tcriaColunas(registroTest.getCampos(), registro);\r\n    \r\n    \t\t\tregistro.addConstructor(FunctionSourceGenerator.create().addModifier(Modifier.PUBLIC)\r\n    \t\t\t\t\t.addParameter(VariableSourceGenerator.create(String.class, &quot;linha&quot;))\r\n    \t\t\t\t\t.addBodyCodeLine(&quot;super(linha);&quot;)).expands(Registro.class);\r\n    \t\t\tgerador.addClass(registro);\r\n    \r\n    \t\t\t// System.out.println(&quot;\\nRegistro gerado:\\n&quot; + gerador.make());\r\n    \t\t\tString caminhoPastaRegistros = System.getProperty(&quot;user.dir&quot;) + &quot;/src/main/java/&quot;;\r\n    \t\t\tgerador.storeToClassPath(caminhoPastaRegistros);\r\n    \t\t}\r\n    \t}\r\n    \r\n    \tprivate static void criaColunas(List&lt;Campo&gt; campos, ClassSourceGenerator registro) {\r\n    \t\tfor (Campo campo : campos) {\r\n    \t\t\tVariableSourceGenerator field = VariableSourceGenerator\r\n    \t\t\t\t\t.create(TypeDeclarationSourceGenerator.create(String.class),\r\n    \t\t\t\t\t\t\tcampo.getNomeAtributo())\r\n    \t\t\t\t\t.addModifier(Modifier.PRIVATE)\r\n    \t\t\t\t\t.addAnnotation(AnnotationSourceGenerator.create(Column.class)\r\n    \t\t\t\t\t\t\t.addParameter(&quot;name&quot;, VariableSourceGenerator\r\n    \t\t\t\t\t\t\t\t\t.create(String.format(&quot;\\&quot;%s\\&quot;&quot;, campo.getNome())))\r\n    \r\n    \t\t\t\t\t)\r\n    \t\t\t\t\t.addAnnotation(AnnotationSourceGenerator.create(Indice.class).addParameter(\r\n    \t\t\t\t\t\t\t&quot;valor&quot;,\r\n    \t\t\t\t\t\t\tVariableSourceGenerator.create(String.valueOf(campo.getSequencial()))));\r\n    \r\n    \t\t\tif (campo.getNome().equals(&quot;ID&quot;)) {\r\n    \t\t\t\tfield.addAnnotation(AnnotationSourceGenerator.create(Id.class));\r\n    \t\t\t}\r\n    \t\t\tif (campo.getEId()) {\r\n    \t\t\t\tfield.addAnnotation(AnnotationSourceGenerator.create(CampoTipoId.class));\r\n    \t\t\t}\r\n    \t\t\tif (campo.getEData()) {\r\n    \t\t\t\tfield.addAnnotation(AnnotationSourceGenerator.create(CampoTipoData.class));\r\n    \t\t\t}\r\n    \t\t\tif (campo.getEDataPart()) {\r\n    \t\t\t\tfield.addAnnotation(AnnotationSourceGenerator.create(CampoTipoDataPart.class));\r\n    \t\t\t}\r\n    \r\n    \t\t\tregistro.addField(field);\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\n  [1]: https://www.burningwave.org/getstarted\r\n","title":"Creating classes dynamically with Java","body":"<p>Recently I needed to create about 200 simple classes from medatata (objects filled with static data) and I did it through the open source <a href=\"https://www.burningwave.org/getstarted\" rel=\"nofollow noreferrer\">burningwave</a> library, with the following scenario:</p>\n<ul>\n<li>The classes needed to have a certain prefix in the name, for example <strong>&quot;Registro &quot;*.java</strong>;</li>\n<li>The classes needed to extend from a superclass <strong>Registro.java</strong></li>\n<li>The classes needed to contain JPA annotations like <strong>@Entity</strong>, <strong>@Column</strong> (in attributes), <strong>Lombok</strong> annotations and custom annotations.</li>\n</ul>\n<p>Here is the link to the repository with the complete project: <a href=\"https://github.com/leandrosoares6/criacao-classes-entidade-efd\" rel=\"nofollow noreferrer\">https://github.com/leandrosoares6/criacao-classes-entidade-efd</a></p>\n<p>Here is the code snippet responsible for creating the classes:</p>\n<pre><code>public class RegistrosClassFactory {\n    private static final String PACOTE = &quot;com.example.demo.model.registros&quot;;\n    private static final String SCHEMA = &quot;MY_SCHEMA&quot;;\n    private static final String PREFIXO = &quot;Registro&quot;;\n\n    static void criaRegistros() {\n        List&lt;RegistroTest&gt; registros = RegistroMetadataFactory.criaMetadados();\n        criaClasses(registros);\n    }\n\n    private static void criaClasses(List&lt;RegistroTest&gt; registros) {\n        for (RegistroTest registroTest : registros) {\n            UnitSourceGenerator gerador = UnitSourceGenerator.create(PACOTE);\n            ClassSourceGenerator registro = ClassSourceGenerator\n                    .create(TypeDeclarationSourceGenerator.create(PREFIXO + registroTest.getNome()))\n                    .addModifier(Modifier.PUBLIC)\n                    .addAnnotation(AnnotationSourceGenerator.create(Getter.class))\n                    .addAnnotation(AnnotationSourceGenerator.create(Setter.class))\n                    .addAnnotation(AnnotationSourceGenerator.create(NoArgsConstructor.class))\n                    .addAnnotation(AnnotationSourceGenerator.create(ToString.class))\n                    .addAnnotation(AnnotationSourceGenerator.create(Entity.class))\n                    .addAnnotation(AnnotationSourceGenerator.create(Table.class)\n                            .addParameter(&quot;name&quot;,\n                                    VariableSourceGenerator.create(String.format(&quot;\\&quot;%s\\&quot;&quot;,\n                                            registroTest.getNomeTabelaBd())))\n                            .addParameter(&quot;schema&quot;, VariableSourceGenerator\n                                    .create(String.format(&quot;\\&quot;%s\\&quot;&quot;, SCHEMA))));\n\n            criaColunas(registroTest.getCampos(), registro);\n\n            registro.addConstructor(FunctionSourceGenerator.create().addModifier(Modifier.PUBLIC)\n                    .addParameter(VariableSourceGenerator.create(String.class, &quot;linha&quot;))\n                    .addBodyCodeLine(&quot;super(linha);&quot;)).expands(Registro.class);\n            gerador.addClass(registro);\n\n            // System.out.println(&quot;\\nRegistro gerado:\\n&quot; + gerador.make());\n            String caminhoPastaRegistros = System.getProperty(&quot;user.dir&quot;) + &quot;/src/main/java/&quot;;\n            gerador.storeToClassPath(caminhoPastaRegistros);\n        }\n    }\n\n    private static void criaColunas(List&lt;Campo&gt; campos, ClassSourceGenerator registro) {\n        for (Campo campo : campos) {\n            VariableSourceGenerator field = VariableSourceGenerator\n                    .create(TypeDeclarationSourceGenerator.create(String.class),\n                            campo.getNomeAtributo())\n                    .addModifier(Modifier.PRIVATE)\n                    .addAnnotation(AnnotationSourceGenerator.create(Column.class)\n                            .addParameter(&quot;name&quot;, VariableSourceGenerator\n                                    .create(String.format(&quot;\\&quot;%s\\&quot;&quot;, campo.getNome())))\n\n                    )\n                    .addAnnotation(AnnotationSourceGenerator.create(Indice.class).addParameter(\n                            &quot;valor&quot;,\n                            VariableSourceGenerator.create(String.valueOf(campo.getSequencial()))));\n\n            if (campo.getNome().equals(&quot;ID&quot;)) {\n                field.addAnnotation(AnnotationSourceGenerator.create(Id.class));\n            }\n            if (campo.getEId()) {\n                field.addAnnotation(AnnotationSourceGenerator.create(CampoTipoId.class));\n            }\n            if (campo.getEData()) {\n                field.addAnnotation(AnnotationSourceGenerator.create(CampoTipoData.class));\n            }\n            if (campo.getEDataPart()) {\n                field.addAnnotation(AnnotationSourceGenerator.create(CampoTipoDataPart.class));\n            }\n\n            registro.addField(field);\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":15800,"reputation":12618,"user_id":94895,"accept_rate":83,"display_name":"Makis"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":130598,"favorite_count":0,"down_vote_count":0,"up_vote_count":43,"accepted_answer_id":2320537,"answer_count":5,"score":43,"last_activity_date":1642196506,"creation_date":1266947122,"question_id":2320404,"body_markdown":"I have tried to find information about this but have come up empty handed:\r\n\r\nI gather it is possible to create a class dynamically in Java using reflection or proxies but I can&#39;t find out how. I&#39;m implementing a simple database framework where I create the SQL queries using reflection. The method gets the object with the database fields as a parameter and creates the query based on that. But it would be very useful if I could also create the object itself dynamically so I wouldn&#39;t have the need to have a simple data wrapper object for each table.\r\n\r\nThe dynamic classes would only need simple fields (`String`, `Integer`, `Double`), e.g.\r\n\r\n    public class Data {\r\n      public Integer id;\r\n      public String name;\r\n    }\r\n\r\n\r\nIs this possible and how would I do this?\r\n\r\nEDIT: This is how I would use this:\r\n\r\n    /** Creates an SQL query for updating a row&#39;s values in the database.\r\n     *\r\n     * @param entity Table name.\r\n     * @param toUpdate Fields and values to update. All of the fields will be\r\n     * updated, so each field must have a meaningful value!\r\n     * @param idFields Fields used to identify the row(s).\r\n     * @param ids Id values for id fields. Values must be in the same order as\r\n     * the fields.\r\n     * @return\r\n     */\r\n    @Override\r\n    public String updateItem(String entity, Object toUpdate, String[] idFields,\r\n            String[] ids) {\r\n        StringBuilder sb = new StringBuilder();\r\n\r\n        sb.append(&quot;UPDATE &quot;);\r\n        sb.append(entity);\r\n        sb.append(&quot;SET &quot;);\r\n\r\n        for (Field f: toUpdate.getClass().getDeclaredFields()) {\r\n            String fieldName = f.getName();\r\n            String value = new String();\r\n            sb.append(fieldName);\r\n            sb.append(&quot;=&quot;);\r\n            sb.append(formatValue(f));\r\n            sb.append(&quot;,&quot;);\r\n        }\r\n\r\n        /* Remove last comma */\r\n        sb.deleteCharAt(sb.toString().length()-1);\r\n\r\n        /* Add where clause */\r\n        sb.append(createWhereClause(idFields, ids));\r\n        \r\n        return sb.toString();\r\n    }\r\n     /** Formats a value for an sql query.\r\n     *\r\n     * This function assumes that the field type is equivalent to the field\r\n     * in the database. In practice this means that this field support two\r\n     * types of fields: string (varchar) and numeric.\r\n     *\r\n     * A string type field will be escaped with single parenthesis (&#39;) because\r\n     * SQL databases expect that. Numbers are returned as-is.\r\n     *\r\n     * If the field is null, a string containing &quot;NULL&quot; is returned instead.\r\n     * \r\n     * @param f The field where the value is.\r\n     * @return Formatted value.\r\n     */\r\n    String formatValue(Field f) {\r\n        String retval = null;\r\n        String type = f.getClass().getName();\r\n        if (type.equals(&quot;String&quot;)) {\r\n            try {\r\n                String value = (String)f.get(f);\r\n                if (value != null) {\r\n                    retval = &quot;&#39;&quot; + value + &quot;&#39;&quot;;\r\n                } else {\r\n                    retval = &quot;NULL&quot;;\r\n                }\r\n            } catch (Exception e) {\r\n                System.err.println(&quot;No such field: &quot; + e.getMessage());\r\n            }\r\n        } else if (type.equals(&quot;Integer&quot;)) {\r\n            try {\r\n                Integer value = (Integer)f.get(f);\r\n                if (value != null) {\r\n                    retval = String.valueOf(value);\r\n                } else {\r\n                    retval = &quot;NULL&quot;;\r\n                }\r\n            } catch (Exception e) {\r\n                System.err.println(&quot;No such field: &quot; + e.getMessage());\r\n            }\r\n        } else {\r\n            try {\r\n                String value = (String) f.get(f);\r\n                if (value != null) {\r\n                    retval = value;\r\n                } else {\r\n                    retval = &quot;NULL&quot;;\r\n                }\r\n            } catch (Exception e) {\r\n                System.err.println(&quot;No such field: &quot; + e.getMessage());\r\n            }\r\n        }\r\n        return retval;\r\n    }","title":"Creating classes dynamically with Java","body":"<p>I have tried to find information about this but have come up empty handed:</p>\n\n<p>I gather it is possible to create a class dynamically in Java using reflection or proxies but I can't find out how. I'm implementing a simple database framework where I create the SQL queries using reflection. The method gets the object with the database fields as a parameter and creates the query based on that. But it would be very useful if I could also create the object itself dynamically so I wouldn't have the need to have a simple data wrapper object for each table.</p>\n\n<p>The dynamic classes would only need simple fields (<code>String</code>, <code>Integer</code>, <code>Double</code>), e.g.</p>\n\n<pre><code>public class Data {\n  public Integer id;\n  public String name;\n}\n</code></pre>\n\n<p>Is this possible and how would I do this?</p>\n\n<p>EDIT: This is how I would use this:</p>\n\n<pre><code>/** Creates an SQL query for updating a row's values in the database.\n *\n * @param entity Table name.\n * @param toUpdate Fields and values to update. All of the fields will be\n * updated, so each field must have a meaningful value!\n * @param idFields Fields used to identify the row(s).\n * @param ids Id values for id fields. Values must be in the same order as\n * the fields.\n * @return\n */\n@Override\npublic String updateItem(String entity, Object toUpdate, String[] idFields,\n        String[] ids) {\n    StringBuilder sb = new StringBuilder();\n\n    sb.append(\"UPDATE \");\n    sb.append(entity);\n    sb.append(\"SET \");\n\n    for (Field f: toUpdate.getClass().getDeclaredFields()) {\n        String fieldName = f.getName();\n        String value = new String();\n        sb.append(fieldName);\n        sb.append(\"=\");\n        sb.append(formatValue(f));\n        sb.append(\",\");\n    }\n\n    /* Remove last comma */\n    sb.deleteCharAt(sb.toString().length()-1);\n\n    /* Add where clause */\n    sb.append(createWhereClause(idFields, ids));\n\n    return sb.toString();\n}\n /** Formats a value for an sql query.\n *\n * This function assumes that the field type is equivalent to the field\n * in the database. In practice this means that this field support two\n * types of fields: string (varchar) and numeric.\n *\n * A string type field will be escaped with single parenthesis (') because\n * SQL databases expect that. Numbers are returned as-is.\n *\n * If the field is null, a string containing \"NULL\" is returned instead.\n * \n * @param f The field where the value is.\n * @return Formatted value.\n */\nString formatValue(Field f) {\n    String retval = null;\n    String type = f.getClass().getName();\n    if (type.equals(\"String\")) {\n        try {\n            String value = (String)f.get(f);\n            if (value != null) {\n                retval = \"'\" + value + \"'\";\n            } else {\n                retval = \"NULL\";\n            }\n        } catch (Exception e) {\n            System.err.println(\"No such field: \" + e.getMessage());\n        }\n    } else if (type.equals(\"Integer\")) {\n        try {\n            Integer value = (Integer)f.get(f);\n            if (value != null) {\n                retval = String.valueOf(value);\n            } else {\n                retval = \"NULL\";\n            }\n        } catch (Exception e) {\n            System.err.println(\"No such field: \" + e.getMessage());\n        }\n    } else {\n        try {\n            String value = (String) f.get(f);\n            if (value != null) {\n                retval = value;\n            } else {\n                retval = \"NULL\";\n            }\n        } catch (Exception e) {\n            System.err.println(\"No such field: \" + e.getMessage());\n        }\n    }\n    return retval;\n}\n</code></pre>\n"},{"tags":["java","junit","mockito"],"comments":[{"owner":{"account_id":20338,"reputation":63801,"user_id":48503,"accept_rate":100,"display_name":"Luke Woodward"},"score":0,"creation_date":1642195153,"post_id":70715811,"comment_id":125015453,"body_markdown":"I&#39;ve answered your question on why you are getting that exception, but to be honest I&#39;m not sure why you&#39;re mocking `UriComponentsBuilder`.  I can understand mocking an OkHttpClient, so that you can test your code without making a network call, but why mock out the `UriComponentsBuilder`?","body":"I&#39;ve answered your question on why you are getting that exception, but to be honest I&#39;m not sure why you&#39;re mocking <code>UriComponentsBuilder</code>.  I can understand mocking an OkHttpClient, so that you can test your code without making a network call, but why mock out the <code>UriComponentsBuilder</code>?"}],"answers":[{"tags":[],"owner":{"account_id":20338,"reputation":63801,"user_id":48503,"accept_rate":100,"display_name":"Luke Woodward"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1642194811,"creation_date":1642194811,"answer_id":70716575,"question_id":70715811,"body_markdown":"You are attempting to mock four method calls in this line:\r\n\r\n```java\r\n    mocked.when(() -&gt; UriComponentsBuilder.fromUriString(&quot;test.go&quot;).pathSegment(&quot;test&quot;)\r\n            .queryParam(&quot;filters[1]&quot;).build()).thenReturn(uriComponents);\r\n```\r\nYou can&#39;t do this.  You can only mock one method call at a time.\r\n\r\nIf you want to mock out `UriComponentsBuilder`, then you will have to create a mock `UriComponentsBuilder`, mock the `pathSegment` and `queryParam` methods to return the mock `UriComponentsBuilder` instance, and finally mock the `build()` method to return `uriComponents`:\r\n\r\n```java\r\n    UriComponentsBuilder uriComponentsBuilder = mock(UriComponentsBuilder.class);\r\n    mocked.when(() -&gt; UriComponentsBuilder.fromUriString(&quot;test.go&quot;))\r\n        .thenReturn(uriComponentsBuilder); \r\n    when(uriComponentsBuilder.pathSegment(&quot;test&quot;)).thenReturn(uriComponentsBuilder);\r\n    when(uriComponentsBuilder.queryParam(&quot;filters[1]&quot;)).thenReturn(uriComponentsBuilder);\r\n    when(uriComponentsBuilder.build()).thenReturn(uriComponents);\r\n```\r\n","title":"Error while mocking OkHttpClient with Mockito","body":"<p>You are attempting to mock four method calls in this line:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    mocked.when(() -&gt; UriComponentsBuilder.fromUriString(&quot;test.go&quot;).pathSegment(&quot;test&quot;)\n            .queryParam(&quot;filters[1]&quot;).build()).thenReturn(uriComponents);\n</code></pre>\n<p>You can't do this.  You can only mock one method call at a time.</p>\n<p>If you want to mock out <code>UriComponentsBuilder</code>, then you will have to create a mock <code>UriComponentsBuilder</code>, mock the <code>pathSegment</code> and <code>queryParam</code> methods to return the mock <code>UriComponentsBuilder</code> instance, and finally mock the <code>build()</code> method to return <code>uriComponents</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    UriComponentsBuilder uriComponentsBuilder = mock(UriComponentsBuilder.class);\n    mocked.when(() -&gt; UriComponentsBuilder.fromUriString(&quot;test.go&quot;))\n        .thenReturn(uriComponentsBuilder); \n    when(uriComponentsBuilder.pathSegment(&quot;test&quot;)).thenReturn(uriComponentsBuilder);\n    when(uriComponentsBuilder.queryParam(&quot;filters[1]&quot;)).thenReturn(uriComponentsBuilder);\n    when(uriComponentsBuilder.build()).thenReturn(uriComponents);\n</code></pre>\n"}],"owner":{"account_id":6960022,"reputation":178,"user_id":5339816,"accept_rate":25,"display_name":"iftekhar khan"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":263,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1642194811,"creation_date":1642189477,"question_id":70715811,"body_markdown":"I want to write test for the below method in Junit5 with Mockito.\r\n\r\n     public List&lt;Data&gt; getData(Long id) {\r\n            UriComponents uriComponents = UriComponentsBuilder.fromUriString(&quot;test.com&quot;)\r\n                    .pathSegment(&quot;/test&quot;)\r\n                    .queryParam(&quot;filters[id]&quot;, id)\r\n                    .build();\r\n        \r\n            Request request = new Request.Builder()\r\n                    .url(uriComponents.toUriString())\r\n                    .method(&quot;GET&quot;, null)\r\n                    .build();\r\n        \r\n            try {\r\n                Response response;\r\n                response = okHttpClient.newCall(request).execute();\r\n        \r\n                TypeReference&lt;List&lt;Data&gt;&gt; listType = new TypeReference&lt;&gt;() {};\r\n                List&lt;Data&gt; list = objectMapper.readValue(Objects.requireNonNull(response.body()).string(), listType);\r\n                response.close();\r\n        \r\n                return list;\r\n            } catch (IOException ioEx) {\r\n                throw new RuntimeException(ioEx);\r\n            }\r\n        }\r\n\r\n**Test**\r\n\r\n   \r\n\r\n     @Test\r\n        public void shouldReturnData() throws IOException {\r\n            try (MockedStatic&lt;UriComponentsBuilder&gt; mocked = mockStatic(UriComponentsBuilder.class)) {\r\n                mocked.when(() -&gt; UriComponentsBuilder.fromUriString(&quot;test.go&quot;).pathSegment(&quot;test&quot;)\r\n                        .queryParam(&quot;filters[1]&quot;).build()).thenReturn(uriComponents);\r\n    \r\n                TypeReference&lt;List&lt;Data&gt;&gt; listType = new TypeReference&lt;&gt;() {};\r\n                List&lt;Data&gt; expectedData = new ObjectMapper().readValue(&quot;{}&quot;, listType);\r\n                List&lt;Data&gt; actualData = MyClient.getData(1234L);\r\n    \r\n                Assertions.assertEquals(expectedData, actualData);\r\n            }\r\n        }\r\n\r\nThe test is failing with below exception:-\r\n\r\n    org.mockito.exceptions.misusing.WrongTypeOfReturnValue: \r\n    UriComponents$MockitoMock$2089413864 cannot be returned by fromUriString()\r\n    fromUriString() should return UriComponentsBuilder\r\n\r\nI am unable to mock UriComponentsBuilder because of this exception.Can anyone please help here?\r\n","title":"Error while mocking OkHttpClient with Mockito","body":"<p>I want to write test for the below method in Junit5 with Mockito.</p>\n<pre><code> public List&lt;Data&gt; getData(Long id) {\n        UriComponents uriComponents = UriComponentsBuilder.fromUriString(&quot;test.com&quot;)\n                .pathSegment(&quot;/test&quot;)\n                .queryParam(&quot;filters[id]&quot;, id)\n                .build();\n    \n        Request request = new Request.Builder()\n                .url(uriComponents.toUriString())\n                .method(&quot;GET&quot;, null)\n                .build();\n    \n        try {\n            Response response;\n            response = okHttpClient.newCall(request).execute();\n    \n            TypeReference&lt;List&lt;Data&gt;&gt; listType = new TypeReference&lt;&gt;() {};\n            List&lt;Data&gt; list = objectMapper.readValue(Objects.requireNonNull(response.body()).string(), listType);\n            response.close();\n    \n            return list;\n        } catch (IOException ioEx) {\n            throw new RuntimeException(ioEx);\n        }\n    }\n</code></pre>\n<p><strong>Test</strong></p>\n<pre><code> @Test\n    public void shouldReturnData() throws IOException {\n        try (MockedStatic&lt;UriComponentsBuilder&gt; mocked = mockStatic(UriComponentsBuilder.class)) {\n            mocked.when(() -&gt; UriComponentsBuilder.fromUriString(&quot;test.go&quot;).pathSegment(&quot;test&quot;)\n                    .queryParam(&quot;filters[1]&quot;).build()).thenReturn(uriComponents);\n\n            TypeReference&lt;List&lt;Data&gt;&gt; listType = new TypeReference&lt;&gt;() {};\n            List&lt;Data&gt; expectedData = new ObjectMapper().readValue(&quot;{}&quot;, listType);\n            List&lt;Data&gt; actualData = MyClient.getData(1234L);\n\n            Assertions.assertEquals(expectedData, actualData);\n        }\n    }\n</code></pre>\n<p>The test is failing with below exception:-</p>\n<pre><code>org.mockito.exceptions.misusing.WrongTypeOfReturnValue: \nUriComponents$MockitoMock$2089413864 cannot be returned by fromUriString()\nfromUriString() should return UriComponentsBuilder\n</code></pre>\n<p>I am unable to mock UriComponentsBuilder because of this exception.Can anyone please help here?</p>\n"},{"tags":["java","android","android-intent","android-activity"],"comments":[{"owner":{"account_id":18581797,"reputation":43,"user_id":13541184,"display_name":"Bryan.C"},"score":0,"creation_date":1642193253,"post_id":70716124,"comment_id":125014956,"body_markdown":"You might want to use intent? https://stackoverflow.com/questions/3872063/how-to-launch-an-activity-from-another-application-in-android","body":"You might want to use intent? <a href=\"https://stackoverflow.com/questions/3872063/how-to-launch-an-activity-from-another-application-in-android\" title=\"how to launch an activity from another application in android\">stackoverflow.com/questions/3872063/&hellip;</a>"},{"owner":{"account_id":11075738,"reputation":39,"user_id":8132524,"display_name":"Marius Nicolae"},"score":0,"creation_date":1642193949,"post_id":70716124,"comment_id":125015166,"body_markdown":"I have edited the code, yes i am using intent.\nIntent intent = new Intent(otherContext, otherClass);\nstartActivity(intent);","body":"I have edited the code, yes i am using intent. Intent intent = new Intent(otherContext, otherClass); startActivity(intent);"}],"owner":{"account_id":11075738,"reputation":39,"user_id":8132524,"display_name":"Marius Nicolae"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":131,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1642193926,"creation_date":1642191687,"question_id":70716124,"body_markdown":"In Android Studio, i am reading the book: &quot;Android Development for Dummies(2nd edition)&quot; I copied the exact code from the book so I&#39;m trying to start another application activity, here is the code I&#39;m using:\r\n\r\n```java\r\nContext otherContext;\r\nString otherContextString = &quot;com.taozen.weather_sunshine&quot;;\r\n\r\ntry{\r\n    otherContext = otherContext.createPackageContext(otherContextString, Context.CONTEXT_IGNORE_SECURITY | Context.CONTEXT_INCLUDE_CODE);        \r\n} \r\ncatch (PackageManager.NameNotFoundException e) {\r\n    e.printStackTrace();\r\n}\r\n\r\nClass&lt;?&gt; otherClass = null;\r\n\r\ntry{\r\n    otherClass = otherContext.getClassLoader().loadClass(&quot;com.taozen.weather_sunshine.MainActivity&quot;);\r\n}\r\ncatch (ClassNotFoundException e){\r\n    e.printStackTrace();\r\n}\r\n\r\nIntent intent = new Intent(otherContext, otherClass);\r\nstartActivity(intent);\r\n```\r\n\r\nIt works like this, but i wanna know why the method above doesn&#39;t work.\r\n```\r\n//        Intent intent = new Intent(Intent.ACTION_MAIN);\r\n//        intent.setClassName(&quot;com.taozen.weather_sunshine&quot;, &quot;com.taozen.weather_sunshine.MainActivity&quot;);\r\n//        startActivity(intent);\r\n//        finish();\r\n```","title":"Android starting another application activity does not work","body":"<p>In Android Studio, i am reading the book: &quot;Android Development for Dummies(2nd edition)&quot; I copied the exact code from the book so I'm trying to start another application activity, here is the code I'm using:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Context otherContext;\nString otherContextString = &quot;com.taozen.weather_sunshine&quot;;\n\ntry{\n    otherContext = otherContext.createPackageContext(otherContextString, Context.CONTEXT_IGNORE_SECURITY | Context.CONTEXT_INCLUDE_CODE);        \n} \ncatch (PackageManager.NameNotFoundException e) {\n    e.printStackTrace();\n}\n\nClass&lt;?&gt; otherClass = null;\n\ntry{\n    otherClass = otherContext.getClassLoader().loadClass(&quot;com.taozen.weather_sunshine.MainActivity&quot;);\n}\ncatch (ClassNotFoundException e){\n    e.printStackTrace();\n}\n\nIntent intent = new Intent(otherContext, otherClass);\nstartActivity(intent);\n</code></pre>\n<p>It works like this, but i wanna know why the method above doesn't work.</p>\n<pre><code>//        Intent intent = new Intent(Intent.ACTION_MAIN);\n//        intent.setClassName(&quot;com.taozen.weather_sunshine&quot;, &quot;com.taozen.weather_sunshine.MainActivity&quot;);\n//        startActivity(intent);\n//        finish();\n</code></pre>\n"},{"tags":["java","mongodb","google-cloud-dataflow","apache-beam"],"answers":[{"tags":[],"owner":{"account_id":14798284,"reputation":1363,"user_id":10687325,"display_name":"Alexey Romanenko"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1642193671,"creation_date":1642193671,"answer_id":70716419,"question_id":70712919,"body_markdown":"I don&#39;t think it&#39;s possible now since anyway `MongodbIO.Read` will return a `PCollection&lt;Document&gt;` that has to be converted into `PCollection&lt;TableRow&gt;`.\r\n\r\nHowever, if you need it to write the result of `MongodbIO.Read` into BigQuery then I think you may try to use `BigQueryIO.Write.withFormatFunction(...)` and provide a function to convert MongoDB document into `TableRow`. Though, I think it will be kind of the same in terms of performance.","title":"How to convert Documents read from Mongo Collection using MongoDbIO.read() directly to a table row without explicity mentioning each and every key?","body":"<p>I don't think it's possible now since anyway <code>MongodbIO.Read</code> will return a <code>PCollection&lt;Document&gt;</code> that has to be converted into <code>PCollection&lt;TableRow&gt;</code>.</p>\n<p>However, if you need it to write the result of <code>MongodbIO.Read</code> into BigQuery then I think you may try to use <code>BigQueryIO.Write.withFormatFunction(...)</code> and provide a function to convert MongoDB document into <code>TableRow</code>. Though, I think it will be kind of the same in terms of performance.</p>\n"}],"owner":{"account_id":1528656,"reputation":23,"user_id":1426451,"display_name":"Bro3"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":170,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":70716419,"answer_count":1,"score":1,"last_activity_date":1642193671,"creation_date":1642174151,"question_id":70712919,"body_markdown":"```\r\nRead read= MongoDbIO.read().withUri(&lt;uri&gt;).withBucketAuto(true)\r\n    \t\t.withDatabase(&lt;db&gt;).withCollection(&lt;collection&gt;);\r\n\r\nPCollection&lt;Document&gt; lines = p.apply(read);\r\n```\r\n\r\nHow to convert `lines` to `tablerows` dynamically _without_ fetching each line and setting the table row like this:\r\n\r\n```\r\nString offer_id=document.getString(&quot;oid&quot;);\r\nTableRow row;\r\nrow=new TableRow().set(&quot;offerId&quot;, offer_id)\r\n```\r\n\r\n","title":"How to convert Documents read from Mongo Collection using MongoDbIO.read() directly to a table row without explicity mentioning each and every key?","body":"<pre><code>Read read= MongoDbIO.read().withUri(&lt;uri&gt;).withBucketAuto(true)\n            .withDatabase(&lt;db&gt;).withCollection(&lt;collection&gt;);\n\nPCollection&lt;Document&gt; lines = p.apply(read);\n</code></pre>\n<p>How to convert <code>lines</code> to <code>tablerows</code> dynamically <em>without</em> fetching each line and setting the table row like this:</p>\n<pre><code>String offer_id=document.getString(&quot;oid&quot;);\nTableRow row;\nrow=new TableRow().set(&quot;offerId&quot;, offer_id)\n</code></pre>\n"},{"tags":["java","spring-boot","spring-security"],"answers":[{"tags":[],"owner":{"account_id":136251,"reputation":87506,"user_id":339637,"accept_rate":55,"display_name":"Ken Chan"},"down_vote_count":0,"up_vote_count":16,"is_accepted":true,"score":16,"last_activity_date":1558866712,"creation_date":1558866712,"answer_id":56312719,"question_id":56308456,"body_markdown":"    Caused by: org.springframework.security.config.annotation.AlreadyBuiltException: This object has already been built\r\n        at org.springframework.security.config.annotation.AbstractSecurityBuilder.build(AbstractSecurityBuilder.java:44) ~[spring-security-config-5.1.4.RELEASE.jar:5.1.4.RELEASE]\r\n        at org.springframework.security.config.annotation.web.builders.WebSecurity.performBuild(WebSecurity.java:294) ~[spring-security-config-5.1.4.RELEASE.jar:5.1.4.RELEASE]\r\n        at org.springframework.security.config.annotation.web.builders.WebSecurity.performBuild(WebSecurity.java:79) ~[spring-security-config-5.1.4.RELEASE.jar:5.1.4.RELEASE]\r\n        at org.springframework.security.config.annotation.AbstractConfiguredSecurityBuilder.doBuild(AbstractConfiguredSecurityBuilder.java:334) ~[spring-security-config-5.1.4.RELEASE.jar:5.1.4.RELEASE]\r\n\r\nIt happens when `HttpSecurity#build()` is called more than one time per instance. You don&#39;t need to call `HttpSecurity#build()` when configuring `HttpSecurity` as spring security will call it behind scenes. So removing `build()` in `configure(HttpSecurity http)` should solve the problem : \r\n\r\n\r\n    @Override\r\n    public void configure(HttpSecurity http) throws Exception {\r\n        http.csrf().disable().authorizeRequests()\r\n                .antMatchers(&quot;/*/inserir&quot;).hasAuthority(ROLE_ULTRA)\r\n                .anyRequest().authenticated()\r\n                .and().formLogin();\r\n    }\r\n\r\n","title":"&quot;AlreadyBuiltException: This object has already been built&quot; when building &quot;springSecurityFilterChain&quot;","body":"<pre><code>Caused by: org.springframework.security.config.annotation.AlreadyBuiltException: This object has already been built\n    at org.springframework.security.config.annotation.AbstractSecurityBuilder.build(AbstractSecurityBuilder.java:44) ~[spring-security-config-5.1.4.RELEASE.jar:5.1.4.RELEASE]\n    at org.springframework.security.config.annotation.web.builders.WebSecurity.performBuild(WebSecurity.java:294) ~[spring-security-config-5.1.4.RELEASE.jar:5.1.4.RELEASE]\n    at org.springframework.security.config.annotation.web.builders.WebSecurity.performBuild(WebSecurity.java:79) ~[spring-security-config-5.1.4.RELEASE.jar:5.1.4.RELEASE]\n    at org.springframework.security.config.annotation.AbstractConfiguredSecurityBuilder.doBuild(AbstractConfiguredSecurityBuilder.java:334) ~[spring-security-config-5.1.4.RELEASE.jar:5.1.4.RELEASE]\n</code></pre>\n\n<p>It happens when <code>HttpSecurity#build()</code> is called more than one time per instance. You don't need to call <code>HttpSecurity#build()</code> when configuring <code>HttpSecurity</code> as spring security will call it behind scenes. So removing <code>build()</code> in <code>configure(HttpSecurity http)</code> should solve the problem : </p>\n\n<pre><code>@Override\npublic void configure(HttpSecurity http) throws Exception {\n    http.csrf().disable().authorizeRequests()\n            .antMatchers(\"/*/inserir\").hasAuthority(ROLE_ULTRA)\n            .anyRequest().authenticated()\n            .and().formLogin();\n}\n</code></pre>\n"}],"owner":{"account_id":14917676,"reputation":75,"user_id":10770998,"display_name":"taarak"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7540,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":56312719,"answer_count":1,"score":6,"last_activity_date":1642193252,"creation_date":1558816205,"question_id":56308456,"body_markdown":"I&#39;m developing a Spring Boot application with Spring Security, and could not get it working in any way.\r\n\r\nI want to use Spring Security 5, but at this point I don&#39;t even know what version I am trying to use, and using WebFlux will not help.\r\n\r\nThe problem is that when I create a class that extends WebSecurityConfigurerAdapter, Spring will always throw `org.springframework.security.config.annotation.AlreadyBuiltException: This object has already been built` after `org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;springSecurityFilterChain&#39; defined in class path resource [org/springframework/security/config/annotation/web/configuration/WebSecurityConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [javax.servlet.Filter]: Factory method &#39;springSecurityFilterChain&#39; threw exception; nested exception is org.springframework.security.config.annotation.AlreadyBuiltException: This object has already been built`, and I don&#39;t know why. I tried removing the `@Configuration` annotation, the `@EnableWebSecurity` one, both and adding others, such as `@Order`, but adding or removing annotations don&#39;t seem help.\r\n\r\nHere is the stack trace:\r\n\r\n```\r\norg.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;springSecurityFilterChain&#39; defined in class path resource [org/springframework/security/config/annotation/web/configuration/WebSecurityConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [javax.servlet.Filter]: Factory method &#39;springSecurityFilterChain&#39; threw exception; nested exception is org.springframework.security.config.annotation.AlreadyBuiltException: This object has already been built\r\n\tat org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:627) ~[spring-beans-5.1.5.RELEASE.jar:5.1.5.RELEASE]\r\n\tat org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:456) ~[spring-beans-5.1.5.RELEASE.jar:5.1.5.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1305) ~[spring-beans-5.1.5.RELEASE.jar:5.1.5.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1144) ~[spring-beans-5.1.5.RELEASE.jar:5.1.5.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:555) ~[spring-beans-5.1.5.RELEASE.jar:5.1.5.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:515) ~[spring-beans-5.1.5.RELEASE.jar:5.1.5.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320) ~[spring-beans-5.1.5.RELEASE.jar:5.1.5.RELEASE]\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222) ~[spring-beans-5.1.5.RELEASE.jar:5.1.5.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318) ~[spring-beans-5.1.5.RELEASE.jar:5.1.5.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-5.1.5.RELEASE.jar:5.1.5.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:307) ~[spring-beans-5.1.5.RELEASE.jar:5.1.5.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-5.1.5.RELEASE.jar:5.1.5.RELEASE]\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:849) ~[spring-beans-5.1.5.RELEASE.jar:5.1.5.RELEASE]\r\n\tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:877) ~[spring-context-5.1.5.RELEASE.jar:5.1.5.RELEASE]\r\n\tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:549) ~[spring-context-5.1.5.RELEASE.jar:5.1.5.RELEASE]\r\n\tat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:142) ~[spring-boot-2.1.3.RELEASE.jar:2.1.3.RELEASE]\r\n\tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:775) ~[spring-boot-2.1.3.RELEASE.jar:2.1.3.RELEASE]\r\n\tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:397) ~[spring-boot-2.1.3.RELEASE.jar:2.1.3.RELEASE]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:316) ~[spring-boot-2.1.3.RELEASE.jar:2.1.3.RELEASE]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1260) ~[spring-boot-2.1.3.RELEASE.jar:2.1.3.RELEASE]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1248) ~[spring-boot-2.1.3.RELEASE.jar:2.1.3.RELEASE]\r\n\tat net.digib.LibraryManager.main(LibraryManager.java:14) ~[classes/:na]\r\nCaused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [javax.servlet.Filter]: Factory method &#39;springSecurityFilterChain&#39; threw exception; nested exception is org.springframework.security.config.annotation.AlreadyBuiltException: This object has already been built\r\n\tat org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:185) ~[spring-beans-5.1.5.RELEASE.jar:5.1.5.RELEASE]\r\n\tat org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:622) ~[spring-beans-5.1.5.RELEASE.jar:5.1.5.RELEASE]\r\n\t... 21 common frames omitted\r\nCaused by: org.springframework.security.config.annotation.AlreadyBuiltException: This object has already been built\r\n\tat org.springframework.security.config.annotation.AbstractSecurityBuilder.build(AbstractSecurityBuilder.java:44) ~[spring-security-config-5.1.4.RELEASE.jar:5.1.4.RELEASE]\r\n\tat org.springframework.security.config.annotation.web.builders.WebSecurity.performBuild(WebSecurity.java:294) ~[spring-security-config-5.1.4.RELEASE.jar:5.1.4.RELEASE]\r\n\tat org.springframework.security.config.annotation.web.builders.WebSecurity.performBuild(WebSecurity.java:79) ~[spring-security-config-5.1.4.RELEASE.jar:5.1.4.RELEASE]\r\n\tat org.springframework.security.config.annotation.AbstractConfiguredSecurityBuilder.doBuild(AbstractConfiguredSecurityBuilder.java:334) ~[spring-security-config-5.1.4.RELEASE.jar:5.1.4.RELEASE]\r\n\tat org.springframework.security.config.annotation.AbstractSecurityBuilder.build(AbstractSecurityBuilder.java:41) ~[spring-security-config-5.1.4.RELEASE.jar:5.1.4.RELEASE]\r\n\tat org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration.springSecurityFilterChain(WebSecurityConfiguration.java:104) ~[spring-security-config-5.1.4.RELEASE.jar:5.1.4.RELEASE]\r\n\tat org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$$EnhancerBySpringCGLIB$$46929e0c.CGLIB$springSecurityFilterChain$5(&lt;generated&gt;) ~[spring-security-config-5.1.4.RELEASE.jar:5.1.4.RELEASE]\r\n\tat org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$$EnhancerBySpringCGLIB$$46929e0c$$FastClassBySpringCGLIB$$7515a245.invoke(&lt;generated&gt;) ~[spring-security-config-5.1.4.RELEASE.jar:5.1.4.RELEASE]\r\n\tat org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:244) ~[spring-core-5.1.5.RELEASE.jar:5.1.5.RELEASE]\r\n\tat org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:363) ~[spring-context-5.1.5.RELEASE.jar:5.1.5.RELEASE]\r\n\tat org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$$EnhancerBySpringCGLIB$$46929e0c.springSecurityFilterChain(&lt;generated&gt;) ~[spring-security-config-5.1.4.RELEASE.jar:5.1.4.RELEASE]\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:na]\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:567) ~[na:na]\r\n\tat org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:154) ~[spring-beans-5.1.5.RELEASE.jar:5.1.5.RELEASE]\r\n\t... 22 common frames omitted\r\n```\r\n\r\nAnd my WebSecurityConfig class, that extends WebSecurityConfigurerAdapter:\r\n\r\n```\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.context.annotation.Configuration;\r\nimport org.springframework.security.config.annotation.authentication.builders.AuthenticationManagerBuilder;\r\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\r\nimport org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\r\nimport org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter;\r\nimport org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;\r\nimport org.springframework.security.crypto.password.PasswordEncoder;\r\n\r\n@Configuration\r\n@EnableWebSecurity\r\npublic class WebSecurityConfig extends WebSecurityConfigurerAdapter {\r\n    public static final String ROLE_COMUM = &quot;COMUM&quot;;\r\n    public static final String ROLE_ULTRA = &quot;ULTRA&quot;;\r\n\r\n    @Override\r\n    public void configure(HttpSecurity http) throws Exception {\r\n        http.csrf().disable().authorizeRequests()\r\n                .antMatchers(&quot;/*/inserir&quot;).hasAuthority(ROLE_ULTRA)\r\n                .anyRequest().authenticated()\r\n                .and().formLogin()\r\n                .and().build();\r\n    }\r\n\r\n    @Override\r\n    public void configure(AuthenticationManagerBuilder auth) throws Exception {\r\n        auth.inMemoryAuthentication()\r\n                .passwordEncoder(passwordEncoder())\r\n                .withUser(&quot;usuario&quot;).password(passwordEncoder().encode(&quot;senha&quot;)).roles(ROLE_COMUM)\r\n                .and()\r\n                .withUser(&quot;ultra&quot;).password(passwordEncoder().encode(&quot;ahnes&quot;)).roles(ROLE_COMUM, ROLE_ULTRA);\r\n    }\r\n\r\n    @Bean\r\n    public PasswordEncoder passwordEncoder() {\r\n        return new BCryptPasswordEncoder();\r\n    }\r\n}\r\n```\r\n\r\nHow can I prevent Spring from creating multiple `springSecurityFilterChain`, so that my application can run correctly?","title":"&quot;AlreadyBuiltException: This object has already been built&quot; when building &quot;springSecurityFilterChain&quot;","body":"<p>I'm developing a Spring Boot application with Spring Security, and could not get it working in any way.</p>\n\n<p>I want to use Spring Security 5, but at this point I don't even know what version I am trying to use, and using WebFlux will not help.</p>\n\n<p>The problem is that when I create a class that extends WebSecurityConfigurerAdapter, Spring will always throw <code>org.springframework.security.config.annotation.AlreadyBuiltException: This object has already been built</code> after <code>org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'springSecurityFilterChain' defined in class path resource [org/springframework/security/config/annotation/web/configuration/WebSecurityConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [javax.servlet.Filter]: Factory method 'springSecurityFilterChain' threw exception; nested exception is org.springframework.security.config.annotation.AlreadyBuiltException: This object has already been built</code>, and I don't know why. I tried removing the <code>@Configuration</code> annotation, the <code>@EnableWebSecurity</code> one, both and adding others, such as <code>@Order</code>, but adding or removing annotations don't seem help.</p>\n\n<p>Here is the stack trace:</p>\n\n<pre><code>org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'springSecurityFilterChain' defined in class path resource [org/springframework/security/config/annotation/web/configuration/WebSecurityConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [javax.servlet.Filter]: Factory method 'springSecurityFilterChain' threw exception; nested exception is org.springframework.security.config.annotation.AlreadyBuiltException: This object has already been built\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:627) ~[spring-beans-5.1.5.RELEASE.jar:5.1.5.RELEASE]\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:456) ~[spring-beans-5.1.5.RELEASE.jar:5.1.5.RELEASE]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1305) ~[spring-beans-5.1.5.RELEASE.jar:5.1.5.RELEASE]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1144) ~[spring-beans-5.1.5.RELEASE.jar:5.1.5.RELEASE]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:555) ~[spring-beans-5.1.5.RELEASE.jar:5.1.5.RELEASE]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:515) ~[spring-beans-5.1.5.RELEASE.jar:5.1.5.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320) ~[spring-beans-5.1.5.RELEASE.jar:5.1.5.RELEASE]\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222) ~[spring-beans-5.1.5.RELEASE.jar:5.1.5.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318) ~[spring-beans-5.1.5.RELEASE.jar:5.1.5.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-5.1.5.RELEASE.jar:5.1.5.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:307) ~[spring-beans-5.1.5.RELEASE.jar:5.1.5.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-5.1.5.RELEASE.jar:5.1.5.RELEASE]\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:849) ~[spring-beans-5.1.5.RELEASE.jar:5.1.5.RELEASE]\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:877) ~[spring-context-5.1.5.RELEASE.jar:5.1.5.RELEASE]\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:549) ~[spring-context-5.1.5.RELEASE.jar:5.1.5.RELEASE]\n    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:142) ~[spring-boot-2.1.3.RELEASE.jar:2.1.3.RELEASE]\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:775) ~[spring-boot-2.1.3.RELEASE.jar:2.1.3.RELEASE]\n    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:397) ~[spring-boot-2.1.3.RELEASE.jar:2.1.3.RELEASE]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:316) ~[spring-boot-2.1.3.RELEASE.jar:2.1.3.RELEASE]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1260) ~[spring-boot-2.1.3.RELEASE.jar:2.1.3.RELEASE]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1248) ~[spring-boot-2.1.3.RELEASE.jar:2.1.3.RELEASE]\n    at net.digib.LibraryManager.main(LibraryManager.java:14) ~[classes/:na]\nCaused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [javax.servlet.Filter]: Factory method 'springSecurityFilterChain' threw exception; nested exception is org.springframework.security.config.annotation.AlreadyBuiltException: This object has already been built\n    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:185) ~[spring-beans-5.1.5.RELEASE.jar:5.1.5.RELEASE]\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:622) ~[spring-beans-5.1.5.RELEASE.jar:5.1.5.RELEASE]\n    ... 21 common frames omitted\nCaused by: org.springframework.security.config.annotation.AlreadyBuiltException: This object has already been built\n    at org.springframework.security.config.annotation.AbstractSecurityBuilder.build(AbstractSecurityBuilder.java:44) ~[spring-security-config-5.1.4.RELEASE.jar:5.1.4.RELEASE]\n    at org.springframework.security.config.annotation.web.builders.WebSecurity.performBuild(WebSecurity.java:294) ~[spring-security-config-5.1.4.RELEASE.jar:5.1.4.RELEASE]\n    at org.springframework.security.config.annotation.web.builders.WebSecurity.performBuild(WebSecurity.java:79) ~[spring-security-config-5.1.4.RELEASE.jar:5.1.4.RELEASE]\n    at org.springframework.security.config.annotation.AbstractConfiguredSecurityBuilder.doBuild(AbstractConfiguredSecurityBuilder.java:334) ~[spring-security-config-5.1.4.RELEASE.jar:5.1.4.RELEASE]\n    at org.springframework.security.config.annotation.AbstractSecurityBuilder.build(AbstractSecurityBuilder.java:41) ~[spring-security-config-5.1.4.RELEASE.jar:5.1.4.RELEASE]\n    at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration.springSecurityFilterChain(WebSecurityConfiguration.java:104) ~[spring-security-config-5.1.4.RELEASE.jar:5.1.4.RELEASE]\n    at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$$EnhancerBySpringCGLIB$$46929e0c.CGLIB$springSecurityFilterChain$5(&lt;generated&gt;) ~[spring-security-config-5.1.4.RELEASE.jar:5.1.4.RELEASE]\n    at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$$EnhancerBySpringCGLIB$$46929e0c$$FastClassBySpringCGLIB$$7515a245.invoke(&lt;generated&gt;) ~[spring-security-config-5.1.4.RELEASE.jar:5.1.4.RELEASE]\n    at org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:244) ~[spring-core-5.1.5.RELEASE.jar:5.1.5.RELEASE]\n    at org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:363) ~[spring-context-5.1.5.RELEASE.jar:5.1.5.RELEASE]\n    at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$$EnhancerBySpringCGLIB$$46929e0c.springSecurityFilterChain(&lt;generated&gt;) ~[spring-security-config-5.1.4.RELEASE.jar:5.1.4.RELEASE]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:na]\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\n    at java.base/java.lang.reflect.Method.invoke(Method.java:567) ~[na:na]\n    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:154) ~[spring-beans-5.1.5.RELEASE.jar:5.1.5.RELEASE]\n    ... 22 common frames omitted\n</code></pre>\n\n<p>And my WebSecurityConfig class, that extends WebSecurityConfigurerAdapter:</p>\n\n<pre><code>import org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.security.config.annotation.authentication.builders.AuthenticationManagerBuilder;\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\nimport org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\nimport org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter;\nimport org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;\nimport org.springframework.security.crypto.password.PasswordEncoder;\n\n@Configuration\n@EnableWebSecurity\npublic class WebSecurityConfig extends WebSecurityConfigurerAdapter {\n    public static final String ROLE_COMUM = \"COMUM\";\n    public static final String ROLE_ULTRA = \"ULTRA\";\n\n    @Override\n    public void configure(HttpSecurity http) throws Exception {\n        http.csrf().disable().authorizeRequests()\n                .antMatchers(\"/*/inserir\").hasAuthority(ROLE_ULTRA)\n                .anyRequest().authenticated()\n                .and().formLogin()\n                .and().build();\n    }\n\n    @Override\n    public void configure(AuthenticationManagerBuilder auth) throws Exception {\n        auth.inMemoryAuthentication()\n                .passwordEncoder(passwordEncoder())\n                .withUser(\"usuario\").password(passwordEncoder().encode(\"senha\")).roles(ROLE_COMUM)\n                .and()\n                .withUser(\"ultra\").password(passwordEncoder().encode(\"ahnes\")).roles(ROLE_COMUM, ROLE_ULTRA);\n    }\n\n    @Bean\n    public PasswordEncoder passwordEncoder() {\n        return new BCryptPasswordEncoder();\n    }\n}\n</code></pre>\n\n<p>How can I prevent Spring from creating multiple <code>springSecurityFilterChain</code>, so that my application can run correctly?</p>\n"},{"tags":["java","google-cloud-platform","google-cloud-storage","spring-cloud-gcp"],"comments":[{"owner":{"account_id":23696739,"reputation":961,"user_id":17720363,"display_name":"Catherine O"},"score":1,"creation_date":1642143923,"post_id":70702629,"comment_id":124997638,"body_markdown":"You may want to look in [this](https://stackoverflow.com/questions/61597801/java-lang-nosuchmethoderror-com-google-common-io-bytestreams-exhaustljava-io-i) stack post. Issue is only encountered when running the class in IntelliJ as also mentioned in this [link](https://stackoverflow.com/questions/68564991/accessing-gcs-with-json-key-in-java-and-got-method-threw-com-google-cloud-stora).","body":"You may want to look in <a href=\"https://stackoverflow.com/questions/61597801/java-lang-nosuchmethoderror-com-google-common-io-bytestreams-exhaustljava-io-i\">this</a> stack post. Issue is only encountered when running the class in IntelliJ as also mentioned in this <a href=\"https://stackoverflow.com/questions/68564991/accessing-gcs-with-json-key-in-java-and-got-method-threw-com-google-cloud-stora\">link</a>."}],"answers":[{"tags":[],"owner":{"account_id":23922132,"reputation":21,"user_id":17917798,"display_name":"Anil kumar"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1642193143,"creation_date":1642193143,"answer_id":70716343,"question_id":70702629,"body_markdown":"Did some changes in the code and it works \r\n\r\n \r\n\r\n    StorageOptions options = StorageOptions.newBuilder()\r\n                        .setProjectId(PROJECT_ID)\r\n                        .setCredentials(GoogleCredentials.fromStream(new FileInputStream(PATH_TO_JSON_KEY))).build();\r\n                Storage storage = options.getService();\r\n                byte[] bytes = storage.readAllBytes(BlobId.of(BUCKET_NAME, OBJECT_NAME));\r\n\r\n**use* **storage.readAllBytes()** *instead of* **storage.get()***\r\n\r\nMy Pom\r\n\r\n         &lt;dependencyManagement&gt;\r\n                &lt;dependencies&gt;\r\n                    &lt;dependency&gt;\r\n                        &lt;groupId&gt;com.google.cloud&lt;/groupId&gt;\r\n                        &lt;artifactId&gt;libraries-bom&lt;/artifactId&gt;\r\n                        &lt;version&gt;24.2.0&lt;/version&gt;\r\n                        &lt;type&gt;pom&lt;/type&gt;\r\n                        &lt;scope&gt;import&lt;/scope&gt;\r\n                    &lt;/dependency&gt;\r\n                &lt;/dependencies&gt;\r\n            &lt;/dependencyManagement&gt;\r\n    \r\n            &lt;dependencies&gt;\r\n                &lt;dependency&gt;\r\n                    &lt;groupId&gt;com.google.cloud&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;google-cloud-storage&lt;/artifactId&gt;\r\n                &lt;/dependency&gt;\r\n    \r\n                &lt;dependency&gt;\r\n                    &lt;groupId&gt;com.google.apis&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;google-api-services-storage&lt;/artifactId&gt;\r\n                    &lt;version&gt;v1-rev20190129-1.26.0&lt;/version&gt;\r\n                &lt;/dependency&gt;\r\n    \r\n                &lt;dependency&gt;\r\n                    &lt;groupId&gt;com.google.guava&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;guava&lt;/artifactId&gt;\r\n                &lt;/dependency&gt;\r\n            &lt;/dependencies&gt;\r\n\r\n*use*  **v1-rev20190129-1.26.0** *for* **google-api-services-storage** *because higher version is not compatible with* **cloud-storage 2.2.3v**","title":"Method threw &#39;com.google.cloud.storage.StorageException&#39; exception on connection with GCS with JSON key","body":"<p>Did some changes in the code and it works</p>\n<pre><code>StorageOptions options = StorageOptions.newBuilder()\n                    .setProjectId(PROJECT_ID)\n                    .setCredentials(GoogleCredentials.fromStream(new FileInputStream(PATH_TO_JSON_KEY))).build();\n            Storage storage = options.getService();\n            byte[] bytes = storage.readAllBytes(BlobId.of(BUCKET_NAME, OBJECT_NAME));\n</code></pre>\n<p><em><em>use</em> <strong>storage.readAllBytes()</strong> <em>instead of</em> <strong>storage.get()</strong></em></p>\n<p>My Pom</p>\n<pre><code>     &lt;dependencyManagement&gt;\n            &lt;dependencies&gt;\n                &lt;dependency&gt;\n                    &lt;groupId&gt;com.google.cloud&lt;/groupId&gt;\n                    &lt;artifactId&gt;libraries-bom&lt;/artifactId&gt;\n                    &lt;version&gt;24.2.0&lt;/version&gt;\n                    &lt;type&gt;pom&lt;/type&gt;\n                    &lt;scope&gt;import&lt;/scope&gt;\n                &lt;/dependency&gt;\n            &lt;/dependencies&gt;\n        &lt;/dependencyManagement&gt;\n\n        &lt;dependencies&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;com.google.cloud&lt;/groupId&gt;\n                &lt;artifactId&gt;google-cloud-storage&lt;/artifactId&gt;\n            &lt;/dependency&gt;\n\n            &lt;dependency&gt;\n                &lt;groupId&gt;com.google.apis&lt;/groupId&gt;\n                &lt;artifactId&gt;google-api-services-storage&lt;/artifactId&gt;\n                &lt;version&gt;v1-rev20190129-1.26.0&lt;/version&gt;\n            &lt;/dependency&gt;\n\n            &lt;dependency&gt;\n                &lt;groupId&gt;com.google.guava&lt;/groupId&gt;\n                &lt;artifactId&gt;guava&lt;/artifactId&gt;\n            &lt;/dependency&gt;\n        &lt;/dependencies&gt;\n</code></pre>\n<p><em>use</em>  <strong>v1-rev20190129-1.26.0</strong> <em>for</em> <strong>google-api-services-storage</strong> <em>because higher version is not compatible with</em> <strong>cloud-storage 2.2.3v</strong></p>\n"}],"owner":{"account_id":23922132,"reputation":21,"user_id":17917798,"display_name":"Anil kumar"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1302,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70716343,"answer_count":1,"score":0,"last_activity_date":1642193143,"creation_date":1642105169,"question_id":70702629,"body_markdown":"Getting Storage Exception while connection with GCS !!\r\n\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.google.cloud&lt;/groupId&gt;\r\n            &lt;artifactId&gt;google-cloud-storage&lt;/artifactId&gt;\r\n            &lt;version&gt;2.2.2&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.google.guava&lt;/groupId&gt;\r\n            &lt;artifactId&gt;guava&lt;/artifactId&gt;\r\n            &lt;version&gt;30.0-jre&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/2H50m.png","title":"Method threw &#39;com.google.cloud.storage.StorageException&#39; exception on connection with GCS with JSON key","body":"<p>Getting Storage Exception while connection with GCS !!</p>\n<pre><code>&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.google.cloud&lt;/groupId&gt;\n        &lt;artifactId&gt;google-cloud-storage&lt;/artifactId&gt;\n        &lt;version&gt;2.2.2&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.google.guava&lt;/groupId&gt;\n        &lt;artifactId&gt;guava&lt;/artifactId&gt;\n        &lt;version&gt;30.0-jre&lt;/version&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/2H50m.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2H50m.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","maven","encoding","utf-8"],"comments":[{"owner":{"account_id":1223835,"reputation":75858,"user_id":1189885,"accept_rate":43,"display_name":"chrylis -cautiouslyoptimistic-"},"score":0,"creation_date":1471250930,"post_id":38951630,"comment_id":65258178,"body_markdown":"Post your POM. Are you sure you&#39;re using the right encoding for the *compilation* step?","body":"Post your POM. Are you sure you&#39;re using the right encoding for the <i>compilation</i> step?"},{"owner":{"account_id":4335378,"reputation":2920,"user_id":3539973,"display_name":"Prim"},"score":0,"creation_date":1471251149,"post_id":38951630,"comment_id":65258264,"body_markdown":"Are you sure you added in your pom a property like this `&lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;` ? If not, try to do this","body":"Are you sure you added in your pom a property like this <code>&lt;project.build.sourceEncoding&gt;UTF-8&lt;&#47;project.build.sourceEnc&zwnj;&#8203;oding&gt;</code> ? If not, try to do this"},{"owner":{"account_id":6586068,"reputation":1466,"user_id":5088796,"accept_rate":10,"display_name":"Yanick Salzmann"},"score":0,"creation_date":1471257560,"post_id":38951630,"comment_id":65261013,"body_markdown":"I have added the POM","body":"I have added the POM"},{"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"score":0,"creation_date":1471258427,"post_id":38951630,"comment_id":65261343,"body_markdown":"Try first u-escaped text, so as to check that the editor encoding equals the javac encoding: `&quot;\\u00E4\\u00F6\\u00FC...&quot;` (&#228;&#246;&#252;...). Especially as Windows-1252 would cover the letters too.","body":"Try first u-escaped text, so as to check that the editor encoding equals the javac encoding: <code>&quot;\\u00E4\\u00F6\\u00FC...&quot;</code> (&#228;&#246;&#252;...). Especially as Windows-1252 would cover the letters too."},{"owner":{"account_id":6586068,"reputation":1466,"user_id":5088796,"accept_rate":10,"display_name":"Yanick Salzmann"},"score":0,"creation_date":1471258868,"post_id":38951630,"comment_id":65261521,"body_markdown":"Good idea, I did the following:\n`NFLAuth.sign(&quot;\\u00E4\\u00F6\\u00FC&quot;);` and within that method I printed the `getBytes()` of the input variable. **IntelliJ**: `C3 A4 C3 B6 C3 BC` **Maven**: `E4 F6 FC` So apparently it is not using UTF-8 encoding in Maven...","body":"Good idea, I did the following: <code>NFLAuth.sign(&quot;\\u00E4\\u00F6\\u00FC&quot;);</code> and within that method I printed the <code>getBytes()</code> of the input variable. <b>IntelliJ</b>: <code>C3 A4 C3 B6 C3 BC</code> <b>Maven</b>: <code>E4 F6 FC</code> So apparently it is not using UTF-8 encoding in Maven..."},{"owner":{"account_id":6586068,"reputation":1466,"user_id":5088796,"accept_rate":10,"display_name":"Yanick Salzmann"},"score":0,"creation_date":1471259262,"post_id":38951630,"comment_id":65261683,"body_markdown":"I also checked with a hex editor how the .java file looks and it seems to be UTF-8 encoded: `String a = &quot;&#195;&#182;&#195;&#164;&#195;&#188;&quot;; NFLAuth.sign(a);` (for `String a = &quot;&#246;&#228;&#252;&quot;; NFLAuth.sign(a);`)","body":"I also checked with a hex editor how the .java file looks and it seems to be UTF-8 encoded: <code>String a = &quot;&#195;&#182;&#195;&#164;&#195;&#188;&quot;; NFLAuth.sign(a);</code> (for <code>String a = &quot;&#246;&#228;&#252;&quot;; NFLAuth.sign(a);</code>)"}],"answers":[{"tags":[],"owner":{"account_id":6586068,"reputation":1466,"user_id":5088796,"accept_rate":10,"display_name":"Yanick Salzmann"},"down_vote_count":0,"up_vote_count":36,"is_accepted":true,"score":36,"last_activity_date":1608507425,"creation_date":1471267291,"answer_id":38955899,"question_id":38951630,"body_markdown":"The maven surefire plugin also needs to read the files as UTF-8 otherwise it wont do it :). I had tried something like this before but with the wrong Element in `&lt;configuration/&gt;`...\r\n\r\nProper configuration:\r\n\r\n    &lt;plugin&gt;\r\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n        &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n        &lt;configuration&gt;\r\n            &lt;argLine&gt;-Dfile.encoding=UTF-8&lt;/argLine&gt;\r\n        &lt;/configuration&gt;\r\n    &lt;/plugin&gt;","title":"Encoding in Maven Tests not working properly","body":"<p>The maven surefire plugin also needs to read the files as UTF-8 otherwise it wont do it :). I had tried something like this before but with the wrong Element in <code>&lt;configuration/&gt;</code>...</p>\n<p>Proper configuration:</p>\n<pre><code>&lt;plugin&gt;\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n    &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n    &lt;configuration&gt;\n        &lt;argLine&gt;-Dfile.encoding=UTF-8&lt;/argLine&gt;\n    &lt;/configuration&gt;\n&lt;/plugin&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2628230,"reputation":1572,"user_id":2274819,"accept_rate":60,"display_name":"JRr"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1635845482,"creation_date":1635845482,"answer_id":69808123,"question_id":38951630,"body_markdown":"Set (Windows) environment variable JAVA_TOOL_OPTIONS to -Dfile.encoding=UTF8\r\n\r\nThe other answer (set encoding to Surefire config) did not solve my issue.\r\n\r\nAfter setting JAVA_TOOL_OPTIONS, no surefire configuration is needed.","title":"Encoding in Maven Tests not working properly","body":"<p>Set (Windows) environment variable JAVA_TOOL_OPTIONS to -Dfile.encoding=UTF8</p>\n<p>The other answer (set encoding to Surefire config) did not solve my issue.</p>\n<p>After setting JAVA_TOOL_OPTIONS, no surefire configuration is needed.</p>\n"},{"tags":[],"owner":{"account_id":13222037,"reputation":874,"user_id":9548462,"display_name":"Missael De Nadai"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1642193091,"creation_date":1642193091,"answer_id":70716337,"question_id":38951630,"body_markdown":"I had to only set two Windows environment variables:\r\n- JAVA_TOOL_OPTIONS to -Dfile.encoding=UTF8 (thanks to @joro)\r\n- MAVEN_OPTS to -Dfile.encoding=UTF8","title":"Encoding in Maven Tests not working properly","body":"<p>I had to only set two Windows environment variables:</p>\n<ul>\n<li>JAVA_TOOL_OPTIONS to -Dfile.encoding=UTF8 (thanks to @joro)</li>\n<li>MAVEN_OPTS to -Dfile.encoding=UTF8</li>\n</ul>\n"}],"owner":{"account_id":6586068,"reputation":1466,"user_id":5088796,"accept_rate":10,"display_name":"Yanick Salzmann"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7968,"favorite_count":0,"down_vote_count":0,"up_vote_count":19,"accepted_answer_id":38955899,"answer_count":3,"score":19,"last_activity_date":1642193091,"creation_date":1471249214,"question_id":38951630,"body_markdown":"I am currently trying to write a test that is run via Maven that specifically addresses strings containing UTF-8 characters. If I run said test in IntelliJ everything is fine and the results are as expected. If i run the test using mvn test, then (only) the test that is testing UTF-8 characters is failing.\r\n\r\nThis is my test:\r\n\r\n\r\n    @Test\r\n    public void testWithUTF8() throws InvalidKeyException, NoSuchAlgorithmException {\r\n        String signature = NFLAuth.sign(&quot;Contains UTF-8: &#228;&#252;&#246;&#246;&#246;&#213;&#223;&#205;&#209;&#240;&quot;);\r\n        Assert.assertEquals(&quot;Signature=BSY4prbinpAgzJLv6ffGm+XJb1NTIbGY6gTj8RA3lsA=&quot;, signature);\r\n    }\r\n\r\nFirst of all, yes, I read the question about encoding in Maven and I did everything. Theres the property, its added to the compiler plugin, I have even set JAVA_TOOL_OPTIONS with file.encoding but still no luck. I also dont know what encoding it is using, if I try windows-1252 in IntelliJ the test also fails, but the signature is not the same as maven gets.\r\n\r\nHere is the POM:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n        &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n        &lt;groupId&gt;***&lt;/groupId&gt;\r\n        &lt;artifactId&gt;***&lt;/artifactId&gt;\r\n        &lt;version&gt;1.0&lt;/version&gt;\r\n        &lt;name&gt;***&lt;/name&gt;\r\n        &lt;packaging&gt;jar&lt;/packaging&gt;\r\n    \r\n        &lt;properties&gt;\r\n            &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n        &lt;/properties&gt;\r\n\r\n        &lt;build&gt;\r\n            &lt;plugins&gt;\r\n              &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;2.10&lt;/version&gt;\r\n                &lt;executions&gt;\r\n                  &lt;execution&gt;\r\n                    &lt;id&gt;copy-dependencies&lt;/id&gt;\r\n                    &lt;phase&gt;package&lt;/phase&gt;\r\n                    &lt;goals&gt;\r\n                      &lt;goal&gt;copy-dependencies&lt;/goal&gt;\r\n                    &lt;/goals&gt;\r\n                  &lt;/execution&gt;\r\n                &lt;/executions&gt;\r\n              &lt;/plugin&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\r\n                &lt;/plugin&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;maven-release-plugin&lt;/artifactId&gt;\r\n                &lt;/plugin&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                    &lt;configuration&gt;\r\n                        &lt;source&gt;1.7&lt;/source&gt;\r\n                        &lt;target&gt;1.7&lt;/target&gt;\r\n                        &lt;encoding&gt;${project.build.sourceEncoding}&lt;/encoding&gt;\r\n                    &lt;/configuration&gt;\r\n                &lt;/plugin&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n                &lt;/plugin&gt;\r\n            &lt;/plugins&gt;\r\n        &lt;/build&gt;\r\n    \r\n        &lt;dependencies&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\r\n                &lt;artifactId&gt;commons-lang3&lt;/artifactId&gt;\r\n                &lt;version&gt;3.4&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;com.apigee.edge.4g&lt;/groupId&gt;\r\n                &lt;artifactId&gt;expressions&lt;/artifactId&gt;\r\n                &lt;version&gt;1.0.0&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;com.apigee.edge.4g&lt;/groupId&gt;\r\n                &lt;artifactId&gt;message-flow&lt;/artifactId&gt;\r\n                &lt;version&gt;1.0.0&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;com.apigee.edge.4g&lt;/groupId&gt;\r\n                &lt;artifactId&gt;kernel&lt;/artifactId&gt;\r\n                &lt;version&gt;1.0.0&lt;/version&gt;\r\n                &lt;scope&gt;system&lt;/scope&gt;\r\n                &lt;systemPath&gt;${project.basedir}/lib/kernel-api-1.0.0.jar&lt;/systemPath&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.mockito&lt;/groupId&gt;\r\n                &lt;artifactId&gt;mockito-all&lt;/artifactId&gt;\r\n                &lt;version&gt;1.10.19&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;junit&lt;/groupId&gt;\r\n                &lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n                &lt;version&gt;4.12&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n                &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\r\n                &lt;version&gt;1.7.21&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;joda-time&lt;/groupId&gt;\r\n                &lt;artifactId&gt;joda-time&lt;/artifactId&gt;\r\n                &lt;version&gt;2.9.2&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n        &lt;/dependencies&gt;\r\n    &lt;/project&gt;","title":"Encoding in Maven Tests not working properly","body":"<p>I am currently trying to write a test that is run via Maven that specifically addresses strings containing UTF-8 characters. If I run said test in IntelliJ everything is fine and the results are as expected. If i run the test using mvn test, then (only) the test that is testing UTF-8 characters is failing.</p>\n\n<p>This is my test:</p>\n\n<pre><code>@Test\npublic void testWithUTF8() throws InvalidKeyException, NoSuchAlgorithmException {\n    String signature = NFLAuth.sign(\"Contains UTF-8: äüöööÕßÍÑð\");\n    Assert.assertEquals(\"Signature=BSY4prbinpAgzJLv6ffGm+XJb1NTIbGY6gTj8RA3lsA=\", signature);\n}\n</code></pre>\n\n<p>First of all, yes, I read the question about encoding in Maven and I did everything. Theres the property, its added to the compiler plugin, I have even set JAVA_TOOL_OPTIONS with file.encoding but still no luck. I also dont know what encoding it is using, if I try windows-1252 in IntelliJ the test also fails, but the signature is not the same as maven gets.</p>\n\n<p>Here is the POM:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;groupId&gt;***&lt;/groupId&gt;\n    &lt;artifactId&gt;***&lt;/artifactId&gt;\n    &lt;version&gt;1.0&lt;/version&gt;\n    &lt;name&gt;***&lt;/name&gt;\n    &lt;packaging&gt;jar&lt;/packaging&gt;\n\n    &lt;properties&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;/properties&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n          &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt;\n            &lt;version&gt;2.10&lt;/version&gt;\n            &lt;executions&gt;\n              &lt;execution&gt;\n                &lt;id&gt;copy-dependencies&lt;/id&gt;\n                &lt;phase&gt;package&lt;/phase&gt;\n                &lt;goals&gt;\n                  &lt;goal&gt;copy-dependencies&lt;/goal&gt;\n                &lt;/goals&gt;\n              &lt;/execution&gt;\n            &lt;/executions&gt;\n          &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-release-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;source&gt;1.7&lt;/source&gt;\n                    &lt;target&gt;1.7&lt;/target&gt;\n                    &lt;encoding&gt;${project.build.sourceEncoding}&lt;/encoding&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\n            &lt;artifactId&gt;commons-lang3&lt;/artifactId&gt;\n            &lt;version&gt;3.4&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.apigee.edge.4g&lt;/groupId&gt;\n            &lt;artifactId&gt;expressions&lt;/artifactId&gt;\n            &lt;version&gt;1.0.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.apigee.edge.4g&lt;/groupId&gt;\n            &lt;artifactId&gt;message-flow&lt;/artifactId&gt;\n            &lt;version&gt;1.0.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.apigee.edge.4g&lt;/groupId&gt;\n            &lt;artifactId&gt;kernel&lt;/artifactId&gt;\n            &lt;version&gt;1.0.0&lt;/version&gt;\n            &lt;scope&gt;system&lt;/scope&gt;\n            &lt;systemPath&gt;${project.basedir}/lib/kernel-api-1.0.0.jar&lt;/systemPath&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.mockito&lt;/groupId&gt;\n            &lt;artifactId&gt;mockito-all&lt;/artifactId&gt;\n            &lt;version&gt;1.10.19&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;junit&lt;/groupId&gt;\n            &lt;artifactId&gt;junit&lt;/artifactId&gt;\n            &lt;version&gt;4.12&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n            &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\n            &lt;version&gt;1.7.21&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;joda-time&lt;/groupId&gt;\n            &lt;artifactId&gt;joda-time&lt;/artifactId&gt;\n            &lt;version&gt;2.9.2&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n&lt;/project&gt;\n</code></pre>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":8313,"page":1679,"page_size":100}
