{"items":[{"tags":["java","spring-boot","date","datetime-format"],"comments":[{"owner":{"account_id":15777655,"reputation":1762,"user_id":11385052,"display_name":"Ryan"},"score":1,"creation_date":1649786657,"post_id":71847271,"comment_id":126962852,"body_markdown":"See `LocalDateTime`","body":"See <code>LocalDateTime</code>"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":1,"creation_date":1649788194,"post_id":71847271,"comment_id":126963332,"body_markdown":"*and this is the formate which we are saving in DB 20-MAR-22 12.00.00.00.000000000 AM* Your db column has a character type to hold a date? If so, it shouldn&#39;t.","body":"<i>and this is the formate which we are saving in DB 20-MAR-22 12.00.00.00.000000000 AM</i> Your db column has a character type to hold a date? If so, it shouldn&#39;t."},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1649795853,"post_id":71847271,"comment_id":126965666,"body_markdown":"@g00se Is correct and a bit more. I hope you are using a `timestamp`, best `with time zone` in your database. Since JDBC 4.2 you can and should pass java.time types to your database such as `OffsetDateTime`, `Instant` or `LocalDateTime`. See for example [Dates with no time or timezone component in Java/MySQL](https://stackoverflow.com/questions/285553/dates-with-no-time-or-timezone-component-in-java-mysql). Hibernate will be fine with doing the same. So use no string for it.","body":"@g00se Is correct and a bit more. I hope you are using a <code>timestamp</code>, best <code>with time zone</code> in your database. Since JDBC 4.2 you can and should pass java.time types to your database such as <code>OffsetDateTime</code>, <code>Instant</code> or <code>LocalDateTime</code>. See for example <a href=\"https://stackoverflow.com/questions/285553/dates-with-no-time-or-timezone-component-in-java-mysql\">Dates with no time or timezone component in Java/MySQL</a>. Hibernate will be fine with doing the same. So use no string for it."}],"answers":[{"tags":[],"owner":{"account_id":12455565,"reputation":5317,"user_id":9068895,"display_name":"Alex"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1649790217,"creation_date":1649790217,"answer_id":71847872,"question_id":71847271,"body_markdown":"You could use `DateTimeFormatter` to parse/format date-time objects. There are many [predefined formatters](https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html) or you could build custom if required. For some advanced scenarios you could use `DateTimeFormatterBuilder` that provides many different options for parsing and formatting.\r\n\r\n```\r\nprivate static final DateTimeFormatter CUSTOM_DATE = DateTimeFormatter.ofPattern(&quot;dd-MMM-yy hh.m.ss.n a&quot;);\r\nprivate static final DateTimeFormatter ISO_DATE = DateTimeFormatter.ISO_ZONED_DATE_TIME;\r\n\r\n\r\nString input = &quot;2019-10-12T07:20:50.52Z&quot;;\r\nZonedDateTime date = ZonedDateTime.parse(input, ISO_DATE);\r\nString output = CUSTOM_DATE.format(date);\r\n```\r\n\r\n","title":"How to convert string date into timestamp","body":"<p>You could use <code>DateTimeFormatter</code> to parse/format date-time objects. There are many <a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html\" rel=\"nofollow noreferrer\">predefined formatters</a> or you could build custom if required. For some advanced scenarios you could use <code>DateTimeFormatterBuilder</code> that provides many different options for parsing and formatting.</p>\n<pre><code>private static final DateTimeFormatter CUSTOM_DATE = DateTimeFormatter.ofPattern(&quot;dd-MMM-yy hh.m.ss.n a&quot;);\nprivate static final DateTimeFormatter ISO_DATE = DateTimeFormatter.ISO_ZONED_DATE_TIME;\n\n\nString input = &quot;2019-10-12T07:20:50.52Z&quot;;\nZonedDateTime date = ZonedDateTime.parse(input, ISO_DATE);\nString output = CUSTOM_DATE.format(date);\n</code></pre>\n"}],"owner":{"account_id":23723269,"reputation":121,"user_id":17743546,"display_name":"Learners"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":492,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1649790217,"creation_date":1649786549,"question_id":71847271,"body_markdown":"We are getting a date from an API in string and the format is ```RFC3339```. I need to convert this into a timestamp in this format ```20-MAR-22 12.00.00.00.000000000 AM``` \r\n\r\nI tried using ```Timestamp.valueOf(objUs.getUserAcptDate)``` but here we are getting an exception.\r\n\r\nI found by searching online RFC3339 is in this formate ```&quot;2019-10-12T07:20:50.52Z&quot;``` or it may be without ```T```. \r\n\r\nHow can we convert the coming string from API into a timestamp and this is the formate which we are saving in DB ```20-MAR-22 12.00.00.00.000000000 AM``` ","title":"How to convert string date into timestamp","body":"<p>We are getting a date from an API in string and the format is <code>RFC3339</code>. I need to convert this into a timestamp in this format <code>20-MAR-22 12.00.00.00.000000000 AM</code></p>\n<p>I tried using <code>Timestamp.valueOf(objUs.getUserAcptDate)</code> but here we are getting an exception.</p>\n<p>I found by searching online RFC3339 is in this formate <code>&quot;2019-10-12T07:20:50.52Z&quot;</code> or it may be without <code>T</code>.</p>\n<p>How can we convert the coming string from API into a timestamp and this is the formate which we are saving in DB <code>20-MAR-22 12.00.00.00.000000000 AM</code></p>\n"},{"tags":["java","spring","spring-boot","spring-boot-actuator","health-check"],"comments":[{"owner":{"account_id":1473276,"reputation":110999,"user_id":1384297,"accept_rate":100,"display_name":"Andy Wilkinson"},"score":0,"creation_date":1649782185,"post_id":71843362,"comment_id":126961400,"body_markdown":"I cannot reproduce the behaviour that you have described. With the configuration you&#39;ve shown, accessing http://localhost:8080/livez and http://localhost:8080/readyz produces a 200 response indicating that the server is up. Please update the question with a [minimal, reproducible example](/help/mcve).","body":"I cannot reproduce the behaviour that you have described. With the configuration you&#39;ve shown, accessing <a href=\"http://localhost:8080/livez\" rel=\"nofollow noreferrer\">localhost:8080/livez</a> and <a href=\"http://localhost:8080/readyz\" rel=\"nofollow noreferrer\">localhost:8080/readyz</a> produces a 200 response indicating that the server is up. Please update the question with a <a href=\"/help/mcve\">minimal, reproducible example</a>."},{"owner":{"account_id":20513800,"reputation":35,"user_id":15054958,"display_name":"Malachi Spencer"},"score":0,"creation_date":1649787456,"post_id":71843362,"comment_id":126963103,"body_markdown":"Andy Wilkinson, I have now reproduced what you described on Github. It works without management.endpoint.health.group.readiness.include=* and management.endpoint.health.group.liveness.include=*. However, it doesn&#39;t show details when management.endpoint.health.show-details=always is used.\nI need to include a database check in the readiness group, is there a workaround that makes this possible, given the bug? Otherwise, Spring Boot Actuator is practically unusable for me.","body":"Andy Wilkinson, I have now reproduced what you described on Github. It works without management.endpoint.health.group.readiness.include=* and management.endpoint.health.group.liveness.include=*. However, it doesn&#39;t show details when management.endpoint.health.show-details=always is used. I need to include a database check in the readiness group, is there a workaround that makes this possible, given the bug? Otherwise, Spring Boot Actuator is practically unusable for me."},{"owner":{"account_id":20513800,"reputation":35,"user_id":15054958,"display_name":"Malachi Spencer"},"score":0,"creation_date":1649788782,"post_id":71843362,"comment_id":126963522,"body_markdown":"I have updated the question to reflect that I was able to reproduce/discover the *real* issue.","body":"I have updated the question to reflect that I was able to reproduce/discover the <i>real</i> issue."},{"owner":{"account_id":1473276,"reputation":110999,"user_id":1384297,"accept_rate":100,"display_name":"Andy Wilkinson"},"score":0,"creation_date":1649789564,"post_id":71843362,"comment_id":126963793,"body_markdown":"That&#39;s to be expected. `management.endpoint.health.show-details` configures details for `actuator/health`. It has no effect on individual health groups such as `actuator/health/readiness` or the health probes","body":"That&#39;s to be expected. <code>management.endpoint.health.show-details</code> configures details for <code>actuator&#47;health</code>. It has no effect on individual health groups such as <code>actuator&#47;health&#47;readiness</code> or the health probes"}],"answers":[{"tags":[],"owner":{"account_id":1473276,"reputation":110999,"user_id":1384297,"accept_rate":100,"display_name":"Andy Wilkinson"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1649789903,"creation_date":1649789903,"answer_id":71847815,"question_id":71843362,"body_markdown":"You can make the liveness and readiness health groups available at `:8080/livez` and `:8080/readyz` respectively with full details using the following configuration:\r\n\r\n```\r\nmanagement.endpoint.health.group.liveness.additional-path=server:/livez\r\nmanagement.endpoint.health.group.liveness.show-details=always\r\nmanagement.endpoint.health.group.readiness.additional-path=server:/readyz\r\nmanagement.endpoint.health.group.readiness.show-details=always\r\n```\r\n\r\n```\r\n$ curl localhost:8080/livez\r\n{&quot;status&quot;:&quot;UP&quot;,&quot;components&quot;:{&quot;diskSpace&quot;:{&quot;status&quot;:&quot;UP&quot;,&quot;details&quot;:{&quot;total&quot;:1000240963584,&quot;free&quot;:468848824320,&quot;threshold&quot;:10485760,&quot;exists&quot;:true}},&quot;livenessState&quot;:{&quot;status&quot;:&quot;UP&quot;},&quot;ping&quot;:{&quot;status&quot;:&quot;UP&quot;},&quot;readinessState&quot;:{&quot;status&quot;:&quot;UP&quot;}}}\r\n```\r\n\r\nThis shows the same information as the liveness health group on the management port:\r\n\r\n```\r\n$ curl localhost:8088/actuator/health/liveness\r\n{&quot;status&quot;:&quot;UP&quot;,&quot;components&quot;:{&quot;diskSpace&quot;:{&quot;status&quot;:&quot;UP&quot;,&quot;details&quot;:{&quot;total&quot;:1000240963584,&quot;free&quot;:468845608960,&quot;threshold&quot;:10485760,&quot;exists&quot;:true}},&quot;livenessState&quot;:{&quot;status&quot;:&quot;UP&quot;},&quot;ping&quot;:{&quot;status&quot;:&quot;UP&quot;},&quot;readinessState&quot;:{&quot;status&quot;:&quot;UP&quot;}}}\r\n```\r\n\r\nThe complete configuration used for this, based on your configuration in the question, was the following:\r\n\r\n```\r\nmanagement.server.port=8088\r\n\r\nmanagement.endpoints.enabled-by-default=false\r\nmanagement.endpoint.health.enabled=true\r\nmanagement.endpoint.health.probes.enabled=true\r\nmanagement.endpoint.health.group.liveness.additional-path=server:/livez\r\nmanagement.endpoint.health.group.readiness.additional-path=server:/readyz\r\nmanagement.endpoint.health.group.readiness.show-details=always\r\nmanagement.endpoint.health.group.liveness.show-details=always\r\n```","title":"management.endpoint.health.group.readiness.include=* bug - Spring Boot Actuator","body":"<p>You can make the liveness and readiness health groups available at <code>:8080/livez</code> and <code>:8080/readyz</code> respectively with full details using the following configuration:</p>\n<pre><code>management.endpoint.health.group.liveness.additional-path=server:/livez\nmanagement.endpoint.health.group.liveness.show-details=always\nmanagement.endpoint.health.group.readiness.additional-path=server:/readyz\nmanagement.endpoint.health.group.readiness.show-details=always\n</code></pre>\n<pre><code>$ curl localhost:8080/livez\n{&quot;status&quot;:&quot;UP&quot;,&quot;components&quot;:{&quot;diskSpace&quot;:{&quot;status&quot;:&quot;UP&quot;,&quot;details&quot;:{&quot;total&quot;:1000240963584,&quot;free&quot;:468848824320,&quot;threshold&quot;:10485760,&quot;exists&quot;:true}},&quot;livenessState&quot;:{&quot;status&quot;:&quot;UP&quot;},&quot;ping&quot;:{&quot;status&quot;:&quot;UP&quot;},&quot;readinessState&quot;:{&quot;status&quot;:&quot;UP&quot;}}}\n</code></pre>\n<p>This shows the same information as the liveness health group on the management port:</p>\n<pre><code>$ curl localhost:8088/actuator/health/liveness\n{&quot;status&quot;:&quot;UP&quot;,&quot;components&quot;:{&quot;diskSpace&quot;:{&quot;status&quot;:&quot;UP&quot;,&quot;details&quot;:{&quot;total&quot;:1000240963584,&quot;free&quot;:468845608960,&quot;threshold&quot;:10485760,&quot;exists&quot;:true}},&quot;livenessState&quot;:{&quot;status&quot;:&quot;UP&quot;},&quot;ping&quot;:{&quot;status&quot;:&quot;UP&quot;},&quot;readinessState&quot;:{&quot;status&quot;:&quot;UP&quot;}}}\n</code></pre>\n<p>The complete configuration used for this, based on your configuration in the question, was the following:</p>\n<pre><code>management.server.port=8088\n\nmanagement.endpoints.enabled-by-default=false\nmanagement.endpoint.health.enabled=true\nmanagement.endpoint.health.probes.enabled=true\nmanagement.endpoint.health.group.liveness.additional-path=server:/livez\nmanagement.endpoint.health.group.readiness.additional-path=server:/readyz\nmanagement.endpoint.health.group.readiness.show-details=always\nmanagement.endpoint.health.group.liveness.show-details=always\n</code></pre>\n"}],"owner":{"account_id":20513800,"reputation":35,"user_id":15054958,"display_name":"Malachi Spencer"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6465,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71847815,"answer_count":1,"score":0,"last_activity_date":1649789903,"creation_date":1649769043,"question_id":71843362,"body_markdown":"A [bug in Spring Boot Actuator exists][1] whereby if certain properties are used, `management.endpoint.health.probes.add-additional-paths=true` doesn&#39;t work in exposing the readiness endpoint at `/readyz` and the liveness endpoint at `/livez`. You get a whitelabel error page.\r\n\r\n&gt;  This application has no explicit mapping for /error, so you are\r\n&gt; seeing this as a fallback.\r\n\r\nThose properties include:\r\n\r\n    management.endpoint.health.group.readiness.include=\r\n    management.endpoint.health.group.liveness.include=\r\n    management.endpoint.health.group.liveness.show-details=\r\n    management.endpoint.health.group.readiness.show-details=\r\n\r\nI need to use the management port by default so that I can use `/actuator/metrics` for monitoring. Therefore, in order to have reliable health checks, I need to expose the liveness and readiness endpoints on the main/application port, this is what the purpose of `management.endpoint.health.probes.add-additional-paths=true` is.\r\n\r\nIf I can&#39;t include additional checks in my readiness health check due to this bug, Spring Boot Actuator becomes unusable to me. Is there a workaround that can allow additional checks to be included while still allowing the readiness and liveness endpoints to be successfully exposed on the main/application port?\r\n\r\nI have already tried using `management.endpoint.health.group.readiness.additional-path=server:/readyz`. This does not work.\r\n\r\nI am using Spring Boot version 2.6.5.\r\n\r\n\r\n[1]: https://github.com/spring-projects/spring-boot/issues/30612","title":"management.endpoint.health.group.readiness.include=* bug - Spring Boot Actuator","body":"<p>A <a href=\"https://github.com/spring-projects/spring-boot/issues/30612\" rel=\"nofollow noreferrer\">bug in Spring Boot Actuator exists</a> whereby if certain properties are used, <code>management.endpoint.health.probes.add-additional-paths=true</code> doesn't work in exposing the readiness endpoint at <code>/readyz</code> and the liveness endpoint at <code>/livez</code>. You get a whitelabel error page.</p>\n<blockquote>\n<p>This application has no explicit mapping for /error, so you are\nseeing this as a fallback.</p>\n</blockquote>\n<p>Those properties include:</p>\n<pre><code>management.endpoint.health.group.readiness.include=\nmanagement.endpoint.health.group.liveness.include=\nmanagement.endpoint.health.group.liveness.show-details=\nmanagement.endpoint.health.group.readiness.show-details=\n</code></pre>\n<p>I need to use the management port by default so that I can use <code>/actuator/metrics</code> for monitoring. Therefore, in order to have reliable health checks, I need to expose the liveness and readiness endpoints on the main/application port, this is what the purpose of <code>management.endpoint.health.probes.add-additional-paths=true</code> is.</p>\n<p>If I can't include additional checks in my readiness health check due to this bug, Spring Boot Actuator becomes unusable to me. Is there a workaround that can allow additional checks to be included while still allowing the readiness and liveness endpoints to be successfully exposed on the main/application port?</p>\n<p>I have already tried using <code>management.endpoint.health.group.readiness.additional-path=server:/readyz</code>. This does not work.</p>\n<p>I am using Spring Boot version 2.6.5.</p>\n"},{"tags":["java","micronaut"],"answers":[{"tags":[],"owner":{"account_id":53614,"reputation":75382,"user_id":160313,"display_name":"Burt Beckwith"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1649789666,"creation_date":1649789666,"answer_id":71847777,"question_id":71845816,"body_markdown":"It&#39;s probably the package name - package sub-names should not start with uppercase letters. Change `com.example.Transactions` to `com.example.transactions` (and rename the directory from `Transactions` to `transactions`.","title":"Failed to load a service: io.micronaut.context.exceptions.BeanContextException: | Micronaut","body":"<p>It's probably the package name - package sub-names should not start with uppercase letters. Change <code>com.example.Transactions</code> to <code>com.example.transactions</code> (and rename the directory from <code>Transactions</code> to <code>transactions</code>.</p>\n"}],"owner":{"account_id":16078489,"reputation":943,"user_id":11605100,"display_name":"ajinzrathod"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1245,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71847777,"answer_count":1,"score":0,"last_activity_date":1649789666,"creation_date":1649779132,"question_id":71845816,"body_markdown":"I have just created a file named `TransactionsRepository.java`. I am not calling this class anywhere as of now\r\n\r\n**TransactionsRepository.java**\r\n```java\r\npackage com.example.Transactions;\r\n\r\nimport io.micronaut.data.annotation.Repository;\r\n\r\n// @Repository\r\npublic interface TransactionsRepository {\r\n}\r\n```\r\n\r\n\r\nWhenever I run ./gradlew run, it runs perfectly, but the moment I uncomment this line, it throws an error\r\n```\r\n@Repository\r\n```\r\n\r\n**ERROR**\r\n&gt; Exception in thread &quot;main&quot; java.lang.RuntimeException: Failed to load a service: io.micronaut.context.exceptions.BeanContextException: Unexpected error loading be\r\nan definition [com.example.$Transactions.TransactionsRepository$Intercepted$Definition]: failed to access class com.example.Transactions.TransactionsRepository$In\r\ntercepted from class com.example.$Transactions.TransactionsRepository$Intercepted$Definition$Reference (com.example.Transactions.TransactionsRepository$Intercepte\r\nd and com.example.$Transactions.TransactionsRepository$Intercepted$Definition$Reference are in unnamed module of loader &#39;app&#39;)\r\n\r\nI even tried doing this but still does not work\r\n```java\r\n@Repository\r\npublic interface TransactionsRepository extends  CrudRepository&lt;Transaction, Long&gt;{\r\n}\r\n```\r\n\r\nI have also included below line in my gradle file\r\n\r\n`annotationProcessor(&quot;io.micronaut.data:micronaut-data-hibernate-jpa&quot;)`\r\n\r\n------\r\n\r\nI am very new to micronaut. Its been hours I am trying this. I dont know whats wrong in this code. Please help me if I am missing something.\r\n","title":"Failed to load a service: io.micronaut.context.exceptions.BeanContextException: | Micronaut","body":"<p>I have just created a file named <code>TransactionsRepository.java</code>. I am not calling this class anywhere as of now</p>\n<p><strong>TransactionsRepository.java</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.example.Transactions;\n\nimport io.micronaut.data.annotation.Repository;\n\n// @Repository\npublic interface TransactionsRepository {\n}\n</code></pre>\n<p>Whenever I run ./gradlew run, it runs perfectly, but the moment I uncomment this line, it throws an error</p>\n<pre><code>@Repository\n</code></pre>\n<p><strong>ERROR</strong></p>\n<blockquote>\n<p>Exception in thread &quot;main&quot; java.lang.RuntimeException: Failed to load a service: io.micronaut.context.exceptions.BeanContextException: Unexpected error loading be\nan definition [com.example.$Transactions.TransactionsRepository$Intercepted$Definition]: failed to access class com.example.Transactions.TransactionsRepository$In\ntercepted from class com.example.$Transactions.TransactionsRepository$Intercepted$Definition$Reference (com.example.Transactions.TransactionsRepository$Intercepte\nd and com.example.$Transactions.TransactionsRepository$Intercepted$Definition$Reference are in unnamed module of loader 'app')</p>\n</blockquote>\n<p>I even tried doing this but still does not work</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Repository\npublic interface TransactionsRepository extends  CrudRepository&lt;Transaction, Long&gt;{\n}\n</code></pre>\n<p>I have also included below line in my gradle file</p>\n<p><code>annotationProcessor(&quot;io.micronaut.data:micronaut-data-hibernate-jpa&quot;)</code></p>\n<hr />\n<p>I am very new to micronaut. Its been hours I am trying this. I dont know whats wrong in this code. Please help me if I am missing something.</p>\n"},{"tags":["java","spring","elasticsearch","spring-data-elasticsearch","aws-elasticsearch"],"answers":[{"tags":[],"owner":{"account_id":5534873,"reputation":18496,"user_id":4393565,"accept_rate":67,"display_name":"P.J.Meisch"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1634534155,"creation_date":1634534155,"answer_id":69611099,"question_id":69607732,"body_markdown":"You have to configure to use SSL for the reactive client with one of the `usingSsl()`methods:\r\n\r\n```java\r\n@Override\r\n    @Bean\r\n    public ReactiveElasticsearchClient reactiveElasticsearchClient() {\r\n        final ClientConfiguration clientConfiguration = ClientConfiguration.builder()\r\n                .connectedTo(&quot;localhost:9200&quot;)\r\n                .usingSsl()                 // &lt;-- \r\n                .build();\r\n        return ReactiveRestClients.create(clientConfiguration);\r\n    }\r\n```\r\n","title":"Connecting to ES with Spring Data Elasticsearch (reactive) gives error host not reachable","body":"<p>You have to configure to use SSL for the reactive client with one of the <code>usingSsl()</code>methods:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Override\n    @Bean\n    public ReactiveElasticsearchClient reactiveElasticsearchClient() {\n        final ClientConfiguration clientConfiguration = ClientConfiguration.builder()\n                .connectedTo(&quot;localhost:9200&quot;)\n                .usingSsl()                 // &lt;-- \n                .build();\n        return ReactiveRestClients.create(clientConfiguration);\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":24050525,"reputation":486,"user_id":18029062,"display_name":"KafKafOwn"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1643124357,"creation_date":1643124357,"answer_id":70851287,"question_id":69607732,"body_markdown":"NoReachableHostException is just a generic error they throw when lookupActiveHost(HostProvider interface) fails.\r\n\r\nYou should debug what happens before - for you it&#39;s probably here:\r\n\r\n@Override\r\n\tpublic Mono&lt;ClusterInformation&gt; clusterInfo() {\r\n\r\n\t\treturn createWebClient(endpoint) //\r\n\t\t\t\t.head().uri(&quot;/&quot;) //\r\n\t\t\t\t.exchangeToMono(it -&gt; {\r\n\t\t\t\t\tif (it.statusCode().isError()) {\r\n\t\t\t\t\t\tstate = ElasticsearchHost.offline(endpoint);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tstate = ElasticsearchHost.online(endpoint);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn Mono.just(state);\r\n\t\t\t\t}).onErrorResume(throwable -&gt; {\r\n\t\t\t\t\tstate = ElasticsearchHost.offline(endpoint);\r\n\t\t\t\t\tclientProvider.getErrorListener().accept(throwable);\r\n\t\t\t\t\treturn Mono.just(state);\r\n\t\t\t\t}).map(elasticsearchHost -&gt; new ClusterInformation(Collections.singleton(elasticsearchHost)));\r\n\t}\r\n\r\nsee what is the real exception on error resume.\r\n\r\nI bet you will get SSL Handshake Exception, you can fix it in the clientConfiguration with .usingSsl({SSL CONTEXT HERE})\r\n\r\nYou can create insecure context like this(convert to java if needed):\r\n\r\nSSLContext.getInstance(&quot;TLS&quot;)\r\n\t\t\t.apply { init(null, InsecureTrustManagerFactory.INSTANCE.trustManagers, SecureRandom()) }","title":"Connecting to ES with Spring Data Elasticsearch (reactive) gives error host not reachable","body":"<p>NoReachableHostException is just a generic error they throw when lookupActiveHost(HostProvider interface) fails.</p>\n<p>You should debug what happens before - for you it's probably here:</p>\n<p>@Override\npublic Mono clusterInfo() {</p>\n<pre><code>    return createWebClient(endpoint) //\n            .head().uri(&quot;/&quot;) //\n            .exchangeToMono(it -&gt; {\n                if (it.statusCode().isError()) {\n                    state = ElasticsearchHost.offline(endpoint);\n                } else {\n                    state = ElasticsearchHost.online(endpoint);\n                }\n                return Mono.just(state);\n            }).onErrorResume(throwable -&gt; {\n                state = ElasticsearchHost.offline(endpoint);\n                clientProvider.getErrorListener().accept(throwable);\n                return Mono.just(state);\n            }).map(elasticsearchHost -&gt; new ClusterInformation(Collections.singleton(elasticsearchHost)));\n}\n</code></pre>\n<p>see what is the real exception on error resume.</p>\n<p>I bet you will get SSL Handshake Exception, you can fix it in the clientConfiguration with .usingSsl({SSL CONTEXT HERE})</p>\n<p>You can create insecure context like this(convert to java if needed):</p>\n<p>SSLContext.getInstance(&quot;TLS&quot;)\n.apply { init(null, InsecureTrustManagerFactory.INSTANCE.trustManagers, SecureRandom()) }</p>\n"}],"owner":{"account_id":17661004,"reputation":55,"user_id":12819467,"display_name":"David Gallego"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3571,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":69611099,"answer_count":2,"score":0,"last_activity_date":1649789401,"creation_date":1634497639,"question_id":69607732,"body_markdown":"I&#39;m running on an aws-elasticsearch (with OpenSearch 1.1.x) service and im trying to connect with it from a spring application using spring-data-elasticsearch, according to the [doc][1] i configured the bean as it says.\r\n\r\non my local i used a ssh tunnel from my aws account.\r\n\r\ni used this command:\r\n\r\n```shell\r\nssh -4 -i my-creds.pem ec2-user@xxxx.xxxx.xxxx.xxxx -N -L 9200:vpc-my-custom-domain-etc.us-east-1.es.amazonaws.com:443\r\n```\r\n\r\n so i can connect with OpenSearch dashboard over localhost in my browser through port 9200.\r\n\r\nUsing the [OpenSearch RestHighLevelClient][2] from OpenSearch and **disabling** the ssl i can connect and it works just fine here the config with OS RHLC:\r\n\r\n```java\r\nimport org.apache.http.HttpHost;\r\nimport org.elasticsearch.action.admin.indices.delete.DeleteIndexRequest;\r\nimport org.elasticsearch.action.index.IndexRequest;\r\nimport org.elasticsearch.client.RequestOptions;\r\nimport org.elasticsearch.client.RestClient;\r\nimport org.elasticsearch.client.RestClientBuilder;\r\nimport org.elasticsearch.client.RestHighLevelClient;\r\nimport org.elasticsearch.client.indices.CreateIndexRequest;\r\nimport org.slf4j.Logger;\r\nimport org.slf4j.LoggerFactory;\r\n\r\nimport java.io.IOException;\r\nimport java.util.Map;\r\n\r\npublic class OSSCLientWorks{\r\n\r\n    private static final Logger log = LoggerFactory.getLogger(ClientAutoWrapper.class);\r\n\r\n    public void request(String indexName, Map&lt;String, Object&gt; doc) throws IOException {\r\n\r\n        //Create a client.\r\n        RestClientBuilder builder = RestClient.builder(new HttpHost(&quot;localhost&quot;, 9200, &quot;https&quot;))\r\n                .setHttpClientConfigCallback(httpClientBuilder -&gt; httpClientBuilder\r\n                        //.addInterceptorFirst(interceptor) //-&gt; for AwsRequestInterceptor due to some struggles i had, not necessary to work with localhost\r\n                        .setSSLHostnameVerifier((hostname, session) -&gt; true));\r\n        try (RestHighLevelClient hlClient = new RestHighLevelClient(builder)) {\r\n\r\n            CreateIndexRequest createIndexRequest = new CreateIndexRequest(indexName);\r\n\r\n            var createIndexResp = hlClient.indices().create(createIndexRequest, RequestOptions.DEFAULT);\r\n            log.info(&quot;Create index resp {}&quot;, createIndexResp);\r\n\r\n            IndexRequest indexRequest = new IndexRequest(createIndexResp.index())\r\n                    .id(String.valueOf(doc.get(&quot;id&quot;)))\r\n                    .source(doc);\r\n            var response = hlClient.index(indexRequest, RequestOptions.DEFAULT);\r\n            var resp = response.toString();\r\n            log.info(&quot;response is {}&quot;, json);\r\n        }\r\n    }\r\n\r\n}\r\n```\r\n\r\n, but when i try with spring and its reactive client i get this error:\r\n\r\n```log\r\nreactor.core.Exceptions$ErrorCallbackNotImplemented: org.springframework.data.elasticsearch.client.NoReachableHostException: Host &#39;localhost:9200&#39; not reachable. Cluster state is offline.\r\nCaused by: org.springframework.data.elasticsearch.client.NoReachableHostException: Host &#39;localhost:9200&#39; not reachable. Cluster state is offline.\r\n```\r\n\r\nhere is the config i used to work with spring-data-elasticsearch:\r\n\r\n```java\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.context.annotation.Configuration;\r\nimport org.springframework.data.elasticsearch.client.ClientConfiguration;\r\nimport org.springframework.data.elasticsearch.client.reactive.ReactiveElasticsearchClient;\r\nimport org.springframework.data.elasticsearch.client.reactive.ReactiveRestClients;\r\nimport org.springframework.data.elasticsearch.config.AbstractReactiveElasticsearchConfiguration;\r\nimport org.springframework.data.elasticsearch.core.ReactiveElasticsearchOperations;\r\nimport org.springframework.data.elasticsearch.core.ReactiveElasticsearchTemplate;\r\nimport org.springframework.data.elasticsearch.repository.config.EnableElasticsearchRepositories;\r\nimport org.springframework.data.elasticsearch.repository.config.EnableReactiveElasticsearchRepositories;\r\n\r\n\r\n@Configuration\r\n@EnableReactiveElasticsearchRepositories(basePackages = {&quot;com.elastic.repo&quot;})\r\npublic class ElasticRestHighLevelClientConfig extends AbstractReactiveElasticsearchConfiguration {\r\n\r\n    @Override\r\n    @Bean\r\n    public ReactiveElasticsearchClient reactiveElasticsearchClient() {\r\n        final ClientConfiguration clientConfiguration = ClientConfiguration.builder()\r\n                .connectedTo(&quot;localhost:9200&quot;)\r\n                .build();\r\n        return ReactiveRestClients.create(clientConfiguration);\r\n    }\r\n\r\n\r\n    @Bean\r\n    public ReactiveElasticsearchOperations elasticsearchOperations(ReactiveElasticsearchClient reactiveElasticsearchClient) {\r\n        return new ReactiveElasticsearchTemplate(reactiveElasticsearchClient);\r\n    }\r\n}\r\n```\r\n\r\ni also tried some solutions other people posted here on [SO][3] and [Github][4], but the problem persists, does anybody have a workaround for this? what am i doing wrong?\r\n\r\n[here][5] i did a demo for the trouble\r\n\r\nThank you very much in advance!\r\n\r\nEDIT: clarity\r\n\r\n  [1]: http://org.springframework.boot.autoconfigure.data.elasticsearch.ReactiveElasticsearchRestClientAutoConfiguration\r\n  [2]: https://opensearch.org/docs/latest/clients/java-rest-high-level/\r\n  [3]: https://stackoverflow.com/a/67299891/12819467\r\n  [4]: https://github.com/spring-projects/spring-boot/issues/23106\r\n  [5]: https://github.com/dgallego58/demo-spring-elastic-search","title":"Connecting to ES with Spring Data Elasticsearch (reactive) gives error host not reachable","body":"<p>I'm running on an aws-elasticsearch (with OpenSearch 1.1.x) service and im trying to connect with it from a spring application using spring-data-elasticsearch, according to the <a href=\"http://org.springframework.boot.autoconfigure.data.elasticsearch.ReactiveElasticsearchRestClientAutoConfiguration\" rel=\"nofollow noreferrer\">doc</a> i configured the bean as it says.</p>\n<p>on my local i used a ssh tunnel from my aws account.</p>\n<p>i used this command:</p>\n<pre class=\"lang-sh prettyprint-override\"><code>ssh -4 -i my-creds.pem ec2-user@xxxx.xxxx.xxxx.xxxx -N -L 9200:vpc-my-custom-domain-etc.us-east-1.es.amazonaws.com:443\n</code></pre>\n<p>so i can connect with OpenSearch dashboard over localhost in my browser through port 9200.</p>\n<p>Using the <a href=\"https://opensearch.org/docs/latest/clients/java-rest-high-level/\" rel=\"nofollow noreferrer\">OpenSearch RestHighLevelClient</a> from OpenSearch and <strong>disabling</strong> the ssl i can connect and it works just fine here the config with OS RHLC:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import org.apache.http.HttpHost;\nimport org.elasticsearch.action.admin.indices.delete.DeleteIndexRequest;\nimport org.elasticsearch.action.index.IndexRequest;\nimport org.elasticsearch.client.RequestOptions;\nimport org.elasticsearch.client.RestClient;\nimport org.elasticsearch.client.RestClientBuilder;\nimport org.elasticsearch.client.RestHighLevelClient;\nimport org.elasticsearch.client.indices.CreateIndexRequest;\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\n\nimport java.io.IOException;\nimport java.util.Map;\n\npublic class OSSCLientWorks{\n\n    private static final Logger log = LoggerFactory.getLogger(ClientAutoWrapper.class);\n\n    public void request(String indexName, Map&lt;String, Object&gt; doc) throws IOException {\n\n        //Create a client.\n        RestClientBuilder builder = RestClient.builder(new HttpHost(&quot;localhost&quot;, 9200, &quot;https&quot;))\n                .setHttpClientConfigCallback(httpClientBuilder -&gt; httpClientBuilder\n                        //.addInterceptorFirst(interceptor) //-&gt; for AwsRequestInterceptor due to some struggles i had, not necessary to work with localhost\n                        .setSSLHostnameVerifier((hostname, session) -&gt; true));\n        try (RestHighLevelClient hlClient = new RestHighLevelClient(builder)) {\n\n            CreateIndexRequest createIndexRequest = new CreateIndexRequest(indexName);\n\n            var createIndexResp = hlClient.indices().create(createIndexRequest, RequestOptions.DEFAULT);\n            log.info(&quot;Create index resp {}&quot;, createIndexResp);\n\n            IndexRequest indexRequest = new IndexRequest(createIndexResp.index())\n                    .id(String.valueOf(doc.get(&quot;id&quot;)))\n                    .source(doc);\n            var response = hlClient.index(indexRequest, RequestOptions.DEFAULT);\n            var resp = response.toString();\n            log.info(&quot;response is {}&quot;, json);\n        }\n    }\n\n}\n</code></pre>\n<p>, but when i try with spring and its reactive client i get this error:</p>\n<pre><code>reactor.core.Exceptions$ErrorCallbackNotImplemented: org.springframework.data.elasticsearch.client.NoReachableHostException: Host 'localhost:9200' not reachable. Cluster state is offline.\nCaused by: org.springframework.data.elasticsearch.client.NoReachableHostException: Host 'localhost:9200' not reachable. Cluster state is offline.\n</code></pre>\n<p>here is the config i used to work with spring-data-elasticsearch:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.data.elasticsearch.client.ClientConfiguration;\nimport org.springframework.data.elasticsearch.client.reactive.ReactiveElasticsearchClient;\nimport org.springframework.data.elasticsearch.client.reactive.ReactiveRestClients;\nimport org.springframework.data.elasticsearch.config.AbstractReactiveElasticsearchConfiguration;\nimport org.springframework.data.elasticsearch.core.ReactiveElasticsearchOperations;\nimport org.springframework.data.elasticsearch.core.ReactiveElasticsearchTemplate;\nimport org.springframework.data.elasticsearch.repository.config.EnableElasticsearchRepositories;\nimport org.springframework.data.elasticsearch.repository.config.EnableReactiveElasticsearchRepositories;\n\n\n@Configuration\n@EnableReactiveElasticsearchRepositories(basePackages = {&quot;com.elastic.repo&quot;})\npublic class ElasticRestHighLevelClientConfig extends AbstractReactiveElasticsearchConfiguration {\n\n    @Override\n    @Bean\n    public ReactiveElasticsearchClient reactiveElasticsearchClient() {\n        final ClientConfiguration clientConfiguration = ClientConfiguration.builder()\n                .connectedTo(&quot;localhost:9200&quot;)\n                .build();\n        return ReactiveRestClients.create(clientConfiguration);\n    }\n\n\n    @Bean\n    public ReactiveElasticsearchOperations elasticsearchOperations(ReactiveElasticsearchClient reactiveElasticsearchClient) {\n        return new ReactiveElasticsearchTemplate(reactiveElasticsearchClient);\n    }\n}\n</code></pre>\n<p>i also tried some solutions other people posted here on <a href=\"https://stackoverflow.com/a/67299891/12819467\">SO</a> and <a href=\"https://github.com/spring-projects/spring-boot/issues/23106\" rel=\"nofollow noreferrer\">Github</a>, but the problem persists, does anybody have a workaround for this? what am i doing wrong?</p>\n<p><a href=\"https://github.com/dgallego58/demo-spring-elastic-search\" rel=\"nofollow noreferrer\">here</a> i did a demo for the trouble</p>\n<p>Thank you very much in advance!</p>\n<p>EDIT: clarity</p>\n"},{"tags":["java","java-11"],"owner":{"account_id":18028082,"reputation":305,"user_id":13103493,"display_name":"sidd"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":239,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1649788972,"creation_date":1649788972,"question_id":71847659,"body_markdown":"I am migrating my code from Java 1.8 to Java 11. I have done the below change in my pom.xml \r\n\r\nFrom: \r\n\r\n    &lt;java.version&gt;1.8&lt;/java.version&gt;\r\n\r\nTo: \r\n\r\n    &lt;java.version&gt;11&lt;/java.version&gt;\r\n\r\nAlso changed the source and target in maven compiler as per below: \r\n\r\n    &lt;plugin&gt;\r\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n    &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n    &lt;version&gt;3.8.1&lt;/version&gt;\r\n    &lt;configuration&gt;\r\n    &lt;source&gt;11&lt;/source&gt;\r\n    &lt;target&gt;11&lt;/target&gt;\r\n    &lt;/configuration&gt;\r\n    &lt;/plugin&gt;\r\n\r\nWhen I execute the command maven install I get the below error: \r\n\r\n*[ERROR] Failed to execute goal on project store: Could not resolve dependencies for project. Could not find artifact jdk.tools:jdk.tools:jar:1.7 at specified path C:\\Program Files\\Java\\jdk-11.0.12/../lib/tools.jar -&gt; [Help 1]*\r\n\r\nHow do I solve this error? Please help ","title":"Could not find artifact jdk.tools","body":"<p>I am migrating my code from Java 1.8 to Java 11. I have done the below change in my pom.xml</p>\n<p>From:</p>\n<pre><code>&lt;java.version&gt;1.8&lt;/java.version&gt;\n</code></pre>\n<p>To:</p>\n<pre><code>&lt;java.version&gt;11&lt;/java.version&gt;\n</code></pre>\n<p>Also changed the source and target in maven compiler as per below:</p>\n<pre><code>&lt;plugin&gt;\n&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n&lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n&lt;version&gt;3.8.1&lt;/version&gt;\n&lt;configuration&gt;\n&lt;source&gt;11&lt;/source&gt;\n&lt;target&gt;11&lt;/target&gt;\n&lt;/configuration&gt;\n&lt;/plugin&gt;\n</code></pre>\n<p>When I execute the command maven install I get the below error:</p>\n<p><em>[ERROR] Failed to execute goal on project store: Could not resolve dependencies for project. Could not find artifact jdk.tools:jdk.tools:jar:1.7 at specified path C:\\Program Files\\Java\\jdk-11.0.12/../lib/tools.jar -&gt; [Help 1]</em></p>\n<p>How do I solve this error? Please help</p>\n"},{"tags":["java","spring","spring-boot","jackson","jackson-dataformat-xml"],"answers":[{"tags":[],"owner":{"account_id":3676926,"reputation":21,"user_id":3062818,"display_name":"telefunken"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1649768267,"creation_date":1649768267,"answer_id":71843178,"question_id":71533626,"body_markdown":"You could remove to overriding message converter of the TestRestTemplate by just adding the JSON-converter. This converter sets the Content-Type-header to &quot;application/json&quot;: \r\n\r\n    @BeforeEach\r\n    void setUp() {\r\n      restTemplate\r\n          .getRestTemplate()\r\n          .setMessageConverters(Collections.singletonList(new MappingJackson2HttpMessageConverter()));\r\n    }\r\n\r\n\r\n","title":"How to change spring&#39;s TestRestTemplate Content-Type?","body":"<p>You could remove to overriding message converter of the TestRestTemplate by just adding the JSON-converter. This converter sets the Content-Type-header to &quot;application/json&quot;:</p>\n<pre><code>@BeforeEach\nvoid setUp() {\n  restTemplate\n      .getRestTemplate()\n      .setMessageConverters(Collections.singletonList(new MappingJackson2HttpMessageConverter()));\n}\n</code></pre>\n"}],"owner":{"account_id":8705456,"reputation":448,"user_id":6513660,"display_name":"Wall-E"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1152,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1649788949,"creation_date":1647640993,"question_id":71533626,"body_markdown":"I started to have a problem on my spring boot app after adding jackson&#39;s library to serialize POJO to XML, `jackson-dataformat-xml`.\r\n\r\nWhen I run the following test it makes a request with the default header of `Content-Type: application/xml` and **I cannot find a way to set this as** `Content-Type: application/json`. It just works if I explicitly put a header with the desired content type in the `.exchange(...)` method.\r\n\r\n**This is really weird because it defaults to json if I remove the dependency aforementioned.**\r\n\r\nI need to find a a way to configure the bean so I&#39;m not obligated to change all my tests.\r\n\r\n\r\n```kotlin\r\n@ExtendWith(SpringExtension::class)\r\n@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)\r\nclass FooBarControllerIT(\r\n    @Autowired private val restTemplate: TestRestTemplate,\r\n    @Autowired val objectMapper: ObjectMapper\r\n) {\r\n\r\n    @Test\r\n    fun testeTeste() {\r\n        val header = HttpHeaders()\r\n        // uncommenting the code bellow makes it work\r\n        //.apply { set(HttpHeaders.CONTENT_TYPE, MediaType.APPLICATION_JSON_VALUE) }\r\n\r\n        val response = restTemplate.exchange(\r\n            &quot;/foobar&quot;,\r\n            HttpMethod.GET,\r\n            HttpEntity&lt;Any&gt;(header),\r\n            String::class.java\r\n        )\r\n\r\n        assertEquals(HttpStatus.OK, response.statusCode)\r\n    }\r\n}\r\n```\r\n\r\nThanks in advance!\r\n\r\n\r\n*****EDIT**\r\n\r\nI was able to solve it with the following code.\r\n\r\n```\r\n@PostConstruct\r\n    fun changeTestRestTemplate() {\r\n        testRestTemplate.restTemplate.messageConverters.removeIf { it is MappingJackson2XmlHttpMessageConverter }\r\n        testRestTemplate.restTemplate.messageConverters.add(MappingJackson2XmlHttpMessageConverter())\r\n    }\r\n```","title":"How to change spring&#39;s TestRestTemplate Content-Type?","body":"<p>I started to have a problem on my spring boot app after adding jackson's library to serialize POJO to XML, <code>jackson-dataformat-xml</code>.</p>\n<p>When I run the following test it makes a request with the default header of <code>Content-Type: application/xml</code> and <strong>I cannot find a way to set this as</strong> <code>Content-Type: application/json</code>. It just works if I explicitly put a header with the desired content type in the <code>.exchange(...)</code> method.</p>\n<p><strong>This is really weird because it defaults to json if I remove the dependency aforementioned.</strong></p>\n<p>I need to find a a way to configure the bean so I'm not obligated to change all my tests.</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>@ExtendWith(SpringExtension::class)\n@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)\nclass FooBarControllerIT(\n    @Autowired private val restTemplate: TestRestTemplate,\n    @Autowired val objectMapper: ObjectMapper\n) {\n\n    @Test\n    fun testeTeste() {\n        val header = HttpHeaders()\n        // uncommenting the code bellow makes it work\n        //.apply { set(HttpHeaders.CONTENT_TYPE, MediaType.APPLICATION_JSON_VALUE) }\n\n        val response = restTemplate.exchange(\n            &quot;/foobar&quot;,\n            HttpMethod.GET,\n            HttpEntity&lt;Any&gt;(header),\n            String::class.java\n        )\n\n        assertEquals(HttpStatus.OK, response.statusCode)\n    }\n}\n</code></pre>\n<p>Thanks in advance!</p>\n<p>***<strong>EDIT</strong></p>\n<p>I was able to solve it with the following code.</p>\n<pre><code>@PostConstruct\n    fun changeTestRestTemplate() {\n        testRestTemplate.restTemplate.messageConverters.removeIf { it is MappingJackson2XmlHttpMessageConverter }\n        testRestTemplate.restTemplate.messageConverters.add(MappingJackson2XmlHttpMessageConverter())\n    }\n</code></pre>\n"},{"tags":["java","jsp","servlets"],"comments":[{"owner":{"account_id":14695242,"reputation":552,"user_id":10612806,"display_name":"Evgeni Enchev"},"score":2,"creation_date":1649788665,"post_id":71847558,"comment_id":126963490,"body_markdown":"You need push notifications - something happens and the server send notifications to all users. Take a look at [this](https://dev.to/marcushellberg/how-to-send-web-push-notifications-in-java-21lo)","body":"You need push notifications - something happens and the server send notifications to all users. Take a look at <a href=\"https://dev.to/marcushellberg/how-to-send-web-push-notifications-in-java-21lo\" rel=\"nofollow noreferrer\">this</a>"},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1649798011,"post_id":71847558,"comment_id":126966285,"body_markdown":"https://en.wikipedia.org/wiki/Push_technology","body":"<a href=\"https://en.wikipedia.org/wiki/Push_technology\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Push_technology</a>"},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1649798089,"post_id":71847558,"comment_id":126966304,"body_markdown":"https://github.com/Atmosphere","body":"<a href=\"https://github.com/Atmosphere\" rel=\"nofollow noreferrer\">github.com/Atmosphere</a>"},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1649798117,"post_id":71847558,"comment_id":126966314,"body_markdown":"https://vaadin.com/docs/latest/flow/advanced/server-push","body":"<a href=\"https://vaadin.com/docs/latest/flow/advanced/server-push\" rel=\"nofollow noreferrer\">vaadin.com/docs/latest/flow/advanced/server-push</a>"},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1649809107,"post_id":71847558,"comment_id":126968382,"body_markdown":"Your title has nothing to do with your question.","body":"Your title has nothing to do with your question."}],"owner":{"account_id":24917042,"reputation":11,"user_id":18785831,"display_name":"Brandon Simmons"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1649788456,"creation_date":1649788456,"question_id":71847558,"body_markdown":"I want to create a page that updates for all viewers of that particular page when anther page is updated\r\n\r\nSo one person could watch the page on a phone and another person could view the exact same page on their computer (updated in sync)\r\n\r\ni.e. (Student Ceremony) there is a ceremony, and when a QR is scanned (on a different page) I want the ceremony page to update the content on that (other) page with the student&#39;s information (pulled from database)","title":"Does a master session exist for java Servlets","body":"<p>I want to create a page that updates for all viewers of that particular page when anther page is updated</p>\n<p>So one person could watch the page on a phone and another person could view the exact same page on their computer (updated in sync)</p>\n<p>i.e. (Student Ceremony) there is a ceremony, and when a QR is scanned (on a different page) I want the ceremony page to update the content on that (other) page with the student's information (pulled from database)</p>\n"},{"tags":["java","selenium","selenium-webdriver","firefox","webdriver"],"comments":[{"owner":{"account_id":10049107,"reputation":186627,"user_id":7429447,"accept_rate":86,"display_name":"undetected Selenium"},"score":0,"creation_date":1649757366,"post_id":71838473,"comment_id":126951358,"body_markdown":"Update the question with the complete error stacktrace associated with _`SessionNotCreatedException`_","body":"Update the question with the complete error stacktrace associated with <i><code>SessionNotCreatedException</code></i>"},{"owner":{"account_id":21736352,"reputation":439,"user_id":16044298,"display_name":"Bradford Griggs"},"score":0,"creation_date":1649783987,"post_id":71838473,"comment_id":126962045,"body_markdown":"@undetectedSelenium I updated the question with the requested info","body":"@undetectedSelenium I updated the question with the requested info"},{"owner":{"account_id":21736352,"reputation":439,"user_id":16044298,"display_name":"Bradford Griggs"},"score":0,"creation_date":1649784999,"post_id":71838473,"comment_id":126962340,"body_markdown":"@undetectedSelenium After performing additional tests, I noticed that if I set a 5 second delay between each launch I am able to complete all 100 launches without issue.. Of course it is not acceptable to add such a delay in production as we need to launch dozens of browsers at a time but this might be useful in debugging above error.. somehow when many instances are being launched at once something happens that prevents everyone of them from being launched.. the question is what&#39;s happening..","body":"@undetectedSelenium After performing additional tests, I noticed that if I set a 5 second delay between each launch I am able to complete all 100 launches without issue.. Of course it is not acceptable to add such a delay in production as we need to launch dozens of browsers at a time but this might be useful in debugging above error.. somehow when many instances are being launched at once something happens that prevents everyone of them from being launched.. the question is what&#39;s happening.."},{"owner":{"account_id":10049107,"reputation":186627,"user_id":7429447,"accept_rate":86,"display_name":"undetected Selenium"},"score":0,"creation_date":1649785011,"post_id":71838473,"comment_id":126962344,"body_markdown":"How do you initiate dozen of institutions? Can you update the question with your actual code trials please?","body":"How do you initiate dozen of institutions? Can you update the question with your actual code trials please?"},{"owner":{"account_id":21736352,"reputation":439,"user_id":16044298,"display_name":"Bradford Griggs"},"score":0,"creation_date":1649785966,"post_id":71838473,"comment_id":126962635,"body_markdown":"@undetectedSelenium I updated the OP with code being used to initialize dozens of WebDriver instances.. Please see Update 2. Thanks.","body":"@undetectedSelenium I updated the OP with code being used to initialize dozens of WebDriver instances.. Please see Update 2. Thanks."},{"owner":{"account_id":1652205,"reputation":6752,"user_id":1522548,"accept_rate":90,"display_name":"JWP"},"score":0,"creation_date":1649896666,"post_id":71838473,"comment_id":126994026,"body_markdown":"The stack trace showed a timeout exception after 2 seconds. You can extend that time using Chrome or edge options. I would think Firefox supports it too.","body":"The stack trace showed a timeout exception after 2 seconds. You can extend that time using Chrome or edge options. I would think Firefox supports it too."}],"owner":{"account_id":21736352,"reputation":439,"user_id":16044298,"display_name":"Bradford Griggs"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":452,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1649788030,"creation_date":1649747421,"question_id":71838473,"body_markdown":"I recently upgraded to Selenium version 4 and it seems to be causing more harm than good. \r\n\r\nWhen I try running a single (or a small number) of WebDriver instances in parallel via the command:\r\n\r\n    WebDriver driver = new FirefoxDriver(firefoxOptions);\r\n\r\nSelenium launches as expected. However, when I try running dozens of instances at one time I get the following errors:\r\n\r\n    1649745964100\tgeckodriver\tINFO\tListening on 127.0.0.1:50788\r\n    1649745964101\tgeckodriver\tINFO\tListening on 127.0.0.1:55599\r\n    1649745964103\tgeckodriver\tINFO\tListening on 127.0.0.1:62022\r\n    1649745964105\tgeckodriver\tINFO\tListening on 127.0.0.1:57781\r\n    1649745964106\tgeckodriver\tINFO\tListening on 127.0.0.1:60187\r\n    ...\r\n    \r\n    \r\n    1649745964966\tmozrunner::runner\tINFO\tRunning command: &quot;C:\\\\MyApp\\\\Files\\\\Firefox\\\\firefox.exe&quot; &quot;--marionette&quot; &quot;--remote-debugging-port&quot; &quot;52303&quot; &quot;-no-remote&quot; &quot;-profile&quot; &quot;C:\\\\Users\\\\User\\\\AppData\\\\Local\\\\Temp\\\\rust_mozprofile49eIxp&quot;\r\n    1649745964969\tmozrunner::runner\tINFO\tRunning command: &quot;C:\\\\MyApp\\\\Files\\\\Firefox\\\\firefox.exe&quot; &quot;--marionette&quot; &quot;--remote-debugging-port&quot; &quot;62028&quot; &quot;-no-remote&quot; &quot;-profile&quot; &quot;C:\\\\Users\\\\User\\\\AppData\\\\Local\\\\Temp\\\\rust_mozprofile1awb0N&quot;\r\n    1649745964971\tmozrunner::runner\tINFO\tRunning command: &quot;C:\\\\MyApp\\\\Files\\\\Firefox\\\\firefox.exe&quot; &quot;--marionette&quot; &quot;--remote-debugging-port&quot; &quot;62582&quot; &quot;-no-remote&quot; &quot;-profile&quot; &quot;C:\\\\Users\\\\User\\\\AppData\\\\Local\\\\Temp\\\\rust_mozprofileX7Iv6n&quot;\r\n    1649745964972\tmozrunner::runner\tINFO\tRunning command: &quot;C:\\\\MyApp\\\\Files\\\\Firefox\\\\firefox.exe&quot; &quot;--marionette&quot; &quot;--remote-debugging-port&quot; &quot;53475&quot; &quot;-no-remote&quot; &quot;-profile&quot; &quot;C:\\\\Users\\\\User\\\\AppData\\\\Local\\\\Temp\\\\rust_mozprofilehOG354&quot;\r\n    1649745964973\tmozrunner::runner\tINFO\tRunning command: &quot;C:\\\\MyApp\\\\Files\\\\Firefox\\\\firefox.exe&quot; &quot;--marionette&quot; &quot;--remote-debugging-port&quot; &quot;54847&quot; &quot;-no-remote&quot; &quot;-profile&quot; &quot;C:\\\\Users\\\\User\\\\AppData\\\\Local\\\\Temp\\\\rust_mozprofile6m4dJU&quot;\r\n    ...\r\n    \r\n    1649745965124\tgeckodriver::marionette\tDEBUG\tWaiting 60s to connect to browser on 127.0.0.1:57736\r\n    1649745965124\tgeckodriver::marionette\tDEBUG\tWaiting 60s to connect to browser on 127.0.0.1:57783\r\n    1649745965124\tgeckodriver::marionette\tDEBUG\tWaiting 60s to connect to browser on 127.0.0.1:57757\r\n    1649745965125\tgeckodriver::marionette\tDEBUG\tWaiting 60s to connect to browser on 127.0.0.1:57740\r\n    1649745965125\tgeckodriver::marionette\tDEBUG\tWaiting 60s to connect to browser on 127.0.0.1:57782\r\n    ...\r\n    \r\n    1649745966721\tRemoteAgent\tDEBUG\tCDP enabled\r\n    1649745966721\tRemoteAgent\tDEBUG\tCDP enabled\r\n    1649745966721\tMarionette\tINFO\tMarionette enabled\r\n    1649745966721\tMarionette\tINFO\tMarionette enabled\r\n    1649745966721\tRemoteAgent\tDEBUG\tCDP enabled\r\n    ...\r\n    \r\n    1649745967088\tgeckodriver::marionette\tTRACE\tNo connection could be made because the target machine actively refused it. (os error 10061). Retrying in 100ms\r\n    1649745967089\tgeckodriver::marionette\tTRACE\tNo connection could be made because the target machine actively refused it. (os error 10061). Retrying in 100ms\r\n    1649745967090\tgeckodriver::marionette\tTRACE\tNo connection could be made because the target machine actively refused it. (os error 10061). Retrying in 100ms\r\n    1649745967104\tgeckodriver::marionette\tTRACE\tNo connection could be made because the target machine actively refused it. (os error 10061). Retrying in 100ms\r\n    1649745967104\tgeckodriver::marionette\tTRACE\tNo connection could be made because the target machine actively refused it. (os error 10061). Retrying in 100ms\r\n    ...\r\n    \r\n    1649745968454\tMarionette\tTRACE\tReceived observer notification toplevel-window-ready\r\n    1649745968471\tMarionette\tTRACE\tReceived observer notification toplevel-window-ready\r\n    1649745968477\tMarionette\tTRACE\tReceived observer notification toplevel-window-ready\r\n    1649745968477\tMarionette\tTRACE\tReceived observer notification toplevel-window-ready\r\n    1649745968486\tMarionette\tTRACE\tReceived observer notification toplevel-window-ready\r\n    ...\r\n    \r\n    console.error: Region.jsm: &quot;Failed to fetch region&quot; (new Error(&quot;TIMEOUT&quot;, &quot;resource://gre/modules/Region.jsm&quot;, 419))\r\n    console.error: Region.jsm: &quot;Error fetching region&quot; (new Error(&quot;TIMEOUT&quot;, &quot;resource://gre/modules/Region.jsm&quot;, 772))\r\n    console.error: Region.jsm: &quot;Failed to fetch region&quot; (new Error(&quot;TIMEOUT&quot;, &quot;resource://gre/modules/Region.jsm&quot;, 419))\r\n    console.error: Region.jsm: &quot;Error fetching region&quot; (new Error(&quot;TIMEOUT&quot;, &quot;resource://gre/modules/Region.jsm&quot;, 772))\r\n    console.error: Region.jsm: &quot;Failed to fetch region&quot; (new Error(&quot;TIMEOUT&quot;, &quot;resource://gre/modules/Region.jsm&quot;, 419))\r\n    ...\r\n    \r\n    1649746120764\tgeckodriver::browser\tDEBUG\tBrowser process stopped: exit code: 1\r\n    1649746120767\tgeckodriver::browser\tDEBUG\tBrowser process stopped: exit code: 1\r\n    1649746120769\tgeckodriver::browser\tDEBUG\tBrowser process stopped: exit code: 1\r\n    1649746120770\tgeckodriver::browser\tDEBUG\tBrowser process stopped: exit code: 1\r\n    1649746120770\tgeckodriver::browser\tDEBUG\tBrowser process stopped: exit code: 1\r\n    ...\r\n    \r\n    org.openqa.selenium.SessionNotCreatedException\r\n    ...\r\n\r\n    org.openqa.selenium.SessionNotCreatedException: Could not start a new session. Possible causes are invalid address of the remote server or browser start-up failure.\r\n\r\nWhat&#39;s stopping Selenium from creating new browser sessions? It&#39;s obviously not a Firewall issue as the code runs without issue when I limit to a handful of browsers.\r\n\r\n\r\nI&#39;m using Java. I never had an issue launching dozens of browsers in Selenium v3. \r\n\r\nWhat changed in v4 that&#39;s causing this issue? I&#39;m using **local** `WebDriver` (**NOT** Remote Web Driver)\r\n\r\n\r\n\r\n**Update**:\r\n\r\nAs requested by @undetected Selenium please see additional debug info below:\r\n\r\n    org.openqa.selenium.SessionNotCreatedException: Could not start a new session. Response code 500. Message: No connection could be made because the target machine actively refused it. (os error 10061)\r\n    Build info: version: &#39;4.1.3&#39;, revision: &#39;7b1ebf28ef&#39;\r\n    System info: host: &#39;MyHost&#39;, ip: &#39;17X.XX.XX.X&#39;, os.name: &#39;Windows 10&#39;, os.arch: &#39;amd64&#39;, os.version: &#39;10.0&#39;, java.version: &#39;1.8.0_191&#39;\r\n    Driver info: org.openqa.selenium.firefox.FirefoxDriver\r\n    Command: [null, newSession {capabilities=[Capabilities {acceptInsecureCerts: true, browserName: firefox, moz:debuggerAddress: true, moz:firefoxOptions: {binary: C:\\MyApp\\Files\\Firef..., log: {level: trace}, prefs: {browser.cache.disk.capacity: 1024, datareporting.policy.dataSubmissionPolicyAccepted: false, dom.max_chrome_script_run_time: 0, dom.max_script_run_time: 0, dom.popup_maximum: 200, dom.webnotifications.enabled: false, general.useragent.override: Mozilla/5.0 (Windows NT 10...., media.peerconnection.enabled: false, network.proxy.http: 127.0.0.1, network.proxy.http_port: 24000, network.proxy.socks: 127.0.0.1, network.proxy.socks_port: 24000, network.proxy.socks_remote_dns: true, network.proxy.type: 1}}}], desiredCapabilities=Capabilities {acceptInsecureCerts: true, browserName: firefox, moz:debuggerAddress: true, moz:firefoxOptions: {binary: C:\\MyApp\\Files\\Firef..., log: {level: trace}, prefs: {browser.cache.disk.capacity: 1024, datareporting.policy.dataSubmissionP\r\n    olicyAccepted: false, dom.max_chrome_script_run_time: 0, dom.max_script_run_time: 0, dom.popup_maximum: 200, dom.webnotifications.enabled: false, general.useragent.override: Mozilla/5.0 (Windows NT 10...., media.peerconnection.enabled: false, network.proxy.http: 127.0.0.1, network.proxy.http_port: 24000, network.proxy.socks: 127.0.0.1, network.proxy.socks_port: 24000, network.proxy.socks_remote_dns: true, network.proxy.type: 1}}}}]\r\n    Apr 12, 2022 1:12:15 PM org.openqa.selenium.os.OsProcess destroy\r\n    INFO: Unable to drain process streams. Ignoring but the exception being swallowed follows.\r\n    org.apache.commons.exec.ExecuteException: The stop timeout of 2000 ms was exceeded (Exit value: -559038737)\r\n    \tat org.apache.commons.exec.PumpStreamHandler.stopThread(PumpStreamHandler.java:295)\r\n    \tat org.apache.commons.exec.PumpStreamHandler.stop(PumpStreamHandler.java:180)\r\n    \tat org.openqa.selenium.os.OsProcess.destroy(OsProcess.java:135)\r\n    \tat org.openqa.selenium.os.CommandLine.destroy(CommandLine.java:139)\r\n    \tat org.openqa.selenium.remote.service.DriverService.stop(DriverService.java:281)\r\n    \tat org.openqa.selenium.remote.service.DriverCommandExecutor.execute(DriverCommandExecutor.java:154)\r\n    \tat org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:567)\r\n    \tat org.openqa.selenium.remote.RemoteWebDriver.startSession(RemoteWebDriver.java:248)\r\n    \tat org.openqa.selenium.remote.RemoteWebDriver.&lt;init&gt;(RemoteWebDriver.java:164)\r\n    \tat org.openqa.selenium.firefox.FirefoxDriver.&lt;init&gt;(FirefoxDriver.java:118)\r\n    \tat org.openqa.selenium.firefox.FirefoxDriver.&lt;init&gt;(FirefoxDriver.java:106)\r\n    \tat webdriverX.WebDriverX.launchNewFireFoxWebDriver(WebDriverX.java:150)\r\n    \tat webdriverX.WebDriverProfile.getTMPFirefoxProfile(WebDriverProfile.java:1030)\r\n    \tat webdriverX.WebDriverProfile.getTMPFirefoxProfile(WebDriverProfile.java:1165)\r\n    \tat webdriverX.WebDriverProfile.requestWebDriver(WebDriverProfile.java:735)\r\n    \tat fulfilment.source.pages.ProductPage.ProductTestSuit.scrapeField(ProductTestSuit.java:89)\r\n    \tat fulfilment.source.pages.ProductPage.ProductTestSuit$1.run(ProductTestSuit.java:52)\r\n\r\n\r\n**Update #2**:\r\n\r\nPlease see some of the actual code used to launch dozens of instances of Firefox WebDriver:\r\n\r\n\r\n        public static void scrapeField(List&lt;String&gt; urlList) throws Exception {\r\n    \tfor (String url : urlList) {\r\n    \t\t\r\n    \t\tnew Thread() {\r\n    \t\t\tpublic void run() {\r\n    \t\t\t\ttry {\r\n    \t\t\t\t\t\r\n    \t\t\t\t\t\r\n    \t\t\t\t\tscrapeField(url);\r\n    \t\t\t\t} catch (Exception v) {\r\n    \t\t\t\t\tSystem.out.println(v);\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t}.start();\r\n    \t}\r\n    }\r\n\r\nThe method `scrapeField()` essentially calls the method `getTMPFirefoxProfile()` which returns 1 instance of `Firefox WebDriver` per URL as seen below:\r\n\r\n\r\n \tpublic static WebDriver getTMPFirefoxProfile(String ipAddress, Integer port) throws IOException, {\r\n        \r\n\t\tSystem.setProperty(&quot;webdriver.gecko.driver&quot;, path_to_exe_file);\r\n\r\n\t\tFirefoxOptions firefoxOptions = new FirefoxOptions();\r\n\t\tfirefoxOptions.addPreference(&quot;browser.cache.disk.capacity&quot;, 1024);\r\n\r\n\t\tfirefoxOptions.addPreference(&quot;dom.popup_maximum&quot;, 200);\r\n\t\tfirefoxOptions.addPreference(&quot;dom.webnotifications.enabled&quot;, false); \r\n\t\tfirefoxOptions.addPreference(&quot;media.peerconnection.enabled&quot;, false); \r\n\t\t\r\n\t\tfirefoxOptions.addPreference(&quot;media.peerconnection.enabled&quot;, false);\r\n\r\n\t\tfirefoxOptions.addPreference(&quot;datareporting.policy.dataSubmissionPolicyAccepted&quot;, false);\r\n\t\tfirefoxOptions.addPreference(&quot;dom.max_chrome_script_run_time&quot;, 0); \r\n\t\tfirefoxOptions.addPreference(&quot;dom.max_script_run_time&quot;, 0); \r\n\t\tfirefoxOptions.addPreference(&quot;media.peerconnection.enabled&quot;, false); \r\n\r\n\t\tfirefoxOptions.setLogLevel(FirefoxDriverLogLevel.TRACE);\r\n\r\n\t    firefoxOptions.addPreference(&quot;general.useragent.override&quot;, rndUserAgentStr);\r\n\t\t\t\t\t\r\n\t    firefoxOptions.addPreference(&quot;network.proxy.type&quot;, 1); \r\n\r\n\t    firefoxOptions.addPreference(&quot;network.proxy.socks&quot;, ipAddress); \r\n\r\n\t    firefoxOptions.addPreference(&quot;network.proxy.socks_port&quot;, port); \r\n\r\n\t    firefoxOptions.addPreference(&quot;network.proxy.http&quot;, ipAddress);  \r\n\t\t\t\t\t\t\r\n\t    firefoxOptions.addPreference(&quot;network.proxy.http_port&quot;, port); \r\n\t\t\t\t\t\t\r\n\t    firefoxOptions.addPreference(&quot;network.proxy.socks_remote_dns&quot;, true); \r\n\t\t\t\t\t\r\n\t    firefoxOptions.setBinary(path_to_binary_firefox);\r\n\r\n\r\n\t\tWebDriver driver = new FirefoxDriver(firefoxOptions);\r\n\r\n\t\r\n\t\treturn driver;\r\n\t}\r\n\r\n\r\n","title":"Selenium: Session not created - the target machine actively refused it (when launching dozens of parallel FF instances)","body":"<p>I recently upgraded to Selenium version 4 and it seems to be causing more harm than good.</p>\n<p>When I try running a single (or a small number) of WebDriver instances in parallel via the command:</p>\n<pre><code>WebDriver driver = new FirefoxDriver(firefoxOptions);\n</code></pre>\n<p>Selenium launches as expected. However, when I try running dozens of instances at one time I get the following errors:</p>\n<pre><code>1649745964100   geckodriver INFO    Listening on 127.0.0.1:50788\n1649745964101   geckodriver INFO    Listening on 127.0.0.1:55599\n1649745964103   geckodriver INFO    Listening on 127.0.0.1:62022\n1649745964105   geckodriver INFO    Listening on 127.0.0.1:57781\n1649745964106   geckodriver INFO    Listening on 127.0.0.1:60187\n...\n\n\n1649745964966   mozrunner::runner   INFO    Running command: &quot;C:\\\\MyApp\\\\Files\\\\Firefox\\\\firefox.exe&quot; &quot;--marionette&quot; &quot;--remote-debugging-port&quot; &quot;52303&quot; &quot;-no-remote&quot; &quot;-profile&quot; &quot;C:\\\\Users\\\\User\\\\AppData\\\\Local\\\\Temp\\\\rust_mozprofile49eIxp&quot;\n1649745964969   mozrunner::runner   INFO    Running command: &quot;C:\\\\MyApp\\\\Files\\\\Firefox\\\\firefox.exe&quot; &quot;--marionette&quot; &quot;--remote-debugging-port&quot; &quot;62028&quot; &quot;-no-remote&quot; &quot;-profile&quot; &quot;C:\\\\Users\\\\User\\\\AppData\\\\Local\\\\Temp\\\\rust_mozprofile1awb0N&quot;\n1649745964971   mozrunner::runner   INFO    Running command: &quot;C:\\\\MyApp\\\\Files\\\\Firefox\\\\firefox.exe&quot; &quot;--marionette&quot; &quot;--remote-debugging-port&quot; &quot;62582&quot; &quot;-no-remote&quot; &quot;-profile&quot; &quot;C:\\\\Users\\\\User\\\\AppData\\\\Local\\\\Temp\\\\rust_mozprofileX7Iv6n&quot;\n1649745964972   mozrunner::runner   INFO    Running command: &quot;C:\\\\MyApp\\\\Files\\\\Firefox\\\\firefox.exe&quot; &quot;--marionette&quot; &quot;--remote-debugging-port&quot; &quot;53475&quot; &quot;-no-remote&quot; &quot;-profile&quot; &quot;C:\\\\Users\\\\User\\\\AppData\\\\Local\\\\Temp\\\\rust_mozprofilehOG354&quot;\n1649745964973   mozrunner::runner   INFO    Running command: &quot;C:\\\\MyApp\\\\Files\\\\Firefox\\\\firefox.exe&quot; &quot;--marionette&quot; &quot;--remote-debugging-port&quot; &quot;54847&quot; &quot;-no-remote&quot; &quot;-profile&quot; &quot;C:\\\\Users\\\\User\\\\AppData\\\\Local\\\\Temp\\\\rust_mozprofile6m4dJU&quot;\n...\n\n1649745965124   geckodriver::marionette DEBUG   Waiting 60s to connect to browser on 127.0.0.1:57736\n1649745965124   geckodriver::marionette DEBUG   Waiting 60s to connect to browser on 127.0.0.1:57783\n1649745965124   geckodriver::marionette DEBUG   Waiting 60s to connect to browser on 127.0.0.1:57757\n1649745965125   geckodriver::marionette DEBUG   Waiting 60s to connect to browser on 127.0.0.1:57740\n1649745965125   geckodriver::marionette DEBUG   Waiting 60s to connect to browser on 127.0.0.1:57782\n...\n\n1649745966721   RemoteAgent DEBUG   CDP enabled\n1649745966721   RemoteAgent DEBUG   CDP enabled\n1649745966721   Marionette  INFO    Marionette enabled\n1649745966721   Marionette  INFO    Marionette enabled\n1649745966721   RemoteAgent DEBUG   CDP enabled\n...\n\n1649745967088   geckodriver::marionette TRACE   No connection could be made because the target machine actively refused it. (os error 10061). Retrying in 100ms\n1649745967089   geckodriver::marionette TRACE   No connection could be made because the target machine actively refused it. (os error 10061). Retrying in 100ms\n1649745967090   geckodriver::marionette TRACE   No connection could be made because the target machine actively refused it. (os error 10061). Retrying in 100ms\n1649745967104   geckodriver::marionette TRACE   No connection could be made because the target machine actively refused it. (os error 10061). Retrying in 100ms\n1649745967104   geckodriver::marionette TRACE   No connection could be made because the target machine actively refused it. (os error 10061). Retrying in 100ms\n...\n\n1649745968454   Marionette  TRACE   Received observer notification toplevel-window-ready\n1649745968471   Marionette  TRACE   Received observer notification toplevel-window-ready\n1649745968477   Marionette  TRACE   Received observer notification toplevel-window-ready\n1649745968477   Marionette  TRACE   Received observer notification toplevel-window-ready\n1649745968486   Marionette  TRACE   Received observer notification toplevel-window-ready\n...\n\nconsole.error: Region.jsm: &quot;Failed to fetch region&quot; (new Error(&quot;TIMEOUT&quot;, &quot;resource://gre/modules/Region.jsm&quot;, 419))\nconsole.error: Region.jsm: &quot;Error fetching region&quot; (new Error(&quot;TIMEOUT&quot;, &quot;resource://gre/modules/Region.jsm&quot;, 772))\nconsole.error: Region.jsm: &quot;Failed to fetch region&quot; (new Error(&quot;TIMEOUT&quot;, &quot;resource://gre/modules/Region.jsm&quot;, 419))\nconsole.error: Region.jsm: &quot;Error fetching region&quot; (new Error(&quot;TIMEOUT&quot;, &quot;resource://gre/modules/Region.jsm&quot;, 772))\nconsole.error: Region.jsm: &quot;Failed to fetch region&quot; (new Error(&quot;TIMEOUT&quot;, &quot;resource://gre/modules/Region.jsm&quot;, 419))\n...\n\n1649746120764   geckodriver::browser    DEBUG   Browser process stopped: exit code: 1\n1649746120767   geckodriver::browser    DEBUG   Browser process stopped: exit code: 1\n1649746120769   geckodriver::browser    DEBUG   Browser process stopped: exit code: 1\n1649746120770   geckodriver::browser    DEBUG   Browser process stopped: exit code: 1\n1649746120770   geckodriver::browser    DEBUG   Browser process stopped: exit code: 1\n...\n\norg.openqa.selenium.SessionNotCreatedException\n...\n\norg.openqa.selenium.SessionNotCreatedException: Could not start a new session. Possible causes are invalid address of the remote server or browser start-up failure.\n</code></pre>\n<p>What's stopping Selenium from creating new browser sessions? It's obviously not a Firewall issue as the code runs without issue when I limit to a handful of browsers.</p>\n<p>I'm using Java. I never had an issue launching dozens of browsers in Selenium v3.</p>\n<p>What changed in v4 that's causing this issue? I'm using <strong>local</strong> <code>WebDriver</code> (<strong>NOT</strong> Remote Web Driver)</p>\n<p><strong>Update</strong>:</p>\n<p>As requested by @undetected Selenium please see additional debug info below:</p>\n<pre><code>org.openqa.selenium.SessionNotCreatedException: Could not start a new session. Response code 500. Message: No connection could be made because the target machine actively refused it. (os error 10061)\nBuild info: version: '4.1.3', revision: '7b1ebf28ef'\nSystem info: host: 'MyHost', ip: '17X.XX.XX.X', os.name: 'Windows 10', os.arch: 'amd64', os.version: '10.0', java.version: '1.8.0_191'\nDriver info: org.openqa.selenium.firefox.FirefoxDriver\nCommand: [null, newSession {capabilities=[Capabilities {acceptInsecureCerts: true, browserName: firefox, moz:debuggerAddress: true, moz:firefoxOptions: {binary: C:\\MyApp\\Files\\Firef..., log: {level: trace}, prefs: {browser.cache.disk.capacity: 1024, datareporting.policy.dataSubmissionPolicyAccepted: false, dom.max_chrome_script_run_time: 0, dom.max_script_run_time: 0, dom.popup_maximum: 200, dom.webnotifications.enabled: false, general.useragent.override: Mozilla/5.0 (Windows NT 10...., media.peerconnection.enabled: false, network.proxy.http: 127.0.0.1, network.proxy.http_port: 24000, network.proxy.socks: 127.0.0.1, network.proxy.socks_port: 24000, network.proxy.socks_remote_dns: true, network.proxy.type: 1}}}], desiredCapabilities=Capabilities {acceptInsecureCerts: true, browserName: firefox, moz:debuggerAddress: true, moz:firefoxOptions: {binary: C:\\MyApp\\Files\\Firef..., log: {level: trace}, prefs: {browser.cache.disk.capacity: 1024, datareporting.policy.dataSubmissionP\nolicyAccepted: false, dom.max_chrome_script_run_time: 0, dom.max_script_run_time: 0, dom.popup_maximum: 200, dom.webnotifications.enabled: false, general.useragent.override: Mozilla/5.0 (Windows NT 10...., media.peerconnection.enabled: false, network.proxy.http: 127.0.0.1, network.proxy.http_port: 24000, network.proxy.socks: 127.0.0.1, network.proxy.socks_port: 24000, network.proxy.socks_remote_dns: true, network.proxy.type: 1}}}}]\nApr 12, 2022 1:12:15 PM org.openqa.selenium.os.OsProcess destroy\nINFO: Unable to drain process streams. Ignoring but the exception being swallowed follows.\norg.apache.commons.exec.ExecuteException: The stop timeout of 2000 ms was exceeded (Exit value: -559038737)\n    at org.apache.commons.exec.PumpStreamHandler.stopThread(PumpStreamHandler.java:295)\n    at org.apache.commons.exec.PumpStreamHandler.stop(PumpStreamHandler.java:180)\n    at org.openqa.selenium.os.OsProcess.destroy(OsProcess.java:135)\n    at org.openqa.selenium.os.CommandLine.destroy(CommandLine.java:139)\n    at org.openqa.selenium.remote.service.DriverService.stop(DriverService.java:281)\n    at org.openqa.selenium.remote.service.DriverCommandExecutor.execute(DriverCommandExecutor.java:154)\n    at org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:567)\n    at org.openqa.selenium.remote.RemoteWebDriver.startSession(RemoteWebDriver.java:248)\n    at org.openqa.selenium.remote.RemoteWebDriver.&lt;init&gt;(RemoteWebDriver.java:164)\n    at org.openqa.selenium.firefox.FirefoxDriver.&lt;init&gt;(FirefoxDriver.java:118)\n    at org.openqa.selenium.firefox.FirefoxDriver.&lt;init&gt;(FirefoxDriver.java:106)\n    at webdriverX.WebDriverX.launchNewFireFoxWebDriver(WebDriverX.java:150)\n    at webdriverX.WebDriverProfile.getTMPFirefoxProfile(WebDriverProfile.java:1030)\n    at webdriverX.WebDriverProfile.getTMPFirefoxProfile(WebDriverProfile.java:1165)\n    at webdriverX.WebDriverProfile.requestWebDriver(WebDriverProfile.java:735)\n    at fulfilment.source.pages.ProductPage.ProductTestSuit.scrapeField(ProductTestSuit.java:89)\n    at fulfilment.source.pages.ProductPage.ProductTestSuit$1.run(ProductTestSuit.java:52)\n</code></pre>\n<p><strong>Update #2</strong>:</p>\n<p>Please see some of the actual code used to launch dozens of instances of Firefox WebDriver:</p>\n<pre><code>    public static void scrapeField(List&lt;String&gt; urlList) throws Exception {\n    for (String url : urlList) {\n        \n        new Thread() {\n            public void run() {\n                try {\n                    \n                    \n                    scrapeField(url);\n                } catch (Exception v) {\n                    System.out.println(v);\n                }\n            }\n        }.start();\n    }\n}\n</code></pre>\n<p>The method <code>scrapeField()</code> essentially calls the method <code>getTMPFirefoxProfile()</code> which returns 1 instance of <code>Firefox WebDriver</code> per URL as seen below:</p>\n<pre><code>public static WebDriver getTMPFirefoxProfile(String ipAddress, Integer port) throws IOException, {\n    \n    System.setProperty(&quot;webdriver.gecko.driver&quot;, path_to_exe_file);\n\n    FirefoxOptions firefoxOptions = new FirefoxOptions();\n    firefoxOptions.addPreference(&quot;browser.cache.disk.capacity&quot;, 1024);\n\n    firefoxOptions.addPreference(&quot;dom.popup_maximum&quot;, 200);\n    firefoxOptions.addPreference(&quot;dom.webnotifications.enabled&quot;, false); \n    firefoxOptions.addPreference(&quot;media.peerconnection.enabled&quot;, false); \n    \n    firefoxOptions.addPreference(&quot;media.peerconnection.enabled&quot;, false);\n\n    firefoxOptions.addPreference(&quot;datareporting.policy.dataSubmissionPolicyAccepted&quot;, false);\n    firefoxOptions.addPreference(&quot;dom.max_chrome_script_run_time&quot;, 0); \n    firefoxOptions.addPreference(&quot;dom.max_script_run_time&quot;, 0); \n    firefoxOptions.addPreference(&quot;media.peerconnection.enabled&quot;, false); \n\n    firefoxOptions.setLogLevel(FirefoxDriverLogLevel.TRACE);\n\n    firefoxOptions.addPreference(&quot;general.useragent.override&quot;, rndUserAgentStr);\n                \n    firefoxOptions.addPreference(&quot;network.proxy.type&quot;, 1); \n\n    firefoxOptions.addPreference(&quot;network.proxy.socks&quot;, ipAddress); \n\n    firefoxOptions.addPreference(&quot;network.proxy.socks_port&quot;, port); \n\n    firefoxOptions.addPreference(&quot;network.proxy.http&quot;, ipAddress);  \n                    \n    firefoxOptions.addPreference(&quot;network.proxy.http_port&quot;, port); \n                    \n    firefoxOptions.addPreference(&quot;network.proxy.socks_remote_dns&quot;, true); \n                \n    firefoxOptions.setBinary(path_to_binary_firefox);\n\n\n    WebDriver driver = new FirefoxDriver(firefoxOptions);\n\n\n    return driver;\n}\n</code></pre>\n"},{"tags":["java","replace"],"comments":[{"owner":{"account_id":2360785,"reputation":11123,"user_id":2067492,"display_name":"matt"},"score":0,"creation_date":1649787579,"post_id":71847376,"comment_id":126963142,"body_markdown":"Strings are immutable. When you call replace it returns a copy. You never re-assign the values in `liste`.","body":"Strings are immutable. When you call replace it returns a copy. You never re-assign the values in <code>liste</code>."},{"owner":{"account_id":1938802,"reputation":12091,"user_id":1745544,"accept_rate":23,"display_name":"OldProgrammer"},"score":0,"creation_date":1649787599,"post_id":71847376,"comment_id":126963148,"body_markdown":"https://docs.oracle.com/javase/7/docs/api/java/lang/String.html#replace(java.lang.CharSequence,%20java.lang.CharSequence)","body":"<a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/String.html#replace(java.lang.CharSequence,%20java.lang.CharSequence)\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/7/docs/api/java/lang/&hellip;</a>"},{"owner":{"account_id":23454877,"reputation":41,"user_id":17510530,"display_name":"Martin M&#252;ller"},"score":0,"creation_date":1649787856,"post_id":71847376,"comment_id":126963226,"body_markdown":"Thanks, but even if I reassign the value ```buchstabe = buchstabe.replace```, it says the value is never being used. Do I need to return something?","body":"Thanks, but even if I reassign the value <code>buchstabe = buchstabe.replace</code>, it says the value is never being used. Do I need to return something?"},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":1,"creation_date":1649788059,"post_id":71847376,"comment_id":126963291,"body_markdown":"I would replace `&#228;` with `ae`, same for the other Umlaute - we do not know what else is happening with `buchstabe`, by that error, probably nothing. So better not use `buchstabe` at all, and apply the `replace` to `liste[i]` as already commented and  in answer","body":"I would replace <code>&#228;</code> with <code>ae</code>, same for the other Umlaute - we do not know what else is happening with <code>buchstabe</code>, by that error, probably nothing. So better not use <code>buchstabe</code> at all, and apply the <code>replace</code> to <code>liste[i]</code> as already commented and  in answer"},{"owner":{"account_id":2360785,"reputation":11123,"user_id":2067492,"display_name":"matt"},"score":1,"creation_date":1649788086,"post_id":71847376,"comment_id":126963298,"body_markdown":"@MartinM&#252;ller you question omits the necessary code to know how to fix it. How do you know the strings aren&#39;t being changed?","body":"@MartinM&#252;ller you question omits the necessary code to know how to fix it. How do you know the strings aren&#39;t being changed?"}],"answers":[{"tags":[],"owner":{"account_id":14627561,"reputation":1444,"user_id":10564458,"display_name":"Daniel"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1649787967,"creation_date":1649787644,"answer_id":71847430,"question_id":71847376,"body_markdown":"Strings in are immutable in Java, so you can&#39;t **change** a string.\r\nThe [`replace`][1] method creates a new strings and returns it, so you&#39;ll need to set the `buchstabe` variable to the newly created string:\r\n\r\n```java\r\nbuchstabe = buchstabe.replace(&quot;&#228;&quot;, &quot;a&quot;);\r\n```\r\n\r\nBTW.: You don&#39;t need to go through each character individually, the `replace` method replaces **all occurrences** in a string. \r\n\r\nThe replace method does not care whether the *needle* is present in your *haystack*. Therefore you can also save the checks whether e.g. an &quot;&#228;&quot; is contained in your string:\r\n\r\n```java\r\nString[] liste = {wort1, wort2};\r\nfor(int i = 0; i &lt; liste.length; i++) {\r\n    liste[i] = liste[i].replace(&quot;&#228;&quot;, &quot;a&quot;);\r\n}\r\n```\r\n\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/7/docs/api/java/lang/String.html#replace(java.lang.CharSequence,%20java.lang.CharSequence)","title":"Result of Replace function isn&#180;t used / cannot be applied","body":"<p>Strings in are immutable in Java, so you can't <strong>change</strong> a string.\nThe <a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/String.html#replace(java.lang.CharSequence,%20java.lang.CharSequence)\" rel=\"nofollow noreferrer\"><code>replace</code></a> method creates a new strings and returns it, so you'll need to set the <code>buchstabe</code> variable to the newly created string:</p>\n<pre class=\"lang-java prettyprint-override\"><code>buchstabe = buchstabe.replace(&quot;&quot;, &quot;a&quot;);\n</code></pre>\n<p>BTW.: You don't need to go through each character individually, the <code>replace</code> method replaces <strong>all occurrences</strong> in a string.</p>\n<p>The replace method does not care whether the <em>needle</em> is present in your <em>haystack</em>. Therefore you can also save the checks whether e.g. an &quot;&quot; is contained in your string:</p>\n<pre class=\"lang-java prettyprint-override\"><code>String[] liste = {wort1, wort2};\nfor(int i = 0; i &lt; liste.length; i++) {\n    liste[i] = liste[i].replace(&quot;&quot;, &quot;a&quot;);\n}\n</code></pre>\n"}],"owner":{"account_id":23454877,"reputation":41,"user_id":17510530,"display_name":"Martin M&#252;ller"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1649787967,"creation_date":1649787247,"question_id":71847376,"body_markdown":"I want to iterate over two input strings that being stored in an array. Next, I want to replace all umlauts (&#228;,&#246;,&#252;, ...) by its &quot;aquivalents&quot; a,o,u. \r\nSomehow the changes seem to not be applied to the array. How&#180;s that possible and what to do in order to fix this?\r\nThaanks for helping me!!!\r\n\r\n```\r\n        String[] liste = {wort1, wort2};\r\n        for(int i =0; i&lt;2; i++) {\r\n            for (int j=0; j&lt;liste[i].length(); j++) {\r\n                String buchstabe = liste[i].substring(j,j+1);\r\n                switch(buchstabe) {\r\n                    case &quot;&#228;&quot;:\r\n                    case &quot;&#196;&quot;:\r\n                        buchstabe.replace(&quot;&#228;&quot;, &quot;a&quot;);\r\n                        break;\r\n                    case &quot;&#246;&quot;:\r\n                    case &quot;&#214;&quot;:\r\n                        buchstabe.replace(&quot;&#246;&quot;, &quot;o&quot;);\r\n                        break;\r\n                    case &quot;&#252;&quot;:\r\n                    case &quot;&#220;&quot;:\r\n                        buchstabe.replace(&quot;&#252;&quot;, &quot;u&quot;);\r\n                        break;\r\n                    case &quot;&#223;&quot;:\r\n                        buchstabe.replace(&quot;&#223;&quot;, &quot;ss&quot;);\r\n                        break;\r\n                    default:\r\n                        break;","title":"Result of Replace function isn&#180;t used / cannot be applied","body":"<p>I want to iterate over two input strings that being stored in an array. Next, I want to replace all umlauts (,,, ...) by its &quot;aquivalents&quot; a,o,u.\nSomehow the changes seem to not be applied to the array. Hows that possible and what to do in order to fix this?\nThaanks for helping me!!!</p>\n<pre><code>        String[] liste = {wort1, wort2};\n        for(int i =0; i&lt;2; i++) {\n            for (int j=0; j&lt;liste[i].length(); j++) {\n                String buchstabe = liste[i].substring(j,j+1);\n                switch(buchstabe) {\n                    case &quot;&quot;:\n                    case &quot;&quot;:\n                        buchstabe.replace(&quot;&quot;, &quot;a&quot;);\n                        break;\n                    case &quot;&quot;:\n                    case &quot;&quot;:\n                        buchstabe.replace(&quot;&quot;, &quot;o&quot;);\n                        break;\n                    case &quot;&quot;:\n                    case &quot;&quot;:\n                        buchstabe.replace(&quot;&quot;, &quot;u&quot;);\n                        break;\n                    case &quot;&quot;:\n                        buchstabe.replace(&quot;&quot;, &quot;ss&quot;);\n                        break;\n                    default:\n                        break;\n</code></pre>\n"},{"tags":["java","eclipse","jar","classpath","buildpath"],"comments":[{"owner":{"account_id":13796,"reputation":19353,"user_id":27905,"display_name":"nitind"},"score":1,"creation_date":1649789696,"post_id":71847447,"comment_id":126963824,"body_markdown":"You have a `module-info.java`. Are you trying to use the Java module system?","body":"You have a <code>module-info.java</code>. Are you trying to use the Java module system?"},{"owner":{"account_id":12705698,"reputation":1,"user_id":9231075,"display_name":"Franz"},"score":0,"creation_date":1649867546,"post_id":71847447,"comment_id":126986429,"body_markdown":"Yeah I get a prompt to &quot;add &#39;require courserajava&#39; to module-info.java&quot; when I hover over the classes from the external library, but adding that line in module-info.java doesn&#39;t fix the issue.","body":"Yeah I get a prompt to &quot;add &#39;require courserajava&#39; to module-info.java&quot; when I hover over the classes from the external library, but adding that line in module-info.java doesn&#39;t fix the issue."}],"owner":{"account_id":12705698,"reputation":1,"user_id":9231075,"display_name":"Franz"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":110,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1649787742,"creation_date":1649787742,"question_id":71847447,"body_markdown":"I&#39;m stuck on trying to import an external library into an existing Eclipse project. I&#39;ve followed the steps in [this video][1] (hopefully not outdated), but I&#39;m still getting error messages saying I need to re-create those classes within the src folder. I&#39;ve attached 2 photos, hopefully they provide some insight:\r\n[View of errors within a class + project hierarchy][2] and\r\n[Project Build Path][3]\r\n\r\n\r\n  [1]: https://www.youtube.com/watch?v=rzB0s_76dBg\r\n  [2]: https://i.stack.imgur.com/ZtPw5.png\r\n  [3]: https://i.stack.imgur.com/Nx8ir.png","title":"Eclipse says &quot;package is not accesible&quot;, despite adding it to the classpath","body":"<p>I'm stuck on trying to import an external library into an existing Eclipse project. I've followed the steps in <a href=\"https://www.youtube.com/watch?v=rzB0s_76dBg\" rel=\"nofollow noreferrer\">this video</a> (hopefully not outdated), but I'm still getting error messages saying I need to re-create those classes within the src folder. I've attached 2 photos, hopefully they provide some insight:\n<a href=\"https://i.stack.imgur.com/ZtPw5.png\" rel=\"nofollow noreferrer\">View of errors within a class + project hierarchy</a> and\n<a href=\"https://i.stack.imgur.com/Nx8ir.png\" rel=\"nofollow noreferrer\">Project Build Path</a></p>\n"},{"tags":["java","vaadin","vaadin-flow"],"comments":[{"owner":{"account_id":295383,"reputation":4686,"user_id":599765,"accept_rate":22,"display_name":"Andr&#233; Schild"},"score":0,"creation_date":1649767912,"post_id":71842859,"comment_id":126955342,"body_markdown":"What is heavy? Loading the data from db to the middleware, or sending it from the middleware to the frontend?\nIf the first, add some caching of the data in the middleware","body":"What is heavy? Loading the data from db to the middleware, or sending it from the middleware to the frontend? If the first, add some caching of the data in the middleware"},{"owner":{"account_id":32278,"reputation":6743,"user_id":89397,"accept_rate":74,"display_name":"KCL"},"score":1,"creation_date":1649768169,"post_id":71842859,"comment_id":126955461,"body_markdown":"In this case, it&#39;s loading the data from an external API. Caching the data in the middleware is a viable option, but a total overkill for this very simple application. Another use case is simply having a large form lose all its user-entered data when navigating back and forth (e.g. to check a detail from another view). There are countless use cases where you want to preserve the state of the view between navigations.","body":"In this case, it&#39;s loading the data from an external API. Caching the data in the middleware is a viable option, but a total overkill for this very simple application. Another use case is simply having a large form lose all its user-entered data when navigating back and forth (e.g. to check a detail from another view). There are countless use cases where you want to preserve the state of the view between navigations."},{"owner":{"account_id":3837378,"reputation":35463,"user_id":3181392,"display_name":"cfrick"},"score":1,"creation_date":1649772536,"post_id":71842859,"comment_id":126957293,"body_markdown":"A theoretical way would be abusing a RouterLayout.  Create an intermediate layout with all the heavy content in it.  Then use the layout in the now basically empty view. If you are using Spring you could make the heavy content a component with `@UIScope`. But be aware, that UI is bascially the highest you can get (you can not share components between UIs).  So basically the heavy content will still be created once per User/Browser/... So maybe adding a caching layer for all users would still be the best solution.  If only to defend against problems with the remote API.","body":"A theoretical way would be abusing a RouterLayout.  Create an intermediate layout with all the heavy content in it.  Then use the layout in the now basically empty view. If you are using Spring you could make the heavy content a component with <code>@UIScope</code>. But be aware, that UI is bascially the highest you can get (you can not share components between UIs).  So basically the heavy content will still be created once per User/Browser/... So maybe adding a caching layer for all users would still be the best solution.  If only to defend against problems with the remote API."}],"answers":[{"tags":[],"owner":{"account_id":32278,"reputation":6743,"user_id":89397,"accept_rate":74,"display_name":"KCL"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1649786656,"creation_date":1649786656,"answer_id":71847284,"question_id":71842859,"body_markdown":"Answering my own question, in case someone else runs into the same situation.\r\n\r\nI had a Spring Boot application, so the first step was to define the scope for the views so that they wouldn&#39;t be recreated, a suitable scope is UIScope. However, that is not enough, even though injecting of beans work out-of-the-box, the views don&#39;t seem to be managed beans by default, so adding @Component annotation to the view makes them managed and thus, the @UIScope scoping also starts working.\r\n\r\n    @UIScope\r\n    @PreserveOnRefresh\r\n    @PageTitle(&quot;example&quot;)\r\n    @Route(value = &quot;example&quot;, layout = MainLayout.class)\r\n    @Component\r\n    public class ExampleView extends VerticalLayout {","title":"How do I preserve a Vaadin view instance when navigating between views","body":"<p>Answering my own question, in case someone else runs into the same situation.</p>\n<p>I had a Spring Boot application, so the first step was to define the scope for the views so that they wouldn't be recreated, a suitable scope is UIScope. However, that is not enough, even though injecting of beans work out-of-the-box, the views don't seem to be managed beans by default, so adding @Component annotation to the view makes them managed and thus, the @UIScope scoping also starts working.</p>\n<pre><code>@UIScope\n@PreserveOnRefresh\n@PageTitle(&quot;example&quot;)\n@Route(value = &quot;example&quot;, layout = MainLayout.class)\n@Component\npublic class ExampleView extends VerticalLayout {\n</code></pre>\n"}],"owner":{"account_id":32278,"reputation":6743,"user_id":89397,"accept_rate":74,"display_name":"KCL"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":343,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1649786656,"creation_date":1649766975,"question_id":71842859,"body_markdown":"I have a view which is quite heavy with data. The data is loaded when the view is initialized. Now, when I navigate away from the view using Router and then return to the view, a new view instance is created triggering refetching of all the data. I would like to preserve the original view instance even when returning to the view - how can this be achieved?\r\n\r\nEdit:\r\nTo add details, this is a Spring Boot application and unlike to my expectation, annotating a view as @UIScope didn&#39;t keep the instance, but a new instance was created every time when navigating to the view.","title":"How do I preserve a Vaadin view instance when navigating between views","body":"<p>I have a view which is quite heavy with data. The data is loaded when the view is initialized. Now, when I navigate away from the view using Router and then return to the view, a new view instance is created triggering refetching of all the data. I would like to preserve the original view instance even when returning to the view - how can this be achieved?</p>\n<p>Edit:\nTo add details, this is a Spring Boot application and unlike to my expectation, annotating a view as @UIScope didn't keep the instance, but a new instance was created every time when navigating to the view.</p>\n"},{"tags":["java","spring","spring-boot","validation","spring-restcontroller"],"answers":[{"tags":[],"owner":{"account_id":24831761,"reputation":144,"user_id":18710872,"display_name":"void"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1649786024,"creation_date":1649786024,"answer_id":71847178,"question_id":71847029,"body_markdown":"The issue here is that you defined your ```id``` as a primitive type, which can never be null.\r\n\r\nIf you chose a boxed type (```Integer``` in this case) this should work.\r\n\r\nSo in your DTO:\r\n```\r\nimport javax.validation.constraints.NotNull;\r\n\r\n@Data\r\npublic class CustomerUpdateRequestDto {\r\n    @NotNull\r\n    private Integer id;\r\n    ...\r\n}\r\n```","title":"Spring @Valid annotation not working as validating dto fields?","body":"<p>The issue here is that you defined your <code>id</code> as a primitive type, which can never be null.</p>\n<p>If you chose a boxed type (<code>Integer</code> in this case) this should work.</p>\n<p>So in your DTO:</p>\n<pre><code>import javax.validation.constraints.NotNull;\n\n@Data\npublic class CustomerUpdateRequestDto {\n    @NotNull\n    private Integer id;\n    ...\n}\n</code></pre>\n"}],"owner":{"account_id":1314578,"reputation":1907,"user_id":1261764,"accept_rate":94,"display_name":"abidinberkay"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1639,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71847178,"answer_count":1,"score":0,"last_activity_date":1649786024,"creation_date":1649785173,"question_id":71847029,"body_markdown":"I have checked many other questions about it but I cannot find the solution, where am I missing ?\r\n\r\nHere is the controller method:\r\n\r\n    package com.nishberkay.nishcustomer.controller;\r\n    \r\n    import com.nishberkay.nishcustomer.dto.request.CustomerAddRequestDto;\r\n    import com.nishberkay.nishcustomer.dto.request.CustomerUpdateRequestDto;\r\n    import com.nishberkay.nishcustomer.dto.response.CustomerDto;\r\n    import com.nishberkay.nishcustomer.entity.mysqlentity.Customer;\r\n    import com.nishberkay.nishcustomer.exception.InvalidRequestException;\r\n    import com.nishberkay.nishcustomer.service.CustomerService;\r\n    import org.modelmapper.ModelMapper;\r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.validation.BindingResult;\r\n    import org.springframework.validation.annotation.Validated;\r\n    import org.springframework.web.bind.annotation.*;\r\n    \r\n    import javax.validation.Valid;\r\n    \r\n    @RestController\r\n    @RequestMapping(&quot;/customer&quot;)\r\n    @Validated\r\n    public class CustomerController {\r\n    \r\n    \r\n        private CustomerService customerService;\r\n        private ModelMapper modelMapper;\r\n    \r\n        @Autowired\r\n        public CustomerController(CustomerService customerService, ModelMapper modelMapper) {\r\n            this.customerService = customerService;\r\n            this.modelMapper = modelMapper;\r\n        }\r\n    \r\n        @PutMapping\r\n        public CustomerDto updateCustomer(@Valid @RequestBody CustomerUpdateRequestDto customerDto,\r\n                                          BindingResult bindingResult) throws Exception {\r\n            if (bindingResult.hasErrors()) {\r\n                String errorMessage = bindingResult.getAllErrors().get(0).getDefaultMessage();\r\n                throw new InvalidRequestException(errorMessage);\r\n            }\r\n            Customer customer = modelMapper.map(customerDto, Customer.class);\r\n            return modelMapper.map(customerService.update(customer), CustomerDto.class);\r\n        }\r\n    }\r\n\r\nAnd my dto is:\r\n\r\n    import javax.validation.constraints.NotNull;\r\n    \r\n    @Data\r\n    public class CustomerUpdateRequestDto {\r\n    \r\n        @NotNull\r\n        private int id;\r\n    \r\n        @NotNull\r\n        private String firstName;\r\n    \r\n        @NotNull\r\n        private String lastName;\r\n    }\r\n\r\nMy problem is (maybe @Valid is actually working I am not sure), when I debug it with the postman request:\r\n\r\n    {\r\n        &quot;firstName&quot; : &quot;berkayaaasd&quot;,\r\n        &quot;lastName&quot; : &quot;dada&quot;\r\n    }\r\n\r\nI am expecting some kind of message like &quot;Id cannot be null&quot; but **id** **field is coming as 0** so thats why I think maybe **@Valid** is working but something else is wrong.\r\n\r\nAnd here is the pom dependencies:\r\n\r\n    &lt;dependencies&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;mysql&lt;/groupId&gt;\r\n                &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\r\n                &lt;scope&gt;runtime&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\r\n                &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\r\n                &lt;scope&gt;runtime&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n                &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n                &lt;optional&gt;true&lt;/optional&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n                &lt;scope&gt;test&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.data&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-data-jpa&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;2.6.1&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.modelmapper&lt;/groupId&gt;\r\n                &lt;artifactId&gt;modelmapper&lt;/artifactId&gt;\r\n                &lt;version&gt;2.3.8&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n        &lt;/dependencies&gt;\r\n\r\n\r\n","title":"Spring @Valid annotation not working as validating dto fields?","body":"<p>I have checked many other questions about it but I cannot find the solution, where am I missing ?</p>\n<p>Here is the controller method:</p>\n<pre><code>package com.nishberkay.nishcustomer.controller;\n\nimport com.nishberkay.nishcustomer.dto.request.CustomerAddRequestDto;\nimport com.nishberkay.nishcustomer.dto.request.CustomerUpdateRequestDto;\nimport com.nishberkay.nishcustomer.dto.response.CustomerDto;\nimport com.nishberkay.nishcustomer.entity.mysqlentity.Customer;\nimport com.nishberkay.nishcustomer.exception.InvalidRequestException;\nimport com.nishberkay.nishcustomer.service.CustomerService;\nimport org.modelmapper.ModelMapper;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.validation.BindingResult;\nimport org.springframework.validation.annotation.Validated;\nimport org.springframework.web.bind.annotation.*;\n\nimport javax.validation.Valid;\n\n@RestController\n@RequestMapping(&quot;/customer&quot;)\n@Validated\npublic class CustomerController {\n\n\n    private CustomerService customerService;\n    private ModelMapper modelMapper;\n\n    @Autowired\n    public CustomerController(CustomerService customerService, ModelMapper modelMapper) {\n        this.customerService = customerService;\n        this.modelMapper = modelMapper;\n    }\n\n    @PutMapping\n    public CustomerDto updateCustomer(@Valid @RequestBody CustomerUpdateRequestDto customerDto,\n                                      BindingResult bindingResult) throws Exception {\n        if (bindingResult.hasErrors()) {\n            String errorMessage = bindingResult.getAllErrors().get(0).getDefaultMessage();\n            throw new InvalidRequestException(errorMessage);\n        }\n        Customer customer = modelMapper.map(customerDto, Customer.class);\n        return modelMapper.map(customerService.update(customer), CustomerDto.class);\n    }\n}\n</code></pre>\n<p>And my dto is:</p>\n<pre><code>import javax.validation.constraints.NotNull;\n\n@Data\npublic class CustomerUpdateRequestDto {\n\n    @NotNull\n    private int id;\n\n    @NotNull\n    private String firstName;\n\n    @NotNull\n    private String lastName;\n}\n</code></pre>\n<p>My problem is (maybe @Valid is actually working I am not sure), when I debug it with the postman request:</p>\n<pre><code>{\n    &quot;firstName&quot; : &quot;berkayaaasd&quot;,\n    &quot;lastName&quot; : &quot;dada&quot;\n}\n</code></pre>\n<p>I am expecting some kind of message like &quot;Id cannot be null&quot; but <strong>id</strong> <strong>field is coming as 0</strong> so thats why I think maybe <strong>@Valid</strong> is working but something else is wrong.</p>\n<p>And here is the pom dependencies:</p>\n<pre><code>&lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;mysql&lt;/groupId&gt;\n            &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\n            &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.data&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-data-jpa&lt;/artifactId&gt;\n            &lt;version&gt;2.6.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.modelmapper&lt;/groupId&gt;\n            &lt;artifactId&gt;modelmapper&lt;/artifactId&gt;\n            &lt;version&gt;2.3.8&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n</code></pre>\n"},{"tags":["java","db2","ascii","ibm-midrange","7-bit"],"comments":[{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1648657860,"post_id":71680805,"comment_id":126682250,"body_markdown":"See sister site: Software Recommendations Stack Exchange.","body":"See sister site: Software Recommendations Stack Exchange."},{"owner":{"account_id":23685228,"reputation":1103,"user_id":17710270,"display_name":"passer-by"},"score":1,"creation_date":1648658835,"post_id":71680805,"comment_id":126682583,"body_markdown":"Just use String.replace.  https://docs.oracle.com/javase/7/docs/api/java/lang/String.html#replace(char,%20char)","body":"Just use String.replace.  <a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/String.html#replace(char,%20char)\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/7/docs/api/java/lang/&hellip;</a>"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1648660742,"post_id":71680805,"comment_id":126683356,"body_markdown":"This is actually quite subjective so I would probably advise building your own conversion map that suits *you*","body":"This is actually quite subjective so I would probably advise building your own conversion map that suits <i>you</i>"},{"owner":{"account_id":1457901,"reputation":420,"user_id":1373031,"accept_rate":75,"display_name":"Peter"},"score":0,"creation_date":1648667316,"post_id":71680805,"comment_id":126685564,"body_markdown":"@BasilBourque there is tens if not hundreds of questions just like mine specifically asking for the same thing sans the special characters, why close mine? I edited the question to remove the concerning word. Hopefully this will suffice.","body":"@BasilBourque there is tens if not hundreds of questions just like mine specifically asking for the same thing sans the special characters, why close mine? I edited the question to remove the concerning word. Hopefully this will suffice."},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":1,"creation_date":1648668419,"post_id":71680805,"comment_id":126685925,"body_markdown":"There is no universal method that can replace dashes or smart quotes, either in Java or in the Unicode specification.  You will have to do it yourself with your own mappings.  That said, you can probably use `s = s.replaceAll(&quot;\\\\p{Pd}&quot;, &quot;-&quot;)` and `s = s.replaceAll(&quot;[\\\\p{Pi}\\\\p{Pf}]&quot;, &quot;\\&quot;&quot;)` to make it shorter.  See http://unicode.org/reports/tr44/#General_Category_Values.","body":"There is no universal method that can replace dashes or smart quotes, either in Java or in the Unicode specification.  You will have to do it yourself with your own mappings.  That said, you can probably use <code>s = s.replaceAll(&quot;\\\\p{Pd}&quot;, &quot;-&quot;)</code> and <code>s = s.replaceAll(&quot;[\\\\p{Pi}\\\\p{Pf}]&quot;, &quot;\\&quot;&quot;)</code> to make it shorter.  See <a href=\"http://unicode.org/reports/tr44/#General_Category_Values\" rel=\"nofollow noreferrer\">unicode.org/reports/tr44/#General_Category_Values</a>."},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1648671613,"post_id":71680805,"comment_id":126686972,"body_markdown":"I  voted to close your Question because asking for library recommendations is explicitly off-topic here. Such questions tend to devolve into unproductive arguments. The sister site I recommended is designed to avoid that problem. Youve reworded to avoid explicitly asking for a library. But given that you yourself have said there are tens if not hundreds of duplicate questions, then there is no point in reopening this one.","body":"I  voted to close your Question because asking for library recommendations is explicitly off-topic here. Such questions tend to devolve into unproductive arguments. The sister site I recommended is designed to avoid that problem. Youve reworded to avoid explicitly asking for a library. But given that you yourself have said there are tens if not hundreds of duplicate questions, then there is no point in reopening this one."},{"owner":{"account_id":1457901,"reputation":420,"user_id":1373031,"accept_rate":75,"display_name":"Peter"},"score":0,"creation_date":1648672306,"post_id":71680805,"comment_id":126687170,"body_markdown":"@BasilBourque yes there is tens if not hundreds of similar questions, but not one of them deals with special characters. They all deal with accent marks.","body":"@BasilBourque yes there is tens if not hundreds of similar questions, but not one of them deals with special characters. They all deal with accent marks."},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1648682254,"post_id":71680805,"comment_id":126689716,"body_markdown":"Youve not yet defined &quot;special characters&quot;.","body":"Youve not yet defined &quot;special characters&quot;."},{"owner":{"account_id":1457901,"reputation":420,"user_id":1373031,"accept_rate":75,"display_name":"Peter"},"score":0,"creation_date":1648683756,"post_id":71680805,"comment_id":126689986,"body_markdown":"@BasilBourque this must be a big misunderstanding. Under special characters I meant the very ones I listed as examples: opening and closing quotes and dash. As I said multiple times and listed in my examples, the existing questions only deal with removing accents like &#232; -&gt; e. But they will not convert  to &quot;.","body":"@BasilBourque this must be a big misunderstanding. Under special characters I meant the very ones I listed as examples: opening and closing quotes and dash. As I said multiple times and listed in my examples, the existing questions only deal with removing accents like &#232; -&gt; e. But they will not convert  to &quot;."},{"owner":{"account_id":11683,"reputation":1438179,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":0,"creation_date":1648818748,"post_id":71680805,"comment_id":126727383,"body_markdown":"@Peter: So are those three the *only* characters you consider to be &quot;special&quot;? While the question is under-specified, no-one will be able to help you... (To be clear: it&#39;s *incredibly* frustrating to provide an answer that does everything in the question, only to be told, &quot;Oh but there&#39;s also this case that your answer doesn&#39;t cover.&quot; And it feels like that&#39;s very, very likely to happen here with such a vague description as &quot;special characters&quot;.)","body":"@Peter: So are those three the <i>only</i> characters you consider to be &quot;special&quot;? While the question is under-specified, no-one will be able to help you... (To be clear: it&#39;s <i>incredibly</i> frustrating to provide an answer that does everything in the question, only to be told, &quot;Oh but there&#39;s also this case that your answer doesn&#39;t cover.&quot; And it feels like that&#39;s very, very likely to happen here with such a vague description as &quot;special characters&quot;.)"},{"owner":{"account_id":1457901,"reputation":420,"user_id":1373031,"accept_rate":75,"display_name":"Peter"},"score":0,"creation_date":1648820673,"post_id":71680805,"comment_id":126728176,"body_markdown":"@JonSkeet, those are the three I came across that cause issues. I am looking for general solution that would handle any future cases. Maybe me choosing the name &quot;special characters&quot; was not great. I wanted to differentiate my question from all the others which are only concerned with accent marks or alphabet characters. I am sure that there are more characters like the ones I have provided. For example ellipsis, bottom quotes, open and closed single quote, etc.","body":"@JonSkeet, those are the three I came across that cause issues. I am looking for general solution that would handle any future cases. Maybe me choosing the name &quot;special characters&quot; was not great. I wanted to differentiate my question from all the others which are only concerned with accent marks or alphabet characters. I am sure that there are more characters like the ones I have provided. For example ellipsis, bottom quotes, open and closed single quote, etc."},{"owner":{"account_id":11683,"reputation":1438179,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":0,"creation_date":1648820866,"post_id":71680805,"comment_id":126728269,"body_markdown":"Right. So as I suspected, a solution which covered those three *wouldn&#39;t* be acceptable. You need to come up with a definition for exactly which characters you&#39;d expect to be covered.","body":"Right. So as I suspected, a solution which covered those three <i>wouldn&#39;t</i> be acceptable. You need to come up with a definition for exactly which characters you&#39;d expect to be covered."}],"answers":[{"tags":[],"owner":{"account_id":34058,"reputation":14281,"user_id":95852,"display_name":"John Y"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1649006971,"creation_date":1649006531,"answer_id":71728267,"question_id":71680805,"body_markdown":"The commenters who have said your problem is &quot;subjective&quot; (not in the sense of opinion-based but in the sense of each person&#39;s specific requirements being slightly different from everyone else&#39;s) or poorly defined or inherently impossible... are technically correct.\r\n\r\nBut you are looking for something practical you can do to improve the situation, which is also completely valid.\r\n\r\nThe sweet spot in terms of balancing difficulty of implementation with accuracy of results is to stitch together what you&#39;ve already found plus the suggestions from the less-negative commenters:\r\n\r\n* Handle the diacriticals and other &quot;standardly normalizable&quot; characters with standard normalization procedures.\r\n* Handle everything else with your own mapping (which may include the [Unicode General_Category property](https://unicode.org/reports/tr44/#General_Category_Values), but ultimately might need to include your own hand-picked replacement of specific characters with other specific characters).\r\n\r\nThe above *might* cover &quot;all&quot; future cases, depending on where the data is coming from. Or close enough to all that you can implement it and be done with it. If you want to add some robustness, and will be around to maintain this process for a while, then you could also come up with a list of all the characters you want to allow in the sanitized result, and then set up some kind of exception or logging mechanism that will let you (or your successor) find new unhandled cases as they arise that can then be used to refine the custom part of the mapping.","title":"Convert Extended ASCII or Unicode to 7-bit ASCII (&lt;128) equivalent including special characters","body":"<p>The commenters who have said your problem is &quot;subjective&quot; (not in the sense of opinion-based but in the sense of each person's specific requirements being slightly different from everyone else's) or poorly defined or inherently impossible... are technically correct.</p>\n<p>But you are looking for something practical you can do to improve the situation, which is also completely valid.</p>\n<p>The sweet spot in terms of balancing difficulty of implementation with accuracy of results is to stitch together what you've already found plus the suggestions from the less-negative commenters:</p>\n<ul>\n<li>Handle the diacriticals and other &quot;standardly normalizable&quot; characters with standard normalization procedures.</li>\n<li>Handle everything else with your own mapping (which may include the <a href=\"https://unicode.org/reports/tr44/#General_Category_Values\" rel=\"nofollow noreferrer\">Unicode General_Category property</a>, but ultimately might need to include your own hand-picked replacement of specific characters with other specific characters).</li>\n</ul>\n<p>The above <em>might</em> cover &quot;all&quot; future cases, depending on where the data is coming from. Or close enough to all that you can implement it and be done with it. If you want to add some robustness, and will be around to maintain this process for a while, then you could also come up with a list of all the characters you want to allow in the sanitized result, and then set up some kind of exception or logging mechanism that will let you (or your successor) find new unhandled cases as they arise that can then be used to refine the custom part of the mapping.</p>\n"},{"tags":[],"owner":{"account_id":24829201,"reputation":21,"user_id":18708558,"display_name":"Jesse"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1649273903,"creation_date":1649129771,"answer_id":71746043,"question_id":71680805,"body_markdown":"You can just use String.replace() to replace the quote characters as another commenter recommends, and you could grow the list of problematic characters over time.\r\n\r\nYou could also use a more generic function to replace or ignore any characters that can&#39;t be encoded. For instance:\r\n```java\r\n    private String removeUnrepresentableChars(final String _str, final String _encoding) throws CharacterCodingException, UnsupportedEncodingException {\r\n        final CharsetEncoder enccoder = Charset.forName(_encoding).newEncoder();\r\n        enccoder.onUnmappableCharacter(CodingErrorAction.IGNORE);\r\n        ByteBuffer encoded = enccoder.encode(CharBuffer.wrap(_str));\r\n        return new String(encoded.array(), _encoding);\r\n    }\r\n\r\n    private String replaceUnrepresentableChars(final String _str, final String _encoding, final String _replacement) throws CharacterCodingException, UnsupportedEncodingException {\r\n        final CharsetEncoder encoder = Charset.forName(_encoding).newEncoder();\r\n        encoder.onUnmappableCharacter(CodingErrorAction.REPLACE);\r\n        encoder.replaceWith(_replacement.getBytes(_encoding));\r\n        ByteBuffer encoded = encoder.encode(CharBuffer.wrap(_str));\r\n        return new String(encoded.array(), _encoding);\r\n    }\r\n```\r\nSo you could call those with an `_encoding` of &quot;IBM-037&quot;, for instance.\r\n\r\n\r\nHowever, if your objective is to lose as little information as possible, you should evaluate whether the data can be stored in UTF-8 (CCSID 1208). This could handle the smart quotes and other &quot;special characters&quot; just fine. Depending on your database and application structure, such a change could be very small to implement, or it could be very large and risky! But the only way to have lossless translation is to use a unicode flavor, and UTF-8 is most sensible. ","title":"Convert Extended ASCII or Unicode to 7-bit ASCII (&lt;128) equivalent including special characters","body":"<p>You can just use String.replace() to replace the quote characters as another commenter recommends, and you could grow the list of problematic characters over time.</p>\n<p>You could also use a more generic function to replace or ignore any characters that can't be encoded. For instance:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    private String removeUnrepresentableChars(final String _str, final String _encoding) throws CharacterCodingException, UnsupportedEncodingException {\n        final CharsetEncoder enccoder = Charset.forName(_encoding).newEncoder();\n        enccoder.onUnmappableCharacter(CodingErrorAction.IGNORE);\n        ByteBuffer encoded = enccoder.encode(CharBuffer.wrap(_str));\n        return new String(encoded.array(), _encoding);\n    }\n\n    private String replaceUnrepresentableChars(final String _str, final String _encoding, final String _replacement) throws CharacterCodingException, UnsupportedEncodingException {\n        final CharsetEncoder encoder = Charset.forName(_encoding).newEncoder();\n        encoder.onUnmappableCharacter(CodingErrorAction.REPLACE);\n        encoder.replaceWith(_replacement.getBytes(_encoding));\n        ByteBuffer encoded = encoder.encode(CharBuffer.wrap(_str));\n        return new String(encoded.array(), _encoding);\n    }\n</code></pre>\n<p>So you could call those with an <code>_encoding</code> of &quot;IBM-037&quot;, for instance.</p>\n<p>However, if your objective is to lose as little information as possible, you should evaluate whether the data can be stored in UTF-8 (CCSID 1208). This could handle the smart quotes and other &quot;special characters&quot; just fine. Depending on your database and application structure, such a change could be very small to implement, or it could be very large and risky! But the only way to have lossless translation is to use a unicode flavor, and UTF-8 is most sensible.</p>\n"},{"tags":[],"owner":{"account_id":1457901,"reputation":420,"user_id":1373031,"accept_rate":75,"display_name":"Peter"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1649785950,"creation_date":1649784380,"answer_id":71846856,"question_id":71680805,"body_markdown":"After some digging I was able to find solution based on [this answer][1] using [org.apache.lucene.analysis.ASCIIFoldingFilter][2]\r\n\r\nAll the examples I was able to find were using the static version of the method [foldToASCII][3] as in [this project][4]:\r\n\r\n\tprivate static String getFoldedString(String text) {\r\n\t\tchar[] textChar = text.toCharArray();\r\n\t\tchar[] output = new char[textChar.length * 4];\r\n\t\tint outputPos = ASCIIFoldingFilter.foldToASCII(textChar, 0, output, 0, textChar.length);\r\n\t\ttext = new String(output, 0, outputPos);\r\n\t\treturn text;\r\n\t}\r\n\r\nHowever that static method has a note on it saying \r\n\r\n&gt; This API is for internal purposes only and might change in incompatible ways in the next release.\r\n\r\nSo after some trial and error I came up with this version that avoids using the static method:\r\n\r\n\tpublic static String getFoldedString(String text) throws IOException {\r\n\t\tString output = &quot;&quot;;\r\n\t\ttry (Analyzer analyzer = CustomAnalyzer.builder()\r\n\t\t          .withTokenizer(KeywordTokenizerFactory.class)\r\n\t\t          .addTokenFilter(ASCIIFoldingFilterFactory.class)\r\n\t\t          .build()) {\r\n\t\t\ttry (TokenStream ts = analyzer.tokenStream(null, new StringReader(text))) {\r\n\t\t\t    CharTermAttribute charTermAtt = ts.addAttribute(CharTermAttribute.class);\r\n\t\t\t    ts.reset();\r\n\t\t\t    if (ts.incrementToken()) output = charTermAtt.toString();\r\n\t\t\t    ts.end();\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn output;\r\n\t}\r\n\r\nSimilar to an answer I provided [here][5].\r\n\r\nThis does exactly what I was looking for and translates characters to their ASCII 7-bit equivalent version.\r\n\r\nHowever, through further research I have found that because I am mostly dealing with Windows-1252 encoding and because of the way jt400 handles ASCII &lt;-&gt; EBCDIC (CCSID 37) translation, if an ASCII string is translated to EBCDIC and back to ACSII, the only characters that are lost are `0x80` through `0x9f`. So inspired by the way [lucene&#39;s foldToASCII][6] handles it, I put together following method that handles these cases only:\r\n\r\n\tpublic static String replaceInvalidChars(String text) {\r\n\t\tchar input[] = text.toCharArray();\r\n\t\tint length = input.length;\r\n\t\tchar output[] = new char[length * 6];\r\n\t\tint outputPos = 0;\r\n\t\tfor (int pos = 0; pos &lt; length; pos++) {\r\n\t\t\tfinal char c = input[pos];\r\n\t\t\tif (c &lt; &#39;\\u0080&#39;) {\r\n\t\t\t\toutput[outputPos++] = c;\r\n\t\t\t} else {\r\n\t\t\t\tswitch (c) {\r\n\t\t\t\t\tcase &#39;\\u20ac&#39;:  // 0x80\r\n\t\t\t\t\t\toutput[outputPos++] = &#39;E&#39;;\r\n\t\t\t\t\t\toutput[outputPos++] = &#39;U&#39;;\r\n\t\t\t\t\t\toutput[outputPos++] = &#39;R&#39;;\r\n\t\t\t            break;\r\n\t\t\t\t\tcase &#39;\\u201a&#39;:  // 0x82\r\n\t\t\t\t\t\toutput[outputPos++] = &#39;\\&#39;&#39;;\r\n\t\t\t            break;\r\n\t\t\t\t\tcase &#39;\\u0192&#39;:  // 0x83\r\n\t\t\t\t\t\toutput[outputPos++] = &#39;f&#39;;\r\n\t\t\t            break;\r\n\t\t\t\t\tcase &#39;\\u201e&#39;:  // 0x84\r\n\t\t\t\t\t\toutput[outputPos++] = &#39;&quot;&#39;;\r\n\t\t\t            break;\r\n\t\t\t\t\tcase &#39;\\u2026&#39;:  // 0x85\r\n\t\t\t\t\t\toutput[outputPos++] = &#39;.&#39;;\r\n\t\t\t\t\t\toutput[outputPos++] = &#39;.&#39;;\r\n\t\t\t\t\t\toutput[outputPos++] = &#39;.&#39;;\r\n\t\t\t            break;\r\n\t\t\t\t\tcase &#39;\\u2020&#39;:  // 0x86\r\n\t\t\t\t\t\toutput[outputPos++] = &#39;?&#39;;\r\n\t\t\t            break;\r\n\t\t\t\t\tcase &#39;\\u2021&#39;:  // 0x87\r\n\t\t\t\t\t\toutput[outputPos++] = &#39;?&#39;;\r\n\t\t\t            break;\r\n\t\t\t\t\tcase &#39;\\u02c6&#39;:  // 0x88\r\n\t\t\t\t\t\toutput[outputPos++] = &#39;^&#39;;\r\n\t\t\t            break;\r\n\t\t\t\t\tcase &#39;\\u2030&#39;:  // 0x89\r\n\t\t\t\t\t\toutput[outputPos++] = &#39;p&#39;;\r\n\t\t\t\t\t\toutput[outputPos++] = &#39;e&#39;;\r\n\t\t\t\t\t\toutput[outputPos++] = &#39;r&#39;;\r\n\t\t\t\t\t\toutput[outputPos++] = &#39;m&#39;;\r\n\t\t\t\t\t\toutput[outputPos++] = &#39;i&#39;;\r\n\t\t\t\t\t\toutput[outputPos++] = &#39;l&#39;;\r\n\r\n\t\t\t            break;\r\n\t\t\t\t\tcase &#39;\\u0160&#39;:  // 0x8a\r\n\t\t\t\t\t\toutput[outputPos++] = &#39;S&#39;;\r\n\t\t\t            break;\r\n\t\t\t\t\tcase &#39;\\u2039&#39;:  // 0x8b\r\n\t\t\t\t\t\toutput[outputPos++] = &#39;\\&#39;&#39;;\r\n\t\t\t            break;\r\n\t\t\t\t\tcase &#39;\\u0152&#39;:  // 0x8c\r\n\t\t\t\t\t\toutput[outputPos++] = &#39;O&#39;;\r\n\t\t\t\t\t\toutput[outputPos++] = &#39;E&#39;;\r\n\t\t\t            break;\r\n\t\t\t\t\tcase &#39;\\u017d&#39;:  // 0x8e\r\n\t\t\t\t\t\toutput[outputPos++] = &#39;Z&#39;;\r\n\t\t\t            break;\r\n\t\t\t\t\tcase &#39;\\u2018&#39;:  // 0x91\r\n\t\t\t\t\t\toutput[outputPos++] = &#39;\\&#39;&#39;;\r\n\t\t\t            break;\r\n\t\t\t\t\tcase &#39;\\u2019&#39;:  // 0x92\r\n\t\t\t\t\t\toutput[outputPos++] = &#39;\\&#39;&#39;;\r\n\t\t\t            break;\r\n\t\t\t\t\tcase &#39;\\u201c&#39;:  // 0x93\r\n\t\t\t\t\t\toutput[outputPos++] = &#39;&quot;&#39;;\r\n\t\t\t            break;\r\n\t\t\t\t\tcase &#39;\\u201d&#39;:  // 0x94\r\n\t\t\t\t\t\toutput[outputPos++] = &#39;&quot;&#39;;\r\n\t\t\t            break;\r\n\t\t\t\t\tcase &#39;\\u2022&#39;:  // 0x95\r\n\t\t\t\t\t\toutput[outputPos++] = &#39;-&#39;;\r\n\t\t\t            break;\r\n\t\t\t\t\tcase &#39;\\u2013&#39;:  // 0x96\r\n\t\t\t\t\t\toutput[outputPos++] = &#39;-&#39;;\r\n\t\t\t            break;\r\n\t\t\t\t\tcase &#39;\\u2014&#39;:  // 0x97\r\n\t\t\t\t\t\toutput[outputPos++] = &#39;-&#39;;\r\n\t\t\t            break;\r\n\t\t\t\t\tcase &#39;\\u02dc&#39;:  // 0x98\r\n\t\t\t\t\t\toutput[outputPos++] = &#39;~&#39;;\r\n\t\t\t            break;\r\n\t\t\t\t\tcase &#39;\\u2122&#39;:  // 0x99\r\n\t\t\t\t\t\toutput[outputPos++] = &#39;(&#39;;\r\n\t\t\t\t\t\toutput[outputPos++] = &#39;T&#39;;\r\n\t\t\t\t\t\toutput[outputPos++] = &#39;M&#39;;\r\n\t\t\t\t\t\toutput[outputPos++] = &#39;)&#39;;\r\n\t\t\t            break;\r\n\t\t\t\t\tcase &#39;\\u0161&#39;:  // 0x9a\r\n\t\t\t\t\t\toutput[outputPos++] = &#39;s&#39;;\r\n\t\t\t            break;\r\n\t\t\t\t\tcase &#39;\\u203a&#39;:  // 0x9b\r\n\t\t\t\t\t\toutput[outputPos++] = &#39;\\&#39;&#39;;\r\n\t\t\t            break;\r\n\t\t\t\t\tcase &#39;\\u0153&#39;:  // 0x9c\r\n\t\t\t\t\t\toutput[outputPos++] = &#39;o&#39;;\r\n\t\t\t\t\t\toutput[outputPos++] = &#39;e&#39;;\r\n\t\t\t            break;\r\n\t\t\t\t\tcase &#39;\\u017e&#39;:  // 0x9e\r\n\t\t\t\t\t\toutput[outputPos++] = &#39;z&#39;;\r\n\t\t\t            break;\r\n\t\t\t\t\tcase &#39;\\u0178&#39;:  // 0x9f\r\n\t\t\t\t\t\toutput[outputPos++] = &#39;Y&#39;;\r\n\t\t\t            break;\r\n\t\t\t        default:\r\n\t\t\t        \toutput[outputPos++] = c;\r\n\t\t\t        \tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn new String(Arrays.copyOf(output, outputPos));\r\n\t}\r\n\r\nSince it turns out that my real problem was Windows-1252 to Latin-1 (ISO-8859-1) translation, here is a [supporting material][7] that shows the Windows-1252 to Unicode translation used in the method above to ultimately get Latin-1 encoding. \r\n\r\n\r\n  [1]: https://stackoverflow.com/a/13201508/1373031\r\n  [2]: https://lucene.apache.org/core/4_9_0/analyzers-common/org/apache/lucene/analysis/miscellaneous/ASCIIFoldingFilter.html\r\n  [3]: https://lucene.apache.org/core/4_0_0/analyzers-common/org/apache/lucene/analysis/miscellaneous/ASCIIFoldingFilter.html#foldToASCII(char[],%20int,%20char[],%20int,%20int)\r\n  [4]: https://github.com/lumongo/lumongo/blob/c42a8512af22a2a992bd172a9c89f1b71289fec2/lumongo-cluster/src/main/java/org/lumongo/server/index/LumongoSegment.java\r\n  [5]: https://stackoverflow.com/a/71684131/1373031\r\n  [6]: https://github.com/apache/lucene/blob/8ac26737913d0c1555019e93bc6bf7db1ab9047e/lucene/analysis/common/src/java/org/apache/lucene/analysis/miscellaneous/ASCIIFoldingFilter.java\r\n  [7]: https://www.i18nqa.com/debug/table-iso8859-1-vs-windows-1252.html","title":"Convert Extended ASCII or Unicode to 7-bit ASCII (&lt;128) equivalent including special characters","body":"<p>After some digging I was able to find solution based on <a href=\"https://stackoverflow.com/a/13201508/1373031\">this answer</a> using <a href=\"https://lucene.apache.org/core/4_9_0/analyzers-common/org/apache/lucene/analysis/miscellaneous/ASCIIFoldingFilter.html\" rel=\"nofollow noreferrer\">org.apache.lucene.analysis.ASCIIFoldingFilter</a></p>\n<p>All the examples I was able to find were using the static version of the method <a href=\"https://lucene.apache.org/core/4_0_0/analyzers-common/org/apache/lucene/analysis/miscellaneous/ASCIIFoldingFilter.html#foldToASCII(char%5B%5D,%20int,%20char%5B%5D,%20int,%20int)\" rel=\"nofollow noreferrer\">foldToASCII</a> as in <a href=\"https://github.com/lumongo/lumongo/blob/c42a8512af22a2a992bd172a9c89f1b71289fec2/lumongo-cluster/src/main/java/org/lumongo/server/index/LumongoSegment.java\" rel=\"nofollow noreferrer\">this project</a>:</p>\n<pre><code>private static String getFoldedString(String text) {\n    char[] textChar = text.toCharArray();\n    char[] output = new char[textChar.length * 4];\n    int outputPos = ASCIIFoldingFilter.foldToASCII(textChar, 0, output, 0, textChar.length);\n    text = new String(output, 0, outputPos);\n    return text;\n}\n</code></pre>\n<p>However that static method has a note on it saying</p>\n<blockquote>\n<p>This API is for internal purposes only and might change in incompatible ways in the next release.</p>\n</blockquote>\n<p>So after some trial and error I came up with this version that avoids using the static method:</p>\n<pre><code>public static String getFoldedString(String text) throws IOException {\n    String output = &quot;&quot;;\n    try (Analyzer analyzer = CustomAnalyzer.builder()\n              .withTokenizer(KeywordTokenizerFactory.class)\n              .addTokenFilter(ASCIIFoldingFilterFactory.class)\n              .build()) {\n        try (TokenStream ts = analyzer.tokenStream(null, new StringReader(text))) {\n            CharTermAttribute charTermAtt = ts.addAttribute(CharTermAttribute.class);\n            ts.reset();\n            if (ts.incrementToken()) output = charTermAtt.toString();\n            ts.end();\n        }\n    }\n    return output;\n}\n</code></pre>\n<p>Similar to an answer I provided <a href=\"https://stackoverflow.com/a/71684131/1373031\">here</a>.</p>\n<p>This does exactly what I was looking for and translates characters to their ASCII 7-bit equivalent version.</p>\n<p>However, through further research I have found that because I am mostly dealing with Windows-1252 encoding and because of the way jt400 handles ASCII &lt;-&gt; EBCDIC (CCSID 37) translation, if an ASCII string is translated to EBCDIC and back to ACSII, the only characters that are lost are <code>0x80</code> through <code>0x9f</code>. So inspired by the way <a href=\"https://github.com/apache/lucene/blob/8ac26737913d0c1555019e93bc6bf7db1ab9047e/lucene/analysis/common/src/java/org/apache/lucene/analysis/miscellaneous/ASCIIFoldingFilter.java\" rel=\"nofollow noreferrer\">lucene's foldToASCII</a> handles it, I put together following method that handles these cases only:</p>\n<pre><code>public static String replaceInvalidChars(String text) {\n    char input[] = text.toCharArray();\n    int length = input.length;\n    char output[] = new char[length * 6];\n    int outputPos = 0;\n    for (int pos = 0; pos &lt; length; pos++) {\n        final char c = input[pos];\n        if (c &lt; '\\u0080') {\n            output[outputPos++] = c;\n        } else {\n            switch (c) {\n                case '\\u20ac':  // 0x80\n                    output[outputPos++] = 'E';\n                    output[outputPos++] = 'U';\n                    output[outputPos++] = 'R';\n                    break;\n                case '\\u201a':  // 0x82\n                    output[outputPos++] = '\\'';\n                    break;\n                case '\\u0192':  // 0x83\n                    output[outputPos++] = 'f';\n                    break;\n                case '\\u201e':  // 0x84\n                    output[outputPos++] = '&quot;';\n                    break;\n                case '\\u2026':  // 0x85\n                    output[outputPos++] = '.';\n                    output[outputPos++] = '.';\n                    output[outputPos++] = '.';\n                    break;\n                case '\\u2020':  // 0x86\n                    output[outputPos++] = '?';\n                    break;\n                case '\\u2021':  // 0x87\n                    output[outputPos++] = '?';\n                    break;\n                case '\\u02c6':  // 0x88\n                    output[outputPos++] = '^';\n                    break;\n                case '\\u2030':  // 0x89\n                    output[outputPos++] = 'p';\n                    output[outputPos++] = 'e';\n                    output[outputPos++] = 'r';\n                    output[outputPos++] = 'm';\n                    output[outputPos++] = 'i';\n                    output[outputPos++] = 'l';\n\n                    break;\n                case '\\u0160':  // 0x8a\n                    output[outputPos++] = 'S';\n                    break;\n                case '\\u2039':  // 0x8b\n                    output[outputPos++] = '\\'';\n                    break;\n                case '\\u0152':  // 0x8c\n                    output[outputPos++] = 'O';\n                    output[outputPos++] = 'E';\n                    break;\n                case '\\u017d':  // 0x8e\n                    output[outputPos++] = 'Z';\n                    break;\n                case '\\u2018':  // 0x91\n                    output[outputPos++] = '\\'';\n                    break;\n                case '\\u2019':  // 0x92\n                    output[outputPos++] = '\\'';\n                    break;\n                case '\\u201c':  // 0x93\n                    output[outputPos++] = '&quot;';\n                    break;\n                case '\\u201d':  // 0x94\n                    output[outputPos++] = '&quot;';\n                    break;\n                case '\\u2022':  // 0x95\n                    output[outputPos++] = '-';\n                    break;\n                case '\\u2013':  // 0x96\n                    output[outputPos++] = '-';\n                    break;\n                case '\\u2014':  // 0x97\n                    output[outputPos++] = '-';\n                    break;\n                case '\\u02dc':  // 0x98\n                    output[outputPos++] = '~';\n                    break;\n                case '\\u2122':  // 0x99\n                    output[outputPos++] = '(';\n                    output[outputPos++] = 'T';\n                    output[outputPos++] = 'M';\n                    output[outputPos++] = ')';\n                    break;\n                case '\\u0161':  // 0x9a\n                    output[outputPos++] = 's';\n                    break;\n                case '\\u203a':  // 0x9b\n                    output[outputPos++] = '\\'';\n                    break;\n                case '\\u0153':  // 0x9c\n                    output[outputPos++] = 'o';\n                    output[outputPos++] = 'e';\n                    break;\n                case '\\u017e':  // 0x9e\n                    output[outputPos++] = 'z';\n                    break;\n                case '\\u0178':  // 0x9f\n                    output[outputPos++] = 'Y';\n                    break;\n                default:\n                    output[outputPos++] = c;\n                    break;\n            }\n        }\n    }\n    \n    return new String(Arrays.copyOf(output, outputPos));\n}\n</code></pre>\n<p>Since it turns out that my real problem was Windows-1252 to Latin-1 (ISO-8859-1) translation, here is a <a href=\"https://www.i18nqa.com/debug/table-iso8859-1-vs-windows-1252.html\" rel=\"nofollow noreferrer\">supporting material</a> that shows the Windows-1252 to Unicode translation used in the method above to ultimately get Latin-1 encoding.</p>\n"}],"owner":{"account_id":1457901,"reputation":420,"user_id":1373031,"accept_rate":75,"display_name":"Peter"},"comment_count":12,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":691,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":71846856,"answer_count":3,"score":1,"last_activity_date":1649785950,"creation_date":1648657399,"question_id":71680805,"body_markdown":"How can I convert characters in Java from Extended ASCII or Unicode to their 7-bit ASCII equivalent, including special characters like open (`` 0x93) and close (`` 0x94) quotes to a simple double quote (`&quot;` 0x22) for example. Or similarly dash (`` 0x96) to hyphen-minus (`-` 0x2D). I have found [Stack Overflow questions][1] similar to this, but the answers only seem to deal with accents and ignore special characters.\r\n\r\nFor example I would like `Caff&#232;  Pe&#241;a` to transformed to `&quot;Caffe - Pena&quot;`.\r\n\r\nHowever when I use java.text.Normalizer:\r\n\r\n    String sample = &quot;Caff&#232;  Pe&#241;a&quot;;\r\n    System.out.println(Normalizer.normalize(sample, Normalizer.Form.NFD)\r\n                             .replaceAll(&quot;\\\\p{InCombiningDiacriticalMarks}&quot;, &quot;&quot;));\r\n\r\n\r\nOutput is\r\n\r\n    Caffe  Pena\r\n\r\nTo clarify my need, I am interacting with an IBM i Db2 database that uses EBCDIC encoding. If a user pastes a string copied from Word or Outlook for example, characters like the ones I specified are translated to SUB (0x3F in EBCDIC, 0x1A in ASCII). This causes a lot of unnecessary headache. I am looking for a way to sanitize the string so as little information as possible is lost.\r\n\r\n  [1]: https://stackoverflow.com/questions/1008802/converting-symbols-accent-letters-to-english-alphabet","title":"Convert Extended ASCII or Unicode to 7-bit ASCII (&lt;128) equivalent including special characters","body":"<p>How can I convert characters in Java from Extended ASCII or Unicode to their 7-bit ASCII equivalent, including special characters like open (<code></code> 0x93) and close (<code></code> 0x94) quotes to a simple double quote (<code>&quot;</code> 0x22) for example. Or similarly dash (<code></code> 0x96) to hyphen-minus (<code>-</code> 0x2D). I have found <a href=\"https://stackoverflow.com/questions/1008802/converting-symbols-accent-letters-to-english-alphabet\">Stack Overflow questions</a> similar to this, but the answers only seem to deal with accents and ignore special characters.</p>\n<p>For example I would like <code>Caff  Pea</code> to transformed to <code>&quot;Caffe - Pena&quot;</code>.</p>\n<p>However when I use java.text.Normalizer:</p>\n<pre><code>String sample = &quot;Caff  Pea&quot;;\nSystem.out.println(Normalizer.normalize(sample, Normalizer.Form.NFD)\n                         .replaceAll(&quot;\\\\p{InCombiningDiacriticalMarks}&quot;, &quot;&quot;));\n</code></pre>\n<p>Output is</p>\n<pre><code>Caffe  Pena\n</code></pre>\n<p>To clarify my need, I am interacting with an IBM i Db2 database that uses EBCDIC encoding. If a user pastes a string copied from Word or Outlook for example, characters like the ones I specified are translated to SUB (0x3F in EBCDIC, 0x1A in ASCII). This causes a lot of unnecessary headache. I am looking for a way to sanitize the string so as little information as possible is lost.</p>\n"},{"tags":["javascript","java"],"answers":[{"tags":[],"owner":{"account_id":401843,"reputation":89788,"user_id":768644,"display_name":"rzwitserloot"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1649527624,"creation_date":1649523919,"answer_id":71810173,"question_id":71809998,"body_markdown":"## Using nashorn\r\n\r\n&gt; I&#39;m using version OpenJDK 11. Would this be much of an issue?\r\n\r\nI&#39;d say so. JDK15 is the first JDK that __does not include nashorn__. The latest &#39;long term support release is JDK17, and the current OpenJDK release is 18, so at this point, yes, this is a big issue.\r\n\r\n&gt; and if so what would be the best alternative for what I&#39;m trying to do?\r\n\r\nInstead of relying on a javascript engine shipped with the JDK, you should pick a third-party javascript engine and ship it with your app. Java apps should be having many many dependencies (hundreds, perhaps) - JDK doesn&#39;t ship web template engines, web routing, DB interaction libraries (JDBC ships with the JDK but it isn&#39;t intended to be directly used, it&#39;s more the low-level library that things like JDBI, JOOQ, and Hibernate are built on top of), and so much more. On purpose - the JDK can _never_ break backward compatibility, and that&#39;s too much handcuffed for many kinds of libraries. The solution is to use the robust and extensive open-source library. Every java build tool that is popular (be it Maven, Gradle, or even ant+ivy) makes it extremely simple; just put the GAV (Group::Artifact::Version) ID of the library you want in your build file and the tool takes care of everything (downloading it from a network of mirrored servers, tools to keep it up to date, shipping it, etc).\r\n\r\n[Here is a tutorial](https://golb.hplar.ch/2020/04/java-javascript-engine.html) that adds the GraalVM javascript engine to a project. It&#39;s not the only javascript engine, you have alternatives. But it shows the principle.\r\n\r\n## I can&#39;t get it to work when it&#39;s in a jar file\r\n\r\n&gt; `new FileReader(&quot;/Script.js&quot;)`\r\n\r\nIn java, __File means File__. An entry in a jar file __is not a file__. Hence, `FileReader`? You&#39;ve already lost, you can&#39;t use that stuff for resources.\r\n\r\nWhat you want to use is the GRAS mechanism instead: Ask java&#39;s classloader infrastructure to load resources from the same place it loads class files (think about it as follows: class files __are resources__ - your java application doesn&#39;t work without them, and the JVM itself needs to load them as your app runs. Why should, say, an icon file for your GUI, or some javascript you want to throw through a javascript engine be any different?)\r\n\r\nThe only way to do that is GRAS. It comes in 2 forms:\r\n\r\n### Form 1: When the API takes a URL object.\r\n\r\nSome APIs have a method that takes a URL. For example, ImageIcon and most other things in the GUI libraries java offers (swing, JavaFX, etc). For these:\r\n\r\n```java\r\nclass Example {\r\n  void example() {\r\n    URL resource = Example.class.getResource(&quot;foo.png&quot;);\r\n    new ImageIcon(resource);\r\n  }\r\n}\r\n```\r\n\r\n### Form 2: InputStream\r\n\r\nIf the API doesn&#39;t offer a method variant that takes a URL, surely there&#39;s one that takes either an `InputStream` (for byte-based things, like image files) or a `Reader` (for char-based things, like javascript). You can trivially turn an inputstream into a reader by specifying a charset encoding:\r\n\r\n```\r\ntry (InputStream in = ...) {\r\n  Reader r = new InputStreamReader(in, StandardCharsets.UTF_8);\r\n  somethingThatNeedsAReader(r);\r\n}\r\n```\r\n\r\nGiven that these are resources, you must safely close them, hence try-with-resources is required (or roll your try/finally if you must). Otherwise, your app will eventually start crashing because it ran out of file handles.\r\n\r\nSo, all we need to know is how to obtain InputStream objects - as we can use the above trick to turn them into readers. It works like this:\r\n\r\n```\r\ntry (InputStream in = Example.class.getResourceAsStream(&quot;foo.js&quot;)) {\r\n  ....\r\n}\r\n```\r\n\r\n## That path string\r\n\r\nThe string you pass to `getResource` and `getResourceAsStream` is not quite a file path. It looks in the same place that `Example.class` (the class file that has the code for your Example class) is at, even if that is in a jar file. Even if it&#39;s generated on the fly, downloaded on the fly - java&#39;s classloader system is an abstract concept, who knows how it&#39;s loading these. That&#39;s the point: You just load from wherever that might be.\r\n\r\nSuch entries have a &#39;root&#39; - and you can go from the root as well, by prefixing it with a slash.\r\n\r\nExample:\r\n\r\n1. You have a class named `Example`, in package `com.foo`.\r\n2. It&#39;s packed into a jar file together with the js file.\r\n3. Therefore, in that jar file, there&#39;s an entry `/com/foo/Example.class`.\r\n4. Let&#39;s say the js file is in `/com/foo/js/myapp.js`\r\n\r\nThen you can load that resource as an inputstream using either of these:\r\n\r\n```\r\nExample.class.getResource(&quot;js/myapp.js&quot;); // relative to com/foo\r\nExample.class.getResource(&quot;/com/foo/js/myapp.js&quot;); // relative to root\r\n```\r\n\r\nIt&#39;s not a file system - `..` does not work, for example. Had it been in `/js/myapp.js`, then the leading-slash-strategy is the only option.\r\n\r\n## Alternatives that suck\r\n\r\nThese are common in tutorials and SO answers but you should never use them:\r\n\r\n1. `getClass().getResource` instead of `Example.class.getResource` - the getClass trick breaks if someone subclasses. It&#39;s unlikely, but why write code that is strictly worse, right? Avoid the style guide debate and use the version that works in strictly more cases.\r\n2. `Example.class.getClassLoader().getResource()` - this is needlessly longer, removes the ability for using relative paths, and breaks in certain cases. For example, classes loaded as boot load don&#39;t _have_ a classloader, and the above code would therefore throw `NullPointerException`. But e.g. `String.class.getResource(&quot;String.class&quot;)` works fine.\r\n\r\n## Things you can&#39;t do\r\n\r\nThe resource loader system only has the &#39;primitive&#39; of &#39;load a resource&#39;. __There is no list() operation!__ - a few libraries suggest it exists but these are hacks that will break in certain circumstances. Hence, if you want something like &#39;can I get a list of all js files in the js dir?&#39; the answer is simple: No, that is not possible.\r\n\r\nThe general solution to this is to make a text file that lists the resources you&#39;re interested in, saves that into a text file with a known name. Now to &#39;fake&#39; a &quot;list all resources&quot; operation, you load that file using `getResource`, process it, loading each entry with `.getResource` in turn. This is exactly how SPI works (which is how e.g. java itself discovers available JDBC drivers, charset providers, crypto providers, etc). Now you know what to search the web for if you need &#39;list all resources of some kind&#39; :)\r\n","title":"Access a file from a resources folder in java (Run a JavaScript file)","body":"<h2>Using nashorn</h2>\n<blockquote>\n<p>I'm using version OpenJDK 11. Would this be much of an issue?</p>\n</blockquote>\n<p>I'd say so. JDK15 is the first JDK that <strong>does not include nashorn</strong>. The latest 'long term support release is JDK17, and the current OpenJDK release is 18, so at this point, yes, this is a big issue.</p>\n<blockquote>\n<p>and if so what would be the best alternative for what I'm trying to do?</p>\n</blockquote>\n<p>Instead of relying on a javascript engine shipped with the JDK, you should pick a third-party javascript engine and ship it with your app. Java apps should be having many many dependencies (hundreds, perhaps) - JDK doesn't ship web template engines, web routing, DB interaction libraries (JDBC ships with the JDK but it isn't intended to be directly used, it's more the low-level library that things like JDBI, JOOQ, and Hibernate are built on top of), and so much more. On purpose - the JDK can <em>never</em> break backward compatibility, and that's too much handcuffed for many kinds of libraries. The solution is to use the robust and extensive open-source library. Every java build tool that is popular (be it Maven, Gradle, or even ant+ivy) makes it extremely simple; just put the GAV (Group::Artifact::Version) ID of the library you want in your build file and the tool takes care of everything (downloading it from a network of mirrored servers, tools to keep it up to date, shipping it, etc).</p>\n<p><a href=\"https://golb.hplar.ch/2020/04/java-javascript-engine.html\" rel=\"nofollow noreferrer\">Here is a tutorial</a> that adds the GraalVM javascript engine to a project. It's not the only javascript engine, you have alternatives. But it shows the principle.</p>\n<h2>I can't get it to work when it's in a jar file</h2>\n<blockquote>\n<p><code>new FileReader(&quot;/Script.js&quot;)</code></p>\n</blockquote>\n<p>In java, <strong>File means File</strong>. An entry in a jar file <strong>is not a file</strong>. Hence, <code>FileReader</code>? You've already lost, you can't use that stuff for resources.</p>\n<p>What you want to use is the GRAS mechanism instead: Ask java's classloader infrastructure to load resources from the same place it loads class files (think about it as follows: class files <strong>are resources</strong> - your java application doesn't work without them, and the JVM itself needs to load them as your app runs. Why should, say, an icon file for your GUI, or some javascript you want to throw through a javascript engine be any different?)</p>\n<p>The only way to do that is GRAS. It comes in 2 forms:</p>\n<h3>Form 1: When the API takes a URL object.</h3>\n<p>Some APIs have a method that takes a URL. For example, ImageIcon and most other things in the GUI libraries java offers (swing, JavaFX, etc). For these:</p>\n<pre class=\"lang-java prettyprint-override\"><code>class Example {\n  void example() {\n    URL resource = Example.class.getResource(&quot;foo.png&quot;);\n    new ImageIcon(resource);\n  }\n}\n</code></pre>\n<h3>Form 2: InputStream</h3>\n<p>If the API doesn't offer a method variant that takes a URL, surely there's one that takes either an <code>InputStream</code> (for byte-based things, like image files) or a <code>Reader</code> (for char-based things, like javascript). You can trivially turn an inputstream into a reader by specifying a charset encoding:</p>\n<pre><code>try (InputStream in = ...) {\n  Reader r = new InputStreamReader(in, StandardCharsets.UTF_8);\n  somethingThatNeedsAReader(r);\n}\n</code></pre>\n<p>Given that these are resources, you must safely close them, hence try-with-resources is required (or roll your try/finally if you must). Otherwise, your app will eventually start crashing because it ran out of file handles.</p>\n<p>So, all we need to know is how to obtain InputStream objects - as we can use the above trick to turn them into readers. It works like this:</p>\n<pre><code>try (InputStream in = Example.class.getResourceAsStream(&quot;foo.js&quot;)) {\n  ....\n}\n</code></pre>\n<h2>That path string</h2>\n<p>The string you pass to <code>getResource</code> and <code>getResourceAsStream</code> is not quite a file path. It looks in the same place that <code>Example.class</code> (the class file that has the code for your Example class) is at, even if that is in a jar file. Even if it's generated on the fly, downloaded on the fly - java's classloader system is an abstract concept, who knows how it's loading these. That's the point: You just load from wherever that might be.</p>\n<p>Such entries have a 'root' - and you can go from the root as well, by prefixing it with a slash.</p>\n<p>Example:</p>\n<ol>\n<li>You have a class named <code>Example</code>, in package <code>com.foo</code>.</li>\n<li>It's packed into a jar file together with the js file.</li>\n<li>Therefore, in that jar file, there's an entry <code>/com/foo/Example.class</code>.</li>\n<li>Let's say the js file is in <code>/com/foo/js/myapp.js</code></li>\n</ol>\n<p>Then you can load that resource as an inputstream using either of these:</p>\n<pre><code>Example.class.getResource(&quot;js/myapp.js&quot;); // relative to com/foo\nExample.class.getResource(&quot;/com/foo/js/myapp.js&quot;); // relative to root\n</code></pre>\n<p>It's not a file system - <code>..</code> does not work, for example. Had it been in <code>/js/myapp.js</code>, then the leading-slash-strategy is the only option.</p>\n<h2>Alternatives that suck</h2>\n<p>These are common in tutorials and SO answers but you should never use them:</p>\n<ol>\n<li><code>getClass().getResource</code> instead of <code>Example.class.getResource</code> - the getClass trick breaks if someone subclasses. It's unlikely, but why write code that is strictly worse, right? Avoid the style guide debate and use the version that works in strictly more cases.</li>\n<li><code>Example.class.getClassLoader().getResource()</code> - this is needlessly longer, removes the ability for using relative paths, and breaks in certain cases. For example, classes loaded as boot load don't <em>have</em> a classloader, and the above code would therefore throw <code>NullPointerException</code>. But e.g. <code>String.class.getResource(&quot;String.class&quot;)</code> works fine.</li>\n</ol>\n<h2>Things you can't do</h2>\n<p>The resource loader system only has the 'primitive' of 'load a resource'. <strong>There is no list() operation!</strong> - a few libraries suggest it exists but these are hacks that will break in certain circumstances. Hence, if you want something like 'can I get a list of all js files in the js dir?' the answer is simple: No, that is not possible.</p>\n<p>The general solution to this is to make a text file that lists the resources you're interested in, saves that into a text file with a known name. Now to 'fake' a &quot;list all resources&quot; operation, you load that file using <code>getResource</code>, process it, loading each entry with <code>.getResource</code> in turn. This is exactly how SPI works (which is how e.g. java itself discovers available JDBC drivers, charset providers, crypto providers, etc). Now you know what to search the web for if you need 'list all resources of some kind' :)</p>\n"},{"tags":[],"owner":{"account_id":24269267,"reputation":314,"user_id":18217632,"display_name":"noo"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1649785693,"creation_date":1649785693,"answer_id":71847119,"question_id":71809998,"body_markdown":"Added GraalVM to pom.xml\r\n```xml\r\n    &lt;!-- https://mvnrepository.com/artifact/org.graalvm.js/js --&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.graalvm.js&lt;/groupId&gt;\r\n          &lt;artifactId&gt;js&lt;/artifactId&gt;\r\n          &lt;version&gt;22.0.0.2&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;!-- https://mvnrepository.com/artifact/org.graalvm.js/js-scriptengine --&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.graalvm.js&lt;/groupId&gt;\r\n          &lt;artifactId&gt;js-scriptengine&lt;/artifactId&gt;\r\n          &lt;version&gt;22.0.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n```\r\nAnd changed the Process.java file:\r\n```java\r\n    ScriptEngineManager manager = new ScriptEngineManager();\r\n    ScriptEngine graalEngine = manager.getEngineByName(&quot;graal.js&quot;);\r\n    \r\n    try (InputStream in = Process.class.getResourceAsStream(&quot;/Script.js&quot;)) {\r\n       graalEngine.eval(new InputStreamReader(in, StandardCharsets.UTF_8));\r\n    }\r\n```\r\n","title":"Access a file from a resources folder in java (Run a JavaScript file)","body":"<p>Added GraalVM to pom.xml</p>\n<pre class=\"lang-xml prettyprint-override\"><code>    &lt;!-- https://mvnrepository.com/artifact/org.graalvm.js/js --&gt;\n        &lt;dependency&gt;\n          &lt;groupId&gt;org.graalvm.js&lt;/groupId&gt;\n          &lt;artifactId&gt;js&lt;/artifactId&gt;\n          &lt;version&gt;22.0.0.2&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;!-- https://mvnrepository.com/artifact/org.graalvm.js/js-scriptengine --&gt;\n        &lt;dependency&gt;\n          &lt;groupId&gt;org.graalvm.js&lt;/groupId&gt;\n          &lt;artifactId&gt;js-scriptengine&lt;/artifactId&gt;\n          &lt;version&gt;22.0.0&lt;/version&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<p>And changed the Process.java file:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    ScriptEngineManager manager = new ScriptEngineManager();\n    ScriptEngine graalEngine = manager.getEngineByName(&quot;graal.js&quot;);\n    \n    try (InputStream in = Process.class.getResourceAsStream(&quot;/Script.js&quot;)) {\n       graalEngine.eval(new InputStreamReader(in, StandardCharsets.UTF_8));\n    }\n</code></pre>\n"}],"owner":{"account_id":24269267,"reputation":314,"user_id":18217632,"display_name":"noo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":977,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":71810173,"answer_count":2,"score":1,"last_activity_date":1649785693,"creation_date":1649522614,"question_id":71809998,"body_markdown":"I&#39;m trying to run a javascript file from a java project. Currently i&#39;m using Nashorn java script engine to run the script and maven to compile and create a jar file.\r\n\r\n#### 1) Using Nashorn?\r\nI get the warning:\r\n\r\n    Warning: Nashorn engine is planned to be removed from a future JDK release\r\n\r\nI&#39;m using version openjdk 11. Would this be much of an issue? and if so what would be the best alternative for what i&#39;m trying to do?\r\n\r\n#### 2) I can&#39;t get it to work when its in a jar file\r\nI get a the FileNotFoundException\r\n\r\n    Java.io.FileNotFoundException: /Script.js (No such file or directory)\r\n\r\nI have a javascript file **Script.js** and two java files, **App.java** which includes my main method, and **Process.java** which is trying to find the javascript file.\r\n\r\n    src\r\n      main\r\n       java\r\n        com\r\n         group\r\n          App.java\r\n          Processor.java\r\n       resources\r\n        Script.js\r\n      test\r\n       java\r\n        com\r\n         group\r\n          AppTest.java\r\n\r\nThe **App.java** file will construct a Processor object and call the function connect.\r\n\r\n    public class App \r\n    {\r\n        public static void main( String[] args )\r\n        {\r\n            Processor p = new Processor();\r\n            p.connect();\r\n        }\r\n    }\r\n**Process.java**\r\n\r\n    import javax.script.ScriptEngineManager;\r\n    import javax.script.ScriptEngine;\r\n    import javax.script.ScriptException;\r\n    import java.io.FileReader;\r\n    import java.io.FileNotFoundException;\r\n    \r\n    public class Processor {\r\n    \r\n    ...\r\n    \r\n      /*LINK TO JAVASCRIPT*/\r\n        public void connect(){\r\n            // get instance of the JavaScript engine\r\n            ScriptEngineManager manager = new ScriptEngineManager();\r\n            ScriptEngine engine = manager.getEngineByName(&quot;nashorn&quot;);\r\n     \r\n            // Load and execute the script\r\n            try {\r\n                engine.eval(new FileReader(&quot;/Script.js&quot;));\r\n            }\r\n            catch (FileNotFoundException ex) {\r\n                ex.printStackTrace();\r\n            }\r\n            catch (ScriptException ex) {\r\n                ex.printStackTrace();\r\n            }\r\n        }\r\n        \r\n    }\r\n\r\n#### 3) EDIT:\r\nI found this might help:\r\n\r\n    getClass().getClassLoader().getResourceAsStream(&quot;/Script.js&quot;);\r\n\r\nHowever this returns a InputStream, Would there be a way to run the javascript file from an InputStream or a way to get InputStream as a String?","title":"Access a file from a resources folder in java (Run a JavaScript file)","body":"<p>I'm trying to run a javascript file from a java project. Currently i'm using Nashorn java script engine to run the script and maven to compile and create a jar file.</p>\n<h4>1) Using Nashorn?</h4>\n<p>I get the warning:</p>\n<pre><code>Warning: Nashorn engine is planned to be removed from a future JDK release\n</code></pre>\n<p>I'm using version openjdk 11. Would this be much of an issue? and if so what would be the best alternative for what i'm trying to do?</p>\n<h4>2) I can't get it to work when its in a jar file</h4>\n<p>I get a the FileNotFoundException</p>\n<pre><code>Java.io.FileNotFoundException: /Script.js (No such file or directory)\n</code></pre>\n<p>I have a javascript file <strong>Script.js</strong> and two java files, <strong>App.java</strong> which includes my main method, and <strong>Process.java</strong> which is trying to find the javascript file.</p>\n<pre><code>src\n  main\n   java\n    com\n     group\n      App.java\n      Processor.java\n   resources\n    Script.js\n  test\n   java\n    com\n     group\n      AppTest.java\n</code></pre>\n<p>The <strong>App.java</strong> file will construct a Processor object and call the function connect.</p>\n<pre><code>public class App \n{\n    public static void main( String[] args )\n    {\n        Processor p = new Processor();\n        p.connect();\n    }\n}\n</code></pre>\n<p><strong>Process.java</strong></p>\n<pre><code>import javax.script.ScriptEngineManager;\nimport javax.script.ScriptEngine;\nimport javax.script.ScriptException;\nimport java.io.FileReader;\nimport java.io.FileNotFoundException;\n\npublic class Processor {\n\n...\n\n  /*LINK TO JAVASCRIPT*/\n    public void connect(){\n        // get instance of the JavaScript engine\n        ScriptEngineManager manager = new ScriptEngineManager();\n        ScriptEngine engine = manager.getEngineByName(&quot;nashorn&quot;);\n \n        // Load and execute the script\n        try {\n            engine.eval(new FileReader(&quot;/Script.js&quot;));\n        }\n        catch (FileNotFoundException ex) {\n            ex.printStackTrace();\n        }\n        catch (ScriptException ex) {\n            ex.printStackTrace();\n        }\n    }\n    \n}\n</code></pre>\n<h4>3) EDIT:</h4>\n<p>I found this might help:</p>\n<pre><code>getClass().getClassLoader().getResourceAsStream(&quot;/Script.js&quot;);\n</code></pre>\n<p>However this returns a InputStream, Would there be a way to run the javascript file from an InputStream or a way to get InputStream as a String?</p>\n"},{"tags":["java","spring","angular","spring-boot"],"comments":[{"owner":{"account_id":1763573,"reputation":6131,"user_id":1610005,"display_name":"kj007"},"score":0,"creation_date":1539769070,"post_id":52847381,"comment_id":92618847,"body_markdown":"Can you just set server.servlet.context-path=/FUtility, do not set from angular side if they are not running as different app","body":"Can you just set server.servlet.context-path=/FUtility, do not set from angular side if they are not running as different app"},{"owner":{"account_id":4384330,"reputation":1124,"user_id":3575011,"accept_rate":48,"display_name":"Renjith"},"score":0,"creation_date":1540190644,"post_id":52847381,"comment_id":92756339,"body_markdown":"@kj007 that did not worked... Failed to load resource: the server responded with a status of 404 ()\npolyfills.js:1 Failed to load resource: the server responded with a status of 404 ()\nstyles.js:1 Failed to load resource: the server responded with a status of 404 ()\nscripts.js:1 Failed to load resource: the server responded with a status of 404 ()\nvendor.js:1 Failed to load resource: the server responded with a status of 404 ()","body":"@kj007 that did not worked... Failed to load resource: the server responded with a status of 404 () polyfills.js:1 Failed to load resource: the server responded with a status of 404 () styles.js:1 Failed to load resource: the server responded with a status of 404 () scripts.js:1 Failed to load resource: the server responded with a status of 404 () vendor.js:1 Failed to load resource: the server responded with a status of 404 ()"},{"owner":{"account_id":1763573,"reputation":6131,"user_id":1610005,"display_name":"kj007"},"score":0,"creation_date":1540190924,"post_id":52847381,"comment_id":92756490,"body_markdown":"Can you please show me your project structure and where you placed all static resources","body":"Can you please show me your project structure and where you placed all static resources"},{"owner":{"account_id":4384330,"reputation":1124,"user_id":3575011,"accept_rate":48,"display_name":"Renjith"},"score":0,"creation_date":1540191160,"post_id":52847381,"comment_id":92756606,"body_markdown":"I am sorry. I cannot post it due to corporate security issues. But I am following this (https://blog.jdriven.com/2016/12/angular2-spring-boot-getting-started/) link for development.","body":"I am sorry. I cannot post it due to corporate security issues. But I am following this (<a href=\"https://blog.jdriven.com/2016/12/angular2-spring-boot-getting-started/\" rel=\"nofollow noreferrer\">blog.jdriven.com/2016/12/angular2-spring-boot-getting-start&zwnj;&#8203;ed</a>) link for development."},{"owner":{"account_id":4384330,"reputation":1124,"user_id":3575011,"accept_rate":48,"display_name":"Renjith"},"score":0,"creation_date":1545284812,"post_id":52847381,"comment_id":94573840,"body_markdown":"I resolved that issue. but I am not confident enough to post it as an answer, because i dont have a clear explanation for this solution. All i did is to have a &lt;base href=&quot;/FUtility/&quot;&gt; in index.html and &#39;server.servlet.contextPath=/FUtility&#39; in spring boot&#39;s application.properties. Along with that I also kept this request handler method to deal with browser refresh.     @RequestMapping(value = &quot;/**/{[path:[^\\\\.]*}&quot;)  \n    public String forward2(HttpServletRequest request) {\n    \tSystem.out.println(&quot;----------------------&gt;   &quot;+ request.getRequestURI());\n        return &quot;forward:/&quot;;\n    }","body":"I resolved that issue. but I am not confident enough to post it as an answer, because i dont have a clear explanation for this solution. All i did is to have a &lt;base href=&quot;/FUtility/&quot;&gt; in index.html and &#39;server.servlet.contextPath=/FUtility&#39; in spring boot&#39;s application.properties. Along with that I also kept this request handler method to deal with browser refresh.     @RequestMapping(value = &quot;/**/{[path:[^\\\\.]*}&quot;)       public String forward2(HttpServletRequest request) {     \tSystem.out.println(&quot;----------------------&gt;   &quot;+ request.getRequestURI());         return &quot;forward:/&quot;;     }"}],"owner":{"account_id":4384330,"reputation":1124,"user_id":3575011,"accept_rate":48,"display_name":"Renjith"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":5414,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":0,"score":3,"last_activity_date":1649785691,"creation_date":1539751130,"question_id":52847381,"body_markdown":"I am building a web application where the UI/client side component is built using Angular 6 and the back end (server-side) is on Spring boot.\r\n\r\nApplication is expected to be available at \r\n\r\n    http://localhost:8080/FUtility/\r\n\r\nI set the base-href for angular application by adding the following in appmodule -&gt; providers[]\r\n\r\n    providers: [AuthGuardService, {provide: APP_BASE_HREF, useValue: &#39;/FUtility/&#39;}],\r\n\r\nAt the same time context-root is set in spring-boot by adding the following in application.properties.\r\n\r\n    server.servlet.contextPath=/FUtility\r\n\r\nBut when i try to access the application in the expected path, an empty page is displayed. This is what you see on the debug console.\r\n\r\n    6localhost/:26 GET http://localhost:8080/runtime.js 404 ()\r\n\r\n&gt; **Note:** Application works fine if I don&#39;t set these values.\r\n\r\nIs there any procedures that needs to be followed while developing a spring-boot -angular application with &quot;**base-href**&quot;/&quot;**context-path**&quot;?\r\n\r\nDevelopment reference: [https://blog.jdriven.com/2016/12/angular2-spring-boot-getting-started/][1]\r\n\r\n\r\n  [1]: https://blog.jdriven.com/2016/12/angular2-spring-boot-getting-started/","title":"Setting the base-href &amp; context-path in spring-boot - Angular 6 application","body":"<p>I am building a web application where the UI/client side component is built using Angular 6 and the back end (server-side) is on Spring boot.</p>\n\n<p>Application is expected to be available at </p>\n\n<pre><code>http://localhost:8080/FUtility/\n</code></pre>\n\n<p>I set the base-href for angular application by adding the following in appmodule -> providers[]</p>\n\n<pre><code>providers: [AuthGuardService, {provide: APP_BASE_HREF, useValue: '/FUtility/'}],\n</code></pre>\n\n<p>At the same time context-root is set in spring-boot by adding the following in application.properties.</p>\n\n<pre><code>server.servlet.contextPath=/FUtility\n</code></pre>\n\n<p>But when i try to access the application in the expected path, an empty page is displayed. This is what you see on the debug console.</p>\n\n<pre><code>6localhost/:26 GET http://localhost:8080/runtime.js 404 ()\n</code></pre>\n\n<blockquote>\n  <p><strong>Note:</strong> Application works fine if I don't set these values.</p>\n</blockquote>\n\n<p>Is there any procedures that needs to be followed while developing a spring-boot -angular application with \"<strong>base-href</strong>\"/\"<strong>context-path</strong>\"?</p>\n\n<p>Development reference: <a href=\"https://blog.jdriven.com/2016/12/angular2-spring-boot-getting-started/\" rel=\"nofollow noreferrer\">https://blog.jdriven.com/2016/12/angular2-spring-boot-getting-started/</a></p>\n"},{"tags":["java","android","unit-testing","gradle"],"comments":[{"owner":{"account_id":2467072,"reputation":309,"user_id":2149915,"display_name":"davy307"},"score":1,"creation_date":1624292656,"post_id":68065743,"comment_id":120313322,"body_markdown":"im having the exact same issue, have you recently upgraded to the latest Jetbrains IDE versions by any chance? AS 4.2.1 i think","body":"im having the exact same issue, have you recently upgraded to the latest Jetbrains IDE versions by any chance? AS 4.2.1 i think"},{"owner":{"account_id":13726886,"reputation":1284,"user_id":9905408,"display_name":"Alan"},"score":0,"creation_date":1624365763,"post_id":68065743,"comment_id":120334543,"body_markdown":"@davy307 Yes, I also recently updated Android Studio to 4.2.1 but I cannot date the issue, so I am not sure if this is related","body":"@davy307 Yes, I also recently updated Android Studio to 4.2.1 but I cannot date the issue, so I am not sure if this is related"},{"owner":{"account_id":13726886,"reputation":1284,"user_id":9905408,"display_name":"Alan"},"score":0,"creation_date":1624379204,"post_id":68065743,"comment_id":120340974,"body_markdown":"Update: I have the issue on AS 4.2.1. Then I tried with the last version of IC 2021.1, at the begining intellij had gradle issues and did not want to compile the project. After going back and forth through the git history of my project, it somehow fixed the build issue with IC (without changing a line) and I can now build the project and run the tests with IC. The issue remains with AS.","body":"Update: I have the issue on AS 4.2.1. Then I tried with the last version of IC 2021.1, at the begining intellij had gradle issues and did not want to compile the project. After going back and forth through the git history of my project, it somehow fixed the build issue with IC (without changing a line) and I can now build the project and run the tests with IC. The issue remains with AS."},{"owner":{"account_id":2467072,"reputation":309,"user_id":2149915,"display_name":"davy307"},"score":0,"creation_date":1624453713,"post_id":68065743,"comment_id":120363222,"body_markdown":"right, so after some investigation, it turns out that AS 4.2.1 has an issue where it loses the reference to the JDK, now, depending on your project, you need to download the specific JDK version from oracle (for ours i used JDK 8 (https://www.oracle.com/uk/java/technologies/javase/javase-jdk8-downloads.html) as that is the max supported, then point AS to that as its JAVA_HOME under the Project Structure menu","body":"right, so after some investigation, it turns out that AS 4.2.1 has an issue where it loses the reference to the JDK, now, depending on your project, you need to download the specific JDK version from oracle (for ours i used JDK 8 (<a href=\"https://www.oracle.com/uk/java/technologies/javase/javase-jdk8-downloads.html\" rel=\"nofollow noreferrer\">oracle.com/uk/java/technologies/javase/&hellip;</a>) as that is the max supported, then point AS to that as its JAVA_HOME under the Project Structure menu"}],"answers":[{"tags":[],"owner":{"account_id":3328278,"reputation":1947,"user_id":2797748,"accept_rate":0,"display_name":"Tungken"},"down_vote_count":0,"up_vote_count":108,"is_accepted":true,"score":108,"last_activity_date":1627874777,"creation_date":1624684493,"answer_id":68139455,"question_id":68065743,"body_markdown":"This is an old issue, but for future google searchers and perhaps interested parties that could work around this, it is worth mentioning that if you are using one of the more popular walk-throughs to set up JaCoCo + Robolectric + Espresso - [https://medium.com/@rafael_toledo/setting-up-an-unified-coverage-report-in-android-with-jacoco-robolectric-and-espresso-ffe239aaf3fa][1] . Please add below this:\r\n\r\n    tasks.withType(Test) {\r\n        jacoco.includeNoLocationClasses = true\r\n        jacoco.excludes = [&#39;jdk.internal.*&#39;]\r\n    }\r\n\r\nIn my case:\r\n\r\n    junitJacoco {\r\n        jacocoVersion = &#39;0.8.4&#39; // type String\r\n        includeInstrumentationCoverageInMergedReport = true // type boolean\r\n        tasks.withType(Test) {\r\n            jacoco.includeNoLocationClasses = true\r\n            jacoco.excludes = [&#39;jdk.internal.*&#39;]\r\n        }\r\n    }\r\n\r\n  [1]: https://medium.com/@rafael_toledo/setting-up-an-unified-coverage-report-in-android-with-jacoco-robolectric-and-espresso-ffe239aaf3fa ","title":"Cannot run gradle test tasks because of java.lang.NoClassDefFoundError: jdk/internal/reflect/GeneratedSerializationConstructorAccessor1","body":"<p>This is an old issue, but for future google searchers and perhaps interested parties that could work around this, it is worth mentioning that if you are using one of the more popular walk-throughs to set up JaCoCo + Robolectric + Espresso - <a href=\"https://medium.com/@rafael_toledo/setting-up-an-unified-coverage-report-in-android-with-jacoco-robolectric-and-espresso-ffe239aaf3fa\" rel=\"noreferrer\">https://medium.com/@rafael_toledo/setting-up-an-unified-coverage-report-in-android-with-jacoco-robolectric-and-espresso-ffe239aaf3fa</a> . Please add below this:</p>\n<pre><code>tasks.withType(Test) {\n    jacoco.includeNoLocationClasses = true\n    jacoco.excludes = ['jdk.internal.*']\n}\n</code></pre>\n<p>In my case:</p>\n<pre><code>junitJacoco {\n    jacocoVersion = '0.8.4' // type String\n    includeInstrumentationCoverageInMergedReport = true // type boolean\n    tasks.withType(Test) {\n        jacoco.includeNoLocationClasses = true\n        jacoco.excludes = ['jdk.internal.*']\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15909576,"reputation":51,"user_id":11479853,"display_name":"Nikita Baronia"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1628772067,"creation_date":1628767403,"answer_id":68756555,"question_id":68065743,"body_markdown":"In such case, even if your JAVA_HOME is set in bash_profile, you also need to set in Android, to do so:\r\nGo to File -&gt; Project Structure -&gt; SDK location\r\nset JDK location. \r\n\r\nAt times, it might a different location from bash_profile one.\r\n\r\nRefer to screenshot for reference \r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/eBfDI.png","title":"Cannot run gradle test tasks because of java.lang.NoClassDefFoundError: jdk/internal/reflect/GeneratedSerializationConstructorAccessor1","body":"<p>In such case, even if your JAVA_HOME is set in bash_profile, you also need to set in Android, to do so:\nGo to File -&gt; Project Structure -&gt; SDK location\nset JDK location.</p>\n<p>At times, it might a different location from bash_profile one.</p>\n<p>Refer to screenshot for reference\n<a href=\"https://i.stack.imgur.com/eBfDI.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/eBfDI.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":[],"owner":{"account_id":8652943,"reputation":22446,"user_id":6478047,"accept_rate":76,"display_name":"Manohar"},"down_vote_count":0,"up_vote_count":23,"is_accepted":false,"score":23,"last_activity_date":1633946678,"creation_date":1633946678,"answer_id":69524423,"question_id":68065743,"body_markdown":"Thanks to [@Tungken][1]\r\n\r\nI had to add it inside `testOptions { unitTests.all {\r\n jacoco {`\r\n\r\n    android {\r\n      compileSdk 30\r\n      buildToolsVersion &quot;30.0.3&quot;\r\n\r\n      defaultConfig {\r\n     \r\n         ...\r\n\r\n        testInstrumentationRunner &quot;androidx.test.runner.AndroidJUnitRunner&quot;\r\n    }\r\n\r\n    buildTypes {\r\n        release {\r\n            minifyEnabled true\r\n            proguardFiles getDefaultProguardFile(&#39;proguard-android-optimize.txt&#39;), &#39;proguard-rules.pro&#39;\r\n           \r\n        }\r\n        debug {\r\n            testCoverageEnabled true\r\n            debuggable true\r\n        }\r\n    }\r\n    compileOptions {\r\n        sourceCompatibility JavaVersion.VERSION_11\r\n        targetCompatibility JavaVersion.VERSION_11\r\n    }\r\n    kotlinOptions {\r\n        jvmTarget = &#39;11&#39;\r\n    }\r\n\r\n    testOptions {\r\n        unitTests.all {\r\n            jacoco {\r\n                includeNoLocationClasses = true\r\n                excludes = [&#39;jdk.internal.*&#39;]       //This line\r\n            }\r\n        }\r\n        unitTests.returnDefaultValues = true\r\n    }\r\n\r\n    }\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/68139455/6478047","title":"Cannot run gradle test tasks because of java.lang.NoClassDefFoundError: jdk/internal/reflect/GeneratedSerializationConstructorAccessor1","body":"<p>Thanks to <a href=\"https://stackoverflow.com/a/68139455/6478047\">@Tungken</a></p>\n<p>I had to add it inside <code>testOptions { unitTests.all { jacoco {</code></p>\n<pre><code>android {\n  compileSdk 30\n  buildToolsVersion &quot;30.0.3&quot;\n\n  defaultConfig {\n \n     ...\n\n    testInstrumentationRunner &quot;androidx.test.runner.AndroidJUnitRunner&quot;\n}\n\nbuildTypes {\n    release {\n        minifyEnabled true\n        proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'\n       \n    }\n    debug {\n        testCoverageEnabled true\n        debuggable true\n    }\n}\ncompileOptions {\n    sourceCompatibility JavaVersion.VERSION_11\n    targetCompatibility JavaVersion.VERSION_11\n}\nkotlinOptions {\n    jvmTarget = '11'\n}\n\ntestOptions {\n    unitTests.all {\n        jacoco {\n            includeNoLocationClasses = true\n            excludes = ['jdk.internal.*']       //This line\n        }\n    }\n    unitTests.returnDefaultValues = true\n}\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1209837,"reputation":988,"user_id":1178618,"accept_rate":100,"display_name":"SILINIK"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1641897010,"creation_date":1641897010,"answer_id":70665237,"question_id":68065743,"body_markdown":"For anyone looking how the fix looks like in Kotlin `*.kts`:\r\n\r\n```\r\ntasks.withType&lt;Test&gt; {\r\n    extensions.configure(JacocoTaskExtension::class) {\r\n        isIncludeNoLocationClasses = true\r\n        excludes = listOf(&quot;jdk.internal.*&quot;)\r\n    }\r\n}\r\n```","title":"Cannot run gradle test tasks because of java.lang.NoClassDefFoundError: jdk/internal/reflect/GeneratedSerializationConstructorAccessor1","body":"<p>For anyone looking how the fix looks like in Kotlin <code>*.kts</code>:</p>\n<pre><code>tasks.withType&lt;Test&gt; {\n    extensions.configure(JacocoTaskExtension::class) {\n        isIncludeNoLocationClasses = true\n        excludes = listOf(&quot;jdk.internal.*&quot;)\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12566271,"reputation":634,"user_id":9142147,"display_name":"Maxim Alov"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1649785540,"creation_date":1649785540,"answer_id":71847091,"question_id":68065743,"body_markdown":"For anyone looking how the fix look like for Kotlin DSL - working solution:\r\n\r\n```\r\nimport com.android.build.gradle.BaseExtension\r\nimport org.gradle.kotlin.dsl.configure\r\nimport org.gradle.testing.jacoco.plugins.JacocoTaskExtension\r\n\r\nconfigure&lt;BaseExtension&gt; {\r\n    testOptions {\r\n        unitTests {\r\n            all { test -&gt;\r\n                test.extensions.configure&lt;JacocoTaskExtension&gt; {\r\n                    excludes = listOf(&quot;jdk.internal.*&quot;)\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n```","title":"Cannot run gradle test tasks because of java.lang.NoClassDefFoundError: jdk/internal/reflect/GeneratedSerializationConstructorAccessor1","body":"<p>For anyone looking how the fix look like for Kotlin DSL - working solution:</p>\n<pre><code>import com.android.build.gradle.BaseExtension\nimport org.gradle.kotlin.dsl.configure\nimport org.gradle.testing.jacoco.plugins.JacocoTaskExtension\n\nconfigure&lt;BaseExtension&gt; {\n    testOptions {\n        unitTests {\n            all { test -&gt;\n                test.extensions.configure&lt;JacocoTaskExtension&gt; {\n                    excludes = listOf(&quot;jdk.internal.*&quot;)\n                }\n            }\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":13726886,"reputation":1284,"user_id":9905408,"display_name":"Alan"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":19833,"favorite_count":0,"down_vote_count":0,"up_vote_count":49,"accepted_answer_id":68139455,"answer_count":5,"score":49,"last_activity_date":1649785540,"creation_date":1624268783,"question_id":68065743,"body_markdown":"I have an android project where I cannot run anymore all the test gradle tasks locally (I have 3 different flavors in this project). I have this error message 50 times before the tasks fail. I have no issue running these tasks remotely with Gitlab CI/CD, and I have another project locally where I don&#39;t have this issue neither.\r\n\r\n    java.lang.NoClassDefFoundError: jdk/internal/reflect/GeneratedSerializationConstructorAccessor1\r\n    \tat jdk.internal.reflect.GeneratedSerializationConstructorAccessor1.newInstance(Unknown Source)\r\n    \tat java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:490)\r\n    \tat java.base/java.io.ObjectStreamClass.newInstance(ObjectStreamClass.java:1092)\r\n    \tat java.base/java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2150)\r\n    \tat java.base/java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1668)\r\n    \tat java.base/java.io.ObjectInputStream.readObject(ObjectInputStream.java:482)\r\n    \tat java.base/java.io.ObjectInputStream.readObject(ObjectInputStream.java:440)\r\n    \tat org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.deserializeWorker(SystemApplicationClassLoaderWorker.java:153)\r\n    \tat org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)\r\n    \tat org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)\r\n    \tat worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)\r\n    \tat worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)","title":"Cannot run gradle test tasks because of java.lang.NoClassDefFoundError: jdk/internal/reflect/GeneratedSerializationConstructorAccessor1","body":"<p>I have an android project where I cannot run anymore all the test gradle tasks locally (I have 3 different flavors in this project). I have this error message 50 times before the tasks fail. I have no issue running these tasks remotely with Gitlab CI/CD, and I have another project locally where I don't have this issue neither.</p>\n<pre><code>java.lang.NoClassDefFoundError: jdk/internal/reflect/GeneratedSerializationConstructorAccessor1\n    at jdk.internal.reflect.GeneratedSerializationConstructorAccessor1.newInstance(Unknown Source)\n    at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:490)\n    at java.base/java.io.ObjectStreamClass.newInstance(ObjectStreamClass.java:1092)\n    at java.base/java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2150)\n    at java.base/java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1668)\n    at java.base/java.io.ObjectInputStream.readObject(ObjectInputStream.java:482)\n    at java.base/java.io.ObjectInputStream.readObject(ObjectInputStream.java:440)\n    at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.deserializeWorker(SystemApplicationClassLoaderWorker.java:153)\n    at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)\n    at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)\n    at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)\n    at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)\n</code></pre>\n"},{"tags":["jar","exe","java","launch4j"],"comments":[{"owner":{"account_id":1547313,"reputation":82154,"user_id":1440565,"accept_rate":59,"display_name":"Code-Apprentice"},"score":0,"creation_date":1356120658,"post_id":13996547,"comment_id":19319984,"body_markdown":"What doesn&#39;t work when you use launch4j?","body":"What doesn&#39;t work when you use launch4j?"},{"owner":{"account_id":2166999,"reputation":581,"user_id":1919916,"accept_rate":75,"display_name":"MagicGuy52"},"score":0,"creation_date":1356121154,"post_id":13996547,"comment_id":19320183,"body_markdown":"I get error message: &quot;This application was configured to use a bundled Java Runtime Environment but the runtime is missing or corrupted&quot;.","body":"I get error message: &quot;This application was configured to use a bundled Java Runtime Environment but the runtime is missing or corrupted&quot;."},{"owner":{"account_id":1547313,"reputation":82154,"user_id":1440565,"accept_rate":59,"display_name":"Code-Apprentice"},"score":0,"creation_date":1356121267,"post_id":13996547,"comment_id":19320220,"body_markdown":"Please edit your question to describe exactly what you tried with L4J and what happens.","body":"Please edit your question to describe exactly what you tried with L4J and what happens."},{"owner":{"account_id":9943,"reputation":28522,"user_id":18573,"accept_rate":56,"display_name":"Miserable Variable"},"score":0,"creation_date":1356122152,"post_id":13996547,"comment_id":19320545,"body_markdown":"@DaveJarvis did you check [launch4j](http://launch4j.sourceforge.net/)? According to its websit it &quot;is a cross-platform tool for wrapping Java applications [...] in lightweight Windows native executables [which] can be configured to [....] use a bundled [jre]&quot; Looks like it meets OP&#39;s needs","body":"@DaveJarvis did you check <a href=\"http://launch4j.sourceforge.net/\" rel=\"nofollow noreferrer\">launch4j</a>? According to its websit it &quot;is a cross-platform tool for wrapping Java applications [...] in lightweight Windows native executables [which] can be configured to [....] use a bundled [jre]&quot; Looks like it meets OP&#39;s needs"},{"owner":{"account_id":2166999,"reputation":581,"user_id":1919916,"accept_rate":75,"display_name":"MagicGuy52"},"score":1,"creation_date":1356123434,"post_id":13996547,"comment_id":19320947,"body_markdown":"It does but it is an installer. I do not see a way to create an exe that&#39;s not an installer.","body":"It does but it is an installer. I do not see a way to create an exe that&#39;s not an installer."},{"owner":{"account_id":9436528,"reputation":1,"user_id":7018361,"display_name":"Pranjal"},"score":0,"creation_date":1480660277,"post_id":13996547,"comment_id":76092375,"body_markdown":"i have created executable file for my java software using launch4j but the file can not open in other machine. so that is the problem with launch4j.\nso for that, don&#39;t use launch4j if you want to supply that software to client.","body":"i have created executable file for my java software using launch4j but the file can not open in other machine. so that is the problem with launch4j. so for that, don&#39;t use launch4j if you want to supply that software to client."},{"owner":{"account_id":384624,"reputation":15403,"user_id":741249,"display_name":"THelper"},"score":0,"creation_date":1482325372,"post_id":13996547,"comment_id":69727444,"body_markdown":"You can&#39;t use launch4j to embed a JRE inside your exe (see also http://stackoverflow.com/a/41263145). Launch4j only allows you to bundle a JRE together with your exe, so alongside it.","body":"You can&#39;t use launch4j to embed a JRE inside your exe (see also <a href=\"http://stackoverflow.com/a/41263145\">stackoverflow.com/a/41263145</a>). Launch4j only allows you to bundle a JRE together with your exe, so alongside it."}],"answers":[{"tags":[],"owner":{"account_id":1111948,"reputation":727,"user_id":1102262,"accept_rate":50,"display_name":"Matt Klooster"},"down_vote_count":3,"up_vote_count":0,"is_accepted":false,"score":-3,"last_activity_date":1356120749,"creation_date":1356120749,"answer_id":13996616,"question_id":13996547,"body_markdown":"What you&#39;re asking for isn&#39;t going to be easy to do (if it&#39;s doable at all.)  If I were you I would look into creating an executable JAR file:\r\n\r\nhttps://stackoverflow.com/questions/8159046/java-eclipse-create-executable-jar\r\n\r\nAnother option would be to use Java Web Start.  This was assuming you&#39;re using a modern browser the JNLP will automatically prompt the user to install the correct version of Java.\r\n\r\nhttp://docs.oracle.com/javase/tutorial/deployment/webstart/index.html","title":"How do I bundle a JRE into an EXE for a Java Application? Launch4j says &quot;runtime is missing or corrupted.&quot;","body":"<p>What you're asking for isn't going to be easy to do (if it's doable at all.)  If I were you I would look into creating an executable JAR file:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/8159046/java-eclipse-create-executable-jar\">java eclipse create executable jar</a></p>\n\n<p>Another option would be to use Java Web Start.  This was assuming you're using a modern browser the JNLP will automatically prompt the user to install the correct version of Java.</p>\n\n<p><a href=\"http://docs.oracle.com/javase/tutorial/deployment/webstart/index.html\" rel=\"nofollow noreferrer\">http://docs.oracle.com/javase/tutorial/deployment/webstart/index.html</a></p>\n"},{"tags":[],"owner":{"account_id":127126,"reputation":2755,"user_id":964976,"display_name":"tcb"},"down_vote_count":2,"up_vote_count":2,"is_accepted":false,"score":0,"last_activity_date":1649785430,"creation_date":1356123903,"answer_id":13997160,"question_id":13996547,"body_markdown":"It seems you need native code compiler. These compilers produce native code which doesn&#39;t require JRE.\r\n\r\nCheck this article - http://web.archive.org/web/20190128082712/https://www.excelsior-usa.com/articles/java-to-exe.html#aot. ","title":"How do I bundle a JRE into an EXE for a Java Application? Launch4j says &quot;runtime is missing or corrupted.&quot;","body":"<p>It seems you need native code compiler. These compilers produce native code which doesn't require JRE.</p>\n<p>Check this article - <a href=\"http://web.archive.org/web/20190128082712/https://www.excelsior-usa.com/articles/java-to-exe.html#aot\" rel=\"nofollow noreferrer\">http://web.archive.org/web/20190128082712/https://www.excelsior-usa.com/articles/java-to-exe.html#aot</a>.</p>\n"},{"tags":[],"owner":{"account_id":1345845,"reputation":3244,"user_id":1286621,"accept_rate":80,"display_name":"Mike"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1356125550,"creation_date":1356124637,"answer_id":13997302,"question_id":13996547,"body_markdown":"I&#39;ve never used the Launch4J product, good luck in getting it configured correctly.\r\n\r\nLooks like you might be able to go to the Discussion Forum on Sourceforge for other hints [here][1] \r\n\r\nOther Suggestions: \r\n\r\nMost of the products I&#39;ve seen from IBM (Websphere) and Oracle just extract a JRE under the installation directory and configure the startup batch command to use the installed JRE.  Essentially the JRE and your jar file would be installed in one shot. \r\n\r\nThe installation exe usually checks to see if it&#39;s already installed and skips that step if it finds it already there.  This is useful for upgrades of just the jar file.  \r\n\r\nHaving the local installation also solves the issue of the customer installing their own JRE which may be incompatible or contain bugs.  This way your dealing with a known JRE version.  \r\n\r\nThe excelsior route is OK if you don&#39;t have a graphical component to your application (It&#39;s been a while, that restriction may have changed).  There are other restrictions as well, but you probably just better off just distributing a JRE with your code in a single executable installer.  \r\n\r\n\r\n  [1]: http://sourceforge.net/projects/launch4j/forums/forum/332683","title":"How do I bundle a JRE into an EXE for a Java Application? Launch4j says &quot;runtime is missing or corrupted.&quot;","body":"<p>I've never used the Launch4J product, good luck in getting it configured correctly.</p>\n\n<p>Looks like you might be able to go to the Discussion Forum on Sourceforge for other hints <a href=\"http://sourceforge.net/projects/launch4j/forums/forum/332683\" rel=\"nofollow\">here</a> </p>\n\n<p>Other Suggestions: </p>\n\n<p>Most of the products I've seen from IBM (Websphere) and Oracle just extract a JRE under the installation directory and configure the startup batch command to use the installed JRE.  Essentially the JRE and your jar file would be installed in one shot. </p>\n\n<p>The installation exe usually checks to see if it's already installed and skips that step if it finds it already there.  This is useful for upgrades of just the jar file.  </p>\n\n<p>Having the local installation also solves the issue of the customer installing their own JRE which may be incompatible or contain bugs.  This way your dealing with a known JRE version.  </p>\n\n<p>The excelsior route is OK if you don't have a graphical component to your application (It's been a while, that restriction may have changed).  There are other restrictions as well, but you probably just better off just distributing a JRE with your code in a single executable installer.  </p>\n"},{"tags":[],"owner":{"account_id":1773418,"reputation":18513,"user_id":1617737,"accept_rate":53,"display_name":"ban-geoengineering"},"down_vote_count":1,"up_vote_count":44,"is_accepted":false,"score":43,"last_activity_date":1538256838,"creation_date":1364229872,"answer_id":15620253,"question_id":13996547,"body_markdown":"The only way I could bundle a JRE was to use [Launch4J][1] and [Inno Setup Compiler][2].\r\n\r\nFirst, create a `jre6` folder (for example) in the same directory as your output file (.exe).\r\n\r\nThen copy the JRE from your system into your **jre6** folder.\r\n\r\nThen you open Launch4J and set the **Bundled JRE path** - just type in `jre6`. Then click the Build button (obviously, after you&#39;ve entered all the other parameters - but the only value you need to enter on the **JRE** tab itself is the **Bundled JRE path** value.)\r\n\r\nI would have expected that to work, but if you then move the .exe to a new location (so it is no longer co-located with your **jre6** folder) you get the *This application was configured to use a bundled Java Runtime Environment but the runtime is missing or corrupted* error when you try to run the application...\r\n\r\nI&#39;ve been playing around with this all day and there was no way I could get *Launch4J* to include the JRE in the .exe file. Really poor in my opinion, as their documentation does not seem to allude to this issue at all.\r\n\r\nSo what I did to solve was to use *Inno Setup Compiler (ISC)*. This app is used to wrap your .exe as a Windows Installer file. So I added a setting to the ISC script that copies the JRE into the installer package. The line I added to the script (in the `[Files]` section) was:\r\n\r\n    Source: &quot;M:\\Netbeans\\MyApp\\jre6\\*&quot;; DestDir: &quot;{app}\\jre6\\&quot;; Flags: recursesubdirs createallsubdirs\r\n\r\n...a bit of workaround, but it did the trick.\r\n\r\nRepeat all the above steps, and you should be sorted.\r\n\r\n\r\n  [1]: http://launch4j.sourceforge.net/\r\n  [2]: http://jrsoftware.org/isinfo.php","title":"How do I bundle a JRE into an EXE for a Java Application? Launch4j says &quot;runtime is missing or corrupted.&quot;","body":"<p>The only way I could bundle a JRE was to use <a href=\"http://launch4j.sourceforge.net/\" rel=\"noreferrer\">Launch4J</a> and <a href=\"http://jrsoftware.org/isinfo.php\" rel=\"noreferrer\">Inno Setup Compiler</a>.</p>\n\n<p>First, create a <code>jre6</code> folder (for example) in the same directory as your output file (.exe).</p>\n\n<p>Then copy the JRE from your system into your <strong>jre6</strong> folder.</p>\n\n<p>Then you open Launch4J and set the <strong>Bundled JRE path</strong> - just type in <code>jre6</code>. Then click the Build button (obviously, after you've entered all the other parameters - but the only value you need to enter on the <strong>JRE</strong> tab itself is the <strong>Bundled JRE path</strong> value.)</p>\n\n<p>I would have expected that to work, but if you then move the .exe to a new location (so it is no longer co-located with your <strong>jre6</strong> folder) you get the <em>This application was configured to use a bundled Java Runtime Environment but the runtime is missing or corrupted</em> error when you try to run the application...</p>\n\n<p>I've been playing around with this all day and there was no way I could get <em>Launch4J</em> to include the JRE in the .exe file. Really poor in my opinion, as their documentation does not seem to allude to this issue at all.</p>\n\n<p>So what I did to solve was to use <em>Inno Setup Compiler (ISC)</em>. This app is used to wrap your .exe as a Windows Installer file. So I added a setting to the ISC script that copies the JRE into the installer package. The line I added to the script (in the <code>[Files]</code> section) was:</p>\n\n<pre><code>Source: \"M:\\Netbeans\\MyApp\\jre6\\*\"; DestDir: \"{app}\\jre6\\\"; Flags: recursesubdirs createallsubdirs\n</code></pre>\n\n<p>...a bit of workaround, but it did the trick.</p>\n\n<p>Repeat all the above steps, and you should be sorted.</p>\n"},{"tags":[],"owner":{"account_id":3355378,"reputation":1222,"user_id":2818462,"accept_rate":95,"display_name":"Ridzuan Adris"},"down_vote_count":5,"up_vote_count":2,"is_accepted":false,"score":-3,"last_activity_date":1400121985,"creation_date":1400121985,"answer_id":23668400,"question_id":13996547,"body_markdown":"There are several reason why launch4j wont run smoothly. some of the reason is:\r\n\r\n1) user do not run the application as Administrator\r\n\r\n2) User do not setup icon image properly. must strictly .ico\r\n","title":"How do I bundle a JRE into an EXE for a Java Application? Launch4j says &quot;runtime is missing or corrupted.&quot;","body":"<p>There are several reason why launch4j wont run smoothly. some of the reason is:</p>\n\n<p>1) user do not run the application as Administrator</p>\n\n<p>2) User do not setup icon image properly. must strictly .ico</p>\n"},{"tags":[],"owner":{"account_id":12881577,"reputation":29,"user_id":9316445,"display_name":"Nivedha"},"down_vote_count":2,"up_vote_count":3,"is_accepted":false,"score":1,"last_activity_date":1517831259,"creation_date":1517831259,"answer_id":48621938,"question_id":13996547,"body_markdown":"Its easy to bundle jre into launch4j.. \r\n\r\njust copy the jre into the same output folder\r\n\r\nIn the bundle jre environment text box, just give the jre folder itself\r\n\r\nIn the environment variable text box (present in the same page below), give until bin\r\n\r\nThen create exe.. It works as expected without jre in machine.\r\n\r\nThanks","title":"How do I bundle a JRE into an EXE for a Java Application? Launch4j says &quot;runtime is missing or corrupted.&quot;","body":"<p>Its easy to bundle jre into launch4j.. </p>\n\n<p>just copy the jre into the same output folder</p>\n\n<p>In the bundle jre environment text box, just give the jre folder itself</p>\n\n<p>In the environment variable text box (present in the same page below), give until bin</p>\n\n<p>Then create exe.. It works as expected without jre in machine.</p>\n\n<p>Thanks</p>\n"},{"tags":[],"owner":{"account_id":8448295,"reputation":702,"user_id":6338085,"display_name":"David Miller"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1544915735,"creation_date":1544736486,"answer_id":53770338,"question_id":13996547,"body_markdown":"**Bundled JRE Solution for Inno Setup**\r\n\r\nIn order to implement a bundled JRE solution with an application jar, I created an Inno Setup script that:\r\n\r\n1) copies the JRE into the install exe\r\n\r\n2) executes the equivalent of terminal command: java -jar myjar.jar using the bundled JRE\r\n\r\n  \r\nFirstly I copy the JRE:\r\n\r\n    #define MyJREPath &quot;C:\\Program Files\\Java\\jre1.8.0_191&quot;\r\n  \r\n    [Files]\r\n    Source: &quot;{#MyJREPath}\\*&quot;; DestDir: &quot;{app}\\runtime\\jre\\&quot;;  \\\r\n            Flags: ignoreversion recursesubdirs createallsubdirs;  \r\n\r\nI follow the directory structure convention shown here: https://docs.oracle.com/javase/8/docs/technotes/guides/deploy/self-contained-packaging.html\r\n\r\n\r\nTo run the equivalent of java -jar myjar.jar:\r\n\r\n    [Run]\r\n    Filename: &quot;{app}\\runtime\\jre\\bin\\javaw.exe&quot;; Parameters: &quot; -jar myjar.jar&quot;; \\\r\n              WorkingDir: &quot;{app}\\app\\&quot;; \\\r\n              Description: &quot;{cm:LaunchProgram,{#StringChange(MyAppName, &#39;&amp;&#39;, &#39;&amp;&amp;&#39;)}}&quot;; \\\r\n              Flags: postinstall skipifsilent   \r\n\r\n(n.b. java.exe runs with a terminal and javaw.exe runs without a terminal)\r\n \r\nDesktop shortcut needs to have the right filename, parameters and working directory:\r\n\r\n  \r\n\r\n    [Icons]\r\n    Name: &quot;{commondesktop}\\{#MyAppName}&quot;; \\\r\n          IconFilename: &quot;{app}\\app\\{#MyAppIcoName}&quot;; \\\r\n          Filename: &quot;{app}\\runtime\\jre\\bin\\javaw.exe&quot;; \\\r\n          Parameters: &quot; -jar myjar.jar&quot;; \\\r\n          WorkingDir: &quot;{app}\\app\\&quot;; \\\r\n          Tasks: desktopicon\r\n  \r\n    [Tasks]\r\n    Name: &quot;desktopicon&quot;; \\\r\n        Description: &quot;{cm:CreateDesktopIcon}&quot;; \\\r\n        GroupDescription: &quot;{cm:AdditionalIcons}&quot;; \\\r\n        Flags: unchecked\r\n\r\nFor the icing on the cake, in order make my script handle both bundled JRE and none bundled options\r\nI use the Preprocessor IF statement (duplicated in each script section) to test whether the script has an\r\nempty MyJREPath or not. If MyJREPath is not empty and so a bundled JRE solution\r\nis required\tI use the coding above; alternatively if a bundled solution is not required\r\nthen I use more &quot;normal&quot; coding shown the Inno Setup examples or generated by their wizard. Here&#39;s the IF statement:\r\n\r\n    #if MyJREPath != &quot;&quot;\r\n\t\t; bundled JRE required\r\n  \r\n    #else\r\n\t\t; bundled JRE not required\r\n    #endif\r\n\r\nHere&#39;s most of my script put together:\r\n\r\n    \t\t; Script generated by the Inno Setup Script Wizard.\r\n\t\t\t; SEE THE DOCUMENTATION FOR DETAILS ON CREATING INNO SETUP SCRIPT FILES!\r\n\r\n\r\n\t\t\t; some more #defines here\r\n\r\n\t\t\t#define MyAppExeName &quot;javaw.exe&quot;\r\n\t\t\t#define MyJREPath &quot;C:\\Program Files\\Java\\jre1.8.0_191&quot; \r\n\t\t\t;#define MyJREPath &quot;&quot;\r\n\r\n\r\n\r\n\r\n\t\t\t[Setup]\r\n\t\t\t; NOTE: The value of AppId uniquely identifies this application.\r\n\t\t\t; Do not use the same AppId value in installers for other applications.\r\n\t\t\t; (To generate a new GUID, click Tools | Generate GUID inside the IDE.)\r\n\t\t\tAppId=XXXXXXXXXX\r\n\t\t\tAppName={#MyAppName}\r\n\t\t\tAppVersion={#MyAppVersion}\r\n\t\t\t;AppVerName={#MyAppName} {#MyAppVersion}\r\n\t\t\tAppPublisher={#MyAppPublisher}\r\n\t\t\tDefaultGroupName={#MyAppPublisher}\r\n\t\t\tAppPublisherURL={#MyAppURL}\r\n\t\t\tAppSupportURL={#MyAppURL}\r\n\t\t\tAppUpdatesURL={#MyAppURL}   \r\n\t\t\tDefaultDirName={pf}\\{#MyDefaultDirName}\r\n\t\t\tDisableProgramGroupPage=yes\r\n\t\t\tLicenseFile={#MyInnoSetupDir}\\system\\{#MyLicenseFile}\r\n\t\t\tOutputDir={#MyInnoSetupDir}\r\n\r\n\t\t\t#if MyJREPath != &quot;&quot; \r\n\t\t\t  ; run app with bundled JRE\r\n\t\t\t  OutputBaseFilename={#MyAppName}-{#MyAppVersion}-bundledJRE-setup\r\n\t\t\t#else\r\n\t\t\t  ; run app without bundled JRE\r\n\t\t\t  OutputBaseFilename={#MyAppName}-{#MyAppVersion}-setup          \r\n\t\t\t#endif \r\n\r\n\t\t\tSetupIconFile={#MyInnoSetupDir}\\{#MyAppIcoName}\r\n\t\t\tCompression=lzma\r\n\t\t\tSolidCompression=yes  \r\n\t\t\tAppComments={#MyAppName}\r\n\t\t\tAppCopyright={#MyAppCopyright}  \r\n\t\t\tUninstallDisplayIcon={#MyInnoSetupDir}\\{#MyAppIcoName}\r\n\t\t\tUninstallDisplayName={#MyAppName}\r\n\t\t\tWizardImageStretch=No\r\n\t\t\tWizardSmallImageFile={#MyInnoSetupDir}\\{#MyAppBmpName}\r\n\r\n\r\n\r\n\t\t\t[Languages]\r\n\t\t\tName: &quot;english&quot;; MessagesFile: &quot;compiler:Default.isl&quot;\r\n\t\t\t;Name: &quot;german&quot;; MessagesFile: &quot;compiler:Languages\\German.isl&quot;\r\n\r\n\t\t\t[Tasks]\r\n\t\t\tName: &quot;desktopicon&quot;; \\\r\n\t\t\t\t\tDescription: &quot;{cm:CreateDesktopIcon}&quot;; \\\r\n\t\t\t\t\tGroupDescription: &quot;{cm:AdditionalIcons}&quot;; \\\r\n\t\t\t\t\tFlags: unchecked\r\n\t\t\tName: &quot;quicklaunchicon&quot;; \\\r\n\t\t\t\t\tDescription: &quot;{cm:CreateQuickLaunchIcon}&quot;; \\\r\n\t\t\t\t\tGroupDescription: &quot;{cm:AdditionalIcons}&quot;; \\\r\n\t\t\t\t\tFlags: unchecked; OnlyBelowVersion: 0,6.1\r\n\r\n\t\t\t[Files]\r\n\t\t\t; bundle JRE if required\r\n\t\t\t#if MyJREPath != &quot;&quot; \r\n\t\t\t\tSource: &quot;{#MyJREPath}\\*&quot;; DestDir: &quot;{app}\\runtime\\jre\\&quot;;  \\\r\n\t\t\t\t\tFlags: ignoreversion recursesubdirs createallsubdirs;       \r\n\t\t\t#endif      \r\n\t\t\t \r\n\t\t\t; copy jar and all files  \r\n\t\t\tSource: &quot;{#MyInnoSetupDir}\\*&quot;; DestDir: &quot;{app}\\app\\&quot;; \\        \r\n\t\t\t\t\tFlags: ignoreversion recursesubdirs createallsubdirs\r\n\r\n\r\n\t\t\t[Icons]\r\n\t\t\t#if MyJREPath != &quot;&quot;\r\n\t\t\t  ; set up icons with bundled JRE\r\n\t\t\t  Name: &quot;{commonprograms}\\{#MyAppName}&quot;; \\\r\n\t\t\t\t\t  IconFilename: &quot;{app}\\app\\{#MyAppIcoName}&quot;; \\\r\n\t\t\t\t\t  Filename: &quot;{app}\\runtime\\jre\\bin\\{#MyAppExeName}&quot;; \\\r\n\t\t\t\t\t  Parameters: &quot; -jar {#MyJarName}&quot;; \\\r\n\t\t\t\t\t  WorkingDir: &quot;{app}\\app\\&quot;\r\n\t\t\t  Name: &quot;{commondesktop}\\{#MyAppName}&quot;; \\\r\n\t\t\t\t\t  IconFilename: &quot;{app}\\app\\{#MyAppIcoName}&quot;; \\\r\n\t\t\t\t\t  Filename: &quot;{app}\\runtime\\jre\\bin\\{#MyAppExeName}&quot;; \\\r\n\t\t\t\t\t  Parameters: &quot; -jar {#MyJarName}&quot;; \\\r\n\t\t\t\t\t  WorkingDir: &quot;{app}\\app\\&quot;; \\\r\n\t\t\t\t\t  Tasks: desktopicon            \r\n\t\t\t  Name: &quot;{userappdata}\\Microsoft\\Internet Explorer\\Quick Launch\\{#MyAppName}&quot;; \\\r\n\t\t\t\t\t  IconFilename: &quot;{app}\\app\\{#MyAppIcoName}&quot;; \\\r\n\t\t\t\t\t  Filename: &quot;{app}\\runtime\\jre\\bin\\{#MyAppExeName}&quot;; \\\r\n\t\t\t\t\t  Parameters: &quot; -jar {#MyJarName}&quot;; \\\r\n\t\t\t\t\t  WorkingDir: &quot;{app}\\app\\&quot;; \\\r\n\t\t\t\t\t  Tasks: quicklaunchicon\r\n\t\t\t#else\r\n\t\t\t  ; set up icons without bundled JRE\r\n\t\t\t  Name: &quot;{commonprograms}\\{#MyAppName}&quot;; \\\r\n\t\t\t\t\t  IconFilename: &quot;{app}\\app\\{#MyAppIcoName}&quot;; \\\r\n\t\t\t\t\t  Filename: &quot;{app}\\app\\{#MyJarName}&quot;; \\\r\n\t\t\t\t\t  WorkingDir: &quot;{app}\\app\\&quot;\r\n\t\t\t  Name: &quot;{commondesktop}\\{#MyAppName}&quot;; \\\r\n\t\t\t\t\t  IconFilename: &quot;{app}\\app\\{#MyAppIcoName}&quot;; \\\r\n\t\t\t\t\t  Filename: &quot;{app}\\app\\{#MyJarName}&quot;; \\\r\n\t\t\t\t\t  WorkingDir: &quot;{app}\\app\\&quot;; \\\r\n\t\t\t\t\t  Tasks: desktopicon            \r\n\t\t\t  Name: &quot;{userappdata}\\Microsoft\\Internet Explorer\\Quick Launch\\{#MyAppName}&quot;; \\\r\n\t\t\t\t\t  IconFilename: &quot;{app}\\app\\{#MyAppIcoName}&quot;; \\\r\n\t\t\t\t\t  Filename: &quot;{app}\\app\\{#MyJarName}&quot;; \\\r\n\t\t\t\t\t  WorkingDir: &quot;{app}\\app\\&quot;; \\\r\n\t\t\t\t\t  Tasks: quicklaunchicon \r\n\t\t\t#endif\r\n\r\n\t\t\t[Run]\r\n\t\t\t#if MyJREPath != &quot;&quot;\r\n\t\t\t  ; run app with bundled JRE\r\n\t\t\t  Filename: &quot;{app}\\runtime\\jre\\bin\\{#MyAppExeName}&quot;; Parameters: &quot; -jar {#MyJarName}&quot;; \\\r\n\t\t\t\t\t  WorkingDir: &quot;{app}\\app\\&quot;; \\\r\n\t\t\t\t\t  Description: &quot;{cm:LaunchProgram,{#StringChange(MyAppName, &#39;&amp;&#39;, &#39;&amp;&amp;&#39;)}}&quot;; \\\r\n\t\t\t\t\t  Flags: postinstall skipifsilent          \r\n\t\t\t#else\r\n\t\t\t  ; run app without bundled JRE\r\n\t\t\t  Filename: &quot;{app}\\app\\{#MyJarName}&quot;; \\\r\n\t\t\t\t\t  WorkingDir: &quot;{app}\\app\\&quot;; \\\r\n\t\t\t\t\t  Description: &quot;{cm:LaunchProgram,{#StringChange(MyAppName, &#39;&amp;&#39;, &#39;&amp;&amp;&#39;)}}&quot;; \\\r\n\t\t\t\t\t  Flags: shellexec postinstall skipifsilent          \r\n\t\t\t#endif \r\n\r\n\r\nHope this helps.\r\n\r\n\r\n\t\t","title":"How do I bundle a JRE into an EXE for a Java Application? Launch4j says &quot;runtime is missing or corrupted.&quot;","body":"<p><strong>Bundled JRE Solution for Inno Setup</strong></p>\n\n<p>In order to implement a bundled JRE solution with an application jar, I created an Inno Setup script that:</p>\n\n<p>1) copies the JRE into the install exe</p>\n\n<p>2) executes the equivalent of terminal command: java -jar myjar.jar using the bundled JRE</p>\n\n<p>Firstly I copy the JRE:</p>\n\n<pre><code>#define MyJREPath \"C:\\Program Files\\Java\\jre1.8.0_191\"\n\n[Files]\nSource: \"{#MyJREPath}\\*\"; DestDir: \"{app}\\runtime\\jre\\\";  \\\n        Flags: ignoreversion recursesubdirs createallsubdirs;  \n</code></pre>\n\n<p>I follow the directory structure convention shown here: <a href=\"https://docs.oracle.com/javase/8/docs/technotes/guides/deploy/self-contained-packaging.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/8/docs/technotes/guides/deploy/self-contained-packaging.html</a></p>\n\n<p>To run the equivalent of java -jar myjar.jar:</p>\n\n<pre><code>[Run]\nFilename: \"{app}\\runtime\\jre\\bin\\javaw.exe\"; Parameters: \" -jar myjar.jar\"; \\\n          WorkingDir: \"{app}\\app\\\"; \\\n          Description: \"{cm:LaunchProgram,{#StringChange(MyAppName, '&amp;', '&amp;&amp;')}}\"; \\\n          Flags: postinstall skipifsilent   \n</code></pre>\n\n<p>(n.b. java.exe runs with a terminal and javaw.exe runs without a terminal)</p>\n\n<p>Desktop shortcut needs to have the right filename, parameters and working directory:</p>\n\n<pre><code>[Icons]\nName: \"{commondesktop}\\{#MyAppName}\"; \\\n      IconFilename: \"{app}\\app\\{#MyAppIcoName}\"; \\\n      Filename: \"{app}\\runtime\\jre\\bin\\javaw.exe\"; \\\n      Parameters: \" -jar myjar.jar\"; \\\n      WorkingDir: \"{app}\\app\\\"; \\\n      Tasks: desktopicon\n\n[Tasks]\nName: \"desktopicon\"; \\\n    Description: \"{cm:CreateDesktopIcon}\"; \\\n    GroupDescription: \"{cm:AdditionalIcons}\"; \\\n    Flags: unchecked\n</code></pre>\n\n<p>For the icing on the cake, in order make my script handle both bundled JRE and none bundled options\nI use the Preprocessor IF statement (duplicated in each script section) to test whether the script has an\nempty MyJREPath or not. If MyJREPath is not empty and so a bundled JRE solution\nis required I use the coding above; alternatively if a bundled solution is not required\nthen I use more \"normal\" coding shown the Inno Setup examples or generated by their wizard. Here's the IF statement:</p>\n\n<pre><code>#if MyJREPath != \"\"\n    ; bundled JRE required\n\n#else\n    ; bundled JRE not required\n#endif\n</code></pre>\n\n<p>Here's most of my script put together:</p>\n\n<pre><code>        ; Script generated by the Inno Setup Script Wizard.\n        ; SEE THE DOCUMENTATION FOR DETAILS ON CREATING INNO SETUP SCRIPT FILES!\n\n\n        ; some more #defines here\n\n        #define MyAppExeName \"javaw.exe\"\n        #define MyJREPath \"C:\\Program Files\\Java\\jre1.8.0_191\" \n        ;#define MyJREPath \"\"\n\n\n\n\n        [Setup]\n        ; NOTE: The value of AppId uniquely identifies this application.\n        ; Do not use the same AppId value in installers for other applications.\n        ; (To generate a new GUID, click Tools | Generate GUID inside the IDE.)\n        AppId=XXXXXXXXXX\n        AppName={#MyAppName}\n        AppVersion={#MyAppVersion}\n        ;AppVerName={#MyAppName} {#MyAppVersion}\n        AppPublisher={#MyAppPublisher}\n        DefaultGroupName={#MyAppPublisher}\n        AppPublisherURL={#MyAppURL}\n        AppSupportURL={#MyAppURL}\n        AppUpdatesURL={#MyAppURL}   \n        DefaultDirName={pf}\\{#MyDefaultDirName}\n        DisableProgramGroupPage=yes\n        LicenseFile={#MyInnoSetupDir}\\system\\{#MyLicenseFile}\n        OutputDir={#MyInnoSetupDir}\n\n        #if MyJREPath != \"\" \n          ; run app with bundled JRE\n          OutputBaseFilename={#MyAppName}-{#MyAppVersion}-bundledJRE-setup\n        #else\n          ; run app without bundled JRE\n          OutputBaseFilename={#MyAppName}-{#MyAppVersion}-setup          \n        #endif \n\n        SetupIconFile={#MyInnoSetupDir}\\{#MyAppIcoName}\n        Compression=lzma\n        SolidCompression=yes  \n        AppComments={#MyAppName}\n        AppCopyright={#MyAppCopyright}  \n        UninstallDisplayIcon={#MyInnoSetupDir}\\{#MyAppIcoName}\n        UninstallDisplayName={#MyAppName}\n        WizardImageStretch=No\n        WizardSmallImageFile={#MyInnoSetupDir}\\{#MyAppBmpName}\n\n\n\n        [Languages]\n        Name: \"english\"; MessagesFile: \"compiler:Default.isl\"\n        ;Name: \"german\"; MessagesFile: \"compiler:Languages\\German.isl\"\n\n        [Tasks]\n        Name: \"desktopicon\"; \\\n                Description: \"{cm:CreateDesktopIcon}\"; \\\n                GroupDescription: \"{cm:AdditionalIcons}\"; \\\n                Flags: unchecked\n        Name: \"quicklaunchicon\"; \\\n                Description: \"{cm:CreateQuickLaunchIcon}\"; \\\n                GroupDescription: \"{cm:AdditionalIcons}\"; \\\n                Flags: unchecked; OnlyBelowVersion: 0,6.1\n\n        [Files]\n        ; bundle JRE if required\n        #if MyJREPath != \"\" \n            Source: \"{#MyJREPath}\\*\"; DestDir: \"{app}\\runtime\\jre\\\";  \\\n                Flags: ignoreversion recursesubdirs createallsubdirs;       \n        #endif      \n\n        ; copy jar and all files  \n        Source: \"{#MyInnoSetupDir}\\*\"; DestDir: \"{app}\\app\\\"; \\        \n                Flags: ignoreversion recursesubdirs createallsubdirs\n\n\n        [Icons]\n        #if MyJREPath != \"\"\n          ; set up icons with bundled JRE\n          Name: \"{commonprograms}\\{#MyAppName}\"; \\\n                  IconFilename: \"{app}\\app\\{#MyAppIcoName}\"; \\\n                  Filename: \"{app}\\runtime\\jre\\bin\\{#MyAppExeName}\"; \\\n                  Parameters: \" -jar {#MyJarName}\"; \\\n                  WorkingDir: \"{app}\\app\\\"\n          Name: \"{commondesktop}\\{#MyAppName}\"; \\\n                  IconFilename: \"{app}\\app\\{#MyAppIcoName}\"; \\\n                  Filename: \"{app}\\runtime\\jre\\bin\\{#MyAppExeName}\"; \\\n                  Parameters: \" -jar {#MyJarName}\"; \\\n                  WorkingDir: \"{app}\\app\\\"; \\\n                  Tasks: desktopicon            \n          Name: \"{userappdata}\\Microsoft\\Internet Explorer\\Quick Launch\\{#MyAppName}\"; \\\n                  IconFilename: \"{app}\\app\\{#MyAppIcoName}\"; \\\n                  Filename: \"{app}\\runtime\\jre\\bin\\{#MyAppExeName}\"; \\\n                  Parameters: \" -jar {#MyJarName}\"; \\\n                  WorkingDir: \"{app}\\app\\\"; \\\n                  Tasks: quicklaunchicon\n        #else\n          ; set up icons without bundled JRE\n          Name: \"{commonprograms}\\{#MyAppName}\"; \\\n                  IconFilename: \"{app}\\app\\{#MyAppIcoName}\"; \\\n                  Filename: \"{app}\\app\\{#MyJarName}\"; \\\n                  WorkingDir: \"{app}\\app\\\"\n          Name: \"{commondesktop}\\{#MyAppName}\"; \\\n                  IconFilename: \"{app}\\app\\{#MyAppIcoName}\"; \\\n                  Filename: \"{app}\\app\\{#MyJarName}\"; \\\n                  WorkingDir: \"{app}\\app\\\"; \\\n                  Tasks: desktopicon            \n          Name: \"{userappdata}\\Microsoft\\Internet Explorer\\Quick Launch\\{#MyAppName}\"; \\\n                  IconFilename: \"{app}\\app\\{#MyAppIcoName}\"; \\\n                  Filename: \"{app}\\app\\{#MyJarName}\"; \\\n                  WorkingDir: \"{app}\\app\\\"; \\\n                  Tasks: quicklaunchicon \n        #endif\n\n        [Run]\n        #if MyJREPath != \"\"\n          ; run app with bundled JRE\n          Filename: \"{app}\\runtime\\jre\\bin\\{#MyAppExeName}\"; Parameters: \" -jar {#MyJarName}\"; \\\n                  WorkingDir: \"{app}\\app\\\"; \\\n                  Description: \"{cm:LaunchProgram,{#StringChange(MyAppName, '&amp;', '&amp;&amp;')}}\"; \\\n                  Flags: postinstall skipifsilent          \n        #else\n          ; run app without bundled JRE\n          Filename: \"{app}\\app\\{#MyJarName}\"; \\\n                  WorkingDir: \"{app}\\app\\\"; \\\n                  Description: \"{cm:LaunchProgram,{#StringChange(MyAppName, '&amp;', '&amp;&amp;')}}\"; \\\n                  Flags: shellexec postinstall skipifsilent          \n        #endif \n</code></pre>\n\n<p>Hope this helps.</p>\n"},{"tags":[],"owner":{"account_id":5355940,"reputation":1264,"user_id":4268594,"accept_rate":38,"display_name":"jamlee"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1555135992,"creation_date":1555135992,"answer_id":55662615,"question_id":13996547,"body_markdown":"the easy method to package jre to exe that lanch4j packaged is use wrap.\r\n\r\n    warp-packer --arch windows-x64 --input_dir mycrt --exec run.bat --output single.exe\r\n\r\n\r\nand then stop cmd windows when launch exe.\r\n\r\n    editbin /subsystem:windows\r\n\r\n\r\n\r\n**warp**: https://github.com/dgiagio/warp\r\n\r\n**editbin**: installed by VS\r\n\r\n\r\nDemo:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/br2kh.png\r\n  [2]: https://i.stack.imgur.com/LtPtv.png","title":"How do I bundle a JRE into an EXE for a Java Application? Launch4j says &quot;runtime is missing or corrupted.&quot;","body":"<p>the easy method to package jre to exe that lanch4j packaged is use wrap.</p>\n\n<pre><code>warp-packer --arch windows-x64 --input_dir mycrt --exec run.bat --output single.exe\n</code></pre>\n\n<p>and then stop cmd windows when launch exe.</p>\n\n<pre><code>editbin /subsystem:windows\n</code></pre>\n\n<p><strong>warp</strong>: <a href=\"https://github.com/dgiagio/warp\" rel=\"noreferrer\">https://github.com/dgiagio/warp</a></p>\n\n<p><strong>editbin</strong>: installed by VS</p>\n\n<p>Demo:</p>\n\n<p><a href=\"https://i.stack.imgur.com/br2kh.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/br2kh.png\" alt=\"enter image description here\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/LtPtv.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/LtPtv.png\" alt=\"enter image description here\"></a></p>\n"},{"tags":[],"owner":{"account_id":1967474,"reputation":3342,"user_id":1767316,"accept_rate":42,"display_name":"user1767316"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1640903172,"creation_date":1587895365,"answer_id":61438918,"question_id":13996547,"body_markdown":"The Java Packager included with JDKs from JDK 7 Update 6, \r\nis the [official way][1] to embed JRE along with your code in a native executable file.\r\n[Some maven plugin][2] seems to package the task of packaging and generating native executable for major plateforms.\r\n\r\nFrom JDK11 java packager would need to be downloaded according to [java-packager-with-jdk11][3] witch demonstrates packaging using gradle\r\n\r\nAnother approach may be to build a [GraalVM Native image][4] with the contstraint to find alternatives to libraries using reflexion which is not supported.\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/10/deploy/self-contained-application-packaging.htm\r\n  [2]: https://github.com/fvarrui/JavaPackager\r\n  [3]: https://medium.com/@adam_carroll/java-packager-with-jdk11-31b3d620f4a8\r\n  [4]: https://www.graalvm.org/reference-manual/native-image/","title":"How do I bundle a JRE into an EXE for a Java Application? Launch4j says &quot;runtime is missing or corrupted.&quot;","body":"<p>The Java Packager included with JDKs from JDK 7 Update 6,\nis the <a href=\"https://docs.oracle.com/javase/10/deploy/self-contained-application-packaging.htm\" rel=\"nofollow noreferrer\">official way</a> to embed JRE along with your code in a native executable file.\n<a href=\"https://github.com/fvarrui/JavaPackager\" rel=\"nofollow noreferrer\">Some maven plugin</a> seems to package the task of packaging and generating native executable for major plateforms.</p>\n<p>From JDK11 java packager would need to be downloaded according to <a href=\"https://medium.com/@adam_carroll/java-packager-with-jdk11-31b3d620f4a8\" rel=\"nofollow noreferrer\">java-packager-with-jdk11</a> witch demonstrates packaging using gradle</p>\n<p>Another approach may be to build a <a href=\"https://www.graalvm.org/reference-manual/native-image/\" rel=\"nofollow noreferrer\">GraalVM Native image</a> with the contstraint to find alternatives to libraries using reflexion which is not supported.</p>\n"}],"owner":{"account_id":2166999,"reputation":581,"user_id":1919916,"accept_rate":75,"display_name":"MagicGuy52"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":84313,"favorite_count":0,"down_vote_count":0,"up_vote_count":43,"answer_count":9,"score":43,"last_activity_date":1649785430,"creation_date":1356120442,"question_id":13996547,"body_markdown":"I am new to programming in Java but am generally familiar with how everything works. I would like to be able to put both a jar file and a jre into a windows executable(exe) so that when I distribute it, the client needn&#39;t have a JRE installed. What program should I use? \r\n\r\nI have launch4j and it seems to do exactly what I want but when I try to run the app, I get &quot;This application was configured to use a bundled Java Runtime Environment but the runtime is missing or corrupted.&quot;  \r\n\r\nI want my app to just be a runnable exe, not an installer. At the very least, can anyone show me how to correctly bundle a JRE with launch4j?","title":"How do I bundle a JRE into an EXE for a Java Application? Launch4j says &quot;runtime is missing or corrupted.&quot;","body":"<p>I am new to programming in Java but am generally familiar with how everything works. I would like to be able to put both a jar file and a jre into a windows executable(exe) so that when I distribute it, the client needn't have a JRE installed. What program should I use? </p>\n\n<p>I have launch4j and it seems to do exactly what I want but when I try to run the app, I get \"This application was configured to use a bundled Java Runtime Environment but the runtime is missing or corrupted.\"  </p>\n\n<p>I want my app to just be a runnable exe, not an installer. At the very least, can anyone show me how to correctly bundle a JRE with launch4j?</p>\n"},{"tags":["java","android","eclipse","image","drawable"],"comments":[{"owner":{"account_id":263171,"reputation":31519,"user_id":548568,"accept_rate":82,"display_name":"blessanm86"},"score":0,"creation_date":1320201854,"post_id":7974847,"comment_id":9752884,"body_markdown":"Have you tried using a image and making it a nine patch?","body":"Have you tried using a image and making it a nine patch?"},{"owner":{"account_id":8603529,"reputation":3209,"user_id":6444297,"accept_rate":71,"display_name":"Alireza Noorali"},"score":0,"creation_date":1532949905,"post_id":7974847,"comment_id":90151115,"body_markdown":"Check [My Answer](https://stackoverflow.com/a/51591980/6444297). This is exactly what you need.","body":"Check <a href=\"https://stackoverflow.com/a/51591980/6444297\">My Answer</a>. This is exactly what you need."}],"answers":[{"tags":[],"owner":{"account_id":239994,"reputation":24567,"user_id":509967,"accept_rate":74,"display_name":"Bobbake4"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1320201931,"creation_date":1320201931,"answer_id":7975271,"question_id":7974847,"body_markdown":"You should make an image in some kind of image editor and then create a 9 patch out of it. You can set the area you would like content to be using the 9 patch method. Then you can simply have a TextView with the background set to your 9 patch. Have a look at an app called Bnter on the market, it uses speech bubbles to display conversations similar to what you are looking for.","title":"Android drawable speech bubble","body":"<p>You should make an image in some kind of image editor and then create a 9 patch out of it. You can set the area you would like content to be using the 9 patch method. Then you can simply have a TextView with the background set to your 9 patch. Have a look at an app called Bnter on the market, it uses speech bubbles to display conversations similar to what you are looking for.</p>\n"},{"tags":[],"owner":{"account_id":3373287,"reputation":3280,"user_id":2832027,"accept_rate":63,"display_name":"TTransmit"},"down_vote_count":0,"up_vote_count":48,"is_accepted":false,"score":48,"last_activity_date":1525452660,"creation_date":1419269485,"answer_id":27607600,"question_id":7974847,"body_markdown":"Here is a simple speech bubble drawable I made. Hopefully, it&#39;s start in the right direction for someone. The view that this drawable is used in needs a height of at least 70-80dp and a similar minimum width to show properly. \r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;layer-list xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot; &gt;\r\n    \r\n        &lt;item android:top=&quot;30dp&quot;&gt;\r\n            &lt;rotate\r\n                android:fromDegrees=&quot;-45&quot;\r\n                android:pivotX=&quot;0%&quot;\r\n                android:pivotY=&quot;0%&quot;\r\n                android:toDegrees=&quot;0&quot; &gt;\r\n                &lt;shape android:shape=&quot;rectangle&quot; &gt;\r\n                    &lt;solid android:color=&quot;#CCC&quot; /&gt;\r\n                &lt;/shape&gt;\r\n            &lt;/rotate&gt;\r\n        &lt;/item&gt;\r\n        &lt;item android:left=&quot;20dp&quot;&gt;\r\n            &lt;shape android:shape=&quot;rectangle&quot; &gt;\r\n                &lt;solid android:color=&quot;#CCC&quot; /&gt;\r\n    \r\n                &lt;corners android:radius=&quot;5dp&quot; /&gt;\r\n            &lt;/shape&gt;\r\n        &lt;/item&gt;\r\n    \r\n    &lt;/layer-list&gt;\r\n\r\nAndroid Drawables leave a lot to be desired in terms of how usable they are for drawing anything even slightly complex. \r\n\r\nThis version looks like this: \r\n\r\n[![Old speech bubble version][1]][1]\r\n\r\n**UPDATE** I&#39;ve been working on XML speech bubbles again and was a little dissatisfied with my 2014 solution. In 2018, we have vector drawables which enable better solutions than the one above. Here are some more modern alternatives. They allow things like small messages and transparency. \r\n\r\n*speech_bubble_simple_user.xml*\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;layer-list xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:tools=&quot;http://schemas.android.com/tools&quot; &gt;\r\n    \r\n        &lt;item\r\n            android:bottom=&quot;@dimen/speech_bubble_tail&quot;\r\n            tools:width=&quot;100dp&quot;\r\n            tools:height=&quot;50dp&quot;&gt;\r\n            &lt;shape android:shape=&quot;rectangle&quot;&gt;\r\n                &lt;solid android:color=&quot;@color/speech_bubble_user&quot;/&gt;\r\n                &lt;corners\r\n                    android:topLeftRadius=&quot;@dimen/speech_bubble_corners&quot;\r\n                    android:topRightRadius=&quot;@dimen/speech_bubble_corners&quot;\r\n                    android:bottomRightRadius=&quot;0dp&quot;\r\n                    android:bottomLeftRadius=&quot;@dimen/speech_bubble_corners&quot;/&gt;\r\n            &lt;/shape&gt;\r\n        &lt;/item&gt;\r\n    \r\n        &lt;item\r\n            android:width=&quot;@dimen/speech_bubble_tail&quot;\r\n            android:height=&quot;@dimen/speech_bubble_tail&quot;\r\n            android:gravity=&quot;bottom|right&quot;&gt;\r\n            &lt;vector xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n                android:width=&quot;@dimen/speech_bubble_tail&quot;\r\n                android:height=&quot;@dimen/speech_bubble_tail&quot;\r\n                android:viewportWidth=&quot;25.0&quot;\r\n                android:viewportHeight=&quot;25.0&quot;&gt;\r\n                &lt;path\r\n                    android:pathData=&quot;M25,25 25,0 0,0z&quot;\r\n                    android:fillColor=&quot;@color/speech_bubble_user&quot;/&gt;\r\n            &lt;/vector&gt;\r\n        &lt;/item&gt;\r\n    \r\n    &lt;/layer-list&gt;\r\n\r\n*speech_bubble_simple_agent.xml*\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;layer-list xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:tools=&quot;http://schemas.android.com/tools&quot; &gt;\r\n    \r\n        &lt;item\r\n            android:bottom=&quot;@dimen/speech_bubble_tail&quot;\r\n            tools:width=&quot;100dp&quot;\r\n            tools:height=&quot;50dp&quot;&gt;\r\n            &lt;shape android:shape=&quot;rectangle&quot;&gt;\r\n                &lt;solid android:color=&quot;@color/speech_bubble_agent&quot;/&gt;\r\n                &lt;corners\r\n                    android:topLeftRadius=&quot;@dimen/speech_bubble_corners&quot;\r\n                    android:topRightRadius=&quot;@dimen/speech_bubble_corners&quot;\r\n                    android:bottomLeftRadius=&quot;0dp&quot;\r\n                    android:bottomRightRadius=&quot;@dimen/speech_bubble_corners&quot;/&gt;\r\n            &lt;/shape&gt;\r\n        &lt;/item&gt;\r\n    \r\n        &lt;item\r\n            android:width=&quot;@dimen/speech_bubble_tail&quot;\r\n            android:height=&quot;@dimen/speech_bubble_tail&quot;\r\n            android:gravity=&quot;bottom|left&quot;&gt;\r\n            &lt;vector xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n                android:width=&quot;@dimen/speech_bubble_tail&quot;\r\n                android:height=&quot;@dimen/speech_bubble_tail&quot;\r\n                android:viewportWidth=&quot;25.0&quot;\r\n                android:viewportHeight=&quot;25.0&quot;&gt;\r\n                &lt;path\r\n                    android:pathData=&quot;M0,25 25,0 0,0z&quot;\r\n                    android:fillColor=&quot;@color/speech_bubble_agent&quot;/&gt;\r\n            &lt;/vector&gt;\r\n        &lt;/item&gt;\r\n    \r\n    &lt;/layer-list&gt;\r\n\r\nThe two above look like this: (These versions don&#39;t quite work with transparency and I&#39;m not sure why when the versions below seem to work fine.)\r\n\r\n[![Two simple speech bubbles][2]][2]\r\n\r\n*speech_bubble_nine_patch_user.xml*\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;layer-list xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:tools=&quot;http://schemas.android.com/tools&quot; &gt;\r\n    \r\n        &lt;item\r\n            android:left=&quot;@dimen/speech_bubble_corners&quot;\r\n            android:right=&quot;@dimen/speech_bubble_corners_plus_tail&quot;\r\n            android:bottom=&quot;@dimen/speech_bubble_spacing&quot;\r\n            tools:width=&quot;50dp&quot;\r\n            tools:height=&quot;50dp&quot;&gt;\r\n            &lt;shape android:shape=&quot;rectangle&quot;&gt;\r\n                &lt;solid android:color=&quot;@color/speech_bubble_user&quot;/&gt;\r\n            &lt;/shape&gt;\r\n        &lt;/item&gt;\r\n    \r\n        &lt;item\r\n            android:top=&quot;@dimen/speech_bubble_corners&quot;\r\n            android:bottom=&quot;@dimen/speech_bubble_corners_plus_tail&quot;\r\n            android:gravity=&quot;left&quot;\r\n            android:width=&quot;@dimen/speech_bubble_corners&quot;&gt;\r\n            &lt;shape android:shape=&quot;rectangle&quot;&gt;\r\n                &lt;solid android:color=&quot;@color/speech_bubble_user&quot;/&gt;\r\n            &lt;/shape&gt;\r\n        &lt;/item&gt;\r\n    \r\n        &lt;item\r\n            android:top=&quot;@dimen/speech_bubble_corners&quot;\r\n            android:bottom=&quot;@dimen/speech_bubble_corners_plus_tail&quot;\r\n            android:right=&quot;@dimen/speech_bubble_spacing&quot;\r\n            android:gravity=&quot;right&quot;\r\n            android:width=&quot;@dimen/speech_bubble_corners&quot;&gt;\r\n            &lt;shape android:shape=&quot;rectangle&quot;&gt;\r\n                &lt;solid android:color=&quot;@color/speech_bubble_user&quot;/&gt;\r\n            &lt;/shape&gt;\r\n        &lt;/item&gt;\r\n    \r\n        &lt;item\r\n            android:width=&quot;@dimen/speech_bubble_corners&quot;\r\n            android:height=&quot;@dimen/speech_bubble_corners&quot;\r\n            android:bottom=&quot;@dimen/speech_bubble_spacing&quot;\r\n            android:gravity=&quot;bottom|left&quot;&gt;\r\n            &lt;vector xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n                android:width=&quot;@dimen/speech_bubble_corners&quot;\r\n                android:height=&quot;@dimen/speech_bubble_corners&quot;\r\n                android:viewportWidth=&quot;10.0&quot;\r\n                android:viewportHeight=&quot;10.0&quot;&gt;\r\n                &lt;path\r\n                    android:pathData=&quot;M0,0 A10,10 0 0,0 10,10 L10,0 Z&quot;\r\n                    android:fillColor=&quot;@color/speech_bubble_user&quot;/&gt;\r\n            &lt;/vector&gt;\r\n        &lt;/item&gt;\r\n    \r\n        &lt;item\r\n            android:width=&quot;@dimen/speech_bubble_corners&quot;\r\n            android:height=&quot;@dimen/speech_bubble_corners&quot;\r\n            android:right=&quot;@dimen/speech_bubble_spacing&quot;\r\n            android:gravity=&quot;top|right&quot;&gt;\r\n            &lt;vector xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n                android:width=&quot;@dimen/speech_bubble_corners&quot;\r\n                android:height=&quot;@dimen/speech_bubble_corners&quot;\r\n                android:viewportWidth=&quot;10.0&quot;\r\n                android:viewportHeight=&quot;10.0&quot;&gt;\r\n                &lt;path\r\n                    android:pathData=&quot;M10,10 A10,10 0 0,0 0,0 L0,10 Z&quot;\r\n                    android:fillColor=&quot;@color/speech_bubble_user&quot;/&gt;\r\n            &lt;/vector&gt;\r\n        &lt;/item&gt;\r\n    \r\n        &lt;item\r\n            android:width=&quot;@dimen/speech_bubble_corners&quot;\r\n            android:height=&quot;@dimen/speech_bubble_corners&quot;\r\n            android:gravity=&quot;top|left&quot;&gt;\r\n            &lt;vector xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n                android:width=&quot;@dimen/speech_bubble_corners&quot;\r\n                android:height=&quot;@dimen/speech_bubble_corners&quot;\r\n                android:viewportWidth=&quot;10.0&quot;\r\n                android:viewportHeight=&quot;10.0&quot;&gt;\r\n                &lt;path\r\n                    android:pathData=&quot;M10,0 A10,10 0 0,0 0,10 L10,10 Z&quot;\r\n                    android:fillColor=&quot;@color/speech_bubble_user&quot;/&gt;\r\n            &lt;/vector&gt;\r\n        &lt;/item&gt;\r\n    \r\n        &lt;item\r\n            android:width=&quot;@dimen/speech_bubble_corners_plus_tail&quot;\r\n            android:height=&quot;@dimen/speech_bubble_corners_plus_tail&quot;\r\n            android:gravity=&quot;bottom|right&quot;&gt;\r\n            &lt;vector xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n                android:width=&quot;@dimen/speech_bubble_corners_plus_tail&quot;\r\n                android:height=&quot;@dimen/speech_bubble_corners_plus_tail&quot;\r\n                android:viewportWidth=&quot;150.0&quot;\r\n                android:viewportHeight=&quot;150.0&quot;&gt;\r\n                &lt;path\r\n                    android:pathData=&quot;M0,100 C7.67309143,100 14.1935201,100.346373 20.500756,99.0996492 C43.6628959,129.872031 94.1698247,146.306561 150.320843,150.792562 C113.168693,130.799632 87.2808993,98.5054948 81.0808824,68.6524321 C94.1277117,51.7595331 100,23.9957121 100,0 L0,0 L0,100 Z&quot;\r\n                    android:fillColor=&quot;@color/speech_bubble_user&quot;/&gt;\r\n            &lt;/vector&gt;\r\n        &lt;/item&gt;\r\n    \r\n    &lt;/layer-list&gt;\r\n\r\n*speech_bubble_nine_patch_agent.xml*\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;layer-list xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:tools=&quot;http://schemas.android.com/tools&quot; &gt;\r\n    \r\n        &lt;item\r\n            android:left=&quot;@dimen/speech_bubble_corners_plus_tail&quot;\r\n            android:right=&quot;@dimen/speech_bubble_corners&quot;\r\n            android:bottom=&quot;@dimen/speech_bubble_spacing&quot;\r\n            tools:width=&quot;50dp&quot;\r\n            tools:height=&quot;50dp&quot;&gt;\r\n            &lt;shape android:shape=&quot;rectangle&quot;&gt;\r\n                &lt;solid android:color=&quot;@color/speech_bubble_agent&quot;/&gt;\r\n            &lt;/shape&gt;\r\n        &lt;/item&gt;\r\n    \r\n        &lt;item\r\n            android:top=&quot;@dimen/speech_bubble_corners&quot;\r\n            android:bottom=&quot;@dimen/speech_bubble_corners_plus_tail&quot;\r\n            android:left=&quot;@dimen/speech_bubble_spacing&quot;\r\n            android:gravity=&quot;left&quot;\r\n            android:width=&quot;@dimen/speech_bubble_corners&quot;&gt;\r\n            &lt;shape android:shape=&quot;rectangle&quot;&gt;\r\n                &lt;solid android:color=&quot;@color/speech_bubble_agent&quot;/&gt;\r\n            &lt;/shape&gt;\r\n        &lt;/item&gt;\r\n    \r\n        &lt;item\r\n            android:top=&quot;@dimen/speech_bubble_corners&quot;\r\n            android:bottom=&quot;@dimen/speech_bubble_corners_plus_tail&quot;\r\n            android:gravity=&quot;right&quot;\r\n            android:width=&quot;@dimen/speech_bubble_corners&quot;&gt;\r\n            &lt;shape android:shape=&quot;rectangle&quot;&gt;\r\n                &lt;solid android:color=&quot;@color/speech_bubble_agent&quot;/&gt;\r\n            &lt;/shape&gt;\r\n        &lt;/item&gt;\r\n    \r\n        &lt;item\r\n            android:width=&quot;@dimen/speech_bubble_corners&quot;\r\n            android:height=&quot;@dimen/speech_bubble_corners&quot;\r\n            android:bottom=&quot;@dimen/speech_bubble_spacing&quot;\r\n            android:gravity=&quot;bottom|right&quot;&gt;\r\n            &lt;vector xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n                android:width=&quot;@dimen/speech_bubble_corners&quot;\r\n                android:height=&quot;@dimen/speech_bubble_corners&quot;\r\n                android:viewportWidth=&quot;10.0&quot;\r\n                android:viewportHeight=&quot;10.0&quot;&gt;\r\n                &lt;path\r\n                    android:pathData=&quot;M0,10 A10,10 0 0,0 10,0 L0,0 Z&quot;\r\n                    android:fillColor=&quot;@color/speech_bubble_agent&quot;/&gt;\r\n            &lt;/vector&gt;\r\n        &lt;/item&gt;\r\n    \r\n        &lt;item\r\n            android:width=&quot;@dimen/speech_bubble_corners&quot;\r\n            android:height=&quot;@dimen/speech_bubble_corners&quot;\r\n            android:gravity=&quot;top|right&quot;&gt;\r\n            &lt;vector xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n                android:width=&quot;@dimen/speech_bubble_corners&quot;\r\n                android:height=&quot;@dimen/speech_bubble_corners&quot;\r\n                android:viewportWidth=&quot;10.0&quot;\r\n                android:viewportHeight=&quot;10.0&quot;&gt;\r\n                &lt;path\r\n                    android:pathData=&quot;M10,10 A10,10 0 0,0 0,0 L0,10 Z&quot;\r\n                    android:fillColor=&quot;@color/speech_bubble_agent&quot;/&gt;\r\n            &lt;/vector&gt;\r\n        &lt;/item&gt;\r\n    \r\n        &lt;item\r\n            android:width=&quot;@dimen/speech_bubble_corners&quot;\r\n            android:height=&quot;@dimen/speech_bubble_corners&quot;\r\n            android:left=&quot;@dimen/speech_bubble_spacing&quot;\r\n            android:gravity=&quot;top|left&quot;&gt;\r\n            &lt;vector xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n                android:width=&quot;@dimen/speech_bubble_corners&quot;\r\n                android:height=&quot;@dimen/speech_bubble_corners&quot;\r\n                android:viewportWidth=&quot;10.0&quot;\r\n                android:viewportHeight=&quot;10.0&quot;&gt;\r\n                &lt;path\r\n                    android:pathData=&quot;M10,0 A10,10 0 0,0 0,10 L10,10 Z&quot;\r\n                    android:fillColor=&quot;@color/speech_bubble_agent&quot;/&gt;\r\n            &lt;/vector&gt;\r\n        &lt;/item&gt;\r\n    \r\n        &lt;item\r\n            android:width=&quot;@dimen/speech_bubble_corners_plus_tail&quot;\r\n            android:height=&quot;@dimen/speech_bubble_corners_plus_tail&quot;\r\n            android:gravity=&quot;bottom|left&quot;&gt;\r\n            &lt;vector xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n                android:width=&quot;@dimen/speech_bubble_corners_plus_tail&quot;\r\n                android:height=&quot;@dimen/speech_bubble_corners_plus_tail&quot;\r\n                android:viewportWidth=&quot;150.0&quot;\r\n                android:viewportHeight=&quot;150.0&quot;&gt;\r\n                &lt;path\r\n                    android:pathData=&quot;M150,100 L150,0 L50,0 C50,11.9054549 52.5180742,22.2130322 55.2200144,32.2289993 C59.25,47.1679688 65.7054859,60.8615415 68.15625,65.5820312 C55.2200144,107.207031 41.7460938,127.800781 0,151 C61.5311854,147.539062 101.691406,129.675781 124.615295,97.6602593 C132.823321,99.8389881 141.106342,100 150,100 Z&quot;\r\n                    android:fillColor=&quot;@color/speech_bubble_agent&quot;/&gt;\r\n            &lt;/vector&gt;\r\n        &lt;/item&gt;\r\n    \r\n    &lt;/layer-list&gt;\r\n\r\nThe two above look like this: \r\n\r\n[![Speech bubbles with curly tails][3]][3]\r\n\r\n*dimens.xml* (for both)\r\n\r\n    &lt;dimen name=&quot;speech_bubble_corners&quot;&gt;10dp&lt;/dimen&gt;\r\n    &lt;dimen name=&quot;speech_bubble_corners_plus_tail&quot;&gt;15dp&lt;/dimen&gt;\r\n    &lt;dimen name=&quot;speech_bubble_spacing&quot;&gt;5dp&lt;/dimen&gt;\r\n    &lt;dimen name=&quot;speech_bubble_tail&quot;&gt;25dp&lt;/dimen&gt;\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/0gLrY.png\r\n  [2]: https://i.stack.imgur.com/Fy5rm.png\r\n  [3]: https://i.stack.imgur.com/vaaiO.png","title":"Android drawable speech bubble","body":"<p>Here is a simple speech bubble drawable I made. Hopefully, it's start in the right direction for someone. The view that this drawable is used in needs a height of at least 70-80dp and a similar minimum width to show properly. </p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;layer-list xmlns:android=\"http://schemas.android.com/apk/res/android\" &gt;\n\n    &lt;item android:top=\"30dp\"&gt;\n        &lt;rotate\n            android:fromDegrees=\"-45\"\n            android:pivotX=\"0%\"\n            android:pivotY=\"0%\"\n            android:toDegrees=\"0\" &gt;\n            &lt;shape android:shape=\"rectangle\" &gt;\n                &lt;solid android:color=\"#CCC\" /&gt;\n            &lt;/shape&gt;\n        &lt;/rotate&gt;\n    &lt;/item&gt;\n    &lt;item android:left=\"20dp\"&gt;\n        &lt;shape android:shape=\"rectangle\" &gt;\n            &lt;solid android:color=\"#CCC\" /&gt;\n\n            &lt;corners android:radius=\"5dp\" /&gt;\n        &lt;/shape&gt;\n    &lt;/item&gt;\n\n&lt;/layer-list&gt;\n</code></pre>\n\n<p>Android Drawables leave a lot to be desired in terms of how usable they are for drawing anything even slightly complex. </p>\n\n<p>This version looks like this: </p>\n\n<p><a href=\"https://i.stack.imgur.com/0gLrY.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/0gLrY.png\" alt=\"Old speech bubble version\"></a></p>\n\n<p><strong>UPDATE</strong> I've been working on XML speech bubbles again and was a little dissatisfied with my 2014 solution. In 2018, we have vector drawables which enable better solutions than the one above. Here are some more modern alternatives. They allow things like small messages and transparency. </p>\n\n<p><em>speech_bubble_simple_user.xml</em></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;layer-list xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:tools=\"http://schemas.android.com/tools\" &gt;\n\n    &lt;item\n        android:bottom=\"@dimen/speech_bubble_tail\"\n        tools:width=\"100dp\"\n        tools:height=\"50dp\"&gt;\n        &lt;shape android:shape=\"rectangle\"&gt;\n            &lt;solid android:color=\"@color/speech_bubble_user\"/&gt;\n            &lt;corners\n                android:topLeftRadius=\"@dimen/speech_bubble_corners\"\n                android:topRightRadius=\"@dimen/speech_bubble_corners\"\n                android:bottomRightRadius=\"0dp\"\n                android:bottomLeftRadius=\"@dimen/speech_bubble_corners\"/&gt;\n        &lt;/shape&gt;\n    &lt;/item&gt;\n\n    &lt;item\n        android:width=\"@dimen/speech_bubble_tail\"\n        android:height=\"@dimen/speech_bubble_tail\"\n        android:gravity=\"bottom|right\"&gt;\n        &lt;vector xmlns:android=\"http://schemas.android.com/apk/res/android\"\n            android:width=\"@dimen/speech_bubble_tail\"\n            android:height=\"@dimen/speech_bubble_tail\"\n            android:viewportWidth=\"25.0\"\n            android:viewportHeight=\"25.0\"&gt;\n            &lt;path\n                android:pathData=\"M25,25 25,0 0,0z\"\n                android:fillColor=\"@color/speech_bubble_user\"/&gt;\n        &lt;/vector&gt;\n    &lt;/item&gt;\n\n&lt;/layer-list&gt;\n</code></pre>\n\n<p><em>speech_bubble_simple_agent.xml</em></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;layer-list xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:tools=\"http://schemas.android.com/tools\" &gt;\n\n    &lt;item\n        android:bottom=\"@dimen/speech_bubble_tail\"\n        tools:width=\"100dp\"\n        tools:height=\"50dp\"&gt;\n        &lt;shape android:shape=\"rectangle\"&gt;\n            &lt;solid android:color=\"@color/speech_bubble_agent\"/&gt;\n            &lt;corners\n                android:topLeftRadius=\"@dimen/speech_bubble_corners\"\n                android:topRightRadius=\"@dimen/speech_bubble_corners\"\n                android:bottomLeftRadius=\"0dp\"\n                android:bottomRightRadius=\"@dimen/speech_bubble_corners\"/&gt;\n        &lt;/shape&gt;\n    &lt;/item&gt;\n\n    &lt;item\n        android:width=\"@dimen/speech_bubble_tail\"\n        android:height=\"@dimen/speech_bubble_tail\"\n        android:gravity=\"bottom|left\"&gt;\n        &lt;vector xmlns:android=\"http://schemas.android.com/apk/res/android\"\n            android:width=\"@dimen/speech_bubble_tail\"\n            android:height=\"@dimen/speech_bubble_tail\"\n            android:viewportWidth=\"25.0\"\n            android:viewportHeight=\"25.0\"&gt;\n            &lt;path\n                android:pathData=\"M0,25 25,0 0,0z\"\n                android:fillColor=\"@color/speech_bubble_agent\"/&gt;\n        &lt;/vector&gt;\n    &lt;/item&gt;\n\n&lt;/layer-list&gt;\n</code></pre>\n\n<p>The two above look like this: (These versions don't quite work with transparency and I'm not sure why when the versions below seem to work fine.)</p>\n\n<p><a href=\"https://i.stack.imgur.com/Fy5rm.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/Fy5rm.png\" alt=\"Two simple speech bubbles\"></a></p>\n\n<p><em>speech_bubble_nine_patch_user.xml</em></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;layer-list xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:tools=\"http://schemas.android.com/tools\" &gt;\n\n    &lt;item\n        android:left=\"@dimen/speech_bubble_corners\"\n        android:right=\"@dimen/speech_bubble_corners_plus_tail\"\n        android:bottom=\"@dimen/speech_bubble_spacing\"\n        tools:width=\"50dp\"\n        tools:height=\"50dp\"&gt;\n        &lt;shape android:shape=\"rectangle\"&gt;\n            &lt;solid android:color=\"@color/speech_bubble_user\"/&gt;\n        &lt;/shape&gt;\n    &lt;/item&gt;\n\n    &lt;item\n        android:top=\"@dimen/speech_bubble_corners\"\n        android:bottom=\"@dimen/speech_bubble_corners_plus_tail\"\n        android:gravity=\"left\"\n        android:width=\"@dimen/speech_bubble_corners\"&gt;\n        &lt;shape android:shape=\"rectangle\"&gt;\n            &lt;solid android:color=\"@color/speech_bubble_user\"/&gt;\n        &lt;/shape&gt;\n    &lt;/item&gt;\n\n    &lt;item\n        android:top=\"@dimen/speech_bubble_corners\"\n        android:bottom=\"@dimen/speech_bubble_corners_plus_tail\"\n        android:right=\"@dimen/speech_bubble_spacing\"\n        android:gravity=\"right\"\n        android:width=\"@dimen/speech_bubble_corners\"&gt;\n        &lt;shape android:shape=\"rectangle\"&gt;\n            &lt;solid android:color=\"@color/speech_bubble_user\"/&gt;\n        &lt;/shape&gt;\n    &lt;/item&gt;\n\n    &lt;item\n        android:width=\"@dimen/speech_bubble_corners\"\n        android:height=\"@dimen/speech_bubble_corners\"\n        android:bottom=\"@dimen/speech_bubble_spacing\"\n        android:gravity=\"bottom|left\"&gt;\n        &lt;vector xmlns:android=\"http://schemas.android.com/apk/res/android\"\n            android:width=\"@dimen/speech_bubble_corners\"\n            android:height=\"@dimen/speech_bubble_corners\"\n            android:viewportWidth=\"10.0\"\n            android:viewportHeight=\"10.0\"&gt;\n            &lt;path\n                android:pathData=\"M0,0 A10,10 0 0,0 10,10 L10,0 Z\"\n                android:fillColor=\"@color/speech_bubble_user\"/&gt;\n        &lt;/vector&gt;\n    &lt;/item&gt;\n\n    &lt;item\n        android:width=\"@dimen/speech_bubble_corners\"\n        android:height=\"@dimen/speech_bubble_corners\"\n        android:right=\"@dimen/speech_bubble_spacing\"\n        android:gravity=\"top|right\"&gt;\n        &lt;vector xmlns:android=\"http://schemas.android.com/apk/res/android\"\n            android:width=\"@dimen/speech_bubble_corners\"\n            android:height=\"@dimen/speech_bubble_corners\"\n            android:viewportWidth=\"10.0\"\n            android:viewportHeight=\"10.0\"&gt;\n            &lt;path\n                android:pathData=\"M10,10 A10,10 0 0,0 0,0 L0,10 Z\"\n                android:fillColor=\"@color/speech_bubble_user\"/&gt;\n        &lt;/vector&gt;\n    &lt;/item&gt;\n\n    &lt;item\n        android:width=\"@dimen/speech_bubble_corners\"\n        android:height=\"@dimen/speech_bubble_corners\"\n        android:gravity=\"top|left\"&gt;\n        &lt;vector xmlns:android=\"http://schemas.android.com/apk/res/android\"\n            android:width=\"@dimen/speech_bubble_corners\"\n            android:height=\"@dimen/speech_bubble_corners\"\n            android:viewportWidth=\"10.0\"\n            android:viewportHeight=\"10.0\"&gt;\n            &lt;path\n                android:pathData=\"M10,0 A10,10 0 0,0 0,10 L10,10 Z\"\n                android:fillColor=\"@color/speech_bubble_user\"/&gt;\n        &lt;/vector&gt;\n    &lt;/item&gt;\n\n    &lt;item\n        android:width=\"@dimen/speech_bubble_corners_plus_tail\"\n        android:height=\"@dimen/speech_bubble_corners_plus_tail\"\n        android:gravity=\"bottom|right\"&gt;\n        &lt;vector xmlns:android=\"http://schemas.android.com/apk/res/android\"\n            android:width=\"@dimen/speech_bubble_corners_plus_tail\"\n            android:height=\"@dimen/speech_bubble_corners_plus_tail\"\n            android:viewportWidth=\"150.0\"\n            android:viewportHeight=\"150.0\"&gt;\n            &lt;path\n                android:pathData=\"M0,100 C7.67309143,100 14.1935201,100.346373 20.500756,99.0996492 C43.6628959,129.872031 94.1698247,146.306561 150.320843,150.792562 C113.168693,130.799632 87.2808993,98.5054948 81.0808824,68.6524321 C94.1277117,51.7595331 100,23.9957121 100,0 L0,0 L0,100 Z\"\n                android:fillColor=\"@color/speech_bubble_user\"/&gt;\n        &lt;/vector&gt;\n    &lt;/item&gt;\n\n&lt;/layer-list&gt;\n</code></pre>\n\n<p><em>speech_bubble_nine_patch_agent.xml</em></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;layer-list xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:tools=\"http://schemas.android.com/tools\" &gt;\n\n    &lt;item\n        android:left=\"@dimen/speech_bubble_corners_plus_tail\"\n        android:right=\"@dimen/speech_bubble_corners\"\n        android:bottom=\"@dimen/speech_bubble_spacing\"\n        tools:width=\"50dp\"\n        tools:height=\"50dp\"&gt;\n        &lt;shape android:shape=\"rectangle\"&gt;\n            &lt;solid android:color=\"@color/speech_bubble_agent\"/&gt;\n        &lt;/shape&gt;\n    &lt;/item&gt;\n\n    &lt;item\n        android:top=\"@dimen/speech_bubble_corners\"\n        android:bottom=\"@dimen/speech_bubble_corners_plus_tail\"\n        android:left=\"@dimen/speech_bubble_spacing\"\n        android:gravity=\"left\"\n        android:width=\"@dimen/speech_bubble_corners\"&gt;\n        &lt;shape android:shape=\"rectangle\"&gt;\n            &lt;solid android:color=\"@color/speech_bubble_agent\"/&gt;\n        &lt;/shape&gt;\n    &lt;/item&gt;\n\n    &lt;item\n        android:top=\"@dimen/speech_bubble_corners\"\n        android:bottom=\"@dimen/speech_bubble_corners_plus_tail\"\n        android:gravity=\"right\"\n        android:width=\"@dimen/speech_bubble_corners\"&gt;\n        &lt;shape android:shape=\"rectangle\"&gt;\n            &lt;solid android:color=\"@color/speech_bubble_agent\"/&gt;\n        &lt;/shape&gt;\n    &lt;/item&gt;\n\n    &lt;item\n        android:width=\"@dimen/speech_bubble_corners\"\n        android:height=\"@dimen/speech_bubble_corners\"\n        android:bottom=\"@dimen/speech_bubble_spacing\"\n        android:gravity=\"bottom|right\"&gt;\n        &lt;vector xmlns:android=\"http://schemas.android.com/apk/res/android\"\n            android:width=\"@dimen/speech_bubble_corners\"\n            android:height=\"@dimen/speech_bubble_corners\"\n            android:viewportWidth=\"10.0\"\n            android:viewportHeight=\"10.0\"&gt;\n            &lt;path\n                android:pathData=\"M0,10 A10,10 0 0,0 10,0 L0,0 Z\"\n                android:fillColor=\"@color/speech_bubble_agent\"/&gt;\n        &lt;/vector&gt;\n    &lt;/item&gt;\n\n    &lt;item\n        android:width=\"@dimen/speech_bubble_corners\"\n        android:height=\"@dimen/speech_bubble_corners\"\n        android:gravity=\"top|right\"&gt;\n        &lt;vector xmlns:android=\"http://schemas.android.com/apk/res/android\"\n            android:width=\"@dimen/speech_bubble_corners\"\n            android:height=\"@dimen/speech_bubble_corners\"\n            android:viewportWidth=\"10.0\"\n            android:viewportHeight=\"10.0\"&gt;\n            &lt;path\n                android:pathData=\"M10,10 A10,10 0 0,0 0,0 L0,10 Z\"\n                android:fillColor=\"@color/speech_bubble_agent\"/&gt;\n        &lt;/vector&gt;\n    &lt;/item&gt;\n\n    &lt;item\n        android:width=\"@dimen/speech_bubble_corners\"\n        android:height=\"@dimen/speech_bubble_corners\"\n        android:left=\"@dimen/speech_bubble_spacing\"\n        android:gravity=\"top|left\"&gt;\n        &lt;vector xmlns:android=\"http://schemas.android.com/apk/res/android\"\n            android:width=\"@dimen/speech_bubble_corners\"\n            android:height=\"@dimen/speech_bubble_corners\"\n            android:viewportWidth=\"10.0\"\n            android:viewportHeight=\"10.0\"&gt;\n            &lt;path\n                android:pathData=\"M10,0 A10,10 0 0,0 0,10 L10,10 Z\"\n                android:fillColor=\"@color/speech_bubble_agent\"/&gt;\n        &lt;/vector&gt;\n    &lt;/item&gt;\n\n    &lt;item\n        android:width=\"@dimen/speech_bubble_corners_plus_tail\"\n        android:height=\"@dimen/speech_bubble_corners_plus_tail\"\n        android:gravity=\"bottom|left\"&gt;\n        &lt;vector xmlns:android=\"http://schemas.android.com/apk/res/android\"\n            android:width=\"@dimen/speech_bubble_corners_plus_tail\"\n            android:height=\"@dimen/speech_bubble_corners_plus_tail\"\n            android:viewportWidth=\"150.0\"\n            android:viewportHeight=\"150.0\"&gt;\n            &lt;path\n                android:pathData=\"M150,100 L150,0 L50,0 C50,11.9054549 52.5180742,22.2130322 55.2200144,32.2289993 C59.25,47.1679688 65.7054859,60.8615415 68.15625,65.5820312 C55.2200144,107.207031 41.7460938,127.800781 0,151 C61.5311854,147.539062 101.691406,129.675781 124.615295,97.6602593 C132.823321,99.8389881 141.106342,100 150,100 Z\"\n                android:fillColor=\"@color/speech_bubble_agent\"/&gt;\n        &lt;/vector&gt;\n    &lt;/item&gt;\n\n&lt;/layer-list&gt;\n</code></pre>\n\n<p>The two above look like this: </p>\n\n<p><a href=\"https://i.stack.imgur.com/vaaiO.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/vaaiO.png\" alt=\"Speech bubbles with curly tails\"></a></p>\n\n<p><em>dimens.xml</em> (for both)</p>\n\n<pre><code>&lt;dimen name=\"speech_bubble_corners\"&gt;10dp&lt;/dimen&gt;\n&lt;dimen name=\"speech_bubble_corners_plus_tail\"&gt;15dp&lt;/dimen&gt;\n&lt;dimen name=\"speech_bubble_spacing\"&gt;5dp&lt;/dimen&gt;\n&lt;dimen name=\"speech_bubble_tail\"&gt;25dp&lt;/dimen&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":235684,"reputation":6837,"user_id":502671,"accept_rate":71,"display_name":"Etienne Lawlor"},"down_vote_count":0,"up_vote_count":90,"is_accepted":false,"score":90,"last_activity_date":1466822538,"creation_date":1466822538,"answer_id":38024441,"question_id":7974847,"body_markdown":"If you are creating a chat screen you are probably going to want to implement an incoming speech bubble and an outgoing speech bubble.  Here is how I did that :\r\n\r\n## shape_bg_incoming_bubble.xml\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;layer-list xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;\r\n        &lt;item&gt;\r\n            &lt;rotate\r\n                android:fromDegrees=&quot;-45&quot;\r\n                android:pivotX=&quot;0%&quot;\r\n                android:pivotY=&quot;0%&quot;\r\n                android:toDegrees=&quot;0&quot; &gt;\r\n                &lt;shape android:shape=&quot;rectangle&quot; &gt;\r\n                    &lt;solid android:color=&quot;@color/primary&quot; /&gt;\r\n                &lt;/shape&gt;\r\n            &lt;/rotate&gt;\r\n        &lt;/item&gt;\r\n        &lt;item android:left=&quot;16dp&quot;&gt;\r\n            &lt;shape android:shape=&quot;rectangle&quot; &gt;\r\n                &lt;solid android:color=&quot;@color/primary&quot; /&gt;\r\n                &lt;corners android:radius=&quot;4dp&quot; /&gt;\r\n            &lt;/shape&gt;\r\n        &lt;/item&gt;\r\n    &lt;/layer-list&gt;\r\n\r\n## shape_bg_outgoing_bubble.xml\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;layer-list xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;\r\n        &lt;item&gt;\r\n            &lt;rotate\r\n                android:fromDegrees=&quot;45&quot;\r\n                android:pivotX=&quot;100%&quot;\r\n                android:pivotY=&quot;0%&quot;\r\n                android:toDegrees=&quot;0&quot; &gt;\r\n                &lt;shape android:shape=&quot;rectangle&quot; &gt;\r\n                    &lt;solid android:color=&quot;@color/grey_500&quot; /&gt;\r\n                &lt;/shape&gt;\r\n            &lt;/rotate&gt;\r\n        &lt;/item&gt;\r\n        &lt;item android:right=&quot;16dp&quot;&gt;\r\n            &lt;shape android:shape=&quot;rectangle&quot; &gt;\r\n                &lt;solid android:color=&quot;@color/grey_500&quot; /&gt;\r\n                &lt;corners android:radius=&quot;4dp&quot; /&gt;\r\n            &lt;/shape&gt;\r\n        &lt;/item&gt;\r\n    &lt;/layer-list&gt;\r\n\r\n","title":"Android drawable speech bubble","body":"<p>If you are creating a chat screen you are probably going to want to implement an incoming speech bubble and an outgoing speech bubble.  Here is how I did that :</p>\n\n<h2>shape_bg_incoming_bubble.xml</h2>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;layer-list xmlns:android=\"http://schemas.android.com/apk/res/android\"&gt;\n    &lt;item&gt;\n        &lt;rotate\n            android:fromDegrees=\"-45\"\n            android:pivotX=\"0%\"\n            android:pivotY=\"0%\"\n            android:toDegrees=\"0\" &gt;\n            &lt;shape android:shape=\"rectangle\" &gt;\n                &lt;solid android:color=\"@color/primary\" /&gt;\n            &lt;/shape&gt;\n        &lt;/rotate&gt;\n    &lt;/item&gt;\n    &lt;item android:left=\"16dp\"&gt;\n        &lt;shape android:shape=\"rectangle\" &gt;\n            &lt;solid android:color=\"@color/primary\" /&gt;\n            &lt;corners android:radius=\"4dp\" /&gt;\n        &lt;/shape&gt;\n    &lt;/item&gt;\n&lt;/layer-list&gt;\n</code></pre>\n\n<h2>shape_bg_outgoing_bubble.xml</h2>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;layer-list xmlns:android=\"http://schemas.android.com/apk/res/android\"&gt;\n    &lt;item&gt;\n        &lt;rotate\n            android:fromDegrees=\"45\"\n            android:pivotX=\"100%\"\n            android:pivotY=\"0%\"\n            android:toDegrees=\"0\" &gt;\n            &lt;shape android:shape=\"rectangle\" &gt;\n                &lt;solid android:color=\"@color/grey_500\" /&gt;\n            &lt;/shape&gt;\n        &lt;/rotate&gt;\n    &lt;/item&gt;\n    &lt;item android:right=\"16dp\"&gt;\n        &lt;shape android:shape=\"rectangle\" &gt;\n            &lt;solid android:color=\"@color/grey_500\" /&gt;\n            &lt;corners android:radius=\"4dp\" /&gt;\n        &lt;/shape&gt;\n    &lt;/item&gt;\n&lt;/layer-list&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6764603,"reputation":3014,"user_id":5209982,"accept_rate":58,"display_name":"VipiN Negi"},"down_vote_count":0,"up_vote_count":78,"is_accepted":false,"score":78,"last_activity_date":1563007039,"creation_date":1553691892,"answer_id":55377936,"question_id":7974847,"body_markdown":"I know its bit too late for this. For those, who don&#39;t want to use 9-patch images yet want to cast shadows from speech bubble. This is closest I could get to WhatsApp speech bubble. And thanks to @toobsco42 for the answer above.\r\n\r\nHere you go..\r\n\r\nIncoming Speech Bubble :\r\n\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;layer-list xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;\r\n\r\n    &lt;!--Shadow Layers--&gt;\r\n\r\n    &lt;item&gt;\r\n        &lt;rotate\r\n            android:fromDegrees=&quot;-35&quot;\r\n            android:pivotX=&quot;0%&quot;\r\n            android:pivotY=&quot;0%&quot;\r\n            android:toDegrees=&quot;0&quot;&gt;\r\n            &lt;shape android:shape=&quot;rectangle&quot;&gt;\r\n                &lt;corners android:radius=&quot;4dp&quot;/&gt;\r\n                &lt;padding\r\n                    android:bottom=&quot;1px&quot;\r\n                    android:left=&quot;1px&quot;\r\n                    android:right=&quot;1px&quot;/&gt;\r\n                &lt;solid android:color=&quot;#01000000&quot; /&gt;\r\n            &lt;/shape&gt;\r\n        &lt;/rotate&gt;\r\n    &lt;/item&gt;\r\n    &lt;item android:left=&quot;8dp&quot;&gt;\r\n        &lt;shape android:shape=&quot;rectangle&quot;&gt;\r\n            &lt;padding\r\n                android:bottom=&quot;1px&quot;\r\n                android:left=&quot;1px&quot;\r\n                android:right=&quot;1px&quot;/&gt;\r\n            &lt;solid android:color=&quot;#01000000&quot; /&gt;\r\n            &lt;corners android:radius=&quot;8dp&quot; /&gt;\r\n        &lt;/shape&gt;\r\n    &lt;/item&gt;\r\n\r\n    &lt;!--===============--&gt;\r\n    &lt;item&gt;\r\n        &lt;rotate\r\n            android:fromDegrees=&quot;-35&quot;\r\n            android:pivotX=&quot;0%&quot;\r\n            android:pivotY=&quot;0%&quot;\r\n            android:toDegrees=&quot;0&quot;&gt;\r\n            &lt;shape android:shape=&quot;rectangle&quot;&gt;\r\n                &lt;corners android:radius=&quot;4dp&quot;/&gt;\r\n                &lt;padding\r\n                    android:bottom=&quot;1px&quot; /&gt;\r\n                &lt;solid android:color=&quot;#09000000&quot; /&gt;\r\n            &lt;/shape&gt;\r\n        &lt;/rotate&gt;\r\n    &lt;/item&gt;\r\n    &lt;item android:left=&quot;8dp&quot;&gt;\r\n        &lt;shape android:shape=&quot;rectangle&quot;&gt;\r\n            &lt;padding\r\n                android:bottom=&quot;1px&quot; /&gt;\r\n            &lt;solid android:color=&quot;#09000000&quot; /&gt;\r\n            &lt;corners android:radius=&quot;8dp&quot; /&gt;\r\n        &lt;/shape&gt;\r\n    &lt;/item&gt;\r\n\r\n    &lt;!--===============--&gt;\r\n\r\n    &lt;item&gt;\r\n        &lt;rotate\r\n            android:fromDegrees=&quot;-35&quot;\r\n            android:pivotX=&quot;0%&quot;\r\n            android:pivotY=&quot;0%&quot;\r\n            android:toDegrees=&quot;0&quot;&gt;\r\n            &lt;shape android:shape=&quot;rectangle&quot;&gt;\r\n                &lt;corners android:radius=&quot;4dp&quot;/&gt;\r\n                &lt;padding\r\n                    android:bottom=&quot;1px&quot;\r\n                    android:left=&quot;1px&quot;\r\n                    android:right=&quot;1px&quot;/&gt;\r\n                &lt;solid android:color=&quot;#10000000&quot; /&gt;\r\n            &lt;/shape&gt;\r\n        &lt;/rotate&gt;\r\n    &lt;/item&gt;\r\n    &lt;item android:left=&quot;8dp&quot;&gt;\r\n        &lt;shape android:shape=&quot;rectangle&quot;&gt;\r\n            &lt;padding\r\n                android:bottom=&quot;1px&quot;\r\n                android:left=&quot;1px&quot;\r\n                android:right=&quot;1px&quot;/&gt;\r\n            &lt;solid android:color=&quot;#10000000&quot; /&gt;\r\n            &lt;corners android:radius=&quot;8dp&quot; /&gt;\r\n        &lt;/shape&gt;\r\n    &lt;/item&gt;\r\n\r\n    &lt;!--ForeGround--&gt;\r\n\r\n    &lt;item&gt;\r\n        &lt;rotate\r\n            android:fromDegrees=&quot;-35&quot;\r\n            android:pivotX=&quot;0%&quot;\r\n            android:pivotY=&quot;0%&quot;\r\n            android:toDegrees=&quot;0&quot;&gt;\r\n            &lt;shape android:shape=&quot;rectangle&quot;&gt;\r\n                &lt;corners android:radius=&quot;4dp&quot;/&gt;\r\n                &lt;solid android:color=&quot;@color/colorWhite&quot; /&gt;\r\n            &lt;/shape&gt;\r\n        &lt;/rotate&gt;\r\n    &lt;/item&gt;\r\n    &lt;item android:left=&quot;8dp&quot;&gt;\r\n        &lt;shape android:shape=&quot;rectangle&quot;&gt;\r\n            &lt;solid android:color=&quot;@color/colorWhite&quot; /&gt;\r\n            &lt;corners android:radius=&quot;8dp&quot; /&gt;\r\n        &lt;/shape&gt;\r\n    &lt;/item&gt;\r\n\r\n    &lt;/layer-list&gt;\r\n\r\n\r\nOutgoing Speech Bubble :\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;layer-list xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;\r\n\r\n    &lt;!--Shadow Layer--&gt;\r\n\r\n    &lt;item&gt;\r\n        &lt;rotate\r\n            android:fromDegrees=&quot;40&quot;\r\n            android:pivotX=&quot;100%&quot;\r\n            android:pivotY=&quot;0%&quot;\r\n            android:toDegrees=&quot;0&quot;&gt;\r\n            &lt;shape android:shape=&quot;rectangle&quot;&gt;\r\n                &lt;corners android:radius=&quot;4dp&quot; /&gt;\r\n                &lt;padding\r\n                    android:bottom=&quot;1px&quot;\r\n                    android:left=&quot;1px&quot;\r\n                    android:right=&quot;1px&quot; /&gt;\r\n                &lt;solid android:color=&quot;#01000000&quot; /&gt;\r\n            &lt;/shape&gt;\r\n        &lt;/rotate&gt;\r\n    &lt;/item&gt;\r\n    &lt;item android:right=&quot;10dp&quot;&gt;\r\n        &lt;shape android:shape=&quot;rectangle&quot;&gt;\r\n            &lt;corners android:radius=&quot;4dp&quot; /&gt;\r\n            &lt;padding\r\n                android:bottom=&quot;1px&quot;\r\n                android:left=&quot;1px&quot;\r\n                android:right=&quot;1px&quot; /&gt;\r\n            &lt;solid android:color=&quot;#01000000&quot; /&gt;\r\n        &lt;/shape&gt;\r\n    &lt;/item&gt;\r\n\r\n    &lt;!--===============--&gt;\r\n\r\n    &lt;item&gt;\r\n        &lt;rotate\r\n            android:fromDegrees=&quot;40&quot;\r\n            android:pivotX=&quot;100%&quot;\r\n            android:pivotY=&quot;0%&quot;\r\n            android:toDegrees=&quot;0&quot;&gt;\r\n            &lt;shape android:shape=&quot;rectangle&quot;&gt;\r\n                &lt;corners android:radius=&quot;4dp&quot; /&gt;\r\n                &lt;padding android:bottom=&quot;1px&quot; /&gt;\r\n                &lt;solid android:color=&quot;#09000000&quot; /&gt;\r\n            &lt;/shape&gt;\r\n        &lt;/rotate&gt;\r\n    &lt;/item&gt;\r\n    &lt;item android:right=&quot;10dp&quot;&gt;\r\n        &lt;shape android:shape=&quot;rectangle&quot;&gt;\r\n            &lt;corners android:radius=&quot;4dp&quot; /&gt;\r\n            &lt;padding android:bottom=&quot;1px&quot; /&gt;\r\n            &lt;solid android:color=&quot;#09000000&quot; /&gt;\r\n        &lt;/shape&gt;\r\n    &lt;/item&gt;\r\n\r\n    &lt;!--===============--&gt;\r\n\r\n    &lt;item&gt;\r\n        &lt;rotate\r\n            android:fromDegrees=&quot;40&quot;\r\n            android:pivotX=&quot;100%&quot;\r\n            android:pivotY=&quot;0%&quot;\r\n            android:toDegrees=&quot;0&quot;&gt;\r\n            &lt;shape android:shape=&quot;rectangle&quot;&gt;\r\n                &lt;corners android:radius=&quot;4dp&quot; /&gt;\r\n                &lt;padding\r\n                    android:bottom=&quot;1px&quot;\r\n                    android:left=&quot;1px&quot;\r\n                    android:right=&quot;1px&quot; /&gt;\r\n                &lt;solid android:color=&quot;#10000000&quot; /&gt;\r\n            &lt;/shape&gt;\r\n        &lt;/rotate&gt;\r\n    &lt;/item&gt;\r\n    &lt;item android:right=&quot;10dp&quot;&gt;\r\n        &lt;shape android:shape=&quot;rectangle&quot;&gt;\r\n            &lt;corners android:radius=&quot;4dp&quot; /&gt;\r\n            &lt;padding\r\n                android:bottom=&quot;1px&quot;\r\n                android:left=&quot;1px&quot;\r\n                android:right=&quot;1px&quot; /&gt;\r\n            &lt;solid android:color=&quot;#10000000&quot; /&gt;\r\n        &lt;/shape&gt;\r\n    &lt;/item&gt;\r\n\r\n    &lt;!--===============--&gt;\r\n\r\n\r\n    &lt;!--ForeGround--&gt;\r\n\r\n    &lt;item&gt;\r\n        &lt;rotate\r\n            android:fromDegrees=&quot;40&quot;\r\n            android:pivotX=&quot;100%&quot;\r\n            android:pivotY=&quot;0%&quot;\r\n            android:toDegrees=&quot;0&quot;&gt;\r\n            &lt;shape android:shape=&quot;rectangle&quot;&gt;\r\n                &lt;solid android:color=&quot;#CBEBFC&quot; /&gt;\r\n            &lt;/shape&gt;\r\n        &lt;/rotate&gt;\r\n    &lt;/item&gt;\r\n    &lt;item android:right=&quot;10dp&quot;&gt;\r\n        &lt;shape android:shape=&quot;rectangle&quot;&gt;\r\n            &lt;solid android:color=&quot;#CBEBFC&quot; /&gt;\r\n            &lt;corners android:radius=&quot;4dp&quot; /&gt;\r\n        &lt;/shape&gt;\r\n    &lt;/item&gt;\r\n\r\n    &lt;/layer-list&gt;\r\n\r\n\r\nUse the paddings properly in the layout. I used these values : \r\n\r\n    &lt;TextView\r\n        android:id=&quot;@+id/text_message_incoming&quot;\r\n        android:layout_width=&quot;0dp&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:background=&quot;@drawable/bg_speech_bubble_incoming&quot;\r\n        android:lineSpacingExtra=&quot;2dp&quot;\r\n        android:paddingLeft=&quot;20dp&quot;\r\n        android:paddingTop=&quot;4dp&quot;\r\n        android:paddingRight=&quot;10dp&quot;\r\n        android:paddingBottom=&quot;10dp&quot;\r\n        android:text=&quot;Hi, How are you?&quot;\r\n        android:textColor=&quot;@color/colorBlack&quot;\r\n        android:textSize=&quot;13.5dp&quot;\r\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n        app:layout_constraintTop_toTopOf=&quot;parent&quot;\r\n        app:layout_constraintWidth_max=&quot;wrap&quot;\r\n        app:layout_constraintWidth_percent=&quot;0.8&quot; /&gt;\r\n\r\nMy output came out like this:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/z4qjz.png","title":"Android drawable speech bubble","body":"<p>I know its bit too late for this. For those, who don't want to use 9-patch images yet want to cast shadows from speech bubble. This is closest I could get to WhatsApp speech bubble. And thanks to @toobsco42 for the answer above.</p>\n\n<p>Here you go..</p>\n\n<p>Incoming Speech Bubble :</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;layer-list xmlns:android=\"http://schemas.android.com/apk/res/android\"&gt;\n\n&lt;!--Shadow Layers--&gt;\n\n&lt;item&gt;\n    &lt;rotate\n        android:fromDegrees=\"-35\"\n        android:pivotX=\"0%\"\n        android:pivotY=\"0%\"\n        android:toDegrees=\"0\"&gt;\n        &lt;shape android:shape=\"rectangle\"&gt;\n            &lt;corners android:radius=\"4dp\"/&gt;\n            &lt;padding\n                android:bottom=\"1px\"\n                android:left=\"1px\"\n                android:right=\"1px\"/&gt;\n            &lt;solid android:color=\"#01000000\" /&gt;\n        &lt;/shape&gt;\n    &lt;/rotate&gt;\n&lt;/item&gt;\n&lt;item android:left=\"8dp\"&gt;\n    &lt;shape android:shape=\"rectangle\"&gt;\n        &lt;padding\n            android:bottom=\"1px\"\n            android:left=\"1px\"\n            android:right=\"1px\"/&gt;\n        &lt;solid android:color=\"#01000000\" /&gt;\n        &lt;corners android:radius=\"8dp\" /&gt;\n    &lt;/shape&gt;\n&lt;/item&gt;\n\n&lt;!--===============--&gt;\n&lt;item&gt;\n    &lt;rotate\n        android:fromDegrees=\"-35\"\n        android:pivotX=\"0%\"\n        android:pivotY=\"0%\"\n        android:toDegrees=\"0\"&gt;\n        &lt;shape android:shape=\"rectangle\"&gt;\n            &lt;corners android:radius=\"4dp\"/&gt;\n            &lt;padding\n                android:bottom=\"1px\" /&gt;\n            &lt;solid android:color=\"#09000000\" /&gt;\n        &lt;/shape&gt;\n    &lt;/rotate&gt;\n&lt;/item&gt;\n&lt;item android:left=\"8dp\"&gt;\n    &lt;shape android:shape=\"rectangle\"&gt;\n        &lt;padding\n            android:bottom=\"1px\" /&gt;\n        &lt;solid android:color=\"#09000000\" /&gt;\n        &lt;corners android:radius=\"8dp\" /&gt;\n    &lt;/shape&gt;\n&lt;/item&gt;\n\n&lt;!--===============--&gt;\n\n&lt;item&gt;\n    &lt;rotate\n        android:fromDegrees=\"-35\"\n        android:pivotX=\"0%\"\n        android:pivotY=\"0%\"\n        android:toDegrees=\"0\"&gt;\n        &lt;shape android:shape=\"rectangle\"&gt;\n            &lt;corners android:radius=\"4dp\"/&gt;\n            &lt;padding\n                android:bottom=\"1px\"\n                android:left=\"1px\"\n                android:right=\"1px\"/&gt;\n            &lt;solid android:color=\"#10000000\" /&gt;\n        &lt;/shape&gt;\n    &lt;/rotate&gt;\n&lt;/item&gt;\n&lt;item android:left=\"8dp\"&gt;\n    &lt;shape android:shape=\"rectangle\"&gt;\n        &lt;padding\n            android:bottom=\"1px\"\n            android:left=\"1px\"\n            android:right=\"1px\"/&gt;\n        &lt;solid android:color=\"#10000000\" /&gt;\n        &lt;corners android:radius=\"8dp\" /&gt;\n    &lt;/shape&gt;\n&lt;/item&gt;\n\n&lt;!--ForeGround--&gt;\n\n&lt;item&gt;\n    &lt;rotate\n        android:fromDegrees=\"-35\"\n        android:pivotX=\"0%\"\n        android:pivotY=\"0%\"\n        android:toDegrees=\"0\"&gt;\n        &lt;shape android:shape=\"rectangle\"&gt;\n            &lt;corners android:radius=\"4dp\"/&gt;\n            &lt;solid android:color=\"@color/colorWhite\" /&gt;\n        &lt;/shape&gt;\n    &lt;/rotate&gt;\n&lt;/item&gt;\n&lt;item android:left=\"8dp\"&gt;\n    &lt;shape android:shape=\"rectangle\"&gt;\n        &lt;solid android:color=\"@color/colorWhite\" /&gt;\n        &lt;corners android:radius=\"8dp\" /&gt;\n    &lt;/shape&gt;\n&lt;/item&gt;\n\n&lt;/layer-list&gt;\n</code></pre>\n\n<p>Outgoing Speech Bubble :</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;layer-list xmlns:android=\"http://schemas.android.com/apk/res/android\"&gt;\n\n&lt;!--Shadow Layer--&gt;\n\n&lt;item&gt;\n    &lt;rotate\n        android:fromDegrees=\"40\"\n        android:pivotX=\"100%\"\n        android:pivotY=\"0%\"\n        android:toDegrees=\"0\"&gt;\n        &lt;shape android:shape=\"rectangle\"&gt;\n            &lt;corners android:radius=\"4dp\" /&gt;\n            &lt;padding\n                android:bottom=\"1px\"\n                android:left=\"1px\"\n                android:right=\"1px\" /&gt;\n            &lt;solid android:color=\"#01000000\" /&gt;\n        &lt;/shape&gt;\n    &lt;/rotate&gt;\n&lt;/item&gt;\n&lt;item android:right=\"10dp\"&gt;\n    &lt;shape android:shape=\"rectangle\"&gt;\n        &lt;corners android:radius=\"4dp\" /&gt;\n        &lt;padding\n            android:bottom=\"1px\"\n            android:left=\"1px\"\n            android:right=\"1px\" /&gt;\n        &lt;solid android:color=\"#01000000\" /&gt;\n    &lt;/shape&gt;\n&lt;/item&gt;\n\n&lt;!--===============--&gt;\n\n&lt;item&gt;\n    &lt;rotate\n        android:fromDegrees=\"40\"\n        android:pivotX=\"100%\"\n        android:pivotY=\"0%\"\n        android:toDegrees=\"0\"&gt;\n        &lt;shape android:shape=\"rectangle\"&gt;\n            &lt;corners android:radius=\"4dp\" /&gt;\n            &lt;padding android:bottom=\"1px\" /&gt;\n            &lt;solid android:color=\"#09000000\" /&gt;\n        &lt;/shape&gt;\n    &lt;/rotate&gt;\n&lt;/item&gt;\n&lt;item android:right=\"10dp\"&gt;\n    &lt;shape android:shape=\"rectangle\"&gt;\n        &lt;corners android:radius=\"4dp\" /&gt;\n        &lt;padding android:bottom=\"1px\" /&gt;\n        &lt;solid android:color=\"#09000000\" /&gt;\n    &lt;/shape&gt;\n&lt;/item&gt;\n\n&lt;!--===============--&gt;\n\n&lt;item&gt;\n    &lt;rotate\n        android:fromDegrees=\"40\"\n        android:pivotX=\"100%\"\n        android:pivotY=\"0%\"\n        android:toDegrees=\"0\"&gt;\n        &lt;shape android:shape=\"rectangle\"&gt;\n            &lt;corners android:radius=\"4dp\" /&gt;\n            &lt;padding\n                android:bottom=\"1px\"\n                android:left=\"1px\"\n                android:right=\"1px\" /&gt;\n            &lt;solid android:color=\"#10000000\" /&gt;\n        &lt;/shape&gt;\n    &lt;/rotate&gt;\n&lt;/item&gt;\n&lt;item android:right=\"10dp\"&gt;\n    &lt;shape android:shape=\"rectangle\"&gt;\n        &lt;corners android:radius=\"4dp\" /&gt;\n        &lt;padding\n            android:bottom=\"1px\"\n            android:left=\"1px\"\n            android:right=\"1px\" /&gt;\n        &lt;solid android:color=\"#10000000\" /&gt;\n    &lt;/shape&gt;\n&lt;/item&gt;\n\n&lt;!--===============--&gt;\n\n\n&lt;!--ForeGround--&gt;\n\n&lt;item&gt;\n    &lt;rotate\n        android:fromDegrees=\"40\"\n        android:pivotX=\"100%\"\n        android:pivotY=\"0%\"\n        android:toDegrees=\"0\"&gt;\n        &lt;shape android:shape=\"rectangle\"&gt;\n            &lt;solid android:color=\"#CBEBFC\" /&gt;\n        &lt;/shape&gt;\n    &lt;/rotate&gt;\n&lt;/item&gt;\n&lt;item android:right=\"10dp\"&gt;\n    &lt;shape android:shape=\"rectangle\"&gt;\n        &lt;solid android:color=\"#CBEBFC\" /&gt;\n        &lt;corners android:radius=\"4dp\" /&gt;\n    &lt;/shape&gt;\n&lt;/item&gt;\n\n&lt;/layer-list&gt;\n</code></pre>\n\n<p>Use the paddings properly in the layout. I used these values : </p>\n\n<pre><code>&lt;TextView\n    android:id=\"@+id/text_message_incoming\"\n    android:layout_width=\"0dp\"\n    android:layout_height=\"wrap_content\"\n    android:background=\"@drawable/bg_speech_bubble_incoming\"\n    android:lineSpacingExtra=\"2dp\"\n    android:paddingLeft=\"20dp\"\n    android:paddingTop=\"4dp\"\n    android:paddingRight=\"10dp\"\n    android:paddingBottom=\"10dp\"\n    android:text=\"Hi, How are you?\"\n    android:textColor=\"@color/colorBlack\"\n    android:textSize=\"13.5dp\"\n    app:layout_constraintStart_toStartOf=\"parent\"\n    app:layout_constraintTop_toTopOf=\"parent\"\n    app:layout_constraintWidth_max=\"wrap\"\n    app:layout_constraintWidth_percent=\"0.8\" /&gt;\n</code></pre>\n\n<p>My output came out like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/z4qjz.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/z4qjz.png\" alt=\"enter image description here\"></a></p>\n"},{"tags":[],"owner":{"account_id":3443585,"reputation":3422,"user_id":2884893,"display_name":"The Billionaire Guy"},"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1613251975,"creation_date":1592687786,"answer_id":62491774,"question_id":7974847,"body_markdown":"just in case anyone needs another style of bubble here you go tnx @vipin Negi\r\n\r\n   \r\nchat_receiver_bubble.xml\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;layer-list xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;\r\n    \r\n        &lt;!--Shadow Layer--&gt;\r\n    \r\n    \r\n        &lt;item android:right=&quot;10dp&quot;&gt;\r\n            &lt;shape android:shape=&quot;rectangle&quot;&gt;\r\n                &lt;corners android:radius=&quot;100dp&quot; /&gt;\r\n                &lt;padding\r\n                    android:bottom=&quot;1px&quot;\r\n                    android:left=&quot;1px&quot;\r\n                    android:right=&quot;1px&quot; /&gt;\r\n                &lt;solid android:color=&quot;#01000000&quot; /&gt;\r\n            &lt;/shape&gt;\r\n        &lt;/item&gt;\r\n    \r\n        &lt;!--===============--&gt;\r\n    \r\n    \r\n        &lt;item android:right=&quot;10dp&quot;&gt;\r\n            &lt;shape android:shape=&quot;rectangle&quot;&gt;\r\n                &lt;corners android:radius=&quot;100dp&quot; /&gt;\r\n                &lt;padding android:bottom=&quot;1px&quot; /&gt;\r\n                &lt;solid android:color=&quot;#09000000&quot; /&gt;\r\n            &lt;/shape&gt;\r\n        &lt;/item&gt;\r\n    \r\n        &lt;!--===============--&gt;\r\n    \r\n    \r\n        &lt;item android:right=&quot;10dp&quot;&gt;\r\n            &lt;shape android:shape=&quot;rectangle&quot;&gt;\r\n                &lt;corners android:radius=&quot;100dp&quot; /&gt;\r\n                &lt;padding\r\n                    android:bottom=&quot;1px&quot;\r\n                    android:left=&quot;1px&quot;\r\n                    android:right=&quot;1px&quot; /&gt;\r\n                &lt;solid android:color=&quot;#10000000&quot; /&gt;\r\n            &lt;/shape&gt;\r\n        &lt;/item&gt;\r\n    \r\n        &lt;!--===============--&gt;\r\n    \r\n    \r\n        &lt;!--ForeGround--&gt;\r\n    \r\n    \r\n        &lt;item android:right=&quot;10dp&quot;&gt;\r\n            &lt;shape android:shape=&quot;rectangle&quot;&gt;\r\n                &lt;solid android:color=&quot;@color/app_color&quot; /&gt;\r\n                &lt;corners android:bottomLeftRadius=&quot;0dp&quot; android:radius=&quot;100dp&quot; /&gt;\r\n            &lt;/shape&gt;\r\n        &lt;/item&gt;\r\n    \r\n    &lt;/layer-list&gt;\r\n\r\n\r\nchat_sender_bubble.xml\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n        &lt;layer-list xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;\r\n\r\n        &lt;!--Shadow Layer--&gt;\r\n\r\n\r\n        &lt;item android:right=&quot;10dp&quot;&gt;\r\n            &lt;shape android:shape=&quot;rectangle&quot;&gt;\r\n                &lt;corners android:radius=&quot;100dp&quot; /&gt;\r\n                &lt;padding\r\n                    android:bottom=&quot;1px&quot;\r\n                    android:left=&quot;1px&quot;\r\n                    android:right=&quot;1px&quot; /&gt;\r\n                &lt;solid android:color=&quot;#01000000&quot; /&gt;\r\n                    &lt;/shape&gt;\r\n        &lt;/item&gt;\r\n\r\n        &lt;!--===============--&gt;\r\n\r\n\r\n        &lt;item android:right=&quot;10dp&quot;&gt;\r\n            &lt;shape android:shape=&quot;rectangle&quot;&gt;\r\n                &lt;corners android:radius=&quot;100dp&quot; /&gt;\r\n                &lt;padding android:bottom=&quot;1px&quot; /&gt;\r\n                &lt;solid android:color=&quot;#09000000&quot; /&gt;\r\n            &lt;/shape&gt;\r\n        &lt;/item&gt;\r\n\r\n        &lt;!--===============--&gt;\r\n\r\n\r\n        &lt;item android:right=&quot;10dp&quot;&gt;\r\n            &lt;shape android:shape=&quot;rectangle&quot;&gt;\r\n                &lt;corners android:radius=&quot;100dp&quot; /&gt;\r\n                &lt;padding\r\n                    android:bottom=&quot;1px&quot;\r\n                    android:left=&quot;1px&quot;\r\n                    android:right=&quot;1px&quot; /&gt;\r\n                &lt;solid android:color=&quot;#10000000&quot; /&gt;\r\n            &lt;/shape&gt;\r\n        &lt;/item&gt;\r\n\r\n        &lt;!--===============--&gt;\r\n\r\n\r\n        &lt;!--ForeGround--&gt;\r\n\r\n\r\n        &lt;item android:right=&quot;10dp&quot;&gt;\r\n            &lt;shape android:shape=&quot;rectangle&quot;&gt;\r\n                &lt;solid android:color=&quot;@color/settings_bg&quot; /&gt;\r\n                &lt;corners android:bottomRightRadius=&quot;0dp&quot; android:radius=&quot;100dp&quot; /&gt;\r\n            &lt;/shape&gt;\r\n        &lt;/item&gt;\r\n\r\n    &lt;/layer-list&gt;\r\n\r\nuse like this \r\n\r\n    &lt;RelativeLayout\r\n                android:gravity=&quot;center&quot;\r\n                android:id=&quot;@+id/chatLayout&quot;\r\n                android:background=&quot;@drawable/chat_receiver_bubble&quot; //or @drawable/chat_sender_bubble\r\n                android:visibility=&quot;gone&quot;\r\n                android:layout_width=&quot;wrap_content&quot;\r\n                android:layout_height=&quot;wrap_content&quot;&gt;\r\n                &lt;TextView\r\n                    android:textSize=&quot;14sp&quot;\r\n                    android:textColor=&quot;@color/text_colour&quot;\r\n                    android:id=&quot;@+id/message&quot;\r\n                    android:layout_width=&quot;wrap_content&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:layout_margin=&quot;10dp&quot;\r\n                    android:text=&quot;&quot;\r\n                    android:fontFamily=&quot;@font/regular&quot;/&gt;\r\n            &lt;/RelativeLayout&gt;\r\n\r\n\r\n final look\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/mV4ig.png","title":"Android drawable speech bubble","body":"<p>just in case anyone needs another style of bubble here you go tnx @vipin Negi</p>\n<p>chat_receiver_bubble.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;layer-list xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;\n\n    &lt;!--Shadow Layer--&gt;\n\n\n    &lt;item android:right=&quot;10dp&quot;&gt;\n        &lt;shape android:shape=&quot;rectangle&quot;&gt;\n            &lt;corners android:radius=&quot;100dp&quot; /&gt;\n            &lt;padding\n                android:bottom=&quot;1px&quot;\n                android:left=&quot;1px&quot;\n                android:right=&quot;1px&quot; /&gt;\n            &lt;solid android:color=&quot;#01000000&quot; /&gt;\n        &lt;/shape&gt;\n    &lt;/item&gt;\n\n    &lt;!--===============--&gt;\n\n\n    &lt;item android:right=&quot;10dp&quot;&gt;\n        &lt;shape android:shape=&quot;rectangle&quot;&gt;\n            &lt;corners android:radius=&quot;100dp&quot; /&gt;\n            &lt;padding android:bottom=&quot;1px&quot; /&gt;\n            &lt;solid android:color=&quot;#09000000&quot; /&gt;\n        &lt;/shape&gt;\n    &lt;/item&gt;\n\n    &lt;!--===============--&gt;\n\n\n    &lt;item android:right=&quot;10dp&quot;&gt;\n        &lt;shape android:shape=&quot;rectangle&quot;&gt;\n            &lt;corners android:radius=&quot;100dp&quot; /&gt;\n            &lt;padding\n                android:bottom=&quot;1px&quot;\n                android:left=&quot;1px&quot;\n                android:right=&quot;1px&quot; /&gt;\n            &lt;solid android:color=&quot;#10000000&quot; /&gt;\n        &lt;/shape&gt;\n    &lt;/item&gt;\n\n    &lt;!--===============--&gt;\n\n\n    &lt;!--ForeGround--&gt;\n\n\n    &lt;item android:right=&quot;10dp&quot;&gt;\n        &lt;shape android:shape=&quot;rectangle&quot;&gt;\n            &lt;solid android:color=&quot;@color/app_color&quot; /&gt;\n            &lt;corners android:bottomLeftRadius=&quot;0dp&quot; android:radius=&quot;100dp&quot; /&gt;\n        &lt;/shape&gt;\n    &lt;/item&gt;\n\n&lt;/layer-list&gt;\n</code></pre>\n<p>chat_sender_bubble.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n    &lt;layer-list xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;\n\n    &lt;!--Shadow Layer--&gt;\n\n\n    &lt;item android:right=&quot;10dp&quot;&gt;\n        &lt;shape android:shape=&quot;rectangle&quot;&gt;\n            &lt;corners android:radius=&quot;100dp&quot; /&gt;\n            &lt;padding\n                android:bottom=&quot;1px&quot;\n                android:left=&quot;1px&quot;\n                android:right=&quot;1px&quot; /&gt;\n            &lt;solid android:color=&quot;#01000000&quot; /&gt;\n                &lt;/shape&gt;\n    &lt;/item&gt;\n\n    &lt;!--===============--&gt;\n\n\n    &lt;item android:right=&quot;10dp&quot;&gt;\n        &lt;shape android:shape=&quot;rectangle&quot;&gt;\n            &lt;corners android:radius=&quot;100dp&quot; /&gt;\n            &lt;padding android:bottom=&quot;1px&quot; /&gt;\n            &lt;solid android:color=&quot;#09000000&quot; /&gt;\n        &lt;/shape&gt;\n    &lt;/item&gt;\n\n    &lt;!--===============--&gt;\n\n\n    &lt;item android:right=&quot;10dp&quot;&gt;\n        &lt;shape android:shape=&quot;rectangle&quot;&gt;\n            &lt;corners android:radius=&quot;100dp&quot; /&gt;\n            &lt;padding\n                android:bottom=&quot;1px&quot;\n                android:left=&quot;1px&quot;\n                android:right=&quot;1px&quot; /&gt;\n            &lt;solid android:color=&quot;#10000000&quot; /&gt;\n        &lt;/shape&gt;\n    &lt;/item&gt;\n\n    &lt;!--===============--&gt;\n\n\n    &lt;!--ForeGround--&gt;\n\n\n    &lt;item android:right=&quot;10dp&quot;&gt;\n        &lt;shape android:shape=&quot;rectangle&quot;&gt;\n            &lt;solid android:color=&quot;@color/settings_bg&quot; /&gt;\n            &lt;corners android:bottomRightRadius=&quot;0dp&quot; android:radius=&quot;100dp&quot; /&gt;\n        &lt;/shape&gt;\n    &lt;/item&gt;\n\n&lt;/layer-list&gt;\n</code></pre>\n<p>use like this</p>\n<pre><code>&lt;RelativeLayout\n            android:gravity=&quot;center&quot;\n            android:id=&quot;@+id/chatLayout&quot;\n            android:background=&quot;@drawable/chat_receiver_bubble&quot; //or @drawable/chat_sender_bubble\n            android:visibility=&quot;gone&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;&gt;\n            &lt;TextView\n                android:textSize=&quot;14sp&quot;\n                android:textColor=&quot;@color/text_colour&quot;\n                android:id=&quot;@+id/message&quot;\n                android:layout_width=&quot;wrap_content&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:layout_margin=&quot;10dp&quot;\n                android:text=&quot;&quot;\n                android:fontFamily=&quot;@font/regular&quot;/&gt;\n        &lt;/RelativeLayout&gt;\n</code></pre>\n<p>final look</p>\n<p><a href=\"https://i.stack.imgur.com/mV4ig.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/mV4ig.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":[],"owner":{"account_id":18609283,"reputation":91,"user_id":13562154,"display_name":"user13562154"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1593617178,"creation_date":1593617178,"answer_id":62680174,"question_id":7974847,"body_markdown":"Here I have created for incoming and outgoing messages by following this  [https://stackoverflow.com/questions/45883114/android-make-oval-background-drawable-with-chat-corner][1]\r\n\r\nitemincoming.xml\r\n\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;RelativeLayout\r\n        xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n        xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        app:cardElevation=&quot;1dp&quot;\r\n        android:layout_margin=&quot;2dp&quot;\r\n        android:layout_height=&quot;wrap_content&quot;&gt;\r\n    \r\n        &lt;RelativeLayout\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;wrap_content&quot;&gt;\r\n            &lt;LinearLayout\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:layout_gravity=&quot;center&quot;\r\n                android:layout_margin=&quot;16dp&quot;\r\n                android:orientation=&quot;vertical&quot;&gt;\r\n    \r\n                &lt;TextView\r\n                    android:layout_width=&quot;wrap_content&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:text=&quot;Hii how are you ?  11:37&quot;\r\n                    android:paddingStart=&quot;16dp&quot;\r\n                    android:paddingTop=&quot;10dp&quot;\r\n                    android:paddingEnd=&quot;12dp&quot;\r\n                    android:paddingBottom=&quot;8dp&quot;\r\n                    android:textColor=&quot;@color/white&quot;\r\n                    android:background=&quot;@drawable/testrect&quot;/&gt;\r\n    \r\n                &lt;ImageView\r\n                    android:layout_marginTop=&quot;-1.5dp&quot;\r\n                    android:layout_width=&quot;8dp&quot;\r\n                    android:layout_height=&quot;16dp&quot;\r\n                    android:layout_gravity=&quot;start&quot;\r\n                    android:background=&quot;@drawable/testcorner&quot;\r\n                    /&gt;\r\n    \r\n            &lt;/LinearLayout&gt;\r\n    \r\n    \r\n        &lt;/RelativeLayout&gt;\r\n    &lt;/RelativeLayout&gt;\r\n\r\n\r\ntestrect.xml\r\n\r\n\r\n\r\n    &lt;shape xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        android:shape=&quot;rectangle&quot;&gt;\r\n        &lt;solid android:color=&quot;#E26841&quot; /&gt;\r\n        &lt;corners\r\n            android:bottomRightRadius=&quot;5dp&quot;\r\n            android:topLeftRadius=&quot;5dp&quot;\r\n            android:topRightRadius=&quot;5dp&quot;/&gt;\r\n    \r\n    &lt;/shape&gt;\r\n\r\n\r\n\r\ntestcorner.xml\r\n\r\n\r\n\r\n    &lt;layer-list xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;\r\n        &lt;item&gt;\r\n            &lt;rotate\r\n                android:fromDegrees=&quot;45&quot;\r\n                android:pivotX=&quot;135%&quot;\r\n                android:pivotY=&quot;15%&quot;\r\n                android:toDegrees=&quot;45&quot;\r\n                &gt;\r\n                &lt;shape android:shape=&quot;rectangle&quot;&gt;\r\n                    &lt;solid android:color=&quot;#E26841&quot;/&gt;\r\n    \r\n                &lt;/shape&gt;\r\n            &lt;/rotate&gt;\r\n        &lt;/item&gt;\r\n    &lt;/layer-list&gt;\r\n\r\n\r\noutgoing.xml\r\n\r\n\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;RelativeLayout\r\n        xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n        xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        app:cardElevation=&quot;1dp&quot;\r\n        android:layout_margin=&quot;2dp&quot;\r\n        android:layout_height=&quot;wrap_content&quot;&gt;\r\n    \r\n        &lt;RelativeLayout\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;wrap_content&quot;&gt;\r\n            &lt;LinearLayout\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:layout_gravity=&quot;center&quot;\r\n                android:layout_margin=&quot;16dp&quot;\r\n                android:orientation=&quot;vertical&quot;&gt;\r\n    \r\n                &lt;TextView\r\n                    android:layout_width=&quot;wrap_content&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:layout_gravity=&quot;end&quot;\r\n                    android:text=&quot;11:37 Hii how are you ?&quot;\r\n                    android:paddingStart=&quot;16dp&quot;\r\n                    android:paddingTop=&quot;10dp&quot;\r\n                    android:paddingEnd=&quot;12dp&quot;\r\n                    android:paddingBottom=&quot;8dp&quot;\r\n                    android:textColor=&quot;@color/txtcolor_commn&quot;\r\n                    android:background=&quot;@drawable/testrecty&quot;/&gt;\r\n    \r\n                &lt;ImageView\r\n                    android:layout_marginTop=&quot;-4.5dp&quot;\r\n                    android:layout_marginRight=&quot;4.5dp&quot;\r\n                    android:layout_width=&quot;8dp&quot;\r\n                    android:layout_height=&quot;16dp&quot;\r\n                    android:layout_gravity=&quot;end&quot;\r\n                    android:rotation=&quot;90&quot;\r\n                    android:background=&quot;@drawable/testcornery&quot;\r\n                    /&gt;\r\n    \r\n            &lt;/LinearLayout&gt;\r\n    \r\n        &lt;/RelativeLayout&gt;\r\n    &lt;/RelativeLayout&gt;\r\n\r\n\r\n\r\ntestrecty.xml\r\n\r\n\r\n\r\n\r\n    &lt;shape xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        android:shape=&quot;rectangle&quot;&gt;\r\n        &lt;solid android:color=&quot;@color/white&quot; /&gt;\r\n        &lt;corners\r\n            android:bottomLeftRadius=&quot;5dp&quot;\r\n            android:topLeftRadius=&quot;5dp&quot;\r\n            android:topRightRadius=&quot;5dp&quot;/&gt;\r\n    \r\n    &lt;/shape&gt;\r\n\r\n\r\n\r\ntestcornery.xml\r\n\r\n\r\n\r\n    &lt;layer-list xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;\r\n        &lt;item&gt;\r\n            &lt;rotate\r\n                android:fromDegrees=&quot;45&quot;\r\n                android:pivotX=&quot;135%&quot;\r\n                android:pivotY=&quot;15%&quot;\r\n                android:toDegrees=&quot;45&quot;\r\n                &gt;\r\n                &lt;shape android:shape=&quot;rectangle&quot;&gt;\r\n                    &lt;solid android:color=&quot;@color/white&quot;/&gt;\r\n    \r\n                &lt;/shape&gt;\r\n            &lt;/rotate&gt;\r\n        &lt;/item&gt;\r\n    &lt;/layer-list&gt;\r\n\r\n\r\nnow its look like this\r\n\r\n\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/45883114/android-make-oval-background-drawable-with-chat-corner\r\n  [2]: https://i.stack.imgur.com/MVodA.png","title":"Android drawable speech bubble","body":"<p>Here I have created for incoming and outgoing messages by following this  <a href=\"https://stackoverflow.com/questions/45883114/android-make-oval-background-drawable-with-chat-corner\">Android make oval background drawable with chat corner</a></p>\n<p>itemincoming.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;RelativeLayout\n    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:layout_width=&quot;match_parent&quot;\n    app:cardElevation=&quot;1dp&quot;\n    android:layout_margin=&quot;2dp&quot;\n    android:layout_height=&quot;wrap_content&quot;&gt;\n\n    &lt;RelativeLayout\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;&gt;\n        &lt;LinearLayout\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:layout_gravity=&quot;center&quot;\n            android:layout_margin=&quot;16dp&quot;\n            android:orientation=&quot;vertical&quot;&gt;\n\n            &lt;TextView\n                android:layout_width=&quot;wrap_content&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:text=&quot;Hii how are you ?  11:37&quot;\n                android:paddingStart=&quot;16dp&quot;\n                android:paddingTop=&quot;10dp&quot;\n                android:paddingEnd=&quot;12dp&quot;\n                android:paddingBottom=&quot;8dp&quot;\n                android:textColor=&quot;@color/white&quot;\n                android:background=&quot;@drawable/testrect&quot;/&gt;\n\n            &lt;ImageView\n                android:layout_marginTop=&quot;-1.5dp&quot;\n                android:layout_width=&quot;8dp&quot;\n                android:layout_height=&quot;16dp&quot;\n                android:layout_gravity=&quot;start&quot;\n                android:background=&quot;@drawable/testcorner&quot;\n                /&gt;\n\n        &lt;/LinearLayout&gt;\n\n\n    &lt;/RelativeLayout&gt;\n&lt;/RelativeLayout&gt;\n</code></pre>\n<p>testrect.xml</p>\n<pre><code>&lt;shape xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    android:shape=&quot;rectangle&quot;&gt;\n    &lt;solid android:color=&quot;#E26841&quot; /&gt;\n    &lt;corners\n        android:bottomRightRadius=&quot;5dp&quot;\n        android:topLeftRadius=&quot;5dp&quot;\n        android:topRightRadius=&quot;5dp&quot;/&gt;\n\n&lt;/shape&gt;\n</code></pre>\n<p>testcorner.xml</p>\n<pre><code>&lt;layer-list xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;\n    &lt;item&gt;\n        &lt;rotate\n            android:fromDegrees=&quot;45&quot;\n            android:pivotX=&quot;135%&quot;\n            android:pivotY=&quot;15%&quot;\n            android:toDegrees=&quot;45&quot;\n            &gt;\n            &lt;shape android:shape=&quot;rectangle&quot;&gt;\n                &lt;solid android:color=&quot;#E26841&quot;/&gt;\n\n            &lt;/shape&gt;\n        &lt;/rotate&gt;\n    &lt;/item&gt;\n&lt;/layer-list&gt;\n</code></pre>\n<p>outgoing.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;RelativeLayout\n    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:layout_width=&quot;match_parent&quot;\n    app:cardElevation=&quot;1dp&quot;\n    android:layout_margin=&quot;2dp&quot;\n    android:layout_height=&quot;wrap_content&quot;&gt;\n\n    &lt;RelativeLayout\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;&gt;\n        &lt;LinearLayout\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:layout_gravity=&quot;center&quot;\n            android:layout_margin=&quot;16dp&quot;\n            android:orientation=&quot;vertical&quot;&gt;\n\n            &lt;TextView\n                android:layout_width=&quot;wrap_content&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:layout_gravity=&quot;end&quot;\n                android:text=&quot;11:37 Hii how are you ?&quot;\n                android:paddingStart=&quot;16dp&quot;\n                android:paddingTop=&quot;10dp&quot;\n                android:paddingEnd=&quot;12dp&quot;\n                android:paddingBottom=&quot;8dp&quot;\n                android:textColor=&quot;@color/txtcolor_commn&quot;\n                android:background=&quot;@drawable/testrecty&quot;/&gt;\n\n            &lt;ImageView\n                android:layout_marginTop=&quot;-4.5dp&quot;\n                android:layout_marginRight=&quot;4.5dp&quot;\n                android:layout_width=&quot;8dp&quot;\n                android:layout_height=&quot;16dp&quot;\n                android:layout_gravity=&quot;end&quot;\n                android:rotation=&quot;90&quot;\n                android:background=&quot;@drawable/testcornery&quot;\n                /&gt;\n\n        &lt;/LinearLayout&gt;\n\n    &lt;/RelativeLayout&gt;\n&lt;/RelativeLayout&gt;\n</code></pre>\n<p>testrecty.xml</p>\n<pre><code>&lt;shape xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    android:shape=&quot;rectangle&quot;&gt;\n    &lt;solid android:color=&quot;@color/white&quot; /&gt;\n    &lt;corners\n        android:bottomLeftRadius=&quot;5dp&quot;\n        android:topLeftRadius=&quot;5dp&quot;\n        android:topRightRadius=&quot;5dp&quot;/&gt;\n\n&lt;/shape&gt;\n</code></pre>\n<p>testcornery.xml</p>\n<pre><code>&lt;layer-list xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;\n    &lt;item&gt;\n        &lt;rotate\n            android:fromDegrees=&quot;45&quot;\n            android:pivotX=&quot;135%&quot;\n            android:pivotY=&quot;15%&quot;\n            android:toDegrees=&quot;45&quot;\n            &gt;\n            &lt;shape android:shape=&quot;rectangle&quot;&gt;\n                &lt;solid android:color=&quot;@color/white&quot;/&gt;\n\n            &lt;/shape&gt;\n        &lt;/rotate&gt;\n    &lt;/item&gt;\n&lt;/layer-list&gt;\n</code></pre>\n<p>now its look like this</p>\n<p><a href=\"https://i.stack.imgur.com/MVodA.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/MVodA.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":1012525,"reputation":591,"user_id":1024776,"display_name":"user1024776"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":74498,"favorite_count":0,"down_vote_count":0,"up_vote_count":59,"answer_count":6,"score":59,"last_activity_date":1649784444,"creation_date":1320197344,"question_id":7974847,"body_markdown":"I&#39;ve looked for days and can not find any good leads on how I can draw a bubble or where a draw 9 patch images is to use as a background. I am a terrible artist. Can anyone help?\r\n\r\nThe best sample I found is here on Stack Overflow, but it&#39;s written in Objective C.\r\n\r\nhttps://stackoverflow.com/questions/4442126/how-to-draw-a-speech-bubble-on-an-iphone\r\n\r\n\r\n","title":"Android drawable speech bubble","body":"<p>I've looked for days and can not find any good leads on how I can draw a bubble or where a draw 9 patch images is to use as a background. I am a terrible artist. Can anyone help?</p>\n<p>The best sample I found is here on Stack Overflow, but it's written in Objective C.</p>\n<p><a href=\"https://stackoverflow.com/questions/4442126/how-to-draw-a-speech-bubble-on-an-iphone\">How to draw a &quot;speech bubble&quot; on an iPhone?</a></p>\n"},{"tags":["java","spring-boot","logging","netflix-conductor"],"answers":[{"tags":[],"owner":{"account_id":3314874,"reputation":31,"user_id":5134349,"display_name":"Manan Bhatt"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1649783676,"creation_date":1649783676,"answer_id":71846751,"question_id":71827059,"body_markdown":"We can put below line to the application.properties for the worker.\r\n\r\n    logging.level.package.class=WARN\r\nwhere package.class is absolute class name along with package name.\r\nIf there is no code changes then below is the exact configuration,\r\n\r\n    logging.level.com.netflix.conductor.client.automator.TaskPollExecutor=WARN","title":"Change log levels in netflix conductor (java springboot)","body":"<p>We can put below line to the application.properties for the worker.</p>\n<pre><code>logging.level.package.class=WARN\n</code></pre>\n<p>where package.class is absolute class name along with package name.\nIf there is no code changes then below is the exact configuration,</p>\n<pre><code>logging.level.com.netflix.conductor.client.automator.TaskPollExecutor=WARN\n</code></pre>\n"}],"owner":{"account_id":13088541,"reputation":59,"user_id":9456788,"display_name":"Kumar Rounak"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":259,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1649783676,"creation_date":1649676714,"question_id":71827059,"body_markdown":"Is there a way to change the log level from error to warn in Workflow Task Coordinator of Netflix Conductor.\r\n\r\nPS: I&#39;m using Java SpringBoot\r\n\r\n```\r\nfor (Task task : tasks) {\r\n\t\t\ttry {\r\n\t\t\t\texecutorService.submit(() -&gt; {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tlogger.debug(&quot;Executing task {}, taskId - {} in worker - {}&quot;, task.getTaskDefName(), task.getTaskId(), worker.getIdentity());\r\n\t\t\t\t\t\texecute(worker, task);\r\n\t\t\t\t\t} catch (Throwable t) {\r\n\t\t\t\t\t\ttask.setStatus(Task.Status.FAILED);\r\n\t\t\t\t\t\tTaskResult result = new TaskResult(task);\r\n\t\t\t\t\t\thandleException(t, result, worker, task);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t} catch (RejectedExecutionException e) {\r\n\t\t\t\tWorkflowTaskMetrics.incrementTaskExecutionQueueFullCount(worker.getTaskDefName());\r\n\t\t\t\tlogger.error(&quot;Execution queue is full, returning task: {}&quot;, task.getTaskId(), e);\r\n\t\t\t\treturnTask(worker, task);\r\n\t\t\t}\r\n\t\t}\r\n```","title":"Change log levels in netflix conductor (java springboot)","body":"<p>Is there a way to change the log level from error to warn in Workflow Task Coordinator of Netflix Conductor.</p>\n<p>PS: I'm using Java SpringBoot</p>\n<pre><code>for (Task task : tasks) {\n            try {\n                executorService.submit(() -&gt; {\n                    try {\n                        logger.debug(&quot;Executing task {}, taskId - {} in worker - {}&quot;, task.getTaskDefName(), task.getTaskId(), worker.getIdentity());\n                        execute(worker, task);\n                    } catch (Throwable t) {\n                        task.setStatus(Task.Status.FAILED);\n                        TaskResult result = new TaskResult(task);\n                        handleException(t, result, worker, task);\n                    }\n                });\n            } catch (RejectedExecutionException e) {\n                WorkflowTaskMetrics.incrementTaskExecutionQueueFullCount(worker.getTaskDefName());\n                logger.error(&quot;Execution queue is full, returning task: {}&quot;, task.getTaskId(), e);\n                returnTask(worker, task);\n            }\n        }\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":1,"creation_date":1649784545,"post_id":71846503,"comment_id":126962221,"body_markdown":"`import java.io.;` is not valid in Java - probably you did mean `import java.io.*;` (same for second import)","body":"<code>import java.io.;</code> is not valid in Java - probably you did mean <code>import java.io.*;</code> (same for second import)"},{"owner":{"account_id":19588405,"reputation":31,"user_id":14335998,"display_name":"Sagar Tanwar"},"score":0,"creation_date":1649911706,"post_id":71846503,"comment_id":126996068,"body_markdown":"I have also used import java.io.*;","body":"I have also used import java.io.*;"}],"answers":[{"tags":[],"owner":{"account_id":10298861,"reputation":111,"user_id":7598149,"display_name":"kesaven"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649783633,"creation_date":1649783633,"answer_id":71846741,"question_id":71846503,"body_markdown":"for(; i&lt;2*n; i++) arr[i] = sc.nextInt();\r\n\r\nthis is probably your problem","title":"Failed to compile judge: judge.java:1: error: class, interface, or enum expected 1","body":"<p>for(; i&lt;2*n; i++) arr[i] = sc.nextInt();</p>\n<p>this is probably your problem</p>\n"}],"owner":{"account_id":19588405,"reputation":31,"user_id":14335998,"display_name":"Sagar Tanwar"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1649783633,"creation_date":1649782489,"question_id":71846503,"body_markdown":"This is the question link of Google Code Jam Round 1A: https://codingcompetitions.withgoogle.com/codejam/round/0000000000877ba5/0000000000aa8fc1\r\n\r\nI am trying to take input but I am getting this error :  \r\nFailed to compile judge: judge.java:1: error: class, interface, or enum expected\r\n1  \r\n\r\nThis is the code :  \r\n\r\nimport java.io.*;  \r\nimport java.util.*;\r\n\r\nclass Solution{\r\n    \r\n    public static void main(String[] args) {\r\n        \r\n        Scanner sc = new Scanner(System.in);\r\n        \r\n        int t = sc.nextInt();\r\n        \r\n        for(int k=1; k&lt;=t; k++){\r\n            \r\n            int n = sc.nextInt();\r\n            int[] arr = new int[2*n];\r\n            int i=0;\r\n            for(; i&lt;n; i++){\r\n                \r\n                arr[i] = i+1;\r\n                System.out.print(arr[i]+&quot; &quot;);\r\n            }\r\n            for(; i&lt;2*n; i++) arr[i] = sc.nextInt();\r\n        }\r\n    }\r\n}\r\n\r\nPlease tell me, Why am I getting error?","title":"Failed to compile judge: judge.java:1: error: class, interface, or enum expected 1","body":"<p>This is the question link of Google Code Jam Round 1A: <a href=\"https://codingcompetitions.withgoogle.com/codejam/round/0000000000877ba5/0000000000aa8fc1\" rel=\"nofollow noreferrer\">https://codingcompetitions.withgoogle.com/codejam/round/0000000000877ba5/0000000000aa8fc1</a></p>\n<p>I am trying to take input but I am getting this error :<br />\nFailed to compile judge: judge.java:1: error: class, interface, or enum expected\n1</p>\n<p>This is the code :</p>\n<p>import java.io.<em>;<br />\nimport java.util.</em>;</p>\n<p>class Solution{</p>\n<pre><code>public static void main(String[] args) {\n    \n    Scanner sc = new Scanner(System.in);\n    \n    int t = sc.nextInt();\n    \n    for(int k=1; k&lt;=t; k++){\n        \n        int n = sc.nextInt();\n        int[] arr = new int[2*n];\n        int i=0;\n        for(; i&lt;n; i++){\n            \n            arr[i] = i+1;\n            System.out.print(arr[i]+&quot; &quot;);\n        }\n        for(; i&lt;2*n; i++) arr[i] = sc.nextInt();\n    }\n}\n</code></pre>\n<p>}</p>\n<p>Please tell me, Why am I getting error?</p>\n"},{"tags":["java","spring","dto"],"answers":[{"tags":[],"owner":{"account_id":8353148,"reputation":128,"user_id":6463720,"display_name":"Ziaa"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1649782353,"creation_date":1649779906,"answer_id":71845973,"question_id":71845599,"body_markdown":"Based on my personal experience, I prefer **crystal clear separated DTOs**.\r\nIt will make your life absolutely easier in future. Also it requires more duplicate and boring code, but at the end it can be easily tested, and maintained. It allows your interfaces/services to change independently.\r\n\r\nAs mentioned in https://medium.com/@schneidenbach/restful-api-best-practices-and-common-pitfalls-7a83ba3763b5\r\n&gt; I like to keep things simple. Each controller (and sometimes endpoint, depending on the need) has its own DTO that it uses to process requests. My GETs will often return a subset of data and PUTs/POSTs are limited to updating only fields that I want to update. This makes it very clear and simple for you and your API consumers, while also enforcing a separation of concerns between your entities and your DTOs.","title":"Problems with column duplication when designing a Spring Restful DTO","body":"<p>Based on my personal experience, I prefer <strong>crystal clear separated DTOs</strong>.\nIt will make your life absolutely easier in future. Also it requires more duplicate and boring code, but at the end it can be easily tested, and maintained. It allows your interfaces/services to change independently.</p>\n<p>As mentioned in <a href=\"https://medium.com/@schneidenbach/restful-api-best-practices-and-common-pitfalls-7a83ba3763b5\" rel=\"nofollow noreferrer\">https://medium.com/@schneidenbach/restful-api-best-practices-and-common-pitfalls-7a83ba3763b5</a></p>\n<blockquote>\n<p>I like to keep things simple. Each controller (and sometimes endpoint, depending on the need) has its own DTO that it uses to process requests. My GETs will often return a subset of data and PUTs/POSTs are limited to updating only fields that I want to update. This makes it very clear and simple for you and your API consumers, while also enforcing a separation of concerns between your entities and your DTOs.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":15223721,"reputation":26,"user_id":10984930,"display_name":"bz5314520"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649783498,"creation_date":1649783498,"answer_id":71846721,"question_id":71845599,"body_markdown":"Different DTO have different uses, and their names tell you what to do. For better maintenance and testing, you don&#39;t have to change one endpoint to affect another. I also hate copying DTO properties, but open source tools can alleviate these symptoms. Cheers","title":"Problems with column duplication when designing a Spring Restful DTO","body":"<p>Different DTO have different uses, and their names tell you what to do. For better maintenance and testing, you don't have to change one endpoint to affect another. I also hate copying DTO properties, but open source tools can alleviate these symptoms. Cheers</p>\n"}],"owner":{"account_id":16126285,"reputation":159,"user_id":11640962,"display_name":""},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":163,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71845973,"answer_count":2,"score":0,"last_activity_date":1649783498,"creation_date":1649778258,"question_id":71845599,"body_markdown":"I am learning about DTO recently.\r\nAmong them, Request DTO can be created in various ways.\r\nAs an example, we will take two examples of create and update related to User.\r\n\r\nTo create a user\r\nLet&#39;s say it takes name, sex, age, phoneNumber.\r\n\r\nThen my UserCreateRequestDTO will be composed of a form that receives name, sex, age, phoneNumber as arguments.\r\n\r\n    @Getter\r\n    public class UserCreateRequestDTO {\r\n        private String name;\r\n        private String sex;\r\n        private String age;\r\n        private String phoneNumber;\r\n\r\n        ... etc ()\r\n    }\r\n\r\n\r\nNext, we&#39;ll edit the user&#39;s information.\r\nsex, age, phoneNumber without name\r\nLet&#39;s say you can edit it.\r\n\r\nIf so, my UserUpdateRequestDTO will be composed of receiving sex, age, and phoneNumber as arguments.\r\n\r\n    @Getter\r\n    public class UserUpdateRequestDTO {\r\n        private String sex;\r\n        private String age;\r\n        private String phoneNumber;\r\n\r\n        ... etc ()\r\n    }\r\n\r\nSo far, these two are using very similar fields.\r\n\r\nSomething is wrong, and it looks like you&#39;re writing unnecessary code.\r\n\r\nIf so, I have a question to summarize it or clear out the wrong part.\r\n\r\n1. Is it bad to unify two similar requestDTOs and use them as one requestDTO?\r\n(One requestdto method handles all create and update information.)\r\n\r\n```\r\n@Getter\r\n    public class UserRequestDTO {\r\n        private String name;\r\n        private String sex;\r\n        private String age;\r\n        private String phoneNumber;\r\n        private String etc;\r\n\r\n        ... etc\r\n    }\r\n```\r\n\r\n\r\n2. Or is it bad to create one field model to share but create and update separately?\r\n```\r\n    @Getter\r\n    public class UserCreateRequestDTO {\r\n        private User user;\r\n\r\n        ... etc\r\n    }\r\n\r\n    @Getter\r\n    public class UserUpdateRequestDTO {\r\n        private User user;\r\n\r\n        ... etc\r\n    }\r\n\r\n    ////\r\n    \r\n    \r\n    @Getter\r\n    @Setter\r\n    public class User {\r\n        private String name;\r\n        private String sex;\r\n        private String age;\r\n        private String phoneNumber;\r\n    }\r\n```\r\n\r\n\r\nIn other words, you want to know when you need to create more requestDTOs and if you can use them repeatedly.","title":"Problems with column duplication when designing a Spring Restful DTO","body":"<p>I am learning about DTO recently.\nAmong them, Request DTO can be created in various ways.\nAs an example, we will take two examples of create and update related to User.</p>\n<p>To create a user\nLet's say it takes name, sex, age, phoneNumber.</p>\n<p>Then my UserCreateRequestDTO will be composed of a form that receives name, sex, age, phoneNumber as arguments.</p>\n<pre><code>@Getter\npublic class UserCreateRequestDTO {\n    private String name;\n    private String sex;\n    private String age;\n    private String phoneNumber;\n\n    ... etc ()\n}\n</code></pre>\n<p>Next, we'll edit the user's information.\nsex, age, phoneNumber without name\nLet's say you can edit it.</p>\n<p>If so, my UserUpdateRequestDTO will be composed of receiving sex, age, and phoneNumber as arguments.</p>\n<pre><code>@Getter\npublic class UserUpdateRequestDTO {\n    private String sex;\n    private String age;\n    private String phoneNumber;\n\n    ... etc ()\n}\n</code></pre>\n<p>So far, these two are using very similar fields.</p>\n<p>Something is wrong, and it looks like you're writing unnecessary code.</p>\n<p>If so, I have a question to summarize it or clear out the wrong part.</p>\n<ol>\n<li>Is it bad to unify two similar requestDTOs and use them as one requestDTO?\n(One requestdto method handles all create and update information.)</li>\n</ol>\n<pre><code>@Getter\n    public class UserRequestDTO {\n        private String name;\n        private String sex;\n        private String age;\n        private String phoneNumber;\n        private String etc;\n\n        ... etc\n    }\n</code></pre>\n<ol start=\"2\">\n<li>Or is it bad to create one field model to share but create and update separately?</li>\n</ol>\n<pre><code>    @Getter\n    public class UserCreateRequestDTO {\n        private User user;\n\n        ... etc\n    }\n\n    @Getter\n    public class UserUpdateRequestDTO {\n        private User user;\n\n        ... etc\n    }\n\n    ////\n    \n    \n    @Getter\n    @Setter\n    public class User {\n        private String name;\n        private String sex;\n        private String age;\n        private String phoneNumber;\n    }\n</code></pre>\n<p>In other words, you want to know when you need to create more requestDTOs and if you can use them repeatedly.</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":3397419,"reputation":38710,"user_id":2850651,"display_name":"Mike M."},"score":2,"creation_date":1649783152,"post_id":71846629,"comment_id":126961733,"body_markdown":"`this.title = view.findViewById(R.id.titleBox);`  If I&#39;m following your description correctly, it&#39;s because you&#39;re calling `findViewById()` on your `private View view;` field before you&#39;ve assigned it in the `this.view = v;` line at the end.","body":"<code>this.title = view.findViewById(R.id.titleBox);</code>  If I&#39;m following your description correctly, it&#39;s because you&#39;re calling <code>findViewById()</code> on your <code>private View view;</code> field before you&#39;ve assigned it in the <code>this.view = v;</code> line at the end."},{"owner":{"account_id":24496775,"reputation":33,"user_id":18412921,"display_name":"phqshy"},"score":0,"creation_date":1649783245,"post_id":71846629,"comment_id":126961779,"body_markdown":"@MikeM. wow, I can&#39;t believe I missed something that simple. Sometimes it takes a fresh pair of eyes :D","body":"@MikeM. wow, I can&#39;t believe I missed something that simple. Sometimes it takes a fresh pair of eyes :D"}],"owner":{"account_id":24496775,"reputation":33,"user_id":18412921,"display_name":"phqshy"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":354,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1649782969,"creation_date":1649782969,"question_id":71846629,"body_markdown":"I have a `RecyclerView` with a custom view being used as the holder. Whenever the `ViewHolder` class is constructed, it calls the `findViewById` method on the view being passed through, but I get a `NullPointerException`. I&#39;m figuring it&#39;s a problem with the inflater.\r\n\r\nHere&#39;s my code:\r\n```java\r\npublic RecyclerAdapter.ViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\r\n        View view = LayoutInflater.from(parent.getContext())\r\n                .inflate(R.layout.boxview_layout, parent, true);\r\n        view.setLayoutParams(new ViewGroup.LayoutParams(\r\n                ViewGroup.LayoutParams.MATCH_PARENT,\r\n                ViewGroup.LayoutParams.WRAP_CONTENT));\r\n\r\n        return new ViewHolder(view);\r\n    }\r\n\r\n    @Override\r\n    public void onBindViewHolder(@NonNull ViewHolder holder, int position) {\r\n        try {\r\n            JSONObject pos = jsonList.getJSONObject(position);\r\n            holder.setText(pos.getString(&quot;text&quot;));\r\n            holder.setTitle(pos.getString(&quot;title&quot;));\r\n        } catch (JSONException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public int getItemCount() {\r\n        return jsonList.length();\r\n    }\r\n\r\n    public class ViewHolder extends RecyclerView.ViewHolder {\r\n        private TextView title;\r\n        private TextView text;\r\n        private View view;\r\n\r\n        public ViewHolder(View v) {\r\n            super(v);\r\n            this.title = view.findViewById(R.id.titleBox);\r\n            this.text = view.findViewById(R.id.textBox);\r\n            this.view = v;\r\n        }\r\n\r\n        public View getCustomView() {\r\n            return view;\r\n        }\r\n\r\n        public void setTitle(String title) {\r\n            this.title.setText(title);\r\n        }\r\n\r\n        public void setText(String text) {\r\n            this.text.setText(text);\r\n        }\r\n    }\r\n```\r\n\r\nAnd here&#39;s the view being inflated:\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:custom=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n    android:layout_height=&quot;match_parent&quot;\r\n    android:layout_width=&quot;match_parent&quot;&gt;\r\n\r\n    &lt;TextView\r\n        android:id=&quot;@+id/titleBox&quot;\r\n        android:textSize=&quot;40sp&quot;\r\n        android:layout_width=&quot;256dp&quot;\r\n        android:layout_height=&quot;69dp&quot;\r\n        android:text=&quot;Filler title&quot;\r\n        custom:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n        custom:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;\r\n\r\n    &lt;TextView\r\n        android:id=&quot;@+id/textBox&quot;\r\n        android:layout_width=&quot;256dp&quot;\r\n        android:layout_height=&quot;69dp&quot;\r\n        android:layout_marginTop=&quot;8dp&quot;\r\n        android:text=&quot;Filler text&quot;\r\n        android:textSize=&quot;25sp&quot;\r\n        custom:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n        custom:layout_constraintTop_toBottomOf=&quot;@+id/titleBox&quot; /&gt;\r\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\r\n```","title":"LayoutInflater returns null view Android","body":"<p>I have a <code>RecyclerView</code> with a custom view being used as the holder. Whenever the <code>ViewHolder</code> class is constructed, it calls the <code>findViewById</code> method on the view being passed through, but I get a <code>NullPointerException</code>. I'm figuring it's a problem with the inflater.</p>\n<p>Here's my code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public RecyclerAdapter.ViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\n        View view = LayoutInflater.from(parent.getContext())\n                .inflate(R.layout.boxview_layout, parent, true);\n        view.setLayoutParams(new ViewGroup.LayoutParams(\n                ViewGroup.LayoutParams.MATCH_PARENT,\n                ViewGroup.LayoutParams.WRAP_CONTENT));\n\n        return new ViewHolder(view);\n    }\n\n    @Override\n    public void onBindViewHolder(@NonNull ViewHolder holder, int position) {\n        try {\n            JSONObject pos = jsonList.getJSONObject(position);\n            holder.setText(pos.getString(&quot;text&quot;));\n            holder.setTitle(pos.getString(&quot;title&quot;));\n        } catch (JSONException e) {\n            e.printStackTrace();\n        }\n    }\n\n    @Override\n    public int getItemCount() {\n        return jsonList.length();\n    }\n\n    public class ViewHolder extends RecyclerView.ViewHolder {\n        private TextView title;\n        private TextView text;\n        private View view;\n\n        public ViewHolder(View v) {\n            super(v);\n            this.title = view.findViewById(R.id.titleBox);\n            this.text = view.findViewById(R.id.textBox);\n            this.view = v;\n        }\n\n        public View getCustomView() {\n            return view;\n        }\n\n        public void setTitle(String title) {\n            this.title.setText(title);\n        }\n\n        public void setText(String text) {\n            this.text.setText(text);\n        }\n    }\n</code></pre>\n<p>And here's the view being inflated:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:custom=&quot;http://schemas.android.com/apk/res-auto&quot;\n    android:layout_height=&quot;match_parent&quot;\n    android:layout_width=&quot;match_parent&quot;&gt;\n\n    &lt;TextView\n        android:id=&quot;@+id/titleBox&quot;\n        android:textSize=&quot;40sp&quot;\n        android:layout_width=&quot;256dp&quot;\n        android:layout_height=&quot;69dp&quot;\n        android:text=&quot;Filler title&quot;\n        custom:layout_constraintStart_toStartOf=&quot;parent&quot;\n        custom:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;\n\n    &lt;TextView\n        android:id=&quot;@+id/textBox&quot;\n        android:layout_width=&quot;256dp&quot;\n        android:layout_height=&quot;69dp&quot;\n        android:layout_marginTop=&quot;8dp&quot;\n        android:text=&quot;Filler text&quot;\n        android:textSize=&quot;25sp&quot;\n        custom:layout_constraintStart_toStartOf=&quot;parent&quot;\n        custom:layout_constraintTop_toBottomOf=&quot;@+id/titleBox&quot; /&gt;\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n</code></pre>\n"},{"tags":["java","swing","jframe","exit","control-flow"],"comments":[{"owner":{"account_id":1252416,"reputation":1265,"user_id":1695398,"display_name":"Brian White"},"score":0,"creation_date":1354566347,"post_id":13690807,"comment_id":18797847,"body_markdown":"Can you provide a code sample?","body":"Can you provide a code sample?"},{"owner":{"account_id":81822,"reputation":204250,"user_id":230513,"accept_rate":100,"display_name":"trashgod"},"score":1,"creation_date":1354573682,"post_id":13690807,"comment_id":18800998,"body_markdown":"Got [daemon threads](http://docs.oracle.com/javase/specs/jls/se7/html/jls-12.html#jls-12.8)?","body":"Got <a href=\"http://docs.oracle.com/javase/specs/jls/se7/html/jls-12.html#jls-12.8\" rel=\"nofollow noreferrer\">daemon threads</a>?"}],"answers":[{"tags":[],"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1354565228,"creation_date":1354565228,"answer_id":13690832,"question_id":13690807,"body_markdown":"When you call `myJFrame.setVisible(true)` you are creating a non-daemon Swing event thread which prevents the program from ending until this thread and all non-daemon threads have ended. Note, if you want the program to end when the JFrame is closed, call\r\n\r\n    myJFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);","title":"Java JFrame and program flow","body":"<p>When you call <code>myJFrame.setVisible(true)</code> you are creating a non-daemon Swing event thread which prevents the program from ending until this thread and all non-daemon threads have ended. Note, if you want the program to end when the JFrame is closed, call</p>\n\n<pre><code>myJFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1438159,"reputation":193,"user_id":1359092,"display_name":"John Schneider"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1354565297,"creation_date":1354565297,"answer_id":13690846,"question_id":13690807,"body_markdown":"When a JFrame is open, I know that the program will continue updating the JFrame even if it is invisible, to do things such as check if it is visible again, and also to check if the screen needs updating. If you want to close the program when a JFrame closes, you can use:\r\n`JFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);`\r\nwhich doesn&#39;t update the thread that checks for the visibility, it just stops the program when the JFrame stops being visible.","title":"Java JFrame and program flow","body":"<p>When a JFrame is open, I know that the program will continue updating the JFrame even if it is invisible, to do things such as check if it is visible again, and also to check if the screen needs updating. If you want to close the program when a JFrame closes, you can use:\n<code>JFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</code>\nwhich doesn't update the thread that checks for the visibility, it just stops the program when the JFrame stops being visible.</p>\n"},{"tags":[],"owner":{"account_id":1116560,"reputation":3471,"user_id":1105759,"accept_rate":92,"display_name":"Nico"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1354565330,"creation_date":1354565330,"answer_id":13690852,"question_id":13690807,"body_markdown":"Maybe you&#39;re missing the `frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE)`?\r\n\r\nWhere `frame` is whatever the name of your frame is.","title":"Java JFrame and program flow","body":"<p>Maybe you're missing the <code>frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE)</code>?</p>\n\n<p>Where <code>frame</code> is whatever the name of your frame is.</p>\n"},{"tags":[],"owner":{"account_id":183279,"reputation":168313,"user_id":418556,"accept_rate":98,"display_name":"Andrew Thompson"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1354585988,"creation_date":1354585988,"answer_id":13694941,"question_id":13690807,"body_markdown":"From the docs for [`setDefaultCloseOperation(int)`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JFrame.html#setDefaultCloseOperation%28int%29).\r\n\r\n&gt; You must specify one of the following choices: \r\n\r\n&gt; - `DO_NOTHING_ON_CLOSE` (defined in `WindowConstants`): Don&#39;t do anything; require the program to handle the operation in the `windowClosing` method of a registered `WindowListener` object.\r\n- `HIDE_ON_CLOSE` (..): Automatically hide the frame after invoking any registered `WindowListener` objects.\r\n- **`DISPOSE_ON_CLOSE` (..): Automatically hide and dispose the frame after invoking any registered `WindowListener` objects.**\r\n- `EXIT_ON_CLOSE` (..): Exit the application using the System exit method. Use this only in applications. \r\n\r\n\r\nMy choice to high-light the 3rd, since it is typically better than the last.  Here are two reasons why.\r\n\r\n1. Multiple frame instances can be opened and disposed of sequentially, as in [this example](https://stackoverflow.com/a/7143398/418556).&lt;br&gt;&lt;img src=&quot;http://i.stack.imgur.com/D1JLb.png&quot;&gt;\r\n1. The only reason the JVM will not exit on closing the last frame is because there are other non-daemon threads running.  This in turn, is a sign they should be shut down properly.  In this context, &#39;killing the virtual machine with `System.exit(n)`&#39; does not constitute &#39;properly&#39;.","title":"Java JFrame and program flow","body":"<p>From the docs for <a href=\"http://docs.oracle.com/javase/7/docs/api/javax/swing/JFrame.html#setDefaultCloseOperation%28int%29\" rel=\"nofollow noreferrer\"><code>setDefaultCloseOperation(int)</code></a>.</p>\n\n<blockquote>\n  <p>You must specify one of the following choices: </p>\n  \n  <ul>\n  <li><code>DO_NOTHING_ON_CLOSE</code> (defined in <code>WindowConstants</code>): Don't do anything; require the program to handle the operation in the <code>windowClosing</code> method of a registered <code>WindowListener</code> object.</li>\n  <li><code>HIDE_ON_CLOSE</code> (..): Automatically hide the frame after invoking any registered <code>WindowListener</code> objects.</li>\n  <li><strong><code>DISPOSE_ON_CLOSE</code> (..): Automatically hide and dispose the frame after invoking any registered <code>WindowListener</code> objects.</strong></li>\n  <li><code>EXIT_ON_CLOSE</code> (..): Exit the application using the System exit method. Use this only in applications. </li>\n  </ul>\n</blockquote>\n\n<p>My choice to high-light the 3rd, since it is typically better than the last.  Here are two reasons why.</p>\n\n<ol>\n<li>Multiple frame instances can be opened and disposed of sequentially, as in <a href=\"https://stackoverflow.com/a/7143398/418556\">this example</a>.<br><img src=\"https://i.stack.imgur.com/D1JLb.png\"></li>\n<li>The only reason the JVM will not exit on closing the last frame is because there are other non-daemon threads running.  This in turn, is a sign they should be shut down properly.  In this context, 'killing the virtual machine with <code>System.exit(n)</code>' does not constitute 'properly'.</li>\n</ol>\n"}],"owner":{"account_id":2107713,"reputation":51,"user_id":1873658,"display_name":"EscapistGR"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":341,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":4,"score":3,"last_activity_date":1649782544,"creation_date":1354565147,"question_id":13690807,"body_markdown":"When i create a simple program with a JFrame ,from the moment the setVisible method is true, no matter what i do with the frame, the program doesn&#39;t exit.Could someone explain me the flow?\r\nThanks","title":"Java JFrame and program flow","body":"<p>When i create a simple program with a JFrame ,from the moment the setVisible method is true, no matter what i do with the frame, the program doesn't exit.Could someone explain me the flow?\nThanks</p>\n"},{"tags":["java","arrays"],"comments":[{"owner":{"account_id":2104315,"reputation":27145,"user_id":1871033,"display_name":"CherryDT"},"score":0,"creation_date":1649782572,"post_id":71846494,"comment_id":126961558,"body_markdown":"Maybe you are missing a trailing newline in your file?","body":"Maybe you are missing a trailing newline in your file?"},{"owner":{"account_id":4819600,"reputation":56500,"user_id":3890632,"display_name":"khelwood"},"score":1,"creation_date":1649782884,"post_id":71846494,"comment_id":126961651,"body_markdown":"After you read a token like  `nextDouble` or `nextInt`, you need an extra `readLine` to consume the rest of that line. The same cause as [Scanner is skipping nextLine() after using next() or nextFoo()](https://stackoverflow.com/q/13102045/3890632).","body":"After you read a token like  <code>nextDouble</code> or <code>nextInt</code>, you need an extra <code>readLine</code> to consume the rest of that line. The same cause as <a href=\"https://stackoverflow.com/q/13102045/3890632\">Scanner is skipping nextLine() after using next() or nextFoo()</a>."}],"owner":{"account_id":22453340,"reputation":11,"user_id":16656345,"display_name":"Nino"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1649784166,"answer_count":0,"score":0,"last_activity_date":1649782523,"creation_date":1649782441,"question_id":71846494,"body_markdown":"This is my method to read data in files into array:\r\n```\r\npublic ArrayList&lt;Product&gt; readProductsFromFile()\r\n\t{\r\n\t\tArrayList&lt;Product&gt; products = new ArrayList&lt;&gt;();\r\n\t\t\r\n\t\tFile products_list = new File(&quot;/Users/User/Desktop/utar/ooad/Product.txt&quot;);\r\n\t\tScanner products_reader;\r\n\t\ttry \r\n\t\t{\r\n\t\t\tproducts_reader = new Scanner(products_list);\r\n\t\t\t\r\n\t\t\twhile(products_reader.hasNextLine())\r\n\t\t\t{\r\n\t\t\t\tString id = products_reader.nextLine();\r\n\t\t\t\tString name = products_reader.nextLine();\r\n\t\t\t\tString date = products_reader.nextLine();\r\n\t\t\t\tdouble price = products_reader.nextDouble();\r\n\t\t\t\tint quantity = products_reader.nextInt();\r\n\t\t\t\tString brand = products_reader.nextLine();\r\n\t\t\t\t\r\n\t\t\t\tproducts.add(new Product(id, name, date, price, quantity, brand));\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tproducts_reader.close();\r\n\t\t} \r\n\t\t\r\n\t\tcatch (FileNotFoundException e) \r\n\t\t{\r\n\t\t\tSystem.out.println(&quot;Error : Product file is not found.&quot;);\r\n\t\t\tSystem.out.println();\r\n\t\t}\r\n\t\t\r\n\t\treturn products;\r\n\t}\r\n```\r\nThis is my text file that this method read data from:\r\n```\r\nMMM001\r\nRice\r\n11/11/2022\r\n1.0\r\n100\r\nSUNRISE\r\nMMM002\r\nSugar\r\n11/11/2022\r\n1.0\r\n100\r\nSUGARKING\r\nMMM003\r\nSalt\r\n01/02/2022\r\n2.0\r\n4\r\nSALTKING\r\n```\r\n\r\nwhen i run, the system show \r\n```\r\nException in thread &quot;main&quot; java.util.InputMismatchException\r\n\tat java.util.Scanner.throwFor(Unknown Source)\r\n\tat java.util.Scanner.next(Unknown Source)\r\n\tat java.util.Scanner.nextInt(Unknown Source)\r\n\tat java.util.Scanner.nextInt(Unknown Source)\r\n\tat Admin.readProductsFromFile(Admin.java:162)\r\n\tat Main.main(Main.java:16)\r\n```\r\nWhen i change to nextLine() to next(), it works fine. How can i modify my code to use nextLine() with no error.","title":"Cant read object from file","body":"<p>This is my method to read data in files into array:</p>\n<pre><code>public ArrayList&lt;Product&gt; readProductsFromFile()\n    {\n        ArrayList&lt;Product&gt; products = new ArrayList&lt;&gt;();\n        \n        File products_list = new File(&quot;/Users/User/Desktop/utar/ooad/Product.txt&quot;);\n        Scanner products_reader;\n        try \n        {\n            products_reader = new Scanner(products_list);\n            \n            while(products_reader.hasNextLine())\n            {\n                String id = products_reader.nextLine();\n                String name = products_reader.nextLine();\n                String date = products_reader.nextLine();\n                double price = products_reader.nextDouble();\n                int quantity = products_reader.nextInt();\n                String brand = products_reader.nextLine();\n                \n                products.add(new Product(id, name, date, price, quantity, brand));\n            }\n            \n            products_reader.close();\n        } \n        \n        catch (FileNotFoundException e) \n        {\n            System.out.println(&quot;Error : Product file is not found.&quot;);\n            System.out.println();\n        }\n        \n        return products;\n    }\n</code></pre>\n<p>This is my text file that this method read data from:</p>\n<pre><code>MMM001\nRice\n11/11/2022\n1.0\n100\nSUNRISE\nMMM002\nSugar\n11/11/2022\n1.0\n100\nSUGARKING\nMMM003\nSalt\n01/02/2022\n2.0\n4\nSALTKING\n</code></pre>\n<p>when i run, the system show</p>\n<pre><code>Exception in thread &quot;main&quot; java.util.InputMismatchException\n    at java.util.Scanner.throwFor(Unknown Source)\n    at java.util.Scanner.next(Unknown Source)\n    at java.util.Scanner.nextInt(Unknown Source)\n    at java.util.Scanner.nextInt(Unknown Source)\n    at Admin.readProductsFromFile(Admin.java:162)\n    at Main.main(Main.java:16)\n</code></pre>\n<p>When i change to nextLine() to next(), it works fine. How can i modify my code to use nextLine() with no error.</p>\n"},{"tags":["java","json","xml","xstream"],"comments":[{"owner":{"account_id":4275726,"reputation":7332,"user_id":3950422,"accept_rate":80,"display_name":"bhansa"},"score":0,"creation_date":1490952956,"post_id":43137318,"comment_id":73351591,"body_markdown":"What did you try ?? Any code.","body":"What did you try ?? Any code."},{"owner":{"account_id":5984666,"reputation":7885,"user_id":4702544,"accept_rate":50,"display_name":"Sachin Gupta"},"score":0,"creation_date":1490953488,"post_id":43137318,"comment_id":73351920,"body_markdown":"have you tried org,json","body":"have you tried org,json"},{"owner":{"account_id":4275726,"reputation":7332,"user_id":3950422,"accept_rate":80,"display_name":"bhansa"},"score":0,"creation_date":1490956472,"post_id":43137318,"comment_id":73353923,"body_markdown":"[This](http://x-stream.github.io/tutorial.html) would help.","body":"<a href=\"http://x-stream.github.io/tutorial.html\" rel=\"nofollow noreferrer\">This</a> would help."}],"owner":{"account_id":7468147,"reputation":778,"user_id":5676912,"accept_rate":35,"display_name":"devanathan"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1743,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1649782253,"creation_date":1490952837,"question_id":43137318,"body_markdown":"I am using XStream to de/serialize objects to JSON.\r\n\r\nI need to convert the JSON to XML attributes.\r\n\r\nFor example:\r\n\r\n**JSON**\r\n\r\n    {\r\n          &quot;Student&quot;:{\r\n               &quot;@Studentname&quot;:&quot;Ravi&quot;,\r\n               &quot;@age&quot;:21,\r\n               &quot;college&quot;:&quot;Anna University&quot;\r\n           }\r\n    }\r\n\r\n\r\n**Output XML**\r\n\r\n    &lt;Student name=&quot;Ravi&quot; age=21&gt;\r\n      &lt;college&gt;Anna University&lt;/college&gt;\r\n    &lt;/Student&gt;\r\n\r\n**code**\r\n\r\n    XStream xstream = new XStream();\r\n    xstream.registerConverter(new MapEntryConverter());\r\n    xstream.alias(&quot;Student&quot;, Map.class);\r\n    xml = xstream.toXML(json.map()); //json stores the value\r\n\r\nThanks in advance.","title":"Convert JSON to XML with attributes","body":"<p>I am using XStream to de/serialize objects to JSON.</p>\n<p>I need to convert the JSON to XML attributes.</p>\n<p>For example:</p>\n<p><strong>JSON</strong></p>\n<pre><code>{\n      &quot;Student&quot;:{\n           &quot;@Studentname&quot;:&quot;Ravi&quot;,\n           &quot;@age&quot;:21,\n           &quot;college&quot;:&quot;Anna University&quot;\n       }\n}\n</code></pre>\n<p><strong>Output XML</strong></p>\n<pre><code>&lt;Student name=&quot;Ravi&quot; age=21&gt;\n  &lt;college&gt;Anna University&lt;/college&gt;\n&lt;/Student&gt;\n</code></pre>\n<p><strong>code</strong></p>\n<pre><code>XStream xstream = new XStream();\nxstream.registerConverter(new MapEntryConverter());\nxstream.alias(&quot;Student&quot;, Map.class);\nxml = xstream.toXML(json.map()); //json stores the value\n</code></pre>\n<p>Thanks in advance.</p>\n"},{"tags":["java","spring","spring-boot","maven","spring-boot-actuator"],"comments":[{"owner":{"account_id":18485634,"reputation":2328,"user_id":13466689,"display_name":"Faheem azaz Bhanej"},"score":0,"creation_date":1649766856,"post_id":71842358,"comment_id":126954876,"body_markdown":"Change `include: &quot;*&quot;` to `include: *`","body":"Change <code>include: &quot;*&quot;</code> to <code>include: *</code>"},{"owner":{"account_id":24913011,"reputation":21,"user_id":18782319,"display_name":"Aman Bharti"},"score":0,"creation_date":1649767390,"post_id":71842358,"comment_id":126955096,"body_markdown":"That will throw an error then. Faeem","body":"That will throw an error then. Faeem"},{"owner":{"account_id":18485634,"reputation":2328,"user_id":13466689,"display_name":"Faheem azaz Bhanej"},"score":0,"creation_date":1649767435,"post_id":71842358,"comment_id":126955119,"body_markdown":"what error you get","body":"what error you get"}],"answers":[{"tags":[],"owner":{"account_id":22122534,"reputation":2776,"user_id":16375479,"display_name":"devReddit"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649766571,"creation_date":1649765868,"answer_id":71842573,"question_id":71842358,"body_markdown":"By default, all actuator endpoints are secured.\r\nIn the application-dev.yml file, you need to disable the security for actuator endpoints.\r\n```\r\nmanagement:\r\n   security:\r\n      enabled: false\r\n```\r\n\r\nIf problem still persists, try to expose the endpoints you need manually:\r\n\r\n```\r\nmanagement:\r\n    endpoints:\r\n        web:\r\n            exposure:\r\n                include: [health,actuator,info]\r\n```\r\n\r\nA hude drawback of using yml files: indentation. Try to use `application.properties` file instead. More readable and unnecessary hassle free. ","title":"Spring Boot, /actuator return Resource not found in Console","body":"<p>By default, all actuator endpoints are secured.\nIn the application-dev.yml file, you need to disable the security for actuator endpoints.</p>\n<pre><code>management:\n   security:\n      enabled: false\n</code></pre>\n<p>If problem still persists, try to expose the endpoints you need manually:</p>\n<pre><code>management:\n    endpoints:\n        web:\n            exposure:\n                include: [health,actuator,info]\n</code></pre>\n<p>A hude drawback of using yml files: indentation. Try to use <code>application.properties</code> file instead. More readable and unnecessary hassle free.</p>\n"}],"owner":{"account_id":24913011,"reputation":21,"user_id":18782319,"display_name":"Aman Bharti"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":933,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1649782053,"creation_date":1649765032,"question_id":71842358,"body_markdown":"Below mentioned are my `pom.xml`, `application.yml` and logs. All the `/actuator` &amp; `/actuator/*` endpoints reverts back to a login page. [Please find here the login page screenshot][1]\r\n\r\nThere is a different application for tracking the admin. So admin dependencies are for that only.\r\n\r\n\r\nPom.xml : \r\n\r\n```&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project&gt;\r\n\txmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n\txmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;2.4.0&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt;\r\n\t\t&lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;groupId&gt;com.application.application-name&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;application-name&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;name&gt;application-name&lt;/name&gt;\r\n\t&lt;description&gt; service for handling the events&lt;/description&gt;\r\n\t&lt;packaging&gt;jar&lt;/packaging&gt;\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;1.8&lt;/java.version&gt;\r\n\t\t&lt;spring-boot-admin.version&gt;2.4.0&lt;/spring-boot-admin.version&gt;\r\n\t&lt;/properties&gt;\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-actuator&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-actuator-autoconfigure&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.kafka&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-kafka&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t\t&lt;exclusions&gt;\r\n\t\t\t\t&lt;exclusion&gt;\r\n\t\t\t\t\t&lt;groupId&gt;org.junit.vintage&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;junit-vintage-engine&lt;/artifactId&gt;\r\n\t\t\t\t&lt;/exclusion&gt;\r\n\t\t\t&lt;/exclusions&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;junit&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.kafka&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-kafka-test&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.5.6.RELEASE&lt;/version&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.4.0&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\t&lt;dependencyManagement&gt;\r\n\t\t&lt;dependencies&gt;\r\n\t\t\t&lt;dependency&gt;\r\n\t\t\t\t&lt;groupId&gt;de.codecentric&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-admin-dependencies&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;${spring-boot-admin.version}&lt;/version&gt;\r\n\t\t\t\t&lt;type&gt;pom&lt;/type&gt;\r\n\t\t\t\t&lt;scope&gt;import&lt;/scope&gt;\r\n\t\t\t&lt;/dependency&gt;\r\n\t\t&lt;/dependencies&gt;\r\n\t&lt;/dependencyManagement&gt;\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n&lt;/project&gt;\r\n```\r\nApplication-dev.yml:\r\n \r\n```\r\nsecurity.basic.enabled: false\r\n\r\nserver:\r\n  port: ${PORT:8087}\r\nspring:\r\n  application:\r\n    name: XYZ\r\n  boot:\r\n    #   https://codecentric.github.io/spring-boot-admin/current/#spring-boot-admin-client\r\n    admin:\r\n      api-path: /instances\r\n      client:\r\n        auto-registration: true\r\n        auto-deregistration: true\r\n        register-once: true\r\n        url: &quot;http://localhost:9090&quot;\r\n        instance:\r\n          name: XYZ\r\n        username: superadmin\r\n        password: admin\r\n  security:\r\n    filter:\r\n      dispatcher-types: async,forward,request,error\r\n    user:\r\n      name: superadmin\r\n      password: admin\r\n\r\nlogging:\r\n  level:\r\n#    root: ${ROOT_LOGGING_LEVEL:DEBUG}\r\n    org:\r\n      apache:\r\n        kafka: ERROR\r\n#      de:\r\n#        codecentric:\r\n#          boot:\r\n#            admin:\r\n#              client:\r\n#                registration: DEBUG\r\n\r\nmanagement:\r\n  endpoints:\r\n    web:\r\n      exposure:\r\n        include: &quot;*&quot;\r\n        exclude: heapdump\r\n  endpoint:\r\n    health:\r\n      show-details: always\r\n    metrics:\r\n      enabled: true\r\n    security:\r\n      enabled: true\r\n    shutdown:\r\n      enabled: true\r\n  health:\r\n    mail:\r\n      enabled: false\r\n  server:\r\n    port: 8087\r\n```\r\nLogs:\r\n```\r\n2022-04-12 17:21:52.701  INFO 568530 --- [nio-8087-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet &#39;dispatcherServlet&#39;\r\n2022-04-12 17:21:52.701  INFO 568530 --- [nio-8087-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet &#39;dispatcherServlet&#39;\r\n2022-04-12 17:21:52.701 DEBUG 568530 --- [nio-8087-exec-1] o.s.web.servlet.DispatcherServlet        : Detected StandardServletMultipartResolver\r\n2022-04-12 17:21:52.701 DEBUG 568530 --- [nio-8087-exec-1] o.s.web.servlet.DispatcherServlet        : Detected AcceptHeaderLocaleResolver\r\n2022-04-12 17:21:52.701 DEBUG 568530 --- [nio-8087-exec-1] o.s.web.servlet.DispatcherServlet        : Detected FixedThemeResolver\r\n2022-04-12 17:21:52.702 DEBUG 568530 --- [nio-8087-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@139c2be3\r\n2022-04-12 17:21:52.702 DEBUG 568530 --- [nio-8087-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.support.SessionFlashMapManager@37badac\r\n2022-04-12 17:21:52.702 DEBUG 568530 --- [nio-8087-exec-1] o.s.web.servlet.DispatcherServlet        : enableLoggingRequestDetails=&#39;false&#39;: request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data\r\n2022-04-12 17:21:52.702  INFO 568530 --- [nio-8087-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms\r\n2022-04-12 17:21:52.716 DEBUG 568530 --- [nio-8087-exec-1] o.s.web.servlet.DispatcherServlet        : GET &quot;/actuator&quot;, parameters={}\r\n2022-04-12 17:21:52.725 DEBUG 568530 --- [nio-8087-exec-1] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ResourceHttpRequestHandler [&quot;classpath:/META-INF/resources/&quot;, &quot;classpath:/resources/&quot;, &quot;classpath:/static/&quot;, &quot;classpath:/public/&quot;, &quot;/&quot;]\r\n2022-04-12 17:21:52.726 DEBUG 568530 --- [nio-8087-exec-1] o.s.w.s.r.ResourceHttpRequestHandler     : Resource not found\r\n2022-04-12 17:21:52.727 DEBUG 568530 --- [nio-8087-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 404 NOT_FOUND\r\n2022-04-12 17:25:01.621 DEBUG 568530 --- [nio-8087-exec-8] o.s.web.servlet.DispatcherServlet        : GET &quot;/actuator/health&quot;, parameters={}\r\n2022-04-12 17:25:01.623 DEBUG 568530 --- [nio-8087-exec-8] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ResourceHttpRequestHandler [&quot;classpath:/META-INF/resources/&quot;, &quot;classpath:/resources/&quot;, &quot;classpath:/static/&quot;, &quot;classpath:/public/&quot;, &quot;/&quot;]\r\n2022-04-12 17:25:01.625 DEBUG 568530 --- [nio-8087-exec-8] o.s.w.s.r.ResourceHttpRequestHandler     : Resource not found\r\n2022-04-12 17:25:01.625 DEBUG 568530 --- [nio-8087-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 404 NOT_FOUND\r\n```\r\nAlso, This is my security config for the application:\r\n```\r\n\r\n\r\nimport org.springframework.context.annotation.Configuration;\r\nimport org.springframework.security.config.annotation.web.builders.WebSecurity;\r\nimport org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\r\nimport org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter;\r\n\r\n\r\n@EnableWebSecurity\r\n@Configuration\r\npublic class SecurityConfig extends WebSecurityConfigurerAdapter {\r\n\r\n\r\n    @Override\r\n\r\n    public void configure(WebSecurity web) throws Exception {\r\n\r\n        web.ignoring().antMatchers(&quot;/actuator/**&quot;);\r\n    }\r\n\r\n\r\n}\r\n```\r\n  [1]: https://i.stack.imgur.com/vTBGl.png\r\n\r\nHave I forgotten something to add or I&#39;m doing something wrong?\r\nPlease help me out on this as it is really important for me to resolve.","title":"Spring Boot, /actuator return Resource not found in Console","body":"<p>Below mentioned are my <code>pom.xml</code>, <code>application.yml</code> and logs. All the <code>/actuator</code> &amp; <code>/actuator/*</code> endpoints reverts back to a login page. <a href=\"https://i.stack.imgur.com/vTBGl.png\" rel=\"nofollow noreferrer\">Please find here the login page screenshot</a></p>\n<p>There is a different application for tracking the admin. So admin dependencies are for that only.</p>\n<p>Pom.xml :</p>\n<pre><code>&lt;project&gt;\n    xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.4.0&lt;/version&gt;\n        &lt;relativePath/&gt;\n        &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.application.application-name&lt;/groupId&gt;\n    &lt;artifactId&gt;application-name&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;application-name&lt;/name&gt;\n    &lt;description&gt; service for handling the events&lt;/description&gt;\n    &lt;packaging&gt;jar&lt;/packaging&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;1.8&lt;/java.version&gt;\n        &lt;spring-boot-admin.version&gt;2.4.0&lt;/spring-boot-admin.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-actuator&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-actuator-autoconfigure&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.kafka&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-kafka&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;org.junit.vintage&lt;/groupId&gt;\n                    &lt;artifactId&gt;junit-vintage-engine&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;junit&lt;/groupId&gt;\n            &lt;artifactId&gt;junit&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.kafka&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-kafka-test&lt;/artifactId&gt;\n            &lt;version&gt;2.5.6.RELEASE&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\n            &lt;version&gt;2.4.0&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n    &lt;dependencyManagement&gt;\n        &lt;dependencies&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;de.codecentric&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-admin-dependencies&lt;/artifactId&gt;\n                &lt;version&gt;${spring-boot-admin.version}&lt;/version&gt;\n                &lt;type&gt;pom&lt;/type&gt;\n                &lt;scope&gt;import&lt;/scope&gt;\n            &lt;/dependency&gt;\n        &lt;/dependencies&gt;\n    &lt;/dependencyManagement&gt;\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n<p>Application-dev.yml:</p>\n<pre><code>security.basic.enabled: false\n\nserver:\n  port: ${PORT:8087}\nspring:\n  application:\n    name: XYZ\n  boot:\n    #   https://codecentric.github.io/spring-boot-admin/current/#spring-boot-admin-client\n    admin:\n      api-path: /instances\n      client:\n        auto-registration: true\n        auto-deregistration: true\n        register-once: true\n        url: &quot;http://localhost:9090&quot;\n        instance:\n          name: XYZ\n        username: superadmin\n        password: admin\n  security:\n    filter:\n      dispatcher-types: async,forward,request,error\n    user:\n      name: superadmin\n      password: admin\n\nlogging:\n  level:\n#    root: ${ROOT_LOGGING_LEVEL:DEBUG}\n    org:\n      apache:\n        kafka: ERROR\n#      de:\n#        codecentric:\n#          boot:\n#            admin:\n#              client:\n#                registration: DEBUG\n\nmanagement:\n  endpoints:\n    web:\n      exposure:\n        include: &quot;*&quot;\n        exclude: heapdump\n  endpoint:\n    health:\n      show-details: always\n    metrics:\n      enabled: true\n    security:\n      enabled: true\n    shutdown:\n      enabled: true\n  health:\n    mail:\n      enabled: false\n  server:\n    port: 8087\n</code></pre>\n<p>Logs:</p>\n<pre><code>2022-04-12 17:21:52.701  INFO 568530 --- [nio-8087-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'\n2022-04-12 17:21:52.701  INFO 568530 --- [nio-8087-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'\n2022-04-12 17:21:52.701 DEBUG 568530 --- [nio-8087-exec-1] o.s.web.servlet.DispatcherServlet        : Detected StandardServletMultipartResolver\n2022-04-12 17:21:52.701 DEBUG 568530 --- [nio-8087-exec-1] o.s.web.servlet.DispatcherServlet        : Detected AcceptHeaderLocaleResolver\n2022-04-12 17:21:52.701 DEBUG 568530 --- [nio-8087-exec-1] o.s.web.servlet.DispatcherServlet        : Detected FixedThemeResolver\n2022-04-12 17:21:52.702 DEBUG 568530 --- [nio-8087-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@139c2be3\n2022-04-12 17:21:52.702 DEBUG 568530 --- [nio-8087-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.support.SessionFlashMapManager@37badac\n2022-04-12 17:21:52.702 DEBUG 568530 --- [nio-8087-exec-1] o.s.web.servlet.DispatcherServlet        : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data\n2022-04-12 17:21:52.702  INFO 568530 --- [nio-8087-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms\n2022-04-12 17:21:52.716 DEBUG 568530 --- [nio-8087-exec-1] o.s.web.servlet.DispatcherServlet        : GET &quot;/actuator&quot;, parameters={}\n2022-04-12 17:21:52.725 DEBUG 568530 --- [nio-8087-exec-1] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ResourceHttpRequestHandler [&quot;classpath:/META-INF/resources/&quot;, &quot;classpath:/resources/&quot;, &quot;classpath:/static/&quot;, &quot;classpath:/public/&quot;, &quot;/&quot;]\n2022-04-12 17:21:52.726 DEBUG 568530 --- [nio-8087-exec-1] o.s.w.s.r.ResourceHttpRequestHandler     : Resource not found\n2022-04-12 17:21:52.727 DEBUG 568530 --- [nio-8087-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 404 NOT_FOUND\n2022-04-12 17:25:01.621 DEBUG 568530 --- [nio-8087-exec-8] o.s.web.servlet.DispatcherServlet        : GET &quot;/actuator/health&quot;, parameters={}\n2022-04-12 17:25:01.623 DEBUG 568530 --- [nio-8087-exec-8] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ResourceHttpRequestHandler [&quot;classpath:/META-INF/resources/&quot;, &quot;classpath:/resources/&quot;, &quot;classpath:/static/&quot;, &quot;classpath:/public/&quot;, &quot;/&quot;]\n2022-04-12 17:25:01.625 DEBUG 568530 --- [nio-8087-exec-8] o.s.w.s.r.ResourceHttpRequestHandler     : Resource not found\n2022-04-12 17:25:01.625 DEBUG 568530 --- [nio-8087-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 404 NOT_FOUND\n</code></pre>\n<p>Also, This is my security config for the application:</p>\n<pre><code>\n\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.security.config.annotation.web.builders.WebSecurity;\nimport org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\nimport org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter;\n\n\n@EnableWebSecurity\n@Configuration\npublic class SecurityConfig extends WebSecurityConfigurerAdapter {\n\n\n    @Override\n\n    public void configure(WebSecurity web) throws Exception {\n\n        web.ignoring().antMatchers(&quot;/actuator/**&quot;);\n    }\n\n\n}\n</code></pre>\n<p>Have I forgotten something to add or I'm doing something wrong?\nPlease help me out on this as it is really important for me to resolve.</p>\n"},{"tags":["java","openapi-generator"],"answers":[{"tags":[],"owner":{"account_id":2357043,"reputation":1569,"user_id":2064622,"display_name":"splatch"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1649781931,"creation_date":1649781931,"answer_id":71846407,"question_id":64751265,"body_markdown":"I come with same issue as yours and solution for me was using generated `ApiClient` class and its `RequestInterceptor` field. It allows to customize request headers prior sending it to server:\r\n\r\n```java\r\nApiClient client = new ApiClient();\r\nclient.setRequestInterceptor(new Consumer&lt;HttpRequest.Builder&gt;() {\r\n  @Override\r\n  public void accept(HttpRequest.Builder builder) {\r\n    builder.header(&quot;Authorization&quot;, &quot;Basic &quot; + Base64.getEncoder().encodeToString(&quot;foo:bar&quot;));\r\n  }\r\n});\r\n```\r\nThere is also a backing version of above called response interceptor if you need to capture reply headers.","title":"OpenAPI Generator - Java 11 Native HTTP Client template: how to add custom headers","body":"<p>I come with same issue as yours and solution for me was using generated <code>ApiClient</code> class and its <code>RequestInterceptor</code> field. It allows to customize request headers prior sending it to server:</p>\n<pre class=\"lang-java prettyprint-override\"><code>ApiClient client = new ApiClient();\nclient.setRequestInterceptor(new Consumer&lt;HttpRequest.Builder&gt;() {\n  @Override\n  public void accept(HttpRequest.Builder builder) {\n    builder.header(&quot;Authorization&quot;, &quot;Basic &quot; + Base64.getEncoder().encodeToString(&quot;foo:bar&quot;));\n  }\n});\n</code></pre>\n<p>There is also a backing version of above called response interceptor if you need to capture reply headers.</p>\n"}],"owner":{"account_id":6222160,"reputation":83,"user_id":4841508,"display_name":"cansi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1172,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":1,"score":5,"last_activity_date":1649781931,"creation_date":1604923250,"question_id":64751265,"body_markdown":"I&#39;m using OpenAPI Generator to generate a Java 11 HTTP Client for a swagger-compliant service. \r\n\r\nThe thing is: this service requires basic authentication but it doesn&#39;t challenge the client with a `WWW-Authenticate` header, so the Java 11 HTTP Client won&#39;t send the basic authentication configured with the builder. The workaround for this is to add the `Authorization` header directly in the request, as suggested in [this thread][1].\r\n\r\nNow: as of version 4.3.1, OpenAPI Generator won&#39;t expose me an interface to customize the HTTP requests, so I&#39;m wondering if it would be best to override the responsible template ([api.mustache:126][2]) or if there is a cleaner alternative for this task.\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/54208946/4841508\r\n  [2]: https://github.com/OpenAPITools/openapi-generator/blob/003165c2c254ded7817760cc1d6f97af730d9d4d/modules/openapi-generator/src/main/resources/Java/libraries/native/api.mustache#L126","title":"OpenAPI Generator - Java 11 Native HTTP Client template: how to add custom headers","body":"<p>I'm using OpenAPI Generator to generate a Java 11 HTTP Client for a swagger-compliant service.</p>\n<p>The thing is: this service requires basic authentication but it doesn't challenge the client with a <code>WWW-Authenticate</code> header, so the Java 11 HTTP Client won't send the basic authentication configured with the builder. The workaround for this is to add the <code>Authorization</code> header directly in the request, as suggested in <a href=\"https://stackoverflow.com/a/54208946/4841508\">this thread</a>.</p>\n<p>Now: as of version 4.3.1, OpenAPI Generator won't expose me an interface to customize the HTTP requests, so I'm wondering if it would be best to override the responsible template (<a href=\"https://github.com/OpenAPITools/openapi-generator/blob/003165c2c254ded7817760cc1d6f97af730d9d4d/modules/openapi-generator/src/main/resources/Java/libraries/native/api.mustache#L126\" rel=\"noreferrer\">api.mustache:126</a>) or if there is a cleaner alternative for this task.</p>\n"},{"tags":["java","activiti"],"answers":[{"tags":[],"owner":{"account_id":1416182,"reputation":168,"user_id":1341814,"display_name":"3omar"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1649781863,"creation_date":1649781863,"answer_id":71846392,"question_id":71703143,"body_markdown":"You can use DelegateTask to add multiple groups as candidate group, with method: [addCandidateGroups][1]\r\n\r\nexample:\r\n\r\n```java\r\n    @Component(&quot;CustomTaskListener&quot;)\r\n    public class CustomTaskListener implements TaskListener {\r\n    \r\n        @Override\r\n        public void notify(DelegateTask task) {\r\n            \r\n            List&lt;String&gt; groups = new ArrayList&lt;&gt;();\r\n            groups.add(&quot;group1&quot;);\r\n            groups.add(&quot;group2&quot;);\r\n            \r\n            task.addCandidateGroups(groups);\r\n        }\r\n    }\r\n```\r\n\r\n  [1]: https://www.activiti.org/javadocs/org/activiti/engine/delegate/DelegateTask.html#addCandidateGroups-java.util.Collection-\r\n","title":"can i set a Activiti user task to multiple candidate groups?","body":"<p>You can use DelegateTask to add multiple groups as candidate group, with method: <a href=\"https://www.activiti.org/javadocs/org/activiti/engine/delegate/DelegateTask.html#addCandidateGroups-java.util.Collection-\" rel=\"nofollow noreferrer\">addCandidateGroups</a></p>\n<p>example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @Component(&quot;CustomTaskListener&quot;)\n    public class CustomTaskListener implements TaskListener {\n    \n        @Override\n        public void notify(DelegateTask task) {\n            \n            List&lt;String&gt; groups = new ArrayList&lt;&gt;();\n            groups.add(&quot;group1&quot;);\n            groups.add(&quot;group2&quot;);\n            \n            task.addCandidateGroups(groups);\n        }\n    }\n</code></pre>\n"}],"owner":{"account_id":15968441,"reputation":373,"user_id":11523294,"display_name":"Criwran"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":168,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":71846392,"answer_count":1,"score":1,"last_activity_date":1649781863,"creation_date":1648797360,"question_id":71703143,"body_markdown":"Normally I set the Activiti user task to a assignee,  candidate users or a candidate group. I&#39;m wondering if I can set multiple candidate groups not just a candidate group like :\r\n```\r\ngroup1, group2\r\n```","title":"can i set a Activiti user task to multiple candidate groups?","body":"<p>Normally I set the Activiti user task to a assignee,  candidate users or a candidate group. I'm wondering if I can set multiple candidate groups not just a candidate group like :</p>\n<pre><code>group1, group2\n</code></pre>\n"},{"tags":["java","reflection","field"],"answers":[{"tags":[],"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649781550,"creation_date":1649781550,"answer_id":71846324,"question_id":71846263,"body_markdown":"&gt; Map&lt;?, ?&gt; map = (Map&lt;?, ?&gt;) field.get(field.getType().newInstance());\r\n\r\nThis would be incorrect even if the type wasn&#39;t an interface.  Instead, if the field is in a class named `MyClass`, you should pass some instance of `MyClass` to `field.get`, for the object you actually want to get the field from.  If you don&#39;t care which object, then the field should be static anyway, and you should pass `null` to `field.get`.\r\n\r\n&gt; And additional to that, how can I cast it always to the right Type?\r\n\r\nYou can&#39;t cast it always to the right type, and you shouldn&#39;t bother.  The \r\n`Map` interface is all you actually care about.","title":"Get Field Type as Interface","body":"<blockquote>\n<p>Map map = (Map) field.get(field.getType().newInstance());</p>\n</blockquote>\n<p>This would be incorrect even if the type wasn't an interface.  Instead, if the field is in a class named <code>MyClass</code>, you should pass some instance of <code>MyClass</code> to <code>field.get</code>, for the object you actually want to get the field from.  If you don't care which object, then the field should be static anyway, and you should pass <code>null</code> to <code>field.get</code>.</p>\n<blockquote>\n<p>And additional to that, how can I cast it always to the right Type?</p>\n</blockquote>\n<p>You can't cast it always to the right type, and you shouldn't bother.  The\n<code>Map</code> interface is all you actually care about.</p>\n"}],"owner":{"account_id":23729715,"reputation":23,"user_id":17749148,"display_name":"Mxrlin"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":117,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1649781550,"creation_date":1649781275,"question_id":71846263,"body_markdown":"I&#39;m trying to get a Map (Interface) from a Field. The Field looks like that:\r\n\r\n    private final Map&lt;String, Object&gt; test1 = new HashMap&lt;&gt;();\r\n\r\nFor that I&#39;m trying to get the Value of it with\r\n\r\n    Map&lt;?, ?&gt; map = (Map&lt;?, ?&gt;) field.get(field.getType().newInstance());\r\n\r\nBut the Problem is, that the type is an Interface and so I can&#39;t get a new Instance. How can I now get the value of the field when the type is an Interface?\r\n\r\nAnd additional to that, how can I cast it always to the right Type? \r\nSo If the Map field looks like `private final HashMap&lt;String, Object&gt; test1 = new HashMap&lt;&gt;();` the Type is HashMap, \r\n`private final AbstractMap&lt;String, Object&gt; messages;` type is AbstractMap, ...","title":"Get Field Type as Interface","body":"<p>I'm trying to get a Map (Interface) from a Field. The Field looks like that:</p>\n<pre><code>private final Map&lt;String, Object&gt; test1 = new HashMap&lt;&gt;();\n</code></pre>\n<p>For that I'm trying to get the Value of it with</p>\n<pre><code>Map&lt;?, ?&gt; map = (Map&lt;?, ?&gt;) field.get(field.getType().newInstance());\n</code></pre>\n<p>But the Problem is, that the type is an Interface and so I can't get a new Instance. How can I now get the value of the field when the type is an Interface?</p>\n<p>And additional to that, how can I cast it always to the right Type?\nSo If the Map field looks like <code>private final HashMap&lt;String, Object&gt; test1 = new HashMap&lt;&gt;();</code> the Type is HashMap,\n<code>private final AbstractMap&lt;String, Object&gt; messages;</code> type is AbstractMap, ...</p>\n"},{"tags":["java","datetime","groovy","timezone","cloud-integration"],"comments":[{"owner":{"account_id":10063010,"reputation":5822,"user_id":7438973,"accept_rate":44,"display_name":"nagendra547"},"score":1,"creation_date":1503478138,"post_id":45834774,"comment_id":78626898,"body_markdown":"If the code is working then  why you are receiving syntax error! Couldn&#39;t get the question completely!","body":"If the code is working then  why you are receiving syntax error! Couldn&#39;t get the question completely!"},{"owner":{"account_id":2524916,"reputation":40766,"user_id":2194470,"accept_rate":100,"display_name":"Szymon Stepniak"},"score":0,"creation_date":1503478803,"post_id":45834774,"comment_id":78627339,"body_markdown":"Try to debug and check if `map.get(&quot;dateOfBirth&quot;)` does not return `null` value in some cases.","body":"Try to debug and check if <code>map.get(&quot;dateOfBirth&quot;)</code> does not return <code>null</code> value in some cases."},{"owner":{"account_id":557020,"reputation":2631,"user_id":909388,"accept_rate":78,"display_name":"dotchuZ"},"score":0,"creation_date":1503479169,"post_id":45834774,"comment_id":78627603,"body_markdown":"good idea @SzymonStepniak, i&#39;ve added some checks but does not seem to solve the issue.","body":"good idea @SzymonStepniak, i&#39;ve added some checks but does not seem to solve the issue."},{"owner":{"account_id":1883209,"reputation":20919,"user_id":1702943,"accept_rate":86,"display_name":"Rao"},"score":0,"creation_date":1503479230,"post_id":45834774,"comment_id":78627649,"body_markdown":"what is the existing date format of `dateOfBirth`? Anyways, try the solution","body":"what is the existing date format of <code>dateOfBirth</code>? Anyways, try the solution"},{"owner":{"account_id":557020,"reputation":2631,"user_id":909388,"accept_rate":78,"display_name":"dotchuZ"},"score":0,"creation_date":1503479289,"post_id":45834774,"comment_id":78627700,"body_markdown":"existing date format is like 1984-03-29T22:00:00Z @Rao","body":"existing date format is like 1984-03-29T22:00:00Z @Rao"}],"answers":[{"tags":[],"owner":{"account_id":1883209,"reputation":20919,"user_id":1702943,"accept_rate":86,"display_name":"Rao"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1503479307,"creation_date":1503479307,"answer_id":45835328,"question_id":45834774,"body_markdown":"Here you can go:\r\n\r\n    //Change the date and date formate as needed\r\n    def inputDateString = &quot;Wed Aug 23 00:00:00 UTC 2017&quot;\r\n    def inputDateFormat = &quot;E MMM dd HH:mm:ss Z yyyy&quot;\r\n    \r\n    def outputDateFormat = &quot;yyyy-MM-dd&#39;T&#39;HH:mm:ssZ&quot;\r\n    def outputTZ = TimeZone.getTimeZone(&#39;CET&#39;)\r\n    \r\n    def date = Date.parse(inputDateFormat, inputDateString)\r\n    def convertedDate = date.format(outputDateFormat, outputTZ)\r\n    \r\n    println convertedDate\r\n\r\nYou can quickly try it online &lt;kbd&gt;[demo](https://ideone.com/JBewCf)&lt;/kbd&gt;","title":"Groovy Date &amp; TimeZone formatting","body":"<p>Here you can go:</p>\n\n<pre><code>//Change the date and date formate as needed\ndef inputDateString = \"Wed Aug 23 00:00:00 UTC 2017\"\ndef inputDateFormat = \"E MMM dd HH:mm:ss Z yyyy\"\n\ndef outputDateFormat = \"yyyy-MM-dd'T'HH:mm:ssZ\"\ndef outputTZ = TimeZone.getTimeZone('CET')\n\ndef date = Date.parse(inputDateFormat, inputDateString)\ndef convertedDate = date.format(outputDateFormat, outputTZ)\n\nprintln convertedDate\n</code></pre>\n\n<p>You can quickly try it online <kbd><a href=\"https://ideone.com/JBewCf\" rel=\"nofollow noreferrer\">demo</a></kbd></p>\n"},{"tags":[],"owner":{"account_id":1333316,"reputation":26958,"user_id":1276664,"accept_rate":17,"display_name":"daggett"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1503479919,"creation_date":1503479919,"answer_id":45835575,"question_id":45834774,"body_markdown":"your code works fine when the `value` variable contains correct datetime value.\r\n\r\nif I change `value = &quot;&quot;` (empty string) then I have the same exception:\r\n\r\n&gt; java.lang.IllegalArgumentException: Invalid format: &quot;&quot;\r\n\r\n    @Grab(group=&#39;joda-time&#39;, module=&#39;joda-time&#39;, version=&#39;2.0&#39;)\r\n    \r\n    import org.joda.time.format.DateTimeFormat;\r\n    import org.joda.time.format.DateTimeFormatter;\r\n    import org.joda.time.DateTime;\r\n    import org.joda.time.DateTimeZone;\r\n    import java.util.TimeZone;\r\n    \r\n    \r\n    def value = &#39;2016-12-31T13:14:15+02&#39;;\r\n    \r\n    String pattern = &quot;yyyy-MM-dd&#39;T&#39;HH:mm:ssZ&quot;;\r\n    DateTimeFormatter dtf = DateTimeFormat.forPattern(pattern);\r\n    DateTime dateTime = dtf.parseDateTime(value);\r\n    \r\n    TimeZone tz = TimeZone.getTimeZone(&quot;CET&quot;);\r\n    def result = dateTime.withZone( DateTimeZone.forTimeZone(tz) ).toString();\r\n\r\n","title":"Groovy Date &amp; TimeZone formatting","body":"<p>your code works fine when the <code>value</code> variable contains correct datetime value.</p>\n\n<p>if I change <code>value = \"\"</code> (empty string) then I have the same exception:</p>\n\n<blockquote>\n  <p>java.lang.IllegalArgumentException: Invalid format: \"\"</p>\n</blockquote>\n\n<pre><code>@Grab(group='joda-time', module='joda-time', version='2.0')\n\nimport org.joda.time.format.DateTimeFormat;\nimport org.joda.time.format.DateTimeFormatter;\nimport org.joda.time.DateTime;\nimport org.joda.time.DateTimeZone;\nimport java.util.TimeZone;\n\n\ndef value = '2016-12-31T13:14:15+02';\n\nString pattern = \"yyyy-MM-dd'T'HH:mm:ssZ\";\nDateTimeFormatter dtf = DateTimeFormat.forPattern(pattern);\nDateTime dateTime = dtf.parseDateTime(value);\n\nTimeZone tz = TimeZone.getTimeZone(\"CET\");\ndef result = dateTime.withZone( DateTimeZone.forTimeZone(tz) ).toString();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":51988,"reputation":569,"user_id":155341,"accept_rate":29,"display_name":"Jim P"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1649781294,"creation_date":1649781294,"answer_id":71846272,"question_id":45834774,"body_markdown":"In Groovy you may find adding a dateUtil.nullSafeFormat might work just fine.\r\n\r\nBut just FYI, here is another way to use `maybeNull?.with { it.whatever() } ?: &quot;&quot;` that works well for avoiding null passed to DateFormat:\r\n\r\n    Map&lt;String,String&gt; getStuff(def json) {\r\n      DateTimeFormatter df = DateTimeFormatter.ISO_LOCAL_DATE\r\n      [oneThing:  json?.some?.path,\r\n       someLocalDate: json?.some?.big?.path?.myDate?.with { df.format(it) } ?: &quot;&quot;,\r\n       keepGoing: json?.more?.stuff?.with { [lastName, firstName]?.join(&#39; &#39;) },\r\n      ...]\r\n\r\nYou can see I&#39;m going rather overboard with the null checks, but when it&#39;s so easy why not!","title":"Groovy Date &amp; TimeZone formatting","body":"<p>In Groovy you may find adding a dateUtil.nullSafeFormat might work just fine.</p>\n<p>But just FYI, here is another way to use <code>maybeNull?.with { it.whatever() } ?: &quot;&quot;</code> that works well for avoiding null passed to DateFormat:</p>\n<pre><code>Map&lt;String,String&gt; getStuff(def json) {\n  DateTimeFormatter df = DateTimeFormatter.ISO_LOCAL_DATE\n  [oneThing:  json?.some?.path,\n   someLocalDate: json?.some?.big?.path?.myDate?.with { df.format(it) } ?: &quot;&quot;,\n   keepGoing: json?.more?.stuff?.with { [lastName, firstName]?.join(' ') },\n  ...]\n</code></pre>\n<p>You can see I'm going rather overboard with the null checks, but when it's so easy why not!</p>\n"}],"owner":{"account_id":557020,"reputation":2631,"user_id":909388,"accept_rate":78,"display_name":"dotchuZ"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":23303,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":45835575,"answer_count":3,"score":1,"last_activity_date":1649781294,"creation_date":1503477684,"question_id":45834774,"body_markdown":"I am converting UTC to CET with this groovy / java coding:\r\n\r\n    import com.sap.gateway.ip.core.customdev.util.Message;\r\n    import java.util.HashMap;\r\n    import java.text.DateFormat;\r\n    import java.text.ParseException;\r\n    import java.text.SimpleDateFormat;\r\n    import java.util.Calendar;\r\n    import java.util.Date;\r\n    import java.util.TimeZone;\r\n    import org.joda.time.*;\r\n    import org.joda.time.format.*;\r\n    \r\n    def Message processData(Message message) {\r\n       \r\n           def messageLog = messageLogFactory.getMessageLog(message);\r\n           def map = message.getHeaders();\r\n           def value = map.get(&quot;dateOfBirth&quot;);\r\n           if (value != null) {\r\n               String pattern = &quot;yyyy-MM-dd&#39;T&#39;HH:mm:ssZ&quot;;\r\n               DateTimeFormatter dtf = DateTimeFormat.forPattern(pattern);\r\n               DateTime dateTime = dtf.parseDateTime(value.toString());\r\n               TimeZone tz = TimeZone.getTimeZone(&quot;CET&quot;);\r\n               def result = dateTime.withZone( DateTimeZone.forTimeZone(tz) ).toString();\r\n               message.setHeader(&quot;dateOfBirth&quot;, result);\r\n               return message;\r\n           }\r\n    }\r\n\r\nthis code works, UTC is getting converted to CET.\r\n\r\nBut I am receiving an error message anyway and I don&#39;t know why. Could anybody help me to get rid of this error?\r\n\r\nError:\r\n \r\n\r\n    javax.script.ScriptException: java.lang.Exception: \r\n    java.lang.IllegalArgumentException: Invalid format: &quot;&quot;@ line 20 in script8.groovy, \r\n    cause: java.lang.IllegalArgumentException: Invalid format: &quot;&quot;\r\n\r\nThanks in advance\r\n\r\n\r\nSolution:\r\n\r\n    import com.sap.gateway.ip.core.customdev.util.Message;\r\n    import java.util.HashMap;\r\n    import java.text.DateFormat;\r\n    import java.text.ParseException;\r\n    import java.text.SimpleDateFormat;\r\n    import java.util.Calendar;\r\n    import java.util.Date;\r\n    import java.util.TimeZone;\r\n    import org.joda.time.*;\r\n    import org.joda.time.format.*;\r\n    \r\n    def Message processData(Message message) {\r\n          def messageLog = messageLogFactory.getMessageLog(message);\r\n          def map = message.getHeaders();\r\n          def value = map.get(&quot;dateOfBirth&quot;);\r\n          if (value?.trim() != &quot;&quot;) {\r\n            String pattern = &quot;yyyy-MM-dd&#39;T&#39;HH:mm:ssZ&quot;;\r\n            DateTimeFormatter dtf = DateTimeFormat.forPattern(pattern);\r\n            DateTime dateTime = dtf.parseDateTime(value.toString());\r\n            TimeZone tz = TimeZone.getTimeZone(&quot;CET&quot;);\r\n            def result = dateTime.withZone( DateTimeZone.forTimeZone(tz) ).toString();\r\n            message.setHeader(&quot;dateOfBirth&quot;, result);\r\n         }\r\n         return message;\r\n    }","title":"Groovy Date &amp; TimeZone formatting","body":"<p>I am converting UTC to CET with this groovy / java coding:</p>\n\n<pre><code>import com.sap.gateway.ip.core.customdev.util.Message;\nimport java.util.HashMap;\nimport java.text.DateFormat;\nimport java.text.ParseException;\nimport java.text.SimpleDateFormat;\nimport java.util.Calendar;\nimport java.util.Date;\nimport java.util.TimeZone;\nimport org.joda.time.*;\nimport org.joda.time.format.*;\n\ndef Message processData(Message message) {\n\n       def messageLog = messageLogFactory.getMessageLog(message);\n       def map = message.getHeaders();\n       def value = map.get(\"dateOfBirth\");\n       if (value != null) {\n           String pattern = \"yyyy-MM-dd'T'HH:mm:ssZ\";\n           DateTimeFormatter dtf = DateTimeFormat.forPattern(pattern);\n           DateTime dateTime = dtf.parseDateTime(value.toString());\n           TimeZone tz = TimeZone.getTimeZone(\"CET\");\n           def result = dateTime.withZone( DateTimeZone.forTimeZone(tz) ).toString();\n           message.setHeader(\"dateOfBirth\", result);\n           return message;\n       }\n}\n</code></pre>\n\n<p>this code works, UTC is getting converted to CET.</p>\n\n<p>But I am receiving an error message anyway and I don't know why. Could anybody help me to get rid of this error?</p>\n\n<p>Error:</p>\n\n<pre><code>javax.script.ScriptException: java.lang.Exception: \njava.lang.IllegalArgumentException: Invalid format: \"\"@ line 20 in script8.groovy, \ncause: java.lang.IllegalArgumentException: Invalid format: \"\"\n</code></pre>\n\n<p>Thanks in advance</p>\n\n<p>Solution:</p>\n\n<pre><code>import com.sap.gateway.ip.core.customdev.util.Message;\nimport java.util.HashMap;\nimport java.text.DateFormat;\nimport java.text.ParseException;\nimport java.text.SimpleDateFormat;\nimport java.util.Calendar;\nimport java.util.Date;\nimport java.util.TimeZone;\nimport org.joda.time.*;\nimport org.joda.time.format.*;\n\ndef Message processData(Message message) {\n      def messageLog = messageLogFactory.getMessageLog(message);\n      def map = message.getHeaders();\n      def value = map.get(\"dateOfBirth\");\n      if (value?.trim() != \"\") {\n        String pattern = \"yyyy-MM-dd'T'HH:mm:ssZ\";\n        DateTimeFormatter dtf = DateTimeFormat.forPattern(pattern);\n        DateTime dateTime = dtf.parseDateTime(value.toString());\n        TimeZone tz = TimeZone.getTimeZone(\"CET\");\n        def result = dateTime.withZone( DateTimeZone.forTimeZone(tz) ).toString();\n        message.setHeader(\"dateOfBirth\", result);\n     }\n     return message;\n}\n</code></pre>\n"},{"tags":["java","database","many-to-many","cascade"],"answers":[{"tags":[],"owner":{"account_id":11935386,"reputation":1273,"user_id":8734046,"display_name":"jwpol"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1649781131,"creation_date":1649781131,"answer_id":71846233,"question_id":71845196,"body_markdown":"Your many-to-many mapping means that you have two intersection tables ticket and ticket_labels. I bet you don&#39;t want that, you need just one. For bidirectional mapping you may have:\r\n```java\r\npublic class TicketLabel {\r\n//...\r\n   @ManyToMany(mappedBy = &quot;labels&quot;, cascade {CascadeType.MERGE, CascadeType.PERSIST})\r\n   private Set&lt;Ticket&gt; tickets = new HashSet&lt;&gt;();\r\n}\r\n//...\r\n```\r\nand \r\n```java\r\npublic class Ticket {\r\n// ...\r\n   @ManyToMany\r\n   @JoinTable(name = &quot;ticket_labels&quot;,\r\n\t   joinColumns = { @JoinColumn(name = &quot;ticket_id&quot;)},\r\n   \t   inverseJoinColumns = { @JoinColumn(name = &quot;label_id&quot; )}\r\n   )\r\n   private Set&lt;TicketLabel&gt; labels = new HashSet&lt;&gt;();\r\n\r\n   public void removeLabel(Label label) {\r\n      labels.remove(label);\r\n      label.getTickets().remove(this);\r\n   }\r\n\r\n   public void addLabel(Label label) {\r\n      labels.add(label);\r\n      label.getTickets().add(this);\r\n   }\r\n// ...\r\n}\r\n```\r\nYou have to manually synchronize labels and tickets by helper remove and add methods as explained in [this thread][1]. To remove label you have to remove it from all the  tickets. CascadeType.REMOVE will cause in this case the removal of the whole association.\r\n\r\n  [1]: https://stackoverflow.com/questions/54495020/how-to-correctly-delete-a-many-to-many-relationship-in-java-spring","title":"Apply cascade type delete to many to many relation","body":"<p>Your many-to-many mapping means that you have two intersection tables ticket and ticket_labels. I bet you don't want that, you need just one. For bidirectional mapping you may have:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class TicketLabel {\n//...\n   @ManyToMany(mappedBy = &quot;labels&quot;, cascade {CascadeType.MERGE, CascadeType.PERSIST})\n   private Set&lt;Ticket&gt; tickets = new HashSet&lt;&gt;();\n}\n//...\n</code></pre>\n<p>and</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Ticket {\n// ...\n   @ManyToMany\n   @JoinTable(name = &quot;ticket_labels&quot;,\n       joinColumns = { @JoinColumn(name = &quot;ticket_id&quot;)},\n       inverseJoinColumns = { @JoinColumn(name = &quot;label_id&quot; )}\n   )\n   private Set&lt;TicketLabel&gt; labels = new HashSet&lt;&gt;();\n\n   public void removeLabel(Label label) {\n      labels.remove(label);\n      label.getTickets().remove(this);\n   }\n\n   public void addLabel(Label label) {\n      labels.add(label);\n      label.getTickets().add(this);\n   }\n// ...\n}\n</code></pre>\n<p>You have to manually synchronize labels and tickets by helper remove and add methods as explained in <a href=\"https://stackoverflow.com/questions/54495020/how-to-correctly-delete-a-many-to-many-relationship-in-java-spring\">this thread</a>. To remove label you have to remove it from all the  tickets. CascadeType.REMOVE will cause in this case the removal of the whole association.</p>\n"}],"owner":{"account_id":12204971,"reputation":1227,"user_id":8908318,"accept_rate":100,"display_name":"monamona"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":64,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":71846233,"answer_count":1,"score":1,"last_activity_date":1649781131,"creation_date":1649776627,"question_id":71845196,"body_markdown":"I&#39;m currently developing a web ticket system, and have classes to store my ticket data. Every ticket can have multiple labels associated with it, and to manage those labels I created a label editor. This works just fine, only a delete option is still missing. Until now most deletes failed with the explaination that the label was still referenced to by another ticket, which required removing it first. In the process of finding a solution I came across CascadeType.DELETE, which seemed to do exactly what I was after.\r\n\r\nHowever, since the ticket object contains a set of labels and not the other way round, every time I deleted a ticket, all the labels would disappear, instead of the other way round. After reading the docs for the CascadeType, this seemed obvious, but I am now clueless how to achieve the opposite effect. I thought of just creating a reference to all the tickets that are using my Label, although that seems like storing the same data twice.\r\n\r\nMy Ticket looks something like this:\r\n\r\n```java\r\n\r\n@Entity\r\n@Data\r\n@NoArgsConstructor\r\npublic class Ticket {\r\n    @Id\r\n    @Column(length = 40)\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private int id;\r\n\r\n    @Column(nullable = false)\r\n    private String title;\r\n\r\n    @OneToMany(targetEntity = TicketEntry.class, mappedBy = &quot;ticket&quot;, orphanRemoval = true, fetch = FetchType.EAGER)\r\n    private List&lt;TicketEntry&gt; entries = new ArrayList&lt;&gt;();\r\n\r\n    @Column\r\n    private Status status = Status.OPEN;\r\n\r\n    @ManyToMany(fetch = FetchType.EAGER)\r\n    @JoinTable(name = &quot;ticket_labels&quot;,\r\n            joinColumns = { @JoinColumn(name = &quot;ticket_id&quot;)},\r\n            inverseJoinColumns = { @JoinColumn(name = &quot;label_id&quot; )}\r\n    )\r\n    private Set&lt;TicketLabel&gt; labels = new HashSet&lt;&gt;();\r\n}\r\n```\r\n\r\nAnd the labels like this:\r\n\r\n```java\r\n@Entity\r\n@Data\r\n@NoArgsConstructor\r\npublic class TicketLabel {\r\n\r\n    @Id\r\n    @Column(length = 40)\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private int id;\r\n\r\n    private String name = &quot;&quot;;\r\n\r\n    @EqualsAndHashCode.Exclude\r\n    @ToString.Exclude\r\n    @ManyToMany(fetch = FetchType.EAGER, cascade = CascadeType.REMOVE)\r\n    @JoinTable(name = &quot;ticket&quot;,\r\n            joinColumns = { @JoinColumn(name = &quot;label_id&quot;)},\r\n            inverseJoinColumns = { @JoinColumn(name = &quot;ticket_id&quot; )}\r\n    )\r\n    private Set&lt;Ticket&gt; tickets = new HashSet&lt;&gt;();\r\n}\r\n```\r\n\r\nbut that still does not work. Do I even need a reference to all my Tickets in my Label object? Or can I somehow use a &quot;reversed REMOVE&quot; cascade type?","title":"Apply cascade type delete to many to many relation","body":"<p>I'm currently developing a web ticket system, and have classes to store my ticket data. Every ticket can have multiple labels associated with it, and to manage those labels I created a label editor. This works just fine, only a delete option is still missing. Until now most deletes failed with the explaination that the label was still referenced to by another ticket, which required removing it first. In the process of finding a solution I came across CascadeType.DELETE, which seemed to do exactly what I was after.</p>\n<p>However, since the ticket object contains a set of labels and not the other way round, every time I deleted a ticket, all the labels would disappear, instead of the other way round. After reading the docs for the CascadeType, this seemed obvious, but I am now clueless how to achieve the opposite effect. I thought of just creating a reference to all the tickets that are using my Label, although that seems like storing the same data twice.</p>\n<p>My Ticket looks something like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>\n@Entity\n@Data\n@NoArgsConstructor\npublic class Ticket {\n    @Id\n    @Column(length = 40)\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private int id;\n\n    @Column(nullable = false)\n    private String title;\n\n    @OneToMany(targetEntity = TicketEntry.class, mappedBy = &quot;ticket&quot;, orphanRemoval = true, fetch = FetchType.EAGER)\n    private List&lt;TicketEntry&gt; entries = new ArrayList&lt;&gt;();\n\n    @Column\n    private Status status = Status.OPEN;\n\n    @ManyToMany(fetch = FetchType.EAGER)\n    @JoinTable(name = &quot;ticket_labels&quot;,\n            joinColumns = { @JoinColumn(name = &quot;ticket_id&quot;)},\n            inverseJoinColumns = { @JoinColumn(name = &quot;label_id&quot; )}\n    )\n    private Set&lt;TicketLabel&gt; labels = new HashSet&lt;&gt;();\n}\n</code></pre>\n<p>And the labels like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Entity\n@Data\n@NoArgsConstructor\npublic class TicketLabel {\n\n    @Id\n    @Column(length = 40)\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private int id;\n\n    private String name = &quot;&quot;;\n\n    @EqualsAndHashCode.Exclude\n    @ToString.Exclude\n    @ManyToMany(fetch = FetchType.EAGER, cascade = CascadeType.REMOVE)\n    @JoinTable(name = &quot;ticket&quot;,\n            joinColumns = { @JoinColumn(name = &quot;label_id&quot;)},\n            inverseJoinColumns = { @JoinColumn(name = &quot;ticket_id&quot; )}\n    )\n    private Set&lt;Ticket&gt; tickets = new HashSet&lt;&gt;();\n}\n</code></pre>\n<p>but that still does not work. Do I even need a reference to all my Tickets in my Label object? Or can I somehow use a &quot;reversed REMOVE&quot; cascade type?</p>\n"},{"tags":["java","sonarqube","testng","pom.xml","jacoco-maven-plugin"],"answers":[{"tags":[],"owner":{"account_id":6300403,"reputation":692,"user_id":4895267,"accept_rate":40,"display_name":"Federico Paparoni"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649677914,"creation_date":1649677914,"answer_id":71827360,"question_id":71818078,"body_markdown":"Your configuration hasn&#39;t the report execution goal and in addition to this you should not use jacoco exec file because it&#39;s deprecated. You should configure the sonar jacoco plugin as suggested in [this official example][1]. \r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.jacoco&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;jacoco-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;0.8.7&lt;/version&gt;\r\n\t\t\t\t&lt;executions&gt;\r\n\t\t\t\t\t&lt;execution&gt;\r\n\t\t\t\t\t\t&lt;id&gt;prepare-agent&lt;/id&gt;\r\n\t\t\t\t\t\t&lt;goals&gt;\r\n\t\t\t\t\t\t\t&lt;goal&gt;prepare-agent&lt;/goal&gt;\r\n\t\t\t\t\t\t&lt;/goals&gt;\r\n\t\t\t\t\t&lt;/execution&gt;\r\n\t\t\t\t\t&lt;execution&gt;\r\n\t\t\t\t\t\t&lt;id&gt;report&lt;/id&gt;\r\n\t\t\t\t\t\t&lt;goals&gt;\r\n\t\t\t\t\t\t\t&lt;goal&gt;report&lt;/goal&gt;\r\n\t\t\t\t\t\t&lt;/goals&gt;\r\n\t\t\t\t\t&lt;/execution&gt;\r\n\t\t\t\t&lt;/executions&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\nAnd then jacoco report, generated in the default path, will be imported by sonar.\r\n\r\n\r\n  [1]: https://github.com/SonarSource/sonar-scanning-examples/blob/master/doc/jacoco.md","title":"Can&#39;t generate jacoco.exec file","body":"<p>Your configuration hasn't the report execution goal and in addition to this you should not use jacoco exec file because it's deprecated. You should configure the sonar jacoco plugin as suggested in <a href=\"https://github.com/SonarSource/sonar-scanning-examples/blob/master/doc/jacoco.md\" rel=\"nofollow noreferrer\">this official example</a>.</p>\n<pre><code>&lt;build&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.jacoco&lt;/groupId&gt;\n            &lt;artifactId&gt;jacoco-maven-plugin&lt;/artifactId&gt;\n            &lt;version&gt;0.8.7&lt;/version&gt;\n            &lt;executions&gt;\n                &lt;execution&gt;\n                    &lt;id&gt;prepare-agent&lt;/id&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;prepare-agent&lt;/goal&gt;\n                    &lt;/goals&gt;\n                &lt;/execution&gt;\n                &lt;execution&gt;\n                    &lt;id&gt;report&lt;/id&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;report&lt;/goal&gt;\n                    &lt;/goals&gt;\n                &lt;/execution&gt;\n            &lt;/executions&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n&lt;/build&gt;\n</code></pre>\n<p>And then jacoco report, generated in the default path, will be imported by sonar.</p>\n"}],"owner":{"account_id":24588094,"reputation":21,"user_id":18492344,"display_name":"Zorger"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1774,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1649781049,"creation_date":1649604940,"question_id":71818078,"body_markdown":"I have project with Mockito and TestNG tests. I want to see coverage in Sonarqube. For this I should have jacoco.exec file. When I try to build my project, in result I have &quot;BUILD SUCCESS&quot; without jacoco.exec file in target folder.\r\n\r\nThere is part of my **pom.xml** file.\r\n\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.jacoco&lt;/groupId&gt;\r\n                &lt;artifactId&gt;jacoco-maven-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;0.8.6&lt;/version&gt;\r\n                &lt;executions&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;id&gt;prepare-agent&lt;/id&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;prepare-agent&lt;/goal&gt;\r\n                        &lt;/goals&gt;\r\n                    &lt;/execution&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;id&gt;report&lt;/id&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;report-aggregate&lt;/goal&gt;\r\n                        &lt;/goals&gt;\r\n                        &lt;phase&gt;verify&lt;/phase&gt;\r\n                    &lt;/execution&gt;\r\n                &lt;/executions&gt;\r\n            &lt;/plugin&gt;\r\n        ...\r\n\r\ncommand to start build:\r\n\r\n    mvn clean install sonar:sonar   -Dsonar.projectKey=number20   -Dsonar.host.url=http://localhost:9000   -Dsonar.login=**mylogin**","title":"Can&#39;t generate jacoco.exec file","body":"<p>I have project with Mockito and TestNG tests. I want to see coverage in Sonarqube. For this I should have jacoco.exec file. When I try to build my project, in result I have &quot;BUILD SUCCESS&quot; without jacoco.exec file in target folder.</p>\n<p>There is part of my <strong>pom.xml</strong> file.</p>\n<pre><code>        &lt;plugin&gt;\n            &lt;groupId&gt;org.jacoco&lt;/groupId&gt;\n            &lt;artifactId&gt;jacoco-maven-plugin&lt;/artifactId&gt;\n            &lt;version&gt;0.8.6&lt;/version&gt;\n            &lt;executions&gt;\n                &lt;execution&gt;\n                    &lt;id&gt;prepare-agent&lt;/id&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;prepare-agent&lt;/goal&gt;\n                    &lt;/goals&gt;\n                &lt;/execution&gt;\n                &lt;execution&gt;\n                    &lt;id&gt;report&lt;/id&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;report-aggregate&lt;/goal&gt;\n                    &lt;/goals&gt;\n                    &lt;phase&gt;verify&lt;/phase&gt;\n                &lt;/execution&gt;\n            &lt;/executions&gt;\n        &lt;/plugin&gt;\n    ...\n</code></pre>\n<p>command to start build:</p>\n<pre><code>mvn clean install sonar:sonar   -Dsonar.projectKey=number20   -Dsonar.host.url=http://localhost:9000   -Dsonar.login=**mylogin**\n</code></pre>\n"},{"tags":["java","spring","rest","spring-mvc"],"answers":[{"tags":[],"owner":{"account_id":22886030,"reputation":1849,"user_id":17026900,"display_name":"Oussama ZAGHDOUD"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1648827187,"creation_date":1648827187,"answer_id":71709432,"question_id":71709216,"body_markdown":"A copy past from a project :\r\n\r\n**web.xml**\r\n\r\n    &lt;servlet&gt;\r\n    \t\t&lt;servlet-name&gt;rest-api&lt;/servlet-name&gt;\r\n    \t\t&lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;\r\n    \t\t&lt;load-on-startup&gt;1&lt;/load-on-startup&gt;\r\n    \t\t&lt;async-supported&gt;true&lt;/async-supported&gt;\r\n    \t&lt;/servlet&gt;\r\n    \t&lt;servlet-mapping&gt;\r\n    \t\t&lt;servlet-name&gt;rest-api&lt;/servlet-name&gt;\r\n    \t\t&lt;url-pattern&gt;/API/*&lt;/url-pattern&gt;\r\n    \t&lt;/servlet-mapping&gt;\r\n\r\n**rest-api-servlet.xml**\r\n\r\n\r\n\r\n    &lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\r\n    \txmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n    \txmlns:context=&quot;http://www.springframework.org/schema/context&quot;\r\n    \txmlns:mvc=&quot;http://www.springframework.org/schema/mvc&quot;\r\n    \txmlns:security=&quot;http://www.springframework.org/schema/security&quot;\r\n    \t\r\n    \txsi:schemaLocation=&quot;http://www.springframework.org/schema/beans \r\n    \t                    http://www.springframework.org/schema/beans/spring-beans.xsd\r\n    \t                    http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd\r\n    \t                    http://www.springframework.org/schema/mvc \r\n    \t                    http://www.springframework.org/schema/mvc/spring-mvc.xsd\r\n    \t                    http://www.springframework.org/schema/security\r\n            \t\t\t\thttp://www.springframework.org/schema/security/spring-security-4.2.xsd&quot;&gt;\r\n    \r\n    \t&lt;mvc:annotation-driven/&gt;","title":"How to add a Spring REST API to an existing app that uses spring xml","body":"<p>A copy past from a project :</p>\n<p><strong>web.xml</strong></p>\n<pre><code>&lt;servlet&gt;\n        &lt;servlet-name&gt;rest-api&lt;/servlet-name&gt;\n        &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;\n        &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;\n        &lt;async-supported&gt;true&lt;/async-supported&gt;\n    &lt;/servlet&gt;\n    &lt;servlet-mapping&gt;\n        &lt;servlet-name&gt;rest-api&lt;/servlet-name&gt;\n        &lt;url-pattern&gt;/API/*&lt;/url-pattern&gt;\n    &lt;/servlet-mapping&gt;\n</code></pre>\n<p><strong>rest-api-servlet.xml</strong></p>\n<pre><code>&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\n    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xmlns:context=&quot;http://www.springframework.org/schema/context&quot;\n    xmlns:mvc=&quot;http://www.springframework.org/schema/mvc&quot;\n    xmlns:security=&quot;http://www.springframework.org/schema/security&quot;\n    \n    xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans \n                        http://www.springframework.org/schema/beans/spring-beans.xsd\n                        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd\n                        http://www.springframework.org/schema/mvc \n                        http://www.springframework.org/schema/mvc/spring-mvc.xsd\n                        http://www.springframework.org/schema/security\n                        http://www.springframework.org/schema/security/spring-security-4.2.xsd&quot;&gt;\n\n    &lt;mvc:annotation-driven/&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15133058,"reputation":41,"user_id":10920314,"display_name":"JoshHutch"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1649780917,"creation_date":1649780917,"answer_id":71846196,"question_id":71709216,"body_markdown":"The answer to this is there was a filter active, so the /rest/ entrypoint needed to be added to it like this:\r\n```\r\n&lt;filter&gt;\r\n\t\t&lt;filter-name&gt;SomeFilter&lt;/filter-name&gt;\r\n\t\t&lt;filter-class&gt;com.SomeFilter&lt;/filter-class&gt;\r\n\t\t\r\n\t\t&lt;init-param&gt;\r\n      \t\t&lt;param-name&gt;entryPoints&lt;/param-name&gt;\r\n      \t\t&lt;param-value&gt;/someform.form,\r\n                        /somejavascript.js\r\n                        /rest/*\r\n      \t\t&lt;/param-value&gt;\r\n   \t\t&lt;/init-param&gt;\r\n\t&lt;/filter&gt;\t\r\n\r\n```","title":"How to add a Spring REST API to an existing app that uses spring xml","body":"<p>The answer to this is there was a filter active, so the /rest/ entrypoint needed to be added to it like this:</p>\n<pre><code>&lt;filter&gt;\n        &lt;filter-name&gt;SomeFilter&lt;/filter-name&gt;\n        &lt;filter-class&gt;com.SomeFilter&lt;/filter-class&gt;\n        \n        &lt;init-param&gt;\n            &lt;param-name&gt;entryPoints&lt;/param-name&gt;\n            &lt;param-value&gt;/someform.form,\n                        /somejavascript.js\n                        /rest/*\n            &lt;/param-value&gt;\n        &lt;/init-param&gt;\n    &lt;/filter&gt;   \n\n</code></pre>\n"}],"owner":{"account_id":15133058,"reputation":41,"user_id":10920314,"display_name":"JoshHutch"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":459,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71846196,"answer_count":2,"score":0,"last_activity_date":1649780917,"creation_date":1648826202,"question_id":71709216,"body_markdown":"I have an existing Spring app that is a web application and I&#39;m trying to add a REST API to it.\r\n\r\nI&#39;m not sure how to connect everything so it works\r\n\r\nI&#39;ve added an entry to web.xml. Originally the servlet class was pointed to my DispatcherServlet that I created, but I pointed it to org.springframework.web.servlet.DispatcherServlet based things I found online.\r\n\r\nweb.xml\r\n```\r\n    &lt;servlet&gt;\r\n        &lt;servlet-name&gt;rest&lt;/servlet-name&gt;\r\n        &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;\r\n    &lt;/servlet&gt;\r\n\r\n    &lt;servlet-mapping&gt;\r\n        &lt;servlet-name&gt;rest&lt;/servlet-name&gt;\r\n        &lt;url-pattern&gt;/rest/*&lt;/url-pattern&gt;\r\n    &lt;/servlet-mapping&gt;\r\n```\r\n\r\nrest-servlet.xml\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\r\n       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n       xmlns:context=&quot;http://www.springframework.org/schema/context&quot;\r\n       xmlns:mvc=&quot;http://www.springframework.org/schema/mvc&quot;\r\n       xsi:schemaLocation=&quot;\r\n       http://www.springframework.org/schema/beans\r\n       http://www.springframework.org/schema/beans/spring-beans.xsd&quot;&gt;\r\n    &lt;context:component-scan base-package=&quot;com.company.platform.rest&quot; /&gt;\r\n    &lt;mvc:annotation-driven /&gt;\r\n&lt;/beans&gt;\r\n```\r\n\r\nClass:\r\n```\r\npackage com.company.platform.rest;\r\n\r\nimport java.util.concurrent.atomic.AtomicLong;\r\nimport org.springframework.web.bind.annotation.GetMapping;\r\nimport org.springframework.web.bind.annotation.RequestMapping;\r\nimport org.springframework.web.bind.annotation.RequestParam;\r\nimport org.springframework.web.bind.annotation.RestController;\r\n\r\n@RestController\r\n@RequestMapping(&quot;/rest&quot;)\r\npublic class RestDispatcherServlet {\r\n    private static final String template = &quot;Hello, %s!&quot;;\r\n    private final AtomicLong counter = new AtomicLong();\r\n\r\n    @GetMapping(&quot;/service/greeting&quot;)\r\n    public GreetingTest greeting(@RequestParam(value = &quot;name&quot;, defaultValue = &quot;World&quot;) String name) {\r\n        return new GreetingTest(counter.incrementAndGet(), String.format(template, name));\r\n    }\r\n}\r\n```\r\n\r\nany help to point me in the right direction would be appreciated","title":"How to add a Spring REST API to an existing app that uses spring xml","body":"<p>I have an existing Spring app that is a web application and I'm trying to add a REST API to it.</p>\n<p>I'm not sure how to connect everything so it works</p>\n<p>I've added an entry to web.xml. Originally the servlet class was pointed to my DispatcherServlet that I created, but I pointed it to org.springframework.web.servlet.DispatcherServlet based things I found online.</p>\n<p>web.xml</p>\n<pre><code>    &lt;servlet&gt;\n        &lt;servlet-name&gt;rest&lt;/servlet-name&gt;\n        &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;\n    &lt;/servlet&gt;\n\n    &lt;servlet-mapping&gt;\n        &lt;servlet-name&gt;rest&lt;/servlet-name&gt;\n        &lt;url-pattern&gt;/rest/*&lt;/url-pattern&gt;\n    &lt;/servlet-mapping&gt;\n</code></pre>\n<p>rest-servlet.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\n       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n       xmlns:context=&quot;http://www.springframework.org/schema/context&quot;\n       xmlns:mvc=&quot;http://www.springframework.org/schema/mvc&quot;\n       xsi:schemaLocation=&quot;\n       http://www.springframework.org/schema/beans\n       http://www.springframework.org/schema/beans/spring-beans.xsd&quot;&gt;\n    &lt;context:component-scan base-package=&quot;com.company.platform.rest&quot; /&gt;\n    &lt;mvc:annotation-driven /&gt;\n&lt;/beans&gt;\n</code></pre>\n<p>Class:</p>\n<pre><code>package com.company.platform.rest;\n\nimport java.util.concurrent.atomic.AtomicLong;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RequestParam;\nimport org.springframework.web.bind.annotation.RestController;\n\n@RestController\n@RequestMapping(&quot;/rest&quot;)\npublic class RestDispatcherServlet {\n    private static final String template = &quot;Hello, %s!&quot;;\n    private final AtomicLong counter = new AtomicLong();\n\n    @GetMapping(&quot;/service/greeting&quot;)\n    public GreetingTest greeting(@RequestParam(value = &quot;name&quot;, defaultValue = &quot;World&quot;) String name) {\n        return new GreetingTest(counter.incrementAndGet(), String.format(template, name));\n    }\n}\n</code></pre>\n<p>any help to point me in the right direction would be appreciated</p>\n"},{"tags":["java","jpa","spring-data-jpa","jpa-2.0","hibernate-criteria"],"comments":[{"owner":{"account_id":7932983,"reputation":1434,"user_id":5990117,"display_name":"Petr Aleksandrov"},"score":0,"creation_date":1649772185,"post_id":71840199,"comment_id":126957139,"body_markdown":"&gt; thus giving me records that are in &quot;deleted&quot; status as well....  How is this possible? 2nd query selects by ID, ID is unique, right? Then there will be one single record in the result with status = Active?","body":"&gt; thus giving me records that are in &quot;deleted&quot; status as well....  How is this possible? 2nd query selects by ID, ID is unique, right? Then there will be one single record in the result with status = Active?"},{"owner":{"account_id":24911565,"reputation":1,"user_id":18781053,"display_name":"Code Zeek"},"score":0,"creation_date":1649774892,"post_id":71840199,"comment_id":126958383,"body_markdown":"No, the child table is in 1toMany relationship to its parent, thus it returns multiple records[even multiple records with Active status and other statuses] and the result is getting mapped to the JPA child Entity","body":"No, the child table is in 1toMany relationship to its parent, thus it returns multiple records[even multiple records with Active status and other statuses] and the result is getting mapped to the JPA child Entity"},{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1649781001,"post_id":71840199,"comment_id":126960926,"body_markdown":"Your query translates to fetch me the parent with that ID and has children who have a status that is active. It returns you the parent that matches that filter - but it says nothing on how to build that Parent instance; that is what the Parent mappings and entity definitions are for. You are treating entities like you would a one off view object but entities are meant to be considered for caching and used to track changes. JPA couldn&#39;t really know what to do with changes to that child list if it is only partially populated.","body":"Your query translates to fetch me the parent with that ID and has children who have a status that is active. It returns you the parent that matches that filter - but it says nothing on how to build that Parent instance; that is what the Parent mappings and entity definitions are for. You are treating entities like you would a one off view object but entities are meant to be considered for caching and used to track changes. JPA couldn&#39;t really know what to do with changes to that child list if it is only partially populated."}],"answers":[{"tags":[],"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649780598,"creation_date":1649780598,"answer_id":71846132,"question_id":71840199,"body_markdown":"You&#39;ve got separate issues here. To fetch parent instances with its children in a single query, you need to look at fetch joins which are different from the &#39;join&#39; semantics you&#39;ve used - see https://docs.oracle.com/javaee/6/api/javax/persistence/criteria/FetchParent.html. Calling `root.fetch(PARENT_.ChildList, JoinType.LEFT)` will cause the Parent and children to be fetched in the same SQL statement\r\n\r\n\r\nWhen you look at fetch joins though, you&#39;ll see that they do not support query filtering. When JPA returns managed entities, because it must manage changes to those instances, they must reflect exactly what is in the database. If you get a parent with only a partially populated list of children, it can&#39;t really know what to do when it saves the parent; should it modify that list or just ignore differences it finds from the database values. It is just not supported by the spec, and the query language doesn&#39;t allow it. You just can&#39;t fetch Parents and partial lists of the children on demand though JPA semantics.\r\n\r\nWhat you can do though is fetch the children yourself. The equivalent of \r\n  \r\n    &quot;SELECT child, parent from Parent parent join parent.ChildList child where parent.id=:parentId and child.status in (&#39;Active&#39;)&quot;\r\nThis will give you a list of Object[} containing child and parent pairs, but only active child instances. The Parent instance will all be the single instance with id equal to the value you pass in as a query parameter. If you access its parent.ChildList though, you will find all its children - so don&#39;t. Mark it as lazy and don&#39;t touch it, and use the returned child instances in your operations.\r\n\r\n\r\nYour query though is just asking for certain attributes from the tables, so I&#39;m guessing you don&#39;t really need full Parent/Child instances. Try a JPQL data query instead:\r\n  \r\n\r\n    @Query(value = &quot;SELECT parent.id, parent.name, child.id, child.status from Parent parent join parent.ChildList child where parent.id=:parentId and child.status in (&#39;Active&#39;)&quot;\r\n\r\nThis will return a List&lt;Object[]&gt;, with the Object[] containing the data from each row, with no need to use Spring specifications","title":"How to fix JPA Specification API with join on condition returns 2 query instead of 1?","body":"<p>You've got separate issues here. To fetch parent instances with its children in a single query, you need to look at fetch joins which are different from the 'join' semantics you've used - see <a href=\"https://docs.oracle.com/javaee/6/api/javax/persistence/criteria/FetchParent.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javaee/6/api/javax/persistence/criteria/FetchParent.html</a>. Calling <code>root.fetch(PARENT_.ChildList, JoinType.LEFT)</code> will cause the Parent and children to be fetched in the same SQL statement</p>\n<p>When you look at fetch joins though, you'll see that they do not support query filtering. When JPA returns managed entities, because it must manage changes to those instances, they must reflect exactly what is in the database. If you get a parent with only a partially populated list of children, it can't really know what to do when it saves the parent; should it modify that list or just ignore differences it finds from the database values. It is just not supported by the spec, and the query language doesn't allow it. You just can't fetch Parents and partial lists of the children on demand though JPA semantics.</p>\n<p>What you can do though is fetch the children yourself. The equivalent of</p>\n<pre><code>&quot;SELECT child, parent from Parent parent join parent.ChildList child where parent.id=:parentId and child.status in ('Active')&quot;\n</code></pre>\n<p>This will give you a list of Object[} containing child and parent pairs, but only active child instances. The Parent instance will all be the single instance with id equal to the value you pass in as a query parameter. If you access its parent.ChildList though, you will find all its children - so don't. Mark it as lazy and don't touch it, and use the returned child instances in your operations.</p>\n<p>Your query though is just asking for certain attributes from the tables, so I'm guessing you don't really need full Parent/Child instances. Try a JPQL data query instead:</p>\n<pre><code>@Query(value = &quot;SELECT parent.id, parent.name, child.id, child.status from Parent parent join parent.ChildList child where parent.id=:parentId and child.status in ('Active')&quot;\n</code></pre>\n<p>This will return a List&lt;Object[]&gt;, with the Object[] containing the data from each row, with no need to use Spring specifications</p>\n"}],"owner":{"account_id":24911565,"reputation":1,"user_id":18781053,"display_name":"Code Zeek"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":3674,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1649780598,"creation_date":1649755658,"question_id":71840199,"body_markdown":"I have a requirement to form a query using JPA as;\r\n\r\n    select PARENT.ID, PARENT.NAME, CHILD.ID, CHILD.STATUS FROM PARENT\r\n\r\n    LEFT OUTER JOIN CHILD ON PARENT.ID=CHILD.ID AND CHILD.STATUS in (&#39;Active&#39;)\r\n\r\n    WHERE PARENT.ID=?\r\n\r\nWhere child table is OneToMany relation to its parent. \r\n\r\nUsing JPA Spec API I have added below Predicate for Join\r\n```\r\n public static Specification&lt;PARENT&gt; hasChildrenWithStatus(List&lt;String&gt; status) {\r\n        return (root, criteriaQuery, criteriaBuilder)\r\n                -&gt; {\r\n            Join&lt;Object, Object&gt; join = root.join(PARENT_.ChildList, JoinType.LEFT);\r\n            join.on(join.get(CHILDREN_.STATUS).in(status));\r\n\r\n            return criteriaBuilder.conjunction();\r\n        };\r\n    }\r\n```\r\n\r\nand added other predicates for PARENTs, but my query executed as 2 different queries \r\n```\r\nHibernate: select PARENT.id as id1_0_, PARENT.name as namev2_0_ \r\nfrom PARENT PARENT \r\nleft outer join CHILD CHILD on (PARENT.id=CHILD.id) and (CHILD.status in(&#39;Active&#39;))\r\nwhere PARENT.id=? and 1=1\r\n\r\nHibernate: select CHILD.id as id5_2_0_, CHILD.status as stat4_2_1_ from CHILD CHILD where CHILD.id=?\r\n```\r\nHere in the second query fetches all records with child.id(without status check), thus giving me records that are in &quot;deleted&quot; status as well. \r\n\r\nHow can I fix this? Also, Can this be executed as single query as my requirement? \r\n\r\n\r\n\r\n ","title":"How to fix JPA Specification API with join on condition returns 2 query instead of 1?","body":"<p>I have a requirement to form a query using JPA as;</p>\n<pre><code>select PARENT.ID, PARENT.NAME, CHILD.ID, CHILD.STATUS FROM PARENT\n\nLEFT OUTER JOIN CHILD ON PARENT.ID=CHILD.ID AND CHILD.STATUS in ('Active')\n\nWHERE PARENT.ID=?\n</code></pre>\n<p>Where child table is OneToMany relation to its parent.</p>\n<p>Using JPA Spec API I have added below Predicate for Join</p>\n<pre><code> public static Specification&lt;PARENT&gt; hasChildrenWithStatus(List&lt;String&gt; status) {\n        return (root, criteriaQuery, criteriaBuilder)\n                -&gt; {\n            Join&lt;Object, Object&gt; join = root.join(PARENT_.ChildList, JoinType.LEFT);\n            join.on(join.get(CHILDREN_.STATUS).in(status));\n\n            return criteriaBuilder.conjunction();\n        };\n    }\n</code></pre>\n<p>and added other predicates for PARENTs, but my query executed as 2 different queries</p>\n<pre><code>Hibernate: select PARENT.id as id1_0_, PARENT.name as namev2_0_ \nfrom PARENT PARENT \nleft outer join CHILD CHILD on (PARENT.id=CHILD.id) and (CHILD.status in('Active'))\nwhere PARENT.id=? and 1=1\n\nHibernate: select CHILD.id as id5_2_0_, CHILD.status as stat4_2_1_ from CHILD CHILD where CHILD.id=?\n</code></pre>\n<p>Here in the second query fetches all records with child.id(without status check), thus giving me records that are in &quot;deleted&quot; status as well.</p>\n<p>How can I fix this? Also, Can this be executed as single query as my requirement?</p>\n"},{"tags":["java","list","count","stream"],"answers":[{"tags":[],"owner":{"account_id":6714862,"reputation":16230,"user_id":5176992,"display_name":"Eritrean"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1649780371,"creation_date":1649780371,"answer_id":71846082,"question_id":71845822,"body_markdown":"I think you are looking for something like \r\n\r\n    artifactList.stream()\r\n                .flatMap(artifact -&gt; artifact.getFindings().stream())\r\n                .filter(finding -&gt; finding.isChecked())\r\n                .count();","title":"How to count a nested collection in a List with Java Streams","body":"<p>I think you are looking for something like</p>\n<pre><code>artifactList.stream()\n            .flatMap(artifact -&gt; artifact.getFindings().stream())\n            .filter(finding -&gt; finding.isChecked())\n            .count();\n</code></pre>\n"}],"owner":{"account_id":6099776,"reputation":1781,"user_id":4759182,"display_name":"rasilvap"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":485,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71846082,"answer_count":1,"score":0,"last_activity_date":1649780371,"creation_date":1649779166,"question_id":71845822,"body_markdown":"I need to count the elements in the next list I have a listArtif list and for each of their elements I have a list of findings and for each of the findings objects I have a field called isChecked, so I need to count all the checked findings in the listArtif list. I&#39;ve done the next but I&#39;m getting the total of elements in the listArtif list.\r\n\r\n    artifactList.stream().map(artifact -&gt; artList.getFindings().stream().filter(finding -&gt; finding.isChecked()).count());\r\n\r\nAny ideas?\r\n\r\nThanks!","title":"How to count a nested collection in a List with Java Streams","body":"<p>I need to count the elements in the next list I have a listArtif list and for each of their elements I have a list of findings and for each of the findings objects I have a field called isChecked, so I need to count all the checked findings in the listArtif list. I've done the next but I'm getting the total of elements in the listArtif list.</p>\n<pre><code>artifactList.stream().map(artifact -&gt; artList.getFindings().stream().filter(finding -&gt; finding.isChecked()).count());\n</code></pre>\n<p>Any ideas?</p>\n<p>Thanks!</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1649772659,"post_id":71844200,"comment_id":126957345,"body_markdown":"That isn&#39;t a &quot;private class&quot;. What exactly is the error you&#39;re getting?","body":"That isn&#39;t a &quot;private class&quot;. What exactly is the error you&#39;re getting?"},{"owner":{"account_id":144187,"reputation":7338,"user_id":353046,"accept_rate":47,"display_name":"Mankind1023"},"score":0,"creation_date":1649772828,"post_id":71844200,"comment_id":126957421,"body_markdown":"I get &#39;Cannot access &#39;getStatus()&#39; if I try to do foo.getBody().getStatus(), or anything else. Just doing getBody() returns a ProcessStatusBody which gives the error &#39;path.ProcessStatusBody&#39; is not public&#39;, so I&#39;m not sure what you mean by it&#39;s not private.","body":"I get &#39;Cannot access &#39;getStatus()&#39; if I try to do foo.getBody().getStatus(), or anything else. Just doing getBody() returns a ProcessStatusBody which gives the error &#39;path.ProcessStatusBody&#39; is not public&#39;, so I&#39;m not sure what you mean by it&#39;s not private."},{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1649773031,"post_id":71844200,"comment_id":126957508,"body_markdown":"What are foo and path? It&#39;s **package-private** since you have no literal `private` modifier on the class. If you want to use this class outside of `ProcessStatusResult.java`  file, then you need to make it `static` and refer to it as `ProcessStatusResult.ProcessStatusBody`","body":"What are foo and path? It&#39;s <b>package-private</b> since you have no literal <code>private</code> modifier on the class. If you want to use this class outside of <code>ProcessStatusResult.java</code>  file, then you need to make it <code>static</code> and refer to it as <code>ProcessStatusResult.ProcessStatusBody</code>"},{"owner":{"account_id":14695242,"reputation":552,"user_id":10612806,"display_name":"Evgeni Enchev"},"score":0,"creation_date":1649776636,"post_id":71844200,"comment_id":126959120,"body_markdown":"Is this your design? Then create `getStatus()` method. If not then `ProcessStatusBody` is not meant to be accessed from outside the package. However don&#39;t make nothing static, this make no sense to me. Making the field static doesn&#39;t make it visible outside the package.","body":"Is this your design? Then create <code>getStatus()</code> method. If not then <code>ProcessStatusBody</code> is not meant to be accessed from outside the package. However don&#39;t make nothing static, this make no sense to me. Making the field static doesn&#39;t make it visible outside the package."},{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1649778314,"post_id":71844200,"comment_id":126959837,"body_markdown":"@EvgeniEnchev I was saying make the inner-class static, not the field","body":"@EvgeniEnchev I was saying make the inner-class static, not the field"},{"owner":{"account_id":9537825,"reputation":1490,"user_id":7275056,"display_name":"vsfDawg"},"score":0,"creation_date":1649780414,"post_id":71844200,"comment_id":126960699,"body_markdown":"The @Getter annotation makes it look like you are using Lombok to generate getters.  This should produce a getStatus() method after compilation.  You may have to do some configuration magic in your IDE to make it aware of the methods added by Lombok.  Note, you have defined the members without an access modifier so they are package-private.  As such, your test class _should_ have direct access (assuming its in the same package).  However, those members probably should be private so I wouldn&#39;t rely on that.","body":"The @Getter annotation makes it look like you are using Lombok to generate getters.  This should produce a getStatus() method after compilation.  You may have to do some configuration magic in your IDE to make it aware of the methods added by Lombok.  Note, you have defined the members without an access modifier so they are package-private.  As such, your test class <i>should</i> have direct access (assuming its in the same package).  However, those members probably should be private so I wouldn&#39;t rely on that."},{"owner":{"account_id":14695242,"reputation":552,"user_id":10612806,"display_name":"Evgeni Enchev"},"score":0,"creation_date":1649780426,"post_id":71844200,"comment_id":126960701,"body_markdown":"@OneCricketeer, even making the inner class static, and I don&#39;t see there is any inner class, from outside the package you don&#39;t see it. With `ProcessStatusResult.ProcessStatusBody` you access the inner class but from inside the package. Out of there no.","body":"@OneCricketeer, even making the inner class static, and I don&#39;t see there is any inner class, from outside the package you don&#39;t see it. With <code>ProcessStatusResult.ProcessStatusBody</code> you access the inner class but from inside the package. Out of there no."}],"answers":[{"tags":[],"owner":{"account_id":401843,"reputation":89788,"user_id":768644,"display_name":"rzwitserloot"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649777649,"creation_date":1649777649,"answer_id":71845456,"question_id":71844200,"body_markdown":"There are broadly speaking 3 different ways to tackle this problem.\r\n\r\n## The common way - (ab) use package private.\r\n\r\nIt&#39;s common to stick (unit&lt;sup&gt;1&lt;/sup&gt;) tests in the same package as the code it tests. Different &#39;source root&#39;, same package. You&#39;d have:\r\n\r\n```\r\nsrc/main/java/com/foo/Whatever.java\r\nsrc/test/java/com/foo/TestWhatever.java\r\n```\r\n\r\nWhen you do this, your test code can just &#39;see&#39; all package private stuff (because, same package).\r\n\r\nSome projects would like to highlight this a bit and have an annotation that indicates &#39;this item is package private for the sake of test code; we would have made it private otherwise&#39;, and if you really want to go all-out, you add linter tools that detect any attempt to interact with entities so marked from other source files in the same package (_not_ the test code) and flag it as an error.\r\n\r\nThese tools are, in my experience, unfortunately not commonly used and I&#39;m not readily aware of linter tools that do this. A somewhat common annotation for this is guava&#39;s [`@VisibleForTesting`](https://guava.dev/releases/19.0/api/docs/com/google/common/annotations/VisibleForTesting.html). It doesn&#39;t do anything except serve as documentation (for now - one could write a linter tool that actually checks for style violations, of course).\r\n\r\n## The uncommon way, reflection and mocking\r\n\r\nTest frameworks can do this but it severely hampers productivity. If you want to access your `status` variable, all you need to do is type `body.` and hit CTRL+SPACE or equivalent in your IDE and it&#39;ll be shown right there, you can just select it, you can CMD+click once you type or auto-complete it to be taken straight to its definition, and if you typo the name, your IDE will red-wavy-underline it.\r\n\r\nReplace `body.status` with something like `reflect.getField(body, &quot;status&quot;, ProcessStatus.class);` and it&#39;s a heck of a mess. It&#39;s long, ugly, mismatches generics to types (what if `status` is of type `List&lt;String&gt;`? `List&lt;String&gt;.class` isn&#39;t valid java. You could use reflection hackery to allow you to assign `reflect.getField` to anything you please, but now you have no type safety. If you mess up the type, you won&#39;t know until you run it. If you mess up the generics, you may not ever know, ouch.\r\n\r\nHence, this isn&#39;t great either, and is consequently not used often.\r\n\r\n## The nuanced way: That&#39;s not how it works.\r\n\r\n`private` perhaps just means __private__. It&#39;s not meant for consumption by anything &#39;external to the source&#39; file and that _includes_ the unit tests. No source file consists solely of 100% `private` everything - there is _some_ API you&#39;re supposed to plug into from &#39;outside&#39;, and test code can get at everything except `private` (so, _package private_, `protected`, and `public` is all accessible by test code). Test the public API parts, don&#39;t test the private stuff - after all, the normal idea behind `private` is that you&#39;re free to mess with these as much as you please, change what they do, change their signatures, all you need to check is what impact that has based solely on what else is in _this_ source file you are looking at.\r\n\r\nThere is benefit in not having to extend that to: &quot;... oh and you also need to revisit all the unit tests that interact directly with this&quot;.\r\n\r\nMake an actual public-ish API (package private if you wish, but you write it with the actual intent that code from outside this source file will want to use this feature) and test that. Or, if truly this field is not a detail that even other source files in the same package are meant to know about then __do not test it__ - it&#39;s too fine grained a test.\r\n\r\nThere are upsides and downsides to testing at such incredibly fine grained levels. Generally, that level of fine-grainedness makes tests simpler and more &#39;localized&#39; (any error the tests catch will be pointing right at the actual problem), but going that deeply means you need a heck of a lot of tests, most tests turn into the trivial, and it creates significant resistance to refactoring - after all, even a simple refactor requires modifying a lot of tests as well. You&#39;re also risking &quot;Copycat syndrome&quot;, where the same programmer writes both the unit test and the code that is being tested, and any mental error is therefore likely to exist in both, thus making the test completely useless.\r\n\r\nA solution to copycat syndrome is to disentangle the writing of the test with the writing of the code. This is obviously easy to do when one person writes the test and another writes the implementation, but you can do it on your own - just make sure there&#39;s time and a &#39;mental break&#39; between writing tests and writing the implementation, enough to prevent your brain from replaying the exact same reasoning when writing either (which is the likely path to making the same error twice in a row without realizing).\r\n\r\nHowever, when you disentangle like this, it becomes really weird and unwieldy to test with the granularity of &#39;testing the private stuff&#39; - testing like this tends to follow the notion of &#39;there is some API spec of sorts and that is what we test&#39;, and private stuff by definition isn&#39;t part of such a spec.\r\n\r\nWhether you like to write the tests first, or the tests last - the same principle applies. It&#39;s bizarre to write tests and, during the writing of them, already start cooking up the _private_ methods that you envision will be required to implement it: That&#39;s not your &#39;job&#39; as test writer.\r\n\r\nIt&#39;s similarly strange (slightly less so, perhaps) to write tests that test implementation choices.\r\n\r\nSO isn&#39;t intended for opinion so I won&#39;t spend more than two sentences on it, but my strong suggestion is that third option. `private` means: Not to be tested directly.\r\n\r\n&lt;sup&gt;1&lt;/sup&gt;) Really, any test where the scope of what it tests is clearly restricted to some &#39;unit&#39; of code that in your project&#39;s code style rules requires being in a single package. The two concepts (&#39;what do I stuff in packages&#39; and &#39;what does this test&#39; need to at least line up, or &#39;what do I test&#39; needs to be _more_ finegrained than that). In other words, integration tests that test the entire project don&#39;t get to use this strategy at all, but then if those are testing private variables, I&#39;m pretty sure you&#39;re doing something wrong.","title":"Java - Access private class","body":"<p>There are broadly speaking 3 different ways to tackle this problem.</p>\n<h2>The common way - (ab) use package private.</h2>\n<p>It's common to stick (unit<sup>1</sup>) tests in the same package as the code it tests. Different 'source root', same package. You'd have:</p>\n<pre><code>src/main/java/com/foo/Whatever.java\nsrc/test/java/com/foo/TestWhatever.java\n</code></pre>\n<p>When you do this, your test code can just 'see' all package private stuff (because, same package).</p>\n<p>Some projects would like to highlight this a bit and have an annotation that indicates 'this item is package private for the sake of test code; we would have made it private otherwise', and if you really want to go all-out, you add linter tools that detect any attempt to interact with entities so marked from other source files in the same package (<em>not</em> the test code) and flag it as an error.</p>\n<p>These tools are, in my experience, unfortunately not commonly used and I'm not readily aware of linter tools that do this. A somewhat common annotation for this is guava's <a href=\"https://guava.dev/releases/19.0/api/docs/com/google/common/annotations/VisibleForTesting.html\" rel=\"nofollow noreferrer\"><code>@VisibleForTesting</code></a>. It doesn't do anything except serve as documentation (for now - one could write a linter tool that actually checks for style violations, of course).</p>\n<h2>The uncommon way, reflection and mocking</h2>\n<p>Test frameworks can do this but it severely hampers productivity. If you want to access your <code>status</code> variable, all you need to do is type <code>body.</code> and hit CTRL+SPACE or equivalent in your IDE and it'll be shown right there, you can just select it, you can CMD+click once you type or auto-complete it to be taken straight to its definition, and if you typo the name, your IDE will red-wavy-underline it.</p>\n<p>Replace <code>body.status</code> with something like <code>reflect.getField(body, &quot;status&quot;, ProcessStatus.class);</code> and it's a heck of a mess. It's long, ugly, mismatches generics to types (what if <code>status</code> is of type <code>List&lt;String&gt;</code>? <code>List&lt;String&gt;.class</code> isn't valid java. You could use reflection hackery to allow you to assign <code>reflect.getField</code> to anything you please, but now you have no type safety. If you mess up the type, you won't know until you run it. If you mess up the generics, you may not ever know, ouch.</p>\n<p>Hence, this isn't great either, and is consequently not used often.</p>\n<h2>The nuanced way: That's not how it works.</h2>\n<p><code>private</code> perhaps just means <strong>private</strong>. It's not meant for consumption by anything 'external to the source' file and that <em>includes</em> the unit tests. No source file consists solely of 100% <code>private</code> everything - there is <em>some</em> API you're supposed to plug into from 'outside', and test code can get at everything except <code>private</code> (so, <em>package private</em>, <code>protected</code>, and <code>public</code> is all accessible by test code). Test the public API parts, don't test the private stuff - after all, the normal idea behind <code>private</code> is that you're free to mess with these as much as you please, change what they do, change their signatures, all you need to check is what impact that has based solely on what else is in <em>this</em> source file you are looking at.</p>\n<p>There is benefit in not having to extend that to: &quot;... oh and you also need to revisit all the unit tests that interact directly with this&quot;.</p>\n<p>Make an actual public-ish API (package private if you wish, but you write it with the actual intent that code from outside this source file will want to use this feature) and test that. Or, if truly this field is not a detail that even other source files in the same package are meant to know about then <strong>do not test it</strong> - it's too fine grained a test.</p>\n<p>There are upsides and downsides to testing at such incredibly fine grained levels. Generally, that level of fine-grainedness makes tests simpler and more 'localized' (any error the tests catch will be pointing right at the actual problem), but going that deeply means you need a heck of a lot of tests, most tests turn into the trivial, and it creates significant resistance to refactoring - after all, even a simple refactor requires modifying a lot of tests as well. You're also risking &quot;Copycat syndrome&quot;, where the same programmer writes both the unit test and the code that is being tested, and any mental error is therefore likely to exist in both, thus making the test completely useless.</p>\n<p>A solution to copycat syndrome is to disentangle the writing of the test with the writing of the code. This is obviously easy to do when one person writes the test and another writes the implementation, but you can do it on your own - just make sure there's time and a 'mental break' between writing tests and writing the implementation, enough to prevent your brain from replaying the exact same reasoning when writing either (which is the likely path to making the same error twice in a row without realizing).</p>\n<p>However, when you disentangle like this, it becomes really weird and unwieldy to test with the granularity of 'testing the private stuff' - testing like this tends to follow the notion of 'there is some API spec of sorts and that is what we test', and private stuff by definition isn't part of such a spec.</p>\n<p>Whether you like to write the tests first, or the tests last - the same principle applies. It's bizarre to write tests and, during the writing of them, already start cooking up the <em>private</em> methods that you envision will be required to implement it: That's not your 'job' as test writer.</p>\n<p>It's similarly strange (slightly less so, perhaps) to write tests that test implementation choices.</p>\n<p>SO isn't intended for opinion so I won't spend more than two sentences on it, but my strong suggestion is that third option. <code>private</code> means: Not to be tested directly.</p>\n<p><sup>1</sup>) Really, any test where the scope of what it tests is clearly restricted to some 'unit' of code that in your project's code style rules requires being in a single package. The two concepts ('what do I stuff in packages' and 'what does this test' need to at least line up, or 'what do I test' needs to be <em>more</em> finegrained than that). In other words, integration tests that test the entire project don't get to use this strategy at all, but then if those are testing private variables, I'm pretty sure you're doing something wrong.</p>\n"},{"tags":[],"owner":{"account_id":14695242,"reputation":552,"user_id":10612806,"display_name":"Evgeni Enchev"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649779862,"creation_date":1649779862,"answer_id":71845966,"question_id":71844200,"body_markdown":"Well, here you have some working code using reflection:\r\n\r\n\r\n\t// Assuming you have the objects\r\n\tProcessStatusResult processStatusResult = new ProcessStatusResult(new ProcessStatus());\r\n\tProcessStatusBody processStatusBody = processStatusResult.getBody();\r\n\r\n\ttry {\r\n\t\t// The status field, you know the name, right?\r\n\t\tField privateField = ProcessStatusBody.class.getDeclaredField(&quot;status&quot;);\r\n\r\n\t\t// Set the accessibility to true since it is not visible\r\n\t\tprivateField.setAccessible(true);\r\n\r\n\t\t// Here we go\r\n\t\tProcessStatus status = (ProcessStatus) privateField.get(processStatusBody);\r\n\t\t\r\n\t\tSystem.out.println(status);\r\n\t\t\r\n\t} catch (NoSuchFieldException | SecurityException | IllegalArgumentException | IllegalAccessException e) {\r\n\t\t// do something\r\n\t}\r\n\r\nSorry, I didn&#39;t realize you said: &quot;*Is there a way to use reflection...*&quot;","title":"Java - Access private class","body":"<p>Well, here you have some working code using reflection:</p>\n<pre><code>// Assuming you have the objects\nProcessStatusResult processStatusResult = new ProcessStatusResult(new ProcessStatus());\nProcessStatusBody processStatusBody = processStatusResult.getBody();\n\ntry {\n    // The status field, you know the name, right?\n    Field privateField = ProcessStatusBody.class.getDeclaredField(&quot;status&quot;);\n\n    // Set the accessibility to true since it is not visible\n    privateField.setAccessible(true);\n\n    // Here we go\n    ProcessStatus status = (ProcessStatus) privateField.get(processStatusBody);\n    \n    System.out.println(status);\n    \n} catch (NoSuchFieldException | SecurityException | IllegalArgumentException | IllegalAccessException e) {\n    // do something\n}\n</code></pre>\n<p>Sorry, I didn't realize you said: &quot;<em>Is there a way to use reflection...</em>&quot;</p>\n"}],"owner":{"account_id":144187,"reputation":7338,"user_id":353046,"accept_rate":47,"display_name":"Mankind1023"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":130,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1649779862,"creation_date":1649772534,"question_id":71844200,"body_markdown":"I know how to access private variables, but I have the following class that I&#39;m trying to test:\r\n\r\nProcessStatusResult:\r\n\r\n    @Getter\r\n    class ProcessStatusBody {\r\n      public ProcessStatusBody(ProcessStatus status) {\r\n        this.status = status;\r\n      }\r\n      ProcessStatus status;\r\n    }\r\n    \r\n    @Getter\r\n    public class ProcessStatusResult {\r\n      ProcessStatusBody body;\r\n      ...\r\n      \r\n      public ProcessStatusResult(ProcessStatus status) {\r\n        body = new ProcessStatusBody(status);\r\n        ...\r\n      }\r\n    }\r\n\r\nIn my test, I need to get the ProcessStatus inside ProcessStatusBody to validate it, but I have no idea how to do that.\r\n\r\nIs there a way to use reflection (or some other method) to access this without having to add a getter in ProcessStatusResult for the sake of the test alone?","title":"Java - Access private class","body":"<p>I know how to access private variables, but I have the following class that I'm trying to test:</p>\n<p>ProcessStatusResult:</p>\n<pre><code>@Getter\nclass ProcessStatusBody {\n  public ProcessStatusBody(ProcessStatus status) {\n    this.status = status;\n  }\n  ProcessStatus status;\n}\n\n@Getter\npublic class ProcessStatusResult {\n  ProcessStatusBody body;\n  ...\n  \n  public ProcessStatusResult(ProcessStatus status) {\n    body = new ProcessStatusBody(status);\n    ...\n  }\n}\n</code></pre>\n<p>In my test, I need to get the ProcessStatus inside ProcessStatusBody to validate it, but I have no idea how to do that.</p>\n<p>Is there a way to use reflection (or some other method) to access this without having to add a getter in ProcessStatusResult for the sake of the test alone?</p>\n"},{"tags":["java","elasticsearch","spring-data","jhipster","r2dbc"],"owner":{"account_id":15797607,"reputation":53,"user_id":11399028,"display_name":"Oussama Hadj Aissa"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":712,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1649779803,"creation_date":1649769600,"question_id":71843478,"body_markdown":"I have a problem with spring data and the ```@Transient``` annotation, in fact I have a class as follows: \r\n\r\n\r\n    @Table(&quot;example&quot;)\r\n    @Document(indexName = &quot;example&quot;)\r\n    public class Example implements Serializable {\r\n\r\n      @Id\r\n      @Column(&quot;id&quot;)\r\n      private Long id;\r\n      \r\n      @Transient\r\n      @Field(type = FieldType.Nested, includeInParent = true)\r\n      private User user;\r\n\r\n      @Column(&quot;user_id&quot;)\r\n      private Long userId;\r\n\r\n      ...getter and setter \r\n    }\r\n\r\nI have a relational database and an elasticsearch. \r\n\r\nIn the database I just want to save the id and userId (and it works with this code). \r\n\r\nbut in elasticsearch I want to save the id and the user.  \r\n\r\nIf I remove ```@Transient``` I get an error with R2dbc:\r\n\r\n    Nested entities are not supported in r2dbcEntityTemplate.insert\r\n\r\nDoes anyone know how to ignore it with R2dbc and take it into account with elasticsearch?  ","title":"Spring data: How to ignore field for relational database but not in elasticsearch?","body":"<p>I have a problem with spring data and the <code>@Transient</code> annotation, in fact I have a class as follows:</p>\n<pre><code>@Table(&quot;example&quot;)\n@Document(indexName = &quot;example&quot;)\npublic class Example implements Serializable {\n\n  @Id\n  @Column(&quot;id&quot;)\n  private Long id;\n  \n  @Transient\n  @Field(type = FieldType.Nested, includeInParent = true)\n  private User user;\n\n  @Column(&quot;user_id&quot;)\n  private Long userId;\n\n  ...getter and setter \n}\n</code></pre>\n<p>I have a relational database and an elasticsearch.</p>\n<p>In the database I just want to save the id and userId (and it works with this code).</p>\n<p>but in elasticsearch I want to save the id and the user.</p>\n<p>If I remove <code>@Transient</code> I get an error with R2dbc:</p>\n<pre><code>Nested entities are not supported in r2dbcEntityTemplate.insert\n</code></pre>\n<p>Does anyone know how to ignore it with R2dbc and take it into account with elasticsearch?</p>\n"},{"tags":["java","maven","jacoco","jacoco-maven-plugin"],"comments":[{"owner":{"account_id":886614,"reputation":29561,"user_id":925913,"accept_rate":82,"display_name":"Andrew Cheong"},"score":0,"creation_date":1587800974,"post_id":61422239,"comment_id":108655983,"body_markdown":"I don&#39;t know the answer but take a look at this thread: https://stackoverflow.com/questions/12269558/maven-jacoco-plugin-error.","body":"I don&#39;t know the answer but take a look at this thread: <a href=\"https://stackoverflow.com/questions/12269558/maven-jacoco-plugin-error\" title=\"maven jacoco plugin error\">stackoverflow.com/questions/12269558/maven-jacoco-plugin-err&zwnj;&#8203;or</a>."},{"owner":{"account_id":5241088,"reputation":737,"user_id":4188097,"accept_rate":56,"display_name":"Ryan"},"score":0,"creation_date":1587802985,"post_id":61422239,"comment_id":108656516,"body_markdown":"@AndrewCheong Just tried that and no luck, even with very large timeout values. Another thing I should mention is that even before I was having this problem, my mvn hangs for quite some time after finishing the last test and doesn&#39;t seem to be doing anything.","body":"@AndrewCheong Just tried that and no luck, even with very large timeout values. Another thing I should mention is that even before I was having this problem, my mvn hangs for quite some time after finishing the last test and doesn&#39;t seem to be doing anything."},{"owner":{"account_id":1042328,"reputation":7972,"user_id":1048093,"accept_rate":75,"display_name":"wemu"},"score":0,"creation_date":1587803222,"post_id":61422239,"comment_id":108656585,"body_markdown":"can you execute the maven command you are using with -X to see more log output? and the error message from jacoco is related to it trying to parse some file? What java version are you running?","body":"can you execute the maven command you are using with -X to see more log output? and the error message from jacoco is related to it trying to parse some file? What java version are you running?"},{"owner":{"account_id":8396800,"reputation":3955,"user_id":6303579,"display_name":"QuickSilver"},"score":0,"creation_date":1587833370,"post_id":61422239,"comment_id":108667092,"body_markdown":"please post your error stack trace as well for more insight","body":"please post your error stack trace as well for more insight"},{"owner":{"account_id":5241088,"reputation":737,"user_id":4188097,"accept_rate":56,"display_name":"Ryan"},"score":0,"creation_date":1587848332,"post_id":61422239,"comment_id":108672682,"body_markdown":"@wemu Edited my post to inlcude the -X trace after the tests finish. The project uses java 1.8","body":"@wemu Edited my post to inlcude the -X trace after the tests finish. The project uses java 1.8"},{"owner":{"account_id":5241088,"reputation":737,"user_id":4188097,"accept_rate":56,"display_name":"Ryan"},"score":0,"creation_date":1587848345,"post_id":61422239,"comment_id":108672685,"body_markdown":"@QuickSilver Edited post to include trace","body":"@QuickSilver Edited post to include trace"},{"owner":{"account_id":1042328,"reputation":7972,"user_id":1048093,"accept_rate":75,"display_name":"wemu"},"score":0,"creation_date":1587850697,"post_id":61422239,"comment_id":108673438,"body_markdown":"well. still hard to tell what happened. either some dependency got upgraded or did you change how you run tests? To try to get closer I would remove some tests until the error is gone and then re-add them &quot;one by one&quot;. Maybe that gives a hint where it is coming from. Some of the libs in that stacktrace are very old. can you run &quot;mvn -v&quot; once?","body":"well. still hard to tell what happened. either some dependency got upgraded or did you change how you run tests? To try to get closer I would remove some tests until the error is gone and then re-add them &quot;one by one&quot;. Maybe that gives a hint where it is coming from. Some of the libs in that stacktrace are very old. can you run &quot;mvn -v&quot; once?"},{"owner":{"account_id":5241088,"reputation":737,"user_id":4188097,"accept_rate":56,"display_name":"Ryan"},"score":0,"creation_date":1587853835,"post_id":61422239,"comment_id":108674384,"body_markdown":"@wemu So &quot;mvn -v&quot; returns 3.6.3. I also believe I have located the troublesome test file as when I exclude it everything runs fine and it even stops hanging. I just don&#39;t understand what would be wrong in that file that would cause a hang (there are no loops, the only &quot;files&quot; being done are modifying the default System.out/err streams to a separate print writer) given that most of it is string manipulation. I then went through the tests and disabled each one at a time and it would only work once all were disabled, meaning something may be wrong with the file it is testing?","body":"@wemu So &quot;mvn -v&quot; returns 3.6.3. I also believe I have located the troublesome test file as when I exclude it everything runs fine and it even stops hanging. I just don&#39;t understand what would be wrong in that file that would cause a hang (there are no loops, the only &quot;files&quot; being done are modifying the default System.out/err streams to a separate print writer) given that most of it is string manipulation. I then went through the tests and disabled each one at a time and it would only work once all were disabled, meaning something may be wrong with the file it is testing?"},{"owner":{"account_id":5241088,"reputation":737,"user_id":4188097,"accept_rate":56,"display_name":"Ryan"},"score":0,"creation_date":1587853878,"post_id":61422239,"comment_id":108674395,"body_markdown":"But what would the tested file be doing that causes a hang in the mvn test? It doesn&#39;t hang at all when I do it in eclipse","body":"But what would the tested file be doing that causes a hang in the mvn test? It doesn&#39;t hang at all when I do it in eclipse"},{"owner":{"account_id":1042328,"reputation":7972,"user_id":1048093,"accept_rate":75,"display_name":"wemu"},"score":0,"creation_date":1587917259,"post_id":61422239,"comment_id":108692195,"body_markdown":"&quot;modifying the default System.out/err streams to a separate print writer&quot; sounds a bit weird. what sort of test do you write? Without the test class it will be hard to tell. It could be just some sort or test order issue. IDEs often execute tests in a different order than CLIs - as there is no guarantee anyway for test ordering it should not matter as it may change any time.Are other tests doing a similar thing? But it seems the troublesome test class is found? So are there issues in test setup or improper teardown?","body":"&quot;modifying the default System.out/err streams to a separate print writer&quot; sounds a bit weird. what sort of test do you write? Without the test class it will be hard to tell. It could be just some sort or test order issue. IDEs often execute tests in a different order than CLIs - as there is no guarantee anyway for test ordering it should not matter as it may change any time.Are other tests doing a similar thing? But it seems the troublesome test class is found? So are there issues in test setup or improper teardown?"},{"owner":{"account_id":5241088,"reputation":737,"user_id":4188097,"accept_rate":56,"display_name":"Ryan"},"score":0,"creation_date":1587934799,"post_id":61422239,"comment_id":108699269,"body_markdown":"@wemu I was writing tests that check the output. I just now changed my code to allow myself to inject a PrintWriter instead of setting System.out but I am still getting the issue. Except now I get an &quot;EOFException&quot; from JaCoco.","body":"@wemu I was writing tests that check the output. I just now changed my code to allow myself to inject a PrintWriter instead of setting System.out but I am still getting the issue. Except now I get an &quot;EOFException&quot; from JaCoco."},{"owner":{"account_id":5241088,"reputation":737,"user_id":4188097,"accept_rate":56,"display_name":"Ryan"},"score":0,"creation_date":1587935707,"post_id":61422239,"comment_id":108699568,"body_markdown":"@wemu Ah nevermind, I found the solution. I had a Scanner reading from System.in, and even though I was never using this Scanner in my tests I did close the scanner at the end of my tests. Once I removed that close statement it no longer hangs and the problem goes away. Thanks for all your help!","body":"@wemu Ah nevermind, I found the solution. I had a Scanner reading from System.in, and even though I was never using this Scanner in my tests I did close the scanner at the end of my tests. Once I removed that close statement it no longer hangs and the problem goes away. Thanks for all your help!"}],"answers":[{"tags":[],"owner":{"account_id":88629,"reputation":9961,"user_id":244993,"display_name":"Godin"},"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1614864831,"creation_date":1587813915,"answer_id":61424855,"question_id":61422239,"body_markdown":"&gt; Unknown block type\r\n\r\nduring the execution of `org.jacoco:jacoco-maven-plugin:0.8.5:report` indicates corrupted `jacoco.exec` file.\r\n\r\nThis file is produced by JaCoCo agent at the termination of JVM with tests using [JVM shutdown hook][1].\r\n\r\nCorruption of file typically happens when JVM with tests is hard-killed instead of proper graceful successful termination.\r\n\r\n&gt; my mvn hangs for quite some time after finishing the last test and doesn&#39;t seem to be doing anything\r\n\r\nis IMO a confirmation that JVM with tests is not terminated gracefully, because this typically indicates that `maven-surefire-plugin` waits for termination of your tests for some time and then kills JVM - see similar issue https://github.com/jacoco/jacoco/issues/1042\r\n\r\nAll in all, please fix your code/tests - JVM with tests should terminate gracefully.\r\n\r\n----\r\n\r\n&gt; I also believe I have located the troublesome test file as when I exclude it everything runs fine and it even stops hanging. I just don&#39;t understand what would be wrong in that file that would cause a hang (there are no loops, the only &quot;files&quot; being done are modifying the default System.out/err streams to a separate print writer) given that most of it is string manipulation.\r\n\r\nQuoting http://maven.apache.org/surefire/maven-surefire-plugin/faq.html for `maven-surefire-plugin` version `3.0.0-M4`:\r\n\r\n&gt; It would be even worse **if you override the Java stream by System.setOut** because the stream is also supposed to be corrupted but the Maven will never see the tests finished and **build may hang**.\r\n\r\n\r\n  [1]: http://(%20https://docs.oracle.com/javase/8/docs/api/java/lang/Runtime.html#addShutdownHook-java.lang.Thread-%20)","title":"JaCoco MVN unknown block type","body":"<blockquote>\n<p>Unknown block type</p>\n</blockquote>\n<p>during the execution of <code>org.jacoco:jacoco-maven-plugin:0.8.5:report</code> indicates corrupted <code>jacoco.exec</code> file.</p>\n<p>This file is produced by JaCoCo agent at the termination of JVM with tests using <a href=\"http://(%20https://docs.oracle.com/javase/8/docs/api/java/lang/Runtime.html#addShutdownHook-java.lang.Thread-%20)\" rel=\"nofollow noreferrer\">JVM shutdown hook</a>.</p>\n<p>Corruption of file typically happens when JVM with tests is hard-killed instead of proper graceful successful termination.</p>\n<blockquote>\n<p>my mvn hangs for quite some time after finishing the last test and doesn't seem to be doing anything</p>\n</blockquote>\n<p>is IMO a confirmation that JVM with tests is not terminated gracefully, because this typically indicates that <code>maven-surefire-plugin</code> waits for termination of your tests for some time and then kills JVM - see similar issue <a href=\"https://github.com/jacoco/jacoco/issues/1042\" rel=\"nofollow noreferrer\">https://github.com/jacoco/jacoco/issues/1042</a></p>\n<p>All in all, please fix your code/tests - JVM with tests should terminate gracefully.</p>\n<hr />\n<blockquote>\n<p>I also believe I have located the troublesome test file as when I exclude it everything runs fine and it even stops hanging. I just don't understand what would be wrong in that file that would cause a hang (there are no loops, the only &quot;files&quot; being done are modifying the default System.out/err streams to a separate print writer) given that most of it is string manipulation.</p>\n</blockquote>\n<p>Quoting <a href=\"http://maven.apache.org/surefire/maven-surefire-plugin/faq.html\" rel=\"nofollow noreferrer\">http://maven.apache.org/surefire/maven-surefire-plugin/faq.html</a> for <code>maven-surefire-plugin</code> version <code>3.0.0-M4</code>:</p>\n<blockquote>\n<p>It would be even worse <strong>if you override the Java stream by System.setOut</strong> because the stream is also supposed to be corrupted but the Maven will never see the tests finished and <strong>build may hang</strong>.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":5261242,"reputation":7685,"user_id":4214921,"display_name":"potame"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1649779574,"creation_date":1610010384,"answer_id":65609437,"question_id":61422239,"body_markdown":"I was having quite a similar message, performing an `mvn install` yielding a JaCoCo error (the difference being a `Unknown block type 45` error instead of `Unknown block type 77` like in the original question):\r\n\r\n    [ERROR] Failed to execute goal org.jacoco:jacoco-maven-plugin:0.8.5:report (report) on project UMLEditor: An error has occurred in JaCoCo report generation.: Error while creating report: Unknown block type 45. -&gt; [Help 1]\r\n\r\nI got rid of this error simply by performing an `mvn clean` and relaunching the build.","title":"JaCoco MVN unknown block type","body":"<p>I was having quite a similar message, performing an <code>mvn install</code> yielding a JaCoCo error (the difference being a <code>Unknown block type 45</code> error instead of <code>Unknown block type 77</code> like in the original question):</p>\n<pre><code>[ERROR] Failed to execute goal org.jacoco:jacoco-maven-plugin:0.8.5:report (report) on project UMLEditor: An error has occurred in JaCoCo report generation.: Error while creating report: Unknown block type 45. -&gt; [Help 1]\n</code></pre>\n<p>I got rid of this error simply by performing an <code>mvn clean</code> and relaunching the build.</p>\n"}],"owner":{"account_id":5241088,"reputation":737,"user_id":4188097,"accept_rate":56,"display_name":"Ryan"},"comment_count":12,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7622,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"accepted_answer_id":61424855,"answer_count":2,"score":7,"last_activity_date":1649779574,"creation_date":1587799021,"question_id":61422239,"body_markdown":"So I&#39;m using the JaCoco maven plugin to automatically generate code coverage reports so I can then send them to codecov to display on GitHub. All of a sudden I&#39;m getting a build failure from JaCoco saying &quot;Unknown block type&quot;. This wasn&#39;t happening the yesterday so I don&#39;t know why it happens now. Here is the relevant part of my pom.xml\r\n\r\n    &lt;plugin&gt;\r\n      &lt;groupId&gt;org.jacoco&lt;/groupId&gt;\r\n      &lt;artifactId&gt;jacoco-maven-plugin&lt;/artifactId&gt;\r\n      &lt;version&gt;0.8.5&lt;/version&gt;\r\n      &lt;executions&gt;\r\n      \t&lt;execution&gt;\r\n      \t  &lt;goals&gt;\r\n      \t    &lt;goal&gt;prepare-agent&lt;/goal&gt;\r\n      \t  &lt;/goals&gt;\r\n      \t&lt;/execution&gt;\r\n      \t&lt;execution&gt;\r\n      \t  &lt;id&gt;report&lt;/id&gt;\r\n      \t  &lt;phase&gt;test&lt;/phase&gt;\r\n      \t  &lt;goals&gt;\r\n      \t    &lt;goal&gt;report&lt;/goal&gt;\r\n       \t  &lt;/goals&gt;\r\n        &lt;/execution&gt;\r\n      &lt;/executions&gt;\r\n    &lt;/plugin&gt;\r\n\r\nHow do I fix this to properly generate coverage reports?\r\n\r\n-X trace\r\n\r\n    [DEBUG] Configuring mojo org.jacoco:jacoco-maven-plugin:0.8.5:report from plugin realm ClassRealm[plugin&gt;org.jacoco:jacoco-maven-plugin:0.8.5, parent: jdk.internal.loader.ClassLoaders$AppClassLoader@55054057]\r\n    [DEBUG] Setting property: classpath.resource.loader.class =&gt; &#39;org.codehaus.plexus.velocity.ContextClassLoaderResourceLoader&#39;.\r\n    [DEBUG] Setting property: site.resource.loader.class =&gt; &#39;org.codehaus.plexus.velocity.SiteResourceLoader&#39;.\r\n    [DEBUG] Setting property: velocimacro.messages.on =&gt; &#39;false&#39;.\r\n    [DEBUG] Setting property: runtime.log.invalid.references =&gt; &#39;false&#39;.\r\n    [DEBUG] Setting property: resource.loader =&gt; &#39;classpath,site&#39;.\r\n    [DEBUG] Setting property: velocimacro.permissions.allow.inline.to.replace.global =&gt; &#39;true&#39;.\r\n    [DEBUG] Setting property: resource.manager.logwhenfound =&gt; &#39;false&#39;.\r\n    [DEBUG] *******************************************************************\r\n    [DEBUG] Starting Apache Velocity v1.5 (compiled: 2007-02-22 08:52:29)\r\n    [DEBUG] RuntimeInstance initializing.\r\n    [DEBUG] Default Properties File: org/apache/velocity/runtime/defaults/velocity.properties\r\n    [DEBUG] LogSystem has been deprecated. Please use a LogChute implementation.\r\n    [DEBUG] Default ResourceManager initializing. (class org.apache.velocity.runtime.resource.ResourceManagerImpl)\r\n    [DEBUG] ResourceLoader instantiated: org.codehaus.plexus.velocity.ContextClassLoaderResourceLoader\r\n    [DEBUG] ResourceLoader instantiated: org.codehaus.plexus.velocity.SiteResourceLoader\r\n    [DEBUG] ResourceCache: initialized (class org.apache.velocity.runtime.resource.ResourceCacheImpl)\r\n    [DEBUG] Default ResourceManager initialization complete.\r\n    [DEBUG] Loaded System Directive: org.apache.velocity.runtime.directive.Literal\r\n    [DEBUG] Loaded System Directive: org.apache.velocity.runtime.directive.Macro\r\n    [DEBUG] Loaded System Directive: org.apache.velocity.runtime.directive.Parse\r\n    [DEBUG] Loaded System Directive: org.apache.velocity.runtime.directive.Include\r\n    [DEBUG] Loaded System Directive: org.apache.velocity.runtime.directive.Foreach\r\n    [DEBUG] Created &#39;20&#39; parsers.\r\n    [DEBUG] Velocimacro : initialization starting.\r\n    [DEBUG] Velocimacro : allowInline = true : VMs can be defined inline in templates\r\n    [DEBUG] Velocimacro : allowInlineToOverride = true : VMs defined inline may replace previous VM definitions\r\n    [DEBUG] Velocimacro : allowInlineLocal = false : VMs defined inline will be global in scope if allowed.\r\n    [DEBUG] Velocimacro : autoload off : VM system will not automatically reload global library macros\r\n    [DEBUG] Velocimacro : Velocimacro : initialization complete.\r\n    [DEBUG] RuntimeInstance successfully initialized.\r\n    [DEBUG] Configuring mojo &#39;org.jacoco:jacoco-maven-plugin:0.8.5:report&#39; with basic configurator --&gt;\r\n    [DEBUG]   (f) dataFile = /mnt/a/Documents/school/college/courses/csci420/UMLEditor/target/jacoco.exec\r\n    [DEBUG]   (f) outputDirectory = /mnt/a/Documents/school/college/courses/csci420/UMLEditor/target/site/jacoco\r\n    [DEBUG]   (f) outputEncoding = UTF-8\r\n    [DEBUG]   (f) project = MavenProject: UMLEditor:UMLEditor:0.0.1-SNAPSHOT @ /mnt/a/Documents/school/college/courses/csci420/UMLEditor/pom.xml\r\n    [DEBUG]   (f) skip = false\r\n    [DEBUG]   (f) sourceEncoding = UTF-8\r\n    [DEBUG]   (f) title = UMLEditor\r\n    [DEBUG] -- end configuration --\r\n    [INFO] Loading execution data file /mnt/a/Documents/school/college/courses/csci420/UMLEditor/target/jacoco.exec\r\n    [INFO] ------------------------------------------------------------------------\r\n    [INFO] BUILD FAILURE\r\n    [INFO] ------------------------------------------------------------------------\r\n    [INFO] Total time:  36.600 s\r\n    [INFO] Finished at: 2020-04-25T04:24:50-04:00\r\n    [INFO] ------------------------------------------------------------------------\r\n    [ERROR] Failed to execute goal org.jacoco:jacoco-maven-plugin:0.8.5:report (report) on project UMLEditor: An error has occurred in JaCoCo report generation.: Error while creating report: Unknown block type 77. -&gt; [Help 1]\r\n    org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.jacoco:jacoco-maven-plugin:0.8.5:report (report) on project UMLEditor: An error has occurred in JaCoCo report generation.\r\n        at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:215)\r\n        at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:156)\r\n        at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:148)\r\n        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:117)\r\n        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:81)\r\n        at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:56)\r\n        at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128)\r\n        at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:305)\r\n        at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)\r\n        at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)\r\n        at org.apache.maven.cli.MavenCli.execute (MavenCli.java:957)\r\n        at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:289)\r\n        at org.apache.maven.cli.MavenCli.main (MavenCli.java:193)\r\n        at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\r\n        at jdk.internal.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:62)\r\n        at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\r\n        at java.lang.reflect.Method.invoke (Method.java:566)\r\n        at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:282)\r\n        at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:225)\r\n        at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:406)\r\n        at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:347)\r\n    Caused by: org.apache.maven.plugin.MojoExecutionException: An error has occurred in JaCoCo report generation.\r\n        at org.jacoco.maven.AbstractReportMojo.execute (AbstractReportMojo.java:168)\r\n        at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:137)\r\n        at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:210)\r\n        at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:156)\r\n        at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:148)\r\n        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:117)\r\n        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:81)\r\n        at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:56)\r\n        at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128)\r\n        at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:305)\r\n        at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)\r\n        at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)\r\n        at org.apache.maven.cli.MavenCli.execute (MavenCli.java:957)\r\n        at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:289)\r\n        at org.apache.maven.cli.MavenCli.main (MavenCli.java:193)\r\n        at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\r\n        at jdk.internal.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:62)\r\n        at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\r\n        at java.lang.reflect.Method.invoke (Method.java:566)\r\n        at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:282)\r\n        at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:225)\r\n        at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:406)\r\n        at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:347)\r\n    Caused by: org.apache.maven.reporting.MavenReportException: Error while creating report: Unknown block type 77.\r\n        at org.jacoco.maven.AbstractReportMojo.executeReport (AbstractReportMojo.java:184)\r\n        at org.jacoco.maven.AbstractReportMojo.execute (AbstractReportMojo.java:166)\r\n        at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:137)\r\n        at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:210)\r\n        at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:156)\r\n        at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:148)\r\n        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:117)\r\n        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:81)\r\n        at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:56)\r\n        at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128)\r\n        at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:305)\r\n        at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)\r\n        at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)\r\n        at org.apache.maven.cli.MavenCli.execute (MavenCli.java:957)\r\n        at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:289)\r\n        at org.apache.maven.cli.MavenCli.main (MavenCli.java:193)\r\n        at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\r\n        at jdk.internal.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:62)\r\n        at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\r\n        at java.lang.reflect.Method.invoke (Method.java:566)\r\n        at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:282)\r\n        at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:225)\r\n        at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:406)\r\n        at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:347)\r\n    Caused by: java.io.IOException: Unknown block type 77.\r\n        at org.jacoco.core.data.ExecutionDataReader.readBlock (ExecutionDataReader.java:119)\r\n        at org.jacoco.core.data.ExecutionDataReader.read (ExecutionDataReader.java:93)\r\n        at org.jacoco.core.tools.ExecFileLoader.load (ExecFileLoader.java:60)\r\n        at org.jacoco.core.tools.ExecFileLoader.load (ExecFileLoader.java:74)\r\n        at org.jacoco.maven.ReportSupport.loadExecutionData (ReportSupport.java:89)\r\n        at org.jacoco.maven.ReportMojo.loadExecutionData (ReportMojo.java:61)\r\n        at org.jacoco.maven.AbstractReportMojo.executeReport (AbstractReportMojo.java:178)\r\n        at org.jacoco.maven.AbstractReportMojo.execute (AbstractReportMojo.java:166)\r\n        at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:137)\r\n        at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:210)\r\n        at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:156)\r\n        at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:148)\r\n        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:117)\r\n        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:81)\r\n        at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:56)\r\n        at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128)\r\n        at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:305)\r\n        at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)\r\n        at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)\r\n        at org.apache.maven.cli.MavenCli.execute (MavenCli.java:957)\r\n        at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:289)\r\n        at org.apache.maven.cli.MavenCli.main (MavenCli.java:193)\r\n        at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\r\n        at jdk.internal.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:62)\r\n        at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\r\n        at java.lang.reflect.Method.invoke (Method.java:566)\r\n        at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:282)\r\n        at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:225)\r\n        at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:406)\r\n        at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:347)\r\n    [ERROR]\r\n    [ERROR]\r\n    [ERROR] For more information about the errors and possible solutions, please read the following articles:\r\n    [ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException","title":"JaCoco MVN unknown block type","body":"<p>So I'm using the JaCoco maven plugin to automatically generate code coverage reports so I can then send them to codecov to display on GitHub. All of a sudden I'm getting a build failure from JaCoco saying \"Unknown block type\". This wasn't happening the yesterday so I don't know why it happens now. Here is the relevant part of my pom.xml</p>\n\n<pre><code>&lt;plugin&gt;\n  &lt;groupId&gt;org.jacoco&lt;/groupId&gt;\n  &lt;artifactId&gt;jacoco-maven-plugin&lt;/artifactId&gt;\n  &lt;version&gt;0.8.5&lt;/version&gt;\n  &lt;executions&gt;\n    &lt;execution&gt;\n      &lt;goals&gt;\n        &lt;goal&gt;prepare-agent&lt;/goal&gt;\n      &lt;/goals&gt;\n    &lt;/execution&gt;\n    &lt;execution&gt;\n      &lt;id&gt;report&lt;/id&gt;\n      &lt;phase&gt;test&lt;/phase&gt;\n      &lt;goals&gt;\n        &lt;goal&gt;report&lt;/goal&gt;\n      &lt;/goals&gt;\n    &lt;/execution&gt;\n  &lt;/executions&gt;\n&lt;/plugin&gt;\n</code></pre>\n\n<p>How do I fix this to properly generate coverage reports?</p>\n\n<p>-X trace</p>\n\n<pre><code>[DEBUG] Configuring mojo org.jacoco:jacoco-maven-plugin:0.8.5:report from plugin realm ClassRealm[plugin&gt;org.jacoco:jacoco-maven-plugin:0.8.5, parent: jdk.internal.loader.ClassLoaders$AppClassLoader@55054057]\n[DEBUG] Setting property: classpath.resource.loader.class =&gt; 'org.codehaus.plexus.velocity.ContextClassLoaderResourceLoader'.\n[DEBUG] Setting property: site.resource.loader.class =&gt; 'org.codehaus.plexus.velocity.SiteResourceLoader'.\n[DEBUG] Setting property: velocimacro.messages.on =&gt; 'false'.\n[DEBUG] Setting property: runtime.log.invalid.references =&gt; 'false'.\n[DEBUG] Setting property: resource.loader =&gt; 'classpath,site'.\n[DEBUG] Setting property: velocimacro.permissions.allow.inline.to.replace.global =&gt; 'true'.\n[DEBUG] Setting property: resource.manager.logwhenfound =&gt; 'false'.\n[DEBUG] *******************************************************************\n[DEBUG] Starting Apache Velocity v1.5 (compiled: 2007-02-22 08:52:29)\n[DEBUG] RuntimeInstance initializing.\n[DEBUG] Default Properties File: org/apache/velocity/runtime/defaults/velocity.properties\n[DEBUG] LogSystem has been deprecated. Please use a LogChute implementation.\n[DEBUG] Default ResourceManager initializing. (class org.apache.velocity.runtime.resource.ResourceManagerImpl)\n[DEBUG] ResourceLoader instantiated: org.codehaus.plexus.velocity.ContextClassLoaderResourceLoader\n[DEBUG] ResourceLoader instantiated: org.codehaus.plexus.velocity.SiteResourceLoader\n[DEBUG] ResourceCache: initialized (class org.apache.velocity.runtime.resource.ResourceCacheImpl)\n[DEBUG] Default ResourceManager initialization complete.\n[DEBUG] Loaded System Directive: org.apache.velocity.runtime.directive.Literal\n[DEBUG] Loaded System Directive: org.apache.velocity.runtime.directive.Macro\n[DEBUG] Loaded System Directive: org.apache.velocity.runtime.directive.Parse\n[DEBUG] Loaded System Directive: org.apache.velocity.runtime.directive.Include\n[DEBUG] Loaded System Directive: org.apache.velocity.runtime.directive.Foreach\n[DEBUG] Created '20' parsers.\n[DEBUG] Velocimacro : initialization starting.\n[DEBUG] Velocimacro : allowInline = true : VMs can be defined inline in templates\n[DEBUG] Velocimacro : allowInlineToOverride = true : VMs defined inline may replace previous VM definitions\n[DEBUG] Velocimacro : allowInlineLocal = false : VMs defined inline will be global in scope if allowed.\n[DEBUG] Velocimacro : autoload off : VM system will not automatically reload global library macros\n[DEBUG] Velocimacro : Velocimacro : initialization complete.\n[DEBUG] RuntimeInstance successfully initialized.\n[DEBUG] Configuring mojo 'org.jacoco:jacoco-maven-plugin:0.8.5:report' with basic configurator --&gt;\n[DEBUG]   (f) dataFile = /mnt/a/Documents/school/college/courses/csci420/UMLEditor/target/jacoco.exec\n[DEBUG]   (f) outputDirectory = /mnt/a/Documents/school/college/courses/csci420/UMLEditor/target/site/jacoco\n[DEBUG]   (f) outputEncoding = UTF-8\n[DEBUG]   (f) project = MavenProject: UMLEditor:UMLEditor:0.0.1-SNAPSHOT @ /mnt/a/Documents/school/college/courses/csci420/UMLEditor/pom.xml\n[DEBUG]   (f) skip = false\n[DEBUG]   (f) sourceEncoding = UTF-8\n[DEBUG]   (f) title = UMLEditor\n[DEBUG] -- end configuration --\n[INFO] Loading execution data file /mnt/a/Documents/school/college/courses/csci420/UMLEditor/target/jacoco.exec\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD FAILURE\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time:  36.600 s\n[INFO] Finished at: 2020-04-25T04:24:50-04:00\n[INFO] ------------------------------------------------------------------------\n[ERROR] Failed to execute goal org.jacoco:jacoco-maven-plugin:0.8.5:report (report) on project UMLEditor: An error has occurred in JaCoCo report generation.: Error while creating report: Unknown block type 77. -&gt; [Help 1]\norg.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.jacoco:jacoco-maven-plugin:0.8.5:report (report) on project UMLEditor: An error has occurred in JaCoCo report generation.\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:215)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:156)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:148)\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:117)\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:81)\n    at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:56)\n    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128)\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:305)\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)\n    at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)\n    at org.apache.maven.cli.MavenCli.execute (MavenCli.java:957)\n    at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:289)\n    at org.apache.maven.cli.MavenCli.main (MavenCli.java:193)\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:62)\n    at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke (Method.java:566)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:282)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:225)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:406)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:347)\nCaused by: org.apache.maven.plugin.MojoExecutionException: An error has occurred in JaCoCo report generation.\n    at org.jacoco.maven.AbstractReportMojo.execute (AbstractReportMojo.java:168)\n    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:137)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:210)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:156)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:148)\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:117)\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:81)\n    at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:56)\n    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128)\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:305)\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)\n    at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)\n    at org.apache.maven.cli.MavenCli.execute (MavenCli.java:957)\n    at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:289)\n    at org.apache.maven.cli.MavenCli.main (MavenCli.java:193)\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:62)\n    at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke (Method.java:566)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:282)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:225)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:406)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:347)\nCaused by: org.apache.maven.reporting.MavenReportException: Error while creating report: Unknown block type 77.\n    at org.jacoco.maven.AbstractReportMojo.executeReport (AbstractReportMojo.java:184)\n    at org.jacoco.maven.AbstractReportMojo.execute (AbstractReportMojo.java:166)\n    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:137)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:210)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:156)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:148)\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:117)\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:81)\n    at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:56)\n    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128)\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:305)\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)\n    at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)\n    at org.apache.maven.cli.MavenCli.execute (MavenCli.java:957)\n    at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:289)\n    at org.apache.maven.cli.MavenCli.main (MavenCli.java:193)\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:62)\n    at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke (Method.java:566)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:282)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:225)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:406)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:347)\nCaused by: java.io.IOException: Unknown block type 77.\n    at org.jacoco.core.data.ExecutionDataReader.readBlock (ExecutionDataReader.java:119)\n    at org.jacoco.core.data.ExecutionDataReader.read (ExecutionDataReader.java:93)\n    at org.jacoco.core.tools.ExecFileLoader.load (ExecFileLoader.java:60)\n    at org.jacoco.core.tools.ExecFileLoader.load (ExecFileLoader.java:74)\n    at org.jacoco.maven.ReportSupport.loadExecutionData (ReportSupport.java:89)\n    at org.jacoco.maven.ReportMojo.loadExecutionData (ReportMojo.java:61)\n    at org.jacoco.maven.AbstractReportMojo.executeReport (AbstractReportMojo.java:178)\n    at org.jacoco.maven.AbstractReportMojo.execute (AbstractReportMojo.java:166)\n    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:137)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:210)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:156)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:148)\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:117)\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:81)\n    at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:56)\n    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128)\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:305)\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)\n    at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)\n    at org.apache.maven.cli.MavenCli.execute (MavenCli.java:957)\n    at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:289)\n    at org.apache.maven.cli.MavenCli.main (MavenCli.java:193)\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:62)\n    at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke (Method.java:566)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:282)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:225)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:406)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:347)\n[ERROR]\n[ERROR]\n[ERROR] For more information about the errors and possible solutions, please read the following articles:\n[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException\n</code></pre>\n"},{"tags":["java","overriding"],"comments":[{"owner":{"account_id":14965,"reputation":55597,"user_id":31158,"accept_rate":89,"display_name":"Jord&#227;o"},"score":1,"creation_date":1333933463,"post_id":10067850,"comment_id":12886876,"body_markdown":"This [question](http://stackoverflow.com/questions/2995926/why-is-there-no-parameter-contra-variance-for-overriding) seems related...","body":"This <a href=\"http://stackoverflow.com/questions/2995926/why-is-there-no-parameter-contra-variance-for-overriding\">question</a> seems related..."}],"answers":[{"tags":[],"owner":{"account_id":466908,"reputation":13049,"user_id":871953,"accept_rate":94,"display_name":"Eugene Retunsky"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1333933270,"creation_date":1333933270,"answer_id":10067866,"question_id":10067850,"body_markdown":"What if \r\n\r\n    interface Foo\r\n    {\r\n        void foo(String string);\r\n        void foo(Object string);\r\n    }\r\n\r\nThen which method is overridden by Bar?\r\n   \r\n    ","title":"Why can&#39;t parameter types be loosened in overridden methods?","body":"<p>What if </p>\n\n<pre><code>interface Foo\n{\n    void foo(String string);\n    void foo(Object string);\n}\n</code></pre>\n\n<p>Then which method is overridden by Bar?</p>\n"},{"tags":[],"owner":{"account_id":1358860,"reputation":1596,"user_id":1296641,"display_name":"Laurence"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1333934597,"creation_date":1333934597,"answer_id":10067964,"question_id":10067850,"body_markdown":"&#39;loosening&#39; as you put it should not impact on someone expecting to use your interface defined method in a particular way, as any methods you call on that object should in theory be callable on the specified object, but Eugene&#39;s point stands, becaause there would probably be a little compiler headache to deal with in determining what method you actually intended to override if you just vaguely want to stick to the interfaces specification. Also, why whould this be desireable if you are going to stick to moving up the inheritance heirarchy, because surelely you will be able to do all you want to the thing further down the hierarchy as to &#39;Object&#39; for example? Possibly casting inside your method would solve your problem? If it is possible to do what you want to do, you will also probably start treading on the polymorphism paradigm.\r\n","title":"Why can&#39;t parameter types be loosened in overridden methods?","body":"<p>'loosening' as you put it should not impact on someone expecting to use your interface defined method in a particular way, as any methods you call on that object should in theory be callable on the specified object, but Eugene's point stands, becaause there would probably be a little compiler headache to deal with in determining what method you actually intended to override if you just vaguely want to stick to the interfaces specification. Also, why whould this be desireable if you are going to stick to moving up the inheritance heirarchy, because surelely you will be able to do all you want to the thing further down the hierarchy as to 'Object' for example? Possibly casting inside your method would solve your problem? If it is possible to do what you want to do, you will also probably start treading on the polymorphism paradigm.</p>\n"},{"tags":[],"owner":{"account_id":357454,"reputation":77335,"user_id":697630,"accept_rate":84,"display_name":"Edwin Dalorzo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1333934854,"creation_date":1333934854,"answer_id":10067994,"question_id":10067850,"body_markdown":"I think this is a classical contravariance issue. Your interface requires a string to be passed as parameter, you want an implementation that accepts an object (because, after all, strings are also objects).\r\n\r\nThe problem is that if you allowed that, then you could no longer guarantee that the parameter being required by the interface is a string or any one of its ancestors. You might just as well pass any object to your implementation and you would be breaking the contract of the interface, putting in danger the type safety and type coherence of your design.\r\n\r\nYou do have options, though:\r\n\r\n    public class Bar implements Foo\r\n    {\r\n    \r\n        @Override public void foo(final String object)\r\n        {\r\n        }\r\n    \r\n        public void foo(final Object object)\r\n        {\r\n           foo((String) object);\r\n        }\r\n    }\r\n\r\nBy this, you would be ensuring that object is actually a string, making possible to the type system to check that you are actually complying with the interface contract established in the method signature.\r\n\r\nIs there a particular scenario in which you would consider your contravariance example to be requirement?","title":"Why can&#39;t parameter types be loosened in overridden methods?","body":"<p>I think this is a classical contravariance issue. Your interface requires a string to be passed as parameter, you want an implementation that accepts an object (because, after all, strings are also objects).</p>\n\n<p>The problem is that if you allowed that, then you could no longer guarantee that the parameter being required by the interface is a string or any one of its ancestors. You might just as well pass any object to your implementation and you would be breaking the contract of the interface, putting in danger the type safety and type coherence of your design.</p>\n\n<p>You do have options, though:</p>\n\n<pre><code>public class Bar implements Foo\n{\n\n    @Override public void foo(final String object)\n    {\n    }\n\n    public void foo(final Object object)\n    {\n       foo((String) object);\n    }\n}\n</code></pre>\n\n<p>By this, you would be ensuring that object is actually a string, making possible to the type system to check that you are actually complying with the interface contract established in the method signature.</p>\n\n<p>Is there a particular scenario in which you would consider your contravariance example to be requirement?</p>\n"},{"tags":[],"owner":{"account_id":1389926,"reputation":31,"user_id":1321000,"display_name":"Brian"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1333936692,"creation_date":1333936692,"answer_id":10068161,"question_id":10067850,"body_markdown":"It&#39;s just the constructs of the Java programming language. The structure of Java programs will grow on you. So for now just try and adjust.","title":"Why can&#39;t parameter types be loosened in overridden methods?","body":"<p>It's just the constructs of the Java programming language. The structure of Java programs will grow on you. So for now just try and adjust.</p>\n"}],"owner":{"account_id":232826,"reputation":24369,"user_id":497934,"accept_rate":100,"display_name":"Maxpm"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":86,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":10067866,"answer_count":4,"score":1,"last_activity_date":1649779446,"creation_date":1333933100,"question_id":10067850,"body_markdown":"This code is invalid:\r\n\r\n    interface Foo\r\n    {\r\n        public void foo(final String string);\r\n    }\r\n     \r\n    public class Bar implements Foo\r\n    {\r\n        // Error: does not override.\r\n        @Override public void foo(final Object object)\r\n        {\r\n        }\r\n    }\r\n\r\nBecause every `String` is obviously an `Object`, I would expect this code to be perfectly fine: any code that depends on giving `foo()` a `String` would stil function when `foo()` actually takes an `Object`.\r\n\r\nIt appears, though, that method signatures have to be identical to those of the methods they&#39;re overriding.  Why?","title":"Why can&#39;t parameter types be loosened in overridden methods?","body":"<p>This code is invalid:</p>\n\n<pre><code>interface Foo\n{\n    public void foo(final String string);\n}\n\npublic class Bar implements Foo\n{\n    // Error: does not override.\n    @Override public void foo(final Object object)\n    {\n    }\n}\n</code></pre>\n\n<p>Because every <code>String</code> is obviously an <code>Object</code>, I would expect this code to be perfectly fine: any code that depends on giving <code>foo()</code> a <code>String</code> would stil function when <code>foo()</code> actually takes an <code>Object</code>.</p>\n\n<p>It appears, though, that method signatures have to be identical to those of the methods they're overriding.  Why?</p>\n"},{"tags":["java","android","android-studio"],"comments":[{"owner":{"account_id":6640757,"reputation":827,"user_id":5126523,"accept_rate":21,"display_name":"satyender"},"score":0,"creation_date":1537448569,"post_id":29228067,"comment_id":91794545,"body_markdown":"hey did you find any solution ?","body":"hey did you find any solution ?"}],"answers":[{"tags":[],"owner":{"account_id":1607488,"reputation":126,"user_id":1487266,"display_name":"ChiHang"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1427186570,"creation_date":1427186570,"answer_id":29228147,"question_id":29228067,"body_markdown":"Pleas check if you have enabled Power save mode (File -&gt; Power Save Mode) which turn off auto compilation \r\n\r\nhttps://stackoverflow.com/questions/18370599/android-studio-auto-complete-and-other-features-not-working","title":"Android Studio does not reflect my xml changes","body":"<p>Pleas check if you have enabled Power save mode (File -> Power Save Mode) which turn off auto compilation </p>\n\n<p><a href=\"https://stackoverflow.com/questions/18370599/android-studio-auto-complete-and-other-features-not-working\">Android Studio - Auto complete and other features not working</a></p>\n"},{"tags":[],"owner":{"account_id":5951870,"reputation":402,"user_id":4679598,"accept_rate":67,"display_name":"ghost talker"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1427186586,"creation_date":1427186586,"answer_id":29228156,"question_id":29228067,"body_markdown":"Yes Sometimes it also happens to me. If you are doing changes i right way in the Xml file then those must be appear when you run your app. But if it does not happen, then you need to rebult your application, or clean it several time. if it also does not work to you then do the follwoing :\r\n\r\n 1. Close and re-open (Restart) the android studio and try running app again. \r\n 2. If step 1 is also not helpful then Uninstall app from your device , Disconnect and connect device again and rebuilt/Run app directly in your device again. \r\n\r\nI hope this will work for you. ","title":"Android Studio does not reflect my xml changes","body":"<p>Yes Sometimes it also happens to me. If you are doing changes i right way in the Xml file then those must be appear when you run your app. But if it does not happen, then you need to rebult your application, or clean it several time. if it also does not work to you then do the follwoing :</p>\n\n<ol>\n<li>Close and re-open (Restart) the android studio and try running app again. </li>\n<li>If step 1 is also not helpful then Uninstall app from your device , Disconnect and connect device again and rebuilt/Run app directly in your device again. </li>\n</ol>\n\n<p>I hope this will work for you. </p>\n"},{"tags":[],"owner":{"account_id":8874424,"reputation":406,"user_id":6627139,"accept_rate":12,"display_name":"user6627139"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1478221709,"creation_date":1478221709,"answer_id":40413781,"question_id":29228067,"body_markdown":"I &quot;touch&quot; AndroidManifest.xml and that forces a build. Does not take nearly as long as rebuilding project or restarting emulator. It&#39;s a hack, but hey, it&#39;s my hack.","title":"Android Studio does not reflect my xml changes","body":"<p>I \"touch\" AndroidManifest.xml and that forces a build. Does not take nearly as long as rebuilding project or restarting emulator. It's a hack, but hey, it's my hack.</p>\n"},{"tags":[],"owner":{"account_id":936198,"reputation":1110,"user_id":965091,"display_name":"Harry Mitchell"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1503514966,"creation_date":1503514966,"answer_id":45847554,"question_id":29228067,"body_markdown":"This sounds similar to my situation. I had an extra quote character in my colors.xml file, which caused errors when I tried to run my app. What worked for me was to remove the extra quote in my colors.xml file. Then I saved the file.  Then I restarted Android Studio.","title":"Android Studio does not reflect my xml changes","body":"<p>This sounds similar to my situation. I had an extra quote character in my colors.xml file, which caused errors when I tried to run my app. What worked for me was to remove the extra quote in my colors.xml file. Then I saved the file.  Then I restarted Android Studio.</p>\n"},{"tags":[],"owner":{"account_id":8790510,"reputation":627,"user_id":9681990,"display_name":"Yasser AKBBACH"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1641378607,"creation_date":1641378607,"answer_id":70591360,"question_id":29228067,"body_markdown":"You can simply switch to project view and remove the build of the app:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/rL1vm.png","title":"Android Studio does not reflect my xml changes","body":"<p>You can simply switch to project view and remove the build of the app:</p>\n<p><a href=\"https://i.stack.imgur.com/rL1vm.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/rL1vm.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":[],"owner":{"account_id":17077840,"reputation":108,"user_id":12357048,"display_name":"Svetoslav Stoyanov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649779280,"creation_date":1649779280,"answer_id":71845846,"question_id":29228067,"body_markdown":"After a few days of fighting this issue, I solved it by **deleting all &quot;v26&quot; directories** inside the &quot;res&quot; directory, since the activity was using it instead of the usual &quot;layout&quot; directory for accessing the xml.\r\n\r\napp/src/main/res/layout-v26/ \r\nhad to be deleted and **you should remain only with\r\napp/src/main/res/layout/** \r\n\r\nAnyway, I am new to android development and am not sure if this can lead to other issues, so be careful.","title":"Android Studio does not reflect my xml changes","body":"<p>After a few days of fighting this issue, I solved it by <strong>deleting all &quot;v26&quot; directories</strong> inside the &quot;res&quot; directory, since the activity was using it instead of the usual &quot;layout&quot; directory for accessing the xml.</p>\n<p>app/src/main/res/layout-v26/\nhad to be deleted and <strong>you should remain only with\napp/src/main/res/layout/</strong></p>\n<p>Anyway, I am new to android development and am not sure if this can lead to other issues, so be careful.</p>\n"}],"owner":{"account_id":1242494,"reputation":381,"user_id":1204755,"accept_rate":0,"display_name":"faiziii"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6147,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":6,"score":1,"last_activity_date":1649779280,"creation_date":1427186282,"question_id":29228067,"body_markdown":"When I do any changes in xml layout file, it doesn&#39;t reflect with new compilation build although R.java is generated but when I run the application changes doesn&#39;t reflect. I need to rebuild the whole project which is taking time. Any help on this?\r\n\r\nI guess before it was working fine.","title":"Android Studio does not reflect my xml changes","body":"<p>When I do any changes in xml layout file, it doesn't reflect with new compilation build although R.java is generated but when I run the application changes doesn't reflect. I need to rebuild the whole project which is taking time. Any help on this?</p>\n\n<p>I guess before it was working fine.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":536567,"reputation":7838,"user_id":905488,"display_name":"Mick Mnemonic"},"score":0,"creation_date":1443566068,"post_id":32854776,"comment_id":53543371,"body_markdown":"Actually, the preferred convention in Java `interface`s, which are close to C++ header files, is to omit the access modifier (which defaults to `public`).","body":"Actually, the preferred convention in Java <code>interface</code>s, which are close to C++ header files, is to omit the access modifier (which defaults to <code>public</code>)."},{"owner":{"account_id":3883582,"reputation":32684,"user_id":3215527,"accept_rate":40,"display_name":"wero"},"score":1,"creation_date":1443566095,"post_id":32854776,"comment_id":53543383,"body_markdown":"what is the rationale behind C++s way of organizing access specifiers?","body":"what is the rationale behind C++s way of organizing access specifiers?"},{"owner":{"account_id":219730,"reputation":20703,"user_id":476791,"accept_rate":67,"display_name":"slartidan"},"score":0,"creation_date":1649779632,"post_id":32854776,"comment_id":126960400,"body_markdown":"If you change a method&#39;s visibility (i. e. from package-private to protected), it is convenient to just that one keyword. Moving around of code make version control less helpful.","body":"If you change a method&#39;s visibility (i. e. from package-private to protected), it is convenient to just that one keyword. Moving around of code make version control less helpful."}],"answers":[{"tags":[],"owner":{"account_id":4392279,"reputation":11804,"user_id":3580294,"accept_rate":80,"display_name":"awksp"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1443566608,"creation_date":1443565935,"answer_id":32854843,"question_id":32854776,"body_markdown":"Compare:\r\n\r\n    public:\r\n        T a();\r\n        T b();\r\n        ...\r\n        T z();\r\n\r\nversus\r\n\r\n    public:\r\n        T a() {\r\n            &lt;lots of code&gt;\r\n        }\r\n        T b() {\r\n            &lt;lots of code&gt;\r\n        }\r\n    protected:\r\n        T c() {\r\n            &lt;more code&gt;\r\n        }\r\n    public:\r\n        T d() {\r\n            &lt;more code&gt;\r\n        }\r\n\r\nIf you &quot;factor out&quot; the access specifiers like this, things can get pretty nasty pretty quickly. Yes, indentation helps. Yes, you have Ctrl-F. But there still can be a *lot* of noise to look through (multi-thousand line files, for example), and having to take your mind off of your task just to look for that kind of thing probably wouldn&#39;t help productivity.\r\n\r\nJava and C++ Java deal with it in different ways. Java keeps access specifiers local, so knowing what method you&#39;re working on is enough to determine scope. C++ stuffs declarations together so the access specifier can be &quot;factored out&quot;. It may not be as nice when implementing methods, but it&#39;s much more concise in header files, and possibly easier to grok too.","title":"What is the rationale for using per-method/field access specification?","body":"<p>Compare:</p>\n\n<pre><code>public:\n    T a();\n    T b();\n    ...\n    T z();\n</code></pre>\n\n<p>versus</p>\n\n<pre><code>public:\n    T a() {\n        &lt;lots of code&gt;\n    }\n    T b() {\n        &lt;lots of code&gt;\n    }\nprotected:\n    T c() {\n        &lt;more code&gt;\n    }\npublic:\n    T d() {\n        &lt;more code&gt;\n    }\n</code></pre>\n\n<p>If you \"factor out\" the access specifiers like this, things can get pretty nasty pretty quickly. Yes, indentation helps. Yes, you have Ctrl-F. But there still can be a <em>lot</em> of noise to look through (multi-thousand line files, for example), and having to take your mind off of your task just to look for that kind of thing probably wouldn't help productivity.</p>\n\n<p>Java and C++ Java deal with it in different ways. Java keeps access specifiers local, so knowing what method you're working on is enough to determine scope. C++ stuffs declarations together so the access specifier can be \"factored out\". It may not be as nice when implementing methods, but it's much more concise in header files, and possibly easier to grok too.</p>\n"},{"tags":[],"owner":{"account_id":4826640,"reputation":25377,"user_id":3895960,"accept_rate":97,"display_name":"Dici"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1443566979,"creation_date":1443566582,"answer_id":32854946,"question_id":32854776,"body_markdown":"To add to **awksp** answer, let&#39;s consider a short example. Quite often, you have public API methods implemented with private methods you don&#39;t want to expose. You most often want the code of these methods to be close to each other to make the code easier to read, if you don&#39;t, here&#39;s what it can look like :\r\n\r\n    public:\r\n        void api1() { \r\n            do_some_stuff();\r\n            private_method();\r\n            some_other_stuff();\r\n        }\r\n    \r\n       void api2() {\r\n            do_something();\r\n       }\r\n    \r\n       int api3() {\r\n            int i = a_computation();\r\n            return i + A_CONSTANT;\r\n       }\r\n    \r\n    private:    \r\n       void private_method() {\r\n            do_clever_stuff();\r\n            api1_implementation_details();\r\n       }\r\n\r\nThis is not great to read, `private_method` is far from the only method which uses it, `api1`. This public/private division of the code does not make any logical sense. **You want your code to be organized by its logic, not by the visibility of the methods.**\r\n\r\nI very much prefer seeing this :\r\n\r\n    // I can read the whole logic of this method without any clutter\r\n    public void api1() { \r\n       do_some_stuff();\r\n       private_method();\r\n       some_other_stuff();\r\n    }\r\n\r\n    private void private_method() {\r\n       do_clever_stuff();\r\n       api1_implementation_details();\r\n    }\r\n    // and so on...","title":"What is the rationale for using per-method/field access specification?","body":"<p>To add to <strong>awksp</strong> answer, let's consider a short example. Quite often, you have public API methods implemented with private methods you don't want to expose. You most often want the code of these methods to be close to each other to make the code easier to read, if you don't, here's what it can look like :</p>\n\n<pre><code>public:\n    void api1() { \n        do_some_stuff();\n        private_method();\n        some_other_stuff();\n    }\n\n   void api2() {\n        do_something();\n   }\n\n   int api3() {\n        int i = a_computation();\n        return i + A_CONSTANT;\n   }\n\nprivate:    \n   void private_method() {\n        do_clever_stuff();\n        api1_implementation_details();\n   }\n</code></pre>\n\n<p>This is not great to read, <code>private_method</code> is far from the only method which uses it, <code>api1</code>. This public/private division of the code does not make any logical sense. <strong>You want your code to be organized by its logic, not by the visibility of the methods.</strong></p>\n\n<p>I very much prefer seeing this :</p>\n\n<pre><code>// I can read the whole logic of this method without any clutter\npublic void api1() { \n   do_some_stuff();\n   private_method();\n   some_other_stuff();\n}\n\nprivate void private_method() {\n   do_clever_stuff();\n   api1_implementation_details();\n}\n// and so on...\n</code></pre>\n"}],"owner":{"display_name":"user2108150"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":51,"favorite_count":0,"down_vote_count":2,"up_vote_count":4,"answer_count":2,"score":2,"last_activity_date":1649779205,"creation_date":1443565557,"question_id":32854776,"body_markdown":"In C++ the access specifier for a field or method is based on its location under the first previously declared access specification:\r\n\r\n    public:\r\n      int my_public_variable;\r\n    private:\r\n      void secretPrivateOperations();\r\n      int internal_counter;\r\n\r\nWhat is the design rationale behind Java specifying access by prepending the access specifier to each method/field?\r\n\r\n    public int my_public_variable;\r\n    private void secretPrivateOperations();\r\n    private int internal_counter;","title":"What is the rationale for using per-method/field access specification?","body":"<p>In C++ the access specifier for a field or method is based on its location under the first previously declared access specification:</p>\n\n<pre><code>public:\n  int my_public_variable;\nprivate:\n  void secretPrivateOperations();\n  int internal_counter;\n</code></pre>\n\n<p>What is the design rationale behind Java specifying access by prepending the access specifier to each method/field?</p>\n\n<pre><code>public int my_public_variable;\nprivate void secretPrivateOperations();\nprivate int internal_counter;\n</code></pre>\n"},{"tags":["java","android","string","string-formatting","timeunit"],"comments":[{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":1,"creation_date":1649930703,"post_id":71845523,"comment_id":127001490,"body_markdown":"To get rid of the warning insert `Locale.getDefault(Locale.Category.FORMAT)` as the first argument before the format string. It wont change the behaviour (so also wont get rid of any bug if there was one, which I dont think).","body":"To get rid of the warning insert <code>Locale.getDefault(Locale.Category.FORMAT)</code> as the first argument before the format string. It wont change the behaviour (so also wont get rid of any bug if there was one, which I dont think)."},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1649931293,"post_id":71845523,"comment_id":127001689,"body_markdown":"BTW for an even more elegant and less error-prone way of formatting milliseconds to hours-minutes-seconds since Java 9 define `Duration dur = Duration.ofMillis(milliSeconds);` and pass `dur.toHours(), dur.toMinutesPart(), dur.toSecondsPart()` as the arguments to be formatted.","body":"BTW for an even more elegant and less error-prone way of formatting milliseconds to hours-minutes-seconds since Java 9 define <code>Duration dur = Duration.ofMillis(milliSeconds);</code> and pass <code>dur.toHours(), dur.toMinutesPart(), dur.toSecondsPart()</code> as the arguments to be formatted."}],"answers":[{"tags":[],"owner":{"account_id":1790714,"reputation":91128,"user_id":1631193,"accept_rate":71,"display_name":"Gabe Sechan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1649778100,"creation_date":1649778100,"answer_id":71845563,"question_id":71845523,"body_markdown":"Most likely you don&#39;t need to do anything.  That&#39;s a warning telling you that you didn&#39;t specify a locale for String.format, so it&#39;s using the default locale.  That can cause a bug in some circumstances, but it&#39;s unlikely to in yours.  If you want to be careful you can pass in an explicit locale, or you can just ignore the warning.  Formatting numbers like this without any type of currency is fairly safe.\r\n\r\n(The bugs you&#39;ll see are if the locale your device is in has specific formatting rules for things.  The big one I know of that&#39;s hit me is that Turkish has a letter i who&#39;s capital symbol is different than the english letter I.)","title":"How to use String.format(Locale, ...)?","body":"<p>Most likely you don't need to do anything.  That's a warning telling you that you didn't specify a locale for String.format, so it's using the default locale.  That can cause a bug in some circumstances, but it's unlikely to in yours.  If you want to be careful you can pass in an explicit locale, or you can just ignore the warning.  Formatting numbers like this without any type of currency is fairly safe.</p>\n<p>(The bugs you'll see are if the locale your device is in has specific formatting rules for things.  The big one I know of that's hit me is that Turkish has a letter i who's capital symbol is different than the english letter I.)</p>\n"}],"owner":{"account_id":2624549,"reputation":1,"user_id":2271866,"display_name":"Fernando K"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1175,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1649779182,"creation_date":1649777903,"question_id":71845523,"body_markdown":"I am new in Android development and I&#39;m trying this code:\r\n\r\n    String hms = String.format(&quot;%02d:%02d:%02d&quot;,\r\n                   TimeUnit.MILLISECONDS.toHours(milliSeconds),\r\n                   TimeUnit.MILLISECONDS.toMinutes(milliSeconds) - \r\n                   TimeUnit.HOURS.toMinutes(TimeUnit.MILLISECONDS.toHours(milliSeconds)),\r\n                   TimeUnit.MILLISECONDS.toSeconds(milliSeconds) -\r\n                   TimeUnit.MINUTES.toSeconds(TimeUnit.MILLISECONDS.toMinutes(milliSeconds)));\r\n\r\nI get the message :\r\n\r\n&gt; Implicitly using the default locale is a common source of bugs: \r\n&gt;\r\n&gt; Use String.format(Locale, ...) instead\r\n\r\nI have no idea how to modify the code in order to implement the recommendation.\r\n\r\n","title":"How to use String.format(Locale, ...)?","body":"<p>I am new in Android development and I'm trying this code:</p>\n<pre><code>String hms = String.format(&quot;%02d:%02d:%02d&quot;,\n               TimeUnit.MILLISECONDS.toHours(milliSeconds),\n               TimeUnit.MILLISECONDS.toMinutes(milliSeconds) - \n               TimeUnit.HOURS.toMinutes(TimeUnit.MILLISECONDS.toHours(milliSeconds)),\n               TimeUnit.MILLISECONDS.toSeconds(milliSeconds) -\n               TimeUnit.MINUTES.toSeconds(TimeUnit.MILLISECONDS.toMinutes(milliSeconds)));\n</code></pre>\n<p>I get the message :</p>\n<blockquote>\n<p>Implicitly using the default locale is a common source of bugs:</p>\n<p>Use String.format(Locale, ...) instead</p>\n</blockquote>\n<p>I have no idea how to modify the code in order to implement the recommendation.</p>\n"},{"tags":["java","icefaces","jspx"],"answers":[{"tags":[],"owner":{"account_id":1019731,"reputation":729,"user_id":1030432,"accept_rate":56,"display_name":"Narayana Nagireddi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1380350015,"creation_date":1380083260,"answer_id":18996224,"question_id":18962763,"body_markdown":"You may actually replace the `valueChangeListener` with `f:ajax` listener and try to see the difference.\r\n\r\n    &lt;h:form id=&quot;dateForm&quot;&gt;\r\n    ....\r\n    &lt;ice:selectInputDate id=&quot;Dt&quot; \r\n        value=&quot;#{actionsBean.MDate}&quot;\r\n        renderAsPopup=&quot;true&quot; required=&quot;true&quot;\r\n        partialSubmit = &quot;true&quot;\r\n        popupDateFormat=&quot;#{msgs.date_format}&quot;&gt;\r\n            &lt;f:converter converterId=&quot;MDateConverter&quot; /&gt;      \r\n            &lt;f:ajax execute=&quot;@this&quot; render=&quot;@form&quot; \r\n                  listener = &quot;#{actionsBean.mDateChangeListener}&quot;&gt;\r\n    &lt;/ice:selectInputDate&gt;\r\n    ...\r\n    &lt;/h:form&gt;","title":"How to set a blank default value in iceface&#39;s selectinputdate?","body":"<p>You may actually replace the <code>valueChangeListener</code> with <code>f:ajax</code> listener and try to see the difference.</p>\n\n<pre><code>&lt;h:form id=\"dateForm\"&gt;\n....\n&lt;ice:selectInputDate id=\"Dt\" \n    value=\"#{actionsBean.MDate}\"\n    renderAsPopup=\"true\" required=\"true\"\n    partialSubmit = \"true\"\n    popupDateFormat=\"#{msgs.date_format}\"&gt;\n        &lt;f:converter converterId=\"MDateConverter\" /&gt;      \n        &lt;f:ajax execute=\"@this\" render=\"@form\" \n              listener = \"#{actionsBean.mDateChangeListener}\"&gt;\n&lt;/ice:selectInputDate&gt;\n...\n&lt;/h:form&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1696371,"reputation":685,"user_id":1557686,"display_name":"Rzvan Petruescu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1380212879,"creation_date":1380212879,"answer_id":19033666,"question_id":18962763,"body_markdown":"This is probably caused by an issue with the icefaces popup panel, what I tried is executing this code each time the popup is closed (hidden) ::\r\n\r\n    public void clearSubmittedValues() {\r\n\t\tfinal FacesContext context = FacesContext.getCurrentInstance();\r\n\t\tfinal Application application = context.getApplication();\r\n\t\tfinal ViewHandler viewHandler = application.getViewHandler();\r\n\t\tfinal UIViewRoot viewRoot = viewHandler.createView(context, context.getViewRoot().getViewId());\r\n\t\tcontext.setViewRoot(viewRoot);\r\n\t}\r\n    \r\nThis will reset the popup&#39;s state.","title":"How to set a blank default value in iceface&#39;s selectinputdate?","body":"<p>This is probably caused by an issue with the icefaces popup panel, what I tried is executing this code each time the popup is closed (hidden) ::</p>\n\n<pre><code>public void clearSubmittedValues() {\n    final FacesContext context = FacesContext.getCurrentInstance();\n    final Application application = context.getApplication();\n    final ViewHandler viewHandler = application.getViewHandler();\n    final UIViewRoot viewRoot = viewHandler.createView(context, context.getViewRoot().getViewId());\n    context.setViewRoot(viewRoot);\n}\n</code></pre>\n\n<p>This will reset the popup's state.</p>\n"},{"tags":[],"owner":{"account_id":532936,"reputation":604,"user_id":903654,"display_name":"Maxim Sharai"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1380554950,"creation_date":1380554950,"answer_id":19098108,"question_id":18962763,"body_markdown":"When you close the panel, your selectInputDate component doesn&#39;t redraw on the page, and then returns the old value. It can be, for example, if you use &#39;rendered=true/false&#39; property for showing/hiding of the parent panel. \r\n\r\nFor fix, use &#39;visibled&#39; property instead of &#39;rendered&#39; or use binding for clear value in your selectInputDate component directly","title":"How to set a blank default value in iceface&#39;s selectinputdate?","body":"<p>When you close the panel, your selectInputDate component doesn't redraw on the page, and then returns the old value. It can be, for example, if you use 'rendered=true/false' property for showing/hiding of the parent panel. </p>\n\n<p>For fix, use 'visibled' property instead of 'rendered' or use binding for clear value in your selectInputDate component directly</p>\n"}],"owner":{"account_id":772599,"reputation":767,"user_id":817580,"accept_rate":83,"display_name":"Martin"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1242,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":19098108,"answer_count":3,"score":2,"last_activity_date":1649779046,"creation_date":1379948917,"question_id":18962763,"body_markdown":"I use Icefaces&#39; selectInputDate. The code in .jspx file is the following:\r\n\r\n    &lt;ice:selectInputDate id=&quot;Dt&quot; \r\n\t\t\tvalue=&quot;#{actionsBean.MDate}&quot;\r\n\t\t\trenderAsPopup=&quot;true&quot; required=&quot;true&quot;\r\n\t\t    partialSubmit = &quot;true&quot;\r\n\t\t\tpopupDateFormat=&quot;#{msgs.date_format}&quot; \r\n\t\t    valueChangeListener = &quot;#{actionsBean.mDateChangeListener}&quot;&gt;\r\n\t\t\t\t\t\t\t  &lt;f:converter converterId=&quot;MDateConverter&quot; /&gt;\t\t&lt;/ice:selectInputDate&gt;\r\n\r\n\r\nThe problem actually is: I want that value in the input to be an empty string by default. I set to MDate null value, then panel opens and after user(me in this case) worked and closed panel I set null value to MDate again. But then I open the panel one more time the last value I selected via calendar was saved and automatically filled in. How can I resolve this?","title":"How to set a blank default value in iceface&#39;s selectinputdate?","body":"<p>I use Icefaces' selectInputDate. The code in .jspx file is the following:</p>\n<pre><code>&lt;ice:selectInputDate id=&quot;Dt&quot; \n        value=&quot;#{actionsBean.MDate}&quot;\n        renderAsPopup=&quot;true&quot; required=&quot;true&quot;\n        partialSubmit = &quot;true&quot;\n        popupDateFormat=&quot;#{msgs.date_format}&quot; \n        valueChangeListener = &quot;#{actionsBean.mDateChangeListener}&quot;&gt;\n                          &lt;f:converter converterId=&quot;MDateConverter&quot; /&gt;      &lt;/ice:selectInputDate&gt;\n</code></pre>\n<p>The problem actually is: I want that value in the input to be an empty string by default. I set to MDate null value, then panel opens and after user(me in this case) worked and closed panel I set null value to MDate again. But then I open the panel one more time the last value I selected via calendar was saved and automatically filled in. How can I resolve this?</p>\n"},{"tags":["java","variables","compiler-warnings","game-development"],"comments":[{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1649703614,"post_id":71832939,"comment_id":126938784,"body_markdown":"[Java is pass-by-value, always](https://stackoverflow.com/questions/40480/is-java-pass-by-reference-or-pass-by-value).","body":"<a href=\"https://stackoverflow.com/questions/40480/is-java-pass-by-reference-or-pass-by-value\">Java is pass-by-value, always</a>."}],"answers":[{"tags":[],"owner":{"account_id":8491464,"reputation":1439,"user_id":6367660,"accept_rate":91,"display_name":"Chris J"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1649704021,"creation_date":1649704021,"answer_id":71833060,"question_id":71832939,"body_markdown":"For the context of primitives, like `int`, Java is pass-by-value.  This means that when you pass - for example - `destroyer1Life` to a method, any change is isolated to that method.\r\n\r\ne.g.\r\n\r\n```\r\n/**\r\n * loop until someValue isn&#39;t 1\r\n */\r\npublic void myThing() {\r\n    int someValue = 1;\r\n\r\n    while(someValue == 1)\r\n    {\r\n      decrement(someValue);\r\n    }\r\n}\r\n\r\n/**\r\n * Because of pass-by-value, what happens in decrement, stays in decrement\r\n */\r\nprivate void decrement(int someValue) {\r\n    someValue--;\r\n}\r\n```\r\n\r\n\r\nIf you want to modify a value (keeping it simple), you need to reassign it in scope.  For example, to fix the above:\r\n\r\n```\r\n/**\r\n * loop until someValue isn&#39;t 1\r\n */\r\npublic void myThing() {\r\n    int someValue = 1;\r\n\r\n    while(someValue == 1)\r\n    {\r\n      // modify the value in scope\r\n      someValue = decrement(someValue);\r\n    }\r\n}\r\n\r\n/**\r\n * Because of pass-by-value, what happens in decrement, stays in decrement\r\n * BUT, if we return it, it can be reassigned in scope.\r\n */\r\nprivate int decrement(int someValue) {\r\n    return --someValue;\r\n}\r\n```\r\n\r\nSo you can&#39;t act on all those values because they aren&#39;t being reassigned.  It&#39;s likely to be simpler to make an object that contains those values, pass that, then modify them on _that_ value.  That is where &#39;pass-by-value&#39; becomes a little less exact in Java (a little too complex to go into here).\r\nThat object could be a map, a custom POJO, or something else.","title":"The value changed is never used","body":"<p>For the context of primitives, like <code>int</code>, Java is pass-by-value.  This means that when you pass - for example - <code>destroyer1Life</code> to a method, any change is isolated to that method.</p>\n<p>e.g.</p>\n<pre><code>/**\n * loop until someValue isn't 1\n */\npublic void myThing() {\n    int someValue = 1;\n\n    while(someValue == 1)\n    {\n      decrement(someValue);\n    }\n}\n\n/**\n * Because of pass-by-value, what happens in decrement, stays in decrement\n */\nprivate void decrement(int someValue) {\n    someValue--;\n}\n</code></pre>\n<p>If you want to modify a value (keeping it simple), you need to reassign it in scope.  For example, to fix the above:</p>\n<pre><code>/**\n * loop until someValue isn't 1\n */\npublic void myThing() {\n    int someValue = 1;\n\n    while(someValue == 1)\n    {\n      // modify the value in scope\n      someValue = decrement(someValue);\n    }\n}\n\n/**\n * Because of pass-by-value, what happens in decrement, stays in decrement\n * BUT, if we return it, it can be reassigned in scope.\n */\nprivate int decrement(int someValue) {\n    return --someValue;\n}\n</code></pre>\n<p>So you can't act on all those values because they aren't being reassigned.  It's likely to be simpler to make an object that contains those values, pass that, then modify them on <em>that</em> value.  That is where 'pass-by-value' becomes a little less exact in Java (a little too complex to go into here).\nThat object could be a map, a custom POJO, or something else.</p>\n"},{"tags":[],"owner":{"account_id":8546,"reputation":17688,"user_id":15472,"accept_rate":87,"display_name":"tucuxi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649778809,"creation_date":1649705834,"answer_id":71833420,"question_id":71832939,"body_markdown":"The Java way of implementing this is to define your very own object to represent the state of the game. So you would have something like:\r\n\r\n    // State.java\r\n    public class State {\r\n\r\n        // constants, initialized only once\r\n        public final char WATER = &#39;~&#39;;\r\n        public final char HIT = &#39;X&#39;;\r\n        public final char MISS = &#39;&#183;&#39;;\r\n        public final char D1 = &#39;1&#39;;\r\n        public final char D2 = &#39;2&#39;;\r\n        public final char BB = &#39;B&#39;;\r\n        public final char SHIP = &#39;O&#39;;\r\n\r\n        // attributes, can be different for different State objects\r\n        private int destroyer1Life = 4;\r\n        private int destroyer2Life = 4;\r\n        private int battleShipLife = 5;\r\n        private int gameBoardLength = 10;\r\n        private char [][] board;\r\n\r\n        // a method to calculate remaining life in this State object\r\n        public int getTotalLife() {\r\n            return destroyer1Life + destroyer2Life + battleShipLife;\r\n        }\r\n         \r\n        // a method to update this State object after a guess\r\n        public char update(int[] guessLocation) {\r\n            char target = board[guessLocation[0]][guessLocation[1]];\r\n            char result = &#39;?&#39;;\r\n            if (target == &#39;WATER&#39;) {\r\n               System.out.println(&quot;Sploof, miss!&quot;);\r\n               result = MISS;   \r\n            } else if (target == D1) {\r\n               System.out.println(&quot;Hit!&quot;);\r\n               result = HIT;\r\n               destroyer1Life --;\r\n            } // add more else ifs here for other boat types\r\n            // ...\r\n\r\n            // write new result to displayed board\r\n            board[guessLocation[0]][guessLocation[1]] = result;\r\n            return result;\r\n        }\r\n\r\n        // a method to show the state\r\n        public void show() {\r\n            for (int row=0; row&lt;board.length(); row++) {\r\n              for (int col=0; col&lt;board[0].length(); col++) {\r\n                 char c = board[row][col];\r\n                 // show &#39;?&#39; for all unknown tiles\r\n                 System.out.print(c == HIT || c == MISS ? c : &#39;?&#39;);\r\n              }\r\n              System.out.println(&quot;&quot;);\r\n            }\r\n        }\r\n    }\r\n\r\n    // in Main.java\r\n    State state = new State();\r\n    while (state.getTotalLife() &gt; 0) {\r\n            int[] guessLocation = askForGuess();\r\n            state.update(guessLocation);\r\n            state.show();\r\n            if (shipsLife == 0){ \r\n                System.out.print(&quot;You won&quot;);\r\n            }\r\n    }\r\n\r\nInstead of passing around lots of integers, and having no way to get their changed values back, you group those values into objects, which have their own methods that can freely change the object&#39;s values. Much cleaner.","title":"The value changed is never used","body":"<p>The Java way of implementing this is to define your very own object to represent the state of the game. So you would have something like:</p>\n<pre><code>// State.java\npublic class State {\n\n    // constants, initialized only once\n    public final char WATER = '~';\n    public final char HIT = 'X';\n    public final char MISS = '';\n    public final char D1 = '1';\n    public final char D2 = '2';\n    public final char BB = 'B';\n    public final char SHIP = 'O';\n\n    // attributes, can be different for different State objects\n    private int destroyer1Life = 4;\n    private int destroyer2Life = 4;\n    private int battleShipLife = 5;\n    private int gameBoardLength = 10;\n    private char [][] board;\n\n    // a method to calculate remaining life in this State object\n    public int getTotalLife() {\n        return destroyer1Life + destroyer2Life + battleShipLife;\n    }\n     \n    // a method to update this State object after a guess\n    public char update(int[] guessLocation) {\n        char target = board[guessLocation[0]][guessLocation[1]];\n        char result = '?';\n        if (target == 'WATER') {\n           System.out.println(&quot;Sploof, miss!&quot;);\n           result = MISS;   \n        } else if (target == D1) {\n           System.out.println(&quot;Hit!&quot;);\n           result = HIT;\n           destroyer1Life --;\n        } // add more else ifs here for other boat types\n        // ...\n\n        // write new result to displayed board\n        board[guessLocation[0]][guessLocation[1]] = result;\n        return result;\n    }\n\n    // a method to show the state\n    public void show() {\n        for (int row=0; row&lt;board.length(); row++) {\n          for (int col=0; col&lt;board[0].length(); col++) {\n             char c = board[row][col];\n             // show '?' for all unknown tiles\n             System.out.print(c == HIT || c == MISS ? c : '?');\n          }\n          System.out.println(&quot;&quot;);\n        }\n    }\n}\n\n// in Main.java\nState state = new State();\nwhile (state.getTotalLife() &gt; 0) {\n        int[] guessLocation = askForGuess();\n        state.update(guessLocation);\n        state.show();\n        if (shipsLife == 0){ \n            System.out.print(&quot;You won&quot;);\n        }\n}\n</code></pre>\n<p>Instead of passing around lots of integers, and having no way to get their changed values back, you group those values into objects, which have their own methods that can freely change the object's values. Much cleaner.</p>\n"}],"owner":{"account_id":24734910,"reputation":1,"user_id":18622410,"display_name":"Mertyon"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":194,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1649778809,"creation_date":1649703414,"question_id":71832939,"body_markdown":"My question is why variables for &#39;Life&#39; won&#39;t work even if I think I did it right?  \r\nI have main method and in it:  \r\n```lang-java\r\n        int destroyer1Life = 4;\r\n        int destroyer2Life = 4;\r\n        int battleShipLife = 5;\r\n        int gameBoardLenght = 10;\r\n        int shipsLife = destroyer1Life + destroyer2Life + battleShipLife;\r\n\r\n        while(shipsLife &gt; 0){  //ships life is warned as always true\r\n\r\n            char locationViewUpdate = evaluateGuessAndGetTarget(guessLocation, gameBoard, water, hit, miss, destroyer1, destroyer2, battleShip,battleShipLife, destroyer1Life, destroyer2Life, ship );\r\n            if (shipsLife == 0){  //ships life is warned as always false\r\n                System.out.print(&quot;You won&quot;);\r\n            }\r\n```\r\nIn another method I have:  \r\n```lang-java\r\n    private static char evaluateGuessAndGetTarget(int[] guessLocation, char[][] gameBoard, char water, char hit, char miss, char destroyer1, char destroyer2, char battleShip, int battleShipLife, int destroyer1Life, int destroyer2Life,char ship) {\r\n\r\n        if (target == destroyer1){\r\n            if (destroyer1Life &gt; 0){\r\n                target = hit;\r\n                message = &quot;Hit!&quot;;\r\n                destroyer1Life--; //The value changed at &#39;destroyer1Life--&#39; is never used \r\n            }\r\n        }\r\n\r\n        if (target == destroyer2){\r\n            if (destroyer2Life &gt; 0){\r\n                target = hit;\r\n                message = &quot;Hit!&quot;;\r\n                destroyer2Life--;  //The value changed at &#39;destroyer2Life--&#39; is never used \r\n            }\r\n        }\r\n\r\n        if (target == battleShip){\r\n            if (battleShipLife &gt; 0){\r\n                target = hit;\r\n                message = &quot;Hit!&quot;;\r\n                battleShipLife--;  //The value changed at &#39;battleShipLife--&#39; is never used \r\n            }\r\n        }\r\n}\r\n```\r\nSo, even when I get an update on board that ship has been changed into hit, life wont go down.\r\nFull code: https://github.com/Mertyon/BattleShipsGame/blob/main/src/com/company/BattleShipsGame.java","title":"The value changed is never used","body":"<p>My question is why variables for 'Life' won't work even if I think I did it right?<br />\nI have main method and in it:</p>\n<pre class=\"lang-java prettyprint-override\"><code>        int destroyer1Life = 4;\n        int destroyer2Life = 4;\n        int battleShipLife = 5;\n        int gameBoardLenght = 10;\n        int shipsLife = destroyer1Life + destroyer2Life + battleShipLife;\n\n        while(shipsLife &gt; 0){  //ships life is warned as always true\n\n            char locationViewUpdate = evaluateGuessAndGetTarget(guessLocation, gameBoard, water, hit, miss, destroyer1, destroyer2, battleShip,battleShipLife, destroyer1Life, destroyer2Life, ship );\n            if (shipsLife == 0){  //ships life is warned as always false\n                System.out.print(&quot;You won&quot;);\n            }\n</code></pre>\n<p>In another method I have:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    private static char evaluateGuessAndGetTarget(int[] guessLocation, char[][] gameBoard, char water, char hit, char miss, char destroyer1, char destroyer2, char battleShip, int battleShipLife, int destroyer1Life, int destroyer2Life,char ship) {\n\n        if (target == destroyer1){\n            if (destroyer1Life &gt; 0){\n                target = hit;\n                message = &quot;Hit!&quot;;\n                destroyer1Life--; //The value changed at 'destroyer1Life--' is never used \n            }\n        }\n\n        if (target == destroyer2){\n            if (destroyer2Life &gt; 0){\n                target = hit;\n                message = &quot;Hit!&quot;;\n                destroyer2Life--;  //The value changed at 'destroyer2Life--' is never used \n            }\n        }\n\n        if (target == battleShip){\n            if (battleShipLife &gt; 0){\n                target = hit;\n                message = &quot;Hit!&quot;;\n                battleShipLife--;  //The value changed at 'battleShipLife--' is never used \n            }\n        }\n}\n</code></pre>\n<p>So, even when I get an update on board that ship has been changed into hit, life wont go down.\nFull code: <a href=\"https://github.com/Mertyon/BattleShipsGame/blob/main/src/com/company/BattleShipsGame.java\" rel=\"nofollow noreferrer\">https://github.com/Mertyon/BattleShipsGame/blob/main/src/com/company/BattleShipsGame.java</a></p>\n"},{"tags":["java","multithreading","synchronization","coverity"],"comments":[{"owner":{"account_id":395272,"reputation":24521,"user_id":758133,"accept_rate":100,"display_name":"Martin James"},"score":1,"creation_date":1649491865,"post_id":71805348,"comment_id":126893164,"body_markdown":"I have little confidence that your overall data management is effective.  What is your actual requirement for data processing?  &#39;I have two independent classes and both classes functions are calling each other&#39; well, I mean, classes?  Do you mean class instances?  You seem to be walking into a swamp:(","body":"I have little confidence that your overall data management is effective.  What is your actual requirement for data processing?  &#39;I have two independent classes and both classes functions are calling each other&#39; well, I mean, classes?  Do you mean class instances?  You seem to be walking into a swamp:("},{"owner":{"account_id":2991126,"reputation":420,"user_id":2538699,"accept_rate":25,"display_name":"Naveen Kumar"},"score":0,"creation_date":1649499477,"post_id":71805348,"comment_id":126894539,"body_markdown":"Yeah by classes means class instances. Here Test1 and Test2 can also be executed individually and they have dependency on each other.","body":"Yeah by classes means class instances. Here Test1 and Test2 can also be executed individually and they have dependency on each other."}],"answers":[{"tags":[],"owner":{"account_id":3144597,"reputation":9476,"user_id":2659307,"display_name":"Scott McPeak"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1649778661,"creation_date":1649508654,"answer_id":71808231,"question_id":71805348,"body_markdown":"The reason for the Coverity report is the code contains a potential deadlock error.  Specifically:\r\n\r\n* `Test1.sendUpdate()` acquires `Test1.lock`, then calls `Test2.send()`, which acquires `Test2.object`.  Meanwhile,\r\n* `Test2.send()` acquires `Test2.object`, then calls `Test1.sendUpdate()`, which acquires `Test1.lock`.\r\n\r\nIf thread T1 executes `Test1.sendUpdate()` at the same time as another thread T2 executes `Test2.send()`, this ordering is possible:\r\n\r\n* T1 acquires `Test1.lock`.\r\n* T2 acquires `Test2.object`.\r\n* T2 attempts to acquire `Test1.lock`, and blocks because it is already held by T1.\r\n* T1 attempts to acquire `Test2.object`, and blocks because it is already held by T2.\r\n* Neither thread can make progress; this is a deadlock.\r\n\r\nWhen a single thread must hold more than one lock simultaneously, the typical way to prevent deadlock is to ensure that the order in which locks are acquired is always consistent.  Here, that means either `Test1.lock` is always acquired first, or else `Test2.object` is always acquired first.\r\n\r\nOne way to do this in your code is to change `Test2.send()` so it acquires `Test1.lock` first:\r\n\r\n```\r\npublic void send() {                 // in class Test2\r\n    Test1 test1 = Test1.getInstance();\r\n    synchronized (test1.lock) {      // Test1.lock first  &lt;-- ADDED\r\n        synchronized (object) {      // Test2.object second\r\n            try {\r\n                ...                  // same code as before\r\n                test1.sendUpdate();\r\n                ...\r\n            }\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nInside `send()`, the call to `sendUpdate()` will acquire `Test1.lock` a second time.  That is ok because locks in Java are [recursive](https://stackoverflow.com/questions/187761/recursive-lock-mutex-vs-non-recursive-lock-mutex).\r\n\r\nThe above code requires that `Test1.lock` be `public`, and is probably the simplest fix in this case.  It&#39;s of course easy to expose a getter instead if the public data member is a concern.\r\n\r\nAlternatively, you could replace the existing pair of locks with a single lock that protects both classes.  That would be safe from deadlocks, but could reduce the opportunities for concurrent execution.  Whether that will significantly affect application performance is impossible to say without knowing more about what it&#39;s really doing (which could be the topic of a new question).\r\n","title":"How to avoid LOCK_INVERSION or LOCK_ORDER problem in two independent class calling each other function?","body":"<p>The reason for the Coverity report is the code contains a potential deadlock error.  Specifically:</p>\n<ul>\n<li><code>Test1.sendUpdate()</code> acquires <code>Test1.lock</code>, then calls <code>Test2.send()</code>, which acquires <code>Test2.object</code>.  Meanwhile,</li>\n<li><code>Test2.send()</code> acquires <code>Test2.object</code>, then calls <code>Test1.sendUpdate()</code>, which acquires <code>Test1.lock</code>.</li>\n</ul>\n<p>If thread T1 executes <code>Test1.sendUpdate()</code> at the same time as another thread T2 executes <code>Test2.send()</code>, this ordering is possible:</p>\n<ul>\n<li>T1 acquires <code>Test1.lock</code>.</li>\n<li>T2 acquires <code>Test2.object</code>.</li>\n<li>T2 attempts to acquire <code>Test1.lock</code>, and blocks because it is already held by T1.</li>\n<li>T1 attempts to acquire <code>Test2.object</code>, and blocks because it is already held by T2.</li>\n<li>Neither thread can make progress; this is a deadlock.</li>\n</ul>\n<p>When a single thread must hold more than one lock simultaneously, the typical way to prevent deadlock is to ensure that the order in which locks are acquired is always consistent.  Here, that means either <code>Test1.lock</code> is always acquired first, or else <code>Test2.object</code> is always acquired first.</p>\n<p>One way to do this in your code is to change <code>Test2.send()</code> so it acquires <code>Test1.lock</code> first:</p>\n<pre><code>public void send() {                 // in class Test2\n    Test1 test1 = Test1.getInstance();\n    synchronized (test1.lock) {      // Test1.lock first  &lt;-- ADDED\n        synchronized (object) {      // Test2.object second\n            try {\n                ...                  // same code as before\n                test1.sendUpdate();\n                ...\n            }\n        }\n    }\n}\n</code></pre>\n<p>Inside <code>send()</code>, the call to <code>sendUpdate()</code> will acquire <code>Test1.lock</code> a second time.  That is ok because locks in Java are <a href=\"https://stackoverflow.com/questions/187761/recursive-lock-mutex-vs-non-recursive-lock-mutex\">recursive</a>.</p>\n<p>The above code requires that <code>Test1.lock</code> be <code>public</code>, and is probably the simplest fix in this case.  It's of course easy to expose a getter instead if the public data member is a concern.</p>\n<p>Alternatively, you could replace the existing pair of locks with a single lock that protects both classes.  That would be safe from deadlocks, but could reduce the opportunities for concurrent execution.  Whether that will significantly affect application performance is impossible to say without knowing more about what it's really doing (which could be the topic of a new question).</p>\n"}],"owner":{"account_id":2991126,"reputation":420,"user_id":2538699,"accept_rate":25,"display_name":"Naveen Kumar"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":226,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71808231,"answer_count":1,"score":0,"last_activity_date":1649778661,"creation_date":1649480175,"question_id":71805348,"body_markdown":"I have two independent classes and both classes functions are calling each other. I have put the synchronization block on both classes functions but coverity is giving the error regarding LOCK_INVERSION and LOCK_ORDER or it might result in deadlock, not sure.\r\n\r\nI am getting below error in coverity on my production code.\r\n\r\n**Acquiring lock &#39;lockname&#39; conflicts with the lock order established elsewhere.**\r\n\r\nSample example:\r\n\r\n```\r\npackage multithreading;\r\n\r\npublic class Test1 implements Runnable {\r\n\tprivate static Test1 instance = null;\r\n\r\n\tpublic static synchronized Test1 getInstance() {\r\n\t\tif (instance == null) {\r\n\t\t\tinstance = new Test1();\r\n\t\t\treturn instance;\r\n\t\t} else {\r\n\t\t\treturn instance;\r\n\t\t}\r\n\t}\r\n\r\n\tprivate Object lock = new Object();\r\n\r\n\tpublic void sendUpdate() {\r\n\t\tsynchronized (lock) {\r\n\t\t\ttry {\r\n\t\t\t\tThread.sleep(3000l);\r\n\t\t\t\tSystem.out.println(getClass().getSimpleName() + &quot;sendUpdate&quot;);\r\n\t\t\t\tTest2.getInstance().send();\r\n\t\t\t} catch (InterruptedException e) {\r\n\t\t\t\te.printStackTrace();\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t}\r\n\t\r\n\tpublic void sendUpdate1() {\r\n\t\tsynchronized (lock) {\r\n\t\t\ttry {\r\n\t\t\t\tThread.sleep(3000l);\r\n\t\t\t\tSystem.out.println(getClass().getSimpleName() + &quot;sendUpdate1&quot;);\r\n\t\t\t\tTest2.getInstance().send();\r\n\t\t\t} catch (InterruptedException e) {\r\n\t\t\t\te.printStackTrace();\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tThread t = new Thread(Test1.getInstance());\r\n\t\tt.start();\r\n\t}\r\n\r\n\t@Override\r\n\tpublic void run() {\r\n\t\twhile (true) {\r\n\t\t\t\tthis.sendUpdate();\r\n\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\npackage multithreading;\r\n\r\npublic class Test2 implements Runnable {\r\n\tprivate static Object object = new Object();\r\n\tprivate static Test2 instance = null;\r\n\r\n\tpublic static synchronized Test2 getInstance() {\r\n\t\tif (instance == null) {\r\n\t\t\tinstance = new Test2();\r\n\t\t\treturn instance;\r\n\t\t} else {\r\n\t\t\treturn instance;\r\n\t\t}\r\n\t}\r\n\t\r\n\tpublic void send1() {\r\n\t\tsynchronized (object) {\r\n\t\t\ttry {\r\n\t\t\t\tThread.sleep(3000l);\r\n\t\t\t\tSystem.out.println(getClass().getSimpleName() + &quot;send1&quot;);\r\n\t\t\t\tTest1.getInstance().sendUpdate();\r\n\t\t\t} catch (InterruptedException e) {\r\n\t\t\t\te.printStackTrace();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tpublic void send() {\r\n\t\tsynchronized (object) {\r\n\t\t\ttry {\r\n\t\t\t\tThread.sleep(3000l);\r\n\t\t\t\tSystem.out.println(getClass().getSimpleName() + &quot;send&quot;);\r\n\t\t\t\tTest1.getInstance().sendUpdate();\r\n\t\t\t} catch (InterruptedException e) {\r\n\t\t\t\te.printStackTrace();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tThread t = new Thread(Test2.getInstance());\r\n\t\tt.start();\r\n\t}\r\n\r\n\t@Override\r\n\tpublic void run() {\r\n\t\twhile (true) {\r\n\t\t\tTest2.getInstance().send1();\r\n\t\t}\r\n\r\n\t}\r\n}\r\n\r\n```\r\n\r\n```\r\nAnalysis summary report:\r\n------------------------\r\nFiles analyzed                 : 2 Total\r\n    Java (without build)       : 2\r\nTotal LoC input to cov-analyze : 90\r\nFunctions analyzed             : 15\r\nPaths analyzed                 : 71\r\nTime taken by analysis         : 00:00:18\r\nDefect occurrences found       : 1 LOCK_INVERSION\r\n```\r\nI think this can lead to deadlock problem but would like to understand how to basically handle synchronization in two independent classes calling each other functions.\r\n\r\nHow can we maintain the lock order among two classes?\r\nShould I use the ENUM based shared lock but I am little bit worried about the performance or there is any other way to handle such scenario?","title":"How to avoid LOCK_INVERSION or LOCK_ORDER problem in two independent class calling each other function?","body":"<p>I have two independent classes and both classes functions are calling each other. I have put the synchronization block on both classes functions but coverity is giving the error regarding LOCK_INVERSION and LOCK_ORDER or it might result in deadlock, not sure.</p>\n<p>I am getting below error in coverity on my production code.</p>\n<p><strong>Acquiring lock 'lockname' conflicts with the lock order established elsewhere.</strong></p>\n<p>Sample example:</p>\n<pre><code>package multithreading;\n\npublic class Test1 implements Runnable {\n    private static Test1 instance = null;\n\n    public static synchronized Test1 getInstance() {\n        if (instance == null) {\n            instance = new Test1();\n            return instance;\n        } else {\n            return instance;\n        }\n    }\n\n    private Object lock = new Object();\n\n    public void sendUpdate() {\n        synchronized (lock) {\n            try {\n                Thread.sleep(3000l);\n                System.out.println(getClass().getSimpleName() + &quot;sendUpdate&quot;);\n                Test2.getInstance().send();\n            } catch (InterruptedException e) {\n                e.printStackTrace();\n            }\n\n        }\n    }\n    \n    public void sendUpdate1() {\n        synchronized (lock) {\n            try {\n                Thread.sleep(3000l);\n                System.out.println(getClass().getSimpleName() + &quot;sendUpdate1&quot;);\n                Test2.getInstance().send();\n            } catch (InterruptedException e) {\n                e.printStackTrace();\n            }\n\n        }\n    }\n\n\n    public static void main(String[] args) {\n        Thread t = new Thread(Test1.getInstance());\n        t.start();\n    }\n\n    @Override\n    public void run() {\n        while (true) {\n                this.sendUpdate();\n\n        }\n    }\n\n}\n\npackage multithreading;\n\npublic class Test2 implements Runnable {\n    private static Object object = new Object();\n    private static Test2 instance = null;\n\n    public static synchronized Test2 getInstance() {\n        if (instance == null) {\n            instance = new Test2();\n            return instance;\n        } else {\n            return instance;\n        }\n    }\n    \n    public void send1() {\n        synchronized (object) {\n            try {\n                Thread.sleep(3000l);\n                System.out.println(getClass().getSimpleName() + &quot;send1&quot;);\n                Test1.getInstance().sendUpdate();\n            } catch (InterruptedException e) {\n                e.printStackTrace();\n            }\n        }\n    }\n\n    public void send() {\n        synchronized (object) {\n            try {\n                Thread.sleep(3000l);\n                System.out.println(getClass().getSimpleName() + &quot;send&quot;);\n                Test1.getInstance().sendUpdate();\n            } catch (InterruptedException e) {\n                e.printStackTrace();\n            }\n        }\n    }\n\n    public static void main(String[] args) {\n        Thread t = new Thread(Test2.getInstance());\n        t.start();\n    }\n\n    @Override\n    public void run() {\n        while (true) {\n            Test2.getInstance().send1();\n        }\n\n    }\n}\n\n</code></pre>\n<pre><code>Analysis summary report:\n------------------------\nFiles analyzed                 : 2 Total\n    Java (without build)       : 2\nTotal LoC input to cov-analyze : 90\nFunctions analyzed             : 15\nPaths analyzed                 : 71\nTime taken by analysis         : 00:00:18\nDefect occurrences found       : 1 LOCK_INVERSION\n</code></pre>\n<p>I think this can lead to deadlock problem but would like to understand how to basically handle synchronization in two independent classes calling each other functions.</p>\n<p>How can we maintain the lock order among two classes?\nShould I use the ENUM based shared lock but I am little bit worried about the performance or there is any other way to handle such scenario?</p>\n"},{"tags":["java","class"],"comments":[{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":3,"creation_date":1649778013,"post_id":71845508,"comment_id":126959714,"body_markdown":"Other way around.  You should use `equals()` for all classes, not just strings.  `==` is a special case.","body":"Other way around.  You should use <code>equals()</code> for all classes, not just strings.  <code>==</code> is a special case."},{"owner":{"account_id":1485367,"reputation":122993,"user_id":1393766,"display_name":"Pshemo"},"score":0,"creation_date":1649778289,"post_id":71845508,"comment_id":126959826,"body_markdown":"Possibly related: [What&#39;s the difference between &quot;.equals&quot; and &quot;==&quot;?](https://stackoverflow.com/q/1643067), [Java: Integer equals vs. ==](https://stackoverflow.com/q/3637936)","body":"Possibly related: <a href=\"https://stackoverflow.com/q/1643067\">What&#39;s the difference between &quot;.equals&quot; and &quot;==&quot;?</a>, <a href=\"https://stackoverflow.com/q/3637936\">Java: Integer equals vs. ==</a>"},{"owner":{"account_id":213468,"reputation":103486,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1649778334,"post_id":71845508,"comment_id":126959848,"body_markdown":"_&quot;If it was integer, then definitely yes.&quot;_ definitely not, try it with 128 or higher, or -129 or lower.","body":"<i>&quot;If it was integer, then definitely yes.&quot;</i> definitely not, try it with 128 or higher, or -129 or lower."},{"owner":{"account_id":19885850,"reputation":57,"user_id":14568840,"display_name":"ihatec"},"score":0,"creation_date":1649779505,"post_id":71845508,"comment_id":126960335,"body_markdown":"@MarkRotteveel Oh why? Due to overflow I guess?","body":"@MarkRotteveel Oh why? Due to overflow I guess?"},{"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":0,"creation_date":1649781233,"post_id":71845508,"comment_id":126961030,"body_markdown":"@ihatec: No, not overflow.  `==` just does the wrong thing, for similar reasons to strings.  It&#39;s pretty much always the wrong thing to use.","body":"@ihatec: No, not overflow.  <code>==</code> just does the wrong thing, for similar reasons to strings.  It&#39;s pretty much always the wrong thing to use."},{"owner":{"account_id":213468,"reputation":103486,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1649786918,"post_id":71845508,"comment_id":126962934,"body_markdown":"@ihatec auto-boxing and `Integer.valueOf()` uses a cache of values for integers in the range -128 - 127, outside of that it returns a new value, so two `Integer` values with value 128 are not necessarily `==`, but they are `.equals(..)`.","body":"@ihatec auto-boxing and <code>Integer.valueOf()</code> uses a cache of values for integers in the range -128 - 127, outside of that it returns a new value, so two <code>Integer</code> values with value 128 are not necessarily <code>==</code>, but they are <code>.equals(..)</code>."}],"answers":[{"tags":[],"owner":{"account_id":3282,"reputation":146296,"user_id":4725,"accept_rate":100,"display_name":"Tom Hawtin - tackline"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1649778042,"creation_date":1649778042,"answer_id":71845548,"question_id":71845508,"body_markdown":"`==` with tell you if the right and left hand sides refer to exactly the same instance. This will tend to be give you an unexpected answer for value types such as `String`, `Integer`, `List`, `BigInteger`, `Map`, etc. **You should almost always use `equals`,** except for primitive types.\r\n\r\nIf you want to handle `null` without throwing a `NullPointerException`, then `java.util.Objects.equals` (note the plural) can handle that for you.\r\n\r\nProject Valhalla may extend the concept of primitives to user defined types in future version of Java.","title":"Is == works on every Class object?","body":"<p><code>==</code> with tell you if the right and left hand sides refer to exactly the same instance. This will tend to be give you an unexpected answer for value types such as <code>String</code>, <code>Integer</code>, <code>List</code>, <code>BigInteger</code>, <code>Map</code>, etc. <strong>You should almost always use <code>equals</code>,</strong> except for primitive types.</p>\n<p>If you want to handle <code>null</code> without throwing a <code>NullPointerException</code>, then <code>java.util.Objects.equals</code> (note the plural) can handle that for you.</p>\n<p>Project Valhalla may extend the concept of primitives to user defined types in future version of Java.</p>\n"}],"owner":{"account_id":19885850,"reputation":57,"user_id":14568840,"display_name":"ihatec"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1649778430,"accepted_answer_id":71845548,"answer_count":1,"score":0,"last_activity_date":1649778513,"creation_date":1649777866,"question_id":71845508,"body_markdown":"So, let me show the code first.\r\n\r\n    \r\n\r\n    public class Class1 {\r\n        private static class Class2 {\r\n        String name;\r\n        Object value;\r\n        EntryNode next;\r\n\r\n        }\r\n\r\n    } \r\n\r\n\r\nSo, as you guess, I am working on linkedlists. So, for a given value as a parameter in a function;\r\n\r\n    public Object put(String name, Object value) {\r\n        ...\r\n        ...\r\n        if (head.value == value) {\r\n        }\r\n    }\r\n\r\nSo, in particular, can we use this equality symbol &#39;==&#39; for Object class? In general, except Strings, can we use &#39;==&#39; in any class? If it was string, then no. If it was integer, then definitely yes. But now, how can you compare?","title":"Is == works on every Class object?","body":"<p>So, let me show the code first.</p>\n<pre><code>public class Class1 {\n    private static class Class2 {\n    String name;\n    Object value;\n    EntryNode next;\n\n    }\n\n} \n</code></pre>\n<p>So, as you guess, I am working on linkedlists. So, for a given value as a parameter in a function;</p>\n<pre><code>public Object put(String name, Object value) {\n    ...\n    ...\n    if (head.value == value) {\n    }\n}\n</code></pre>\n<p>So, in particular, can we use this equality symbol '==' for Object class? In general, except Strings, can we use '==' in any class? If it was string, then no. If it was integer, then definitely yes. But now, how can you compare?</p>\n"},{"tags":["java","hibernate","jpa","generics","enums"],"answers":[{"tags":[],"owner":{"account_id":8357383,"reputation":11939,"user_id":6277104,"display_name":"SternK"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1573338208,"creation_date":1573327553,"answer_id":58782773,"question_id":58681902,"body_markdown":"Luckily, you should not patch the hibernate for this.\r\n\r\n1. You can declare an annotation like the following:\r\n``` lang-java\r\nimport java.lang.annotation.Retention;\r\nimport java.lang.annotation.Target;\r\nimport java.sql.Types;\r\n\r\nimport static java.lang.annotation.ElementType.METHOD;\r\nimport static java.lang.annotation.ElementType.FIELD;\r\nimport static java.lang.annotation.RetentionPolicy.RUNTIME;\r\n\r\n\r\n@Target({METHOD, FIELD}) \r\n@Retention(RUNTIME)\r\npublic @interface EnumConverter\r\n{\r\n   Class&lt;? extends PersistableEnum&lt;?&gt;&gt; enumClass() default IntegerEnum.class;\r\n   \r\n   int sqlType() default Types.INTEGER;\r\n}\r\n```\r\n\r\n2. A hibernate user type like the following:\r\n``` lang-java\r\nimport java.io.Serializable;\r\nimport java.lang.annotation.Annotation;\r\nimport java.sql.PreparedStatement;\r\nimport java.sql.ResultSet;\r\nimport java.sql.SQLException;\r\nimport java.sql.Types;\r\nimport java.util.Objects;\r\nimport java.util.Properties;\r\n\r\nimport org.hibernate.HibernateException;\r\nimport org.hibernate.engine.spi.SharedSessionContractImplementor;\r\nimport org.hibernate.usertype.DynamicParameterizedType;\r\nimport org.hibernate.usertype.UserType;\r\n\r\npublic class PersistableEnumType implements UserType, DynamicParameterizedType\r\n{\r\n   private int sqlType;\r\n   private Class&lt;? extends PersistableEnum&lt;?&gt;&gt; clazz;\r\n   \r\n   @Override\r\n   public void setParameterValues(Properties parameters)\r\n   {\r\n      ParameterType reader = (ParameterType) parameters.get(PARAMETER_TYPE);\r\n      \r\n      EnumConverter converter = getEnumConverter(reader);\r\n      sqlType = converter.sqlType();\r\n      clazz = converter.enumClass();\r\n   }\r\n   \r\n   private EnumConverter getEnumConverter(ParameterType reader)\r\n   {\r\n      for (Annotation annotation : reader.getAnnotationsMethod()){\r\n         if (annotation instanceof EnumConverter) {\r\n            return (EnumConverter) annotation;\r\n         }\r\n      }\r\n      throw new IllegalStateException(&quot;The PersistableEnumType should be used with @EnumConverter annotation.&quot;);\r\n   }\r\n   \r\n   @Override\r\n   public int[] sqlTypes()\r\n   {\r\n      return new int[] {sqlType};\r\n   }\r\n\r\n   @Override\r\n   public Class&lt;?&gt; returnedClass()\r\n   {\r\n      return clazz;\r\n   }\r\n\r\n   @Override\r\n   public boolean equals(Object x, Object y) throws HibernateException\r\n   {\r\n      return Objects.equals(x, y);\r\n   }\r\n\r\n   @Override\r\n   public int hashCode(Object x) throws HibernateException\r\n   {\r\n      return Objects.hashCode(x);\r\n   }\r\n\r\n   @Override\r\n   public Object nullSafeGet(ResultSet rs,\r\n         String[] names,\r\n         SharedSessionContractImplementor session,\r\n         Object owner) throws HibernateException, SQLException \r\n   {\r\n      Object val = null;\r\n      if (sqlType == Types.INTEGER) val = rs.getInt(names[0]);\r\n      if (sqlType == Types.VARCHAR) val = rs.getString(names[0]);\r\n      \r\n      if (rs.wasNull()) return null;\r\n      \r\n      for (PersistableEnum&lt;?&gt; pEnum : clazz.getEnumConstants())\r\n      {\r\n         if (Objects.equals(pEnum.getValue(), val)) return pEnum;\r\n      }\r\n      throw new IllegalArgumentException(&quot;Can not convert &quot; + val + &quot; to enum &quot; + clazz.getName());\r\n   }\r\n\r\n   @Override\r\n   public void nullSafeSet(PreparedStatement st,\r\n         Object value,\r\n         int index,\r\n         SharedSessionContractImplementor session) throws HibernateException, SQLException\r\n   {\r\n      if (value == null) {\r\n         st.setNull(index, sqlType);\r\n      }\r\n      else {\r\n         PersistableEnum&lt;?&gt; pEnum = (PersistableEnum&lt;?&gt;) value;\r\n         if (sqlType == Types.INTEGER) st.setInt(index, (Integer) pEnum.getValue());\r\n         if (sqlType == Types.VARCHAR) st.setString(index, (String) pEnum.getValue());\r\n      }\r\n   }\r\n\r\n   @Override\r\n   public Object deepCopy(Object value) throws HibernateException\r\n   {\r\n      return value;\r\n   }\r\n\r\n   @Override\r\n   public boolean isMutable()\r\n   {\r\n      return false;\r\n   }\r\n\r\n   @Override\r\n   public Serializable disassemble(Object value) throws HibernateException\r\n   {\r\n      return Objects.toString(value);\r\n   }\r\n\r\n   @Override\r\n   public Object assemble(Serializable cached, Object owner) throws HibernateException\r\n   {\r\n      return cached;\r\n   }\r\n\r\n   @Override\r\n   public Object replace(Object original, Object target, Object owner) throws HibernateException\r\n   {\r\n      return original;\r\n   }\r\n}\r\n\r\n```\r\n\r\n3. And then, you can use it:\r\n``` lang-java\r\nimport org.hibernate.annotations.Type;\r\n\r\n@Entity\r\n@Table(name=&quot;TST_DATA&quot;)\r\npublic class TestData\r\n{\r\n   ...\r\n \r\n   @EnumConverter(enumClass = IntegerEnum.class, sqlType = Types.INTEGER)\r\n   @Type(type = &quot;com.example.converter.PersistableEnumType&quot;)\r\n   @Column(name=&quot;INT_VAL&quot;)\r\n   public IntegerEnum getIntValue()\r\n   ...\r\n   \r\n   @EnumConverter(enumClass = StringEnum.class, sqlType = Types.VARCHAR)\r\n   @Type(type = &quot;com.example.converter.PersistableEnumType&quot;)\r\n   @Column(name=&quot;STR_VAL&quot;)\r\n   public StringEnum getStrValue()\r\n   ...\r\n}\r\n\r\n```\r\n\r\nSee also the chapter **5.3.3 Extending Hibernate with UserTypes** at the excellent book *&quot;Java Persistence with Hibernate&quot; by Bauer, King, Gregory*.","title":"Generic enum JPA AttributeConverter implementation","body":"<p>Luckily, you should not patch the hibernate for this.</p>\n\n<ol>\n<li>You can declare an annotation like the following:</li>\n</ol>\n\n<pre class=\"lang-java prettyprint-override\"><code>import java.lang.annotation.Retention;\nimport java.lang.annotation.Target;\nimport java.sql.Types;\n\nimport static java.lang.annotation.ElementType.METHOD;\nimport static java.lang.annotation.ElementType.FIELD;\nimport static java.lang.annotation.RetentionPolicy.RUNTIME;\n\n\n@Target({METHOD, FIELD}) \n@Retention(RUNTIME)\npublic @interface EnumConverter\n{\n   Class&lt;? extends PersistableEnum&lt;?&gt;&gt; enumClass() default IntegerEnum.class;\n\n   int sqlType() default Types.INTEGER;\n}\n</code></pre>\n\n<ol start=\"2\">\n<li>A hibernate user type like the following:</li>\n</ol>\n\n<pre class=\"lang-java prettyprint-override\"><code>import java.io.Serializable;\nimport java.lang.annotation.Annotation;\nimport java.sql.PreparedStatement;\nimport java.sql.ResultSet;\nimport java.sql.SQLException;\nimport java.sql.Types;\nimport java.util.Objects;\nimport java.util.Properties;\n\nimport org.hibernate.HibernateException;\nimport org.hibernate.engine.spi.SharedSessionContractImplementor;\nimport org.hibernate.usertype.DynamicParameterizedType;\nimport org.hibernate.usertype.UserType;\n\npublic class PersistableEnumType implements UserType, DynamicParameterizedType\n{\n   private int sqlType;\n   private Class&lt;? extends PersistableEnum&lt;?&gt;&gt; clazz;\n\n   @Override\n   public void setParameterValues(Properties parameters)\n   {\n      ParameterType reader = (ParameterType) parameters.get(PARAMETER_TYPE);\n\n      EnumConverter converter = getEnumConverter(reader);\n      sqlType = converter.sqlType();\n      clazz = converter.enumClass();\n   }\n\n   private EnumConverter getEnumConverter(ParameterType reader)\n   {\n      for (Annotation annotation : reader.getAnnotationsMethod()){\n         if (annotation instanceof EnumConverter) {\n            return (EnumConverter) annotation;\n         }\n      }\n      throw new IllegalStateException(\"The PersistableEnumType should be used with @EnumConverter annotation.\");\n   }\n\n   @Override\n   public int[] sqlTypes()\n   {\n      return new int[] {sqlType};\n   }\n\n   @Override\n   public Class&lt;?&gt; returnedClass()\n   {\n      return clazz;\n   }\n\n   @Override\n   public boolean equals(Object x, Object y) throws HibernateException\n   {\n      return Objects.equals(x, y);\n   }\n\n   @Override\n   public int hashCode(Object x) throws HibernateException\n   {\n      return Objects.hashCode(x);\n   }\n\n   @Override\n   public Object nullSafeGet(ResultSet rs,\n         String[] names,\n         SharedSessionContractImplementor session,\n         Object owner) throws HibernateException, SQLException \n   {\n      Object val = null;\n      if (sqlType == Types.INTEGER) val = rs.getInt(names[0]);\n      if (sqlType == Types.VARCHAR) val = rs.getString(names[0]);\n\n      if (rs.wasNull()) return null;\n\n      for (PersistableEnum&lt;?&gt; pEnum : clazz.getEnumConstants())\n      {\n         if (Objects.equals(pEnum.getValue(), val)) return pEnum;\n      }\n      throw new IllegalArgumentException(\"Can not convert \" + val + \" to enum \" + clazz.getName());\n   }\n\n   @Override\n   public void nullSafeSet(PreparedStatement st,\n         Object value,\n         int index,\n         SharedSessionContractImplementor session) throws HibernateException, SQLException\n   {\n      if (value == null) {\n         st.setNull(index, sqlType);\n      }\n      else {\n         PersistableEnum&lt;?&gt; pEnum = (PersistableEnum&lt;?&gt;) value;\n         if (sqlType == Types.INTEGER) st.setInt(index, (Integer) pEnum.getValue());\n         if (sqlType == Types.VARCHAR) st.setString(index, (String) pEnum.getValue());\n      }\n   }\n\n   @Override\n   public Object deepCopy(Object value) throws HibernateException\n   {\n      return value;\n   }\n\n   @Override\n   public boolean isMutable()\n   {\n      return false;\n   }\n\n   @Override\n   public Serializable disassemble(Object value) throws HibernateException\n   {\n      return Objects.toString(value);\n   }\n\n   @Override\n   public Object assemble(Serializable cached, Object owner) throws HibernateException\n   {\n      return cached;\n   }\n\n   @Override\n   public Object replace(Object original, Object target, Object owner) throws HibernateException\n   {\n      return original;\n   }\n}\n\n</code></pre>\n\n<ol start=\"3\">\n<li>And then, you can use it:</li>\n</ol>\n\n<pre class=\"lang-java prettyprint-override\"><code>import org.hibernate.annotations.Type;\n\n@Entity\n@Table(name=\"TST_DATA\")\npublic class TestData\n{\n   ...\n\n   @EnumConverter(enumClass = IntegerEnum.class, sqlType = Types.INTEGER)\n   @Type(type = \"com.example.converter.PersistableEnumType\")\n   @Column(name=\"INT_VAL\")\n   public IntegerEnum getIntValue()\n   ...\n\n   @EnumConverter(enumClass = StringEnum.class, sqlType = Types.VARCHAR)\n   @Type(type = \"com.example.converter.PersistableEnumType\")\n   @Column(name=\"STR_VAL\")\n   public StringEnum getStrValue()\n   ...\n}\n\n</code></pre>\n\n<p>See also the chapter <strong>5.3.3 Extending Hibernate with UserTypes</strong> at the excellent book <em>\"Java Persistence with Hibernate\" by Bauer, King, Gregory</em>.</p>\n"},{"tags":[],"owner":{"account_id":5256191,"reputation":433,"user_id":4279074,"display_name":"Marcus Voltolim"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1606030608,"creation_date":1605907195,"answer_id":64937080,"question_id":58681902,"body_markdown":"Simplifying:\r\n\r\n    import com.pismo.apirest.mvc.enums.OperationType;\r\n    import com.pismo.apirest.mvc.enums.support.PersistableEnum;\r\n    \r\n    import java.util.Objects;\r\n    import java.util.Optional;\r\n    import java.util.stream.Stream;\r\n    import javax.persistence.AttributeConverter;\r\n    import javax.persistence.Converter;\r\n    \r\n    import lombok.NonNull;\r\n    import lombok.RequiredArgsConstructor;\r\n    \r\n    @SuppressWarnings(&quot;unused&quot;)\r\n    public interface EnumsConverters {\r\n    \r\n    \t@RequiredArgsConstructor\r\n    \tabstract class AbstractPersistableEnumConverter&lt;E extends Enum&lt;E&gt; &amp; PersistableEnum&lt;I&gt;, I&gt; implements AttributeConverter&lt;E, I&gt; {\r\n    \r\n    \t\tprivate final E[] enumConstants;\r\n    \r\n    \t\tpublic AbstractPersistableEnumConverter(@NonNull Class&lt;E&gt; enumType) {\r\n    \t\t\tenumConstants = enumType.getEnumConstants();\r\n    \t\t}\r\n    \r\n    \r\n    \t\t@Override\r\n    \t\tpublic I convertToDatabaseColumn(E attribute) {\r\n    \t\t\treturn Objects.isNull(attribute) ? null : attribute.getId();\r\n    \t\t}\r\n    \r\n    \t\t@Override\r\n    \t\tpublic E convertToEntityAttribute(I dbData) {\r\n    \t\t\treturn fromId(dbData, enumConstants);\r\n    \t\t}\r\n    \r\n    \t\tpublic E fromId(I idValue) {\r\n    \t\t\treturn fromId(idValue, enumConstants);\r\n    \t\t}\r\n    \r\n    \t\tpublic static &lt;E extends Enum&lt;E&gt; &amp; PersistableEnum&lt;I&gt;, I&gt; E fromId(I idValue, E[] enumConstants) {\r\n    \t\t\treturn Objects.isNull(idValue) ? null : Stream.of(enumConstants)\r\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\t  .filter(e -&gt; e.getId().equals(idValue))\r\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\t  .findAny()\r\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\t  .orElseThrow(() -&gt; new IllegalArgumentException(\r\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  String.format(&quot;Does not exist %s with ID: %s&quot;, enumConstants[0].getClass().getSimpleName(), idValue)));\r\n    \t\t}\r\n    \r\n    \t}\r\n    \r\n    \t@Converter(autoApply = true)\r\n    \tclass OperationTypeConverter extends AbstractPersistableEnumConverter&lt;OperationType, Integer&gt; {\r\n    \r\n    \t\tpublic OperationTypeConverter() {\r\n    \t\t\tsuper(OperationType.class);\r\n    \t\t}\r\n    \r\n    \t}\r\n    \r\n    }","title":"Generic enum JPA AttributeConverter implementation","body":"<p>Simplifying:</p>\n<pre><code>import com.pismo.apirest.mvc.enums.OperationType;\nimport com.pismo.apirest.mvc.enums.support.PersistableEnum;\n\nimport java.util.Objects;\nimport java.util.Optional;\nimport java.util.stream.Stream;\nimport javax.persistence.AttributeConverter;\nimport javax.persistence.Converter;\n\nimport lombok.NonNull;\nimport lombok.RequiredArgsConstructor;\n\n@SuppressWarnings(&quot;unused&quot;)\npublic interface EnumsConverters {\n\n    @RequiredArgsConstructor\n    abstract class AbstractPersistableEnumConverter&lt;E extends Enum&lt;E&gt; &amp; PersistableEnum&lt;I&gt;, I&gt; implements AttributeConverter&lt;E, I&gt; {\n\n        private final E[] enumConstants;\n\n        public AbstractPersistableEnumConverter(@NonNull Class&lt;E&gt; enumType) {\n            enumConstants = enumType.getEnumConstants();\n        }\n\n\n        @Override\n        public I convertToDatabaseColumn(E attribute) {\n            return Objects.isNull(attribute) ? null : attribute.getId();\n        }\n\n        @Override\n        public E convertToEntityAttribute(I dbData) {\n            return fromId(dbData, enumConstants);\n        }\n\n        public E fromId(I idValue) {\n            return fromId(idValue, enumConstants);\n        }\n\n        public static &lt;E extends Enum&lt;E&gt; &amp; PersistableEnum&lt;I&gt;, I&gt; E fromId(I idValue, E[] enumConstants) {\n            return Objects.isNull(idValue) ? null : Stream.of(enumConstants)\n                                                          .filter(e -&gt; e.getId().equals(idValue))\n                                                          .findAny()\n                                                          .orElseThrow(() -&gt; new IllegalArgumentException(\n                                                              String.format(&quot;Does not exist %s with ID: %s&quot;, enumConstants[0].getClass().getSimpleName(), idValue)));\n        }\n\n    }\n\n    @Converter(autoApply = true)\n    class OperationTypeConverter extends AbstractPersistableEnumConverter&lt;OperationType, Integer&gt; {\n\n        public OperationTypeConverter() {\n            super(OperationType.class);\n        }\n\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8825860,"reputation":1,"user_id":6594138,"display_name":"Ivan Brel"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649778281,"creation_date":1649778281,"answer_id":71845606,"question_id":58681902,"body_markdown":"I tried 1000 times create something same. \r\nGenerate converter for each enum on the fly - not problem, but then they will be have same class. Main problem there: *org.hibernate.boot.internal.MetadataBuilderImpl#applyAttributeConverter(java.lang.Class&lt;? extends javax.persistence.AttributeConverter&gt;, boolean).*\r\n\r\nIf converter already registered we got exception. \r\n```java \r\npublic void addAttributeConverterInfo(AttributeConverterInfo info) {\r\n\t\tif ( this.attributeConverterInfoMap == null ) {\r\n\t\t\tthis.attributeConverterInfoMap = new HashMap&lt;&gt;();\r\n\t\t}\r\n\r\n\t\tfinal Object old = this.attributeConverterInfoMap.put( info.getConverterClass(), info );\r\n\r\n\t\tif ( old != null ) {\r\n\t\t\tthrow new AssertionFailure(\r\n\t\t\t\t\tString.format(\r\n\t\t\t\t\t\t\t&quot;AttributeConverter class [%s] registered multiple times&quot;,\r\n\t\t\t\t\t\t\tinfo.getConverterClass()\r\n\t\t\t\t\t)\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n```\r\nPerhaps we can change *org.hibernate.boot.internal.BootstrapContext* Impl, but I&#39;m sure it&#39;s create too complex and non-flexible code.","title":"Generic enum JPA AttributeConverter implementation","body":"<p>I tried 1000 times create something same.\nGenerate converter for each enum on the fly - not problem, but then they will be have same class. Main problem there: <em>org.hibernate.boot.internal.MetadataBuilderImpl#applyAttributeConverter(java.lang.Class&lt;? extends javax.persistence.AttributeConverter&gt;, boolean).</em></p>\n<p>If converter already registered we got exception.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public void addAttributeConverterInfo(AttributeConverterInfo info) {\n        if ( this.attributeConverterInfoMap == null ) {\n            this.attributeConverterInfoMap = new HashMap&lt;&gt;();\n        }\n\n        final Object old = this.attributeConverterInfoMap.put( info.getConverterClass(), info );\n\n        if ( old != null ) {\n            throw new AssertionFailure(\n                    String.format(\n                            &quot;AttributeConverter class [%s] registered multiple times&quot;,\n                            info.getConverterClass()\n                    )\n            );\n        }\n    }\n</code></pre>\n<p>Perhaps we can change <em>org.hibernate.boot.internal.BootstrapContext</em> Impl, but I'm sure it's create too complex and non-flexible code.</p>\n"}],"owner":{"account_id":9445465,"reputation":3056,"user_id":7024402,"display_name":"ajobi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2773,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":3,"score":6,"last_activity_date":1649778281,"creation_date":1572796663,"question_id":58681902,"body_markdown":"# Problem I am trying to solve #\nI am trying to implement enum mapping for Hibernate. So far I have researched available options, and both the `@Enumerated(EnumType.ORDINAL)` and `@Enumerated(EnumType.STRING)` seemed inadequate for my needs. The `@Enumerated(EnumType.ORDINAL)` seems to be very error-prone, as a mere reordering of enum constants can mess the mapping up, and the `@Enumerated(EnumType.STRING)` does not suffice too, as the database I work with is already full of values to be mapped, and these values are not what I would like my enum constants to be named like (the values are foreign language strings / integers).\n\nCurrently, all these values are being mapped to String / Integer properties. At the same time the properties should only allow for a restricted sets of values (imagine `meetingStatus` property allowing for Strings: `PLANNED`, `CANCELED`, and `DONE`. Or another property allowing for a restricted set of Integer values: `1`, `2`, `3`, `4`, `5`).\n\nMy idea was to replace the implementation with enums to improve the type safety of the code. A good example where the String / Integer implementation could cause errors is String method parameter representing such value - with String, anything goes there. Having an Enum parameter type on the other hand introduces compile time safety.\n\n# My best approach so far\nThe only solution that seemed to fulfill my needs was to implement custom `javax.persistence.AttributeConverter` with `@Converter` annotation for every enum. As my model would require quite a few enums, writing custom converter for each of them started to seem like a madness really quickly. So I searched for a generic solution to the problem -&gt; how to write a generic converter for any type of enum. The following answer was of big help here: https://stackoverflow.com/a/23564597/7024402. The code example in the answer provides for somewhat generic implementation, yet for every enum there is still a separate converter class needed. The author of the answer also continues:\n\n*&quot;The alternative would be to define a custom annotation, patch the JPA provider to recognize this annotation. That way, you could examine the field type as you build the mapping information and feed the necessary enum type into a purely generic converter.&quot;*\n\nAnd that&#39;s what I think I would be interested in. I could, unfortunately, not find any more information about that, and I would need a little more guidance to understand what needs to be done and how would it work with this approach.\n\n# Current Implementation\n\n```\npublic interface PersistableEnum&lt;T&gt; {\n    T getValue();\n}\n```\n\n```\npublic enum IntegerEnum implements PersistableEnum&lt;Integer&gt; {\n    ONE(1),\n    TWO(2),\n    THREE(3),\n    FOUR(4),\n    FIVE(5),\n    SIX(6);\n\n    private int value;\n\n    IntegerEnum(int value) {\n        this.value = value;\n    }\n\n    @Override\n    public Integer getValue() {\n        return value;\n    }\n}\n```\n\n```\npublic abstract class PersistableEnumConverter&lt;E extends PersistableEnum&lt;T&gt;, T&gt; implements AttributeConverter&lt;E, T&gt; {\n\n    private Class&lt;E&gt; enumType;\n\n    public PersistableEnumConverter(Class&lt;E&gt; enumType) {\n        this.enumType = enumType;\n    }\n\n    @Override\n    public T convertToDatabaseColumn(E attribute) {\n        return attribute.getValue();\n    }\n\n    @Override\n    public E convertToEntityAttribute(T dbData) {\n        for (E enumConstant : enumType.getEnumConstants()) {\n            if (enumConstant.getValue().equals(dbData)) {\n                return enumConstant;\n            }\n        }\n        throw new EnumConversionException(enumType, dbData);\n    }\n}\n```\n\n```\n@Converter\npublic class IntegerEnumConverter extends PersistableEnumConverter&lt;IntegerEnum, Integer&gt; {\n\n    public IntegerEnumConverter() {\n        super(IntegerEnum.class);\n    }\n}\n```\nThis is how I was able to achieve the partially generic converter implementation.\n\n**GOAL: Getting rid of the need to create new converter class for every enum.**","title":"Generic enum JPA AttributeConverter implementation","body":"<h1>Problem I am trying to solve</h1>\n<p>I am trying to implement enum mapping for Hibernate. So far I have researched available options, and both the <code>@Enumerated(EnumType.ORDINAL)</code> and <code>@Enumerated(EnumType.STRING)</code> seemed inadequate for my needs. The <code>@Enumerated(EnumType.ORDINAL)</code> seems to be very error-prone, as a mere reordering of enum constants can mess the mapping up, and the <code>@Enumerated(EnumType.STRING)</code> does not suffice too, as the database I work with is already full of values to be mapped, and these values are not what I would like my enum constants to be named like (the values are foreign language strings / integers).</p>\n<p>Currently, all these values are being mapped to String / Integer properties. At the same time the properties should only allow for a restricted sets of values (imagine <code>meetingStatus</code> property allowing for Strings: <code>PLANNED</code>, <code>CANCELED</code>, and <code>DONE</code>. Or another property allowing for a restricted set of Integer values: <code>1</code>, <code>2</code>, <code>3</code>, <code>4</code>, <code>5</code>).</p>\n<p>My idea was to replace the implementation with enums to improve the type safety of the code. A good example where the String / Integer implementation could cause errors is String method parameter representing such value - with String, anything goes there. Having an Enum parameter type on the other hand introduces compile time safety.</p>\n<h1>My best approach so far</h1>\n<p>The only solution that seemed to fulfill my needs was to implement custom <code>javax.persistence.AttributeConverter</code> with <code>@Converter</code> annotation for every enum. As my model would require quite a few enums, writing custom converter for each of them started to seem like a madness really quickly. So I searched for a generic solution to the problem -&gt; how to write a generic converter for any type of enum. The following answer was of big help here: <a href=\"https://stackoverflow.com/a/23564597/7024402\">https://stackoverflow.com/a/23564597/7024402</a>. The code example in the answer provides for somewhat generic implementation, yet for every enum there is still a separate converter class needed. The author of the answer also continues:</p>\n<p><em>&quot;The alternative would be to define a custom annotation, patch the JPA provider to recognize this annotation. That way, you could examine the field type as you build the mapping information and feed the necessary enum type into a purely generic converter.&quot;</em></p>\n<p>And that's what I think I would be interested in. I could, unfortunately, not find any more information about that, and I would need a little more guidance to understand what needs to be done and how would it work with this approach.</p>\n<h1>Current Implementation</h1>\n<pre><code>public interface PersistableEnum&lt;T&gt; {\n    T getValue();\n}\n</code></pre>\n<pre><code>public enum IntegerEnum implements PersistableEnum&lt;Integer&gt; {\n    ONE(1),\n    TWO(2),\n    THREE(3),\n    FOUR(4),\n    FIVE(5),\n    SIX(6);\n\n    private int value;\n\n    IntegerEnum(int value) {\n        this.value = value;\n    }\n\n    @Override\n    public Integer getValue() {\n        return value;\n    }\n}\n</code></pre>\n<pre><code>public abstract class PersistableEnumConverter&lt;E extends PersistableEnum&lt;T&gt;, T&gt; implements AttributeConverter&lt;E, T&gt; {\n\n    private Class&lt;E&gt; enumType;\n\n    public PersistableEnumConverter(Class&lt;E&gt; enumType) {\n        this.enumType = enumType;\n    }\n\n    @Override\n    public T convertToDatabaseColumn(E attribute) {\n        return attribute.getValue();\n    }\n\n    @Override\n    public E convertToEntityAttribute(T dbData) {\n        for (E enumConstant : enumType.getEnumConstants()) {\n            if (enumConstant.getValue().equals(dbData)) {\n                return enumConstant;\n            }\n        }\n        throw new EnumConversionException(enumType, dbData);\n    }\n}\n</code></pre>\n<pre><code>@Converter\npublic class IntegerEnumConverter extends PersistableEnumConverter&lt;IntegerEnum, Integer&gt; {\n\n    public IntegerEnumConverter() {\n        super(IntegerEnum.class);\n    }\n}\n</code></pre>\n<p>This is how I was able to achieve the partially generic converter implementation.</p>\n<p><strong>GOAL: Getting rid of the need to create new converter class for every enum.</strong></p>\n"},{"tags":["java","sqlite","jdbc"],"comments":[{"owner":{"account_id":213468,"reputation":103486,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1649778082,"post_id":71814667,"comment_id":126959741,"body_markdown":"I recommend you learn about and use [try-with-resources](https://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html).","body":"I recommend you learn about and use <a href=\"https://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html\" rel=\"nofollow noreferrer\">try-with-resources</a>."}],"answers":[{"tags":[],"owner":{"account_id":24914166,"reputation":21,"user_id":18783328,"display_name":"David Hutter"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649770812,"creation_date":1649770812,"answer_id":71843779,"question_id":71814667,"body_markdown":"Everything you do after the first return statement in the outer try block can never be reached. The second try block will never be executed, therefore you have some unreachable code here.\r\nI think what you want to do is this:\r\n\r\n    try {\r\n        Connection conn = ConnectionProvider.connect();\r\n        Statement st = conn.createStatement();\r\n        ResultSet rs = st.executeQuery(query);\r\n        try {\r\n            conn.close();\r\n            st.close();\r\n            rs.close();\r\n        } catch (Exception e) {\r\n            JOptionPane.showMessageDialog(null, e);\r\n            return null;\r\n        }\r\n        return rs;\r\n    } catch (Exception e) {\r\n        JOptionPane.showMessageDialog(null, e);\r\n        System.out.println(e);\r\n        return null; \r\n    }\r\nAlthough I will say that this may just not be the correct place to use the try-catch. Maybe what you should do here is throw the possible exceptions back to whoever calls this method instead - usually nested try-catch blocks are very rarely actually used/needed in this way. Also if you encounter an exception, you just return null, instead of handling what this means for the rest of your application.\r\nWhat you could also try is, assuming that at this point your query was successful:\r\n\r\n    try {\r\n            Connection conn = ConnectionProvider.connect();\r\n            Statement st = conn.createStatement();\r\n            ResultSet rs = st.executeQuery(query);\r\n            try {\r\n                conn.close();\r\n                st.close();\r\n                rs.close();\r\n            } catch (Exception e) {\r\n                throw e;\r\n            } finally {\r\n                return rs;\r\n            }\r\n        } catch (Exception e) {\r\n            throw e; \r\n        }\r\n\r\nThough for this approach you should really think about what you need to happen in each error case.\r\nAs an additional side note, even though I&#39;m aware that many people ignore this:\r\nAlways try to use the proper class for the Exceptions you expect in a catch-block, and if it&#39;s only for readabilities sake.","title":"I get an exception that the database is locked and I try to close connection and statement but here is the problem unreachable statement in try block","body":"<p>Everything you do after the first return statement in the outer try block can never be reached. The second try block will never be executed, therefore you have some unreachable code here.\nI think what you want to do is this:</p>\n<pre><code>try {\n    Connection conn = ConnectionProvider.connect();\n    Statement st = conn.createStatement();\n    ResultSet rs = st.executeQuery(query);\n    try {\n        conn.close();\n        st.close();\n        rs.close();\n    } catch (Exception e) {\n        JOptionPane.showMessageDialog(null, e);\n        return null;\n    }\n    return rs;\n} catch (Exception e) {\n    JOptionPane.showMessageDialog(null, e);\n    System.out.println(e);\n    return null; \n}\n</code></pre>\n<p>Although I will say that this may just not be the correct place to use the try-catch. Maybe what you should do here is throw the possible exceptions back to whoever calls this method instead - usually nested try-catch blocks are very rarely actually used/needed in this way. Also if you encounter an exception, you just return null, instead of handling what this means for the rest of your application.\nWhat you could also try is, assuming that at this point your query was successful:</p>\n<pre><code>try {\n        Connection conn = ConnectionProvider.connect();\n        Statement st = conn.createStatement();\n        ResultSet rs = st.executeQuery(query);\n        try {\n            conn.close();\n            st.close();\n            rs.close();\n        } catch (Exception e) {\n            throw e;\n        } finally {\n            return rs;\n        }\n    } catch (Exception e) {\n        throw e; \n    }\n</code></pre>\n<p>Though for this approach you should really think about what you need to happen in each error case.\nAs an additional side note, even though I'm aware that many people ignore this:\nAlways try to use the proper class for the Exceptions you expect in a catch-block, and if it's only for readabilities sake.</p>\n"},{"tags":[],"owner":{"account_id":7478323,"reputation":175,"user_id":5683970,"display_name":"Jordi Alvarez"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649774035,"creation_date":1649771862,"answer_id":71844031,"question_id":71814667,"body_markdown":"There are several things to improve in the piece of code you post.\r\n\r\nFirst, you need to close the resources (Connection, Statement and ResultSet) in reverse order with respect to the opening order. So, first you should close the ResultSet, second the Statement, and finally the Connection.\r\n\r\nClosing in the order you are doing might cause problems when closing Statement / ResultSet with the Connection already closed.\r\n\r\nBy other hand, starting in Java 7, you have the try-with-resources construct, that closes resources for you. You can take a look at [The try-with-resources Statement docs][1]. \r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html","title":"I get an exception that the database is locked and I try to close connection and statement but here is the problem unreachable statement in try block","body":"<p>There are several things to improve in the piece of code you post.</p>\n<p>First, you need to close the resources (Connection, Statement and ResultSet) in reverse order with respect to the opening order. So, first you should close the ResultSet, second the Statement, and finally the Connection.</p>\n<p>Closing in the order you are doing might cause problems when closing Statement / ResultSet with the Connection already closed.</p>\n<p>By other hand, starting in Java 7, you have the try-with-resources construct, that closes resources for you. You can take a look at <a href=\"https://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html\" rel=\"nofollow noreferrer\">The try-with-resources Statement docs</a>.</p>\n"}],"owner":{"account_id":24888719,"reputation":1,"user_id":18760988,"display_name":"Nuwan99"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":114,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1649778035,"creation_date":1649576579,"question_id":71814667,"body_markdown":"I get an exception that the database is locked and I try to close connection and statement, but here is the problem unreachable statement in try block.\r\n\r\n\r\n    public static ResultSet getData (String query){\r\n        try {\r\n            Connection conn = ConnectionProvider.connect();\r\n            Statement st = conn.createStatement();\r\n            ResultSet rs = st.executeQuery(query);\r\n            return rs;\r\n            try {\r\n                conn.close();\r\n                st.close();\r\n                rs.close();\r\n            } catch (Exception e) {\r\n                JOptionPane.showMessageDialog(null, e);\r\n                return null;\r\n            }\r\n            \r\n        } catch (Exception e) {\r\n            JOptionPane.showMessageDialog(null, e);\r\n            System.out.println(e);\r\n            return null; \r\n        }","title":"I get an exception that the database is locked and I try to close connection and statement but here is the problem unreachable statement in try block","body":"<p>I get an exception that the database is locked and I try to close connection and statement, but here is the problem unreachable statement in try block.</p>\n<pre><code>public static ResultSet getData (String query){\n    try {\n        Connection conn = ConnectionProvider.connect();\n        Statement st = conn.createStatement();\n        ResultSet rs = st.executeQuery(query);\n        return rs;\n        try {\n            conn.close();\n            st.close();\n            rs.close();\n        } catch (Exception e) {\n            JOptionPane.showMessageDialog(null, e);\n            return null;\n        }\n        \n    } catch (Exception e) {\n        JOptionPane.showMessageDialog(null, e);\n        System.out.println(e);\n        return null; \n    }\n</code></pre>\n"},{"tags":["java","loops","for-loop"],"comments":[{"owner":{"account_id":4999927,"reputation":952,"user_id":4019273,"display_name":"Cheshiremoe"},"score":0,"creation_date":1649777396,"post_id":71844951,"comment_id":126959467,"body_markdown":"What is the UI components your building this with?   If your using HTML/CSS it seems like you should be able to use CSS flexbox would be much easier &amp; adjust to more screen sizes automatically.","body":"What is the UI components your building this with?   If your using HTML/CSS it seems like you should be able to use CSS flexbox would be much easier &amp; adjust to more screen sizes automatically."}],"answers":[{"tags":[],"owner":{"account_id":8232961,"reputation":1576,"user_id":8990644,"display_name":"bui"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1649778033,"creation_date":1649776842,"answer_id":71845252,"question_id":71844951,"body_markdown":"Not sure if this is what you want since it used 3 loops, but at least it works (assuming you want loop 1 to always happen first)\r\n\r\n    int i_start = 2;\r\n    int j_start = 1;\r\n    int i_terminate = 32;\r\n    int j_terminate = 32;\r\n    int next_i, next_j;\r\n    while (true) {\r\n        next_i = Math.min(i_start + 12, i_terminate);\r\n        next_j = Math.min(j_start + 12, j_terminate);\r\n        for (int i = i_start; i &lt; next_i; ++i) {\r\n            // do something\r\n        }\r\n        \r\n        for (int j = j_start; j &lt; next_j; ++j) {\r\n            // do something\r\n        }\r\n\r\n        i_start = next_i;\r\n        j_start = next_j;\r\n\r\n        if (i_start == i_terminate &amp;&amp; j_start == j_terminate) {\r\n            break;\r\n        }\r\n    }","title":"Can inner and outer loops interrupt and resume one after another?","body":"<p>Not sure if this is what you want since it used 3 loops, but at least it works (assuming you want loop 1 to always happen first)</p>\n<pre><code>int i_start = 2;\nint j_start = 1;\nint i_terminate = 32;\nint j_terminate = 32;\nint next_i, next_j;\nwhile (true) {\n    next_i = Math.min(i_start + 12, i_terminate);\n    next_j = Math.min(j_start + 12, j_terminate);\n    for (int i = i_start; i &lt; next_i; ++i) {\n        // do something\n    }\n    \n    for (int j = j_start; j &lt; next_j; ++j) {\n        // do something\n    }\n\n    i_start = next_i;\n    j_start = next_j;\n\n    if (i_start == i_terminate &amp;&amp; j_start == j_terminate) {\n        break;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":2850792,"reputation":105,"user_id":2448059,"accept_rate":40,"display_name":"Melvin Mah"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71845252,"answer_count":1,"score":0,"last_activity_date":1649778033,"creation_date":1649775613,"question_id":71844951,"body_markdown":"I have an existing loop that draws the labels and textboxes in two horizontal lines (Line 1 as Label, Line 2 as textboxes). At that time, the loop was based on the definite requirement that there will not be more than 12 elements of each type. This was written using two loops (one loop representing a label, another as a text box):\r\n\r\n**Draw labels**\r\n\r\n    for (int i = 2, i&lt;hdrlabel.length; i++){\r\n    coldef.add(new ColDefType(&quot;&quot;,hdrLabel[i],&quot;varchar&quot;,false,15,&quot;HDR&quot;+String.valueOf(i),1,i==2?&quot;%-25s&quot;:&quot;&quot;,6,&quot;LABEL&quot;,true,&quot;&quot;));\r\n    }\r\n**Draw Text Boxes**\r\n\r\n    LinkedHashmap&lt;String,String&gt; row = dbVal.get(i)    \r\n    for (int j = 1, i&lt;hdrlabel.length-1; i++){\r\n            coldef.add(new ColDefType(j==1?row.get(hdrLabel[j]:&quot;&quot;,row.get(hdrLabel[j+1],&quot;decimal5&quot;,false,15,row.get(hdrLabel[0])+String.valueOf(j),i+2),j==1?&quot;%-25s&quot;:&quot;&quot;,6,&quot;TXTFLD&quot;,true,&quot;&quot;));\r\n        }\r\n\r\nNow, as to take account of number of days, the number of elements (in hdrLabel.length-2) is now increased to a max of 31 for each component type. Due to spacing issues for mobile and tablet viewing, it was determined that it&#39;s best if we draw up to 12 elements per line. What I am looking for is that if the number of elements of each type is more than 12, it should be drawn like:\r\n\r\n - Line 1: Labels 1-12 \r\n - Line 2: Text Box 1-12 \r\n - Line 3: Labels 13-24 \r\n - Line 4: Text Box 13-24 \r\n - Line 5: Labels 25-31 \r\n - Line 6: Text Box 25-31\r\n\r\nIf the number of elements is between 15 to 24, boxes and labels in lines 5 and 6 are not required to be drawn.\r\n\r\nIs there any way to use only two loops where we pause one loop when either reaches the 12 / 24 element, run the other loop and then resume the former loop? \r\n\r\nI could not find a much more leaner way to do this, as the closest I could get is to break it to several for loops, but it&#39;s definitely not efficient if given of the dynamic number of max elements:\r\n\r\n- Line 1 - (for i=2, i&lt;14, i++) - break at 13 \r\n- Line 2 - (for j=1, j&lt;13,j++) - break at 12 \r\n- Line 3 - (for i=14, i&lt;26, i++) - break at 26\r\n- Line 4 - (for j=13, i&lt;25, i++) - break at 25\r\n- Line 5 - (for i=26, i&lt;hdrLabel.length, i++) - break at 31\r\n- Line 6 - (for j=25, i&lt;hdrLabel.length-1, i++) - break at 31\r\n\r\n","title":"Can inner and outer loops interrupt and resume one after another?","body":"<p>I have an existing loop that draws the labels and textboxes in two horizontal lines (Line 1 as Label, Line 2 as textboxes). At that time, the loop was based on the definite requirement that there will not be more than 12 elements of each type. This was written using two loops (one loop representing a label, another as a text box):</p>\n<p><strong>Draw labels</strong></p>\n<pre><code>for (int i = 2, i&lt;hdrlabel.length; i++){\ncoldef.add(new ColDefType(&quot;&quot;,hdrLabel[i],&quot;varchar&quot;,false,15,&quot;HDR&quot;+String.valueOf(i),1,i==2?&quot;%-25s&quot;:&quot;&quot;,6,&quot;LABEL&quot;,true,&quot;&quot;));\n}\n</code></pre>\n<p><strong>Draw Text Boxes</strong></p>\n<pre><code>LinkedHashmap&lt;String,String&gt; row = dbVal.get(i)    \nfor (int j = 1, i&lt;hdrlabel.length-1; i++){\n        coldef.add(new ColDefType(j==1?row.get(hdrLabel[j]:&quot;&quot;,row.get(hdrLabel[j+1],&quot;decimal5&quot;,false,15,row.get(hdrLabel[0])+String.valueOf(j),i+2),j==1?&quot;%-25s&quot;:&quot;&quot;,6,&quot;TXTFLD&quot;,true,&quot;&quot;));\n    }\n</code></pre>\n<p>Now, as to take account of number of days, the number of elements (in hdrLabel.length-2) is now increased to a max of 31 for each component type. Due to spacing issues for mobile and tablet viewing, it was determined that it's best if we draw up to 12 elements per line. What I am looking for is that if the number of elements of each type is more than 12, it should be drawn like:</p>\n<ul>\n<li>Line 1: Labels 1-12</li>\n<li>Line 2: Text Box 1-12</li>\n<li>Line 3: Labels 13-24</li>\n<li>Line 4: Text Box 13-24</li>\n<li>Line 5: Labels 25-31</li>\n<li>Line 6: Text Box 25-31</li>\n</ul>\n<p>If the number of elements is between 15 to 24, boxes and labels in lines 5 and 6 are not required to be drawn.</p>\n<p>Is there any way to use only two loops where we pause one loop when either reaches the 12 / 24 element, run the other loop and then resume the former loop?</p>\n<p>I could not find a much more leaner way to do this, as the closest I could get is to break it to several for loops, but it's definitely not efficient if given of the dynamic number of max elements:</p>\n<ul>\n<li>Line 1 - (for i=2, i&lt;14, i++) - break at 13</li>\n<li>Line 2 - (for j=1, j&lt;13,j++) - break at 12</li>\n<li>Line 3 - (for i=14, i&lt;26, i++) - break at 26</li>\n<li>Line 4 - (for j=13, i&lt;25, i++) - break at 25</li>\n<li>Line 5 - (for i=26, i&lt;hdrLabel.length, i++) - break at 31</li>\n<li>Line 6 - (for j=25, i&lt;hdrLabel.length-1, i++) - break at 31</li>\n</ul>\n"},{"tags":["java","java-8","option-type","nullable","null-check"],"comments":[{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":0,"creation_date":1649727095,"post_id":71835972,"comment_id":126944178,"body_markdown":"There&#39;s a third way to get an NPE: `orElseThrow(null)`","body":"There&#39;s a third way to get an NPE: <code>orElseThrow(null)</code>"},{"owner":{"account_id":16126285,"reputation":159,"user_id":11640962,"display_name":""},"score":0,"creation_date":1649727405,"post_id":71835972,"comment_id":126944232,"body_markdown":"Beyond simply getting the npe, I want to send a message to the npe. (The process of printing this is prepared.)\n\nIn the end I have no choice but to use orElseThrow(() -&gt;  new NullPointerException(&quot;message&quot;)) to achieve what I want?","body":"Beyond simply getting the npe, I want to send a message to the npe. (The process of printing this is prepared.)  In the end I have no choice but to use orElseThrow(() -&gt;  new NullPointerException(&quot;message&quot;)) to achieve what I want?"},{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":0,"creation_date":1649727908,"post_id":71835972,"comment_id":126944307,"body_markdown":"Yes, if you want to customize the exception, you should use `orElseThrow`.","body":"Yes, if you want to customize the exception, you should use <code>orElseThrow</code>."},{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":1,"creation_date":1649728293,"post_id":71835972,"comment_id":126944358,"body_markdown":"That is if you&#39;re doing something else in the Optional chain. Calling it immediately after initializing the Optional would be weird.","body":"That is if you&#39;re doing something else in the Optional chain. Calling it immediately after initializing the Optional would be weird."}],"answers":[{"tags":[],"owner":{"account_id":2645973,"reputation":65777,"user_id":2288659,"accept_rate":90,"display_name":"Silvio Mayolo"},"down_vote_count":0,"up_vote_count":11,"is_accepted":true,"score":11,"last_activity_date":1649727988,"creation_date":1649727988,"answer_id":71836096,"question_id":71835972,"body_markdown":"&gt; to sum it up, In the end, if you add orElseThrow(nullPoint) Are of or ofNullable the same result?\r\n\r\nNo. To see this, simply look at the types.\r\n\r\n&gt;     public static &lt;T&gt; Optional&lt;T&gt; of(T value);\r\n&gt;\r\n&gt;     public &lt;X extends Throwable&gt; T orElseThrow(Supplier&lt;? extends X&gt; exceptionSupplier)\r\n&gt;                                    throws X extends Throwable;\r\n\r\n`Optional.of` returns an `Optional&lt;T&gt;`, where `orElseThrow` is going to leave you with a `T`. So `Optional.ofNullable(x).orElseThrow(...)` is really just a very roundabout\r\n\r\n    if (x == null) {\r\n      throw new NullPointerException(...);\r\n    }\r\n\r\nYou&#39;re not actually *doing* anything with the `Optional`, just making one and discarding it in a really verbose way. So if that&#39;s your intent, just do an explicit `null` check; there&#39;s no need at all for `Optional`.\r\n\r\nWhich raises the question of why we would use `of` or `ofNullable`. With the introduction of `Optional`, there are now two ways to represent the concept of &quot;this value might not exist&quot; in Java: `null` and `Optional.empty()`. People on the Internet will argue till the end of time about which is better and when you should use which one (I have strong opinions on this which I&#39;ll refrain from sharing here, since it&#39;s not what you asked), but the point is that there are two different ways to do it.\r\n\r\nFor the rest of this post, I&#39;ll borrow a bit of notation from Kotlin and write `T?` to mean &quot;a `T` value which might be `null`&quot;. It&#39;s not valid Java notation, but it gets the point across. So if we want to represent &quot;A `T` which may or may not exist&quot; in Java, we can use either `Optional&lt;T&gt;` or `T?`.\r\n\r\nIf we want to go from `T?` to `Optional&lt;T&gt;`, that&#39;s what `Optional.ofNullable` is for. It says &quot;If the thing is `null`, give me `Optional.empty()`; otherwise give me the thing in an `Optional`&quot;. To go the other way, we can use `Optional.orElse(null)`, which says &quot;If I have a `T`, give it to me, otherwise show me `null`&quot;. So now we have a way to convert between the two approaches. So what&#39;s `Optional.of` for?\r\n\r\nYou should view `Optional.of` as an assertion of sorts. If Java had nullable types like Kotlin, then the difference would be something like\r\n\r\n    public static &lt;T&gt; Optional&lt;T&gt; of(T value);\r\n    public static &lt;T&gt; Optional&lt;T&gt; ofNullable(T? value);\r\n\r\nThat is, `ofNullable` expects that its value might be `null`. `of` is already assuming that it&#39;s not. `Optional.of` should be thought of an assertion that the value you&#39;re giving it is not null. If that assertion fails, we throw `NullPointerException` immediately rather than letting errors propagate to other parts of the program. If you&#39;re calling `Optional.of` and recovering from the `NullPointerException` it throws&lt;sup&gt;[1]&lt;/sup&gt;, then you are doing something *very wrong*. That function is an assertion we were dealing with non-null data to begin with, and if that assertion fails then your program should fail immediately with a good stack trace.\r\n\r\nIt sounds like, based on your use case, you have a value that might be `null`. In that case, `Optional.ofNullable` makes sense; it&#39;s prepared to handle the use case. If you want to throw a custom exception, you should do a null check beforehand (since *you&#39;re* the one handling the `null`, not `Optional`) and then call `Optional.of`. Or, of course, you can just do an old-fashioned `null` check and not use `Optional` at all, if you&#39;re planning to extract it anyway with `orElseThrow`. Certainly, the pipeline `Optional.ofNullable(value).orElseThrow(...)` in one line would be a code smell.\r\n\r\n---\r\n\r\n&lt;sup&gt;[1]&lt;/sup&gt; Note that I say &quot;recovering from&quot;, not &quot;catching&quot;. A nice top-level `catch (Exception exc)` which logs all errors is perfectly acceptable and generally a good idea in larger applications. But if you&#39;re doing `catch (NullPointerException exc) { return 0; }` or something like that then you need to reconsider which `Optional` method you should be using.","title":"What is the difference between Optional.ofNullable() and `Optional.of()","body":"<blockquote>\n<p>to sum it up, In the end, if you add orElseThrow(nullPoint) Are of or ofNullable the same result?</p>\n</blockquote>\n<p>No. To see this, simply look at the types.</p>\n<blockquote>\n<pre><code>public static &lt;T&gt; Optional&lt;T&gt; of(T value);\n\npublic &lt;X extends Throwable&gt; T orElseThrow(Supplier&lt;? extends X&gt; exceptionSupplier)\n                               throws X extends Throwable;\n</code></pre>\n</blockquote>\n<p><code>Optional.of</code> returns an <code>Optional&lt;T&gt;</code>, where <code>orElseThrow</code> is going to leave you with a <code>T</code>. So <code>Optional.ofNullable(x).orElseThrow(...)</code> is really just a very roundabout</p>\n<pre><code>if (x == null) {\n  throw new NullPointerException(...);\n}\n</code></pre>\n<p>You're not actually <em>doing</em> anything with the <code>Optional</code>, just making one and discarding it in a really verbose way. So if that's your intent, just do an explicit <code>null</code> check; there's no need at all for <code>Optional</code>.</p>\n<p>Which raises the question of why we would use <code>of</code> or <code>ofNullable</code>. With the introduction of <code>Optional</code>, there are now two ways to represent the concept of &quot;this value might not exist&quot; in Java: <code>null</code> and <code>Optional.empty()</code>. People on the Internet will argue till the end of time about which is better and when you should use which one (I have strong opinions on this which I'll refrain from sharing here, since it's not what you asked), but the point is that there are two different ways to do it.</p>\n<p>For the rest of this post, I'll borrow a bit of notation from Kotlin and write <code>T?</code> to mean &quot;a <code>T</code> value which might be <code>null</code>&quot;. It's not valid Java notation, but it gets the point across. So if we want to represent &quot;A <code>T</code> which may or may not exist&quot; in Java, we can use either <code>Optional&lt;T&gt;</code> or <code>T?</code>.</p>\n<p>If we want to go from <code>T?</code> to <code>Optional&lt;T&gt;</code>, that's what <code>Optional.ofNullable</code> is for. It says &quot;If the thing is <code>null</code>, give me <code>Optional.empty()</code>; otherwise give me the thing in an <code>Optional</code>&quot;. To go the other way, we can use <code>Optional.orElse(null)</code>, which says &quot;If I have a <code>T</code>, give it to me, otherwise show me <code>null</code>&quot;. So now we have a way to convert between the two approaches. So what's <code>Optional.of</code> for?</p>\n<p>You should view <code>Optional.of</code> as an assertion of sorts. If Java had nullable types like Kotlin, then the difference would be something like</p>\n<pre><code>public static &lt;T&gt; Optional&lt;T&gt; of(T value);\npublic static &lt;T&gt; Optional&lt;T&gt; ofNullable(T? value);\n</code></pre>\n<p>That is, <code>ofNullable</code> expects that its value might be <code>null</code>. <code>of</code> is already assuming that it's not. <code>Optional.of</code> should be thought of an assertion that the value you're giving it is not null. If that assertion fails, we throw <code>NullPointerException</code> immediately rather than letting errors propagate to other parts of the program. If you're calling <code>Optional.of</code> and recovering from the <code>NullPointerException</code> it throws<sup>[1]</sup>, then you are doing something <em>very wrong</em>. That function is an assertion we were dealing with non-null data to begin with, and if that assertion fails then your program should fail immediately with a good stack trace.</p>\n<p>It sounds like, based on your use case, you have a value that might be <code>null</code>. In that case, <code>Optional.ofNullable</code> makes sense; it's prepared to handle the use case. If you want to throw a custom exception, you should do a null check beforehand (since <em>you're</em> the one handling the <code>null</code>, not <code>Optional</code>) and then call <code>Optional.of</code>. Or, of course, you can just do an old-fashioned <code>null</code> check and not use <code>Optional</code> at all, if you're planning to extract it anyway with <code>orElseThrow</code>. Certainly, the pipeline <code>Optional.ofNullable(value).orElseThrow(...)</code> in one line would be a code smell.</p>\n<hr />\n<p><sup>[1]</sup> Note that I say &quot;recovering from&quot;, not &quot;catching&quot;. A nice top-level <code>catch (Exception exc)</code> which logs all errors is perfectly acceptable and generally a good idea in larger applications. But if you're doing <code>catch (NullPointerException exc) { return 0; }</code> or something like that then you need to reconsider which <code>Optional</code> method you should be using.</p>\n"},{"tags":[],"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1649777700,"creation_date":1649770064,"answer_id":71843575,"question_id":71835972,"body_markdown":"&gt; First of all, I know the difference between the two methods.\r\n&gt; \r\n&gt; `Optional.of` : Used to ensure that there is no `null`, if `null` is\r\n&gt; entered, nullPointExcepction\r\n&gt; \r\n&gt; `Optional.ofNullable` : may or may not be `null`. Used to respond\r\n&gt; flexibly.\r\n\r\nThere&#39;s a clear point of misunderstanding.\r\n\r\nThe purpose of `Optional.of()` is not *&quot;to ensure that there is no `null`&quot;*. It is not meant to be used as an assertion that a value that was passed into it is *non-null*. For such a validation you can use [`Objects.requireNonNull()`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Objects.html#requireNonNull(T)), it&#39;ll either throw an **NPE**, or will return you a *non-null value*.\r\n\r\nIn order to be on the same page, the first important thing you have to keep in mind is that *optionals* were introduced in the JDK for only *one particular purpose* - to serve as a ***return type***. Any other cases when *optional* is utilized as a parameter-type, or a field-type, or when optional objects are being stored in a collection isn&#39;t considered to be a good practice. As well, as creating an *optional* just in order to chain methods on it or to hide a null-check is considered to be an ***antipattern***.\r\n\r\nHere is [a couple of quotes](https://stackoverflow.com/a/34458582/17949945) from the answer by *@StuartMarks*, developer of the JDK:\r\n\r\n&gt; The **primary use** of Optional is as follows: \r\n&gt; \r\n&gt; Optional is intended to\r\n&gt; provide a limited mechanism for library **method return types** where\r\n&gt; there is a clear need to represent &quot;no result,&quot; and where using null\r\n&gt; for that is overwhelmingly likely to cause errors.\r\n\r\n&gt; A typical **code smell** is, instead of the code using method chaining to\r\n&gt; handle an Optional returned from some method, it **creates an Optional**\r\n&gt; from something that&#39;s nullable, **in order to chain methods** and **avoid\r\n&gt; conditionals**.\r\n\r\nI also suggest you to have a look at this answer to the question [*&quot;Should Optional.ofNullable() be used for null check?&quot;*](https://stackoverflow.com/a/52048770/17949945), also by *Stuart Marks*.\r\n\r\nWith all that being said, combination `Optional.of().orElseThrow()` is both wrong and pointless:\r\n* If provided data is `null` method `of()` will raise an **NPE** and `orElseThrow()` will not be executed (*i.e. its exception will get never be fired*).\r\n* You&#39;re abusing the *optional* by creating an optional object not in order to return a *nullable variable* wrapped by it, but to hide the null-check (*take a look at the quote above*). That obscures the purpose of your code. You can use `Objects.requireNonNull()` instead to throw an exception if the given value must not be `null` or `requireNonNullElse()` to provide a default value.\r\n\r\nFor the same reason, you shouldn&#39;t use `Optional.ofNullable().orElseThrow()` at the first place.\r\n\r\n&lt;h3&gt;Optional is like a Box&lt;/h3&gt;\r\n\r\nYou might think of *optional* is if it is a *parcel*. When you need to send something, you go to the post office (*i.e. **returning** from the method*), where the thing that has to be sent is being placed into a *box*. When somebody (*i.e. the **caller***) receives the *parcel*, it is being immediately unpacked. That is the whole lifecycle of the box called `Optional`.\r\n\r\nWhen, according to the logic of your application, an object required to be returned from the method should not be `null` - use `Optional.of()`. It&#39;ll either send a parcel successfully or will emphasize that there&#39;s a problem by raising a `NullPointerException`.\r\n\r\nIf the given object is *nullable* by its nature, i.e. `null` isn&#39;t an abnormal case, then use `Optional.ofNullable()`, it&#39;ll fire either a box containing the object or an empty box.\r\n\r\nAnd the **caller** (*i.e. method that invokes the method returning an optional*) is the one who has to unpack the *box* using a variety of tools that *optional* provides like `orElseThrow()`, `orElseGet()`, `ifPresent()`, etc.","title":"What is the difference between Optional.ofNullable() and `Optional.of()","body":"<blockquote>\n<p>First of all, I know the difference between the two methods.</p>\n<p><code>Optional.of</code> : Used to ensure that there is no <code>null</code>, if <code>null</code> is\nentered, nullPointExcepction</p>\n<p><code>Optional.ofNullable</code> : may or may not be <code>null</code>. Used to respond\nflexibly.</p>\n</blockquote>\n<p>There's a clear point of misunderstanding.</p>\n<p>The purpose of <code>Optional.of()</code> is not <em>&quot;to ensure that there is no <code>null</code>&quot;</em>. It is not meant to be used as an assertion that a value that was passed into it is <em>non-null</em>. For such a validation you can use <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Objects.html#requireNonNull(T)\" rel=\"nofollow noreferrer\"><code>Objects.requireNonNull()</code></a>, it'll either throw an <strong>NPE</strong>, or will return you a <em>non-null value</em>.</p>\n<p>In order to be on the same page, the first important thing you have to keep in mind is that <em>optionals</em> were introduced in the JDK for only <em>one particular purpose</em> - to serve as a <em><strong>return type</strong></em>. Any other cases when <em>optional</em> is utilized as a parameter-type, or a field-type, or when optional objects are being stored in a collection isn't considered to be a good practice. As well, as creating an <em>optional</em> just in order to chain methods on it or to hide a null-check is considered to be an <em><strong>antipattern</strong></em>.</p>\n<p>Here is <a href=\"https://stackoverflow.com/a/34458582/17949945\">a couple of quotes</a> from the answer by <em>@StuartMarks</em>, developer of the JDK:</p>\n<blockquote>\n<p>The <strong>primary use</strong> of Optional is as follows:</p>\n<p>Optional is intended to\nprovide a limited mechanism for library <strong>method return types</strong> where\nthere is a clear need to represent &quot;no result,&quot; and where using null\nfor that is overwhelmingly likely to cause errors.</p>\n</blockquote>\n<blockquote>\n<p>A typical <strong>code smell</strong> is, instead of the code using method chaining to\nhandle an Optional returned from some method, it <strong>creates an Optional</strong>\nfrom something that's nullable, <strong>in order to chain methods</strong> and <strong>avoid\nconditionals</strong>.</p>\n</blockquote>\n<p>I also suggest you to have a look at this answer to the question <a href=\"https://stackoverflow.com/a/52048770/17949945\"><em>&quot;Should Optional.ofNullable() be used for null check?&quot;</em></a>, also by <em>Stuart Marks</em>.</p>\n<p>With all that being said, combination <code>Optional.of().orElseThrow()</code> is both wrong and pointless:</p>\n<ul>\n<li>If provided data is <code>null</code> method <code>of()</code> will raise an <strong>NPE</strong> and <code>orElseThrow()</code> will not be executed (<em>i.e. its exception will get never be fired</em>).</li>\n<li>You're abusing the <em>optional</em> by creating an optional object not in order to return a <em>nullable variable</em> wrapped by it, but to hide the null-check (<em>take a look at the quote above</em>). That obscures the purpose of your code. You can use <code>Objects.requireNonNull()</code> instead to throw an exception if the given value must not be <code>null</code> or <code>requireNonNullElse()</code> to provide a default value.</li>\n</ul>\n<p>For the same reason, you shouldn't use <code>Optional.ofNullable().orElseThrow()</code> at the first place.</p>\n<h3>Optional is like a Box</h3>\n<p>You might think of <em>optional</em> is if it is a <em>parcel</em>. When you need to send something, you go to the post office (<em>i.e. <strong>returning</strong> from the method</em>), where the thing that has to be sent is being placed into a <em>box</em>. When somebody (<em>i.e. the <strong>caller</strong></em>) receives the <em>parcel</em>, it is being immediately unpacked. That is the whole lifecycle of the box called <code>Optional</code>.</p>\n<p>When, according to the logic of your application, an object required to be returned from the method should not be <code>null</code> - use <code>Optional.of()</code>. It'll either send a parcel successfully or will emphasize that there's a problem by raising a <code>NullPointerException</code>.</p>\n<p>If the given object is <em>nullable</em> by its nature, i.e. <code>null</code> isn't an abnormal case, then use <code>Optional.ofNullable()</code>, it'll fire either a box containing the object or an empty box.</p>\n<p>And the <strong>caller</strong> (<em>i.e. method that invokes the method returning an optional</em>) is the one who has to unpack the <em>box</em> using a variety of tools that <em>optional</em> provides like <code>orElseThrow()</code>, <code>orElseGet()</code>, <code>ifPresent()</code>, etc.</p>\n"}],"owner":{"account_id":16126285,"reputation":159,"user_id":11640962,"display_name":""},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8450,"favorite_count":0,"down_vote_count":1,"up_vote_count":4,"accepted_answer_id":71836096,"answer_count":2,"score":3,"last_activity_date":1649777700,"creation_date":1649726621,"question_id":71835972,"body_markdown":"First of all, I know the difference between the two methods.\r\n\r\n* `Optional.of` : Used to ensure that there is no null, if null is entered, nullPointExcepction\r\n\r\n\r\n* `Optional.ofNullable` : may or may not be null. Used to respond flexibly.\r\n\r\n\r\nSo, if I add `orElseThrow(() -&gt; new NullPointerException(&quot;null data&quot;))` to this, will it end up being the same?\r\n\r\nI want to throw an error with explicit content.\r\n\r\nSo I get `Optional.ofNullable(data).orElseThrow(() -&gt; new NullPointerException(&quot;null data&quot;)))`\r\n\r\nuse it as Is this pointless behaviour?\r\n\r\n`Optional.of(data).orElseThrow(() -&gt; new NullPointerException(&quot;null data&quot;)))`\r\n\r\nI think this is also possible, but I&#39;m just using `ofNullable()` to make the code look consistent.\r\n\r\nto sum it up,\r\nIn the end, if you add `orElseThrow(nullPoint)`\r\nAre `of` or `ofNullable` the same result?\r\n\r\nthen rather\r\nIs `of.orElseThrow` better?","title":"What is the difference between Optional.ofNullable() and `Optional.of()","body":"<p>First of all, I know the difference between the two methods.</p>\n<ul>\n<li><p><code>Optional.of</code> : Used to ensure that there is no null, if null is entered, nullPointExcepction</p>\n</li>\n<li><p><code>Optional.ofNullable</code> : may or may not be null. Used to respond flexibly.</p>\n</li>\n</ul>\n<p>So, if I add <code>orElseThrow(() -&gt; new NullPointerException(&quot;null data&quot;))</code> to this, will it end up being the same?</p>\n<p>I want to throw an error with explicit content.</p>\n<p>So I get <code>Optional.ofNullable(data).orElseThrow(() -&gt; new NullPointerException(&quot;null data&quot;)))</code></p>\n<p>use it as Is this pointless behaviour?</p>\n<p><code>Optional.of(data).orElseThrow(() -&gt; new NullPointerException(&quot;null data&quot;)))</code></p>\n<p>I think this is also possible, but I'm just using <code>ofNullable()</code> to make the code look consistent.</p>\n<p>to sum it up,\nIn the end, if you add <code>orElseThrow(nullPoint)</code>\nAre <code>of</code> or <code>ofNullable</code> the same result?</p>\n<p>then rather\nIs <code>of.orElseThrow</code> better?</p>\n"},{"tags":["java","access-violation"],"comments":[{"owner":{"account_id":1890931,"reputation":357,"user_id":1709032,"accept_rate":100,"display_name":"dodancs"},"score":0,"creation_date":1621664822,"post_id":65626669,"comment_id":119568520,"body_markdown":"I have the same issue, but using ServerBoard S5520HC","body":"I have the same issue, but using ServerBoard S5520HC"},{"owner":{"account_id":6259815,"reputation":323,"user_id":4867302,"display_name":"Cl&#233;ment Moulin - SimpleRezo"},"score":0,"creation_date":1649777280,"post_id":65626669,"comment_id":126959412,"body_markdown":"@dodancs, you should have a look to my answer :)","body":"@dodancs, you should have a look to my answer :)"},{"owner":{"account_id":124969,"reputation":1316,"user_id":320437,"display_name":"pabouk - Ukraine stay strong"},"score":0,"creation_date":1682095975,"post_id":65626669,"comment_id":134167215,"body_markdown":"I have the same issue with Check Point firewall appliances. Windows Server 2019, Adoptium `JRE version: OpenJDK Runtime Environment (8.0_362-b09)` `Java VM: OpenJDK 64-Bit Server VM (25.362-b09 mixed mode windows-amd64 compressed oops)`","body":"I have the same issue with Check Point firewall appliances. Windows Server 2019, Adoptium <code>JRE version: OpenJDK Runtime Environment (8.0_362-b09)</code> <code>Java VM: OpenJDK 64-Bit Server VM (25.362-b09 mixed mode windows-amd64 compressed oops)</code>"}],"answers":[{"tags":[],"owner":{"account_id":6259815,"reputation":323,"user_id":4867302,"display_name":"Cl&#233;ment Moulin - SimpleRezo"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1649777204,"creation_date":1649777204,"answer_id":71845347,"question_id":65626669,"body_markdown":"We had this issue several times and I have finally figured out that this is related to Java 64 bits on Windows 10+.\r\n\r\nWe have been finally able to connect virtual media using [Java 32 bits][1] !\r\n\r\n\r\n\r\n\r\n  [1]: https://developers.redhat.com/content-gateway/file/java-1.8.0-openjdk-jre-1.8.0.322-2.b06.dev.redhat.windows.x86.zip","title":"Access Violation - javacdromwrapper.dll","body":"<p>We had this issue several times and I have finally figured out that this is related to Java 64 bits on Windows 10+.</p>\n<p>We have been finally able to connect virtual media using <a href=\"https://developers.redhat.com/content-gateway/file/java-1.8.0-openjdk-jre-1.8.0.322-2.b06.dev.redhat.windows.x86.zip\" rel=\"nofollow noreferrer\">Java 32 bits</a> !</p>\n"}],"owner":{"account_id":16824221,"reputation":53,"user_id":12163893,"display_name":"Jordan"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":779,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1649777204,"creation_date":1610099177,"question_id":65626669,"body_markdown":"I&#39;m currently trying to redirect an ISO over JViewer IPMI (v1) on a server with an Intel motherboard: ***DBS1200SPL***\r\n\r\nJViewer, which is essentially KVM Remote Console Utility running on v1.34 that uses javaws.exe (.jnlp) extension, works absolutely fine until I try to do any device redirects (ISO, CDROM, USB Key, Floppy) and will instantly crash and generate a hs_err log. The log can be found here: https://hastebin.com/vujuyucozo.yaml\r\n\r\nThe only information that I can salvage, from a POV of barely any experience in debugging Java is the following:\r\n\r\n    EXCEPTION_ACCESS_VIOLATION (0xc0000005) at pc=0x000000001000122f, pid=11332, tid=0x0000000000003b4c\r\n\r\nAnd\r\n\r\n    # C  [javacdromwrapper.dll+0x122f]\r\n\r\nGoogling around for the javacdromwrapper.dll doesn&#39;t return much information at all. Most of the information you can find is related to the EXCEPTION_ACCESS_VIOLATION which suggests to do various things. Below is the things I have tried:\r\n\r\n&gt; 1. Tried JRE versions 5 &gt; 8 on 3 different machines. 2 newly installed Desktops and 1 seperate server. Same result on each of them.\r\n&gt; 2. Disabled UAC in Windows\r\n&gt; 3. Running javaws.exe as an Administrator in the compatibility tab in properties\r\n&gt; 4. Run javaws.exe with the arguments in the log file + -Xmx arguments for RAM increase in-case it was a resource issue on CMD run as admin\r\n&gt; 5. Increased the paging size in Configure Java\r\n&gt; 6. Checked the javaws.policy file inside &quot;**C:\\Program Files\\Java\\jre_\\lib\\security\\javaws.policy**&quot; to ensure **permission java.security.AllPermission;** is set\r\n&gt; 7. Used JDK binaries instead versions 5 &gt; 8 with the same problem on this side.\r\n\r\nI should also add that I&#39;m using IPMI on a bare metal server through OVH control panel. I&#39;ve tried to contact their support who just redirected me to online forums with fixes that have no relation to this issue, hence why I have come here for some extra hands. I have requested for them to update the BMC firmware if they can.\r\n\r\nNone of this as worked and now I&#39;ve hit a dead end and a mental block. Appreciate any help, if any.","title":"Access Violation - javacdromwrapper.dll","body":"<p>I'm currently trying to redirect an ISO over JViewer IPMI (v1) on a server with an Intel motherboard: <em><strong>DBS1200SPL</strong></em></p>\n<p>JViewer, which is essentially KVM Remote Console Utility running on v1.34 that uses javaws.exe (.jnlp) extension, works absolutely fine until I try to do any device redirects (ISO, CDROM, USB Key, Floppy) and will instantly crash and generate a hs_err log. The log can be found here: <a href=\"https://hastebin.com/vujuyucozo.yaml\" rel=\"nofollow noreferrer\">https://hastebin.com/vujuyucozo.yaml</a></p>\n<p>The only information that I can salvage, from a POV of barely any experience in debugging Java is the following:</p>\n<pre><code>EXCEPTION_ACCESS_VIOLATION (0xc0000005) at pc=0x000000001000122f, pid=11332, tid=0x0000000000003b4c\n</code></pre>\n<p>And</p>\n<pre><code># C  [javacdromwrapper.dll+0x122f]\n</code></pre>\n<p>Googling around for the javacdromwrapper.dll doesn't return much information at all. Most of the information you can find is related to the EXCEPTION_ACCESS_VIOLATION which suggests to do various things. Below is the things I have tried:</p>\n<blockquote>\n<ol>\n<li>Tried JRE versions 5 &gt; 8 on 3 different machines. 2 newly installed Desktops and 1 seperate server. Same result on each of them.</li>\n<li>Disabled UAC in Windows</li>\n<li>Running javaws.exe as an Administrator in the compatibility tab in properties</li>\n<li>Run javaws.exe with the arguments in the log file + -Xmx arguments for RAM increase in-case it was a resource issue on CMD run as admin</li>\n<li>Increased the paging size in Configure Java</li>\n<li>Checked the javaws.policy file inside &quot;<strong>C:\\Program Files\\Java\\jre_\\lib\\security\\javaws.policy</strong>&quot; to ensure <strong>permission java.security.AllPermission;</strong> is set</li>\n<li>Used JDK binaries instead versions 5 &gt; 8 with the same problem on this side.</li>\n</ol>\n</blockquote>\n<p>I should also add that I'm using IPMI on a bare metal server through OVH control panel. I've tried to contact their support who just redirected me to online forums with fixes that have no relation to this issue, hence why I have come here for some extra hands. I have requested for them to update the BMC firmware if they can.</p>\n<p>None of this as worked and now I've hit a dead end and a mental block. Appreciate any help, if any.</p>\n"},{"tags":["java","apache-camel"],"comments":[{"owner":{"account_id":2411568,"reputation":15860,"user_id":2106516,"accept_rate":91,"display_name":"tmarwen"},"score":0,"creation_date":1649671174,"post_id":71803704,"comment_id":126926706,"body_markdown":"Are your using `camel-spring-boot`? How are you starting your application?","body":"Are your using <code>camel-spring-boot</code>? How are you starting your application?"},{"owner":{"account_id":24256934,"reputation":47,"user_id":18207142,"display_name":"Cris Manrique"},"score":0,"creation_date":1649696485,"post_id":71803704,"comment_id":126936429,"body_markdown":"Yes, using camel spring boot starter to start it","body":"Yes, using camel spring boot starter to start it"}],"answers":[{"tags":[],"owner":{"account_id":2269593,"reputation":43907,"user_id":1997376,"accept_rate":100,"display_name":"Nicolas Filotto"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1649776942,"creation_date":1649776942,"answer_id":71845281,"question_id":71803704,"body_markdown":"The processor is not called simply because your route is not properly declared such that Spring Boot is not aware of it.\r\n\r\nThe proper way is to make your class extend [RouteBuilder][1] to define your route(s) and annotate your class with [`@Component`][2] to mark it as candidate for auto-detection when using annotation-based configuration and classpath scanning.\r\n\r\nYour code should rather be something like this:\r\n\r\n```\r\n@Component\r\npublic class CsvRouteBuilder extends RouteBuilder {\r\n\r\n    @Override\r\n    public void configure() throws Exception {\r\n        from(&quot;{{input.files.csv}}&quot;)\r\n            .routeId(&quot;CSVConverter&quot;)\r\n            .process(new Processor() {\r\n                @Override\r\n                public void process(Exchange exchange) throws Exception {\r\n                    System.out.println(&quot;hitting&quot;);\r\n                }\r\n            })\r\n            .to(&quot;{{output.files.csv}}&quot;);\r\n    }\r\n}\r\n```\r\n\r\n  [1]: https://www.javadoc.io/doc/org.apache.camel/camel-core-model/latest/org/apache/camel/builder/RouteBuilder.html\r\n  [2]: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/stereotype/Component.html","title":"Apache camel process(processor) method is not being called","body":"<p>The processor is not called simply because your route is not properly declared such that Spring Boot is not aware of it.</p>\n<p>The proper way is to make your class extend <a href=\"https://www.javadoc.io/doc/org.apache.camel/camel-core-model/latest/org/apache/camel/builder/RouteBuilder.html\" rel=\"nofollow noreferrer\">RouteBuilder</a> to define your route(s) and annotate your class with <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/stereotype/Component.html\" rel=\"nofollow noreferrer\"><code>@Component</code></a> to mark it as candidate for auto-detection when using annotation-based configuration and classpath scanning.</p>\n<p>Your code should rather be something like this:</p>\n<pre><code>@Component\npublic class CsvRouteBuilder extends RouteBuilder {\n\n    @Override\n    public void configure() throws Exception {\n        from(&quot;{{input.files.csv}}&quot;)\n            .routeId(&quot;CSVConverter&quot;)\n            .process(new Processor() {\n                @Override\n                public void process(Exchange exchange) throws Exception {\n                    System.out.println(&quot;hitting&quot;);\n                }\n            })\n            .to(&quot;{{output.files.csv}}&quot;);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":24256934,"reputation":47,"user_id":18207142,"display_name":"Cris Manrique"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":735,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":71845281,"answer_count":1,"score":1,"last_activity_date":1649776942,"creation_date":1649456785,"question_id":71803704,"body_markdown":"I saw in another post how manually adding the camel context and starting it should work, but it hasn&#39;t for me. I double checked the from, and to paths and they seem to be correct. Not sure why it&#39;s not calling the method and would appreciate some advice\r\n\r\n```\r\npublic class CsvRouteBuilder extends DdsRouteBuilder {\r\n  private CsvConverterProcessor csvConverterProcessor;\r\n  private CamelContext camelContext;\r\n  @Autowired\r\n  public CsvRouteBuilder(CsvConverterProcessor csvConverterProcessor) throws Exception {\r\n    this.csvConverterProcessor = csvConverterProcessor;\r\n    camelContext.addRoutes(new RouteBuilder() {\r\n      @Override\r\n      public void configure() throws Exception {\r\n        from(&quot;{{input.files.csv}}&quot;)\r\n            .routeId(&quot;CSVConverter&quot;)\r\n            .process(new Processor() {\r\n              @Override\r\n              public void process(Exchange exchange) throws Exception {\r\n                System.out.println(&quot;hitting&quot;);\r\n              }\r\n            })\r\n            .to(&quot;{{output.files.csv}}&quot;);\r\n      }\r\n    });\r\n    camelContext.start();\r\n\r\n  }\r\n```","title":"Apache camel process(processor) method is not being called","body":"<p>I saw in another post how manually adding the camel context and starting it should work, but it hasn't for me. I double checked the from, and to paths and they seem to be correct. Not sure why it's not calling the method and would appreciate some advice</p>\n<pre><code>public class CsvRouteBuilder extends DdsRouteBuilder {\n  private CsvConverterProcessor csvConverterProcessor;\n  private CamelContext camelContext;\n  @Autowired\n  public CsvRouteBuilder(CsvConverterProcessor csvConverterProcessor) throws Exception {\n    this.csvConverterProcessor = csvConverterProcessor;\n    camelContext.addRoutes(new RouteBuilder() {\n      @Override\n      public void configure() throws Exception {\n        from(&quot;{{input.files.csv}}&quot;)\n            .routeId(&quot;CSVConverter&quot;)\n            .process(new Processor() {\n              @Override\n              public void process(Exchange exchange) throws Exception {\n                System.out.println(&quot;hitting&quot;);\n              }\n            })\n            .to(&quot;{{output.files.csv}}&quot;);\n      }\n    });\n    camelContext.start();\n\n  }\n</code></pre>\n"},{"tags":["java","spring-boot","scheduler","dst","timezone-offset"],"comments":[{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":1,"creation_date":1646770250,"post_id":71398178,"comment_id":126205096,"body_markdown":"Why the tags for Spring Boot and Quartz scheduler?","body":"Why the tags for Spring Boot and Quartz scheduler?"}],"answers":[{"tags":[],"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"down_vote_count":0,"up_vote_count":8,"is_accepted":true,"score":8,"last_activity_date":1646791197,"creation_date":1646772675,"answer_id":71401277,"question_id":71398178,"body_markdown":"# tl;dr\r\n\r\nUse only *java.time* classes, never `Date`/`Calendar`. \r\n\r\nDays vary in length, not always 24 hours long. So, running at a certain time-of-day means determining a particular moment for each and every day.\r\n\r\n```java\r\npublic void scheduleNextRun ( LocalDate today )\r\n{\r\n    LocalDate dateOfNextRun = today;\r\n    if ( LocalTime.now( this.zoneId ).isAfter( this.timeToExecute ) )\r\n    {\r\n        dateOfNextRun = dateOfNextRun.plusDays( 1 );\r\n    }\r\n    ZonedDateTime zdt = ZonedDateTime.of( dateOfNextRun , this.timeToExecute , this.zoneId );  // Determine a moment, a point on the timeline.\r\n    Instant instantOfNextTaskExecution = zdt.toInstant(); // Adjust from time zone to offset of zero hours-minutes-seconds from UTC.\r\n    Duration d = Duration.between( Instant.now() , instantOfNextTaskExecution );\r\n    this.ses.schedule( this , d.toNanos() , TimeUnit.NANOSECONDS );\r\n    System.out.println( &quot;DEBUG - Will run this task after duration of &quot; + d + &quot; at &quot; + zdt );\r\n}\r\n```\r\n\r\n# Outmoded classes\r\n\r\nYou are using terrible date-time classes that were years ago supplanted by the modern *java.time* classes defined in JSR 310.\r\n\r\nAnd you are using the [`Timer`][1] class that was supplanted years ago by the Executors framework, as noted in the Javadoc.\r\n\r\n# Modern Java\r\n\r\n## Scheduled executor service\r\n\r\nSomewhere in your app, initialize a scheduled executor service.\r\n\r\n    ScheduledExecutorService see = Executors.newSingleThreadScheduledExecutor() ;\r\n\r\nKeep that scheduled executor service around. Be sure to shut it down before your app exits as otherwise its backing pool of threads may continue running like a zombie &#129503;.\r\n\r\n## `Runnable` task\r\n\r\nDefine your task as a `Runnable` or `Callable`. \r\n\r\n\r\n## Days vary in length \r\n\r\nYou want your task to run once per day at a designated time-of-day as seen in a particular time zone.\r\n\r\n    public class DailyTask implements Runnable {  } \r\n\r\nThat does *not* mean every 24 hours. On some dates in some zones, days vary in length. They may be 23 hours, 25 hours, or 23.5 or some other number of hours long. \r\n\r\n## Task re-schedules itself\r\n\r\nTo determine when to run the task next, the task itself should make that calculation. The task will then re-schedule itself for its next execution. To do this, our task must keep a reference to the scheduled executor service on which it is executing. And our task must track the time of day at which you want to run. And the task must track the time zone in which we are to perceive this time-of-day. So we need to pass this info to the constructor of our task, and remember the values as private members.\r\n\r\n```java\r\n\r\nprivate final ScheduledExecutorService ses;\r\nprivate final LocalTime timeToExecute;\r\nprivate final ZoneId zoneId;\r\n\r\npublic DailyTask ( final ScheduledExecutorService ses , final LocalTime timeToExecute , final ZoneId zoneId )\r\n{\r\n    this.ses = ses;\r\n    this.timeToExecute = timeToExecute;\r\n    this.zoneId = zoneId;\r\n}\r\n\r\n```\r\n\r\nTo simulate work, in this example we simply print to console. We do this in the `run` method promised by the `Runnable` interface.\r\n\r\n```java\r\n@Override\r\npublic void run ( )\r\n{\r\n    // Perform the tasks work.\r\n    System.out.println( Thread.currentThread().getId() + &quot; is running at &quot; + Instant.now() );\r\n}\r\n```\r\n\r\n### Calculating next run\r\n\r\nTo that `run` method we must add the calculation of the next run. First we capture the current date just in case the clock were to run over to the next date while performing our tasks workload.\r\n\r\n    LocalDate today = LocalDate.now( this.zoneId );\r\n\r\nNext we calculate the amount of time until the next run.\r\n\r\n```java\r\nLocalDate tomorrow = today.plusDays( 1  );\r\nZonedDateTime zdt = ZonedDateTime.of( tomorrow, this.timeToExecute , this.zoneId );  // Determine a moment, a point on the timeline.\r\nInstant instantOfNextTaskExecution = zdt.toInstant(); // Adjust from time zone to offset of zero hours-minutes-seconds from UTC.\r\nDuration d = Duration.between( Instant.now() , instantOfNextTaskExecution );\r\n```\r\n\r\n### Scheduling task to run on executor service\r\n\r\nLastly we schedule that work.\r\n\r\n    this.ses.schedule( this , d.toNanos() , TimeUnit.NANOSECONDS );\r\n\r\nTo get this task running the very first time, the calling app will need to schedule this task this first time. Rather than make the calling app do the duration calculation, let&#39;s make the duration calculation code seen here available as a method.\r\n\r\n```java\r\npublic void scheduleNextRun( LocalDate today ) {\r\n    LocalDate tomorrow = today.plusDays( 1 );\r\n    ZonedDateTime zdt = ZonedDateTime.of( tomorrow , this.timeToExecute , this.zoneId );  // Determine a moment, a point on the timeline.\r\n    Instant instantOfNextTaskExecution = zdt.toInstant(); // Adjust from time zone to offset of zero hours-minutes-seconds from UTC.\r\n    Duration d = Duration.between( Instant.now() , instantOfNextTaskExecution );\r\n    this.ses.schedule( this , d.toNanos() , TimeUnit.NANOSECONDS );\r\n    System.out.println( &quot;DEBUG - Will run this task after duration of &quot; + d + &quot; at &quot; + zdt );\r\n}\r\n```\r\n\r\nWe have a subtle bug in that method. We should not assume the next run is for tomorrow. If, on the very first run, the current moment is not yet past the target time-of-day then we should *not* add a day to the current date. We should only call `.plusDays( 1 )` if the time-of-day has passed for the current date.\r\n\r\n\r\n```java\r\npublic void scheduleNextRun ( LocalDate today )\r\n{\r\n    LocalDate dateOfNextRun = today;\r\n    if ( LocalTime.now( this.zoneId ).isAfter( this.timeToExecute ) )\r\n    {\r\n        dateOfNextRun = dateOfNextRun.plusDays( 1 );\r\n    }\r\n    ZonedDateTime zdt = ZonedDateTime.of( dateOfNextRun , this.timeToExecute , this.zoneId );  // Determine a moment, a point on the timeline.\r\n    Instant instantOfNextTaskExecution = zdt.toInstant(); // Adjust from time zone to offset of zero hours-minutes-seconds from UTC.\r\n    Duration d = Duration.between( Instant.now() , instantOfNextTaskExecution );\r\n    this.ses.schedule( this , d.toNanos() , TimeUnit.NANOSECONDS );\r\n    System.out.println( &quot;DEBUG - Will run this task after duration of &quot; + d + &quot; at &quot; + zdt );\r\n}\r\n```\r\n\r\n\r\n## Final code\r\n\r\nPutting all that code together looks like this.\r\n\r\n```java\r\npackage work.basil.timing;\r\n\r\nimport java.time.*;\r\nimport java.util.concurrent.ScheduledExecutorService;\r\nimport java.util.concurrent.TimeUnit;\r\n\r\npublic class DailyTask implements Runnable\r\n{\r\n    private final ScheduledExecutorService ses;\r\n    private final LocalTime timeToExecute;\r\n    private final ZoneId zoneId;\r\n\r\n    public DailyTask ( final ScheduledExecutorService ses , final LocalTime timeToExecute , final ZoneId zoneId )\r\n    {\r\n        this.ses = ses;\r\n        this.timeToExecute = timeToExecute;\r\n        System.out.println( &quot;timeToExecute = &quot; + timeToExecute );\r\n        this.zoneId = zoneId;\r\n    }\r\n\r\n    @Override\r\n    public void run ( )\r\n    {\r\n        // Capture the current moment as seen your desired time zone.\r\n        // Do this *before* your tasks work, in case during that task work the clock runs over to the next day.\r\n        // Tip: Avoid scheduling tasks for midnight, the witching hour.\r\n        LocalDate today = LocalDate.now( this.zoneId );\r\n        // Perform the tasks work.\r\n        System.out.println( &quot;Thread ID: &quot; + Thread.currentThread().getId() + &quot; is running at &quot; + Instant.now() );\r\n        // Schedule the next task.\r\n        this.scheduleNextRun( today );\r\n    }\r\n\r\n    public void scheduleNextRun ( LocalDate today )\r\n    {\r\n        LocalDate dateOfNextRun = today;\r\n        if ( LocalTime.now( this.zoneId ).isAfter( this.timeToExecute ) )\r\n        {\r\n            dateOfNextRun = dateOfNextRun.plusDays( 1 );\r\n        }\r\n        ZonedDateTime zdt = ZonedDateTime.of( dateOfNextRun , this.timeToExecute , this.zoneId );  // Determine a moment, a point on the timeline.\r\n        Instant instantOfNextTaskExecution = zdt.toInstant(); // Adjust from time zone to offset of zero hours-minutes-seconds from UTC.\r\n        Duration d = Duration.between( Instant.now() , instantOfNextTaskExecution );\r\n        this.ses.schedule( this , d.toNanos() , TimeUnit.NANOSECONDS );\r\n        System.out.println( &quot;DEBUG - Will run this task after duration of &quot; + d + &quot; at &quot; + zdt );\r\n    }\r\n}\r\n```\r\n\r\n## Demo app\r\n\r\nWrite a little demo app to use it.\r\n\r\nTo make this demo work without us having to wait an entire day, let&#39;s calculate a minute from the current moment as our desired time-of-day. Then we need only wait a minute to see this code work.\r\n\r\nActually, we will wait *two* minutes, enough time to ensure our principal code has completely finished before we shut down the demo apps scheduled executor service. \r\n\r\n```java\r\npackage work.basil.timing;\r\n\r\nimport java.time.*;\r\nimport java.time.temporal.ChronoUnit;\r\nimport java.util.concurrent.Executors;\r\nimport java.util.concurrent.ScheduledExecutorService;\r\nimport java.util.concurrent.TimeUnit;\r\n\r\npublic class App\r\n{\r\n    public static void main ( String[] args )\r\n    {\r\n        System.out.println( &quot;INFO - Demo start. &quot; + Instant.now() );\r\n\r\n        ScheduledExecutorService ses = Executors.newSingleThreadScheduledExecutor();\r\n        ZoneId z = ZoneId.of( &quot;Europe/Bucharest&quot; );\r\n        System.out.println( &quot;Now in &quot; + z + &quot; is &quot; + ZonedDateTime.now( z ) );\r\n        DailyTask task = new DailyTask( ses , LocalTime.now( z ).truncatedTo( ChronoUnit.SECONDS ).plusMinutes( 1 ) , z );\r\n        task.scheduleNextRun( LocalDate.now( z ) );\r\n\r\n        try { Thread.sleep( Duration.ofMinutes( 2 ).toMillis() ); } catch ( InterruptedException e ) { throw new RuntimeException( e ); }\r\n        ses.shutdownNow();\r\n        System.out.println( &quot;INFO - Waiting for scheduled executor service to shutdown now. &quot; + Instant.now() );\r\n        try { ses.awaitTermination( 5 , TimeUnit.SECONDS ); } catch ( InterruptedException e ) { throw new RuntimeException( e ); }\r\n        System.out.println( &quot;INFO - Demo end. &quot; + Instant.now() );\r\n    }\r\n}\r\n```\r\n\r\nWhen run.\r\n\r\n```none\r\nINFO - Demo start. 2022-03-08T22:03:14.837676Z\r\nNow in Europe/Bucharest is 2022-03-09T00:03:14.848880+02:00[Europe/Bucharest]\r\ntimeToExecute = 00:04:14\r\nDEBUG - Will run this task after duration of PT59.142979S at 2022-03-09T00:04:14+02:00[Europe/Bucharest]\r\nThread ID: 15 is running at 2022-03-08T22:04:14.007322Z\r\nDEBUG - Will run this task after duration of PT23H59M59.979047S at 2022-03-10T00:04:14+02:00[Europe/Bucharest]\r\nINFO - Waiting for scheduled executor service to shutdown now. 2022-03-08T22:05:14.868608Z\r\nINFO - Demo end. 2022-03-08T22:05:14.871141Z\r\n```\r\n\r\n\r\n# Not so S.O.L.I.D.\r\n\r\nThe code seen above is workable. I could imagine putting that into production. However, looking at the bigger picture, that code has a design flaw.\r\n\r\nThe [SOLID principles][2] are generally recognized as a way of designing better software. The `S` stands for [Single-responsibility principle][3]. That means a class should focus on doing one main thing, and doing that one thing well. So different jobs should be handled by different classes.\r\n\r\nBut in the code seen above we are mixing two different jobs. \r\n\r\nWe have the original job, the task that needs to be performed routinely. Imagine that task is some business function such as compiling a Sales report, or calculating an accounting roll-up, or syncing inventory tallies. Such functions do not really care about *when* the run; they care about sales figures, accounting numbers, or inventory levels. \r\n\r\nDeciding when to run such a function is a different kind of job. This other job of capturing the current moment, applying time zones, calculating time to elapse, is entirely separate from sales, accounting, or inventory. \r\n\r\nEven the name of our `Runnable` class is a clue to this violation of the Single-Responsibility Principle: `DailyTask` has two parts, `Task` referring to the business function to be accomplished, and `Daily` referring to the scheduling chore. \r\n\r\nSo ideally, rather than have our task reschedule itself, we should have two different classes. One handles the original job of business work, and the other handles the scheduling of execution. \r\n\r\nImplementing this goes far beyond the original Question. So I will leave this as an exercise for the reader. ;-)\r\n\r\n\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Timer.html\r\n  [2]: https://en.wikipedia.org/wiki/SOLID\r\n  [3]: https://en.wikipedia.org/wiki/Single-responsibility_principle","title":"java.util.Timer scheduler daily goes wrong because daylight savings","body":"<h1>tl;dr</h1>\n<p>Use only <em>java.time</em> classes, never <code>Date</code>/<code>Calendar</code>.</p>\n<p>Days vary in length, not always 24 hours long. So, running at a certain time-of-day means determining a particular moment for each and every day.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public void scheduleNextRun ( LocalDate today )\n{\n    LocalDate dateOfNextRun = today;\n    if ( LocalTime.now( this.zoneId ).isAfter( this.timeToExecute ) )\n    {\n        dateOfNextRun = dateOfNextRun.plusDays( 1 );\n    }\n    ZonedDateTime zdt = ZonedDateTime.of( dateOfNextRun , this.timeToExecute , this.zoneId );  // Determine a moment, a point on the timeline.\n    Instant instantOfNextTaskExecution = zdt.toInstant(); // Adjust from time zone to offset of zero hours-minutes-seconds from UTC.\n    Duration d = Duration.between( Instant.now() , instantOfNextTaskExecution );\n    this.ses.schedule( this , d.toNanos() , TimeUnit.NANOSECONDS );\n    System.out.println( &quot;DEBUG - Will run this task after duration of &quot; + d + &quot; at &quot; + zdt );\n}\n</code></pre>\n<h1>Outmoded classes</h1>\n<p>You are using terrible date-time classes that were years ago supplanted by the modern <em>java.time</em> classes defined in JSR 310.</p>\n<p>And you are using the <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Timer.html\" rel=\"noreferrer\"><code>Timer</code></a> class that was supplanted years ago by the Executors framework, as noted in the Javadoc.</p>\n<h1>Modern Java</h1>\n<h2>Scheduled executor service</h2>\n<p>Somewhere in your app, initialize a scheduled executor service.</p>\n<pre><code>ScheduledExecutorService see = Executors.newSingleThreadScheduledExecutor() ;\n</code></pre>\n<p>Keep that scheduled executor service around. Be sure to shut it down before your app exits as otherwise its backing pool of threads may continue running like a zombie .</p>\n<h2><code>Runnable</code> task</h2>\n<p>Define your task as a <code>Runnable</code> or <code>Callable</code>.</p>\n<h2>Days vary in length</h2>\n<p>You want your task to run once per day at a designated time-of-day as seen in a particular time zone.</p>\n<pre><code>public class DailyTask implements Runnable {  } \n</code></pre>\n<p>That does <em>not</em> mean every 24 hours. On some dates in some zones, days vary in length. They may be 23 hours, 25 hours, or 23.5 or some other number of hours long.</p>\n<h2>Task re-schedules itself</h2>\n<p>To determine when to run the task next, the task itself should make that calculation. The task will then re-schedule itself for its next execution. To do this, our task must keep a reference to the scheduled executor service on which it is executing. And our task must track the time of day at which you want to run. And the task must track the time zone in which we are to perceive this time-of-day. So we need to pass this info to the constructor of our task, and remember the values as private members.</p>\n<pre class=\"lang-java prettyprint-override\"><code>\nprivate final ScheduledExecutorService ses;\nprivate final LocalTime timeToExecute;\nprivate final ZoneId zoneId;\n\npublic DailyTask ( final ScheduledExecutorService ses , final LocalTime timeToExecute , final ZoneId zoneId )\n{\n    this.ses = ses;\n    this.timeToExecute = timeToExecute;\n    this.zoneId = zoneId;\n}\n\n</code></pre>\n<p>To simulate work, in this example we simply print to console. We do this in the <code>run</code> method promised by the <code>Runnable</code> interface.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Override\npublic void run ( )\n{\n    // Perform the tasks work.\n    System.out.println( Thread.currentThread().getId() + &quot; is running at &quot; + Instant.now() );\n}\n</code></pre>\n<h3>Calculating next run</h3>\n<p>To that <code>run</code> method we must add the calculation of the next run. First we capture the current date just in case the clock were to run over to the next date while performing our tasks workload.</p>\n<pre><code>LocalDate today = LocalDate.now( this.zoneId );\n</code></pre>\n<p>Next we calculate the amount of time until the next run.</p>\n<pre class=\"lang-java prettyprint-override\"><code>LocalDate tomorrow = today.plusDays( 1  );\nZonedDateTime zdt = ZonedDateTime.of( tomorrow, this.timeToExecute , this.zoneId );  // Determine a moment, a point on the timeline.\nInstant instantOfNextTaskExecution = zdt.toInstant(); // Adjust from time zone to offset of zero hours-minutes-seconds from UTC.\nDuration d = Duration.between( Instant.now() , instantOfNextTaskExecution );\n</code></pre>\n<h3>Scheduling task to run on executor service</h3>\n<p>Lastly we schedule that work.</p>\n<pre><code>this.ses.schedule( this , d.toNanos() , TimeUnit.NANOSECONDS );\n</code></pre>\n<p>To get this task running the very first time, the calling app will need to schedule this task this first time. Rather than make the calling app do the duration calculation, let's make the duration calculation code seen here available as a method.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public void scheduleNextRun( LocalDate today ) {\n    LocalDate tomorrow = today.plusDays( 1 );\n    ZonedDateTime zdt = ZonedDateTime.of( tomorrow , this.timeToExecute , this.zoneId );  // Determine a moment, a point on the timeline.\n    Instant instantOfNextTaskExecution = zdt.toInstant(); // Adjust from time zone to offset of zero hours-minutes-seconds from UTC.\n    Duration d = Duration.between( Instant.now() , instantOfNextTaskExecution );\n    this.ses.schedule( this , d.toNanos() , TimeUnit.NANOSECONDS );\n    System.out.println( &quot;DEBUG - Will run this task after duration of &quot; + d + &quot; at &quot; + zdt );\n}\n</code></pre>\n<p>We have a subtle bug in that method. We should not assume the next run is for tomorrow. If, on the very first run, the current moment is not yet past the target time-of-day then we should <em>not</em> add a day to the current date. We should only call <code>.plusDays( 1 )</code> if the time-of-day has passed for the current date.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public void scheduleNextRun ( LocalDate today )\n{\n    LocalDate dateOfNextRun = today;\n    if ( LocalTime.now( this.zoneId ).isAfter( this.timeToExecute ) )\n    {\n        dateOfNextRun = dateOfNextRun.plusDays( 1 );\n    }\n    ZonedDateTime zdt = ZonedDateTime.of( dateOfNextRun , this.timeToExecute , this.zoneId );  // Determine a moment, a point on the timeline.\n    Instant instantOfNextTaskExecution = zdt.toInstant(); // Adjust from time zone to offset of zero hours-minutes-seconds from UTC.\n    Duration d = Duration.between( Instant.now() , instantOfNextTaskExecution );\n    this.ses.schedule( this , d.toNanos() , TimeUnit.NANOSECONDS );\n    System.out.println( &quot;DEBUG - Will run this task after duration of &quot; + d + &quot; at &quot; + zdt );\n}\n</code></pre>\n<h2>Final code</h2>\n<p>Putting all that code together looks like this.</p>\n<pre class=\"lang-java prettyprint-override\"><code>package work.basil.timing;\n\nimport java.time.*;\nimport java.util.concurrent.ScheduledExecutorService;\nimport java.util.concurrent.TimeUnit;\n\npublic class DailyTask implements Runnable\n{\n    private final ScheduledExecutorService ses;\n    private final LocalTime timeToExecute;\n    private final ZoneId zoneId;\n\n    public DailyTask ( final ScheduledExecutorService ses , final LocalTime timeToExecute , final ZoneId zoneId )\n    {\n        this.ses = ses;\n        this.timeToExecute = timeToExecute;\n        System.out.println( &quot;timeToExecute = &quot; + timeToExecute );\n        this.zoneId = zoneId;\n    }\n\n    @Override\n    public void run ( )\n    {\n        // Capture the current moment as seen your desired time zone.\n        // Do this *before* your tasks work, in case during that task work the clock runs over to the next day.\n        // Tip: Avoid scheduling tasks for midnight, the witching hour.\n        LocalDate today = LocalDate.now( this.zoneId );\n        // Perform the tasks work.\n        System.out.println( &quot;Thread ID: &quot; + Thread.currentThread().getId() + &quot; is running at &quot; + Instant.now() );\n        // Schedule the next task.\n        this.scheduleNextRun( today );\n    }\n\n    public void scheduleNextRun ( LocalDate today )\n    {\n        LocalDate dateOfNextRun = today;\n        if ( LocalTime.now( this.zoneId ).isAfter( this.timeToExecute ) )\n        {\n            dateOfNextRun = dateOfNextRun.plusDays( 1 );\n        }\n        ZonedDateTime zdt = ZonedDateTime.of( dateOfNextRun , this.timeToExecute , this.zoneId );  // Determine a moment, a point on the timeline.\n        Instant instantOfNextTaskExecution = zdt.toInstant(); // Adjust from time zone to offset of zero hours-minutes-seconds from UTC.\n        Duration d = Duration.between( Instant.now() , instantOfNextTaskExecution );\n        this.ses.schedule( this , d.toNanos() , TimeUnit.NANOSECONDS );\n        System.out.println( &quot;DEBUG - Will run this task after duration of &quot; + d + &quot; at &quot; + zdt );\n    }\n}\n</code></pre>\n<h2>Demo app</h2>\n<p>Write a little demo app to use it.</p>\n<p>To make this demo work without us having to wait an entire day, let's calculate a minute from the current moment as our desired time-of-day. Then we need only wait a minute to see this code work.</p>\n<p>Actually, we will wait <em>two</em> minutes, enough time to ensure our principal code has completely finished before we shut down the demo apps scheduled executor service.</p>\n<pre class=\"lang-java prettyprint-override\"><code>package work.basil.timing;\n\nimport java.time.*;\nimport java.time.temporal.ChronoUnit;\nimport java.util.concurrent.Executors;\nimport java.util.concurrent.ScheduledExecutorService;\nimport java.util.concurrent.TimeUnit;\n\npublic class App\n{\n    public static void main ( String[] args )\n    {\n        System.out.println( &quot;INFO - Demo start. &quot; + Instant.now() );\n\n        ScheduledExecutorService ses = Executors.newSingleThreadScheduledExecutor();\n        ZoneId z = ZoneId.of( &quot;Europe/Bucharest&quot; );\n        System.out.println( &quot;Now in &quot; + z + &quot; is &quot; + ZonedDateTime.now( z ) );\n        DailyTask task = new DailyTask( ses , LocalTime.now( z ).truncatedTo( ChronoUnit.SECONDS ).plusMinutes( 1 ) , z );\n        task.scheduleNextRun( LocalDate.now( z ) );\n\n        try { Thread.sleep( Duration.ofMinutes( 2 ).toMillis() ); } catch ( InterruptedException e ) { throw new RuntimeException( e ); }\n        ses.shutdownNow();\n        System.out.println( &quot;INFO - Waiting for scheduled executor service to shutdown now. &quot; + Instant.now() );\n        try { ses.awaitTermination( 5 , TimeUnit.SECONDS ); } catch ( InterruptedException e ) { throw new RuntimeException( e ); }\n        System.out.println( &quot;INFO - Demo end. &quot; + Instant.now() );\n    }\n}\n</code></pre>\n<p>When run.</p>\n<pre class=\"lang-none prettyprint-override\"><code>INFO - Demo start. 2022-03-08T22:03:14.837676Z\nNow in Europe/Bucharest is 2022-03-09T00:03:14.848880+02:00[Europe/Bucharest]\ntimeToExecute = 00:04:14\nDEBUG - Will run this task after duration of PT59.142979S at 2022-03-09T00:04:14+02:00[Europe/Bucharest]\nThread ID: 15 is running at 2022-03-08T22:04:14.007322Z\nDEBUG - Will run this task after duration of PT23H59M59.979047S at 2022-03-10T00:04:14+02:00[Europe/Bucharest]\nINFO - Waiting for scheduled executor service to shutdown now. 2022-03-08T22:05:14.868608Z\nINFO - Demo end. 2022-03-08T22:05:14.871141Z\n</code></pre>\n<h1>Not so S.O.L.I.D.</h1>\n<p>The code seen above is workable. I could imagine putting that into production. However, looking at the bigger picture, that code has a design flaw.</p>\n<p>The <a href=\"https://en.wikipedia.org/wiki/SOLID\" rel=\"noreferrer\">SOLID principles</a> are generally recognized as a way of designing better software. The <code>S</code> stands for <a href=\"https://en.wikipedia.org/wiki/Single-responsibility_principle\" rel=\"noreferrer\">Single-responsibility principle</a>. That means a class should focus on doing one main thing, and doing that one thing well. So different jobs should be handled by different classes.</p>\n<p>But in the code seen above we are mixing two different jobs.</p>\n<p>We have the original job, the task that needs to be performed routinely. Imagine that task is some business function such as compiling a Sales report, or calculating an accounting roll-up, or syncing inventory tallies. Such functions do not really care about <em>when</em> the run; they care about sales figures, accounting numbers, or inventory levels.</p>\n<p>Deciding when to run such a function is a different kind of job. This other job of capturing the current moment, applying time zones, calculating time to elapse, is entirely separate from sales, accounting, or inventory.</p>\n<p>Even the name of our <code>Runnable</code> class is a clue to this violation of the Single-Responsibility Principle: <code>DailyTask</code> has two parts, <code>Task</code> referring to the business function to be accomplished, and <code>Daily</code> referring to the scheduling chore.</p>\n<p>So ideally, rather than have our task reschedule itself, we should have two different classes. One handles the original job of business work, and the other handles the scheduling of execution.</p>\n<p>Implementing this goes far beyond the original Question. So I will leave this as an exercise for the reader. ;-)</p>\n"}],"owner":{"account_id":1754849,"reputation":663,"user_id":1603131,"accept_rate":43,"display_name":"Sorin Penteleiciuc"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":890,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":71401277,"answer_count":1,"score":1,"last_activity_date":1649776920,"creation_date":1646756210,"question_id":71398178,"body_markdown":"My code from below works well, the job is executed daily at the right time with exception of daylight savings hour changes. It happens at the end of october and march. My server has a lightweight hardware and it is located in zone where it is used. \r\nHow can I make it work, using minimal resources (without quartz or any similar)\r\n\r\n```\r\n// init daily scheduler \r\nfinal java.util.Timer timer = new java.util.Timer(&quot;MyTimer&quot;);\r\nfinal String[] hourMinute = time.split(&quot;:&quot;);\r\nfinal String hour = hourMinute[0];\r\nfinal String minute = hourMinute[1];\r\nString second = &quot;0&quot;;\r\nfinal Calendar calendar = Calendar.getInstance(TimeZone.getTimeZone(&quot;UTC&quot;));\r\ncalendar.set(Calendar.HOUR_OF_DAY, Integer.parseInt(hour));\r\ncalendar.set(Calendar.MINUTE, Integer.parseInt(minute));\r\ncalendar.set(Calendar.SECOND, Integer.parseInt(second));\r\nif(calendar.getTime().before(new Date())){\r\n    calendar.add(Calendar.DATE, 1);\r\n}\r\n\r\ntimer.schedule(job, calendar.getTime(), \r\nTimeUnit.MILLISECONDS.convert(1, TimeUnit.DAYS)); // period: 1 day\r\n```","title":"java.util.Timer scheduler daily goes wrong because daylight savings","body":"<p>My code from below works well, the job is executed daily at the right time with exception of daylight savings hour changes. It happens at the end of october and march. My server has a lightweight hardware and it is located in zone where it is used.\nHow can I make it work, using minimal resources (without quartz or any similar)</p>\n<pre><code>// init daily scheduler \nfinal java.util.Timer timer = new java.util.Timer(&quot;MyTimer&quot;);\nfinal String[] hourMinute = time.split(&quot;:&quot;);\nfinal String hour = hourMinute[0];\nfinal String minute = hourMinute[1];\nString second = &quot;0&quot;;\nfinal Calendar calendar = Calendar.getInstance(TimeZone.getTimeZone(&quot;UTC&quot;));\ncalendar.set(Calendar.HOUR_OF_DAY, Integer.parseInt(hour));\ncalendar.set(Calendar.MINUTE, Integer.parseInt(minute));\ncalendar.set(Calendar.SECOND, Integer.parseInt(second));\nif(calendar.getTime().before(new Date())){\n    calendar.add(Calendar.DATE, 1);\n}\n\ntimer.schedule(job, calendar.getTime(), \nTimeUnit.MILLISECONDS.convert(1, TimeUnit.DAYS)); // period: 1 day\n</code></pre>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":1137788,"reputation":8043,"user_id":1122476,"accept_rate":86,"display_name":"Shashank Kadne"},"score":0,"creation_date":1329060397,"post_id":9249919,"comment_id":11654633,"body_markdown":"What do you see in your LogCat?","body":"What do you see in your LogCat?"},{"owner":{"account_id":1243136,"reputation":1055,"user_id":1205223,"accept_rate":88,"display_name":"Karen"},"score":0,"creation_date":1329060441,"post_id":9249919,"comment_id":11654644,"body_markdown":"I dont see my logs! Log.d(&quot;autocomplete&quot;, &quot;itemselected&quot;);","body":"I dont see my logs! Log.d(&quot;autocomplete&quot;, &quot;itemselected&quot;);"},{"owner":{"account_id":1243136,"reputation":1055,"user_id":1205223,"accept_rate":88,"display_name":"Karen"},"score":0,"creation_date":1329060498,"post_id":9249919,"comment_id":11654656,"body_markdown":"I even putted a breakpoint in onItemSelected function and tried to debug","body":"I even putted a breakpoint in onItemSelected function and tried to debug"},{"owner":{"account_id":235684,"reputation":6837,"user_id":502671,"accept_rate":71,"display_name":"Etienne Lawlor"},"score":0,"creation_date":1351541422,"post_id":9249919,"comment_id":17853756,"body_markdown":"I am doing something similar HERE!!! http://stackoverflow.com/questions/12854336/autocompletetextview-backed-by-cursorloader","body":"I am doing something similar HERE!!! <a href=\"http://stackoverflow.com/questions/12854336/autocompletetextview-backed-by-cursorloader\" title=\"autocompletetextview backed by cursorloader\">stackoverflow.com/questions/12854336/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":1137788,"reputation":8043,"user_id":1122476,"accept_rate":86,"display_name":"Shashank Kadne"},"down_vote_count":0,"up_vote_count":122,"is_accepted":true,"score":122,"last_activity_date":1329062471,"creation_date":1329062471,"answer_id":9250218,"question_id":9249919,"body_markdown":"\r\nDude, you will laugh at your mistake. Its working for me. You have added `OnItemSelectedListener` and not `OnItemClickListener`.\r\n\r\nYour method will only work if you select your items or browse through the view using a trackball or up/down arrows. Use one more value in your String starting with &quot;k&quot; say Karen1. Type &quot;k&quot; and select between Karen and Karen1.You will see that it works. If you want click, then add `OnItemClickListener` and override \r\n \r\n\r\n    public void onItemClick(AdapterView&lt;?&gt; arg0, View arg1,\r\n    \t\t\t\t\t\tint arg2, long arg3)\r\n\r\n","title":"AutoCompleteTextView onItemSelectedListener does not work","body":"<p>Dude, you will laugh at your mistake. Its working for me. You have added <code>OnItemSelectedListener</code> and not <code>OnItemClickListener</code>.</p>\n\n<p>Your method will only work if you select your items or browse through the view using a trackball or up/down arrows. Use one more value in your String starting with \"k\" say Karen1. Type \"k\" and select between Karen and Karen1.You will see that it works. If you want click, then add <code>OnItemClickListener</code> and override </p>\n\n<pre><code>public void onItemClick(AdapterView&lt;?&gt; arg0, View arg1,\n                        int arg2, long arg3)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1410316,"reputation":181,"user_id":1337052,"display_name":"user1337052"},"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1334603377,"creation_date":1334603377,"answer_id":10180142,"question_id":9249919,"body_markdown":"You must use \r\n\r\n&gt; OnItemClickListener\r\n\r\ninstead of OnItemSelectedListener\r\n ","title":"AutoCompleteTextView onItemSelectedListener does not work","body":"<p>You must use </p>\n\n<blockquote>\n  <p>OnItemClickListener</p>\n</blockquote>\n\n<p>instead of OnItemSelectedListener</p>\n"},{"tags":[],"owner":{"account_id":1071634,"reputation":4510,"user_id":1070741,"display_name":"Himanshu Likhyani"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1589055022,"creation_date":1589055022,"answer_id":61703032,"question_id":9249919,"body_markdown":"Looks like, of-late, the real problem may not be in the code of the question asked, but in the source code of the `AutoCompleteTextView` class itself.\r\n\r\nAlthough the `AutoCompleteTextView` class sets it&#39;s `OnItemSelectedListener` through the `setOnItemSelectedListener` method, but **nowhere** in the class any **listener** **method** is called. Hence the listener remains unused. (reason best known to developers!)\r\n\r\nSource code here: https://android.googlesource.com/platform/frameworks/base/+/refs/heads/master/core/java/android/widget/AutoCompleteTextView.java\r\n\r\nAs such, the alternative is to use the `OnItemClickListener`.","title":"AutoCompleteTextView onItemSelectedListener does not work","body":"<p>Looks like, of-late, the real problem may not be in the code of the question asked, but in the source code of the <code>AutoCompleteTextView</code> class itself.</p>\n\n<p>Although the <code>AutoCompleteTextView</code> class sets it's <code>OnItemSelectedListener</code> through the <code>setOnItemSelectedListener</code> method, but <strong>nowhere</strong> in the class any <strong>listener</strong> <strong>method</strong> is called. Hence the listener remains unused. (reason best known to developers!)</p>\n\n<p>Source code here: <a href=\"https://android.googlesource.com/platform/frameworks/base/+/refs/heads/master/core/java/android/widget/AutoCompleteTextView.java\" rel=\"noreferrer\">https://android.googlesource.com/platform/frameworks/base/+/refs/heads/master/core/java/android/widget/AutoCompleteTextView.java</a></p>\n\n<p>As such, the alternative is to use the <code>OnItemClickListener</code>.</p>\n"},{"tags":[],"owner":{"account_id":4358691,"reputation":2969,"user_id":3556515,"accept_rate":50,"display_name":"XpressGeek"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649776732,"creation_date":1649776732,"answer_id":71845221,"question_id":9249919,"body_markdown":"For **JAVA**\r\n\r\n    myAutoCompleteTextView.setOnItemClickListener(new AdapterView.OnItemClickListener() {\r\n                @Override\r\n                public void onItemClick(AdapterView&lt;?&gt; parent, View view, int position, long id) {\r\n                    \r\n                    Log.e(tag, &quot;Clicked!&quot;);\r\n                    myAutoCompleteTextView.clearFocus();\r\n                }\r\n            });","title":"AutoCompleteTextView onItemSelectedListener does not work","body":"<p>For <strong>JAVA</strong></p>\n<pre><code>myAutoCompleteTextView.setOnItemClickListener(new AdapterView.OnItemClickListener() {\n            @Override\n            public void onItemClick(AdapterView&lt;?&gt; parent, View view, int position, long id) {\n                \n                Log.e(tag, &quot;Clicked!&quot;);\n                myAutoCompleteTextView.clearFocus();\n            }\n        });\n</code></pre>\n"}],"owner":{"account_id":1243136,"reputation":1055,"user_id":1205223,"accept_rate":88,"display_name":"Karen"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":26065,"favorite_count":0,"down_vote_count":0,"up_vote_count":60,"accepted_answer_id":9250218,"answer_count":4,"score":60,"last_activity_date":1649776732,"creation_date":1329060069,"question_id":9249919,"body_markdown":"I have an AutoCompleteTextView and set onItemSelectedListener to it, which does not work.  \r\n\r\nHave you any idea what is the problem?\r\nHere is my Activity, I can also provide the main.xml file if it is needed.\r\n\r\n       package com.chidem;\r\n        \r\n        import android.app.Activity;\r\n        import android.app.AlertDialog;\r\n        import android.os.Bundle;\r\n        import android.util.Log;\r\n        import android.view.View;\r\n        import android.widget.AdapterView;\r\n        import android.widget.AdapterView.OnItemSelectedListener;\r\n        import android.widget.ArrayAdapter;\r\n        import android.widget.AutoCompleteTextView;\r\n        \r\n        public class ChidemActivity extends Activity implements OnItemSelectedListener{\r\n            /** Called when the activity is first created. */\r\n            @Override\r\n            public void onCreate(Bundle savedInstanceState) {\r\n                super.onCreate(savedInstanceState);\r\n                setContentView(R.layout.main);\r\n                String hop[]=new String[]{\r\n                \t\t&quot;Karen&quot;,&quot;Mika&quot;,&quot;Gevor&quot;\r\n                };\r\n                \r\n                AutoCompleteTextView searchHotels = (AutoCompleteTextView) findViewById(R.id.autoSearch);\r\n         \t    searchHotels.setOnItemSelectedListener(this);\r\n         \t \r\n                ArrayAdapter&lt;String&gt; adapter1 = new ArrayAdapter&lt;String&gt;( this, R.layout.list_item, hop);\r\n                searchHotels.setAdapter(adapter1);\r\n             \r\n            }\r\n        \r\n        \r\n        \tpublic void onItemSelected(AdapterView&lt;?&gt; arg0, View arg1, int arg2,\r\n        \t\t\tlong arg3) {\r\n        \t\tLog.d(&quot;autocomplete&quot;, &quot;itemselected&quot;);\r\n        \t\t\r\n        \t}\r\n        \r\n        \tpublic void onNothingSelected(AdapterView&lt;?&gt; arg0) {\r\n        \t\t// TODO Auto-generated method stub\r\n        \t\t\r\n        \t}\r\n        }","title":"AutoCompleteTextView onItemSelectedListener does not work","body":"<p>I have an AutoCompleteTextView and set onItemSelectedListener to it, which does not work.  </p>\n\n<p>Have you any idea what is the problem?\nHere is my Activity, I can also provide the main.xml file if it is needed.</p>\n\n<pre><code>   package com.chidem;\n\n    import android.app.Activity;\n    import android.app.AlertDialog;\n    import android.os.Bundle;\n    import android.util.Log;\n    import android.view.View;\n    import android.widget.AdapterView;\n    import android.widget.AdapterView.OnItemSelectedListener;\n    import android.widget.ArrayAdapter;\n    import android.widget.AutoCompleteTextView;\n\n    public class ChidemActivity extends Activity implements OnItemSelectedListener{\n        /** Called when the activity is first created. */\n        @Override\n        public void onCreate(Bundle savedInstanceState) {\n            super.onCreate(savedInstanceState);\n            setContentView(R.layout.main);\n            String hop[]=new String[]{\n                    \"Karen\",\"Mika\",\"Gevor\"\n            };\n\n            AutoCompleteTextView searchHotels = (AutoCompleteTextView) findViewById(R.id.autoSearch);\n            searchHotels.setOnItemSelectedListener(this);\n\n            ArrayAdapter&lt;String&gt; adapter1 = new ArrayAdapter&lt;String&gt;( this, R.layout.list_item, hop);\n            searchHotels.setAdapter(adapter1);\n\n        }\n\n\n        public void onItemSelected(AdapterView&lt;?&gt; arg0, View arg1, int arg2,\n                long arg3) {\n            Log.d(\"autocomplete\", \"itemselected\");\n\n        }\n\n        public void onNothingSelected(AdapterView&lt;?&gt; arg0) {\n            // TODO Auto-generated method stub\n\n        }\n    }\n</code></pre>\n"},{"tags":["java","spring-boot","maven","intellij-idea"],"comments":[{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1649776414,"post_id":71844949,"comment_id":126959034,"body_markdown":"Upgrade your spring boot version... 1.4.2.RELEASE is of 2016...in particular if you like to compile on JDK17...","body":"Upgrade your spring boot version... 1.4.2.RELEASE is of 2016...in particular if you like to compile on JDK17..."},{"owner":{"account_id":14454469,"reputation":15,"user_id":10441081,"display_name":"Boost PH"},"score":0,"creation_date":1649777052,"post_id":71844949,"comment_id":126959315,"body_markdown":"Ok, @khmarbaise. After I updated the spring-boot version. It will start the Tomcat?","body":"Ok, @khmarbaise. After I updated the spring-boot version. It will start the Tomcat?"}],"answers":[{"tags":[],"owner":{"account_id":17585365,"reputation":194,"user_id":12758199,"display_name":"The_Java_Guy"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649776148,"creation_date":1649776148,"answer_id":71845076,"question_id":71844949,"body_markdown":"Running a test will not start the server and serve you with the requests. You need to run your spring application main class from the IDE or if you use maven then you can use the command in your terminal \r\n\r\n`mvn spring-boot:run`\r\n\r\nBelow are some articles you can refer to get started with a simple spring boot application.\r\n\r\n 1. https://www.javatpoint.com/spring-boot-application\r\n 2. https://www.geeksforgeeks.org/how-to-create-a-basic-application-in-java-spring-boot/","title":"How can I display a spring boot &quot;test&quot; on the browser and run the Tomcat server on IntelliJ IDEA when I used @GetMapping?","body":"<p>Running a test will not start the server and serve you with the requests. You need to run your spring application main class from the IDE or if you use maven then you can use the command in your terminal</p>\n<p><code>mvn spring-boot:run</code></p>\n<p>Below are some articles you can refer to get started with a simple spring boot application.</p>\n<ol>\n<li><a href=\"https://www.javatpoint.com/spring-boot-application\" rel=\"nofollow noreferrer\">https://www.javatpoint.com/spring-boot-application</a></li>\n<li><a href=\"https://www.geeksforgeeks.org/how-to-create-a-basic-application-in-java-spring-boot/\" rel=\"nofollow noreferrer\">https://www.geeksforgeeks.org/how-to-create-a-basic-application-in-java-spring-boot/</a></li>\n</ol>\n"}],"owner":{"account_id":14454469,"reputation":15,"user_id":10441081,"display_name":"Boost PH"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":580,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1649776148,"creation_date":1649775602,"question_id":71844949,"body_markdown":"I don&#39;t know what happens. I run the ApplicationTests to see if the Tomcat server is starting at port 8080. When I check the run this message it appears *&quot;C:\\Program Files\\Java\\jdk-17\\bin\\java.exe... Process finished with exit code 0&quot;*. \r\n\r\nI want to display a spring boot &quot;test&quot; on the browser. When I type localhost:8080 on the browser this message shows\r\n*&quot;HTTP Status 404  Not Found\r\nType Status Report\r\nDescription The origin server did not find a current representation for the target resource or is not willing to disclose that one exists.\r\nApache Tomcat/9.0.62&quot;*\r\n\r\nI&#39;m using IntelliJ IDEA community. I&#39;m curious why Tomcat is not starting on my IDE? What I&#39;m missing? How can I solve this problem?\r\n\r\n[![enter image description here][1]][1]\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/5NKHA.png\r\n  [2]: https://i.stack.imgur.com/ehE23.png\r\n\r\nHere are my dependencies\r\n\r\n    &lt;parent&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n        &lt;version&gt;1.4.2.RELEASE&lt;/version&gt;\r\n    &lt;/parent&gt;\r\n    \r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n    \r\n    &lt;properties&gt;\r\n        &lt;maven.compiler.source&gt;17&lt;/maven.compiler.source&gt;\r\n        &lt;maven.compiler.target&gt;17&lt;/maven.compiler.target&gt;\r\n    &lt;/properties&gt;","title":"How can I display a spring boot &quot;test&quot; on the browser and run the Tomcat server on IntelliJ IDEA when I used @GetMapping?","body":"<p>I don't know what happens. I run the ApplicationTests to see if the Tomcat server is starting at port 8080. When I check the run this message it appears <em>&quot;C:\\Program Files\\Java\\jdk-17\\bin\\java.exe... Process finished with exit code 0&quot;</em>.</p>\n<p>I want to display a spring boot &quot;test&quot; on the browser. When I type localhost:8080 on the browser this message shows\n<em>&quot;HTTP Status 404  Not Found\nType Status Report\nDescription The origin server did not find a current representation for the target resource or is not willing to disclose that one exists.\nApache Tomcat/9.0.62&quot;</em></p>\n<p>I'm using IntelliJ IDEA community. I'm curious why Tomcat is not starting on my IDE? What I'm missing? How can I solve this problem?</p>\n<p><a href=\"https://i.stack.imgur.com/5NKHA.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/5NKHA.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/ehE23.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ehE23.png\" alt=\"enter image description here\" /></a></p>\n<p>Here are my dependencies</p>\n<pre><code>&lt;parent&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n    &lt;version&gt;1.4.2.RELEASE&lt;/version&gt;\n&lt;/parent&gt;\n\n&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n\n&lt;properties&gt;\n    &lt;maven.compiler.source&gt;17&lt;/maven.compiler.source&gt;\n    &lt;maven.compiler.target&gt;17&lt;/maven.compiler.target&gt;\n&lt;/properties&gt;\n</code></pre>\n"},{"tags":["java","android","methods","control-flow"],"answers":[{"tags":[],"owner":{"account_id":3265865,"reputation":374,"user_id":2750374,"display_name":"Vikas Rathod"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1495182440,"creation_date":1495182440,"answer_id":44065035,"question_id":44064616,"body_markdown":"You need to implement an interface to get the callback\r\n\r\n    public class RegenerateToken {\r\n    \r\n    public interface Callback {\r\n        public void onResponce(String data);\r\n    }\r\n    \r\n    public void generate(Context context,final Callback callBack) {\r\n        ExecuteServerReq executeServerReq = new ExecuteServerReq(context, client, Utilz.URL + &quot;/authenticate&quot;, params, true, true);\r\n        executeServerReq.execute();\r\n        executeServerReq.getResponse = new ExecuteServerReq.GetResponse() {\r\n\r\n        @Override\r\n        public void onResponse(String objects) {\r\n            Utilz.printLog(&quot;RegenerateTokenresponse&quot;, objects);\r\n            callBack.onResponce(objects);\r\n        }};\r\n    }\r\n    }\r\n\r\nCallback implementation\r\n\r\n    if(condition) {\r\n        new RegenerateToken().generate(DriverActivity.this, new Callback() {  \r\n            @Override\r\n            public void onResponse(String objects) { //your data do ur processing\r\n            }\r\n        });\r\n    }","title":"how to control the Activity method flow till non activity class perform network operation","body":"<p>You need to implement an interface to get the callback</p>\n\n<pre><code>public class RegenerateToken {\n\npublic interface Callback {\n    public void onResponce(String data);\n}\n\npublic void generate(Context context,final Callback callBack) {\n    ExecuteServerReq executeServerReq = new ExecuteServerReq(context, client, Utilz.URL + \"/authenticate\", params, true, true);\n    executeServerReq.execute();\n    executeServerReq.getResponse = new ExecuteServerReq.GetResponse() {\n\n    @Override\n    public void onResponse(String objects) {\n        Utilz.printLog(\"RegenerateTokenresponse\", objects);\n        callBack.onResponce(objects);\n    }};\n}\n}\n</code></pre>\n\n<p>Callback implementation</p>\n\n<pre><code>if(condition) {\n    new RegenerateToken().generate(DriverActivity.this, new Callback() {  \n        @Override\n        public void onResponse(String objects) { //your data do ur processing\n        }\n    });\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10140929,"reputation":1154,"user_id":7490702,"accept_rate":30,"display_name":"rsanath"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1495186882,"creation_date":1495186882,"answer_id":44066589,"question_id":44064616,"body_markdown":"You can use LocalBroacastManager to send and receive information within your app\r\n\r\n    public class RegenerateToken {\r\n\r\n        public void generate(Context context) {\r\n        //your code\r\n            executeServerReq.getResponse = new ExecuteServerReq.GetResponse() {\r\n\r\n                @Override\r\n                public void onResponse(String objects) {\r\n                    Utilz.printLog(&quot;RegenerateTokenresponse&quot;, objects);\r\n                    Intent intent = new Intent(&quot;Respone&quot;);\r\n                    if(expected responce){    \r\n                        intent.putExtra(&quot;result&quot;, &quot;Successful&quot;);\r\n                    }\r\n                    else{\r\n                        intent.putExtra(&quot;result&quot;, &quot;UnSuccessful&quot;);     \r\n                    }\r\n                    LocalBroadcastManager.getInstance(this).sendBroadcast(iIntent);\r\n\r\n                }\r\n            };\r\n        }\r\n    }\r\n\r\n\r\nAnd at your Activity register and define a receiver for your Local Broadcast \r\n\r\n    @Override\r\n    public void onCreate(Bundle savedInstanceState) {\r\n        ...\r\n        //Register the custom Broadcast &quot;Response&quot;\r\n\r\n        LocalBroadcastManager.getInstance(this).registerReceiver(mMessageReceiver,\r\n        new IntentFilter(&quot;Response&quot;));\r\n    }\r\n\r\n    // Our handler for received Intents. This will be called whenever an Intent\r\n    // with an action named &quot;Response&quot; is broadcasted.\r\n    private BroadcastReceiver myMessageReceiver = new BroadcastReceiver() {\r\n    @Override\r\n        public void onReceive(Context context, Intent intent) {\r\n        String response= intent.getStringExtra(&quot;result&quot;);\r\n        if(response.equals(&quot;Successful&quot;)){\r\n            //on successful execution\r\n            // call your method again or do whatever you wish\r\n        }else{\r\n            //on otherwise            \r\n        }\r\n      }\r\n    };\r\n\r\n","title":"how to control the Activity method flow till non activity class perform network operation","body":"<p>You can use LocalBroacastManager to send and receive information within your app</p>\n\n<pre><code>public class RegenerateToken {\n\n    public void generate(Context context) {\n    //your code\n        executeServerReq.getResponse = new ExecuteServerReq.GetResponse() {\n\n            @Override\n            public void onResponse(String objects) {\n                Utilz.printLog(\"RegenerateTokenresponse\", objects);\n                Intent intent = new Intent(\"Respone\");\n                if(expected responce){    \n                    intent.putExtra(\"result\", \"Successful\");\n                }\n                else{\n                    intent.putExtra(\"result\", \"UnSuccessful\");     \n                }\n                LocalBroadcastManager.getInstance(this).sendBroadcast(iIntent);\n\n            }\n        };\n    }\n}\n</code></pre>\n\n<p>And at your Activity register and define a receiver for your Local Broadcast </p>\n\n<pre><code>@Override\npublic void onCreate(Bundle savedInstanceState) {\n    ...\n    //Register the custom Broadcast \"Response\"\n\n    LocalBroadcastManager.getInstance(this).registerReceiver(mMessageReceiver,\n    new IntentFilter(\"Response\"));\n}\n\n// Our handler for received Intents. This will be called whenever an Intent\n// with an action named \"Response\" is broadcasted.\nprivate BroadcastReceiver myMessageReceiver = new BroadcastReceiver() {\n@Override\n    public void onReceive(Context context, Intent intent) {\n    String response= intent.getStringExtra(\"result\");\n    if(response.equals(\"Successful\")){\n        //on successful execution\n        // call your method again or do whatever you wish\n    }else{\n        //on otherwise            \n    }\n  }\n};\n</code></pre>\n"}],"owner":{"account_id":10566620,"reputation":764,"user_id":7784663,"accept_rate":73,"display_name":"Tushar Kotecha"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":73,"favorite_count":0,"down_vote_count":1,"up_vote_count":3,"accepted_answer_id":44065035,"answer_count":2,"score":2,"last_activity_date":1649775885,"creation_date":1495180885,"question_id":44064616,"body_markdown":"i have one method in activity in which some operations are performed from non activity class. i want to know when the non activity class network operation are completed so that i can call that method again. but when i call non activity class then the method goes to at the end.\r\n\r\nhere is my code\r\n\r\n    public void somemethod(){\r\n    \t\t\t.\r\n    \t\t\t.\r\n    \t\t\t.\r\n    \t\t\t.\t\t\t\t\r\n    if (condition) {\r\n    \r\n    \tnew RegenerateToken().generate(DriverActivity.this); // calling non activity class which perform some network operation\r\n    \r\n    \t//here i want to know that non activity class has performed the network operation so i can call this method again\r\n    \r\n    \t}\t\t\r\n    \t\t\t.\r\n    \t\t\t.\r\n    \t\t\t.\r\n    log.d(&quot;method&quot;,&quot;ending&quot;);\r\n    }\r\n\r\n\r\nnon activity class\r\n\r\n    public class RegenerateToken {\r\n        public void generate(Context context) {\r\n        \r\n        ExecuteServerReq executeServerReq = new ExecuteServerReq(context, client, Utilz.URL + &quot;/authenticate&quot;, params, true, true);\r\n        executeServerReq.execute();\r\n        executeServerReq.getResponse = new ExecuteServerReq.GetResponse() {\r\n        \r\n        @Override\r\n        public void onResponse(String objects) {\r\n          Utilz.printLog(&quot;RegenerateTokenresponse&quot;, objects);\r\n        }\r\n        };\r\n        }\r\n    }","title":"how to control the Activity method flow till non activity class perform network operation","body":"<p>i have one method in activity in which some operations are performed from non activity class. i want to know when the non activity class network operation are completed so that i can call that method again. but when i call non activity class then the method goes to at the end.</p>\n<p>here is my code</p>\n<pre><code>public void somemethod(){\n            .\n            .\n            .\n            .               \nif (condition) {\n\n    new RegenerateToken().generate(DriverActivity.this); // calling non activity class which perform some network operation\n\n    //here i want to know that non activity class has performed the network operation so i can call this method again\n\n    }       \n            .\n            .\n            .\nlog.d(&quot;method&quot;,&quot;ending&quot;);\n}\n</code></pre>\n<p>non activity class</p>\n<pre><code>public class RegenerateToken {\n    public void generate(Context context) {\n    \n    ExecuteServerReq executeServerReq = new ExecuteServerReq(context, client, Utilz.URL + &quot;/authenticate&quot;, params, true, true);\n    executeServerReq.execute();\n    executeServerReq.getResponse = new ExecuteServerReq.GetResponse() {\n    \n    @Override\n    public void onResponse(String objects) {\n      Utilz.printLog(&quot;RegenerateTokenresponse&quot;, objects);\n    }\n    };\n    }\n}\n</code></pre>\n"},{"tags":["java","database","entitymanager"],"comments":[{"owner":{"account_id":121881,"reputation":20677,"user_id":315306,"accept_rate":90,"display_name":"Raffaele"},"score":1,"creation_date":1462188593,"post_id":36981239,"comment_id":61517617,"body_markdown":"Possible duplicate of [Hibernate EntityManager, is it supposed to be used as a singleton?](http://stackoverflow.com/questions/9370819/hibernate-entitymanager-is-it-supposed-to-be-used-as-a-singleton)","body":"Possible duplicate of <a href=\"http://stackoverflow.com/questions/9370819/hibernate-entitymanager-is-it-supposed-to-be-used-as-a-singleton\">Hibernate EntityManager, is it supposed to be used as a singleton?</a>"}],"answers":[{"tags":[],"owner":{"account_id":8347483,"reputation":182,"user_id":6270761,"display_name":"namlik"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1462188388,"creation_date":1462188388,"answer_id":36981303,"question_id":36981239,"body_markdown":"You should not make entitymanager static, it should be an object that is removed after you do your transactions. This also mean that you should close it after your operation is finished. EntitymanagerFactory can stay static, you only need 1 for each program run. The reason as to why you should close it  is that you are wasting resources on your device.\r\n\r\nLonger/ better explanation on EMF https://stackoverflow.com/a/4544053/6270761","title":"When should I close Entity manager?","body":"<p>You should not make entitymanager static, it should be an object that is removed after you do your transactions. This also mean that you should close it after your operation is finished. EntitymanagerFactory can stay static, you only need 1 for each program run. The reason as to why you should close it  is that you are wasting resources on your device.</p>\n\n<p>Longer/ better explanation on EMF <a href=\"https://stackoverflow.com/a/4544053/6270761\">https://stackoverflow.com/a/4544053/6270761</a></p>\n"},{"tags":[],"owner":{"account_id":21395683,"reputation":1553,"user_id":15758781,"display_name":"Lunatic"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1649775777,"creation_date":1649775777,"answer_id":71844987,"question_id":36981239,"body_markdown":"As far as i know the `EntityManager` is just abstraction to handle [work-unit][1] in ongoing transaction, if you created it using EntityManagerFactory which it is in current implementation you have to close it no matter what framework or template you are using.\r\n\r\n\r\n If you obtained it using dependency injection (eg using EJB and @PersistenceContext annotation) you should not close it by hand i.e. it will close by embed dependency which you injected, the idea is to always close `java.sql.Connection` to prevent resource leak.\r\n\r\nMore over the application has finished using the entity manager factory, and/or at application shutdown, the application should close the entity manager factory. Once an [EntityManagerFactory][2] has been closed, all its entity managers are considered to be in the closed state as well.\r\n\r\n\r\n  [1]: https://martinfowler.com/eaaCatalog/unitOfWork.html\r\n  [2]: https://docs.oracle.com/javaee/7/api/javax/persistence/EntityManagerFactory.html","title":"When should I close Entity manager?","body":"<p>As far as i know the <code>EntityManager</code> is just abstraction to handle <a href=\"https://martinfowler.com/eaaCatalog/unitOfWork.html\" rel=\"nofollow noreferrer\">work-unit</a> in ongoing transaction, if you created it using EntityManagerFactory which it is in current implementation you have to close it no matter what framework or template you are using.</p>\n<p>If you obtained it using dependency injection (eg using EJB and @PersistenceContext annotation) you should not close it by hand i.e. it will close by embed dependency which you injected, the idea is to always close <code>java.sql.Connection</code> to prevent resource leak.</p>\n<p>More over the application has finished using the entity manager factory, and/or at application shutdown, the application should close the entity manager factory. Once an <a href=\"https://docs.oracle.com/javaee/7/api/javax/persistence/EntityManagerFactory.html\" rel=\"nofollow noreferrer\">EntityManagerFactory</a> has been closed, all its entity managers are considered to be in the closed state as well.</p>\n"}],"owner":{"account_id":8251433,"reputation":169,"user_id":6205929,"accept_rate":0,"display_name":"lucas999"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3378,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":2,"score":3,"last_activity_date":1649775777,"creation_date":1462188167,"question_id":36981239,"body_markdown":"When should I close connection with database ? \r\nI create connection one time when application starting, and then I use entity manager in this  way:\r\n\r\n    public void createItem(TYPE item){\r\n    \t\tem.getTransaction().begin();\r\n    \t\tem.persist(item);\r\n    \t\tem.getTransaction().commit();\r\n    \t}\r\n\r\n    public class Connection {  //creating connection (one time)\r\n    \t  private static final String PERSISTENCE_UNIT_NAME = &quot;ejb&quot;;\r\n    \t  private static EntityManagerFactory factory;\r\n    \t  private static EntityManager em;\r\n    \t  \r\n    \t  static{\r\n    \t\t  factory = Persistence.createEntityManagerFactory(PERSISTENCE_UNIT_NAME);\r\n    \t\t  em = factory.createEntityManager();\r\n    \t  }\r\n    \t  public static EntityManager getEntityManager() {\r\n    \t\treturn em;\r\n    \t  }\r\n    }\r\nI think it does not make sense to close connection evey each operation (like create) and create new connecion when I want to save item again.","title":"When should I close Entity manager?","body":"<p>When should I close connection with database ? \nI create connection one time when application starting, and then I use entity manager in this  way:</p>\n\n<pre><code>public void createItem(TYPE item){\n        em.getTransaction().begin();\n        em.persist(item);\n        em.getTransaction().commit();\n    }\n\npublic class Connection {  //creating connection (one time)\n      private static final String PERSISTENCE_UNIT_NAME = \"ejb\";\n      private static EntityManagerFactory factory;\n      private static EntityManager em;\n\n      static{\n          factory = Persistence.createEntityManagerFactory(PERSISTENCE_UNIT_NAME);\n          em = factory.createEntityManager();\n      }\n      public static EntityManager getEntityManager() {\n        return em;\n      }\n}\n</code></pre>\n\n<p>I think it does not make sense to close connection evey each operation (like create) and create new connecion when I want to save item again.</p>\n"},{"tags":["java","excel","csv","file","readfile"],"comments":[{"owner":{"account_id":8362430,"reputation":856,"user_id":6280255,"display_name":"Just another Java programmer"},"score":0,"creation_date":1634027327,"post_id":69537181,"comment_id":122909752,"body_markdown":"You have a rowIterator.next() before the while loop whose result you ignore. Maybe you&#39;re not on the line you think you are? Or maybe you are skipping a header?","body":"You have a rowIterator.next() before the while loop whose result you ignore. Maybe you&#39;re not on the line you think you are? Or maybe you are skipping a header?"},{"owner":{"account_id":444292,"reputation":1,"user_id":836018,"accept_rate":57,"display_name":"Jack"},"score":0,"creation_date":1634027619,"post_id":69537181,"comment_id":122909861,"body_markdown":"I checked and my code seems like shown above. What is wrong with that code? Could you pls post the corrected one? Regards","body":"I checked and my code seems like shown above. What is wrong with that code? Could you pls post the corrected one? Regards"}],"answers":[{"tags":[],"owner":{"account_id":1008655,"reputation":8966,"user_id":1021720,"accept_rate":60,"display_name":"obourgain"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1634028348,"creation_date":1634028348,"answer_id":69537528,"question_id":69537181,"body_markdown":"You can&#39;t make `cellIterator.hasNext()` return true for the empty &quot;name&quot; cell.\r\n\r\nIf you know in advance the number of column in advance, you can use a loop and `row.getCell(index)`.\r\n\r\n            for (int i = 0; i &lt; 3; i++) {\r\n                Cell cell = row.getCell(i);\r\n                cellList.add(cell == null ? &quot;Empty&quot;:cell.toString());\r\n            }\r\n\r\nIf you don&#39;t, you have to scan first of your file to count the number of columns.","title":"cellIterator.hasNext() returns false even the cell has value","body":"<p>You can't make <code>cellIterator.hasNext()</code> return true for the empty &quot;name&quot; cell.</p>\n<p>If you know in advance the number of column in advance, you can use a loop and <code>row.getCell(index)</code>.</p>\n<pre><code>        for (int i = 0; i &lt; 3; i++) {\n            Cell cell = row.getCell(i);\n            cellList.add(cell == null ? &quot;Empty&quot;:cell.toString());\n        }\n</code></pre>\n<p>If you don't, you have to scan first of your file to count the number of columns.</p>\n"}],"owner":{"account_id":444292,"reputation":1,"user_id":836018,"accept_rate":57,"display_name":"Jack"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":529,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":69537528,"answer_count":1,"score":2,"last_activity_date":1649775762,"creation_date":1634026724,"question_id":69537181,"body_markdown":"I use the following approach to read data from excel (csv) sheet:\r\n\r\n\r\n```\r\nInputStream inputStream = new BufferedInputStream(multipartFile.getInputStream());\r\nXSSFWorkbook myWorkBook = new XSSFWorkbook(inputStream);\r\nList&lt;String&gt; cellList = new ArrayList&lt;&gt;();\r\nXSSFSheet mySheet = myWorkBook.getSheetAt(0);\r\n\r\nIterator&lt;Row&gt; rowIterator = mySheet.iterator();\r\nrowIterator.next();\r\n\r\nwhile (rowIterator.hasNext()) {\r\n    Row row = rowIterator.next();\r\n    cellList.clear();\r\n    Iterator&lt;Cell&gt; cellIterator = row.cellIterator();\r\n\r\n    while (cellIterator.hasNext()) { // this returns false even the cell has data \r\n        Cell cell = cellIterator.next();\r\n        cellList.add(cell.getStringCellValue());\r\n    }\r\n}\r\n```\r\n\r\n\r\nI want to make `cellIterator.hasNext()` returns true for empty cell values as in the second row (name). So, how can I do that? \r\n\r\n```\r\nCreate Date  Uuid                                  Name\r\n2021-09-29   2e81a2b6-3226-4fe0-b8bd-39f42239686d  admin\r\n2021-09-30   610e9040-840c-48c5-aa64-f193ed896133  \r\n```\r\n\r\n\r\n","title":"cellIterator.hasNext() returns false even the cell has value","body":"<p>I use the following approach to read data from excel (csv) sheet:</p>\n<pre><code>InputStream inputStream = new BufferedInputStream(multipartFile.getInputStream());\nXSSFWorkbook myWorkBook = new XSSFWorkbook(inputStream);\nList&lt;String&gt; cellList = new ArrayList&lt;&gt;();\nXSSFSheet mySheet = myWorkBook.getSheetAt(0);\n\nIterator&lt;Row&gt; rowIterator = mySheet.iterator();\nrowIterator.next();\n\nwhile (rowIterator.hasNext()) {\n    Row row = rowIterator.next();\n    cellList.clear();\n    Iterator&lt;Cell&gt; cellIterator = row.cellIterator();\n\n    while (cellIterator.hasNext()) { // this returns false even the cell has data \n        Cell cell = cellIterator.next();\n        cellList.add(cell.getStringCellValue());\n    }\n}\n</code></pre>\n<p>I want to make <code>cellIterator.hasNext()</code> returns true for empty cell values as in the second row (name). So, how can I do that?</p>\n<pre><code>Create Date  Uuid                                  Name\n2021-09-29   2e81a2b6-3226-4fe0-b8bd-39f42239686d  admin\n2021-09-30   610e9040-840c-48c5-aa64-f193ed896133  \n</code></pre>\n"},{"tags":["java","spring","spring-boot","oauth","keycloak"],"comments":[{"owner":{"account_id":1449510,"reputation":48172,"user_id":1366871,"accept_rate":100,"display_name":"dreamcrash"},"score":0,"creation_date":1607635393,"post_id":65242276,"comment_id":115342424,"body_markdown":"How are you getting the principal?","body":"How are you getting the principal?"},{"owner":{"account_id":14403640,"reputation":143,"user_id":10404444,"display_name":"Rea Teria"},"score":0,"creation_date":1607635691,"post_id":65242276,"comment_id":115342532,"body_markdown":"@dreamcrash I have a simple Rest controller with a get method.\n@GetMapping(&quot;/&quot;)\n    @PreAuthorize(&quot;hasAnyRole(&#39;USER&#39;)&quot;)\n    private Principal me(Principal principal){}","body":"@dreamcrash I have a simple Rest controller with a get method. @GetMapping(&quot;/&quot;)     @PreAuthorize(&quot;hasAnyRole(&#39;USER&#39;)&quot;)     private Principal me(Principal principal){}"}],"answers":[{"tags":[],"owner":{"account_id":14403640,"reputation":143,"user_id":10404444,"display_name":"Rea Teria"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1607637120,"creation_date":1607637120,"answer_id":65242829,"question_id":65242276,"body_markdown":" \r\n    @Configuration\r\n    @EnableWebSecurity\r\n    @ComponentScan(basePackageClasses = KeycloakSecurityComponents.class)\r\n    public class JWTSecurityConfig extends KeycloakWebSecurityConfigurerAdapter {\r\n        \r\n        @Autowired\r\n        public void configureGlobal(AuthenticationManagerBuilder auth) throws Exception {\r\n            KeycloakAuthenticationProvider keycloakAuthenticationProvider = keycloakAuthenticationProvider();\r\n            keycloakAuthenticationProvider.setGrantedAuthoritiesMapper(new SimpleAuthorityMapper());\r\n            auth.authenticationProvider(keycloakAuthenticationProvider);\r\n        }\r\n    \r\n        @Bean\r\n        public KeycloakConfigResolver KeycloakConfigResolver() {\r\n            return new KeycloakSpringBootConfigResolver();\r\n        }\r\n    \r\n        /**\r\n         * Defines the session authentication strategy.\r\n         */\r\n        @Bean\r\n        @Override\r\n        protected SessionAuthenticationStrategy sessionAuthenticationStrategy() {\r\n            return new RegisterSessionAuthenticationStrategy(new SessionRegistryImpl());\r\n        }\r\n    \r\n        @Override\r\n        protected void configure(HttpSecurity http) throws Exception {\r\n            http\r\n              .authorizeRequests(authz -&gt; authz\r\n                .anyRequest().permitAll().permitAll())\r\n              .oauth2ResourceServer(OAuth2ResourceServerConfigurer::jwt);\r\n    \t}\r\n    }","title":"Spring boot resource server principal name","body":"<pre><code>@Configuration\n@EnableWebSecurity\n@ComponentScan(basePackageClasses = KeycloakSecurityComponents.class)\npublic class JWTSecurityConfig extends KeycloakWebSecurityConfigurerAdapter {\n    \n    @Autowired\n    public void configureGlobal(AuthenticationManagerBuilder auth) throws Exception {\n        KeycloakAuthenticationProvider keycloakAuthenticationProvider = keycloakAuthenticationProvider();\n        keycloakAuthenticationProvider.setGrantedAuthoritiesMapper(new SimpleAuthorityMapper());\n        auth.authenticationProvider(keycloakAuthenticationProvider);\n    }\n\n    @Bean\n    public KeycloakConfigResolver KeycloakConfigResolver() {\n        return new KeycloakSpringBootConfigResolver();\n    }\n\n    /**\n     * Defines the session authentication strategy.\n     */\n    @Bean\n    @Override\n    protected SessionAuthenticationStrategy sessionAuthenticationStrategy() {\n        return new RegisterSessionAuthenticationStrategy(new SessionRegistryImpl());\n    }\n\n    @Override\n    protected void configure(HttpSecurity http) throws Exception {\n        http\n          .authorizeRequests(authz -&gt; authz\n            .anyRequest().permitAll().permitAll())\n          .oauth2ResourceServer(OAuth2ResourceServerConfigurer::jwt);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5527034,"reputation":481,"user_id":4388226,"display_name":"Gyanesh Sharma"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649775689,"creation_date":1649775689,"answer_id":71844972,"question_id":65242276,"body_markdown":"Spring Security saves the JWT token as principal to the SecurityContextHolder. For example the following code would return the username that you are looking for. \r\n\r\n    ...\r\n    import org.springframework.security.oauth2.jwt.Jwt;\r\n    ...\r\n    @GetMapping(value = &quot;current-user&quot;, produces = &quot;application/json&quot;)\r\n    \tResponseEntity&lt;String&gt; getLoggedInUser() {\r\n    \t\tAuthentication authentication = SecurityContextHolder.getContext().getAuthentication();\r\n    \t\tJwt principal = (Jwt) authentication.getPrincipal(); \r\n    \t\tString currentUserName = principal.getClaimAsString(&quot;username&quot;);\r\n    \t\treturn new ResponseEntity&lt;String&gt;(currentUserName, HttpStatus.OK);\r\n    \t}\r\n\r\n","title":"Spring boot resource server principal name","body":"<p>Spring Security saves the JWT token as principal to the SecurityContextHolder. For example the following code would return the username that you are looking for.</p>\n<pre><code>...\nimport org.springframework.security.oauth2.jwt.Jwt;\n...\n@GetMapping(value = &quot;current-user&quot;, produces = &quot;application/json&quot;)\n    ResponseEntity&lt;String&gt; getLoggedInUser() {\n        Authentication authentication = SecurityContextHolder.getContext().getAuthentication();\n        Jwt principal = (Jwt) authentication.getPrincipal(); \n        String currentUserName = principal.getClaimAsString(&quot;username&quot;);\n        return new ResponseEntity&lt;String&gt;(currentUserName, HttpStatus.OK);\n    }\n</code></pre>\n"}],"owner":{"account_id":14403640,"reputation":143,"user_id":10404444,"display_name":"Rea Teria"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1253,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":65242829,"answer_count":2,"score":2,"last_activity_date":1649775689,"creation_date":1607634152,"question_id":65242276,"body_markdown":"I have a Keycloak server running. and a spring boot application as a resource server. I can authenticate and get token and the spring boot app will accept the token. but when I want to get the username from the Principal I will get a UUID instead of my email or username. I also added a mapper to my keycloak that maps preferred_username to username. and it&#39;s working. \r\n\r\nJWT info \r\n\r\n      ...\r\n      &quot;scope&quot;: &quot;openid profile email&quot;,\r\n      &quot;email_verified&quot;: true,\r\n      &quot;username&quot;: &quot;test@test.com&quot;,\r\n      &quot;DOB&quot;: &quot;12345&quot;,\r\n      &quot;name&quot;: &quot;test test&quot;,\r\n      &quot;preferred_username&quot;: &quot;test@test.com&quot;,\r\n      &quot;given_name&quot;: &quot;test&quot;,\r\n      &quot;family_name&quot;: &quot;test&quot;,\r\n      &quot;email&quot;: &quot;test@test.com&quot;\r\n    }\r\n\r\nmy spring app properties: \r\n\r\n    spring:\r\n      security:\r\n        oauth2:\r\n          resourceserver:\r\n            jwt:\r\n              issuer-uri: http://localhost:8080/auth/realms/test","title":"Spring boot resource server principal name","body":"<p>I have a Keycloak server running. and a spring boot application as a resource server. I can authenticate and get token and the spring boot app will accept the token. but when I want to get the username from the Principal I will get a UUID instead of my email or username. I also added a mapper to my keycloak that maps preferred_username to username. and it's working.</p>\n<p>JWT info</p>\n<pre><code>  ...\n  &quot;scope&quot;: &quot;openid profile email&quot;,\n  &quot;email_verified&quot;: true,\n  &quot;username&quot;: &quot;test@test.com&quot;,\n  &quot;DOB&quot;: &quot;12345&quot;,\n  &quot;name&quot;: &quot;test test&quot;,\n  &quot;preferred_username&quot;: &quot;test@test.com&quot;,\n  &quot;given_name&quot;: &quot;test&quot;,\n  &quot;family_name&quot;: &quot;test&quot;,\n  &quot;email&quot;: &quot;test@test.com&quot;\n}\n</code></pre>\n<p>my spring app properties:</p>\n<pre><code>spring:\n  security:\n    oauth2:\n      resourceserver:\n        jwt:\n          issuer-uri: http://localhost:8080/auth/realms/test\n</code></pre>\n"},{"tags":["java","junit","mocking"],"answers":[{"tags":[],"owner":{"account_id":5275807,"reputation":1972,"user_id":4212632,"accept_rate":100,"display_name":"Ryan"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1450373450,"creation_date":1450373450,"answer_id":34340768,"question_id":34340693,"body_markdown":"Do you have Mockery installed?\r\nIf not, update your **composer.json**:\r\n\r\n    \r\n    &quot;require-dev&quot;: {\r\n        &quot;mockery/mockery&quot;: &quot;dev-master@dev&quot;\r\n    }\r\n\r\nThen run:\r\n\r\n\r\n    composer update\r\n\r\nanswer from [here][1]\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/20826539/class-mockery-not-found","title":"No Mockery found in test class","body":"<p>Do you have Mockery installed?\nIf not, update your <strong>composer.json</strong>:</p>\n\n<pre><code>\"require-dev\": {\n    \"mockery/mockery\": \"dev-master@dev\"\n}\n</code></pre>\n\n<p>Then run:</p>\n\n<pre><code>composer update\n</code></pre>\n\n<p>answer from <a href=\"https://stackoverflow.com/questions/20826539/class-mockery-not-found\">here</a></p>\n"},{"tags":[],"owner":{"account_id":3659411,"reputation":40844,"user_id":3049628,"accept_rate":78,"display_name":"Tim B"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1452860927,"creation_date":1450373471,"answer_id":34340772,"question_id":34340693,"body_markdown":"I&#39;ve found the solution. I had somehow copied in an:\r\n\r\n    @RunWith(JMockCategoryRunner.class)\r\n\r\nannotation from another file and removing that got rid of the problem.\r\n","title":"No Mockery found in test class","body":"<p>I've found the solution. I had somehow copied in an:</p>\n\n<pre><code>@RunWith(JMockCategoryRunner.class)\n</code></pre>\n\n<p>annotation from another file and removing that got rid of the problem.</p>\n"},{"tags":[],"owner":{"account_id":1010706,"reputation":1264,"user_id":1023341,"display_name":"gkephorus"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1649775646,"creation_date":1649775646,"answer_id":71844959,"question_id":34340693,"body_markdown":"In newer situations you might want to look into the property junit.jupiter.extensions.autodetection.enabled. JMock seems to have a challenge with respect to this. Read: https://github.com/jmock-developers/jmock-library/issues/155 No official fix available yet. But it helped me to fix things in my situation: I had to exclude the artifact quarkus-junit5-properties in my Quarkus project under dependency quarkus-junit5. This artifact caused the above setting to be set to true.","title":"No Mockery found in test class","body":"<p>In newer situations you might want to look into the property junit.jupiter.extensions.autodetection.enabled. JMock seems to have a challenge with respect to this. Read: <a href=\"https://github.com/jmock-developers/jmock-library/issues/155\" rel=\"nofollow noreferrer\">https://github.com/jmock-developers/jmock-library/issues/155</a> No official fix available yet. But it helped me to fix things in my situation: I had to exclude the artifact quarkus-junit5-properties in my Quarkus project under dependency quarkus-junit5. This artifact caused the above setting to be set to true.</p>\n"}],"owner":{"account_id":3659411,"reputation":40844,"user_id":3049628,"accept_rate":78,"display_name":"Tim B"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":343,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":34340772,"answer_count":3,"score":1,"last_activity_date":1649775646,"creation_date":1450373205,"question_id":34340693,"body_markdown":"I&#39;m writing a new unit test and am getting a `java.lang.Exception` thrown with the error &quot;no Mockery found in test class&quot;. This is happening as an `initializationError` which makes sense as I&#39;m setting up the mocks in an `@Before` method.\r\n\r\nDoes anyone know what causes this error and what needs to be done to work around it?\r\n","title":"No Mockery found in test class","body":"<p>I'm writing a new unit test and am getting a <code>java.lang.Exception</code> thrown with the error \"no Mockery found in test class\". This is happening as an <code>initializationError</code> which makes sense as I'm setting up the mocks in an <code>@Before</code> method.</p>\n\n<p>Does anyone know what causes this error and what needs to be done to work around it?</p>\n"},{"tags":["java","treemap"],"comments":[{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":1,"creation_date":1649773712,"post_id":71844432,"comment_id":126957840,"body_markdown":"Please read: [Can I ask only one question per post?](https://meta.stackexchange.com/questions/222735/can-i-ask-only-one-question-per-post)","body":"Please read: <a href=\"https://meta.stackexchange.com/questions/222735/can-i-ask-only-one-question-per-post\">Can I ask only one question per post?</a>"}],"answers":[{"tags":[],"owner":{"account_id":6714862,"reputation":16230,"user_id":5176992,"display_name":"Eritrean"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1649775549,"creation_date":1649775549,"answer_id":71844936,"question_id":71844432,"body_markdown":"For your first question use `merge` instead of `put` \r\n\r\n    TreeMap&lt;Person, Integer&gt; people3 = new TreeMap&lt;&gt;();\r\n    int count = 1;\r\n    people3.put(new Person(&quot;Sam&quot;), count);\r\n    people3.put(new Person(&quot;Tom&quot;), count);\r\n    people3.put(new Person(&quot;Bob&quot;), count);\r\n    count = 5;\r\n\r\n    people3.merge(new Person(&quot;Sam&quot;), count, (oldVal, newVal) -&gt; oldVal + newVal);\r\n\r\n    // or shorter\r\n\r\n    people3.merge(new Person(&quot;Sam&quot;), count, Integer::sum);\r\n\r\nFor your second question just use `get`\r\n\r\n    Person personToFind = new Person(&quot;Tom&quot;);\r\n    if (people3.containsKey(personToFind)) {\r\n        System.out.println(&quot;The count for &quot; + personToFind + people3.get(personToFind));\r\n    }\r\n","title":"Get containsValue using class comparable java treemap","body":"<p>For your first question use <code>merge</code> instead of <code>put</code></p>\n<pre><code>TreeMap&lt;Person, Integer&gt; people3 = new TreeMap&lt;&gt;();\nint count = 1;\npeople3.put(new Person(&quot;Sam&quot;), count);\npeople3.put(new Person(&quot;Tom&quot;), count);\npeople3.put(new Person(&quot;Bob&quot;), count);\ncount = 5;\n\npeople3.merge(new Person(&quot;Sam&quot;), count, (oldVal, newVal) -&gt; oldVal + newVal);\n\n// or shorter\n\npeople3.merge(new Person(&quot;Sam&quot;), count, Integer::sum);\n</code></pre>\n<p>For your second question just use <code>get</code></p>\n<pre><code>Person personToFind = new Person(&quot;Tom&quot;);\nif (people3.containsKey(personToFind)) {\n    System.out.println(&quot;The count for &quot; + personToFind + people3.get(personToFind));\n}\n</code></pre>\n"}],"owner":{"account_id":1168837,"reputation":221,"user_id":1146489,"accept_rate":33,"display_name":"Steve42"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1649798866,"accepted_answer_id":71844936,"answer_count":1,"score":0,"last_activity_date":1649775549,"creation_date":1649773556,"question_id":71844432,"body_markdown":"I&#39;m a newbie. \r\nQuestion 1- Before adding &quot;Sam&quot; with count=5 to TreeMap, how can I get the count \r\nof &quot;sam&quot; with a value of 1?\r\nie Currently &quot;sam&quot; will have a count of 5. I want the count to be 6.\r\n\r\nQuestion 2- on people3.containsKey, how can I get the &quot;containsValue&quot; or the &quot;count&quot;\r\nfor that record?\r\n\r\nTIA\r\n\r\n```\r\npackage app;\r\n\r\nimport java.util.Map;\r\nimport java.util.Objects;\r\nimport java.util.Set;\r\nimport java.util.TreeMap;\r\nimport java.util.Map.Entry;\r\n\r\nclass Person implements Comparable&lt;Person&gt; {\r\n\tprivate String name;\r\n\r\n\tpublic Person(String name) {\r\n\t\tthis.name = name;\r\n\t}\r\n\r\n\tpublic String toString() {\r\n\t\treturn name;\r\n\t}\r\n\r\n//  below sorts in alphabetic\r\n\t@Override\r\n\tpublic int compareTo(Person other) {\r\n\t\treturn this.name.compareToIgnoreCase(other.name);\r\n\t}\r\n\r\n\t@Override\r\n\tpublic int hashCode() {\r\n\t\treturn Objects.hash(name);\r\n\t}\r\n\r\n\t@Override\r\n\tpublic boolean equals(Object obj) {\r\n\t\tif (this == obj)\r\n\t\t\treturn true;\r\n\t\tif (obj == null)\r\n\t\t\treturn false;\r\n\t\tif (getClass() != obj.getClass())\r\n\t\t\treturn false;\r\n\t\tPerson other = (Person) obj;\r\n\t\treturn Objects.equals(name, other.name);\r\n\t}\r\n\r\n}\r\n\r\npublic class App {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tTreeMap&lt;Person, Integer&gt; people3 = new TreeMap&lt;&gt;();\r\n\t\tint count = 1;\r\n\t\tpeople3.put(new Person(&quot;sam&quot;), count);\r\n\t\tpeople3.put(new Person(&quot;Tom&quot;), count);\r\n\t\tpeople3.put(new Person(&quot;Bob&quot;), count);\r\n\t\tcount = 5;\r\n\t\tpeople3.put(new Person(&quot;Sam&quot;), count);\r\n\t\tSet&lt;Map.Entry&lt;Person, Integer&gt;&gt; entrySet = people3.entrySet();\r\n\t\tint loop = 0;\r\n\t\tString strFind = &quot;Tom&quot;;\r\n\t\tif (people3.containsKey(new Person(strFind))) {\r\n\t\t\tSystem.out.println(&quot;_How do I get the count for &quot; + strFind + &quot; ?&quot;);\r\n\t\t}\r\n\t\tfor (Entry&lt;Person, Integer&gt; currentEntry : entrySet) {\r\n\t\t\tvar uniqword = currentEntry.getKey();\r\n\t\t\tvar sumcount = currentEntry.getValue();\r\n\t\t\tloop++;\r\n\t\t\tSystem.out.println(&quot;(&quot; + loop + &quot; ) &quot; + uniqword + &quot;: &quot; + sumcount);\r\n\t\t}\r\n\t}\r\n\r\n}\r\n```\r\n","title":"Get containsValue using class comparable java treemap","body":"<p>I'm a newbie.\nQuestion 1- Before adding &quot;Sam&quot; with count=5 to TreeMap, how can I get the count\nof &quot;sam&quot; with a value of 1?\nie Currently &quot;sam&quot; will have a count of 5. I want the count to be 6.</p>\n<p>Question 2- on people3.containsKey, how can I get the &quot;containsValue&quot; or the &quot;count&quot;\nfor that record?</p>\n<p>TIA</p>\n<pre><code>package app;\n\nimport java.util.Map;\nimport java.util.Objects;\nimport java.util.Set;\nimport java.util.TreeMap;\nimport java.util.Map.Entry;\n\nclass Person implements Comparable&lt;Person&gt; {\n    private String name;\n\n    public Person(String name) {\n        this.name = name;\n    }\n\n    public String toString() {\n        return name;\n    }\n\n//  below sorts in alphabetic\n    @Override\n    public int compareTo(Person other) {\n        return this.name.compareToIgnoreCase(other.name);\n    }\n\n    @Override\n    public int hashCode() {\n        return Objects.hash(name);\n    }\n\n    @Override\n    public boolean equals(Object obj) {\n        if (this == obj)\n            return true;\n        if (obj == null)\n            return false;\n        if (getClass() != obj.getClass())\n            return false;\n        Person other = (Person) obj;\n        return Objects.equals(name, other.name);\n    }\n\n}\n\npublic class App {\n\n    public static void main(String[] args) {\n        TreeMap&lt;Person, Integer&gt; people3 = new TreeMap&lt;&gt;();\n        int count = 1;\n        people3.put(new Person(&quot;sam&quot;), count);\n        people3.put(new Person(&quot;Tom&quot;), count);\n        people3.put(new Person(&quot;Bob&quot;), count);\n        count = 5;\n        people3.put(new Person(&quot;Sam&quot;), count);\n        Set&lt;Map.Entry&lt;Person, Integer&gt;&gt; entrySet = people3.entrySet();\n        int loop = 0;\n        String strFind = &quot;Tom&quot;;\n        if (people3.containsKey(new Person(strFind))) {\n            System.out.println(&quot;_How do I get the count for &quot; + strFind + &quot; ?&quot;);\n        }\n        for (Entry&lt;Person, Integer&gt; currentEntry : entrySet) {\n            var uniqword = currentEntry.getKey();\n            var sumcount = currentEntry.getValue();\n            loop++;\n            System.out.println(&quot;(&quot; + loop + &quot; ) &quot; + uniqword + &quot;: &quot; + sumcount);\n        }\n    }\n\n}\n</code></pre>\n"},{"tags":["java","swt","jface","treeviewer"],"comments":[{"owner":{"account_id":3159259,"reputation":109666,"user_id":2670892,"display_name":"greg-449"},"score":0,"creation_date":1649778802,"post_id":71844918,"comment_id":126960067,"body_markdown":"TreeViewer doesn&#39;t support that. Maybe look at [NatTable](https://www.eclipse.org/nattable/)","body":"TreeViewer doesn&#39;t support that. Maybe look at <a href=\"https://www.eclipse.org/nattable/\" rel=\"nofollow noreferrer\">NatTable</a>"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1649800756,"post_id":71844918,"comment_id":126966934,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"owner":{"account_id":24914990,"reputation":1,"user_id":18784056,"display_name":""},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1649775453,"creation_date":1649775453,"question_id":71844918,"body_markdown":"I have create a TreeViewer with data, but the TreeColumn is so much , so I want to ask a question how can freeze the first TreeColumn, thanks","title":"Java SWT/Jface TreeColumn freeze","body":"<p>I have create a TreeViewer with data, but the TreeColumn is so much , so I want to ask a question how can freeze the first TreeColumn, thanks</p>\n"},{"tags":["java","exception","control-flow"],"comments":[{"owner":{"account_id":75652,"reputation":12214,"user_id":216941,"accept_rate":86,"display_name":"Matt Wonlaw"},"score":0,"creation_date":1302724080,"post_id":5654570,"comment_id":6449984,"body_markdown":"I think you are missing the point of exceptions due to being too strict in applying rule 1. Andy puts it well: http://stackoverflow.com/questions/5654570/how-do-i-manage-complex-flow-control-in-java/5654623#5654623","body":"I think you are missing the point of exceptions due to being too strict in applying rule 1. Andy puts it well: <a href=\"http://stackoverflow.com/questions/5654570/how-do-i-manage-complex-flow-control-in-java/5654623#5654623\" title=\"how do i manage complex flow control in java\">stackoverflow.com/questions/5654570/&hellip;</a>"},{"owner":{"account_id":69443,"reputation":85343,"user_id":202009,"accept_rate":79,"display_name":"Andy Thomas"},"score":0,"creation_date":1302725750,"post_id":5654570,"comment_id":6450403,"body_markdown":"If the caller just needs to log what failed, the stack trace in the exception is sometimes sufficient.","body":"If the caller just needs to log what failed, the stack trace in the exception is sometimes sufficient."}],"answers":[{"tags":[],"owner":{"account_id":69443,"reputation":85343,"user_id":202009,"accept_rate":79,"display_name":"Andy Thomas"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1302723410,"creation_date":1302723410,"answer_id":5654623,"question_id":5654570,"body_markdown":"Yes. Use exceptions rather than return codes. You can wrap exceptions in your own, if you like.\r\n\r\nIt is perfectly reasonable to use exceptions for flow control -- in exceptional conditions. The usual recommendation is to avoid their use for *ordinary* flow control. ","title":"How do I manage complex flow control in Java?","body":"<p>Yes. Use exceptions rather than return codes. You can wrap exceptions in your own, if you like.</p>\n\n<p>It is perfectly reasonable to use exceptions for flow control -- in exceptional conditions. The usual recommendation is to avoid their use for <em>ordinary</em> flow control. </p>\n"},{"tags":[],"owner":{"account_id":7492,"reputation":63517,"user_id":13051,"accept_rate":68,"display_name":"JesperE"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1302723441,"creation_date":1302723441,"answer_id":5654630,"question_id":5654570,"body_markdown":"I think your rule &quot;don&#39;t use checked exception unless the client expects to recover&quot; is wrong. It is pretty common to let the caller not recover at all, but instead pass the exception along to its caller, possibly translating the exception to something else.\r\n","title":"How do I manage complex flow control in Java?","body":"<p>I think your rule \"don't use checked exception unless the client expects to recover\" is wrong. It is pretty common to let the caller not recover at all, but instead pass the exception along to its caller, possibly translating the exception to something else.</p>\n"},{"tags":[],"owner":{"account_id":114991,"reputation":69738,"user_id":302139,"accept_rate":75,"display_name":"Edwin Buck"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1302724416,"creation_date":1302723561,"answer_id":5654653,"question_id":5654570,"body_markdown":"You should look into the `doA()`, `doB()`, and `doC()`.  If they are reasonably unlikely to fail, throw an exception when they fail.\r\n\r\n    try {\r\n      doA();\r\n      doB();\r\n      doC();\r\n    } catch (FailureException e) {\r\n      // handle failure\r\n    }\r\n\r\nExamples of unreasonable failures abound, `IOException`, `IllegalParameterException`, etc.\r\n\r\nIf they are reasonably likely to fail\r\n\r\n    if (!doA()) {\r\n      // handle A&#39;s failure\r\n      return;\r\n    }\r\n    if (!doB()) {\r\n      // handle B&#39;s failure\r\n      return;\r\n    }\r\n    if (!doC()) {\r\n      // handle C&#39;s failure\r\n      return;\r\n    }\r\n\r\nExamples of reasonable failures are a bit less emphasized in Java.  Some examples include `read()` returning -1 when there&#39;s nothing more to read.  If your `doA()` is actually named closer to `attemptA()` then perhaps returning a `boolean` indicating the success of the attempt is appropriate.  Think of `add(...)` and `addAll(...)` in the `Collections` interface, they return `true` if the resulting `Collection` was modified.\r\n\r\nA traditional `goto` is not a good choice in most languages, as when reviewing the code, it is practically impossible to know where the code &quot;came from.&quot;  This lack of knowledge of the state prior to entering the `goto` makes it impossible to guarantee a consistent environment before entry to the `goto` block.  Incidentally, this is why a traditional `goto` is not available in Java, and only a limited continuation `goto` is.\r\n\r\nTo covert from a poorly nested structure to one that&#39;s less nested, use a few refactoring techniques:\r\n\r\n    if(doA()){\r\n      if (doB()) {\r\n        if (doC()) { \r\n          // only here do I know it&#39;s good\r\n        } else {\r\n          // I know C failed\r\n        }\r\n      } else {\r\n        // I know B failed\r\n      }\r\n    } else {\r\n      // I know A failed\r\n    }\r\n    return;\r\n\r\nis equivalent to\r\n\r\n    if (doA()) {\r\n      if (doB()) {\r\n        if (doC()) { \r\n          // only here do I know it&#39;s good\r\n        } else {\r\n          // I know C failed\r\n        }\r\n      } else {\r\n        // I know B failed\r\n      }\r\n      return;\r\n    } else {\r\n      // I know A failed\r\n      return;\r\n    }\r\n\r\nwhich is equivalent to\r\n\r\n    if (!doA()) {\r\n      // I know A failed\r\n      return;\r\n    } else {\r\n      if (doB()) {\r\n        if (doC()) { \r\n          // only here do I know it&#39;s good\r\n        } else {\r\n          // I know C failed\r\n        }\r\n      } else {\r\n        // I know B failed\r\n      }\r\n      return;\r\n    }\r\n\r\nIf the code in &quot;I know A failed&quot; includes a return, then you don&#39;t need to worry about code under the condition `doA()` being true falling into the code below; so you can promote the lower block, like so:\r\n\r\n    if (!doA()) {\r\n      // I know A failed\r\n      return;\r\n    }\r\n    if (doB()) {\r\n      if (doC()) { \r\n        // only here do I know it&#39;s good\r\n      } else {\r\n        // I know C failed\r\n      }\r\n    } else {\r\n      // I know B failed\r\n    }\r\n    return;\r\n\r\n\r\n\r\n","title":"How do I manage complex flow control in Java?","body":"<p>You should look into the <code>doA()</code>, <code>doB()</code>, and <code>doC()</code>.  If they are reasonably unlikely to fail, throw an exception when they fail.</p>\n\n<pre><code>try {\n  doA();\n  doB();\n  doC();\n} catch (FailureException e) {\n  // handle failure\n}\n</code></pre>\n\n<p>Examples of unreasonable failures abound, <code>IOException</code>, <code>IllegalParameterException</code>, etc.</p>\n\n<p>If they are reasonably likely to fail</p>\n\n<pre><code>if (!doA()) {\n  // handle A's failure\n  return;\n}\nif (!doB()) {\n  // handle B's failure\n  return;\n}\nif (!doC()) {\n  // handle C's failure\n  return;\n}\n</code></pre>\n\n<p>Examples of reasonable failures are a bit less emphasized in Java.  Some examples include <code>read()</code> returning -1 when there's nothing more to read.  If your <code>doA()</code> is actually named closer to <code>attemptA()</code> then perhaps returning a <code>boolean</code> indicating the success of the attempt is appropriate.  Think of <code>add(...)</code> and <code>addAll(...)</code> in the <code>Collections</code> interface, they return <code>true</code> if the resulting <code>Collection</code> was modified.</p>\n\n<p>A traditional <code>goto</code> is not a good choice in most languages, as when reviewing the code, it is practically impossible to know where the code \"came from.\"  This lack of knowledge of the state prior to entering the <code>goto</code> makes it impossible to guarantee a consistent environment before entry to the <code>goto</code> block.  Incidentally, this is why a traditional <code>goto</code> is not available in Java, and only a limited continuation <code>goto</code> is.</p>\n\n<p>To covert from a poorly nested structure to one that's less nested, use a few refactoring techniques:</p>\n\n<pre><code>if(doA()){\n  if (doB()) {\n    if (doC()) { \n      // only here do I know it's good\n    } else {\n      // I know C failed\n    }\n  } else {\n    // I know B failed\n  }\n} else {\n  // I know A failed\n}\nreturn;\n</code></pre>\n\n<p>is equivalent to</p>\n\n<pre><code>if (doA()) {\n  if (doB()) {\n    if (doC()) { \n      // only here do I know it's good\n    } else {\n      // I know C failed\n    }\n  } else {\n    // I know B failed\n  }\n  return;\n} else {\n  // I know A failed\n  return;\n}\n</code></pre>\n\n<p>which is equivalent to</p>\n\n<pre><code>if (!doA()) {\n  // I know A failed\n  return;\n} else {\n  if (doB()) {\n    if (doC()) { \n      // only here do I know it's good\n    } else {\n      // I know C failed\n    }\n  } else {\n    // I know B failed\n  }\n  return;\n}\n</code></pre>\n\n<p>If the code in \"I know A failed\" includes a return, then you don't need to worry about code under the condition <code>doA()</code> being true falling into the code below; so you can promote the lower block, like so:</p>\n\n<pre><code>if (!doA()) {\n  // I know A failed\n  return;\n}\nif (doB()) {\n  if (doC()) { \n    // only here do I know it's good\n  } else {\n    // I know C failed\n  }\n} else {\n  // I know B failed\n}\nreturn;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":47744,"reputation":5200,"user_id":141522,"accept_rate":94,"display_name":"David Weiser"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1302724625,"creation_date":1302724625,"answer_id":5654862,"question_id":5654570,"body_markdown":"I would use [The State Pattern](http://en.wikipedia.org/wiki/State_pattern).  Doing so can make your code *much* easier to read as you can only see what possible states you can go to from the current state that you&#39;re in.","title":"How do I manage complex flow control in Java?","body":"<p>I would use <a href=\"http://en.wikipedia.org/wiki/State_pattern\" rel=\"nofollow\">The State Pattern</a>.  Doing so can make your code <em>much</em> easier to read as you can only see what possible states you can go to from the current state that you're in.</p>\n"}],"owner":{"account_id":316573,"reputation":29,"user_id":632818,"display_name":"tim p."},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1280,"favorite_count":0,"down_vote_count":1,"up_vote_count":3,"answer_count":4,"score":2,"last_activity_date":1649775381,"creation_date":1302723181,"question_id":5654570,"body_markdown":"I&#39;ve been researching Java flow control and exception handling for a while here and have these generally accepted rules:\r\n\r\n1. don&#39;t use exception handling for flow control\r\n2. avoid checked exceptions unless the client expects to recover (which is a nice way of saying that you&#39;re forcing the client to handle the exception so they might as well try to recover from it?)\r\n\r\nAlong with general rules I try to follow:\r\n\r\n1. if doSomething() fails to &quot;do some thing&quot;, the caller should be made aware of this\r\n2. methods should be concerned with doing one thing\r\n\r\nThis makes for a bad mix in some cases.  I&#39;m finding that I&#39;m catching checked exceptions within methods and returning boolean everywhere and continually having to check successive calls, making something like this:\r\n\r\n    if(doA()){\r\n      if(doB()){\r\n        if(doC()){ \r\n          // only here do I know it&#39;s good\r\n        }else{\r\n          // I know C failed\r\n        }\r\n      }else{\r\n        // I know B failed\r\n      }\r\n    }else{\r\n      // I know A failed\r\n    }\r\n\r\nI&#39;m getting 5-6 nested if-else&#39;s deep in some parts and it&#39;s pretty ugly.  Not to mention managing a bunch of boolean variables to keep track of what worked and what didn&#39;t.\r\n\r\nAny advice?  Would this be a place where &#39;goto&#39; is acceptable?","title":"How do I manage complex flow control in Java?","body":"<p>I've been researching Java flow control and exception handling for a while here and have these generally accepted rules:</p>\n\n<ol>\n<li>don't use exception handling for flow control</li>\n<li>avoid checked exceptions unless the client expects to recover (which is a nice way of saying that you're forcing the client to handle the exception so they might as well try to recover from it?)</li>\n</ol>\n\n<p>Along with general rules I try to follow:</p>\n\n<ol>\n<li>if doSomething() fails to \"do some thing\", the caller should be made aware of this</li>\n<li>methods should be concerned with doing one thing</li>\n</ol>\n\n<p>This makes for a bad mix in some cases.  I'm finding that I'm catching checked exceptions within methods and returning boolean everywhere and continually having to check successive calls, making something like this:</p>\n\n<pre><code>if(doA()){\n  if(doB()){\n    if(doC()){ \n      // only here do I know it's good\n    }else{\n      // I know C failed\n    }\n  }else{\n    // I know B failed\n  }\n}else{\n  // I know A failed\n}\n</code></pre>\n\n<p>I'm getting 5-6 nested if-else's deep in some parts and it's pretty ugly.  Not to mention managing a bunch of boolean variables to keep track of what worked and what didn't.</p>\n\n<p>Any advice?  Would this be a place where 'goto' is acceptable?</p>\n"},{"tags":["java","sql","spring","spring-boot","spring-mvc"],"comments":[{"owner":{"account_id":2324765,"reputation":3694,"user_id":2039546,"display_name":"smail Y."},"score":1,"creation_date":1649753842,"post_id":71839672,"comment_id":126950108,"body_markdown":"Does this answer your question? [How to execute INSERT statement using JdbcTemplate class from Spring Framework](https://stackoverflow.com/questions/5026943/how-to-execute-insert-statement-using-jdbctemplate-class-from-spring-framework)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/5026943/how-to-execute-insert-statement-using-jdbctemplate-class-from-spring-framework\">How to execute INSERT statement using JdbcTemplate class from Spring Framework</a>"}],"answers":[{"tags":[],"owner":{"account_id":13275834,"reputation":29,"user_id":9585226,"display_name":"Rahul Gupta"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649754610,"creation_date":1649754610,"answer_id":71839961,"question_id":71839672,"body_markdown":"Use [jdbcTemplate.update(String sql, Object... args)][1] method:\r\n```\r\njdbcTemplate.update(\r\n    &quot;INSERT INTO schema.tableName (column1, column2) VALUES (?, ?)&quot;,\r\n    var1, var2\r\n);\r\n```\r\n\r\nor [jdbcTemplate.update(String sql, Object[] args, int[] argTypes)][2], if you need to map arguments to SQL types manually:\r\n\r\n```\r\njdbcTemplate.update(\r\n    &quot;INSERT INTO schema.tableName (column1, column2) VALUES (?, ?)&quot;,\r\n    new Object[]{var1, var2}, new Object[]{Types.TYPE_OF_VAR1, Types.TYPE_OF_VAR2}\r\n);\r\n```\r\n\r\n\r\n  [1]: https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/jdbc/core/JdbcTemplate.html#update-java.lang.String-java.lang.Object...-\r\n  [2]: http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/jdbc/core/JdbcTemplate.html#update-java.lang.String-java.lang.Object:A-int:A-","title":"jdbcTemplate query with 5 parameters for insert","body":"<p>Use <a href=\"https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/jdbc/core/JdbcTemplate.html#update-java.lang.String-java.lang.Object...-\" rel=\"nofollow noreferrer\">jdbcTemplate.update(String sql, Object... args)</a> method:</p>\n<pre><code>jdbcTemplate.update(\n    &quot;INSERT INTO schema.tableName (column1, column2) VALUES (?, ?)&quot;,\n    var1, var2\n);\n</code></pre>\n<p>or <a href=\"http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/jdbc/core/JdbcTemplate.html#update-java.lang.String-java.lang.Object:A-int:A-\" rel=\"nofollow noreferrer\">jdbcTemplate.update(String sql, Object[] args, int[] argTypes)</a>, if you need to map arguments to SQL types manually:</p>\n<pre><code>jdbcTemplate.update(\n    &quot;INSERT INTO schema.tableName (column1, column2) VALUES (?, ?)&quot;,\n    new Object[]{var1, var2}, new Object[]{Types.TYPE_OF_VAR1, Types.TYPE_OF_VAR2}\n);\n</code></pre>\n"}],"owner":{"account_id":24132797,"reputation":29,"user_id":18100193,"display_name":"JohnNewman"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":3087,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1649775266,"creation_date":1649753340,"question_id":71839672,"body_markdown":"I am building a Spring application and in my Repository I have to insert an sql query that has 5 parameters and I tried jdbcTemplate.query or queryForList or Map but it gives me error.\r\n\r\nHere is the code:\r\n\r\n   \r\n\r\n    @Repository\r\n    public class BilantErrRepository {\r\n        \r\n        @Autowired\r\n        private DataSource dataSourceMail;\r\n        \r\n        public List&lt;BilantErr&gt; search() {\r\n            \r\n            List&lt;BilantErr&gt; info1 = new ArrayList&lt;&gt;();\r\n            BilantErr bilant = new BilantErr();\r\n            \r\n            JdbcTemplate jdbcTemplate = new JdbcTemplate(this.dataSourceMail);\r\n            String sql = &quot;INSERT into Aaa (cui,an, data_autorizare,operator,motivatie, tip_perioada) VALUES (?,?,sysdate,?,?,?)&quot;;\r\n            info1 = jdbcTemplate.query(sql, bilant.getCui(),bilant.getAn(),bilant.getOperator(),bilant.getOperator(),bilant.getPerioada());\r\n            \r\n            \r\n            return info1;\r\n        }\r\n\r\n    }\r\n\r\nWhat method can I use to do this insert ? Thanks","title":"jdbcTemplate query with 5 parameters for insert","body":"<p>I am building a Spring application and in my Repository I have to insert an sql query that has 5 parameters and I tried jdbcTemplate.query or queryForList or Map but it gives me error.</p>\n<p>Here is the code:</p>\n<pre><code>@Repository\npublic class BilantErrRepository {\n    \n    @Autowired\n    private DataSource dataSourceMail;\n    \n    public List&lt;BilantErr&gt; search() {\n        \n        List&lt;BilantErr&gt; info1 = new ArrayList&lt;&gt;();\n        BilantErr bilant = new BilantErr();\n        \n        JdbcTemplate jdbcTemplate = new JdbcTemplate(this.dataSourceMail);\n        String sql = &quot;INSERT into Aaa (cui,an, data_autorizare,operator,motivatie, tip_perioada) VALUES (?,?,sysdate,?,?,?)&quot;;\n        info1 = jdbcTemplate.query(sql, bilant.getCui(),bilant.getAn(),bilant.getOperator(),bilant.getOperator(),bilant.getPerioada());\n        \n        \n        return info1;\n    }\n\n}\n</code></pre>\n<p>What method can I use to do this insert ? Thanks</p>\n"},{"tags":["java","stream"],"comments":[{"owner":{"account_id":2843847,"reputation":55833,"user_id":2442804,"accept_rate":80,"display_name":"luk2302"},"score":1,"creation_date":1649772699,"post_id":71844177,"comment_id":126957362,"body_markdown":"It calculates the [perfect numbers](https://en.wikipedia.org/wiki/Perfect_number) between 1 and 30, all those numbers where the divisors sum to the number itself.","body":"It calculates the <a href=\"https://en.wikipedia.org/wiki/Perfect_number\" rel=\"nofollow noreferrer\">perfect numbers</a> between 1 and 30, all those numbers where the divisors sum to the number itself."},{"owner":{"account_id":93689,"reputation":415931,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"score":2,"creation_date":1649773168,"post_id":71844177,"comment_id":126957580,"body_markdown":"@KateQuinn your question provides its own examples. Read the wiki article luk provided.","body":"@KateQuinn your question provides its own examples. Read the wiki article luk provided."},{"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"score":2,"creation_date":1649775850,"post_id":71844177,"comment_id":126958810,"body_markdown":"In spite of the fact that it works it is a terrible way of doing it.  One clear example is it doesn&#39;t check running sums to see if the sum has exceeded the source.  Sometimes, streams are not the best solutions.","body":"In spite of the fact that it works it is a terrible way of doing it.  One clear example is it doesn&#39;t check running sums to see if the sum has exceeded the source.  Sometimes, streams are not the best solutions."}],"answers":[{"tags":[],"owner":{"account_id":2843847,"reputation":55833,"user_id":2442804,"accept_rate":80,"display_name":"luk2302"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1649775168,"creation_date":1649773304,"answer_id":71844362,"question_id":71844177,"body_markdown":"    IntStream.range(1,n).filter(i -&gt; n % i == 0).sum() == n\r\n\r\ncalculates all the divisors of `n` by checking if `n` divided by the potential divisor has no remainder (`i -&gt; n % i == 0`). All divisors are then summed and compared with `n` itself.\r\n\r\n    IntStream.range(1,30).filter(n -&gt; ...).boxed().collect(Collectors.toList())\r\n\r\nJust does what I described above for the numbers between 1 and 30 and only keeps those where the comparison is `true`. It therefore calculates all the numbers between 1 and 30 where the divisors sum to the number itself. Those are called [perfect numbers](https://en.wikipedia.org/wiki/Perfect_number). The first two are 6 and 28, followed by 496, ...","title":"What does this line of Java stream mean?","body":"<pre><code>IntStream.range(1,n).filter(i -&gt; n % i == 0).sum() == n\n</code></pre>\n<p>calculates all the divisors of <code>n</code> by checking if <code>n</code> divided by the potential divisor has no remainder (<code>i -&gt; n % i == 0</code>). All divisors are then summed and compared with <code>n</code> itself.</p>\n<pre><code>IntStream.range(1,30).filter(n -&gt; ...).boxed().collect(Collectors.toList())\n</code></pre>\n<p>Just does what I described above for the numbers between 1 and 30 and only keeps those where the comparison is <code>true</code>. It therefore calculates all the numbers between 1 and 30 where the divisors sum to the number itself. Those are called <a href=\"https://en.wikipedia.org/wiki/Perfect_number\" rel=\"nofollow noreferrer\">perfect numbers</a>. The first two are 6 and 28, followed by 496, ...</p>\n"}],"owner":{"account_id":24764575,"reputation":29,"user_id":18648552,"display_name":"Kate Quinn"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":66,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71844362,"answer_count":1,"score":0,"last_activity_date":1649775168,"creation_date":1649772465,"question_id":71844177,"body_markdown":"\r\nSo I have this line of code. It gives me output [6,28].\r\n Do you guys know why? I dont know what kind of numbers was someone trying to print.\r\n\r\n ```\r\nSystem.out.println( IntStream.range(1,30).filter(n -&gt; IntStream.range(1,n).filter(i-&gt;n%i == 0).sum() ==n)\r\n                .boxed().collect(Collectors.toList()));\r\n ```","title":"What does this line of Java stream mean?","body":"<p>So I have this line of code. It gives me output [6,28].\nDo you guys know why? I dont know what kind of numbers was someone trying to print.</p>\n<pre><code>System.out.println( IntStream.range(1,30).filter(n -&gt; IntStream.range(1,n).filter(i-&gt;n%i == 0).sum() ==n)\n               .boxed().collect(Collectors.toList()));\n</code></pre>\n"},{"tags":["java","spring-boot","out-of-memory","netflix-zuul","heap-size"],"comments":[{"owner":{"account_id":180181,"reputation":76380,"user_id":413337,"accept_rate":64,"display_name":"Codo"},"score":1,"creation_date":1569391447,"post_id":58091941,"comment_id":102576661,"body_markdown":"I think case is important. If so, it&#39;s `-Xmx` (instead of `-XMx`), e.g. `-Xmx6g`.","body":"I think case is important. If so, it&#39;s <code>-Xmx</code> (instead of <code>-XMx</code>), e.g. <code>-Xmx6g</code>."},{"owner":{"account_id":4097040,"reputation":51,"user_id":3363502,"display_name":"MURALI"},"score":0,"creation_date":1569504125,"post_id":58091941,"comment_id":102624451,"body_markdown":"I gave with the exact case only. I am just mentioned smaller case here. Sorry for that","body":"I gave with the exact case only. I am just mentioned smaller case here. Sorry for that"}],"owner":{"account_id":4097040,"reputation":51,"user_id":3363502,"display_name":"MURALI"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":467,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1649774712,"creation_date":1569391021,"question_id":58091941,"body_markdown":"[enter image description here][1]\r\n\r\n[![enter image description here][2]][2]\r\n\r\nI have added -Xmx to 6GB but still I am getting this error. When I am trying to upload a large file in Springboot application via Zuul. I can able to upload upto 600 MB file. I need to make it 4 GB.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/YddVi.png\r\n  [2]: https://i.stack.imgur.com/GYbD4.png","title":"Out of Memory error in Netflix zuul (AWS) even I gave 6 GB -Xmx","body":"<p><a href=\"https://i.stack.imgur.com/YddVi.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n\n<p><a href=\"https://i.stack.imgur.com/GYbD4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/GYbD4.png\" alt=\"enter image description here\"></a></p>\n\n<p>I have added -Xmx to 6GB but still I am getting this error. When I am trying to upload a large file in Springboot application via Zuul. I can able to upload upto 600 MB file. I need to make it 4 GB.</p>\n"},{"tags":["java","sql","oracle","resultset","executequery"],"answers":[{"tags":[],"owner":{"account_id":6295472,"reputation":3312,"user_id":4891815,"display_name":"Gnqz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649774501,"creation_date":1649768159,"answer_id":71843153,"question_id":71841724,"body_markdown":"My guess is that the `close()` of your `ResultSet` is failing, which would result in multiple open cursors and eventually hit the max configured open cursor count. Could you modify your code to:\r\n\r\n    Statement stmt = conn.createStatement();\r\n    try \r\n    {\r\n      ResultSet rs = stmt.executeQuery(&quot;SELECT * FROM PERSONS WHERE PERSONJOB = &#39;ADMIN&#39;&quot;);\r\n      try \r\n      {\r\n        while ( rs.next() ) \r\n        {\r\n          String name = rs.getString(1);\r\n          long   id   = rs.getLong(2);\r\n          System.out.println(name);\r\n          System.out.println(id);\r\n        }\r\n      } \r\n      finally \r\n      {\r\n        try \r\n        { \r\n          rs.close(); \r\n        } \r\n        catch (Exception ignore) { }\r\n      }\r\n    } \r\n    finally \r\n    {\r\n      try \r\n      { \r\n        stmt.close(); \r\n      } \r\n      catch (Exception ignore) { }\r\n    }\r\n\r\n**EDIT**: will be good to also clean up the already opened cursors with a combination of:\r\n\r\n     SELECT oc.user_name, oc.sql_text, s.SID, s.SERIAL#\r\n       FROM v$open_cursor oc\r\n          , v$session     s\r\n      WHERE oc.sid = s.sid\r\n        \r\n     EXEC SYS.KILL_SESSION(xxx,xxxxx); \r\n\r\nor restart the DB.","title":"java.sql.SQLException:ORA -01000:maximum open cursors exceeded in JAVA","body":"<p>My guess is that the <code>close()</code> of your <code>ResultSet</code> is failing, which would result in multiple open cursors and eventually hit the max configured open cursor count. Could you modify your code to:</p>\n<pre><code>Statement stmt = conn.createStatement();\ntry \n{\n  ResultSet rs = stmt.executeQuery(&quot;SELECT * FROM PERSONS WHERE PERSONJOB = 'ADMIN'&quot;);\n  try \n  {\n    while ( rs.next() ) \n    {\n      String name = rs.getString(1);\n      long   id   = rs.getLong(2);\n      System.out.println(name);\n      System.out.println(id);\n    }\n  } \n  finally \n  {\n    try \n    { \n      rs.close(); \n    } \n    catch (Exception ignore) { }\n  }\n} \nfinally \n{\n  try \n  { \n    stmt.close(); \n  } \n  catch (Exception ignore) { }\n}\n</code></pre>\n<p><strong>EDIT</strong>: will be good to also clean up the already opened cursors with a combination of:</p>\n<pre><code> SELECT oc.user_name, oc.sql_text, s.SID, s.SERIAL#\n   FROM v$open_cursor oc\n      , v$session     s\n  WHERE oc.sid = s.sid\n    \n EXEC SYS.KILL_SESSION(xxx,xxxxx); \n</code></pre>\n<p>or restart the DB.</p>\n"}],"owner":{"account_id":24912827,"reputation":1,"user_id":18782161,"display_name":"Paakiya"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":224,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1649774501,"creation_date":1649762430,"question_id":71841724,"body_markdown":"I am getting this error when I run my code\r\n\r\nBelow is the code I have used:\r\n\r\n    String sql=&quot;SELECT * FROM PERSONS WHERE PERSONJOB=&#39;ADMIN&#39;&quot;;\r\n    Statement stmt=null;\r\n    ResultSet rs=null;\r\n    try\r\n    {\r\n        stmt=conn.createStatement();\r\n        rs=stmt.executeQuery(sql);\r\n        While(rs.next())\r\n        {\r\n            String name=rs.getString(1);\r\n            long id=rs.getLong(2);\r\n            System.out.println(name);\r\n            System.out.println(id);\r\n        }\r\n    }\r\n    catch(Exception e)\r\n    {\r\n        throw e;\r\n    }\r\n    finally\r\n    {\r\n        rs.close();\r\n        stmt.close();\r\n    }\r\n\r\nI want to reuse the connection, so I didn&#39;t close the connection.\r\nAfter I closed the `ResultSet` and `Statement`, I am getting the &quot;maximum open cursors exceeded&quot; error.\r\nAnyone please help me to solve this error.","title":"java.sql.SQLException:ORA -01000:maximum open cursors exceeded in JAVA","body":"<p>I am getting this error when I run my code</p>\n<p>Below is the code I have used:</p>\n<pre><code>String sql=&quot;SELECT * FROM PERSONS WHERE PERSONJOB='ADMIN'&quot;;\nStatement stmt=null;\nResultSet rs=null;\ntry\n{\n    stmt=conn.createStatement();\n    rs=stmt.executeQuery(sql);\n    While(rs.next())\n    {\n        String name=rs.getString(1);\n        long id=rs.getLong(2);\n        System.out.println(name);\n        System.out.println(id);\n    }\n}\ncatch(Exception e)\n{\n    throw e;\n}\nfinally\n{\n    rs.close();\n    stmt.close();\n}\n</code></pre>\n<p>I want to reuse the connection, so I didn't close the connection.\nAfter I closed the <code>ResultSet</code> and <code>Statement</code>, I am getting the &quot;maximum open cursors exceeded&quot; error.\nAnyone please help me to solve this error.</p>\n"},{"tags":["java","android","encryption","encrypted-shared-preference"],"comments":[{"owner":{"account_id":1654563,"reputation":57569,"user_id":1524450,"display_name":"Michael"},"score":0,"creation_date":1617009292,"post_id":66760328,"comment_id":118170862,"body_markdown":"The signing key is a key that exists on your computer (or maybe an external drive), for the purpose of signing your app. You should keep that key secure, so trying to bundle it inside your app seems like a bad idea. It&#39;s not clear to me why you&#39;re not simply using `MasterKeys.getOrCreate` as in the example from the documentation.","body":"The signing key is a key that exists on your computer (or maybe an external drive), for the purpose of signing your app. You should keep that key secure, so trying to bundle it inside your app seems like a bad idea. It&#39;s not clear to me why you&#39;re not simply using <code>MasterKeys.getOrCreate</code> as in the example from the documentation."},{"owner":{"account_id":1023819,"reputation":1499,"user_id":1033552,"accept_rate":47,"display_name":"user1033552"},"score":0,"creation_date":1629120870,"post_id":66760328,"comment_id":121595690,"body_markdown":"Were you able to resolve this issue? I got the same `FileNotFoundException` when using the sample code from https://developer.android.com/topic/security/data-android-versions","body":"Were you able to resolve this issue? I got the same <code>FileNotFoundException</code> when using the sample code from <a href=\"https://developer.android.com/topic/security/data-android-versions\" rel=\"nofollow noreferrer\">developer.android.com/topic/security/data-android-versions</a>"},{"owner":{"account_id":3108406,"reputation":1530,"user_id":2630728,"accept_rate":56,"display_name":"Viks"},"score":0,"creation_date":1629256699,"post_id":66760328,"comment_id":121636089,"body_markdown":"Did you get the solution? If yes, can you please post the solution?","body":"Did you get the solution? If yes, can you please post the solution?"},{"owner":{"account_id":18470198,"reputation":71,"user_id":13455322,"display_name":"Marco Edoardo Duma"},"score":0,"creation_date":1673603596,"post_id":66760328,"comment_id":132541096,"body_markdown":"meanwhile did someone find the solution?","body":"meanwhile did someone find the solution?"}],"answers":[{"tags":[],"owner":{"account_id":16796850,"reputation":1,"user_id":12143144,"display_name":"Paulo Henrique Teixeira"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1626298294,"creation_date":1626297434,"answer_id":68385211,"question_id":66760328,"body_markdown":"You don&#39;t necessarily need to use keyalias in this case. But I couldn&#39;t use KeyGenParameterSpec so I used KeyScheme and it worked for me. Try using it:\r\n\r\n    MasterKey masterKey = new MasterKey.Builder(this)\r\n                  .setKeyScheme(MasterKey.KeyScheme.AES256_GCM)\r\n                  .build();\r\n\r\nInstead of: \r\n\r\n    MasterKey masterKey = new MasterKey.Builder(this)\r\n                    .setKeyGenParameterSpec(spec)\r\n                    .build();","title":"What key alias need to use in EncryptedSharedPreferences?","body":"<p>You don't necessarily need to use keyalias in this case. But I couldn't use KeyGenParameterSpec so I used KeyScheme and it worked for me. Try using it:</p>\n<pre><code>MasterKey masterKey = new MasterKey.Builder(this)\n              .setKeyScheme(MasterKey.KeyScheme.AES256_GCM)\n              .build();\n</code></pre>\n<p>Instead of:</p>\n<pre><code>MasterKey masterKey = new MasterKey.Builder(this)\n                .setKeyGenParameterSpec(spec)\n                .build();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4888751,"reputation":106,"user_id":3940451,"display_name":"Jorge Mathias"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1649774475,"creation_date":1649774475,"answer_id":71844675,"question_id":66760328,"body_markdown":"Your problem comes from this line:\r\n\r\n    MasterKey masterKey = new MasterKey.Builder(this)\r\n\r\nAccording to the implementation of `MasterKey.Builder()`, if you don&#39;t provide the second parameter that is the key alias\r\n\r\n     public Builder(@NonNull Context context, @NonNull String keyAlias) {\r\n            mContext = context.getApplicationContext();\r\n            mKeyAlias = keyAlias;\r\n        }\r\n\r\nThen the default key alias is being used\r\n\r\n    public Builder(@NonNull Context context) {\r\n            this(context, MasterKey.DEFAULT_MASTER_KEY_ALIAS);\r\n        }\r\nSo once you try to build with a **KeyGenParameterSpec** with a different alias, it is complaining. Make use of the constructor with the key alias as second parameter, then it should work.\r\n \r\nSorry being late answering, I&#39;ve just faced the same problem. I&#39;ve preferred to share this to help others while looking for an answer.","title":"What key alias need to use in EncryptedSharedPreferences?","body":"<p>Your problem comes from this line:</p>\n<pre><code>MasterKey masterKey = new MasterKey.Builder(this)\n</code></pre>\n<p>According to the implementation of <code>MasterKey.Builder()</code>, if you don't provide the second parameter that is the key alias</p>\n<pre><code> public Builder(@NonNull Context context, @NonNull String keyAlias) {\n        mContext = context.getApplicationContext();\n        mKeyAlias = keyAlias;\n    }\n</code></pre>\n<p>Then the default key alias is being used</p>\n<pre><code>public Builder(@NonNull Context context) {\n        this(context, MasterKey.DEFAULT_MASTER_KEY_ALIAS);\n    }\n</code></pre>\n<p>So once you try to build with a <strong>KeyGenParameterSpec</strong> with a different alias, it is complaining. Make use of the constructor with the key alias as second parameter, then it should work.</p>\n<p>Sorry being late answering, I've just faced the same problem. I've preferred to share this to help others while looking for an answer.</p>\n"}],"owner":{"account_id":16113017,"reputation":730,"user_id":11630822,"display_name":"Kousalya"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10628,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"answer_count":2,"score":10,"last_activity_date":1649774475,"creation_date":1616491264,"question_id":66760328,"body_markdown":"[![enter image description here][1]][1]\r\n\r\n  [1]: https://i.stack.imgur.com/QJ6Pf.jpg\r\n\r\n\r\nhow can I use key alias in Encrypted sharedprefernces?\r\nbelow is my Encrypted shared preference\r\n```\r\nKeyGenParameterSpec spec = new KeyGenParameterSpec.Builder(\r\n                    DEFAULT_MASTER_KEY_ALIAS,\r\n                    KeyProperties.PURPOSE_ENCRYPT | KeyProperties.PURPOSE_DECRYPT)\r\n                    .setBlockModes(KeyProperties.BLOCK_MODE_GCM)\r\n                    .setEncryptionPaddings(KeyProperties.ENCRYPTION_PADDING_NONE)\r\n                    .setKeySize(DEFAULT_AES_GCM_MASTER_KEY_SIZE)\r\n                    .build();\r\n\r\n            MasterKey masterKey = new MasterKey.Builder(this)\r\n                    .setKeyGenParameterSpec(spec)\r\n                    .build();\r\n\r\n            SharedPreferences sharedPreferences = EncryptedSharedPreferences.create(this,\r\n                    this.getResources().getString(R.string.app_preferences),\r\n                    masterKey,\r\n                    EncryptedSharedPreferences.PrefKeyEncryptionScheme.AES256_SIV,\r\n                    EncryptedSharedPreferences.PrefValueEncryptionScheme.AES256_GCM\r\n            );\r\n```\r\nI got below exception when implemented this,\r\n```\r\n W/AndroidKeysetManager: keyset not found, will generate a new one\r\n    java.io.FileNotFoundException: can&#39;t read keyset; the pref value __androidx_security_crypto_encrypted_prefs_key_keyset__ does not exist\r\n        at com.google.crypto.tink.integration.android.SharedPrefKeysetReader.readPref(SharedPrefKeysetReader.java:71)\r\n        at com.google.crypto.tink.integration.android.SharedPrefKeysetReader.readEncrypted(SharedPrefKeysetReader.java:89)\r\n        at com.google.crypto.tink.KeysetHandle.read(KeysetHandle.java:105)\r\n        at com.google.crypto.tink.integration.android.AndroidKeysetManager$Builder.read(AndroidKeysetManager.java:311)\r\n        at com.google.crypto.tink.integration.android.AndroidKeysetManager$Builder.readOrGenerateNewKeyset(AndroidKeysetManager.java:287)\r\n        at com.google.crypto.tink.integration.android.AndroidKeysetManager$Builder.build(AndroidKeysetManager.java:238)\r\n        at androidx.security.crypto.EncryptedSharedPreferences.create(EncryptedSharedPreferences.java:155)\r\n        at androidx.security.crypto.EncryptedSharedPreferences.create(EncryptedSharedPreferences.java:120)\r\n```\r\n\r\nI need to replace ```DEFAULT_MASTER_KEY_ALIAS``` with key alias mentioned in that box?\r\nIf yes, then how can I do that without hardcoding?\r\n\r\nI have replaced ```DEFAULT_MASTER_KEY_ALIAS``` with key alias mentioned in Project Structure under modules. Got below exception.\r\n\r\n```\r\njava.lang.IllegalArgumentException: KeyGenParamSpec&#39;s key alias does not match provided alias (_androidx_security_master_key_ vs mykeyalias\r\n```","title":"What key alias need to use in EncryptedSharedPreferences?","body":"<p><a href=\"https://i.stack.imgur.com/QJ6Pf.jpg\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/QJ6Pf.jpg\" alt=\"enter image description here\" /></a></p>\n<p>how can I use key alias in Encrypted sharedprefernces?\nbelow is my Encrypted shared preference</p>\n<pre><code>KeyGenParameterSpec spec = new KeyGenParameterSpec.Builder(\n                    DEFAULT_MASTER_KEY_ALIAS,\n                    KeyProperties.PURPOSE_ENCRYPT | KeyProperties.PURPOSE_DECRYPT)\n                    .setBlockModes(KeyProperties.BLOCK_MODE_GCM)\n                    .setEncryptionPaddings(KeyProperties.ENCRYPTION_PADDING_NONE)\n                    .setKeySize(DEFAULT_AES_GCM_MASTER_KEY_SIZE)\n                    .build();\n\n            MasterKey masterKey = new MasterKey.Builder(this)\n                    .setKeyGenParameterSpec(spec)\n                    .build();\n\n            SharedPreferences sharedPreferences = EncryptedSharedPreferences.create(this,\n                    this.getResources().getString(R.string.app_preferences),\n                    masterKey,\n                    EncryptedSharedPreferences.PrefKeyEncryptionScheme.AES256_SIV,\n                    EncryptedSharedPreferences.PrefValueEncryptionScheme.AES256_GCM\n            );\n</code></pre>\n<p>I got below exception when implemented this,</p>\n<pre><code> W/AndroidKeysetManager: keyset not found, will generate a new one\n    java.io.FileNotFoundException: can't read keyset; the pref value __androidx_security_crypto_encrypted_prefs_key_keyset__ does not exist\n        at com.google.crypto.tink.integration.android.SharedPrefKeysetReader.readPref(SharedPrefKeysetReader.java:71)\n        at com.google.crypto.tink.integration.android.SharedPrefKeysetReader.readEncrypted(SharedPrefKeysetReader.java:89)\n        at com.google.crypto.tink.KeysetHandle.read(KeysetHandle.java:105)\n        at com.google.crypto.tink.integration.android.AndroidKeysetManager$Builder.read(AndroidKeysetManager.java:311)\n        at com.google.crypto.tink.integration.android.AndroidKeysetManager$Builder.readOrGenerateNewKeyset(AndroidKeysetManager.java:287)\n        at com.google.crypto.tink.integration.android.AndroidKeysetManager$Builder.build(AndroidKeysetManager.java:238)\n        at androidx.security.crypto.EncryptedSharedPreferences.create(EncryptedSharedPreferences.java:155)\n        at androidx.security.crypto.EncryptedSharedPreferences.create(EncryptedSharedPreferences.java:120)\n</code></pre>\n<p>I need to replace <code>DEFAULT_MASTER_KEY_ALIAS</code> with key alias mentioned in that box?\nIf yes, then how can I do that without hardcoding?</p>\n<p>I have replaced <code>DEFAULT_MASTER_KEY_ALIAS</code> with key alias mentioned in Project Structure under modules. Got below exception.</p>\n<pre><code>java.lang.IllegalArgumentException: KeyGenParamSpec's key alias does not match provided alias (_androidx_security_master_key_ vs mykeyalias\n</code></pre>\n"},{"tags":["java","maven","maven-install-plugin"],"comments":[{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":1,"creation_date":1649762171,"post_id":71841440,"comment_id":126953049,"body_markdown":"Wrong way to use maven-install-plugin:install-file...define the jar file simply as dependency and it will being downloaded automatically... Furthermore the coordiantes you are using `org.apache.example:httpckient:jar:5.1.3`  are simply wrong... I don&#39;t what you are trying to do?","body":"Wrong way to use maven-install-plugin:install-file...define the jar file simply as dependency and it will being downloaded automatically... Furthermore the coordiantes you are using <code>org.apache.example:httpckient:jar:5.1.3</code>  are simply wrong... I don&#39;t what you are trying to do?"},{"owner":{"account_id":21237556,"reputation":1,"user_id":18202725,"display_name":"bepieper"},"score":0,"creation_date":1649763756,"post_id":71841440,"comment_id":126953656,"body_markdown":"@khmarbaise it&#39;s just a sample jar, I use an internal local jar like base.jar. I know that I could use http client directly.... but that&#39;s not what the question is about! I have corrected the typo in pom. But as I said, in my case it would be an internal company jar like base.jar.","body":"@khmarbaise it&#39;s just a sample jar, I use an internal local jar like base.jar. I know that I could use http client directly.... but that&#39;s not what the question is about! I have corrected the typo in pom. But as I said, in my case it would be an internal company jar like base.jar."},{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1649764448,"post_id":71841440,"comment_id":126953963,"body_markdown":"Please explain more clean what you really like to achieve...and what the purpose of using install plugin is ? You can install every maven project into your local cache via `mvn install` ???","body":"Please explain more clean what you really like to achieve...and what the purpose of using install plugin is ? You can install every maven project into your local cache via <code>mvn install</code> ???"},{"owner":{"account_id":21237556,"reputation":1,"user_id":18202725,"display_name":"bepieper"},"score":0,"creation_date":1649766648,"post_id":71841440,"comment_id":126954801,"body_markdown":"@khmarbaise My maven project is dependent on several non maven projects. Since there is no repository management solution like Nexus.\nI need to install these dependencies/artifacts locally for now, using the Maven plugin.\n\nThe only problem: the mvn clean install command skips the install-file goal, which leads to an error when resolving the dependencies. \nHowever, mvn clean and then mvn install works without any problems! My question is: why?\nBest regards","body":"@khmarbaise My maven project is dependent on several non maven projects. Since there is no repository management solution like Nexus. I need to install these dependencies/artifacts locally for now, using the Maven plugin.  The only problem: the mvn clean install command skips the install-file goal, which leads to an error when resolving the dependencies.  However, mvn clean and then mvn install works without any problems! My question is: why? Best regards"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1649797759,"post_id":71841440,"comment_id":126966209,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."}],"owner":{"account_id":21237556,"reputation":1,"user_id":18202725,"display_name":"bepieper"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1023,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1649774142,"creation_date":1649761112,"question_id":71841440,"body_markdown":"I&#39;m trying to install company internal local dependencies into the .m2 repo; with the maven install plugin, before building the ear.\r\n\r\nFor this example I use org.apache dependencies, so that everyone can rebuild it for testing independently from the internal company libs\r\n\r\nWhen I run `mvn clean install` the plugin goal `install-file` is not executed correct. It produces the error message, that it could not resolve dependencies, which is normal, because they are not installed to local repo before.\r\n\r\nHowever when I run:\r\n\r\n 1. `mvn clean`\r\n 2. `mvn install` \r\n\r\n**separately** it works like expected and installs the dependencies before package, etc.\r\n\r\n    [INFO] Installing C:\\Windows\\TEMP\\mvninstall6283951176974866121.pom to C:\\Users\\XYZ\\.m2\\repository\\org\\apache\\example\\httpcore\\5.1.3\\httpcore-5.1.3.pom\r\n    [INFO] \r\n    [INFO] --- maven-install-plugin:2.5.1:install-file (install-jar-2) @ install_multiple_local_dependencies ---\r\n    [INFO] Installing C:\\_work\\_workspaces\\ReportserviceEAR\\install_multiple_local_dependencies\\libs\\httpclient5-5.1.3.jar to C:\\Users\\XYZ\\.m2\\repository\\org\\apache\\example\\httpclient\\5.1.3\\httpclient-5.1.3.jar\r\n    [INFO] Installing C:\\Windows\\TEMP\\mvninstall15901936683612080025.pom to C:\\Users\\XYZ\\.m2\\repository\\org\\apache\\example\\httpclient\\5.1.3\\httpclient-5.1.3.pom\r\n    [INFO] ------------------------------------------------------------------------\r\n    [INFO] BUILD SUCCESS\r\n    [INFO] ------------------------------------------------------------------------\r\n    [INFO] Total time: 4.757 s\r\n    [INFO] Finished at: 2022-04-12T12:06:15+02:00\r\n    [INFO] Final Memory: 9M/40M\r\n    [INFO] ------------------------------------------------------------------------\r\n\r\n### I want to archive this with only one command: `mvn clean install` is this possible or do I need to run the clean phase explicitly?\r\n\r\nThanks in advance for any help.\r\n\r\n**Setup**\r\n- Maven 3.8.4\r\n- Java 1.8\r\n- Maven install plugin 2.5.1\r\n\r\n**Example POM:**\r\n\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n        xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n        xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven- \r\n    4.0.0.xsd&quot;&gt;\r\n        &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n        &lt;groupId&gt;com.example&lt;/groupId&gt;\r\n        &lt;artifactId&gt;install_multiple_local_dependencies&lt;/artifactId&gt;\r\n        &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n        &lt;name&gt;Example Project&lt;/name&gt;\r\n        &lt;description&gt;Install multiple dependencies&lt;/description&gt;\r\n        &lt;properties&gt;\r\n            &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\r\n            &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\r\n        &lt;/properties&gt;\r\n        &lt;dependencies&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.apache.example&lt;/groupId&gt;\r\n                &lt;artifactId&gt;httpcore&lt;/artifactId&gt;\r\n                &lt;version&gt;5.1.3&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.apache.example&lt;/groupId&gt;\r\n                &lt;artifactId&gt;httpclient&lt;/artifactId&gt;\r\n                &lt;version&gt;5.1.3&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n        &lt;/dependencies&gt;\r\n        &lt;build&gt;\r\n            &lt;pluginManagement&gt;\r\n                &lt;plugins&gt;\r\n                    &lt;plugin&gt;\r\n                        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                        &lt;artifactId&gt;maven-install-plugin&lt;/artifactId&gt;\r\n                        &lt;version&gt;2.5.1&lt;/version&gt;\r\n                        &lt;executions&gt;\r\n                            &lt;execution&gt;\r\n                                &lt;id&gt;install-jar-1&lt;/id&gt;\r\n                                &lt;goals&gt;\r\n                                    &lt;goal&gt;install-file&lt;/goal&gt;\r\n                                &lt;/goals&gt;\r\n                                &lt;phase&gt;clean&lt;/phase&gt;\r\n                                &lt;configuration&gt;\r\n                                    &lt;groupId&gt;org.apache.example&lt;/groupId&gt;\r\n                                    &lt;artifactId&gt;httpcore&lt;/artifactId&gt;\r\n                                    &lt;version&gt;5.1.3&lt;/version&gt;\r\n                                    &lt;packaging&gt;jar&lt;/packaging&gt;\r\n                                    &lt;file&gt;${basedir}/libs/httpcore5-5.1.3.jar&lt;/file&gt;\r\n                                    &lt;generatePom&gt;true&lt;/generatePom&gt;\r\n                                &lt;/configuration&gt;\r\n                            &lt;/execution&gt;\r\n                            &lt;execution&gt;\r\n                                &lt;id&gt;install-jar-2&lt;/id&gt;\r\n                                &lt;goals&gt;\r\n                                    &lt;goal&gt;install-file&lt;/goal&gt;\r\n                                &lt;/goals&gt;\r\n                                &lt;phase&gt;clean&lt;/phase&gt;\r\n                                &lt;configuration&gt;\r\n                                    &lt;groupId&gt;org.apache.example&lt;/groupId&gt;\r\n                                    &lt;artifactId&gt;httpclient&lt;/artifactId&gt;\r\n                                    &lt;version&gt;5.1.3&lt;/version&gt;\r\n                                    &lt;packaging&gt;jar&lt;/packaging&gt;\r\n                                    &lt;file&gt;${basedir}/libs/httpclient5-5.1.3.jar&lt;/file&gt;\r\n                                    &lt;generatePom&gt;true&lt;/generatePom&gt;\r\n                                &lt;/configuration&gt;\r\n                            &lt;/execution&gt;\r\n                        &lt;/executions&gt;\r\n                    &lt;/plugin&gt;\r\n                &lt;/plugins&gt;\r\n            &lt;/pluginManagement&gt;\r\n        &lt;/build&gt;\r\n    &lt;/project&gt;\r\n\r\n**Error Message:**\r\n\r\n    $ mvn clean install\r\n    [INFO] Scanning for projects...\r\n    [INFO]\r\n    [INFO] ------------------------------------------------------------------------\r\n    [INFO] Building Example Project 0.0.1-SNAPSHOT\r\n    [INFO] ------------------------------------------------------------------------\r\n    Downloading: https://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-clean- \r\n    plugin/2.5/maven-clean-plugin-2.5.pom\r\n    Downloaded: https://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-clean- \r\n    plugin/2.5/maven-clean-plugin-2.5.pom (4 KB at 6.9 KB/sec)\r\n    Downloading: https://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven- \r\n    plugins/22/maven-plugins-22.pom\r\n    Downloaded: https://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven- \r\n    plugins/22/maven-plugins-22.pom (13 KB at 181.9 KB/sec)\r\n    Downloading: https://repo.maven.apache.org/maven2/org/apache/maven/maven-parent/21/maven- \r\n    parent-21.pom\r\n    Downloaded: https://repo.maven.apache.org/maven2/org/apache/maven/maven-parent/21/maven- \r\n    parent-21.pom (26 KB at 352.6 KB/sec)\r\n    Downloading: https://repo.maven.apache.org/maven2/org/apache/apache/10/apache-10.pom\r\n    Downloaded: https://repo.maven.apache.org/maven2/org/apache/apache/10/apache-10.pom (15 KB \r\n    at \r\n    206.5 KB/sec)\r\n    Downloading: https://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-clean- \r\n    plugin/2.5/maven-clean-plugin-2.5.jar\r\n    Downloaded: https://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-clean- \r\n    plugin/2.5/maven-clean-plugin-2.5.jar (25 KB at 338.8 KB/sec)\r\n    Downloading: https://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-install- \r\n    plugin/2.5.1/maven-install-plugin-2.5.1.pom\r\n    Downloaded: https://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-install- \r\n    plugin/2.5.1/maven-install-plugin-2.5.1.pom (8 KB at 106.2 KB/sec)\r\n    Downloading: https://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven- \r\n    plugins/24/maven-plugins-24.pom\r\n    Downloaded: https://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven- \r\n    plugins/24/maven-plugins-24.pom (11 KB at 162.3 KB/sec)\r\n    Downloading: https://repo.maven.apache.org/maven2/org/apache/maven/maven-parent/23/maven- \r\n    parent-23.pom\r\n    Downloaded: https://repo.maven.apache.org/maven2/org/apache/maven/maven-parent/23/maven- \r\n    parent-23.pom (32 KB at 402.8 KB/sec)\r\n    Downloading: https://repo.maven.apache.org/maven2/org/apache/apache/13/apache-13.pom\r\n    Downloaded: https://repo.maven.apache.org/maven2/org/apache/apache/13/apache-13.pom (14 KB \r\n    at \r\n    206.8 KB/sec)\r\n    Downloading: https://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-install- \r\n    plugin/2.5.1/maven-install-plugin-2.5.1.jar\r\n    Downloaded: https://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-install- \r\n    plugin/2.5.1/maven-install-plugin-2.5.1.jar (33 KB at 382.3 KB/sec)\r\n    Downloading: https://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven- \r\n    resources- \r\n    plugin/2.6/maven-resources-plugin-2.6.pom\r\n    Downloaded: https://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-resources- \r\n    plugin/2.6/maven-resources-plugin-2.6.pom (8 KB at 120.1 KB/sec)\r\n    Downloading: https://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven- \r\n    plugins/23/maven-plugins-23.pom\r\n    Downloaded: https://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven- \r\n    plugins/23/maven-plugins-23.pom (9 KB at 123.0 KB/sec)\r\n    Downloading: https://repo.maven.apache.org/maven2/org/apache/maven/maven-parent/22/maven- \r\n    parent-22.pom\r\n    Downloaded: https://repo.maven.apache.org/maven2/org/apache/maven/maven-parent/22/maven- \r\n    parent-22.pom (30 KB at 363.1 KB/sec)\r\n    Downloading: https://repo.maven.apache.org/maven2/org/apache/apache/11/apache-11.pom\r\n    Downloaded: https://repo.maven.apache.org/maven2/org/apache/apache/11/apache-11.pom (15 KB \r\n    at \r\n    222.5 KB/sec)\r\n    Downloading: https://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven- \r\n    resources- \r\n    plugin/2.6/maven-resources-plugin-2.6.jar\r\n    Downloaded: https://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-resources- \r\n    plugin/2.6/maven-resources-plugin-2.6.jar (29 KB at 343.2 KB/sec)\r\n    Downloading: https://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-compiler- \r\n    plugin/3.1/maven-compiler-plugin-3.1.pom\r\n    Downloaded: https://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-compiler- \r\n    plugin/3.1/maven-compiler-plugin-3.1.pom (10 KB at 155.8 KB/sec)\r\n    Downloading: https://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-compiler- \r\n    plugin/3.1/maven-compiler-plugin-3.1.jar\r\n    Downloaded: https://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-compiler- \r\n    plugin/3.1/maven-compiler-plugin-3.1.jar (42 KB at 499.3 KB/sec)\r\n    Downloading: https://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-surefire- \r\n    plugin/2.12.4/maven-surefire-plugin-2.12.4.pom\r\n    Downloaded: https://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-surefire- \r\n    plugin/2.12.4/maven-surefire-plugin-2.12.4.pom (11 KB at 155.0 KB/sec)\r\n    Downloading: \r\n    https://repo.maven.apache.org/maven2/org/apache/maven/surefire/surefire/2.12.4/surefire- \r\n    2.12.4.pom\r\n    Downloaded: \r\n    https://repo.maven.apache.org/maven2/org/apache/maven/surefire/surefire/2.12.4/surefire- \r\n    2.12.4.pom (14 KB at 204.0 KB/sec)\r\n    Downloading: https://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-surefire- \r\n    plugin/2.12.4/maven-surefire-plugin-2.12.4.jar\r\n    Downloaded: https://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-surefire- \r\n    plugin/2.12.4/maven-surefire-plugin-2.12.4.jar (30 KB at 431.1 KB/sec)\r\n    Downloading: https://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-jar- \r\n    plugin/2.4/maven-jar-plugin-2.4.pom\r\n    Downloaded: https://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-jar- \r\n    plugin/2.4/maven-jar-plugin-2.4.pom (6 KB at 71.2 KB/sec)\r\n    Downloading: https://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-jar- \r\n    plugin/2.4/maven-jar-plugin-2.4.jar\r\n    Downloaded: https://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-jar- \r\n    plugin/2.4/maven-jar-plugin-2.4.jar (34 KB at 420.6 KB/sec)\r\n    Downloading: \r\n    https://repo.maven.apache.org/maven2/org/apache/example/httpcore/5.1.3/httpcore- \r\n    5.1.3.pom\r\n    [WARNING] The POM for org.apache.example:httpcore:jar:5.1.3 is missing, no dependency \r\n    information available\r\n    Downloading: \r\n    https://repo.maven.apache.org/maven2/org/apache/example/httpckient/5.1.3/httpckient- \r\n    5.1.3.pom\r\n    [WARNING] The POM for org.apache.example:httpckient:jar:5.1.3 is missing, no dependency \r\n    information available\r\n    Downloading: \r\n    https://repo.maven.apache.org/maven2/org/apache/example/httpcore/5.1.3/httpcore- \r\n    5.1.3.jar\r\n    Downloading: \r\n    https://repo.maven.apache.org/maven2/org/apache/example/httpckient/5.1.3/httpckient- \r\n    5.1.3.jar\r\n    [INFO] ------------------------------------------------------------------------\r\n    [INFO] BUILD FAILURE\r\n    [INFO] ------------------------------------------------------------------------\r\n    [INFO] Total time: 3.323 s\r\n    [INFO] Finished at: 2022-04-12T11:31:07+02:00\r\n    [INFO] Final Memory: 9M/40M\r\n    [INFO] ------------------------------------------------------------------------\r\n    [ERROR] Failed to execute goal on project install_multiple_local_dependencies: Could not \r\n    resolve dependencies for project \r\n    com.example:install_multiple_local_dependencies:jar:0.0.1- \r\n    SNAPSHOT: The following artifacts could not be resolved: \r\n    org.apache.example:httpcore:jar:5.1.3, org.apache.example:httpckient:jar:5.1.3: Could not \r\n    find \r\n    artifact org.apache.example:httpcore:jar:5.1.3 in central \r\n    (https://repo.maven.apache.org/maven2) -&gt; [Help 1]\r\n","title":"Maven Install Plugin fails: Could not resolve dependencies","body":"<p>I'm trying to install company internal local dependencies into the .m2 repo; with the maven install plugin, before building the ear.</p>\n<p>For this example I use org.apache dependencies, so that everyone can rebuild it for testing independently from the internal company libs</p>\n<p>When I run <code>mvn clean install</code> the plugin goal <code>install-file</code> is not executed correct. It produces the error message, that it could not resolve dependencies, which is normal, because they are not installed to local repo before.</p>\n<p>However when I run:</p>\n<ol>\n<li><code>mvn clean</code></li>\n<li><code>mvn install</code></li>\n</ol>\n<p><strong>separately</strong> it works like expected and installs the dependencies before package, etc.</p>\n<pre><code>[INFO] Installing C:\\Windows\\TEMP\\mvninstall6283951176974866121.pom to C:\\Users\\XYZ\\.m2\\repository\\org\\apache\\example\\httpcore\\5.1.3\\httpcore-5.1.3.pom\n[INFO] \n[INFO] --- maven-install-plugin:2.5.1:install-file (install-jar-2) @ install_multiple_local_dependencies ---\n[INFO] Installing C:\\_work\\_workspaces\\ReportserviceEAR\\install_multiple_local_dependencies\\libs\\httpclient5-5.1.3.jar to C:\\Users\\XYZ\\.m2\\repository\\org\\apache\\example\\httpclient\\5.1.3\\httpclient-5.1.3.jar\n[INFO] Installing C:\\Windows\\TEMP\\mvninstall15901936683612080025.pom to C:\\Users\\XYZ\\.m2\\repository\\org\\apache\\example\\httpclient\\5.1.3\\httpclient-5.1.3.pom\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD SUCCESS\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time: 4.757 s\n[INFO] Finished at: 2022-04-12T12:06:15+02:00\n[INFO] Final Memory: 9M/40M\n[INFO] ------------------------------------------------------------------------\n</code></pre>\n<h3>I want to archive this with only one command: <code>mvn clean install</code> is this possible or do I need to run the clean phase explicitly?</h3>\n<p>Thanks in advance for any help.</p>\n<p><strong>Setup</strong></p>\n<ul>\n<li>Maven 3.8.4</li>\n<li>Java 1.8</li>\n<li>Maven install plugin 2.5.1</li>\n</ul>\n<p><strong>Example POM:</strong></p>\n<pre><code>&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven- \n4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;groupId&gt;com.example&lt;/groupId&gt;\n    &lt;artifactId&gt;install_multiple_local_dependencies&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;Example Project&lt;/name&gt;\n    &lt;description&gt;Install multiple dependencies&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\n        &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.example&lt;/groupId&gt;\n            &lt;artifactId&gt;httpcore&lt;/artifactId&gt;\n            &lt;version&gt;5.1.3&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.example&lt;/groupId&gt;\n            &lt;artifactId&gt;httpclient&lt;/artifactId&gt;\n            &lt;version&gt;5.1.3&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n    &lt;build&gt;\n        &lt;pluginManagement&gt;\n            &lt;plugins&gt;\n                &lt;plugin&gt;\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                    &lt;artifactId&gt;maven-install-plugin&lt;/artifactId&gt;\n                    &lt;version&gt;2.5.1&lt;/version&gt;\n                    &lt;executions&gt;\n                        &lt;execution&gt;\n                            &lt;id&gt;install-jar-1&lt;/id&gt;\n                            &lt;goals&gt;\n                                &lt;goal&gt;install-file&lt;/goal&gt;\n                            &lt;/goals&gt;\n                            &lt;phase&gt;clean&lt;/phase&gt;\n                            &lt;configuration&gt;\n                                &lt;groupId&gt;org.apache.example&lt;/groupId&gt;\n                                &lt;artifactId&gt;httpcore&lt;/artifactId&gt;\n                                &lt;version&gt;5.1.3&lt;/version&gt;\n                                &lt;packaging&gt;jar&lt;/packaging&gt;\n                                &lt;file&gt;${basedir}/libs/httpcore5-5.1.3.jar&lt;/file&gt;\n                                &lt;generatePom&gt;true&lt;/generatePom&gt;\n                            &lt;/configuration&gt;\n                        &lt;/execution&gt;\n                        &lt;execution&gt;\n                            &lt;id&gt;install-jar-2&lt;/id&gt;\n                            &lt;goals&gt;\n                                &lt;goal&gt;install-file&lt;/goal&gt;\n                            &lt;/goals&gt;\n                            &lt;phase&gt;clean&lt;/phase&gt;\n                            &lt;configuration&gt;\n                                &lt;groupId&gt;org.apache.example&lt;/groupId&gt;\n                                &lt;artifactId&gt;httpclient&lt;/artifactId&gt;\n                                &lt;version&gt;5.1.3&lt;/version&gt;\n                                &lt;packaging&gt;jar&lt;/packaging&gt;\n                                &lt;file&gt;${basedir}/libs/httpclient5-5.1.3.jar&lt;/file&gt;\n                                &lt;generatePom&gt;true&lt;/generatePom&gt;\n                            &lt;/configuration&gt;\n                        &lt;/execution&gt;\n                    &lt;/executions&gt;\n                &lt;/plugin&gt;\n            &lt;/plugins&gt;\n        &lt;/pluginManagement&gt;\n    &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n<p><strong>Error Message:</strong></p>\n<pre><code>$ mvn clean install\n[INFO] Scanning for projects...\n[INFO]\n[INFO] ------------------------------------------------------------------------\n[INFO] Building Example Project 0.0.1-SNAPSHOT\n[INFO] ------------------------------------------------------------------------\nDownloading: https://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-clean- \nplugin/2.5/maven-clean-plugin-2.5.pom\nDownloaded: https://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-clean- \nplugin/2.5/maven-clean-plugin-2.5.pom (4 KB at 6.9 KB/sec)\nDownloading: https://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven- \nplugins/22/maven-plugins-22.pom\nDownloaded: https://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven- \nplugins/22/maven-plugins-22.pom (13 KB at 181.9 KB/sec)\nDownloading: https://repo.maven.apache.org/maven2/org/apache/maven/maven-parent/21/maven- \nparent-21.pom\nDownloaded: https://repo.maven.apache.org/maven2/org/apache/maven/maven-parent/21/maven- \nparent-21.pom (26 KB at 352.6 KB/sec)\nDownloading: https://repo.maven.apache.org/maven2/org/apache/apache/10/apache-10.pom\nDownloaded: https://repo.maven.apache.org/maven2/org/apache/apache/10/apache-10.pom (15 KB \nat \n206.5 KB/sec)\nDownloading: https://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-clean- \nplugin/2.5/maven-clean-plugin-2.5.jar\nDownloaded: https://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-clean- \nplugin/2.5/maven-clean-plugin-2.5.jar (25 KB at 338.8 KB/sec)\nDownloading: https://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-install- \nplugin/2.5.1/maven-install-plugin-2.5.1.pom\nDownloaded: https://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-install- \nplugin/2.5.1/maven-install-plugin-2.5.1.pom (8 KB at 106.2 KB/sec)\nDownloading: https://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven- \nplugins/24/maven-plugins-24.pom\nDownloaded: https://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven- \nplugins/24/maven-plugins-24.pom (11 KB at 162.3 KB/sec)\nDownloading: https://repo.maven.apache.org/maven2/org/apache/maven/maven-parent/23/maven- \nparent-23.pom\nDownloaded: https://repo.maven.apache.org/maven2/org/apache/maven/maven-parent/23/maven- \nparent-23.pom (32 KB at 402.8 KB/sec)\nDownloading: https://repo.maven.apache.org/maven2/org/apache/apache/13/apache-13.pom\nDownloaded: https://repo.maven.apache.org/maven2/org/apache/apache/13/apache-13.pom (14 KB \nat \n206.8 KB/sec)\nDownloading: https://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-install- \nplugin/2.5.1/maven-install-plugin-2.5.1.jar\nDownloaded: https://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-install- \nplugin/2.5.1/maven-install-plugin-2.5.1.jar (33 KB at 382.3 KB/sec)\nDownloading: https://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven- \nresources- \nplugin/2.6/maven-resources-plugin-2.6.pom\nDownloaded: https://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-resources- \nplugin/2.6/maven-resources-plugin-2.6.pom (8 KB at 120.1 KB/sec)\nDownloading: https://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven- \nplugins/23/maven-plugins-23.pom\nDownloaded: https://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven- \nplugins/23/maven-plugins-23.pom (9 KB at 123.0 KB/sec)\nDownloading: https://repo.maven.apache.org/maven2/org/apache/maven/maven-parent/22/maven- \nparent-22.pom\nDownloaded: https://repo.maven.apache.org/maven2/org/apache/maven/maven-parent/22/maven- \nparent-22.pom (30 KB at 363.1 KB/sec)\nDownloading: https://repo.maven.apache.org/maven2/org/apache/apache/11/apache-11.pom\nDownloaded: https://repo.maven.apache.org/maven2/org/apache/apache/11/apache-11.pom (15 KB \nat \n222.5 KB/sec)\nDownloading: https://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven- \nresources- \nplugin/2.6/maven-resources-plugin-2.6.jar\nDownloaded: https://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-resources- \nplugin/2.6/maven-resources-plugin-2.6.jar (29 KB at 343.2 KB/sec)\nDownloading: https://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-compiler- \nplugin/3.1/maven-compiler-plugin-3.1.pom\nDownloaded: https://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-compiler- \nplugin/3.1/maven-compiler-plugin-3.1.pom (10 KB at 155.8 KB/sec)\nDownloading: https://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-compiler- \nplugin/3.1/maven-compiler-plugin-3.1.jar\nDownloaded: https://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-compiler- \nplugin/3.1/maven-compiler-plugin-3.1.jar (42 KB at 499.3 KB/sec)\nDownloading: https://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-surefire- \nplugin/2.12.4/maven-surefire-plugin-2.12.4.pom\nDownloaded: https://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-surefire- \nplugin/2.12.4/maven-surefire-plugin-2.12.4.pom (11 KB at 155.0 KB/sec)\nDownloading: \nhttps://repo.maven.apache.org/maven2/org/apache/maven/surefire/surefire/2.12.4/surefire- \n2.12.4.pom\nDownloaded: \nhttps://repo.maven.apache.org/maven2/org/apache/maven/surefire/surefire/2.12.4/surefire- \n2.12.4.pom (14 KB at 204.0 KB/sec)\nDownloading: https://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-surefire- \nplugin/2.12.4/maven-surefire-plugin-2.12.4.jar\nDownloaded: https://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-surefire- \nplugin/2.12.4/maven-surefire-plugin-2.12.4.jar (30 KB at 431.1 KB/sec)\nDownloading: https://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-jar- \nplugin/2.4/maven-jar-plugin-2.4.pom\nDownloaded: https://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-jar- \nplugin/2.4/maven-jar-plugin-2.4.pom (6 KB at 71.2 KB/sec)\nDownloading: https://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-jar- \nplugin/2.4/maven-jar-plugin-2.4.jar\nDownloaded: https://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-jar- \nplugin/2.4/maven-jar-plugin-2.4.jar (34 KB at 420.6 KB/sec)\nDownloading: \nhttps://repo.maven.apache.org/maven2/org/apache/example/httpcore/5.1.3/httpcore- \n5.1.3.pom\n[WARNING] The POM for org.apache.example:httpcore:jar:5.1.3 is missing, no dependency \ninformation available\nDownloading: \nhttps://repo.maven.apache.org/maven2/org/apache/example/httpckient/5.1.3/httpckient- \n5.1.3.pom\n[WARNING] The POM for org.apache.example:httpckient:jar:5.1.3 is missing, no dependency \ninformation available\nDownloading: \nhttps://repo.maven.apache.org/maven2/org/apache/example/httpcore/5.1.3/httpcore- \n5.1.3.jar\nDownloading: \nhttps://repo.maven.apache.org/maven2/org/apache/example/httpckient/5.1.3/httpckient- \n5.1.3.jar\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD FAILURE\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time: 3.323 s\n[INFO] Finished at: 2022-04-12T11:31:07+02:00\n[INFO] Final Memory: 9M/40M\n[INFO] ------------------------------------------------------------------------\n[ERROR] Failed to execute goal on project install_multiple_local_dependencies: Could not \nresolve dependencies for project \ncom.example:install_multiple_local_dependencies:jar:0.0.1- \nSNAPSHOT: The following artifacts could not be resolved: \norg.apache.example:httpcore:jar:5.1.3, org.apache.example:httpckient:jar:5.1.3: Could not \nfind \nartifact org.apache.example:httpcore:jar:5.1.3 in central \n(https://repo.maven.apache.org/maven2) -&gt; [Help 1]\n</code></pre>\n"},{"tags":["java","hadoop","mapreduce"],"comments":[{"owner":{"account_id":377596,"reputation":5231,"user_id":729819,"accept_rate":83,"display_name":"Ben Watson"},"score":1,"creation_date":1649783857,"post_id":71844578,"comment_id":126961995,"body_markdown":"I&#39;m not a fan of your date formats - the standard would be YYYY-MM-DD. This will ensure correct sorting.","body":"I&#39;m not a fan of your date formats - the standard would be YYYY-MM-DD. This will ensure correct sorting."},{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1649835386,"post_id":71844578,"comment_id":126973324,"body_markdown":"As stated, fix the formatting, otherwise you need to force data into one reducer to sort anything, which defeats the purpose of mapreduce. Also, no one generally writes mapreduce code anymore. Is this a requirement for some assignment?","body":"As stated, fix the formatting, otherwise you need to force data into one reducer to sort anything, which defeats the purpose of mapreduce. Also, no one generally writes mapreduce code anymore. Is this a requirement for some assignment?"}],"owner":{"account_id":24914709,"reputation":1,"user_id":18783816,"display_name":" "},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":25,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1649774072,"creation_date":1649774072,"question_id":71844578,"body_markdown":"I have a weather dataset. I process it and find the average temperature value on a certain day, but when I try to go beyond the month, the data comes into the reducer in a different order, and I need to save the order for further temperature calculations for the week, month ... What am I doing wrong ? How can I keep order?\r\nDataset example: \r\n(MM/DD/YY) temp\r\n3/1/11     5\r\n3/1/11     4\r\n3/8/11     7\r\n3/8/11     6\r\n4/1/11     9\r\n5/1/11    12\r\nIn reducer I recieve keys in this order:\r\n3/1/11\r\n4/1/11\r\n5/1/11\r\n3/8/11\r\nMy Map:\r\n       \r\n\r\n         protected void map(LongWritable key, Text value, Context context) throws IOException, InterruptedException {\r\n        try {\r\n            //MM/DD/YYYY\r\n            String userDateBefore = &quot;03/01/11&quot;;\r\n            String userDateAfter = &quot;05/01/11&quot;;\r\n            SimpleDateFormat format = new SimpleDateFormat();\r\n            format.applyPattern(&quot;MM/dd/yy&quot;);\r\n            Date userDateBeforeFormatted = null;\r\n            try {\r\n                userDateBeforeFormatted = format.parse(userDateBefore);\r\n            } catch (ParseException e) {\r\n                e.printStackTrace();\r\n            }\r\n            Date userDateAfterFormatted = null;\r\n            try {\r\n                userDateAfterFormatted = format.parse(userDateAfter);\r\n            } catch (ParseException e) {\r\n                e.printStackTrace();\r\n            }\r\n            String[] strArr = value.toString().split(&quot;,&quot;);\r\n            String date = strArr[2];\r\n            Date incomeDate = null;\r\n            try {\r\n                incomeDate = format.parse(date);\r\n            } catch (ParseException e) {\r\n                e.printStackTrace();\r\n            }\r\n            SimpleDateFormat dateFormat;\r\n\r\n            Text dateText;\r\n            float airTemp;\r\n            if(incomeDate.before(userDateAfterFormatted) || incomeDate.equals(userDateAfterFormatted)\r\n                    &amp;&amp; incomeDate.after(userDateBeforeFormatted) || incomeDate.equals(userDateBeforeFormatted)) {\r\n                dateFormat = new SimpleDateFormat(&quot;dd/MM/yy&quot;);\r\n                dateText = new Text(dateFormat.format(incomeDate));\r\n                airTemp = Float.parseFloat(strArr[14]);\r\n                context.write(dateText, new FloatWritable(airTemp));\r\n            }\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\nMy Reducer:\r\n\r\n\r\n    protected void reduce(Text key, Iterable&lt;FloatWritable&gt; floatTypes, Context context)\r\n            throws IOException, InterruptedException {\r\n        counter = 0;\r\n        sum = 0;\r\n        for (FloatWritable f : floatTypes) {\r\n            sum += f.get();\r\n            counter++;\r\n        }\r\n        System.out.println(key);\r\n        hm.put(key.toString(), sum/counter);\r\n        context.write(new Text(&quot;Day: &quot; + key.toString() + &quot; avg temp: &quot; + sum/(counter)), nullWritable);\r\n    }\r\n","title":"MapReduce retain input order from mapper to reducer java","body":"<p>I have a weather dataset. I process it and find the average temperature value on a certain day, but when I try to go beyond the month, the data comes into the reducer in a different order, and I need to save the order for further temperature calculations for the week, month ... What am I doing wrong ? How can I keep order?\nDataset example:\n(MM/DD/YY) temp\n3/1/11     5\n3/1/11     4\n3/8/11     7\n3/8/11     6\n4/1/11     9\n5/1/11    12\nIn reducer I recieve keys in this order:\n3/1/11\n4/1/11\n5/1/11\n3/8/11\nMy Map:</p>\n<pre><code>     protected void map(LongWritable key, Text value, Context context) throws IOException, InterruptedException {\n    try {\n        //MM/DD/YYYY\n        String userDateBefore = &quot;03/01/11&quot;;\n        String userDateAfter = &quot;05/01/11&quot;;\n        SimpleDateFormat format = new SimpleDateFormat();\n        format.applyPattern(&quot;MM/dd/yy&quot;);\n        Date userDateBeforeFormatted = null;\n        try {\n            userDateBeforeFormatted = format.parse(userDateBefore);\n        } catch (ParseException e) {\n            e.printStackTrace();\n        }\n        Date userDateAfterFormatted = null;\n        try {\n            userDateAfterFormatted = format.parse(userDateAfter);\n        } catch (ParseException e) {\n            e.printStackTrace();\n        }\n        String[] strArr = value.toString().split(&quot;,&quot;);\n        String date = strArr[2];\n        Date incomeDate = null;\n        try {\n            incomeDate = format.parse(date);\n        } catch (ParseException e) {\n            e.printStackTrace();\n        }\n        SimpleDateFormat dateFormat;\n\n        Text dateText;\n        float airTemp;\n        if(incomeDate.before(userDateAfterFormatted) || incomeDate.equals(userDateAfterFormatted)\n                &amp;&amp; incomeDate.after(userDateBeforeFormatted) || incomeDate.equals(userDateBeforeFormatted)) {\n            dateFormat = new SimpleDateFormat(&quot;dd/MM/yy&quot;);\n            dateText = new Text(dateFormat.format(incomeDate));\n            airTemp = Float.parseFloat(strArr[14]);\n            context.write(dateText, new FloatWritable(airTemp));\n        }\n    } catch (Exception e) {\n        e.printStackTrace();\n    }\n}\n</code></pre>\n<p>My Reducer:</p>\n<pre><code>protected void reduce(Text key, Iterable&lt;FloatWritable&gt; floatTypes, Context context)\n        throws IOException, InterruptedException {\n    counter = 0;\n    sum = 0;\n    for (FloatWritable f : floatTypes) {\n        sum += f.get();\n        counter++;\n    }\n    System.out.println(key);\n    hm.put(key.toString(), sum/counter);\n    context.write(new Text(&quot;Day: &quot; + key.toString() + &quot; avg temp: &quot; + sum/(counter)), nullWritable);\n}\n</code></pre>\n"},{"tags":["java","input"],"comments":[{"owner":{"account_id":4316093,"reputation":3757,"user_id":3525886,"accept_rate":75,"display_name":"Johnny Willer"},"score":3,"creation_date":1444458201,"post_id":33050973,"comment_id":53922576,"body_markdown":"Ok.. What about `if` statement?","body":"Ok.. What about <code>if</code> statement?"},{"owner":{"account_id":1973010,"reputation":6190,"user_id":1771479,"display_name":"agold"},"score":0,"creation_date":1444458420,"post_id":33050973,"comment_id":53922609,"body_markdown":"See also: [How to filter Scanner input](http://stackoverflow.com/questions/20834913/filtering-java-util-scanner-input)","body":"See also: <a href=\"http://stackoverflow.com/questions/20834913/filtering-java-util-scanner-input\">How to filter Scanner input</a>"}],"answers":[{"tags":[],"owner":{"account_id":3296070,"reputation":4445,"user_id":2773311,"accept_rate":73,"display_name":"Arc676"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1444459986,"creation_date":1444458370,"answer_id":33051012,"question_id":33050973,"body_markdown":"You can use loops that repeatedly ask for input until it&#39;s valid:\r\n\r\n    double annualInterestRate = 0;\r\n    while (annualInterestRate &lt; 0.25 || annualInterestRate &gt; 10){\r\n        System.out.print(&quot;Please Enter the annual interest rate between 0.25 to 10 : &quot;);\r\n        annualInterestRate = input.nextDouble();\r\n        if (annualInterestRate &lt; 0.25 || annualInterestRate &gt; 10){\r\n            System.out.println(&quot;Please enter a value between 0.25 and 10&quot;);\r\n        }\r\n    }\r\n    //if you reach this point, input is valid because it is neither &lt;0.25 or &gt;10\r\nYou can do this for all values that need to meet certain criteria. Just make sure you initialize the variable _before_ the loop and set it as an invalid value, otherwise the loop won&#39;t run.\r\n\r\nOther variables:\r\n\r\n    int numberOfYears = -1; //or 0 is you don&#39;t allow 0 years\r\n    while (numberOfYears &lt; 0){ //or &lt;= 0 if you don&#39;t allow 0 years\r\n        System.out.print(&quot;Enter number of years: &quot;);\r\n        numberOfYears = input.nextInt();\r\n    }\r\n    double Amountofinterest = -1; //or 0\r\n    while (Amountofinterest &lt; 0){ //or &lt;= 0\r\n        System.out.print(&quot;Enter Amount: &quot;);\r\n        Amountofinterest = input.nextDouble();\r\n    }","title":"How To Limit User Input In Java","body":"<p>You can use loops that repeatedly ask for input until it's valid:</p>\n\n<pre><code>double annualInterestRate = 0;\nwhile (annualInterestRate &lt; 0.25 || annualInterestRate &gt; 10){\n    System.out.print(\"Please Enter the annual interest rate between 0.25 to 10 : \");\n    annualInterestRate = input.nextDouble();\n    if (annualInterestRate &lt; 0.25 || annualInterestRate &gt; 10){\n        System.out.println(\"Please enter a value between 0.25 and 10\");\n    }\n}\n//if you reach this point, input is valid because it is neither &lt;0.25 or &gt;10\n</code></pre>\n\n<p>You can do this for all values that need to meet certain criteria. Just make sure you initialize the variable <em>before</em> the loop and set it as an invalid value, otherwise the loop won't run.</p>\n\n<p>Other variables:</p>\n\n<pre><code>int numberOfYears = -1; //or 0 is you don't allow 0 years\nwhile (numberOfYears &lt; 0){ //or &lt;= 0 if you don't allow 0 years\n    System.out.print(\"Enter number of years: \");\n    numberOfYears = input.nextInt();\n}\ndouble Amountofinterest = -1; //or 0\nwhile (Amountofinterest &lt; 0){ //or &lt;= 0\n    System.out.print(\"Enter Amount: \");\n    Amountofinterest = input.nextDouble();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4301027,"reputation":3755,"user_id":3514736,"accept_rate":42,"display_name":"Rahman"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1444458416,"creation_date":1444458416,"answer_id":33051017,"question_id":33050973,"body_markdown":"Are you talking about this :\r\n\r\n    while(input.nextDouble()&lt;0){\r\n        \t System.out.println(&quot;Please enter positive investment&quot;);\r\n        \t \r\n         }","title":"How To Limit User Input In Java","body":"<p>Are you talking about this :</p>\n\n<pre><code>while(input.nextDouble()&lt;0){\n         System.out.println(\"Please enter positive investment\");\n\n     }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2267529,"reputation":72,"user_id":1995763,"display_name":"Aven"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1444461132,"creation_date":1444461132,"answer_id":33051347,"question_id":33050973,"body_markdown":"  Ok you could then use a while loop like this:\r\n\r\n    \tint numberOfYears = -1;\r\n\t    System.out.print( &quot;Enter number of years: &quot;);\r\n\t    while(numberOfYears &lt; 0){ \r\n\t    numberOfYears = input.nextInt();\r\n\t    }\r\n\r\n","title":"How To Limit User Input In Java","body":"<p>Ok you could then use a while loop like this:</p>\n\n<pre><code>    int numberOfYears = -1;\n    System.out.print( \"Enter number of years: \");\n    while(numberOfYears &lt; 0){ \n    numberOfYears = input.nextInt();\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9746314,"reputation":356,"user_id":7226192,"display_name":"JamesC"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649774060,"creation_date":1649774060,"answer_id":71844574,"question_id":33050973,"body_markdown":"I&#39;d like to offer a more elegant way of getting data via CLI, where the risk of exception or any other input hazard is minimised.\r\n\r\nI&#39;ve written this function and think it may well cover the Integer, Double and String objects, but you may continue expanding it further:\r\n\r\n    public Object securedInput(String intro, String type, int maxLength)\r\n    {\r\n        //Apply Scanner\r\n        Scanner input = new Scanner(System.in);\r\n        \r\n        //Show intro\r\n        if(intro != null)\r\n            System.out.print(intro+&quot; &quot;);\r\n        \r\n        //Get user&#39;s input\r\n        String  inStr = input.next(); //always get a string\r\n        \r\n        //Enforce length\r\n        if((maxLength&gt;0)&amp;&amp;(inStr.length() &gt; maxLength))\r\n            inStr = inStr.substring(0, maxLength);\r\n        \r\n        String  result;\r\n        \r\n        if(inStr == null || inStr.length() &lt; 1)\r\n            return null;\r\n        \r\n        switch (type)\r\n        {\r\n                case &quot;int&quot;:\r\n                    result = inStr.replaceAll(&quot;[^0-9]&quot;, &quot;&quot;);\r\n                    if(result.length() &lt; 1 || result.length() &lt; inStr.length())\r\n                        return null;\r\n                    else\r\n                       return Integer.parseInt(result);\r\n                case &quot;double&quot;:\r\n                    result = inStr.replaceAll(&quot;[^0-9.]&quot;, &quot;&quot;);\r\n                    if(result.length() &lt; 1 || result.length() &lt; inStr.length())\r\n                        return null;\r\n                    else\r\n                        return Double.parseDouble(result);\r\n                    //break;\r\n                case &quot;string&quot;:\r\n                    result = inStr.replaceAll(&quot;[^a-zA-Z .-]&quot;, &quot;&quot;);\r\n                    if(result.length() &lt; 1 || result.length() &lt; inStr.length())\r\n                        return null;\r\n                    else\r\n                        return result;\r\n                default:\r\n                    return null;\r\n        }\r\n               \r\n    }\r\n    \r\n\r\nHere,as you can see I first take the input as String, then clean it according to my need, and then try to convert it without the risk of getting any exception.\r\nAnd if something is wrong you simply get a null.\r\n\r\nThis can be used like this:\r\n\r\n        Integer i = (Integer)securedInput(&quot;Enter an integer:&quot;,&quot;int&quot;, 3);\r\n        Double  d = (Double)securedInput(&quot;Enter a double&quot;,&quot;double&quot;,4);\r\n        String  s = (String)securedInput(&quot;Enter a string&quot;,&quot;string&quot;,2);\r\n\r\nYou can add further arguments, such as range, and forbidden characters and even output errors according to the problem.\r\n\r\nHope this had helped.\r\n","title":"How To Limit User Input In Java","body":"<p>I'd like to offer a more elegant way of getting data via CLI, where the risk of exception or any other input hazard is minimised.</p>\n<p>I've written this function and think it may well cover the Integer, Double and String objects, but you may continue expanding it further:</p>\n<pre><code>public Object securedInput(String intro, String type, int maxLength)\n{\n    //Apply Scanner\n    Scanner input = new Scanner(System.in);\n    \n    //Show intro\n    if(intro != null)\n        System.out.print(intro+&quot; &quot;);\n    \n    //Get user's input\n    String  inStr = input.next(); //always get a string\n    \n    //Enforce length\n    if((maxLength&gt;0)&amp;&amp;(inStr.length() &gt; maxLength))\n        inStr = inStr.substring(0, maxLength);\n    \n    String  result;\n    \n    if(inStr == null || inStr.length() &lt; 1)\n        return null;\n    \n    switch (type)\n    {\n            case &quot;int&quot;:\n                result = inStr.replaceAll(&quot;[^0-9]&quot;, &quot;&quot;);\n                if(result.length() &lt; 1 || result.length() &lt; inStr.length())\n                    return null;\n                else\n                   return Integer.parseInt(result);\n            case &quot;double&quot;:\n                result = inStr.replaceAll(&quot;[^0-9.]&quot;, &quot;&quot;);\n                if(result.length() &lt; 1 || result.length() &lt; inStr.length())\n                    return null;\n                else\n                    return Double.parseDouble(result);\n                //break;\n            case &quot;string&quot;:\n                result = inStr.replaceAll(&quot;[^a-zA-Z .-]&quot;, &quot;&quot;);\n                if(result.length() &lt; 1 || result.length() &lt; inStr.length())\n                    return null;\n                else\n                    return result;\n            default:\n                return null;\n    }\n           \n}\n</code></pre>\n<p>Here,as you can see I first take the input as String, then clean it according to my need, and then try to convert it without the risk of getting any exception.\nAnd if something is wrong you simply get a null.</p>\n<p>This can be used like this:</p>\n<pre><code>    Integer i = (Integer)securedInput(&quot;Enter an integer:&quot;,&quot;int&quot;, 3);\n    Double  d = (Double)securedInput(&quot;Enter a double&quot;,&quot;double&quot;,4);\n    String  s = (String)securedInput(&quot;Enter a string&quot;,&quot;string&quot;,2);\n</code></pre>\n<p>You can add further arguments, such as range, and forbidden characters and even output errors according to the problem.</p>\n<p>Hope this had helped.</p>\n"}],"owner":{"account_id":7097041,"reputation":7,"user_id":5430172,"display_name":"john smith"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":21994,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"answer_count":4,"score":-1,"last_activity_date":1649774060,"creation_date":1444457961,"question_id":33050973,"body_markdown":"The amount of investment must be positive and can be any value.\r\nThe period of investment is in years so should be positive.\r\nThe annual rate of interest can be between 0.25% to 14%.\r\n\r\n    import java.util.Scanner;\r\n    \r\n    public class InterestCalculator{\r\n    \r\n        /**\r\n         * @param args the command line arguments\r\n         */\r\n        public static void main(String[] args) {\r\n            // TODO code application logic here\r\n    \r\n            Scanner input = new Scanner(System.in);\r\n    \r\n            // Entering the interest rate\r\n            System.out.print(&quot;Please Enter the annual interest rate between 0.25 to 10 : &quot;);\r\n            double annualInterestRate = input.nextDouble();\r\n    \r\n            double monthlyInterestRate = annualInterestRate / 1200;\r\n    \r\n            System.out.print(&quot;Enter number of years: &quot;);\r\n            int numberOfYears = input.nextInt();\r\n    \r\n            // Entering the amount earned\r\n            System.out.print(&quot;Enter Amount: &quot;);\r\n            double Amountofinterest = input.nextDouble();\r\n    \r\n            // Calculating\r\n            double moneyearned = Amountofinterest * monthlyInterestRate;\r\n    \r\n            // Displaying the results\r\n            System.out.println(&quot;The money earned is $&quot; +\r\n            (int) (moneyearned * 100) / 100.0);\r\n            int i;\r\n    \r\n            for (i = 1; i &lt;= numberOfYears * 12; i++) {\r\n                double Balance = Amountofinterest + moneyearned;\r\n                Amountofinterest = Balance;\r\n                monthlyInterestRate = moneyearned + 0.01;\r\n                System.out.println(i + &quot;\\t\\t&quot; + Amountofinterest\r\n                        + &quot;\\t\\t&quot; + monthlyInterestRate + &quot;\\t\\t&quot; + Balance);\r\n    \r\n            }\r\n    \r\n        }\r\n    }\r\n\r\nI have made the basic program but, I don&#39;t know how to add restrictions.\r\n\r\n\r\n","title":"How To Limit User Input In Java","body":"<p>The amount of investment must be positive and can be any value.\nThe period of investment is in years so should be positive.\nThe annual rate of interest can be between 0.25% to 14%.</p>\n\n<pre><code>import java.util.Scanner;\n\npublic class InterestCalculator{\n\n    /**\n     * @param args the command line arguments\n     */\n    public static void main(String[] args) {\n        // TODO code application logic here\n\n        Scanner input = new Scanner(System.in);\n\n        // Entering the interest rate\n        System.out.print(\"Please Enter the annual interest rate between 0.25 to 10 : \");\n        double annualInterestRate = input.nextDouble();\n\n        double monthlyInterestRate = annualInterestRate / 1200;\n\n        System.out.print(\"Enter number of years: \");\n        int numberOfYears = input.nextInt();\n\n        // Entering the amount earned\n        System.out.print(\"Enter Amount: \");\n        double Amountofinterest = input.nextDouble();\n\n        // Calculating\n        double moneyearned = Amountofinterest * monthlyInterestRate;\n\n        // Displaying the results\n        System.out.println(\"The money earned is $\" +\n        (int) (moneyearned * 100) / 100.0);\n        int i;\n\n        for (i = 1; i &lt;= numberOfYears * 12; i++) {\n            double Balance = Amountofinterest + moneyearned;\n            Amountofinterest = Balance;\n            monthlyInterestRate = moneyearned + 0.01;\n            System.out.println(i + \"\\t\\t\" + Amountofinterest\n                    + \"\\t\\t\" + monthlyInterestRate + \"\\t\\t\" + Balance);\n\n        }\n\n    }\n}\n</code></pre>\n\n<p>I have made the basic program but, I don't know how to add restrictions.</p>\n"},{"tags":["java","spring-boot"],"comments":[{"owner":{"account_id":5433910,"reputation":10649,"user_id":4323935,"accept_rate":69,"display_name":"dpr"},"score":0,"creation_date":1529932950,"post_id":51024223,"comment_id":89041498,"body_markdown":"Can you please add the code that uses the class that is holding the accessKey member. Especially the creation of the instance you used to check whether accessKey is set or not would be of interest.","body":"Can you please add the code that uses the class that is holding the accessKey member. Especially the creation of the instance you used to check whether accessKey is set or not would be of interest."},{"owner":{"account_id":6477207,"reputation":117,"user_id":7082690,"display_name":"Manzini"},"score":0,"creation_date":1529936288,"post_id":51024223,"comment_id":89043715,"body_markdown":"I use within a method in the same class\nheaders.add (&quot;ACCESSKEY&quot;, accessKey);","body":"I use within a method in the same class headers.add (&quot;ACCESSKEY&quot;, accessKey);"},{"owner":{"account_id":5433910,"reputation":10649,"user_id":4323935,"accept_rate":69,"display_name":"dpr"},"score":0,"creation_date":1529936487,"post_id":51024223,"comment_id":89043846,"body_markdown":"If your class is correctly wired by spring and not manually created (e.g. with `new MyClass()`), the first snippet should work correctly. I can only imagine that you get the described problems due to creating the bean manually. That is why I&#39;m asking for the code that creates the bean instance.","body":"If your class is correctly wired by spring and not manually created (e.g. with <code>new MyClass()</code>), the first snippet should work correctly. I can only imagine that you get the described problems due to creating the bean manually. That is why I&#39;m asking for the code that creates the bean instance."}],"answers":[{"tags":[],"owner":{"account_id":7414275,"reputation":14648,"user_id":5640649,"accept_rate":91,"display_name":"lealceldeiro"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1649773971,"creation_date":1529937303,"answer_id":51026018,"question_id":51024223,"body_markdown":"You can use the following code:\r\n\r\nA Configuration Class (annotated with `@Component` in order to be picked up by Spring) which will hold the values coming from the properties file, where you bind the value of `bws.access.key` to a property directly. And if you need accessor methods for `accessKey` you can just create them (`setAccessKey` and `getAccessKey`)\r\n\r\n    @Component\r\n    public class ConfigClass {\r\n    \r\n        // @Value(&quot;${bws.access.key:&lt;no-value&gt;}&quot;)  // &lt;- you can use it this way if you want a default value if the property is not found\r\n        @Value(&quot;${bws.access.key}&quot;)                // &lt;- Notice how the property is being bind here and not upon the method `setAccessKey`\r\n        private String accessKey;\r\n    \r\n        // optional, in case you need to change the value of `accessKey` later\r\n        public void setAccessKey(String ak){\r\n            this.accessKey = ak;\r\n        }\r\n    \r\n        public String getAccessKey() {\r\n            return this.accessKey;\r\n        }\r\n\r\n    }\r\n\r\nFor more details checkout this [GitHub sample project][1].\r\n\r\nI tested this with\r\n\r\n- IntelliJ IDEA 2018.1.5 (Ultimate Edition),Build #IU-181.5281.24\r\n- SonarLint [![enter image description here][2]][2]\r\n\r\n\r\n----------\r\n\r\n**(*Edit*) How to use it in a Controller**:\r\n\r\nAn option (there are others) could be to declare a constructor for the controller (let&#39;s call it `SampleController`) and request a parameter of type `ConfigClass` inside it. Now we set a controller attribute (`config`) of the same type to the value received as parameter, like this:\r\n\r\n    @RestController\r\n    public class SampleController {\r\n    \r\n        private final ConfigClass config;\r\n    \r\n        public SampleController(ConfigClass configClass) { // &lt;- request the object of type ConfigClass\r\n            this.config = configClass; // &lt;- set the value for later usage\r\n        }\r\n    \r\n        @RequestMapping(value = &quot;test&quot;)\r\n        public String test() {\r\n            return config.getAccessKey();  // &lt;- use the object of type ConfigClass\r\n        }\r\n    }\r\n\r\nNow, Spring Boot will try to find a component (of any type) in the app of type `ConfigClass` and since we have one defined it will automatically inject it in our controller. This way you can set the parameter controller property `config` to the value received in `configClass` for later usage.\r\n\r\nIn order to test it, you can request the url `test`. You will see that the output will be `anotherValue`. So we can conclude that the Dependency Injection Mechanism successfully found an instance of `ConfigClass` and the method `ConfigClass#getAccessKey` works properly.\r\n\r\n  [1]: https://github.com/lealceldeiro/valuedemo\r\n  [2]: https://i.stack.imgur.com/kXUZj.png","title":"Correct way to get environment variables and go through SonarLint","body":"<p>You can use the following code:</p>\n<p>A Configuration Class (annotated with <code>@Component</code> in order to be picked up by Spring) which will hold the values coming from the properties file, where you bind the value of <code>bws.access.key</code> to a property directly. And if you need accessor methods for <code>accessKey</code> you can just create them (<code>setAccessKey</code> and <code>getAccessKey</code>)</p>\n<pre><code>@Component\npublic class ConfigClass {\n\n    // @Value(&quot;${bws.access.key:&lt;no-value&gt;}&quot;)  // &lt;- you can use it this way if you want a default value if the property is not found\n    @Value(&quot;${bws.access.key}&quot;)                // &lt;- Notice how the property is being bind here and not upon the method `setAccessKey`\n    private String accessKey;\n\n    // optional, in case you need to change the value of `accessKey` later\n    public void setAccessKey(String ak){\n        this.accessKey = ak;\n    }\n\n    public String getAccessKey() {\n        return this.accessKey;\n    }\n\n}\n</code></pre>\n<p>For more details checkout this <a href=\"https://github.com/lealceldeiro/valuedemo\" rel=\"nofollow noreferrer\">GitHub sample project</a>.</p>\n<p>I tested this with</p>\n<ul>\n<li>IntelliJ IDEA 2018.1.5 (Ultimate Edition),Build #IU-181.5281.24</li>\n<li>SonarLint <a href=\"https://i.stack.imgur.com/kXUZj.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/kXUZj.png\" alt=\"enter image description here\" /></a></li>\n</ul>\n<hr />\n<p><strong>(<em>Edit</em>) How to use it in a Controller</strong>:</p>\n<p>An option (there are others) could be to declare a constructor for the controller (let's call it <code>SampleController</code>) and request a parameter of type <code>ConfigClass</code> inside it. Now we set a controller attribute (<code>config</code>) of the same type to the value received as parameter, like this:</p>\n<pre><code>@RestController\npublic class SampleController {\n\n    private final ConfigClass config;\n\n    public SampleController(ConfigClass configClass) { // &lt;- request the object of type ConfigClass\n        this.config = configClass; // &lt;- set the value for later usage\n    }\n\n    @RequestMapping(value = &quot;test&quot;)\n    public String test() {\n        return config.getAccessKey();  // &lt;- use the object of type ConfigClass\n    }\n}\n</code></pre>\n<p>Now, Spring Boot will try to find a component (of any type) in the app of type <code>ConfigClass</code> and since we have one defined it will automatically inject it in our controller. This way you can set the parameter controller property <code>config</code> to the value received in <code>configClass</code> for later usage.</p>\n<p>In order to test it, you can request the url <code>test</code>. You will see that the output will be <code>anotherValue</code>. So we can conclude that the Dependency Injection Mechanism successfully found an instance of <code>ConfigClass</code> and the method <code>ConfigClass#getAccessKey</code> works properly.</p>\n"}],"owner":{"account_id":6477207,"reputation":117,"user_id":7082690,"display_name":"Manzini"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":911,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":51026018,"answer_count":1,"score":5,"last_activity_date":1649773971,"creation_date":1529931995,"question_id":51024223,"body_markdown":"I have a problem reading my environment variables and satisfying SonarLint(detect and fix quality issues) at the same time ..\r\nThat way it does not work my variable is null\r\n\r\n     private String accessKey;\r\n     @Value(&quot;${bws.access.key}&quot;)\r\n    public void setAccessKey(String ak){\r\n        accessKey=ak;\r\n    }\r\n\r\n\r\nChanging the method to static (as the sonarLint recommends) does not work the variable continuous null\r\n\r\n    private static String accessKey;\r\n      @Value(&quot;${bws.access.key}&quot;)\r\n    public static void setAccessKey(String ak){\r\n        accessKey=ak;\r\n    }\r\n\r\nThe only way I found to work is to mark the instance variable as static but not to mark the method as static\r\n\r\n    private static String accessKey;\r\n      @Value(&quot;${bws.access.key}&quot;)\r\n    public void setAccessKey(String ak){\r\n        accessKey=ak;\r\n    }\r\n\r\nBut there sonarLint points out the issue\r\n**Instance methods should not write to &quot;static&quot; fields**\r\n\r\nIs not this way I&#39;m getting my enviroment variables across the boundaries not the right one?\r\n","title":"Correct way to get environment variables and go through SonarLint","body":"<p>I have a problem reading my environment variables and satisfying SonarLint(detect and fix quality issues) at the same time ..\nThat way it does not work my variable is null</p>\n\n<pre><code> private String accessKey;\n @Value(\"${bws.access.key}\")\npublic void setAccessKey(String ak){\n    accessKey=ak;\n}\n</code></pre>\n\n<p>Changing the method to static (as the sonarLint recommends) does not work the variable continuous null</p>\n\n<pre><code>private static String accessKey;\n  @Value(\"${bws.access.key}\")\npublic static void setAccessKey(String ak){\n    accessKey=ak;\n}\n</code></pre>\n\n<p>The only way I found to work is to mark the instance variable as static but not to mark the method as static</p>\n\n<pre><code>private static String accessKey;\n  @Value(\"${bws.access.key}\")\npublic void setAccessKey(String ak){\n    accessKey=ak;\n}\n</code></pre>\n\n<p>But there sonarLint points out the issue\n<strong>Instance methods should not write to \"static\" fields</strong></p>\n\n<p>Is not this way I'm getting my enviroment variables across the boundaries not the right one?</p>\n"},{"tags":["java","selenium","annotations","testng"],"comments":[{"owner":{"account_id":1408815,"reputation":2002,"user_id":1811348,"accept_rate":88,"display_name":"swapyonubuntu"},"score":0,"creation_date":1649775020,"post_id":71844541,"comment_id":126958444,"body_markdown":"can you share your code for better understanding?","body":"can you share your code for better understanding?"},{"owner":{"account_id":10049107,"reputation":186627,"user_id":7429447,"accept_rate":86,"display_name":"undetected Selenium"},"score":0,"creation_date":1649800091,"post_id":71844541,"comment_id":126966785,"body_markdown":"Update the question with your code trials including `@BeforeClass`, `@BeforeMethod` and `@Test`","body":"Update the question with your code trials including <code>@BeforeClass</code>, <code>@BeforeMethod</code> and <code>@Test</code>"},{"owner":{"account_id":9430471,"reputation":13,"user_id":7014181,"display_name":"PiTu"},"score":0,"creation_date":1649922912,"post_id":71844541,"comment_id":126998824,"body_markdown":"@swapyonubuntu Now I know more, I&#39;m limited by the internal company framework. All tests need to extend class BaseUITest, where @Before/After Methods have &quot;alwaysRun = true&quot;, and they will close browser and create new driver and open new browser. @Before/After Class is not supported. This is absurd but i have to work with it. Do you see any work around? BaseUITest is read only.","body":"@swapyonubuntu Now I know more, I&#39;m limited by the internal company framework. All tests need to extend class BaseUITest, where @Before/After Methods have &quot;alwaysRun = true&quot;, and they will close browser and create new driver and open new browser. @Before/After Class is not supported. This is absurd but i have to work with it. Do you see any work around? BaseUITest is read only."},{"owner":{"account_id":1856464,"reputation":514,"user_id":1681917,"accept_rate":100,"display_name":"Ahamed Abdul Rahman"},"score":0,"creation_date":1650765159,"post_id":71844541,"comment_id":127198236,"body_markdown":"In many frameworks, only in BeforeMethod, driver object would be initialized. Since you are trying to something in BeforeClass, you may be getting this error. Either avoid using BeforeClass altogether or initialize browser in BeforeClass before doing any action.","body":"In many frameworks, only in BeforeMethod, driver object would be initialized. Since you are trying to something in BeforeClass, you may be getting this error. Either avoid using BeforeClass altogether or initialize browser in BeforeClass before doing any action."}],"owner":{"account_id":9430471,"reputation":13,"user_id":7014181,"display_name":"PiTu"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":125,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1649773940,"creation_date":1649773940,"question_id":71844541,"body_markdown":"I&#39;m changing test and it turns out that it will be better to split it into three separate tests.\r\n\r\nI&#39;ve created setup method that should be run before whole class.\r\n\r\nWhen I&#39;m using @BeforeMethod with one huge test everything is ok, but when I change this into 3 tests and @BeforeClass I&#39;m getting this\r\n\r\n ```\r\njava.lang.NullPointerException\r\n\tat com.framework.ui.driver.lifecycle.SingleUseDriverLifecycle.getWebDriver(SingleUseDriverLifecycle.java:36)\r\n\tat com.framework.ui.UITestLifecycle.getWebDriver(UITestLifecycle.java:149)\r\n\tat com.framework.ui.pages.BasePage.&lt;init&gt;(BasePage.java:32)\r\n\tat adminPanel.pages.LoginAP.&lt;init&gt;(LoginAP.java:19)\r\n```\r\n\r\nBrowser starts for a second and it&#39;s closed very fast.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/gnD4A.png\r\n\r\nAny ideas what can be wrong?\r\n","title":"NullPointer Exception with @BeforeClass but not with @BeforeMethod using Selenium with Java and TestNG","body":"<p>I'm changing test and it turns out that it will be better to split it into three separate tests.</p>\n<p>I've created setup method that should be run before whole class.</p>\n<p>When I'm using @BeforeMethod with one huge test everything is ok, but when I change this into 3 tests and @BeforeClass I'm getting this</p>\n<pre><code>java.lang.NullPointerException\n   at com.framework.ui.driver.lifecycle.SingleUseDriverLifecycle.getWebDriver(SingleUseDriverLifecycle.java:36)\n   at com.framework.ui.UITestLifecycle.getWebDriver(UITestLifecycle.java:149)\n   at com.framework.ui.pages.BasePage.&lt;init&gt;(BasePage.java:32)\n   at adminPanel.pages.LoginAP.&lt;init&gt;(LoginAP.java:19)\n</code></pre>\n<p>Browser starts for a second and it's closed very fast.</p>\n<p><a href=\"https://i.stack.imgur.com/gnD4A.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gnD4A.png\" alt=\"enter image description here\" /></a></p>\n<p>Any ideas what can be wrong?</p>\n"},{"tags":["java","android","xml","storage"],"comments":[{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":1,"creation_date":1649755605,"post_id":71840131,"comment_id":126950697,"body_markdown":"Please remove images and post all text as text.","body":"Please remove images and post all text as text."},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1649755653,"post_id":71840131,"comment_id":126950718,"body_markdown":"`How do I create an XML file in Android Studio` I think you mean: in my Android app.","body":"<code>How do I create an XML file in Android Studio</code> I think you mean: in my Android app."},{"owner":{"account_id":8726421,"reputation":821,"user_id":15119028,"display_name":"Junaid Khalid"},"score":1,"creation_date":1649757360,"post_id":71840131,"comment_id":126951356,"body_markdown":"Post your code as code not the pictures","body":"Post your code as code not the pictures"},{"owner":{"account_id":9212866,"reputation":177,"user_id":6845311,"display_name":"Torima"},"score":0,"creation_date":1649759752,"post_id":71840131,"comment_id":126952162,"body_markdown":"Your question is confusing, please try and describe it better.","body":"Your question is confusing, please try and describe it better."},{"owner":{"account_id":50585,"reputation":39940,"user_id":150978,"accept_rate":78,"display_name":"Robert"},"score":0,"creation_date":1649762625,"post_id":71840131,"comment_id":126953229,"body_markdown":"What have you tried so far? Creating an XML file in Java is discussed in dozens of questions here on SO and saving a private file on Android, too.","body":"What have you tried so far? Creating an XML file in Java is discussed in dozens of questions here on SO and saving a private file on Android, too."},{"owner":{"account_id":24911382,"reputation":1,"user_id":18780889,"display_name":"Manprit Thind"},"score":0,"creation_date":1649767475,"post_id":71840131,"comment_id":126955137,"body_markdown":"@Robert I have tried it with the XmlSerializer to create the XML file but i don&#39;t understand where i can find the generated file in my app","body":"@Robert I have tried it with the XmlSerializer to create the XML file but i don&#39;t understand where i can find the generated file in my app"},{"owner":{"account_id":24911382,"reputation":1,"user_id":18780889,"display_name":"Manprit Thind"},"score":0,"creation_date":1649771702,"post_id":71840131,"comment_id":126956907,"body_markdown":"@Robert Thank you for your answer.\nI have one more question: If I run the app again, the previous entries are deleted (understandable) But how can I save the values in the XML file so that they are not deleted every time without a database connection?","body":"@Robert Thank you for your answer. I have one more question: If I run the app again, the previous entries are deleted (understandable) But how can I save the values in the XML file so that they are not deleted every time without a database connection?"},{"owner":{"account_id":50585,"reputation":39940,"user_id":150978,"accept_rate":78,"display_name":"Robert"},"score":0,"creation_date":1649773960,"post_id":71840131,"comment_id":126957963,"body_markdown":"What values are you talking about?","body":"What values are you talking about?"},{"owner":{"account_id":24911382,"reputation":1,"user_id":18780889,"display_name":"Manprit Thind"},"score":0,"creation_date":1649797849,"post_id":71840131,"comment_id":126966236,"body_markdown":"@Robert I mean the Input (string) values which i save in the XML file.","body":"@Robert I mean the Input (string) values which i save in the XML file."},{"owner":{"account_id":50585,"reputation":39940,"user_id":150978,"accept_rate":78,"display_name":"Robert"},"score":0,"creation_date":1649798464,"post_id":71840131,"comment_id":126966405,"body_markdown":"Once you have written the XML file containing the values of course on next app start you have to read the file,, deseralize it and show the values. Make yourself familiar with the Android activity lifecycle where you have to implement storing of the entered values (onCreate is not a good point for storing user input).","body":"Once you have written the XML file containing the values of course on next app start you have to read the file,, deseralize it and show the values. Make yourself familiar with the Android activity lifecycle where you have to implement storing of the entered values (onCreate is not a good point for storing user input)."}],"owner":{"account_id":24911382,"reputation":1,"user_id":18780889,"display_name":"Manprit Thind"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":397,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1649773857,"creation_date":1649755318,"question_id":71840131,"body_markdown":"I work with Android Studio and have two input values and these should be saved in an XML file. How do I create an XML file in my App to save my input? I already tried it with the XmlSerializer but I don&#39;t understand where I can find the generated file in my app\r\n\r\n    public class MainActivity extends AppCompatActivity {\r\n    EditText mEditTextG;\r\n    EditText mEditTextS;\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n    }\r\n\r\n    public void send (View v) throws FileNotFoundException {\r\n        mEditTextG = findViewById(R.id.editTextGERID);\r\n        String gerID = mEditTextG.getText().toString();\r\n\r\n        mEditTextS = findViewById(R.id.editTextSollAstID);\r\n        String sollID = mEditTextS.getText().toString();\r\n\r\n        //create XML File for Storage\r\n    String filename = &quot;device.xml&quot;;\r\n    XmlSerializer serializer = Xml.newSerializer();\r\n    StringWriter writer = new StringWriter();\r\n    try {\r\n        serializer.setOutput(writer);\r\n        serializer.startDocument(&quot;UTF-8&quot;, true);\r\n            serializer.startTag(&quot;&quot;, &quot;device&quot;);\r\n             serializer.startTag(&quot;&quot;, &quot;GERID&quot;);\r\n             serializer.text(gerID);\r\n             serializer.endTag(&quot;&quot;,&quot;GERID&quot;);\r\n\r\n             serializer.startTag(&quot;&quot;, &quot;SollAstID&quot;);\r\n             serializer.text(sollID);\r\n             serializer.endTag(&quot;&quot;,&quot;SollAstID&quot;);\r\n            serializer.endTag(&quot;&quot;,&quot;device&quot;);\r\n        serializer.endDocument();\r\n        String result = writer.toString();\r\n        FileOutputStream fos = this.openFileOutput(filename, Context.MODE_PRIVATE);\r\n        fos.write(result.getBytes(),0,result.length());\r\n        fos.close();\r\n        Toast.makeText(this,&quot;SollID: &quot;+ sollID ,Toast.LENGTH_LONG).show();\r\n\r\n    } catch (IOException e) {\r\n        e.printStackTrace();\r\n    }\r\n\r\n       \r\n    }\r\n\r\n\r\n\r\n\r\n[This is how the XML file should look like][1]\r\n\r\n \r\nThe XML file should also be able to be displayed or read in later in the program.\r\n\r\n\r\n\r\n\r\nThanks in advance\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/SnSGI.png","title":"create an XML file to store the input in my Android app","body":"<p>I work with Android Studio and have two input values and these should be saved in an XML file. How do I create an XML file in my App to save my input? I already tried it with the XmlSerializer but I don't understand where I can find the generated file in my app</p>\n<pre><code>public class MainActivity extends AppCompatActivity {\nEditText mEditTextG;\nEditText mEditTextS;\n@Override\nprotected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_main);\n\n}\n\npublic void send (View v) throws FileNotFoundException {\n    mEditTextG = findViewById(R.id.editTextGERID);\n    String gerID = mEditTextG.getText().toString();\n\n    mEditTextS = findViewById(R.id.editTextSollAstID);\n    String sollID = mEditTextS.getText().toString();\n\n    //create XML File for Storage\nString filename = &quot;device.xml&quot;;\nXmlSerializer serializer = Xml.newSerializer();\nStringWriter writer = new StringWriter();\ntry {\n    serializer.setOutput(writer);\n    serializer.startDocument(&quot;UTF-8&quot;, true);\n        serializer.startTag(&quot;&quot;, &quot;device&quot;);\n         serializer.startTag(&quot;&quot;, &quot;GERID&quot;);\n         serializer.text(gerID);\n         serializer.endTag(&quot;&quot;,&quot;GERID&quot;);\n\n         serializer.startTag(&quot;&quot;, &quot;SollAstID&quot;);\n         serializer.text(sollID);\n         serializer.endTag(&quot;&quot;,&quot;SollAstID&quot;);\n        serializer.endTag(&quot;&quot;,&quot;device&quot;);\n    serializer.endDocument();\n    String result = writer.toString();\n    FileOutputStream fos = this.openFileOutput(filename, Context.MODE_PRIVATE);\n    fos.write(result.getBytes(),0,result.length());\n    fos.close();\n    Toast.makeText(this,&quot;SollID: &quot;+ sollID ,Toast.LENGTH_LONG).show();\n\n} catch (IOException e) {\n    e.printStackTrace();\n}\n\n   \n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/SnSGI.png\" rel=\"nofollow noreferrer\">This is how the XML file should look like</a></p>\n<p>The XML file should also be able to be displayed or read in later in the program.</p>\n<p>Thanks in advance</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":1352170,"reputation":34246,"user_id":1291492,"accept_rate":100,"display_name":"ControlAltDel"},"score":4,"creation_date":1616599447,"post_id":66784186,"comment_id":118054125,"body_markdown":"Typically, it won&#39;t","body":"Typically, it won&#39;t"},{"owner":{"account_id":1713048,"reputation":1374,"user_id":1570688,"accept_rate":86,"display_name":"bluelurker"},"score":0,"creation_date":1616599596,"post_id":66784186,"comment_id":118054196,"body_markdown":"Ideally it won&#39;t, but if all threads are performing the same function(that can cause SO), they all might throw this exception. However, it should be unrelated to other threads.","body":"Ideally it won&#39;t, but if all threads are performing the same function(that can cause SO), they all might throw this exception. However, it should be unrelated to other threads."}],"answers":[{"tags":[],"owner":{"account_id":1674243,"reputation":10043,"user_id":1553537,"accept_rate":29,"display_name":"Giorgi Tsiklauri"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1619779825,"creation_date":1616601374,"answer_id":66784800,"question_id":66784186,"body_markdown":"Usually - no,\r\n-\r\nexception in one thread does not kill another thread;\r\n\r\nunless....\r\n\r\n---\r\n\r\nA little longer story\r\n-\r\nThere are two types of threads in Java: *Normal Threads* and *Daemon Threads*, and they differ only in what happens when they exit.\r\n\r\n\r\nWhen a thread exits, the JVM performs an inventory of running threads, and\r\n&gt; **if only daemon threads are left alive**\r\n\r\nJVM initiates an orderly shutdown (meaning, it shuts down after `main` thread finishes execution).\r\n\r\n&lt;sup&gt;When the JVM halts, any remaining daemon threads are abandoned  finally blocks are not executed, stacks are not unwound  the JVM just exits.&lt;/sup&gt;\r\n\r\nSo, when you have an unhandled exception in your thread, one of two possible scenarios may occur:\r\n\r\n1. **JVM will shutdown** - your thread was the last normal thread, and after JVM performs yet another inventory check following this thread&#39;s exit, it will shut down, as there are no other normal threads left (conceptually JVM considers, that nothin important is left running, as daemon threads should never be used for important/unsafe operations);\r\n2. **JVM will continue running** - your thread was not the last normal thread and after an unhandled exception happened in it, JVM will continue running.\r\n\r\nFor example, in this case:\r\n```java\r\npublic class EntryPoint {\r\n\r\n    public static void main(String[] args) throws Exception {\r\n        Thread t = new Thread(() -&gt; {\r\n            for (int i = 0; i &lt; 100; i++) {\r\n                try {\r\n                    Thread.sleep(1000);\r\n                    System.out.println(&quot;Thread &quot; + Thread.currentThread().getName() + &quot; &quot; + i);\r\n                } catch (InterruptedException e) {\r\n                    e.printStackTrace();\r\n                }\r\n            }\r\n        });\r\n\r\n        t.setDaemon(true);\r\n        t.start();\r\n\r\n        for (int i = 0; i &lt; 5; i++) {\r\n            Thread.sleep(1000);\r\n            if (i == 4) {\r\n                throw new StackOverflowError(&quot;JVM exits in this case.&quot;);\r\n            }\r\n            System.out.println(&quot;Call number &quot; + i);\r\n        }\r\n    }\r\n}\r\n```\r\nyour application will crash as soon as an exception is thrown, as there are no normal threads left running;\r\n\r\nwhereas, in this case:\r\n```java\r\npublic class EntryPoint {\r\n\r\n    public static void main(String[] args) throws Exception {\r\n        Thread t = new Thread(() -&gt; {\r\n            for (int i = 0; i &lt; 100; i++) {\r\n                try {\r\n                    Thread.sleep(1000);\r\n                    System.out.println(&quot;Thread &quot; + Thread.currentThread().getName() + &quot; &quot; + i);\r\n                } catch (InterruptedException e) {\r\n                    e.printStackTrace();\r\n                }\r\n            }\r\n        });\r\n\r\n        t.setDaemon(false);\r\n        t.start();\r\n\r\n        for (int i = 0; i &lt; 5; i++) {\r\n            Thread.sleep(1000);\r\n            if (i == 4) {\r\n                throw new StackOverflowError(&quot;JVM won&#39;t exit in this case.&quot;);\r\n            }\r\n            System.out.println(&quot;Call number &quot; + i);\r\n        }\r\n    }\r\n}\r\n```\r\na normal thread, referred by `t`, will continue its execution.\r\n\r\n---\r\n\r\nFinal notes\r\n-\r\n\r\n1. Note, that when the JVM starts up (Java program starts), all the threads it creates (such as garbage collector and other housekeeping threads) are daemon threads, except the main thread, which is a normal thread; however, if you create a new thread, it inherits the type from the thread it was created in;\r\n\r\n2. The only reason I explicitly set the `.setDaemon(true)`, in the first code snippet, is that the thread type is inherited from the thread that created it.","title":"Will exception in one thread cause application to stop?","body":"<h2>Usually - no,</h2>\n<p>exception in one thread does not kill another thread;</p>\n<p>unless....</p>\n<hr />\n<h2>A little longer story</h2>\n<p>There are two types of threads in Java: <em>Normal Threads</em> and <em>Daemon Threads</em>, and they differ only in what happens when they exit.</p>\n<p>When a thread exits, the JVM performs an inventory of running threads, and</p>\n<blockquote>\n<p><strong>if only daemon threads are left alive</strong></p>\n</blockquote>\n<p>JVM initiates an orderly shutdown (meaning, it shuts down after <code>main</code> thread finishes execution).</p>\n<p><sup>When the JVM halts, any remaining daemon threads are abandoned  finally blocks are not executed, stacks are not unwound  the JVM just exits.</sup></p>\n<p>So, when you have an unhandled exception in your thread, one of two possible scenarios may occur:</p>\n<ol>\n<li><strong>JVM will shutdown</strong> - your thread was the last normal thread, and after JVM performs yet another inventory check following this thread's exit, it will shut down, as there are no other normal threads left (conceptually JVM considers, that nothin important is left running, as daemon threads should never be used for important/unsafe operations);</li>\n<li><strong>JVM will continue running</strong> - your thread was not the last normal thread and after an unhandled exception happened in it, JVM will continue running.</li>\n</ol>\n<p>For example, in this case:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class EntryPoint {\n\n    public static void main(String[] args) throws Exception {\n        Thread t = new Thread(() -&gt; {\n            for (int i = 0; i &lt; 100; i++) {\n                try {\n                    Thread.sleep(1000);\n                    System.out.println(&quot;Thread &quot; + Thread.currentThread().getName() + &quot; &quot; + i);\n                } catch (InterruptedException e) {\n                    e.printStackTrace();\n                }\n            }\n        });\n\n        t.setDaemon(true);\n        t.start();\n\n        for (int i = 0; i &lt; 5; i++) {\n            Thread.sleep(1000);\n            if (i == 4) {\n                throw new StackOverflowError(&quot;JVM exits in this case.&quot;);\n            }\n            System.out.println(&quot;Call number &quot; + i);\n        }\n    }\n}\n</code></pre>\n<p>your application will crash as soon as an exception is thrown, as there are no normal threads left running;</p>\n<p>whereas, in this case:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class EntryPoint {\n\n    public static void main(String[] args) throws Exception {\n        Thread t = new Thread(() -&gt; {\n            for (int i = 0; i &lt; 100; i++) {\n                try {\n                    Thread.sleep(1000);\n                    System.out.println(&quot;Thread &quot; + Thread.currentThread().getName() + &quot; &quot; + i);\n                } catch (InterruptedException e) {\n                    e.printStackTrace();\n                }\n            }\n        });\n\n        t.setDaemon(false);\n        t.start();\n\n        for (int i = 0; i &lt; 5; i++) {\n            Thread.sleep(1000);\n            if (i == 4) {\n                throw new StackOverflowError(&quot;JVM won't exit in this case.&quot;);\n            }\n            System.out.println(&quot;Call number &quot; + i);\n        }\n    }\n}\n</code></pre>\n<p>a normal thread, referred by <code>t</code>, will continue its execution.</p>\n<hr />\n<h2>Final notes</h2>\n<ol>\n<li><p>Note, that when the JVM starts up (Java program starts), all the threads it creates (such as garbage collector and other housekeeping threads) are daemon threads, except the main thread, which is a normal thread; however, if you create a new thread, it inherits the type from the thread it was created in;</p>\n</li>\n<li><p>The only reason I explicitly set the <code>.setDaemon(true)</code>, in the first code snippet, is that the thread type is inherited from the thread that created it.</p>\n</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":1028549,"reputation":10245,"user_id":1037316,"accept_rate":86,"display_name":"G. Demecki"},"down_vote_count":2,"up_vote_count":1,"is_accepted":false,"score":-1,"last_activity_date":1616601957,"creation_date":1616601586,"answer_id":66784846,"question_id":66784186,"body_markdown":"No if it&#39;s not a main thread. Every thread in JVM has its own Stack in the memory. You can control its size by `-Xss` parameter.\r\n\r\nBy the way, you can easily find an answer by writing a simple application with 2  running threads. One can fail with `StackOverflowError` when doing infinite recursion, then you will see how the 2nd thread behaves. Give it a try.","title":"Will exception in one thread cause application to stop?","body":"<p>No if it's not a main thread. Every thread in JVM has its own Stack in the memory. You can control its size by <code>-Xss</code> parameter.</p>\n<p>By the way, you can easily find an answer by writing a simple application with 2  running threads. One can fail with <code>StackOverflowError</code> when doing infinite recursion, then you will see how the 2nd thread behaves. Give it a try.</p>\n"},{"tags":[],"owner":{"account_id":401843,"reputation":89788,"user_id":768644,"display_name":"rzwitserloot"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1616602704,"creation_date":1616602704,"answer_id":66785149,"question_id":66784186,"body_markdown":"No.\r\n\r\nIf StackOverflowError occurs, the thread that ran the code that is responsible for it goes through the normal procedure: It will throw that throwable from that method (throwing a throwable is just like `return;` in the sense that it exits the method just like `return` would, with a result: That throwable. But it&#39;s not returned, it&#39;s thrown - to see it, you&#39;d use a catch block). The method that invoked the method that threw the SOError now throws it. This means every method, in sequence, keeps returning, until one of two things happens:\r\n\r\n* Somewhere in this chain, the method that invoked the method that invoked the method that threw the SO was doing so in a `try{}` block where an associated `catch` block is catching `StackoverflowError` or some parent type of that (`Error` or `Throwable`). In that case, code continues in that catch block and the thread just keeps running at that point.\r\n\r\n* The exception bubbles all the way to the top, to the `run()` method where the thread started, and exits the run method in that way (by throwing it onwards). In this case, the JVM itself catches it. Threads will catch any and all throwables that the run() method they started the thread with end up throwing. In which case, the thread is of course shut down (the run() method returned - that&#39;s what threads do when the run method returns), and the throwable is handed to the thread&#39;s uncaught exception handler. You can set that handler if you want. By default, it dumps a bunch of useful info to `System.err` and that&#39;s all the deafult handler does.\r\n\r\nOther threads are not affected in the slighest.\r\n\r\n## But I read somewhere memory errors lead to unstable VMs!\r\n\r\nStackOverflowError smacks of OutOfMemoryError, but to be clear, they are not the same. A major caveat is often stated for OOMError, but does not apply to stack overflow: If an OOME occurs anywhere in the VM you should assume that code will end up buggy - most java code is not tested to properly handle this situation, and in practice the VM probably isn&#39;t quite guaranteeing stable behaviour in the face of a full heap either. So if an OOME happens to you, the VM is best considered unstable (exit it and restart at some point, sooner better than later), and weird things may happen.\r\n\r\nBut that&#39;s OOME. It does not apply to stack overflow, because each thread has its own, entirely independent stack.\r\n\r\n## ... hmm, my VM still shut down\r\n\r\nWell, if you don&#39;t catch that SOErr the thread will end up exiting because the run() method returns, and the VM will shut down automatically if all there are no running threads* left. This isn&#39;t a particularly good strategy to shut down VMs (just call `System.exit` if you want the VM to shut down); it&#39;s more of a &#175;\\\\_()_/&#175; I guess there&#39;s nothing left to do, might as well just shut down then situation.\r\n\r\nThus, __if you have only one thread__, it runs code that ends up throwing SOError, you don&#39;t catch it (and usually you shouldn&#39;t), then yeah, the VM will shut down, but by design: That thread will now exit, the VM realizes no active threads are left, and will then shut down.\r\n\r\n*) Technically, threads with the daemon flag set do not &#39;count&#39;; if all non-done threads are daemon threads, the VM shuts down. Given that VM shutdows are best done with System.exit, this factoid is essentially irrelevant.\r\n","title":"Will exception in one thread cause application to stop?","body":"<p>No.</p>\n<p>If StackOverflowError occurs, the thread that ran the code that is responsible for it goes through the normal procedure: It will throw that throwable from that method (throwing a throwable is just like <code>return;</code> in the sense that it exits the method just like <code>return</code> would, with a result: That throwable. But it's not returned, it's thrown - to see it, you'd use a catch block). The method that invoked the method that threw the SOError now throws it. This means every method, in sequence, keeps returning, until one of two things happens:</p>\n<ul>\n<li><p>Somewhere in this chain, the method that invoked the method that invoked the method that threw the SO was doing so in a <code>try{}</code> block where an associated <code>catch</code> block is catching <code>StackoverflowError</code> or some parent type of that (<code>Error</code> or <code>Throwable</code>). In that case, code continues in that catch block and the thread just keeps running at that point.</p>\n</li>\n<li><p>The exception bubbles all the way to the top, to the <code>run()</code> method where the thread started, and exits the run method in that way (by throwing it onwards). In this case, the JVM itself catches it. Threads will catch any and all throwables that the run() method they started the thread with end up throwing. In which case, the thread is of course shut down (the run() method returned - that's what threads do when the run method returns), and the throwable is handed to the thread's uncaught exception handler. You can set that handler if you want. By default, it dumps a bunch of useful info to <code>System.err</code> and that's all the deafult handler does.</p>\n</li>\n</ul>\n<p>Other threads are not affected in the slighest.</p>\n<h2>But I read somewhere memory errors lead to unstable VMs!</h2>\n<p>StackOverflowError smacks of OutOfMemoryError, but to be clear, they are not the same. A major caveat is often stated for OOMError, but does not apply to stack overflow: If an OOME occurs anywhere in the VM you should assume that code will end up buggy - most java code is not tested to properly handle this situation, and in practice the VM probably isn't quite guaranteeing stable behaviour in the face of a full heap either. So if an OOME happens to you, the VM is best considered unstable (exit it and restart at some point, sooner better than later), and weird things may happen.</p>\n<p>But that's OOME. It does not apply to stack overflow, because each thread has its own, entirely independent stack.</p>\n<h2>... hmm, my VM still shut down</h2>\n<p>Well, if you don't catch that SOErr the thread will end up exiting because the run() method returns, and the VM will shut down automatically if all there are no running threads* left. This isn't a particularly good strategy to shut down VMs (just call <code>System.exit</code> if you want the VM to shut down); it's more of a \\<em>()</em>/ I guess there's nothing left to do, might as well just shut down then situation.</p>\n<p>Thus, <strong>if you have only one thread</strong>, it runs code that ends up throwing SOError, you don't catch it (and usually you shouldn't), then yeah, the VM will shut down, but by design: That thread will now exit, the VM realizes no active threads are left, and will then shut down.</p>\n<p>*) Technically, threads with the daemon flag set do not 'count'; if all non-done threads are daemon threads, the VM shuts down. Given that VM shutdows are best done with System.exit, this factoid is essentially irrelevant.</p>\n"}],"owner":{"account_id":13410720,"reputation":21,"user_id":9677303,"display_name":"Ankit"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1184,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":3,"score":2,"last_activity_date":1649773581,"creation_date":1616599379,"question_id":66784186,"body_markdown":"I have six threads running in my application. If one thread throws a StackOverFlow exception, will all threads or application stop working?","title":"Will exception in one thread cause application to stop?","body":"<p>I have six threads running in my application. If one thread throws a StackOverFlow exception, will all threads or application stop working?</p>\n"},{"tags":["java","mysql","utf-8","character-encoding","special-characters"],"answers":[{"tags":[],"owner":{"account_id":15378480,"reputation":42,"user_id":11094528,"display_name":"Stephan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1613725287,"creation_date":1613646344,"answer_id":66258699,"question_id":66258595,"body_markdown":"Maybe it is resultset.getString(&quot;city&quot;) what is your problem here. You already receive the data as a string. The byte representation of that string is likely not utf-8. What&#39;s the type of resultset?\r\n\r\nAre you sure you opened your database connection with `characterEncoding=utf8`? You need to set `connectionProperties=&quot;useUnicode=yes;characterEncoding=utf8;&quot;`\r\n\r\n[Stackoverflow][1]\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/13359683/how-to-use-useunicode-yes-characterencoding-utf-8-with-dbcp","title":"how to fetch correctly the data from the a table in mysql which contains Italian,Japanese and Russian characters","body":"<p>Maybe it is resultset.getString(&quot;city&quot;) what is your problem here. You already receive the data as a string. The byte representation of that string is likely not utf-8. What's the type of resultset?</p>\n<p>Are you sure you opened your database connection with <code>characterEncoding=utf8</code>? You need to set <code>connectionProperties=&quot;useUnicode=yes;characterEncoding=utf8;&quot;</code></p>\n<p><a href=\"https://stackoverflow.com/questions/13359683/how-to-use-useunicode-yes-characterencoding-utf-8-with-dbcp\">Stackoverflow</a></p>\n"},{"tags":[],"owner":{"account_id":3796805,"reputation":637,"user_id":3151610,"display_name":"user3151610"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1613646800,"creation_date":1613646800,"answer_id":66258816,"question_id":66258595,"body_markdown":"It might help to check the resultset.getBytes(..) instead of getString first","title":"how to fetch correctly the data from the a table in mysql which contains Italian,Japanese and Russian characters","body":"<p>It might help to check the resultset.getBytes(..) instead of getString first</p>\n"},{"tags":[],"owner":{"account_id":18991005,"reputation":1312,"user_id":13860286,"display_name":"Shila Mosammami"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1613730918,"creation_date":1613730918,"answer_id":66275931,"question_id":66258595,"body_markdown":"Finally I found the code:\r\n\r\n    public static String unescapeXML( final String xml )\r\n\t{\r\n\t    Pattern xmlEntityRegex = Pattern.compile( &quot;&amp;(#?)([^;]+);&quot; );\r\n\t    // Matcher requires a StringBuffer instead of a StringBuilder\r\n\t    StringBuffer unescapedOutput = new StringBuffer( xml.length() );\r\n\r\n\t    Matcher m = xmlEntityRegex.matcher( xml );\r\n\t    Map&lt;String,String&gt; builtinEntities = null;\r\n\t    String entity;\r\n\t    String hashmark;\r\n\t    String ent;\r\n\t    int code;\r\n\t    while ( m.find() ) {\r\n\t        ent = m.group(2);\r\n\t        hashmark = m.group(1);\r\n\t        if ( (hashmark != null) &amp;&amp; (hashmark.length() &gt; 0) ) {\r\n\t            code = Integer.parseInt( ent );\r\n\t            entity = Character.toString( (char) code );\r\n\t        } else {\r\n\t            //must be a non-numerical entity\r\n\t            if ( builtinEntities == null ) {\r\n\t                builtinEntities = buildBuiltinXMLEntityMap();\r\n\t            }\r\n\t            entity = builtinEntities.get( ent );\r\n\t            if ( entity == null ) {\r\n\t                //not a known entity - ignore it\r\n\t                entity = &quot;&amp;&quot; + ent + &#39;;&#39;;\r\n\t            }\r\n\t        }\r\n\t        m.appendReplacement( unescapedOutput, entity );\r\n\t    }\r\n\t    m.appendTail( unescapedOutput );\r\n\r\n\t    return unescapedOutput.toString();\r\n\t}\r\n\r\n\tprivate static Map&lt;String,String&gt; buildBuiltinXMLEntityMap()\r\n\t{\r\n\t    Map&lt;String,String&gt; entities = new HashMap&lt;String,String&gt;(10);\r\n\t    entities.put( &quot;lt&quot;, &quot;&lt;&quot; );\r\n\t    entities.put( &quot;gt&quot;, &quot;&gt;&quot; );\r\n\t    entities.put( &quot;amp&quot;, &quot;&amp;&quot; );\r\n\t    entities.put( &quot;apos&quot;, &quot;&#39;&quot; );\r\n\t    entities.put( &quot;quot&quot;, &quot;\\&quot;&quot; );\r\n\t    return entities;\r\n\t}","title":"how to fetch correctly the data from the a table in mysql which contains Italian,Japanese and Russian characters","body":"<p>Finally I found the code:</p>\n<pre><code>public static String unescapeXML( final String xml )\n{\n    Pattern xmlEntityRegex = Pattern.compile( &quot;&amp;(#?)([^;]+);&quot; );\n    // Matcher requires a StringBuffer instead of a StringBuilder\n    StringBuffer unescapedOutput = new StringBuffer( xml.length() );\n\n    Matcher m = xmlEntityRegex.matcher( xml );\n    Map&lt;String,String&gt; builtinEntities = null;\n    String entity;\n    String hashmark;\n    String ent;\n    int code;\n    while ( m.find() ) {\n        ent = m.group(2);\n        hashmark = m.group(1);\n        if ( (hashmark != null) &amp;&amp; (hashmark.length() &gt; 0) ) {\n            code = Integer.parseInt( ent );\n            entity = Character.toString( (char) code );\n        } else {\n            //must be a non-numerical entity\n            if ( builtinEntities == null ) {\n                builtinEntities = buildBuiltinXMLEntityMap();\n            }\n            entity = builtinEntities.get( ent );\n            if ( entity == null ) {\n                //not a known entity - ignore it\n                entity = &quot;&amp;&quot; + ent + ';';\n            }\n        }\n        m.appendReplacement( unescapedOutput, entity );\n    }\n    m.appendTail( unescapedOutput );\n\n    return unescapedOutput.toString();\n}\n\nprivate static Map&lt;String,String&gt; buildBuiltinXMLEntityMap()\n{\n    Map&lt;String,String&gt; entities = new HashMap&lt;String,String&gt;(10);\n    entities.put( &quot;lt&quot;, &quot;&lt;&quot; );\n    entities.put( &quot;gt&quot;, &quot;&gt;&quot; );\n    entities.put( &quot;amp&quot;, &quot;&amp;&quot; );\n    entities.put( &quot;apos&quot;, &quot;'&quot; );\n    entities.put( &quot;quot&quot;, &quot;\\&quot;&quot; );\n    return entities;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":529143,"reputation":136619,"user_id":1766831,"display_name":"Rick James"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1649773265,"creation_date":1614495606,"answer_id":66406612,"question_id":66258595,"body_markdown":"Something, _not MySQL_, is generating &quot;html entities&quot; such as `&amp;#21517;`.  Find where those are coming from and undo it.\r\n\r\nSince those entities are probably already stored in the table, that needs to be undone, too.\r\n\r\nThe html entities should render correctly in any browser.  Are you trying to use them in some other context?","title":"how to fetch correctly the data from the a table in mysql which contains Italian,Japanese and Russian characters","body":"<p>Something, <em>not MySQL</em>, is generating &quot;html entities&quot; such as <code>&amp;#21517;</code>.  Find where those are coming from and undo it.</p>\n<p>Since those entities are probably already stored in the table, that needs to be undone, too.</p>\n<p>The html entities should render correctly in any browser.  Are you trying to use them in some other context?</p>\n"}],"owner":{"account_id":18991005,"reputation":1312,"user_id":13860286,"display_name":"Shila Mosammami"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":75,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":66275931,"answer_count":4,"score":0,"last_activity_date":1649773265,"creation_date":1613645941,"question_id":66258595,"body_markdown":"I have a table with UTF8 charset. The columns are considered utf8_general_ci. I am reading the data using prepared statement but they are not shown correctly. The data inside the table is not readable too. I need to write a code in a way that they are human readable. I have tested many methods which all failed. \r\n For the Connection property I used  &quot;?useUnicode=true&amp;characterEncoding=UTF8&quot;;\r\n\r\n    String city=resultset.getString(&quot;city&quot;);\r\n    byte[] data = city.getBytes();\r\n    String valueCity = new String(data, &quot;UTF-8&quot;); // Or  String valueCity = new String(data, StandardCharsets.UTF_8);\r\n\r\nI see something like &quot;&amp;#21517 ; &amp; #21476 ;&amp; #23627; &amp; #24066;&quot; in my table but I need to read or write them like .\r\nAny suggestions that I may handle this problem which is a pain on my neck?\r\nthanks a million in advance\r\n\r\n","title":"how to fetch correctly the data from the a table in mysql which contains Italian,Japanese and Russian characters","body":"<p>I have a table with UTF8 charset. The columns are considered utf8_general_ci. I am reading the data using prepared statement but they are not shown correctly. The data inside the table is not readable too. I need to write a code in a way that they are human readable. I have tested many methods which all failed.\nFor the Connection property I used  &quot;?useUnicode=true&amp;characterEncoding=UTF8&quot;;</p>\n<pre><code>String city=resultset.getString(&quot;city&quot;);\nbyte[] data = city.getBytes();\nString valueCity = new String(data, &quot;UTF-8&quot;); // Or  String valueCity = new String(data, StandardCharsets.UTF_8);\n</code></pre>\n<p>I see something like &quot;&amp;#21517 ; &amp; #21476 ;&amp; #23627; &amp; #24066;&quot; in my table but I need to read or write them like .\nAny suggestions that I may handle this problem which is a pain on my neck?\nthanks a million in advance</p>\n"},{"tags":["java","android","firebase","firebase-realtime-database","timestamp"],"comments":[{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":1,"creation_date":1639318778,"post_id":70323201,"comment_id":124313197,"body_markdown":"Theres a little more than 10 minutes between your two example timestamps. Could one of the clocks be running inaccurately?","body":"Theres a little more than 10 minutes between your two example timestamps. Could one of the clocks be running inaccurately?"},{"owner":{"account_id":8725718,"reputation":1712,"user_id":6527410,"accept_rate":53,"display_name":"androidXP"},"score":0,"creation_date":1639322992,"post_id":70323201,"comment_id":124314127,"body_markdown":"@ole My android device create both timestamp as you can see in code above. It&#39;s not clock thing, in code above I&#39;m first getting timestamp from device then upload it to the server, and before uploading I&#39;m generating log in Android studio then upload it on server and when i compare server timestamp with logcat, it&#39;s shows the difference between both. I don&#39;t understand why because I&#39;m uploading same as in logcat","body":"@ole My android device create both timestamp as you can see in code above. It&#39;s not clock thing, in code above I&#39;m first getting timestamp from device then upload it to the server, and before uploading I&#39;m generating log in Android studio then upload it on server and when i compare server timestamp with logcat, it&#39;s shows the difference between both. I don&#39;t understand why because I&#39;m uploading same as in logcat"}],"answers":[{"tags":[],"owner":{"account_id":72426,"reputation":573714,"user_id":209103,"accept_rate":73,"display_name":"Frank van Puffelen"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1639323955,"creation_date":1639323955,"answer_id":70325092,"question_id":70323201,"body_markdown":"When you call this in your code:\r\n```\r\nlastOnline.onDisconnect().setValue(offlineTime);\r\n```\r\n\r\nThis sends a literal value to the server, with the instruction to write that value when it detects that the client has disconnected. The server has no knowledge of the meaning of the value, and can&#39;t make any changes to it.\r\n\r\nSo if a different value is being written on the server than is being logged in the client, the only reason I can think of is that your calling `onDisconnect` (elsewhere?) too with a different value.","title":"Android System.currentTimeMillis() value is different on firebase database than generated on app logcat","body":"<p>When you call this in your code:</p>\n<pre><code>lastOnline.onDisconnect().setValue(offlineTime);\n</code></pre>\n<p>This sends a literal value to the server, with the instruction to write that value when it detects that the client has disconnected. The server has no knowledge of the meaning of the value, and can't make any changes to it.</p>\n<p>So if a different value is being written on the server than is being logged in the client, the only reason I can think of is that your calling <code>onDisconnect</code> (elsewhere?) too with a different value.</p>\n"},{"tags":[],"owner":{"account_id":23284749,"reputation":1,"user_id":17367746,"display_name":"Mr_Koi"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1640088196,"creation_date":1640088196,"answer_id":70435165,"question_id":70323201,"body_markdown":"System.currentTimeMillis() will get you the epoch time of your emulator , meaning whatever the emulator or the phone system time it will give it to you\r\n","title":"Android System.currentTimeMillis() value is different on firebase database than generated on app logcat","body":"<p>System.currentTimeMillis() will get you the epoch time of your emulator , meaning whatever the emulator or the phone system time it will give it to you</p>\n"},{"tags":[],"owner":{"account_id":8725718,"reputation":1712,"user_id":6527410,"accept_rate":53,"display_name":"androidXP"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1649773176,"creation_date":1649773176,"answer_id":71844331,"question_id":70323201,"body_markdown":"I want to say thanks to [@argzdev][1] and [@frank][2] For helping me out at github. The solution i got from Github by @argzdev:\r\n\r\n&gt; The reason this doesn&#39;t work is because you&#39;re trying\r\n&gt; to set a value after you&#39;ve already disconnected the connection, it&#39;s\r\n&gt; bound to cause issues.\r\n&gt; \r\n&gt; What you can do is change the logic of how you store the timestamp.\r\n&gt; Simply store the timestamp BEFORE you sever the connection. There\r\n&gt; shouldn&#39;t be any difference in time, even if there was, it would only\r\n&gt; be miniscule.\r\n&gt; \r\n&gt; Relevant code:\r\n&gt; \r\n&gt;\r\n\r\n     @Override\r\n    &gt;     protected void onResume() {\r\n    &gt;         super.onResume();\r\n    &gt;         Log.d(TAG, &quot;On Resume Running&quot;);\r\n    &gt; \r\n    &gt;         Online.setValue(Boolean.TRUE);\r\n    &gt;         lastOnline.removeValue();\r\n    &gt;         DatabaseInstance.goOnline();\r\n    &gt;     }\r\n    &gt; \r\n    &gt; @Override\r\n    &gt;     protected void onStop() {\r\n    &gt;         super.onStop();\r\n    &gt;         Log.d(TAG, &quot;ON STOP CALLING&quot;);\r\n    &gt; \r\n    &gt;         Online.setValue(Boolean.FALSE);\r\n    &gt;         lastOnline.setValue(&quot;&quot; + System.currentTimeMillis());\r\n    &gt;         DatabaseInstance.goOffline();\r\n    &gt;     }\r\n    &gt; \r\n\r\n&gt; Then you can simply remove the onDisconnect in your\r\n&gt; ValueEventListener.\r\n\r\n\r\n  [1]: https://github.com/argzdev\r\n  [2]: https://stackoverflow.com/users/209103/frank-van-puffelen","title":"Android System.currentTimeMillis() value is different on firebase database than generated on app logcat","body":"<p>I want to say thanks to <a href=\"https://github.com/argzdev\" rel=\"nofollow noreferrer\">@argzdev</a> and <a href=\"https://stackoverflow.com/users/209103/frank-van-puffelen\">@frank</a> For helping me out at github. The solution i got from Github by @argzdev:</p>\n<blockquote>\n<p>The reason this doesn't work is because you're trying\nto set a value after you've already disconnected the connection, it's\nbound to cause issues.</p>\n<p>What you can do is change the logic of how you store the timestamp.\nSimply store the timestamp BEFORE you sever the connection. There\nshouldn't be any difference in time, even if there was, it would only\nbe miniscule.</p>\n<p>Relevant code:</p>\n</blockquote>\n<pre><code> @Override\n&gt;     protected void onResume() {\n&gt;         super.onResume();\n&gt;         Log.d(TAG, &quot;On Resume Running&quot;);\n&gt; \n&gt;         Online.setValue(Boolean.TRUE);\n&gt;         lastOnline.removeValue();\n&gt;         DatabaseInstance.goOnline();\n&gt;     }\n&gt; \n&gt; @Override\n&gt;     protected void onStop() {\n&gt;         super.onStop();\n&gt;         Log.d(TAG, &quot;ON STOP CALLING&quot;);\n&gt; \n&gt;         Online.setValue(Boolean.FALSE);\n&gt;         lastOnline.setValue(&quot;&quot; + System.currentTimeMillis());\n&gt;         DatabaseInstance.goOffline();\n&gt;     }\n&gt; \n</code></pre>\n<blockquote>\n<p>Then you can simply remove the onDisconnect in your\nValueEventListener.</p>\n</blockquote>\n"}],"owner":{"account_id":8725718,"reputation":1712,"user_id":6527410,"accept_rate":53,"display_name":"androidXP"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":291,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":71844331,"answer_count":3,"score":3,"last_activity_date":1649773176,"creation_date":1639309230,"question_id":70323201,"body_markdown":"I am submitting a user last seen on Firebase Realtime Database and before setting value at firebase database I am generating a log with timestamp by `System.currentTimeMillis()` but when I compare it with logcat and database timestamp it submits a different timestamp on the server.\r\n\r\nLook at the logcat it shows the correct timestamp and it should be on the server too\r\n\r\n    Disconnect with the firebase server \r\n    Offline Time 5:01 pm 1639308715905\r\n\r\nFirebase Realtime Database Value of Timestamp [![enter image description here][1]][1]\r\n\r\n    1639308009264\r\n\r\nBoth Values are different that&#39;s how I get wrong last seen of the user\r\n\r\n    1639308715905 - App one \r\n    1639308009264 - Server One\r\n\r\n\r\nThe code I am using for log and to set a value on the server.\r\n\r\n    public class MainActivity extends AppCompatActivity {\r\n    \r\n        public static final String TAG = &quot;Main Activity&quot;;\r\n       \r\n        FirebaseDatabase DatabaseInstance;\r\n        DatabaseReference infoConnected;\r\n        \r\n    \r\n    \r\n    \r\n        @Override\r\n        protected void onResume() {\r\n            super.onResume();\r\n            Log.d(TAG, &quot;On Resume Running&quot;);        \r\n            DatabaseInstance.goOnline();\r\n            \r\n        }\r\n    \r\n    \r\n        @Override\r\n        protected void onStop() {\r\n            super.onStop();\r\n            Log.d(TAG, &quot;ON STOP CALLING&quot;);\r\n            DatabaseInstance.goOffline();\r\n    \r\n    \r\n        }\r\n    \r\n    \r\n        @Override\r\n        protected void onCreate(@Nullable Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            DatabaseInstance = FirebaseDatabase.getInstance(); // Single Instance\r\n            infoConnected = DatabaseInstance.getReference(&quot;.info/connected&quot;); // To check firebase connection state\r\n            initialiseOnlineStatus();\r\n    \r\n            setContentView(R.layout.main);\r\n        }\r\n            \r\n    \r\n    \r\n    \r\n        \r\n        private void initialiseOnlineStatus() {\r\n            final DatabaseReference Online = DatabaseInstance.getReference(&quot;Users/&quot; + userID + &quot;/Online&quot;);\r\n            final DatabaseReference lastOnline = DatabaseInstance.getReference(&quot;Users/&quot; + userID + &quot;/lastSeen&quot;);\r\n    \r\n    \r\n            infoConnected.addValueEventListener(new ValueEventListener() {\r\n                @Override\r\n                public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\r\n                    boolean connected = dataSnapshot.getValue(Boolean.class);\r\n    \r\n                    if (connected) {\r\n                        Online.setValue(Boolean.TRUE);\r\n                        lastOnline.removeValue();\r\n    \r\n                        Log.d(TAG, &quot;Connected To Firebase Server &quot;);\r\n                    } else {\r\n                        Log.d(TAG, &quot;Disconnect with firebase server &quot;);\r\n                        Online.onDisconnect().setValue(Boolean.FALSE);\r\n                        String offlineTime = String.valueOf(System.currentTimeMillis());\r\n                        Log.d(TAG, &quot;Offline Time &quot; + App_Functions.getLocalDeviceTimestamp(Long.parseLong(offlineTime)) + &quot; &quot; + offlineTime); // Get local device time from milliseconds\r\n                        lastOnline.onDisconnect().setValue(offlineTime);\r\n                        \r\n                    }\r\n    \r\n                }\r\n    \r\n                @Override\r\n                public void onCancelled(@NonNull DatabaseError databaseError) {\r\n    \r\n                }\r\n            });\r\n    \r\n    \r\n        }\r\n    \r\n    \r\n    \r\n    } \r\n\r\n**Update:** I noticed that the last timestamp (generated by an app) is uploading not the current one, I really don&#39;t understand how my last seen is not updating by the current timestamp. Please check [gist][2] too for the complete code\r\n\r\nI also noticed that on the launch of my activity, the firebase function call twice, first with value `boolean connected = dataSnapshot.getValue(Boolean. class);` false than true. So with the false value, I am getting the first timestamp which should not update when activity `onStop` calls and when the app calls `onStop` it updates the timestamp which was first created on app launch. \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/yzMEU.jpg\r\n  [2]: https://gist.github.com/varun7952/d6475a1b2dfe1b9b964bd829d53405b8","title":"Android System.currentTimeMillis() value is different on firebase database than generated on app logcat","body":"<p>I am submitting a user last seen on Firebase Realtime Database and before setting value at firebase database I am generating a log with timestamp by <code>System.currentTimeMillis()</code> but when I compare it with logcat and database timestamp it submits a different timestamp on the server.</p>\n<p>Look at the logcat it shows the correct timestamp and it should be on the server too</p>\n<pre><code>Disconnect with the firebase server \nOffline Time 5:01 pm 1639308715905\n</code></pre>\n<p>Firebase Realtime Database Value of Timestamp <a href=\"https://i.stack.imgur.com/yzMEU.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/yzMEU.jpg\" alt=\"enter image description here\" /></a></p>\n<pre><code>1639308009264\n</code></pre>\n<p>Both Values are different that's how I get wrong last seen of the user</p>\n<pre><code>1639308715905 - App one \n1639308009264 - Server One\n</code></pre>\n<p>The code I am using for log and to set a value on the server.</p>\n<pre><code>public class MainActivity extends AppCompatActivity {\n\n    public static final String TAG = &quot;Main Activity&quot;;\n   \n    FirebaseDatabase DatabaseInstance;\n    DatabaseReference infoConnected;\n    \n\n\n\n    @Override\n    protected void onResume() {\n        super.onResume();\n        Log.d(TAG, &quot;On Resume Running&quot;);        \n        DatabaseInstance.goOnline();\n        \n    }\n\n\n    @Override\n    protected void onStop() {\n        super.onStop();\n        Log.d(TAG, &quot;ON STOP CALLING&quot;);\n        DatabaseInstance.goOffline();\n\n\n    }\n\n\n    @Override\n    protected void onCreate(@Nullable Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        DatabaseInstance = FirebaseDatabase.getInstance(); // Single Instance\n        infoConnected = DatabaseInstance.getReference(&quot;.info/connected&quot;); // To check firebase connection state\n        initialiseOnlineStatus();\n\n        setContentView(R.layout.main);\n    }\n        \n\n\n\n    \n    private void initialiseOnlineStatus() {\n        final DatabaseReference Online = DatabaseInstance.getReference(&quot;Users/&quot; + userID + &quot;/Online&quot;);\n        final DatabaseReference lastOnline = DatabaseInstance.getReference(&quot;Users/&quot; + userID + &quot;/lastSeen&quot;);\n\n\n        infoConnected.addValueEventListener(new ValueEventListener() {\n            @Override\n            public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\n                boolean connected = dataSnapshot.getValue(Boolean.class);\n\n                if (connected) {\n                    Online.setValue(Boolean.TRUE);\n                    lastOnline.removeValue();\n\n                    Log.d(TAG, &quot;Connected To Firebase Server &quot;);\n                } else {\n                    Log.d(TAG, &quot;Disconnect with firebase server &quot;);\n                    Online.onDisconnect().setValue(Boolean.FALSE);\n                    String offlineTime = String.valueOf(System.currentTimeMillis());\n                    Log.d(TAG, &quot;Offline Time &quot; + App_Functions.getLocalDeviceTimestamp(Long.parseLong(offlineTime)) + &quot; &quot; + offlineTime); // Get local device time from milliseconds\n                    lastOnline.onDisconnect().setValue(offlineTime);\n                    \n                }\n\n            }\n\n            @Override\n            public void onCancelled(@NonNull DatabaseError databaseError) {\n\n            }\n        });\n\n\n    }\n\n\n\n} \n</code></pre>\n<p><strong>Update:</strong> I noticed that the last timestamp (generated by an app) is uploading not the current one, I really don't understand how my last seen is not updating by the current timestamp. Please check <a href=\"https://gist.github.com/varun7952/d6475a1b2dfe1b9b964bd829d53405b8\" rel=\"nofollow noreferrer\">gist</a> too for the complete code</p>\n<p>I also noticed that on the launch of my activity, the firebase function call twice, first with value <code>boolean connected = dataSnapshot.getValue(Boolean. class);</code> false than true. So with the false value, I am getting the first timestamp which should not update when activity <code>onStop</code> calls and when the app calls <code>onStop</code> it updates the timestamp which was first created on app launch.</p>\n"},{"tags":["java","apache-camel","transformation"],"answers":[{"tags":[],"owner":{"account_id":2269593,"reputation":43907,"user_id":1997376,"accept_rate":100,"display_name":"Nicolas Filotto"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1649773079,"creation_date":1649772076,"answer_id":71844089,"question_id":71841177,"body_markdown":"In case of a big file, your approach is not appropriate as it keeps the whole content of the file in memory. \r\n\r\nWhat you should do instead is to use the [Splitter EIP][1] with `\\n` as separator in [streaming mode][2] to split the content of your file by line with a very low memory footprint as next:\r\n\r\n```\r\nfrom(&quot;file:data/input?noop=true&quot;)\r\n    // Split the content of the file by line in streaming mode\r\n    .split(body().tokenize(&quot;\\n&quot;)).streaming()\r\n        // Replace the commas with colons in the current line\r\n        .transform(simple(&quot;${body.replace(&#39;,&#39;,&#39;:&#39;)}&quot;))\r\n        // Append the new converted line to the target file\r\n        .to(&quot;file:data/output?fileExist=Append&quot;) \r\n    .end()\r\n    .log(&quot;File converted&quot;);\r\n```\r\n\r\nFor better performances, you can also consider doing your conversion by chunks simply [by grouping n lines together][3], it consumes more memory but it is faster. The best size of group will depend on your heap size and the content of your lines.\r\n\r\nAssuming that you want to convert your file by chunk of 10 lines, the code would then be:\r\n\r\n```\r\nfrom(&quot;file:data/input?noop=true&quot;)\r\n    // Split the content of the file by 10 lines in streaming mode \r\n    // without skipping the first line\r\n    .split(body().tokenize(&quot;\\n&quot;, 10, false)).streaming()\r\n        // Replace the commas with colons in the current lines\r\n        .transform(simple(&quot;${body.replace(&#39;,&#39;,&#39;:&#39;)}&quot;))\r\n        // Append the new converted lines to the target file\r\n        .to(&quot;file:data/output?fileExist=Append&quot;) \r\n    .end()\r\n    .log(&quot;File converted&quot;);\r\n``` \r\n\r\n\r\n  [1]: https://camel.apache.org/components/next/eips/split-eip.html\r\n  [2]: https://camel.apache.org/components/next/eips/split-eip.html#_splitting_modes\r\n  [3]: https://camel.apache.org/components/next/eips/split-eip.html#_splitting_files_by_grouping_n_lines_together","title":"Best way to convert the content of a big file?","body":"<p>In case of a big file, your approach is not appropriate as it keeps the whole content of the file in memory.</p>\n<p>What you should do instead is to use the <a href=\"https://camel.apache.org/components/next/eips/split-eip.html\" rel=\"nofollow noreferrer\">Splitter EIP</a> with <code>\\n</code> as separator in <a href=\"https://camel.apache.org/components/next/eips/split-eip.html#_splitting_modes\" rel=\"nofollow noreferrer\">streaming mode</a> to split the content of your file by line with a very low memory footprint as next:</p>\n<pre><code>from(&quot;file:data/input?noop=true&quot;)\n    // Split the content of the file by line in streaming mode\n    .split(body().tokenize(&quot;\\n&quot;)).streaming()\n        // Replace the commas with colons in the current line\n        .transform(simple(&quot;${body.replace(',',':')}&quot;))\n        // Append the new converted line to the target file\n        .to(&quot;file:data/output?fileExist=Append&quot;) \n    .end()\n    .log(&quot;File converted&quot;);\n</code></pre>\n<p>For better performances, you can also consider doing your conversion by chunks simply <a href=\"https://camel.apache.org/components/next/eips/split-eip.html#_splitting_files_by_grouping_n_lines_together\" rel=\"nofollow noreferrer\">by grouping n lines together</a>, it consumes more memory but it is faster. The best size of group will depend on your heap size and the content of your lines.</p>\n<p>Assuming that you want to convert your file by chunk of 10 lines, the code would then be:</p>\n<pre><code>from(&quot;file:data/input?noop=true&quot;)\n    // Split the content of the file by 10 lines in streaming mode \n    // without skipping the first line\n    .split(body().tokenize(&quot;\\n&quot;, 10, false)).streaming()\n        // Replace the commas with colons in the current lines\n        .transform(simple(&quot;${body.replace(',',':')}&quot;))\n        // Append the new converted lines to the target file\n        .to(&quot;file:data/output?fileExist=Append&quot;) \n    .end()\n    .log(&quot;File converted&quot;);\n</code></pre>\n"}],"owner":{"account_id":4325497,"reputation":439,"user_id":3532455,"display_name":"Naresh Chaurasia"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":232,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1649773079,"creation_date":1649759811,"question_id":71841177,"body_markdown":"I am learning camel and while trying out examples for file transformation (comma separated to colon separated), I came across the following example:\r\n\r\n**Note**: The entire code is available at following location: https://github.com/dilipsundarraj1/TeachApacheCamel/blob/master/learncamel-transform\r\n\r\n```\r\npublic class CamelModifyFileProcessorRoute extends RouteBuilder {\r\n    public void configure() throws Exception {\r\n        from(&quot;file:data/input?noop=true&quot;)\r\n                .process(new CamelFileExampleProcessor())\r\n                .log(&quot;Received Message is ${body} and Headers are ${headers}&quot;)\r\n                .to(&quot;file:data/output?fileName=output.txt&quot;);\r\n    }\r\n}\r\n```\r\n\r\n**CamelFileExampleProcessor**\r\n\r\nIn the following code, the file is being transformed in-memory. \r\n\r\n\r\n```\r\npublic class CamelFileExampleProcessor implements org.apache.camel.Processor {\r\n\r\n    String newValue=&quot;&quot;;\r\n    private String readLine;\r\n\r\n    public void process(Exchange exchange) throws Exception {\r\n\r\n        GenericFile&lt;File&gt; file = (GenericFile) exchange.getIn().getBody();\r\n        String readLine=null;\r\n\r\n        if(file!=null){\r\n\r\n            FileReader file1 = new FileReader(file.getFile());\r\n            BufferedReader reader = new BufferedReader(file1);\r\n\r\n            while((readLine =reader.readLine()) !=null){\r\n                System.out.println(&quot;Read line is : &quot; + readLine);\r\n\r\n                String oldValue = readLine;\r\n\r\n                System.out.println(&quot;Old Value is : &quot; + oldValue);\r\n\r\n                newValue = newValue.concat(oldValue.replace(&quot;,&quot;, &quot;:&quot;)).concat(&quot;\\n&quot;);\r\n\r\n                System.out.println(&quot;New Value is :  &quot; + newValue);\r\n\r\n                exchange.getIn().setBody(newValue);\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n}\r\n```\r\n\r\n**Question**: In case the file size is very big, is this a good approach to follow or are there better alternatives?\r\n\r\n","title":"Best way to convert the content of a big file?","body":"<p>I am learning camel and while trying out examples for file transformation (comma separated to colon separated), I came across the following example:</p>\n<p><strong>Note</strong>: The entire code is available at following location: <a href=\"https://github.com/dilipsundarraj1/TeachApacheCamel/blob/master/learncamel-transform\" rel=\"nofollow noreferrer\">https://github.com/dilipsundarraj1/TeachApacheCamel/blob/master/learncamel-transform</a></p>\n<pre><code>public class CamelModifyFileProcessorRoute extends RouteBuilder {\n    public void configure() throws Exception {\n        from(&quot;file:data/input?noop=true&quot;)\n                .process(new CamelFileExampleProcessor())\n                .log(&quot;Received Message is ${body} and Headers are ${headers}&quot;)\n                .to(&quot;file:data/output?fileName=output.txt&quot;);\n    }\n}\n</code></pre>\n<p><strong>CamelFileExampleProcessor</strong></p>\n<p>In the following code, the file is being transformed in-memory.</p>\n<pre><code>public class CamelFileExampleProcessor implements org.apache.camel.Processor {\n\n    String newValue=&quot;&quot;;\n    private String readLine;\n\n    public void process(Exchange exchange) throws Exception {\n\n        GenericFile&lt;File&gt; file = (GenericFile) exchange.getIn().getBody();\n        String readLine=null;\n\n        if(file!=null){\n\n            FileReader file1 = new FileReader(file.getFile());\n            BufferedReader reader = new BufferedReader(file1);\n\n            while((readLine =reader.readLine()) !=null){\n                System.out.println(&quot;Read line is : &quot; + readLine);\n\n                String oldValue = readLine;\n\n                System.out.println(&quot;Old Value is : &quot; + oldValue);\n\n                newValue = newValue.concat(oldValue.replace(&quot;,&quot;, &quot;:&quot;)).concat(&quot;\\n&quot;);\n\n                System.out.println(&quot;New Value is :  &quot; + newValue);\n\n                exchange.getIn().setBody(newValue);\n            }\n\n        }\n\n    }\n}\n</code></pre>\n<p><strong>Question</strong>: In case the file size is very big, is this a good approach to follow or are there better alternatives?</p>\n"},{"tags":["java","spring","spring-security"],"comments":[{"owner":{"account_id":21488921,"reputation":4715,"user_id":15835039,"display_name":"Steve Riesenberg"},"score":1,"creation_date":1649700252,"post_id":71830777,"comment_id":126937735,"body_markdown":"Before troubleshooting further, try removing `.and().authorizeRequests()`. You should only have one call to `.authorizeRequests()` in your configuration.","body":"Before troubleshooting further, try removing <code>.and().authorizeRequests()</code>. You should only have one call to <code>.authorizeRequests()</code> in your configuration."},{"owner":{"account_id":12025758,"reputation":93,"user_id":8797762,"display_name":"EduMarques29"},"score":0,"creation_date":1649730817,"post_id":71830777,"comment_id":126944726,"body_markdown":"Steve, thanks. I adjust my code. But still looking for a  solution ^^","body":"Steve, thanks. I adjust my code. But still looking for a  solution ^^"},{"owner":{"account_id":21488921,"reputation":4715,"user_id":15835039,"display_name":"Steve Riesenberg"},"score":0,"creation_date":1649740493,"post_id":71830777,"comment_id":126946202,"body_markdown":"Looks like you are using a custom `JwtRequestFilter` as well. Can you provide it? It would also be helpful if you enabled trace logging in Spring Security (`logging.levelorg.springframework.security=trace`) and provide that in the question.","body":"Looks like you are using a custom <code>JwtRequestFilter</code> as well. Can you provide it? It would also be helpful if you enabled trace logging in Spring Security (<code>logging.levelorg.springframework.security=trace</code>) and provide that in the question."},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1649744934,"post_id":71830777,"comment_id":126947148,"body_markdown":"What is the name of your role? The `hasRole` will prefix it with `ROLE_` so it will check if your user has the role `ROLE_SYS_ADMIN`. Now if your role name is just `SYS_ADMIN` it will obviously not match. To fix either set the prefix to nothing or use `hasAuthority` instead of `hasRole`.","body":"What is the name of your role? The <code>hasRole</code> will prefix it with <code>ROLE_</code> so it will check if your user has the role <code>ROLE_SYS_ADMIN</code>. Now if your role name is just <code>SYS_ADMIN</code> it will obviously not match. To fix either set the prefix to nothing or use <code>hasAuthority</code> instead of <code>hasRole</code>."},{"owner":{"account_id":12025758,"reputation":93,"user_id":8797762,"display_name":"EduMarques29"},"score":0,"creation_date":1649790294,"post_id":71830777,"comment_id":126963997,"body_markdown":"Steve I update my question with more information. M.Deinum, in DB the role name is ROLE_SYS_ADMIN. I tried with hasRole(&quot;SYS_ADMIN) and hasAuthority(&quot;SYS_ADMIN&quot;), but still getting error.","body":"Steve I update my question with more information. M.Deinum, in DB the role name is ROLE_SYS_ADMIN. I tried with hasRole(&quot;SYS_ADMIN) and hasAuthority(&quot;SYS_ADMIN&quot;), but still getting error."},{"owner":{"account_id":6463892,"reputation":15974,"user_id":5277820,"accept_rate":68,"display_name":"dur"},"score":0,"creation_date":1650039416,"post_id":71830777,"comment_id":127029683,"body_markdown":"@EduMarques29 The log says that your user has no authorities. I guess `userDetails.getAuthorities()` is empty. Maybe your user has no roles in your database or your implementation of your `JwtUserDetailsService` is wrong.","body":"@EduMarques29 The log says that your user has no authorities. I guess <code>userDetails.getAuthorities()</code> is empty. Maybe your user has no roles in your database or your implementation of your <code>JwtUserDetailsService</code> is wrong."},{"owner":{"account_id":12025758,"reputation":93,"user_id":8797762,"display_name":"EduMarques29"},"score":1,"creation_date":1650162735,"post_id":71830777,"comment_id":127050811,"body_markdown":"@dur Perfect, that was exactly it, my userDetails.getAuthorities() was returning null and for this reason I was not able to validate the roles. Your answer helped me to solve the problem, I will vote it as the solution and thanks! I&#39;m starting on Spring and Spring Security, maybe it was a stupid mistake but it helped to learn. Thanks again for your help.","body":"@dur Perfect, that was exactly it, my userDetails.getAuthorities() was returning null and for this reason I was not able to validate the roles. Your answer helped me to solve the problem, I will vote it as the solution and thanks! I&#39;m starting on Spring and Spring Security, maybe it was a stupid mistake but it helped to learn. Thanks again for your help."}],"owner":{"account_id":12025758,"reputation":93,"user_id":8797762,"display_name":"EduMarques29"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":368,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1649772945,"creation_date":1649692306,"question_id":71830777,"body_markdown":"I&#39;m trying to restrict access to an endpoint based on roles. I searched here on stackoverflow for a solution and tried a few but was not successful in solving my problem. I tried to make the restriction both in the global configuration (WebSecurityConfig) and also with PreAuthorize Annotation, both returned 403 when called. My test user has the SYS_ADMIN role, I have already validated this flow and it actually has the role. Below are my sources.\r\n\r\nGlobal WebSecurityConfig\r\n```\r\n@Configuration\r\n@EnableWebSecurity\r\n@EnableAutoConfiguration\r\n@EnableGlobalMethodSecurity(prePostEnabled = true)\r\npublic class WebSecurityConfig extends WebSecurityConfigurerAdapter {\r\n\r\n\t@Autowired\r\n\tprivate JwtAuthenticationEntryPoint jwtAuthenticationEntryPoint;\r\n\r\n\t@Autowired\r\n\tprivate UserDetailsService jwtUserDetailsService;\r\n\r\n\t@Autowired\r\n\tprivate JwtRequestFilter jwtRequestFilter;\r\n\r\n\t@Autowired\r\n\tpublic void configureGlobal(AuthenticationManagerBuilder auth) throws Exception {\r\n\t\tauth.userDetailsService(jwtUserDetailsService).passwordEncoder(passwordEncoder());\r\n\t}\r\n\r\n\t@Override\r\n\t@Bean\r\n\tprotected AuthenticationManager authenticationManager() throws Exception {\r\n\t\treturn super.authenticationManager();\r\n\t}\r\n\r\n\t@Override\r\n\tprotected void configure(HttpSecurity httpSecurity) throws Exception {\r\n\t\thttpSecurity.headers().frameOptions().disable();\r\n\r\n\t\thttpSecurity.cors().and()\r\n\t\t\t\t.csrf().disable()\r\n\t\t\t\t.authorizeRequests()\r\n\t\t\t\t\t.antMatchers(&quot;/spring-security-rest/**&quot;).permitAll().and()\r\n\t\t\t\t.authorizeRequests()\r\n\t\t\t\t\t.antMatchers(HttpMethod.POST, &quot;/api/authentication/**&quot;).permitAll()\r\n\t\t\t\t\t.antMatchers(HttpMethod.POST, &quot;/api/persons/**&quot;).hasRole(&quot;SYS_ADMIN&quot;)\r\n\t\t\t\t\t.antMatchers(HttpMethod.GET, &quot;/api/roles/**&quot;).permitAll()\r\n\t\t\t\t\t.anyRequest().authenticated().and()\r\n\t\t\t\t.headers().frameOptions().sameOrigin().and()\r\n\t\t\t\t.exceptionHandling().authenticationEntryPoint(jwtAuthenticationEntryPoint).and()\r\n\t\t\t\t.sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS);\r\n\r\n\t\thttpSecurity.addFilterBefore(jwtRequestFilter, UsernamePasswordAuthenticationFilter.class);\r\n\t}\r\n\r\n\t@Override\r\n\tpublic void configure(WebSecurity web) throws Exception {\r\n\t\tweb.ignoring().mvcMatchers(HttpMethod.OPTIONS, &quot;/**&quot;);\r\n\t\tweb.ignoring().mvcMatchers(&quot;/swagger-ui.html/**&quot;, &quot;/configuration/**&quot;, &quot;/swagger-resources/**&quot;, &quot;/v2/api-docs&quot;,\r\n\t\t\t\t&quot;/webjars/**&quot;);\r\n\t}\r\n\r\n\t@Bean\r\n\tpublic PasswordEncoder passwordEncoder() {\r\n\t\treturn NoOpPasswordEncoder.getInstance();\r\n\t}\r\n\r\n\t@Bean\r\n\tCorsConfigurationSource corsConfigurationSource() {\r\n\t\tCorsConfiguration configuration = new CorsConfiguration();\r\n\r\n\t\tconfiguration.setAllowedOrigins(Arrays.asList(&quot;*&quot;));\r\n\t\tconfiguration.setAllowedMethods(Arrays.asList(&quot;GET&quot;, &quot;POST&quot;, &quot;PUT&quot;, &quot;PATCH&quot;, &quot;DELETE&quot;, &quot;OPTIONS&quot;));\r\n\t\tUrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();\r\n\t\tsource.registerCorsConfiguration(&quot;/**&quot;, configuration);\r\n\t\treturn source;\r\n\t}\r\n}\r\n```\r\n\r\nPerson Controller\r\n\r\n``` \r\npackage br.com.aquamain.backend.controller;\r\n\r\nimport java.util.List;\r\n\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.http.HttpStatus;\r\nimport org.springframework.http.ResponseEntity;\r\nimport org.springframework.security.access.annotation.Secured;\r\nimport org.springframework.security.access.prepost.PreAuthorize;\r\nimport org.springframework.web.bind.annotation.DeleteMapping;\r\nimport org.springframework.web.bind.annotation.GetMapping;\r\nimport org.springframework.web.bind.annotation.PathVariable;\r\nimport org.springframework.web.bind.annotation.PostMapping;\r\nimport org.springframework.web.bind.annotation.PutMapping;\r\nimport org.springframework.web.bind.annotation.RequestBody;\r\nimport org.springframework.web.bind.annotation.RequestMapping;\r\nimport org.springframework.web.bind.annotation.RequestParam;\r\nimport org.springframework.web.bind.annotation.RestController;\r\n\r\nimport br.com.aquamain.backend.exception.InvalidPersonException;\r\nimport br.com.aquamain.backend.model.CustomPage;\r\nimport br.com.aquamain.backend.model.Person;\r\nimport br.com.aquamain.backend.service.PersonService;\r\nimport io.swagger.annotations.Api;\r\nimport io.swagger.annotations.ApiOperation;\r\n\r\n@RestController\r\n@RequestMapping(&quot;/api/persons&quot;)\r\n@Api(tags = &quot;Persons&quot;)\r\npublic class PersonController {\r\n\r\n\t@Autowired\r\n\tprivate PersonService personService;\r\n\t\r\n    ...\r\n\r\n\t@PostMapping(path = &quot;new&quot;, consumes = &quot;application/json&quot;)\r\n\t@ApiOperation(value = &quot;Create a new person.&quot;)\r\n\tpublic ResponseEntity&lt;?&gt; save(@RequestBody Person person) {\r\n\t\ttry {\r\n\t\t\tCustomPage&lt;Person&gt; persons = this.personService.save(person);\r\n\t\t\treturn new ResponseEntity&lt;CustomPage&lt;Person&gt;&gt;(persons, HttpStatus.CREATED);\t\t\t\r\n\t\t} catch (InvalidPersonException error) {\r\n\t\t\treturn new ResponseEntity&lt;String&gt;(error.getMessage(), HttpStatus.BAD_REQUEST);\r\n\t\t}\r\n\t}\r\n\t\r\n\t...\r\n}\r\n ```\r\n\r\nRole Model\r\n\r\n``` \r\npackage br.com.aquamain.backend.model;\r\n\r\nimport java.util.List;\r\n\r\nimport javax.persistence.Column;\r\nimport javax.persistence.Entity;\r\nimport javax.persistence.FetchType;\r\nimport javax.persistence.GeneratedValue;\r\nimport javax.persistence.GenerationType;\r\nimport javax.persistence.Id;\r\nimport javax.persistence.ManyToMany;\r\nimport javax.persistence.Table;\r\n\r\nimport com.fasterxml.jackson.annotation.JsonIgnoreProperties;\r\nimport com.fasterxml.jackson.annotation.JsonInclude;\r\nimport com.fasterxml.jackson.annotation.JsonInclude.Include;\r\n\r\n@Entity\r\n@JsonIgnoreProperties({ &quot;hibernateLazyInitializer&quot;, &quot;handler&quot; })\r\n@Table(name = &quot;AQUARIUM_MAINTANCE_MONITOR_ROLE&quot;)\r\npublic class Role {\r\n\r\n\t@Id\r\n\t@GeneratedValue(strategy = GenerationType.IDENTITY)\r\n\t@Column(name = &quot;ID_ROLE&quot;, nullable = false, precision = 9, scale = 0)\r\n\tprivate Integer id;\r\n\t\r\n\t@JsonIgnoreProperties(value = {&quot;roles&quot;})\r\n\t@ManyToMany(fetch = FetchType.LAZY, mappedBy = &quot;roles&quot;)\r\n\t@JsonInclude(Include.NON_NULL)\r\n\tprivate List&lt;User&gt; users;\r\n\t\r\n\t@Column(name = &quot;CODE_ROLE&quot;, nullable = true, length = 255)\r\n\tprivate String code;\r\n\t\r\n\t@Column(name = &quot;DESCRIPTION_ROLE&quot;, nullable = true, length = 255)\r\n\tprivate String description;\r\n\t\r\n\t@Column(name = &quot;NAME_ROLE&quot;, nullable = true, length = 255)\r\n\tprivate String name;\r\n\r\n\tpublic Integer getId() {\r\n\t\treturn id;\r\n\t}\r\n\r\n\tpublic void setId(Integer id) {\r\n\t\tthis.id = id;\r\n\t}\r\n\r\n\tpublic List&lt;User&gt; getUsers() {\r\n\t\treturn users;\r\n\t}\r\n\r\n\tpublic void setUsers(List&lt;User&gt; users) {\r\n\t\tthis.users = users;\r\n\t}\r\n\r\n\tpublic String getCode() {\r\n\t\treturn code;\r\n\t}\r\n\r\n\tpublic void setCode(String code) {\r\n\t\tthis.code = code;\r\n\t}\r\n\r\n\tpublic String getDescription() {\r\n\t\treturn description;\r\n\t}\r\n\r\n\tpublic void setDescription(String description) {\r\n\t\tthis.description = description;\r\n\t}\r\n\r\n\tpublic String getName() {\r\n\t\treturn name;\r\n\t}\r\n\r\n\tpublic void setName(String name) {\r\n\t\tthis.name = name;\r\n\t}\t\r\n}\r\n```\r\n\r\nUpdate:\r\nJwtRequestFilter\r\n```\r\npackage br.com.aquamain.backend.security;\r\n\r\nimport java.io.IOException;\r\n\r\nimport javax.servlet.FilterChain;\r\nimport javax.servlet.ServletException;\r\nimport javax.servlet.http.HttpServletRequest;\r\nimport javax.servlet.http.HttpServletResponse;\r\n\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.security.authentication.UsernamePasswordAuthenticationToken;\r\nimport org.springframework.security.core.context.SecurityContextHolder;\r\nimport org.springframework.security.core.userdetails.UserDetails;\r\nimport org.springframework.security.web.authentication.WebAuthenticationDetailsSource;\r\nimport org.springframework.stereotype.Component;\r\nimport org.springframework.web.filter.OncePerRequestFilter;\r\n\r\nimport br.com.aquamain.backend.security.service.JwtUserDetailsService;\r\nimport br.com.aquamain.backend.security.utils.JwtTokenUtils;\r\nimport io.jsonwebtoken.ExpiredJwtException;\r\n\r\n@Component\r\npublic class JwtRequestFilter extends OncePerRequestFilter {\r\n\t\r\n\t@Autowired\r\n\tprivate JwtUserDetailsService jwtUserDetailsService;\r\n\r\n\t@Autowired\r\n\tprivate JwtTokenUtils jwtTokenUtil;\r\n\r\n\t@Override\r\n\tprotected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain chain)\r\n\t\t\tthrows ServletException, IOException {\r\n\t\tfinal String requestTokenHeader = request.getHeader(&quot;Authorization&quot;);\r\n\r\n\t\tString username = null;\r\n\t\tString jwtToken = null;\r\n\r\n\t\tif (requestTokenHeader != null &amp;&amp; requestTokenHeader.startsWith(&quot;Bearer &quot;)) {\r\n\t\t\tjwtToken = requestTokenHeader.substring(7);\r\n\t\t\ttry {\r\n\t\t\t\tusername = jwtTokenUtil.getUsernameFromToken(jwtToken);\r\n\t\t\t} catch (IllegalArgumentException e) {\r\n\t\t\t\tSystem.out.println(&quot;Unable to get JWT Token&quot;);\r\n\t\t\t} catch (ExpiredJwtException e) {\r\n\t\t\t\tSystem.out.println(&quot;JWT Token has expired&quot;);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tlogger.warn(&quot;JWT Token does not begin with Bearer String&quot;);\r\n\t\t}\r\n\r\n\t\tif (username != null &amp;&amp; SecurityContextHolder.getContext().getAuthentication() == null) {\r\n\t\t\tUserDetails userDetails = this.jwtUserDetailsService.loadUserByUsername(username);\r\n\r\n\t\t\tif (jwtTokenUtil.validateToken(jwtToken, userDetails)) {\r\n\t\t\t\tUsernamePasswordAuthenticationToken usernamePasswordAuthenticationToken = new UsernamePasswordAuthenticationToken(\r\n\t\t\t\t\t\tuserDetails, null, userDetails.getAuthorities());\r\n\t\t\t\tusernamePasswordAuthenticationToken\r\n\t\t\t\t\t\t.setDetails(new WebAuthenticationDetailsSource().buildDetails(request));\r\n\r\n\t\t\t\tSecurityContextHolder.getContext().setAuthentication(usernamePasswordAuthenticationToken);\r\n\t\t\t}\r\n\t\t}\r\n\t\tchain.doFilter(request, response);\r\n\t}\r\n}\r\n```\r\n\r\nLog:\r\n```\r\n[32m2022-04-12 11:14:54 TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Mvc [pattern=&#39;/**&#39;, OPTIONS], Filters=[]] (1/7)\r\n[0;39m[32m2022-04-12 11:14:54 TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Mvc [pattern=&#39;/swagger-ui.html/**&#39;], Filters=[]] (2/7)\r\n[0;39m[32m2022-04-12 11:14:54 TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Mvc [pattern=&#39;/configuration/**&#39;], Filters=[]] (3/7)\r\n[0;39m[32m2022-04-12 11:14:54 TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Mvc [pattern=&#39;/swagger-resources/**&#39;], Filters=[]] (4/7)\r\n[0;39m[32m2022-04-12 11:14:54 TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Mvc [pattern=&#39;/v2/api-docs&#39;], Filters=[]] (5/7)\r\n[0;39m[32m2022-04-12 11:14:54 TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Mvc [pattern=&#39;/webjars/**&#39;], Filters=[]] (6/7)\r\n[0;39m[32m2022-04-12 11:14:54 TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@6d29e44e, org.springframework.security.web.context.SecurityContextPersistenceFilter@431fc40, org.springframework.security.web.header.HeaderWriterFilter@72dd71b5, org.springframework.web.filter.CorsFilter@258798b6, org.springframework.security.web.authentication.logout.LogoutFilter@48124669, br.com.aquamain.backend.security.JwtRequestFilter@4efcbbde, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@293ce7b0, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@7879d247, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@5e7f5483, org.springframework.security.web.session.SessionManagementFilter@4ce3c16a, org.springframework.security.web.access.ExceptionTranslationFilter@58ad93f, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@6f778913]] (7/7)\r\n[0;39m[32m2022-04-12 11:14:54 DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/persons/new\r\n[0;39m[32m2022-04-12 11:14:54 TRACE o.s.security.web.FilterChainProxy - Invoking WebAsyncManagerIntegrationFilter (1/12)\r\n[0;39m[32m2022-04-12 11:14:54 TRACE o.s.security.web.FilterChainProxy - Invoking SecurityContextPersistenceFilter (2/12)\r\n[0;39m[32m2022-04-12 11:14:54 DEBUG o.s.s.w.c.SecurityContextPersistenceFilter - Set SecurityContextHolder to empty SecurityContext\r\n[0;39m[32m2022-04-12 11:14:54 TRACE o.s.security.web.FilterChainProxy - Invoking HeaderWriterFilter (3/12)\r\n[0;39m[32m2022-04-12 11:14:54 TRACE o.s.security.web.FilterChainProxy - Invoking CorsFilter (4/12)\r\n[0;39m[32m2022-04-12 11:14:54 TRACE o.s.security.web.FilterChainProxy - Invoking LogoutFilter (5/12)\r\n[0;39m[32m2022-04-12 11:14:54 TRACE o.s.s.w.a.logout.LogoutFilter - Did not match request to Or [Ant [pattern=&#39;/logout&#39;, GET], Ant [pattern=&#39;/logout&#39;, POST], Ant [pattern=&#39;/logout&#39;, PUT], Ant [pattern=&#39;/logout&#39;, DELETE]]\r\n[0;39m[32m2022-04-12 11:14:54 TRACE o.s.security.web.FilterChainProxy - Invoking JwtRequestFilter (6/12)\r\n[0;39mHibernate: \r\n    /* select\r\n        generatedAlias0 \r\n    from\r\n        User as generatedAlias0 \r\n    where\r\n        generatedAlias0.username=:param0 */ select\r\n            user0_.ID_USER as id_user1_3_,\r\n            user0_.LAST_LOGIN_DATE as last_log2_3_,\r\n            user0_.PASSWORD_USER as password3_3_,\r\n            user0_.RESET_PASSWORD_TOKEN as reset_pa4_3_,\r\n            user0_.USERNAME_USER as username5_3_ \r\n        from\r\n            AQUARIUM_MAINTANCE_MONITOR_USER user0_ \r\n        where\r\n            user0_.USERNAME_USER=?\r\nHibernate: \r\n    /* load br.com.aquamain.backend.model.Person */ select\r\n        person0_.ID_PERSON as id_perso1_0_1_,\r\n        person0_.BIRTHDAY_PERSON as birthday2_0_1_,\r\n        person0_.NAME_PERSON as name_per3_0_1_,\r\n        person0_.ID_USER as id_user4_0_1_,\r\n        user1_.ID_USER as id_user1_3_0_,\r\n        user1_.LAST_LOGIN_DATE as last_log2_3_0_,\r\n        user1_.PASSWORD_USER as password3_3_0_,\r\n        user1_.RESET_PASSWORD_TOKEN as reset_pa4_3_0_,\r\n        user1_.USERNAME_USER as username5_3_0_ \r\n    from\r\n        AQUARIUM_MAINTANCE_MONITOR_PERSON person0_ \r\n    left outer join\r\n        AQUARIUM_MAINTANCE_MONITOR_USER user1_ \r\n            on person0_.ID_USER=user1_.ID_USER \r\n    where\r\n        person0_.ID_USER=?\r\n[32m2022-04-12 11:14:54 TRACE o.s.security.web.FilterChainProxy - Invoking RequestCacheAwareFilter (7/12)\r\n[0;39m[32m2022-04-12 11:14:54 TRACE o.s.security.web.FilterChainProxy - Invoking SecurityContextHolderAwareRequestFilter (8/12)\r\n[0;39m[32m2022-04-12 11:14:54 TRACE o.s.security.web.FilterChainProxy - Invoking AnonymousAuthenticationFilter (9/12)\r\n[0;39m[32m2022-04-12 11:14:54 TRACE o.s.s.w.a.AnonymousAuthenticationFilter - Did not set SecurityContextHolder since already authenticated UsernamePasswordAuthenticationToken [Principal=Id:1\r\nUsername:tony.stark\r\nLast Login:2022-04-12T11:14:30.058-03:00\r\n, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[]]\r\n[0;39m[32m2022-04-12 11:14:54 TRACE o.s.security.web.FilterChainProxy - Invoking SessionManagementFilter (10/12)\r\n[0;39m[32m2022-04-12 11:14:54 TRACE o.s.s.w.a.s.CompositeSessionAuthenticationStrategy - Preparing session with ChangeSessionIdAuthenticationStrategy (1/1)\r\n[0;39m[32m2022-04-12 11:14:54 TRACE o.s.security.web.FilterChainProxy - Invoking ExceptionTranslationFilter (11/12)\r\n[0;39m[32m2022-04-12 11:14:54 TRACE o.s.security.web.FilterChainProxy - Invoking FilterSecurityInterceptor (12/12)\r\n[0;39m[32m2022-04-12 11:14:54 TRACE o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource - Did not match request to Ant [pattern=&#39;/spring-security-rest/**&#39;] - [permitAll] (1/5)\r\n[0;39m[32m2022-04-12 11:14:54 TRACE o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource - Did not match request to Ant [pattern=&#39;/api/authentication/**&#39;, POST] - [permitAll] (2/5)\r\n[0;39m[32m2022-04-12 11:14:54 TRACE o.s.s.w.a.i.FilterSecurityInterceptor - Did not re-authenticate UsernamePasswordAuthenticationToken [Principal=Id:1\r\nUsername:tony.stark\r\nLast Login:2022-04-12T11:14:30.058-03:00\r\n, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[]] before authorizing\r\n[0;39m[32m2022-04-12 11:14:54 TRACE o.s.s.w.a.i.FilterSecurityInterceptor - Authorizing filter invocation [POST /api/persons/new] with attributes [hasRole(&#39;ROLE_SYS_ADMIN&#39;)]\r\n[0;39m[32m2022-04-12 11:14:54 TRACE o.s.s.w.a.e.WebExpressionVoter - Voted to deny authorization\r\n[0;39m[32m2022-04-12 11:14:54 TRACE o.s.s.w.a.i.FilterSecurityInterceptor - Failed to authorize filter invocation [POST /api/persons/new] with attributes [hasRole(&#39;ROLE_SYS_ADMIN&#39;)] using AffirmativeBased [DecisionVoters=[org.springframework.security.web.access.expression.WebExpressionVoter@4f47d6c4], AllowIfAllAbstainDecisions=false]\r\n[0;39m[32m2022-04-12 11:14:54 TRACE o.s.s.w.a.ExceptionTranslationFilter - Sending UsernamePasswordAuthenticationToken [Principal=Id:1\r\nUsername:tony.stark\r\nLast Login:2022-04-12T11:14:30.058-03:00\r\n, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[]] to access denied handler since access is denied\r\n[0;39morg.springframework.security.access.AccessDeniedException: Access is denied\r\n\tat org.springframework.security.access.vote.AffirmativeBased.decide(AffirmativeBased.java:73)\r\n\tat org.springframework.security.access.intercept.AbstractSecurityInterceptor.attemptAuthorization(AbstractSecurityInterceptor.java:238)\r\n\tat org.springframework.security.access.intercept.AbstractSecurityInterceptor.beforeInvocation(AbstractSecurityInterceptor.java:208)\r\n\tat org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:113)\r\n\tat org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n\tat org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:121)\r\n\tat org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:115)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n\tat org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)\r\n\tat org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n\tat org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:105)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n\tat org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n\tat org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n\tat br.com.aquamain.backend.security.JwtRequestFilter.doFilterInternal(JwtRequestFilter.java:64)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n\tat org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)\r\n\tat org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n\tat org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n\tat org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)\r\n\tat org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n\tat org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110)\r\n\tat org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n\tat org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n\tat org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211)\r\n\tat org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183)\r\n\tat org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358)\r\n\tat org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:190)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:163)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:190)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:163)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:382)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:893)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1723)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Thread.java:833)\r\n[32m2022-04-12 11:14:54 DEBUG o.s.s.w.a.AccessDeniedHandlerImpl - Responding with 403 status code\r\n[0;39m[32m2022-04-12 11:14:54 TRACE o.s.s.w.h.writers.HstsHeaderWriter - Not injecting HSTS header since it did not match request to [Is Secure]\r\n[0;39m[32m2022-04-12 11:14:54 DEBUG o.s.s.w.c.SecurityContextPersistenceFilter - Cleared SecurityContextHolder to complete request\r\n[0;39m[32m2022-04-12 11:14:54 TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Mvc [pattern=&#39;/**&#39;, OPTIONS], Filters=[]] (1/7)\r\n[0;39m[32m2022-04-12 11:14:54 TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Mvc [pattern=&#39;/swagger-ui.html/**&#39;], Filters=[]] (2/7)\r\n[0;39m[32m2022-04-12 11:14:54 TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Mvc [pattern=&#39;/configuration/**&#39;], Filters=[]] (3/7)\r\n[0;39m[32m2022-04-12 11:14:54 TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Mvc [pattern=&#39;/swagger-resources/**&#39;], Filters=[]] (4/7)\r\n[0;39m[32m2022-04-12 11:14:54 TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Mvc [pattern=&#39;/v2/api-docs&#39;], Filters=[]] (5/7)\r\n[0;39m[32m2022-04-12 11:14:54 TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Mvc [pattern=&#39;/webjars/**&#39;], Filters=[]] (6/7)\r\n[0;39m[32m2022-04-12 11:14:54 TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@6d29e44e, org.springframework.security.web.context.SecurityContextPersistenceFilter@431fc40, org.springframework.security.web.header.HeaderWriterFilter@72dd71b5, org.springframework.web.filter.CorsFilter@258798b6, org.springframework.security.web.authentication.logout.LogoutFilter@48124669, br.com.aquamain.backend.security.JwtRequestFilter@4efcbbde, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@293ce7b0, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@7879d247, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@5e7f5483, org.springframework.security.web.session.SessionManagementFilter@4ce3c16a, org.springframework.security.web.access.ExceptionTranslationFilter@58ad93f, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@6f778913]] (7/7)\r\n[0;39m[32m2022-04-12 11:14:54 DEBUG o.s.security.web.FilterChainProxy - Securing POST /error\r\n[0;39m[32m2022-04-12 11:14:54 TRACE o.s.security.web.FilterChainProxy - Invoking WebAsyncManagerIntegrationFilter (1/12)\r\n[0;39m[32m2022-04-12 11:14:54 TRACE o.s.security.web.FilterChainProxy - Invoking SecurityContextPersistenceFilter (2/12)\r\n[0;39m[32m2022-04-12 11:14:54 DEBUG o.s.s.w.c.SecurityContextPersistenceFilter - Set SecurityContextHolder to empty SecurityContext\r\n[0;39m[32m2022-04-12 11:14:54 TRACE o.s.security.web.FilterChainProxy - Invoking HeaderWriterFilter (3/12)\r\n[0;39m[32m2022-04-12 11:14:54 TRACE o.s.security.web.FilterChainProxy - Invoking CorsFilter (4/12)\r\n[0;39m[32m2022-04-12 11:14:54 TRACE o.s.security.web.FilterChainProxy - Invoking LogoutFilter (5/12)\r\n[0;39m[32m2022-04-12 11:14:54 TRACE o.s.s.w.a.logout.LogoutFilter - Did not match request to Or [Ant [pattern=&#39;/logout&#39;, GET], Ant [pattern=&#39;/logout&#39;, POST], Ant [pattern=&#39;/logout&#39;, PUT], Ant [pattern=&#39;/logout&#39;, DELETE]]\r\n[0;39m[32m2022-04-12 11:14:54 TRACE o.s.security.web.FilterChainProxy - Invoking JwtRequestFilter (6/12)\r\n[0;39m[32m2022-04-12 11:14:54 TRACE o.s.security.web.FilterChainProxy - Invoking RequestCacheAwareFilter (7/12)\r\n[0;39m[32m2022-04-12 11:14:54 TRACE o.s.security.web.FilterChainProxy - Invoking SecurityContextHolderAwareRequestFilter (8/12)\r\n[0;39m[32m2022-04-12 11:14:54 TRACE o.s.security.web.FilterChainProxy - Invoking AnonymousAuthenticationFilter (9/12)\r\n[0;39m[32m2022-04-12 11:14:54 TRACE o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to AnonymousAuthenticationToken [Principal=anonymousUser, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ANONYMOUS]]\r\n[0;39m[32m2022-04-12 11:14:54 TRACE o.s.security.web.FilterChainProxy - Invoking SessionManagementFilter (10/12)\r\n[0;39m[32m2022-04-12 11:14:54 TRACE o.s.security.web.FilterChainProxy - Invoking ExceptionTranslationFilter (11/12)\r\n[0;39m[32m2022-04-12 11:14:54 TRACE o.s.security.web.FilterChainProxy - Invoking FilterSecurityInterceptor (12/12)\r\n[0;39m[32m2022-04-12 11:14:54 DEBUG o.s.security.web.FilterChainProxy - Secured POST /error\r\n[0;39m[32m2022-04-12 11:14:54 DEBUG o.s.s.w.c.SecurityContextPersistenceFilter - Cleared SecurityContextHolder to complete request\r\n```\r\n","title":"Spring Secutirty hasRole Always Return 403","body":"<p>I'm trying to restrict access to an endpoint based on roles. I searched here on stackoverflow for a solution and tried a few but was not successful in solving my problem. I tried to make the restriction both in the global configuration (WebSecurityConfig) and also with PreAuthorize Annotation, both returned 403 when called. My test user has the SYS_ADMIN role, I have already validated this flow and it actually has the role. Below are my sources.</p>\n<p>Global WebSecurityConfig</p>\n<pre><code>@Configuration\n@EnableWebSecurity\n@EnableAutoConfiguration\n@EnableGlobalMethodSecurity(prePostEnabled = true)\npublic class WebSecurityConfig extends WebSecurityConfigurerAdapter {\n\n    @Autowired\n    private JwtAuthenticationEntryPoint jwtAuthenticationEntryPoint;\n\n    @Autowired\n    private UserDetailsService jwtUserDetailsService;\n\n    @Autowired\n    private JwtRequestFilter jwtRequestFilter;\n\n    @Autowired\n    public void configureGlobal(AuthenticationManagerBuilder auth) throws Exception {\n        auth.userDetailsService(jwtUserDetailsService).passwordEncoder(passwordEncoder());\n    }\n\n    @Override\n    @Bean\n    protected AuthenticationManager authenticationManager() throws Exception {\n        return super.authenticationManager();\n    }\n\n    @Override\n    protected void configure(HttpSecurity httpSecurity) throws Exception {\n        httpSecurity.headers().frameOptions().disable();\n\n        httpSecurity.cors().and()\n                .csrf().disable()\n                .authorizeRequests()\n                    .antMatchers(&quot;/spring-security-rest/**&quot;).permitAll().and()\n                .authorizeRequests()\n                    .antMatchers(HttpMethod.POST, &quot;/api/authentication/**&quot;).permitAll()\n                    .antMatchers(HttpMethod.POST, &quot;/api/persons/**&quot;).hasRole(&quot;SYS_ADMIN&quot;)\n                    .antMatchers(HttpMethod.GET, &quot;/api/roles/**&quot;).permitAll()\n                    .anyRequest().authenticated().and()\n                .headers().frameOptions().sameOrigin().and()\n                .exceptionHandling().authenticationEntryPoint(jwtAuthenticationEntryPoint).and()\n                .sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS);\n\n        httpSecurity.addFilterBefore(jwtRequestFilter, UsernamePasswordAuthenticationFilter.class);\n    }\n\n    @Override\n    public void configure(WebSecurity web) throws Exception {\n        web.ignoring().mvcMatchers(HttpMethod.OPTIONS, &quot;/**&quot;);\n        web.ignoring().mvcMatchers(&quot;/swagger-ui.html/**&quot;, &quot;/configuration/**&quot;, &quot;/swagger-resources/**&quot;, &quot;/v2/api-docs&quot;,\n                &quot;/webjars/**&quot;);\n    }\n\n    @Bean\n    public PasswordEncoder passwordEncoder() {\n        return NoOpPasswordEncoder.getInstance();\n    }\n\n    @Bean\n    CorsConfigurationSource corsConfigurationSource() {\n        CorsConfiguration configuration = new CorsConfiguration();\n\n        configuration.setAllowedOrigins(Arrays.asList(&quot;*&quot;));\n        configuration.setAllowedMethods(Arrays.asList(&quot;GET&quot;, &quot;POST&quot;, &quot;PUT&quot;, &quot;PATCH&quot;, &quot;DELETE&quot;, &quot;OPTIONS&quot;));\n        UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();\n        source.registerCorsConfiguration(&quot;/**&quot;, configuration);\n        return source;\n    }\n}\n</code></pre>\n<p>Person Controller</p>\n<pre><code>package br.com.aquamain.backend.controller;\n\nimport java.util.List;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.http.HttpStatus;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.security.access.annotation.Secured;\nimport org.springframework.security.access.prepost.PreAuthorize;\nimport org.springframework.web.bind.annotation.DeleteMapping;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.PathVariable;\nimport org.springframework.web.bind.annotation.PostMapping;\nimport org.springframework.web.bind.annotation.PutMapping;\nimport org.springframework.web.bind.annotation.RequestBody;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RequestParam;\nimport org.springframework.web.bind.annotation.RestController;\n\nimport br.com.aquamain.backend.exception.InvalidPersonException;\nimport br.com.aquamain.backend.model.CustomPage;\nimport br.com.aquamain.backend.model.Person;\nimport br.com.aquamain.backend.service.PersonService;\nimport io.swagger.annotations.Api;\nimport io.swagger.annotations.ApiOperation;\n\n@RestController\n@RequestMapping(&quot;/api/persons&quot;)\n@Api(tags = &quot;Persons&quot;)\npublic class PersonController {\n\n    @Autowired\n    private PersonService personService;\n    \n    ...\n\n    @PostMapping(path = &quot;new&quot;, consumes = &quot;application/json&quot;)\n    @ApiOperation(value = &quot;Create a new person.&quot;)\n    public ResponseEntity&lt;?&gt; save(@RequestBody Person person) {\n        try {\n            CustomPage&lt;Person&gt; persons = this.personService.save(person);\n            return new ResponseEntity&lt;CustomPage&lt;Person&gt;&gt;(persons, HttpStatus.CREATED);         \n        } catch (InvalidPersonException error) {\n            return new ResponseEntity&lt;String&gt;(error.getMessage(), HttpStatus.BAD_REQUEST);\n        }\n    }\n    \n    ...\n}\n</code></pre>\n<p>Role Model</p>\n<pre><code>package br.com.aquamain.backend.model;\n\nimport java.util.List;\n\nimport javax.persistence.Column;\nimport javax.persistence.Entity;\nimport javax.persistence.FetchType;\nimport javax.persistence.GeneratedValue;\nimport javax.persistence.GenerationType;\nimport javax.persistence.Id;\nimport javax.persistence.ManyToMany;\nimport javax.persistence.Table;\n\nimport com.fasterxml.jackson.annotation.JsonIgnoreProperties;\nimport com.fasterxml.jackson.annotation.JsonInclude;\nimport com.fasterxml.jackson.annotation.JsonInclude.Include;\n\n@Entity\n@JsonIgnoreProperties({ &quot;hibernateLazyInitializer&quot;, &quot;handler&quot; })\n@Table(name = &quot;AQUARIUM_MAINTANCE_MONITOR_ROLE&quot;)\npublic class Role {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @Column(name = &quot;ID_ROLE&quot;, nullable = false, precision = 9, scale = 0)\n    private Integer id;\n    \n    @JsonIgnoreProperties(value = {&quot;roles&quot;})\n    @ManyToMany(fetch = FetchType.LAZY, mappedBy = &quot;roles&quot;)\n    @JsonInclude(Include.NON_NULL)\n    private List&lt;User&gt; users;\n    \n    @Column(name = &quot;CODE_ROLE&quot;, nullable = true, length = 255)\n    private String code;\n    \n    @Column(name = &quot;DESCRIPTION_ROLE&quot;, nullable = true, length = 255)\n    private String description;\n    \n    @Column(name = &quot;NAME_ROLE&quot;, nullable = true, length = 255)\n    private String name;\n\n    public Integer getId() {\n        return id;\n    }\n\n    public void setId(Integer id) {\n        this.id = id;\n    }\n\n    public List&lt;User&gt; getUsers() {\n        return users;\n    }\n\n    public void setUsers(List&lt;User&gt; users) {\n        this.users = users;\n    }\n\n    public String getCode() {\n        return code;\n    }\n\n    public void setCode(String code) {\n        this.code = code;\n    }\n\n    public String getDescription() {\n        return description;\n    }\n\n    public void setDescription(String description) {\n        this.description = description;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }   \n}\n</code></pre>\n<p>Update:\nJwtRequestFilter</p>\n<pre><code>package br.com.aquamain.backend.security;\n\nimport java.io.IOException;\n\nimport javax.servlet.FilterChain;\nimport javax.servlet.ServletException;\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletResponse;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.security.authentication.UsernamePasswordAuthenticationToken;\nimport org.springframework.security.core.context.SecurityContextHolder;\nimport org.springframework.security.core.userdetails.UserDetails;\nimport org.springframework.security.web.authentication.WebAuthenticationDetailsSource;\nimport org.springframework.stereotype.Component;\nimport org.springframework.web.filter.OncePerRequestFilter;\n\nimport br.com.aquamain.backend.security.service.JwtUserDetailsService;\nimport br.com.aquamain.backend.security.utils.JwtTokenUtils;\nimport io.jsonwebtoken.ExpiredJwtException;\n\n@Component\npublic class JwtRequestFilter extends OncePerRequestFilter {\n    \n    @Autowired\n    private JwtUserDetailsService jwtUserDetailsService;\n\n    @Autowired\n    private JwtTokenUtils jwtTokenUtil;\n\n    @Override\n    protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain chain)\n            throws ServletException, IOException {\n        final String requestTokenHeader = request.getHeader(&quot;Authorization&quot;);\n\n        String username = null;\n        String jwtToken = null;\n\n        if (requestTokenHeader != null &amp;&amp; requestTokenHeader.startsWith(&quot;Bearer &quot;)) {\n            jwtToken = requestTokenHeader.substring(7);\n            try {\n                username = jwtTokenUtil.getUsernameFromToken(jwtToken);\n            } catch (IllegalArgumentException e) {\n                System.out.println(&quot;Unable to get JWT Token&quot;);\n            } catch (ExpiredJwtException e) {\n                System.out.println(&quot;JWT Token has expired&quot;);\n            }\n        } else {\n            logger.warn(&quot;JWT Token does not begin with Bearer String&quot;);\n        }\n\n        if (username != null &amp;&amp; SecurityContextHolder.getContext().getAuthentication() == null) {\n            UserDetails userDetails = this.jwtUserDetailsService.loadUserByUsername(username);\n\n            if (jwtTokenUtil.validateToken(jwtToken, userDetails)) {\n                UsernamePasswordAuthenticationToken usernamePasswordAuthenticationToken = new UsernamePasswordAuthenticationToken(\n                        userDetails, null, userDetails.getAuthorities());\n                usernamePasswordAuthenticationToken\n                        .setDetails(new WebAuthenticationDetailsSource().buildDetails(request));\n\n                SecurityContextHolder.getContext().setAuthentication(usernamePasswordAuthenticationToken);\n            }\n        }\n        chain.doFilter(request, response);\n    }\n}\n</code></pre>\n<p>Log:</p>\n<pre><code>[32m2022-04-12 11:14:54 TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Mvc [pattern='/**', OPTIONS], Filters=[]] (1/7)\n[0;39m[32m2022-04-12 11:14:54 TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Mvc [pattern='/swagger-ui.html/**'], Filters=[]] (2/7)\n[0;39m[32m2022-04-12 11:14:54 TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Mvc [pattern='/configuration/**'], Filters=[]] (3/7)\n[0;39m[32m2022-04-12 11:14:54 TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Mvc [pattern='/swagger-resources/**'], Filters=[]] (4/7)\n[0;39m[32m2022-04-12 11:14:54 TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Mvc [pattern='/v2/api-docs'], Filters=[]] (5/7)\n[0;39m[32m2022-04-12 11:14:54 TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Mvc [pattern='/webjars/**'], Filters=[]] (6/7)\n[0;39m[32m2022-04-12 11:14:54 TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@6d29e44e, org.springframework.security.web.context.SecurityContextPersistenceFilter@431fc40, org.springframework.security.web.header.HeaderWriterFilter@72dd71b5, org.springframework.web.filter.CorsFilter@258798b6, org.springframework.security.web.authentication.logout.LogoutFilter@48124669, br.com.aquamain.backend.security.JwtRequestFilter@4efcbbde, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@293ce7b0, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@7879d247, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@5e7f5483, org.springframework.security.web.session.SessionManagementFilter@4ce3c16a, org.springframework.security.web.access.ExceptionTranslationFilter@58ad93f, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@6f778913]] (7/7)\n[0;39m[32m2022-04-12 11:14:54 DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/persons/new\n[0;39m[32m2022-04-12 11:14:54 TRACE o.s.security.web.FilterChainProxy - Invoking WebAsyncManagerIntegrationFilter (1/12)\n[0;39m[32m2022-04-12 11:14:54 TRACE o.s.security.web.FilterChainProxy - Invoking SecurityContextPersistenceFilter (2/12)\n[0;39m[32m2022-04-12 11:14:54 DEBUG o.s.s.w.c.SecurityContextPersistenceFilter - Set SecurityContextHolder to empty SecurityContext\n[0;39m[32m2022-04-12 11:14:54 TRACE o.s.security.web.FilterChainProxy - Invoking HeaderWriterFilter (3/12)\n[0;39m[32m2022-04-12 11:14:54 TRACE o.s.security.web.FilterChainProxy - Invoking CorsFilter (4/12)\n[0;39m[32m2022-04-12 11:14:54 TRACE o.s.security.web.FilterChainProxy - Invoking LogoutFilter (5/12)\n[0;39m[32m2022-04-12 11:14:54 TRACE o.s.s.w.a.logout.LogoutFilter - Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]\n[0;39m[32m2022-04-12 11:14:54 TRACE o.s.security.web.FilterChainProxy - Invoking JwtRequestFilter (6/12)\n[0;39mHibernate: \n    /* select\n        generatedAlias0 \n    from\n        User as generatedAlias0 \n    where\n        generatedAlias0.username=:param0 */ select\n            user0_.ID_USER as id_user1_3_,\n            user0_.LAST_LOGIN_DATE as last_log2_3_,\n            user0_.PASSWORD_USER as password3_3_,\n            user0_.RESET_PASSWORD_TOKEN as reset_pa4_3_,\n            user0_.USERNAME_USER as username5_3_ \n        from\n            AQUARIUM_MAINTANCE_MONITOR_USER user0_ \n        where\n            user0_.USERNAME_USER=?\nHibernate: \n    /* load br.com.aquamain.backend.model.Person */ select\n        person0_.ID_PERSON as id_perso1_0_1_,\n        person0_.BIRTHDAY_PERSON as birthday2_0_1_,\n        person0_.NAME_PERSON as name_per3_0_1_,\n        person0_.ID_USER as id_user4_0_1_,\n        user1_.ID_USER as id_user1_3_0_,\n        user1_.LAST_LOGIN_DATE as last_log2_3_0_,\n        user1_.PASSWORD_USER as password3_3_0_,\n        user1_.RESET_PASSWORD_TOKEN as reset_pa4_3_0_,\n        user1_.USERNAME_USER as username5_3_0_ \n    from\n        AQUARIUM_MAINTANCE_MONITOR_PERSON person0_ \n    left outer join\n        AQUARIUM_MAINTANCE_MONITOR_USER user1_ \n            on person0_.ID_USER=user1_.ID_USER \n    where\n        person0_.ID_USER=?\n[32m2022-04-12 11:14:54 TRACE o.s.security.web.FilterChainProxy - Invoking RequestCacheAwareFilter (7/12)\n[0;39m[32m2022-04-12 11:14:54 TRACE o.s.security.web.FilterChainProxy - Invoking SecurityContextHolderAwareRequestFilter (8/12)\n[0;39m[32m2022-04-12 11:14:54 TRACE o.s.security.web.FilterChainProxy - Invoking AnonymousAuthenticationFilter (9/12)\n[0;39m[32m2022-04-12 11:14:54 TRACE o.s.s.w.a.AnonymousAuthenticationFilter - Did not set SecurityContextHolder since already authenticated UsernamePasswordAuthenticationToken [Principal=Id:1\nUsername:tony.stark\nLast Login:2022-04-12T11:14:30.058-03:00\n, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[]]\n[0;39m[32m2022-04-12 11:14:54 TRACE o.s.security.web.FilterChainProxy - Invoking SessionManagementFilter (10/12)\n[0;39m[32m2022-04-12 11:14:54 TRACE o.s.s.w.a.s.CompositeSessionAuthenticationStrategy - Preparing session with ChangeSessionIdAuthenticationStrategy (1/1)\n[0;39m[32m2022-04-12 11:14:54 TRACE o.s.security.web.FilterChainProxy - Invoking ExceptionTranslationFilter (11/12)\n[0;39m[32m2022-04-12 11:14:54 TRACE o.s.security.web.FilterChainProxy - Invoking FilterSecurityInterceptor (12/12)\n[0;39m[32m2022-04-12 11:14:54 TRACE o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource - Did not match request to Ant [pattern='/spring-security-rest/**'] - [permitAll] (1/5)\n[0;39m[32m2022-04-12 11:14:54 TRACE o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource - Did not match request to Ant [pattern='/api/authentication/**', POST] - [permitAll] (2/5)\n[0;39m[32m2022-04-12 11:14:54 TRACE o.s.s.w.a.i.FilterSecurityInterceptor - Did not re-authenticate UsernamePasswordAuthenticationToken [Principal=Id:1\nUsername:tony.stark\nLast Login:2022-04-12T11:14:30.058-03:00\n, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[]] before authorizing\n[0;39m[32m2022-04-12 11:14:54 TRACE o.s.s.w.a.i.FilterSecurityInterceptor - Authorizing filter invocation [POST /api/persons/new] with attributes [hasRole('ROLE_SYS_ADMIN')]\n[0;39m[32m2022-04-12 11:14:54 TRACE o.s.s.w.a.e.WebExpressionVoter - Voted to deny authorization\n[0;39m[32m2022-04-12 11:14:54 TRACE o.s.s.w.a.i.FilterSecurityInterceptor - Failed to authorize filter invocation [POST /api/persons/new] with attributes [hasRole('ROLE_SYS_ADMIN')] using AffirmativeBased [DecisionVoters=[org.springframework.security.web.access.expression.WebExpressionVoter@4f47d6c4], AllowIfAllAbstainDecisions=false]\n[0;39m[32m2022-04-12 11:14:54 TRACE o.s.s.w.a.ExceptionTranslationFilter - Sending UsernamePasswordAuthenticationToken [Principal=Id:1\nUsername:tony.stark\nLast Login:2022-04-12T11:14:30.058-03:00\n, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[]] to access denied handler since access is denied\n[0;39morg.springframework.security.access.AccessDeniedException: Access is denied\n    at org.springframework.security.access.vote.AffirmativeBased.decide(AffirmativeBased.java:73)\n    at org.springframework.security.access.intercept.AbstractSecurityInterceptor.attemptAuthorization(AbstractSecurityInterceptor.java:238)\n    at org.springframework.security.access.intercept.AbstractSecurityInterceptor.beforeInvocation(AbstractSecurityInterceptor.java:208)\n    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:113)\n    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:121)\n    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:115)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n    at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)\n    at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n    at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:105)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n    at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n    at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n    at br.com.aquamain.backend.security.JwtRequestFilter.doFilterInternal(JwtRequestFilter.java:64)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)\n    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n    at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n    at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)\n    at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n    at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110)\n    at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n    at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n    at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211)\n    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183)\n    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358)\n    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:190)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:163)\n    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:190)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:163)\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143)\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\n    at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:382)\n    at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\n    at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:893)\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1723)\n    at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\n    at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)\n    at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)\n    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\n    at java.base/java.lang.Thread.run(Thread.java:833)\n[32m2022-04-12 11:14:54 DEBUG o.s.s.w.a.AccessDeniedHandlerImpl - Responding with 403 status code\n[0;39m[32m2022-04-12 11:14:54 TRACE o.s.s.w.h.writers.HstsHeaderWriter - Not injecting HSTS header since it did not match request to [Is Secure]\n[0;39m[32m2022-04-12 11:14:54 DEBUG o.s.s.w.c.SecurityContextPersistenceFilter - Cleared SecurityContextHolder to complete request\n[0;39m[32m2022-04-12 11:14:54 TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Mvc [pattern='/**', OPTIONS], Filters=[]] (1/7)\n[0;39m[32m2022-04-12 11:14:54 TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Mvc [pattern='/swagger-ui.html/**'], Filters=[]] (2/7)\n[0;39m[32m2022-04-12 11:14:54 TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Mvc [pattern='/configuration/**'], Filters=[]] (3/7)\n[0;39m[32m2022-04-12 11:14:54 TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Mvc [pattern='/swagger-resources/**'], Filters=[]] (4/7)\n[0;39m[32m2022-04-12 11:14:54 TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Mvc [pattern='/v2/api-docs'], Filters=[]] (5/7)\n[0;39m[32m2022-04-12 11:14:54 TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=Mvc [pattern='/webjars/**'], Filters=[]] (6/7)\n[0;39m[32m2022-04-12 11:14:54 TRACE o.s.security.web.FilterChainProxy - Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@6d29e44e, org.springframework.security.web.context.SecurityContextPersistenceFilter@431fc40, org.springframework.security.web.header.HeaderWriterFilter@72dd71b5, org.springframework.web.filter.CorsFilter@258798b6, org.springframework.security.web.authentication.logout.LogoutFilter@48124669, br.com.aquamain.backend.security.JwtRequestFilter@4efcbbde, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@293ce7b0, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@7879d247, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@5e7f5483, org.springframework.security.web.session.SessionManagementFilter@4ce3c16a, org.springframework.security.web.access.ExceptionTranslationFilter@58ad93f, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@6f778913]] (7/7)\n[0;39m[32m2022-04-12 11:14:54 DEBUG o.s.security.web.FilterChainProxy - Securing POST /error\n[0;39m[32m2022-04-12 11:14:54 TRACE o.s.security.web.FilterChainProxy - Invoking WebAsyncManagerIntegrationFilter (1/12)\n[0;39m[32m2022-04-12 11:14:54 TRACE o.s.security.web.FilterChainProxy - Invoking SecurityContextPersistenceFilter (2/12)\n[0;39m[32m2022-04-12 11:14:54 DEBUG o.s.s.w.c.SecurityContextPersistenceFilter - Set SecurityContextHolder to empty SecurityContext\n[0;39m[32m2022-04-12 11:14:54 TRACE o.s.security.web.FilterChainProxy - Invoking HeaderWriterFilter (3/12)\n[0;39m[32m2022-04-12 11:14:54 TRACE o.s.security.web.FilterChainProxy - Invoking CorsFilter (4/12)\n[0;39m[32m2022-04-12 11:14:54 TRACE o.s.security.web.FilterChainProxy - Invoking LogoutFilter (5/12)\n[0;39m[32m2022-04-12 11:14:54 TRACE o.s.s.w.a.logout.LogoutFilter - Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]\n[0;39m[32m2022-04-12 11:14:54 TRACE o.s.security.web.FilterChainProxy - Invoking JwtRequestFilter (6/12)\n[0;39m[32m2022-04-12 11:14:54 TRACE o.s.security.web.FilterChainProxy - Invoking RequestCacheAwareFilter (7/12)\n[0;39m[32m2022-04-12 11:14:54 TRACE o.s.security.web.FilterChainProxy - Invoking SecurityContextHolderAwareRequestFilter (8/12)\n[0;39m[32m2022-04-12 11:14:54 TRACE o.s.security.web.FilterChainProxy - Invoking AnonymousAuthenticationFilter (9/12)\n[0;39m[32m2022-04-12 11:14:54 TRACE o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to AnonymousAuthenticationToken [Principal=anonymousUser, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ANONYMOUS]]\n[0;39m[32m2022-04-12 11:14:54 TRACE o.s.security.web.FilterChainProxy - Invoking SessionManagementFilter (10/12)\n[0;39m[32m2022-04-12 11:14:54 TRACE o.s.security.web.FilterChainProxy - Invoking ExceptionTranslationFilter (11/12)\n[0;39m[32m2022-04-12 11:14:54 TRACE o.s.security.web.FilterChainProxy - Invoking FilterSecurityInterceptor (12/12)\n[0;39m[32m2022-04-12 11:14:54 DEBUG o.s.security.web.FilterChainProxy - Secured POST /error\n[0;39m[32m2022-04-12 11:14:54 DEBUG o.s.s.w.c.SecurityContextPersistenceFilter - Cleared SecurityContextHolder to complete request\n</code></pre>\n"},{"tags":["java","spring-boot"],"comments":[{"owner":{"account_id":7226774,"reputation":19717,"user_id":5515060,"accept_rate":100,"display_name":"Lino"},"score":0,"creation_date":1648305949,"post_id":71628938,"comment_id":126593253,"body_markdown":"Why exactly are you not using `enum`s but `class`es?","body":"Why exactly are you not using <code>enum</code>s but <code>class</code>es?"},{"owner":{"account_id":459938,"reputation":4412,"user_id":860721,"accept_rate":69,"display_name":"Hossein Mobasher"},"score":0,"creation_date":1648306094,"post_id":71628938,"comment_id":126593277,"body_markdown":"This is the design decision. You can save enum either ordinal or exact string in database and can&#39;t customize it to save `int type` like field into db. We have so many enumeration and cant use serializer and deserializer like approach.","body":"This is the design decision. You can save enum either ordinal or exact string in database and can&#39;t customize it to save <code>int type</code> like field into db. We have so many enumeration and cant use serializer and deserializer like approach."},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1648306641,"post_id":71628938,"comment_id":126593360,"body_markdown":"Does `ShapeEnum` have getters and setters?","body":"Does <code>ShapeEnum</code> have getters and setters?"},{"owner":{"account_id":459938,"reputation":4412,"user_id":860721,"accept_rate":69,"display_name":"Hossein Mobasher"},"score":0,"creation_date":1648306687,"post_id":71628938,"comment_id":126593371,"body_markdown":"Yeah, they located in `GeneralEnum`.","body":"Yeah, they located in <code>GeneralEnum</code>."},{"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"score":3,"creation_date":1648312442,"post_id":71628938,"comment_id":126594661,"body_markdown":"_&quot;The system worked perfectly, but something wrong happens.&quot;_ That is the opposite of &quot;worked perfectly&quot;. This whole design is just horrible, please forgive me for saying so. To introduce something like this and scattering it across your whole application, just because you had some issue with mapping it to the database, is the cancer, not the cure. Or let us call it a ticking time bomb. Sorry, I know my remarks are not solving your problem. But the hint someone else wrote about making your pseudo enum values immutable, should be a helpful starting point.","body":"<i>&quot;The system worked perfectly, but something wrong happens.&quot;</i> That is the opposite of &quot;worked perfectly&quot;. This whole design is just horrible, please forgive me for saying so. To introduce something like this and scattering it across your whole application, just because you had some issue with mapping it to the database, is the cancer, not the cure. Or let us call it a ticking time bomb. Sorry, I know my remarks are not solving your problem. But the hint someone else wrote about making your pseudo enum values immutable, should be a helpful starting point."},{"owner":{"account_id":459938,"reputation":4412,"user_id":860721,"accept_rate":69,"display_name":"Hossein Mobasher"},"score":0,"creation_date":1648312533,"post_id":71628938,"comment_id":126594685,"body_markdown":"Yeah, I agreed with you about the problem in design. But, such thing is not deterministic behavior that I expected.","body":"Yeah, I agreed with you about the problem in design. But, such thing is not deterministic behavior that I expected."},{"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"score":2,"creation_date":1648312663,"post_id":71628938,"comment_id":126594724,"body_markdown":"You can be sure it is deterministic. That it deviates from your expectation, does not make it non-deterministic. &#128521;","body":"You can be sure it is deterministic. That it deviates from your expectation, does not make it non-deterministic. "},{"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"score":1,"creation_date":1648313160,"post_id":71628938,"comment_id":126594826,"body_markdown":"Another immutability idea: Java 16 introduced records as a final feature. In 14 and 15 it was in preview status. When you upgrade, maybe you can use the terse, expressive syntax to model your immutable pseudo enums and use them in a less painful way. But actually, real enums would be better than re-inventing the wheel. With enums you can [model objects with multiple properties and even methods](https://www.baeldung.com/a-guide-to-java-enums).","body":"Another immutability idea: Java 16 introduced records as a final feature. In 14 and 15 it was in preview status. When you upgrade, maybe you can use the terse, expressive syntax to model your immutable pseudo enums and use them in a less painful way. But actually, real enums would be better than re-inventing the wheel. With enums you can <a href=\"https://www.baeldung.com/a-guide-to-java-enums\" rel=\"nofollow noreferrer\">model objects with multiple properties and even methods</a>."}],"answers":[{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1648352710,"creation_date":1648309245,"answer_id":71629478,"question_id":71628938,"body_markdown":"OK, so first I will say what the problem is not.\r\n\r\nThis problem is not caused by the garbage collector.  The GC doesn&#39;t change the values of variables.  Not static variables, and not instance variables.  So it is not the GC that is causing the `type` field of some `ShapeEnum` that denotes a rectangle (`1`) to change to a circle (`0`).\r\n\r\n---------------\r\n\r\nYou say:\r\n\r\n&gt; As I tracked, the problem is occurred after running GC and when the `ShapeEnum` is not used for a while.\r\n\r\nThat statement is not conclusive evidence.  What you are actually (probably) saying is that you *observed* an object with `type` of `0` when it should have been `1` ... at some time after a GC run.  You (probably) didn&#39;t observe the change actually happening, and you (probably) can&#39;t be sure that the value was correct immediately before the GC ran.  In fact, you (probably) can&#39;t even be sure that the value was wrong *immediately* after the GC ran.\r\n\r\n(If you do have clear evidence rather than supposition, please add it to the question.)\r\n\r\n---------------\r\n\r\nSo what actually is causing this change?\r\n\r\nAt this stage we can only guess.  My guess would be that:\r\n\r\n  - some part of your application is calling the `setValue` method when it shouldn&#39;t, or\r\n\r\n  - you have multiple objects that represent the &quot;enums&quot; for (say) rectangle.\r\n\r\n---------------\r\n\r\nIt strikes me that your implementation of these ersatz enums is fragile.  They should be (at least loosely) immutable.  You probably alter the `GeneralEnum` class to remove the setters, and make the `type` and `value` fields `final`.  \r\n\r\nIf the objects are immutable, you won&#39;t have to worry about something changing them. There would be other ways to get a `ShapeEnum` with `type == 1` and `value.equals(&quot;Circle&quot;)`, but you wouldn&#39;t be able to break `CIRCLE` or `RECTANGLE`.\r\n\r\n","title":"GC and static final fields","body":"<p>OK, so first I will say what the problem is not.</p>\n<p>This problem is not caused by the garbage collector.  The GC doesn't change the values of variables.  Not static variables, and not instance variables.  So it is not the GC that is causing the <code>type</code> field of some <code>ShapeEnum</code> that denotes a rectangle (<code>1</code>) to change to a circle (<code>0</code>).</p>\n<hr />\n<p>You say:</p>\n<blockquote>\n<p>As I tracked, the problem is occurred after running GC and when the <code>ShapeEnum</code> is not used for a while.</p>\n</blockquote>\n<p>That statement is not conclusive evidence.  What you are actually (probably) saying is that you <em>observed</em> an object with <code>type</code> of <code>0</code> when it should have been <code>1</code> ... at some time after a GC run.  You (probably) didn't observe the change actually happening, and you (probably) can't be sure that the value was correct immediately before the GC ran.  In fact, you (probably) can't even be sure that the value was wrong <em>immediately</em> after the GC ran.</p>\n<p>(If you do have clear evidence rather than supposition, please add it to the question.)</p>\n<hr />\n<p>So what actually is causing this change?</p>\n<p>At this stage we can only guess.  My guess would be that:</p>\n<ul>\n<li><p>some part of your application is calling the <code>setValue</code> method when it shouldn't, or</p>\n</li>\n<li><p>you have multiple objects that represent the &quot;enums&quot; for (say) rectangle.</p>\n</li>\n</ul>\n<hr />\n<p>It strikes me that your implementation of these ersatz enums is fragile.  They should be (at least loosely) immutable.  You probably alter the <code>GeneralEnum</code> class to remove the setters, and make the <code>type</code> and <code>value</code> fields <code>final</code>.</p>\n<p>If the objects are immutable, you won't have to worry about something changing them. There would be other ways to get a <code>ShapeEnum</code> with <code>type == 1</code> and <code>value.equals(&quot;Circle&quot;)</code>, but you wouldn't be able to break <code>CIRCLE</code> or <code>RECTANGLE</code>.</p>\n"}],"owner":{"account_id":459938,"reputation":4412,"user_id":860721,"accept_rate":69,"display_name":"Hossein Mobasher"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":121,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1649772773,"creation_date":1648305086,"question_id":71628938,"body_markdown":"We are working on an payment application based on spring-boot 2.5.6. The application  is hosted on docker and launched on Java 14. We created an abstract class named `GeneralEnum` which is `@Embeddable` and contains two variables `int type` and `String value`. All enumeration classes extend this base class and define constants inside it. \r\n\r\nThis decision is made to customize enumeration used in whole layer of application. You can see one example in below:\r\n\r\n```\r\n@Embeddable\r\npublic class ShapeEnum extends GeneralEnum {\r\n   public static final ShapeEnum CIRCLE = new ShapeEnum(0, &#39;Circle&#39;);\r\n   public static final ShapeEnum RECTANGLE = new ShapeEnum(1, &#39;Rectangle&#39;);\r\n\r\n   public ShapeEnum(int type, String value) {\r\n       super(type, value);\r\n   }\r\n}\r\n```\r\n\r\nThis class is used in entity layer as embedded variable as follow:\r\n\r\n```\r\n@Entity\r\npublic class Shape {\r\n    @Embedded\r\n    @AttributeOverride(name = &quot;type&quot;, column = @Column(name = &quot;shape_type&quot;))\r\n    private ShapeEnum shapeType;\r\n}\r\n```\r\n\r\nThe system worked perfectly, but something wrong happens and the `value` field of ShapeEnum.RECTANGLE changed to **Circle** and `type` is changed to 0 (!!!) and after that system would fail (dumping RAM shown the change of value). As I tracked, the problem is occurred after running GC and when the ShapeEnum is not used for a while.\r\n\r\nWould anyone make an idea what happens and how tackle this problem? For now, restarting docker container causes the app will work properly.\r\n\r\nThanks in advance.\r\n\r\n**---------------**\r\n\r\nThe dump for another class is (TicketStatus class) shown below. The highlighted part is changed without reason. The first and second constants&#39; value and type are the same. I am sure that setValue and setType won&#39;t call in the source-code.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/SbfDM.png","title":"GC and static final fields","body":"<p>We are working on an payment application based on spring-boot 2.5.6. The application  is hosted on docker and launched on Java 14. We created an abstract class named <code>GeneralEnum</code> which is <code>@Embeddable</code> and contains two variables <code>int type</code> and <code>String value</code>. All enumeration classes extend this base class and define constants inside it.</p>\n<p>This decision is made to customize enumeration used in whole layer of application. You can see one example in below:</p>\n<pre><code>@Embeddable\npublic class ShapeEnum extends GeneralEnum {\n   public static final ShapeEnum CIRCLE = new ShapeEnum(0, 'Circle');\n   public static final ShapeEnum RECTANGLE = new ShapeEnum(1, 'Rectangle');\n\n   public ShapeEnum(int type, String value) {\n       super(type, value);\n   }\n}\n</code></pre>\n<p>This class is used in entity layer as embedded variable as follow:</p>\n<pre><code>@Entity\npublic class Shape {\n    @Embedded\n    @AttributeOverride(name = &quot;type&quot;, column = @Column(name = &quot;shape_type&quot;))\n    private ShapeEnum shapeType;\n}\n</code></pre>\n<p>The system worked perfectly, but something wrong happens and the <code>value</code> field of ShapeEnum.RECTANGLE changed to <strong>Circle</strong> and <code>type</code> is changed to 0 (!!!) and after that system would fail (dumping RAM shown the change of value). As I tracked, the problem is occurred after running GC and when the ShapeEnum is not used for a while.</p>\n<p>Would anyone make an idea what happens and how tackle this problem? For now, restarting docker container causes the app will work properly.</p>\n<p>Thanks in advance.</p>\n<p><strong>---------------</strong></p>\n<p>The dump for another class is (TicketStatus class) shown below. The highlighted part is changed without reason. The first and second constants' value and type are the same. I am sure that setValue and setType won't call in the source-code.</p>\n<p><a href=\"https://i.stack.imgur.com/SbfDM.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/SbfDM.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","c#","android","server","tcp"],"comments":[{"owner":{"account_id":6156307,"reputation":33584,"user_id":5015238,"display_name":"jdweng"},"score":0,"creation_date":1649772574,"post_id":71844010,"comment_id":126957305,"body_markdown":"See if connection is still connected.  From cmd.exe &gt;Netstat -a  you may of closed connection.  If you are  shutting down the shutdown may start to take affect before server response to message.","body":"See if connection is still connected.  From cmd.exe &gt;Netstat -a  you may of closed connection.  If you are  shutting down the shutdown may start to take affect before server response to message."},{"owner":{"account_id":957028,"reputation":15133,"user_id":982149,"accept_rate":100,"display_name":"Fildor"},"score":0,"creation_date":1649773275,"post_id":71844010,"comment_id":126957625,"body_markdown":"^^ That said, it&#39;s maybe not the best of ideas to _start_ with implementing remote shutdown?","body":"^^ That said, it&#39;s maybe not the best of ideas to <i>start</i> with implementing remote shutdown?"},{"owner":{"account_id":24914227,"reputation":1,"user_id":18783378,"display_name":"Frater"},"score":0,"creation_date":1649773290,"post_id":71844010,"comment_id":126957634,"body_markdown":"i am currently not sending the shutdown command from server to client. the only communication happening is sending a simple &quot;Hello there&quot; message from client to server, which is not being noticed by the server","body":"i am currently not sending the shutdown command from server to client. the only communication happening is sending a simple &quot;Hello there&quot; message from client to server, which is not being noticed by the server"},{"owner":{"account_id":957028,"reputation":15133,"user_id":982149,"accept_rate":100,"display_name":"Fildor"},"score":0,"creation_date":1649773370,"post_id":71844010,"comment_id":126957669,"body_markdown":"Does the &quot;Found client...&quot; Message appear?","body":"Does the &quot;Found client...&quot; Message appear?"},{"owner":{"account_id":24914227,"reputation":1,"user_id":18783378,"display_name":"Frater"},"score":0,"creation_date":1649773530,"post_id":71844010,"comment_id":126957757,"body_markdown":"the ServerClientCommunicationThread is being opened upon initial connection establishment. But the actual message sending is only happening when the handler inside it gets called from outside the thread. You can see that happening in the SendMessageToClient method , which i am currently not calling at all","body":"the ServerClientCommunicationThread is being opened upon initial connection establishment. But the actual message sending is only happening when the handler inside it gets called from outside the thread. You can see that happening in the SendMessageToClient method , which i am currently not calling at all"},{"owner":{"account_id":957028,"reputation":15133,"user_id":982149,"accept_rate":100,"display_name":"Fildor"},"score":0,"creation_date":1649773537,"post_id":71844010,"comment_id":126957763,"body_markdown":"Ah, ... you do a `ReadLine` - but you never _send_ a NewLine.","body":"Ah, ... you do a <code>ReadLine</code> - but you never <i>send</i> a NewLine."},{"owner":{"account_id":24914227,"reputation":1,"user_id":18783378,"display_name":"Frater"},"score":1,"creation_date":1649773567,"post_id":71844010,"comment_id":126957778,"body_markdown":"&quot;Does the &quot;Found client...&quot; Message appear? &quot; Yes it is","body":"&quot;Does the &quot;Found client...&quot; Message appear? &quot; Yes it is"},{"owner":{"account_id":957028,"reputation":15133,"user_id":982149,"accept_rate":100,"display_name":"Fildor"},"score":0,"creation_date":1649773586,"post_id":71844010,"comment_id":126957786,"body_markdown":"Try `tcpClient.Send(&quot;Hello there\\n&quot;);`","body":"Try <code>tcpClient.Send(&quot;Hello there\\n&quot;);</code>"},{"owner":{"account_id":24914227,"reputation":1,"user_id":18783378,"display_name":"Frater"},"score":0,"creation_date":1649773860,"post_id":71844010,"comment_id":126957920,"body_markdown":"Try tcpClient.Send(&quot;Hello there\\n&quot;);  \nFildor\nYES thats it. now its working. but why?","body":"Try tcpClient.Send(&quot;Hello there\\n&quot;);   Fildor YES thats it. now its working. but why?"},{"owner":{"account_id":957028,"reputation":15133,"user_id":982149,"accept_rate":100,"display_name":"Fildor"},"score":0,"creation_date":1649773888,"post_id":71844010,"comment_id":126957934,"body_markdown":"`readLine` will block until it encounters a NewLine char in the input. And the TcpClient&#39;s `Send` Method does not automatically append a NewLine. So by adding a `\\n` to the String, you do that manually.","body":"<code>readLine</code> will block until it encounters a NewLine char in the input. And the TcpClient&#39;s <code>Send</code> Method does not automatically append a NewLine. So by adding a <code>\\n</code> to the String, you do that manually."},{"owner":{"account_id":957028,"reputation":15133,"user_id":982149,"accept_rate":100,"display_name":"Fildor"},"score":0,"creation_date":1649774267,"post_id":71844010,"comment_id":126958092,"body_markdown":"Basically, what the [docs](https://docs.oracle.com/javase/10/docs/api/java/io/BufferedReader.html#readLine()) say: _&quot;Reads a line of text. A line is considered to be terminated by any one of a line feed (&#39;\\n&#39;), a carriage return (&#39;\\r&#39;), a carriage return followed immediately by a line feed, or by reaching the end-of-file (EOF).&quot;_ (I know it&#39;s Java SE docs... )","body":"Basically, what the <a href=\"https://docs.oracle.com/javase/10/docs/api/java/io/BufferedReader.html#readLine()\" rel=\"nofollow noreferrer\">docs</a> say: <i>&quot;Reads a line of text. A line is considered to be terminated by any one of a line feed (&#39;\\n&#39;), a carriage return (&#39;\\r&#39;), a carriage return followed immediately by a line feed, or by reaching the end-of-file (EOF).&quot;</i> (I know it&#39;s Java SE docs... )"},{"owner":{"account_id":24914227,"reputation":1,"user_id":18783378,"display_name":"Frater"},"score":0,"creation_date":1649774277,"post_id":71844010,"comment_id":126958093,"body_markdown":"ah i see. hm there has to be a better way than using readLine then...","body":"ah i see. hm there has to be a better way than using readLine then..."},{"owner":{"account_id":957028,"reputation":15133,"user_id":982149,"accept_rate":100,"display_name":"Fildor"},"score":0,"creation_date":1649774334,"post_id":71844010,"comment_id":126958121,"body_markdown":"Absolutely. You could (and should) probably come up with and implement a protocol, where you have decent delimiters etc. Or pick an existing protocol if that suites your needs. Your code _will_ get significantly more complex, though.","body":"Absolutely. You could (and should) probably come up with and implement a protocol, where you have decent delimiters etc. Or pick an existing protocol if that suites your needs. Your code <i>will</i> get significantly more complex, though."},{"owner":{"account_id":957028,"reputation":15133,"user_id":982149,"accept_rate":100,"display_name":"Fildor"},"score":0,"creation_date":1649775053,"post_id":71844010,"comment_id":126958463,"body_markdown":"Rolling your own will of course be quite tedious. But if this is a &quot;try &amp; learn&quot; Project, it&#39;s absolutely worth it and can actually be fun to fall into each and every trap there is with inventing and implementing protocols.","body":"Rolling your own will of course be quite tedious. But if this is a &quot;try &amp; learn&quot; Project, it&#39;s absolutely worth it and can actually be fun to fall into each and every trap there is with inventing and implementing protocols."}],"owner":{"account_id":24914227,"reputation":1,"user_id":18783378,"display_name":"Frater"},"comment_count":14,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1649772689,"creation_date":1649771787,"question_id":71844010,"body_markdown":"I am currently trying to set up an App for an Android Device, which can communicate with Devices in the same Network via TCP connection. Said Devices run on Windows and therefore I created a simple C# TCP Client program to connect to the TCP Server. The connection gets established when the Server App is already running and a Client tries to connect to it. Both sides (Server/Client) confirm that the connection got established. When I send data from the server via DataOutputStream back to the client, the client confirms, that he got the message. But when I try to send data from the client and try to read it on the server via InputStreamReader the server never reacts to incoming messages.\r\n\r\nBelow lies the Java Android server code:\r\n```\r\npublic class TCPServer {\r\n\r\n    public enum ServerCommands { TURN_OFF }\r\n\r\n    private static ServerSocket serverSocket;\r\n    private static final Handler HANDLER = new Handler(Looper.getMainLooper());\r\n    private static final int SERVERPORT = 5040;\r\n    private static final HashMap&lt;InetAddress, ServerClientCommunicationThread&gt; connectedClientThreads = new HashMap&lt;&gt;();\r\n\r\n    private interface OnUpdateUIListener {\r\n        void onShowStatus(String status);\r\n    }\r\n\r\n    private static OnUpdateUIListener listener;\r\n\r\n    public static void InitServer(Consumer&lt;String&gt; showStatus) {\r\n\r\n         listener = new OnUpdateUIListener() {\r\n            @Override\r\n            public void onShowStatus(String status) {\r\n                // Use the handler so we&#39;re not trying to update the UI from the bg thread\r\n                HANDLER.post(new Runnable(){\r\n                    @Override\r\n                    public void run(){\r\n                        showStatus.accept(status);\r\n                    }\r\n                });\r\n            }\r\n        };\r\n\r\n        Thread serverThread = new Thread(new ServerThread());\r\n        serverThread.start();\r\n    }\r\n\r\n    public static void OnStop(){\r\n        try {\r\n            serverSocket.close();\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n    public static void SendMessageToClient(InetAddress clientIP, ServerCommands action){\r\n        ServerClientCommunicationThread clientThread = connectedClientThreads.get(clientIP);\r\n        listener.onShowStatus(&quot;Trying to send Data to client!&quot;);\r\n        if (clientThread != null)\r\n            clientThread.getHandler().sendEmptyMessage(action.ordinal());\r\n    }\r\n\r\n    private static class ServerThread implements Runnable {\r\n\r\n        public void run() {\r\n            Socket socket = null;\r\n            try {\r\n                serverSocket = new ServerSocket(SERVERPORT);\r\n            } catch (IOException e) {\r\n                e.printStackTrace();\r\n            }\r\n            boolean error = false;\r\n            while (!Thread.currentThread().isInterrupted() &amp;&amp; !error) {\r\n                try {\r\n                    listener.onShowStatus(&quot;Start listening for clients!&quot;);\r\n                    socket = serverSocket.accept();\r\n                    listener.onShowStatus(&quot;Found client: &quot; + socket.getInetAddress());\r\n\r\n                    ClientServerCommunicationThread clientCommThread = new ClientServerCommunicationThread(socket);\r\n                    new Thread(clientCommThread).start();\r\n\r\n                    ServerClientCommunicationThread serverCommThread = new ServerClientCommunicationThread(&quot;CommThread&quot;, socket);\r\n                    new Thread(serverCommThread).start();\r\n\r\n                    connectedClientThreads.put(serverCommThread.clientSocket.getInetAddress(), serverCommThread);\r\n                } catch (Exception e) {\r\n                    listener.onShowStatus(&quot;Could not establish client connection: &quot; + e);\r\n                    error = true;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    private static class ServerClientCommunicationThread extends HandlerThread {\r\n\r\n        private DataOutputStream outputStream;\r\n        private Socket clientSocket;\r\n        private Handler commHandler;\r\n\r\n        public ServerClientCommunicationThread(String name, Socket clientSocket) {\r\n            super(name);\r\n            try {\r\n                this.clientSocket = clientSocket;\r\n                this.outputStream = new DataOutputStream(clientSocket.getOutputStream());\r\n\r\n            } catch (IOException e) {\r\n                e.printStackTrace();\r\n                listener.onShowStatus(&quot;ERROR: could not open ReaderStream: &quot; + e);\r\n            }\r\n        }\r\n\r\n        @SuppressLint(&quot;HandlerLeak&quot;)\r\n        @Override\r\n        protected void onLooperPrepared(){\r\n            commHandler = new Handler(){\r\n                @Override\r\n                public void handleMessage(Message msg){\r\n                    try {\r\n                        outputStream.write(msg.what);\r\n                        listener.onShowStatus(&quot;Sent action: &quot; + msg.what);\r\n                        outputStream.flush();\r\n                    }\r\n                    catch(Exception e){\r\n                        listener.onShowStatus(&quot;Could not send data to client: &quot; + clientSocket.getInetAddress() + &quot; &quot; + e);\r\n                    }\r\n                }\r\n            };\r\n            listener.onShowStatus(&quot;Start Server Communication Thread&quot;);\r\n        }\r\n\r\n        public Handler getHandler(){\r\n            return commHandler;\r\n        }\r\n    }\r\n\r\n\r\n    private static class ClientServerCommunicationThread extends Thread {\r\n\r\n        private BufferedReader input;\r\n        private final Socket clientSocket;\r\n\r\n        public ClientServerCommunicationThread(Socket clientSocket){\r\n            super();\r\n            this.clientSocket = clientSocket;\r\n            try{\r\n                this.input = new BufferedReader(new InputStreamReader(clientSocket.getInputStream()));\r\n            } catch (IOException e) {\r\n                e.printStackTrace();\r\n                listener.onShowStatus(&quot;ERROR: could not open ReaderStream: &quot; + e);\r\n            }\r\n        }\r\n\r\n        @Override\r\n        public void run(){\r\n            listener.onShowStatus(&quot;Start Client Communication Thread&quot;);\r\n            boolean connectionStable = true;\r\n            while (!Thread.currentThread().isInterrupted() &amp;&amp; connectionStable) {\r\n                try {\r\n                    String read = input.readLine();\r\n                    //It never reaches this debug message!\r\n                    listener.onShowStatus(&quot;Received message: &quot; + read);\r\n\r\n                } catch (IOException e) {\r\n                    e.printStackTrace();\r\n                    listener.onShowStatus(&quot;ERROR: could not read message: &quot; + e);\r\n                    connectionStable = false;\r\n                }\r\n            }\r\n\r\n            try {\r\n                input.close();\r\n                clientSocket.close();\r\n            } catch (IOException ex) {\r\n                ex.printStackTrace();\r\n            }\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nBelow lies my C# client code.\r\nI am using the SuperSimpleTCP library for my C# code.\r\n\r\n```\r\nnamespace SimpleTCPProgram\r\n{\r\n    internal class TCPClient\r\n    {\r\n        private static SimpleTcpClient tcpClient;\r\n        private static int udpPort = 5041;\r\n        private static int tcpPort = 5040;\r\n\r\n        private static string macAddr;\r\n\r\n        enum ServerCommands { TURN_OFF = 0 }\r\n\r\n\r\n        // Main Method\r\n        static public void Main(String[] args)\r\n        {\r\n            InitTCPClient(&quot;192.168.1.4&quot;);\r\n            Console.ReadKey();\r\n            tcpClient.Send(&quot;Hello there&quot;);\r\n\r\n            Console.WriteLine(&quot;Sent data: &quot; + tcpClient.Statistics.SentBytes.ToString());\r\n\r\n            Console.ReadKey();\r\n        }\r\n\r\n        private static void InitTCPClient(string serverIP)\r\n        {\r\n            try\r\n            {\r\n                tcpClient = new SimpleTcpClient(serverIP + &quot;:&quot; + tcpPort);\r\n                tcpClient.Events.Connected += Events_Connected;\r\n                tcpClient.Events.Disconnected += Events_Disconnected;\r\n                tcpClient.Events.DataReceived += Events_DataReceived;\r\n\r\n                tcpClient.Connect();\r\n            }\r\n            catch (Exception ex)\r\n            {\r\n                Console.WriteLine(ex.ToString());\r\n            }\r\n        }\r\n\r\n        private static void Events_Connected(object sender, ConnectionEventArgs e)\r\n        {\r\n            Console.WriteLine(&quot;Connected to Server: &quot; + e.IpPort);\r\n        }\r\n\r\n        private static void Events_Disconnected(object sender, ConnectionEventArgs e)\r\n        {\r\n\r\n        }\r\n\r\n        private static void Events_DataReceived(object sender, SuperSimpleTcp.DataReceivedEventArgs e)\r\n        {\r\n            string dataString = Encoding.UTF8.GetString(e.Data);\r\n            Console.WriteLine(&quot;Received Data: &quot; + dataString);\r\n            \r\n            ServerCommands serverCommand = (ServerCommands)int.Parse(dataString);\r\n            switch (serverCommand)\r\n            {\r\n                case ServerCommands.TURN_OFF:\r\n                    var psi = new ProcessStartInfo(&quot;shutdown&quot;, &quot;/s /t 0&quot;);\r\n                    psi.CreateNoWindow = true;\r\n                    psi.UseShellExecute = false;\r\n                    Process.Start(psi);\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nWireshark seems to confirm that the message has been sent to the server.\r\nIt even catches a message sent back by the server to the client in response.\r\nI am testing this on a test-router which doesn&#39;t have internet access and no firewall active.\r\nMy server app has the following permissions:\r\n```\r\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; tools:ignore=&quot;ManifestOrder&quot;/&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_WIFI_STATE&quot;/&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.CHANGE_WIFI_MULTICAST_STATE&quot;/&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.FOREGROUND_SERVICE&quot; /&gt;\r\n```\r\n\r\nTLDR: My Android java server doesn&#39;t get any C# client messages sent via TCP connection.","title":"TCP Java Android Server / C# Windows Client Communication not working","body":"<p>I am currently trying to set up an App for an Android Device, which can communicate with Devices in the same Network via TCP connection. Said Devices run on Windows and therefore I created a simple C# TCP Client program to connect to the TCP Server. The connection gets established when the Server App is already running and a Client tries to connect to it. Both sides (Server/Client) confirm that the connection got established. When I send data from the server via DataOutputStream back to the client, the client confirms, that he got the message. But when I try to send data from the client and try to read it on the server via InputStreamReader the server never reacts to incoming messages.</p>\n<p>Below lies the Java Android server code:</p>\n<pre><code>public class TCPServer {\n\n    public enum ServerCommands { TURN_OFF }\n\n    private static ServerSocket serverSocket;\n    private static final Handler HANDLER = new Handler(Looper.getMainLooper());\n    private static final int SERVERPORT = 5040;\n    private static final HashMap&lt;InetAddress, ServerClientCommunicationThread&gt; connectedClientThreads = new HashMap&lt;&gt;();\n\n    private interface OnUpdateUIListener {\n        void onShowStatus(String status);\n    }\n\n    private static OnUpdateUIListener listener;\n\n    public static void InitServer(Consumer&lt;String&gt; showStatus) {\n\n         listener = new OnUpdateUIListener() {\n            @Override\n            public void onShowStatus(String status) {\n                // Use the handler so we're not trying to update the UI from the bg thread\n                HANDLER.post(new Runnable(){\n                    @Override\n                    public void run(){\n                        showStatus.accept(status);\n                    }\n                });\n            }\n        };\n\n        Thread serverThread = new Thread(new ServerThread());\n        serverThread.start();\n    }\n\n    public static void OnStop(){\n        try {\n            serverSocket.close();\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n    }\n\n    public static void SendMessageToClient(InetAddress clientIP, ServerCommands action){\n        ServerClientCommunicationThread clientThread = connectedClientThreads.get(clientIP);\n        listener.onShowStatus(&quot;Trying to send Data to client!&quot;);\n        if (clientThread != null)\n            clientThread.getHandler().sendEmptyMessage(action.ordinal());\n    }\n\n    private static class ServerThread implements Runnable {\n\n        public void run() {\n            Socket socket = null;\n            try {\n                serverSocket = new ServerSocket(SERVERPORT);\n            } catch (IOException e) {\n                e.printStackTrace();\n            }\n            boolean error = false;\n            while (!Thread.currentThread().isInterrupted() &amp;&amp; !error) {\n                try {\n                    listener.onShowStatus(&quot;Start listening for clients!&quot;);\n                    socket = serverSocket.accept();\n                    listener.onShowStatus(&quot;Found client: &quot; + socket.getInetAddress());\n\n                    ClientServerCommunicationThread clientCommThread = new ClientServerCommunicationThread(socket);\n                    new Thread(clientCommThread).start();\n\n                    ServerClientCommunicationThread serverCommThread = new ServerClientCommunicationThread(&quot;CommThread&quot;, socket);\n                    new Thread(serverCommThread).start();\n\n                    connectedClientThreads.put(serverCommThread.clientSocket.getInetAddress(), serverCommThread);\n                } catch (Exception e) {\n                    listener.onShowStatus(&quot;Could not establish client connection: &quot; + e);\n                    error = true;\n                }\n            }\n        }\n    }\n\n\n    private static class ServerClientCommunicationThread extends HandlerThread {\n\n        private DataOutputStream outputStream;\n        private Socket clientSocket;\n        private Handler commHandler;\n\n        public ServerClientCommunicationThread(String name, Socket clientSocket) {\n            super(name);\n            try {\n                this.clientSocket = clientSocket;\n                this.outputStream = new DataOutputStream(clientSocket.getOutputStream());\n\n            } catch (IOException e) {\n                e.printStackTrace();\n                listener.onShowStatus(&quot;ERROR: could not open ReaderStream: &quot; + e);\n            }\n        }\n\n        @SuppressLint(&quot;HandlerLeak&quot;)\n        @Override\n        protected void onLooperPrepared(){\n            commHandler = new Handler(){\n                @Override\n                public void handleMessage(Message msg){\n                    try {\n                        outputStream.write(msg.what);\n                        listener.onShowStatus(&quot;Sent action: &quot; + msg.what);\n                        outputStream.flush();\n                    }\n                    catch(Exception e){\n                        listener.onShowStatus(&quot;Could not send data to client: &quot; + clientSocket.getInetAddress() + &quot; &quot; + e);\n                    }\n                }\n            };\n            listener.onShowStatus(&quot;Start Server Communication Thread&quot;);\n        }\n\n        public Handler getHandler(){\n            return commHandler;\n        }\n    }\n\n\n    private static class ClientServerCommunicationThread extends Thread {\n\n        private BufferedReader input;\n        private final Socket clientSocket;\n\n        public ClientServerCommunicationThread(Socket clientSocket){\n            super();\n            this.clientSocket = clientSocket;\n            try{\n                this.input = new BufferedReader(new InputStreamReader(clientSocket.getInputStream()));\n            } catch (IOException e) {\n                e.printStackTrace();\n                listener.onShowStatus(&quot;ERROR: could not open ReaderStream: &quot; + e);\n            }\n        }\n\n        @Override\n        public void run(){\n            listener.onShowStatus(&quot;Start Client Communication Thread&quot;);\n            boolean connectionStable = true;\n            while (!Thread.currentThread().isInterrupted() &amp;&amp; connectionStable) {\n                try {\n                    String read = input.readLine();\n                    //It never reaches this debug message!\n                    listener.onShowStatus(&quot;Received message: &quot; + read);\n\n                } catch (IOException e) {\n                    e.printStackTrace();\n                    listener.onShowStatus(&quot;ERROR: could not read message: &quot; + e);\n                    connectionStable = false;\n                }\n            }\n\n            try {\n                input.close();\n                clientSocket.close();\n            } catch (IOException ex) {\n                ex.printStackTrace();\n            }\n        }\n    }\n}\n</code></pre>\n<p>Below lies my C# client code.\nI am using the SuperSimpleTCP library for my C# code.</p>\n<pre><code>namespace SimpleTCPProgram\n{\n    internal class TCPClient\n    {\n        private static SimpleTcpClient tcpClient;\n        private static int udpPort = 5041;\n        private static int tcpPort = 5040;\n\n        private static string macAddr;\n\n        enum ServerCommands { TURN_OFF = 0 }\n\n\n        // Main Method\n        static public void Main(String[] args)\n        {\n            InitTCPClient(&quot;192.168.1.4&quot;);\n            Console.ReadKey();\n            tcpClient.Send(&quot;Hello there&quot;);\n\n            Console.WriteLine(&quot;Sent data: &quot; + tcpClient.Statistics.SentBytes.ToString());\n\n            Console.ReadKey();\n        }\n\n        private static void InitTCPClient(string serverIP)\n        {\n            try\n            {\n                tcpClient = new SimpleTcpClient(serverIP + &quot;:&quot; + tcpPort);\n                tcpClient.Events.Connected += Events_Connected;\n                tcpClient.Events.Disconnected += Events_Disconnected;\n                tcpClient.Events.DataReceived += Events_DataReceived;\n\n                tcpClient.Connect();\n            }\n            catch (Exception ex)\n            {\n                Console.WriteLine(ex.ToString());\n            }\n        }\n\n        private static void Events_Connected(object sender, ConnectionEventArgs e)\n        {\n            Console.WriteLine(&quot;Connected to Server: &quot; + e.IpPort);\n        }\n\n        private static void Events_Disconnected(object sender, ConnectionEventArgs e)\n        {\n\n        }\n\n        private static void Events_DataReceived(object sender, SuperSimpleTcp.DataReceivedEventArgs e)\n        {\n            string dataString = Encoding.UTF8.GetString(e.Data);\n            Console.WriteLine(&quot;Received Data: &quot; + dataString);\n            \n            ServerCommands serverCommand = (ServerCommands)int.Parse(dataString);\n            switch (serverCommand)\n            {\n                case ServerCommands.TURN_OFF:\n                    var psi = new ProcessStartInfo(&quot;shutdown&quot;, &quot;/s /t 0&quot;);\n                    psi.CreateNoWindow = true;\n                    psi.UseShellExecute = false;\n                    Process.Start(psi);\n                    break;\n                default:\n                    break;\n            }\n        }\n    }\n}\n</code></pre>\n<p>Wireshark seems to confirm that the message has been sent to the server.\nIt even catches a message sent back by the server to the client in response.\nI am testing this on a test-router which doesn't have internet access and no firewall active.\nMy server app has the following permissions:</p>\n<pre><code>    &lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; tools:ignore=&quot;ManifestOrder&quot;/&gt;\n    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_WIFI_STATE&quot;/&gt;\n    &lt;uses-permission android:name=&quot;android.permission.CHANGE_WIFI_MULTICAST_STATE&quot;/&gt;\n    &lt;uses-permission android:name=&quot;android.permission.FOREGROUND_SERVICE&quot; /&gt;\n</code></pre>\n<p>TLDR: My Android java server doesn't get any C# client messages sent via TCP connection.</p>\n"},{"tags":["java","if-statement","while-loop","leap-year"],"answers":[{"tags":[],"owner":{"account_id":2392732,"reputation":41,"user_id":2092266,"display_name":"therealmarauder"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1648161324,"creation_date":1648161324,"answer_id":71610232,"question_id":71610114,"body_markdown":"You&#39;re very close; an easier way to do this would be something like this.\r\n\r\n```int year;\r\nScanner myScanner = new Scanner(System.in);      \r\nSystem.out.print(&quot;Please input year(s) (-1 to end): &quot;);\r\nyear = myScanner.nextInt(); \r\nfor (; year != -1; year = myScanner.nextInt(); \r\n{\r\n    if (year &lt; 1582)\r\n    {\r\n        System.out.print(&quot;Error (enter value greater than or equal to 1582, or -1 to exit to main): &quot;);\r\n        continue;\r\n    }\r\n    if ((year % 4 != 0) || (year % 100 == 0 &amp;&amp; year % 400 != 0))\r\n        System.out.print(&quot;Sorry, this value is not a leap year.&quot;);\r\n    else\r\n        System.out.print(&quot;This value is a leap year.&quot;);\r\n    System.out.print(&quot;Please input year(s) (-1 to end): &quot;);\r\n} \r\n```\r\n\r\nI think it&#39;s always tricky to get response loops correct and also looking nice. In this case, you were using `break` where I think you meant to use `continue`. You don&#39;t need a special loop for the error, though; you can do it by printing the error prompt and kicking it back to the main read loop.","title":"Evaluating multiple leap years","body":"<p>You're very close; an easier way to do this would be something like this.</p>\n<pre><code>Scanner myScanner = new Scanner(System.in);      \nSystem.out.print(&quot;Please input year(s) (-1 to end): &quot;);\nyear = myScanner.nextInt(); \nfor (; year != -1; year = myScanner.nextInt(); \n{\n    if (year &lt; 1582)\n    {\n        System.out.print(&quot;Error (enter value greater than or equal to 1582, or -1 to exit to main): &quot;);\n        continue;\n    }\n    if ((year % 4 != 0) || (year % 100 == 0 &amp;&amp; year % 400 != 0))\n        System.out.print(&quot;Sorry, this value is not a leap year.&quot;);\n    else\n        System.out.print(&quot;This value is a leap year.&quot;);\n    System.out.print(&quot;Please input year(s) (-1 to end): &quot;);\n} \n</code></pre>\n<p>I think it's always tricky to get response loops correct and also looking nice. In this case, you were using <code>break</code> where I think you meant to use <code>continue</code>. You don't need a special loop for the error, though; you can do it by printing the error prompt and kicking it back to the main read loop.</p>\n"}],"owner":{"account_id":24158949,"reputation":1,"user_id":18122776,"display_name":"Keel"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":187,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1649772358,"creation_date":1648160362,"question_id":71610114,"body_markdown":"I need to modify this program I made that checks years if they are leap years. the modifications have to evaluate multiple years until the user wants to end by sentinel value. I also have to have each year to verify whether it is less than 1582 and say invalid or redirect to the error message again. been unsure of how i can accomplish this, thanks for any help that can be given\r\n\r\n```\r\nint year;\r\nScanner myScanner = new Scanner(System.in);      \r\nSystem.out.print(&quot;Please input year(s) (-1 to end): &quot;);\r\nyear = myScanner.nextInt(); \r\nwhile (year != -1)\r\n{\r\n\twhile (year &lt; 1582)\r\n\t{\r\n\t\tSystem.out.print(&quot;Error (enter value greater than or equal to 1582 (-1 to exit to main): &quot;);\r\n\t\tyear = myScanner.nextInt();\r\n\t\tif (year &gt;= 1582 || year == -1)\r\n\t\t\tbreak;\r\n\t}\r\n\tif (year &gt;= 1582)\r\n\t\tif ((year % 4 != 0) || (year % 100 == 0 &amp;&amp; year % 400 != 0))\r\n\t\t\tSystem.out.print(&quot;Sorry, this value is not a leap year.&quot;);\r\n\t\telse\r\n\t\t\tSystem.out.print(&quot;This value is a leap year.&quot;);\r\n\tbreak;\r\n} \r\n\r\n```","title":"Evaluating multiple leap years","body":"<p>I need to modify this program I made that checks years if they are leap years. the modifications have to evaluate multiple years until the user wants to end by sentinel value. I also have to have each year to verify whether it is less than 1582 and say invalid or redirect to the error message again. been unsure of how i can accomplish this, thanks for any help that can be given</p>\n<pre><code>int year;\nScanner myScanner = new Scanner(System.in);      \nSystem.out.print(&quot;Please input year(s) (-1 to end): &quot;);\nyear = myScanner.nextInt(); \nwhile (year != -1)\n{\n    while (year &lt; 1582)\n    {\n        System.out.print(&quot;Error (enter value greater than or equal to 1582 (-1 to exit to main): &quot;);\n        year = myScanner.nextInt();\n        if (year &gt;= 1582 || year == -1)\n            break;\n    }\n    if (year &gt;= 1582)\n        if ((year % 4 != 0) || (year % 100 == 0 &amp;&amp; year % 400 != 0))\n            System.out.print(&quot;Sorry, this value is not a leap year.&quot;);\n        else\n            System.out.print(&quot;This value is a leap year.&quot;);\n    break;\n} \n\n</code></pre>\n"},{"tags":["java","oracle","maven","jdbc"],"comments":[{"owner":{"account_id":2599844,"reputation":8426,"user_id":2252572,"accept_rate":63,"display_name":"Bacteria"},"score":1,"creation_date":1442598186,"post_id":32657829,"comment_id":53162372,"body_markdown":"**did u upgrade Java**? Which version u was using before mavenized ur web app &amp; now which version u r using?","body":"<b>did u upgrade Java</b>? Which version u was using before mavenized ur web app &amp; now which version u r using?"},{"owner":{"account_id":6464248,"reputation":6030,"user_id":5006866,"display_name":"thokuest"},"score":0,"creation_date":1442599465,"post_id":32657829,"comment_id":53163021,"body_markdown":"Would you mind to post the complete stack trace?","body":"Would you mind to post the complete stack trace?"},{"owner":{"account_id":3498641,"reputation":827,"user_id":2925985,"accept_rate":87,"display_name":"Susannah Potts"},"score":0,"creation_date":1442599644,"post_id":32657829,"comment_id":53163120,"body_markdown":"We&#39;re using Java 1.7, and yes, I&#39;ll post the stack trace in the question.","body":"We&#39;re using Java 1.7, and yes, I&#39;ll post the stack trace in the question."}],"answers":[{"tags":[],"owner":{"account_id":96061,"reputation":317,"user_id":261296,"display_name":"Sean McEligot"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1442597992,"creation_date":1442597992,"answer_id":32657981,"question_id":32657829,"body_markdown":"You need run maven  install-file since maven can&#39;t download it.\r\n\r\n[https://stackoverflow.com/questions/1074869/find-oracle-jdbc-driver-in-maven-repository/1074971#1074971e][1]\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/1074869/find-oracle-jdbc-driver-in-maven-repository/1074971#1074971","title":"Oracle Driver Error oracle.jdbc.driver.T4CConnection.isValid(I)Z","body":"<p>You need run maven  install-file since maven can't download it.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/1074869/find-oracle-jdbc-driver-in-maven-repository/1074971#1074971\">https://stackoverflow.com/questions/1074869/find-oracle-jdbc-driver-in-maven-repository/1074971#1074971e</a></p>\n"}],"owner":{"account_id":3498641,"reputation":827,"user_id":2925985,"accept_rate":87,"display_name":"Susannah Potts"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":8688,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1649772065,"creation_date":1442597378,"question_id":32657829,"body_markdown":"I&#39;m using the `ojdbc7.jar` that is distributed from the Oracle site, and so far it has worked perfectly.  Recently, however, we&#39;ve decided to switch to using a maven structure for our webapp development so I&#39;ve been converting our Java Web App to maven.  Now I&#39;m seeing this `oracle.jdbc.driver.T4CConnection.isValid(I)Z` error when making an Oracle DB connection even though I&#39;m using the exact same driver file as I was in my non-maven build.  I have the dependency declared like this:\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;com.oracle&lt;/groupId&gt;\r\n        &lt;artifactId&gt;ojdbc&lt;/artifactId&gt;\r\n        &lt;version&gt;7&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nI have manually installed the driver using Netbeans, as the maven depository does not contain the ojdbc7 driver.  \r\n\r\nWhy am I seeing this error and what can I do about it?  It&#39;s clearly a maven related problem seeing as this builds perfectly without maven managing it.  \r\n\r\nStack Trace:\r\n\r\n    org.apache.tomcat.dbcp.dbcp2.DelegatingConnection.isValid(DelegatingConnection.java:913)\r\n\r\n    org.apache.tomcat.dbcp.dbcp2.PoolableConnection.validate(PoolableConnection.java:226)\r\n\r\n    org.apache.tomcat.dbcp.dbcp2.PoolableConnectionFactory.validateConnection(PoolableConnectionFactory.java:302)\r\n\r\n    org.apache.tomcat.dbcp.dbcp2.BasicDataSource.validateConnectionFactory(BasicDataSource.java:2208)\r\n\r\n    org.apache.tomcat.dbcp.dbcp2.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:2191)\r\n\r\n    org.apache.tomcat.dbcp.dbcp2.BasicDataSource.createDataSource(BasicDataSource.java:1945)\r\n\r\n    org.apache.tomcat.dbcp.dbcp2.BasicDataSource.getConnection(BasicDataSource.java:1412)\r\n\r\n    com.networkfleet.sre.common.db.Resource.getDBConnectionDEV(Resource.java:75)\r\n\r\n    com.networkfleet.sre.app.checkreport.CheckReportSrv.doGet(CheckReportSrv.java:63)\r\n\r\n    javax.servlet.http.HttpServlet.service(HttpServlet.java:622)\r\n\r\n    javax.servlet.http.HttpServlet.service(HttpServlet.java:729)\r\n\r\n    org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:291)\r\n\r\n    org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\r\n    org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)\r\n\r\n    org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n\r\n    org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\r\n    org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:219)\r\n\r\n    org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:106)\r\n\r\n    org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:614)\r\n\r\n    org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:142)\r\n\r\n    org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79)\r\n\r\n    org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:617)\r\n\r\n    org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:88)\r\n\r\n    org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:518)\r\n\r\n    org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1091)\r\n\r\n    org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:668)\r\n\r\n    org.apache.tomcat.util.net.AprEndpoint$SocketProcessor.doRun(AprEndpoint.java:2463)\r\n\r\n    org.apache.tomcat.util.net.AprEndpoint$SocketProcessor.run(AprEndpoint.java:2452)\r\n\r\n    java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)\r\n\r\n    java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\r\n\r\n    org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\r\n    java.lang.Thread.run(Thread.java:745)","title":"Oracle Driver Error oracle.jdbc.driver.T4CConnection.isValid(I)Z","body":"<p>I'm using the <code>ojdbc7.jar</code> that is distributed from the Oracle site, and so far it has worked perfectly.  Recently, however, we've decided to switch to using a maven structure for our webapp development so I've been converting our Java Web App to maven.  Now I'm seeing this <code>oracle.jdbc.driver.T4CConnection.isValid(I)Z</code> error when making an Oracle DB connection even though I'm using the exact same driver file as I was in my non-maven build.  I have the dependency declared like this:</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.oracle&lt;/groupId&gt;\n    &lt;artifactId&gt;ojdbc&lt;/artifactId&gt;\n    &lt;version&gt;7&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>I have manually installed the driver using Netbeans, as the maven depository does not contain the ojdbc7 driver.  </p>\n\n<p>Why am I seeing this error and what can I do about it?  It's clearly a maven related problem seeing as this builds perfectly without maven managing it.  </p>\n\n<p>Stack Trace:</p>\n\n<pre><code>org.apache.tomcat.dbcp.dbcp2.DelegatingConnection.isValid(DelegatingConnection.java:913)\n\norg.apache.tomcat.dbcp.dbcp2.PoolableConnection.validate(PoolableConnection.java:226)\n\norg.apache.tomcat.dbcp.dbcp2.PoolableConnectionFactory.validateConnection(PoolableConnectionFactory.java:302)\n\norg.apache.tomcat.dbcp.dbcp2.BasicDataSource.validateConnectionFactory(BasicDataSource.java:2208)\n\norg.apache.tomcat.dbcp.dbcp2.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:2191)\n\norg.apache.tomcat.dbcp.dbcp2.BasicDataSource.createDataSource(BasicDataSource.java:1945)\n\norg.apache.tomcat.dbcp.dbcp2.BasicDataSource.getConnection(BasicDataSource.java:1412)\n\ncom.networkfleet.sre.common.db.Resource.getDBConnectionDEV(Resource.java:75)\n\ncom.networkfleet.sre.app.checkreport.CheckReportSrv.doGet(CheckReportSrv.java:63)\n\njavax.servlet.http.HttpServlet.service(HttpServlet.java:622)\n\njavax.servlet.http.HttpServlet.service(HttpServlet.java:729)\n\norg.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:291)\n\norg.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\n\norg.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)\n\norg.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\n\norg.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\n\norg.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:219)\n\norg.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:106)\n\norg.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:614)\n\norg.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:142)\n\norg.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79)\n\norg.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:617)\n\norg.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:88)\n\norg.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:518)\n\norg.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1091)\n\norg.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:668)\n\norg.apache.tomcat.util.net.AprEndpoint$SocketProcessor.doRun(AprEndpoint.java:2463)\n\norg.apache.tomcat.util.net.AprEndpoint$SocketProcessor.run(AprEndpoint.java:2452)\n\njava.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)\n\njava.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\n\norg.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\n\njava.lang.Thread.run(Thread.java:745)\n</code></pre>\n"},{"tags":["java","spring-jms"],"comments":[{"owner":{"account_id":18358975,"reputation":332,"user_id":13371454,"display_name":"Vladimir Shadrin"},"score":1,"creation_date":1649771547,"post_id":71843284,"comment_id":126956833,"body_markdown":"thanks, but this is better answer on my question: https://stackoverflow.com/questions/60069782/how-to-manually-acknowledge-message-from-activemq-using-spring-jmslistener","body":"thanks, but this is better answer on my question: <a href=\"https://stackoverflow.com/questions/60069782/how-to-manually-acknowledge-message-from-activemq-using-spring-jmslistener\" title=\"how to manually acknowledge message from activemq using spring jmslistener\">stackoverflow.com/questions/60069782/&hellip;</a>"},{"owner":{"account_id":11434008,"reputation":30690,"user_id":8381946,"display_name":"Justin Bertram"},"score":2,"creation_date":1649771780,"post_id":71843284,"comment_id":126956938,"body_markdown":"Then you should up-vote that answer and close this question.","body":"Then you should up-vote that answer and close this question."}],"answers":[{"tags":[],"owner":{"account_id":18358975,"reputation":332,"user_id":13371454,"display_name":"Vladimir Shadrin"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1649771907,"creation_date":1649771907,"answer_id":71844046,"question_id":71843284,"body_markdown":"As already wrote here: https://stackoverflow.com/questions/60069782/how-to-manually-acknowledge-message-from-activemq-using-spring-jmslistener\r\n\r\nI need to configure DefaultJmsListenerContainerFactory like this:\r\n\r\n```\r\nDefaultJmsListenerContainerFactory factory = new DefaultJmsListenerContainerFactory();\r\nfactory.setSessionAcknowledgeMode(javax.jms.Session.CLIENT_ACKNOWLEDGE);\r\n```\r\n\r\nOr just specify \r\n```\r\nspring.jms.listener.acknowledge-mode: CLIENT\r\n```\r\nin the application.yml","title":"How to force redelivery of JMS message","body":"<p>As already wrote here: <a href=\"https://stackoverflow.com/questions/60069782/how-to-manually-acknowledge-message-from-activemq-using-spring-jmslistener\">How to manually acknowledge message from ActiveMQ using Spring JmsListener</a></p>\n<p>I need to configure DefaultJmsListenerContainerFactory like this:</p>\n<pre><code>DefaultJmsListenerContainerFactory factory = new DefaultJmsListenerContainerFactory();\nfactory.setSessionAcknowledgeMode(javax.jms.Session.CLIENT_ACKNOWLEDGE);\n</code></pre>\n<p>Or just specify</p>\n<pre><code>spring.jms.listener.acknowledge-mode: CLIENT\n</code></pre>\n<p>in the application.yml</p>\n"}],"owner":{"account_id":18358975,"reputation":332,"user_id":13371454,"display_name":"Vladimir Shadrin"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":510,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1649953381,"answer_count":1,"score":1,"last_activity_date":1649771907,"creation_date":1649768693,"question_id":71843284,"body_markdown":"I&#39;m writing a service which receives JMS messages from ActiveMQ and calls other services via HTTP. Because HTTP connection may fail I need try to process these messages later. How can I do it? Is it enough just throw exception in the listener?\r\n\r\nMy listener looks like:\r\n```\r\n@JmsListener(destination = &quot;${topic-name}&quot;)\r\npublic void listen(SomeEvent event) { \r\n  try {\r\n\r\n    // do work\r\n\r\n  } catch (Exception e) {\r\n    // is it enough to rethrow exception here?\r\n  }\r\n}","title":"How to force redelivery of JMS message","body":"<p>I'm writing a service which receives JMS messages from ActiveMQ and calls other services via HTTP. Because HTTP connection may fail I need try to process these messages later. How can I do it? Is it enough just throw exception in the listener?</p>\n<p>My listener looks like:</p>\n<pre><code>@JmsListener(destination = &quot;${topic-name}&quot;)\npublic void listen(SomeEvent event) { \n  try {\n\n    // do work\n\n  } catch (Exception e) {\n    // is it enough to rethrow exception here?\n  }\n}\n</code></pre>\n"},{"tags":["java","file"],"comments":[{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1499667721,"post_id":45004970,"comment_id":76983608,"body_markdown":"Use `FileOutputStream` or `FileWriter`","body":"Use <code>FileOutputStream</code> or <code>FileWriter</code>"},{"owner":{"account_id":1252022,"reputation":19996,"user_id":6730571,"display_name":"Hugues M."},"score":0,"creation_date":1499670056,"post_id":45004970,"comment_id":76984736,"body_markdown":"No, don&#39;t use `FileOutputStream` or `FileWriter`, [`Files.copy`](https://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html#copy(java.io.InputStream,%20java.nio.file.Path,%20java.nio.file.CopyOption...)) is fine, they just need to read the doc, target is a file, not a directory (answers are correct)","body":"No, don&#39;t use <code>FileOutputStream</code> or <code>FileWriter</code>, <a href=\"https://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html#copy(java.io.InputStream,%20java.nio.file.Path,%20java.nio.file.CopyOption...)\" rel=\"nofollow noreferrer\"><code>Files.copy</code></a> is fine, they just need to read the doc, target is a file, not a directory (answers are correct)"}],"answers":[{"tags":[],"owner":{"account_id":1789488,"reputation":1711,"user_id":1630224,"display_name":"HammerNL"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1499668389,"creation_date":1499667800,"answer_id":45005013,"question_id":45004970,"body_markdown":"First create the new directory, then copy the stream to a new file in that directory:\r\n\r\n    Path to = Paths.get(&quot;mynewdir/test&quot;);\r\n    Files.copy(is, to);\r\n\r\nAlso bare in mind that your InputStream does not have a filename, so you will always need to provide a filename when writing the stream to disk. In your example, it will indeed try to create a file &#39;test&#39;, but apparently that is a folder that already exists (hence the Exception). So you need to specify the full filename.","title":"FileAlreadyExistsException when using Files.copy","body":"<p>First create the new directory, then copy the stream to a new file in that directory:</p>\n\n<pre><code>Path to = Paths.get(\"mynewdir/test\");\nFiles.copy(is, to);\n</code></pre>\n\n<p>Also bare in mind that your InputStream does not have a filename, so you will always need to provide a filename when writing the stream to disk. In your example, it will indeed try to create a file 'test', but apparently that is a folder that already exists (hence the Exception). So you need to specify the full filename.</p>\n"},{"tags":[],"owner":{"account_id":222568,"reputation":11754,"user_id":481248,"display_name":"Jason"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1499667829,"creation_date":1499667829,"answer_id":45005025,"question_id":45004970,"body_markdown":"The &#39;to&#39; parameter of `Files.copy(from, to)` is the path to the destination file.\r\n\r\nTry specifying what file name inside the test directory:\r\n\r\n    Path to = Paths.get(&quot;test/newfilename&quot;);\r\n    Files.copy(is, to);","title":"FileAlreadyExistsException when using Files.copy","body":"<p>The 'to' parameter of <code>Files.copy(from, to)</code> is the path to the destination file.</p>\n\n<p>Try specifying what file name inside the test directory:</p>\n\n<pre><code>Path to = Paths.get(\"test/newfilename\");\nFiles.copy(is, to);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9631058,"reputation":39,"user_id":7148924,"display_name":"Hanamant Guggari"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1499669529,"creation_date":1499669529,"answer_id":45005458,"question_id":45004970,"body_markdown":"Here is a answer for you question:\r\n\r\nReferring to you code snippet: Paths.get(&quot;test&quot;);\r\nyou&#39;re asking a file path to the file named &quot;test&quot; in the current directory but not the directory. \r\nIf you want to refer the file under test directory which in tern under your current directory. use the following:\r\nPaths.get(&quot;test/filename.ext&quot;) to which you want to write your stream data.\r\n\r\nIf you run your app twice, you get &quot;FileAlreadyExistsException&quot; because copy method on Files writes to new file , if exists it&#39;ll not override it.\r\n\r\nI hope this helps you!","title":"FileAlreadyExistsException when using Files.copy","body":"<p>Here is a answer for you question:</p>\n\n<p>Referring to you code snippet: Paths.get(\"test\");\nyou're asking a file path to the file named \"test\" in the current directory but not the directory. \nIf you want to refer the file under test directory which in tern under your current directory. use the following:\nPaths.get(\"test/filename.ext\") to which you want to write your stream data.</p>\n\n<p>If you run your app twice, you get \"FileAlreadyExistsException\" because copy method on Files writes to new file , if exists it'll not override it.</p>\n\n<p>I hope this helps you!</p>\n"},{"tags":[],"owner":{"account_id":1416182,"reputation":168,"user_id":1341814,"display_name":"3omar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649771745,"creation_date":1649771745,"answer_id":71844004,"question_id":45004970,"body_markdown":"You can use the option `StandardCopyOption.REPLACE_EXISTING` : \r\n\r\n```java\r\n    public void copyFileFromInputStream(InputStream is) {\r\n        Path to = Paths.get(&quot;test&quot;);\r\n        Files.copy(is, to, StandardCopyOption.REPLACE_EXISTING);\r\n    }\r\n```","title":"FileAlreadyExistsException when using Files.copy","body":"<p>You can use the option <code>StandardCopyOption.REPLACE_EXISTING</code> :</p>\n<pre class=\"lang-java prettyprint-override\"><code>    public void copyFileFromInputStream(InputStream is) {\n        Path to = Paths.get(&quot;test&quot;);\n        Files.copy(is, to, StandardCopyOption.REPLACE_EXISTING);\n    }\n</code></pre>\n"}],"owner":{"account_id":11293746,"reputation":197,"user_id":8281853,"accept_rate":40,"display_name":"jon givony"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1948,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":4,"score":1,"last_activity_date":1649771745,"creation_date":1499667626,"question_id":45004970,"body_markdown":"I am trying to copy a file from an `InputStream` into a local directory. I created a local directory called test, and it is located in my package root.\r\n\r\n    public void copyFileFromInputStream(InputStream is) {\r\n        Path to = Paths.get(&quot;test&quot;);\r\n        Files.copy(is, to);\r\n    }\r\n\r\nClearly I am misunderstanding `Files.copy(...)`, because it seems like it is trying to create a new file called &quot;test&quot; instead of placing the file into the directory &quot;test&quot;.\r\n\r\nHow do I write the file into the directory?\r\n","title":"FileAlreadyExistsException when using Files.copy","body":"<p>I am trying to copy a file from an <code>InputStream</code> into a local directory. I created a local directory called test, and it is located in my package root.</p>\n\n<pre><code>public void copyFileFromInputStream(InputStream is) {\n    Path to = Paths.get(\"test\");\n    Files.copy(is, to);\n}\n</code></pre>\n\n<p>Clearly I am misunderstanding <code>Files.copy(...)</code>, because it seems like it is trying to create a new file called \"test\" instead of placing the file into the directory \"test\".</p>\n\n<p>How do I write the file into the directory?</p>\n"},{"tags":["java","sockets","ssl","tls1.2","sslsocketfactory"],"comments":[{"owner":{"account_id":10513022,"reputation":3086,"user_id":7748072,"display_name":"Eug&#232;ne Adell"},"score":0,"creation_date":1625683595,"post_id":68290844,"comment_id":120695243,"body_markdown":"What do you call a partial handshake ? All handshakes start with a Client Hello message that suggest one or more cipher suites and this message has no property that could be partial or full. Besides, each Java version doesn&#39;t cover all SSL possibilities and you could instead rely on [OpenSSL](https://www.openssl.org/) (which doesn&#39;t cover everything but still cover more than Java).","body":"What do you call a partial handshake ? All handshakes start with a Client Hello message that suggest one or more cipher suites and this message has no property that could be partial or full. Besides, each Java version doesn&#39;t cover all SSL possibilities and you could instead rely on <a href=\"https://www.openssl.org/\" rel=\"nofollow noreferrer\">OpenSSL</a> (which doesn&#39;t cover everything but still cover more than Java)."},{"owner":{"account_id":4443960,"reputation":988,"user_id":3617811,"accept_rate":75,"display_name":"DraxDomax"},"score":0,"creation_date":1625686029,"post_id":68290844,"comment_id":120695975,"body_markdown":"that&#39;s my question(s) :) What is the minimal handshake that&#39;ll let me know if the server accepts the Cipher Suite? As for Java not covering all SSL possibilities - that&#39;s exactly why I need to write a PartialHandshaker that can accept an arbitrary (=not necessarily in the java client) Cipher Suite. According to the info I found, it&#39;s not only possible, but it&#39;s a fast way to just TEST if the server may accept insecure connections","body":"that&#39;s my question(s) :) What is the minimal handshake that&#39;ll let me know if the server accepts the Cipher Suite? As for Java not covering all SSL possibilities - that&#39;s exactly why I need to write a PartialHandshaker that can accept an arbitrary (=not necessarily in the java client) Cipher Suite. According to the info I found, it&#39;s not only possible, but it&#39;s a fast way to just TEST if the server may accept insecure connections"},{"owner":{"account_id":10513022,"reputation":3086,"user_id":7748072,"display_name":"Eug&#232;ne Adell"},"score":0,"creation_date":1625689880,"post_id":68290844,"comment_id":120697152,"body_markdown":"Your code is correct for testing a single Cipher, if it is not accepted by the server an [SSLHandshakeException](https://docs.oracle.com/javase/8/docs/api/javax/net/ssl/SSLHandshakeException.html) will be raised informing you that you could not go further. It isn&#39;t a partial handshake, but a minimal thing. Trying a cipher not covered by your Java version will raise the Exception you showed, hence the limits of Java for this purpose.","body":"Your code is correct for testing a single Cipher, if it is not accepted by the server an <a href=\"https://docs.oracle.com/javase/8/docs/api/javax/net/ssl/SSLHandshakeException.html\" rel=\"nofollow noreferrer\">SSLHandshakeException</a> will be raised informing you that you could not go further. It isn&#39;t a partial handshake, but a minimal thing. Trying a cipher not covered by your Java version will raise the Exception you showed, hence the limits of Java for this purpose."},{"owner":{"account_id":4443960,"reputation":988,"user_id":3617811,"accept_rate":75,"display_name":"DraxDomax"},"score":0,"creation_date":1625693087,"post_id":68290844,"comment_id":120698013,"body_markdown":"it will be hacked. If I got SSLv2, I will get this one too ;)","body":"it will be hacked. If I got SSLv2, I will get this one too ;)"},{"owner":{"account_id":85671,"reputation":40858,"user_id":238704,"display_name":"President James K. Polk"},"score":0,"creation_date":1625696145,"post_id":68290844,"comment_id":120698778,"body_markdown":"Java does not support such partial handshakes in its SSL/TLS api. I see no reason why you even need to perform a partial handshake anyway, just attempt to perform a regular complete handshake with each ciphersuite and see if it succeeds. SSLabs is testing thousands of servers per day, so performance tweaks are critical. Not so for your requirements.","body":"Java does not support such partial handshakes in its SSL/TLS api. I see no reason why you even need to perform a partial handshake anyway, just attempt to perform a regular complete handshake with each ciphersuite and see if it succeeds. SSLabs is testing thousands of servers per day, so performance tweaks are critical. Not so for your requirements."},{"owner":{"account_id":4443960,"reputation":988,"user_id":3617811,"accept_rate":75,"display_name":"DraxDomax"},"score":0,"creation_date":1625730443,"post_id":68290844,"comment_id":120705732,"body_markdown":"@PresidentJamesK.Polk More interesting than performance is the ability to use more than the 44 suites on board the typical Java distribution. There are about 500 of them and the ones they put with java are the &quot;good&quot; ones anyway... Remember this is a testing application.","body":"@PresidentJamesK.Polk More interesting than performance is the ability to use more than the 44 suites on board the typical Java distribution. There are about 500 of them and the ones they put with java are the &quot;good&quot; ones anyway... Remember this is a testing application."},{"owner":{"account_id":85671,"reputation":40858,"user_id":238704,"display_name":"President James K. Polk"},"score":1,"creation_date":1625747860,"post_id":68290844,"comment_id":120712979,"body_markdown":"That&#39;s a good point, and a reason you may not want to use the Java SSL/TLS api. There is a bouncycastle SSL/TLS Java library, it&#39;s open source so you can modify it for your needs and perhaps save yourself a lot of coding. I also seem to recall something like source code for the SSLabs tester on github. This was many years ago and I haven&#39;t really been tracking it, and my memory is not what it used to be ...","body":"That&#39;s a good point, and a reason you may not want to use the Java SSL/TLS api. There is a bouncycastle SSL/TLS Java library, it&#39;s open source so you can modify it for your needs and perhaps save yourself a lot of coding. I also seem to recall something like source code for the SSLabs tester on github. This was many years ago and I haven&#39;t really been tracking it, and my memory is not what it used to be ..."},{"owner":{"account_id":4443960,"reputation":988,"user_id":3617811,"accept_rate":75,"display_name":"DraxDomax"},"score":0,"creation_date":1625752255,"post_id":68290844,"comment_id":120715153,"body_markdown":"yes! I will grab the bouncycastle code and make it compile under our special machines. Thanks :)","body":"yes! I will grab the bouncycastle code and make it compile under our special machines. Thanks :)"}],"answers":[{"tags":[],"owner":{"account_id":593875,"reputation":20383,"user_id":276232,"accept_rate":50,"display_name":"Christopher Schultz"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1649771710,"creation_date":1649771710,"answer_id":71843995,"question_id":68290844,"body_markdown":"You may be interested in this project which I think includes all the code you might want for this type of thing:\r\n\r\n    https://github.com/ChristopherSchultz/ssltest\r\n\r\nWhen you say a &quot;partial handshake&quot; I think what you mean is that you want to probe the server for support for a specific protocol/cipher suite pair (or group, etc.). You can use an `SSLSocket` for this purpose, and you don&#39;t need to make e.g. an HTTPS connection and actually perform a transaction.\r\n\r\nIn order to get anything but the JVM default protocols and ciphers, you&#39;ll need to supply your own `SSLSocketFactory` which customizes an `SSLSocket` as it&#39;s being created / connected. That code is in the `CustomSSLSocketFactory` class in the above project, and of course there is code in there showing how to use it.\r\n\r\nRemember that the JVM has a group of cipher suites and protocols that have been implemented, but many of them have been disabled over the years and you may have to take steps to re-enable them. The code in this project sets system properties immediately after startup in order to remove as many restrictions as possible. That may not be possible (or advisable!) in your environment because you don&#39;t want to allow &quot;regular code&quot; to use these insecure algorithms and protocols.","title":"How to implement a partial SSL handshake to test arbitrary cipher suites?","body":"<p>You may be interested in this project which I think includes all the code you might want for this type of thing:</p>\n<pre><code>https://github.com/ChristopherSchultz/ssltest\n</code></pre>\n<p>When you say a &quot;partial handshake&quot; I think what you mean is that you want to probe the server for support for a specific protocol/cipher suite pair (or group, etc.). You can use an <code>SSLSocket</code> for this purpose, and you don't need to make e.g. an HTTPS connection and actually perform a transaction.</p>\n<p>In order to get anything but the JVM default protocols and ciphers, you'll need to supply your own <code>SSLSocketFactory</code> which customizes an <code>SSLSocket</code> as it's being created / connected. That code is in the <code>CustomSSLSocketFactory</code> class in the above project, and of course there is code in there showing how to use it.</p>\n<p>Remember that the JVM has a group of cipher suites and protocols that have been implemented, but many of them have been disabled over the years and you may have to take steps to re-enable them. The code in this project sets system properties immediately after startup in order to remove as many restrictions as possible. That may not be possible (or advisable!) in your environment because you don't want to allow &quot;regular code&quot; to use these insecure algorithms and protocols.</p>\n"}],"owner":{"account_id":4443960,"reputation":988,"user_id":3617811,"accept_rate":75,"display_name":"DraxDomax"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":288,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1649771710,"creation_date":1625679895,"question_id":68290844,"body_markdown":"The &quot;server&quot; needs to be tested to make sure it does not include a specific cipher suite, which sometimes, despite our developer&#39;s best intentions, still occasionally makes it into the server.\r\n\r\nHowever:\r\n * We cannot use an online service to test the server, because the server is not on the internet\r\n * We cannot use a library because the devices running the tests are using a special JDK and external libraries do not compile\r\n * We cannot use locally-installed tools because the runtime is specific and not linux/windows compatible\r\n\r\n(= we have to roll our own, using standard Java 8)\r\n\r\nFurthermore, we are not interested to test just the cipher suites that the test client has installed but &quot;any&quot; cipher suite that will be provided as arbitrary text.\r\n\r\nI found online ([OpenSSL Cookbook by Ivan Risti][1]):\r\n\r\n&gt; For SSL Labs, I resorted to using partial handshakes for this purpose, with a custom client that pretends to support arbitrary suites. It actually cant negotiate even a single suite, but just proposing to negotiate is enough for servers to tell you if they support a suite or not. Not only can you test all the suites this way, but you can also do it very efficiently.\r\n\r\nThis custom client sounds ideal for our purposes now and will be useful for similar SSL tests in the future - but I don&#39;t know what a &quot;partial handshake&quot; or &quot;propose to negotiate&quot; looks like in Java-8&#39;s SSL Sockets code.\r\nMy best effort is the following:\r\n\r\n    String[] enabledSuites = {&quot;TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384&quot;};\r\n    mySocket.setEnabledCipherSuites(enabledSuites);\r\n    mySocket.startHandshake();\r\n\r\nThe suite mentioned above works, because the client has it and the server allows it.\r\nHowever, when I try &quot;MY_SUITE&quot;, the code stops at ```setEnabledCipherSuites()``` with: ```Unsupported CipherSuite: MY_SUITE```&lt;BR&gt;\r\nWhich, to me, means the client didn&#39;t even try this, because it&#39;s not part of the list shown when doing ```getSupportedCipherSuites()``` \r\n\r\nSo, can a partial handshake be even implemented in Java 8 (without rewriting all the extra code that&#39;s on top of Socket)?\r\n\r\n  [1]: https://www.feistyduck.com/books/openssl-cookbook/","title":"How to implement a partial SSL handshake to test arbitrary cipher suites?","body":"<p>The &quot;server&quot; needs to be tested to make sure it does not include a specific cipher suite, which sometimes, despite our developer's best intentions, still occasionally makes it into the server.</p>\n<p>However:</p>\n<ul>\n<li>We cannot use an online service to test the server, because the server is not on the internet</li>\n<li>We cannot use a library because the devices running the tests are using a special JDK and external libraries do not compile</li>\n<li>We cannot use locally-installed tools because the runtime is specific and not linux/windows compatible</li>\n</ul>\n<p>(= we have to roll our own, using standard Java 8)</p>\n<p>Furthermore, we are not interested to test just the cipher suites that the test client has installed but &quot;any&quot; cipher suite that will be provided as arbitrary text.</p>\n<p>I found online (<a href=\"https://www.feistyduck.com/books/openssl-cookbook/\" rel=\"nofollow noreferrer\">OpenSSL Cookbook by Ivan Risti</a>):</p>\n<blockquote>\n<p>For SSL Labs, I resorted to using partial handshakes for this purpose, with a custom client that pretends to support arbitrary suites. It actually cant negotiate even a single suite, but just proposing to negotiate is enough for servers to tell you if they support a suite or not. Not only can you test all the suites this way, but you can also do it very efficiently.</p>\n</blockquote>\n<p>This custom client sounds ideal for our purposes now and will be useful for similar SSL tests in the future - but I don't know what a &quot;partial handshake&quot; or &quot;propose to negotiate&quot; looks like in Java-8's SSL Sockets code.\nMy best effort is the following:</p>\n<pre><code>String[] enabledSuites = {&quot;TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384&quot;};\nmySocket.setEnabledCipherSuites(enabledSuites);\nmySocket.startHandshake();\n</code></pre>\n<p>The suite mentioned above works, because the client has it and the server allows it.\nHowever, when I try &quot;MY_SUITE&quot;, the code stops at <code>setEnabledCipherSuites()</code> with: <code>Unsupported CipherSuite: MY_SUITE</code><BR>\nWhich, to me, means the client didn't even try this, because it's not part of the list shown when doing <code>getSupportedCipherSuites()</code></p>\n<p>So, can a partial handshake be even implemented in Java 8 (without rewriting all the extra code that's on top of Socket)?</p>\n"},{"tags":["java","google-app-engine","maven"],"comments":[{"owner":{"account_id":3948408,"reputation":567,"user_id":3259937,"accept_rate":33,"display_name":"user3259937"},"score":0,"creation_date":1427696652,"post_id":25008594,"comment_id":46866660,"body_markdown":"Hi, I face the same problem. But what do you mean by Ctrl+C to kill the dev server? How do I do this? Ctrl+C in the console?","body":"Hi, I face the same problem. But what do you mean by Ctrl+C to kill the dev server? How do I do this? Ctrl+C in the console?"},{"owner":{"account_id":6004028,"reputation":421,"user_id":4716474,"display_name":"Pratap Singh"},"score":0,"creation_date":1579153430,"post_id":25008594,"comment_id":105671927,"body_markdown":"@user3259937, Ctrl+C is command used on windows to abort running process on Command Prompt or Maven shell. So that you can start server again by &#39;mvn appengiine:devserver&#39;","body":"@user3259937, Ctrl+C is command used on windows to abort running process on Command Prompt or Maven shell. So that you can start server again by &#39;mvn appengiine:devserver&#39;"}],"answers":[{"tags":[],"owner":{"account_id":2811876,"reputation":4661,"user_id":2417948,"display_name":"Patrice"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1457482381,"creation_date":1406727442,"answer_id":25038318,"question_id":25008594,"body_markdown":"Unfortunately no.  If you want this behavior on your dev server, you need to use Python.\r\n\r\nI run in the same issue and there is no real workaround provided by the App Engine to help you doing this.\r\n\r\nFrom the &quot;Using The Google plugin for Eclipse&quot;:   \r\n\r\n&gt;&gt;With Eclipse, you can leave the server running in the debugger while you make changes to source code, JSPs, static files and appengine-web.xml. When you save changes to source code, Eclipse compiles the class automatically, then attempts to insert it into the running web server dynamically. In most cases, you can simply reload the page in your browser to test the new version of the code. Changes to JSPs, static files and appengine-web.xml are recognized by the development server automatically, and also take effect without restarting the server. If you change web.xml or other configuration files, you must stop and start the server for the changes to take effect.\r\n\r\n(https://developers.google.com/appengine/docs/java/tools/eclipse#Running_the_Project)\r\n\r\nThere is NOTHING comparable in Java (link from &quot;The Java Development Server&quot;) (https://developers.google.com/appengine/docs/java/tools/devserver)","title":"How to auto reload app engine dev server?","body":"<p>Unfortunately no.  If you want this behavior on your dev server, you need to use Python.</p>\n\n<p>I run in the same issue and there is no real workaround provided by the App Engine to help you doing this.</p>\n\n<p>From the \"Using The Google plugin for Eclipse\":   </p>\n\n<blockquote>\n  <blockquote>\n    <p>With Eclipse, you can leave the server running in the debugger while you make changes to source code, JSPs, static files and appengine-web.xml. When you save changes to source code, Eclipse compiles the class automatically, then attempts to insert it into the running web server dynamically. In most cases, you can simply reload the page in your browser to test the new version of the code. Changes to JSPs, static files and appengine-web.xml are recognized by the development server automatically, and also take effect without restarting the server. If you change web.xml or other configuration files, you must stop and start the server for the changes to take effect.</p>\n  </blockquote>\n</blockquote>\n\n<p>(<a href=\"https://developers.google.com/appengine/docs/java/tools/eclipse#Running_the_Project\" rel=\"nofollow\">https://developers.google.com/appengine/docs/java/tools/eclipse#Running_the_Project</a>)</p>\n\n<p>There is NOTHING comparable in Java (link from \"The Java Development Server\") (<a href=\"https://developers.google.com/appengine/docs/java/tools/devserver\" rel=\"nofollow\">https://developers.google.com/appengine/docs/java/tools/devserver</a>)</p>\n"},{"tags":[],"owner":{"account_id":1381961,"reputation":11270,"user_id":1314762,"display_name":"Don McCurdy"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1441254016,"creation_date":1441254016,"answer_id":32366899,"question_id":25008594,"body_markdown":"There&#39;s currently nothing in the App Engine SDK to automatically restart when files change, but that&#39;s not to say you can&#39;t do it. I ran into the same problem and wrote up a script to listen for file changes as triggers to restart App Engine. It&#39;s in JavaScript, so you&#39;ll need to [install Node.js](https://nodejs.org/en/) if you haven&#39;t already.\r\n\r\n    // Install watch-exec\r\n    $ npm install -g watch-exec\r\n\r\n    // Watch the current directory\r\n    $ watch-exec --command &quot;mvn appengine:devserver&quot; --watch .\r\n\r\nThis will immediately start App Engine, and then restart it any time a file changes. If the app crashes for some reason, the script will wait for your next edit before trying to restart.\r\n\r\n----------\r\n\r\nP.S. That entire script is about 40 lines of code, and you could probably do the same thing in other scripting languages. If you haven&#39;t tried writing your own automation before, I&#39;d definitely recommend checking out the [source code](https://github.com/donmccurdy/watch-exec/blob/master/watch-exec.js) to see how this works.","title":"How to auto reload app engine dev server?","body":"<p>There's currently nothing in the App Engine SDK to automatically restart when files change, but that's not to say you can't do it. I ran into the same problem and wrote up a script to listen for file changes as triggers to restart App Engine. It's in JavaScript, so you'll need to <a href=\"https://nodejs.org/en/\" rel=\"nofollow\">install Node.js</a> if you haven't already.</p>\n\n<pre><code>// Install watch-exec\n$ npm install -g watch-exec\n\n// Watch the current directory\n$ watch-exec --command \"mvn appengine:devserver\" --watch .\n</code></pre>\n\n<p>This will immediately start App Engine, and then restart it any time a file changes. If the app crashes for some reason, the script will wait for your next edit before trying to restart.</p>\n\n<hr>\n\n<p>P.S. That entire script is about 40 lines of code, and you could probably do the same thing in other scripting languages. If you haven't tried writing your own automation before, I'd definitely recommend checking out the <a href=\"https://github.com/donmccurdy/watch-exec/blob/master/watch-exec.js\" rel=\"nofollow\">source code</a> to see how this works.</p>\n"},{"tags":[],"owner":{"account_id":1655959,"reputation":566,"user_id":1525529,"accept_rate":50,"display_name":"Neill"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1486906695,"creation_date":1486906695,"answer_id":42188223,"question_id":25008594,"body_markdown":"I&#39;ve found using Gradle, GAE, and Spring MVC, the assemble command will put the correct artifacts in place, and the server will re-init the app. It&#39;s a little quicker than a server restart.","title":"How to auto reload app engine dev server?","body":"<p>I've found using Gradle, GAE, and Spring MVC, the assemble command will put the correct artifacts in place, and the server will re-init the app. It's a little quicker than a server restart.</p>\n"},{"tags":[],"owner":{"account_id":1572088,"reputation":191,"user_id":1459584,"accept_rate":83,"display_name":"timmacp"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649771697,"creation_date":1649771697,"answer_id":71843992,"question_id":25008594,"body_markdown":"Using App Engine standard with the cloud.tools appengine-maven-plugin hot swap works fine (most of the time, can be problems when setting up the workspace).\r\nFor a multi-module maven project: no need to stop the server or browser,\r\njust push the code changes (maven command  package -pl *-server) \r\n&amp; refresh the browser.\r\nDebugging with a debug client currently works perfectly for changing / adding code within methods.","title":"How to auto reload app engine dev server?","body":"<p>Using App Engine standard with the cloud.tools appengine-maven-plugin hot swap works fine (most of the time, can be problems when setting up the workspace).\nFor a multi-module maven project: no need to stop the server or browser,\njust push the code changes (maven command  package -pl *-server)\n&amp; refresh the browser.\nDebugging with a debug client currently works perfectly for changing / adding code within methods.</p>\n"}],"owner":{"account_id":2452212,"reputation":4530,"user_id":2138200,"accept_rate":73,"display_name":"sthomps"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3970,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":25038318,"answer_count":4,"score":5,"last_activity_date":1649771697,"creation_date":1406610713,"question_id":25008594,"body_markdown":"Im following the [tutorial on the App Engine website for &#39;Google Cloud Endpoints&#39; in Java][1]. Everything works fine and I can run the development server using `mvn appengine:devserver`. The problem is that when I make any changes to a file (for example, any java file) the dev server doesnt automatically recompile. I need to ctrl-c to kill the dev server and restart it for every code change I make.\r\n\r\nIs there a way to have maven automatically detect changes to any files in my project and have it automatically rebuild and restart the dev server? \r\n\r\n\r\n  [1]: https://developers.google.com/appengine/docs/java/endpoints/getstarted/backend","title":"How to auto reload app engine dev server?","body":"<p>Im following the <a href=\"https://developers.google.com/appengine/docs/java/endpoints/getstarted/backend\" rel=\"noreferrer\">tutorial on the App Engine website for 'Google Cloud Endpoints' in Java</a>. Everything works fine and I can run the development server using <code>mvn appengine:devserver</code>. The problem is that when I make any changes to a file (for example, any java file) the dev server doesnt automatically recompile. I need to ctrl-c to kill the dev server and restart it for every code change I make.</p>\n\n<p>Is there a way to have maven automatically detect changes to any files in my project and have it automatically rebuild and restart the dev server? </p>\n"},{"tags":["java","google-text-to-speech"],"comments":[{"owner":{"account_id":15285793,"reputation":1958,"user_id":11028850,"display_name":"Sakshi Gatyan"},"score":0,"creation_date":1649739808,"post_id":71816514,"comment_id":126946088,"body_markdown":"Did you try playing the audio file as mentioned [here](https://stackoverflow.com/questions/6045384/playing-mp3-and-wav-in-java)?","body":"Did you try playing the audio file as mentioned <a href=\"https://stackoverflow.com/questions/6045384/playing-mp3-and-wav-in-java\">here</a>?"},{"owner":{"account_id":15285793,"reputation":1958,"user_id":11028850,"display_name":"Sakshi Gatyan"},"score":0,"creation_date":1649739997,"post_id":71816514,"comment_id":126946119,"body_markdown":"Similar Stack thread: https://stackoverflow.com/questions/58310377/is-it-possible-to-synthesize-text-to-speech-without-writing-a-new-file","body":"Similar Stack thread: <a href=\"https://stackoverflow.com/questions/58310377/is-it-possible-to-synthesize-text-to-speech-without-writing-a-new-file\" title=\"is it possible to synthesize text to speech without writing a new file\">stackoverflow.com/questions/58310377/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":22789266,"reputation":301,"user_id":16943869,"display_name":"Saheed"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1649771198,"creation_date":1649771198,"answer_id":71843862,"question_id":71816514,"body_markdown":"i fixed this, i added a jplayer to my dependencies then i replaced then i replaced the mp3 part with this:\r\n\r\n    BufferedInputStream inputStream = new BufferedInputStream(new ByteArrayInputStream(audioContents.toByteArray()));\r\n            Player player = new Player(inputStream); //player from jplayer\r\n            player.play();","title":"Java Google Text to Speech: Play Reponse, Do not Convert to mp3","body":"<p>i fixed this, i added a jplayer to my dependencies then i replaced then i replaced the mp3 part with this:</p>\n<pre><code>BufferedInputStream inputStream = new BufferedInputStream(new ByteArrayInputStream(audioContents.toByteArray()));\n        Player player = new Player(inputStream); //player from jplayer\n        player.play();\n</code></pre>\n"}],"owner":{"account_id":22789266,"reputation":301,"user_id":16943869,"display_name":"Saheed"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":301,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71843862,"answer_count":1,"score":0,"last_activity_date":1649771198,"creation_date":1649593013,"question_id":71816514,"body_markdown":"I am using the google text-to-speech API and I am trying to figure out how I&#39;d be able to play the google response immediately rather than converting it to a mp3 file\r\n\r\n     public static void TTS(String word) throws IOException {\r\n        authExplicit();\r\n        try (\r\n\r\n    \r\n        // Set the text input to be synthesized\r\n        SynthesisInput input = SynthesisInput.newBuilder().setText(word).build();\r\n\r\n        // Build the voice request, select the language code (&quot;en-US&quot;) and the ssml voice gender\r\n        // (&quot;neutral&quot;)\r\n        VoiceSelectionParams voice =\r\n                VoiceSelectionParams.newBuilder()\r\n                        .setLanguageCode(&quot;en-US&quot;)\r\n                        .setSsmlGender(SsmlVoiceGender.NEUTRAL)\r\n                        .build();\r\n\r\n        // Select the type of audio file you want returned\r\n        AudioConfig audioConfig =\r\n                AudioConfig.newBuilder().setAudioEncoding(AudioEncoding.MP3).build();\r\n\r\n        // Perform the text-to-speech request on the text input with the selected voice parameters and\r\n        // audio file type\r\n        SynthesizeSpeechResponse response =\r\n                textToSpeechClient.synthesizeSpeech(input, voice, audioConfig);\r\n\r\n        // Get the audio contents from the response\r\n        ByteString audioContents = response.getAudioContent();\r\n\r\n\r\n        // HERE, I DO NOT WANT TO CONVERT TO MP3. I just want the audio played out.....\r\n        try (OutputStream out = new FileOutputStream(&quot;output.mp3&quot;)) {\r\n            out.write(audioContents.toByteArray());\r\n\r\n            System.out.println(&quot;Audio content written to file \\&quot;output.mp3\\&quot;&quot;);\r\n        }\r\n\r\n    }\r\n}\r\n","title":"Java Google Text to Speech: Play Reponse, Do not Convert to mp3","body":"<p>I am using the google text-to-speech API and I am trying to figure out how I'd be able to play the google response immediately rather than converting it to a mp3 file</p>\n<pre><code> public static void TTS(String word) throws IOException {\n    authExplicit();\n    try (\n\n\n    // Set the text input to be synthesized\n    SynthesisInput input = SynthesisInput.newBuilder().setText(word).build();\n\n    // Build the voice request, select the language code (&quot;en-US&quot;) and the ssml voice gender\n    // (&quot;neutral&quot;)\n    VoiceSelectionParams voice =\n            VoiceSelectionParams.newBuilder()\n                    .setLanguageCode(&quot;en-US&quot;)\n                    .setSsmlGender(SsmlVoiceGender.NEUTRAL)\n                    .build();\n\n    // Select the type of audio file you want returned\n    AudioConfig audioConfig =\n            AudioConfig.newBuilder().setAudioEncoding(AudioEncoding.MP3).build();\n\n    // Perform the text-to-speech request on the text input with the selected voice parameters and\n    // audio file type\n    SynthesizeSpeechResponse response =\n            textToSpeechClient.synthesizeSpeech(input, voice, audioConfig);\n\n    // Get the audio contents from the response\n    ByteString audioContents = response.getAudioContent();\n\n\n    // HERE, I DO NOT WANT TO CONVERT TO MP3. I just want the audio played out.....\n    try (OutputStream out = new FileOutputStream(&quot;output.mp3&quot;)) {\n        out.write(audioContents.toByteArray());\n\n        System.out.println(&quot;Audio content written to file \\&quot;output.mp3\\&quot;&quot;);\n    }\n\n}\n</code></pre>\n<p>}</p>\n"},{"tags":["java","json","jackson","deserialization"],"answers":[{"tags":[],"owner":{"account_id":21287,"reputation":37465,"user_id":51591,"accept_rate":82,"display_name":"Micha Ziober"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1563316582,"creation_date":1563316582,"answer_id":57066310,"question_id":57064917,"body_markdown":"You can use [JsonAnySetter][1] annotation for all properties `personXYZ`. See below example:\r\n\r\n    import com.fasterxml.jackson.annotation.JsonAnySetter;\r\n    import com.fasterxml.jackson.databind.DeserializationFeature;\r\n    import com.fasterxml.jackson.databind.ObjectMapper;\r\n    \r\n    import java.io.File;\r\n    import java.util.ArrayList;\r\n    import java.util.List;\r\n    \r\n    public class JsonApp {\r\n    \r\n    \tpublic static void main(String[] args) throws Exception {\r\n    \t\tFile jsonFile = new File(&quot;./resource/test.json&quot;).getAbsoluteFile();\r\n    \r\n    \t\tObjectMapper mapper = new ObjectMapper();\r\n    \t\tmapper.enable(DeserializationFeature.UNWRAP_ROOT_VALUE);\r\n    \r\n    \t\tSystem.out.println(mapper.readValue(jsonFile, People.class).getPersons());\r\n    \t}\r\n    }\r\n    \r\n    class People {\r\n    \r\n    \tprivate List&lt;Details&gt; persons = new ArrayList&lt;&gt;();\r\n    \r\n    \t@JsonAnySetter\r\n    \tpublic void setPerson(String name, Details person) {\r\n    \t\tthis.persons.add(person);\r\n    \t}\r\n    \r\n    \tpublic List&lt;Details&gt; getPersons() {\r\n    \t\treturn persons;\r\n    \t}\r\n    \r\n    \tpublic static class Details {\r\n    \t\tString name;\r\n    \t\tString address;\r\n    \t\tString email;\r\n    \r\n    \t\t// getters, setters, toString\r\n    \t}\r\n    }\r\n\r\nFor your `JSON` above code prints:\r\n\r\n    [Details{name=&#39;john doe&#39;, address=&#39;123 main st&#39;, email=&#39;john@doe.com&#39;}, Details{name=&#39;bob cat&#39;, address=&#39;234 dog st&#39;, email=&#39;bob@cat.com&#39;}, Details{name=&#39;foo bar&#39;, address=&#39;111  1st ave&#39;, email=&#39;foo@bar.com&#39;}, Details{name=&#39;james bono&#39;, address=&#39;999 alaska st&#39;, email=&#39;james@bono.com&#39;}]\r\n\r\nIn case you use inner class remember to make it `public static` to make it visible to `Jackson` instantiation process.\r\n\r\nSee also:\r\n\r\n - [How to use dynamic property names for a Json object][2]\r\n - [Jackson Annotation Examples][3]\r\n\r\n\r\n  [1]: https://fasterxml.github.io/jackson-annotations/javadoc/2.9/com/fasterxml/jackson/annotation/JsonAnySetter.html\r\n  [2]: https://stackoverflow.com/questions/55684724/how-to-use-dynamic-property-names-for-a-json-object\r\n  [3]: https://www.baeldung.com/jackson-annotations","title":"JSON Jackson deserialization multiple keys into same field","body":"<p>You can use <a href=\"https://fasterxml.github.io/jackson-annotations/javadoc/2.9/com/fasterxml/jackson/annotation/JsonAnySetter.html\" rel=\"noreferrer\">JsonAnySetter</a> annotation for all properties <code>personXYZ</code>. See below example:</p>\n\n<pre><code>import com.fasterxml.jackson.annotation.JsonAnySetter;\nimport com.fasterxml.jackson.databind.DeserializationFeature;\nimport com.fasterxml.jackson.databind.ObjectMapper;\n\nimport java.io.File;\nimport java.util.ArrayList;\nimport java.util.List;\n\npublic class JsonApp {\n\n    public static void main(String[] args) throws Exception {\n        File jsonFile = new File(\"./resource/test.json\").getAbsoluteFile();\n\n        ObjectMapper mapper = new ObjectMapper();\n        mapper.enable(DeserializationFeature.UNWRAP_ROOT_VALUE);\n\n        System.out.println(mapper.readValue(jsonFile, People.class).getPersons());\n    }\n}\n\nclass People {\n\n    private List&lt;Details&gt; persons = new ArrayList&lt;&gt;();\n\n    @JsonAnySetter\n    public void setPerson(String name, Details person) {\n        this.persons.add(person);\n    }\n\n    public List&lt;Details&gt; getPersons() {\n        return persons;\n    }\n\n    public static class Details {\n        String name;\n        String address;\n        String email;\n\n        // getters, setters, toString\n    }\n}\n</code></pre>\n\n<p>For your <code>JSON</code> above code prints:</p>\n\n<pre><code>[Details{name='john doe', address='123 main st', email='john@doe.com'}, Details{name='bob cat', address='234 dog st', email='bob@cat.com'}, Details{name='foo bar', address='111  1st ave', email='foo@bar.com'}, Details{name='james bono', address='999 alaska st', email='james@bono.com'}]\n</code></pre>\n\n<p>In case you use inner class remember to make it <code>public static</code> to make it visible to <code>Jackson</code> instantiation process.</p>\n\n<p>See also:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/55684724/how-to-use-dynamic-property-names-for-a-json-object\">How to use dynamic property names for a Json object</a></li>\n<li><a href=\"https://www.baeldung.com/jackson-annotations\" rel=\"noreferrer\">Jackson Annotation Examples</a></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":1931246,"reputation":1297,"user_id":1740593,"accept_rate":95,"display_name":"Vargan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649771039,"creation_date":1649771039,"answer_id":71843833,"question_id":57064917,"body_markdown":"Just adding my two cents. I think this way looks nicer and is also easy to retrieve data. Jackson will do the deserialization without the need of any other tags or custom code, and it&#39;s all nice and sorted in a hashmap.\r\n```\r\nclass People {\r\n\r\n    private Map&lt;String, Person&gt; persons = new HashMap&lt;&gt;();\r\n\r\n    // getter and setters\r\n}\r\n```\r\n    public class Person {\r\n        String name;\r\n        String address;\r\n        String email;\r\n\r\n        // getters and setters\r\n    }\r\n}\r\n\r\n```","title":"JSON Jackson deserialization multiple keys into same field","body":"<p>Just adding my two cents. I think this way looks nicer and is also easy to retrieve data. Jackson will do the deserialization without the need of any other tags or custom code, and it's all nice and sorted in a hashmap.</p>\n<pre><code>class People {\n\n    private Map&lt;String, Person&gt; persons = new HashMap&lt;&gt;();\n\n    // getter and setters\n}\n</code></pre>\n<pre><code>public class Person {\n    String name;\n    String address;\n    String email;\n\n    // getters and setters\n}\n</code></pre>\n<p>}</p>\n<pre><code></code></pre>\n"}],"owner":{"account_id":6240055,"reputation":85,"user_id":4853974,"display_name":"dd483pe"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3739,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":57066310,"answer_count":2,"score":4,"last_activity_date":1649771039,"creation_date":1563308609,"question_id":57064917,"body_markdown":"I am trying to convert JSON into POJO. \r\nI have worked with Jackson to convert standard JSON file.\r\nIn this particular case, I would like to overwrite the key value to &quot;default&quot; class/variable. In this case, there are multiple key value to be replaced (ie. hundreds, and the key values to be replaced are unknown).\r\n\r\nIs this possible? I thought of storing it into Map, then iterate and store each into POJO, but wondering if there is different option, since I am not that familiar with storing JSON to Map.\r\n\r\nExample of the JSON to be processed:\r\n\r\n```\r\n&quot;People&quot; : {\r\n    &quot;person1&quot; : { \r\n      &quot;name&quot; : &quot;john doe&quot;,\r\n      &quot;address&quot; : &quot;123 main st&quot;,\r\n      &quot;email&quot; : &quot;john@doe.com&quot;\r\n    },\r\n    &quot;person2&quot; : { \r\n      &quot;name&quot; : &quot;bob cat&quot;,\r\n      &quot;address&quot; : &quot;234 dog st&quot;,\r\n      &quot;email&quot; : &quot;bob@cat.com&quot;\r\n    },\r\n    &quot;person3&quot; : { \r\n      &quot;name&quot; : &quot;foo bar&quot;,\r\n      &quot;address&quot; : &quot;111  1st ave&quot;,\r\n      &quot;email&quot; : &quot;foo@bar.com&quot;\r\n    },\r\n    &quot;person8&quot; : { \r\n      &quot;name&quot; : &quot;james bono&quot;,\r\n      &quot;address&quot; : &quot;999 alaska st&quot;,\r\n      &quot;email&quot; : &quot;james@bono.com&quot;\r\n    }\r\n}\r\n```\r\n\r\n\r\nIs it possible to generate the class in the following structure? The main issue is there are hundreds of value to be replaced and assuming they are unknown, I can&#39;t use this approach.\r\n\r\n```\r\n@JsonIgnoreProperties(ignoreUnknown = true)\r\npublic class People { \r\n\r\n  @JsonAlias({&quot;person1&quot;, &quot;person2&quot;})\r\n  private List&lt;Details&gt; person; // --&gt; this should be the default replacing person1, person2, and so on \r\n\r\n  private class Details { \r\n    String name;\r\n    String address;\r\n    String email;\r\n  }\r\n}\r\n```","title":"JSON Jackson deserialization multiple keys into same field","body":"<p>I am trying to convert JSON into POJO. \nI have worked with Jackson to convert standard JSON file.\nIn this particular case, I would like to overwrite the key value to \"default\" class/variable. In this case, there are multiple key value to be replaced (ie. hundreds, and the key values to be replaced are unknown).</p>\n\n<p>Is this possible? I thought of storing it into Map, then iterate and store each into POJO, but wondering if there is different option, since I am not that familiar with storing JSON to Map.</p>\n\n<p>Example of the JSON to be processed:</p>\n\n<pre><code>\"People\" : {\n    \"person1\" : { \n      \"name\" : \"john doe\",\n      \"address\" : \"123 main st\",\n      \"email\" : \"john@doe.com\"\n    },\n    \"person2\" : { \n      \"name\" : \"bob cat\",\n      \"address\" : \"234 dog st\",\n      \"email\" : \"bob@cat.com\"\n    },\n    \"person3\" : { \n      \"name\" : \"foo bar\",\n      \"address\" : \"111  1st ave\",\n      \"email\" : \"foo@bar.com\"\n    },\n    \"person8\" : { \n      \"name\" : \"james bono\",\n      \"address\" : \"999 alaska st\",\n      \"email\" : \"james@bono.com\"\n    }\n}\n</code></pre>\n\n<p>Is it possible to generate the class in the following structure? The main issue is there are hundreds of value to be replaced and assuming they are unknown, I can't use this approach.</p>\n\n<pre><code>@JsonIgnoreProperties(ignoreUnknown = true)\npublic class People { \n\n  @JsonAlias({\"person1\", \"person2\"})\n  private List&lt;Details&gt; person; // --&gt; this should be the default replacing person1, person2, and so on \n\n  private class Details { \n    String name;\n    String address;\n    String email;\n  }\n}\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":14695242,"reputation":552,"user_id":10612806,"display_name":"Evgeni Enchev"},"score":0,"creation_date":1649769804,"post_id":71843491,"comment_id":126956103,"body_markdown":"IMO set enabled to publisher and always call `eventPublisher.publishSomething();` Less confuse","body":"IMO set enabled to publisher and always call <code>eventPublisher.publishSomething();</code> Less confuse"},{"owner":{"account_id":682692,"reputation":49061,"user_id":535275,"accept_rate":91,"display_name":"Scott Hunter"},"score":1,"creation_date":1649769844,"post_id":71843491,"comment_id":126956120,"body_markdown":"Are you having any issues with the current implementation?","body":"Are you having any issues with the current implementation?"},{"owner":{"account_id":4279913,"reputation":3623,"user_id":3499626,"accept_rate":89,"display_name":"jhamon"},"score":0,"creation_date":1649769912,"post_id":71843491,"comment_id":126956153,"body_markdown":"get the `decider` out of the constructor and just pass a boolean instead","body":"get the <code>decider</code> out of the constructor and just pass a boolean instead"},{"owner":{"account_id":7450,"reputation":269210,"user_id":12960,"display_name":"Brian Agnew"},"score":2,"creation_date":1649770323,"post_id":71843491,"comment_id":126956324,"body_markdown":"Can you either create a real publisher or a dummy/null publisher that does nothing, and decide which one to inject at construction time ?","body":"Can you either create a real publisher or a dummy/null publisher that does nothing, and decide which one to inject at construction time ?"},{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1649770366,"post_id":71843491,"comment_id":126956337,"body_markdown":"Are the methods supposed to do anything when enabled is false? If not, why do you need an instance of this class? If it were null, then it&#39;s not &quot;enabled&quot;, and you don&#39;t need to toggle its enabled state. However, it probably shouldn&#39;t be a singleton if doing that. At that point, this class is pointless as you could just use the instance of the publisher directly","body":"Are the methods supposed to do anything when enabled is false? If not, why do you need an instance of this class? If it were null, then it&#39;s not &quot;enabled&quot;, and you don&#39;t need to toggle its enabled state. However, it probably shouldn&#39;t be a singleton if doing that. At that point, this class is pointless as you could just use the instance of the publisher directly"}],"answers":[{"tags":[],"owner":{"account_id":5331956,"reputation":6999,"user_id":4252320,"accept_rate":59,"display_name":"ergonaut"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1649770347,"creation_date":1649770347,"answer_id":71843645,"question_id":71843491,"body_markdown":"You&#39;re locking the evaluation of the condition to the constructor.  If you want any flexibility, you should pull it out.\r\n\r\n    public class SomeClass implements SomeInterface {\r\n    boolean isEnabled;\r\n\r\n    public SomeClass(EventPublisher, eventPublisher) {\r\n         //\r\n    }\r\n\r\n    public void addDecide(boolean value){\r\n        isEnabled = value;\r\n    }\r\n\r\n    boolean getEnabled(){\r\n        return isEnabled;\r\n    }\r\n\r\n    @Override\r\n    public void method3() {\r\n        if(getEnabled()){\r\n            eventPublisher.publishSomething3();\r\n        }\r\n    }\r\n    }\r\n\r\nYou can even go crazy and add a supplier:\r\n\r\n    public void addDecide(Supplier&lt;Boolean&gt; supplier){\r\n        supplier = supplier;\r\n    }\r\n\r\n    boolean getEnabled(){\r\n        return supplier.get();\r\n    }","title":"How to extract the common condition check in a class","body":"<p>You're locking the evaluation of the condition to the constructor.  If you want any flexibility, you should pull it out.</p>\n<pre><code>public class SomeClass implements SomeInterface {\nboolean isEnabled;\n\npublic SomeClass(EventPublisher, eventPublisher) {\n     //\n}\n\npublic void addDecide(boolean value){\n    isEnabled = value;\n}\n\nboolean getEnabled(){\n    return isEnabled;\n}\n\n@Override\npublic void method3() {\n    if(getEnabled()){\n        eventPublisher.publishSomething3();\n    }\n}\n}\n</code></pre>\n<p>You can even go crazy and add a supplier:</p>\n<pre><code>public void addDecide(Supplier&lt;Boolean&gt; supplier){\n    supplier = supplier;\n}\n\nboolean getEnabled(){\n    return supplier.get();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":20678789,"reputation":572,"user_id":15182834,"display_name":"I&#39;m Weverton"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649770793,"creation_date":1649770588,"answer_id":71843703,"question_id":71843491,"body_markdown":"A Runnable interface can receive a lambda without args and run a lambda function with run() method. So, you can create a method inside your Decider class and receive a Runnable as a parameter, like:\r\n\r\n    class Decider{\r\n        private boolean enabled;\r\n        //...\r\n\r\n        public void execute(Runnable runnable){\r\n            if(enabled) runnable.run();\r\n        }\r\n    }\r\n\r\nAnd receive your Decider and do:\r\n\r\n    //...\r\n    EventPublisher eventPubilsher;\r\n    Decider decider;\r\n\r\n    @Inject\r\n    public SomeClass(final Decider decider, EventPublisher, eventPublisher) {\r\n        this.decider = decider;\r\n        this.eventPublisher = eventPublisher;\r\n    }\r\n    @Override\r\n    public void method1() {\r\n        Decider.execute(() -&gt; eventPublisher.publishSomething1());\r\n    }\r\n\r\n    //...\r\n\r\n","title":"How to extract the common condition check in a class","body":"<p>A Runnable interface can receive a lambda without args and run a lambda function with run() method. So, you can create a method inside your Decider class and receive a Runnable as a parameter, like:</p>\n<pre><code>class Decider{\n    private boolean enabled;\n    //...\n\n    public void execute(Runnable runnable){\n        if(enabled) runnable.run();\n    }\n}\n</code></pre>\n<p>And receive your Decider and do:</p>\n<pre><code>//...\nEventPublisher eventPubilsher;\nDecider decider;\n\n@Inject\npublic SomeClass(final Decider decider, EventPublisher, eventPublisher) {\n    this.decider = decider;\n    this.eventPublisher = eventPublisher;\n}\n@Override\npublic void method1() {\n    Decider.execute(() -&gt; eventPublisher.publishSomething1());\n}\n\n//...\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1658807,"reputation":31819,"user_id":1527544,"accept_rate":54,"display_name":"Antoniossss"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649770677,"creation_date":1649770677,"answer_id":71843732,"question_id":71843491,"body_markdown":"This should work \r\n\r\n\r\n    @Singleton\r\n    public class SomeClass implements SomeInterface {\r\n    \r\n        EventPublisher eventPubilsher;\r\n        boolean isEnabled;\r\n    \r\n        @Inject\r\n        public SomeClass(final Decider decider, EventPublisher, eventPublisher) {\r\n            this.isEnabled = decider.isSomethingEnabled();\r\n            this.eventPublisher = eventPublisher;\r\n        }\r\n    \r\n        @Override\r\n        public void method1() {\r\n            publish(ep-&gt;ep.publishSomething1());\r\n        }\r\n    \r\n        @Override\r\n        public void method2() {\r\n            publish(ep-&gt;ep.publishSomething2());\r\n        }\r\n    \r\n        @Override\r\n        public void method3() {\r\n            publish(ep-&gt;ep.publishSomething3());\r\n        }\r\n    \r\n        private void publish(Consumer&lt;EventPublisher&gt; callback){\r\n          if(isEnabled) callback.accept(eventPublished);\r\n        }\r\n    }","title":"How to extract the common condition check in a class","body":"<p>This should work</p>\n<pre><code>@Singleton\npublic class SomeClass implements SomeInterface {\n\n    EventPublisher eventPubilsher;\n    boolean isEnabled;\n\n    @Inject\n    public SomeClass(final Decider decider, EventPublisher, eventPublisher) {\n        this.isEnabled = decider.isSomethingEnabled();\n        this.eventPublisher = eventPublisher;\n    }\n\n    @Override\n    public void method1() {\n        publish(ep-&gt;ep.publishSomething1());\n    }\n\n    @Override\n    public void method2() {\n        publish(ep-&gt;ep.publishSomething2());\n    }\n\n    @Override\n    public void method3() {\n        publish(ep-&gt;ep.publishSomething3());\n    }\n\n    private void publish(Consumer&lt;EventPublisher&gt; callback){\n      if(isEnabled) callback.accept(eventPublished);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23783500,"reputation":5175,"user_id":17795888,"display_name":"Chaosfire"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1649770917,"creation_date":1649770917,"answer_id":71843802,"question_id":71843491,"body_markdown":"You can have implementation for enabled stuff, and one for disabled stuff. The disabled implementation won&#39;t do anything:\r\n```\r\npublic class DisabledSomeClass implements SomeInterface {\r\n\r\n  @Override\r\n  public void method1() {\r\n  }\r\n\r\n  @Override\r\n  public void method2() {\r\n  }\r\n\r\n  @Override\r\n  public void method3() {\r\n  }\r\n}\r\n```\r\nEnabled one will publish stuff:\r\n```\r\npublic class EnabledSomeClass implements SomeInterface {\r\n\r\n  EventPublisher eventPublisher;\r\n\r\n  public EnabledSomeClass(EventPublisher eventPublisher) {\r\n    this.eventPublisher = eventPublisher;\r\n  }\r\n\r\n  @Override\r\n  public void method1() {\r\n    eventPublisher.publishSomething1();\r\n  }\r\n\r\n  @Override\r\n  public void method2() {\r\n    eventPublisher.publishSomething2();\r\n  }\r\n\r\n  @Override\r\n  public void method3() {\r\n    eventPublisher.publishSomething3();\r\n  }\r\n}\r\n```\r\nThen extract the logic, if functionality is enabled in new factory class - `SomeInterfaceFactory `(probably not the best name, but you get the idea), it will return the correct implementation, depending on whether something is enabled.\r\n```\r\npublic class SomeInterfaceFactory {\r\n\r\n  public static SomeInterface getInstance(Decider decider, EventPublisher eventPublisher) {\r\n    if (decider.isSomethingEnabled()) {\r\n      return new EnabledSomeClass(eventPublisher);\r\n    } else {\r\n      return new DisabledSomeClass();\r\n    }\r\n  }\r\n}\r\n```","title":"How to extract the common condition check in a class","body":"<p>You can have implementation for enabled stuff, and one for disabled stuff. The disabled implementation won't do anything:</p>\n<pre><code>public class DisabledSomeClass implements SomeInterface {\n\n  @Override\n  public void method1() {\n  }\n\n  @Override\n  public void method2() {\n  }\n\n  @Override\n  public void method3() {\n  }\n}\n</code></pre>\n<p>Enabled one will publish stuff:</p>\n<pre><code>public class EnabledSomeClass implements SomeInterface {\n\n  EventPublisher eventPublisher;\n\n  public EnabledSomeClass(EventPublisher eventPublisher) {\n    this.eventPublisher = eventPublisher;\n  }\n\n  @Override\n  public void method1() {\n    eventPublisher.publishSomething1();\n  }\n\n  @Override\n  public void method2() {\n    eventPublisher.publishSomething2();\n  }\n\n  @Override\n  public void method3() {\n    eventPublisher.publishSomething3();\n  }\n}\n</code></pre>\n<p>Then extract the logic, if functionality is enabled in new factory class - <code>SomeInterfaceFactory </code>(probably not the best name, but you get the idea), it will return the correct implementation, depending on whether something is enabled.</p>\n<pre><code>public class SomeInterfaceFactory {\n\n  public static SomeInterface getInstance(Decider decider, EventPublisher eventPublisher) {\n    if (decider.isSomethingEnabled()) {\n      return new EnabledSomeClass(eventPublisher);\n    } else {\n      return new DisabledSomeClass();\n    }\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":4504119,"reputation":1834,"user_id":3706638,"accept_rate":100,"display_name":"S.Dan"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":66,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":4,"score":1,"last_activity_date":1649770917,"creation_date":1649769642,"question_id":71843491,"body_markdown":"If I have a class, where all methods should evaluate only if a boolean attribute is `true`, what is the best way to define it in terms of best practices? \r\n\r\nIs there a way to replace the recurring `isEnabled` check in all the methods by a single check? The current form works, I&#39;m looking for a way to improve it to not have `isEnabled` checked in all the methods.\r\n\r\n```\r\n@Singleton\r\npublic class SomeClass implements SomeInterface {\r\n\r\n    EventPublisher eventPubilsher;\r\n    boolean isEnabled;\r\n\r\n    @Inject\r\n    public SomeClass(final Decider decider, EventPublisher, eventPublisher) {\r\n        this.isEnabled = decider.isSomethingEnabled();\r\n        this.eventPublisher = eventPublisher;\r\n    }\r\n\r\n    @Override\r\n    public void method1() {\r\n        if(isEnabled){\r\n            eventPublisher.publishSomething1();\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void method2() {\r\n        if(isEnabled){\r\n            eventPublisher.publishSomething2();\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void method3() {\r\n        if(isEnabled){\r\n            eventPublisher.publishSomething3();\r\n        }\r\n    }\r\n}\r\n\r\n```","title":"How to extract the common condition check in a class","body":"<p>If I have a class, where all methods should evaluate only if a boolean attribute is <code>true</code>, what is the best way to define it in terms of best practices?</p>\n<p>Is there a way to replace the recurring <code>isEnabled</code> check in all the methods by a single check? The current form works, I'm looking for a way to improve it to not have <code>isEnabled</code> checked in all the methods.</p>\n<pre><code>@Singleton\npublic class SomeClass implements SomeInterface {\n\n    EventPublisher eventPubilsher;\n    boolean isEnabled;\n\n    @Inject\n    public SomeClass(final Decider decider, EventPublisher, eventPublisher) {\n        this.isEnabled = decider.isSomethingEnabled();\n        this.eventPublisher = eventPublisher;\n    }\n\n    @Override\n    public void method1() {\n        if(isEnabled){\n            eventPublisher.publishSomething1();\n        }\n    }\n\n    @Override\n    public void method2() {\n        if(isEnabled){\n            eventPublisher.publishSomething2();\n        }\n    }\n\n    @Override\n    public void method3() {\n        if(isEnabled){\n            eventPublisher.publishSomething3();\n        }\n    }\n}\n\n</code></pre>\n"},{"tags":["java","tomcat","netbeans"],"comments":[{"owner":{"account_id":3576533,"reputation":16716,"user_id":2985643,"accept_rate":40,"display_name":"skomisa"},"score":0,"creation_date":1649784807,"post_id":71843745,"comment_id":126962302,"body_markdown":"What kind of web project do you have if it is not Ant? Maven? Gradle? Was it even created under an earlier release of NetBeans? Also, I just tried what you are doing on NB13, and yes, it does seem to be mandatory to provide an existing target server for your application.","body":"What kind of web project do you have if it is not Ant? Maven? Gradle? Was it even created under an earlier release of NetBeans? Also, I just tried what you are doing on NB13, and yes, it does seem to be mandatory to provide an existing target server for your application."},{"owner":{"account_id":3576533,"reputation":16716,"user_id":2985643,"accept_rate":40,"display_name":"skomisa"},"score":0,"creation_date":1649785511,"post_id":71843745,"comment_id":126962507,"body_markdown":"Perhaps the reason it forces you to specify a server is that it may customize the build according to the target server, but of course that in itself shouldn&#39;t require that the server actually exists. How about trying the **File &gt; Import Project...** approach instead? That&#39;s more accurately reflects what you are actually doing anyway, right?","body":"Perhaps the reason it forces you to specify a server is that it may customize the build according to the target server, but of course that in itself shouldn&#39;t require that the server actually exists. How about trying the <b>File &gt; Import Project...</b> approach instead? That&#39;s more accurately reflects what you are actually doing anyway, right?"},{"owner":{"account_id":75990,"reputation":13337,"user_id":217823,"accept_rate":52,"display_name":"JustAMartin"},"score":0,"creation_date":1649844811,"post_id":71843745,"comment_id":126976989,"body_markdown":"@skomisa The only build file I have in the repository is nbbuild.xml, but it seems to be mostly empty, as generated by Netbeans by default and never modified. But I downloaded and extracted Tomcat and pointed Netbeans to the Tomcat folder, and it seemed to work fine, I was able to build war even though Tomcat itself was not being used at all. Import project offers only Eclipse and ZIP, which are not applicable to this project - no Eclipse related files.","body":"@skomisa The only build file I have in the repository is nbbuild.xml, but it seems to be mostly empty, as generated by Netbeans by default and never modified. But I downloaded and extracted Tomcat and pointed Netbeans to the Tomcat folder, and it seemed to work fine, I was able to build war even though Tomcat itself was not being used at all. Import project offers only Eclipse and ZIP, which are not applicable to this project - no Eclipse related files."}],"owner":{"account_id":75990,"reputation":13337,"user_id":217823,"accept_rate":52,"display_name":"JustAMartin"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":251,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1649770720,"creation_date":1649770720,"question_id":71843745,"body_markdown":"**How do I build a WAR file from existing Java web project sources without a local Tomcat installation in Netbeans 13?**\r\n\r\nI have received an old Java Web project for Tomcat and I need to do a small code change and build a WAR file. The instructions in the project readme file are straightforward:\r\n\r\n- File-&gt;New Project\r\n- Java Web-&gt;Web application with Existing Sources\r\n- Choose the source folder &amp; Next, Next, Finish\r\n\r\nHowever, the instructions seem to be coming from older Netbeans (version 8).\r\nI have Netbeans 13.\r\n\r\nAt first, I got stuck because there is no &quot;Java Web&quot; at the Categories root. There is only Java with Ant (my project doesn&#39;t even have ant build files), and it has Java Web-&gt;Web application with Existing Sources under it. I filled in all the paths, so far so good.\r\n\r\nBut then I got stuck at this window where it asks for server settings. I don&#39;t want Netbeans to connect to any server immediately, I just need to build a WAR, and then I&#39;ll deploy it to remote Tomcat manually. From older Oracle documentation, this step should be optional but I cannot skip it. Is it really mandatory?\r\n\r\n[![Netbeans server settings][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/QQhD2.png","title":"How to build a web project with existing sources without Tomcat in Netbeans?","body":"<p><strong>How do I build a WAR file from existing Java web project sources without a local Tomcat installation in Netbeans 13?</strong></p>\n<p>I have received an old Java Web project for Tomcat and I need to do a small code change and build a WAR file. The instructions in the project readme file are straightforward:</p>\n<ul>\n<li>File-&gt;New Project</li>\n<li>Java Web-&gt;Web application with Existing Sources</li>\n<li>Choose the source folder &amp; Next, Next, Finish</li>\n</ul>\n<p>However, the instructions seem to be coming from older Netbeans (version 8).\nI have Netbeans 13.</p>\n<p>At first, I got stuck because there is no &quot;Java Web&quot; at the Categories root. There is only Java with Ant (my project doesn't even have ant build files), and it has Java Web-&gt;Web application with Existing Sources under it. I filled in all the paths, so far so good.</p>\n<p>But then I got stuck at this window where it asks for server settings. I don't want Netbeans to connect to any server immediately, I just need to build a WAR, and then I'll deploy it to remote Tomcat manually. From older Oracle documentation, this step should be optional but I cannot skip it. Is it really mandatory?</p>\n<p><a href=\"https://i.stack.imgur.com/QQhD2.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/QQhD2.png\" alt=\"Netbeans server settings\" /></a></p>\n"},{"tags":["java","spring-boot","outlook","microsoft-graph-api","microsoft-teams"],"comments":[{"owner":{"account_id":22099608,"reputation":670,"user_id":16356277,"display_name":"Meghana-MSFT"},"score":0,"creation_date":1649774591,"post_id":71841071,"comment_id":126958242,"body_markdown":"Your question does not seem related to Teams app development. Could you please elaborate a little on your query?","body":"Your question does not seem related to Teams app development. Could you please elaborate a little on your query?"}],"answers":[{"tags":[],"owner":{"account_id":10814530,"reputation":4195,"user_id":7954021,"display_name":"Renis1235"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649759993,"creation_date":1649759993,"answer_id":71841212,"question_id":71841071,"body_markdown":"That would basically be sending invitations, right?\r\n\r\nThen you have to take a look at the Microsoft Graph API. It is used for all kinds of purposes and one part is dedicated to [Teams][1].\r\n\r\nOne example that I found by quickly googling is [Creating an Online Meeting][2].\r\n\r\n\r\n  [1]: https://learn.microsoft.com/en-us/graph/teams-concept-overview\r\n  [2]: https://learn.microsoft.com/en-us/graph/api/application-post-onlinemeetings?view=graph-rest-1.0&amp;tabs=http","title":"Send Automatically teams meeting calendar spring","body":"<p>That would basically be sending invitations, right?</p>\n<p>Then you have to take a look at the Microsoft Graph API. It is used for all kinds of purposes and one part is dedicated to <a href=\"https://learn.microsoft.com/en-us/graph/teams-concept-overview\" rel=\"nofollow noreferrer\">Teams</a>.</p>\n<p>One example that I found by quickly googling is <a href=\"https://learn.microsoft.com/en-us/graph/api/application-post-onlinemeetings?view=graph-rest-1.0&amp;tabs=http\" rel=\"nofollow noreferrer\">Creating an Online Meeting</a>.</p>\n"}],"owner":{"account_id":20460593,"reputation":11,"user_id":15013316,"display_name":"frsv9"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":762,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1649769716,"creation_date":1649759392,"question_id":71841071,"body_markdown":"I&#39;ve seen that is possible to send automatically Outlook mails with SpringBoot and the specific component. It&#39;s possible to send Outlook or other types mails with a Teams meeting inside?\r\n\r\nFor example the sent mail will have, on above, the following text:\r\n[enter image description here][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/zlxWz.jpg\r\n\r\nAnyone has a solution?\r\n\r\n","title":"Send Automatically teams meeting calendar spring","body":"<p>I've seen that is possible to send automatically Outlook mails with SpringBoot and the specific component. It's possible to send Outlook or other types mails with a Teams meeting inside?</p>\n<p>For example the sent mail will have, on above, the following text:\n<a href=\"https://i.stack.imgur.com/zlxWz.jpg\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>Anyone has a solution?</p>\n"},{"tags":["java","spring-boot","csv","deserialization","jackson-dataformat-csv"],"answers":[{"tags":[],"owner":{"account_id":1334069,"reputation":4343,"user_id":1277259,"accept_rate":75,"display_name":"KevinO"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649768950,"creation_date":1649707744,"answer_id":71833734,"question_id":71821629,"body_markdown":"I believe the issue is that you need to specify a specific Schema.\r\n\r\nFor the Student class defined thusly:\r\n```\r\n@JsonIgnoreProperties(ignoreUnknown = true)\r\npublic static class Student\r\n{\r\n    @JsonProperty(&quot;STUDENT_NAME&quot;)\r\n    private String name;\r\n        \r\n    @JsonProperty(&quot;DOB&quot;)\r\n    private String dateOfBirth;\r\n        \r\n    @JsonProperty(&quot;ID&quot;)\r\n    private String id;\r\n\r\n    ...\r\n}\r\n```\r\n\r\nThis approach appears to work (tested using a String input, but obviously can change to read a file):\r\n```\r\npublic static List&lt;Student&gt; parse(String inp) throws IOException\r\n{\r\n    CsvSchema schema = CsvSchema.builder()\r\n            .addColumn(&quot;STUDENT_NAME&quot;)\r\n            .addColumn(&quot;ID&quot;)\r\n            .addColumn(&quot;DOB&quot;)\r\n            .setReorderColumns(true)\r\n            .setUseHeader(true)\r\n            .build();\r\n\r\n            CsvMapper mapper = new CsvMapper();\r\n            MappingIterator&lt;Student&gt; iter = mapper\r\n                    .readerFor(Student.class)\r\n                    .with(schema)\r\n                    .readValues(inp);\r\n                \r\n            List&lt;Student&gt; students = new ArrayList&lt;&gt;();\r\n            while (iter.hasNext()) {\r\n                students.add(iter.next());\r\n            }\r\n                \r\n            return students;\r\n}\r\n```\r\n\r\nTested via:\r\n```\r\nfinal String example = &quot;STUDENT_NAME,ID,STANDARD,DOB\\n&quot;\r\n        + &quot;John,1,4,01/02/2000\\n&quot;\r\n        + &quot;Doe,2,5,02/01/1999&quot;;\r\n\r\n\r\n@org.junit.Test\r\npublic void testViaInp() throws IOException\r\n{\r\n    List&lt;Student&gt; students = ParseCsvWithJackson.parse(example);\r\n    Assert.assertNotNull(&quot;null students&quot;, students);\r\n    Assert.assertEquals(&quot;Wrong # of students&quot;, 2, students.size());\r\n        \r\n    Student first = students.get(0);\r\n    Assert.assertEquals(&quot;Wrong name&quot;, &quot;John&quot;, first.getName());\r\n    Assert.assertEquals(&quot;Wrong id&quot;, &quot;1&quot;, first.getId());\r\n        \r\n    System.out.println(first);\r\n}\r\n```\r\n\r\nUpdate: I added a test to use a csv file, and it passed the same tests with the one caveat that I needed to set skip empty lines as a blank line at the end of the file was creating an entry with null values.\r\n\r\n```\r\n    private static CsvSchema getSchema()\r\n    {\r\n        return CsvSchema.builder().addColumn(&quot;STUDENT_NAME&quot;).addColumn(&quot;ID&quot;)\r\n                .addColumn(&quot;DOB&quot;).setReorderColumns(true).setUseHeader(true)\r\n                .build();\r\n\r\n    }\r\n\r\n    private static CsvMapper getMapper()\r\n    {\r\n        CsvMapper mapper = new CsvMapper();\r\n        \r\n        mapper.enable(CsvParser.Feature.SKIP_EMPTY_LINES);\r\n        \r\n        return mapper;\r\n    }\r\n\r\n\r\n\r\n    public static List&lt;Student&gt; parse(Path csvfile) throws IOException\r\n    {\r\n        CsvSchema schema = getSchema();\r\n        \r\n        CsvMapper mapper = getMapper();\r\n        MappingIterator&lt;Student&gt; iter = mapper.readerFor(Student.class)\r\n                .with(schema).readValues(csvfile.toFile());\r\n\r\n        List&lt;Student&gt; students = new ArrayList&lt;&gt;();\r\n        while (iter.hasNext()) {\r\n            students.add(iter.next());\r\n        }\r\n\r\n        return students;\r\n    }\r\n```","title":"Parse CSV with extra columns which are not defined in POJO using Jackson","body":"<p>I believe the issue is that you need to specify a specific Schema.</p>\n<p>For the Student class defined thusly:</p>\n<pre><code>@JsonIgnoreProperties(ignoreUnknown = true)\npublic static class Student\n{\n    @JsonProperty(&quot;STUDENT_NAME&quot;)\n    private String name;\n        \n    @JsonProperty(&quot;DOB&quot;)\n    private String dateOfBirth;\n        \n    @JsonProperty(&quot;ID&quot;)\n    private String id;\n\n    ...\n}\n</code></pre>\n<p>This approach appears to work (tested using a String input, but obviously can change to read a file):</p>\n<pre><code>public static List&lt;Student&gt; parse(String inp) throws IOException\n{\n    CsvSchema schema = CsvSchema.builder()\n            .addColumn(&quot;STUDENT_NAME&quot;)\n            .addColumn(&quot;ID&quot;)\n            .addColumn(&quot;DOB&quot;)\n            .setReorderColumns(true)\n            .setUseHeader(true)\n            .build();\n\n            CsvMapper mapper = new CsvMapper();\n            MappingIterator&lt;Student&gt; iter = mapper\n                    .readerFor(Student.class)\n                    .with(schema)\n                    .readValues(inp);\n                \n            List&lt;Student&gt; students = new ArrayList&lt;&gt;();\n            while (iter.hasNext()) {\n                students.add(iter.next());\n            }\n                \n            return students;\n}\n</code></pre>\n<p>Tested via:</p>\n<pre><code>final String example = &quot;STUDENT_NAME,ID,STANDARD,DOB\\n&quot;\n        + &quot;John,1,4,01/02/2000\\n&quot;\n        + &quot;Doe,2,5,02/01/1999&quot;;\n\n\n@org.junit.Test\npublic void testViaInp() throws IOException\n{\n    List&lt;Student&gt; students = ParseCsvWithJackson.parse(example);\n    Assert.assertNotNull(&quot;null students&quot;, students);\n    Assert.assertEquals(&quot;Wrong # of students&quot;, 2, students.size());\n        \n    Student first = students.get(0);\n    Assert.assertEquals(&quot;Wrong name&quot;, &quot;John&quot;, first.getName());\n    Assert.assertEquals(&quot;Wrong id&quot;, &quot;1&quot;, first.getId());\n        \n    System.out.println(first);\n}\n</code></pre>\n<p>Update: I added a test to use a csv file, and it passed the same tests with the one caveat that I needed to set skip empty lines as a blank line at the end of the file was creating an entry with null values.</p>\n<pre><code>    private static CsvSchema getSchema()\n    {\n        return CsvSchema.builder().addColumn(&quot;STUDENT_NAME&quot;).addColumn(&quot;ID&quot;)\n                .addColumn(&quot;DOB&quot;).setReorderColumns(true).setUseHeader(true)\n                .build();\n\n    }\n\n    private static CsvMapper getMapper()\n    {\n        CsvMapper mapper = new CsvMapper();\n        \n        mapper.enable(CsvParser.Feature.SKIP_EMPTY_LINES);\n        \n        return mapper;\n    }\n\n\n\n    public static List&lt;Student&gt; parse(Path csvfile) throws IOException\n    {\n        CsvSchema schema = getSchema();\n        \n        CsvMapper mapper = getMapper();\n        MappingIterator&lt;Student&gt; iter = mapper.readerFor(Student.class)\n                .with(schema).readValues(csvfile.toFile());\n\n        List&lt;Student&gt; students = new ArrayList&lt;&gt;();\n        while (iter.hasNext()) {\n            students.add(iter.next());\n        }\n\n        return students;\n    }\n</code></pre>\n"}],"owner":{"account_id":16815684,"reputation":47,"user_id":12157535,"display_name":"Shubham Goyal"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1530,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1649768950,"creation_date":1649637549,"question_id":71821629,"body_markdown":"I am trying to parse a CSV and serialize it using the Jackson library. I have tried several methods but can&#39;t get to ignore the extra columns in the CSV which are not defined in the POJO. \r\nRequirements: \r\n1. The columns in the incoming CSV can be in any order. \r\n2. There can be some columns which are defined in POJO but not there in CSV (missing columns). \r\n3. There can be some columns in the CSV which are not defined in POJO (extra columns).  \r\n\r\nI have already tried ```@JsonIgnoreProperties(true)``` and also tried to use ```DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES``` but nothing seems to work properly.\r\n\r\nPOJO: \r\n```\r\npublic class student{\r\n   @JsonProperty(&quot;STUDENT_NAME&quot;)\r\n   private String name;\r\n\r\n   @JsonProperty(&quot;DOB&quot;)\r\n   private String dateOfBirth;\r\n\r\n   @JsonProperty(&quot;ID&quot;)\r\n   private String id;\r\n}\r\n```\r\n\r\nCSV:\r\n```\r\nSTUDENT_NAME,ID,STANDARD,DOB\r\nJohn,1,4,01/02/2000\r\nDoe,2,5,02/01/1999\r\n```\r\n\r\n","title":"Parse CSV with extra columns which are not defined in POJO using Jackson","body":"<p>I am trying to parse a CSV and serialize it using the Jackson library. I have tried several methods but can't get to ignore the extra columns in the CSV which are not defined in the POJO.\nRequirements:</p>\n<ol>\n<li>The columns in the incoming CSV can be in any order.</li>\n<li>There can be some columns which are defined in POJO but not there in CSV (missing columns).</li>\n<li>There can be some columns in the CSV which are not defined in POJO (extra columns).</li>\n</ol>\n<p>I have already tried <code>@JsonIgnoreProperties(true)</code> and also tried to use <code>DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES</code> but nothing seems to work properly.</p>\n<p>POJO:</p>\n<pre><code>public class student{\n   @JsonProperty(&quot;STUDENT_NAME&quot;)\n   private String name;\n\n   @JsonProperty(&quot;DOB&quot;)\n   private String dateOfBirth;\n\n   @JsonProperty(&quot;ID&quot;)\n   private String id;\n}\n</code></pre>\n<p>CSV:</p>\n<pre><code>STUDENT_NAME,ID,STANDARD,DOB\nJohn,1,4,01/02/2000\nDoe,2,5,02/01/1999\n</code></pre>\n"},{"tags":["java","eclipse","networking","serversocket"],"comments":[{"owner":{"account_id":37853,"reputation":4899,"user_id":108350,"accept_rate":32,"display_name":"will"},"score":1,"creation_date":1430491379,"post_id":12737293,"comment_id":48097322,"body_markdown":"I have seen this often on development machines when you are running trials of code -- How may the problem be avoided?","body":"I have seen this often on development machines when you are running trials of code -- How may the problem be avoided?"},{"owner":{"account_id":9942973,"reputation":2671,"user_id":7389315,"accept_rate":73,"display_name":"jjoselon"},"score":0,"creation_date":1568075871,"post_id":12737293,"comment_id":102151226,"body_markdown":"http://www.srikanthtechnologies.com/blog/java/changeglassfishport_4.1.aspx","body":"<a href=\"http://www.srikanthtechnologies.com/blog/java/changeglassfishport_4.1.aspx\" rel=\"nofollow noreferrer\">srikanthtechnologies.com/blog/java/changeglassfishport_4.1.a&zwnj;&#8203;spx</a>"}],"answers":[{"tags":[],"owner":{"account_id":1903137,"reputation":160,"user_id":1718559,"display_name":"javarebel"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1349392265,"creation_date":1349392265,"answer_id":12737326,"question_id":12737293,"body_markdown":"You have another process running on the same port. \r\n\r\nYou could try killing one of the java.exe services running in your task manager - ps make sure you dont kill eclipse since that is listed as java.exe as well. If nothing else works, restarting your machine will fix it anyhow. It looks like youre not shutting down a socket from a previous test. Hope this helps.","title":"How do I resolve the &quot;java.net.BindException: Address already in use: JVM_Bind&quot; error?","body":"<p>You have another process running on the same port. </p>\n\n<p>You could try killing one of the java.exe services running in your task manager - ps make sure you dont kill eclipse since that is listed as java.exe as well. If nothing else works, restarting your machine will fix it anyhow. It looks like youre not shutting down a socket from a previous test. Hope this helps.</p>\n"},{"tags":[],"owner":{"account_id":45674,"reputation":11408,"user_id":134758,"display_name":"Diego Pino"},"down_vote_count":1,"up_vote_count":261,"is_accepted":false,"score":260,"last_activity_date":1472043958,"creation_date":1349392852,"answer_id":12737392,"question_id":12737293,"body_markdown":"If you know what port the process is running you can type: \r\n`lsof -i:&lt;port&gt;`. \r\n\r\nFor instance, `lsof -i:8080`, to list the process (pid) running on port 8080. \r\n\r\nThen kill the process with `kill &lt;pid&gt;`","title":"How do I resolve the &quot;java.net.BindException: Address already in use: JVM_Bind&quot; error?","body":"<p>If you know what port the process is running you can type: \n<code>lsof -i:&lt;port&gt;</code>. </p>\n\n<p>For instance, <code>lsof -i:8080</code>, to list the process (pid) running on port 8080. </p>\n\n<p>Then kill the process with <code>kill &lt;pid&gt;</code></p>\n"},{"tags":[],"owner":{"account_id":1366046,"reputation":2411,"user_id":1302445,"display_name":"Akash Yadav"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1349395717,"creation_date":1349395717,"answer_id":12737755,"question_id":12737293,"body_markdown":"The port is already being used by some other process as @Diego Pino said u can use lsof on unix to locate the process and kill the respective one, if you are on windows use netstat -ano to get all the pids of the process and the ports that everyone acquires. search for your intended port and kill.\r\n\r\nto be very easy just restart your machine , if thats possible :)","title":"How do I resolve the &quot;java.net.BindException: Address already in use: JVM_Bind&quot; error?","body":"<p>The port is already being used by some other process as @Diego Pino said u can use lsof on unix to locate the process and kill the respective one, if you are on windows use netstat -ano to get all the pids of the process and the ports that everyone acquires. search for your intended port and kill.</p>\n\n<p>to be very easy just restart your machine , if thats possible :)</p>\n"},{"tags":[],"owner":{"account_id":1824055,"reputation":7962,"user_id":1657364,"display_name":"Guido Simone"},"down_vote_count":0,"up_vote_count":169,"is_accepted":true,"score":169,"last_activity_date":1383154470,"creation_date":1349395990,"answer_id":12737775,"question_id":12737293,"body_markdown":"Yes you have another process bound to the same port.\r\n\r\n[TCPView](http://technet.microsoft.com/en-us/sysinternals/bb897437) (Windows only) from [Windows Sysinternals](http://technet.microsoft.com/en-US/sysinternals)  is my favorite app whenever I have a JVM_BIND error.  It shows which processes are listening on which port.  It also provides a convenient context menu to either kill the process or close the connection that is getting in the way.  ","title":"How do I resolve the &quot;java.net.BindException: Address already in use: JVM_Bind&quot; error?","body":"<p>Yes you have another process bound to the same port.</p>\n\n<p><a href=\"http://technet.microsoft.com/en-us/sysinternals/bb897437\">TCPView</a> (Windows only) from <a href=\"http://technet.microsoft.com/en-US/sysinternals\">Windows Sysinternals</a>  is my favorite app whenever I have a JVM_BIND error.  It shows which processes are listening on which port.  It also provides a convenient context menu to either kill the process or close the connection that is getting in the way.  </p>\n"},{"tags":[],"owner":{"account_id":1743707,"reputation":539,"user_id":1594380,"display_name":"Hoyin"},"down_vote_count":0,"up_vote_count":43,"is_accepted":false,"score":43,"last_activity_date":1519884819,"creation_date":1362127602,"answer_id":15153736,"question_id":12737293,"body_markdown":"In Mac: \r\n\r\n**Kill process**\r\nTerminal: `kill &lt;pid&gt;`\r\n\r\n\r\n**Find pid:**\r\nTerminal: `lsof -i:&lt;port&gt;`\r\n\r\nFrom Diego Pino answer","title":"How do I resolve the &quot;java.net.BindException: Address already in use: JVM_Bind&quot; error?","body":"<p>In Mac: </p>\n\n<p><strong>Kill process</strong>\nTerminal: <code>kill &lt;pid&gt;</code></p>\n\n<p><strong>Find pid:</strong>\nTerminal: <code>lsof -i:&lt;port&gt;</code></p>\n\n<p>From Diego Pino answer</p>\n"},{"tags":[],"owner":{"account_id":255712,"reputation":6480,"user_id":535935,"accept_rate":52,"display_name":"Abhi"},"down_vote_count":0,"up_vote_count":146,"is_accepted":false,"score":146,"last_activity_date":1412186405,"creation_date":1412186405,"answer_id":26147631,"question_id":12737293,"body_markdown":"In windows \r\n\r\n    netstat -ano\r\nwill list all the protocols, ports and processes listening .\r\nUse\r\n\r\n    taskkill -pid &quot;proces to kill&quot; /f\r\n\r\nto kill the process listening to the port.\r\ne.g\r\n\r\n     taskkill -pid 431 /f","title":"How do I resolve the &quot;java.net.BindException: Address already in use: JVM_Bind&quot; error?","body":"<p>In windows </p>\n\n<pre><code>netstat -ano\n</code></pre>\n\n<p>will list all the protocols, ports and processes listening .\nUse</p>\n\n<pre><code>taskkill -pid \"proces to kill\" /f\n</code></pre>\n\n<p>to kill the process listening to the port.\ne.g</p>\n\n<pre><code> taskkill -pid 431 /f\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1835870,"reputation":128,"user_id":1666285,"display_name":"CharlesX"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1439799300,"creation_date":1439799300,"answer_id":32045608,"question_id":12737293,"body_markdown":"In Windows CMD line, find out the Process ID that hold a connection on the bind port by entering following command:\r\n\r\nC:\\&gt; netstat -a -o\r\n\r\n-a show all connections\r\n\r\n-o show process identifier\r\n\r\nAnd then **Terminate** the process.\r\n\r\n","title":"How do I resolve the &quot;java.net.BindException: Address already in use: JVM_Bind&quot; error?","body":"<p>In Windows CMD line, find out the Process ID that hold a connection on the bind port by entering following command:</p>\n\n<p>C:> netstat -a -o</p>\n\n<p>-a show all connections</p>\n\n<p>-o show process identifier</p>\n\n<p>And then <strong>Terminate</strong> the process.</p>\n"},{"tags":[],"owner":{"account_id":6555365,"reputation":1949,"user_id":5068213,"accept_rate":86,"display_name":"Bharti Rawat"},"down_vote_count":0,"up_vote_count":47,"is_accepted":false,"score":47,"last_activity_date":1551937593,"creation_date":1465019126,"answer_id":37626811,"question_id":12737293,"body_markdown":"In **Ubuntu/Unix** we can resolve this problem in 2 steps as described below.\r\n\r\n1. Type `netstat -plten |grep java`\r\n\r\n This will give an output similar to:\r\n\r\n        tcp   0   0 0.0.0.0:8080   0.0.0.0:*  LISTEN   1001  76084  9488/java       \r\n        \r\n Here `8080` is the port number at which the java process is listening and `9488` is its process id (pid).\r\n\r\n2. In order to free the occupied port, we have to kill this process using the `kill` command.\r\n\r\n        kill -9 9488\r\n\r\n `9488` is the process id from earlier. We use `-9` to force stop the process. \r\n\r\nYour port should now be free and you can restart the server.","title":"How do I resolve the &quot;java.net.BindException: Address already in use: JVM_Bind&quot; error?","body":"<p>In <strong>Ubuntu/Unix</strong> we can resolve this problem in 2 steps as described below.</p>\n\n<ol>\n<li><p>Type <code>netstat -plten |grep java</code></p>\n\n<p>This will give an output similar to:</p>\n\n<pre><code>tcp   0   0 0.0.0.0:8080   0.0.0.0:*  LISTEN   1001  76084  9488/java       \n</code></pre>\n\n<p>Here <code>8080</code> is the port number at which the java process is listening and <code>9488</code> is its process id (pid).</p></li>\n<li><p>In order to free the occupied port, we have to kill this process using the <code>kill</code> command.</p>\n\n<pre><code>kill -9 9488\n</code></pre>\n\n<p><code>9488</code> is the process id from earlier. We use <code>-9</code> to force stop the process. </p></li>\n</ol>\n\n<p>Your port should now be free and you can restart the server.</p>\n"},{"tags":[],"owner":{"account_id":3311832,"reputation":390,"user_id":2785156,"accept_rate":17,"display_name":"Chetan Gowda"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1468837064,"creation_date":1468837064,"answer_id":38434178,"question_id":12737293,"body_markdown":"I faced similar issue in Eclipse when two consoles were opened when I started the Server program first and then the Client program. I used to stop the program in the single console thinking that it had closed the server, but it had only closed the client and not the server. I found running Java processes in my Task manager. This problem was solved by closing both Server and Client programs from their individual consoles(Eclipse shows console of latest active program). So when I started the Server program again, the port was again open to be captured.","title":"How do I resolve the &quot;java.net.BindException: Address already in use: JVM_Bind&quot; error?","body":"<p>I faced similar issue in Eclipse when two consoles were opened when I started the Server program first and then the Client program. I used to stop the program in the single console thinking that it had closed the server, but it had only closed the client and not the server. I found running Java processes in my Task manager. This problem was solved by closing both Server and Client programs from their individual consoles(Eclipse shows console of latest active program). So when I started the Server program again, the port was again open to be captured.</p>\n"},{"tags":[],"owner":{"account_id":8845091,"reputation":469,"user_id":6606123,"display_name":"suketup"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1471507276,"creation_date":1471507276,"answer_id":39012816,"question_id":12737293,"body_markdown":"Your port must be busy in some Other Process. So you can download TCPView on https://technet.microsoft.com/en-us/sysinternals/bb897437 and kill the process for used port.\r\n\r\nIf you don&#39;t know your port, double click on the server that is not starting and click on Open Server Properties Page and click on glassfish from left column. You will find the ports here.","title":"How do I resolve the &quot;java.net.BindException: Address already in use: JVM_Bind&quot; error?","body":"<p>Your port must be busy in some Other Process. So you can download TCPView on <a href=\"https://technet.microsoft.com/en-us/sysinternals/bb897437\" rel=\"nofollow\">https://technet.microsoft.com/en-us/sysinternals/bb897437</a> and kill the process for used port.</p>\n\n<p>If you don't know your port, double click on the server that is not starting and click on Open Server Properties Page and click on glassfish from left column. You will find the ports here.</p>\n"},{"tags":[],"owner":{"account_id":3100005,"reputation":627,"user_id":2624378,"accept_rate":17,"display_name":"tonysok"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1487353435,"creation_date":1487353435,"answer_id":42304286,"question_id":12737293,"body_markdown":"(1) check the port is in use or not, kill that process\r\n\r\n**$ lsof -i:[port]**\r\n\r\n\r\n(2) another reason is the port is used by ipv6, solution:\r\n\r\nedit **/etc/sysctl.conf** \r\n\r\n\r\nadd this to the file\r\n\r\n**net.ipv6.conf.all.disable_ipv6 = 1**\r\n\r\nthen make it effect\r\n\r\n**$ sudo sysctl -p /etc/sysctl.conf** \r\n\r\nor just reboot","title":"How do I resolve the &quot;java.net.BindException: Address already in use: JVM_Bind&quot; error?","body":"<p>(1) check the port is in use or not, kill that process</p>\n\n<p><strong>$ lsof -i:[port]</strong></p>\n\n<p>(2) another reason is the port is used by ipv6, solution:</p>\n\n<p>edit <strong>/etc/sysctl.conf</strong> </p>\n\n<p>add this to the file</p>\n\n<p><strong>net.ipv6.conf.all.disable_ipv6 = 1</strong></p>\n\n<p>then make it effect</p>\n\n<p><strong>$ sudo sysctl -p /etc/sysctl.conf</strong> </p>\n\n<p>or just reboot</p>\n"},{"tags":[],"owner":{"account_id":9642232,"reputation":441,"user_id":7156103,"accept_rate":100,"display_name":"Vibhav Chaddha"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1487922407,"creation_date":1487922407,"answer_id":42433250,"question_id":12737293,"body_markdown":"For those who are looking for the **simplest of the answers** (as that is what we usually miss), just stop your running project and start it again.\r\nMost of the time what we do is we forget to stop the project we ran earlier and when we re-run the project it shows such an issue. \r\n\r\nI am also attaching a photo to make it clearer (I use &#39;Spring tool suite&#39;).\r\nSo what you need to do is either click the button on the extreme right, if you want to relaunch the same project or first click on the button which is 2nd from the right to stop your project and then the button on the extreme left to run your project. I hope this will solve the issue of few of the newer programmers. :)\r\n\r\n  [![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/eXGMh.png","title":"How do I resolve the &quot;java.net.BindException: Address already in use: JVM_Bind&quot; error?","body":"<p>For those who are looking for the <strong>simplest of the answers</strong> (as that is what we usually miss), just stop your running project and start it again.\nMost of the time what we do is we forget to stop the project we ran earlier and when we re-run the project it shows such an issue. </p>\n\n<p>I am also attaching a photo to make it clearer (I use 'Spring tool suite').\nSo what you need to do is either click the button on the extreme right, if you want to relaunch the same project or first click on the button which is 2nd from the right to stop your project and then the button on the extreme left to run your project. I hope this will solve the issue of few of the newer programmers. :)</p>\n\n<p><a href=\"https://i.stack.imgur.com/eXGMh.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/eXGMh.png\" alt=\"enter image description here\"></a></p>\n"},{"tags":[],"owner":{"account_id":8203737,"reputation":2065,"user_id":6174209,"accept_rate":83,"display_name":"Yasitha Bandara"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1504424355,"creation_date":1504424355,"answer_id":46021269,"question_id":12737293,"body_markdown":"Yes, as Guido Simone said it because another process listening to the same port.If you are in Ubuntu You can simply kill that process giving command\r\n`sudo kill $(sudo lsof -t -i:[port number])`\r\n\r\nex: `sudo kill $(sudo lsof -t -i:8080)`\r\n\r\nBut once it didn&#39;t work for me.\r\ni gave the command\r\n\r\n    $ lsof -i:[port] \r\nand it shows nothing. \r\n\r\nI checked my docker containers using command\r\n`docker ps -a` but non of them alive.All containers has stopped\r\n(but i remember ,i stopped one container which was used same port few minutes ago.).To make sure that docker is not the reason,I stop whole docker process using command `sudo service docker stop` and try again.\r\nSurprisingly eclipse didn&#39;t show the error at that time .It run my program perfectly.\r\n\r\nHope my experience will help some one.\r\n\r\n","title":"How do I resolve the &quot;java.net.BindException: Address already in use: JVM_Bind&quot; error?","body":"<p>Yes, as Guido Simone said it because another process listening to the same port.If you are in Ubuntu You can simply kill that process giving command\n<code>sudo kill $(sudo lsof -t -i:[port number])</code></p>\n\n<p>ex: <code>sudo kill $(sudo lsof -t -i:8080)</code></p>\n\n<p>But once it didn't work for me.\ni gave the command</p>\n\n<pre><code>$ lsof -i:[port] \n</code></pre>\n\n<p>and it shows nothing. </p>\n\n<p>I checked my docker containers using command\n<code>docker ps -a</code> but non of them alive.All containers has stopped\n(but i remember ,i stopped one container which was used same port few minutes ago.).To make sure that docker is not the reason,I stop whole docker process using command <code>sudo service docker stop</code> and try again.\nSurprisingly eclipse didn't show the error at that time .It run my program perfectly.</p>\n\n<p>Hope my experience will help some one.</p>\n"},{"tags":[],"owner":{"account_id":2270396,"reputation":1045,"user_id":1997983,"accept_rate":100,"display_name":"Rakesh Burbure"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1517383927,"creation_date":1517383927,"answer_id":48536792,"question_id":12737293,"body_markdown":"It means some other process is already using the port. In case if this port is being used by some other critical applications and you don&#39;t want to close that application, the better way is to choose any other port which is free to use. \r\n\r\nConfigure your application to use any other port which is free and you will see your application working.","title":"How do I resolve the &quot;java.net.BindException: Address already in use: JVM_Bind&quot; error?","body":"<p>It means some other process is already using the port. In case if this port is being used by some other critical applications and you don't want to close that application, the better way is to choose any other port which is free to use. </p>\n\n<p>Configure your application to use any other port which is free and you will see your application working.</p>\n"},{"tags":[],"owner":{"account_id":1344570,"reputation":442,"user_id":1285565,"accept_rate":25,"display_name":"Kumar"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1527078659,"creation_date":1526461027,"answer_id":50366465,"question_id":12737293,"body_markdown":"Restart the PC once, I think it will work. It started working in my case. One more thing can be done go to Task Manager and End the process. \r\n\r\n[![Screenshot for the reference.][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/5nity.png","title":"How do I resolve the &quot;java.net.BindException: Address already in use: JVM_Bind&quot; error?","body":"<p>Restart the PC once, I think it will work. It started working in my case. One more thing can be done go to Task Manager and End the process. </p>\n\n<p><a href=\"https://i.stack.imgur.com/5nity.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/5nity.png\" alt=\"Screenshot for the reference.\"></a></p>\n"},{"tags":[],"owner":{"account_id":4203782,"reputation":1870,"user_id":3443247,"accept_rate":100,"display_name":"Sufiyan Ansari"},"down_vote_count":0,"up_vote_count":36,"is_accepted":false,"score":36,"last_activity_date":1529915734,"creation_date":1529915734,"answer_id":51019260,"question_id":12737293,"body_markdown":"**(Windows Only)**\r\n\r\nTo kill a process you first need to find the Process Id (pid)\r\n\r\nBy running the command :\r\n\r\n    netstat -ano | findstr :yourPortNumber\r\n\r\n[![As shown in picture below][1]][1]\r\n\r\nYou will get your Process Id (PID), Now to kill the same process run this command:\r\n\r\n    taskkill /pid yourid /f\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/ue3dJ.png\r\n  [2]: https://i.stack.imgur.com/G2gKF.png","title":"How do I resolve the &quot;java.net.BindException: Address already in use: JVM_Bind&quot; error?","body":"<p><strong>(Windows Only)</strong></p>\n\n<p>To kill a process you first need to find the Process Id (pid)</p>\n\n<p>By running the command :</p>\n\n<pre><code>netstat -ano | findstr :yourPortNumber\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/ue3dJ.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/ue3dJ.png\" alt=\"As shown in picture below\"></a></p>\n\n<p>You will get your Process Id (PID), Now to kill the same process run this command:</p>\n\n<pre><code>taskkill /pid yourid /f\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/G2gKF.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/G2gKF.png\" alt=\"enter image description here\"></a></p>\n"},{"tags":[],"owner":{"account_id":7416245,"reputation":679,"user_id":5641961,"display_name":"Machhindra Neupane"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1541055060,"creation_date":1541054622,"answer_id":53096349,"question_id":12737293,"body_markdown":"You need to close your port \r\nif you are a linux user then type\r\n\r\n    fuser -k 8080/tcp","title":"How do I resolve the &quot;java.net.BindException: Address already in use: JVM_Bind&quot; error?","body":"<p>You need to close your port \nif you are a linux user then type</p>\n\n<pre><code>fuser -k 8080/tcp\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14282929,"reputation":333,"user_id":10317086,"display_name":"EnGoPy"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1571135119,"creation_date":1571135119,"answer_id":58392490,"question_id":12737293,"body_markdown":"In my case Tomcat was running in a background. I&#39;ve installed it as a external servlet while using Eclipse.\r\nWith a Spring Boot in Intellij it has it own server but cannot start while it&#39;s already occupied.&lt;br&gt;\r\nIn my case Tomcat starts automatically I turn on my OS, that is why I need to shut down him manualy:&lt;br&gt;\r\n\r\n    $ sudo service tomcat stop\r\n\r\nof course &quot;tomcat&quot; depends what version of tomcat you are using. \r\n&lt;br&gt;\r\nHope it might help to someone.\r\n","title":"How do I resolve the &quot;java.net.BindException: Address already in use: JVM_Bind&quot; error?","body":"<p>In my case Tomcat was running in a background. I've installed it as a external servlet while using Eclipse.\nWith a Spring Boot in Intellij it has it own server but cannot start while it's already occupied.<br>\nIn my case Tomcat starts automatically I turn on my OS, that is why I need to shut down him manualy:<br></p>\n\n<pre><code>$ sudo service tomcat stop\n</code></pre>\n\n<p>of course \"tomcat\" depends what version of tomcat you are using. \n<br>\nHope it might help to someone.</p>\n"},{"tags":[],"owner":{"account_id":3691447,"reputation":6845,"user_id":3073945,"accept_rate":90,"display_name":"Md. Sajedul Karim"},"down_vote_count":0,"up_vote_count":21,"is_accepted":false,"score":21,"last_activity_date":1646044218,"creation_date":1588147578,"answer_id":61497005,"question_id":12737293,"body_markdown":"**For windows** :\r\n\r\n 1. **Find the process id**\r\n\r\n    netstat -nao | find &quot;8080&quot; \r\n\r\nIt will show you the process ID as a number. \r\n\r\n**Example**:\r\n \r\n\r\n    TCP    0.0.0.0:8080           0.0.0.0:0              LISTENING       18856\r\nHere **18856** is the process ID\r\n \r\n2. **Kill that process**\r\n\r\n    taskkill /PID  18856 /F\r\n\r\n**Output** : SUCCESS: The process with PID 18856 has been terminated.\r\n\r\nHere using taskkill you are killing the process ID:18856 \r\n\r\n\r\n**For linux/Mac**:\r\n\r\n    sudo kill -9 $(sudo lsof -t -i:8080)\r\n\r\nHere you find the process by port **8080** using `sudo lsof -t -i:8080` and killing it by sudo kill command\r\n","title":"How do I resolve the &quot;java.net.BindException: Address already in use: JVM_Bind&quot; error?","body":"<p><strong>For windows</strong> :</p>\n<ol>\n<li><p><strong>Find the process id</strong></p>\n<p>netstat -nao | find &quot;8080&quot;</p>\n</li>\n</ol>\n<p>It will show you the process ID as a number.</p>\n<p><strong>Example</strong>:</p>\n<pre><code>TCP    0.0.0.0:8080           0.0.0.0:0              LISTENING       18856\n</code></pre>\n<p>Here <strong>18856</strong> is the process ID</p>\n<ol start=\"2\">\n<li><p><strong>Kill that process</strong></p>\n<p>taskkill /PID  18856 /F</p>\n</li>\n</ol>\n<p><strong>Output</strong> : SUCCESS: The process with PID 18856 has been terminated.</p>\n<p>Here using taskkill you are killing the process ID:18856</p>\n<p><strong>For linux/Mac</strong>:</p>\n<pre><code>sudo kill -9 $(sudo lsof -t -i:8080)\n</code></pre>\n<p>Here you find the process by port <strong>8080</strong> using <code>sudo lsof -t -i:8080</code> and killing it by sudo kill command</p>\n"},{"tags":[],"owner":{"account_id":5995486,"reputation":616,"user_id":4710245,"display_name":"Anthony Pi&#241;ero"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1601334484,"creation_date":1601334484,"answer_id":64110758,"question_id":12737293,"body_markdown":"You can close every Java Process and start again your app:\r\n\r\n    taskkill /F /IM java.exe\r\n\r\nstart your app again...","title":"How do I resolve the &quot;java.net.BindException: Address already in use: JVM_Bind&quot; error?","body":"<p>You can close every Java Process and start again your app:</p>\n<pre><code>taskkill /F /IM java.exe\n</code></pre>\n<p>start your app again...</p>\n"},{"tags":[],"owner":{"account_id":7916122,"reputation":81,"user_id":5978490,"display_name":"Shobana T"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1629187627,"creation_date":1629187138,"answer_id":68813654,"question_id":12737293,"body_markdown":"This BindException would come when another process is already running in the specified port(8080). \r\n\r\nYou can use anyone of the following approach.\r\n\r\n 1. **Change the server port:** If you are using Tomcat server and IntelliJ IDE, you can configure the server port by configuring the tomcat server \r\n    \r\n    [![enter image description here][1]][1]\r\n\r\nor\r\n\r\n - Go to tomcat&gt;conf folder \r\n - Edit server.xml  \r\n - Search &quot;Connector port&quot; \r\n - Replace &quot;8080&quot; by your port number  \r\n - Restart tomcat server.\r\n\r\n 2. **Kill the existing running process in that port and start the server.**\r\n\r\n&gt;    **For Linux/Mac**\r\n&gt; \r\n&gt;     sudo kill -9 $(sudo lsof -t -i:8080)\r\n&gt; \r\n&gt;    **For Windows**\r\n&gt; \r\n&gt;     netstat -ano | findstr :8080\r\n&gt;     taskkill /PID typeyourPIDhere /F \r\n&gt; \r\n&gt; **Note:** (/F forcefully terminates the process)\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/pFonb.png","title":"How do I resolve the &quot;java.net.BindException: Address already in use: JVM_Bind&quot; error?","body":"<p>This BindException would come when another process is already running in the specified port(8080).</p>\n<p>You can use anyone of the following approach.</p>\n<ol>\n<li><p><strong>Change the server port:</strong> If you are using Tomcat server and IntelliJ IDE, you can configure the server port by configuring the tomcat server</p>\n<p><a href=\"https://i.stack.imgur.com/pFonb.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/pFonb.png\" alt=\"enter image description here\" /></a></p>\n</li>\n</ol>\n<p>or</p>\n<ul>\n<li>Go to tomcat&gt;conf folder</li>\n<li>Edit server.xml</li>\n<li>Search &quot;Connector port&quot;</li>\n<li>Replace &quot;8080&quot; by your port number</li>\n<li>Restart tomcat server.</li>\n</ul>\n<ol start=\"2\">\n<li><strong>Kill the existing running process in that port and start the server.</strong></li>\n</ol>\n<blockquote>\n<p><strong>For Linux/Mac</strong></p>\n<pre><code>sudo kill -9 $(sudo lsof -t -i:8080)\n</code></pre>\n<p><strong>For Windows</strong></p>\n<pre><code>netstat -ano | findstr :8080\ntaskkill /PID typeyourPIDhere /F \n</code></pre>\n<p><strong>Note:</strong> (/F forcefully terminates the process)</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":18635180,"reputation":23,"user_id":13582258,"display_name":"jsnjdhs"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649768763,"creation_date":1649768763,"answer_id":71843300,"question_id":12737293,"body_markdown":"I actually just used the Terminate button in Console Tab. It&#39;s a small red box. Hope that hepls.","title":"How do I resolve the &quot;java.net.BindException: Address already in use: JVM_Bind&quot; error?","body":"<p>I actually just used the Terminate button in Console Tab. It's a small red box. Hope that hepls.</p>\n"}],"owner":{"account_id":398383,"reputation":12130,"user_id":763029,"accept_rate":88,"display_name":"Caffeinated"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":950519,"favorite_count":0,"down_vote_count":0,"up_vote_count":268,"accepted_answer_id":12737775,"answer_count":22,"score":268,"last_activity_date":1649768763,"creation_date":1349392036,"question_id":12737293,"body_markdown":"In Eclipse, I got this error:\r\n\r\n    run:\r\n         [java] Error creating the server socket.\r\n         [java] Oct 04, 2012 5:31:38 PM cascadas.ace.AceFactory bootstrap\r\n         [java] SEVERE: Failed to create world : java.net.BindException: Address already in use: JVM_Bind\r\n         [java] Java Result: -1\r\n    BUILD SUCCESSFUL\r\n    Total time: 10 seconds\r\n\r\nI&#39;m not sure why it came up  now, but it ran fine just a few hours ago. Do I need to restart my machine? How do i get to the bottom of it? I appreciate any tips or advice.","title":"How do I resolve the &quot;java.net.BindException: Address already in use: JVM_Bind&quot; error?","body":"<p>In Eclipse, I got this error:</p>\n\n<pre><code>run:\n     [java] Error creating the server socket.\n     [java] Oct 04, 2012 5:31:38 PM cascadas.ace.AceFactory bootstrap\n     [java] SEVERE: Failed to create world : java.net.BindException: Address already in use: JVM_Bind\n     [java] Java Result: -1\nBUILD SUCCESSFUL\nTotal time: 10 seconds\n</code></pre>\n\n<p>I'm not sure why it came up  now, but it ran fine just a few hours ago. Do I need to restart my machine? How do i get to the bottom of it? I appreciate any tips or advice.</p>\n"},{"tags":["java","mysql","spring","hibernate"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1649771281,"post_id":71842061,"comment_id":126956705,"body_markdown":"Use `spring.datasource.url` instead of `spring.datasource.jdbcurl`. There is no database connection being made and it will use H2/HSQLDB as default (which is propably on your classpath, I suggest to remove it). You are basically firing a MySQL query to an H2/HSQLDB database which won&#39;t understand that.","body":"Use <code>spring.datasource.url</code> instead of <code>spring.datasource.jdbcurl</code>. There is no database connection being made and it will use H2/HSQLDB as default (which is propably on your classpath, I suggest to remove it). You are basically firing a MySQL query to an H2/HSQLDB database which won&#39;t understand that."}],"answers":[{"tags":[],"owner":{"account_id":10342917,"reputation":31,"user_id":7628711,"display_name":"Rajvee Shah"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1649768606,"creation_date":1649768606,"answer_id":71843265,"question_id":71842061,"body_markdown":"I think you should try\r\n    \r\n    spring.datasource.url=jdbc:mysql://localhost:3306/test_schema \r\n    spring.datasource.username=root\r\n    spring.datasource.driver-class-name=com.mysql.jdbc.Driver\r\n    spring.jpa.database-platform=org.hibernate.dialect.MySQL5InnoDBDialect","title":"hibernate mysql dialect 8 unexpected token: ENGINE","body":"<p>I think you should try</p>\n<pre><code>spring.datasource.url=jdbc:mysql://localhost:3306/test_schema \nspring.datasource.username=root\nspring.datasource.driver-class-name=com.mysql.jdbc.Driver\nspring.jpa.database-platform=org.hibernate.dialect.MySQL5InnoDBDialect\n</code></pre>\n"}],"owner":{"account_id":15477979,"reputation":13,"user_id":11166182,"display_name":"nb13"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1372,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71843265,"answer_count":1,"score":0,"last_activity_date":1649768606,"creation_date":1649763876,"question_id":71842061,"body_markdown":"I am using hibernate to get a connection to a mysql database. \r\n\r\nLike in various tutorials suggested I setup my application properties like this:\r\n\r\n    spring.datasource.jdbcUrl=jdbc:mysql://localhost:3306/test_schema\r\n    spring.datasource.username=root\r\n    spring.datasource.password=\r\n    spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQL8Dialect\r\n    spring.jpa.hibernate.ddl-auto=update\r\n    spring.jpa.show-sql=true\r\n    spring.jpa.generate-ddl=true\r\n\r\nNow if i leave out the hibernate dialect, it uses `HSQLDialect` which shows the creation of two tables based on my two entities. But none of them are shown in MySQL Workbench...\r\n\r\nIf I use the dialect shown above I get the following error: \r\n\r\n```Hibernate: create table booking_entry (id bigint not null, employee_id bigint not null, project_id bigint, primary key (id)) engine=InnoDB\r\n2022-04-12 13:33:50.453  WARN 26016 --- [           main] o.h.t.s.i.ExceptionHandlerLoggedImpl     : GenerationTarget encountered exception accepting command : Error executing DDL &quot;create table booking_entry (id bigint not null, employee_id bigint not null, project_id bigint, primary key (id)) engine=InnoDB&quot; via JDBC Statement\r\n\r\norg.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL &quot;create table booking_entry (id bigint not null, employee_id bigint not null, project_id bigint, primary key (id)) engine=InnoDB&quot; via JDBC Statement\r\n\tat org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:67) ~[hibernate-core-5.6.7.Final.jar:5.6.7.Final]\r\n\tat org.hibernate.tool.schema.internal.AbstractSchemaMigrator.applySqlString(AbstractSchemaMigrator.java:581) ~[hibernate-core-5.6.7.Final.jar:5.6.7.Final]\r\n\tat org.hibernate.tool.schema.internal.AbstractSchemaMigrator.applySqlStrings(AbstractSchemaMigrator.java:526) ~[hibernate-core-5.6.7.Final.jar:5.6.7.Final]\r\n\tat org.hibernate.tool.schema.internal.AbstractSchemaMigrator.createTable(AbstractSchemaMigrator.java:293) ~[hibernate-core-5.6.7.Final.jar:5.6.7.Final]\r\n\tat org.hibernate.tool.schema.internal.GroupedSchemaMigratorImpl.performTablesMigration(GroupedSchemaMigratorImpl.java:74) ~[hibernate-core-5.6.7.Final.jar:5.6.7.Final]\r\n\tat org.hibernate.tool.schema.internal.AbstractSchemaMigrator.performMigration(AbstractSchemaMigrator.java:220) ~[hibernate-core-5.6.7.Final.jar:5.6.7.Final]\r\n\tat org.hibernate.tool.schema.internal.AbstractSchemaMigrator.doMigration(AbstractSchemaMigrator.java:123) ~[hibernate-core-5.6.7.Final.jar:5.6.7.Final]\r\n\tat org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:196) ~[hibernate-core-5.6.7.Final.jar:5.6.7.Final]\r\n\tat org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:85) ~[hibernate-core-5.6.7.Final.jar:5.6.7.Final]\r\n\tat org.hibernate.internal.SessionFactoryImpl.&lt;init&gt;(SessionFactoryImpl.java:335) ~[hibernate-core-5.6.7.Final.jar:5.6.7.Final]\r\n\tat org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:471) ~[hibernate-core-5.6.7.Final.jar:5.6.7.Final]\r\n\tat org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1498) ~[hibernate-core-5.6.7.Final.jar:5.6.7.Final]\r\n\tat org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:58) ~[spring-orm-5.3.18.jar:5.3.18]\r\n\tat org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:365) ~[spring-orm-5.3.18.jar:5.3.18]\r\n\tat org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409) ~[spring-orm-5.3.18.jar:5.3.18]\r\n\tat org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396) ~[spring-orm-5.3.18.jar:5.3.18]\r\n\tat org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:341) ~[spring-orm-5.3.18.jar:5.3.18]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1863) ~[spring-beans-5.3.18.jar:5.3.18]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1800) ~[spring-beans-5.3.18.jar:5.3.18]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:620) ~[spring-beans-5.3.18.jar:5.3.18]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.18.jar:5.3.18]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.18.jar:5.3.18]\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.18.jar:5.3.18]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.18.jar:5.3.18]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.18.jar:5.3.18]\r\n\tat org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1154) ~[spring-context-5.3.18.jar:5.3.18]\r\n\tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:908) ~[spring-context-5.3.18.jar:5.3.18]\r\n\tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.18.jar:5.3.18]\r\n\tat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:145) ~[spring-boot-2.6.6.jar:2.6.6]\r\n\tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:740) ~[spring-boot-2.6.6.jar:2.6.6]\r\n\tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:415) ~[spring-boot-2.6.6.jar:2.6.6]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:303) ~[spring-boot-2.6.6.jar:2.6.6]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1312) ~[spring-boot-2.6.6.jar:2.6.6]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1301) ~[spring-boot-2.6.6.jar:2.6.6]\r\n\tat com.example.demo.DemoApplication.main(DemoApplication.java:12) ~[classes/:na]\r\nCaused by: java.sql.SQLSyntaxErrorException: unexpected token: ENGINE\r\n\tat org.hsqldb.jdbc.JDBCUtil.sqlException(Unknown Source) ~[hsqldb-2.5.2.jar:2.5.2]\r\n\tat org.hsqldb.jdbc.JDBCUtil.sqlException(Unknown Source) ~[hsqldb-2.5.2.jar:2.5.2]\r\n\tat org.hsqldb.jdbc.JDBCStatement.fetchResult(Unknown Source) ~[hsqldb-2.5.2.jar:2.5.2]\r\n\tat org.hsqldb.jdbc.JDBCStatement.execute(Unknown Source) ~[hsqldb-2.5.2.jar:2.5.2]\r\n\tat com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94) ~[HikariCP-4.0.3.jar:na]\r\n\tat com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java) ~[HikariCP-4.0.3.jar:na]\r\n\tat org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:54) ~[hibernate-core-5.6.7.Final.jar:5.6.7.Final]\r\n\t... 34 common frames omitted\r\nCaused by: org.hsqldb.HsqlException: unexpected token: ENGINE\r\n\tat org.hsqldb.error.Error.parseError(Unknown Source) ~[hsqldb-2.5.2.jar:2.5.2]\r\n\tat org.hsqldb.ParserBase.unexpectedToken(Unknown Source) ~[hsqldb-2.5.2.jar:2.5.2]\r\n\tat org.hsqldb.ParserCommand.compilePart(Unknown Source) ~[hsqldb-2.5.2.jar:2.5.2]\r\n\tat org.hsqldb.ParserCommand.compileStatements(Unknown Source) ~[hsqldb-2.5.2.jar:2.5.2]\r\n\tat org.hsqldb.Session.executeDirectStatement(Unknown Source) ~[hsqldb-2.5.2.jar:2.5.2]\r\n\tat org.hsqldb.Session.execute(Unknown Source) ~[hsqldb-2.5.2.jar:2.5.2]\r\n\t... 39 common frames omitted\r\n```\r\n\r\nSo basically ```unexpected token: ENGINE``` is the error.\r\n\r\nThe rest of my project is rather basic like in [this](https://spring.io/guides/gs/accessing-data-mysql/) spring tutorial, but I used JPA Repositories instead of CRUD.\r\n\r\nUltimatly I am trying to connect a MS Access DB and a MySQL Database. I got everything up and running for a while but now the MySQL part screwed up so I created this simple example with the same problem.\r\n\r\nAny suggestions would really help, since I am allready trying to solve this for a few days...\r\n\r\nI allready tried to run the ``` create table booking_entry (id bigint not null, employee_id bigint not null, project_id bigint, primary key (id)) engine=InnoDB ``` command on MySQL Workbench which worked fine. So it has nothing to do with my Database.\r\n\r\n","title":"hibernate mysql dialect 8 unexpected token: ENGINE","body":"<p>I am using hibernate to get a connection to a mysql database.</p>\n<p>Like in various tutorials suggested I setup my application properties like this:</p>\n<pre><code>spring.datasource.jdbcUrl=jdbc:mysql://localhost:3306/test_schema\nspring.datasource.username=root\nspring.datasource.password=\nspring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQL8Dialect\nspring.jpa.hibernate.ddl-auto=update\nspring.jpa.show-sql=true\nspring.jpa.generate-ddl=true\n</code></pre>\n<p>Now if i leave out the hibernate dialect, it uses <code>HSQLDialect</code> which shows the creation of two tables based on my two entities. But none of them are shown in MySQL Workbench...</p>\n<p>If I use the dialect shown above I get the following error:</p>\n<pre><code>2022-04-12 13:33:50.453  WARN 26016 --- [           main] o.h.t.s.i.ExceptionHandlerLoggedImpl     : GenerationTarget encountered exception accepting command : Error executing DDL &quot;create table booking_entry (id bigint not null, employee_id bigint not null, project_id bigint, primary key (id)) engine=InnoDB&quot; via JDBC Statement\n\norg.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL &quot;create table booking_entry (id bigint not null, employee_id bigint not null, project_id bigint, primary key (id)) engine=InnoDB&quot; via JDBC Statement\n    at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:67) ~[hibernate-core-5.6.7.Final.jar:5.6.7.Final]\n    at org.hibernate.tool.schema.internal.AbstractSchemaMigrator.applySqlString(AbstractSchemaMigrator.java:581) ~[hibernate-core-5.6.7.Final.jar:5.6.7.Final]\n    at org.hibernate.tool.schema.internal.AbstractSchemaMigrator.applySqlStrings(AbstractSchemaMigrator.java:526) ~[hibernate-core-5.6.7.Final.jar:5.6.7.Final]\n    at org.hibernate.tool.schema.internal.AbstractSchemaMigrator.createTable(AbstractSchemaMigrator.java:293) ~[hibernate-core-5.6.7.Final.jar:5.6.7.Final]\n    at org.hibernate.tool.schema.internal.GroupedSchemaMigratorImpl.performTablesMigration(GroupedSchemaMigratorImpl.java:74) ~[hibernate-core-5.6.7.Final.jar:5.6.7.Final]\n    at org.hibernate.tool.schema.internal.AbstractSchemaMigrator.performMigration(AbstractSchemaMigrator.java:220) ~[hibernate-core-5.6.7.Final.jar:5.6.7.Final]\n    at org.hibernate.tool.schema.internal.AbstractSchemaMigrator.doMigration(AbstractSchemaMigrator.java:123) ~[hibernate-core-5.6.7.Final.jar:5.6.7.Final]\n    at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:196) ~[hibernate-core-5.6.7.Final.jar:5.6.7.Final]\n    at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:85) ~[hibernate-core-5.6.7.Final.jar:5.6.7.Final]\n    at org.hibernate.internal.SessionFactoryImpl.&lt;init&gt;(SessionFactoryImpl.java:335) ~[hibernate-core-5.6.7.Final.jar:5.6.7.Final]\n    at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:471) ~[hibernate-core-5.6.7.Final.jar:5.6.7.Final]\n    at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1498) ~[hibernate-core-5.6.7.Final.jar:5.6.7.Final]\n    at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:58) ~[spring-orm-5.3.18.jar:5.3.18]\n    at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:365) ~[spring-orm-5.3.18.jar:5.3.18]\n    at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409) ~[spring-orm-5.3.18.jar:5.3.18]\n    at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396) ~[spring-orm-5.3.18.jar:5.3.18]\n    at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:341) ~[spring-orm-5.3.18.jar:5.3.18]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1863) ~[spring-beans-5.3.18.jar:5.3.18]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1800) ~[spring-beans-5.3.18.jar:5.3.18]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:620) ~[spring-beans-5.3.18.jar:5.3.18]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.18.jar:5.3.18]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.18.jar:5.3.18]\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.18.jar:5.3.18]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.18.jar:5.3.18]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.18.jar:5.3.18]\n    at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1154) ~[spring-context-5.3.18.jar:5.3.18]\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:908) ~[spring-context-5.3.18.jar:5.3.18]\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.18.jar:5.3.18]\n    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:145) ~[spring-boot-2.6.6.jar:2.6.6]\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:740) ~[spring-boot-2.6.6.jar:2.6.6]\n    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:415) ~[spring-boot-2.6.6.jar:2.6.6]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:303) ~[spring-boot-2.6.6.jar:2.6.6]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1312) ~[spring-boot-2.6.6.jar:2.6.6]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1301) ~[spring-boot-2.6.6.jar:2.6.6]\n    at com.example.demo.DemoApplication.main(DemoApplication.java:12) ~[classes/:na]\nCaused by: java.sql.SQLSyntaxErrorException: unexpected token: ENGINE\n    at org.hsqldb.jdbc.JDBCUtil.sqlException(Unknown Source) ~[hsqldb-2.5.2.jar:2.5.2]\n    at org.hsqldb.jdbc.JDBCUtil.sqlException(Unknown Source) ~[hsqldb-2.5.2.jar:2.5.2]\n    at org.hsqldb.jdbc.JDBCStatement.fetchResult(Unknown Source) ~[hsqldb-2.5.2.jar:2.5.2]\n    at org.hsqldb.jdbc.JDBCStatement.execute(Unknown Source) ~[hsqldb-2.5.2.jar:2.5.2]\n    at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94) ~[HikariCP-4.0.3.jar:na]\n    at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java) ~[HikariCP-4.0.3.jar:na]\n    at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:54) ~[hibernate-core-5.6.7.Final.jar:5.6.7.Final]\n    ... 34 common frames omitted\nCaused by: org.hsqldb.HsqlException: unexpected token: ENGINE\n    at org.hsqldb.error.Error.parseError(Unknown Source) ~[hsqldb-2.5.2.jar:2.5.2]\n    at org.hsqldb.ParserBase.unexpectedToken(Unknown Source) ~[hsqldb-2.5.2.jar:2.5.2]\n    at org.hsqldb.ParserCommand.compilePart(Unknown Source) ~[hsqldb-2.5.2.jar:2.5.2]\n    at org.hsqldb.ParserCommand.compileStatements(Unknown Source) ~[hsqldb-2.5.2.jar:2.5.2]\n    at org.hsqldb.Session.executeDirectStatement(Unknown Source) ~[hsqldb-2.5.2.jar:2.5.2]\n    at org.hsqldb.Session.execute(Unknown Source) ~[hsqldb-2.5.2.jar:2.5.2]\n    ... 39 common frames omitted\n</code></pre>\n<p>So basically <code>unexpected token: ENGINE</code> is the error.</p>\n<p>The rest of my project is rather basic like in <a href=\"https://spring.io/guides/gs/accessing-data-mysql/\" rel=\"nofollow noreferrer\">this</a> spring tutorial, but I used JPA Repositories instead of CRUD.</p>\n<p>Ultimatly I am trying to connect a MS Access DB and a MySQL Database. I got everything up and running for a while but now the MySQL part screwed up so I created this simple example with the same problem.</p>\n<p>Any suggestions would really help, since I am allready trying to solve this for a few days...</p>\n<p>I allready tried to run the <code>create table booking_entry (id bigint not null, employee_id bigint not null, project_id bigint, primary key (id)) engine=InnoDB</code> command on MySQL Workbench which worked fine. So it has nothing to do with my Database.</p>\n"},{"tags":["java","spring-boot","utc","rest-assured","java.time.instant"],"answers":[{"tags":[],"owner":{"account_id":10263942,"reputation":5676,"user_id":7574461,"display_name":"lucas-nguyen-17"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1646792707,"creation_date":1646792707,"answer_id":71403625,"question_id":71401437,"body_markdown":"**Reason:**\r\n\r\n`2022-03-08T20:53:02.990` will map to LocalDateTime.\r\n\r\n`2022-03-08T20:53:02.990Z` will map to Instant.\r\n\r\n**Fix:**\r\n\r\n- Remove `@JsonFormat...`\r\n- Change `Instant time` --&gt; `LocalDateTime time`\r\n","title":"How can I convert an Instant during a Restassured request?","body":"<p><strong>Reason:</strong></p>\n<p><code>2022-03-08T20:53:02.990</code> will map to LocalDateTime.</p>\n<p><code>2022-03-08T20:53:02.990Z</code> will map to Instant.</p>\n<p><strong>Fix:</strong></p>\n<ul>\n<li>Remove <code>@JsonFormat...</code></li>\n<li>Change <code>Instant time</code> --&gt; <code>LocalDateTime time</code></li>\n</ul>\n"}],"owner":{"account_id":3274061,"reputation":2691,"user_id":2756760,"accept_rate":51,"display_name":"du-it"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":661,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":71403625,"answer_count":1,"score":1,"last_activity_date":1649768539,"creation_date":1646773607,"question_id":71401437,"body_markdown":"I want to perform a Restassured GET request. The response contains a list of objects which in turn have an Instant property.\r\n\r\nCurrently I get an exception:\r\n\r\n&gt; com.fasterxml.jackson.databind.exc.InvalidFormatException: Cannot deserialize value of type `java.time.Instant` from String &quot;2022-03-08T20:53:02.990&quot;: Failed to deserialize java.time.Instant: (java.time.format.DateTimeParseException) Text &#39;2022-03-08T20:53:02.990&#39; could not be parsed at index 19\r\n at [Source: (String)&quot;{&quot;timestamp&quot;:&quot;bf105ae0-9f21-11ec-9c3e-fddae3040d6b&quot;,&quot;time&quot;:&quot;2022-03-08T20:53:02.990&quot;,&quot;user&quot;:&quot;XXX_SYSTEM&quot;,&quot;correlationId&quot;:&quot;8fc84c87-aece-45b8-a7a6-66317152c840&quot;,&quot;key&quot;:&quot;20220308_A14_0000000000000_7777777700003_5743e8cd40554a7d8110aa149e7015de_53&quot;,&quot;category&quot;:&quot;INFO&quot;,&quot;context&quot;:&quot;BLA&quot;,&quot;type&quot;:&quot;BLUBB&quot;,&quot;system&quot;:true,&quot;event&quot;:&quot;FOO_BAR&quot;}&quot;; line: 1, column: 67] (through reference chain: xx.yyy.zzz.dto.MyResult$MyResultBuilder[&quot;time&quot;])\r\n\r\nThe request:\r\n\r\n            return given()\r\n            .baseUri(baseUrl)\r\n            .pathParam(&quot;aaa&quot;, value)\r\n            .param(&quot;zeitstempelAb&quot;, FORMATTER.format(from))\r\n            .param(&quot;zeitstempelBis&quot;, FORMATTER.format(to))\r\n            .param(&quot;limit&quot;, &quot;1000&quot;)\r\n            .when()\r\n            .log().all()\r\n            .get(&quot;aaa/{value}&quot;)\r\n            .then()\r\n            .log().all()\r\n            .assertThat()\r\n            .statusCode(200)\r\n            .extract()\r\n            .body()\r\n            .jsonPath()\r\n            .getList(&quot;content&quot;, MyResult.class)\r\n            ;\r\n\r\nThe used formatter:\r\n\r\n        private static final DateTimeFormatter FORMATTER = new DateTimeFormatterBuilder()\r\n        .appendPattern(&quot;yyyy-MM-dd&#39;T&#39;HH:mm:ss&quot;.concat(&quot;Z&quot;))\r\n        .toFormatter()\r\n        .withZone(ZoneOffset.UTC);\r\n\r\nThe MyResult POJO:\r\n\r\n    @JsonDeserialize(builder = MyResult.MyResultBuilder.class)\r\n    @Value\r\n    @Builder(setterPrefix = &quot;with&quot;)\r\n    public class MyResult {\r\n    \r\n        UUID timestamp;\r\n    \r\n        @JsonFormat(shape = JsonFormat.Shape.STRING, pattern = &quot;yyyy-MM-dd&#39;T&#39;HH:mm:ss&#39;Z&#39;&quot;, timezone = &quot;UTC&quot;)\r\n        Instant time;\r\n        .\r\n        .\r\n        .\r\n    }\r\n\r\nHow do I get rid of that exception?","title":"How can I convert an Instant during a Restassured request?","body":"<p>I want to perform a Restassured GET request. The response contains a list of objects which in turn have an Instant property.</p>\n<p>Currently I get an exception:</p>\n<blockquote>\n<p>com.fasterxml.jackson.databind.exc.InvalidFormatException: Cannot deserialize value of type <code>java.time.Instant</code> from String &quot;2022-03-08T20:53:02.990&quot;: Failed to deserialize java.time.Instant: (java.time.format.DateTimeParseException) Text '2022-03-08T20:53:02.990' could not be parsed at index 19\nat [Source: (String)&quot;{&quot;timestamp&quot;:&quot;bf105ae0-9f21-11ec-9c3e-fddae3040d6b&quot;,&quot;time&quot;:&quot;2022-03-08T20:53:02.990&quot;,&quot;user&quot;:&quot;XXX_SYSTEM&quot;,&quot;correlationId&quot;:&quot;8fc84c87-aece-45b8-a7a6-66317152c840&quot;,&quot;key&quot;:&quot;20220308_A14_0000000000000_7777777700003_5743e8cd40554a7d8110aa149e7015de_53&quot;,&quot;category&quot;:&quot;INFO&quot;,&quot;context&quot;:&quot;BLA&quot;,&quot;type&quot;:&quot;BLUBB&quot;,&quot;system&quot;:true,&quot;event&quot;:&quot;FOO_BAR&quot;}&quot;; line: 1, column: 67] (through reference chain: xx.yyy.zzz.dto.MyResult$MyResultBuilder[&quot;time&quot;])</p>\n</blockquote>\n<p>The request:</p>\n<pre><code>        return given()\n        .baseUri(baseUrl)\n        .pathParam(&quot;aaa&quot;, value)\n        .param(&quot;zeitstempelAb&quot;, FORMATTER.format(from))\n        .param(&quot;zeitstempelBis&quot;, FORMATTER.format(to))\n        .param(&quot;limit&quot;, &quot;1000&quot;)\n        .when()\n        .log().all()\n        .get(&quot;aaa/{value}&quot;)\n        .then()\n        .log().all()\n        .assertThat()\n        .statusCode(200)\n        .extract()\n        .body()\n        .jsonPath()\n        .getList(&quot;content&quot;, MyResult.class)\n        ;\n</code></pre>\n<p>The used formatter:</p>\n<pre><code>    private static final DateTimeFormatter FORMATTER = new DateTimeFormatterBuilder()\n    .appendPattern(&quot;yyyy-MM-dd'T'HH:mm:ss&quot;.concat(&quot;Z&quot;))\n    .toFormatter()\n    .withZone(ZoneOffset.UTC);\n</code></pre>\n<p>The MyResult POJO:</p>\n<pre><code>@JsonDeserialize(builder = MyResult.MyResultBuilder.class)\n@Value\n@Builder(setterPrefix = &quot;with&quot;)\npublic class MyResult {\n\n    UUID timestamp;\n\n    @JsonFormat(shape = JsonFormat.Shape.STRING, pattern = &quot;yyyy-MM-dd'T'HH:mm:ss'Z'&quot;, timezone = &quot;UTC&quot;)\n    Instant time;\n    .\n    .\n    .\n}\n</code></pre>\n<p>How do I get rid of that exception?</p>\n"},{"tags":["java","eclipse","spring-boot"],"comments":[{"owner":{"account_id":551394,"reputation":8315,"user_id":916225,"accept_rate":69,"display_name":"seenukarthi"},"score":0,"creation_date":1575307414,"post_id":59143792,"comment_id":104513875,"body_markdown":"Does this answer your question? [(class file version 53.0), Java Runtime versions up to 52.0 Visual studio code](https://stackoverflow.com/questions/47102120/class-file-version-53-0-java-runtime-versions-up-to-52-0-visual-studio-code)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/47102120/class-file-version-53-0-java-runtime-versions-up-to-52-0-visual-studio-code\">(class file version 53.0), Java Runtime versions up to 52.0 Visual studio code</a>"},{"owner":{"account_id":4678213,"reputation":2831,"user_id":3787777,"accept_rate":92,"display_name":"Coderino Javarino"},"score":0,"creation_date":1575307543,"post_id":59143792,"comment_id":104513928,"body_markdown":"yeah well it says openjdk version 1.8 right there. Not sure how it&#39;s done on windows, but look into how to get path to the actual java.exe being called by cmd","body":"yeah well it says openjdk version 1.8 right there. Not sure how it&#39;s done on windows, but look into how to get path to the actual java.exe being called by cmd"},{"owner":{"account_id":11573210,"reputation":774,"user_id":8479386,"display_name":"Karan"},"score":0,"creation_date":1575307860,"post_id":59143792,"comment_id":104514057,"body_markdown":"@KarthikeyanVaithilingam, no that doesn&#39;t as I have java SE 13.","body":"@KarthikeyanVaithilingam, no that doesn&#39;t as I have java SE 13."},{"owner":{"account_id":11573210,"reputation":774,"user_id":8479386,"display_name":"Karan"},"score":0,"creation_date":1575307945,"post_id":59143792,"comment_id":104514087,"body_markdown":"@CoderinoJavarino, Yes I just saw that, I removed java before installing new Java SE 13. Now, trying to figure out to remove this openjdk as it is not showing on my control panel.","body":"@CoderinoJavarino, Yes I just saw that, I removed java before installing new Java SE 13. Now, trying to figure out to remove this openjdk as it is not showing on my control panel."}],"answers":[{"tags":[],"owner":{"account_id":11573210,"reputation":774,"user_id":8479386,"display_name":"Karan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1575312051,"creation_date":1575312051,"answer_id":59144909,"question_id":59143792,"body_markdown":"The issue was that some applications come with their own JRE and sometimes the installed JDK appears at lower priority level in environment path. Now there are two options:\r\n\r\nUninstall the other application which has their own JDK/JRE.\r\nSometimes it is not possible to remove the other application, which was my case. So I moved JDk installed by me to higher priority level in environment path.\r\n\r\nThe image for environment variable is uploaded at this [similar question][1].\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/59144840/8479386","title":"class file version 57.0, this version of the Java Runtime only recognizes class file versions up to 52.0","body":"<p>The issue was that some applications come with their own JRE and sometimes the installed JDK appears at lower priority level in environment path. Now there are two options:</p>\n\n<p>Uninstall the other application which has their own JDK/JRE.\nSometimes it is not possible to remove the other application, which was my case. So I moved JDk installed by me to higher priority level in environment path.</p>\n\n<p>The image for environment variable is uploaded at this <a href=\"https://stackoverflow.com/a/59144840/8479386\">similar question</a>.</p>\n"}],"owner":{"account_id":11573210,"reputation":774,"user_id":8479386,"display_name":"Karan"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":18467,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"closed_date":1649778219,"answer_count":1,"score":5,"last_activity_date":1649768475,"creation_date":1575307185,"question_id":59143792,"body_markdown":"This question is very similar to [this question][1] except the environment and the way I am getting this error. I also tried solution provided in the answer but no luck.\r\n\r\nI am using Eclipse for developing a Spring Boot Application on Computer1. The JDK/JRE version on Computer1 and Eclipse is JDK 13.0.1. \r\n\r\n[![JDK/JRE version][2]][2]\r\n\r\nNow, I created a fat-JAR using eclipse mvn install and copied fat-JAR to Computer2. When I run the JAR file on Computer2 then I get the following error\r\n\r\n[![enter image description here][3]][3]\r\n\r\n\r\nOn Computer2 I have JDK 13.0.1 installed and environment variable set. I removed the path &quot;***C:\\Program Files (x86)\\Common Files\\Oracle\\Java\\javapath***&quot; from my Environment path as suggested by [this similar question][1].\r\n\r\nAny idea/suggestion how to resolve this issue.\r\n\r\n  [1]: https://stackoverflow.com/questions/58125830/has-been-compiled-by-a-more-recent-version-of-the-java-runtime-class-file-versi\r\n  [2]: https://i.stack.imgur.com/AVJsH.jpg\r\n  [3]: https://i.stack.imgur.com/q6EbN.jpg","title":"class file version 57.0, this version of the Java Runtime only recognizes class file versions up to 52.0","body":"<p>This question is very similar to <a href=\"https://stackoverflow.com/questions/58125830/has-been-compiled-by-a-more-recent-version-of-the-java-runtime-class-file-versi\">this question</a> except the environment and the way I am getting this error. I also tried solution provided in the answer but no luck.</p>\n\n<p>I am using Eclipse for developing a Spring Boot Application on Computer1. The JDK/JRE version on Computer1 and Eclipse is JDK 13.0.1. </p>\n\n<p><a href=\"https://i.stack.imgur.com/AVJsH.jpg\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/AVJsH.jpg\" alt=\"JDK/JRE version\"></a></p>\n\n<p>Now, I created a fat-JAR using eclipse mvn install and copied fat-JAR to Computer2. When I run the JAR file on Computer2 then I get the following error</p>\n\n<p><a href=\"https://i.stack.imgur.com/q6EbN.jpg\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/q6EbN.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>On Computer2 I have JDK 13.0.1 installed and environment variable set. I removed the path \"<strong><em>C:\\Program Files (x86)\\Common Files\\Oracle\\Java\\javapath</em></strong>\" from my Environment path as suggested by <a href=\"https://stackoverflow.com/questions/58125830/has-been-compiled-by-a-more-recent-version-of-the-java-runtime-class-file-versi\">this similar question</a>.</p>\n\n<p>Any idea/suggestion how to resolve this issue.</p>\n"},{"tags":["java","spring-boot","rest"],"comments":[{"owner":{"account_id":45934,"reputation":203669,"user_id":135589,"accept_rate":100,"display_name":"Jesper"},"score":2,"creation_date":1649763780,"post_id":71841945,"comment_id":126953667,"body_markdown":"&quot;They&#39;re not working&quot; =&gt; What does that mean exactly? Do you get an error message? If so, then what is the error message?","body":"&quot;They&#39;re not working&quot; =&gt; What does that mean exactly? Do you get an error message? If so, then what is the error message?"},{"owner":{"account_id":24732243,"reputation":93,"user_id":18620084,"display_name":"eagerdev"},"score":0,"creation_date":1649763828,"post_id":71841945,"comment_id":126953691,"body_markdown":"{\n    &quot;timestamp&quot;: &quot;2022-04-12T11:43:27.628+00:00&quot;,\n    &quot;status&quot;: 500,\n    &quot;error&quot;: &quot;Internal Server Error&quot;,\n    &quot;path&quot;: &quot;/v1/api/comment/getAll&quot;\n}","body":"{     &quot;timestamp&quot;: &quot;2022-04-12T11:43:27.628+00:00&quot;,     &quot;status&quot;: 500,     &quot;error&quot;: &quot;Internal Server Error&quot;,     &quot;path&quot;: &quot;/v1/api/comment/getAll&quot; }"},{"owner":{"account_id":45934,"reputation":203669,"user_id":135589,"accept_rate":100,"display_name":"Jesper"},"score":1,"creation_date":1649765078,"post_id":71841945,"comment_id":126954227,"body_markdown":"Do you see anything in the logging on the server?","body":"Do you see anything in the logging on the server?"},{"owner":{"account_id":24732243,"reputation":93,"user_id":18620084,"display_name":"eagerdev"},"score":0,"creation_date":1649767658,"post_id":71841945,"comment_id":126955214,"body_markdown":"It gives Internal Server Error for existing users.  For the non existing users it gives 400 Bad Request.","body":"It gives Internal Server Error for existing users.  For the non existing users it gives 400 Bad Request."},{"owner":{"account_id":5075886,"reputation":237,"user_id":4073249,"display_name":"Alper Derya"},"score":0,"creation_date":1649767961,"post_id":71841945,"comment_id":126955371,"body_markdown":"@eagerdev You do not have &quot;user&quot; parameter in your rest api or service method. Is there something that you don&#39;t share?","body":"@eagerdev You do not have &quot;user&quot; parameter in your rest api or service method. Is there something that you don&#39;t share?"},{"owner":{"account_id":10975071,"reputation":1097,"user_id":8064000,"display_name":"v8-E"},"score":0,"creation_date":1649773907,"post_id":71841945,"comment_id":126957942,"body_markdown":"you are getting null pointer exception, public List&lt;CommentDto&gt; getAllComments() is failing","body":"you are getting null pointer exception, public List&lt;CommentDto&gt; getAllComments() is failing"}],"owner":{"account_id":24732243,"reputation":93,"user_id":18620084,"display_name":"eagerdev"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":61,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1649768213,"creation_date":1649763398,"question_id":71841945,"body_markdown":"I wrote a few service methods. When I implement `CommandLineRunner` to my `SpringApplication` and try to execute service methods in run methods I can see they&#39;re working. \r\n\r\nI mean like this approach,  I can reach the data via service methods. So I can say yes my services are working right.\r\n\r\n\r\n          public void run(String... args) throws Exception {\r\n\r\n          postService.getAllPost()\r\n                .stream()\r\n                .forEach(entry -&gt; System.out.println(entry.getTitle()));\r\n \r\n          }\r\n\r\nBut When I try to use my controllers via postman.  For the User class, everything is fine.\r\n\r\n\r\n      public List&lt;UserDto&gt; getAllUsers() {\r\n\r\n        return userRepository.findAll()\r\n                .stream()\r\n                .map(userMapper::toDto)\r\n                .collect(toList());\r\n       }\r\n\r\n\r\n           @GetMapping(&quot;/get&quot;)\r\n    public ResponseEntity&lt;List&lt;UserDto&gt;&gt; getAll() {\r\n\r\n        return ResponseEntity.ok(userService.getAllUsers());\r\n    }\r\n\r\n\r\n\r\n But Comment and Post are not working.\r\nThe methods are almost same. I was wondering is it about my entities relation? Because in User entity I just have 3 different field which is Long, String , String . But the other  entities are related with each others. With OneToMany relational. And I dont trust about my business plan. I mean post class includes user and comment object. Comment class includes user object etc.\r\n\r\n This is controller method.\r\n\r\n    @GetMapping(&quot;/getAll&quot;)\r\n\r\n     public ResponseEntity&lt;List&lt;CommentDto&gt;&gt; fetchAll() {\r\n\r\n        return ResponseEntity.ok(commentService.getAllComments());\r\n     }\r\n\r\n\r\nThis is service method.\r\n\r\n      public List&lt;CommentDto&gt; getAllComments() {\r\n    \r\n        return commentRepository.findAll().stream()\r\n                .map(commentMapper::toDto)\r\n                .collect(Collectors.toList());\r\n\r\n     }\r\n\r\n     \r\n\r\n\r\n\r\n\r\nI have three different entity class.\r\n\r\nWhich is \r\n\r\n\r\n    @Entity\r\n    @Table(name = &quot;user_table&quot;)\r\n    public class User{\r\n\r\n    @Id\r\n    private Long id;\r\n    private String userName;\r\n    private String password; \r\n    }\r\n\r\n\r\n    @Entity\r\n    @Table(name = &quot;post_table&quot;)\r\n    public class Post {\r\n\r\n    @Id\r\n    private Long id;\r\n\r\n    @ManyToOne(fetch = FetchType.LAZY)\r\n    @JoinColumn(name = &quot;user_id&quot; , nullable = false)\r\n    @OnDelete(action = OnDeleteAction.CASCADE)\r\n    @JsonIgnore\r\n    private User user;\r\n\r\n    private String title;\r\n    @Lob\r\n    @Column(columnDefinition = &quot;text&quot;)\r\n    private String text;\r\n    }\r\n\r\n\r\n    @Entity\r\n    @Table(name = &quot;comment_table&quot;)\r\n\r\n    public class Comment {\r\n\r\n    @Id\r\n    private Long id;\r\n    @ManyToOne(fetch = FetchType.LAZY)\r\n    @JoinColumn(name = &quot;post_id&quot; , nullable = false)\r\n    @OnDelete(action = OnDeleteAction.CASCADE)\r\n    @JsonIgnore\r\n    private Post post;\r\n\r\n\r\n    @ManyToOne(fetch = FetchType.LAZY)\r\n    @JoinColumn(name = &quot;user_id&quot; , nullable = false)\r\n    @OnDelete(action = OnDeleteAction.CASCADE)\r\n    @JsonIgnore\r\n    private User user;\r\n\r\n    @Lob\r\n    @Column(columnDefinition = &quot;text&quot;)\r\n    private String text;","title":"SpringBoot RestAPI Controller methods are not working","body":"<p>I wrote a few service methods. When I implement <code>CommandLineRunner</code> to my <code>SpringApplication</code> and try to execute service methods in run methods I can see they're working.</p>\n<p>I mean like this approach,  I can reach the data via service methods. So I can say yes my services are working right.</p>\n<pre><code>      public void run(String... args) throws Exception {\n\n      postService.getAllPost()\n            .stream()\n            .forEach(entry -&gt; System.out.println(entry.getTitle()));\n\n      }\n</code></pre>\n<p>But When I try to use my controllers via postman.  For the User class, everything is fine.</p>\n<pre><code>  public List&lt;UserDto&gt; getAllUsers() {\n\n    return userRepository.findAll()\n            .stream()\n            .map(userMapper::toDto)\n            .collect(toList());\n   }\n\n\n       @GetMapping(&quot;/get&quot;)\npublic ResponseEntity&lt;List&lt;UserDto&gt;&gt; getAll() {\n\n    return ResponseEntity.ok(userService.getAllUsers());\n}\n</code></pre>\n<p>But Comment and Post are not working.\nThe methods are almost same. I was wondering is it about my entities relation? Because in User entity I just have 3 different field which is Long, String , String . But the other  entities are related with each others. With OneToMany relational. And I dont trust about my business plan. I mean post class includes user and comment object. Comment class includes user object etc.</p>\n<p>This is controller method.</p>\n<pre><code>@GetMapping(&quot;/getAll&quot;)\n\n public ResponseEntity&lt;List&lt;CommentDto&gt;&gt; fetchAll() {\n\n    return ResponseEntity.ok(commentService.getAllComments());\n }\n</code></pre>\n<p>This is service method.</p>\n<pre><code>  public List&lt;CommentDto&gt; getAllComments() {\n\n    return commentRepository.findAll().stream()\n            .map(commentMapper::toDto)\n            .collect(Collectors.toList());\n\n }\n\n \n</code></pre>\n<p>I have three different entity class.</p>\n<p>Which is</p>\n<pre><code>@Entity\n@Table(name = &quot;user_table&quot;)\npublic class User{\n\n@Id\nprivate Long id;\nprivate String userName;\nprivate String password; \n}\n\n\n@Entity\n@Table(name = &quot;post_table&quot;)\npublic class Post {\n\n@Id\nprivate Long id;\n\n@ManyToOne(fetch = FetchType.LAZY)\n@JoinColumn(name = &quot;user_id&quot; , nullable = false)\n@OnDelete(action = OnDeleteAction.CASCADE)\n@JsonIgnore\nprivate User user;\n\nprivate String title;\n@Lob\n@Column(columnDefinition = &quot;text&quot;)\nprivate String text;\n}\n\n\n@Entity\n@Table(name = &quot;comment_table&quot;)\n\npublic class Comment {\n\n@Id\nprivate Long id;\n@ManyToOne(fetch = FetchType.LAZY)\n@JoinColumn(name = &quot;post_id&quot; , nullable = false)\n@OnDelete(action = OnDeleteAction.CASCADE)\n@JsonIgnore\nprivate Post post;\n\n\n@ManyToOne(fetch = FetchType.LAZY)\n@JoinColumn(name = &quot;user_id&quot; , nullable = false)\n@OnDelete(action = OnDeleteAction.CASCADE)\n@JsonIgnore\nprivate User user;\n\n@Lob\n@Column(columnDefinition = &quot;text&quot;)\nprivate String text;\n</code></pre>\n"},{"tags":["java","spring-boot"],"comments":[{"owner":{"account_id":466701,"reputation":3379,"user_id":871611,"accept_rate":80,"display_name":"user871611"},"score":0,"creation_date":1550057189,"post_id":54668946,"comment_id":96128095,"body_markdown":"Please provide the full response (or exception) in your question.","body":"Please provide the full response (or exception) in your question."},{"owner":{"account_id":8503655,"reputation":1414,"user_id":6375917,"display_name":"TongChen"},"score":0,"creation_date":1550057433,"post_id":54668946,"comment_id":96128233,"body_markdown":"Possible duplicate of [Call another rest api from my server in Spring-Boot](https://stackoverflow.com/questions/42365266/call-another-rest-api-from-my-server-in-spring-boot)","body":"Possible duplicate of <a href=\"https://stackoverflow.com/questions/42365266/call-another-rest-api-from-my-server-in-spring-boot\">Call another rest api from my server in Spring-Boot</a>"},{"owner":{"account_id":7101356,"reputation":1190,"user_id":5432763,"display_name":"Arpit Agrawal"},"score":0,"creation_date":1550057621,"post_id":54668946,"comment_id":96128344,"body_markdown":"What is the data type of your APP_ID? if its 17 digits, why not declare it as Long instead of Int. Anyway JSON object only has Number as datatype so Int or Long it will go same way.","body":"What is the data type of your APP_ID? if its 17 digits, why not declare it as Long instead of Int. Anyway JSON object only has Number as datatype so Int or Long it will go same way."},{"owner":{"account_id":219684,"reputation":37257,"user_id":476716,"accept_rate":77,"display_name":"OrangeDog"},"score":1,"creation_date":1550057822,"post_id":54668946,"comment_id":96128465,"body_markdown":"You should let Spring inject the properly-configured RestTemplate, not make a new one for every request.","body":"You should let Spring inject the properly-configured RestTemplate, not make a new one for every request."}],"answers":[{"tags":[],"owner":{"account_id":15033351,"reputation":46,"user_id":10850637,"display_name":"Sumit datta"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1550057693,"creation_date":1550057693,"answer_id":54669217,"question_id":54668946,"body_markdown":"JSONObject will accept value of type object so you can convert the appId value to long or any other data types that is accepted in the remote http call.\r\n","title":"How to send a HTTP request in Spring boot framework?","body":"<p>JSONObject will accept value of type object so you can convert the appId value to long or any other data types that is accepted in the remote http call.</p>\n"}],"owner":{"account_id":15324504,"reputation":1,"user_id":11056019,"display_name":"Nick Lin"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":4231,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1649767725,"creation_date":1550056731,"question_id":54668946,"body_markdown":"I want to send a POST request with a JSON object to a specified URL, but it always failed.\r\n\r\nI have already check every data to make sure they are correct, but when I send them, they seems to be changed, so that the destination server cannot process my request correctly.\r\n\r\n     public static String translate(String query, String from, String to) {\r\n        JSONObject response = new JSONObject();\r\n        JSONObject request = new JSONObject();\r\n\r\n        //Generate a random number\r\n        int salt = getRandom();\r\n\r\n        //Generate the sign\r\n        String sign = encodeMD5Hex(APP_ID + query + salt + KEY);\r\n\r\n        //Put all parameters into the request\r\n        request.put(&quot;q&quot;, query);\r\n        request.put(&quot;from&quot;, from);\r\n        request.put(&quot;to&quot;, to);\r\n        request.put(&quot;appid&quot;, APP_ID);\r\n        request.put(&quot;salt&quot;, salt);\r\n        request.put(&quot;sign&quot;, sign);\r\n\r\n        return sendPOSTRequest(request);\r\n    }\r\n\r\n    private static String encodeMD5Hex(String data){\r\n        return DigestUtils.md5Hex(data);\r\n    }\r\n\r\n    private static int getRandom() {\r\n        return (int) ((Math.random() + 1) * 10000);\r\n    }\r\n\r\n    private static String sendPOSTRequest(JSONObject data) {\r\n        RestTemplate restTemplate = new RestTemplate();\r\n        HttpHeaders headers = new HttpHeaders();\r\n        headers.setContentType(MediaType.APPLICATION_JSON);\r\n\r\n        HttpEntity&lt;JSONObject&gt; entity = new HttpEntity(data, headers);\r\n        String answer = restTemplate.postForObject(BAIDU_TRANS_API_URL, entity, String.class);\r\n        return answer;\r\n    }\r\nI guess it&#39;s probably wrong in appid. Response always tell me I have a incorrect appid even I have 100% sure it&#39;s correct. And here is the format of appid parameter:\r\n  name: appid\r\n  type: INT\r\nBut a 17 digits number&#39;s int is totally out of range.\r\n\r\nResponse:\r\n{&quot;error_code&quot;:&quot;52003&quot;,&quot;error_msg&quot;:&quot;UNAUTHORIZED USER&quot;}\r\n\r\n","title":"How to send a HTTP request in Spring boot framework?","body":"<p>I want to send a POST request with a JSON object to a specified URL, but it always failed.</p>\n\n<p>I have already check every data to make sure they are correct, but when I send them, they seems to be changed, so that the destination server cannot process my request correctly.</p>\n\n<pre><code> public static String translate(String query, String from, String to) {\n    JSONObject response = new JSONObject();\n    JSONObject request = new JSONObject();\n\n    //Generate a random number\n    int salt = getRandom();\n\n    //Generate the sign\n    String sign = encodeMD5Hex(APP_ID + query + salt + KEY);\n\n    //Put all parameters into the request\n    request.put(\"q\", query);\n    request.put(\"from\", from);\n    request.put(\"to\", to);\n    request.put(\"appid\", APP_ID);\n    request.put(\"salt\", salt);\n    request.put(\"sign\", sign);\n\n    return sendPOSTRequest(request);\n}\n\nprivate static String encodeMD5Hex(String data){\n    return DigestUtils.md5Hex(data);\n}\n\nprivate static int getRandom() {\n    return (int) ((Math.random() + 1) * 10000);\n}\n\nprivate static String sendPOSTRequest(JSONObject data) {\n    RestTemplate restTemplate = new RestTemplate();\n    HttpHeaders headers = new HttpHeaders();\n    headers.setContentType(MediaType.APPLICATION_JSON);\n\n    HttpEntity&lt;JSONObject&gt; entity = new HttpEntity(data, headers);\n    String answer = restTemplate.postForObject(BAIDU_TRANS_API_URL, entity, String.class);\n    return answer;\n}\n</code></pre>\n\n<p>I guess it's probably wrong in appid. Response always tell me I have a incorrect appid even I have 100% sure it's correct. And here is the format of appid parameter:\n  name: appid\n  type: INT\nBut a 17 digits number's int is totally out of range.</p>\n\n<p>Response:\n{\"error_code\":\"52003\",\"error_msg\":\"UNAUTHORIZED USER\"}</p>\n"},{"tags":["java","list"],"comments":[{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1420340318,"post_id":11512034,"comment_id":43935034,"body_markdown":"It can&#39;t. An NPE would be thrown before it could be invoked.","body":"It can&#39;t. An NPE would be thrown before it could be invoked."},{"owner":{"account_id":3446101,"reputation":11355,"user_id":2886891,"accept_rate":75,"display_name":"Honza Zidek"},"score":1,"creation_date":1457091584,"post_id":11512034,"comment_id":59259931,"body_markdown":"This (&quot;Will this throw a NullPointerException because test is null?&quot;) is actually a very wrongly formulated question. You can easily test this question via a very simple test. The question itself of course takes to considering deeper insight into how the references in Java work, why is Java designed so this is not possible, but then you should have asked differently.","body":"This (&quot;Will this throw a NullPointerException because test is null?&quot;) is actually a very wrongly formulated question. You can easily test this question via a very simple test. The question itself of course takes to considering deeper insight into how the references in Java work, why is Java designed so this is not possible, but then you should have asked differently."}],"answers":[{"tags":[],"owner":{"account_id":234840,"reputation":160679,"user_id":501250,"accept_rate":75,"display_name":"cdhowie"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1342470815,"creation_date":1342470815,"answer_id":11512077,"question_id":11512034,"body_markdown":"Invoking any method on any null reference will always result in an exception.  Test if the object is null first:\r\n\r\n    List&lt;Object&gt; test = null;\r\n    if (test != null &amp;&amp; !test.isEmpty()) {\r\n        // ...\r\n    }\r\n\r\nAlternatively, write a method to encapsulate this logic:\r\n\r\n    public static &lt;T&gt; boolean IsNullOrEmpty(Collection&lt;T&gt; list) {\r\n        return list == null || list.isEmpty();\r\n    }\r\n\r\nThen you can do:\r\n\r\n    List&lt;Object&gt; test = null;\r\n    if (!IsNullOrEmpty(test)) {\r\n        // ...\r\n    }","title":"Does java.util.List.isEmpty() check if the list itself is null?","body":"<p>Invoking any method on any null reference will always result in an exception.  Test if the object is null first:</p>\n\n<pre><code>List&lt;Object&gt; test = null;\nif (test != null &amp;&amp; !test.isEmpty()) {\n    // ...\n}\n</code></pre>\n\n<p>Alternatively, write a method to encapsulate this logic:</p>\n\n<pre><code>public static &lt;T&gt; boolean IsNullOrEmpty(Collection&lt;T&gt; list) {\n    return list == null || list.isEmpty();\n}\n</code></pre>\n\n<p>Then you can do:</p>\n\n<pre><code>List&lt;Object&gt; test = null;\nif (!IsNullOrEmpty(test)) {\n    // ...\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":351587,"reputation":7197,"user_id":688161,"accept_rate":84,"display_name":"aufziehvogel"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1645030861,"creation_date":1342470823,"answer_id":11512084,"question_id":11512034,"body_markdown":"Yes, it will **throw an Exception**. Maybe you are used to **PHP** code, where `empty($element)` does also check for `isset($element)`. In Java this is not the case.\r\n\r\nYou can memorize that easily, because the method is directly called on the list (the method belongs to the list). So if there is no list, then there is no method. And Java will complain that there is no list to call this method on.\r\n\r\n\r\n","title":"Does java.util.List.isEmpty() check if the list itself is null?","body":"<p>Yes, it will <strong>throw an Exception</strong>. Maybe you are used to <strong>PHP</strong> code, where <code>empty($element)</code> does also check for <code>isset($element)</code>. In Java this is not the case.</p>\n<p>You can memorize that easily, because the method is directly called on the list (the method belongs to the list). So if there is no list, then there is no method. And Java will complain that there is no list to call this method on.</p>\n"},{"tags":[],"owner":{"account_id":102718,"reputation":59065,"user_id":275567,"display_name":"pb2q"},"down_vote_count":0,"up_vote_count":21,"is_accepted":false,"score":21,"last_activity_date":1385530330,"creation_date":1342470825,"answer_id":11512085,"question_id":11512034,"body_markdown":"This **will** throw a `NullPointerException` - as will any attempt to invoke an instance method on a `null` reference - but in cases like this you should make an explicit check against `null`:\r\n\r\n    if ((test != null) &amp;&amp; !test.isEmpty())\r\n\r\nThis is much better, and clearer, than propagating an `Exception`.\r\n","title":"Does java.util.List.isEmpty() check if the list itself is null?","body":"<p>This <strong>will</strong> throw a <code>NullPointerException</code> - as will any attempt to invoke an instance method on a <code>null</code> reference - but in cases like this you should make an explicit check against <code>null</code>:</p>\n\n<pre><code>if ((test != null) &amp;&amp; !test.isEmpty())\n</code></pre>\n\n<p>This is much better, and clearer, than propagating an <code>Exception</code>.</p>\n"},{"tags":[],"owner":{"account_id":1028420,"reputation":18799,"user_id":1037210,"accept_rate":100,"display_name":"Lion"},"down_vote_count":1,"up_vote_count":161,"is_accepted":true,"score":160,"last_activity_date":1645030942,"creation_date":1342470852,"answer_id":11512091,"question_id":11512034,"body_markdown":"You&#39;re trying to call the `isEmpty()` method on a `null` reference (as `List test = null;`). This will surely throw a `NullPointerException`. You should do `if(test!=null)` instead (checking for `null` first).\r\n\r\nThe method `isEmpty()` returns true, if an `ArrayList` object contains no elements; false otherwise (for that the `List` must first be instantiated that is in your case is `null`).\r\n\r\nYou may want to see [this question][1].\r\n\r\n  [1]: https://stackoverflow.com/questions/4802015/difference-between-null-and-java-string\r\n\r\n\r\n\r\n\r\n\r\n\r\n","title":"Does java.util.List.isEmpty() check if the list itself is null?","body":"<p>You're trying to call the <code>isEmpty()</code> method on a <code>null</code> reference (as <code>List test = null;</code>). This will surely throw a <code>NullPointerException</code>. You should do <code>if(test!=null)</code> instead (checking for <code>null</code> first).</p>\n<p>The method <code>isEmpty()</code> returns true, if an <code>ArrayList</code> object contains no elements; false otherwise (for that the <code>List</code> must first be instantiated that is in your case is <code>null</code>).</p>\n<p>You may want to see <a href=\"https://stackoverflow.com/questions/4802015/difference-between-null-and-java-string\">this question</a>.</p>\n"},{"tags":[],"owner":{"account_id":164246,"reputation":1654,"user_id":386880,"display_name":"cschaefer"},"down_vote_count":0,"up_vote_count":143,"is_accepted":false,"score":143,"last_activity_date":1649767653,"creation_date":1364297038,"answer_id":15635821,"question_id":11512034,"body_markdown":"I would recommend using [Apache Commons][1] Collections:\r\n\r\nhttps://commons.apache.org/proper/commons-collections/apidocs/org/apache/commons/collections4/CollectionUtils.html#isEmpty-java.util.Collection-\r\n\r\nwhich implements it quite ok and well documented:\r\n\r\n    /**\r\n     * Null-safe check if the specified collection is empty.\r\n     * &lt;p&gt;\r\n     * Null returns true.\r\n     *\r\n     * @param coll  the collection to check, may be null\r\n     * @return true if empty or null\r\n     * @since Commons Collections 3.2\r\n     */\r\n    public static boolean isEmpty(Collection coll) {\r\n        return (coll == null || coll.isEmpty());\r\n    }\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Apache_Commons\r\n\r\n\r\n","title":"Does java.util.List.isEmpty() check if the list itself is null?","body":"<p>I would recommend using <a href=\"https://en.wikipedia.org/wiki/Apache_Commons\" rel=\"noreferrer\">Apache Commons</a> Collections:</p>\n<p><a href=\"https://commons.apache.org/proper/commons-collections/apidocs/org/apache/commons/collections4/CollectionUtils.html#isEmpty-java.util.Collection-\" rel=\"noreferrer\">https://commons.apache.org/proper/commons-collections/apidocs/org/apache/commons/collections4/CollectionUtils.html#isEmpty-java.util.Collection-</a></p>\n<p>which implements it quite ok and well documented:</p>\n<pre><code>/**\n * Null-safe check if the specified collection is empty.\n * &lt;p&gt;\n * Null returns true.\n *\n * @param coll  the collection to check, may be null\n * @return true if empty or null\n * @since Commons Collections 3.2\n */\npublic static boolean isEmpty(Collection coll) {\n    return (coll == null || coll.isEmpty());\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3628170,"reputation":2794,"user_id":3060279,"accept_rate":60,"display_name":"lxknvlk"},"down_vote_count":1,"up_vote_count":8,"is_accepted":false,"score":7,"last_activity_date":1645031255,"creation_date":1436173767,"answer_id":31241814,"question_id":11512034,"body_markdown":"In addition to [Lion&#39;s answer][1], I can say that you better use `if(CollectionUtils.isNotEmpty(test)){...}`.\r\n\r\nThis also checks for null, so a manual check is not needed.\r\n\r\n  [1]: https://stackoverflow.com/questions/11512034/does-java-util-list-isempty-check-if-the-list-itself-is-null/11512091#11512091\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","title":"Does java.util.List.isEmpty() check if the list itself is null?","body":"<p>In addition to <a href=\"https://stackoverflow.com/questions/11512034/does-java-util-list-isempty-check-if-the-list-itself-is-null/11512091#11512091\">Lion's answer</a>, I can say that you better use <code>if(CollectionUtils.isNotEmpty(test)){...}</code>.</p>\n<p>This also checks for null, so a manual check is not needed.</p>\n"},{"tags":[],"owner":{"account_id":3719338,"reputation":12130,"user_id":3094731,"accept_rate":56,"display_name":"Abdullah Khan"},"down_vote_count":0,"up_vote_count":33,"is_accepted":false,"score":33,"last_activity_date":1645031763,"creation_date":1472095811,"answer_id":39136235,"question_id":11512034,"body_markdown":"No, `java.util.List.isEmpty()` doesn&#39;t check if a list is `null`.\r\n\r\nIf you are using the [Spring][1] framework you can use the `CollectionUtils` class to check if a list is empty or not. It also takes care of the `null` references. Following is the code snippet from Spring framework&#39;s `CollectionUtils` class.\r\n\r\n    public static boolean isEmpty(Collection&lt;?&gt; collection) {\r\n        return (collection == null || collection.isEmpty());\r\n    }\r\n\r\nEven if you are not using Spring, you can go on and tweak this code to add in your `AppUtil` class.\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Spring_Framework\r\n\r\n\r\n\r\n\r\n","title":"Does java.util.List.isEmpty() check if the list itself is null?","body":"<p>No, <code>java.util.List.isEmpty()</code> doesn't check if a list is <code>null</code>.</p>\n<p>If you are using the <a href=\"https://en.wikipedia.org/wiki/Spring_Framework\" rel=\"noreferrer\">Spring</a> framework you can use the <code>CollectionUtils</code> class to check if a list is empty or not. It also takes care of the <code>null</code> references. Following is the code snippet from Spring framework's <code>CollectionUtils</code> class.</p>\n<pre><code>public static boolean isEmpty(Collection&lt;?&gt; collection) {\n    return (collection == null || collection.isEmpty());\n}\n</code></pre>\n<p>Even if you are not using Spring, you can go on and tweak this code to add in your <code>AppUtil</code> class.</p>\n"},{"tags":[],"owner":{"account_id":3268751,"reputation":1481,"user_id":2752615,"accept_rate":67,"display_name":"Arif Acar"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1645031829,"creation_date":1497598941,"answer_id":44583605,"question_id":11512034,"body_markdown":"You can use your own isEmpty (for multiple collection) method too. Add this to your Util class.\r\n\r\n    public static boolean isEmpty(Collection... collections) {\r\n        for (Collection collection : collections) {\r\n            if (null == collection || collection.isEmpty())\r\n                return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n\r\n","title":"Does java.util.List.isEmpty() check if the list itself is null?","body":"<p>You can use your own isEmpty (for multiple collection) method too. Add this to your Util class.</p>\n<pre><code>public static boolean isEmpty(Collection... collections) {\n    for (Collection collection : collections) {\n        if (null == collection || collection.isEmpty())\n            return true;\n    }\n    return false;\n}\n</code></pre>\n"}],"owner":{"account_id":457400,"reputation":5070,"user_id":856696,"accept_rate":71,"display_name":"K&#39;&#39;"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":489269,"favorite_count":0,"down_vote_count":8,"up_vote_count":163,"closed_date":1502874091,"accepted_answer_id":11512091,"answer_count":8,"score":155,"last_activity_date":1649767653,"creation_date":1342470612,"question_id":11512034,"body_markdown":"Does `java.util.List.isEmpty()` check if the list itself is `null`, or do I have to do this check myself?\r\n\r\nFor example:\r\n\r\n    List&lt;String&gt; test = null;\r\n\r\n    if (!test.isEmpty()) {\r\n        for (String o : test) {\r\n            // do stuff here\t\t\t\r\n        }\r\n    }\r\n\r\n\r\nWill this throw a `NullPointerException` because test is `null`?","title":"Does java.util.List.isEmpty() check if the list itself is null?","body":"<p>Does <code>java.util.List.isEmpty()</code> check if the list itself is <code>null</code>, or do I have to do this check myself?</p>\n\n<p>For example:</p>\n\n<pre><code>List&lt;String&gt; test = null;\n\nif (!test.isEmpty()) {\n    for (String o : test) {\n        // do stuff here            \n    }\n}\n</code></pre>\n\n<p>Will this throw a <code>NullPointerException</code> because test is <code>null</code>?</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":8556,"page":1436,"page_size":100}
