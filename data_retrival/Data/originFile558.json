{"items":[{"tags":["java","linux"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1679273291,"post_id":75785784,"comment_id":133686658,"body_markdown":"What exactly makes you think you should get 165?","body":"What exactly makes you think you should get 165?"},{"owner":{"account_id":26819449,"reputation":3,"user_id":20409012,"display_name":"Shringe_"},"score":0,"creation_date":1679273461,"post_id":75785784,"comment_id":133686679,"body_markdown":"tgdavies because I&#39;m using a 165HZ monitor.","body":"tgdavies because I&#39;m using a 165HZ monitor."},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1679273810,"post_id":75785784,"comment_id":133686718,"body_markdown":"Monitors can usually be driven at a range of frequencies -- that 165Hz is probably the maximum the monitor can do, rather than the only frequency you can drive it at.","body":"Monitors can usually be driven at a range of frequencies -- that 165Hz is probably the maximum the monitor can do, rather than the only frequency you can drive it at."},{"owner":{"account_id":23659651,"reputation":104,"user_id":17687406,"display_name":"mi1000"},"score":0,"creation_date":1679274052,"post_id":75785784,"comment_id":133686746,"body_markdown":"Why wouldn&#39;t you have 50 Hz ? Your monitor is able to refresh 165 times per second but that doesn&#39;t mean it actually does it all the time","body":"Why wouldn&#39;t you have 50 Hz ? Your monitor is able to refresh 165 times per second but that doesn&#39;t mean it actually does it all the time"},{"owner":{"account_id":26819449,"reputation":3,"user_id":20409012,"display_name":"Shringe_"},"score":0,"creation_date":1679274488,"post_id":75785784,"comment_id":133686800,"body_markdown":"mi1000 and tgdavies, I added the output of &quot;xrandr -q&quot; to the post proving that it is set to 165HZ.","body":"mi1000 and tgdavies, I added the output of &quot;xrandr -q&quot; to the post proving that it is set to 165HZ."},{"owner":{"account_id":3557625,"reputation":198996,"user_id":2970947,"display_name":"Elliott Frisch"},"score":0,"creation_date":1679275258,"post_id":75785784,"comment_id":133686873,"body_markdown":"Why do you want to know? This seems like a [XY problem](https://meta.stackexchange.com/a/66378/243725); you want to know the native display refresh rate **because** that will allow you to do what?","body":"Why do you want to know? This seems like a <a href=\"https://meta.stackexchange.com/a/66378/243725\">XY problem</a>; you want to know the native display refresh rate <b>because</b> that will allow you to do what?"},{"owner":{"account_id":26819449,"reputation":3,"user_id":20409012,"display_name":"Shringe_"},"score":0,"creation_date":1679281381,"post_id":75785784,"comment_id":133687453,"body_markdown":"Elliott Frisch I am using this to automatically set the framerate of my game but it is returning the wrong value on my PC.","body":"Elliott Frisch I am using this to automatically set the framerate of my game but it is returning the wrong value on my PC."},{"owner":{"account_id":3557625,"reputation":198996,"user_id":2970947,"display_name":"Elliott Frisch"},"score":0,"creation_date":1679328494,"post_id":75785784,"comment_id":133698081,"body_markdown":"@Shringe_ I find it highly unlikely that you can redraw 165 times a second in Java.","body":"@Shringe_ I find it highly unlikely that you can redraw 165 times a second in Java."},{"owner":{"account_id":26819449,"reputation":3,"user_id":20409012,"display_name":"Shringe_"},"score":0,"creation_date":1679333556,"post_id":75785784,"comment_id":133699579,"body_markdown":"Elliot Frisch my game is in very early development and I have a good computer so uncapped it reaches many thousands; However, the GraphicsEnvironment.getRefrshRate() function is returning the wrong value so it&#39;s being capped at 60 on my PC rather than 165 which would be correct.","body":"Elliot Frisch my game is in very early development and I have a good computer so uncapped it reaches many thousands; However, the GraphicsEnvironment.getRefrshRate() function is returning the wrong value so it&#39;s being capped at 60 on my PC rather than 165 which would be correct."}],"owner":{"account_id":26819449,"reputation":3,"user_id":20409012,"display_name":"Shringe_"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679413210,"creation_date":1679272471,"question_id":75785784,"body_markdown":"I&#39;ve been trying to obtain the refresh rate of the primary display in java via the GraphicsEnvironment class. For some reason on my desktop(single 165HZ monitor), it&#39;s returning 50 as my refresh rate instead of 165. On my 60HZ laptop, it&#39;s returning 60 just fine. Both are Linux(laptop LM, PC Manjaro), and I&#39;m not sure why it&#39;s not working properly on my PC but just fine on my laptop.\r\n\r\nHere are the file and results:\r\n\r\n\r\n```\r\nimport java.awt.GraphicsEnvironment;\r\n\r\nclass FileName {\r\n    public static void main(String[] args) {\r\n        int hrz = GraphicsEnvironment.getLocalGraphicsEnvironment().getScreenDevices()[0].getDisplayMode().getRefreshRate();\r\n\r\n        System.out.println(hrz);\r\n    }\r\n}\r\n```\r\n\r\n```\r\n[shringe@dashingkoso Refresh-Rate]$ javac FileName.java\r\n[shringe@dashingkoso Refresh-Rate]$ java FileName\r\n50\r\n[shringe@dashingkoso Refresh-Rate]$ \r\n```\r\n\r\nAny idea on why this is happening, or how I could fix this?\r\n\r\nedit:\r\n\r\nThe output of &quot;xrandr -q&quot; shows my display info and the * shows that 165HZ is selected under 2560x1440.\r\n\r\n    DP-0 connected primary 2560x1440+0+0 (normal left inverted right x axis y axis) 597mm x 336mm\r\n       2560x1440     59.95 + 165.00*  160.00   155.00   143.97   120.00  \r\n       1920x1080    119.88   100.00    60.00    59.94    50.00  \r\n       1440x900      59.89  \r\n       1440x576      50.00  \r\n       1280x1024     75.02    60.02  \r\n       1152x864      75.00  \r\n       1024x768      75.03    70.07    60.00  \r\n       800x600       75.00    72.19    60.32    56.25  \r\n       640x480       75.00    72.81    59.94","title":"How to fix GraphicsEnvironment.getRefreshRate() returning wrong value","body":"<p>I've been trying to obtain the refresh rate of the primary display in java via the GraphicsEnvironment class. For some reason on my desktop(single 165HZ monitor), it's returning 50 as my refresh rate instead of 165. On my 60HZ laptop, it's returning 60 just fine. Both are Linux(laptop LM, PC Manjaro), and I'm not sure why it's not working properly on my PC but just fine on my laptop.</p>\n<p>Here are the file and results:</p>\n<pre><code>import java.awt.GraphicsEnvironment;\n\nclass FileName {\n    public static void main(String[] args) {\n        int hrz = GraphicsEnvironment.getLocalGraphicsEnvironment().getScreenDevices()[0].getDisplayMode().getRefreshRate();\n\n        System.out.println(hrz);\n    }\n}\n</code></pre>\n<pre><code>[shringe@dashingkoso Refresh-Rate]$ javac FileName.java\n[shringe@dashingkoso Refresh-Rate]$ java FileName\n50\n[shringe@dashingkoso Refresh-Rate]$ \n</code></pre>\n<p>Any idea on why this is happening, or how I could fix this?</p>\n<p>edit:</p>\n<p>The output of &quot;xrandr -q&quot; shows my display info and the * shows that 165HZ is selected under 2560x1440.</p>\n<pre><code>DP-0 connected primary 2560x1440+0+0 (normal left inverted right x axis y axis) 597mm x 336mm\n   2560x1440     59.95 + 165.00*  160.00   155.00   143.97   120.00  \n   1920x1080    119.88   100.00    60.00    59.94    50.00  \n   1440x900      59.89  \n   1440x576      50.00  \n   1280x1024     75.02    60.02  \n   1152x864      75.00  \n   1024x768      75.03    70.07    60.00  \n   800x600       75.00    72.19    60.32    56.25  \n   640x480       75.00    72.81    59.94\n</code></pre>\n"},{"tags":["java","java-stream"],"answers":[{"tags":[],"owner":{"account_id":11683,"reputation":1438179,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1679410287,"creation_date":1679409943,"answer_id":75802678,"question_id":75802528,"body_markdown":"Firstly, I wouldn&#39;t expect `(char) c + 1` to work anyway, as that doesn&#39;t cast the *result* to `char`. It only casts `c` to `char`. You really wanted `.map(c -&gt; (char) (c + 1))`.\r\n\r\nHowever, that *still* results in an `IntStream`, because there&#39;s no such type as &quot;a stream of characters&quot;. [`String.chars()`](https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/lang/String.html#chars()) returns an [`IntStream`](https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/util/stream/IntStream.html), and your call to `IntStream.map` resolves to `IntStream map​(IntUnaryOperator mapper)`.\r\n\r\nBasically what you *want* is a `CharStream` type (like `IntStream` but for `char`) - but that doesn&#39;t exist.\r\n","title":"Casting to (char) in Stream.map() Does Not Produce Desired Result","body":"<p>Firstly, I wouldn't expect <code>(char) c + 1</code> to work anyway, as that doesn't cast the <em>result</em> to <code>char</code>. It only casts <code>c</code> to <code>char</code>. You really wanted <code>.map(c -&gt; (char) (c + 1))</code>.</p>\n<p>However, that <em>still</em> results in an <code>IntStream</code>, because there's no such type as &quot;a stream of characters&quot;. <a href=\"https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/lang/String.html#chars()\" rel=\"nofollow noreferrer\"><code>String.chars()</code></a> returns an <a href=\"https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/util/stream/IntStream.html\" rel=\"nofollow noreferrer\"><code>IntStream</code></a>, and your call to <code>IntStream.map</code> resolves to <code>IntStream map​(IntUnaryOperator mapper)</code>.</p>\n<p>Basically what you <em>want</em> is a <code>CharStream</code> type (like <code>IntStream</code> but for <code>char</code>) - but that doesn't exist.</p>\n"},{"tags":[],"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1679413099,"creation_date":1679411077,"answer_id":75802907,"question_id":75802528,"body_markdown":"As to *why* you have the problem, see the [Answer by Jon Skeet][1]. \r\n\r\nYou can avoid the entire problem easily by using [code point][2] integers rather than the broken legacy type `char`. \r\n\r\nFurthermore, your code fails with most characters.  Again, solved by using code points. \r\n\r\n# Code point, not `char`\r\n\r\nThe `char` type has been essentially broken since Java 2, and legacy since Java 5. As a 16-bit value, the `char` is physically incapable of representing most of the over 149,000 characters defined in [Unicode][3]. \r\n\r\nWhile `char` is limited to a range of 0 to just over 65,000, code points range from zero to just over a million. Most of that range is not yet assigned, and some is set aside permanently for private use. \r\n\r\nLet’s modify your code:\r\n\r\n - Replace your `.chars` call with [`.codePoints`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html#codePoints()). \r\n - Call [`appendCodePoint`][4] instead of that first `append`. \r\n\r\nVoil&#224;, no more casting confusion. \r\n\r\n```java\r\nString s =\r\n    &quot;abdc&quot;\r\n    .codePoints()  // Returns an `IntStream` object. \r\n    .map( codePoint -&gt; codePoint + 1 )\r\n    .collect( \r\n        StringBuilder::new , \r\n        StringBuilder::appendCodePoint , \r\n        StringBuilder::append \r\n    )              // Returns a `StringBuilder` object. \r\n    .toString() ;\r\n```\r\n\r\nSee this code run [at Ideone.com][5]. \r\n\r\n&gt;bced\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/75802678/642706\r\n  [2]: https://en.m.wikipedia.org/wiki/Code_point\r\n  [3]: https://en.m.wikipedia.org/wiki/Unicode\r\n  [4]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/StringBuilder.html#appendCodePoint(int)\r\n  [5]: https://ideone.com/LL7P6E","title":"Casting to (char) in Stream.map() Does Not Produce Desired Result","body":"<p>As to <em>why</em> you have the problem, see the <a href=\"https://stackoverflow.com/a/75802678/642706\">Answer by Jon Skeet</a>.</p>\n<p>You can avoid the entire problem easily by using <a href=\"https://en.m.wikipedia.org/wiki/Code_point\" rel=\"nofollow noreferrer\">code point</a> integers rather than the broken legacy type <code>char</code>.</p>\n<p>Furthermore, your code fails with most characters.  Again, solved by using code points.</p>\n<h1>Code point, not <code>char</code></h1>\n<p>The <code>char</code> type has been essentially broken since Java 2, and legacy since Java 5. As a 16-bit value, the <code>char</code> is physically incapable of representing most of the over 149,000 characters defined in <a href=\"https://en.m.wikipedia.org/wiki/Unicode\" rel=\"nofollow noreferrer\">Unicode</a>.</p>\n<p>While <code>char</code> is limited to a range of 0 to just over 65,000, code points range from zero to just over a million. Most of that range is not yet assigned, and some is set aside permanently for private use.</p>\n<p>Let’s modify your code:</p>\n<ul>\n<li>Replace your <code>.chars</code> call with <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html#codePoints()\" rel=\"nofollow noreferrer\"><code>.codePoints</code></a>.</li>\n<li>Call <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/StringBuilder.html#appendCodePoint(int)\" rel=\"nofollow noreferrer\"><code>appendCodePoint</code></a> instead of that first <code>append</code>.</li>\n</ul>\n<p>Voilà, no more casting confusion.</p>\n<pre class=\"lang-java prettyprint-override\"><code>String s =\n    &quot;abdc&quot;\n    .codePoints()  // Returns an `IntStream` object. \n    .map( codePoint -&gt; codePoint + 1 )\n    .collect( \n        StringBuilder::new , \n        StringBuilder::appendCodePoint , \n        StringBuilder::append \n    )              // Returns a `StringBuilder` object. \n    .toString() ;\n</code></pre>\n<p>See this code run <a href=\"https://ideone.com/LL7P6E\" rel=\"nofollow noreferrer\">at Ideone.com</a>.</p>\n<blockquote>\n<p>bced</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679411778,"creation_date":1679411778,"answer_id":75803064,"question_id":75802528,"body_markdown":"The `+` operator will always produce an int (or float or double, if any operand is float or double).  This is because both operands are promoted to int values (or long values, if either operand is already a long).\r\n\r\nSo, your first attempt, `c -&gt; (char)c + 1`, is really doing this:\r\n\r\n    c -&gt; (int) ((char) c) + 1\r\n\r\nbecause that’s how numeric promotion works.\r\n\r\nYour second attempt’s outcome is due to the fact that [String.chars() returns an IntStream](https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/lang/String.html#chars()).  When you do `map(c1 -&gt; (char)c1)` you are actually calling the [map method of IntStream](https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/util/stream/IntStream.html#map(java.util.function.IntUnaryOperator)), whose argument is an IntUnaryOperator.  Thus, the lambda&#39;s returned value (`(char)c1`) is promoted to int.\r\n\r\nUsing [mapToObj](https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/util/stream/IntStream.html#mapToObj(java.util.function.IntFunction)) would probably work, though you’d be creating java.lang.Character instances which would have less than ideal efficiency.\r\n\r\nYour final attempt works because you are explicitly appending a char value, so it doesn’t matter whether it was an int in the stream.\r\n\r\nBasil is right: working with code points is better than char values, both because it removes ambiguity and because the char type is not able to represent all valid Unicode characters.\r\n","title":"Casting to (char) in Stream.map() Does Not Produce Desired Result","body":"<p>The <code>+</code> operator will always produce an int (or float or double, if any operand is float or double).  This is because both operands are promoted to int values (or long values, if either operand is already a long).</p>\n<p>So, your first attempt, <code>c -&gt; (char)c + 1</code>, is really doing this:</p>\n<pre><code>c -&gt; (int) ((char) c) + 1\n</code></pre>\n<p>because that’s how numeric promotion works.</p>\n<p>Your second attempt’s outcome is due to the fact that <a href=\"https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/lang/String.html#chars()\" rel=\"nofollow noreferrer\">String.chars() returns an IntStream</a>.  When you do <code>map(c1 -&gt; (char)c1)</code> you are actually calling the <a href=\"https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/util/stream/IntStream.html#map(java.util.function.IntUnaryOperator)\" rel=\"nofollow noreferrer\">map method of IntStream</a>, whose argument is an IntUnaryOperator.  Thus, the lambda's returned value (<code>(char)c1</code>) is promoted to int.</p>\n<p>Using <a href=\"https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/util/stream/IntStream.html#mapToObj(java.util.function.IntFunction)\" rel=\"nofollow noreferrer\">mapToObj</a> would probably work, though you’d be creating java.lang.Character instances which would have less than ideal efficiency.</p>\n<p>Your final attempt works because you are explicitly appending a char value, so it doesn’t matter whether it was an int in the stream.</p>\n<p>Basil is right: working with code points is better than char values, both because it removes ambiguity and because the char type is not able to represent all valid Unicode characters.</p>\n"}],"owner":{"account_id":3475577,"reputation":285,"user_id":2908871,"display_name":"hughj"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":143,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":75802907,"answer_count":3,"score":2,"last_activity_date":1679413099,"creation_date":1679409098,"question_id":75802528,"body_markdown":"java.util.stream is challenging my notion of chars.  I am attempting to perform a simple character rotation of a string, where I simply add 1 to the int value of each character.  I start with &quot;abcd&quot;.chars() (a stream), and then I map.  But I don&#39;t seem to be able to cast the ints -&gt; char during the map.  Why am I not getting the desired result?\r\n\r\nThis is vanilla JDK17 (temurin).\r\n\r\n        jshell&gt; &quot;abdc&quot;.chars().map(c -&gt; c + 1).collect(StringBuilder::new, StringBuilder::append, StringBuilder::append)\r\n    $43 ==&gt; 9899101100\r\n\r\nWait; thats not what I want.  These are the int values! Let&#39;s try a cast to char:\r\n\r\n    jshell&gt; &quot;abdc&quot;.chars().map(c -&gt; (char)c + 1).collect(StringBuilder::new, StringBuilder::append, StringBuilder::append)\r\n    $44 ==&gt; 9899101100\r\n\r\nOk, that had zero effect.  Let&#39;s use an explicit map step:\r\n\r\n    jshell&gt; &quot;abdc&quot;.chars().map(c -&gt; c + 1).map(c1 -&gt; (char)c1).collect(StringBuilder::new, StringBuilder::append, StringBuilder::append)\r\n    $45 ==&gt; 9899101100\r\n\r\nHuh? wtf?  Ok, let&#39;s force the cast during the reduce step:\r\n\r\n    jshell&gt; &quot;abcd&quot;.chars().map(c -&gt; c + 1).collect(()-&gt;new StringBuilder(), (c,d)-&gt;c.append((char)d), (c1, c2)-&gt;c1.append(c2))\r\n    $46 ==&gt; bcde\r\n\r\nFinally!  But WHY?  Why doesn&#39;t the map to char flow across the stream?  What am I missing?  I know this is a newbie question, but I would appreciate being educated.\r\n\r\n\r\n\r\n\r\n","title":"Casting to (char) in Stream.map() Does Not Produce Desired Result","body":"<p>java.util.stream is challenging my notion of chars.  I am attempting to perform a simple character rotation of a string, where I simply add 1 to the int value of each character.  I start with &quot;abcd&quot;.chars() (a stream), and then I map.  But I don't seem to be able to cast the ints -&gt; char during the map.  Why am I not getting the desired result?</p>\n<p>This is vanilla JDK17 (temurin).</p>\n<pre><code>    jshell&gt; &quot;abdc&quot;.chars().map(c -&gt; c + 1).collect(StringBuilder::new, StringBuilder::append, StringBuilder::append)\n$43 ==&gt; 9899101100\n</code></pre>\n<p>Wait; thats not what I want.  These are the int values! Let's try a cast to char:</p>\n<pre><code>jshell&gt; &quot;abdc&quot;.chars().map(c -&gt; (char)c + 1).collect(StringBuilder::new, StringBuilder::append, StringBuilder::append)\n$44 ==&gt; 9899101100\n</code></pre>\n<p>Ok, that had zero effect.  Let's use an explicit map step:</p>\n<pre><code>jshell&gt; &quot;abdc&quot;.chars().map(c -&gt; c + 1).map(c1 -&gt; (char)c1).collect(StringBuilder::new, StringBuilder::append, StringBuilder::append)\n$45 ==&gt; 9899101100\n</code></pre>\n<p>Huh? wtf?  Ok, let's force the cast during the reduce step:</p>\n<pre><code>jshell&gt; &quot;abcd&quot;.chars().map(c -&gt; c + 1).collect(()-&gt;new StringBuilder(), (c,d)-&gt;c.append((char)d), (c1, c2)-&gt;c1.append(c2))\n$46 ==&gt; bcde\n</code></pre>\n<p>Finally!  But WHY?  Why doesn't the map to char flow across the stream?  What am I missing?  I know this is a newbie question, but I would appreciate being educated.</p>\n"},{"tags":["java","gradle","jacoco"],"comments":[{"owner":{"account_id":7798354,"reputation":6929,"user_id":5898696,"accept_rate":89,"display_name":"J-Alex"},"score":0,"creation_date":1634122791,"post_id":69305183,"comment_id":122939842,"body_markdown":"The error actually means that the class was compiled with higher java version (16) but run with lower one (8).\nCheck gradle JVM version by the command: `./gradlew -version` and make sure that gradle uses `16` (check `JAVA_HOME` in environment variables)","body":"The error actually means that the class was compiled with higher java version (16) but run with lower one (8). Check gradle JVM version by the command: <code>.&#47;gradlew -version</code> and make sure that gradle uses <code>16</code> (check <code>JAVA_HOME</code> in environment variables)"},{"owner":{"account_id":263656,"reputation":1,"user_id":549372,"accept_rate":100,"display_name":"Martin Zeitler"},"score":1,"creation_date":1634127634,"post_id":69305183,"comment_id":122941953,"body_markdown":"Does this answer your question? [How to fix &quot;unsupported class file major version 60&quot; in IntelliJ?](https://stackoverflow.com/questions/67079327/how-to-fix-unsupported-class-file-major-version-60-in-intellij)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/67079327/how-to-fix-unsupported-class-file-major-version-60-in-intellij\">How to fix &quot;unsupported class file major version 60&quot; in IntelliJ?</a>"}],"answers":[{"tags":[],"owner":{"account_id":21846932,"reputation":176,"user_id":16139621,"display_name":"Lukas Juskevicius"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1634120826,"creation_date":1632422228,"answer_id":69305328,"question_id":69305183,"body_markdown":"I had a similar problem and fix it by chaining Gradle JVM settings in my preferred IDE which is IntelliJ (should be possible with others too):\r\n\r\n 1. In the Settings/Preferences dialog, go to Build, Execution,\r\n    Deployment | Build Tools | Gradle.\r\n    \r\n    \r\n 2. Under the Gradle section, change the Gradle JVM option.\r\n\r\nIf you are using Intellij you can see more on this topic [here][1]\r\n\r\n\r\n  [1]: https://www.jetbrains.com/help/idea/gradle-jvm-selection.html#jvm_settings","title":"Caused by: java.lang.IllegalArgumentException: Unsupported class file major version 60","body":"<p>I had a similar problem and fix it by chaining Gradle JVM settings in my preferred IDE which is IntelliJ (should be possible with others too):</p>\n<ol>\n<li><p>In the Settings/Preferences dialog, go to Build, Execution,\nDeployment | Build Tools | Gradle.</p>\n</li>\n<li><p>Under the Gradle section, change the Gradle JVM option.</p>\n</li>\n</ol>\n<p>If you are using Intellij you can see more on this topic <a href=\"https://www.jetbrains.com/help/idea/gradle-jvm-selection.html#jvm_settings\" rel=\"nofollow noreferrer\">here</a></p>\n"},{"tags":[],"owner":{"account_id":15207672,"reputation":1864,"user_id":10973514,"display_name":"pref"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1679413039,"creation_date":1665420250,"answer_id":74018159,"question_id":69305183,"body_markdown":"I had similar problem when upgrading my project to use JDK17 ( i.e., Unsupported class file major version 61 ).\r\n\r\nThe solution was to upgrade jacoco maven plugin to version 0.8.8 in my pom\r\n\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.jacoco&lt;/groupId&gt;\r\n                &lt;artifactId&gt;jacoco-maven-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;0.8.8&lt;/version&gt;\r\n                ...\r\n\r\nthis github thread is also related: \r\nhttps://github.com/mapstruct/mapstruct/issues/2835","title":"Caused by: java.lang.IllegalArgumentException: Unsupported class file major version 60","body":"<p>I had similar problem when upgrading my project to use JDK17 ( i.e., Unsupported class file major version 61 ).</p>\n<p>The solution was to upgrade jacoco maven plugin to version 0.8.8 in my pom</p>\n<pre><code>        &lt;plugin&gt;\n            &lt;groupId&gt;org.jacoco&lt;/groupId&gt;\n            &lt;artifactId&gt;jacoco-maven-plugin&lt;/artifactId&gt;\n            &lt;version&gt;0.8.8&lt;/version&gt;\n            ...\n</code></pre>\n<p>this github thread is also related:\n<a href=\"https://github.com/mapstruct/mapstruct/issues/2835\" rel=\"nofollow noreferrer\">https://github.com/mapstruct/mapstruct/issues/2835</a></p>\n"}],"owner":{"account_id":16858760,"reputation":113,"user_id":12190059,"display_name":"Ramu Smartguy"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6215,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"answer_count":2,"score":9,"last_activity_date":1679413039,"creation_date":1632421526,"question_id":69305183,"body_markdown":"Configuration : \r\nJava : 16 &lt;br&gt;\r\nGradle : 7.2 &lt;br&gt;\r\nJacoco : 0.8.4\r\n\r\nWhen I upgraded my project from openJDK8 to openJDk16 I see the following issues : \r\n\r\n&lt;b&gt;&quot;Caused by: java.lang.IllegalArgumentException: Unsupported class file major version 60&quot; &lt;/b&gt;\r\n\r\nAnd also the below issue : &lt;br&gt;\r\n&lt;b&gt;\r\njava.lang.instrument.IllegalClassFormatException: Error while instrumenting sun/security/ec/SunEC$1.\r\n        at org.jacoco.agent.rt.internal_035b120.CoverageTransformer.transform(CoverageTransformer.java:93)\r\n        at java.instrument/java.lang.instrument.ClassFileTransformer.transform(ClassFileTransformer.java:244\r\n&lt;/b&gt;\r\n","title":"Caused by: java.lang.IllegalArgumentException: Unsupported class file major version 60","body":"<p>Configuration :\nJava : 16 <br>\nGradle : 7.2 <br>\nJacoco : 0.8.4</p>\n<p>When I upgraded my project from openJDK8 to openJDk16 I see the following issues :</p>\n<p><b>&quot;Caused by: java.lang.IllegalArgumentException: Unsupported class file major version 60&quot; </b></p>\n<p>And also the below issue : <br>\n<b>\njava.lang.instrument.IllegalClassFormatException: Error while instrumenting sun/security/ec/SunEC$1.\nat org.jacoco.agent.rt.internal_035b120.CoverageTransformer.transform(CoverageTransformer.java:93)\nat java.instrument/java.lang.instrument.ClassFileTransformer.transform(ClassFileTransformer.java:244\n</b></p>\n"},{"tags":["java","eclipse","eclipse-rcp","tycho"],"comments":[{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":0,"creation_date":1679470738,"post_id":75803292,"comment_id":133725938,"body_markdown":"Consider responding to your previous questions before asking new ones. The example you linked is not minimal and uses different Tycho versions.","body":"Consider responding to your previous questions before asking new ones. The example you linked is not minimal and uses different Tycho versions."},{"owner":{"account_id":6642,"reputation":13384,"user_id":11249,"accept_rate":51,"display_name":"paul"},"score":0,"creation_date":1679481960,"post_id":75803292,"comment_id":133728608,"body_markdown":"@howlger thanks. I didn&#39;t see that the tycho version in the pom and extensions.xml were different. That apparently fixed the &#39;Missing requirement&#39; issue. I also needed to add the fragment to the `target-platform-configuration` section. Build is now successful.","body":"@howlger thanks. I didn&#39;t see that the tycho version in the pom and extensions.xml were different. That apparently fixed the &#39;Missing requirement&#39; issue. I also needed to add the fragment to the <code>target-platform-configuration</code> section. Build is now successful."}],"owner":{"account_id":6642,"reputation":13384,"user_id":11249,"accept_rate":51,"display_name":"paul"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":86,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679412956,"creation_date":1679412956,"question_id":75803292,"body_markdown":"I have recently introduced a fragment project to a RCP app which provides JAX-WS components following a move from Java 8 to Java 11. The fragment host is `system.bundle`.\r\n\r\nA simple test RCP project works as I want, the JAX-WS components are resolved and a web service can be called successfully. The project is on Github: [https://github.com/pramsden/tycho-test](https://github.com/pramsden/tycho-test).\r\n\r\nAlthought the target platform does have `org.eclipse.osgi` listed in its `Contents` view, I still get the following error message when the tycho build runs:\r\n\r\n```\r\n[DEBUG] No solution found because the problem is unsatisfiable.: [Unable to satisfy dependency from j17-jaxws-fragment 1.0.0.qualifier to osgi.bundle; org.eclipse.osgi 0.0.0.; No solutio\r\nn found because the problem is unsatisfiable.]\r\n[INFO] {osgi.os=win32, osgi.ws=win32, org.eclipse.update.install.features=true, osgi.arch=x86_64}\r\n[ERROR] Cannot resolve project dependencies:\r\n[ERROR]   Software being installed: j17-jaxws-fragment 1.0.0.qualifier\r\n[ERROR]   Missing requirement: j17-jaxws-fragment 1.0.0.qualifier requires &#39;osgi.bundle; org.eclipse.osgi 0.0.0&#39; but it could not be found\r\n```\r\n\r\nEnvironment:\r\n\r\n```\r\nopenjdk version &quot;18.0.1.1&quot; 2022-04-22\r\nOpenJDK Runtime Environment (build 18.0.1.1+2-6)\r\nOpenJDK 64-Bit Server VM (build 18.0.1.1+2-6, mixed mode, sharing)\r\nApache Maven 3.8.5 (3599d3414f046de2324203b78ddcf9b5e4388aa0)\r\nMaven home: C:\\apache-maven-3.8.5\r\nJava version: 18.0.1.1, vendor: Oracle Corporation, runtime: C:\\Program Files\\Java\\jdk-18.0.1.1\r\nDefault locale: de_DE, platform encoding: UTF-8\r\n```\r\n\r\nI&#39;ve tried using the option `-Dtycho.debug.resolver=true` but I couldn&#39;t see anything which helped me.\r\n\r\n","title":"Tycho build not finding &#39;org.eclipse.osgi&#39; requirement","body":"<p>I have recently introduced a fragment project to a RCP app which provides JAX-WS components following a move from Java 8 to Java 11. The fragment host is <code>system.bundle</code>.</p>\n<p>A simple test RCP project works as I want, the JAX-WS components are resolved and a web service can be called successfully. The project is on Github: <a href=\"https://github.com/pramsden/tycho-test\" rel=\"nofollow noreferrer\">https://github.com/pramsden/tycho-test</a>.</p>\n<p>Althought the target platform does have <code>org.eclipse.osgi</code> listed in its <code>Contents</code> view, I still get the following error message when the tycho build runs:</p>\n<pre><code>[DEBUG] No solution found because the problem is unsatisfiable.: [Unable to satisfy dependency from j17-jaxws-fragment 1.0.0.qualifier to osgi.bundle; org.eclipse.osgi 0.0.0.; No solutio\nn found because the problem is unsatisfiable.]\n[INFO] {osgi.os=win32, osgi.ws=win32, org.eclipse.update.install.features=true, osgi.arch=x86_64}\n[ERROR] Cannot resolve project dependencies:\n[ERROR]   Software being installed: j17-jaxws-fragment 1.0.0.qualifier\n[ERROR]   Missing requirement: j17-jaxws-fragment 1.0.0.qualifier requires 'osgi.bundle; org.eclipse.osgi 0.0.0' but it could not be found\n</code></pre>\n<p>Environment:</p>\n<pre><code>openjdk version &quot;18.0.1.1&quot; 2022-04-22\nOpenJDK Runtime Environment (build 18.0.1.1+2-6)\nOpenJDK 64-Bit Server VM (build 18.0.1.1+2-6, mixed mode, sharing)\nApache Maven 3.8.5 (3599d3414f046de2324203b78ddcf9b5e4388aa0)\nMaven home: C:\\apache-maven-3.8.5\nJava version: 18.0.1.1, vendor: Oracle Corporation, runtime: C:\\Program Files\\Java\\jdk-18.0.1.1\nDefault locale: de_DE, platform encoding: UTF-8\n</code></pre>\n<p>I've tried using the option <code>-Dtycho.debug.resolver=true</code> but I couldn't see anything which helped me.</p>\n"},{"tags":["java","authentication","apache-kafka","jaas","apache-kafka-security"],"owner":{"account_id":8042133,"reputation":65,"user_id":6063508,"accept_rate":25,"display_name":"yassinec"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":17,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679412646,"creation_date":1679412646,"question_id":75803232,"body_markdown":"I&#39;m implementing a module of authentication to kafka with the java api and i want to log clientAddress as an information.\r\n\r\nI found **AuthenticationContext** that can be used with **KafkaPrincipalBuilder** like this:\r\n\r\n```\r\npublic class CustomPrincipalBuilder implements KafkaPrincipalBuilder {\r\n    @Override\r\n    public KafkaPrincipal build(AuthenticationContext authenticationContext) {\r\n        return new KafkaPrincipal(&quot;user&quot;, authenticationContext.clientAddress().getHostAddress());\r\n    }\r\n}\r\n\r\n```\r\n\r\nbut i don&#39;t know what to pass as **AuthenticationContext** when invoking .**build()** method from the main class .\r\n\r\nThanks in advance,","title":"is there a way to get clientAddress with kafka while authentication?","body":"<p>I'm implementing a module of authentication to kafka with the java api and i want to log clientAddress as an information.</p>\n<p>I found <strong>AuthenticationContext</strong> that can be used with <strong>KafkaPrincipalBuilder</strong> like this:</p>\n<pre><code>public class CustomPrincipalBuilder implements KafkaPrincipalBuilder {\n    @Override\n    public KafkaPrincipal build(AuthenticationContext authenticationContext) {\n        return new KafkaPrincipal(&quot;user&quot;, authenticationContext.clientAddress().getHostAddress());\n    }\n}\n\n</code></pre>\n<p>but i don't know what to pass as <strong>AuthenticationContext</strong> when invoking .<strong>build()</strong> method from the main class .</p>\n<p>Thanks in advance,</p>\n"},{"tags":["java","spring-boot","hibernate","jackson"],"comments":[{"owner":{"account_id":16211352,"reputation":4324,"user_id":11713777,"display_name":"dariosicily"},"score":0,"creation_date":1678814606,"post_id":75736199,"comment_id":133605089,"body_markdown":"For spring boot there is a specific [spring-boot-starter-json](https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-starter-json) json starter that includes the jackson-datatype-jsr310.","body":"For spring boot there is a specific <a href=\"https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-starter-json\" rel=\"nofollow noreferrer\">spring-boot-starter-json</a> json starter that includes the jackson-datatype-jsr310."},{"owner":{"account_id":10744360,"reputation":31,"user_id":7906248,"display_name":"madrimas"},"score":0,"creation_date":1678817396,"post_id":75736199,"comment_id":133605860,"body_markdown":"I&#39;ve checked it, but it didn&#39;t change anything - moreover, I already have 4 of 6 dependencies from `spring-boot-starter-json` in my POM","body":"I&#39;ve checked it, but it didn&#39;t change anything - moreover, I already have 4 of 6 dependencies from <code>spring-boot-starter-json</code> in my POM"}],"answers":[{"tags":[],"owner":{"account_id":10744360,"reputation":31,"user_id":7906248,"display_name":"madrimas"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1679412200,"creation_date":1679412200,"answer_id":75803136,"question_id":75736199,"body_markdown":"After few days I realized that problem was caused by my implementation (custom entityManagerFactory).\r\n\r\nI had to manually add JacksonJsonFormatMapper with custom ObjectMapper to JpaPropertyMap and now it works\r\n```\r\n    @Bean\r\n    public CommonHibernateProperties commonHibernateProperties(JpaProperties jpaProperties, ObjectMapper objectMapper) {\r\n        Map&lt;String, Object&gt; properties = new HashMap&lt;&gt;(jpaProperties.getProperties());\r\n        properties.put(AvailableSettings.JSON_FORMAT_MAPPER, new JacksonJsonFormatMapper(objectMapper));\r\n        return new CommonHibernateProperties(properties);\r\n    }\r\n```","title":"Hibernate 6: JSON type with Instant cannot be serialized","body":"<p>After few days I realized that problem was caused by my implementation (custom entityManagerFactory).</p>\n<p>I had to manually add JacksonJsonFormatMapper with custom ObjectMapper to JpaPropertyMap and now it works</p>\n<pre><code>    @Bean\n    public CommonHibernateProperties commonHibernateProperties(JpaProperties jpaProperties, ObjectMapper objectMapper) {\n        Map&lt;String, Object&gt; properties = new HashMap&lt;&gt;(jpaProperties.getProperties());\n        properties.put(AvailableSettings.JSON_FORMAT_MAPPER, new JacksonJsonFormatMapper(objectMapper));\n        return new CommonHibernateProperties(properties);\n    }\n</code></pre>\n"}],"owner":{"account_id":10744360,"reputation":31,"user_id":7906248,"display_name":"madrimas"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1305,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1679412200,"creation_date":1678813045,"question_id":75736199,"body_markdown":"I try to switch from Spring Boot 2.7/Hibernate 5.6 to Spring Boot 3/Hibernate 6.1.\r\nHibernate 6 supports JSON definition type by default:\r\n\r\n```\r\n    @JdbcTypeCode(SqlTypes.JSON)\r\n    private MyEntity myEntity;\r\n```\r\n\r\n```\r\n    public class MyEntity implements Serializable {\r\n        private String myString;\r\n        private Instant myInstant;\r\n    }\r\n```\r\n\r\nWhen I try to save this entity I&#39;ve got:\r\n\r\n```\r\nJava 8 date/time type `java.time.Instant` not supported by default: add Module &quot;com.fasterxml.jackson.datatype:jackson-datatype-jsr310&quot; to enable handling\r\n```\r\n\r\nbut I&#39;ve already `jackson-datatype-jsr310` dependency in POM, there was also no problem before upgrade. `ObjectMapper` is configured properly.\r\n\r\nI&#39;ve found tip that I have to configure also `HibernatePropertiesCustomizer`:\r\n\r\n```\r\n    @Bean\r\n    public HibernatePropertiesCustomizer jsonFormatMapperCustomizer(ObjectMapper objectMapper){\r\n        return properties -&gt; properties.put(\r\n                AvailableSettings.JSON_FORMAT_MAPPER,\r\n                new JacksonJsonFormatMapper(objectMapper)\r\n        );\r\n    }\r\n```\r\n\r\nbut in my case it doesn&#39;t work. `HibernatePropertiesCustomizer` is registered properly, but problem still exists.\r\n\r\nWorkaround that I found is to create a new mapper implements `FormatMapper` with constructor:\r\n\r\n```\r\n    public MyMapper() {\r\n        this(new ObjectMapper().findAndRegisterModules());\r\n    }\r\n```\r\n\r\nand register it by `spring.jpa.properties.hibernate.type.json_format_mapper` property, but it&#39;s not a solution. I don&#39;t want to duplicate my ObjectMapper configuration.\r\n\r\nI&#39;m wondering why `HibernatePropertiesCustomizer` doesn&#39;t work in this case - any idea?","title":"Hibernate 6: JSON type with Instant cannot be serialized","body":"<p>I try to switch from Spring Boot 2.7/Hibernate 5.6 to Spring Boot 3/Hibernate 6.1.\nHibernate 6 supports JSON definition type by default:</p>\n<pre><code>    @JdbcTypeCode(SqlTypes.JSON)\n    private MyEntity myEntity;\n</code></pre>\n<pre><code>    public class MyEntity implements Serializable {\n        private String myString;\n        private Instant myInstant;\n    }\n</code></pre>\n<p>When I try to save this entity I've got:</p>\n<pre><code>Java 8 date/time type `java.time.Instant` not supported by default: add Module &quot;com.fasterxml.jackson.datatype:jackson-datatype-jsr310&quot; to enable handling\n</code></pre>\n<p>but I've already <code>jackson-datatype-jsr310</code> dependency in POM, there was also no problem before upgrade. <code>ObjectMapper</code> is configured properly.</p>\n<p>I've found tip that I have to configure also <code>HibernatePropertiesCustomizer</code>:</p>\n<pre><code>    @Bean\n    public HibernatePropertiesCustomizer jsonFormatMapperCustomizer(ObjectMapper objectMapper){\n        return properties -&gt; properties.put(\n                AvailableSettings.JSON_FORMAT_MAPPER,\n                new JacksonJsonFormatMapper(objectMapper)\n        );\n    }\n</code></pre>\n<p>but in my case it doesn't work. <code>HibernatePropertiesCustomizer</code> is registered properly, but problem still exists.</p>\n<p>Workaround that I found is to create a new mapper implements <code>FormatMapper</code> with constructor:</p>\n<pre><code>    public MyMapper() {\n        this(new ObjectMapper().findAndRegisterModules());\n    }\n</code></pre>\n<p>and register it by <code>spring.jpa.properties.hibernate.type.json_format_mapper</code> property, but it's not a solution. I don't want to duplicate my ObjectMapper configuration.</p>\n<p>I'm wondering why <code>HibernatePropertiesCustomizer</code> doesn't work in this case - any idea?</p>\n"},{"tags":["java","api","http"],"comments":[{"owner":{"account_id":87779,"reputation":33895,"user_id":243245,"accept_rate":70,"display_name":"Rup"},"score":0,"creation_date":1600040377,"post_id":63876345,"comment_id":112954491,"body_markdown":"You&#39;re missing a body for the POST I think. Is that deliberate - should this be an empty POST? It could be it&#39;s expecting you to write something to conn.getOutputStream().","body":"You&#39;re missing a body for the POST I think. Is that deliberate - should this be an empty POST? It could be it&#39;s expecting you to write something to conn.getOutputStream()."},{"owner":{"account_id":87779,"reputation":33895,"user_id":243245,"accept_rate":70,"display_name":"Rup"},"score":1,"creation_date":1600040466,"post_id":63876345,"comment_id":112954504,"body_markdown":"Looking at [the documentation you&#39;ve linked to](https://developer.spotify.com/documentation/general/guides/authorization-guide/#1-have-your-application-request-authorization-1), &quot;grant_type=client_credentials&quot; should be in the POST body, not the headers. Can you show us the Python code you&#39;re trying to port? (Ideally as text, not a YouTube video.)","body":"Looking at <a href=\"https://developer.spotify.com/documentation/general/guides/authorization-guide/#1-have-your-application-request-authorization-1\" rel=\"nofollow noreferrer\">the documentation you&#39;ve linked to</a>, &quot;grant_type=client_credentials&quot; should be in the POST body, not the headers. Can you show us the Python code you&#39;re trying to port? (Ideally as text, not a YouTube video.)"},{"owner":{"account_id":18210139,"reputation":21,"user_id":13252819,"display_name":"TootLoops"},"score":0,"creation_date":1600042058,"post_id":63876345,"comment_id":112954734,"body_markdown":"I have added the Python code that generates the access token to the original post. I agree with the comment that I should have information in the body of the POST but don&#39;t know how to differentiate between making the information a header versus a body?","body":"I have added the Python code that generates the access token to the original post. I agree with the comment that I should have information in the body of the POST but don&#39;t know how to differentiate between making the information a header versus a body?"}],"answers":[{"tags":[],"owner":{"account_id":18210139,"reputation":21,"user_id":13252819,"display_name":"TootLoops"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1600223914,"creation_date":1600223914,"answer_id":63912346,"question_id":63876345,"body_markdown":"Thanks to Rup I was able to identify the issue. I was not properly sending anything with the POST. I added .getOutputStream() so send the request and .getInputStream() to receive the response. \r\n\r\n\t\t\r\n\t\t//create url access point\r\n\t\tURL url = new URL(tokenURL);\r\n\t\t\r\n\t\t//open http connection to url\r\n        conn = (HttpURLConnection) url.openConnection();\r\n        conn.setDoOutput(true); \r\n        conn.setDoInput(true);\r\n        \r\n        //setup post function and request headers\r\n        conn.setRequestMethod(&quot;POST&quot;);\r\n        conn.setRequestProperty(&quot;Authorization&quot;,String.format(&quot;Basic %s&quot;, clientCredEncode));\r\n\t\tconn.setRequestProperty(&quot;Content-Type&quot;, &quot;application/x-www-form-urlencoded&quot;);\r\n\r\n\t\t//set body for posting\r\n\t\tString body = &quot;grant_type=client_credentials&quot;;\r\n\t\t\r\n\t\t//calculate and set content length\r\n\t\tbyte[] out = body.getBytes(StandardCharsets.UTF_8);\r\n\t\tint length = out.length; \r\n\t\tconn.setFixedLengthStreamingMode(length);\r\n\t\t\r\n\t\t//connect to http\r\n\t\tconn.connect();\r\n\t\t//}\r\n\t\t\r\n\t\t//send bytes to spotify\r\n\t\ttry(OutputStream os = conn.getOutputStream()) {\r\n\t\t    os.write(out);\r\n\t\t}\r\n\t\t\r\n\t\t//receive access token\r\n        InputStream result = conn.getInputStream();\r\n        s = new String(result.readAllBytes());\r\n        //System.out.println(s);","title":"How to get access token from Spotify API? [java]","body":"<p>Thanks to Rup I was able to identify the issue. I was not properly sending anything with the POST. I added .getOutputStream() so send the request and .getInputStream() to receive the response.</p>\n<pre><code>    //create url access point\n    URL url = new URL(tokenURL);\n    \n    //open http connection to url\n    conn = (HttpURLConnection) url.openConnection();\n    conn.setDoOutput(true); \n    conn.setDoInput(true);\n    \n    //setup post function and request headers\n    conn.setRequestMethod(&quot;POST&quot;);\n    conn.setRequestProperty(&quot;Authorization&quot;,String.format(&quot;Basic %s&quot;, clientCredEncode));\n    conn.setRequestProperty(&quot;Content-Type&quot;, &quot;application/x-www-form-urlencoded&quot;);\n\n    //set body for posting\n    String body = &quot;grant_type=client_credentials&quot;;\n    \n    //calculate and set content length\n    byte[] out = body.getBytes(StandardCharsets.UTF_8);\n    int length = out.length; \n    conn.setFixedLengthStreamingMode(length);\n    \n    //connect to http\n    conn.connect();\n    //}\n    \n    //send bytes to spotify\n    try(OutputStream os = conn.getOutputStream()) {\n        os.write(out);\n    }\n    \n    //receive access token\n    InputStream result = conn.getInputStream();\n    s = new String(result.readAllBytes());\n    //System.out.println(s);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14364740,"reputation":81,"user_id":10376131,"display_name":"Santhosh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1635918852,"creation_date":1635918499,"answer_id":69820176,"question_id":63876345,"body_markdown":"For anyone whos looking for the same, Here&#39;s a better one\r\n\r\n```\r\nimport com.google.gson.JsonParser;\r\nimport java.io.*;\r\nimport java.net.HttpURLConnection;\r\nimport java.net.URL;\r\nimport java.nio.charset.StandardCharsets;\r\n\r\npublic class SpotifyToken {\r\n    public String accessToken = &quot;&quot;;\r\n    public String expiresIn = &quot;&quot;;\r\n\r\n\r\n    public void get() throws IOException {\r\n\r\n        URL url = new URL(Endpoints.TOKEN);\r\n        HttpURLConnection http = (HttpURLConnection) url.openConnection();\r\n        http.setRequestMethod(&quot;POST&quot;);\r\n        http.setDoOutput(true);\r\n        http.setRequestProperty(&quot;content-type&quot;, &quot;application/x-www-form-urlencoded&quot;);\r\n\r\n        String data = &quot;grant_type=client_credentials&amp;client_id=&quot; + Endpoints.CLIENT_ID + &quot;&amp;client_secret=&quot; + Endpoints.CLIENT_SECRET + &quot;&quot;;\r\n\r\n        byte[] out = data.getBytes(StandardCharsets.UTF_8);\r\n\r\n        OutputStream stream = http.getOutputStream();\r\n        stream.write(out);\r\n\r\n        BufferedReader Lines = new BufferedReader(new InputStreamReader(http.getInputStream()));\r\n        String currentLine = Lines.readLine();\r\n        StringBuilder response = new StringBuilder();\r\n        while (currentLine != null) {\r\n            response.append(currentLine).append(&quot;\\n&quot;);\r\n            currentLine = Lines.readLine();\r\n        }\r\n\r\n        this.accessToken = String.valueOf(JsonParser.parseString(String.valueOf(response)).getAsJsonObject().getAsJsonObject(&quot;access_token&quot;));\r\n        this.expiresIn = String.valueOf(JsonParser.parseString(String.valueOf(response)).getAsJsonObject().getAsJsonObject(&quot;expires_in&quot;));\r\n\r\n        http.disconnect();\r\n    }\r\n}\r\n```\r\n\r\nThe class Endpoints.java will be\r\n\r\n```\r\npublic class Endpoints {\r\n    public static final String CLIENT_ID = &quot;YOUR_CLIENT_ID&quot;;\r\n    public static final String CLIENT_SECRET = &quot;YOUR_CLIENT_SECRET&quot;;\r\n    public static final String TOKEN = &quot;https://accounts.spotify.com/api/token&quot;;\r\n}\r\n\r\n```\r\n\r\nIf it interests you, here is the cURL command for the same:\r\n```\r\ncurl --request POST \\\r\n  --url &#39;https://accounts.spotify.com/api/token&#39; \\\r\n  --header &#39;content-type: application/x-www-form-urlencoded&#39; \\\r\n  --data grant_type=client_credentials \\\r\n  --data client_id=YOUR_CLIENT_ID \\\r\n  --data client_secret=YOUR_CLIENT_SECRET \\\r\n```\r\n\r\nI used [this][1] tool to convert cURL to java code.\r\n\r\n\r\n  [1]: https://reqbin.com/req/java/c-w7oitglz/convert-curl-to-http-request","title":"How to get access token from Spotify API? [java]","body":"<p>For anyone whos looking for the same, Here's a better one</p>\n<pre><code>import com.google.gson.JsonParser;\nimport java.io.*;\nimport java.net.HttpURLConnection;\nimport java.net.URL;\nimport java.nio.charset.StandardCharsets;\n\npublic class SpotifyToken {\n    public String accessToken = &quot;&quot;;\n    public String expiresIn = &quot;&quot;;\n\n\n    public void get() throws IOException {\n\n        URL url = new URL(Endpoints.TOKEN);\n        HttpURLConnection http = (HttpURLConnection) url.openConnection();\n        http.setRequestMethod(&quot;POST&quot;);\n        http.setDoOutput(true);\n        http.setRequestProperty(&quot;content-type&quot;, &quot;application/x-www-form-urlencoded&quot;);\n\n        String data = &quot;grant_type=client_credentials&amp;client_id=&quot; + Endpoints.CLIENT_ID + &quot;&amp;client_secret=&quot; + Endpoints.CLIENT_SECRET + &quot;&quot;;\n\n        byte[] out = data.getBytes(StandardCharsets.UTF_8);\n\n        OutputStream stream = http.getOutputStream();\n        stream.write(out);\n\n        BufferedReader Lines = new BufferedReader(new InputStreamReader(http.getInputStream()));\n        String currentLine = Lines.readLine();\n        StringBuilder response = new StringBuilder();\n        while (currentLine != null) {\n            response.append(currentLine).append(&quot;\\n&quot;);\n            currentLine = Lines.readLine();\n        }\n\n        this.accessToken = String.valueOf(JsonParser.parseString(String.valueOf(response)).getAsJsonObject().getAsJsonObject(&quot;access_token&quot;));\n        this.expiresIn = String.valueOf(JsonParser.parseString(String.valueOf(response)).getAsJsonObject().getAsJsonObject(&quot;expires_in&quot;));\n\n        http.disconnect();\n    }\n}\n</code></pre>\n<p>The class Endpoints.java will be</p>\n<pre><code>public class Endpoints {\n    public static final String CLIENT_ID = &quot;YOUR_CLIENT_ID&quot;;\n    public static final String CLIENT_SECRET = &quot;YOUR_CLIENT_SECRET&quot;;\n    public static final String TOKEN = &quot;https://accounts.spotify.com/api/token&quot;;\n}\n\n</code></pre>\n<p>If it interests you, here is the cURL command for the same:</p>\n<pre><code>curl --request POST \\\n  --url 'https://accounts.spotify.com/api/token' \\\n  --header 'content-type: application/x-www-form-urlencoded' \\\n  --data grant_type=client_credentials \\\n  --data client_id=YOUR_CLIENT_ID \\\n  --data client_secret=YOUR_CLIENT_SECRET \\\n</code></pre>\n<p>I used <a href=\"https://reqbin.com/req/java/c-w7oitglz/convert-curl-to-http-request\" rel=\"nofollow noreferrer\">this</a> tool to convert cURL to java code.</p>\n"},{"tags":[],"owner":{"account_id":11918038,"reputation":1,"user_id":8721465,"display_name":"Antonio Sampere"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679412171,"creation_date":1679412171,"answer_id":75803128,"question_id":63876345,"body_markdown":"Thank you for your code. I&#39;ve tried it, just a thing on the Santhosh answer, I&#39;ve a ClassCastException:\r\n```\r\nclass com.google.gson.JsonPrimitive cannot be cast to class\r\ncom.google.gson.JsonObject (com.google.gson.JsonPrimitive and\r\ncom.google.gson.JsonObject are in unnamed module of loader &#39;app&#39;)\r\n```\r\nThese calls:\r\n```\r\ngetAsJsonObject().getAsJsonObject(&quot;access_token&quot;)\r\ngetAsJsonObject().getAsJsonObject(&quot;expires_in&quot;)\r\n```\r\nwork this way:\r\n```\r\ngetAsJsonObject().getAsJsonPrimitive(&quot;access_token&quot;)\r\ngetAsJsonObject().getAsJsonPrimitive(&quot;expires_in&quot;)\r\n```","title":"How to get access token from Spotify API? [java]","body":"<p>Thank you for your code. I've tried it, just a thing on the Santhosh answer, I've a ClassCastException:</p>\n<pre><code>class com.google.gson.JsonPrimitive cannot be cast to class\ncom.google.gson.JsonObject (com.google.gson.JsonPrimitive and\ncom.google.gson.JsonObject are in unnamed module of loader 'app')\n</code></pre>\n<p>These calls:</p>\n<pre><code>getAsJsonObject().getAsJsonObject(&quot;access_token&quot;)\ngetAsJsonObject().getAsJsonObject(&quot;expires_in&quot;)\n</code></pre>\n<p>work this way:</p>\n<pre><code>getAsJsonObject().getAsJsonPrimitive(&quot;access_token&quot;)\ngetAsJsonObject().getAsJsonPrimitive(&quot;expires_in&quot;)\n</code></pre>\n"}],"owner":{"account_id":18210139,"reputation":21,"user_id":13252819,"display_name":"TootLoops"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1708,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":63912346,"answer_count":3,"score":0,"last_activity_date":1679412171,"creation_date":1600038059,"question_id":63876345,"body_markdown":"I am fairly new to programming with Java but am interested in creating a program that allows for connection to the Spotify API. I am using the [Client Credential Flow][1] authorization process but keep getting `java.io.IOException: insufficient data written` exception when trying to reach the access token. I cannot figure out what information I am missing to complete the request. \r\n\r\nI found a YouTube video of the same process being completed in Python and they utilized the requests feature and .json() to receive the access token. Is there a similar way to complete this in Java?\r\n\r\n    \t\ttry {\r\n\t\tString str = &quot;application/x-www-form-urlencoded&quot;;\r\n\t\tbyte[]  hold = str.getBytes();\r\n\t\t\r\n\t\t//create url\r\n\t\tURL url = new URL(tokenURL);\r\n\t\t//open connection to url\r\n        conn = (HttpURLConnection) url.openConnection();\r\n        conn.setDoOutput(true); \r\n        conn.setDoInput(true);\r\n        \r\n        //setup post headers and body\r\n        conn.setRequestMethod(&quot;POST&quot;);\r\n        conn.setFixedLengthStreamingMode(32);\r\n        conn.setRequestProperty(&quot;Authorization&quot;,String.format(&quot;Basic %s&quot;, clientCredEncode));\r\n        conn.setRequestProperty(&quot;grant_type&quot;, &quot;client_credentials&quot;);\r\n\t\tconn.setRequestProperty(&quot;Content-Type&quot;, &quot;application/x-www-form-urlencoded&quot;);\r\n\t\tconn.setRequestProperty(&quot;user-agent&quot;, &quot;Mozilla/5.0 (Windows NT 6.3; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/45.0.2454.85 Safari/537.36&quot;);\r\n        \r\n\t\t//validate connection\r\n\t\tint val = conn.getResponseCode();\r\n\t\tString response = conn.getResponseMessage();\r\n\t\tSystem.out.println(&quot;response code: &quot; + val);\r\n\t\tSystem.out.println(&quot;response: &quot; + response);\r\n\r\n\t\t}catch(Exception e){\r\n\t\t\tSystem.out.println(&quot;error: &quot; + e); \r\n\t\t\tconn.disconnect();\r\n\t\t}\r\n\r\n \r\n\r\n**PYTHON CODE**\r\nThis code performs the action in python. \r\n\r\n    def spotifyAuth(clientID, clientSecret):\r\n    clientCred = f&quot;{clientID}:{clientSecret}&quot;\r\n    encodedClient = base64.b64encode(clientCred.encode())\r\n\r\n    tokenURL = &quot;https://accounts.spotify.com/api/token&quot;\r\n    method = &quot;POST&quot;\r\n\r\n    tokenData = {&quot;grant_type&quot; : &quot;client_credentials&quot;}\r\n\r\n    tokenHeader = {&quot;Authorization&quot; : f&quot;Basic {encodedClient.decode()}&quot;}\r\n\r\n    r = requests.post(tokenURL, data=tokenData, headers=tokenHeader)\r\n    tokenResponse = r.json()\r\n\r\n    accessToken = tokenResponse[&#39;access_token&#39;]\r\n    expires = tokenResponse[&#39;expires_in&#39;]\r\n\r\n    return accessToken, expires\r\n\r\n\r\n\r\n  [1]: https://developer.spotify.com/documentation/general/guides/authorization-guide/#client-credentials-flow","title":"How to get access token from Spotify API? [java]","body":"<p>I am fairly new to programming with Java but am interested in creating a program that allows for connection to the Spotify API. I am using the <a href=\"https://developer.spotify.com/documentation/general/guides/authorization-guide/#client-credentials-flow\" rel=\"nofollow noreferrer\">Client Credential Flow</a> authorization process but keep getting <code>java.io.IOException: insufficient data written</code> exception when trying to reach the access token. I cannot figure out what information I am missing to complete the request.</p>\n<p>I found a YouTube video of the same process being completed in Python and they utilized the requests feature and .json() to receive the access token. Is there a similar way to complete this in Java?</p>\n<pre><code>        try {\n    String str = &quot;application/x-www-form-urlencoded&quot;;\n    byte[]  hold = str.getBytes();\n    \n    //create url\n    URL url = new URL(tokenURL);\n    //open connection to url\n    conn = (HttpURLConnection) url.openConnection();\n    conn.setDoOutput(true); \n    conn.setDoInput(true);\n    \n    //setup post headers and body\n    conn.setRequestMethod(&quot;POST&quot;);\n    conn.setFixedLengthStreamingMode(32);\n    conn.setRequestProperty(&quot;Authorization&quot;,String.format(&quot;Basic %s&quot;, clientCredEncode));\n    conn.setRequestProperty(&quot;grant_type&quot;, &quot;client_credentials&quot;);\n    conn.setRequestProperty(&quot;Content-Type&quot;, &quot;application/x-www-form-urlencoded&quot;);\n    conn.setRequestProperty(&quot;user-agent&quot;, &quot;Mozilla/5.0 (Windows NT 6.3; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/45.0.2454.85 Safari/537.36&quot;);\n    \n    //validate connection\n    int val = conn.getResponseCode();\n    String response = conn.getResponseMessage();\n    System.out.println(&quot;response code: &quot; + val);\n    System.out.println(&quot;response: &quot; + response);\n\n    }catch(Exception e){\n        System.out.println(&quot;error: &quot; + e); \n        conn.disconnect();\n    }\n</code></pre>\n<p><strong>PYTHON CODE</strong>\nThis code performs the action in python.</p>\n<pre><code>def spotifyAuth(clientID, clientSecret):\nclientCred = f&quot;{clientID}:{clientSecret}&quot;\nencodedClient = base64.b64encode(clientCred.encode())\n\ntokenURL = &quot;https://accounts.spotify.com/api/token&quot;\nmethod = &quot;POST&quot;\n\ntokenData = {&quot;grant_type&quot; : &quot;client_credentials&quot;}\n\ntokenHeader = {&quot;Authorization&quot; : f&quot;Basic {encodedClient.decode()}&quot;}\n\nr = requests.post(tokenURL, data=tokenData, headers=tokenHeader)\ntokenResponse = r.json()\n\naccessToken = tokenResponse['access_token']\nexpires = tokenResponse['expires_in']\n\nreturn accessToken, expires\n</code></pre>\n"},{"tags":["java","jackson-databind"],"owner":{"account_id":4206618,"reputation":808,"user_id":4180447,"accept_rate":47,"display_name":"tarekahf"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":51,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679412124,"creation_date":1679412124,"question_id":75803116,"body_markdown":"I am getting the above-reported flaw by the scan tool:\r\n\r\n```\r\nImproper Restriction of XML External Entity Reference (CWE ID 611)\r\njackson-databind-2.13.0-rc1.jar   - com/.../ext/DOMSerializer.java 45\r\nwoodstox-core-6.2.4.jar  -  com/.../reader/GrammarReader.java 526\r\nwoodstox-core-6.2.4.jar  -  com/.../WSDLSchemaReader.java 118\r\n```\r\n\r\nI got the same flaw in my code, and I was able to resolve it. But how can I handle this flaw in the jackson-databind dependency? Is there anything I should do in my code to prevent such flaws to be reported?\r\n\r\nI did research this issue, and the closest thing I found is this: https://github.com/FasterXML/jackson-databind/issues/3387\r\n\r\nOther flaws reported which I need to resolve also:\r\n\r\n```\r\nExternal Control of File Name or Path (CWE ID 73)\r\nwoodstox-core-6.2.4.jar  - com/.../wstx/util/URLUtil.java 49\r\nwoodstox-core-6.2.4.jar  - com/.../wstx/util/URLUtil.java 85\r\nwoodstox-core-6.2.4.jar  - com/.../wstx/util/URLUtil.java 155\r\nstax2-api-4.2.1.jar      -.../XMLValidationSchemaFactory.java 153\r\n\r\n\r\nUse of Externally-Controlled Input to Select Classes or Code (&#39;Unsafe Reflection&#39;) (CWE ID470)\r\nwoodstox-core-6.2.4.jar  -  .../DatatypeLibraryLoader$Service$Loader.java 1\r\nwoodstox-core-6.2.4.jar  -  .../DatatypeLibraryLoader$Service$Loader2.java 1\r\nwoodstox-core-6.2.4.jar  -  com/.../VerifierFactory.java 157\r\nstax2-api-4.2.1.jar   -  .../XMLValidationSchemaFactory.java 302\r\nstax2-api-4.2.1.jar   -  .../XMLValidationSchemaFactory.java304\r\n```","title":"Scan tool reporting Improper Restriction of XML External Entity Reference (CWE ID 611) in fasterXML jackson-databind and related dependencies","body":"<p>I am getting the above-reported flaw by the scan tool:</p>\n<pre><code>Improper Restriction of XML External Entity Reference (CWE ID 611)\njackson-databind-2.13.0-rc1.jar   - com/.../ext/DOMSerializer.java 45\nwoodstox-core-6.2.4.jar  -  com/.../reader/GrammarReader.java 526\nwoodstox-core-6.2.4.jar  -  com/.../WSDLSchemaReader.java 118\n</code></pre>\n<p>I got the same flaw in my code, and I was able to resolve it. But how can I handle this flaw in the jackson-databind dependency? Is there anything I should do in my code to prevent such flaws to be reported?</p>\n<p>I did research this issue, and the closest thing I found is this: <a href=\"https://github.com/FasterXML/jackson-databind/issues/3387\" rel=\"nofollow noreferrer\">https://github.com/FasterXML/jackson-databind/issues/3387</a></p>\n<p>Other flaws reported which I need to resolve also:</p>\n<pre><code>External Control of File Name or Path (CWE ID 73)\nwoodstox-core-6.2.4.jar  - com/.../wstx/util/URLUtil.java 49\nwoodstox-core-6.2.4.jar  - com/.../wstx/util/URLUtil.java 85\nwoodstox-core-6.2.4.jar  - com/.../wstx/util/URLUtil.java 155\nstax2-api-4.2.1.jar      -.../XMLValidationSchemaFactory.java 153\n\n\nUse of Externally-Controlled Input to Select Classes or Code ('Unsafe Reflection') (CWE ID470)\nwoodstox-core-6.2.4.jar  -  .../DatatypeLibraryLoader$Service$Loader.java 1\nwoodstox-core-6.2.4.jar  -  .../DatatypeLibraryLoader$Service$Loader2.java 1\nwoodstox-core-6.2.4.jar  -  com/.../VerifierFactory.java 157\nstax2-api-4.2.1.jar   -  .../XMLValidationSchemaFactory.java 302\nstax2-api-4.2.1.jar   -  .../XMLValidationSchemaFactory.java304\n</code></pre>\n"},{"tags":["java","instrumentation","open-telemetry"],"answers":[{"tags":[],"owner":{"account_id":1327639,"reputation":656,"user_id":1272149,"accept_rate":89,"display_name":"Danny Dyla"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1679411968,"creation_date":1679411968,"answer_id":75803096,"question_id":75755265,"body_markdown":"The `AutoConfiguredOpenTelemetrySdk` is just a wrapper around the builder classes for the SDK and its component pieces. You can use those builder classes directly.\r\n\r\nYou can find the documentation for this type of setup here: https://opentelemetry.io/docs/instrumentation/java/manual/#sdk-configuration\r\n\r\n```\r\n// Create an instance of the OpenTelemetrySdk class.\r\nOpenTelemetrySdk openTelemetrySdk = OpenTelemetrySdk.builder()\r\n    .setTracerProvider(\r\n        SdkTracerProvider.builder()\r\n            // Customize the resource if desired.\r\n            .setResource(Resource.create()\r\n                .merge(this.customizeResource(Resource.getDefault()))\r\n            )\r\n            .build()\r\n    )\r\n    .build();\r\n\r\n// Create an instance of the OpenTelemetry interface using the OpenTelemetrySdk.\r\nOpenTelemetry openTelemetry = openTelemetrySdk.getOpenTelemetry();\r\n```","title":"OpenTelemetry configuration without AutoConfiguredOpenTelemetrySdk","body":"<p>The <code>AutoConfiguredOpenTelemetrySdk</code> is just a wrapper around the builder classes for the SDK and its component pieces. You can use those builder classes directly.</p>\n<p>You can find the documentation for this type of setup here: <a href=\"https://opentelemetry.io/docs/instrumentation/java/manual/#sdk-configuration\" rel=\"nofollow noreferrer\">https://opentelemetry.io/docs/instrumentation/java/manual/#sdk-configuration</a></p>\n<pre><code>// Create an instance of the OpenTelemetrySdk class.\nOpenTelemetrySdk openTelemetrySdk = OpenTelemetrySdk.builder()\n    .setTracerProvider(\n        SdkTracerProvider.builder()\n            // Customize the resource if desired.\n            .setResource(Resource.create()\n                .merge(this.customizeResource(Resource.getDefault()))\n            )\n            .build()\n    )\n    .build();\n\n// Create an instance of the OpenTelemetry interface using the OpenTelemetrySdk.\nOpenTelemetry openTelemetry = openTelemetrySdk.getOpenTelemetry();\n</code></pre>\n"}],"owner":{"account_id":463786,"reputation":668,"user_id":866889,"accept_rate":60,"display_name":"Dmitry Aleksandrov"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":369,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75803096,"answer_count":1,"score":0,"last_activity_date":1679411968,"creation_date":1678964146,"question_id":75755265,"body_markdown":"I need to configure OpenTelemetry without using AutoConfiguredOpenTelemetrySdk. \r\nHow can I achieve the same functionality of the code below:\r\n\r\n```\r\n OpenTelemetry openTelemetry = AutoConfiguredOpenTelemetrySdk.builder()\r\n                        .addPropertiesCustomizer(x -&gt; telemetryProperties)\r\n                        .addResourceCustomizer(this::customizeResource)\r\n                        .setServiceClassLoader(Thread.currentThread().getContextClassLoader())\r\n                        .setResultAsGlobal(false)\r\n                        .registerShutdownHook(false)\r\n                        .build()\r\n                        .getOpenTelemetrySdk();\r\n```\r\n\r\nThank you!","title":"OpenTelemetry configuration without AutoConfiguredOpenTelemetrySdk","body":"<p>I need to configure OpenTelemetry without using AutoConfiguredOpenTelemetrySdk.\nHow can I achieve the same functionality of the code below:</p>\n<pre><code> OpenTelemetry openTelemetry = AutoConfiguredOpenTelemetrySdk.builder()\n                        .addPropertiesCustomizer(x -&gt; telemetryProperties)\n                        .addResourceCustomizer(this::customizeResource)\n                        .setServiceClassLoader(Thread.currentThread().getContextClassLoader())\n                        .setResultAsGlobal(false)\n                        .registerShutdownHook(false)\n                        .build()\n                        .getOpenTelemetrySdk();\n</code></pre>\n<p>Thank you!</p>\n"},{"tags":["java","selenium-webdriver"],"comments":[{"owner":{"account_id":6647496,"reputation":8489,"user_id":5131026,"accept_rate":75,"display_name":"Ely"},"score":1,"creation_date":1679391077,"post_id":75799152,"comment_id":133709017,"body_markdown":"Does this answer your question? [The constructor WebDriverWait(chromeDriver, int) is undefined](https://stackoverflow.com/questions/71761074/the-constructor-webdriverwaitchromedriver-int-is-undefined)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/71761074/the-constructor-webdriverwaitchromedriver-int-is-undefined\">The constructor WebDriverWait(chromeDriver, int) is undefined</a>"},{"owner":{"account_id":6077817,"reputation":1213,"user_id":4744568,"display_name":"pcalkins"},"score":0,"creation_date":1679423863,"post_id":75799152,"comment_id":133718954,"body_markdown":"Don&#39;t recreate the webdriverwait class, just know that they changed it&#39;s constructor so that it takes a time unit instead of &quot;int&quot;.  So change your call to using a Duration instead of an int.","body":"Don&#39;t recreate the webdriverwait class, just know that they changed it&#39;s constructor so that it takes a time unit instead of &quot;int&quot;.  So change your call to using a Duration instead of an int."},{"owner":{"account_id":28073854,"reputation":1,"user_id":21446038,"display_name":"janhvi"},"score":0,"creation_date":1679479458,"post_id":75799152,"comment_id":133728033,"body_markdown":"Thank you, i tried ur solution and it&#39;s working fine","body":"Thank you, i tried ur solution and it&#39;s working fine"}],"owner":{"account_id":28073854,"reputation":1,"user_id":21446038,"display_name":"janhvi"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679411883,"creation_date":1679389525,"question_id":75799152,"body_markdown":"After updating the selenium version ,getting error `The constructor WebDriverWait(WebDriver, int) is undefined`. Please I need a solution for this. \r\n\r\nI tried this solution but facing issue  \r\n````\r\npublic WebDriverWait(WebDriver driver, Duration timeout) {\r\n    this(\r\n        driver,\r\n        timeout,\r\n        Duration.ofMillis(DEFAULT_SLEEP_TIMEOUT),\r\n        Clock.systemDefaultZone(),\r\n        Sleeper.SYSTEM_SLEEPER);\r\n  }\r\n````","title":"After updating the selenium version getting","body":"<p>After updating the selenium version ,getting error <code>The constructor WebDriverWait(WebDriver, int) is undefined</code>. Please I need a solution for this.</p>\n<p>I tried this solution but facing issue</p>\n<pre><code>public WebDriverWait(WebDriver driver, Duration timeout) {\n    this(\n        driver,\n        timeout,\n        Duration.ofMillis(DEFAULT_SLEEP_TIMEOUT),\n        Clock.systemDefaultZone(),\n        Sleeper.SYSTEM_SLEEPER);\n  }\n</code></pre>\n"},{"tags":["java","mqtt","erl","emqx"],"answers":[{"tags":[],"owner":{"account_id":1643620,"reputation":1,"user_id":1515605,"display_name":"user1515605"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679411868,"creation_date":1678864961,"answer_id":75741573,"question_id":75720417,"body_markdown":"There are three options\r\n1. Put the config somewhere outside of `emqx` release directory, and use absolute path in the `hocon:load` call\r\n2. Call `code:priv_dir(emqx_plugin_messenger)` to get the path of your app&#39;s `priv` directory\r\n3. Put the config in `EMQX data/` directory, and call `emqx:data_dir()` to get it.\r\n\r\n","title":"How to config and get value in plugin emqx","body":"<p>There are three options</p>\n<ol>\n<li>Put the config somewhere outside of <code>emqx</code> release directory, and use absolute path in the <code>hocon:load</code> call</li>\n<li>Call <code>code:priv_dir(emqx_plugin_messenger)</code> to get the path of your app's <code>priv</code> directory</li>\n<li>Put the config in <code>EMQX data/</code> directory, and call <code>emqx:data_dir()</code> to get it.</li>\n</ol>\n"}],"owner":{"account_id":28004565,"reputation":1,"user_id":21388183,"display_name":"Nguyễn Ho&#224;ng Anh"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":160,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1679411868,"creation_date":1678702039,"question_id":75720417,"body_markdown":"i&#39;m using [emqx v5](https://github.com/emqx/emqx) to pub,sub, connect, v.v.. Meanwhile, I&#39;ve been developing my plugin and plugin template from [this](https://github.com/emqx/emqx-plugin-template). \r\n\r\nNormally, in emqx-plugin-template.erl, i declare my constant like this\r\n\r\n![enter image description here](https://i.stack.imgur.com/5auE1.png) \r\n\r\nand i can use it from all funtion in this file. But now i want to save them in pri/config.hocon and get them to use similarly. \r\nThis is structure of plugin\r\n\r\n![enter image description here](https://i.stack.imgur.com/ukZo3.png)\r\n\r\nI&#39;m having a hard time figuring out how to get them out and how to declare them so I can use them in as many functions as before. Please guide me.\r\n\r\nI try: hocon:load(file name) and maps:get(key, Config) but is is match to a file in emqx/_build/emqx/rel/emqx/config.hocon (this is server emqx)..&#237;t&#39;s work but that&#39;s not what I want because the author of the template already has pri/config.hocon available and i just want to touch my plugin not eqmx server","title":"How to config and get value in plugin emqx","body":"<p>i'm using <a href=\"https://github.com/emqx/emqx\" rel=\"nofollow noreferrer\">emqx v5</a> to pub,sub, connect, v.v.. Meanwhile, I've been developing my plugin and plugin template from <a href=\"https://github.com/emqx/emqx-plugin-template\" rel=\"nofollow noreferrer\">this</a>.</p>\n<p>Normally, in emqx-plugin-template.erl, i declare my constant like this</p>\n<p><img src=\"https://i.stack.imgur.com/5auE1.png\" alt=\"enter image description here\" /></p>\n<p>and i can use it from all funtion in this file. But now i want to save them in pri/config.hocon and get them to use similarly.\nThis is structure of plugin</p>\n<p><img src=\"https://i.stack.imgur.com/ukZo3.png\" alt=\"enter image description here\" /></p>\n<p>I'm having a hard time figuring out how to get them out and how to declare them so I can use them in as many functions as before. Please guide me.</p>\n<p>I try: hocon:load(file name) and maps:get(key, Config) but is is match to a file in emqx/_build/emqx/rel/emqx/config.hocon (this is server emqx)..ít's work but that's not what I want because the author of the template already has pri/config.hocon available and i just want to touch my plugin not eqmx server</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":1263095,"reputation":4463,"user_id":1220955,"accept_rate":42,"display_name":"Hkachhia"},"score":0,"creation_date":1679389275,"post_id":75799069,"comment_id":133708515,"body_markdown":"Can you please share the code that you have tried?","body":"Can you please share the code that you have tried?"},{"owner":{"account_id":17520379,"reputation":1536,"user_id":12706564,"display_name":"Emanuel Trandafir"},"score":0,"creation_date":1679389281,"post_id":75799069,"comment_id":133708517,"body_markdown":"can you share what you&#39;ve tried and why it failed?","body":"can you share what you&#39;ve tried and why it failed?"},{"owner":{"account_id":16165354,"reputation":224,"user_id":11670453,"display_name":"Bijal Sutariya"},"score":0,"creation_date":1679389284,"post_id":75799069,"comment_id":133708518,"body_markdown":"what issue are you facing by using https://stackoverflow.com/a/30183873/11670453?","body":"what issue are you facing by using <a href=\"https://stackoverflow.com/a/30183873/11670453\">stackoverflow.com/a/30183873/11670453</a>?"}],"answers":[{"tags":[],"owner":{"account_id":6306175,"reputation":6201,"user_id":4899193,"display_name":"Usagi Miyamoto"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1679408990,"creation_date":1679389337,"answer_id":75799117,"question_id":75799069,"body_markdown":"Try something like this:\r\n\r\n```\r\nString result = source.replaceFirst(&quot;\\\\.webp$&quot;,&quot;.jpeg&quot;).replace(&quot;webp&quot;,&quot;jpg&quot;);\r\n```\r\n\r\n`replaceFirst()` will replace the extention, then `replace()` will replace the rest...","title":"Replace words in Java string","body":"<p>Try something like this:</p>\n<pre><code>String result = source.replaceFirst(&quot;\\\\.webp$&quot;,&quot;.jpeg&quot;).replace(&quot;webp&quot;,&quot;jpg&quot;);\n</code></pre>\n<p><code>replaceFirst()</code> will replace the extention, then <code>replace()</code> will replace the rest...</p>\n"}],"owner":{"account_id":26260429,"reputation":195,"user_id":19931837,"display_name":"Manisha"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":48,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"closed_date":1679398173,"answer_count":1,"score":-3,"last_activity_date":1679411855,"creation_date":1679389069,"question_id":75799069,"body_markdown":"I have a String that looks like this:\r\n\r\n```\r\ndownloadUrl = &quot;https://example.com/uploads/images/quotes/hi/webp/dard-status-shayari-68854.webp&quot;;\r\n```\r\n\r\nIt is basically a URL address. I&#39;m looking to replace `webp` with `jpg` and `.webp` with `.jpeg`\r\n\r\nI need output like the below:\r\n\r\n```\r\nhttps://example.com/uploads/images/quotes/hi/jpg/dard-status-shayari-68854.jpeg\r\n```\r\n\r\nI tried the solution given [here][1] but it&#39;s not working for me.\r\n\r\n  [1]: https://stackoverflow.com/questions/30183807/java-string-replace-exact-word","title":"Replace words in Java string","body":"<p>I have a String that looks like this:</p>\n<pre><code>downloadUrl = &quot;https://example.com/uploads/images/quotes/hi/webp/dard-status-shayari-68854.webp&quot;;\n</code></pre>\n<p>It is basically a URL address. I'm looking to replace <code>webp</code> with <code>jpg</code> and <code>.webp</code> with <code>.jpeg</code></p>\n<p>I need output like the below:</p>\n<pre><code>https://example.com/uploads/images/quotes/hi/jpg/dard-status-shayari-68854.jpeg\n</code></pre>\n<p>I tried the solution given <a href=\"https://stackoverflow.com/questions/30183807/java-string-replace-exact-word\">here</a> but it's not working for me.</p>\n"},{"tags":["java","android-studio","animation","rotation","game-engine"],"comments":[{"owner":{"account_id":12722657,"reputation":67,"user_id":9242514,"accept_rate":33,"display_name":"Chralt"},"score":0,"creation_date":1517423207,"post_id":48548991,"comment_id":84093982,"body_markdown":"I know, the center point is the first point when the animation starts, but it does not change during animation. How can i fix it?","body":"I know, the center point is the first point when the animation starts, but it does not change during animation. How can i fix it?"}],"owner":{"account_id":12722657,"reputation":67,"user_id":9242514,"accept_rate":33,"display_name":"Chralt"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1679411613,"creation_date":1517422941,"question_id":48548991,"body_markdown":"I&#39;ve got one rotation animation to rotate one imageView around one fixed position (the center). Now I want to know in every second where the imageView, which rotates, is. In other words the imageView which rotates is a circle and I want to know the center point of this imageView during animation.\r\n\r\nThis is my code for the rotation:\r\n\r\n        WindowManager wm = getWindowManager();\r\n        Display disp = wm.getDefaultDisplay();\r\n        Point size = new Point();\r\n        disp.getSize(size);\r\n        screenWidth = size.x;\r\n        ImageView circle = (ImageView) findViewById(R.id.circle);\r\n        circle.setTranslationX(screenWidth/4);\r\n        RotateAnimation rotation = new RotateAnimation(0, 359, 50f, 50f);\r\n        rotation.setDuration(5000);\r\n        rotation.setRepeatCount(-1);\r\n        rotation.setInterpolator(new LinearInterpolator());\r\n        circle.startAnimation(rotation);\r\n\r\nIf I do this, it doesn&#180;t exactly know the location, something else... Could you explain?\r\n\r\n        ImageView circle = (ImageView)findViewById(R.id.circle);\r\n        circleX = circle.getX();\r\n        circleY = circle.getY();\r\n        int circleCenterX = (int) circleX + circle.getWidth() / 2;\r\n        int circleCenterY = (int) circleY + circle.getHeight() / 2;","title":"Knowing the center point of an imageView rotation during animation","body":"<p>I've got one rotation animation to rotate one imageView around one fixed position (the center). Now I want to know in every second where the imageView, which rotates, is. In other words the imageView which rotates is a circle and I want to know the center point of this imageView during animation.</p>\n<p>This is my code for the rotation:</p>\n<pre><code>    WindowManager wm = getWindowManager();\n    Display disp = wm.getDefaultDisplay();\n    Point size = new Point();\n    disp.getSize(size);\n    screenWidth = size.x;\n    ImageView circle = (ImageView) findViewById(R.id.circle);\n    circle.setTranslationX(screenWidth/4);\n    RotateAnimation rotation = new RotateAnimation(0, 359, 50f, 50f);\n    rotation.setDuration(5000);\n    rotation.setRepeatCount(-1);\n    rotation.setInterpolator(new LinearInterpolator());\n    circle.startAnimation(rotation);\n</code></pre>\n<p>If I do this, it doesn´t exactly know the location, something else... Could you explain?</p>\n<pre><code>    ImageView circle = (ImageView)findViewById(R.id.circle);\n    circleX = circle.getX();\n    circleY = circle.getY();\n    int circleCenterX = (int) circleX + circle.getWidth() / 2;\n    int circleCenterY = (int) circleY + circle.getHeight() / 2;\n</code></pre>\n"},{"tags":["java","selenium-webdriver"],"answers":[{"tags":[],"owner":{"account_id":16422586,"reputation":1841,"user_id":11863448,"display_name":"Akzy"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1679411433,"creation_date":1679411433,"answer_id":75802989,"question_id":75799659,"body_markdown":"The line `ch.addArguments(&quot;--remote-allow-origins=*&quot;);` is expecting the array of strings and you are passing a string, so remove `s` from  `addArguments`\r\n\r\nLike you have to change your code \r\n\r\n***From*** \r\n\r\n    ChromeOptions ch = new ChromeOptions();\r\n    ch.addArguments(&quot;--remote-allow-origins=*&quot;);\r\n    WebDriver driver = new ChromeDriver(ch);\r\n\r\n***To***\r\n\r\n    ChromeOptions ch = new ChromeOptions();\r\n    ch.addArgument(&quot;--remote-allow-origins=*&quot;);\r\n    WebDriver driver = new ChromeDriver(ch);","title":"ChromeDriver issue in 111 version","body":"<p>The line <code>ch.addArguments(&quot;--remote-allow-origins=*&quot;);</code> is expecting the array of strings and you are passing a string, so remove <code>s</code> from  <code>addArguments</code></p>\n<p>Like you have to change your code</p>\n<p><em><strong>From</strong></em></p>\n<pre><code>ChromeOptions ch = new ChromeOptions();\nch.addArguments(&quot;--remote-allow-origins=*&quot;);\nWebDriver driver = new ChromeDriver(ch);\n</code></pre>\n<p><em><strong>To</strong></em></p>\n<pre><code>ChromeOptions ch = new ChromeOptions();\nch.addArgument(&quot;--remote-allow-origins=*&quot;);\nWebDriver driver = new ChromeDriver(ch);\n</code></pre>\n"}],"owner":{"account_id":28074329,"reputation":11,"user_id":21446441,"display_name":"praveen"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":200,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1679411433,"creation_date":1679392526,"question_id":75799659,"body_markdown":"````\r\n \tChromeOptions ch = new ChromeOptions();\r\n\tch.addArguments(&quot;--remote-allow-origins=*&quot;);\r\n\tWebDriver driver = new ChromeDriver(ch);\r\n````\r\n````\r\nException in thread &quot;main&quot; java.lang.Error: Unresolved compilation problem: \r\n\tThe method addArguments(String[]) in the type ChromiumOptions&lt;ChromeOptions&gt; is not applicable for the arguments (String)\r\n````\r\nHow to resolve addArguments issue?","title":"ChromeDriver issue in 111 version","body":"<pre><code>    ChromeOptions ch = new ChromeOptions();\n    ch.addArguments(&quot;--remote-allow-origins=*&quot;);\n    WebDriver driver = new ChromeDriver(ch);\n</code></pre>\n<pre><code>Exception in thread &quot;main&quot; java.lang.Error: Unresolved compilation problem: \n    The method addArguments(String[]) in the type ChromiumOptions&lt;ChromeOptions&gt; is not applicable for the arguments (String)\n</code></pre>\n<p>How to resolve addArguments issue?</p>\n"},{"tags":["java","android","android-activity","android-location"],"answers":[{"tags":[],"owner":{"account_id":1233070,"reputation":9484,"user_id":1197251,"display_name":"dominicoder"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1679411276,"creation_date":1679411276,"answer_id":75802955,"question_id":75802447,"body_markdown":"You can mitigate the delay in getting updates by using [the last known location][1], which presumably will be pretty fresh if you&#39;ve obtained it in one activity before moving on to the next.\r\n\r\nIf that is insufficient for you needs, you can cache the location provider instance either via a singleton or in your custom application class (my preference, as the object belongs to the whole &quot;app&quot;).\r\n\r\n**Singleton Example:**\r\n\r\n    public class LocationProviderSingleton {\r\n        private static FusedLocationProviderClient instance\r\n\r\n        public static FusedLocationProviderClient get(Context context) {\r\n            if (instance == null) {\r\n                instance = LocationServices.getFusedLocationProviderClient(context.getApplicationContext())\r\n            }\r\n\r\n            return instance;\r\n        }\r\n    }\r\n\r\n**Application Example**\r\n\r\n    public class MyApp extends Application {\r\n        private FusedLocationProviderClient mLocationProvider;\r\n\r\n        public void onCreate() {\r\n            mLocationProvider = LocationServices.getFusedLocationProviderClient(this)\r\n        }\r\n\r\n        public FusedLocationProviderClient getLocationProvider() {\r\n            return mLocationProvider;\r\n        }\r\n    }\r\n\r\nThen in your activities:\r\n\r\n    LocationProviderSingleton.get(this)\r\n    // OR\r\n    (getApplicationContext() as MyApp).getLocationProvider()\r\n\r\n  [1]: https://developer.android.com/training/location/retrieve-current.html","title":"Can I share a FusedLocationProviderClient between several activities?","body":"<p>You can mitigate the delay in getting updates by using <a href=\"https://developer.android.com/training/location/retrieve-current.html\" rel=\"nofollow noreferrer\">the last known location</a>, which presumably will be pretty fresh if you've obtained it in one activity before moving on to the next.</p>\n<p>If that is insufficient for you needs, you can cache the location provider instance either via a singleton or in your custom application class (my preference, as the object belongs to the whole &quot;app&quot;).</p>\n<p><strong>Singleton Example:</strong></p>\n<pre><code>public class LocationProviderSingleton {\n    private static FusedLocationProviderClient instance\n\n    public static FusedLocationProviderClient get(Context context) {\n        if (instance == null) {\n            instance = LocationServices.getFusedLocationProviderClient(context.getApplicationContext())\n        }\n\n        return instance;\n    }\n}\n</code></pre>\n<p><strong>Application Example</strong></p>\n<pre><code>public class MyApp extends Application {\n    private FusedLocationProviderClient mLocationProvider;\n\n    public void onCreate() {\n        mLocationProvider = LocationServices.getFusedLocationProviderClient(this)\n    }\n\n    public FusedLocationProviderClient getLocationProvider() {\n        return mLocationProvider;\n    }\n}\n</code></pre>\n<p>Then in your activities:</p>\n<pre><code>LocationProviderSingleton.get(this)\n// OR\n(getApplicationContext() as MyApp).getLocationProvider()\n</code></pre>\n"}],"owner":{"account_id":1601476,"reputation":547,"user_id":1482428,"accept_rate":18,"display_name":"Henrik Berg"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75802955,"answer_count":1,"score":1,"last_activity_date":1679411276,"creation_date":1679408598,"question_id":75802447,"body_markdown":"I have an app which uses positioning from GPS, like this:\r\n\r\n        FusedLocationProviderClient _locationProviderClient = LocationServices.getFusedLocationProviderClient(context);\r\n\r\n        locationRequest = LocationRequest.create();\r\n        locationRequest.setPriority(LocationRequest.PRIORITY_HIGH_ACCURACY);\r\n        locationRequest.setInterval(500);\r\n        locationCallback = new LocationCallback() {\r\n            @Override\r\n            public void onLocationResult(LocationResult locationResult) {\r\n                if (locationResult == null) {\r\n                    return;\r\n                }\r\n                for (Location location : locationResult.getLocations()) {\r\n                    if (location != null) {\r\n                        // Do some stuff with the location\r\n                    }\r\n                }\r\n            }\r\n        };\r\n\r\n        _locationProviderClient.requestLocationUpdates(locationRequest, locationCallback, Looper.getMainLooper());\r\n\r\nNow, this works ok, although there is often a few seconds delay on my phone before it starts working. I can live with that, but a bigger problem is that my app consists of multiple activities, and each time it switches to a new activity, it takes a few seconds for the new activity to get location updates (since I execute the above code again in the new activity&#39;s &lt;code&gt;onCreate&lt;/code&gt;-method).\r\n\r\nSo my question is: Can I share the &lt;code&gt;FusedLocationProviderClient&lt;/code&gt; between activities, and if so, how?","title":"Can I share a FusedLocationProviderClient between several activities?","body":"<p>I have an app which uses positioning from GPS, like this:</p>\n<pre><code>    FusedLocationProviderClient _locationProviderClient = LocationServices.getFusedLocationProviderClient(context);\n\n    locationRequest = LocationRequest.create();\n    locationRequest.setPriority(LocationRequest.PRIORITY_HIGH_ACCURACY);\n    locationRequest.setInterval(500);\n    locationCallback = new LocationCallback() {\n        @Override\n        public void onLocationResult(LocationResult locationResult) {\n            if (locationResult == null) {\n                return;\n            }\n            for (Location location : locationResult.getLocations()) {\n                if (location != null) {\n                    // Do some stuff with the location\n                }\n            }\n        }\n    };\n\n    _locationProviderClient.requestLocationUpdates(locationRequest, locationCallback, Looper.getMainLooper());\n</code></pre>\n<p>Now, this works ok, although there is often a few seconds delay on my phone before it starts working. I can live with that, but a bigger problem is that my app consists of multiple activities, and each time it switches to a new activity, it takes a few seconds for the new activity to get location updates (since I execute the above code again in the new activity's <code>onCreate</code>-method).</p>\n<p>So my question is: Can I share the <code>FusedLocationProviderClient</code> between activities, and if so, how?</p>\n"},{"tags":["java","spring-boot","aws-sdk"],"comments":[{"owner":{"account_id":184870,"reputation":118711,"user_id":421195,"accept_rate":83,"display_name":"paulsm4"},"score":1,"creation_date":1679411753,"post_id":75802834,"comment_id":133715221,"body_markdown":"Q: Why do you think there might be any &quot;compatilibity issues&quot;?  Outside of &quot;minimum Java&quot; (for example, I doubt you could use Java 1.2 with most contemporary libraries)? Why not just use the latest/greatest AWS SDK in your Sprint Boot app?  There *shouldn&#39;t* be any strict dependency between Spring Boot version and AWS SDK version, should there?","body":"Q: Why do you think there might be any &quot;compatilibity issues&quot;?  Outside of &quot;minimum Java&quot; (for example, I doubt you could use Java 1.2 with most contemporary libraries)? Why not just use the latest/greatest AWS SDK in your Sprint Boot app?  There <i>shouldn&#39;t</i> be any strict dependency between Spring Boot version and AWS SDK version, should there?"}],"answers":[{"tags":[],"owner":{"account_id":2754668,"reputation":389,"user_id":2373122,"display_name":"David Lounsbrough"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679411165,"creation_date":1679411165,"answer_id":75802930,"question_id":75802834,"body_markdown":"It looks like version 2 of the AWS SDK would be supported for Java. \r\n\r\nRelevant links:\r\n\r\n[https://docs.aws.amazon.com/sdkref/latest/guide/version-support-matrix.html][1]\r\n\r\n[https://github.com/aws/aws-sdk-java-v2][2]\r\n\r\n[https://awspring.io/learn/introduction/#versions][3]\r\n\r\n\r\n  [1]: https://docs.aws.amazon.com/sdkref/latest/guide/version-support-matrix.html\r\n  [2]: https://github.com/aws/aws-sdk-java-v2\r\n  [3]: https://awspring.io/learn/introduction/#versions","title":"What&#39;s the AWS SDK version that&#39;s compatible with Spring Boot 2.7.9?","body":"<p>It looks like version 2 of the AWS SDK would be supported for Java.</p>\n<p>Relevant links:</p>\n<p><a href=\"https://docs.aws.amazon.com/sdkref/latest/guide/version-support-matrix.html\" rel=\"nofollow noreferrer\">https://docs.aws.amazon.com/sdkref/latest/guide/version-support-matrix.html</a></p>\n<p><a href=\"https://github.com/aws/aws-sdk-java-v2\" rel=\"nofollow noreferrer\">https://github.com/aws/aws-sdk-java-v2</a></p>\n<p><a href=\"https://awspring.io/learn/introduction/#versions\" rel=\"nofollow noreferrer\">https://awspring.io/learn/introduction/#versions</a></p>\n"}],"owner":{"account_id":2802819,"reputation":81,"user_id":2410726,"display_name":"SERGIO STATERI JUNIOR"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":929,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1679411165,"creation_date":1679410733,"question_id":75802834,"body_markdown":"What&#39;s the AWS SDK version that&#39;s compatible with Spring Boot 2.7.9?\r\nIs there some compatibility matrix where I can know which version of each one I should use?\r\n\r\nThanks.","title":"What&#39;s the AWS SDK version that&#39;s compatible with Spring Boot 2.7.9?","body":"<p>What's the AWS SDK version that's compatible with Spring Boot 2.7.9?\nIs there some compatibility matrix where I can know which version of each one I should use?</p>\n<p>Thanks.</p>\n"},{"tags":["java","intellij-idea"],"comments":[{"owner":{"account_id":36734,"reputation":392117,"user_id":104891,"display_name":"CrazyCoder"},"score":0,"creation_date":1679411742,"post_id":75802923,"comment_id":133715210,"body_markdown":"See [this comment](https://youtrack.jetbrains.com/issue/IDEA-307266/Source-options-5-and-6-no-longer-supported.-Is-Java-1.6-no-longer-supported-by-IntelliJ-2022.3#focus=Comments-27-6692930.0-0) for the explanation. TL;DR: IntelliJ IDEA uses JDK 11+ for compilation, but the target bytecode can be still 1.8 or 1.6.","body":"See <a href=\"https://youtrack.jetbrains.com/issue/IDEA-307266/Source-options-5-and-6-no-longer-supported.-Is-Java-1.6-no-longer-supported-by-IntelliJ-2022.3#focus=Comments-27-6692930.0-0\" rel=\"nofollow noreferrer\">this comment</a> for the explanation. TL;DR: IntelliJ IDEA uses JDK 11+ for compilation, but the target bytecode can be still 1.8 or 1.6."}],"owner":{"account_id":8809630,"reputation":84,"user_id":6583060,"display_name":"Daiql"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679411151,"creation_date":1679411151,"question_id":75802923,"body_markdown":"When I uncheck this option and build project, idea will use Idea-setup-root\\jbr\\bin\\java.exe to build which current version is 17.0.6.\r\n\r\nBut I want idea build this project use Project JDK whick version is 1.8, although I set the Project JDK and Module JDK used Project JDK, it still doesn&#39;t work!\r\n\r\nThis is wired...","title":"How &quot;Use compiler from module target JDK when possible&quot; option works in IDEA?","body":"<p>When I uncheck this option and build project, idea will use Idea-setup-root\\jbr\\bin\\java.exe to build which current version is 17.0.6.</p>\n<p>But I want idea build this project use Project JDK whick version is 1.8, although I set the Project JDK and Module JDK used Project JDK, it still doesn't work!</p>\n<p>This is wired...</p>\n"},{"tags":["java","set"],"answers":[{"tags":[],"owner":{"account_id":100718,"reputation":43156,"user_id":271357,"accept_rate":83,"display_name":"dacwe"},"down_vote_count":1,"up_vote_count":140,"is_accepted":true,"score":139,"last_activity_date":1454062917,"creation_date":1327920094,"answer_id":9062603,"question_id":9062574,"body_markdown":"Since a `Set` does not contain duplicate entries, you can therefore combine the two by:\r\n\r\n    newStringSet.addAll(oldStringSet);\r\n\r\n*It does not matter if you add things twice, the set will only contain the element once... e.g it&#39;s no need to check using `contains` method.*","title":"Is there a better way to combine two string sets in java?","body":"<p>Since a <code>Set</code> does not contain duplicate entries, you can therefore combine the two by:</p>\n\n<pre><code>newStringSet.addAll(oldStringSet);\n</code></pre>\n\n<p><em>It does not matter if you add things twice, the set will only contain the element once... e.g it's no need to check using <code>contains</code> method.</em></p>\n"},{"tags":[],"owner":{"account_id":1049835,"reputation":3025,"user_id":1054036,"display_name":"Viruzzo"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1327920122,"creation_date":1327920122,"answer_id":9062609,"question_id":9062574,"body_markdown":"http://docs.oracle.com/javase/7/docs/api/java/util/Set.html#addAll(java.util.Collection)\r\n\r\nSince sets can&#39;t have duplicates, just adding all the elements of one to the other generates the correct union of the two.","title":"Is there a better way to combine two string sets in java?","body":"<p><a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/Set.html#addAll(java.util.Collection\" rel=\"nofollow\">http://docs.oracle.com/javase/7/docs/api/java/util/Set.html#addAll(java.util.Collection</a>)</p>\n\n<p>Since sets can't have duplicates, just adding all the elements of one to the other generates the correct union of the two.</p>\n"},{"tags":[],"owner":{"account_id":180424,"reputation":10339,"user_id":413735,"accept_rate":86,"display_name":"tobiasbayer"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1327920123,"creation_date":1327920123,"answer_id":9062610,"question_id":9062574,"body_markdown":"Just use `newStringSet.addAll(oldStringSet)`. No need to check for duplicates as the `Set` implementation does this already.","title":"Is there a better way to combine two string sets in java?","body":"<p>Just use <code>newStringSet.addAll(oldStringSet)</code>. No need to check for duplicates as the <code>Set</code> implementation does this already.</p>\n"},{"tags":[],"owner":{"account_id":1138001,"reputation":22629,"user_id":1122645,"accept_rate":89,"display_name":"UmNyobe"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1596283115,"creation_date":1327920167,"answer_id":9062624,"question_id":9062574,"body_markdown":"```java\r\nSet.addAll()\r\n```\r\n\r\n*Adds all of the elements in the specified collection to this set if they&#39;re not already present (optional operation). If the specified collection is also a set, the addAll operation effectively modifies this set so that its value is the union of the two sets*\r\n\r\n```java\r\nnewStringSet.addAll(oldStringSet)\r\n```","title":"Is there a better way to combine two string sets in java?","body":"<pre class=\"lang-java prettyprint-override\"><code>Set.addAll()\n</code></pre>\n<p><em>Adds all of the elements in the specified collection to this set if they're not already present (optional operation). If the specified collection is also a set, the addAll operation effectively modifies this set so that its value is the union of the two sets</em></p>\n<pre class=\"lang-java prettyprint-override\"><code>newStringSet.addAll(oldStringSet)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1108799,"reputation":10647,"user_id":1099643,"accept_rate":80,"display_name":"Kushan"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1327920456,"creation_date":1327920456,"answer_id":9062664,"question_id":9062574,"body_markdown":"     newStringSet.addAll(oldStringSet);\r\n\r\nThis will produce Union of s1 and s2\r\n","title":"Is there a better way to combine two string sets in java?","body":"<pre><code> newStringSet.addAll(oldStringSet);\n</code></pre>\n\n<p>This will produce Union of s1 and s2</p>\n"},{"tags":[],"owner":{"account_id":166521,"reputation":30433,"user_id":390695,"accept_rate":72,"display_name":"Damian Leszczyński - Vash"},"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1327920863,"creation_date":1327920863,"answer_id":9062739,"question_id":9062574,"body_markdown":"From the definition Set contain only unique elements. \r\n\r\n    Set&lt;String&gt; distinct = new HashSet&lt;String&gt;(); \r\n     distinct.addAll(oldStringSet);\r\n     distinct.addAll(newStringSet);\r\n\r\nTo enhance your code you may create a generic method for that \r\n\r\n\tpublic static &lt;T&gt; Set&lt;T&gt; distinct(Collection&lt;T&gt;... lists) {\r\n\t\tSet&lt;T&gt; distinct = new HashSet&lt;T&gt;();\r\n\t\t\r\n\t\tfor(Collection&lt;T&gt; list : lists) {\r\n\t\t\tdistinct.addAll(list);\r\n\t\t}\r\n\t\treturn distinct;\r\n\t}\r\n\r\n","title":"Is there a better way to combine two string sets in java?","body":"<p>From the definition Set contain only unique elements. </p>\n\n<pre><code>Set&lt;String&gt; distinct = new HashSet&lt;String&gt;(); \n distinct.addAll(oldStringSet);\n distinct.addAll(newStringSet);\n</code></pre>\n\n<p>To enhance your code you may create a generic method for that </p>\n\n<pre><code>public static &lt;T&gt; Set&lt;T&gt; distinct(Collection&lt;T&gt;... lists) {\n    Set&lt;T&gt; distinct = new HashSet&lt;T&gt;();\n\n    for(Collection&lt;T&gt; list : lists) {\n        distinct.addAll(list);\n    }\n    return distinct;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5774113,"reputation":3086,"user_id":4556720,"accept_rate":96,"display_name":"ytterrr"},"down_vote_count":0,"up_vote_count":138,"is_accepted":false,"score":138,"last_activity_date":1511690298,"creation_date":1431170069,"answer_id":30139228,"question_id":9062574,"body_markdown":"You can do it using this one-liner\r\n\r\n    Set&lt;String&gt; combined = Stream.concat(newStringSet.stream(), oldStringSet.stream())\r\n            .collect(Collectors.toSet());\r\n\r\nWith a static import it looks even nicer\r\n\r\n    Set&lt;String&gt; combined = concat(newStringSet.stream(), oldStringSet.stream())\r\n            .collect(toSet());\r\n\r\nAnother way is to use [flatMap](https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#flatMap-java.util.function.Function-) method:\r\n\r\n    Set&lt;String&gt; combined = Stream.of(newStringSet, oldStringSet).flatMap(Set::stream)\r\n            .collect(toSet());\r\n\r\nAlso any collection could easily be combined with a single element\r\n\r\n\r\n    Set&lt;String&gt; combined = concat(newStringSet.stream(), Stream.of(singleValue))\r\n            .collect(toSet());","title":"Is there a better way to combine two string sets in java?","body":"<p>You can do it using this one-liner</p>\n\n<pre><code>Set&lt;String&gt; combined = Stream.concat(newStringSet.stream(), oldStringSet.stream())\n        .collect(Collectors.toSet());\n</code></pre>\n\n<p>With a static import it looks even nicer</p>\n\n<pre><code>Set&lt;String&gt; combined = concat(newStringSet.stream(), oldStringSet.stream())\n        .collect(toSet());\n</code></pre>\n\n<p>Another way is to use <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#flatMap-java.util.function.Function-\" rel=\"noreferrer\">flatMap</a> method:</p>\n\n<pre><code>Set&lt;String&gt; combined = Stream.of(newStringSet, oldStringSet).flatMap(Set::stream)\n        .collect(toSet());\n</code></pre>\n\n<p>Also any collection could easily be combined with a single element</p>\n\n<pre><code>Set&lt;String&gt; combined = concat(newStringSet.stream(), Stream.of(singleValue))\n        .collect(toSet());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":435781,"reputation":1889,"user_id":822561,"display_name":"Alexander Pranko"},"down_vote_count":1,"up_vote_count":47,"is_accepted":false,"score":46,"last_activity_date":1537346743,"creation_date":1506591059,"answer_id":46465680,"question_id":9062574,"body_markdown":"The same with [Guava][1]:\r\n\r\n    Set&lt;String&gt; combinedSet = Sets.union(oldStringSet, newStringSet)\r\n\r\n\r\n  [1]: https://google.github.io/guava/releases/21.0/api/docs/com/google/common/collect/Sets.html#union-java.util.Set-java.util.Set-","title":"Is there a better way to combine two string sets in java?","body":"<p>The same with <a href=\"https://google.github.io/guava/releases/21.0/api/docs/com/google/common/collect/Sets.html#union-java.util.Set-java.util.Set-\" rel=\"noreferrer\">Guava</a>:</p>\n\n<pre><code>Set&lt;String&gt; combinedSet = Sets.union(oldStringSet, newStringSet)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10042541,"reputation":2660,"user_id":7424948,"display_name":"Ricola"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1536137023,"creation_date":1536137023,"answer_id":52180841,"question_id":9062574,"body_markdown":"If you care about performance, and if you don&#39;t need to keep your two sets and one of them can be huge, I would suggest to check which set is the largest and add the elements from the smallest.\r\n\r\n    Set&lt;String&gt; newStringSet = getNewStringSet();\r\n    Set&lt;String&gt; oldStringSet = getOldStringSet();\r\n    \r\n    Set&lt;String&gt; myResult;\r\n    if(oldStringSet.size() &gt; newStringSet.size()){\r\n        oldStringSet.addAll(newStringSet);\r\n        myResult = oldStringSet;\r\n    } else{\r\n        newStringSet.addAll(oldStringSet);\r\n        myResult = newStringSet;\r\n    }\r\n\r\nIn this way, if your new set has 10 elements and your old set has 100 000, you only do 10 operations instead of 100 000.","title":"Is there a better way to combine two string sets in java?","body":"<p>If you care about performance, and if you don't need to keep your two sets and one of them can be huge, I would suggest to check which set is the largest and add the elements from the smallest.</p>\n\n<pre><code>Set&lt;String&gt; newStringSet = getNewStringSet();\nSet&lt;String&gt; oldStringSet = getOldStringSet();\n\nSet&lt;String&gt; myResult;\nif(oldStringSet.size() &gt; newStringSet.size()){\n    oldStringSet.addAll(newStringSet);\n    myResult = oldStringSet;\n} else{\n    newStringSet.addAll(oldStringSet);\n    myResult = newStringSet;\n}\n</code></pre>\n\n<p>In this way, if your new set has 10 elements and your old set has 100 000, you only do 10 operations instead of 100 000.</p>\n"},{"tags":[],"owner":{"account_id":8384911,"reputation":116,"user_id":6295638,"display_name":"Leonardo Bernardes"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1554995543,"creation_date":1554995543,"answer_id":55635845,"question_id":9062574,"body_markdown":"If you are using Guava you can also use a builder to get more flexibility:\r\n\r\n```\r\nImmutableSet.&lt;String&gt;builder().addAll(someSet)\r\n                              .addAll(anotherSet)\r\n                              .add(&quot;A single string&quot;)\r\n                              .build();\r\n```\r\n","title":"Is there a better way to combine two string sets in java?","body":"<p>If you are using Guava you can also use a builder to get more flexibility:</p>\n\n<pre><code>ImmutableSet.&lt;String&gt;builder().addAll(someSet)\n                              .addAll(anotherSet)\n                              .add(\"A single string\")\n                              .build();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6456733,"reputation":1883,"user_id":5404976,"accept_rate":50,"display_name":"Vinit Solanki"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1575963415,"creation_date":1575963415,"answer_id":59262340,"question_id":9062574,"body_markdown":"If you are using the Apache Common, use `SetUtils` class from `org.apache.commons.collections4.SetUtils;`\r\n\r\n    SetUtils.union(setA, setB);\r\n\r\n","title":"Is there a better way to combine two string sets in java?","body":"<p>If you are using the Apache Common, use <code>SetUtils</code> class from <code>org.apache.commons.collections4.SetUtils;</code></p>\n\n<pre><code>SetUtils.union(setA, setB);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9224441,"reputation":2843,"user_id":6852684,"display_name":"RazvanParautiu"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1679411041,"creation_date":1679411041,"answer_id":75802900,"question_id":9062574,"body_markdown":"You can use stream from Java8 and receive new set\r\n\r\n    Stream.of(set1, set2)\r\n                    .flatMap(Set::stream)\r\n                    .collect(Collectors.toSet())","title":"Is there a better way to combine two string sets in java?","body":"<p>You can use stream from Java8 and receive new set</p>\n<pre><code>Stream.of(set1, set2)\n                .flatMap(Set::stream)\n                .collect(Collectors.toSet())\n</code></pre>\n"}],"owner":{"account_id":556897,"reputation":1673,"user_id":919148,"accept_rate":100,"display_name":"FooBar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":129260,"favorite_count":0,"down_vote_count":1,"up_vote_count":117,"accepted_answer_id":9062603,"answer_count":12,"score":116,"last_activity_date":1679411041,"creation_date":1327919980,"question_id":9062574,"body_markdown":"I need to combine two string sets while filtering out redundant information, this is the solution I came up with, is there a better way that anyone can suggest?  Perhaps something built in that I overlooked? Didn&#39;t have any luck with google.\r\n\r\n    Set&lt;String&gt; oldStringSet = getOldStringSet();\r\n    Set&lt;String&gt; newStringSet = getNewStringSet();\r\n            \r\n    for(String currentString : oldStringSet)\r\n    {\r\n        if (!newStringSet.contains(currentString))\r\n        {\r\n            newStringSet.add(currentString);\r\n        }\r\n    }","title":"Is there a better way to combine two string sets in java?","body":"<p>I need to combine two string sets while filtering out redundant information, this is the solution I came up with, is there a better way that anyone can suggest?  Perhaps something built in that I overlooked? Didn't have any luck with google.</p>\n\n<pre><code>Set&lt;String&gt; oldStringSet = getOldStringSet();\nSet&lt;String&gt; newStringSet = getNewStringSet();\n\nfor(String currentString : oldStringSet)\n{\n    if (!newStringSet.contains(currentString))\n    {\n        newStringSet.add(currentString);\n    }\n}\n</code></pre>\n"},{"tags":["java","elasticsearch","elasticsearch-5","reroute"],"answers":[{"tags":[],"owner":{"account_id":5843921,"reputation":210855,"user_id":4604579,"display_name":"Val"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1679410942,"creation_date":1679410942,"answer_id":75802878,"question_id":75802656,"body_markdown":"The reroute operation copies the data from one node to another, and only upon successful completion, removes the data from the source node. So if your target node fails for some reason and stops, the reroute operation stops, the partial shard on the target node is removed and nothing changes, your data is safe.","title":"What will happen if ElasticSearch shard allocation fails in between? What i mean is i am relocating a shard from nodeA to NodeB using reroute API","body":"<p>The reroute operation copies the data from one node to another, and only upon successful completion, removes the data from the source node. So if your target node fails for some reason and stops, the reroute operation stops, the partial shard on the target node is removed and nothing changes, your data is safe.</p>\n"}],"owner":{"account_id":26580915,"reputation":3,"user_id":20205582,"display_name":"Random"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75802878,"answer_count":1,"score":0,"last_activity_date":1679410942,"creation_date":1679409858,"question_id":75802656,"body_markdown":"So I&#39;m moving shard(20gb) data from one node to another node using reroute request, if a failure occurs (node is down) in between where only a part of data moved to destination node, and when node starts again what will happen with this corrupt data\r\n\r\nReroute request actually moves data from one node to other or just Copies the data ? \r\n\r\nNOTE: Both the nodes are in the same cluster and there are no replicas in the cluster. \r\n\r\nI wanna know what happens with the corrupt data once the node restarts.","title":"What will happen if ElasticSearch shard allocation fails in between? What i mean is i am relocating a shard from nodeA to NodeB using reroute API","body":"<p>So I'm moving shard(20gb) data from one node to another node using reroute request, if a failure occurs (node is down) in between where only a part of data moved to destination node, and when node starts again what will happen with this corrupt data</p>\n<p>Reroute request actually moves data from one node to other or just Copies the data ?</p>\n<p>NOTE: Both the nodes are in the same cluster and there are no replicas in the cluster.</p>\n<p>I wanna know what happens with the corrupt data once the node restarts.</p>\n"},{"tags":["java","dependencies","notserializableexception"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1649062862,"post_id":71734425,"comment_id":126772190,"body_markdown":"Have a look at the source for `ibbridge.Client_v2.serialize(Client_v2.java:1504)`. What is that serialising?","body":"Have a look at the source for <code>ibbridge.Client_v2.serialize(Client_v2.java:1504)</code>. What is that serialising?"},{"owner":{"account_id":6691429,"reputation":3,"user_id":5160823,"display_name":"Luca"},"score":0,"creation_date":1649074630,"post_id":71734425,"comment_id":126776474,"body_markdown":"@tgdavies Yes Client_v2 is serializable, I just resolved this specific problem, because the situation is not very complex: Client_v2 has a field TreeMap (see the stack trace) that has as Key field a Set implemented as HashSet (see the stack tarce) of interface not mentioned in stack trace, the concrete implementing Class has as field the RSI that throws the exception. This time I get out of trouble, but in more complex situation, the problem may be not so easy.","body":"@tgdavies Yes Client_v2 is serializable, I just resolved this specific problem, because the situation is not very complex: Client_v2 has a field TreeMap (see the stack trace) that has as Key field a Set implemented as HashSet (see the stack tarce) of interface not mentioned in stack trace, the concrete implementing Class has as field the RSI that throws the exception. This time I get out of trouble, but in more complex situation, the problem may be not so easy."}],"answers":[{"tags":[],"owner":{"account_id":158578,"reputation":3109,"user_id":377320,"accept_rate":25,"display_name":"Martin Vysny"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1679410872,"creation_date":1679410872,"answer_id":75802859,"question_id":71734425,"body_markdown":"Try the `-Dsun.io.serialization.extendedDebugInfo=true` JVM parameter. The exception message now should contain the exact &#39;field&#39; path from the serialized object to the offending class. Also see https://software-creation.nl/2011/07/serializable-exception-in-java/ for more details.","title":"NotSerializableException: How to know the dependencies that led to an instance being serialized","body":"<p>Try the <code>-Dsun.io.serialization.extendedDebugInfo=true</code> JVM parameter. The exception message now should contain the exact 'field' path from the serialized object to the offending class. Also see <a href=\"https://software-creation.nl/2011/07/serializable-exception-in-java/\" rel=\"nofollow noreferrer\">https://software-creation.nl/2011/07/serializable-exception-in-java/</a> for more details.</p>\n"}],"owner":{"account_id":6691429,"reputation":3,"user_id":5160823,"display_name":"Luca"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":99,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75802859,"answer_count":1,"score":0,"last_activity_date":1679410872,"creation_date":1649062368,"question_id":71734425,"body_markdown":"A NotSerializableException was thrown during java serialization, but the object that is not serializable should not be affected by the serialization process.\r\nHow can I know what is the dependency chain that led java to try to serialize that object.\r\n\r\nIf for example, object D is responsible for the NotSerializableException, so I want to know that:\r\n\r\nD is a field of C which is a field of B which is a field of A.\r\n\r\nfield can obviously also mean &quot;is connected in any way to&quot;.\r\n\r\nAnalyzing the stack trace of the thrown exception I cannot get this information. The project is very complex and the simple stack trace doesn&#39;t help me, I can read that RSI is related to an HashSet that is related to a TreeMap, but this is not sufficient to me, I need more specific informations:\r\n\r\n`java.io.NotSerializableException: dataprovider.indicator.RSI`\r\n`at java.base/java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1185)`\r\n`at java.base/java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1553)`\r\n`at java.base/java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1510)`\r\n`at java.base/java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1433)`\r\n`at java.base/java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1179)`\r\n`at java.base/java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1553)`\r\n`at java.base/java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1510)`\r\n`at java.base/java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1433)`\r\n`at java.base/java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1179)`\r\n`at java.base/java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:349)`\r\n`at java.base/java.util.HashSet.writeObject(HashSet.java:288)`\r\n`at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)`\r\n`at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)`\r\n`at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)`\r\n`at java.base/java.lang.reflect.Method.invoke(Method.java:566)`\r\n`at java.base/java.io.ObjectStreamClass.invokeWriteObject(ObjectStreamClass.java:1130)`\r\n`at java.base/java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1497)`\r\n`at java.base/java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1433)`\r\n`at java.base/java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1179)`\r\n`at java.base/java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:349)`\r\n`at java.base/java.util.TreeMap.writeObject(TreeMap.java:2434)`\r\n`at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)`\r\n`at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)`\r\n`at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)`\r\n`at java.base/java.lang.reflect.Method.invoke(Method.java:566)`\r\n`at java.base/java.io.ObjectStreamClass.invokeWriteObject(ObjectStreamClass.java:1130)`\r\n`at java.base/java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1497)`\r\n`at java.base/java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1433)`\r\n`at java.base/java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1179)`\r\n`at java.base/java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1553)`\r\n`at java.base/java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1510)`\r\n`at java.base/java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1433)`\r\n`at java.base/java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1179)`\r\n`at java.base/java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:349)`\r\n`at ibbridge.Client_v2.serialize(Client_v2.java:1504)`\r\n`at ibbridge.Client_v2.finalizeClient(Client_v2.java:672)`\r\n`at ibbridge.Client_v2.run(Client_v2.java:543)`\r\n`at java.base/java.lang.Thread.run(Thread.java:834)`","title":"NotSerializableException: How to know the dependencies that led to an instance being serialized","body":"<p>A NotSerializableException was thrown during java serialization, but the object that is not serializable should not be affected by the serialization process.\nHow can I know what is the dependency chain that led java to try to serialize that object.</p>\n<p>If for example, object D is responsible for the NotSerializableException, so I want to know that:</p>\n<p>D is a field of C which is a field of B which is a field of A.</p>\n<p>field can obviously also mean &quot;is connected in any way to&quot;.</p>\n<p>Analyzing the stack trace of the thrown exception I cannot get this information. The project is very complex and the simple stack trace doesn't help me, I can read that RSI is related to an HashSet that is related to a TreeMap, but this is not sufficient to me, I need more specific informations:</p>\n<p><code>java.io.NotSerializableException: dataprovider.indicator.RSI</code>\n<code>at java.base/java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1185)</code>\n<code>at java.base/java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1553)</code>\n<code>at java.base/java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1510)</code>\n<code>at java.base/java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1433)</code>\n<code>at java.base/java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1179)</code>\n<code>at java.base/java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1553)</code>\n<code>at java.base/java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1510)</code>\n<code>at java.base/java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1433)</code>\n<code>at java.base/java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1179)</code>\n<code>at java.base/java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:349)</code>\n<code>at java.base/java.util.HashSet.writeObject(HashSet.java:288)</code>\n<code>at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)</code>\n<code>at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)</code>\n<code>at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)</code>\n<code>at java.base/java.lang.reflect.Method.invoke(Method.java:566)</code>\n<code>at java.base/java.io.ObjectStreamClass.invokeWriteObject(ObjectStreamClass.java:1130)</code>\n<code>at java.base/java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1497)</code>\n<code>at java.base/java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1433)</code>\n<code>at java.base/java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1179)</code>\n<code>at java.base/java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:349)</code>\n<code>at java.base/java.util.TreeMap.writeObject(TreeMap.java:2434)</code>\n<code>at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)</code>\n<code>at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)</code>\n<code>at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)</code>\n<code>at java.base/java.lang.reflect.Method.invoke(Method.java:566)</code>\n<code>at java.base/java.io.ObjectStreamClass.invokeWriteObject(ObjectStreamClass.java:1130)</code>\n<code>at java.base/java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1497)</code>\n<code>at java.base/java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1433)</code>\n<code>at java.base/java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1179)</code>\n<code>at java.base/java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1553)</code>\n<code>at java.base/java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1510)</code>\n<code>at java.base/java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1433)</code>\n<code>at java.base/java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1179)</code>\n<code>at java.base/java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:349)</code>\n<code>at ibbridge.Client_v2.serialize(Client_v2.java:1504)</code>\n<code>at ibbridge.Client_v2.finalizeClient(Client_v2.java:672)</code>\n<code>at ibbridge.Client_v2.run(Client_v2.java:543)</code>\n<code>at java.base/java.lang.Thread.run(Thread.java:834)</code></p>\n"},{"tags":["java","spring-boot","spring-security"],"owner":{"account_id":25409295,"reputation":1,"user_id":19217435,"display_name":"naveenselv"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":82,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679410804,"creation_date":1679410804,"question_id":75802847,"body_markdown":"I have a fairly small microservice that calls Microsoft graph API to query the data of members in the organization and I am fetching this information on each request, I have formatted and mapped this data into a POJO and I want to make this POJO available throughout the application and I am looking for an optimal solution to do this\r\n\r\nI have considered the following options\r\n\r\n1. Use HandlerMethodArgumentResolver to resolve the POJO set as an argument on controller methods, get the token from the request and query the graph API.\r\n\r\n2. Use an interceptor and ThreadLocal object wrapped in a spring component to resolve the POJO and use it throughout the application but I am concerned with the data leak issues with using ThreadLocal.\r\n\r\nIs there a better solution for this?","title":"How do I load user data from Microsoft graph API into spring context?","body":"<p>I have a fairly small microservice that calls Microsoft graph API to query the data of members in the organization and I am fetching this information on each request, I have formatted and mapped this data into a POJO and I want to make this POJO available throughout the application and I am looking for an optimal solution to do this</p>\n<p>I have considered the following options</p>\n<ol>\n<li><p>Use HandlerMethodArgumentResolver to resolve the POJO set as an argument on controller methods, get the token from the request and query the graph API.</p>\n</li>\n<li><p>Use an interceptor and ThreadLocal object wrapped in a spring component to resolve the POJO and use it throughout the application but I am concerned with the data leak issues with using ThreadLocal.</p>\n</li>\n</ol>\n<p>Is there a better solution for this?</p>\n"},{"tags":["java","gradle","compatibility","dafny"],"answers":[{"tags":[],"owner":{"account_id":1347382,"reputation":10453,"user_id":1287856,"accept_rate":83,"display_name":"Mika&#235;l Mayer"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1679410056,"creation_date":1679410056,"answer_id":75802698,"question_id":75802599,"body_markdown":"Apparently, Dafny use Gradle 7.4, which does not support yet JDK 19 but up to JDK 17.\r\nSince you are modifying from source, feel free to update the Gradle version and create a PR, or you can downgrade the JDK version.","title":"Unsupported class file major version","body":"<p>Apparently, Dafny use Gradle 7.4, which does not support yet JDK 19 but up to JDK 17.\nSince you are modifying from source, feel free to update the Gradle version and create a PR, or you can downgrade the JDK version.</p>\n"}],"owner":{"account_id":23669296,"reputation":65,"user_id":17696311,"display_name":"xbreu"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":840,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75802698,"answer_count":1,"score":0,"last_activity_date":1679410056,"creation_date":1679409577,"question_id":75802599,"body_markdown":"I&#39;m having an error when trying to compile Dafny from source. If I try to do it I get the following output:\r\n\r\n```\r\n$ make exe\r\n(cd /home/xbreu/Documents/University/SpecRep/dafny/ ; dotnet build Source/Dafny.sln ) includes parser\r\nMicrosoft (R) Build Engine version 17.0.1+b177f8fa7 for .NET\r\nCopyright (C) Microsoft Corporation. All rights reserved.\r\n\r\n  Determining projects to restore...\r\n  All projects are up-to-date for restore.\r\n  Compiling DafnyRuntimeJava to DafnyRuntimeJava/build/libs/DafnyRuntime.jar...\r\n\r\n  FAILURE: Build failed with an exception.\r\n\r\n  * Where:\r\n  Settings file &#39;/home/xbreu/Documents/University/SpecRep/dafny/Source/DafnyRuntime/DafnyRuntimeJava/settings.gradle&#39;\r\n\r\n  * What went wrong:\r\n  Could not compile settings file &#39;/home/xbreu/Documents/University/SpecRep/dafny/Source/DafnyRuntime/DafnyRuntimeJava/settings.gradle&#39;.\r\n  &gt; startup failed:\r\n    General error during conversion: Unsupported class file major version 63\r\n\r\n    java.lang.IllegalArgumentException: Unsupported class file major version 63\r\n        at groovyjarjarasm.asm.ClassReader.&lt;init&gt;(ClassReader.java:199)\r\n        at groovyjarjarasm.asm.ClassReader.&lt;init&gt;(ClassReader.java:180)\r\n        at groovyjarjarasm.asm.ClassReader.&lt;init&gt;(ClassReader.java:166)\r\n        at groovyjarjarasm.asm.ClassReader.&lt;init&gt;(ClassReader.java:287)\r\n        at org.codehaus.groovy.ast.decompiled.AsmDecompiler.parseClass(AsmDecompiler.java:81)\r\n        at org.codehaus.groovy.control.ClassNodeResolver.findDecompiled(ClassNodeResolver.java:251)\r\n        at org.codehaus.groovy.control.ClassNodeResolver.tryAsLoaderClassOrScript(ClassNodeResolver.java:189)\r\n        at org.codehaus.groovy.control.ClassNodeResolver.findClassNode(ClassNodeResolver.java:169)\r\n        at org.codehaus.groovy.control.ClassNodeResolver.resolveName(ClassNodeResolver.java:125)\r\n        at org.codehaus.groovy.ast.decompiled.AsmReferenceResolver.resolveClassNullable(AsmReferenceResolver.java:57)\r\n        at org.codehaus.groovy.ast.decompiled.AsmReferenceResolver.resolveClass(AsmReferenceResolver.java:44)\r\n        at org.codehaus.groovy.ast.decompiled.TypeSignatureParser.visitEnd(TypeSignatureParser.java:110)\r\n        at groovyjarjarasm.asm.signature.SignatureReader.parseType(SignatureReader.java:206)\r\n        at groovyjarjarasm.asm.signature.SignatureReader.accept(SignatureReader.java:124)\r\n        at org.codehaus.groovy.ast.decompiled.ClassSignatureParser.parseClassSignature(ClassSignatureParser.java:74)\r\n        at org.codehaus.groovy.ast.decompiled.ClassSignatureParser.configureClass(ClassSignatureParser.java:32)\r\n        at org.codehaus.groovy.ast.decompiled.DecompiledClassNode.lazyInitSupers(DecompiledClassNode.java:185)\r\n        at org.codehaus.groovy.ast.decompiled.DecompiledClassNode.isUsingGenerics(DecompiledClassNode.java:86)\r\n        at org.codehaus.groovy.ast.tools.GenericsUtils.nonGeneric(GenericsUtils.java:275)\r\n        at org.codehaus.groovy.ast.decompiled.MemberSignatureParser.createMethodNode(MemberSignatureParser.java:101)\r\n        at org.codehaus.groovy.ast.decompiled.DecompiledClassNode.lambda$createMethodNode$1(DecompiledClassNode.java:230)\r\n        at org.codehaus.groovy.ast.decompiled.DecompiledClassNode.createMethodNode(DecompiledClassNode.java:236)\r\n        at org.codehaus.groovy.ast.decompiled.DecompiledClassNode.lazyInitMembers(DecompiledClassNode.java:203)\r\n        at org.codehaus.groovy.ast.decompiled.DecompiledClassNode.getDeclaredMethods(DecompiledClassNode.java:122)\r\n        at org.codehaus.groovy.ast.ClassNode.tryFindPossibleMethod(ClassNode.java:1283)\r\n        at org.codehaus.groovy.control.StaticImportVisitor.transformMethodCallExpression(StaticImportVisitor.java:251)\r\n        at org.codehaus.groovy.control.StaticImportVisitor.transform(StaticImportVisitor.java:133)\r\n        at org.codehaus.groovy.ast.ClassCodeExpressionTransformer.visitExpressionStatement(ClassCodeExpressionTransformer.java:108)\r\n        at org.codehaus.groovy.ast.stmt.ExpressionStatement.visit(ExpressionStatement.java:40)\r\n        at org.codehaus.groovy.ast.ClassCodeVisitorSupport.visitClassCodeContainer(ClassCodeVisitorSupport.java:138)\r\n        at org.codehaus.groovy.ast.ClassCodeVisitorSupport.visitConstructorOrMethod(ClassCodeVisitorSupport.java:111)\r\n        at org.codehaus.groovy.ast.ClassCodeExpressionTransformer.visitConstructorOrMethod(ClassCodeExpressionTransformer.java:66)\r\n        at org.codehaus.groovy.control.StaticImportVisitor.visitConstructorOrMethod(StaticImportVisitor.java:108)\r\n        at org.codehaus.groovy.ast.ClassCodeVisitorSupport.visitConstructor(ClassCodeVisitorSupport.java:101)\r\n        at org.codehaus.groovy.ast.ClassNode.visitContents(ClassNode.java:1089)\r\n        at org.codehaus.groovy.ast.ClassCodeVisitorSupport.visitClass(ClassCodeVisitorSupport.java:52)\r\n        at org.codehaus.groovy.control.CompilationUnit.lambda$addPhaseOperations$3(CompilationUnit.java:209)\r\n        at org.codehaus.groovy.control.CompilationUnit$IPrimaryClassNodeOperation.doPhaseOperation(CompilationUnit.java:942)\r\n        at org.codehaus.groovy.control.CompilationUnit.processPhaseOperations(CompilationUnit.java:671)\r\n        at org.codehaus.groovy.control.CompilationUnit.compile(CompilationUnit.java:635)\r\n        at groovy.lang.GroovyClassLoader.doParseClass(GroovyClassLoader.java:389)\r\n        at groovy.lang.GroovyClassLoader.lambda$parseClass$3(GroovyClassLoader.java:332)\r\n        at org.codehaus.groovy.runtime.memoize.StampedCommonCache.compute(StampedCommonCache.java:163)\r\n        at org.codehaus.groovy.runtime.memoize.StampedCommonCache.getAndPut(StampedCommonCache.java:154)\r\n        at groovy.lang.GroovyClassLoader.parseClass(GroovyClassLoader.java:330)\r\n        at org.gradle.groovy.scripts.internal.DefaultScriptCompilationHandler.compileScript(DefaultScriptCompilationHandler.java:139)\r\n        at org.gradle.groovy.scripts.internal.DefaultScriptCompilationHandler.compileToDir(DefaultScriptCompilationHandler.java:95)\r\n        at org.gradle.groovy.scripts.internal.BuildOperationBackedScriptCompilationHandler$2.run(BuildOperationBackedScriptCompilationHandler.java:54)\r\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$1.execute(DefaultBuildOperationRunner.java:29)\r\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$1.execute(DefaultBuildOperationRunner.java:26)\r\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:66)\r\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:59)\r\n        at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:157)\r\n        at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:59)\r\n        at org.gradle.internal.operations.DefaultBuildOperationRunner.run(DefaultBuildOperationRunner.java:47)\r\n        at org.gradle.internal.operations.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:68)\r\n        at org.gradle.groovy.scripts.internal.BuildOperationBackedScriptCompilationHandler.compileToDir(BuildOperationBackedScriptCompilationHandler.java:51)\r\n        at org.gradle.groovy.scripts.internal.FileCacheBackedScriptClassCompiler$CompileToCrossBuildCacheAction.execute(FileCacheBackedScriptClassCompiler.java:190)\r\n        at org.gradle.groovy.scripts.internal.FileCacheBackedScriptClassCompiler$CompileToCrossBuildCacheAction.execute(FileCacheBackedScriptClassCompiler.java:170)\r\n        at org.gradle.groovy.scripts.internal.FileCacheBackedScriptClassCompiler$ProgressReportingInitializer.execute(FileCacheBackedScriptClassCompiler.java:211)\r\n        at org.gradle.groovy.scripts.internal.FileCacheBackedScriptClassCompiler$ProgressReportingInitializer.execute(FileCacheBackedScriptClassCompiler.java:194)\r\n        at org.gradle.cache.internal.DefaultPersistentDirectoryCache$Initializer.initialize(DefaultPersistentDirectoryCache.java:100)\r\n        at org.gradle.cache.internal.FixedSharedModeCrossProcessCacheAccess$1.run(FixedSharedModeCrossProcessCacheAccess.java:86)\r\n        at org.gradle.cache.internal.DefaultFileLockManager$DefaultFileLock.doWriteAction(DefaultFileLockManager.java:216)\r\n        at org.gradle.cache.internal.DefaultFileLockManager$DefaultFileLock.writeFile(DefaultFileLockManager.java:206)\r\n        at org.gradle.cache.internal.FixedSharedModeCrossProcessCacheAccess.open(FixedSharedModeCrossProcessCacheAccess.java:83)\r\n        at org.gradle.cache.internal.DefaultCacheAccess.open(DefaultCacheAccess.java:139)\r\n        at org.gradle.cache.internal.DefaultPersistentDirectoryStore.open(DefaultPersistentDirectoryStore.java:89)\r\n        at org.gradle.cache.internal.DefaultPersistentDirectoryStore.open(DefaultPersistentDirectoryStore.java:43)\r\n        at org.gradle.cache.internal.DefaultCacheFactory.doOpen(DefaultCacheFactory.java:103)\r\n        at org.gradle.cache.internal.DefaultCacheFactory.open(DefaultCacheFactory.java:68)\r\n        at org.gradle.cache.internal.DefaultCacheRepository$PersistentCacheBuilder.open(DefaultCacheRepository.java:117)\r\n        at org.gradle.groovy.scripts.internal.FileCacheBackedScriptClassCompiler.compile(FileCacheBackedScriptClassCompiler.java:116)\r\n        at org.gradle.groovy.scripts.internal.CrossBuildInMemoryCachingScriptClassCache.getOrCompile(CrossBuildInMemoryCachingScriptClassCache.java:50)\r\n        at org.gradle.groovy.scripts.internal.BuildScopeInMemoryCachingScriptClassCompiler.compile(BuildScopeInMemoryCachingScriptClassCompiler.java:50)\r\n        at org.gradle.groovy.scripts.DefaultScriptCompilerFactory$ScriptCompilerImpl.compile(DefaultScriptCompilerFactory.java:49)\r\n        at org.gradle.configuration.DefaultScriptPluginFactory$ScriptPluginImpl.apply(DefaultScriptPluginFactory.java:125)\r\n        at org.gradle.configuration.BuildOperationScriptPlugin$1.run(BuildOperationScriptPlugin.java:65)\r\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$1.execute(DefaultBuildOperationRunner.java:29)\r\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$1.execute(DefaultBuildOperationRunner.java:26)\r\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:66)\r\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:59)\r\n        at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:157)\r\n        at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:59)\r\n        at org.gradle.internal.operations.DefaultBuildOperationRunner.run(DefaultBuildOperationRunner.java:47)\r\n        at org.gradle.internal.operations.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:68)\r\n        at org.gradle.configuration.BuildOperationScriptPlugin.lambda$apply$0(BuildOperationScriptPlugin.java:62)\r\n        at org.gradle.configuration.internal.DefaultUserCodeApplicationContext.apply(DefaultUserCodeApplicationContext.java:44)\r\n        at org.gradle.configuration.BuildOperationScriptPlugin.apply(BuildOperationScriptPlugin.java:62)\r\n        at org.gradle.initialization.ScriptEvaluatingSettingsProcessor.applySettingsScript(ScriptEvaluatingSettingsProcessor.java:73)\r\n        at org.gradle.initialization.ScriptEvaluatingSettingsProcessor.process(ScriptEvaluatingSettingsProcessor.java:66)\r\n        at org.gradle.initialization.SettingsEvaluatedCallbackFiringSettingsProcessor.process(SettingsEvaluatedCallbackFiringSettingsProcessor.java:34)\r\n        at org.gradle.initialization.RootBuildCacheControllerSettingsProcessor.process(RootBuildCacheControllerSettingsProcessor.java:47)\r\n        at org.gradle.initialization.BuildOperationSettingsProcessor$2.call(BuildOperationSettingsProcessor.java:50)\r\n        at org.gradle.initialization.BuildOperationSettingsProcessor$2.call(BuildOperationSettingsProcessor.java:47)\r\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:204)\r\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:199)\r\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:66)\r\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:59)\r\n        at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:157)\r\n        at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:59)\r\n        at org.gradle.internal.operations.DefaultBuildOperationRunner.call(DefaultBuildOperationRunner.java:53)\r\n        at org.gradle.internal.operations.DefaultBuildOperationExecutor.call(DefaultBuildOperationExecutor.java:73)\r\n        at org.gradle.initialization.BuildOperationSettingsProcessor.process(BuildOperationSettingsProcessor.java:47)\r\n        at org.gradle.initialization.DefaultSettingsLoader.findSettingsAndLoadIfAppropriate(DefaultSettingsLoader.java:136)\r\n        at org.gradle.initialization.DefaultSettingsLoader.findAndLoadSettings(DefaultSettingsLoader.java:62)\r\n        at org.gradle.initialization.SettingsAttachingSettingsLoader.findAndLoadSettings(SettingsAttachingSettingsLoader.java:34)\r\n        at org.gradle.internal.composite.CommandLineIncludedBuildSettingsLoader.findAndLoadSettings(CommandLineIncludedBuildSettingsLoader.java:34)\r\n        at org.gradle.internal.composite.ChildBuildRegisteringSettingsLoader.findAndLoadSettings(ChildBuildRegisteringSettingsLoader.java:48)\r\n        at org.gradle.internal.composite.CompositeBuildSettingsLoader.findAndLoadSettings(CompositeBuildSettingsLoader.java:35)\r\n        at org.gradle.initialization.InitScriptHandlingSettingsLoader.findAndLoadSettings(InitScriptHandlingSettingsLoader.java:34)\r\n        at org.gradle.initialization.GradlePropertiesHandlingSettingsLoader.findAndLoadSettings(GradlePropertiesHandlingSettingsLoader.java:39)\r\n        at org.gradle.initialization.DefaultSettingsPreparer.prepareSettings(DefaultSettingsPreparer.java:31)\r\n        at org.gradle.initialization.BuildOperationFiringSettingsPreparer$LoadBuild.doLoadBuild(BuildOperationFiringSettingsPreparer.java:62)\r\n        at org.gradle.initialization.BuildOperationFiringSettingsPreparer$LoadBuild.run(BuildOperationFiringSettingsPreparer.java:57)\r\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$1.execute(DefaultBuildOperationRunner.java:29)\r\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$1.execute(DefaultBuildOperationRunner.java:26)\r\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:66)\r\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:59)\r\n        at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:157)\r\n        at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:59)\r\n        at org.gradle.internal.operations.DefaultBuildOperationRunner.run(DefaultBuildOperationRunner.java:47)\r\n        at org.gradle.internal.operations.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:68)\r\n        at org.gradle.initialization.BuildOperationFiringSettingsPreparer.prepareSettings(BuildOperationFiringSettingsPreparer.java:45)\r\n        at org.gradle.initialization.VintageBuildModelController.lambda$prepareSettings$2(VintageBuildModelController.java:85)\r\n        at org.gradle.internal.model.StateTransitionController.lambda$doTransition$12(StateTransitionController.java:227)\r\n        at org.gradle.internal.model.StateTransitionController.doTransition(StateTransitionController.java:238)\r\n        at org.gradle.internal.model.StateTransitionController.doTransition(StateTransitionController.java:226)\r\n        at org.gradle.internal.model.StateTransitionController.lambda$transitionIfNotPreviously$10(StateTransitionController.java:201)\r\n        at org.gradle.internal.work.DefaultSynchronizer.withLock(DefaultSynchronizer.java:34)\r\n        at org.gradle.internal.model.StateTransitionController.transitionIfNotPreviously(StateTransitionController.java:197)\r\n        at org.gradle.initialization.VintageBuildModelController.prepareSettings(VintageBuildModelController.java:85)\r\n        at org.gradle.initialization.VintageBuildModelController.prepareToScheduleTasks(VintageBuildModelController.java:70)\r\n        at org.gradle.internal.build.DefaultBuildLifecycleController.lambda$prepareToScheduleTasks$2(DefaultBuildLifecycleController.java:134)\r\n        at org.gradle.internal.model.StateTransitionController.lambda$doTransition$12(StateTransitionController.java:227)\r\n        at org.gradle.internal.model.StateTransitionController.doTransition(StateTransitionController.java:238)\r\n        at org.gradle.internal.model.StateTransitionController.doTransition(StateTransitionController.java:226)\r\n        at org.gradle.internal.model.StateTransitionController.lambda$maybeTransition$9(StateTransitionController.java:187)\r\n        at org.gradle.internal.work.DefaultSynchronizer.withLock(DefaultSynchronizer.java:34)\r\n        at org.gradle.internal.model.StateTransitionController.maybeTransition(StateTransitionController.java:183)\r\n        at org.gradle.internal.build.DefaultBuildLifecycleController.prepareToScheduleTasks(DefaultBuildLifecycleController.java:132)\r\n        at org.gradle.internal.buildtree.DefaultBuildTreeWorkPreparer.scheduleRequestedTasks(DefaultBuildTreeWorkPreparer.java:33)\r\n        at org.gradle.internal.buildtree.DefaultBuildTreeLifecycleController.lambda$doScheduleAndRunTasks$2(DefaultBuildTreeLifecycleController.java:89)\r\n        at org.gradle.composite.internal.DefaultIncludedBuildTaskGraph.withNewWorkGraph(DefaultIncludedBuildTaskGraph.java:75)\r\n        at org.gradle.internal.buildtree.DefaultBuildTreeLifecycleController.doScheduleAndRunTasks(DefaultBuildTreeLifecycleController.java:88)\r\n        at org.gradle.internal.buildtree.DefaultBuildTreeLifecycleController.lambda$runBuild$4(DefaultBuildTreeLifecycleController.java:106)\r\n        at org.gradle.internal.model.StateTransitionController.lambda$transition$6(StateTransitionController.java:166)\r\n        at org.gradle.internal.model.StateTransitionController.doTransition(StateTransitionController.java:238)\r\n        at org.gradle.internal.model.StateTransitionController.lambda$transition$7(StateTransitionController.java:166)\r\n        at org.gradle.internal.work.DefaultSynchronizer.withLock(DefaultSynchronizer.java:44)\r\n        at org.gradle.internal.model.StateTransitionController.transition(StateTransitionController.java:166)\r\n        at org.gradle.internal.buildtree.DefaultBuildTreeLifecycleController.runBuild(DefaultBuildTreeLifecycleController.java:103)\r\n        at org.gradle.internal.buildtree.DefaultBuildTreeLifecycleController.scheduleAndRunTasks(DefaultBuildTreeLifecycleController.java:69)\r\n        at org.gradle.tooling.internal.provider.ExecuteBuildActionRunner.run(ExecuteBuildActionRunner.java:31)\r\n        at org.gradle.launcher.exec.ChainingBuildActionRunner.run(ChainingBuildActionRunner.java:35)\r\n        at org.gradle.internal.buildtree.ProblemReportingBuildActionRunner.run(ProblemReportingBuildActionRunner.java:49)\r\n        at org.gradle.launcher.exec.BuildOutcomeReportingBuildActionRunner.run(BuildOutcomeReportingBuildActionRunner.java:69)\r\n        at org.gradle.tooling.internal.provider.FileSystemWatchingBuildActionRunner.run(FileSystemWatchingBuildActionRunner.java:119)\r\n        at org.gradle.launcher.exec.BuildCompletionNotifyingBuildActionRunner.run(BuildCompletionNotifyingBuildActionRunner.java:41)\r\n        at org.gradle.launcher.exec.RootBuildLifecycleBuildActionExecutor.lambda$execute$0(RootBuildLifecycleBuildActionExecutor.java:40)\r\n        at org.gradle.composite.internal.DefaultRootBuildState.run(DefaultRootBuildState.java:128)\r\n        at org.gradle.launcher.exec.RootBuildLifecycleBuildActionExecutor.execute(RootBuildLifecycleBuildActionExecutor.java:40)\r\n        at org.gradle.internal.buildtree.DefaultBuildTreeContext.execute(DefaultBuildTreeContext.java:40)\r\n        at org.gradle.launcher.exec.BuildTreeLifecycleBuildActionExecutor.lambda$execute$0(BuildTreeLifecycleBuildActionExecutor.java:65)\r\n        at org.gradle.internal.buildtree.BuildTreeState.run(BuildTreeState.java:53)\r\n        at org.gradle.launcher.exec.BuildTreeLifecycleBuildActionExecutor.execute(BuildTreeLifecycleBuildActionExecutor.java:65)\r\n        at org.gradle.launcher.exec.RunAsBuildOperationBuildActionExecutor$3.call(RunAsBuildOperationBuildActionExecutor.java:61)\r\n        at org.gradle.launcher.exec.RunAsBuildOperationBuildActionExecutor$3.call(RunAsBuildOperationBuildActionExecutor.java:57)\r\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:204)\r\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:199)\r\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:66)\r\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:59)\r\n        at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:157)\r\n        at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:59)\r\n        at org.gradle.internal.operations.DefaultBuildOperationRunner.call(DefaultBuildOperationRunner.java:53)\r\n        at org.gradle.internal.operations.DefaultBuildOperationExecutor.call(DefaultBuildOperationExecutor.java:73)\r\n        at org.gradle.launcher.exec.RunAsBuildOperationBuildActionExecutor.execute(RunAsBuildOperationBuildActionExecutor.java:57)\r\n        at org.gradle.launcher.exec.RunAsWorkerThreadBuildActionExecutor.lambda$execute$0(RunAsWorkerThreadBuildActionExecutor.java:36)\r\n        at org.gradle.internal.work.DefaultWorkerLeaseService.withLocks(DefaultWorkerLeaseService.java:270)\r\n        at org.gradle.internal.work.DefaultWorkerLeaseService.runAsWorkerThread(DefaultWorkerLeaseService.java:119)\r\n        at org.gradle.launcher.exec.RunAsWorkerThreadBuildActionExecutor.execute(RunAsWorkerThreadBuildActionExecutor.java:36)\r\n        at org.gradle.tooling.internal.provider.ContinuousBuildActionExecutor.execute(ContinuousBuildActionExecutor.java:103)\r\n        at org.gradle.tooling.internal.provider.SubscribableBuildActionExecutor.execute(SubscribableBuildActionExecutor.java:64)\r\n        at org.gradle.internal.session.DefaultBuildSessionContext.execute(DefaultBuildSessionContext.java:46)\r\n        at org.gradle.tooling.internal.provider.BuildSessionLifecycleBuildActionExecuter$ActionImpl.apply(BuildSessionLifecycleBuildActionExecuter.java:100)\r\n        at org.gradle.tooling.internal.provider.BuildSessionLifecycleBuildActionExecuter$ActionImpl.apply(BuildSessionLifecycleBuildActionExecuter.java:88)\r\n        at org.gradle.internal.session.BuildSessionState.run(BuildSessionState.java:69)\r\n        at org.gradle.tooling.internal.provider.BuildSessionLifecycleBuildActionExecuter.execute(BuildSessionLifecycleBuildActionExecuter.java:62)\r\n        at org.gradle.tooling.internal.provider.BuildSessionLifecycleBuildActionExecuter.execute(BuildSessionLifecycleBuildActionExecuter.java:41)\r\n        at org.gradle.tooling.internal.provider.StartParamsValidatingActionExecuter.execute(StartParamsValidatingActionExecuter.java:63)\r\n        at org.gradle.tooling.internal.provider.StartParamsValidatingActionExecuter.execute(StartParamsValidatingActionExecuter.java:31)\r\n        at org.gradle.tooling.internal.provider.SessionFailureReportingActionExecuter.execute(SessionFailureReportingActionExecuter.java:58)\r\n        at org.gradle.tooling.internal.provider.SessionFailureReportingActionExecuter.execute(SessionFailureReportingActionExecuter.java:42)\r\n        at org.gradle.tooling.internal.provider.SetupLoggingActionExecuter.execute(SetupLoggingActionExecuter.java:47)\r\n        at org.gradle.tooling.internal.provider.SetupLoggingActionExecuter.execute(SetupLoggingActionExecuter.java:31)\r\n        at org.gradle.launcher.daemon.server.exec.ExecuteBuild.doBuild(ExecuteBuild.java:65)\r\n        at org.gradle.launcher.daemon.server.exec.BuildCommandOnly.execute(BuildCommandOnly.java:37)\r\n        at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:104)\r\n        at org.gradle.launcher.daemon.server.exec.WatchForDisconnection.execute(WatchForDisconnection.java:39)\r\n        at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:104)\r\n        at org.gradle.launcher.daemon.server.exec.ResetDeprecationLogger.execute(ResetDeprecationLogger.java:29)\r\n        at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:104)\r\n        at org.gradle.launcher.daemon.server.exec.RequestStopIfSingleUsedDaemon.execute(RequestStopIfSingleUsedDaemon.java:35)\r\n        at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:104)\r\n        at org.gradle.launcher.daemon.server.exec.ForwardClientInput$2.create(ForwardClientInput.java:78)\r\n        at org.gradle.launcher.daemon.server.exec.ForwardClientInput$2.create(ForwardClientInput.java:75)\r\n        at org.gradle.util.internal.Swapper.swap(Swapper.java:38)\r\n        at org.gradle.launcher.daemon.server.exec.ForwardClientInput.execute(ForwardClientInput.java:75)\r\n        at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:104)\r\n        at org.gradle.launcher.daemon.server.exec.LogAndCheckHealth.execute(LogAndCheckHealth.java:55)\r\n        at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:104)\r\n        at org.gradle.launcher.daemon.server.exec.LogToClient.doBuild(LogToClient.java:63)\r\n        at org.gradle.launcher.daemon.server.exec.BuildCommandOnly.execute(BuildCommandOnly.java:37)\r\n        at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:104)\r\n        at org.gradle.launcher.daemon.server.exec.EstablishBuildEnvironment.doBuild(EstablishBuildEnvironment.java:84)\r\n        at org.gradle.launcher.daemon.server.exec.BuildCommandOnly.execute(BuildCommandOnly.java:37)\r\n        at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:104)\r\n        at org.gradle.launcher.daemon.server.exec.StartBuildOrRespondWithBusy$1.run(StartBuildOrRespondWithBusy.java:52)\r\n        at org.gradle.launcher.daemon.server.DaemonStateCoordinator$1.run(DaemonStateCoordinator.java:297)\r\n        at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:64)\r\n        at org.gradle.internal.concurrent.ManagedExecutorImpl$1.run(ManagedExecutorImpl.java:48)\r\n        at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)\r\n        at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)\r\n        at java.base/java.lang.Thread.run(Thread.java:1589)\r\n\r\n    1 error\r\n\r\n\r\n  * Try:\r\n  &gt; Run with --stacktrace option to get the stack trace.\r\n  &gt; Run with --info or --debug option to get more log output.\r\n  &gt; Run with --scan to get full insights.\r\n\r\n  * Get more help at https://help.gradle.org\r\n\r\n  BUILD FAILED in 2s\r\n/home/xbreu/Documents/University/SpecRep/dafny/Source/DafnyRuntime/DafnyRuntime.csproj(47,5): error MSB3073: The command &quot;./gradlew -q build&quot; exited with code 1.\r\n```\r\n\r\nIt looks like a compatibility issue, because of the &quot;Unsupported class file major version 63&quot;, so I must have some program that is not compatible with major version 63 (which corresponds to Java 19). But the versions of Java, Gradle and .NET look compatible:\r\n\r\nJava:\r\n\r\n```\r\n$ java --version\r\nopenjdk 19.0.2 2023-01-17\r\nOpenJDK Runtime Environment (build 19.0.2+7)\r\nOpenJDK 64-Bit Server VM (build 19.0.2+7, mixed mode)\r\n```\r\n\r\nGradle:\r\n\r\n```\r\n$ gradle --version\r\n\r\n------------------------------------------------------------\r\nGradle 8.0.2\r\n------------------------------------------------------------\r\n\r\nBuild time:   2023-03-03 20:07:03 UTC\r\nRevision:     &lt;unknown&gt;\r\n\r\nKotlin:       1.8.10\r\nGroovy:       3.0.13\r\nAnt:          Apache Ant(TM) version 1.10.11 compiled on July 10 2021\r\nJVM:          19.0.2 (Oracle Corporation 19.0.2+7)\r\nOS:           Linux 6.2.2-arch1-1 amd64\r\n```\r\n\r\n.NET:\r\n\r\n```\r\n$ dotnet --version\r\n6.0.114\r\n```\r\n\r\nI tried cloning the repository again and reinstalling the programs, and nothing has helped me so far. What problem could be causing this?","title":"Unsupported class file major version","body":"<p>I'm having an error when trying to compile Dafny from source. If I try to do it I get the following output:</p>\n<pre><code>$ make exe\n(cd /home/xbreu/Documents/University/SpecRep/dafny/ ; dotnet build Source/Dafny.sln ) includes parser\nMicrosoft (R) Build Engine version 17.0.1+b177f8fa7 for .NET\nCopyright (C) Microsoft Corporation. All rights reserved.\n\n  Determining projects to restore...\n  All projects are up-to-date for restore.\n  Compiling DafnyRuntimeJava to DafnyRuntimeJava/build/libs/DafnyRuntime.jar...\n\n  FAILURE: Build failed with an exception.\n\n  * Where:\n  Settings file '/home/xbreu/Documents/University/SpecRep/dafny/Source/DafnyRuntime/DafnyRuntimeJava/settings.gradle'\n\n  * What went wrong:\n  Could not compile settings file '/home/xbreu/Documents/University/SpecRep/dafny/Source/DafnyRuntime/DafnyRuntimeJava/settings.gradle'.\n  &gt; startup failed:\n    General error during conversion: Unsupported class file major version 63\n\n    java.lang.IllegalArgumentException: Unsupported class file major version 63\n        at groovyjarjarasm.asm.ClassReader.&lt;init&gt;(ClassReader.java:199)\n        at groovyjarjarasm.asm.ClassReader.&lt;init&gt;(ClassReader.java:180)\n        at groovyjarjarasm.asm.ClassReader.&lt;init&gt;(ClassReader.java:166)\n        at groovyjarjarasm.asm.ClassReader.&lt;init&gt;(ClassReader.java:287)\n        at org.codehaus.groovy.ast.decompiled.AsmDecompiler.parseClass(AsmDecompiler.java:81)\n        at org.codehaus.groovy.control.ClassNodeResolver.findDecompiled(ClassNodeResolver.java:251)\n        at org.codehaus.groovy.control.ClassNodeResolver.tryAsLoaderClassOrScript(ClassNodeResolver.java:189)\n        at org.codehaus.groovy.control.ClassNodeResolver.findClassNode(ClassNodeResolver.java:169)\n        at org.codehaus.groovy.control.ClassNodeResolver.resolveName(ClassNodeResolver.java:125)\n        at org.codehaus.groovy.ast.decompiled.AsmReferenceResolver.resolveClassNullable(AsmReferenceResolver.java:57)\n        at org.codehaus.groovy.ast.decompiled.AsmReferenceResolver.resolveClass(AsmReferenceResolver.java:44)\n        at org.codehaus.groovy.ast.decompiled.TypeSignatureParser.visitEnd(TypeSignatureParser.java:110)\n        at groovyjarjarasm.asm.signature.SignatureReader.parseType(SignatureReader.java:206)\n        at groovyjarjarasm.asm.signature.SignatureReader.accept(SignatureReader.java:124)\n        at org.codehaus.groovy.ast.decompiled.ClassSignatureParser.parseClassSignature(ClassSignatureParser.java:74)\n        at org.codehaus.groovy.ast.decompiled.ClassSignatureParser.configureClass(ClassSignatureParser.java:32)\n        at org.codehaus.groovy.ast.decompiled.DecompiledClassNode.lazyInitSupers(DecompiledClassNode.java:185)\n        at org.codehaus.groovy.ast.decompiled.DecompiledClassNode.isUsingGenerics(DecompiledClassNode.java:86)\n        at org.codehaus.groovy.ast.tools.GenericsUtils.nonGeneric(GenericsUtils.java:275)\n        at org.codehaus.groovy.ast.decompiled.MemberSignatureParser.createMethodNode(MemberSignatureParser.java:101)\n        at org.codehaus.groovy.ast.decompiled.DecompiledClassNode.lambda$createMethodNode$1(DecompiledClassNode.java:230)\n        at org.codehaus.groovy.ast.decompiled.DecompiledClassNode.createMethodNode(DecompiledClassNode.java:236)\n        at org.codehaus.groovy.ast.decompiled.DecompiledClassNode.lazyInitMembers(DecompiledClassNode.java:203)\n        at org.codehaus.groovy.ast.decompiled.DecompiledClassNode.getDeclaredMethods(DecompiledClassNode.java:122)\n        at org.codehaus.groovy.ast.ClassNode.tryFindPossibleMethod(ClassNode.java:1283)\n        at org.codehaus.groovy.control.StaticImportVisitor.transformMethodCallExpression(StaticImportVisitor.java:251)\n        at org.codehaus.groovy.control.StaticImportVisitor.transform(StaticImportVisitor.java:133)\n        at org.codehaus.groovy.ast.ClassCodeExpressionTransformer.visitExpressionStatement(ClassCodeExpressionTransformer.java:108)\n        at org.codehaus.groovy.ast.stmt.ExpressionStatement.visit(ExpressionStatement.java:40)\n        at org.codehaus.groovy.ast.ClassCodeVisitorSupport.visitClassCodeContainer(ClassCodeVisitorSupport.java:138)\n        at org.codehaus.groovy.ast.ClassCodeVisitorSupport.visitConstructorOrMethod(ClassCodeVisitorSupport.java:111)\n        at org.codehaus.groovy.ast.ClassCodeExpressionTransformer.visitConstructorOrMethod(ClassCodeExpressionTransformer.java:66)\n        at org.codehaus.groovy.control.StaticImportVisitor.visitConstructorOrMethod(StaticImportVisitor.java:108)\n        at org.codehaus.groovy.ast.ClassCodeVisitorSupport.visitConstructor(ClassCodeVisitorSupport.java:101)\n        at org.codehaus.groovy.ast.ClassNode.visitContents(ClassNode.java:1089)\n        at org.codehaus.groovy.ast.ClassCodeVisitorSupport.visitClass(ClassCodeVisitorSupport.java:52)\n        at org.codehaus.groovy.control.CompilationUnit.lambda$addPhaseOperations$3(CompilationUnit.java:209)\n        at org.codehaus.groovy.control.CompilationUnit$IPrimaryClassNodeOperation.doPhaseOperation(CompilationUnit.java:942)\n        at org.codehaus.groovy.control.CompilationUnit.processPhaseOperations(CompilationUnit.java:671)\n        at org.codehaus.groovy.control.CompilationUnit.compile(CompilationUnit.java:635)\n        at groovy.lang.GroovyClassLoader.doParseClass(GroovyClassLoader.java:389)\n        at groovy.lang.GroovyClassLoader.lambda$parseClass$3(GroovyClassLoader.java:332)\n        at org.codehaus.groovy.runtime.memoize.StampedCommonCache.compute(StampedCommonCache.java:163)\n        at org.codehaus.groovy.runtime.memoize.StampedCommonCache.getAndPut(StampedCommonCache.java:154)\n        at groovy.lang.GroovyClassLoader.parseClass(GroovyClassLoader.java:330)\n        at org.gradle.groovy.scripts.internal.DefaultScriptCompilationHandler.compileScript(DefaultScriptCompilationHandler.java:139)\n        at org.gradle.groovy.scripts.internal.DefaultScriptCompilationHandler.compileToDir(DefaultScriptCompilationHandler.java:95)\n        at org.gradle.groovy.scripts.internal.BuildOperationBackedScriptCompilationHandler$2.run(BuildOperationBackedScriptCompilationHandler.java:54)\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$1.execute(DefaultBuildOperationRunner.java:29)\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$1.execute(DefaultBuildOperationRunner.java:26)\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:66)\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:59)\n        at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:157)\n        at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:59)\n        at org.gradle.internal.operations.DefaultBuildOperationRunner.run(DefaultBuildOperationRunner.java:47)\n        at org.gradle.internal.operations.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:68)\n        at org.gradle.groovy.scripts.internal.BuildOperationBackedScriptCompilationHandler.compileToDir(BuildOperationBackedScriptCompilationHandler.java:51)\n        at org.gradle.groovy.scripts.internal.FileCacheBackedScriptClassCompiler$CompileToCrossBuildCacheAction.execute(FileCacheBackedScriptClassCompiler.java:190)\n        at org.gradle.groovy.scripts.internal.FileCacheBackedScriptClassCompiler$CompileToCrossBuildCacheAction.execute(FileCacheBackedScriptClassCompiler.java:170)\n        at org.gradle.groovy.scripts.internal.FileCacheBackedScriptClassCompiler$ProgressReportingInitializer.execute(FileCacheBackedScriptClassCompiler.java:211)\n        at org.gradle.groovy.scripts.internal.FileCacheBackedScriptClassCompiler$ProgressReportingInitializer.execute(FileCacheBackedScriptClassCompiler.java:194)\n        at org.gradle.cache.internal.DefaultPersistentDirectoryCache$Initializer.initialize(DefaultPersistentDirectoryCache.java:100)\n        at org.gradle.cache.internal.FixedSharedModeCrossProcessCacheAccess$1.run(FixedSharedModeCrossProcessCacheAccess.java:86)\n        at org.gradle.cache.internal.DefaultFileLockManager$DefaultFileLock.doWriteAction(DefaultFileLockManager.java:216)\n        at org.gradle.cache.internal.DefaultFileLockManager$DefaultFileLock.writeFile(DefaultFileLockManager.java:206)\n        at org.gradle.cache.internal.FixedSharedModeCrossProcessCacheAccess.open(FixedSharedModeCrossProcessCacheAccess.java:83)\n        at org.gradle.cache.internal.DefaultCacheAccess.open(DefaultCacheAccess.java:139)\n        at org.gradle.cache.internal.DefaultPersistentDirectoryStore.open(DefaultPersistentDirectoryStore.java:89)\n        at org.gradle.cache.internal.DefaultPersistentDirectoryStore.open(DefaultPersistentDirectoryStore.java:43)\n        at org.gradle.cache.internal.DefaultCacheFactory.doOpen(DefaultCacheFactory.java:103)\n        at org.gradle.cache.internal.DefaultCacheFactory.open(DefaultCacheFactory.java:68)\n        at org.gradle.cache.internal.DefaultCacheRepository$PersistentCacheBuilder.open(DefaultCacheRepository.java:117)\n        at org.gradle.groovy.scripts.internal.FileCacheBackedScriptClassCompiler.compile(FileCacheBackedScriptClassCompiler.java:116)\n        at org.gradle.groovy.scripts.internal.CrossBuildInMemoryCachingScriptClassCache.getOrCompile(CrossBuildInMemoryCachingScriptClassCache.java:50)\n        at org.gradle.groovy.scripts.internal.BuildScopeInMemoryCachingScriptClassCompiler.compile(BuildScopeInMemoryCachingScriptClassCompiler.java:50)\n        at org.gradle.groovy.scripts.DefaultScriptCompilerFactory$ScriptCompilerImpl.compile(DefaultScriptCompilerFactory.java:49)\n        at org.gradle.configuration.DefaultScriptPluginFactory$ScriptPluginImpl.apply(DefaultScriptPluginFactory.java:125)\n        at org.gradle.configuration.BuildOperationScriptPlugin$1.run(BuildOperationScriptPlugin.java:65)\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$1.execute(DefaultBuildOperationRunner.java:29)\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$1.execute(DefaultBuildOperationRunner.java:26)\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:66)\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:59)\n        at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:157)\n        at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:59)\n        at org.gradle.internal.operations.DefaultBuildOperationRunner.run(DefaultBuildOperationRunner.java:47)\n        at org.gradle.internal.operations.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:68)\n        at org.gradle.configuration.BuildOperationScriptPlugin.lambda$apply$0(BuildOperationScriptPlugin.java:62)\n        at org.gradle.configuration.internal.DefaultUserCodeApplicationContext.apply(DefaultUserCodeApplicationContext.java:44)\n        at org.gradle.configuration.BuildOperationScriptPlugin.apply(BuildOperationScriptPlugin.java:62)\n        at org.gradle.initialization.ScriptEvaluatingSettingsProcessor.applySettingsScript(ScriptEvaluatingSettingsProcessor.java:73)\n        at org.gradle.initialization.ScriptEvaluatingSettingsProcessor.process(ScriptEvaluatingSettingsProcessor.java:66)\n        at org.gradle.initialization.SettingsEvaluatedCallbackFiringSettingsProcessor.process(SettingsEvaluatedCallbackFiringSettingsProcessor.java:34)\n        at org.gradle.initialization.RootBuildCacheControllerSettingsProcessor.process(RootBuildCacheControllerSettingsProcessor.java:47)\n        at org.gradle.initialization.BuildOperationSettingsProcessor$2.call(BuildOperationSettingsProcessor.java:50)\n        at org.gradle.initialization.BuildOperationSettingsProcessor$2.call(BuildOperationSettingsProcessor.java:47)\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:204)\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:199)\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:66)\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:59)\n        at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:157)\n        at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:59)\n        at org.gradle.internal.operations.DefaultBuildOperationRunner.call(DefaultBuildOperationRunner.java:53)\n        at org.gradle.internal.operations.DefaultBuildOperationExecutor.call(DefaultBuildOperationExecutor.java:73)\n        at org.gradle.initialization.BuildOperationSettingsProcessor.process(BuildOperationSettingsProcessor.java:47)\n        at org.gradle.initialization.DefaultSettingsLoader.findSettingsAndLoadIfAppropriate(DefaultSettingsLoader.java:136)\n        at org.gradle.initialization.DefaultSettingsLoader.findAndLoadSettings(DefaultSettingsLoader.java:62)\n        at org.gradle.initialization.SettingsAttachingSettingsLoader.findAndLoadSettings(SettingsAttachingSettingsLoader.java:34)\n        at org.gradle.internal.composite.CommandLineIncludedBuildSettingsLoader.findAndLoadSettings(CommandLineIncludedBuildSettingsLoader.java:34)\n        at org.gradle.internal.composite.ChildBuildRegisteringSettingsLoader.findAndLoadSettings(ChildBuildRegisteringSettingsLoader.java:48)\n        at org.gradle.internal.composite.CompositeBuildSettingsLoader.findAndLoadSettings(CompositeBuildSettingsLoader.java:35)\n        at org.gradle.initialization.InitScriptHandlingSettingsLoader.findAndLoadSettings(InitScriptHandlingSettingsLoader.java:34)\n        at org.gradle.initialization.GradlePropertiesHandlingSettingsLoader.findAndLoadSettings(GradlePropertiesHandlingSettingsLoader.java:39)\n        at org.gradle.initialization.DefaultSettingsPreparer.prepareSettings(DefaultSettingsPreparer.java:31)\n        at org.gradle.initialization.BuildOperationFiringSettingsPreparer$LoadBuild.doLoadBuild(BuildOperationFiringSettingsPreparer.java:62)\n        at org.gradle.initialization.BuildOperationFiringSettingsPreparer$LoadBuild.run(BuildOperationFiringSettingsPreparer.java:57)\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$1.execute(DefaultBuildOperationRunner.java:29)\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$1.execute(DefaultBuildOperationRunner.java:26)\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:66)\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:59)\n        at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:157)\n        at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:59)\n        at org.gradle.internal.operations.DefaultBuildOperationRunner.run(DefaultBuildOperationRunner.java:47)\n        at org.gradle.internal.operations.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:68)\n        at org.gradle.initialization.BuildOperationFiringSettingsPreparer.prepareSettings(BuildOperationFiringSettingsPreparer.java:45)\n        at org.gradle.initialization.VintageBuildModelController.lambda$prepareSettings$2(VintageBuildModelController.java:85)\n        at org.gradle.internal.model.StateTransitionController.lambda$doTransition$12(StateTransitionController.java:227)\n        at org.gradle.internal.model.StateTransitionController.doTransition(StateTransitionController.java:238)\n        at org.gradle.internal.model.StateTransitionController.doTransition(StateTransitionController.java:226)\n        at org.gradle.internal.model.StateTransitionController.lambda$transitionIfNotPreviously$10(StateTransitionController.java:201)\n        at org.gradle.internal.work.DefaultSynchronizer.withLock(DefaultSynchronizer.java:34)\n        at org.gradle.internal.model.StateTransitionController.transitionIfNotPreviously(StateTransitionController.java:197)\n        at org.gradle.initialization.VintageBuildModelController.prepareSettings(VintageBuildModelController.java:85)\n        at org.gradle.initialization.VintageBuildModelController.prepareToScheduleTasks(VintageBuildModelController.java:70)\n        at org.gradle.internal.build.DefaultBuildLifecycleController.lambda$prepareToScheduleTasks$2(DefaultBuildLifecycleController.java:134)\n        at org.gradle.internal.model.StateTransitionController.lambda$doTransition$12(StateTransitionController.java:227)\n        at org.gradle.internal.model.StateTransitionController.doTransition(StateTransitionController.java:238)\n        at org.gradle.internal.model.StateTransitionController.doTransition(StateTransitionController.java:226)\n        at org.gradle.internal.model.StateTransitionController.lambda$maybeTransition$9(StateTransitionController.java:187)\n        at org.gradle.internal.work.DefaultSynchronizer.withLock(DefaultSynchronizer.java:34)\n        at org.gradle.internal.model.StateTransitionController.maybeTransition(StateTransitionController.java:183)\n        at org.gradle.internal.build.DefaultBuildLifecycleController.prepareToScheduleTasks(DefaultBuildLifecycleController.java:132)\n        at org.gradle.internal.buildtree.DefaultBuildTreeWorkPreparer.scheduleRequestedTasks(DefaultBuildTreeWorkPreparer.java:33)\n        at org.gradle.internal.buildtree.DefaultBuildTreeLifecycleController.lambda$doScheduleAndRunTasks$2(DefaultBuildTreeLifecycleController.java:89)\n        at org.gradle.composite.internal.DefaultIncludedBuildTaskGraph.withNewWorkGraph(DefaultIncludedBuildTaskGraph.java:75)\n        at org.gradle.internal.buildtree.DefaultBuildTreeLifecycleController.doScheduleAndRunTasks(DefaultBuildTreeLifecycleController.java:88)\n        at org.gradle.internal.buildtree.DefaultBuildTreeLifecycleController.lambda$runBuild$4(DefaultBuildTreeLifecycleController.java:106)\n        at org.gradle.internal.model.StateTransitionController.lambda$transition$6(StateTransitionController.java:166)\n        at org.gradle.internal.model.StateTransitionController.doTransition(StateTransitionController.java:238)\n        at org.gradle.internal.model.StateTransitionController.lambda$transition$7(StateTransitionController.java:166)\n        at org.gradle.internal.work.DefaultSynchronizer.withLock(DefaultSynchronizer.java:44)\n        at org.gradle.internal.model.StateTransitionController.transition(StateTransitionController.java:166)\n        at org.gradle.internal.buildtree.DefaultBuildTreeLifecycleController.runBuild(DefaultBuildTreeLifecycleController.java:103)\n        at org.gradle.internal.buildtree.DefaultBuildTreeLifecycleController.scheduleAndRunTasks(DefaultBuildTreeLifecycleController.java:69)\n        at org.gradle.tooling.internal.provider.ExecuteBuildActionRunner.run(ExecuteBuildActionRunner.java:31)\n        at org.gradle.launcher.exec.ChainingBuildActionRunner.run(ChainingBuildActionRunner.java:35)\n        at org.gradle.internal.buildtree.ProblemReportingBuildActionRunner.run(ProblemReportingBuildActionRunner.java:49)\n        at org.gradle.launcher.exec.BuildOutcomeReportingBuildActionRunner.run(BuildOutcomeReportingBuildActionRunner.java:69)\n        at org.gradle.tooling.internal.provider.FileSystemWatchingBuildActionRunner.run(FileSystemWatchingBuildActionRunner.java:119)\n        at org.gradle.launcher.exec.BuildCompletionNotifyingBuildActionRunner.run(BuildCompletionNotifyingBuildActionRunner.java:41)\n        at org.gradle.launcher.exec.RootBuildLifecycleBuildActionExecutor.lambda$execute$0(RootBuildLifecycleBuildActionExecutor.java:40)\n        at org.gradle.composite.internal.DefaultRootBuildState.run(DefaultRootBuildState.java:128)\n        at org.gradle.launcher.exec.RootBuildLifecycleBuildActionExecutor.execute(RootBuildLifecycleBuildActionExecutor.java:40)\n        at org.gradle.internal.buildtree.DefaultBuildTreeContext.execute(DefaultBuildTreeContext.java:40)\n        at org.gradle.launcher.exec.BuildTreeLifecycleBuildActionExecutor.lambda$execute$0(BuildTreeLifecycleBuildActionExecutor.java:65)\n        at org.gradle.internal.buildtree.BuildTreeState.run(BuildTreeState.java:53)\n        at org.gradle.launcher.exec.BuildTreeLifecycleBuildActionExecutor.execute(BuildTreeLifecycleBuildActionExecutor.java:65)\n        at org.gradle.launcher.exec.RunAsBuildOperationBuildActionExecutor$3.call(RunAsBuildOperationBuildActionExecutor.java:61)\n        at org.gradle.launcher.exec.RunAsBuildOperationBuildActionExecutor$3.call(RunAsBuildOperationBuildActionExecutor.java:57)\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:204)\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:199)\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:66)\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:59)\n        at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:157)\n        at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:59)\n        at org.gradle.internal.operations.DefaultBuildOperationRunner.call(DefaultBuildOperationRunner.java:53)\n        at org.gradle.internal.operations.DefaultBuildOperationExecutor.call(DefaultBuildOperationExecutor.java:73)\n        at org.gradle.launcher.exec.RunAsBuildOperationBuildActionExecutor.execute(RunAsBuildOperationBuildActionExecutor.java:57)\n        at org.gradle.launcher.exec.RunAsWorkerThreadBuildActionExecutor.lambda$execute$0(RunAsWorkerThreadBuildActionExecutor.java:36)\n        at org.gradle.internal.work.DefaultWorkerLeaseService.withLocks(DefaultWorkerLeaseService.java:270)\n        at org.gradle.internal.work.DefaultWorkerLeaseService.runAsWorkerThread(DefaultWorkerLeaseService.java:119)\n        at org.gradle.launcher.exec.RunAsWorkerThreadBuildActionExecutor.execute(RunAsWorkerThreadBuildActionExecutor.java:36)\n        at org.gradle.tooling.internal.provider.ContinuousBuildActionExecutor.execute(ContinuousBuildActionExecutor.java:103)\n        at org.gradle.tooling.internal.provider.SubscribableBuildActionExecutor.execute(SubscribableBuildActionExecutor.java:64)\n        at org.gradle.internal.session.DefaultBuildSessionContext.execute(DefaultBuildSessionContext.java:46)\n        at org.gradle.tooling.internal.provider.BuildSessionLifecycleBuildActionExecuter$ActionImpl.apply(BuildSessionLifecycleBuildActionExecuter.java:100)\n        at org.gradle.tooling.internal.provider.BuildSessionLifecycleBuildActionExecuter$ActionImpl.apply(BuildSessionLifecycleBuildActionExecuter.java:88)\n        at org.gradle.internal.session.BuildSessionState.run(BuildSessionState.java:69)\n        at org.gradle.tooling.internal.provider.BuildSessionLifecycleBuildActionExecuter.execute(BuildSessionLifecycleBuildActionExecuter.java:62)\n        at org.gradle.tooling.internal.provider.BuildSessionLifecycleBuildActionExecuter.execute(BuildSessionLifecycleBuildActionExecuter.java:41)\n        at org.gradle.tooling.internal.provider.StartParamsValidatingActionExecuter.execute(StartParamsValidatingActionExecuter.java:63)\n        at org.gradle.tooling.internal.provider.StartParamsValidatingActionExecuter.execute(StartParamsValidatingActionExecuter.java:31)\n        at org.gradle.tooling.internal.provider.SessionFailureReportingActionExecuter.execute(SessionFailureReportingActionExecuter.java:58)\n        at org.gradle.tooling.internal.provider.SessionFailureReportingActionExecuter.execute(SessionFailureReportingActionExecuter.java:42)\n        at org.gradle.tooling.internal.provider.SetupLoggingActionExecuter.execute(SetupLoggingActionExecuter.java:47)\n        at org.gradle.tooling.internal.provider.SetupLoggingActionExecuter.execute(SetupLoggingActionExecuter.java:31)\n        at org.gradle.launcher.daemon.server.exec.ExecuteBuild.doBuild(ExecuteBuild.java:65)\n        at org.gradle.launcher.daemon.server.exec.BuildCommandOnly.execute(BuildCommandOnly.java:37)\n        at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:104)\n        at org.gradle.launcher.daemon.server.exec.WatchForDisconnection.execute(WatchForDisconnection.java:39)\n        at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:104)\n        at org.gradle.launcher.daemon.server.exec.ResetDeprecationLogger.execute(ResetDeprecationLogger.java:29)\n        at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:104)\n        at org.gradle.launcher.daemon.server.exec.RequestStopIfSingleUsedDaemon.execute(RequestStopIfSingleUsedDaemon.java:35)\n        at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:104)\n        at org.gradle.launcher.daemon.server.exec.ForwardClientInput$2.create(ForwardClientInput.java:78)\n        at org.gradle.launcher.daemon.server.exec.ForwardClientInput$2.create(ForwardClientInput.java:75)\n        at org.gradle.util.internal.Swapper.swap(Swapper.java:38)\n        at org.gradle.launcher.daemon.server.exec.ForwardClientInput.execute(ForwardClientInput.java:75)\n        at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:104)\n        at org.gradle.launcher.daemon.server.exec.LogAndCheckHealth.execute(LogAndCheckHealth.java:55)\n        at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:104)\n        at org.gradle.launcher.daemon.server.exec.LogToClient.doBuild(LogToClient.java:63)\n        at org.gradle.launcher.daemon.server.exec.BuildCommandOnly.execute(BuildCommandOnly.java:37)\n        at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:104)\n        at org.gradle.launcher.daemon.server.exec.EstablishBuildEnvironment.doBuild(EstablishBuildEnvironment.java:84)\n        at org.gradle.launcher.daemon.server.exec.BuildCommandOnly.execute(BuildCommandOnly.java:37)\n        at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:104)\n        at org.gradle.launcher.daemon.server.exec.StartBuildOrRespondWithBusy$1.run(StartBuildOrRespondWithBusy.java:52)\n        at org.gradle.launcher.daemon.server.DaemonStateCoordinator$1.run(DaemonStateCoordinator.java:297)\n        at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:64)\n        at org.gradle.internal.concurrent.ManagedExecutorImpl$1.run(ManagedExecutorImpl.java:48)\n        at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)\n        at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)\n        at java.base/java.lang.Thread.run(Thread.java:1589)\n\n    1 error\n\n\n  * Try:\n  &gt; Run with --stacktrace option to get the stack trace.\n  &gt; Run with --info or --debug option to get more log output.\n  &gt; Run with --scan to get full insights.\n\n  * Get more help at https://help.gradle.org\n\n  BUILD FAILED in 2s\n/home/xbreu/Documents/University/SpecRep/dafny/Source/DafnyRuntime/DafnyRuntime.csproj(47,5): error MSB3073: The command &quot;./gradlew -q build&quot; exited with code 1.\n</code></pre>\n<p>It looks like a compatibility issue, because of the &quot;Unsupported class file major version 63&quot;, so I must have some program that is not compatible with major version 63 (which corresponds to Java 19). But the versions of Java, Gradle and .NET look compatible:</p>\n<p>Java:</p>\n<pre><code>$ java --version\nopenjdk 19.0.2 2023-01-17\nOpenJDK Runtime Environment (build 19.0.2+7)\nOpenJDK 64-Bit Server VM (build 19.0.2+7, mixed mode)\n</code></pre>\n<p>Gradle:</p>\n<pre><code>$ gradle --version\n\n------------------------------------------------------------\nGradle 8.0.2\n------------------------------------------------------------\n\nBuild time:   2023-03-03 20:07:03 UTC\nRevision:     &lt;unknown&gt;\n\nKotlin:       1.8.10\nGroovy:       3.0.13\nAnt:          Apache Ant(TM) version 1.10.11 compiled on July 10 2021\nJVM:          19.0.2 (Oracle Corporation 19.0.2+7)\nOS:           Linux 6.2.2-arch1-1 amd64\n</code></pre>\n<p>.NET:</p>\n<pre><code>$ dotnet --version\n6.0.114\n</code></pre>\n<p>I tried cloning the repository again and reinstalling the programs, and nothing has helped me so far. What problem could be causing this?</p>\n"},{"tags":["java","xml","kotlin","jackson","jaxb"],"comments":[{"owner":{"account_id":3377022,"reputation":11135,"user_id":2834978,"display_name":"LMC"},"score":0,"creation_date":1679411046,"post_id":75802647,"comment_id":133714970,"body_markdown":"https://stackoverflow.com/questions/69749546/unmarshal-xml-property-with-both-attribute-values-and-subelements ?","body":"<a href=\"https://stackoverflow.com/questions/69749546/unmarshal-xml-property-with-both-attribute-values-and-subelements\" title=\"unmarshal xml property with both attribute values and subelements\">stackoverflow.com/questions/69749546/&hellip;</a> ?"},{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1679412821,"post_id":75802647,"comment_id":133715617,"body_markdown":"Not the same. This is specifically about the *text* in the element, and the solution in the question `(isAttribute=true)` does not work here.","body":"Not the same. This is specifically about the <i>text</i> in the element, and the solution in the question <code>(isAttribute=true)</code> does not work here."}],"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":108,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679409825,"creation_date":1679409825,"question_id":75802647,"body_markdown":"I have an XML document that I want to parse using Jackson XML:\r\n\r\n```\r\n&lt;one&gt;\r\n  &lt;two id=&quot;X&quot;&gt;&lt;/two&gt;\r\n  &lt;two&gt;Text&lt;/two&gt;\r\n&lt;/one&gt;\r\n```\r\n\r\nI made these data classes to contain the data:\r\n```\r\ndata class One(val two: List&lt;Two&gt;)\r\ndata class Two(val id: String)\r\n```\r\n\r\nThese work for the first `two` element, but not for the next one.\r\n\r\nI tried adding a `@JacksonXmlText`-annotated field to the `Two` class, but that doesn&#39;t help: It&#39;ll try to parse a sub-tag containing text, not the text in the element. And I can&#39;t use `@JacksonXmlText` on a `two` field in `One`, since that won&#39;t allow me to also parse the attributes.\r\n\r\nHow do I parse this XML document?","title":"How to parse this XML with Jackson?","body":"<p>I have an XML document that I want to parse using Jackson XML:</p>\n<pre><code>&lt;one&gt;\n  &lt;two id=&quot;X&quot;&gt;&lt;/two&gt;\n  &lt;two&gt;Text&lt;/two&gt;\n&lt;/one&gt;\n</code></pre>\n<p>I made these data classes to contain the data:</p>\n<pre><code>data class One(val two: List&lt;Two&gt;)\ndata class Two(val id: String)\n</code></pre>\n<p>These work for the first <code>two</code> element, but not for the next one.</p>\n<p>I tried adding a <code>@JacksonXmlText</code>-annotated field to the <code>Two</code> class, but that doesn't help: It'll try to parse a sub-tag containing text, not the text in the element. And I can't use <code>@JacksonXmlText</code> on a <code>two</code> field in <code>One</code>, since that won't allow me to also parse the attributes.</p>\n<p>How do I parse this XML document?</p>\n"},{"tags":["java","android","image","text","share-intent"],"answers":[{"tags":[],"owner":{"account_id":28069641,"reputation":21,"user_id":21442467,"display_name":"Marshall Knight"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1679409467,"creation_date":1679409253,"answer_id":75802548,"question_id":75798350,"body_markdown":"Well I have fixed by watching some youtube videos.\r\n\r\nAdd this to your AndroidManifest whithin the application tag:\r\n```\r\n&lt;provider\r\n    android:name=&quot;androidx.core.content.FileProvider&quot;\r\n    android:authorities=&quot;your.package.file-provider&quot;\r\n    android:grantUriPermissions=&quot;true&quot;\r\n    android:exported=&quot;false&quot;&gt;\r\n    &lt;meta-data\r\n         android:name=&quot;android.support.FILE_PROVIDER_PATHS&quot;\r\n         android:resource=&quot;@xml/file_paths&quot;/&gt;\r\n&lt;/provider&gt;\r\n```\r\nCreate an xml folder in res containing:\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;paths xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;\r\n    &lt;cache-path\r\n        name=&quot;shared_images&quot;\r\n        path=&quot;images&quot; /&gt;\r\n    &lt;external-path\r\n        name=&quot;saved_images&quot;\r\n        path=&quot;MyImagesToShare&quot; /&gt;\r\n&lt;/paths&gt;\r\n```\r\nThen in the activity:\r\n````\r\nIntent shareIntent = new Intent();\r\nshareIntent.setAction(Intent.ACTION_SEND);\r\nshareIntent.setType(&quot;image/*&quot;);\r\nshareIntent.putExtra(Intent.EXTRA_TEXT, Html.fromHtml(&quot;Some text.&lt;br /&gt;https://maybe.a.deeplink.in.your.app&quot;));\r\nshareIntent.putExtra(Intent.EXTRA_STREAM, getContentUri());\r\nshareIntent.addFlags(Intent.FLAG_GRANT_READ_URI_PERMISSION);\r\nstartActivity(Intent.createChooser(shareIntent, &quot;Share this with&quot;));\r\n````\r\nFinally the function to get your image from ImageView you want (in my case this is image):\r\n````\r\nprivate Uri getContentUri() {\r\n    Bitmap bitmap = null;\r\n    BitmapDrawable bitmapDrawable = (BitmapDrawable) image.getDrawable();\r\n    bitmap = bitmapDrawable.getBitmap();\r\n\r\n    File imagesFolder = new File(getCacheDir(), &quot;images&quot;);\r\n    Uri contentUri = null;\r\n    try {\r\n        imagesFolder.mkdirs();\r\n        File file = new File(imagesFolder, &quot;shared_image.png&quot;);\r\n        FileOutputStream stream = new FileOutputStream(file);\r\n        bitmap.compress(Bitmap.CompressFormat.PNG, 100, stream);\r\n        stream.flush();\r\n        stream.close();\r\n        contentUri = FileProvider.getUriForFile(this, &quot;your.package.file-provider&quot;, file);\r\n    } catch (Exception e) {\r\n         Toast(&quot;Error =&gt; &quot; + e.getMessage());\r\n    }\r\n        return contentUri;\r\n}\r\n````\r\nNow your image will be saved as shared_image.png and you have a uri you can work with!\r\n\r\nGoodluck :)","title":"Android java Share Intent image plus text and link how to","body":"<p>Well I have fixed by watching some youtube videos.</p>\n<p>Add this to your AndroidManifest whithin the application tag:</p>\n<pre><code>&lt;provider\n    android:name=&quot;androidx.core.content.FileProvider&quot;\n    android:authorities=&quot;your.package.file-provider&quot;\n    android:grantUriPermissions=&quot;true&quot;\n    android:exported=&quot;false&quot;&gt;\n    &lt;meta-data\n         android:name=&quot;android.support.FILE_PROVIDER_PATHS&quot;\n         android:resource=&quot;@xml/file_paths&quot;/&gt;\n&lt;/provider&gt;\n</code></pre>\n<p>Create an xml folder in res containing:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;paths xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;\n    &lt;cache-path\n        name=&quot;shared_images&quot;\n        path=&quot;images&quot; /&gt;\n    &lt;external-path\n        name=&quot;saved_images&quot;\n        path=&quot;MyImagesToShare&quot; /&gt;\n&lt;/paths&gt;\n</code></pre>\n<p>Then in the activity:</p>\n<pre><code>Intent shareIntent = new Intent();\nshareIntent.setAction(Intent.ACTION_SEND);\nshareIntent.setType(&quot;image/*&quot;);\nshareIntent.putExtra(Intent.EXTRA_TEXT, Html.fromHtml(&quot;Some text.&lt;br /&gt;https://maybe.a.deeplink.in.your.app&quot;));\nshareIntent.putExtra(Intent.EXTRA_STREAM, getContentUri());\nshareIntent.addFlags(Intent.FLAG_GRANT_READ_URI_PERMISSION);\nstartActivity(Intent.createChooser(shareIntent, &quot;Share this with&quot;));\n</code></pre>\n<p>Finally the function to get your image from ImageView you want (in my case this is image):</p>\n<pre><code>private Uri getContentUri() {\n    Bitmap bitmap = null;\n    BitmapDrawable bitmapDrawable = (BitmapDrawable) image.getDrawable();\n    bitmap = bitmapDrawable.getBitmap();\n\n    File imagesFolder = new File(getCacheDir(), &quot;images&quot;);\n    Uri contentUri = null;\n    try {\n        imagesFolder.mkdirs();\n        File file = new File(imagesFolder, &quot;shared_image.png&quot;);\n        FileOutputStream stream = new FileOutputStream(file);\n        bitmap.compress(Bitmap.CompressFormat.PNG, 100, stream);\n        stream.flush();\n        stream.close();\n        contentUri = FileProvider.getUriForFile(this, &quot;your.package.file-provider&quot;, file);\n    } catch (Exception e) {\n         Toast(&quot;Error =&gt; &quot; + e.getMessage());\n    }\n        return contentUri;\n}\n</code></pre>\n<p>Now your image will be saved as shared_image.png and you have a uri you can work with!</p>\n<p>Goodluck :)</p>\n"}],"owner":{"account_id":28069641,"reputation":21,"user_id":21442467,"display_name":"Marshall Knight"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":386,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1679409467,"creation_date":1679383774,"question_id":75798350,"body_markdown":"I&#39;ve been trying for days to get Shared Intent working on Android with an image, text and a link at the bottom. In the image is what I want to achieve. You can see what I get at the bottom.\r\n\r\n[What I want to achieve](https://i.stack.imgur.com/eUjmA.png)\r\n\r\nThis is the code I have right now:\r\n\r\n```\r\nIntent shareIntent = new Intent();\r\nshareIntent.setAction(Intent.ACTION_SEND);\r\nshareIntent.putExtra(Intent.EXTRA_TEXT, Html.fromHtml(&quot;&lt;img src=&#39;http://example.com/images/image.jpg&#39;&gt;&lt;br /&gt;This is the text shared.&lt;br /&gt;http://example.com&quot;));\r\n\r\n// shareIntent.putExtra(Intent.EXTRA_STREAM, DownloadImage(&quot;http://example.com/images/image.jpg&quot;));\r\n// shareIntent.putExtra(Intent.EXTRA_STREAM, Html.fromHtml(&quot;&lt;img src=&#39;http://example.com/images/image.jpg&#39;&gt;&quot;));\r\n\r\nshareIntent.setType(&quot;*/*&quot;);\r\n// shareIntent.setType(&quot;image/jpeg&quot;);\r\n// shareIntent.setType(&quot;text/html&quot;);\r\n\r\nshareIntent.addFlags(Intent.FLAG_GRANT_READ_URI_PERMISSION);\r\nshareIntent.addFlags(Intent.FLAG_GRANT_WRITE_URI_PERMISSION);\r\nstartActivity(Intent.createChooser(shareIntent, &quot;Share some data&quot;));\r\n```\r\n\r\nWhat am I doing wrong? I have commented some things I have tried. Thanks for your help!\r\n\r\nI have tried multiple data types and different types of image loading. Loading from url doesn&#39;t work and inserting a bitmap doesn&#39;t work. \r\n(DownloadImage returns a Bitmap and I have checked that it has no errors)\r\nI&#39;ve replaced the url.","title":"Android java Share Intent image plus text and link how to","body":"<p>I've been trying for days to get Shared Intent working on Android with an image, text and a link at the bottom. In the image is what I want to achieve. You can see what I get at the bottom.</p>\n<p><a href=\"https://i.stack.imgur.com/eUjmA.png\" rel=\"nofollow noreferrer\">What I want to achieve</a></p>\n<p>This is the code I have right now:</p>\n<pre><code>Intent shareIntent = new Intent();\nshareIntent.setAction(Intent.ACTION_SEND);\nshareIntent.putExtra(Intent.EXTRA_TEXT, Html.fromHtml(&quot;&lt;img src='http://example.com/images/image.jpg'&gt;&lt;br /&gt;This is the text shared.&lt;br /&gt;http://example.com&quot;));\n\n// shareIntent.putExtra(Intent.EXTRA_STREAM, DownloadImage(&quot;http://example.com/images/image.jpg&quot;));\n// shareIntent.putExtra(Intent.EXTRA_STREAM, Html.fromHtml(&quot;&lt;img src='http://example.com/images/image.jpg'&gt;&quot;));\n\nshareIntent.setType(&quot;*/*&quot;);\n// shareIntent.setType(&quot;image/jpeg&quot;);\n// shareIntent.setType(&quot;text/html&quot;);\n\nshareIntent.addFlags(Intent.FLAG_GRANT_READ_URI_PERMISSION);\nshareIntent.addFlags(Intent.FLAG_GRANT_WRITE_URI_PERMISSION);\nstartActivity(Intent.createChooser(shareIntent, &quot;Share some data&quot;));\n</code></pre>\n<p>What am I doing wrong? I have commented some things I have tried. Thanks for your help!</p>\n<p>I have tried multiple data types and different types of image loading. Loading from url doesn't work and inserting a bitmap doesn't work.\n(DownloadImage returns a Bitmap and I have checked that it has no errors)\nI've replaced the url.</p>\n"},{"tags":["java","spring-boot","spring-security"],"owner":{"account_id":23624871,"reputation":352,"user_id":17657568,"display_name":"AMZ"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":75,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679408509,"creation_date":1679407715,"question_id":75802280,"body_markdown":"I am using spring security 3.0.4 and the code below is related to its config. When I run the program, no page contains css code and only the html file is loaded, and the page is messed up. I also used some stackoverflow links(like [this][1]), but none of them worked.\r\n\r\n    @Configuration\r\n    public class SecurityConfig {\r\n    \r\n        public static final String ROLE_PASSENGER = &quot;passenger&quot;;\r\n    \r\n        @Bean\r\n        public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n            http.csrf().ignoringRequestMatchers(&quot;/&quot;, &quot;/home&quot;, &quot;/search&quot;, &quot;/search/page&quot;)\r\n                    .and().authorizeHttpRequests()\r\n                    .requestMatchers(&quot;/reserve-flight&quot;, &quot;/panel&quot;).authenticated()\r\n                    .requestMatchers(&quot;/&quot;, &quot;/home&quot;, &quot;/search/**&quot;).permitAll().and()\r\n                    .formLogin().loginPage(&quot;/login&quot;).permitAll().defaultSuccessUrl(&quot;/panel&quot;)\r\n                    .failureUrl(&quot;/login?error=true&quot;).and().logout().permitAll()\r\n                    .logoutSuccessUrl(&quot;/login?logout=true&quot;).invalidateHttpSession(true);\r\n            return http.build();\r\n    \r\n        }\r\n    \r\n        @Bean\r\n        public BCryptPasswordEncoder getEncoder() {\r\n            return new BCryptPasswordEncoder();\r\n        }\r\n    }\r\n\r\nAuthprovider:\r\n\r\n    @Component\r\n    public class UserPassAuthProvider implements AuthenticationProvider {\r\n        private final PassengerDetailsService passengerDetailsService;\r\n        private final PasswordEncoder encoder;\r\n    \r\n        public UserPassAuthProvider(PassengerDetailsService passengerDetailsService, PasswordEncoder encoder) {\r\n            this.passengerDetailsService = passengerDetailsService;\r\n            this.encoder = encoder;\r\n        }\r\n    \r\n        @Override\r\n        public Authentication authenticate(Authentication authentication) throws AuthenticationException {\r\n            String email = authentication.getName();\r\n            String password = authentication.getCredentials().toString();\r\n            PassengerDetails passenger = passengerDetailsService.findByEmailAddress(email);\r\n            if (passenger != null &amp;&amp; encoder.matches(password, passenger.getPassword())) {\r\n                return new UsernamePasswordAuthenticationToken(email, null, Collections.singleton(() -&gt; ROLE_PASSENGER));\r\n            }\r\n            return null;\r\n        }\r\n    \r\n        @Override\r\n        public boolean supports(Class&lt;?&gt; authentication) {\r\n            return UsernamePasswordAuthenticationToken.class.equals(authentication);\r\n        }\r\n    }\r\n\r\n\r\nhomepage:\r\n\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/25368535/spring-security-does-not-allow-css-or-js-resources-to-be-loaded\r\n  [2]: https://i.stack.imgur.com/3YQ0R.png","title":"Spring security blocks access to the css files","body":"<p>I am using spring security 3.0.4 and the code below is related to its config. When I run the program, no page contains css code and only the html file is loaded, and the page is messed up. I also used some stackoverflow links(like <a href=\"https://stackoverflow.com/questions/25368535/spring-security-does-not-allow-css-or-js-resources-to-be-loaded\">this</a>), but none of them worked.</p>\n<pre><code>@Configuration\npublic class SecurityConfig {\n\n    public static final String ROLE_PASSENGER = &quot;passenger&quot;;\n\n    @Bean\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n        http.csrf().ignoringRequestMatchers(&quot;/&quot;, &quot;/home&quot;, &quot;/search&quot;, &quot;/search/page&quot;)\n                .and().authorizeHttpRequests()\n                .requestMatchers(&quot;/reserve-flight&quot;, &quot;/panel&quot;).authenticated()\n                .requestMatchers(&quot;/&quot;, &quot;/home&quot;, &quot;/search/**&quot;).permitAll().and()\n                .formLogin().loginPage(&quot;/login&quot;).permitAll().defaultSuccessUrl(&quot;/panel&quot;)\n                .failureUrl(&quot;/login?error=true&quot;).and().logout().permitAll()\n                .logoutSuccessUrl(&quot;/login?logout=true&quot;).invalidateHttpSession(true);\n        return http.build();\n\n    }\n\n    @Bean\n    public BCryptPasswordEncoder getEncoder() {\n        return new BCryptPasswordEncoder();\n    }\n}\n</code></pre>\n<p>Authprovider:</p>\n<pre><code>@Component\npublic class UserPassAuthProvider implements AuthenticationProvider {\n    private final PassengerDetailsService passengerDetailsService;\n    private final PasswordEncoder encoder;\n\n    public UserPassAuthProvider(PassengerDetailsService passengerDetailsService, PasswordEncoder encoder) {\n        this.passengerDetailsService = passengerDetailsService;\n        this.encoder = encoder;\n    }\n\n    @Override\n    public Authentication authenticate(Authentication authentication) throws AuthenticationException {\n        String email = authentication.getName();\n        String password = authentication.getCredentials().toString();\n        PassengerDetails passenger = passengerDetailsService.findByEmailAddress(email);\n        if (passenger != null &amp;&amp; encoder.matches(password, passenger.getPassword())) {\n            return new UsernamePasswordAuthenticationToken(email, null, Collections.singleton(() -&gt; ROLE_PASSENGER));\n        }\n        return null;\n    }\n\n    @Override\n    public boolean supports(Class&lt;?&gt; authentication) {\n        return UsernamePasswordAuthenticationToken.class.equals(authentication);\n    }\n}\n</code></pre>\n<p>homepage:</p>\n<p><a href=\"https://i.stack.imgur.com/3YQ0R.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/3YQ0R.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","testing","mocking","mockito","powermock"],"answers":[{"tags":[],"owner":{"account_id":22577442,"reputation":758,"user_id":16775102,"display_name":"Feel free"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1679408491,"creation_date":1679408491,"answer_id":75802428,"question_id":75794755,"body_markdown":"First of all, when you use &#39;mockStatic()&#39; you need to put it inside try-with-resources, then you cant throw an Exception here because the method is declared to throw only the `UnknownHostException`.\r\nYou need to throw `UnknownHostException`. Then when you do assertThrows you dont need to pass `InetAddress::getLocalHost` because you are testing repository method `getLocalHostName()` So test will look like \r\n\r\n   \r\n\r\n    @Test\r\n        void testGetLocalHostThrowsUnknownHostException() {\r\n            try(MockedStatic&lt;InetAddress&gt; inetAddressMockedStatic = mockStatic(InetAddress.class)) {\r\n                inetAddressMockedStatic.when(InetAddress::getLocalHost).thenThrow(UnknownHostException.class);\r\n                assertThrows(UnknownHostException.class, () -&gt; repository.getLocalHostName());\r\n            }\r\n    \r\n        }","title":"How to cover by mock test static method InetAddress.getLocalHost()?","body":"<p>First of all, when you use 'mockStatic()' you need to put it inside try-with-resources, then you cant throw an Exception here because the method is declared to throw only the <code>UnknownHostException</code>.\nYou need to throw <code>UnknownHostException</code>. Then when you do assertThrows you dont need to pass <code>InetAddress::getLocalHost</code> because you are testing repository method <code>getLocalHostName()</code> So test will look like</p>\n<pre><code>@Test\n    void testGetLocalHostThrowsUnknownHostException() {\n        try(MockedStatic&lt;InetAddress&gt; inetAddressMockedStatic = mockStatic(InetAddress.class)) {\n            inetAddressMockedStatic.when(InetAddress::getLocalHost).thenThrow(UnknownHostException.class);\n            assertThrows(UnknownHostException.class, () -&gt; repository.getLocalHostName());\n        }\n\n    }\n</code></pre>\n"}],"owner":{"account_id":23951042,"reputation":33,"user_id":17942621,"display_name":"Jack"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":553,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1679408491,"creation_date":1679342261,"question_id":75794755,"body_markdown":"I would like to cover by mock test one standard Java method, not all its realisation but only throwing an exception.\r\nIt looks like:\r\n\r\n    public static InetAddress getLocalHost() throws UnknownHostException {...}\r\nAnd I use it in my code in this method:\r\n\r\n     @Override\r\n     @SneakyThrows\r\n     public String getLocalHostName() {\r\n        return InetAddress.getLocalHost().getHostName();\r\n     }\r\n\r\nI&#39;ve to write the following tests:\r\n\r\n    @Test\r\n    void testGetLocalHostThrowsUnknownHostException() throws Exception {\r\n        mockStatic(InetAddress.class);\r\n        when(repository.getLocalHostName()).thenThrow(new Exception(&quot;exception message&quot;));\r\n    \r\n        assertThrows(UnknownHostException.class, InetAddress::getLocalHost);\r\n    }\r\nbut always see an error: \r\n\r\n    org.mockito.exceptions.base.MockitoException: \r\n    Checked exception is invalid for this method!\r\n    Invalid: java.lang.Exception: exception message\r\nAny there any possibilities to check the exception by mock test?\r\n        ","title":"How to cover by mock test static method InetAddress.getLocalHost()?","body":"<p>I would like to cover by mock test one standard Java method, not all its realisation but only throwing an exception.\nIt looks like:</p>\n<pre><code>public static InetAddress getLocalHost() throws UnknownHostException {...}\n</code></pre>\n<p>And I use it in my code in this method:</p>\n<pre><code> @Override\n @SneakyThrows\n public String getLocalHostName() {\n    return InetAddress.getLocalHost().getHostName();\n }\n</code></pre>\n<p>I've to write the following tests:</p>\n<pre><code>@Test\nvoid testGetLocalHostThrowsUnknownHostException() throws Exception {\n    mockStatic(InetAddress.class);\n    when(repository.getLocalHostName()).thenThrow(new Exception(&quot;exception message&quot;));\n\n    assertThrows(UnknownHostException.class, InetAddress::getLocalHost);\n}\n</code></pre>\n<p>but always see an error:</p>\n<pre><code>org.mockito.exceptions.base.MockitoException: \nChecked exception is invalid for this method!\nInvalid: java.lang.Exception: exception message\n</code></pre>\n<p>Any there any possibilities to check the exception by mock test?</p>\n"},{"tags":["java","oracle","hibernate","jboss"],"comments":[{"owner":{"account_id":3631143,"reputation":55363,"user_id":3027266,"accept_rate":75,"display_name":"Wernfried Domscheit"},"score":1,"creation_date":1679401890,"post_id":75801219,"comment_id":133711931,"body_markdown":"The values in the two database are just different. What is your question?","body":"The values in the two database are just different. What is your question?"},{"owner":{"account_id":98359,"reputation":184987,"user_id":266304,"display_name":"Alex Poole"},"score":0,"creation_date":1679402544,"post_id":75801219,"comment_id":133712156,"body_markdown":"It depends how you insert the data really - what data types you&#39;re using, how you supply/bind values, etc. The DB session environment might matter if you&#39;re passing strings but you&#39;d probably see errors from format mismatches rather than truncation.","body":"It depends how you insert the data really - what data types you&#39;re using, how you supply/bind values, etc. The DB session environment might matter if you&#39;re passing strings but you&#39;d probably see errors from format mismatches rather than truncation."},{"owner":{"account_id":1635690,"reputation":150047,"user_id":1509264,"accept_rate":58,"display_name":"MT0"},"score":0,"creation_date":1679403430,"post_id":75801219,"comment_id":133712456,"body_markdown":"Please [edit] the question to include a [MRE] including the Java code where you insert the data. There are multiple possible causes including whether you insert dates as bind variables with the data types `java.sql.Date` (which has no time component), `java.sql.Timestamp` (which does have a time component and matches Oracle&#39;s `DATE` data type), or as a string (which will rely on an implicit conversion in the database and then the `NLS_DATE_FORMAT` session parameter would be used). If you don&#39;t share any code then we cannot comment and can only guess.","body":"Please <a href=\"https://stackoverflow.com/posts/75801219/edit\">edit</a> the question to include a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> including the Java code where you insert the data. There are multiple possible causes including whether you insert dates as bind variables with the data types <code>java.sql.Date</code> (which has no time component), <code>java.sql.Timestamp</code> (which does have a time component and matches Oracle&#39;s <code>DATE</code> data type), or as a string (which will rely on an implicit conversion in the database and then the <code>NLS_DATE_FORMAT</code> session parameter would be used). If you don&#39;t share any code then we cannot comment and can only guess."},{"owner":{"account_id":1635690,"reputation":150047,"user_id":1509264,"accept_rate":58,"display_name":"MT0"},"score":1,"creation_date":1679407105,"post_id":75801219,"comment_id":133713667,"body_markdown":"Possibly a duplicate of https://stackoverflow.com/questions/33232260/temporaltemporaltype-date-with-oracle-12 (i.e. different JDBC drivers have different behaviours)","body":"Possibly a duplicate of <a href=\"https://stackoverflow.com/questions/33232260/temporaltemporaltype-date-with-oracle-12\" title=\"temporaltemporaltype date with oracle 12\">stackoverflow.com/questions/33232260/&hellip;</a> (i.e. different JDBC drivers have different behaviours)"},{"owner":{"account_id":14823357,"reputation":23,"user_id":10704957,"display_name":"kiryushinsa"},"score":0,"creation_date":1679407905,"post_id":75801219,"comment_id":133713958,"body_markdown":"@MT0 Interesting, thanks! But we are using Oracle version 19, maybe it will be useful.","body":"@MT0 Interesting, thanks! But we are using Oracle version 19, maybe it will be useful."},{"owner":{"account_id":1635690,"reputation":150047,"user_id":1509264,"accept_rate":58,"display_name":"MT0"},"score":2,"creation_date":1679408503,"post_id":75801219,"comment_id":133714155,"body_markdown":"@СергейКирюшин The problem would arise from the JDBC driver version and not the RDBMS version - for example: the [JDBC driver downloads](https://www.oracle.com/database/technologies/appdev/jdbc-downloads.html) lists two different drivers OJDBC8 and OJDBC10 for Oracle 19c (but also states that OJDBC11 works with Oracle 19c) so your test and production database could be running the same databases, codebase and settings and have different OJDBC drivers.","body":"@СергейКирюшин The problem would arise from the JDBC driver version and not the RDBMS version - for example: the <a href=\"https://www.oracle.com/database/technologies/appdev/jdbc-downloads.html\" rel=\"nofollow noreferrer\">JDBC driver downloads</a> lists two different drivers OJDBC8 and OJDBC10 for Oracle 19c (but also states that OJDBC11 works with Oracle 19c) so your test and production database could be running the same databases, codebase and settings and have different OJDBC drivers."}],"owner":{"account_id":14823357,"reputation":23,"user_id":10704957,"display_name":"kiryushinsa"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":85,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679407933,"creation_date":1679401734,"question_id":75801219,"body_markdown":"**Hello**\r\n\r\nI have:\r\n\r\n- database Oracle 19\r\n- Field in oracle with type - DATE\r\n- Application with: Jboss, EJB, Hibernate\r\n\r\nWhen my application inserts data into the database, I get two different results:\r\n\r\nSql query which i used for collection data:\r\n\r\n    SELECT ID, KEY, TO_CHAR(STATUS_DATE, &#39;YYYY-MM-DD HH24:MI:SS&#39;) AS DATE_WITH_TIME FROM DATA dt; \r\n\r\n - Production: In field DATE_WITH_TIME i always get right date but wrong time - 2023-03-20 00:00:00\r\n - Test: In field DATE_WITH_TIME i get 2023-03-20 18:20:23 - get current date-time\r\n\r\n\r\nSettings for test and production is identical - versions of database/application/dependencies, equals field types etc. At the same time insertions to another tables on production works properly. \r\n\r\n**Question:** \r\nWhat factor in two environments can impose such a change on the behavior when i inserting data in field DATE?\r\nMaybe hidden setting in Oracle or Jboss.\r\n\r\n**UPD1:**   \r\nI&#39;m working with legacy and I know it needs to be refactored, but now I want to know why this solution worked differently for prod and test env.  \r\n\r\nAdditional information:\r\n - setting data to field - `setDate(new Timestamp(new Date().getTime()))` - \r\n - NLS_DATE_FORMAT = DD.MM.RR -&gt; for Production and Test\r\n - Entity field type:\r\n\r\n```\r\n  @Temporal(TemporalType.DATE)\r\n  @Column(name=&quot;DATE&quot;)\r\n  private Date date;\r\n```","title":"Oracle. Inserting into the DATE field gives different results in different environments","body":"<p><strong>Hello</strong></p>\n<p>I have:</p>\n<ul>\n<li>database Oracle 19</li>\n<li>Field in oracle with type - DATE</li>\n<li>Application with: Jboss, EJB, Hibernate</li>\n</ul>\n<p>When my application inserts data into the database, I get two different results:</p>\n<p>Sql query which i used for collection data:</p>\n<pre><code>SELECT ID, KEY, TO_CHAR(STATUS_DATE, 'YYYY-MM-DD HH24:MI:SS') AS DATE_WITH_TIME FROM DATA dt; \n</code></pre>\n<ul>\n<li>Production: In field DATE_WITH_TIME i always get right date but wrong time - 2023-03-20 00:00:00</li>\n<li>Test: In field DATE_WITH_TIME i get 2023-03-20 18:20:23 - get current date-time</li>\n</ul>\n<p>Settings for test and production is identical - versions of database/application/dependencies, equals field types etc. At the same time insertions to another tables on production works properly.</p>\n<p><strong>Question:</strong>\nWhat factor in two environments can impose such a change on the behavior when i inserting data in field DATE?\nMaybe hidden setting in Oracle or Jboss.</p>\n<p><strong>UPD1:</strong><br />\nI'm working with legacy and I know it needs to be refactored, but now I want to know why this solution worked differently for prod and test env.</p>\n<p>Additional information:</p>\n<ul>\n<li>setting data to field - <code>setDate(new Timestamp(new Date().getTime()))</code> -</li>\n<li>NLS_DATE_FORMAT = DD.MM.RR -&gt; for Production and Test</li>\n<li>Entity field type:</li>\n</ul>\n<pre><code>  @Temporal(TemporalType.DATE)\n  @Column(name=&quot;DATE&quot;)\n  private Date date;\n</code></pre>\n"},{"tags":["java","multithreading","exception","java-threads"],"comments":[{"owner":{"account_id":2843847,"reputation":55833,"user_id":2442804,"accept_rate":80,"display_name":"luk2302"},"score":1,"creation_date":1679407408,"post_id":75802202,"comment_id":133713780,"body_markdown":"Because your method no longer throws the exception. The thread which may or may not run at any future point in time might encounter that exception but that no longer has any relation to your `simulateTwitterStream`.","body":"Because your method no longer throws the exception. The thread which may or may not run at any future point in time might encounter that exception but that no longer has any relation to your <code>simulateTwitterStream</code>."},{"owner":{"account_id":4819600,"reputation":56500,"user_id":3890632,"display_name":"khelwood"},"score":3,"creation_date":1679407506,"post_id":75802202,"comment_id":133713816,"body_markdown":"Your code is now inside a Callable, which **does** declare that it can throw an exception. [Callable#call](https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/Callable.html#call--)","body":"Your code is now inside a Callable, which <b>does</b> declare that it can throw an exception. <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/Callable.html#call--\" rel=\"nofollow noreferrer\">Callable#call</a>"},{"owner":{"account_id":2090997,"reputation":840,"user_id":7516740,"display_name":"elvis"},"score":0,"creation_date":1679408755,"post_id":75802202,"comment_id":133714228,"body_markdown":"@khelwood thank you! but if the code is from call() which can throw Exception, then who catch it?","body":"@khelwood thank you! but if the code is from call() which can throw Exception, then who catch it?"},{"owner":{"account_id":4819600,"reputation":56500,"user_id":3890632,"display_name":"khelwood"},"score":1,"creation_date":1679409056,"post_id":75802202,"comment_id":133714322,"body_markdown":"@elvis That&#39;s not your method&#39;s problem, because your method does not execute the Callable: It&#39;s the `Executor`&#39;s problem.","body":"@elvis That&#39;s not your method&#39;s problem, because your method does not execute the Callable: It&#39;s the <code>Executor</code>&#39;s problem."}],"owner":{"account_id":2090997,"reputation":840,"user_id":7516740,"display_name":"elvis"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1679407270,"creation_date":1679407270,"question_id":75802202,"body_markdown":" I have a piece of code where an exception is thrown. The createStatus method from twitter4j library throws TwitterException, which extends Exception, so it&#39;s a checked exception.   \r\n\r\n    private void simulateTwitterStream(\r\n            String[] keywords, int minTweetLength, int maxTweetLength, long sleepTimeMs) throws TwitterException {\r\n    \r\n            while (true) {\r\n                String formattedTweetAsRawJson = getFormattedTeet(keywords, minTweetLength, maxTweetLength);\r\n                Status status = TwitterObjectFactory.createStatus(formattedTweetAsRawJson);\r\n                twitterKafkaStatusListener.onStatus(status);\r\n                sleep(sleepTimeMs);\r\n            }\r\n    }\r\n\r\nAfter that I implemented the while loop in another thread like this:\r\n\r\n    private void simulateTwitterStream(\r\n            String[] keywords, int minTweetLength, int maxTweetLength, long sleepTimeMs) {\r\n\r\n        Executors.newSingleThreadExecutor().submit(() -&gt; {\r\n            while (true) {\r\n                String formattedTweetAsRawJson = getFormattedTeet(keywords, minTweetLength, maxTweetLength);\r\n                Status status = TwitterObjectFactory.createStatus(formattedTweetAsRawJson);\r\n                twitterKafkaStatusListener.onStatus(status);\r\n                sleep(sleepTimeMs);\r\n            }\r\n        });\r\n    }\r\n\r\nBut in this case, I don&#39;t need to use throws TwitterException at the method signature. Can somebody explain me why I don&#39;t need to use throws TwitterException.\r\n\r\nThank you","title":"Why the exception is not thrown if I create another thread in Java?","body":"<p>I have a piece of code where an exception is thrown. The createStatus method from twitter4j library throws TwitterException, which extends Exception, so it's a checked exception.</p>\n<pre><code>private void simulateTwitterStream(\n        String[] keywords, int minTweetLength, int maxTweetLength, long sleepTimeMs) throws TwitterException {\n\n        while (true) {\n            String formattedTweetAsRawJson = getFormattedTeet(keywords, minTweetLength, maxTweetLength);\n            Status status = TwitterObjectFactory.createStatus(formattedTweetAsRawJson);\n            twitterKafkaStatusListener.onStatus(status);\n            sleep(sleepTimeMs);\n        }\n}\n</code></pre>\n<p>After that I implemented the while loop in another thread like this:</p>\n<pre><code>private void simulateTwitterStream(\n        String[] keywords, int minTweetLength, int maxTweetLength, long sleepTimeMs) {\n\n    Executors.newSingleThreadExecutor().submit(() -&gt; {\n        while (true) {\n            String formattedTweetAsRawJson = getFormattedTeet(keywords, minTweetLength, maxTweetLength);\n            Status status = TwitterObjectFactory.createStatus(formattedTweetAsRawJson);\n            twitterKafkaStatusListener.onStatus(status);\n            sleep(sleepTimeMs);\n        }\n    });\n}\n</code></pre>\n<p>But in this case, I don't need to use throws TwitterException at the method signature. Can somebody explain me why I don't need to use throws TwitterException.</p>\n<p>Thank you</p>\n"},{"tags":["java","android","firebase","firebase-realtime-database"],"comments":[{"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1679382213,"post_id":75797731,"comment_id":133707031,"body_markdown":"Please edit your question and add your database structure as a JSON file. You can simply get it by clicking the Export JSON in the overflow menu (⠇) in your [Firebase Console](https://console.firebase.google.com/u/0/project/_/database/data).","body":"Please edit your question and add your database structure as a JSON file. You can simply get it by clicking the Export JSON in the overflow menu (⠇) in your <a href=\"https://console.firebase.google.com/u/0/project/_/database/data\" rel=\"nofollow noreferrer\">Firebase Console</a>."},{"owner":{"account_id":21896421,"reputation":187,"user_id":17846979,"display_name":"RandomLonelyDev"},"score":0,"creation_date":1679574203,"post_id":75797731,"comment_id":133747753,"body_markdown":"Try to avoid using notifyDatasetChanged().  This can be costly, as it is more of a shotgun approach.  Since you are inserting an item at the end of the list each time, use notifyItemInserted(int position) instead.","body":"Try to avoid using notifyDatasetChanged().  This can be costly, as it is more of a shotgun approach.  Since you are inserting an item at the end of the list each time, use notifyItemInserted(int position) instead."}],"answers":[{"tags":[],"owner":{"account_id":25535301,"reputation":1,"user_id":19322499,"display_name":"Niaz Sagor"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679379763,"creation_date":1679379763,"answer_id":75797865,"question_id":75797731,"body_markdown":"If you are sure that there is no issue with the misspellings, then I think you can use the `equals` method to check the gender string. For example, `employerInfo.getGender().equals(&quot;Male&quot;)`","title":"How to populate RecyclerView using Java with data that meets condition? For Instance on populate with male candidates","body":"<p>If you are sure that there is no issue with the misspellings, then I think you can use the <code>equals</code> method to check the gender string. For example, <code>employerInfo.getGender().equals(&quot;Male&quot;)</code></p>\n"}],"owner":{"account_id":16473307,"reputation":11,"user_id":11901878,"display_name":"Arizen Bolt"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":19,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1679406333,"creation_date":1679378321,"question_id":75797731,"body_markdown":"My RecyclerView is currently populating with all data available on my firebase database but I only want it to populate male candidates for instance. How do I go about doing so?\r\n\r\n[![Image of how it is currently displaying](https://i.stack.imgur.com/lQnmi.jpg)](https://i.stack.imgur.com/lQnmi.jpg)\r\n\r\n\r\nThis is what I Have on my ListViewActivity\r\n\r\n```\r\npublic class ListViewActivity extends AppCompatActivity {\r\n    RecyclerView recyclerView;\r\n    DatabaseReference databaseReference;\r\n    MyAdapter myAdapter;\r\n    ArrayList&lt;EmployerInfo&gt; list;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_list_view);\r\n\r\n        recyclerView = findViewById(R.id.recyclerViewList);\r\n        databaseReference = FirebaseDatabase.getInstance().getReference(&quot;EmployerInfo&quot;);\r\n        recyclerView.setHasFixedSize(true);\r\n        recyclerView.setLayoutManager(new LinearLayoutManager(this));\r\n\r\n        list = new ArrayList&lt;&gt;();\r\n        myAdapter = new MyAdapter(this, list);\r\n        recyclerView.setAdapter(myAdapter);\r\n\r\n        databaseReference.addValueEventListener(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                for (DataSnapshot dataSnapshot: snapshot.getChildren()){\r\n                    EmployerInfo employerInfo = dataSnapshot.getValue(EmployerInfo.class);\r\n                    list.add(employerInfo);\r\n                }\r\n                myAdapter.notifyDataSetChanged();\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\n```\r\n\r\nThis is myAdapeter class\r\n\r\n\r\n```\r\npublic class MyAdapter extends RecyclerView.Adapter&lt;MyAdapter.MyViewHolder&gt; {\r\n\r\n    Context context;\r\n    ArrayList&lt;EmployerInfo&gt; list;\r\n\r\n    public MyAdapter(Context context, ArrayList&lt;EmployerInfo&gt; list) {\r\n        this.context = context;\r\n        this.list = list;\r\n    }\r\n\r\n    @NonNull\r\n    @Override\r\n    public MyViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\r\n       View v = LayoutInflater.from(context).inflate(R.layout.item, parent, false);\r\n       return  new MyViewHolder(v);\r\n    }\r\n\r\n    @Override\r\n    public void onBindViewHolder(@NonNull MyViewHolder holder, int position) {\r\n        EmployerInfo employerInfo = list.get(position);\r\n        holder.firstName.setText(employerInfo.getName());\r\n        holder.lastName.setText(employerInfo.getSurname());\r\n        holder.gender.setText(employerInfo.getGender());\r\n    }\r\n\r\n    @Override\r\n    public int getItemCount() {\r\n        return list.size();\r\n    }\r\n\r\n    public  static  class  MyViewHolder extends  RecyclerView.ViewHolder{\r\n\r\n        TextView firstName, lastName, gender;\r\n\r\n        public MyViewHolder(@NonNull View itemView) {\r\n            super(itemView);\r\n\r\n            firstName =itemView.findViewById(R.id.textViewFirstName);\r\n            lastName = itemView.findViewById(R.id.textViewLastName);\r\n            gender = itemView.findViewById(R.id.textViewGender);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n\r\n\r\n\r\nI tried using if statement on the listViewActivity but it is return a blank page. I want it to only display data of male candidates\r\n\r\n\r\n \r\n```\r\n@Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_list_view);\r\n\r\n        recyclerView = findViewById(R.id.recyclerViewList);\r\n        databaseReference = FirebaseDatabase.getInstance().getReference(&quot;EmployeeProfile&quot;);\r\n        recyclerView.setHasFixedSize(true);\r\n        recyclerView.setLayoutManager(new LinearLayoutManager(this));\r\n\r\n        list = new ArrayList&lt;&gt;();\r\n        myAdapter = new MyAdapter(this, list);\r\n        recyclerView.setAdapter(myAdapter);\r\n\r\n        databaseReference.addValueEventListener(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                for (DataSnapshot dataSnapshot: snapshot.getChildren()){\r\n                    EmployerInfo employerInfo = dataSnapshot.getValue(EmployerInfo.class);\r\n\r\n                    if(employerInfo.getGender() == &quot;Male&quot;){\r\n                        list.add(employerInfo);\r\n                    }\r\n                }\r\n                myAdapter.notifyDataSetChanged();\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n            }\r\n        });\r\n    }\r\n```","title":"How to populate RecyclerView using Java with data that meets condition? For Instance on populate with male candidates","body":"<p>My RecyclerView is currently populating with all data available on my firebase database but I only want it to populate male candidates for instance. How do I go about doing so?</p>\n<p><a href=\"https://i.stack.imgur.com/lQnmi.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/lQnmi.jpg\" alt=\"Image of how it is currently displaying\" /></a></p>\n<p>This is what I Have on my ListViewActivity</p>\n<pre><code>public class ListViewActivity extends AppCompatActivity {\n    RecyclerView recyclerView;\n    DatabaseReference databaseReference;\n    MyAdapter myAdapter;\n    ArrayList&lt;EmployerInfo&gt; list;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_list_view);\n\n        recyclerView = findViewById(R.id.recyclerViewList);\n        databaseReference = FirebaseDatabase.getInstance().getReference(&quot;EmployerInfo&quot;);\n        recyclerView.setHasFixedSize(true);\n        recyclerView.setLayoutManager(new LinearLayoutManager(this));\n\n        list = new ArrayList&lt;&gt;();\n        myAdapter = new MyAdapter(this, list);\n        recyclerView.setAdapter(myAdapter);\n\n        databaseReference.addValueEventListener(new ValueEventListener() {\n            @Override\n            public void onDataChange(@NonNull DataSnapshot snapshot) {\n                for (DataSnapshot dataSnapshot: snapshot.getChildren()){\n                    EmployerInfo employerInfo = dataSnapshot.getValue(EmployerInfo.class);\n                    list.add(employerInfo);\n                }\n                myAdapter.notifyDataSetChanged();\n            }\n\n            @Override\n            public void onCancelled(@NonNull DatabaseError error) {\n\n            }\n        });\n    }\n}\n\n</code></pre>\n<p>This is myAdapeter class</p>\n<pre><code>public class MyAdapter extends RecyclerView.Adapter&lt;MyAdapter.MyViewHolder&gt; {\n\n    Context context;\n    ArrayList&lt;EmployerInfo&gt; list;\n\n    public MyAdapter(Context context, ArrayList&lt;EmployerInfo&gt; list) {\n        this.context = context;\n        this.list = list;\n    }\n\n    @NonNull\n    @Override\n    public MyViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\n       View v = LayoutInflater.from(context).inflate(R.layout.item, parent, false);\n       return  new MyViewHolder(v);\n    }\n\n    @Override\n    public void onBindViewHolder(@NonNull MyViewHolder holder, int position) {\n        EmployerInfo employerInfo = list.get(position);\n        holder.firstName.setText(employerInfo.getName());\n        holder.lastName.setText(employerInfo.getSurname());\n        holder.gender.setText(employerInfo.getGender());\n    }\n\n    @Override\n    public int getItemCount() {\n        return list.size();\n    }\n\n    public  static  class  MyViewHolder extends  RecyclerView.ViewHolder{\n\n        TextView firstName, lastName, gender;\n\n        public MyViewHolder(@NonNull View itemView) {\n            super(itemView);\n\n            firstName =itemView.findViewById(R.id.textViewFirstName);\n            lastName = itemView.findViewById(R.id.textViewLastName);\n            gender = itemView.findViewById(R.id.textViewGender);\n        }\n    }\n}\n</code></pre>\n<p>I tried using if statement on the listViewActivity but it is return a blank page. I want it to only display data of male candidates</p>\n<pre><code>@Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_list_view);\n\n        recyclerView = findViewById(R.id.recyclerViewList);\n        databaseReference = FirebaseDatabase.getInstance().getReference(&quot;EmployeeProfile&quot;);\n        recyclerView.setHasFixedSize(true);\n        recyclerView.setLayoutManager(new LinearLayoutManager(this));\n\n        list = new ArrayList&lt;&gt;();\n        myAdapter = new MyAdapter(this, list);\n        recyclerView.setAdapter(myAdapter);\n\n        databaseReference.addValueEventListener(new ValueEventListener() {\n            @Override\n            public void onDataChange(@NonNull DataSnapshot snapshot) {\n                for (DataSnapshot dataSnapshot: snapshot.getChildren()){\n                    EmployerInfo employerInfo = dataSnapshot.getValue(EmployerInfo.class);\n\n                    if(employerInfo.getGender() == &quot;Male&quot;){\n                        list.add(employerInfo);\n                    }\n                }\n                myAdapter.notifyDataSetChanged();\n            }\n\n            @Override\n            public void onCancelled(@NonNull DatabaseError error) {\n\n            }\n        });\n    }\n</code></pre>\n"},{"tags":["java","soap","soap-client"],"comments":[{"owner":{"account_id":1292662,"reputation":8228,"user_id":1244442,"accept_rate":79,"display_name":"Swapnil"},"score":0,"creation_date":1358693623,"post_id":14425668,"comment_id":20080349,"body_markdown":"What do you mean by &quot;I am not able to iterate the response&quot;. Are you getting any error? Are you seeing any unexpected behaviour? what is it?","body":"What do you mean by &quot;I am not able to iterate the response&quot;. Are you getting any error? Are you seeing any unexpected behaviour? what is it?"},{"owner":{"account_id":2002543,"reputation":1,"user_id":1793215,"display_name":"user1793215"},"score":0,"creation_date":1358694486,"post_id":14425668,"comment_id":20080597,"body_markdown":"I am not getting any error and also no output is printing on the screen.","body":"I am not getting any error and also no output is printing on the screen."}],"answers":[{"tags":[],"owner":{"account_id":1114067,"reputation":196781,"user_id":1103872,"accept_rate":82,"display_name":"Marko Topolnik"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1427443089,"creation_date":1358694011,"answer_id":14425787,"question_id":14425668,"body_markdown":"There is only one `GetUserResponse` element below `Body`. `getChildElements` only gets child elements, as opposed to descendant elements. You must first reach `GetUserResponse` and then iterate over *its* children.","title":"Soap response iteration in java","body":"<p>There is only one <code>GetUserResponse</code> element below <code>Body</code>. <code>getChildElements</code> only gets child elements, as opposed to descendant elements. You must first reach <code>GetUserResponse</code> and then iterate over <em>its</em> children.</p>\n"}],"owner":{"account_id":2002543,"reputation":1,"user_id":1793215,"display_name":"user1793215"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2689,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1679406310,"creation_date":1358693329,"question_id":14425668,"body_markdown":"\r\nI am using java soap request and response in my code. I am getting the request and response properly. \r\nBut I am not able to iterate the response\r\nPlease see my response and code used to iterate below.  Please help me to resolve this issue.      \r\n\r\n\r\nResponse\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-16&quot;?&gt;\r\n    &lt;soap:Envelope xmlns:soap=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot;     xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:xsd=&quot;http://www.w3.org/2001/XMLSchema&quot;&gt;\r\n      &lt;soap:Body&gt;\r\n        &lt;GetUserResponse xmlns=&quot;http://XXXX.com/XXXXXXXX.XXXXXXX.WS&quot;&gt;\r\n          &lt;GetUserResult&gt;\r\n            user\r\n              &lt;PersonID&gt;111113&lt;/PersonID&gt;\r\n              &lt;Username&gt;0987654321&lt;/Username&gt;\r\n              &lt;Password /&gt;         \r\n              &lt;FwyMember&gt;Y&lt;/FwyMember&gt;\r\n              &lt;WebMember&gt;Y&lt;/WebMember&gt;\r\n              &lt;FirstName&gt;Mohamed&lt;/FirstName&gt;\r\n              &lt;Tier&gt;firstclass&lt;/Tier&gt;\r\n              &lt;CountryOfResidence&gt;IN&lt;/CountryOfResidence&gt;\r\n              &lt;PreferencesChanged&gt;false&lt;/PreferencesChanged&gt;       \r\n              &lt;FamilyRelationship /&gt;\r\n              &lt;Title&gt;Mr&lt;/Title&gt;\r\n              &lt;MiddleName /&gt;\r\n              ........ continue like this\r\n \r\n\r\nJava code\r\n\r\n    SOAPBody responseBody = response.getSOAPBody();\r\n    QName bodyName1 = new QName(&quot;http://XXXX.com/XXXXXXXX.XXXXXXX.WS&quot;,&quot;GetUserResponse&quot;);\r\n    java.util.Iterator iterator = responseBody.getChildElements(bodyName1);\r\n    while (iterator.hasNext()) {\r\n      SOAPBodyElement responseElement = (SOAPBodyElement)iterator.next();\r\n      String val = responseElement.getValue();\r\n      System.out.println(&quot;The values are &quot;+val);\r\n    }","title":"Soap response iteration in java","body":"<p>I am using java soap request and response in my code. I am getting the request and response properly. \nBut I am not able to iterate the response\nPlease see my response and code used to iterate below.  Please help me to resolve this issue.      </p>\n\n<p>Response</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-16\"?&gt;\n&lt;soap:Envelope xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\"     xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\"&gt;\n  &lt;soap:Body&gt;\n    &lt;GetUserResponse xmlns=\"http://XXXX.com/XXXXXXXX.XXXXXXX.WS\"&gt;\n      &lt;GetUserResult&gt;\n        user\n          &lt;PersonID&gt;111113&lt;/PersonID&gt;\n          &lt;Username&gt;0987654321&lt;/Username&gt;\n          &lt;Password /&gt;         \n          &lt;FwyMember&gt;Y&lt;/FwyMember&gt;\n          &lt;WebMember&gt;Y&lt;/WebMember&gt;\n          &lt;FirstName&gt;Mohamed&lt;/FirstName&gt;\n          &lt;Tier&gt;firstclass&lt;/Tier&gt;\n          &lt;CountryOfResidence&gt;IN&lt;/CountryOfResidence&gt;\n          &lt;PreferencesChanged&gt;false&lt;/PreferencesChanged&gt;       \n          &lt;FamilyRelationship /&gt;\n          &lt;Title&gt;Mr&lt;/Title&gt;\n          &lt;MiddleName /&gt;\n          ........ continue like this\n</code></pre>\n\n<p>Java code</p>\n\n<pre><code>SOAPBody responseBody = response.getSOAPBody();\nQName bodyName1 = new QName(\"http://XXXX.com/XXXXXXXX.XXXXXXX.WS\",\"GetUserResponse\");\njava.util.Iterator iterator = responseBody.getChildElements(bodyName1);\nwhile (iterator.hasNext()) {\n  SOAPBodyElement responseElement = (SOAPBodyElement)iterator.next();\n  String val = responseElement.getValue();\n  System.out.println(\"The values are \"+val);\n}\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1679346361,"post_id":75795233,"comment_id":133702606,"body_markdown":"You can&#39;t call `compareTo` on a primitive. Look at the javadoc for `compareTo` and implement it yourself.","body":"You can&#39;t call <code>compareTo</code> on a primitive. Look at the javadoc for <code>compareTo</code> and implement it yourself."},{"owner":{"account_id":20300298,"reputation":11,"user_id":18294031,"display_name":"Максим"},"score":0,"creation_date":1679347507,"post_id":75795233,"comment_id":133702815,"body_markdown":"Helps pls God will bless you","body":"Helps pls God will bless you"},{"owner":{"account_id":100740,"reputation":73217,"user_id":271415,"accept_rate":91,"display_name":"jarmod"},"score":0,"creation_date":1679348879,"post_id":75795233,"comment_id":133703070,"body_markdown":"Related: https://stackoverflow.com/questions/2784514/sort-arraylist-of-custom-objects-by-property","body":"Related: <a href=\"https://stackoverflow.com/questions/2784514/sort-arraylist-of-custom-objects-by-property\" title=\"sort arraylist of custom objects by property\">stackoverflow.com/questions/2784514/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1679405855,"creation_date":1679364382,"answer_id":75796778,"question_id":75795233,"body_markdown":"You should do the following:\r\n- `Comparable` is a generic interface so it should be `implements Comparable&lt;Color&gt;`\r\n- Then change your `compareTo` method to\r\n```\r\npublic int compareTo(Color o) {\r\n    return this.GetIsPrimary().compareTo(o.GetIsPrimary());\r\n}\r\n```\r\n- Change your `getters` and `setters` and `primary field` to use `Boolean` rather than `boolean`.  Then you will be able to use `compareTo` as it is now an object.\r\n\r\nNote:\r\n- methods, by convention, should start with lower case letters.\r\n- if a method returns a `boolean`, it is usually preceded with `is`.  Like `isPrimary()`.\r\n\r\nAlso note that you don&#39;t need to implement the Comparable interface to sort.  Assuming the `colorList` is mutable, you can do it as follows by using a Comparator in the sort method.\r\n```\r\ncolorList.sort(Comparator.comparing(Color::GetIsPrimary));\r\n","title":"Problems with implementing sorting of list of objects","body":"<p>You should do the following:</p>\n<ul>\n<li><code>Comparable</code> is a generic interface so it should be <code>implements Comparable&lt;Color&gt;</code></li>\n<li>Then change your <code>compareTo</code> method to</li>\n</ul>\n<pre><code>public int compareTo(Color o) {\n    return this.GetIsPrimary().compareTo(o.GetIsPrimary());\n}\n</code></pre>\n<ul>\n<li>Change your <code>getters</code> and <code>setters</code> and <code>primary field</code> to use <code>Boolean</code> rather than <code>boolean</code>.  Then you will be able to use <code>compareTo</code> as it is now an object.</li>\n</ul>\n<p>Note:</p>\n<ul>\n<li>methods, by convention, should start with lower case letters.</li>\n<li>if a method returns a <code>boolean</code>, it is usually preceded with <code>is</code>.  Like <code>isPrimary()</code>.</li>\n</ul>\n<p>Also note that you don't need to implement the Comparable interface to sort.  Assuming the <code>colorList</code> is mutable, you can do it as follows by using a Comparator in the sort method.</p>\n<pre><code>colorList.sort(Comparator.comparing(Color::GetIsPrimary));\n</code></pre>\n"}],"owner":{"account_id":20300298,"reputation":11,"user_id":18294031,"display_name":"Максим"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":60,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1679405855,"creation_date":1679345852,"question_id":75795233,"body_markdown":"I have list of objects that looks like this \r\n\r\n    List&lt;Color&gt; colorList = generateColorList(10);\r\n\r\n    System.out.println(colorList);\r\n\r\n    System.out.println(colorList.stream().sorted().collect(Collectors.toList())); //Sorting\r\n\r\n    // [Color{colors=[#91E7CE, #FCEF32, #859BDF], isPrimary=true, rgb={r=126, b=155, g=112}}, \r\n    // Color{colors=[#E53DE3, #589003, #12AC95], isPrimary=false, rgb={r=111, b=140, g=232}}, \r\n    // Color{colors=[#90381C, #83E0A5, #D88C51], isPrimary=false, rgb={r=234, b=154, g=3}}, \r\n    // Color{colors=[#D40BF0, #8625B4, #CA1F2A], isPrimary=false, rgb={r=198, b=231, g=18}}, \r\n    // Color{colors=[#FB1203, #970BFA, #7FEA33], isPrimary=false, rgb={r=238, b=7, g=56}}, \r\n    // Color{colors=[#68FB95, #34DBE8, #8953EF], isPrimary=true, rgb={r=121, b=171, g=167}}, \r\n    // Color{colors=[#9D85F3, #1455AE, #374475], isPrimary=false, rgb={r=225, b=177, g=70}}, \r\n    // Color{colors=[#43466A, #F3CD61, #3962FB], isPrimary=false, rgb={r=12, b=163, g=194}}, \r\n    // Color{colors=[#311731, #8BF4FD, #40EF0C], isPrimary=true, rgb={r=89, b=80, g=153}}, \r\n    // Color{colors=[#9015A9, #603793, #62F78B], isPrimary=true, rgb={r=111, b=253, g=88}}]\r\nIt has three datatypes that are listed in my class below\r\n\r\nI want to sort them by isPrimary field\r\n\r\nColor.class\r\n\r\n    public class Color implements Serializable, Comparable {\r\n        private List&lt;String&gt; colors;\r\n        @JsonProperty(&quot;isPrimary&quot;)\r\n        private boolean primary;\r\n        private HashMap&lt;String,Integer&gt; rgb = new HashMap&lt;String,Integer&gt;();\r\n        public Color(){};\r\n\r\n    public List&lt;String&gt; getColors() {\r\n        return colors;\r\n    }\r\n\r\n    public void setColors(List&lt;String&gt; colors) {\r\n        this.colors = colors;\r\n    }\r\n\r\n    public boolean GetIsPrimary() {\r\n        return primary;\r\n    }\r\n\r\n    public void setIsPrimary(boolean primary) {\r\n        this.primary = primary;\r\n    }\r\n\r\n    public HashMap&lt;String, Integer&gt; getRgb() {\r\n        return rgb;\r\n    }\r\n\r\n    public void setRgb(HashMap&lt;String, Integer&gt; rgb) {\r\n        this.rgb = rgb;\r\n    }\r\n\r\n    @Override\r\n    public String toString() {\r\n        return &quot;Color{&quot; +\r\n                &quot;colors=&quot; + colors +\r\n                &quot;, isPrimary=&quot; + primary +\r\n                &quot;, rgb=&quot; + rgb +\r\n                &#39;}&#39;;\r\n    }\r\n\r\n    @Override\r\n    public int compareTo(Object o) {\r\n        Color o1 = (Color)this;\r\n        Color o2 = (Color)o;\r\n        return o1.GetIsPrimary().compareTo(o2.GetIsPrimary());\r\n    }\r\n}\r\n\r\nI was trying to repeat after my tutor but he had String and i have boolean and it tells me that method compareTo is not resolved(the last method in Color class)\r\nHow can i make it working?","title":"Problems with implementing sorting of list of objects","body":"<p>I have list of objects that looks like this</p>\n<pre><code>List&lt;Color&gt; colorList = generateColorList(10);\n\nSystem.out.println(colorList);\n\nSystem.out.println(colorList.stream().sorted().collect(Collectors.toList())); //Sorting\n\n// [Color{colors=[#91E7CE, #FCEF32, #859BDF], isPrimary=true, rgb={r=126, b=155, g=112}}, \n// Color{colors=[#E53DE3, #589003, #12AC95], isPrimary=false, rgb={r=111, b=140, g=232}}, \n// Color{colors=[#90381C, #83E0A5, #D88C51], isPrimary=false, rgb={r=234, b=154, g=3}}, \n// Color{colors=[#D40BF0, #8625B4, #CA1F2A], isPrimary=false, rgb={r=198, b=231, g=18}}, \n// Color{colors=[#FB1203, #970BFA, #7FEA33], isPrimary=false, rgb={r=238, b=7, g=56}}, \n// Color{colors=[#68FB95, #34DBE8, #8953EF], isPrimary=true, rgb={r=121, b=171, g=167}}, \n// Color{colors=[#9D85F3, #1455AE, #374475], isPrimary=false, rgb={r=225, b=177, g=70}}, \n// Color{colors=[#43466A, #F3CD61, #3962FB], isPrimary=false, rgb={r=12, b=163, g=194}}, \n// Color{colors=[#311731, #8BF4FD, #40EF0C], isPrimary=true, rgb={r=89, b=80, g=153}}, \n// Color{colors=[#9015A9, #603793, #62F78B], isPrimary=true, rgb={r=111, b=253, g=88}}]\n</code></pre>\n<p>It has three datatypes that are listed in my class below</p>\n<p>I want to sort them by isPrimary field</p>\n<p>Color.class</p>\n<pre><code>public class Color implements Serializable, Comparable {\n    private List&lt;String&gt; colors;\n    @JsonProperty(&quot;isPrimary&quot;)\n    private boolean primary;\n    private HashMap&lt;String,Integer&gt; rgb = new HashMap&lt;String,Integer&gt;();\n    public Color(){};\n\npublic List&lt;String&gt; getColors() {\n    return colors;\n}\n\npublic void setColors(List&lt;String&gt; colors) {\n    this.colors = colors;\n}\n\npublic boolean GetIsPrimary() {\n    return primary;\n}\n\npublic void setIsPrimary(boolean primary) {\n    this.primary = primary;\n}\n\npublic HashMap&lt;String, Integer&gt; getRgb() {\n    return rgb;\n}\n\npublic void setRgb(HashMap&lt;String, Integer&gt; rgb) {\n    this.rgb = rgb;\n}\n\n@Override\npublic String toString() {\n    return &quot;Color{&quot; +\n            &quot;colors=&quot; + colors +\n            &quot;, isPrimary=&quot; + primary +\n            &quot;, rgb=&quot; + rgb +\n            '}';\n}\n\n@Override\npublic int compareTo(Object o) {\n    Color o1 = (Color)this;\n    Color o2 = (Color)o;\n    return o1.GetIsPrimary().compareTo(o2.GetIsPrimary());\n}\n</code></pre>\n<p>}</p>\n<p>I was trying to repeat after my tutor but he had String and i have boolean and it tells me that method compareTo is not resolved(the last method in Color class)\nHow can i make it working?</p>\n"},{"tags":["java","spring-boot","soap"],"owner":{"account_id":12810677,"reputation":569,"user_id":9269017,"display_name":"kk luo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":95,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679405805,"creation_date":1679405805,"question_id":75801943,"body_markdown":"I&#39;m trying to create a soap client in a spring boot project. I googled a lot and find some tutorials like below https://www.baeldung.com/spring-soap-web-service but stuck in the first step.\r\nIn the tutorial there is a URL for generate schema like  http://localhost:8080/ws/countries.wsdl.But what I have is a remote URL like http://xxx.xxx.xxx.xxx:8080/ws/wsservice?wsdl is this the same thing or I have to get a wsdl file from the wsdl URL?How to do that? Any help? Thx.","title":"How to create SOAP client in spring boot from a URL like http://xxx?wsdl","body":"<p>I'm trying to create a soap client in a spring boot project. I googled a lot and find some tutorials like below <a href=\"https://www.baeldung.com/spring-soap-web-service\" rel=\"nofollow noreferrer\">https://www.baeldung.com/spring-soap-web-service</a> but stuck in the first step.\nIn the tutorial there is a URL for generate schema like  http://localhost:8080/ws/countries.wsdl.But what I have is a remote URL like <a href=\"http://xxx.xxx.xxx.xxx:8080/ws/wsservice?wsdl\" rel=\"nofollow noreferrer\">http://xxx.xxx.xxx.xxx:8080/ws/wsservice?wsdl</a> is this the same thing or I have to get a wsdl file from the wsdl URL?How to do that? Any help? Thx.</p>\n"},{"tags":["java","ignite","apacheignite"],"answers":[{"tags":[],"owner":{"account_id":15624718,"reputation":2360,"user_id":11272685,"display_name":"Alexandr Shapkin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679405790,"creation_date":1679405790,"answer_id":75801939,"question_id":75801775,"body_markdown":"There is no filtering on Ignite side. The nodes are just listening for the traffic on specific ports.\r\n\r\nIn general, the task is more about your system administration and networking configuration. I.e. how to limit access for a particular set of hosts only, how to configure a firewall, etc.\r\n\r\nFrom Ignite&#39;s perspective, there is one thing though - do not use [TcpDiscoveryMulticastIpFinder][1] which is the default one. Instead, specify your nodes&#39; list explicitely using [a static IP finder][2].\r\n\r\nTo not mix the clusters, you can also configure non-standard communication [`47100`] and discovery [`47500`] ports and set them to, say, `42100` and `42500` respectively. More details i[n the documentation][3].\r\n\r\n\r\n  [1]: https://ignite.apache.org/docs/latest/clustering/tcp-ip-discovery#multicast-ip-finder\r\n  [2]: https://ignite.apache.org/docs/latest/clustering/tcp-ip-discovery#static-ip-finder\r\n  [3]: https://ignite.apache.org/docs/latest/clustering/network-configuration#discovery","title":"Apache Ignite unknown node trying to connect","body":"<p>There is no filtering on Ignite side. The nodes are just listening for the traffic on specific ports.</p>\n<p>In general, the task is more about your system administration and networking configuration. I.e. how to limit access for a particular set of hosts only, how to configure a firewall, etc.</p>\n<p>From Ignite's perspective, there is one thing though - do not use <a href=\"https://ignite.apache.org/docs/latest/clustering/tcp-ip-discovery#multicast-ip-finder\" rel=\"nofollow noreferrer\">TcpDiscoveryMulticastIpFinder</a> which is the default one. Instead, specify your nodes' list explicitely using <a href=\"https://ignite.apache.org/docs/latest/clustering/tcp-ip-discovery#static-ip-finder\" rel=\"nofollow noreferrer\">a static IP finder</a>.</p>\n<p>To not mix the clusters, you can also configure non-standard communication [<code>47100</code>] and discovery [<code>47500</code>] ports and set them to, say, <code>42100</code> and <code>42500</code> respectively. More details i<a href=\"https://ignite.apache.org/docs/latest/clustering/network-configuration#discovery\" rel=\"nofollow noreferrer\">n the documentation</a>.</p>\n"}],"owner":{"account_id":2365339,"reputation":159,"user_id":2071118,"accept_rate":43,"display_name":"Harshad"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1679405790,"creation_date":1679404820,"question_id":75801775,"body_markdown":"Unwanted node trying to connect Apache Ignite cluster. Due to which node goes down &amp; cluster become unstable.\r\nHow to restrict unknown node trying to connect Ignite cluster.  ","title":"Apache Ignite unknown node trying to connect","body":"<p>Unwanted node trying to connect Apache Ignite cluster. Due to which node goes down &amp; cluster become unstable.\nHow to restrict unknown node trying to connect Ignite cluster.</p>\n"},{"tags":["java","database","hibernate","jpa","persistence"],"comments":[{"owner":{"account_id":12205661,"reputation":332,"user_id":8908834,"display_name":"Mauricio Buffon"},"score":0,"creation_date":1679400130,"post_id":75792522,"comment_id":133711458,"body_markdown":"Could you please show the code where you are trying to initialize the `EntityManager`? It helps if you could give more details about your deployment.","body":"Could you please show the code where you are trying to initialize the <code>EntityManager</code>? It helps if you could give more details about your deployment."},{"owner":{"account_id":16237389,"reputation":5,"user_id":11724567,"display_name":"VADE"},"score":1,"creation_date":1679405760,"post_id":75792522,"comment_id":133713200,"body_markdown":"Hey! @MauricioBuffon, Thanks for your reply! i&#39;ve updated the OP to contain the instantiating function/method.","body":"Hey! @MauricioBuffon, Thanks for your reply! i&#39;ve updated the OP to contain the instantiating function/method."}],"owner":{"account_id":16237389,"reputation":5,"user_id":11724567,"display_name":"VADE"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":209,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679405704,"creation_date":1679327658,"question_id":75792522,"body_markdown":"I have tried every solution i could possible find, and nothing seemed to have worked.\r\nit seems like my EntityManager is unable to find my Persistence provider.\r\n\r\nhoping for some advice, and posisbly a solution.\r\n\r\nThanks!\r\n\r\n**Error:**\r\n```\r\njakarta.persistence.PersistenceException: No Persistence provider for EntityManager named default\r\n\tat jakarta.persistence.Persistence.createEntityManagerFactory(Persistence.java:86)\r\n\tat jakarta.persistence.Persistence.createEntityManagerFactory(Persistence.java:55)\r\n```\r\n**pom.xml**\r\n```\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.hibernate.orm&lt;/groupId&gt;\r\n            &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\r\n            &lt;version&gt;6.1.7.Final&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.glassfish.jaxb&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jaxb-runtime&lt;/artifactId&gt;\r\n            &lt;version&gt;4.0.2&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;jakarta.persistence&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jakarta.persistence-api&lt;/artifactId&gt;\r\n            &lt;version&gt;3.0.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;jakarta.xml.bind&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jakarta.xml.bind-api&lt;/artifactId&gt;\r\n            &lt;version&gt;4.0.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n```\r\n\r\n**persistence.xml**\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;\r\n&lt;persistence xmlns=&quot;https://jakarta.ee/xml/ns/persistence&quot;\r\n             xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n             xsi:schemaLocation=&quot;https://jakarta.ee/xml/ns/persistence https://jakarta.ee/xml/ns/persistence/persistence_3_0.xsd&quot;\r\n             version=&quot;3.0&quot;&gt;\r\n    &lt;persistence-unit name=&quot;default&quot;&gt;     \r\n&lt;provider&gt;org.hibernate.jpa.HibernatePersistenceProvider&lt;/provider&gt;\r\n        &lt;class&gt;...&lt;/class&gt;\r\n        &lt;properties&gt;\r\n            &lt;property name=&quot;hibernate.hbm2ddl.auto&quot; value=&quot;update&quot;/&gt;\r\n            &lt;property name=&quot;hibernate.connection.driver_class&quot; value=&quot;org.postgresql.Driver&quot;/&gt;\r\n            &lt;property name=&quot;hibernate.connection.url&quot; value=&quot;jdbc:postgresql://localhost:5432/mydb&quot;/&gt;\r\n            &lt;property name=&quot;hibernate.connection.username&quot; value=&quot;*******&quot;/&gt;\r\n            &lt;property name=&quot;hibernate.connection.password&quot; value=&quot;*******&quot;/&gt;\r\n            &lt;property name=&quot;hibernate.dialect&quot; value=&quot;org.hibernate.dialect.PostgreSQLDialect&quot;/&gt;\r\n            &lt;property name=&quot;hibernate.show_sql&quot; value=&quot;true&quot;/&gt;\r\n            &lt;property name=&quot;hibernate.archive.autodetection&quot; value=&quot;&quot;/&gt;\r\n            &lt;property name=&quot;hibernate.exclude_unlisted_classes&quot; value=&quot;true&quot;/&gt;\r\n        &lt;/properties&gt;\r\n    &lt;/persistence-unit&gt;\r\n&lt;/persistence&gt;\r\n```\r\n\r\n**persistence.xml Location:**\r\n`/src/main/resources/META-INF/persistence.xml`\r\n\r\n**Instantiation of EntityManager** (uses Jakarta.persistence)\r\n```\r\n public static void hibernateSaving(Player player) {\r\n        EntityManagerFactory entityManagerFactory = Persistence.createEntityManagerFactory(&quot;default&quot;);\r\n        EntityManager entityManager = entityManagerFactory.createEntityManager();\r\n        EntityTransaction transaction = entityManager.getTransaction();\r\n        transaction.begin();\r\n\r\n        saveContainers(player);\r\n\r\n        if(entityManager.find(Player.class, player.getId()) != null) {\r\n            System.out.println(&quot;Database contains player, updating...&quot;);\r\n            entityManager.merge(player);\r\n        } else {\r\n            entityManager.persist(player);\r\n        }\r\n\r\n        transaction.commit();\r\n        entityManager.close();\r\n}\r\n```","title":"jakarta.persistence.PersistenceException: No Persistence provider for EntityManager named default","body":"<p>I have tried every solution i could possible find, and nothing seemed to have worked.\nit seems like my EntityManager is unable to find my Persistence provider.</p>\n<p>hoping for some advice, and posisbly a solution.</p>\n<p>Thanks!</p>\n<p><strong>Error:</strong></p>\n<pre><code>jakarta.persistence.PersistenceException: No Persistence provider for EntityManager named default\n    at jakarta.persistence.Persistence.createEntityManagerFactory(Persistence.java:86)\n    at jakarta.persistence.Persistence.createEntityManagerFactory(Persistence.java:55)\n</code></pre>\n<p><strong>pom.xml</strong></p>\n<pre><code>        &lt;dependency&gt;\n            &lt;groupId&gt;org.hibernate.orm&lt;/groupId&gt;\n            &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\n            &lt;version&gt;6.1.7.Final&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.glassfish.jaxb&lt;/groupId&gt;\n            &lt;artifactId&gt;jaxb-runtime&lt;/artifactId&gt;\n            &lt;version&gt;4.0.2&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;jakarta.persistence&lt;/groupId&gt;\n            &lt;artifactId&gt;jakarta.persistence-api&lt;/artifactId&gt;\n            &lt;version&gt;3.0.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;jakarta.xml.bind&lt;/groupId&gt;\n            &lt;artifactId&gt;jakarta.xml.bind-api&lt;/artifactId&gt;\n            &lt;version&gt;4.0.0&lt;/version&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<p><strong>persistence.xml</strong></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;\n&lt;persistence xmlns=&quot;https://jakarta.ee/xml/ns/persistence&quot;\n             xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n             xsi:schemaLocation=&quot;https://jakarta.ee/xml/ns/persistence https://jakarta.ee/xml/ns/persistence/persistence_3_0.xsd&quot;\n             version=&quot;3.0&quot;&gt;\n    &lt;persistence-unit name=&quot;default&quot;&gt;     \n&lt;provider&gt;org.hibernate.jpa.HibernatePersistenceProvider&lt;/provider&gt;\n        &lt;class&gt;...&lt;/class&gt;\n        &lt;properties&gt;\n            &lt;property name=&quot;hibernate.hbm2ddl.auto&quot; value=&quot;update&quot;/&gt;\n            &lt;property name=&quot;hibernate.connection.driver_class&quot; value=&quot;org.postgresql.Driver&quot;/&gt;\n            &lt;property name=&quot;hibernate.connection.url&quot; value=&quot;jdbc:postgresql://localhost:5432/mydb&quot;/&gt;\n            &lt;property name=&quot;hibernate.connection.username&quot; value=&quot;*******&quot;/&gt;\n            &lt;property name=&quot;hibernate.connection.password&quot; value=&quot;*******&quot;/&gt;\n            &lt;property name=&quot;hibernate.dialect&quot; value=&quot;org.hibernate.dialect.PostgreSQLDialect&quot;/&gt;\n            &lt;property name=&quot;hibernate.show_sql&quot; value=&quot;true&quot;/&gt;\n            &lt;property name=&quot;hibernate.archive.autodetection&quot; value=&quot;&quot;/&gt;\n            &lt;property name=&quot;hibernate.exclude_unlisted_classes&quot; value=&quot;true&quot;/&gt;\n        &lt;/properties&gt;\n    &lt;/persistence-unit&gt;\n&lt;/persistence&gt;\n</code></pre>\n<p><strong>persistence.xml Location:</strong>\n<code>/src/main/resources/META-INF/persistence.xml</code></p>\n<p><strong>Instantiation of EntityManager</strong> (uses Jakarta.persistence)</p>\n<pre><code> public static void hibernateSaving(Player player) {\n        EntityManagerFactory entityManagerFactory = Persistence.createEntityManagerFactory(&quot;default&quot;);\n        EntityManager entityManager = entityManagerFactory.createEntityManager();\n        EntityTransaction transaction = entityManager.getTransaction();\n        transaction.begin();\n\n        saveContainers(player);\n\n        if(entityManager.find(Player.class, player.getId()) != null) {\n            System.out.println(&quot;Database contains player, updating...&quot;);\n            entityManager.merge(player);\n        } else {\n            entityManager.persist(player);\n        }\n\n        transaction.commit();\n        entityManager.close();\n}\n</code></pre>\n"},{"tags":["java","swagger-codegen"],"answers":[{"tags":[],"owner":{"account_id":19513985,"reputation":13,"user_id":14277326,"display_name":"Sangmin Lee"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1679405617,"creation_date":1679405617,"answer_id":75801908,"question_id":71061360,"body_markdown":"It is recommended to create ApiClient for every request. The performance impact of it isn&#39;t as significant if you are reusing client implementation used under the hood (ex. webclient instance)\r\n\r\nexamples in GitHub repo mentions this recommendation\r\n\r\n&gt; It&#39;s recommended to create an instance of ApiClient per thread in a multithreaded environment to avoid any potential issue.\r\n\r\nhttps://github.com/swagger-api/swagger-codegen/tree/master/samples/client/petstore/java/retrofit2rx","title":"Swagger Codegen CLI Java Client one access token per instance, not thread safe","body":"<p>It is recommended to create ApiClient for every request. The performance impact of it isn't as significant if you are reusing client implementation used under the hood (ex. webclient instance)</p>\n<p>examples in GitHub repo mentions this recommendation</p>\n<blockquote>\n<p>It's recommended to create an instance of ApiClient per thread in a multithreaded environment to avoid any potential issue.</p>\n</blockquote>\n<p><a href=\"https://github.com/swagger-api/swagger-codegen/tree/master/samples/client/petstore/java/retrofit2rx\" rel=\"nofollow noreferrer\">https://github.com/swagger-api/swagger-codegen/tree/master/samples/client/petstore/java/retrofit2rx</a></p>\n"}],"owner":{"account_id":3923073,"reputation":2489,"user_id":3244618,"accept_rate":12,"display_name":"FrancMo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":486,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1679405617,"creation_date":1644478933,"question_id":71061360,"body_markdown":"I have openapi 3.0 specification.\r\nGenerated code by:\r\n\r\n    java -jar /usr/bin/swagger-codegen-cli-v3.jar generate -l java -i openapi_shop.yaml -o apishop -DhideGenerationTimestamp=true -c config_shop.json\r\n\r\nIf in 1 service now I want to call that api I need to do:\r\n\r\n    String accessToken = getUserAccessToken();\r\n    api.getApiClient().setAccessToken(accessToken);\r\n    Products response = api.productsGet();\r\n\r\nbut as you see what if 50 users concurrently will start to ping that api ? it will end up mixing access tokens there.\r\nWhat is the correct way to use that auto generated client ?\r\nWhat I see there are 2 options:\r\n\r\n1. modify existing auto generated code and take token as a param in every method, and simply put it in headers at the end, like json body\r\n\r\n2. create new instance every time, for every user&#39;s request ( which does not sounds good )\r\n\r\nMaybe I miss something ? thanks!\r\n\r\n","title":"Swagger Codegen CLI Java Client one access token per instance, not thread safe","body":"<p>I have openapi 3.0 specification.\nGenerated code by:</p>\n<pre><code>java -jar /usr/bin/swagger-codegen-cli-v3.jar generate -l java -i openapi_shop.yaml -o apishop -DhideGenerationTimestamp=true -c config_shop.json\n</code></pre>\n<p>If in 1 service now I want to call that api I need to do:</p>\n<pre><code>String accessToken = getUserAccessToken();\napi.getApiClient().setAccessToken(accessToken);\nProducts response = api.productsGet();\n</code></pre>\n<p>but as you see what if 50 users concurrently will start to ping that api ? it will end up mixing access tokens there.\nWhat is the correct way to use that auto generated client ?\nWhat I see there are 2 options:</p>\n<ol>\n<li><p>modify existing auto generated code and take token as a param in every method, and simply put it in headers at the end, like json body</p>\n</li>\n<li><p>create new instance every time, for every user's request ( which does not sounds good )</p>\n</li>\n</ol>\n<p>Maybe I miss something ? thanks!</p>\n"},{"tags":["java","exception","iterator"],"comments":[{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1678975063,"post_id":75746268,"comment_id":133639781,"body_markdown":"Don’t post screenshots. Include source code and exception as text. Besides that, modifying a collection invalidates existing iterators (except the one you used for the modification). But why are you creating the second iterator before the first loop? Create it when you need it and not earlier. Or use an idiomatic `for` loop: `for(Iterator&lt;Entry&lt;Integer, List&lt;String&gt;&gt;&gt; iterator = detailEntrySet.iterator(); iterator.hasNext(); ) { … }` Then, you don’t even need another variable name for the second loop.","body":"Don’t post screenshots. Include source code and exception as text. Besides that, modifying a collection invalidates existing iterators (except the one you used for the modification). But why are you creating the second iterator before the first loop? Create it when you need it and not earlier. Or use an idiomatic <code>for</code> loop: <code>for(Iterator&lt;Entry&lt;Integer, List&lt;String&gt;&gt;&gt; iterator = detailEntrySet.iterator(); iterator.hasNext(); ) { … }</code> Then, you don’t even need another variable name for the second loop."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1678975296,"post_id":75746268,"comment_id":133639868,"body_markdown":"Besides that, you surely meant `a.equals(&quot;Are&quot;)` instead of `a.contains(&quot;Are&quot;)` and likewise for the `&quot;patra&quot;` string, as there are no substring matches. Then, you can simply use `lMap.values().removeIf(list -&gt; list.contains(&quot;Are&quot;));` and `lMap.values().removeIf(list -&gt; list.contains(&quot;patra&quot;));`, without dealing with iterators. But what’s the point of doing exactly the same thing four times?","body":"Besides that, you surely meant <code>a.equals(&quot;Are&quot;)</code> instead of <code>a.contains(&quot;Are&quot;)</code> and likewise for the <code>&quot;patra&quot;</code> string, as there are no substring matches. Then, you can simply use <code>lMap.values().removeIf(list -&gt; list.contains(&quot;Are&quot;));</code> and <code>lMap.values().removeIf(list -&gt; list.contains(&quot;patra&quot;));</code>, without dealing with iterators. But what’s the point of doing exactly the same thing four times?"}],"owner":{"account_id":27333462,"reputation":1,"user_id":20845260,"display_name":"Patra Adhar"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679405337,"creation_date":1678891259,"question_id":75746268,"body_markdown":"I have one `Map&lt;Integer, List&lt;string&gt;&gt;`, I have to remove the key according to my requirement.\r\n\r\nSo I am using two iterator but a `ConcurrentModificationException` exception is thrown:\r\n\r\n```java\r\npublic static void main(String[] args) {\r\n\tfor (int i = 0; i &lt;= 3; i++) {\r\n\t\tMap&lt;Integer, List&lt;String&gt;&gt; lMap = new TreeMap&lt;Integer, List&lt;String&gt;&gt;();\r\n\t\tlMap.put(95, Arrays.asList(&quot;Hello&quot;, &quot;World!&quot;, &quot;How&quot;, &quot;Are&quot;, &quot;You&quot;));\r\n\t\tlMap.put(13, Arrays.asList(&quot;Adhar&quot;, &quot;kumar&quot;, &quot;patra&quot;));\r\n\t\tlMap.put(76, Arrays.asList(&quot;sivam&quot;, &quot;Panday&quot;));\r\n\t\tSet&lt;Entry&lt;Integer, List&lt;String&gt;&gt;&gt; detailEntrySet = lMap.entrySet();\r\n\t\t// Set&lt;Entry&lt;Integer, List&lt;String&gt;&gt;&gt; detailEntrySet1 = lMap.entrySet();\r\n\t\tIterator&lt;Entry&lt;Integer, List&lt;String&gt;&gt;&gt; iterator = detailEntrySet.iterator();\r\n\t\tIterator&lt;Entry&lt;Integer, List&lt;String&gt;&gt;&gt; iterator1 = detailEntrySet.iterator();\r\n\t\tSystem.out.println(&quot;******************:=&quot; + i);\r\n\t\twhile (iterator.hasNext()) {\r\n\t\t\tList&lt;String&gt; value = iterator.next().getValue();\r\n\t\t\tif(value.stream().anyMatch(a-&gt;a.contains(&quot;Are&quot;))) {\r\n\t\t\t\titerator.remove();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\twhile (iterator1.hasNext()) {\r\n\t\t\tList&lt;String&gt; value = iterator1.next().getValue();\r\n\t\t\tif(value.stream().anyMatch(a-&gt;a.contains(&quot;patra&quot;))) {\r\n\t\t\t\titerator1.remove();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n```\r\n\r\n[![](https://i.stack.imgur.com/jjuip.png)](https://i.stack.imgur.com/jjuip.png)\r\n\r\nWhy I am getting this exception?","title":"Unable to iterate over a single Map using two iterators","body":"<p>I have one <code>Map&lt;Integer, List&lt;string&gt;&gt;</code>, I have to remove the key according to my requirement.</p>\n<p>So I am using two iterator but a <code>ConcurrentModificationException</code> exception is thrown:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static void main(String[] args) {\n    for (int i = 0; i &lt;= 3; i++) {\n        Map&lt;Integer, List&lt;String&gt;&gt; lMap = new TreeMap&lt;Integer, List&lt;String&gt;&gt;();\n        lMap.put(95, Arrays.asList(&quot;Hello&quot;, &quot;World!&quot;, &quot;How&quot;, &quot;Are&quot;, &quot;You&quot;));\n        lMap.put(13, Arrays.asList(&quot;Adhar&quot;, &quot;kumar&quot;, &quot;patra&quot;));\n        lMap.put(76, Arrays.asList(&quot;sivam&quot;, &quot;Panday&quot;));\n        Set&lt;Entry&lt;Integer, List&lt;String&gt;&gt;&gt; detailEntrySet = lMap.entrySet();\n        // Set&lt;Entry&lt;Integer, List&lt;String&gt;&gt;&gt; detailEntrySet1 = lMap.entrySet();\n        Iterator&lt;Entry&lt;Integer, List&lt;String&gt;&gt;&gt; iterator = detailEntrySet.iterator();\n        Iterator&lt;Entry&lt;Integer, List&lt;String&gt;&gt;&gt; iterator1 = detailEntrySet.iterator();\n        System.out.println(&quot;******************:=&quot; + i);\n        while (iterator.hasNext()) {\n            List&lt;String&gt; value = iterator.next().getValue();\n            if(value.stream().anyMatch(a-&gt;a.contains(&quot;Are&quot;))) {\n                iterator.remove();\n            }\n        }\n\n        while (iterator1.hasNext()) {\n            List&lt;String&gt; value = iterator1.next().getValue();\n            if(value.stream().anyMatch(a-&gt;a.contains(&quot;patra&quot;))) {\n                iterator1.remove();\n            }\n        }\n\n    }\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/jjuip.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jjuip.png\" alt=\"\" /></a></p>\n<p>Why I am getting this exception?</p>\n"},{"tags":["java","maven","testing"],"comments":[{"owner":{"account_id":21994,"reputation":73798,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":0,"creation_date":1679408935,"post_id":75801801,"comment_id":133714286,"body_markdown":"Use the same build system as they do.","body":"Use the same build system as they do."},{"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"score":0,"creation_date":1679438043,"post_id":75801801,"comment_id":133722002,"body_markdown":"It&#39;s not common to use classes in one project from another WAR file. Java does not include any way to put a WAR on the class path and uses classes inside its `WEB-INF/classes` directory. A better idea is to package those classes in a JAR file that is used both from the web app project and the test project you&#39;re working on. The JAR could then be deployed to a Maven repository: https://maven.apache.org/guides/mini/guide-3rd-party-jars-remote.html","body":"It&#39;s not common to use classes in one project from another WAR file. Java does not include any way to put a WAR on the class path and uses classes inside its <code>WEB-INF&#47;classes</code> directory. A better idea is to package those classes in a JAR file that is used both from the web app project and the test project you&#39;re working on. The JAR could then be deployed to a Maven repository: <a href=\"https://maven.apache.org/guides/mini/guide-3rd-party-jars-remote.html\" rel=\"nofollow noreferrer\">maven.apache.org/guides/mini/guide-3rd-party-jars-remote.htm&zwnj;&#8203;l</a>"},{"owner":{"account_id":2264130,"reputation":38897,"user_id":1993366,"accept_rate":86,"display_name":"vikingsteve"},"score":0,"creation_date":1679473049,"post_id":75801801,"comment_id":133726404,"body_markdown":"Can the build for the WAR file be modified to produce BOTH a war and a jar","body":"Can the build for the WAR file be modified to produce BOTH a war and a jar"}],"owner":{"account_id":16208914,"reputation":85,"user_id":11703452,"display_name":"Maxime Alza"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679404960,"creation_date":1679404960,"question_id":75801801,"body_markdown":"I work for a company which has a Java project containing some code for their software.\r\nI created a maven project to test some API on their software and make some automatic build on TeamCity.\r\n\r\nTo test those API response, I use some classes from their original Java project, which is not a Maven project.\r\nWhen doing this on Eclipse, no problem if I configure well the build path. But, when trying to compile with Maven, I&#39;ve got an error saying that package ...impl.api.v1.measures.beans does not exist.\r\nThe original Java project, when compilated, produce a war file.\r\n\r\nHow can I import those classes from the compilated war file, in my Maven project ?","title":"How in a maven project can I import classes coming from an external war which don&#39;t comes from a maven project?","body":"<p>I work for a company which has a Java project containing some code for their software.\nI created a maven project to test some API on their software and make some automatic build on TeamCity.</p>\n<p>To test those API response, I use some classes from their original Java project, which is not a Maven project.\nWhen doing this on Eclipse, no problem if I configure well the build path. But, when trying to compile with Maven, I've got an error saying that package ...impl.api.v1.measures.beans does not exist.\nThe original Java project, when compilated, produce a war file.</p>\n<p>How can I import those classes from the compilated war file, in my Maven project ?</p>\n"},{"tags":["java","android","notifications","stack"],"owner":{"account_id":28074147,"reputation":21,"user_id":21446296,"display_name":"Charles"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":113,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1679404754,"creation_date":1679392485,"question_id":75799644,"body_markdown":"I have an Android app in kiosk mode in which I would like to send notifications to the users if necessary.\r\n\r\nAt first I was using the `Toast` but then I made a `FlashMessage` class (extending `Snackbar`) so that i could personalize (error/success/warning...). It might not be the best way but it works nice.\r\n\r\nThe only thing is `Toast` and `Snackbar` are not stackable.  So if I call more than one `FlashMessage` in a row, the previous one is replaced by the new one and the message is lost.\r\n\r\nIs there a (easy) way to make it stackable (I didn&#39;t see a option in the doc) or maybe to use another class to make something similar?\r\n\r\n(I am using mostly java/kotlin)\r\n\r\npush notification are not working since the app is in kiosk mode.\r\n\r\n`Toast` and `Snackbar` work nice but don&#39;t stack.","title":"How to make Android in-app notifications stackable?","body":"<p>I have an Android app in kiosk mode in which I would like to send notifications to the users if necessary.</p>\n<p>At first I was using the <code>Toast</code> but then I made a <code>FlashMessage</code> class (extending <code>Snackbar</code>) so that i could personalize (error/success/warning...). It might not be the best way but it works nice.</p>\n<p>The only thing is <code>Toast</code> and <code>Snackbar</code> are not stackable.  So if I call more than one <code>FlashMessage</code> in a row, the previous one is replaced by the new one and the message is lost.</p>\n<p>Is there a (easy) way to make it stackable (I didn't see a option in the doc) or maybe to use another class to make something similar?</p>\n<p>(I am using mostly java/kotlin)</p>\n<p>push notification are not working since the app is in kiosk mode.</p>\n<p><code>Toast</code> and <code>Snackbar</code> work nice but don't stack.</p>\n"},{"tags":["java","spring-boot","spring-data-jpa"],"comments":[{"owner":{"account_id":9571720,"reputation":6305,"user_id":7109162,"accept_rate":84,"display_name":"XtremeBaumer"},"score":0,"creation_date":1679404908,"post_id":75801755,"comment_id":133712907,"body_markdown":"gotta call `event.setUser(user);` before returning the value on `createEvent`. Then it should still be set on `store()`. Or since you pass the model around, you can set it in `store()` methode","body":"gotta call <code>event.setUser(user);</code> before returning the value on <code>createEvent</code>. Then it should still be set on <code>store()</code>. Or since you pass the model around, you can set it in <code>store()</code> methode"},{"owner":{"account_id":28075993,"reputation":3,"user_id":21447847,"display_name":"Nicola Giovanni Caddeo"},"score":0,"creation_date":1679408710,"post_id":75801755,"comment_id":133714214,"body_markdown":"Thank you so much, i set this in `store()` and now it works!","body":"Thank you so much, i set this in <code>store()</code> and now it works!"}],"owner":{"account_id":28075993,"reputation":3,"user_id":21447847,"display_name":"Nicola Giovanni Caddeo"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":198,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679404712,"creation_date":1679404712,"question_id":75801755,"body_markdown":"I&#39;m developing a mini project with spring boot for the creation of a calendar in which any registered user can add events to his calendar.The problem is that when I complete the form to insert the event in the database I don&#39;t understand how to add the user id as a foreign key of the event.\r\n\r\n\r\n\r\n\r\n\r\n\r\nThis is my User.java\r\n\r\n```\r\n@Getter\r\n@Setter\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\n@Entity\r\n@Table(name = &quot;users&quot;)\r\npublic class User {\r\n    private static final long serialVersionUID = 1L;\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Long id;\r\n\r\n    @Column(nullable = false)\r\n    private String name;\r\n\r\n    @Column(nullable = false, unique = true)\r\n    private String email;\r\n\r\n    @Column(nullable = false)\r\n    private String password;\r\n\r\n    @OneToMany(mappedBy = &quot;user&quot;, fetch = FetchType.LAZY, cascade = CascadeType.ALL)\r\n    private Set&lt;Event&gt; events = new HashSet&lt;Event&gt;();\r\n\r\n}\r\n```\r\nThis is my Event.java\r\n\r\n\r\n```\r\n@Getter\r\n@Setter\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\n@Entity\r\n@Table(name = &quot;events&quot;)\r\npublic class Event {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    @Column(name = &quot;event_id&quot;)\r\n    private Long id;\r\n\r\n    @Column(name = &quot;event_title&quot;, nullable = false)\r\n    private String eventTitle;\r\n\r\n    @Column(name = &quot;event_description&quot;, nullable = false)\r\n    private String eventDescription;\r\n\r\n    @Column(name = &quot;event_date&quot;, nullable = false)\r\n    private String eventDate;\r\n\r\n    @Column(name = &quot;start_time&quot;, nullable = false)\r\n    private int startTime;\r\n\r\n    @Column(name = &quot;end_time&quot;, nullable = false)\r\n    private int endTime;\r\n\r\n    @ManyToOne(fetch = FetchType.LAZY)\r\n    @JoinColumn(name = &quot;user_id&quot;, nullable = false)\r\n    private User user;\r\n}\r\n```\r\nThis is the controller I use to display the form and save the record\r\n\r\n```\r\n@GetMapping(&quot;/events/create&quot;)\r\n    public String createEvent(@AuthenticationPrincipal UserDetails userDetails, Model model) {\r\n        String email = userDetails.getUsername();\r\n        User user = userService.findUserByEmail(email);\r\n        model.addAttribute(&quot;user&quot;, user);\r\n        model.addAttribute(&quot;event&quot;, new Event());\r\n        return &quot;/events/create&quot;;\r\n    }\r\n@PostMapping(&quot;/events/createevent&quot;)\r\n    public String store(@ModelAttribute(&quot;event&quot;) Event formEvent, Model model) {\r\n\r\n        eventService.saveOrUpdate(formEvent);\r\n        return &quot;redirect:/calendar&quot;;\r\n    }\r\n```","title":"Spring Boot: Adding a record with current user ID as foreign key","body":"<p>I'm developing a mini project with spring boot for the creation of a calendar in which any registered user can add events to his calendar.The problem is that when I complete the form to insert the event in the database I don't understand how to add the user id as a foreign key of the event.</p>\n<p>This is my User.java</p>\n<pre><code>@Getter\n@Setter\n@NoArgsConstructor\n@AllArgsConstructor\n@Entity\n@Table(name = &quot;users&quot;)\npublic class User {\n    private static final long serialVersionUID = 1L;\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    @Column(nullable = false)\n    private String name;\n\n    @Column(nullable = false, unique = true)\n    private String email;\n\n    @Column(nullable = false)\n    private String password;\n\n    @OneToMany(mappedBy = &quot;user&quot;, fetch = FetchType.LAZY, cascade = CascadeType.ALL)\n    private Set&lt;Event&gt; events = new HashSet&lt;Event&gt;();\n\n}\n</code></pre>\n<p>This is my Event.java</p>\n<pre><code>@Getter\n@Setter\n@NoArgsConstructor\n@AllArgsConstructor\n@Entity\n@Table(name = &quot;events&quot;)\npublic class Event {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @Column(name = &quot;event_id&quot;)\n    private Long id;\n\n    @Column(name = &quot;event_title&quot;, nullable = false)\n    private String eventTitle;\n\n    @Column(name = &quot;event_description&quot;, nullable = false)\n    private String eventDescription;\n\n    @Column(name = &quot;event_date&quot;, nullable = false)\n    private String eventDate;\n\n    @Column(name = &quot;start_time&quot;, nullable = false)\n    private int startTime;\n\n    @Column(name = &quot;end_time&quot;, nullable = false)\n    private int endTime;\n\n    @ManyToOne(fetch = FetchType.LAZY)\n    @JoinColumn(name = &quot;user_id&quot;, nullable = false)\n    private User user;\n}\n</code></pre>\n<p>This is the controller I use to display the form and save the record</p>\n<pre><code>@GetMapping(&quot;/events/create&quot;)\n    public String createEvent(@AuthenticationPrincipal UserDetails userDetails, Model model) {\n        String email = userDetails.getUsername();\n        User user = userService.findUserByEmail(email);\n        model.addAttribute(&quot;user&quot;, user);\n        model.addAttribute(&quot;event&quot;, new Event());\n        return &quot;/events/create&quot;;\n    }\n@PostMapping(&quot;/events/createevent&quot;)\n    public String store(@ModelAttribute(&quot;event&quot;) Event formEvent, Model model) {\n\n        eventService.saveOrUpdate(formEvent);\n        return &quot;redirect:/calendar&quot;;\n    }\n</code></pre>\n"},{"tags":["java","spring","scala","mockito"],"comments":[{"owner":{"account_id":7034556,"reputation":12325,"user_id":5389127,"display_name":"Ga&#235;l J"},"score":0,"creation_date":1661796107,"post_id":73532825,"comment_id":129851843,"body_markdown":"How are.you using the mock after defining it? It has to be injected in the Spring context (assuming the `Component` annotation comes from Spring).","body":"How are.you using the mock after defining it? It has to be injected in the Spring context (assuming the <code>Component</code> annotation comes from Spring)."},{"owner":{"account_id":24824934,"reputation":43,"user_id":18704852,"display_name":"Nick"},"score":0,"creation_date":1661796896,"post_id":73532825,"comment_id":129852129,"body_markdown":"Hi @Ga&#235;lJ, the above code is all I did after define it, how can I inject it in Spring context?","body":"Hi @Ga&#235;lJ, the above code is all I did after define it, how can I inject it in Spring context?"},{"owner":{"account_id":16657879,"reputation":2625,"user_id":12038714,"display_name":"J Asgarov"},"score":0,"creation_date":1661798721,"post_id":73532825,"comment_id":129852759,"body_markdown":"please provide us with stacktrace (console output) that is shown when NPE is thrown","body":"please provide us with stacktrace (console output) that is shown when NPE is thrown"}],"answers":[{"tags":[],"owner":{"account_id":26191523,"reputation":29,"user_id":19873289,"display_name":"Oleksandr Bielov"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1661798832,"creation_date":1661798832,"answer_id":73533383,"question_id":73532825,"body_markdown":"You need to mock a Spring component, so inside your test class inject this component mock as:\r\n\r\n    public testClass{\r\n        \r\n        @Mock\r\n        private VertexGetTaxResilience vertexGetTaxResilience;\r\n        \r\n        //your test methods...\r\n    }\r\n\r\nSo now you can call methods from this mock\r\n\r\n","title":"NullPointerException after mock object in test","body":"<p>You need to mock a Spring component, so inside your test class inject this component mock as:</p>\n<pre><code>public testClass{\n    \n    @Mock\n    private VertexGetTaxResilience vertexGetTaxResilience;\n    \n    //your test methods...\n}\n</code></pre>\n<p>So now you can call methods from this mock</p>\n"},{"tags":[],"owner":{"account_id":24824934,"reputation":43,"user_id":18704852,"display_name":"Nick"},"down_vote_count":1,"up_vote_count":0,"is_accepted":true,"score":-1,"last_activity_date":1661806918,"creation_date":1661806918,"answer_id":73534614,"question_id":73532825,"body_markdown":"I fix this by using reflection for object.\r\n```\r\nReflectionTestUtils.setField\r\n```","title":"NullPointerException after mock object in test","body":"<p>I fix this by using reflection for object.</p>\n<pre><code>ReflectionTestUtils.setField\n</code></pre>\n"},{"tags":[],"owner":{"account_id":100923,"reputation":1987,"user_id":271789,"accept_rate":81,"display_name":"zefciu"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1679404661,"creation_date":1679404661,"answer_id":75801741,"question_id":73532825,"body_markdown":"I had the same problem. Likely you are not using the `MockitoJUnitRunner`. This is required for the `@Mock` decorators to work. If you don’t use it, the mocks will be `null`. Add `@RunWith(MockitoJUnitRunner.class` to the unittest class.","title":"NullPointerException after mock object in test","body":"<p>I had the same problem. Likely you are not using the <code>MockitoJUnitRunner</code>. This is required for the <code>@Mock</code> decorators to work. If you don’t use it, the mocks will be <code>null</code>. Add <code>@RunWith(MockitoJUnitRunner.class</code> to the unittest class.</p>\n"}],"owner":{"account_id":24824934,"reputation":43,"user_id":18704852,"display_name":"Nick"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":338,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73534614,"answer_count":3,"score":1,"last_activity_date":1679404661,"creation_date":1661795707,"question_id":73532825,"body_markdown":"I have a getDefaultRetryInstance which can be used to retry a call when have exception\r\n```\r\n@Component\r\nclass VertexGetTaxResilience(var retryRegistry: RetryRegistry) extends Serializable {\r\n    private val logger = LoggerFactory.getLogger(this.getClass)\r\n    val GET_VERTEX_TAX_RETRY_DEFAULT_NAME = &quot;getVerTexTaxDefaultRetry&quot;\r\n\r\n    val defaultVertexRetryInstance = Retry.of(GET_VERTEX_TAX_RETRY_DEFAULT_NAME, retryRegistry.getConfiguration(GET_VERTEX_TAX_RETRY_DEFAULT_NAME).get())\r\n\r\n    def getDefaultRetryInstance(): Retry = {\r\n        // default retry instance configured in yaml\r\n        logger.info(&quot;Retrieving default retry instance: {}&quot;, GET_VERTEX_TAX_RETRY_DEFAULT_NAME)\r\n        defaultVertexRetryInstance\r\n    }\r\n}\r\n```\r\nI&#39;m using this function.\r\n```\r\nval invoiceRequestResult = Decorators.ofSupplier {...}.withRetry(vertexGetTaxResilience.getDefaultRetryInstance())\r\n            .get()\r\n```\r\n\r\nHere is how I do a mock for this retry object, but I got &quot;java.lang.NullPointerException was thrown&quot; above, how can I fix this?\r\n\r\n```\r\n @Mock\r\n val vertexGetTaxResilience: VertexGetTaxResilience = null\r\n val retry = Retry.ofDefaults(&quot;getVerTexTaxDefaultRetry&quot;)\r\n //val vertexGetTaxResilienceMock = mock[VertexGetTaxResilience]\r\n doReturn(retry).when(vertexGetTaxResilienceMock).getDefaultRetryInstance()\r\n```","title":"NullPointerException after mock object in test","body":"<p>I have a getDefaultRetryInstance which can be used to retry a call when have exception</p>\n<pre><code>@Component\nclass VertexGetTaxResilience(var retryRegistry: RetryRegistry) extends Serializable {\n    private val logger = LoggerFactory.getLogger(this.getClass)\n    val GET_VERTEX_TAX_RETRY_DEFAULT_NAME = &quot;getVerTexTaxDefaultRetry&quot;\n\n    val defaultVertexRetryInstance = Retry.of(GET_VERTEX_TAX_RETRY_DEFAULT_NAME, retryRegistry.getConfiguration(GET_VERTEX_TAX_RETRY_DEFAULT_NAME).get())\n\n    def getDefaultRetryInstance(): Retry = {\n        // default retry instance configured in yaml\n        logger.info(&quot;Retrieving default retry instance: {}&quot;, GET_VERTEX_TAX_RETRY_DEFAULT_NAME)\n        defaultVertexRetryInstance\n    }\n}\n</code></pre>\n<p>I'm using this function.</p>\n<pre><code>val invoiceRequestResult = Decorators.ofSupplier {...}.withRetry(vertexGetTaxResilience.getDefaultRetryInstance())\n            .get()\n</code></pre>\n<p>Here is how I do a mock for this retry object, but I got &quot;java.lang.NullPointerException was thrown&quot; above, how can I fix this?</p>\n<pre><code> @Mock\n val vertexGetTaxResilience: VertexGetTaxResilience = null\n val retry = Retry.ofDefaults(&quot;getVerTexTaxDefaultRetry&quot;)\n //val vertexGetTaxResilienceMock = mock[VertexGetTaxResilience]\n doReturn(retry).when(vertexGetTaxResilienceMock).getDefaultRetryInstance()\n</code></pre>\n"},{"tags":["java","spring","rabbitmq","rpc"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1678950111,"post_id":75746229,"comment_id":133632705,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"owner":{"account_id":28023873,"reputation":1,"user_id":21404235,"display_name":"Gast&#227;o Neto"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":336,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679404452,"creation_date":1678891087,"question_id":75746229,"body_markdown":"My basic scenario have a publisher and a consumer, the communication use a spring AMQP RPC example with the template.convertSendAndReceive on the publisher.\r\nEverything works fine in general, but if I shutdown the consumer to simulate a problem on the server, the publisher will receive a timeout which is expected, but after the consumer is started it will receive the messages but can&#39;t send a response because it get the error &quot;channel is already closed due to channel error; protocol method: #method&lt;channelclose&gt;(replycode=404, replytext=NOT_FOUND  no queue &#39;randonqueuename&#39; in vhost &#39;/&#39;, classid=50, methodid=10)&quot; and the publisher will receive a timeout.\r\nSo after the first timeout my publisher will never receive a response.\r\nhow can I force the channel to be reopen or change to a new channel?\r\n\r\nI tried to change the ReplyTo channel on publisher message and this doesn&#39;t work. \r\n\r\n\r\nBasically this is my publisher class:\r\n``` java\r\n@Service\r\n@Log4j2\r\npublic class newPublisher {\r\n\t\r\n    @Autowired\r\n\tprivate RabbitTemplate rabbitTemplate;\r\n\r\n    @Value(&quot;${spring.rabbitmq.queue.basicqueue}&quot;)\r\n    private String queue;\r\n    \r\n    @Value(&quot;${rabbitmq.timeout}&quot;)\r\n    private Long timeout;\r\n    \r\n    public String send(FilterObject filterData) throws Exception{\r\n    \ttry {\r\n    \t\trabbitTemplate.setReplyTimeout(timeout);\r\n    \t\tMessage message = \r\n    \t\t\t\tMessageBuilder.withBody(new JSONObject(filterData).toString().getBytes()).build();\r\n    \t\tMessage responseData = rabbitTemplate.sendAndReceive(new Queue(queue, true).getName(), message);\r\n    \t\treturn new String(responseData.getBody(), StandardCharsets.UTF_8);\r\n    \t} catch(Exception erro) {\r\n    \t\tlog.error(&quot;Error connecting with RabbitMQ&quot;, erro);\r\n    \t\tthrow erro;\r\n    \t}\r\n        \r\n    }\r\n}\r\n```\r\n\r\nAnd this is my consumer:\r\n\r\n```java\r\n@Log4j2\r\npublic class BasicReaderConfiguration {\r\n\r\n\tprivate static Properties properties = Repository.getProperties();\r\n\tprivate static String rabbitQueue = properties.getProperty(&quot;rabbitmq.queue.basicqueue&quot;);\r\n\tprivate static String rabbitHost = properties.getProperty(&quot;rabbitmq.url&quot;);\r\n\tprivate static String rabbitUser = properties.getProperty(&quot;rabbitmq.username&quot;);\r\n\tprivate static String rabbitPassword = properties.getProperty(&quot;rabbitmq.password&quot;);\r\n    \r\n    public static void reader() {\r\n    \t\r\n    \ttry {\r\n\t        ConnectionFactory factory = new ConnectionFactory();\r\n\t        factory.setUri(rabbitHost);\r\n\t\t\tfactory.setUsername(rabbitUser);\r\n\t\t\tfactory.setPassword(rabbitPassword);\r\n\t\t    Connection connection = factory.newConnection();\r\n\t\t    Channel channel = connection.createChannel();\r\n\t\t\r\n\t\t    channel.queueDeclare(rabbitQueue, true, false, false, null);\r\n\t\t\tlog.info(&quot;Starting Consumer&quot;);\r\n\t\r\n\t\t    DeliverCallback deliverCallback = (consumerTag, deliveryCall) -&gt; {\r\n\t\t\t\tlog.info(&quot;Get Message&quot;);\r\n\t\t\t\tlog.info(new String(deliveryCall.getBody(), StandardCharsets.UTF_8));\r\n\r\n\r\n                log.info(&quot;Send response&quot;);\r\n\t\t\t\tDefaultDelivery defaultDelivery = new DefaultDelivery(DefaultDeliveryConfiguration.getChannel(deliveryCall.getProperties()));\r\n\t\t\t\tdefaultDelivery.sendToQueue(new String(deliveryCall.getBody(), StandardCharsets.UTF_8), deliveryCall.getProperties());\r\n\r\n\t\t\t\tlog.info(&quot;Response Sended&quot;);\r\n\t\t    };\r\n\t\t    channel.basicConsume(queue, true, deliverCallback, consumerTag -&gt; { });\r\n\t\t} catch (Exception error) {\r\n\t\t\tlog.error(&quot;Error connecting with RabbitMQ&quot;, error);\r\n\t\t}\r\n\t    \r\n    }\r\n\r\n}\r\n```\r\n\r\n```java\r\n@Log4j2\r\npublic class DefaultDelivery {\r\n\r\n    private Channel channel;\r\n\tprivate static ObjectMapper jsonMapper = new ObjectMapper();\r\n\tprivate AMQP.BasicProperties props;\r\n\r\n\r\n\tpublic DefaultDelivery(Channel channel) {\r\n\t\tthis.channel = channel;\r\n\t}\r\n\r\n\tpublic void sendToQueue(String response, BasicProperties basicProperties) {\r\n\r\n\t\t\tthis.props = basicProperties;\r\n\t\t\tbasicSend(channel, response);\r\n\t}\r\n\r\n\r\n\t@Override\r\n\tpublic void basicSend(Channel channel, String message)  {\r\n\t\ttry {\r\n\t\t\tchannel.basicPublish(&quot;&quot;, this.props.getReplyTo(), this.props, message.getBytes());\r\n\t\t} catch (Exception error) {\r\n\t\t\tlog.error(&quot;Error connecting with RabbitMQ&quot;, error);\r\n\t\t}\r\n\t}\r\n\r\n}\r\n```\r\n\r\n\r\n```java\r\n@Log4j2\r\npublic class DefaultDeliveryConfiguration {\r\n\r\n\tprivate static Properties properties = Repository.getProperties();\r\n\tprivate static String rabbitHost = properties.getProperty(&quot;rabbitmq.url&quot;);\r\n\tprivate static String rabbitUser = properties.getProperty(&quot;rabbitmq.username&quot;);\r\n\tprivate static String rabbitPassword = properties.getProperty(&quot;rabbitmq.password&quot;);\r\n\tprivate static BasicProperties messageProperties;\r\n\tprivate static Channel channel;\r\n\r\n\tprivate static Channel startChannel() {\r\n\t\tConnectionFactory factory = new ConnectionFactory();\r\n\r\n\t\ttry {\r\n\t\t\t\r\n\t\t\tfactory.setUri(rabbitUrl);\r\n\t\t\tfactory.setUsername(rabbitUser);\r\n\t\t\tfactory.setPassword(rabbitPassword);\r\n\t\t\t\r\n\t\t\tConnection connection = factory.newConnection();\r\n\r\n\t\t\tchannel = connection.createChannel();\r\n\t\t\tchannel.queueDeclare(messageProperties.getReplyTo(), true, false, false, null);\r\n\t\t} catch (Exception error) {\r\n\t\t\tlog.error(&quot;Error connecting with RabbitMQ&quot;, error);\r\n\t\t}\r\n\t\t\r\n\t\treturn channel;\r\n\t}\r\n\r\n\tpublic static Channel getChannel(BasicProperties basicProperties) {\r\n\t\tmessageProperties = basicProperties;\r\n\t\tif (channel == null)\r\n\t\t\treturn startChannel();\r\n\t\treturn channel;\r\n\t}\r\n}\r\n```","title":"RabbitMQ Channel always closed after timeout","body":"<p>My basic scenario have a publisher and a consumer, the communication use a spring AMQP RPC example with the template.convertSendAndReceive on the publisher.\nEverything works fine in general, but if I shutdown the consumer to simulate a problem on the server, the publisher will receive a timeout which is expected, but after the consumer is started it will receive the messages but can't send a response because it get the error &quot;channel is already closed due to channel error; protocol method: #method(replycode=404, replytext=NOT_FOUND  no queue 'randonqueuename' in vhost '/', classid=50, methodid=10)&quot; and the publisher will receive a timeout.\nSo after the first timeout my publisher will never receive a response.\nhow can I force the channel to be reopen or change to a new channel?</p>\n<p>I tried to change the ReplyTo channel on publisher message and this doesn't work.</p>\n<p>Basically this is my publisher class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Service\n@Log4j2\npublic class newPublisher {\n    \n    @Autowired\n    private RabbitTemplate rabbitTemplate;\n\n    @Value(&quot;${spring.rabbitmq.queue.basicqueue}&quot;)\n    private String queue;\n    \n    @Value(&quot;${rabbitmq.timeout}&quot;)\n    private Long timeout;\n    \n    public String send(FilterObject filterData) throws Exception{\n        try {\n            rabbitTemplate.setReplyTimeout(timeout);\n            Message message = \n                    MessageBuilder.withBody(new JSONObject(filterData).toString().getBytes()).build();\n            Message responseData = rabbitTemplate.sendAndReceive(new Queue(queue, true).getName(), message);\n            return new String(responseData.getBody(), StandardCharsets.UTF_8);\n        } catch(Exception erro) {\n            log.error(&quot;Error connecting with RabbitMQ&quot;, erro);\n            throw erro;\n        }\n        \n    }\n}\n</code></pre>\n<p>And this is my consumer:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Log4j2\npublic class BasicReaderConfiguration {\n\n    private static Properties properties = Repository.getProperties();\n    private static String rabbitQueue = properties.getProperty(&quot;rabbitmq.queue.basicqueue&quot;);\n    private static String rabbitHost = properties.getProperty(&quot;rabbitmq.url&quot;);\n    private static String rabbitUser = properties.getProperty(&quot;rabbitmq.username&quot;);\n    private static String rabbitPassword = properties.getProperty(&quot;rabbitmq.password&quot;);\n    \n    public static void reader() {\n        \n        try {\n            ConnectionFactory factory = new ConnectionFactory();\n            factory.setUri(rabbitHost);\n            factory.setUsername(rabbitUser);\n            factory.setPassword(rabbitPassword);\n            Connection connection = factory.newConnection();\n            Channel channel = connection.createChannel();\n        \n            channel.queueDeclare(rabbitQueue, true, false, false, null);\n            log.info(&quot;Starting Consumer&quot;);\n    \n            DeliverCallback deliverCallback = (consumerTag, deliveryCall) -&gt; {\n                log.info(&quot;Get Message&quot;);\n                log.info(new String(deliveryCall.getBody(), StandardCharsets.UTF_8));\n\n\n                log.info(&quot;Send response&quot;);\n                DefaultDelivery defaultDelivery = new DefaultDelivery(DefaultDeliveryConfiguration.getChannel(deliveryCall.getProperties()));\n                defaultDelivery.sendToQueue(new String(deliveryCall.getBody(), StandardCharsets.UTF_8), deliveryCall.getProperties());\n\n                log.info(&quot;Response Sended&quot;);\n            };\n            channel.basicConsume(queue, true, deliverCallback, consumerTag -&gt; { });\n        } catch (Exception error) {\n            log.error(&quot;Error connecting with RabbitMQ&quot;, error);\n        }\n        \n    }\n\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>@Log4j2\npublic class DefaultDelivery {\n\n    private Channel channel;\n    private static ObjectMapper jsonMapper = new ObjectMapper();\n    private AMQP.BasicProperties props;\n\n\n    public DefaultDelivery(Channel channel) {\n        this.channel = channel;\n    }\n\n    public void sendToQueue(String response, BasicProperties basicProperties) {\n\n            this.props = basicProperties;\n            basicSend(channel, response);\n    }\n\n\n    @Override\n    public void basicSend(Channel channel, String message)  {\n        try {\n            channel.basicPublish(&quot;&quot;, this.props.getReplyTo(), this.props, message.getBytes());\n        } catch (Exception error) {\n            log.error(&quot;Error connecting with RabbitMQ&quot;, error);\n        }\n    }\n\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>@Log4j2\npublic class DefaultDeliveryConfiguration {\n\n    private static Properties properties = Repository.getProperties();\n    private static String rabbitHost = properties.getProperty(&quot;rabbitmq.url&quot;);\n    private static String rabbitUser = properties.getProperty(&quot;rabbitmq.username&quot;);\n    private static String rabbitPassword = properties.getProperty(&quot;rabbitmq.password&quot;);\n    private static BasicProperties messageProperties;\n    private static Channel channel;\n\n    private static Channel startChannel() {\n        ConnectionFactory factory = new ConnectionFactory();\n\n        try {\n            \n            factory.setUri(rabbitUrl);\n            factory.setUsername(rabbitUser);\n            factory.setPassword(rabbitPassword);\n            \n            Connection connection = factory.newConnection();\n\n            channel = connection.createChannel();\n            channel.queueDeclare(messageProperties.getReplyTo(), true, false, false, null);\n        } catch (Exception error) {\n            log.error(&quot;Error connecting with RabbitMQ&quot;, error);\n        }\n        \n        return channel;\n    }\n\n    public static Channel getChannel(BasicProperties basicProperties) {\n        messageProperties = basicProperties;\n        if (channel == null)\n            return startChannel();\n        return channel;\n    }\n}\n</code></pre>\n"},{"tags":["java","algorithm"],"comments":[{"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":0,"creation_date":1679305034,"post_id":75788492,"comment_id":133691162,"body_markdown":"You simply copy the old entries into the new doubled array, but I suspect you&#39;re expected to re-hash the values. Since the table size changed, the new position of entries should potentially change as well.","body":"You simply copy the old entries into the new doubled array, but I suspect you&#39;re expected to re-hash the values. Since the table size changed, the new position of entries should potentially change as well."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1679311423,"post_id":75788492,"comment_id":133692957,"body_markdown":"In addition to what @user16320675 mentioned: 4) why is `hashTable` declared `static` when it is supposed to hold the object’s state? 5) why do you initialize `hashTable` with an array in the constructor when you overwrite it with the result of `nullConverter()` on the first invocation of `insert` anyway? 6) if you use a zero key as initial state/absent value, how is the code supposed to ever handle an actual zero key? 7) Be aware of the limitations of [`Math.abs(…)`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Math.html#abs(int)), i.e. it can return a negative value.","body":"In addition to what @user16320675 mentioned: 4) why is <code>hashTable</code> declared <code>static</code> when it is supposed to hold the object’s state? 5) why do you initialize <code>hashTable</code> with an array in the constructor when you overwrite it with the result of <code>nullConverter()</code> on the first invocation of <code>insert</code> anyway? 6) if you use a zero key as initial state/absent value, how is the code supposed to ever handle an actual zero key? 7) Be aware of the limitations of <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Math.html#abs(int)\" rel=\"nofollow noreferrer\"><code>Math.abs(…)</code></a>, i.e. it can return a negative value."}],"answers":[{"tags":[],"owner":{"account_id":28063635,"reputation":1,"user_id":21437358,"display_name":"Bakula"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679404002,"creation_date":1679404002,"answer_id":75801627,"question_id":75788492,"body_markdown":"&gt; *In addition to what @user16320675 mentioned: 4) why is hashTable declared static when it is supposed to hold the object’s state? 5) why do you initialize hashTable with an array in the constructor when you overwrite it with the result of nullConverter() on the first invocation of insert anyway? 6) if you use a zero key as initial state/absent value, how is the code supposed to ever handle an actual zero key? 7) Be aware of the limitations of Math.abs(…), i.e. it can return a negative value.*\r\n&gt; \r\nSecond rehashing during increasing capacity and converter from null to 0 moved to another method make it works. Thanks guys!","title":"Java hash table based on open addressing implementation","body":"<blockquote>\n<p><em>In addition to what @user16320675 mentioned: 4) why is hashTable declared static when it is supposed to hold the object’s state? 5) why do you initialize hashTable with an array in the constructor when you overwrite it with the result of nullConverter() on the first invocation of insert anyway? 6) if you use a zero key as initial state/absent value, how is the code supposed to ever handle an actual zero key? 7) Be aware of the limitations of Math.abs(…), i.e. it can return a negative value.</em></p>\n</blockquote>\n<p>Second rehashing during increasing capacity and converter from null to 0 moved to another method make it works. Thanks guys!</p>\n"}],"owner":{"account_id":28063635,"reputation":1,"user_id":21437358,"display_name":"Bakula"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":220,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1679404002,"creation_date":1679304340,"question_id":75788492,"body_markdown":"I am trying to solve task from hash tables and I&#39;m stuck.\r\nI need to describe a hash table based on open addressing. Linear probing is used to resolve collisions.\r\nI need to implement insert method:\r\n\r\n*-void insert(int key, Object value)\r\nInserts a key/value pair in the hash table if the key is missing or replaces the object if the key exists*\r\n\r\nConditions:\r\n-The initial capacity of the hash table is 8 buckets.\r\n-The maximum capacity is 16; inserting more elements should raise an IllegalStateException.\r\n-The capacity should double each time a new element arrives and all the buckets are already occupied. -For example, if 8 buckets are already filled and a new key is about to be added, the capacity should increase.\r\n\r\nUse any type from the java.util package or its subpackages, except for the java.util.Iterator is forbidden.\r\n\r\n```\r\npublic class HashtableOpen8to16Impl implements HashtableOpen8to16 {\r\n    \r\n    int capacity;\r\n    int size;\r\n\r\n    static HashNode[] hashTable;\r\n\r\n    public HashtableOpen8to16Impl() {\r\n        hashTable = new HashNode[8];\r\n        this.capacity = 8;\r\n        this.size = 0;\r\n    }\r\n\r\n    private static class HashNode {\r\n        int key;\r\n        Object value;\r\n\r\n        public HashNode(int key, Object value) {\r\n            this.key = key;\r\n            this.value = value;\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void insert(int key, Object value) {\r\n        HashNode temp = new HashNode(key, value);\r\n\r\n        if (size == 0) {\r\n            hashTable = nullConverter();\r\n        }\r\n\r\n        if (size == capacity-1) {\r\n            doubleCapacity();\r\n        }\r\n\r\n        int hashIndex = abs(key) % capacity;\r\n        while (hashTable[hashIndex].key != 0 &amp;&amp; hashTable[hashIndex].key != temp.key &amp;&amp; hashTable[hashIndex].key != -1) {\r\n            hashIndex++;\r\n            hashIndex %= capacity;\r\n        }\r\n        if (hashTable[hashIndex].key == 0 || hashTable[hashIndex].key == -1) {\r\n            if (!hashTable[hashIndex].value.equals(temp.value)) {\r\n                size++;\r\n            }\r\n        }\r\n\r\n        hashTable[hashIndex] = temp;\r\n    }\r\n\r\n    public void doubleCapacity() {\r\n        capacity = 16;\r\n        HashNode[] tempHashTable = nullConverter();\r\n        for (int i = 0; i &lt; hashTable.length; i++) {\r\n            tempHashTable[i] = hashTable[i];\r\n        }\r\n        hashTable = tempHashTable;\r\n\r\n    }\r\n\r\n    public HashNode[] nullConverter() {\r\n        HashNode[] tempHashTable = new HashNode[capacity];\r\n        for (int i = 0; i &lt; capacity; i++) {\r\n            tempHashTable[i] = new HashNode(0, 0);\r\n        }\r\n        return tempHashTable;\r\n    }\r\n}\r\n```\r\n\r\n\r\nThere are 8 test cases where key=value:\r\n\r\n    1. Input [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]\r\n       Expected [16,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15]\r\n       Correct\r\n    2. Input [1,2,3,4,5,6,7,8,9,10]\r\n       Expected [0,1,2,3,4,5,6,7,8,9,10,0,0,0,0,0]\r\n       Correct\r\n    3. Input [-74,98,-44,75,-27,76,-33,42,-71,77]\r\n       Expected [77, -33, 98, 0, 0, 0, 0, -71, 0, 0, 42, -74, -44, 75, -27, 76]\r\n       Actual [0, -33, -74, 98, -44, 75, -27, 76, -71, 0, 42, 0, 0, 77, 0, 0]\r\n    4. Input [70,-17,-46,-80,53,-94,-76,-7]\r\n       Expected [-80, -17, -94, -7, -76, 53, 70, -46]\r\n       Actual [-80, -17, -94, 0, -76, 53, 70, -46, -7, 0, 0, 0, 0, 0, 0, 0]\r\n    5. Input [43,-77,-81,-20,14,-49,39,46,-69,-19,-37,-92,44,13,74]\r\n       Expected [44, -81, -49, -19, -20, -69, -37, 39, 13, 0, 74, 43, -92, -77, 46, 14]\r\n       Actual [0, -81, -49, 43, -20, -77, 14, 39, -69, -19, -37, 74, -92, 44, 46, 13]\r\n    6. Input [30,19,-61,-34,78,78,-34,80,30,19,-61,48,68,48,80,68]\r\n       Expected [80, 48, -34, 19, 68, -61, 30, 78]\r\n       Actual [80, 48, -34, 19, 68, -61, 30, 78, 0, 0, 0, 0, 0, 0, 0, 0]\r\n    7. Input [0,5,-70,0,-9,0,95,25,0,-3,-14,79,0,-62,45,0,88,0,49]\r\n       Expected [0, 79, -62, -3, 49, 5, -70, 0, 88, -9, 25, 0, 0, 45, -14, 95]\r\n       Actual [-14, -9, 25, -3, 49, 5, -70, 95, 88, 0, 0, 0, 0, 45, -62, 79]\r\n    8. Input [0,0,8,0,8,16,32,24,256,0,0,8,16]\r\n       Expected [0, 8, 16, 32, 24, 256, 0, 0]\r\n       Actual [8, 16, 32, 24, 256, 0, 0, 0]\r\n\r\nFirst 2 tests are ok but rest are wrong. Where is mistake in my implementation? How it supposed to look like?","title":"Java hash table based on open addressing implementation","body":"<p>I am trying to solve task from hash tables and I'm stuck.\nI need to describe a hash table based on open addressing. Linear probing is used to resolve collisions.\nI need to implement insert method:</p>\n<p><em>-void insert(int key, Object value)\nInserts a key/value pair in the hash table if the key is missing or replaces the object if the key exists</em></p>\n<p>Conditions:\n-The initial capacity of the hash table is 8 buckets.\n-The maximum capacity is 16; inserting more elements should raise an IllegalStateException.\n-The capacity should double each time a new element arrives and all the buckets are already occupied. -For example, if 8 buckets are already filled and a new key is about to be added, the capacity should increase.</p>\n<p>Use any type from the java.util package or its subpackages, except for the java.util.Iterator is forbidden.</p>\n<pre><code>public class HashtableOpen8to16Impl implements HashtableOpen8to16 {\n    \n    int capacity;\n    int size;\n\n    static HashNode[] hashTable;\n\n    public HashtableOpen8to16Impl() {\n        hashTable = new HashNode[8];\n        this.capacity = 8;\n        this.size = 0;\n    }\n\n    private static class HashNode {\n        int key;\n        Object value;\n\n        public HashNode(int key, Object value) {\n            this.key = key;\n            this.value = value;\n        }\n    }\n\n    @Override\n    public void insert(int key, Object value) {\n        HashNode temp = new HashNode(key, value);\n\n        if (size == 0) {\n            hashTable = nullConverter();\n        }\n\n        if (size == capacity-1) {\n            doubleCapacity();\n        }\n\n        int hashIndex = abs(key) % capacity;\n        while (hashTable[hashIndex].key != 0 &amp;&amp; hashTable[hashIndex].key != temp.key &amp;&amp; hashTable[hashIndex].key != -1) {\n            hashIndex++;\n            hashIndex %= capacity;\n        }\n        if (hashTable[hashIndex].key == 0 || hashTable[hashIndex].key == -1) {\n            if (!hashTable[hashIndex].value.equals(temp.value)) {\n                size++;\n            }\n        }\n\n        hashTable[hashIndex] = temp;\n    }\n\n    public void doubleCapacity() {\n        capacity = 16;\n        HashNode[] tempHashTable = nullConverter();\n        for (int i = 0; i &lt; hashTable.length; i++) {\n            tempHashTable[i] = hashTable[i];\n        }\n        hashTable = tempHashTable;\n\n    }\n\n    public HashNode[] nullConverter() {\n        HashNode[] tempHashTable = new HashNode[capacity];\n        for (int i = 0; i &lt; capacity; i++) {\n            tempHashTable[i] = new HashNode(0, 0);\n        }\n        return tempHashTable;\n    }\n}\n</code></pre>\n<p>There are 8 test cases where key=value:</p>\n<pre><code>1. Input [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]\n   Expected [16,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15]\n   Correct\n2. Input [1,2,3,4,5,6,7,8,9,10]\n   Expected [0,1,2,3,4,5,6,7,8,9,10,0,0,0,0,0]\n   Correct\n3. Input [-74,98,-44,75,-27,76,-33,42,-71,77]\n   Expected [77, -33, 98, 0, 0, 0, 0, -71, 0, 0, 42, -74, -44, 75, -27, 76]\n   Actual [0, -33, -74, 98, -44, 75, -27, 76, -71, 0, 42, 0, 0, 77, 0, 0]\n4. Input [70,-17,-46,-80,53,-94,-76,-7]\n   Expected [-80, -17, -94, -7, -76, 53, 70, -46]\n   Actual [-80, -17, -94, 0, -76, 53, 70, -46, -7, 0, 0, 0, 0, 0, 0, 0]\n5. Input [43,-77,-81,-20,14,-49,39,46,-69,-19,-37,-92,44,13,74]\n   Expected [44, -81, -49, -19, -20, -69, -37, 39, 13, 0, 74, 43, -92, -77, 46, 14]\n   Actual [0, -81, -49, 43, -20, -77, 14, 39, -69, -19, -37, 74, -92, 44, 46, 13]\n6. Input [30,19,-61,-34,78,78,-34,80,30,19,-61,48,68,48,80,68]\n   Expected [80, 48, -34, 19, 68, -61, 30, 78]\n   Actual [80, 48, -34, 19, 68, -61, 30, 78, 0, 0, 0, 0, 0, 0, 0, 0]\n7. Input [0,5,-70,0,-9,0,95,25,0,-3,-14,79,0,-62,45,0,88,0,49]\n   Expected [0, 79, -62, -3, 49, 5, -70, 0, 88, -9, 25, 0, 0, 45, -14, 95]\n   Actual [-14, -9, 25, -3, 49, 5, -70, 95, 88, 0, 0, 0, 0, 45, -62, 79]\n8. Input [0,0,8,0,8,16,32,24,256,0,0,8,16]\n   Expected [0, 8, 16, 32, 24, 256, 0, 0]\n   Actual [8, 16, 32, 24, 256, 0, 0, 0]\n</code></pre>\n<p>First 2 tests are ok but rest are wrong. Where is mistake in my implementation? How it supposed to look like?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":4550581,"reputation":4343,"user_id":3695939,"accept_rate":69,"display_name":"moondaisy"},"score":3,"creation_date":1492805961,"post_id":43550974,"comment_id":74154896,"body_markdown":"`Toolkit.getDefaultToolkit().getSystemClipboard()`","body":"<code>Toolkit.getDefaultToolkit().getSystemClipboard()</code>"}],"answers":[{"tags":[],"owner":{"account_id":7421543,"reputation":2880,"user_id":5645656,"accept_rate":100,"display_name":"Cardinal System"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1655324187,"creation_date":1492804507,"answer_id":43550998,"question_id":43550974,"body_markdown":"Use [`Toolkit#getSystemClipboard`][1]:\r\n\r\n    import java.awt.Toolkit;\r\n    import java.awt.datatransfer.DataFlavor;\r\n    \r\n    public static String readClipboard() {\r\n        return (String) Toolkit.getDefaultToolkit().getSystemClipboard().getData(DataFlavor.stringFlavor);\r\n    }\r\n\r\n \r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/awt/Toolkit.html#getSystemClipboard--","title":"How to Access Clipboard data using Java in Windows?","body":"<p>Use <a href=\"https://docs.oracle.com/javase/8/docs/api/java/awt/Toolkit.html#getSystemClipboard--\" rel=\"nofollow noreferrer\"><code>Toolkit#getSystemClipboard</code></a>:</p>\n<pre><code>import java.awt.Toolkit;\nimport java.awt.datatransfer.DataFlavor;\n\npublic static String readClipboard() {\n    return (String) Toolkit.getDefaultToolkit().getSystemClipboard().getData(DataFlavor.stringFlavor);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5605036,"reputation":2440,"user_id":4439996,"accept_rate":80,"display_name":"Akshay Pethani"},"down_vote_count":0,"up_vote_count":22,"is_accepted":true,"score":22,"last_activity_date":1679403789,"creation_date":1492804911,"answer_id":43551105,"question_id":43550974,"body_markdown":"This code snippet is for accessing and printing the clipboard data in Java:\r\n\r\n    import java.awt.datatransfer.*;\r\n    import java.awt.*;\r\n    \r\n    public class SystemClipboardAccess {\r\n    \r\n    \tpublic static void main(String args[]) throws Exception {\r\n    \t\t// Create a Clipboard object using getSystemClipboard() method\r\n    \t\tClipboard c = Toolkit.getDefaultToolkit().getSystemClipboard();\r\n    \r\n    \t\t// Get data stored in the clipboard that is in the form of a string (text)\r\n    \t\tSystem.out.println(c.getData(DataFlavor.stringFlavor));\r\n    \t}\r\n    }","title":"How to Access Clipboard data using Java in Windows?","body":"<p>This code snippet is for accessing and printing the clipboard data in Java:</p>\n<pre><code>import java.awt.datatransfer.*;\nimport java.awt.*;\n\npublic class SystemClipboardAccess {\n\n    public static void main(String args[]) throws Exception {\n        // Create a Clipboard object using getSystemClipboard() method\n        Clipboard c = Toolkit.getDefaultToolkit().getSystemClipboard();\n\n        // Get data stored in the clipboard that is in the form of a string (text)\n        System.out.println(c.getData(DataFlavor.stringFlavor));\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":10739906,"reputation":201,"user_id":7903381,"display_name":"Arth Agarwal"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":18622,"favorite_count":0,"down_vote_count":1,"up_vote_count":20,"accepted_answer_id":43551105,"answer_count":2,"score":19,"last_activity_date":1679403789,"creation_date":1492804421,"question_id":43550974,"body_markdown":"I want to Access Clipboard data/text in my Java Program in Windows 10 system targeted program. Any code snippets or Class that is used to access the clipboard data?","title":"How to Access Clipboard data using Java in Windows?","body":"<p>I want to Access Clipboard data/text in my Java Program in Windows 10 system targeted program. Any code snippets or Class that is used to access the clipboard data?</p>\n"},{"tags":["java","refactoring"],"answers":[{"tags":[],"owner":{"account_id":6364,"reputation":14478,"user_id":10676,"accept_rate":100,"display_name":"MikeJ"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1383497425,"creation_date":1227711577,"answer_id":320983,"question_id":320946,"body_markdown":"It&#39;s intended to be more revealing of the intention of the code. In some cases it can be abused but not likely. for example you could update the queries for the 5% and 2% discounts with queries but in the name of the methods you could describe in the name  reason for the discount. remember, it may be obvious today but in 6 months it might not be so - as I say - its not a matter if I forget, but when I forget. \r\n\r\n\r\n      if (basePrice() &gt; 1000)\r\n         return bigTicketDiscount()\r\n      else\r\n         return regularDiscount()\r\n     \r\n    double bigTicketDiscount(){\r\n      return basePrice() * 0.95;\r\n    }\r\n    \r\n    double regularDiscount(){\r\n      return basePrice() * 0.98\r\n    }\r\n","title":"Replace Temp with Query","body":"<p>It's intended to be more revealing of the intention of the code. In some cases it can be abused but not likely. for example you could update the queries for the 5% and 2% discounts with queries but in the name of the methods you could describe in the name  reason for the discount. remember, it may be obvious today but in 6 months it might not be so - as I say - its not a matter if I forget, but when I forget. </p>\n\n<pre><code>  if (basePrice() &gt; 1000)\n     return bigTicketDiscount()\n  else\n     return regularDiscount()\n\ndouble bigTicketDiscount(){\n  return basePrice() * 0.95;\n}\n\ndouble regularDiscount(){\n  return basePrice() * 0.98\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4476,"reputation":32309,"user_id":6744,"display_name":"Chris Shaffer"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1227711738,"creation_date":1227711738,"answer_id":320992,"question_id":320946,"body_markdown":"It really seems to me that by doing this you are helping to make a single purpose to your original method; It no longer is responsible for calculating the basePrice and the discount price (or whatever it is that it is calculating).  This is an example of sacrificing some CPU cycles to make the code more maintainable.  The &quot;wasted&quot; cpu cycles are probably not something you&#39;ll notice for one and also it&#39;s possible the compiler could optimize it (maybe by noticing that the method is relatively simple and instead of calling the method it inserts the actual code (more like a macro).  Anyway, these types of optimizations are best left to machines, leaving people with cleaner code to work on.","title":"Replace Temp with Query","body":"<p>It really seems to me that by doing this you are helping to make a single purpose to your original method; It no longer is responsible for calculating the basePrice and the discount price (or whatever it is that it is calculating).  This is an example of sacrificing some CPU cycles to make the code more maintainable.  The \"wasted\" cpu cycles are probably not something you'll notice for one and also it's possible the compiler could optimize it (maybe by noticing that the method is relatively simple and instead of calling the method it inserts the actual code (more like a macro).  Anyway, these types of optimizations are best left to machines, leaving people with cleaner code to work on.</p>\n"},{"tags":[],"owner":{"account_id":7342,"reputation":102036,"user_id":12725,"accept_rate":78,"display_name":"James Curran"},"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1227711748,"creation_date":1227711748,"answer_id":320993,"question_id":320946,"body_markdown":"Having read Fowler&#39;s [webpage on it][1], I can see no advantage to doing it that way.  The only possible gain is by isolating an expression which may be used often into one spot, but that would be best handled by :\r\n\r\n        double basePrice = basePrice();\r\n        if (basePrice &gt; 1000)\r\n                return basePrice * 0.95;\r\n        else\r\n                return basePrice * 0.98;\r\n\r\n\r\nFowler offers no explanation why his revised code is better than the original, other than to read his book.\r\n\r\n  [1]: http://www.refactoring.com/catalog/replaceTempWithQuery.html","title":"Replace Temp with Query","body":"<p>Having read Fowler's <a href=\"http://www.refactoring.com/catalog/replaceTempWithQuery.html\" rel=\"noreferrer\">webpage on it</a>, I can see no advantage to doing it that way.  The only possible gain is by isolating an expression which may be used often into one spot, but that would be best handled by :</p>\n\n<pre><code>    double basePrice = basePrice();\n    if (basePrice &gt; 1000)\n            return basePrice * 0.95;\n    else\n            return basePrice * 0.98;\n</code></pre>\n\n<p>Fowler offers no explanation why his revised code is better than the original, other than to read his book.</p>\n"},{"tags":[],"owner":{"account_id":53992,"reputation":1036,"user_id":161483,"accept_rate":65,"display_name":"derdo"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1268699236,"creation_date":1268699236,"answer_id":2451405,"question_id":320946,"body_markdown":"I think most of the utility of this refactoring does not come from applying it by itself but as a step towards an Extract Method which is extremely common and useful. On the cases where local variable stand in the way of Extract Method or complicate it by additional parameters, &#39;replace temp with query helps&#39; to make Extract Method easier. Also in those cases, the query method that is generated gets reused by two different methods which are result of extract method. ","title":"Replace Temp with Query","body":"<p>I think most of the utility of this refactoring does not come from applying it by itself but as a step towards an Extract Method which is extremely common and useful. On the cases where local variable stand in the way of Extract Method or complicate it by additional parameters, 'replace temp with query helps' to make Extract Method easier. Also in those cases, the query method that is generated gets reused by two different methods which are result of extract method. </p>\n"},{"tags":[],"owner":{"account_id":777239,"reputation":51,"user_id":821193,"display_name":"Ilian Iliev"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1309354637,"creation_date":1309354637,"answer_id":6521529,"question_id":320946,"body_markdown":"There is something more about Replace Temp with Query in Refactoring book and it is:\r\n\r\n&gt; You may be concerned about performance in this case. As with other performance issues, let it\r\nslide for the moment. Nine times out of ten, it won&#39;t matter. When it does matter, you will fix the\r\nproblem during optimization. With your code better factored, you will often find more powerful\r\noptimizations, which you would have missed without refactoring. If worse comes to worse, it&#39;s\r\nvery easy to put the temp back.","title":"Replace Temp with Query","body":"<p>There is something more about Replace Temp with Query in Refactoring book and it is:</p>\n\n<blockquote>\n  <p>You may be concerned about performance in this case. As with other performance issues, let it\n  slide for the moment. Nine times out of ten, it won't matter. When it does matter, you will fix the\n  problem during optimization. With your code better factored, you will often find more powerful\n  optimizations, which you would have missed without refactoring. If worse comes to worse, it's\n  very easy to put the temp back.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":218155,"reputation":333,"user_id":474335,"display_name":"kenno"},"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1384302793,"creation_date":1384302793,"answer_id":19942935,"question_id":320946,"body_markdown":"\r\nIt&#39;s a refactoring that is important as it is a refactoring towards single responsibility, it&#39;s a resolution of DRY fail!  \r\n\r\nThe main problem with temps (esp. in naive code using long methods, hundreds of lines long!) is that they are mutable, local state.  The obvious risk (as discussed by Fowler?) is that someone might make a change mid way down a long method, and break something at the end. (Have seen this cost incurred) \r\n\r\nThere are no tests, this method has myriad dependencies - what a mess! :)\r\n\r\nRemove temp is about refactoring towards single responsibility.\r\n\r\nExample - today I found a bug and it relates to passing the *wrong temp variable* into a service. If I remove temps (there are several, all strings), that bug (oversight) just can&#39;t happen.\r\n\r\nThe reason my method is holding a temp variable is that it&#39;s doing work it shouldn&#39;t ... and this logic is repeated by similar classes... is it all consistent?  NO!  \r\n\r\nBy removing temp, I&#39;ll also refactor code into a class with appropriate responsibility, that can be covered 110% by a few simple tests.  \r\n\r\nNo huge fixture to test something trivial  \r\n\r\nIf I call something expensive, I&#39;ll return the result as a value object / aggregate.  The &#39;temp code&#39; should be internalized by the aggregate, probably.  \r\n\r\nSo remove temp pushes you into centralized (singular) responsibility -&gt; SOLID! \r\n","title":"Replace Temp with Query","body":"<p>It's a refactoring that is important as it is a refactoring towards single responsibility, it's a resolution of DRY fail!  </p>\n\n<p>The main problem with temps (esp. in naive code using long methods, hundreds of lines long!) is that they are mutable, local state.  The obvious risk (as discussed by Fowler?) is that someone might make a change mid way down a long method, and break something at the end. (Have seen this cost incurred) </p>\n\n<p>There are no tests, this method has myriad dependencies - what a mess! :)</p>\n\n<p>Remove temp is about refactoring towards single responsibility.</p>\n\n<p>Example - today I found a bug and it relates to passing the <em>wrong temp variable</em> into a service. If I remove temps (there are several, all strings), that bug (oversight) just can't happen.</p>\n\n<p>The reason my method is holding a temp variable is that it's doing work it shouldn't ... and this logic is repeated by similar classes... is it all consistent?  NO!  </p>\n\n<p>By removing temp, I'll also refactor code into a class with appropriate responsibility, that can be covered 110% by a few simple tests.  </p>\n\n<p>No huge fixture to test something trivial  </p>\n\n<p>If I call something expensive, I'll return the result as a value object / aggregate.  The 'temp code' should be internalized by the aggregate, probably.  </p>\n\n<p>So remove temp pushes you into centralized (singular) responsibility -> SOLID! </p>\n"},{"tags":[],"owner":{"account_id":307351,"reputation":23310,"user_id":618598,"accept_rate":76,"display_name":"Bernd Elkemann"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1427452001,"creation_date":1427450852,"answer_id":29298039,"question_id":320946,"body_markdown":"I am re-reading Refactoring right now and one reason is the following quote from the end of `Extract Method` p.116.\r\n\r\nBackground: He describes that it is difficult to `Extract Method` if the code to extract uses local variables.\r\n\r\n&gt; Temporary variables often are so plentiful that they make extraction very awkward. In these cases I try to reduce the temps by using Replace Temp with Query (120). ...\r\n\r\nSo one refactoring might depend on first doing another refactoring which itself is not obvious. Another example is `Inline Method` before Replace `Method with Method Object`.","title":"Replace Temp with Query","body":"<p>I am re-reading Refactoring right now and one reason is the following quote from the end of <code>Extract Method</code> p.116.</p>\n\n<p>Background: He describes that it is difficult to <code>Extract Method</code> if the code to extract uses local variables.</p>\n\n<blockquote>\n  <p>Temporary variables often are so plentiful that they make extraction very awkward. In these cases I try to reduce the temps by using Replace Temp with Query (120). ...</p>\n</blockquote>\n\n<p>So one refactoring might depend on first doing another refactoring which itself is not obvious. Another example is <code>Inline Method</code> before Replace <code>Method with Method Object</code>.</p>\n"},{"tags":[],"owner":{"account_id":2505373,"reputation":229,"user_id":4186357,"display_name":"Sandra"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1679403536,"creation_date":1547383475,"answer_id":54169002,"question_id":320946,"body_markdown":"You (both original asker, and James Curran) are missing that in this particular example, the calculation is not repeated. Either the code goes down one branch of the `if`, and calls `basePrice()`, which performs the calculation. Or the code goes down the other branch of the `if` and the calculation is performed there instead.\r\n\r\nThe multiplication is done regardless, but still only once. Just as in the temp version.\r\n\r\nYes, it&#39;s good to be aware that queries are by default not cached and that temps are inherently a form of caching. In this particular example that distinction doesn&#39;t matter. The advantage of caching (such as temps) is that it can provide CPU cycle savings (not really in this case, as far as the multiplication itself goes, I mean—in terms of calls, stack jumps etc, then sure… depending on the compiler). The disadvantage of caching is that it can give you out of date or wrong data if you are sloppy. That&#39;s in addition to the specific disadvantages with temps that Fowler mentions (that they are local, both temporally and lexically).\r\n\r\nWhat I usually do is that I code in queries most of the time and when I see that I *do* call a particular query multiple times (unlike this example, where it&#39;s in separate conditional branches), I can use a temp if it&#39;s local or introduce memoization or another type of cache system (such as a simple global variable or class member) if I need to access it in a wider, less local scope.\r\n\r\nThat&#39;s when the reverse to this refactoring, &quot;Replace Query with Temp&quot;, comes in handy.","title":"Replace Temp with Query","body":"<p>You (both original asker, and James Curran) are missing that in this particular example, the calculation is not repeated. Either the code goes down one branch of the <code>if</code>, and calls <code>basePrice()</code>, which performs the calculation. Or the code goes down the other branch of the <code>if</code> and the calculation is performed there instead.</p>\n<p>The multiplication is done regardless, but still only once. Just as in the temp version.</p>\n<p>Yes, it's good to be aware that queries are by default not cached and that temps are inherently a form of caching. In this particular example that distinction doesn't matter. The advantage of caching (such as temps) is that it can provide CPU cycle savings (not really in this case, as far as the multiplication itself goes, I mean—in terms of calls, stack jumps etc, then sure… depending on the compiler). The disadvantage of caching is that it can give you out of date or wrong data if you are sloppy. That's in addition to the specific disadvantages with temps that Fowler mentions (that they are local, both temporally and lexically).</p>\n<p>What I usually do is that I code in queries most of the time and when I see that I <em>do</em> call a particular query multiple times (unlike this example, where it's in separate conditional branches), I can use a temp if it's local or introduce memoization or another type of cache system (such as a simple global variable or class member) if I need to access it in a wider, less local scope.</p>\n<p>That's when the reverse to this refactoring, &quot;Replace Query with Temp&quot;, comes in handy.</p>\n"}],"owner":{"display_name":"student"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4294,"favorite_count":0,"down_vote_count":0,"up_vote_count":16,"answer_count":8,"score":16,"last_activity_date":1679403536,"creation_date":1227710931,"question_id":320946,"body_markdown":"The Replace Temp with Query refactoring method is recommended quite widely now but \r\nseems to be very inefficient for very little gain. \r\n\r\nThe method from the Martin Fowler&#39;s site gives the following example:\r\n\r\nExtract the expression into a method. Replace all references to the temp with the expression. The new method can then be used in other methods.\r\n\r\n\t\tdouble basePrice = _quantity * _itemPrice;\r\n\t\tif (basePrice &gt; 1000)\r\n\t\t\treturn basePrice * 0.95;\r\n\t\telse\r\n\t\t\treturn basePrice * 0.98;\r\nbecomes\r\n\r\n\t\tif (basePrice() &gt; 1000)\r\n\t\t\treturn basePrice() * 0.95;\r\n\t\telse\r\n\t\t\treturn basePrice() * 0.98;\r\n\r\n\r\n\tdouble basePrice() {\r\n\t\treturn _quantity * _itemPrice;\r\n\t} \r\n\r\n\r\nWhy is this a good idea? surely it means the calculation is needlessly repeated and you have the overhead of calling a function. I know CPU cycles\r\nare cheap but throwing them away like this seems careless? \r\n\r\nAm I missing something?\r\n\r\n\r\n","title":"Replace Temp with Query","body":"<p>The Replace Temp with Query refactoring method is recommended quite widely now but \nseems to be very inefficient for very little gain. </p>\n\n<p>The method from the Martin Fowler's site gives the following example:</p>\n\n<p>Extract the expression into a method. Replace all references to the temp with the expression. The new method can then be used in other methods.</p>\n\n<pre><code>    double basePrice = _quantity * _itemPrice;\n    if (basePrice &gt; 1000)\n        return basePrice * 0.95;\n    else\n        return basePrice * 0.98;\n</code></pre>\n\n<p>becomes</p>\n\n<pre><code>    if (basePrice() &gt; 1000)\n        return basePrice() * 0.95;\n    else\n        return basePrice() * 0.98;\n\n\ndouble basePrice() {\n    return _quantity * _itemPrice;\n} \n</code></pre>\n\n<p>Why is this a good idea? surely it means the calculation is needlessly repeated and you have the overhead of calling a function. I know CPU cycles\nare cheap but throwing them away like this seems careless? </p>\n\n<p>Am I missing something?</p>\n"},{"tags":["java","spring","spring-boot","consul"],"owner":{"account_id":10467810,"reputation":1,"user_id":7716672,"display_name":"Aman Singh"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":262,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679402959,"creation_date":1679402959,"question_id":75801450,"body_markdown":"While docerizing existing spring boot services, created configuration based profiles for setup. I created a new application-docker.properties to ovveride the existsing properties defined in properties file the files look like the following \r\n\r\n```\r\napplication.properties\r\n\r\n######### Service specific properties #########\r\n### Service Name\r\nspring.application.name=myapp\r\n\r\nspring.cloud.consul.discovery.heartbeat.reregister-service-on-failure=true\r\n\r\nspring.config.import=optional:consul:\r\n\r\n######### Service database properties #########\r\nspring.datasource.testWhileIdle=true\r\nspring.datasource.validationQuery=SELECT 1\r\nspring.datasource.initialization-mode=never\r\nspring.jpa.show-sql=false\r\nspring.jpa.hibernate.ddl-auto=update\r\n\r\n### Disable feature detection by this undocumented parameter.\r\n### Check the org.hibernate.engine.jdbc.internal.JdbcServiceImpl.configure method for more details.\r\nspring.jpa.properties.hibernate.temp.use_jdbc_metadata_defaults=true\r\nspring.jpa.properties.hibernate.jdbc.lob.non_contextual_creation=true\r\nspring.jpa.hibernate.naming-strategy=org.hibernate.cfg.ImprovedNamingStrategy\r\nspring.jpa.properties.hibernate.jdbc.time_zone=UTC\r\n\r\n### Others\r\nspring.main.allow-bean-definition-overriding=true\r\nfeign.client.config.default.connectTimeout=60000\r\nfeign.client.config.default.readTimeout=60000\r\n\r\n### Cache Configuration ###\r\nspring.cache.jcache.config=classpath:ehcache.xml\r\n\r\n```\r\n```\r\n## application-docker.properties:\r\n\r\n######### Service specific properties #########\r\n### Service default port\r\nserver.port=8103\r\n\r\nspring.cloud.consul.host=consul\r\nspring.cloud.consul.port=8600\r\nspring.cloud.consul.discovery.prefer-ip-address=true\r\n\r\n\r\n\r\n######### Configuration for PostgreSQL database #########\r\nspring.datasource.username=postgres\r\nspring.datasource.password=postgresss\r\nspring.datasource.url=jdbc:postgresql://db:5432/postgres\r\nspring.datasource.driver-class-name=org.postgresql.Driver\r\n### Because detection is disabled you have to set correct dialect by hand.\r\nspring.jpa.database-platform=org.hibernate.dialect.PostgreSQL9Dialect\r\n\r\n```\r\n\r\nMy spring service pom looks like \r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n\txmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n\t&lt;groupId&gt;com.myapp&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;myapp&lt;/artifactId&gt;\r\n\t&lt;version&gt;1.1.0&lt;/version&gt;\r\n\t&lt;name&gt;myapp&lt;/name&gt;\r\n\t&lt;description&gt;myapp&lt;/description&gt;\r\n\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;2.5.7&lt;/version&gt;\r\n\t\t&lt;relativePath /&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;10&lt;/java.version&gt;\r\n\t\t&lt;spring-cloud.version&gt;2020.0.4&lt;/spring-cloud.version&gt;\r\n\t\t&lt;springfox.swagger.version&gt;2.9.2&lt;/springfox.swagger.version&gt;\r\n\t\t&lt;sonar.java.coveragePlugin&gt;jacoco&lt;/sonar.java.coveragePlugin&gt;\r\n\t\t&lt;sonar.dynamicAnalysis&gt;reuseReports&lt;/sonar.dynamicAnalysis&gt;\r\n\t\t&lt;sonar.jacoco.reportPaths&gt;${project.basedir}/../target/jacoco.exec&lt;/sonar.jacoco.reportPaths&gt;\r\n\t\t&lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n\t\t&lt;log4j2.version&gt;2.17.1&lt;/log4j2.version&gt;\r\n\t&lt;/properties&gt;\r\n\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t\t&lt;exclusions&gt;\r\n\t\t\t\t&lt;exclusion&gt;\r\n\t\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;spring-boot-starter-logging&lt;/artifactId&gt;\r\n\t\t\t\t&lt;/exclusion&gt;\r\n\t\t\t&lt;/exclusions&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.13.4.2&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\t\r\n\t\t&lt;dependency&gt;\r\n\t\t  &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n\t\t  &lt;artifactId&gt;jackson-core&lt;/artifactId&gt;\r\n\t\t  &lt;version&gt;2.13.3&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-log4j2&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;hibernate-ehcache&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-cache&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;javax.cache&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;cache-api&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.ehcache&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;ehcache&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.opencsv&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;opencsv&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;4.0&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-cloud-starter-consul-config&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-cloud-starter-consul-discovery&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-cloud-starter-openfeign&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-websocket&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t    &lt;groupId&gt;org.junit.vintage&lt;/groupId&gt;\r\n\t\t    &lt;artifactId&gt;junit-vintage-engine&lt;/artifactId&gt;\r\n\t\t    &lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.webjars&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;sockjs-client&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.0.2&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.webjars&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;stomp-websocket&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.3.3&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;javax.xml.bind&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jaxb-api&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.postgresql&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;postgresql&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.oracle.database.jdbc&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;ojdbc8&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;19.16.0.0&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.glassfish.jaxb&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jaxb-runtime&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;io.jsonwebtoken&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jjwt&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;0.9.0&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;io.springfox&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;springfox-swagger2&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${springfox.swagger.version}&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;log4j-api&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;log4j-core&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.h2database&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;h2&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.dom4j&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;dom4j&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.1.3&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.thoughtworks.xstream&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;xstream&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.4.19&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-security-crypto&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;5.2.9.RELEASE&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.modelmapper&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;modelmapper&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.3.5&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;junit&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;4.12&lt;/version&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;dependencyManagement&gt;\r\n\t\t&lt;dependencies&gt;\r\n\t\t\t&lt;dependency&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;${spring-cloud.version}&lt;/version&gt;\r\n\t\t\t\t&lt;type&gt;pom&lt;/type&gt;\r\n\t\t\t\t&lt;scope&gt;import&lt;/scope&gt;\r\n\t\t\t&lt;/dependency&gt;\r\n\t\t&lt;/dependencies&gt;\r\n\t&lt;/dependencyManagement&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;pluginManagement&gt;\r\n\t\t\t&lt;plugins&gt;\r\n\t\t\t\t&lt;plugin&gt;\r\n\t\t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;maven-checkstyle-plugin&lt;/artifactId&gt;\r\n\t\t\t\t\t&lt;version&gt;3.1.1&lt;/version&gt;\r\n\t\t\t\t&lt;/plugin&gt;\r\n\t\t\t&lt;/plugins&gt;\r\n\t\t&lt;/pluginManagement&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;maven-checkstyle-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;3.1.1&lt;/version&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;configLocation&gt;/home/jenkins/.m2/myapp-style.xml&lt;/configLocation&gt;\r\n\t\t\t\t\t&lt;checkstyleXmlOutput&gt;true&lt;/checkstyleXmlOutput&gt;\r\n\t\t\t\t\t&lt;checkstyleXmlOutputDirectory&gt;target&lt;/checkstyleXmlOutputDirectory&gt;\r\n\t\t\t\t\t&lt;xmlOutput&gt;true&lt;/xmlOutput&gt;\r\n\t\t\t\t\t&lt;failsOnError&gt;false&lt;/failsOnError&gt;\r\n\t\t\t\t\t&lt;includeTestSourceDirectory&gt;true&lt;/includeTestSourceDirectory&gt;\r\n\t\t\t\t\t&lt;excludes&gt;**/module-info.java,**/package-info.java&lt;/excludes&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;!-- or whatever version you use --&gt;\r\n\t\t\t\t\t&lt;source&gt;${java.version}&lt;/source&gt;\r\n\t\t\t\t\t&lt;target&gt;${java.version}&lt;/target&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n \t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.owasp&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;dependency-check-maven&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;7.0.3&lt;/version&gt;\r\n\t\t\t\t&lt;executions&gt;\r\n\t\t\t\t\t&lt;execution&gt;\r\n\t\t\t\t\t\t&lt;goals&gt;\r\n\t\t\t\t\t\t\t&lt;goal&gt;aggregate&lt;/goal&gt;\r\n\t\t\t\t\t\t&lt;/goals&gt;\r\n\t\t\t\t\t&lt;/execution&gt;\r\n\t\t\t\t&lt;/executions&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.jacoco&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;jacoco-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;0.8.3&lt;/version&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;destFile&gt;${sonar.jacoco.reportPath}&lt;/destFile&gt;\r\n\t\t\t\t\t&lt;append&gt;true&lt;/append&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t\t&lt;executions&gt;\r\n\t\t\t\t\t&lt;execution&gt;\r\n\t\t\t\t\t\t&lt;goals&gt;\r\n\t\t\t\t\t\t\t&lt;goal&gt;prepare-agent&lt;/goal&gt;\r\n\t\t\t\t\t\t&lt;/goals&gt;\r\n\t\t\t\t\t&lt;/execution&gt;\r\n\t\t\t\t\t&lt;execution&gt;\r\n\t\t\t\t\t\t&lt;id&gt;report&lt;/id&gt;\r\n\t\t\t\t\t\t&lt;phase&gt;test&lt;/phase&gt;\r\n\t\t\t\t\t\t&lt;goals&gt;\r\n\t\t\t\t\t\t\t&lt;goal&gt;report&lt;/goal&gt;\r\n\t\t\t\t\t\t&lt;/goals&gt;\r\n\t\t\t\t\t&lt;/execution&gt;\r\n\t\t\t\t&lt;/executions&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\n\t&lt;reporting&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;maven-checkstyle-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;3.1.1&lt;/version&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/reporting&gt;\r\n\r\n\t\r\n&lt;/project&gt;\r\n```\r\n\r\nI am trying to run the jar with following compose bloak\r\n\r\n```\r\n## docker-compose.yml\r\n\r\n  myapp:\r\n    image: eclipse-temurin:11-jre-alpine\r\n    volumes:\r\n      - ./:/opt/app\r\n      - ../config/auth:/config\r\n    command: java -Dspring.profiles.active=docker -Dspring.config.location=/config -Dlog4j.configurationFile=/config/log4j2.xml -jar /opt/app/myapp-1.1.0.jar\r\n    \r\n    networks:\r\n      - commons-intra\r\n```\r\n\r\n\r\nFiles in `/config` folder are just application.properties and application-docker.properties\r\n\r\nIn ideal condition consul should try to reach for http://consul:8600 for registration but even after the profile being activated but the logs throw the following error\r\n\r\n```\r\n Application run failed\r\norg.springframework.context.ApplicationContextException: Failed to start bean &#39;webServerStartStop&#39;; nested exception is com.ecwid.consul.transport.TransportException: org.apache.http.conn.HttpHostConnectException: Connect to localhost:8500 [localhost/127.0.0.1] failed: Connection refused (Connection refused)\r\n        at org.springframework.context.support.DefaultLifecycleProcessor.doStart(DefaultLifecycleProcessor.java:181) ~[spring-context-5.3.13.jar!/:5.3.13]\r\n        at org.springframework.context.support.DefaultLifecycleProcessor.access$200(DefaultLifecycleProcessor.java:54) ~[spring-context-5.3.13.jar!/:5.3.13]\r\n        at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.start(DefaultLifecycleProcessor.java:356) ~[spring-context-5.3.13.jar!/:5.3.13]\r\n        at java.lang.Iterable.forEach(Unknown Source) ~[?:?]\r\n        at org.springframework.context.support.DefaultLifecycleProcessor.startBeans(DefaultLifecycleProcessor.java:155) ~[spring-context-5.3.13.jar!/:5.3.13]\r\n        at org.springframework.context.support.DefaultLifecycleProcessor.onRefresh(DefaultLifecycleProcessor.java:123) ~[spring-context-5.3.13.jar!/:5.3.13]\r\n        at org.springframework.context.support.AbstractApplicationContext.finishRefresh(AbstractApplicationContext.java:935) ~[spring-context-5.3.13.jar!/:5.3.13]\r\n        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:586) ~[spring-context-5.3.13.jar!/:5.3.13]\r\n        at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:145) ~[spring-boot-2.5.7.jar!/:2.5.7]\r\n        at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:765) [spring-boot-2.5.7.jar!/:2.5.7]\r\n        at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:445) [spring-boot-2.5.7.jar!/:2.5.7]\r\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:338) [spring-boot-2.5.7.jar!/:2.5.7]\r\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:1354) [spring-boot-2.5.7.jar!/:2.5.7]\r\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:1343) [spring-boot-2.5.7.jar!/:2.5.7]\r\n        at com.myapp.myapp.myappAuthApplication.main(myappAuthApplication.java:55) [classes!/:1.1.0]\r\n        at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:?]\r\n        at jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source) ~[?:?]\r\n        at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source) ~[?:?]\r\n        at java.lang.reflect.Method.invoke(Unknown Source) ~[?:?]\r\n        at org.springframework.boot.loader.MainMethodRunner.run(MainMethodRunner.java:49) [myapp-1.1.0.jar:1.1.0]\r\n        at org.springframework.boot.loader.Launcher.launch(Launcher.java:108) [myapp-1.1.0.jar:1.1.0]\r\n        at org.springframework.boot.loader.Launcher.launch(Launcher.java:58) [myapp-1.1.0.jar:1.1.0]\r\n        at org.springframework.boot.loader.JarLauncher.main(JarLauncher.java:88) [myapp-1.1.0.jar:1.1.0]\r\nCaused by: com.ecwid.consul.transport.TransportException: org.apache.http.conn.HttpHostConnectException: Connect to localhost:8500 [localhost/127.0.0.1] failed: Connection refused (Connection refused)\r\n        at com.ecwid.consul.transport.AbstractHttpTransport.executeRequest(AbstractHttpTransport.java:83) ~[consul-api-1.4.5.jar!/:?]\r\n        at com.ecwid.consul.transport.AbstractHttpTransport.makePutRequest(AbstractHttpTransport.java:49) ~[consul-api-1.4.5.jar!/:?]\r\n        at com.ecwid.consul.v1.ConsulRawClient.makePutRequest(ConsulRawClient.java:163) ~[consul-api-1.4.5.jar!/:?]\r\n        at com.ecwid.consul.v1.agent.AgentConsulClient.agentServiceRegister(AgentConsulClient.java:273) ~[consul-api-1.4.5.jar!/:?]\r\n        at com.ecwid.consul.v1.ConsulClient.agentServiceRegister(ConsulClient.java:310) ~[consul-api-1.4.5.jar!/:?]\r\n        at org.springframework.cloud.consul.serviceregistry.ConsulServiceRegistry.register(ConsulServiceRegistry.java:67) ~[spring-cloud-consul-discovery-3.0.4.jar!/:3.0.4]\r\n        at org.springframework.cloud.consul.serviceregistry.ConsulServiceRegistry.register(ConsulServiceRegistry.java:43) ~[spring-cloud-consul-discovery-3.0.4.jar!/:3.0.4]\r\n        at org.springframework.cloud.client.serviceregistry.AbstractAutoServiceRegistration.register(AbstractAutoServiceRegistration.java:232) ~[spring-cloud-commons-3.0.4.jar!/:3.0.4]\r\n        at org.springframework.cloud.consul.serviceregistry.ConsulAutoServiceRegistration.register(ConsulAutoServiceRegistration.java:80) ~[spring-cloud-consul-discovery-3.0.4.jar!/:3.0.4]\r\n        at org.springframework.cloud.client.serviceregistry.AbstractAutoServiceRegistration.start(AbstractAutoServiceRegistration.java:133) ~[spring-cloud-commons-3.0.4.jar!/:3.0.4]\r\n        at org.springframework.cloud.consul.serviceregistry.ConsulAutoServiceRegistration.start(ConsulAutoServiceRegistration.java:70) ~[spring-cloud-consul-discovery-3.0.4.jar!/:3.0.4]\r\n        at org.springframework.cloud.consul.serviceregistry.ConsulAutoServiceRegistrationListener.onApplicationEvent(ConsulAutoServiceRegistrationListener.java:60) ~[spring-cloud-consul-discovery-3.0.4.jar!/:3.0.4]\r\n        at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:176) ~[spring-context-5.3.13.jar!/:5.3.13]\r\n        at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:169) ~[spring-context-5.3.13.jar!/:5.3.13]\r\n        at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:143) ~[spring-context-5.3.13.jar!/:5.3.13]\r\n        at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:421) ~[spring-context-5.3.13.jar!/:5.3.13]\r\n        at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:378) ~[spring-context-5.3.13.jar!/:5.3.13]\r\n        at org.springframework.boot.web.servlet.context.WebServerStartStopLifecycle.start(WebServerStartStopLifecycle.java:46) ~[spring-boot-2.5.7.jar!/:2.5.7]\r\n        at org.springframework.context.support.DefaultLifecycleProcessor.doStart(DefaultLifecycleProcessor.java:178) ~[spring-context-5.3.13.jar!/:5.3.13]\r\n        ... 22 more\r\nCaused by: org.apache.http.conn.HttpHostConnectException: Connect to localhost:8500 [localhost/127.0.0.1] failed: Connection refused (Connection refused)\r\n        at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:156) ~[httpclient-4.5.13.jar!/:4.5.13]\r\n        at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:376) ~[httpclient-4.5.13.jar!/:4.5.13]\r\n        at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:393) ~[httpclient-4.5.13.jar!/:4.5.13]\r\n        at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236) ~[httpclient-4.5.13.jar!/:4.5.13]\r\n        at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186) ~[httpclient-4.5.13.jar!/:4.5.13]\r\n        at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89) ~[httpclient-4.5.13.jar!/:4.5.13]\r\n        at org.apache.http.impl.execchain.RedirectExec.execute(RedirectExec.java:110) ~[httpclient-4.5.13.jar!/:4.5.13]\r\n        at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185) ~[httpclient-4.5.13.jar!/:4.5.13]\r\n        at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:72) ~[httpclient-4.5.13.jar!/:4.5.13]\r\n        at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:221) ~[httpclient-4.5.13.jar!/:4.5.13]\r\n        at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:165) ~[httpclient-4.5.13.jar!/:4.5.13]\r\n        at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:140) ~[httpclient-4.5.13.jar!/:4.5.13]\r\n        at com.ecwid.consul.transport.AbstractHttpTransport.executeRequest(AbstractHttpTransport.java:70) ~[consul-api-1.4.5.jar!/:?]\r\n        at com.ecwid.consul.transport.AbstractHttpTransport.makePutRequest(AbstractHttpTransport.java:49) ~[consul-api-1.4.5.jar!/:?]\r\n        at com.ecwid.consul.v1.ConsulRawClient.makePutRequest(ConsulRawClient.java:163) ~[consul-api-1.4.5.jar!/:?]\r\n        at com.ecwid.consul.v1.agent.AgentConsulClient.agentServiceRegister(AgentConsulClient.java:273) ~[consul-api-1.4.5.jar!/:?]\r\n        at com.ecwid.consul.v1.ConsulClient.agentServiceRegister(ConsulClient.java:310) ~[consul-api-1.4.5.jar!/:?]\r\n        at org.springframework.cloud.consul.serviceregistry.ConsulServiceRegistry.register(ConsulServiceRegistry.java:67) ~[spring-cloud-consul-discovery-3.0.4.jar!/:3.0.4]\r\n        at org.springframework.cloud.consul.serviceregistry.ConsulServiceRegistry.register(ConsulServiceRegistry.java:43) ~[spring-cloud-consul-discovery-3.0.4.jar!/:3.0.4]\r\n        at org.springframework.cloud.client.serviceregistry.AbstractAutoServiceRegistration.register(AbstractAutoServiceRegistration.java:232) ~[spring-cloud-commons-3.0.4.jar!/:3.0.4]\r\n        at org.springframework.cloud.consul.serviceregistry.ConsulAutoServiceRegistration.register(ConsulAutoServiceRegistration.java:80) ~[spring-cloud-consul-discovery-3.0.4.jar!/:3.0.4]\r\n        at org.springframework.cloud.client.serviceregistry.AbstractAutoServiceRegistration.start(AbstractAutoServiceRegistration.java:133) ~[spring-cloud-commons-3.0.4.jar!/:3.0.4]\r\n        at org.springframework.cloud.consul.serviceregistry.ConsulAutoServiceRegistration.start(ConsulAutoServiceRegistration.java:70) ~[spring-cloud-consul-discovery-3.0.4.jar!/:3.0.4]\r\n        at org.springframework.cloud.consul.serviceregistry.ConsulAutoServiceRegistrationListener.onApplicationEvent(ConsulAutoServiceRegistrationListener.java:60) ~[spring-cloud-consul-discovery-3.0.4.jar!/:3.0.4]\r\n        at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:176) ~[spring-context-5.3.13.jar!/:5.3.13]\r\n        at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:169) ~[spring-context-5.3.13.jar!/:5.3.13]\r\n        at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:143) ~[spring-context-5.3.13.jar!/:5.3.13]\r\n        at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:421) ~[spring-context-5.3.13.jar!/:5.3.13]\r\n        at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:378) ~[spring-context-5.3.13.jar!/:5.3.13]\r\n        at org.springframework.boot.web.servlet.context.WebServerStartStopLifecycle.start(WebServerStartStopLifecycle.java:46) ~[spring-boot-2.5.7.jar!/:2.5.7]\r\n        at org.springframework.context.support.DefaultLifecycleProcessor.doStart(DefaultLifecycleProcessor.java:178) ~[spring-context-5.3.13.jar!/:5.3.13]\r\n        ... 22 more\r\nCaused by: java.net.ConnectException: Connection refused (Connection refused)\r\n        at java.net.PlainSocketImpl.socketConnect(Native Method) ~[?:?]\r\n        at java.net.AbstractPlainSocketImpl.doConnect(Unknown Source) ~[?:?]\r\n        at java.net.AbstractPlainSocketImpl.connectToAddress(Unknown Source) ~[?:?]\r\n        at java.net.AbstractPlainSocketImpl.connect(Unknown Source) ~[?:?]\r\n        at java.net.SocksSocketImpl.connect(Unknown Source) ~[?:?]\r\n        at java.net.Socket.connect(Unknown Source) ~[?:?]\r\n        at org.apache.http.conn.socket.PlainConnectionSocketFactory.connectSocket(PlainConnectionSocketFactory.java:75) ~[httpclient-4.5.13.jar!/:4.5.13]\r\n        at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:142) ~[httpclient-4.5.13.jar!/:4.5.13]\r\n        at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:376) ~[httpclient-4.5.13.jar!/:4.5.13]\r\n        at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:393) ~[httpclient-4.5.13.jar!/:4.5.13]\r\n        at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236) ~[httpclient-4.5.13.jar!/:4.5.13]\r\n        at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186) ~[httpclient-4.5.13.jar!/:4.5.13]\r\n        at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89) ~[httpclient-4.5.13.jar!/:4.5.13]\r\n        at org.apache.http.impl.execchain.RedirectExec.execute(RedirectExec.java:110) ~[httpclient-4.5.13.jar!/:4.5.13]\r\n        at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185) ~[httpclient-4.5.13.jar!/:4.5.13]\r\n        at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:72) ~[httpclient-4.5.13.jar!/:4.5.13]\r\n        at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:221) ~[httpclient-4.5.13.jar!/:4.5.13]\r\n        at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:165) ~[httpclient-4.5.13.jar!/:4.5.13]\r\n        at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:140) ~[httpclient-4.5.13.jar!/:4.5.13]\r\n        at com.ecwid.consul.transport.AbstractHttpTransport.executeRequest(AbstractHttpTransport.java:70) ~[consul-api-1.4.5.jar!/:?]\r\n        at com.ecwid.consul.transport.AbstractHttpTransport.makePutRequest(AbstractHttpTransport.java:49) ~[consul-api-1.4.5.jar!/:?]\r\n        at com.ecwid.consul.v1.ConsulRawClient.makePutRequest(ConsulRawClient.java:163) ~[consul-api-1.4.5.jar!/:?]\r\n        at com.ecwid.consul.v1.agent.AgentConsulClient.agentServiceRegister(AgentConsulClient.java:273) ~[consul-api-1.4.5.jar!/:?]\r\n        at com.ecwid.consul.v1.ConsulClient.agentServiceRegister(ConsulClient.java:310) ~[consul-api-1.4.5.jar!/:?]\r\n        at org.springframework.cloud.consul.serviceregistry.ConsulServiceRegistry.register(ConsulServiceRegistry.java:67) ~[spring-cloud-consul-discovery-3.0.4.jar!/:3.0.4]\r\n        at org.springframework.cloud.consul.serviceregistry.ConsulServiceRegistry.register(ConsulServiceRegistry.java:43) ~[spring-cloud-consul-discovery-3.0.4.jar!/:3.0.4]\r\n        at org.springframework.cloud.client.serviceregistry.AbstractAutoServiceRegistration.register(AbstractAutoServiceRegistration.java:232) ~[spring-cloud-commons-3.0.4.jar!/:3.0.4]\r\n        at org.springframework.cloud.consul.serviceregistry.ConsulAutoServiceRegistration.register(ConsulAutoServiceRegistration.java:80) ~[spring-cloud-consul-discovery-3.0.4.jar!/:3.0.4]\r\n        at org.springframework.cloud.client.serviceregistry.AbstractAutoServiceRegistration.start(AbstractAutoServiceRegistration.java:133) ~[spring-cloud-commons-3.0.4.jar!/:3.0.4]\r\n        at org.springframework.cloud.consul.serviceregistry.ConsulAutoServiceRegistration.start(ConsulAutoServiceRegistration.java:70) ~[spring-cloud-consul-discovery-3.0.4.jar!/:3.0.4]\r\n        at org.springframework.cloud.consul.serviceregistry.ConsulAutoServiceRegistrationListener.onApplicationEvent(ConsulAutoServiceRegistrationListener.java:60) ~[spring-cloud-consul-discovery-3.0.4.jar!/:3.0.4]\r\n        at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:176) ~[spring-context-5.3.13.jar!/:5.3.13]\r\n        at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:169) ~[spring-context-5.3.13.jar!/:5.3.13]\r\n        at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:143) ~[spring-context-5.3.13.jar!/:5.3.13]\r\n        at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:421) ~[spring-context-5.3.13.jar!/:5.3.13]\r\n        at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:378) ~[spring-context-5.3.13.jar!/:5.3.13]\r\n        at org.springframework.boot.web.servlet.context.WebServerStartStopLifecycle.start(WebServerStartStopLifecycle.java:46) ~[spring-boot-2.5.7.jar!/:2.5.7]\r\n        at org.springframework.context.support.DefaultLifecycleProcessor.doStart(DefaultLifecycleProcessor.java:178) ~[spring-context-5.3.13.jar!/:5.3.13]\r\n        ... 22 more\r\n\r\n```\r\n\r\nBut if i start the application with passing the consul port and host via command they are honoured \r\n\r\n```\r\ncommand: java -Dspring.profiles.active=docker -Dspring.config.location=/config -Dlog4j.configurationFile=/config/log4j2.xml -Dspring.cloud.consul.host=consul -Dspring.cloud.consul.discovery.prefer-ip-address=true -jar /opt/app/myapp-1.1.0.jar\r\n```\r\n\r\nI really want to understand what is going wrong here, went through the documentation and did everything right but still the properties don&#39;t get overridden with profiles for consul?\r\n\r\n\r\n\r\n\r\n\r\n\r\nTrying to understand how sourcing of the properties in multiple profile environment works and working with externalized configuration for spring?","title":"Spring Consul ignores spring profile based specific properties","body":"<p>While docerizing existing spring boot services, created configuration based profiles for setup. I created a new application-docker.properties to ovveride the existsing properties defined in properties file the files look like the following</p>\n<pre><code>application.properties\n\n######### Service specific properties #########\n### Service Name\nspring.application.name=myapp\n\nspring.cloud.consul.discovery.heartbeat.reregister-service-on-failure=true\n\nspring.config.import=optional:consul:\n\n######### Service database properties #########\nspring.datasource.testWhileIdle=true\nspring.datasource.validationQuery=SELECT 1\nspring.datasource.initialization-mode=never\nspring.jpa.show-sql=false\nspring.jpa.hibernate.ddl-auto=update\n\n### Disable feature detection by this undocumented parameter.\n### Check the org.hibernate.engine.jdbc.internal.JdbcServiceImpl.configure method for more details.\nspring.jpa.properties.hibernate.temp.use_jdbc_metadata_defaults=true\nspring.jpa.properties.hibernate.jdbc.lob.non_contextual_creation=true\nspring.jpa.hibernate.naming-strategy=org.hibernate.cfg.ImprovedNamingStrategy\nspring.jpa.properties.hibernate.jdbc.time_zone=UTC\n\n### Others\nspring.main.allow-bean-definition-overriding=true\nfeign.client.config.default.connectTimeout=60000\nfeign.client.config.default.readTimeout=60000\n\n### Cache Configuration ###\nspring.cache.jcache.config=classpath:ehcache.xml\n\n</code></pre>\n<pre><code>## application-docker.properties:\n\n######### Service specific properties #########\n### Service default port\nserver.port=8103\n\nspring.cloud.consul.host=consul\nspring.cloud.consul.port=8600\nspring.cloud.consul.discovery.prefer-ip-address=true\n\n\n\n######### Configuration for PostgreSQL database #########\nspring.datasource.username=postgres\nspring.datasource.password=postgresss\nspring.datasource.url=jdbc:postgresql://db:5432/postgres\nspring.datasource.driver-class-name=org.postgresql.Driver\n### Because detection is disabled you have to set correct dialect by hand.\nspring.jpa.database-platform=org.hibernate.dialect.PostgreSQL9Dialect\n\n</code></pre>\n<p>My spring service pom looks like</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;com.myapp&lt;/groupId&gt;\n    &lt;artifactId&gt;myapp&lt;/artifactId&gt;\n    &lt;version&gt;1.1.0&lt;/version&gt;\n    &lt;name&gt;myapp&lt;/name&gt;\n    &lt;description&gt;myapp&lt;/description&gt;\n\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.5.7&lt;/version&gt;\n        &lt;relativePath /&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n\n    &lt;properties&gt;\n        &lt;java.version&gt;10&lt;/java.version&gt;\n        &lt;spring-cloud.version&gt;2020.0.4&lt;/spring-cloud.version&gt;\n        &lt;springfox.swagger.version&gt;2.9.2&lt;/springfox.swagger.version&gt;\n        &lt;sonar.java.coveragePlugin&gt;jacoco&lt;/sonar.java.coveragePlugin&gt;\n        &lt;sonar.dynamicAnalysis&gt;reuseReports&lt;/sonar.dynamicAnalysis&gt;\n        &lt;sonar.jacoco.reportPaths&gt;${project.basedir}/../target/jacoco.exec&lt;/sonar.jacoco.reportPaths&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;log4j2.version&gt;2.17.1&lt;/log4j2.version&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                    &lt;artifactId&gt;spring-boot-starter-logging&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n            &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\n            &lt;version&gt;2.13.4.2&lt;/version&gt;\n        &lt;/dependency&gt;   \n        &lt;dependency&gt;\n          &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n          &lt;artifactId&gt;jackson-core&lt;/artifactId&gt;\n          &lt;version&gt;2.13.3&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-log4j2&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n            &lt;artifactId&gt;hibernate-ehcache&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-cache&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.cache&lt;/groupId&gt;\n            &lt;artifactId&gt;cache-api&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.ehcache&lt;/groupId&gt;\n            &lt;artifactId&gt;ehcache&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.opencsv&lt;/groupId&gt;\n            &lt;artifactId&gt;opencsv&lt;/artifactId&gt;\n            &lt;version&gt;4.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-cloud-starter-consul-config&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-cloud-starter-consul-discovery&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-cloud-starter-openfeign&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-websocket&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.junit.vintage&lt;/groupId&gt;\n            &lt;artifactId&gt;junit-vintage-engine&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.webjars&lt;/groupId&gt;\n            &lt;artifactId&gt;sockjs-client&lt;/artifactId&gt;\n            &lt;version&gt;1.0.2&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.webjars&lt;/groupId&gt;\n            &lt;artifactId&gt;stomp-websocket&lt;/artifactId&gt;\n            &lt;version&gt;2.3.3&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.xml.bind&lt;/groupId&gt;\n            &lt;artifactId&gt;jaxb-api&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\n            &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.oracle.database.jdbc&lt;/groupId&gt;\n            &lt;artifactId&gt;ojdbc8&lt;/artifactId&gt;\n            &lt;version&gt;19.16.0.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.glassfish.jaxb&lt;/groupId&gt;\n            &lt;artifactId&gt;jaxb-runtime&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.jsonwebtoken&lt;/groupId&gt;\n            &lt;artifactId&gt;jjwt&lt;/artifactId&gt;\n            &lt;version&gt;0.9.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.springfox&lt;/groupId&gt;\n            &lt;artifactId&gt;springfox-swagger2&lt;/artifactId&gt;\n            &lt;version&gt;${springfox.swagger.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n            &lt;artifactId&gt;log4j-api&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n            &lt;artifactId&gt;log4j-core&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.h2database&lt;/groupId&gt;\n            &lt;artifactId&gt;h2&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.dom4j&lt;/groupId&gt;\n            &lt;artifactId&gt;dom4j&lt;/artifactId&gt;\n            &lt;version&gt;2.1.3&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.thoughtworks.xstream&lt;/groupId&gt;\n            &lt;artifactId&gt;xstream&lt;/artifactId&gt;\n            &lt;version&gt;1.4.19&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-security-crypto&lt;/artifactId&gt;\n            &lt;version&gt;5.2.9.RELEASE&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.modelmapper&lt;/groupId&gt;\n            &lt;artifactId&gt;modelmapper&lt;/artifactId&gt;\n            &lt;version&gt;2.3.5&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;junit&lt;/groupId&gt;\n            &lt;artifactId&gt;junit&lt;/artifactId&gt;\n            &lt;version&gt;4.12&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;dependencyManagement&gt;\n        &lt;dependencies&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt;\n                &lt;version&gt;${spring-cloud.version}&lt;/version&gt;\n                &lt;type&gt;pom&lt;/type&gt;\n                &lt;scope&gt;import&lt;/scope&gt;\n            &lt;/dependency&gt;\n        &lt;/dependencies&gt;\n    &lt;/dependencyManagement&gt;\n\n    &lt;build&gt;\n        &lt;pluginManagement&gt;\n            &lt;plugins&gt;\n                &lt;plugin&gt;\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                    &lt;artifactId&gt;maven-checkstyle-plugin&lt;/artifactId&gt;\n                    &lt;version&gt;3.1.1&lt;/version&gt;\n                &lt;/plugin&gt;\n            &lt;/plugins&gt;\n        &lt;/pluginManagement&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-checkstyle-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.1.1&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;configLocation&gt;/home/jenkins/.m2/myapp-style.xml&lt;/configLocation&gt;\n                    &lt;checkstyleXmlOutput&gt;true&lt;/checkstyleXmlOutput&gt;\n                    &lt;checkstyleXmlOutputDirectory&gt;target&lt;/checkstyleXmlOutputDirectory&gt;\n                    &lt;xmlOutput&gt;true&lt;/xmlOutput&gt;\n                    &lt;failsOnError&gt;false&lt;/failsOnError&gt;\n                    &lt;includeTestSourceDirectory&gt;true&lt;/includeTestSourceDirectory&gt;\n                    &lt;excludes&gt;**/module-info.java,**/package-info.java&lt;/excludes&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;!-- or whatever version you use --&gt;\n                    &lt;source&gt;${java.version}&lt;/source&gt;\n                    &lt;target&gt;${java.version}&lt;/target&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.owasp&lt;/groupId&gt;\n                &lt;artifactId&gt;dependency-check-maven&lt;/artifactId&gt;\n                &lt;version&gt;7.0.3&lt;/version&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;aggregate&lt;/goal&gt;\n                        &lt;/goals&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.jacoco&lt;/groupId&gt;\n                &lt;artifactId&gt;jacoco-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;0.8.3&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;destFile&gt;${sonar.jacoco.reportPath}&lt;/destFile&gt;\n                    &lt;append&gt;true&lt;/append&gt;\n                &lt;/configuration&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;prepare-agent&lt;/goal&gt;\n                        &lt;/goals&gt;\n                    &lt;/execution&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;report&lt;/id&gt;\n                        &lt;phase&gt;test&lt;/phase&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;report&lt;/goal&gt;\n                        &lt;/goals&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n    &lt;reporting&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-checkstyle-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.1.1&lt;/version&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/reporting&gt;\n\n    \n&lt;/project&gt;\n</code></pre>\n<p>I am trying to run the jar with following compose bloak</p>\n<pre><code>## docker-compose.yml\n\n  myapp:\n    image: eclipse-temurin:11-jre-alpine\n    volumes:\n      - ./:/opt/app\n      - ../config/auth:/config\n    command: java -Dspring.profiles.active=docker -Dspring.config.location=/config -Dlog4j.configurationFile=/config/log4j2.xml -jar /opt/app/myapp-1.1.0.jar\n    \n    networks:\n      - commons-intra\n</code></pre>\n<p>Files in <code>/config</code> folder are just application.properties and application-docker.properties</p>\n<p>In ideal condition consul should try to reach for http://consul:8600 for registration but even after the profile being activated but the logs throw the following error</p>\n<pre><code> Application run failed\norg.springframework.context.ApplicationContextException: Failed to start bean 'webServerStartStop'; nested exception is com.ecwid.consul.transport.TransportException: org.apache.http.conn.HttpHostConnectException: Connect to localhost:8500 [localhost/127.0.0.1] failed: Connection refused (Connection refused)\n        at org.springframework.context.support.DefaultLifecycleProcessor.doStart(DefaultLifecycleProcessor.java:181) ~[spring-context-5.3.13.jar!/:5.3.13]\n        at org.springframework.context.support.DefaultLifecycleProcessor.access$200(DefaultLifecycleProcessor.java:54) ~[spring-context-5.3.13.jar!/:5.3.13]\n        at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.start(DefaultLifecycleProcessor.java:356) ~[spring-context-5.3.13.jar!/:5.3.13]\n        at java.lang.Iterable.forEach(Unknown Source) ~[?:?]\n        at org.springframework.context.support.DefaultLifecycleProcessor.startBeans(DefaultLifecycleProcessor.java:155) ~[spring-context-5.3.13.jar!/:5.3.13]\n        at org.springframework.context.support.DefaultLifecycleProcessor.onRefresh(DefaultLifecycleProcessor.java:123) ~[spring-context-5.3.13.jar!/:5.3.13]\n        at org.springframework.context.support.AbstractApplicationContext.finishRefresh(AbstractApplicationContext.java:935) ~[spring-context-5.3.13.jar!/:5.3.13]\n        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:586) ~[spring-context-5.3.13.jar!/:5.3.13]\n        at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:145) ~[spring-boot-2.5.7.jar!/:2.5.7]\n        at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:765) [spring-boot-2.5.7.jar!/:2.5.7]\n        at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:445) [spring-boot-2.5.7.jar!/:2.5.7]\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:338) [spring-boot-2.5.7.jar!/:2.5.7]\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:1354) [spring-boot-2.5.7.jar!/:2.5.7]\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:1343) [spring-boot-2.5.7.jar!/:2.5.7]\n        at com.myapp.myapp.myappAuthApplication.main(myappAuthApplication.java:55) [classes!/:1.1.0]\n        at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:?]\n        at jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source) ~[?:?]\n        at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source) ~[?:?]\n        at java.lang.reflect.Method.invoke(Unknown Source) ~[?:?]\n        at org.springframework.boot.loader.MainMethodRunner.run(MainMethodRunner.java:49) [myapp-1.1.0.jar:1.1.0]\n        at org.springframework.boot.loader.Launcher.launch(Launcher.java:108) [myapp-1.1.0.jar:1.1.0]\n        at org.springframework.boot.loader.Launcher.launch(Launcher.java:58) [myapp-1.1.0.jar:1.1.0]\n        at org.springframework.boot.loader.JarLauncher.main(JarLauncher.java:88) [myapp-1.1.0.jar:1.1.0]\nCaused by: com.ecwid.consul.transport.TransportException: org.apache.http.conn.HttpHostConnectException: Connect to localhost:8500 [localhost/127.0.0.1] failed: Connection refused (Connection refused)\n        at com.ecwid.consul.transport.AbstractHttpTransport.executeRequest(AbstractHttpTransport.java:83) ~[consul-api-1.4.5.jar!/:?]\n        at com.ecwid.consul.transport.AbstractHttpTransport.makePutRequest(AbstractHttpTransport.java:49) ~[consul-api-1.4.5.jar!/:?]\n        at com.ecwid.consul.v1.ConsulRawClient.makePutRequest(ConsulRawClient.java:163) ~[consul-api-1.4.5.jar!/:?]\n        at com.ecwid.consul.v1.agent.AgentConsulClient.agentServiceRegister(AgentConsulClient.java:273) ~[consul-api-1.4.5.jar!/:?]\n        at com.ecwid.consul.v1.ConsulClient.agentServiceRegister(ConsulClient.java:310) ~[consul-api-1.4.5.jar!/:?]\n        at org.springframework.cloud.consul.serviceregistry.ConsulServiceRegistry.register(ConsulServiceRegistry.java:67) ~[spring-cloud-consul-discovery-3.0.4.jar!/:3.0.4]\n        at org.springframework.cloud.consul.serviceregistry.ConsulServiceRegistry.register(ConsulServiceRegistry.java:43) ~[spring-cloud-consul-discovery-3.0.4.jar!/:3.0.4]\n        at org.springframework.cloud.client.serviceregistry.AbstractAutoServiceRegistration.register(AbstractAutoServiceRegistration.java:232) ~[spring-cloud-commons-3.0.4.jar!/:3.0.4]\n        at org.springframework.cloud.consul.serviceregistry.ConsulAutoServiceRegistration.register(ConsulAutoServiceRegistration.java:80) ~[spring-cloud-consul-discovery-3.0.4.jar!/:3.0.4]\n        at org.springframework.cloud.client.serviceregistry.AbstractAutoServiceRegistration.start(AbstractAutoServiceRegistration.java:133) ~[spring-cloud-commons-3.0.4.jar!/:3.0.4]\n        at org.springframework.cloud.consul.serviceregistry.ConsulAutoServiceRegistration.start(ConsulAutoServiceRegistration.java:70) ~[spring-cloud-consul-discovery-3.0.4.jar!/:3.0.4]\n        at org.springframework.cloud.consul.serviceregistry.ConsulAutoServiceRegistrationListener.onApplicationEvent(ConsulAutoServiceRegistrationListener.java:60) ~[spring-cloud-consul-discovery-3.0.4.jar!/:3.0.4]\n        at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:176) ~[spring-context-5.3.13.jar!/:5.3.13]\n        at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:169) ~[spring-context-5.3.13.jar!/:5.3.13]\n        at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:143) ~[spring-context-5.3.13.jar!/:5.3.13]\n        at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:421) ~[spring-context-5.3.13.jar!/:5.3.13]\n        at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:378) ~[spring-context-5.3.13.jar!/:5.3.13]\n        at org.springframework.boot.web.servlet.context.WebServerStartStopLifecycle.start(WebServerStartStopLifecycle.java:46) ~[spring-boot-2.5.7.jar!/:2.5.7]\n        at org.springframework.context.support.DefaultLifecycleProcessor.doStart(DefaultLifecycleProcessor.java:178) ~[spring-context-5.3.13.jar!/:5.3.13]\n        ... 22 more\nCaused by: org.apache.http.conn.HttpHostConnectException: Connect to localhost:8500 [localhost/127.0.0.1] failed: Connection refused (Connection refused)\n        at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:156) ~[httpclient-4.5.13.jar!/:4.5.13]\n        at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:376) ~[httpclient-4.5.13.jar!/:4.5.13]\n        at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:393) ~[httpclient-4.5.13.jar!/:4.5.13]\n        at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236) ~[httpclient-4.5.13.jar!/:4.5.13]\n        at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186) ~[httpclient-4.5.13.jar!/:4.5.13]\n        at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89) ~[httpclient-4.5.13.jar!/:4.5.13]\n        at org.apache.http.impl.execchain.RedirectExec.execute(RedirectExec.java:110) ~[httpclient-4.5.13.jar!/:4.5.13]\n        at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185) ~[httpclient-4.5.13.jar!/:4.5.13]\n        at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:72) ~[httpclient-4.5.13.jar!/:4.5.13]\n        at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:221) ~[httpclient-4.5.13.jar!/:4.5.13]\n        at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:165) ~[httpclient-4.5.13.jar!/:4.5.13]\n        at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:140) ~[httpclient-4.5.13.jar!/:4.5.13]\n        at com.ecwid.consul.transport.AbstractHttpTransport.executeRequest(AbstractHttpTransport.java:70) ~[consul-api-1.4.5.jar!/:?]\n        at com.ecwid.consul.transport.AbstractHttpTransport.makePutRequest(AbstractHttpTransport.java:49) ~[consul-api-1.4.5.jar!/:?]\n        at com.ecwid.consul.v1.ConsulRawClient.makePutRequest(ConsulRawClient.java:163) ~[consul-api-1.4.5.jar!/:?]\n        at com.ecwid.consul.v1.agent.AgentConsulClient.agentServiceRegister(AgentConsulClient.java:273) ~[consul-api-1.4.5.jar!/:?]\n        at com.ecwid.consul.v1.ConsulClient.agentServiceRegister(ConsulClient.java:310) ~[consul-api-1.4.5.jar!/:?]\n        at org.springframework.cloud.consul.serviceregistry.ConsulServiceRegistry.register(ConsulServiceRegistry.java:67) ~[spring-cloud-consul-discovery-3.0.4.jar!/:3.0.4]\n        at org.springframework.cloud.consul.serviceregistry.ConsulServiceRegistry.register(ConsulServiceRegistry.java:43) ~[spring-cloud-consul-discovery-3.0.4.jar!/:3.0.4]\n        at org.springframework.cloud.client.serviceregistry.AbstractAutoServiceRegistration.register(AbstractAutoServiceRegistration.java:232) ~[spring-cloud-commons-3.0.4.jar!/:3.0.4]\n        at org.springframework.cloud.consul.serviceregistry.ConsulAutoServiceRegistration.register(ConsulAutoServiceRegistration.java:80) ~[spring-cloud-consul-discovery-3.0.4.jar!/:3.0.4]\n        at org.springframework.cloud.client.serviceregistry.AbstractAutoServiceRegistration.start(AbstractAutoServiceRegistration.java:133) ~[spring-cloud-commons-3.0.4.jar!/:3.0.4]\n        at org.springframework.cloud.consul.serviceregistry.ConsulAutoServiceRegistration.start(ConsulAutoServiceRegistration.java:70) ~[spring-cloud-consul-discovery-3.0.4.jar!/:3.0.4]\n        at org.springframework.cloud.consul.serviceregistry.ConsulAutoServiceRegistrationListener.onApplicationEvent(ConsulAutoServiceRegistrationListener.java:60) ~[spring-cloud-consul-discovery-3.0.4.jar!/:3.0.4]\n        at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:176) ~[spring-context-5.3.13.jar!/:5.3.13]\n        at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:169) ~[spring-context-5.3.13.jar!/:5.3.13]\n        at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:143) ~[spring-context-5.3.13.jar!/:5.3.13]\n        at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:421) ~[spring-context-5.3.13.jar!/:5.3.13]\n        at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:378) ~[spring-context-5.3.13.jar!/:5.3.13]\n        at org.springframework.boot.web.servlet.context.WebServerStartStopLifecycle.start(WebServerStartStopLifecycle.java:46) ~[spring-boot-2.5.7.jar!/:2.5.7]\n        at org.springframework.context.support.DefaultLifecycleProcessor.doStart(DefaultLifecycleProcessor.java:178) ~[spring-context-5.3.13.jar!/:5.3.13]\n        ... 22 more\nCaused by: java.net.ConnectException: Connection refused (Connection refused)\n        at java.net.PlainSocketImpl.socketConnect(Native Method) ~[?:?]\n        at java.net.AbstractPlainSocketImpl.doConnect(Unknown Source) ~[?:?]\n        at java.net.AbstractPlainSocketImpl.connectToAddress(Unknown Source) ~[?:?]\n        at java.net.AbstractPlainSocketImpl.connect(Unknown Source) ~[?:?]\n        at java.net.SocksSocketImpl.connect(Unknown Source) ~[?:?]\n        at java.net.Socket.connect(Unknown Source) ~[?:?]\n        at org.apache.http.conn.socket.PlainConnectionSocketFactory.connectSocket(PlainConnectionSocketFactory.java:75) ~[httpclient-4.5.13.jar!/:4.5.13]\n        at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:142) ~[httpclient-4.5.13.jar!/:4.5.13]\n        at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:376) ~[httpclient-4.5.13.jar!/:4.5.13]\n        at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:393) ~[httpclient-4.5.13.jar!/:4.5.13]\n        at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236) ~[httpclient-4.5.13.jar!/:4.5.13]\n        at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186) ~[httpclient-4.5.13.jar!/:4.5.13]\n        at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89) ~[httpclient-4.5.13.jar!/:4.5.13]\n        at org.apache.http.impl.execchain.RedirectExec.execute(RedirectExec.java:110) ~[httpclient-4.5.13.jar!/:4.5.13]\n        at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185) ~[httpclient-4.5.13.jar!/:4.5.13]\n        at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:72) ~[httpclient-4.5.13.jar!/:4.5.13]\n        at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:221) ~[httpclient-4.5.13.jar!/:4.5.13]\n        at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:165) ~[httpclient-4.5.13.jar!/:4.5.13]\n        at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:140) ~[httpclient-4.5.13.jar!/:4.5.13]\n        at com.ecwid.consul.transport.AbstractHttpTransport.executeRequest(AbstractHttpTransport.java:70) ~[consul-api-1.4.5.jar!/:?]\n        at com.ecwid.consul.transport.AbstractHttpTransport.makePutRequest(AbstractHttpTransport.java:49) ~[consul-api-1.4.5.jar!/:?]\n        at com.ecwid.consul.v1.ConsulRawClient.makePutRequest(ConsulRawClient.java:163) ~[consul-api-1.4.5.jar!/:?]\n        at com.ecwid.consul.v1.agent.AgentConsulClient.agentServiceRegister(AgentConsulClient.java:273) ~[consul-api-1.4.5.jar!/:?]\n        at com.ecwid.consul.v1.ConsulClient.agentServiceRegister(ConsulClient.java:310) ~[consul-api-1.4.5.jar!/:?]\n        at org.springframework.cloud.consul.serviceregistry.ConsulServiceRegistry.register(ConsulServiceRegistry.java:67) ~[spring-cloud-consul-discovery-3.0.4.jar!/:3.0.4]\n        at org.springframework.cloud.consul.serviceregistry.ConsulServiceRegistry.register(ConsulServiceRegistry.java:43) ~[spring-cloud-consul-discovery-3.0.4.jar!/:3.0.4]\n        at org.springframework.cloud.client.serviceregistry.AbstractAutoServiceRegistration.register(AbstractAutoServiceRegistration.java:232) ~[spring-cloud-commons-3.0.4.jar!/:3.0.4]\n        at org.springframework.cloud.consul.serviceregistry.ConsulAutoServiceRegistration.register(ConsulAutoServiceRegistration.java:80) ~[spring-cloud-consul-discovery-3.0.4.jar!/:3.0.4]\n        at org.springframework.cloud.client.serviceregistry.AbstractAutoServiceRegistration.start(AbstractAutoServiceRegistration.java:133) ~[spring-cloud-commons-3.0.4.jar!/:3.0.4]\n        at org.springframework.cloud.consul.serviceregistry.ConsulAutoServiceRegistration.start(ConsulAutoServiceRegistration.java:70) ~[spring-cloud-consul-discovery-3.0.4.jar!/:3.0.4]\n        at org.springframework.cloud.consul.serviceregistry.ConsulAutoServiceRegistrationListener.onApplicationEvent(ConsulAutoServiceRegistrationListener.java:60) ~[spring-cloud-consul-discovery-3.0.4.jar!/:3.0.4]\n        at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:176) ~[spring-context-5.3.13.jar!/:5.3.13]\n        at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:169) ~[spring-context-5.3.13.jar!/:5.3.13]\n        at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:143) ~[spring-context-5.3.13.jar!/:5.3.13]\n        at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:421) ~[spring-context-5.3.13.jar!/:5.3.13]\n        at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:378) ~[spring-context-5.3.13.jar!/:5.3.13]\n        at org.springframework.boot.web.servlet.context.WebServerStartStopLifecycle.start(WebServerStartStopLifecycle.java:46) ~[spring-boot-2.5.7.jar!/:2.5.7]\n        at org.springframework.context.support.DefaultLifecycleProcessor.doStart(DefaultLifecycleProcessor.java:178) ~[spring-context-5.3.13.jar!/:5.3.13]\n        ... 22 more\n\n</code></pre>\n<p>But if i start the application with passing the consul port and host via command they are honoured</p>\n<pre><code>command: java -Dspring.profiles.active=docker -Dspring.config.location=/config -Dlog4j.configurationFile=/config/log4j2.xml -Dspring.cloud.consul.host=consul -Dspring.cloud.consul.discovery.prefer-ip-address=true -jar /opt/app/myapp-1.1.0.jar\n</code></pre>\n<p>I really want to understand what is going wrong here, went through the documentation and did everything right but still the properties don't get overridden with profiles for consul?</p>\n<p>Trying to understand how sourcing of the properties in multiple profile environment works and working with externalized configuration for spring?</p>\n"},{"tags":["java","date","datetime","time","timestamp"],"comments":[{"owner":{"account_id":12743722,"reputation":19956,"user_id":12567365,"display_name":"andrewJames"},"score":0,"creation_date":1679405768,"post_id":75801253,"comment_id":133713205,"body_markdown":"Some related questions &amp; answers: [What&#39;s the difference between Instant and LocalDateTime?](https://stackoverflow.com/q/32437550/12567365), and [Java Best Practice for Date Manipulation/Storage for Geographically Diverse Users](https://stackoverflow.com/q/40075780/12567365).","body":"Some related questions &amp; answers: <a href=\"https://stackoverflow.com/q/32437550/12567365\">What&#39;s the difference between Instant and LocalDateTime?</a>, and <a href=\"https://stackoverflow.com/q/40075780/12567365\">Java Best Practice for Date Manipulation/Storage for Geographically Diverse Users</a>."},{"owner":{"account_id":444292,"reputation":1,"user_id":836018,"accept_rate":57,"display_name":"Jack"},"score":0,"creation_date":1679406569,"post_id":75801253,"comment_id":133713469,"body_markdown":"@andrewJames Thanks for info, actually I read the first one before and just needed to be clarified about some points.","body":"@andrewJames Thanks for info, actually I read the first one before and just needed to be clarified about some points."},{"owner":{"account_id":444292,"reputation":1,"user_id":836018,"accept_rate":57,"display_name":"Jack"},"score":0,"creation_date":1679406631,"post_id":75801253,"comment_id":133713496,"body_markdown":"@andrewJames On the other hand, is it a good practice to name Instant field as `timeStamp`  for transaction dateTime? Or should I use `date` for the instant field? Any idea?","body":"@andrewJames On the other hand, is it a good practice to name Instant field as <code>timeStamp</code>  for transaction dateTime? Or should I use <code>date</code> for the instant field? Any idea?"}],"answers":[{"tags":[],"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1679402929,"creation_date":1679402683,"answer_id":75801399,"question_id":75801253,"body_markdown":"&gt; With this approach, I can keep transaction time as a timestamp + solve time zone problem. Is that a true approach?\r\n\r\nIf you have a look at the JavaDoc on `Instant` you&#39;ll see that this class indeed represents a single universal point in time with 0 being 12am Jan 1st 1970 UTC. Any point in time can be converted to a localized representation for a certain time zone - the question just will be which time zone it should be. \r\n\r\n&gt; The second issue id that, do I need to keep another variable for displaying the transaction time properly? Or, is it ok to keep the time as timestamp (java.time.Instant) and display by formatting it when needed.\r\n\r\nIf you&#39;re ok with using the user&#39;s own time zone, e.g. someone in the US might see a different time (and even date) than someone in Australia, then you don&#39;t need to store anything in addition. Just convert the instant to a `ZonedDateTime` e.g. via `ZonedDateTime.ofInstant(theInstant, theUsersTimeZone)` or directly use `DateTimeFormatter`.\r\n\r\nIf, however, you need to represent the instant in the form the user causing the transaction saw it, i.e. you need to know whether it was 1pm EST or 1pm CET etc., then you should store the original time zone as well and use that in the conversion.\r\n\r\nSo what this comes down to is basically a business decision rather than a technical issue: Do your users or your application need to know the time zone the transaction was placed in? ","title":"Is java.time.Instant enough to keep data with time and timestamp?","body":"<blockquote>\n<p>With this approach, I can keep transaction time as a timestamp + solve time zone problem. Is that a true approach?</p>\n</blockquote>\n<p>If you have a look at the JavaDoc on <code>Instant</code> you'll see that this class indeed represents a single universal point in time with 0 being 12am Jan 1st 1970 UTC. Any point in time can be converted to a localized representation for a certain time zone - the question just will be which time zone it should be.</p>\n<blockquote>\n<p>The second issue id that, do I need to keep another variable for displaying the transaction time properly? Or, is it ok to keep the time as timestamp (java.time.Instant) and display by formatting it when needed.</p>\n</blockquote>\n<p>If you're ok with using the user's own time zone, e.g. someone in the US might see a different time (and even date) than someone in Australia, then you don't need to store anything in addition. Just convert the instant to a <code>ZonedDateTime</code> e.g. via <code>ZonedDateTime.ofInstant(theInstant, theUsersTimeZone)</code> or directly use <code>DateTimeFormatter</code>.</p>\n<p>If, however, you need to represent the instant in the form the user causing the transaction saw it, i.e. you need to know whether it was 1pm EST or 1pm CET etc., then you should store the original time zone as well and use that in the conversion.</p>\n<p>So what this comes down to is basically a business decision rather than a technical issue: Do your users or your application need to know the time zone the transaction was placed in?</p>\n"}],"owner":{"account_id":444292,"reputation":1,"user_id":836018,"accept_rate":57,"display_name":"Jack"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":342,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"accepted_answer_id":75801399,"answer_count":1,"score":-1,"last_activity_date":1679402929,"creation_date":1679401910,"question_id":75801253,"body_markdown":"I am trying to develop an app and there is a Transaction table. In this table, there will be also a  date &amp; time field. \r\n\r\nIn order to keep the transaction time precisely, I think of using `java.time.Instant`. And whenever I need to convert this to any time zone, I can do it easily and for this reason there will be no problem regarding to time zone. With this approach, I can keep transaction time as a timestamp + solve time zone problem. Is that a true approach? \r\n\r\n\r\n\r\n\r\nThe second issue id that, do I need to keep another variable for displaying the transaction time properly? Or, is it ok to keep the time as timestamp (`java.time.Instant`) and display by formatting it when needed. What would you suggest? ","title":"Is java.time.Instant enough to keep data with time and timestamp?","body":"<p>I am trying to develop an app and there is a Transaction table. In this table, there will be also a  date &amp; time field.</p>\n<p>In order to keep the transaction time precisely, I think of using <code>java.time.Instant</code>. And whenever I need to convert this to any time zone, I can do it easily and for this reason there will be no problem regarding to time zone. With this approach, I can keep transaction time as a timestamp + solve time zone problem. Is that a true approach?</p>\n<p>The second issue id that, do I need to keep another variable for displaying the transaction time properly? Or, is it ok to keep the time as timestamp (<code>java.time.Instant</code>) and display by formatting it when needed. What would you suggest?</p>\n"},{"tags":["java","android","android-service","hidl"],"owner":{"account_id":18158551,"reputation":11,"user_id":13210255,"display_name":"Val&#233;rio Nogueira"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":125,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679402853,"creation_date":1679402853,"question_id":75801429,"body_markdown":"I&#39;m trying to implement the Android Face Authentication HIDL (https://source.android.com/docs/security/features/biometric/face-authentication) in Java for face authentication feature in a custom Android 10 build.\r\n\r\nI&#39;ve already generated the IBiometricsFace interface and created a class FaceService that extends IBiometricsFace.Stub. In SystemServer, I created a new instance of my FaceService class and registered it using\r\n\r\n```java\r\nprivate void run() {\r\n    ...\r\n\r\n    FaceService faceService = new FaceService ();\r\n    faceService.registerService(&quot;android.hardware.biometrics.face@1.0::IBiometricsFace&quot;);\r\n\r\n    ...\r\n```\r\n\r\nThe documentation says that `faced` must register itself with the name IBiometricsFace@1.0 so the system FaceService could find it, but inspecting the FaceService source I&#39;ve discovered that it calls `getService` with the name used above. Should I assume that the documentation is outdated? ","title":"Android Face Authentication HIDL","body":"<p>I'm trying to implement the Android Face Authentication HIDL (<a href=\"https://source.android.com/docs/security/features/biometric/face-authentication\" rel=\"nofollow noreferrer\">https://source.android.com/docs/security/features/biometric/face-authentication</a>) in Java for face authentication feature in a custom Android 10 build.</p>\n<p>I've already generated the IBiometricsFace interface and created a class FaceService that extends IBiometricsFace.Stub. In SystemServer, I created a new instance of my FaceService class and registered it using</p>\n<pre class=\"lang-java prettyprint-override\"><code>private void run() {\n    ...\n\n    FaceService faceService = new FaceService ();\n    faceService.registerService(&quot;android.hardware.biometrics.face@1.0::IBiometricsFace&quot;);\n\n    ...\n</code></pre>\n<p>The documentation says that <code>faced</code> must register itself with the name IBiometricsFace@1.0 so the system FaceService could find it, but inspecting the FaceService source I've discovered that it calls <code>getService</code> with the name used above. Should I assume that the documentation is outdated?</p>\n"},{"tags":["java","string","eclipse","formatting"],"comments":[{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":4,"creation_date":1679401721,"post_id":75801154,"comment_id":133711884,"body_markdown":"The output looks fine to me. What you might be experiencing is a matter of the font being used by the Eclipse &quot;terminal window&quot;, i.e. it&#39;s most likely not a monospaced font and thus the space character is narrower than the digits. Have a look here on how to change the font: https://help.eclipse.org/latest/index.jsp?topic=%2Forg.eclipse.jdt.doc.user%2Ftasks%2Ftasks-consoleAppearance.htm - If you&#39;re running this from your command line directly then Eclipse isn&#39;t even involved but your OS terminal settings are.","body":"The output looks fine to me. What you might be experiencing is a matter of the font being used by the Eclipse &quot;terminal window&quot;, i.e. it&#39;s most likely not a monospaced font and thus the space character is narrower than the digits. Have a look here on how to change the font: <a href=\"https://help.eclipse.org/latest/index.jsp?topic=%2Forg.eclipse.jdt.doc.user%2Ftasks%2Ftasks-consoleAppearance.htm\" rel=\"nofollow noreferrer\">help.eclipse.org/latest/&hellip;</a> - If you&#39;re running this from your command line directly then Eclipse isn&#39;t even involved but your OS terminal settings are."},{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":0,"creation_date":1679402123,"post_id":75801154,"comment_id":133712013,"body_markdown":"Btw, &quot;only half of the width is being used in each conversion&quot; is wrong. The conversion you&#39;re referring to is number/object to text conversion which results in a string of characters. The width influences the _number_ of characters being used and since characters can&#39;t be split the entire width will be used. This means `&quot;%3d&quot;` will turn `1` into the string `&quot;  1&quot;` (which in turn is the array `[&#39; &#39;, &#39; &#39;, &#39;1&#39;]`).","body":"Btw, &quot;only half of the width is being used in each conversion&quot; is wrong. The conversion you&#39;re referring to is number/object to text conversion which results in a string of characters. The width influences the <i>number</i> of characters being used and since characters can&#39;t be split the entire width will be used. This means <code>&quot;%3d&quot;</code> will turn <code>1</code> into the string <code>&quot;  1&quot;</code> (which in turn is the array <code>[&#39; &#39;, &#39; &#39;, &#39;1&#39;]</code>)."},{"owner":{"account_id":28075432,"reputation":1,"user_id":21447368,"display_name":"Anon04"},"score":0,"creation_date":1679402413,"post_id":75801154,"comment_id":133712111,"body_markdown":"That was it. Thanks a ton man, for real.","body":"That was it. Thanks a ton man, for real."}],"answers":[{"tags":[],"owner":{"account_id":28075432,"reputation":1,"user_id":21447368,"display_name":"Anon04"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1679402764,"creation_date":1679402709,"answer_id":75801406,"question_id":75801154,"body_markdown":"Changed the font from Ariel to a monospaced font of my choice using instructions from [here][1]; thanks to Thomas.\r\n\r\nEdit: Gotta wait 2 days to accept my own answer as the solution\r\n\r\n  [1]: https://help.eclipse.org/latest/index.jsp?topic=%2Forg.eclipse.jdt.doc.user%2Ftasks%2Ftasks-consoleAppearance.htm","title":"The %[width]d formatter syntax creates a pyramid in Eclipse IDE","body":"<p>Changed the font from Ariel to a monospaced font of my choice using instructions from <a href=\"https://help.eclipse.org/latest/index.jsp?topic=%2Forg.eclipse.jdt.doc.user%2Ftasks%2Ftasks-consoleAppearance.htm\" rel=\"nofollow noreferrer\">here</a>; thanks to Thomas.</p>\n<p>Edit: Gotta wait 2 days to accept my own answer as the solution</p>\n"}],"owner":{"account_id":28075432,"reputation":1,"user_id":21447368,"display_name":"Anon04"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":23,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":75801406,"answer_count":1,"score":-1,"last_activity_date":1679402764,"creation_date":1679401291,"question_id":75801154,"body_markdown":"Using JDK 17 (Java-SE 17) This is my code:\r\n```\r\nimport java.time.LocalDate;\r\n\r\npublic class TextBlock {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tString bulletIt = &quot;Print a Bulleted List:\\n&quot; +\r\n\t\t\t\t\t\t&quot;\\t\\u2022 First Point\\n&quot; +\r\n\t\t\t\t\t\t&quot;\\t\\t\\u2022 Sub Point&quot;;\r\n\t\tSystem.out.println(bulletIt);\r\n\t\t\r\n\t\tSystem.out.println();\r\n\t\t\r\n\t\tString textBlock = &quot;&quot;&quot;\r\n\t\t\t\t\t\tPrint a Bulleted List:\r\n\t\t\t\t\t\t\t\\u2022 First Point\r\n\t\t\t\t\t\t\t\t\\u2022 Sub Point&quot;&quot;&quot;;\r\n\t\t\r\n\t\tSystem.out.println(textBlock);\r\n\t\t\r\n\t\tSystem.out.println();\r\n\t\t\r\n\t\tint age = 35;\r\n\t\t// .printf works the same as .format\r\n\t\tSystem.out.printf(&quot;Your age is %d%n&quot;, age);\r\n\t\t\r\n\t\tint yearOfBirth = LocalDate.now().getYear() - age;\r\n\t\tSystem.out.format(&quot;Age = %d. Birth year = %d%n&quot;, age, yearOfBirth);\r\n\t\t\r\n\t\t//System.out.printf(&quot;Your age is %f%n&quot;, (float) age);\r\n\t\tSystem.out.printf(&quot;Your age is %.2f%n&quot;, (float) age);\r\n\t\t\r\n\t\tfor(int  i = 1; i &lt;= 100_000; i *= 10) {\r\n\t\t\tSystem.out.format(&quot;%6d&quot; + &quot;\\n&quot;, i);\r\n\t\t}\r\n\t}\r\n\r\n}\r\n```\r\n\r\nLeft out package name. Currently just learning about String formatting. The for loop at the end of my code prints this out in the console:\r\n\r\n![enter image description here](https://i.stack.imgur.com/aA9NT.png)\r\n\r\nFrom the tutorial everything should superficially be right-aligned, but for some reason my Eclipse IDE decides to only use half of the width I defined for my conversion. Any help? I want to use the .printf more in my code and not being able to right-align text would be a serious blow. Or is this just one of the horrible tradeoffs of using Eclipse?\r\n\r\nI tried doubling the width to 12 but again, only half of the width is being used in each conversion. I used repl.it to make sure it was a compiler issue and yea it is. Eclipse for some reason wants to be different from the crowd. Stupid Eclipse.","title":"The %[width]d formatter syntax creates a pyramid in Eclipse IDE","body":"<p>Using JDK 17 (Java-SE 17) This is my code:</p>\n<pre><code>import java.time.LocalDate;\n\npublic class TextBlock {\n\n    public static void main(String[] args) {\n        String bulletIt = &quot;Print a Bulleted List:\\n&quot; +\n                        &quot;\\t\\u2022 First Point\\n&quot; +\n                        &quot;\\t\\t\\u2022 Sub Point&quot;;\n        System.out.println(bulletIt);\n        \n        System.out.println();\n        \n        String textBlock = &quot;&quot;&quot;\n                        Print a Bulleted List:\n                            \\u2022 First Point\n                                \\u2022 Sub Point&quot;&quot;&quot;;\n        \n        System.out.println(textBlock);\n        \n        System.out.println();\n        \n        int age = 35;\n        // .printf works the same as .format\n        System.out.printf(&quot;Your age is %d%n&quot;, age);\n        \n        int yearOfBirth = LocalDate.now().getYear() - age;\n        System.out.format(&quot;Age = %d. Birth year = %d%n&quot;, age, yearOfBirth);\n        \n        //System.out.printf(&quot;Your age is %f%n&quot;, (float) age);\n        System.out.printf(&quot;Your age is %.2f%n&quot;, (float) age);\n        \n        for(int  i = 1; i &lt;= 100_000; i *= 10) {\n            System.out.format(&quot;%6d&quot; + &quot;\\n&quot;, i);\n        }\n    }\n\n}\n</code></pre>\n<p>Left out package name. Currently just learning about String formatting. The for loop at the end of my code prints this out in the console:</p>\n<p><img src=\"https://i.stack.imgur.com/aA9NT.png\" alt=\"enter image description here\" /></p>\n<p>From the tutorial everything should superficially be right-aligned, but for some reason my Eclipse IDE decides to only use half of the width I defined for my conversion. Any help? I want to use the .printf more in my code and not being able to right-align text would be a serious blow. Or is this just one of the horrible tradeoffs of using Eclipse?</p>\n<p>I tried doubling the width to 12 but again, only half of the width is being used in each conversion. I used repl.it to make sure it was a compiler issue and yea it is. Eclipse for some reason wants to be different from the crowd. Stupid Eclipse.</p>\n"},{"tags":["java","applescript"],"comments":[{"owner":{"account_id":9682987,"reputation":992,"user_id":7410243,"display_name":"Mockman"},"score":0,"creation_date":1679405329,"post_id":75792591,"comment_id":133713058,"body_markdown":"If the code in the java code segment is supposed to run literally, then you&#39;re missing the word `to` before `activate` in the first line of applescript code. If you&#39;re running a command within the tell statement (as opposed to inside a tell block) then you must include &#39;to&#39;. You have it within the applescript code segment. Typically, excluding &#39;to&#39; generates a syntax error.","body":"If the code in the java code segment is supposed to run literally, then you&#39;re missing the word <code>to</code> before <code>activate</code> in the first line of applescript code. If you&#39;re running a command within the tell statement (as opposed to inside a tell block) then you must include &#39;to&#39;. You have it within the applescript code segment. Typically, excluding &#39;to&#39; generates a syntax error."}],"answers":[{"tags":[],"owner":{"account_id":104716,"reputation":965,"user_id":279798,"display_name":"Joel Reid"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679402660,"creation_date":1679402660,"answer_id":75801394,"question_id":75792591,"body_markdown":"Your script contains a code fragment (from [here](https://stackoverflow.com/a/57847676/279798)?) that accidentally tries to set the app&#39;s focus by checking a variable. `frontmostVisibleApp` is indeed just a variable though and does not perform any action. Your use of `tell application &quot;Daylite&quot; to activate` should be sufficient to give it focus. What further were you looking to cause to happen?\r\n\r\nTo move forward, I&#39;d suggest just removing that line. Then perhaps lengthen that pause if it is sometimes launching Daylite rather than just giving it focus, e.g. via:\r\n\r\n    tell application &quot;Daylite&quot; to activate\r\n    delay 4\r\n\r\nOr, less clumsily, you could further fail-*safe* by, for example, wrapping the rest in a focus check:\r\n\r\n    if (frontmost of application &quot;Daylite&quot;) is true then\r\n    \t--code\r\n    end if\r\n\r\nOr, my recommendation, add a full wait loop after the `activate` command:\r\n\r\n    repeat until (frontmost of application &quot;Daylite&quot;) is true\r\n    \tdelay 1\r\n    end repeat\r\n    \r\n    --code\r\n","title":"AppleScript behaving differently when run in Java code","body":"<p>Your script contains a code fragment (from <a href=\"https://stackoverflow.com/a/57847676/279798\">here</a>?) that accidentally tries to set the app's focus by checking a variable. <code>frontmostVisibleApp</code> is indeed just a variable though and does not perform any action. Your use of <code>tell application &quot;Daylite&quot; to activate</code> should be sufficient to give it focus. What further were you looking to cause to happen?</p>\n<p>To move forward, I'd suggest just removing that line. Then perhaps lengthen that pause if it is sometimes launching Daylite rather than just giving it focus, e.g. via:</p>\n<pre><code>tell application &quot;Daylite&quot; to activate\ndelay 4\n</code></pre>\n<p>Or, less clumsily, you could further fail-<em>safe</em> by, for example, wrapping the rest in a focus check:</p>\n<pre><code>if (frontmost of application &quot;Daylite&quot;) is true then\n    --code\nend if\n</code></pre>\n<p>Or, my recommendation, add a full wait loop after the <code>activate</code> command:</p>\n<pre><code>repeat until (frontmost of application &quot;Daylite&quot;) is true\n    delay 1\nend repeat\n\n--code\n</code></pre>\n"}],"owner":{"account_id":26048869,"reputation":59,"user_id":19752467,"display_name":"Gareth"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1679402660,"creation_date":1679328020,"question_id":75792591,"body_markdown":"I wrote some AppleScript that opens and application and creates a record. The script behaves as expected when run in Script editor. When running this script from my Java code, the script doesn&#39;t function the same. The script will activate the application but not put it into focus.\r\n\r\nApplescript:\r\n\r\n \r\n\r\n       tell application &quot;Daylite&quot; to activate\r\n    \r\n    tell application &quot;System Events&quot; to set frontmostVisibleApp to &quot;Daylite&quot;\r\n    \r\n    tell application &quot;System Events&quot;\r\n    \t\r\n    \tkeystroke &quot;o&quot; using {shift down, command down}\r\n    \tdelay 0.1\r\n    \tkey code 49\r\n    \tkey code 123\r\n    \trepeat 16 times\r\n    \t\tkey code 51\r\n    \tend repeat\r\n    \tdelay 0.1\r\n    \tset the clipboard to &quot;Quote-230316-1&quot;\r\n    \tdelay 0.1\r\n    \tkeystroke &quot;v&quot; using {command down}\r\n    \tdelay 0.5\r\n    \tkey code 76\r\n    \trepeat 13 times\r\n    \t\tkey code 48\r\n    \t\tdelay 0.2\r\n    \tend repeat\r\n    \tdelay 0.5\r\n    \tkey code 76\r\n    \tdelay 0.1\r\n    \tset the clipboard to &quot;Joe Smith&quot;\r\n    \tdelay 0.1\r\n    \tkeystroke &quot;v&quot; using {command down}\r\n    \tdelay 0.1\r\n    \tkey code 76\r\n    \tdelay 0.1\r\n    \tclick button &quot;Save&quot; of window &quot;New Opportunity&quot; of application process &quot;Daylite&quot; of application &quot;System Events&quot;\r\n    \t\r\n    end tell\r\n\r\nJava code:\r\n\r\n        public void CreateDayliteOpportunity()\r\n       {\r\n         \r\n          \r\n          Runtime runtime = Runtime.getRuntime();\r\n          String applescriptCommand =  &quot;tell application \\&quot;Daylite\\&quot; activate\\n&quot; +\r\n                                       &quot;delay 2\\n&quot;+\r\n                                       &quot;run script\\n&quot;+\r\n                                       &quot;tell application \\&quot;System Events\\&quot; to set frontmostVisibleApp to \\&quot;Daylite\\&quot;&quot;+\r\n                                       &quot;delay 0.1\\n&quot;+\r\n                                       &quot;tell application \\&quot;System Events\\&quot;\\n&quot; +\r\n                                       &quot;keystroke \\&quot;o\\&quot; using {shift down, command down}\\n&quot;+\r\n                                       &quot;delay 0.1\\n&quot;+\r\n    \t                                &quot;key code 49\\n&quot;+\r\n    \t                                &quot;key code 123\\n&quot;+\r\n    \t                                &quot;repeat 16 times\\n&quot;+\r\n    \t                                &quot;key code 51\\n&quot;+\r\n    \t                                &quot;end repeat\\n&quot;+\r\n    \t                                &quot;delay 0.1\\n&quot;+\r\n    \t                                &quot;set the clipboard to \\&quot;&quot; + OpportunityName + &quot;\\&quot;\\n&quot;+\r\n    \t                                &quot;delay 0.1\\n&quot;+\r\n    \t                                &quot;keystroke \\&quot;v\\&quot; using {command down}\\n&quot;+\r\n    \t                                &quot;delay 0.5\\n&quot;+\r\n    \t                                &quot;key code 76\\n&quot;+\r\n    \t                                &quot;repeat 13 times\\n&quot;+\r\n    \t                                &quot;key code 48\\n&quot;+\r\n    \t                                &quot;delay 0.2\\n&quot;+\r\n    \t                                &quot;end repeat\\n&quot;+\r\n    \t                                &quot;delay 0.5\\n&quot;+\r\n    \t                                &quot;key code 76\\n&quot;+\r\n    \t                                &quot;delay 0.1\\n&quot;+\r\n    \t                                &quot;set the clipboard to \\&quot;&quot; + ContactName + &quot;\\&quot;\\n&quot;+\r\n    \t                                &quot;delay 0.1\\n&quot;+\r\n    \t                                &quot;keystroke \\&quot;v\\&quot; using {command down}\\n&quot;+\r\n    \t                                &quot;delay 0.1\\n&quot;+\r\n    \t                                &quot;key code 76\\n&quot;+\r\n    \t                                &quot;delay 0.1\\n&quot;+\r\n    \t                                &quot;click button \\&quot;Save\\&quot; of window \\&quot;New Opportunity\\&quot; of application process \\&quot;Daylite\\&quot; of application \\&quot;System Events\\&quot;\\n&quot;+\r\n                                       &quot;end tell&quot;;\r\n    \r\n          String[] args = { &quot;osascript&quot;, &quot;-e&quot;, applescriptCommand };\r\n          try\r\n          {\r\n          Process process = runtime.exec(args);\r\n          }\r\n          catch(IOException xyz)\r\n          {JOptionPane.showMessageDialog(null, &quot;ERROR! &quot; + xyz.getMessage());}\r\n       }\r\n\r\n","title":"AppleScript behaving differently when run in Java code","body":"<p>I wrote some AppleScript that opens and application and creates a record. The script behaves as expected when run in Script editor. When running this script from my Java code, the script doesn't function the same. The script will activate the application but not put it into focus.</p>\n<p>Applescript:</p>\n<pre><code>   tell application &quot;Daylite&quot; to activate\n\ntell application &quot;System Events&quot; to set frontmostVisibleApp to &quot;Daylite&quot;\n\ntell application &quot;System Events&quot;\n    \n    keystroke &quot;o&quot; using {shift down, command down}\n    delay 0.1\n    key code 49\n    key code 123\n    repeat 16 times\n        key code 51\n    end repeat\n    delay 0.1\n    set the clipboard to &quot;Quote-230316-1&quot;\n    delay 0.1\n    keystroke &quot;v&quot; using {command down}\n    delay 0.5\n    key code 76\n    repeat 13 times\n        key code 48\n        delay 0.2\n    end repeat\n    delay 0.5\n    key code 76\n    delay 0.1\n    set the clipboard to &quot;Joe Smith&quot;\n    delay 0.1\n    keystroke &quot;v&quot; using {command down}\n    delay 0.1\n    key code 76\n    delay 0.1\n    click button &quot;Save&quot; of window &quot;New Opportunity&quot; of application process &quot;Daylite&quot; of application &quot;System Events&quot;\n    \nend tell\n</code></pre>\n<p>Java code:</p>\n<pre><code>    public void CreateDayliteOpportunity()\n   {\n     \n      \n      Runtime runtime = Runtime.getRuntime();\n      String applescriptCommand =  &quot;tell application \\&quot;Daylite\\&quot; activate\\n&quot; +\n                                   &quot;delay 2\\n&quot;+\n                                   &quot;run script\\n&quot;+\n                                   &quot;tell application \\&quot;System Events\\&quot; to set frontmostVisibleApp to \\&quot;Daylite\\&quot;&quot;+\n                                   &quot;delay 0.1\\n&quot;+\n                                   &quot;tell application \\&quot;System Events\\&quot;\\n&quot; +\n                                   &quot;keystroke \\&quot;o\\&quot; using {shift down, command down}\\n&quot;+\n                                   &quot;delay 0.1\\n&quot;+\n                                    &quot;key code 49\\n&quot;+\n                                    &quot;key code 123\\n&quot;+\n                                    &quot;repeat 16 times\\n&quot;+\n                                    &quot;key code 51\\n&quot;+\n                                    &quot;end repeat\\n&quot;+\n                                    &quot;delay 0.1\\n&quot;+\n                                    &quot;set the clipboard to \\&quot;&quot; + OpportunityName + &quot;\\&quot;\\n&quot;+\n                                    &quot;delay 0.1\\n&quot;+\n                                    &quot;keystroke \\&quot;v\\&quot; using {command down}\\n&quot;+\n                                    &quot;delay 0.5\\n&quot;+\n                                    &quot;key code 76\\n&quot;+\n                                    &quot;repeat 13 times\\n&quot;+\n                                    &quot;key code 48\\n&quot;+\n                                    &quot;delay 0.2\\n&quot;+\n                                    &quot;end repeat\\n&quot;+\n                                    &quot;delay 0.5\\n&quot;+\n                                    &quot;key code 76\\n&quot;+\n                                    &quot;delay 0.1\\n&quot;+\n                                    &quot;set the clipboard to \\&quot;&quot; + ContactName + &quot;\\&quot;\\n&quot;+\n                                    &quot;delay 0.1\\n&quot;+\n                                    &quot;keystroke \\&quot;v\\&quot; using {command down}\\n&quot;+\n                                    &quot;delay 0.1\\n&quot;+\n                                    &quot;key code 76\\n&quot;+\n                                    &quot;delay 0.1\\n&quot;+\n                                    &quot;click button \\&quot;Save\\&quot; of window \\&quot;New Opportunity\\&quot; of application process \\&quot;Daylite\\&quot; of application \\&quot;System Events\\&quot;\\n&quot;+\n                                   &quot;end tell&quot;;\n\n      String[] args = { &quot;osascript&quot;, &quot;-e&quot;, applescriptCommand };\n      try\n      {\n      Process process = runtime.exec(args);\n      }\n      catch(IOException xyz)\n      {JOptionPane.showMessageDialog(null, &quot;ERROR! &quot; + xyz.getMessage());}\n   }\n</code></pre>\n"},{"tags":["java","spring","active-directory","spring-ldap"],"comments":[{"owner":{"account_id":5368696,"reputation":197,"user_id":4277809,"accept_rate":50,"display_name":"Ravinder Kadian"},"score":0,"creation_date":1426006231,"post_id":28964782,"comment_id":46190577,"body_markdown":"Hi Guys, I am blocked and tried many ways but still blocked. Need urgent direction or help to unblock.","body":"Hi Guys, I am blocked and tried many ways but still blocked. Need urgent direction or help to unblock."}],"answers":[{"tags":[],"owner":{"account_id":1489310,"reputation":345,"user_id":1396815,"accept_rate":67,"display_name":"aalmero"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1484603609,"creation_date":1484603609,"answer_id":41685607,"question_id":28964782,"body_markdown":"for updating AD password use a separate method, it seems that LdapTemplate.update() does not define the correct ModificationItem for password.\r\n            \r\n\t\t\tpublic void setPassword(Person p){\r\n            String relativeDn = getRelativeDistinguishedName(person.getDistinguishedName());\r\n\t\t\tLdapNameBuilder ldapNameBuilder = LdapNameBuilder.newInstance(relativeDn);\r\n\t\t\tName dn  = ldapNameBuilder.build();\r\n\r\n\t\t\tDirContextOperations context = ldapTemplate.lookupContext(dn);\r\n\r\n\t\t\tAttribute attr = new BasicAttribute(&quot;unicodepwd&quot;, encodePassword(person.getPassword()));\r\n\t\t    ModificationItem item = new ModificationItem(DirContext.REPLACE_ATTRIBUTE, attr);\r\n\t\t    \r\n\t\t    ldapTemplate.modifyAttributes(dn, new ModificationItem[] {item});\t\r\n            }\r\n\r\n","title":"Not able to Update password and useraccountcontrol in AD using Spring LDAP","body":"<p>for updating AD password use a separate method, it seems that LdapTemplate.update() does not define the correct ModificationItem for password.</p>\n\n<pre><code>        public void setPassword(Person p){\n        String relativeDn = getRelativeDistinguishedName(person.getDistinguishedName());\n        LdapNameBuilder ldapNameBuilder = LdapNameBuilder.newInstance(relativeDn);\n        Name dn  = ldapNameBuilder.build();\n\n        DirContextOperations context = ldapTemplate.lookupContext(dn);\n\n        Attribute attr = new BasicAttribute(\"unicodepwd\", encodePassword(person.getPassword()));\n        ModificationItem item = new ModificationItem(DirContext.REPLACE_ATTRIBUTE, attr);\n\n        ldapTemplate.modifyAttributes(dn, new ModificationItem[] {item});   \n        }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7002790,"reputation":106,"user_id":5368265,"display_name":"Raniere"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1581719574,"creation_date":1581719574,"answer_id":60234313,"question_id":28964782,"body_markdown":"In addition to aalmero answer, it seems like Spring Ldap repository can&#39;t save unicodePwd.\r\n\r\nBut you can use LdapTemplate for it:\r\n\r\n\r\n        UserAd userAd = new UserAd();\r\n        // set your stuff\r\n        userAdRepository.save(userAd);\r\n        \r\n        ModificationItem[] mods = new ModificationItem[1];\r\n        mods[0] = new ModificationItem(DirContext.REPLACE_ATTRIBUTE, new BasicAttribute(&quot;unicodePwd&quot;, encodePassword(&quot;password-respecting-policies&quot;)));\r\n\r\n        ldapTemplate.modifyAttributes(userAd.getDn(), mods);","title":"Not able to Update password and useraccountcontrol in AD using Spring LDAP","body":"<p>In addition to aalmero answer, it seems like Spring Ldap repository can't save unicodePwd.</p>\n\n<p>But you can use LdapTemplate for it:</p>\n\n<pre><code>    UserAd userAd = new UserAd();\n    // set your stuff\n    userAdRepository.save(userAd);\n\n    ModificationItem[] mods = new ModificationItem[1];\n    mods[0] = new ModificationItem(DirContext.REPLACE_ATTRIBUTE, new BasicAttribute(\"unicodePwd\", encodePassword(\"password-respecting-policies\")));\n\n    ldapTemplate.modifyAttributes(userAd.getDn(), mods);\n</code></pre>\n"}],"owner":{"account_id":5368696,"reputation":197,"user_id":4277809,"accept_rate":50,"display_name":"Ravinder Kadian"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3392,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":2,"score":1,"last_activity_date":1679402324,"creation_date":1425993410,"question_id":28964782,"body_markdown":"I am new to Spring LDAP and Active directory and facing issue while updating password for new created user in AD.\r\n\r\nUsing SPRING LDAP I have first created User in AD successfully and then tried to update password and useraccountcontrol of user when I getting below exception.\r\nWe have been trying for last 1 week and not able to resolve. Any help/direction is highly appreciated.\r\n\r\nI have been through many blogs and  tried as mentioned in below two blogs but still blocked and getting same exception:\r\n\r\nhttps://stackoverflow.com/questions/6797955/how-do-i-resolve-will-not-perform-ms-ad-reply-when-trying-to-change-password-i\r\n\r\nhttps://stackoverflow.com/questions/4322243/adding-a-user-with-a-password-in-active-directory-ldap\r\n\r\nStacktrace:\r\n\r\n    16:43:56,991 INFO  [stdout] (http-localhost-127.0.0.1-8080-1)  INFO [http-localhost-127.0.0.1-8080-1] (HelperDao.java:26) - HelperDao.getNextUserId(): entry\r\n    \r\n    16:43:57,007 INFO  [stdout] (http-localhost-127.0.0.1-8080-1) Hibernate:   SELECT LTRIM(TO_CHAR( IP_USER_XDUSERID_SEQ.nextval, &#39;000000000000000000000000000&#39;)) ID from dual\r\n    \r\n    16:43:57,164 INFO  [stdout] (http-localhost-127.0.0.1-8080-1)  INFO [http-localhost-127.0.0.1-8080-1] (HelperDao.java:30) - HelperDao.getNextUserId(): exit\r\n    \r\n    16:47:17,051 INFO  [stdout] (http-localhost-127.0.0.1-8080-1) 16:47:17.051 [http-localhost-127.0.0.1-8080-1] ERROR com.st.liotroevo.web.dao.UserADRepository - catching\r\n    \r\n    16:47:17,051 INFO  [stdout] (http-localhost-127.0.0.1-8080-1) javax.naming.OperationNotSupportedException: [LDAP: error code 53 - 0000200D: SvcErr: DSID-031A0FC0, problem 5003 (WILL_NOT_PERFORM), data 0\r\n    16:47:17,067 INFO  [stdout] (http-localhost-127.0.0.1-8080-1) \r\n    16:47:17,067 INFO  [stdout] (http-localhost-127.0.0.1-8080-1)       at com.sun.jndi.ldap.LdapCtx.mapErrorCode(LdapCtx.java:3160) ~[?:1.7.0_45]\r\n    16:47:17,067 INFO  [stdout] (http-localhost-127.0.0.1-8080-1)       at com.sun.jndi.ldap.LdapCtx.processReturnCode(LdapCtx.java:3033) ~[?:1.7.0_45]\r\n    16:47:17,067 INFO  [stdout] (http-localhost-127.0.0.1-8080-1)       at com.sun.jndi.ldap.LdapCtx.processReturnCode(LdapCtx.java:2840) ~[?:1.7.0_45]\r\n    16:47:17,067 INFO  [stdout] (http-localhost-127.0.0.1-8080-1)       at com.sun.jndi.ldap.LdapCtx.c_modifyAttributes(LdapCtx.java:1478) ~[?:1.7.0_45]\r\n    16:47:17,067 INFO  [stdout] (http-localhost-127.0.0.1-8080-1)       at com.sun.jndi.toolkit.ctx.ComponentDirContext.p_modifyAttributes(ComponentDirContext.java:273) ~[?:?]\r\n    16:47:17,067 INFO  [stdout] (http-localhost-127.0.0.1-8080-1)       at com.sun.jndi.toolkit.ctx.PartialCompositeDirContext.modifyAttributes(PartialCompositeDirContext.java:190) ~[?:?]\r\n    16:47:17,099 INFO  [stdout] (http-localhost-127.0.0.1-8080-1)       at com.sun.jndi.toolkit.ctx.PartialCompositeDirContext.modifyAttributes(PartialCompositeDirContext.java:179) ~[?:?]\r\n    16:47:17,099 INFO  [stdout] (http-localhost-127.0.0.1-8080-1)       at javax.naming.directory.InitialDirContext.modifyAttributes(InitialDirContext.java:167) ~[?:1.7.0_45]\r\n    16:47:17,099 INFO  [stdout] (http-localhost-127.0.0.1-8080-1)       at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:1.7.0_45]\r\n    16:47:17,099 INFO  [stdout] (http-localhost-127.0.0.1-8080-1)       at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) ~[?:1.7.0_45]\r\n    16:47:17,099 INFO  [stdout] (http-localhost-127.0.0.1-8080-1)       at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:1.7.0_45]\r\n    16:47:17,099 INFO  [stdout] (http-localhost-127.0.0.1-8080-1)       at java.lang.reflect.Method.invoke(Method.java:606) ~[?:1.7.0_45]\r\n    16:47:17,099 INFO  [stdout] (http-localhost-127.0.0.1-8080-1)       at org.springframework.transaction.compensating.support.CompensatingTransactionUtils.performOperation(CompensatingTransactionUtils.java:69) ~[spring-ldap-core-2.0.2.RELEASE.jar:2.0.2.RELEASE]\r\n    16:47:17,099 INFO  [stdout] (http-localhost-127.0.0.1-8080-1)       at org.springframework.ldap.transaction.compensating.manager.TransactionAwareDirContextInvocationHandler.invoke(TransactionAwareDirContextInvocationHandler.java:85) ~[spring-ldap-core-2.0.2.RELEASE.jar:2.0.2.RELEASE]\r\n    16:47:17,099 INFO  [stdout] (http-localhost-127.0.0.1-8080-1)       at com.sun.proxy.$Proxy69.modifyAttributes(Unknown Source) ~[?:?]\r\n    16:47:17,099 INFO  [stdout] (http-localhost-127.0.0.1-8080-1)       at com.st.liotroevo.web.dao.UserADRepository.update(UserADRepository.java:104) [classes:?]\r\n    16:47:17,099 INFO  [stdout] (http-localhost-127.0.0.1-8080-1)       at com.st.liotroevo.web.service.UserService.updateUser(UserService.java:92) [classes:?]\r\n    16:47:17,099 INFO  [stdout] (http-localhost-127.0.0.1-8080-1)       at com.st.liotroevo.web.service.serviceImpl.IPRegistrationServiceImpl.createUser(IPRegistrationServiceImpl.java:72) [classes:?]\r\n    16:47:17,099 INFO  [stdout] (http-localhost-127.0.0.1-8080-1)       at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:1.7.0_45]\r\n    16:47:17,115 INFO  [stdout] (http-localhost-127.0.0.1-8080-1)       at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) ~[?:1.7.0_45]\r\n    16:47:17,115 INFO  [stdout] (http-localhost-127.0.0.1-8080-1)       at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:1.7.0_45]\r\n    16:47:17,115 INFO  [stdout] (http-localhost-127.0.0.1-8080-1)       at java.lang.reflect.Method.invoke(Method.java:606) ~[?:1.7.0_45]\r\n    16:47:17,115 INFO  [stdout] (http-localhost-127.0.0.1-8080-1)       at org.jboss.ws.common.invocation.AbstractInvocationHandlerJSE.invoke(AbstractInvocationHandlerJSE.java:111) [jbossws-common-2.0.2.GA.jar!/:2.0.2.GA]\r\n    16:47:17,115 INFO  [stdout] (http-localhost-127.0.0.1-8080-1)       at org.jboss.wsf.stack.cxf.JBossWSInvoker._invokeInternal(JBossWSInvoker.java:181) [jbossws-cxf-server-4.0.2.GA.jar!/:4.0.2.GA]\r\n    16:47:17,115 INFO  [stdout] (http-localhost-127.0.0.1-8080-1)       at org.jboss.wsf.stack.cxf.JBossWSInvoker.invoke(JBossWSInvoker.java:127) [jbossws-cxf-server-4.0.2.GA.jar!/:4.0.2.GA]\r\n    16:47:17,115 INFO  [stdout] (http-localhost-127.0.0.1-8080-1)       at org.apache.cxf.interceptor.ServiceInvokerInterceptor$1.run(ServiceInvokerInterceptor.java:58) [cxf-rt-core-2.4.6.jar!/:2.4.6]\r\n    16:47:17,115 INFO  [stdout] (http-localhost-127.0.0.1-8080-1)       at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471) [?:1.7.0_45]\r\n    16:47:17,115 INFO  [stdout] (http-localhost-127.0.0.1-8080-1)       at java.util.concurrent.FutureTask.run(FutureTask.java:262) [?:1.7.0_45]\r\n\r\n\r\nBelow is the code snippet:\r\n\r\n    ldap.url=ldaps://url:636\r\n    ldap.userDn=CN=IP User,OU=AdminAccounts,DC=stp-qa,DC=st,DC=com\r\n    ldap.password=dummyPass\r\n    ldap.base=OU=ST,OU=People,DC=stp-qa,DC=st,DC=com\r\n    ldap.clean=false\r\n\r\n    @Entry(objectClasses = {  &quot;top&quot;, &quot;person&quot;, &quot;organizationalPerson&quot;,&quot;user&quot;,&quot;st-individualpassportuser&quot;})\r\n    public final class User {\r\n    \r\n    \t@Id\r\n    \tprivate Name dn;\r\n    \r\n    \t@Attribute(name = &quot;mail&quot;)\r\n    \tprivate String email;\r\n    \r\n    \t@Attribute(name = &quot;cn&quot;)\r\n    \t@DnAttribute(value=&quot;cn&quot;,index=0)\r\n    \tprivate String fullName;\r\n    \r\n    \t@Attribute(name = &quot;givenName&quot;)\r\n    \tprivate String firstName;\r\n    \r\n    \t@Attribute(name = &quot;sn&quot;)\r\n    \tprivate String lastName;\r\n    \r\n    \t@Attribute(name = &quot;st-AccValidationStatus&quot;)\r\n    \tprivate String accountStatus;\r\n    \r\n    \t@Attribute(name = &quot;st-entryStatus&quot;)\r\n    \tprivate String validationStatus;\r\n    \r\n    \t@Attribute(name = &quot;whenCreated&quot;)\r\n    \tprivate String creationDate;\r\n    \r\n    \t@Attribute(name = &quot;st-ValidatedOn&quot;)\r\n    \tprivate String validationDate;\r\n    \r\n    \t@Attribute(name = &quot;st-ValidatedBy&quot;)\r\n    \tprivate String validatedBy;\r\n    \r\n    \t@Attribute(name = &quot;st-currentLogon&quot;)\r\n    \tprivate String lastLogon;\r\n    \r\n    \t@Attribute(name = &quot;st-loginRedirectURL&quot;)\r\n    \tprivate String loginRedirectUrl;\r\n    \r\n    \t@Attribute(name = &quot;st-jvCompany&quot;)\r\n    \tprivate String jvCode;\r\n    \r\n    \t@Attribute(name = &quot;sAMAccountName&quot;)\r\n    \tprivate String samAccount;\r\n    \r\n    \t@Attribute(name = &quot;st-userSpecifedCompany&quot;)\r\n    \tprivate String employerName;\r\n    \r\n    \t@Attribute(name = &quot;postalCode&quot;)\r\n    \tprivate String zipCode;\r\n    \t\r\n    \t@Attribute(name=&quot;st-xduserid&quot;)\r\n    \tprivate String xdUserId;\r\n    \t\r\n    \t@Attribute(name=&quot;st-Logincount&quot;)\r\n    \tprivate String loginCount;\r\n    \t\r\n    \t@Attribute(name=&quot;unicodePwd&quot;)\r\n    \tprivate byte[] unicodePassword;\r\n    \t\r\n    \t@Attribute(name=&quot;userAccountControl&quot;)\r\n    \tprivate String userAccountControl;\r\n    \t\r\n    \t@Attribute(name=&quot;st-AccLastValidated&quot;)\r\n    \tprivate String userAccLastValidated;\r\n    \t\r\n    \t@Attribute(name=&quot;st-secretQuestion&quot;)\r\n    \tprivate String userSecretQuestion;\r\n\r\n        @Attribute(name=&quot;st-secretAnswer&quot;)\r\n        private String userAnswerToSecretQuestion;\r\n    \t}\r\n\r\nJava Class for Password computation:\r\n\r\n    /**\r\n     * Add unicode Password to userObject.\r\n     * Ldap does not allow to set password/userAccountControl during creation of user by design, So need to update user after creation in AD with password and userAccountControl.\r\n     * @param password\r\n     */\r\n    private void addPasswordToUserProfile(String password) {\r\n    \r\n    \tString newQuotedPassword = &quot;\\&quot;&quot; +  password + &quot;\\&quot;&quot;;\r\n    \ttry {\r\n    \t\tbyte[] newUnicodePassword = newQuotedPassword.getBytes(&quot;UTF-16LE&quot;);\r\n    \t\t\tint UF_NORMAL_ACCOUNT = 0x0200;\r\n    \t\t\tint UF_PASSWORD_EXPIRED = 0x800000;\r\n    \t\t\tadUserBean.setUserAccountControl(Integer.toString(UF_NORMAL_ACCOUNT + UF_PASSWORD_EXPIRED));\r\n    \t\t\tadUserBean.setUnicodePassword(newUnicodePassword);\r\n    \t} catch (UnsupportedEncodingException e) {\r\n    \t\tlogger.catching(e);\r\n    \t}\r\n    }\r\n\t\r\n\r\n\r\nRepository.Java\r\n\r\n\r\n    @Repository\r\n    public class UserADRepository {\r\n    \r\n    \t@Autowired\r\n    \tprivate LdapTemplate ldapTemplate;\r\n    \r\n    \tpublic User create(User user) {\r\n    \t\tldapTemplate.create(user);\r\n    \t\treturn user;\r\n    \t}\r\n    \r\n    \tpublic User findByFullName(String fullName) {\r\n    \t\treturn ldapTemplate.findOne(\r\n    \t\t\t\tLdapQueryBuilder.query().where(&quot;cn&quot;).is(fullName), User.class);\r\n    \t}\r\n    \r\n    \t/**\r\n    \t * Find user in LDAP based on User SamAccountName\r\n    \t * @param samAccount\r\n    \t * @return\r\n    \t */\r\n    \tpublic User findBySamAccountName(String samAccount) {\r\n    \t\tUser usr = null;\r\n    \t\ttry {\r\n    \t\t\tusr = ldapTemplate.findOne(\r\n    \t\t\t\t\tLdapQueryBuilder.query().where(&quot;sAMAccountName&quot;)\r\n    \t\t\t\t\t\t\t.is(samAccount), User.class);\r\n    \t\t} catch (EmptyResultDataAccessException emptyException) {\r\n    \t\t\treturn usr;\r\n    \t\t}\r\n    \t\treturn usr;\r\n    \t}\r\n     \r\n    /**\r\n     * Find user in LDAP based on User DN (distinguisedName) \r\n     * @param dn\r\n     * @return\r\n     */\r\n    \tpublic User findByDn(Name dn) {\r\n    \t\tUser usr = null;\r\n    \t\ttry {\r\n    \t\t\tusr = ldapTemplate.findByDn(dn, User.class);\r\n    \t\t} catch (NameNotFoundException e) {\r\n    \t\t\treturn usr;\r\n    \t\t}\r\n    \t\treturn usr;\r\n    \t}\r\n    \r\n    \t/**\r\n    \t * Update user in AD \r\n    \t * @param User\r\n    \t */\r\n    \tpublic void update(User User) {\r\n    \t\tldapTemplate.update(User);\r\n    \t}\r\n    \r\n    \tpublic void delete(User User) {\r\n    \t\tldapTemplate.delete(User);\r\n    \t}\r\n\r\n\r\nThanks in advance for kind help or direction to resolve this issue.\r\n\r\n\r\n\r\n","title":"Not able to Update password and useraccountcontrol in AD using Spring LDAP","body":"<p>I am new to Spring LDAP and Active directory and facing issue while updating password for new created user in AD.</p>\n\n<p>Using SPRING LDAP I have first created User in AD successfully and then tried to update password and useraccountcontrol of user when I getting below exception.\nWe have been trying for last 1 week and not able to resolve. Any help/direction is highly appreciated.</p>\n\n<p>I have been through many blogs and  tried as mentioned in below two blogs but still blocked and getting same exception:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/6797955/how-do-i-resolve-will-not-perform-ms-ad-reply-when-trying-to-change-password-i\">How do I resolve &quot;WILL_NOT_PERFORM&quot; MS AD reply when trying to change password in scala w/ the unboundid LDAP SDK?</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/4322243/adding-a-user-with-a-password-in-active-directory-ldap\">Adding a user with a password in Active Directory LDAP</a></p>\n\n<p>Stacktrace:</p>\n\n<pre><code>16:43:56,991 INFO  [stdout] (http-localhost-127.0.0.1-8080-1)  INFO [http-localhost-127.0.0.1-8080-1] (HelperDao.java:26) - HelperDao.getNextUserId(): entry\n\n16:43:57,007 INFO  [stdout] (http-localhost-127.0.0.1-8080-1) Hibernate:   SELECT LTRIM(TO_CHAR( IP_USER_XDUSERID_SEQ.nextval, '000000000000000000000000000')) ID from dual\n\n16:43:57,164 INFO  [stdout] (http-localhost-127.0.0.1-8080-1)  INFO [http-localhost-127.0.0.1-8080-1] (HelperDao.java:30) - HelperDao.getNextUserId(): exit\n\n16:47:17,051 INFO  [stdout] (http-localhost-127.0.0.1-8080-1) 16:47:17.051 [http-localhost-127.0.0.1-8080-1] ERROR com.st.liotroevo.web.dao.UserADRepository - catching\n\n16:47:17,051 INFO  [stdout] (http-localhost-127.0.0.1-8080-1) javax.naming.OperationNotSupportedException: [LDAP: error code 53 - 0000200D: SvcErr: DSID-031A0FC0, problem 5003 (WILL_NOT_PERFORM), data 0\n16:47:17,067 INFO  [stdout] (http-localhost-127.0.0.1-8080-1) \n16:47:17,067 INFO  [stdout] (http-localhost-127.0.0.1-8080-1)       at com.sun.jndi.ldap.LdapCtx.mapErrorCode(LdapCtx.java:3160) ~[?:1.7.0_45]\n16:47:17,067 INFO  [stdout] (http-localhost-127.0.0.1-8080-1)       at com.sun.jndi.ldap.LdapCtx.processReturnCode(LdapCtx.java:3033) ~[?:1.7.0_45]\n16:47:17,067 INFO  [stdout] (http-localhost-127.0.0.1-8080-1)       at com.sun.jndi.ldap.LdapCtx.processReturnCode(LdapCtx.java:2840) ~[?:1.7.0_45]\n16:47:17,067 INFO  [stdout] (http-localhost-127.0.0.1-8080-1)       at com.sun.jndi.ldap.LdapCtx.c_modifyAttributes(LdapCtx.java:1478) ~[?:1.7.0_45]\n16:47:17,067 INFO  [stdout] (http-localhost-127.0.0.1-8080-1)       at com.sun.jndi.toolkit.ctx.ComponentDirContext.p_modifyAttributes(ComponentDirContext.java:273) ~[?:?]\n16:47:17,067 INFO  [stdout] (http-localhost-127.0.0.1-8080-1)       at com.sun.jndi.toolkit.ctx.PartialCompositeDirContext.modifyAttributes(PartialCompositeDirContext.java:190) ~[?:?]\n16:47:17,099 INFO  [stdout] (http-localhost-127.0.0.1-8080-1)       at com.sun.jndi.toolkit.ctx.PartialCompositeDirContext.modifyAttributes(PartialCompositeDirContext.java:179) ~[?:?]\n16:47:17,099 INFO  [stdout] (http-localhost-127.0.0.1-8080-1)       at javax.naming.directory.InitialDirContext.modifyAttributes(InitialDirContext.java:167) ~[?:1.7.0_45]\n16:47:17,099 INFO  [stdout] (http-localhost-127.0.0.1-8080-1)       at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:1.7.0_45]\n16:47:17,099 INFO  [stdout] (http-localhost-127.0.0.1-8080-1)       at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) ~[?:1.7.0_45]\n16:47:17,099 INFO  [stdout] (http-localhost-127.0.0.1-8080-1)       at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:1.7.0_45]\n16:47:17,099 INFO  [stdout] (http-localhost-127.0.0.1-8080-1)       at java.lang.reflect.Method.invoke(Method.java:606) ~[?:1.7.0_45]\n16:47:17,099 INFO  [stdout] (http-localhost-127.0.0.1-8080-1)       at org.springframework.transaction.compensating.support.CompensatingTransactionUtils.performOperation(CompensatingTransactionUtils.java:69) ~[spring-ldap-core-2.0.2.RELEASE.jar:2.0.2.RELEASE]\n16:47:17,099 INFO  [stdout] (http-localhost-127.0.0.1-8080-1)       at org.springframework.ldap.transaction.compensating.manager.TransactionAwareDirContextInvocationHandler.invoke(TransactionAwareDirContextInvocationHandler.java:85) ~[spring-ldap-core-2.0.2.RELEASE.jar:2.0.2.RELEASE]\n16:47:17,099 INFO  [stdout] (http-localhost-127.0.0.1-8080-1)       at com.sun.proxy.$Proxy69.modifyAttributes(Unknown Source) ~[?:?]\n16:47:17,099 INFO  [stdout] (http-localhost-127.0.0.1-8080-1)       at com.st.liotroevo.web.dao.UserADRepository.update(UserADRepository.java:104) [classes:?]\n16:47:17,099 INFO  [stdout] (http-localhost-127.0.0.1-8080-1)       at com.st.liotroevo.web.service.UserService.updateUser(UserService.java:92) [classes:?]\n16:47:17,099 INFO  [stdout] (http-localhost-127.0.0.1-8080-1)       at com.st.liotroevo.web.service.serviceImpl.IPRegistrationServiceImpl.createUser(IPRegistrationServiceImpl.java:72) [classes:?]\n16:47:17,099 INFO  [stdout] (http-localhost-127.0.0.1-8080-1)       at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:1.7.0_45]\n16:47:17,115 INFO  [stdout] (http-localhost-127.0.0.1-8080-1)       at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) ~[?:1.7.0_45]\n16:47:17,115 INFO  [stdout] (http-localhost-127.0.0.1-8080-1)       at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:1.7.0_45]\n16:47:17,115 INFO  [stdout] (http-localhost-127.0.0.1-8080-1)       at java.lang.reflect.Method.invoke(Method.java:606) ~[?:1.7.0_45]\n16:47:17,115 INFO  [stdout] (http-localhost-127.0.0.1-8080-1)       at org.jboss.ws.common.invocation.AbstractInvocationHandlerJSE.invoke(AbstractInvocationHandlerJSE.java:111) [jbossws-common-2.0.2.GA.jar!/:2.0.2.GA]\n16:47:17,115 INFO  [stdout] (http-localhost-127.0.0.1-8080-1)       at org.jboss.wsf.stack.cxf.JBossWSInvoker._invokeInternal(JBossWSInvoker.java:181) [jbossws-cxf-server-4.0.2.GA.jar!/:4.0.2.GA]\n16:47:17,115 INFO  [stdout] (http-localhost-127.0.0.1-8080-1)       at org.jboss.wsf.stack.cxf.JBossWSInvoker.invoke(JBossWSInvoker.java:127) [jbossws-cxf-server-4.0.2.GA.jar!/:4.0.2.GA]\n16:47:17,115 INFO  [stdout] (http-localhost-127.0.0.1-8080-1)       at org.apache.cxf.interceptor.ServiceInvokerInterceptor$1.run(ServiceInvokerInterceptor.java:58) [cxf-rt-core-2.4.6.jar!/:2.4.6]\n16:47:17,115 INFO  [stdout] (http-localhost-127.0.0.1-8080-1)       at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471) [?:1.7.0_45]\n16:47:17,115 INFO  [stdout] (http-localhost-127.0.0.1-8080-1)       at java.util.concurrent.FutureTask.run(FutureTask.java:262) [?:1.7.0_45]\n</code></pre>\n\n<p>Below is the code snippet:</p>\n\n<pre><code>ldap.url=ldaps://url:636\nldap.userDn=CN=IP User,OU=AdminAccounts,DC=stp-qa,DC=st,DC=com\nldap.password=dummyPass\nldap.base=OU=ST,OU=People,DC=stp-qa,DC=st,DC=com\nldap.clean=false\n\n@Entry(objectClasses = {  \"top\", \"person\", \"organizationalPerson\",\"user\",\"st-individualpassportuser\"})\npublic final class User {\n\n    @Id\n    private Name dn;\n\n    @Attribute(name = \"mail\")\n    private String email;\n\n    @Attribute(name = \"cn\")\n    @DnAttribute(value=\"cn\",index=0)\n    private String fullName;\n\n    @Attribute(name = \"givenName\")\n    private String firstName;\n\n    @Attribute(name = \"sn\")\n    private String lastName;\n\n    @Attribute(name = \"st-AccValidationStatus\")\n    private String accountStatus;\n\n    @Attribute(name = \"st-entryStatus\")\n    private String validationStatus;\n\n    @Attribute(name = \"whenCreated\")\n    private String creationDate;\n\n    @Attribute(name = \"st-ValidatedOn\")\n    private String validationDate;\n\n    @Attribute(name = \"st-ValidatedBy\")\n    private String validatedBy;\n\n    @Attribute(name = \"st-currentLogon\")\n    private String lastLogon;\n\n    @Attribute(name = \"st-loginRedirectURL\")\n    private String loginRedirectUrl;\n\n    @Attribute(name = \"st-jvCompany\")\n    private String jvCode;\n\n    @Attribute(name = \"sAMAccountName\")\n    private String samAccount;\n\n    @Attribute(name = \"st-userSpecifedCompany\")\n    private String employerName;\n\n    @Attribute(name = \"postalCode\")\n    private String zipCode;\n\n    @Attribute(name=\"st-xduserid\")\n    private String xdUserId;\n\n    @Attribute(name=\"st-Logincount\")\n    private String loginCount;\n\n    @Attribute(name=\"unicodePwd\")\n    private byte[] unicodePassword;\n\n    @Attribute(name=\"userAccountControl\")\n    private String userAccountControl;\n\n    @Attribute(name=\"st-AccLastValidated\")\n    private String userAccLastValidated;\n\n    @Attribute(name=\"st-secretQuestion\")\n    private String userSecretQuestion;\n\n    @Attribute(name=\"st-secretAnswer\")\n    private String userAnswerToSecretQuestion;\n    }\n</code></pre>\n\n<p>Java Class for Password computation:</p>\n\n<pre><code>/**\n * Add unicode Password to userObject.\n * Ldap does not allow to set password/userAccountControl during creation of user by design, So need to update user after creation in AD with password and userAccountControl.\n * @param password\n */\nprivate void addPasswordToUserProfile(String password) {\n\n    String newQuotedPassword = \"\\\"\" +  password + \"\\\"\";\n    try {\n        byte[] newUnicodePassword = newQuotedPassword.getBytes(\"UTF-16LE\");\n            int UF_NORMAL_ACCOUNT = 0x0200;\n            int UF_PASSWORD_EXPIRED = 0x800000;\n            adUserBean.setUserAccountControl(Integer.toString(UF_NORMAL_ACCOUNT + UF_PASSWORD_EXPIRED));\n            adUserBean.setUnicodePassword(newUnicodePassword);\n    } catch (UnsupportedEncodingException e) {\n        logger.catching(e);\n    }\n}\n</code></pre>\n\n<p>Repository.Java</p>\n\n<pre><code>@Repository\npublic class UserADRepository {\n\n    @Autowired\n    private LdapTemplate ldapTemplate;\n\n    public User create(User user) {\n        ldapTemplate.create(user);\n        return user;\n    }\n\n    public User findByFullName(String fullName) {\n        return ldapTemplate.findOne(\n                LdapQueryBuilder.query().where(\"cn\").is(fullName), User.class);\n    }\n\n    /**\n     * Find user in LDAP based on User SamAccountName\n     * @param samAccount\n     * @return\n     */\n    public User findBySamAccountName(String samAccount) {\n        User usr = null;\n        try {\n            usr = ldapTemplate.findOne(\n                    LdapQueryBuilder.query().where(\"sAMAccountName\")\n                            .is(samAccount), User.class);\n        } catch (EmptyResultDataAccessException emptyException) {\n            return usr;\n        }\n        return usr;\n    }\n\n/**\n * Find user in LDAP based on User DN (distinguisedName) \n * @param dn\n * @return\n */\n    public User findByDn(Name dn) {\n        User usr = null;\n        try {\n            usr = ldapTemplate.findByDn(dn, User.class);\n        } catch (NameNotFoundException e) {\n            return usr;\n        }\n        return usr;\n    }\n\n    /**\n     * Update user in AD \n     * @param User\n     */\n    public void update(User User) {\n        ldapTemplate.update(User);\n    }\n\n    public void delete(User User) {\n        ldapTemplate.delete(User);\n    }\n</code></pre>\n\n<p>Thanks in advance for kind help or direction to resolve this issue.</p>\n"},{"tags":["java","spring","hibernate"],"comments":[{"owner":{"account_id":9680259,"reputation":366,"user_id":7182233,"display_name":"Aleks D"},"score":0,"creation_date":1679401412,"post_id":75800705,"comment_id":133711793,"body_markdown":"What DB driver do you use?","body":"What DB driver do you use?"}],"answers":[{"tags":[],"owner":{"account_id":19535095,"reputation":2864,"user_id":14294053,"display_name":"Mar-Z"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679402147,"creation_date":1679402147,"answer_id":75801304,"question_id":75800705,"body_markdown":"Solution 1\r\n\r\nAdd an annotation to all Timestamp entity field like:\r\n\r\n    @JdbcTypeCode(TIMESTAMP)\r\n\r\nSolution 2\r\n\r\nAdd a property to application.properties\r\n\r\n  \r\n    spring.jpa.properties.hibernate.type.preferred_instant_jdbc_type=TIMESTAMP\r\n\r\n(based on the answer by @Gavin King: [here][1])\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/75519276/spring-boot-3-hibernate-6-migration-timezone-mapping-issues","title":"Hibernate: Unable to extract JDBC value for position `2`","body":"<p>Solution 1</p>\n<p>Add an annotation to all Timestamp entity field like:</p>\n<pre><code>@JdbcTypeCode(TIMESTAMP)\n</code></pre>\n<p>Solution 2</p>\n<p>Add a property to application.properties</p>\n<pre><code>spring.jpa.properties.hibernate.type.preferred_instant_jdbc_type=TIMESTAMP\n</code></pre>\n<p>(based on the answer by @Gavin King: <a href=\"https://stackoverflow.com/questions/75519276/spring-boot-3-hibernate-6-migration-timezone-mapping-issues\">here</a>)</p>\n"}],"owner":{"account_id":1479307,"reputation":3972,"user_id":1389023,"display_name":"Istvan Devai"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1379,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1679402147,"creation_date":1679398786,"question_id":75800705,"body_markdown":"I&#39;m using Spring/Hibernate to just read up a very simple entity using a .findAll() on a Spring repository, however get the following exception:\r\n\r\n```\r\norg.hibernate.HibernateException: Unable to extract JDBC value for position `2`\r\n```\r\n\r\nIn the debugger I see that this particular column is a TIMESTAMP column in postgres and Hibernate is trying to extract the value from the resultset using the InstantAsTimestampWithTimeZoneJdbcType class. However, this class is getting a SQLFeatureNotSupportedException with message &quot;Not supported yet.&quot;. This looks very strange, Hibernate is incompatible with itself? (Using Hibernate 6.1.6).","title":"Hibernate: Unable to extract JDBC value for position `2`","body":"<p>I'm using Spring/Hibernate to just read up a very simple entity using a .findAll() on a Spring repository, however get the following exception:</p>\n<pre><code>org.hibernate.HibernateException: Unable to extract JDBC value for position `2`\n</code></pre>\n<p>In the debugger I see that this particular column is a TIMESTAMP column in postgres and Hibernate is trying to extract the value from the resultset using the InstantAsTimestampWithTimeZoneJdbcType class. However, this class is getting a SQLFeatureNotSupportedException with message &quot;Not supported yet.&quot;. This looks very strange, Hibernate is incompatible with itself? (Using Hibernate 6.1.6).</p>\n"},{"tags":["java","android","xml","android-studio","kotlin"],"answers":[{"tags":[],"owner":{"account_id":17458169,"reputation":76,"user_id":12656475,"display_name":"XaMi"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1679402127,"creation_date":1679402127,"answer_id":75801297,"question_id":75800714,"body_markdown":"Use Constraintslayout Percentage Bias Like: &quot;layout_constraintHorizontal_bias:&quot;0.4&quot; or Guidelines in both views and handle with same percentages \r\n\r\n    &lt;androidx.constraintlayout.widget.Guideline\r\n                  android:id=&quot;@+id/guidelineVertialLeft&quot;\r\n                  android:layout_width=&quot;wrap_content&quot;\r\n                  android:layout_height=&quot;wrap_content&quot;\r\n                  android:orientation=&quot;vertical&quot;\r\n                  app:layout_constraintGuide_percent=&quot;.04&quot; /&gt;","title":"Can components be aligned with each other, belonging to different views?","body":"<p>Use Constraintslayout Percentage Bias Like: &quot;layout_constraintHorizontal_bias:&quot;0.4&quot; or Guidelines in both views and handle with same percentages</p>\n<pre><code>&lt;androidx.constraintlayout.widget.Guideline\n              android:id=&quot;@+id/guidelineVertialLeft&quot;\n              android:layout_width=&quot;wrap_content&quot;\n              android:layout_height=&quot;wrap_content&quot;\n              android:orientation=&quot;vertical&quot;\n              app:layout_constraintGuide_percent=&quot;.04&quot; /&gt;\n</code></pre>\n"}],"owner":{"account_id":25996605,"reputation":39,"user_id":19707880,"display_name":"Manuel AS"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75801297,"answer_count":1,"score":0,"last_activity_date":1679402127,"creation_date":1679398839,"question_id":75800714,"body_markdown":" I am building a view (.xml) that is made up, in turn, by components of other views (different.xml).\r\n\r\n Is there a way to align one icon with another, even if they belong to different views?\r\n\r\n That is, in a fragment the upper part is loaded from an .xml with an icon and the lower part from another .xml with another icon. Both also have other components. I want to align the mentioned icons from one .xml and the other to each other.\r\n\r\n In the image that I attached would be, for example, the share icon and the heart icon.\r\n\r\n As a requirement, I can&#39;t modify the components (for example, use &quot;include&quot;, or copy one and paste it into the other view).\r\n\r\n    Thanks in advance :)\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/mXpOz.png","title":"Can components be aligned with each other, belonging to different views?","body":"<p>I am building a view (.xml) that is made up, in turn, by components of other views (different.xml).</p>\n<p>Is there a way to align one icon with another, even if they belong to different views?</p>\n<p>That is, in a fragment the upper part is loaded from an .xml with an icon and the lower part from another .xml with another icon. Both also have other components. I want to align the mentioned icons from one .xml and the other to each other.</p>\n<p>In the image that I attached would be, for example, the share icon and the heart icon.</p>\n<p>As a requirement, I can't modify the components (for example, use &quot;include&quot;, or copy one and paste it into the other view).</p>\n<pre><code>Thanks in advance :)\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/mXpOz.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/mXpOz.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","thread-safety","concurrenthashmap"],"answers":[{"tags":[],"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1678800888,"creation_date":1678800231,"answer_id":75733729,"question_id":75733281,"body_markdown":"Not only is there not a smart way to do that, but the way you&#39;ve shown won&#39;t work either.  `synchronized` does not lock a ConcurrentHashMap, which uses an entirely different mechanism for its internal concurrency; you still have the race between the `size` call and `put`.\r\n\r\n\r\nYou might consider a caching library like [Caffeine](https://github.com/ben-manes/caffeine), which might address your needs here.","title":"Java ConcurrentHashMap how to only add element if map size less than X","body":"<p>Not only is there not a smart way to do that, but the way you've shown won't work either.  <code>synchronized</code> does not lock a ConcurrentHashMap, which uses an entirely different mechanism for its internal concurrency; you still have the race between the <code>size</code> call and <code>put</code>.</p>\n<p>You might consider a caching library like <a href=\"https://github.com/ben-manes/caffeine\" rel=\"nofollow noreferrer\">Caffeine</a>, which might address your needs here.</p>\n"},{"tags":[],"owner":{"account_id":27309522,"reputation":11,"user_id":21344674,"display_name":"Shivangi Pandey"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1679401776,"creation_date":1678821632,"answer_id":75737506,"question_id":75733281,"body_markdown":"   One way can be to use the in-built `computeIfAbsent(Key, Function)` function and check for specific key being present and use the Function part of `computeIfAbsent()` to calculate value for key. \r\n\r\nYou can add condition to check for size of `ConcurrentHashMap`.\r\n\r\n        int initialCapacity = 1;\r\n        ConcurrentHashMap&lt;String,String&gt; a=new ConcurrentHashMap&lt;&gt;();\r\n        a.computeIfAbsent(&quot;b&quot;,x-&gt;{return a.size()&lt;=initialCapacity?&quot;800&quot;:null;});\r\n        System.out.println(a);\r\n\r\nFor reference, check this [link][1]\r\n\r\n\r\n  [1]: https://www.geeksforgeeks.org/concurrenthashmap-computeifabsent-method-in-java-with-examples/","title":"Java ConcurrentHashMap how to only add element if map size less than X","body":"<p>One way can be to use the in-built <code>computeIfAbsent(Key, Function)</code> function and check for specific key being present and use the Function part of <code>computeIfAbsent()</code> to calculate value for key.</p>\n<p>You can add condition to check for size of <code>ConcurrentHashMap</code>.</p>\n<pre><code>    int initialCapacity = 1;\n    ConcurrentHashMap&lt;String,String&gt; a=new ConcurrentHashMap&lt;&gt;();\n    a.computeIfAbsent(&quot;b&quot;,x-&gt;{return a.size()&lt;=initialCapacity?&quot;800&quot;:null;});\n    System.out.println(a);\n</code></pre>\n<p>For reference, check this <a href=\"https://www.geeksforgeeks.org/concurrenthashmap-computeifabsent-method-in-java-with-examples/\" rel=\"nofollow noreferrer\">link</a></p>\n"}],"owner":{"account_id":926224,"reputation":1825,"user_id":956974,"accept_rate":57,"display_name":"Alexis"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":77,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1679401776,"creation_date":1678797764,"question_id":75733281,"body_markdown":"Is there a smarter way than ?\r\n\r\n```\r\n....\r\nsynchronized (myMap) {\r\n            if (myMap.size() &lt; 5) {\r\n                myMap.putIfAbsent(&quot;something&quot;, true);\r\n            }\r\n        }\r\n...\r\n```  \r\n\r\nUPDATE:\r\n\r\nAfter trying several things I think I might have come up with something better using an AtomicInteger dictating if we can add to the map\r\n\r\n```\r\nif (count.accumulateAndGet(1, (left, right) -&gt; left &gt;= 6 ? 6 : left + right ) &lt;= 5) {\r\n            myMap.putIfAbsent(&quot;something&quot;, true);\r\n        }\r\n```","title":"Java ConcurrentHashMap how to only add element if map size less than X","body":"<p>Is there a smarter way than ?</p>\n<pre><code>....\nsynchronized (myMap) {\n            if (myMap.size() &lt; 5) {\n                myMap.putIfAbsent(&quot;something&quot;, true);\n            }\n        }\n...\n</code></pre>\n<p>UPDATE:</p>\n<p>After trying several things I think I might have come up with something better using an AtomicInteger dictating if we can add to the map</p>\n<pre><code>if (count.accumulateAndGet(1, (left, right) -&gt; left &gt;= 6 ? 6 : left + right ) &lt;= 5) {\n            myMap.putIfAbsent(&quot;something&quot;, true);\n        }\n</code></pre>\n"},{"tags":["java","android","android-activity","android-imageview"],"comments":[{"owner":{"account_id":341129,"reputation":39091,"user_id":671543,"accept_rate":55,"display_name":"njzk2"},"score":0,"creation_date":1381320736,"post_id":19271609,"comment_id":28531771,"body_markdown":"in onResume, the screen has not been laid out yet, all components are still 0x0. Consider calling getMeasuredWidth instead, or calling it after the layout is done","body":"in onResume, the screen has not been laid out yet, all components are still 0x0. Consider calling getMeasuredWidth instead, or calling it after the layout is done"},{"owner":{"account_id":2009568,"reputation":8280,"user_id":1798394,"accept_rate":68,"display_name":"Geek"},"score":1,"creation_date":1381321492,"post_id":19271609,"comment_id":28532285,"body_markdown":"@njzk2 getMeasuredWidth() also returns 0.","body":"@njzk2 getMeasuredWidth() also returns 0."}],"answers":[{"tags":[],"owner":{"account_id":907673,"reputation":10871,"user_id":942224,"accept_rate":63,"display_name":"Sanket Kachhela"},"down_vote_count":1,"up_vote_count":51,"is_accepted":true,"score":50,"last_activity_date":1490107028,"creation_date":1381320667,"answer_id":19271643,"question_id":19271609,"body_markdown":"Where you calling `getWidth()` and `getHeight()` on ImageView? If you calling from `onCreate()` in activity, it won&#39;t work. You need to wait for activity window to attached and then call `getWidth() and getHeight()` on ImageView. You can try calling `getWidth() and getHeight()` from `onWindowFocusChanged()` method of your activity.\r\n\r\ncall on onWindowFocusChanged like this way \r\n\r\n    public void onWindowFocusChanged(boolean hasFocus) {\r\n    \t// TODO Auto-generated method stub\r\n    \tsuper.onWindowFocusChanged(hasFocus);\r\n         if (hasFocus) {\r\n            ImageView img = (ImageView) findViewById(R.id.img);\r\n            Log.d(TAG, &quot;width : &quot; + img.getWidth());\r\n         }\r\n    \r\n    \t}","title":"ImageView.getWidth() returns 0","body":"<p>Where you calling <code>getWidth()</code> and <code>getHeight()</code> on ImageView? If you calling from <code>onCreate()</code> in activity, it won't work. You need to wait for activity window to attached and then call <code>getWidth() and getHeight()</code> on ImageView. You can try calling <code>getWidth() and getHeight()</code> from <code>onWindowFocusChanged()</code> method of your activity.</p>\n\n<p>call on onWindowFocusChanged like this way </p>\n\n<pre><code>public void onWindowFocusChanged(boolean hasFocus) {\n    // TODO Auto-generated method stub\n    super.onWindowFocusChanged(hasFocus);\n     if (hasFocus) {\n        ImageView img = (ImageView) findViewById(R.id.img);\n        Log.d(TAG, \"width : \" + img.getWidth());\n     }\n\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":403363,"reputation":1203,"user_id":771072,"display_name":"linakis"},"down_vote_count":2,"up_vote_count":11,"is_accepted":false,"score":9,"last_activity_date":1381321529,"creation_date":1381321529,"answer_id":19271962,"question_id":19271609,"body_markdown":"Since you already have a &quot;fixed&quot; width imageView of 200dp why don&#39;t you just put it in dimens.xml\r\n\r\n    &lt;dimen name=&quot;image_width&quot;&gt;200dp&lt;/dimen&gt;\r\n\r\nand then simply\r\n\r\n    int width = (int) getResources().getDimension(R.dimen.image_Width)","title":"ImageView.getWidth() returns 0","body":"<p>Since you already have a \"fixed\" width imageView of 200dp why don't you just put it in dimens.xml</p>\n\n<pre><code>&lt;dimen name=\"image_width\"&gt;200dp&lt;/dimen&gt;\n</code></pre>\n\n<p>and then simply</p>\n\n<pre><code>int width = (int) getResources().getDimension(R.dimen.image_Width)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":365836,"reputation":1274,"user_id":710994,"accept_rate":67,"display_name":"M.ElSaka"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1382074345,"creation_date":1382074345,"answer_id":19442286,"question_id":19271609,"body_markdown":"well i found many many questions related that are duplicate to this question, and most of the answers were not fit for my case.\r\n\r\nI have come up with a solution that may fit for yours as it does for me. Simply, i have created a custom `ImageView` and added a new callback `OnSizeChangedCallback` that is being called whenever the size of the view is changed to non zero values.\r\n\r\nHere&#39;s a code sample of my own:\r\n    \r\n    public class AvatarImageView extends ImageView{\r\n    \r\n        private OnImageViewSizeChanged sizeCallback = null;\r\n        \r\n        public AvatarImageView(Context context) {\r\n            super(context);\r\n        }\r\n        \r\n        public AvatarImageView(Context context, AttributeSet attrs) {\r\n            super(context, attrs);\r\n        }\r\n\r\n        public AvatarImageView(Context context, AttributeSet attrs, int defStyle) {\r\n            super(context, attrs, defStyle);\r\n        }\r\n        \r\n        @Override\r\n        protected void onSizeChanged(int w, int h, int oldw, int oldh) {\r\n            if (w == 0 || h == 0) {\r\n                return;\r\n            }\r\n            else{\r\n                if(sizeCallback != null)\r\n                    sizeCallback.invoke(this, w, h);\r\n            }\r\n            \r\n        }\r\n        \r\n        public void setOnImageViewSizeChanged(OnImageViewSizeChanged _callback){\r\n            this.sizeCallback = _callback;\r\n            \r\n            if (getWidth() != 0 &amp;&amp; getHeight() != 0) {\r\n                _callback.invoke(this, getWidth(), getHeight());\r\n            }\r\n        }\r\n        \r\n        public interface OnImageViewSizeChanged{\r\n            public void invoke(ImageView v, int w, int h);\r\n        }\r\n    }\r\n\r\n\r\nand you can simply use it as follows:\r\n\r\n    final AvatarImageView avatarIcon = (AvatarImageView) findViewById(R.id.avatarImg);\r\n    avatarIcon.setOnImageViewSizeChanged(new AvatarImageView.OnImageViewSizeChanged() {\r\n        @Override\r\n        public void invoke(ImageView v, final int w, final int h) {\r\n                // Do whatever you want with w and h which are non zero values ...\r\n        }\r\n    });\r\n\r\nrelated questions:\r\n\r\n 1. [views-getwidth-and-getheight-returning-0][1]\r\n 2. [android-imageview-return-getwidth-getheight-zero][2]\r\n 3. [android-get-width-returns-0][3]\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/18268915/views-getwidth-and-getheight-returning-0\r\n  [2]: https://stackoverflow.com/questions/14029513/android-imageview-return-getwidth-getheight-zero\r\n  [3]: https://stackoverflow.com/questions/3591784/android-get-width-returns-0","title":"ImageView.getWidth() returns 0","body":"<p>well i found many many questions related that are duplicate to this question, and most of the answers were not fit for my case.</p>\n\n<p>I have come up with a solution that may fit for yours as it does for me. Simply, i have created a custom <code>ImageView</code> and added a new callback <code>OnSizeChangedCallback</code> that is being called whenever the size of the view is changed to non zero values.</p>\n\n<p>Here's a code sample of my own:</p>\n\n<pre><code>public class AvatarImageView extends ImageView{\n\n    private OnImageViewSizeChanged sizeCallback = null;\n\n    public AvatarImageView(Context context) {\n        super(context);\n    }\n\n    public AvatarImageView(Context context, AttributeSet attrs) {\n        super(context, attrs);\n    }\n\n    public AvatarImageView(Context context, AttributeSet attrs, int defStyle) {\n        super(context, attrs, defStyle);\n    }\n\n    @Override\n    protected void onSizeChanged(int w, int h, int oldw, int oldh) {\n        if (w == 0 || h == 0) {\n            return;\n        }\n        else{\n            if(sizeCallback != null)\n                sizeCallback.invoke(this, w, h);\n        }\n\n    }\n\n    public void setOnImageViewSizeChanged(OnImageViewSizeChanged _callback){\n        this.sizeCallback = _callback;\n\n        if (getWidth() != 0 &amp;&amp; getHeight() != 0) {\n            _callback.invoke(this, getWidth(), getHeight());\n        }\n    }\n\n    public interface OnImageViewSizeChanged{\n        public void invoke(ImageView v, int w, int h);\n    }\n}\n</code></pre>\n\n<p>and you can simply use it as follows:</p>\n\n<pre><code>final AvatarImageView avatarIcon = (AvatarImageView) findViewById(R.id.avatarImg);\navatarIcon.setOnImageViewSizeChanged(new AvatarImageView.OnImageViewSizeChanged() {\n    @Override\n    public void invoke(ImageView v, final int w, final int h) {\n            // Do whatever you want with w and h which are non zero values ...\n    }\n});\n</code></pre>\n\n<p>related questions:</p>\n\n<ol>\n<li><a href=\"https://stackoverflow.com/questions/18268915/views-getwidth-and-getheight-returning-0\">views-getwidth-and-getheight-returning-0</a></li>\n<li><a href=\"https://stackoverflow.com/questions/14029513/android-imageview-return-getwidth-getheight-zero\">android-imageview-return-getwidth-getheight-zero</a></li>\n<li><a href=\"https://stackoverflow.com/questions/3591784/android-get-width-returns-0\">android-get-width-returns-0</a></li>\n</ol>\n"},{"tags":[],"owner":{"account_id":15622395,"reputation":184,"user_id":11270882,"display_name":"尹劍平"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1598495872,"creation_date":1598495872,"answer_id":63608325,"question_id":19271609,"body_markdown":"You need to wait for ImageView inflated. To try `OnLayoutChangeListener`.\r\n\r\n\r\n            imageView.addOnLayoutChangeListener((v, left, top, right, bottom, oldLeft, oldTop, oldRight, oldBottom) -&gt; {\r\n                //\r\n                if (imageView.getWidth() &gt; 0 &amp;&amp; imageView.getHeight() &gt; 0) {\r\n                    // put your code here...\r\n                }\r\n            });","title":"ImageView.getWidth() returns 0","body":"<p>You need to wait for ImageView inflated. To try <code>OnLayoutChangeListener</code>.</p>\n<pre><code>        imageView.addOnLayoutChangeListener((v, left, top, right, bottom, oldLeft, oldTop, oldRight, oldBottom) -&gt; {\n            //\n            if (imageView.getWidth() &gt; 0 &amp;&amp; imageView.getHeight() &gt; 0) {\n                // put your code here...\n            }\n        });\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2869366,"reputation":16311,"user_id":2463035,"accept_rate":84,"display_name":"Vasiliy"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679401744,"creation_date":1679401744,"answer_id":75801223,"question_id":19271609,"body_markdown":"Just came around this old question. Basically, the solution is to wait for the ImageView (or any other View, really) to be measured and &quot;drawn&quot;. You can achieve that with implementing some late lifecycle callback (e.g. `onGlobalLayout`), but I found a simpler solution that works well for me: just wait for the attributes to become non-zero.\r\n\r\nThe caveat here is that you mustn&#39;t block the UI thread while waitig. It&#39;s very easy to achieve if you use Kotlin Coroutines:\r\n\r\n```\r\noverride fun onStart() {\r\n        super.onStart()\r\n       \r\n        coroutineScope.launch {\r\n            while (imgBarcode.width == 0 || imgBarcode.height == 0) {\r\n                MyLogger.d(&quot;waiting for ImageView to get its eventual size&quot;)\r\n                delay(50)\r\n            }\r\n\r\n            val barcodeBitmap = generateBarcodeUseCase.generateBarcode(\r\n                data, imgBarcode.width, imgBarcode.height\r\n            )\r\n\r\n            imgBarcode.setImageBitmap(barcodeBitmap)\r\n        }\r\n    }\r\n```\r\n\r\nIf you don&#39;t use Coroutines, you&#39;ll need to use e.g. `Handler.postDelayed()` calls to implement the same feature.","title":"ImageView.getWidth() returns 0","body":"<p>Just came around this old question. Basically, the solution is to wait for the ImageView (or any other View, really) to be measured and &quot;drawn&quot;. You can achieve that with implementing some late lifecycle callback (e.g. <code>onGlobalLayout</code>), but I found a simpler solution that works well for me: just wait for the attributes to become non-zero.</p>\n<p>The caveat here is that you mustn't block the UI thread while waitig. It's very easy to achieve if you use Kotlin Coroutines:</p>\n<pre><code>override fun onStart() {\n        super.onStart()\n       \n        coroutineScope.launch {\n            while (imgBarcode.width == 0 || imgBarcode.height == 0) {\n                MyLogger.d(&quot;waiting for ImageView to get its eventual size&quot;)\n                delay(50)\n            }\n\n            val barcodeBitmap = generateBarcodeUseCase.generateBarcode(\n                data, imgBarcode.width, imgBarcode.height\n            )\n\n            imgBarcode.setImageBitmap(barcodeBitmap)\n        }\n    }\n</code></pre>\n<p>If you don't use Coroutines, you'll need to use e.g. <code>Handler.postDelayed()</code> calls to implement the same feature.</p>\n"}],"owner":{"account_id":2009568,"reputation":8280,"user_id":1798394,"accept_rate":68,"display_name":"Geek"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":30913,"favorite_count":0,"down_vote_count":1,"up_vote_count":24,"accepted_answer_id":19271643,"answer_count":5,"score":23,"last_activity_date":1679401744,"creation_date":1381320569,"question_id":19271609,"body_markdown":"I get imageView&#39;s width 0. Below is code.\r\n\r\n**xml file :**\r\n\r\n    &lt;ImageView\r\n            android:id=&quot;@+id/img&quot;\r\n            android:layout_width=&quot;200dp&quot;\r\n            android:layout_height=&quot;200dp&quot; /&gt;\r\n\r\n**Activity :**\r\n\r\n    @Override\r\n    protected void onResume() {\r\n        super.onResume();\r\n        ImageView img = (ImageView) findViewById(R.id.img);\r\n        Log.d(TAG, &quot;width : &quot; + img.getWidth());\r\n    }\r\n\r\nI don&#39;t want to use below code as I need to place this code in so many places.\r\n\r\n    ViewTreeObserver vto = img.getViewTreeObserver();\r\n\t\tvto.addOnPreDrawListener(new ViewTreeObserver.OnPreDrawListener() {\r\n\t\t    public boolean onPreDraw() {\r\n\t\t    \tImageView img = (ImageView) findViewById(R.id.img);\r\n                        Log.d(TAG, &quot;width : &quot; + img.getWidth());\r\n\t\t        return true;\r\n\t\t    }\r\n\t\t});\r\n\r\n**My workaround :**\r\nI actually later did not need to add this code in an activity. I added it to a non-activity class and instead of ImageView&#39;s width I used Bitmap image&#39;s width and now does not have this problem.","title":"ImageView.getWidth() returns 0","body":"<p>I get imageView's width 0. Below is code.</p>\n\n<p><strong>xml file :</strong></p>\n\n<pre><code>&lt;ImageView\n        android:id=\"@+id/img\"\n        android:layout_width=\"200dp\"\n        android:layout_height=\"200dp\" /&gt;\n</code></pre>\n\n<p><strong>Activity :</strong></p>\n\n<pre><code>@Override\nprotected void onResume() {\n    super.onResume();\n    ImageView img = (ImageView) findViewById(R.id.img);\n    Log.d(TAG, \"width : \" + img.getWidth());\n}\n</code></pre>\n\n<p>I don't want to use below code as I need to place this code in so many places.</p>\n\n<pre><code>ViewTreeObserver vto = img.getViewTreeObserver();\n    vto.addOnPreDrawListener(new ViewTreeObserver.OnPreDrawListener() {\n        public boolean onPreDraw() {\n            ImageView img = (ImageView) findViewById(R.id.img);\n                    Log.d(TAG, \"width : \" + img.getWidth());\n            return true;\n        }\n    });\n</code></pre>\n\n<p><strong>My workaround :</strong>\nI actually later did not need to add this code in an activity. I added it to a non-activity class and instead of ImageView's width I used Bitmap image's width and now does not have this problem.</p>\n"},{"tags":["java","android","debugging","bluetooth"],"comments":[{"owner":{"account_id":3482475,"reputation":27230,"user_id":2914140,"accept_rate":69,"display_name":"CoolMind"},"score":1,"creation_date":1679252330,"post_id":75784215,"comment_id":133683950,"body_markdown":"Probably https://stackoverflow.com/questions/67722950/android-12-new-bluetooth-permissions.","body":"Probably <a href=\"https://stackoverflow.com/questions/67722950/android-12-new-bluetooth-permissions\" title=\"android 12 new bluetooth permissions\">stackoverflow.com/questions/67722950/&hellip;</a>."},{"owner":{"account_id":11726832,"reputation":19,"user_id":21361218,"display_name":"lemonJuice"},"score":0,"creation_date":1679287206,"post_id":75784215,"comment_id":133687966,"body_markdown":"It is in Kotlin, any resourse that helps how to implement it in java?","body":"It is in Kotlin, any resourse that helps how to implement it in java?"},{"owner":{"account_id":3482475,"reputation":27230,"user_id":2914140,"accept_rate":69,"display_name":"CoolMind"},"score":0,"creation_date":1679298641,"post_id":75784215,"comment_id":133689661,"body_markdown":"Well, it is straight forward, no need of difficult Java code. Just replace `val` with variable definition, add `;` at the end, etc.","body":"Well, it is straight forward, no need of difficult Java code. Just replace <code>val</code> with variable definition, add <code>;</code> at the end, etc."}],"owner":{"account_id":11726832,"reputation":19,"user_id":21361218,"display_name":"lemonJuice"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":50,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679401707,"creation_date":1679251347,"question_id":75784215,"body_markdown":"I am following [this](https://github.com/clopresti/rpi-bluetooth/blob/master/Android/app/src/main/java/net/clopresti/rpibluetooth/MainActivity.java) code to control the LED on the Raspberry pi with an android application using bluetooth.","title":"Android app run time error and app crashes","body":"<p>I am following <a href=\"https://github.com/clopresti/rpi-bluetooth/blob/master/Android/app/src/main/java/net/clopresti/rpibluetooth/MainActivity.java\" rel=\"nofollow noreferrer\">this</a> code to control the LED on the Raspberry pi with an android application using bluetooth.</p>\n"},{"tags":["java","multithreading","producer-consumer","java-threads"],"answers":[{"tags":[],"owner":{"account_id":422870,"reputation":25925,"user_id":801894,"display_name":"Solomon Slow"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1679401305,"creation_date":1679401305,"answer_id":75801155,"question_id":75800321,"body_markdown":"Here&#39;s one\\* problem: Suppose a consumer calls `waitOnEmpty()`. **Q:** After that call returns, is the queue empty or not empty? **A:** You have no way of telling.\r\n\r\nThe problem is, you have two consumers. If one of them is waiting for the queue to become non-empty, then chances are, both of them are waiting. If the producer puts one number into the queue and then wakes both consumers, then both `waitOnEmpty()` calls will return, but only one of two consumers will be able to remove a number from the queue. The other consumer will find the queue to be empty even though `waitOnEmpty()` returned.\r\n\r\nWhen you use `wait()` and `notify()`, you need to do it like this:\r\n\r\n**Consumer**\r\n\r\n``` lang-java\r\nsynchronized (lock) {\r\n    while (conditionIsNotMet()) {\r\n        lock.wait();\r\n    }\r\n    // !! While still in the SAME `synchronized` block!!\r\n    doThingThatRequiresConditionToBeMet();\r\n}\r\n```\r\n\r\n**Producer**\r\n\r\n``` lang-java\r\nsynchronized (lock)  {\r\n    doThingThatMeetsCondition();\r\n    // !! While still in the SAME `synchronized` block!!\r\n    lock.notifyAll();\r\n}\r\n```\r\n\r\nThe important part is, the consumer does not unlock the lock after testing the condition and before doing whatever requires the condition to be true. Staying in that same `synchronized` block is what keeps other threads (especially, other consumers) from changing whether or not the condition still _is_ true after the consumer has tested it.\r\n\r\n-------------\r\n\r\n\\* Maybe not the only problem. I haven&#39;t thoroughly reviewed your code.","title":"A Deadlock Problem When Dealing with Producer-Consumer Java","body":"<p>Here's one* problem: Suppose a consumer calls <code>waitOnEmpty()</code>. <strong>Q:</strong> After that call returns, is the queue empty or not empty? <strong>A:</strong> You have no way of telling.</p>\n<p>The problem is, you have two consumers. If one of them is waiting for the queue to become non-empty, then chances are, both of them are waiting. If the producer puts one number into the queue and then wakes both consumers, then both <code>waitOnEmpty()</code> calls will return, but only one of two consumers will be able to remove a number from the queue. The other consumer will find the queue to be empty even though <code>waitOnEmpty()</code> returned.</p>\n<p>When you use <code>wait()</code> and <code>notify()</code>, you need to do it like this:</p>\n<p><strong>Consumer</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>synchronized (lock) {\n    while (conditionIsNotMet()) {\n        lock.wait();\n    }\n    // !! While still in the SAME `synchronized` block!!\n    doThingThatRequiresConditionToBeMet();\n}\n</code></pre>\n<p><strong>Producer</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>synchronized (lock)  {\n    doThingThatMeetsCondition();\n    // !! While still in the SAME `synchronized` block!!\n    lock.notifyAll();\n}\n</code></pre>\n<p>The important part is, the consumer does not unlock the lock after testing the condition and before doing whatever requires the condition to be true. Staying in that same <code>synchronized</code> block is what keeps other threads (especially, other consumers) from changing whether or not the condition still <em>is</em> true after the consumer has tested it.</p>\n<hr />\n<p>* Maybe not the only problem. I haven't thoroughly reviewed your code.</p>\n"}],"owner":{"account_id":19298352,"reputation":77,"user_id":14106839,"display_name":"Snefru Clone"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1679401305,"creation_date":1679396355,"question_id":75800321,"body_markdown":"I am trying to implement producer and consumer problem in different ways. Hence, I created two consumer and one producer threads. The task is to print even numbers in Consumer1 Thread and odd numbers in Consumer2 Thread. I know that I am using anti-patterns and do everything incorrectly, but it is just an experimentation. \r\n\r\nAnyways, whenever I run the program, I do come across with potentially deadlock situations. \r\nI assume this because the program prints nothing to the console. \r\n\r\n**Class Info:**\r\n\r\nNumbersThread: the class at the top of inheritance three. Provides shared Queue\r\n\r\nProducerThread: randomly generates numbers in range 0 to 49 and pushes them to Queue. \r\n\r\nConsumer1Thread: prints even numbers in the Queue\r\n\r\nConsumer2Thread: prints odd numbers in the Queue\r\n \r\n\r\nHere is class-by-class code:\r\n\r\n## NumbersThread ##\r\n\r\n    class NumbersThread extends Thread {\r\n    private int capacity = 64;\r\n    private final Queue&lt;Integer&gt; numbersQueue;\r\n\r\n    \r\n    // field variables, constructors etc.\r\n    \r\n    // peek, poll, and add methods synchronized on numbersQueue\r\n\r\n    protected final void notifyAllForFull() {\r\n        synchronized (FULL_LOCK) {\r\n            FULL_LOCK.notifyAll();\r\n        }\r\n    }\r\n\r\n    protected final void notifyAllForEmpty() {\r\n        synchronized (EMPTY_LOCK) {\r\n            EMPTY_LOCK.notifyAll();\r\n        }\r\n    }\r\n\r\n    protected final void waitOnEmpty() throws InterruptedException {\r\n        synchronized (EMPTY_LOCK) {\r\n            EMPTY_LOCK.wait();\r\n        }\r\n    }\r\n\r\n    protected final void waitOnFull() throws InterruptedException {\r\n        synchronized (FULL_LOCK) {\r\n            FULL_LOCK.wait();\r\n        }\r\n    }\r\n}\r\n\r\n## Producer Thread ##\r\n\r\n    class ProducerThread extends NumbersThread {\r\n\r\n    ProducerThread(Queue&lt;Integer&gt; numbersQueue) {\r\n        super(numbersQueue);\r\n    }\r\n\r\n    @Override\r\n    public void run() {\r\n        run:\r\n        while (true) {\r\n            while (isFull()) {\r\n                try {\r\n                   waitOnFull();\r\n                } catch (InterruptedException e) {\r\n                    break run;\r\n                }\r\n            }\r\n\r\n            var rand = new Random();\r\n            add(rand.nextInt(50));\r\n            notifyAllForEmpty();\r\n        }\r\n    }\r\n}\r\n\r\n## Consumer1 Thread (the same logic with Consumer2) ##\r\n\r\n    class Consumer1Thread extends NumbersThread {\r\n    Consumer1Thread(Queue&lt;Integer&gt; numbersQueue) {\r\n        super(numbersQueue);\r\n    }\r\n\r\n    @Override\r\n    public void run() {\r\n        run:\r\n        while (true) {\r\n\r\n            while (isEmpty()) {\r\n                try {\r\n                    waitOnEmpty();\r\n                } catch (InterruptedException e) {\r\n                    break run;\r\n                }\r\n            }\r\n\r\n            Integer num = peek();\r\n\r\n            if (num != null &amp;&amp; num % 2 == 0  ) {\r\n                int n = poll();\r\n                notifyAllForFull();\r\n                System.out.println(&quot;Consumer 1 (even): &quot; + n);\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nAny helps will be appreciated!\r\n","title":"A Deadlock Problem When Dealing with Producer-Consumer Java","body":"<p>I am trying to implement producer and consumer problem in different ways. Hence, I created two consumer and one producer threads. The task is to print even numbers in Consumer1 Thread and odd numbers in Consumer2 Thread. I know that I am using anti-patterns and do everything incorrectly, but it is just an experimentation.</p>\n<p>Anyways, whenever I run the program, I do come across with potentially deadlock situations.\nI assume this because the program prints nothing to the console.</p>\n<p><strong>Class Info:</strong></p>\n<p>NumbersThread: the class at the top of inheritance three. Provides shared Queue</p>\n<p>ProducerThread: randomly generates numbers in range 0 to 49 and pushes them to Queue.</p>\n<p>Consumer1Thread: prints even numbers in the Queue</p>\n<p>Consumer2Thread: prints odd numbers in the Queue</p>\n<p>Here is class-by-class code:</p>\n<h2>NumbersThread</h2>\n<pre><code>class NumbersThread extends Thread {\nprivate int capacity = 64;\nprivate final Queue&lt;Integer&gt; numbersQueue;\n\n\n// field variables, constructors etc.\n\n// peek, poll, and add methods synchronized on numbersQueue\n\nprotected final void notifyAllForFull() {\n    synchronized (FULL_LOCK) {\n        FULL_LOCK.notifyAll();\n    }\n}\n\nprotected final void notifyAllForEmpty() {\n    synchronized (EMPTY_LOCK) {\n        EMPTY_LOCK.notifyAll();\n    }\n}\n\nprotected final void waitOnEmpty() throws InterruptedException {\n    synchronized (EMPTY_LOCK) {\n        EMPTY_LOCK.wait();\n    }\n}\n\nprotected final void waitOnFull() throws InterruptedException {\n    synchronized (FULL_LOCK) {\n        FULL_LOCK.wait();\n    }\n}\n</code></pre>\n<p>}</p>\n<h2>Producer Thread</h2>\n<pre><code>class ProducerThread extends NumbersThread {\n\nProducerThread(Queue&lt;Integer&gt; numbersQueue) {\n    super(numbersQueue);\n}\n\n@Override\npublic void run() {\n    run:\n    while (true) {\n        while (isFull()) {\n            try {\n               waitOnFull();\n            } catch (InterruptedException e) {\n                break run;\n            }\n        }\n\n        var rand = new Random();\n        add(rand.nextInt(50));\n        notifyAllForEmpty();\n    }\n}\n</code></pre>\n<p>}</p>\n<h2>Consumer1 Thread (the same logic with Consumer2)</h2>\n<pre><code>class Consumer1Thread extends NumbersThread {\nConsumer1Thread(Queue&lt;Integer&gt; numbersQueue) {\n    super(numbersQueue);\n}\n\n@Override\npublic void run() {\n    run:\n    while (true) {\n\n        while (isEmpty()) {\n            try {\n                waitOnEmpty();\n            } catch (InterruptedException e) {\n                break run;\n            }\n        }\n\n        Integer num = peek();\n\n        if (num != null &amp;&amp; num % 2 == 0  ) {\n            int n = poll();\n            notifyAllForFull();\n            System.out.println(&quot;Consumer 1 (even): &quot; + n);\n        }\n    }\n}\n</code></pre>\n<p>}</p>\n<p>Any helps will be appreciated!</p>\n"},{"tags":["java","jhipster","jdl"],"comments":[{"owner":{"account_id":11764939,"reputation":3827,"user_id":8609847,"display_name":"Satish Patro"},"score":0,"creation_date":1542888324,"post_id":53430632,"comment_id":93735137,"body_markdown":"Is it complusory to give application &gt; config ?","body":"Is it complusory to give application &gt; config ?"},{"owner":{"account_id":11764939,"reputation":3827,"user_id":8609847,"display_name":"Satish Patro"},"score":0,"creation_date":1542888350,"post_id":53430632,"comment_id":93735148,"body_markdown":"And why it is not creating entity in java code ?","body":"And why it is not creating entity in java code ?"},{"owner":{"account_id":11764939,"reputation":3827,"user_id":8609847,"display_name":"Satish Patro"},"score":0,"creation_date":1543471442,"post_id":53430632,"comment_id":93933317,"body_markdown":"I tried to add it in code editor, but I can&#39;t able to, and that 4 space in first is to show it in diff line, otherwise it was taking everything in 1 line","body":"I tried to add it in code editor, but I can&#39;t able to, and that 4 space in first is to show it in diff line, otherwise it was taking everything in 1 line"}],"answers":[{"tags":[],"owner":{"account_id":4609207,"reputation":6264,"user_id":3737815,"display_name":"Jon Ruddell"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1543514594,"creation_date":1543344581,"answer_id":53506288,"question_id":53430632,"body_markdown":"You need to assign the entities to the application, using `entities *` in the app config:\r\n\r\n    application {\r\n        config {\r\n            prodDatabaseType mysql\r\n            buildTool maven\r\n        }\r\n        entities *\r\n    }\r\n    // your entities here\r\n\r\n","title":"Jhipster not creating entities which I have imported at the time of jhipster command","body":"<p>You need to assign the entities to the application, using <code>entities *</code> in the app config:</p>\n\n<pre><code>application {\n    config {\n        prodDatabaseType mysql\n        buildTool maven\n    }\n    entities *\n}\n// your entities here\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11764939,"reputation":3827,"user_id":8609847,"display_name":"Satish Patro"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679401174,"creation_date":1543469883,"answer_id":53532512,"question_id":53430632,"body_markdown":"Got the answer. \r\n\r\nWhen I gave according to question, it created only according to application&gt;config like mysql db, maven build tool and when I run it, it didn&#39;t ask any other options like basename, port, marketplace, instead of those 2 fields(db, buildtool), it took everything default value. \r\n\r\nAnd for entity, it wrote not overriding entity/extra entity not found\r\n\r\n**Solution**\r\n\r\n1.First run only &quot;jhipster&quot; and choose options\r\n\r\n    &gt;jhipster\r\n\r\n2.import jdl fine with out application&gt;config properties\r\n\r\n    &gt;jhipster import-jdl jdlfilename.jdl\r\n\r\njdlfilename can be in jdl or jh format and if it is outside of directory give absolute path","title":"Jhipster not creating entities which I have imported at the time of jhipster command","body":"<p>Got the answer.</p>\n<p>When I gave according to question, it created only according to application&gt;config like mysql db, maven build tool and when I run it, it didn't ask any other options like basename, port, marketplace, instead of those 2 fields(db, buildtool), it took everything default value.</p>\n<p>And for entity, it wrote not overriding entity/extra entity not found</p>\n<p><strong>Solution</strong></p>\n<p>1.First run only &quot;jhipster&quot; and choose options</p>\n<pre><code>&gt;jhipster\n</code></pre>\n<p>2.import jdl fine with out application&gt;config properties</p>\n<pre><code>&gt;jhipster import-jdl jdlfilename.jdl\n</code></pre>\n<p>jdlfilename can be in jdl or jh format and if it is outside of directory give absolute path</p>\n"}],"owner":{"account_id":11764939,"reputation":3827,"user_id":8609847,"display_name":"Satish Patro"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2376,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":2,"score":4,"last_activity_date":1679401174,"creation_date":1542888291,"question_id":53430632,"body_markdown":"I have used `jhipster import-jdl my_file.jdl`\r\nJhipster version V5.7.0\r\n\r\nAnd content of that jdl file is(below(IDK application?config is not showing in code editor in stack overflow))\r\n\r\n    \r\n    application {\r\n        config {\r\n            prodDatabaseType mysql\r\n            buildTool maven\r\n        }\r\n    }\r\n\r\n    entity Region {\r\n        regionName String\r\n    }\r\n\r\n    entity Country {\r\n        countryName String\r\n    }\r\n\r\n    // an ignored comment\r\n    /** not an ignored comment */\r\n    entity Location {\r\n        streetAddress String,\r\n        postalCode String,\r\n        city String,\r\n        stateProvince String\r\n    }\r\n\r\n    entity Department {\r\n        departmentName String required\r\n    }\r\n\r\n    entity Task {\r\n        title String,\r\n        description String\r\n    }\r\n\r\n    entity Employee {\r\n        firstName String,\r\n        lastName String,\r\n        email String,\r\n        phoneNumber String,\r\n        hireDate Instant,\r\n        salary Long,\r\n        commissionPct Long\r\n    }\r\n\r\n    entity Job {\r\n        jobTitle String,\r\n        minSalary Long,\r\n        maxSalary Long\r\n    }\r\n\r\n    entity JobHistory {\r\n        startDate Instant,\r\n        endDate Instant,\r\n        language Language\r\n    }\r\n\r\n    enum Language {\r\n        FRENCH, ENGLISH, SPANISH\r\n    }\r\n\r\n    relationship OneToOne {\r\n        Country{region} to Region\r\n    }\r\n\r\n    relationship OneToOne {\r\n        Location{country} to Country\r\n    }\r\n\r\n    relationship OneToOne {\r\n        Department{location} to Location\r\n    }\r\n\r\n    relationship ManyToMany {\r\n        Job{task(title)} to Task{job}\r\n    }\r\n\r\n    relationship OneToMany {\r\n        Employee{job} to Job,\r\n        Department{employee} to\tEmployee\r\n    }\r\n\r\n    relationship ManyToOne {\r\n        Employee{manager} to Employee\r\n    }\r\n\r\n    relationship OneToOne {\r\n        JobHistory{job} to Job,\r\n        JobHistory{department} to Department,\r\n        JobHistory{employee} to Employee\r\n    }\r\n\r\n    // Set pagination options\r\n    paginate JobHistory, Employee with infinite-scroll\r\n    paginate Job with pagination\r\n\r\n    // Use Data Transfert Objects (DTO)\r\n    // dto * with mapstruct\r\n\r\n    // Set service options to all except few\r\n    //service all with serviceImpl except Employee, Job\r\n\r\n    // Set an angular suffix\r\n    // angularSuffix * with mySuffix`\r\n\r\nAnd cmd showing\r\n\r\n    DEBUG!  importState exportedEntities: 0\r\n    DEBUG!  importState exportedApplications: 1  \r\n    DEBUG!  importState exportedDeployments: 0\r\n    INFO! No change in entity configurations, no entities were updated.\r\n\r\nWhen I am not mentioning application &gt; config details, it is giving error as \r\n\r\n    Error: The JDL object and the database type are both mandatory.        \r\n    ERROR! Error while parsing applications and entities from the JDL Error: The JDL object and the database type are both mandatory.\r\n\r\nCan anyone tell me what I am doing wrong ?","title":"Jhipster not creating entities which I have imported at the time of jhipster command","body":"<p>I have used <code>jhipster import-jdl my_file.jdl</code>\nJhipster version V5.7.0</p>\n\n<p>And content of that jdl file is(below(IDK application?config is not showing in code editor in stack overflow))</p>\n\n<pre><code>application {\n    config {\n        prodDatabaseType mysql\n        buildTool maven\n    }\n}\n\nentity Region {\n    regionName String\n}\n\nentity Country {\n    countryName String\n}\n\n// an ignored comment\n/** not an ignored comment */\nentity Location {\n    streetAddress String,\n    postalCode String,\n    city String,\n    stateProvince String\n}\n\nentity Department {\n    departmentName String required\n}\n\nentity Task {\n    title String,\n    description String\n}\n\nentity Employee {\n    firstName String,\n    lastName String,\n    email String,\n    phoneNumber String,\n    hireDate Instant,\n    salary Long,\n    commissionPct Long\n}\n\nentity Job {\n    jobTitle String,\n    minSalary Long,\n    maxSalary Long\n}\n\nentity JobHistory {\n    startDate Instant,\n    endDate Instant,\n    language Language\n}\n\nenum Language {\n    FRENCH, ENGLISH, SPANISH\n}\n\nrelationship OneToOne {\n    Country{region} to Region\n}\n\nrelationship OneToOne {\n    Location{country} to Country\n}\n\nrelationship OneToOne {\n    Department{location} to Location\n}\n\nrelationship ManyToMany {\n    Job{task(title)} to Task{job}\n}\n\nrelationship OneToMany {\n    Employee{job} to Job,\n    Department{employee} to Employee\n}\n\nrelationship ManyToOne {\n    Employee{manager} to Employee\n}\n\nrelationship OneToOne {\n    JobHistory{job} to Job,\n    JobHistory{department} to Department,\n    JobHistory{employee} to Employee\n}\n\n// Set pagination options\npaginate JobHistory, Employee with infinite-scroll\npaginate Job with pagination\n\n// Use Data Transfert Objects (DTO)\n// dto * with mapstruct\n\n// Set service options to all except few\n//service all with serviceImpl except Employee, Job\n\n// Set an angular suffix\n// angularSuffix * with mySuffix`\n</code></pre>\n\n<p>And cmd showing</p>\n\n<pre><code>DEBUG!  importState exportedEntities: 0\nDEBUG!  importState exportedApplications: 1  \nDEBUG!  importState exportedDeployments: 0\nINFO! No change in entity configurations, no entities were updated.\n</code></pre>\n\n<p>When I am not mentioning application > config details, it is giving error as </p>\n\n<pre><code>Error: The JDL object and the database type are both mandatory.        \nERROR! Error while parsing applications and entities from the JDL Error: The JDL object and the database type are both mandatory.\n</code></pre>\n\n<p>Can anyone tell me what I am doing wrong ?</p>\n"},{"tags":["java","spring","serialization","jackson"],"comments":[{"owner":{"account_id":16211352,"reputation":4324,"user_id":11713777,"display_name":"dariosicily"},"score":0,"creation_date":1679422451,"post_id":75801112,"comment_id":133718566,"body_markdown":"I tried your code just modyifing the classname to `Data` and it works fine with jackson v14 (no spring env).","body":"I tried your code just modyifing the classname to <code>Data</code> and it works fine with jackson v14 (no spring env)."}],"owner":{"account_id":8364428,"reputation":81,"user_id":6281618,"display_name":"Hydralore"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":73,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679401098,"creation_date":1679401098,"question_id":75801112,"body_markdown":"Recently I&#39;ve been working on de-serializing XML into Java POJO&#39;s using Jackson. I&#39;ve noted that any properties which have more than one instance within the XML, and have an underscore in their name, do not get processed correctly. \r\n\r\nFor example, say we have the below XML\r\n\r\n    &lt;data&gt;\r\n        &lt;some_element&gt;Element One&lt;/some_element&gt;\r\n        &lt;some_element&gt;Element Two&lt;/some_element&gt;\r\n        &lt;some_element&gt;Element Three&lt;/some_element&gt;\r\n        &lt;some_element&gt;Element Four&lt;/some_element&gt;\r\n    &lt;/data&gt;\r\n\r\nAnd a class\r\n\r\n    public class data {\r\n        @JacksonXmlElementWrapper(useWrapping = false)\r\n        @JacksonXmlProperty(localName = &quot;some_element&quot;)\r\n        private List&lt;String&gt; elements;\r\n    }\r\n\r\nI find that the list will only ever contain one element, which is the final one shown in the XML, in this case &quot;ElementFour&quot;\r\n\r\nI have found that if I were to remove the &quot;_&quot; from the XML (some_element -&gt; someelment) then all items would be populated within the list. \r\n\r\nUnfortunately I am unable to alter this XML in production as it is provided by a 3rd party. I have checked various annotations but have yet to find a solution for this issue. ","title":"Java - Jackson - Deserializing XML elements into a list where the xml properties have underscores","body":"<p>Recently I've been working on de-serializing XML into Java POJO's using Jackson. I've noted that any properties which have more than one instance within the XML, and have an underscore in their name, do not get processed correctly.</p>\n<p>For example, say we have the below XML</p>\n<pre><code>&lt;data&gt;\n    &lt;some_element&gt;Element One&lt;/some_element&gt;\n    &lt;some_element&gt;Element Two&lt;/some_element&gt;\n    &lt;some_element&gt;Element Three&lt;/some_element&gt;\n    &lt;some_element&gt;Element Four&lt;/some_element&gt;\n&lt;/data&gt;\n</code></pre>\n<p>And a class</p>\n<pre><code>public class data {\n    @JacksonXmlElementWrapper(useWrapping = false)\n    @JacksonXmlProperty(localName = &quot;some_element&quot;)\n    private List&lt;String&gt; elements;\n}\n</code></pre>\n<p>I find that the list will only ever contain one element, which is the final one shown in the XML, in this case &quot;ElementFour&quot;</p>\n<p>I have found that if I were to remove the &quot;_&quot; from the XML (some_element -&gt; someelment) then all items would be populated within the list.</p>\n<p>Unfortunately I am unable to alter this XML in production as it is provided by a 3rd party. I have checked various annotations but have yet to find a solution for this issue.</p>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":17520379,"reputation":1536,"user_id":12706564,"display_name":"Emanuel Trandafir"},"score":4,"creation_date":1679387005,"post_id":75798708,"comment_id":133708010,"body_markdown":"can you share what you have tried so far?","body":"can you share what you have tried so far?"}],"answers":[{"tags":[],"owner":{"account_id":27896125,"reputation":138,"user_id":21301377,"display_name":"Anonymus"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679390333,"creation_date":1679390333,"answer_id":75799276,"question_id":75798708,"body_markdown":"I think you should pass request param as a number\r\n\r\nthen it will be simple as the validation assumes the value from 1-7\r\n\r\nOf course, you will also have to update the enum to numeric\r\n\r\nIf you keep the request as a string, you can parse it to number\r\n\r\nThis is topic example for parse to number: [here][1]\r\n\r\n\r\n  [1]: https://stackabuse.com/java-check-if-string-is-a-number/","title":"Validating rest end point with enum","body":"<p>I think you should pass request param as a number</p>\n<p>then it will be simple as the validation assumes the value from 1-7</p>\n<p>Of course, you will also have to update the enum to numeric</p>\n<p>If you keep the request as a string, you can parse it to number</p>\n<p>This is topic example for parse to number: <a href=\"https://stackabuse.com/java-check-if-string-is-a-number/\" rel=\"nofollow noreferrer\">here</a></p>\n"},{"tags":[],"owner":{"account_id":139494,"reputation":804,"user_id":345130,"accept_rate":40,"display_name":"ILya Cyclone"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679395933,"creation_date":1679395570,"answer_id":75800192,"question_id":75798708,"body_markdown":"There is standard java.time.DayOfWeek. It has following method\r\n\r\n```\r\nprivate static final DayOfWeek[] ENUMS = DayOfWeek.values();\r\npublic static DayOfWeek of(int dayOfWeek) {\r\n        if (dayOfWeek &lt; 1 || dayOfWeek &gt; 7) {\r\n            throw new DateTimeException(&quot;Invalid value for DayOfWeek: &quot; + dayOfWeek);\r\n        }\r\n        return ENUMS[dayOfWeek - 1];\r\n    }\r\n```\r\n\r\nThink about using this enum instead of yours.  \r\nOr you could write the same method in your enum.  \r\nOr you could easily convert this enum to your like this:  \r\n`Day day = Day.valueOf(java.time.DayOfWeek.of(dayParam).name())` given that days names match.\r\n    \r\nAnd I think Spring will automatically convert &quot;01&quot; string to 1 Integer if you want, so should be able to use @RequestParam Integer.\r\n\r\n---------\r\n\r\nOr you could do something much more verbose\r\n\r\n```\r\npublic enum Day {\r\n    MONDAY(&quot;01&quot;), ... ;\r\n\r\n\tprivate static final Map&lt;String, Day&gt; daysByValue = Stream.of(values())\r\n\t\t.collect(Collectors.toMap(d -&gt; d.value, Function.identity()));\r\n\r\n    private final String value;\r\n\r\n    private Event(String value) {\r\n        this.value = value;\r\n    }\r\n\t\r\n\tpublic static Optional&lt;Day&gt; forValue(String value) {\r\n        return Optional.ofNullable(daysByValue.get(value));\r\n    }\r\n}\r\n\r\n@Configuration\r\npublic class WebConfig implements WebMvcConfigurer {\r\n    @Override\r\n    public void addFormatters(FormatterRegistry registry) {\r\n        registry.addConverter(new StringToDayConverter());\r\n    }\r\n\t\r\n\tprivate static class StringToDayConverter implements Converter&lt;String, Day&gt; {\r\n        @Override\r\n        public Day convert(String source) {\r\n            return Day.forValue(source).orElseThrow(() -&gt; new IllegalArgumentException(&quot;Could not parse day &#39;&quot;+source+&#39;\\&#39;&#39;););\r\n        }\r\n    }\r\n}\r\n\r\n\r\n@RestController\r\nclass ...\r\n\r\n@GetMapping\r\nvoid get(@RequestParam Day day) { ...\r\n","title":"Validating rest end point with enum","body":"<p>There is standard java.time.DayOfWeek. It has following method</p>\n<pre><code>private static final DayOfWeek[] ENUMS = DayOfWeek.values();\npublic static DayOfWeek of(int dayOfWeek) {\n        if (dayOfWeek &lt; 1 || dayOfWeek &gt; 7) {\n            throw new DateTimeException(&quot;Invalid value for DayOfWeek: &quot; + dayOfWeek);\n        }\n        return ENUMS[dayOfWeek - 1];\n    }\n</code></pre>\n<p>Think about using this enum instead of yours.<br />\nOr you could write the same method in your enum.<br />\nOr you could easily convert this enum to your like this:<br />\n<code>Day day = Day.valueOf(java.time.DayOfWeek.of(dayParam).name())</code> given that days names match.</p>\n<p>And I think Spring will automatically convert &quot;01&quot; string to 1 Integer if you want, so should be able to use @RequestParam Integer.</p>\n<hr />\n<p>Or you could do something much more verbose</p>\n<pre><code>public enum Day {\n    MONDAY(&quot;01&quot;), ... ;\n\n    private static final Map&lt;String, Day&gt; daysByValue = Stream.of(values())\n        .collect(Collectors.toMap(d -&gt; d.value, Function.identity()));\n\n    private final String value;\n\n    private Event(String value) {\n        this.value = value;\n    }\n    \n    public static Optional&lt;Day&gt; forValue(String value) {\n        return Optional.ofNullable(daysByValue.get(value));\n    }\n}\n\n@Configuration\npublic class WebConfig implements WebMvcConfigurer {\n    @Override\n    public void addFormatters(FormatterRegistry registry) {\n        registry.addConverter(new StringToDayConverter());\n    }\n    \n    private static class StringToDayConverter implements Converter&lt;String, Day&gt; {\n        @Override\n        public Day convert(String source) {\n            return Day.forValue(source).orElseThrow(() -&gt; new IllegalArgumentException(&quot;Could not parse day '&quot;+source+'\\''););\n        }\n    }\n}\n\n\n@RestController\nclass ...\n\n@GetMapping\nvoid get(@RequestParam Day day) { ...\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4947846,"reputation":9433,"user_id":3982755,"accept_rate":79,"display_name":"Bentaye"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679400884,"creation_date":1679400884,"answer_id":75801075,"question_id":75798708,"body_markdown":"A simple way would be to add a validation method to your enum\r\n\r\n    public static boolean isValid(String s) {\r\n        return EnumSet.allOf(Day.class).stream()\r\n                .anyMatch(day -&gt; day.value.equals(s));\r\n    }\r\n\r\nThen check the value you get from the param.\r\n\r\nYou could also try to parse the value into a `Day`\r\n\r\n    public static Optional&lt;Day&gt; parse(String s) {\r\n        return EnumSet.allOf(Day.class).stream()\r\n                .filter(day -&gt; day.value.equals(s))\r\n                .findFirst();\r\n    }\r\n    \r\nor if you prefer an exception instead of dealing with a nullable\r\n\r\n    public static Day parse(String s) {\r\n        return EnumSet.allOf(Day.class).stream()\r\n                .filter(day -&gt; day.value.equals(s))\r\n                .findFirst()\r\n                .orElseThrow(() -&gt; new IllegalArgumentException(&quot;No Day found for value &quot; + s));\r\n    }\r\n\r\n","title":"Validating rest end point with enum","body":"<p>A simple way would be to add a validation method to your enum</p>\n<pre><code>public static boolean isValid(String s) {\n    return EnumSet.allOf(Day.class).stream()\n            .anyMatch(day -&gt; day.value.equals(s));\n}\n</code></pre>\n<p>Then check the value you get from the param.</p>\n<p>You could also try to parse the value into a <code>Day</code></p>\n<pre><code>public static Optional&lt;Day&gt; parse(String s) {\n    return EnumSet.allOf(Day.class).stream()\n            .filter(day -&gt; day.value.equals(s))\n            .findFirst();\n}\n</code></pre>\n<p>or if you prefer an exception instead of dealing with a nullable</p>\n<pre><code>public static Day parse(String s) {\n    return EnumSet.allOf(Day.class).stream()\n            .filter(day -&gt; day.value.equals(s))\n            .findFirst()\n            .orElseThrow(() -&gt; new IllegalArgumentException(&quot;No Day found for value &quot; + s));\n}\n</code></pre>\n"}],"owner":{"account_id":9913536,"reputation":33,"user_id":7339305,"display_name":"AmolRavan"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1679400884,"creation_date":1679386509,"question_id":75798708,"body_markdown":"I have the enum as below, in the rest call I will get &quot;01&quot; or &quot;02&quot; as params then these are valid, but if I get &quot;09&quot; then it&#39;s INVALID. \r\nHow I can validate?\r\n\r\n    public enum Day {\r\n    \r\n        MONDAY(&quot;01&quot;),\r\n        TUESDAY(&quot;02&quot;),\r\n        WEDNESDAY(&quot;03&quot;),\r\n        THURSDAY(&quot;04&quot;),\r\n        FRIDAY(&quot;05&quot;),\r\n        SATURDAY(&quot;06&quot;),\r\n        SUNDAY(&quot;07&quot;);\r\n    \r\n        private final String value;\r\n    \r\n        private Event(String value) {\r\n            this.value = value;\r\n        }\r\n    }","title":"Validating rest end point with enum","body":"<p>I have the enum as below, in the rest call I will get &quot;01&quot; or &quot;02&quot; as params then these are valid, but if I get &quot;09&quot; then it's INVALID.\nHow I can validate?</p>\n<pre><code>public enum Day {\n\n    MONDAY(&quot;01&quot;),\n    TUESDAY(&quot;02&quot;),\n    WEDNESDAY(&quot;03&quot;),\n    THURSDAY(&quot;04&quot;),\n    FRIDAY(&quot;05&quot;),\n    SATURDAY(&quot;06&quot;),\n    SUNDAY(&quot;07&quot;);\n\n    private final String value;\n\n    private Event(String value) {\n        this.value = value;\n    }\n}\n</code></pre>\n"},{"tags":["java","string","indexoutofboundsexception"],"comments":[{"owner":{"account_id":21915,"reputation":1894,"user_id":53646,"accept_rate":100,"display_name":"Matt Boehm"},"score":1,"creation_date":1255837968,"post_id":1583940,"comment_id":1446130,"body_markdown":"unless you catch the exception, I don&#39;t know how you plan to handle the case where the character length is greater than the String length.","body":"unless you catch the exception, I don&#39;t know how you plan to handle the case where the character length is greater than the String length."},{"owner":{"account_id":8291,"reputation":860437,"user_id":14860,"accept_rate":100,"display_name":"paxdiablo"},"score":3,"creation_date":1255838220,"post_id":1583940,"comment_id":1446139,"body_markdown":"Why? What&#39;s your aversion to checking length or catching an exception?","body":"Why? What&#39;s your aversion to checking length or catching an exception?"},{"owner":{"account_id":3282,"reputation":146296,"user_id":4725,"accept_rate":100,"display_name":"Tom Hawtin - tackline"},"score":1,"creation_date":1255838341,"post_id":1583940,"comment_id":1446145,"body_markdown":"OUt of curiosity, why do you want to avoid the size check. This is not C.","body":"OUt of curiosity, why do you want to avoid the size check. This is not C."},{"owner":{"account_id":3982,"reputation":10685,"user_id":5849,"accept_rate":93,"display_name":"antony.trupe"},"score":0,"creation_date":1255839733,"post_id":1583940,"comment_id":1446225,"body_markdown":"what I meant to express was a desire to avoid an if/else block, not an aversion to actually checking length.","body":"what I meant to express was a desire to avoid an if/else block, not an aversion to actually checking length."},{"owner":{"account_id":103996,"reputation":6115,"user_id":278266,"accept_rate":68,"display_name":"Whimsical"},"score":0,"creation_date":1550014621,"post_id":1583940,"comment_id":96112026,"body_markdown":"potential duplicate of : https://stackoverflow.com/questions/8499698/trim-a-string-based-on-the-string-length/35252333#35252333","body":"potential duplicate of : <a href=\"https://stackoverflow.com/questions/8499698/trim-a-string-based-on-the-string-length/35252333#35252333\" title=\"trim a string based on the string length\">stackoverflow.com/questions/8499698/&hellip;</a>"},{"owner":{"account_id":12348172,"reputation":1962,"user_id":9008140,"display_name":"John Lord"},"score":0,"creation_date":1650470057,"post_id":1583940,"comment_id":127125777,"body_markdown":"the absolute simplest is just by making sure your string is longer by appending spaces to the end first.","body":"the absolute simplest is just by making sure your string is longer by appending spaces to the end first."}],"answers":[{"tags":[],"owner":{"account_id":21915,"reputation":1894,"user_id":53646,"accept_rate":100,"display_name":"Matt Boehm"},"down_vote_count":9,"up_vote_count":14,"is_accepted":false,"score":5,"last_activity_date":1255837868,"creation_date":1255837510,"answer_id":1583943,"question_id":1583940,"body_markdown":"Use the substring method, as follows:\r\n\r\n    int n = 8;\r\n    String s = &quot;Hello, World!&quot;;\r\n    System.out.println(s.substring(0,n);\r\n\r\nIf n is greater than the length of the string, this will throw an exception, as one commenter has pointed out.  one simple solution is to wrap all this in the condition `if(s.length()&lt;n)` in your `else` clause, you can choose whether you just want to print/return the whole String or handle it another way.","title":"How do I get the first n characters of a string without checking the size or going out of bounds?","body":"<p>Use the substring method, as follows:</p>\n\n<pre><code>int n = 8;\nString s = \"Hello, World!\";\nSystem.out.println(s.substring(0,n);\n</code></pre>\n\n<p>If n is greater than the length of the string, this will throw an exception, as one commenter has pointed out.  one simple solution is to wrap all this in the condition <code>if(s.length()&lt;n)</code> in your <code>else</code> clause, you can choose whether you just want to print/return the whole String or handle it another way.</p>\n"},{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":433,"is_accepted":true,"score":433,"last_activity_date":1670035252,"creation_date":1255838437,"answer_id":1583968,"question_id":1583940,"body_markdown":"Here&#39;s a neat solution:\r\n\r\n    String upToNCharacters = s.substring(0, Math.min(s.length(), n));\r\n\r\n----------\r\n\r\n&lt;sup&gt;Opinion: while this solution is &quot;neat&quot;, I think it is actually *less readable* than a solution that uses `if` / `else` in the obvious way.  If the reader hasn&#39;t seen this trick, he/she has to *think harder* to understand the code.  IMO, the code&#39;s meaning is more obvious in the `if` / `else` version.  For a cleaner / more readable solution, see [@paxdiablo&#39;s answer](https://stackoverflow.com/a/1583971/139985).&lt;/sup&gt;","title":"How do I get the first n characters of a string without checking the size or going out of bounds?","body":"<p>Here's a neat solution:</p>\n<pre><code>String upToNCharacters = s.substring(0, Math.min(s.length(), n));\n</code></pre>\n<hr />\n<p><sup>Opinion: while this solution is &quot;neat&quot;, I think it is actually <em>less readable</em> than a solution that uses <code>if</code> / <code>else</code> in the obvious way.  If the reader hasn't seen this trick, he/she has to <em>think harder</em> to understand the code.  IMO, the code's meaning is more obvious in the <code>if</code> / <code>else</code> version.  For a cleaner / more readable solution, see <a href=\"https://stackoverflow.com/a/1583971/139985\">@paxdiablo's answer</a>.</sup></p>\n"},{"tags":[],"owner":{"account_id":8291,"reputation":860437,"user_id":14860,"accept_rate":100,"display_name":"paxdiablo"},"down_vote_count":2,"up_vote_count":13,"is_accepted":false,"score":11,"last_activity_date":1336446789,"creation_date":1255838529,"answer_id":1583971,"question_id":1583940,"body_markdown":"There&#39;s a class of question on SO that sometimes make less than perfect sense, this one is perilously close :-)\r\n\r\nPerhaps you could explain your aversion to using one of the two methods you ruled out.\r\n\r\nIf it&#39;s just because you don&#39;t want to pepper your code with `if` statements or exception catching code, one solution is to use a helper function that will take care of it for you, something like:\r\n\r\n    static String substring_safe (String s, int start, int len) { ... }\r\nwhich will check lengths beforehand and act accordingly (either return smaller string or pad with spaces).\r\n\r\nThen you don&#39;t have to worry about it in your code at all, just call:\r\n\r\n    String s2 = substring_safe (s, 10, 7);\r\ninstead of:\r\n\r\n    String s2 = s.substring (10,7);\r\n\r\nThis would work in the case that you seem to be worried about (based on your comments to other answers), not breaking the flow of the code when doing lots of string building stuff.","title":"How do I get the first n characters of a string without checking the size or going out of bounds?","body":"<p>There's a class of question on SO that sometimes make less than perfect sense, this one is perilously close :-)</p>\n\n<p>Perhaps you could explain your aversion to using one of the two methods you ruled out.</p>\n\n<p>If it's just because you don't want to pepper your code with <code>if</code> statements or exception catching code, one solution is to use a helper function that will take care of it for you, something like:</p>\n\n<pre><code>static String substring_safe (String s, int start, int len) { ... }\n</code></pre>\n\n<p>which will check lengths beforehand and act accordingly (either return smaller string or pad with spaces).</p>\n\n<p>Then you don't have to worry about it in your code at all, just call:</p>\n\n<pre><code>String s2 = substring_safe (s, 10, 7);\n</code></pre>\n\n<p>instead of:</p>\n\n<pre><code>String s2 = s.substring (10,7);\n</code></pre>\n\n<p>This would work in the case that you seem to be worried about (based on your comments to other answers), not breaking the flow of the code when doing lots of string building stuff.</p>\n"},{"tags":[],"owner":{"account_id":1209590,"reputation":1139,"user_id":1178405,"display_name":"Nickkk"},"down_vote_count":2,"up_vote_count":114,"is_accepted":false,"score":112,"last_activity_date":1470157862,"creation_date":1327938016,"answer_id":9066459,"question_id":1583940,"body_markdown":"Don&#39;t reinvent the wheel...:\r\n\r\n    org.apache.commons.lang.StringUtils.substring(String s, int start, int len)\r\n\r\n[Javadoc](http://commons.apache.org/lang/api-2.3/org/apache/commons/lang/StringUtils.html#substring%28java.lang.String,%20int,%20int%29) says:\r\n\r\n&gt;     StringUtils.substring(null, *, *)    = null\r\n&gt;     StringUtils.substring(&quot;&quot;, * ,  *)    = &quot;&quot;;\r\n&gt;     StringUtils.substring(&quot;abc&quot;, 0, 2)   = &quot;ab&quot;\r\n&gt;     StringUtils.substring(&quot;abc&quot;, 2, 0)   = &quot;&quot;\r\n&gt;     StringUtils.substring(&quot;abc&quot;, 2, 4)   = &quot;c&quot;\r\n&gt;     StringUtils.substring(&quot;abc&quot;, 4, 6)   = &quot;&quot;\r\n&gt;     StringUtils.substring(&quot;abc&quot;, 2, 2)   = &quot;&quot;\r\n&gt;     StringUtils.substring(&quot;abc&quot;, -2, -1) = &quot;b&quot;\r\n&gt;     StringUtils.substring(&quot;abc&quot;, -4, 2)  = &quot;ab&quot;\r\n\r\nThus:\r\n\r\n    StringUtils.substring(&quot;abc&quot;, 0, 4) = &quot;abc&quot;\r\n","title":"How do I get the first n characters of a string without checking the size or going out of bounds?","body":"<p>Don't reinvent the wheel...:</p>\n\n<pre><code>org.apache.commons.lang.StringUtils.substring(String s, int start, int len)\n</code></pre>\n\n<p><a href=\"http://commons.apache.org/lang/api-2.3/org/apache/commons/lang/StringUtils.html#substring%28java.lang.String,%20int,%20int%29\" rel=\"noreferrer\">Javadoc</a> says:</p>\n\n<blockquote>\n<pre><code>StringUtils.substring(null, *, *)    = null\nStringUtils.substring(\"\", * ,  *)    = \"\";\nStringUtils.substring(\"abc\", 0, 2)   = \"ab\"\nStringUtils.substring(\"abc\", 2, 0)   = \"\"\nStringUtils.substring(\"abc\", 2, 4)   = \"c\"\nStringUtils.substring(\"abc\", 4, 6)   = \"\"\nStringUtils.substring(\"abc\", 2, 2)   = \"\"\nStringUtils.substring(\"abc\", -2, -1) = \"b\"\nStringUtils.substring(\"abc\", -4, 2)  = \"ab\"\n</code></pre>\n</blockquote>\n\n<p>Thus:</p>\n\n<pre><code>StringUtils.substring(\"abc\", 0, 4) = \"abc\"\n</code></pre>\n"},{"tags":[],"owner":{"account_id":21085,"reputation":11957,"user_id":50979,"accept_rate":88,"display_name":"13ren"},"down_vote_count":0,"up_vote_count":18,"is_accepted":false,"score":18,"last_activity_date":1380788784,"creation_date":1380787735,"answer_id":19153967,"question_id":1583940,"body_markdown":"    String upToNCharacters = String.format(&quot;%.&quot;+ n +&quot;s&quot;, str);\r\n\r\nAwful if `n` is a variable (so you must construct the format string), but pretty clear if a constant:\r\n\r\n    String upToNCharacters = String.format(&quot;%.10s&quot;, str);\r\n\r\n[docs](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#format%28java.lang.String,%20java.lang.Object...%29)\r\n\r\n&lt;!---\r\n[public static String.format\r\n(String format, Object... args)](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#format%28java.lang.String,%20java.lang.Object...%29),\r\nsince 1.5\r\n--&gt;","title":"How do I get the first n characters of a string without checking the size or going out of bounds?","body":"<pre><code>String upToNCharacters = String.format(\"%.\"+ n +\"s\", str);\n</code></pre>\n\n<p>Awful if <code>n</code> is a variable (so you must construct the format string), but pretty clear if a constant:</p>\n\n<pre><code>String upToNCharacters = String.format(\"%.10s\", str);\n</code></pre>\n\n<p><a href=\"http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#format%28java.lang.String,%20java.lang.Object...%29\" rel=\"noreferrer\">docs</a></p>\n\n\n"},{"tags":[],"owner":{"account_id":58463,"reputation":2007,"user_id":175036,"accept_rate":94,"display_name":"Skuli"},"down_vote_count":0,"up_vote_count":70,"is_accepted":false,"score":70,"last_activity_date":1411739811,"creation_date":1411737979,"answer_id":26060742,"question_id":1583940,"body_markdown":"[Apache Commons Lang][1] has a [`StringUtils.left`][2] method for this.\r\n\r\n    String upToNCharacters = StringUtils.left(s, n);\r\n\r\n\r\n  [1]: http://commons.apache.org/proper/commons-lang/\r\n  [2]: http://commons.apache.org/proper/commons-lang/javadocs/api-3.1/org/apache/commons/lang3/StringUtils.html#left(java.lang.String,%20int)","title":"How do I get the first n characters of a string without checking the size or going out of bounds?","body":"<p><a href=\"http://commons.apache.org/proper/commons-lang/\">Apache Commons Lang</a> has a <a href=\"http://commons.apache.org/proper/commons-lang/javadocs/api-3.1/org/apache/commons/lang3/StringUtils.html#left(java.lang.String,%20int)\"><code>StringUtils.left</code></a> method for this.</p>\n\n<pre><code>String upToNCharacters = StringUtils.left(s, n);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":203120,"reputation":1942,"user_id":450586,"accept_rate":71,"display_name":"yuceel"},"down_vote_count":2,"up_vote_count":3,"is_accepted":false,"score":1,"last_activity_date":1424786646,"creation_date":1424779543,"answer_id":28695363,"question_id":1583940,"body_markdown":"ApacheCommons surprised me, \r\n`StringUtils.abbreviate(String str, int maxWidth)` appends &quot;...&quot; there is no option to change postfix.\r\n`WordUtils.abbreviate(String str, int lower, int upper, String appendToEnd)` looks up to next empty space.\r\n\r\n\r\n\r\nI’m just going to leave this here:\r\n \r\n    public static String abbreviate(String s, int maxLength, String appendToEnd) {\r\n        String result = s;\r\n        appendToEnd = appendToEnd == null ? &quot;&quot; : appendToEnd;\r\n        if (maxLength &gt;= appendToEnd.length()) {\r\n            if (s.length()&gt;maxLength) {\r\n                result = s.substring(0, Math.min(s.length(), maxLength - appendToEnd.length())) + appendToEnd;\r\n            }\r\n        } else {\r\n            throw new StringIndexOutOfBoundsException(&quot;maxLength can not be smaller than appendToEnd parameter length.&quot;);\r\n        }\r\n        return result;\r\n    }","title":"How do I get the first n characters of a string without checking the size or going out of bounds?","body":"<p>ApacheCommons surprised me, \n<code>StringUtils.abbreviate(String str, int maxWidth)</code> appends \"...\" there is no option to change postfix.\n<code>WordUtils.abbreviate(String str, int lower, int upper, String appendToEnd)</code> looks up to next empty space.</p>\n\n<p>I’m just going to leave this here:</p>\n\n<pre><code>public static String abbreviate(String s, int maxLength, String appendToEnd) {\n    String result = s;\n    appendToEnd = appendToEnd == null ? \"\" : appendToEnd;\n    if (maxLength &gt;= appendToEnd.length()) {\n        if (s.length()&gt;maxLength) {\n            result = s.substring(0, Math.min(s.length(), maxLength - appendToEnd.length())) + appendToEnd;\n        }\n    } else {\n        throw new StringIndexOutOfBoundsException(\"maxLength can not be smaller than appendToEnd parameter length.\");\n    }\n    return result;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15525540,"reputation":587,"user_id":11211041,"display_name":"Snostorp"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1679400683,"creation_date":1679306400,"answer_id":75788871,"question_id":1583940,"body_markdown":"Another great compact way, without having to use a third party library, would be to use the ternary operator (?:):  \r\n\r\n    s = s.length() &gt; n ? s.substring(0, n) : s;\r\n\r\nbut it might be just as simple to use a &quot;one-line&quot; if-statement:  \r\n\r\n    if (s.length() &gt; n) s = s.substring(0, n);\r\n\r\n\r\n","title":"How do I get the first n characters of a string without checking the size or going out of bounds?","body":"<p>Another great compact way, without having to use a third party library, would be to use the ternary operator (?:):</p>\n<pre><code>s = s.length() &gt; n ? s.substring(0, n) : s;\n</code></pre>\n<p>but it might be just as simple to use a &quot;one-line&quot; if-statement:</p>\n<pre><code>if (s.length() &gt; n) s = s.substring(0, n);\n</code></pre>\n"}],"owner":{"account_id":3982,"reputation":10685,"user_id":5849,"accept_rate":93,"display_name":"antony.trupe"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":360626,"favorite_count":0,"down_vote_count":0,"up_vote_count":215,"accepted_answer_id":1583968,"answer_count":8,"score":215,"last_activity_date":1679400683,"creation_date":1255837403,"question_id":1583940,"body_markdown":"How do I get up to the first `n` characters of a string in Java without doing a size check first (inline is acceptable) or risking an `IndexOutOfBoundsException`?","title":"How do I get the first n characters of a string without checking the size or going out of bounds?","body":"<p>How do I get up to the first <code>n</code> characters of a string in Java without doing a size check first (inline is acceptable) or risking an <code>IndexOutOfBoundsException</code>?</p>\n"},{"tags":["java","playwright","playwright-java"],"answers":[{"tags":[],"owner":{"account_id":2754837,"reputation":19523,"user_id":2373249,"accept_rate":25,"display_name":"hardkoded"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679400545,"creation_date":1679312918,"answer_id":75789897,"question_id":75788959,"body_markdown":"Maybe there are better ways to solve this. But I think you will need to use an XPath locator.\r\n\r\n```\r\nLocator combo = page.getByRole(AriaRole.COMBOBOX, new Page.GetByRoleOptions().setName(&quot;* Legal Type&quot;));\r\nLocator child = combo.locator(&quot;xpath=./following-sibling::*/*&quot;);\r\n```\r\n\r\n* `./following-sibling::*` Will give you the sibling. no matter the tag name (`*`).\r\n* `/*` will give you the child, no matter the tag name.","title":"How can I locate a link that is a child of the following sibling?","body":"<p>Maybe there are better ways to solve this. But I think you will need to use an XPath locator.</p>\n<pre><code>Locator combo = page.getByRole(AriaRole.COMBOBOX, new Page.GetByRoleOptions().setName(&quot;* Legal Type&quot;));\nLocator child = combo.locator(&quot;xpath=./following-sibling::*/*&quot;);\n</code></pre>\n<ul>\n<li><code>./following-sibling::*</code> Will give you the sibling. no matter the tag name (<code>*</code>).</li>\n<li><code>/*</code> will give you the child, no matter the tag name.</li>\n</ul>\n"}],"owner":{"account_id":12411624,"reputation":5567,"user_id":9043475,"display_name":"Rajagopalan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":113,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1679400545,"creation_date":1679306981,"question_id":75788959,"body_markdown":"I have to colour an element after the selection, the element which i would like to colour is found as a child of the following sibling. \r\n\r\nI have successfully located the element using the following code \r\n\r\n    page.getByRole(AriaRole.COMBOBOX, new Page.GetByRoleOptions().setName(&quot;* Legal Type&quot;))\r\n\r\nHow can I go to the following sibling from this element and then locate the child of that following-sibling?\r\n\r\nAny help? \r\n\r\n","title":"How can I locate a link that is a child of the following sibling?","body":"<p>I have to colour an element after the selection, the element which i would like to colour is found as a child of the following sibling.</p>\n<p>I have successfully located the element using the following code</p>\n<pre><code>page.getByRole(AriaRole.COMBOBOX, new Page.GetByRoleOptions().setName(&quot;* Legal Type&quot;))\n</code></pre>\n<p>How can I go to the following sibling from this element and then locate the child of that following-sibling?</p>\n<p>Any help?</p>\n"},{"tags":["java","selenium-webdriver","automation","apache-poi"],"comments":[{"owner":{"account_id":350017,"reputation":47555,"user_id":685641,"display_name":"Gagravarr"},"score":3,"creation_date":1679401214,"post_id":75800642,"comment_id":133711731,"body_markdown":"Use `DataFormatter` to turn all the cells into Strings as shown in Excel?","body":"Use <code>DataFormatter</code> to turn all the cells into Strings as shown in Excel?"}],"answers":[{"tags":[],"owner":{"account_id":28075247,"reputation":21,"user_id":21447217,"display_name":"merdon"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1679400408,"creation_date":1679400408,"answer_id":75800999,"question_id":75800642,"body_markdown":"    FormulaEvaluator formulaEvaluator = new XSSFFormulaEvaluator(book);\r\n    Cell cell = row.getCell(column);\r\n    if( CellType.FORMULA.equals(cell.getCellType())){\r\n        return formulaEvaluator.evaluate(cell).formatAsString();\r\n    }else if( CellType.NUMERIC.equals(cell.getCellType())){\r\n        return new BigDecimal(cell.getNumericCellValue()).toPlainString();\r\n    } else {\r\n        return cell.getStringCellValue();\r\n    }","title":"Cannot get a STRING value from a NUMERIC cell while extracting the data from Excel","body":"<pre><code>FormulaEvaluator formulaEvaluator = new XSSFFormulaEvaluator(book);\nCell cell = row.getCell(column);\nif( CellType.FORMULA.equals(cell.getCellType())){\n    return formulaEvaluator.evaluate(cell).formatAsString();\n}else if( CellType.NUMERIC.equals(cell.getCellType())){\n    return new BigDecimal(cell.getNumericCellValue()).toPlainString();\n} else {\n    return cell.getStringCellValue();\n}\n</code></pre>\n"}],"owner":{"account_id":28074834,"reputation":1,"user_id":21446882,"display_name":"Abhishekh Shukla"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":74,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1679400408,"creation_date":1679398372,"question_id":75800642,"body_markdown":"I&#39;m trying to import data from Excel file to automate a large amount of data but I got the error &quot;Cannot get a STRING value from a NUMERIC cell&quot; as some of the cells has a numeric values and others has a text value.I need to extract all data and insert it as inputs for the page fields. i got the error stating from\r\n\r\n\r\n```\r\n`package com.Demo;\r\n\r\nimport java.io.FileInputStream;\r\nimport java.io.FileNotFoundException;\r\nimport java.io.IOException;\r\n\r\nimport org.apache.poi.ss.usermodel.DataFormatter;\r\nimport org.apache.poi.xssf.usermodel.XSSFRow;\r\nimport org.apache.poi.xssf.usermodel.XSSFSheet;\r\nimport org.apache.poi.xssf.usermodel.XSSFWorkbook;\r\nimport org.openqa.selenium.By;\r\nimport org.openqa.selenium.WebDriver;\r\nimport org.openqa.selenium.chrome.ChromeDriver;\r\nimport org.openqa.selenium.chrome.ChromeOptions;\r\nimport org.openqa.selenium.support.ui.Select;\r\n\r\npublic class SignupformTest {\r\n\r\n\tpublic static void main(String[] args) throws IOException {\r\n\t\tSystem.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;C:\\\\Users\\\\VIRAL FISSION\\\\Music\\\\Selenium\\\\New folder\\\\chromedriver_win32\\\\chromedriver.exe&quot;);\r\n        ChromeOptions options = new ChromeOptions();\r\n        options.setExperimentalOption(&quot;excludeSwitches&quot;,new String[] {&quot;enable-automation&quot;});\r\n        options.addArguments(&quot;--remote-allow-origins=*&quot;);\r\n//        options.addArguments(&quot;--disable-web-security&quot;);\r\n        WebDriver driver = new ChromeDriver(options);\r\n        driver.get(&quot;https://app.viralfission.com/signup&quot;);\r\n        \r\n        FileInputStream file = new FileInputStream(&quot;C:\\\\Users\\\\VIRAL FISSION\\\\Pictures\\\\testintakedata.xlsx&quot;);\r\n    \t\r\n   \t // Create Workbook instance holding reference to .xlsx file\r\n   \t XSSFWorkbook workbook = new XSSFWorkbook(file);\r\n   \t\r\n   \t // Get first/desired sheet from the workbook\r\n   \t XSSFSheet sheet = workbook.getSheet(&quot;Sheet1&quot;);\r\n   \t \r\n   \t \r\n\t int noofcount = sheet.getLastRowNum();\r\n\t \r\n\t System.out.print(&quot;No. of Records in the Excel sheet : &quot; + noofcount);\r\n\t \r\n\t for(int row = 1; row &lt;= noofcount; row++) {\r\n\t\t XSSFRow currentrow =  sheet.getRow(row);\r\n\t\t DataFormatter formatter = new DataFormatter();\r\n\t\t String cellvalue = formatter.formatCellValue(1,0);\r\n\r\n\t\t \r\n\t\t String Referal_Code = currentrow.getCell(0).getStringCellValue();\r\n\t\t String First_Name = currentrow.getCell(1).getStringCellValue(); \r\n\t\t String Last_Name = currentrow.getCell(2).getStringCellValue(); \r\n\t\t String Contact_Number = currentrow.getCell(3).getStringCellValue();\r\n\t\t String WhatsApp_Number = currentrow.getCell(4).getStringCellValue(); \r\n\t\t String Gender = currentrow.getCell(5).getStringCellValue(); \r\n\t\t String Date_of_Birth = currentrow.getCell(6).getStringCellValue(); \r\n\t\t String Flat_No = currentrow.getCell(7).getStringCellValue(); \r\n\t\t String Building_Name = currentrow.getCell(8).getStringCellValue(); \r\n\t\t String Street_Name = currentrow.getCell(9).getStringCellValue(); \r\n\t\t String Landmark = currentrow.getCell(10).getStringCellValue(); \r\n\t\t String State = currentrow.getCell(11).getStringCellValue(); \r\n\t\t String City = currentrow.getCell(12).getStringCellValue(); \r\n\t\t String Pincode = currentrow.getCell(13).getStringCellValue(); \r\n\t\t String Instagram = currentrow.getCell(14).getStringCellValue(); \r\n\t\t String Twitter = currentrow.getCell(15).getStringCellValue(); \r\n\t\t \r\n\t\t \r\n//\t\t driver.findElement(By.linkText(&quot;https://app.viralfission.com/signup&quot;)).click();\r\n\t\t \r\n\t\t driver.findElement(By.name(&quot;referral&quot;)).sendKeys(Referal_Code);\r\n\t\t driver.findElement(By.name(&quot;firstname&quot;)).sendKeys(First_Name);\r\n\t\t driver.findElement(By.name(&quot;lastname&quot;)).sendKeys(Last_Name);\r\n\t\t driver.findElement(By.name(&quot;contactNumber&quot;)).sendKeys(Contact_Number);\r\n\t\t driver.findElement(By.name(&quot;whatsAppNumber&quot;)).sendKeys(WhatsApp_Number);\r\n\t\t \r\n\t\t \r\n\t\t Select dropgender = new Select(driver.findElement(By.name(&quot;gender&quot;)));\r\n\t\t dropgender.selectByVisibleText(Gender);\r\n\t\t Select dropdateofbirth = new Select(driver.findElement(By.name(&quot;DOB&quot;)));\r\n\t\t dropdateofbirth.selectByVisibleText(Date_of_Birth);\r\n\t\t \r\n\t\t driver.findElement(By.name(&quot;flatNumber&quot;)).sendKeys(Flat_No);\r\n\t\t driver.findElement(By.name(&quot;buildingName&quot;)).sendKeys(Building_Name);\r\n\t\t driver.findElement(By.name(&quot;streetName&quot;)).sendKeys(Street_Name);\r\n\t\t driver.findElement(By.name(&quot;landmark&quot;)).sendKeys(Landmark);\r\n\t\t \r\n\t\t \r\n\t\t Select dropState = new Select(driver.findElement(By.name(&quot;state&quot;)));\r\n\t\t dropState.selectByVisibleText(State);\r\n\t\t Select dropCity = new Select(driver.findElement(By.name(&quot;city&quot;)));\r\n\t\t dropCity.selectByVisibleText(City);\r\n\t\t \r\n\t\t driver.findElement(By.name(&quot;pincode&quot;)).sendKeys(Pincode);\r\n\t\t driver.findElement(By.name(&quot;instagram&quot;)).sendKeys(Instagram);\r\n\t\t driver.findElement(By.name(&quot;twitter&quot;)).sendKeys(Twitter);\r\n\t\t \r\n\t\tdriver.findElement(By.xpath(&quot;//*[@id=\\&quot;cdk-step-content-0-0\\&quot;]/form/div[7]/button&quot;)).click();\r\n\t\t\r\n\t\tif(driver.getPageSource().contains(&quot;&#39;Enter your details to get one step closer&#39;&quot;)) {\r\n\t\t\tSystem.out.println(&quot;Good&quot; + row + &quot;Record&quot;);\r\n\t\t}\r\n\r\n\t\t \r\n\t }\r\n\t driver.close();\r\n\r\n\r\n\t}\r\n\r\n}\r\n`\r\n```\r\n\r\n\r\n**Can you please help me to sort out this, Why am getting this error? I have declared 9 Columns and 16 Rows using for loop. But am getting cannot Get The error as cannot get the string value from Numeic Cell.**","title":"Cannot get a STRING value from a NUMERIC cell while extracting the data from Excel","body":"<p>I'm trying to import data from Excel file to automate a large amount of data but I got the error &quot;Cannot get a STRING value from a NUMERIC cell&quot; as some of the cells has a numeric values and others has a text value.I need to extract all data and insert it as inputs for the page fields. i got the error stating from</p>\n<pre><code>`package com.Demo;\n\nimport java.io.FileInputStream;\nimport java.io.FileNotFoundException;\nimport java.io.IOException;\n\nimport org.apache.poi.ss.usermodel.DataFormatter;\nimport org.apache.poi.xssf.usermodel.XSSFRow;\nimport org.apache.poi.xssf.usermodel.XSSFSheet;\nimport org.apache.poi.xssf.usermodel.XSSFWorkbook;\nimport org.openqa.selenium.By;\nimport org.openqa.selenium.WebDriver;\nimport org.openqa.selenium.chrome.ChromeDriver;\nimport org.openqa.selenium.chrome.ChromeOptions;\nimport org.openqa.selenium.support.ui.Select;\n\npublic class SignupformTest {\n\n    public static void main(String[] args) throws IOException {\n        System.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;C:\\\\Users\\\\VIRAL FISSION\\\\Music\\\\Selenium\\\\New folder\\\\chromedriver_win32\\\\chromedriver.exe&quot;);\n        ChromeOptions options = new ChromeOptions();\n        options.setExperimentalOption(&quot;excludeSwitches&quot;,new String[] {&quot;enable-automation&quot;});\n        options.addArguments(&quot;--remote-allow-origins=*&quot;);\n//        options.addArguments(&quot;--disable-web-security&quot;);\n        WebDriver driver = new ChromeDriver(options);\n        driver.get(&quot;https://app.viralfission.com/signup&quot;);\n        \n        FileInputStream file = new FileInputStream(&quot;C:\\\\Users\\\\VIRAL FISSION\\\\Pictures\\\\testintakedata.xlsx&quot;);\n        \n     // Create Workbook instance holding reference to .xlsx file\n     XSSFWorkbook workbook = new XSSFWorkbook(file);\n    \n     // Get first/desired sheet from the workbook\n     XSSFSheet sheet = workbook.getSheet(&quot;Sheet1&quot;);\n     \n     \n     int noofcount = sheet.getLastRowNum();\n     \n     System.out.print(&quot;No. of Records in the Excel sheet : &quot; + noofcount);\n     \n     for(int row = 1; row &lt;= noofcount; row++) {\n         XSSFRow currentrow =  sheet.getRow(row);\n         DataFormatter formatter = new DataFormatter();\n         String cellvalue = formatter.formatCellValue(1,0);\n\n         \n         String Referal_Code = currentrow.getCell(0).getStringCellValue();\n         String First_Name = currentrow.getCell(1).getStringCellValue(); \n         String Last_Name = currentrow.getCell(2).getStringCellValue(); \n         String Contact_Number = currentrow.getCell(3).getStringCellValue();\n         String WhatsApp_Number = currentrow.getCell(4).getStringCellValue(); \n         String Gender = currentrow.getCell(5).getStringCellValue(); \n         String Date_of_Birth = currentrow.getCell(6).getStringCellValue(); \n         String Flat_No = currentrow.getCell(7).getStringCellValue(); \n         String Building_Name = currentrow.getCell(8).getStringCellValue(); \n         String Street_Name = currentrow.getCell(9).getStringCellValue(); \n         String Landmark = currentrow.getCell(10).getStringCellValue(); \n         String State = currentrow.getCell(11).getStringCellValue(); \n         String City = currentrow.getCell(12).getStringCellValue(); \n         String Pincode = currentrow.getCell(13).getStringCellValue(); \n         String Instagram = currentrow.getCell(14).getStringCellValue(); \n         String Twitter = currentrow.getCell(15).getStringCellValue(); \n         \n         \n//       driver.findElement(By.linkText(&quot;https://app.viralfission.com/signup&quot;)).click();\n         \n         driver.findElement(By.name(&quot;referral&quot;)).sendKeys(Referal_Code);\n         driver.findElement(By.name(&quot;firstname&quot;)).sendKeys(First_Name);\n         driver.findElement(By.name(&quot;lastname&quot;)).sendKeys(Last_Name);\n         driver.findElement(By.name(&quot;contactNumber&quot;)).sendKeys(Contact_Number);\n         driver.findElement(By.name(&quot;whatsAppNumber&quot;)).sendKeys(WhatsApp_Number);\n         \n         \n         Select dropgender = new Select(driver.findElement(By.name(&quot;gender&quot;)));\n         dropgender.selectByVisibleText(Gender);\n         Select dropdateofbirth = new Select(driver.findElement(By.name(&quot;DOB&quot;)));\n         dropdateofbirth.selectByVisibleText(Date_of_Birth);\n         \n         driver.findElement(By.name(&quot;flatNumber&quot;)).sendKeys(Flat_No);\n         driver.findElement(By.name(&quot;buildingName&quot;)).sendKeys(Building_Name);\n         driver.findElement(By.name(&quot;streetName&quot;)).sendKeys(Street_Name);\n         driver.findElement(By.name(&quot;landmark&quot;)).sendKeys(Landmark);\n         \n         \n         Select dropState = new Select(driver.findElement(By.name(&quot;state&quot;)));\n         dropState.selectByVisibleText(State);\n         Select dropCity = new Select(driver.findElement(By.name(&quot;city&quot;)));\n         dropCity.selectByVisibleText(City);\n         \n         driver.findElement(By.name(&quot;pincode&quot;)).sendKeys(Pincode);\n         driver.findElement(By.name(&quot;instagram&quot;)).sendKeys(Instagram);\n         driver.findElement(By.name(&quot;twitter&quot;)).sendKeys(Twitter);\n         \n        driver.findElement(By.xpath(&quot;//*[@id=\\&quot;cdk-step-content-0-0\\&quot;]/form/div[7]/button&quot;)).click();\n        \n        if(driver.getPageSource().contains(&quot;'Enter your details to get one step closer'&quot;)) {\n            System.out.println(&quot;Good&quot; + row + &quot;Record&quot;);\n        }\n\n         \n     }\n     driver.close();\n\n\n    }\n\n}\n`\n</code></pre>\n<p><strong>Can you please help me to sort out this, Why am getting this error? I have declared 9 Columns and 16 Rows using for loop. But am getting cannot Get The error as cannot get the string value from Numeic Cell.</strong></p>\n"},{"tags":["java","maven","spring-boot","pom.xml","dependency-management"],"comments":[{"owner":{"account_id":1855835,"reputation":1651,"user_id":1681440,"display_name":"juice"},"score":0,"creation_date":1525474547,"post_id":50183956,"comment_id":87385402,"body_markdown":"I&#39;m having the same issue - I hope someone knows the answer","body":"I&#39;m having the same issue - I hope someone knows the answer"},{"owner":{"account_id":1611562,"reputation":11552,"user_id":1490322,"accept_rate":71,"display_name":"Jose Martinez"},"score":0,"creation_date":1525475589,"post_id":50183956,"comment_id":87385649,"body_markdown":"Can you post the dependency tag for assertj in your POM?","body":"Can you post the dependency tag for assertj in your POM?"},{"owner":{"account_id":1611562,"reputation":11552,"user_id":1490322,"accept_rate":71,"display_name":"Jose Martinez"},"score":0,"creation_date":1525475712,"post_id":50183956,"comment_id":87385679,"body_markdown":"I would actually like to see you dependencyManagement and parent also, if at all possible.","body":"I would actually like to see you dependencyManagement and parent also, if at all possible."},{"owner":{"account_id":401861,"reputation":403,"user_id":768671,"accept_rate":57,"display_name":"Basil"},"score":0,"creation_date":1525478249,"post_id":50183956,"comment_id":87386121,"body_markdown":"Updated with POMs.","body":"Updated with POMs."}],"answers":[{"tags":[],"owner":{"account_id":1611562,"reputation":11552,"user_id":1490322,"accept_rate":71,"display_name":"Jose Martinez"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1525476287,"creation_date":1525476287,"answer_id":50184235,"question_id":50183956,"body_markdown":"My guess is that it is grabbing the nearest.  \r\n\r\n&gt;  Dependency mediation - this determines what version of a dependency will be used when multiple versions of an artifact are encountered. Currently, Maven 2.0 only supports using the &quot;nearest definition&quot; which means that it will use the version of the closest dependency to your project in the tree of dependencies. You can always guarantee a version by declaring it explicitly in your project&#39;s POM. Note that if two dependency versions are at the same depth in the dependency tree, until Maven 2.0.8 it was not defined which one would win, but since Maven 2.0.9 it&#39;s the order in the declaration that counts: the first declaration wins.\r\n\r\n\r\nWhat I do for stuff like this is go to my IDE&#39;s dependencies section for a given project.  It shows me all dependencies, what version, and where it came from (see bottom of pop-up on attached image below for an example). \r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/bjEh3.png","title":"Maven sourcing dependency version from great-grand-parent instead of our parents dependency-management","body":"<p>My guess is that it is grabbing the nearest.  </p>\n\n<blockquote>\n  <p>Dependency mediation - this determines what version of a dependency will be used when multiple versions of an artifact are encountered. Currently, Maven 2.0 only supports using the \"nearest definition\" which means that it will use the version of the closest dependency to your project in the tree of dependencies. You can always guarantee a version by declaring it explicitly in your project's POM. Note that if two dependency versions are at the same depth in the dependency tree, until Maven 2.0.8 it was not defined which one would win, but since Maven 2.0.9 it's the order in the declaration that counts: the first declaration wins.</p>\n</blockquote>\n\n<p>What I do for stuff like this is go to my IDE's dependencies section for a given project.  It shows me all dependencies, what version, and where it came from (see bottom of pop-up on attached image below for an example). </p>\n\n<p><a href=\"https://i.stack.imgur.com/bjEh3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/bjEh3.png\" alt=\"enter image description here\"></a></p>\n"},{"tags":[],"owner":{"account_id":1461397,"reputation":5944,"user_id":1375627,"accept_rate":25,"display_name":"MattC"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1525812475,"creation_date":1525812475,"answer_id":50242041,"question_id":50183956,"body_markdown":"The issue is that your project is relying not on a parent for dependency management, but on an imported project. The Maven dependency hierarchy doesn&#39;t work that way. Probably the best solution would be to move the &#39;parent spring-boot-starter-parent&#39; declaration into the MY_COMPANY:dependencyManagementBase project. Then change the parent declaration in com.MYCOMPANY.platform to point at your dependencyManagementBase project. That way you would have a clear inheritance hierarchy.\r\n\r\nWhat you currently have does not really use dependency management. i.e. if you were to change the &#39;dependecyManagement&#39; section in the dependencyManagementBase project to &#39;dependency&#39;, you would get the same results.","title":"Maven sourcing dependency version from great-grand-parent instead of our parents dependency-management","body":"<p>The issue is that your project is relying not on a parent for dependency management, but on an imported project. The Maven dependency hierarchy doesn't work that way. Probably the best solution would be to move the 'parent spring-boot-starter-parent' declaration into the MY_COMPANY:dependencyManagementBase project. Then change the parent declaration in com.MYCOMPANY.platform to point at your dependencyManagementBase project. That way you would have a clear inheritance hierarchy.</p>\n\n<p>What you currently have does not really use dependency management. i.e. if you were to change the 'dependecyManagement' section in the dependencyManagementBase project to 'dependency', you would get the same results.</p>\n"},{"tags":[],"owner":{"account_id":401861,"reputation":403,"user_id":768671,"accept_rate":57,"display_name":"Basil"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1525812732,"creation_date":1525812732,"answer_id":50242089,"question_id":50183956,"body_markdown":"Doesn&#39;t seem like anyone has the answer. So I&#39;ll just answer with my findings.\r\n\r\nGiven OP doesn&#39;t work. My next strategy is to IMPORT the spring-boot-starter-parent and spring-boot-dependency POMs, since I can&#39;t use them as parents.\r\n\r\nThis however has it&#39;s own behaviors.\r\n\r\nI found that if my dependency management looks like this, my versions win:\r\n\r\n    &lt;dependencyManagement&gt;\r\n        &lt;dependencies&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;com.mycompany&lt;/groupId&gt;\r\n                &lt;artifactId&gt;dependency-management-slim&lt;/artifactId&gt;\r\n                &lt;version&gt;2.23.14-SNAPSHOT&lt;/version&gt;\r\n                &lt;type&gt;pom&lt;/type&gt;\r\n                &lt;scope&gt;import&lt;/scope&gt;\r\n            &lt;/dependency\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-dependencies&lt;/artifactId&gt;\r\n                &lt;version&gt;${spring-boot.version}&lt;/version&gt;\r\n                &lt;type&gt;pom&lt;/type&gt;\r\n                &lt;scope&gt;import&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n                &lt;version&gt;${spring-boot.version}&lt;/version&gt;\r\n                &lt;type&gt;pom&lt;/type&gt;\r\n                &lt;scope&gt;import&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n        &lt;/dependencies&gt;\r\n    &lt;/dependencyManagement&gt;\r\n\r\nHowever, I decided I wanted to separate my custom code from my spring-boot mimicking pom. So in order to preserve priority I figured I had to do this:\r\n\r\n    service-root -&gt; only import my-dependency-management\r\n    ^-- spring-boot-parent -&gt; mimick and import spring-boot-starter-parent\r\n    ^-- service-parent -&gt; has our common dependencies and profiles\r\n    ^-- service-impl - code\r\n\r\nHowever, that did NOT work; spring-boot versions overrode our custom versions.\r\nSo I had to do this:\r\n\r\n    root-parent -&gt; nothing\r\n    ^-- spring-boot-parent -&gt; mimick and import spring-boot-starter-parent\r\n    ^-- service-parent -&gt; import my-dependency-management\r\n    ^-- service-impl - code\r\n\r\n\r\nConclusions\r\n-----------\r\n\r\n - **IF** importing multiple dependency-management in the SAME pom, then the first management-versions win.\r\n - **IF** you are importing in multiple poms, the last one imported wins.\r\n - **IF** a parent defines has dependency-management with individual dependencies defined, you cannot override them with dependency\r\n   management (This is original problem).\r\n\r\n&#175;\\\\_(ツ)_/&#175;","title":"Maven sourcing dependency version from great-grand-parent instead of our parents dependency-management","body":"<p>Doesn't seem like anyone has the answer. So I'll just answer with my findings.</p>\n\n<p>Given OP doesn't work. My next strategy is to IMPORT the spring-boot-starter-parent and spring-boot-dependency POMs, since I can't use them as parents.</p>\n\n<p>This however has it's own behaviors.</p>\n\n<p>I found that if my dependency management looks like this, my versions win:</p>\n\n<pre><code>&lt;dependencyManagement&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.mycompany&lt;/groupId&gt;\n            &lt;artifactId&gt;dependency-management-slim&lt;/artifactId&gt;\n            &lt;version&gt;2.23.14-SNAPSHOT&lt;/version&gt;\n            &lt;type&gt;pom&lt;/type&gt;\n            &lt;scope&gt;import&lt;/scope&gt;\n        &lt;/dependency\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-dependencies&lt;/artifactId&gt;\n            &lt;version&gt;${spring-boot.version}&lt;/version&gt;\n            &lt;type&gt;pom&lt;/type&gt;\n            &lt;scope&gt;import&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n            &lt;version&gt;${spring-boot.version}&lt;/version&gt;\n            &lt;type&gt;pom&lt;/type&gt;\n            &lt;scope&gt;import&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n&lt;/dependencyManagement&gt;\n</code></pre>\n\n<p>However, I decided I wanted to separate my custom code from my spring-boot mimicking pom. So in order to preserve priority I figured I had to do this:</p>\n\n<pre><code>service-root -&gt; only import my-dependency-management\n^-- spring-boot-parent -&gt; mimick and import spring-boot-starter-parent\n^-- service-parent -&gt; has our common dependencies and profiles\n^-- service-impl - code\n</code></pre>\n\n<p>However, that did NOT work; spring-boot versions overrode our custom versions.\nSo I had to do this:</p>\n\n<pre><code>root-parent -&gt; nothing\n^-- spring-boot-parent -&gt; mimick and import spring-boot-starter-parent\n^-- service-parent -&gt; import my-dependency-management\n^-- service-impl - code\n</code></pre>\n\n<h2>Conclusions</h2>\n\n<ul>\n<li><strong>IF</strong> importing multiple dependency-management in the SAME pom, then the first management-versions win.</li>\n<li><strong>IF</strong> you are importing in multiple poms, the last one imported wins.</li>\n<li><strong>IF</strong> a parent defines has dependency-management with individual dependencies defined, you cannot override them with dependency\nmanagement (This is original problem).</li>\n</ul>\n\n<p>¯\\_(ツ)_/¯</p>\n"},{"tags":[],"owner":{"account_id":888714,"reputation":34077,"user_id":927493,"accept_rate":61,"display_name":"J Fabian Meier"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679400318,"creation_date":1679400318,"answer_id":75800986,"question_id":50183956,"body_markdown":"Imported dependencyManagement always looses against directly defined dependencyManagement, regardless from which level or the hierarchy. \r\n\r\nI would avoid the import and instead set the properties that define the versions in the spring boot starter parent.","title":"Maven sourcing dependency version from great-grand-parent instead of our parents dependency-management","body":"<p>Imported dependencyManagement always looses against directly defined dependencyManagement, regardless from which level or the hierarchy.</p>\n<p>I would avoid the import and instead set the properties that define the versions in the spring boot starter parent.</p>\n"}],"owner":{"account_id":401861,"reputation":403,"user_id":768671,"accept_rate":57,"display_name":"Basil"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":889,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":4,"score":6,"last_activity_date":1679400318,"creation_date":1525473755,"question_id":50183956,"body_markdown":"Below shows the hierarchy of my POMs.\r\n\r\nYou can see that we have a company parent-pom for spring boot projects. This POM has spring-boot-starter as it&#39;s parent, and it imports our own dependency-management BOM.\r\n\r\n    [INFO] --- hierarchy-maven-plugin:1.4:tree (default-cli) @ user-service ---\r\n    [INFO]  PARENT com.MY_COMPANY.platform:user:3.20.14-SNAPSHOT\r\n    [INFO]    PARENT com.MY_COMPANY.platform:spring-boot-parent:3.20.12-SNAPSHOT\r\n    [INFO]      PARENT org.springframework.boot:spring-boot-starter-parent:1.5.12.RELEASE\r\n    [INFO]        PARENT org.springframework.boot:spring-boot-dependencies:1.5.12.RELEASE  &lt;&lt;&lt;&lt; This pom defines assertJ 2.x\r\n    [INFO]          [ other imports ]\r\n    [INFO]      IMPORT com.MY_COMPANY:dependencyManagementBase:2.23.14-SNAPSHOT\t\t&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt; This pom defines assertJ 3.x\r\n    [INFO]    IMPORT com.MY_COMPANY.platform:platform-dependency-management:1.20.7\r\n    [INFO] ------------------------------------------------------------------------\r\n\r\nTo focus on a specific, we define AssertJ 3 in our dependency-management; however, spring-boot-dependencies defines AssertJ 2. Not a big deal with assertJ, but there are other fish like Mongo-Java-Driver that are not picking up our version.\r\n\r\nHow does Maven choose precedence here? Why doesn&#39;t our dependency-management win over a far-ancestor&#39;s dependency-management?\r\n\r\nI also noticed that if I add AssertJ as a dependency of MY_COMPANY.platform:spring-boot-parent, it also does NOT use the version in our dependency-management (so I&#39;ll just keep it there for now, so the hierarchy under microscope is shorter).\r\n\r\n**EDIT - Add abbreviated POMs**\r\n\r\n***com.MY_COMPANY.platform:spring-boot-parent***\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n     xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n        &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \r\n        &lt;groupId&gt;com.MYCOMPANY.platform&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-parent&lt;/artifactId&gt;\r\n        &lt;version&gt;3.20.12-SNAPSHOT&lt;/version&gt;\r\n        &lt;packaging&gt;pom&lt;/packaging&gt;\r\n    \r\n        &lt;prerequisites&gt;\r\n            &lt;maven&gt;3.0.4&lt;/maven&gt;\r\n        &lt;/prerequisites&gt;\r\n    \r\n        &lt;parent&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n            &lt;version&gt;1.5.12.RELEASE&lt;/version&gt;\r\n        &lt;/parent&gt;\r\n    \r\n        &lt;properties&gt;\r\n            &lt;MYCOMPANYdependencymanagement.version&gt;2.23.13&lt;/MYCOMPANYdependencymanagement.version&gt;\r\n        &lt;/properties&gt;\r\n    \r\n        &lt;dependencies&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.assertj&lt;/groupId&gt;\r\n                &lt;artifactId&gt;assertj-core&lt;/artifactId&gt;\r\n                &lt;scope&gt;test&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n        &lt;/dependencies&gt;\r\n    \r\n        &lt;dependencyManagement&gt;\r\n            &lt;dependencies&gt;\r\n                &lt;dependency&gt;\r\n                    &lt;groupId&gt;com.MYCOMPANY&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;dependencyManagementBase&lt;/artifactId&gt;\r\n                    &lt;version&gt;${MYCOMPANYdependencymanagement.version}&lt;/version&gt;\r\n                    &lt;type&gt;pom&lt;/type&gt;\r\n                    &lt;scope&gt;import&lt;/scope&gt;\r\n                &lt;/dependency&gt;\r\n            &lt;/dependencies&gt;\r\n        &lt;/dependencyManagement&gt;\r\n    &lt;/project&gt;\r\n\r\n***com.MY_COMPANY:dependencyManagementBase***\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n     xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n        &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \r\n        &lt;groupId&gt;com.MYCOMPANY&lt;/groupId&gt;\r\n        &lt;artifactId&gt;dependencyManagementBase&lt;/artifactId&gt;\r\n        &lt;version&gt;2.23.13&lt;/version&gt;\r\n        &lt;packaging&gt;pom&lt;/packaging&gt;\r\n    \r\n        &lt;modules&gt;\r\n            &lt;module&gt;spring-dep-man&lt;/module&gt;\r\n        &lt;/modules&gt;\r\n    \r\n        &lt;properties&gt;\r\n            &lt;org.assertj-core.version&gt;3.5.2&lt;/org.assertj-core.version&gt;\r\n        &lt;/properties&gt;\r\n    \r\n        &lt;dependencyManagement&gt;\r\n            &lt;dependencies&gt;\r\n                &lt;dependency&gt;\r\n                    &lt;groupId&gt;org.assertj&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;assertj-core&lt;/artifactId&gt;\r\n                    &lt;version&gt;${org.assertj-core.version}&lt;/version&gt;\r\n                    &lt;scope&gt;test&lt;/scope&gt;\r\n                &lt;/dependency&gt;\r\n            &lt;/dependencies&gt;\r\n        &lt;/dependencyManagement&gt;\r\n    &lt;/project&gt;\r\n\r\n**EDIT 2 - Add verbose hierarchy showing different versions **\r\n\r\n    ~/p/springbootparentpom&gt; mvn hierarchy:tree -Dlevel=full\r\n    [INFO] --- hierarchy-maven-plugin:1.4:tree (default-cli) @ spring-boot-parent ---\r\n    [INFO] Displaying hierarchy.\r\n    [INFO]  PARENT org.springframework.boot:spring-boot-starter-parent:1.5.12.RELEASE\r\n    [INFO]    PARENT org.springframework.boot:spring-boot-dependencies:1.5.12.RELEASE\r\n    [INFO]          DEP_MANAGEMENT ........\r\n    [INFO]          DEP_MANAGEMENT org.assertj:assertj-core:2.6.0\r\n    [INFO]    \t\t[ ... Many DEP_MAN and IMPORT ... ]\r\n    [INFO]  IMPORT com.MYCOMPANY:dependencyManagementBase:2.23.14-SNAPSHOT\r\n    [INFO]        DEP_MANAGEMENT ........\r\n    [INFO]        DEP_MANAGEMENT org.assertj:assertj-core:3.5.2\r\n    [INFO]        DEP_MANAGEMENT ........","title":"Maven sourcing dependency version from great-grand-parent instead of our parents dependency-management","body":"<p>Below shows the hierarchy of my POMs.</p>\n\n<p>You can see that we have a company parent-pom for spring boot projects. This POM has spring-boot-starter as it's parent, and it imports our own dependency-management BOM.</p>\n\n<pre><code>[INFO] --- hierarchy-maven-plugin:1.4:tree (default-cli) @ user-service ---\n[INFO]  PARENT com.MY_COMPANY.platform:user:3.20.14-SNAPSHOT\n[INFO]    PARENT com.MY_COMPANY.platform:spring-boot-parent:3.20.12-SNAPSHOT\n[INFO]      PARENT org.springframework.boot:spring-boot-starter-parent:1.5.12.RELEASE\n[INFO]        PARENT org.springframework.boot:spring-boot-dependencies:1.5.12.RELEASE  &lt;&lt;&lt;&lt; This pom defines assertJ 2.x\n[INFO]          [ other imports ]\n[INFO]      IMPORT com.MY_COMPANY:dependencyManagementBase:2.23.14-SNAPSHOT     &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt; This pom defines assertJ 3.x\n[INFO]    IMPORT com.MY_COMPANY.platform:platform-dependency-management:1.20.7\n[INFO] ------------------------------------------------------------------------\n</code></pre>\n\n<p>To focus on a specific, we define AssertJ 3 in our dependency-management; however, spring-boot-dependencies defines AssertJ 2. Not a big deal with assertJ, but there are other fish like Mongo-Java-Driver that are not picking up our version.</p>\n\n<p>How does Maven choose precedence here? Why doesn't our dependency-management win over a far-ancestor's dependency-management?</p>\n\n<p>I also noticed that if I add AssertJ as a dependency of MY_COMPANY.platform:spring-boot-parent, it also does NOT use the version in our dependency-management (so I'll just keep it there for now, so the hierarchy under microscope is shorter).</p>\n\n<p><strong>EDIT - Add abbreviated POMs</strong></p>\n\n<p><strong><em>com.MY_COMPANY.platform:spring-boot-parent</em></strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;com.MYCOMPANY.platform&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-parent&lt;/artifactId&gt;\n    &lt;version&gt;3.20.12-SNAPSHOT&lt;/version&gt;\n    &lt;packaging&gt;pom&lt;/packaging&gt;\n\n    &lt;prerequisites&gt;\n        &lt;maven&gt;3.0.4&lt;/maven&gt;\n    &lt;/prerequisites&gt;\n\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;1.5.12.RELEASE&lt;/version&gt;\n    &lt;/parent&gt;\n\n    &lt;properties&gt;\n        &lt;MYCOMPANYdependencymanagement.version&gt;2.23.13&lt;/MYCOMPANYdependencymanagement.version&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.assertj&lt;/groupId&gt;\n            &lt;artifactId&gt;assertj-core&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;dependencyManagement&gt;\n        &lt;dependencies&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;com.MYCOMPANY&lt;/groupId&gt;\n                &lt;artifactId&gt;dependencyManagementBase&lt;/artifactId&gt;\n                &lt;version&gt;${MYCOMPANYdependencymanagement.version}&lt;/version&gt;\n                &lt;type&gt;pom&lt;/type&gt;\n                &lt;scope&gt;import&lt;/scope&gt;\n            &lt;/dependency&gt;\n        &lt;/dependencies&gt;\n    &lt;/dependencyManagement&gt;\n&lt;/project&gt;\n</code></pre>\n\n<p><strong><em>com.MY_COMPANY:dependencyManagementBase</em></strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;com.MYCOMPANY&lt;/groupId&gt;\n    &lt;artifactId&gt;dependencyManagementBase&lt;/artifactId&gt;\n    &lt;version&gt;2.23.13&lt;/version&gt;\n    &lt;packaging&gt;pom&lt;/packaging&gt;\n\n    &lt;modules&gt;\n        &lt;module&gt;spring-dep-man&lt;/module&gt;\n    &lt;/modules&gt;\n\n    &lt;properties&gt;\n        &lt;org.assertj-core.version&gt;3.5.2&lt;/org.assertj-core.version&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencyManagement&gt;\n        &lt;dependencies&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.assertj&lt;/groupId&gt;\n                &lt;artifactId&gt;assertj-core&lt;/artifactId&gt;\n                &lt;version&gt;${org.assertj-core.version}&lt;/version&gt;\n                &lt;scope&gt;test&lt;/scope&gt;\n            &lt;/dependency&gt;\n        &lt;/dependencies&gt;\n    &lt;/dependencyManagement&gt;\n&lt;/project&gt;\n</code></pre>\n\n<p>**EDIT 2 - Add verbose hierarchy showing different versions **</p>\n\n<pre><code>~/p/springbootparentpom&gt; mvn hierarchy:tree -Dlevel=full\n[INFO] --- hierarchy-maven-plugin:1.4:tree (default-cli) @ spring-boot-parent ---\n[INFO] Displaying hierarchy.\n[INFO]  PARENT org.springframework.boot:spring-boot-starter-parent:1.5.12.RELEASE\n[INFO]    PARENT org.springframework.boot:spring-boot-dependencies:1.5.12.RELEASE\n[INFO]          DEP_MANAGEMENT ........\n[INFO]          DEP_MANAGEMENT org.assertj:assertj-core:2.6.0\n[INFO]          [ ... Many DEP_MAN and IMPORT ... ]\n[INFO]  IMPORT com.MYCOMPANY:dependencyManagementBase:2.23.14-SNAPSHOT\n[INFO]        DEP_MANAGEMENT ........\n[INFO]        DEP_MANAGEMENT org.assertj:assertj-core:3.5.2\n[INFO]        DEP_MANAGEMENT ........\n</code></pre>\n"},{"tags":["java","string"],"comments":[{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":6,"creation_date":1323839690,"post_id":8499698,"comment_id":10519751,"body_markdown":"possible duplicate of [up to first N characters](http://stackoverflow.com/questions/1583940/up-to-first-n-characters)","body":"possible duplicate of <a href=\"http://stackoverflow.com/questions/1583940/up-to-first-n-characters\">up to first N characters</a>"},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1564702763,"post_id":8499698,"comment_id":101127687,"body_markdown":"FYI, a [HORIZONTAL ELLIPSIS](https://en.wikipedia.org/wiki/Ellipsis) is a single character, not two or three [FULL STOP](https://en.wikipedia.org/wiki/Full_stop) characters: …","body":"FYI, a <a href=\"https://en.wikipedia.org/wiki/Ellipsis\" rel=\"nofollow noreferrer\">HORIZONTAL ELLIPSIS</a> is a single character, not two or three <a href=\"https://en.wikipedia.org/wiki/Full_stop\" rel=\"nofollow noreferrer\">FULL STOP</a> characters: …"}],"answers":[{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":2,"up_vote_count":359,"is_accepted":true,"score":357,"last_activity_date":1631498665,"creation_date":1323839816,"answer_id":8499776,"question_id":8499698,"body_markdown":"    s = s.substring(0, Math.min(s.length(), 10));\r\n\r\nUsing `Math.min` like this avoids an exception in the case where the string is already shorter than `10`.\r\n\r\n---------\r\n\r\nNotes:\r\n  \r\n  1.  The above does simple trimming.  If you actually want to replace the last characters with three dots if the string is too long, use Apache Commons `StringUtils.abbreviate`; see @H6&#39;s [solution][1].  If you want to use the Unicode horizontal ellipsis character, see @Basil&#39;s [solution][2].\r\n\r\n  2.  For typical implementations of `String`, `s.substring(0, s.length())` will return `s` rather than allocating a new `String`.\r\n\r\n  3.  This may behave incorrectly&lt;sup&gt;1&lt;/sup&gt; if your String contains Unicode codepoints outside of the BMP; e.g. Emojis.  For a (more complicated) solution that works correctly for all Unicode code-points, see @sibnick&#39;s [solution][3].\r\n\r\n------------\r\n\r\n&lt;sup&gt;1 - A Unicode codepoint that is not on plane 0 (the BMP) is represented as a &quot;surrogate pair&quot; (i.e. two `char` values) in the `String`.  By ignoring this, we might trim the string to fewer than 10 code points, or (worse) truncate it in the middle of a surrogate pair.  On the other hand, `String.length()` is not a good measure of Unicode text length, so trimming based on that property may be the wrong thing to do.&lt;/sup&gt;\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/19975149/139985\r\n  [2]: https://stackoverflow.com/a/57318525/139985\r\n  [3]: https://stackoverflow.com/a/32223795/1602384","title":"Trim a string based on the string length","body":"<pre><code>s = s.substring(0, Math.min(s.length(), 10));\n</code></pre>\n<p>Using <code>Math.min</code> like this avoids an exception in the case where the string is already shorter than <code>10</code>.</p>\n<hr />\n<p>Notes:</p>\n<ol>\n<li><p>The above does simple trimming.  If you actually want to replace the last characters with three dots if the string is too long, use Apache Commons <code>StringUtils.abbreviate</code>; see @H6's <a href=\"https://stackoverflow.com/a/19975149/139985\">solution</a>.  If you want to use the Unicode horizontal ellipsis character, see @Basil's <a href=\"https://stackoverflow.com/a/57318525/139985\">solution</a>.</p>\n</li>\n<li><p>For typical implementations of <code>String</code>, <code>s.substring(0, s.length())</code> will return <code>s</code> rather than allocating a new <code>String</code>.</p>\n</li>\n<li><p>This may behave incorrectly<sup>1</sup> if your String contains Unicode codepoints outside of the BMP; e.g. Emojis.  For a (more complicated) solution that works correctly for all Unicode code-points, see @sibnick's <a href=\"https://stackoverflow.com/a/32223795/1602384\">solution</a>.</p>\n</li>\n</ol>\n<hr />\n<p><sup>1 - A Unicode codepoint that is not on plane 0 (the BMP) is represented as a &quot;surrogate pair&quot; (i.e. two <code>char</code> values) in the <code>String</code>.  By ignoring this, we might trim the string to fewer than 10 code points, or (worse) truncate it in the middle of a surrogate pair.  On the other hand, <code>String.length()</code> is not a good measure of Unicode text length, so trimming based on that property may be the wrong thing to do.</sup></p>\n"},{"tags":[],"owner":{"account_id":963389,"reputation":11798,"user_id":987244,"accept_rate":75,"display_name":"shift66"},"down_vote_count":4,"up_vote_count":13,"is_accepted":false,"score":9,"last_activity_date":1323840681,"creation_date":1323840681,"answer_id":8499875,"question_id":8499698,"body_markdown":"``s = s.length() &gt; 10 ? s.substring(0, 9) : s;``","title":"Trim a string based on the string length","body":"<p><code>s = s.length() &gt; 10 ? s.substring(0, 9) : s;</code></p>\n"},{"tags":[],"owner":{"account_id":143462,"reputation":31666,"user_id":419863,"accept_rate":92,"display_name":"H6_"},"down_vote_count":1,"up_vote_count":167,"is_accepted":false,"score":166,"last_activity_date":1591700940,"creation_date":1384424676,"answer_id":19975149,"question_id":8499698,"body_markdown":"[`StringUtils.abbreviate`][1] from [Apache Commons Lang][2] library could be your friend:\r\n\r\n    StringUtils.abbreviate(&quot;abcdefg&quot;, 6) = &quot;abc...&quot;\r\n    StringUtils.abbreviate(&quot;abcdefg&quot;, 7) = &quot;abcdefg&quot;\r\n    StringUtils.abbreviate(&quot;abcdefg&quot;, 8) = &quot;abcdefg&quot;\r\n    StringUtils.abbreviate(&quot;abcdefg&quot;, 4) = &quot;a...&quot;\r\n\r\n[Commons Lang3][3] even allow to set a custom String as replacement marker. With this you can for example set a single character ellipsis.\r\n\r\n    StringUtils.abbreviate(&quot;abcdefg&quot;, &quot;\\u2026&quot;, 6) = &quot;abcde…&quot;\r\n\r\n  [1]: http://commons.apache.org/proper/commons-lang/javadocs/api-2.6/org/apache/commons/lang/StringUtils.html#abbreviate%28java.lang.String,%20int%29\r\n  [2]: https://commons.apache.org/proper/commons-lang/\r\n  [3]: https://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/StringUtils.html","title":"Trim a string based on the string length","body":"<p><a href=\"http://commons.apache.org/proper/commons-lang/javadocs/api-2.6/org/apache/commons/lang/StringUtils.html#abbreviate%28java.lang.String,%20int%29\" rel=\"noreferrer\"><code>StringUtils.abbreviate</code></a> from <a href=\"https://commons.apache.org/proper/commons-lang/\" rel=\"noreferrer\">Apache Commons Lang</a> library could be your friend:</p>\n\n<pre><code>StringUtils.abbreviate(\"abcdefg\", 6) = \"abc...\"\nStringUtils.abbreviate(\"abcdefg\", 7) = \"abcdefg\"\nStringUtils.abbreviate(\"abcdefg\", 8) = \"abcdefg\"\nStringUtils.abbreviate(\"abcdefg\", 4) = \"a...\"\n</code></pre>\n\n<p><a href=\"https://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/StringUtils.html\" rel=\"noreferrer\">Commons Lang3</a> even allow to set a custom String as replacement marker. With this you can for example set a single character ellipsis.</p>\n\n<pre><code>StringUtils.abbreviate(\"abcdefg\", \"\\u2026\", 6) = \"abcde…\"\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3145287,"reputation":529,"user_id":2659877,"display_name":"MVojtkovszky"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1440579932,"creation_date":1440579932,"answer_id":32222331,"question_id":8499698,"body_markdown":"Or you can just use this method in case you don&#39;t have StringUtils on hand:\r\n\r\n    public static String abbreviateString(String input, int maxLength) {\r\n        if (input.length() &lt;= maxLength) \r\n            return input;\r\n        else \r\n            return input.substring(0, maxLength-2) + &quot;..&quot;;\r\n    }","title":"Trim a string based on the string length","body":"<p>Or you can just use this method in case you don't have StringUtils on hand:</p>\n\n<pre><code>public static String abbreviateString(String input, int maxLength) {\n    if (input.length() &lt;= maxLength) \n        return input;\n    else \n        return input.substring(0, maxLength-2) + \"..\";\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":53490,"reputation":4005,"user_id":159923,"display_name":"sibnick"},"down_vote_count":0,"up_vote_count":30,"is_accepted":false,"score":30,"last_activity_date":1440583977,"creation_date":1440583977,"answer_id":32223795,"question_id":8499698,"body_markdown":"As usual nobody cares about UTF-16 surrogate pairs. See about them: [What are the most common non-BMP Unicode characters in actual use?][1] Even authors of org.apache.commons/commons-lang3\r\n\r\nYou can see difference between correct code and usual code in this sample:\r\n\r\n    public static void main(String[] args) {\r\n        //string with FACE WITH TEARS OF JOY symbol\r\n        String s = &quot;abcdafghi\\uD83D\\uDE02cdefg&quot;;\r\n        int maxWidth = 10;\r\n        System.out.println(s);\r\n        //do not care about UTF-16 surrogate pairs\r\n        System.out.println(s.substring(0, Math.min(s.length(), maxWidth)));\r\n        //correctly process UTF-16 surrogate pairs\r\n        if(s.length()&gt;maxWidth){\r\n            int correctedMaxWidth = (Character.isLowSurrogate(s.charAt(maxWidth)))&amp;&amp;maxWidth&gt;0 ? maxWidth-1 : maxWidth;\r\n            System.out.println(s.substring(0, Math.min(s.length(), correctedMaxWidth)));\r\n        }\r\n    }\r\n\r\n\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/5567249/what-are-the-most-common-non-bmp-unicode-characters-in-actual-use","title":"Trim a string based on the string length","body":"<p>As usual nobody cares about UTF-16 surrogate pairs. See about them: <a href=\"https://stackoverflow.com/questions/5567249/what-are-the-most-common-non-bmp-unicode-characters-in-actual-use\">What are the most common non-BMP Unicode characters in actual use?</a> Even authors of org.apache.commons/commons-lang3</p>\n\n<p>You can see difference between correct code and usual code in this sample:</p>\n\n<pre><code>public static void main(String[] args) {\n    //string with FACE WITH TEARS OF JOY symbol\n    String s = \"abcdafghi\\uD83D\\uDE02cdefg\";\n    int maxWidth = 10;\n    System.out.println(s);\n    //do not care about UTF-16 surrogate pairs\n    System.out.println(s.substring(0, Math.min(s.length(), maxWidth)));\n    //correctly process UTF-16 surrogate pairs\n    if(s.length()&gt;maxWidth){\n        int correctedMaxWidth = (Character.isLowSurrogate(s.charAt(maxWidth)))&amp;&amp;maxWidth&gt;0 ? maxWidth-1 : maxWidth;\n        System.out.println(s.substring(0, Math.min(s.length(), correctedMaxWidth)));\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":103996,"reputation":6115,"user_id":278266,"accept_rate":68,"display_name":"Whimsical"},"down_vote_count":0,"up_vote_count":84,"is_accepted":false,"score":84,"last_activity_date":1596019138,"creation_date":1454841160,"answer_id":35252333,"question_id":8499698,"body_markdown":"There is a Apache Commons `StringUtils` function which does this.\r\n\r\n\r\n    s = StringUtils.left(s, 10)\r\n\r\n&gt; If len characters are not available, or the String is null, the String will be returned without an exception. An empty String is returned if len is negative.\r\n\r\n&gt; StringUtils.left(null, *)    = null  \r\n&gt; StringUtils.left(*, -ve)     = &quot;&quot;  \r\n&gt; StringUtils.left(&quot;&quot;, *)      = &quot;&quot;  \r\n&gt; StringUtils.left(&quot;abc&quot;, 0)   = &quot;&quot;  \r\n&gt; StringUtils.left(&quot;abc&quot;, 2)   = &quot;ab&quot;  \r\n&gt; StringUtils.left(&quot;abc&quot;, 4)   = &quot;abc&quot;  \r\n\r\n[StringUtils.Left JavaDocs][1] \r\n\r\nCourtesy:Steeve McCauley\r\n\r\n  [1]: https://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/StringUtils.html#left(java.lang.String,%20int)","title":"Trim a string based on the string length","body":"<p>There is a Apache Commons <code>StringUtils</code> function which does this.</p>\n<pre><code>s = StringUtils.left(s, 10)\n</code></pre>\n<blockquote>\n<p>If len characters are not available, or the String is null, the String will be returned without an exception. An empty String is returned if len is negative.</p>\n</blockquote>\n<blockquote>\n<p>StringUtils.left(null, <em>)    = null<br />\nStringUtils.left(</em>, -ve)     = &quot;&quot;<br />\nStringUtils.left(&quot;&quot;, *)      = &quot;&quot;<br />\nStringUtils.left(&quot;abc&quot;, 0)   = &quot;&quot;<br />\nStringUtils.left(&quot;abc&quot;, 2)   = &quot;ab&quot;<br />\nStringUtils.left(&quot;abc&quot;, 4)   = &quot;abc&quot;</p>\n</blockquote>\n<p><a href=\"https://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/StringUtils.html#left(java.lang.String,%20int)\" rel=\"noreferrer\">StringUtils.Left JavaDocs</a></p>\n<p>Courtesy:Steeve McCauley</p>\n"},{"tags":[],"owner":{"account_id":1314155,"reputation":545,"user_id":1261464,"accept_rate":67,"display_name":"rekotc"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1528833937,"creation_date":1495790451,"answer_id":44197961,"question_id":8499698,"body_markdown":"Just in case you are looking for a way to trim and keep the LAST 10 characters of a string.\r\n\r\n    s = s.substring(Math.max(s.length(),10) - 10);\r\n","title":"Trim a string based on the string length","body":"<p>Just in case you are looking for a way to trim and keep the LAST 10 characters of a string.</p>\n\n<pre><code>s = s.substring(Math.max(s.length(),10) - 10);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8280223,"reputation":11,"user_id":6225164,"display_name":"aceminds"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1529070162,"creation_date":1528832717,"answer_id":50824754,"question_id":8499698,"body_markdown":"    str==null ? str : str.substring(0, Math.min(str.length(), 10))\r\n\r\nor,\r\n\r\n    str==null ? &quot;&quot; : str.substring(0, Math.min(str.length(), 10))\r\n\r\nWorks with null.","title":"Trim a string based on the string length","body":"<pre><code>str==null ? str : str.substring(0, Math.min(str.length(), 10))\n</code></pre>\n\n<p>or,</p>\n\n<pre><code>str==null ? \"\" : str.substring(0, Math.min(str.length(), 10))\n</code></pre>\n\n<p>Works with null.</p>\n"},{"tags":[],"owner":{"account_id":5984797,"reputation":14686,"user_id":5730321,"accept_rate":69,"display_name":"Leo DroidCoder"},"down_vote_count":5,"up_vote_count":10,"is_accepted":false,"score":5,"last_activity_date":1626765933,"creation_date":1551367907,"answer_id":54929158,"question_id":8499698,"body_markdown":"The question is asked on Java, but it was back in 2014.  \r\nIn case you use Kotlin now, it is as simple as:\r\n\r\n    yourString.take(10)\r\n\r\n&gt; Returns a string containing the first n characters from this string, or the entire string if this string is shorter.\r\n\r\n[Documentation][1]\r\n\r\n\r\n  [1]: https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.text/take.html","title":"Trim a string based on the string length","body":"<p>The question is asked on Java, but it was back in 2014.<br />\nIn case you use Kotlin now, it is as simple as:</p>\n<pre><code>yourString.take(10)\n</code></pre>\n<blockquote>\n<p>Returns a string containing the first n characters from this string, or the entire string if this string is shorter.</p>\n</blockquote>\n<p><a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.text/take.html\" rel=\"nofollow noreferrer\">Documentation</a></p>\n"},{"tags":[],"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1564707375,"creation_date":1564705235,"answer_id":57318525,"question_id":8499698,"body_markdown":"# tl;dr\r\n\r\nYou seem to be asking for an [ellipsis][1] (`…`) character in the last place, when truncating. Here is a one-liner to manipulate your input string.\r\n\r\n    String input = &quot;abcdefghijkl&quot;;\r\n    String output = ( input.length () &gt; 10 ) ? input.substring ( 0 , 10 - 1 ).concat ( &quot;…&quot; ) : input;\r\n\r\nSee this [code run live at IdeOne.com.][2]\r\n\r\n&gt;abcdefghi…\r\n\r\n# Ternary operator\r\n\r\nWe can make a one-liner by using the [ternary operator][3]. \r\n\r\n    String input = &quot;abcdefghijkl&quot; ;\r\n\r\n    String output = \r\n        ( input.length() &gt; 10 )          // If too long…\r\n        ?                                \r\n        input     \r\n        .substring( 0 , 10 - 1 )         // Take just the first part, adjusting by 1 to replace that last character with an ellipsis.\r\n        .concat( &quot;…&quot; )                   // Add the ellipsis character.\r\n        :                                // Or, if not too long…\r\n        input                            // Just return original string.\r\n    ;\r\n\r\nSee this [code run live at IdeOne.com.][2]\r\n\r\n&gt;abcdefghi…\r\n\r\n\r\n# Java streams\r\n\r\nThe Java Streams facility makes this interesting, as of Java 9 and later. Interesting, but maybe not the best approach.\r\n\r\nWe use [code points][4] rather than `char` values. The `char` type is legacy, and is limited to the [a subset of][5] all possible [Unicode][6] characters.\r\n\r\n    String input = &quot;abcdefghijkl&quot; ;\r\n    int limit = 10 ;\r\n    String output =\r\n            input\r\n                    .codePoints()\r\n                    .limit( limit )\r\n                    .collect(                                    // Collect the results of processing each code point.\r\n                            StringBuilder::new,                  // Supplier&lt;R&gt; supplier\r\n                            StringBuilder::appendCodePoint,      // ObjIntConsumer&lt;R&gt; accumulator\r\n                            StringBuilder::append                // BiConsumer&lt;R,​R&gt; combiner\r\n                    )\r\n                    .toString()\r\n            ;\r\n\r\nIf we had excess characters truncated, replace the last character with an  [ellipsis][1]. \r\n\r\n    if ( input.length () &gt; limit )\r\n    {\r\n        output = output.substring ( 0 , output.length () - 1 ) + &quot;…&quot;;\r\n    }\r\n\r\n\r\nIf only I could think of a way to put together the stream line with the &quot;if over limit, do ellipsis&quot; part. \r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Ellipsis\r\n  [2]: https://ideone.com/vCCv7f\r\n  [3]: https://docs.oracle.com/javase/tutorial/java/nutsandbolts/op2.html\r\n  [4]: https://en.wikipedia.org/wiki/Code_point\r\n  [5]: https://en.wikipedia.org/wiki/Plane_(Unicode)#Basic_Multilingual_Plane\r\n  [6]: https://en.wikipedia.org/wiki/Unicode","title":"Trim a string based on the string length","body":"<h1>tl;dr</h1>\n\n<p>You seem to be asking for an <a href=\"https://en.wikipedia.org/wiki/Ellipsis\" rel=\"noreferrer\">ellipsis</a> (<code>…</code>) character in the last place, when truncating. Here is a one-liner to manipulate your input string.</p>\n\n<pre><code>String input = \"abcdefghijkl\";\nString output = ( input.length () &gt; 10 ) ? input.substring ( 0 , 10 - 1 ).concat ( \"…\" ) : input;\n</code></pre>\n\n<p>See this <a href=\"https://ideone.com/vCCv7f\" rel=\"noreferrer\">code run live at IdeOne.com.</a></p>\n\n<blockquote>\n  <p>abcdefghi…</p>\n</blockquote>\n\n<h1>Ternary operator</h1>\n\n<p>We can make a one-liner by using the <a href=\"https://docs.oracle.com/javase/tutorial/java/nutsandbolts/op2.html\" rel=\"noreferrer\">ternary operator</a>. </p>\n\n<pre><code>String input = \"abcdefghijkl\" ;\n\nString output = \n    ( input.length() &gt; 10 )          // If too long…\n    ?                                \n    input     \n    .substring( 0 , 10 - 1 )         // Take just the first part, adjusting by 1 to replace that last character with an ellipsis.\n    .concat( \"…\" )                   // Add the ellipsis character.\n    :                                // Or, if not too long…\n    input                            // Just return original string.\n;\n</code></pre>\n\n<p>See this <a href=\"https://ideone.com/vCCv7f\" rel=\"noreferrer\">code run live at IdeOne.com.</a></p>\n\n<blockquote>\n  <p>abcdefghi…</p>\n</blockquote>\n\n<h1>Java streams</h1>\n\n<p>The Java Streams facility makes this interesting, as of Java 9 and later. Interesting, but maybe not the best approach.</p>\n\n<p>We use <a href=\"https://en.wikipedia.org/wiki/Code_point\" rel=\"noreferrer\">code points</a> rather than <code>char</code> values. The <code>char</code> type is legacy, and is limited to the <a href=\"https://en.wikipedia.org/wiki/Plane_(Unicode)#Basic_Multilingual_Plane\" rel=\"noreferrer\">a subset of</a> all possible <a href=\"https://en.wikipedia.org/wiki/Unicode\" rel=\"noreferrer\">Unicode</a> characters.</p>\n\n<pre><code>String input = \"abcdefghijkl\" ;\nint limit = 10 ;\nString output =\n        input\n                .codePoints()\n                .limit( limit )\n                .collect(                                    // Collect the results of processing each code point.\n                        StringBuilder::new,                  // Supplier&lt;R&gt; supplier\n                        StringBuilder::appendCodePoint,      // ObjIntConsumer&lt;R&gt; accumulator\n                        StringBuilder::append                // BiConsumer&lt;R,​R&gt; combiner\n                )\n                .toString()\n        ;\n</code></pre>\n\n<p>If we had excess characters truncated, replace the last character with an  <a href=\"https://en.wikipedia.org/wiki/Ellipsis\" rel=\"noreferrer\">ellipsis</a>. </p>\n\n<pre><code>if ( input.length () &gt; limit )\n{\n    output = output.substring ( 0 , output.length () - 1 ) + \"…\";\n}\n</code></pre>\n\n<p>If only I could think of a way to put together the stream line with the \"if over limit, do ellipsis\" part. </p>\n"},{"tags":[],"owner":{"account_id":16236607,"reputation":27,"user_id":11723960,"display_name":"Mahfuzur Rahman"},"down_vote_count":2,"up_vote_count":1,"is_accepted":false,"score":-1,"last_activity_date":1605871747,"creation_date":1605871747,"answer_id":64928661,"question_id":8499698,"body_markdown":"// this is how you shorten the length of the string with .. \r\n// add following method to your class \r\n\r\n\r\n    private String abbreviate(String s){\r\n      if(s.length() &lt;= 10) return s;\r\n      return s.substring(0, 8) + &quot;..&quot; ;\r\n    }\r\n\r\n","title":"Trim a string based on the string length","body":"<p>// this is how you shorten the length of the string with ..\n// add following method to your class</p>\n<pre><code>private String abbreviate(String s){\n  if(s.length() &lt;= 10) return s;\n  return s.substring(0, 8) + &quot;..&quot; ;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15525540,"reputation":587,"user_id":11211041,"display_name":"Snostorp"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1679400294,"creation_date":1679400294,"answer_id":75800982,"question_id":8499698,"body_markdown":"A great compact way, without having to use a third party library, would be to [use the ternary operator (?:) as described by @BasilBourque][1]:  \r\n\r\n    s = s.length() &gt; 10 ? s.substring(0, 10 - 2).concat(&quot;..&quot;) : s;\r\n\r\nbut it might be just as simple to use a &quot;one-line&quot; if-statement:  \r\n\r\n    if (s.length() &gt; 10) s = s.substring(0, 10 - 2) + &quot;..&quot;;\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/57318525/10749567","title":"Trim a string based on the string length","body":"<p>A great compact way, without having to use a third party library, would be to <a href=\"https://stackoverflow.com/a/57318525/10749567\">use the ternary operator (?:) as described by @BasilBourque</a>:</p>\n<pre><code>s = s.length() &gt; 10 ? s.substring(0, 10 - 2).concat(&quot;..&quot;) : s;\n</code></pre>\n<p>but it might be just as simple to use a &quot;one-line&quot; if-statement:</p>\n<pre><code>if (s.length() &gt; 10) s = s.substring(0, 10 - 2) + &quot;..&quot;;\n</code></pre>\n"}],"owner":{"account_id":1074275,"reputation":2081,"user_id":1072761,"accept_rate":70,"display_name":"yshak"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":331361,"favorite_count":0,"down_vote_count":0,"up_vote_count":199,"accepted_answer_id":8499776,"answer_count":12,"score":199,"last_activity_date":1679400294,"creation_date":1323839023,"question_id":8499698,"body_markdown":"I want to trim a string if the length exceeds 10 characters.\r\n\r\nSuppose if the string length is 12 (`String s=&quot;abcdafghijkl&quot;`), then the new trimmed string will contain `&quot;abcdefgh..&quot;`.\r\n\r\nHow can I achieve this?","title":"Trim a string based on the string length","body":"<p>I want to trim a string if the length exceeds 10 characters.</p>\n\n<p>Suppose if the string length is 12 (<code>String s=\"abcdafghijkl\"</code>), then the new trimmed string will contain <code>\"abcdefgh..\"</code>.</p>\n\n<p>How can I achieve this?</p>\n"},{"tags":["java","spring-boot","vue.js"],"comments":[{"owner":{"account_id":2843847,"reputation":55833,"user_id":2442804,"accept_rate":80,"display_name":"luk2302"},"score":0,"creation_date":1679399726,"post_id":75800804,"comment_id":133711344,"body_markdown":"Have you actually tried it? What does `payload.body` now contain? What is the difference in the body compared to before??","body":"Have you actually tried it? What does <code>payload.body</code> now contain? What is the difference in the body compared to before??"},{"owner":{"account_id":20833547,"reputation":1212,"user_id":15302273,"display_name":"stacktrace2234"},"score":0,"creation_date":1679400100,"post_id":75800804,"comment_id":133711451,"body_markdown":"`payload.body` looks like: `{&quot;headers&quot;:{},&quot;body&quot;:{&quot;value&quot;: &quot;Hello&quot;},&quot;statusCode&quot;: &quot;OK&quot;,&quot;statusCodeValue&quot;:200}` -&gt; This is what should be converted to a body that is only: {&quot;value&quot;: &quot;Hello&quot;} and use the object like: `&lt;h2&gt; {{ helloObj.value }}` &lt;/h2&gt;","body":"<code>payload.body</code> looks like: <code>{&quot;headers&quot;:{},&quot;body&quot;:{&quot;value&quot;: &quot;Hello&quot;},&quot;statusCode&quot;: &quot;OK&quot;,&quot;statusCodeValue&quot;:200}</code> -&gt; This is what should be converted to a body that is only: {&quot;value&quot;: &quot;Hello&quot;} and use the object like: <code>&lt;h2&gt; {{ helloObj.value }}</code> &lt;/h2&gt;"},{"owner":{"account_id":20833547,"reputation":1212,"user_id":15302273,"display_name":"stacktrace2234"},"score":0,"creation_date":1679402148,"post_id":75800804,"comment_id":133712017,"body_markdown":"I made a workaround that works although I hate it: `let myString = payload.body.substring(payload.body.indexOf(&quot;body&quot;)+6, payload.body.indexOf(&quot;statusCode&quot;)-2); let myObject = JSON.parse(myString);`","body":"I made a workaround that works although I hate it: <code>let myString = payload.body.substring(payload.body.indexOf(&quot;body&quot;)+6, payload.body.indexOf(&quot;statusCode&quot;)-2); let myObject = JSON.parse(myString);</code>"}],"owner":{"account_id":20833547,"reputation":1212,"user_id":15302273,"display_name":"stacktrace2234"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":118,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679400228,"creation_date":1679399399,"question_id":75800804,"body_markdown":"Before I had the controller that returned the Object itself:\r\n\r\n```\r\n@RestController\r\npublic class Controller {\r\n  @GetMapping(&quot;/hello&quot;)\r\n  public HelloObj getHelloObj() {\r\n     return new HelloObj(&quot;Hello&quot;);\r\n  }\r\n}\r\n\r\npublic class HelloObj {\r\n   private String value;\r\n   \r\n   public HelloObj(String value) {\r\n     this.value = value;\r\n   }\r\n\r\n   // getter/setter\r\n}\r\n```\r\n\r\nIn my VueJs I got this response and parsed it into an object like this (it is a websocket handler method):\r\n\r\n```\r\ngetHello(payload) {\r\n  let helloObj = JSON.parse(payload.body);\r\n  console.log(helloObj.value);\r\n}\r\n```\r\n\r\nI modified my backend in a way that it returns a ResponseEntity now:\r\n\r\n```\r\n@RestController\r\npublic class Controller {\r\n  @GetMapping(&quot;/hello&quot;)\r\n  public ResponseEntity&lt;HelloObj&gt; getHelloObj() {\r\n     return new ResponseEntity&lt;&gt;(new HelloObj(&quot;Hello&quot;), HttpStatus.OK);\r\n  }\r\n}\r\n```\r\n\r\nBut I have no idea how to parse this response in my VueJS project. My question is how do I need to modify this code:\r\n\r\n```\r\ngetHello(payload) {\r\n  let helloObj = JSON.parse(payload.body);\r\n  console.log(helloObj.value);\r\n}\r\n```\r\n","title":"How to parse Spring Boot&#39;s backend ResponseEntity response in JS/VueJS?","body":"<p>Before I had the controller that returned the Object itself:</p>\n<pre><code>@RestController\npublic class Controller {\n  @GetMapping(&quot;/hello&quot;)\n  public HelloObj getHelloObj() {\n     return new HelloObj(&quot;Hello&quot;);\n  }\n}\n\npublic class HelloObj {\n   private String value;\n   \n   public HelloObj(String value) {\n     this.value = value;\n   }\n\n   // getter/setter\n}\n</code></pre>\n<p>In my VueJs I got this response and parsed it into an object like this (it is a websocket handler method):</p>\n<pre><code>getHello(payload) {\n  let helloObj = JSON.parse(payload.body);\n  console.log(helloObj.value);\n}\n</code></pre>\n<p>I modified my backend in a way that it returns a ResponseEntity now:</p>\n<pre><code>@RestController\npublic class Controller {\n  @GetMapping(&quot;/hello&quot;)\n  public ResponseEntity&lt;HelloObj&gt; getHelloObj() {\n     return new ResponseEntity&lt;&gt;(new HelloObj(&quot;Hello&quot;), HttpStatus.OK);\n  }\n}\n</code></pre>\n<p>But I have no idea how to parse this response in my VueJS project. My question is how do I need to modify this code:</p>\n<pre><code>getHello(payload) {\n  let helloObj = JSON.parse(payload.body);\n  console.log(helloObj.value);\n}\n</code></pre>\n"},{"tags":["java","enums"],"comments":[{"owner":{"account_id":4819600,"reputation":56500,"user_id":3890632,"display_name":"khelwood"},"score":6,"creation_date":1431351570,"post_id":30169153,"comment_id":48444470,"body_markdown":"The solution that comes to mind is: don&#39;t have your url in a static field in your enum. Put it outside the enum or in your constructor.","body":"The solution that comes to mind is: don&#39;t have your url in a static field in your enum. Put it outside the enum or in your constructor."},{"owner":{"account_id":558770,"reputation":16438,"user_id":755804,"accept_rate":20,"display_name":"18446744073709551615"},"score":0,"creation_date":1679400015,"post_id":30169153,"comment_id":133711430,"body_markdown":"Does this answer your question? [How to define static constants in a Java enum?](https://stackoverflow.com/questions/23608885/how-to-define-static-constants-in-a-java-enum)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/23608885/how-to-define-static-constants-in-a-java-enum\">How to define static constants in a Java enum?</a>"}],"answers":[{"tags":[],"owner":{"account_id":3452279,"reputation":37360,"user_id":2891664,"accept_rate":100,"display_name":"Radiodef"},"down_vote_count":0,"up_vote_count":33,"is_accepted":true,"score":33,"last_activity_date":1531614883,"creation_date":1431351792,"answer_id":30169296,"question_id":30169153,"body_markdown":"There are two possible solutions which seem reasonable to me.\r\n\r\n1. Using a nested class (which is initialized separately):\r\n\r\n        public enum ParseResource {\r\n            PUSH(Constants.API_URL);\r\n        \r\n            private static class Constants {\r\n                private static final String API_URL = &quot;https://api.parse.com/1&quot;;\r\n            }\r\n        \r\n            private String url;\r\n            private ParseResource(String url) { this.url = url; }\r\n        }\r\n\r\n    That&#39;s the most generally useful, because it doesn&#39;t impose any important restrictions.\r\n\r\n2. Using a method:\r\n\r\n        public enum ParseResource {\r\n            PUSH(getApiUrl());\r\n        \r\n            private static String getApiUrl() { return &quot;https://api.parse.com/1&quot;; }\r\n        \r\n            private String url;\r\n            private ParseResource(String url) { this.url = url; }\r\n        }\r\n\r\n    One hidden downside to using a method is that a method invocation isn&#39;t a [*constant expression*](https://docs.oracle.com/javase/specs/jls/se10/html/jls-15.html#jls-15.28), so it can&#39;t be used for some things, like annotation element values.\r\n\r\n---\r\n\r\nThere&#39;s also a 3rd possible way which works in practice, but as of Java 9 is *no longer guaranteed by the JLS to work*, so it shouldn&#39;t be used.\r\n\r\nThis used the qualified name `ParseResource.API_URL` instead of the simple name `API_URL` to circumvent the forward reference error, because `API_URL` is a [*constant variable*](https://docs.oracle.com/javase/specs/jls/se10/html/jls-4.html#jls-4.12.4) (i.e. initialized with a `String` literal in this case):\r\n\r\n    public enum ParseResource {\r\n        PUSH(ParseResource.API_URL);\r\n    \r\n        private static final String API_URL = &quot;https://api.parse.com/1&quot;;\r\n    \r\n        private String url;\r\n        private ParseResource(String url) { this.url = url; }\r\n    }\r\n\r\nIn Java 8, the good behavior of this *was* specified by [8.3.2](https://docs.oracle.com/javase/specs/jls/se8/html/jls-8.html#jls-8.3.2):\r\n\r\n&lt;!-- archive: http://archive.is/EUJ84#selection-8131.0-8155.29 --&gt;\r\n\r\n&gt;Note that `static` fields that are constant variables are initialized before other `static` fields. [...] Such fields will never be observed to have their default initial values.\r\n\r\nHowever, [due to this bug report](https://bugs.openjdk.java.net/browse/JDK-8168045), the wording was changed to the following [in Java 9](https://docs.oracle.com/javase/specs/jls/se9/html/jls-8.html#jls-8.3.2):\r\n\r\n&lt;!-- archive: http://archive.is/7QiRe --&gt;\r\n&lt;!-- archive: http://archive.is/KRY8S#selection-8171.1-8195.2 --&gt;\r\n\r\n&gt;Note that `static` fields that are constant variables are initialized before other `static` fields. [...] **When such fields are referenced by simple name**, they will never be observed to have their default initial values.\r\n\r\nThe above code was not affected by the defect described in the bug report, but as of Java 9 it&#39;s no longer guaranteed to work.","title":"Illegal forward reference in enum","body":"<p>There are two possible solutions which seem reasonable to me.</p>\n\n<ol>\n<li><p>Using a nested class (which is initialized separately):</p>\n\n<pre><code>public enum ParseResource {\n    PUSH(Constants.API_URL);\n\n    private static class Constants {\n        private static final String API_URL = \"https://api.parse.com/1\";\n    }\n\n    private String url;\n    private ParseResource(String url) { this.url = url; }\n}\n</code></pre>\n\n<p>That's the most generally useful, because it doesn't impose any important restrictions.</p></li>\n<li><p>Using a method:</p>\n\n<pre><code>public enum ParseResource {\n    PUSH(getApiUrl());\n\n    private static String getApiUrl() { return \"https://api.parse.com/1\"; }\n\n    private String url;\n    private ParseResource(String url) { this.url = url; }\n}\n</code></pre>\n\n<p>One hidden downside to using a method is that a method invocation isn't a <a href=\"https://docs.oracle.com/javase/specs/jls/se10/html/jls-15.html#jls-15.28\" rel=\"noreferrer\"><em>constant expression</em></a>, so it can't be used for some things, like annotation element values.</p></li>\n</ol>\n\n<hr>\n\n<p>There's also a 3rd possible way which works in practice, but as of Java 9 is <em>no longer guaranteed by the JLS to work</em>, so it shouldn't be used.</p>\n\n<p>This used the qualified name <code>ParseResource.API_URL</code> instead of the simple name <code>API_URL</code> to circumvent the forward reference error, because <code>API_URL</code> is a <a href=\"https://docs.oracle.com/javase/specs/jls/se10/html/jls-4.html#jls-4.12.4\" rel=\"noreferrer\"><em>constant variable</em></a> (i.e. initialized with a <code>String</code> literal in this case):</p>\n\n<pre><code>public enum ParseResource {\n    PUSH(ParseResource.API_URL);\n\n    private static final String API_URL = \"https://api.parse.com/1\";\n\n    private String url;\n    private ParseResource(String url) { this.url = url; }\n}\n</code></pre>\n\n<p>In Java 8, the good behavior of this <em>was</em> specified by <a href=\"https://docs.oracle.com/javase/specs/jls/se8/html/jls-8.html#jls-8.3.2\" rel=\"noreferrer\">8.3.2</a>:</p>\n\n\n\n<blockquote>\n  <p>Note that <code>static</code> fields that are constant variables are initialized before other <code>static</code> fields. [...] Such fields will never be observed to have their default initial values.</p>\n</blockquote>\n\n<p>However, <a href=\"https://bugs.openjdk.java.net/browse/JDK-8168045\" rel=\"noreferrer\">due to this bug report</a>, the wording was changed to the following <a href=\"https://docs.oracle.com/javase/specs/jls/se9/html/jls-8.html#jls-8.3.2\" rel=\"noreferrer\">in Java 9</a>:</p>\n\n<p>\n</p>\n\n<blockquote>\n  <p>Note that <code>static</code> fields that are constant variables are initialized before other <code>static</code> fields. [...] <strong>When such fields are referenced by simple name</strong>, they will never be observed to have their default initial values.</p>\n</blockquote>\n\n<p>The above code was not affected by the defect described in the bug report, but as of Java 9 it's no longer guaranteed to work.</p>\n"},{"tags":[],"owner":{"account_id":121881,"reputation":20677,"user_id":315306,"accept_rate":90,"display_name":"Raffaele"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1431351845,"creation_date":1431351845,"answer_id":30169319,"question_id":30169153,"body_markdown":"Enum are syntactic sugar that basically allow you to write nicer switch statements as well as iterate over a compile-time set of values of a certain class.\r\n\r\nIn this case you can define you compile-time string in a class like `Constants` - and the general rule when you face this kind of compile problems is that you should not use enum that way and need other classes","title":"Illegal forward reference in enum","body":"<p>Enum are syntactic sugar that basically allow you to write nicer switch statements as well as iterate over a compile-time set of values of a certain class.</p>\n\n<p>In this case you can define you compile-time string in a class like <code>Constants</code> - and the general rule when you face this kind of compile problems is that you should not use enum that way and need other classes</p>\n"},{"tags":[],"owner":{"account_id":558770,"reputation":16438,"user_id":755804,"accept_rate":20,"display_name":"18446744073709551615"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679399905,"creation_date":1679399905,"answer_id":75800899,"question_id":30169153,"body_markdown":"It is possible, you need to specify the class name:\r\n\r\n    class Scratch {\r\n        public static void main(String[] args) {\r\n            System.out.println(MyEnum.BAR3); // 10:BAR3\r\n        }\r\n    }\r\n    enum MyEnum {\r\n    //  BAR1(       foo),   // error: illegal forward reference\r\n    //  BAR2(MyEnum.foo2),  // error: illegal forward reference\r\n        BAR3(MyEnum.foo);   // no error\r\n\r\n        int x;\r\n\r\n        public static final int foo =10;\r\n        public static       int foo2=20;\r\n        MyEnum(int i) {x = i;}\r\n\r\n        @Override public String toString() { return x+&quot;:&quot;+super.toString(); }\r\n    }\r\n","title":"Illegal forward reference in enum","body":"<p>It is possible, you need to specify the class name:</p>\n<pre><code>class Scratch {\n    public static void main(String[] args) {\n        System.out.println(MyEnum.BAR3); // 10:BAR3\n    }\n}\nenum MyEnum {\n//  BAR1(       foo),   // error: illegal forward reference\n//  BAR2(MyEnum.foo2),  // error: illegal forward reference\n    BAR3(MyEnum.foo);   // no error\n\n    int x;\n\n    public static final int foo =10;\n    public static       int foo2=20;\n    MyEnum(int i) {x = i;}\n\n    @Override public String toString() { return x+&quot;:&quot;+super.toString(); }\n}\n</code></pre>\n"}],"owner":{"account_id":3629749,"reputation":24734,"user_id":3026283,"accept_rate":90,"display_name":"H&#233;ctor"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6738,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"accepted_answer_id":30169296,"answer_count":3,"score":10,"last_activity_date":1679399905,"creation_date":1431351395,"question_id":30169153,"body_markdown":"I have an enum and I&#39;m trying to pass a final static variable as parameter in constructor. Problem is that first statement in enums has to be a instance itself, but in that case, final variable is not defined yet. See the code and you will understand:\r\n\r\n    public enum ParseResource {\r\n    \r\n        PUSH(API_URL); //Error: illegal forward reference\r\n    \r\n        private final static String API_URL = &quot;https://api.parse.com/1&quot;;\r\n    \r\n        private String url;\r\n        private ParseResource(String url) {\r\n            this.url = url;\r\n        }\r\n    }\r\n\r\nand the other option:\r\n\r\n\r\n    public enum ParseResource {\r\n    \r\n        //Illegal in enums, first statement has to be an instance\r\n        private final static String API_URL = &quot;https://api.parse.com/1&quot;;\r\n    \r\n        PUSH(API_URL);\r\n        \r\n        private ParseResource(String url) {\r\n            this.url = url;\r\n        }\r\n    }\r\n\r\nHow can I solve it? Thanks.","title":"Illegal forward reference in enum","body":"<p>I have an enum and I'm trying to pass a final static variable as parameter in constructor. Problem is that first statement in enums has to be a instance itself, but in that case, final variable is not defined yet. See the code and you will understand:</p>\n\n<pre><code>public enum ParseResource {\n\n    PUSH(API_URL); //Error: illegal forward reference\n\n    private final static String API_URL = \"https://api.parse.com/1\";\n\n    private String url;\n    private ParseResource(String url) {\n        this.url = url;\n    }\n}\n</code></pre>\n\n<p>and the other option:</p>\n\n<pre><code>public enum ParseResource {\n\n    //Illegal in enums, first statement has to be an instance\n    private final static String API_URL = \"https://api.parse.com/1\";\n\n    PUSH(API_URL);\n\n    private ParseResource(String url) {\n        this.url = url;\n    }\n}\n</code></pre>\n\n<p>How can I solve it? Thanks.</p>\n"},{"tags":["java","spring-boot","date","java-11"],"comments":[{"owner":{"account_id":5150443,"reputation":34158,"user_id":4125191,"display_name":"RealSkeptic"},"score":3,"creation_date":1679398757,"post_id":75800683,"comment_id":133711097,"body_markdown":"Why are you using `java.util.Date`? It has been obsolete for 10 years or so now. Of course it doesn&#39;t have the correct resolution.","body":"Why are you using <code>java.util.Date</code>? It has been obsolete for 10 years or so now. Of course it doesn&#39;t have the correct resolution."},{"owner":{"account_id":28075127,"reputation":13,"user_id":21447116,"display_name":"Rahul Sharma"},"score":0,"creation_date":1679417888,"post_id":75800683,"comment_id":133717267,"body_markdown":"Thanks @RealSkeptic for the response, yeah I know but it&#39;s in the legacy code. I&#39;ll will discuss this with my team.","body":"Thanks @RealSkeptic for the response, yeah I know but it&#39;s in the legacy code. I&#39;ll will discuss this with my team."}],"answers":[{"tags":[],"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1679399639,"creation_date":1679399312,"answer_id":75800787,"question_id":75800683,"body_markdown":"The documentation for [`Date`][1] says (emphasis mine):\r\n\r\n&gt; The class `Date` represents a specific instant in time, with ***millisecond*** precision.\r\n\r\nwhereas the documentation for [`ZonedDateTime`][2] says:\r\n\r\n&gt; `ZonedDateTime` is an immutable representation of a date-time with a time-zone. This class stores all date and time fields, to a precision of ***nanoseconds***, and a time-zone, with a zone offset used to handle ambiguous local date-times.\r\n\r\nTherefore, converting a `Date` to `ZonedDateTime` and then back is kind of like converting a `double` to `float` and then back - you&#39;d sometimes not get the original value back, because information was lost when converting to `float`/`Date`.\r\n\r\n```\r\ndouble x = 1.234567891234;\r\nSystem.out.println(x); // 1.234567891234\r\nSystem.out.println((float)x); // 1.2345679\r\nSystem.out.println((double)(float)x); // 1.2345678806304932\r\n```\r\n\r\nOf course, sometimes you do get the original value back, like with the `double` value `1`, which can be represented exactly with `float`. Or, in this case, with `ZonedDateTime`s that land exactly on the millisecond. Though, if your system clock has a higher resolution than milliseconds, the chance of getting that from `now` is pretty low.\r\n\r\nAnyway, if you can, try not using `Date` at all.\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/util/Date.html\r\n  [2]: https://docs.oracle.com/en/java/javase/17/docs/api//java.base/java/time/ZonedDateTime.html","title":"Not able to get correct Nano Second after convert Date to ZoneDateTime in JDK 11","body":"<p>The documentation for <a href=\"https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/util/Date.html\" rel=\"nofollow noreferrer\"><code>Date</code></a> says (emphasis mine):</p>\n<blockquote>\n<p>The class <code>Date</code> represents a specific instant in time, with <em><strong>millisecond</strong></em> precision.</p>\n</blockquote>\n<p>whereas the documentation for <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api//java.base/java/time/ZonedDateTime.html\" rel=\"nofollow noreferrer\"><code>ZonedDateTime</code></a> says:</p>\n<blockquote>\n<p><code>ZonedDateTime</code> is an immutable representation of a date-time with a time-zone. This class stores all date and time fields, to a precision of <em><strong>nanoseconds</strong></em>, and a time-zone, with a zone offset used to handle ambiguous local date-times.</p>\n</blockquote>\n<p>Therefore, converting a <code>Date</code> to <code>ZonedDateTime</code> and then back is kind of like converting a <code>double</code> to <code>float</code> and then back - you'd sometimes not get the original value back, because information was lost when converting to <code>float</code>/<code>Date</code>.</p>\n<pre><code>double x = 1.234567891234;\nSystem.out.println(x); // 1.234567891234\nSystem.out.println((float)x); // 1.2345679\nSystem.out.println((double)(float)x); // 1.2345678806304932\n</code></pre>\n<p>Of course, sometimes you do get the original value back, like with the <code>double</code> value <code>1</code>, which can be represented exactly with <code>float</code>. Or, in this case, with <code>ZonedDateTime</code>s that land exactly on the millisecond. Though, if your system clock has a higher resolution than milliseconds, the chance of getting that from <code>now</code> is pretty low.</p>\n<p>Anyway, if you can, try not using <code>Date</code> at all.</p>\n"}],"owner":{"account_id":28075127,"reputation":13,"user_id":21447116,"display_name":"Rahul Sharma"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":242,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75800787,"answer_count":1,"score":1,"last_activity_date":1679399693,"creation_date":1679398633,"question_id":75800683,"body_markdown":"Here is the Code snippet \r\n\r\nDate is from `java.util.Date`\r\n\r\n    ZonedDateTime zonedDateTime = \r\n            ZonedDateTime.now(ZoneOffset.UTC);\r\n    System.out.println(&quot;ZonedDateTime before converting from Date, &quot;\r\n                       + &quot;ZonedDateTime Nano is :&quot;+ zonedDateTime.getNano());\r\n    Date zonedDateTimeToDate = \r\n            Date.from(zonedDateTime.toInstant());\r\n    System.out.println(&quot;Date which is converting from zonedDateTime:&quot;\r\n                       + zonedDateTimeToDate.toString());\r\n    ZonedDateTime afterConversionFromDateToZonedDateTime =\r\n            ZonedDateTime.ofInstant(zonedDateTimeToDate.toInstant(),\r\n                                    ZoneOffset.UTC);\r\n    System.out.println(&quot;ZonedDateTime after converting from Date, &quot;\r\n                       + &quot; ZonedDateTime Nano is :&quot;\r\n                       + afterConversionFromDateToZonedDateTime.getNano());\r\n\r\nHere is the result of above code \r\n\r\n    ZonedDateTime before converting from Date, ZonedDateTime Nano is : 221953000\r\n    Date which is converting from zonedDateTime:Tue Mar 21 16:00:31 IST 2023\r\n    ZonedDateTime after converting from Date, ZonedDateTime Nano is :221000000\r\n\r\nyou can clearly observe from above output the Nanosecond last 6 digit is different.\r\n\r\nIs anyone got this kind of issue.\r\nAny help is much appreciated. ","title":"Not able to get correct Nano Second after convert Date to ZoneDateTime in JDK 11","body":"<p>Here is the Code snippet</p>\n<p>Date is from <code>java.util.Date</code></p>\n<pre><code>ZonedDateTime zonedDateTime = \n        ZonedDateTime.now(ZoneOffset.UTC);\nSystem.out.println(&quot;ZonedDateTime before converting from Date, &quot;\n                   + &quot;ZonedDateTime Nano is :&quot;+ zonedDateTime.getNano());\nDate zonedDateTimeToDate = \n        Date.from(zonedDateTime.toInstant());\nSystem.out.println(&quot;Date which is converting from zonedDateTime:&quot;\n                   + zonedDateTimeToDate.toString());\nZonedDateTime afterConversionFromDateToZonedDateTime =\n        ZonedDateTime.ofInstant(zonedDateTimeToDate.toInstant(),\n                                ZoneOffset.UTC);\nSystem.out.println(&quot;ZonedDateTime after converting from Date, &quot;\n                   + &quot; ZonedDateTime Nano is :&quot;\n                   + afterConversionFromDateToZonedDateTime.getNano());\n</code></pre>\n<p>Here is the result of above code</p>\n<pre><code>ZonedDateTime before converting from Date, ZonedDateTime Nano is : 221953000\nDate which is converting from zonedDateTime:Tue Mar 21 16:00:31 IST 2023\nZonedDateTime after converting from Date, ZonedDateTime Nano is :221000000\n</code></pre>\n<p>you can clearly observe from above output the Nanosecond last 6 digit is different.</p>\n<p>Is anyone got this kind of issue.\nAny help is much appreciated.</p>\n"},{"tags":["java","json","jackson"],"comments":[{"owner":{"account_id":407825,"reputation":22412,"user_id":778118,"accept_rate":67,"display_name":"jahroy"},"score":0,"creation_date":1377234511,"post_id":18394819,"comment_id":27016649,"body_markdown":"[This](http://www.cowtowncoder.com/blog/archives/2010/03/entry_372.html) seems related...","body":"<a href=\"http://www.cowtowncoder.com/blog/archives/2010/03/entry_372.html\" rel=\"nofollow noreferrer\">This</a> seems related..."},{"owner":{"account_id":222417,"reputation":524,"user_id":480991,"accept_rate":71,"display_name":"Yahya Cahyadi"},"score":0,"creation_date":1377710021,"post_id":18394819,"comment_id":27189225,"body_markdown":"I&#39;m marking StaxMan&#39;s answer as the accepted answer, but it is actually the idea he discussed in his follow-up that I&#39;m planning to implement. For now I have no plan to file an RFE to jackson-databind issue tracker.","body":"I&#39;m marking StaxMan&#39;s answer as the accepted answer, but it is actually the idea he discussed in his follow-up that I&#39;m planning to implement. For now I have no plan to file an RFE to jackson-databind issue tracker."}],"answers":[{"tags":[],"owner":{"account_id":23674,"reputation":114076,"user_id":59501,"accept_rate":75,"display_name":"StaxMan"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1377290041,"creation_date":1377290041,"answer_id":18411380,"question_id":18394819,"body_markdown":"Perhaps not by using annotations. Problems comes from the fact that such mapping would not work for serialization, and existing mapping does expect one-to-one (bijection) relationship.\r\nBut you may want to file an RFE at [jackson-databind issue tracker][1]; adding support may be possible.\r\n\r\n  [1]: https://github.com/FasterXML/jackson-databind/issues","title":"Jackson polymorphism: How to map multiple subtypes to the same class","body":"<p>Perhaps not by using annotations. Problems comes from the fact that such mapping would not work for serialization, and existing mapping does expect one-to-one (bijection) relationship.\nBut you may want to file an RFE at <a href=\"https://github.com/FasterXML/jackson-databind/issues\" rel=\"nofollow\">jackson-databind issue tracker</a>; adding support may be possible.</p>\n"},{"tags":[],"owner":{"account_id":208388,"reputation":2138,"user_id":458831,"accept_rate":50,"display_name":"hkasera"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1454666234,"creation_date":1454666234,"answer_id":35221104,"question_id":18394819,"body_markdown":"I also faced the same issue and found out that the Subtype mapping expects unique classes.\r\n\r\nWhat I did was to create two classes that extend the same base class. The extended classes are empty as they have the same properties as base class. Then added them to the Subtype map.\r\nFor example, in your case, it will be -\r\n\r\n    @JsonTypeInfo(use = Id.NAME, include = As.PROPERTY, property = &quot;type&quot;)\r\n    @JsonSubTypes({@JsonSubTypes.Type(value = Mammal.class, name = &quot;Dog&quot;),\r\n                @JsonSubTypes.Type(value = Mammal.class, name = &quot;Cat&quot;),\r\n                @JsonSubTypes.Type(value = BirdDodo.class, name = &quot;Dodo&quot;},\r\n                @JsonSubTypes.Type(value = BirdCockatoo.class, name = &quot;Cockatoo&quot;})\r\n    public class Animal {\r\n\r\n    }\r\n\r\n    public class BirdCockatoo extends Cockatoo{}\r\n    public class BirdDodo extends Dodo{}\r\n\r\nI understand it is the not the best approach but until the issue is not resolved, it could be the best way to fix this. I followed this approach for now.\r\n\r\nHope it helps you!","title":"Jackson polymorphism: How to map multiple subtypes to the same class","body":"<p>I also faced the same issue and found out that the Subtype mapping expects unique classes.</p>\n\n<p>What I did was to create two classes that extend the same base class. The extended classes are empty as they have the same properties as base class. Then added them to the Subtype map.\nFor example, in your case, it will be -</p>\n\n<pre><code>@JsonTypeInfo(use = Id.NAME, include = As.PROPERTY, property = \"type\")\n@JsonSubTypes({@JsonSubTypes.Type(value = Mammal.class, name = \"Dog\"),\n            @JsonSubTypes.Type(value = Mammal.class, name = \"Cat\"),\n            @JsonSubTypes.Type(value = BirdDodo.class, name = \"Dodo\"},\n            @JsonSubTypes.Type(value = BirdCockatoo.class, name = \"Cockatoo\"})\npublic class Animal {\n\n}\n\npublic class BirdCockatoo extends Cockatoo{}\npublic class BirdDodo extends Dodo{}\n</code></pre>\n\n<p>I understand it is the not the best approach but until the issue is not resolved, it could be the best way to fix this. I followed this approach for now.</p>\n\n<p>Hope it helps you!</p>\n"},{"tags":[],"owner":{"account_id":781889,"reputation":1598,"user_id":843704,"accept_rate":73,"display_name":"erkfel"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1462168092,"creation_date":1461804544,"answer_id":36903348,"question_id":18394819,"body_markdown":"The bug has been resolved in the version _2.6.0_, so you just have to update Jackson to version _2.6.0_ or later. The additional information is [here][1] and [here][2].\r\n\r\n\r\n  [1]: https://github.com/FasterXML/jackson/wiki/Jackson-Release-2.6\r\n  [2]: https://github.com/FasterXML/jackson-databind/issues/312","title":"Jackson polymorphism: How to map multiple subtypes to the same class","body":"<p>The bug has been resolved in the version <em>2.6.0</em>, so you just have to update Jackson to version <em>2.6.0</em> or later. The additional information is <a href=\"https://github.com/FasterXML/jackson/wiki/Jackson-Release-2.6\" rel=\"noreferrer\">here</a> and <a href=\"https://github.com/FasterXML/jackson-databind/issues/312\" rel=\"noreferrer\">here</a>.</p>\n"},{"tags":[],"owner":{"account_id":49078,"reputation":44646,"user_id":145989,"accept_rate":59,"display_name":"Ondra Žižka"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1611795935,"creation_date":1611795611,"answer_id":65929597,"question_id":18394819,"body_markdown":"You may introduce a middle-level abstract classes.\r\n\r\nYou may also avoid listing the whole list of subtypes and use `@JsonTypeName`.  \r\nThis solution is IMHO more ellegant, because\r\n  * the definitions are right next to the actual subtype,\r\n  * long list of subtypes makes the code less maintainable,\r\n  * you can &quot;plug-in&quot; classes on other places.\r\n\r\n## Howto\r\n\r\nBy default, Jackson does not traverse the type tree to find about nested subtypes. It would fail with:\r\n\r\n&gt; Could not resolve type id &#39;Dodo&#39; as a subtype of   \r\n`ch.zizka.test.Animal`: known type ids = [com.zizka.test.Bird, ... Mammal] ...  \r\n at [Source: (byte[])&quot;{\r\n\r\nYou need to add `@JsonSubTypes` to the middle-level classes (`Bird`, `Mammal`).\r\n\r\n## The result\r\n\r\n* `Animal` with `@JsonTypeInfo(use=NAME)`\r\n  * `Mammal` with `@JsonSubTypes(@Type(Dog.class, Cat.class))`\r\n    * `Dog` with `@JsonTypeName(&quot;Dog&quot;)`\r\n    * `Cat` with `@JsonTypeName(&quot;Cat&quot;)`\r\n  * `Bird` with `@JsonSubTypes(@Type(Dodo.class, Cockatoo.class))`\r\n    * `Dodo` with `@JsonTypeName(&quot;Dodo&quot;)`\r\n    * `Cockatoo` with `@JsonTypeName(&quot;Cockatoo&quot;)`\r\n\r\nJust tested - #WORKSFORME. (Jackson 2.10.5)","title":"Jackson polymorphism: How to map multiple subtypes to the same class","body":"<p>You may introduce a middle-level abstract classes.</p>\n<p>You may also avoid listing the whole list of subtypes and use <code>@JsonTypeName</code>.<br />\nThis solution is IMHO more ellegant, because</p>\n<ul>\n<li>the definitions are right next to the actual subtype,</li>\n<li>long list of subtypes makes the code less maintainable,</li>\n<li>you can &quot;plug-in&quot; classes on other places.</li>\n</ul>\n<h2>Howto</h2>\n<p>By default, Jackson does not traverse the type tree to find about nested subtypes. It would fail with:</p>\n<blockquote>\n<p>Could not resolve type id 'Dodo' as a subtype of<br />\n<code>ch.zizka.test.Animal</code>: known type ids = [com.zizka.test.Bird, ... Mammal] ...<br />\nat [Source: (byte[])&quot;{</p>\n</blockquote>\n<p>You need to add <code>@JsonSubTypes</code> to the middle-level classes (<code>Bird</code>, <code>Mammal</code>).</p>\n<h2>The result</h2>\n<ul>\n<li><code>Animal</code> with <code>@JsonTypeInfo(use=NAME)</code>\n<ul>\n<li><code>Mammal</code> with <code>@JsonSubTypes(@Type(Dog.class, Cat.class))</code>\n<ul>\n<li><code>Dog</code> with <code>@JsonTypeName(&quot;Dog&quot;)</code></li>\n<li><code>Cat</code> with <code>@JsonTypeName(&quot;Cat&quot;)</code></li>\n</ul>\n</li>\n<li><code>Bird</code> with <code>@JsonSubTypes(@Type(Dodo.class, Cockatoo.class))</code>\n<ul>\n<li><code>Dodo</code> with <code>@JsonTypeName(&quot;Dodo&quot;)</code></li>\n<li><code>Cockatoo</code> with <code>@JsonTypeName(&quot;Cockatoo&quot;)</code></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<p>Just tested - #WORKSFORME. (Jackson 2.10.5)</p>\n"},{"tags":[],"owner":{"account_id":466746,"reputation":1099,"user_id":4786167,"display_name":"Ayhan APAYDIN"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679399206,"creation_date":1679399206,"answer_id":75800775,"question_id":18394819,"body_markdown":"As of Jackson 2.12 there is a separate field in `@JsonSubTypes.Type` annotation. \r\n\r\n    /**\r\n     * (optional) Logical type names used as the type identifier for the class: used if\r\n     * more than one type name should be associated with the same type.\r\n     *\r\n     * @since 2.12\r\n     */\r\n    public String[] names() default {};\r\n\r\nCheck the example code below.\r\n\r\n    @JsonTypeInfo(use = Id.NAME, include = As.PROPERTY, property = &quot;type&quot;)\r\n    @JsonSubTypes({@JsonSubTypes.Type(value = Mammal.class, names = {&quot;Dog&quot;, &quot;Cat&quot;}),\r\n                    @JsonSubTypes.Type(value = Bird.class, names = {&quot;Dodo&quot;, &quot;Cockatoo&quot;}},\r\n                    \r\n    public class Animal {\r\n    \r\n    }","title":"Jackson polymorphism: How to map multiple subtypes to the same class","body":"<p>As of Jackson 2.12 there is a separate field in <code>@JsonSubTypes.Type</code> annotation.</p>\n<pre><code>/**\n * (optional) Logical type names used as the type identifier for the class: used if\n * more than one type name should be associated with the same type.\n *\n * @since 2.12\n */\npublic String[] names() default {};\n</code></pre>\n<p>Check the example code below.</p>\n<pre><code>@JsonTypeInfo(use = Id.NAME, include = As.PROPERTY, property = &quot;type&quot;)\n@JsonSubTypes({@JsonSubTypes.Type(value = Mammal.class, names = {&quot;Dog&quot;, &quot;Cat&quot;}),\n                @JsonSubTypes.Type(value = Bird.class, names = {&quot;Dodo&quot;, &quot;Cockatoo&quot;}},\n                \npublic class Animal {\n\n}\n</code></pre>\n"}],"owner":{"account_id":222417,"reputation":524,"user_id":480991,"accept_rate":71,"display_name":"Yahya Cahyadi"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":20581,"favorite_count":0,"down_vote_count":1,"up_vote_count":16,"accepted_answer_id":18411380,"answer_count":5,"score":15,"last_activity_date":1679399206,"creation_date":1377232808,"question_id":18394819,"body_markdown":"I&#39;m using Jackson 1.9.x.\r\nSticking with the Animals example, Here&#39;s what I&#39;d like to do:\r\n\r\nLet&#39;s say I have an Animal class:\r\n\r\n    public class Animal {\r\n    \tprivate String type;\r\n    \t// accessors\r\n    }\r\n    \r\n    public class Mammal extends Animal {\r\n    \tprivate String diet;\r\n    \t// accessors\r\n    }\r\n    \r\n    public class Bird extends Animal {\r\n    \tprivate boolean tropical;\r\n    \t// accessors\r\n    }\r\n\r\nI would like to be able to do something like this (where I map a few subtypes to one class, and a few more to a different class):\r\n\r\n    @JsonTypeInfo(use = Id.NAME, include = As.PROPERTY, property = &quot;type&quot;)\r\n    @JsonSubTypes({@JsonSubTypes.Type(value = Mammal.class, name = &quot;Dog&quot;),\r\n    \t\t\t\t@JsonSubTypes.Type(value = Mammal.class, name = &quot;Cat&quot;),\r\n    \t\t\t\t@JsonSubTypes.Type(value = Bird.class, name = &quot;Dodo&quot;},\r\n    \t\t\t\t@JsonSubTypes.Type(value = Bird.class, name = &quot;Cockatoo&quot;})\r\n    public class Animal {\r\n    \r\n    }\r\n\r\nWhat I&#39;m seeing right now is that Jackson will only recognize the Dog-to-Mammal and the Dodo-to-Bird mapping. This is because StdSubtypeResolver._collectAndResolve() only allows the same class to get registered once (due to the implementation of NamedType.equals()).\r\n\r\nIs there a workaround to the issue I&#39;m seeing? ","title":"Jackson polymorphism: How to map multiple subtypes to the same class","body":"<p>I'm using Jackson 1.9.x.\nSticking with the Animals example, Here's what I'd like to do:</p>\n\n<p>Let's say I have an Animal class:</p>\n\n<pre><code>public class Animal {\n    private String type;\n    // accessors\n}\n\npublic class Mammal extends Animal {\n    private String diet;\n    // accessors\n}\n\npublic class Bird extends Animal {\n    private boolean tropical;\n    // accessors\n}\n</code></pre>\n\n<p>I would like to be able to do something like this (where I map a few subtypes to one class, and a few more to a different class):</p>\n\n<pre><code>@JsonTypeInfo(use = Id.NAME, include = As.PROPERTY, property = \"type\")\n@JsonSubTypes({@JsonSubTypes.Type(value = Mammal.class, name = \"Dog\"),\n                @JsonSubTypes.Type(value = Mammal.class, name = \"Cat\"),\n                @JsonSubTypes.Type(value = Bird.class, name = \"Dodo\"},\n                @JsonSubTypes.Type(value = Bird.class, name = \"Cockatoo\"})\npublic class Animal {\n\n}\n</code></pre>\n\n<p>What I'm seeing right now is that Jackson will only recognize the Dog-to-Mammal and the Dodo-to-Bird mapping. This is because StdSubtypeResolver._collectAndResolve() only allows the same class to get registered once (due to the implementation of NamedType.equals()).</p>\n\n<p>Is there a workaround to the issue I'm seeing? </p>\n"},{"tags":["java","spring","docker","maven"],"comments":[{"owner":{"account_id":2139538,"reputation":42501,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"score":0,"creation_date":1653400513,"post_id":72364129,"comment_id":127839836,"body_markdown":"It&#39;s supposed to do that anyway. [&quot;*resolves all project dependencies, ... **and their dependencies***&quot;](https://maven.apache.org/plugins/maven-dependency-plugin/go-offline-mojo.html)","body":"It&#39;s supposed to do that anyway. <a href=\"https://maven.apache.org/plugins/maven-dependency-plugin/go-offline-mojo.html\" rel=\"nofollow noreferrer\">&quot;<i>resolves all project dependencies, ... <b>and their dependencies</i></b>&quot;</a>"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1653400838,"post_id":72364129,"comment_id":127839985,"body_markdown":"use `./mvnw dependency:resolve-plugins dependency:go-offline` which should include all plugins needed.","body":"use <code>.&#47;mvnw dependency:resolve-plugins dependency:go-offline</code> which should include all plugins needed."},{"owner":{"account_id":25376501,"reputation":31,"user_id":19189560,"display_name":"wellini"},"score":0,"creation_date":1653401809,"post_id":72364129,"comment_id":127840465,"body_markdown":"@M.Deinum It downloaded a lot more stuff but still the same missing dependencies","body":"@M.Deinum It downloaded a lot more stuff but still the same missing dependencies"},{"owner":{"account_id":2139538,"reputation":42501,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"score":0,"creation_date":1653402325,"post_id":72364129,"comment_id":127840677,"body_markdown":"@M.Deinum go-offline already does that. &quot;resolves all project dependencies, **including plugins**&quot;","body":"@M.Deinum go-offline already does that. &quot;resolves all project dependencies, <b>including plugins</b>&quot;"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1653402379,"post_id":72364129,"comment_id":127840698,"body_markdown":"No it doesn&#39;t and is an known issue.","body":"No it doesn&#39;t and is an known issue."},{"owner":{"account_id":2139538,"reputation":42501,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"score":0,"creation_date":1653402423,"post_id":72364129,"comment_id":127840727,"body_markdown":"@M.Deinum Well the documentation says it does.","body":"@M.Deinum Well the documentation says it does."},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1653402568,"post_id":72364129,"comment_id":127840794,"body_markdown":"Which is why it is an issue... Also you shouldn&#39;t use `./mvnw install -o` but rather something like `./mvw verify -o` as you don&#39;t want to install the dependency in your local repository (that doesn&#39;t really make sense).","body":"Which is why it is an issue... Also you shouldn&#39;t use <code>.&#47;mvnw install -o</code> but rather something like <code>.&#47;mvw verify -o</code> as you don&#39;t want to install the dependency in your local repository (that doesn&#39;t really make sense)."},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1653402742,"post_id":72364129,"comment_id":127840860,"body_markdown":"Another thing is could you add your `pom.xml` and full `Dockerfile` as  your results might vary depending on the version of Maven and the dependency plugin being used.","body":"Another thing is could you add your <code>pom.xml</code> and full <code>Dockerfile</code> as  your results might vary depending on the version of Maven and the dependency plugin being used."},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":2,"creation_date":1653402966,"post_id":72364129,"comment_id":127840962,"body_markdown":"For a more in depth analysis of what works or not see [this issue](https://issues.apache.org/jira/browse/MDEP-82).","body":"For a more in depth analysis of what works or not see <a href=\"https://issues.apache.org/jira/browse/MDEP-82\" rel=\"nofollow noreferrer\">this issue</a>."}],"answers":[{"tags":[],"owner":{"account_id":26441162,"reputation":598,"user_id":20085654,"display_name":"igops"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672062836,"creation_date":1672062836,"answer_id":74920979,"question_id":72364129,"body_markdown":"I faced the same issue. For some reason, `dependency:go-offline` doesn&#39;t add pom files to the local repository.\r\n\r\nInstead, use `mvn verify` followed by `mvn package`:\r\n\r\n```Dockerfile\r\n// copy pom.xml\r\nRUN ./mvnw verify --fail-never\r\n\r\n// copy source code\r\nRUN ./mvnw package -DskipTests -o\r\n```\r\n\r\nCheck out a similar topic [here](https://stackoverflow.com/a/45975194/20085654).","title":"Maven dependecy:go-offline doesn&#39;t download transitive dependencies","body":"<p>I faced the same issue. For some reason, <code>dependency:go-offline</code> doesn't add pom files to the local repository.</p>\n<p>Instead, use <code>mvn verify</code> followed by <code>mvn package</code>:</p>\n<pre><code>// copy pom.xml\nRUN ./mvnw verify --fail-never\n\n// copy source code\nRUN ./mvnw package -DskipTests -o\n</code></pre>\n<p>Check out a similar topic <a href=\"https://stackoverflow.com/a/45975194/20085654\">here</a>.</p>\n"},{"tags":[],"owner":{"account_id":97926,"reputation":823,"user_id":265374,"accept_rate":75,"display_name":"reddot"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679399114,"creation_date":1679399114,"answer_id":75800761,"question_id":72364129,"body_markdown":"According to the comments on [issue discussion][1] there were some improvements related to dependency resolution and fetching in newer versions of `maven-dependency-plugin` (starting with 3.0.0). However by default maven uses version 2.8 of dependency plugin. So in order to use recent versions specify version explicitly:\r\n\r\n```\r\n// copy pom.xml\r\n\r\nRUN ./mvnw org.apache.maven.plugins:maven-dependency-plugin:3.5.0:go-offline\r\n\r\n// copy source code\r\n\r\nRUN ./mvnw install -o\r\n```\r\n\r\n\r\n  [1]: https://issues.apache.org/jira/browse/MDEP-82","title":"Maven dependecy:go-offline doesn&#39;t download transitive dependencies","body":"<p>According to the comments on <a href=\"https://issues.apache.org/jira/browse/MDEP-82\" rel=\"nofollow noreferrer\">issue discussion</a> there were some improvements related to dependency resolution and fetching in newer versions of <code>maven-dependency-plugin</code> (starting with 3.0.0). However by default maven uses version 2.8 of dependency plugin. So in order to use recent versions specify version explicitly:</p>\n<pre><code>// copy pom.xml\n\nRUN ./mvnw org.apache.maven.plugins:maven-dependency-plugin:3.5.0:go-offline\n\n// copy source code\n\nRUN ./mvnw install -o\n</code></pre>\n"}],"owner":{"account_id":25376501,"reputation":31,"user_id":19189560,"display_name":"wellini"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1629,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":2,"score":3,"last_activity_date":1679399114,"creation_date":1653400188,"question_id":72364129,"body_markdown":"**I want** to add a separate dependency layer to my dockerfile.\r\n\r\n**I&#39;m running** `mvn dependencies:go-offline` but after that `mvn install -o` reports that not all deps are found. After inspecting the error message it turned out that no transitive dependencies were downloading. The issue was fixed by explicitly defining all missing packages in `pom.xml`, but obviously it&#39;s not ideal.\r\n\r\nThis is my dockerfile\r\n```\r\n// copy pom.xml\r\n\r\nRUN ./mvnw dependency:go-offline\r\n\r\n// copy source code\r\n\r\nRUN ./mvnw install -o\r\n```\r\n\r\nIs there an alternative to `dependency:go-offline`, or a flag for that command, that will **download all dependencies** needed to run `install -o`, not just direct ones?\r\n\r\n**UPD:**\r\nThis are the missing dependencies\r\n```\r\n[WARNING] The POM for javax.xml.bind:jaxb-api:jar:2.3.1 is missing, no dependency information available\r\n[WARNING] The POM for net.bytebuddy:byte-buddy:jar:1.11.22 is missing, no dependency information available\r\n[WARNING] The POM for org.glassfish.jaxb:jaxb-runtime:jar:2.3.6 is missing, no dependency information available\r\n[WARNING] The POM for org.hamcrest:hamcrest-core:jar:2.2 is missing, no dependency information available\r\n[WARNING] The POM for org.webjars:webjars-locator-core:jar:0.48 is missing, no dependency information available\r\n[WARNING] The POM for org.apache.httpcomponents:httpcore:jar:4.4.15 is missing, no dependency information available\r\n[WARNING] The POM for commons-codec:commons-codec:jar:1.15 is missing, no dependency information available\r\n```","title":"Maven dependecy:go-offline doesn&#39;t download transitive dependencies","body":"<p><strong>I want</strong> to add a separate dependency layer to my dockerfile.</p>\n<p><strong>I'm running</strong> <code>mvn dependencies:go-offline</code> but after that <code>mvn install -o</code> reports that not all deps are found. After inspecting the error message it turned out that no transitive dependencies were downloading. The issue was fixed by explicitly defining all missing packages in <code>pom.xml</code>, but obviously it's not ideal.</p>\n<p>This is my dockerfile</p>\n<pre><code>// copy pom.xml\n\nRUN ./mvnw dependency:go-offline\n\n// copy source code\n\nRUN ./mvnw install -o\n</code></pre>\n<p>Is there an alternative to <code>dependency:go-offline</code>, or a flag for that command, that will <strong>download all dependencies</strong> needed to run <code>install -o</code>, not just direct ones?</p>\n<p><strong>UPD:</strong>\nThis are the missing dependencies</p>\n<pre><code>[WARNING] The POM for javax.xml.bind:jaxb-api:jar:2.3.1 is missing, no dependency information available\n[WARNING] The POM for net.bytebuddy:byte-buddy:jar:1.11.22 is missing, no dependency information available\n[WARNING] The POM for org.glassfish.jaxb:jaxb-runtime:jar:2.3.6 is missing, no dependency information available\n[WARNING] The POM for org.hamcrest:hamcrest-core:jar:2.2 is missing, no dependency information available\n[WARNING] The POM for org.webjars:webjars-locator-core:jar:0.48 is missing, no dependency information available\n[WARNING] The POM for org.apache.httpcomponents:httpcore:jar:4.4.15 is missing, no dependency information available\n[WARNING] The POM for commons-codec:commons-codec:jar:1.15 is missing, no dependency information available\n</code></pre>\n"},{"tags":["java","enums","constants"],"comments":[{"owner":{"account_id":261048,"reputation":25820,"user_id":544983,"accept_rate":67,"display_name":"Juvanis"},"score":2,"creation_date":1399897290,"post_id":23608885,"comment_id":36242111,"body_markdown":"why would you have so many enums with the same value? this seems totally against the idiom of enums!","body":"why would you have so many enums with the same value? this seems totally against the idiom of enums!"},{"owner":{"account_id":1861835,"reputation":4286,"user_id":1686291,"accept_rate":73,"display_name":"Not a bug"},"score":1,"creation_date":1399897434,"post_id":23608885,"comment_id":36242212,"body_markdown":"Error text is answer for your problem !!","body":"Error text is answer for your problem !!"},{"owner":{"account_id":82278,"reputation":3904,"user_id":231464,"accept_rate":81,"display_name":"jilt3d"},"score":3,"creation_date":1399899902,"post_id":23608885,"comment_id":36244000,"body_markdown":"@Juvanis: notice that each enum instance has it own unique name so I don&#39;t consider it as a violation against the idioms of enums. In my case, instances of MyEnum acts as keys to a map which keys I want also to output to external target. These output values happens to be same in some cases according to the specification.","body":"@Juvanis: notice that each enum instance has it own unique name so I don&#39;t consider it as a violation against the idioms of enums. In my case, instances of MyEnum acts as keys to a map which keys I want also to output to external target. These output values happens to be same in some cases according to the specification."},{"owner":{"account_id":82278,"reputation":3904,"user_id":231464,"accept_rate":81,"display_name":"jilt3d"},"score":2,"creation_date":1399899964,"post_id":23608885,"comment_id":36244050,"body_markdown":"@KishanSarsechaGajjar: Nope, the answer is not there. I tried to put the constant declaration in first place, and I&#39;ve got an another compilation error.","body":"@KishanSarsechaGajjar: Nope, the answer is not there. I tried to put the constant declaration in first place, and I&#39;ve got an another compilation error."},{"owner":{"account_id":6457316,"reputation":440,"user_id":5002267,"display_name":"Asterios Raptis"},"score":0,"creation_date":1569939422,"post_id":23608885,"comment_id":102753162,"body_markdown":"this works public enum MyEnum {\n    BAR1(MyEnum.BAR_VALUE),\n    FOO(&quot;Foo&quot;),\n    BAR2(MyEnum.BAR_VALUE),\n    BARn(MyEnum.BAR_VALUE);\n\n    private static final String BAR_VALUE = &quot;Bar&quot;;\n\n    private final String value;\n    MyEnum(final String value){\n        this.value =value;\n    }\n}","body":"this works public enum MyEnum {     BAR1(MyEnum.BAR_VALUE),     FOO(&quot;Foo&quot;),     BAR2(MyEnum.BAR_VALUE),     BARn(MyEnum.BAR_VALUE);      private static final String BAR_VALUE = &quot;Bar&quot;;      private final String value;     MyEnum(final String value){         this.value =value;     } }"},{"owner":{"account_id":5199669,"reputation":808,"user_id":4159559,"display_name":"Roland"},"score":0,"creation_date":1671812850,"post_id":23608885,"comment_id":132182490,"body_markdown":"@jilt3d Interesting question, and the answers bellow are good, but why would you need to define these strings as constants? \nI don&#39;t see any benefit over using literals. Enums are unique instances so those strings are stored only once. There is no memory optimisation using static.","body":"@jilt3d Interesting question, and the answers bellow are good, but why would you need to define these strings as constants?  I don&#39;t see any benefit over using literals. Enums are unique instances so those strings are stored only once. There is no memory optimisation using static."},{"owner":{"account_id":1352612,"reputation":4119,"user_id":1357094,"accept_rate":85,"display_name":"cellepo"},"score":0,"creation_date":1694130380,"post_id":23608885,"comment_id":135854512,"body_markdown":"@Roland among possibly other reasons, [could be](https://stackoverflow.com/questions/23608885/how-to-define-static-constants-in-a-java-enum#comment87383433_23609178) that there are Annotations that need to make static/constant references (by nature of Annotations in general).","body":"@Roland among possibly other reasons, <a href=\"https://stackoverflow.com/questions/23608885/how-to-define-static-constants-in-a-java-enum#comment87383433_23609178\">could be</a> that there are Annotations that need to make static/constant references (by nature of Annotations in general)."}],"answers":[{"tags":[],"owner":{"account_id":1259191,"reputation":5458,"user_id":1217989,"accept_rate":74,"display_name":"Luan Nico"},"down_vote_count":7,"up_vote_count":0,"is_accepted":false,"score":-7,"last_activity_date":1399897453,"creation_date":1399897453,"answer_id":23608971,"question_id":23608885,"body_markdown":"Maybe you should considering breaking this enum into two fields: an enum and an int:\r\n\r\n    @RequiredArgsConstructor\r\n    public enum MyEnum {\r\n        BAR(&quot;Bar&quot;),\r\n        FOO(&quot;Foo&quot;)\r\n\r\n        @Getter\r\n        private final String value;\r\n    }\r\n\r\nAnd then use:\r\n\r\n    private MyEnum type;\r\n    private int value;\r\n\r\n(You can put that into a class or not, whether it makes sense to you)","title":"How to define static constants in a Java enum?","body":"<p>Maybe you should considering breaking this enum into two fields: an enum and an int:</p>\n\n<pre><code>@RequiredArgsConstructor\npublic enum MyEnum {\n    BAR(\"Bar\"),\n    FOO(\"Foo\")\n\n    @Getter\n    private final String value;\n}\n</code></pre>\n\n<p>And then use:</p>\n\n<pre><code>private MyEnum type;\nprivate int value;\n</code></pre>\n\n<p>(You can put that into a class or not, whether it makes sense to you)</p>\n"},{"tags":[],"owner":{"account_id":3327625,"reputation":11779,"user_id":2797275,"accept_rate":100,"display_name":"Maciej Dobrowolski"},"down_vote_count":1,"up_vote_count":111,"is_accepted":true,"score":110,"last_activity_date":1575114150,"creation_date":1399897986,"answer_id":23609178,"question_id":23608885,"body_markdown":"As IntelliJ IDEA suggest when extracting constant - make static nested class. This approach works:\r\n \r\n    @RequiredArgsConstructor\r\n    public enum MyEnum {\r\n        BAR1(Constants.BAR_VALUE),\r\n        FOO(&quot;Foo&quot;),\r\n        BAR2(Constants.BAR_VALUE),\r\n        ...,\r\n        BARn(Constants.BAR_VALUE);\r\n\r\n\r\n\r\n        @Getter\r\n        private final String value;\r\n    \r\n        private static class Constants {\r\n            public static final String BAR_VALUE = &quot;BAR&quot;;\r\n        }\r\n    }","title":"How to define static constants in a Java enum?","body":"<p>As IntelliJ IDEA suggest when extracting constant - make static nested class. This approach works:</p>\n\n<pre><code>@RequiredArgsConstructor\npublic enum MyEnum {\n    BAR1(Constants.BAR_VALUE),\n    FOO(\"Foo\"),\n    BAR2(Constants.BAR_VALUE),\n    ...,\n    BARn(Constants.BAR_VALUE);\n\n\n\n    @Getter\n    private final String value;\n\n    private static class Constants {\n        public static final String BAR_VALUE = \"BAR\";\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17205617,"reputation":397,"user_id":12456263,"display_name":"ThomasMorus"},"down_vote_count":3,"up_vote_count":40,"is_accepted":false,"score":37,"last_activity_date":1585266050,"creation_date":1575025854,"answer_id":59103694,"question_id":23608885,"body_markdown":"    public enum MyEnum {\r\n        BAR1(MyEnum.BAR_VALUE);\r\n    \r\n        public static final String BAR_VALUE = &quot;Bar&quot;;\r\n\r\nworks fine\r\n\r\n\r\n\r\n","title":"How to define static constants in a Java enum?","body":"<pre><code>public enum MyEnum {\n    BAR1(MyEnum.BAR_VALUE);\n\n    public static final String BAR_VALUE = \"Bar\";\n</code></pre>\n\n<p>works fine</p>\n"},{"tags":[],"owner":{"account_id":17210075,"reputation":71,"user_id":12459678,"display_name":"ThomasMorus"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1679398972,"creation_date":1575102975,"answer_id":59114543,"question_id":23608885,"body_markdown":"    class Scratch {\r\n        public static void main(String[] args) {\r\n            System.out.println(MyEnum.BAR3); // 10:BAR3\r\n        }\r\n    }\r\n    enum MyEnum {\r\n    //  BAR1(       foo),   // error: illegal forward reference\r\n    //  BAR2(MyEnum.foo2),  // error: illegal forward reference\r\n        BAR3(MyEnum.foo);   // no error\r\n    \r\n        int x;\r\n    \r\n        public static final int foo =10;\r\n        public static       int foo2=20;\r\n        MyEnum(int i) {x = i;}\r\n    \r\n        @Override public String toString() { return x+&quot;:&quot;+super.toString(); }\r\n    }\r\n\r\n\r\nThis can be done without an inner class for the constant. And field initialization works as expected (in case you don&#39;t know, it *is* possible to read static fields before they are initialized, you will read the default 0 or null, but it does not happen here).\r\n","title":"How to define static constants in a Java enum?","body":"<pre><code>class Scratch {\n    public static void main(String[] args) {\n        System.out.println(MyEnum.BAR3); // 10:BAR3\n    }\n}\nenum MyEnum {\n//  BAR1(       foo),   // error: illegal forward reference\n//  BAR2(MyEnum.foo2),  // error: illegal forward reference\n    BAR3(MyEnum.foo);   // no error\n\n    int x;\n\n    public static final int foo =10;\n    public static       int foo2=20;\n    MyEnum(int i) {x = i;}\n\n    @Override public String toString() { return x+&quot;:&quot;+super.toString(); }\n}\n</code></pre>\n<p>This can be done without an inner class for the constant. And field initialization works as expected (in case you don't know, it <em>is</em> possible to read static fields before they are initialized, you will read the default 0 or null, but it does not happen here).</p>\n"}],"owner":{"account_id":82278,"reputation":3904,"user_id":231464,"accept_rate":81,"display_name":"jilt3d"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":95194,"favorite_count":0,"down_vote_count":1,"up_vote_count":89,"accepted_answer_id":23609178,"answer_count":4,"score":88,"last_activity_date":1679398972,"creation_date":1399897209,"question_id":23608885,"body_markdown":"Is there any way to define static final variables (effectively constants) in a Java enum declaration?\r\n\r\nWhat I want is to define in one place the string literal value for the BAR(1...n) values:\r\n    \r\n    @RequiredArgsConstructor\r\n    public enum MyEnum {\r\n        BAR1(BAR_VALUE),\r\n        FOO(&quot;Foo&quot;),\r\n        BAR2(BAR_VALUE),\r\n        ...,\r\n        BARn(BAR_VALUE);\r\n\r\n        private static final String BAR_VALUE = &quot;Bar&quot;;\r\n\r\n        @Getter\r\n        private final String value;\r\n    }\r\n\r\nI got the following error message for the code above: **Cannot reference a field before it is defined**.","title":"How to define static constants in a Java enum?","body":"<p>Is there any way to define static final variables (effectively constants) in a Java enum declaration?</p>\n\n<p>What I want is to define in one place the string literal value for the BAR(1...n) values:</p>\n\n<pre><code>@RequiredArgsConstructor\npublic enum MyEnum {\n    BAR1(BAR_VALUE),\n    FOO(\"Foo\"),\n    BAR2(BAR_VALUE),\n    ...,\n    BARn(BAR_VALUE);\n\n    private static final String BAR_VALUE = \"Bar\";\n\n    @Getter\n    private final String value;\n}\n</code></pre>\n\n<p>I got the following error message for the code above: <strong>Cannot reference a field before it is defined</strong>.</p>\n"},{"tags":["java","gradle","continuous-integration","cucumber","github-actions"],"owner":{"account_id":18030033,"reputation":1,"user_id":13104921,"display_name":"Nerth94"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":67,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679398788,"creation_date":1679398788,"question_id":75800706,"body_markdown":"I want to setup a CI via GitHub Actions in my API testing framework, but I am not able to run the tests from the jar file. When I want to run `java -jar build/libs/APITestingFramework.jar`, I get `NoClassDefFoundError`:\r\n\r\n```\r\nCaused by: java.lang.ClassNotFoundException: io.cucumber.core.cli.Main\r\n        at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641)\r\n        at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188)\r\n        at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:520)\r\n        ... 1 more\r\n```\r\n\r\nThere is no problem, when I run `gradle build` or `./gradlew -q run` command.\r\n\r\nMy `build.gradle` file:\r\n\r\n```\r\nplugins {\r\n    id &#39;java&#39;\r\n    id &#39;application&#39;\r\n}\r\n\r\nrepositories {\r\n    mavenCentral()\r\n}\r\n\r\ndependencies {\r\n    implementation &#39;com.fasterxml.jackson.core:jackson-annotations:2.13.4&#39;\r\n    implementation &#39;net.datafaker:datafaker:1.6.0&#39;\r\n    implementation &#39;io.cucumber:cucumber-java:7.11.1&#39;\r\n    implementation &#39;io.cucumber:cucumber-junit:7.11.1&#39;\r\n    implementation &#39;io.cucumber:cucumber-picocontainer:7.11.1&#39;\r\n    implementation &#39;io.rest-assured:rest-assured:5.3.0&#39;\r\n    implementation &#39;junit:junit:4.13.2&#39;\r\n    implementation &#39;org.junit.jupiter:junit-jupiter:5.9.0&#39;\r\n    implementation &#39;org.junit.jupiter:junit-jupiter-api:5.9.0&#39;\r\n    implementation &#39;org.junit.jupiter:junit-jupiter-engine:5.9.0&#39;\r\n\r\n    compileOnly &#39;org.projectlombok:lombok:1.18.26&#39;\r\n    annotationProcessor &#39;org.projectlombok:lombok:1.18.26&#39;\r\n}\r\n\r\njar {\r\n    duplicatesStrategy = DuplicatesStrategy.EXCLUDE\r\n    manifest {\r\n        attributes &quot;Main-Class&quot;: &quot;my.testing.packagey.testrunner.TestRunner&quot;\r\n    }\r\n    archiveFileName = &#39;APITestingFramework.jar&#39;\r\n    from(&#39;./src/main/resources&#39;) {\r\n        include &#39;META-INF/services/io.cucumber.core.backend.ObjectFactory&#39;\r\n    }\r\n\r\n    exclude &#39;META-INF/*.SF&#39;\r\n    exclude &#39;META-INF/*.RSA&#39;\r\n    exclude &#39;META-INF/*.DSA&#39;\r\n}\r\n\r\ntasks.register(&#39;regressionTests&#39;, Test) {\r\n    include &#39;**/TestRunner.class&#39;\r\n}\r\n\r\nmainClassName = &#39;my.testing.packagey.testrunner.TestRunner&#39;\r\n```\r\n\r\nLink to my GitHub repository: https://github.com/PLes94/APITestingFramework","title":"Cannot run java -jar command in my Gradle Project - NoClassDefFoundError obtained","body":"<p>I want to setup a CI via GitHub Actions in my API testing framework, but I am not able to run the tests from the jar file. When I want to run <code>java -jar build/libs/APITestingFramework.jar</code>, I get <code>NoClassDefFoundError</code>:</p>\n<pre><code>Caused by: java.lang.ClassNotFoundException: io.cucumber.core.cli.Main\n        at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641)\n        at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188)\n        at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:520)\n        ... 1 more\n</code></pre>\n<p>There is no problem, when I run <code>gradle build</code> or <code>./gradlew -q run</code> command.</p>\n<p>My <code>build.gradle</code> file:</p>\n<pre><code>plugins {\n    id 'java'\n    id 'application'\n}\n\nrepositories {\n    mavenCentral()\n}\n\ndependencies {\n    implementation 'com.fasterxml.jackson.core:jackson-annotations:2.13.4'\n    implementation 'net.datafaker:datafaker:1.6.0'\n    implementation 'io.cucumber:cucumber-java:7.11.1'\n    implementation 'io.cucumber:cucumber-junit:7.11.1'\n    implementation 'io.cucumber:cucumber-picocontainer:7.11.1'\n    implementation 'io.rest-assured:rest-assured:5.3.0'\n    implementation 'junit:junit:4.13.2'\n    implementation 'org.junit.jupiter:junit-jupiter:5.9.0'\n    implementation 'org.junit.jupiter:junit-jupiter-api:5.9.0'\n    implementation 'org.junit.jupiter:junit-jupiter-engine:5.9.0'\n\n    compileOnly 'org.projectlombok:lombok:1.18.26'\n    annotationProcessor 'org.projectlombok:lombok:1.18.26'\n}\n\njar {\n    duplicatesStrategy = DuplicatesStrategy.EXCLUDE\n    manifest {\n        attributes &quot;Main-Class&quot;: &quot;my.testing.packagey.testrunner.TestRunner&quot;\n    }\n    archiveFileName = 'APITestingFramework.jar'\n    from('./src/main/resources') {\n        include 'META-INF/services/io.cucumber.core.backend.ObjectFactory'\n    }\n\n    exclude 'META-INF/*.SF'\n    exclude 'META-INF/*.RSA'\n    exclude 'META-INF/*.DSA'\n}\n\ntasks.register('regressionTests', Test) {\n    include '**/TestRunner.class'\n}\n\nmainClassName = 'my.testing.packagey.testrunner.TestRunner'\n</code></pre>\n<p>Link to my GitHub repository: <a href=\"https://github.com/PLes94/APITestingFramework\" rel=\"nofollow noreferrer\">https://github.com/PLes94/APITestingFramework</a></p>\n"},{"tags":["java","intellij-idea"],"comments":[{"owner":{"account_id":3538058,"reputation":5428,"user_id":2960034,"display_name":"y.bedrov"},"score":0,"creation_date":1679906102,"post_id":75800671,"comment_id":133798240,"body_markdown":"There is no link between IDs version and plugin version.","body":"There is no link between IDs version and plugin version."}],"owner":{"account_id":13121081,"reputation":45,"user_id":9478474,"display_name":"User9527"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":87,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679398554,"creation_date":1679398554,"question_id":75800671,"body_markdown":"For example，IDE Plugin generator creates the following file:\r\nbuild.gradle.kts.\r\n```\r\nplugins {\r\n  id(&quot;java&quot;)\r\n  id(&quot;org.jetbrains.intellij&quot;) version &quot;1.13.2&quot;\r\n}\r\n\r\ngroup = &quot;com.example&quot;\r\nversion = &quot;1.0-SNAPSHOT&quot;\r\n\r\nrepositories {\r\n  mavenCentral()\r\n}\r\n\r\n// Configure Gradle IntelliJ Plugin\r\n// Read more: https://plugins.jetbrains.com/docs/intellij/tools-gradle-intellij-plugin.html\r\nintellij {\r\n  version.set(&quot;2021.3&quot;)\r\n  type.set(&quot;IC&quot;) // Target IDE Platform\r\n\r\n  plugins.set(listOf(/* Plugin Dependencies */))\r\n}\r\n\r\ntasks {\r\n  // Set the JVM compatibility versions\r\n  withType&lt;JavaCompile&gt; {\r\n    sourceCompatibility = &quot;11&quot;\r\n    targetCompatibility = &quot;11&quot;\r\n  }\r\n\r\n  patchPluginXml {\r\n    sinceBuild.set(&quot;213&quot;)\r\n    untilBuild.set(&quot;223.*&quot;)\r\n  }\r\n\r\n  signPlugin {\r\n    certificateChain.set(System.getenv(&quot;CERTIFICATE_CHAIN&quot;))\r\n    privateKey.set(System.getenv(&quot;PRIVATE_KEY&quot;))\r\n    password.set(System.getenv(&quot;PRIVATE_KEY_PASSWORD&quot;))\r\n  }\r\n\r\n  publishPlugin {\r\n    token.set(System.getenv(&quot;PUBLISH_TOKEN&quot;))\r\n  }\r\n}\r\n```\r\nDoes this mean that org.jetbrains.intellij 1.13.2 corresponds to IDEA 2021.3IC?\r\nWhat is the relationship between org.jetbrains.intellij and IDEA?","title":"What is the correspondence between org.jetbrains.intellij version and the official version of IDEA？","body":"<p>For example，IDE Plugin generator creates the following file:\nbuild.gradle.kts.</p>\n<pre><code>plugins {\n  id(&quot;java&quot;)\n  id(&quot;org.jetbrains.intellij&quot;) version &quot;1.13.2&quot;\n}\n\ngroup = &quot;com.example&quot;\nversion = &quot;1.0-SNAPSHOT&quot;\n\nrepositories {\n  mavenCentral()\n}\n\n// Configure Gradle IntelliJ Plugin\n// Read more: https://plugins.jetbrains.com/docs/intellij/tools-gradle-intellij-plugin.html\nintellij {\n  version.set(&quot;2021.3&quot;)\n  type.set(&quot;IC&quot;) // Target IDE Platform\n\n  plugins.set(listOf(/* Plugin Dependencies */))\n}\n\ntasks {\n  // Set the JVM compatibility versions\n  withType&lt;JavaCompile&gt; {\n    sourceCompatibility = &quot;11&quot;\n    targetCompatibility = &quot;11&quot;\n  }\n\n  patchPluginXml {\n    sinceBuild.set(&quot;213&quot;)\n    untilBuild.set(&quot;223.*&quot;)\n  }\n\n  signPlugin {\n    certificateChain.set(System.getenv(&quot;CERTIFICATE_CHAIN&quot;))\n    privateKey.set(System.getenv(&quot;PRIVATE_KEY&quot;))\n    password.set(System.getenv(&quot;PRIVATE_KEY_PASSWORD&quot;))\n  }\n\n  publishPlugin {\n    token.set(System.getenv(&quot;PUBLISH_TOKEN&quot;))\n  }\n}\n</code></pre>\n<p>Does this mean that org.jetbrains.intellij 1.13.2 corresponds to IDEA 2021.3IC?\nWhat is the relationship between org.jetbrains.intellij and IDEA?</p>\n"},{"tags":["java","maven","jenkins"],"comments":[{"owner":{"account_id":551394,"reputation":8315,"user_id":916225,"accept_rate":69,"display_name":"seenukarthi"},"score":0,"creation_date":1679376076,"post_id":75797516,"comment_id":133706231,"body_markdown":"If you want to break the build if there are compilation errors before you run any tests, then do the build in two steps. first `mvn compile` then `mvn test`.","body":"If you want to break the build if there are compilation errors before you run any tests, then do the build in two steps. first <code>mvn compile</code> then <code>mvn test</code>."},{"owner":{"account_id":28072155,"reputation":11,"user_id":21444564,"display_name":"Kshitij Kumar"},"score":0,"creation_date":1679392356,"post_id":75797516,"comment_id":133709363,"body_markdown":"Actually, I did the same thing but `mvn compile` doesn&#39;t detect the code error","body":"Actually, I did the same thing but <code>mvn compile</code> doesn&#39;t detect the code error"},{"owner":{"account_id":28072155,"reputation":11,"user_id":21444564,"display_name":"Kshitij Kumar"},"score":0,"creation_date":1679404992,"post_id":75797516,"comment_id":133712936,"body_markdown":"Thanks, Andrey! Your ones is the exact solution of what I was looking for.","body":"Thanks, Andrey! Your ones is the exact solution of what I was looking for."}],"answers":[{"tags":[],"owner":{"account_id":4585016,"reputation":1070,"user_id":7103406,"display_name":"TudorIftimie"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679398202,"creation_date":1679394043,"answer_id":75799908,"question_id":75797516,"body_markdown":"You can try catching the error and killing the maven process from the jenkins  pipeline:\r\n\r\n```groovy\r\npipeline {\r\n    agent any\r\n\r\n    stages {\r\n        stage(&#39;Compile&#39;) {\r\n            steps {\r\n                sh &#39;mvn compile&#39;\r\n            }\r\n            post {\r\n                failure {\r\n                    script {\r\n                        currentBuild.result = &#39;FAILURE&#39;\r\n                        sh &#39;pkill -f &quot;mvn compile&quot;&#39;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        stage(&#39;Test&#39;) {\r\n            steps {\r\n                sh &#39;mvn test&#39;\r\n            }\r\n        }\r\n    }\r\n}\r\n```","title":"How to get compilation error in Jenkins for a code error without running the code?","body":"<p>You can try catching the error and killing the maven process from the jenkins  pipeline:</p>\n<pre><code>pipeline {\n    agent any\n\n    stages {\n        stage('Compile') {\n            steps {\n                sh 'mvn compile'\n            }\n            post {\n                failure {\n                    script {\n                        currentBuild.result = 'FAILURE'\n                        sh 'pkill -f &quot;mvn compile&quot;'\n                    }\n                }\n            }\n        }\n        stage('Test') {\n            steps {\n                sh 'mvn test'\n            }\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":28072155,"reputation":11,"user_id":21444564,"display_name":"Kshitij Kumar"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":114,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1679405100,"answer_count":1,"score":1,"last_activity_date":1679398202,"creation_date":1679375618,"question_id":75797516,"body_markdown":"The trouble I am facing is:\r\n\r\nSay, I have a JAVA code and I intentionally put a syntax error there, then the compilation should make the build fail.\r\n\r\nSimilarly, if there&#39;s no error, the compilation should mark the build as success.\r\n\r\nBUT the catch is, I don&#39;t want to run the code. I just want this Failure and Success based on compilation\r\n\r\nI have written a TestNg code for an automated test and I am using this maven goal in Jenkins:\r\n`clean compile test`\r\n\r\nThis starts running the whole test and then brings the error on whichever line it&#39;s caught.\r\n\r\nBut I want to get this error during the compilation without running the test code.\r\n","title":"How to get compilation error in Jenkins for a code error without running the code?","body":"<p>The trouble I am facing is:</p>\n<p>Say, I have a JAVA code and I intentionally put a syntax error there, then the compilation should make the build fail.</p>\n<p>Similarly, if there's no error, the compilation should mark the build as success.</p>\n<p>BUT the catch is, I don't want to run the code. I just want this Failure and Success based on compilation</p>\n<p>I have written a TestNg code for an automated test and I am using this maven goal in Jenkins:\n<code>clean compile test</code></p>\n<p>This starts running the whole test and then brings the error on whichever line it's caught.</p>\n<p>But I want to get this error during the compilation without running the test code.</p>\n"},{"tags":["java","apache-httpclient-4.x","chunked"],"comments":[{"owner":{"account_id":213468,"reputation":103486,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1679398101,"post_id":75798139,"comment_id":133710937,"body_markdown":"How do you conclude it is not chunking? Also, why do you want it to chunk? Likely it doesn&#39;t use chunking in this case because it knows the total size ahead of time, because files have a known size. Also, which version of the Apache HTTP client are you using (right now I&#39;ve assumed the 4.x version).","body":"How do you conclude it is not chunking? Also, why do you want it to chunk? Likely it doesn&#39;t use chunking in this case because it knows the total size ahead of time, because files have a known size. Also, which version of the Apache HTTP client are you using (right now I&#39;ve assumed the 4.x version)."}],"owner":{"account_id":11450905,"reputation":499,"user_id":8393315,"accept_rate":47,"display_name":"TomJava"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":254,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679398050,"creation_date":1679382094,"question_id":75798139,"body_markdown":"I m trying to create a chunked transfer encoding. \r\n\r\n```java\r\nString url =&quot;https://hostname/path/&quot;;\r\nFile testUploadFile = new File(&quot;filePath&quot;);\r\nCloseableHttpClient httpClient = HttpClients.createDefault();\r\nHttpEntity postData = MultipartEntityBuilder.create().addBinaryBody(&quot;uploadFile&quot;, testUploadFile).build();\r\nHttpUriRequest postRequest = RequestBuilder.put(url).setEntity(postData)\r\n\t\t.addHeader(&quot;Content-Type&quot;,&quot;application/json&quot;)\r\n\t\t.addHeader(&quot;User-Agent&quot;,&quot;java-prg&quot;)\r\n\t\t.build();\r\n\r\nHttpResponse response =  httpClient.execute(postRequest);\r\nBufferedReader bufferedReader  = new BufferedReader(new InputStreamReader(response.getEntity().getContent()));\r\n\r\nStringBuffer stringBuffer= new StringBuffer();\r\nString line =&quot;&quot;;\r\nSystem.out.println(&quot;Result &quot;+response.getStatusLine().getStatusCode());\r\nwhile((line=bufferedReader.readLine()) != null) {\r\n\tstringBuffer.append(line);\r\n}\r\n```\r\n\t\t\r\nEven if I add \r\n\r\n```\r\n.addHeader(&quot;Transfer-Encoding&quot;,&quot;chunked&quot;)\r\n```\r\n```none\r\norg.apache.http.client.ClientProtocolException\r\n\tat org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:187)\r\nCaused by: org.apache.http.ProtocolException: Transfer-encoding header already present\r\n```\r\n","title":"How to create a chunked request in Java (transfer encoding)","body":"<p>I m trying to create a chunked transfer encoding.</p>\n<pre class=\"lang-java prettyprint-override\"><code>String url =&quot;https://hostname/path/&quot;;\nFile testUploadFile = new File(&quot;filePath&quot;);\nCloseableHttpClient httpClient = HttpClients.createDefault();\nHttpEntity postData = MultipartEntityBuilder.create().addBinaryBody(&quot;uploadFile&quot;, testUploadFile).build();\nHttpUriRequest postRequest = RequestBuilder.put(url).setEntity(postData)\n        .addHeader(&quot;Content-Type&quot;,&quot;application/json&quot;)\n        .addHeader(&quot;User-Agent&quot;,&quot;java-prg&quot;)\n        .build();\n\nHttpResponse response =  httpClient.execute(postRequest);\nBufferedReader bufferedReader  = new BufferedReader(new InputStreamReader(response.getEntity().getContent()));\n\nStringBuffer stringBuffer= new StringBuffer();\nString line =&quot;&quot;;\nSystem.out.println(&quot;Result &quot;+response.getStatusLine().getStatusCode());\nwhile((line=bufferedReader.readLine()) != null) {\n    stringBuffer.append(line);\n}\n</code></pre>\n<p>Even if I add</p>\n<pre><code>.addHeader(&quot;Transfer-Encoding&quot;,&quot;chunked&quot;)\n</code></pre>\n<pre class=\"lang-none prettyprint-override\"><code>org.apache.http.client.ClientProtocolException\n    at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:187)\nCaused by: org.apache.http.ProtocolException: Transfer-encoding header already present\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":28508,"reputation":2817,"user_id":76219,"accept_rate":79,"display_name":"XpiritO"},"score":0,"creation_date":1443089312,"post_id":32758569,"comment_id":53356497,"body_markdown":"http://stackoverflow.com/questions/15622413/calculate-business-days-in-java-without-saturdays-sunday-and-public-holiday OR http://stackoverflow.com/questions/4600034/calculate-number-of-weekdays-between-two-dates-in-java ...","body":"<a href=\"http://stackoverflow.com/questions/15622413/calculate-business-days-in-java-without-saturdays-sunday-and-public-holiday\" title=\"calculate business days in java without saturdays sunday and public holiday\">stackoverflow.com/questions/15622413/&hellip;</a> OR <a href=\"http://stackoverflow.com/questions/4600034/calculate-number-of-weekdays-between-two-dates-in-java\" title=\"calculate number of weekdays between two dates in java\">stackoverflow.com/questions/4600034/&hellip;</a> ..."},{"owner":{"account_id":6323430,"reputation":362,"user_id":4910562,"accept_rate":67,"display_name":"Shashi Kiran"},"score":0,"creation_date":1443089775,"post_id":32758569,"comment_id":53356764,"body_markdown":"@BenWin Yes I want the date difference, but including the start and the end date.","body":"@BenWin Yes I want the date difference, but including the start and the end date."},{"owner":{"account_id":295795,"reputation":5373,"user_id":600379,"display_name":"Dakshinamurthy Karra"},"score":0,"creation_date":1443090349,"post_id":32758569,"comment_id":53357093,"body_markdown":"@ShashiKiran I executed your program and it works fine. Gives 4 for the second example.","body":"@ShashiKiran I executed your program and it works fine. Gives 4 for the second example."},{"owner":{"account_id":6323430,"reputation":362,"user_id":4910562,"accept_rate":67,"display_name":"Shashi Kiran"},"score":0,"creation_date":1443090519,"post_id":32758569,"comment_id":53357168,"body_markdown":"@KDM Found the mistake in my code, the date format had to changed from yyyy to yy. Can you kindly recheck with the same data ?","body":"@KDM Found the mistake in my code, the date format had to changed from yyyy to yy. Can you kindly recheck with the same data ?"},{"owner":{"account_id":295795,"reputation":5373,"user_id":600379,"display_name":"Dakshinamurthy Karra"},"score":0,"creation_date":1443090581,"post_id":32758569,"comment_id":53357208,"body_markdown":"@ShashiKiran according to sdf java doc &quot;For parsing, if the number of pattern letters is more than 2, the year is interpreted literally, regardless of the number of digits. So using the pattern &quot;MM/dd/yyyy&quot;, &quot;01/11/12&quot; parses to Jan 11, 12 A.D.&quot;","body":"@ShashiKiran according to sdf java doc &quot;For parsing, if the number of pattern letters is more than 2, the year is interpreted literally, regardless of the number of digits. So using the pattern &quot;MM/dd/yyyy&quot;, &quot;01/11/12&quot; parses to Jan 11, 12 A.D.&quot;"},{"owner":{"account_id":295795,"reputation":5373,"user_id":600379,"display_name":"Dakshinamurthy Karra"},"score":0,"creation_date":1443090726,"post_id":32758569,"comment_id":53357285,"body_markdown":"@ShashiKiran while trying your code, I changed the format to &quot;yy&quot; and forgot about it.","body":"@ShashiKiran while trying your code, I changed the format to &quot;yy&quot; and forgot about it."},{"owner":{"account_id":1432415,"reputation":10687,"user_id":1354537,"accept_rate":83,"display_name":"Marged"},"score":0,"creation_date":1443091218,"post_id":32758569,"comment_id":53357553,"body_markdown":"Do official holidays matter in your calculation ?","body":"Do official holidays matter in your calculation ?"},{"owner":{"account_id":6323430,"reputation":362,"user_id":4910562,"accept_rate":67,"display_name":"Shashi Kiran"},"score":0,"creation_date":1443091344,"post_id":32758569,"comment_id":53357618,"body_markdown":"@Marged I need only the weekends to be removed not any other official or public holidays.","body":"@Marged I need only the weekends to be removed not any other official or public holidays."}],"answers":[{"tags":[],"owner":{"account_id":1455938,"reputation":1692,"user_id":1371499,"accept_rate":74,"display_name":"Nitesh Virani"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1679397635,"creation_date":1443089546,"answer_id":32758737,"question_id":32758569,"body_markdown":"You have a mistake in creating `SimpleDateFormat`, change to `yy` instead of `yyyy`\r\n\r\n    SimpleDateFormat sdf = new SimpleDateFormat(&quot;dd/MM/yy&quot;);\r\n\r\nThis should solve your problems. I do not see any issues in your logic.\r\n\r\nAs per your comments, if your start date is greater than end date then you have to swap it before `while` loop\r\n\r\n       if(start.after(end)) {\r\n           Calendar tempCal;\r\n           tempCal = start;\r\n           start = end;\r\n           end = tempCal;\r\n        }","title":"How to calculate the working days (excluding weekends) in between two different dates?","body":"<p>You have a mistake in creating <code>SimpleDateFormat</code>, change to <code>yy</code> instead of <code>yyyy</code></p>\n<pre><code>SimpleDateFormat sdf = new SimpleDateFormat(&quot;dd/MM/yy&quot;);\n</code></pre>\n<p>This should solve your problems. I do not see any issues in your logic.</p>\n<p>As per your comments, if your start date is greater than end date then you have to swap it before <code>while</code> loop</p>\n<pre><code>   if(start.after(end)) {\n       Calendar tempCal;\n       tempCal = start;\n       start = end;\n       end = tempCal;\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1438213,"reputation":2261,"user_id":1359137,"accept_rate":17,"display_name":"Animesh Kumar Paul"},"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1443090749,"creation_date":1443090749,"answer_id":32759122,"question_id":32758569,"body_markdown":"Check the below code:\r\n\r\n    import java.io.InputStreamReader;\r\n    import java.text.SimpleDateFormat;\r\n    import java.util.Calendar;\r\n    import java.util.Scanner;\r\n\r\n\r\n    public class DaysCounter {\r\n    private String startDate;\r\n    private String endDate;\r\n\r\n    public void calculateDate(){\r\n        @SuppressWarnings(&quot;resource&quot;)\r\n        Scanner in=new Scanner(new InputStreamReader(System.in));\r\n\r\n        System.out.println(&quot;Enter the starting date (DD/MM/YY) :&quot;);\r\n        startDate=in.next();\r\n\r\n        System.out.println(&quot;Enter the End date (DD/MM/YY) :&quot;);\r\n        endDate=in.next();\r\n\r\n        SimpleDateFormat sdf = new SimpleDateFormat(&quot;dd/MM/yyyy&quot;);\r\n        try\r\n        {\r\n            Calendar start = Calendar.getInstance();\r\n            start.setTime(sdf.parse(startDate));\r\n            Calendar end = Calendar.getInstance();\r\n            end.setTime(sdf.parse(endDate));\r\n            int workingDays = 0;\r\n            while(!start.after(end))\r\n            {\r\n                int day = start.get(Calendar.DAY_OF_WEEK);\r\n              \r\n                day = day + 2;\r\n                if (day &gt; 7){\r\n                    day = day -7;\r\n                }\r\n                \r\n                if ((day != Calendar.SATURDAY) &amp;&amp; (day != Calendar.SUNDAY))\r\n                    workingDays++;\r\n                start.add(Calendar.DATE, 1);\r\n            }\r\n            System.out.println(workingDays);\r\n        }\r\n        catch(Exception e)\r\n        {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n    public static void main(String[] args)\r\n    {\r\n        DaysCounter daysCounter=new DaysCounter();\r\n        daysCounter.calculateDate();\r\n    }\r\n    }","title":"How to calculate the working days (excluding weekends) in between two different dates?","body":"<p>Check the below code:</p>\n\n<pre><code>import java.io.InputStreamReader;\nimport java.text.SimpleDateFormat;\nimport java.util.Calendar;\nimport java.util.Scanner;\n\n\npublic class DaysCounter {\nprivate String startDate;\nprivate String endDate;\n\npublic void calculateDate(){\n    @SuppressWarnings(\"resource\")\n    Scanner in=new Scanner(new InputStreamReader(System.in));\n\n    System.out.println(\"Enter the starting date (DD/MM/YY) :\");\n    startDate=in.next();\n\n    System.out.println(\"Enter the End date (DD/MM/YY) :\");\n    endDate=in.next();\n\n    SimpleDateFormat sdf = new SimpleDateFormat(\"dd/MM/yyyy\");\n    try\n    {\n        Calendar start = Calendar.getInstance();\n        start.setTime(sdf.parse(startDate));\n        Calendar end = Calendar.getInstance();\n        end.setTime(sdf.parse(endDate));\n        int workingDays = 0;\n        while(!start.after(end))\n        {\n            int day = start.get(Calendar.DAY_OF_WEEK);\n\n            day = day + 2;\n            if (day &gt; 7){\n                day = day -7;\n            }\n\n            if ((day != Calendar.SATURDAY) &amp;&amp; (day != Calendar.SUNDAY))\n                workingDays++;\n            start.add(Calendar.DATE, 1);\n        }\n        System.out.println(workingDays);\n    }\n    catch(Exception e)\n    {\n        e.printStackTrace();\n    }\n}\n\npublic static void main(String[] args)\n{\n    DaysCounter daysCounter=new DaysCounter();\n    daysCounter.calculateDate();\n}\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":28065276,"reputation":11,"user_id":21438756,"display_name":"Dhruv Shantilal Patel"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1679393379,"creation_date":1679392881,"answer_id":75799720,"question_id":32758569,"body_markdown":"    /*this program is for count the days between two days with excluding SATURDAY and SUNDAY*/\r\n    \r\n    package example;\r\n    import java.text.ParseException;\r\n    import java.text.SimpleDateFormat;\r\n    import java.util.*;\r\n    import java.util.regex.Pattern;\r\n    \r\n    public class ValidDate {\r\n    \r\n    \tprivate static Pattern datePattern = Pattern.compile(&quot;^\\\\d{1,2}/\\\\d{1,2}/\\\\d{4}$&quot;);\r\n    \r\n    \tpublic static boolean isValidFormat(String src, String src1) {\r\n    \t\tif (datePattern.matcher(src).matches() &amp;&amp; datePattern.matcher(src1).matches()) {\r\n    \t\t\treturn true;\r\n    \t\t}\r\n    \t\treturn false;\r\n    \t}\r\n    \r\n    \tpublic static boolean isValidDate(String str, String str1) {\r\n    \t\tSimpleDateFormat sdf = new SimpleDateFormat(&quot;dd/MM/yyyy&quot;);\r\n    \t\tsdf.setLenient(false);\r\n    \r\n    \t\ttry {\r\n    \t\t\tsdf.parse(str);\r\n    \t\t\tsdf.parse(str1);\r\n    \t\t\treturn true;\r\n    \t\t} catch (ParseException e) {\r\n    \t\t\treturn false;\r\n    \t\t}\r\n    \r\n    \t}\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tScanner sc = new Scanner(System.in);\r\n    \t\tSystem.out.println(&quot;Enter start Date&quot;);\r\n    \t\tString startDate = sc.next();\r\n    \r\n    \t\tSystem.out.println(&quot;Enter end date&quot;);\r\n    \t\tString endDate = sc.next();\r\n    \r\n    \t\tint workingDays = 0;\r\n    \t\tboolean isValidPattern = isValidFormat(startDate, endDate);\r\n    \t\tif (isValidPattern) {\r\n    \t\t\tSimpleDateFormat sdf = new SimpleDateFormat(&quot;dd/MM/yyyy&quot;);\r\n    \t\t\tsdf.setLenient(false);\r\n    \t\t\tif (isValidDate(startDate, endDate)) {\r\n    //System.out.println(&quot;This is valid dates&quot;);\r\n    \t\t\t\ttry {\r\n    \t\t\t\t\tCalendar start = Calendar.getInstance();\r\n    \t\t\t\t\tstart.setTime(sdf.parse(startDate));\r\n    \t\t\t\t\tCalendar end = Calendar.getInstance();\r\n    \t\t\t\t\tend.setTime(sdf.parse(endDate));\r\n    \r\n    \t\t\t\t\twhile (!start.after(end)) {\r\n    \t\t\t\t\t\tint day = start.get(Calendar.DAY_OF_WEEK);\r\n    \t\t\t\t\t\tif ((day != Calendar.SATURDAY) &amp;&amp; (day != Calendar.SUNDAY)) {\r\n    \t\t\t\t\t\t\tworkingDays++;\r\n    \t\t\t\t\t\t}\r\n    \t\t\t\t\t\tstart.add(Calendar.DATE, 1);\r\n    \t\t\t\t\t}\r\n    \t\t\t\t\tSystem.out.println(&quot;Working Days=&quot; + workingDays);\r\n    \t\t\t\r\n    \t\t\t\t} catch (Exception e) {\r\n    \t\t\t\t\te.printStackTrace();\r\n    \t\t\t\t}\r\n    \r\n    \t\t\t} else {\r\n    \t\t\t\tSystem.out.println(&quot;Given date is invalid&quot;);\r\n    \t\t\t}\r\n    \t\t} else {\r\n    \t\t\tSystem.out.println(&quot;Please enter date in [DD/MM/YYYY] format&quot;);\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\n","title":"How to calculate the working days (excluding weekends) in between two different dates?","body":"<pre><code>/*this program is for count the days between two days with excluding SATURDAY and SUNDAY*/\n\npackage example;\nimport java.text.ParseException;\nimport java.text.SimpleDateFormat;\nimport java.util.*;\nimport java.util.regex.Pattern;\n\npublic class ValidDate {\n\n    private static Pattern datePattern = Pattern.compile(&quot;^\\\\d{1,2}/\\\\d{1,2}/\\\\d{4}$&quot;);\n\n    public static boolean isValidFormat(String src, String src1) {\n        if (datePattern.matcher(src).matches() &amp;&amp; datePattern.matcher(src1).matches()) {\n            return true;\n        }\n        return false;\n    }\n\n    public static boolean isValidDate(String str, String str1) {\n        SimpleDateFormat sdf = new SimpleDateFormat(&quot;dd/MM/yyyy&quot;);\n        sdf.setLenient(false);\n\n        try {\n            sdf.parse(str);\n            sdf.parse(str1);\n            return true;\n        } catch (ParseException e) {\n            return false;\n        }\n\n    }\n\n    public static void main(String[] args) {\n        Scanner sc = new Scanner(System.in);\n        System.out.println(&quot;Enter start Date&quot;);\n        String startDate = sc.next();\n\n        System.out.println(&quot;Enter end date&quot;);\n        String endDate = sc.next();\n\n        int workingDays = 0;\n        boolean isValidPattern = isValidFormat(startDate, endDate);\n        if (isValidPattern) {\n            SimpleDateFormat sdf = new SimpleDateFormat(&quot;dd/MM/yyyy&quot;);\n            sdf.setLenient(false);\n            if (isValidDate(startDate, endDate)) {\n//System.out.println(&quot;This is valid dates&quot;);\n                try {\n                    Calendar start = Calendar.getInstance();\n                    start.setTime(sdf.parse(startDate));\n                    Calendar end = Calendar.getInstance();\n                    end.setTime(sdf.parse(endDate));\n\n                    while (!start.after(end)) {\n                        int day = start.get(Calendar.DAY_OF_WEEK);\n                        if ((day != Calendar.SATURDAY) &amp;&amp; (day != Calendar.SUNDAY)) {\n                            workingDays++;\n                        }\n                        start.add(Calendar.DATE, 1);\n                    }\n                    System.out.println(&quot;Working Days=&quot; + workingDays);\n            \n                } catch (Exception e) {\n                    e.printStackTrace();\n                }\n\n            } else {\n                System.out.println(&quot;Given date is invalid&quot;);\n            }\n        } else {\n            System.out.println(&quot;Please enter date in [DD/MM/YYYY] format&quot;);\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":6323430,"reputation":362,"user_id":4910562,"accept_rate":67,"display_name":"Shashi Kiran"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10741,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"accepted_answer_id":32758737,"answer_count":3,"score":7,"last_activity_date":1679397635,"creation_date":1443088993,"question_id":32758569,"body_markdown":"My requirement is to calculate the number of days between the given two dates, excluding Saturday and Sunday.\r\n\r\nExample:\r\n\r\nStart date: 10/09/15 and End date 18/09/15\\\r\nResult: 7\r\n\r\nDate is in `DD/MM/YY` format.\r\n\r\nCode:\r\n```java\r\nimport java.io.InputStreamReader;\r\nimport java.text.SimpleDateFormat;\r\nimport java.util.Calendar;\r\nimport java.util.Scanner;\r\n\r\npublic class DaysCounter {\r\n\tprivate String startDate;\r\n\tprivate String endDate;\r\n\r\n\tpublic void calculateDate(){\r\n\t\t@SuppressWarnings(&quot;resource&quot;)\r\n\t\tScanner in=new Scanner(new InputStreamReader(System.in));\r\n\r\n\t\tSystem.out.println(&quot;Enter the starting date (DD/MM/YY) :&quot;);\r\n\t\tstartDate=in.next();\r\n\r\n\t\tSystem.out.println(&quot;Enter the End date (DD/MM/YY) :&quot;);\r\n\t\tendDate=in.next();\r\n\r\n\t\tSimpleDateFormat sdf = new SimpleDateFormat(&quot;dd/MM/yyyy&quot;);\r\n\t\ttry\r\n\t\t{\r\n\t\t\tCalendar start = Calendar.getInstance();\r\n\t\t\tstart.setTime(sdf.parse(startDate));\r\n\t\t\tCalendar end = Calendar.getInstance();\r\n\t\t\tend.setTime(sdf.parse(endDate));\r\n\t\t\tint workingDays = 0;\r\n\t\t\twhile(!start.after(end))\r\n\t\t\t{\r\n\t\t\t\tint day = start.get(Calendar.DAY_OF_WEEK);\r\n\t\t\t\tif ((day != Calendar.SATURDAY) &amp;&amp; (day != Calendar.SUNDAY))\r\n\t\t\t\t\tworkingDays++;\r\n\t\t\t\tstart.add(Calendar.DATE, 1);\r\n\t\t\t}\r\n\t\t\tSystem.out.println(workingDays);\r\n\t\t}\r\n\t\tcatch(Exception e)\r\n\t\t{\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t}\r\n\r\n\tpublic static void main(String[] args)\r\n\t{\r\n\t\tDaysCounter daysCounter=new DaysCounter();\r\n\t\tdaysCounter.calculateDate();\r\n\t}\r\n}\r\n```\r\n\r\nHere are the results for the above code.\r\n\r\n1.  ```none\r\n    Enter the starting date (DD/MM/YY) :\r\n    14/09/15\r\n    Enter the End date (DD/MM/YY) :\r\n    20/09/15\r\n\r\n    5\r\n    ```\r\n\r\n2.  ```none\r\n    Enter the starting date (DD/MM/YY) :\r\n    14/09/15\r\n    Enter the End date (DD/MM/YY) :\r\n    17/09/15\r\n\r\n    2\r\n    ```\r\n\r\n3.  ```none\r\n    Enter the starting date (DD/MM/YY) :\r\n    31/08/15\r\n    Enter the End date (DD/MM/YY) :\r\n    30/09/15\r\n\r\n    21\r\n    ```\r\n\r\nAs seen in the above first example, the result is correct. However, for the second example, the result is incorrect, the expected result is 4. Also for the third example, the result is incorrect.\r\n\r\nWhen I enter the date between any weekday and a Saturday, I get an incorrect result.\r\n\r\nWhat changes should be made to the code to make it work?\r\n\r\n","title":"How to calculate the working days (excluding weekends) in between two different dates?","body":"<p>My requirement is to calculate the number of days between the given two dates, excluding Saturday and Sunday.</p>\n<p>Example:</p>\n<p>Start date: 10/09/15 and End date 18/09/15<br />\nResult: 7</p>\n<p>Date is in <code>DD/MM/YY</code> format.</p>\n<p>Code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.io.InputStreamReader;\nimport java.text.SimpleDateFormat;\nimport java.util.Calendar;\nimport java.util.Scanner;\n\npublic class DaysCounter {\n    private String startDate;\n    private String endDate;\n\n    public void calculateDate(){\n        @SuppressWarnings(&quot;resource&quot;)\n        Scanner in=new Scanner(new InputStreamReader(System.in));\n\n        System.out.println(&quot;Enter the starting date (DD/MM/YY) :&quot;);\n        startDate=in.next();\n\n        System.out.println(&quot;Enter the End date (DD/MM/YY) :&quot;);\n        endDate=in.next();\n\n        SimpleDateFormat sdf = new SimpleDateFormat(&quot;dd/MM/yyyy&quot;);\n        try\n        {\n            Calendar start = Calendar.getInstance();\n            start.setTime(sdf.parse(startDate));\n            Calendar end = Calendar.getInstance();\n            end.setTime(sdf.parse(endDate));\n            int workingDays = 0;\n            while(!start.after(end))\n            {\n                int day = start.get(Calendar.DAY_OF_WEEK);\n                if ((day != Calendar.SATURDAY) &amp;&amp; (day != Calendar.SUNDAY))\n                    workingDays++;\n                start.add(Calendar.DATE, 1);\n            }\n            System.out.println(workingDays);\n        }\n        catch(Exception e)\n        {\n            e.printStackTrace();\n        }\n    }\n\n    public static void main(String[] args)\n    {\n        DaysCounter daysCounter=new DaysCounter();\n        daysCounter.calculateDate();\n    }\n}\n</code></pre>\n<p>Here are the results for the above code.</p>\n<ol>\n<li>\n<pre class=\"lang-none prettyprint-override\"><code>Enter the starting date (DD/MM/YY) :\n14/09/15\nEnter the End date (DD/MM/YY) :\n20/09/15\n\n5\n</code></pre>\n</li>\n<li>\n<pre class=\"lang-none prettyprint-override\"><code>Enter the starting date (DD/MM/YY) :\n14/09/15\nEnter the End date (DD/MM/YY) :\n17/09/15\n\n2\n</code></pre>\n</li>\n<li>\n<pre class=\"lang-none prettyprint-override\"><code>Enter the starting date (DD/MM/YY) :\n31/08/15\nEnter the End date (DD/MM/YY) :\n30/09/15\n\n21\n</code></pre>\n</li>\n</ol>\n<p>As seen in the above first example, the result is correct. However, for the second example, the result is incorrect, the expected result is 4. Also for the third example, the result is incorrect.</p>\n<p>When I enter the date between any weekday and a Saturday, I get an incorrect result.</p>\n<p>What changes should be made to the code to make it work?</p>\n"},{"tags":["java","sql","postgresql","jdbc"],"answers":[{"tags":[],"owner":{"account_id":130979,"reputation":80000,"user_id":330644,"accept_rate":99,"display_name":"Delan Azabani"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1272884819,"creation_date":1272884819,"answer_id":2757576,"question_id":2757549,"body_markdown":"The offending lines are the following:\r\n\r\n    MaxConnections=90\r\n    InitialConnections=80\r\n\r\nYou can increase the values to allow more connections.","title":"org.postgresql.util.PSQLException: FATAL: sorry, too many clients already","body":"<p>The offending lines are the following:</p>\n\n<pre><code>MaxConnections=90\nInitialConnections=80\n</code></pre>\n\n<p>You can increase the values to allow more connections.</p>\n"},{"tags":[],"owner":{"account_id":103559,"reputation":73828,"user_id":277304,"accept_rate":66,"display_name":"leonbloy"},"down_vote_count":1,"up_vote_count":60,"is_accepted":true,"score":59,"last_activity_date":1272894055,"creation_date":1272894055,"answer_id":2758432,"question_id":2757549,"body_markdown":"We don&#39;t know what *server.properties* file is that, we neither know what *SimocoPoolSize* means (do you?)\r\n\r\nLet&#39;s guess you are using some custom pool of database connections. Then, I guess the problem is that your pool is configured to open 100 or 120 connections, but you Postgresql server is configured to accept `MaxConnections=90` . These seem conflictive settings. Try increasing `MaxConnections=120`.\r\n\r\nBut you should first understand your db layer infrastructure, know what pool are you using, if you really need so many open connections in the pool. And, specially, if you are gracefully returning the opened connections to the pool","title":"org.postgresql.util.PSQLException: FATAL: sorry, too many clients already","body":"<p>We don't know what <em>server.properties</em> file is that, we neither know what <em>SimocoPoolSize</em> means (do you?)</p>\n\n<p>Let's guess you are using some custom pool of database connections. Then, I guess the problem is that your pool is configured to open 100 or 120 connections, but you Postgresql server is configured to accept <code>MaxConnections=90</code> . These seem conflictive settings. Try increasing <code>MaxConnections=120</code>.</p>\n\n<p>But you should first understand your db layer infrastructure, know what pool are you using, if you really need so many open connections in the pool. And, specially, if you are gracefully returning the opened connections to the pool</p>\n"},{"tags":[],"owner":{"account_id":706738,"reputation":93,"user_id":602890,"display_name":"JK Tomar"},"down_vote_count":4,"up_vote_count":10,"is_accepted":false,"score":6,"last_activity_date":1365036280,"creation_date":1296810864,"answer_id":4896284,"question_id":2757549,"body_markdown":"No need to increase the MaxConnections &amp; InitialConnections. Just close your connections after after doing your work.  For example if you are creating connection:\r\n\r\n    try {\r\n         connection = DriverManager.getConnection(\r\n    \t\t\t\t\t&quot;jdbc:postgresql://127.0.0.1/&quot;+dbname,user,pass);\r\n    \t\t\t\r\n       } catch (SQLException e) {\r\n    \te.printStackTrace();\r\n    \treturn;\r\n    }\r\n\r\nAfter doing your work close connection:\r\n\r\n    try {\r\n    \tconnection.commit();\r\n    \tconnection.close();\r\n    } catch (SQLException e) {\r\n\t    e.printStackTrace();\r\n    }","title":"org.postgresql.util.PSQLException: FATAL: sorry, too many clients already","body":"<p>No need to increase the MaxConnections &amp; InitialConnections. Just close your connections after after doing your work.  For example if you are creating connection:</p>\n\n<pre><code>try {\n     connection = DriverManager.getConnection(\n                    \"jdbc:postgresql://127.0.0.1/\"+dbname,user,pass);\n\n   } catch (SQLException e) {\n    e.printStackTrace();\n    return;\n}\n</code></pre>\n\n<p>After doing your work close connection:</p>\n\n<pre><code>try {\n    connection.commit();\n    connection.close();\n} catch (SQLException e) {\n    e.printStackTrace();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":199671,"reputation":148444,"user_id":445131,"accept_rate":89,"display_name":"Eric Leschinski"},"down_vote_count":0,"up_vote_count":273,"is_accepted":false,"score":273,"last_activity_date":1677864353,"creation_date":1354062988,"answer_id":13595817,"question_id":2757549,"body_markdown":"An explanation of the following error:\r\n--------------------------------------\r\n\r\n    org.postgresql.util.PSQLException: FATAL: sorry, too many clients already.\r\n\r\n**Summary:**\r\n\r\nYour code opened up more than the allowed limit of connections to the postgresql database.  It ran something like this: `Connection conn = myconn.Open();` inside a loop, and forgot to run `conn.close();`.  Just because your class is destroyed and garbage collected does not release the connection to the database.  The quickest fix to this is to make sure you have the following code with whatever class that creates a connection:\r\n\r\n    protected void finalize() throws Throwable  \r\n    {  \r\n        try { your_connection.close(); } \r\n        catch (SQLException e) { \r\n            e.printStackTrace();\r\n        }\r\n        super.finalize();  \r\n    }  \r\n\r\nPlace that code in any class where you create a Connection.  Then when your class is garbage collected, your connection will be released.\r\n\r\n\r\n**Run this SQL to see postgresql max connections allowed:**\r\n\r\n    show max_connections;\r\n\r\nThe default is 100.  PostgreSQL on good hardware can support a few hundred connections at a time.  If you want to have thousands, you should consider using connection pooling software to reduce the connection overhead.  \r\n\r\n**Take a look at exactly who/what/when/where is holding open your connections:**\r\n\r\n    SELECT * FROM pg_stat_activity;\r\n\r\n**The number of connections currently used is:**\r\n\r\n    SELECT COUNT(*) from pg_stat_activity;\r\n\r\n**Debugging strategy**\r\n\r\n1.  You could give different usernames/passwords to the programs that might not be releasing the connections to find out which one it is, and then look in pg_stat_activity to find out which one is not cleaning up after itself.  \r\n\r\n2.  Do a full exception stack trace when the connections could not be created and follow the code back up to where you create a new `Connection`, make sure every code line where you create a connection ends with a `connection.close();`\r\n\r\n\r\n**How to set the max_connections higher:**\r\n\r\nmax_connections in the postgresql.conf sets the maximum number of concurrent connections to the database server. \r\n\r\n1.  First find your postgresql.conf file\r\n2.  If you don&#39;t know where it is, query the database with the sql: `SHOW config_file;`\r\n3.  Mine is in: `/var/lib/pgsql/data/postgresql.conf`\r\n4.  Login as root and edit that file.\r\n5.  Search for the string: &quot;max_connections&quot;.\r\n6.  You&#39;ll see a line that says `max_connections=100`.\r\n7.  Set that number bigger, restart postgresql database.\r\n\r\n**What&#39;s the maximum max_connections?**\r\n\r\nUse this query:\r\n\r\n    select min_val, max_val from pg_settings where name=&#39;max_connections&#39;;\r\n\r\nI get the value `8388607` so in theory that&#39;s the most you are allowed to have, but then a runaway process can eat up thousands of connections, and surprise, your database is unresponsive until reboot.  If you had a sensible max_connections like 100.  The offending program would be denied a new connection and the database is safu.\r\n","title":"org.postgresql.util.PSQLException: FATAL: sorry, too many clients already","body":"<h2>An explanation of the following error:</h2>\n<pre><code>org.postgresql.util.PSQLException: FATAL: sorry, too many clients already.\n</code></pre>\n<p><strong>Summary:</strong></p>\n<p>Your code opened up more than the allowed limit of connections to the postgresql database.  It ran something like this: <code>Connection conn = myconn.Open();</code> inside a loop, and forgot to run <code>conn.close();</code>.  Just because your class is destroyed and garbage collected does not release the connection to the database.  The quickest fix to this is to make sure you have the following code with whatever class that creates a connection:</p>\n<pre><code>protected void finalize() throws Throwable  \n{  \n    try { your_connection.close(); } \n    catch (SQLException e) { \n        e.printStackTrace();\n    }\n    super.finalize();  \n}  \n</code></pre>\n<p>Place that code in any class where you create a Connection.  Then when your class is garbage collected, your connection will be released.</p>\n<p><strong>Run this SQL to see postgresql max connections allowed:</strong></p>\n<pre><code>show max_connections;\n</code></pre>\n<p>The default is 100.  PostgreSQL on good hardware can support a few hundred connections at a time.  If you want to have thousands, you should consider using connection pooling software to reduce the connection overhead.</p>\n<p><strong>Take a look at exactly who/what/when/where is holding open your connections:</strong></p>\n<pre><code>SELECT * FROM pg_stat_activity;\n</code></pre>\n<p><strong>The number of connections currently used is:</strong></p>\n<pre><code>SELECT COUNT(*) from pg_stat_activity;\n</code></pre>\n<p><strong>Debugging strategy</strong></p>\n<ol>\n<li><p>You could give different usernames/passwords to the programs that might not be releasing the connections to find out which one it is, and then look in pg_stat_activity to find out which one is not cleaning up after itself.</p>\n</li>\n<li><p>Do a full exception stack trace when the connections could not be created and follow the code back up to where you create a new <code>Connection</code>, make sure every code line where you create a connection ends with a <code>connection.close();</code></p>\n</li>\n</ol>\n<p><strong>How to set the max_connections higher:</strong></p>\n<p>max_connections in the postgresql.conf sets the maximum number of concurrent connections to the database server.</p>\n<ol>\n<li>First find your postgresql.conf file</li>\n<li>If you don't know where it is, query the database with the sql: <code>SHOW config_file;</code></li>\n<li>Mine is in: <code>/var/lib/pgsql/data/postgresql.conf</code></li>\n<li>Login as root and edit that file.</li>\n<li>Search for the string: &quot;max_connections&quot;.</li>\n<li>You'll see a line that says <code>max_connections=100</code>.</li>\n<li>Set that number bigger, restart postgresql database.</li>\n</ol>\n<p><strong>What's the maximum max_connections?</strong></p>\n<p>Use this query:</p>\n<pre><code>select min_val, max_val from pg_settings where name='max_connections';\n</code></pre>\n<p>I get the value <code>8388607</code> so in theory that's the most you are allowed to have, but then a runaway process can eat up thousands of connections, and surprise, your database is unresponsive until reboot.  If you had a sensible max_connections like 100.  The offending program would be denied a new connection and the database is safu.</p>\n"},{"tags":[],"owner":{"account_id":6522278,"reputation":41,"user_id":5046124,"display_name":"Brayan Escobedo"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1485215683,"creation_date":1485215683,"answer_id":41817781,"question_id":2757549,"body_markdown":"You need to close all your connexions for example:\r\nIf you make an INSERT INTO statement you need to close the statement and your connexion in this way:\r\n\r\n    statement.close();\r\n    Connexion.close():\r\n\r\nAnd if you make a SELECT statement you need to close the statement, the connexion and the resultset in this way:\r\n\r\n    resultset.close();\r\n    statement.close();\r\n    Connexion.close();\r\n\r\nI did this and it worked","title":"org.postgresql.util.PSQLException: FATAL: sorry, too many clients already","body":"<p>You need to close all your connexions for example:\nIf you make an INSERT INTO statement you need to close the statement and your connexion in this way:</p>\n\n<pre><code>statement.close();\nConnexion.close():\n</code></pre>\n\n<p>And if you make a SELECT statement you need to close the statement, the connexion and the resultset in this way:</p>\n\n<pre><code>resultset.close();\nstatement.close();\nConnexion.close();\n</code></pre>\n\n<p>I did this and it worked</p>\n"},{"tags":[],"owner":{"account_id":21797838,"reputation":81,"user_id":16097168,"display_name":"Abbas"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1670305184,"creation_date":1670304919,"answer_id":74697708,"question_id":2757549,"body_markdown":"I had postgres and other apps up in docker. I was facing this problem when more than ten apps connected to postgres database. The solution was to increase postgres max_connection count. This is 100 by default. To increase this value, either find max_connection in the /var/lib/pgsql/data/postgresql.conf file and edit it. Another way is to add and run the docker-compose.yml document as follows.  \r\n\r\n    version: &#39;3&#39;\r\n    \r\n    services:\r\n      taxi-postgresql:\r\n        container_name: my-postgresql\r\n        image: postgres:13.3\r\n        volumes:\r\n          - ./postgres-volume:/var/lib/postgresql/data\r\n        environment:\r\n          - POSTGRES_DB=taxi-postgresql\r\n          - POSTGRES_USER=user\r\n          - POSTGRES_PASSWORD=user\r\n          - POSTGRES_HOST_AUTH_METHOD=trust\r\n        command: postgres -c &#39;max_connections=1000&#39;\r\n        ports:\r\n          - 127.0.0.1:5432:5432","title":"org.postgresql.util.PSQLException: FATAL: sorry, too many clients already","body":"<p>I had postgres and other apps up in docker. I was facing this problem when more than ten apps connected to postgres database. The solution was to increase postgres max_connection count. This is 100 by default. To increase this value, either find max_connection in the /var/lib/pgsql/data/postgresql.conf file and edit it. Another way is to add and run the docker-compose.yml document as follows.</p>\n<pre><code>version: '3'\n\nservices:\n  taxi-postgresql:\n    container_name: my-postgresql\n    image: postgres:13.3\n    volumes:\n      - ./postgres-volume:/var/lib/postgresql/data\n    environment:\n      - POSTGRES_DB=taxi-postgresql\n      - POSTGRES_USER=user\n      - POSTGRES_PASSWORD=user\n      - POSTGRES_HOST_AUTH_METHOD=trust\n    command: postgres -c 'max_connections=1000'\n    ports:\n      - 127.0.0.1:5432:5432\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5032416,"reputation":2150,"user_id":4042213,"accept_rate":91,"display_name":"Ebraheem Alrabeea"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679397589,"creation_date":1676384227,"answer_id":75449122,"question_id":2757549,"body_markdown":"The same error appears in our microservices deployment, and it is solved by increasing concurrent connections in the Postgresql container:\r\n\r\n&gt; num_init_children","title":"org.postgresql.util.PSQLException: FATAL: sorry, too many clients already","body":"<p>The same error appears in our microservices deployment, and it is solved by increasing concurrent connections in the Postgresql container:</p>\n<blockquote>\n<p>num_init_children</p>\n</blockquote>\n"}],"owner":{"account_id":128134,"reputation":4619,"user_id":2405181,"accept_rate":67,"display_name":"lakshmi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":385379,"favorite_count":0,"down_vote_count":0,"up_vote_count":174,"accepted_answer_id":2758432,"answer_count":7,"score":174,"last_activity_date":1679397589,"creation_date":1272884473,"question_id":2757549,"body_markdown":"I am trying to connect to a Postgresql database, I am getting the following Error:\r\n\r\n&gt;Error:org.postgresql.util.PSQLException: FATAL: sorry, too many clients already\r\n\r\nWhat does the error mean and how do I fix it?\r\n\r\nMy `server.properties` file is following:\r\n\r\n    serverPortData=9042\r\n    serverPortCommand=9078\r\n    trackConnectionURL=jdbc:postgresql://127.0.0.1:5432/vTrack?user=postgres password=postgres\r\n    dst=1\r\n    DatabaseName=vTrack\r\n    ServerName=127.0.0.1\r\n    User=postgres\r\n    Password=admin\r\n    MaxConnections=90\r\n    InitialConnections=80\r\n    PoolSize=100\r\n    MaxPoolSize=100\r\n    KeepAliveTime=100\r\n    TrackPoolSize=120\r\n    TrackMaxPoolSize=120\r\n    TrackKeepAliveTime=100\r\n    PortNumber=5432\r\n    Logging=1\r\n","title":"org.postgresql.util.PSQLException: FATAL: sorry, too many clients already","body":"<p>I am trying to connect to a Postgresql database, I am getting the following Error:</p>\n\n<blockquote>\n  <p>Error:org.postgresql.util.PSQLException: FATAL: sorry, too many clients already</p>\n</blockquote>\n\n<p>What does the error mean and how do I fix it?</p>\n\n<p>My <code>server.properties</code> file is following:</p>\n\n<pre><code>serverPortData=9042\nserverPortCommand=9078\ntrackConnectionURL=jdbc:postgresql://127.0.0.1:5432/vTrack?user=postgres password=postgres\ndst=1\nDatabaseName=vTrack\nServerName=127.0.0.1\nUser=postgres\nPassword=admin\nMaxConnections=90\nInitialConnections=80\nPoolSize=100\nMaxPoolSize=100\nKeepAliveTime=100\nTrackPoolSize=120\nTrackMaxPoolSize=120\nTrackKeepAliveTime=100\nPortNumber=5432\nLogging=1\n</code></pre>\n"},{"tags":["java","apache-spark","kubernetes","apache-iceberg"],"owner":{"account_id":177220,"reputation":409,"user_id":408410,"accept_rate":40,"display_name":"Shivaprasad"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":125,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":0,"score":3,"last_activity_date":1679396835,"creation_date":1679395223,"question_id":75800127,"body_markdown":"I am trying to run a Spark job on a Kubernetes cluster and I need to add additional JARs required by my application (specifically JARs for Apache Iceberg and AWS SDK). Initially, I tried running my Spark job through spark-submit in cluster deploy mode and pointed the packages to be downloaded onto an NFS share so that both the driver and executors have access to it. Specifying the JARs in the network share as part of the extraClassPath option worked fine. You can find the configuration for spark-submit below.\r\n\r\n```bash\r\nspark-submit \\\r\n     --deploy-mode cluster --master k8s://https://10.164.64.27:6443 \\\r\n     --conf spark.kubernetes.namespace=spark-cluster \\\r\n     --conf spark.kubernetes.authenticate.driver.serviceAccountName=spark-sa \\\r\n     --name $1 --conf spark.executor.instances=$2 \\\r\n     --packages org.apache.spark:spark-sql-kafka-0-10_2.12:3.3.2,org.apache.iceberg:iceberg-spark-runtime-3.3_2.12:1.0.0,org.projectnessie:nessie-spark-extensions-3.3_2.12:0.44.0,software.amazon.awssdk:bundle:2.19.21,software.amazon.awssdk:url-connection-client:2.19.21 \\\r\n     --conf spark.driver.extraJavaOptions=-Divy.cache.dir=/tmp/spark-data/ \\\r\n     --conf spark.driver.extraJavaOptions=-Divy.home=/tmp/spark-data/ \\\r\n     --conf spark.executor.extraJavaOptions=-Divy.cache.dir=/tmp/spark-data/ \\\r\n     --conf spark.executor.extraJavaOptions=-Divy.home=/tmp/spark-data/ \\\r\n     --conf spark.executor.extraClassPath=local:///tmp/spark-data/jars/* \\\r\n     --conf spark.kubernetes.driver.container.image=apache/spark-py:v3.3.2 \\\r\n     --conf spark.kubernetes.executor.container.image=apache/spark-py:v3.3.2 ${@:3}\r\n```\r\n\r\nHere the network share was loaded at /tmp/spark-data\r\n\r\nNow, I am trying to deploy the same application in client mode (so that I can run the application in a Jupyter notebook). I was seeing that this worked fine, but was taking much longer to run in client mode. For example, the Spark job which was taking 4 seconds in cluster mode was now taking over 2 minutes. Digging a little deeper, we figured out the slow down was because the executors were now copying each JAR from the driver to the executor instead of using it directly from my network share as in cluster mode. I tried to build a Docker image as well with all the required JARs so that the drivers doesn&#39;t need to copy the JARs, but that didn&#39;t work either and the driver was still copying the JARs to the executors. Is there way to tell Spark to not copy the JARs in client mode and directly use the JARs on my network share or present locally on the Docker image?","title":"Prevent executors from copying JARs in client mode","body":"<p>I am trying to run a Spark job on a Kubernetes cluster and I need to add additional JARs required by my application (specifically JARs for Apache Iceberg and AWS SDK). Initially, I tried running my Spark job through spark-submit in cluster deploy mode and pointed the packages to be downloaded onto an NFS share so that both the driver and executors have access to it. Specifying the JARs in the network share as part of the extraClassPath option worked fine. You can find the configuration for spark-submit below.</p>\n<pre class=\"lang-bash prettyprint-override\"><code>spark-submit \\\n     --deploy-mode cluster --master k8s://https://10.164.64.27:6443 \\\n     --conf spark.kubernetes.namespace=spark-cluster \\\n     --conf spark.kubernetes.authenticate.driver.serviceAccountName=spark-sa \\\n     --name $1 --conf spark.executor.instances=$2 \\\n     --packages org.apache.spark:spark-sql-kafka-0-10_2.12:3.3.2,org.apache.iceberg:iceberg-spark-runtime-3.3_2.12:1.0.0,org.projectnessie:nessie-spark-extensions-3.3_2.12:0.44.0,software.amazon.awssdk:bundle:2.19.21,software.amazon.awssdk:url-connection-client:2.19.21 \\\n     --conf spark.driver.extraJavaOptions=-Divy.cache.dir=/tmp/spark-data/ \\\n     --conf spark.driver.extraJavaOptions=-Divy.home=/tmp/spark-data/ \\\n     --conf spark.executor.extraJavaOptions=-Divy.cache.dir=/tmp/spark-data/ \\\n     --conf spark.executor.extraJavaOptions=-Divy.home=/tmp/spark-data/ \\\n     --conf spark.executor.extraClassPath=local:///tmp/spark-data/jars/* \\\n     --conf spark.kubernetes.driver.container.image=apache/spark-py:v3.3.2 \\\n     --conf spark.kubernetes.executor.container.image=apache/spark-py:v3.3.2 ${@:3}\n</code></pre>\n<p>Here the network share was loaded at /tmp/spark-data</p>\n<p>Now, I am trying to deploy the same application in client mode (so that I can run the application in a Jupyter notebook). I was seeing that this worked fine, but was taking much longer to run in client mode. For example, the Spark job which was taking 4 seconds in cluster mode was now taking over 2 minutes. Digging a little deeper, we figured out the slow down was because the executors were now copying each JAR from the driver to the executor instead of using it directly from my network share as in cluster mode. I tried to build a Docker image as well with all the required JARs so that the drivers doesn't need to copy the JARs, but that didn't work either and the driver was still copying the JARs to the executors. Is there way to tell Spark to not copy the JARs in client mode and directly use the JARs on my network share or present locally on the Docker image?</p>\n"},{"tags":["java","eclipse","mybatis","dtd","mybatis-generator"],"comments":[{"owner":{"account_id":1314580,"reputation":3289,"user_id":1261766,"display_name":"ave"},"score":1,"creation_date":1677512659,"post_id":75581041,"comment_id":133347611,"body_markdown":"That error usually means that there is xerces.jar (file name could vary) in the classpath (possibly as a dependency of another library or included in some old container). Removing/excluding xerces may resolve the error. If this does not help, please post the full stack trace.","body":"That error usually means that there is xerces.jar (file name could vary) in the classpath (possibly as a dependency of another library or included in some old container). Removing/excluding xerces may resolve the error. If this does not help, please post the full stack trace."},{"owner":{"account_id":10456292,"reputation":25,"user_id":8237228,"display_name":"Cristian L&#243;pez Gonz&#225;lez"},"score":0,"creation_date":1677515590,"post_id":75581041,"comment_id":133348648,"body_markdown":"Hi @ave, how can I exclude the xerces.jar in a pluggin from Eclipse? I mean, I&#39;m using the MyBatis Generator directly from Eclipse. Just right clicking the flie and runing it with MyBatis Generator. If this case is possible, please can you share how can I exclude this xerces.jar from it? Thanks","body":"Hi @ave, how can I exclude the xerces.jar in a pluggin from Eclipse? I mean, I&#39;m using the MyBatis Generator directly from Eclipse. Just right clicking the flie and runing it with MyBatis Generator. If this case is possible, please can you share how can I exclude this xerces.jar from it? Thanks"},{"owner":{"account_id":1314580,"reputation":3289,"user_id":1261766,"display_name":"ave"},"score":0,"creation_date":1677521985,"post_id":75581041,"comment_id":133350541,"body_markdown":"Upgrade or remove the plugin if that&#39;s an option. Alternatively, you might be able to workaround the issue by configuring Launcher (see the &quot;MyBatis Generator User&#39;s Guide&quot; in the Eclipse Help).","body":"Upgrade or remove the plugin if that&#39;s an option. Alternatively, you might be able to workaround the issue by configuring Launcher (see the &quot;MyBatis Generator User&#39;s Guide&quot; in the Eclipse Help)."},{"owner":{"account_id":10657121,"reputation":991,"user_id":7846314,"display_name":"Jeff Butler"},"score":2,"creation_date":1677605790,"post_id":75581041,"comment_id":133369755,"body_markdown":"MyBatis Generator does not support these versions of Eclipse and Java. The minimum Eclipse version is 2021-06 and minimum Java is Java 11. I don&#39;t know if that is the cause of these issues, but I would suggest upgrading to supported versions as a start.","body":"MyBatis Generator does not support these versions of Eclipse and Java. The minimum Eclipse version is 2021-06 and minimum Java is Java 11. I don&#39;t know if that is the cause of these issues, but I would suggest upgrading to supported versions as a start."}],"answers":[{"tags":[],"owner":{"account_id":10456292,"reputation":25,"user_id":8237228,"display_name":"Cristian L&#243;pez Gonz&#225;lez"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679396751,"creation_date":1679396751,"answer_id":75800388,"question_id":75581041,"body_markdown":"The problem was (as commented by Jeff) that my Eclipse version was not compatible with MyBatis.\r\n\r\nTo solve the issue, the solution was to easily switch to Eclipse version 2021-06.","title":"MyBatisGenerator failed to run with &#39;http://javax.xml.XMLConstants/property/accessExternalDTD&#39; is not recognized","body":"<p>The problem was (as commented by Jeff) that my Eclipse version was not compatible with MyBatis.</p>\n<p>To solve the issue, the solution was to easily switch to Eclipse version 2021-06.</p>\n"}],"owner":{"account_id":10456292,"reputation":25,"user_id":8237228,"display_name":"Cristian L&#243;pez Gonz&#225;lez"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":271,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1679396751,"creation_date":1677504143,"question_id":75581041,"body_markdown":"I&#39;m trying to use MyBatis Generator version 1.4.2 in Eclipse 2020-03 with Java 1.8.0_111. I just created a data base locally and trying to create some mappers from the config.xml:\r\n\r\n\r\n&gt;  \r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;!DOCTYPE generatorConfiguration PUBLIC &quot;-//mybatis.org//DTD MyBatis Generator Configuration 1.0//EN&quot; \r\n    &quot;http://mybatis.org/dtd/mybatis-generator-config_1_0.dtd&quot;&gt;\r\n    &lt;generatorConfiguration&gt;\r\n     &lt;classPathEntry location=&quot;C:\\Users\\.m2\\repository\\com\\mysql\\mysql-connector-j\\8.0.31\\mysql-connector-j-8.0.31-sources.jar&quot;/&gt;\r\n          &lt;context id=&quot;Comerzzia&quot; targetRuntime=&quot;MyBatis3&quot;&gt;\r\n          \r\n            &lt;plugin type=&quot;org.mybatis.generator.plugins.CaseInsensitiveLikePlugin&quot;/&gt;\r\n            &lt;plugin type=&quot;org.mybatis.generator.plugins.RowBoundsPlugin&quot;/&gt;\r\n          \r\n            &lt;commentGenerator&gt;\r\n                &lt;property name=&quot;suppressAllComments&quot; value=&quot;true&quot;/&gt;\r\n            &lt;/commentGenerator&gt;    \r\n                \r\n            &lt;jdbcConnection connectionURL=&quot;jdbc:mysql://localhost:3306/xxx&quot; \r\n                driverClass=&quot;com.mysql.jdbc.Driver&quot; \r\n                password=&quot;fuego&quot; \r\n                userId=&quot;xxxx&quot; /&gt;\r\n                \r\n            &lt;javaModelGenerator targetPackage=&quot;com.comerzzia.fundgrube.backoffice.persistence.lenguajes&quot; \r\n                targetProject=&quot;backoffice-services/src/main/java&quot; &gt;\r\n                &lt;property name=&quot;enableSubPackages&quot; value=&quot;false&quot; /&gt;\r\n                  &lt;property name=&quot;trimStrings&quot; value=&quot;true&quot; /&gt;\r\n            &lt;/javaModelGenerator&gt;\r\n                \r\n            &lt;sqlMapGenerator targetPackage=&quot;com.backoffice.persistence.lenguajes&quot; \r\n                targetProject=&quot;backoffice-services/src/main/java&quot;&gt;\r\n                &lt;property name=&quot;enableSubPackages&quot; value=&quot;false&quot; /&gt;\r\n            &lt;/sqlMapGenerator&gt;\r\n                \r\n            &lt;javaClientGenerator targetPackage=&quot;com.backoffice.persistence.lenguajes&quot; \r\n                targetProject=&quot;backoffice-services/src/main/java&quot; type=&quot;XMLMAPPER&quot; &gt;\r\n                &lt;property name=&quot;enableSubPackages&quot; value=&quot;false&quot; /&gt;\r\n            &lt;/javaClientGenerator&gt;\r\n                \r\n            &lt;table tableName=&quot;d_lenguajes_tbl&quot; domainObjectName=&quot;Lenguaje&quot;&gt;\r\n            &lt;/table&gt;\r\n         &lt;/context&gt;\r\n    &lt;/generatorConfiguration&gt;\r\n\r\n       \r\n\r\n\r\nEvery time I run this I get some errors about accessExternalDTD not geting recognized. I saw in some forums that people try to add javax to their projects, but how can I add this javax to a pluging from Eclipse? Is there another way to solve this issue with MyBatis Generator?\r\n\r\nThanks in advance.","title":"MyBatisGenerator failed to run with &#39;http://javax.xml.XMLConstants/property/accessExternalDTD&#39; is not recognized","body":"<p>I'm trying to use MyBatis Generator version 1.4.2 in Eclipse 2020-03 with Java 1.8.0_111. I just created a data base locally and trying to create some mappers from the config.xml:</p>\n<blockquote>\n</blockquote>\n\n<pre><code>&lt;!DOCTYPE generatorConfiguration PUBLIC &quot;-//mybatis.org//DTD MyBatis Generator Configuration 1.0//EN&quot; \n&quot;http://mybatis.org/dtd/mybatis-generator-config_1_0.dtd&quot;&gt;\n&lt;generatorConfiguration&gt;\n &lt;classPathEntry location=&quot;C:\\Users\\.m2\\repository\\com\\mysql\\mysql-connector-j\\8.0.31\\mysql-connector-j-8.0.31-sources.jar&quot;/&gt;\n      &lt;context id=&quot;Comerzzia&quot; targetRuntime=&quot;MyBatis3&quot;&gt;\n      \n        &lt;plugin type=&quot;org.mybatis.generator.plugins.CaseInsensitiveLikePlugin&quot;/&gt;\n        &lt;plugin type=&quot;org.mybatis.generator.plugins.RowBoundsPlugin&quot;/&gt;\n      \n        &lt;commentGenerator&gt;\n            &lt;property name=&quot;suppressAllComments&quot; value=&quot;true&quot;/&gt;\n        &lt;/commentGenerator&gt;    \n            \n        &lt;jdbcConnection connectionURL=&quot;jdbc:mysql://localhost:3306/xxx&quot; \n            driverClass=&quot;com.mysql.jdbc.Driver&quot; \n            password=&quot;fuego&quot; \n            userId=&quot;xxxx&quot; /&gt;\n            \n        &lt;javaModelGenerator targetPackage=&quot;com.comerzzia.fundgrube.backoffice.persistence.lenguajes&quot; \n            targetProject=&quot;backoffice-services/src/main/java&quot; &gt;\n            &lt;property name=&quot;enableSubPackages&quot; value=&quot;false&quot; /&gt;\n              &lt;property name=&quot;trimStrings&quot; value=&quot;true&quot; /&gt;\n        &lt;/javaModelGenerator&gt;\n            \n        &lt;sqlMapGenerator targetPackage=&quot;com.backoffice.persistence.lenguajes&quot; \n            targetProject=&quot;backoffice-services/src/main/java&quot;&gt;\n            &lt;property name=&quot;enableSubPackages&quot; value=&quot;false&quot; /&gt;\n        &lt;/sqlMapGenerator&gt;\n            \n        &lt;javaClientGenerator targetPackage=&quot;com.backoffice.persistence.lenguajes&quot; \n            targetProject=&quot;backoffice-services/src/main/java&quot; type=&quot;XMLMAPPER&quot; &gt;\n            &lt;property name=&quot;enableSubPackages&quot; value=&quot;false&quot; /&gt;\n        &lt;/javaClientGenerator&gt;\n            \n        &lt;table tableName=&quot;d_lenguajes_tbl&quot; domainObjectName=&quot;Lenguaje&quot;&gt;\n        &lt;/table&gt;\n     &lt;/context&gt;\n&lt;/generatorConfiguration&gt;\n\n   \n</code></pre>\n<p>Every time I run this I get some errors about accessExternalDTD not geting recognized. I saw in some forums that people try to add javax to their projects, but how can I add this javax to a pluging from Eclipse? Is there another way to solve this issue with MyBatis Generator?</p>\n<p>Thanks in advance.</p>\n"},{"tags":["java","spring","spring-boot","jvm","graalvm"],"answers":[{"tags":[],"owner":{"account_id":4069384,"reputation":607,"user_id":3406925,"accept_rate":83,"display_name":"Maarten Dhondt"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1608118384,"creation_date":1608118384,"answer_id":65322449,"question_id":64699000,"body_markdown":"`spring-boot-parent` used to have the flag set in the `maven-compiler-plugin` up until the [2.2.x][1] version.\r\n\r\nYou&#39;ll have to add the flag yourself to the `maven-compiler-plugin`:\r\n\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;3.8.1&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;parameters&gt;true&lt;/parameters&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n\r\n\r\n  [1]: https://github.com/spring-projects/spring-boot/blob/2.2.x/spring-boot-project/spring-boot-parent/pom.xml#L392","title":"JavaBeanExecutable HV000254 missing parameter metadata for Java Enum","body":"<p><code>spring-boot-parent</code> used to have the flag set in the <code>maven-compiler-plugin</code> up until the <a href=\"https://github.com/spring-projects/spring-boot/blob/2.2.x/spring-boot-project/spring-boot-parent/pom.xml#L392\" rel=\"noreferrer\">2.2.x</a> version.</p>\n<p>You'll have to add the flag yourself to the <code>maven-compiler-plugin</code>:</p>\n<pre><code>&lt;build&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n            &lt;version&gt;3.8.1&lt;/version&gt;\n            &lt;configuration&gt;\n                &lt;parameters&gt;true&lt;/parameters&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n&lt;/build&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":173186,"reputation":4270,"user_id":401712,"display_name":"Dario Seidl"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1679395966,"creation_date":1643735202,"answer_id":70944629,"question_id":64699000,"body_markdown":"The other answer explains how to get rid of the warning, by compiling with the `-paramaters` flag in Maven. With Spring Boot 2 you [don&#39;t need to do that anymore](https://stackoverflow.com/questions/31845676/how-to-compile-spring-boot-applications-with-java-8-parameter-flag/49316086#49316086) (neither with Maven nor Gradle).\r\n\r\nIf you&#39;re still getting warnings for enum constants, that seems to be [a bug of Hibernate Validator](https://hibernate.atlassian.net/browse/HV-1852).","title":"JavaBeanExecutable HV000254 missing parameter metadata for Java Enum","body":"<p>The other answer explains how to get rid of the warning, by compiling with the <code>-paramaters</code> flag in Maven. With Spring Boot 2 you <a href=\"https://stackoverflow.com/questions/31845676/how-to-compile-spring-boot-applications-with-java-8-parameter-flag/49316086#49316086\">don't need to do that anymore</a> (neither with Maven nor Gradle).</p>\n<p>If you're still getting warnings for enum constants, that seems to be <a href=\"https://hibernate.atlassian.net/browse/HV-1852\" rel=\"nofollow noreferrer\">a bug of Hibernate Validator</a>.</p>\n"}],"owner":{"account_id":1488695,"reputation":672,"user_id":1396346,"accept_rate":89,"display_name":"ielkhalloufi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9702,"favorite_count":0,"down_vote_count":0,"up_vote_count":17,"answer_count":2,"score":17,"last_activity_date":1679395966,"creation_date":1604585673,"question_id":64699000,"body_markdown":"I upgraded my spring boot application from 1.5 to 2.3.5 (using the spring boot gradle plugin). When the spring boot application starts, I get the following warning 4 times:\r\n\r\n&gt; 2020-11-05 13:29:19.432  WARN 3931 --- [nio-8080-exec-4]\r\n&gt; o.h.v.i.p.javabean.JavaBeanExecutable    : HV000254: Missing parameter\r\n&gt; metadata for FacetField(String, int, String, String, String, int,\r\n&gt; Class), which declares implicit or synthetic parameters. Automatic\r\n&gt; resolution of generic type information for method parameters may yield\r\n&gt; incorrect results if multiple parameters have the same erasure. To\r\n&gt; solve this, compile your code with the &#39;-parameters&#39; flag.\r\n\r\nMy FacetField enum looks like this:\r\n\r\n    public enum FacetField {\r\n    \r\n        CONST_1(&quot;KEY&quot;, &quot;ESFIELD&quot;, &quot;RESOURCEKEY&quot;),\r\n        CONST_2(&quot;KEY&quot;, &quot;ESFIELD&quot;, &quot;RESOURCEKEY&quot;),\r\n        CONST_3(&quot;KEY&quot;, &quot;ESFIELD&quot;, &quot;&quot;),\r\n    \r\n        CONST_4(&quot;KEY&quot;, &quot;ESFIELD&quot;, &quot;ESMAXFIELD&quot;, &quot;RESOURCEKEY&quot;, Hours.class),\r\n        CONST_5(&quot;KEY&quot;, &quot;ESFIELD&quot;, &quot;RESOURCEKEY&quot;, Experience.class),\r\n        CONST_6(&quot;KEY&quot;, &quot;ESFIELD&quot;, &quot;&quot;, Distance.class);\r\n    \r\n        private String key;\r\n        private String esField;\r\n        private String esMaxField;\r\n        private String resourcekey;\r\n        private Class&lt;? extends RangeFacet&gt; rangeFacet;\r\n    \r\n        FacetField(final String key, final String esField, final String resourcekey) {\r\n            this.key = key;\r\n            this.esField = esField;\r\n            this.resourcekey = resourcekey;\r\n            this.rangeFacet = null;\r\n        }\r\n    \r\n        FacetField(final String key, final String esField, final String resourcekey, final Class&lt;? extends RangeFacet&gt; rangeFacet) {\r\n            this.key = key;\r\n            this.esField = esField;\r\n            this.resourcekey = resourcekey;\r\n            this.rangeFacet = rangeFacet;\r\n        }\r\n    \r\n        FacetField(final String key, final String esMinField, final String esMaxField, final String resourcekey, final Class&lt;? extends RangeFacet&gt; rangeFacet) {\r\n            this.key = key;\r\n            this.esField = esMinField;\r\n            this.esMaxField = esMaxField;\r\n            this.resourcekey = resourcekey;\r\n            this.rangeFacet = rangeFacet;\r\n        }\r\n    \r\n    \r\n        public String getKey() {\r\n            return key;\r\n        }\r\n    \r\n        public String getEsField(final FieldProperty fieldProperty) {\r\n            return esField + fieldProperty.getEsFieldProperty();\r\n        }\r\n    \r\n        public String getEsMinField() {\r\n            return esField;\r\n        }\r\n    \r\n        public String getEsMaxField() {\r\n            return esMaxField;\r\n        }\r\n    \r\n        public String getResourcekey() {\r\n            return resourcekey;\r\n        }\r\n    \r\n        public enum Distance implements RangeFacet {\r\n    \r\n            FROM_0_TO_5(0d, 5d, &quot;5&quot;),\r\n            FROM_0_TO_10(0d, 10d, &quot;10&quot;),\r\n            FROM_0_TO_20(0d, 20d, &quot;20&quot;),\r\n            FROM_0_TO_30(0d, 30d, &quot;30&quot;),\r\n            FROM_0_TO_50(0d, 50d, &quot;50&quot;);\r\n    \r\n            private final Double min;\r\n            private final Double max;\r\n            private final String selectableDescription;\r\n    \r\n            Distance(final Double min, final Double max, final String selectableDescription) {\r\n                this.min = min;\r\n                this.max = max;\r\n                this.selectableDescription = selectableDescription;\r\n            }\r\n    \r\n            @Override\r\n            public Double getMin() {\r\n                return this.min;\r\n            }\r\n    \r\n            @Override\r\n            public Double getMax() {\r\n                return this.max;\r\n            }\r\n    \r\n            @Override\r\n            public String getSelectableDescription() {\r\n                return this.selectableDescription;\r\n            }\r\n        }\r\n    \r\n        public enum Experience implements RangeFacet {\r\n    \r\n            TO_1(0d, 1d, &quot;1&quot;),\r\n            FROM_1_TO_2(1d, 2d, &quot;2&quot;),\r\n            FROM_2_TO_5(2d, 5d, &quot;5&quot;),\r\n            FROM_5_TO_10(5d, 10d, &quot;10&quot;),\r\n            FROM_10(10d, null, &quot;10+&quot;);\r\n    \r\n            private final Double min;\r\n            private final Double max;\r\n            private final String selectableDescription;\r\n    \r\n            Experience(final Double min, final Double max, final String selectableDescription) {\r\n                this.min = min;\r\n                this.max = max;\r\n                this.selectableDescription = selectableDescription;\r\n            }\r\n    \r\n            @Override\r\n            public Double getMin() {\r\n                return this.min;\r\n            }\r\n    \r\n            @Override\r\n            public Double getMax() {\r\n                return this.max;\r\n            }\r\n    \r\n            @Override\r\n            public String getSelectableDescription() {\r\n                return this.selectableDescription;\r\n            }\r\n        }\r\n    \r\n        public enum Hours implements RangeFacet {\r\n    \r\n            FROM_0_TO_8(0d, 8d, &quot;8&quot;),\r\n            FROM_9_TO_16(9d, 16d, &quot;16&quot;),\r\n            FROM_17_TO_24(17d, 24d, &quot;24&quot;),\r\n            FROM_25_TO_32(25d, 32d, &quot;32&quot;),\r\n            FROM_33_TO_36(33d, 36d, &quot;36&quot;),\r\n            FROM_37(37d, null, &quot;40&quot;);\r\n    \r\n            private final Double min;\r\n            private final Double max;\r\n            private final String selectableDescription;\r\n            \r\n            Hours(final Double min, final Double max, final String selectableDescription) {\r\n                this.min = min;\r\n                this.max = max;\r\n                this.selectableDescription = selectableDescription;\r\n            }\r\n    \r\n            @Override\r\n            public Double getMin() {\r\n                return this.min;\r\n            }\r\n    \r\n            @Override\r\n            public Double getMax() {\r\n                return this.max;\r\n            }\r\n    \r\n            @Override\r\n            public String getSelectableDescription() {\r\n                return this.selectableDescription;\r\n            }\r\n        }\r\n    \r\n    }\r\n\r\nOnly thing that I can find something related to this, is this graal issue on github: https://github.com/oracle/graal/issues/1941\r\n\r\nCan somebody explain?","title":"JavaBeanExecutable HV000254 missing parameter metadata for Java Enum","body":"<p>I upgraded my spring boot application from 1.5 to 2.3.5 (using the spring boot gradle plugin). When the spring boot application starts, I get the following warning 4 times:</p>\n<blockquote>\n<p>2020-11-05 13:29:19.432  WARN 3931 --- [nio-8080-exec-4]\no.h.v.i.p.javabean.JavaBeanExecutable    : HV000254: Missing parameter\nmetadata for FacetField(String, int, String, String, String, int,\nClass), which declares implicit or synthetic parameters. Automatic\nresolution of generic type information for method parameters may yield\nincorrect results if multiple parameters have the same erasure. To\nsolve this, compile your code with the '-parameters' flag.</p>\n</blockquote>\n<p>My FacetField enum looks like this:</p>\n<pre><code>public enum FacetField {\n\n    CONST_1(&quot;KEY&quot;, &quot;ESFIELD&quot;, &quot;RESOURCEKEY&quot;),\n    CONST_2(&quot;KEY&quot;, &quot;ESFIELD&quot;, &quot;RESOURCEKEY&quot;),\n    CONST_3(&quot;KEY&quot;, &quot;ESFIELD&quot;, &quot;&quot;),\n\n    CONST_4(&quot;KEY&quot;, &quot;ESFIELD&quot;, &quot;ESMAXFIELD&quot;, &quot;RESOURCEKEY&quot;, Hours.class),\n    CONST_5(&quot;KEY&quot;, &quot;ESFIELD&quot;, &quot;RESOURCEKEY&quot;, Experience.class),\n    CONST_6(&quot;KEY&quot;, &quot;ESFIELD&quot;, &quot;&quot;, Distance.class);\n\n    private String key;\n    private String esField;\n    private String esMaxField;\n    private String resourcekey;\n    private Class&lt;? extends RangeFacet&gt; rangeFacet;\n\n    FacetField(final String key, final String esField, final String resourcekey) {\n        this.key = key;\n        this.esField = esField;\n        this.resourcekey = resourcekey;\n        this.rangeFacet = null;\n    }\n\n    FacetField(final String key, final String esField, final String resourcekey, final Class&lt;? extends RangeFacet&gt; rangeFacet) {\n        this.key = key;\n        this.esField = esField;\n        this.resourcekey = resourcekey;\n        this.rangeFacet = rangeFacet;\n    }\n\n    FacetField(final String key, final String esMinField, final String esMaxField, final String resourcekey, final Class&lt;? extends RangeFacet&gt; rangeFacet) {\n        this.key = key;\n        this.esField = esMinField;\n        this.esMaxField = esMaxField;\n        this.resourcekey = resourcekey;\n        this.rangeFacet = rangeFacet;\n    }\n\n\n    public String getKey() {\n        return key;\n    }\n\n    public String getEsField(final FieldProperty fieldProperty) {\n        return esField + fieldProperty.getEsFieldProperty();\n    }\n\n    public String getEsMinField() {\n        return esField;\n    }\n\n    public String getEsMaxField() {\n        return esMaxField;\n    }\n\n    public String getResourcekey() {\n        return resourcekey;\n    }\n\n    public enum Distance implements RangeFacet {\n\n        FROM_0_TO_5(0d, 5d, &quot;5&quot;),\n        FROM_0_TO_10(0d, 10d, &quot;10&quot;),\n        FROM_0_TO_20(0d, 20d, &quot;20&quot;),\n        FROM_0_TO_30(0d, 30d, &quot;30&quot;),\n        FROM_0_TO_50(0d, 50d, &quot;50&quot;);\n\n        private final Double min;\n        private final Double max;\n        private final String selectableDescription;\n\n        Distance(final Double min, final Double max, final String selectableDescription) {\n            this.min = min;\n            this.max = max;\n            this.selectableDescription = selectableDescription;\n        }\n\n        @Override\n        public Double getMin() {\n            return this.min;\n        }\n\n        @Override\n        public Double getMax() {\n            return this.max;\n        }\n\n        @Override\n        public String getSelectableDescription() {\n            return this.selectableDescription;\n        }\n    }\n\n    public enum Experience implements RangeFacet {\n\n        TO_1(0d, 1d, &quot;1&quot;),\n        FROM_1_TO_2(1d, 2d, &quot;2&quot;),\n        FROM_2_TO_5(2d, 5d, &quot;5&quot;),\n        FROM_5_TO_10(5d, 10d, &quot;10&quot;),\n        FROM_10(10d, null, &quot;10+&quot;);\n\n        private final Double min;\n        private final Double max;\n        private final String selectableDescription;\n\n        Experience(final Double min, final Double max, final String selectableDescription) {\n            this.min = min;\n            this.max = max;\n            this.selectableDescription = selectableDescription;\n        }\n\n        @Override\n        public Double getMin() {\n            return this.min;\n        }\n\n        @Override\n        public Double getMax() {\n            return this.max;\n        }\n\n        @Override\n        public String getSelectableDescription() {\n            return this.selectableDescription;\n        }\n    }\n\n    public enum Hours implements RangeFacet {\n\n        FROM_0_TO_8(0d, 8d, &quot;8&quot;),\n        FROM_9_TO_16(9d, 16d, &quot;16&quot;),\n        FROM_17_TO_24(17d, 24d, &quot;24&quot;),\n        FROM_25_TO_32(25d, 32d, &quot;32&quot;),\n        FROM_33_TO_36(33d, 36d, &quot;36&quot;),\n        FROM_37(37d, null, &quot;40&quot;);\n\n        private final Double min;\n        private final Double max;\n        private final String selectableDescription;\n        \n        Hours(final Double min, final Double max, final String selectableDescription) {\n            this.min = min;\n            this.max = max;\n            this.selectableDescription = selectableDescription;\n        }\n\n        @Override\n        public Double getMin() {\n            return this.min;\n        }\n\n        @Override\n        public Double getMax() {\n            return this.max;\n        }\n\n        @Override\n        public String getSelectableDescription() {\n            return this.selectableDescription;\n        }\n    }\n\n}\n</code></pre>\n<p>Only thing that I can find something related to this, is this graal issue on github: <a href=\"https://github.com/oracle/graal/issues/1941\" rel=\"noreferrer\">https://github.com/oracle/graal/issues/1941</a></p>\n<p>Can somebody explain?</p>\n"},{"tags":["java","android","enums"],"answers":[{"tags":[],"owner":{"account_id":1485367,"reputation":122993,"user_id":1393766,"display_name":"Pshemo"},"down_vote_count":0,"up_vote_count":128,"is_accepted":true,"score":128,"last_activity_date":1677150765,"creation_date":1363363010,"answer_id":15436799,"question_id":15436721,"body_markdown":"Not sure if I understand you correctly but based on question title you may be looking for\r\n\r\n    YourEnum.valueOf(&quot;VALUE&quot;).ordinal(); \r\n    //like Directions.valueOf(&quot;NORTH&quot;).ordinal();\r\n\r\n1. `YourEnum.valueOf(&quot;VALUE&quot;)` returns enum *value* with name `&quot;VALUE&quot;`\r\n2. each enum *value* knows its position (indexed from zero) which we can get by calling `ordinal()` method on it.","title":"Get index of enum from string?","body":"<p>Not sure if I understand you correctly but based on question title you may be looking for</p>\n<pre><code>YourEnum.valueOf(&quot;VALUE&quot;).ordinal(); \n//like Directions.valueOf(&quot;NORTH&quot;).ordinal();\n</code></pre>\n<ol>\n<li><code>YourEnum.valueOf(&quot;VALUE&quot;)</code> returns enum <em>value</em> with name <code>&quot;VALUE&quot;</code></li>\n<li>each enum <em>value</em> knows its position (indexed from zero) which we can get by calling <code>ordinal()</code> method on it.</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":2488140,"reputation":1626,"user_id":2166181,"accept_rate":79,"display_name":"Alban Dericbourg"},"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1363363068,"creation_date":1363363068,"answer_id":15436827,"question_id":15436721,"body_markdown":"I might not understand you question, but the same code works for enums too:\r\n\r\n    int index = Arrays.asList(YourEnum.values()).indexOf(YourEnum.ENUM_ITEM);\r\n\r\nOr you can get:\r\n\r\n    int index = YourEnum.valueOf(&quot;ENUM_ITEM&quot;).ordinal();","title":"Get index of enum from string?","body":"<p>I might not understand you question, but the same code works for enums too:</p>\n\n<pre><code>int index = Arrays.asList(YourEnum.values()).indexOf(YourEnum.ENUM_ITEM);\n</code></pre>\n\n<p>Or you can get:</p>\n\n<pre><code>int index = YourEnum.valueOf(\"ENUM_ITEM\").ordinal();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2362700,"reputation":1659,"user_id":2069044,"accept_rate":53,"display_name":"Divya Motiwala"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1363363348,"creation_date":1363363348,"answer_id":15436934,"question_id":15436721,"body_markdown":"If you want to retrieve the index, you can use ordinal. If you want to assign some specific value to String, you may define your own method to retrieve it.\r\n\r\n\r\n     enum DAY\r\n     {\r\n      MONDAY(10),\r\n      TUESDAY(20);\r\n      int value;\r\n      DAY(int x)\r\n      {\r\n       this.value = x;\r\n      }\r\n      public int getValue()\r\n      {\r\n\t\treturn value;\r\n       }\r\n\r\nNow value and ordinal can be retrieved as :\r\n\r\n\r\n\t\tfor(DAY s : DAY.values() )\r\n\t\t{\r\n\t\t\tSystem.out.println(s.ordinal());\r\n\t\t\tSystem.out.println(s.getValue());\r\n\t\t}\r\n","title":"Get index of enum from string?","body":"<p>If you want to retrieve the index, you can use ordinal. If you want to assign some specific value to String, you may define your own method to retrieve it.</p>\n\n<pre><code> enum DAY\n {\n  MONDAY(10),\n  TUESDAY(20);\n  int value;\n  DAY(int x)\n  {\n   this.value = x;\n  }\n  public int getValue()\n  {\n    return value;\n   }\n</code></pre>\n\n<p>Now value and ordinal can be retrieved as :</p>\n\n<pre><code>    for(DAY s : DAY.values() )\n    {\n        System.out.println(s.ordinal());\n        System.out.println(s.getValue());\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10993591,"reputation":25,"user_id":8076600,"display_name":"anshul6297"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1497593652,"creation_date":1497593652,"answer_id":44582012,"question_id":15436721,"body_markdown":"The following logic will also work.\r\n\r\nIf you want to  check and you know the fruitname already don&#39;t use for loop go with the approach mentioned by Pshemo\r\n\r\n    for (Fruit aFruit : aFruits)\r\n               if (aFruit.name().equals(aName))\r\n                   return aFruit.ordinal();","title":"Get index of enum from string?","body":"<p>The following logic will also work.</p>\n\n<p>If you want to  check and you know the fruitname already don't use for loop go with the approach mentioned by Pshemo</p>\n\n<pre><code>for (Fruit aFruit : aFruits)\n           if (aFruit.name().equals(aName))\n               return aFruit.ordinal();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10239428,"reputation":81,"user_id":7557300,"display_name":"Sathishkumar J"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1497964726,"creation_date":1497958980,"answer_id":44652132,"question_id":15436721,"body_markdown":"Try this simple solution:\r\n\r\n    Fruit.values()[index]","title":"Get index of enum from string?","body":"<p>Try this simple solution:</p>\n\n<pre><code>Fruit.values()[index]\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11111440,"reputation":51,"user_id":11747039,"display_name":"Nidhin Mahesh A"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1666093830,"creation_date":1666093830,"answer_id":74110497,"question_id":15436721,"body_markdown":"Adding here the solution that worked for me:\r\n\r\n    YourEnum.values.indexOf(&quot;VALUE&quot;);","title":"Get index of enum from string?","body":"<p>Adding here the solution that worked for me:</p>\n<pre><code>YourEnum.values.indexOf(&quot;VALUE&quot;);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10633558,"reputation":3699,"user_id":7830903,"accept_rate":40,"display_name":"Gowtham Sooryaraj"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1679395752,"creation_date":1679395752,"answer_id":75800217,"question_id":15436721,"body_markdown":"It&#39;s really simple \r\n\r\n    TestEnum test = TestEnum.c;\r\n    log(test.index.toString());\r\n\r\n    enum TestEnum{\r\n      c,d\r\n    }\r\n\r\n","title":"Get index of enum from string?","body":"<p>It's really simple</p>\n<pre><code>TestEnum test = TestEnum.c;\nlog(test.index.toString());\n\nenum TestEnum{\n  c,d\n}\n</code></pre>\n"}],"owner":{"account_id":2015638,"reputation":5854,"user_id":1803007,"accept_rate":76,"display_name":"Paul"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":99579,"favorite_count":0,"down_vote_count":1,"up_vote_count":42,"accepted_answer_id":15436799,"answer_count":7,"score":41,"last_activity_date":1679395752,"creation_date":1363362767,"question_id":15436721,"body_markdown":"I have a string value, I also have an array of strings and an enum containing the range also.\r\nTo get the index of the string in the array, from the value supplied I write this:\r\n\r\n    Arrays.asList(myClass.BAUD_RATES).indexOf(username)\r\n\r\nHow do I do this for an enum? Can I use ordinal? Or do i have to make my own method?\r\n\r\n\r\nThe method might go like:\r\n\r\n    public enum Fruit {\r\n       ...\r\n       static public boolean isMember(String aName) {\r\n           Fruit[] aFruits = Fruit.values();\r\n           for (Fruit aFruit : aFruits)\r\n               if (aFruit.fruitname.equals(aName))\r\n                   return aFruit;\r\n           return false;\r\n       }\r\n       ...\r\n    }","title":"Get index of enum from string?","body":"<p>I have a string value, I also have an array of strings and an enum containing the range also.\nTo get the index of the string in the array, from the value supplied I write this:</p>\n\n<pre><code>Arrays.asList(myClass.BAUD_RATES).indexOf(username)\n</code></pre>\n\n<p>How do I do this for an enum? Can I use ordinal? Or do i have to make my own method?</p>\n\n<p>The method might go like:</p>\n\n<pre><code>public enum Fruit {\n   ...\n   static public boolean isMember(String aName) {\n       Fruit[] aFruits = Fruit.values();\n       for (Fruit aFruit : aFruits)\n           if (aFruit.fruitname.equals(aName))\n               return aFruit;\n       return false;\n   }\n   ...\n}\n</code></pre>\n"},{"tags":["java","spring-data-mongodb"],"comments":[{"owner":{"account_id":3175948,"reputation":74316,"user_id":2683814,"accept_rate":100,"display_name":"s7vr"},"score":0,"creation_date":1480085054,"post_id":40807316,"comment_id":68835581,"body_markdown":"docs.spring.io/spring-data/data-mongo/docs/current/api/org/springframework/data/mongodb/core/query/Criteria.html. `is(Object o)` is your equality operator.","body":"docs.spring.io/spring-data/data-mongo/docs/current/api/org/s&zwnj;&#8203;pringframework/data/&zwnj;&#8203;mongodb/core/query/C&zwnj;&#8203;riteria.html. <code>is(Object o)</code> is your equality operator."},{"owner":{"account_id":6411872,"reputation":123,"user_id":4971385,"display_name":"Roman  Hrytsyshyn"},"score":0,"creation_date":1480085236,"post_id":40807316,"comment_id":68835694,"body_markdown":"@Veeram `is` generates query `{ &quot;name&quot; : &quot;John&quot;}`  but I need `{&quot;name&quot;: {&quot;$eq&quot;: &quot;John&quot;}}`","body":"@Veeram <code>is</code> generates query <code>{ &quot;name&quot; : &quot;John&quot;}</code>  but I need <code>{&quot;name&quot;: {&quot;$eq&quot;: &quot;John&quot;}}</code>"},{"owner":{"account_id":3175948,"reputation":74316,"user_id":2683814,"accept_rate":100,"display_name":"s7vr"},"score":0,"creation_date":1480085488,"post_id":40807316,"comment_id":68835841,"body_markdown":"it&#39;s the same. It&#39;s implicit equals. https://docs.mongodb.com/manual/reference/operator/query/eq/. Check the examples.","body":"it&#39;s the same. It&#39;s implicit equals. <a href=\"https://docs.mongodb.com/manual/reference/operator/query/eq/\" rel=\"nofollow noreferrer\">docs.mongodb.com/manual/reference/operator/query/eq</a>. Check the examples."},{"owner":{"account_id":6411872,"reputation":123,"user_id":4971385,"display_name":"Roman  Hrytsyshyn"},"score":0,"creation_date":1480086105,"post_id":40807316,"comment_id":68836224,"body_markdown":"@Veeram ohh, thanks a lot, I got it! so does Criteria cover all mongo operations and there isn&#39;t need in defining custom ones, yep?","body":"@Veeram ohh, thanks a lot, I got it! so does Criteria cover all mongo operations and there isn&#39;t need in defining custom ones, yep?"},{"owner":{"account_id":3175948,"reputation":74316,"user_id":2683814,"accept_rate":100,"display_name":"s7vr"},"score":0,"creation_date":1480086168,"post_id":40807316,"comment_id":68836270,"body_markdown":"No worries. Not for the case you mentioned.","body":"No worries. Not for the case you mentioned."},{"owner":{"account_id":6411872,"reputation":123,"user_id":4971385,"display_name":"Roman  Hrytsyshyn"},"score":0,"creation_date":1480086343,"post_id":40807316,"comment_id":68836361,"body_markdown":"@Veeram hah, ok, but in general?","body":"@Veeram hah, ok, but in general?"},{"owner":{"account_id":3175948,"reputation":74316,"user_id":2683814,"accept_rate":100,"display_name":"s7vr"},"score":0,"creation_date":1480086564,"post_id":40807316,"comment_id":68836490,"body_markdown":"You may need it in cases spring doesn&#39;t support the latest mongo version and you can still upgrade to mongo  driver to latest version while keeping the same spring mongo db version and then create expression to use operator from latest mongo version that you want to use.","body":"You may need it in cases spring doesn&#39;t support the latest mongo version and you can still upgrade to mongo  driver to latest version while keeping the same spring mongo db version and then create expression to use operator from latest mongo version that you want to use."},{"owner":{"account_id":6411872,"reputation":123,"user_id":4971385,"display_name":"Roman  Hrytsyshyn"},"score":0,"creation_date":1480089959,"post_id":40807316,"comment_id":68838259,"body_markdown":"@Veeram how spring mongo db supports creating new expressions, could you provide any links?","body":"@Veeram how spring mongo db supports creating new expressions, could you provide any links?"}],"answers":[{"tags":[],"owner":{"account_id":508767,"reputation":106,"user_id":1285983,"display_name":"Daulet"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1590028523,"creation_date":1590028523,"answer_id":61926246,"question_id":40807316,"body_markdown":"using this [answer][1], I was able to create simple $eq Criteria\r\n\r\n    private Criteria getEqCriteria(String value)\r\n\t{\r\n\t\t// hack Criteria, because new Criteria().is(value) not working!\r\n\t\tCriteria c = new Criteria();\r\n\t\ttry\r\n\t\t{\r\n\t\t\tField _criteria = c.getClass().getDeclaredField(&quot;criteria&quot;);\r\n\t\t\t_criteria.setAccessible(true);\r\n\t\t\t@SuppressWarnings(&quot;unchecked&quot;)\r\n\t\t\tLinkedHashMap&lt;String, Object&gt; criteria = (LinkedHashMap&lt;String, Object&gt;) _criteria.get(c);\r\n\t\t\tcriteria.put(&quot;$eq&quot;, value);\r\n\t\t\tField _criteriaChain = c.getClass().getDeclaredField(&quot;criteriaChain&quot;);\r\n\t\t\t_criteriaChain.setAccessible(true);\r\n\r\n\t\t\t@SuppressWarnings(&quot;unchecked&quot;)\r\n\t\t\tList&lt;Criteria&gt; criteriaChain = (List&lt;Criteria&gt;) _criteriaChain.get(c);\r\n\t\t\tcriteriaChain.add(c);\r\n\t\t} catch (Exception e)\r\n\t\t{\r\n\t\t\t// Ignore\r\n\t\t}\r\n\t\treturn c;\r\n\t}\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/60459200/1285983","title":"Spring Data MongoDb: is there possibility to define custom Criteria?","body":"<p>using this <a href=\"https://stackoverflow.com/a/60459200/1285983\">answer</a>, I was able to create simple $eq Criteria</p>\n\n<pre><code>private Criteria getEqCriteria(String value)\n{\n    // hack Criteria, because new Criteria().is(value) not working!\n    Criteria c = new Criteria();\n    try\n    {\n        Field _criteria = c.getClass().getDeclaredField(\"criteria\");\n        _criteria.setAccessible(true);\n        @SuppressWarnings(\"unchecked\")\n        LinkedHashMap&lt;String, Object&gt; criteria = (LinkedHashMap&lt;String, Object&gt;) _criteria.get(c);\n        criteria.put(\"$eq\", value);\n        Field _criteriaChain = c.getClass().getDeclaredField(\"criteriaChain\");\n        _criteriaChain.setAccessible(true);\n\n        @SuppressWarnings(\"unchecked\")\n        List&lt;Criteria&gt; criteriaChain = (List&lt;Criteria&gt;) _criteriaChain.get(c);\n        criteriaChain.add(c);\n    } catch (Exception e)\n    {\n        // Ignore\n    }\n    return c;\n}\n</code></pre>\n"}],"owner":{"account_id":6411872,"reputation":123,"user_id":4971385,"display_name":"Roman  Hrytsyshyn"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1218,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1679395675,"creation_date":1480084617,"question_id":40807316,"body_markdown":"I have simple interface with one method:\r\n\r\n     Criteria toCriteria(String key, String value)\r\nAnd next I&#39;d like to have next implementation \r\n\r\n    public class EqExpression implements Expression\r\n    {\r\n\r\n         @Override\r\n         public Criteria toCriteria(String key, String value)\r\n         {\r\n            return Criteria.where(key).eq(Pattern.compile(value));\r\n         }\r\n    }\r\n\r\n    }\r\n\r\nbut there isn&#39;t **$eq** operator. So my questions:\r\n\r\n - Why `org.springframework.data.mongodb.core.query.Criteria` doesn&#39;t have such operator?\r\n - Is there a way to implement custom Criteria implementation or is there any workaround?\r\n\r\n - For me it would be good to have code like\r\n\r\n         @Override\r\n         public Criteria toCriteria(String key, String value)\r\n         {\r\n            //return new BasicDBObject(key, new BasicDBObject(&quot;$eq&quot;, value)) converted to Criteria\r\n         }\r\n\r\n\r\n\r\nIn general, my purpose is to implement rest query language and for each operation like `gt`, `lt` I have specific implementation of `Expression` interface.\r\n\r\nRequest may looks like `name=John&amp;age&gt;20`\r\n\r\nI am building whole query using next code:\r\n            \r\n    List&lt;Criteria&gt; criterias = new ArrayList&lt;Criteria&gt;();\r\n    ...\r\n    while (matcher.find())\r\n        {\r\n            String key = matcher.group(1);\r\n            String operator = matcher.group(2);\r\n            String value = matcher.group(3);\r\n            // get from map appropriate implementation\r\n            criterias.add(expressions.get(operator).toCriteria(key, value));\r\n        }\r\n\r\nMay be you have any suggestions how to implement it more elegant\r\n","title":"Spring Data MongoDb: is there possibility to define custom Criteria?","body":"<p>I have simple interface with one method:</p>\n\n<pre><code> Criteria toCriteria(String key, String value)\n</code></pre>\n\n<p>And next I'd like to have next implementation </p>\n\n<pre><code>public class EqExpression implements Expression\n{\n\n     @Override\n     public Criteria toCriteria(String key, String value)\n     {\n        return Criteria.where(key).eq(Pattern.compile(value));\n     }\n}\n\n}\n</code></pre>\n\n<p>but there isn't <strong>$eq</strong> operator. So my questions:</p>\n\n<ul>\n<li>Why <code>org.springframework.data.mongodb.core.query.Criteria</code> doesn't have such operator?</li>\n<li><p>Is there a way to implement custom Criteria implementation or is there any workaround?</p></li>\n<li><p>For me it would be good to have code like</p>\n\n<pre><code> @Override\n public Criteria toCriteria(String key, String value)\n {\n    //return new BasicDBObject(key, new BasicDBObject(\"$eq\", value)) converted to Criteria\n }\n</code></pre></li>\n</ul>\n\n<p>In general, my purpose is to implement rest query language and for each operation like <code>gt</code>, <code>lt</code> I have specific implementation of <code>Expression</code> interface.</p>\n\n<p>Request may looks like <code>name=John&amp;age&gt;20</code></p>\n\n<p>I am building whole query using next code:</p>\n\n<pre><code>List&lt;Criteria&gt; criterias = new ArrayList&lt;Criteria&gt;();\n...\nwhile (matcher.find())\n    {\n        String key = matcher.group(1);\n        String operator = matcher.group(2);\n        String value = matcher.group(3);\n        // get from map appropriate implementation\n        criterias.add(expressions.get(operator).toCriteria(key, value));\n    }\n</code></pre>\n\n<p>May be you have any suggestions how to implement it more elegant</p>\n"},{"tags":["java","python","rest","http"],"comments":[{"owner":{"account_id":2288,"reputation":191195,"user_id":3171,"accept_rate":92,"display_name":"David Webb"},"score":1,"creation_date":1331119348,"post_id":9600327,"comment_id":12177654,"body_markdown":"It&#39;s probably worth saying what you like about *Request* in contract to *urllib2* so people will know the kind of library you&#39;re looking for.  If you just want code to do HTTP requests that&#39;s in the standard JRE.","body":"It&#39;s probably worth saying what you like about <i>Request</i> in contract to <i>urllib2</i> so people will know the kind of library you&#39;re looking for.  If you just want code to do HTTP requests that&#39;s in the standard JRE."},{"owner":{"account_id":342325,"reputation":461,"user_id":673432,"display_name":"pyth"},"score":3,"creation_date":1331131813,"post_id":9600327,"comment_id":12182423,"body_markdown":"I Want to work with a REST based App. which is actually quite easy with python&#39;s Request module!!","body":"I Want to work with a REST based App. which is actually quite easy with python&#39;s Request module!!"}],"answers":[{"tags":[],"owner":{"account_id":220789,"reputation":114430,"user_id":478399,"accept_rate":83,"display_name":"AlexR"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1393208755,"creation_date":1331119021,"answer_id":9600443,"question_id":9600327,"body_markdown":"You can use either regular `HttpUrlConnection` (that is a part of your JDK) or Jakarta [Httpcomponents client][1]. \r\n\r\n\r\n  [1]: http://hc.apache.org/httpcomponents-client-4.3.x/index.html","title":"is there an equivalent to python&#39;s request module in Java for working on REST based App","body":"<p>You can use either regular <code>HttpUrlConnection</code> (that is a part of your JDK) or Jakarta <a href=\"http://hc.apache.org/httpcomponents-client-4.3.x/index.html\" rel=\"nofollow\">Httpcomponents client</a>. </p>\n"},{"tags":[],"owner":{"account_id":459435,"reputation":577,"user_id":859911,"display_name":"Joshua Hutchison"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1456811842,"creation_date":1456811842,"answer_id":35715696,"question_id":9600327,"body_markdown":"Although I&#39;ve not had the chance to use it much [Unirest][1] looks like a good option for people looking for the eloquence and ease of use of Python&#39;s Requests module in Java.\r\n\r\nFor simple use cases it looks much quicker to get things done than Httpcomponents (which it uses under the hood). \r\n\r\n\r\n  [1]: http://unirest.io/java.html","title":"is there an equivalent to python&#39;s request module in Java for working on REST based App","body":"<p>Although I've not had the chance to use it much <a href=\"http://unirest.io/java.html\" rel=\"noreferrer\">Unirest</a> looks like a good option for people looking for the eloquence and ease of use of Python's Requests module in Java.</p>\n\n<p>For simple use cases it looks much quicker to get things done than Httpcomponents (which it uses under the hood). </p>\n"},{"tags":[],"owner":{"account_id":358715,"reputation":1714,"user_id":699665,"display_name":"MarkHu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1486185544,"creation_date":1485739455,"answer_id":41927861,"question_id":9600327,"body_markdown":"I&#39;m reading about the [Groovy RESTClient](https://github.com/jgritman/httpbuilder/wiki/RESTClient) libs in a book on the [Spock test framework](http://spockframework.org/spock/docs/). The book recommended it as an alternative to [Spring RestTemplate](https://spring.io/guides/gs/consuming-rest/) (which isn&#39;t so bad itself).\r\n\n    @Grab(group=’org.codehaus.groovy.modules.http-builder’, module=’http-builder’, version=’0.7&#39;)\n    import groovyx.net.http.RESTClient\r\n\nIt returns JSON has a hashmap.","title":"is there an equivalent to python&#39;s request module in Java for working on REST based App","body":"<p>I'm reading about the <a href=\"https://github.com/jgritman/httpbuilder/wiki/RESTClient\" rel=\"nofollow noreferrer\">Groovy RESTClient</a> libs in a book on the <a href=\"http://spockframework.org/spock/docs/\" rel=\"nofollow noreferrer\">Spock test framework</a>. The book recommended it as an alternative to <a href=\"https://spring.io/guides/gs/consuming-rest/\" rel=\"nofollow noreferrer\">Spring RestTemplate</a> (which isn't so bad itself).</p>\n\n<pre><code>@Grab(group=’org.codehaus.groovy.modules.http-builder’, module=’http-builder’, version=’0.7')\nimport groovyx.net.http.RESTClient\n</code></pre>\n\n<p>It returns JSON has a hashmap.</p>\n"},{"tags":[],"owner":{"account_id":2102520,"reputation":127,"user_id":1869743,"display_name":"user1869743"},"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1559204827,"creation_date":1559204827,"answer_id":56374445,"question_id":9600327,"body_markdown":"Late to the party, but posting for posterity:\r\n\r\nAfter trying Unirest, it didn&#39;t feel  like Python Requests and I couldn&#39;t make it work for my needs.  My key complaints were cookie/session management were intentionally left out.\r\n\r\nhttps://github.com/hsiafan/requests is working fine for me so far and has session based cookie management implemented transparently.  This one was &quot;inspired by&quot; Python&#39;s requests so should be comparable.","title":"is there an equivalent to python&#39;s request module in Java for working on REST based App","body":"<p>Late to the party, but posting for posterity:</p>\n\n<p>After trying Unirest, it didn't feel  like Python Requests and I couldn't make it work for my needs.  My key complaints were cookie/session management were intentionally left out.</p>\n\n<p><a href=\"https://github.com/hsiafan/requests\" rel=\"nofollow noreferrer\">https://github.com/hsiafan/requests</a> is working fine for me so far and has session based cookie management implemented transparently.  This one was \"inspired by\" Python's requests so should be comparable.</p>\n"},{"tags":[],"owner":{"account_id":13614811,"reputation":77,"user_id":16178503,"display_name":"Deepak Gautam"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1679395520,"creation_date":1679395520,"answer_id":75800184,"question_id":9600327,"body_markdown":"Yes we can use see the example\r\n\r\n```Java\r\n\r\nimport java.net.URI;\r\nimport java.net.http.HttpClient;\r\nimport java.net.http.HttpRequest;\r\nimport java.net.http.HttpResponse;\r\nimport java.net.http.HttpResponse.BodyHandlers;\r\n\r\npublic class Main {\r\n    public static void main(String[] args) throws Exception {\r\n        HttpClient httpClient = HttpClient.newBuilder().build();\r\n        HttpRequest httpRequest = HttpRequest.newBuilder()\r\n                .uri(URI.create(&quot;https://www.google.com/search?q=Java+Programming&quot;))\r\n                .header(&quot;Content-Type&quot;, &quot;application/json&quot;)\r\n                .GET()\r\n                .build();\r\n        HttpResponse&lt;String&gt; httpResponse = httpClient.send(httpRequest, BodyHandlers.ofString());\r\n        System.out.println(httpResponse.body());\r\n    }\r\n}\r\n\r\n```\r\n","title":"is there an equivalent to python&#39;s request module in Java for working on REST based App","body":"<p>Yes we can use see the example</p>\n<pre><code>\nimport java.net.URI;\nimport java.net.http.HttpClient;\nimport java.net.http.HttpRequest;\nimport java.net.http.HttpResponse;\nimport java.net.http.HttpResponse.BodyHandlers;\n\npublic class Main {\n    public static void main(String[] args) throws Exception {\n        HttpClient httpClient = HttpClient.newBuilder().build();\n        HttpRequest httpRequest = HttpRequest.newBuilder()\n                .uri(URI.create(&quot;https://www.google.com/search?q=Java+Programming&quot;))\n                .header(&quot;Content-Type&quot;, &quot;application/json&quot;)\n                .GET()\n                .build();\n        HttpResponse&lt;String&gt; httpResponse = httpClient.send(httpRequest, BodyHandlers.ofString());\n        System.out.println(httpResponse.body());\n    }\n}\n\n</code></pre>\n"}],"owner":{"account_id":342325,"reputation":461,"user_id":673432,"display_name":"pyth"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":16611,"favorite_count":0,"down_vote_count":0,"up_vote_count":28,"answer_count":5,"score":28,"last_activity_date":1679395520,"creation_date":1331118525,"question_id":9600327,"body_markdown":"I am looking for an equivalent Java API lib which can do same things as Python&#39;s HTTP [Requests module](http://docs.python-requests.org/en/v0.10.6/ ).\r\n\r\nKey features of the Requests lib:\r\n\r\n1. One-step initialization of an HTTP request returns `response` object.\r\n2. The `response` object contains methods/member-vars to quickly access response status, headers, body/data, and a JSON-parsing method.","title":"is there an equivalent to python&#39;s request module in Java for working on REST based App","body":"<p>I am looking for an equivalent Java API lib which can do same things as Python's HTTP <a href=\"http://docs.python-requests.org/en/v0.10.6/\" rel=\"noreferrer\">Requests module</a>.</p>\n\n<p>Key features of the Requests lib:</p>\n\n<ol>\n<li>One-step initialization of an HTTP request returns <code>response</code> object.</li>\n<li>The <code>response</code> object contains methods/member-vars to quickly access response status, headers, body/data, and a JSON-parsing method.</li>\n</ol>\n"},{"tags":["java","spring-boot","properties"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1679392814,"post_id":75799186,"comment_id":133709525,"body_markdown":"`client.properties` isn&#39;t really a valid location. Either prefix with `file:` or `classpath:` to indicate where it needs to be read from. Also you should propably use `spring.config.additional-location` instead. Finally instead of specifying the specific properties file just rename it to `application.properties` and place it next to your `application.jar` and Spring Boot will automatically load it.","body":"<code>client.properties</code> isn&#39;t really a valid location. Either prefix with <code>file:</code> or <code>classpath:</code> to indicate where it needs to be read from. Also you should propably use <code>spring.config.additional-location</code> instead. Finally instead of specifying the specific properties file just rename it to <code>application.properties</code> and place it next to your <code>application.jar</code> and Spring Boot will automatically load it."}],"answers":[{"tags":[],"owner":{"account_id":11140753,"reputation":1,"user_id":8177424,"display_name":"Pranab"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679395511,"creation_date":1679395511,"answer_id":75800183,"question_id":75799186,"body_markdown":"I think you can pass arguments as well as property file like this\r\n\r\n    java -jar application.jar -Dspring-boot.run.arguments=&quot;--argument1=value1 --argument2=value2&quot; --spring.config.location=client.properties","title":"How to read data from external properties file using jar: Spring Boot","body":"<p>I think you can pass arguments as well as property file like this</p>\n<pre><code>java -jar application.jar -Dspring-boot.run.arguments=&quot;--argument1=value1 --argument2=value2&quot; --spring.config.location=client.properties\n</code></pre>\n"}],"owner":{"account_id":20089218,"reputation":13,"user_id":14730100,"display_name":"JP_93"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":99,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1679395511,"creation_date":1679389791,"question_id":75799186,"body_markdown":"The spring-boot application I developed needs to run as a jar file, but the properties file needs to be read from outside the jar file. \r\nIf I run the jar file with arguments and `--spring.config.location=client.properties` the arguments are not passed into the jar file but the application can read the properties file.\r\n\r\n    java -jar application.jar product version mode\r\nThis would print the product, version, and mode but would throw a bean error since it&#39;s missing the properties file but.\r\n\r\n    java -jar application.jar product version mode --spring.config.location=client.properties\r\nThis throws the error `missing product version and mode` \r\n\r\nHow can I run a jar file that should read the properties file from a specified location with arguments passed to it?\r\n\r\n","title":"How to read data from external properties file using jar: Spring Boot","body":"<p>The spring-boot application I developed needs to run as a jar file, but the properties file needs to be read from outside the jar file.\nIf I run the jar file with arguments and <code>--spring.config.location=client.properties</code> the arguments are not passed into the jar file but the application can read the properties file.</p>\n<pre><code>java -jar application.jar product version mode\n</code></pre>\n<p>This would print the product, version, and mode but would throw a bean error since it's missing the properties file but.</p>\n<pre><code>java -jar application.jar product version mode --spring.config.location=client.properties\n</code></pre>\n<p>This throws the error <code>missing product version and mode</code></p>\n<p>How can I run a jar file that should read the properties file from a specified location with arguments passed to it?</p>\n"},{"tags":["java","android","google-sheets","google-sheets-api"],"answers":[{"tags":[],"owner":{"account_id":4096707,"reputation":1439,"user_id":3363254,"accept_rate":50,"display_name":"Eranda"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1440943344,"creation_date":1440899770,"answer_id":32292458,"question_id":32292399,"body_markdown":"Answer is No. OAuth token is like a key which allows Google to identify who is reading or who is writing to the spreadsheet and it won&#39;t allow if you don&#39;t have the correct access level. Even when you open Google spreadsheet with your browser the browser will generate an OAuth token from the Google identity provider and use that token to check whether your access level.\r\n\r\n**Update** Here if you see how my browser handle the request done to the google spread sheet it will first redirect to the identity provider. Most of the time you need to simulate that in order to work.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/71LxJ.png","title":"Is there a way to add a row on a Google Spreadsheet without OAuth using java?","body":"<p>Answer is No. OAuth token is like a key which allows Google to identify who is reading or who is writing to the spreadsheet and it won't allow if you don't have the correct access level. Even when you open Google spreadsheet with your browser the browser will generate an OAuth token from the Google identity provider and use that token to check whether your access level.</p>\n\n<p><strong>Update</strong> Here if you see how my browser handle the request done to the google spread sheet it will first redirect to the identity provider. Most of the time you need to simulate that in order to work.</p>\n\n<p><a href=\"https://i.stack.imgur.com/71LxJ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/71LxJ.png\" alt=\"enter image description here\"></a></p>\n"},{"tags":[],"owner":{"display_name":"user4398985"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1440900225,"creation_date":1440900225,"answer_id":32292494,"question_id":32292399,"body_markdown":"There is no way you can access or manipulate Google Drive API without OAUTH2.0. Additionally, Google Drive API wouldn&#39;t even work on private networks.\r\n\r\n**Fortunately, OAUTH2.0 is mandatory!!**\r\n\r\nThis is the OAUTH2.0 Java code for spreadsheet-----&gt;\r\n\r\n1. [OAUTH2.0-Java][1]\r\n\r\n2. [Android oauth2.0][2]\r\n\r\n\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/21440101/what-is-an-example-of-using-oauth-2-0-and-google-spreadsheet-api-with-java\r\n  [2]: http://www.blogface.org/2013/07/reading-google-spreadsheets-from.html","title":"Is there a way to add a row on a Google Spreadsheet without OAuth using java?","body":"<p>There is no way you can access or manipulate Google Drive API without OAUTH2.0. Additionally, Google Drive API wouldn't even work on private networks.</p>\n\n<p><strong>Fortunately, OAUTH2.0 is mandatory!!</strong></p>\n\n<p>This is the OAUTH2.0 Java code for spreadsheet-----></p>\n\n<ol>\n<li><p><a href=\"https://stackoverflow.com/questions/21440101/what-is-an-example-of-using-oauth-2-0-and-google-spreadsheet-api-with-java\">OAUTH2.0-Java</a></p></li>\n<li><p><a href=\"http://www.blogface.org/2013/07/reading-google-spreadsheets-from.html\" rel=\"nofollow noreferrer\">Android oauth2.0</a></p></li>\n</ol>\n"},{"tags":[],"owner":{"account_id":2694094,"reputation":430,"user_id":2326639,"display_name":"Deep Shah"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679394966,"creation_date":1679394966,"answer_id":75800069,"question_id":32292399,"body_markdown":"Using a service account it is possible to write to a google sheet without the need of OAuth. \r\n\r\nSteps:\r\n\r\n 1. [Create a service account][1] \r\n 2. [Delegating domain-wide authority to the service account][2]\r\n 3. Give google sheets permission to the service account.\r\n 4. Download the Service account json file. \r\n 5. Use the service account json file from Java code to write to the desired Google Sheets. \r\n 6. Needless to say the google sheet has to be owned by you or at least you should have write access to the google sheet. \r\n\r\nHere is kotlin code that can be used to write to Google Sheet with the service account json.\r\n\r\n    fun authorize(): Credential {\r\n\r\n        // build GoogleClientSecrets from JSON file\r\n\r\n        return GoogleCredential.fromStream(ClassPathResource(&quot;service-account.json&quot;).inputStream)\r\n            .createScoped(arrayListOf(SheetsScopes.SPREADSHEETS))\r\n            .createDelegated(&quot;your@email.com&quot;)\r\n    }\r\n\r\n    fun getSheetsService(): Sheets? {\r\n        val credential: Credential = authorize()\r\n        return Sheets.Builder(\r\n            GoogleNetHttpTransport.newTrustedTransport(),\r\n            JacksonFactory.getDefaultInstance(), credential\r\n        )\r\n            .setApplicationName(&quot;Your Application Name&quot;)\r\n            .build()\r\n    }\r\n\r\n    fun writeToSheet() {\r\n        val sheetsService = getSheetsService()\r\n        val arrayListOf: List&lt;ArrayList&lt;Any&gt;&gt; = arrayListOf(\r\n            arrayListOf(&quot;Row1 Column1&quot;, &quot;Row1 Column2&quot;),\r\n            arrayListOf(&quot;Row2 Column1&quot;, &quot;Row2 Column2&quot;)\r\n        )\r\n        val appendBody: ValueRange = ValueRange().setValues(arrayListOf)\r\n        val appendResult: AppendValuesResponse = sheetsService.spreadsheets().values()\r\n            .append(&quot;SpreadsheetId&quot;, &quot;A1&quot;, appendBody)\r\n            .setValueInputOption(&quot;USER_ENTERED&quot;)\r\n            .setInsertDataOption(&quot;INSERT_ROWS&quot;)\r\n            .setIncludeValuesInResponse(true)\r\n            .execute()\r\n    }\r\n\r\n\r\n\r\n  [1]: https://console.cloud.google.com/iam-admin/serviceaccounts\r\n  [2]: https://developers.google.com/identity/protocols/oauth2/service-account#delegatingauthority","title":"Is there a way to add a row on a Google Spreadsheet without OAuth using java?","body":"<p>Using a service account it is possible to write to a google sheet without the need of OAuth.</p>\n<p>Steps:</p>\n<ol>\n<li><a href=\"https://console.cloud.google.com/iam-admin/serviceaccounts\" rel=\"nofollow noreferrer\">Create a service account</a></li>\n<li><a href=\"https://developers.google.com/identity/protocols/oauth2/service-account#delegatingauthority\" rel=\"nofollow noreferrer\">Delegating domain-wide authority to the service account</a></li>\n<li>Give google sheets permission to the service account.</li>\n<li>Download the Service account json file.</li>\n<li>Use the service account json file from Java code to write to the desired Google Sheets.</li>\n<li>Needless to say the google sheet has to be owned by you or at least you should have write access to the google sheet.</li>\n</ol>\n<p>Here is kotlin code that can be used to write to Google Sheet with the service account json.</p>\n<pre><code>fun authorize(): Credential {\n\n    // build GoogleClientSecrets from JSON file\n\n    return GoogleCredential.fromStream(ClassPathResource(&quot;service-account.json&quot;).inputStream)\n        .createScoped(arrayListOf(SheetsScopes.SPREADSHEETS))\n        .createDelegated(&quot;your@email.com&quot;)\n}\n\nfun getSheetsService(): Sheets? {\n    val credential: Credential = authorize()\n    return Sheets.Builder(\n        GoogleNetHttpTransport.newTrustedTransport(),\n        JacksonFactory.getDefaultInstance(), credential\n    )\n        .setApplicationName(&quot;Your Application Name&quot;)\n        .build()\n}\n\nfun writeToSheet() {\n    val sheetsService = getSheetsService()\n    val arrayListOf: List&lt;ArrayList&lt;Any&gt;&gt; = arrayListOf(\n        arrayListOf(&quot;Row1 Column1&quot;, &quot;Row1 Column2&quot;),\n        arrayListOf(&quot;Row2 Column1&quot;, &quot;Row2 Column2&quot;)\n    )\n    val appendBody: ValueRange = ValueRange().setValues(arrayListOf)\n    val appendResult: AppendValuesResponse = sheetsService.spreadsheets().values()\n        .append(&quot;SpreadsheetId&quot;, &quot;A1&quot;, appendBody)\n        .setValueInputOption(&quot;USER_ENTERED&quot;)\n        .setInsertDataOption(&quot;INSERT_ROWS&quot;)\n        .setIncludeValuesInResponse(true)\n        .execute()\n}\n</code></pre>\n"}],"owner":{"account_id":6869397,"reputation":191,"user_id":5280427,"display_name":"Bruno Lopes"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":773,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":3,"score":4,"last_activity_date":1679394966,"creation_date":1440899045,"question_id":32292399,"body_markdown":"I&#39;ve searched a lot of websites about how to do that using only the spreadsheet key, but with no success. I can retrieve it, get all the data I want, but I can&#39;t append a new row to it.\r\n\r\nI&#39;ve already published my spreadsheet to the web and made it public but I keep getting &quot; com.google.gdata.util.ServiceException: Method Not Allowed&quot;.\r\n\r\nThat&#39;s how I&#39;m trying to do it:\r\n\r\n    SpreadsheetService service =\r\n                new SpreadsheetService(&quot;MySpreadsheetIntegration-v1&quot;);\r\n\r\n            try {\r\n\r\n            URL url = FeedURLFactory.getDefault().getWorksheetFeedUrl(SpreadsheetRequest.KEY, &quot;public&quot;, &quot;full&quot;); //KEY = &quot;1cenwTRlrGMzMTufkK27IIgAHvEGwVKR9Yr59Qako3u0&quot;;\r\n          \r\n            WorksheetFeed worksheetFeed = service.getFeed(url, WorksheetFeed.class);\r\n            List&lt;WorksheetEntry&gt; worksheets = worksheetFeed.getEntries();\r\n            WorksheetEntry worksheet = worksheets.get(0);\r\n\r\n            URL listFeedUrl = worksheet.getListFeedUrl();\r\n\r\n            ListFeed listFeed = service.getFeed(listFeedUrl, ListFeed.class);\r\n            List&lt;ListEntry&gt; list = listFeed.getEntries();\r\n\r\n           //Checking all the entries, works like a charm\r\n            for (ListEntry row : list) {\r\n                Log.i(&quot;INSERT&quot;,row.getTitle().getPlainText() + &quot;\\t&quot;\r\n                        + row.getPlainTextContent());\r\n            }\r\n            \r\n            ListEntry row = new ListEntry();\r\n\r\n            row.getCustomElements().setValueLocal(&quot;id&quot;, &quot;21&quot;);\r\n            row.getCustomElements().setValueLocal(&quot;type&quot;, si.getType().toString());\r\n            row.getCustomElements().setValueLocal(&quot;longitude&quot;, String.valueOf(si.getLongitude()));\r\n            row.getCustomElements().setValueLocal(&quot;latitude&quot;, String.valueOf(si.getLatitude()));\r\n            row.getCustomElements().setValueLocal(&quot;last_maint&quot;, String.valueOf(si.getLast()));\r\n            row.getCustomElements().setValueLocal(&quot;inst_date&quot;, String.valueOf(si.getInst()));\r\n\r\n            row = service.insert(listFeedUrl, row); //Exception is thrown here\r\n  \r\n            return true;\r\n        }","title":"Is there a way to add a row on a Google Spreadsheet without OAuth using java?","body":"<p>I've searched a lot of websites about how to do that using only the spreadsheet key, but with no success. I can retrieve it, get all the data I want, but I can't append a new row to it.</p>\n\n<p>I've already published my spreadsheet to the web and made it public but I keep getting \" com.google.gdata.util.ServiceException: Method Not Allowed\".</p>\n\n<p>That's how I'm trying to do it:</p>\n\n<pre><code>SpreadsheetService service =\n            new SpreadsheetService(\"MySpreadsheetIntegration-v1\");\n\n        try {\n\n        URL url = FeedURLFactory.getDefault().getWorksheetFeedUrl(SpreadsheetRequest.KEY, \"public\", \"full\"); //KEY = \"1cenwTRlrGMzMTufkK27IIgAHvEGwVKR9Yr59Qako3u0\";\n\n        WorksheetFeed worksheetFeed = service.getFeed(url, WorksheetFeed.class);\n        List&lt;WorksheetEntry&gt; worksheets = worksheetFeed.getEntries();\n        WorksheetEntry worksheet = worksheets.get(0);\n\n        URL listFeedUrl = worksheet.getListFeedUrl();\n\n        ListFeed listFeed = service.getFeed(listFeedUrl, ListFeed.class);\n        List&lt;ListEntry&gt; list = listFeed.getEntries();\n\n       //Checking all the entries, works like a charm\n        for (ListEntry row : list) {\n            Log.i(\"INSERT\",row.getTitle().getPlainText() + \"\\t\"\n                    + row.getPlainTextContent());\n        }\n\n        ListEntry row = new ListEntry();\n\n        row.getCustomElements().setValueLocal(\"id\", \"21\");\n        row.getCustomElements().setValueLocal(\"type\", si.getType().toString());\n        row.getCustomElements().setValueLocal(\"longitude\", String.valueOf(si.getLongitude()));\n        row.getCustomElements().setValueLocal(\"latitude\", String.valueOf(si.getLatitude()));\n        row.getCustomElements().setValueLocal(\"last_maint\", String.valueOf(si.getLast()));\n        row.getCustomElements().setValueLocal(\"inst_date\", String.valueOf(si.getInst()));\n\n        row = service.insert(listFeedUrl, row); //Exception is thrown here\n\n        return true;\n    }\n</code></pre>\n"},{"tags":["java","spring","spring-boot","spring-mvc"],"answers":[{"tags":[],"owner":{"account_id":20466902,"reputation":16,"user_id":15018280,"display_name":"Constantine Havansky"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1679394891,"creation_date":1679394891,"answer_id":75800057,"question_id":75790823,"body_markdown":"Be sure that yours import is\r\n\r\n    import org.springframework.transaction.annotation.Transactional;\r\n\r\nNext step: Try to create 2 different TransactionManagers. Set one of them to transaction&#39;s property.\r\n\r\n    @Transactional(transactionManager = MyFirstTM.class)","title":"Spring @Transactional annotation with a transaction across multiple data sources","body":"<p>Be sure that yours import is</p>\n<pre><code>import org.springframework.transaction.annotation.Transactional;\n</code></pre>\n<p>Next step: Try to create 2 different TransactionManagers. Set one of them to transaction's property.</p>\n<pre><code>@Transactional(transactionManager = MyFirstTM.class)\n</code></pre>\n"}],"owner":{"account_id":26477314,"reputation":15,"user_id":20117019,"display_name":"Akhilesh Dhiman"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":211,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75800057,"answer_count":1,"score":0,"last_activity_date":1679394891,"creation_date":1679318626,"question_id":75790823,"body_markdown":"I&#39;ve successfully made connection with 2 database, and I&#39;m able to select, insert, update and delete from 1st db connection, but while using 2nd database I&#39;m able to fetch the data but I&#39;m not able to update or save any data in database.\r\n\r\nThis is my jpaContext.xml\r\n\r\nConfiguration for 1st database connection\r\n\r\n\r\n    &lt;bean name=&quot;ds&quot; class=&quot;org.springframework.jdbc.datasource.DriverManagerDataSource&quot;&gt;\r\n        &lt;property name=&quot;driverClassName&quot; value=&quot;${mdmDriverClassName}&quot; /&gt;\r\n        &lt;property name=&quot;url&quot; value=&quot;${url}&quot; /&gt;\r\n        &lt;property name=&quot;username&quot; value=&quot;${username}&quot; /&gt;\r\n        &lt;property name=&quot;password&quot; value=&quot;${password}&quot; /&gt;\r\n    &lt;/bean&gt;\r\n    \r\n    &lt;bean\r\n        class=&quot;org.springframework.orm.hibernate5.LocalSessionFactoryBean&quot;\r\n        name=&quot;factory&quot;&gt;\r\n        &lt;property name=&quot;dataSource&quot; ref=&quot;ds&quot; /&gt;\r\n        &lt;property name=&quot;hibernateProperties&quot;&gt;\r\n            &lt;props&gt;\r\n                &lt;prop key=&quot;hibernate.dialect&quot;&gt;org.hibernate.dialect.MySQL57Dialect&lt;/prop&gt;\r\n                &lt;prop key=&quot;hibernate.hbm2ddl.auto&quot;&gt;none&lt;/prop&gt;\r\n                &lt;prop key=&quot;hibernate.show_sql&quot;&gt;false&lt;/prop&gt;\r\n            &lt;/props&gt;\r\n        &lt;/property&gt;\r\n       \r\n        &lt;property name=&quot;packagesToScan&quot;&gt;\r\n            &lt;list&gt;\r\n                &lt;value&gt;com.bmp.mdm_v1.entites&lt;/value&gt;\r\n            &lt;/list&gt;\r\n        &lt;/property&gt;\r\n    &lt;/bean&gt;\r\n    \r\n    &lt;bean name=&quot;hibernateTemplate&quot; class=&quot;org.springframework.orm.hibernate5.HibernateTemplate&quot;&gt;\r\n        &lt;property name=&quot;sessionFactory&quot; ref=&quot;factory&quot; /&gt;\r\n        &lt;property name=&quot;checkWriteOperations&quot; value=&quot;false&quot;&gt;&lt;/property&gt;\r\n    &lt;/bean&gt;\r\n    \r\n    &lt;bean name=&quot;transactionManager&quot; class=&quot;org.springframework.orm.hibernate5.HibernateTransactionManager&quot;&gt;\r\n        &lt;property name=&quot;sessionFactory&quot; ref=&quot;factory&quot; /&gt;\r\n    &lt;/bean&gt;\r\n\r\n\r\nConfiguration for 2nd database\r\n\r\n\r\n    &lt;bean name=&quot;mdmDs&quot; class=&quot;org.springframework.jdbc.datasource.DriverManagerDataSource&quot;&gt;\r\n        &lt;property name=&quot;driverClassName&quot; value=&quot;${driverClassName}&quot; /&gt;\r\n        &lt;property name=&quot;url&quot; value=&quot;${mdmDbUrl}&quot; /&gt;\r\n        &lt;property name=&quot;username&quot; value=&quot;${mdmDbUsr}&quot; /&gt;\r\n        &lt;property name=&quot;password&quot; value=&quot;${mdmDbPass}&quot; /&gt;\r\n    &lt;/bean&gt;                        \r\n    \r\n    &lt;bean\r\n        class=&quot;org.springframework.orm.hibernate5.LocalSessionFactoryBean&quot;\r\n        name=&quot;mdmFactory&quot;&gt;\r\n        &lt;property name=&quot;dataSource&quot; ref=&quot;mdmDs&quot; /&gt;\r\n        &lt;property name=&quot;hibernateProperties&quot;&gt;\r\n            &lt;props&gt;\r\n                &lt;prop key=&quot;hibernate.dialect&quot;&gt;org.hibernate.dialect.MySQL57Dialect&lt;/prop&gt;\r\n                &lt;prop key=&quot;hibernate.hbm2ddl.auto&quot;&gt;none&lt;/prop&gt;\r\n                &lt;prop key=&quot;hibernate.show_sql&quot;&gt;false&lt;/prop&gt;\r\n            &lt;/props&gt;\r\n        &lt;/property&gt;\r\n       \r\n        &lt;property name=&quot;packagesToScan&quot;&gt;\r\n            &lt;list&gt;\r\n                &lt;value&gt;com.bmp.stamp_biller.entites&lt;/value&gt;\r\n            &lt;/list&gt;\r\n        &lt;/property&gt;\r\n    &lt;/bean&gt;\r\n                       \r\n    &lt;bean name=&quot;mdmTmp&quot; class=&quot;org.springframework.orm.hibernate5.HibernateTemplate&quot;&gt;\r\n        &lt;property name=&quot;sessionFactory&quot; ref=&quot;mdmFactory&quot; /&gt;\r\n        &lt;property name=&quot;checkWriteOperations&quot; value=&quot;false&quot;&gt;&lt;/property&gt;\r\n    &lt;/bean&gt;\r\n\r\n    &lt;bean name=&quot;mdmTxnMang&quot; class=&quot;org.springframework.orm.hibernate5.HibernateTransactionManager&quot;&gt;\r\n        &lt;property name=&quot;sessionFactory&quot; ref=&quot;mdmFactory&quot; /&gt;\r\n    &lt;/bean&gt;\r\n\r\n\r\n\r\nThis  is my dao implementation\r\n\r\n    \r\n    @Transactional\r\n    public void saveClientBiller(client_biller client_biller) {\r\n        try {\r\n            this.mdmTmp.saveOrUpdate(client_biller);\r\n        } catch (Exception e) {\r\n            System.out.println(&quot;Exception- &quot; + e);\r\n        }\r\n    }\r\n\r\nThe data is stored in database but I&#39;m getting this error after saving data in 2nd db\r\n\r\n\r\norg.springframework.dao.InvalidDataAccessApiUsageException: no transaction is in progress; nested exception is javax.persistence.TransactionRequiredException: no transaction is in progress\r\n\r\n\r\nI&#39;m getting soultion that put @Transactional(value=&quot;mdmTxnMang&quot;), but while I&#39;m doing that it will show me error like string cannot be converted to txType.","title":"Spring @Transactional annotation with a transaction across multiple data sources","body":"<p>I've successfully made connection with 2 database, and I'm able to select, insert, update and delete from 1st db connection, but while using 2nd database I'm able to fetch the data but I'm not able to update or save any data in database.</p>\n<p>This is my jpaContext.xml</p>\n<p>Configuration for 1st database connection</p>\n<pre><code>&lt;bean name=&quot;ds&quot; class=&quot;org.springframework.jdbc.datasource.DriverManagerDataSource&quot;&gt;\n    &lt;property name=&quot;driverClassName&quot; value=&quot;${mdmDriverClassName}&quot; /&gt;\n    &lt;property name=&quot;url&quot; value=&quot;${url}&quot; /&gt;\n    &lt;property name=&quot;username&quot; value=&quot;${username}&quot; /&gt;\n    &lt;property name=&quot;password&quot; value=&quot;${password}&quot; /&gt;\n&lt;/bean&gt;\n\n&lt;bean\n    class=&quot;org.springframework.orm.hibernate5.LocalSessionFactoryBean&quot;\n    name=&quot;factory&quot;&gt;\n    &lt;property name=&quot;dataSource&quot; ref=&quot;ds&quot; /&gt;\n    &lt;property name=&quot;hibernateProperties&quot;&gt;\n        &lt;props&gt;\n            &lt;prop key=&quot;hibernate.dialect&quot;&gt;org.hibernate.dialect.MySQL57Dialect&lt;/prop&gt;\n            &lt;prop key=&quot;hibernate.hbm2ddl.auto&quot;&gt;none&lt;/prop&gt;\n            &lt;prop key=&quot;hibernate.show_sql&quot;&gt;false&lt;/prop&gt;\n        &lt;/props&gt;\n    &lt;/property&gt;\n   \n    &lt;property name=&quot;packagesToScan&quot;&gt;\n        &lt;list&gt;\n            &lt;value&gt;com.bmp.mdm_v1.entites&lt;/value&gt;\n        &lt;/list&gt;\n    &lt;/property&gt;\n&lt;/bean&gt;\n\n&lt;bean name=&quot;hibernateTemplate&quot; class=&quot;org.springframework.orm.hibernate5.HibernateTemplate&quot;&gt;\n    &lt;property name=&quot;sessionFactory&quot; ref=&quot;factory&quot; /&gt;\n    &lt;property name=&quot;checkWriteOperations&quot; value=&quot;false&quot;&gt;&lt;/property&gt;\n&lt;/bean&gt;\n\n&lt;bean name=&quot;transactionManager&quot; class=&quot;org.springframework.orm.hibernate5.HibernateTransactionManager&quot;&gt;\n    &lt;property name=&quot;sessionFactory&quot; ref=&quot;factory&quot; /&gt;\n&lt;/bean&gt;\n</code></pre>\n<p>Configuration for 2nd database</p>\n<pre><code>&lt;bean name=&quot;mdmDs&quot; class=&quot;org.springframework.jdbc.datasource.DriverManagerDataSource&quot;&gt;\n    &lt;property name=&quot;driverClassName&quot; value=&quot;${driverClassName}&quot; /&gt;\n    &lt;property name=&quot;url&quot; value=&quot;${mdmDbUrl}&quot; /&gt;\n    &lt;property name=&quot;username&quot; value=&quot;${mdmDbUsr}&quot; /&gt;\n    &lt;property name=&quot;password&quot; value=&quot;${mdmDbPass}&quot; /&gt;\n&lt;/bean&gt;                        \n\n&lt;bean\n    class=&quot;org.springframework.orm.hibernate5.LocalSessionFactoryBean&quot;\n    name=&quot;mdmFactory&quot;&gt;\n    &lt;property name=&quot;dataSource&quot; ref=&quot;mdmDs&quot; /&gt;\n    &lt;property name=&quot;hibernateProperties&quot;&gt;\n        &lt;props&gt;\n            &lt;prop key=&quot;hibernate.dialect&quot;&gt;org.hibernate.dialect.MySQL57Dialect&lt;/prop&gt;\n            &lt;prop key=&quot;hibernate.hbm2ddl.auto&quot;&gt;none&lt;/prop&gt;\n            &lt;prop key=&quot;hibernate.show_sql&quot;&gt;false&lt;/prop&gt;\n        &lt;/props&gt;\n    &lt;/property&gt;\n   \n    &lt;property name=&quot;packagesToScan&quot;&gt;\n        &lt;list&gt;\n            &lt;value&gt;com.bmp.stamp_biller.entites&lt;/value&gt;\n        &lt;/list&gt;\n    &lt;/property&gt;\n&lt;/bean&gt;\n                   \n&lt;bean name=&quot;mdmTmp&quot; class=&quot;org.springframework.orm.hibernate5.HibernateTemplate&quot;&gt;\n    &lt;property name=&quot;sessionFactory&quot; ref=&quot;mdmFactory&quot; /&gt;\n    &lt;property name=&quot;checkWriteOperations&quot; value=&quot;false&quot;&gt;&lt;/property&gt;\n&lt;/bean&gt;\n\n&lt;bean name=&quot;mdmTxnMang&quot; class=&quot;org.springframework.orm.hibernate5.HibernateTransactionManager&quot;&gt;\n    &lt;property name=&quot;sessionFactory&quot; ref=&quot;mdmFactory&quot; /&gt;\n&lt;/bean&gt;\n</code></pre>\n<p>This  is my dao implementation</p>\n<pre><code>@Transactional\npublic void saveClientBiller(client_biller client_biller) {\n    try {\n        this.mdmTmp.saveOrUpdate(client_biller);\n    } catch (Exception e) {\n        System.out.println(&quot;Exception- &quot; + e);\n    }\n}\n</code></pre>\n<p>The data is stored in database but I'm getting this error after saving data in 2nd db</p>\n<p>org.springframework.dao.InvalidDataAccessApiUsageException: no transaction is in progress; nested exception is javax.persistence.TransactionRequiredException: no transaction is in progress</p>\n<p>I'm getting soultion that put @Transactional(value=&quot;mdmTxnMang&quot;), but while I'm doing that it will show me error like string cannot be converted to txType.</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":218057,"reputation":67728,"user_id":474189,"accept_rate":72,"display_name":"Duncan Jones"},"score":0,"creation_date":1413724152,"post_id":26450807,"comment_id":41543033,"body_markdown":"You could see what the read timeout is on your `URLConnection`. Perhaps setting a lower value will trigger an earlier exception.","body":"You could see what the read timeout is on your <code>URLConnection</code>. Perhaps setting a lower value will trigger an earlier exception."},{"owner":{"account_id":259129,"reputation":13903,"user_id":541786,"accept_rate":68,"display_name":"Nitish"},"score":0,"creation_date":1413724311,"post_id":26450807,"comment_id":41543088,"body_markdown":"Although timeout is set to 45 seconds, but I don&#39;t get anything even after 45 seconds.","body":"Although timeout is set to 45 seconds, but I don&#39;t get anything even after 45 seconds."}],"answers":[{"tags":[],"owner":{"account_id":4878731,"reputation":20470,"user_id":3933089,"accept_rate":67,"display_name":"chiastic-security"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1413724362,"creation_date":1413724362,"answer_id":26450888,"question_id":26450807,"body_markdown":"I think you need to use `.read(char[] cbuf, int off, int len)` rather than `.readLine()`, and do your own line processing. Here&#39;s the documentation for that `BufferedReader.read` method:\n\n&gt;  This method implements the general contract of the corresponding read method of the Reader class. As an additional convenience, it attempts to read as many characters as possible by repeatedly invoking the read method of the underlying stream. This iterated read continues until one of the following conditions becomes true:\n&gt;\n&gt; -   The specified number of characters have been read,\n&gt; -  The read method of the underlying stream returns -1, indicating end-of-file, or\n&gt; -    **The ready method of the underlying stream returns false, indicating that further input requests would block.** \n&gt;\n&gt; If the first read on the underlying stream returns -1 to indicate end-of-file then this method returns -1. Otherwise this method returns the number of characters actually read.\n\n(Emphasis mine.)\n\nIt looks as though `read` is guaranteed not to block, because it asks the underlying stream whether it&#39;s got anything to offer.\n\nDo remember, though, that it might not return as many characters as you asked for, and it might even return 0.\n\nYou still have one problem, though, which is that if it returns 0 then you don&#39;t know whether it&#39;s because the connection has dropped or just because the web server hasn&#39;t produced anything yet.\n","title":"BufferedReader.readLine() hangs when connection forcefully disconnected","body":"<p>I think you need to use <code>.read(char[] cbuf, int off, int len)</code> rather than <code>.readLine()</code>, and do your own line processing. Here's the documentation for that <code>BufferedReader.read</code> method:</p>\n<blockquote>\n<p>This method implements the general contract of the corresponding read method of the Reader class. As an additional convenience, it attempts to read as many characters as possible by repeatedly invoking the read method of the underlying stream. This iterated read continues until one of the following conditions becomes true:</p>\n<ul>\n<li>The specified number of characters have been read,</li>\n<li>The read method of the underlying stream returns -1, indicating end-of-file, or</li>\n<li><strong>The ready method of the underlying stream returns false, indicating that further input requests would block.</strong></li>\n</ul>\n<p>If the first read on the underlying stream returns -1 to indicate end-of-file then this method returns -1. Otherwise this method returns the number of characters actually read.</p>\n</blockquote>\n<p>(Emphasis mine.)</p>\n<p>It looks as though <code>read</code> is guaranteed not to block, because it asks the underlying stream whether it's got anything to offer.</p>\n<p>Do remember, though, that it might not return as many characters as you asked for, and it might even return 0.</p>\n<p>You still have one problem, though, which is that if it returns 0 then you don't know whether it's because the connection has dropped or just because the web server hasn't produced anything yet.</p>\n"},{"tags":[],"owner":{"account_id":123958,"reputation":109285,"user_id":318758,"accept_rate":100,"display_name":"Joni"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1413724447,"creation_date":1413724447,"answer_id":26450897,"question_id":26450807,"body_markdown":"Set the [read timeout][1] on the connection. TCP may take a long time to detect a broken connection if packets are just being dropped.\r\n\r\n        connection = urlAddress.openConnection();\r\n        connection.setReadTimeout(10000); // 10 seconds\r\n        connection.setConnectTimeout(timeoutConnection);\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/api/java/net/URLConnection.html#setReadTimeout%28int%29","title":"BufferedReader.readLine() hangs when connection forcefully disconnected","body":"<p>Set the <a href=\"http://docs.oracle.com/javase/7/docs/api/java/net/URLConnection.html#setReadTimeout%28int%29\" rel=\"noreferrer\">read timeout</a> on the connection. TCP may take a long time to detect a broken connection if packets are just being dropped.</p>\n\n<pre><code>    connection = urlAddress.openConnection();\n    connection.setReadTimeout(10000); // 10 seconds\n    connection.setConnectTimeout(timeoutConnection);\n</code></pre>\n"}],"owner":{"account_id":259129,"reputation":13903,"user_id":541786,"accept_rate":68,"display_name":"Nitish"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":612,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":26450897,"answer_count":2,"score":1,"last_activity_date":1679394833,"creation_date":1413723774,"question_id":26450807,"body_markdown":"I am getting data from web service continuously.  \r\n  \r\n    URLConnection connection;\r\n\t\tBufferedReader in = null;\r\n\r\n\t\ttry {\r\n\t\t\tSharedPreferences preferences = context.getSharedPreferences(\r\n\t\t\t\t\t&quot;MyPreferences&quot;, Context.MODE_PRIVATE);\r\n\t\t\tint timeoutConnection = Integer.parseInt(preferences.getString(\r\n\t\t\t\t\t&quot;timeout&quot;, &quot;60&quot;)) * 1000;\r\n\t\t\tURL urlAddress = new URL(preferences.getString(&quot;apiUrl&quot;,\r\n\t\t\t\t\tdefaultURL));\r\n\t\t\tconnection = urlAddress.openConnection();\r\n\t\t\tconnection.setConnectTimeout(timeoutConnection);\r\n\t\t\tin = new BufferedReader(new InputStreamReader(\r\n\t\t\t\t\tconnection.getInputStream()));\r\n\t\t\tfinal String[] inputLine = { null };\r\n\t\t\tint i=0;\r\n\t\t\twhile (isOnline() &amp;&amp; (inputLine[0] = in.readLine()) != null) {   // isOnline checks if connected to internet.\r\n\t\t\t\t((Activity) context).runOnUiThread(new Runnable() {\r\n\t\t\t\t\t\tpublic void run() {\r\n\t\t\t\t\t\t\tcallback.run(inputLine[0]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\t\t} catch (Exception e) {\r\n\t\t\t..\r\n            ..\r\n\t\t}  \r\n  \r\nThis works fine till I am connected to internet. But as soon as I forcefully disconnect, `inputLine[0] = in.readLine()` does not respond. I don&#39;t get any exception.\r\n\r\nSo how may I check if connection is disconnected in between? Using `readLine()` only or something else.  I have seen few solutions which suggest using `BufferedReader.ready()`. I tried that too but it always returns false.  \r\n\r\nWhat can I try next?\r\n","title":"BufferedReader.readLine() hangs when connection forcefully disconnected","body":"<p>I am getting data from web service continuously.</p>\n<pre><code>URLConnection connection;\n    BufferedReader in = null;\n\n    try {\n        SharedPreferences preferences = context.getSharedPreferences(\n                &quot;MyPreferences&quot;, Context.MODE_PRIVATE);\n        int timeoutConnection = Integer.parseInt(preferences.getString(\n                &quot;timeout&quot;, &quot;60&quot;)) * 1000;\n        URL urlAddress = new URL(preferences.getString(&quot;apiUrl&quot;,\n                defaultURL));\n        connection = urlAddress.openConnection();\n        connection.setConnectTimeout(timeoutConnection);\n        in = new BufferedReader(new InputStreamReader(\n                connection.getInputStream()));\n        final String[] inputLine = { null };\n        int i=0;\n        while (isOnline() &amp;&amp; (inputLine[0] = in.readLine()) != null) {   // isOnline checks if connected to internet.\n            ((Activity) context).runOnUiThread(new Runnable() {\n                    public void run() {\n                        callback.run(inputLine[0]);\n                    }\n                });\n        }\n    } catch (Exception e) {\n        ..\n        ..\n    }  \n</code></pre>\n<p>This works fine till I am connected to internet. But as soon as I forcefully disconnect, <code>inputLine[0] = in.readLine()</code> does not respond. I don't get any exception.</p>\n<p>So how may I check if connection is disconnected in between? Using <code>readLine()</code> only or something else.  I have seen few solutions which suggest using <code>BufferedReader.ready()</code>. I tried that too but it always returns false.</p>\n<p>What can I try next?</p>\n"},{"tags":["java","apache-poi"],"comments":[{"owner":{"account_id":9706906,"reputation":3705,"user_id":7200088,"accept_rate":100,"display_name":"Michael Dz"},"score":2,"creation_date":1520422859,"post_id":49150928,"comment_id":85306225,"body_markdown":"I had once the same problem with Apache POI, most likely some dependencies are missing. Please show more information from stack trace then we could figure out what exactly is missing.","body":"I had once the same problem with Apache POI, most likely some dependencies are missing. Please show more information from stack trace then we could figure out what exactly is missing."},{"owner":{"account_id":11240980,"reputation":47,"user_id":8245286,"display_name":"John Wambura"},"score":0,"creation_date":1520423154,"post_id":49150928,"comment_id":85306403,"body_markdown":"Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: org/apache/xmlbeans/XmlObject\n\tat TestClass.main(TestClass.java:26)\nCaused by: java.lang.ClassNotFoundException: org.apache.xmlbeans.XmlObject\n\tat java.net.URLClassLoader.findClass(URLClassLoader.java:381)\n\tat java.lang.ClassLoader.loadClass(ClassLoader.java:424)\n\tat sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:335)\n\tat java.lang.ClassLoader.loadClass(ClassLoader.java:357)\n\t... 1 more\nC:\\Users\\wks\\AppData\\Local\\NetBeans\\Cache\\8.2\\executor-snippets\\run.xml:53: Java returned: 1\nBUILD FAILED (total time: 0 seconds)","body":"Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: org/apache/xmlbeans/XmlObject \tat TestClass.main(TestClass.java:26) Caused by: java.lang.ClassNotFoundException: org.apache.xmlbeans.XmlObject \tat java.net.URLClassLoader.findClass(URLClassLoader.java:381) \tat java.lang.ClassLoader.loadClass(ClassLoader.java:424) \tat sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:335&zwnj;&#8203;) \tat java.lang.ClassLoader.loadClass(ClassLoader.java:357) \t... 1 more C:\\Users\\wks\\AppData\\Local\\NetBeans\\Cache\\8.2\\executor-snipp&zwnj;&#8203;ets\\run.xml:53: Java returned: 1 BUILD FAILED (total time: 0 seconds)"},{"owner":{"account_id":11240980,"reputation":47,"user_id":8245286,"display_name":"John Wambura"},"score":0,"creation_date":1520423322,"post_id":49150928,"comment_id":85306513,"body_markdown":"Dear Michael, thanks for quick response. Have posted above the error I am getting in netbeans","body":"Dear Michael, thanks for quick response. Have posted above the error I am getting in netbeans"},{"owner":{"account_id":350017,"reputation":47555,"user_id":685641,"display_name":"Gagravarr"},"score":0,"creation_date":1520424431,"post_id":49150928,"comment_id":85307232,"body_markdown":"Make sure you include the Apache POI dependencies too!","body":"Make sure you include the Apache POI dependencies too!"},{"owner":{"account_id":11240980,"reputation":47,"user_id":8245286,"display_name":"John Wambura"},"score":0,"creation_date":1520424555,"post_id":49150928,"comment_id":85307323,"body_markdown":"@Gagravarr. If you may help, how do I quickly do that?","body":"@Gagravarr. If you may help, how do I quickly do that?"},{"owner":{"account_id":213468,"reputation":103486,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1520425349,"post_id":49150928,"comment_id":85307842,"body_markdown":"How are you running your application?","body":"How are you running your application?"},{"owner":{"account_id":11240980,"reputation":47,"user_id":8245286,"display_name":"John Wambura"},"score":0,"creation_date":1520425572,"post_id":49150928,"comment_id":85307983,"body_markdown":"@Mark Rotteveel. I created a project on NetBeans and added the apache POI jar files to the project library. Then, I defined a simple class with just a single line of code creating an instance of XSSFWorkbook. Then I did click run. So, I am running it directly from netbeans","body":"@Mark Rotteveel. I created a project on NetBeans and added the apache POI jar files to the project library. Then, I defined a simple class with just a single line of code creating an instance of XSSFWorkbook. Then I did click run. So, I am running it directly from netbeans"}],"answers":[{"tags":[],"owner":{"account_id":9706906,"reputation":3705,"user_id":7200088,"accept_rate":100,"display_name":"Michael Dz"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1568317871,"creation_date":1520426525,"answer_id":49152246,"question_id":49150928,"body_markdown":"Most of the time this error happens when some dependencies are missing. I can see that you are trying to use `XSSFWorkbook` but according to Apache&#39;s website this component requires additional dependency `poi-ooxml`. You should also add `xmlbeans-2.3.0.jar`:\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\r\n        &lt;artifactId&gt;poi-ooxml&lt;/artifactId&gt;\r\n        &lt;version&gt;3.17&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.apache.xmlbeans&lt;/groupId&gt;\r\n        &lt;artifactId&gt;xmlbeans&lt;/artifactId&gt;\r\n        &lt;version&gt;2.3.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n\r\nYou can find a list of all required dependencies under this [link](http://poi.apache.org/overview.html#components).\r\n\r\nIn my opinion you should start using Maven even for a simple program. It&#39;s a very useful tool and necessary for big projects.\r\n","title":"How do I fix the NoClassDefFoundError in java Apache POI project?","body":"<p>Most of the time this error happens when some dependencies are missing. I can see that you are trying to use <code>XSSFWorkbook</code> but according to Apache's website this component requires additional dependency <code>poi-ooxml</code>. You should also add <code>xmlbeans-2.3.0.jar</code>:</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\n    &lt;artifactId&gt;poi-ooxml&lt;/artifactId&gt;\n    &lt;version&gt;3.17&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.xmlbeans&lt;/groupId&gt;\n    &lt;artifactId&gt;xmlbeans&lt;/artifactId&gt;\n    &lt;version&gt;2.3.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>You can find a list of all required dependencies under this <a href=\"http://poi.apache.org/overview.html#components\" rel=\"nofollow noreferrer\">link</a>.</p>\n\n<p>In my opinion you should start using Maven even for a simple program. It's a very useful tool and necessary for big projects.</p>\n"},{"tags":[],"owner":{"account_id":6002300,"reputation":1,"user_id":4715165,"display_name":"Eswara Srisai"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679394689,"creation_date":1679394689,"answer_id":75800027,"question_id":49150928,"body_markdown":"Download poi-ooxml JAR 4.1.2 with all dependencies, which doesn&#39;t throw any ClassNotFoundException\r\nhttps://jar-download.com/artifacts/org.apache.poi/poi-ooxml/4.1.2/source-code","title":"How do I fix the NoClassDefFoundError in java Apache POI project?","body":"<p>Download poi-ooxml JAR 4.1.2 with all dependencies, which doesn't throw any ClassNotFoundException\n<a href=\"https://jar-download.com/artifacts/org.apache.poi/poi-ooxml/4.1.2/source-code\" rel=\"nofollow noreferrer\">https://jar-download.com/artifacts/org.apache.poi/poi-ooxml/4.1.2/source-code</a></p>\n"}],"owner":{"account_id":11240980,"reputation":47,"user_id":8245286,"display_name":"John Wambura"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":14603,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":49152246,"answer_count":2,"score":2,"last_activity_date":1679394689,"creation_date":1520422524,"question_id":49150928,"body_markdown":"I have been battling to fix the NoClassDefFoundError exception without success. Getting a bit frustrated now. I am creating an application to read excel files using Apache POI library. This is what I am doing:\r\n\r\n1. Downloaded the binary distribution of the library and saved it on a desktop folder called Apache POI library\r\n\r\n2. Extracted files from the zip folder\r\n\r\n3. I created a new project on Netbeans and called it apachePOI\r\n\r\n4. On the project navigation tab of Netbeans for my project, I went to right click libraries&gt;Add jar/Folder.. and imported all .jar files from the downloaded library. Added a total of 11 .jar files\r\n\r\n5. I went to USER environment variables, and chose to add a new environment variable called classpath. On the variable value, I added the path to each of the every 11.jar files in my library. One such path is `C:\\Users\\wks\\Desktop\\Apache POI Library\\poi-bin-3.17-20170915\\poi-3.17`. I separated the paths with a semicolon\r\n\r\n6. Thereafter, I created a very simple TestClass class which is compiling fine but failing to run with an error NoClassDefFoundError.The code in my class does nothing other than declaring an XSSFWorkbook like `XSSFWorkbook workbook = new XSSFWorkbook(file)`.\r\n\r\nI am not using maven and had chosen not to use. Cannot figure out what I am doing wrong, though I suspect I am getting it wrong adding my library to the classpath as in step (5) above\r\n","title":"How do I fix the NoClassDefFoundError in java Apache POI project?","body":"<p>I have been battling to fix the NoClassDefFoundError exception without success. Getting a bit frustrated now. I am creating an application to read excel files using Apache POI library. This is what I am doing:</p>\n\n<ol>\n<li><p>Downloaded the binary distribution of the library and saved it on a desktop folder called Apache POI library</p></li>\n<li><p>Extracted files from the zip folder</p></li>\n<li><p>I created a new project on Netbeans and called it apachePOI</p></li>\n<li><p>On the project navigation tab of Netbeans for my project, I went to right click libraries>Add jar/Folder.. and imported all .jar files from the downloaded library. Added a total of 11 .jar files</p></li>\n<li><p>I went to USER environment variables, and chose to add a new environment variable called classpath. On the variable value, I added the path to each of the every 11.jar files in my library. One such path is <code>C:\\Users\\wks\\Desktop\\Apache POI Library\\poi-bin-3.17-20170915\\poi-3.17</code>. I separated the paths with a semicolon</p></li>\n<li><p>Thereafter, I created a very simple TestClass class which is compiling fine but failing to run with an error NoClassDefFoundError.The code in my class does nothing other than declaring an XSSFWorkbook like <code>XSSFWorkbook workbook = new XSSFWorkbook(file)</code>.</p></li>\n</ol>\n\n<p>I am not using maven and had chosen not to use. Cannot figure out what I am doing wrong, though I suspect I am getting it wrong adding my library to the classpath as in step (5) above</p>\n"},{"tags":["java","security","rsa","hsm"],"comments":[{"owner":{"account_id":1535561,"reputation":7664,"user_id":1431720,"accept_rate":89,"display_name":"Robert"},"score":0,"creation_date":1654527959,"post_id":72518624,"comment_id":128105931,"body_markdown":"So what prevents you from converting the key to binary? Have you done a web search for converting the key?","body":"So what prevents you from converting the key to binary? Have you done a web search for converting the key?"},{"owner":{"account_id":1535561,"reputation":7664,"user_id":1431720,"accept_rate":89,"display_name":"Robert"},"score":0,"creation_date":1654527970,"post_id":72518624,"comment_id":128105937,"body_markdown":"Does this answer your question? [Convert .pem to .bin in OpenSSL](https://stackoverflow.com/questions/70835377/convert-pem-to-bin-in-openssl)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/70835377/convert-pem-to-bin-in-openssl\">Convert .pem to .bin in OpenSSL</a>"},{"owner":{"account_id":9092693,"reputation":23,"user_id":6767832,"display_name":"Artimael"},"score":0,"creation_date":1654528357,"post_id":72518624,"comment_id":128106071,"body_markdown":"Hi Robert, when i try to convert to binary ( 0101001010101010) the HSM answer me the request is to long","body":"Hi Robert, when i try to convert to binary ( 0101001010101010) the HSM answer me the request is to long"}],"answers":[{"tags":[],"owner":{"account_id":4988158,"reputation":3,"user_id":4011161,"display_name":"Eduardo Faustino"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679394318,"creation_date":1678944037,"answer_id":75752417,"question_id":72518624,"body_markdown":"Had the a similar issue with some other commands. I had to convert all characters excluding the public key from ASCII to hex. Then from there I pulled it all together and did a conversion from hex to ASCII. So your command code EO looks like this 454f \r\nEncoding rule 02 looks like 3032\r\n\r\nThis little method helped me with the conversion\r\n```\r\npublic static String hexToAscii(String input) {\r\n\tStringBuilder result = new StringBuilder();\r\n\tfor (int i = 0; i &lt; input.length(); i += 2) {\r\n\t\tString str = input.substring(i, i + 2);\r\n\t\tresult.append((char) Integer.parseInt(str, 16));\r\n\t}\r\n\treturn result.toString();\r\n}\r\n```\r\nThere is probably a smarter way of doing this but it worked for me.\r\n\r\n","title":"Thales HSM Import Public Key (EO) error &#39;04&#39;","body":"<p>Had the a similar issue with some other commands. I had to convert all characters excluding the public key from ASCII to hex. Then from there I pulled it all together and did a conversion from hex to ASCII. So your command code EO looks like this 454f\nEncoding rule 02 looks like 3032</p>\n<p>This little method helped me with the conversion</p>\n<pre><code>public static String hexToAscii(String input) {\n    StringBuilder result = new StringBuilder();\n    for (int i = 0; i &lt; input.length(); i += 2) {\n        String str = input.substring(i, i + 2);\n        result.append((char) Integer.parseInt(str, 16));\n    }\n    return result.toString();\n}\n</code></pre>\n<p>There is probably a smarter way of doing this but it worked for me.</p>\n"}],"owner":{"account_id":9092693,"reputation":23,"user_id":6767832,"display_name":"Artimael"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":491,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1679394318,"creation_date":1654523026,"question_id":72518624,"body_markdown":"I am sending this command with a DER encoded public RSA key.\r\n\r\n```HSM-EO023082018A02820181009B1EA09942164A293536A18E3881A981161BC9147548DBADFA7A3D6F7C0425331427E431A25A1EED0E8BE184AFBE0F1A0CF9F08F731F2148560ED2E9740EDF50CA823BC1A1210A82D71820E6C2DC39B871F7EE170D07CAAAC5CB7E074829B2D0AFB1AF5DE35222EE425CCF3122F5BAA0521FCEF97198102A02CAC7F85FE15785D6731674779E485448FCF934C331C5C6CDA70C31971E09D797EE340528896029AA8434100C0F732FFF7DF5DC7EED975D56E58E30A505D7B9C299B4109EC9D353D3234DA99C3DD4B5030A4F66290BAE13EA0618E11F43BF8B283C1B1A9865E551080E15F60642E15B452626ABBCB8B59E96471CFDD819D14C74C86DF3CD245EBE85D45A3EB19A1CA2CDEF133809A6079ED5C2DFD83F9419897D8064ABE119D4EC7BD01AC9DA0A8E18EADEA9AED624F63FB39DD167C4230C1745FB12A8117B2B9B630206FA7285CA804E28FBB47A013DC17880ACF58B6F3A1ADA6A7A5B3B47CD88C60C3DAB6122C1AB5571C2586BF93FAF96657FCDEDB3F766DB06E804F4FE8C890203010001~%#B00N00```\r\n\r\nhis is just the header ```HSM-```, the command ```EO``` and the ```02``` denoting &quot;DER encoding for ASN.1 Public Key (INTEGER using unsigned representation)&quot;. Followed by the encoded DER itself and then the Key block header ~%#B00N00.\r\n\r\nError 04 means &quot;Public key does not conform to encoding rules&quot;. \r\n\r\nThis is a example obtained via Thales ( HSM supplier) and the only diference is they are using hsm terminal, and my implemententation is via Java sending the message via Socket.\r\n\r\nIf anyone know something please help.\r\n\r\n\r\nIn advice, they inform me is the public Key is in ASCII and i have to convert to binary Data","title":"Thales HSM Import Public Key (EO) error &#39;04&#39;","body":"<p>I am sending this command with a DER encoded public RSA key.</p>\n<p><code>HSM-EO023082018A02820181009B1EA09942164A293536A18E3881A981161BC9147548DBADFA7A3D6F7C0425331427E431A25A1EED0E8BE184AFBE0F1A0CF9F08F731F2148560ED2E9740EDF50CA823BC1A1210A82D71820E6C2DC39B871F7EE170D07CAAAC5CB7E074829B2D0AFB1AF5DE35222EE425CCF3122F5BAA0521FCEF97198102A02CAC7F85FE15785D6731674779E485448FCF934C331C5C6CDA70C31971E09D797EE340528896029AA8434100C0F732FFF7DF5DC7EED975D56E58E30A505D7B9C299B4109EC9D353D3234DA99C3DD4B5030A4F66290BAE13EA0618E11F43BF8B283C1B1A9865E551080E15F60642E15B452626ABBCB8B59E96471CFDD819D14C74C86DF3CD245EBE85D45A3EB19A1CA2CDEF133809A6079ED5C2DFD83F9419897D8064ABE119D4EC7BD01AC9DA0A8E18EADEA9AED624F63FB39DD167C4230C1745FB12A8117B2B9B630206FA7285CA804E28FBB47A013DC17880ACF58B6F3A1ADA6A7A5B3B47CD88C60C3DAB6122C1AB5571C2586BF93FAF96657FCDEDB3F766DB06E804F4FE8C890203010001~%#B00N00</code></p>\n<p>his is just the header <code>HSM-</code>, the command <code>EO</code> and the <code>02</code> denoting &quot;DER encoding for ASN.1 Public Key (INTEGER using unsigned representation)&quot;. Followed by the encoded DER itself and then the Key block header ~%#B00N00.</p>\n<p>Error 04 means &quot;Public key does not conform to encoding rules&quot;.</p>\n<p>This is a example obtained via Thales ( HSM supplier) and the only diference is they are using hsm terminal, and my implemententation is via Java sending the message via Socket.</p>\n<p>If anyone know something please help.</p>\n<p>In advice, they inform me is the public Key is in ASCII and i have to convert to binary Data</p>\n"},{"tags":["java","react-native","android-activity"],"answers":[{"tags":[],"owner":{"account_id":4784142,"reputation":2430,"user_id":3865138,"accept_rate":71,"display_name":"Mr Heelis"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1679394115,"creation_date":1679394115,"answer_id":75799921,"question_id":75799292,"body_markdown":"I think this does it actually\r\n\r\n    @Override\r\n      protected ReactActivityDelegate createReactActivityDelegate() {\r\n        return new DefaultReactActivityDelegate(\r\n            this,\r\n            getMainComponentName(),\r\n            // If you opted-in for the New Architecture, we enable the Fabric Renderer.\r\n            DefaultNewArchitectureEntryPoint.getFabricEnabled(), // fabricEnabled\r\n            // If you opted-in for the New Architecture, we enable Concurrent React (i.e. React 18).\r\n            DefaultNewArchitectureEntryPoint.getConcurrentReactEnabled() // concurrentRootEnabled\r\n        ) {\r\n          @Override\r\n          protected ReactRootView createRootView() {\r\n            return new RNGestureHandlerEnabledRootView(MainActivity.this);\r\n          };\r\n        };\r\n      }","title":"React Native MainActivity.java createApplicationDelegate() how to merge two necessary methods","body":"<p>I think this does it actually</p>\n<pre><code>@Override\n  protected ReactActivityDelegate createReactActivityDelegate() {\n    return new DefaultReactActivityDelegate(\n        this,\n        getMainComponentName(),\n        // If you opted-in for the New Architecture, we enable the Fabric Renderer.\n        DefaultNewArchitectureEntryPoint.getFabricEnabled(), // fabricEnabled\n        // If you opted-in for the New Architecture, we enable Concurrent React (i.e. React 18).\n        DefaultNewArchitectureEntryPoint.getConcurrentReactEnabled() // concurrentRootEnabled\n    ) {\n      @Override\n      protected ReactRootView createRootView() {\n        return new RNGestureHandlerEnabledRootView(MainActivity.this);\n      };\n    };\n  }\n</code></pre>\n"}],"owner":{"account_id":4784142,"reputation":2430,"user_id":3865138,"accept_rate":71,"display_name":"Mr Heelis"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":428,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1679394115,"creation_date":1679390426,"question_id":75799292,"body_markdown":"in a recent [upgrade to react native 0.71.3][1] part of the upgrade is to add a method:\r\n\r\n    @Override\r\n      protected ReactActivityDelegate createReactActivityDelegate() {\r\n        return new DefaultReactActivityDelegate(\r\n            this,\r\n            getMainComponentName(),\r\n            // If you opted-in for the New Architecture, we enable the Fabric Renderer.\r\n            DefaultNewArchitectureEntryPoint.getFabricEnabled(), // fabricEnabled\r\n            // If you opted-in for the New Architecture, we enable Concurrent React (i.e. React 18).\r\n            DefaultNewArchitectureEntryPoint.getConcurrentReactEnabled() // concurrentRootEnabled\r\n            );\r\n      }\r\n\r\nthe instructions are to add this to `MainActivity.java`. This is all well and good but there is a problem :\r\n\r\nour code already had this method yet in an entirely different form, which uses a completely different mechanic \r\n\r\n    @Override\r\n    protected ReactActivityDelegate createReactActivityDelegate() {\r\n      return new InitialPropsReactActivityDelegate(this, getMainComponentName()) {\r\n          @Override\r\n          protected ReactRootView createRootView() {\r\n            return new RNGestureHandlerEnabledRootView(MainActivity.this);\r\n          }\r\n        };\r\n      }\r\n\r\n\r\nI need to merge the functionality and return a `ReactActivityDelegate` with everything we need. Has anyone got experience of how to do this properly? It has me stumped.\r\n\r\n\r\n  [1]: https://react-native-community.github.io/upgrade-helper/?from=0.67.2&amp;to=0.71.3#RnDiffApp-android-app-src-main-java-com-rndiffapp-MainActivity.java","title":"React Native MainActivity.java createApplicationDelegate() how to merge two necessary methods","body":"<p>in a recent <a href=\"https://react-native-community.github.io/upgrade-helper/?from=0.67.2&amp;to=0.71.3#RnDiffApp-android-app-src-main-java-com-rndiffapp-MainActivity.java\" rel=\"nofollow noreferrer\">upgrade to react native 0.71.3</a> part of the upgrade is to add a method:</p>\n<pre><code>@Override\n  protected ReactActivityDelegate createReactActivityDelegate() {\n    return new DefaultReactActivityDelegate(\n        this,\n        getMainComponentName(),\n        // If you opted-in for the New Architecture, we enable the Fabric Renderer.\n        DefaultNewArchitectureEntryPoint.getFabricEnabled(), // fabricEnabled\n        // If you opted-in for the New Architecture, we enable Concurrent React (i.e. React 18).\n        DefaultNewArchitectureEntryPoint.getConcurrentReactEnabled() // concurrentRootEnabled\n        );\n  }\n</code></pre>\n<p>the instructions are to add this to <code>MainActivity.java</code>. This is all well and good but there is a problem :</p>\n<p>our code already had this method yet in an entirely different form, which uses a completely different mechanic</p>\n<pre><code>@Override\nprotected ReactActivityDelegate createReactActivityDelegate() {\n  return new InitialPropsReactActivityDelegate(this, getMainComponentName()) {\n      @Override\n      protected ReactRootView createRootView() {\n        return new RNGestureHandlerEnabledRootView(MainActivity.this);\n      }\n    };\n  }\n</code></pre>\n<p>I need to merge the functionality and return a <code>ReactActivityDelegate</code> with everything we need. Has anyone got experience of how to do this properly? It has me stumped.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1679394097,"post_id":75799902,"comment_id":133709909,"body_markdown":"why would you need reflection for this? just compare the results of the getters","body":"why would you need reflection for this? just compare the results of the getters"},{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":1,"creation_date":1679394139,"post_id":75799902,"comment_id":133709921,"body_markdown":"or use a Comparator if you need to use it on a large scale.","body":"or use a Comparator if you need to use it on a large scale."},{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":0,"creation_date":1679394720,"post_id":75799902,"comment_id":133710062,"body_markdown":"Note that your Employee variables are all declared locally, within a method, and so those variables are not visible outside of the method, and so I&#39;m not sure how you&#39;re planning on using any of this code.","body":"Note that your Employee variables are all declared locally, within a method, and so those variables are not visible outside of the method, and so I&#39;m not sure how you&#39;re planning on using any of this code."},{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":0,"creation_date":1679394774,"post_id":75799902,"comment_id":133710077,"body_markdown":"Also, wouldn&#39;t Employee extend from Person? This is all somewhat confusing.","body":"Also, wouldn&#39;t Employee extend from Person? This is all somewhat confusing."},{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":0,"creation_date":1679395255,"post_id":75799902,"comment_id":133710203,"body_markdown":"`Comparator.comparingDouble(Employee::getSalary)`","body":"<code>Comparator.comparingDouble(Employee::getSalary)</code>"}],"owner":{"account_id":4146531,"reputation":451,"user_id":3400076,"display_name":"xxestter"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1679394123,"answer_count":0,"score":0,"last_activity_date":1679394015,"creation_date":1679394015,"question_id":75799902,"body_markdown":"\r\nI would like to check how to compare 2 Objects and each Object has nested class within. how can I compare the emp1 and emp2 without the compareTo() inside the Employee class. Do I have to use Reflection?\r\n\r\n    public class App{\r\n    \tpublic void addEmployee(){\r\n    \t\tPerson person1 = new Person();\r\n    \t\tperson1.setId(123);\r\n    \t\tperson1.setFirstName(&quot;FirstName&quot;);\r\n    \t\tperson1.setLastName(&quot;LastName&quot;);\r\n    \t\r\n    \t\r\n    \t\tEmployee emp1 = new Employee();\r\n    \t\temp1.setPerson(person1);\r\n    \t\temp1.setPosition(&quot;Tester1&quot;);\r\n    \t\temp1.setSalary(1000);\r\n    \t\t\r\n    \t\t\r\n    \t\tPerson person2 = new Person();\r\n    \t\tperson2.setId(223);\r\n    \t\tperson2.setFirstName(&quot;FirstName2&quot;);\r\n    \t\tperson2.setLastName(&quot;LastName2&quot;);\r\n    \t\r\n    \t\r\n    \t\tEmployee emp2 = new Employee();\r\n    \t\temp2.setPerson(person2);\r\n    \t\temp2.setPosition(&quot;Tester2&quot;);\r\n    \t\temp2.setSalary(2000);\r\n    \t\t\r\n    \t\t//how can I compare the emp1 and emp2 without the compareTo() inside the Employee class.\r\n    \t\t\r\n    \t\t\r\n    \t}\r\n    }\r\n    \r\n    public class Person{\r\n    \tprivate int id;\r\n    \tprivate String firstName;\r\n    \tprivate String lastName;\r\n    }\r\n    \r\n    public class Employee{\r\n    \tprivate Person person;\r\n    \tprivate String position;\r\n    \tprivate double salary;\r\n    }","title":"Find diff between 2 object with nested class","body":"<p>I would like to check how to compare 2 Objects and each Object has nested class within. how can I compare the emp1 and emp2 without the compareTo() inside the Employee class. Do I have to use Reflection?</p>\n<pre><code>public class App{\n    public void addEmployee(){\n        Person person1 = new Person();\n        person1.setId(123);\n        person1.setFirstName(&quot;FirstName&quot;);\n        person1.setLastName(&quot;LastName&quot;);\n    \n    \n        Employee emp1 = new Employee();\n        emp1.setPerson(person1);\n        emp1.setPosition(&quot;Tester1&quot;);\n        emp1.setSalary(1000);\n        \n        \n        Person person2 = new Person();\n        person2.setId(223);\n        person2.setFirstName(&quot;FirstName2&quot;);\n        person2.setLastName(&quot;LastName2&quot;);\n    \n    \n        Employee emp2 = new Employee();\n        emp2.setPerson(person2);\n        emp2.setPosition(&quot;Tester2&quot;);\n        emp2.setSalary(2000);\n        \n        //how can I compare the emp1 and emp2 without the compareTo() inside the Employee class.\n        \n        \n    }\n}\n\npublic class Person{\n    private int id;\n    private String firstName;\n    private String lastName;\n}\n\npublic class Employee{\n    private Person person;\n    private String position;\n    private double salary;\n}\n</code></pre>\n"},{"tags":["java","scala","apache-spark","sbt"],"answers":[{"tags":[],"owner":{"account_id":17158996,"reputation":99,"user_id":12419123,"display_name":"Rahul Sahoo"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1679393665,"creation_date":1679393665,"answer_id":75799853,"question_id":75799038,"body_markdown":"This `NoSuchMethodError` occurs mostly on code compiled using a different version of scala. If the Scala version used to compile your code is different from the scala version that is used to compile the Spark (scala version used by spark-submit) then there is a chance that you might be having `NoSuchMethodError` due to that.\r\n\r\nPlease check both the scala versions. For your case, it should be 2.13 for both.\r\n\r\nAlso additionally don&#39;t include Spark in your compiled jar.\r\n\r\n**build.sbt**\r\n```\r\nname := &quot;FindRetiredPeople&quot;\r\nversion := &quot;1.0&quot;\r\nscalaVersion := &quot;2.13.10&quot;\r\nlibraryDependencies ++= Seq(\r\n  &quot;org.apache.spark&quot; %% &quot;spark-core&quot; % &quot;3.3.2&quot; % &quot;provided&quot;,\r\n  &quot;org.apache.spark&quot; %% &quot;spark-sql&quot; % &quot;3.3.2&quot; % &quot;provided&quot;,\r\n  &quot;org.apache.spark&quot; %% &quot;spark-streaming&quot; % &quot;3.3.2&quot;,\r\n)\r\n```\r\nDo let me know if it helps.","title":"Spark app in Scala 2.13 failed with: Exception in thread &quot;main&quot; java.lang.NoSuchMethodError","body":"<p>This <code>NoSuchMethodError</code> occurs mostly on code compiled using a different version of scala. If the Scala version used to compile your code is different from the scala version that is used to compile the Spark (scala version used by spark-submit) then there is a chance that you might be having <code>NoSuchMethodError</code> due to that.</p>\n<p>Please check both the scala versions. For your case, it should be 2.13 for both.</p>\n<p>Also additionally don't include Spark in your compiled jar.</p>\n<p><strong>build.sbt</strong></p>\n<pre><code>name := &quot;FindRetiredPeople&quot;\nversion := &quot;1.0&quot;\nscalaVersion := &quot;2.13.10&quot;\nlibraryDependencies ++= Seq(\n  &quot;org.apache.spark&quot; %% &quot;spark-core&quot; % &quot;3.3.2&quot; % &quot;provided&quot;,\n  &quot;org.apache.spark&quot; %% &quot;spark-sql&quot; % &quot;3.3.2&quot; % &quot;provided&quot;,\n  &quot;org.apache.spark&quot; %% &quot;spark-streaming&quot; % &quot;3.3.2&quot;,\n)\n</code></pre>\n<p>Do let me know if it helps.</p>\n"}],"owner":{"account_id":2273748,"reputation":46601,"user_id":2000548,"accept_rate":92,"display_name":"Hongbo Miao"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":688,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75799853,"answer_count":1,"score":0,"last_activity_date":1679393665,"creation_date":1679388896,"question_id":75799038,"body_markdown":"I have a very simple Spark app in Scala.\r\n\r\nI am using\r\n\r\n- Spark 3.3.2\r\n- sbt 1.8.2\r\n- Java: tried both 11 and 17 for below experiments\r\n\r\n**src/main/scala/FindRetiredPeople.scala**\r\n\r\n```scala\r\nimport org.apache.spark.sql.{DataFrame, SparkSession}\r\n\r\nobject FindRetiredPeople {\r\n  def main(args: Array[String]): Unit = {\r\n    val people = Seq(\r\n      (1, &quot;Alice&quot;, 25),\r\n      (2, &quot;Bob&quot;, 30),\r\n      (3, &quot;Charlie&quot;, 80),\r\n      (4, &quot;Dave&quot;, 40),\r\n      (5, &quot;Eve&quot;, 45)\r\n    )\r\n\r\n    val spark: SparkSession = SparkSession.builder()\r\n      .master(&quot;local[*]&quot;)\r\n      .appName(&quot;find-retired-people&quot;)\r\n      .config(&quot;spark.ui.port&quot;, &quot;4040&quot;)\r\n      .getOrCreate()\r\n\r\n    import spark.implicits._\r\n    val df: DataFrame = people.toDF(&quot;id&quot;, &quot;name&quot;, &quot;age&quot;)\r\n    df.createOrReplaceTempView(&quot;people&quot;)\r\n\r\n    val retiredPeople: DataFrame = spark.sql(&quot;SELECT name, age FROM people WHERE age &gt;= 67&quot;)\r\n    retiredPeople.show()\r\n\r\n    spark.stop()\r\n  }\r\n}\r\n```\r\n\r\n## Scala 2.12 (Succeed both for `sbt run` and `spark-submit`)\r\n\r\nWhen I am using Scala 2.12\r\n\r\n**build.sbt**\r\n\r\n```sbt\r\nname := &quot;FindRetiredPeople&quot;\r\nversion := &quot;1.0&quot;\r\nscalaVersion := &quot;2.12.17&quot;\r\nlibraryDependencies ++= Seq(\r\n  &quot;org.apache.spark&quot; %% &quot;spark-core&quot; % &quot;3.3.2&quot;,\r\n  &quot;org.apache.spark&quot; %% &quot;spark-sql&quot; % &quot;3.3.2&quot;,\r\n  &quot;org.apache.spark&quot; %% &quot;spark-streaming&quot; % &quot;3.3.2&quot;,\r\n)\r\n```\r\n\r\nI can successfully run\r\n\r\n```shell\r\nsbt package\r\nsbt run\r\n```\r\n\r\nand also\r\n\r\n```shell\r\nspark-submit \\\r\n\t--class=FindRetiredPeople \\\r\n\t--master=&quot;local[*]&quot; \\\r\n\ttarget/scala-2.12/findretiredpeople_2.12-1.0.jar\r\n```\r\n\r\n`spark-submit` will print log:\r\n\r\n```shell\r\n23/03/21 01:59:23 INFO SparkContext: Running Spark version 3.3.2\r\n23/03/21 01:59:23 WARN NativeCodeLoader: Unable to load native-hadoop library for your platform... using builtin-java classes where applicable\r\n23/03/21 01:59:23 INFO ResourceUtils: ==============================================================\r\n23/03/21 01:59:23 INFO ResourceUtils: No custom resources configured for spark.driver.\r\n23/03/21 01:59:23 INFO ResourceUtils: ==============================================================\r\n23/03/21 01:59:23 INFO SparkContext: Submitted application: find-retired-people\r\n23/03/21 01:59:23 INFO ResourceProfile: Default ResourceProfile created, executor resources: Map(cores -&gt; name: cores, amount: 1, script: , vendor: , memory -&gt; name: memory, amount: 1024, script: , vendor: , offHeap -&gt; name: offHeap, amount: 0, script: , vendor: ), task resources: Map(cpus -&gt; name: cpus, amount: 1.0)\r\n23/03/21 01:59:23 INFO ResourceProfile: Limiting resource is cpu\r\n23/03/21 01:59:23 INFO ResourceProfileManager: Added ResourceProfile id: 0\r\n23/03/21 01:59:23 INFO SecurityManager: Changing view acls to: hongbo-miao\r\n23/03/21 01:59:23 INFO SecurityManager: Changing modify acls to: hongbo-miao\r\n23/03/21 01:59:23 INFO SecurityManager: Changing view acls groups to: \r\n23/03/21 01:59:23 INFO SecurityManager: Changing modify acls groups to: \r\n23/03/21 01:59:23 INFO SecurityManager: SecurityManager: authentication disabled; ui acls disabled; users  with view permissions: Set(hongbo-miao); groups with view permissions: Set(); users  with modify permissions: Set(hongbo-miao); groups with modify permissions: Set()\r\n23/03/21 01:59:23 INFO Utils: Successfully started service &#39;sparkDriver&#39; on port 57085.\r\n23/03/21 01:59:23 INFO SparkEnv: Registering MapOutputTracker\r\n23/03/21 01:59:23 INFO SparkEnv: Registering BlockManagerMaster\r\n23/03/21 01:59:23 INFO BlockManagerMasterEndpoint: Using org.apache.spark.storage.DefaultTopologyMapper for getting topology information\r\n23/03/21 01:59:23 INFO BlockManagerMasterEndpoint: BlockManagerMasterEndpoint up\r\n23/03/21 01:59:23 INFO SparkEnv: Registering BlockManagerMasterHeartbeat\r\n23/03/21 01:59:23 INFO DiskBlockManager: Created local directory at /private/var/folders/22/ntjwd5dx691gvkktkspl0f_00000gq/T/blockmgr-719fedfe-99ac-4399-aaf2-c561f236c487\r\n23/03/21 01:59:23 INFO MemoryStore: MemoryStore started with capacity 434.4 MiB\r\n23/03/21 01:59:23 INFO SparkEnv: Registering OutputCommitCoordinator\r\n23/03/21 01:59:23 INFO Utils: Successfully started service &#39;SparkUI&#39; on port 4040.\r\n23/03/21 01:59:23 INFO SparkContext: Added JAR file:/Users/hongbo-miao/find-retired-people-scala/target/scala-2.12/findretiredpeople_2.12-1.0.jar at spark://10.37.129.2:57085/jars/findretiredpeople_2.12-1.0.jar with timestamp 1679389163209\r\n23/03/21 01:59:23 INFO Executor: Starting executor ID driver on host 10.37.129.2\r\n23/03/21 01:59:23 INFO Executor: Starting executor with user classpath (userClassPathFirst = false): &#39;&#39;\r\n23/03/21 01:59:23 INFO Executor: Fetching spark://10.37.129.2:57085/jars/findretiredpeople_2.12-1.0.jar with timestamp 1679389163209\r\n23/03/21 01:59:23 INFO TransportClientFactory: Successfully created connection to /10.37.129.2:57085 after 14 ms (0 ms spent in bootstraps)\r\n23/03/21 01:59:23 INFO Utils: Fetching spark://10.37.129.2:57085/jars/findretiredpeople_2.12-1.0.jar to /private/var/folders/22/ntjwd5dx691gvkktkspl0f_00000gq/T/spark-5a9b2fb3-361d-4e3a-9acf-d6292fa0ead3/userFiles-5001866c-99f0-47e2-a6a6-d84091d20a8f/fetchFileTemp16516278909384835567.tmp\r\n23/03/21 01:59:23 INFO Executor: Adding file:/private/var/folders/22/ntjwd5dx691gvkktkspl0f_00000gq/T/spark-5a9b2fb3-361d-4e3a-9acf-d6292fa0ead3/userFiles-5001866c-99f0-47e2-a6a6-d84091d20a8f/findretiredpeople_2.12-1.0.jar to class loader\r\n23/03/21 01:59:23 INFO Utils: Successfully started service &#39;org.apache.spark.network.netty.NettyBlockTransferService&#39; on port 57087.\r\n23/03/21 01:59:23 INFO NettyBlockTransferService: Server created on 10.37.129.2:57087\r\n23/03/21 01:59:23 INFO BlockManager: Using org.apache.spark.storage.RandomBlockReplicationPolicy for block replication policy\r\n23/03/21 01:59:23 INFO BlockManagerMaster: Registering BlockManager BlockManagerId(driver, 10.37.129.2, 57087, None)\r\n23/03/21 01:59:23 INFO BlockManagerMasterEndpoint: Registering block manager 10.37.129.2:57087 with 434.4 MiB RAM, BlockManagerId(driver, 10.37.129.2, 57087, None)\r\n23/03/21 01:59:23 INFO BlockManagerMaster: Registered BlockManager BlockManagerId(driver, 10.37.129.2, 57087, None)\r\n23/03/21 01:59:23 INFO BlockManager: Initialized BlockManager: BlockManagerId(driver, 10.37.129.2, 57087, None)\r\n23/03/21 01:59:24 INFO SharedState: Setting hive.metastore.warehouse.dir (&#39;null&#39;) to the value of spark.sql.warehouse.dir.\r\n23/03/21 01:59:24 INFO SharedState: Warehouse path is &#39;file:/Users/hongbo-miao/find-retired-people-scala/spark-warehouse&#39;.\r\n23/03/21 01:59:25 INFO CodeGenerator: Code generated in 77.321 ms\r\n23/03/21 01:59:25 INFO CodeGenerator: Code generated in 3.580958 ms\r\n23/03/21 01:59:25 INFO CodeGenerator: Code generated in 7.1175 ms\r\n23/03/21 01:59:26 INFO CodeGenerator: Code generated in 6.165709 ms\r\n+-------+---+\r\n|   name|age|\r\n+-------+---+\r\n|Charlie| 80|\r\n+-------+---+\r\n\r\n23/03/21 01:59:26 INFO SparkUI: Stopped Spark web UI at http://10.37.129.2:4040\r\n23/03/21 01:59:26 INFO MapOutputTrackerMasterEndpoint: MapOutputTrackerMasterEndpoint stopped!\r\n23/03/21 01:59:26 INFO MemoryStore: MemoryStore cleared\r\n23/03/21 01:59:26 INFO BlockManager: BlockManager stopped\r\n23/03/21 01:59:26 INFO BlockManagerMaster: BlockManagerMaster stopped\r\n23/03/21 01:59:26 INFO OutputCommitCoordinator$OutputCommitCoordinatorEndpoint: OutputCommitCoordinator stopped!\r\n23/03/21 01:59:26 INFO SparkContext: Successfully stopped SparkContext\r\n23/03/21 01:59:26 INFO ShutdownHookManager: Shutdown hook called\r\n23/03/21 01:59:26 INFO ShutdownHookManager: Deleting directory /private/var/folders/22/ntjwd5dx691gvkktkspl0f_00000gq/T/spark-3c8e7833-ca25-4178-ad2e-d32b8842ff0a\r\n23/03/21 01:59:26 INFO ShutdownHookManager: Deleting directory /private/var/folders/22/ntjwd5dx691gvkktkspl0f_00000gq/T/spark-5a9b2fb3-361d-4e3a-9acf-d6292fa0ead3\r\n\r\nProcess finished with exit code 0\r\n```\r\n\r\n## Scala 2.13 (Succeed for `sbt run`, but failed for `spark-submit`)\r\n\r\nHowever, if I use scala version 2.13:\r\n\r\n**build.sbt**\r\n\r\n```\r\nname := &quot;FindRetiredPeople&quot;\r\nversion := &quot;1.0&quot;\r\nscalaVersion := &quot;2.13.10&quot;\r\nlibraryDependencies ++= Seq(\r\n  &quot;org.apache.spark&quot; %% &quot;spark-core&quot; % &quot;3.3.2&quot;,\r\n  &quot;org.apache.spark&quot; %% &quot;spark-sql&quot; % &quot;3.3.2&quot;,\r\n  &quot;org.apache.spark&quot; %% &quot;spark-streaming&quot; % &quot;3.3.2&quot;,\r\n)\r\n```\r\n\r\nI can still successfully run\r\n\r\n```shell\r\nsbt package\r\nsbt run\r\n```\r\n\r\nbut this\r\n\r\n```shell\r\nspark-submit \\\r\n\t--class=FindRetiredPeople \\\r\n\t--master=&quot;local[*]&quot; \\\r\n\ttarget/scala-2.13/findretiredpeople_2.13-1.0.jar\r\n```\r\n\r\nwill throw exception:\r\n\r\n```shell\r\n23/03/21 01:39:31 INFO SparkContext: Running Spark version 3.3.2\r\n23/03/21 01:39:31 WARN NativeCodeLoader: Unable to load native-hadoop library for your platform... using builtin-java classes where applicable\r\n23/03/21 01:39:31 INFO ResourceUtils: ==============================================================\r\n23/03/21 01:39:31 INFO ResourceUtils: No custom resources configured for spark.driver.\r\n23/03/21 01:39:31 INFO ResourceUtils: ==============================================================\r\n23/03/21 01:39:31 INFO SparkContext: Submitted application: find-retired-people\r\n23/03/21 01:39:31 INFO ResourceProfile: Default ResourceProfile created, executor resources: Map(cores -&gt; name: cores, amount: 1, script: , vendor: , memory -&gt; name: memory, amount: 1024, script: , vendor: , offHeap -&gt; name: offHeap, amount: 0, script: , vendor: ), task resources: Map(cpus -&gt; name: cpus, amount: 1.0)\r\n23/03/21 01:39:31 INFO ResourceProfile: Limiting resource is cpu\r\n23/03/21 01:39:31 INFO ResourceProfileManager: Added ResourceProfile id: 0\r\n23/03/21 01:39:31 INFO SecurityManager: Changing view acls to: hongbo-miao\r\n23/03/21 01:39:31 INFO SecurityManager: Changing modify acls to: hongbo-miao\r\n23/03/21 01:39:31 INFO SecurityManager: Changing view acls groups to: \r\n23/03/21 01:39:31 INFO SecurityManager: Changing modify acls groups to: \r\n23/03/21 01:39:31 INFO SecurityManager: SecurityManager: authentication disabled; ui acls disabled; users  with view permissions: Set(hongbo-miao); groups with view permissions: Set(); users  with modify permissions: Set(hongbo-miao); groups with modify permissions: Set()\r\n23/03/21 01:39:31 INFO Utils: Successfully started service &#39;sparkDriver&#39; on port 56517.\r\n23/03/21 01:39:31 INFO SparkEnv: Registering MapOutputTracker\r\n23/03/21 01:39:31 INFO SparkEnv: Registering BlockManagerMaster\r\n23/03/21 01:39:31 INFO BlockManagerMasterEndpoint: Using org.apache.spark.storage.DefaultTopologyMapper for getting topology information\r\n23/03/21 01:39:31 INFO BlockManagerMasterEndpoint: BlockManagerMasterEndpoint up\r\n23/03/21 01:39:31 INFO SparkEnv: Registering BlockManagerMasterHeartbeat\r\n23/03/21 01:39:31 INFO DiskBlockManager: Created local directory at /private/var/folders/22/ntjwd5dx691gvkktkspl0f_00000gq/T/blockmgr-7a60f8cd-54ff-464c-affc-8d9e90cb233f\r\n23/03/21 01:39:31 INFO MemoryStore: MemoryStore started with capacity 434.4 MiB\r\n23/03/21 01:39:31 INFO SparkEnv: Registering OutputCommitCoordinator\r\n23/03/21 01:39:31 INFO Utils: Successfully started service &#39;SparkUI&#39; on port 4040.\r\n23/03/21 01:39:31 INFO SparkContext: Added JAR file:/Users/hongbo-miao/find-retired-people-scala/target/scala-2.13/findretiredpeople_2.13-1.0.jar at spark://10.37.129.2:56517/jars/findretiredpeople_2.13-1.0.jar with timestamp 1679387971368\r\n23/03/21 01:39:32 INFO Executor: Starting executor ID driver on host 10.37.129.2\r\n23/03/21 01:39:32 INFO Executor: Starting executor with user classpath (userClassPathFirst = false): &#39;&#39;\r\n23/03/21 01:39:32 INFO Executor: Fetching spark://10.37.129.2:56517/jars/findretiredpeople_2.13-1.0.jar with timestamp 1679387971368\r\n23/03/21 01:39:32 INFO TransportClientFactory: Successfully created connection to /10.37.129.2:56517 after 12 ms (0 ms spent in bootstraps)\r\n23/03/21 01:39:32 INFO Utils: Fetching spark://10.37.129.2:56517/jars/findretiredpeople_2.13-1.0.jar to /private/var/folders/22/ntjwd5dx691gvkktkspl0f_00000gq/T/spark-4ded8a6d-f9f3-4483-a62a-78edee62932d/userFiles-d17d2628-db18-484a-9718-8a44d7292c3b/fetchFileTemp5844915920242526627.tmp\r\n23/03/21 01:39:32 INFO Executor: Adding file:/private/var/folders/22/ntjwd5dx691gvkktkspl0f_00000gq/T/spark-4ded8a6d-f9f3-4483-a62a-78edee62932d/userFiles-d17d2628-db18-484a-9718-8a44d7292c3b/findretiredpeople_2.13-1.0.jar to class loader\r\n23/03/21 01:39:32 INFO Utils: Successfully started service &#39;org.apache.spark.network.netty.NettyBlockTransferService&#39; on port 56519.\r\n23/03/21 01:39:32 INFO NettyBlockTransferService: Server created on 10.37.129.2:56519\r\n23/03/21 01:39:32 INFO BlockManager: Using org.apache.spark.storage.RandomBlockReplicationPolicy for block replication policy\r\n23/03/21 01:39:32 INFO BlockManagerMaster: Registering BlockManager BlockManagerId(driver, 10.37.129.2, 56519, None)\r\n23/03/21 01:39:32 INFO BlockManagerMasterEndpoint: Registering block manager 10.37.129.2:56519 with 434.4 MiB RAM, BlockManagerId(driver, 10.37.129.2, 56519, None)\r\n23/03/21 01:39:32 INFO BlockManagerMaster: Registered BlockManager BlockManagerId(driver, 10.37.129.2, 56519, None)\r\n23/03/21 01:39:32 INFO BlockManager: Initialized BlockManager: BlockManagerId(driver, 10.37.129.2, 56519, None)\r\n23/03/21 01:39:33 INFO SharedState: Setting hive.metastore.warehouse.dir (&#39;null&#39;) to the value of spark.sql.warehouse.dir.\r\n23/03/21 01:39:33 INFO SharedState: Warehouse path is &#39;file:/Users/hongbo-miao/find-retired-people-scala/spark-warehouse&#39;.\r\nException in thread &quot;main&quot; java.lang.NoSuchMethodError: &#39;org.apache.spark.sql.DatasetHolder org.apache.spark.sql.SparkSession$implicits$.localSeqToDatasetHolder(scala.collection.immutable.Seq, org.apache.spark.sql.Encoder)&#39;\r\n\tat FindRetiredPeople$.main(FindRetiredPeople.scala:22)\r\n\tat FindRetiredPeople.main(FindRetiredPeople.scala)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:578)\r\n\tat org.apache.spark.deploy.JavaMainApplication.start(SparkApplication.scala:52)\r\n\tat org.apache.spark.deploy.SparkSubmit.org$apache$spark$deploy$SparkSubmit$$runMain(SparkSubmit.scala:958)\r\n\tat org.apache.spark.deploy.SparkSubmit.doRunMain$1(SparkSubmit.scala:180)\r\n\tat org.apache.spark.deploy.SparkSubmit.submit(SparkSubmit.scala:203)\r\n\tat org.apache.spark.deploy.SparkSubmit.doSubmit(SparkSubmit.scala:90)\r\n\tat org.apache.spark.deploy.SparkSubmit$$anon$2.doSubmit(SparkSubmit.scala:1046)\r\n\tat org.apache.spark.deploy.SparkSubmit$.main(SparkSubmit.scala:1055)\r\n\tat org.apache.spark.deploy.SparkSubmit.main(SparkSubmit.scala)\r\n23/03/21 01:39:33 INFO SparkContext: Invoking stop() from shutdown hook\r\n23/03/21 01:39:33 INFO SparkUI: Stopped Spark web UI at http://10.37.129.2:4040\r\n23/03/21 01:39:33 INFO MapOutputTrackerMasterEndpoint: MapOutputTrackerMasterEndpoint stopped!\r\n23/03/21 01:39:33 INFO MemoryStore: MemoryStore cleared\r\n23/03/21 01:39:33 INFO BlockManager: BlockManager stopped\r\n23/03/21 01:39:33 INFO BlockManagerMaster: BlockManagerMaster stopped\r\n23/03/21 01:39:33 INFO OutputCommitCoordinator$OutputCommitCoordinatorEndpoint: OutputCommitCoordinator stopped!\r\n23/03/21 01:39:33 INFO SparkContext: Successfully stopped SparkContext\r\n23/03/21 01:39:33 INFO ShutdownHookManager: Shutdown hook called\r\n23/03/21 01:39:33 INFO ShutdownHookManager: Deleting directory /private/var/folders/22/ntjwd5dx691gvkktkspl0f_00000gq/T/spark-4ded8a6d-f9f3-4483-a62a-78edee62932d\r\n23/03/21 01:39:33 INFO ShutdownHookManager: Deleting directory /private/var/folders/22/ntjwd5dx691gvkktkspl0f_00000gq/T/spark-8709497e-302d-4e1b-8eb2-2a1b8f77edfe\r\nmake: *** [spark-submit-local] Error 1\r\n```\r\n\r\nWhat does above exception really mean?\r\n\r\nI do see Spark [officially supports Scala 2.13](https://spark.apache.org/docs/latest/index.html#downloading):\r\n\r\n&gt; Spark runs on Java 8/11/17, Scala 2.12/2.13, Python 3.7+ and R 3.5+.\r\n&gt;\r\n&gt; When using the Scala API, it is necessary for applications to use the same version of Scala that Spark was compiled for. For example, when using Scala 2.13, use Spark compiled for 2.13, and compile code/applications for Scala 2.13 as well.\r\n\r\nAny guide would be appreciate, thanks!","title":"Spark app in Scala 2.13 failed with: Exception in thread &quot;main&quot; java.lang.NoSuchMethodError","body":"<p>I have a very simple Spark app in Scala.</p>\n<p>I am using</p>\n<ul>\n<li>Spark 3.3.2</li>\n<li>sbt 1.8.2</li>\n<li>Java: tried both 11 and 17 for below experiments</li>\n</ul>\n<p><strong>src/main/scala/FindRetiredPeople.scala</strong></p>\n<pre class=\"lang-scala prettyprint-override\"><code>import org.apache.spark.sql.{DataFrame, SparkSession}\n\nobject FindRetiredPeople {\n  def main(args: Array[String]): Unit = {\n    val people = Seq(\n      (1, &quot;Alice&quot;, 25),\n      (2, &quot;Bob&quot;, 30),\n      (3, &quot;Charlie&quot;, 80),\n      (4, &quot;Dave&quot;, 40),\n      (5, &quot;Eve&quot;, 45)\n    )\n\n    val spark: SparkSession = SparkSession.builder()\n      .master(&quot;local[*]&quot;)\n      .appName(&quot;find-retired-people&quot;)\n      .config(&quot;spark.ui.port&quot;, &quot;4040&quot;)\n      .getOrCreate()\n\n    import spark.implicits._\n    val df: DataFrame = people.toDF(&quot;id&quot;, &quot;name&quot;, &quot;age&quot;)\n    df.createOrReplaceTempView(&quot;people&quot;)\n\n    val retiredPeople: DataFrame = spark.sql(&quot;SELECT name, age FROM people WHERE age &gt;= 67&quot;)\n    retiredPeople.show()\n\n    spark.stop()\n  }\n}\n</code></pre>\n<h2>Scala 2.12 (Succeed both for <code>sbt run</code> and <code>spark-submit</code>)</h2>\n<p>When I am using Scala 2.12</p>\n<p><strong>build.sbt</strong></p>\n<pre><code>name := &quot;FindRetiredPeople&quot;\nversion := &quot;1.0&quot;\nscalaVersion := &quot;2.12.17&quot;\nlibraryDependencies ++= Seq(\n  &quot;org.apache.spark&quot; %% &quot;spark-core&quot; % &quot;3.3.2&quot;,\n  &quot;org.apache.spark&quot; %% &quot;spark-sql&quot; % &quot;3.3.2&quot;,\n  &quot;org.apache.spark&quot; %% &quot;spark-streaming&quot; % &quot;3.3.2&quot;,\n)\n</code></pre>\n<p>I can successfully run</p>\n<pre class=\"lang-bash prettyprint-override\"><code>sbt package\nsbt run\n</code></pre>\n<p>and also</p>\n<pre class=\"lang-bash prettyprint-override\"><code>spark-submit \\\n    --class=FindRetiredPeople \\\n    --master=&quot;local[*]&quot; \\\n    target/scala-2.12/findretiredpeople_2.12-1.0.jar\n</code></pre>\n<p><code>spark-submit</code> will print log:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>23/03/21 01:59:23 INFO SparkContext: Running Spark version 3.3.2\n23/03/21 01:59:23 WARN NativeCodeLoader: Unable to load native-hadoop library for your platform... using builtin-java classes where applicable\n23/03/21 01:59:23 INFO ResourceUtils: ==============================================================\n23/03/21 01:59:23 INFO ResourceUtils: No custom resources configured for spark.driver.\n23/03/21 01:59:23 INFO ResourceUtils: ==============================================================\n23/03/21 01:59:23 INFO SparkContext: Submitted application: find-retired-people\n23/03/21 01:59:23 INFO ResourceProfile: Default ResourceProfile created, executor resources: Map(cores -&gt; name: cores, amount: 1, script: , vendor: , memory -&gt; name: memory, amount: 1024, script: , vendor: , offHeap -&gt; name: offHeap, amount: 0, script: , vendor: ), task resources: Map(cpus -&gt; name: cpus, amount: 1.0)\n23/03/21 01:59:23 INFO ResourceProfile: Limiting resource is cpu\n23/03/21 01:59:23 INFO ResourceProfileManager: Added ResourceProfile id: 0\n23/03/21 01:59:23 INFO SecurityManager: Changing view acls to: hongbo-miao\n23/03/21 01:59:23 INFO SecurityManager: Changing modify acls to: hongbo-miao\n23/03/21 01:59:23 INFO SecurityManager: Changing view acls groups to: \n23/03/21 01:59:23 INFO SecurityManager: Changing modify acls groups to: \n23/03/21 01:59:23 INFO SecurityManager: SecurityManager: authentication disabled; ui acls disabled; users  with view permissions: Set(hongbo-miao); groups with view permissions: Set(); users  with modify permissions: Set(hongbo-miao); groups with modify permissions: Set()\n23/03/21 01:59:23 INFO Utils: Successfully started service 'sparkDriver' on port 57085.\n23/03/21 01:59:23 INFO SparkEnv: Registering MapOutputTracker\n23/03/21 01:59:23 INFO SparkEnv: Registering BlockManagerMaster\n23/03/21 01:59:23 INFO BlockManagerMasterEndpoint: Using org.apache.spark.storage.DefaultTopologyMapper for getting topology information\n23/03/21 01:59:23 INFO BlockManagerMasterEndpoint: BlockManagerMasterEndpoint up\n23/03/21 01:59:23 INFO SparkEnv: Registering BlockManagerMasterHeartbeat\n23/03/21 01:59:23 INFO DiskBlockManager: Created local directory at /private/var/folders/22/ntjwd5dx691gvkktkspl0f_00000gq/T/blockmgr-719fedfe-99ac-4399-aaf2-c561f236c487\n23/03/21 01:59:23 INFO MemoryStore: MemoryStore started with capacity 434.4 MiB\n23/03/21 01:59:23 INFO SparkEnv: Registering OutputCommitCoordinator\n23/03/21 01:59:23 INFO Utils: Successfully started service 'SparkUI' on port 4040.\n23/03/21 01:59:23 INFO SparkContext: Added JAR file:/Users/hongbo-miao/find-retired-people-scala/target/scala-2.12/findretiredpeople_2.12-1.0.jar at spark://10.37.129.2:57085/jars/findretiredpeople_2.12-1.0.jar with timestamp 1679389163209\n23/03/21 01:59:23 INFO Executor: Starting executor ID driver on host 10.37.129.2\n23/03/21 01:59:23 INFO Executor: Starting executor with user classpath (userClassPathFirst = false): ''\n23/03/21 01:59:23 INFO Executor: Fetching spark://10.37.129.2:57085/jars/findretiredpeople_2.12-1.0.jar with timestamp 1679389163209\n23/03/21 01:59:23 INFO TransportClientFactory: Successfully created connection to /10.37.129.2:57085 after 14 ms (0 ms spent in bootstraps)\n23/03/21 01:59:23 INFO Utils: Fetching spark://10.37.129.2:57085/jars/findretiredpeople_2.12-1.0.jar to /private/var/folders/22/ntjwd5dx691gvkktkspl0f_00000gq/T/spark-5a9b2fb3-361d-4e3a-9acf-d6292fa0ead3/userFiles-5001866c-99f0-47e2-a6a6-d84091d20a8f/fetchFileTemp16516278909384835567.tmp\n23/03/21 01:59:23 INFO Executor: Adding file:/private/var/folders/22/ntjwd5dx691gvkktkspl0f_00000gq/T/spark-5a9b2fb3-361d-4e3a-9acf-d6292fa0ead3/userFiles-5001866c-99f0-47e2-a6a6-d84091d20a8f/findretiredpeople_2.12-1.0.jar to class loader\n23/03/21 01:59:23 INFO Utils: Successfully started service 'org.apache.spark.network.netty.NettyBlockTransferService' on port 57087.\n23/03/21 01:59:23 INFO NettyBlockTransferService: Server created on 10.37.129.2:57087\n23/03/21 01:59:23 INFO BlockManager: Using org.apache.spark.storage.RandomBlockReplicationPolicy for block replication policy\n23/03/21 01:59:23 INFO BlockManagerMaster: Registering BlockManager BlockManagerId(driver, 10.37.129.2, 57087, None)\n23/03/21 01:59:23 INFO BlockManagerMasterEndpoint: Registering block manager 10.37.129.2:57087 with 434.4 MiB RAM, BlockManagerId(driver, 10.37.129.2, 57087, None)\n23/03/21 01:59:23 INFO BlockManagerMaster: Registered BlockManager BlockManagerId(driver, 10.37.129.2, 57087, None)\n23/03/21 01:59:23 INFO BlockManager: Initialized BlockManager: BlockManagerId(driver, 10.37.129.2, 57087, None)\n23/03/21 01:59:24 INFO SharedState: Setting hive.metastore.warehouse.dir ('null') to the value of spark.sql.warehouse.dir.\n23/03/21 01:59:24 INFO SharedState: Warehouse path is 'file:/Users/hongbo-miao/find-retired-people-scala/spark-warehouse'.\n23/03/21 01:59:25 INFO CodeGenerator: Code generated in 77.321 ms\n23/03/21 01:59:25 INFO CodeGenerator: Code generated in 3.580958 ms\n23/03/21 01:59:25 INFO CodeGenerator: Code generated in 7.1175 ms\n23/03/21 01:59:26 INFO CodeGenerator: Code generated in 6.165709 ms\n+-------+---+\n|   name|age|\n+-------+---+\n|Charlie| 80|\n+-------+---+\n\n23/03/21 01:59:26 INFO SparkUI: Stopped Spark web UI at http://10.37.129.2:4040\n23/03/21 01:59:26 INFO MapOutputTrackerMasterEndpoint: MapOutputTrackerMasterEndpoint stopped!\n23/03/21 01:59:26 INFO MemoryStore: MemoryStore cleared\n23/03/21 01:59:26 INFO BlockManager: BlockManager stopped\n23/03/21 01:59:26 INFO BlockManagerMaster: BlockManagerMaster stopped\n23/03/21 01:59:26 INFO OutputCommitCoordinator$OutputCommitCoordinatorEndpoint: OutputCommitCoordinator stopped!\n23/03/21 01:59:26 INFO SparkContext: Successfully stopped SparkContext\n23/03/21 01:59:26 INFO ShutdownHookManager: Shutdown hook called\n23/03/21 01:59:26 INFO ShutdownHookManager: Deleting directory /private/var/folders/22/ntjwd5dx691gvkktkspl0f_00000gq/T/spark-3c8e7833-ca25-4178-ad2e-d32b8842ff0a\n23/03/21 01:59:26 INFO ShutdownHookManager: Deleting directory /private/var/folders/22/ntjwd5dx691gvkktkspl0f_00000gq/T/spark-5a9b2fb3-361d-4e3a-9acf-d6292fa0ead3\n\nProcess finished with exit code 0\n</code></pre>\n<h2>Scala 2.13 (Succeed for <code>sbt run</code>, but failed for <code>spark-submit</code>)</h2>\n<p>However, if I use scala version 2.13:</p>\n<p><strong>build.sbt</strong></p>\n<pre><code>name := &quot;FindRetiredPeople&quot;\nversion := &quot;1.0&quot;\nscalaVersion := &quot;2.13.10&quot;\nlibraryDependencies ++= Seq(\n  &quot;org.apache.spark&quot; %% &quot;spark-core&quot; % &quot;3.3.2&quot;,\n  &quot;org.apache.spark&quot; %% &quot;spark-sql&quot; % &quot;3.3.2&quot;,\n  &quot;org.apache.spark&quot; %% &quot;spark-streaming&quot; % &quot;3.3.2&quot;,\n)\n</code></pre>\n<p>I can still successfully run</p>\n<pre class=\"lang-bash prettyprint-override\"><code>sbt package\nsbt run\n</code></pre>\n<p>but this</p>\n<pre class=\"lang-bash prettyprint-override\"><code>spark-submit \\\n    --class=FindRetiredPeople \\\n    --master=&quot;local[*]&quot; \\\n    target/scala-2.13/findretiredpeople_2.13-1.0.jar\n</code></pre>\n<p>will throw exception:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>23/03/21 01:39:31 INFO SparkContext: Running Spark version 3.3.2\n23/03/21 01:39:31 WARN NativeCodeLoader: Unable to load native-hadoop library for your platform... using builtin-java classes where applicable\n23/03/21 01:39:31 INFO ResourceUtils: ==============================================================\n23/03/21 01:39:31 INFO ResourceUtils: No custom resources configured for spark.driver.\n23/03/21 01:39:31 INFO ResourceUtils: ==============================================================\n23/03/21 01:39:31 INFO SparkContext: Submitted application: find-retired-people\n23/03/21 01:39:31 INFO ResourceProfile: Default ResourceProfile created, executor resources: Map(cores -&gt; name: cores, amount: 1, script: , vendor: , memory -&gt; name: memory, amount: 1024, script: , vendor: , offHeap -&gt; name: offHeap, amount: 0, script: , vendor: ), task resources: Map(cpus -&gt; name: cpus, amount: 1.0)\n23/03/21 01:39:31 INFO ResourceProfile: Limiting resource is cpu\n23/03/21 01:39:31 INFO ResourceProfileManager: Added ResourceProfile id: 0\n23/03/21 01:39:31 INFO SecurityManager: Changing view acls to: hongbo-miao\n23/03/21 01:39:31 INFO SecurityManager: Changing modify acls to: hongbo-miao\n23/03/21 01:39:31 INFO SecurityManager: Changing view acls groups to: \n23/03/21 01:39:31 INFO SecurityManager: Changing modify acls groups to: \n23/03/21 01:39:31 INFO SecurityManager: SecurityManager: authentication disabled; ui acls disabled; users  with view permissions: Set(hongbo-miao); groups with view permissions: Set(); users  with modify permissions: Set(hongbo-miao); groups with modify permissions: Set()\n23/03/21 01:39:31 INFO Utils: Successfully started service 'sparkDriver' on port 56517.\n23/03/21 01:39:31 INFO SparkEnv: Registering MapOutputTracker\n23/03/21 01:39:31 INFO SparkEnv: Registering BlockManagerMaster\n23/03/21 01:39:31 INFO BlockManagerMasterEndpoint: Using org.apache.spark.storage.DefaultTopologyMapper for getting topology information\n23/03/21 01:39:31 INFO BlockManagerMasterEndpoint: BlockManagerMasterEndpoint up\n23/03/21 01:39:31 INFO SparkEnv: Registering BlockManagerMasterHeartbeat\n23/03/21 01:39:31 INFO DiskBlockManager: Created local directory at /private/var/folders/22/ntjwd5dx691gvkktkspl0f_00000gq/T/blockmgr-7a60f8cd-54ff-464c-affc-8d9e90cb233f\n23/03/21 01:39:31 INFO MemoryStore: MemoryStore started with capacity 434.4 MiB\n23/03/21 01:39:31 INFO SparkEnv: Registering OutputCommitCoordinator\n23/03/21 01:39:31 INFO Utils: Successfully started service 'SparkUI' on port 4040.\n23/03/21 01:39:31 INFO SparkContext: Added JAR file:/Users/hongbo-miao/find-retired-people-scala/target/scala-2.13/findretiredpeople_2.13-1.0.jar at spark://10.37.129.2:56517/jars/findretiredpeople_2.13-1.0.jar with timestamp 1679387971368\n23/03/21 01:39:32 INFO Executor: Starting executor ID driver on host 10.37.129.2\n23/03/21 01:39:32 INFO Executor: Starting executor with user classpath (userClassPathFirst = false): ''\n23/03/21 01:39:32 INFO Executor: Fetching spark://10.37.129.2:56517/jars/findretiredpeople_2.13-1.0.jar with timestamp 1679387971368\n23/03/21 01:39:32 INFO TransportClientFactory: Successfully created connection to /10.37.129.2:56517 after 12 ms (0 ms spent in bootstraps)\n23/03/21 01:39:32 INFO Utils: Fetching spark://10.37.129.2:56517/jars/findretiredpeople_2.13-1.0.jar to /private/var/folders/22/ntjwd5dx691gvkktkspl0f_00000gq/T/spark-4ded8a6d-f9f3-4483-a62a-78edee62932d/userFiles-d17d2628-db18-484a-9718-8a44d7292c3b/fetchFileTemp5844915920242526627.tmp\n23/03/21 01:39:32 INFO Executor: Adding file:/private/var/folders/22/ntjwd5dx691gvkktkspl0f_00000gq/T/spark-4ded8a6d-f9f3-4483-a62a-78edee62932d/userFiles-d17d2628-db18-484a-9718-8a44d7292c3b/findretiredpeople_2.13-1.0.jar to class loader\n23/03/21 01:39:32 INFO Utils: Successfully started service 'org.apache.spark.network.netty.NettyBlockTransferService' on port 56519.\n23/03/21 01:39:32 INFO NettyBlockTransferService: Server created on 10.37.129.2:56519\n23/03/21 01:39:32 INFO BlockManager: Using org.apache.spark.storage.RandomBlockReplicationPolicy for block replication policy\n23/03/21 01:39:32 INFO BlockManagerMaster: Registering BlockManager BlockManagerId(driver, 10.37.129.2, 56519, None)\n23/03/21 01:39:32 INFO BlockManagerMasterEndpoint: Registering block manager 10.37.129.2:56519 with 434.4 MiB RAM, BlockManagerId(driver, 10.37.129.2, 56519, None)\n23/03/21 01:39:32 INFO BlockManagerMaster: Registered BlockManager BlockManagerId(driver, 10.37.129.2, 56519, None)\n23/03/21 01:39:32 INFO BlockManager: Initialized BlockManager: BlockManagerId(driver, 10.37.129.2, 56519, None)\n23/03/21 01:39:33 INFO SharedState: Setting hive.metastore.warehouse.dir ('null') to the value of spark.sql.warehouse.dir.\n23/03/21 01:39:33 INFO SharedState: Warehouse path is 'file:/Users/hongbo-miao/find-retired-people-scala/spark-warehouse'.\nException in thread &quot;main&quot; java.lang.NoSuchMethodError: 'org.apache.spark.sql.DatasetHolder org.apache.spark.sql.SparkSession$implicits$.localSeqToDatasetHolder(scala.collection.immutable.Seq, org.apache.spark.sql.Encoder)'\n    at FindRetiredPeople$.main(FindRetiredPeople.scala:22)\n    at FindRetiredPeople.main(FindRetiredPeople.scala)\n    at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:578)\n    at org.apache.spark.deploy.JavaMainApplication.start(SparkApplication.scala:52)\n    at org.apache.spark.deploy.SparkSubmit.org$apache$spark$deploy$SparkSubmit$$runMain(SparkSubmit.scala:958)\n    at org.apache.spark.deploy.SparkSubmit.doRunMain$1(SparkSubmit.scala:180)\n    at org.apache.spark.deploy.SparkSubmit.submit(SparkSubmit.scala:203)\n    at org.apache.spark.deploy.SparkSubmit.doSubmit(SparkSubmit.scala:90)\n    at org.apache.spark.deploy.SparkSubmit$$anon$2.doSubmit(SparkSubmit.scala:1046)\n    at org.apache.spark.deploy.SparkSubmit$.main(SparkSubmit.scala:1055)\n    at org.apache.spark.deploy.SparkSubmit.main(SparkSubmit.scala)\n23/03/21 01:39:33 INFO SparkContext: Invoking stop() from shutdown hook\n23/03/21 01:39:33 INFO SparkUI: Stopped Spark web UI at http://10.37.129.2:4040\n23/03/21 01:39:33 INFO MapOutputTrackerMasterEndpoint: MapOutputTrackerMasterEndpoint stopped!\n23/03/21 01:39:33 INFO MemoryStore: MemoryStore cleared\n23/03/21 01:39:33 INFO BlockManager: BlockManager stopped\n23/03/21 01:39:33 INFO BlockManagerMaster: BlockManagerMaster stopped\n23/03/21 01:39:33 INFO OutputCommitCoordinator$OutputCommitCoordinatorEndpoint: OutputCommitCoordinator stopped!\n23/03/21 01:39:33 INFO SparkContext: Successfully stopped SparkContext\n23/03/21 01:39:33 INFO ShutdownHookManager: Shutdown hook called\n23/03/21 01:39:33 INFO ShutdownHookManager: Deleting directory /private/var/folders/22/ntjwd5dx691gvkktkspl0f_00000gq/T/spark-4ded8a6d-f9f3-4483-a62a-78edee62932d\n23/03/21 01:39:33 INFO ShutdownHookManager: Deleting directory /private/var/folders/22/ntjwd5dx691gvkktkspl0f_00000gq/T/spark-8709497e-302d-4e1b-8eb2-2a1b8f77edfe\nmake: *** [spark-submit-local] Error 1\n</code></pre>\n<p>What does above exception really mean?</p>\n<p>I do see Spark <a href=\"https://spark.apache.org/docs/latest/index.html#downloading\" rel=\"nofollow noreferrer\">officially supports Scala 2.13</a>:</p>\n<blockquote>\n<p>Spark runs on Java 8/11/17, Scala 2.12/2.13, Python 3.7+ and R 3.5+.</p>\n<p>When using the Scala API, it is necessary for applications to use the same version of Scala that Spark was compiled for. For example, when using Scala 2.13, use Spark compiled for 2.13, and compile code/applications for Scala 2.13 as well.</p>\n</blockquote>\n<p>Any guide would be appreciate, thanks!</p>\n"},{"tags":["java","spring"],"answers":[{"tags":[],"owner":{"account_id":15336345,"reputation":26,"user_id":11064572,"display_name":"elijahbus"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1679393469,"creation_date":1679393469,"answer_id":75799821,"question_id":75749463,"body_markdown":"Do you have default / no args constructors in your serializable classes, I wouldn&#39;t opt for serializing the entity but the column in the entity class instead. \r\n\r\nYou may find more about working with json types with spring in this article by Vlad [https://vladmihalcea.com/java-map-json-jpa-hibernate/][1]\r\n\r\n\r\n  [1]: https://vladmihalcea.com/java-map-json-jpa-hibernate/","title":"Unable to extract JDBC value for position `4`","body":"<p>Do you have default / no args constructors in your serializable classes, I wouldn't opt for serializing the entity but the column in the entity class instead.</p>\n<p>You may find more about working with json types with spring in this article by Vlad <a href=\"https://vladmihalcea.com/java-map-json-jpa-hibernate/\" rel=\"nofollow noreferrer\">https://vladmihalcea.com/java-map-json-jpa-hibernate/</a></p>\n"}],"owner":{"account_id":27330735,"reputation":11,"user_id":20842904,"display_name":"Papahh"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1668,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75799821,"answer_count":1,"score":0,"last_activity_date":1679393469,"creation_date":1678910000,"question_id":75749463,"body_markdown":"In the whole internet there is only two discussions about this problem where this one is usefull\r\nhttps://stackoverflow.com/questions/75326450/spring-boot-jpa-error-unable-to-extract-jdbc-value-for-position-7\r\nand from this one i tryed everything and still get nothing\r\nhttps://stackoverflow.com/questions/75152001/unable-to-extract-jdbc-value-for-position-3\r\nWhen i try to get all my measurements from db in json format, everything ruins to this error\r\n```\r\n2023-03-15T22:42:16.243+03:00 ERROR 952 --- [nio-8080-exec-3] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: org.springframework.orm.jpa.JpaSystemException: Unable to extract JDBC value for position `4`] with root cause\r\n\r\nI am own of hands rn. Is there a really good explanation to this problem\r\n\r\norg.postgresql.util.PSQLException: Bad value for type int : RainSensor\r\n```\r\n\r\nHere is my whole project\r\n\r\nmeasurementDTO\r\n```\r\npublic class MeasurementDTO {\r\n    private float value;\r\n    private boolean raining;\r\n    @JsonBackReference\r\n    private Sensor sensor;\r\n\r\n    public MeasurementDTO()\r\n    {\r\n\r\n    }\r\n\r\n    public MeasurementDTO(float value, boolean raining) {\r\n        this.value = value;\r\n        this.raining = raining;\r\n    }\r\n\r\n    public float getValue() {\r\n        return value;\r\n    }\r\n\r\n    public void setValue(float value) {\r\n        this.value = value;\r\n    }\r\n\r\n    public boolean isRaining() {\r\n        return raining;\r\n    }\r\n\r\n    public void setRaining(boolean raining) {\r\n        this.raining = raining;\r\n    }\r\n    @JsonBackReference\r\n    public Sensor getSensor() {\r\n        return sensor;\r\n    }\r\n\r\n    public void setSensor(Sensor sensor) {\r\n        this.sensor = sensor;\r\n    }\r\n\r\n```\r\nmeasurement\r\n```\r\n@Entity\r\n@Table(name = &quot;measurement&quot;)\r\npublic class Measurement implements Serializable {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    @Column(name = &quot;id&quot;)\r\n    private int id;\r\n    @Column(name = &quot;value&quot;)\r\n    private float value;\r\n\r\n    @Column(name=&quot;raining&quot;)\r\n    private boolean raining;\r\n    @JsonBackReference\r\n    @ManyToOne(fetch = FetchType.EAGER, cascade = CascadeType.ALL)\r\n    @JoinColumn(name=&quot;sensor&quot;)\r\n    private Sensor sensor;\r\n\r\n    @Column(name = &quot;current&quot;)\r\n    private LocalDateTime current;\r\n\r\n    public Measurement() {\r\n\r\n    }\r\n\r\n    public Measurement(float value, boolean raining) {\r\n        this.value = value;\r\n        this.raining = raining;\r\n    }\r\n\r\n    public LocalDateTime getCurrent() {return current;}\r\n\r\n    public void setCurrent(LocalDateTime current) {this.current = current;}\r\n\r\n    public float getValue() {\r\n        return value;\r\n    }\r\n\r\n    public void setValue(float value) {\r\n        this.value = value;\r\n    }\r\n\r\n    public boolean isRaining() {\r\n        return raining;\r\n    }\r\n\r\n    public void setRaining(boolean raining) {\r\n        this.raining = raining;\r\n    }\r\n    @JsonBackReference\r\n    public Sensor getSensor() {\r\n        return sensor;\r\n    }\r\n\r\n    public void setSensor(Sensor sensor) {\r\n        this.sensor = sensor;\r\n    }\r\n\r\n    public void setId(int id) {\r\n        this.id = id;\r\n    }\r\n\r\n    public int getId() {\r\n        return id;\r\n    }\r\n\r\n```\r\nsensorDTO\r\n```\r\npublic class SensorDTO {\r\n\r\n    @NotEmpty(message = &quot;Sensor&#39;s name can&#39;t be empty&quot;)\r\n    @Size(min = 3,max = 250,message = &quot;Amount of characters have to be between 3 and 250&quot;)\r\n    @NaturalId\r\n    private String name;\r\n\r\n    public SensorDTO(String name) {\r\n        this.name = name;\r\n    }\r\n\r\n    public SensorDTO(){\r\n\r\n    }\r\n\r\n    public String getName() {\r\n        return name;\r\n    }\r\n\r\n    public void setName(String name) {\r\n        this.name = name;\r\n    }\r\n\r\n```\r\nsensor\r\n```\r\n@Entity\r\n@Table(name = &quot;Sensor&quot;)\r\npublic class Sensor implements Serializable {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    @Column(name = &quot;id&quot;)\r\n    private int id;\r\n\r\n    @NotEmpty(message = &quot;Sensor&#39;s name can&#39;t be empty&quot;)\r\n    @Size(min = 3,max = 250,message = &quot;Amount of characters have to be between 3 and 250&quot;)\r\n    @Column(name = &quot;name&quot;)\r\n    @NaturalId\r\n    private String name;\r\n\r\n    @JsonManagedReference\r\n    @OneToMany(mappedBy = &quot;sensor&quot;, fetch = FetchType.EAGER, cascade = CascadeType.ALL)\r\n    private List&lt;Measurement&gt; measurements;\r\n\r\n\r\n    @Column(name = &quot;created_at&quot;)\r\n    private LocalDateTime created_at;\r\n\r\n    @Column(name = &quot;updated_at&quot;)\r\n    private LocalDateTime updated_at;\r\n\r\n    public Sensor(){\r\n\r\n    }\r\n    public Sensor(String name) {\r\n        this.name = name;\r\n    }\r\n```\r\nMeasurment Controller\r\n```\r\n@RestController\r\n@RequestMapping(&quot;/measurements&quot;)\r\npublic class MeasurementController {\r\n\r\n    private final MeasurementService measurementService;\r\n    private final ModelMapper modelMapper;\r\n\r\n    @Autowired\r\n    public MeasurementController(MeasurementService measurementService, ModelMapper modelMapper){\r\n        this.measurementService = measurementService;\r\n        this.modelMapper = modelMapper;\r\n    }\r\n\r\n    @GetMapping\r\n    private List&lt;MeasurementDTO&gt; getMeasurements(){\r\n        return measurementService.getAllMeasurements().\r\n                stream().\r\n                map(this::convertToMeasurementDTO).\r\n                collect(Collectors.toList());\r\n    }\r\n    @GetMapping(&quot;/{sensor}&quot;)\r\n    private MeasurementDTO getMeasurement(@PathVariable String sensor){\r\n\r\n        Measurement foundMeas = measurementService.getMeasurement(sensor);\r\n        return convertToMeasurementDTO(foundMeas);\r\n    }\r\n\r\n    @RequestMapping(&quot;/add&quot;)\r\n    public ResponseEntity&lt;HttpStatus&gt; addMeasurement(@RequestBody @Valid Measurement measurement,\r\n                                                     BindingResult bindingResult){\r\n        measurementService.addMeasurement(measurement);\r\n        return ResponseEntity.ok(HttpStatus.OK);\r\n    }\r\n\r\n    private Measurement convertToMeasurement(MeasurementDTO measurementDTO){\r\n        return modelMapper.map(measurementDTO, Measurement.class);\r\n    }\r\n\r\n    private MeasurementDTO convertToMeasurementDTO(Measurement measurement){\r\n        return modelMapper.map(measurement, MeasurementDTO.class);\r\n    }\r\n}\r\n\r\n```\r\n\r\n","title":"Unable to extract JDBC value for position `4`","body":"<p>In the whole internet there is only two discussions about this problem where this one is usefull\n<a href=\"https://stackoverflow.com/questions/75326450/spring-boot-jpa-error-unable-to-extract-jdbc-value-for-position-7\">Spring Boot JPA error: Unable to extract JDBC value for position `7`</a>\nand from this one i tryed everything and still get nothing\n<a href=\"https://stackoverflow.com/questions/75152001/unable-to-extract-jdbc-value-for-position-3\">Unable to extract JDBC value for position `3`</a>\nWhen i try to get all my measurements from db in json format, everything ruins to this error</p>\n<pre><code>2023-03-15T22:42:16.243+03:00 ERROR 952 --- [nio-8080-exec-3] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: org.springframework.orm.jpa.JpaSystemException: Unable to extract JDBC value for position `4`] with root cause\n\nI am own of hands rn. Is there a really good explanation to this problem\n\norg.postgresql.util.PSQLException: Bad value for type int : RainSensor\n</code></pre>\n<p>Here is my whole project</p>\n<p>measurementDTO</p>\n<pre><code>public class MeasurementDTO {\n    private float value;\n    private boolean raining;\n    @JsonBackReference\n    private Sensor sensor;\n\n    public MeasurementDTO()\n    {\n\n    }\n\n    public MeasurementDTO(float value, boolean raining) {\n        this.value = value;\n        this.raining = raining;\n    }\n\n    public float getValue() {\n        return value;\n    }\n\n    public void setValue(float value) {\n        this.value = value;\n    }\n\n    public boolean isRaining() {\n        return raining;\n    }\n\n    public void setRaining(boolean raining) {\n        this.raining = raining;\n    }\n    @JsonBackReference\n    public Sensor getSensor() {\n        return sensor;\n    }\n\n    public void setSensor(Sensor sensor) {\n        this.sensor = sensor;\n    }\n\n</code></pre>\n<p>measurement</p>\n<pre><code>@Entity\n@Table(name = &quot;measurement&quot;)\npublic class Measurement implements Serializable {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @Column(name = &quot;id&quot;)\n    private int id;\n    @Column(name = &quot;value&quot;)\n    private float value;\n\n    @Column(name=&quot;raining&quot;)\n    private boolean raining;\n    @JsonBackReference\n    @ManyToOne(fetch = FetchType.EAGER, cascade = CascadeType.ALL)\n    @JoinColumn(name=&quot;sensor&quot;)\n    private Sensor sensor;\n\n    @Column(name = &quot;current&quot;)\n    private LocalDateTime current;\n\n    public Measurement() {\n\n    }\n\n    public Measurement(float value, boolean raining) {\n        this.value = value;\n        this.raining = raining;\n    }\n\n    public LocalDateTime getCurrent() {return current;}\n\n    public void setCurrent(LocalDateTime current) {this.current = current;}\n\n    public float getValue() {\n        return value;\n    }\n\n    public void setValue(float value) {\n        this.value = value;\n    }\n\n    public boolean isRaining() {\n        return raining;\n    }\n\n    public void setRaining(boolean raining) {\n        this.raining = raining;\n    }\n    @JsonBackReference\n    public Sensor getSensor() {\n        return sensor;\n    }\n\n    public void setSensor(Sensor sensor) {\n        this.sensor = sensor;\n    }\n\n    public void setId(int id) {\n        this.id = id;\n    }\n\n    public int getId() {\n        return id;\n    }\n\n</code></pre>\n<p>sensorDTO</p>\n<pre><code>public class SensorDTO {\n\n    @NotEmpty(message = &quot;Sensor's name can't be empty&quot;)\n    @Size(min = 3,max = 250,message = &quot;Amount of characters have to be between 3 and 250&quot;)\n    @NaturalId\n    private String name;\n\n    public SensorDTO(String name) {\n        this.name = name;\n    }\n\n    public SensorDTO(){\n\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n</code></pre>\n<p>sensor</p>\n<pre><code>@Entity\n@Table(name = &quot;Sensor&quot;)\npublic class Sensor implements Serializable {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @Column(name = &quot;id&quot;)\n    private int id;\n\n    @NotEmpty(message = &quot;Sensor's name can't be empty&quot;)\n    @Size(min = 3,max = 250,message = &quot;Amount of characters have to be between 3 and 250&quot;)\n    @Column(name = &quot;name&quot;)\n    @NaturalId\n    private String name;\n\n    @JsonManagedReference\n    @OneToMany(mappedBy = &quot;sensor&quot;, fetch = FetchType.EAGER, cascade = CascadeType.ALL)\n    private List&lt;Measurement&gt; measurements;\n\n\n    @Column(name = &quot;created_at&quot;)\n    private LocalDateTime created_at;\n\n    @Column(name = &quot;updated_at&quot;)\n    private LocalDateTime updated_at;\n\n    public Sensor(){\n\n    }\n    public Sensor(String name) {\n        this.name = name;\n    }\n</code></pre>\n<p>Measurment Controller</p>\n<pre><code>@RestController\n@RequestMapping(&quot;/measurements&quot;)\npublic class MeasurementController {\n\n    private final MeasurementService measurementService;\n    private final ModelMapper modelMapper;\n\n    @Autowired\n    public MeasurementController(MeasurementService measurementService, ModelMapper modelMapper){\n        this.measurementService = measurementService;\n        this.modelMapper = modelMapper;\n    }\n\n    @GetMapping\n    private List&lt;MeasurementDTO&gt; getMeasurements(){\n        return measurementService.getAllMeasurements().\n                stream().\n                map(this::convertToMeasurementDTO).\n                collect(Collectors.toList());\n    }\n    @GetMapping(&quot;/{sensor}&quot;)\n    private MeasurementDTO getMeasurement(@PathVariable String sensor){\n\n        Measurement foundMeas = measurementService.getMeasurement(sensor);\n        return convertToMeasurementDTO(foundMeas);\n    }\n\n    @RequestMapping(&quot;/add&quot;)\n    public ResponseEntity&lt;HttpStatus&gt; addMeasurement(@RequestBody @Valid Measurement measurement,\n                                                     BindingResult bindingResult){\n        measurementService.addMeasurement(measurement);\n        return ResponseEntity.ok(HttpStatus.OK);\n    }\n\n    private Measurement convertToMeasurement(MeasurementDTO measurementDTO){\n        return modelMapper.map(measurementDTO, Measurement.class);\n    }\n\n    private MeasurementDTO convertToMeasurementDTO(Measurement measurement){\n        return modelMapper.map(measurement, MeasurementDTO.class);\n    }\n}\n\n</code></pre>\n"},{"tags":["java","spring-boot","junit","spring-webflux"],"answers":[{"tags":[],"owner":{"account_id":10941198,"reputation":4394,"user_id":8041003,"display_name":"John Williams"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679339156,"creation_date":1679339156,"answer_id":75794326,"question_id":75792903,"body_markdown":"The following is a minimal example.\r\n\r\nIn src/test/resources create application.yml containing the following:\r\n\r\n    someproperties:\r\n      urlmap:\r\n        dev:\r\n          url1 : http://something1.com\r\n          url2 : http://something2.com \r\n        qa:\r\n          url1 : http://something1.com\r\n          url2 : http://something2.com \r\n\r\nCreate a wrapper class for `someproperties`. I didn&#39;t use Lombok @Data for clarity:\r\n\r\n    package com.example.demo;\r\n    \r\n    import java.util.Map;\r\n    \r\n    import org.springframework.boot.context.properties.ConfigurationProperties;\r\n    import org.springframework.boot.context.properties.EnableConfigurationProperties;\r\n    import org.springframework.stereotype.Component;\r\n    \r\n    \r\n    @Component\r\n    @EnableConfigurationProperties\r\n    @ConfigurationProperties(prefix =&quot;someproperties&quot;)\r\n    public class SomeProperties {\r\n    \r\n    \tpublic Map&lt;String, Map&lt;String,String&gt;&gt; urlmap;\r\n    \r\n    \tpublic Map&lt;String, Map&lt;String, String&gt;&gt; getUrlmap() {\r\n    \t\treturn urlmap;\r\n    \t}\r\n    \r\n    \tpublic void setUrlmap(Map&lt;String, Map&lt;String, String&gt;&gt; urlmap) {\r\n    \t\tthis.urlmap = urlmap;\r\n    \t}\r\n    \r\n    \r\n    }\r\n\r\nReference `SomeProperties` from your `ConsumersClient` class:\r\n\r\n    package com.example.demo;\r\n    \r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.stereotype.Component;\r\n    \r\n    @Component\r\n    public class ConsumersClient {\r\n    \r\n    \t@Autowired\r\n    \tSomeProperties someProperties;\r\n    \t\r\n        public void demo() {\r\n            String uri = null;\r\n            \r\n    \r\n                uri = someProperties.getUrlmap().get(&quot;dev&quot;).get(&quot;url1&quot;);\r\n                \r\n                System.out.println(&quot;dev/url1: &quot; + uri);\r\n    \r\n                uri = someProperties.getUrlmap().get(&quot;prod&quot;).get(&quot;url2&quot;);\r\n     \r\n                System.out.println(&quot;prod/url2: &quot; + uri);\r\n        }\r\n    \r\n    }\r\n\r\nCreate a JUnit5 test as follows:\r\n\r\n    package com.example.demo;\r\n    \r\n    import java.io.IOException;\r\n    \r\n    import org.junit.jupiter.api.Test;\r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.boot.test.context.SpringBootTest;\r\n    import org.springframework.test.context.TestPropertySource;\r\n    \r\n    @SpringBootTest\r\n    @TestPropertySource(locations = &quot;classpath:application.yml&quot;)\r\n    public class SomeClientTest {\r\n    \r\n    \t@Autowired\r\n    \tConsumersClient consumersClient;\r\n    \r\n        @Test\r\n        public void testGetSomething() throws IOException {\r\n        \tconsumersClient.demo();\r\n        }\r\n    }\r\n\r\nRun it\r\n \r\n[![test results][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/yyg3o.png\r\n","title":"Configuring property map&lt;String , map&lt;string,string&gt;&gt; in spring junit","body":"<p>The following is a minimal example.</p>\n<p>In src/test/resources create application.yml containing the following:</p>\n<pre><code>someproperties:\n  urlmap:\n    dev:\n      url1 : http://something1.com\n      url2 : http://something2.com \n    qa:\n      url1 : http://something1.com\n      url2 : http://something2.com \n</code></pre>\n<p>Create a wrapper class for <code>someproperties</code>. I didn't use Lombok @Data for clarity:</p>\n<pre><code>package com.example.demo;\n\nimport java.util.Map;\n\nimport org.springframework.boot.context.properties.ConfigurationProperties;\nimport org.springframework.boot.context.properties.EnableConfigurationProperties;\nimport org.springframework.stereotype.Component;\n\n\n@Component\n@EnableConfigurationProperties\n@ConfigurationProperties(prefix =&quot;someproperties&quot;)\npublic class SomeProperties {\n\n    public Map&lt;String, Map&lt;String,String&gt;&gt; urlmap;\n\n    public Map&lt;String, Map&lt;String, String&gt;&gt; getUrlmap() {\n        return urlmap;\n    }\n\n    public void setUrlmap(Map&lt;String, Map&lt;String, String&gt;&gt; urlmap) {\n        this.urlmap = urlmap;\n    }\n\n\n}\n</code></pre>\n<p>Reference <code>SomeProperties</code> from your <code>ConsumersClient</code> class:</p>\n<pre><code>package com.example.demo;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Component;\n\n@Component\npublic class ConsumersClient {\n\n    @Autowired\n    SomeProperties someProperties;\n    \n    public void demo() {\n        String uri = null;\n        \n\n            uri = someProperties.getUrlmap().get(&quot;dev&quot;).get(&quot;url1&quot;);\n            \n            System.out.println(&quot;dev/url1: &quot; + uri);\n\n            uri = someProperties.getUrlmap().get(&quot;prod&quot;).get(&quot;url2&quot;);\n \n            System.out.println(&quot;prod/url2: &quot; + uri);\n    }\n\n}\n</code></pre>\n<p>Create a JUnit5 test as follows:</p>\n<pre><code>package com.example.demo;\n\nimport java.io.IOException;\n\nimport org.junit.jupiter.api.Test;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.test.context.SpringBootTest;\nimport org.springframework.test.context.TestPropertySource;\n\n@SpringBootTest\n@TestPropertySource(locations = &quot;classpath:application.yml&quot;)\npublic class SomeClientTest {\n\n    @Autowired\n    ConsumersClient consumersClient;\n\n    @Test\n    public void testGetSomething() throws IOException {\n        consumersClient.demo();\n    }\n}\n</code></pre>\n<p>Run it</p>\n<p><a href=\"https://i.stack.imgur.com/yyg3o.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/yyg3o.png\" alt=\"test results\" /></a></p>\n"}],"owner":{"account_id":18591034,"reputation":1258,"user_id":13548254,"display_name":"user1354825"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":277,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1679393094,"creation_date":1679329753,"question_id":75792903,"body_markdown":"I have a client class that looks like this:\r\n```\r\n\r\n\r\n@Configuration\r\n@RequiredArgsConstructor\r\n@Slf4j\r\n@Data\r\n@ConfigurationProperties(prefix = &quot;someproperties&quot;)\r\npublic class SomeClient {\r\n\r\n    private final WebClient webclient;\r\n\r\n    public  Map&lt;String, Map&lt;String, String&gt;&gt; urlmap = new HashMap&lt;String, Map&lt;String, String&gt;&gt;();\r\n\r\n  \r\n    public Mono&lt;ResponseEntity&lt;SomeResponse&gt;&gt; getSomeData(String resourceId, ServerWebExchange exchange) {\r\n        String uri = null;\r\n        \r\n        List&lt;String&gt; env = some-keys..;\r\n\r\n        if(!Objects.isNull(env))\r\n        {\r\n            uri = urlmap.get(env.get(0)).get(&quot;url1&quot;);\r\n        }\r\n        else\r\n        {\r\n            uri = urlmap.get(&quot;prod&quot;).get(&quot;url2&quot;);\r\n        }\r\n        \r\n\r\n\r\n       //and call the target sevice\r\n\r\n    }\r\n\r\n\r\n\r\n```\r\n\r\nMy properties look like this:\r\n```\r\nsomeproperties:\r\n  urlmap:\r\n    dev:\r\n      url1 : http://something1.com\r\n      url2 : http://something2.com \r\n    qa:\r\n      url1 : http://something1.com\r\n      url2 : http://something2.com \r\n\r\n```\r\n\r\nWhen i run the app it works fine, but my junit fails with null pointer exception at:\r\nIt seems like the urlmap was not initialized\r\n```\r\n else\r\n        {\r\n            uri = urlmap.get(&quot;prod&quot;).get(&quot;url2&quot;);\r\n        }\r\n```\r\n\r\nIn order to get it working with the junits, i added annotations:\r\nMy junit looks like:\r\n\r\n```\r\n@ExtendWith(MockitoExtension.class)\r\n@EnableConfigurationProperties(value = SomeClient.class)\r\n@TestPropertySource(locations = &quot;classpath:application-test.properties&quot;)\r\n@ConfigurationProperties(prefix = &quot;someproperties&quot;)\r\npublic class SomeClientTest {\r\n\r\n    private static final String SOME_URL = &quot;/v2/something/{someid}/resource&quot;;\r\n\r\n    @InjectMocks\r\n    private SomeClient someClient;\r\n\r\n    @Mock\r\n    private CustomWebClient genericWebClient;\r\n\t\r\n    @Mock\r\n    private Map&lt;String, Map&lt;String,String&gt;&gt; urlMap = new HashMap&lt;String, Map&lt;String, String&gt;&gt;();\r\n\r\n    @Test\r\n    public void testGetSomething() throws IOException {\r\n\\\r\n        Map&lt;String, Map&lt;String,String&gt;&gt; uriMap = generateUriMap();\r\n\r\n\r\n        String someID = &quot;jhfjhtf6&quot;;\r\n        Map&lt;String,String&gt; pathVars = new HashedMap&lt;&gt;();\r\n        pathVars.put(&quot;someId&quot;,someID);\r\n\r\n\r\n        when(genericWebClient.invoketarget(any(URI.class),any(), any(Class.class), any(HttpMethod.class),any(Some.class), // invoketarget is a custome method\r\n                anyBoolean(), any(Smething.class))).thenReturn(somemonoresponse);\r\n        when(someUtil.typeCastToMonoResponseEntity(any())).thenReturn(somemonoresponse);\r\n \r\n\r\n        Mono&lt;ResponseEntity&lt;somemonoresponse&gt;&gt; resp = someClient.getSomething(someID,webExchange);\r\n\r\n        StepVerifier.create(consumerIdInsights)\r\n                .consumeNextWith(response -&gt; {\r\n                    assertNotNull(response);\r\n                })\r\n                .verifyComplete();\r\n    }\r\n\r\n```\r\n\r\nHow should i mock/autowire/initialize this map ???\r\n\r\n","title":"Configuring property map&lt;String , map&lt;string,string&gt;&gt; in spring junit","body":"<p>I have a client class that looks like this:</p>\n<pre><code>\n\n@Configuration\n@RequiredArgsConstructor\n@Slf4j\n@Data\n@ConfigurationProperties(prefix = &quot;someproperties&quot;)\npublic class SomeClient {\n\n    private final WebClient webclient;\n\n    public  Map&lt;String, Map&lt;String, String&gt;&gt; urlmap = new HashMap&lt;String, Map&lt;String, String&gt;&gt;();\n\n  \n    public Mono&lt;ResponseEntity&lt;SomeResponse&gt;&gt; getSomeData(String resourceId, ServerWebExchange exchange) {\n        String uri = null;\n        \n        List&lt;String&gt; env = some-keys..;\n\n        if(!Objects.isNull(env))\n        {\n            uri = urlmap.get(env.get(0)).get(&quot;url1&quot;);\n        }\n        else\n        {\n            uri = urlmap.get(&quot;prod&quot;).get(&quot;url2&quot;);\n        }\n        \n\n\n       //and call the target sevice\n\n    }\n\n\n\n</code></pre>\n<p>My properties look like this:</p>\n<pre><code>someproperties:\n  urlmap:\n    dev:\n      url1 : http://something1.com\n      url2 : http://something2.com \n    qa:\n      url1 : http://something1.com\n      url2 : http://something2.com \n\n</code></pre>\n<p>When i run the app it works fine, but my junit fails with null pointer exception at:\nIt seems like the urlmap was not initialized</p>\n<pre><code> else\n        {\n            uri = urlmap.get(&quot;prod&quot;).get(&quot;url2&quot;);\n        }\n</code></pre>\n<p>In order to get it working with the junits, i added annotations:\nMy junit looks like:</p>\n<pre><code>@ExtendWith(MockitoExtension.class)\n@EnableConfigurationProperties(value = SomeClient.class)\n@TestPropertySource(locations = &quot;classpath:application-test.properties&quot;)\n@ConfigurationProperties(prefix = &quot;someproperties&quot;)\npublic class SomeClientTest {\n\n    private static final String SOME_URL = &quot;/v2/something/{someid}/resource&quot;;\n\n    @InjectMocks\n    private SomeClient someClient;\n\n    @Mock\n    private CustomWebClient genericWebClient;\n    \n    @Mock\n    private Map&lt;String, Map&lt;String,String&gt;&gt; urlMap = new HashMap&lt;String, Map&lt;String, String&gt;&gt;();\n\n    @Test\n    public void testGetSomething() throws IOException {\n\\\n        Map&lt;String, Map&lt;String,String&gt;&gt; uriMap = generateUriMap();\n\n\n        String someID = &quot;jhfjhtf6&quot;;\n        Map&lt;String,String&gt; pathVars = new HashedMap&lt;&gt;();\n        pathVars.put(&quot;someId&quot;,someID);\n\n\n        when(genericWebClient.invoketarget(any(URI.class),any(), any(Class.class), any(HttpMethod.class),any(Some.class), // invoketarget is a custome method\n                anyBoolean(), any(Smething.class))).thenReturn(somemonoresponse);\n        when(someUtil.typeCastToMonoResponseEntity(any())).thenReturn(somemonoresponse);\n \n\n        Mono&lt;ResponseEntity&lt;somemonoresponse&gt;&gt; resp = someClient.getSomething(someID,webExchange);\n\n        StepVerifier.create(consumerIdInsights)\n                .consumeNextWith(response -&gt; {\n                    assertNotNull(response);\n                })\n                .verifyComplete();\n    }\n\n</code></pre>\n<p>How should i mock/autowire/initialize this map ???</p>\n"},{"tags":["java","benchmarking","jmh"],"answers":[{"tags":[],"owner":{"account_id":17228781,"reputation":3548,"user_id":12473843,"display_name":"Sergey Tsypanov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679392673,"creation_date":1679392673,"answer_id":75799687,"question_id":75757756,"body_markdown":"First of all, `-f` property is a number of forks, not files, so it must be `int` value.\r\nSecond, in your  particular case you could exclude `method3()` with `-e` flag:\r\n```sh\r\n$ java -jar target/benchmarks.jar -e package-name.TestBenchmark.method3\r\n```\r\nPay attention, that value of `-e` is regexp.\r\nFor debugging purposes you could use `-l` flag listing the benchmarks that match a filter, and exit.","title":"How to run only a few benchmark tests with a jar file in JMH?","body":"<p>First of all, <code>-f</code> property is a number of forks, not files, so it must be <code>int</code> value.\nSecond, in your  particular case you could exclude <code>method3()</code> with <code>-e</code> flag:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>$ java -jar target/benchmarks.jar -e package-name.TestBenchmark.method3\n</code></pre>\n<p>Pay attention, that value of <code>-e</code> is regexp.\nFor debugging purposes you could use <code>-l</code> flag listing the benchmarks that match a filter, and exit.</p>\n"}],"owner":{"account_id":10028461,"reputation":2371,"user_id":8720421,"display_name":"one-hand-octopus"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":312,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1679392673,"creation_date":1678977478,"question_id":75757756,"body_markdown":"I have the following JMH with 3 benchmark tests:\r\n```\r\n@BenchmarkMode(Mode.AverageTime)\r\n@OutputTimeUnit(TimeUnit.NANOSECONDS)\r\n@Warmup(iterations = 5, time = 1, timeUnit = TimeUnit.SECONDS)\r\n@Measurement(iterations = 5, time = 1, timeUnit = TimeUnit.SECONDS)\r\n@Fork(1)\r\n\r\n@State(Scope.Benchmark)\r\npublic class TestBenchmark {\r\n    private CW cw;\r\n\r\n    @Param({&quot;C:data.csv&quot;})\r\n    public String fileName;\r\n\r\n\r\n    @Param({&quot;100&quot;})\r\n    public int id;\r\n\r\n    @Setup\r\n    public void setup() {\r\n        cw = new CW(fileName);\r\n    }\r\n\r\n    @Benchmark\r\n    public void method1() {\r\n        cw.method1(id);\r\n    }\r\n\r\n    @Benchmark\r\n    public void method2() {\r\n        cw.method2(id);\r\n    }\r\n\r\n    @Benchmark\r\n    public void method3() {\r\n        cw.method3(id);\r\n    }\r\n\r\n}\r\n```\r\n\r\nI ran `mvn clean install` to compile a benchmark.jar. Now I&#39;d like to only run benchmark tests for method1 and method2, not method3, how can I do it?\r\n\r\nI tried `java -jar benchmark.jar -f &quot;method1|method2&quot;, but got error: \r\n```\r\nError parsing command line:\r\n Cannot parse argument &#39;method1|method2&#39; of option f\r\n```","title":"How to run only a few benchmark tests with a jar file in JMH?","body":"<p>I have the following JMH with 3 benchmark tests:</p>\n<pre><code>@BenchmarkMode(Mode.AverageTime)\n@OutputTimeUnit(TimeUnit.NANOSECONDS)\n@Warmup(iterations = 5, time = 1, timeUnit = TimeUnit.SECONDS)\n@Measurement(iterations = 5, time = 1, timeUnit = TimeUnit.SECONDS)\n@Fork(1)\n\n@State(Scope.Benchmark)\npublic class TestBenchmark {\n    private CW cw;\n\n    @Param({&quot;C:data.csv&quot;})\n    public String fileName;\n\n\n    @Param({&quot;100&quot;})\n    public int id;\n\n    @Setup\n    public void setup() {\n        cw = new CW(fileName);\n    }\n\n    @Benchmark\n    public void method1() {\n        cw.method1(id);\n    }\n\n    @Benchmark\n    public void method2() {\n        cw.method2(id);\n    }\n\n    @Benchmark\n    public void method3() {\n        cw.method3(id);\n    }\n\n}\n</code></pre>\n<p>I ran <code>mvn clean install</code> to compile a benchmark.jar. Now I'd like to only run benchmark tests for method1 and method2, not method3, how can I do it?</p>\n<p>I tried `java -jar benchmark.jar -f &quot;method1|method2&quot;, but got error:</p>\n<pre><code>Error parsing command line:\n Cannot parse argument 'method1|method2' of option f\n</code></pre>\n"},{"tags":["java","cucumber","micronaut"],"comments":[{"owner":{"account_id":4895787,"reputation":10833,"user_id":3945473,"display_name":"M.P. Korstanje"},"score":0,"creation_date":1573736992,"post_id":58854033,"comment_id":103986490,"body_markdown":"This won&#39;t work. `@Micronaut` is an is a Junit5 extension. Cucumber is using JUnit4. It could be made to work by implementing an `ObjectFactory` for Cucumber though.","body":"This won&#39;t work. <code>@Micronaut</code> is an is a Junit5 extension. Cucumber is using JUnit4. It could be made to work by implementing an <code>ObjectFactory</code> for Cucumber though."},{"owner":{"account_id":10408630,"reputation":31,"user_id":7674769,"display_name":"Iv&#225;n"},"score":0,"creation_date":1573809914,"post_id":58854033,"comment_id":104015474,"body_markdown":"I see the JUnit 4 vs 5 thing. Thx. But what do you mean by the ObjectFactory? Is it a JUnit 5 feature for extending its functionality?","body":"I see the JUnit 4 vs 5 thing. Thx. But what do you mean by the ObjectFactory? Is it a JUnit 5 feature for extending its functionality?"},{"owner":{"account_id":4895787,"reputation":10833,"user_id":3945473,"display_name":"M.P. Korstanje"},"score":0,"creation_date":1573810717,"post_id":58854033,"comment_id":104015932,"body_markdown":"It&#39;s a Cucumber feature used to support dependency injection into your step definitions (effectively what Micronaut is doing).","body":"It&#39;s a Cucumber feature used to support dependency injection into your step definitions (effectively what Micronaut is doing)."},{"owner":{"account_id":10408630,"reputation":31,"user_id":7674769,"display_name":"Iv&#225;n"},"score":0,"creation_date":1573835058,"post_id":58854033,"comment_id":104029217,"body_markdown":"I see. Thank you","body":"I see. Thank you"},{"owner":{"account_id":3745896,"reputation":2369,"user_id":3114566,"display_name":"ahll"},"score":0,"creation_date":1614428711,"post_id":58854033,"comment_id":117385757,"body_markdown":"Some one get it working with junit 5?","body":"Some one get it working with junit 5?"},{"owner":{"account_id":2649192,"reputation":1945,"user_id":2291305,"accept_rate":100,"display_name":"jics"},"score":0,"creation_date":1646543551,"post_id":58854033,"comment_id":126147363,"body_markdown":"I found this project https://github.com/david-romero/cucumber-micronaut but only support `@Named` annotation. I&#39;d like something with `@ConfigurationProperties` support too. But i think it&#39;s hard to make a fully support class for all annotations possibles","body":"I found this project <a href=\"https://github.com/david-romero/cucumber-micronaut\" rel=\"nofollow noreferrer\">github.com/david-romero/cucumber-micronaut</a> but only support <code>@Named</code> annotation. I&#39;d like something with <code>@ConfigurationProperties</code> support too. But i think it&#39;s hard to make a fully support class for all annotations possibles"}],"answers":[{"tags":[],"owner":{"account_id":88584,"reputation":7239,"user_id":244911,"accept_rate":29,"display_name":"LE GALL Beno&#238;t"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1679392525,"creation_date":1679391763,"answer_id":75799519,"question_id":58854033,"body_markdown":"here is my version of ObjectFactory bound with Micronaut. So far, it has been working with all beans declared inside our project.\r\n\r\n\r\n```java\r\npackage com.myproject.libs.cucumber;\r\n\r\nimport lombok.extern.slf4j.Slf4j;\r\n\r\nimport io.cucumber.core.backend.ObjectFactory;\r\nimport io.micronaut.context.ApplicationContext;\r\nimport io.micronaut.runtime.server.EmbeddedServer;\r\n\r\n/**\r\n * Will start an {@link EmbeddedServer} at the start then stop it at the end of &lt;strong&gt;each&lt;/strong&gt; Scenario&lt;br&gt;\r\n * Will also use the {@link ApplicationContext} to resolve Glue beans\r\n */\r\n@Slf4j\r\npublic final class MicronautObjectFactory implements ObjectFactory {\r\n\r\n    private EmbeddedServer embeddedServer;\r\n\r\n    @Override\r\n    public void start() {\r\n        log.info(&quot;#### Starting EmbeddedServer&quot;);\r\n        embeddedServer = ApplicationContext.run(EmbeddedServer.class, &quot;test&quot;, &quot;cucumber&quot;);\r\n    }\r\n\r\n    @Override\r\n    public void stop() {\r\n        if (embeddedServer != null) {\r\n            log.info(&quot;#### Stopping EmbeddedServer&quot;);\r\n            embeddedServer.stop();\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public &lt;T&gt; T getInstance(final Class&lt;T&gt; beanType) {\r\n        return embeddedServer.getApplicationContext().getBean(beanType);\r\n    }\r\n\r\n    @Override\r\n    public boolean addClass(final Class&lt;?&gt; aClass) {\r\n        return true;\r\n    }\r\n\r\n}\r\n```\r\n\r\nYou&#39;ll still need to \r\n - declare this bean inside `resources/META-INF/services/io.cucumber.core.backend.ObjectFactory` file with simple line `com.myproject.libs.cucumber.MicronautObjectFactory`\r\n - (optional) also add file `resources/cucumber.properties` with values\r\n```\r\n# Cucumber properties to be applied, even when running feature&#39;s scenario manually\r\n# https://github.com/cucumber/cucumber-jvm/tree/main/junit-platform-engine#configuration-options\r\ncucumber.publish.quiet=true\r\ncucumber.plugin=json:build/reports/cucumber.json\r\ncucumber.junit-platform.naming-strategy=long\r\ncucumber.object-factory=com.myproject.libs.cucumber.MicronautObjectFactory\r\n```\r\n - and to facilitate the usage of it, create your own annotation\r\n```java\r\npackage com.myproject.libs.cucumber;\r\n\r\nimport static io.cucumber.junit.platform.engine.Constants.JUNIT_PLATFORM_NAMING_STRATEGY_PROPERTY_NAME;\r\nimport static io.cucumber.junit.platform.engine.Constants.PLUGIN_PROPERTY_NAME;\r\nimport static io.cucumber.junit.platform.engine.Constants.PLUGIN_PUBLISH_QUIET_PROPERTY_NAME;\r\n\r\nimport java.lang.annotation.Documented;\r\nimport java.lang.annotation.ElementType;\r\nimport java.lang.annotation.Inherited;\r\nimport java.lang.annotation.Retention;\r\nimport java.lang.annotation.RetentionPolicy;\r\nimport java.lang.annotation.Target;\r\n\r\nimport org.junit.platform.commons.annotation.Testable;\r\nimport org.junit.platform.suite.api.ConfigurationParameter;\r\nimport org.junit.platform.suite.api.IncludeEngines;\r\nimport org.junit.platform.suite.api.SelectClasspathResource;\r\nimport org.junit.platform.suite.api.Suite;\r\n\r\n@Retention(RetentionPolicy.RUNTIME)\r\n@Target(ElementType.TYPE)\r\n@Inherited\r\n@Documented\r\n@Testable\r\n@Suite\r\n@IncludeEngines(&quot;cucumber&quot;)\r\n@SelectClasspathResource(&quot;features&quot;)\r\n@ConfigurationParameter(key = PLUGIN_PROPERTY_NAME, value = &quot;json:build/reports/cucumber.json&quot;)\r\n@ConfigurationParameter(key = JUNIT_PLATFORM_NAMING_STRATEGY_PROPERTY_NAME, value = &quot;long&quot;)\r\n@ConfigurationParameter(key = PLUGIN_PUBLISH_QUIET_PROPERTY_NAME, value = &quot;true&quot;)\r\npublic @interface MicronautCucumber {\r\n}\r\n```\r\n\r\nnote the dependencies you need:\r\n- io.cucumber:cucumber-java\r\n- io.cucumber:cucumber-junit-platform-engine\r\n- org.junit.platform:junit-platorm-suite\r\n- io.micronaut:micronaut-context","title":"Cucumber with Micronaut","body":"<p>here is my version of ObjectFactory bound with Micronaut. So far, it has been working with all beans declared inside our project.</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.myproject.libs.cucumber;\n\nimport lombok.extern.slf4j.Slf4j;\n\nimport io.cucumber.core.backend.ObjectFactory;\nimport io.micronaut.context.ApplicationContext;\nimport io.micronaut.runtime.server.EmbeddedServer;\n\n/**\n * Will start an {@link EmbeddedServer} at the start then stop it at the end of &lt;strong&gt;each&lt;/strong&gt; Scenario&lt;br&gt;\n * Will also use the {@link ApplicationContext} to resolve Glue beans\n */\n@Slf4j\npublic final class MicronautObjectFactory implements ObjectFactory {\n\n    private EmbeddedServer embeddedServer;\n\n    @Override\n    public void start() {\n        log.info(&quot;#### Starting EmbeddedServer&quot;);\n        embeddedServer = ApplicationContext.run(EmbeddedServer.class, &quot;test&quot;, &quot;cucumber&quot;);\n    }\n\n    @Override\n    public void stop() {\n        if (embeddedServer != null) {\n            log.info(&quot;#### Stopping EmbeddedServer&quot;);\n            embeddedServer.stop();\n        }\n    }\n\n    @Override\n    public &lt;T&gt; T getInstance(final Class&lt;T&gt; beanType) {\n        return embeddedServer.getApplicationContext().getBean(beanType);\n    }\n\n    @Override\n    public boolean addClass(final Class&lt;?&gt; aClass) {\n        return true;\n    }\n\n}\n</code></pre>\n<p>You'll still need to</p>\n<ul>\n<li>declare this bean inside <code>resources/META-INF/services/io.cucumber.core.backend.ObjectFactory</code> file with simple line <code>com.myproject.libs.cucumber.MicronautObjectFactory</code></li>\n<li>(optional) also add file <code>resources/cucumber.properties</code> with values</li>\n</ul>\n<pre><code># Cucumber properties to be applied, even when running feature's scenario manually\n# https://github.com/cucumber/cucumber-jvm/tree/main/junit-platform-engine#configuration-options\ncucumber.publish.quiet=true\ncucumber.plugin=json:build/reports/cucumber.json\ncucumber.junit-platform.naming-strategy=long\ncucumber.object-factory=com.myproject.libs.cucumber.MicronautObjectFactory\n</code></pre>\n<ul>\n<li>and to facilitate the usage of it, create your own annotation</li>\n</ul>\n<pre class=\"lang-java prettyprint-override\"><code>package com.myproject.libs.cucumber;\n\nimport static io.cucumber.junit.platform.engine.Constants.JUNIT_PLATFORM_NAMING_STRATEGY_PROPERTY_NAME;\nimport static io.cucumber.junit.platform.engine.Constants.PLUGIN_PROPERTY_NAME;\nimport static io.cucumber.junit.platform.engine.Constants.PLUGIN_PUBLISH_QUIET_PROPERTY_NAME;\n\nimport java.lang.annotation.Documented;\nimport java.lang.annotation.ElementType;\nimport java.lang.annotation.Inherited;\nimport java.lang.annotation.Retention;\nimport java.lang.annotation.RetentionPolicy;\nimport java.lang.annotation.Target;\n\nimport org.junit.platform.commons.annotation.Testable;\nimport org.junit.platform.suite.api.ConfigurationParameter;\nimport org.junit.platform.suite.api.IncludeEngines;\nimport org.junit.platform.suite.api.SelectClasspathResource;\nimport org.junit.platform.suite.api.Suite;\n\n@Retention(RetentionPolicy.RUNTIME)\n@Target(ElementType.TYPE)\n@Inherited\n@Documented\n@Testable\n@Suite\n@IncludeEngines(&quot;cucumber&quot;)\n@SelectClasspathResource(&quot;features&quot;)\n@ConfigurationParameter(key = PLUGIN_PROPERTY_NAME, value = &quot;json:build/reports/cucumber.json&quot;)\n@ConfigurationParameter(key = JUNIT_PLATFORM_NAMING_STRATEGY_PROPERTY_NAME, value = &quot;long&quot;)\n@ConfigurationParameter(key = PLUGIN_PUBLISH_QUIET_PROPERTY_NAME, value = &quot;true&quot;)\npublic @interface MicronautCucumber {\n}\n</code></pre>\n<p>note the dependencies you need:</p>\n<ul>\n<li>io.cucumber:cucumber-java</li>\n<li>io.cucumber:cucumber-junit-platform-engine</li>\n<li>org.junit.platform:junit-platorm-suite</li>\n<li>io.micronaut:micronaut-context</li>\n</ul>\n"}],"owner":{"account_id":10408630,"reputation":31,"user_id":7674769,"display_name":"Iv&#225;n"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1309,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1679392525,"creation_date":1573725747,"question_id":58854033,"body_markdown":"I am trying to use Cucumber with Micronaut but the @MicronautTest annotation simply does not work (theApple is not injected - see the code below) when I try to use it with cucumber. If I run it without Cucumber it is OK. Do you have any experience with this? Should it work?\r\n\r\nThanks Ivan\r\n\r\nThese are the classes\r\n\r\nclass1\r\n    \r\n    import io.cucumber.junit.Cucumber;\r\n    import io.cucumber.junit.CucumberOptions;\r\n    import org.junit.runner.RunWith;\r\n    \r\n    @RunWith(Cucumber.class)\r\n    @CucumberOptions(plugin = { &quot;pretty&quot; },\r\n            features = &quot;src/test/resources&quot;\r\n    )\r\n    public class TheRunner {\r\n    }\r\n\r\nclass2    \r\n    \r\n    import io.cucumber.java.en.Given;\r\n    import io.cucumber.java.en.Then;\r\n    import io.cucumber.java.en.When;\r\n    import io.micronaut.context.annotation.Value;\r\n    import io.micronaut.test.annotation.MicronautTest;\r\n    import org.junit.jupiter.api.Test;\r\n\r\n    @MicronautTest\r\n    public class Steps {\r\n    \r\n        @Value(&quot;apple&quot;)\r\n        private String theApple;\r\n    \r\n    //  @Test\r\n    //  public void test() {\r\n    //     System.out.println(&quot;Value: &quot; + theApple);\r\n    //  }\r\n    \r\n        @Given(&quot;some text&quot;)\r\n        public void some_method_1() {\r\n            System.out.println(&quot;Value: &quot; + theApple);\r\n        }\r\n    \r\n        @When(&quot;some text&quot;)\r\n        public void some_method_2() {\r\n        }\r\n    \r\n        @Then(&quot;an alarm is raised&quot;)\r\n        public void some_method_3() {\r\n        }\r\n    \r\n    }\r\n\r\nbuild.gradle\r\n\r\n    dependencies {\r\n        annotationProcessor platform(&quot;io.micronaut:micronaut-bom:$micronautVersion&quot;)\r\n        annotationProcessor &quot;io.micronaut:micronaut-inject-java&quot;\r\n        annotationProcessor &quot;io.micronaut:micronaut-validation&quot;\r\n        implementation platform(&quot;io.micronaut:micronaut-bom:$micronautVersion&quot;)\r\n        implementation &quot;io.micronaut:micronaut-inject&quot;\r\n        implementation &quot;io.micronaut:micronaut-validation&quot;\r\n        implementation &quot;io.micronaut:micronaut-runtime&quot;\r\n        implementation &quot;javax.annotation:javax.annotation-api&quot;\r\n        implementation &quot;io.micronaut:micronaut-http-client&quot;\r\n        runtimeOnly &quot;ch.qos.logback:logback-classic:1.2.3&quot;\r\n        testAnnotationProcessor platform(&quot;io.micronaut:micronaut-bom:$micronautVersion&quot;)\r\n        testAnnotationProcessor &quot;io.micronaut:micronaut-inject-java&quot;\r\n        testImplementation platform(&quot;io.micronaut:micronaut-bom:$micronautVersion&quot;)\r\n        testImplementation &quot;io.micronaut.test:micronaut-test-junit5&quot;\r\n        testImplementation &quot;org.junit.jupiter:junit-jupiter-api:${junitVersion}&quot;\r\n        testRuntimeOnly &quot;org.junit.jupiter:junit-jupiter-engine:${junitVersion}&quot;\r\n        testRuntimeOnly &quot;org.junit.vintage:junit-vintage-engine:${junitVersion}&quot;\r\n        testImplementation &quot;io.cucumber:cucumber-java:$cucumberVersion&quot;\r\n        testImplementation &quot;io.cucumber:cucumber-junit:$cucumberVersion&quot;\r\n    }\r\n\r\n","title":"Cucumber with Micronaut","body":"<p>I am trying to use Cucumber with Micronaut but the @MicronautTest annotation simply does not work (theApple is not injected - see the code below) when I try to use it with cucumber. If I run it without Cucumber it is OK. Do you have any experience with this? Should it work?</p>\n\n<p>Thanks Ivan</p>\n\n<p>These are the classes</p>\n\n<p>class1</p>\n\n<pre><code>import io.cucumber.junit.Cucumber;\nimport io.cucumber.junit.CucumberOptions;\nimport org.junit.runner.RunWith;\n\n@RunWith(Cucumber.class)\n@CucumberOptions(plugin = { \"pretty\" },\n        features = \"src/test/resources\"\n)\npublic class TheRunner {\n}\n</code></pre>\n\n<p>class2    </p>\n\n<pre><code>import io.cucumber.java.en.Given;\nimport io.cucumber.java.en.Then;\nimport io.cucumber.java.en.When;\nimport io.micronaut.context.annotation.Value;\nimport io.micronaut.test.annotation.MicronautTest;\nimport org.junit.jupiter.api.Test;\n\n@MicronautTest\npublic class Steps {\n\n    @Value(\"apple\")\n    private String theApple;\n\n//  @Test\n//  public void test() {\n//     System.out.println(\"Value: \" + theApple);\n//  }\n\n    @Given(\"some text\")\n    public void some_method_1() {\n        System.out.println(\"Value: \" + theApple);\n    }\n\n    @When(\"some text\")\n    public void some_method_2() {\n    }\n\n    @Then(\"an alarm is raised\")\n    public void some_method_3() {\n    }\n\n}\n</code></pre>\n\n<p>build.gradle</p>\n\n<pre><code>dependencies {\n    annotationProcessor platform(\"io.micronaut:micronaut-bom:$micronautVersion\")\n    annotationProcessor \"io.micronaut:micronaut-inject-java\"\n    annotationProcessor \"io.micronaut:micronaut-validation\"\n    implementation platform(\"io.micronaut:micronaut-bom:$micronautVersion\")\n    implementation \"io.micronaut:micronaut-inject\"\n    implementation \"io.micronaut:micronaut-validation\"\n    implementation \"io.micronaut:micronaut-runtime\"\n    implementation \"javax.annotation:javax.annotation-api\"\n    implementation \"io.micronaut:micronaut-http-client\"\n    runtimeOnly \"ch.qos.logback:logback-classic:1.2.3\"\n    testAnnotationProcessor platform(\"io.micronaut:micronaut-bom:$micronautVersion\")\n    testAnnotationProcessor \"io.micronaut:micronaut-inject-java\"\n    testImplementation platform(\"io.micronaut:micronaut-bom:$micronautVersion\")\n    testImplementation \"io.micronaut.test:micronaut-test-junit5\"\n    testImplementation \"org.junit.jupiter:junit-jupiter-api:${junitVersion}\"\n    testRuntimeOnly \"org.junit.jupiter:junit-jupiter-engine:${junitVersion}\"\n    testRuntimeOnly \"org.junit.vintage:junit-vintage-engine:${junitVersion}\"\n    testImplementation \"io.cucumber:cucumber-java:$cucumberVersion\"\n    testImplementation \"io.cucumber:cucumber-junit:$cucumberVersion\"\n}\n</code></pre>\n"},{"tags":["java","spring-boot","amazon-aurora","spring-cloud-aws"],"comments":[{"owner":{"account_id":1521409,"reputation":6658,"user_id":1420941,"display_name":"stringy05"},"score":0,"creation_date":1603109209,"post_id":64426696,"comment_id":113923138,"body_markdown":"Turns out the issue is with using an RDS Aurora cluster rather than a RDS instance with read replicas, this issue is the RDS Cluster feature request https://github.com/spring-cloud/spring-cloud-aws/issues/356. I&#39;ll leave the question open, there&#39;s bound to be a way to configure multiple datasources that will work with Aurora","body":"Turns out the issue is with using an RDS Aurora cluster rather than a RDS instance with read replicas, this issue is the RDS Cluster feature request <a href=\"https://github.com/spring-cloud/spring-cloud-aws/issues/356\" rel=\"nofollow noreferrer\">github.com/spring-cloud/spring-cloud-aws/issues/356</a>. I&#39;ll leave the question open, there&#39;s bound to be a way to configure multiple datasources that will work with Aurora"},{"owner":{"account_id":5680162,"reputation":503,"user_id":4491666,"display_name":"Jitendra Kumar"},"score":0,"creation_date":1662134614,"post_id":64426696,"comment_id":129943628,"body_markdown":"In my experience, two different datasources must be used in order to achieve this. Two different repositories would be used, one with the read/write datasource and the other with read only datasource. To configure multiple datasources, you can read https://stackoverflow.com/questions/26308035/spring-boot-spring-data-jpa-with-multiple-datasources.","body":"In my experience, two different datasources must be used in order to achieve this. Two different repositories would be used, one with the read/write datasource and the other with read only datasource. To configure multiple datasources, you can read <a href=\"https://stackoverflow.com/questions/26308035/spring-boot-spring-data-jpa-with-multiple-datasources\" title=\"spring boot spring data jpa with multiple datasources\">stackoverflow.com/questions/26308035/&hellip;</a>."}],"answers":[{"tags":[],"owner":{"account_id":87488,"reputation":743,"user_id":242587,"display_name":"stmi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679392469,"creation_date":1679392469,"answer_id":75799638,"question_id":64426696,"body_markdown":"You need to configure explicitly configure 2 Datasources. In AWS read replica will have separate url with `-ro` added as visible in your screenshot.\r\n\r\nInformation on how to configure 2 Datasources is available in spring boot documentation section `8.2. Configure Two DataSources`\r\n\r\nhttps://docs.spring.io/spring-boot/docs/current/reference/html/howto.html#howto.data-access.configure-two-datasources\r\n\r\nOnce you have 2 Datasources configured you&#39;ll need to have have to create separate `EntityManager` per RO and RW repositories as described in section\r\n`8.10. Using Multiple EntityManagerFactories`\r\n\r\nhttps://docs.spring.io/spring-boot/docs/current/reference/html/howto.html#howto.data-access.use-multiple-entity-managers\r\n\r\nThen in services you&#39;ll need to provide fields to include RO and/or RW repository to make queries.\r\n","title":"Spring Boot App using Spring Cloud AWS RDS Aurora - how to distribute read queries","body":"<p>You need to configure explicitly configure 2 Datasources. In AWS read replica will have separate url with <code>-ro</code> added as visible in your screenshot.</p>\n<p>Information on how to configure 2 Datasources is available in spring boot documentation section <code>8.2. Configure Two DataSources</code></p>\n<p><a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/howto.html#howto.data-access.configure-two-datasources\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-boot/docs/current/reference/html/howto.html#howto.data-access.configure-two-datasources</a></p>\n<p>Once you have 2 Datasources configured you'll need to have have to create separate <code>EntityManager</code> per RO and RW repositories as described in section\n<code>8.10. Using Multiple EntityManagerFactories</code></p>\n<p><a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/howto.html#howto.data-access.use-multiple-entity-managers\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-boot/docs/current/reference/html/howto.html#howto.data-access.use-multiple-entity-managers</a></p>\n<p>Then in services you'll need to provide fields to include RO and/or RW repository to make queries.</p>\n"}],"owner":{"account_id":1521409,"reputation":6658,"user_id":1420941,"display_name":"stringy05"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":5467,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"answer_count":1,"score":11,"last_activity_date":1679392469,"creation_date":1603107971,"question_id":64426696,"body_markdown":"I&#39;ve got a Spring Boot app that&#39;s using an AWS RDS DB.\r\n\r\nI&#39;m trying to get a RDS Aurora / Postgres DB working with read replicas. I&#39;ve got the app running, however I cannot see any traffic going to the reader nodes.\r\n\r\nSet up is Spring boot (2.2.7), spring cloud aws 2.2.4-RELEASE, spring data (JpaRepository). \r\n\r\nRDS Aurora cluster with 2 nodes, 1 reader and 1 writer, which looks like this:\r\n[![AWS RDS Configuration][1]][1]\r\n\r\na controller GET method annotated with `@Transactional(readOnly = true)`\r\n```java\r\n    @RequestMapping(\r\n            value = &quot;/counters&quot;,\r\n            produces = {&quot;application/json&quot;},\r\n            method = RequestMethod.GET\r\n    )\r\n    @ResponseBody\r\n    @Transactional(readOnly = true)\r\n    public ResponseEntity&lt;List&lt;Counter&gt;&gt; getCounters()  {\r\n        return ResponseEntity.of(Optional.of(this.counterDAO.findAll()));\r\n    }\r\n```\r\n\r\nfinally spring cloud aws configuration\r\n```\r\ncloud:\r\n  aws:\r\n    region:\r\n      static: ap-southeast-2\r\n    credentials:\r\n      accessKey: ${ACCESS_KEY}\r\n      secretKey: ${SECRET_KEY}\r\n    rds:\r\n      rds-db-cluster-instance-1:\r\n        password: ${POSTGRES_PASSWORD}\r\n        username: postgres\r\n        readReplicaSupport: &quot;true&quot;\r\n        databaseName: postgres\r\n    stack:\r\n      auto: false\r\n```\r\n\r\nAt this point I can read and write from the DB, however I do not see any evidence that it is using the reader nodes at all.\r\n\r\nThe app only starts when I use the writer instance name as the `cloud.aws.rds.&lt;instance-id&gt;`, It does not work using the cluster name (using the writer id may be the right way to configure it, the docs are not really clear) and if I use the read only instance id, it fails with methods that update the DB.\r\n\r\nMonitoring on the AWS console shows connections only on the Writer node (I can get this to spike to 10 - 15 connections with 2 threads calling GET and POST methods), however the Reader node is always 0.\r\n\r\nSecondly I&#39;ve set breakpoints with the debugger on the [ReadOnlyRoutingDataSource][2] class, which are never hit, so I am pretty sure it&#39;s not using the read only functionality.\r\n\r\nI fairly certain it&#39;s due to the instance id I am using and perhaps something to do with the underlying RDS config, but I can&#39;t for the life of me work it out.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/aJkyc.png\r\n  [2]: https://github.com/spring-cloud/spring-cloud-aws/blob/c35c623881fb6147ab9c43ca2d5a2c6ae9ed6af9/spring-cloud-aws-jdbc/src/main/java/org/springframework/cloud/aws/jdbc/datasource/ReadOnlyRoutingDataSource.java#L68","title":"Spring Boot App using Spring Cloud AWS RDS Aurora - how to distribute read queries","body":"<p>I've got a Spring Boot app that's using an AWS RDS DB.</p>\n<p>I'm trying to get a RDS Aurora / Postgres DB working with read replicas. I've got the app running, however I cannot see any traffic going to the reader nodes.</p>\n<p>Set up is Spring boot (2.2.7), spring cloud aws 2.2.4-RELEASE, spring data (JpaRepository).</p>\n<p>RDS Aurora cluster with 2 nodes, 1 reader and 1 writer, which looks like this:\n<a href=\"https://i.stack.imgur.com/aJkyc.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/aJkyc.png\" alt=\"AWS RDS Configuration\" /></a></p>\n<p>a controller GET method annotated with <code>@Transactional(readOnly = true)</code></p>\n<pre class=\"lang-java prettyprint-override\"><code>    @RequestMapping(\n            value = &quot;/counters&quot;,\n            produces = {&quot;application/json&quot;},\n            method = RequestMethod.GET\n    )\n    @ResponseBody\n    @Transactional(readOnly = true)\n    public ResponseEntity&lt;List&lt;Counter&gt;&gt; getCounters()  {\n        return ResponseEntity.of(Optional.of(this.counterDAO.findAll()));\n    }\n</code></pre>\n<p>finally spring cloud aws configuration</p>\n<pre><code>cloud:\n  aws:\n    region:\n      static: ap-southeast-2\n    credentials:\n      accessKey: ${ACCESS_KEY}\n      secretKey: ${SECRET_KEY}\n    rds:\n      rds-db-cluster-instance-1:\n        password: ${POSTGRES_PASSWORD}\n        username: postgres\n        readReplicaSupport: &quot;true&quot;\n        databaseName: postgres\n    stack:\n      auto: false\n</code></pre>\n<p>At this point I can read and write from the DB, however I do not see any evidence that it is using the reader nodes at all.</p>\n<p>The app only starts when I use the writer instance name as the <code>cloud.aws.rds.&lt;instance-id&gt;</code>, It does not work using the cluster name (using the writer id may be the right way to configure it, the docs are not really clear) and if I use the read only instance id, it fails with methods that update the DB.</p>\n<p>Monitoring on the AWS console shows connections only on the Writer node (I can get this to spike to 10 - 15 connections with 2 threads calling GET and POST methods), however the Reader node is always 0.</p>\n<p>Secondly I've set breakpoints with the debugger on the <a href=\"https://github.com/spring-cloud/spring-cloud-aws/blob/c35c623881fb6147ab9c43ca2d5a2c6ae9ed6af9/spring-cloud-aws-jdbc/src/main/java/org/springframework/cloud/aws/jdbc/datasource/ReadOnlyRoutingDataSource.java#L68\" rel=\"noreferrer\">ReadOnlyRoutingDataSource</a> class, which are never hit, so I am pretty sure it's not using the read only functionality.</p>\n<p>I fairly certain it's due to the instance id I am using and perhaps something to do with the underlying RDS config, but I can't for the life of me work it out.</p>\n"},{"tags":["java","spring","spring-boot","jdbctemplate","spring-transactions"],"comments":[{"owner":{"account_id":8761405,"reputation":1504,"user_id":6551263,"display_name":"Chetan Ahirrao"},"score":1,"creation_date":1679392457,"post_id":75799420,"comment_id":133709400,"body_markdown":"Uncomment line `jta.setTransactionManager(userTransactionManager());`","body":"Uncomment line <code>jta.setTransactionManager(userTransactionManager());</code>"}],"owner":{"account_id":28011282,"reputation":11,"user_id":21393759,"display_name":"Dharmin Patel"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":237,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1679392352,"creation_date":1679391250,"question_id":75799420,"body_markdown":"I am having below issue when i am trying to call two different datasource in transaction using jdbcTemplate in batchUpdate: \r\n```\r\nException in thread &quot;main&quot; org.springframework.transaction.TransactionSuspensionNotSupportedException: JtaTransactionManager needs a JTA TransactionManager for suspending a transaction: specify the &#39;transactionManager&#39; or &#39;transactionManagerName&#39; property\r\n\tat org.springframework.transaction.jta.JtaTransactionManager.doJtaSuspend(JtaTransactionManager.java:941)\r\n\tat org.springframework.transaction.jta.JtaTransactionManager.doSuspend(JtaTransactionManager.java:923)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.suspend(AbstractPlatformTransactionManager.java:575)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.handleExistingTransaction(AbstractPlatformTransactionManager.java:420)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:349)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:420)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:257)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:95)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:644)\r\n\tat xyz.hollysys.spring.mybatis_super.service.ApplicationService1$$EnhancerBySpringCGLIB$$f8684ee3.saveData(&lt;generated&gt;)\r\n\tat xyz.hollysys.spring.mybatis_super.service.UserService.save(UserService.java:28)\r\n\tat xyz.hollysys.spring.mybatis_super.service.UserService$$FastClassBySpringCGLIB$$4da2330f.invoke(&lt;generated&gt;)\r\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:708)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:98)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:262)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:95)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:644)\r\n\tat xyz.hollysys.spring.mybatis_super.service.UserService$$EnhancerBySpringCGLIB$$7b31d501.save(&lt;generated&gt;)\r\n\tat xyz.hollysys.spring.mybatis_super.App.main(App.java:21)\r\n```\r\n\r\nCustomerRepository.java\r\n\r\n    @Transactional(propagation = Propagation.REQUIRED)\r\n    \tpublic int[] saveSuccessBatch(List&lt;Customer&gt; customerList) {\r\n    \t\treturn jdbcTemplate.batchUpdate(&quot;insert into customer (age,first_name, last_name) values(?,?,?)&quot;,\r\n    \t\t\t\tnew BatchPreparedStatementSetter() {\r\n    \t\t\t\t\t@Override\r\n    \t\t\t\t\tpublic void setValues(PreparedStatement ps, int i) throws SQLException {\r\n    \t\t\t\t\t\tCustomer customer = customerList.get(i);\r\n    \t\t\t\t\t\tps.setInt(1, customer.getAge());\r\n    \t\t\t\t\t\tps.setString(2, customer.getFirstName());\r\n    \t\t\t\t\t\tps.setString(3, customer.getLastName());\r\n    \t\t\t\t\t}\r\n    \r\n    \t\t\t\t\t@Override\r\n    \t\t\t\t\tpublic int getBatchSize() {\r\n    \t\t\t\t\t\treturn customerList.size();\r\n    \t\t\t\t\t}\r\n    \t\t\t\t});\r\n    \t}\r\n\r\nAddressRepository.java\r\n\r\n    @Transactional(propagation = Propagation.REQUIRED)\r\n    \tpublic int[] saveSuccessBatch(List&lt;Address&gt; addressList) {\r\n    \t\treturn jdbcTemplate.batchUpdate(&quot;insert into address (city,street, zipCode) values(?,?,?)&quot;,\r\n    \t\t\t\tnew BatchPreparedStatementSetter() {\r\n    \t\t\t\t\t@Override\r\n    \t\t\t\t\tpublic void setValues(PreparedStatement ps, int i) throws SQLException {\r\n    \t\t\t\t\t\tAddress address = addressList.get(i);\r\n    \t\t\t\t\t\tps.setString(1, address.getCity());\r\n    \t\t\t\t\t\tps.setString(2, address.getStreet());\r\n    \t\t\t\t\t\tps.setInt(3, address.getZipCode());\r\n    \t\t\t\t\t}\r\n    \r\n    \t\t\t\t\t@Override\r\n    \t\t\t\t\tpublic int getBatchSize() {\r\n    \t\t\t\t\t\treturn addressList.size();\r\n    \t\t\t\t\t}\r\n    \t\t\t\t});\r\n    \t}\r\n\r\nservice.java\r\n\r\n    @Transactional(propagation = Propagation.REQUIRES_NEW)\r\n    \tpublic void saveData(List&lt;List&lt;Customer&gt;&gt; mainCustomerList, List&lt;List&lt;Address&gt;&gt; mainAddressList, int index) {\r\n    \t\tcustomerRepository.saveSuccessBatch(mainCustomerList.get(index));\r\n    \t\taddressRepository.saveSuccessBatch(mainAddressList.get(index));\r\n    \t}\r\n\r\n\r\nJdbcConfiguration.java\r\n\r\n    package xyz.hollysys.spring.mybatis_super.config;\r\n    \r\n    import java.util.HashMap;\r\n    import java.util.Map;\r\n    import java.util.Properties;\r\n    \r\n    import javax.transaction.SystemException;\r\n    \r\n    import org.springframework.beans.factory.annotation.Value;\r\n    import org.springframework.context.annotation.Bean;\r\n    import org.springframework.context.annotation.ComponentScan;\r\n    import org.springframework.context.annotation.Configuration;\r\n    import org.springframework.context.annotation.PropertySource;\r\n    import org.springframework.context.support.PropertySourcesPlaceholderConfigurer;\r\n    import org.springframework.jdbc.core.JdbcTemplate;\r\n    import org.springframework.transaction.annotation.EnableTransactionManagement;\r\n    import org.springframework.transaction.jta.JtaTransactionManager;\r\n    \r\n    import com.atomikos.icatch.jta.UserTransactionImp;\r\n    import com.atomikos.icatch.jta.UserTransactionManager;\r\n    import com.atomikos.jdbc.AtomikosDataSourceBean;\r\n    import com.mysql.cj.jdbc.MysqlXADataSource;\r\n    \r\n    @Configuration\r\n    @EnableTransactionManagement\r\n    //@MapperScan({ &quot;xyz.hollysys.spring.mybatis_super.dao&quot; })\r\n    @ComponentScan(basePackages ={  &quot;xyz.hollysys.spring.mybatis_super.dao&quot;,&quot;xyz.hollysys.spring.mybatis_super.service&quot;})\r\n    //@EnableJpaRepositories(transactionManagerRef = &quot;transactionManager&quot; )\r\n    @PropertySource(value = { &quot;classpath:jdbc.properties&quot; })\r\n    public class JdbcConfiguration {\r\n    \t\r\n    \t// master database\r\n    \t@Value(&quot;${jdbc.driverClassName:com.mysql.jdbc.Driver}&quot;)\r\n    \tprivate String driverClassName;\r\n    \r\n    \t@Value(&quot;${jdbc.url:jdbc:mysql://localhost:3306/db1}&quot;)\r\n    \tprivate String url;\r\n    \r\n    \t@Value(&quot;${jdbc.username:root}&quot;)\r\n    \tprivate String username;\r\n    \r\n    \t@Value(&quot;${jdbc.password:}&quot;)\r\n    \tprivate String password;\r\n    \t\r\n    \t// slave database\r\n    \t@Value(&quot;${jdbc2.driverClassName:com.mysql.jdbc.Driver}&quot;)\r\n    \tprivate String driverClassName2;\r\n    \r\n    \t@Value(&quot;${jdbc2.url:jdbc:mysql://localhost:3306/db2}&quot;)\r\n    \tprivate String url2;\r\n    \r\n    \t@Value(&quot;${jdbc2.username:root}&quot;)\r\n    \tprivate String username2;\r\n    \r\n    \t@Value(&quot;${jdbc2.password:}&quot;)\r\n    \tprivate String password2;\r\n    \r\n        //You need this\r\n        @Bean\r\n        public static PropertySourcesPlaceholderConfigurer propertySourcesPlaceholderConfigurer() {\r\n           return new PropertySourcesPlaceholderConfigurer();\r\n        }\r\n    \t\r\n    \r\n    \t\r\n    \t@Bean(name=&quot;master&quot;,initMethod = &quot;init&quot;, destroyMethod = &quot;close&quot;)\r\n    \tpublic AtomikosDataSourceBean AtomikosDataSourceA(){\r\n    \t\tAtomikosDataSourceBean bean =  new AtomikosDataSourceBean();\r\n    \t\tbean.setXaDataSourceClassName(MysqlXADataSource.class.getCanonicalName());\r\n    \t\tbean.setXaProperties(xaPropertiesA());\r\n    \t\tbean.setUniqueResourceName(&quot;master&quot;);\r\n    \t\tbean.setMinPoolSize(1);\r\n    \t\tbean.setMaxPoolSize(3);\r\n    \t\tbean.setMaxIdleTime(60);\r\n    \t\tbean.setPoolSize(1);\r\n    \t\treturn bean;\r\n    \t\t\r\n    \t}\r\n    \t\r\n    \t@Bean(name=&quot;slave&quot;,initMethod = &quot;init&quot;, destroyMethod = &quot;close&quot;)\r\n    \tpublic AtomikosDataSourceBean AtomikosDataSourceB(){\r\n    \t\tAtomikosDataSourceBean bean =  new AtomikosDataSourceBean();\r\n    \t\tbean.setXaDataSourceClassName(MysqlXADataSource.class.getCanonicalName());\r\n    \t\tbean.setXaProperties(xaPropertiesB());\r\n    \t\tbean.setUniqueResourceName(&quot;slave&quot;);\r\n    \t\tbean.setMinPoolSize(1);\r\n    \t\tbean.setMaxPoolSize(3);\r\n    \t\tbean.setMaxIdleTime(60);\r\n    \t\tbean.setPoolSize(1);\r\n    \t\treturn bean;\r\n    \t\t\r\n    \t}\r\n    \t\r\n    \t@Bean\r\n    \tpublic Properties xaPropertiesA() {\r\n    \t\tProperties props = new Properties();\r\n    \t\tprops.setProperty(&quot;URL&quot;, url);\r\n    \t\tprops.setProperty(&quot;user&quot;, username);\r\n    \t\tprops.setProperty(&quot;password&quot;, password);\r\n    \t\treturn props;\r\n    \t}\t\r\n    \t\r\n    \t@Bean\r\n    \tpublic Properties xaPropertiesB() {\r\n    \t\tProperties props = new Properties();\r\n    \t\tprops.setProperty(&quot;URL&quot;, url2);\r\n    \t\tprops.setProperty(&quot;user&quot;, username2);\r\n    \t\tprops.setProperty(&quot;password&quot;, password2);\r\n    \t\treturn props;\r\n    \t}\r\n    \r\n    \r\n    \t@Bean\r\n    \tpublic Map&lt;Object, Object&gt; targetDataSourcesJta() {\r\n    \t\tMap&lt;Object, Object&gt; map = new HashMap&lt;Object, Object&gt;();\r\n    \t\tmap.put(&quot;master&quot;, AtomikosDataSourceA());\r\n    \t\tmap.put(&quot;slave&quot;, AtomikosDataSourceB());\r\n    \t\t\r\n    \t\treturn map;\r\n    \t}\r\n    \t\r\n    \t@Bean(name=&quot;jdbcTemplateA&quot;)\r\n    \tpublic JdbcTemplate jdbcTempalteA(){\r\n    \t\tJdbcTemplate template = new JdbcTemplate();\r\n    \t\ttemplate.setDataSource(AtomikosDataSourceA());\r\n    \t\treturn template;\r\n    \t}\r\n    \t\r\n    \t@Bean(name=&quot;jdbcTemplateB&quot;)\r\n    \tpublic JdbcTemplate jdbcTempalteB(){\r\n    \t\tJdbcTemplate template = new JdbcTemplate();\r\n    \t\ttemplate.setDataSource(AtomikosDataSourceB());\r\n    \t\treturn template;\r\n    \t}\r\n    \t\r\n    \t@Bean\r\n    \tpublic UserTransactionManager userTransactionManager(){\r\n    \t\tUserTransactionManager userJta = new UserTransactionManager();\r\n    \t\tuserJta.setForceShutdown(true);\r\n    \t\t\r\n    \t\treturn userJta;\r\n    \t}\r\n    \t\r\n    \t@Bean\r\n    \tpublic UserTransactionImp userTransactionImp(){\r\n    \t\tUserTransactionImp userJtaImpl = new UserTransactionImp();\r\n    \t\ttry {\r\n    \t\t\tuserJtaImpl.setTransactionTimeout(300);\r\n    \t\t} catch (SystemException e) {\r\n    \t\t\te.printStackTrace();\r\n    \t\t}\r\n    \t\treturn userJtaImpl;\r\n    \t}\r\n    \t\r\n    \t@Bean(name=&quot;transactionManager&quot;)\r\n    \tpublic JtaTransactionManager jtaTransactionManager(){\r\n    \t\tJtaTransactionManager jta = new JtaTransactionManager();\r\n    \t\t//jta.setTransactionManager(userTransactionManager());\r\n    \t\tjta.setUserTransaction(userTransactionImp());\r\n    \t\treturn jta;\r\n    \t}\r\n    \t\r\n    }\r\n\r\n","title":"How to resolve specify the &#39;transactionManager&#39; or &#39;transactionManagerName&#39; property error","body":"<p>I am having below issue when i am trying to call two different datasource in transaction using jdbcTemplate in batchUpdate:</p>\n<pre><code>Exception in thread &quot;main&quot; org.springframework.transaction.TransactionSuspensionNotSupportedException: JtaTransactionManager needs a JTA TransactionManager for suspending a transaction: specify the 'transactionManager' or 'transactionManagerName' property\n    at org.springframework.transaction.jta.JtaTransactionManager.doJtaSuspend(JtaTransactionManager.java:941)\n    at org.springframework.transaction.jta.JtaTransactionManager.doSuspend(JtaTransactionManager.java:923)\n    at org.springframework.transaction.support.AbstractPlatformTransactionManager.suspend(AbstractPlatformTransactionManager.java:575)\n    at org.springframework.transaction.support.AbstractPlatformTransactionManager.handleExistingTransaction(AbstractPlatformTransactionManager.java:420)\n    at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:349)\n    at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:420)\n    at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:257)\n    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:95)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)\n    at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:644)\n    at xyz.hollysys.spring.mybatis_super.service.ApplicationService1$$EnhancerBySpringCGLIB$$f8684ee3.saveData(&lt;generated&gt;)\n    at xyz.hollysys.spring.mybatis_super.service.UserService.save(UserService.java:28)\n    at xyz.hollysys.spring.mybatis_super.service.UserService$$FastClassBySpringCGLIB$$4da2330f.invoke(&lt;generated&gt;)\n    at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204)\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:708)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)\n    at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:98)\n    at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:262)\n    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:95)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)\n    at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:644)\n    at xyz.hollysys.spring.mybatis_super.service.UserService$$EnhancerBySpringCGLIB$$7b31d501.save(&lt;generated&gt;)\n    at xyz.hollysys.spring.mybatis_super.App.main(App.java:21)\n</code></pre>\n<p>CustomerRepository.java</p>\n<pre><code>@Transactional(propagation = Propagation.REQUIRED)\n    public int[] saveSuccessBatch(List&lt;Customer&gt; customerList) {\n        return jdbcTemplate.batchUpdate(&quot;insert into customer (age,first_name, last_name) values(?,?,?)&quot;,\n                new BatchPreparedStatementSetter() {\n                    @Override\n                    public void setValues(PreparedStatement ps, int i) throws SQLException {\n                        Customer customer = customerList.get(i);\n                        ps.setInt(1, customer.getAge());\n                        ps.setString(2, customer.getFirstName());\n                        ps.setString(3, customer.getLastName());\n                    }\n\n                    @Override\n                    public int getBatchSize() {\n                        return customerList.size();\n                    }\n                });\n    }\n</code></pre>\n<p>AddressRepository.java</p>\n<pre><code>@Transactional(propagation = Propagation.REQUIRED)\n    public int[] saveSuccessBatch(List&lt;Address&gt; addressList) {\n        return jdbcTemplate.batchUpdate(&quot;insert into address (city,street, zipCode) values(?,?,?)&quot;,\n                new BatchPreparedStatementSetter() {\n                    @Override\n                    public void setValues(PreparedStatement ps, int i) throws SQLException {\n                        Address address = addressList.get(i);\n                        ps.setString(1, address.getCity());\n                        ps.setString(2, address.getStreet());\n                        ps.setInt(3, address.getZipCode());\n                    }\n\n                    @Override\n                    public int getBatchSize() {\n                        return addressList.size();\n                    }\n                });\n    }\n</code></pre>\n<p>service.java</p>\n<pre><code>@Transactional(propagation = Propagation.REQUIRES_NEW)\n    public void saveData(List&lt;List&lt;Customer&gt;&gt; mainCustomerList, List&lt;List&lt;Address&gt;&gt; mainAddressList, int index) {\n        customerRepository.saveSuccessBatch(mainCustomerList.get(index));\n        addressRepository.saveSuccessBatch(mainAddressList.get(index));\n    }\n</code></pre>\n<p>JdbcConfiguration.java</p>\n<pre><code>package xyz.hollysys.spring.mybatis_super.config;\n\nimport java.util.HashMap;\nimport java.util.Map;\nimport java.util.Properties;\n\nimport javax.transaction.SystemException;\n\nimport org.springframework.beans.factory.annotation.Value;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.ComponentScan;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.context.annotation.PropertySource;\nimport org.springframework.context.support.PropertySourcesPlaceholderConfigurer;\nimport org.springframework.jdbc.core.JdbcTemplate;\nimport org.springframework.transaction.annotation.EnableTransactionManagement;\nimport org.springframework.transaction.jta.JtaTransactionManager;\n\nimport com.atomikos.icatch.jta.UserTransactionImp;\nimport com.atomikos.icatch.jta.UserTransactionManager;\nimport com.atomikos.jdbc.AtomikosDataSourceBean;\nimport com.mysql.cj.jdbc.MysqlXADataSource;\n\n@Configuration\n@EnableTransactionManagement\n//@MapperScan({ &quot;xyz.hollysys.spring.mybatis_super.dao&quot; })\n@ComponentScan(basePackages ={  &quot;xyz.hollysys.spring.mybatis_super.dao&quot;,&quot;xyz.hollysys.spring.mybatis_super.service&quot;})\n//@EnableJpaRepositories(transactionManagerRef = &quot;transactionManager&quot; )\n@PropertySource(value = { &quot;classpath:jdbc.properties&quot; })\npublic class JdbcConfiguration {\n    \n    // master database\n    @Value(&quot;${jdbc.driverClassName:com.mysql.jdbc.Driver}&quot;)\n    private String driverClassName;\n\n    @Value(&quot;${jdbc.url:jdbc:mysql://localhost:3306/db1}&quot;)\n    private String url;\n\n    @Value(&quot;${jdbc.username:root}&quot;)\n    private String username;\n\n    @Value(&quot;${jdbc.password:}&quot;)\n    private String password;\n    \n    // slave database\n    @Value(&quot;${jdbc2.driverClassName:com.mysql.jdbc.Driver}&quot;)\n    private String driverClassName2;\n\n    @Value(&quot;${jdbc2.url:jdbc:mysql://localhost:3306/db2}&quot;)\n    private String url2;\n\n    @Value(&quot;${jdbc2.username:root}&quot;)\n    private String username2;\n\n    @Value(&quot;${jdbc2.password:}&quot;)\n    private String password2;\n\n    //You need this\n    @Bean\n    public static PropertySourcesPlaceholderConfigurer propertySourcesPlaceholderConfigurer() {\n       return new PropertySourcesPlaceholderConfigurer();\n    }\n    \n\n    \n    @Bean(name=&quot;master&quot;,initMethod = &quot;init&quot;, destroyMethod = &quot;close&quot;)\n    public AtomikosDataSourceBean AtomikosDataSourceA(){\n        AtomikosDataSourceBean bean =  new AtomikosDataSourceBean();\n        bean.setXaDataSourceClassName(MysqlXADataSource.class.getCanonicalName());\n        bean.setXaProperties(xaPropertiesA());\n        bean.setUniqueResourceName(&quot;master&quot;);\n        bean.setMinPoolSize(1);\n        bean.setMaxPoolSize(3);\n        bean.setMaxIdleTime(60);\n        bean.setPoolSize(1);\n        return bean;\n        \n    }\n    \n    @Bean(name=&quot;slave&quot;,initMethod = &quot;init&quot;, destroyMethod = &quot;close&quot;)\n    public AtomikosDataSourceBean AtomikosDataSourceB(){\n        AtomikosDataSourceBean bean =  new AtomikosDataSourceBean();\n        bean.setXaDataSourceClassName(MysqlXADataSource.class.getCanonicalName());\n        bean.setXaProperties(xaPropertiesB());\n        bean.setUniqueResourceName(&quot;slave&quot;);\n        bean.setMinPoolSize(1);\n        bean.setMaxPoolSize(3);\n        bean.setMaxIdleTime(60);\n        bean.setPoolSize(1);\n        return bean;\n        \n    }\n    \n    @Bean\n    public Properties xaPropertiesA() {\n        Properties props = new Properties();\n        props.setProperty(&quot;URL&quot;, url);\n        props.setProperty(&quot;user&quot;, username);\n        props.setProperty(&quot;password&quot;, password);\n        return props;\n    }   \n    \n    @Bean\n    public Properties xaPropertiesB() {\n        Properties props = new Properties();\n        props.setProperty(&quot;URL&quot;, url2);\n        props.setProperty(&quot;user&quot;, username2);\n        props.setProperty(&quot;password&quot;, password2);\n        return props;\n    }\n\n\n    @Bean\n    public Map&lt;Object, Object&gt; targetDataSourcesJta() {\n        Map&lt;Object, Object&gt; map = new HashMap&lt;Object, Object&gt;();\n        map.put(&quot;master&quot;, AtomikosDataSourceA());\n        map.put(&quot;slave&quot;, AtomikosDataSourceB());\n        \n        return map;\n    }\n    \n    @Bean(name=&quot;jdbcTemplateA&quot;)\n    public JdbcTemplate jdbcTempalteA(){\n        JdbcTemplate template = new JdbcTemplate();\n        template.setDataSource(AtomikosDataSourceA());\n        return template;\n    }\n    \n    @Bean(name=&quot;jdbcTemplateB&quot;)\n    public JdbcTemplate jdbcTempalteB(){\n        JdbcTemplate template = new JdbcTemplate();\n        template.setDataSource(AtomikosDataSourceB());\n        return template;\n    }\n    \n    @Bean\n    public UserTransactionManager userTransactionManager(){\n        UserTransactionManager userJta = new UserTransactionManager();\n        userJta.setForceShutdown(true);\n        \n        return userJta;\n    }\n    \n    @Bean\n    public UserTransactionImp userTransactionImp(){\n        UserTransactionImp userJtaImpl = new UserTransactionImp();\n        try {\n            userJtaImpl.setTransactionTimeout(300);\n        } catch (SystemException e) {\n            e.printStackTrace();\n        }\n        return userJtaImpl;\n    }\n    \n    @Bean(name=&quot;transactionManager&quot;)\n    public JtaTransactionManager jtaTransactionManager(){\n        JtaTransactionManager jta = new JtaTransactionManager();\n        //jta.setTransactionManager(userTransactionManager());\n        jta.setUserTransaction(userTransactionImp());\n        return jta;\n    }\n    \n}\n</code></pre>\n"},{"tags":["java","android","firebase"],"comments":[{"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1679381721,"post_id":75795577,"comment_id":133706941,"body_markdown":"I&#39;m having a hard time understanding what the problem is.\nWhat exactly in this code doesn&#39;t work the way you expect?\nTell us what is wrong with shared code. Do you have any errors?","body":"I&#39;m having a hard time understanding what the problem is. What exactly in this code doesn&#39;t work the way you expect? Tell us what is wrong with shared code. Do you have any errors?"},{"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1679381742,"post_id":75795577,"comment_id":133706944,"body_markdown":"If you understand Kotlin, I think that this [resource](https://medium.com/firebase-developers/how-to-authenticate-to-firebase-using-google-one-tap-in-jetpack-compose-60b30e621d0d) will help. Here is the corresponding [repo](https://github.com/alexmamo/FirebaseSignInWithGoogle).","body":"If you understand Kotlin, I think that this <a href=\"https://medium.com/firebase-developers/how-to-authenticate-to-firebase-using-google-one-tap-in-jetpack-compose-60b30e621d0d\" rel=\"nofollow noreferrer\">resource</a> will help. Here is the corresponding <a href=\"https://github.com/alexmamo/FirebaseSignInWithGoogle\" rel=\"nofollow noreferrer\">repo</a>."},{"owner":{"account_id":28069603,"reputation":45,"user_id":21442434,"display_name":"Edziu Kowalski"},"score":0,"creation_date":1679392409,"post_id":75795577,"comment_id":133709386,"body_markdown":"Nah, the code works fine, but I&#39;m not sure how to handle the communication between the repository, ViewModel and activity. I want to login using an email and a password and if it successes -&gt; change activity to whatever, let&#39;s say, MainAppAcitivity, if it fails -&gt; display something on a screen (not a toast, please). Since firebase auth works on a background thread, the `FirebaseAuth.createUserWithEmailAndPassword` function returns a callback, so I cannot get results immediately like in the Login Activity that Android studio provides.","body":"Nah, the code works fine, but I&#39;m not sure how to handle the communication between the repository, ViewModel and activity. I want to login using an email and a password and if it successes -&gt; change activity to whatever, let&#39;s say, MainAppAcitivity, if it fails -&gt; display something on a screen (not a toast, please). Since firebase auth works on a background thread, the <code>FirebaseAuth.createUserWithEmailAndPassword</code> function returns a callback, so I cannot get results immediately like in the Login Activity that Android studio provides."},{"owner":{"account_id":28069603,"reputation":45,"user_id":21442434,"display_name":"Edziu Kowalski"},"score":0,"creation_date":1679392493,"post_id":75795577,"comment_id":133709413,"body_markdown":"Summarising I don&#39;t know if my `LoginRepository.login` function should return `Task&lt;AuthResult&gt;` or something else. If `Task&lt;AuthResult&gt;`, should I get rid of `LoginViewModel`?","body":"Summarising I don&#39;t know if my <code>LoginRepository.login</code> function should return <code>Task&lt;AuthResult&gt;</code> or something else. If <code>Task&lt;AuthResult&gt;</code>, should I get rid of <code>LoginViewModel</code>?"},{"owner":{"account_id":28069603,"reputation":45,"user_id":21442434,"display_name":"Edziu Kowalski"},"score":0,"creation_date":1679392515,"post_id":75795577,"comment_id":133709420,"body_markdown":"I&#39;ve seen this article already.","body":"I&#39;ve seen this article already."}],"owner":{"account_id":28069603,"reputation":45,"user_id":21442434,"display_name":"Edziu Kowalski"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":153,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1679392352,"creation_date":1679348357,"question_id":75795577,"body_markdown":"Android Studio provides a Login Activity template. There&#39;s a lot of code, so I&#39;ll show you the Repository, DataSource and a view model:\r\n\r\nLoginDataSource:\r\n```java\r\npackage com.umk.packit.Login.data;\r\n\r\nimport com.umk.packit.Login.data.model.LoggedInUser;\r\n\r\nimport java.io.IOException;\r\n\r\n/**\r\n * Class that handles authentication w/ login credentials and retrieves user information.\r\n */\r\npublic class LoginDataSource {\r\n    public Result&lt;LoggedInUser&gt; login(String email, String password) {\r\n        try {\r\n            // TODO: handle loggedInUser authentication\r\n            LoggedInUser fakeUser = new LoggedInUser(java.util.UUID.randomUUID().toString(), &quot;Jane Doe&quot;);\r\n            return new Result.Success&lt;&gt;(fakeUser);\r\n        } catch (Exception e) {\r\n            return new Result.Error(new IOException(&quot;Error logging in&quot;, e));\r\n        }\r\n    }\r\n\r\n    public void logout() {\r\n        // TODO: revoke authentication\r\n    }\r\n}\r\n```\r\n\r\nResult\r\n```java\r\npackage com.umk.packit.Login.data;\r\n\r\n/**\r\n * A generic class that holds a result success w/ data or an error exception.\r\n */\r\npublic class Result&lt;T&gt; {\r\n    // hide the private constructor to limit subclass types (Success, Error)\r\n    private Result() {\r\n    }\r\n\r\n    @Override\r\n    public String toString() {\r\n        if (this instanceof Result.Success) {\r\n            Result.Success success = (Result.Success) this;\r\n            return &quot;Success[data=&quot; + success.getData().toString() + &quot;]&quot;;\r\n        } else if (this instanceof Result.Error) {\r\n            Result.Error error = (Result.Error) this;\r\n            return &quot;Error[exception=&quot; + error.getError().toString() + &quot;]&quot;;\r\n        }\r\n        return &quot;&quot;;\r\n    }\r\n\r\n    // Success sub-class\r\n    public final static class Success&lt;T&gt; extends Result {\r\n        private T data;\r\n\r\n        public Success(T data) {\r\n            this.data = data;\r\n        }\r\n\r\n        public T getData() {\r\n            return this.data;\r\n        }\r\n    }\r\n\r\n    // Error sub-class\r\n    public final static class Error extends Result {\r\n        private Exception error;\r\n\r\n        public Error(Exception error) {\r\n            this.error = error;\r\n        }\r\n\r\n        public Exception getError() {\r\n            return this.error;\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nLoginRepository:\r\n```java\r\npackage com.umk.packit.Login.data;\r\n\r\nimport com.umk.packit.Login.data.model.LoggedInUser;\r\n\r\n/**\r\n * Class that requests authentication and user information from the remote data source and\r\n * maintains an in-memory cache of login status and user credentials information.\r\n */\r\npublic class LoginRepository {\r\n    // private constructor : singleton access\r\n    private LoginRepository(LoginDataSource dataSource) {\r\n        this.dataSource = dataSource;\r\n    }\r\n\r\n    public static LoginRepository getInstance(LoginDataSource dataSource) {\r\n        if (instance == null) {\r\n            instance = new LoginRepository(dataSource);\r\n        }\r\n        return instance;\r\n    }\r\n\r\n    public Result&lt;LoggedInUser&gt; login(String email, String password) {\r\n        // handle login\r\n        Result&lt;LoggedInUser&gt; result = dataSource.login(email, password);\r\n        if (result instanceof Result.Success) {\r\n            setLoggedInUser(((Result.Success&lt;LoggedInUser&gt;) result).getData());\r\n        }\r\n        return result;\r\n    }\r\n\r\n    public boolean isLoggedIn() {\r\n        return user != null;\r\n    }\r\n\r\n    public void logout() {\r\n        user = null;\r\n        dataSource.logout();\r\n    }\r\n\r\n    private void setLoggedInUser(LoggedInUser user) {\r\n        this.user = user;\r\n    }\r\n\r\n    private static volatile LoginRepository instance;\r\n\r\n    private final LoginDataSource dataSource;\r\n\r\n    private LoggedInUser user = null;\r\n}\r\n```\r\n\r\nLoginViewModel:\r\n```java\r\npackage com.umk.packit.Login.ui.login;\r\n\r\nimport android.util.Patterns;\r\n\r\nimport androidx.lifecycle.LiveData;\r\nimport androidx.lifecycle.MutableLiveData;\r\nimport androidx.lifecycle.ViewModel;\r\n\r\nimport com.umk.packit.Login.data.LoginRepository;\r\nimport com.umk.packit.Login.data.Result;\r\nimport com.umk.packit.Login.data.model.LoggedInUser;\r\nimport com.umk.packit.R;\r\n\r\npublic class LoginViewModel extends ViewModel {\r\n    LoginViewModel(LoginRepository loginRepository) {\r\n        this.loginRepository = loginRepository;\r\n    }\r\n\r\n    public void login(String email, String password) {\r\n        // can be launched in a separate asynchronous job\r\n        Result&lt;LoggedInUser&gt; result = loginRepository.login(email, password);\r\n\r\n        if (result instanceof Result.Success) {\r\n            LoggedInUser data = ((Result.Success&lt;LoggedInUser&gt;) result).getData();\r\n            loginResult.setValue(new LoginResult(new LoggedInUserView(data.getDisplayName())));\r\n        } else {\r\n            loginResult.setValue(new LoginResult(R.string.login_failed));\r\n        }\r\n    }\r\n\r\n    public void loginDataChanged(String email, String password) {\r\n        if (!isEmailValid(email)) {\r\n            loginFormState.setValue(new LoginFormState(R.string.invalid_email, null));\r\n        } else if (!isPasswordValid(password)) {\r\n            loginFormState.setValue(new LoginFormState(null, R.string.invalid_password));\r\n        } else {\r\n            loginFormState.setValue(new LoginFormState(true));\r\n        }\r\n    }\r\n\r\n    // A placeholder email validation check\r\n    private boolean isEmailValid(String email) {\r\n        if (email == null) {\r\n            return false;\r\n        }\r\n        if (email.contains(&quot;@&quot;)) {\r\n            return Patterns.EMAIL_ADDRESS.matcher(email).matches();\r\n        } else {\r\n            return !email.trim().isEmpty();\r\n        }\r\n    }\r\n\r\n    // A placeholder password validation check\r\n    private boolean isPasswordValid(String password) {\r\n        return password != null &amp;&amp; password.trim().length() &gt; 5;\r\n    }\r\n\r\n    LiveData&lt;LoginFormState&gt; getLoginFormState() {\r\n        return loginFormState;\r\n    }\r\n\r\n    LiveData&lt;LoginResult&gt; getLoginResult() {\r\n        return loginResult;\r\n    }\r\n\r\n    private MutableLiveData&lt;LoginFormState&gt; loginFormState = new MutableLiveData&lt;&gt;();\r\n    private MutableLiveData&lt;LoginResult&gt; loginResult = new MutableLiveData&lt;&gt;();\r\n    private LoginRepository loginRepository;\r\n}\r\n```\r\n\r\nLoggedInUserView\r\n```java\r\npackage com.umk.packit.Login.ui.login;\r\n\r\npublic class LoggedInUserView {\r\n    LoggedInUserView(String displayName) {\r\n        this.displayName = displayName;\r\n    }\r\n\r\n    String getDisplayName() {\r\n        return displayName;\r\n    }\r\n\r\n    private final String displayName;\r\n    //... other data fields that may be accessible to the UI\r\n}\r\n```\r\n\r\nLoginResult\r\n```java\r\npackage com.umk.packit.Login.ui.login;\r\n\r\n//Authentication result : success (user details) or error message.\r\nclass LoginResult {\r\n    LoginResult(@Nullable Integer error) {\r\n        this.error = error;\r\n    }\r\n\r\n    LoginResult(@Nullable LoggedInUserView success) {\r\n        this.success = success;\r\n    }\r\n\r\n    @Nullable\r\n    LoggedInUserView getSuccess() {\r\n        return success;\r\n    }\r\n\r\n    @Nullable\r\n    Integer getError() {\r\n        return error;\r\n    }\r\n\r\n    @Nullable\r\n    private LoggedInUserView success;\r\n    @Nullable\r\n    private Integer error;\r\n}\r\n```\r\n\r\nLoginFormState:\r\n```java\r\npackage com.umk.packit.Login.ui.login;\r\n\r\n\r\nclass LoginFormState {\r\n    LoginFormState(@Nullable Integer emailError, @Nullable Integer passwordError) {\r\n        this.emailError = emailError;\r\n        this.passwordError = passwordError;\r\n        this.isDataValid = false;\r\n    }\r\n\r\n    LoginFormState(boolean isDataValid) {\r\n        this.emailError = null;\r\n        this.passwordError = null;\r\n        this.isDataValid = isDataValid;\r\n    }\r\n\r\n    @Nullable\r\n    Integer getEmailError() {\r\n        return emailError;\r\n    }\r\n\r\n    @Nullable\r\n    Integer getPasswordError() {\r\n        return passwordError;\r\n    }\r\n\r\n    boolean isDataValid() {\r\n        return isDataValid;\r\n    }\r\n\r\n    @Nullable\r\n    private final Integer emailError;\r\n    @Nullable\r\n    private final Integer passwordError;\r\n    private final boolean isDataValid;\r\n}\r\n```\r\n\r\nI want to modify this code to fit firebase auth. I know that I need to get the instance of `FirebaseAuth` and there&#39;re methods like: `createUserWithEmailAndPassword(String, String)` and `signInWithEmailAndPassword(String, String)`.\r\n\r\nSince I want to use firebase I believe there&#39;s no need to have &#39;LoginDataSource` class, `Result` class, `LoggedInUser` class, `LoginFormState` class, `LoginResult` class, `LoggedInUserView` class (arguable). \r\n\r\nI&#39;m not sure what&#39;s the best way to implement the login repository to work with a view model and an activity.\r\n\r\nThe way that the template is implemented looks clear to me. Since the default implementation it&#39;s single threaded and firebase uses callbacks I&#39;m not sure what `LoginRepository.login` function should return. Should it return a `Task&lt;AuthResult&gt;`?\r\n\r\n\r\n```java\r\npublic Task&lt;AuthResult&gt; login(String email, String password) {\r\n        return firebaseAuth.createUserWithEmailAndPassword(email, password);\r\n    }\r\n```\r\n\r\nBut now that&#39;s the point of having `LoginViewModel`? Unless it&#39;ll do some UI things, but if not, `LoginViewModel.login` would just be this: \r\n```java\r\nTask&lt;AuthResult&gt; login(String email, String password) {\r\n   return loginRepo.login(email, password);\r\n}\r\n```\r\nThe reason I&#39;d like to have some kind of result like `Task&lt;AuthResult&gt;` type be combatible with the activity is to be able to know if the authorization failed or successed to manage widgets. \r\n\r\nWhat should I do? Return `Task&lt;AuthResult&gt;` from `LoginRepository.login` and get rid of `LoginViewModel`? Return `Task&lt;AuthResult&gt; from `LoginRepository.login` and keep the `LoginViewModel`? How should I handle it?","title":"What should login function in LoginRepository return?","body":"<p>Android Studio provides a Login Activity template. There's a lot of code, so I'll show you the Repository, DataSource and a view model:</p>\n<p>LoginDataSource:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.umk.packit.Login.data;\n\nimport com.umk.packit.Login.data.model.LoggedInUser;\n\nimport java.io.IOException;\n\n/**\n * Class that handles authentication w/ login credentials and retrieves user information.\n */\npublic class LoginDataSource {\n    public Result&lt;LoggedInUser&gt; login(String email, String password) {\n        try {\n            // TODO: handle loggedInUser authentication\n            LoggedInUser fakeUser = new LoggedInUser(java.util.UUID.randomUUID().toString(), &quot;Jane Doe&quot;);\n            return new Result.Success&lt;&gt;(fakeUser);\n        } catch (Exception e) {\n            return new Result.Error(new IOException(&quot;Error logging in&quot;, e));\n        }\n    }\n\n    public void logout() {\n        // TODO: revoke authentication\n    }\n}\n</code></pre>\n<p>Result</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.umk.packit.Login.data;\n\n/**\n * A generic class that holds a result success w/ data or an error exception.\n */\npublic class Result&lt;T&gt; {\n    // hide the private constructor to limit subclass types (Success, Error)\n    private Result() {\n    }\n\n    @Override\n    public String toString() {\n        if (this instanceof Result.Success) {\n            Result.Success success = (Result.Success) this;\n            return &quot;Success[data=&quot; + success.getData().toString() + &quot;]&quot;;\n        } else if (this instanceof Result.Error) {\n            Result.Error error = (Result.Error) this;\n            return &quot;Error[exception=&quot; + error.getError().toString() + &quot;]&quot;;\n        }\n        return &quot;&quot;;\n    }\n\n    // Success sub-class\n    public final static class Success&lt;T&gt; extends Result {\n        private T data;\n\n        public Success(T data) {\n            this.data = data;\n        }\n\n        public T getData() {\n            return this.data;\n        }\n    }\n\n    // Error sub-class\n    public final static class Error extends Result {\n        private Exception error;\n\n        public Error(Exception error) {\n            this.error = error;\n        }\n\n        public Exception getError() {\n            return this.error;\n        }\n    }\n}\n</code></pre>\n<p>LoginRepository:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.umk.packit.Login.data;\n\nimport com.umk.packit.Login.data.model.LoggedInUser;\n\n/**\n * Class that requests authentication and user information from the remote data source and\n * maintains an in-memory cache of login status and user credentials information.\n */\npublic class LoginRepository {\n    // private constructor : singleton access\n    private LoginRepository(LoginDataSource dataSource) {\n        this.dataSource = dataSource;\n    }\n\n    public static LoginRepository getInstance(LoginDataSource dataSource) {\n        if (instance == null) {\n            instance = new LoginRepository(dataSource);\n        }\n        return instance;\n    }\n\n    public Result&lt;LoggedInUser&gt; login(String email, String password) {\n        // handle login\n        Result&lt;LoggedInUser&gt; result = dataSource.login(email, password);\n        if (result instanceof Result.Success) {\n            setLoggedInUser(((Result.Success&lt;LoggedInUser&gt;) result).getData());\n        }\n        return result;\n    }\n\n    public boolean isLoggedIn() {\n        return user != null;\n    }\n\n    public void logout() {\n        user = null;\n        dataSource.logout();\n    }\n\n    private void setLoggedInUser(LoggedInUser user) {\n        this.user = user;\n    }\n\n    private static volatile LoginRepository instance;\n\n    private final LoginDataSource dataSource;\n\n    private LoggedInUser user = null;\n}\n</code></pre>\n<p>LoginViewModel:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.umk.packit.Login.ui.login;\n\nimport android.util.Patterns;\n\nimport androidx.lifecycle.LiveData;\nimport androidx.lifecycle.MutableLiveData;\nimport androidx.lifecycle.ViewModel;\n\nimport com.umk.packit.Login.data.LoginRepository;\nimport com.umk.packit.Login.data.Result;\nimport com.umk.packit.Login.data.model.LoggedInUser;\nimport com.umk.packit.R;\n\npublic class LoginViewModel extends ViewModel {\n    LoginViewModel(LoginRepository loginRepository) {\n        this.loginRepository = loginRepository;\n    }\n\n    public void login(String email, String password) {\n        // can be launched in a separate asynchronous job\n        Result&lt;LoggedInUser&gt; result = loginRepository.login(email, password);\n\n        if (result instanceof Result.Success) {\n            LoggedInUser data = ((Result.Success&lt;LoggedInUser&gt;) result).getData();\n            loginResult.setValue(new LoginResult(new LoggedInUserView(data.getDisplayName())));\n        } else {\n            loginResult.setValue(new LoginResult(R.string.login_failed));\n        }\n    }\n\n    public void loginDataChanged(String email, String password) {\n        if (!isEmailValid(email)) {\n            loginFormState.setValue(new LoginFormState(R.string.invalid_email, null));\n        } else if (!isPasswordValid(password)) {\n            loginFormState.setValue(new LoginFormState(null, R.string.invalid_password));\n        } else {\n            loginFormState.setValue(new LoginFormState(true));\n        }\n    }\n\n    // A placeholder email validation check\n    private boolean isEmailValid(String email) {\n        if (email == null) {\n            return false;\n        }\n        if (email.contains(&quot;@&quot;)) {\n            return Patterns.EMAIL_ADDRESS.matcher(email).matches();\n        } else {\n            return !email.trim().isEmpty();\n        }\n    }\n\n    // A placeholder password validation check\n    private boolean isPasswordValid(String password) {\n        return password != null &amp;&amp; password.trim().length() &gt; 5;\n    }\n\n    LiveData&lt;LoginFormState&gt; getLoginFormState() {\n        return loginFormState;\n    }\n\n    LiveData&lt;LoginResult&gt; getLoginResult() {\n        return loginResult;\n    }\n\n    private MutableLiveData&lt;LoginFormState&gt; loginFormState = new MutableLiveData&lt;&gt;();\n    private MutableLiveData&lt;LoginResult&gt; loginResult = new MutableLiveData&lt;&gt;();\n    private LoginRepository loginRepository;\n}\n</code></pre>\n<p>LoggedInUserView</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.umk.packit.Login.ui.login;\n\npublic class LoggedInUserView {\n    LoggedInUserView(String displayName) {\n        this.displayName = displayName;\n    }\n\n    String getDisplayName() {\n        return displayName;\n    }\n\n    private final String displayName;\n    //... other data fields that may be accessible to the UI\n}\n</code></pre>\n<p>LoginResult</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.umk.packit.Login.ui.login;\n\n//Authentication result : success (user details) or error message.\nclass LoginResult {\n    LoginResult(@Nullable Integer error) {\n        this.error = error;\n    }\n\n    LoginResult(@Nullable LoggedInUserView success) {\n        this.success = success;\n    }\n\n    @Nullable\n    LoggedInUserView getSuccess() {\n        return success;\n    }\n\n    @Nullable\n    Integer getError() {\n        return error;\n    }\n\n    @Nullable\n    private LoggedInUserView success;\n    @Nullable\n    private Integer error;\n}\n</code></pre>\n<p>LoginFormState:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.umk.packit.Login.ui.login;\n\n\nclass LoginFormState {\n    LoginFormState(@Nullable Integer emailError, @Nullable Integer passwordError) {\n        this.emailError = emailError;\n        this.passwordError = passwordError;\n        this.isDataValid = false;\n    }\n\n    LoginFormState(boolean isDataValid) {\n        this.emailError = null;\n        this.passwordError = null;\n        this.isDataValid = isDataValid;\n    }\n\n    @Nullable\n    Integer getEmailError() {\n        return emailError;\n    }\n\n    @Nullable\n    Integer getPasswordError() {\n        return passwordError;\n    }\n\n    boolean isDataValid() {\n        return isDataValid;\n    }\n\n    @Nullable\n    private final Integer emailError;\n    @Nullable\n    private final Integer passwordError;\n    private final boolean isDataValid;\n}\n</code></pre>\n<p>I want to modify this code to fit firebase auth. I know that I need to get the instance of <code>FirebaseAuth</code> and there're methods like: <code>createUserWithEmailAndPassword(String, String)</code> and <code>signInWithEmailAndPassword(String, String)</code>.</p>\n<p>Since I want to use firebase I believe there's no need to have 'LoginDataSource<code>class,</code>Result<code>class,</code>LoggedInUser<code>class,</code>LoginFormState<code>class,</code>LoginResult<code>class,</code>LoggedInUserView` class (arguable).</p>\n<p>I'm not sure what's the best way to implement the login repository to work with a view model and an activity.</p>\n<p>The way that the template is implemented looks clear to me. Since the default implementation it's single threaded and firebase uses callbacks I'm not sure what <code>LoginRepository.login</code> function should return. Should it return a <code>Task&lt;AuthResult&gt;</code>?</p>\n<pre class=\"lang-java prettyprint-override\"><code>public Task&lt;AuthResult&gt; login(String email, String password) {\n        return firebaseAuth.createUserWithEmailAndPassword(email, password);\n    }\n</code></pre>\n<p>But now that's the point of having <code>LoginViewModel</code>? Unless it'll do some UI things, but if not, <code>LoginViewModel.login</code> would just be this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Task&lt;AuthResult&gt; login(String email, String password) {\n   return loginRepo.login(email, password);\n}\n</code></pre>\n<p>The reason I'd like to have some kind of result like <code>Task&lt;AuthResult&gt;</code> type be combatible with the activity is to be able to know if the authorization failed or successed to manage widgets.</p>\n<p>What should I do? Return <code>Task&lt;AuthResult&gt;</code> from <code>LoginRepository.login</code> and get rid of <code>LoginViewModel</code>? Return <code>Task&lt;AuthResult&gt; from </code>LoginRepository.login<code>and keep the</code>LoginViewModel`? How should I handle it?</p>\n"},{"tags":["java","file-io"],"answers":[{"tags":[],"owner":{"account_id":4804,"reputation":268579,"user_id":7412,"accept_rate":96,"display_name":"dogbane"},"down_vote_count":0,"up_vote_count":18,"is_accepted":true,"score":18,"last_activity_date":1292851229,"creation_date":1292851229,"answer_id":4490010,"question_id":4489878,"body_markdown":"Here is a Windows example:\r\n\r\nTry calling `getCanonicalFile` on a file in your CD-drive, but without a CD loaded. For example:\r\n\r\n    new File(&quot;D:\\\\dummy.txt&quot;).getCanonicalFile();\r\n\r\nyou will get:\r\n\r\n    Exception in thread &quot;main&quot; java.io.IOException: The device is not ready\r\n    \tat java.io.WinNTFileSystem.canonicalize0(Native Method)\r\n    \tat java.io.Win32FileSystem.canonicalize(Win32FileSystem.java:396)\r\n    \tat java.io.File.getCanonicalPath(File.java:559)\r\n    \tat java.io.File.getCanonicalFile(File.java:583)\r\n\r\n","title":"File.getCanonicalPath() failure examples","body":"<p>Here is a Windows example:</p>\n\n<p>Try calling <code>getCanonicalFile</code> on a file in your CD-drive, but without a CD loaded. For example:</p>\n\n<pre><code>new File(\"D:\\\\dummy.txt\").getCanonicalFile();\n</code></pre>\n\n<p>you will get:</p>\n\n<pre><code>Exception in thread \"main\" java.io.IOException: The device is not ready\n    at java.io.WinNTFileSystem.canonicalize0(Native Method)\n    at java.io.Win32FileSystem.canonicalize(Win32FileSystem.java:396)\n    at java.io.File.getCanonicalPath(File.java:559)\n    at java.io.File.getCanonicalFile(File.java:583)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":254415,"reputation":10285,"user_id":533800,"display_name":"LaGrandMere"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1292851232,"creation_date":1292851232,"answer_id":4490011,"question_id":4489878,"body_markdown":"Seen here in the [Sun Bug Database][1].\r\n\r\nFor JRE 1.4.2_06, File.getCanonicalPath() wasn&#39;t working on Windows for a removable drive when there is no media present in the drive.\r\n\r\nIt was corrected in Java 1.5, but you can see there can be OS-based problems with this method.\r\n\r\nI don&#39;t know of any problem in the current time, but it can happen, that&#39;s exactly what the Javadoc says. Usually it&#39;s quickly fixed in the newest Java version.\r\n\r\n\r\n  [1]: https://bugs.java.com/bugdatabase/view_bug;jsessionid=c542cb827c6c11e985898911305?bug_id=6192278","title":"File.getCanonicalPath() failure examples","body":"<p>Seen here in the <a href=\"https://bugs.java.com/bugdatabase/view_bug;jsessionid=c542cb827c6c11e985898911305?bug_id=6192278\" rel=\"nofollow noreferrer\">Sun Bug Database</a>.</p>\n<p>For JRE 1.4.2_06, File.getCanonicalPath() wasn't working on Windows for a removable drive when there is no media present in the drive.</p>\n<p>It was corrected in Java 1.5, but you can see there can be OS-based problems with this method.</p>\n<p>I don't know of any problem in the current time, but it can happen, that's exactly what the Javadoc says. Usually it's quickly fixed in the newest Java version.</p>\n"},{"tags":[],"owner":{"account_id":1131849,"reputation":61,"user_id":1117754,"display_name":"AndrewNR"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1324995737,"creation_date":1324995387,"answer_id":8645590,"question_id":4489878,"body_markdown":"The IO Exception also occurs if we try creating a File object with Windows device file keywords (see [device files](http://en.wikipedia.org/wiki/Device_file#Device_files)) used as file name.  \r\nAs if you try renaming the file to those keywords, Windows will not let you to make it (no CON, PRN, COM1 etc. file names allowed), Java also won&#39;t be able to convert that file name to the correct path.\r\n\r\nSo, any of next next code will trow the IO Exception:\r\n\r\n    File file = new File(&quot;COM1&quot;).getContextPath();\r\n    File file = new File(&quot;COM1.txt&quot;).getContextPath();\r\n    File file = new File(&quot;C:/somefolder/COM1.txt&quot;).getContextPath();\r\n\r\nHowever, next code should work:\r\n\r\n    File file = new File(&quot;COM1_.txt&quot;).getContextPath();  //underscore wins :)\r\n\r\n","title":"File.getCanonicalPath() failure examples","body":"<p>The IO Exception also occurs if we try creating a File object with Windows device file keywords (see <a href=\"http://en.wikipedia.org/wiki/Device_file#Device_files\">device files</a>) used as file name.<br>\nAs if you try renaming the file to those keywords, Windows will not let you to make it (no CON, PRN, COM1 etc. file names allowed), Java also won't be able to convert that file name to the correct path.</p>\n\n<p>So, any of next next code will trow the IO Exception:</p>\n\n<pre><code>File file = new File(\"COM1\").getContextPath();\nFile file = new File(\"COM1.txt\").getContextPath();\nFile file = new File(\"C:/somefolder/COM1.txt\").getContextPath();\n</code></pre>\n\n<p>However, next code should work:</p>\n\n<pre><code>File file = new File(\"COM1_.txt\").getContextPath();  //underscore wins :)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":415813,"reputation":3142,"user_id":790839,"display_name":"Anver Sadhat"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1378795401,"creation_date":1378376072,"answer_id":18633601,"question_id":4489878,"body_markdown":"One more scenario, When you try to use Operating System restricted/invalid characters as your file name.\r\n\r\nFor Windows `\\ / : * ? &quot; &lt; &gt; |` these are the invalid characters. Try to rename a file with : you will get a balloon/tip message about the invalid characters.\r\n\r\nTry the Following Java Code.  \r\n\r\n    File file = new File(&quot;c:/outputlog-2013-09-20-22:15&quot;); \r\n    //A common scenario when you try to append java.util.Date to create a file like\r\n    //File newFile = new File(filename + &quot;_&quot; + new Date());\r\n    System.out.println(file.getAbsolutePath());\r\n    System.out.println(file.getCanonicalPath());\r\n\r\nIf the File name contains &lt;br&gt;\r\n`* ? ` you will get java.io.IOException: Invalid argument &lt;br&gt;\r\n`| :` you will get java.io.IOException: The filename, directory name, or volume label syntax is incorrect\r\n\r\n&lt;br&gt;\r\nwhen you use the getCanonicalPath() method. &lt;br&gt;&lt;br&gt;If we use any of `&quot; &lt; &gt;` \r\nchar in the file name, then getCanonicalPath() method is **not** failing but when you try to create the file you will be getting the Invalid argument Exception. \r\n\r\nRefer [jdk7 api][1]\r\n\r\nThe precise definition of canonical form is system-dependent. Here I have used windows 7.\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/api/java/io/File.html#getCanonicalPath%28%29","title":"File.getCanonicalPath() failure examples","body":"<p>One more scenario, When you try to use Operating System restricted/invalid characters as your file name.</p>\n\n<p>For Windows <code>\\ / : * ? \" &lt; &gt; |</code> these are the invalid characters. Try to rename a file with : you will get a balloon/tip message about the invalid characters.</p>\n\n<p>Try the Following Java Code.  </p>\n\n<pre><code>File file = new File(\"c:/outputlog-2013-09-20-22:15\"); \n//A common scenario when you try to append java.util.Date to create a file like\n//File newFile = new File(filename + \"_\" + new Date());\nSystem.out.println(file.getAbsolutePath());\nSystem.out.println(file.getCanonicalPath());\n</code></pre>\n\n<p>If the File name contains <br>\n<code>* ?</code> you will get java.io.IOException: Invalid argument <br>\n<code>| :</code> you will get java.io.IOException: The filename, directory name, or volume label syntax is incorrect</p>\n\n<p><br>\nwhen you use the getCanonicalPath() method. <br><br>If we use any of <code>\" &lt; &gt;</code> \nchar in the file name, then getCanonicalPath() method is <strong>not</strong> failing but when you try to create the file you will be getting the Invalid argument Exception. </p>\n\n<p>Refer <a href=\"http://docs.oracle.com/javase/7/docs/api/java/io/File.html#getCanonicalPath%28%29\" rel=\"nofollow\">jdk7 api</a></p>\n\n<p>The precise definition of canonical form is system-dependent. Here I have used windows 7.</p>\n"},{"tags":[],"owner":{"account_id":2375368,"reputation":4423,"user_id":2078908,"display_name":"ursa"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1413489363,"creation_date":1413489363,"answer_id":26412778,"question_id":4489878,"body_markdown":"Here is generic example for all OS:\r\n\r\n    new File(&quot;\\u0000&quot;).getCanonicalFile();\r\n\r\nBefore canonicalizing of the file, its validity is checked with java.io.File#isInvalid:\r\n\r\n    final boolean isInvalid() {\r\n        if (status == null) {\r\n            status = (this.path.indexOf(&#39;\\u0000&#39;) &lt; 0) ? PathStatus.CHECKED\r\n                                                       : PathStatus.INVALID;\r\n        }\r\n        return status == PathStatus.INVALID;\r\n    }\r\n\r\nAnd if the file is invalid - you&#39;ll get an IO exception:\r\n\r\n    public String getCanonicalPath() throws IOException {\r\n        if (isInvalid()) {\r\n            throw new IOException(&quot;Invalid file path&quot;);\r\n        }\r\n        return fs.canonicalize(fs.resolve(this));\r\n    }\r\n\r\nProfit!","title":"File.getCanonicalPath() failure examples","body":"<p>Here is generic example for all OS:</p>\n\n<pre><code>new File(\"\\u0000\").getCanonicalFile();\n</code></pre>\n\n<p>Before canonicalizing of the file, its validity is checked with java.io.File#isInvalid:</p>\n\n<pre><code>final boolean isInvalid() {\n    if (status == null) {\n        status = (this.path.indexOf('\\u0000') &lt; 0) ? PathStatus.CHECKED\n                                                   : PathStatus.INVALID;\n    }\n    return status == PathStatus.INVALID;\n}\n</code></pre>\n\n<p>And if the file is invalid - you'll get an IO exception:</p>\n\n<pre><code>public String getCanonicalPath() throws IOException {\n    if (isInvalid()) {\n        throw new IOException(\"Invalid file path\");\n    }\n    return fs.canonicalize(fs.resolve(this));\n}\n</code></pre>\n\n<p>Profit!</p>\n"}],"owner":{"account_id":238570,"reputation":8889,"user_id":507546,"accept_rate":88,"display_name":"gigadot"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":14517,"favorite_count":0,"down_vote_count":0,"up_vote_count":16,"accepted_answer_id":4490010,"answer_count":5,"score":16,"last_activity_date":1679392206,"creation_date":1292850380,"question_id":4489878,"body_markdown":"Does anyone have an experience or know when the method `File.getCanonicalPath()` will throw an `IOException`\r\n\r\nI have tried to look up from the Internet and the best answer is in [File API][1] which says \r\n\r\n&quot;`IOException` - If an I/O error occurs, which is possible because the construction of the canonical pathname may require filesystem queries&quot;\r\n\r\nHowever, it is not clear to me because I still cannot think of a case which this might fail. Can anyone give me concrete examples which can happen on Linux, Windows and other OS (optional)?\r\n\r\nI reason I want to know is because I want to handle this exception accordingly. Thus, it will be best if I know all the possible failures that can happen.\r\n\r\n\r\n  [1]: http://download.oracle.com/javase/6/docs/api/java/io/File.html#getCanonicalPath%28%29","title":"File.getCanonicalPath() failure examples","body":"<p>Does anyone have an experience or know when the method <code>File.getCanonicalPath()</code> will throw an <code>IOException</code></p>\n\n<p>I have tried to look up from the Internet and the best answer is in <a href=\"http://download.oracle.com/javase/6/docs/api/java/io/File.html#getCanonicalPath%28%29\">File API</a> which says </p>\n\n<p>\"<code>IOException</code> - If an I/O error occurs, which is possible because the construction of the canonical pathname may require filesystem queries\"</p>\n\n<p>However, it is not clear to me because I still cannot think of a case which this might fail. Can anyone give me concrete examples which can happen on Linux, Windows and other OS (optional)?</p>\n\n<p>I reason I want to know is because I want to handle this exception accordingly. Thus, it will be best if I know all the possible failures that can happen.</p>\n"},{"tags":["java","for-loop","while-loop","stack","java.util.scanner"],"comments":[{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1679383514,"post_id":75798264,"comment_id":133707259,"body_markdown":"You always read two lines in `for (String s = input.readLine(); !input.isEmpty(); s = input.readLine()) {`","body":"You always read two lines in <code>for (String s = input.readLine(); !input.isEmpty(); s = input.readLine()) {</code>"},{"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"score":0,"creation_date":1679383662,"post_id":75798264,"comment_id":133707290,"body_markdown":"What is `edu.princeton.cs.algs4.In`?","body":"What is <code>edu.princeton.cs.algs4.In</code>?"},{"owner":{"account_id":28072808,"reputation":33,"user_id":21445132,"display_name":"oresky"},"score":0,"creation_date":1679383968,"post_id":75798264,"comment_id":133707344,"body_markdown":"@Jens I suspected so, but I don&#39;t really know why. From what I understand, `String s = input.readLine()` initializes `s` to the first line,  `!input.isEmpty()` checks if the current line is empty, and the second `input.readLine()` updates `s` with the next line after every iteration. So it should iterate read all the lines...","body":"@Jens I suspected so, but I don&#39;t really know why. From what I understand, <code>String s = input.readLine()</code> initializes <code>s</code> to the first line,  <code>!input.isEmpty()</code> checks if the current line is empty, and the second <code>input.readLine()</code> updates <code>s</code> with the next line after every iteration. So it should iterate read all the lines..."},{"owner":{"account_id":28072808,"reputation":33,"user_id":21445132,"display_name":"oresky"},"score":0,"creation_date":1679384038,"post_id":75798264,"comment_id":133707355,"body_markdown":"@Queeg source code for the `In` class used here","body":"@Queeg source code for the <code>In</code> class used here"},{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1679384058,"post_id":75798264,"comment_id":133707359,"body_markdown":"@oresky Hard to say without knowing the implementation of IN. But I would suggest you to use a debugger to find out what is going on","body":"@oresky Hard to say without knowing the implementation of IN. But I would suggest you to use a debugger to find out what is going on"},{"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"score":0,"creation_date":1679388387,"post_id":75798264,"comment_id":133708319,"body_markdown":"@oresky Your assumption is wrong. `!input.isEmpty()` does not check if the current line is empty. It checks whether there is still data that can be obtained via `input.readLine()`. The current line is stored in `s`.","body":"@oresky Your assumption is wrong. <code>!input.isEmpty()</code> does not check if the current line is empty. It checks whether there is still data that can be obtained via <code>input.readLine()</code>. The current line is stored in <code>s</code>."},{"owner":{"account_id":28072808,"reputation":33,"user_id":21445132,"display_name":"oresky"},"score":0,"creation_date":1679390234,"post_id":75798264,"comment_id":133708751,"body_markdown":"@Queeg Yes, and I think that the body is never executed because `s` is updated _before_ the condition is checked. When I tried stepping into the loop, first it opened `readLine()` and then `isEmpty()`","body":"@Queeg Yes, and I think that the body is never executed because <code>s</code> is updated <i>before</i> the condition is checked. When I tried stepping into the loop, first it opened <code>readLine()</code> and then <code>isEmpty()</code>"}],"answers":[{"tags":[],"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1679392091,"creation_date":1679390989,"answer_id":75799377,"question_id":75798264,"body_markdown":"because a for loop checks its termination condition after it performs an increment, and terminartes if it is false, the result of the `readLine` which moves the `In` to empty will never be used.\r\n\r\nRun this code to see:\r\n```\r\npublic class X {\r\n    public static void main(String[] args) {\r\n        In in = new In();\r\n        for (String s = in.readLine(); !in.isEmpty(); s = in.readLine()) {\r\n            System.out.println(&quot;body&quot;);\r\n        }\r\n    }\r\n\r\n}\r\nclass In {\r\n    private int count = 0;\r\n    public String readLine() {\r\n        System.out.println(&quot;readLine &quot; + count);\r\n        return &quot;&quot;+count++;\r\n    }\r\n\r\n    public boolean isEmpty() {\r\n        System.out.println(&quot;isEmpty &quot; + count);\r\n        return count &gt; 2;\r\n    }\r\n}\r\n```\r\nThe output is:\r\n```\r\nreadLine 0\r\nisEmpty 1\r\nbody\r\nreadLine 1\r\nisEmpty 2\r\nbody\r\nreadLine 2\r\nisEmpty 3\r\n```\r\nSee that `body` doesn&#39;t appear after the last `readLine`.\r\n\r\nAnother bug in your program is that `readLine` is called at least once -- even if the `In` is already empty.\r\n\r\nIf you really want to use a `for` loop, you can create an `Iterable` and use a foreach loop:\r\n```\r\nimport java.util.Iterator;\r\n\r\npublic class X {\r\n    public static void main(String[] args) {\r\n        In in = new In();\r\n        for (String s: new InIterable(in)) {\r\n            System.out.println(&quot;body &quot; + s);\r\n        }\r\n    }\r\n\r\n}\r\n\r\nclass InIterable implements Iterable&lt;String&gt; {\r\n    private final In in;\r\n\r\n    InIterable(In in) {\r\n        this.in = in;\r\n    }\r\n\r\n    @Override\r\n    public Iterator&lt;String&gt; iterator() {\r\n        return new Iterator&lt;&gt;() {\r\n            @Override\r\n            public boolean hasNext() {\r\n                return !in.isEmpty();\r\n            }\r\n\r\n            @Override\r\n            public String next() {\r\n                return in.readLine();\r\n            }\r\n        };\r\n    }\r\n}\r\n```","title":"For loop terminates earlier than expected when iterating over a text file","body":"<p>because a for loop checks its termination condition after it performs an increment, and terminartes if it is false, the result of the <code>readLine</code> which moves the <code>In</code> to empty will never be used.</p>\n<p>Run this code to see:</p>\n<pre><code>public class X {\n    public static void main(String[] args) {\n        In in = new In();\n        for (String s = in.readLine(); !in.isEmpty(); s = in.readLine()) {\n            System.out.println(&quot;body&quot;);\n        }\n    }\n\n}\nclass In {\n    private int count = 0;\n    public String readLine() {\n        System.out.println(&quot;readLine &quot; + count);\n        return &quot;&quot;+count++;\n    }\n\n    public boolean isEmpty() {\n        System.out.println(&quot;isEmpty &quot; + count);\n        return count &gt; 2;\n    }\n}\n</code></pre>\n<p>The output is:</p>\n<pre><code>readLine 0\nisEmpty 1\nbody\nreadLine 1\nisEmpty 2\nbody\nreadLine 2\nisEmpty 3\n</code></pre>\n<p>See that <code>body</code> doesn't appear after the last <code>readLine</code>.</p>\n<p>Another bug in your program is that <code>readLine</code> is called at least once -- even if the <code>In</code> is already empty.</p>\n<p>If you really want to use a <code>for</code> loop, you can create an <code>Iterable</code> and use a foreach loop:</p>\n<pre><code>import java.util.Iterator;\n\npublic class X {\n    public static void main(String[] args) {\n        In in = new In();\n        for (String s: new InIterable(in)) {\n            System.out.println(&quot;body &quot; + s);\n        }\n    }\n\n}\n\nclass InIterable implements Iterable&lt;String&gt; {\n    private final In in;\n\n    InIterable(In in) {\n        this.in = in;\n    }\n\n    @Override\n    public Iterator&lt;String&gt; iterator() {\n        return new Iterator&lt;&gt;() {\n            @Override\n            public boolean hasNext() {\n                return !in.isEmpty();\n            }\n\n            @Override\n            public String next() {\n                return in.readLine();\n            }\n        };\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":28072808,"reputation":33,"user_id":21445132,"display_name":"oresky"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":41,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":75799377,"answer_count":1,"score":0,"last_activity_date":1679392091,"creation_date":1679383021,"question_id":75798264,"body_markdown":"I&#39;ve been reading this book, [Algorithms by Sedgewick and Wayne](https://sedgewick.io/books/algorithms/), and this is one of the exercises given in chapter 1:\r\n\r\n*1.3.4 Write a stack client Parentheses that reads in a text stream from standard input and uses a stack to determine whether its parentheses are properly balanced. For example, your program should print true for [()]{}{[()()]()} and false for [(]).*\r\n\r\nNow, my solution works when using a while loop (although it doesn&#39;t exactly do what was asked):\r\n\r\n[Link to In.java](https://introcs.cs.princeton.edu/java/stdlib/In.java.html)\r\n\r\n```\r\nimport edu.princeton.cs.algs4.In;\r\nimport edu.princeton.cs.algs4.StdOut;\r\n\r\npublic class Parenthesis {\r\n    public static void main(String[] args) {\r\n        In input = new In(&quot;parenthesis.txt&quot;);\r\n        LinkedListStack&lt;String&gt; stack = new LinkedListStack&lt;&gt;();\r\n\r\n        while (!input.isEmpty()) {\r\n            String s = input.readLine();\r\n            \r\n            if (s.equals(&quot;(&quot;))\r\n                stack.push(s);\r\n            else if (s.equals(&quot;)&quot;))\r\n                if (!stack.isEmpty())\r\n                    stack.pop();\r\n                else\r\n                    stack.push(s);\r\n        }\r\n\r\n        if (stack.isEmpty())\r\n            StdOut.println(&quot;Balanced&quot;);\r\n        else\r\n            StdOut.println(&quot;Unbalanced&quot;);\r\n    }\r\n}\r\n```\r\n\r\nBut when I replace the while loop with a for loop, the loop terminates before reaching the last &quot;)&quot;:\r\n\r\n```\r\nimport edu.princeton.cs.algs4.In;\r\nimport edu.princeton.cs.algs4.StdOut;\r\n\r\npublic class Parenthesis {\r\n    public static void main(String[] args) {\r\n        In input = new In(&quot;parenthesis.txt&quot;);\r\n        LinkedListStack&lt;String&gt; stack = new LinkedListStack&lt;&gt;();\r\n\r\n        for (String s = input.readLine(); !input.isEmpty(); s = input.readLine()) {\r\n            if (s.equals(&quot;(&quot;))\r\n                stack.push(s);\r\n            else if (s.equals(&quot;)&quot;))\r\n                if (!stack.isEmpty())\r\n                    stack.pop();\r\n                else\r\n                    stack.push(s);\r\n        }\r\n    \r\n        if (stack.isEmpty())\r\n            StdOut.println(&quot;Balanced&quot;);\r\n        else\r\n            StdOut.println(&quot;Unbalanced&quot;);\r\n    }\r\n}\r\n```\r\n\r\nI thought the for loop I used was just a compact version of the while loop, but clearly I&#39;m doing something wrong. I&#39;ve tried debugging the code over and over, but can&#39;t figure out why this happens.\r\n\r\nP.S. if there is a more efficient approach for this problem, please do share it. Thanks!","title":"For loop terminates earlier than expected when iterating over a text file","body":"<p>I've been reading this book, <a href=\"https://sedgewick.io/books/algorithms/\" rel=\"nofollow noreferrer\">Algorithms by Sedgewick and Wayne</a>, and this is one of the exercises given in chapter 1:</p>\n<p><em>1.3.4 Write a stack client Parentheses that reads in a text stream from standard input and uses a stack to determine whether its parentheses are properly balanced. For example, your program should print true for [()]{}{()()} and false for [(]).</em></p>\n<p>Now, my solution works when using a while loop (although it doesn't exactly do what was asked):</p>\n<p><a href=\"https://introcs.cs.princeton.edu/java/stdlib/In.java.html\" rel=\"nofollow noreferrer\">Link to In.java</a></p>\n<pre><code>import edu.princeton.cs.algs4.In;\nimport edu.princeton.cs.algs4.StdOut;\n\npublic class Parenthesis {\n    public static void main(String[] args) {\n        In input = new In(&quot;parenthesis.txt&quot;);\n        LinkedListStack&lt;String&gt; stack = new LinkedListStack&lt;&gt;();\n\n        while (!input.isEmpty()) {\n            String s = input.readLine();\n            \n            if (s.equals(&quot;(&quot;))\n                stack.push(s);\n            else if (s.equals(&quot;)&quot;))\n                if (!stack.isEmpty())\n                    stack.pop();\n                else\n                    stack.push(s);\n        }\n\n        if (stack.isEmpty())\n            StdOut.println(&quot;Balanced&quot;);\n        else\n            StdOut.println(&quot;Unbalanced&quot;);\n    }\n}\n</code></pre>\n<p>But when I replace the while loop with a for loop, the loop terminates before reaching the last &quot;)&quot;:</p>\n<pre><code>import edu.princeton.cs.algs4.In;\nimport edu.princeton.cs.algs4.StdOut;\n\npublic class Parenthesis {\n    public static void main(String[] args) {\n        In input = new In(&quot;parenthesis.txt&quot;);\n        LinkedListStack&lt;String&gt; stack = new LinkedListStack&lt;&gt;();\n\n        for (String s = input.readLine(); !input.isEmpty(); s = input.readLine()) {\n            if (s.equals(&quot;(&quot;))\n                stack.push(s);\n            else if (s.equals(&quot;)&quot;))\n                if (!stack.isEmpty())\n                    stack.pop();\n                else\n                    stack.push(s);\n        }\n    \n        if (stack.isEmpty())\n            StdOut.println(&quot;Balanced&quot;);\n        else\n            StdOut.println(&quot;Unbalanced&quot;);\n    }\n}\n</code></pre>\n<p>I thought the for loop I used was just a compact version of the while loop, but clearly I'm doing something wrong. I've tried debugging the code over and over, but can't figure out why this happens.</p>\n<p>P.S. if there is a more efficient approach for this problem, please do share it. Thanks!</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9434,"page":558,"page_size":100}
