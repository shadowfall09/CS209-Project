{"items":[{"tags":["java","eclipse","eclipse-plugin","windowbuilder","palette"],"comments":[{"owner":{"account_id":1262300,"reputation":23577,"user_id":1220269,"accept_rate":91,"display_name":"Nathaniel Waisbrot"},"score":0,"creation_date":1365741627,"post_id":15963082,"comment_id":22751431,"body_markdown":"Yeah, that sounds like a bad install to me.  How did you install it?","body":"Yeah, that sounds like a bad install to me.  How did you install it?"},{"owner":{"account_id":2345668,"reputation":13002,"user_id":2055998,"accept_rate":68,"display_name":"PM 77-1"},"score":0,"creation_date":1365741922,"post_id":15963082,"comment_id":22751504,"body_markdown":"@Nathaniel Waisbrot - \nAdded my answer to the original post.","body":"@Nathaniel Waisbrot -  Added my answer to the original post."},{"owner":{"account_id":1262300,"reputation":23577,"user_id":1220269,"accept_rate":91,"display_name":"Nathaniel Waisbrot"},"score":0,"creation_date":1365742238,"post_id":15963082,"comment_id":22751596,"body_markdown":"I have had weird problems doing it that way in the past, and better results using the Eclipse Marketplace to do it.","body":"I have had weird problems doing it that way in the past, and better results using the Eclipse Marketplace to do it."}],"answers":[{"tags":[],"owner":{"account_id":308576,"reputation":5250,"user_id":620537,"accept_rate":60,"display_name":"gamerson"},"down_vote_count":1,"up_vote_count":1,"is_accepted":true,"score":0,"last_activity_date":1365750955,"creation_date":1365750955,"answer_id":15965299,"question_id":15963082,"body_markdown":"The Palette view in Eclipse is tied to the currently active Editor.  So if you don&#39;t have an Editor or you have selected and focused on the Palette view, it will be empty.  So leave the palette view open, then create a JFrame java class.  Then right-click the Java Class and make sure you are opening it in the WindowBuilder editor.  Once the WindowBuilder visual editor is open, and you also have the Palette open, you should see the wigets populated there.","title":"Eclipse Juno WindowBuilder Palette is Empty","body":"<p>The Palette view in Eclipse is tied to the currently active Editor.  So if you don't have an Editor or you have selected and focused on the Palette view, it will be empty.  So leave the palette view open, then create a JFrame java class.  Then right-click the Java Class and make sure you are opening it in the WindowBuilder editor.  Once the WindowBuilder visual editor is open, and you also have the Palette open, you should see the wigets populated there.</p>\n"},{"tags":[],"owner":{"account_id":5483312,"reputation":149,"user_id":4358971,"display_name":"Ritesh Kumar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1638087919,"creation_date":1638087919,"answer_id":70141730,"question_id":15963082,"body_markdown":"Check if pallet is open in view pannel (parallel to console, progress and all), if it is open close that, then pannel will appear automatically in windowsBuilder tool.","title":"Eclipse Juno WindowBuilder Palette is Empty","body":"<p>Check if pallet is open in view pannel (parallel to console, progress and all), if it is open close that, then pannel will appear automatically in windowsBuilder tool.</p>\n"},{"tags":[],"owner":{"account_id":30101363,"reputation":1,"user_id":23068388,"display_name":"Dinesh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1702071082,"creation_date":1702071082,"answer_id":77629268,"question_id":15963082,"body_markdown":"go to menu, window/Show view in the menu and enable palete option.","title":"Eclipse Juno WindowBuilder Palette is Empty","body":"<p>go to menu, window/Show view in the menu and enable palete option.</p>\n"}],"owner":{"account_id":2345668,"reputation":13002,"user_id":2055998,"accept_rate":68,"display_name":"PM 77-1"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":14694,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":15965299,"answer_count":3,"score":2,"last_activity_date":1702071082,"creation_date":1365740953,"question_id":15963082,"body_markdown":"I&#39;m using **Eclipse 4.2 (Juno) for Java EE** and just installed **WindowBuilder** plug-n. At this time I&#39;m building Java SE Application with Swing components.\r\n\r\nThe `Palette` is **completely empty** (no widgets). Is it a sign of incomplete installation or have I (hopefully) missed something obvious?\r\n\r\nI was able to select `New -&gt; Other -&gt; WindowBuilder -&gt; Swing Designer -&gt; JPanel`.\r\n\r\nNot even sure what other information I need to provide.\r\n\r\nThank you in advance for your help.\r\n\r\n**EDIT:** \r\n\r\nI installed via `Help -&gt; Install new software`  Followed [these instructions][1].\r\n\r\nWhat throws me off is that in Eclipse Community Forum I found [a post][2] which answering a similar question states: &quot;*What you are seeing is the **expected behaviour**. Until you actually edit a UI class using WindowBuilder, those views will be empty.*&quot;.  I do not know how to interpret it.\r\n\r\n**UPDATE: Problem solved**\r\n\r\nWhen I created a new `JFrame` via `Create new visual classes` icon I finally got `Design` view as well as `Palette` full of components and normal `Structure` view.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/10867920/installing-windowbuilder-on-eclipse-4-2?rq=1\r\n  [2]: http://www.eclipse.org/forums/index.php/mv/msg/243146/730895/","title":"Eclipse Juno WindowBuilder Palette is Empty","body":"<p>I'm using <strong>Eclipse 4.2 (Juno) for Java EE</strong> and just installed <strong>WindowBuilder</strong> plug-n. At this time I'm building Java SE Application with Swing components.</p>\n\n<p>The <code>Palette</code> is <strong>completely empty</strong> (no widgets). Is it a sign of incomplete installation or have I (hopefully) missed something obvious?</p>\n\n<p>I was able to select <code>New -&gt; Other -&gt; WindowBuilder -&gt; Swing Designer -&gt; JPanel</code>.</p>\n\n<p>Not even sure what other information I need to provide.</p>\n\n<p>Thank you in advance for your help.</p>\n\n<p><strong>EDIT:</strong> </p>\n\n<p>I installed via <code>Help -&gt; Install new software</code>  Followed <a href=\"https://stackoverflow.com/questions/10867920/installing-windowbuilder-on-eclipse-4-2?rq=1\">these instructions</a>.</p>\n\n<p>What throws me off is that in Eclipse Community Forum I found <a href=\"http://www.eclipse.org/forums/index.php/mv/msg/243146/730895/\" rel=\"nofollow noreferrer\">a post</a> which answering a similar question states: \"<em>What you are seeing is the <strong>expected behaviour</strong>. Until you actually edit a UI class using WindowBuilder, those views will be empty.</em>\".  I do not know how to interpret it.</p>\n\n<p><strong>UPDATE: Problem solved</strong></p>\n\n<p>When I created a new <code>JFrame</code> via <code>Create new visual classes</code> icon I finally got <code>Design</code> view as well as <code>Palette</code> full of components and normal <code>Structure</code> view.</p>\n"},{"tags":["java","spring-boot","spring-boot-actuator"],"owner":{"account_id":11925912,"reputation":23,"user_id":8727214,"display_name":"Gin98"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1702070597,"creation_date":1701882986,"question_id":77615067,"body_markdown":"I&#39;ve included the necessary dependencies and when it is exposed, I can get the process uptime of my server but I would rather not expose these endpoints to the web for security reasons.  I understand I could use spring security to lock down these endpoints but I would rather not include a dependency that is unnecessary unless its needed.  This is all in a microservice that simply runs a scheduled task.  None of it should be exposed to the web to begin with but since we were using spring boot and needed to collect metrics on it anyways, I decided to go this route.  I&#39;m using spring boot 2.7.16\r\n\r\n```\r\n    &lt;parent&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n        &lt;version&gt;2.7.16&lt;/version&gt;\r\n        &lt;relativePath /&gt; &lt;!-- lookup parent from repository --&gt;\r\n    &lt;/parent&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-data-redis&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;redis.clients&lt;/groupId&gt;\r\n        &lt;artifactId&gt;jedis&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\r\n     &lt;/dependency&gt;\r\n     &lt;dependency&gt;\r\n        &lt;groupId&gt;io.micrometer&lt;/groupId&gt;\r\n        &lt;artifactId&gt;micrometer-registry-prometheus&lt;/artifactId&gt;\r\n        &lt;scope&gt;runtime&lt;/scope&gt;\r\n     &lt;/dependency&gt;\r\n```\r\n\r\n\r\nHere is the scrubbed code I&#39;m using.  @Autowired works fine when the metrics endpoint is exposed to the web \r\n\r\n```\r\n@Component\r\npublic class ScheduledTasks {\r\n\r\n\tprivate static final Logger LOGGER = LogManager.getLogger(ScheduledTasks.class.getName());\r\n\r\n\t@Autowired\r\n\tprivate MetricsEndpoint metrics;\r\n\r\n        @Scheduled(fixedDelayString = &quot;${schedule.checkAvailability}&quot;)\r\n\tpublic void checkUptime() {\r\n\t\tSet&lt;String&gt; listOfNames = metrics.listNames().getNames();\r\n\t\tLOGGER.info(&quot;Trying to log list of names&quot;);\r\n\t\tLOGGER.info(listOfNames);\r\n\t\tlistOfNames.forEach(names -&gt; {\r\n\t\t\tLOGGER.info(names);\r\n\t\t});\r\n\t\t// this returns the amount of time the JVM has been active in seconds\r\n\t\tDouble uptimeInSeconds = metrics.metric(&quot;process.uptime&quot;, null).getMeasurements().get(0).getValue();\r\n\t\tLOGGER.info(&quot;uptimeInSeconds&quot;);\r\n\t\tLOGGER.info(uptimeInSeconds);\r\n        }\r\n```\r\nI&#39;m using fabric8 in order download configMaps and apply them on start.  Its worked perfectly in that regard and when I enable the web endpoint this all works. Here is my scrubbed config map \r\n\r\n\r\n```\r\nkind: ConfigMap\r\napiVersion: v1\r\nmetadata:\r\n    name: example\r\ndata:\r\n    management.endpoints.web.exposure.include: &quot;health,info&quot;\r\n    management.endpoints.web.base-path: &quot;/example/metrics/actuator&quot;\r\n    management.metrics.enable.all: &quot;true&quot;\r\n    #time in milliseconds\r\n    schedule.checkAvailability: &quot;60000&quot;\r\n```\r\n\r\n\r\n\r\nI&#39;ve tried just making my own MetricsEndpoint bean with a SimpleMeterRegistry but this does not seem to be giving any metrics at all.  When I log the list of names available for metrics, its empty.  I&#39;d prefer to somehow use the default metrics provided when its exposed to the web as the information seems valuable for our use case. \r\n\r\n\r\n```\r\n\t@Bean\r\n\tpublic MetricsEndpoint metricsEndpoint() {\r\n\t\tSimpleMeterRegistry registery = new SimpleMeterRegistry();\r\n\t\treturn new MetricsEndpoint(registery);\r\n\t}\r\n```\r\nUPDATE SOLVED \r\nFor the poor soul who finds this via google.\r\nI did this with JMX.\r\nIm not sure if there is an easier and better way but its how I made it work.\r\nI kept the logging in but feel free to remove it obviously.\r\nI&#39;m using the jackson mapper com.fasterxml.jackson.databind.ObjectMapper;\r\nIf you want to define your own domain here is a link https://docs.spring.io/spring-boot/docs/2.0.6.RELEASE/reference/html/production-ready-jmx.html\r\nI just defined my own in my configMap and included the \r\nspring.jmx.enabled: &quot;true&quot; as well. \r\n\r\n```\r\n\r\n\tprivate ArrayList&lt;Map&lt;String, Object&gt;&gt; getMetricMeasurements(String metric) throws Exception {\r\n\t\tObject individualMetric = null;\r\n\t\tMap&lt;String, Object&gt; metricMap = null;\r\n\t\tMBeanServer mBeanServer = ManagementFactory.getPlatformMBeanServer();\r\n\t\tObjectName metricsName = null;\r\n\t\tMBeanInfo mBeanInfo = null;\r\n\t\tArrayList&lt;Map&lt;String, Object&gt;&gt; measurementList = null;\r\n\r\n\t\ttry {\r\n\t\t\tLOGGER.info(&quot;looking at metricsObject&quot;);\r\n            //this will be either the default spring domain or your defined one\r\n            metricsName = new ObjectName(&quot;org.springframework.boot:type=Endpoint,name=Metrics&quot;);\r\n\t\t\tLOGGER.info(metricsName);\r\n\t\t\tLOGGER.info(&quot;looking at mBeanInfo&quot;);\r\n\t\t\tmBeanInfo = mBeanServer.getMBeanInfo(metricsName);\r\n\t\t\tLOGGER.info(mBeanInfo);\r\n\r\n\t\t\tif (mBeanInfo != null) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tObject[] metricParam = { metric };\r\n\t\t\t\t\tString[] metricSignature = { String.class.getName(), List.class.getName() };\r\n\t\t\t\t\tLOGGER.info(&quot;looking at individualMetric&quot;);\r\n\t\t\t\t\tindividualMetric = mBeanServer.invoke(metricsName, &quot;metric&quot;, metricParam, metricSignature);\r\n\t\t\t\t\tLOGGER.info(individualMetric);\r\n\t\t\t\t} catch (Exception e) {\r\n\t\t\t\t\tLOGGER.error(e.getMessage());\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (individualMetric != null) {\r\n\t\t\t\tObjectMapper JSONMapper = new ObjectMapper();\r\n\t\t\t\tString jsonString = JSONMapper.writeValueAsString(individualMetric);\r\n\t\t\t\tLOGGER.info(&quot;metricMap&quot;);\r\n\t\t\t\tmetricMap = JSONMapper.readValue(jsonString, Map.class);\r\n\t\t\t\tLOGGER.info(metricMap);\r\n\t\t\t\tLOGGER.info(&quot;measurementList&quot;);\r\n\t\t\t\tmeasurementList = (ArrayList&lt;Map&lt;String, Object&gt;&gt;) metricMap.get(&quot;measurements&quot;);\r\n\t\t\t\tLOGGER.info(measurementList);\r\n\t\t\t}\r\n\t\t} catch (Exception e) {\r\n\t\t\tLOGGER.error(e.getMessage());\r\n\t\t}\r\n\r\n\t\treturn measurementList;\r\n\t}\r\n\r\n\r\n```\r\n\r\nThis will return the following format if you call getMetricMeasurement(&quot;process.uptime&quot;)\r\n[{statistic=VALUE, value=some-double-value}]","title":"Is there a way to get the data from the actuator metrics without exposing it to the web?","body":"<p>I've included the necessary dependencies and when it is exposed, I can get the process uptime of my server but I would rather not expose these endpoints to the web for security reasons.  I understand I could use spring security to lock down these endpoints but I would rather not include a dependency that is unnecessary unless its needed.  This is all in a microservice that simply runs a scheduled task.  None of it should be exposed to the web to begin with but since we were using spring boot and needed to collect metrics on it anyways, I decided to go this route.  I'm using spring boot 2.7.16</p>\n<pre><code>    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.7.16&lt;/version&gt;\n        &lt;relativePath /&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-data-redis&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;redis.clients&lt;/groupId&gt;\n        &lt;artifactId&gt;jedis&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\n     &lt;/dependency&gt;\n     &lt;dependency&gt;\n        &lt;groupId&gt;io.micrometer&lt;/groupId&gt;\n        &lt;artifactId&gt;micrometer-registry-prometheus&lt;/artifactId&gt;\n        &lt;scope&gt;runtime&lt;/scope&gt;\n     &lt;/dependency&gt;\n</code></pre>\n<p>Here is the scrubbed code I'm using.  @Autowired works fine when the metrics endpoint is exposed to the web</p>\n<pre><code>@Component\npublic class ScheduledTasks {\n\n    private static final Logger LOGGER = LogManager.getLogger(ScheduledTasks.class.getName());\n\n    @Autowired\n    private MetricsEndpoint metrics;\n\n        @Scheduled(fixedDelayString = &quot;${schedule.checkAvailability}&quot;)\n    public void checkUptime() {\n        Set&lt;String&gt; listOfNames = metrics.listNames().getNames();\n        LOGGER.info(&quot;Trying to log list of names&quot;);\n        LOGGER.info(listOfNames);\n        listOfNames.forEach(names -&gt; {\n            LOGGER.info(names);\n        });\n        // this returns the amount of time the JVM has been active in seconds\n        Double uptimeInSeconds = metrics.metric(&quot;process.uptime&quot;, null).getMeasurements().get(0).getValue();\n        LOGGER.info(&quot;uptimeInSeconds&quot;);\n        LOGGER.info(uptimeInSeconds);\n        }\n</code></pre>\n<p>I'm using fabric8 in order download configMaps and apply them on start.  Its worked perfectly in that regard and when I enable the web endpoint this all works. Here is my scrubbed config map</p>\n<pre><code>kind: ConfigMap\napiVersion: v1\nmetadata:\n    name: example\ndata:\n    management.endpoints.web.exposure.include: &quot;health,info&quot;\n    management.endpoints.web.base-path: &quot;/example/metrics/actuator&quot;\n    management.metrics.enable.all: &quot;true&quot;\n    #time in milliseconds\n    schedule.checkAvailability: &quot;60000&quot;\n</code></pre>\n<p>I've tried just making my own MetricsEndpoint bean with a SimpleMeterRegistry but this does not seem to be giving any metrics at all.  When I log the list of names available for metrics, its empty.  I'd prefer to somehow use the default metrics provided when its exposed to the web as the information seems valuable for our use case.</p>\n<pre><code>    @Bean\n    public MetricsEndpoint metricsEndpoint() {\n        SimpleMeterRegistry registery = new SimpleMeterRegistry();\n        return new MetricsEndpoint(registery);\n    }\n</code></pre>\n<p>UPDATE SOLVED\nFor the poor soul who finds this via google.\nI did this with JMX.\nIm not sure if there is an easier and better way but its how I made it work.\nI kept the logging in but feel free to remove it obviously.\nI'm using the jackson mapper com.fasterxml.jackson.databind.ObjectMapper;\nIf you want to define your own domain here is a link <a href=\"https://docs.spring.io/spring-boot/docs/2.0.6.RELEASE/reference/html/production-ready-jmx.html\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-boot/docs/2.0.6.RELEASE/reference/html/production-ready-jmx.html</a>\nI just defined my own in my configMap and included the\nspring.jmx.enabled: &quot;true&quot; as well.</p>\n<pre><code>\n    private ArrayList&lt;Map&lt;String, Object&gt;&gt; getMetricMeasurements(String metric) throws Exception {\n        Object individualMetric = null;\n        Map&lt;String, Object&gt; metricMap = null;\n        MBeanServer mBeanServer = ManagementFactory.getPlatformMBeanServer();\n        ObjectName metricsName = null;\n        MBeanInfo mBeanInfo = null;\n        ArrayList&lt;Map&lt;String, Object&gt;&gt; measurementList = null;\n\n        try {\n            LOGGER.info(&quot;looking at metricsObject&quot;);\n            //this will be either the default spring domain or your defined one\n            metricsName = new ObjectName(&quot;org.springframework.boot:type=Endpoint,name=Metrics&quot;);\n            LOGGER.info(metricsName);\n            LOGGER.info(&quot;looking at mBeanInfo&quot;);\n            mBeanInfo = mBeanServer.getMBeanInfo(metricsName);\n            LOGGER.info(mBeanInfo);\n\n            if (mBeanInfo != null) {\n                try {\n                    Object[] metricParam = { metric };\n                    String[] metricSignature = { String.class.getName(), List.class.getName() };\n                    LOGGER.info(&quot;looking at individualMetric&quot;);\n                    individualMetric = mBeanServer.invoke(metricsName, &quot;metric&quot;, metricParam, metricSignature);\n                    LOGGER.info(individualMetric);\n                } catch (Exception e) {\n                    LOGGER.error(e.getMessage());\n                }\n            }\n\n            if (individualMetric != null) {\n                ObjectMapper JSONMapper = new ObjectMapper();\n                String jsonString = JSONMapper.writeValueAsString(individualMetric);\n                LOGGER.info(&quot;metricMap&quot;);\n                metricMap = JSONMapper.readValue(jsonString, Map.class);\n                LOGGER.info(metricMap);\n                LOGGER.info(&quot;measurementList&quot;);\n                measurementList = (ArrayList&lt;Map&lt;String, Object&gt;&gt;) metricMap.get(&quot;measurements&quot;);\n                LOGGER.info(measurementList);\n            }\n        } catch (Exception e) {\n            LOGGER.error(e.getMessage());\n        }\n\n        return measurementList;\n    }\n\n\n</code></pre>\n<p>This will return the following format if you call getMetricMeasurement(&quot;process.uptime&quot;)\n[{statistic=VALUE, value=some-double-value}]</p>\n"},{"tags":["java","selenium-webdriver","selenium-chromedriver","webdriver","nwjs"],"owner":{"account_id":22513715,"reputation":33,"user_id":19018607,"display_name":"Laserwolve"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":2,"is_answered":false,"view_count":20,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":0,"score":-1,"last_activity_date":1702070299,"creation_date":1702070299,"question_id":77629224,"body_markdown":"I&#39;m running a Selenium Java JUnit test against an NW.js application, using chrome driver. I need to execute JavaScript in the &quot;Runtime&quot; context, see below. It doesn&#39;t exist in the DOM, so I can&#39;t switch to it like I would an IFrame. How can I execute JavaScript in a different context that isn&#39;t an iFrame?\r\n\r\n[![enter image description here][1]][1]\r\n\r\n`window.frames.length` is 0, so these &quot;extension&quot; contexts don&#39;t seem to be treated as IFrames. I can execute JavaScript just fine by manually writing it into the DevTools window of the NW.js application.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/QKyUs.png","title":"Execute JavaScript in Selenium Java, in different (non-IFrame) context","body":"<p>I'm running a Selenium Java JUnit test against an NW.js application, using chrome driver. I need to execute JavaScript in the &quot;Runtime&quot; context, see below. It doesn't exist in the DOM, so I can't switch to it like I would an IFrame. How can I execute JavaScript in a different context that isn't an iFrame?</p>\n<p><a href=\"https://i.stack.imgur.com/QKyUs.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/QKyUs.png\" alt=\"enter image description here\" /></a></p>\n<p><code>window.frames.length</code> is 0, so these &quot;extension&quot; contexts don't seem to be treated as IFrames. I can execute JavaScript just fine by manually writing it into the DevTools window of the NW.js application.</p>\n"},{"tags":["c#","java","unicode","utf-8","utf-16"],"comments":[{"owner":{"account_id":86959,"reputation":71656,"user_id":241462,"accept_rate":71,"display_name":"Dean Harding"},"score":3,"creation_date":1275133786,"post_id":2934809,"comment_id":2989075,"body_markdown":"In addition to my answer, I would say that .NET/C# chose UTF-16 because that&#39;s the &quot;native&quot; encoding of Windows: it&#39;s easier to interop with native Windows if you&#39;re using the same encoding.","body":"In addition to my answer, I would say that .NET/C# chose UTF-16 because that&#39;s the &quot;native&quot; encoding of Windows: it&#39;s easier to interop with native Windows if you&#39;re using the same encoding."},{"owner":{"account_id":10108,"reputation":530002,"user_id":18936,"display_name":"bobince"},"score":1,"creation_date":1275136190,"post_id":2934809,"comment_id":2989244,"body_markdown":"For what purposes are you choosing an encoding? UTF-16 is a reasonable choice for in-memory string handling, as is `wchar_t` which will be UTF-16 on Windows and typically UTF-32 elsewhere. But for on-the-wire protocols and file storage, UTF-8 is almost always the best choice.","body":"For what purposes are you choosing an encoding? UTF-16 is a reasonable choice for in-memory string handling, as is <code>wchar_t</code> which will be UTF-16 on Windows and typically UTF-32 elsewhere. But for on-the-wire protocols and file storage, UTF-8 is almost always the best choice."},{"owner":{"account_id":106133,"reputation":106244,"user_id":282848,"accept_rate":93,"display_name":"Andreas Rejbrand"},"score":2,"creation_date":1275148094,"post_id":2934809,"comment_id":2990077,"body_markdown":"@codeka: I agree (gave you +1), but then one could also ask the question &quot;why is the native encoding of Windows UTF-16 and not UTF-8?&quot;.","body":"@codeka: I agree (gave you +1), but then one could also ask the question &quot;why is the native encoding of Windows UTF-16 and not UTF-8?&quot;."},{"owner":{"account_id":95063,"reputation":18807,"user_id":259130,"accept_rate":54,"display_name":"Roman A. Taycher"},"score":0,"creation_date":1298813623,"post_id":2934809,"comment_id":5759275,"body_markdown":"The qt c++ framework also uses utf-16 for strings","body":"The qt c++ framework also uses utf-16 for strings"},{"owner":{"account_id":250783,"reputation":16159,"user_id":527702,"accept_rate":63,"display_name":"hippietrail"},"score":0,"creation_date":1369878638,"post_id":2934809,"comment_id":24259900,"body_markdown":"Prefer UTF-16 if it is native to your Operating System or Programming Language. That means Windows, C#, and Java mainly. Choose UTF-8 if it is native to your Operating System or Programming Language, or when your programming language doesn&#39;t really have a native encoding. This means *nix and Mac OS X, C, C++. If you&#39;re cross-platform from the start it seems easer to get UTF-8 to work nice on Windows than to use UTF-16 everywhere on *nix in the case of C/C++. Perl is designed to work with all encodings but implicit conversions lead to many errors. JavaScript including node.js uses UCS-2!!","body":"Prefer UTF-16 if it is native to your Operating System or Programming Language. That means Windows, C#, and Java mainly. Choose UTF-8 if it is native to your Operating System or Programming Language, or when your programming language doesn&#39;t really have a native encoding. This means *nix and Mac OS X, C, C++. If you&#39;re cross-platform from the start it seems easer to get UTF-8 to work nice on Windows than to use UTF-16 everywhere on *nix in the case of C/C++. Perl is designed to work with all encodings but implicit conversions lead to many errors. JavaScript including node.js uses UCS-2!!"}],"answers":[{"tags":[],"owner":{"account_id":7507,"reputation":122606,"user_id":13087,"accept_rate":68,"display_name":"Joe"},"down_vote_count":5,"up_vote_count":7,"is_accepted":false,"score":2,"last_activity_date":1275132870,"creation_date":1275132870,"answer_id":2934828,"question_id":2934809,"body_markdown":"For many (most?) applications, you will be dealing only with characters in the &lt;a href=&quot;http://en.wikipedia.org/wiki/Basic_Multilingual_Plane#Basic_Multilingual_Plane&quot;&gt;Basic Multilingual Plane&lt;/a&gt;, so can treat UTF-16 as a fixed-length encoding.  \r\n\r\nSo you avoid all the complexity of variable-length encodings like UTF-8.","title":"Is there any reason to prefer UTF-16 over UTF-8?","body":"<p>For many (most?) applications, you will be dealing only with characters in the <a href=\"http://en.wikipedia.org/wiki/Basic_Multilingual_Plane#Basic_Multilingual_Plane\" rel=\"nofollow noreferrer\">Basic Multilingual Plane</a>, so can treat UTF-16 as a fixed-length encoding.  </p>\n\n<p>So you avoid all the complexity of variable-length encodings like UTF-8.</p>\n"},{"tags":[],"owner":{"account_id":86959,"reputation":71656,"user_id":241462,"accept_rate":71,"display_name":"Dean Harding"},"down_vote_count":1,"up_vote_count":38,"is_accepted":true,"score":37,"last_activity_date":1275133288,"creation_date":1275133288,"answer_id":2934852,"question_id":2934809,"body_markdown":"East Asian languages typically require less storage in UTF-16 (2 bytes is enough for 99% of East-Asian language characters) than UTF-8 (typically 3 bytes is required).\r\n\r\nOf course, for Western lanagues, UTF-8 is usually smaller (1 byte instead of 2). For mixed files like HTML (where there&#39;s a lot of markup) it&#39;s much of a muchness.\r\n\r\nProcessing of UTF-16 for user-mode applications is *slightly* easier than processing UTF-8, because surrogate pairs behave in almost the same way that combining characters behave. So UTF-16 can usually be processed as a fixed-size encoding.","title":"Is there any reason to prefer UTF-16 over UTF-8?","body":"<p>East Asian languages typically require less storage in UTF-16 (2 bytes is enough for 99% of East-Asian language characters) than UTF-8 (typically 3 bytes is required).</p>\n\n<p>Of course, for Western lanagues, UTF-8 is usually smaller (1 byte instead of 2). For mixed files like HTML (where there's a lot of markup) it's much of a muchness.</p>\n\n<p>Processing of UTF-16 for user-mode applications is <em>slightly</em> easier than processing UTF-8, because surrogate pairs behave in almost the same way that combining characters behave. So UTF-16 can usually be processed as a fixed-size encoding.</p>\n"},{"tags":[],"owner":{"account_id":142253,"reputation":5880,"user_id":349836,"accept_rate":88,"display_name":"corvuscorax"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1275133461,"creation_date":1275133461,"answer_id":2934860,"question_id":2934809,"body_markdown":"It depends on the expected character sets. If you expect heavy use of Unicode code points outside of the 7-bit ASCII range then you might find that UTF-16 will be more compact than UTF-8, since some UTF-8 sequences are more than two bytes long.\r\n\r\nAlso, for efficiency reasons, Java and C# does not take surrogate pairs into account when indexing strings. This would break down completely when using code points that are represented with UTF-8 sequences that take up an odd number of bytes.\r\n\r\n","title":"Is there any reason to prefer UTF-16 over UTF-8?","body":"<p>It depends on the expected character sets. If you expect heavy use of Unicode code points outside of the 7-bit ASCII range then you might find that UTF-16 will be more compact than UTF-8, since some UTF-8 sequences are more than two bytes long.</p>\n\n<p>Also, for efficiency reasons, Java and C# does not take surrogate pairs into account when indexing strings. This would break down completely when using code points that are represented with UTF-8 sequences that take up an odd number of bytes.</p>\n"},{"tags":[],"owner":{"account_id":55286,"reputation":26974,"user_id":165500,"accept_rate":89,"display_name":"Andrew Russell"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1275211266,"creation_date":1275134238,"answer_id":2934910,"question_id":2934809,"body_markdown":"I imagine C# using UTF-16 derives from the Windows NT family of operating systems using UTF-16 internally.\r\n\r\nI imagine there are two main reasons why Windows NT uses UTF-16 internally:\r\n\r\n - For memory usage: UTF-32 wastes a\r\n   *lot* of space to encode.\r\n - For performance: UTF-8 is much harder to\r\n   decode than UTF-16. In UTF-16 characters are either\r\n   a Basic Multilingual Plane character (2 bytes) or a Surrogate\r\n   Pair (4 bytes). UTF-8 characters\r\n   can be anywhere between 1 and 4\r\n   bytes.\r\n\r\nContrary to what other people have answered - you cannot treat UTF-16 as [UCS-2][1]. If you want to correctly iterate over actual characters in a string, you have to use unicode-friendly iteration functions. For example in C# you need to use `StringInfo.GetTextElementEnumerator()`.\r\n\r\nFor further information, this page on the wiki is worth reading: http://en.wikipedia.org/wiki/Comparison_of_Unicode_encodings\r\n\r\n  [1]: http://en.wikipedia.org/wiki/UTF-16/UCS-2","title":"Is there any reason to prefer UTF-16 over UTF-8?","body":"<p>I imagine C# using UTF-16 derives from the Windows NT family of operating systems using UTF-16 internally.</p>\n\n<p>I imagine there are two main reasons why Windows NT uses UTF-16 internally:</p>\n\n<ul>\n<li>For memory usage: UTF-32 wastes a\n<em>lot</em> of space to encode.</li>\n<li>For performance: UTF-8 is much harder to\ndecode than UTF-16. In UTF-16 characters are either\na Basic Multilingual Plane character (2 bytes) or a Surrogate\nPair (4 bytes). UTF-8 characters\ncan be anywhere between 1 and 4\nbytes.</li>\n</ul>\n\n<p>Contrary to what other people have answered - you cannot treat UTF-16 as <a href=\"http://en.wikipedia.org/wiki/UTF-16/UCS-2\" rel=\"noreferrer\">UCS-2</a>. If you want to correctly iterate over actual characters in a string, you have to use unicode-friendly iteration functions. For example in C# you need to use <code>StringInfo.GetTextElementEnumerator()</code>.</p>\n\n<p>For further information, this page on the wiki is worth reading: <a href=\"http://en.wikipedia.org/wiki/Comparison_of_Unicode_encodings\" rel=\"noreferrer\">http://en.wikipedia.org/wiki/Comparison_of_Unicode_encodings</a></p>\n"},{"tags":[],"owner":{"account_id":17132,"reputation":7519,"user_id":38031,"accept_rate":78,"display_name":"richj"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1275134248,"creation_date":1275134248,"answer_id":2934911,"question_id":2934809,"body_markdown":"UTF-16 can be more efficient for representing characters in some languages such as Chinese, Japanese and Korean where __most__ characters can be represented in one 16 bit word. Some rarely used characters may require two 16 bit words. UTF-8 is generally much more efficient for representing characters from Western European character sets - UTF-8 and ASCII are equivalent over the ASCII range (0-127) - but less efficient with Asian languages, requiring three or four bytes to represent characters that can be represented with two bytes in UTF-16.\r\n\r\nUTF-16 has an advantage as an in-memory format for Java/C# in that every character in the Basic Multilingual Plane can be represented in 16 bits (see Joe&#39;s answer) and some of the disadvantages of UTF-16 (e.g. confusing code relying on \\0 terminators) are less relevant.","title":"Is there any reason to prefer UTF-16 over UTF-8?","body":"<p>UTF-16 can be more efficient for representing characters in some languages such as Chinese, Japanese and Korean where <strong>most</strong> characters can be represented in one 16 bit word. Some rarely used characters may require two 16 bit words. UTF-8 is generally much more efficient for representing characters from Western European character sets - UTF-8 and ASCII are equivalent over the ASCII range (0-127) - but less efficient with Asian languages, requiring three or four bytes to represent characters that can be represented with two bytes in UTF-16.</p>\n\n<p>UTF-16 has an advantage as an in-memory format for Java/C# in that every character in the Basic Multilingual Plane can be represented in 16 bits (see Joe's answer) and some of the disadvantages of UTF-16 (e.g. confusing code relying on \\0 terminators) are less relevant.</p>\n"},{"tags":[],"owner":{"account_id":131131,"reputation":4248,"user_id":330913,"accept_rate":87,"display_name":"NoozNooz42"},"down_vote_count":2,"up_vote_count":12,"is_accepted":false,"score":10,"last_activity_date":1275137866,"creation_date":1275137866,"answer_id":2935131,"question_id":2934809,"body_markdown":"@Oak: this too long for a comment...\r\n\r\nI don&#39;t know about C# (and would be really surprised: it would mean they just copied Java *too* much) but for Java it&#39;s simple: Java was conceived before Unicode 3.1 came out.\r\n\r\nHence there were less than 65537 codepoints, hence every Unicode codepoint was still fitting on 16-bit and so the Java *char* was born.\r\n\r\nOf course this led to crazy issues that are still affecting Java programmers (like me) today, where you have a method *charAt* which in some case does return neither a Unicode character nor a Unicode codepoint and a method (added in Java 5) *codePointAt* which takes an argument which is not the number of codepoints you want you want to skip! (you have to supply to *codePointAt* the number of Java *char* you want to skip, which makes it one of the least understood method in the String class).\r\n\r\nSo, yup, this is definitely wild and confusing most Java programmers (most aren&#39;t even aware of these issues) and, yup, it is for historical reason.  At least, that was the excuse that came up with when people got mad after this issue: *but it&#39;s because Unicode 3.1 wasn&#39;t out yet*.\r\n\r\n:)\r\n\r\n","title":"Is there any reason to prefer UTF-16 over UTF-8?","body":"<p>@Oak: this too long for a comment...</p>\n\n<p>I don't know about C# (and would be really surprised: it would mean they just copied Java <em>too</em> much) but for Java it's simple: Java was conceived before Unicode 3.1 came out.</p>\n\n<p>Hence there were less than 65537 codepoints, hence every Unicode codepoint was still fitting on 16-bit and so the Java <em>char</em> was born.</p>\n\n<p>Of course this led to crazy issues that are still affecting Java programmers (like me) today, where you have a method <em>charAt</em> which in some case does return neither a Unicode character nor a Unicode codepoint and a method (added in Java 5) <em>codePointAt</em> which takes an argument which is not the number of codepoints you want you want to skip! (you have to supply to <em>codePointAt</em> the number of Java <em>char</em> you want to skip, which makes it one of the least understood method in the String class).</p>\n\n<p>So, yup, this is definitely wild and confusing most Java programmers (most aren't even aware of these issues) and, yup, it is for historical reason.  At least, that was the excuse that came up with when people got mad after this issue: <em>but it's because Unicode 3.1 wasn't out yet</em>.</p>\n\n<p>:)</p>\n"},{"tags":[],"owner":{"account_id":2882067,"reputation":132,"user_id":2472717,"display_name":"Aaron Muir Hamilton"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1589992187,"creation_date":1589990308,"answer_id":61917545,"question_id":2934809,"body_markdown":"If we&#39;re talking about plain text alone, UTF-16 can be more compact in some languages, Japanese (about 20%) and Chinese (about 40%) being prime examples. As soon as you&#39;re comparing HTML documents, the advantage goes completely the other way, since UTF-16 is going to waste a byte for every ASCII character.\r\n\r\nAs for simplicity or efficiency: if you implement Unicode correctly in an editor application, complexity will be similar because UTF-16 does not always encode codepoints as a single number anyway, and single codepoints are generally not the right way to segment text.\r\n\r\nGiven that in the most common applications, UTF-16 is less compact, and equally complex to implement, the singular reason to prefer UTF-16 over UTF-8 is if you have a completely closed ecosystem where you are regularly storing or transporting plain text entirely in complex writing systems, without compression.\r\n\r\nAfter compression with zstd or LZMA2, even for 100% Chinese plain text, the advantage is completely wiped out; with gzip the UTF-16 advantage is about 4% on Chinese text with around 3000 unique graphemes.","title":"Is there any reason to prefer UTF-16 over UTF-8?","body":"<p>If we're talking about plain text alone, UTF-16 can be more compact in some languages, Japanese (about 20%) and Chinese (about 40%) being prime examples. As soon as you're comparing HTML documents, the advantage goes completely the other way, since UTF-16 is going to waste a byte for every ASCII character.</p>\n\n<p>As for simplicity or efficiency: if you implement Unicode correctly in an editor application, complexity will be similar because UTF-16 does not always encode codepoints as a single number anyway, and single codepoints are generally not the right way to segment text.</p>\n\n<p>Given that in the most common applications, UTF-16 is less compact, and equally complex to implement, the singular reason to prefer UTF-16 over UTF-8 is if you have a completely closed ecosystem where you are regularly storing or transporting plain text entirely in complex writing systems, without compression.</p>\n\n<p>After compression with zstd or LZMA2, even for 100% Chinese plain text, the advantage is completely wiped out; with gzip the UTF-16 advantage is about 4% on Chinese text with around 3000 unique graphemes.</p>\n"},{"tags":[],"owner":{"account_id":6523765,"reputation":9872,"user_id":5083516,"display_name":"plugwash"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1702070197,"creation_date":1702070197,"answer_id":77629215,"question_id":2934809,"body_markdown":"&gt; Anyone knows why these languages chose UTF-16? \r\n\r\nShort answer:\r\n\r\nBecause Sun and Microsoft were early adopters of Unicode.\r\n\r\nLong answer:\r\n\r\nSometime in the late 1980s, people started to realise that a Universal Character set was desirable but what bit width to use was a matter of controversy. In 1989 ISO proposed a draft of ISO 10646 which offered multiple encoding modes, one mode would use 32-bits per character and be able to encode everything without any mode switching. Another would use 16 bits per character but have an escape system for switching. Yet another would use a byte based encoding that had a number of design flaws.\r\n\r\nA number of major software vendors did not like ISO 10646, seeing it as too complicated. They backed an alternative scheme called Unicode. Unicode 1.0, a fixed width 16 bit encoding was published in October 1991. The software vendors were able to convince the national standards bodies to vote down the ISO 10646 draft and ISO were pushed into Unification with Unicode.\r\n\r\nSo that was where we were in the early 1990s, a number of major software vendors had collaborated to design a new fixed width encoding and were adopting it in their Flagship products, including Windows NT and Java. \r\n\r\nMeanwhile, X/Open were looking for a better way to encode Unicode in extended Ascii contexts. UTF-1 sucked for several reasons, it was slow to process because it required calculations modulo a number that was not a power of 2, it was not  self-synchronizing and shorter sequences could appear as sub-sequences of longer ones. These efforts resulted in what we now know as UTF-8 but they happened away from the main line of Unicode development. UTF-8 was developed in 1992 and presented in 1993 at a Usenix conference but it does not seem to have been considered a proper standard until 1996.\r\n\r\nThis is the Environment in which Windows NT (released July 1993) and Java (released January 1996) were designed and released. Unicode was a simple fixed width encoding and hence the obvious choice for an internal processing format. Java did adopt a modified form of UTF-8 but only as a storage format.\r\n\r\nThere was pressure to encode more characters and in July 1996 Unicode 2.0 was introduced. The code space was expanded to just over 20 bits and Unicode was no longer a fixed-width 16 bit encoding. Instead there was a choice of a fixed-width 32-bit encoding or variable width encodings with 8 and 16 bit units.\r\n\r\nNo-one wanted to take the space hit of 32-bit code units or the compatibility hit of changing their encoding unit size for the *second* time, so the systems that had been designed around the original 16 bit Unicode generally ended up using UTF-16. Sure there was some risk that text processing could miscount or mangle the new characters but meh, it was still the lesser evil.\r\n\r\nThe .net framework, and with it C# were introduced somewhat later in 2002, but by this time Microsoft was already deeply committed to 16 bit code units. Their operating system APIs used them. Their file systems used them. Their executable formats used them.\r\n\r\nUnix and the Internet on the other hand, stayed largely byte-based all the way through. UTF-8 was treated as just another encoding, gradually replacing the previous legacy encodings.\r\n\r\n","title":"Is there any reason to prefer UTF-16 over UTF-8?","body":"<blockquote>\n<p>Anyone knows why these languages chose UTF-16?</p>\n</blockquote>\n<p>Short answer:</p>\n<p>Because Sun and Microsoft were early adopters of Unicode.</p>\n<p>Long answer:</p>\n<p>Sometime in the late 1980s, people started to realise that a Universal Character set was desirable but what bit width to use was a matter of controversy. In 1989 ISO proposed a draft of ISO 10646 which offered multiple encoding modes, one mode would use 32-bits per character and be able to encode everything without any mode switching. Another would use 16 bits per character but have an escape system for switching. Yet another would use a byte based encoding that had a number of design flaws.</p>\n<p>A number of major software vendors did not like ISO 10646, seeing it as too complicated. They backed an alternative scheme called Unicode. Unicode 1.0, a fixed width 16 bit encoding was published in October 1991. The software vendors were able to convince the national standards bodies to vote down the ISO 10646 draft and ISO were pushed into Unification with Unicode.</p>\n<p>So that was where we were in the early 1990s, a number of major software vendors had collaborated to design a new fixed width encoding and were adopting it in their Flagship products, including Windows NT and Java.</p>\n<p>Meanwhile, X/Open were looking for a better way to encode Unicode in extended Ascii contexts. UTF-1 sucked for several reasons, it was slow to process because it required calculations modulo a number that was not a power of 2, it was not  self-synchronizing and shorter sequences could appear as sub-sequences of longer ones. These efforts resulted in what we now know as UTF-8 but they happened away from the main line of Unicode development. UTF-8 was developed in 1992 and presented in 1993 at a Usenix conference but it does not seem to have been considered a proper standard until 1996.</p>\n<p>This is the Environment in which Windows NT (released July 1993) and Java (released January 1996) were designed and released. Unicode was a simple fixed width encoding and hence the obvious choice for an internal processing format. Java did adopt a modified form of UTF-8 but only as a storage format.</p>\n<p>There was pressure to encode more characters and in July 1996 Unicode 2.0 was introduced. The code space was expanded to just over 20 bits and Unicode was no longer a fixed-width 16 bit encoding. Instead there was a choice of a fixed-width 32-bit encoding or variable width encodings with 8 and 16 bit units.</p>\n<p>No-one wanted to take the space hit of 32-bit code units or the compatibility hit of changing their encoding unit size for the <em>second</em> time, so the systems that had been designed around the original 16 bit Unicode generally ended up using UTF-16. Sure there was some risk that text processing could miscount or mangle the new characters but meh, it was still the lesser evil.</p>\n<p>The .net framework, and with it C# were introduced somewhat later in 2002, but by this time Microsoft was already deeply committed to 16 bit code units. Their operating system APIs used them. Their file systems used them. Their executable formats used them.</p>\n<p>Unix and the Internet on the other hand, stayed largely byte-based all the way through. UTF-8 was treated as just another encoding, gradually replacing the previous legacy encodings.</p>\n"}],"owner":{"account_id":87565,"reputation":26371,"user_id":242762,"accept_rate":87,"display_name":"Oak"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7813,"favorite_count":0,"down_vote_count":0,"up_vote_count":30,"accepted_answer_id":2934852,"answer_count":8,"score":30,"last_activity_date":1702070197,"creation_date":1275132452,"question_id":2934809,"body_markdown":"Examining the attributes of UTF-16 and UTF-8, I can&#39;t find any reason to prefer UTF-16.\r\n\r\nHowever, checking out Java and C#, it looks like strings and chars there default to UTF-16. I was thinking that it might be for historic reasons, or perhaps for performance reasons, but couldn&#39;t find any information.\r\n\r\nAnyone knows why these languages chose UTF-16? And is there any valid reason for me to do that as well?\r\n\r\n**EDIT:** Meanwhile I&#39;ve also found [this answer][1], which seems relevant and has some interesting links.\r\n\r\n[1]:https://stackoverflow.com/questions/1049947/should-utf-16-be-considered-harmful/1176384#1176384","title":"Is there any reason to prefer UTF-16 over UTF-8?","body":"<p>Examining the attributes of UTF-16 and UTF-8, I can't find any reason to prefer UTF-16.</p>\n\n<p>However, checking out Java and C#, it looks like strings and chars there default to UTF-16. I was thinking that it might be for historic reasons, or perhaps for performance reasons, but couldn't find any information.</p>\n\n<p>Anyone knows why these languages chose UTF-16? And is there any valid reason for me to do that as well?</p>\n\n<p><strong>EDIT:</strong> Meanwhile I've also found <a href=\"https://stackoverflow.com/questions/1049947/should-utf-16-be-considered-harmful/1176384#1176384\">this answer</a>, which seems relevant and has some interesting links.</p>\n"},{"tags":["java","compatibility","jakarta-migration"],"comments":[{"owner":{"account_id":15064163,"reputation":13519,"user_id":10871900,"display_name":"dan1st is crying"},"score":1,"creation_date":1700764273,"post_id":77539033,"comment_id":136697121,"body_markdown":"[This is a canonical](https://meta.stackoverflow.com/q/427206/10871900)","body":"<a href=\"https://meta.stackoverflow.com/q/427206/10871900\">This is a canonical</a>"}],"answers":[{"tags":[],"owner":{"account_id":15064163,"reputation":13519,"user_id":10871900,"display_name":"dan1st is crying"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1701878631,"creation_date":1700764264,"answer_id":77539034,"question_id":77539033,"body_markdown":"## Don&#39;t mix Java EE and Jakarta EE dependencies\r\n\r\nYou cannot use Java EE and Jakarta EE together. You have to use one or the other.  \r\nIf a project is using Java EE, there should not be any Jakarta EE dependencies in the project.\r\n\r\nHere are a few examples of Java EE/Jakarta dependencies (in `group.id:artifact-id` notation):\r\n\r\n|Java EE dependency|Jakarta EE dependency|\r\n|---|---|\r\n|`javax.servlet:javax.servlet-api`|`jakarta.servlet:jakarta.servlet-api`|\r\n|`javax.persistence:javax.persistence-api`|`jakarta.persistence:jakarta.persistence-api`|\r\n|`javax.xml.bind:jaxb-api`|`jakarta.xml.bind:jakarta.xml.bind-api`|\r\n|`javax.validation:validation-api`|`jakarta.validation:jakarta.validation-api`|\r\n|`javax.mail:javax.mail-api`|`jakarta.mail:jakarta.mail-api`|\r\n\r\nYou should not have both `javax` and `jakarta` dependencies in the same project.\r\n\r\nYou can use `mvn dependency:list` (with Maven) or `gradlew dependencies` (with Gradle) for checking your dependencies.\r\n\r\n### Other/transitive dependencies\r\nYour project might use dependencies that are written for Java EE or Jakarta EE.  \r\nYou need to make sure that you are using a version of these dependencies that matches the specification you are using.\r\n\r\nThis table provides examples of dependencies that use Java EE in some versions and Jakarta EE in other versions:\r\n\r\n|Dependency|versions supporting Java EE|versions supporting Jakarta EE|\r\n|---|---|---|\r\n|Spring Boot|&lt;= 2.x|&gt;= 3.x|\r\n|Spring|&lt;= 5.x|&gt;= 6.x|\r\n|Hibernate|&lt;= 5.x|&gt;= 6.x|\r\n\r\n## The package name\r\nWith the change of the name `Java EE` to `Jakarta EE`, all Java EE types were moved from the `javax` package to `jakarta` (e.g. `javax.servlet` was changed to `jakarta.servlet`).\r\n\r\nIf the project is using Java EE, it should not contain any `jakarta.*` imports and if it is using Jakarta EE, it should not use any Java EE classes from `javax.*`.\r\n\r\nThere are tools for changing all imports and other type references in a project.\r\n\r\n### configuration files\r\n\r\nSome configuration files (e.g. `persistence.xml`) might be different depending on whether Java EE or Jakarta is used.\r\n\r\nIf configuration file references something starting with `javax`, this typically belongs to Java EE while references starting with `jakarta` typically belong in Jakarta EE projects.\r\n\r\nHere is an example `persistence.xml` file for both Java EE and Jakarta EE:\r\n```xml\r\n&lt;!-- This is for Java EE --&gt;\r\n&lt;persistence xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd&quot;\r\n\tversion=&quot;2.0&quot; xmlns=&quot;http://java.sun.com/xml/ns/persistence&quot;&gt;\r\n\r\n    &lt;persistence-unit name=&quot;MyPersistenceUnit&quot; transaction-type=&quot;JTA&quot;&gt;\r\n        &lt;properties&gt;\r\n            &lt;property name=&quot;javax.persistence.jdbc.url&quot; value=&quot;jdbc:my-database-url&quot; /&gt;\r\n        &lt;/properties&gt;\r\n    &lt;/persistence-unit&gt;\r\n&lt;/persistence&gt;\r\n```\r\n```xml\r\n&lt;!-- This is for Jakarta EE --&gt;\r\n&lt;persistence xmlns=&quot;https://jakarta.ee/xml/ns/persistence&quot;\r\n             xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n             xsi:schemaLocation=&quot;https://jakarta.ee/xml/ns/persistence https://jakarta.ee/xml/ns/persistence/persistence_3_0.xsd&quot;\r\n             version=&quot;3.0&quot;&gt;\r\n    &lt;persistence-unit name=&quot;MyPersistenceUnit&quot; transaction-type=&quot;JTA&quot;&gt;\r\n        &lt;properties&gt;\r\n            &lt;property name=&quot;jakarta.persistence.jdbc.url&quot; value=&quot;jdbc:my-database-url&quot; /&gt;\r\n        &lt;/properties&gt;\r\n    &lt;/persistence-unit&gt;\r\n&lt;/persistence&gt;\r\n```\r\n\r\nOther configuration files might require similar changes.\r\n\r\n## Application servers/Containers\r\n\r\nJava EE projects should be deployed to an application server/web container supporting Java EE and Jakarta EE projects should be deployed to an application server/web container supporting Jakarta EE.\r\n\r\nFor example:\r\n\r\n - [Tomcat &lt;=9 uses Java EE while Tomcat &gt;=10 uses Jakarta EE](https://tomcat.apache.org/whichversion.html)\r\n - [Jetty 9 &amp; 10 uses Java EE while Jetty 11 uses Jakarta EE][1] —&#160;and [Jetty 12 supports both][2] Java EE *and* Jakarta EE. \r\n\r\n## Possible issues caused by incompatibilities\r\n\r\nIf a project references classes that are not available, `ClassNotFoundException`s/`NoClassDefFoundError`s can occur.\r\n\r\nIt is possible that some elements like servlets are not found by the container due to e.g. the container scanning for `javax.servlet.annotation.WebServlet` but the servlet being annotated with `jakarta.servlet.annotation.WebServlet`.\r\n\r\nThe application might not correctly pick up some configurations.\r\n\r\nOf course, there can be many other issues depending on what exactly is done wrong.\r\n\r\n## Migration tooling\r\n\r\nThere are tools that help migrate from Java EE to Jakarta EE.\r\n\r\nFor example, [Eclipse Transformer](https://github.com/eclipse/transformer) can do most of the migration steps and can perform the namespace change in both source code and existing JAR/WAR files (e.g. libraries). It is also available as a Maven plugin.\r\n\r\nAlternatively, IntelliJ Ultimate allows [migrating the source code of existing projects from Java EE to Jakarta EE](https://www.jetbrains.com/guide/java/tutorials/migrating-javax-jakarta/use-migration-tool/). Similarly, [Spring Tools](https://github.com/spring-projects/sts4/) allows to do the same for Spring projects.\r\n\r\n  [1]: https://eclipse.dev/jetty/\r\n  [2]: https://webtide.com/introducing-jetty-12/","title":"How to avoid compatibility issues between Java EE and Jakarta EE?","body":"<h2>Don't mix Java EE and Jakarta EE dependencies</h2>\n<p>You cannot use Java EE and Jakarta EE together. You have to use one or the other.<br />\nIf a project is using Java EE, there should not be any Jakarta EE dependencies in the project.</p>\n<p>Here are a few examples of Java EE/Jakarta dependencies (in <code>group.id:artifact-id</code> notation):</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th>Java EE dependency</th>\n<th>Jakarta EE dependency</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>javax.servlet:javax.servlet-api</code></td>\n<td><code>jakarta.servlet:jakarta.servlet-api</code></td>\n</tr>\n<tr>\n<td><code>javax.persistence:javax.persistence-api</code></td>\n<td><code>jakarta.persistence:jakarta.persistence-api</code></td>\n</tr>\n<tr>\n<td><code>javax.xml.bind:jaxb-api</code></td>\n<td><code>jakarta.xml.bind:jakarta.xml.bind-api</code></td>\n</tr>\n<tr>\n<td><code>javax.validation:validation-api</code></td>\n<td><code>jakarta.validation:jakarta.validation-api</code></td>\n</tr>\n<tr>\n<td><code>javax.mail:javax.mail-api</code></td>\n<td><code>jakarta.mail:jakarta.mail-api</code></td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>You should not have both <code>javax</code> and <code>jakarta</code> dependencies in the same project.</p>\n<p>You can use <code>mvn dependency:list</code> (with Maven) or <code>gradlew dependencies</code> (with Gradle) for checking your dependencies.</p>\n<h3>Other/transitive dependencies</h3>\n<p>Your project might use dependencies that are written for Java EE or Jakarta EE.<br />\nYou need to make sure that you are using a version of these dependencies that matches the specification you are using.</p>\n<p>This table provides examples of dependencies that use Java EE in some versions and Jakarta EE in other versions:</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th>Dependency</th>\n<th>versions supporting Java EE</th>\n<th>versions supporting Jakarta EE</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Spring Boot</td>\n<td>&lt;= 2.x</td>\n<td>&gt;= 3.x</td>\n</tr>\n<tr>\n<td>Spring</td>\n<td>&lt;= 5.x</td>\n<td>&gt;= 6.x</td>\n</tr>\n<tr>\n<td>Hibernate</td>\n<td>&lt;= 5.x</td>\n<td>&gt;= 6.x</td>\n</tr>\n</tbody>\n</table>\n</div><h2>The package name</h2>\n<p>With the change of the name <code>Java EE</code> to <code>Jakarta EE</code>, all Java EE types were moved from the <code>javax</code> package to <code>jakarta</code> (e.g. <code>javax.servlet</code> was changed to <code>jakarta.servlet</code>).</p>\n<p>If the project is using Java EE, it should not contain any <code>jakarta.*</code> imports and if it is using Jakarta EE, it should not use any Java EE classes from <code>javax.*</code>.</p>\n<p>There are tools for changing all imports and other type references in a project.</p>\n<h3>configuration files</h3>\n<p>Some configuration files (e.g. <code>persistence.xml</code>) might be different depending on whether Java EE or Jakarta is used.</p>\n<p>If configuration file references something starting with <code>javax</code>, this typically belongs to Java EE while references starting with <code>jakarta</code> typically belong in Jakarta EE projects.</p>\n<p>Here is an example <code>persistence.xml</code> file for both Java EE and Jakarta EE:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;!-- This is for Java EE --&gt;\n&lt;persistence xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd&quot;\n    version=&quot;2.0&quot; xmlns=&quot;http://java.sun.com/xml/ns/persistence&quot;&gt;\n\n    &lt;persistence-unit name=&quot;MyPersistenceUnit&quot; transaction-type=&quot;JTA&quot;&gt;\n        &lt;properties&gt;\n            &lt;property name=&quot;javax.persistence.jdbc.url&quot; value=&quot;jdbc:my-database-url&quot; /&gt;\n        &lt;/properties&gt;\n    &lt;/persistence-unit&gt;\n&lt;/persistence&gt;\n</code></pre>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;!-- This is for Jakarta EE --&gt;\n&lt;persistence xmlns=&quot;https://jakarta.ee/xml/ns/persistence&quot;\n             xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n             xsi:schemaLocation=&quot;https://jakarta.ee/xml/ns/persistence https://jakarta.ee/xml/ns/persistence/persistence_3_0.xsd&quot;\n             version=&quot;3.0&quot;&gt;\n    &lt;persistence-unit name=&quot;MyPersistenceUnit&quot; transaction-type=&quot;JTA&quot;&gt;\n        &lt;properties&gt;\n            &lt;property name=&quot;jakarta.persistence.jdbc.url&quot; value=&quot;jdbc:my-database-url&quot; /&gt;\n        &lt;/properties&gt;\n    &lt;/persistence-unit&gt;\n&lt;/persistence&gt;\n</code></pre>\n<p>Other configuration files might require similar changes.</p>\n<h2>Application servers/Containers</h2>\n<p>Java EE projects should be deployed to an application server/web container supporting Java EE and Jakarta EE projects should be deployed to an application server/web container supporting Jakarta EE.</p>\n<p>For example:</p>\n<ul>\n<li><a href=\"https://tomcat.apache.org/whichversion.html\" rel=\"nofollow noreferrer\">Tomcat &lt;=9 uses Java EE while Tomcat &gt;=10 uses Jakarta EE</a></li>\n<li><a href=\"https://eclipse.dev/jetty/\" rel=\"nofollow noreferrer\">Jetty 9 &amp; 10 uses Java EE while Jetty 11 uses Jakarta EE</a> — and <a href=\"https://webtide.com/introducing-jetty-12/\" rel=\"nofollow noreferrer\">Jetty 12 supports both</a> Java EE <em>and</em> Jakarta EE.</li>\n</ul>\n<h2>Possible issues caused by incompatibilities</h2>\n<p>If a project references classes that are not available, <code>ClassNotFoundException</code>s/<code>NoClassDefFoundError</code>s can occur.</p>\n<p>It is possible that some elements like servlets are not found by the container due to e.g. the container scanning for <code>javax.servlet.annotation.WebServlet</code> but the servlet being annotated with <code>jakarta.servlet.annotation.WebServlet</code>.</p>\n<p>The application might not correctly pick up some configurations.</p>\n<p>Of course, there can be many other issues depending on what exactly is done wrong.</p>\n<h2>Migration tooling</h2>\n<p>There are tools that help migrate from Java EE to Jakarta EE.</p>\n<p>For example, <a href=\"https://github.com/eclipse/transformer\" rel=\"nofollow noreferrer\">Eclipse Transformer</a> can do most of the migration steps and can perform the namespace change in both source code and existing JAR/WAR files (e.g. libraries). It is also available as a Maven plugin.</p>\n<p>Alternatively, IntelliJ Ultimate allows <a href=\"https://www.jetbrains.com/guide/java/tutorials/migrating-javax-jakarta/use-migration-tool/\" rel=\"nofollow noreferrer\">migrating the source code of existing projects from Java EE to Jakarta EE</a>. Similarly, <a href=\"https://github.com/spring-projects/sts4/\" rel=\"nofollow noreferrer\">Spring Tools</a> allows to do the same for Spring projects.</p>\n"}],"owner":{"account_id":15064163,"reputation":13519,"user_id":10871900,"display_name":"dan1st is crying"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":168,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":77539034,"answer_count":1,"score":2,"last_activity_date":1702069755,"creation_date":1700764264,"question_id":77539033,"body_markdown":"After Oracle donated Java EE to the Eclipse Foundation, it [was renamed to Jakarta EE](https://blogs.eclipse.org/post/wayne-beaton/renaming-java-ee-specifications-jakarta-ee).\r\n\r\nWith that, the `javax` namespace was changed to `jakarta`.\r\n\r\nWhat does one need to take care about in order to avoid compatibility issues due to the change from Java EE to Jakarta EE?","title":"How to avoid compatibility issues between Java EE and Jakarta EE?","body":"<p>After Oracle donated Java EE to the Eclipse Foundation, it <a href=\"https://blogs.eclipse.org/post/wayne-beaton/renaming-java-ee-specifications-jakarta-ee\" rel=\"nofollow noreferrer\">was renamed to Jakarta EE</a>.</p>\n<p>With that, the <code>javax</code> namespace was changed to <code>jakarta</code>.</p>\n<p>What does one need to take care about in order to avoid compatibility issues due to the change from Java EE to Jakarta EE?</p>\n"},{"tags":["java","keycloak","keycloak-services","keycloak-rest-api","keycloak-connect"],"owner":{"account_id":5486411,"reputation":29,"user_id":4361012,"display_name":"Leebeth Anacona"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":15,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":0,"score":-1,"last_activity_date":1702069387,"creation_date":1702069387,"question_id":77629156,"body_markdown":"I am using keycloak 22.0.5\r\n\r\nI want to create realms and users programmatically.\r\n\r\n\r\nwhen connecting with username and password. It works perfectly. I am able to create realms and users from Java but when I want to use the clientId and ClientSecret. I am receiving the exception jakarta.ws.rs.ProcessingException: \r\njakarta.ws.rs.NotFoundException: HTTP 404 Not Found\r\n\r\n\r\nconnecting with username and password:\r\n```\r\nKeycloak keycloak = KeycloakBuilder.builder()\r\n.serverUrl(&quot;http://localhost:8082/&quot;)\r\n.realm(&quot;master&quot;)\r\n.clientId(&quot;admin-cli&quot;)\r\n.username(&quot;user&quot;)\r\n.password(&quot;bitnami&quot;)\r\n.build();\r\n\r\n-\r\n-\r\n\r\nkeycloak.realms().create(realmRep);\r\n//Realm created\r\n```\r\n\r\n\r\nconnecting with clientId and clientSecret. I&#39;ve tried with all the commented server URL&#39;s.\r\n\r\n```\r\nKeycloak keycloak = KeycloakBuilder.builder()\t\t\t\t//.serverUrl(&quot;http://localhost:8082/realms/master/protocol/openid-connect/auth&quot;)\r\n//.serverUrl(&quot;http://localhost:8082/&quot;)\r\n//.serverUrl(&quot;http://localhost:8082/realms/master&quot;)\r\n.serverUrl(&quot;http://localhost:8082/auth&quot;)\r\n.realm(&quot;master&quot;)\r\n.grantType(OAuth2Constants.CLIENT_CREDENTIALS)\r\n.clientId(&quot;my-client&quot;)\r\n.clientSecret(&quot;47d23P4JQk8ZWuNELa3Osxxxxxxxxxxx&quot;)\r\n.build();\r\n\r\nkeycloak.realms().create(realmRep);\r\n//receiving the exception: jakarta.ws.rs.ProcessingException: \r\n//jakarta.ws.rs.NotFoundException: HTTP 404 Not Found\r\n```\r\n\r\n[![client configuration in keycloak](https://i.stack.imgur.com/a1ZRg.png)](https://i.stack.imgur.com/a1ZRg.png)\r\n\r\n\r\nFollowing the documentation:\r\nhttps://www.keycloak.org/docs-api/22.0.5/javadocs/org/keycloak/admin/client/KeycloakBuilder.html\r\n\r\nweird fact: they say to use .serverUrl(&quot;mykeycloakUrl/auth&quot;) when connecting with username and password and It doesn&#39;t work for me. It works withouth it as I mentioned above.\r\n\r\nThank you in advance for any comment you can offer!","title":"Connecting to Keycloak client programmatically is not working","body":"<p>I am using keycloak 22.0.5</p>\n<p>I want to create realms and users programmatically.</p>\n<p>when connecting with username and password. It works perfectly. I am able to create realms and users from Java but when I want to use the clientId and ClientSecret. I am receiving the exception jakarta.ws.rs.ProcessingException:\njakarta.ws.rs.NotFoundException: HTTP 404 Not Found</p>\n<p>connecting with username and password:</p>\n<pre><code>Keycloak keycloak = KeycloakBuilder.builder()\n.serverUrl(&quot;http://localhost:8082/&quot;)\n.realm(&quot;master&quot;)\n.clientId(&quot;admin-cli&quot;)\n.username(&quot;user&quot;)\n.password(&quot;bitnami&quot;)\n.build();\n\n-\n-\n\nkeycloak.realms().create(realmRep);\n//Realm created\n</code></pre>\n<p>connecting with clientId and clientSecret. I've tried with all the commented server URL's.</p>\n<pre><code>Keycloak keycloak = KeycloakBuilder.builder()               //.serverUrl(&quot;http://localhost:8082/realms/master/protocol/openid-connect/auth&quot;)\n//.serverUrl(&quot;http://localhost:8082/&quot;)\n//.serverUrl(&quot;http://localhost:8082/realms/master&quot;)\n.serverUrl(&quot;http://localhost:8082/auth&quot;)\n.realm(&quot;master&quot;)\n.grantType(OAuth2Constants.CLIENT_CREDENTIALS)\n.clientId(&quot;my-client&quot;)\n.clientSecret(&quot;47d23P4JQk8ZWuNELa3Osxxxxxxxxxxx&quot;)\n.build();\n\nkeycloak.realms().create(realmRep);\n//receiving the exception: jakarta.ws.rs.ProcessingException: \n//jakarta.ws.rs.NotFoundException: HTTP 404 Not Found\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/a1ZRg.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/a1ZRg.png\" alt=\"client configuration in keycloak\" /></a></p>\n<p>Following the documentation:\n<a href=\"https://www.keycloak.org/docs-api/22.0.5/javadocs/org/keycloak/admin/client/KeycloakBuilder.html\" rel=\"nofollow noreferrer\">https://www.keycloak.org/docs-api/22.0.5/javadocs/org/keycloak/admin/client/KeycloakBuilder.html</a></p>\n<p>weird fact: they say to use .serverUrl(&quot;mykeycloakUrl/auth&quot;) when connecting with username and password and It doesn't work for me. It works withouth it as I mentioned above.</p>\n<p>Thank you in advance for any comment you can offer!</p>\n"},{"tags":["java","user-interface","javafx"],"comments":[{"owner":{"account_id":462194,"reputation":5746,"user_id":864369,"accept_rate":100,"display_name":"Dan W"},"score":2,"creation_date":1702052019,"post_id":77627843,"comment_id":136854037,"body_markdown":"Have you stepped through with a debugger to see what&#39;s going on?","body":"Have you stepped through with a debugger to see what&#39;s going on?"},{"owner":{"account_id":2819940,"reputation":12538,"user_id":2423906,"accept_rate":100,"display_name":"SedJ601"},"score":0,"creation_date":1702052155,"post_id":77627843,"comment_id":136854055,"body_markdown":"Have a look at `btnSaveFile` [here](https://stackoverflow.com/a/44782375/2423906)","body":"Have a look at <code>btnSaveFile</code> <a href=\"https://stackoverflow.com/a/44782375/2423906\">here</a>"},{"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"score":0,"creation_date":1702059147,"post_id":77627843,"comment_id":136855120,"body_markdown":"Does your code ever reach the line with `writer.write(...` ?","body":"Does your code ever reach the line with <code>writer.write(...</code> ?"},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1702062945,"post_id":77627843,"comment_id":136855614,"body_markdown":"When I tried running this and pressing the save button, I got `Exception in thread &quot;JavaFX Application Thread&quot; java.lang.NullPointerException: Cannot invoke &quot;javafx.scene.control.TextArea.getText()&quot; because &quot;this.dayTextAreas[&lt;local6&gt;][&lt;local7&gt;]&quot; is null`.  Perhaps your saveCalendarAsText method needs to account for the fact that the first and last week of the month may not be a full week and may not have text areas for every day of the week?","body":"When I tried running this and pressing the save button, I got <code>Exception in thread &quot;JavaFX Application Thread&quot; java.lang.NullPointerException: Cannot invoke &quot;javafx.scene.control.TextArea.getText()&quot; because &quot;this.dayTextAreas[&lt;local6&gt;][&lt;local7&gt;]&quot; is null</code>.  Perhaps your saveCalendarAsText method needs to account for the fact that the first and last week of the month may not be a full week and may not have text areas for every day of the week?"},{"owner":{"account_id":2819940,"reputation":12538,"user_id":2423906,"accept_rate":100,"display_name":"SedJ601"},"score":0,"creation_date":1702065255,"post_id":77627843,"comment_id":136855937,"body_markdown":"I haven&#39;t looked deeply at your code, but I think `if (row == 0 &amp;&amp; col &lt; 2) {\n                   // Center the first two boxes\n                   continue;\n               }` is causing some of the in the array to be null. That&#39;s my guess.","body":"I haven&#39;t looked deeply at your code, but I think <code>if (row == 0 &amp;&amp; col &lt; 2) {                    &#47;&#47; Center the first two boxes                    continue;                }</code> is causing some of the in the array to be null. That&#39;s my guess."}],"answers":[{"tags":[],"owner":{"account_id":2819940,"reputation":12538,"user_id":2423906,"accept_rate":100,"display_name":"SedJ601"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1702069036,"creation_date":1702069036,"answer_id":77629132,"question_id":77627843,"body_markdown":"I think your issue is caused by \r\n\r\n```\r\nif (row == 1 &amp;&amp; col &lt; 2) {\r\n    // Center the first two boxes\r\n    continue;\r\n}\r\n```\r\n\r\nI did not test it, so I could be wrong, but it looks like it will cause some index(s) to end up with null value(s). \r\n\r\nI would use a `List` over `Array` for this since a month can be less than 31 days. I did use an array in this example, but it is a 1D array.\r\n\r\nI also noticed that your `Zellercongruence` method could be incorrect. I did not attempt to use your version. I used the version from https://www.geeksforgeeks.org/zellers-congruence-find-day-date/. Your version returned a `String` of the day of the week. I also added another version that would return an `int` that maps to a day of the week.\r\n\r\nThe save method prints as the days would show up on the calendar.\r\n\r\n```\r\nimport javafx.application.Application;\r\nimport javafx.geometry.Pos;\r\nimport javafx.scene.Scene;\r\nimport javafx.scene.control.Button;\r\nimport javafx.scene.control.Label;\r\nimport javafx.scene.control.TextArea;\r\nimport javafx.scene.layout.*;\r\nimport javafx.stage.FileChooser;\r\nimport javafx.stage.Stage;\r\n\r\nimport java.io.BufferedWriter;\r\nimport java.io.File;\r\nimport java.io.FileWriter;\r\nimport java.io.IOException;\r\n\r\npublic class App extends Application {\r\n\r\n    int DAYS_IN_MONTH = 31;\r\n    \r\n    private final TextArea[] dayTextAreas = new TextArea[DAYS_IN_MONTH];\r\n\r\n    public static void main(String[] args) {\r\n        launch(args);\r\n    }\r\n\r\n    @Override\r\n    public void start(Stage mainStage) {\r\n        mainStage.setTitle(&quot;Calendar Saving App&quot;);\r\n        mainStage.setResizable(true);\r\n\r\n        BorderPane root = new BorderPane();\r\n        root.setStyle(&quot;-fx-font-size: 18;&quot;);\r\n\r\n        GridPane calendarGrid = createCalendarGrid();\r\n        VBox box = new VBox(calendarGrid);\r\n\r\n        Scene mainScene = new Scene(root);\r\n        mainStage.setScene(mainScene);\r\n\r\n        root.setCenter(box);\r\n\r\n        Button saveButton = new Button(&quot;Save as TXT&quot;);\r\n\r\n        box.getChildren().add(saveButton);\r\n        VBox.setVgrow(calendarGrid, Priority.ALWAYS);\r\n\r\n        saveButton.setOnAction((event) -&gt; saveCalendarAsText(mainStage));\r\n\r\n        mainStage.show();\r\n        mainStage.sizeToScene();\r\n    }\r\n\r\n    private GridPane createCalendarGrid() {\r\n        GridPane calendarGrid = new GridPane();\r\n        calendarGrid.setAlignment(Pos.CENTER);\r\n        calendarGrid.setHgap(5);\r\n        calendarGrid.setVgap(5);\r\n\r\n        // Add label for the month at the top center\r\n        Label monthLabel = new Label(&quot;December 2023&quot;);\r\n        monthLabel.setStyle(&quot;-fx-font-size: 36; -fx-font-weight: bold;&quot;);\r\n        calendarGrid.add(monthLabel, 3, 0, 4, 1); // Spanning 4 columns\r\n\r\n        int gridRow = 1; \r\n        for (int zeroDay = 0; zeroDay &lt; DAYS_IN_MONTH; zeroDay++) {\r\n            TextArea dayTextArea = new TextArea();\r\n            dayTextArea.setPrefRowCount(3);\r\n            dayTextArea.setPrefColumnCount(12);\r\n            dayTextArea.setEditable(true);  // Set to editable\r\n            dayTextArea.setWrapText(false); // Disable text wrapping\r\n            dayTextAreas[zeroDay] = dayTextArea;\r\n\r\n            String dayOfWeek = Zellercongruence(zeroDay + 1, 12, 2023);\r\n            String dayString = dayOfWeek + &quot; the &quot; + addOrdinalSuffix(zeroDay + 1);\r\n            dayTextArea.setText(dayString);\r\n\r\n\r\n\r\n            int zellerInt = ZellercongruenceAsInt(zeroDay + 1, 12, 2023);\r\n            int gridColumn = ConvertZellerDayToGridColumn(zellerInt);             \r\n            if(gridColumn == 0)\r\n            {\r\n                gridRow++;\r\n            }\r\n            calendarGrid.add(dayTextArea, gridColumn, gridRow);            \r\n        }\r\n\r\n        return calendarGrid;\r\n    }\r\n\r\n    // Print Day for a Date\r\n    static String Zellercongruence(int day, int month, int year)\r\n    {\r\n        if (month == 1)\r\n        {\r\n            month = 13;\r\n            year--;\r\n        }\r\n        if (month == 2)\r\n        {\r\n            month = 14;\r\n            year--;\r\n        }\r\n        int q = day;\r\n        int m = month;\r\n        int k = year % 100;\r\n        int j = year / 100;\r\n        int h = q + 13*(m + 1) / 5 + k + k / 4 + j / 4 + 5 * j;\r\n        h = h % 7;\r\n        switch (h)\r\n        {\r\n            case 0 : return &quot;Saturday&quot;;\r\n            case 1 : return &quot;Sunday&quot;; \r\n            case 2 : return &quot;Monday&quot;;\r\n            case 3 : return &quot;Tuesday&quot;;\r\n            case 4 : return &quot;Wednesday&quot;;\r\n            case 5 : return &quot;Thursday&quot;;\r\n            case 6 : return &quot;Friday&quot;;\r\n        }\r\n        \r\n        return &quot;error!&quot;;\r\n    }\r\n\r\n    static int ZellercongruenceAsInt(int day, int month, int year)\r\n    {\r\n        if (month == 1)\r\n        {\r\n            month = 13;\r\n            year--;\r\n        }\r\n        if (month == 2)\r\n        {\r\n            month = 14;\r\n            year--;\r\n        }\r\n        int q = day;\r\n        int m = month;\r\n        int k = year % 100;\r\n        int j = year / 100;\r\n        int h = q + 13*(m + 1) / 5 + k + k / 4 + j / 4 + 5 * j;\r\n        \r\n        return h % 7;        \r\n    }\r\n    \r\n    static int ConvertZellerDayToGridColumn(int ZellerDay)\r\n    {\r\n        int column = -1;\r\n        \r\n        switch(ZellerDay)\r\n        {\r\n            case 1:\r\n            case 2:\r\n            case 3:\r\n            case 4:\r\n            case 5:\r\n            case 6:\r\n                column = ZellerDay - 1;\r\n                break;\r\n            case 0:\r\n                column = 6;\r\n        }\r\n        \r\n        return column;\r\n    }\r\n    \r\n    private void saveCalendarAsText(Stage mainStage) {\r\n        FileChooser chooser = new FileChooser();\r\n        FileChooser.ExtensionFilter filter = new FileChooser.ExtensionFilter(&quot;Text files&quot;, &quot;*.txt&quot;);\r\n        chooser.getExtensionFilters().add(filter);\r\n\r\n        File file = chooser.showSaveDialog(mainStage);\r\n\r\n        if (file == null) {\r\n            return; // User canceled the file chooser\r\n        }\r\n\r\n        try (BufferedWriter writer = new BufferedWriter(new FileWriter(file))) {\r\n            // Iterate through all text areas and write data to the text file\r\n            for (int dayZero = 0; dayZero &lt; dayTextAreas.length; dayZero++) {                   \r\n                int zellerInt = ZellercongruenceAsInt(dayZero + 1, 12, 2023);\r\n                int gridColumn = ConvertZellerDayToGridColumn(zellerInt);             \r\n                if(gridColumn == 0)\r\n                {\r\n                    writer.newLine();\r\n                }\r\n                writer.write(dayTextAreas[dayZero].getText() + &quot;\\t&quot;);\r\n            }\r\n        } catch (IOException error) {\r\n            // TODO: Handle the exception and provide user feedback\r\n            error.printStackTrace();\r\n        }\r\n    }\r\n\r\n    private String addOrdinalSuffix(int dayNumber) {\r\n        if (dayNumber &gt;= 11 &amp;&amp; dayNumber &lt;= 13) {\r\n            return dayNumber + &quot;th&quot;;\r\n        } else {\r\n            switch (dayNumber % 10) {\r\n                case 1:\r\n                    return dayNumber + &quot;st&quot;;\r\n                case 2:\r\n                    return dayNumber + &quot;nd&quot;;\r\n                case 3:\r\n                    return dayNumber + &quot;rd&quot;;\r\n                default:\r\n                    return dayNumber + &quot;th&quot;;\r\n            }\r\n        }\r\n    }\r\n\r\n}\r\n```\r\n\r\n**Output 1**\r\n\r\n[![enter image description here][1]][1]\r\n\r\n**Output 2**\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Qdhk7.png\r\n  [2]: https://i.stack.imgur.com/OEnJB.png","title":"Saving text in a Calendar app to a .txt file","body":"<p>I think your issue is caused by</p>\n<pre><code>if (row == 1 &amp;&amp; col &lt; 2) {\n    // Center the first two boxes\n    continue;\n}\n</code></pre>\n<p>I did not test it, so I could be wrong, but it looks like it will cause some index(s) to end up with null value(s).</p>\n<p>I would use a <code>List</code> over <code>Array</code> for this since a month can be less than 31 days. I did use an array in this example, but it is a 1D array.</p>\n<p>I also noticed that your <code>Zellercongruence</code> method could be incorrect. I did not attempt to use your version. I used the version from <a href=\"https://www.geeksforgeeks.org/zellers-congruence-find-day-date/\" rel=\"nofollow noreferrer\">https://www.geeksforgeeks.org/zellers-congruence-find-day-date/</a>. Your version returned a <code>String</code> of the day of the week. I also added another version that would return an <code>int</code> that maps to a day of the week.</p>\n<p>The save method prints as the days would show up on the calendar.</p>\n<pre><code>import javafx.application.Application;\nimport javafx.geometry.Pos;\nimport javafx.scene.Scene;\nimport javafx.scene.control.Button;\nimport javafx.scene.control.Label;\nimport javafx.scene.control.TextArea;\nimport javafx.scene.layout.*;\nimport javafx.stage.FileChooser;\nimport javafx.stage.Stage;\n\nimport java.io.BufferedWriter;\nimport java.io.File;\nimport java.io.FileWriter;\nimport java.io.IOException;\n\npublic class App extends Application {\n\n    int DAYS_IN_MONTH = 31;\n    \n    private final TextArea[] dayTextAreas = new TextArea[DAYS_IN_MONTH];\n\n    public static void main(String[] args) {\n        launch(args);\n    }\n\n    @Override\n    public void start(Stage mainStage) {\n        mainStage.setTitle(&quot;Calendar Saving App&quot;);\n        mainStage.setResizable(true);\n\n        BorderPane root = new BorderPane();\n        root.setStyle(&quot;-fx-font-size: 18;&quot;);\n\n        GridPane calendarGrid = createCalendarGrid();\n        VBox box = new VBox(calendarGrid);\n\n        Scene mainScene = new Scene(root);\n        mainStage.setScene(mainScene);\n\n        root.setCenter(box);\n\n        Button saveButton = new Button(&quot;Save as TXT&quot;);\n\n        box.getChildren().add(saveButton);\n        VBox.setVgrow(calendarGrid, Priority.ALWAYS);\n\n        saveButton.setOnAction((event) -&gt; saveCalendarAsText(mainStage));\n\n        mainStage.show();\n        mainStage.sizeToScene();\n    }\n\n    private GridPane createCalendarGrid() {\n        GridPane calendarGrid = new GridPane();\n        calendarGrid.setAlignment(Pos.CENTER);\n        calendarGrid.setHgap(5);\n        calendarGrid.setVgap(5);\n\n        // Add label for the month at the top center\n        Label monthLabel = new Label(&quot;December 2023&quot;);\n        monthLabel.setStyle(&quot;-fx-font-size: 36; -fx-font-weight: bold;&quot;);\n        calendarGrid.add(monthLabel, 3, 0, 4, 1); // Spanning 4 columns\n\n        int gridRow = 1; \n        for (int zeroDay = 0; zeroDay &lt; DAYS_IN_MONTH; zeroDay++) {\n            TextArea dayTextArea = new TextArea();\n            dayTextArea.setPrefRowCount(3);\n            dayTextArea.setPrefColumnCount(12);\n            dayTextArea.setEditable(true);  // Set to editable\n            dayTextArea.setWrapText(false); // Disable text wrapping\n            dayTextAreas[zeroDay] = dayTextArea;\n\n            String dayOfWeek = Zellercongruence(zeroDay + 1, 12, 2023);\n            String dayString = dayOfWeek + &quot; the &quot; + addOrdinalSuffix(zeroDay + 1);\n            dayTextArea.setText(dayString);\n\n\n\n            int zellerInt = ZellercongruenceAsInt(zeroDay + 1, 12, 2023);\n            int gridColumn = ConvertZellerDayToGridColumn(zellerInt);             \n            if(gridColumn == 0)\n            {\n                gridRow++;\n            }\n            calendarGrid.add(dayTextArea, gridColumn, gridRow);            \n        }\n\n        return calendarGrid;\n    }\n\n    // Print Day for a Date\n    static String Zellercongruence(int day, int month, int year)\n    {\n        if (month == 1)\n        {\n            month = 13;\n            year--;\n        }\n        if (month == 2)\n        {\n            month = 14;\n            year--;\n        }\n        int q = day;\n        int m = month;\n        int k = year % 100;\n        int j = year / 100;\n        int h = q + 13*(m + 1) / 5 + k + k / 4 + j / 4 + 5 * j;\n        h = h % 7;\n        switch (h)\n        {\n            case 0 : return &quot;Saturday&quot;;\n            case 1 : return &quot;Sunday&quot;; \n            case 2 : return &quot;Monday&quot;;\n            case 3 : return &quot;Tuesday&quot;;\n            case 4 : return &quot;Wednesday&quot;;\n            case 5 : return &quot;Thursday&quot;;\n            case 6 : return &quot;Friday&quot;;\n        }\n        \n        return &quot;error!&quot;;\n    }\n\n    static int ZellercongruenceAsInt(int day, int month, int year)\n    {\n        if (month == 1)\n        {\n            month = 13;\n            year--;\n        }\n        if (month == 2)\n        {\n            month = 14;\n            year--;\n        }\n        int q = day;\n        int m = month;\n        int k = year % 100;\n        int j = year / 100;\n        int h = q + 13*(m + 1) / 5 + k + k / 4 + j / 4 + 5 * j;\n        \n        return h % 7;        \n    }\n    \n    static int ConvertZellerDayToGridColumn(int ZellerDay)\n    {\n        int column = -1;\n        \n        switch(ZellerDay)\n        {\n            case 1:\n            case 2:\n            case 3:\n            case 4:\n            case 5:\n            case 6:\n                column = ZellerDay - 1;\n                break;\n            case 0:\n                column = 6;\n        }\n        \n        return column;\n    }\n    \n    private void saveCalendarAsText(Stage mainStage) {\n        FileChooser chooser = new FileChooser();\n        FileChooser.ExtensionFilter filter = new FileChooser.ExtensionFilter(&quot;Text files&quot;, &quot;*.txt&quot;);\n        chooser.getExtensionFilters().add(filter);\n\n        File file = chooser.showSaveDialog(mainStage);\n\n        if (file == null) {\n            return; // User canceled the file chooser\n        }\n\n        try (BufferedWriter writer = new BufferedWriter(new FileWriter(file))) {\n            // Iterate through all text areas and write data to the text file\n            for (int dayZero = 0; dayZero &lt; dayTextAreas.length; dayZero++) {                   \n                int zellerInt = ZellercongruenceAsInt(dayZero + 1, 12, 2023);\n                int gridColumn = ConvertZellerDayToGridColumn(zellerInt);             \n                if(gridColumn == 0)\n                {\n                    writer.newLine();\n                }\n                writer.write(dayTextAreas[dayZero].getText() + &quot;\\t&quot;);\n            }\n        } catch (IOException error) {\n            // TODO: Handle the exception and provide user feedback\n            error.printStackTrace();\n        }\n    }\n\n    private String addOrdinalSuffix(int dayNumber) {\n        if (dayNumber &gt;= 11 &amp;&amp; dayNumber &lt;= 13) {\n            return dayNumber + &quot;th&quot;;\n        } else {\n            switch (dayNumber % 10) {\n                case 1:\n                    return dayNumber + &quot;st&quot;;\n                case 2:\n                    return dayNumber + &quot;nd&quot;;\n                case 3:\n                    return dayNumber + &quot;rd&quot;;\n                default:\n                    return dayNumber + &quot;th&quot;;\n            }\n        }\n    }\n\n}\n</code></pre>\n<p><strong>Output 1</strong></p>\n<p><a href=\"https://i.stack.imgur.com/Qdhk7.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Qdhk7.png\" alt=\"enter image description here\" /></a></p>\n<p><strong>Output 2</strong></p>\n<p><a href=\"https://i.stack.imgur.com/OEnJB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/OEnJB.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":26346862,"reputation":1,"user_id":20005085,"display_name":"nick_ort1z"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":2,"is_answered":true,"view_count":51,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1702069036,"creation_date":1702051547,"question_id":77627843,"body_markdown":"I&#39;m developing a Calendar app in Java FX that lets users input text into a variety of rows and columns, then lets them save the calendar data to a .txt file.\r\n\r\nHowever, whenever the .txt file is saved and generated, none of my text is being saved, and an empty .txt file is generated. My code is below if anyone can identify any issues or errors going on in the program. The specific method that saves the data to a .txt is `saveCalendarAsText`.\r\n\r\n    import javafx.application.Application;\r\n    import javafx.geometry.Pos;\r\n    import javafx.scene.Scene;\r\n    import javafx.scene.control.Button;\r\n    import javafx.scene.control.Label;\r\n    import javafx.scene.control.TextArea;\r\n    import javafx.scene.layout.*;\r\n    import javafx.stage.FileChooser;\r\n    import javafx.stage.Stage;\r\n\r\n    import java.io.BufferedWriter;\r\n    import java.io.File;\r\n    import java.io.FileWriter;\r\n    import java.io.IOException;\r\n\r\n    public class CalendarSavingApp extends Application {\r\n\r\n        private TextArea[][] dayTextAreas = new TextArea[5][7];\r\n    \r\n        public static void main(String[] args) {\r\n            launch(args);\r\n        }\r\n    \r\n        @Override\r\n        public void start(Stage mainStage) {\r\n            mainStage.setTitle(&quot;Calendar Saving App&quot;);\r\n            mainStage.setResizable(true);\r\n    \r\n            BorderPane root = new BorderPane();\r\n            root.setStyle(&quot;-fx-font-size: 18;&quot;);\r\n    \r\n            GridPane calendarGrid = createCalendarGrid();\r\n            VBox box = new VBox(calendarGrid);\r\n    \r\n            Scene mainScene = new Scene(root);\r\n            mainStage.setScene(mainScene);\r\n    \r\n            root.setCenter(box);\r\n    \r\n            Button saveButton = new Button(&quot;Save as TXT&quot;);\r\n    \r\n            box.getChildren().add(saveButton);\r\n            VBox.setVgrow(calendarGrid, Priority.ALWAYS);\r\n    \r\n            saveButton.setOnAction((event) -&gt; saveCalendarAsText(mainStage));\r\n    \r\n            mainStage.show();\r\n            mainStage.sizeToScene();\r\n        }\r\n    \r\n        private GridPane createCalendarGrid() {\r\n            GridPane calendarGrid = new GridPane();\r\n            calendarGrid.setAlignment(Pos.CENTER);\r\n            calendarGrid.setHgap(5);\r\n            calendarGrid.setVgap(5);\r\n    \r\n            // Add label for the month at the top center\r\n            Label monthLabel = new Label(&quot;December 2023&quot;);\r\n            monthLabel.setStyle(&quot;-fx-font-size: 36; -fx-font-weight: bold;&quot;);\r\n            calendarGrid.add(monthLabel, 3, 0, 4, 1); // Spanning 4 columns\r\n    \r\n            int dayNumber = 1;\r\n            for (int row = 1; row &lt; 6; row++) {\r\n                for (int col = 0; col &lt; 7; col++) {\r\n                    if (dayNumber &gt; 31) {\r\n                        // Break if we have reached more than 31 days\r\n                        break;\r\n                    }\r\n    \r\n                    if (row == 1 &amp;&amp; col &lt; 2) {\r\n                        // Center the first two boxes\r\n                        continue;\r\n                    }\r\n    \r\n                    TextArea dayTextArea = new TextArea();\r\n                    dayTextArea.setPrefRowCount(3);\r\n                    dayTextArea.setPrefColumnCount(12);\r\n                    dayTextArea.setEditable(true);  // Set to editable\r\n                    dayTextArea.setWrapText(false); // Disable text wrapping\r\n                    dayTextAreas[row - 1][col] = dayTextArea;\r\n    \r\n                    String dayOfWeek = calculateDayOfWeek(col + 1);\r\n                    String dayString = dayOfWeek + &quot; the &quot; + addOrdinalSuffix(dayNumber);\r\n                    dayTextArea.setText(dayString);\r\n    \r\n                    calendarGrid.add(dayTextArea, col, row);\r\n    \r\n                    dayNumber++;\r\n                }\r\n            }\r\n    \r\n            return calendarGrid;\r\n        }\r\n    \r\n        private String calculateDayOfWeek(int dayNumber) {\r\n            // Zeller&#39;s Congruence algorithm to calculate the day of the week\r\n            int h = (dayNumber + 2 * 12 + 3 * (12 + 1) / 5) % 7;\r\n            switch (h) {\r\n                case 0:\r\n                    return &quot;Saturday&quot;;\r\n                case 1:\r\n                    return &quot;Sunday&quot;;\r\n                case 2:\r\n                    return &quot;Monday&quot;;\r\n                case 3:\r\n                    return &quot;Tuesday&quot;;\r\n                case 4:\r\n                    return &quot;Wednesday&quot;;\r\n                case 5:\r\n                    return &quot;Thursday&quot;;\r\n                case 6:\r\n                    return &quot;Friday&quot;;\r\n                default:\r\n                    return &quot;&quot;;\r\n            }\r\n        }\r\n    \r\n        private void saveCalendarAsText(Stage mainStage) {\r\n            FileChooser chooser = new FileChooser();\r\n            FileChooser.ExtensionFilter filter = new FileChooser.ExtensionFilter(&quot;Text files&quot;, &quot;*.txt&quot;);\r\n            chooser.getExtensionFilters().add(filter);\r\n    \r\n            File file = chooser.showSaveDialog(mainStage);\r\n    \r\n            if (file == null) {\r\n                return; // User canceled the file chooser\r\n            }\r\n    \r\n            try (BufferedWriter writer = new BufferedWriter(new FileWriter(file))) {\r\n                // Iterate through all text areas and write data to the text file\r\n                for (int row = 0; row &lt; 5; row++) {\r\n                    for (int col = 0; col &lt; 7; col++) {\r\n                        String dayData = dayTextAreas[row][col].getText().trim();\r\n                        if (!dayData.isEmpty()) {\r\n                            writer.write(dayData + System.lineSeparator());\r\n                        }\r\n                    }\r\n                }\r\n            } catch (IOException error) {\r\n                // TODO: Handle the exception and provide user feedback\r\n                error.printStackTrace();\r\n            }\r\n        }\r\n    \r\n        private String addOrdinalSuffix(int dayNumber) {\r\n            if (dayNumber &gt;= 11 &amp;&amp; dayNumber &lt;= 13) {\r\n                return dayNumber + &quot;th&quot;;\r\n            } else {\r\n                switch (dayNumber % 10) {\r\n                    case 1:\r\n                        return dayNumber + &quot;st&quot;;\r\n                    case 2:\r\n                        return dayNumber + &quot;nd&quot;;\r\n                    case 3:\r\n                        return dayNumber + &quot;rd&quot;;\r\n                    default:\r\n                        return dayNumber + &quot;th&quot;;\r\n                }\r\n            }\r\n        }\r\n\r\n    }","title":"Saving text in a Calendar app to a .txt file","body":"<p>I'm developing a Calendar app in Java FX that lets users input text into a variety of rows and columns, then lets them save the calendar data to a .txt file.</p>\n<p>However, whenever the .txt file is saved and generated, none of my text is being saved, and an empty .txt file is generated. My code is below if anyone can identify any issues or errors going on in the program. The specific method that saves the data to a .txt is <code>saveCalendarAsText</code>.</p>\n<pre><code>import javafx.application.Application;\nimport javafx.geometry.Pos;\nimport javafx.scene.Scene;\nimport javafx.scene.control.Button;\nimport javafx.scene.control.Label;\nimport javafx.scene.control.TextArea;\nimport javafx.scene.layout.*;\nimport javafx.stage.FileChooser;\nimport javafx.stage.Stage;\n\nimport java.io.BufferedWriter;\nimport java.io.File;\nimport java.io.FileWriter;\nimport java.io.IOException;\n\npublic class CalendarSavingApp extends Application {\n\n    private TextArea[][] dayTextAreas = new TextArea[5][7];\n\n    public static void main(String[] args) {\n        launch(args);\n    }\n\n    @Override\n    public void start(Stage mainStage) {\n        mainStage.setTitle(&quot;Calendar Saving App&quot;);\n        mainStage.setResizable(true);\n\n        BorderPane root = new BorderPane();\n        root.setStyle(&quot;-fx-font-size: 18;&quot;);\n\n        GridPane calendarGrid = createCalendarGrid();\n        VBox box = new VBox(calendarGrid);\n\n        Scene mainScene = new Scene(root);\n        mainStage.setScene(mainScene);\n\n        root.setCenter(box);\n\n        Button saveButton = new Button(&quot;Save as TXT&quot;);\n\n        box.getChildren().add(saveButton);\n        VBox.setVgrow(calendarGrid, Priority.ALWAYS);\n\n        saveButton.setOnAction((event) -&gt; saveCalendarAsText(mainStage));\n\n        mainStage.show();\n        mainStage.sizeToScene();\n    }\n\n    private GridPane createCalendarGrid() {\n        GridPane calendarGrid = new GridPane();\n        calendarGrid.setAlignment(Pos.CENTER);\n        calendarGrid.setHgap(5);\n        calendarGrid.setVgap(5);\n\n        // Add label for the month at the top center\n        Label monthLabel = new Label(&quot;December 2023&quot;);\n        monthLabel.setStyle(&quot;-fx-font-size: 36; -fx-font-weight: bold;&quot;);\n        calendarGrid.add(monthLabel, 3, 0, 4, 1); // Spanning 4 columns\n\n        int dayNumber = 1;\n        for (int row = 1; row &lt; 6; row++) {\n            for (int col = 0; col &lt; 7; col++) {\n                if (dayNumber &gt; 31) {\n                    // Break if we have reached more than 31 days\n                    break;\n                }\n\n                if (row == 1 &amp;&amp; col &lt; 2) {\n                    // Center the first two boxes\n                    continue;\n                }\n\n                TextArea dayTextArea = new TextArea();\n                dayTextArea.setPrefRowCount(3);\n                dayTextArea.setPrefColumnCount(12);\n                dayTextArea.setEditable(true);  // Set to editable\n                dayTextArea.setWrapText(false); // Disable text wrapping\n                dayTextAreas[row - 1][col] = dayTextArea;\n\n                String dayOfWeek = calculateDayOfWeek(col + 1);\n                String dayString = dayOfWeek + &quot; the &quot; + addOrdinalSuffix(dayNumber);\n                dayTextArea.setText(dayString);\n\n                calendarGrid.add(dayTextArea, col, row);\n\n                dayNumber++;\n            }\n        }\n\n        return calendarGrid;\n    }\n\n    private String calculateDayOfWeek(int dayNumber) {\n        // Zeller's Congruence algorithm to calculate the day of the week\n        int h = (dayNumber + 2 * 12 + 3 * (12 + 1) / 5) % 7;\n        switch (h) {\n            case 0:\n                return &quot;Saturday&quot;;\n            case 1:\n                return &quot;Sunday&quot;;\n            case 2:\n                return &quot;Monday&quot;;\n            case 3:\n                return &quot;Tuesday&quot;;\n            case 4:\n                return &quot;Wednesday&quot;;\n            case 5:\n                return &quot;Thursday&quot;;\n            case 6:\n                return &quot;Friday&quot;;\n            default:\n                return &quot;&quot;;\n        }\n    }\n\n    private void saveCalendarAsText(Stage mainStage) {\n        FileChooser chooser = new FileChooser();\n        FileChooser.ExtensionFilter filter = new FileChooser.ExtensionFilter(&quot;Text files&quot;, &quot;*.txt&quot;);\n        chooser.getExtensionFilters().add(filter);\n\n        File file = chooser.showSaveDialog(mainStage);\n\n        if (file == null) {\n            return; // User canceled the file chooser\n        }\n\n        try (BufferedWriter writer = new BufferedWriter(new FileWriter(file))) {\n            // Iterate through all text areas and write data to the text file\n            for (int row = 0; row &lt; 5; row++) {\n                for (int col = 0; col &lt; 7; col++) {\n                    String dayData = dayTextAreas[row][col].getText().trim();\n                    if (!dayData.isEmpty()) {\n                        writer.write(dayData + System.lineSeparator());\n                    }\n                }\n            }\n        } catch (IOException error) {\n            // TODO: Handle the exception and provide user feedback\n            error.printStackTrace();\n        }\n    }\n\n    private String addOrdinalSuffix(int dayNumber) {\n        if (dayNumber &gt;= 11 &amp;&amp; dayNumber &lt;= 13) {\n            return dayNumber + &quot;th&quot;;\n        } else {\n            switch (dayNumber % 10) {\n                case 1:\n                    return dayNumber + &quot;st&quot;;\n                case 2:\n                    return dayNumber + &quot;nd&quot;;\n                case 3:\n                    return dayNumber + &quot;rd&quot;;\n                default:\n                    return dayNumber + &quot;th&quot;;\n            }\n        }\n    }\n\n}\n</code></pre>\n"},{"tags":["java","sql","spring","postgresql","spring-data-jpa"],"comments":[{"owner":{"account_id":18383045,"reputation":517,"user_id":13604662,"display_name":"Soumalya Bhattacharya"},"score":0,"creation_date":1702064976,"post_id":77627917,"comment_id":136855903,"body_markdown":"If can&#39;t answer the question don&#39;t keep down voting either give the answer or give some reference material which at least gives some clues. Its so frustrating when people down vote without giving any valid reason","body":"If can&#39;t answer the question don&#39;t keep down voting either give the answer or give some reference material which at least gives some clues. Its so frustrating when people down vote without giving any valid reason"}],"answers":[{"tags":[],"owner":{"account_id":25583936,"reputation":76,"user_id":19361968,"display_name":"Murat K."},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1702054732,"creation_date":1702054732,"answer_id":77628122,"question_id":77627917,"body_markdown":"Concatenating strings in PostgreSQL is like: \r\n\r\nhttps://popsql.com/learn-sql/postgresql/how-to-concatenate-strings-in-postgresql\r\n\r\nInstead of using:\r\n\r\n``\r\nST_GeomFromText(&#39;POINT(:lon :lat)&#39;, 4326)\r\n``\r\n\r\nplease try this:\r\n\r\n``\r\nST_GeomFromText(&#39;POINT(&#39; || :lon || &#39; &#39; || :lat || &#39;)&#39;, 4326)\r\n``","title":"SPring JPA can not parse a native SQL Query with a single quote","body":"<p>Concatenating strings in PostgreSQL is like:</p>\n<p><a href=\"https://popsql.com/learn-sql/postgresql/how-to-concatenate-strings-in-postgresql\" rel=\"nofollow noreferrer\">https://popsql.com/learn-sql/postgresql/how-to-concatenate-strings-in-postgresql</a></p>\n<p>Instead of using:</p>\n<p><code>ST_GeomFromText('POINT(:lon :lat)', 4326)</code></p>\n<p>please try this:</p>\n<p><code>ST_GeomFromText('POINT(' || :lon || ' ' || :lat || ')', 4326)</code></p>\n"},{"tags":[],"owner":{"account_id":9300525,"reputation":266,"user_id":6906148,"display_name":"23rharris"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1702068872,"creation_date":1702068872,"answer_id":77629118,"question_id":77627917,"body_markdown":"There are a few things to considering when using native queries as sometimes the smallest things could not work.\r\n\r\n 1. Make sure to check application properties has the correct dialect chosen so spring knows how to read it. \r\n\r\n    spring.jpa.properties.hibernate.jdbc.lob.non_contextual_creation= true\r\nspring.jpa.properties.hibernate.dialect= org.hibernate.dialect.PostgreSQLDialect\r\n\r\n2. Create entities that map directly to the native query. The table name @Table(name = &quot;Location&quot;) should match exactly to what&#39;s in the query.\r\n\r\n3. Make sure all named parameters are in the method and test query in DB editor before pasting in @Query\r\n\r\nAnd lastly separating the query on a new line based on keywords like (JOIN, ORDER BY, ETC) helps to visual pick up issues that might be seen in the native query. Like:\r\n\r\n    @Query(\r\n        value = &quot;SELECT P.ID, P.PLACENAME, P.CATEGORY, P.SUBCATEGORY, ETC ...&quot;\r\n            + &quot;JOIN ADDRESS A&quot;\r\n            + &quot;ORDER BY B&quot;\r\n            + &quot;OFFSET 3&quot;\r\n            + &quot;LIMIT 20&quot;,\r\n        nativeQuery = true\r\n    )\r\n\r\n","title":"SPring JPA can not parse a native SQL Query with a single quote","body":"<p>There are a few things to considering when using native queries as sometimes the smallest things could not work.</p>\n<ol>\n<li><p>Make sure to check application properties has the correct dialect chosen so spring knows how to read it.</p>\n<p>spring.jpa.properties.hibernate.jdbc.lob.non_contextual_creation= true\nspring.jpa.properties.hibernate.dialect= org.hibernate.dialect.PostgreSQLDialect</p>\n</li>\n<li><p>Create entities that map directly to the native query. The table name @Table(name = &quot;Location&quot;) should match exactly to what's in the query.</p>\n</li>\n<li><p>Make sure all named parameters are in the method and test query in DB editor before pasting in @Query</p>\n</li>\n</ol>\n<p>And lastly separating the query on a new line based on keywords like (JOIN, ORDER BY, ETC) helps to visual pick up issues that might be seen in the native query. Like:</p>\n<pre><code>@Query(\n    value = &quot;SELECT P.ID, P.PLACENAME, P.CATEGORY, P.SUBCATEGORY, ETC ...&quot;\n        + &quot;JOIN ADDRESS A&quot;\n        + &quot;ORDER BY B&quot;\n        + &quot;OFFSET 3&quot;\n        + &quot;LIMIT 20&quot;,\n    nativeQuery = true\n)\n</code></pre>\n"}],"owner":{"account_id":18383045,"reputation":517,"user_id":13604662,"display_name":"Soumalya Bhattacharya"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":1,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"answer_count":2,"score":-1,"last_activity_date":1702068872,"creation_date":1702052423,"question_id":77627917,"body_markdown":"I am trying to parse this sql query using spring data jpa to use in my application. It is a postgresql qurey using some of the geospatial functions using postgis. This query is basically trying to find all the records in the table which is in a particular search radius of a given longitude and latitude. \r\n\r\nSQL Query:\r\n```sql\r\n    SELECT P.ID, P.PLACENAME, P.CATEGORY, P.SUBCATEGORY, A.GEOLOCATION, A.STREETNAME, \r\n    A.TOWN, A.STATE, A.COUNTRY, ST_Distance(A.geolocation::geography, \r\n    ST_GeomFromText(&#39;POINT(:lon :lat)&#39;, 4326)::geography, false)/1000.00 AS DISTANCE FROM \r\n    PLATFORM_VENDOR_COMMON P JOIN ADDRESS A ON P.ADDRESS_ID = A.ADDRESS_ID WHERE \r\n    ST_DWithin(A.geolocation::geography, ST_GeomFromText(&#39;POINT(:lon :lat)&#39;, \r\n    4326)::geography, ?, false) ORDER BY A.geolocation::geography &lt;-&gt; \r\n    ST_GeomFromText(&#39;POINT(:lon :lat)&#39;, 4326)::geography OFFSET ? LIMIT 20\r\n```\r\n\r\nI&#39;m trying to execute this query under the JpaRepository Interface using:\r\n```java\r\n    @Query(value = &quot;SELECT P.ID, P.PLACENAME, P.CATEGORY, P.SUBCATEGORY, A.GEOLOCATION, \r\n    A.STREETNAME, A.TOWN, A.STATE, A.COUNTRY, ST_Distance(A.geolocation\\\\:\\\\:geography, \r\n    ST_GeomFromText(&#39;POINT(:lon :lat)&#39;, 4326)\\\\:\\\\:geography, false)/1000.00 AS DISTANCE \r\n    FROM PLATFORM_VENDOR_COMMON P JOIN ADDRESS A ON P.ADDRESS_ID = A.ADDRESS_ID WHERE \r\n    ST_DWithin(A.geolocation\\\\:\\\\:geography, ST_GeomFromText(&#39;POINT(:lon :lat)&#39;, \r\n    4326)\\\\:\\\\:geography, :radius, false) ORDER BY A.geolocation\\\\:\\\\:geography &lt;-&gt; \r\n    ST_GeomFromText(&#39;POINT(:lon :lat)&#39;, 4326)\\\\:\\\\:geography OFFSET :pageNumber LIMIT \r\n    20&quot;, nativeQuery = true)\r\n    List&lt;FindPvNearbyProjection&gt; findAllNearby(@Param(&quot;lon&quot;) Double lon, @Param(&quot;lat&quot;) \r\n    Double lat,\r\n            @Param(&quot;radius&quot;) Integer radius, @Param(&quot;pageNumber&quot;) Integer pageNumber);\r\n```\r\nAnd expecting the named queries to replace in their corresponsing places but somehow spring jpa is not able to translate this information to a sql statement and giving me this error:\r\n\r\n    [ERROR: parse error - invalid geometry\\n  Hint: \\&quot;POINT(:l\\&quot; &lt;-- parse error at position 8 within geometry] [n/a]\\n\\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:320)\r\n\r\n&gt; I think the Single quote (&#39;) before the `POINT` statement is the culprit but I&#39;m not sure.\r\n\r\nWhat can I do to solve this issue?","title":"SPring JPA can not parse a native SQL Query with a single quote","body":"<p>I am trying to parse this sql query using spring data jpa to use in my application. It is a postgresql qurey using some of the geospatial functions using postgis. This query is basically trying to find all the records in the table which is in a particular search radius of a given longitude and latitude.</p>\n<p>SQL Query:</p>\n<pre class=\"lang-sql prettyprint-override\"><code>    SELECT P.ID, P.PLACENAME, P.CATEGORY, P.SUBCATEGORY, A.GEOLOCATION, A.STREETNAME, \n    A.TOWN, A.STATE, A.COUNTRY, ST_Distance(A.geolocation::geography, \n    ST_GeomFromText('POINT(:lon :lat)', 4326)::geography, false)/1000.00 AS DISTANCE FROM \n    PLATFORM_VENDOR_COMMON P JOIN ADDRESS A ON P.ADDRESS_ID = A.ADDRESS_ID WHERE \n    ST_DWithin(A.geolocation::geography, ST_GeomFromText('POINT(:lon :lat)', \n    4326)::geography, ?, false) ORDER BY A.geolocation::geography &lt;-&gt; \n    ST_GeomFromText('POINT(:lon :lat)', 4326)::geography OFFSET ? LIMIT 20\n</code></pre>\n<p>I'm trying to execute this query under the JpaRepository Interface using:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @Query(value = &quot;SELECT P.ID, P.PLACENAME, P.CATEGORY, P.SUBCATEGORY, A.GEOLOCATION, \n    A.STREETNAME, A.TOWN, A.STATE, A.COUNTRY, ST_Distance(A.geolocation\\\\:\\\\:geography, \n    ST_GeomFromText('POINT(:lon :lat)', 4326)\\\\:\\\\:geography, false)/1000.00 AS DISTANCE \n    FROM PLATFORM_VENDOR_COMMON P JOIN ADDRESS A ON P.ADDRESS_ID = A.ADDRESS_ID WHERE \n    ST_DWithin(A.geolocation\\\\:\\\\:geography, ST_GeomFromText('POINT(:lon :lat)', \n    4326)\\\\:\\\\:geography, :radius, false) ORDER BY A.geolocation\\\\:\\\\:geography &lt;-&gt; \n    ST_GeomFromText('POINT(:lon :lat)', 4326)\\\\:\\\\:geography OFFSET :pageNumber LIMIT \n    20&quot;, nativeQuery = true)\n    List&lt;FindPvNearbyProjection&gt; findAllNearby(@Param(&quot;lon&quot;) Double lon, @Param(&quot;lat&quot;) \n    Double lat,\n            @Param(&quot;radius&quot;) Integer radius, @Param(&quot;pageNumber&quot;) Integer pageNumber);\n</code></pre>\n<p>And expecting the named queries to replace in their corresponsing places but somehow spring jpa is not able to translate this information to a sql statement and giving me this error:</p>\n<pre><code>[ERROR: parse error - invalid geometry\\n  Hint: \\&quot;POINT(:l\\&quot; &lt;-- parse error at position 8 within geometry] [n/a]\\n\\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:320)\n</code></pre>\n<blockquote>\n<p>I think the Single quote (') before the <code>POINT</code> statement is the culprit but I'm not sure.</p>\n</blockquote>\n<p>What can I do to solve this issue?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":3509196,"reputation":16473,"user_id":2933977,"display_name":"stdunbar"},"score":0,"creation_date":1700013170,"post_id":77484795,"comment_id":136602092,"body_markdown":"Have you considered something like a [Java based executable](https://stackoverflow.com/questions/147181/how-can-i-convert-my-java-program-to-an-exe-file)?  It&#39;s unclear that *anything* could be installed on the machine but at least it would be a single .exe to run.","body":"Have you considered something like a <a href=\"https://stackoverflow.com/questions/147181/how-can-i-convert-my-java-program-to-an-exe-file\">Java based executable</a>?  It&#39;s unclear that <i>anything</i> could be installed on the machine but at least it would be a single .exe to run."},{"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1700013394,"post_id":77484795,"comment_id":136602106,"body_markdown":"Can you “embed” the Java Runtime - yes - thus is simply having the JRE binaries and libraries packed with your compiled code and then having a launcher which  can the execute the java command within you package (ie batch file or native executable)","body":"Can you “embed” the Java Runtime - yes - thus is simply having the JRE binaries and libraries packed with your compiled code and then having a launcher which  can the execute the java command within you package (ie batch file or native executable)"},{"owner":{"account_id":11874421,"reputation":39,"user_id":19835998,"display_name":"Alex"},"score":0,"creation_date":1700014332,"post_id":77484795,"comment_id":136602173,"body_markdown":"@stdunbar I had tried to create and .exe file, but it still need Java for running the program, or how can I convert a Java Program to exe which not requires user to run the program without installing Java?","body":"@stdunbar I had tried to create and .exe file, but it still need Java for running the program, or how can I convert a Java Program to exe which not requires user to run the program without installing Java?"},{"owner":{"account_id":27097454,"reputation":797,"user_id":20644506,"display_name":"Peng"},"score":0,"creation_date":1700014362,"post_id":77484795,"comment_id":136602176,"body_markdown":"may be you can  have a reference to ```DOCKER```   , there is  a tech  ```DIND```  could helps you slove your problem","body":"may be you can  have a reference to <code>DOCKER</code>   , there is  a tech  <code>DIND</code>  could helps you slove your problem"},{"owner":{"account_id":27097454,"reputation":797,"user_id":20644506,"display_name":"Peng"},"score":0,"creation_date":1700014435,"post_id":77484795,"comment_id":136602184,"body_markdown":"DIND could package your whole env and application , so that you can run application  skip  env installation step","body":"DIND could package your whole env and application , so that you can run application  skip  env installation step"},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1700062275,"post_id":77484795,"comment_id":136609028,"body_markdown":"You might find https://stackoverflow.com/questions/53453212/how-to-deploy-a-javafx-11-desktop-application-with-a-jre helpful.  (This applies to all Java applications, whether or not they use JavaFX.)","body":"You might find <a href=\"https://stackoverflow.com/questions/53453212/how-to-deploy-a-javafx-11-desktop-application-with-a-jre\" title=\"how to deploy a javafx 11 desktop application with a jre\">stackoverflow.com/questions/53453212/&hellip;</a> helpful.  (This applies to all Java applications, whether or not they use JavaFX.)"}],"answers":[{"tags":[],"owner":{"account_id":7421543,"reputation":2880,"user_id":5645656,"accept_rate":100,"display_name":"Cardinal System"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1702068423,"creation_date":1702068423,"answer_id":77629094,"question_id":77484795,"body_markdown":"I had a similar requirement once. I ended up using [jPortable][1] to create a portable Java installation.\r\n\r\nWhen you run the installer, all you need to do is specify an install location (in this case, it would be your USB drive). Once it is installed, you use the `java` executable in the `bin` directory to execute your applications. It works exactly the same way as any other Java installation.\r\n\r\n  [1]: https://portableapps.com/apps/utilities/java_portable","title":"Installing Java on USB Drive without administrator privileges","body":"<p>I had a similar requirement once. I ended up using <a href=\"https://portableapps.com/apps/utilities/java_portable\" rel=\"nofollow noreferrer\">jPortable</a> to create a portable Java installation.</p>\n<p>When you run the installer, all you need to do is specify an install location (in this case, it would be your USB drive). Once it is installed, you use the <code>java</code> executable in the <code>bin</code> directory to execute your applications. It works exactly the same way as any other Java installation.</p>\n"}],"owner":{"account_id":11874421,"reputation":39,"user_id":19835998,"display_name":"Alex"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1702068423,"creation_date":1700012975,"question_id":77484795,"body_markdown":"I am currently writing a `Java` program for a company use. \r\nHowever, there are no `Java` installed in the company&#39;s computer. \r\n\r\n\r\nTherefore, I would like to know that if it is possible that I can install the Java in the USB (or just together with My Program). Then, if the user install the package of the program that I had written, `Java` will be also being installed. \r\n\r\nIf it is possible to do that?\\\r\n(Please assume that the user will mainly use the program in Window platform). ","title":"Installing Java on USB Drive without administrator privileges","body":"<p>I am currently writing a <code>Java</code> program for a company use.\nHowever, there are no <code>Java</code> installed in the company's computer.</p>\n<p>Therefore, I would like to know that if it is possible that I can install the Java in the USB (or just together with My Program). Then, if the user install the package of the program that I had written, <code>Java</code> will be also being installed.</p>\n<p>If it is possible to do that?<br />\n(Please assume that the user will mainly use the program in Window platform).</p>\n"},{"tags":["java","tomcat","iis","catalina"],"comments":[{"owner":{"account_id":6605,"reputation":61212,"user_id":11182,"display_name":"Lex Li"},"score":1,"creation_date":1675916249,"post_id":75390980,"comment_id":133031970,"body_markdown":"Ever since Windows Vista, system folders like `Program Files` are heavily protected, so are you sure you want to keep temp files there? Maybe you should check Tomcat document to see how to move the files out to a less sensitive folder. In all cases, the tomcat process needs write permission to the temp files so as to remove them. The actual steps to configure permissions depend on how you configure Tomcat on this Windows machine, which you didn&#39;t even reveal in the question body.","body":"Ever since Windows Vista, system folders like <code>Program Files</code> are heavily protected, so are you sure you want to keep temp files there? Maybe you should check Tomcat document to see how to move the files out to a less sensitive folder. In all cases, the tomcat process needs write permission to the temp files so as to remove them. The actual steps to configure permissions depend on how you configure Tomcat on this Windows machine, which you didn&#39;t even reveal in the question body."},{"owner":{"account_id":26408955,"reputation":311,"user_id":20058276,"display_name":"TengFeiXie"},"score":0,"creation_date":1675935154,"post_id":75390980,"comment_id":133035891,"body_markdown":"Maybe the file is being used by another thread or the permissions are insufficient. You can refer to related cases: https://stackoverflow.com/questions/6663202/cannot-delete-temp-folder-sometimes and https://stackoverflow.com/questions/50532263/java-delete-directory-ioexception-unable-to-delete-directory.","body":"Maybe the file is being used by another thread or the permissions are insufficient. You can refer to related cases: <a href=\"https://stackoverflow.com/questions/6663202/cannot-delete-temp-folder-sometimes\" title=\"cannot delete temp folder sometimes\">stackoverflow.com/questions/6663202/&hellip;</a> and <a href=\"https://stackoverflow.com/questions/50532263/java-delete-directory-ioexception-unable-to-delete-directory\" title=\"java delete directory ioexception unable to delete directory\">stackoverflow.com/questions/50532263/&hellip;</a>."},{"owner":{"account_id":16080761,"reputation":55,"user_id":11606740,"display_name":"Zachary McArthur"},"score":0,"creation_date":1675957739,"post_id":75390980,"comment_id":133043373,"body_markdown":"@TengFeiXie I think you&#39;re right... After monitoring it a bit some files are being deleted and some are not.  This appears to be a situation where the file is in use and therefore unable to be deleted.","body":"@TengFeiXie I think you&#39;re right... After monitoring it a bit some files are being deleted and some are not.  This appears to be a situation where the file is in use and therefore unable to be deleted."},{"owner":{"account_id":12393052,"reputation":635,"user_id":9076590,"display_name":"Tim Hilt"},"score":0,"creation_date":1682683573,"post_id":75390980,"comment_id":134258119,"body_markdown":"Hey @ZacharyMcArthur. We are seeing the same issue on a Windows host. Have you managed to solve this in the meantime? Looking into the linked questions right now.","body":"Hey @ZacharyMcArthur. We are seeing the same issue on a Windows host. Have you managed to solve this in the meantime? Looking into the linked questions right now."}],"answers":[{"tags":[],"owner":{"account_id":28831444,"reputation":1,"user_id":22081745,"display_name":"Satyaprasanna Dash"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1702041753,"creation_date":1702041753,"answer_id":77626864,"question_id":75390980,"body_markdown":"Sometimes we can&#39;t delete files from C: drive without administrator permission,\r\nmay be these solution will help you :\r\n\r\n1) Run your Java application with administrative privileges. (using cmd)\r\n\r\n2) If still facing the issue , Check File Permissions. Ensure that the Java process has the necessary permissions to delete the file.","title":"Apache Tomcat 10.1 Unable to delete temporary files","body":"<p>Sometimes we can't delete files from C: drive without administrator permission,\nmay be these solution will help you :</p>\n<ol>\n<li><p>Run your Java application with administrative privileges. (using cmd)</p>\n</li>\n<li><p>If still facing the issue , Check File Permissions. Ensure that the Java process has the necessary permissions to delete the file.</p>\n</li>\n</ol>\n"}],"owner":{"account_id":16080761,"reputation":55,"user_id":11606740,"display_name":"Zachary McArthur"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":1,"is_answered":false,"view_count":5002,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1702068358,"creation_date":1675885399,"question_id":75390980,"body_markdown":"We just upgraded Tomcat from 9.0 to 10.1, and Java from 8 to 11.  everything is running fine except now we are having temp files pile up in `Apache Software Foundation\\Tomcat 10.1\\work\\Catalina\\localhost\\root`.  This is causing 502 errors after Java heap space issues.  We see errors like this..\r\n\r\n```none\r\n07-Feb-2023 23:33:11.414 SEVERE [http-nio-81-exec-3] org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun Error running socket processor\r\n\tjava.io.UncheckedIOException: Cannot delete C:\\Program Files\\Apache Software Foundation\\Tomcat 10.1\\work\\Catalina\\localhost\\root\\upload_ac88107d_733f_4b9d_a3a3_9274a46f92e3_00000509.tmp\r\n\t\tat org.apache.tomcat.util.http.fileupload.disk.DiskFileItem.delete(DiskFileItem.java:429)\r\n\t\tat org.apache.catalina.core.ApplicationPart.delete(ApplicationPart.java:54)\r\n\t\tat org.apache.catalina.connector.Request.recycle(Request.java:451)\r\n\t\tat org.apache.catalina.connector.CoyoteAdapter.log(CoyoteAdapter.java:512)\r\n\t\tat org.apache.catalina.connector.CoyoteAdapter.checkRecycled(CoyoteAdapter.java:536)\r\n\t\tat org.apache.coyote.http11.Http11Processor.recycle(Http11Processor.java:1440)\r\n\t\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.release(AbstractProtocol.java:1052)\r\n\t\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:1024)\r\n\t\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1734)\r\n\t\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\t\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\t\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\t\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\t\tat java.base/java.lang.Thread.run(Thread.java:834)\r\n\tCaused by: java.io.IOException: Cannot delete C:\\Program Files\\Apache Software Foundation\\Tomcat 10.1\\work\\Catalina\\localhost\\root\\upload_ac88107d_733f_4b9d_a3a3_9274a46f92e3_00000509.tmp\r\n\t\t... 14 more\r\n```\r\n\r\nAny ideas what could be the issue?","title":"Apache Tomcat 10.1 Unable to delete temporary files","body":"<p>We just upgraded Tomcat from 9.0 to 10.1, and Java from 8 to 11.  everything is running fine except now we are having temp files pile up in <code>Apache Software Foundation\\Tomcat 10.1\\work\\Catalina\\localhost\\root</code>.  This is causing 502 errors after Java heap space issues.  We see errors like this..</p>\n<pre class=\"lang-none prettyprint-override\"><code>07-Feb-2023 23:33:11.414 SEVERE [http-nio-81-exec-3] org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun Error running socket processor\n    java.io.UncheckedIOException: Cannot delete C:\\Program Files\\Apache Software Foundation\\Tomcat 10.1\\work\\Catalina\\localhost\\root\\upload_ac88107d_733f_4b9d_a3a3_9274a46f92e3_00000509.tmp\n        at org.apache.tomcat.util.http.fileupload.disk.DiskFileItem.delete(DiskFileItem.java:429)\n        at org.apache.catalina.core.ApplicationPart.delete(ApplicationPart.java:54)\n        at org.apache.catalina.connector.Request.recycle(Request.java:451)\n        at org.apache.catalina.connector.CoyoteAdapter.log(CoyoteAdapter.java:512)\n        at org.apache.catalina.connector.CoyoteAdapter.checkRecycled(CoyoteAdapter.java:536)\n        at org.apache.coyote.http11.Http11Processor.recycle(Http11Processor.java:1440)\n        at org.apache.coyote.AbstractProtocol$ConnectionHandler.release(AbstractProtocol.java:1052)\n        at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:1024)\n        at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1734)\n        at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\n        at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\n        at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\n        at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\n        at java.base/java.lang.Thread.run(Thread.java:834)\n    Caused by: java.io.IOException: Cannot delete C:\\Program Files\\Apache Software Foundation\\Tomcat 10.1\\work\\Catalina\\localhost\\root\\upload_ac88107d_733f_4b9d_a3a3_9274a46f92e3_00000509.tmp\n        ... 14 more\n</code></pre>\n<p>Any ideas what could be the issue?</p>\n"},{"tags":["java","apache-spark","max","aggregate","min"],"comments":[{"owner":{"account_id":29452398,"reputation":11,"user_id":22568781,"display_name":"James"},"score":0,"creation_date":1702067416,"post_id":77629017,"comment_id":136856213,"body_markdown":"I forgot to add that I am running spark 3.5.0","body":"I forgot to add that I am running spark 3.5.0"}],"owner":{"account_id":29452398,"reputation":11,"user_id":22568781,"display_name":"James"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":16,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1702067318,"creation_date":1702067318,"question_id":77629017,"body_markdown":"I create the following dataset using groupBy:\r\n\r\n```\r\nDataset&lt;Row&gt; rangeSet = inputSet.select(key, partitionIDColName).groupBy(partitionIDColName)\r\n                .agg(functions.min(key).as(minKeyColName), functions.max(key).as(maxKeyColName))\r\n                .orderBy(functions.col(partitionIDColName).asc());\r\n```\r\n\r\n`key` is a string.  And the column represented by key is storing string values.  I partition the dataset by the integer column `partitionIDColName` and get the minimum and maximum value of the key for each partition ID.\r\n\r\nI then collect the rows of `rangeSet` onto the driver and loop over them for validation:\r\n\r\n```\r\nList&lt;Row&gt; ranges = rangeSet.collectAsList();\r\n\r\nfor (Row r : ranges) {\r\n   String rangeStr;\r\n\r\n   Integer partitionID = r.&lt;Integer&gt;getAs(partitionIDColName);\r\n   String minKeyVal = r.&lt;String&gt;getAs(minKeyColName);\r\n   String maxKeyVal = r.&lt;String&gt;getAs(maxKeyColName);\r\n\r\n   if (minKeyVal.compareTo(maxKeyVal) &gt; 0) {\r\n      throw new Exception(&quot;minKeyVal is greter than maxKeyVal for range &quot; + partitionID + &quot;, minKeyVal: &#39;&quot; + minKeyVal + &quot;&#39;&quot; + &quot;maxKeyVal: &#39;&quot; + maxKeyVal + &quot;&#39;&quot;);\r\n   }\r\n}\r\n```\r\n\r\nFor some of the rows, the exception is triggered, indicating that the minimum returned by groupBy is less than the maximum value returned.  How is this possible?  Is Spark applying a different lexicographical ordering when performing the aggregation than when my driver calls to `String::compareTo()`?  Is it a java versioning issue between Spark and my driver.  I have verified that I am using jdk-11.0.19 to run Spark, Hadoop, and my driver.  My driver is also built and executed with jdk-11.0.19.","title":"Spark groupBy min and max aggregation returns min values that are greater than max value for strings","body":"<p>I create the following dataset using groupBy:</p>\n<pre><code>Dataset&lt;Row&gt; rangeSet = inputSet.select(key, partitionIDColName).groupBy(partitionIDColName)\n                .agg(functions.min(key).as(minKeyColName), functions.max(key).as(maxKeyColName))\n                .orderBy(functions.col(partitionIDColName).asc());\n</code></pre>\n<p><code>key</code> is a string.  And the column represented by key is storing string values.  I partition the dataset by the integer column <code>partitionIDColName</code> and get the minimum and maximum value of the key for each partition ID.</p>\n<p>I then collect the rows of <code>rangeSet</code> onto the driver and loop over them for validation:</p>\n<pre><code>List&lt;Row&gt; ranges = rangeSet.collectAsList();\n\nfor (Row r : ranges) {\n   String rangeStr;\n\n   Integer partitionID = r.&lt;Integer&gt;getAs(partitionIDColName);\n   String minKeyVal = r.&lt;String&gt;getAs(minKeyColName);\n   String maxKeyVal = r.&lt;String&gt;getAs(maxKeyColName);\n\n   if (minKeyVal.compareTo(maxKeyVal) &gt; 0) {\n      throw new Exception(&quot;minKeyVal is greter than maxKeyVal for range &quot; + partitionID + &quot;, minKeyVal: '&quot; + minKeyVal + &quot;'&quot; + &quot;maxKeyVal: '&quot; + maxKeyVal + &quot;'&quot;);\n   }\n}\n</code></pre>\n<p>For some of the rows, the exception is triggered, indicating that the minimum returned by groupBy is less than the maximum value returned.  How is this possible?  Is Spark applying a different lexicographical ordering when performing the aggregation than when my driver calls to <code>String::compareTo()</code>?  Is it a java versioning issue between Spark and my driver.  I have verified that I am using jdk-11.0.19 to run Spark, Hadoop, and my driver.  My driver is also built and executed with jdk-11.0.19.</p>\n"},{"tags":["java","spring","spring-security","spring-cloud-gateway"],"answers":[{"tags":[],"owner":{"account_id":1054217,"reputation":8986,"user_id":1057291,"accept_rate":80,"display_name":"namalfernandolk"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1702067205,"creation_date":1702010754,"answer_id":77624403,"question_id":77385959,"body_markdown":"Finally I noted that since WebFlux is reactive, I need to do it that way. So, I made the below changes, and now it is working fine.\r\n\r\n**1. Add load balancer dependency**\r\n\r\n    &lt;dependency&gt;\r\n       &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n       &lt;artifactId&gt;spring-cloud-starter-loadbalancer&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n\r\n**2.Add WebClient Configuration.**\r\n\r\n    @Configuration\r\n    class WebClientConfig {\r\n    \r\n    \t@Bean\r\n    \t@LoadBalanced\r\n    \tpublic WebClient.Builder loadBalancedWebClientBuilder() {\r\n    \t\treturn WebClient.builder();\r\n    \t}\r\n    }\r\n\r\n**3.Call external microservice using service-name via WebClient as follows**\r\n\r\n\r\n    import jakarta.ws.rs.core.HttpHeaders;\r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.cloud.gateway.filter.GatewayFilter;\r\n    import org.springframework.cloud.gateway.filter.factory.AbstractGatewayFilterFactory;\r\n    import org.springframework.stereotype.Component;\r\n    import org.springframework.web.reactive.function.client.WebClient;\r\n    \r\n    @Component\r\n    public class AuthenticationFilter extends AbstractGatewayFilterFactory&lt;AuthenticationFilter.Config&gt; {\r\n    \r\n        private WebClient webClient;\r\n    \r\n        public AuthenticationFilter() {\r\n            super(Config.class);\r\n        }\r\n    \t\r\n        @Autowired\r\n        public AuthenticationFilter(WebClient.Builder webClientBuilder) {\r\n            super(Config.class);\r\n            this.webClient = webClientBuilder.build();\r\n        }\r\n    \r\n        @Override\r\n        public Config newConfig() {\r\n            return new Config();\r\n        }\r\n    \r\n        @Override\r\n        public GatewayFilter apply(Config config) {\r\n            return (exchange, chain) -&gt; {\r\n                String authHeader = exchange.getRequest().getHeaders().getFirst(HttpHeaders.AUTHORIZATION);\r\n    \r\n                if (authHeader != null &amp;&amp; authHeader.startsWith(&quot;Bearer &quot;)) {\r\n                    authHeader = authHeader.substring(7);\r\n                }\r\n    \r\n                String expectedRole = config.role;\r\n                String authServiceUrl = &quot;http://YOUR-APPLICATION-SERVICE-NAME&quot;;\r\n    \r\n                return this.webClient\r\n                        .get()\r\n                        .uri(authServiceUrl + &quot;/auth/doOp?token=&quot; + authHeader + &quot;&amp;role=&quot; + expectedRole)\r\n                        .retrieve()\r\n                        .bodyToMono(Boolean.class)\r\n                        .flatMap(response -&gt; {\r\n                            // Do further operations on microservice response if needed\r\n                            return chain.filter(exchange);\r\n                        })\r\n                        .onErrorResume(throwable -&gt; {\r\n                            throw new RuntimeException(&quot;un authorized access to application&quot;);\r\n                        });\r\n            };\r\n        }\r\n    \r\n        public static class Config {\r\n            private String role;\r\n            public String getRole() {\r\n                return role;\r\n            }\r\n            public void setRole(String role) {\r\n                this.role = role;\r\n            }\r\n        }\r\n    }\r\n\r\nI&#39;ve shared a sample project here : \r\nhttps://github.com/namalfernandolk/cloud-gateway-demo.git","title":"Call MicroServices synchronously by the service-name within Spring Cloud Gateway","body":"<p>Finally I noted that since WebFlux is reactive, I need to do it that way. So, I made the below changes, and now it is working fine.</p>\n<p><strong>1. Add load balancer dependency</strong></p>\n<pre><code>&lt;dependency&gt;\n   &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n   &lt;artifactId&gt;spring-cloud-starter-loadbalancer&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p><strong>2.Add WebClient Configuration.</strong></p>\n<pre><code>@Configuration\nclass WebClientConfig {\n\n    @Bean\n    @LoadBalanced\n    public WebClient.Builder loadBalancedWebClientBuilder() {\n        return WebClient.builder();\n    }\n}\n</code></pre>\n<p><strong>3.Call external microservice using service-name via WebClient as follows</strong></p>\n<pre><code>import jakarta.ws.rs.core.HttpHeaders;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.cloud.gateway.filter.GatewayFilter;\nimport org.springframework.cloud.gateway.filter.factory.AbstractGatewayFilterFactory;\nimport org.springframework.stereotype.Component;\nimport org.springframework.web.reactive.function.client.WebClient;\n\n@Component\npublic class AuthenticationFilter extends AbstractGatewayFilterFactory&lt;AuthenticationFilter.Config&gt; {\n\n    private WebClient webClient;\n\n    public AuthenticationFilter() {\n        super(Config.class);\n    }\n    \n    @Autowired\n    public AuthenticationFilter(WebClient.Builder webClientBuilder) {\n        super(Config.class);\n        this.webClient = webClientBuilder.build();\n    }\n\n    @Override\n    public Config newConfig() {\n        return new Config();\n    }\n\n    @Override\n    public GatewayFilter apply(Config config) {\n        return (exchange, chain) -&gt; {\n            String authHeader = exchange.getRequest().getHeaders().getFirst(HttpHeaders.AUTHORIZATION);\n\n            if (authHeader != null &amp;&amp; authHeader.startsWith(&quot;Bearer &quot;)) {\n                authHeader = authHeader.substring(7);\n            }\n\n            String expectedRole = config.role;\n            String authServiceUrl = &quot;http://YOUR-APPLICATION-SERVICE-NAME&quot;;\n\n            return this.webClient\n                    .get()\n                    .uri(authServiceUrl + &quot;/auth/doOp?token=&quot; + authHeader + &quot;&amp;role=&quot; + expectedRole)\n                    .retrieve()\n                    .bodyToMono(Boolean.class)\n                    .flatMap(response -&gt; {\n                        // Do further operations on microservice response if needed\n                        return chain.filter(exchange);\n                    })\n                    .onErrorResume(throwable -&gt; {\n                        throw new RuntimeException(&quot;un authorized access to application&quot;);\n                    });\n        };\n    }\n\n    public static class Config {\n        private String role;\n        public String getRole() {\n            return role;\n        }\n        public void setRole(String role) {\n            this.role = role;\n        }\n    }\n}\n</code></pre>\n<p>I've shared a sample project here :\n<a href=\"https://github.com/namalfernandolk/cloud-gateway-demo.git\" rel=\"nofollow noreferrer\">https://github.com/namalfernandolk/cloud-gateway-demo.git</a></p>\n"}],"owner":{"account_id":1054217,"reputation":8986,"user_id":1057291,"accept_rate":80,"display_name":"namalfernandolk"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":54,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1702067205,"creation_date":1698633397,"question_id":77385959,"body_markdown":"I have a cloud api gateway related implementation built referring [this][1]. \r\n\r\nThere, I&#39;m calling an authentication service within that gateway through AuthenticationFilter.\r\n\r\n - CLOUD-GATEWAY-SERVICE\t: 7130 \r\n - AUTHENTICATION-SERVICE\t: 9898\r\n - EXCHANGE-SERVICE\t\t: 7120\r\n\r\n**application.yml**\r\n\r\n    server:\r\n      port: 7130\r\n    eureka:\r\n      client:\r\n        serviceUrl:\r\n          defaultZone: http://localhost:8083/eureka\r\n    spring:\r\n      application:\r\n        name: CLOUD-GATEWAY-SERVICE\r\n      cloud:\r\n        gateway:\r\n          routes:\r\n          - id: mtoken-exchange-service\r\n            uri: lb://EXCHANGE-SERVICE\r\n            predicates:\r\n            - Path=/employee/**\r\n            filters:\r\n              - name: AuthenticationFilter\r\n                args:\r\n                  role: ROLE_ADMIN\r\n          - id: mtokens-authentication-service\r\n            uri: lb://AUTHENTICATION-SERVICE\r\n            predicates:\r\n              - Path=/auth/**\r\n\r\n\r\n - Spring boot version : 3.1.1\r\n - Spring Cloud Version : 2022.0.3\r\n - Java version : 17\r\n\r\n\r\nCurrently I&#39;m using the RestTemplate for that; but I tried Feign and Webclient also.\r\n\r\nWhen I access using the host and port as mentioned below it works. (here I used it without @LoadBalanced annotation)\r\n\r\n    template.getForObject(&quot;http://localhost:7130/auth/validate?token=&lt;Bearer_Token&gt;&amp;role=ROLE_ADMIN&quot;, Boolean.class);\r\n    template.getForObject(&quot;http://localhost:9898/auth/validate?token=&lt;Bearer_Token&gt;&amp;role=ROLE_ADMIN&quot;, Boolean.class);\r\n\r\nBut, when I try to access using the service name as mentioned below it fails with Unknown Host Exception.\r\n\r\n    template.getForObject(&quot;http://CLOUD-GATEWAY-SERVICE/auth/validate?token=&lt;Bearer_Token&gt;&amp;role=ROLE_ADMIN&quot;, Boolean.class);\r\n    template.getForObject(&quot;http://AUTHENTICATION-SERVICE/auth/validate?token=&lt;Bearer_Token&gt;&amp;role=ROLE_ADMIN&quot;, Boolean.class);\r\n\r\nThen as mentioned in this[https://stackoverflow.com/questions/37159662/microservices-resttemplate-unknownhostexception] post, I annotated the RestTemplate with @LoadBalanced. But after that it is throwing below error.\r\nSame thing I experienced when I synchronously call servces using Feign or Webclient.\r\n\r\n    2023-10-30T05:19:59.789+05:30  INFO 10856 --- [           main] c.javatechie.SwiggyGatewayApplication    : Started SwiggyGatewayApplication in 3.752 seconds (process running for 4.03)\r\n    java.lang.IllegalStateException: block()/blockFirst()/blockLast() are blocking, which is not supported in thread reactor-http-nio-3\r\n    \tat reactor.core.publisher.BlockingSingleSubscriber.blockingGet(BlockingSingleSubscriber.java:83)\r\n    \tat reactor.core.publisher.Mono.block(Mono.java:1710)\r\n    \tat org.springframework.cloud.loadbalancer.blocking.client.BlockingLoadBalancerClient.choose(BlockingLoadBalancerClient.java:163)\r\n    \tat org.springframework.cloud.loadbalancer.blocking.client.BlockingLoadBalancerClient.execute(BlockingLoadBalancerClient.java:74)\r\n    \tat org.springframework.cloud.client.loadbalancer.LoadBalancerInterceptor.intercept(LoadBalancerInterceptor.java:56)\r\n    \tat org.springframework.http.client.InterceptingClientHttpRequest$InterceptingRequestExecution.execute(InterceptingClientHttpRequest.java:87)\r\n    \tat org.springframework.http.client.InterceptingClientHttpRequest.executeInternal(InterceptingClientHttpRequest.java:71)\r\n    \tat org.springframework.http.client.AbstractBufferingClientHttpRequest.executeInternal(AbstractBufferingClientHttpRequest.java:48)\r\n    \tat org.springframework.http.client.AbstractClientHttpRequest.execute(AbstractClientHttpRequest.java:66)\r\n    \tat org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:862)\r\n    \tat org.springframework.web.client.RestTemplate.execute(RestTemplate.java:764)\r\n    \tat org.springframework.web.client.RestTemplate.getForObject(RestTemplate.java:378)\r\n    \tat com.javatechie.filter.AuthenticationFilter.lambda$apply$0(AuthenticationFilter.java:42)\r\n\t\r\n\r\n**RestTemplateConfiguration** \r\n\r\n    @Configuration\r\n    class RestTemplateConfiguration {\r\n    \t@Bean\r\n    \t@LoadBalanced\r\n    \tpublic RestTemplate restTemplate() {\r\n    \t\treturn new RestTemplate(new BufferingClientHttpRequestFactory(new HttpComponentsClientHttpRequestFactory()));\r\n    \t}\r\n    }\r\n\r\nIs there anyway to call services synchronously by the service name using RestTemplate or Feignclient or Webclient etc within this like cloud gateway application?\r\n\r\n\r\n  [1]: https://www.youtube.com/watch?v=MWvnmyLRUik","title":"Call MicroServices synchronously by the service-name within Spring Cloud Gateway","body":"<p>I have a cloud api gateway related implementation built referring <a href=\"https://www.youtube.com/watch?v=MWvnmyLRUik\" rel=\"nofollow noreferrer\">this</a>.</p>\n<p>There, I'm calling an authentication service within that gateway through AuthenticationFilter.</p>\n<ul>\n<li>CLOUD-GATEWAY-SERVICE    : 7130</li>\n<li>AUTHENTICATION-SERVICE   : 9898</li>\n<li>EXCHANGE-SERVICE     : 7120</li>\n</ul>\n<p><strong>application.yml</strong></p>\n<pre><code>server:\n  port: 7130\neureka:\n  client:\n    serviceUrl:\n      defaultZone: http://localhost:8083/eureka\nspring:\n  application:\n    name: CLOUD-GATEWAY-SERVICE\n  cloud:\n    gateway:\n      routes:\n      - id: mtoken-exchange-service\n        uri: lb://EXCHANGE-SERVICE\n        predicates:\n        - Path=/employee/**\n        filters:\n          - name: AuthenticationFilter\n            args:\n              role: ROLE_ADMIN\n      - id: mtokens-authentication-service\n        uri: lb://AUTHENTICATION-SERVICE\n        predicates:\n          - Path=/auth/**\n</code></pre>\n<ul>\n<li>Spring boot version : 3.1.1</li>\n<li>Spring Cloud Version : 2022.0.3</li>\n<li>Java version : 17</li>\n</ul>\n<p>Currently I'm using the RestTemplate for that; but I tried Feign and Webclient also.</p>\n<p>When I access using the host and port as mentioned below it works. (here I used it without @LoadBalanced annotation)</p>\n<pre><code>template.getForObject(&quot;http://localhost:7130/auth/validate?token=&lt;Bearer_Token&gt;&amp;role=ROLE_ADMIN&quot;, Boolean.class);\ntemplate.getForObject(&quot;http://localhost:9898/auth/validate?token=&lt;Bearer_Token&gt;&amp;role=ROLE_ADMIN&quot;, Boolean.class);\n</code></pre>\n<p>But, when I try to access using the service name as mentioned below it fails with Unknown Host Exception.</p>\n<pre><code>template.getForObject(&quot;http://CLOUD-GATEWAY-SERVICE/auth/validate?token=&lt;Bearer_Token&gt;&amp;role=ROLE_ADMIN&quot;, Boolean.class);\ntemplate.getForObject(&quot;http://AUTHENTICATION-SERVICE/auth/validate?token=&lt;Bearer_Token&gt;&amp;role=ROLE_ADMIN&quot;, Boolean.class);\n</code></pre>\n<p>Then as mentioned in this[https://stackoverflow.com/questions/37159662/microservices-resttemplate-unknownhostexception] post, I annotated the RestTemplate with @LoadBalanced. But after that it is throwing below error.\nSame thing I experienced when I synchronously call servces using Feign or Webclient.</p>\n<pre><code>2023-10-30T05:19:59.789+05:30  INFO 10856 --- [           main] c.javatechie.SwiggyGatewayApplication    : Started SwiggyGatewayApplication in 3.752 seconds (process running for 4.03)\njava.lang.IllegalStateException: block()/blockFirst()/blockLast() are blocking, which is not supported in thread reactor-http-nio-3\n    at reactor.core.publisher.BlockingSingleSubscriber.blockingGet(BlockingSingleSubscriber.java:83)\n    at reactor.core.publisher.Mono.block(Mono.java:1710)\n    at org.springframework.cloud.loadbalancer.blocking.client.BlockingLoadBalancerClient.choose(BlockingLoadBalancerClient.java:163)\n    at org.springframework.cloud.loadbalancer.blocking.client.BlockingLoadBalancerClient.execute(BlockingLoadBalancerClient.java:74)\n    at org.springframework.cloud.client.loadbalancer.LoadBalancerInterceptor.intercept(LoadBalancerInterceptor.java:56)\n    at org.springframework.http.client.InterceptingClientHttpRequest$InterceptingRequestExecution.execute(InterceptingClientHttpRequest.java:87)\n    at org.springframework.http.client.InterceptingClientHttpRequest.executeInternal(InterceptingClientHttpRequest.java:71)\n    at org.springframework.http.client.AbstractBufferingClientHttpRequest.executeInternal(AbstractBufferingClientHttpRequest.java:48)\n    at org.springframework.http.client.AbstractClientHttpRequest.execute(AbstractClientHttpRequest.java:66)\n    at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:862)\n    at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:764)\n    at org.springframework.web.client.RestTemplate.getForObject(RestTemplate.java:378)\n    at com.javatechie.filter.AuthenticationFilter.lambda$apply$0(AuthenticationFilter.java:42)\n</code></pre>\n<p><strong>RestTemplateConfiguration</strong></p>\n<pre><code>@Configuration\nclass RestTemplateConfiguration {\n    @Bean\n    @LoadBalanced\n    public RestTemplate restTemplate() {\n        return new RestTemplate(new BufferingClientHttpRequestFactory(new HttpComponentsClientHttpRequestFactory()));\n    }\n}\n</code></pre>\n<p>Is there anyway to call services synchronously by the service name using RestTemplate or Feignclient or Webclient etc within this like cloud gateway application?</p>\n"},{"tags":["java","android","datastore"],"owner":{"account_id":16033463,"reputation":63,"user_id":11571752,"display_name":"Alexander Robinson"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":17,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1702066111,"creation_date":1702066111,"question_id":77628923,"body_markdown":"I have been trying to to migrate from `SharedPreferences` to `DataStore`. So far I have had no success. The way I had my `SharedPreferences` implemented before is like this. I have a `SharedPreferencesManager` that I store my `SharedPreferences` instance in. The `SharedPreferencesManager` also handles all my editing and so on for my `SharedPreferences`. When the Apps `Activity` goes through `OnCreate` the `SharedPreferencesManager` constructor calls this method:\r\n\r\n    private void createSharedPreferences(Context context)\r\n    {\r\n        mSharedPref = context.getSharedPreferences(PREFERENCE_KEY, Context.MODE_PRIVATE);\r\n        int unlock = mSharedPref.getInt(SHARED_PREFERENCES_CREATED, - 1);\r\n        if (unlock == - 1)\r\n        {\r\n            SharedPreferences.Editor editor = mSharedPref.edit();\r\n            editor.putInt(SHARED_PREFERENCES_CREATED, 0);\r\n           //The rest of the default values are excluded for brevity\r\n        }\r\n    }\r\nAs you can probably see I create the `SharedPreferences` instance and query if its been created. If not add the default values.\r\n\r\nI would like to keep this structure with DataStore but it seem impossible.\r\n\r\nI have followed the documentation [here][1]. Inserted the dependencies created my `DataStore` instance like such: `mDataStore = new RxPreferenceDataStoreBuilder(context, PREFERENCE_NAME).build();`and got a basic POC using the code supplied. I tried to apply it to the structure I have like this it:\r\n\r\n    private void createDefaultPreferencesValues()\r\n    {\r\n        if(!areDefaultsInserted())\r\n        {\r\n            setDefaultValuesAdded(true);\r\n            //Default values excluded for brevity\r\n        }\r\n    }\r\n\r\nwith the `areDefaultsInserted()` method structure like this:\r\n\r\n     public boolean areDefaultsInserted()\r\n    {\r\n        return mDataStore.data().map(prefs -&gt; prefs.get(DEFAULT_INSERTED_KEY)).blockingFirst();\r\n    }\r\n\r\nInitially I got `java.lang.NullPointerException: The mapper function returned a null value.`. This makes sense since I didnt insert anything into the `DataStore`. So I tried catching the exception\r\nand then `finally` passing out a false, but still got the `The mapper function returned a null value`. I tried multiple other ways but the one that caused me the most confusion was this.\r\n\r\n    private void createDefaultPreferencesValues()\r\n    {\r\n       if(mDataStore.data().blockingFirst().asMap().isEmpty())\r\n       {\r\n            setDefaultValuesAdded(true);\r\n           //Values excluded for brevity\r\n        }\r\n    }\r\nI can successfully check that the `Map` is empty but when I then try to assign a value into the `DataStore` I get the `The mapper function returned a null value` exception again. Stranger still if I remove the check for the `Maps` size I can successfully add the default values. Im obviously doing something wrong. How do I catch the `null` and insert a set of default values. Is it even worth it to use `DataStore` since it seems like a lot of overhead to store and fetch one literal bit of information? I am not querying `Urls` on the net or anything. A user can flip a switch and change the value. When they return the value gets fetched and applied to the Ui. Please help. Brain is too smooth :(\r\n\r\nPs. Answers in Java please. The project is Java based\r\n \r\n [1]: https://developer.android.com/topic/libraries/architecture/datastore","title":"Using DataStore on Android With Java","body":"<p>I have been trying to to migrate from <code>SharedPreferences</code> to <code>DataStore</code>. So far I have had no success. The way I had my <code>SharedPreferences</code> implemented before is like this. I have a <code>SharedPreferencesManager</code> that I store my <code>SharedPreferences</code> instance in. The <code>SharedPreferencesManager</code> also handles all my editing and so on for my <code>SharedPreferences</code>. When the Apps <code>Activity</code> goes through <code>OnCreate</code> the <code>SharedPreferencesManager</code> constructor calls this method:</p>\n<pre><code>private void createSharedPreferences(Context context)\n{\n    mSharedPref = context.getSharedPreferences(PREFERENCE_KEY, Context.MODE_PRIVATE);\n    int unlock = mSharedPref.getInt(SHARED_PREFERENCES_CREATED, - 1);\n    if (unlock == - 1)\n    {\n        SharedPreferences.Editor editor = mSharedPref.edit();\n        editor.putInt(SHARED_PREFERENCES_CREATED, 0);\n       //The rest of the default values are excluded for brevity\n    }\n}\n</code></pre>\n<p>As you can probably see I create the <code>SharedPreferences</code> instance and query if its been created. If not add the default values.</p>\n<p>I would like to keep this structure with DataStore but it seem impossible.</p>\n<p>I have followed the documentation <a href=\"https://developer.android.com/topic/libraries/architecture/datastore\" rel=\"nofollow noreferrer\">here</a>. Inserted the dependencies created my <code>DataStore</code> instance like such: <code>mDataStore = new RxPreferenceDataStoreBuilder(context, PREFERENCE_NAME).build();</code>and got a basic POC using the code supplied. I tried to apply it to the structure I have like this it:</p>\n<pre><code>private void createDefaultPreferencesValues()\n{\n    if(!areDefaultsInserted())\n    {\n        setDefaultValuesAdded(true);\n        //Default values excluded for brevity\n    }\n}\n</code></pre>\n<p>with the <code>areDefaultsInserted()</code> method structure like this:</p>\n<pre><code> public boolean areDefaultsInserted()\n{\n    return mDataStore.data().map(prefs -&gt; prefs.get(DEFAULT_INSERTED_KEY)).blockingFirst();\n}\n</code></pre>\n<p>Initially I got <code>java.lang.NullPointerException: The mapper function returned a null value.</code>. This makes sense since I didnt insert anything into the <code>DataStore</code>. So I tried catching the exception\nand then <code>finally</code> passing out a false, but still got the <code>The mapper function returned a null value</code>. I tried multiple other ways but the one that caused me the most confusion was this.</p>\n<pre><code>private void createDefaultPreferencesValues()\n{\n   if(mDataStore.data().blockingFirst().asMap().isEmpty())\n   {\n        setDefaultValuesAdded(true);\n       //Values excluded for brevity\n    }\n}\n</code></pre>\n<p>I can successfully check that the <code>Map</code> is empty but when I then try to assign a value into the <code>DataStore</code> I get the <code>The mapper function returned a null value</code> exception again. Stranger still if I remove the check for the <code>Maps</code> size I can successfully add the default values. Im obviously doing something wrong. How do I catch the <code>null</code> and insert a set of default values. Is it even worth it to use <code>DataStore</code> since it seems like a lot of overhead to store and fetch one literal bit of information? I am not querying <code>Urls</code> on the net or anything. A user can flip a switch and change the value. When they return the value gets fetched and applied to the Ui. Please help. Brain is too smooth :(</p>\n<p>Ps. Answers in Java please. The project is Java based</p>\n"},{"tags":["java","maven","maven-archetype"],"comments":[{"owner":{"account_id":2377273,"reputation":3085,"user_id":2080264,"display_name":"araknoid"},"score":0,"creation_date":1507299846,"post_id":46590423,"comment_id":80167728,"body_markdown":"Any particular reason you put the `archetype-resource` module inside `src/main/resource`?","body":"Any particular reason you put the <code>archetype-resource</code> module inside <code>src&#47;main&#47;resource</code>?"},{"owner":{"account_id":2007569,"reputation":8114,"user_id":1797006,"accept_rate":63,"display_name":"Kalle Richter"},"score":0,"creation_date":1507300275,"post_id":46590423,"comment_id":80168011,"body_markdown":"@araknoid I followed https://maven.apache.org/guides/mini/guide-creating-archetypes.html. That&#39;s the only reason. Is that wrong or troublesome? Are there alternatives?","body":"@araknoid I followed <a href=\"https://maven.apache.org/guides/mini/guide-creating-archetypes.html\" rel=\"nofollow noreferrer\">maven.apache.org/guides/mini/guide-creating-archetypes.html</a>. That&#39;s the only reason. Is that wrong or troublesome? Are there alternatives?"}],"owner":{"account_id":2007569,"reputation":8114,"user_id":1797006,"accept_rate":63,"display_name":"Kalle Richter"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1002,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1702066021,"creation_date":1507220409,"question_id":46590423,"body_markdown":"I created a multi-module Maven archetype following http://maven.apache.org/archetype/maven-archetype-plugin/examples/create-multi-module-project.html with the following parent ` pom.xml`:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n      &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n      &lt;groupId&gt;${groupId}&lt;/groupId&gt;\r\n      &lt;artifactId&gt;${rootArtifactId}&lt;/artifactId&gt;\r\n      &lt;version&gt;${version}&lt;/version&gt;\r\n      &lt;packaging&gt;pom&lt;/packaging&gt;\r\n      &lt;name&gt;${rootArtifactId}&lt;/name&gt;\r\n      &lt;modules&gt;\r\n        &lt;module&gt;${rootArtifactId}-jar&lt;/module&gt;\r\n        &lt;module&gt;${rootArtifactId}-ejb&lt;/module&gt;\r\n        &lt;module&gt;${rootArtifactId}-web&lt;/module&gt;\r\n        &lt;module&gt;${rootArtifactId}-ear&lt;/module&gt;\r\n      &lt;/modules&gt;\r\n    &lt;/project&gt;\r\n\r\nin `src/main/resources/archetype-resources/pom.xml`. I expect the resulting `pom.xml` after `mvn archetype:generate` to include the `modules`  element and it&#39;s children with `rootArtifactId` replaced, however the resulting `pom.xml` is\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n      &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n      &lt;groupId&gt;myGroup&lt;/groupId&gt;\r\n      &lt;artifactId&gt;myArtifact&lt;/artifactId&gt;\r\n      &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n      &lt;packaging&gt;pom&lt;/packaging&gt;\r\n      &lt;name&gt;myArtifact&lt;/name&gt;\r\n    &lt;/project&gt;\r\n","title":"How to create parent pom.xml in a multi-module Maven archetype from template?","body":"<p>I created a multi-module Maven archetype following <a href=\"http://maven.apache.org/archetype/maven-archetype-plugin/examples/create-multi-module-project.html\" rel=\"nofollow noreferrer\">http://maven.apache.org/archetype/maven-archetype-plugin/examples/create-multi-module-project.html</a> with the following parent <code> pom.xml</code>:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n  &lt;groupId&gt;${groupId}&lt;/groupId&gt;\n  &lt;artifactId&gt;${rootArtifactId}&lt;/artifactId&gt;\n  &lt;version&gt;${version}&lt;/version&gt;\n  &lt;packaging&gt;pom&lt;/packaging&gt;\n  &lt;name&gt;${rootArtifactId}&lt;/name&gt;\n  &lt;modules&gt;\n    &lt;module&gt;${rootArtifactId}-jar&lt;/module&gt;\n    &lt;module&gt;${rootArtifactId}-ejb&lt;/module&gt;\n    &lt;module&gt;${rootArtifactId}-web&lt;/module&gt;\n    &lt;module&gt;${rootArtifactId}-ear&lt;/module&gt;\n  &lt;/modules&gt;\n&lt;/project&gt;\n</code></pre>\n<p>in <code>src/main/resources/archetype-resources/pom.xml</code>. I expect the resulting <code>pom.xml</code> after <code>mvn archetype:generate</code> to include the <code>modules</code>  element and it's children with <code>rootArtifactId</code> replaced, however the resulting <code>pom.xml</code> is</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n  &lt;groupId&gt;myGroup&lt;/groupId&gt;\n  &lt;artifactId&gt;myArtifact&lt;/artifactId&gt;\n  &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n  &lt;packaging&gt;pom&lt;/packaging&gt;\n  &lt;name&gt;myArtifact&lt;/name&gt;\n&lt;/project&gt;\n</code></pre>\n"},{"tags":["java","generics","inheritance"],"comments":[{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":1,"creation_date":1702064687,"post_id":77628774,"comment_id":136855864,"body_markdown":"First, for something simple like this, don&#39;t over look a simple method call.  `String.toUpperCase()` does this with no generics and no inheritance.  Simple. For your question, if a class is truly generic -- that is it works identically for any type -- then you can use generics.  Think `ArrayList`, which works the same no matter what type you put in it.  If a class works differently based on type, that&#39;s inheritance (or more precisely polymorphism).","body":"First, for something simple like this, don&#39;t over look a simple method call.  <code>String.toUpperCase()</code> does this with no generics and no inheritance.  Simple. For your question, if a class is truly generic -- that is it works identically for any type -- then you can use generics.  Think <code>ArrayList</code>, which works the same no matter what type you put in it.  If a class works differently based on type, that&#39;s inheritance (or more precisely polymorphism)."},{"owner":{"account_id":2792262,"reputation":163837,"user_id":2402272,"accept_rate":85,"display_name":"John Bollinger"},"score":1,"creation_date":1702065400,"post_id":77628774,"comment_id":136855954,"body_markdown":"Generics and inheritance are not mutually exclusive.  There are times when they work hand in hand.","body":"Generics and inheritance are not mutually exclusive.  There are times when they work hand in hand."}],"answers":[{"tags":[],"owner":{"account_id":15064163,"reputation":13519,"user_id":10871900,"display_name":"dan1st is crying"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1702065887,"creation_date":1702065466,"answer_id":77628882,"question_id":77628774,"body_markdown":"In a situation like that, I would use generics.\r\n\r\nWhile you might be successful with inheritance, there are a few disadvantages.\r\n\r\nIf you have a container, you might want to use a generic type since that&#39;s what generics are made for.\r\n\r\n### additional cast\r\nLet&#39;s assume you have multiple executors with different types.\r\n\r\nIf you use inheritence, you would need to explicitely cast it every time you want to get the result:\r\n```java\r\nStringUpperOutput output = (StringUpperOutput) executor.execute(input);//or call some method (which has no idea about the executor) that in turn calls executor.execute\r\n```\r\n\r\nSimilarly, you have these casts in your `execute` methods. Someone could supply invalid input.\r\n\r\nWith generics, there would still be implicit casts but the compiler checks whether you are using matching types and automatically inserts the tasks.\r\n\r\n### may be final\r\nIf you use inheritence, you extend the classes. You might not want everyone to extend any class you write so you might want to make these classes `final`. This doesn&#39;t work with generics.\r\n\r\n### More code\r\nWith the inheritance approach, you would need to create an input/output/executor class for every input/output type/operation.\r\n\r\n### different situations\r\nGenerics are made for different situations than inheritance. If you want to extend the functionality of some class, you might want to use inheritance. If you just want to specify the type outside of the class, you probably want to choose generics.\r\n\r\nYou can also use them together as suggested by [John Bollinger](https://stackoverflow.com/users/2402272/john-bollinger) [in the comments of your question](https://stackoverflow.com/questions/77628774/java-inheritance-vs-generic/77628882#comment136855954_77628774). This may be useful if your `Input`/`Output` classes should have additional functionality. For example, you could add a method to `Input` checking whether that input is valid:\r\n```java\r\n  class GenericInput&lt;I&gt; {\r\n    String id;\r\n    I inputObj;\r\n\r\n    boolean checkValid(){\r\n        return true;//generally, any input is valid but you can create specific subclasses and checks there.\r\n    }\r\n  }\r\n```","title":"Java: Inheritance vs Generic?","body":"<p>In a situation like that, I would use generics.</p>\n<p>While you might be successful with inheritance, there are a few disadvantages.</p>\n<p>If you have a container, you might want to use a generic type since that's what generics are made for.</p>\n<h3>additional cast</h3>\n<p>Let's assume you have multiple executors with different types.</p>\n<p>If you use inheritence, you would need to explicitely cast it every time you want to get the result:</p>\n<pre class=\"lang-java prettyprint-override\"><code>StringUpperOutput output = (StringUpperOutput) executor.execute(input);//or call some method (which has no idea about the executor) that in turn calls executor.execute\n</code></pre>\n<p>Similarly, you have these casts in your <code>execute</code> methods. Someone could supply invalid input.</p>\n<p>With generics, there would still be implicit casts but the compiler checks whether you are using matching types and automatically inserts the tasks.</p>\n<h3>may be final</h3>\n<p>If you use inheritence, you extend the classes. You might not want everyone to extend any class you write so you might want to make these classes <code>final</code>. This doesn't work with generics.</p>\n<h3>More code</h3>\n<p>With the inheritance approach, you would need to create an input/output/executor class for every input/output type/operation.</p>\n<h3>different situations</h3>\n<p>Generics are made for different situations than inheritance. If you want to extend the functionality of some class, you might want to use inheritance. If you just want to specify the type outside of the class, you probably want to choose generics.</p>\n<p>You can also use them together as suggested by <a href=\"https://stackoverflow.com/users/2402272/john-bollinger\">John Bollinger</a> <a href=\"https://stackoverflow.com/questions/77628774/java-inheritance-vs-generic/77628882#comment136855954_77628774\">in the comments of your question</a>. This may be useful if your <code>Input</code>/<code>Output</code> classes should have additional functionality. For example, you could add a method to <code>Input</code> checking whether that input is valid:</p>\n<pre class=\"lang-java prettyprint-override\"><code>  class GenericInput&lt;I&gt; {\n    String id;\n    I inputObj;\n\n    boolean checkValid(){\n        return true;//generally, any input is valid but you can create specific subclasses and checks there.\n    }\n  }\n</code></pre>\n"}],"owner":{"account_id":4609664,"reputation":392,"user_id":7396101,"accept_rate":0,"display_name":"Pepria"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":59,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"closed_date":1702119285,"answer_count":1,"score":-1,"last_activity_date":1702065887,"creation_date":1702064128,"question_id":77628774,"body_markdown":"I am trying to figure out the differences/pros + cons/when to use which in the below situation where both Generics and Inheritance seems to provide working alternatives. If I have scenario where I am implementing generic behavior based on some input and returning an output:\r\n\r\n**Inheritance**\r\n```java \r\n\r\n  // classes\r\n  class Input {\r\n    String id;\r\n  }\r\n\r\n  class Output {\r\n    long executionTime;\r\n  }\r\n\r\n  class StringUpperInput extends Input {\r\n    String stringToUpper;\r\n  }\r\n\r\n  class StringUpperOutput extends Output {\r\n    String upperCaseString;\r\n  }\r\n\r\n  // interface\r\n  interface Executor {\r\n    // execute some logic on the input and return the output\r\n    Output execute(Input i);\r\n  }\r\n\r\n  // implementation\r\n  class StringUpperExecutor implements Executor {\r\n    @Override\r\n    public Output execute(Input i) {\r\n      String upper = ((StringUpperInput) i).stringToUpper.toUpperCase();\r\n      StringUpperOutput output = new StringUpperOutput();\r\n      output.upperCaseString = upper;\r\n      // set general stuff like execution time etc\r\n      return output;\r\n    }\r\n  }\r\n```\r\n\r\n**Generics**\r\n```java\r\n  class GenericInput&lt;I&gt; {\r\n    String id;\r\n    I inputObj;\r\n  }\r\n\r\n  class GenericOutput&lt;O&gt; {\r\n    long executionTime;\r\n    O outputObj;\r\n  }\r\n\r\n  class StringUpperInputParam {\r\n    String stringToUpper;\r\n  }\r\n\r\n  class StringUpperOutputResult {\r\n    String upperCaseString;\r\n  }\r\n\r\n  interface ExecutorGeneric&lt;I, O&gt; {\r\n    GenericOutput&lt;O&gt; execute(GenericInput&lt;I&gt; input);\r\n  }\r\n\r\n  class StringUpperGenericExecutor implements ExecutorGeneric&lt;StringUpperInputParam, StringUpperOutputResult&gt; {\r\n\r\n    @Override\r\n    public GenericOutput&lt;StringUpperOutputResult&gt; execute(GenericInput&lt;StringUpperInputParam&gt; input) {\r\n      GenericOutput&lt;StringUpperOutputResult&gt; resultWrapper = new GenericOutput&lt;&gt;();\r\n      StringUpperOutputResult result = new StringUpperOutputResult();\r\n      result.upperCaseString = input.inputObj.stringToUpper.toUpperCase();\r\n      resultWrapper.outputObj = result;\r\n      \r\n      // set general stuff like execution time, etc\r\n      return resultWrapper;\r\n    }\r\n  }\r\n```\r\nAbove is an example of a &quot;Executor&quot; that will take an input string and returns the upper case of it. I want to write a service that will have list of such executors and will pick one based on some criteria and then pass the input object to the specific executor generically and get back an output. For this kind of scenario, which of the above two approaches work best? What is the advantage of one over the other? It seems both can work so I guess I&#39;m looking for the &quot;correct&quot; way to do it.\r\n\r\n","title":"Java: Inheritance vs Generic?","body":"<p>I am trying to figure out the differences/pros + cons/when to use which in the below situation where both Generics and Inheritance seems to provide working alternatives. If I have scenario where I am implementing generic behavior based on some input and returning an output:</p>\n<p><strong>Inheritance</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>\n  // classes\n  class Input {\n    String id;\n  }\n\n  class Output {\n    long executionTime;\n  }\n\n  class StringUpperInput extends Input {\n    String stringToUpper;\n  }\n\n  class StringUpperOutput extends Output {\n    String upperCaseString;\n  }\n\n  // interface\n  interface Executor {\n    // execute some logic on the input and return the output\n    Output execute(Input i);\n  }\n\n  // implementation\n  class StringUpperExecutor implements Executor {\n    @Override\n    public Output execute(Input i) {\n      String upper = ((StringUpperInput) i).stringToUpper.toUpperCase();\n      StringUpperOutput output = new StringUpperOutput();\n      output.upperCaseString = upper;\n      // set general stuff like execution time etc\n      return output;\n    }\n  }\n</code></pre>\n<p><strong>Generics</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>  class GenericInput&lt;I&gt; {\n    String id;\n    I inputObj;\n  }\n\n  class GenericOutput&lt;O&gt; {\n    long executionTime;\n    O outputObj;\n  }\n\n  class StringUpperInputParam {\n    String stringToUpper;\n  }\n\n  class StringUpperOutputResult {\n    String upperCaseString;\n  }\n\n  interface ExecutorGeneric&lt;I, O&gt; {\n    GenericOutput&lt;O&gt; execute(GenericInput&lt;I&gt; input);\n  }\n\n  class StringUpperGenericExecutor implements ExecutorGeneric&lt;StringUpperInputParam, StringUpperOutputResult&gt; {\n\n    @Override\n    public GenericOutput&lt;StringUpperOutputResult&gt; execute(GenericInput&lt;StringUpperInputParam&gt; input) {\n      GenericOutput&lt;StringUpperOutputResult&gt; resultWrapper = new GenericOutput&lt;&gt;();\n      StringUpperOutputResult result = new StringUpperOutputResult();\n      result.upperCaseString = input.inputObj.stringToUpper.toUpperCase();\n      resultWrapper.outputObj = result;\n      \n      // set general stuff like execution time, etc\n      return resultWrapper;\n    }\n  }\n</code></pre>\n<p>Above is an example of a &quot;Executor&quot; that will take an input string and returns the upper case of it. I want to write a service that will have list of such executors and will pick one based on some criteria and then pass the input object to the specific executor generically and get back an output. For this kind of scenario, which of the above two approaches work best? What is the advantage of one over the other? It seems both can work so I guess I'm looking for the &quot;correct&quot; way to do it.</p>\n"},{"tags":["java","apache-spark","kryo"],"owner":{"account_id":13474905,"reputation":19,"user_id":9722217,"display_name":"Tristpost"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":10,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1702065814,"creation_date":1702065814,"question_id":77628901,"body_markdown":"I will receive large numbers of Java objects serialized with Kryo that I need to process with Spark. I have read that Spark internally can use Kryo serialization so my question is therefore if anybody is aware of a way to, using a Java Spark application, ingest these objects directly into a dataframe for further processing without first de-serializing them?","title":"Ingesting kryo serialized data into Spark without de-serialization?","body":"<p>I will receive large numbers of Java objects serialized with Kryo that I need to process with Spark. I have read that Spark internally can use Kryo serialization so my question is therefore if anybody is aware of a way to, using a Java Spark application, ingest these objects directly into a dataframe for further processing without first de-serializing them?</p>\n"},{"tags":["java","eclipse","maven"],"comments":[{"owner":{"account_id":888714,"reputation":34077,"user_id":927493,"accept_rate":61,"display_name":"J Fabian Meier"},"score":0,"creation_date":1701935963,"post_id":77617229,"comment_id":136837113,"body_markdown":"Show us your POM file. It is probably incorrect.","body":"Show us your POM file. It is probably incorrect."},{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":0,"creation_date":1701945084,"post_id":77617229,"comment_id":136838625,"body_markdown":"In the _Package Explorer_, right-click the project and choose _Maven &gt; Update project..._ If this does not help, please include the content of your `pom.xml` as text into your question (formatted as _Sample Code_).","body":"In the <i>Package Explorer</i>, right-click the project and choose <i>Maven &gt; Update project...</i> If this does not help, please include the content of your <code>pom.xml</code> as text into your question (formatted as <i>Sample Code</i>)."}],"answers":[{"tags":[],"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1702061917,"creation_date":1702061917,"answer_id":77628646,"question_id":77617229,"body_markdown":"According to the screenshot, **your `pom.xml` is broken**: it starts with **`&lt;project&gt; xmlns=&quot;http:...`** instead of `&lt;project xmlns=&quot;http:...` (the XML namespace `xmlns=&quot;...&quot;`, etc. must be in the start tag of the root element).\r\n\r\nDo the following to fix it:\r\n\r\n 1. In your `pom.xml` in line 1, remove after `&lt;project` the character `&gt;`\r\n 2. Make sure that there is a `&gt;` character at the end of line 1\r\n 3. Right-click and choose *Maven &gt; Update project...*","title":"Not getting Maven dependencies to show up on left panel in order to see the JAR files","body":"<p>According to the screenshot, <strong>your <code>pom.xml</code> is broken</strong>: it starts with <strong><code>&lt;project&gt; xmlns=&quot;http:...</code></strong> instead of <code>&lt;project xmlns=&quot;http:...</code> (the XML namespace <code>xmlns=&quot;...&quot;</code>, etc. must be in the start tag of the root element).</p>\n<p>Do the following to fix it:</p>\n<ol>\n<li>In your <code>pom.xml</code> in line 1, remove after <code>&lt;project</code> the character <code>&gt;</code></li>\n<li>Make sure that there is a <code>&gt;</code> character at the end of line 1</li>\n<li>Right-click and choose <em>Maven &gt; Update project...</em></li>\n</ol>\n"}],"owner":{"account_id":30085201,"reputation":1,"user_id":23055881,"display_name":"Dilshad Randhawa"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1702065665,"answer_count":1,"score":0,"last_activity_date":1702065638,"creation_date":1701913639,"question_id":77617229,"body_markdown":"I have installed Java JDK and Eclipse on my Windows machine. I am trying to get the Maven dependencies to be shown on left panel of my new Java project but it seems I cannot do it. I am following a video tutorial and in it shows that once I configure the POM.xml and save it I should see it on left side but I still don&#39;t.\r\n\r\nPlease see screenshot:\r\n\r\n![Maven Dependencies not showing up](https://i.stack.imgur.com/bWxuZ.png)\r\n\r\n","title":"Not getting Maven dependencies to show up on left panel in order to see the JAR files","body":"<p>I have installed Java JDK and Eclipse on my Windows machine. I am trying to get the Maven dependencies to be shown on left panel of my new Java project but it seems I cannot do it. I am following a video tutorial and in it shows that once I configure the POM.xml and save it I should see it on left side but I still don't.</p>\n<p>Please see screenshot:</p>\n<p><img src=\"https://i.stack.imgur.com/bWxuZ.png\" alt=\"Maven Dependencies not showing up\" /></p>\n"},{"tags":["java","spring-boot","openshift"],"comments":[{"owner":{"account_id":372682,"reputation":22426,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1702134437,"post_id":77628823,"comment_id":136861076,"body_markdown":"According to which documentation? Which version of Java? How much memory? Better usage compared to what? Anyway it is impossible for us to answer your question since it requires extensive knowledge of the application, environment and testing to understand such behaviors. Also note that overflows probably refers to a different problem, the question is not clear.","body":"According to which documentation? Which version of Java? How much memory? Better usage compared to what? Anyway it is impossible for us to answer your question since it requires extensive knowledge of the application, environment and testing to understand such behaviors. Also note that overflows probably refers to a different problem, the question is not clear."}],"owner":{"account_id":19519736,"reputation":1,"user_id":14282212,"display_name":"Carlos Mazzoli"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":12,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1702150065,"answer_count":0,"score":0,"last_activity_date":1702064742,"creation_date":1702064742,"question_id":77628823,"body_markdown":"We have an api with REST services (developed with SpringBoot) installed in an OCP project within an OpenShift environment.\r\nAs the endpoints are used, we see that the memory usage (assigned to the &#39;pod&#39;) grows but never decreases, resulting in an overflow.\r\nThe question is, are there ways to make the use of the garbage collector more efficient?\r\nCurrently the garbaje collector is defined with the JVM parameters:\r\n-XX:+UseParallelOldGC\r\n-XX:GCTimeRatio=4\r\n(according to documentation &#39;ParallelOldGC&#39; is appropriate)\r\n\r\nI listen to suggestions about strategies to make better use of memory and avoid overflows.\r\n\r\nThank you so much","title":"OCP OpenShift - Problem with memory management - SpringBoot REST services","body":"<p>We have an api with REST services (developed with SpringBoot) installed in an OCP project within an OpenShift environment.\nAs the endpoints are used, we see that the memory usage (assigned to the 'pod') grows but never decreases, resulting in an overflow.\nThe question is, are there ways to make the use of the garbage collector more efficient?\nCurrently the garbaje collector is defined with the JVM parameters:\n-XX:+UseParallelOldGC\n-XX:GCTimeRatio=4\n(according to documentation 'ParallelOldGC' is appropriate)</p>\n<p>I listen to suggestions about strategies to make better use of memory and avoid overflows.</p>\n<p>Thank you so much</p>\n"},{"tags":["java","eclipse","debugging","jvm"],"comments":[{"owner":{"account_id":468272,"reputation":301,"user_id":874165,"display_name":"Pillz"},"score":1,"creation_date":1594672604,"post_id":62883108,"comment_id":111202217,"body_markdown":"You might want to check this question https://stackoverflow.com/questions/3289550/java-object-id-in-jvm","body":"You might want to check this question <a href=\"https://stackoverflow.com/questions/3289550/java-object-id-in-jvm\" title=\"java object id in jvm\">stackoverflow.com/questions/3289550/java-object-id-in-jvm</a>"},{"owner":{"account_id":3159259,"reputation":109665,"user_id":2670892,"display_name":"greg-449"},"score":0,"creation_date":1594672827,"post_id":62883108,"comment_id":111202314,"body_markdown":"I think this is the `uniqueID` field of the `com.sun.jdi.ObjectReference` interface which is part of the Jave Debug Interface (JDI) only available to code debugging a JVM.","body":"I think this is the <code>uniqueID</code> field of the <code>com.sun.jdi.ObjectReference</code> interface which is part of the Jave Debug Interface (JDI) only available to code debugging a JVM."}],"answers":[{"tags":[],"owner":{"account_id":4210603,"reputation":94346,"user_id":3448419,"display_name":"apangin"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1594674627,"creation_date":1594674280,"answer_id":62884235,"question_id":62883108,"body_markdown":"&gt; Are these allocation IDs tracked by the jvm itself, or are they\r\n&gt; something Eclipse is providing through some unknown mechanism?\r\n\r\nObject IDs are generated by [JDWP agent](https://docs.oracle.com/javase/8/docs/technotes/guides/troubleshoot/introclientissues005.html). JDWP agent is a library that exposes JVM debugging capabilities to external Java debuggers (like Eclipse IDE) through the [JDWP protocol](https://docs.oracle.com/javase/8/docs/technotes/guides/jpda/jdwp-spec.html).\r\n\r\nThe agent is typically started with the JVM by the command line option `-agentlib:jdwp=` or `-Xrunjdwp`.\r\n\r\n&gt; They appear to be sequential and based on when an instance was\r\n&gt; allocated\r\n\r\nIDs are generated on demand when the agent needs to send an object reference to the debugger. They are not related to object creation time or something. Java objects initially have no assigned IDs.\r\n\r\n&gt; Is there any way to get at them from code\r\n\r\nAs I said above, object IDs do not exist until the agent exchanges object references with the debugger.\r\n\r\nBut you may generate your own IDs for objects using `IdentityHashMap` or similar. Here is a simplest way to create such IDs:\r\n\r\n    private static final Map&lt;Object, Long&gt; map = new IdentityHashMap&lt;&gt;();\r\n\r\n    private static long nextId;\r\n\r\n    public static long getId(Object o) {\r\n        synchronized (map) {\r\n            Long id = map.get(o);\r\n            if (id == null) {\r\n                map.put(o, id = ++nextId);\r\n            }\r\n            return id;\r\n        }\r\n    }\r\n\r\nOf course, this implementation is not perfect, since it uses a global lock and stores objects forever. A better solution would be a kind of [WeakIdentityConcurrentMap](https://javadoc.io/static/net.sf.ehcache/ehcache/2.10.6/net/sf/ehcache/util/WeakIdentityConcurrentMap.html).\r\n\r\nIn fact, this is exactly how JDWP agent generates object IDs. It keeps an internal hash table that maps an object to a sequentially inceremented integer, and uses reference counting for removal. See [commonRef.c](http://hg.openjdk.java.net/jdk/jdk/file/9c9e71164fa7/src/jdk.jdwp.agent/share/native/libjdwp/commonRef.c#l35)","title":"Retrieve ID of instance, like Eclipse&#39;s debugger does","body":"<blockquote>\n<p>Are these allocation IDs tracked by the jvm itself, or are they\nsomething Eclipse is providing through some unknown mechanism?</p>\n</blockquote>\n<p>Object IDs are generated by <a href=\"https://docs.oracle.com/javase/8/docs/technotes/guides/troubleshoot/introclientissues005.html\" rel=\"nofollow noreferrer\">JDWP agent</a>. JDWP agent is a library that exposes JVM debugging capabilities to external Java debuggers (like Eclipse IDE) through the <a href=\"https://docs.oracle.com/javase/8/docs/technotes/guides/jpda/jdwp-spec.html\" rel=\"nofollow noreferrer\">JDWP protocol</a>.</p>\n<p>The agent is typically started with the JVM by the command line option <code>-agentlib:jdwp=</code> or <code>-Xrunjdwp</code>.</p>\n<blockquote>\n<p>They appear to be sequential and based on when an instance was\nallocated</p>\n</blockquote>\n<p>IDs are generated on demand when the agent needs to send an object reference to the debugger. They are not related to object creation time or something. Java objects initially have no assigned IDs.</p>\n<blockquote>\n<p>Is there any way to get at them from code</p>\n</blockquote>\n<p>As I said above, object IDs do not exist until the agent exchanges object references with the debugger.</p>\n<p>But you may generate your own IDs for objects using <code>IdentityHashMap</code> or similar. Here is a simplest way to create such IDs:</p>\n<pre><code>private static final Map&lt;Object, Long&gt; map = new IdentityHashMap&lt;&gt;();\n\nprivate static long nextId;\n\npublic static long getId(Object o) {\n    synchronized (map) {\n        Long id = map.get(o);\n        if (id == null) {\n            map.put(o, id = ++nextId);\n        }\n        return id;\n    }\n}\n</code></pre>\n<p>Of course, this implementation is not perfect, since it uses a global lock and stores objects forever. A better solution would be a kind of <a href=\"https://javadoc.io/static/net.sf.ehcache/ehcache/2.10.6/net/sf/ehcache/util/WeakIdentityConcurrentMap.html\" rel=\"nofollow noreferrer\">WeakIdentityConcurrentMap</a>.</p>\n<p>In fact, this is exactly how JDWP agent generates object IDs. It keeps an internal hash table that maps an object to a sequentially inceremented integer, and uses reference counting for removal. See <a href=\"http://hg.openjdk.java.net/jdk/jdk/file/9c9e71164fa7/src/jdk.jdwp.agent/share/native/libjdwp/commonRef.c#l35\" rel=\"nofollow noreferrer\">commonRef.c</a></p>\n"},{"tags":[],"owner":{"account_id":11412114,"reputation":21,"user_id":8365960,"display_name":"Joseph Janos"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1702064009,"creation_date":1702064009,"answer_id":77628766,"question_id":62883108,"body_markdown":"As a unique Id I use in the constructor\r\n\r\nid = System.nanoTime() % 1000;","title":"Retrieve ID of instance, like Eclipse&#39;s debugger does","body":"<p>As a unique Id I use in the constructor</p>\n<p>id = System.nanoTime() % 1000;</p>\n"}],"owner":{"account_id":3033509,"reputation":539,"user_id":2572072,"accept_rate":38,"display_name":"Stik"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":536,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1702064009,"creation_date":1594669286,"question_id":62883108,"body_markdown":"Eclipse has a convenient feature when you&#39;re paused in the debugger that shows an ID for every instance.  They appear to be sequential and based on when an instance was allocated:\r\n\r\n[![Example of IDs in a debugging session][1]][1] \r\n\r\nI find these extremely useful when I&#39;m digging into a substantial problem, as they&#39;re usually small integers that are a lot easier to remember than the full hash codes, or some other internal ID.  They&#39;re a very quick check for &quot;is this still the object I think it is?&quot; when you&#39;re stepping through complex and deep callstacks.\r\n\r\nAre these allocation IDs tracked by the jvm itself, or are they something Eclipse is providing through some unknown mechanism?  \r\n\r\nIs there any way to get at them from code, so that I can temporarily put them in log messages while debugging?\r\n\r\nI don&#39;t really want to add an ID field to every object, there&#39;s many good reasons why that is a Bad Idea.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/7QYhZ.png","title":"Retrieve ID of instance, like Eclipse&#39;s debugger does","body":"<p>Eclipse has a convenient feature when you're paused in the debugger that shows an ID for every instance.  They appear to be sequential and based on when an instance was allocated:</p>\n<p><a href=\"https://i.stack.imgur.com/7QYhZ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/7QYhZ.png\" alt=\"Example of IDs in a debugging session\" /></a></p>\n<p>I find these extremely useful when I'm digging into a substantial problem, as they're usually small integers that are a lot easier to remember than the full hash codes, or some other internal ID.  They're a very quick check for &quot;is this still the object I think it is?&quot; when you're stepping through complex and deep callstacks.</p>\n<p>Are these allocation IDs tracked by the jvm itself, or are they something Eclipse is providing through some unknown mechanism?</p>\n<p>Is there any way to get at them from code, so that I can temporarily put them in log messages while debugging?</p>\n<p>I don't really want to add an ID field to every object, there's many good reasons why that is a Bad Idea.</p>\n"},{"tags":["java","eclipse"],"answers":[{"tags":[],"owner":{"account_id":8414754,"reputation":1326,"user_id":6315553,"display_name":"Markus Fischer"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1481541756,"creation_date":1481541756,"answer_id":41099745,"question_id":41099332,"body_markdown":"The error message wants to say that you are accessing code that is not part of the official API for that library. More specifically, `com.sun.net.httpserver.HttpServer` is a class which is not guaranteed to be included in all Java 8 runtime implementations. Therefore, code using that class may fail in some Java installations.\r\n\r\nIn order to still be able to use this class, look into the answers to this question: [Access restriction on class due to restriction on required library rt.jar?][1].\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/860187/access-restriction-on-class-due-to-restriction-on-required-library-rt-jar?rq=1","title":"Java HttpServer Error: Access restriction: The type &#39;HttpServer&#39; is not API","body":"<p>The error message wants to say that you are accessing code that is not part of the official API for that library. More specifically, <code>com.sun.net.httpserver.HttpServer</code> is a class which is not guaranteed to be included in all Java 8 runtime implementations. Therefore, code using that class may fail in some Java installations.</p>\n\n<p>In order to still be able to use this class, look into the answers to this question: <a href=\"https://stackoverflow.com/questions/860187/access-restriction-on-class-due-to-restriction-on-required-library-rt-jar?rq=1\">Access restriction on class due to restriction on required library rt.jar?</a>.</p>\n"},{"tags":[],"owner":{"account_id":7337509,"reputation":918,"user_id":5588347,"accept_rate":20,"display_name":"StackUseR"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1481542665,"creation_date":1481542665,"answer_id":41099994,"question_id":41099332,"body_markdown":"Don&#39;t think so that you should use Sun&#39;s internal packages but still you can try disabling the error :\r\n\r\nGo to Project properties -&gt; Java Compiler -&gt; Errors/Warnings -&gt; Deprecated and restricted API\r\n\r\nAlso [this post][1] may help you.\r\n\r\nIf still the problem remains you can go with [Christian Hujer&#39;s answer][2] who says Eclipse has a mechanism called access restrictions to prevent you from accidentally using classes which Eclipse thinks are not part of the public API.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/860187/access-restriction-on-class-due-to-restriction-on-required-library-rt-jar\r\n  [2]: https://stackoverflow.com/a/29329228/5588347","title":"Java HttpServer Error: Access restriction: The type &#39;HttpServer&#39; is not API","body":"<p>Don't think so that you should use Sun's internal packages but still you can try disabling the error :</p>\n\n<p>Go to Project properties -> Java Compiler -> Errors/Warnings -> Deprecated and restricted API</p>\n\n<p>Also <a href=\"https://stackoverflow.com/questions/860187/access-restriction-on-class-due-to-restriction-on-required-library-rt-jar\">this post</a> may help you.</p>\n\n<p>If still the problem remains you can go with <a href=\"https://stackoverflow.com/a/29329228/5588347\">Christian Hujer's answer</a> who says Eclipse has a mechanism called access restrictions to prevent you from accidentally using classes which Eclipse thinks are not part of the public API.</p>\n"},{"tags":[],"owner":{"account_id":4697459,"reputation":11,"user_id":3801999,"display_name":"user3801999"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1584621747,"creation_date":1584621747,"answer_id":60757514,"question_id":41099332,"body_markdown":"Remove the JRE System Library from the build path and add it back.\r\nSelect &quot;Add Library&quot; and select the JRE System Library. The default one should work.\r\n\r\nBuildPath &gt;&gt; Libraries","title":"Java HttpServer Error: Access restriction: The type &#39;HttpServer&#39; is not API","body":"<p>Remove the JRE System Library from the build path and add it back.\nSelect \"Add Library\" and select the JRE System Library. The default one should work.</p>\n\n<p>BuildPath >> Libraries</p>\n"}],"owner":{"account_id":2780641,"reputation":1050,"user_id":2393256,"accept_rate":90,"display_name":"user2393256"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9599,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":41099745,"answer_count":3,"score":6,"last_activity_date":1702063763,"creation_date":1481540342,"question_id":41099332,"body_markdown":"I was trying to do something with the java [`HttpServer`][1] class.\r\n\r\nThis is the minimal example from the documentation:\r\n\r\n    import java.io.IOException;\r\n    import java.io.InputStream;\r\n    import java.io.OutputStream;\r\n    import java.net.InetSocketAddress;\r\n    import com.sun.net.httpserver.HttpServer;\r\n\r\n    class MyHandler implements HttpHandler \r\n    {\r\n    \tpublic void handle(HttpExchange t) throws IOException \r\n        {\r\n    \t\tInputStream is = t.getRequestBody();\r\n    \t\tread(is); // .. read the request body\r\n    \t\tString response = &quot;This is the response&quot;;\r\n    \t\tt.sendResponseHeaders(200, response.length());\r\n    \t\tOutputStream os = t.getResponseBody();\r\n    \t\tos.write(response.getBytes());\r\n    \t\tos.close();\r\n    \t}\r\n    }\r\n    \r\n    public class Main \r\n    {\r\n    \tHttpServer server = HttpServer.create(new InetSocketAddress(8000));\r\n    \tserver.createContext(&quot;/applications/myapp&quot;, new MyHandler());\r\n    \tserver.setExecutor(null); // creates a default executor\r\n    \tserver.start();\r\n    }\r\n\r\nBut i get this error message:\r\n\r\n&gt; Description\tResource\tPath\tLocation\tType\r\nAccess restriction: The type &#39;HttpServer&#39; is not API (restriction on required library &#39;/Library/Java/JavaVirtualMachines/jdk1.8.0_102.jdk/Contents/Home/jre/lib/rt.jar&#39;)\tMain.java\t/test/src/test\tline 7\tJava Problem\r\n\r\nWhat does this even mean? According to the Oracle documentation this should work. Or am i getting this wrong?\r\n\r\n  [1]: http://docs.oracle.com/javase/8/docs/jre/api/net/httpserver/spec/com/sun/net/httpserver/package-summary.html\r\n","title":"Java HttpServer Error: Access restriction: The type &#39;HttpServer&#39; is not API","body":"<p>I was trying to do something with the java <a href=\"http://docs.oracle.com/javase/8/docs/jre/api/net/httpserver/spec/com/sun/net/httpserver/package-summary.html\" rel=\"noreferrer\"><code>HttpServer</code></a> class.</p>\n\n<p>This is the minimal example from the documentation:</p>\n\n<pre><code>import java.io.IOException;\nimport java.io.InputStream;\nimport java.io.OutputStream;\nimport java.net.InetSocketAddress;\nimport com.sun.net.httpserver.HttpServer;\n\nclass MyHandler implements HttpHandler \n{\n    public void handle(HttpExchange t) throws IOException \n    {\n        InputStream is = t.getRequestBody();\n        read(is); // .. read the request body\n        String response = \"This is the response\";\n        t.sendResponseHeaders(200, response.length());\n        OutputStream os = t.getResponseBody();\n        os.write(response.getBytes());\n        os.close();\n    }\n}\n\npublic class Main \n{\n    HttpServer server = HttpServer.create(new InetSocketAddress(8000));\n    server.createContext(\"/applications/myapp\", new MyHandler());\n    server.setExecutor(null); // creates a default executor\n    server.start();\n}\n</code></pre>\n\n<p>But i get this error message:</p>\n\n<blockquote>\n  <p>Description   Resource    Path    Location    Type\n  Access restriction: The type 'HttpServer' is not API (restriction on required library '/Library/Java/JavaVirtualMachines/jdk1.8.0_102.jdk/Contents/Home/jre/lib/rt.jar')    Main.java   /test/src/test  line 7  Java Problem</p>\n</blockquote>\n\n<p>What does this even mean? According to the Oracle documentation this should work. Or am i getting this wrong?</p>\n"},{"tags":["java","spring-boot","oauth-2.0","twitch","twitch-api"],"comments":[{"owner":{"account_id":24440940,"reputation":3122,"user_id":18364656,"display_name":"Andrei Lisa"},"score":0,"creation_date":1702064837,"post_id":77628736,"comment_id":136855882,"body_markdown":"Maybe the problem is in using of client part of oAuth2.0 as resource server I think","body":"Maybe the problem is in using of client part of oAuth2.0 as resource server I think"},{"owner":{"account_id":308139,"reputation":8189,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"score":0,"creation_date":1702139460,"post_id":77628736,"comment_id":136861534,"body_markdown":"I don&#39;t see the request to Twitch API in your code. The part when you authorize these requests is missing too. As well a DEBUG logs for Spring Security.","body":"I don&#39;t see the request to Twitch API in your code. The part when you authorize these requests is missing too. As well a DEBUG logs for Spring Security."},{"owner":{"account_id":27366913,"reputation":3,"user_id":20873596,"display_name":"msdemir"},"score":0,"creation_date":1702157351,"post_id":77628736,"comment_id":136863362,"body_markdown":"I am logging in with Twitch through the default login page of Spring Security. After approving the authorization on Twitch, it redirects me back to the Spring Security login page. When I tried the same with GitHub, I could access protected endpoints seamlessly. Since Twitch works with tokens, I need to follow a different approach. However, I am unsure of the steps to take. How should I proceed?  @ch4mp","body":"I am logging in with Twitch through the default login page of Spring Security. After approving the authorization on Twitch, it redirects me back to the Spring Security login page. When I tried the same with GitHub, I could access protected endpoints seamlessly. Since Twitch works with tokens, I need to follow a different approach. However, I am unsure of the steps to take. How should I proceed?  @ch4mp"}],"owner":{"account_id":27366913,"reputation":3,"user_id":20873596,"display_name":"msdemir"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1702063351,"creation_date":1702063351,"question_id":77628736,"body_markdown":"I am using Spring Boot for OAuth2 authentication with Twitch, and I can successfully authorize my application. However, I am facing an issue where, even after successful authorization, I am unable to access protected endpoints. The authorization process seems to work correctly, but when trying to reach secured endpoints, I encounter access issues. Seeking help to troubleshoot and resolve this OAuth2 authentication problem in Spring Boot with Twitch integration.\r\n\r\napplication.properties:\r\n\r\n```\r\nspring.security.oauth2.client.registration.twitch.client-id=client_id\r\nspring.security.oauth2.client.registration.twitch.client-secret=client_secret\r\nspring.security.oauth2.client.registration.twitch.client-authentication-method=post\r\nspring.security.oauth2.client.registration.twitch.redirect-uri=http://localhost:8080/secure\r\nspring.security.oauth2.client.registration.twitch.provider=twitch\r\nspring.security.oauth2.client.registration.twitch.scope=user:read:email\r\nspring.security.oauth2.client.registration.twitch.authorization-grant-type=authorization_code\r\nspring.security.oauth2.client.provider.twitch.authorization-uri=https://id.twitch.tv/oauth2/authorize\r\nspring.security.oauth2.client.provider.twitch.token-uri=https://id.twitch.tv/oauth2/token\r\nspring.security.oauth2.client.provider.twitch.user-info-uri=https://id.twitch.tv/oauth2/userinfo\r\nspring.security.oauth2.client.provider.twitch.user-name-attribute=preferred_username\r\n```\r\n\r\nmy controller:\r\n\r\n```\r\n@RestController\r\n@RequestMapping(“/”)\r\npublic class DemoController {\r\n@GetMapping\r\npublic String getPublic(){\r\nreturn “Hello from public”;\r\n}\r\n@GetMapping(“secure”)\r\npublic String getSecure(){\r\nreturn “Hello from secure”;\r\n}\r\n}\r\n```\r\n\r\nmy configuration:\r\n\r\n```\r\n@Configuration\r\n@EnableWebSecurity\r\npublic class SecurityConfig {\r\n@Bean\r\nSecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\nreturn http\r\n.authorizeHttpRequests(auth → {\r\nauth.requestMatchers(“/”).permitAll();\r\nauth.anyRequest().authenticated();\r\n})\r\n.oauth2Login(Customizer.withDefaults())\r\n.formLogin(Customizer.withDefaults())\r\n.build();\r\n}\r\n}\r\n```\r\n\r\nmy dependencies:\r\n\r\n```\r\n&lt;dependency&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-oauth2-client&lt;/artifactId&gt;\r\n\t&lt;/dependency&gt;\r\n\t&lt;dependency&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t&lt;/dependency&gt;\r\n\t&lt;dependency&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t&lt;/dependency&gt;\r\n&lt;/dependencies&gt;\r\n```\r\n\r\n\r\nI have implemented Spring Boot OAuth2 authentication with Twitch for my application. After completing the authorization process, I expected to be able to access protected endpoints seamlessly. However, despite successful authorization, I am facing issues accessing secured endpoints. I have reviewed my implementation but haven&#39;t identified the root cause. Any guidance or suggestions on troubleshooting and resolving this issue would be greatly appreciated. Thank you","title":"Spring Boot OAuth2 Twitch Authentication Issue: Successfully Authorized, But Unable to Access Protected Endpoints","body":"<p>I am using Spring Boot for OAuth2 authentication with Twitch, and I can successfully authorize my application. However, I am facing an issue where, even after successful authorization, I am unable to access protected endpoints. The authorization process seems to work correctly, but when trying to reach secured endpoints, I encounter access issues. Seeking help to troubleshoot and resolve this OAuth2 authentication problem in Spring Boot with Twitch integration.</p>\n<p>application.properties:</p>\n<pre><code>spring.security.oauth2.client.registration.twitch.client-id=client_id\nspring.security.oauth2.client.registration.twitch.client-secret=client_secret\nspring.security.oauth2.client.registration.twitch.client-authentication-method=post\nspring.security.oauth2.client.registration.twitch.redirect-uri=http://localhost:8080/secure\nspring.security.oauth2.client.registration.twitch.provider=twitch\nspring.security.oauth2.client.registration.twitch.scope=user:read:email\nspring.security.oauth2.client.registration.twitch.authorization-grant-type=authorization_code\nspring.security.oauth2.client.provider.twitch.authorization-uri=https://id.twitch.tv/oauth2/authorize\nspring.security.oauth2.client.provider.twitch.token-uri=https://id.twitch.tv/oauth2/token\nspring.security.oauth2.client.provider.twitch.user-info-uri=https://id.twitch.tv/oauth2/userinfo\nspring.security.oauth2.client.provider.twitch.user-name-attribute=preferred_username\n</code></pre>\n<p>my controller:</p>\n<pre><code>@RestController\n@RequestMapping(“/”)\npublic class DemoController {\n@GetMapping\npublic String getPublic(){\nreturn “Hello from public”;\n}\n@GetMapping(“secure”)\npublic String getSecure(){\nreturn “Hello from secure”;\n}\n}\n</code></pre>\n<p>my configuration:</p>\n<pre><code>@Configuration\n@EnableWebSecurity\npublic class SecurityConfig {\n@Bean\nSecurityFilterChain filterChain(HttpSecurity http) throws Exception {\nreturn http\n.authorizeHttpRequests(auth → {\nauth.requestMatchers(“/”).permitAll();\nauth.anyRequest().authenticated();\n})\n.oauth2Login(Customizer.withDefaults())\n.formLogin(Customizer.withDefaults())\n.build();\n}\n}\n</code></pre>\n<p>my dependencies:</p>\n<pre><code>&lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-oauth2-client&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n</code></pre>\n<p>I have implemented Spring Boot OAuth2 authentication with Twitch for my application. After completing the authorization process, I expected to be able to access protected endpoints seamlessly. However, despite successful authorization, I am facing issues accessing secured endpoints. I have reviewed my implementation but haven't identified the root cause. Any guidance or suggestions on troubleshooting and resolving this issue would be greatly appreciated. Thank you</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":265649,"reputation":53086,"user_id":552759,"display_name":"jtahlborn"},"score":3,"creation_date":1702052189,"post_id":77627857,"comment_id":136854059,"body_markdown":"you are just going to have to cast the result and use the appropriate SuppressWarnings.","body":"you are just going to have to cast the result and use the appropriate SuppressWarnings."},{"owner":{"account_id":195854,"reputation":159194,"user_id":438992,"accept_rate":90,"display_name":"Dave Newton"},"score":5,"creation_date":1702052200,"post_id":77627857,"comment_id":136854067,"body_markdown":"*Completely unrelated: I appreciate the correct usage of apostrophes.*","body":"<i>Completely unrelated: I appreciate the correct usage of apostrophes.</i>"},{"owner":{"account_id":3211603,"reputation":289287,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1702055657,"post_id":77627857,"comment_id":136854615,"body_markdown":"Is your problem description related to the code you’ve posted? I see an unchecked cast to `List&lt;Type&gt;` in this code but since there’s also the expression `Arrays.&lt;Type&gt;asList(new org.web3j.abi.datatypes.generated.Uint256(_purpose))`, it’s impossible that `Type` is `byte[]`, as that would imply that `new org.web3j.abi.datatypes.generated.Uint256(_purpose)` is assignable to `byte[]`.","body":"Is your problem description related to the code you’ve posted? I see an unchecked cast to <code>List&lt;Type&gt;</code> in this code but since there’s also the expression <code>Arrays.&lt;Type&gt;asList(new org.web3j.abi.datatypes.generated.Uint256(_purpose))</code>, it’s impossible that <code>Type</code> is <code>byte[]</code>, as that would imply that <code>new org.web3j.abi.datatypes.generated.Uint256(_purpose)</code> is assignable to <code>byte[]</code>."},{"owner":{"account_id":25699967,"reputation":41,"user_id":19460147,"display_name":"Andr&#225;s Ballai"},"score":0,"creation_date":1702151260,"post_id":77627857,"comment_id":136862725,"body_markdown":"@Holger The code you highlighted isn&#39;t the return value, of `getKeyByPurpose`, that comes from the call to `convertToNative` which takes in `new TypeReference&lt;DynamicArray&lt;Bytes32&gt;&gt;` and results in a `byte[]`","body":"@Holger The code you highlighted isn&#39;t the return value, of <code>getKeyByPurpose</code>, that comes from the call to <code>convertToNative</code> which takes in <code>new TypeReference&lt;DynamicArray&lt;Bytes32&gt;&gt;</code> and results in a <code>byte[]</code>"}],"answers":[{"tags":[],"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1702063295,"creation_date":1702063295,"answer_id":77628731,"question_id":77627857,"body_markdown":"It’s possible to handle this without any `SuppressWarnings` annotations:\r\n\r\n    List&lt;?&gt; keys = (List&lt;?&gt;) getKeysByPurpose(purpose).send();\r\n\r\n    for (Object key : keys) {\r\n        byte[] keyBytes = (byte[]) key;\r\n        // ...\r\n    }\r\n","title":"Neatly dealing with unparameterized List?","body":"<p>It’s possible to handle this without any <code>SuppressWarnings</code> annotations:</p>\n<pre><code>List&lt;?&gt; keys = (List&lt;?&gt;) getKeysByPurpose(purpose).send();\n\nfor (Object key : keys) {\n    byte[] keyBytes = (byte[]) key;\n    // ...\n}\n</code></pre>\n"}],"owner":{"account_id":25699967,"reputation":41,"user_id":19460147,"display_name":"Andr&#225;s Ballai"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":2,"is_answered":true,"view_count":59,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":77628731,"answer_count":1,"score":0,"last_activity_date":1702063295,"creation_date":1702051654,"question_id":77627857,"body_markdown":"I&#39;m working on a project using Web3j&#39;s code generator, which creates the following code:\r\n```\r\npublic RemoteFunctionCall&lt;List&gt; getKeysByPurpose(BigInteger _purpose) {\r\n        final Function function = new Function(FUNC_GETKEYSBYPURPOSE, \r\n                Arrays.&lt;Type&gt;asList(new org.web3j.abi.datatypes.generated.Uint256(_purpose)), \r\n                Arrays.&lt;TypeReference&lt;?&gt;&gt;asList(new TypeReference&lt;DynamicArray&lt;Bytes32&gt;&gt;() {}));\r\n        return new RemoteFunctionCall&lt;List&gt;(function,\r\n                new Callable&lt;List&gt;() {\r\n                    @Override\r\n                    @SuppressWarnings(&quot;unchecked&quot;)\r\n                    public List call() throws Exception {\r\n                        List&lt;Type&gt; result = (List&lt;Type&gt;) executeCallSingleValueReturn(function, List.class);\r\n                        return convertToNative(result);\r\n                    }\r\n                });\r\n    }\r\n```  \r\n  \r\nIt&#39;s a bit of a mess, but since it&#39;s generated I can&#39;t alter it. The list it returns is unparameterized, but I do know its type (and it&#39;s `byte[]`). Is there a neat way of handling this return value in my own code, where I&#39;ll need to rely on its contents&#39; actual type, or should I just suppress the warnings?","title":"Neatly dealing with unparameterized List?","body":"<p>I'm working on a project using Web3j's code generator, which creates the following code:</p>\n<pre><code>public RemoteFunctionCall&lt;List&gt; getKeysByPurpose(BigInteger _purpose) {\n        final Function function = new Function(FUNC_GETKEYSBYPURPOSE, \n                Arrays.&lt;Type&gt;asList(new org.web3j.abi.datatypes.generated.Uint256(_purpose)), \n                Arrays.&lt;TypeReference&lt;?&gt;&gt;asList(new TypeReference&lt;DynamicArray&lt;Bytes32&gt;&gt;() {}));\n        return new RemoteFunctionCall&lt;List&gt;(function,\n                new Callable&lt;List&gt;() {\n                    @Override\n                    @SuppressWarnings(&quot;unchecked&quot;)\n                    public List call() throws Exception {\n                        List&lt;Type&gt; result = (List&lt;Type&gt;) executeCallSingleValueReturn(function, List.class);\n                        return convertToNative(result);\n                    }\n                });\n    }\n</code></pre>\n<p>It's a bit of a mess, but since it's generated I can't alter it. The list it returns is unparameterized, but I do know its type (and it's <code>byte[]</code>). Is there a neat way of handling this return value in my own code, where I'll need to rely on its contents' actual type, or should I just suppress the warnings?</p>\n"},{"tags":["java","android","service","android-service"],"owner":{"account_id":15484833,"reputation":27,"user_id":14518481,"display_name":"Elegancia"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":25,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"closed_date":1702065796,"answer_count":0,"score":-1,"last_activity_date":1702061720,"creation_date":1702061720,"question_id":77628636,"body_markdown":"My android app read text and perform some actions based on the analysis of that text.\r\nSo far, the architecture was basically the following.\r\nI had in the MainActivity two buttons that would either start one service or another.\r\nThe two services would be:\r\n\r\n```\r\nSingleLineService\r\n\r\nMultipleLinesService\r\n```\r\n\r\nSo, basically the user would chose beforehand the kind of service he wants to start.\r\nSingleLineService would read only the first line of a text (in case has multiple lines) and get the result.\r\nMultipleLinesService would read them all and get the result.\r\n\r\nWhat I thought is: instead of letting the user manually decide which service to start, I could start the most appropriate service depending on how many lines are detected from the text received.\r\n\r\nAnd after this thought I am thinking if this approach of having two different services could be improved with maybe one service?\r\nBecause if I keep two distinct services I would need to continuously start and stop the services since, even though it wouldn&#39;t do any harm, wouldn&#39;t make much sense to have two services active at the same time. So I would need to stop SingleLineService and start MultipleLinesService when multiple lines are detected and stop MultipleLinesService and start SingleLineService when one line is detected.\r\n\r\nThis approach in terms of code readability was great since I was separating two different tasks in two different services. But what about performance? It&#39;s also better this way or it&#39;s worse compared to put everything inside one single service?","title":"Which one of these architectures for android services would be preferable for performance?","body":"<p>My android app read text and perform some actions based on the analysis of that text.\nSo far, the architecture was basically the following.\nI had in the MainActivity two buttons that would either start one service or another.\nThe two services would be:</p>\n<pre><code>SingleLineService\n\nMultipleLinesService\n</code></pre>\n<p>So, basically the user would chose beforehand the kind of service he wants to start.\nSingleLineService would read only the first line of a text (in case has multiple lines) and get the result.\nMultipleLinesService would read them all and get the result.</p>\n<p>What I thought is: instead of letting the user manually decide which service to start, I could start the most appropriate service depending on how many lines are detected from the text received.</p>\n<p>And after this thought I am thinking if this approach of having two different services could be improved with maybe one service?\nBecause if I keep two distinct services I would need to continuously start and stop the services since, even though it wouldn't do any harm, wouldn't make much sense to have two services active at the same time. So I would need to stop SingleLineService and start MultipleLinesService when multiple lines are detected and stop MultipleLinesService and start SingleLineService when one line is detected.</p>\n<p>This approach in terms of code readability was great since I was separating two different tasks in two different services. But what about performance? It's also better this way or it's worse compared to put everything inside one single service?</p>\n"},{"tags":["java","intellij-idea","evaluate"],"owner":{"account_id":30090428,"reputation":1,"user_id":23060014,"display_name":"pctheone"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":9,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1702061694,"creation_date":1702061694,"question_id":77628635,"body_markdown":"I am using the evaluate window to test some expressions but when I execute it, the result is concatenated with the previous result, is there a way to clean it? \r\n\r\nI tryed to close and open IDE but it always happens. Can someone help me?\r\n\r\n\r\n`contract.append(formatedData.substring(8));`\r\n\r\nThe result is past consults concatenated with actual:\r\n\r\n`01214401210121012108.15.44.4208.15.44.4208.15.44.4208.15.44.42`","title":"How to clear Evaluate result on IntelliJ IDE","body":"<p>I am using the evaluate window to test some expressions but when I execute it, the result is concatenated with the previous result, is there a way to clean it?</p>\n<p>I tryed to close and open IDE but it always happens. Can someone help me?</p>\n<p><code>contract.append(formatedData.substring(8));</code></p>\n<p>The result is past consults concatenated with actual:</p>\n<p><code>01214401210121012108.15.44.4208.15.44.4208.15.44.4208.15.44.42</code></p>\n"},{"tags":["java","spring-boot","session","redis","okta"],"answers":[{"tags":[],"owner":{"account_id":25486283,"reputation":41,"user_id":19281826,"display_name":"yaroslav96"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1702061632,"creation_date":1702061632,"answer_id":77628632,"question_id":77628529,"body_markdown":"Fixed by changing session name:\r\n\r\n    server:\r\n      servlet:\r\n        session:\r\n          cookie:\r\n            name: MYSESSION","title":"Spring Okta callback Set-Cookie SESSION twice","body":"<p>Fixed by changing session name:</p>\n<pre><code>server:\n  servlet:\n    session:\n      cookie:\n        name: MYSESSION\n</code></pre>\n"}],"owner":{"account_id":25486283,"reputation":41,"user_id":19281826,"display_name":"yaroslav96"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":19,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1702061632,"creation_date":1702060085,"question_id":77628529,"body_markdown":"We use Okta for user authentication and authorization. As known, during the authorization process, two sessions are created—one on the Okta side and the other on the app side. Accordingly, if a regular JSESSION ID is used, which is set in cookies during the /callback method call from Okta, all subsequent requests to the backend app will include this header, and the user can be authenticated.\r\n\r\nHowever, we have decided to use Redis for session storage. Now, the /callback from Okta somehow sets 2 SESSIONs, with one of them being empty and appearing like this:\r\n\r\n    SESSION=; Path=/; Max-Age=0; Expires=Thu, 01 Jan 1970 00:00:00 GMT; HttpOnly; SameSite=Lax\r\nAs a result, the subsequent requests do not have this ID in the cookies, and the user cannot be resolved. Has anyone encountered a similar issue?","title":"Spring Okta callback Set-Cookie SESSION twice","body":"<p>We use Okta for user authentication and authorization. As known, during the authorization process, two sessions are created—one on the Okta side and the other on the app side. Accordingly, if a regular JSESSION ID is used, which is set in cookies during the /callback method call from Okta, all subsequent requests to the backend app will include this header, and the user can be authenticated.</p>\n<p>However, we have decided to use Redis for session storage. Now, the /callback from Okta somehow sets 2 SESSIONs, with one of them being empty and appearing like this:</p>\n<pre><code>SESSION=; Path=/; Max-Age=0; Expires=Thu, 01 Jan 1970 00:00:00 GMT; HttpOnly; SameSite=Lax\n</code></pre>\n<p>As a result, the subsequent requests do not have this ID in the cookies, and the user cannot be resolved. Has anyone encountered a similar issue?</p>\n"},{"tags":["java","maven","google-java-format","spotless"],"comments":[{"owner":{"account_id":15305026,"reputation":90,"user_id":11042089,"display_name":"Jonathan Putney"},"score":0,"creation_date":1649953903,"post_id":71339562,"comment_id":127010176,"body_markdown":"Did you ever figure this out? Running into the same issue right now.","body":"Did you ever figure this out? Running into the same issue right now."},{"owner":{"account_id":3675005,"reputation":941,"user_id":3061292,"accept_rate":57,"display_name":"mpssantos"},"score":0,"creation_date":1651177394,"post_id":71339562,"comment_id":127308608,"body_markdown":"we decided to use spotless + google format only (while a small change using 4 spaces indentation instead of 2). On the top of this we created a git hook (pre-commit) which always apply the format before the commit to all the modified files, stage them and them commits. Applying the format is completely transparent :)","body":"we decided to use spotless + google format only (while a small change using 4 spaces indentation instead of 2). On the top of this we created a git hook (pre-commit) which always apply the format before the commit to all the modified files, stage them and them commits. Applying the format is completely transparent :)"}],"answers":[{"tags":[],"owner":{"account_id":18603794,"reputation":1,"user_id":13557954,"display_name":"Murilo C. Cumerlatto"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1702060926,"creation_date":1702060779,"answer_id":77628572,"question_id":71339562,"body_markdown":"From documentation to fix the annotations problems:\r\n\r\n```\r\n&lt;!-- fixes formatting of type annotations, see below --&gt;\r\n&lt;formatAnnotations /&gt;\r\n```\r\n","title":"Spotless + Java Google format vs Intellij + import file","body":"<p>From documentation to fix the annotations problems:</p>\n<pre><code>&lt;!-- fixes formatting of type annotations, see below --&gt;\n&lt;formatAnnotations /&gt;\n</code></pre>\n"}],"owner":{"account_id":3675005,"reputation":941,"user_id":3061292,"accept_rate":57,"display_name":"mpssantos"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":5651,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"answer_count":1,"score":8,"last_activity_date":1702060926,"creation_date":1646320827,"question_id":71339562,"body_markdown":"I am trying to configure a maven spring boot application to use spotless with google java format style. I would like as well to have Intellij formatting the code as the maven plugin does. \r\n\r\nBut i am noticing that the formmat applied differ a little bit.\r\n\r\nOne example:\r\nIntellij will not change the following 2 lines\r\n```\r\n@Mock \r\nprivate UserRepository userRepositoryMock;\r\n```\r\nBut the maven plugin (using the command: mvn spotless:apply) will format like this:\r\n\r\n```\r\n@Mock private UserRepository userRepositoryMock;\r\n```\r\n\r\n**POM CONFIG**\r\n```\r\n&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;com.diffplug.spotless&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spotless-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;${spotless.version}&lt;/version&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;!-- optional: limit format enforcement to just the files changed by this feature branch --&gt;\r\n\t\t\t\t\t&lt;ratchetFrom&gt;origin/master&lt;/ratchetFrom&gt;\r\n\t\t\t\t\t&lt;formats&gt;\r\n\t\t\t\t\t\t&lt;!-- you can define as many formats as you want, each is independent --&gt;\r\n\t\t\t\t\t\t&lt;format&gt;\r\n\t\t\t\t\t\t\t&lt;!-- define the files to apply to --&gt;\r\n\t\t\t\t\t\t\t&lt;includes&gt;\r\n\t\t\t\t\t\t\t\t&lt;include&gt;*.md&lt;/include&gt;\r\n\t\t\t\t\t\t\t\t&lt;include&gt;.gitignore&lt;/include&gt;\r\n\t\t\t\t\t\t\t&lt;/includes&gt;\r\n\t\t\t\t\t\t\t&lt;!-- define the steps to apply to those files --&gt;\r\n\t\t\t\t\t\t\t&lt;trimTrailingWhitespace/&gt;\r\n\t\t\t\t\t\t\t&lt;endWithNewline/&gt;\r\n\t\t\t\t\t\t\t&lt;indent&gt;\r\n\t\t\t\t\t\t\t\t&lt;spaces&gt;true&lt;/spaces&gt;\r\n\t\t\t\t\t\t\t\t&lt;spacesPerTab&gt;4&lt;/spacesPerTab&gt;\r\n\t\t\t\t\t\t\t&lt;/indent&gt;\r\n\t\t\t\t\t\t&lt;/format&gt;\r\n\t\t\t\t\t&lt;/formats&gt;\r\n\t\t\t\t\t&lt;!-- define a language-specific format --&gt;\r\n\t\t\t\t\t&lt;java&gt;\r\n\t\t\t\t\t\t&lt;!-- no need to specify files, inferred automatically, but you can if you want --&gt;\r\n\t\t\t\t\t\t&lt;importOrder&gt;  &lt;!-- or a custom ordering --&gt;\r\n\t\t\t\t\t\t\t&lt;order&gt;java,javax,org,com,microservices.book.multiplication,\r\n\t\t\t\t\t\t\t&lt;/order&gt;  &lt;!-- or use &lt;file&gt;${project.basedir}/eclipse.importorder&lt;/file&gt; --&gt;\r\n\t\t\t\t\t\t\t&lt;!-- you can use an empty string for all the imports you didn&#39;t specify explicitly, and &#39;\\\\#` prefix for static imports --&gt;\r\n\t\t\t\t\t\t&lt;/importOrder&gt;\r\n\r\n\t\t\t\t\t\t&lt;removeUnusedImports/&gt; &lt;!-- self-explanatory --&gt;\r\n\r\n\t\t\t\t\t\t&lt;!-- apply a specific flavor of google-java-format and reflow long strings --&gt;\r\n\r\n\t\t\t\t\t\t&lt;googleJavaFormat&gt;\r\n\t\t\t\t\t\t\t&lt;version&gt;1.14.0&lt;/version&gt;\r\n\t\t\t\t\t\t\t&lt;style&gt;GOOGLE&lt;/style&gt;\r\n\t\t\t\t\t\t\t&lt;reflowLongStrings&gt;true&lt;/reflowLongStrings&gt;\r\n\t\t\t\t\t\t&lt;/googleJavaFormat&gt;\r\n\t\t\t\t\t\t&lt;indent&gt;\r\n\t\t\t\t\t\t\t&lt;tabs&gt;true&lt;/tabs&gt;\r\n\t\t\t\t\t\t\t&lt;spacesPerTab&gt;2&lt;/spacesPerTab&gt;\r\n\t\t\t\t\t\t&lt;/indent&gt;\r\n\t\t\t\t\t\t&lt;indent&gt;\r\n\t\t\t\t\t\t\t&lt;spaces&gt;true&lt;/spaces&gt;\r\n\t\t\t\t\t\t\t&lt;spacesPerTab&gt;4&lt;/spacesPerTab&gt;\r\n\t\t\t\t\t\t&lt;/indent&gt;\r\n\t\t\t\t\t&lt;/java&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n```\r\n\r\n**On Intellij**\r\nI added the the following code stile from google\r\n\r\n**Github site**\r\nhttps://github.com/google/google-java-format\r\n\r\n**IntelliJ Java Google Style file**\r\nhttps://raw.githubusercontent.com/google/styleguide/gh-pages/intellij-java-google-style.xml\r\n\r\n[![Intellij code style window][1]][1]\r\n\r\nWhy the differences? What else may differ? How can I have Intellij formatting the code exactly as the google java code style format xml file?\r\n\r\nThank you so much for your help in advance\r\n\r\nRegards\r\n\r\n  [1]: https://i.stack.imgur.com/Sqc0v.png","title":"Spotless + Java Google format vs Intellij + import file","body":"<p>I am trying to configure a maven spring boot application to use spotless with google java format style. I would like as well to have Intellij formatting the code as the maven plugin does.</p>\n<p>But i am noticing that the formmat applied differ a little bit.</p>\n<p>One example:\nIntellij will not change the following 2 lines</p>\n<pre><code>@Mock \nprivate UserRepository userRepositoryMock;\n</code></pre>\n<p>But the maven plugin (using the command: mvn spotless:apply) will format like this:</p>\n<pre><code>@Mock private UserRepository userRepositoryMock;\n</code></pre>\n<p><strong>POM CONFIG</strong></p>\n<pre><code>&lt;plugin&gt;\n                &lt;groupId&gt;com.diffplug.spotless&lt;/groupId&gt;\n                &lt;artifactId&gt;spotless-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;${spotless.version}&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;!-- optional: limit format enforcement to just the files changed by this feature branch --&gt;\n                    &lt;ratchetFrom&gt;origin/master&lt;/ratchetFrom&gt;\n                    &lt;formats&gt;\n                        &lt;!-- you can define as many formats as you want, each is independent --&gt;\n                        &lt;format&gt;\n                            &lt;!-- define the files to apply to --&gt;\n                            &lt;includes&gt;\n                                &lt;include&gt;*.md&lt;/include&gt;\n                                &lt;include&gt;.gitignore&lt;/include&gt;\n                            &lt;/includes&gt;\n                            &lt;!-- define the steps to apply to those files --&gt;\n                            &lt;trimTrailingWhitespace/&gt;\n                            &lt;endWithNewline/&gt;\n                            &lt;indent&gt;\n                                &lt;spaces&gt;true&lt;/spaces&gt;\n                                &lt;spacesPerTab&gt;4&lt;/spacesPerTab&gt;\n                            &lt;/indent&gt;\n                        &lt;/format&gt;\n                    &lt;/formats&gt;\n                    &lt;!-- define a language-specific format --&gt;\n                    &lt;java&gt;\n                        &lt;!-- no need to specify files, inferred automatically, but you can if you want --&gt;\n                        &lt;importOrder&gt;  &lt;!-- or a custom ordering --&gt;\n                            &lt;order&gt;java,javax,org,com,microservices.book.multiplication,\n                            &lt;/order&gt;  &lt;!-- or use &lt;file&gt;${project.basedir}/eclipse.importorder&lt;/file&gt; --&gt;\n                            &lt;!-- you can use an empty string for all the imports you didn't specify explicitly, and '\\\\#` prefix for static imports --&gt;\n                        &lt;/importOrder&gt;\n\n                        &lt;removeUnusedImports/&gt; &lt;!-- self-explanatory --&gt;\n\n                        &lt;!-- apply a specific flavor of google-java-format and reflow long strings --&gt;\n\n                        &lt;googleJavaFormat&gt;\n                            &lt;version&gt;1.14.0&lt;/version&gt;\n                            &lt;style&gt;GOOGLE&lt;/style&gt;\n                            &lt;reflowLongStrings&gt;true&lt;/reflowLongStrings&gt;\n                        &lt;/googleJavaFormat&gt;\n                        &lt;indent&gt;\n                            &lt;tabs&gt;true&lt;/tabs&gt;\n                            &lt;spacesPerTab&gt;2&lt;/spacesPerTab&gt;\n                        &lt;/indent&gt;\n                        &lt;indent&gt;\n                            &lt;spaces&gt;true&lt;/spaces&gt;\n                            &lt;spacesPerTab&gt;4&lt;/spacesPerTab&gt;\n                        &lt;/indent&gt;\n                    &lt;/java&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n</code></pre>\n<p><strong>On Intellij</strong>\nI added the the following code stile from google</p>\n<p><strong>Github site</strong>\n<a href=\"https://github.com/google/google-java-format\" rel=\"noreferrer\">https://github.com/google/google-java-format</a></p>\n<p><strong>IntelliJ Java Google Style file</strong>\n<a href=\"https://raw.githubusercontent.com/google/styleguide/gh-pages/intellij-java-google-style.xml\" rel=\"noreferrer\">https://raw.githubusercontent.com/google/styleguide/gh-pages/intellij-java-google-style.xml</a></p>\n<p><a href=\"https://i.stack.imgur.com/Sqc0v.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/Sqc0v.png\" alt=\"Intellij code style window\" /></a></p>\n<p>Why the differences? What else may differ? How can I have Intellij formatting the code exactly as the google java code style format xml file?</p>\n<p>Thank you so much for your help in advance</p>\n<p>Regards</p>\n"},{"tags":["java","string","permutation"],"comments":[{"owner":{"account_id":7607254,"reputation":2491,"user_id":5769497,"display_name":"Sanket Makani"},"score":0,"creation_date":1492340519,"post_id":43436450,"comment_id":73930053,"body_markdown":"Does order of resultant `ArrayList` matters?","body":"Does order of resultant <code>ArrayList</code> matters?"},{"owner":{"account_id":10697751,"reputation":1,"user_id":7874226,"display_name":"D. Ronald"},"score":0,"creation_date":1492340604,"post_id":43436450,"comment_id":73930080,"body_markdown":"Yes...output should be exactly as the expected result.","body":"Yes...output should be exactly as the expected result."},{"owner":{"account_id":7607254,"reputation":2491,"user_id":5769497,"display_name":"Sanket Makani"},"score":0,"creation_date":1492340695,"post_id":43436450,"comment_id":73930101,"body_markdown":"Oh Okay. I can code a snippet which gives all permutation but order won&#39;t be same as you mentioned.!","body":"Oh Okay. I can code a snippet which gives all permutation but order won&#39;t be same as you mentioned.!"},{"owner":{"account_id":2006972,"reputation":43172,"user_id":1796579,"display_name":"Henry"},"score":0,"creation_date":1492340808,"post_id":43436450,"comment_id":73930129,"body_markdown":"To be technically correct, only the last 6 values (abc, acb, bac, bca, cab, cba) are permutations of the original string. The others are permutations of a subset.","body":"To be technically correct, only the last 6 values (abc, acb, bac, bca, cab, cba) are permutations of the original string. The others are permutations of a subset."},{"owner":{"account_id":7607254,"reputation":2491,"user_id":5769497,"display_name":"Sanket Makani"},"score":0,"creation_date":1492341093,"post_id":43436450,"comment_id":73930203,"body_markdown":"@Henry , Yup the thing I figured out is `First of all here you need to find all possible subsets of the string and then for each subset, you need to find its all possible permutaions.`","body":"@Henry , Yup the thing I figured out is <code>First of all here you need to find all possible subsets of the string and then for each subset, you need to find its all possible permutaions.</code>"},{"owner":{"account_id":1291795,"reputation":24641,"user_id":1243762,"accept_rate":95,"display_name":"Guy Coder"},"score":0,"creation_date":1492343378,"post_id":43436450,"comment_id":73930772,"body_markdown":"Of interest: [Permutation Generation Methods](http://homepage.divms.uiowa.edu/~goodman/22m150.dir/2007/Permutation%20Generation%20Methods.pdf) by Robert Sedgewick","body":"Of interest: <a href=\"http://homepage.divms.uiowa.edu/~goodman/22m150.dir/2007/Permutation%20Generation%20Methods.pdf\" rel=\"nofollow noreferrer\">Permutation Generation Methods</a> by Robert Sedgewick"},{"owner":{"account_id":1291795,"reputation":24641,"user_id":1243762,"accept_rate":95,"display_name":"Guy Coder"},"score":0,"creation_date":1492343637,"post_id":43436450,"comment_id":73930846,"body_markdown":"I take that this is a homework assignment. I find it odd that it ask `optimize the code for efficiency of speed and memory` typically code is optimized for one or the other. While it might not be apparent for a small set of input with three values, when you get to 10 values it really matters as the number of permutations are based on [factorial](https://en.wikipedia.org/wiki/Factorial) (!).","body":"I take that this is a homework assignment. I find it odd that it ask <code>optimize the code for efficiency of speed and memory</code> typically code is optimized for one or the other. While it might not be apparent for a small set of input with three values, when you get to 10 values it really matters as the number of permutations are based on <a href=\"https://en.wikipedia.org/wiki/Factorial\" rel=\"nofollow noreferrer\">factorial</a> (!)."}],"answers":[{"tags":[],"owner":{"account_id":8675941,"reputation":438,"user_id":6493369,"display_name":"Poorvi Nigotiya"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1492403740,"creation_date":1492356161,"answer_id":43438771,"question_id":43436450,"body_markdown":"Adding another answer with generic algorithm. This will give all permutations in the order mentioned. Hope this solve purpose\r\n\r\n    public class Test {\r\n\r\n    public static void main(String[] args) {\r\n\r\n        String s = &quot;abc&quot;;\r\n\r\n        Map&lt;Integer, List&lt;String&gt;&gt; map = new HashMap&lt;&gt;();\r\n\r\n        List&lt;String&gt; strArray = new ArrayList&lt;String&gt;(Arrays.asList(s.split(&quot;&quot;)));\r\n        map.put(1, strArray);\r\n\r\n        if (strArray.size() &gt; 1) {\r\n            new Test().enumerateSubString(strArray.size(), map);\r\n        }\r\n        System.out.println(map.values());\r\n    }\r\n\r\n    public void enumerateSubString(int n, Map&lt;Integer, List&lt;String&gt;&gt; map) {\r\n\r\n        if (!map.containsKey(n)) {\r\n            map.put(n, new ArrayList&lt;&gt;());\r\n        }\r\n\r\n        if (n == 2) {\r\n            // List of string with each having 1 character\r\n            List&lt;String&gt; list_1 = map.get(1);\r\n            // List of string which each having 2 characters\r\n            List&lt;String&gt; list_2 = new ArrayList&lt;&gt;();\r\n            for (int i = 0; i &lt; list_1.size(); i++) {\r\n                for (int j = i + 1; j &lt; list_1.size(); j++) {\r\n                    list_2.add(list_1.get(i) + list_1.get(j));\r\n                    list_2.add(swap(list_1.get(i) + list_1.get(j)));\r\n                }\r\n            }\r\n            // Map list_2 to key 2\r\n            map.put(n, list_2);\r\n        } else {\r\n            // Recursive function\r\n            enumerateSubString(n - 1, map);\r\n            // List of string with each having n-1 characters\r\n            List&lt;String&gt; list = map.get(n - 1);\r\n            // List of string with each having n characters\r\n            List&lt;String&gt; list_n = map.get(n);\r\n            // Add each character to list of n-1 to get n charater string list\r\n            for (String l1 : map.get(1)) {\r\n                for (String l : list) {\r\n                    // this condition is to avoid repetation of charaters n\r\n                    // String\r\n                    if (l.indexOf(l1) &lt; 0) {\r\n                        list_n.add(l1 + l);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    // Function to swap characters\r\n    private String swap(String str) {\r\n        String s1 = str.substring(1) + str.substring(0, 1);\r\n        return s1;\r\n    }}\r\n\r\n","title":"Permutations of a String and its Sub-Strings using ArrayList in Java","body":"<p>Adding another answer with generic algorithm. This will give all permutations in the order mentioned. Hope this solve purpose</p>\n\n<pre><code>public class Test {\n\npublic static void main(String[] args) {\n\n    String s = \"abc\";\n\n    Map&lt;Integer, List&lt;String&gt;&gt; map = new HashMap&lt;&gt;();\n\n    List&lt;String&gt; strArray = new ArrayList&lt;String&gt;(Arrays.asList(s.split(\"\")));\n    map.put(1, strArray);\n\n    if (strArray.size() &gt; 1) {\n        new Test().enumerateSubString(strArray.size(), map);\n    }\n    System.out.println(map.values());\n}\n\npublic void enumerateSubString(int n, Map&lt;Integer, List&lt;String&gt;&gt; map) {\n\n    if (!map.containsKey(n)) {\n        map.put(n, new ArrayList&lt;&gt;());\n    }\n\n    if (n == 2) {\n        // List of string with each having 1 character\n        List&lt;String&gt; list_1 = map.get(1);\n        // List of string which each having 2 characters\n        List&lt;String&gt; list_2 = new ArrayList&lt;&gt;();\n        for (int i = 0; i &lt; list_1.size(); i++) {\n            for (int j = i + 1; j &lt; list_1.size(); j++) {\n                list_2.add(list_1.get(i) + list_1.get(j));\n                list_2.add(swap(list_1.get(i) + list_1.get(j)));\n            }\n        }\n        // Map list_2 to key 2\n        map.put(n, list_2);\n    } else {\n        // Recursive function\n        enumerateSubString(n - 1, map);\n        // List of string with each having n-1 characters\n        List&lt;String&gt; list = map.get(n - 1);\n        // List of string with each having n characters\n        List&lt;String&gt; list_n = map.get(n);\n        // Add each character to list of n-1 to get n charater string list\n        for (String l1 : map.get(1)) {\n            for (String l : list) {\n                // this condition is to avoid repetation of charaters n\n                // String\n                if (l.indexOf(l1) &lt; 0) {\n                    list_n.add(l1 + l);\n                }\n            }\n        }\n    }\n}\n\n// Function to swap characters\nprivate String swap(String str) {\n    String s1 = str.substring(1) + str.substring(0, 1);\n    return s1;\n}}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11879840,"reputation":1,"user_id":8693830,"display_name":"Shashank Shukla"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1702060431,"creation_date":1702060431,"answer_id":77628553,"question_id":43436450,"body_markdown":"    public static void main(String args[]) {\r\n    \r\n        String word = &quot;abc&quot;;\r\n        // ,acb,bac,bca,cab,cba\r\n        int n = word.length();\r\n    \r\n        combination(word, &quot;&quot;);\r\n        System.out.println(list.stream().collect(Collectors.toList()));\r\n    }\r\n    \r\n    private static void combination(String str, String ans) {\r\n        if (str.length() &gt;= 0) {\r\n            if (!ans.isEmpty()) {\r\n                list.add(ans);\r\n            }\r\n        }\r\n    \r\n        for (int i=0; i&lt;str.length(); i++) {\r\n    \r\n        \r\n    \r\n    char ch=str.charAt(i);\r\n            String remaining =str.substring(0,i)+str.substring(i+1);\r\n            combination(remaining, ans + ch);\r\n        }\r\n    }","title":"Permutations of a String and its Sub-Strings using ArrayList in Java","body":"<pre><code>public static void main(String args[]) {\n\n    String word = &quot;abc&quot;;\n    // ,acb,bac,bca,cab,cba\n    int n = word.length();\n\n    combination(word, &quot;&quot;);\n    System.out.println(list.stream().collect(Collectors.toList()));\n}\n\nprivate static void combination(String str, String ans) {\n    if (str.length() &gt;= 0) {\n        if (!ans.isEmpty()) {\n            list.add(ans);\n        }\n    }\n\n    for (int i=0; i&lt;str.length(); i++) {\n\n    \n\nchar ch=str.charAt(i);\n        String remaining =str.substring(0,i)+str.substring(i+1);\n        combination(remaining, ans + ch);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":10697751,"reputation":1,"user_id":7874226,"display_name":"D. Ronald"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1407,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1702060431,"creation_date":1492340101,"question_id":43436450,"body_markdown":"I&#39;ve been asked to write a program to find the permutations of a String and its Sub-Strings using an ArrayList. I came up with a solution, but it is not displaying the required output. So, I would appreciate if someone could enlighten me a bit on this.\r\n\r\nThe question is as follows: \r\n\r\n&gt;To compute all permutations of a string and it&#39;s sub-strings. For example, given a string S such as &quot;abc&quot;, it should output a list/array of strings retlist [a, b, c, ab, ba, ac, ca, bc, cb, abc, acb, bac, bca, cab, cba]. Your code should take S as input, and produce retlist for the permuted list. On top of having a code that works, please optimize the code for efficiency of speed and memory (we will be testing for large strings and the faster it goes, the better).\r\n\r\nAs said in the question, when permutating a string of &quot;abc&quot;, it should print a result as below:\r\n\r\n&gt;[a, b, c, ab, ba, ac, ca, bc, cb, abc, acb, bac, bca, cab, cba]\r\n\r\nWhat I came up with so far:\r\n\r\n    import java.util.ArrayList;\r\n    import java.util.List;\r\n    \r\n    public class Permutation {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tenumerateSubString(&quot;abc&quot;);\r\n    \t}\r\n    \r\n    \tpublic static List&lt;String&gt; enumerateSubString(String S_input) {\r\n    \t\tArrayList&lt;String&gt; retlist = new ArrayList&lt;String&gt;();\r\n    \r\n    \t\tint n = S_input.length();\r\n    \r\n    \t\tif (n == 1) {\r\n    \t\t\tretlist.add(S_input);\r\n    \t\t} else {\r\n    \t\t\tfor (int i = 0; i &lt; n; i++) {\r\n    \t\t\t\tretlist.addAll(enumerateSubString(S_input.substring(0, i) + S_input.substring(i + 1, n)));\r\n    \t\t\t}\r\n    \t\t}\r\n    \r\n    \t\tSystem.out.print(retlist);\r\n    \t\treturn retlist;\r\n    \t}\r\n    }\r\n\r\nAnd the result that I am getting right now with the above code:\r\n\r\n&gt;[c][b][c, b][c][a][c, a][b][a][b, a][c, b, c, a, b, a]\r\n\r\n\r\nThanks","title":"Permutations of a String and its Sub-Strings using ArrayList in Java","body":"<p>I've been asked to write a program to find the permutations of a String and its Sub-Strings using an ArrayList. I came up with a solution, but it is not displaying the required output. So, I would appreciate if someone could enlighten me a bit on this.</p>\n\n<p>The question is as follows: </p>\n\n<blockquote>\n  <p>To compute all permutations of a string and it's sub-strings. For example, given a string S such as \"abc\", it should output a list/array of strings retlist [a, b, c, ab, ba, ac, ca, bc, cb, abc, acb, bac, bca, cab, cba]. Your code should take S as input, and produce retlist for the permuted list. On top of having a code that works, please optimize the code for efficiency of speed and memory (we will be testing for large strings and the faster it goes, the better).</p>\n</blockquote>\n\n<p>As said in the question, when permutating a string of \"abc\", it should print a result as below:</p>\n\n<blockquote>\n  <p>[a, b, c, ab, ba, ac, ca, bc, cb, abc, acb, bac, bca, cab, cba]</p>\n</blockquote>\n\n<p>What I came up with so far:</p>\n\n<pre><code>import java.util.ArrayList;\nimport java.util.List;\n\npublic class Permutation {\n\n    public static void main(String[] args) {\n        enumerateSubString(\"abc\");\n    }\n\n    public static List&lt;String&gt; enumerateSubString(String S_input) {\n        ArrayList&lt;String&gt; retlist = new ArrayList&lt;String&gt;();\n\n        int n = S_input.length();\n\n        if (n == 1) {\n            retlist.add(S_input);\n        } else {\n            for (int i = 0; i &lt; n; i++) {\n                retlist.addAll(enumerateSubString(S_input.substring(0, i) + S_input.substring(i + 1, n)));\n            }\n        }\n\n        System.out.print(retlist);\n        return retlist;\n    }\n}\n</code></pre>\n\n<p>And the result that I am getting right now with the above code:</p>\n\n<blockquote>\n  <p>[c][b][c, b][c][a][c, a][b][a][b, a][c, b, c, a, b, a]</p>\n</blockquote>\n\n<p>Thanks</p>\n"},{"tags":["java","spring","mockito","azureservicebus"],"comments":[{"owner":{"account_id":1713236,"reputation":22836,"user_id":1570854,"accept_rate":71,"display_name":"Lesiak"},"score":0,"creation_date":1702060125,"post_id":77628237,"comment_id":136855248,"body_markdown":"Mockito version?","body":"Mockito version?"}],"answers":[{"tags":[],"owner":{"account_id":1713236,"reputation":22836,"user_id":1570854,"accept_rate":71,"display_name":"Lesiak"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1702060338,"creation_date":1702060338,"answer_id":77628546,"question_id":77628237,"body_markdown":"[Mocking final types, enums and final methods (Since 2.1.0)](https://javadoc.io/doc/org.mockito/mockito-core/latest/org/mockito/Mockito.html#Mocking_Final)\r\n\r\n&gt; Mockito now offers support for mocking final classes and methods by default. This is a fantastic improvement that demonstrates Mockito&#39;s everlasting quest for improving testing experience. Our ambition is that Mockito &quot;just works&quot; with final classes and methods. Previously they were considered *unmockable*, preventing the user from mocking. Since 5.0.0, this feature is enabled by default.\r\nThis alternative mock maker which uses a combination of both Java instrumentation API and sub-classing rather than creating a new class to represent a mock. This way, it becomes possible to mock final types and methods.\r\n&gt;\r\n&gt; In versions preceding 5.0.0, this mock maker is **turned off by default** because it is based on completely different mocking mechanism that required more feedback from the community. It can be activated explicitly by the mockito extension mechanism, just create in the classpath a file `/mockito-extensions/org.mockito.plugins.MockMaker` containing the value `mock-maker-inline`.\r\n&gt;\r\n&gt; As a convenience, the Mockito team provides an artifact where this mock maker is preconfigured. Instead of using the *mockito-core* artifact, include the *mockito-inline* artifact in your project. Note that this artifact is likely to be discontinued once mocking of final classes and methods gets integrated into the default mock maker.","title":"How to mock ServiceBusReceiverAsyncClient for unit testing?","body":"<p><a href=\"https://javadoc.io/doc/org.mockito/mockito-core/latest/org/mockito/Mockito.html#Mocking_Final\" rel=\"nofollow noreferrer\">Mocking final types, enums and final methods (Since 2.1.0)</a></p>\n<blockquote>\n<p>Mockito now offers support for mocking final classes and methods by default. This is a fantastic improvement that demonstrates Mockito's everlasting quest for improving testing experience. Our ambition is that Mockito &quot;just works&quot; with final classes and methods. Previously they were considered <em>unmockable</em>, preventing the user from mocking. Since 5.0.0, this feature is enabled by default.\nThis alternative mock maker which uses a combination of both Java instrumentation API and sub-classing rather than creating a new class to represent a mock. This way, it becomes possible to mock final types and methods.</p>\n<p>In versions preceding 5.0.0, this mock maker is <strong>turned off by default</strong> because it is based on completely different mocking mechanism that required more feedback from the community. It can be activated explicitly by the mockito extension mechanism, just create in the classpath a file <code>/mockito-extensions/org.mockito.plugins.MockMaker</code> containing the value <code>mock-maker-inline</code>.</p>\n<p>As a convenience, the Mockito team provides an artifact where this mock maker is preconfigured. Instead of using the <em>mockito-core</em> artifact, include the <em>mockito-inline</em> artifact in your project. Note that this artifact is likely to be discontinued once mocking of final classes and methods gets integrated into the default mock maker.</p>\n</blockquote>\n"}],"owner":{"account_id":7123505,"reputation":249,"user_id":5447261,"accept_rate":83,"display_name":"Matheus Weber"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":15,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1702060338,"creation_date":1702056323,"question_id":77628237,"body_markdown":"Using Java and SpringBoot, I am trying to create a unit test for a method that uses a ServiceBusReceiverAsyncClient, but Mockito is not able to create the Mock because the class is a final class.\r\n\r\n    @Mock\r\n    private ServiceBusReceiverFactory factory;\r\n\r\n    @Test\r\n    void test() {\r\n        ServiceBusReceiverAsyncClient mockedReceiver = Mockito.mock(ServiceBusReceiverAsyncClient.class)\r\n        when(this.factory.getClient()).thenReturn(mockedReceiver);\r\n     \r\n        consumer.listen(ack);\r\n        //calls the ServiceBusReceiverAsyncClient.receivedMessages() that calls ack.\r\n\r\n        verify(ack, atLeastOnce().success());\r\n       \r\n\r\n    }","title":"How to mock ServiceBusReceiverAsyncClient for unit testing?","body":"<p>Using Java and SpringBoot, I am trying to create a unit test for a method that uses a ServiceBusReceiverAsyncClient, but Mockito is not able to create the Mock because the class is a final class.</p>\n<pre><code>@Mock\nprivate ServiceBusReceiverFactory factory;\n\n@Test\nvoid test() {\n    ServiceBusReceiverAsyncClient mockedReceiver = Mockito.mock(ServiceBusReceiverAsyncClient.class)\n    when(this.factory.getClient()).thenReturn(mockedReceiver);\n \n    consumer.listen(ack);\n    //calls the ServiceBusReceiverAsyncClient.receivedMessages() that calls ack.\n\n    verify(ack, atLeastOnce().success());\n   \n\n}\n</code></pre>\n"},{"tags":["java","modularity"],"comments":[{"owner":{"account_id":247613,"reputation":284087,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":2,"creation_date":1702059912,"post_id":77628500,"comment_id":136855216,"body_markdown":"Please check out [What is a debugger and how can it help me diagnose problems?](https://stackoverflow.com/q/25385173/)  and [How to debug small programs](https://ericlippert.com/2014/03/05/how-to-debug-small-programs/). The links won&#39;t solve your direct problem, but they will give you steps that you can follow that should help you solve it yourself, or even if that is not successful, then at least help you to better isolate your problem so that your question can be more focused and easier to answer.","body":"Please check out <a href=\"https://stackoverflow.com/q/25385173/\">What is a debugger and how can it help me diagnose problems?</a>  and <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to debug small programs</a>. The links won&#39;t solve your direct problem, but they will give you steps that you can follow that should help you solve it yourself, or even if that is not successful, then at least help you to better isolate your problem so that your question can be more focused and easier to answer."},{"owner":{"account_id":247613,"reputation":284087,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":1,"creation_date":1702059983,"post_id":77628500,"comment_id":136855226,"body_markdown":"Also, consider using variables and constants with English names and also creating and posting a [mre] with your question (or future questions), as these are easier for us to understand and help debug, although *your* debugging should be done first, and the results of your debugging efforts should be shown in your question, for bet results.","body":"Also, consider using variables and constants with English names and also creating and posting a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> with your question (or future questions), as these are easier for us to understand and help debug, although <i>your</i> debugging should be done first, and the results of your debugging efforts should be shown in your question, for bet results."},{"owner":{"account_id":247613,"reputation":284087,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":0,"creation_date":1702060693,"post_id":77628500,"comment_id":136855340,"body_markdown":"Also, please comment back to me if you do decide to post a valid [mre] code post with your question. If anything in the link is unclear or confusing, please feel free to comment back with your questions. A decent MRE is worth its weight in gold, and I think that I speak for all in saying that we&#39;ll gladly help you with your construction of this in any way that we can.","body":"Also, please comment back to me if you do decide to post a valid <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> code post with your question. If anything in the link is unclear or confusing, please feel free to comment back with your questions. A decent MRE is worth its weight in gold, and I think that I speak for all in saying that we&#39;ll gladly help you with your construction of this in any way that we can."}],"owner":{"account_id":25374902,"reputation":1,"user_id":20025580,"display_name":"Tailosrx"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"closed_date":1702059888,"answer_count":0,"score":-2,"last_activity_date":1702060307,"creation_date":1702059565,"question_id":77628500,"body_markdown":"I&#39;m developing a combat game in Java for homework, and recently, I encountered an issue with the enemy&#39;s health.\r\nFor instance, when my fighter and the enemy attacks, theoretically, the health of both should decrease. However, i&#39;ve noticed that only the health of the fighter is decreasing\r\n\r\nThe program is created by 7 files but this is the code of the Combat, if is necessary i can show the other files.\r\n\r\n```\r\n\r\n/*\r\n * Click nbfs://nbhost/SystemFileSystem/Templates/Licenses/license-default.txt to change this license\r\n * Click nbfs://nbhost/SystemFileSystem/Templates/Classes/Class.java to edit this template\r\n */\r\npackage juegocombate_kevin_reglas;\r\n\r\nimport static juegocombate_kevin_reglas.Luchador.VIDA;\r\nimport static juegocombate_kevin_reglas.Luchador.VIDA_MAX;\r\n\r\n/**\r\n * Combat class that handles different combat strategies and their resolution.\r\n * Author: kevin\r\n */\r\npublic class Combate {\r\n\r\n    // Constants indicating possible combat actions\r\n    public static final int ATTACK = 0;\r\n    public static final int DEFENSE = 1;\r\n    public static final int DECEPTION = 2;\r\n    public static final int MANEUVER = 3;\r\n    public final static int ATTACK_MAX = 6;\r\n    public final static int DEFENSE_MAX = 8;\r\n    public static int rounds_p = 0;\r\n\r\n    /**\r\n     * Converts a combat action to its corresponding text representation.\r\n     * @param action The combat action\r\n     * @return Text representation of the action\r\n     */\r\n    public String actionToText(int action) {\r\n        switch (action) {\r\n            case ATTACK:\r\n                return &quot;ATTACK&quot;;\r\n            case DEFENSE:\r\n                return &quot;DEFENSE&quot;;\r\n            case DECEPTION:\r\n                return &quot;DECEPTION&quot;;\r\n            case MANEUVER:\r\n                return &quot;MANEUVER&quot;;\r\n        }\r\n        return &quot;UNKNOWN&quot;;\r\n    }\r\n\r\n    /**\r\n     * Calculates the success grade for a given fighter and action.\r\n     * @param fighter The fighter&#39;s data\r\n     * @param action The combat action\r\n     * @return The success grade\r\n     */\r\n    public int calculateSuccessGrade(int[] fighter, int action) {\r\n      \r\n        int success = 0;\r\n\r\n        switch (action) {\r\n            case ATTACK:\r\n                success = fighter[ATTACK];\r\n                break;\r\n            case DEFENSE:\r\n                success = fighter[DEFENSE];\r\n                break;\r\n            case DECEPTION:\r\n                success = fighter[DECEPTION];\r\n                break;\r\n            case MANEUVER:\r\n                success = fighter[MANEUVER];\r\n                break;\r\n        }\r\n\r\n        success = Math.max(0, Math.min(100, success));\r\n        return success;\r\n\r\n    }\r\n\r\n    /**\r\n     * Resolves combat strategies for both the player and the adversary.\r\n     * @param player The player&#39;s data\r\n     * @param playerAction The player&#39;s chosen action\r\n     * @param adversary The adversary&#39;s data\r\n     * @param adversaryAction The adversary&#39;s chosen action\r\n     */\r\n    public void resolveStrategies(int[] player, int playerAction, int[] adversary, int adversaryAction) {\r\n        int playerSuccess = calculateSuccessGrade(player, playerAction);\r\n        int adversarySuccess = calculateSuccessGrade(adversary, adversaryAction);\r\n        \r\n\r\n        switch (playerAction) {\r\n            case ATTACK:\r\n                switch (adversaryAction) {\r\n                    case ATTACK:\r\n                        player[VIDA] -= adversarySuccess;\r\n                        adversary[VIDA] -= playerSuccess;\r\n                        break;\r\n                    case DEFENSE:\r\n                        adversary[VIDA] = Math.min(adversary[VIDA] + adversarySuccess, adversary[VIDA_MAX]);\r\n                        player[VIDA] -= adversarySuccess;\r\n                        break;\r\n                    case DECEPTION:\r\n                        adversary[VIDA] -= playerSuccess;\r\n                        break;\r\n                    case MANEUVER:\r\n                        adversary[VIDA] -= playerSuccess;\r\n                        break;\r\n                }\r\n                break;\r\n            case DEFENSE:\r\n                switch (adversaryAction) {\r\n                    case ATTACK:\r\n                        player[VIDA] += Math.min(playerSuccess, player[VIDA_MAX] - player[VIDA]);\r\n                        break;\r\n                    case DEFENSE:\r\n                        player[VIDA] += Math.min(player[VIDA] + playerSuccess, player[VIDA_MAX]);\r\n                        adversary[VIDA] = Math.min(adversary[VIDA] + adversarySuccess, adversary[VIDA_MAX]);\r\n                        break;\r\n                    case DECEPTION:\r\n                        player[VIDA] -= 2 * adversarySuccess;\r\n                        break;\r\n                    case MANEUVER:\r\n                        player[VIDA] -= adversarySuccess;\r\n                        applyPenalty(player);\r\n                        break;\r\n                    // Add other cases as needed\r\n                }\r\n                break;\r\n\r\n        }\r\n\r\n    }\r\n\r\n    /**\r\n     * Applies a penalty to the player&#39;s attack and defense attributes.\r\n     * @param player The player&#39;s data\r\n     */\r\n    public void applyPenalty(int[] player) {\r\n        if (rounds_p &gt; 0) {\r\n            player[ATTACK] = Math.max(player[ATTACK] - 1, 1);\r\n            player[DEFENSE] = Math.max(player[DEFENSE] - 1, 1);\r\n            rounds_p--;\r\n\r\n            if (rounds_p == 0) {\r\n                // Restore original values\r\n                player[ATTACK] = player[ATTACK_MAX];\r\n                player[DEFENSE] = player[DEFENSE_MAX];\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n}\r\n```","title":"Issue with decreasing enemy health in a Java combat game","body":"<p>I'm developing a combat game in Java for homework, and recently, I encountered an issue with the enemy's health.\nFor instance, when my fighter and the enemy attacks, theoretically, the health of both should decrease. However, i've noticed that only the health of the fighter is decreasing</p>\n<p>The program is created by 7 files but this is the code of the Combat, if is necessary i can show the other files.</p>\n<pre><code>\n/*\n * Click nbfs://nbhost/SystemFileSystem/Templates/Licenses/license-default.txt to change this license\n * Click nbfs://nbhost/SystemFileSystem/Templates/Classes/Class.java to edit this template\n */\npackage juegocombate_kevin_reglas;\n\nimport static juegocombate_kevin_reglas.Luchador.VIDA;\nimport static juegocombate_kevin_reglas.Luchador.VIDA_MAX;\n\n/**\n * Combat class that handles different combat strategies and their resolution.\n * Author: kevin\n */\npublic class Combate {\n\n    // Constants indicating possible combat actions\n    public static final int ATTACK = 0;\n    public static final int DEFENSE = 1;\n    public static final int DECEPTION = 2;\n    public static final int MANEUVER = 3;\n    public final static int ATTACK_MAX = 6;\n    public final static int DEFENSE_MAX = 8;\n    public static int rounds_p = 0;\n\n    /**\n     * Converts a combat action to its corresponding text representation.\n     * @param action The combat action\n     * @return Text representation of the action\n     */\n    public String actionToText(int action) {\n        switch (action) {\n            case ATTACK:\n                return &quot;ATTACK&quot;;\n            case DEFENSE:\n                return &quot;DEFENSE&quot;;\n            case DECEPTION:\n                return &quot;DECEPTION&quot;;\n            case MANEUVER:\n                return &quot;MANEUVER&quot;;\n        }\n        return &quot;UNKNOWN&quot;;\n    }\n\n    /**\n     * Calculates the success grade for a given fighter and action.\n     * @param fighter The fighter's data\n     * @param action The combat action\n     * @return The success grade\n     */\n    public int calculateSuccessGrade(int[] fighter, int action) {\n      \n        int success = 0;\n\n        switch (action) {\n            case ATTACK:\n                success = fighter[ATTACK];\n                break;\n            case DEFENSE:\n                success = fighter[DEFENSE];\n                break;\n            case DECEPTION:\n                success = fighter[DECEPTION];\n                break;\n            case MANEUVER:\n                success = fighter[MANEUVER];\n                break;\n        }\n\n        success = Math.max(0, Math.min(100, success));\n        return success;\n\n    }\n\n    /**\n     * Resolves combat strategies for both the player and the adversary.\n     * @param player The player's data\n     * @param playerAction The player's chosen action\n     * @param adversary The adversary's data\n     * @param adversaryAction The adversary's chosen action\n     */\n    public void resolveStrategies(int[] player, int playerAction, int[] adversary, int adversaryAction) {\n        int playerSuccess = calculateSuccessGrade(player, playerAction);\n        int adversarySuccess = calculateSuccessGrade(adversary, adversaryAction);\n        \n\n        switch (playerAction) {\n            case ATTACK:\n                switch (adversaryAction) {\n                    case ATTACK:\n                        player[VIDA] -= adversarySuccess;\n                        adversary[VIDA] -= playerSuccess;\n                        break;\n                    case DEFENSE:\n                        adversary[VIDA] = Math.min(adversary[VIDA] + adversarySuccess, adversary[VIDA_MAX]);\n                        player[VIDA] -= adversarySuccess;\n                        break;\n                    case DECEPTION:\n                        adversary[VIDA] -= playerSuccess;\n                        break;\n                    case MANEUVER:\n                        adversary[VIDA] -= playerSuccess;\n                        break;\n                }\n                break;\n            case DEFENSE:\n                switch (adversaryAction) {\n                    case ATTACK:\n                        player[VIDA] += Math.min(playerSuccess, player[VIDA_MAX] - player[VIDA]);\n                        break;\n                    case DEFENSE:\n                        player[VIDA] += Math.min(player[VIDA] + playerSuccess, player[VIDA_MAX]);\n                        adversary[VIDA] = Math.min(adversary[VIDA] + adversarySuccess, adversary[VIDA_MAX]);\n                        break;\n                    case DECEPTION:\n                        player[VIDA] -= 2 * adversarySuccess;\n                        break;\n                    case MANEUVER:\n                        player[VIDA] -= adversarySuccess;\n                        applyPenalty(player);\n                        break;\n                    // Add other cases as needed\n                }\n                break;\n\n        }\n\n    }\n\n    /**\n     * Applies a penalty to the player's attack and defense attributes.\n     * @param player The player's data\n     */\n    public void applyPenalty(int[] player) {\n        if (rounds_p &gt; 0) {\n            player[ATTACK] = Math.max(player[ATTACK] - 1, 1);\n            player[DEFENSE] = Math.max(player[DEFENSE] - 1, 1);\n            rounds_p--;\n\n            if (rounds_p == 0) {\n                // Restore original values\n                player[ATTACK] = player[ATTACK_MAX];\n                player[DEFENSE] = player[DEFENSE_MAX];\n            }\n        }\n\n    }\n\n}\n</code></pre>\n"},{"tags":["java","groovy","jmeter","base64","performance-testing"],"comments":[{"owner":{"account_id":11683,"reputation":1438111,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":2,"creation_date":1702059311,"post_id":77628475,"comment_id":136855140,"body_markdown":"You don&#39;t use base64 to *encode* a string - you use it to *encode* binary data *as* a string; you would *decode* a string to get back a byte array... but the string &quot;a7d4&quot; would *not* end up as the byte array [a7, b4] - that would be hex, not base64. At the moment your question is *very* unclear, and it&#39;s not clear how much of that is due to not understanding the purpose of base64.","body":"You don&#39;t use base64 to <i>encode</i> a string - you use it to <i>encode</i> binary data <i>as</i> a string; you would <i>decode</i> a string to get back a byte array... but the string &quot;a7d4&quot; would <i>not</i> end up as the byte array [a7, b4] - that would be hex, not base64. At the moment your question is <i>very</i> unclear, and it&#39;s not clear how much of that is due to not understanding the purpose of base64."},{"owner":{"account_id":9760,"reputation":85859,"user_id":18157,"accept_rate":100,"display_name":"Jim Garrison"},"score":0,"creation_date":1702059634,"post_id":77628475,"comment_id":136855189,"body_markdown":"Sounds like the OP wants to convert binary data represented as hex, back into binary.","body":"Sounds like the OP wants to convert binary data represented as hex, back into binary."},{"owner":{"account_id":18652297,"reputation":17,"user_id":13595487,"display_name":"Михаил Воробьев"},"score":0,"creation_date":1702060088,"post_id":77628475,"comment_id":136855241,"body_markdown":"Apparently, i need a way to transform String &quot;a7d4&quot; to a byte array [a7, d4] (HEX) and then encode this data to base64. But I still don&#39;t know how to transform string to such byte array","body":"Apparently, i need a way to transform String &quot;a7d4&quot; to a byte array [a7, d4] (HEX) and then encode this data to base64. But I still don&#39;t know how to transform string to such byte array"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1702061809,"post_id":77628475,"comment_id":136855460,"body_markdown":"`String s = &quot;a7d4&quot;;byte[] a = Arrays.copyOfRange(new BigInteger(s, 16).toByteArray(), 1, s.length()-1); `","body":"<code>String s = &quot;a7d4&quot;;byte[] a = Arrays.copyOfRange(new BigInteger(s, 16).toByteArray(), 1, s.length()-1); </code>"}],"owner":{"account_id":18652297,"reputation":17,"user_id":13595487,"display_name":"Михаил Воробьев"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"closed_date":1702059326,"answer_count":0,"score":-2,"last_activity_date":1702060079,"creation_date":1702059209,"question_id":77628475,"body_markdown":"I have a string &quot;a7d4&quot; and need to encode it to base64 as a byte array [a7, b4] in Apache Jmeter test-plan. Function ${__base64Encode(&quot;a7b4&quot;,)} encode result String.getBytes() (in this case, 61376434). How can fix it, preferably without import any additional libraries to my calsspath?\r\n\r\nApparently, i need a way to transform String &quot;a7d4&quot; to a byte array [a7, d4] (HEX) and then encode this data to base64. But I still don&#39;t know how to transform string to such byte array","title":"How to encode a string to base64 as byte array in Jmeter?","body":"<p>I have a string &quot;a7d4&quot; and need to encode it to base64 as a byte array [a7, b4] in Apache Jmeter test-plan. Function ${__base64Encode(&quot;a7b4&quot;,)} encode result String.getBytes() (in this case, 61376434). How can fix it, preferably without import any additional libraries to my calsspath?</p>\n<p>Apparently, i need a way to transform String &quot;a7d4&quot; to a byte array [a7, d4] (HEX) and then encode this data to base64. But I still don't know how to transform string to such byte array</p>\n"},{"tags":["java","android","database","android-room"],"answers":[{"tags":[],"owner":{"account_id":1444847,"reputation":9859,"user_id":1363731,"accept_rate":100,"display_name":"mikejonesguy"},"down_vote_count":0,"up_vote_count":589,"is_accepted":false,"score":589,"last_activity_date":1611104988,"creation_date":1496882645,"answer_id":44424908,"question_id":44322178,"body_markdown":"In the `build.gradle` file for your app module, add this to the `defaultConfig` section (under the `android` section). This will write out the schema to a `schemas` subfolder of your project folder.\r\n\r\n\tjavaCompileOptions {\r\n\t\tannotationProcessorOptions {\r\n\t\t\targuments += [&quot;room.schemaLocation&quot;: &quot;$projectDir/schemas&quot;.toString()]\r\n\t\t}\r\n\t}\r\n\r\nLike this:\r\n\r\n    // ...\r\n\r\n    android {\r\n    \t\r\n    \t// ... (compileSdkVersion, buildToolsVersion, etc)\r\n    \r\n        defaultConfig {\r\n    \r\n            // ... (applicationId, miSdkVersion, etc)\r\n            \r\n            javaCompileOptions {\r\n                annotationProcessorOptions {\r\n                    arguments += [&quot;room.schemaLocation&quot;: &quot;$projectDir/schemas&quot;.toString()]\r\n                }\r\n            }\r\n        }\r\n       \r\n        // ... (buildTypes, compileOptions, etc)\r\n\r\n    }\r\n\r\n    // ...","title":"Room - Schema export directory is not provided to the annotation processor so we cannot export the schema","body":"<p>In the <code>build.gradle</code> file for your app module, add this to the <code>defaultConfig</code> section (under the <code>android</code> section). This will write out the schema to a <code>schemas</code> subfolder of your project folder.</p>\n<pre><code>javaCompileOptions {\n    annotationProcessorOptions {\n        arguments += [&quot;room.schemaLocation&quot;: &quot;$projectDir/schemas&quot;.toString()]\n    }\n}\n</code></pre>\n<p>Like this:</p>\n<pre><code>// ...\n\nandroid {\n    \n    // ... (compileSdkVersion, buildToolsVersion, etc)\n\n    defaultConfig {\n\n        // ... (applicationId, miSdkVersion, etc)\n        \n        javaCompileOptions {\n            annotationProcessorOptions {\n                arguments += [&quot;room.schemaLocation&quot;: &quot;$projectDir/schemas&quot;.toString()]\n            }\n        }\n    }\n   \n    // ... (buildTypes, compileOptions, etc)\n\n}\n\n// ...\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2644499,"reputation":8041,"user_id":6505084,"accept_rate":14,"display_name":"DoruChidean"},"down_vote_count":0,"up_vote_count":545,"is_accepted":true,"score":545,"last_activity_date":1698995613,"creation_date":1497941916,"answer_id":44645943,"question_id":44322178,"body_markdown":"As per the [docs][1]:\r\n\r\n&gt; You can set annotation processor argument (room.schemaLocation) to tell Room to export the schema into a folder. Even though it is not mandatory, it is a good practice to have version history in your codebase and you should commit that file into your version control system (but don&#39;t ship it with your app!).\r\n\r\nSo if you don&#39;t need to check the schema and you want to get rid of the warning, just add `exportSchema = false` to your `RoomDatabase`, as follows.\r\n\r\n    @Database(entities = { YourEntity.class }, version = 1, exportSchema = false)\r\n    public abstract class AppDatabase extends RoomDatabase {\r\n       //...\r\n    }\r\n\r\n\r\nIf you follow @mikejonesguy [answer][2] below, you will follow the good practice mentioned in the docs.\r\nBasically you will get a `.json` file in your `../app/schemas/` folder, which looks something like this:\r\n\r\n&lt;!-- language: json --&gt;\r\n\r\n    {\r\n      &quot;formatVersion&quot;: 1,\r\n      &quot;database&quot;: {\r\n        &quot;version&quot;: 1,\r\n        &quot;identityHash&quot;: &quot;53db508c5248423325bd5393a1c88c03&quot;,\r\n        &quot;entities&quot;: [\r\n          {\r\n            &quot;tableName&quot;: &quot;sms_table&quot;,\r\n            &quot;createSql&quot;: &quot;CREATE TABLE IF NOT EXISTS `${TABLE_NAME}` (`id` INTEGER PRIMARY KEY AUTOINCREMENT, `message` TEXT, `date` INTEGER, `client_id` INTEGER)&quot;,\r\n            &quot;fields&quot;: [\r\n              {\r\n                &quot;fieldPath&quot;: &quot;id&quot;,\r\n                &quot;columnName&quot;: &quot;id&quot;,\r\n                &quot;affinity&quot;: &quot;INTEGER&quot;\r\n              },\r\n              {\r\n                &quot;fieldPath&quot;: &quot;message&quot;,\r\n                &quot;columnName&quot;: &quot;message&quot;,\r\n                &quot;affinity&quot;: &quot;TEXT&quot;\r\n              },\r\n              {\r\n                &quot;fieldPath&quot;: &quot;date&quot;,\r\n                &quot;columnName&quot;: &quot;date&quot;,\r\n                &quot;affinity&quot;: &quot;INTEGER&quot;\r\n              },\r\n              {\r\n                &quot;fieldPath&quot;: &quot;clientId&quot;,\r\n                &quot;columnName&quot;: &quot;client_id&quot;,\r\n                &quot;affinity&quot;: &quot;INTEGER&quot;\r\n              }\r\n            ],\r\n            &quot;primaryKey&quot;: {\r\n              &quot;columnNames&quot;: [\r\n                &quot;id&quot;\r\n              ],\r\n              &quot;autoGenerate&quot;: true\r\n            },\r\n            &quot;indices&quot;: [],\r\n            &quot;foreignKeys&quot;: []\r\n          }\r\n        ],\r\n        &quot;setupQueries&quot;: [\r\n          &quot;CREATE TABLE IF NOT EXISTS room_master_table (id INTEGER PRIMARY KEY,identity_hash TEXT)&quot;,\r\n          &quot;INSERT OR REPLACE INTO room_master_table (id,identity_hash) VALUES(42, \\&quot;53db508c5248423325bd5393a1c88c03\\&quot;)&quot;\r\n        ]\r\n      }\r\n    }\r\n\r\nIf my understanding is correct, you will get such a file with every database version update, so that you can easily follow the history of your db.\r\n\r\n\r\n  [1]: https://developer.android.com/reference/android/arch/persistence/room/Database.html#exportSchema()\r\n  [2]: https://stackoverflow.com/a/44424908/1363731","title":"Room - Schema export directory is not provided to the annotation processor so we cannot export the schema","body":"<p>As per the <a href=\"https://developer.android.com/reference/android/arch/persistence/room/Database.html#exportSchema()\" rel=\"nofollow noreferrer\">docs</a>:</p>\n<blockquote>\n<p>You can set annotation processor argument (room.schemaLocation) to tell Room to export the schema into a folder. Even though it is not mandatory, it is a good practice to have version history in your codebase and you should commit that file into your version control system (but don't ship it with your app!).</p>\n</blockquote>\n<p>So if you don't need to check the schema and you want to get rid of the warning, just add <code>exportSchema = false</code> to your <code>RoomDatabase</code>, as follows.</p>\n<pre><code>@Database(entities = { YourEntity.class }, version = 1, exportSchema = false)\npublic abstract class AppDatabase extends RoomDatabase {\n   //...\n}\n</code></pre>\n<p>If you follow @mikejonesguy <a href=\"https://stackoverflow.com/a/44424908/1363731\">answer</a> below, you will follow the good practice mentioned in the docs.\nBasically you will get a <code>.json</code> file in your <code>../app/schemas/</code> folder, which looks something like this:</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;formatVersion&quot;: 1,\n  &quot;database&quot;: {\n    &quot;version&quot;: 1,\n    &quot;identityHash&quot;: &quot;53db508c5248423325bd5393a1c88c03&quot;,\n    &quot;entities&quot;: [\n      {\n        &quot;tableName&quot;: &quot;sms_table&quot;,\n        &quot;createSql&quot;: &quot;CREATE TABLE IF NOT EXISTS `${TABLE_NAME}` (`id` INTEGER PRIMARY KEY AUTOINCREMENT, `message` TEXT, `date` INTEGER, `client_id` INTEGER)&quot;,\n        &quot;fields&quot;: [\n          {\n            &quot;fieldPath&quot;: &quot;id&quot;,\n            &quot;columnName&quot;: &quot;id&quot;,\n            &quot;affinity&quot;: &quot;INTEGER&quot;\n          },\n          {\n            &quot;fieldPath&quot;: &quot;message&quot;,\n            &quot;columnName&quot;: &quot;message&quot;,\n            &quot;affinity&quot;: &quot;TEXT&quot;\n          },\n          {\n            &quot;fieldPath&quot;: &quot;date&quot;,\n            &quot;columnName&quot;: &quot;date&quot;,\n            &quot;affinity&quot;: &quot;INTEGER&quot;\n          },\n          {\n            &quot;fieldPath&quot;: &quot;clientId&quot;,\n            &quot;columnName&quot;: &quot;client_id&quot;,\n            &quot;affinity&quot;: &quot;INTEGER&quot;\n          }\n        ],\n        &quot;primaryKey&quot;: {\n          &quot;columnNames&quot;: [\n            &quot;id&quot;\n          ],\n          &quot;autoGenerate&quot;: true\n        },\n        &quot;indices&quot;: [],\n        &quot;foreignKeys&quot;: []\n      }\n    ],\n    &quot;setupQueries&quot;: [\n      &quot;CREATE TABLE IF NOT EXISTS room_master_table (id INTEGER PRIMARY KEY,identity_hash TEXT)&quot;,\n      &quot;INSERT OR REPLACE INTO room_master_table (id,identity_hash) VALUES(42, \\&quot;53db508c5248423325bd5393a1c88c03\\&quot;)&quot;\n    ]\n  }\n}\n</code></pre>\n<p>If my understanding is correct, you will get such a file with every database version update, so that you can easily follow the history of your db.</p>\n"},{"tags":[],"owner":{"account_id":4331441,"reputation":3510,"user_id":3536857,"display_name":"Ivanov Maksim"},"down_vote_count":1,"up_vote_count":339,"is_accepted":false,"score":338,"last_activity_date":1584901567,"creation_date":1518042188,"answer_id":48674264,"question_id":44322178,"body_markdown":"Kotlin? Here we go: \r\n\r\n    android {\r\n\r\n        // ... (compileSdkVersion, buildToolsVersion, etc)\r\n\r\n        defaultConfig {\r\n\r\n            // ... (applicationId, miSdkVersion, etc)\r\n\r\n            kapt {\r\n        \t    arguments {\r\n        \t\t    arg(&quot;room.schemaLocation&quot;, &quot;$projectDir/schemas&quot;)\r\n        \t    }\r\n            }\r\n        }\r\n\r\n        buildTypes {\r\n            // ... (buildTypes, compileOptions, etc)\r\n        }\r\n    }\r\n\r\n    //...\r\n\r\n\r\nDon&#39;t forget about plugin: \r\n\r\n`apply plugin: &#39;kotlin-kapt&#39;`\r\n\r\nFor more information about kotlin annotation processor please visit: \r\n[Kotlin docs][1]\r\n\r\n\r\n  [1]: http://kotlinlang.org/docs/reference/kapt.html","title":"Room - Schema export directory is not provided to the annotation processor so we cannot export the schema","body":"<p>Kotlin? Here we go: </p>\n\n<pre><code>android {\n\n    // ... (compileSdkVersion, buildToolsVersion, etc)\n\n    defaultConfig {\n\n        // ... (applicationId, miSdkVersion, etc)\n\n        kapt {\n            arguments {\n                arg(\"room.schemaLocation\", \"$projectDir/schemas\")\n            }\n        }\n    }\n\n    buildTypes {\n        // ... (buildTypes, compileOptions, etc)\n    }\n}\n\n//...\n</code></pre>\n\n<p>Don't forget about plugin: </p>\n\n<p><code>apply plugin: 'kotlin-kapt'</code></p>\n\n<p>For more information about kotlin annotation processor please visit: \n<a href=\"http://kotlinlang.org/docs/reference/kapt.html\" rel=\"noreferrer\">Kotlin docs</a></p>\n"},{"tags":[],"owner":{"account_id":5435375,"reputation":7470,"user_id":4325011,"accept_rate":75,"display_name":"chebaby"},"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1541151912,"creation_date":1541151912,"answer_id":53116123,"question_id":44322178,"body_markdown":"@mikejonesguy [answer][1] is perfect, just in case you plan to test room migrations (recommended), add the schema location to the source sets.\r\n\r\n&gt; In your build.gradle file you specify a folder to place these\r\n&gt; generated schema JSON files. As you update your schema, you’ll end up\r\n&gt; with several JSON files, one for every version. Make sure you commit\r\n&gt; every generated file to source control. The next time you increase\r\n&gt; your version number again, Room will be able to use the JSON file for\r\n&gt; testing.\r\n&gt; \r\n&gt; - Florina Muntenescu ([source][2])\r\n\r\n\r\n**build.gradle**\r\n\r\n\r\n    android {\r\n        \r\n        // [...]\r\n\r\n        defaultConfig {\r\n            \r\n            // [...]\r\n\r\n            javaCompileOptions {\r\n                annotationProcessorOptions {\r\n                    arguments = [&quot;room.schemaLocation&quot;: &quot;$projectDir/schemas&quot;.toString()]\r\n                }\r\n            }\r\n        }\r\n\r\n        // add the schema location to the source sets\r\n        // used by Room, to test migrations\r\n        sourceSets {\r\n            androidTest.assets.srcDirs += files(&quot;$projectDir/schemas&quot;.toString())\r\n        }\r\n\r\n        // [...]\r\n    }\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/44424908/4325011\r\n  [2]: https://medium.com/androiddevelopers/testing-room-migrations-be93cdb0d975","title":"Room - Schema export directory is not provided to the annotation processor so we cannot export the schema","body":"<p>@mikejonesguy <a href=\"https://stackoverflow.com/a/44424908/4325011\">answer</a> is perfect, just in case you plan to test room migrations (recommended), add the schema location to the source sets.</p>\n\n<blockquote>\n  <p>In your build.gradle file you specify a folder to place these\n  generated schema JSON files. As you update your schema, you’ll end up\n  with several JSON files, one for every version. Make sure you commit\n  every generated file to source control. The next time you increase\n  your version number again, Room will be able to use the JSON file for\n  testing.</p>\n  \n  <ul>\n  <li>Florina Muntenescu (<a href=\"https://medium.com/androiddevelopers/testing-room-migrations-be93cdb0d975\" rel=\"noreferrer\">source</a>)</li>\n  </ul>\n</blockquote>\n\n<p><strong>build.gradle</strong></p>\n\n<pre><code>android {\n\n    // [...]\n\n    defaultConfig {\n\n        // [...]\n\n        javaCompileOptions {\n            annotationProcessorOptions {\n                arguments = [\"room.schemaLocation\": \"$projectDir/schemas\".toString()]\n            }\n        }\n    }\n\n    // add the schema location to the source sets\n    // used by Room, to test migrations\n    sourceSets {\n        androidTest.assets.srcDirs += files(\"$projectDir/schemas\".toString())\n    }\n\n    // [...]\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11334150,"reputation":330,"user_id":8310659,"display_name":"LunaRivolxoxo"},"down_vote_count":1,"up_vote_count":19,"is_accepted":false,"score":18,"last_activity_date":1548425521,"creation_date":1548425521,"answer_id":54366985,"question_id":44322178,"body_markdown":"Above answers are correct. This version is easy to follow:\r\n\r\nBecause &quot;Schema export directory is not provided to the annotation processor&quot;, So we need to provide the directory for schema export:\r\n\r\n&gt;  Step [1] In your file which extends the RoomDatabase, change the line to:\r\n\r\n    `@Database(entities = ???.class,version = 1, exportSchema = true)`\r\n Or\r\n\r\n    `@Database(entities = ???.class,version = 1)` \r\n(because the default value is always true)\r\n\r\n &gt; Step [2] In your build.gradle(project:????) file, inside the **defaultConfig{ }** (which is inside **android{ }** big section), add the **javaCompileOptions{ }** section, it will be like:\r\n\r\n             android{\r\n                    defaultConfig{\r\n                          //javaComplieOptions SECTION\r\n                          javaCompileOptions {\r\n                                annotationProcessorOptions {\r\n                                         arguments = [&quot;room.schemaLocation&quot;:&quot;$projectDir/schemas&quot;.toString()]\r\n                                }\r\n                           }\r\n                          //Other SECTION\r\n                          ...\r\n                    }\r\n             }\r\n**$projectDir**:is a variable name, you cannot change it. it will get your own project directory\r\n\r\n**schemas**:is a string, you can change it to any you like. For example:\r\n`&quot;$projectDir/MyOwnSchemas&quot;.toString()`\r\n","title":"Room - Schema export directory is not provided to the annotation processor so we cannot export the schema","body":"<p>Above answers are correct. This version is easy to follow:</p>\n\n<p>Because \"Schema export directory is not provided to the annotation processor\", So we need to provide the directory for schema export:</p>\n\n<blockquote>\n  <p>Step [1] In your file which extends the RoomDatabase, change the line to:</p>\n</blockquote>\n\n<pre><code>`@Database(entities = ???.class,version = 1, exportSchema = true)`\n</code></pre>\n\n<p>Or</p>\n\n<pre><code>`@Database(entities = ???.class,version = 1)` \n</code></pre>\n\n<p>(because the default value is always true)</p>\n\n<blockquote>\n  <p>Step [2] In your build.gradle(project:????) file, inside the <strong>defaultConfig{ }</strong> (which is inside <strong>android{ }</strong> big section), add the <strong>javaCompileOptions{ }</strong> section, it will be like:</p>\n</blockquote>\n\n<pre><code>         android{\n                defaultConfig{\n                      //javaComplieOptions SECTION\n                      javaCompileOptions {\n                            annotationProcessorOptions {\n                                     arguments = [\"room.schemaLocation\":\"$projectDir/schemas\".toString()]\n                            }\n                       }\n                      //Other SECTION\n                      ...\n                }\n         }\n</code></pre>\n\n<p><strong>$projectDir</strong>:is a variable name, you cannot change it. it will get your own project directory</p>\n\n<p><strong>schemas</strong>:is a string, you can change it to any you like. For example:\n<code>\"$projectDir/MyOwnSchemas\".toString()</code></p>\n"},{"tags":[],"owner":{"account_id":8610734,"reputation":1060,"user_id":6449273,"display_name":"jsa"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1568364190,"creation_date":1568364190,"answer_id":57920156,"question_id":44322178,"body_markdown":"I use `.kts` Gradle files (Kotlin Gradle DSL) and the `kotlin-kapt` plugin but I still get a script compilation error when I use Ivanov Maksim&#39;s answer.\r\n\r\n    Unresolved reference: kapt\r\n\r\nFor me this was the only thing which worked:\r\n\r\n    android {\r\n        defaultConfig {\r\n            javaCompileOptions {\r\n                annotationProcessorOptions {\r\n                    arguments = mapOf(&quot;room.schemaLocation&quot; to &quot;$projectDir/schemas&quot;)\r\n                }\r\n            }\r\n        }\r\n    }","title":"Room - Schema export directory is not provided to the annotation processor so we cannot export the schema","body":"<p>I use <code>.kts</code> Gradle files (Kotlin Gradle DSL) and the <code>kotlin-kapt</code> plugin but I still get a script compilation error when I use Ivanov Maksim's answer.</p>\n\n<pre><code>Unresolved reference: kapt\n</code></pre>\n\n<p>For me this was the only thing which worked:</p>\n\n<pre><code>android {\n    defaultConfig {\n        javaCompileOptions {\n            annotationProcessorOptions {\n                arguments = mapOf(\"room.schemaLocation\" to \"$projectDir/schemas\")\n            }\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9470871,"reputation":1070,"user_id":7041761,"display_name":"Neuron"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1569490037,"creation_date":1569490037,"answer_id":58113646,"question_id":44322178,"body_markdown":"Probably you didn&#39;t add your room class to child `RoomDatabase` child class in `@Database(entities = {your_classes})`","title":"Room - Schema export directory is not provided to the annotation processor so we cannot export the schema","body":"<p>Probably you didn't add your room class to child <code>RoomDatabase</code> child class in <code>@Database(entities = {your_classes})</code></p>\n"},{"tags":[],"owner":{"account_id":10081736,"reputation":1651,"user_id":7451779,"display_name":"Haider Malik"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1606599174,"creation_date":1606599174,"answer_id":65054667,"question_id":44322178,"body_markdown":"If like me you recently moved certain classes to different packages ect. and you use android navigation. Make sure to change the argType to you match you new package address.\r\nfrom:\r\n\r\n    app:argType=&quot;com.example.app.old.Item&quot; \r\n\r\nto:\r\n\r\n    app:argType=&quot;com.example.app.new.Item&quot; \r\n\r\n","title":"Room - Schema export directory is not provided to the annotation processor so we cannot export the schema","body":"<p>If like me you recently moved certain classes to different packages ect. and you use android navigation. Make sure to change the argType to you match you new package address.\nfrom:</p>\n<pre><code>app:argType=&quot;com.example.app.old.Item&quot; \n</code></pre>\n<p>to:</p>\n<pre><code>app:argType=&quot;com.example.app.new.Item&quot; \n</code></pre>\n"},{"tags":[],"owner":{"account_id":6503459,"reputation":3563,"user_id":5033303,"accept_rate":0,"display_name":"Ali Zarei"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1642851255,"creation_date":1642851255,"answer_id":70812387,"question_id":44322178,"body_markdown":"**Kotlin** way according to [official document][1]:\r\n\r\n    android {\r\n    ...\r\n    defaultConfig {\r\n        ...\r\n        javaCompileOptions {\r\n            annotationProcessorOptions {\r\n                arguments += mapOf(\r\n                    &quot;room.schemaLocation&quot; to &quot;$projectDir/schemas&quot;,\r\n                    &quot;room.incremental&quot; to &quot;true&quot;,\r\n                    &quot;room.expandProjection&quot; to &quot;true&quot;\r\n                )\r\n            }\r\n        }\r\n    }\r\n    }\r\n\r\n\r\n  [1]: https://developer.android.com/jetpack/androidx/releases/room#compiler-options","title":"Room - Schema export directory is not provided to the annotation processor so we cannot export the schema","body":"<p><strong>Kotlin</strong> way according to <a href=\"https://developer.android.com/jetpack/androidx/releases/room#compiler-options\" rel=\"nofollow noreferrer\">official document</a>:</p>\n<pre><code>android {\n...\ndefaultConfig {\n    ...\n    javaCompileOptions {\n        annotationProcessorOptions {\n            arguments += mapOf(\n                &quot;room.schemaLocation&quot; to &quot;$projectDir/schemas&quot;,\n                &quot;room.incremental&quot; to &quot;true&quot;,\n                &quot;room.expandProjection&quot; to &quot;true&quot;\n            )\n        }\n    }\n}\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":22104302,"reputation":1415,"user_id":16360266,"display_name":"Eyjafl"},"down_vote_count":0,"up_vote_count":71,"is_accepted":false,"score":71,"last_activity_date":1702059932,"creation_date":1647102379,"answer_id":71451314,"question_id":44322178,"body_markdown":"For Kotlin KSP:\r\n```groovy\r\nksp {\r\n    arg(&#39;room.schemaLocation&#39;, &quot;$projectDir/schemas&quot;)\r\n}\r\n```\r\n\r\n(it&#39;s Groovy DSL, in Kotlin DSL use double quotes)","title":"Room - Schema export directory is not provided to the annotation processor so we cannot export the schema","body":"<p>For Kotlin KSP:</p>\n<pre><code>ksp {\n    arg('room.schemaLocation', &quot;$projectDir/schemas&quot;)\n}\n</code></pre>\n<p>(it's Groovy DSL, in Kotlin DSL use double quotes)</p>\n"},{"tags":[],"owner":{"account_id":7656968,"reputation":638,"user_id":8949644,"display_name":"Sagar Balyan"},"down_vote_count":1,"up_vote_count":8,"is_accepted":false,"score":7,"last_activity_date":1666716562,"creation_date":1666716562,"answer_id":74197599,"question_id":44322178,"body_markdown":"\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-js --&gt;\r\n\r\n    kapt {\r\n      arguments {\r\n        arg(&quot;room.schemaLocation&quot;, &quot;$projectDir/schemas&quot;)\r\n      }\r\n    }\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n","title":"Room - Schema export directory is not provided to the annotation processor so we cannot export the schema","body":"<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>kapt {\n  arguments {\n    arg(\"room.schemaLocation\", \"$projectDir/schemas\")\n  }\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"},{"tags":[],"owner":{"account_id":10647346,"reputation":5549,"user_id":7839518,"display_name":"Tonnie"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1678809387,"creation_date":1678809387,"answer_id":75735523,"question_id":44322178,"body_markdown":"Just posting what worked for me using **`Kotlin DSL`** \r\n\r\n    defaultConfig {\r\n            applicationId = &quot;&quot;\r\n            minSdk = 26\r\n            targetSdk = 33\r\n            versionCode = 1\r\n            versionName = &quot;1.0&quot;\r\n    \r\n            testInstrumentationRunner = &quot;androidx.test.runner.AndroidJUnitRunner&quot;\r\n            vectorDrawables.useSupportLibrary = true\r\n            \r\n            //add this in the build.gradle.kts(app) file\r\n            javaCompileOptions {\r\n                annotationProcessorOptions {\r\n                    arguments[&quot;room.schemaLocation&quot;] =\r\n                        &quot;$projectDir/schemas&quot;\r\n                }\r\n            }\r\n        }\r\n\r\nFor this to work you also need to set `exportSchema` to `true`\r\n\r\n    @Database(entities = [Entity::class], version = 1, exportSchema = true)\r\n    @TypeConverters(Converters::class)\r\n    abstract class ScoresDatabase : RoomDatabase() {\r\n    \r\n        abstract val dao: ScoresDAO\r\n    }\r\n\r\nTo confirm it worked, you should see the newly created ***schemas*** directory off the module root directory with the next build as illustrated below.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/0lM12.png","title":"Room - Schema export directory is not provided to the annotation processor so we cannot export the schema","body":"<p>Just posting what worked for me using <strong><code>Kotlin DSL</code></strong></p>\n<pre><code>defaultConfig {\n        applicationId = &quot;&quot;\n        minSdk = 26\n        targetSdk = 33\n        versionCode = 1\n        versionName = &quot;1.0&quot;\n\n        testInstrumentationRunner = &quot;androidx.test.runner.AndroidJUnitRunner&quot;\n        vectorDrawables.useSupportLibrary = true\n        \n        //add this in the build.gradle.kts(app) file\n        javaCompileOptions {\n            annotationProcessorOptions {\n                arguments[&quot;room.schemaLocation&quot;] =\n                    &quot;$projectDir/schemas&quot;\n            }\n        }\n    }\n</code></pre>\n<p>For this to work you also need to set <code>exportSchema</code> to <code>true</code></p>\n<pre><code>@Database(entities = [Entity::class], version = 1, exportSchema = true)\n@TypeConverters(Converters::class)\nabstract class ScoresDatabase : RoomDatabase() {\n\n    abstract val dao: ScoresDAO\n}\n</code></pre>\n<p>To confirm it worked, you should see the newly created <em><strong>schemas</strong></em> directory off the module root directory with the next build as illustrated below.</p>\n<p><a href=\"https://i.stack.imgur.com/0lM12.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/0lM12.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":[],"owner":{"account_id":418826,"reputation":691,"user_id":795616,"display_name":"reznic"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1683024998,"creation_date":1683024998,"answer_id":76154141,"question_id":44322178,"body_markdown":"    // For javac or KAPT, configure using android DSL:\r\n    android {\r\n      ...\r\n      defaultConfig {\r\n        javaCompileOptions {\r\n          annotationProcessorOptions {\r\n            compilerArgumentProviders(\r\n              RoomSchemaArgProvider(File(projectDir, &quot;schemas&quot;))\r\n            )\r\n          }\r\n        }\r\n      }\r\n    }\r\n    \r\n    // For KSP, configure using KSP extension:\r\n    ksp {\r\n      arg(RoomSchemaArgProvider(File(projectDir, &quot;schemas&quot;)))\r\n    }","title":"Room - Schema export directory is not provided to the annotation processor so we cannot export the schema","body":"<pre><code>// For javac or KAPT, configure using android DSL:\nandroid {\n  ...\n  defaultConfig {\n    javaCompileOptions {\n      annotationProcessorOptions {\n        compilerArgumentProviders(\n          RoomSchemaArgProvider(File(projectDir, &quot;schemas&quot;))\n        )\n      }\n    }\n  }\n}\n\n// For KSP, configure using KSP extension:\nksp {\n  arg(RoomSchemaArgProvider(File(projectDir, &quot;schemas&quot;)))\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1602694,"reputation":785,"user_id":1483448,"display_name":"polis"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699548204,"creation_date":1699547766,"answer_id":77454900,"question_id":44322178,"body_markdown":"If you are using room with ksp in the module build you have to define RoomSchemaArgProvider\r\n\r\n    class RoomSchemaArgProvider(\r\n        @get:InputDirectory\r\n        @get:PathSensitive(PathSensitivity.RELATIVE)\r\n        val schemaDir: File\r\n    ) : CommandLineArgumentProvider {\r\n    \r\n        override fun asArguments(): Iterable&lt;String&gt; {\r\n            // Note: If you&#39;re using KSP, change the line below to return\r\n             return listOf(&quot;room.schemaLocation=${schemaDir.path}&quot;)\r\n    //        return listOf(&quot;-Aroom.schemaLocation=${schemaDir.path}&quot;)\r\n        }\r\n    }\r\n    \r\n    android {\r\n    \r\n    \r\n        // For KSP, configure using KSP extension:\r\n        ksp {\r\n            arg(RoomSchemaArgProvider(File(projectDir, &quot;schemas&quot;)))\r\n        }\r\n    }\r\n\r\n\r\nAnd then make sure that you have directory in app/schemas\r\nDo not know why it was not created automatically in my case. ","title":"Room - Schema export directory is not provided to the annotation processor so we cannot export the schema","body":"<p>If you are using room with ksp in the module build you have to define RoomSchemaArgProvider</p>\n<pre><code>class RoomSchemaArgProvider(\n    @get:InputDirectory\n    @get:PathSensitive(PathSensitivity.RELATIVE)\n    val schemaDir: File\n) : CommandLineArgumentProvider {\n\n    override fun asArguments(): Iterable&lt;String&gt; {\n        // Note: If you're using KSP, change the line below to return\n         return listOf(&quot;room.schemaLocation=${schemaDir.path}&quot;)\n//        return listOf(&quot;-Aroom.schemaLocation=${schemaDir.path}&quot;)\n    }\n}\n\nandroid {\n\n\n    // For KSP, configure using KSP extension:\n    ksp {\n        arg(RoomSchemaArgProvider(File(projectDir, &quot;schemas&quot;)))\n    }\n}\n</code></pre>\n<p>And then make sure that you have directory in app/schemas\nDo not know why it was not created automatically in my case.</p>\n"}],"owner":{"account_id":3728672,"reputation":12401,"user_id":3101777,"accept_rate":79,"display_name":"Misha Akopov"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":197103,"favorite_count":0,"down_vote_count":0,"up_vote_count":545,"accepted_answer_id":44645943,"answer_count":14,"score":545,"last_activity_date":1702059932,"creation_date":1496384738,"question_id":44322178,"body_markdown":"I am using Android Database Component Room\r\n\r\nI&#39;ve configured everything, but when I compile, Android Studio gives me this warning:\r\n\r\n&gt; Schema export directory is not provided to the annotation processor so\r\n&gt; we cannot export the schema. You can either provide\r\n&gt; `room.schemaLocation` annotation processor argument OR set\r\n&gt; exportSchema to false.\r\n\r\nAs I understand it is the location where DB file will be located\r\n\r\nHow can it affect my app? What is the best practice here? Should I use the default location (`false` value)?","title":"Room - Schema export directory is not provided to the annotation processor so we cannot export the schema","body":"<p>I am using Android Database Component Room</p>\n\n<p>I've configured everything, but when I compile, Android Studio gives me this warning:</p>\n\n<blockquote>\n  <p>Schema export directory is not provided to the annotation processor so\n  we cannot export the schema. You can either provide\n  <code>room.schemaLocation</code> annotation processor argument OR set\n  exportSchema to false.</p>\n</blockquote>\n\n<p>As I understand it is the location where DB file will be located</p>\n\n<p>How can it affect my app? What is the best practice here? Should I use the default location (<code>false</code> value)?</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":121840,"reputation":36551,"user_id":315228,"accept_rate":100,"display_name":"SMA"},"score":1,"creation_date":1418659529,"post_id":27488094,"comment_id":43407903,"body_markdown":"Can you be bit clear how you mix two string?","body":"Can you be bit clear how you mix two string?"},{"owner":{"account_id":364020,"reputation":1527,"user_id":708128,"accept_rate":64,"display_name":"P.P&#233;ter"},"score":1,"creation_date":1418660276,"post_id":27488094,"comment_id":43408361,"body_markdown":"Why would you like to _mix_ those two? Is it the case that you want to get a deterministic license key based on environmental parameters, but not immediately recognisable? If yes, do you want the key to be reversible (i.e. key1 and key2 computable from the result (maybe in possession of a third secret))? There are better methods for any of the above than mixing the two strings up...","body":"Why would you like to <i>mix</i> those two? Is it the case that you want to get a deterministic license key based on environmental parameters, but not immediately recognisable? If yes, do you want the key to be reversible (i.e. key1 and key2 computable from the result (maybe in possession of a third secret))? There are better methods for any of the above than mixing the two strings up..."},{"owner":{"account_id":5006679,"reputation":73,"user_id":4024141,"display_name":"Salvador Figueroa"},"score":0,"creation_date":1418660609,"post_id":27488094,"comment_id":43408513,"body_markdown":"Well am trying to do this","body":"Well am trying to do this"},{"owner":{"account_id":5006679,"reputation":73,"user_id":4024141,"display_name":"Salvador Figueroa"},"score":0,"creation_date":1418661548,"post_id":27488094,"comment_id":43409083,"body_markdown":"I put some code in my question to show what i am doing but i dont like how i am trying to solve my problem i need a better way to do it. if you could help me with and idea thanks :)","body":"I put some code in my question to show what i am doing but i dont like how i am trying to solve my problem i need a better way to do it. if you could help me with and idea thanks :)"}],"answers":[{"tags":[],"owner":{"account_id":4845031,"reputation":3448,"user_id":4307644,"accept_rate":80,"display_name":"MeetTitan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1418659623,"creation_date":1418659623,"answer_id":27488224,"question_id":27488094,"body_markdown":"Take a look at this SO question. https://stackoverflow.com/questions/363681/generating-random-integers-in-a-range-with-java\r\n\r\nGenerate a random number like cited, and rebuild a string with your random index from your array of string &quot;parts&quot;.","title":"How combine two strings with random position android","body":"<p>Take a look at this SO question. <a href=\"https://stackoverflow.com/questions/363681/generating-random-integers-in-a-range-with-java\">How do I generate random integers within a specific range in Java?</a></p>\n\n<p>Generate a random number like cited, and rebuild a string with your random index from your array of string \"parts\".</p>\n"},{"tags":[],"owner":{"account_id":364020,"reputation":1527,"user_id":708128,"accept_rate":64,"display_name":"P.P&#233;ter"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1418663183,"creation_date":1418663183,"answer_id":27489262,"question_id":27488094,"body_markdown":"I would suggest forgetting the mixing up of strings, and using simple cryptographic hash, like:\r\n\r\n    org.apache.commons.codec.digest.DigestUtils.sha384Hex(key1+key2);\r\n\r\n - This yields always the same result for the same key1,key2 pair, but cannot be used to calculate any of them. \r\n - You can truncate the resulting 24 bytes, but of course you somewhat increase the risk of collisions (you&#39;re still pretty good with 12 bytes).\r\n - You need a different strategy if you need to reverse the process (i.e. get key1,key2 from the result), or simply store those two server-side with the result if you need to (this may create privacy issues).","title":"How combine two strings with random position android","body":"<p>I would suggest forgetting the mixing up of strings, and using simple cryptographic hash, like:</p>\n\n<pre><code>org.apache.commons.codec.digest.DigestUtils.sha384Hex(key1+key2);\n</code></pre>\n\n<ul>\n<li>This yields always the same result for the same key1,key2 pair, but cannot be used to calculate any of them. </li>\n<li>You can truncate the resulting 24 bytes, but of course you somewhat increase the risk of collisions (you're still pretty good with 12 bytes).</li>\n<li>You need a different strategy if you need to reverse the process (i.e. get key1,key2 from the result), or simply store those two server-side with the result if you need to (this may create privacy issues).</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":2982484,"reputation":373,"user_id":2532173,"accept_rate":92,"display_name":"Lucas Bertollo"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1418666801,"creation_date":1418666254,"answer_id":27490145,"question_id":27488094,"body_markdown":"I&#39;m hurry so if i get it, you want something like this? This may give you some ideas using ArrayList.\r\nIf someone find something wrong fell free to edit.\r\n\r\n\r\n        String tmp = &quot;X1X2X3&quot;;\r\n        String tmp2 = &quot;Y1Y2Y3&quot;;\r\n\r\n        ArrayList&lt;String&gt; list = new ArrayList&lt;String&gt;();\r\n\r\n        for(int i = 0 ; i &lt; (tmp.length()/2) ; i  = i + 2)\r\n        {\r\n            list.add(tmp.substring(i,i+1));\r\n            list.add(tmp2.substring(i,i+2));\r\n        }\r\n\r\n        int max = list.size();\r\n        String finalMix = null;\r\n\r\n        for(int j = 0 ; j &lt; max; j++)\r\n        {\r\n            Random rnd = new Random();\r\n            int rndNumber = rnd.nextInt((list.size()) + 1);\r\n            finalMix += list.get(rndNumber);\r\n            list.remove(rndNumber);\r\n        }\r\n        System.out.println(finalMix);\r\n    }","title":"How combine two strings with random position android","body":"<p>I'm hurry so if i get it, you want something like this? This may give you some ideas using ArrayList.\nIf someone find something wrong fell free to edit.</p>\n\n<pre><code>    String tmp = \"X1X2X3\";\n    String tmp2 = \"Y1Y2Y3\";\n\n    ArrayList&lt;String&gt; list = new ArrayList&lt;String&gt;();\n\n    for(int i = 0 ; i &lt; (tmp.length()/2) ; i  = i + 2)\n    {\n        list.add(tmp.substring(i,i+1));\n        list.add(tmp2.substring(i,i+2));\n    }\n\n    int max = list.size();\n    String finalMix = null;\n\n    for(int j = 0 ; j &lt; max; j++)\n    {\n        Random rnd = new Random();\n        int rndNumber = rnd.nextInt((list.size()) + 1);\n        finalMix += list.get(rndNumber);\n        list.remove(rndNumber);\n    }\n    System.out.println(finalMix);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4872274,"reputation":34930,"user_id":3928341,"display_name":"nem035"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1453077004,"creation_date":1418666809,"answer_id":27490297,"question_id":27488094,"body_markdown":"I think the easiest way you could do this is to separate the tokens out of each key (2-char long tokens like X1, D1 etc.) and then combine the tokens into a single `String`.\r\n\r\nFurther, you shuffle up the `String`, extracting random tokens and building the Licence Key:\r\n\r\n\tRandom rand = new Random(); // generate Random object only once for efficiency purposes\r\n\r\n    // ... rest of your code\r\n\r\n    String getLicenceKey(String key1, String key2){\r\n\t    List&lt;String&gt; tokens = new ArrayList&lt;String&gt;();\r\n\r\n\t    // add tokens from key1\r\n\t    for(int i = 0; i &lt; key1.length(); i += 2) {\r\n\t    \ttokens.add(key1.substring(i, i + 2));\r\n\t    }\r\n\r\n\t    // add tokens from key2\r\n\t    for(int i = 0; i &lt; key2.length(); i += 2) {\r\n\t    \ttokens.add(key2.substring(i, i + 2));\r\n\t    }\r\n\r\n\t    // build the random result out of the tokens\r\n\t    StringBuilder result = new StringBuilder();\r\n\t    while(tokens.size() != 0){\r\n\t        int randomPos = rand.nextInt(tokens.size());\r\n\t        result.append(tokens.remove(randomPos));\r\n\t    }\r\n\r\n\t    return result.toString();\r\n\t}\r\n\r\nSample outputs for the inputs you gave:\r\n\r\n    m2XnD2m1H2X1..Y3Y1Y2Y4M1X2M2D1H1X4X3\r\n    H2Y2X4M1M2H1Y3Y1m2X1X2D1m1Xn..X3Y4D2\r\n    X1X4X3H2D2H1..M2m2Y3m1Y4M1D1Y1X2XnY2\r\n\r\nSample outputs for key1=&quot;*A1B1C1*&quot;, key2=&quot;*D1E1F1*&quot;:\r\n\r\n    D1F1B1A1C1E1\r\n    C1A1D1B1E1F1\r\n    F1E1B1C1D1A1\r\n\r\n","title":"How combine two strings with random position android","body":"<p>I think the easiest way you could do this is to separate the tokens out of each key (2-char long tokens like X1, D1 etc.) and then combine the tokens into a single <code>String</code>.</p>\n\n<p>Further, you shuffle up the <code>String</code>, extracting random tokens and building the Licence Key:</p>\n\n<pre><code>Random rand = new Random(); // generate Random object only once for efficiency purposes\n\n// ... rest of your code\n\nString getLicenceKey(String key1, String key2){\n    List&lt;String&gt; tokens = new ArrayList&lt;String&gt;();\n\n    // add tokens from key1\n    for(int i = 0; i &lt; key1.length(); i += 2) {\n        tokens.add(key1.substring(i, i + 2));\n    }\n\n    // add tokens from key2\n    for(int i = 0; i &lt; key2.length(); i += 2) {\n        tokens.add(key2.substring(i, i + 2));\n    }\n\n    // build the random result out of the tokens\n    StringBuilder result = new StringBuilder();\n    while(tokens.size() != 0){\n        int randomPos = rand.nextInt(tokens.size());\n        result.append(tokens.remove(randomPos));\n    }\n\n    return result.toString();\n}\n</code></pre>\n\n<p>Sample outputs for the inputs you gave:</p>\n\n<pre><code>m2XnD2m1H2X1..Y3Y1Y2Y4M1X2M2D1H1X4X3\nH2Y2X4M1M2H1Y3Y1m2X1X2D1m1Xn..X3Y4D2\nX1X4X3H2D2H1..M2m2Y3m1Y4M1D1Y1X2XnY2\n</code></pre>\n\n<p>Sample outputs for key1=\"<em>A1B1C1</em>\", key2=\"<em>D1E1F1</em>\":</p>\n\n<pre><code>D1F1B1A1C1E1\nC1A1D1B1E1F1\nF1E1B1C1D1A1\n</code></pre>\n"},{"tags":[],"owner":{"account_id":30100481,"reputation":1,"user_id":23067731,"display_name":"Venkat Parvatini"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1702059823,"creation_date":1702059823,"answer_id":77628516,"question_id":27488094,"body_markdown":"One of my recent interview logic\r\n\r\npublic class Main {\r\n  public static void main(String[] args) {\r\n  \r\n  String a = &quot;abcd&quot;;\r\n\r\n  String b = &quot;123456&quot;;\r\n\r\n  StringBuffer sb = new StringBuffer(b);\r\n  \r\n  for(int i=0;i&lt;4;i++){\r\n\r\n  sb.insert(i*2,a.charAt(i));\r\n\r\n }\r\n    \r\n    System.out.println(sb);\r\n  }\r\n}","title":"How combine two strings with random position android","body":"<p>One of my recent interview logic</p>\n<p>public class Main {\npublic static void main(String[] args) {</p>\n<p>String a = &quot;abcd&quot;;</p>\n<p>String b = &quot;123456&quot;;</p>\n<p>StringBuffer sb = new StringBuffer(b);</p>\n<p>for(int i=0;i&lt;4;i++){</p>\n<p>sb.insert(i*2,a.charAt(i));</p>\n<p>}</p>\n<pre><code>System.out.println(sb);\n</code></pre>\n<p>}\n}</p>\n"}],"owner":{"account_id":5006679,"reputation":73,"user_id":4024141,"display_name":"Salvador Figueroa"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1150,"favorite_count":0,"down_vote_count":1,"up_vote_count":7,"accepted_answer_id":27490297,"answer_count":5,"score":6,"last_activity_date":1702059823,"creation_date":1418659207,"question_id":27488094,"body_markdown":"I&#39;m trying to generate a license key with two strings combined both into another one string.\r\n\r\n    String key1 = &quot;X1X2X3X4..Xn&quot;; //this is for the imei key cellphone\r\n    String key2 = &quot;Y1Y2Y3Y4M1M2D1D2H1H2m1m2&quot;; //this is a key to mix with the first one\r\n\r\nThe result of the combination should be like this: \r\n\r\n    String result = &quot;D1H1X1X2X3Y2Y4X4X5...XnY3Y1D2m2m1H1H2&quot;;\r\n\r\nI split my strings every two spaces like this and I save into an array:\r\n\r\n    String [] key1splited = splitStringEvery(key1, 2);\r\n    String [] key2splited = splitStringEvery(key2, 2);\r\n    \r\n    public String[] splitStringEvery(String s, int interval) {\r\n        int arrayLength = (int) Math.ceil(((s.length() / (double)interval);\r\n        String[] result = new String[arrayLength];\r\n    \r\n   \t    int j = 0;\r\n   \t    int lastIndex = result.length - 1;\r\n   \t    for (int i = 0; i &lt; lastIndex; i++) {\r\n   \t        result[i] = s.substring(j, j + interval);\r\n   \t        j += interval;\r\n   \t    } \r\n   \t    result[lastIndex] = s.substring(j);\r\n    \r\n        return result;\r\n   \t}\r\n\r\nHow can I make the combination of my strings give me a result that looks like this:\r\n\r\n    String result = &quot;D1H1X1X2X3Y2Y4X4X5...XnY3Y1D2m2m1H1H2&quot;;\r\n\r\nI hope someone could give me an idea how to solve this.\r\n\r\nI am trying to do something like this, but it is very poor method:\r\n\r\n \tstatic String res = &quot;&quot;;\r\n\tString[] key1splited = splitStringEvery(key1, 2);\r\n\tString[] key2splited = splitStringEvery(key2, 2);\r\n\tfor (int i = 0; i &lt; key2splited.length; i++) {\r\n\t    if (key2splited[i].equals(&quot;D1&quot;)) {\r\n\t\t\tres = key2splited[i];\r\n\t\t}\r\n\t\tif (key2splited[i].equals(&quot;H1&quot;)) {\r\n\t\t\tres += key2splited[i];\r\n\t\t\tfor (int j = 0; j &lt; key1splited.length; j++) {\r\n\t\t\t\tif (key1splited[j].equals(&quot;X1&quot;)) {\r\n\t\t\t\t\tres += key1splited[j];\r\n\t\t\t\t}\r\n\t\t\t\tif (key1splited[j].equals(&quot;X2&quot;)) {\r\n\t\t\t\t\tres += key1splited[j];\r\n\t\t\t\t}\r\n\t\t\t\tif (key1splited[j].equals(&quot;X3&quot;)) {\r\n\t\t\t\t\tres += key1splited[j];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\nAnd so on, but this isn&#39;t a good way to do it because the strings are going to change. \r\n","title":"How combine two strings with random position android","body":"<p>I'm trying to generate a license key with two strings combined both into another one string.</p>\n\n<pre><code>String key1 = \"X1X2X3X4..Xn\"; //this is for the imei key cellphone\nString key2 = \"Y1Y2Y3Y4M1M2D1D2H1H2m1m2\"; //this is a key to mix with the first one\n</code></pre>\n\n<p>The result of the combination should be like this: </p>\n\n<pre><code>String result = \"D1H1X1X2X3Y2Y4X4X5...XnY3Y1D2m2m1H1H2\";\n</code></pre>\n\n<p>I split my strings every two spaces like this and I save into an array:</p>\n\n<pre><code>String [] key1splited = splitStringEvery(key1, 2);\nString [] key2splited = splitStringEvery(key2, 2);\n\npublic String[] splitStringEvery(String s, int interval) {\n    int arrayLength = (int) Math.ceil(((s.length() / (double)interval);\n    String[] result = new String[arrayLength];\n\n    int j = 0;\n    int lastIndex = result.length - 1;\n    for (int i = 0; i &lt; lastIndex; i++) {\n        result[i] = s.substring(j, j + interval);\n        j += interval;\n    } \n    result[lastIndex] = s.substring(j);\n\n    return result;\n}\n</code></pre>\n\n<p>How can I make the combination of my strings give me a result that looks like this:</p>\n\n<pre><code>String result = \"D1H1X1X2X3Y2Y4X4X5...XnY3Y1D2m2m1H1H2\";\n</code></pre>\n\n<p>I hope someone could give me an idea how to solve this.</p>\n\n<p>I am trying to do something like this, but it is very poor method:</p>\n\n<pre><code>static String res = \"\";\nString[] key1splited = splitStringEvery(key1, 2);\nString[] key2splited = splitStringEvery(key2, 2);\nfor (int i = 0; i &lt; key2splited.length; i++) {\n    if (key2splited[i].equals(\"D1\")) {\n        res = key2splited[i];\n    }\n    if (key2splited[i].equals(\"H1\")) {\n        res += key2splited[i];\n        for (int j = 0; j &lt; key1splited.length; j++) {\n            if (key1splited[j].equals(\"X1\")) {\n                res += key1splited[j];\n            }\n            if (key1splited[j].equals(\"X2\")) {\n                res += key1splited[j];\n            }\n            if (key1splited[j].equals(\"X3\")) {\n                res += key1splited[j];\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>And so on, but this isn't a good way to do it because the strings are going to change. </p>\n"},{"tags":["java","string","break","do-while"],"comments":[{"owner":{"account_id":788777,"reputation":28977,"user_id":857132,"accept_rate":69,"display_name":"John3136"},"score":0,"creation_date":1364863644,"post_id":15754299,"comment_id":22389450,"body_markdown":"Sounds like you want to check whether input `contains` &quot;/done&quot; rather than input `equals` &quot;/done&quot;.","body":"Sounds like you want to check whether input <code>contains</code> &quot;/done&quot; rather than input <code>equals</code> &quot;/done&quot;."},{"owner":{"account_id":39580,"reputation":385624,"user_id":114251,"accept_rate":87,"display_name":"Arun P Johny"},"score":0,"creation_date":1364863742,"post_id":15754299,"comment_id":22389480,"body_markdown":"whether the use types `/done` or is it part of a larger string","body":"whether the use types <code>&#47;done</code> or is it part of a larger string"},{"owner":{"account_id":2345668,"reputation":13002,"user_id":2055998,"accept_rate":68,"display_name":"PM 77-1"},"score":0,"creation_date":1364863859,"post_id":15754299,"comment_id":22389495,"body_markdown":"Do you actually enter &quot;/done&quot; on its own line?","body":"Do you actually enter &quot;/done&quot; on its own line?"},{"owner":{"account_id":2468345,"reputation":63,"user_id":2150881,"accept_rate":60,"display_name":"sega_one"},"score":0,"creation_date":1364864145,"post_id":15754299,"comment_id":22389558,"body_markdown":"John - yes, you&#39;re right, contains would work rather than equals. Would you put that within the while of the do-while loop?? .. Arun - user would have to input /done all at once within the string input. Not on it&#39;s own line - it could be on it&#39;s own line but it is not necessary. Just has to be &quot;/done&quot; together","body":"John - yes, you&#39;re right, contains would work rather than equals. Would you put that within the while of the do-while loop?? .. Arun - user would have to input /done all at once within the string input. Not on it&#39;s own line - it could be on it&#39;s own line but it is not necessary. Just has to be &quot;/done&quot; together"},{"owner":{"account_id":29412,"reputation":5855,"user_id":79450,"accept_rate":100,"display_name":"Catchwa"},"score":0,"creation_date":1364866600,"post_id":15754299,"comment_id":22390196,"body_markdown":"Even if you call `contains` it means your program won&#39;t break until the user hits the enter key. So I could type &quot;blah blah /done blah blah&lt;enter&gt;&quot; Is that what you want?","body":"Even if you call <code>contains</code> it means your program won&#39;t break until the user hits the enter key. So I could type &quot;blah blah /done blah blah&lt;enter&gt;&quot; Is that what you want?"},{"owner":{"account_id":2468345,"reputation":63,"user_id":2150881,"accept_rate":60,"display_name":"sega_one"},"score":0,"creation_date":1364866926,"post_id":15754299,"comment_id":22390282,"body_markdown":"I forgot to mention that part. If you press enter key after typing /done within the string, the program WILL terminate. If you press enter key without /done anywhere in the string/line, then it simply moves you to new line in eclipse console and continues user string input on a new line. I hope that clears it up a bit","body":"I forgot to mention that part. If you press enter key after typing /done within the string, the program WILL terminate. If you press enter key without /done anywhere in the string/line, then it simply moves you to new line in eclipse console and continues user string input on a new line. I hope that clears it up a bit"}],"answers":[{"tags":[],"owner":{"account_id":1891823,"reputation":1190,"user_id":1709700,"display_name":"Avik"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1418342022,"creation_date":1364990160,"answer_id":15786677,"question_id":15754299,"body_markdown":"             Scanner s=new Scanner(System.in);\r\n        \t String input = &quot;&quot;;\r\n        \t String[] parts;\r\n        \t System.out.println(&quot;Enter your string: &quot;);\r\n        \t while (true){\r\n        \t\t input=s.nextLine();\r\n        \t    if (input.contains(&quot;/done&quot;)){\r\n        \t    parts=input.split(&quot;/done&quot;);\r\n        \t    //Use parts[0] to do any processing you want with the part of the string entered before /done in that line\r\n        \t    \tbreak;\r\n        \t    }\r\n        \t}","title":"break program when user enters specific string into input","body":"<pre><code>         Scanner s=new Scanner(System.in);\n         String input = \"\";\n         String[] parts;\n         System.out.println(\"Enter your string: \");\n         while (true){\n             input=s.nextLine();\n            if (input.contains(\"/done\")){\n            parts=input.split(\"/done\");\n            //Use parts[0] to do any processing you want with the part of the string entered before /done in that line\n                break;\n            }\n        }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6210818,"reputation":729,"user_id":4837155,"accept_rate":46,"display_name":"Harshit Gupta"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1435556457,"creation_date":1435556457,"answer_id":31108545,"question_id":15754299,"body_markdown":"I think this will work fine\r\n    \r\n    Scanner scanner = new Scanner(System.in);\r\n\t\tString input = &quot;&quot;;\r\n\t\tSystem.out.println(&quot;Enter your string: &quot;);\r\n\t\t\tdo {\r\n\t\t\tinput = scanner.nextLine();\r\n\t\t} while (!input.contains(&quot;/done&quot;));\r\n\t\tSystem.out.print(&quot;Rest of program here..&quot;);","title":"break program when user enters specific string into input","body":"<p>I think this will work fine</p>\n\n<pre><code>Scanner scanner = new Scanner(System.in);\n    String input = \"\";\n    System.out.println(\"Enter your string: \");\n        do {\n        input = scanner.nextLine();\n    } while (!input.contains(\"/done\"));\n    System.out.print(\"Rest of program here..\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1702059818,"creation_date":1684794779,"answer_id":76310270,"question_id":15754299,"body_markdown":"You almost had it, instead of `equals`, use `contains`.\r\n\r\n```java\r\nScanner scanner = new Scanner(System.in);\r\nString input = &quot;&quot;;\r\nSystem.out.println(&quot;Enter your string: &quot;);\r\n\r\ndo {\r\n    input = scanner.nextLine();\r\n    System.out.print(&quot;Rest of program here..&quot;);\r\n}\r\n\r\nwhile (!input.contains(&quot;/done&quot;));\r\n```","title":"break program when user enters specific string into input","body":"<p>You almost had it, instead of <code>equals</code>, use <code>contains</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Scanner scanner = new Scanner(System.in);\nString input = &quot;&quot;;\nSystem.out.println(&quot;Enter your string: &quot;);\n\ndo {\n    input = scanner.nextLine();\n    System.out.print(&quot;Rest of program here..&quot;);\n}\n\nwhile (!input.contains(&quot;/done&quot;));\n</code></pre>\n"}],"owner":{"account_id":2468345,"reputation":63,"user_id":2150881,"accept_rate":60,"display_name":"sega_one"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":7297,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":3,"score":5,"last_activity_date":1702059818,"creation_date":1364863493,"question_id":15754299,"body_markdown":"I want to make it so that the user inputs some string, and the program takes console input until user types &quot;/done&quot;.. so here&#39;s how it would work:\r\n\r\n1. print to user: enter your string\r\n\r\n2. user enters: hello eclipse. \r\n\r\nhi test blah blah \r\n\r\nbla \r\n                    456 \r\n                  testmore              /done\r\n\r\nAs soon as user enters /done within any string of any size, the program breaks. The program would NOT end if you hit &quot;enter&quot; key. It would only end if you type in /done.. How I setup my program so far:\r\n\r\n    Scanner 123 = new Scanner(System.in);\r\n    string input = &quot;&quot;;\r\n    System.out.println(&quot;Enter your string: &quot;);\r\n    \r\n    do {\r\n        input = 123.nextLine();\r\n        System.out.print(&quot;Rest of program here..&quot;);\r\n    }\r\n    \r\n    while (!input.equals(&quot;/done&quot;));\r\n\r\nI tried putting under while loop there something like below but I don&#39;t think I am doing it right.\r\n\r\n    while (!input.equals(&quot;/done&quot;));\r\n        if input.equals(&quot;/done&quot;);\r\n        break;\r\n    }\r\n\r\nI understand that with a do-while loop, it continues as long as boolean in while is false. So for my program, program takes inputs until user types in /done so boolean is false until string /done in inputted. Then according to the logic above, the program breaks as soon as input equals &quot;/done&quot;\r\n\r\nAny ideas on what I&#39;m doing wrong?","title":"break program when user enters specific string into input","body":"<p>I want to make it so that the user inputs some string, and the program takes console input until user types \"/done\".. so here's how it would work:</p>\n\n<ol>\n<li><p>print to user: enter your string</p></li>\n<li><p>user enters: hello eclipse. </p></li>\n</ol>\n\n<p>hi test blah blah </p>\n\n<p>bla \n                    456 \n                  testmore              /done</p>\n\n<p>As soon as user enters /done within any string of any size, the program breaks. The program would NOT end if you hit \"enter\" key. It would only end if you type in /done.. How I setup my program so far:</p>\n\n<pre><code>Scanner 123 = new Scanner(System.in);\nstring input = \"\";\nSystem.out.println(\"Enter your string: \");\n\ndo {\n    input = 123.nextLine();\n    System.out.print(\"Rest of program here..\");\n}\n\nwhile (!input.equals(\"/done\"));\n</code></pre>\n\n<p>I tried putting under while loop there something like below but I don't think I am doing it right.</p>\n\n<pre><code>while (!input.equals(\"/done\"));\n    if input.equals(\"/done\");\n    break;\n}\n</code></pre>\n\n<p>I understand that with a do-while loop, it continues as long as boolean in while is false. So for my program, program takes inputs until user types in /done so boolean is false until string /done in inputted. Then according to the logic above, the program breaks as soon as input equals \"/done\"</p>\n\n<p>Any ideas on what I'm doing wrong?</p>\n"},{"tags":["python","java","google-cloud-dataflow","user-defined-functions","apache-beam"],"comments":[{"owner":{"account_id":5974726,"reputation":1921,"user_id":4696015,"display_name":"chamikara"},"score":0,"creation_date":1674137066,"post_id":75150047,"comment_id":132653750,"body_markdown":"Yes, multi-language pipelines is the best way to achieve this. Can you look into this class which will allow you to execute an arbitrary element-wise Python function on a PCollection - https://github.com/apache/beam/blob/master/sdks/java/extensions/python/src/main/java/org/apache/beam/sdk/extensions/python/transforms/PythonMap.java","body":"Yes, multi-language pipelines is the best way to achieve this. Can you look into this class which will allow you to execute an arbitrary element-wise Python function on a PCollection - <a href=\"https://github.com/apache/beam/blob/master/sdks/java/extensions/python/src/main/java/org/apache/beam/sdk/extensions/python/transforms/PythonMap.java\" rel=\"nofollow noreferrer\">github.com/apache/beam/blob/master/sdks/java/extensions/pyth&zwnj;&#8203;on/&hellip;</a>"},{"owner":{"account_id":27547300,"reputation":21,"user_id":21023007,"display_name":"Thomas Sluciak"},"score":0,"creation_date":1674230079,"post_id":75150047,"comment_id":132676837,"body_markdown":"Thank you for your response, @chamikara.\n\nI was able successfully get the SklearnMnistClassification pipeline from the examples  to work in Dataflow (https://github.com/apache/beam/blob/master/examples/java/src/main/java/org/apache/beam/examples/multilanguage/SklearnMnistClassification.java).\n\nHowever, I am running into a lot of issues getting the multi-lang pipelines to run locally. The pipelines are either throwing an error, or never terminate. I&#39;ve got the Python Expansion service running in a virtual environment, but I am wondering if I need a Docker image running as well?","body":"Thank you for your response, @chamikara.  I was able successfully get the SklearnMnistClassification pipeline from the examples  to work in Dataflow (<a href=\"https://github.com/apache/beam/blob/master/examples/java/src/main/java/org/apache/beam/examples/multilanguage/SklearnMnistClassification.java\" rel=\"nofollow noreferrer\">github.com/apache/beam/blob/master/examples/java/src/main/j&zwnj;&#8203;ava/&hellip;</a>).  However, I am running into a lot of issues getting the multi-lang pipelines to run locally. The pipelines are either throwing an error, or never terminate. I&#39;ve got the Python Expansion service running in a virtual environment, but I am wondering if I need a Docker image running as well?"},{"owner":{"account_id":5974726,"reputation":1921,"user_id":4696015,"display_name":"chamikara"},"score":0,"creation_date":1674320662,"post_id":75150047,"comment_id":132691573,"body_markdown":"You just need to have Docker installed.  Can you try the guide here which has specific instructions for running locally using DirectRunner ? https://beam.apache.org/documentation/sdks/java-multi-language-pipelines/","body":"You just need to have Docker installed.  Can you try the guide here which has specific instructions for running locally using DirectRunner ? <a href=\"https://beam.apache.org/documentation/sdks/java-multi-language-pipelines/\" rel=\"nofollow noreferrer\">beam.apache.org/documentation/sdks/&hellip;</a>"},{"owner":{"account_id":27547300,"reputation":21,"user_id":21023007,"display_name":"Thomas Sluciak"},"score":0,"creation_date":1674488552,"post_id":75150047,"comment_id":132719271,"body_markdown":"Yeah, I think I know what the issue is. I am not able to use Docker Desktop since we don&#39;t have a license. So I am using a workaround with Lima and Dockerd, so I think there&#39;s some miscommunication happening.\n\nI have established that I am able to run the Pipeline locally and its contacting the Python SDK in my venv. What seems to be happening is that it is not sending anything back to the Java pipeline. I&#39;ll update here if I am able to get things working","body":"Yeah, I think I know what the issue is. I am not able to use Docker Desktop since we don&#39;t have a license. So I am using a workaround with Lima and Dockerd, so I think there&#39;s some miscommunication happening.  I have established that I am able to run the Pipeline locally and its contacting the Python SDK in my venv. What seems to be happening is that it is not sending anything back to the Java pipeline. I&#39;ll update here if I am able to get things working"},{"owner":{"account_id":5974726,"reputation":1921,"user_id":4696015,"display_name":"chamikara"},"score":0,"creation_date":1674579283,"post_id":75150047,"comment_id":132742159,"body_markdown":"If this got resolved, appreciate if you can add an answer so that others who run into similar situations can benefit from it.","body":"If this got resolved, appreciate if you can add an answer so that others who run into similar situations can benefit from it."},{"owner":{"account_id":27547300,"reputation":21,"user_id":21023007,"display_name":"Thomas Sluciak"},"score":0,"creation_date":1674666445,"post_id":75150047,"comment_id":132764807,"body_markdown":"I will close the question, but I wasn&#39;t able to get things working locally. I did establish that the Java pipeline was communicating with the Beam SDK in the virtual environment, but it seemed like the Python code was not handing anything back.\n\nI do appreciate the help, @chamikara","body":"I will close the question, but I wasn&#39;t able to get things working locally. I did establish that the Java pipeline was communicating with the Beam SDK in the virtual environment, but it seemed like the Python code was not handing anything back.  I do appreciate the help, @chamikara"}],"owner":{"account_id":27547300,"reputation":21,"user_id":21023007,"display_name":"Thomas Sluciak"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":258,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1702058975,"creation_date":1673976157,"question_id":75150047,"body_markdown":"I am currently trying to add execution of Python UDFs in a Java Dataflow pipeline. These UDFs would potentially employ third-party libraries and multiple modules.\r\n\r\nI have been reading a lot about Apache Beam multi-language pipelines, but I am becoming less certain that is the way to achieve this. I&#39;ll first summarize my understanding of how multi-language pipelines are working (I&#39;m kind of hoping I&#39;m missing or misunderstanding something), before getting to my questions.\r\n\r\n# Beam Multi-language Pipelines\r\nThe main purpose of a multi-language pipeline is to execute *transforms* written in another language; in my case executing transforms in the Python Beam SDK in a pipeline using the Java Beam SDK. \r\n\r\nThe Python Beam SDK would be running in an expansion service, and any transforms, standard or custom, would be accessed through the URN (path to the module). I believe this expansion service can be containerized, but I can&#39;t find the documentation so I may be wrong on that.\r\n\r\nTherefore, if I want to execute arbitrary Python code, I would need to either find a high level transform capable of accepting and running arbitrary code, or write my own expansion service to handle executing the UDFs.\r\n\r\n\r\n# What I&#39;ve tried\r\nI have tried creating a simple WordCount pipeline in Java and running an expansion service locally in a Python virtual environment. I&#39;ve been using unit tests to pass in a file and output the word counts which works fine in just Java. \r\n\r\nHowever, I am having issues setting up the transforms like in the [Beam documentation here](https://beam.apache.org/documentation/programming-guide/#1312-creating-cross-language-python-transforms). I am not able to import PythonExternalTransform and call to a method running there, so I have not successfully executed a multi-language pipeline yet. \r\n\r\nFor my local pipeline I am using 2.34.0 for the Apache Beam dependencies. I&#39;ve tried up to version 2.43.0 but have not been able to get it to work.\r\n\r\n\r\n# Questions\r\n1. Are multi-language pipelines the best way to achieve executing Python UDFs in Dataflow? Would I need to write my own expansion service?\r\n2. If multi-language pipelines are not the best way, what other options are available to me, if any? Should I look further into creating a custom container image?","title":"Execute Python UDFs in a Java Dataflow Pipeline?","body":"<p>I am currently trying to add execution of Python UDFs in a Java Dataflow pipeline. These UDFs would potentially employ third-party libraries and multiple modules.</p>\n<p>I have been reading a lot about Apache Beam multi-language pipelines, but I am becoming less certain that is the way to achieve this. I'll first summarize my understanding of how multi-language pipelines are working (I'm kind of hoping I'm missing or misunderstanding something), before getting to my questions.</p>\n<h1>Beam Multi-language Pipelines</h1>\n<p>The main purpose of a multi-language pipeline is to execute <em>transforms</em> written in another language; in my case executing transforms in the Python Beam SDK in a pipeline using the Java Beam SDK.</p>\n<p>The Python Beam SDK would be running in an expansion service, and any transforms, standard or custom, would be accessed through the URN (path to the module). I believe this expansion service can be containerized, but I can't find the documentation so I may be wrong on that.</p>\n<p>Therefore, if I want to execute arbitrary Python code, I would need to either find a high level transform capable of accepting and running arbitrary code, or write my own expansion service to handle executing the UDFs.</p>\n<h1>What I've tried</h1>\n<p>I have tried creating a simple WordCount pipeline in Java and running an expansion service locally in a Python virtual environment. I've been using unit tests to pass in a file and output the word counts which works fine in just Java.</p>\n<p>However, I am having issues setting up the transforms like in the <a href=\"https://beam.apache.org/documentation/programming-guide/#1312-creating-cross-language-python-transforms\" rel=\"nofollow noreferrer\">Beam documentation here</a>. I am not able to import PythonExternalTransform and call to a method running there, so I have not successfully executed a multi-language pipeline yet.</p>\n<p>For my local pipeline I am using 2.34.0 for the Apache Beam dependencies. I've tried up to version 2.43.0 but have not been able to get it to work.</p>\n<h1>Questions</h1>\n<ol>\n<li>Are multi-language pipelines the best way to achieve executing Python UDFs in Dataflow? Would I need to write my own expansion service?</li>\n<li>If multi-language pipelines are not the best way, what other options are available to me, if any? Should I look further into creating a custom container image?</li>\n</ol>\n"},{"tags":["java","json"],"comments":[{"owner":{"account_id":247613,"reputation":284087,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":2,"creation_date":1701894960,"post_id":77616132,"comment_id":136832948,"body_markdown":"Look at [Java says FileNotFoundException but file exists](https://stackoverflow.com/q/19307622/). But having shown this, you&#39;re probably much better off getting the data not as a file, but rather as a resource:  [open resource with relative path in Java](https://stackoverflow.com/q/573679/). Also, check out [What&#39;s the difference between a Resource, URI, URL, Path and File in Java?](https://stackoverflow.com/q/27845223/)","body":"Look at <a href=\"https://stackoverflow.com/q/19307622/\">Java says FileNotFoundException but file exists</a>. But having shown this, you&#39;re probably much better off getting the data not as a file, but rather as a resource:  <a href=\"https://stackoverflow.com/q/573679/\">open resource with relative path in Java</a>. Also, check out <a href=\"https://stackoverflow.com/q/27845223/\">What&#39;s the difference between a Resource, URI, URL, Path and File in Java?</a>"},{"owner":{"account_id":6401062,"reputation":180,"user_id":4963694,"display_name":"Captain Chaos"},"score":0,"creation_date":1701895969,"post_id":77616132,"comment_id":136833113,"body_markdown":"Your directory structure is hard to read, can you show a screenshot or otherwise improve it? I suspect this is as simple as the \\path to your config \\file you give the program, and the actual path, are different. But we can&#39;t tell without more details.","body":"Your directory structure is hard to read, can you show a screenshot or otherwise improve it? I suspect this is as simple as the \\path to your config \\file you give the program, and the actual path, are different. But we can&#39;t tell without more details."},{"owner":{"account_id":30084126,"reputation":1,"user_id":23055089,"display_name":"Code Champ"},"score":0,"creation_date":1701896674,"post_id":77616132,"comment_id":136833244,"body_markdown":"In this `resourcesloader.class.getClass().getResource(&quot;repository/SSL-Key/cert.jks&quot;).toString()\n` the resourcesloader is the class where I want to read my config file from? Or it should be config file class?","body":"In this <code>resourcesloader.class.getClass().getResource(&quot;repository&#47;SSL&zwnj;&#8203;-Key&#47;cert.jks&quot;).toSt&zwnj;&#8203;ring() </code> the resourcesloader is the class where I want to read my config file from? Or it should be config file class?"}],"answers":[{"tags":[],"owner":{"account_id":230362,"reputation":28310,"user_id":493928,"accept_rate":62,"display_name":"khachik"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1702058725,"creation_date":1702058725,"answer_id":77628442,"question_id":77616132,"body_markdown":"It is trying to load the file from:  \r\n`/configuration/jarvis-tags/ConfigurableJarvisTags.json`\r\ni.e. from the root.\r\n\r\nYou either need to make sure you current directory (when running the code) is `projects` and use the relative path:  \r\n`configuration/jarvis-tags/ConfigurableJarvisTags.json`\r\n\r\nor (better) explicitly resolve and use the full path:  \r\n`/full/path/to/project/configuration/jarvis-tags/ConfigurableJarvisTags.json`","title":"Reading Json config from different directory of same package and getting its path","body":"<p>It is trying to load the file from:<br />\n<code>/configuration/jarvis-tags/ConfigurableJarvisTags.json</code>\ni.e. from the root.</p>\n<p>You either need to make sure you current directory (when running the code) is <code>projects</code> and use the relative path:<br />\n<code>configuration/jarvis-tags/ConfigurableJarvisTags.json</code></p>\n<p>or (better) explicitly resolve and use the full path:<br />\n<code>/full/path/to/project/configuration/jarvis-tags/ConfigurableJarvisTags.json</code></p>\n"}],"owner":{"account_id":30084126,"reputation":1,"user_id":23055089,"display_name":"Code Champ"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"closed_date":1702060188,"answer_count":1,"score":-1,"last_activity_date":1702058726,"creation_date":1701894684,"question_id":77616132,"body_markdown":"I&#39;m working on a project and I&#39;m trying to read Json Config file.\r\nBut the problem is I&#39;m getting java.io.FileNotFoundException exception whenever I run my class.\r\nMy Project Structure is \r\n```\r\nproject |\r\n---&gt; configuration |\r\n-------&gt; Json file directory |\r\n-----------&gt; Json File |\r\n---&gt; src\r\n------&gt; My class directory|\r\n---------&gt; MyClass |\r\n---&gt; test |\r\n------&gt; My testClass Directory |\r\n----------&gt; MyClassTest |\r\n```\r\nMy code for reference :\r\n\r\n```\r\ntry {\r\n            final InputStream pathToConfigurableJarvisTagFile = new FileInputStream(&quot;/configuration/jarvis-tags/ConfigurableJarvisTags.json&quot;);\r\n\r\n            fileReader = new InputStreamReader(pathToConfigurableJarvisTagFile, StandardCharsets.UTF_8);\r\n\r\n```\r\n\r\nI got the below exception \r\n```\r\njava.io.FileNotFoundException: /configuration/jarvis-tags/ConfigurableJarvisTags.json (No such file or directory)\r\n    [junit] java.lang.RuntimeException: java.io.FileNotFoundException: /configuration/jarvis-tags/ConfigurableJarvisTags.json (No such file or directory)\r\n```\r\nIt is not able to find the file. How do I modify the above code to read config file/get the path of file from a different folder? \r\n\r\n\r\n\r\nI tried this https://stackoverflow.com/questions/4164011/how-to-get-correct-path-of-configuration-file","title":"Reading Json config from different directory of same package and getting its path","body":"<p>I'm working on a project and I'm trying to read Json Config file.\nBut the problem is I'm getting java.io.FileNotFoundException exception whenever I run my class.\nMy Project Structure is</p>\n<pre><code>project |\n---&gt; configuration |\n-------&gt; Json file directory |\n-----------&gt; Json File |\n---&gt; src\n------&gt; My class directory|\n---------&gt; MyClass |\n---&gt; test |\n------&gt; My testClass Directory |\n----------&gt; MyClassTest |\n</code></pre>\n<p>My code for reference :</p>\n<pre><code>try {\n            final InputStream pathToConfigurableJarvisTagFile = new FileInputStream(&quot;/configuration/jarvis-tags/ConfigurableJarvisTags.json&quot;);\n\n            fileReader = new InputStreamReader(pathToConfigurableJarvisTagFile, StandardCharsets.UTF_8);\n\n</code></pre>\n<p>I got the below exception</p>\n<pre><code>java.io.FileNotFoundException: /configuration/jarvis-tags/ConfigurableJarvisTags.json (No such file or directory)\n    [junit] java.lang.RuntimeException: java.io.FileNotFoundException: /configuration/jarvis-tags/ConfigurableJarvisTags.json (No such file or directory)\n</code></pre>\n<p>It is not able to find the file. How do I modify the above code to read config file/get the path of file from a different folder?</p>\n<p>I tried this <a href=\"https://stackoverflow.com/questions/4164011/how-to-get-correct-path-of-configuration-file\">How to get correct path of configuration file?</a></p>\n"},{"tags":["java","eclipse","tomcat","openshift"],"comments":[{"owner":{"account_id":7039380,"reputation":374,"user_id":5392317,"display_name":"wilsonW"},"score":0,"creation_date":1494587359,"post_id":43936279,"comment_id":74904556,"body_markdown":"Are you sure this must come from github only? Other git services arn&#39;t allowed?","body":"Are you sure this must come from github only? Other git services arn&#39;t allowed?"}],"answers":[{"tags":[],"owner":{"account_id":7039380,"reputation":374,"user_id":5392317,"display_name":"wilsonW"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1494588792,"creation_date":1494588792,"answer_id":43936816,"question_id":43936279,"body_markdown":"I think you can use another git service than github, for example [bitbucket][1].\n\nOn bitbucket you can create private git projects\n\nOnce your bitbucket account and project are created change the openshift&#39;s parameter `SOUCE_REPOSITORY_URL` with `https://USERNAME:PASSWORD@bitbucket.org/USERNAME/PROJECT_NAME.git` \n\nNow you can create your project into openshift, it&#39;ll clone the hidden repo and no one will be able to see what&#39;s in it.\n\nHope it Helps\n\n  [1]: https://bitbucket.org/product","title":"Tomcat hosting, openshift through GitHub, specific pages hidden?","body":"<p>I think you can use another git service than github, for example <a href=\"https://bitbucket.org/product\" rel=\"nofollow noreferrer\">bitbucket</a>.</p>\n<p>On bitbucket you can create private git projects</p>\n<p>Once your bitbucket account and project are created change the openshift's parameter <code>SOUCE_REPOSITORY_URL</code> with <code>https://USERNAME:PASSWORD@bitbucket.org/USERNAME/PROJECT_NAME.git</code></p>\n<p>Now you can create your project into openshift, it'll clone the hidden repo and no one will be able to see what's in it.</p>\n<p>Hope it Helps</p>\n"},{"tags":[],"owner":{"account_id":4664162,"reputation":496,"user_id":3777613,"display_name":"monis"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1494636780,"creation_date":1494636780,"answer_id":43948196,"question_id":43936279,"body_markdown":"Instead of worrying about making certain pages private, make everything public and use [secrets as environment variables][1].  That is, make your passwords a configuration detail, not something that is committed to your repo.\n\n\n  [1]: https://kubernetes.io/docs/concepts/configuration/secret/#using-secrets-as-environment-variables","title":"Tomcat hosting, openshift through GitHub, specific pages hidden?","body":"<p>Instead of worrying about making certain pages private, make everything public and use <a href=\"https://kubernetes.io/docs/concepts/configuration/secret/#using-secrets-as-environment-variables\" rel=\"nofollow noreferrer\">secrets as environment variables</a>.  That is, make your passwords a configuration detail, not something that is committed to your repo.</p>\n"}],"owner":{"account_id":9449559,"reputation":31,"user_id":7026978,"display_name":"brecht ph"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":46,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1702057966,"creation_date":1494587106,"question_id":43936279,"body_markdown":"I made a dynamic webproject in Eclipse. Its made in java (which I kind of regret already) and was lookin for a hosting service to put it online. I read through some threads and one service I saw many times was openshift. So I was following the tutorial and it mentions something with getting the code from GitHub. Now the problem is that I want to keep the costs so low as possible so I don&#39;t want to pay for a private GitHub account. Is it possible to keep certain pages from the project hidden for public? The things that manages passwords and such?\r\nMaybe its just easier to rewrite it in PHP?","title":"Tomcat hosting, openshift through GitHub, specific pages hidden?","body":"<p>I made a dynamic webproject in Eclipse. Its made in java (which I kind of regret already) and was lookin for a hosting service to put it online. I read through some threads and one service I saw many times was openshift. So I was following the tutorial and it mentions something with getting the code from GitHub. Now the problem is that I want to keep the costs so low as possible so I don't want to pay for a private GitHub account. Is it possible to keep certain pages from the project hidden for public? The things that manages passwords and such?\nMaybe its just easier to rewrite it in PHP?</p>\n"},{"tags":["java","eclipse","exception","maven-2"],"comments":[{"owner":{"account_id":13581,"reputation":16779,"user_id":27404,"accept_rate":51,"display_name":"swalkner"},"score":3,"creation_date":1246115644,"post_id":1052978,"comment_id":864534,"body_markdown":"I get the same error when trying to run a simple HelloWorld class with no JUnit included... More exactly:\n\njava.lang.NoClassDefFoundError: HelloWorld\nCaused by: java.lang.ClassNotFoundException: HelloWorld","body":"I get the same error when trying to run a simple HelloWorld class with no JUnit included... More exactly:  java.lang.NoClassDefFoundError: HelloWorld Caused by: java.lang.ClassNotFoundException: HelloWorld"},{"owner":{"account_id":36166,"reputation":38839,"user_id":103043,"display_name":"akf"},"score":0,"creation_date":1246115798,"post_id":1052978,"comment_id":864539,"body_markdown":"ClassNotFoundException is thrown when trying to reflect on a class.  NoClassDefFoundError is thrown when you are trying to use the class in a normal method call.","body":"ClassNotFoundException is thrown when trying to reflect on a class.  NoClassDefFoundError is thrown when you are trying to use the class in a normal method call."},{"owner":{"account_id":36166,"reputation":38839,"user_id":103043,"display_name":"akf"},"score":0,"creation_date":1246119223,"post_id":1052978,"comment_id":864630,"body_markdown":"can you show the code for your test class?","body":"can you show the code for your test class?"},{"owner":{"account_id":30387,"reputation":62460,"user_id":82865,"accept_rate":71,"display_name":"Jonathan Holloway"},"score":0,"creation_date":1246126033,"post_id":1052978,"comment_id":864905,"body_markdown":"do you have build automatically turned on or off?","body":"do you have build automatically turned on or off?"},{"owner":{"account_id":13581,"reputation":16779,"user_id":27404,"accept_rate":51,"display_name":"swalkner"},"score":0,"creation_date":1246130761,"post_id":1052978,"comment_id":865060,"body_markdown":"build automatically is turned on","body":"build automatically is turned on"},{"owner":{"display_name":"user689711"},"score":0,"creation_date":1314031942,"post_id":1052978,"comment_id":8577573,"body_markdown":"Thanks a lot to Carlos.My problem is solved.\r\nLink to carlos post :\r\n&lt;http://stackoverflow.com/questions/1052978/eclipse-java-lang-classnotfoundexception/1062435#1062435&gt;","body":"Thanks a lot to Carlos.My problem is solved.  Link to carlos post :  &lt;<a href=\"http://stackoverflow.com/questions/1052978/eclipse-java-lang-classnotfoundexception/1062435#1062435\" title=\"eclipse java lang classnotfoundexception\">stackoverflow.com/questions/1052978/&hellip;</a>&gt;"},{"owner":{"display_name":"user689711"},"score":0,"creation_date":1314032059,"post_id":1052978,"comment_id":8577588,"body_markdown":"Thanks a lot to Carlos.My problem is solved.\r\nLink to carlos post :\r\nhttp://stackoverflow.com/questions/1052978/eclipse-java-lang-classnotfoundexception/1062435#1062435","body":"Thanks a lot to Carlos.My problem is solved.  Link to carlos post :  <a href=\"http://stackoverflow.com/questions/1052978/eclipse-java-lang-classnotfoundexception/1062435#1062435\" title=\"eclipse java lang classnotfoundexception\">stackoverflow.com/questions/1052978/&hellip;</a>"},{"owner":{"account_id":10210941,"reputation":1,"user_id":7538089,"display_name":"Soudamini"},"score":0,"creation_date":1486613211,"post_id":1052978,"comment_id":71427484,"body_markdown":"First of all avoid creating a .java class with a main method in the project. If its created the project will start its execution from main and if its deleted in future the project wont work well. If so happens kindly go to run-&gt; run configurations-&gt; java-&gt; right click on main class-&gt; delete the class. now your project is ready to run.","body":"First of all avoid creating a .java class with a main method in the project. If its created the project will start its execution from main and if its deleted in future the project wont work well. If so happens kindly go to run-&gt; run configurations-&gt; java-&gt; right click on main class-&gt; delete the class. now your project is ready to run."}],"answers":[{"tags":[],"owner":{"account_id":36166,"reputation":38839,"user_id":103043,"display_name":"akf"},"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1246149291,"creation_date":1246115540,"answer_id":1053008,"question_id":1052978,"body_markdown":"your build classpath is correct, which is why you can compile.  the classpath for your JUnit needs to be checked.  go to the Run menu and choose &#39;open run dialog.&#39;  in there you should see a tree on the left with JUnit as an option.  open that node and find and select your test.  on the right pane you will see a tab for classpath.  take a look to ensure that your class that the test is trying to instantiate would be found.\r\n\r\n**edit:**\r\n\r\nthis seems to be an issue with maven and its behavior after a release changed the default Eclipse output folders.  i have seen solutions described where \r\n\r\n - placing maven into the bootclasspath ABOVE the jre works, or \r\n - running `mvn clean test` does the trick or \r\n - refreshing all of your eclipse projects, causing a rebuild fixes the problem\r\n - **going to your project and selecting Maven-&gt;Update Configuration solve the problem**\r\n\r\nwith the first three, there were reports of the issue recurring.  the last looks best to me, but if it doesnt work, please try the others.\r\n\r\n[here][1] and [here][2] is some info\r\n\r\n\r\n  [1]: http://blog.xemantic.com/2008/06/maven-integration-for-eclipse-and.html?widgetType=BlogArchive&amp;widgetId=BlogArchive1&amp;action=toggle&amp;dir=close&amp;toggle=YEARLY-1199142000000&amp;toggleopen=MONTHLY-1220220000000\r\n  [2]: http://jira.codehaus.org/browse/MECLIPSE-132","title":"Eclipse - java.lang.ClassNotFoundException","body":"<p>your build classpath is correct, which is why you can compile.  the classpath for your JUnit needs to be checked.  go to the Run menu and choose 'open run dialog.'  in there you should see a tree on the left with JUnit as an option.  open that node and find and select your test.  on the right pane you will see a tab for classpath.  take a look to ensure that your class that the test is trying to instantiate would be found.</p>\n\n<p><strong>edit:</strong></p>\n\n<p>this seems to be an issue with maven and its behavior after a release changed the default Eclipse output folders.  i have seen solutions described where </p>\n\n<ul>\n<li>placing maven into the bootclasspath ABOVE the jre works, or </li>\n<li>running <code>mvn clean test</code> does the trick or </li>\n<li>refreshing all of your eclipse projects, causing a rebuild fixes the problem</li>\n<li><strong>going to your project and selecting Maven->Update Configuration solve the problem</strong></li>\n</ul>\n\n<p>with the first three, there were reports of the issue recurring.  the last looks best to me, but if it doesnt work, please try the others.</p>\n\n<p><a href=\"http://blog.xemantic.com/2008/06/maven-integration-for-eclipse-and.html?widgetType=BlogArchive&amp;widgetId=BlogArchive1&amp;action=toggle&amp;dir=close&amp;toggle=YEARLY-1199142000000&amp;toggleopen=MONTHLY-1220220000000\" rel=\"noreferrer\">here</a> and <a href=\"http://jira.codehaus.org/browse/MECLIPSE-132\" rel=\"noreferrer\">here</a> is some info</p>\n"},{"tags":[],"owner":{"account_id":30387,"reputation":62460,"user_id":82865,"accept_rate":71,"display_name":"Jonathan Holloway"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1246126137,"creation_date":1246126137,"answer_id":1053353,"question_id":1052978,"body_markdown":"Hmm, looks a little bizarre, try running it with the following annotation at the top of the class:\r\n\r\n    @RunWith(SpringJUnit4ClassRunner.class)\r\n    public class UserDaoTest {\r\n    }\r\n\r\nand let me know how you get on with it.    \r\n\r\nCheck that you have build automatically enabled as well.  If you want to make sure your test classes are being compiled correctly clear out the Maven target folder (and any bin folder that Eclipse may be using).  Are you using m2eclipse as well, as I find it to be a little problematic.","title":"Eclipse - java.lang.ClassNotFoundException","body":"<p>Hmm, looks a little bizarre, try running it with the following annotation at the top of the class:</p>\n\n<pre><code>@RunWith(SpringJUnit4ClassRunner.class)\npublic class UserDaoTest {\n}\n</code></pre>\n\n<p>and let me know how you get on with it.    </p>\n\n<p>Check that you have build automatically enabled as well.  If you want to make sure your test classes are being compiled correctly clear out the Maven target folder (and any bin folder that Eclipse may be using).  Are you using m2eclipse as well, as I find it to be a little problematic.</p>\n"},{"tags":[],"owner":{"account_id":13780,"reputation":2893,"user_id":27866,"accept_rate":60,"display_name":"Carlos"},"down_vote_count":0,"up_vote_count":201,"is_accepted":true,"score":201,"last_activity_date":1671704177,"creation_date":1246350464,"answer_id":1062435,"question_id":1052978,"body_markdown":"I&#39;ve come across that situation several times and, after a lot of attempts, I found the solution.\r\n\r\n*Check your project build-path and enable specific output folders for each folder.* Go one by one though each source-folder of your project and set the output folder that maven would use. \r\n\r\nFor example, your web project&#39;s `src/main/java` should have `target/classes` under the web project, test classes should have `target/test-classes` also under the web project and so.\r\n\r\nUsing this configuration will allow you to execute unit tests in eclipse.\r\n\r\nJust one more advice, if your web project&#39;s tests require some configuration files that are under the resources, be sure to include that folder as a source folder and to make the proper build-path configuration.","title":"Eclipse - java.lang.ClassNotFoundException","body":"<p>I've come across that situation several times and, after a lot of attempts, I found the solution.</p>\n<p><em>Check your project build-path and enable specific output folders for each folder.</em> Go one by one though each source-folder of your project and set the output folder that maven would use.</p>\n<p>For example, your web project's <code>src/main/java</code> should have <code>target/classes</code> under the web project, test classes should have <code>target/test-classes</code> also under the web project and so.</p>\n<p>Using this configuration will allow you to execute unit tests in eclipse.</p>\n<p>Just one more advice, if your web project's tests require some configuration files that are under the resources, be sure to include that folder as a source folder and to make the proper build-path configuration.</p>\n"},{"tags":[],"owner":{"display_name":"Ramon"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1252798785,"creation_date":1252798785,"answer_id":1416466,"question_id":1052978,"body_markdown":"This was my solution to the problem. Of course, many things can cause it to occur. For me it was that Maven2 (not the plugin for Eclipse) was setting the eclipse profile up to use a different builder (aspectJ) but I did not have the plugin in eclipse./\r\n\r\nhttp://rbtech.blogspot.com/2009/09/eclipse-galileo-javalangclassnotfoundex.html\r\n\r\nCheers\r\nRamon Buckland","title":"Eclipse - java.lang.ClassNotFoundException","body":"<p>This was my solution to the problem. Of course, many things can cause it to occur. For me it was that Maven2 (not the plugin for Eclipse) was setting the eclipse profile up to use a different builder (aspectJ) but I did not have the plugin in eclipse./</p>\n\n<p><a href=\"http://rbtech.blogspot.com/2009/09/eclipse-galileo-javalangclassnotfoundex.html\" rel=\"nofollow noreferrer\">http://rbtech.blogspot.com/2009/09/eclipse-galileo-javalangclassnotfoundex.html</a></p>\n\n<p>Cheers\nRamon Buckland</p>\n"},{"tags":[],"owner":{"account_id":587724,"reputation":1,"user_id":267327,"display_name":"Sachin"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1265395279,"creation_date":1265395279,"answer_id":2209486,"question_id":1052978,"body_markdown":"Its very Old  Jul (which year) but I had the same problem . \r\n\r\nActual issue found that eclipse was not able to generate class file for the java file , classpath was proper. \r\n\r\nSee the problem tab and check if your project is missing something/file. \r\nyou can create a new proj and add files one by one and build them until it stops compiling \r\nand creating classes ( check the workspace/proj/bin/package/  folder for classes )\r\n\r\nits wierd but true , ecplise was failing in compliation because 4 of 20 java files were using a single image which was missing. and as result none of the java file was compiled . \r\n\r\n**CLASSPATH is not a issue here.** ","title":"Eclipse - java.lang.ClassNotFoundException","body":"<p>Its very Old  Jul (which year) but I had the same problem . </p>\n\n<p>Actual issue found that eclipse was not able to generate class file for the java file , classpath was proper. </p>\n\n<p>See the problem tab and check if your project is missing something/file. \nyou can create a new proj and add files one by one and build them until it stops compiling \nand creating classes ( check the workspace/proj/bin/package/  folder for classes )</p>\n\n<p>its wierd but true , ecplise was failing in compliation because 4 of 20 java files were using a single image which was missing. and as result none of the java file was compiled . </p>\n\n<p><strong>CLASSPATH is not a issue here.</strong> </p>\n"},{"tags":[],"owner":{"account_id":644546,"reputation":257,"user_id":420031,"display_name":"Mike"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1281735357,"creation_date":1281735357,"answer_id":3480827,"question_id":1052978,"body_markdown":"The solution to my problem which was similar: the libs were invalid. If you look in the .classpath file of the project, you&#39;ll see classpathentry tags with the key/value kind=&quot;lib&quot;. Some of mine were incorrect.\r\n\r\nI didn&#39;t discover this until I turned off Validation settings. That is, there were so many errors in the JSP files, etc, that the classpath errors weren&#39;t evident (or possibly even showing up). As a result, nothing was being compiled into the destination output folders, but no helpful errors on why.","title":"Eclipse - java.lang.ClassNotFoundException","body":"<p>The solution to my problem which was similar: the libs were invalid. If you look in the .classpath file of the project, you'll see classpathentry tags with the key/value kind=\"lib\". Some of mine were incorrect.</p>\n\n<p>I didn't discover this until I turned off Validation settings. That is, there were so many errors in the JSP files, etc, that the classpath errors weren't evident (or possibly even showing up). As a result, nothing was being compiled into the destination output folders, but no helpful errors on why.</p>\n"},{"tags":[],"owner":{"account_id":308578,"reputation":41,"user_id":620540,"display_name":"cmh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1365757516,"creation_date":1297901136,"answer_id":5023704,"question_id":1052978,"body_markdown":"I was hit with this issue also and was able to come up with a sufficient solution for my case.  If your Eclipse project has a .classpath file in your project root (see it in Navigator view instead of Package Explorer view), be sure that your Maven classpathentry appears prior to your JRE Container classpathentry.\r\n\r\n&lt;!-- language: xml --&gt;\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;classpath&gt;\r\n    \t&lt;classpathentry kind=&quot;con&quot; path=&quot;org.maven.ide.eclipse.MAVEN2_CLASSPATH_CONTAINER&quot;/&gt;\r\n    \t&lt;classpathentry kind=&quot;con&quot; path=&quot;org.eclipse.jdt.launching.JRE_CONTAINER&quot;/&gt;\r\n    &lt;/classpath&gt;\r\n\r\nIf your project does not have a .classpath file, you can edit your project&#39;s Java Build Path to switch the Order and Export.  If your project has the .classpath file and you only change your ordering in the Java Build Path, you will see that the ordering is not impacted and the issue will continue to occur.\r\n\r\nAnd a project-&gt;clean never hurts things after you make the change.","title":"Eclipse - java.lang.ClassNotFoundException","body":"<p>I was hit with this issue also and was able to come up with a sufficient solution for my case.  If your Eclipse project has a .classpath file in your project root (see it in Navigator view instead of Package Explorer view), be sure that your Maven classpathentry appears prior to your JRE Container classpathentry.</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;classpath&gt;\n    &lt;classpathentry kind=\"con\" path=\"org.maven.ide.eclipse.MAVEN2_CLASSPATH_CONTAINER\"/&gt;\n    &lt;classpathentry kind=\"con\" path=\"org.eclipse.jdt.launching.JRE_CONTAINER\"/&gt;\n&lt;/classpath&gt;\n</code></pre>\n\n<p>If your project does not have a .classpath file, you can edit your project's Java Build Path to switch the Order and Export.  If your project has the .classpath file and you only change your ordering in the Java Build Path, you will see that the ordering is not impacted and the issue will continue to occur.</p>\n\n<p>And a project->clean never hurts things after you make the change.</p>\n"},{"tags":[],"owner":{"account_id":215223,"reputation":2949,"user_id":469718,"accept_rate":12,"display_name":"kisna"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1302012389,"creation_date":1302012389,"answer_id":5553181,"question_id":1052978,"body_markdown":"Sachin&#39;s right:\r\nEven with correct class path, the problems tab will show that some dependency or the Resource/project has error that needs to be fixed in order for maven to automatically build and create classes when you create or make a change in your test class.\r\n\r\n&quot;Hi,\r\n\r\nIts very Old Jul (which year) but I had the same problem .\r\n\r\nActual issue found that eclipse was not able to generate class file for the java file , classpath was proper.\r\n\r\nSee the problem tab and check if your project is missing something/file. you can create a new proj and add files one by one and build them until it stops compiling and creating classes ( check the workspace/proj/bin/package/ folder for classes )\r\n\r\nits wierd but true , ecplise was failing in compliation because 4 of 20 java files were using a single image which was missing. and as result none of the java file was compiled .\r\n\r\nCLASSPATH is not a issue here.&quot;\r\n","title":"Eclipse - java.lang.ClassNotFoundException","body":"<p>Sachin's right:\nEven with correct class path, the problems tab will show that some dependency or the Resource/project has error that needs to be fixed in order for maven to automatically build and create classes when you create or make a change in your test class.</p>\n\n<p>\"Hi,</p>\n\n<p>Its very Old Jul (which year) but I had the same problem .</p>\n\n<p>Actual issue found that eclipse was not able to generate class file for the java file , classpath was proper.</p>\n\n<p>See the problem tab and check if your project is missing something/file. you can create a new proj and add files one by one and build them until it stops compiling and creating classes ( check the workspace/proj/bin/package/ folder for classes )</p>\n\n<p>its wierd but true , ecplise was failing in compliation because 4 of 20 java files were using a single image which was missing. and as result none of the java file was compiled .</p>\n\n<p>CLASSPATH is not a issue here.\"</p>\n"},{"tags":[],"owner":{"account_id":324417,"reputation":1087,"user_id":644977,"accept_rate":100,"display_name":"CoffeJunky"},"down_vote_count":21,"up_vote_count":68,"is_accepted":false,"score":47,"last_activity_date":1364929819,"creation_date":1302092493,"answer_id":5566238,"question_id":1052978,"body_markdown":"Carlos approach helped!\r\nhttps://stackoverflow.com/questions/1052978/eclipse-java-lang-classnotfoundexception/1062435#1062435\r\n\r\nTry to check the classpath of the junit run configuration:\r\n\r\n 1. Open your run configurations\r\n 2. Click on the jUnit-Test you want to start\r\n 3. go to the classpath tab\r\n 4. Try to add a folder (click on user entries, click on advanced, click on add folders, click on ok and search the outputfolder for your test classes(those you find under projektproperties java build path, source))\r\n\r\nworks for me.\r\n\r\n","title":"Eclipse - java.lang.ClassNotFoundException","body":"<p>Carlos approach helped!\n<a href=\"https://stackoverflow.com/questions/1052978/eclipse-java-lang-classnotfoundexception/1062435#1062435\">Eclipse - java.lang.ClassNotFoundException</a></p>\n\n<p>Try to check the classpath of the junit run configuration:</p>\n\n<ol>\n<li>Open your run configurations</li>\n<li>Click on the jUnit-Test you want to start</li>\n<li>go to the classpath tab</li>\n<li>Try to add a folder (click on user entries, click on advanced, click on add folders, click on ok and search the outputfolder for your test classes(those you find under projektproperties java build path, source))</li>\n</ol>\n\n<p>works for me.</p>\n"},{"tags":[],"owner":{"account_id":32689,"reputation":21905,"user_id":90874,"accept_rate":52,"display_name":"thSoft"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1365757541,"creation_date":1309958371,"answer_id":6597063,"question_id":1052978,"body_markdown":"Make sure your test launch configuration does NOT contain the following lines, OR try enabling automated Maven dependency management.\r\n\r\n&lt;!-- language: xml --&gt;\r\n\r\n    &lt;stringAttribute key=&quot;org.eclipse.jdt.launching.CLASSPATH_PROVIDER&quot; value=&quot;org.maven.ide.eclipse.launchconfig.classpathProvider&quot;/&gt;\r\n    &lt;stringAttribute key=&quot;org.eclipse.jdt.launching.SOURCE_PATH_PROVIDER&quot; value=&quot;org.maven.ide.eclipse.launchconfig.sourcepathProvider&quot;/&gt;","title":"Eclipse - java.lang.ClassNotFoundException","body":"<p>Make sure your test launch configuration does NOT contain the following lines, OR try enabling automated Maven dependency management.</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;stringAttribute key=\"org.eclipse.jdt.launching.CLASSPATH_PROVIDER\" value=\"org.maven.ide.eclipse.launchconfig.classpathProvider\"/&gt;\n&lt;stringAttribute key=\"org.eclipse.jdt.launching.SOURCE_PATH_PROVIDER\" value=\"org.maven.ide.eclipse.launchconfig.sourcepathProvider\"/&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1324449,"reputation":11,"user_id":1269594,"display_name":"iunknown"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1351230583,"creation_date":1331743428,"answer_id":9706227,"question_id":1052978,"body_markdown":"click on `project-&gt;properties-&gt;Java build path-&gt;Source` and check each `src` folder is still valid exist or recently removed. Correct any missing path or incorrect path and rebuild and run the test. It will fix the problem.","title":"Eclipse - java.lang.ClassNotFoundException","body":"<p>click on <code>project-&gt;properties-&gt;Java build path-&gt;Source</code> and check each <code>src</code> folder is still valid exist or recently removed. Correct any missing path or incorrect path and rebuild and run the test. It will fix the problem.</p>\n"},{"tags":[],"owner":{"account_id":1460250,"reputation":21,"user_id":1374776,"display_name":"Romie"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1336129300,"creation_date":1336129300,"answer_id":10447547,"question_id":1052978,"body_markdown":"We had the exact exception (using SpringSource Tools, tomcat, on Win7) and the cause was that we had refactored a filename (renamed a file) from SubDomain.java to Subdomain.java (D vs d) and somehow it collided though SpringSource was showing the new name Subdomain.java. The solution was to delete the file (via SpringSource) and create it again under the name Subdomain.java and copy-pasting its former content. Simple as that.\r\n","title":"Eclipse - java.lang.ClassNotFoundException","body":"<p>We had the exact exception (using SpringSource Tools, tomcat, on Win7) and the cause was that we had refactored a filename (renamed a file) from SubDomain.java to Subdomain.java (D vs d) and somehow it collided though SpringSource was showing the new name Subdomain.java. The solution was to delete the file (via SpringSource) and create it again under the name Subdomain.java and copy-pasting its former content. Simple as that.</p>\n"},{"tags":[],"owner":{"account_id":1144020,"reputation":162,"user_id":1127192,"display_name":"Tapas Adhikary"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1340774433,"creation_date":1340774433,"answer_id":11219869,"question_id":1052978,"body_markdown":"Please point to correct JDK from Windows &gt; Preferences &gt; Java &gt; Installed JRE.\r\n\r\nDo not point to jre, point to a proper JDK. I pointed to JDK 1.6U29 and refreshed the project.\r\n\r\nHereafter, the issue is gone and jUnit Tests are working fine.\r\n\r\nThanks,\r\n&lt;br&gt;\r\n-Tapas","title":"Eclipse - java.lang.ClassNotFoundException","body":"<p>Please point to correct JDK from Windows > Preferences > Java > Installed JRE.</p>\n\n<p>Do not point to jre, point to a proper JDK. I pointed to JDK 1.6U29 and refreshed the project.</p>\n\n<p>Hereafter, the issue is gone and jUnit Tests are working fine.</p>\n\n<p>Thanks,\n<br>\n-Tapas</p>\n"},{"tags":[],"owner":{"account_id":1717998,"reputation":51,"user_id":1574671,"display_name":"EvilFish"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1344011360,"creation_date":1344011360,"answer_id":11799703,"question_id":1052978,"body_markdown":"The problem might be missing the class file in your build folder. One solution is clean the project and rebuild it. ","title":"Eclipse - java.lang.ClassNotFoundException","body":"<p>The problem might be missing the class file in your build folder. One solution is clean the project and rebuild it. </p>\n"},{"tags":[],"owner":{"account_id":228053,"reputation":7259,"user_id":490123,"accept_rate":76,"display_name":"KomodoDave"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1347285085,"creation_date":1347285085,"answer_id":12353111,"question_id":1052978,"body_markdown":"There are many convoluted suggestions here.\r\n\r\nI&#39;ve encountered this problem multiple times with Maven projects after moving resources around by drag &#39;n&#39; drop, or performing refactoring of class names.\r\n\r\nIf this occurs, simply copy (not move) the problem Test Case (`.java`) via terminal/file browser to another location, `right-click -&gt; Delete` in Eclipse and choose to delete on disk when given the option, move/copy the copied file to the original file location, then select your project in Eclipse and press F5 to refresh resources.\r\n\r\nThis is quick and easy to do, and has fixed the problem permanently for me every time.","title":"Eclipse - java.lang.ClassNotFoundException","body":"<p>There are many convoluted suggestions here.</p>\n\n<p>I've encountered this problem multiple times with Maven projects after moving resources around by drag 'n' drop, or performing refactoring of class names.</p>\n\n<p>If this occurs, simply copy (not move) the problem Test Case (<code>.java</code>) via terminal/file browser to another location, <code>right-click -&gt; Delete</code> in Eclipse and choose to delete on disk when given the option, move/copy the copied file to the original file location, then select your project in Eclipse and press F5 to refresh resources.</p>\n\n<p>This is quick and easy to do, and has fixed the problem permanently for me every time.</p>\n"},{"tags":[],"owner":{"account_id":1859557,"reputation":37,"user_id":1684412,"display_name":"Starfox275"},"down_vote_count":2,"up_vote_count":4,"is_accepted":false,"score":2,"last_activity_date":1348095021,"creation_date":1348094420,"answer_id":12503879,"question_id":1052978,"body_markdown":"I had the exact same problem but I figured it out! Go to your project file and right click on it, then click `Refresh` or hit F5. Then try and run it.  If it still doesn&#39;t work then just forget it, as I had the EXACT same problem and it just means you version of Eclipse is garbage.\r\n\r\n","title":"Eclipse - java.lang.ClassNotFoundException","body":"<p>I had the exact same problem but I figured it out! Go to your project file and right click on it, then click <code>Refresh</code> or hit F5. Then try and run it.  If it still doesn't work then just forget it, as I had the EXACT same problem and it just means you version of Eclipse is garbage.</p>\n"},{"tags":[],"owner":{"account_id":456226,"reputation":175,"user_id":854901,"accept_rate":43,"display_name":"HZhang"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1359162434,"creation_date":1359162434,"answer_id":14532726,"question_id":1052978,"body_markdown":"I&#39;ve run into a same error in Eclipse recently, i.e., the Eclipse IDE couldn&#39;t find the Unit test class no matter how I change the configurations. Learning from the previous posts here and in other web sites, I&#39;ve double checked and triple checked the classpath and source info, and move up and down the source folder and libraries, in both the &quot;Run Configuration&quot; and the &quot;Java Build Path&quot; config windows, and I&#39;ve also cleaned the Project and rebuilt it, but none of the tricks work for me. The specific Java project is an old ANT compiled project and have lots of jars included in Eclipse library.\r\n\r\nThen, I changed the unit test class to add a main() method and right click it to &quot;Run As&quot; a Java Application instead of JUnit test, and suddenly, Eclipse seems to wake up and identified the class correctly. Afterwards, I switched it back to a Unit test application, and it is still working.\r\n\r\nThis seems to be a bug in Eclipse, I am guessing the large number of libraries (&gt;260) may confused the JVM&#39;s ability to locate my JUnit class. ","title":"Eclipse - java.lang.ClassNotFoundException","body":"<p>I've run into a same error in Eclipse recently, i.e., the Eclipse IDE couldn't find the Unit test class no matter how I change the configurations. Learning from the previous posts here and in other web sites, I've double checked and triple checked the classpath and source info, and move up and down the source folder and libraries, in both the \"Run Configuration\" and the \"Java Build Path\" config windows, and I've also cleaned the Project and rebuilt it, but none of the tricks work for me. The specific Java project is an old ANT compiled project and have lots of jars included in Eclipse library.</p>\n\n<p>Then, I changed the unit test class to add a main() method and right click it to \"Run As\" a Java Application instead of JUnit test, and suddenly, Eclipse seems to wake up and identified the class correctly. Afterwards, I switched it back to a Unit test application, and it is still working.</p>\n\n<p>This seems to be a bug in Eclipse, I am guessing the large number of libraries (>260) may confused the JVM's ability to locate my JUnit class. </p>\n"},{"tags":[],"owner":{"account_id":263142,"reputation":9391,"user_id":548526,"accept_rate":70,"display_name":"Siddharth"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1365082021,"creation_date":1365082021,"answer_id":15812644,"question_id":1052978,"body_markdown":"All I did was Properties -&gt; Java Build Path -&gt; Order and Export -&gt; Enabled all unchecked boxes -&gt; moved Junit all the way up","title":"Eclipse - java.lang.ClassNotFoundException","body":"<p>All I did was Properties -> Java Build Path -> Order and Export -> Enabled all unchecked boxes -> moved Junit all the way up</p>\n"},{"tags":[],"owner":{"account_id":2592275,"reputation":470,"user_id":2246725,"display_name":"user2246725"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1365537302,"creation_date":1365537302,"answer_id":15911295,"question_id":1052978,"body_markdown":"**Tried** \r\n\r\n    Link : [here][1]\r\n    \r\n    Open your run configurations\r\n    Click on the jUnit-Test you want to start\r\n    go to the classpath tab\r\n    Try to add a folder (click on user entries, click on advanced, click on add folders,click on ok and search the outputfolder for your test classes(those you find under projektproperties java build path, source))\r\n\r\n**worked after** \r\n\r\n   Maven 2 LifeCycle &gt;&gt; test \r\n    ","title":"Eclipse - java.lang.ClassNotFoundException","body":"<p><strong>Tried</strong> </p>\n\n<pre><code>Link : [here][1]\n\nOpen your run configurations\nClick on the jUnit-Test you want to start\ngo to the classpath tab\nTry to add a folder (click on user entries, click on advanced, click on add folders,click on ok and search the outputfolder for your test classes(those you find under projektproperties java build path, source))\n</code></pre>\n\n<p><strong>worked after</strong> </p>\n\n<p>Maven 2 LifeCycle >> test </p>\n"},{"tags":[],"owner":{"account_id":60171,"reputation":115485,"user_id":179850,"accept_rate":100,"display_name":"Gray"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1365721883,"creation_date":1365721883,"answer_id":15960435,"question_id":1052978,"body_markdown":"I had tried all of the solutions on this page: refresh project, rebuild, all projects clean, restart Eclipse, re-import (even) the projects, rebuild maven and refresh.  Nothing worked.  What _did_ work was copying the class to a _new name_ which runs fine -- bizarre but true.\r\n\r\nAfter putting up with this for some time, I just fixed it by:\r\n\r\n1. Via the `Run` menu\r\n2. Select `Run Configurations`\r\n3. Choose the run configuration that is associated with your unit test.\r\n4. Removing the entry from the `Run Configuration` by pressing delete or clicking the red X.\r\n\r\nSomething must have been screwed up with the cached run configuration.\r\n","title":"Eclipse - java.lang.ClassNotFoundException","body":"<p>I had tried all of the solutions on this page: refresh project, rebuild, all projects clean, restart Eclipse, re-import (even) the projects, rebuild maven and refresh.  Nothing worked.  What <em>did</em> work was copying the class to a <em>new name</em> which runs fine -- bizarre but true.</p>\n\n<p>After putting up with this for some time, I just fixed it by:</p>\n\n<ol>\n<li>Via the <code>Run</code> menu</li>\n<li>Select <code>Run Configurations</code></li>\n<li>Choose the run configuration that is associated with your unit test.</li>\n<li>Removing the entry from the <code>Run Configuration</code> by pressing delete or clicking the red X.</li>\n</ol>\n\n<p>Something must have been screwed up with the cached run configuration.</p>\n"},{"tags":[],"owner":{"account_id":2384381,"reputation":357,"user_id":2085658,"accept_rate":33,"display_name":"snakedog"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1378828183,"creation_date":1378827052,"answer_id":18723062,"question_id":1052978,"body_markdown":"I tried everything I read in this long post and, incredibly, what worked for me was, rather than clicking on the test class and selecting `Run as JUnit test`, clicking on the test *method* and running as `JUnit test`. I have no idea why?","title":"Eclipse - java.lang.ClassNotFoundException","body":"<p>I tried everything I read in this long post and, incredibly, what worked for me was, rather than clicking on the test class and selecting <code>Run as JUnit test</code>, clicking on the test <em>method</em> and running as <code>JUnit test</code>. I have no idea why?</p>\n"},{"tags":[],"owner":{"account_id":3465746,"reputation":9,"user_id":2901341,"display_name":"Hari Hara Earlapati"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1382312958,"creation_date":1382312958,"answer_id":19484237,"question_id":1052978,"body_markdown":"Deleting the project from eclipse (Not from hard disk) which in a way is cleaning the workspace and reimporting the project into eclipse again worked for me.","title":"Eclipse - java.lang.ClassNotFoundException","body":"<p>Deleting the project from eclipse (Not from hard disk) which in a way is cleaning the workspace and reimporting the project into eclipse again worked for me.</p>\n"},{"tags":[],"owner":{"account_id":3178315,"reputation":41,"user_id":2685648,"display_name":"RutgerDOW"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1385547427,"creation_date":1385547427,"answer_id":20239615,"question_id":1052978,"body_markdown":"JUnit test from inside eclipse gave me also NoClassDefFoundError.\r\nRunning &#39;mvn clean test&#39; from command line gave me following error on several jars:\r\ninvalid LOC header (bad signature)\r\nDeleting these jars from local m2 repository and running &#39;mvn clean test&#39; again\r\nsolved my problem.","title":"Eclipse - java.lang.ClassNotFoundException","body":"<p>JUnit test from inside eclipse gave me also NoClassDefFoundError.\nRunning 'mvn clean test' from command line gave me following error on several jars:\ninvalid LOC header (bad signature)\nDeleting these jars from local m2 repository and running 'mvn clean test' again\nsolved my problem.</p>\n"},{"tags":[],"owner":{"account_id":1946654,"reputation":2062,"user_id":1751634,"accept_rate":67,"display_name":"Vikram"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1397857553,"creation_date":1397857553,"answer_id":23162900,"question_id":1052978,"body_markdown":"I had the same problem. All what I did was, \r\n\r\n i). Generated Eclipse artifacts \r\n\r\n`mvn clean eclipse:eclipse`\r\n \r\n ii). Refresh the project and rerun your junit test. Should work fine. ","title":"Eclipse - java.lang.ClassNotFoundException","body":"<p>I had the same problem. All what I did was, </p>\n\n<p>i). Generated Eclipse artifacts </p>\n\n<p><code>mvn clean eclipse:eclipse</code></p>\n\n<p>ii). Refresh the project and rerun your junit test. Should work fine. </p>\n"},{"tags":[],"owner":{"account_id":1728426,"reputation":1069,"user_id":1582586,"display_name":"Eric Manley"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1413823305,"creation_date":1413823305,"answer_id":26470678,"question_id":1052978,"body_markdown":"Furthermore, DOUBLE-CHECK the eclipse &quot;Web Deployment Assembly&quot; dialog.  \r\n\r\nThis can be found: Project Properties-&gt;Deployment Assembly.   \r\n\r\nRecently I had an eclipse plugin modify one of my web projects, and it added ~mysteriously~ added  the maven test directories  /src/test/java, /src/test/resources to the Deployment Assembly.   UGGGG!!!   \r\n\r\nWhich is why my project worked fine when I built &amp; deployed just straight maven to tomcat, no ClassNotFoundExceptions...  However, when I did the deploy through Eclipse, Whammo!! I start getting ClassNotFoundExceptions because the TestCode is getting deployed.  \r\n\r\nEric","title":"Eclipse - java.lang.ClassNotFoundException","body":"<p>Furthermore, DOUBLE-CHECK the eclipse \"Web Deployment Assembly\" dialog.  </p>\n\n<p>This can be found: Project Properties->Deployment Assembly.   </p>\n\n<p>Recently I had an eclipse plugin modify one of my web projects, and it added ~mysteriously~ added  the maven test directories  /src/test/java, /src/test/resources to the Deployment Assembly.   UGGGG!!!   </p>\n\n<p>Which is why my project worked fine when I built &amp; deployed just straight maven to tomcat, no ClassNotFoundExceptions...  However, when I did the deploy through Eclipse, Whammo!! I start getting ClassNotFoundExceptions because the TestCode is getting deployed.  </p>\n\n<p>Eric</p>\n"},{"tags":[],"owner":{"account_id":5648677,"reputation":1257,"user_id":4469988,"accept_rate":100,"display_name":"Raju Guduri"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1424177107,"creation_date":1424177107,"answer_id":28561836,"question_id":1052978,"body_markdown":"That means your pom.xml has unresolved issues. Open the problems view solve accordingly. Then you will be able to run the test cases successfully without encountering the classnotfoundexception.","title":"Eclipse - java.lang.ClassNotFoundException","body":"<p>That means your pom.xml has unresolved issues. Open the problems view solve accordingly. Then you will be able to run the test cases successfully without encountering the classnotfoundexception.</p>\n"},{"tags":[],"owner":{"account_id":6660655,"reputation":1,"user_id":5139869,"display_name":"Sai Killi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1437492678,"creation_date":1437492678,"answer_id":31543456,"question_id":1052978,"body_markdown":"Changing the order of classpath artifacts in the Java Build Path resolved it for me.\r\n\r\n1. Right Click on the project and go to Project Build path.\r\n2. Go to, Order and Export tab and move the JRE system library to after the sources.\r\n\r\nThis should fix it.\r\n","title":"Eclipse - java.lang.ClassNotFoundException","body":"<p>Changing the order of classpath artifacts in the Java Build Path resolved it for me.</p>\n\n<ol>\n<li>Right Click on the project and go to Project Build path.</li>\n<li>Go to, Order and Export tab and move the JRE system library to after the sources.</li>\n</ol>\n\n<p>This should fix it.</p>\n"},{"tags":[],"owner":{"account_id":3626984,"reputation":138,"user_id":3024314,"display_name":"Mahendra Rathod"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1449757552,"creation_date":1449757552,"answer_id":34204336,"question_id":1052978,"body_markdown":"JUnit 4.4 is not supported by the JMockit/JUnit integration. Only\r\nversions 4.5 or newer are supported that. ","title":"Eclipse - java.lang.ClassNotFoundException","body":"<p>JUnit 4.4 is not supported by the JMockit/JUnit integration. Only\nversions 4.5 or newer are supported that. </p>\n"},{"tags":[],"owner":{"account_id":2872367,"reputation":11,"user_id":2465399,"display_name":"Sahitya M"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1465887780,"creation_date":1465887780,"answer_id":37805074,"question_id":1052978,"body_markdown":"\r\nwhile running web applications Most of us will get this Exception. When you got this error you have place .class files in proper folder. \r\n\r\nIn web applications all .class files should sit in WEB-INF\\Classes folder.\r\nif you are running web app in Eclipse please follow the steps\r\n\r\nStep 1: Right click on Project folder and Select Properties\r\nStep 2: Click on &quot;Java Build Path&quot; you will see different tabs like &quot;source&quot; , &quot;projects&quot;, &quot;libraries&quot; etc\r\nStep 3: select Source folder. under this you will see your project details\r\nStep 4: in the &quot;Source&quot; folder you will see Default Output Folder option. here you have to give the classes folder under WEB-INF.\r\njust give the path like projectname/WebContent/WEB-INF/classes\r\nthe structure depends on your application\r\nplease do remember here you no need to create &quot;classes&quot; folder. Eclipse will create it for you.\r\nStep 5: click on &quot;OK&quot; and do the project clean and Build. that&#39;s it your app will run now.","title":"Eclipse - java.lang.ClassNotFoundException","body":"<p>while running web applications Most of us will get this Exception. When you got this error you have place .class files in proper folder. </p>\n\n<p>In web applications all .class files should sit in WEB-INF\\Classes folder.\nif you are running web app in Eclipse please follow the steps</p>\n\n<p>Step 1: Right click on Project folder and Select Properties\nStep 2: Click on \"Java Build Path\" you will see different tabs like \"source\" , \"projects\", \"libraries\" etc\nStep 3: select Source folder. under this you will see your project details\nStep 4: in the \"Source\" folder you will see Default Output Folder option. here you have to give the classes folder under WEB-INF.\njust give the path like projectname/WebContent/WEB-INF/classes\nthe structure depends on your application\nplease do remember here you no need to create \"classes\" folder. Eclipse will create it for you.\nStep 5: click on \"OK\" and do the project clean and Build. that's it your app will run now.</p>\n"},{"tags":[],"owner":{"account_id":2902519,"reputation":19,"user_id":2885121,"display_name":"wanfke"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1475908713,"creation_date":1475908713,"answer_id":39929488,"question_id":1052978,"body_markdown":"I solve that Bulit path---&gt;libraries---&gt;add library---&gt;Junit  check junit4","title":"Eclipse - java.lang.ClassNotFoundException","body":"<p>I solve that Bulit path--->libraries--->add library--->Junit  check junit4</p>\n"},{"tags":[],"owner":{"account_id":10357721,"reputation":1,"user_id":7639086,"display_name":"user7639086"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1488342724,"creation_date":1488342724,"answer_id":42523233,"question_id":1052978,"body_markdown":"I have see Eclipse - java.lang.ClassNotFoundException when running junit tests. \r\nI had deleted one of the external jar files which was added to the project. After removing the reference of this jar file to the project from Eclipse. i could run the Junit tests .\r\n\r\n","title":"Eclipse - java.lang.ClassNotFoundException","body":"<p>I have see Eclipse - java.lang.ClassNotFoundException when running junit tests. \nI had deleted one of the external jar files which was added to the project. After removing the reference of this jar file to the project from Eclipse. i could run the Junit tests .</p>\n"},{"tags":[],"owner":{"account_id":12243248,"reputation":41,"user_id":8935651,"display_name":"pavelb"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1510615434,"creation_date":1510615434,"answer_id":47275194,"question_id":1052978,"body_markdown":"Go To Build Path -&gt; Source and toggle to Yes option &quot;Ignore Optional Compile Problems&quot; for all source folders.","title":"Eclipse - java.lang.ClassNotFoundException","body":"<p>Go To Build Path -> Source and toggle to Yes option \"Ignore Optional Compile Problems\" for all source folders.</p>\n"},{"tags":[],"owner":{"account_id":1875874,"reputation":71891,"user_id":1697099,"accept_rate":100,"display_name":"Premraj"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1515038973,"creation_date":1515038973,"answer_id":48088540,"question_id":1052978,"body_markdown":"Usually this problem occurs while running java application `java` tool unable to find the class file.    \r\n\r\nMostly in maven project we see this issue because **Eclipse-Maven sync** issue. To solve this problem :**Maven-&gt;Update Configuration** ","title":"Eclipse - java.lang.ClassNotFoundException","body":"<p>Usually this problem occurs while running java application <code>java</code> tool unable to find the class file.    </p>\n\n<p>Mostly in maven project we see this issue because <strong>Eclipse-Maven sync</strong> issue. To solve this problem :<strong>Maven->Update Configuration</strong> </p>\n"},{"tags":[],"owner":{"account_id":4008309,"reputation":3678,"user_id":3302424,"accept_rate":70,"display_name":"Hari Krishna"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1517540345,"creation_date":1517502023,"answer_id":48567295,"question_id":1052978,"body_markdown":"I faced the same problem, for me the issue is different. It came because some of the maven dependencies are not downloaded. \r\n\r\n    a. I went through properties -&gt; Java Buildpath -&gt; Maven Dependencies and identified the missed libraries. \r\n    b. Removed the missed libraries artifacts from pom.xml\r\n    c. Downloaded the libraries and added them explicitly.","title":"Eclipse - java.lang.ClassNotFoundException","body":"<p>I faced the same problem, for me the issue is different. It came because some of the maven dependencies are not downloaded. </p>\n\n<pre><code>a. I went through properties -&gt; Java Buildpath -&gt; Maven Dependencies and identified the missed libraries. \nb. Removed the missed libraries artifacts from pom.xml\nc. Downloaded the libraries and added them explicitly.\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2032265,"reputation":2081,"user_id":1815612,"display_name":"Yao Li"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1565644290,"creation_date":1565644290,"answer_id":57468304,"question_id":1052978,"body_markdown":"Run project as Maven test, then Run as JUnit Test.","title":"Eclipse - java.lang.ClassNotFoundException","body":"<p>Run project as Maven test, then Run as JUnit Test.</p>\n"},{"tags":[],"owner":{"account_id":4870666,"reputation":547,"user_id":3927323,"display_name":"NIKHIL CHAURASIA"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1567074282,"creation_date":1567074282,"answer_id":57708130,"question_id":1052978,"body_markdown":"I am using gradle with eclipse and faced the same challenge today and tried a number of ways to resolve but the only way which helped me was to run command `gradlew clean` . \r\n\r\n&gt; P.S. =&gt; Don&#39;t combine the &quot;build&quot; with the above mentioned command.\r\n\r\nHelped me, try your luck. ","title":"Eclipse - java.lang.ClassNotFoundException","body":"<p>I am using gradle with eclipse and faced the same challenge today and tried a number of ways to resolve but the only way which helped me was to run command <code>gradlew clean</code> . </p>\n\n<blockquote>\n  <p>P.S. => Don't combine the \"build\" with the above mentioned command.</p>\n</blockquote>\n\n<p>Helped me, try your luck. </p>\n"},{"tags":[],"owner":{"account_id":3619884,"reputation":571,"user_id":3018906,"display_name":"user3018906"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1580029871,"creation_date":1580028928,"answer_id":59916876,"question_id":1052978,"body_markdown":"Enabling **[x] Use temporary JAR to specify classpath (to avoid classpath length limitations)** inside the *Classpath tab* of the *Run configuration* did the trick for me.\r\n\r\nIf your project is huge and you have lots of dependencies from other sibling projects and maven dependencies, you might hit the classpath length limitations and this seems to be the only solution (apart from making the directory to you local maven repo shorter (ours already starts at c:/m2)\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/tVFx9.png","title":"Eclipse - java.lang.ClassNotFoundException","body":"<p>Enabling <strong>[x] Use temporary JAR to specify classpath (to avoid classpath length limitations)</strong> inside the <em>Classpath tab</em> of the <em>Run configuration</em> did the trick for me.</p>\n\n<p>If your project is huge and you have lots of dependencies from other sibling projects and maven dependencies, you might hit the classpath length limitations and this seems to be the only solution (apart from making the directory to you local maven repo shorter (ours already starts at c:/m2)</p>\n\n<p><a href=\"https://i.stack.imgur.com/tVFx9.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/tVFx9.png\" alt=\"enter image description here\"></a></p>\n"},{"tags":[],"owner":{"account_id":18511494,"reputation":51,"user_id":13486574,"display_name":"Adligo"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1603068997,"creation_date":1603068997,"answer_id":64419820,"question_id":1052978,"body_markdown":"I suggest trying adding this to the VM arguments;\r\n\r\n    -verbose:class -verbose:module -Xdiag\r\n\r\nThen you can debug it from Eclipse which should print out some message like;\r\n\r\n    java.lang.ClassNotFoundException: org.adligo.somewhere.Foo\r\n    \tat java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:521)\r\n    \tat java.base/java.lang.Class.forName0(Native Method)\r\n    \tat java.base/java.lang.Class.forName(Class.java:398)\r\n    \tat java.base/sun.launcher.LauncherHelper.loadMainClass(LauncherHelper.java:760)\r\n    \tat java.base/sun.launcher.LauncherHelper.checkAndLoadMain(LauncherHelper.java:655)\r\n\r\nFrom this you can set a breakpoint on LancherHelper.java 760 to debug the Eclipse Lanucher itself.  In my case I noticed that user classpath appeared to be null, even though I have many jars in it in the Lanuch config.\r\n","title":"Eclipse - java.lang.ClassNotFoundException","body":"<p>I suggest trying adding this to the VM arguments;</p>\n<pre><code>-verbose:class -verbose:module -Xdiag\n</code></pre>\n<p>Then you can debug it from Eclipse which should print out some message like;</p>\n<pre><code>java.lang.ClassNotFoundException: org.adligo.somewhere.Foo\n    at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:521)\n    at java.base/java.lang.Class.forName0(Native Method)\n    at java.base/java.lang.Class.forName(Class.java:398)\n    at java.base/sun.launcher.LauncherHelper.loadMainClass(LauncherHelper.java:760)\n    at java.base/sun.launcher.LauncherHelper.checkAndLoadMain(LauncherHelper.java:655)\n</code></pre>\n<p>From this you can set a breakpoint on LancherHelper.java 760 to debug the Eclipse Lanucher itself.  In my case I noticed that user classpath appeared to be null, even though I have many jars in it in the Lanuch config.</p>\n"},{"tags":[],"owner":{"account_id":19938363,"reputation":11,"user_id":14610566,"display_name":"SATHIYA BALAKRISHNAN"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1604989396,"creation_date":1604989396,"answer_id":64763858,"question_id":1052978,"body_markdown":"Make sure if your test class working before , but you facing issue all of sudden. then **clean your project and build it again**. Make sure project has been configured in build path as read above article.","title":"Eclipse - java.lang.ClassNotFoundException","body":"<p>Make sure if your test class working before , but you facing issue all of sudden. then <strong>clean your project and build it again</strong>. Make sure project has been configured in build path as read above article.</p>\n"},{"tags":[],"owner":{"account_id":15359861,"reputation":11,"user_id":13544041,"display_name":"Eduardo de Lucca"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1611396103,"creation_date":1611342993,"answer_id":65851425,"question_id":1052978,"body_markdown":"Well, you can solve this problem basically by creating a new project.\r\n\r\n 1. Close the project (save the code in another folder on your computer).\r\n 2. Create a new project (add a new final directory and do not leave the default directory selected).\r\n 3. Remake your previous project adding the code saved before.\r\n\r\nThis happens because probably you created a project and didn&#39;t select a directory/folder or something like that.\r\nI hope had helped you!","title":"Eclipse - java.lang.ClassNotFoundException","body":"<p>Well, you can solve this problem basically by creating a new project.</p>\n<ol>\n<li>Close the project (save the code in another folder on your computer).</li>\n<li>Create a new project (add a new final directory and do not leave the default directory selected).</li>\n<li>Remake your previous project adding the code saved before.</li>\n</ol>\n<p>This happens because probably you created a project and didn't select a directory/folder or something like that.\nI hope had helped you!</p>\n"},{"tags":[],"owner":{"account_id":22238865,"reputation":1,"user_id":16473736,"display_name":"David Ohio"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1629013959,"creation_date":1629013959,"answer_id":68789665,"question_id":1052978,"body_markdown":"If those don&#39;t work in eclipse try:\r\n**Alt + Shift + X** and you will see 5 options at the bottom right of your screen. Choose the Java Application and it&#39;ll work","title":"Eclipse - java.lang.ClassNotFoundException","body":"<p>If those don't work in eclipse try:\n<strong>Alt + Shift + X</strong> and you will see 5 options at the bottom right of your screen. Choose the Java Application and it'll work</p>\n"},{"tags":[],"owner":{"account_id":21599958,"reputation":41,"user_id":15928285,"display_name":"Mr.A"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1644221254,"creation_date":1644221254,"answer_id":71015225,"question_id":1052978,"body_markdown":"**For Hybris Project, I fixed the issue by applying below changes in Build Path. I selected Project and clicked on Apply and Close.**\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/OuumC.png","title":"Eclipse - java.lang.ClassNotFoundException","body":"<p><strong>For Hybris Project, I fixed the issue by applying below changes in Build Path. I selected Project and clicked on Apply and Close.</strong></p>\n<p><a href=\"https://i.stack.imgur.com/OuumC.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/OuumC.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":[],"owner":{"account_id":9260360,"reputation":1,"user_id":6877675,"display_name":"user6877675"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1685367566,"creation_date":1685367476,"answer_id":76357864,"question_id":1052978,"body_markdown":"If you are in Eclipse run time, it means that you already need to export the required packages through Manifest.MF file.\r\n\r\nExport-Package: Name of the Package\r\n","title":"Eclipse - java.lang.ClassNotFoundException","body":"<p>If you are in Eclipse run time, it means that you already need to export the required packages through Manifest.MF file.</p>\n<p>Export-Package: Name of the Package</p>\n"},{"tags":[],"owner":{"account_id":8511659,"reputation":19,"user_id":6381507,"display_name":"RangaM"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687362190,"creation_date":1687362190,"answer_id":76525036,"question_id":1052978,"body_markdown":"You must have pom.xml file. You will get class not found error in one more case-\r\nif any of the dependency is not resolved- means corresponding jar is not downloaded in the repository.\r\n\r\nI had similar issue and I tried cleaning, building project multiple times but not much help. \r\n\r\nThen there below entry for this dependency which was showing as mising, then I manually downloade it and placed in the repository. \r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n    &lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;oracle&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;ojdbc6&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;${ojdbc.verison}&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\nThen, Run -&gt; maven clean\r\nMaven -&gt; Update projects -&gt; select the project -&gt; force update snapshots and update offline.\r\n\r\nThis will resolve the issue.","title":"Eclipse - java.lang.ClassNotFoundException","body":"<p>You must have pom.xml file. You will get class not found error in one more case-\nif any of the dependency is not resolved- means corresponding jar is not downloaded in the repository.</p>\n<p>I had similar issue and I tried cleaning, building project multiple times but not much help.</p>\n<p>Then there below entry for this dependency which was showing as mising, then I manually downloade it and placed in the repository.</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;dependency&gt;\n            &lt;groupId&gt;oracle&lt;/groupId&gt;\n            &lt;artifactId&gt;ojdbc6&lt;/artifactId&gt;\n            &lt;version&gt;${ojdbc.verison}&lt;/version&gt;\n        &lt;/dependency&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<p>Then, Run -&gt; maven clean\nMaven -&gt; Update projects -&gt; select the project -&gt; force update snapshots and update offline.</p>\n<p>This will resolve the issue.</p>\n"},{"tags":[],"owner":{"account_id":28589404,"reputation":1,"user_id":21888982,"display_name":"CouponCode"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1702057886,"creation_date":1702057886,"answer_id":77628374,"question_id":1052978,"body_markdown":"Eclipse is a confused p.o.s. You can probably look in the built jar or war and clearly see the class file is there. I&#39;ve come to realize this error means that Eclipse is out of sync with the files on disk. Right-click the project and click Refresh and then try again. Usually that will fix the ClassNotFoundException startup errors.","title":"Eclipse - java.lang.ClassNotFoundException","body":"<p>Eclipse is a confused p.o.s. You can probably look in the built jar or war and clearly see the class file is there. I've come to realize this error means that Eclipse is out of sync with the files on disk. Right-click the project and click Refresh and then try again. Usually that will fix the ClassNotFoundException startup errors.</p>\n"}],"owner":{"account_id":13581,"reputation":16779,"user_id":27404,"accept_rate":51,"display_name":"swalkner"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":406124,"favorite_count":0,"down_vote_count":1,"up_vote_count":103,"accepted_answer_id":1062435,"answer_count":45,"score":102,"last_activity_date":1702057886,"creation_date":1246114877,"question_id":1052978,"body_markdown":"When trying to start my JUnit-Test out of Eclipse, I get a &quot;ClassNotFoundException&quot;. When running &quot;mvn test&quot; from console - everything works fine. Also, there are no problems reported in Eclipse.\r\n\r\nMy project structure is the following:\r\n\r\n - parent project (pom-packaging)\r\n  - Web project (war-packaging - my JUnit-test is in here)\r\n  - Flex project\r\n  - Configuration project\r\n\r\n\r\n----------\r\n\r\nedit: How can the class not be found? It&#39;s a simple HelloWorld-Application with no special libraries.\r\n\r\nHere&#39;s my JUnit&#39;s run-configuration:\r\n![alt text][1]\r\n\r\n\r\n  [1]: http://www.walkner.biz/_temp/runconfig.png\r\n\r\n\r\n----------\r\n\r\nTestclass (but as I said; it doesn&#39;t work with a simple HelloWorld either...):\r\n\r\n    import org.junit.After;\r\n    import org.junit.Assert;\r\n    import org.junit.Before;\r\n    import org.junit.Test;\r\n    import org.springframework.context.ApplicationContext;\r\n    import org.springframework.context.support.ClassPathXmlApplicationContext;\r\n    import biz.prognoserechnung.domain.User;\r\n    import biz.prognoserechnung.domain.UserRepository;\r\n    import biz.prognoserechnung.domain.hibernate.UserHibernateDao;\r\n\r\n    public class UserDaoTest {\r\n    /**\r\n     * the applicationcontext.\r\n     */\r\n    private ApplicationContext ctx = null;\r\n\r\n    /**\r\n     * the user itself.\r\n     */\r\n    private User record = null;\r\n\r\n    /**\r\n     * Interface for the user.\r\n     */\r\n    private UserRepository dao = null;\r\n\r\n    @Before\r\n    public void setUp() throws Exception {\r\n\tString[] paths = { &quot;WEB-INF/applicationContext.xml&quot; };\r\n\tctx = new ClassPathXmlApplicationContext(paths);\r\n\tdao = (UserHibernateDao) ctx.getBean(&quot;userRepository&quot;);\r\n    }\r\n\r\n    @After\r\n    public void tearDown() throws Exception {\r\n\tdao = null;\r\n    }\r\n\r\n    @Test\r\n    public final void testIsUser() throws Exception {\r\n\tAssert.assertTrue(dao.isUser(&quot;John&quot;, &quot;Doe&quot;));\r\n    }\r\n\r\n    @Test\r\n        public final void testIsNoUser() throws Exception {\r\n    \tAssert.assertFalse(dao.isUser(&quot;not&quot;, &quot;existing&quot;));\r\n            Assert.assertFalse(dao.isUser(null, null));\r\n            Assert.assertFalse(dao.isUser(&quot;&quot;, &quot;&quot;));\r\n        }\r\n    }\r\n\r\n","title":"Eclipse - java.lang.ClassNotFoundException","body":"<p>When trying to start my JUnit-Test out of Eclipse, I get a \"ClassNotFoundException\". When running \"mvn test\" from console - everything works fine. Also, there are no problems reported in Eclipse.</p>\n\n<p>My project structure is the following:</p>\n\n<ul>\n<li>parent project (pom-packaging)\n\n<ul>\n<li>Web project (war-packaging - my JUnit-test is in here)</li>\n<li>Flex project</li>\n<li>Configuration project</li>\n</ul></li>\n</ul>\n\n<hr>\n\n<p>edit: How can the class not be found? It's a simple HelloWorld-Application with no special libraries.</p>\n\n<p>Here's my JUnit's run-configuration:\n<a href=\"http://www.walkner.biz/_temp/runconfig.png\">alt text http://www.walkner.biz/_temp/runconfig.png</a></p>\n\n<hr>\n\n<p>Testclass (but as I said; it doesn't work with a simple HelloWorld either...):</p>\n\n<pre><code>import org.junit.After;\nimport org.junit.Assert;\nimport org.junit.Before;\nimport org.junit.Test;\nimport org.springframework.context.ApplicationContext;\nimport org.springframework.context.support.ClassPathXmlApplicationContext;\nimport biz.prognoserechnung.domain.User;\nimport biz.prognoserechnung.domain.UserRepository;\nimport biz.prognoserechnung.domain.hibernate.UserHibernateDao;\n\npublic class UserDaoTest {\n/**\n * the applicationcontext.\n */\nprivate ApplicationContext ctx = null;\n\n/**\n * the user itself.\n */\nprivate User record = null;\n\n/**\n * Interface for the user.\n */\nprivate UserRepository dao = null;\n\n@Before\npublic void setUp() throws Exception {\nString[] paths = { \"WEB-INF/applicationContext.xml\" };\nctx = new ClassPathXmlApplicationContext(paths);\ndao = (UserHibernateDao) ctx.getBean(\"userRepository\");\n}\n\n@After\npublic void tearDown() throws Exception {\ndao = null;\n}\n\n@Test\npublic final void testIsUser() throws Exception {\nAssert.assertTrue(dao.isUser(\"John\", \"Doe\"));\n}\n\n@Test\n    public final void testIsNoUser() throws Exception {\n    Assert.assertFalse(dao.isUser(\"not\", \"existing\"));\n        Assert.assertFalse(dao.isUser(null, null));\n        Assert.assertFalse(dao.isUser(\"\", \"\"));\n    }\n}\n</code></pre>\n"},{"tags":["java","casting"],"comments":[{"owner":{"account_id":1992310,"reputation":11172,"user_id":1786065,"accept_rate":91,"display_name":"Rogue"},"score":1,"creation_date":1667314925,"post_id":74277788,"comment_id":131135881,"body_markdown":"You should use the `object instanceof Map`, and you can then cast as `(Map&lt;String, Object&gt;)`. Just understand that there are no compile-time checks for the proper types in that map, so if it contains non-string keys then you may have some truly odd behavior.","body":"You should use the <code>object instanceof Map</code>, and you can then cast as <code>(Map&lt;String, Object&gt;)</code>. Just understand that there are no compile-time checks for the proper types in that map, so if it contains non-string keys then you may have some truly odd behavior."},{"owner":{"account_id":465573,"reputation":192684,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":1,"creation_date":1667314985,"post_id":74277788,"comment_id":131135909,"body_markdown":"What are you imagining &quot;casting&quot; means here?  I suspect you&#39;re assuming that you should be able to class `class Foo { int x; String y; }`, take an object `new Foo(1, &quot;bar&quot;) and get a map with the entries `&quot;x&quot;` mapped to `1` and `&quot;y&quot;` mapped to `&quot;bar&quot;`.  That&#39;s going to be _much_ more complicated than a cast.  If what you _actually_ have is a `Map&lt;String, Object&gt;`, then you should do the unsafe cast and accept that that&#39;s the best that you&#39;re going to get.","body":"What are you imagining &quot;casting&quot; means here?  I suspect you&#39;re assuming that you should be able to class <code>class Foo { int x; String y; }</code>, take an object <code>new Foo(1, &quot;bar&quot;) and get a map with the entries </code>&quot;x&quot;` mapped to <code>1</code> and <code>&quot;y&quot;</code> mapped to <code>&quot;bar&quot;</code>.  That&#39;s going to be <i>much</i> more complicated than a cast.  If what you <i>actually</i> have is a <code>Map&lt;String, Object&gt;</code>, then you should do the unsafe cast and accept that that&#39;s the best that you&#39;re going to get."},{"owner":{"account_id":960307,"reputation":107851,"user_id":984823,"display_name":"Joop Eggen"},"score":1,"creation_date":1667315237,"post_id":74277788,"comment_id":131135991,"body_markdown":"IF the data comes from a persistent file (XML or .properties) you maybe could revert to the **`Properties`** class.","body":"IF the data comes from a persistent file (XML or .properties) you maybe could revert to the <b><code>Properties</code></b> class."}],"answers":[{"tags":[],"owner":{"account_id":26493810,"reputation":323,"user_id":20131874,"display_name":"mmartinez04"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1667314765,"creation_date":1667314765,"answer_id":74277857,"question_id":74277788,"body_markdown":"Just add `@SuppressWarnings(&quot;unchecked&quot;)` to your method\r\n\r\n    @SuppressWarnings(&quot;unchecked&quot;)\r\n    public void myMethod(){\r\n        ...\r\n    }\r\n\r\nand you should be able to use\r\n\r\n    HashMap&lt;String, Object&gt; map = (HashMap&lt;String, Object&gt;) object;","title":"Java: cast Object to HashMap&lt;String, Object&gt;","body":"<p>Just add <code>@SuppressWarnings(&quot;unchecked&quot;)</code> to your method</p>\n<pre><code>@SuppressWarnings(&quot;unchecked&quot;)\npublic void myMethod(){\n    ...\n}\n</code></pre>\n<p>and you should be able to use</p>\n<pre><code>HashMap&lt;String, Object&gt; map = (HashMap&lt;String, Object&gt;) object;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2792262,"reputation":163837,"user_id":2402272,"accept_rate":85,"display_name":"John Bollinger"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1667315487,"creation_date":1667314986,"answer_id":74277898,"question_id":74277788,"body_markdown":"&gt; I am trying to cast an Object to HashMap&lt;String, Object&gt; in a neat, robust way. So far, every way I tried produces compiler warnings or errors. What is the proper way to do it?\r\n\r\nThere is no proper way to do it, supposing that &quot;proper&quot; implies both useful and type safe.  Casting is the antithesis of type safety.  Other than casts for arithmetic purposes, a safe cast is an unnecessary one.\r\n\r\nThere is not enough information to determine how to achieve what ultimately you are after, but generally speaking, that sort of thing revolves around writing true generic code instead of using type `Object` to funnel objects of unrelated type into the same methods, using `instanceof` to determine what you actually have, or casting.\r\n","title":"Java: cast Object to HashMap&lt;String, Object&gt;","body":"<blockquote>\n<p>I am trying to cast an Object to HashMap&lt;String, Object&gt; in a neat, robust way. So far, every way I tried produces compiler warnings or errors. What is the proper way to do it?</p>\n</blockquote>\n<p>There is no proper way to do it, supposing that &quot;proper&quot; implies both useful and type safe.  Casting is the antithesis of type safety.  Other than casts for arithmetic purposes, a safe cast is an unnecessary one.</p>\n<p>There is not enough information to determine how to achieve what ultimately you are after, but generally speaking, that sort of thing revolves around writing true generic code instead of using type <code>Object</code> to funnel objects of unrelated type into the same methods, using <code>instanceof</code> to determine what you actually have, or casting.</p>\n"},{"tags":[],"owner":{"account_id":30100178,"reputation":1,"user_id":23067512,"display_name":"Matt"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1702057871,"creation_date":1702057871,"answer_id":77628373,"question_id":74277788,"body_markdown":"This compiles for me:\r\n\r\n    HashMap&lt;String, Object&gt; map = new HashMap&lt;&gt;();\r\n    if (object instanceof Map){\r\n        Map&lt;?, ?&gt; genericMap = (Map&lt;?,?&gt;) object;\r\n        for (Object key : genericMap.keySet()){\r\n            if (key instanceof String){\r\n                map.put((String) key, genericMap.get(key));\r\n            }\r\n            else{\r\n                throw new KeyException();\r\n            }\r\n        }\r\n    }\r\n\r\n","title":"Java: cast Object to HashMap&lt;String, Object&gt;","body":"<p>This compiles for me:</p>\n<pre><code>HashMap&lt;String, Object&gt; map = new HashMap&lt;&gt;();\nif (object instanceof Map){\n    Map&lt;?, ?&gt; genericMap = (Map&lt;?,?&gt;) object;\n    for (Object key : genericMap.keySet()){\n        if (key instanceof String){\n            map.put((String) key, genericMap.get(key));\n        }\n        else{\n            throw new KeyException();\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":2982627,"reputation":193,"user_id":2532280,"accept_rate":75,"display_name":"ian"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":842,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74277898,"answer_count":3,"score":0,"last_activity_date":1702057871,"creation_date":1667314418,"question_id":74277788,"body_markdown":"I am trying to cast an Object to HashMap&lt;String, Object&gt; in a neat, robust way. So far, every way I tried produces compiler warnings or errors. What is the proper way to do it? I have checked the internet and tried the following:\r\n\r\n```\r\nHashMap&lt;String, Object&gt; map = (HashMap&lt;String, Object&gt;) object;\r\n```\r\nThe code above gives an unchecked conversion warning.\r\n\r\n```\r\nHashMap&lt;String, Object&gt; map = new HashMap&lt;&gt;();\r\nif (object instanceof Map&lt;String, Object&gt;){\r\n    map = (Map&lt;String, Object&gt;) object;\r\n}\r\n```\r\n\r\nThe code above gives an error, which says that objects cannot be compared to parameterized collections.\r\n\r\n```\r\nHashMap&lt;String, Object&gt; map = new HashMap&lt;&gt;();\r\nif (object instanceof Map){\r\n    Map genericMap = (Map) object;\r\n    for (Object key : genericMap.keySet()){\r\n        if (key instanceof String){\r\n            map.put((String) key, genericMap.get(key));\r\n        }\r\n        else{\r\n            throw new KeyException();\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nThe code above yields a warning that &quot;Map is a raw type. References to generic type Map&lt;K,V&gt; should be parameterized.&quot;\r\n\r\nSo what would be the proper way to do this? Thank you in advance!","title":"Java: cast Object to HashMap&lt;String, Object&gt;","body":"<p>I am trying to cast an Object to HashMap&lt;String, Object&gt; in a neat, robust way. So far, every way I tried produces compiler warnings or errors. What is the proper way to do it? I have checked the internet and tried the following:</p>\n<pre><code>HashMap&lt;String, Object&gt; map = (HashMap&lt;String, Object&gt;) object;\n</code></pre>\n<p>The code above gives an unchecked conversion warning.</p>\n<pre><code>HashMap&lt;String, Object&gt; map = new HashMap&lt;&gt;();\nif (object instanceof Map&lt;String, Object&gt;){\n    map = (Map&lt;String, Object&gt;) object;\n}\n</code></pre>\n<p>The code above gives an error, which says that objects cannot be compared to parameterized collections.</p>\n<pre><code>HashMap&lt;String, Object&gt; map = new HashMap&lt;&gt;();\nif (object instanceof Map){\n    Map genericMap = (Map) object;\n    for (Object key : genericMap.keySet()){\n        if (key instanceof String){\n            map.put((String) key, genericMap.get(key));\n        }\n        else{\n            throw new KeyException();\n        }\n    }\n}\n</code></pre>\n<p>The code above yields a warning that &quot;Map is a raw type. References to generic type Map&lt;K,V&gt; should be parameterized.&quot;</p>\n<p>So what would be the proper way to do this? Thank you in advance!</p>\n"},{"tags":["java","garbage-collection","out-of-memory","heap-memory"],"comments":[{"owner":{"account_id":41183,"reputation":7098,"user_id":119636,"display_name":"Buhb"},"score":18,"creation_date":1252412473,"post_id":1393486,"comment_id":1234445,"body_markdown":"This sounds very interesting. I&#39;d love if someone could post some code that generates this.","body":"This sounds very interesting. I&#39;d love if someone could post some code that generates this."},{"owner":{"account_id":10987,"reputation":50685,"user_id":21005,"accept_rate":78,"display_name":"Mnementh"},"score":2,"creation_date":1256289017,"post_id":1393486,"comment_id":1478372,"body_markdown":"I simply found the problem, that lead to too much memory-usage, near to the limit of the heap. A simple solution could be simply to give some more Heap-memory to the Java-Engine (-Xmx) but this only helps, if the application needs exactly as much memory, as the heap-limit before was set.","body":"I simply found the problem, that lead to too much memory-usage, near to the limit of the heap. A simple solution could be simply to give some more Heap-memory to the Java-Engine (-Xmx) but this only helps, if the application needs exactly as much memory, as the heap-limit before was set."},{"owner":{"account_id":46067,"reputation":8871,"user_id":135982,"accept_rate":64,"display_name":"Vik"},"score":0,"creation_date":1350104572,"post_id":1393486,"comment_id":17433750,"body_markdown":"also check out http://xmlandmore.blogspot.com/2011/05/diagnosing-javalangoutofmemory.html","body":"also check out <a href=\"http://xmlandmore.blogspot.com/2011/05/diagnosing-javalangoutofmemory.html\" rel=\"nofollow noreferrer\">xmlandmore.blogspot.com/2011/05/&hellip;</a>"},{"owner":{"account_id":3970989,"reputation":177,"user_id":3275600,"accept_rate":29,"display_name":"lulu"},"score":1,"creation_date":1399977301,"post_id":1393486,"comment_id":36280854,"body_markdown":"@Mnementh i had given an answer here check whether it helps  http://stackoverflow.com/questions/11091516/exception-in-thread-main-java-lang-outofmemoryerror-gc-overhead-limit-exceede","body":"@Mnementh i had given an answer here check whether it helps  <a href=\"http://stackoverflow.com/questions/11091516/exception-in-thread-main-java-lang-outofmemoryerror-gc-overhead-limit-exceede\" title=\"exception in thread main java lang outofmemoryerror gc overhead limit exceede\">stackoverflow.com/questions/11091516/&hellip;</a>"},{"owner":{"account_id":1296878,"reputation":2027,"user_id":1247705,"accept_rate":71,"display_name":"Tim"},"score":16,"creation_date":1421951118,"post_id":1393486,"comment_id":44567846,"body_markdown":"@SimonKuang Note that there are multiple `OutOfMemoryError` scenarios for which increasing the heap isn&#39;t a valid solution: running out of native threads and running out of perm gen (which is separate from heap) are two examples.  Be careful about making overly broad statements about `OutOfMemoryErrors`; there&#39;s an unexpectedly diverse set of things that can cause them.","body":"@SimonKuang Note that there are multiple <code>OutOfMemoryError</code> scenarios for which increasing the heap isn&#39;t a valid solution: running out of native threads and running out of perm gen (which is separate from heap) are two examples.  Be careful about making overly broad statements about <code>OutOfMemoryErrors</code>; there&#39;s an unexpectedly diverse set of things that can cause them."},{"owner":{"account_id":970899,"reputation":13942,"user_id":993494,"accept_rate":34,"display_name":"Thorsten Niehues"},"score":3,"creation_date":1510655998,"post_id":1393486,"comment_id":81517207,"body_markdown":"How did you solve the issue??","body":"How did you solve the issue??"},{"owner":{"account_id":1557703,"reputation":192,"user_id":1448296,"accept_rate":80,"display_name":"Parasu"},"score":2,"creation_date":1510720800,"post_id":1393486,"comment_id":81550132,"body_markdown":"This error happened and still happening for me with Jdk1.8.0_91","body":"This error happened and still happening for me with Jdk1.8.0_91"},{"owner":{"account_id":10987,"reputation":50685,"user_id":21005,"accept_rate":78,"display_name":"Mnementh"},"score":1,"creation_date":1510755448,"post_id":1393486,"comment_id":81569670,"body_markdown":"@Thorsten Niehues: Well, I solved it basically by using less memory. As the top answer shows, this is a situation with very few remaining memory, while creating a lot of temporary objects. Basically there is no way around it, you have to reduce memory usage.","body":"@Thorsten Niehues: Well, I solved it basically by using less memory. As the top answer shows, this is a situation with very few remaining memory, while creating a lot of temporary objects. Basically there is no way around it, you have to reduce memory usage."},{"owner":{"account_id":251813,"reputation":1963,"user_id":529442,"display_name":"Eugene Gr. Philippov"},"score":0,"creation_date":1549113585,"post_id":1393486,"comment_id":95792398,"body_markdown":"@Buhb I just had this error on Hadoop 3.2.0 running a local (non-cluster) job of sorting 28GB of data. It was working for several hours and exploded with this error just before the end of job. Normally this dataset with this map-reduce task completes okay.","body":"@Buhb I just had this error on Hadoop 3.2.0 running a local (non-cluster) job of sorting 28GB of data. It was working for several hours and exploded with this error just before the end of job. Normally this dataset with this map-reduce task completes okay."},{"owner":{"account_id":5320869,"reputation":856,"user_id":4244347,"accept_rate":50,"display_name":"smaug"},"score":1,"creation_date":1550591792,"post_id":1393486,"comment_id":96320526,"body_markdown":"For future visitors - Any answer which simply tells you to increase the heap size (search for `javaMaxHeapSize` or `Xmx`) might solve your problem, if you are working with that amount of data. But you really need to look at your code to limit data usage. Try sampling a smaller amount of data or limiting the records you process. If you have no other option, run your code on a machine in the cloud which can provide you with as much memory as you want.","body":"For future visitors - Any answer which simply tells you to increase the heap size (search for <code>javaMaxHeapSize</code> or <code>Xmx</code>) might solve your problem, if you are working with that amount of data. But you really need to look at your code to limit data usage. Try sampling a smaller amount of data or limiting the records you process. If you have no other option, run your code on a machine in the cloud which can provide you with as much memory as you want."},{"owner":{"account_id":535477,"reputation":1551,"user_id":904963,"accept_rate":80,"display_name":"user904963"},"score":1,"creation_date":1644164123,"post_id":1393486,"comment_id":125527620,"body_markdown":"@smaug Machines in the cloud are still physical computers somewhere. Each type you can rent has a certain amount of RAM. Another consideration is that larger machines will cost way more money than smaller ones.","body":"@smaug Machines in the cloud are still physical computers somewhere. Each type you can rent has a certain amount of RAM. Another consideration is that larger machines will cost way more money than smaller ones."}],"answers":[{"tags":[],"owner":{"account_id":17835,"reputation":303885,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"down_vote_count":3,"up_vote_count":865,"is_accepted":true,"score":862,"last_activity_date":1577958068,"creation_date":1252409954,"answer_id":1393503,"question_id":1393486,"body_markdown":"This message means that for some reason the garbage collector is taking an excessive amount of time (by default 98% of all CPU time of the process) and recovers very little memory in each run (by default 2% of the heap).\r\n\r\nThis effectively means that your program stops doing any progress and is busy running only the garbage collection at all time.\r\n\r\nTo prevent your application from soaking up CPU time without getting anything done, the JVM throws this `Error` so that you have a chance of diagnosing the problem.\r\n\r\nThe rare cases where I&#39;ve seen this happen is where some code was creating tons of temporary objects and tons of weakly-referenced objects in an already very memory-constrained environment.\r\n\r\nCheck out the Java GC tuning guide, which is available for various Java versions and contains sections about this specific problem:\r\n\r\n- [Java 11 tuning guide][1] has dedicated sections on excessive GC for different garbage collectors:\r\n  - for the [Parallel Collector][2]\r\n  - for the [Concurrent Mark Sweep (CMS) Collector][3]\r\n  - there is no mention of this specific error condition for the Garbage First (G1) collector.\r\n- [Java 8 tuning guide][4] and its [Excessive GC section][5]\r\n- [Java 6 tuning guide][6] and its [Excessive GC section][7].\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/11/gctuning/\r\n  [2]: https://docs.oracle.com/en/java/javase/11/gctuning/parallel-collector1.html#GUID-31F3D722-5F93-41D6-817A-C6B91C095B6F\r\n  [3]: https://docs.oracle.com/en/java/javase/11/gctuning/concurrent-mark-sweep-cms-collector.html#GUID-8A7DC9B6-0448-4AC5-8F6D-41C83B6C618E\r\n  [4]: https://docs.oracle.com/javase/8/docs/technotes/guides/vm/gctuning/index.html\r\n  [5]: https://docs.oracle.com/javase/8/docs/technotes/guides/vm/gctuning/parallel.html#parallel_collector_excessive_gc\r\n  [6]: http://www.oracle.com/technetwork/java/javase/gc-tuning-6-140523.html\r\n  [7]: http://www.oracle.com/technetwork/java/javase/gc-tuning-6-140523.html#par_gc.oom","title":"Error java.lang.OutOfMemoryError: GC overhead limit exceeded","body":"<p>This message means that for some reason the garbage collector is taking an excessive amount of time (by default 98% of all CPU time of the process) and recovers very little memory in each run (by default 2% of the heap).</p>\n\n<p>This effectively means that your program stops doing any progress and is busy running only the garbage collection at all time.</p>\n\n<p>To prevent your application from soaking up CPU time without getting anything done, the JVM throws this <code>Error</code> so that you have a chance of diagnosing the problem.</p>\n\n<p>The rare cases where I've seen this happen is where some code was creating tons of temporary objects and tons of weakly-referenced objects in an already very memory-constrained environment.</p>\n\n<p>Check out the Java GC tuning guide, which is available for various Java versions and contains sections about this specific problem:</p>\n\n<ul>\n<li><a href=\"https://docs.oracle.com/en/java/javase/11/gctuning/\" rel=\"noreferrer\">Java 11 tuning guide</a> has dedicated sections on excessive GC for different garbage collectors:\n\n<ul>\n<li>for the <a href=\"https://docs.oracle.com/en/java/javase/11/gctuning/parallel-collector1.html#GUID-31F3D722-5F93-41D6-817A-C6B91C095B6F\" rel=\"noreferrer\">Parallel Collector</a></li>\n<li>for the <a href=\"https://docs.oracle.com/en/java/javase/11/gctuning/concurrent-mark-sweep-cms-collector.html#GUID-8A7DC9B6-0448-4AC5-8F6D-41C83B6C618E\" rel=\"noreferrer\">Concurrent Mark Sweep (CMS) Collector</a></li>\n<li>there is no mention of this specific error condition for the Garbage First (G1) collector.</li>\n</ul></li>\n<li><a href=\"https://docs.oracle.com/javase/8/docs/technotes/guides/vm/gctuning/index.html\" rel=\"noreferrer\">Java 8 tuning guide</a> and its <a href=\"https://docs.oracle.com/javase/8/docs/technotes/guides/vm/gctuning/parallel.html#parallel_collector_excessive_gc\" rel=\"noreferrer\">Excessive GC section</a></li>\n<li><a href=\"http://www.oracle.com/technetwork/java/javase/gc-tuning-6-140523.html\" rel=\"noreferrer\">Java 6 tuning guide</a> and its <a href=\"http://www.oracle.com/technetwork/java/javase/gc-tuning-6-140523.html#par_gc.oom\" rel=\"noreferrer\">Excessive GC section</a>.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":45865,"reputation":11735,"user_id":135351,"accept_rate":80,"display_name":"dave"},"down_vote_count":4,"up_vote_count":253,"is_accepted":false,"score":249,"last_activity_date":1588974642,"creation_date":1252410196,"answer_id":1393522,"question_id":1393486,"body_markdown":"Quoting from Oracle&#39;s article [*&quot;Java SE 6 HotSpot[tm] Virtual Machine Garbage Collection Tuning&quot;*](https://www.oracle.com/java/technologies/javase/gc-tuning-6.html#par_gc.oom):\n\n&gt;**Excessive GC Time and OutOfMemoryError**\n&gt;\n&gt;The parallel collector will throw an OutOfMemoryError if too much time is being spent in garbage collection: if more than 98% of the total time is spent in garbage collection and less than 2% of the heap is recovered, an OutOfMemoryError will be thrown. This feature is designed to prevent applications from running for an extended period of time while making little or no progress because the heap is too small. If necessary, this feature can be disabled by adding the option `-XX:-UseGCOverheadLimit` to the command line.\n\nEDIT: looks like someone can type faster than me :)","title":"Error java.lang.OutOfMemoryError: GC overhead limit exceeded","body":"<p>Quoting from Oracle's article <a href=\"https://www.oracle.com/java/technologies/javase/gc-tuning-6.html#par_gc.oom\" rel=\"noreferrer\"><em>&quot;Java SE 6 HotSpot[tm] Virtual Machine Garbage Collection Tuning&quot;</em></a>:</p>\n<blockquote>\n<p><strong>Excessive GC Time and OutOfMemoryError</strong></p>\n<p>The parallel collector will throw an OutOfMemoryError if too much time is being spent in garbage collection: if more than 98% of the total time is spent in garbage collection and less than 2% of the heap is recovered, an OutOfMemoryError will be thrown. This feature is designed to prevent applications from running for an extended period of time while making little or no progress because the heap is too small. If necessary, this feature can be disabled by adding the option <code>-XX:-UseGCOverheadLimit</code> to the command line.</p>\n</blockquote>\n<p>EDIT: looks like someone can type faster than me :)</p>\n"},{"tags":[],"owner":{"account_id":231645,"reputation":1390,"user_id":495987,"accept_rate":50,"display_name":"Mike"},"down_vote_count":0,"up_vote_count":57,"is_accepted":false,"score":57,"last_activity_date":1588917858,"creation_date":1302636421,"answer_id":5640498,"question_id":1393486,"body_markdown":"It&#39;s usually the code. Here&#39;s a simple example:\r\n\r\n    import java.util.*;\r\n    \r\n    public class GarbageCollector {\r\n    \r\n        public static void main(String... args) {\r\n    \r\n            System.out.printf(&quot;Testing...%n&quot;);\r\n            List&lt;Double&gt; list = new ArrayList&lt;Double&gt;();\r\n            for (int outer = 0; outer &lt; 10000; outer++) {\r\n    \r\n                // list = new ArrayList&lt;Double&gt;(10000); // BAD\r\n                // list = new ArrayList&lt;Double&gt;(); // WORSE\r\n                list.clear(); // BETTER\r\n    \r\n                for (int inner = 0; inner &lt; 10000; inner++) {\r\n                    list.add(Math.random());\r\n                }\r\n    \r\n                if (outer % 1000 == 0) {\r\n                    System.out.printf(&quot;Outer loop at %d%n&quot;, outer);\r\n                }\r\n    \r\n            }\r\n            System.out.printf(&quot;Done.%n&quot;);\r\n        }\r\n    }\r\n\r\nUsing Java 1.6.0_24-b07 on a Windows 7 32 bit.\r\n\r\n    java -Xloggc:gc.log GarbageCollector\r\n\r\nThen look at `gc.log`\r\n\r\n - Triggered 444 times using BAD method\r\n - Triggered 666 times using WORSE method \r\n - Triggered 354 times using BETTER method\r\n\r\nNow granted, this is not the best test or the best design but when faced with a situation where you have no choice but implementing such a loop or when dealing with existing code that behaves badly, choosing to reuse objects instead of creating new ones can reduce the number of times the garbage collector gets in the way...","title":"Error java.lang.OutOfMemoryError: GC overhead limit exceeded","body":"<p>It's usually the code. Here's a simple example:</p>\n\n<pre><code>import java.util.*;\n\npublic class GarbageCollector {\n\n    public static void main(String... args) {\n\n        System.out.printf(\"Testing...%n\");\n        List&lt;Double&gt; list = new ArrayList&lt;Double&gt;();\n        for (int outer = 0; outer &lt; 10000; outer++) {\n\n            // list = new ArrayList&lt;Double&gt;(10000); // BAD\n            // list = new ArrayList&lt;Double&gt;(); // WORSE\n            list.clear(); // BETTER\n\n            for (int inner = 0; inner &lt; 10000; inner++) {\n                list.add(Math.random());\n            }\n\n            if (outer % 1000 == 0) {\n                System.out.printf(\"Outer loop at %d%n\", outer);\n            }\n\n        }\n        System.out.printf(\"Done.%n\");\n    }\n}\n</code></pre>\n\n<p>Using Java 1.6.0_24-b07 on a Windows 7 32 bit.</p>\n\n<pre><code>java -Xloggc:gc.log GarbageCollector\n</code></pre>\n\n<p>Then look at <code>gc.log</code></p>\n\n<ul>\n<li>Triggered 444 times using BAD method</li>\n<li>Triggered 666 times using WORSE method </li>\n<li>Triggered 354 times using BETTER method</li>\n</ul>\n\n<p>Now granted, this is not the best test or the best design but when faced with a situation where you have no choice but implementing such a loop or when dealing with existing code that behaves badly, choosing to reuse objects instead of creating new ones can reduce the number of times the garbage collector gets in the way...</p>\n"},{"tags":[],"owner":{"account_id":108817,"reputation":111636,"user_id":288671,"display_name":"Vitalii Fedorenko"},"down_vote_count":1,"up_vote_count":110,"is_accepted":false,"score":109,"last_activity_date":1323827057,"creation_date":1323827057,"answer_id":8498644,"question_id":1393486,"body_markdown":"If you are sure there are no [memory leaks][1] in your program, try to:\r\n\r\n 1. Increase the heap size, for example `-Xmx1g`.  \r\n 2. Enable the concurrent low pause collector `-XX:+UseConcMarkSweepGC`. \r\n 3. Reuse existing objects when possible to save some memory.\r\n\r\nIf necessary, the [limit check][2] can be disabled by adding the option `-XX:-UseGCOverheadLimit` to the command line.\r\n\r\n  [1]: http://www.ibm.com/developerworks/library/j-leaks/\r\n  [2]: http://www.oracle.com/technetwork/java/javase/gc-tuning-6-140523.html#par_gc.oom","title":"Error java.lang.OutOfMemoryError: GC overhead limit exceeded","body":"<p>If you are sure there are no <a href=\"http://www.ibm.com/developerworks/library/j-leaks/\" rel=\"noreferrer\">memory leaks</a> in your program, try to:</p>\n\n<ol>\n<li>Increase the heap size, for example <code>-Xmx1g</code>.  </li>\n<li>Enable the concurrent low pause collector <code>-XX:+UseConcMarkSweepGC</code>. </li>\n<li>Reuse existing objects when possible to save some memory.</li>\n</ol>\n\n<p>If necessary, the <a href=\"http://www.oracle.com/technetwork/java/javase/gc-tuning-6-140523.html#par_gc.oom\" rel=\"noreferrer\">limit check</a> can be disabled by adding the option <code>-XX:-UseGCOverheadLimit</code> to the command line.</p>\n"},{"tags":[],"owner":{"account_id":3795667,"reputation":791,"user_id":3392249,"accept_rate":53,"display_name":"chopss"},"down_vote_count":8,"up_vote_count":40,"is_accepted":false,"score":32,"last_activity_date":1456236277,"creation_date":1399977623,"answer_id":23628984,"question_id":1393486,"body_markdown":"Just increase the heap size a little by setting this option in\r\n\r\nRun → Run Configurations → Arguments → VM arguments\r\n\r\n&lt;!-- language: lang-none --&gt;\r\n\r\n    -Xms1024M -Xmx2048M\r\n\r\n**Xms** - for minimum limit\r\n\r\n**Xmx** - for maximum limit","title":"Error java.lang.OutOfMemoryError: GC overhead limit exceeded","body":"<p>Just increase the heap size a little by setting this option in</p>\n\n<p>Run → Run Configurations → Arguments → VM arguments</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>-Xms1024M -Xmx2048M\n</code></pre>\n\n<p><strong>Xms</strong> - for minimum limit</p>\n\n<p><strong>Xmx</strong> - for maximum limit</p>\n"},{"tags":[],"owner":{"account_id":38907,"reputation":53159,"user_id":111988,"accept_rate":74,"display_name":"Sunil Kumar Sahoo"},"down_vote_count":9,"up_vote_count":22,"is_accepted":false,"score":13,"last_activity_date":1556004949,"creation_date":1420002589,"answer_id":27716421,"question_id":1393486,"body_markdown":"For me, the following steps worked:\r\n\r\n1. Open the `eclipse.ini` file\r\n2. Change\r\n\r\n    &lt;!-- language: lang-none --&gt;\r\n\r\n        -Xms40m\r\n        -Xmx512m\r\n\r\n    to\r\n\r\n    &lt;!-- language: lang-none --&gt;\r\n\r\n        -Xms512m\r\n        -Xmx1024m\r\n    \r\n3. Restart Eclipse\r\n\r\n[See here][1]\r\n\r\n\r\n  [1]: https://www.simplified.guide/eclipse/fix-gc-overhead-limit-exceeded","title":"Error java.lang.OutOfMemoryError: GC overhead limit exceeded","body":"<p>For me, the following steps worked:</p>\n\n<ol>\n<li>Open the <code>eclipse.ini</code> file</li>\n<li><p>Change</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>-Xms40m\n-Xmx512m\n</code></pre>\n\n<p>to</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>-Xms512m\n-Xmx1024m\n</code></pre></li>\n<li><p>Restart Eclipse</p></li>\n</ol>\n\n<p><a href=\"https://www.simplified.guide/eclipse/fix-gc-overhead-limit-exceeded\" rel=\"nofollow noreferrer\">See here</a></p>\n"},{"tags":[],"owner":{"account_id":6453072,"reputation":37996,"user_id":4999394,"accept_rate":98,"display_name":"Ravindra babu"},"down_vote_count":1,"up_vote_count":40,"is_accepted":false,"score":39,"last_activity_date":1588891768,"creation_date":1454782018,"answer_id":35244518,"question_id":1393486,"body_markdown":"Cause for the error according to the [*Java [8] Platform, Standard Edition Troubleshooting Guide*][1]: (emphasis and line breaks added)\r\n\r\n&gt; [...] &quot;GC overhead limit exceeded&quot; indicates that the garbage collector is running all the time and Java program is making very slow progress. \r\n\r\n&gt;After a garbage collection, if the *Java process is spending more than approximately 98% of its time doing garbage collection* and if it is recovering less than 2% of the heap and has been doing so far the last 5 (compile time constant) consecutive garbage collections, then a `java.lang.OutOfMemoryError` is thrown. [...]\r\n\r\n1. *Increase the heap size* if current heap is not enough.\r\n2. If you still get this error after increasing heap memory, use memory *profiling tools* like [MAT][2] ( Memory analyzer tool),  [Visual VM][3] etc and fix memory leaks.\r\n3. Upgrade JDK version to latest version ( 1.8.x) or at least 1.7.x and use G1GC algorithm. . *The throughput goal for the G1 GC is 90 percent application time and 10 percent garbage collection time*\r\n4. Apart from setting heap memory with -`Xms1g -Xmx2g` , try\r\n\r\n        -XX:+UseG1GC -XX:G1HeapRegionSize=n -XX:MaxGCPauseMillis=m  \r\n        -XX:ParallelGCThreads=n -XX:ConcGCThreads=n\r\n\r\n\r\n\r\nHave a look at some more related questions regarding G1GC\r\n\r\n* https://stackoverflow.com/questions/8111310/java-7-jdk-7-garbage-collection-and-documentation/34254605#34254605\r\n\r\n* https://stackoverflow.com/questions/2254041/java-g1-garbage-collection-in-production/34254401#34254401\r\n\r\n* [Oracle technetwork article for GC finetuning][4]\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/technotes/guides/troubleshoot/memleaks002.html\r\n  [2]: http://www.eclipse.org/mat/\r\n  [3]: https://visualvm.github.io/\r\n  [4]: http://www.oracle.com/technetwork/articles/java/g1gc-1984535.html","title":"Error java.lang.OutOfMemoryError: GC overhead limit exceeded","body":"<p>Cause for the error according to the <a href=\"https://docs.oracle.com/javase/8/docs/technotes/guides/troubleshoot/memleaks002.html\" rel=\"nofollow noreferrer\"><em>Java [8] Platform, Standard Edition Troubleshooting Guide</em></a>: (emphasis and line breaks added)</p>\n\n<blockquote>\n  <p>[...] \"GC overhead limit exceeded\" indicates that the garbage collector is running all the time and Java program is making very slow progress. </p>\n  \n  <p>After a garbage collection, if the <em>Java process is spending more than approximately 98% of its time doing garbage collection</em> and if it is recovering less than 2% of the heap and has been doing so far the last 5 (compile time constant) consecutive garbage collections, then a <code>java.lang.OutOfMemoryError</code> is thrown. [...]</p>\n</blockquote>\n\n<ol>\n<li><em>Increase the heap size</em> if current heap is not enough.</li>\n<li>If you still get this error after increasing heap memory, use memory <em>profiling tools</em> like <a href=\"http://www.eclipse.org/mat/\" rel=\"nofollow noreferrer\">MAT</a> ( Memory analyzer tool),  <a href=\"https://visualvm.github.io/\" rel=\"nofollow noreferrer\">Visual VM</a> etc and fix memory leaks.</li>\n<li>Upgrade JDK version to latest version ( 1.8.x) or at least 1.7.x and use G1GC algorithm. . <em>The throughput goal for the G1 GC is 90 percent application time and 10 percent garbage collection time</em></li>\n<li><p>Apart from setting heap memory with -<code>Xms1g -Xmx2g</code> , try</p>\n\n<pre><code>-XX:+UseG1GC -XX:G1HeapRegionSize=n -XX:MaxGCPauseMillis=m  \n-XX:ParallelGCThreads=n -XX:ConcGCThreads=n\n</code></pre></li>\n</ol>\n\n<p>Have a look at some more related questions regarding G1GC</p>\n\n<ul>\n<li><p><a href=\"https://stackoverflow.com/questions/8111310/java-7-jdk-7-garbage-collection-and-documentation/34254605#34254605\">Java 7 (JDK 7) garbage collection and documentation on G1</a></p></li>\n<li><p><a href=\"https://stackoverflow.com/questions/2254041/java-g1-garbage-collection-in-production/34254401#34254401\">Java G1 garbage collection in production</a></p></li>\n<li><p><a href=\"http://www.oracle.com/technetwork/articles/java/g1gc-1984535.html\" rel=\"nofollow noreferrer\">Oracle technetwork article for GC finetuning</a></p></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":6958103,"reputation":400,"user_id":5338514,"display_name":"shashi"},"down_vote_count":4,"up_vote_count":4,"is_accepted":false,"score":0,"last_activity_date":1460541256,"creation_date":1460541159,"answer_id":36594743,"question_id":1393486,"body_markdown":"You need to increase the memory size in Jdeveloper go to **setDomainEnv.cmd**.\r\n\r\n    set WLS_HOME=%WL_HOME%\\server    \r\n    set XMS_SUN_64BIT=**256**\r\n    set XMS_SUN_32BIT=**256**\r\n    set XMX_SUN_64BIT=**3072**\r\n    set XMX_SUN_32BIT=**3072**\r\n    set XMS_JROCKIT_64BIT=**256**\r\n    set XMS_JROCKIT_32BIT=**256**\r\n    set XMX_JROCKIT_64BIT=**1024**\r\n    set XMX_JROCKIT_32BIT=**1024**\r\n    \r\n    if &quot;%JAVA_VENDOR%&quot;==&quot;Sun&quot; (\r\n    \tset WLS_MEM_ARGS_64BIT=**-Xms256m -Xmx512m**\r\n    \tset WLS_MEM_ARGS_32BIT=**-Xms256m -Xmx512m**\r\n    ) else (\r\n    \tset WLS_MEM_ARGS_64BIT=**-Xms512m -Xmx512m**\r\n    \tset WLS_MEM_ARGS_32BIT=**-Xms512m -Xmx512m**\r\n    )\r\n    \r\nand \r\n    \r\n    set MEM_PERM_SIZE_64BIT=-XX:PermSize=**256m**\r\n    set MEM_PERM_SIZE_32BIT=-XX:PermSize=**256m**\r\n    \r\n    if &quot;%JAVA_USE_64BIT%&quot;==&quot;true&quot; (\r\n    \tset MEM_PERM_SIZE=%MEM_PERM_SIZE_64BIT%\r\n    ) else (\r\n    \tset MEM_PERM_SIZE=%MEM_PERM_SIZE_32BIT%\r\n    )\r\n    \r\n    set MEM_MAX_PERM_SIZE_64BIT=-XX:MaxPermSize=**1024m**\r\n    set MEM_MAX_PERM_SIZE_32BIT=-XX:MaxPermSize=**1024m**","title":"Error java.lang.OutOfMemoryError: GC overhead limit exceeded","body":"<p>You need to increase the memory size in Jdeveloper go to <strong>setDomainEnv.cmd</strong>.</p>\n\n<pre><code>set WLS_HOME=%WL_HOME%\\server    \nset XMS_SUN_64BIT=**256**\nset XMS_SUN_32BIT=**256**\nset XMX_SUN_64BIT=**3072**\nset XMX_SUN_32BIT=**3072**\nset XMS_JROCKIT_64BIT=**256**\nset XMS_JROCKIT_32BIT=**256**\nset XMX_JROCKIT_64BIT=**1024**\nset XMX_JROCKIT_32BIT=**1024**\n\nif \"%JAVA_VENDOR%\"==\"Sun\" (\n    set WLS_MEM_ARGS_64BIT=**-Xms256m -Xmx512m**\n    set WLS_MEM_ARGS_32BIT=**-Xms256m -Xmx512m**\n) else (\n    set WLS_MEM_ARGS_64BIT=**-Xms512m -Xmx512m**\n    set WLS_MEM_ARGS_32BIT=**-Xms512m -Xmx512m**\n)\n</code></pre>\n\n<p>and </p>\n\n<pre><code>set MEM_PERM_SIZE_64BIT=-XX:PermSize=**256m**\nset MEM_PERM_SIZE_32BIT=-XX:PermSize=**256m**\n\nif \"%JAVA_USE_64BIT%\"==\"true\" (\n    set MEM_PERM_SIZE=%MEM_PERM_SIZE_64BIT%\n) else (\n    set MEM_PERM_SIZE=%MEM_PERM_SIZE_32BIT%\n)\n\nset MEM_MAX_PERM_SIZE_64BIT=-XX:MaxPermSize=**1024m**\nset MEM_MAX_PERM_SIZE_32BIT=-XX:MaxPermSize=**1024m**\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5487946,"reputation":5492,"user_id":4362167,"display_name":"ali ozkara"},"down_vote_count":2,"up_vote_count":18,"is_accepted":false,"score":16,"last_activity_date":1479924596,"creation_date":1479924596,"answer_id":40771497,"question_id":1393486,"body_markdown":"try this\r\n\r\nopen the `build.gradle` file  \r\n\r\n      android {\r\n            dexOptions {\r\n               javaMaxHeapSize = &quot;4g&quot;\r\n            }\r\n       }","title":"Error java.lang.OutOfMemoryError: GC overhead limit exceeded","body":"<p>try this</p>\n\n<p>open the <code>build.gradle</code> file  </p>\n\n<pre><code>  android {\n        dexOptions {\n           javaMaxHeapSize = \"4g\"\n        }\n   }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1760237,"reputation":2420,"user_id":1607562,"display_name":"Hoshouns"},"down_vote_count":3,"up_vote_count":16,"is_accepted":false,"score":13,"last_activity_date":1482839261,"creation_date":1482839261,"answer_id":41344611,"question_id":1393486,"body_markdown":"The following worked for me. Just add the following snippet:\r\n    \r\n    \r\n    \r\n    android {\r\n            compileSdkVersion 25\r\n            buildToolsVersion &#39;25.0.1&#39;\r\n    \r\n    defaultConfig {\r\n            applicationId &quot;yourpackage&quot;\r\n            minSdkVersion 10\r\n            targetSdkVersion 25\r\n            versionCode 1\r\n            versionName &quot;1.0&quot;\r\n            multiDexEnabled true\r\n        }\r\n    dexOptions {\r\n            javaMaxHeapSize &quot;4g&quot;\r\n        }\r\n    }\r\n    ","title":"Error java.lang.OutOfMemoryError: GC overhead limit exceeded","body":"<p>The following worked for me. Just add the following snippet:</p>\n\n<pre><code>android {\n        compileSdkVersion 25\n        buildToolsVersion '25.0.1'\n\ndefaultConfig {\n        applicationId \"yourpackage\"\n        minSdkVersion 10\n        targetSdkVersion 25\n        versionCode 1\n        versionName \"1.0\"\n        multiDexEnabled true\n    }\ndexOptions {\n        javaMaxHeapSize \"4g\"\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6762145,"reputation":14229,"user_id":5208491,"display_name":"saigopi.me"},"down_vote_count":1,"up_vote_count":10,"is_accepted":false,"score":9,"last_activity_date":1491568028,"creation_date":1491568028,"answer_id":43278151,"question_id":1393486,"body_markdown":"increase javaMaxHeapsize in your build.gradle(Module:app) file\r\n\r\n    dexOptions {\r\n        javaMaxHeapSize &quot;1g&quot;\r\n    }\r\nto (Add this line in gradle)\r\n   \r\n\r\n     dexOptions {\r\n            javaMaxHeapSize &quot;4g&quot;\r\n        }","title":"Error java.lang.OutOfMemoryError: GC overhead limit exceeded","body":"<p>increase javaMaxHeapsize in your build.gradle(Module:app) file</p>\n\n<pre><code>dexOptions {\n    javaMaxHeapSize \"1g\"\n}\n</code></pre>\n\n<p>to (Add this line in gradle)</p>\n\n<pre><code> dexOptions {\n        javaMaxHeapSize \"4g\"\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6468900,"reputation":350,"user_id":7533664,"display_name":"htlbydgod"},"down_vote_count":3,"up_vote_count":3,"is_accepted":false,"score":0,"last_activity_date":1515482773,"creation_date":1497307537,"answer_id":44509807,"question_id":1393486,"body_markdown":"In Netbeans, it may be helpful to design a max heap size. Go to *Run* =&gt; *Set Project Configuration* =&gt; *Customise*. In the *Run* of its popped up window, go to *VM Option*, fill in `-Xms2048m -Xmx2048m`. It could solve heap size problem.","title":"Error java.lang.OutOfMemoryError: GC overhead limit exceeded","body":"<p>In Netbeans, it may be helpful to design a max heap size. Go to <em>Run</em> => <em>Set Project Configuration</em> => <em>Customise</em>. In the <em>Run</em> of its popped up window, go to <em>VM Option</em>, fill in <code>-Xms2048m -Xmx2048m</code>. It could solve heap size problem.</p>\n"},{"tags":[],"owner":{"account_id":6931623,"reputation":74,"user_id":5320947,"display_name":"Alex Ivan Howard"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1515364422,"creation_date":1515364422,"answer_id":48142185,"question_id":1393486,"body_markdown":"I&#39;m working in Android Studio and encountered this error when trying to generate a signed APK for release. \r\nI was able to build and test a debug APK with no problem, but as soon as I wanted to build a release APK, the build process would run for minutes on end and then finally terminate with the &quot;Error java.lang.OutOfMemoryError: GC overhead limit exceeded&quot;. I increased the heap sizes for both the VM and the Android DEX compiler, but the problem persisted.\r\nFinally, after many hours and mugs of coffee it turned out that the problem was in my app-level &#39;build.gradle&#39; file - I had the &#39;minifyEnabled&#39; parameter for the release build type set to &#39;false&#39;, consequently running Proguard stuffs on code that hasn&#39;t been through the code-shrinking&#39; process (see https://developer.android.com/studio/build/shrink-code.html). \r\nI changed the &#39;minifyEnabled&#39; parameter to &#39;true&#39; and the release build executed like a dream :)\r\n\r\nIn short, I had to change my app-level &#39;build.gradle&#39; file from:\r\n    //...\r\n\r\n    buildTypes {\r\n        release {\r\n            minifyEnabled false\r\n            proguardFiles getDefaultProguardFile(&#39;proguard-android.txt&#39;), &#39;proguard-rules.pro&#39;\r\n            signingConfig signingConfigs.sign_config_release\r\n        }\r\n        debug {\r\n            debuggable true\r\n            signingConfig signingConfigs.sign_config_debug\r\n        }\r\n    }\r\n\r\n    //...\r\nto\r\n\r\n        //...\r\n\r\n    buildTypes {\r\n        release {\r\n            minifyEnabled true\r\n            proguardFiles getDefaultProguardFile(&#39;proguard-android.txt&#39;), &#39;proguard-rules.pro&#39;\r\n            signingConfig signingConfigs.sign_config_release\r\n        }\r\n        debug {\r\n            debuggable true\r\n            signingConfig signingConfigs.sign_config_debug\r\n        }\r\n    }\r\n\r\n    //...\r\n\r\n","title":"Error java.lang.OutOfMemoryError: GC overhead limit exceeded","body":"<p>I'm working in Android Studio and encountered this error when trying to generate a signed APK for release. \nI was able to build and test a debug APK with no problem, but as soon as I wanted to build a release APK, the build process would run for minutes on end and then finally terminate with the \"Error java.lang.OutOfMemoryError: GC overhead limit exceeded\". I increased the heap sizes for both the VM and the Android DEX compiler, but the problem persisted.\nFinally, after many hours and mugs of coffee it turned out that the problem was in my app-level 'build.gradle' file - I had the 'minifyEnabled' parameter for the release build type set to 'false', consequently running Proguard stuffs on code that hasn't been through the code-shrinking' process (see <a href=\"https://developer.android.com/studio/build/shrink-code.html\" rel=\"nofollow noreferrer\">https://developer.android.com/studio/build/shrink-code.html</a>). \nI changed the 'minifyEnabled' parameter to 'true' and the release build executed like a dream :)</p>\n\n<p>In short, I had to change my app-level 'build.gradle' file from:\n    //...</p>\n\n<pre><code>buildTypes {\n    release {\n        minifyEnabled false\n        proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'\n        signingConfig signingConfigs.sign_config_release\n    }\n    debug {\n        debuggable true\n        signingConfig signingConfigs.sign_config_debug\n    }\n}\n\n//...\n</code></pre>\n\n<p>to</p>\n\n<pre><code>    //...\n\nbuildTypes {\n    release {\n        minifyEnabled true\n        proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'\n        signingConfig signingConfigs.sign_config_release\n    }\n    debug {\n        debuggable true\n        signingConfig signingConfigs.sign_config_debug\n    }\n}\n\n//...\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3723758,"reputation":11894,"user_id":3600553,"accept_rate":71,"display_name":"Du-Lacoste"},"down_vote_count":2,"up_vote_count":4,"is_accepted":false,"score":2,"last_activity_date":1528982184,"creation_date":1528982184,"answer_id":50858480,"question_id":1393486,"body_markdown":"To increase heap size in IntelliJ IDEA follow the following instructions. It worked for me.\r\n\r\nFor Windows Users,\r\n\r\nGo to the location where IDE is installed and search for following.\r\n\r\n    idea64.exe.vmoptions\r\n\r\nEdit the file and add the following.\r\n\r\n    -Xms512m\r\n    -Xmx2024m\r\n    -XX:MaxPermSize=700m\r\n    -XX:ReservedCodeCacheSize=480m\r\n\r\nThat is it !!\r\n","title":"Error java.lang.OutOfMemoryError: GC overhead limit exceeded","body":"<p>To increase heap size in IntelliJ IDEA follow the following instructions. It worked for me.</p>\n\n<p>For Windows Users,</p>\n\n<p>Go to the location where IDE is installed and search for following.</p>\n\n<pre><code>idea64.exe.vmoptions\n</code></pre>\n\n<p>Edit the file and add the following.</p>\n\n<pre><code>-Xms512m\n-Xmx2024m\n-XX:MaxPermSize=700m\n-XX:ReservedCodeCacheSize=480m\n</code></pre>\n\n<p>That is it !!</p>\n"},{"tags":[],"owner":{"account_id":100479,"reputation":5890,"user_id":270847,"accept_rate":85,"display_name":"Thomas"},"down_vote_count":10,"up_vote_count":4,"is_accepted":false,"score":-6,"last_activity_date":1551201785,"creation_date":1551201785,"answer_id":54890955,"question_id":1393486,"body_markdown":"Rebooting my MacBook fixed this issue for me.","title":"Error java.lang.OutOfMemoryError: GC overhead limit exceeded","body":"<p>Rebooting my MacBook fixed this issue for me.</p>\n"},{"tags":[],"owner":{"account_id":16209329,"reputation":1013,"user_id":11703772,"display_name":"John Doe"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1563915838,"creation_date":1563915838,"answer_id":57172182,"question_id":1393486,"body_markdown":"You can also increase memory allocation and heap size by adding this to your `gradle.properties` file:\r\n\r\n`org.gradle.jvmargs=-Xmx2048M -XX\\:MaxHeapSize\\=32g`\r\n\r\nIt doesn&#39;t have to be 2048M and 32g, make it as big as you want.","title":"Error java.lang.OutOfMemoryError: GC overhead limit exceeded","body":"<p>You can also increase memory allocation and heap size by adding this to your <code>gradle.properties</code> file:</p>\n\n<p><code>org.gradle.jvmargs=-Xmx2048M -XX\\:MaxHeapSize\\=32g</code></p>\n\n<p>It doesn't have to be 2048M and 32g, make it as big as you want.</p>\n"},{"tags":[],"owner":{"account_id":4033977,"reputation":6390,"user_id":3319132,"accept_rate":49,"display_name":"reza_khalafi"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1569145986,"creation_date":1569145986,"answer_id":58048041,"question_id":1393486,"body_markdown":"**Solved:**  \r\nJust add  \r\n `org.gradle.jvmargs=-Xmx1024m`  \r\nin  \r\n `gradle.properties`   \r\nand if it does not exist, create it.","title":"Error java.lang.OutOfMemoryError: GC overhead limit exceeded","body":"<p><strong>Solved:</strong><br>\nJust add<br>\n <code>org.gradle.jvmargs=-Xmx1024m</code><br>\nin<br>\n <code>gradle.properties</code><br>\nand if it does not exist, create it.</p>\n"},{"tags":[],"owner":{"account_id":3962804,"reputation":1490,"user_id":3269543,"accept_rate":83,"display_name":"Phoenix"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1570698540,"creation_date":1570698540,"answer_id":58319283,"question_id":1393486,"body_markdown":"\r\n**Java heap size descriptions (xms, xmx, xmn)**\r\n\r\n    -Xms size in bytes\r\n\r\n    Example : java -Xms32m\r\nSets the initial size of the Java heap. \r\nThe default size is 2097152 (2MB). \r\nThe values must be a multiple of, and greater than, 1024 bytes (1KB).\r\n(The -server flag increases the default size to 32M.)\r\n\r\n    -Xmn size in bytes\r\n\r\n    Example : java -Xmx2m\r\n\r\nSets the initial Java heap size for the Eden generation. \r\nThe default value is 640K. \r\n(The -server flag increases the default size to 2M.)\r\n\r\n    -Xmx size in bytes\r\n\r\n    Example : java -Xmx2048m\r\nSets the maximum size to which the Java heap can grow. \r\nThe default size is 64M. \r\n(The -server flag increases the default size to 128M.) \r\nThe maximum heap limit is about 2 GB (2048MB).\r\n\r\n**Java memory arguments (xms, xmx, xmn) formatting**\r\n\r\nWhen setting the Java heap size, you should specify your memory argument using one of the letters “m” or “M” for MB, or “g” or “G” for GB. Your setting won’t work if you specify “MB” or “GB.” Valid arguments look like this:\r\n\r\n-Xms64m or -Xms64M\r\n-Xmx1g or -Xmx1G\r\nCan also use 2048MB to specify 2GB\r\nAlso, make sure you just use whole numbers when specifying your arguments. Using -Xmx512m is a valid option, but -Xmx0.5g will cause an error.\r\n\r\nThis reference can be helpful for someone.","title":"Error java.lang.OutOfMemoryError: GC overhead limit exceeded","body":"<p><strong>Java heap size descriptions (xms, xmx, xmn)</strong></p>\n\n<pre><code>-Xms size in bytes\n\nExample : java -Xms32m\n</code></pre>\n\n<p>Sets the initial size of the Java heap. \nThe default size is 2097152 (2MB). \nThe values must be a multiple of, and greater than, 1024 bytes (1KB).\n(The -server flag increases the default size to 32M.)</p>\n\n<pre><code>-Xmn size in bytes\n\nExample : java -Xmx2m\n</code></pre>\n\n<p>Sets the initial Java heap size for the Eden generation. \nThe default value is 640K. \n(The -server flag increases the default size to 2M.)</p>\n\n<pre><code>-Xmx size in bytes\n\nExample : java -Xmx2048m\n</code></pre>\n\n<p>Sets the maximum size to which the Java heap can grow. \nThe default size is 64M. \n(The -server flag increases the default size to 128M.) \nThe maximum heap limit is about 2 GB (2048MB).</p>\n\n<p><strong>Java memory arguments (xms, xmx, xmn) formatting</strong></p>\n\n<p>When setting the Java heap size, you should specify your memory argument using one of the letters “m” or “M” for MB, or “g” or “G” for GB. Your setting won’t work if you specify “MB” or “GB.” Valid arguments look like this:</p>\n\n<p>-Xms64m or -Xms64M\n-Xmx1g or -Xmx1G\nCan also use 2048MB to specify 2GB\nAlso, make sure you just use whole numbers when specifying your arguments. Using -Xmx512m is a valid option, but -Xmx0.5g will cause an error.</p>\n\n<p>This reference can be helpful for someone.</p>\n"},{"tags":[],"owner":{"account_id":4266310,"reputation":532,"user_id":3489351,"display_name":"androidStud"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1574653301,"creation_date":1574653301,"answer_id":59024964,"question_id":1393486,"body_markdown":"I don&#39;t know if this is still relevant or not, but just want to share what worked for me.\r\n\r\nUpdate kotlin version to latest available. https://blog.jetbrains.com/kotlin/category/releases/\r\n\r\nand it&#39;s done.","title":"Error java.lang.OutOfMemoryError: GC overhead limit exceeded","body":"<p>I don't know if this is still relevant or not, but just want to share what worked for me.</p>\n\n<p>Update kotlin version to latest available. <a href=\"https://blog.jetbrains.com/kotlin/category/releases/\" rel=\"nofollow noreferrer\">https://blog.jetbrains.com/kotlin/category/releases/</a></p>\n\n<p>and it's done.</p>\n"},{"tags":[],"owner":{"account_id":2466135,"reputation":400,"user_id":2149194,"display_name":"Rahul Jain"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1582771216,"creation_date":1582771216,"answer_id":60425510,"question_id":1393486,"body_markdown":"you can try to make changes on the server setting by referring to this image and increase the memory size for processing\r\nprocess changes highlighted in yellow\r\n\r\n\r\nyou can also make changes to java heap by opening cmd-&gt; `set _java_opts -Xmx2g`  \r\n2g(2gigabytes) depending upon the complexity of your program\r\n\r\ntry to use less constant variable and temp variables \r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/c6fS0.png","title":"Error java.lang.OutOfMemoryError: GC overhead limit exceeded","body":"<p>you can try to make changes on the server setting by referring to this image and increase the memory size for processing\nprocess changes highlighted in yellow</p>\n\n<p>you can also make changes to java heap by opening cmd-> <code>set _java_opts -Xmx2g</code><br>\n2g(2gigabytes) depending upon the complexity of your program</p>\n\n<p>try to use less constant variable and temp variables </p>\n\n<p><a href=\"https://i.stack.imgur.com/c6fS0.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/c6fS0.png\" alt=\"enter image description here\"></a></p>\n"},{"tags":[],"owner":{"account_id":18166833,"reputation":15,"user_id":13217255,"display_name":"spike"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1631337443,"creation_date":1631337443,"answer_id":69140222,"question_id":1393486,"body_markdown":"@Buhb\r\nI reproduced this by this in an normal spring-boot web application within its main method. Here is the code: \r\n\r\n    public static void main(String[] args) {\r\n        SpringApplication.run(DemoServiceBApplication.class, args);\r\n        LOGGER.info(&quot;hello.&quot;);\r\n        int len = 0, oldlen=0;\r\n        Object[] a = new Object[0];\r\n        try {\r\n            for (; ; ) {\r\n                ++len;\r\n                Object[] temp = new Object[oldlen = len];\r\n                temp[0] = a;\r\n                a = temp;\r\n            }\r\n        } catch (Throwable e) {\r\n            LOGGER.info(&quot;error: {}&quot;, e.toString());\r\n        }\r\n    }\r\nThe sample code that caused an come is also from oracle java8 language specifications.\r\n\r\n","title":"Error java.lang.OutOfMemoryError: GC overhead limit exceeded","body":"<p>@Buhb\nI reproduced this by this in an normal spring-boot web application within its main method. Here is the code:</p>\n<pre><code>public static void main(String[] args) {\n    SpringApplication.run(DemoServiceBApplication.class, args);\n    LOGGER.info(&quot;hello.&quot;);\n    int len = 0, oldlen=0;\n    Object[] a = new Object[0];\n    try {\n        for (; ; ) {\n            ++len;\n            Object[] temp = new Object[oldlen = len];\n            temp[0] = a;\n            a = temp;\n        }\n    } catch (Throwable e) {\n        LOGGER.info(&quot;error: {}&quot;, e.toString());\n    }\n}\n</code></pre>\n<p>The sample code that caused an come is also from oracle java8 language specifications.</p>\n"},{"tags":[],"owner":{"account_id":6687609,"reputation":530,"user_id":6595526,"display_name":"Sidharth K.Burnwal"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1636518280,"creation_date":1636223738,"answer_id":69866826,"question_id":1393486,"body_markdown":"I got this error while working with Oracle web logic server. I am sharing my answer for reference in case someone end up here looking for the solution.\r\n\r\nSo, if you are trying to up the Oracle web logic server and got this error then you just have to increase the initial and maximum heap size set for running the server.\r\n\r\n\r\n&gt; Go to - &gt; **C:\\Oracle\\Middleware\\Oracle_Home\\user_projects\\domains\\wl_server\\bin**\r\n&gt; \r\n&gt; open **setDomainEnv.cmd**\r\n&gt;\r\n&gt; check **set USER_MEM_ARGS** value , if its less then\r\n&gt; \r\n&gt; **set USER_MEM_ARGS=&quot;-Xms128m – Xmx8192m ${MEM_DEV_ARGS} ${MEM_MAX_PERM_SIZE}&quot;**  \r\n\r\nThis means that your intital heap size is set to 128 MB and max heap size is 8GB.\r\n Now , just save the file and restart the server. if it didn&#39;t resolve the issue, try increasing the size or look for ways to optimizing the service.\r\n\r\nfor ref , check this link  : https://docs.oracle.com/cd/E49933_01/server.770/es_install/src/tins_postinstall_jvm_heap.html\r\n\r\nedit: Check whether you are able to see the updated java args while running the server . just like this [![enter image description here][1]][1]\r\nIf its coming as before then replace the shown value from setDoaminEnv.cmd by simple search and replace.\r\n\r\n  [1]: https://i.stack.imgur.com/H0Pfc.png","title":"Error java.lang.OutOfMemoryError: GC overhead limit exceeded","body":"<p>I got this error while working with Oracle web logic server. I am sharing my answer for reference in case someone end up here looking for the solution.</p>\n<p>So, if you are trying to up the Oracle web logic server and got this error then you just have to increase the initial and maximum heap size set for running the server.</p>\n<blockquote>\n<p>Go to - &gt; <strong>C:\\Oracle\\Middleware\\Oracle_Home\\user_projects\\domains\\wl_server\\bin</strong></p>\n<p>open <strong>setDomainEnv.cmd</strong></p>\n<p>check <strong>set USER_MEM_ARGS</strong> value , if its less then</p>\n<p><strong>set USER_MEM_ARGS=&quot;-Xms128m – Xmx8192m ${MEM_DEV_ARGS} ${MEM_MAX_PERM_SIZE}&quot;</strong></p>\n</blockquote>\n<p>This means that your intital heap size is set to 128 MB and max heap size is 8GB.\nNow , just save the file and restart the server. if it didn't resolve the issue, try increasing the size or look for ways to optimizing the service.</p>\n<p>for ref , check this link  : <a href=\"https://docs.oracle.com/cd/E49933_01/server.770/es_install/src/tins_postinstall_jvm_heap.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/cd/E49933_01/server.770/es_install/src/tins_postinstall_jvm_heap.html</a></p>\n<p>edit: Check whether you are able to see the updated java args while running the server . just like this <a href=\"https://i.stack.imgur.com/H0Pfc.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/H0Pfc.png\" alt=\"enter image description here\" /></a>\nIf its coming as before then replace the shown value from setDoaminEnv.cmd by simple search and replace.</p>\n"},{"tags":[],"owner":{"account_id":17683470,"reputation":158,"user_id":12836822,"display_name":"Ashrik Ahamed"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695219875,"creation_date":1695219875,"answer_id":77143416,"question_id":1393486,"body_markdown":"If you are here for the exception that rise in **TOMCAT** then this is for you:\r\n\r\nIt may happen when you work with that tomcat for the long time\r\n\r\nSteps:\r\n\r\n1. Navigate to tomcat folder (C:/tomcat)\r\n2. There will a folder named - &quot;work&quot; and then - &quot;catalina&quot; then - &quot;localHost&quot;\r\n3. Delete that localhost folder\r\n4. Inside C:/tomcat/webapps there will be files, delete all and rebuild.\r\n\r\nNow that heap memory issue would be sorted.","title":"Error java.lang.OutOfMemoryError: GC overhead limit exceeded","body":"<p>If you are here for the exception that rise in <strong>TOMCAT</strong> then this is for you:</p>\n<p>It may happen when you work with that tomcat for the long time</p>\n<p>Steps:</p>\n<ol>\n<li>Navigate to tomcat folder (C:/tomcat)</li>\n<li>There will a folder named - &quot;work&quot; and then - &quot;catalina&quot; then - &quot;localHost&quot;</li>\n<li>Delete that localhost folder</li>\n<li>Inside C:/tomcat/webapps there will be files, delete all and rebuild.</li>\n</ol>\n<p>Now that heap memory issue would be sorted.</p>\n"},{"tags":[],"owner":{"account_id":411178,"reputation":374,"user_id":783470,"display_name":"Roger Perkins"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1702057827,"creation_date":1702057827,"answer_id":77628368,"question_id":1393486,"body_markdown":"For SAP BOBJ BOE SIA CMS 4.1, the xmx parameter is in the registry at location:\r\n\r\nHKEY_LOCAL_MACHINE\\SOFTWARE\\Wow6432Node\\Apache Software Foundation\\Procrun 2.0\\SIAserverName\\Parameters\\Java\r\n\r\nOptions value, it was 256m, increased it to 2g. No more out of memory errors in the log file, SIA is now stable and CMS.exe starts up okay.","title":"Error java.lang.OutOfMemoryError: GC overhead limit exceeded","body":"<p>For SAP BOBJ BOE SIA CMS 4.1, the xmx parameter is in the registry at location:</p>\n<p>HKEY_LOCAL_MACHINE\\SOFTWARE\\Wow6432Node\\Apache Software Foundation\\Procrun 2.0\\SIAserverName\\Parameters\\Java</p>\n<p>Options value, it was 256m, increased it to 2g. No more out of memory errors in the log file, SIA is now stable and CMS.exe starts up okay.</p>\n"}],"owner":{"account_id":10987,"reputation":50685,"user_id":21005,"accept_rate":78,"display_name":"Mnementh"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1234487,"favorite_count":0,"down_vote_count":0,"up_vote_count":956,"accepted_answer_id":1393503,"answer_count":24,"score":956,"last_activity_date":1702057827,"creation_date":1252409668,"question_id":1393486,"body_markdown":"I get this error message as I execute my `JUnit` tests:\r\n\r\n    java.lang.OutOfMemoryError: GC overhead limit exceeded\r\n\r\nI know what an `OutOfMemoryError` is, but what does GC overhead limit mean? How can I solve this?","title":"Error java.lang.OutOfMemoryError: GC overhead limit exceeded","body":"<p>I get this error message as I execute my <code>JUnit</code> tests:</p>\n<pre><code>java.lang.OutOfMemoryError: GC overhead limit exceeded\n</code></pre>\n<p>I know what an <code>OutOfMemoryError</code> is, but what does GC overhead limit mean? How can I solve this?</p>\n"},{"tags":["java","amazon-dynamodb","aws-sdk"],"answers":[{"tags":[],"owner":{"account_id":10749774,"reputation":14440,"user_id":7909676,"display_name":"Leeroy Hannigan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1702057453,"creation_date":1702046088,"answer_id":77627303,"question_id":77627171,"body_markdown":"When in on-demand capacity mode, DynamoDB does not use autoscaling so there is no min and max as you&#39;d imagine when comparing it to provisioned. While there is a maximum, you can always scale to double your previous peak instantly. In its current form, the previous peak does not come down. \r\n\r\nIf you are using on-demand mode and require a throughput of more than 4k WCU or 12k RCU then you can consider [pre-warming](https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/HowItWorks.ReadWriteCapacityMode.html#HowItWorks.PreWarming) your on-demand table where you set the previous peak manually.\r\n\r\nCurrently you are unable to use the SDK to understand the maximum directly via a single lookup call.\r\n\r\n---\r\n\r\nUpdate based on change of ask:\r\n\r\nFor provisioned capacity you need to use `DescribeScalableTarget` as the autoscaling is handled by Application Autoscaling:\r\n\r\nhttps://sdk.amazonaws.com/java/api/latest/software/amazon/awssdk/services/applicationautoscaling/ApplicationAutoScalingClient.html#deregisterScalableTarget(java.util.function.Consumer)","title":"Retrieveing Maximum capacity units for a Provisioned table in DynamoDB via AWS SDK","body":"<p>When in on-demand capacity mode, DynamoDB does not use autoscaling so there is no min and max as you'd imagine when comparing it to provisioned. While there is a maximum, you can always scale to double your previous peak instantly. In its current form, the previous peak does not come down.</p>\n<p>If you are using on-demand mode and require a throughput of more than 4k WCU or 12k RCU then you can consider <a href=\"https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/HowItWorks.ReadWriteCapacityMode.html#HowItWorks.PreWarming\" rel=\"nofollow noreferrer\">pre-warming</a> your on-demand table where you set the previous peak manually.</p>\n<p>Currently you are unable to use the SDK to understand the maximum directly via a single lookup call.</p>\n<hr />\n<p>Update based on change of ask:</p>\n<p>For provisioned capacity you need to use <code>DescribeScalableTarget</code> as the autoscaling is handled by Application Autoscaling:</p>\n<p><a href=\"https://sdk.amazonaws.com/java/api/latest/software/amazon/awssdk/services/applicationautoscaling/ApplicationAutoScalingClient.html#deregisterScalableTarget(java.util.function.Consumer)\" rel=\"nofollow noreferrer\">https://sdk.amazonaws.com/java/api/latest/software/amazon/awssdk/services/applicationautoscaling/ApplicationAutoScalingClient.html#deregisterScalableTarget(java.util.function.Consumer)</a></p>\n"}],"owner":{"account_id":15318924,"reputation":139,"user_id":11052037,"display_name":"Schallabajzer"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":1,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1702057453,"creation_date":1702044957,"question_id":77627171,"body_markdown":"Is it possible to query the maximum via DynamoDB AWS SDK, preferably  with the AWS SDK for Java 2.x ?\r\n\r\nTo be more specific, the value you input in the Maximum capacity units when you create or edit a DDB table with capacity mode set to provisioned.\r\n\r\n[![DDB table capacity][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/v97W4.png","title":"Retrieveing Maximum capacity units for a Provisioned table in DynamoDB via AWS SDK","body":"<p>Is it possible to query the maximum via DynamoDB AWS SDK, preferably  with the AWS SDK for Java 2.x ?</p>\n<p>To be more specific, the value you input in the Maximum capacity units when you create or edit a DDB table with capacity mode set to provisioned.</p>\n<p><a href=\"https://i.stack.imgur.com/v97W4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/v97W4.png\" alt=\"DDB table capacity\" /></a></p>\n"},{"tags":["java","deserialization","fortify","spring-data-redis"],"answers":[{"tags":[],"owner":{"account_id":15609651,"reputation":29,"user_id":11261458,"display_name":"user11261458"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1566249223,"creation_date":1566249223,"answer_id":57564028,"question_id":57224937,"body_markdown":"I found my own answer through trial and experiment with the static code analyzer. \r\nApparently you should re-write the implementation of RedisTemplate class and do your own implementation of jdkserializationredisserializer. \r\n\r\nSpecifically, you should override and make a deserializing converter which will be invoked in jdkserializationredisserializer class in constructor method, since it doesn&#39;t use any validation by default(it&#39;s using DeserializingConverter). Then in your deserializing converter, you implement the white-list approach that specifies what classes are expected. Make sure you unit test them too because they might have dependent classes needed to be deserialized. ","title":"RedisTemplate leads to unsafe deserialization in Fortify&#39;s dynamic code evaluation","body":"<p>I found my own answer through trial and experiment with the static code analyzer. \nApparently you should re-write the implementation of RedisTemplate class and do your own implementation of jdkserializationredisserializer. </p>\n\n<p>Specifically, you should override and make a deserializing converter which will be invoked in jdkserializationredisserializer class in constructor method, since it doesn't use any validation by default(it's using DeserializingConverter). Then in your deserializing converter, you implement the white-list approach that specifies what classes are expected. Make sure you unit test them too because they might have dependent classes needed to be deserialized. </p>\n"},{"tags":[],"owner":{"account_id":10553380,"reputation":2165,"user_id":10324087,"display_name":"viveknaskar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1702057302,"creation_date":1702057302,"answer_id":77628320,"question_id":57224937,"body_markdown":"I have faced the same issue and the Fortify scan report flagged this as &#39;Dynamic Code Evaluation: Unsafe Deserialization&#39;. Adding the solution since I didn&#39;t get a proper solution on *StackOverflow*.\r\n\r\n**Initial Code**\r\n\r\n    @Bean\r\n    public RedisTemplate redisTemplate() {\r\n        RedisSerializer&lt;String&gt; stringSerializer = new StringRedisSerializer();\r\n\r\n        RedisTemplate&lt;?, ?&gt; template = new RedisTemplate&lt;&gt;();\r\n        template.setConnectionFactory(jedisConnectionFactory());\r\n        template.setKeySerializer(stringSerializer);\r\n        template.setValueSerializer(stringSerializer);\r\n        template.afterPropertiesSet();\r\n\r\n        return template;\r\n    }\r\n\r\nThe problem was happening due to this line ```RedisTemplate&lt;?, ?&gt; template = new RedisTemplate&lt;&gt;();```\r\n\r\nNow, using safe serializers are recommended and I have used ```Jackson2JsonRedisSerializer``` for serializing and deserializing objects. I was already using ```StringRedisSerializer``` for strings.\r\n\r\nAdditionally, I initialized RedisTemplate&lt;String, Object&gt;, thereby specifying the key and value types.\r\n\r\n**Solution**\r\n\r\n    @Bean\r\n    public RedisTemplate&lt;String, Object&gt; redisTemplate() {\r\n        RedisSerializer&lt;String&gt; stringSerializer = new StringRedisSerializer();\r\n        Jackson2JsonRedisSerializer&lt;Object&gt; objectSerializer = new Jackson2JsonRedisSerializer&lt;&gt;(Object.class);\r\n\r\n        RedisTemplate&lt;String, Object&gt; template = new RedisTemplate&lt;&gt;();\r\n        template.setConnectionFactory(jedisConnectionFactory());\r\n        template.setKeySerializer(stringSerializer);\r\n        template.setValueSerializer(objectSerializer);\r\n\r\n        template.setHashKeySerializer(stringSerializer);\r\n        template.setHashValueSerializer(objectSerializer);\r\n\r\n        template.setEnableDefaultSerializer(true);\r\n        template.afterPropertiesSet();\r\n\r\n        return template;\r\n    }\r\n\r\nThis resolved my Fortify issue.","title":"RedisTemplate leads to unsafe deserialization in Fortify&#39;s dynamic code evaluation","body":"<p>I have faced the same issue and the Fortify scan report flagged this as 'Dynamic Code Evaluation: Unsafe Deserialization'. Adding the solution since I didn't get a proper solution on <em>StackOverflow</em>.</p>\n<p><strong>Initial Code</strong></p>\n<pre><code>@Bean\npublic RedisTemplate redisTemplate() {\n    RedisSerializer&lt;String&gt; stringSerializer = new StringRedisSerializer();\n\n    RedisTemplate&lt;?, ?&gt; template = new RedisTemplate&lt;&gt;();\n    template.setConnectionFactory(jedisConnectionFactory());\n    template.setKeySerializer(stringSerializer);\n    template.setValueSerializer(stringSerializer);\n    template.afterPropertiesSet();\n\n    return template;\n}\n</code></pre>\n<p>The problem was happening due to this line <code>RedisTemplate&lt;?, ?&gt; template = new RedisTemplate&lt;&gt;();</code></p>\n<p>Now, using safe serializers are recommended and I have used <code>Jackson2JsonRedisSerializer</code> for serializing and deserializing objects. I was already using <code>StringRedisSerializer</code> for strings.</p>\n<p>Additionally, I initialized RedisTemplate&lt;String, Object&gt;, thereby specifying the key and value types.</p>\n<p><strong>Solution</strong></p>\n<pre><code>@Bean\npublic RedisTemplate&lt;String, Object&gt; redisTemplate() {\n    RedisSerializer&lt;String&gt; stringSerializer = new StringRedisSerializer();\n    Jackson2JsonRedisSerializer&lt;Object&gt; objectSerializer = new Jackson2JsonRedisSerializer&lt;&gt;(Object.class);\n\n    RedisTemplate&lt;String, Object&gt; template = new RedisTemplate&lt;&gt;();\n    template.setConnectionFactory(jedisConnectionFactory());\n    template.setKeySerializer(stringSerializer);\n    template.setValueSerializer(objectSerializer);\n\n    template.setHashKeySerializer(stringSerializer);\n    template.setHashValueSerializer(objectSerializer);\n\n    template.setEnableDefaultSerializer(true);\n    template.afterPropertiesSet();\n\n    return template;\n}\n</code></pre>\n<p>This resolved my Fortify issue.</p>\n"}],"owner":{"account_id":15609651,"reputation":29,"user_id":11261458,"display_name":"user11261458"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2164,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":2,"score":3,"last_activity_date":1702057302,"creation_date":1564163638,"question_id":57224937,"body_markdown":"In making spring redis data template, I use:\r\n```\r\nRedisTemplate&lt;String, xxxDTO&gt; template = new RedisTemplate&lt;&gt;();\r\n```\r\nThen I also set the deserializer to a custom one that white lists certain class in case of unsafe deserialization.\r\n\r\nFortify somehow still highlights:\r\n```\r\nnew RedisTemplate&lt;&gt;();\r\n```\r\nas unsafe deserialization during the dynamic code evaluation, within the kingdom Input Validation and Representation.\r\n\r\nHow to make a RedisTemplate without being flagged?","title":"RedisTemplate leads to unsafe deserialization in Fortify&#39;s dynamic code evaluation","body":"<p>In making spring redis data template, I use:</p>\n\n<pre><code>RedisTemplate&lt;String, xxxDTO&gt; template = new RedisTemplate&lt;&gt;();\n</code></pre>\n\n<p>Then I also set the deserializer to a custom one that white lists certain class in case of unsafe deserialization.</p>\n\n<p>Fortify somehow still highlights:</p>\n\n<pre><code>new RedisTemplate&lt;&gt;();\n</code></pre>\n\n<p>as unsafe deserialization during the dynamic code evaluation, within the kingdom Input Validation and Representation.</p>\n\n<p>How to make a RedisTemplate without being flagged?</p>\n"},{"tags":["java","json","kotlin","parsing","command-line-interface"],"comments":[{"owner":{"account_id":2345668,"reputation":13002,"user_id":2055998,"accept_rate":68,"display_name":"PM 77-1"},"score":0,"creation_date":1702057582,"post_id":77628305,"comment_id":136854902,"body_markdown":"Why do you need it? What exactly do you try to achieve?","body":"Why do you need it? What exactly do you try to achieve?"}],"owner":{"account_id":4742401,"reputation":864,"user_id":7858768,"display_name":"user7858768"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":16,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"closed_date":1702058973,"answer_count":0,"score":-2,"last_activity_date":1702057115,"creation_date":1702057115,"question_id":77628305,"body_markdown":"Is there an open-source code example/library that would convert \r\n\r\nPrettified JSON records like:\r\n```\r\n{\r\n  &quot;name&quot;: &quot;Gilbert&quot;, \r\n  &quot;wins&quot;: [\r\n    [\r\n      &quot;straight&quot;, \r\n      &quot;7♣&quot;\r\n    ], \r\n    [\r\n      &quot;one pair&quot;, \r\n      &quot;10♥&quot;\r\n    ]\r\n  ]\r\n}\r\n```\r\n\r\nTo valid JSONL:\r\n```\r\n{&quot;name&quot;:&quot;Gilbert&quot;,&quot;wins&quot;:[[&quot;straight&quot;, &quot;7♣&quot;], [&quot;one pair&quot;, &quot;10♥&quot;]]}\r\n```\r\n\r\nAny language would be helpful to look at (java/kotlin would be ideal). I haven&#39;t been able to find it by searching around.\r\n\r\nBelow is what I have thus far, but very much wondering whether I am missing some corner cases with quotes within values. \r\n\r\n```\r\nclass JsonlStreamProcessor(\r\n    /**\r\n     * We are using JsonNode instead of ObjectNode as we can have valid JSONL\r\n     * of primitive values that would make ObjectNode fail. */\r\n    private val processNode: (JsonNode) -&gt; Unit,\r\n    private val processParseException: (Exception) -&gt; Unit,\r\n    private val processProcessingException: (Exception) -&gt; Unit\r\n) {\r\n    private val objectMapper = ObjectMapper()\r\n\r\n    /**\r\n     * Note: the stream that is given is not closed by this class. The responsibility\r\n     * of closing the input stream lies with the one who opened it.\r\n     * */\r\n    fun processInput(inputStream: InputStream = System.`in`) {\r\n        var buffer = StringBuilder()\r\n        var openBraces = 0\r\n        var inQuotes = false\r\n\r\n        while (true) {\r\n            val char = inputStream.read().takeIf { it != -1 }?.toChar() ?: break\r\n\r\n            // TODO: need to test this well.\r\n            if (char == &#39;\\&quot;&#39; &amp;&amp; (buffer.isEmpty() || buffer.last() != &#39;\\\\&#39; || buffer.endsWith(&quot;\\\\\\\\&quot;))) {\r\n                inQuotes = !inQuotes\r\n            }\r\n\r\n            if (!inQuotes) {\r\n                when (char) {\r\n                    &#39;{&#39; -&gt; openBraces++\r\n                    &#39;}&#39; -&gt; openBraces--\r\n                }\r\n            }\r\n\r\n            buffer.append(char)\r\n\r\n            // buffer.isNotEmpty() is cheaper than &#39;buffer.trim().isNotEmpty()&#39;\r\n            // so we are using it as a first check to avoid calling &#39;trim()&#39; unnecessarily.\r\n            if (openBraces == 0 &amp;&amp; buffer.isNotEmpty() &amp;&amp; buffer.trim().isNotEmpty()) {\r\n\r\n                var node: JsonNode? = null\r\n\r\n                try {\r\n                    node = objectMapper.readTree(buffer.toString())\r\n                } catch (exc: Exception) {\r\n                    processParseException(exc)\r\n                } finally {\r\n                    buffer = StringBuilder()\r\n                }\r\n\r\n                if (node != null) {\r\n                    try {\r\n                        processNode(node)\r\n                    } catch (exc: Exception) {\r\n                        processProcessingException(exc)\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n}\r\n\r\nfun main(args: Array&lt;String&gt;) {\r\n    val inputString = &quot;{\\&quot;key\\&quot;: \\&quot;v\\\\\\&quot;alue\\&quot;}&quot;\r\n    val byteArray = inputString.toByteArray()\r\n    val inputStream: InputStream = ByteArrayInputStream(byteArray)\r\n    JsonlStreamProcessor({ node -&gt;\r\n        println(&quot;Processing node:&quot;)\r\n        println(node)\r\n    }, { exc -&gt; }, { exc -&gt; }).processInput(\r\n        inputStream\r\n    )\r\n}\r\n\r\nOutput:\r\nProcessing node:\r\n{&quot;key&quot;:&quot;v\\&quot;alue&quot;}\r\n\r\n```\r\n","title":"Library/Example for conversion of prettyfied JSON records, to valid JSONL?","body":"<p>Is there an open-source code example/library that would convert</p>\n<p>Prettified JSON records like:</p>\n<pre><code>{\n  &quot;name&quot;: &quot;Gilbert&quot;, \n  &quot;wins&quot;: [\n    [\n      &quot;straight&quot;, \n      &quot;7♣&quot;\n    ], \n    [\n      &quot;one pair&quot;, \n      &quot;10♥&quot;\n    ]\n  ]\n}\n</code></pre>\n<p>To valid JSONL:</p>\n<pre><code>{&quot;name&quot;:&quot;Gilbert&quot;,&quot;wins&quot;:[[&quot;straight&quot;, &quot;7♣&quot;], [&quot;one pair&quot;, &quot;10♥&quot;]]}\n</code></pre>\n<p>Any language would be helpful to look at (java/kotlin would be ideal). I haven't been able to find it by searching around.</p>\n<p>Below is what I have thus far, but very much wondering whether I am missing some corner cases with quotes within values.</p>\n<pre><code>class JsonlStreamProcessor(\n    /**\n     * We are using JsonNode instead of ObjectNode as we can have valid JSONL\n     * of primitive values that would make ObjectNode fail. */\n    private val processNode: (JsonNode) -&gt; Unit,\n    private val processParseException: (Exception) -&gt; Unit,\n    private val processProcessingException: (Exception) -&gt; Unit\n) {\n    private val objectMapper = ObjectMapper()\n\n    /**\n     * Note: the stream that is given is not closed by this class. The responsibility\n     * of closing the input stream lies with the one who opened it.\n     * */\n    fun processInput(inputStream: InputStream = System.`in`) {\n        var buffer = StringBuilder()\n        var openBraces = 0\n        var inQuotes = false\n\n        while (true) {\n            val char = inputStream.read().takeIf { it != -1 }?.toChar() ?: break\n\n            // TODO: need to test this well.\n            if (char == '\\&quot;' &amp;&amp; (buffer.isEmpty() || buffer.last() != '\\\\' || buffer.endsWith(&quot;\\\\\\\\&quot;))) {\n                inQuotes = !inQuotes\n            }\n\n            if (!inQuotes) {\n                when (char) {\n                    '{' -&gt; openBraces++\n                    '}' -&gt; openBraces--\n                }\n            }\n\n            buffer.append(char)\n\n            // buffer.isNotEmpty() is cheaper than 'buffer.trim().isNotEmpty()'\n            // so we are using it as a first check to avoid calling 'trim()' unnecessarily.\n            if (openBraces == 0 &amp;&amp; buffer.isNotEmpty() &amp;&amp; buffer.trim().isNotEmpty()) {\n\n                var node: JsonNode? = null\n\n                try {\n                    node = objectMapper.readTree(buffer.toString())\n                } catch (exc: Exception) {\n                    processParseException(exc)\n                } finally {\n                    buffer = StringBuilder()\n                }\n\n                if (node != null) {\n                    try {\n                        processNode(node)\n                    } catch (exc: Exception) {\n                        processProcessingException(exc)\n                    }\n                }\n            }\n        }\n    }\n\n}\n\nfun main(args: Array&lt;String&gt;) {\n    val inputString = &quot;{\\&quot;key\\&quot;: \\&quot;v\\\\\\&quot;alue\\&quot;}&quot;\n    val byteArray = inputString.toByteArray()\n    val inputStream: InputStream = ByteArrayInputStream(byteArray)\n    JsonlStreamProcessor({ node -&gt;\n        println(&quot;Processing node:&quot;)\n        println(node)\n    }, { exc -&gt; }, { exc -&gt; }).processInput(\n        inputStream\n    )\n}\n\nOutput:\nProcessing node:\n{&quot;key&quot;:&quot;v\\&quot;alue&quot;}\n\n</code></pre>\n"},{"tags":["java","spring","rest"],"comments":[{"owner":{"account_id":1528364,"reputation":125594,"user_id":1426227,"accept_rate":79,"display_name":"cassiomolin"},"score":1,"creation_date":1564525901,"post_id":45200142,"comment_id":101057936,"body_markdown":"I&#39;ve put together some details on how to use `PATCH` in this [post](https://cassiomolin.com/using-http-patch-in-spring/). And the approach described in the post was used in this [example](https://github.com/cassiomolin/http-patch-spring) available on GitHub.","body":"I&#39;ve put together some details on how to use <code>PATCH</code> in this <a href=\"https://cassiomolin.com/using-http-patch-in-spring/\" rel=\"nofollow noreferrer\">post</a>. And the approach described in the post was used in this <a href=\"https://github.com/cassiomolin/http-patch-spring\" rel=\"nofollow noreferrer\">example</a> available on GitHub."}],"answers":[{"tags":[],"owner":{"account_id":6759653,"reputation":5203,"user_id":5207023,"accept_rate":100,"display_name":"Mykola Yashchenko"},"down_vote_count":2,"up_vote_count":3,"is_accepted":true,"score":1,"last_activity_date":1500496742,"creation_date":1500496169,"answer_id":45200430,"question_id":45200142,"body_markdown":"You can write custom update query which updates only particular fields:\r\n\r\n    @Override\r\n    public void saveManager(Manager manager) {  \r\n        Query query = sessionFactory.getCurrentSession().createQuery(&quot;update Manager set username = :username, password = :password where id = :id&quot;);\r\n        query.setParameter(&quot;username&quot;, manager.getUsername());\r\n        query.setParameter(&quot;password&quot;, manager.getPassword());\r\n        query.setParameter(&quot;id&quot;, manager.getId());\r\n        query.executeUpdate();\r\n    }","title":"Spring REST partial update with @PATCH method","body":"<p>You can write custom update query which updates only particular fields:</p>\n\n<pre><code>@Override\npublic void saveManager(Manager manager) {  \n    Query query = sessionFactory.getCurrentSession().createQuery(\"update Manager set username = :username, password = :password where id = :id\");\n    query.setParameter(\"username\", manager.getUsername());\n    query.setParameter(\"password\", manager.getPassword());\n    query.setParameter(\"id\", manager.getId());\n    query.executeUpdate();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1204576,"reputation":2855,"user_id":1174543,"accept_rate":80,"display_name":"Steve11235"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1500496628,"creation_date":1500496628,"answer_id":45200554,"question_id":45200142,"body_markdown":"First, you need to know if you are doing an insert or an update. Insert is straightforward. On update, use get() to retrieve the entity. Then update whatever fields. At the end of the transaction, Hibernate will flush the changes and commit.","title":"Spring REST partial update with @PATCH method","body":"<p>First, you need to know if you are doing an insert or an update. Insert is straightforward. On update, use get() to retrieve the entity. Then update whatever fields. At the end of the transaction, Hibernate will flush the changes and commit.</p>\n"},{"tags":[],"owner":{"account_id":477214,"reputation":5260,"user_id":888580,"display_name":"lane.maxwell"},"down_vote_count":2,"up_vote_count":48,"is_accepted":false,"score":46,"last_activity_date":1677263617,"creation_date":1500496962,"answer_id":45200650,"question_id":45200142,"body_markdown":"If you are truly using a PATCH, then you should use RequestMethod.PATCH, not RequestMethod.POST.\r\n\r\nYour patch mapping should contain the id with which you can retrieve the Manager object to be patched.  Also, it should only include the fields with which you want to change.  In your example you are sending the entire entity, so you can&#39;t discern the fields that are actually changing (does empty mean leave this field alone or actually change its value to empty).\r\n\r\nPerhaps an implementation as such is what you&#39;re after?\r\n\r\n```\r\n    @RequestMapping(value = &quot;/manager/{id}&quot;, method = RequestMethod.PATCH)\r\n    public @ResponseBody void saveManager(@PathVariable Long id, @RequestBody Map&lt;Object, Object&gt; fields) {\r\n        Manager manager = someServiceToLoadManager(id);\r\n        // Map key is field name, v is value\r\n        fields.forEach((k, v) -&gt; {\r\n           // use reflection to get field k on manager and set it to value v\r\n            Field field = ReflectionUtils.findField(Manager.class, k);\r\n            field.setAccessible(true);\r\n            ReflectionUtils.setField(field, manager, v);\r\n        });\r\n        managerService.saveManager(manager);\r\n    }\r\n```\r\n\r\n### Update \r\nI want to provide an update to this post as there is now a project that simplifies the patching process.\r\n\r\nThe artifact is\r\n\r\n```\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;com.github.java-json-tools&lt;/groupId&gt;\r\n      &lt;artifactId&gt;json-patch&lt;/artifactId&gt;\r\n      &lt;version&gt;1.13&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n```\r\n\r\nThe implementation to patch the Manager object in the OP would look like this:\r\n\r\n\r\n##### Controller\r\n```\r\n    @Operation(summary = &quot;Patch a Manager&quot;)\r\n    @PatchMapping(&quot;/{managerId}&quot;)\r\n    public Task patchManager(@PathVariable Long managerId, @RequestBody JsonPatch jsonPatch)\r\n        throws JsonPatchException, JsonProcessingException {\r\n        return managerService.patch(managerId, jsonPatch);\r\n    }\r\n```\r\n\r\n##### Service\r\n```\r\n    ...\r\n    @Autowired\r\n    private ObjectMapper objectMapper;\r\n    ...\r\n\r\n    public Manager patch(Long managerId, JsonPatch jsonPatch) throws JsonPatchException, JsonProcessingException {\r\n        Manager manager = managerRepository.findById(managerId).orElseThrow(EntityNotFoundException::new);\r\n        JsonNode patched = jsonPatch.apply(objectMapper.convertValue(manager, JsonNode.class));\r\n\r\n        return managerRepository.save(objectMapper.treeToValue(patched, Manager.class));\r\n    }\r\n```\r\n\r\nThe patch request follows the specifications in RFC 6092, so this is a true PATCH implementation.  Details can be found [here](https://jsonpatch.com/)","title":"Spring REST partial update with @PATCH method","body":"<p>If you are truly using a PATCH, then you should use RequestMethod.PATCH, not RequestMethod.POST.</p>\n<p>Your patch mapping should contain the id with which you can retrieve the Manager object to be patched.  Also, it should only include the fields with which you want to change.  In your example you are sending the entire entity, so you can't discern the fields that are actually changing (does empty mean leave this field alone or actually change its value to empty).</p>\n<p>Perhaps an implementation as such is what you're after?</p>\n<pre><code>    @RequestMapping(value = &quot;/manager/{id}&quot;, method = RequestMethod.PATCH)\n    public @ResponseBody void saveManager(@PathVariable Long id, @RequestBody Map&lt;Object, Object&gt; fields) {\n        Manager manager = someServiceToLoadManager(id);\n        // Map key is field name, v is value\n        fields.forEach((k, v) -&gt; {\n           // use reflection to get field k on manager and set it to value v\n            Field field = ReflectionUtils.findField(Manager.class, k);\n            field.setAccessible(true);\n            ReflectionUtils.setField(field, manager, v);\n        });\n        managerService.saveManager(manager);\n    }\n</code></pre>\n<h3>Update</h3>\n<p>I want to provide an update to this post as there is now a project that simplifies the patching process.</p>\n<p>The artifact is</p>\n<pre><code>    &lt;dependency&gt;\n      &lt;groupId&gt;com.github.java-json-tools&lt;/groupId&gt;\n      &lt;artifactId&gt;json-patch&lt;/artifactId&gt;\n      &lt;version&gt;1.13&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>The implementation to patch the Manager object in the OP would look like this:</p>\n<h5>Controller</h5>\n<pre><code>    @Operation(summary = &quot;Patch a Manager&quot;)\n    @PatchMapping(&quot;/{managerId}&quot;)\n    public Task patchManager(@PathVariable Long managerId, @RequestBody JsonPatch jsonPatch)\n        throws JsonPatchException, JsonProcessingException {\n        return managerService.patch(managerId, jsonPatch);\n    }\n</code></pre>\n<h5>Service</h5>\n<pre><code>    ...\n    @Autowired\n    private ObjectMapper objectMapper;\n    ...\n\n    public Manager patch(Long managerId, JsonPatch jsonPatch) throws JsonPatchException, JsonProcessingException {\n        Manager manager = managerRepository.findById(managerId).orElseThrow(EntityNotFoundException::new);\n        JsonNode patched = jsonPatch.apply(objectMapper.convertValue(manager, JsonNode.class));\n\n        return managerRepository.save(objectMapper.treeToValue(patched, Manager.class));\n    }\n</code></pre>\n<p>The patch request follows the specifications in RFC 6092, so this is a true PATCH implementation.  Details can be found <a href=\"https://jsonpatch.com/\" rel=\"nofollow noreferrer\">here</a></p>\n"},{"tags":[],"owner":{"account_id":2130509,"reputation":4369,"user_id":1891456,"display_name":"Yogesh Badke"},"down_vote_count":0,"up_vote_count":21,"is_accepted":false,"score":21,"last_activity_date":1539235079,"creation_date":1500528387,"answer_id":45205844,"question_id":45200142,"body_markdown":"With this, you can patch your changes\r\n\r\n    1. Autowire `ObjectMapper` in controller;\r\n    \r\n    2. @PatchMapping(&quot;/manager/{id}&quot;)\r\n        ResponseEntity&lt;?&gt; saveManager(@RequestBody Map&lt;String, String&gt; manager) {\r\n            Manager toBePatchedManager = objectMapper.convertValue(manager, Manager.class);\r\n            managerService.patch(toBePatchedManager);\r\n        }\r\n    \r\n    3. Create new method `patch` in `ManagerService`\r\n    \r\n    4. Autowire `NullAwareBeanUtilsBean` in `ManagerService`\r\n    \r\n    5. public void patch(Manager toBePatched) {\r\n    \t\tOptional&lt;Manager&gt; optionalManager = managerRepository.findOne(toBePatched.getId());\r\n    \t\tif (optionalManager.isPresent()) {\r\n    \t\t\tManager fromDb = optionalManager.get();\r\n    \t\t\t// bean utils will copy non null values from toBePatched to fromDb manager.\r\n    \t\t\tbeanUtils.copyProperties(fromDb, toBePatched);\r\n    \t\t\tupdateManager(fromDb);\r\n    \t\t}\r\n    \t}\r\n\r\nYou will have to extend `BeanUtilsBean` to implement copying of non null values behaviour.\r\n\r\n    public class NullAwareBeanUtilsBean extends BeanUtilsBean {\r\n    \r\n    \t@Override\r\n    \tpublic void copyProperty(Object dest, String name, Object value)\r\n    \t\t\tthrows IllegalAccessException, InvocationTargetException {\r\n    \t\tif (value == null)\r\n    \t\t\treturn;\r\n    \t\tsuper.copyProperty(dest, name, value);\r\n    \t}\r\n    }\r\n\r\nand finally, mark NullAwareBeanUtilsBean as `@Component`\r\n\r\nor \r\n\r\nregister `NullAwareBeanUtilsBean` as bean\r\n\r\n    @Bean\r\n    public NullAwareBeanUtilsBean nullAwareBeanUtilsBean() {\r\n    \treturn new NullAwareBeanUtilsBean();\r\n    }\r\n\r\n","title":"Spring REST partial update with @PATCH method","body":"<p>With this, you can patch your changes</p>\n\n<pre><code>1. Autowire `ObjectMapper` in controller;\n\n2. @PatchMapping(\"/manager/{id}\")\n    ResponseEntity&lt;?&gt; saveManager(@RequestBody Map&lt;String, String&gt; manager) {\n        Manager toBePatchedManager = objectMapper.convertValue(manager, Manager.class);\n        managerService.patch(toBePatchedManager);\n    }\n\n3. Create new method `patch` in `ManagerService`\n\n4. Autowire `NullAwareBeanUtilsBean` in `ManagerService`\n\n5. public void patch(Manager toBePatched) {\n        Optional&lt;Manager&gt; optionalManager = managerRepository.findOne(toBePatched.getId());\n        if (optionalManager.isPresent()) {\n            Manager fromDb = optionalManager.get();\n            // bean utils will copy non null values from toBePatched to fromDb manager.\n            beanUtils.copyProperties(fromDb, toBePatched);\n            updateManager(fromDb);\n        }\n    }\n</code></pre>\n\n<p>You will have to extend <code>BeanUtilsBean</code> to implement copying of non null values behaviour.</p>\n\n<pre><code>public class NullAwareBeanUtilsBean extends BeanUtilsBean {\n\n    @Override\n    public void copyProperty(Object dest, String name, Object value)\n            throws IllegalAccessException, InvocationTargetException {\n        if (value == null)\n            return;\n        super.copyProperty(dest, name, value);\n    }\n}\n</code></pre>\n\n<p>and finally, mark NullAwareBeanUtilsBean as <code>@Component</code></p>\n\n<p>or </p>\n\n<p>register <code>NullAwareBeanUtilsBean</code> as bean</p>\n\n<pre><code>@Bean\npublic NullAwareBeanUtilsBean nullAwareBeanUtilsBean() {\n    return new NullAwareBeanUtilsBean();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10661606,"reputation":41,"user_id":7849431,"display_name":"catie"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1628685789,"creation_date":1628685789,"answer_id":68742281,"question_id":45200142,"body_markdown":"`ObjectMapper.updateValue` provides all you need to partially map your entity with values from dto.\r\nAs an addition, you can use either of two here: `Map&lt;String, Object&gt; fields` or `String json`, so your service method may look like this:\r\n\r\n    \r\n    @Autowired\r\n    private ObjectMapper objectMapper;\r\n\r\n    @Override\r\n    @Transactional\r\n    public Foo save(long id, Map&lt;String, Object&gt; fields) throws JsonMappingException {\r\n        Foo foo = fooRepository.findById(id)\r\n        .orElseThrow(() -&gt; new ResourceNotFoundException(&quot;Foo not found for this id: &quot; + id));\r\n\r\n        return objectMapper.updateValue(foo , fields);\r\n    }\r\n\r\nAs a second solution and addition to Lane Maxwell&#39;s answer you could use `Reflection` to map only properties that exist in a Map of values that was sent, so your service method may look like this:\r\n\r\n    \r\n    @Override\r\n    @Transactional\r\n    public Foo save(long id, Map&lt;String, Object&gt; fields) {\r\n\r\n        Foo foo = fooRepository.findById(id)\r\n        .orElseThrow(() -&gt; new ResourceNotFoundException(&quot;Foo not found for this id: &quot; + id));\r\n\r\n        fields.keySet()\r\n                .forEach(k -&gt; {\r\n                    Method method = ReflectionUtils.findMethod(LocationProduct.class, &quot;set&quot; + StringUtils.capitalize(k));\r\n                    if (method != null) {\r\n                        ReflectionUtils.invokeMethod(method, foo, fields.get(k));\r\n                    }\r\n                });\r\n        return foo;\r\n    }\r\n\r\nSecond solution allows you to insert some additional business logic into mapping process, might be conversions or calculations ect. \r\n\r\nAlso unlike finding reflection field `Field field = ReflectionUtils.findField(Foo.class, k);` by name and than making it accessible, finding property&#39;s setter actually calls setter method that might contain additional logic to be executed and prevents from setting value to private properties.","title":"Spring REST partial update with @PATCH method","body":"<p><code>ObjectMapper.updateValue</code> provides all you need to partially map your entity with values from dto.\nAs an addition, you can use either of two here: <code>Map&lt;String, Object&gt; fields</code> or <code>String json</code>, so your service method may look like this:</p>\n<pre><code>@Autowired\nprivate ObjectMapper objectMapper;\n\n@Override\n@Transactional\npublic Foo save(long id, Map&lt;String, Object&gt; fields) throws JsonMappingException {\n    Foo foo = fooRepository.findById(id)\n    .orElseThrow(() -&gt; new ResourceNotFoundException(&quot;Foo not found for this id: &quot; + id));\n\n    return objectMapper.updateValue(foo , fields);\n}\n</code></pre>\n<p>As a second solution and addition to Lane Maxwell's answer you could use <code>Reflection</code> to map only properties that exist in a Map of values that was sent, so your service method may look like this:</p>\n<pre><code>@Override\n@Transactional\npublic Foo save(long id, Map&lt;String, Object&gt; fields) {\n\n    Foo foo = fooRepository.findById(id)\n    .orElseThrow(() -&gt; new ResourceNotFoundException(&quot;Foo not found for this id: &quot; + id));\n\n    fields.keySet()\n            .forEach(k -&gt; {\n                Method method = ReflectionUtils.findMethod(LocationProduct.class, &quot;set&quot; + StringUtils.capitalize(k));\n                if (method != null) {\n                    ReflectionUtils.invokeMethod(method, foo, fields.get(k));\n                }\n            });\n    return foo;\n}\n</code></pre>\n<p>Second solution allows you to insert some additional business logic into mapping process, might be conversions or calculations ect.</p>\n<p>Also unlike finding reflection field <code>Field field = ReflectionUtils.findField(Foo.class, k);</code> by name and than making it accessible, finding property's setter actually calls setter method that might contain additional logic to be executed and prevents from setting value to private properties.</p>\n"},{"tags":[],"owner":{"account_id":16655514,"reputation":126,"user_id":12037038,"display_name":"fullstack20148"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1680084691,"creation_date":1680084691,"answer_id":75875847,"question_id":45200142,"body_markdown":"You can use [Mapstruct][1] to achievie  this goal OOTB. Configuration `NullValuePropertyMappingStrategy.IGNORE` is the key.\r\n\r\nSee this example:\r\n\r\n    @Mapper(nullValuePropertyMappingStrategy = NullValuePropertyMappingStrategy.IGNORE)\r\n    public interface UpdateMapper {\r\n        void update(@MappingTarget MyClass target, MyClass source);\r\n    }\r\n\r\nAnd use it:\r\n    \r\n    UpdateMapper  mapper = new UpdateMapperImpl();    \r\n    mapper.update(target, source);\r\n    \r\n    repository.save(target);\r\n\r\nHere you can read [Baeldung][2] reference\r\n\r\n\r\n  [1]: https://mapstruct.org/\r\n  [2]: https://www.baeldung.com/spring-data-partial-update","title":"Spring REST partial update with @PATCH method","body":"<p>You can use <a href=\"https://mapstruct.org/\" rel=\"nofollow noreferrer\">Mapstruct</a> to achievie  this goal OOTB. Configuration <code>NullValuePropertyMappingStrategy.IGNORE</code> is the key.</p>\n<p>See this example:</p>\n<pre><code>@Mapper(nullValuePropertyMappingStrategy = NullValuePropertyMappingStrategy.IGNORE)\npublic interface UpdateMapper {\n    void update(@MappingTarget MyClass target, MyClass source);\n}\n</code></pre>\n<p>And use it:</p>\n<pre><code>UpdateMapper  mapper = new UpdateMapperImpl();    \nmapper.update(target, source);\n\nrepository.save(target);\n</code></pre>\n<p>Here you can read <a href=\"https://www.baeldung.com/spring-data-partial-update\" rel=\"nofollow noreferrer\">Baeldung</a> reference</p>\n"},{"tags":[],"owner":{"account_id":1658694,"reputation":1592,"user_id":1527469,"display_name":"awgtek"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1702057107,"creation_date":1701998244,"answer_id":77623838,"question_id":45200142,"body_markdown":"As was mentioned, you can use beanutils, which supports arrays/lists as well. Example code below. Adapt for the web, injecting properties, saving to DB, etc.\r\n\r\n    import org.apache.commons.beanutils.PropertyUtils;\r\n    \r\n    import java.util.ArrayList;\r\n    import java.util.Collection;\r\n    import java.util.HashMap;\r\n    import java.util.List;\r\n    import java.util.Map;\r\n    import java.util.Objects;\r\n    \r\n    public class PatchProcessor {\r\n        private final PatchProperties patchProperties;\r\n    \r\n        public PatchProcessor() {\r\n            this.patchProperties = new PatchProperties();\r\n        }\r\n    \r\n        public void patch(Object sourceObject, Object targetObject) throws Exception {\r\n    \r\n            for (String allowedField : patchProperties.fieldsAllowed) {\r\n                processFieldUpdate(sourceObject, targetObject, allowedField, &quot;&quot;);\r\n            }\r\n        }\r\n    \r\n        private void processFieldUpdate(Object sourceObject, Object targetObject, String subField, String parentField) throws Exception {\r\n    \r\n            String targetObjectKey = subField.contains(&quot;.&quot;)? subField.substring(0, subField.indexOf(&#39;.&#39;)) : subField;\r\n            String fullField = (&quot;&quot;.equals(parentField)? &quot;&quot; : parentField + &quot;.&quot;) + targetObjectKey;\r\n            Object sourceSubObject = PropertyUtils.getProperty(sourceObject, targetObjectKey);\r\n            if (sourceSubObject instanceof Collection) {\r\n                String lookupKey = patchProperties.listLookupField.get(fullField);\r\n                boolean hasListId = patchProperties.listLookupField.containsKey(fullField);\r\n                List sourceList = (List) sourceSubObject;\r\n                List targetList = (List) PropertyUtils.getProperty(targetObject, targetObjectKey);\r\n                if (null == sourceList) {\r\n                    //ignore null\r\n                } else {\r\n                    if (null == targetList) {\r\n                        targetList = sourceList.getClass().newInstance();\r\n                        PropertyUtils.setProperty(targetObject, targetObjectKey, targetList);\r\n                    }\r\n                    int index = 0;\r\n                    for (Object sourceListObject : sourceList) {\r\n                        Object targetListObject = null;\r\n                        if (hasListId) {\r\n                            targetListObject = findTargetListObject(sourceListObject, targetList, lookupKey);\r\n                        } else {\r\n                            targetListObject = targetList.size() &gt;= index + 1? targetList.get(index) : null;\r\n                            index++;\r\n                        }\r\n                        String listObjectSubField = subField.substring(subField.indexOf(&#39;.&#39;) + 1);\r\n                        if (null == targetListObject) {\r\n                            targetListObject = sourceListObject.getClass().newInstance();\r\n                            if (hasListId) {\r\n                                Object sourceKeyValue = PropertyUtils.getProperty(sourceListObject, lookupKey);\r\n                                PropertyUtils.setProperty(targetListObject, lookupKey, sourceKeyValue);\r\n                            }\r\n                            targetList.add(targetListObject);\r\n                        }\r\n                        processFieldUpdate(sourceListObject, targetListObject, listObjectSubField, targetObjectKey);\r\n                    }\r\n                }\r\n            } else {\r\n                Object targetSubObject = PropertyUtils.getProperty(targetObject, targetObjectKey);\r\n                if (null == sourceSubObject) {\r\n                    //ignore null\r\n                } else if (null != targetSubObject) {\r\n                    if (subField.contains(&quot;.&quot;)) {\r\n                        String objectSubField = subField.substring(subField.indexOf(&#39;.&#39;) + 1);\r\n                        processFieldUpdate(sourceSubObject, targetSubObject, objectSubField, targetObjectKey);\r\n                    } else {\r\n                        Object rightValue = PropertyUtils.getProperty(sourceObject, subField);\r\n                        if (rightValue != null) {\r\n                            PropertyUtils.setProperty(targetObject, subField, rightValue);\r\n                        } else {\r\n                            //ignore null\r\n                        }\r\n                    }\r\n                } else {\r\n                    if (subField.contains(&quot;.&quot;)) {\r\n                        Object emptyObject = sourceSubObject.getClass().newInstance();\r\n                        PropertyUtils.setProperty(targetObject, targetObjectKey, emptyObject);\r\n                        String objectSubField = subField.substring(subField.indexOf(&#39;.&#39;) + 1);\r\n                        processFieldUpdate(sourceSubObject, emptyObject, objectSubField, targetObjectKey);\r\n                    } else {\r\n                        Object rightValue = PropertyUtils.getProperty(sourceObject, subField);\r\n                        if (rightValue != null) {\r\n                            PropertyUtils.setProperty(targetObject, subField, rightValue);\r\n                        } else {\r\n                            //ignore null\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    \r\n        private Object findTargetListObject(Object sourceListObject, List targetList, String lookupKey) throws Exception {\r\n            Object sourceKeyValue = PropertyUtils.getProperty(sourceListObject, lookupKey);\r\n            return targetList.stream().filter(obj -&gt; {\r\n                try {\r\n                    Object targetKeyValue = PropertyUtils.getProperty(obj, lookupKey);\r\n                    return Objects.equals(sourceKeyValue, targetKeyValue);\r\n                } catch (Exception e) {\r\n                    throw new RuntimeException(e);\r\n                }\r\n            }).findFirst().orElse(null);\r\n        }\r\n    \r\n        private class PatchProperties {\r\n            List&lt;String&gt; fieldsAllowed = new ArrayList&lt;&gt;();\r\n            Map&lt;String, String&gt; listLookupField = new HashMap&lt;&gt;();\r\n            PatchProperties() {\r\n                fieldsAllowed.add(&quot;name&quot;);\r\n                fieldsAllowed.add(&quot;phoneNumber&quot;);\r\n                fieldsAllowed.add(&quot;jobs.location&quot;);\r\n                fieldsAllowed.add(&quot;jobs.emailAddresses.privateUse&quot;);\r\n                fieldsAllowed.add(&quot;websites.dateAdded&quot;);\r\n                fieldsAllowed.add(&quot;websites.url&quot;);\r\n    \r\n                listLookupField.put(&quot;jobs&quot;, &quot;subId&quot;);\r\n                listLookupField.put(&quot;jobs.emailAddresses&quot;, &quot;emailId&quot;);\r\n            }\r\n        }\r\n    }\r\n\r\nThen the unit test:\r\n\r\n    import com.example.demo.dto.Job;\r\n    import com.example.demo.dto.Person;\r\n    import org.junit.jupiter.api.Test;\r\n    \r\n    import java.util.ArrayList;\r\n    import java.util.Arrays;\r\n    import java.util.UUID;\r\n    \r\n    import static org.junit.jupiter.api.Assertions.*;\r\n    \r\n    class PatchProcessorTest {\r\n    \r\n        @Test\r\n        void patch() throws Exception {\r\n            UUID matchJobId = UUID.randomUUID();\r\n            Person person = new Person();\r\n            person.setTitle(&quot;original title&quot;);\r\n            person.setName(&quot;Joe&quot;);\r\n            person.setJobs(new ArrayList&lt;&gt;());\r\n            person.getJobs().add(new Job(UUID.randomUUID(), &quot;location 1&quot;, &quot;job title 1&quot;, null));\r\n            person.getJobs().add(new Job(matchJobId, &quot;location 2&quot;, &quot;job title 2&quot;, null));\r\n    \r\n            Person update = new Person();\r\n            update.setName(&quot;Joseph&quot;);\r\n            update.setTitle(&quot;new title&quot;);\r\n            update.setJobs(new ArrayList&lt;&gt;(Arrays.asList(new Job(matchJobId, &quot;new location 2&quot;, &quot;new job title 2&quot;, null),\r\n                    new Job(UUID.randomUUID(), &quot;new location 3&quot;, &quot;job title 3&quot;, null))));\r\n    \r\n            PatchProcessor processor = new PatchProcessor();\r\n    \r\n            processor.patch(update, person);\r\n    \r\n            assertEquals(&quot;Joseph&quot;, person.getName());\r\n            assertNotEquals(&quot;new title&quot;, person.getTitle());\r\n            assertTrue(person.getJobs().size() == 3);\r\n            assertEquals(&quot;new location 2&quot;, person.getJobs().get(1).getLocation());\r\n        }\r\n    }\r\n\r\nDTOs are left out, but can be inferred. Also, the utility has not been tested with more than 2 levels of lists, support for that is left as an exercise.\r\n\r\n\r\n","title":"Spring REST partial update with @PATCH method","body":"<p>As was mentioned, you can use beanutils, which supports arrays/lists as well. Example code below. Adapt for the web, injecting properties, saving to DB, etc.</p>\n<pre><code>import org.apache.commons.beanutils.PropertyUtils;\n\nimport java.util.ArrayList;\nimport java.util.Collection;\nimport java.util.HashMap;\nimport java.util.List;\nimport java.util.Map;\nimport java.util.Objects;\n\npublic class PatchProcessor {\n    private final PatchProperties patchProperties;\n\n    public PatchProcessor() {\n        this.patchProperties = new PatchProperties();\n    }\n\n    public void patch(Object sourceObject, Object targetObject) throws Exception {\n\n        for (String allowedField : patchProperties.fieldsAllowed) {\n            processFieldUpdate(sourceObject, targetObject, allowedField, &quot;&quot;);\n        }\n    }\n\n    private void processFieldUpdate(Object sourceObject, Object targetObject, String subField, String parentField) throws Exception {\n\n        String targetObjectKey = subField.contains(&quot;.&quot;)? subField.substring(0, subField.indexOf('.')) : subField;\n        String fullField = (&quot;&quot;.equals(parentField)? &quot;&quot; : parentField + &quot;.&quot;) + targetObjectKey;\n        Object sourceSubObject = PropertyUtils.getProperty(sourceObject, targetObjectKey);\n        if (sourceSubObject instanceof Collection) {\n            String lookupKey = patchProperties.listLookupField.get(fullField);\n            boolean hasListId = patchProperties.listLookupField.containsKey(fullField);\n            List sourceList = (List) sourceSubObject;\n            List targetList = (List) PropertyUtils.getProperty(targetObject, targetObjectKey);\n            if (null == sourceList) {\n                //ignore null\n            } else {\n                if (null == targetList) {\n                    targetList = sourceList.getClass().newInstance();\n                    PropertyUtils.setProperty(targetObject, targetObjectKey, targetList);\n                }\n                int index = 0;\n                for (Object sourceListObject : sourceList) {\n                    Object targetListObject = null;\n                    if (hasListId) {\n                        targetListObject = findTargetListObject(sourceListObject, targetList, lookupKey);\n                    } else {\n                        targetListObject = targetList.size() &gt;= index + 1? targetList.get(index) : null;\n                        index++;\n                    }\n                    String listObjectSubField = subField.substring(subField.indexOf('.') + 1);\n                    if (null == targetListObject) {\n                        targetListObject = sourceListObject.getClass().newInstance();\n                        if (hasListId) {\n                            Object sourceKeyValue = PropertyUtils.getProperty(sourceListObject, lookupKey);\n                            PropertyUtils.setProperty(targetListObject, lookupKey, sourceKeyValue);\n                        }\n                        targetList.add(targetListObject);\n                    }\n                    processFieldUpdate(sourceListObject, targetListObject, listObjectSubField, targetObjectKey);\n                }\n            }\n        } else {\n            Object targetSubObject = PropertyUtils.getProperty(targetObject, targetObjectKey);\n            if (null == sourceSubObject) {\n                //ignore null\n            } else if (null != targetSubObject) {\n                if (subField.contains(&quot;.&quot;)) {\n                    String objectSubField = subField.substring(subField.indexOf('.') + 1);\n                    processFieldUpdate(sourceSubObject, targetSubObject, objectSubField, targetObjectKey);\n                } else {\n                    Object rightValue = PropertyUtils.getProperty(sourceObject, subField);\n                    if (rightValue != null) {\n                        PropertyUtils.setProperty(targetObject, subField, rightValue);\n                    } else {\n                        //ignore null\n                    }\n                }\n            } else {\n                if (subField.contains(&quot;.&quot;)) {\n                    Object emptyObject = sourceSubObject.getClass().newInstance();\n                    PropertyUtils.setProperty(targetObject, targetObjectKey, emptyObject);\n                    String objectSubField = subField.substring(subField.indexOf('.') + 1);\n                    processFieldUpdate(sourceSubObject, emptyObject, objectSubField, targetObjectKey);\n                } else {\n                    Object rightValue = PropertyUtils.getProperty(sourceObject, subField);\n                    if (rightValue != null) {\n                        PropertyUtils.setProperty(targetObject, subField, rightValue);\n                    } else {\n                        //ignore null\n                    }\n                }\n            }\n        }\n    }\n\n    private Object findTargetListObject(Object sourceListObject, List targetList, String lookupKey) throws Exception {\n        Object sourceKeyValue = PropertyUtils.getProperty(sourceListObject, lookupKey);\n        return targetList.stream().filter(obj -&gt; {\n            try {\n                Object targetKeyValue = PropertyUtils.getProperty(obj, lookupKey);\n                return Objects.equals(sourceKeyValue, targetKeyValue);\n            } catch (Exception e) {\n                throw new RuntimeException(e);\n            }\n        }).findFirst().orElse(null);\n    }\n\n    private class PatchProperties {\n        List&lt;String&gt; fieldsAllowed = new ArrayList&lt;&gt;();\n        Map&lt;String, String&gt; listLookupField = new HashMap&lt;&gt;();\n        PatchProperties() {\n            fieldsAllowed.add(&quot;name&quot;);\n            fieldsAllowed.add(&quot;phoneNumber&quot;);\n            fieldsAllowed.add(&quot;jobs.location&quot;);\n            fieldsAllowed.add(&quot;jobs.emailAddresses.privateUse&quot;);\n            fieldsAllowed.add(&quot;websites.dateAdded&quot;);\n            fieldsAllowed.add(&quot;websites.url&quot;);\n\n            listLookupField.put(&quot;jobs&quot;, &quot;subId&quot;);\n            listLookupField.put(&quot;jobs.emailAddresses&quot;, &quot;emailId&quot;);\n        }\n    }\n}\n</code></pre>\n<p>Then the unit test:</p>\n<pre><code>import com.example.demo.dto.Job;\nimport com.example.demo.dto.Person;\nimport org.junit.jupiter.api.Test;\n\nimport java.util.ArrayList;\nimport java.util.Arrays;\nimport java.util.UUID;\n\nimport static org.junit.jupiter.api.Assertions.*;\n\nclass PatchProcessorTest {\n\n    @Test\n    void patch() throws Exception {\n        UUID matchJobId = UUID.randomUUID();\n        Person person = new Person();\n        person.setTitle(&quot;original title&quot;);\n        person.setName(&quot;Joe&quot;);\n        person.setJobs(new ArrayList&lt;&gt;());\n        person.getJobs().add(new Job(UUID.randomUUID(), &quot;location 1&quot;, &quot;job title 1&quot;, null));\n        person.getJobs().add(new Job(matchJobId, &quot;location 2&quot;, &quot;job title 2&quot;, null));\n\n        Person update = new Person();\n        update.setName(&quot;Joseph&quot;);\n        update.setTitle(&quot;new title&quot;);\n        update.setJobs(new ArrayList&lt;&gt;(Arrays.asList(new Job(matchJobId, &quot;new location 2&quot;, &quot;new job title 2&quot;, null),\n                new Job(UUID.randomUUID(), &quot;new location 3&quot;, &quot;job title 3&quot;, null))));\n\n        PatchProcessor processor = new PatchProcessor();\n\n        processor.patch(update, person);\n\n        assertEquals(&quot;Joseph&quot;, person.getName());\n        assertNotEquals(&quot;new title&quot;, person.getTitle());\n        assertTrue(person.getJobs().size() == 3);\n        assertEquals(&quot;new location 2&quot;, person.getJobs().get(1).getLocation());\n    }\n}\n</code></pre>\n<p>DTOs are left out, but can be inferred. Also, the utility has not been tested with more than 2 levels of lists, support for that is left as an exercise.</p>\n"}],"owner":{"account_id":4745800,"reputation":637,"user_id":3837208,"accept_rate":53,"display_name":"wilson"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":49875,"favorite_count":0,"down_vote_count":0,"up_vote_count":19,"accepted_answer_id":45200430,"answer_count":7,"score":19,"last_activity_date":1702057107,"creation_date":1500495015,"question_id":45200142,"body_markdown":"I&#39;m trying to implement a partial update of the Manager entity based in the following:\r\n\r\nEntity\r\n\r\n    public class Manager {\r\n        private int id;\r\n        private String firstname;\r\n        private String lastname;\r\n        private String username;\r\n        private String password;\r\n        \r\n        // getters and setters omitted\r\n    }\r\n\r\n\r\nSaveManager method in Controller\r\n\r\n\r\n    @RequestMapping(value = &quot;/save&quot;, method = RequestMethod.PATCH)\r\n\tpublic @ResponseBody void saveManager(@RequestBody Manager manager){\r\n\t\tmanagerService.saveManager(manager);\r\n\t}\r\n\r\nSave object manager in Dao impl.\r\n\r\n    @Override\r\n\tpublic void saveManager(Manager manager) {  \r\n        sessionFactory.getCurrentSession().saveOrUpdate(manager);\r\n\t}\r\n\r\nWhen I save the object the username and password has changed correctly but the others values are empty.\r\n\r\nSo what I need to do is update the username and password and keep all the remaining data.","title":"Spring REST partial update with @PATCH method","body":"<p>I'm trying to implement a partial update of the Manager entity based in the following:</p>\n\n<p>Entity</p>\n\n<pre><code>public class Manager {\n    private int id;\n    private String firstname;\n    private String lastname;\n    private String username;\n    private String password;\n\n    // getters and setters omitted\n}\n</code></pre>\n\n<p>SaveManager method in Controller</p>\n\n<pre><code>@RequestMapping(value = \"/save\", method = RequestMethod.PATCH)\npublic @ResponseBody void saveManager(@RequestBody Manager manager){\n    managerService.saveManager(manager);\n}\n</code></pre>\n\n<p>Save object manager in Dao impl.</p>\n\n<pre><code>@Override\npublic void saveManager(Manager manager) {  \n    sessionFactory.getCurrentSession().saveOrUpdate(manager);\n}\n</code></pre>\n\n<p>When I save the object the username and password has changed correctly but the others values are empty.</p>\n\n<p>So what I need to do is update the username and password and keep all the remaining data.</p>\n"},{"tags":["java","spring-boot","karate","java-11","spring-boot-test"],"answers":[{"tags":[],"owner":{"account_id":48302,"reputation":55353,"user_id":143475,"display_name":"Peter Thomas"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1702057082,"creation_date":1702057082,"answer_id":77628303,"question_id":77628164,"body_markdown":"This should answer your question: https://github.com/karatelabs/karate/tree/v1.3.0/karate-mock-servlet#switching-the-http-client\r\n\r\n&gt; You can completely customize the HTTP client used by Karate by implementing the [HttpClient](https://github.com/karatelabs/karate/blob/v1.3.0/karate-core/src/main/java/com/intuit/karate/http/HttpClient.java) interface which happens to be very simple.\r\n\r\n&gt; If you need to create a completely new HttpClient implementation from scratch, the [MockHttpClient](https://github.com/karatelabs/karate/blob/v1.3.0/karate-mock-servlet/src/main/java/com/intuit/karate/mock/servlet/MockHttpClient.java) is a good reference. There are many possibilities here, you can add support for other HTTP clients besides Apache and Jersey, or mock a stack that is not based on Java servlets.\r\n\r\n&gt; Karate defaults to the [ApacheHttpClient](https://github.com/karatelabs/karate/blob/v1.3.0/karate-core/src/main/java/com/intuit/karate/http/ApacheHttpClient.java), and to change this for a test-run, you can set the [HttpClientFactory](https://github.com/karatelabs/karate/blob/v1.3.0/karate-core/src/main/java/com/intuit/karate/http/HttpClientFactory.java) using the [Runner](https://github.com/karatelabs/karate/blob/v1.3.0/karate-core/src/main/java/com/intuit/karate/Runner.java) &quot;builder&quot; API.\r\n\r\nThis bit of documentation was lost when the `karate-mock-servlet` was deprecated in 1.4.0, but hopefully now this post on stack-overflow can be the reference that people need. That said, I think you may be expecting something &quot;plug and play&quot; but no, there will be some work involved to write an adapter. Teams never need to do this though, the whole point of testing using an HTTP client is to simulate how end-users can consume your API.","title":"how to configure karate to use FeignClient or RestTemplate in place of ApacheHttpClient","body":"<p>This should answer your question: <a href=\"https://github.com/karatelabs/karate/tree/v1.3.0/karate-mock-servlet#switching-the-http-client\" rel=\"nofollow noreferrer\">https://github.com/karatelabs/karate/tree/v1.3.0/karate-mock-servlet#switching-the-http-client</a></p>\n<blockquote>\n<p>You can completely customize the HTTP client used by Karate by implementing the <a href=\"https://github.com/karatelabs/karate/blob/v1.3.0/karate-core/src/main/java/com/intuit/karate/http/HttpClient.java\" rel=\"nofollow noreferrer\">HttpClient</a> interface which happens to be very simple.</p>\n</blockquote>\n<blockquote>\n<p>If you need to create a completely new HttpClient implementation from scratch, the <a href=\"https://github.com/karatelabs/karate/blob/v1.3.0/karate-mock-servlet/src/main/java/com/intuit/karate/mock/servlet/MockHttpClient.java\" rel=\"nofollow noreferrer\">MockHttpClient</a> is a good reference. There are many possibilities here, you can add support for other HTTP clients besides Apache and Jersey, or mock a stack that is not based on Java servlets.</p>\n</blockquote>\n<blockquote>\n<p>Karate defaults to the <a href=\"https://github.com/karatelabs/karate/blob/v1.3.0/karate-core/src/main/java/com/intuit/karate/http/ApacheHttpClient.java\" rel=\"nofollow noreferrer\">ApacheHttpClient</a>, and to change this for a test-run, you can set the <a href=\"https://github.com/karatelabs/karate/blob/v1.3.0/karate-core/src/main/java/com/intuit/karate/http/HttpClientFactory.java\" rel=\"nofollow noreferrer\">HttpClientFactory</a> using the <a href=\"https://github.com/karatelabs/karate/blob/v1.3.0/karate-core/src/main/java/com/intuit/karate/Runner.java\" rel=\"nofollow noreferrer\">Runner</a> &quot;builder&quot; API.</p>\n</blockquote>\n<p>This bit of documentation was lost when the <code>karate-mock-servlet</code> was deprecated in 1.4.0, but hopefully now this post on stack-overflow can be the reference that people need. That said, I think you may be expecting something &quot;plug and play&quot; but no, there will be some work involved to write an adapter. Teams never need to do this though, the whole point of testing using an HTTP client is to simulate how end-users can consume your API.</p>\n"}],"owner":{"account_id":144338,"reputation":43,"user_id":353305,"display_name":"user353305"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77628303,"answer_count":1,"score":1,"last_activity_date":1702057082,"creation_date":1702055218,"question_id":77628164,"body_markdown":"versions: \r\nKarate 1.3.1, \r\nmaven 3.8, \r\nJava 11\r\n\r\nBelow is how i&#39;m invoking karate test\r\n\r\n```\r\n@SpringBootTest\r\n@ActiveProfiles(value = &quot;${spring.profiles.active:dev}&quot;)\r\npublic class ControllerIntegrationTest {\r\n\r\n    @Value(&quot;${service-ui-rest.url}&quot;)\r\n    private String serviceUiRestUrl;\r\n\r\n\r\n    @Karate.Test\r\n    Karate testThis(){\r\n        System.setProperty(&quot;file.encoding&quot;, &quot;UTF-8&quot;);\r\n        return Karate\r\n                .run(&quot;classpath:feature&quot;)\r\n                .systemProperty(&quot;service-ui-rest.url&quot;,serviceUiRestUrl)\r\n                .systemProperty(&quot;test.type&quot;,&quot;integration&quot;);\r\n    }\r\n}\r\n```\r\n\r\nWhile debugging, I discover when the following logic get call HttpClientFactory returns ApacheHttpClient::new\r\n\r\nhttps://github.com/karatelabs/karate/blob/628428c5f94772a40ae6f330f806388e6dfb0118/karate-core/src/main/java/com/intuit/karate/core/ScenarioEngine.java#L1238\r\n\r\n\r\nhttps://github.com/karatelabs/karate/blob/628428c5f94772a40ae6f330f806388e6dfb0118/karate-core/src/main/java/com/intuit/karate/http/HttpClientFactory.java#L33\r\n\r\n\r\nand wonder how to configure karate to use the bean for: FeignClient or RestTemplate that I have\r\n\r\ni found something similar at : https://github.com/gtnicol/karate-okhttp-signpost/blob/master/src/main/resources/karate-http.properties , but its using karate 0.9.1 \r\n\r\nany pointers will be highly appreciated \r\n \r\n","title":"how to configure karate to use FeignClient or RestTemplate in place of ApacheHttpClient","body":"<p>versions:\nKarate 1.3.1,\nmaven 3.8,\nJava 11</p>\n<p>Below is how i'm invoking karate test</p>\n<pre><code>@SpringBootTest\n@ActiveProfiles(value = &quot;${spring.profiles.active:dev}&quot;)\npublic class ControllerIntegrationTest {\n\n    @Value(&quot;${service-ui-rest.url}&quot;)\n    private String serviceUiRestUrl;\n\n\n    @Karate.Test\n    Karate testThis(){\n        System.setProperty(&quot;file.encoding&quot;, &quot;UTF-8&quot;);\n        return Karate\n                .run(&quot;classpath:feature&quot;)\n                .systemProperty(&quot;service-ui-rest.url&quot;,serviceUiRestUrl)\n                .systemProperty(&quot;test.type&quot;,&quot;integration&quot;);\n    }\n}\n</code></pre>\n<p>While debugging, I discover when the following logic get call HttpClientFactory returns ApacheHttpClient::new</p>\n<p><a href=\"https://github.com/karatelabs/karate/blob/628428c5f94772a40ae6f330f806388e6dfb0118/karate-core/src/main/java/com/intuit/karate/core/ScenarioEngine.java#L1238\" rel=\"nofollow noreferrer\">https://github.com/karatelabs/karate/blob/628428c5f94772a40ae6f330f806388e6dfb0118/karate-core/src/main/java/com/intuit/karate/core/ScenarioEngine.java#L1238</a></p>\n<p><a href=\"https://github.com/karatelabs/karate/blob/628428c5f94772a40ae6f330f806388e6dfb0118/karate-core/src/main/java/com/intuit/karate/http/HttpClientFactory.java#L33\" rel=\"nofollow noreferrer\">https://github.com/karatelabs/karate/blob/628428c5f94772a40ae6f330f806388e6dfb0118/karate-core/src/main/java/com/intuit/karate/http/HttpClientFactory.java#L33</a></p>\n<p>and wonder how to configure karate to use the bean for: FeignClient or RestTemplate that I have</p>\n<p>i found something similar at : <a href=\"https://github.com/gtnicol/karate-okhttp-signpost/blob/master/src/main/resources/karate-http.properties\" rel=\"nofollow noreferrer\">https://github.com/gtnicol/karate-okhttp-signpost/blob/master/src/main/resources/karate-http.properties</a> , but its using karate 0.9.1</p>\n<p>any pointers will be highly appreciated</p>\n"},{"tags":["java","javafx"],"comments":[{"owner":{"account_id":2360785,"reputation":11123,"user_id":2067492,"display_name":"matt"},"score":0,"creation_date":1702053565,"post_id":77622343,"comment_id":136854318,"body_markdown":"&quot; When I try to run the built jar file, it displays the above error. I have already added the maven plugin&quot; you cannot really do that with javafx. They have a somewhat special way of starting the application. Have you checked out the javafx plugin? https://github.com/openjfx/javafx-maven-plugin it works nice for creating small jlinked jvms","body":"&quot; When I try to run the built jar file, it displays the above error. I have already added the maven plugin&quot; you cannot really do that with javafx. They have a somewhat special way of starting the application. Have you checked out the javafx plugin? <a href=\"https://github.com/openjfx/javafx-maven-plugin\" rel=\"nofollow noreferrer\">github.com/openjfx/javafx-maven-plugin</a> it works nice for creating small jlinked jvms"}],"answers":[{"tags":[],"owner":{"account_id":58650,"reputation":3399,"user_id":175554,"accept_rate":40,"display_name":"ozkanpakdil"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1702057068,"creation_date":1702051590,"answer_id":77627849,"question_id":77622343,"body_markdown":"I achieve running the jar with shade plugin.\r\n```xml\r\n&lt;plugin&gt;\r\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n    &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;\r\n    &lt;version&gt;3.5.1&lt;/version&gt;\r\n    &lt;configuration&gt;\r\n        &lt;transformers&gt;\r\n            &lt;transformer implementation=&quot;org.apache.maven.plugins.shade.resource.ManifestResourceTransformer&quot;&gt;\r\n                &lt;mainClass&gt;com.mascix.swaggerific.SwaggerApplication&lt;/mainClass&gt;\r\n            &lt;/transformer&gt;\r\n        &lt;/transformers&gt;\r\n    &lt;/configuration&gt;\r\n    &lt;executions&gt;\r\n        &lt;execution&gt;\r\n            &lt;phase&gt;package&lt;/phase&gt;\r\n            &lt;goals&gt;\r\n                &lt;goal&gt;shade&lt;/goal&gt;\r\n            &lt;/goals&gt;\r\n        &lt;/execution&gt;\r\n    &lt;/executions&gt;\r\n&lt;/plugin&gt;\r\n```\r\nAfter this plugin, run **mvn package** which will generate the full jar with everything. But this will not be enough for javafx because it requires javafx sdk. so when I run the command(**java -jar target/swaggerific-1.0-SNAPSHOT.jar**) I got \r\n&gt; Error: JavaFX runtime components are missing, and are required to run this application\r\n \r\nI have sdkman installed gluon java version.\r\n&gt; java --module-path $PATH_TO_FX --add-modules &quot;javafx.controls,javafx.graphics,javafx.fxml&quot; -jar target/swaggerific-1.0-SNAPSHOT.jar\r\n\r\nand the env variable is\r\n```shell\r\necho $PATH_TO_FX\r\n/home/oz-mint/tools/javafx-sdk-21.0.1/lib\r\n```\r\nI highly suggest compile with gluon graalvm and run native binary. That will be easier to use. You can find example code and project [here](https://github.com/ozkanpakdil/swaggerific/blob/main/pom.xml#L272) used for this answer.\r\n\r\n[bash jar run example video](https://github.com/ozkanpakdil/swaggerific/assets/604405/786f315c-8c68-40a6-8ba2-5dd12fb9c7ed)\r\n","title":"Maven Projects Made With Java FX Unable To Locate The Main Class","body":"<p>I achieve running the jar with shade plugin.</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;plugin&gt;\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n    &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;\n    &lt;version&gt;3.5.1&lt;/version&gt;\n    &lt;configuration&gt;\n        &lt;transformers&gt;\n            &lt;transformer implementation=&quot;org.apache.maven.plugins.shade.resource.ManifestResourceTransformer&quot;&gt;\n                &lt;mainClass&gt;com.mascix.swaggerific.SwaggerApplication&lt;/mainClass&gt;\n            &lt;/transformer&gt;\n        &lt;/transformers&gt;\n    &lt;/configuration&gt;\n    &lt;executions&gt;\n        &lt;execution&gt;\n            &lt;phase&gt;package&lt;/phase&gt;\n            &lt;goals&gt;\n                &lt;goal&gt;shade&lt;/goal&gt;\n            &lt;/goals&gt;\n        &lt;/execution&gt;\n    &lt;/executions&gt;\n&lt;/plugin&gt;\n</code></pre>\n<p>After this plugin, run <strong>mvn package</strong> which will generate the full jar with everything. But this will not be enough for javafx because it requires javafx sdk. so when I run the command(<strong>java -jar target/swaggerific-1.0-SNAPSHOT.jar</strong>) I got</p>\n<blockquote>\n<p>Error: JavaFX runtime components are missing, and are required to run this application</p>\n</blockquote>\n<p>I have sdkman installed gluon java version.</p>\n<blockquote>\n<p>java --module-path $PATH_TO_FX --add-modules &quot;javafx.controls,javafx.graphics,javafx.fxml&quot; -jar target/swaggerific-1.0-SNAPSHOT.jar</p>\n</blockquote>\n<p>and the env variable is</p>\n<pre class=\"lang-bash prettyprint-override\"><code>echo $PATH_TO_FX\n/home/oz-mint/tools/javafx-sdk-21.0.1/lib\n</code></pre>\n<p>I highly suggest compile with gluon graalvm and run native binary. That will be easier to use. You can find example code and project <a href=\"https://github.com/ozkanpakdil/swaggerific/blob/main/pom.xml#L272\" rel=\"nofollow noreferrer\">here</a> used for this answer.</p>\n<p><a href=\"https://github.com/ozkanpakdil/swaggerific/assets/604405/786f315c-8c68-40a6-8ba2-5dd12fb9c7ed\" rel=\"nofollow noreferrer\">bash jar run example video</a></p>\n"}],"owner":{"account_id":30092221,"reputation":1,"user_id":23061425,"display_name":"Thinking Spaghetti29"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1702068868,"answer_count":1,"score":0,"last_activity_date":1702057068,"creation_date":1701973800,"question_id":77622343,"body_markdown":"```\r\nError: Could not find or load main class com.mycompany.mavenproject1.App\r\nCaused by: java.lang.NoClassDefFoundError: javafx/application/Application\r\n```\r\n\r\nI am trying to compile a maven project made with javafx to a jar file. When I try to run the built jar file, it displays the above error. I have already added the maven plugin \r\n\r\n\r\n```xml\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;3.1.0&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;archive&gt;\r\n                        &lt;manifest&gt;\r\n                            &lt;mainClass&gt;com.packages.to.MainClass&lt;/mainClass&gt;\r\n                        &lt;/manifest&gt;\r\n                    &lt;/archive&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n```\r\nI am using NetBeans IDE. The project precisely is an FXML JavaFX maven archetype Gluon project with maven. I suppose it doesn&#39;t use the JavaFX that one has manually added since it doesn&#39;t allow addition of libraries. It most probably has to do with javafx. \r\n\r\n\r\nI&#39;ve tried adding the path to javafx.fxml and javafx controls to the vm options/ arguments but in vain. The issue persisted. I&#39;ve tried building jars from maven projects that don&#39;t use javafx and they function perfectly (by just adding that plugin). ","title":"Maven Projects Made With Java FX Unable To Locate The Main Class","body":"<pre><code>Error: Could not find or load main class com.mycompany.mavenproject1.App\nCaused by: java.lang.NoClassDefFoundError: javafx/application/Application\n</code></pre>\n<p>I am trying to compile a maven project made with javafx to a jar file. When I try to run the built jar file, it displays the above error. I have already added the maven plugin</p>\n<pre class=\"lang-xml prettyprint-override\"><code>            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.1.0&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;archive&gt;\n                        &lt;manifest&gt;\n                            &lt;mainClass&gt;com.packages.to.MainClass&lt;/mainClass&gt;\n                        &lt;/manifest&gt;\n                    &lt;/archive&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n</code></pre>\n<p>I am using NetBeans IDE. The project precisely is an FXML JavaFX maven archetype Gluon project with maven. I suppose it doesn't use the JavaFX that one has manually added since it doesn't allow addition of libraries. It most probably has to do with javafx.</p>\n<p>I've tried adding the path to javafx.fxml and javafx controls to the vm options/ arguments but in vain. The issue persisted. I've tried building jars from maven projects that don't use javafx and they function perfectly (by just adding that plugin).</p>\n"},{"tags":["java","excel","apache-poi","pivot-table","pivot-chart"],"comments":[{"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"score":0,"creation_date":1702105458,"post_id":77628300,"comment_id":136858862,"body_markdown":"Run your code. Unzip the `BarChart.xlsx`. Have a look into `/xl/charts/chart1.xml`. Store the XML somewhere to have it later for comparison. Open `BarChart.xlsx` in Excel GUI and apply the chart design. Save `BarChart.xlsx`. Unzip the `BarChart.xlsx`. Have a look into `/xl/charts/chart1.xml` and compare with the previous stored XML. What has been changed? Was it only one single setting? What is your conclusion?","body":"Run your code. Unzip the <code>BarChart.xlsx</code>. Have a look into <code>&#47;xl&#47;charts&#47;chart1.xml</code>. Store the XML somewhere to have it later for comparison. Open <code>BarChart.xlsx</code> in Excel GUI and apply the chart design. Save <code>BarChart.xlsx</code>. Unzip the <code>BarChart.xlsx</code>. Have a look into <code>&#47;xl&#47;charts&#47;chart1.xml</code> and compare with the previous stored XML. What has been changed? Was it only one single setting? What is your conclusion?"}],"owner":{"account_id":11616907,"reputation":29,"user_id":8509309,"display_name":"pranavs"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":23,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1702057060,"creation_date":1702057060,"question_id":77628300,"body_markdown":"I am looking for a way to use apache poi to add existing default styles to a bar chart in Excel.\r\nI have code to generate bar chart but could not find anything to set existing styles which are available in Chart Design --&gt; Styles\r\n\r\nBelow is the current bar chart \r\n[![enter image description here][1]][1]\r\n\r\nExpected outcome \r\n[![enter image description here][2]][2]\r\n\r\nBelow is the sample code I am running.\r\n\r\n```\r\nimport java.awt.Desktop;\r\nimport java.io.File;\r\nimport java.io.FileOutputStream;\r\n\r\nimport org.apache.poi.ss.usermodel.Cell;\r\nimport org.apache.poi.ss.usermodel.ClientAnchor;\r\nimport org.apache.poi.ss.usermodel.Row;\r\nimport org.apache.poi.ss.usermodel.Sheet;\r\nimport org.apache.poi.ss.usermodel.Workbook;\r\nimport org.apache.poi.xssf.usermodel.XSSFChart;\r\nimport org.apache.poi.xssf.usermodel.XSSFDrawing;\r\nimport org.apache.poi.xssf.usermodel.XSSFWorkbook;\r\nimport org.openxmlformats.schemas.drawingml.x2006.chart.*;\r\n\r\npublic class BarChart {\r\n\r\n    public static void main(String[] args) throws Exception {\r\n        Workbook wb = new XSSFWorkbook();\r\n        Sheet sheet = wb.createSheet(&quot;Sheet1&quot;);\r\n\r\n        Row row;\r\n        Cell cell;\r\n\r\n        row = sheet.createRow(0);\r\n        row.createCell(0);\r\n        row.createCell(1).setCellValue(&quot;HEADER 1&quot;);\r\n        row.createCell(2).setCellValue(&quot;HEADER 2&quot;);\r\n        row.createCell(3).setCellValue(&quot;HEADER 3&quot;);\r\n\r\n        for (int r = 1; r &lt; 5; r++) {\r\n            row = sheet.createRow(r);\r\n            cell = row.createCell(0);\r\n            cell.setCellValue(&quot;Serie &quot; + r);\r\n            cell = row.createCell(1);\r\n            cell.setCellValue(new java.util.Random().nextDouble());\r\n            cell = row.createCell(2);\r\n            cell.setCellValue(new java.util.Random().nextDouble());\r\n            cell = row.createCell(3);\r\n            cell.setCellValue(new java.util.Random().nextDouble());\r\n        }\r\n\r\n        XSSFDrawing drawing = (XSSFDrawing)sheet.createDrawingPatriarch();\r\n        ClientAnchor anchor = drawing.createAnchor(0, 0, 0, 0, 0, 5, 8, 20);\r\n\r\n        XSSFChart chart = drawing.createChart(anchor);\r\n\r\n        CTChart ctChart = ((XSSFChart)chart).getCTChart();\r\n        CTPlotArea ctPlotArea = ctChart.getPlotArea();\r\n        CTBarChart ctBarChart = ctPlotArea.addNewBarChart();\r\n        CTBoolean ctBoolean = ctBarChart.addNewVaryColors();\r\n        ctBoolean.setVal(true);\r\n        ctBarChart.addNewBarDir().setVal(STBarDir.BAR);\r\n\r\n        for (int r = 2; r &lt; 6; r++) {\r\n           CTBarSer ctBarSer = ctBarChart.addNewSer();\r\n           CTSerTx ctSerTx = ctBarSer.addNewTx();\r\n           CTStrRef ctStrRef = ctSerTx.addNewStrRef();\r\n           ctStrRef.setF(&quot;Sheet1!$A$&quot; + r);\r\n           ctBarSer.addNewIdx().setVal(r-2);  \r\n           CTAxDataSource cttAxDataSource = ctBarSer.addNewCat();\r\n           ctStrRef = cttAxDataSource.addNewStrRef();\r\n           ctStrRef.setF(&quot;Sheet1!$B$1:$D$1&quot;); \r\n           CTNumDataSource ctNumDataSource = ctBarSer.addNewVal();\r\n           CTNumRef ctNumRef = ctNumDataSource.addNewNumRef();\r\n           ctNumRef.setF(&quot;Sheet1!$B$&quot; + r + &quot;:$D$&quot; + r);\r\n\r\n           //at least the border lines in Libreoffice Calc ;-)\r\n           ctBarSer.addNewSpPr().addNewLn().addNewSolidFill().addNewSrgbClr().setVal(new byte[] {0,0,0});   \r\n\r\n        } \r\n\r\n        //telling the BarChart that it has axes and giving them Ids\r\n        ctBarChart.addNewAxId().setVal(123456);\r\n        ctBarChart.addNewAxId().setVal(123457);\r\n\r\n        //cat axis\r\n        CTCatAx ctCatAx = ctPlotArea.addNewCatAx(); \r\n        ctCatAx.addNewAxId().setVal(123456); //id of the cat axis\r\n        CTScaling ctScaling = ctCatAx.addNewScaling();\r\n        ctScaling.addNewOrientation().setVal(STOrientation.MIN_MAX);\r\n        ctCatAx.addNewDelete().setVal(false);\r\n        ctCatAx.addNewAxPos().setVal(STAxPos.B);\r\n        ctCatAx.addNewCrossAx().setVal(123457); //id of the val axis\r\n        ctCatAx.addNewTickLblPos().setVal(STTickLblPos.NEXT_TO);\r\n\r\n        //val axis\r\n        CTValAx ctValAx = ctPlotArea.addNewValAx(); \r\n        ctValAx.addNewAxId().setVal(123457); //id of the val axis\r\n        ctScaling = ctValAx.addNewScaling();\r\n        ctScaling.addNewOrientation().setVal(STOrientation.MIN_MAX);\r\n        ctValAx.addNewDelete().setVal(false);\r\n        ctValAx.addNewAxPos().setVal(STAxPos.L);\r\n        ctValAx.addNewCrossAx().setVal(123456); //id of the cat axis\r\n        ctValAx.addNewTickLblPos().setVal(STTickLblPos.NEXT_TO);\r\n\r\n        //legend\r\n        CTLegend ctLegend = ctChart.addNewLegend();\r\n        ctLegend.addNewLegendPos().setVal(STLegendPos.B);\r\n        ctLegend.addNewOverlay().setVal(false);\r\n\r\nSystem.out.println(ctChart);\r\n\r\n        FileOutputStream fileOut = new FileOutputStream(&quot;BarChart.xlsx&quot;);\r\n        wb.write(fileOut);\r\n        fileOut.close();\r\n        Desktop.getDesktop().open(new File(&quot;BarChart.xlsx&quot;));\r\n    }\r\n}\r\n```\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/DpE8t.png\r\n  [2]: https://i.stack.imgur.com/xluoi.png","title":"How to set existing bar chart styles to pivot chart in java","body":"<p>I am looking for a way to use apache poi to add existing default styles to a bar chart in Excel.\nI have code to generate bar chart but could not find anything to set existing styles which are available in Chart Design --&gt; Styles</p>\n<p>Below is the current bar chart\n<a href=\"https://i.stack.imgur.com/DpE8t.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/DpE8t.png\" alt=\"enter image description here\" /></a></p>\n<p>Expected outcome\n<a href=\"https://i.stack.imgur.com/xluoi.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xluoi.png\" alt=\"enter image description here\" /></a></p>\n<p>Below is the sample code I am running.</p>\n<pre><code>import java.awt.Desktop;\nimport java.io.File;\nimport java.io.FileOutputStream;\n\nimport org.apache.poi.ss.usermodel.Cell;\nimport org.apache.poi.ss.usermodel.ClientAnchor;\nimport org.apache.poi.ss.usermodel.Row;\nimport org.apache.poi.ss.usermodel.Sheet;\nimport org.apache.poi.ss.usermodel.Workbook;\nimport org.apache.poi.xssf.usermodel.XSSFChart;\nimport org.apache.poi.xssf.usermodel.XSSFDrawing;\nimport org.apache.poi.xssf.usermodel.XSSFWorkbook;\nimport org.openxmlformats.schemas.drawingml.x2006.chart.*;\n\npublic class BarChart {\n\n    public static void main(String[] args) throws Exception {\n        Workbook wb = new XSSFWorkbook();\n        Sheet sheet = wb.createSheet(&quot;Sheet1&quot;);\n\n        Row row;\n        Cell cell;\n\n        row = sheet.createRow(0);\n        row.createCell(0);\n        row.createCell(1).setCellValue(&quot;HEADER 1&quot;);\n        row.createCell(2).setCellValue(&quot;HEADER 2&quot;);\n        row.createCell(3).setCellValue(&quot;HEADER 3&quot;);\n\n        for (int r = 1; r &lt; 5; r++) {\n            row = sheet.createRow(r);\n            cell = row.createCell(0);\n            cell.setCellValue(&quot;Serie &quot; + r);\n            cell = row.createCell(1);\n            cell.setCellValue(new java.util.Random().nextDouble());\n            cell = row.createCell(2);\n            cell.setCellValue(new java.util.Random().nextDouble());\n            cell = row.createCell(3);\n            cell.setCellValue(new java.util.Random().nextDouble());\n        }\n\n        XSSFDrawing drawing = (XSSFDrawing)sheet.createDrawingPatriarch();\n        ClientAnchor anchor = drawing.createAnchor(0, 0, 0, 0, 0, 5, 8, 20);\n\n        XSSFChart chart = drawing.createChart(anchor);\n\n        CTChart ctChart = ((XSSFChart)chart).getCTChart();\n        CTPlotArea ctPlotArea = ctChart.getPlotArea();\n        CTBarChart ctBarChart = ctPlotArea.addNewBarChart();\n        CTBoolean ctBoolean = ctBarChart.addNewVaryColors();\n        ctBoolean.setVal(true);\n        ctBarChart.addNewBarDir().setVal(STBarDir.BAR);\n\n        for (int r = 2; r &lt; 6; r++) {\n           CTBarSer ctBarSer = ctBarChart.addNewSer();\n           CTSerTx ctSerTx = ctBarSer.addNewTx();\n           CTStrRef ctStrRef = ctSerTx.addNewStrRef();\n           ctStrRef.setF(&quot;Sheet1!$A$&quot; + r);\n           ctBarSer.addNewIdx().setVal(r-2);  \n           CTAxDataSource cttAxDataSource = ctBarSer.addNewCat();\n           ctStrRef = cttAxDataSource.addNewStrRef();\n           ctStrRef.setF(&quot;Sheet1!$B$1:$D$1&quot;); \n           CTNumDataSource ctNumDataSource = ctBarSer.addNewVal();\n           CTNumRef ctNumRef = ctNumDataSource.addNewNumRef();\n           ctNumRef.setF(&quot;Sheet1!$B$&quot; + r + &quot;:$D$&quot; + r);\n\n           //at least the border lines in Libreoffice Calc ;-)\n           ctBarSer.addNewSpPr().addNewLn().addNewSolidFill().addNewSrgbClr().setVal(new byte[] {0,0,0});   \n\n        } \n\n        //telling the BarChart that it has axes and giving them Ids\n        ctBarChart.addNewAxId().setVal(123456);\n        ctBarChart.addNewAxId().setVal(123457);\n\n        //cat axis\n        CTCatAx ctCatAx = ctPlotArea.addNewCatAx(); \n        ctCatAx.addNewAxId().setVal(123456); //id of the cat axis\n        CTScaling ctScaling = ctCatAx.addNewScaling();\n        ctScaling.addNewOrientation().setVal(STOrientation.MIN_MAX);\n        ctCatAx.addNewDelete().setVal(false);\n        ctCatAx.addNewAxPos().setVal(STAxPos.B);\n        ctCatAx.addNewCrossAx().setVal(123457); //id of the val axis\n        ctCatAx.addNewTickLblPos().setVal(STTickLblPos.NEXT_TO);\n\n        //val axis\n        CTValAx ctValAx = ctPlotArea.addNewValAx(); \n        ctValAx.addNewAxId().setVal(123457); //id of the val axis\n        ctScaling = ctValAx.addNewScaling();\n        ctScaling.addNewOrientation().setVal(STOrientation.MIN_MAX);\n        ctValAx.addNewDelete().setVal(false);\n        ctValAx.addNewAxPos().setVal(STAxPos.L);\n        ctValAx.addNewCrossAx().setVal(123456); //id of the cat axis\n        ctValAx.addNewTickLblPos().setVal(STTickLblPos.NEXT_TO);\n\n        //legend\n        CTLegend ctLegend = ctChart.addNewLegend();\n        ctLegend.addNewLegendPos().setVal(STLegendPos.B);\n        ctLegend.addNewOverlay().setVal(false);\n\nSystem.out.println(ctChart);\n\n        FileOutputStream fileOut = new FileOutputStream(&quot;BarChart.xlsx&quot;);\n        wb.write(fileOut);\n        fileOut.close();\n        Desktop.getDesktop().open(new File(&quot;BarChart.xlsx&quot;));\n    }\n}\n</code></pre>\n"},{"tags":["java","string"],"comments":[{"owner":{"account_id":1085259,"reputation":78304,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":2,"creation_date":1490666569,"post_id":43059279,"comment_id":73203179,"body_markdown":"I&#39;m not familiar with StringUtils.truncate, but in principle, what you&#39;re doing looks fine to me.  Don&#39;t forget to deal with the cases where (1) the original String is shorter than 15 characters, and (2) the first 15 characters are all non-space.","body":"I&#39;m not familiar with StringUtils.truncate, but in principle, what you&#39;re doing looks fine to me.  Don&#39;t forget to deal with the cases where (1) the original String is shorter than 15 characters, and (2) the first 15 characters are all non-space."},{"owner":{"account_id":7612423,"reputation":82476,"user_id":5772882,"display_name":"Anonymous"},"score":4,"creation_date":1490668358,"post_id":43059279,"comment_id":73203665,"body_markdown":"I could be missing something, but I see no point in using a third party library for this when we have `str.substring(0, firstIndexOfSpaceBeforeGIvenIndex)`. Or maybe your `StringUtils` take some of the conditions mentioned by @DavidWallace into account??","body":"I could be missing something, but I see no point in using a third party library for this when we have <code>str.substring(0, firstIndexOfSpaceBeforeGIvenIndex)</code>. Or maybe your <code>StringUtils</code> take some of the conditions mentioned by @DavidWallace into account??"},{"owner":{"account_id":370994,"reputation":35154,"user_id":719263,"accept_rate":100,"display_name":"Jean-Baptiste Yun&#232;s"},"score":1,"creation_date":1490680193,"post_id":43059279,"comment_id":73207180,"body_markdown":"Performance is your concern but did make experiment? Are you sure that is not good for thousands? Is it thousands or millions? billions? I doubt any more effort will be necessary for thousands of strings. Never make premature optimization.","body":"Performance is your concern but did make experiment? Are you sure that is not good for thousands? Is it thousands or millions? billions? I doubt any more effort will be necessary for thousands of strings. Never make premature optimization."},{"owner":{"account_id":3211603,"reputation":289287,"user_id":2711488,"display_name":"Holger"},"score":0,"creation_date":1490691265,"post_id":43059279,"comment_id":73213621,"body_markdown":"@Ole V.V.: no it doesn’t. The possibility that the string is shorter than `15` can’t be handled by `StringUtils.truncate`, as that method doesn’t see that number and it will handle `-1` the same way, `String.substring` does (by thowing an exception).","body":"@Ole V.V.: no it doesn’t. The possibility that the string is shorter than <code>15</code> can’t be handled by <code>StringUtils.truncate</code>, as that method doesn’t see that number and it will handle <code>-1</code> the same way, <code>String.substring</code> does (by thowing an exception)."},{"owner":{"account_id":7612423,"reputation":82476,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1490692036,"post_id":43059279,"comment_id":73214138,"body_markdown":"You may use `str.lastIndexOf(&#39; &#39;, 15)` (with a char argument rather than a `String`).","body":"You may use <code>str.lastIndexOf(&#39; &#39;, 15)</code> (with a char argument rather than a <code>String</code>)."},{"owner":{"account_id":1804273,"reputation":309,"user_id":1641760,"accept_rate":0,"display_name":"Pavan_k_k"},"score":0,"creation_date":1490815970,"post_id":43059279,"comment_id":73286838,"body_markdown":"Comment by @OleV.V. did the job. Thank you all!","body":"Comment by @OleV.V. did the job. Thank you all!"}],"answers":[{"tags":[],"owner":{"account_id":10312640,"reputation":29929,"user_id":7607923,"accept_rate":83,"display_name":"holi-java"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1490716576,"creation_date":1490667434,"answer_id":43059536,"question_id":43059279,"body_markdown":"## Usage\r\n    \r\n    truncate(&quot;SO is great website&quot;,15); //&quot;SO is great&quot;\r\n    truncate(&quot;SO is great website&quot;,11); //&quot;SO is great&quot;\r\n    truncate(&quot;SO is great website&quot;,1); //&quot;&quot;\r\n   \r\n\r\n## Code \r\n\r\n    private String truncate(String s, int limit) {\r\n        int n = s.length();\r\n        int last = Math.min(n, limit);\r\n     \r\n        if (last &lt; n) {\r\n            //scroll to start index of the last word\r\n            while (last &gt; 0 &amp;&amp; !Character.isWhitespace(s.charAt(last))) last--;\r\n        }\r\n        \r\n        //strip last whitespaces\r\n        while (last &gt; 0 &amp;&amp; Character.isWhitespace(s.charAt(--last))) ;\r\n\r\n        return last == 0 ? &quot;&quot; : s.substring(0, last + 1);\r\n    }\r\n\r\n## Test\r\n\r\n    public class StringTruncateTest {\r\n        @Test\r\n        void empty() throws Throwable {\r\n            assertThat(truncate(&quot;&quot;, 0), equalTo(&quot;&quot;));\r\n        }\r\n    \r\n        @Test\r\n        void limitGreaterThanLength() {\r\n            assertThat(truncate(&quot;&quot;, 1), equalTo(&quot;&quot;));\r\n        }\r\n    \r\n        @Test\r\n        void dropsLastWhitespaces() throws Throwable {\r\n            assertThat(truncate(&quot;foo &quot;, 4), equalTo(&quot;foo&quot;));\r\n        }\r\n    \r\n        @Test\r\n        void donotLimitToWordLastPos() throws Throwable {\r\n            assertThat(truncate(&quot;foo&quot;, 1), equalTo(&quot;&quot;));\r\n        }\r\n    \r\n        @Test\r\n        void donotLimitToWordLastPosButHavingAnyWordsBefore() throws Throwable {\r\n            assertThat(truncate(&quot;java website&quot;, &quot;java web&quot;), equalTo(&quot;java&quot;));\r\n        }\r\n    \r\n        @Test\r\n        void limitToLastThatNotContainingAnyWhitespaces() throws Throwable {\r\n            assertThat(truncate(&quot;foo&quot;, 3), equalTo(&quot;foo&quot;));\r\n        }\r\n    \r\n        @Test\r\n        void limitToLastThatContainingAnyWhitespaces() {\r\n            assertThat(truncate(&quot;java website tutorial&quot;, &quot;java website&quot;), equalTo(&quot;java website&quot;));\r\n        }\r\n    \r\n        @Test\r\n        void limitToEnd() throws Throwable {\r\n            assertThat(truncate(&quot;java website&quot;, &quot;java website&quot;), equalTo(&quot;java website&quot;));\r\n        }\r\n    \r\n        private String truncate(String input, String sub) {\r\n            return truncate(input, sub.length());\r\n        }\r\n    \r\n        private String truncate(String s, int limit) {\r\n            int n = s.length();\r\n            int last = Math.min(n, limit);\r\n    \r\n            //scroll to start index of the last word\r\n            if (last &lt; n) while (last &gt; 0 &amp;&amp; !Character.isWhitespace(s.charAt(last))) last--;\r\n    \r\n            //strip last whitespaces\r\n            while (last &gt; 0 &amp;&amp; Character.isWhitespace(s.charAt(--last))) ;\r\n    \r\n            return last == 0 ? &quot;&quot; : s.substring(0, last + 1);\r\n        }    \r\n    \r\n    }\r\n","title":"What is most optimal way to truncate a string to limit its length?","body":"<h2>Usage</h2>\n\n<pre><code>truncate(\"SO is great website\",15); //\"SO is great\"\ntruncate(\"SO is great website\",11); //\"SO is great\"\ntruncate(\"SO is great website\",1); //\"\"\n</code></pre>\n\n<h2>Code</h2>\n\n<pre><code>private String truncate(String s, int limit) {\n    int n = s.length();\n    int last = Math.min(n, limit);\n\n    if (last &lt; n) {\n        //scroll to start index of the last word\n        while (last &gt; 0 &amp;&amp; !Character.isWhitespace(s.charAt(last))) last--;\n    }\n\n    //strip last whitespaces\n    while (last &gt; 0 &amp;&amp; Character.isWhitespace(s.charAt(--last))) ;\n\n    return last == 0 ? \"\" : s.substring(0, last + 1);\n}\n</code></pre>\n\n<h2>Test</h2>\n\n<pre><code>public class StringTruncateTest {\n    @Test\n    void empty() throws Throwable {\n        assertThat(truncate(\"\", 0), equalTo(\"\"));\n    }\n\n    @Test\n    void limitGreaterThanLength() {\n        assertThat(truncate(\"\", 1), equalTo(\"\"));\n    }\n\n    @Test\n    void dropsLastWhitespaces() throws Throwable {\n        assertThat(truncate(\"foo \", 4), equalTo(\"foo\"));\n    }\n\n    @Test\n    void donotLimitToWordLastPos() throws Throwable {\n        assertThat(truncate(\"foo\", 1), equalTo(\"\"));\n    }\n\n    @Test\n    void donotLimitToWordLastPosButHavingAnyWordsBefore() throws Throwable {\n        assertThat(truncate(\"java website\", \"java web\"), equalTo(\"java\"));\n    }\n\n    @Test\n    void limitToLastThatNotContainingAnyWhitespaces() throws Throwable {\n        assertThat(truncate(\"foo\", 3), equalTo(\"foo\"));\n    }\n\n    @Test\n    void limitToLastThatContainingAnyWhitespaces() {\n        assertThat(truncate(\"java website tutorial\", \"java website\"), equalTo(\"java website\"));\n    }\n\n    @Test\n    void limitToEnd() throws Throwable {\n        assertThat(truncate(\"java website\", \"java website\"), equalTo(\"java website\"));\n    }\n\n    private String truncate(String input, String sub) {\n        return truncate(input, sub.length());\n    }\n\n    private String truncate(String s, int limit) {\n        int n = s.length();\n        int last = Math.min(n, limit);\n\n        //scroll to start index of the last word\n        if (last &lt; n) while (last &gt; 0 &amp;&amp; !Character.isWhitespace(s.charAt(last))) last--;\n\n        //strip last whitespaces\n        while (last &gt; 0 &amp;&amp; Character.isWhitespace(s.charAt(--last))) ;\n\n        return last == 0 ? \"\" : s.substring(0, last + 1);\n    }    \n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":545654,"reputation":7998,"user_id":1360984,"accept_rate":60,"display_name":"Harmlezz"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1490691604,"creation_date":1490679627,"answer_id":43061407,"question_id":43059279,"body_markdown":"Here a utility method which addresses your requirements and takes the comments of @David Wallace and @Ole V.V. into account as well:\r\n\r\n    public static String truncate(String str, int length, String delim) {\r\n        int len = Math.max(0, length);\r\n        if (str.length() &lt;= len) return str;\r\n        else {\r\n            int idx = str.lastIndexOf(delim, len);\r\n            return str.substring(0, idx != -1 ? idx : len);\r\n        }\r\n    }\r\n\r\n- it should be efficient because it performs the least expansive operations first.\r\n- it addresses the case when `delim` is not found in the first `length` characters.\r\n- it is flexible according the *length* and *delimiter*.","title":"What is most optimal way to truncate a string to limit its length?","body":"<p>Here a utility method which addresses your requirements and takes the comments of @David Wallace and @Ole V.V. into account as well:</p>\n\n<pre><code>public static String truncate(String str, int length, String delim) {\n    int len = Math.max(0, length);\n    if (str.length() &lt;= len) return str;\n    else {\n        int idx = str.lastIndexOf(delim, len);\n        return str.substring(0, idx != -1 ? idx : len);\n    }\n}\n</code></pre>\n\n<ul>\n<li>it should be efficient because it performs the least expansive operations first.</li>\n<li>it addresses the case when <code>delim</code> is not found in the first <code>length</code> characters.</li>\n<li>it is flexible according the <em>length</em> and <em>delimiter</em>.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":1917319,"reputation":418,"user_id":1729649,"display_name":"Sukh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1702056872,"creation_date":1702056872,"answer_id":77628282,"question_id":43059279,"body_markdown":"The best and easiest way is to use org.apache.commons.lang3.StringUtils.truncate() method. \r\n\r\nIt also gives you good performance.","title":"What is most optimal way to truncate a string to limit its length?","body":"<p>The best and easiest way is to use org.apache.commons.lang3.StringUtils.truncate() method.</p>\n<p>It also gives you good performance.</p>\n"}],"owner":{"account_id":1804273,"reputation":309,"user_id":1641760,"accept_rate":0,"display_name":"Pavan_k_k"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5049,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"answer_count":3,"score":-1,"last_activity_date":1702056872,"creation_date":1490665656,"question_id":43059279,"body_markdown":"I am writing a function to limit the length of a sentence. Say limit is 15, and the sentence is &quot;SO is great website&quot;. I don&#39;t want to truncate it exactly at the 15th position, otherwise the truncated sentence would become &quot;SO is great web&quot;. But, what I want to do is to truncate from the first space before the limit. It would give me &quot;SO is great&quot;. \n\nOne way of doing it is \n\n&gt; int firstIndexOfSpaceBeforeGIvenIndex= str.lastIndexOf(&quot; &quot;, 15);\n&gt;\n&gt; str = StringUtils.truncate(str, 0, firstIndexOfSpaceBeforeGIvenIndex);\n\nThe string could be very long and I have to perform this operation on thousands of strings. So performance is my concern. What is the most optimal way to achieve this task?\n","title":"What is most optimal way to truncate a string to limit its length?","body":"<p>I am writing a function to limit the length of a sentence. Say limit is 15, and the sentence is &quot;SO is great website&quot;. I don't want to truncate it exactly at the 15th position, otherwise the truncated sentence would become &quot;SO is great web&quot;. But, what I want to do is to truncate from the first space before the limit. It would give me &quot;SO is great&quot;.</p>\n<p>One way of doing it is</p>\n<blockquote>\n<p>int firstIndexOfSpaceBeforeGIvenIndex= str.lastIndexOf(&quot; &quot;, 15);</p>\n<p>str = StringUtils.truncate(str, 0, firstIndexOfSpaceBeforeGIvenIndex);</p>\n</blockquote>\n<p>The string could be very long and I have to perform this operation on thousands of strings. So performance is my concern. What is the most optimal way to achieve this task?</p>\n"},{"tags":["java","java-8"],"comments":[{"owner":{"account_id":9460871,"reputation":2143,"user_id":7034621,"display_name":"orhtej2"},"score":2,"creation_date":1702054367,"post_id":77628051,"comment_id":136854429,"body_markdown":"What problem are you facing? How does output of your code differ from expected? Have you read [What is a debugger and how can it help me diagnose problems?](https://stackoverflow.com/questions/25385173/what-is-a-debugger-and-how-can-it-help-me-diagnose-problems)","body":"What problem are you facing? How does output of your code differ from expected? Have you read <a href=\"https://stackoverflow.com/questions/25385173/what-is-a-debugger-and-how-can-it-help-me-diagnose-problems\">What is a debugger and how can it help me diagnose problems?</a>"},{"owner":{"account_id":3211603,"reputation":289287,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1702055102,"post_id":77628051,"comment_id":136854523,"body_markdown":"There’s rarely a need to deal with `Iterator` manually. Since Java&#160;5, you can write `for(Map.Entry&lt;String, ArrayList&lt;Trade&gt;&gt; entry: myListMap.entrySet()) { … }` Since Java&#160;10, you can simplify it further to `for(var entry: myListMap.entrySet()) { … }`. There’s also no need to repeat type parameters when creating an object (since Java&#160;7): `Map&lt;String, ArrayList&lt;Trade&gt;&gt; myListMap = new HashMap&lt;&gt;();` You may also rethink your strategy of reading four unused properties into local variables, followed by calling other `get…` methods repeatedly in the subsequent code.","body":"There’s rarely a need to deal with <code>Iterator</code> manually. Since Java 5, you can write <code>for(Map.Entry&lt;String, ArrayList&lt;Trade&gt;&gt; entry: myListMap.entrySet()) { … }</code> Since Java 10, you can simplify it further to <code>for(var entry: myListMap.entrySet()) { … }</code>. There’s also no need to repeat type parameters when creating an object (since Java 7): <code>Map&lt;String, ArrayList&lt;Trade&gt;&gt; myListMap = new HashMap&lt;&gt;();</code> You may also rethink your strategy of reading four unused properties into local variables, followed by calling other <code>get…</code> methods repeatedly in the subsequent code."},{"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"score":0,"creation_date":1702055453,"post_id":77628051,"comment_id":136854573,"body_markdown":"Please provide your Trade class, properly formatted.","body":"Please provide your Trade class, properly formatted."},{"owner":{"account_id":9378,"reputation":14558,"user_id":17300,"display_name":"Stephen P"},"score":0,"creation_date":1702062389,"post_id":77628051,"comment_id":136855542,"body_markdown":"Following up Holger&#39;s comment on better practices — The fact that you&#39;re using an `ArrayList` is not important, what _is_ important is that it&#39;s a `List` - so similar to &quot;Map... = new HashMap...&quot; you can change `Map&lt;String, ArrayList&lt;Trade&gt;&gt; myListMap = new HashMap&lt;&gt;();` to `Map&lt;String, List&lt;Trade&gt;&gt; myList = new HashMap&lt;&gt;()&#39;` ... Similarly in your for-loop you can use `List&lt;Trade&gt; myObjectList = myListMap.get(...)`","body":"Following up Holger&#39;s comment on better practices — The fact that you&#39;re using an <code>ArrayList</code> is not important, what <i>is</i> important is that it&#39;s a <code>List</code> - so similar to &quot;Map... = new HashMap...&quot; you can change <code>Map&lt;String, ArrayList&lt;Trade&gt;&gt; myListMap = new HashMap&lt;&gt;();</code> to <code>Map&lt;String, List&lt;Trade&gt;&gt; myList = new HashMap&lt;&gt;()&#39;</code> ... Similarly in your for-loop you can use <code>List&lt;Trade&gt; myObjectList = myListMap.get(...)</code>"}],"owner":{"account_id":30099828,"reputation":1,"user_id":23067250,"display_name":"Rachel Fisher"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":52,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"closed_date":1702067777,"answer_count":0,"score":-1,"last_activity_date":1702056686,"creation_date":1702053929,"question_id":77628051,"body_markdown":"This is a bit of a mess. I have an arrayList of object (Trades) I am trying to add the trades to a map grouped by their BbgCode&#39;s. I then want to iterate over every trade with the same bbg code to calculate total pnl for each bbgCode. (Profit and loss) The calculation should do the following. Sorry if this looks awful I am still a junior :)\r\n\r\nExample: Consider this sample data and the resultant PnL calculation:\r\n```\r\nBBGCode, time, side, quantity, price\r\nABC1, T0, B, 100, 100\r\nABC2, T1, B, 50, 200\r\nABC2, T2, B, 50, 202\r\nABC2, T3, S, 100, 205\r\nABC1, T3, S, 50, 99\r\n```\r\nOur PnL is:\r\n```\r\nABC1 = 50*99 [Partial Sale] - 100*100 [Purchase] = -50\r\nABC2 = 100*205 [Full Sale] - (50*200 + 50*202) [Purchase] = 400\r\nTOTAL = 400 - 50 = 350 PROFIT\r\n```\r\nThe method\r\n```\r\npublic static void PnLCalc(Trade trade) {\r\n   Map&lt;String, ArrayList&lt;Trade&gt;&gt; myListMap = new HashMap&lt;String, ArrayList&lt;Trade&gt;&gt;();\r\n\r\n   String portfolio = trade.getPortfolio();\r\n   String strategy = trade.getStrategy();\r\n   String user = trade.getUser();\r\n   String ccy = trade.getCurrency();\r\n\r\n   if (!trade.getVolume().equalsIgnoreCase(&quot;Volume&quot;)) {\r\n       double quantity = Double.parseDouble(trade.getVolume());\r\n\r\n       if (!trade.getPrice().equalsIgnoreCase(&quot;Price&quot;)) {\r\n           double price = Double.parseDouble(trade.getPrice());\r\n\r\n           double sellAmount = 0;\r\n           double buyAmount = 0;\r\n           double pnl = 0;\r\n\r\n           for (Trade t : tradeList) {\r\n               ArrayList&lt;Trade&gt; myObjectList = myListMap\r\n                       .get(trade.getbBGCode());\r\n               if (!trade.getbBGCode().equalsIgnoreCase(&quot;BBGCode&quot;)) {\r\n                   if (myObjectList == null) {\r\n                       myObjectList = new ArrayList&lt;Trade&gt;();\r\n                       myListMap.put(trade.getbBGCode(), myObjectList);\r\n\r\n                   }\r\n                   myObjectList.add(trade);\r\n\r\n                   // System.out.print(myListMap);\r\n               }\r\n           }\r\n\r\n           Iterator&lt;Entry&lt;String, ArrayList&lt;Trade&gt;&gt;&gt; itr = myListMap\r\n                   .entrySet().iterator();\r\n\r\n           while (itr.hasNext()) {\r\n\r\n               Entry&lt;String, ArrayList&lt;Trade&gt;&gt; entry = itr.next();\r\n               if (trade.getSide().equalsIgnoreCase(&quot;B&quot;)) {\r\n                   buyAmount = quantity * price;\r\n               }\r\n               if (trade.getSide().equalsIgnoreCase(&quot;S&quot;)) {\r\n                   sellAmount = quantity * price;\r\n               }\r\n               System.out.println(&quot;Key = &quot; + entry.getKey() + &quot;, Value = &quot;\r\n                       + entry.getValue());\r\n           }\r\n       }\r\n   }\r\n}","title":"How can I iterate over each object in my Map and calculate a result","body":"<p>This is a bit of a mess. I have an arrayList of object (Trades) I am trying to add the trades to a map grouped by their BbgCode's. I then want to iterate over every trade with the same bbg code to calculate total pnl for each bbgCode. (Profit and loss) The calculation should do the following. Sorry if this looks awful I am still a junior :)</p>\n<p>Example: Consider this sample data and the resultant PnL calculation:</p>\n<pre><code>BBGCode, time, side, quantity, price\nABC1, T0, B, 100, 100\nABC2, T1, B, 50, 200\nABC2, T2, B, 50, 202\nABC2, T3, S, 100, 205\nABC1, T3, S, 50, 99\n</code></pre>\n<p>Our PnL is:</p>\n<pre><code>ABC1 = 50*99 [Partial Sale] - 100*100 [Purchase] = -50\nABC2 = 100*205 [Full Sale] - (50*200 + 50*202) [Purchase] = 400\nTOTAL = 400 - 50 = 350 PROFIT\n</code></pre>\n<p>The method</p>\n<pre><code>public static void PnLCalc(Trade trade) {\n   Map&lt;String, ArrayList&lt;Trade&gt;&gt; myListMap = new HashMap&lt;String, ArrayList&lt;Trade&gt;&gt;();\n\n   String portfolio = trade.getPortfolio();\n   String strategy = trade.getStrategy();\n   String user = trade.getUser();\n   String ccy = trade.getCurrency();\n\n   if (!trade.getVolume().equalsIgnoreCase(&quot;Volume&quot;)) {\n       double quantity = Double.parseDouble(trade.getVolume());\n\n       if (!trade.getPrice().equalsIgnoreCase(&quot;Price&quot;)) {\n           double price = Double.parseDouble(trade.getPrice());\n\n           double sellAmount = 0;\n           double buyAmount = 0;\n           double pnl = 0;\n\n           for (Trade t : tradeList) {\n               ArrayList&lt;Trade&gt; myObjectList = myListMap\n                       .get(trade.getbBGCode());\n               if (!trade.getbBGCode().equalsIgnoreCase(&quot;BBGCode&quot;)) {\n                   if (myObjectList == null) {\n                       myObjectList = new ArrayList&lt;Trade&gt;();\n                       myListMap.put(trade.getbBGCode(), myObjectList);\n\n                   }\n                   myObjectList.add(trade);\n\n                   // System.out.print(myListMap);\n               }\n           }\n\n           Iterator&lt;Entry&lt;String, ArrayList&lt;Trade&gt;&gt;&gt; itr = myListMap\n                   .entrySet().iterator();\n\n           while (itr.hasNext()) {\n\n               Entry&lt;String, ArrayList&lt;Trade&gt;&gt; entry = itr.next();\n               if (trade.getSide().equalsIgnoreCase(&quot;B&quot;)) {\n                   buyAmount = quantity * price;\n               }\n               if (trade.getSide().equalsIgnoreCase(&quot;S&quot;)) {\n                   sellAmount = quantity * price;\n               }\n               System.out.println(&quot;Key = &quot; + entry.getKey() + &quot;, Value = &quot;\n                       + entry.getValue());\n           }\n       }\n   }\n}\n</code></pre>\n"},{"tags":["java","amazon-dynamodb","dynamodb-enhanced-client"],"owner":{"account_id":15906777,"reputation":107,"user_id":11477760,"display_name":"Justin"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":11,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1702056147,"creation_date":1702056147,"question_id":77628221,"body_markdown":"I have a DynamoDbBean with a nested DynamoDbBean\r\n```\r\n@DynamoDbBean\r\npublic class OuterBean {\r\n    private String Id;\r\n    private InnerBean innerBean;\r\n\r\n    public OuterBean() {\r\n        \r\n    }\r\n\r\n    @DynamoDbPartitionKey\r\n    @DynamoDbAttribute(value = &quot;Id&quot;)\r\n    public String getId() {\r\n        return Id;\r\n    }\r\n\r\n    public void setId(String Id) {\r\n        this.Id = Id;\r\n    }\r\n\r\n    @DynamoDbIgnoreNulls\r\n    @DynamoDbAttribute(value = &quot;innerBean&quot;)\r\n    public InnerBean getInnerBean() {\r\n        return innerBean;\r\n    }\r\n\r\n    public void setInnerBean(@Nullable InnerBean innerBean) {\r\n        this.innerBean = innerBean;\r\n    }\r\n}\r\n\r\n@DynamoDbBean\r\npublic class InnerBean {\r\n    private Integer field1;\r\n    private Integer field2;\r\n\r\n    public Integer getField1() {\r\n        return field1;\r\n    }\r\n\r\n    public void setField1(Integer field1) {\r\n        this.field1 = field1;\r\n    }\r\n\r\n    public Integer getField2() {\r\n        return field2;\r\n    }\r\n\r\n    public void setField2(Integer field2) {\r\n        this.field2 = field2;\r\n    }\r\n}\r\n\r\n```\r\n\r\nI would like to update `field1` in a record&#39;s `InnerBean` section only, without modifying any of the other properties in an `OuterBean` record or its `InnerBean` section. I&#39;m unable to do this using an `UpdateItemEnhancedRequest`.\r\n\r\n```\r\n        DynamoDbEnhancedClient client = DynamoDbEnhancedClient.builder()\r\n                .dynamoDbClient(\r\n                        DynamoDbClient.builder()\r\n                                .region(Region.of(&quot;us-east-1&quot;))\r\n                                .credentialsProvider(ProfileCredentialsProvider.create())\r\n                                .build())\r\n                .build();\r\n\r\n        DynamoDbTable&lt;OuterBean&gt; table = client.table(caseTableName, TableSchema.fromBean(OuterBean.class));\r\n\r\n        OuterBean outerBean = new OuterBean();\r\n        outerBean.setId(&quot;1&quot;);\r\n\r\n        InnerBean innerBean = new InnerBean();\r\n        innearBean.setField1(1);\r\n        // Notice field2 is null\r\n\r\n        outerBean.setInnerBean(innerBean);\r\n\r\n        table.updateItem(\r\n                UpdateItemEnhancedRequest\r\n                        .builder(OuterBean.class)\r\n                        .item(outerBean)\r\n                        .ignoreNulls(true)\r\n                        .build()\r\n        );\r\n```\r\n\r\nDespite using `ignoreNulls` and `@DynamoDbIgnoreNulls`, I still see the record&#39;s `field2` property get set to null in the database table instead of being ignored.\r\n\r\nHow can I ignore null values of nested beans?","title":"UpdateItemEnhancedRequest ignoreNulls not Working for Nested Beans","body":"<p>I have a DynamoDbBean with a nested DynamoDbBean</p>\n<pre><code>@DynamoDbBean\npublic class OuterBean {\n    private String Id;\n    private InnerBean innerBean;\n\n    public OuterBean() {\n        \n    }\n\n    @DynamoDbPartitionKey\n    @DynamoDbAttribute(value = &quot;Id&quot;)\n    public String getId() {\n        return Id;\n    }\n\n    public void setId(String Id) {\n        this.Id = Id;\n    }\n\n    @DynamoDbIgnoreNulls\n    @DynamoDbAttribute(value = &quot;innerBean&quot;)\n    public InnerBean getInnerBean() {\n        return innerBean;\n    }\n\n    public void setInnerBean(@Nullable InnerBean innerBean) {\n        this.innerBean = innerBean;\n    }\n}\n\n@DynamoDbBean\npublic class InnerBean {\n    private Integer field1;\n    private Integer field2;\n\n    public Integer getField1() {\n        return field1;\n    }\n\n    public void setField1(Integer field1) {\n        this.field1 = field1;\n    }\n\n    public Integer getField2() {\n        return field2;\n    }\n\n    public void setField2(Integer field2) {\n        this.field2 = field2;\n    }\n}\n\n</code></pre>\n<p>I would like to update <code>field1</code> in a record's <code>InnerBean</code> section only, without modifying any of the other properties in an <code>OuterBean</code> record or its <code>InnerBean</code> section. I'm unable to do this using an <code>UpdateItemEnhancedRequest</code>.</p>\n<pre><code>        DynamoDbEnhancedClient client = DynamoDbEnhancedClient.builder()\n                .dynamoDbClient(\n                        DynamoDbClient.builder()\n                                .region(Region.of(&quot;us-east-1&quot;))\n                                .credentialsProvider(ProfileCredentialsProvider.create())\n                                .build())\n                .build();\n\n        DynamoDbTable&lt;OuterBean&gt; table = client.table(caseTableName, TableSchema.fromBean(OuterBean.class));\n\n        OuterBean outerBean = new OuterBean();\n        outerBean.setId(&quot;1&quot;);\n\n        InnerBean innerBean = new InnerBean();\n        innearBean.setField1(1);\n        // Notice field2 is null\n\n        outerBean.setInnerBean(innerBean);\n\n        table.updateItem(\n                UpdateItemEnhancedRequest\n                        .builder(OuterBean.class)\n                        .item(outerBean)\n                        .ignoreNulls(true)\n                        .build()\n        );\n</code></pre>\n<p>Despite using <code>ignoreNulls</code> and <code>@DynamoDbIgnoreNulls</code>, I still see the record's <code>field2</code> property get set to null in the database table instead of being ignored.</p>\n<p>How can I ignore null values of nested beans?</p>\n"},{"tags":["java","audio"],"answers":[{"tags":[],"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1702056078,"creation_date":1702056078,"answer_id":77628217,"question_id":77627055,"body_markdown":"This doesn’t really fix the problem, but it should serve as a workaround, at least for .wav files.\r\n\r\nYou can restrict Java Sound to using only Java SE-provided readers, then only if that fails, fall back to using the entire set of available providers, including jaad.\r\n\r\n    static AudioFileFormat getFormat(File file)\r\n    throws IOException,\r\n           UnsupportedAudioFileException {\r\n\r\n        ServiceLoader&lt;AudioFileReader&gt; readers = ServiceLoader.load(\r\n            System.class.getModule().getLayer(), AudioFileReader.class);\r\n\r\n        for (AudioFileReader reader : readers) {\r\n            try {\r\n                return reader.getAudioFileFormat(file);\r\n            } catch (UnsupportedAudioFileException e) {\r\n                // Ignore\r\n            }\r\n        }\r\n\r\n        return AudioSystem.getAudioFileFormat(file);\r\n    }\r\n\r\nServiceLoader is the [java.util.ServiceLoader](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/ServiceLoader.html) class.  AudioFileReader is the [javax.sound.sampled.spi.AudioFileReader](https://docs.oracle.com/en/java/javase/21/docs/api/java.desktop/javax/sound/sampled/spi/AudioFileReader.html) class.\r\n","title":"Conflict between jaad and javax sound","body":"<p>This doesn’t really fix the problem, but it should serve as a workaround, at least for .wav files.</p>\n<p>You can restrict Java Sound to using only Java SE-provided readers, then only if that fails, fall back to using the entire set of available providers, including jaad.</p>\n<pre><code>static AudioFileFormat getFormat(File file)\nthrows IOException,\n       UnsupportedAudioFileException {\n\n    ServiceLoader&lt;AudioFileReader&gt; readers = ServiceLoader.load(\n        System.class.getModule().getLayer(), AudioFileReader.class);\n\n    for (AudioFileReader reader : readers) {\n        try {\n            return reader.getAudioFileFormat(file);\n        } catch (UnsupportedAudioFileException e) {\n            // Ignore\n        }\n    }\n\n    return AudioSystem.getAudioFileFormat(file);\n}\n</code></pre>\n<p>ServiceLoader is the <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/ServiceLoader.html\" rel=\"nofollow noreferrer\">java.util.ServiceLoader</a> class.  AudioFileReader is the <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.desktop/javax/sound/sampled/spi/AudioFileReader.html\" rel=\"nofollow noreferrer\">javax.sound.sampled.spi.AudioFileReader</a> class.</p>\n"}],"owner":{"account_id":2332817,"reputation":866,"user_id":2045777,"accept_rate":17,"display_name":"Jacobs2000"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":11,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1702056078,"creation_date":1702043589,"question_id":77627055,"body_markdown":"I have a small utility class for obtaining the sample rate of a WAV file. The high-level code is below (full example is in the [sample project on GitHub][1] )\r\n\r\n    public static int getSampleRate(String audioFilePath) throws FileNotFoundException {\r\n        File audioFile = new File(audioFilePath);\r\n        \r\n        try {\r\n            AudioFileFormat audioFileFormat = AudioSystem.getAudioFileFormat(audioFile);\r\n            int sampleRate = (int) audioFileFormat.getFormat().getSampleRate();\r\n            return sampleRate;\r\n        } catch (UnsupportedAudioFileException|IOException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n    }\r\n\r\nThis code works perfectly until I add Jaad dependency in pom.xml:\r\n\r\n     &lt;dependency&gt;\r\n            &lt;groupId&gt;com.tianscar.javasound&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jaad&lt;/artifactId&gt;\r\n            &lt;version&gt;0.9.4&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\nThis causes Jaad to interfere somehow and the line - \r\n\r\n    AudioFileFormat audioFileFormat = AudioSystem.getAudioFileFormat(audioFile);\r\n\r\nresults in an exception:\r\njava.lang.NullPointerException: Cannot invoke &quot;net.sourceforge.jaad.aac.SampleRate.getFrequency()&quot; because the return value of &quot;net.sourceforge.jaad.aac.DecoderConfig.getSampleFrequency()&quot; is null\r\n\r\n\tat net.sourceforge.jaad.aac.Decoder.&lt;init&gt;(Decoder.java:77)\r\n\tat net.sourceforge.jaad.aac.Decoder.create(Decoder.java:57)\r\n\tat net.sourceforge.jaad.aac.Decoder.create(Decoder.java:51)\r\n\tat net.sourceforge.jaad.spi.javasound.AACAudioFileReader.decodeAACAudio(AACAudioFileReader.java:50)\r\n\tat net.sourceforge.jaad.spi.javasound.AACAudioFileReader.decodeAACAudioFileFormat(AACAudioFileReader.java:42)\r\n\tat net.sourceforge.jaad.spi.javasound.AACAudioFileReader.getAudioFileFormat(AACAudioFileReader.java:173)\r\n\tat net.sourceforge.jaad.spi.javasound.AACAudioFileReader.getAudioFileFormatAndClose(AACAudioFileReader.java:228)\r\n\tat net.sourceforge.jaad.spi.javasound.AACAudioFileReader.getAudioFileFormat(AACAudioFileReader.java:242)\r\n\tat java.desktop/javax.sound.sampled.AudioSystem.getAudioFileFormat(AudioSystem.java:976)\r\n...\r\n\r\nI included two tests in the [sample project on GitHub][1] :\r\n\r\n - AacSampleRateExtractorTest - runs successfully and extracts the sample rate from an AAC file using Jaad\r\n - AudioWavSampleTest - fails because of the problem I described above. This test can be made to work by removing the Jaad dependency from pom.xml. \r\n\r\nI have not encountered any known compatibility problem between Jaad and Javax sound. Am I missing something? Is this a known bug of Jaad? \r\nDoes anyone have an idea how to resolve this conflict?\r\n\r\n\r\n  [1]: https://github.com/yschondorf/jaad-conflict-sample-project/tree/main","title":"Conflict between jaad and javax sound","body":"<p>I have a small utility class for obtaining the sample rate of a WAV file. The high-level code is below (full example is in the <a href=\"https://github.com/yschondorf/jaad-conflict-sample-project/tree/main\" rel=\"nofollow noreferrer\">sample project on GitHub</a> )</p>\n<pre><code>public static int getSampleRate(String audioFilePath) throws FileNotFoundException {\n    File audioFile = new File(audioFilePath);\n    \n    try {\n        AudioFileFormat audioFileFormat = AudioSystem.getAudioFileFormat(audioFile);\n        int sampleRate = (int) audioFileFormat.getFormat().getSampleRate();\n        return sampleRate;\n    } catch (UnsupportedAudioFileException|IOException e) {\n        throw new RuntimeException(e);\n    }\n}\n</code></pre>\n<p>This code works perfectly until I add Jaad dependency in pom.xml:</p>\n<pre><code> &lt;dependency&gt;\n        &lt;groupId&gt;com.tianscar.javasound&lt;/groupId&gt;\n        &lt;artifactId&gt;jaad&lt;/artifactId&gt;\n        &lt;version&gt;0.9.4&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>This causes Jaad to interfere somehow and the line -</p>\n<pre><code>AudioFileFormat audioFileFormat = AudioSystem.getAudioFileFormat(audioFile);\n</code></pre>\n<p>results in an exception:\njava.lang.NullPointerException: Cannot invoke &quot;net.sourceforge.jaad.aac.SampleRate.getFrequency()&quot; because the return value of &quot;net.sourceforge.jaad.aac.DecoderConfig.getSampleFrequency()&quot; is null</p>\n<pre><code>at net.sourceforge.jaad.aac.Decoder.&lt;init&gt;(Decoder.java:77)\nat net.sourceforge.jaad.aac.Decoder.create(Decoder.java:57)\nat net.sourceforge.jaad.aac.Decoder.create(Decoder.java:51)\nat net.sourceforge.jaad.spi.javasound.AACAudioFileReader.decodeAACAudio(AACAudioFileReader.java:50)\nat net.sourceforge.jaad.spi.javasound.AACAudioFileReader.decodeAACAudioFileFormat(AACAudioFileReader.java:42)\nat net.sourceforge.jaad.spi.javasound.AACAudioFileReader.getAudioFileFormat(AACAudioFileReader.java:173)\nat net.sourceforge.jaad.spi.javasound.AACAudioFileReader.getAudioFileFormatAndClose(AACAudioFileReader.java:228)\nat net.sourceforge.jaad.spi.javasound.AACAudioFileReader.getAudioFileFormat(AACAudioFileReader.java:242)\nat java.desktop/javax.sound.sampled.AudioSystem.getAudioFileFormat(AudioSystem.java:976)\n</code></pre>\n<p>...</p>\n<p>I included two tests in the <a href=\"https://github.com/yschondorf/jaad-conflict-sample-project/tree/main\" rel=\"nofollow noreferrer\">sample project on GitHub</a> :</p>\n<ul>\n<li>AacSampleRateExtractorTest - runs successfully and extracts the sample rate from an AAC file using Jaad</li>\n<li>AudioWavSampleTest - fails because of the problem I described above. This test can be made to work by removing the Jaad dependency from pom.xml.</li>\n</ul>\n<p>I have not encountered any known compatibility problem between Jaad and Javax sound. Am I missing something? Is this a known bug of Jaad?\nDoes anyone have an idea how to resolve this conflict?</p>\n"},{"tags":["java","amazon-dynamodb"],"comments":[{"owner":{"account_id":2269226,"reputation":22774,"user_id":1997093,"accept_rate":100,"display_name":"akash"},"score":0,"creation_date":1539779561,"post_id":52854622,"comment_id":92625029,"body_markdown":"Are you getting any exception? If yes, can you share exception stacktrace?","body":"Are you getting any exception? If yes, can you share exception stacktrace?"},{"owner":{"account_id":1909698,"reputation":3672,"user_id":1723857,"display_name":"kenlukas"},"score":3,"creation_date":1539779637,"post_id":52854622,"comment_id":92625084,"body_markdown":"Please be specific.  &quot;It does not work&quot; isn&#39;t enough information.","body":"Please be specific.  &quot;It does not work&quot; isn&#39;t enough information."}],"answers":[{"tags":[],"owner":{"account_id":8447748,"reputation":38021,"user_id":6337748,"accept_rate":38,"display_name":"notionquest"},"down_vote_count":2,"up_vote_count":6,"is_accepted":false,"score":4,"last_activity_date":1539785551,"creation_date":1539785551,"answer_id":52856997,"question_id":52854622,"body_markdown":"The best approach to delete all the items from DynamoDB is to drop the table and recreate it.\r\n\r\nOtherwise, there are lot of read capacity and write capacity units being used which will cost you.\r\n\r\nDropping and recreating the table is the best approach.","title":"java delete all items in dynamodb","body":"<p>The best approach to delete all the items from DynamoDB is to drop the table and recreate it.</p>\n\n<p>Otherwise, there are lot of read capacity and write capacity units being used which will cost you.</p>\n\n<p>Dropping and recreating the table is the best approach.</p>\n"},{"tags":[],"owner":{"account_id":10285344,"reputation":85,"user_id":7588855,"display_name":"Bhargav"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1580729626,"creation_date":1562650444,"answer_id":56945915,"question_id":52854622,"body_markdown":"To delete all the items from the table first you need to perform scan operation over the table which will results you an scanoutcome. Using the iterator loop over the sacnoutcome with the primary key and it&#39;s primary key value.This will be one of the approach to delete all the items from the table. Hope that this code will work you. Thanks  \r\n\r\n```java\r\nTable table = dynamoDB.getTable(your_table);\r\nItemCollection&lt;ScanOutcome&gt; deleteoutcome = table.scan();\r\nIterator&lt;Item&gt; iterator = deleteoutcome.iterator();\r\n\r\nwhile (iterator.hasNext()) {\r\n    your_table.deleteItem(&quot;PrimaryKey&quot;, iterator.next().get(&quot;primary key value&quot;));\r\n}\r\n\r\n//May be we can make it look generic by reading key schema first as below\r\nString strPartitionKey = null;\r\nString strSortKey = null;\r\nTableDescription description = table.describe();\r\nList&lt;KeySchemaElement&gt; schema = description.getKeySchema();\r\nfor (KeySchemaElement element : schema) {\r\n    if (element.getKeyType().equalsIgnoreCase(&quot;HASH&quot;))\r\n        strPartitionKey = element.getAttributeName();\r\n    if (element.getKeyType().equalsIgnoreCase(&quot;RANGE&quot;))\r\n        strSortKey = element.getAttributeName();\r\n}\r\n\r\nItemCollection&lt;ScanOutcome&gt; deleteoutcome = table.scan();\r\nIterator&lt;Item&gt; iterator = deleteoutcome.iterator();\r\nwhile (iterator.hasNext()) {\r\n    Item next = iterator.next();\r\n    if (strSortKey == null &amp;&amp; strPartitionKey != null)\r\n        table.deleteItem(strPartitionKey, next.get(strPartitionKey));\r\n    else if (strPartitionKey != null &amp;&amp; strSortKey != null)\r\n        table.deleteItem(strPartitionKey, next.get(strPartitionKey), strSortKey, next.get(strSortKey));\r\n}\r\n```","title":"java delete all items in dynamodb","body":"<p>To delete all the items from the table first you need to perform scan operation over the table which will results you an scanoutcome. Using the iterator loop over the sacnoutcome with the primary key and it's primary key value.This will be one of the approach to delete all the items from the table. Hope that this code will work you. Thanks  </p>\n\n<pre class=\"lang-java prettyprint-override\"><code>Table table = dynamoDB.getTable(your_table);\nItemCollection&lt;ScanOutcome&gt; deleteoutcome = table.scan();\nIterator&lt;Item&gt; iterator = deleteoutcome.iterator();\n\nwhile (iterator.hasNext()) {\n    your_table.deleteItem(\"PrimaryKey\", iterator.next().get(\"primary key value\"));\n}\n\n//May be we can make it look generic by reading key schema first as below\nString strPartitionKey = null;\nString strSortKey = null;\nTableDescription description = table.describe();\nList&lt;KeySchemaElement&gt; schema = description.getKeySchema();\nfor (KeySchemaElement element : schema) {\n    if (element.getKeyType().equalsIgnoreCase(\"HASH\"))\n        strPartitionKey = element.getAttributeName();\n    if (element.getKeyType().equalsIgnoreCase(\"RANGE\"))\n        strSortKey = element.getAttributeName();\n}\n\nItemCollection&lt;ScanOutcome&gt; deleteoutcome = table.scan();\nIterator&lt;Item&gt; iterator = deleteoutcome.iterator();\nwhile (iterator.hasNext()) {\n    Item next = iterator.next();\n    if (strSortKey == null &amp;&amp; strPartitionKey != null)\n        table.deleteItem(strPartitionKey, next.get(strPartitionKey));\n    else if (strPartitionKey != null &amp;&amp; strSortKey != null)\n        table.deleteItem(strPartitionKey, next.get(strPartitionKey), strSortKey, next.get(strSortKey));\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":717,"reputation":54118,"user_id":939,"accept_rate":81,"display_name":"Ron Tuffin"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1615801046,"creation_date":1615801046,"answer_id":66635486,"question_id":52854622,"body_markdown":"**PREAMBLE**: While a scan operation is expensive, I was needing this answer for initialising a table for a test scenario (low volume). The table was being created by another process and I needed the test scenario on that table, I could therefore not delete and recreate the table.\r\n\r\n**ANSWER**:\r\ngiven:\r\n - DynamoDbClient db\r\n - static String TABLE_NAME\r\n - static String HASH_KEY\r\n - static String SORT_KEY\r\n\r\n        ScanIterable scanIterable = db.scanPaginator(ScanRequest.builder()\r\n                .tableName(TABLE_NAME)\r\n                .build());\r\n        for(ScanResponse scanResponse:scanIterable){\r\n            for( Map&lt;String, AttributeValue&gt; item: scanResponse.items()){\r\n                Map&lt;String,AttributeValue&gt; deleteKey = new HashMap&lt;&gt;();\r\n                deleteKey.put(HASH_KEY,item.get(HASH_KEY));\r\n                deleteKey.put(SORT_KEY,item.get(SORT_KEY));\r\n                db.deleteItem(DeleteItemRequest.builder()\r\n                        .tableName(TRANSACTION_TABLE_NAME)\r\n                        .key(deleteKey).build());\r\n            }\r\n        }","title":"java delete all items in dynamodb","body":"<p><strong>PREAMBLE</strong>: While a scan operation is expensive, I was needing this answer for initialising a table for a test scenario (low volume). The table was being created by another process and I needed the test scenario on that table, I could therefore not delete and recreate the table.</p>\n<p><strong>ANSWER</strong>:\ngiven:</p>\n<ul>\n<li><p>DynamoDbClient db</p>\n</li>\n<li><p>static String TABLE_NAME</p>\n</li>\n<li><p>static String HASH_KEY</p>\n</li>\n<li><p>static String SORT_KEY</p>\n<pre><code> ScanIterable scanIterable = db.scanPaginator(ScanRequest.builder()\n         .tableName(TABLE_NAME)\n         .build());\n for(ScanResponse scanResponse:scanIterable){\n     for( Map&lt;String, AttributeValue&gt; item: scanResponse.items()){\n         Map&lt;String,AttributeValue&gt; deleteKey = new HashMap&lt;&gt;();\n         deleteKey.put(HASH_KEY,item.get(HASH_KEY));\n         deleteKey.put(SORT_KEY,item.get(SORT_KEY));\n         db.deleteItem(DeleteItemRequest.builder()\n                 .tableName(TRANSACTION_TABLE_NAME)\n                 .key(deleteKey).build());\n     }\n }\n</code></pre>\n</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":7584362,"reputation":187,"user_id":5754033,"display_name":"Vadym Ozarynskyi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1702054794,"creation_date":1702054794,"answer_id":77628129,"question_id":52854622,"body_markdown":" - List item\r\n\r\nLate to the party, but recently I needed the same for my integration tests.\r\nSince it&#39;s integration tests, I don&#39;t want to depend on implementation and wanted to delete all content of all tables. \r\nSo basically I retrieve all table names. Then retrieve key schemas for each table. And scan through each and construct key by which we delete item. \r\nWe need construction of keys since for one table we can have only partition key and for other we need sort key as well.\r\n\r\n            val client = enhancedClientBuilder.build()\r\n\r\n        runBlocking {\r\n            client.listTables().await().tableNames().forEach { tableName -&gt;\r\n                val table = client.describeTable { it.tableName(tableName) }.await().table()\r\n\r\n                client.scan { it.tableName(tableName) }.await().items().forEach { item -&gt;\r\n                    val itemIdentifier = mutableMapOf&lt;String, AttributeValue&gt;()\r\n                    table.keySchema().forEach { keySchema -&gt;\r\n                        itemIdentifier[keySchema.attributeName()] = item[keySchema.attributeName()]!!\r\n                    }\r\n\r\n                    client.deleteItem {\r\n                        it.tableName(tableName)\r\n                        it.key(itemIdentifier)\r\n                    }.await()\r\n                }\r\n            }\r\n        }\r\n","title":"java delete all items in dynamodb","body":"<ul>\n<li>List item</li>\n</ul>\n<p>Late to the party, but recently I needed the same for my integration tests.\nSince it's integration tests, I don't want to depend on implementation and wanted to delete all content of all tables.\nSo basically I retrieve all table names. Then retrieve key schemas for each table. And scan through each and construct key by which we delete item.\nWe need construction of keys since for one table we can have only partition key and for other we need sort key as well.</p>\n<pre><code>        val client = enhancedClientBuilder.build()\n\n    runBlocking {\n        client.listTables().await().tableNames().forEach { tableName -&gt;\n            val table = client.describeTable { it.tableName(tableName) }.await().table()\n\n            client.scan { it.tableName(tableName) }.await().items().forEach { item -&gt;\n                val itemIdentifier = mutableMapOf&lt;String, AttributeValue&gt;()\n                table.keySchema().forEach { keySchema -&gt;\n                    itemIdentifier[keySchema.attributeName()] = item[keySchema.attributeName()]!!\n                }\n\n                client.deleteItem {\n                    it.tableName(tableName)\n                    it.key(itemIdentifier)\n                }.await()\n            }\n        }\n    }\n</code></pre>\n"}],"owner":{"account_id":14562744,"reputation":71,"user_id":10518381,"display_name":"luux"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9891,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"answer_count":4,"score":7,"last_activity_date":1702054794,"creation_date":1539778305,"question_id":52854622,"body_markdown":"Im trying to delete all items in my table in dynamodb but it does not work.\r\n\r\n        try {\r\n            ScanRequest scanRequest = new ScanRequest().withTableName(table);\r\n            ScanResult scanResult = null;\r\n\r\n            do {\r\n                if (Check.nonNull(scanResult)) {\r\n                    scanRequest.setExclusiveStartKey(scanResult.getLastEvaluatedKey());\r\n                }\r\n\r\n                scanResult = client.scan(scanRequest);\r\n\r\n                scanResult.getItems().forEach((Item) -&gt; {\r\n                    String n1 = Item.get(&quot;n1&quot;).toString();\r\n                    String n2 = tem.get(&quot;n2&quot;).toString();\r\n                    DeleteItemSpec spec = new DeleteItemSpec().withPrimaryKey(&quot;n1&quot;, n1, &quot;n2&quot;, n2);\r\n                    dynamodb.getTable(table).deleteItem(spec);\r\n                });\r\n            } while (Check.nonNull(scanResult.getLastEvaluatedKey()));\r\n        } catch (Exception e) {\r\n            throw new BadRequestException(e);\r\n        }\r\n\r\n\r\nn1 is my Primary partition key\r\n\r\nn2 is my Primary sort key\r\n\r\n\r\n","title":"java delete all items in dynamodb","body":"<p>Im trying to delete all items in my table in dynamodb but it does not work.</p>\n\n<pre><code>    try {\n        ScanRequest scanRequest = new ScanRequest().withTableName(table);\n        ScanResult scanResult = null;\n\n        do {\n            if (Check.nonNull(scanResult)) {\n                scanRequest.setExclusiveStartKey(scanResult.getLastEvaluatedKey());\n            }\n\n            scanResult = client.scan(scanRequest);\n\n            scanResult.getItems().forEach((Item) -&gt; {\n                String n1 = Item.get(\"n1\").toString();\n                String n2 = tem.get(\"n2\").toString();\n                DeleteItemSpec spec = new DeleteItemSpec().withPrimaryKey(\"n1\", n1, \"n2\", n2);\n                dynamodb.getTable(table).deleteItem(spec);\n            });\n        } while (Check.nonNull(scanResult.getLastEvaluatedKey()));\n    } catch (Exception e) {\n        throw new BadRequestException(e);\n    }\n</code></pre>\n\n<p>n1 is my Primary partition key</p>\n\n<p>n2 is my Primary sort key</p>\n"},{"tags":["java","amazon-web-services","apache-nifi","amazon-timestream"],"answers":[{"tags":[],"owner":{"account_id":2855790,"reputation":591,"user_id":2452093,"accept_rate":100,"display_name":"Ciaran George"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1702054512,"creation_date":1702054512,"answer_id":77628104,"question_id":77365590,"body_markdown":"It turns out some AWS V2 files made their way into apache NIFI V1.23.2 before they had upgraded to nifi 2.0.0. These files caused conflicts with the V1 implementation throughout the rest of the code. I&#39;ve now upgraded to nifi 2.0.0-M1 and have been able to get it running.","title":"Error occurring when running apache nifi processor integration test","body":"<p>It turns out some AWS V2 files made their way into apache NIFI V1.23.2 before they had upgraded to nifi 2.0.0. These files caused conflicts with the V1 implementation throughout the rest of the code. I've now upgraded to nifi 2.0.0-M1 and have been able to get it running.</p>\n"}],"owner":{"account_id":2855790,"reputation":591,"user_id":2452093,"accept_rate":100,"display_name":"Ciaran George"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1702054512,"creation_date":1698311125,"question_id":77365590,"body_markdown":"I&#39;ve created a new apache NIFI processor for AWS Timestream, I know a timestream processor already exists but it does not currently support MultiMeasure values. As part of this I&#39;ve attempted to upgrade the nifi AWS processor structure to aws V2 API but I&#39;ve hit an issue that I believe to be an AWS version conflict (Although I could be wrong). I&#39;m hoping someone can assist me with this issue.\r\n\r\nThe error occurring is:\r\n\r\n```\r\njava.lang.IllegalArgumentException: Invalid option: software.amazon.awssdk.awscore.client.config.AwsClientOption@71168c46. Required value of type interface software.amazon.awssdk.identity.spi.IdentityProvider, but was class org.apache.nifi.processors.aws.credentials.provider.PropertiesCredentialsProvider.\r\n```\r\n\r\nThe integration test I&#39;m running is:\r\n\r\n```\r\n    private final String CREDENTIALS_FILE = System.getProperty(&quot;user.home&quot;) + &quot;/aws-credentials.properties&quot;;\r\n    private final String DB_NAME = &quot;example_db&quot;;\r\n    private final String TBL_NAME = &quot;example_tbl&quot;;\r\n    private final String REGION = Region.EU_WEST_1.id();\r\n\r\n    @Test\r\n    public void testSimplePut() throws IOException {\r\n        final TestRunner runner = TestRunners.newTestRunner(new PutTimestream());\r\n        runner.setProperty(PutTimestream.TBL_NAME, TBL_NAME);\r\n        runner.setProperty(PutTimestream.DB_NAME, DB_NAME);\r\n        runner.setProperty(PutTimestream.REGION, REGION);\r\n        runner.setProperty(PutTimestream.CREDENTIALS_FILE, CREDENTIALS_FILE);\r\n\r\n        final Map&lt;String, String&gt; attrs = new HashMap&lt;&gt;();\r\n        attrs.put(&quot;filename&quot;, &quot;timestream_valid.json&quot;);\r\n        runner.enqueue(Paths.get(&quot;src/test/resources/timestream_valid.json&quot;), attrs);\r\n        runner.run(1);\r\n\r\n        runner.assertAllFlowFilesTransferred(PutTimestream.REL_SUCCESS, 1);\r\n    }\r\n```\r\n\r\nThis is my AbstractTimestreamProcessor:\r\n\r\n```\r\npublic abstract class AbstractTimestreamProcessor extends AbstractAwsProcessor&lt;TimestreamWriteClient, TimestreamWriteClientBuilder&gt; {\r\n\t@Override\r\n\tprotected TimestreamWriteClientBuilder createClientBuilder(ProcessContext processContext) {\r\n\t\treturn TimestreamWriteClient.builder();\r\n\t}\r\n}\r\n```\r\n\r\nThen this is the PutTimestream processor:\r\n\r\n```\r\n@Tags( { &quot;amazon&quot;, &quot;aws&quot;, &quot;timestream&quot;, &quot;put&quot; } )\r\n@CapabilityDescription( &quot;AWS Timestream Put Processor.&quot; )\r\npublic class PutTimestream extends AbstractTimestreamProcessor {\r\n\r\n\tpublic static final PropertyDescriptor DB_NAME = new PropertyDescriptor.Builder()\r\n\t\t\t.name(&quot;Database Name&quot;)\r\n\t\t\t.displayName(&quot;Database Name&quot;)\r\n\t\t\t.description(&quot;Specifies the name of the Amazon Timestream Database&quot;)\r\n\t\t\t.required(true)\r\n\t\t\t.expressionLanguageSupported(ExpressionLanguageScope.FLOWFILE_ATTRIBUTES)\r\n\t\t\t.addValidator(StandardValidators.NON_EMPTY_VALIDATOR)\r\n\t\t\t.build();\r\n\tpublic static final PropertyDescriptor TBL_NAME = new PropertyDescriptor.Builder()\r\n\t\t\t.name(&quot;Table Name&quot;)\r\n\t\t\t.displayName(&quot;Table Name&quot;)\r\n\t\t\t.description(&quot;Specifies the name of the Amazon Timestream Table&quot;)\r\n\t\t\t.required(true)\r\n\t\t\t.expressionLanguageSupported(ExpressionLanguageScope.FLOWFILE_ATTRIBUTES)\r\n\t\t\t.addValidator(StandardValidators.NON_EMPTY_VALIDATOR)\r\n\t\t\t.build();\r\n\r\n//\tprivate Set&lt;Relationship&gt; relationships;\r\n\tWriteRecordsResponse writeRecordsResponse;\r\n\tMap&lt;String, String&gt; attributes;\r\n\r\n\tpublic static final List&lt;PropertyDescriptor&gt; properties = Collections\r\n\t\t\t.unmodifiableList(Arrays.asList(AWS_CREDENTIALS_PROVIDER_SERVICE, REGION, ACCESS_KEY, SECRET_KEY,\r\n\t\t\t\t\tCREDENTIALS_FILE, TIMEOUT, DB_NAME, TBL_NAME));\r\n\r\n\tprivate volatile List&lt;PropertyDescriptor&gt; userDefinedProperties = Collections.emptyList();\r\n\tprivate TimestreamRecordConverter timestreamRecordConverter;\r\n\t\r\n\t@Override\r\n\tprotected void init(ProcessorInitializationContext context) {\r\n\t\ttimestreamRecordConverter = new TimestreamRecordConverter(getLogger());\r\n\t}\r\n\r\n\t@Override\r\n\tprotected List&lt;PropertyDescriptor&gt; getSupportedPropertyDescriptors() {\r\n\t\treturn properties;\r\n\t}\r\n\r\n\tprivate Map&lt;String, String&gt; getAttributes(FlowFile flowFile, WriteRecordsResponse writeRecordsResponse) {\r\n\t\tattributes = new HashMap();\r\n\t\tattributes.putAll(flowFile.getAttributes());\r\n\t\tattributes.put(CoreAttributes.MIME_TYPE.key(), &quot;application/json&quot;);\r\n\t\tattributes.put(&quot;timestream.insert.status&quot;,\r\n\t\t\t\tString.valueOf(writeRecordsResponse.responseMetadata()));\r\n\t\treturn attributes;\r\n\r\n\t}\r\n\r\n\t@Override\r\n\tpublic void onTrigger(ProcessContext context, ProcessSession session) throws ProcessException {\r\n\r\n\t\tFlowFile flowFile = session.get();\r\n\t\tif (flowFile == null) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tfinal long startNanos = System.nanoTime();\r\n\r\n\t\tString dbName = context.getProperty(DB_NAME).evaluateAttributeExpressions(flowFile).getValue();\r\n\t\tString tblName = context.getProperty(TBL_NAME).evaluateAttributeExpressions(flowFile).getValue();\r\n\r\n\t\tfinal List&lt;Record&gt; records;\r\n\t\ttry {\r\n\t\t\tfinal byte[] content = new byte[(int) flowFile.getSize()];\r\n\t\t\tsession.read(flowFile, in -&gt; StreamUtils.fillBuffer(in, content, true));\r\n\t\t\trecords = timestreamRecordConverter.convertJsonToTimestreamRecords(new String(content));\r\n\r\n\t\t\tWriteRecordsRequest writeRecordsRequest = WriteRecordsRequest.builder()\r\n\t\t\t\t\t.databaseName(dbName)\r\n\t\t\t\t\t.tableName(tblName)\r\n\t\t\t\t\t.records(records)\r\n\t\t\t\t\t.build();\r\n\r\n\t\t\twriteRecordsResponse = getClient(context).writeRecords(writeRecordsRequest);\r\n\t\t\tflowFile = session.putAllAttributes(flowFile, getAttributes(flowFile, writeRecordsResponse));\r\n\t\t\tsession.transfer(flowFile, REL_SUCCESS);\r\n\r\n\t\t\tlong transmissionMillis = java.util.concurrent.TimeUnit.NANOSECONDS.toMillis(System.nanoTime() - startNanos);\r\n\t\t\tsession.getProvenanceReporter().send(flowFile, tblName, transmissionMillis);\r\n\t\t} catch (Exception e) {\r\n\t\t\tStringWriter sw = new StringWriter();\r\n\t\t\te.printStackTrace(new PrintWriter(sw));\r\n\t\t\tgetLogger().info(&quot;Error processing timestream record. Check stacktrace &quot; + sw);\r\n\t\t\tsession.transfer(flowFile, REL_FAILURE);\r\n\t\t}\r\n\r\n\t}\r\n}\r\n```\r\n\r\nThe record gets processed successfully but when I call getClient it seems to fail on the line:\r\n\r\n```\r\nthis.finalizeChildConfiguration(configuration)\r\n```\r\n\r\nWhich is in the SdkDefaultClientBuilder class. Any help would be much appreaciated with this issue as there&#39;s very little resources to go off for this.\r\n\r\nThanks\r\n\r\n\r\n","title":"Error occurring when running apache nifi processor integration test","body":"<p>I've created a new apache NIFI processor for AWS Timestream, I know a timestream processor already exists but it does not currently support MultiMeasure values. As part of this I've attempted to upgrade the nifi AWS processor structure to aws V2 API but I've hit an issue that I believe to be an AWS version conflict (Although I could be wrong). I'm hoping someone can assist me with this issue.</p>\n<p>The error occurring is:</p>\n<pre><code>java.lang.IllegalArgumentException: Invalid option: software.amazon.awssdk.awscore.client.config.AwsClientOption@71168c46. Required value of type interface software.amazon.awssdk.identity.spi.IdentityProvider, but was class org.apache.nifi.processors.aws.credentials.provider.PropertiesCredentialsProvider.\n</code></pre>\n<p>The integration test I'm running is:</p>\n<pre><code>    private final String CREDENTIALS_FILE = System.getProperty(&quot;user.home&quot;) + &quot;/aws-credentials.properties&quot;;\n    private final String DB_NAME = &quot;example_db&quot;;\n    private final String TBL_NAME = &quot;example_tbl&quot;;\n    private final String REGION = Region.EU_WEST_1.id();\n\n    @Test\n    public void testSimplePut() throws IOException {\n        final TestRunner runner = TestRunners.newTestRunner(new PutTimestream());\n        runner.setProperty(PutTimestream.TBL_NAME, TBL_NAME);\n        runner.setProperty(PutTimestream.DB_NAME, DB_NAME);\n        runner.setProperty(PutTimestream.REGION, REGION);\n        runner.setProperty(PutTimestream.CREDENTIALS_FILE, CREDENTIALS_FILE);\n\n        final Map&lt;String, String&gt; attrs = new HashMap&lt;&gt;();\n        attrs.put(&quot;filename&quot;, &quot;timestream_valid.json&quot;);\n        runner.enqueue(Paths.get(&quot;src/test/resources/timestream_valid.json&quot;), attrs);\n        runner.run(1);\n\n        runner.assertAllFlowFilesTransferred(PutTimestream.REL_SUCCESS, 1);\n    }\n</code></pre>\n<p>This is my AbstractTimestreamProcessor:</p>\n<pre><code>public abstract class AbstractTimestreamProcessor extends AbstractAwsProcessor&lt;TimestreamWriteClient, TimestreamWriteClientBuilder&gt; {\n    @Override\n    protected TimestreamWriteClientBuilder createClientBuilder(ProcessContext processContext) {\n        return TimestreamWriteClient.builder();\n    }\n}\n</code></pre>\n<p>Then this is the PutTimestream processor:</p>\n<pre><code>@Tags( { &quot;amazon&quot;, &quot;aws&quot;, &quot;timestream&quot;, &quot;put&quot; } )\n@CapabilityDescription( &quot;AWS Timestream Put Processor.&quot; )\npublic class PutTimestream extends AbstractTimestreamProcessor {\n\n    public static final PropertyDescriptor DB_NAME = new PropertyDescriptor.Builder()\n            .name(&quot;Database Name&quot;)\n            .displayName(&quot;Database Name&quot;)\n            .description(&quot;Specifies the name of the Amazon Timestream Database&quot;)\n            .required(true)\n            .expressionLanguageSupported(ExpressionLanguageScope.FLOWFILE_ATTRIBUTES)\n            .addValidator(StandardValidators.NON_EMPTY_VALIDATOR)\n            .build();\n    public static final PropertyDescriptor TBL_NAME = new PropertyDescriptor.Builder()\n            .name(&quot;Table Name&quot;)\n            .displayName(&quot;Table Name&quot;)\n            .description(&quot;Specifies the name of the Amazon Timestream Table&quot;)\n            .required(true)\n            .expressionLanguageSupported(ExpressionLanguageScope.FLOWFILE_ATTRIBUTES)\n            .addValidator(StandardValidators.NON_EMPTY_VALIDATOR)\n            .build();\n\n//  private Set&lt;Relationship&gt; relationships;\n    WriteRecordsResponse writeRecordsResponse;\n    Map&lt;String, String&gt; attributes;\n\n    public static final List&lt;PropertyDescriptor&gt; properties = Collections\n            .unmodifiableList(Arrays.asList(AWS_CREDENTIALS_PROVIDER_SERVICE, REGION, ACCESS_KEY, SECRET_KEY,\n                    CREDENTIALS_FILE, TIMEOUT, DB_NAME, TBL_NAME));\n\n    private volatile List&lt;PropertyDescriptor&gt; userDefinedProperties = Collections.emptyList();\n    private TimestreamRecordConverter timestreamRecordConverter;\n    \n    @Override\n    protected void init(ProcessorInitializationContext context) {\n        timestreamRecordConverter = new TimestreamRecordConverter(getLogger());\n    }\n\n    @Override\n    protected List&lt;PropertyDescriptor&gt; getSupportedPropertyDescriptors() {\n        return properties;\n    }\n\n    private Map&lt;String, String&gt; getAttributes(FlowFile flowFile, WriteRecordsResponse writeRecordsResponse) {\n        attributes = new HashMap();\n        attributes.putAll(flowFile.getAttributes());\n        attributes.put(CoreAttributes.MIME_TYPE.key(), &quot;application/json&quot;);\n        attributes.put(&quot;timestream.insert.status&quot;,\n                String.valueOf(writeRecordsResponse.responseMetadata()));\n        return attributes;\n\n    }\n\n    @Override\n    public void onTrigger(ProcessContext context, ProcessSession session) throws ProcessException {\n\n        FlowFile flowFile = session.get();\n        if (flowFile == null) {\n            return;\n        }\n\n        final long startNanos = System.nanoTime();\n\n        String dbName = context.getProperty(DB_NAME).evaluateAttributeExpressions(flowFile).getValue();\n        String tblName = context.getProperty(TBL_NAME).evaluateAttributeExpressions(flowFile).getValue();\n\n        final List&lt;Record&gt; records;\n        try {\n            final byte[] content = new byte[(int) flowFile.getSize()];\n            session.read(flowFile, in -&gt; StreamUtils.fillBuffer(in, content, true));\n            records = timestreamRecordConverter.convertJsonToTimestreamRecords(new String(content));\n\n            WriteRecordsRequest writeRecordsRequest = WriteRecordsRequest.builder()\n                    .databaseName(dbName)\n                    .tableName(tblName)\n                    .records(records)\n                    .build();\n\n            writeRecordsResponse = getClient(context).writeRecords(writeRecordsRequest);\n            flowFile = session.putAllAttributes(flowFile, getAttributes(flowFile, writeRecordsResponse));\n            session.transfer(flowFile, REL_SUCCESS);\n\n            long transmissionMillis = java.util.concurrent.TimeUnit.NANOSECONDS.toMillis(System.nanoTime() - startNanos);\n            session.getProvenanceReporter().send(flowFile, tblName, transmissionMillis);\n        } catch (Exception e) {\n            StringWriter sw = new StringWriter();\n            e.printStackTrace(new PrintWriter(sw));\n            getLogger().info(&quot;Error processing timestream record. Check stacktrace &quot; + sw);\n            session.transfer(flowFile, REL_FAILURE);\n        }\n\n    }\n}\n</code></pre>\n<p>The record gets processed successfully but when I call getClient it seems to fail on the line:</p>\n<pre><code>this.finalizeChildConfiguration(configuration)\n</code></pre>\n<p>Which is in the SdkDefaultClientBuilder class. Any help would be much appreaciated with this issue as there's very little resources to go off for this.</p>\n<p>Thanks</p>\n"},{"tags":["java","android"],"answers":[{"tags":[],"owner":{"account_id":23416689,"reputation":171,"user_id":17477546,"display_name":"Ajay Makwana"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1702054393,"creation_date":1702054393,"answer_id":77628089,"question_id":77628030,"body_markdown":"You can refer to this example from Medium for setting up dynamic themes to android app.\r\n\r\n[Implementing Dynamic Theming in Android][1]\r\n\r\n\r\n  [1]: https://medium.com/@nihitb06.dev/implementing-dynamic-theming-in-android-a9ed4f5010a8","title":"Change color of Buttons and textview on button click","body":"<p>You can refer to this example from Medium for setting up dynamic themes to android app.</p>\n<p><a href=\"https://medium.com/@nihitb06.dev/implementing-dynamic-theming-in-android-a9ed4f5010a8\" rel=\"nofollow noreferrer\">Implementing Dynamic Theming in Android</a></p>\n"}],"owner":{"account_id":27314780,"reputation":1,"user_id":20829395,"display_name":"Divyanshu saraswat"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1702150050,"answer_count":1,"score":0,"last_activity_date":1702054393,"creation_date":1702053641,"question_id":77628030,"body_markdown":"I wan to make a feature for my application Written in Android Studio Java. The feature is that I want to allow users to change the color of the application that means the button colors, textbox colors etc. The Buttons, Textview etc of my apps are using custom drawable files like buttons are using &quot;custom_button_ios_blue&quot; and textviews are using &quot;custom_text_view_ios_blue&quot; now I want to make this feature like when a user clicks on Change Theme Orange button, all the buttons and textview using these custom drawable xml files should now use &quot;custom_button_ios_orange&quot; and &quot;custom_text_view_ios_orange&quot; files and it should retain that chosen file whenever the app starts.","title":"Change color of Buttons and textview on button click","body":"<p>I wan to make a feature for my application Written in Android Studio Java. The feature is that I want to allow users to change the color of the application that means the button colors, textbox colors etc. The Buttons, Textview etc of my apps are using custom drawable files like buttons are using &quot;custom_button_ios_blue&quot; and textviews are using &quot;custom_text_view_ios_blue&quot; now I want to make this feature like when a user clicks on Change Theme Orange button, all the buttons and textview using these custom drawable xml files should now use &quot;custom_button_ios_orange&quot; and &quot;custom_text_view_ios_orange&quot; files and it should retain that chosen file whenever the app starts.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":2,"creation_date":1700252216,"post_id":77504359,"comment_id":136635953,"body_markdown":"`cityCollection = cityHashMap.values();` ← That collection belongs to cityHashMap.  You can read it, and you can delete from it, but you cannot directly add to it.  (How would the Map be affected, if that were allowed?  To which key would the new values correspond?)","body":"<code>cityCollection = cityHashMap.values();</code> ← That collection belongs to cityHashMap.  You can read it, and you can delete from it, but you cannot directly add to it.  (How would the Map be affected, if that were allowed?  To which key would the new values correspond?)"},{"owner":{"account_id":108033,"reputation":17201,"user_id":286934,"display_name":"Progman"},"score":2,"creation_date":1700252237,"post_id":77504359,"comment_id":136635958,"body_markdown":"What is the goal you are trying to accomplish? Why are you trying to sort the values inside the map? A map &quot;usually&quot; don&#39;t have an ordering. Please [edit] your question to include a more detailed description what you are trying to do.","body":"What is the goal you are trying to accomplish? Why are you trying to sort the values inside the map? A map &quot;usually&quot; don&#39;t have an ordering. Please <a href=\"https://stackoverflow.com/posts/77504359/edit\">edit</a> your question to include a more detailed description what you are trying to do."},{"owner":{"account_id":29929711,"reputation":11,"user_id":22936904,"display_name":"nslo"},"score":0,"creation_date":1700253299,"post_id":77504359,"comment_id":136636145,"body_markdown":"@VGR ah i understand, thank you, fixed it by using an ArrayList and creating a method that updates the List with the current values in the Map. Thanks again, didnt think about the &quot;Collection belongs to Map&quot; part.","body":"@VGR ah i understand, thank you, fixed it by using an ArrayList and creating a method that updates the List with the current values in the Map. Thanks again, didnt think about the &quot;Collection belongs to Map&quot; part."},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1700253511,"post_id":77504359,"comment_id":136636173,"body_markdown":"If the issue was resolved without receiving an answer, consider deleting t he q uestion.","body":"If the issue was resolved without receiving an answer, consider deleting t he q uestion."}],"answers":[{"tags":[],"owner":{"account_id":6714862,"reputation":16230,"user_id":5176992,"display_name":"Eritrean"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1700260622,"creation_date":1700253846,"answer_id":77504532,"question_id":77504359,"body_markdown":"# Stream\r\n\r\nIf you want to use a Comparator you don&#39;t realy need either your method `sortByDepartureTime` nor your class `CityComparator`. Just stream over the values and create a new collection to store the sorted cities:\r\n\r\n    private final HashMap&lt;Integer, City&gt; cityHashMap = new HashMap&lt;&gt;();\r\n\r\n    ....\r\n\r\n    Collection&lt;City&gt; sorted = cityHashMap.values()\r\n                                         .stream()\r\n                                         .sorted(Comparator.comparing(City::getCurrentTime))\r\n                                         .collect(Collectors.toList());\r\n\r\nuse reversed if you want to sort in reverse order\r\n\r\n    Collection&lt;City&gt; sorted = cityHashMap.values()\r\n                                         .stream()\r\n                                         .sorted(Comparator.comparing(City::getCurrentTime).reversed())\r\n                                         .collect(Collectors.toList());","title":"How can i sort a Collection of objects by ascending LocalTime?","body":"<h1>Stream</h1>\n<p>If you want to use a Comparator you don't realy need either your method <code>sortByDepartureTime</code> nor your class <code>CityComparator</code>. Just stream over the values and create a new collection to store the sorted cities:</p>\n<pre><code>private final HashMap&lt;Integer, City&gt; cityHashMap = new HashMap&lt;&gt;();\n\n....\n\nCollection&lt;City&gt; sorted = cityHashMap.values()\n                                     .stream()\n                                     .sorted(Comparator.comparing(City::getCurrentTime))\n                                     .collect(Collectors.toList());\n</code></pre>\n<p>use reversed if you want to sort in reverse order</p>\n<pre><code>Collection&lt;City&gt; sorted = cityHashMap.values()\n                                     .stream()\n                                     .sorted(Comparator.comparing(City::getCurrentTime).reversed())\n                                     .collect(Collectors.toList());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":322981,"reputation":310744,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1702054318,"creation_date":1700260220,"answer_id":77504928,"question_id":77504359,"body_markdown":"The [Answer by Eritrean][1] would be my preferred solution, using a stream. But if you are not yet comfortable with streams, below is the older sort of approach.\r\n\r\n## Don’t mess with map’s collected values\r\n\r\nIn your code:\r\n\r\n    cityCollection.clear();\r\n    cityCollection.addAll( sortedList );\r\n\r\n… `cityCollection` represents the values inside the map. That collection returned by `Map#values` is meant to be read but not written. \r\n\r\nInstead, copy that elements of that collection to another collection. You did so correctly in this line:\r\n\r\n    List&lt;City&gt; sortedList = new ArrayList&lt;&gt;( cityCollection );\r\n\r\nYou are then at liberty to manipulate that new `List`. \r\n\r\n## `List#sort` with a `Comparator`\r\n\r\nAs explained by Eritrean, you can define a `Comparator` separate from your `City` class. \r\n\r\nLet&#39;s define a [record][2] as the `City` class for our example.\r\n\r\n```java\r\nrecord City( String name , LocalTime localTime ) { }\r\n```\r\n\r\nMake some sample data.\r\n\r\n```java\r\nMap &lt; Integer, City &gt; map =\r\n        Map.of (\r\n                11 , new City ( &quot;Munich&quot; , LocalTime.parse ( &quot;23:00&quot; ) ) ,\r\n                22 , new City ( &quot;New York&quot; , LocalTime.parse ( &quot;07:00&quot; ) ) ,\r\n                33 , new City ( &quot;Paris&quot; , LocalTime.parse ( &quot;19:00&quot; ) ) ,\r\n                44 , new City ( &quot;London&quot; , LocalTime.parse ( &quot;13:00&quot; ) )\r\n        );\r\n```\r\n\r\nExtract a collection of the values from that map, just the `City` objects, by calling [`Map#values`][3]. Pass that collection to the constructor of an `ArrayList`, a collection type we know we can sort.\r\n\r\n```java\r\nList &lt; City &gt; sorted = new ArrayList &lt;&gt; ( map.values ( ) );\r\n```\r\n\r\nNow we can perform the sort. \r\n\r\nPass a [method reference][4] (`City :: localTime`) to the convenience method [`Comparator.comparing`][5] to produce a [`Comparator`][6] object. \r\n\r\n    Comparator.comparing ( City :: localTime )\r\n\r\nThis comparator works because the [`LocalTime`][7] class implements [`Comparable`][8]. The `LocalTime` objects carry a [`compareTo`][9] method to be using in sorting.\r\n\r\nIn turn we pass that `Comparator` object to the [`List#sort`][10] method.\r\n\r\n```java\r\nsorted.sort ( Comparator.comparing ( City :: localTime ) );\r\n```\r\n\r\nDump to console.\r\n\r\n```java\r\nSystem.out.println ( &quot;sorted.toString() = &quot; + sorted );\r\n```\r\n\r\nIn the result, we see they came out in [the correct order][11].\r\n\r\n&gt;sorted.toString() = [City[name=New York, localTime=07:00], City[name=London, localTime=13:00], City[name=Paris, localTime=19:00], City[name=Munich, localTime=23:00]]\r\n\r\nIf returning the result from a method, generally best to (a) return an [unmodifiable][12] collection, and (b) declare the return type as the more general type [`SequencedCollection`][13] (in Java 21+).  \r\n\r\n\r\n  [1]: https://stackoverflow.com/a/77504532/642706\r\n  [2]: https://openjdk.org/jeps/395\r\n  [3]: https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Map.html#values()\r\n  [4]: https://docs.oracle.com/javase/tutorial/java/javaOO/methodreferences.html\r\n  [5]: https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Comparator.html#comparing(java.util.function.Function)\r\n  [6]: https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Comparator.html\r\n  [7]: https://docs.oracle.com/en/java/javase/21/docs/api//java.base/java/time/LocalTime.html\r\n  [8]: https://docs.oracle.com/en/java/javase/21/docs/api//java.base/java/lang/Comparable.html\r\n  [9]: https://docs.oracle.com/en/java/javase/21/docs/api//java.base/java/time/LocalTime.html#compareTo(java.time.LocalTime)\r\n  [10]: https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html#sort(java.util.Comparator)\r\n  [11]: https://en.wikipedia.org/wiki/New_York%E2%80%93London%E2%80%93Paris%E2%80%93Munich\r\n  [12]: https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html#unmodifiable\r\n  [13]: https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedCollection.html","title":"How can i sort a Collection of objects by ascending LocalTime?","body":"<p>The <a href=\"https://stackoverflow.com/a/77504532/642706\">Answer by Eritrean</a> would be my preferred solution, using a stream. But if you are not yet comfortable with streams, below is the older sort of approach.</p>\n<h2>Don’t mess with map’s collected values</h2>\n<p>In your code:</p>\n<pre><code>cityCollection.clear();\ncityCollection.addAll( sortedList );\n</code></pre>\n<p>… <code>cityCollection</code> represents the values inside the map. That collection returned by <code>Map#values</code> is meant to be read but not written.</p>\n<p>Instead, copy that elements of that collection to another collection. You did so correctly in this line:</p>\n<pre><code>List&lt;City&gt; sortedList = new ArrayList&lt;&gt;( cityCollection );\n</code></pre>\n<p>You are then at liberty to manipulate that new <code>List</code>.</p>\n<h2><code>List#sort</code> with a <code>Comparator</code></h2>\n<p>As explained by Eritrean, you can define a <code>Comparator</code> separate from your <code>City</code> class.</p>\n<p>Let's define a <a href=\"https://openjdk.org/jeps/395\" rel=\"nofollow noreferrer\">record</a> as the <code>City</code> class for our example.</p>\n<pre class=\"lang-java prettyprint-override\"><code>record City( String name , LocalTime localTime ) { }\n</code></pre>\n<p>Make some sample data.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Map &lt; Integer, City &gt; map =\n        Map.of (\n                11 , new City ( &quot;Munich&quot; , LocalTime.parse ( &quot;23:00&quot; ) ) ,\n                22 , new City ( &quot;New York&quot; , LocalTime.parse ( &quot;07:00&quot; ) ) ,\n                33 , new City ( &quot;Paris&quot; , LocalTime.parse ( &quot;19:00&quot; ) ) ,\n                44 , new City ( &quot;London&quot; , LocalTime.parse ( &quot;13:00&quot; ) )\n        );\n</code></pre>\n<p>Extract a collection of the values from that map, just the <code>City</code> objects, by calling <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Map.html#values()\" rel=\"nofollow noreferrer\"><code>Map#values</code></a>. Pass that collection to the constructor of an <code>ArrayList</code>, a collection type we know we can sort.</p>\n<pre class=\"lang-java prettyprint-override\"><code>List &lt; City &gt; sorted = new ArrayList &lt;&gt; ( map.values ( ) );\n</code></pre>\n<p>Now we can perform the sort.</p>\n<p>Pass a <a href=\"https://docs.oracle.com/javase/tutorial/java/javaOO/methodreferences.html\" rel=\"nofollow noreferrer\">method reference</a> (<code>City :: localTime</code>) to the convenience method <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Comparator.html#comparing(java.util.function.Function)\" rel=\"nofollow noreferrer\"><code>Comparator.comparing</code></a> to produce a <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Comparator.html\" rel=\"nofollow noreferrer\"><code>Comparator</code></a> object.</p>\n<pre><code>Comparator.comparing ( City :: localTime )\n</code></pre>\n<p>This comparator works because the <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api//java.base/java/time/LocalTime.html\" rel=\"nofollow noreferrer\"><code>LocalTime</code></a> class implements <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api//java.base/java/lang/Comparable.html\" rel=\"nofollow noreferrer\"><code>Comparable</code></a>. The <code>LocalTime</code> objects carry a <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api//java.base/java/time/LocalTime.html#compareTo(java.time.LocalTime)\" rel=\"nofollow noreferrer\"><code>compareTo</code></a> method to be using in sorting.</p>\n<p>In turn we pass that <code>Comparator</code> object to the <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html#sort(java.util.Comparator)\" rel=\"nofollow noreferrer\"><code>List#sort</code></a> method.</p>\n<pre class=\"lang-java prettyprint-override\"><code>sorted.sort ( Comparator.comparing ( City :: localTime ) );\n</code></pre>\n<p>Dump to console.</p>\n<pre class=\"lang-java prettyprint-override\"><code>System.out.println ( &quot;sorted.toString() = &quot; + sorted );\n</code></pre>\n<p>In the result, we see they came out in <a href=\"https://en.wikipedia.org/wiki/New_York%E2%80%93London%E2%80%93Paris%E2%80%93Munich\" rel=\"nofollow noreferrer\">the correct order</a>.</p>\n<blockquote>\n<p>sorted.toString() = [City[name=New York, localTime=07:00], City[name=London, localTime=13:00], City[name=Paris, localTime=19:00], City[name=Munich, localTime=23:00]]</p>\n</blockquote>\n<p>If returning the result from a method, generally best to (a) return an <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html#unmodifiable\" rel=\"nofollow noreferrer\">unmodifiable</a> collection, and (b) declare the return type as the more general type <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedCollection.html\" rel=\"nofollow noreferrer\"><code>SequencedCollection</code></a> (in Java 21+).</p>\n"}],"owner":{"account_id":29929711,"reputation":11,"user_id":22936904,"display_name":"nslo"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":70,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":77504928,"answer_count":2,"score":0,"last_activity_date":1702054318,"creation_date":1700251504,"question_id":77504359,"body_markdown":"Currently i am trying to do it using a comparator, the &quot;getCurrentTime()&quot; method return a LocalTime. \r\n```\r\n  private final HashMap&lt;Integer, City&gt; cityHashMap = new HashMap&lt;&gt;();\r\n  private final Collection&lt;City&gt; cityCollection = cityHashMap.values();\r\n\r\n\r\n  public void sortByDepartureTime() {\r\n    List&lt;City&gt; sortedList = new ArrayList&lt;&gt;(cityCollection);\r\n    sortedList.sort(new CityComparator());\r\n\r\n    cityCollection.clear();\r\n    cityCollection.addAll(sortedList);\r\n  }\r\n\r\n\r\n  public static class CityComparator implements Comparator&lt;City&gt; {\r\n    @Override\r\n    public int compare(City o1, City o2) {\r\n      return o1.getCurrentTime().compareTo(o2.getCurrentTime());\r\n    }\r\n  }\r\n```\r\n\r\n\r\n I am getting a\r\n &gt;Exception in thread &quot;main&quot; java.lang.UnsupportedOperationException\r\n\r\ncityCollection.addAll(sortedList);\r\n\r\nI tried using an ArrayList instead of the Collection, but that raised the issue of the ArrayList not being up to date with the HashMap values.","title":"How can i sort a Collection of objects by ascending LocalTime?","body":"<p>Currently i am trying to do it using a comparator, the &quot;getCurrentTime()&quot; method return a LocalTime.</p>\n<pre><code>  private final HashMap&lt;Integer, City&gt; cityHashMap = new HashMap&lt;&gt;();\n  private final Collection&lt;City&gt; cityCollection = cityHashMap.values();\n\n\n  public void sortByDepartureTime() {\n    List&lt;City&gt; sortedList = new ArrayList&lt;&gt;(cityCollection);\n    sortedList.sort(new CityComparator());\n\n    cityCollection.clear();\n    cityCollection.addAll(sortedList);\n  }\n\n\n  public static class CityComparator implements Comparator&lt;City&gt; {\n    @Override\n    public int compare(City o1, City o2) {\n      return o1.getCurrentTime().compareTo(o2.getCurrentTime());\n    }\n  }\n</code></pre>\n<p>I am getting a</p>\n<blockquote>\n<p>Exception in thread &quot;main&quot; java.lang.UnsupportedOperationException</p>\n</blockquote>\n<p>cityCollection.addAll(sortedList);</p>\n<p>I tried using an ArrayList instead of the Collection, but that raised the issue of the ArrayList not being up to date with the HashMap values.</p>\n"},{"tags":["java","arrays","arraylist","methods"],"comments":[{"owner":{"account_id":2698782,"reputation":38625,"user_id":2330053,"display_name":"Idle_Mind"},"score":1,"creation_date":1701986633,"post_id":77623256,"comment_id":136845852,"body_markdown":"What&#39;s stopping you from inspecting `str` to see if it meets your rules? You can use [String.indexOf()](https://www.w3schools.com/java/ref_string_indexof.asp) to enforce rules #3 and #4.  Just don&#39;t output the string if it doesn&#39;t meet all criteria...","body":"What&#39;s stopping you from inspecting <code>str</code> to see if it meets your rules? You can use <a href=\"https://www.w3schools.com/java/ref_string_indexof.asp\" rel=\"nofollow noreferrer\">String.indexOf()</a> to enforce rules #3 and #4.  Just don&#39;t output the string if it doesn&#39;t meet all criteria..."},{"owner":{"display_name":"user22921001"},"score":0,"creation_date":1701986756,"post_id":77623256,"comment_id":136845880,"body_markdown":"honestly i didn&#39;t know how to use it or what it is. I have exhausted the notions that the teacher gave and have been on this all day trying different loops and stuff. i will read up on that thanks.","body":"honestly i didn&#39;t know how to use it or what it is. I have exhausted the notions that the teacher gave and have been on this all day trying different loops and stuff. i will read up on that thanks."},{"owner":{"account_id":2640559,"reputation":83,"user_id":2284314,"display_name":"JDev"},"score":1,"creation_date":1701994242,"post_id":77623256,"comment_id":136846675,"body_markdown":"Parenthesis placement is really important in these scenarios. I&#39;ll update my answer to include how it evaluates.","body":"Parenthesis placement is really important in these scenarios. I&#39;ll update my answer to include how it evaluates."},{"owner":{"account_id":8306545,"reputation":47686,"user_id":6243352,"display_name":"ggorlen"},"score":0,"creation_date":1702052804,"post_id":77623256,"comment_id":136854169,"body_markdown":"Please share your code attempt as a [mcve].","body":"Please share your code attempt as a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}],"answers":[{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1702054245,"creation_date":1701989877,"answer_id":77623482,"question_id":77623256,"body_markdown":"Your code is correct, in terms of calculating permutations.\r\n\r\nYou&#39;ll just need to check the values, before adding the _String_.\r\n\r\nHere is an example.\r\n\r\n```java\r\nList&lt;String&gt; list = new ArrayList&lt;&gt;();\r\nString s;\r\nchar w, x, y, z;\r\nfor (w = &#39;a&#39;; w &lt;= &#39;d&#39;; w++)\r\n    for (x = &#39;a&#39;; x &lt;= &#39;d&#39;; x++)\r\n        for (y = &#39;a&#39;; y &lt;= &#39;d&#39;; y++)\r\n            for (z = &#39;a&#39;; z &lt;= &#39;d&#39;; z++) {\r\n                s = &quot;%s%s%s%s&quot;.formatted(w, x, y, z);\r\n                if (s.indexOf(&#39;a&#39;) != -1 &amp;&amp; s.indexOf(&#39;d&#39;) != -1) continue;\r\n                if (w == &#39;b&#39; &amp;&amp; x != &#39;a&#39;) continue;\r\n                if (x == &#39;b&#39; &amp;&amp; y != &#39;a&#39;) continue;\r\n                if (y == &#39;b&#39; &amp;&amp; z != &#39;a&#39;) continue;\r\n                if (z == &#39;b&#39;) continue;\r\n                list.add(s);\r\n            }\r\n```\r\n\r\nOutput\r\n\r\n```none\r\naaaa aaac aaba aaca aacc abaa abac acaa acac acba \r\nacca accc baaa baac baba baca bacc caaa caac caba \r\ncaca cacc cbaa cbac ccaa ccac ccba ccca cccc cccd \r\nccdc ccdd cdcc cdcd cddc cddd dccc dccd dcdc dcdd \r\nddcc ddcd dddc dddd \r\n```","title":"how to find a pattern in java strings","body":"<p>Your code is correct, in terms of calculating permutations.</p>\n<p>You'll just need to check the values, before adding the <em>String</em>.</p>\n<p>Here is an example.</p>\n<pre class=\"lang-java prettyprint-override\"><code>List&lt;String&gt; list = new ArrayList&lt;&gt;();\nString s;\nchar w, x, y, z;\nfor (w = 'a'; w &lt;= 'd'; w++)\n    for (x = 'a'; x &lt;= 'd'; x++)\n        for (y = 'a'; y &lt;= 'd'; y++)\n            for (z = 'a'; z &lt;= 'd'; z++) {\n                s = &quot;%s%s%s%s&quot;.formatted(w, x, y, z);\n                if (s.indexOf('a') != -1 &amp;&amp; s.indexOf('d') != -1) continue;\n                if (w == 'b' &amp;&amp; x != 'a') continue;\n                if (x == 'b' &amp;&amp; y != 'a') continue;\n                if (y == 'b' &amp;&amp; z != 'a') continue;\n                if (z == 'b') continue;\n                list.add(s);\n            }\n</code></pre>\n<p>Output</p>\n<pre class=\"lang-none prettyprint-override\"><code>aaaa aaac aaba aaca aacc abaa abac acaa acac acba \nacca accc baaa baac baba baca bacc caaa caac caba \ncaca cacc cbaa cbac ccaa ccac ccba ccca cccc cccd \nccdc ccdd cdcc cdcd cddc cddd dccc dccd dcdc dcdd \nddcc ddcd dddc dddd \n</code></pre>\n"},{"tags":[],"owner":{"account_id":2640559,"reputation":83,"user_id":2284314,"display_name":"JDev"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1701994350,"creation_date":1701992795,"answer_id":77623610,"question_id":77623256,"body_markdown":"You are on the right track, as others have stated you just need to validate the output string to ensure it meets your criteria.\r\n\r\n```\r\npublic class Main {\r\n    static StringBuilder valid = new StringBuilder();\r\n    static StringBuilder invalid = new StringBuilder();\r\n\r\n    // START Tracking / formatting vars.\r\n    static int permsPerRow = 10;\r\n    static int invalidNumsAdded = 0;\r\n    static int validPerms = 0;\r\n    static int invalidPerms = 0;\r\n    // END Tracking / formatting vars.\r\n\r\n    public static void main(String[] args) {\r\n        calculatePerms();\r\n    }\r\n\r\n    private static void calculatePerms() {\r\n        char[] chars = {&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;};\r\n        int numsAdded = 0;\r\n        for(int i = 0; i &lt; chars.length; i++) {\r\n            for(int j = 0; j &lt; chars.length; j++) {\r\n                for(int k = 0; k &lt; chars.length; k++) {\r\n                    for(int z = 0; z &lt; chars.length; z++) {\r\n                        // Unsure why, but having the last char in the array be the first mutation bothered me, so\r\n                        // I reversed that.\r\n                        String str = chars[z]+&quot;&quot;+chars[k]+&quot;&quot;+chars[j]+&quot;&quot;+chars[i];\r\n                        // We have the string now, we just need to validate it against the provided rules.\r\n                        if(validString(str)) {\r\n                            // I added the chunk below for formatting, this can be ignored.\r\n                            if(numsAdded &gt;= permsPerRow) {\r\n                                valid.append(&quot;\\n&quot;);\r\n                                numsAdded = 0;\r\n                            }\r\n                            // It&#39;s been validated, I append it to the valid StringBuilder.\r\n                            valid.append(str+&quot; &quot;);\r\n                            validPerms++;\r\n                            numsAdded++;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        System.out.println(&quot;Valid Perms: &quot;+validPerms);\r\n        System.out.println(valid.toString()+&quot;\\n&quot;);\r\n        System.out.println(&quot;Invalid Perms: &quot;+invalidPerms);\r\n        System.out.println(invalid.toString());\r\n    }\r\n\r\n    private static boolean validString(String str) {\r\n        // a and d can&#39;t be in the same string\r\n        // b always has to be followed by a\r\n        if(str.toLowerCase().contains(&quot;a&quot;) &amp;&amp; str.toLowerCase().contains(&quot;d&quot;)) {\r\n            logInvalid(str);\r\n            return false;\r\n        }\r\n        char[] strChars = str.toCharArray();\r\n\r\n        for(int i = 0; i &lt; strChars.length; i++) {\r\n            if(strChars[i] == &#39;b&#39;) {\r\n                // Check to make sure b isn&#39;t the last char in the sequence. If it is, then &#39;a&#39; can&#39;t follow it,\r\n                // and it&#39;s an invalid permutation.\r\n                if(i+1 &gt; strChars.length-1) {\r\n                    logInvalid(str);\r\n                    return false;\r\n                }\r\n                // If the char following b isn&#39;t a then it&#39;s not a valid perm.\r\n                if(strChars[i+1] != &#39;a&#39;) {\r\n                    logInvalid(str);\r\n                    return false;\r\n                }\r\n            }\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    // I added an invalid string builder as well, to track the number of invalid combinations, mostly to spot check\r\n    // and ensure the &#39;invalid&#39; permutations were actually breaking the rules.\r\n    private static void logInvalid(String str) {\r\n        if(invalidNumsAdded &gt;= permsPerRow) {\r\n            invalid.append(&quot;\\n&quot;);\r\n            invalidNumsAdded = 0;\r\n        }\r\n        invalid.append(str+&quot; &quot;);\r\n        invalidPerms++;\r\n        invalidNumsAdded++;\r\n    }\r\n}\r\n```\r\n\r\nWhich results in:\r\n```\r\nValid Perms: 44\r\naaaa baaa caaa abaa cbaa acaa ccaa aaba baba caba \r\nacba ccba aaca baca caca acca ccca aaac baac caac \r\nabac cbac acac ccac aacc bacc cacc accc cccc dccc \r\ncdcc ddcc ccdc dcdc cddc dddc cccd dccd cdcd ddcd \r\nccdd dcdd cddd dddd \r\n\r\nInvalid Perms: 212\r\ndaaa bbaa dbaa bcaa dcaa adaa bdaa cdaa ddaa daba \r\nabba bbba cbba dbba bcba dcba adba bdba cdba ddba \r\ndaca abca bbca cbca dbca bcca dcca adca bdca cdca \r\nddca aada bada cada dada abda bbda cbda dbda acda \r\nbcda ccda dcda adda bdda cdda ddda aaab baab caab \r\ndaab abab bbab cbab dbab acab bcab ccab dcab adab \r\nbdab cdab ddab aabb babb cabb dabb abbb bbbb cbbb \r\ndbbb acbb bcbb ccbb dcbb adbb bdbb cdbb ddbb aacb \r\nbacb cacb dacb abcb bbcb cbcb dbcb accb bccb cccb \r\ndccb adcb bdcb cdcb ddcb aadb badb cadb dadb abdb \r\nbbdb cbdb dbdb acdb bcdb ccdb dcdb addb bddb cddb \r\ndddb daac bbac dbac bcac dcac adac bdac cdac ddac \r\naabc babc cabc dabc abbc bbbc cbbc dbbc acbc bcbc \r\nccbc dcbc adbc bdbc cdbc ddbc dacc abcc bbcc cbcc \r\ndbcc bccc adcc bdcc aadc badc cadc dadc abdc bbdc \r\ncbdc dbdc acdc bcdc addc bddc aaad baad caad daad \r\nabad bbad cbad dbad acad bcad ccad dcad adad bdad \r\ncdad ddad aabd babd cabd dabd abbd bbbd cbbd dbbd \r\nacbd bcbd ccbd dcbd adbd bdbd cdbd ddbd aacd bacd \r\ncacd dacd abcd bbcd cbcd dbcd accd bccd adcd bdcd \r\naadd badd cadd dadd abdd bbdd cbdd dbdd acdd bcdd \r\naddd bddd\r\n```\r\n\r\n\r\nUpdate for the evaluation issue in the most recent edit:\r\n```\r\n// Since 2 and 3 evaluate to true (b is present, and the last index of b + 1 is not a (it&#39;s c), this check passes.\r\n//           (1)                ||          (2                  &amp;&amp;                 3)\r\nif( (str.lastIndexOf(&#39;b&#39;) == 3) || (str.lastIndexOf(&quot;b&quot;) != -1) &amp;&amp; (str.charAt(str.lastIndexOf(&#39;b&#39;) + 1) != &#39;a&#39;)) {\r\n// remove these parenthesis   ^    ^  and it works.\r\n}\r\n```","title":"how to find a pattern in java strings","body":"<p>You are on the right track, as others have stated you just need to validate the output string to ensure it meets your criteria.</p>\n<pre><code>public class Main {\n    static StringBuilder valid = new StringBuilder();\n    static StringBuilder invalid = new StringBuilder();\n\n    // START Tracking / formatting vars.\n    static int permsPerRow = 10;\n    static int invalidNumsAdded = 0;\n    static int validPerms = 0;\n    static int invalidPerms = 0;\n    // END Tracking / formatting vars.\n\n    public static void main(String[] args) {\n        calculatePerms();\n    }\n\n    private static void calculatePerms() {\n        char[] chars = {'a', 'b', 'c', 'd'};\n        int numsAdded = 0;\n        for(int i = 0; i &lt; chars.length; i++) {\n            for(int j = 0; j &lt; chars.length; j++) {\n                for(int k = 0; k &lt; chars.length; k++) {\n                    for(int z = 0; z &lt; chars.length; z++) {\n                        // Unsure why, but having the last char in the array be the first mutation bothered me, so\n                        // I reversed that.\n                        String str = chars[z]+&quot;&quot;+chars[k]+&quot;&quot;+chars[j]+&quot;&quot;+chars[i];\n                        // We have the string now, we just need to validate it against the provided rules.\n                        if(validString(str)) {\n                            // I added the chunk below for formatting, this can be ignored.\n                            if(numsAdded &gt;= permsPerRow) {\n                                valid.append(&quot;\\n&quot;);\n                                numsAdded = 0;\n                            }\n                            // It's been validated, I append it to the valid StringBuilder.\n                            valid.append(str+&quot; &quot;);\n                            validPerms++;\n                            numsAdded++;\n                        }\n                    }\n                }\n            }\n        }\n        System.out.println(&quot;Valid Perms: &quot;+validPerms);\n        System.out.println(valid.toString()+&quot;\\n&quot;);\n        System.out.println(&quot;Invalid Perms: &quot;+invalidPerms);\n        System.out.println(invalid.toString());\n    }\n\n    private static boolean validString(String str) {\n        // a and d can't be in the same string\n        // b always has to be followed by a\n        if(str.toLowerCase().contains(&quot;a&quot;) &amp;&amp; str.toLowerCase().contains(&quot;d&quot;)) {\n            logInvalid(str);\n            return false;\n        }\n        char[] strChars = str.toCharArray();\n\n        for(int i = 0; i &lt; strChars.length; i++) {\n            if(strChars[i] == 'b') {\n                // Check to make sure b isn't the last char in the sequence. If it is, then 'a' can't follow it,\n                // and it's an invalid permutation.\n                if(i+1 &gt; strChars.length-1) {\n                    logInvalid(str);\n                    return false;\n                }\n                // If the char following b isn't a then it's not a valid perm.\n                if(strChars[i+1] != 'a') {\n                    logInvalid(str);\n                    return false;\n                }\n            }\n        }\n\n        return true;\n    }\n\n    // I added an invalid string builder as well, to track the number of invalid combinations, mostly to spot check\n    // and ensure the 'invalid' permutations were actually breaking the rules.\n    private static void logInvalid(String str) {\n        if(invalidNumsAdded &gt;= permsPerRow) {\n            invalid.append(&quot;\\n&quot;);\n            invalidNumsAdded = 0;\n        }\n        invalid.append(str+&quot; &quot;);\n        invalidPerms++;\n        invalidNumsAdded++;\n    }\n}\n</code></pre>\n<p>Which results in:</p>\n<pre><code>Valid Perms: 44\naaaa baaa caaa abaa cbaa acaa ccaa aaba baba caba \nacba ccba aaca baca caca acca ccca aaac baac caac \nabac cbac acac ccac aacc bacc cacc accc cccc dccc \ncdcc ddcc ccdc dcdc cddc dddc cccd dccd cdcd ddcd \nccdd dcdd cddd dddd \n\nInvalid Perms: 212\ndaaa bbaa dbaa bcaa dcaa adaa bdaa cdaa ddaa daba \nabba bbba cbba dbba bcba dcba adba bdba cdba ddba \ndaca abca bbca cbca dbca bcca dcca adca bdca cdca \nddca aada bada cada dada abda bbda cbda dbda acda \nbcda ccda dcda adda bdda cdda ddda aaab baab caab \ndaab abab bbab cbab dbab acab bcab ccab dcab adab \nbdab cdab ddab aabb babb cabb dabb abbb bbbb cbbb \ndbbb acbb bcbb ccbb dcbb adbb bdbb cdbb ddbb aacb \nbacb cacb dacb abcb bbcb cbcb dbcb accb bccb cccb \ndccb adcb bdcb cdcb ddcb aadb badb cadb dadb abdb \nbbdb cbdb dbdb acdb bcdb ccdb dcdb addb bddb cddb \ndddb daac bbac dbac bcac dcac adac bdac cdac ddac \naabc babc cabc dabc abbc bbbc cbbc dbbc acbc bcbc \nccbc dcbc adbc bdbc cdbc ddbc dacc abcc bbcc cbcc \ndbcc bccc adcc bdcc aadc badc cadc dadc abdc bbdc \ncbdc dbdc acdc bcdc addc bddc aaad baad caad daad \nabad bbad cbad dbad acad bcad ccad dcad adad bdad \ncdad ddad aabd babd cabd dabd abbd bbbd cbbd dbbd \nacbd bcbd ccbd dcbd adbd bdbd cdbd ddbd aacd bacd \ncacd dacd abcd bbcd cbcd dbcd accd bccd adcd bdcd \naadd badd cadd dadd abdd bbdd cbdd dbdd acdd bcdd \naddd bddd\n</code></pre>\n<p>Update for the evaluation issue in the most recent edit:</p>\n<pre><code>// Since 2 and 3 evaluate to true (b is present, and the last index of b + 1 is not a (it's c), this check passes.\n//           (1)                ||          (2                  &amp;&amp;                 3)\nif( (str.lastIndexOf('b') == 3) || (str.lastIndexOf(&quot;b&quot;) != -1) &amp;&amp; (str.charAt(str.lastIndexOf('b') + 1) != 'a')) {\n// remove these parenthesis   ^    ^  and it works.\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5941380,"reputation":4114,"user_id":4672460,"accept_rate":100,"display_name":"Selaka Nanayakkara"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1702022264,"creation_date":1702022264,"answer_id":77625108,"question_id":77623256,"body_markdown":"    import java.util.ArrayList;\r\n    import java.util.List;\r\n    \r\n    public class StringCombinations {\r\n        public static void main(String[] args) {\r\n            List&lt;String&gt; combinations = generateCombinations();\r\n            \r\n            for (String combination : combinations) {\r\n                System.out.println(combination);\r\n            }\r\n        }\r\n    \r\n        private static List&lt;String&gt; generateCombinations() {\r\n            List&lt;String&gt; combinations = new ArrayList&lt;&gt;();\r\n    \r\n          \r\n            for (char firstChar : &quot;abcd&quot;.toCharArray()) {\r\n                for (char secondChar : &quot;abcd&quot;.toCharArray()) {\r\n                    for (char thirdChar : &quot;abcd&quot;.toCharArray()) {\r\n                        for (char fourthChar : &quot;abcd&quot;.toCharArray()) {\r\n                          \r\n                            if (firstChar != &#39;d&#39; &amp;&amp; fourthChar != &#39;a&#39; &amp;&amp; (secondChar != &#39;b&#39; || thirdChar == &#39;a&#39;)) {\r\n\r\n                                String combination = &quot;&quot; + firstChar + secondChar + thirdChar + fourthChar;\r\n                                combinations.add(combination);\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n    \r\n            return combinations;\r\n        }\r\n    }\r\n\r\n\r\n&gt; Please find the working sample [here][1]\r\n\r\n\r\n  [1]: https://onlinegdb.com/erOVQ0jm-","title":"how to find a pattern in java strings","body":"<pre><code>import java.util.ArrayList;\nimport java.util.List;\n\npublic class StringCombinations {\n    public static void main(String[] args) {\n        List&lt;String&gt; combinations = generateCombinations();\n        \n        for (String combination : combinations) {\n            System.out.println(combination);\n        }\n    }\n\n    private static List&lt;String&gt; generateCombinations() {\n        List&lt;String&gt; combinations = new ArrayList&lt;&gt;();\n\n      \n        for (char firstChar : &quot;abcd&quot;.toCharArray()) {\n            for (char secondChar : &quot;abcd&quot;.toCharArray()) {\n                for (char thirdChar : &quot;abcd&quot;.toCharArray()) {\n                    for (char fourthChar : &quot;abcd&quot;.toCharArray()) {\n                      \n                        if (firstChar != 'd' &amp;&amp; fourthChar != 'a' &amp;&amp; (secondChar != 'b' || thirdChar == 'a')) {\n\n                            String combination = &quot;&quot; + firstChar + secondChar + thirdChar + fourthChar;\n                            combinations.add(combination);\n                        }\n                    }\n                }\n            }\n        }\n\n        return combinations;\n    }\n}\n</code></pre>\n<blockquote>\n<p>Please find the working sample <a href=\"https://onlinegdb.com/erOVQ0jm-\" rel=\"nofollow noreferrer\">here</a></p>\n</blockquote>\n"}],"owner":{"display_name":"user22921001"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":2,"is_answered":false,"view_count":120,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":3,"score":0,"last_activity_date":1702054245,"creation_date":1701985859,"question_id":77623256,"body_markdown":"i am very new to coding so sorry if my questions are dumb. I was asked by my teacher to write a java program that will show all the possible combinations of the chars &#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39; into strings but with these rules:\r\n\r\n1. the strings have to be 4 characters long.\r\n2. letters can repeat in the same string.\r\n3. the characters &#39;a&#39; and &#39;d&#39; can&#39;t be in the same string.\r\n4. the character &#39;b&#39; ALWAYS has to be followed by &#39;a&#39;.\r\n\r\ni started to write a program but i&#39;m stumped.\r\n i have tried using ArrayLists but i couldn&#39;t get it to work. \r\n\r\n\r\n","title":"how to find a pattern in java strings","body":"<p>i am very new to coding so sorry if my questions are dumb. I was asked by my teacher to write a java program that will show all the possible combinations of the chars 'a', 'b', 'c', 'd' into strings but with these rules:</p>\n<ol>\n<li>the strings have to be 4 characters long.</li>\n<li>letters can repeat in the same string.</li>\n<li>the characters 'a' and 'd' can't be in the same string.</li>\n<li>the character 'b' ALWAYS has to be followed by 'a'.</li>\n</ol>\n<p>i started to write a program but i'm stumped.\ni have tried using ArrayLists but i couldn't get it to work.</p>\n"},{"tags":["java","apache-spark","pyspark","apache-spark-sql"],"comments":[{"owner":{"account_id":1145527,"reputation":3387,"user_id":1128392,"accept_rate":90,"display_name":"erwaman"},"score":1,"creation_date":1515598653,"post_id":38753898,"comment_id":83362016,"body_markdown":"The answers at https://stackoverflow.com/questions/37471346/automatically-and-elegantly-flatten-dataframe-in-spark-sql were also helpful.","body":"The answers at <a href=\"https://stackoverflow.com/questions/37471346/automatically-and-elegantly-flatten-dataframe-in-spark-sql\" title=\"automatically and elegantly flatten dataframe in spark sql\">stackoverflow.com/questions/37471346/&hellip;</a> were also helpful."},{"owner":{"account_id":16371898,"reputation":1,"user_id":11824997,"display_name":"TobiStraub"},"score":1,"creation_date":1563888334,"post_id":38753898,"comment_id":100844115,"body_markdown":"a nice solution is also presented here: https://stackoverflow.com/questions/47285871/exploded-struct-in-spark?rq=1","body":"a nice solution is also presented here: <a href=\"https://stackoverflow.com/questions/47285871/exploded-struct-in-spark?rq=1\" title=\"exploded struct in spark\">stackoverflow.com/questions/47285871/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"display_name":"user6022341"},"down_vote_count":2,"up_vote_count":132,"is_accepted":true,"score":130,"last_activity_date":1470261663,"creation_date":1470260035,"answer_id":38754012,"question_id":38753898,"body_markdown":"This should work in Spark 1.6 or later:\r\n\r\n    df.select(df.col(&quot;data.*&quot;))\r\n\r\nor\r\n\r\n\r\n    df.select(df.col(&quot;data.id&quot;), df.col(&quot;data.keyNote&quot;), df.col(&quot;data.details&quot;))","title":"How to flatten a struct in a Spark dataframe?","body":"<p>This should work in Spark 1.6 or later:</p>\n\n<pre><code>df.select(df.col(\"data.*\"))\n</code></pre>\n\n<p>or</p>\n\n<pre><code>df.select(df.col(\"data.id\"), df.col(\"data.keyNote\"), df.col(\"data.details\"))\n</code></pre>\n"},{"tags":[],"owner":{"account_id":201101,"reputation":21953,"user_id":447344,"accept_rate":44,"display_name":"Thomas Decaux"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1552652608,"creation_date":1491940435,"answer_id":43355059,"question_id":38753898,"body_markdown":"An easy way is to use SQL, you could build a SQL query string to alias nested column as flat ones.\r\n\r\n - Retrieve data-frame schema (`df.schema()`) \r\n - Transform schema to SQL\r\n    (for (field : `schema().fields()`) ...\r\n -  Query:\r\n\r\n        val newDF = sqlContext.sql(&quot;SELECT &quot; + sqlGenerated + &quot; FROM source&quot;)\r\n\r\n \r\n\r\n\r\n\r\nHere is [an example in Java][1].\r\n\r\n(I prefer SQL way, so you can easily test it on Spark-shell and it&#39;s cross-language).\r\n\r\n\r\n  [1]: https://gist.github.com/ebuildy/3de0e2855498e5358e4eed1a4f72ea48","title":"How to flatten a struct in a Spark dataframe?","body":"<p>An easy way is to use SQL, you could build a SQL query string to alias nested column as flat ones.</p>\n\n<ul>\n<li>Retrieve data-frame schema (<code>df.schema()</code>) </li>\n<li>Transform schema to SQL\n(for (field : <code>schema().fields()</code>) ...</li>\n<li><p>Query:</p>\n\n<pre><code>val newDF = sqlContext.sql(\"SELECT \" + sqlGenerated + \" FROM source\")\n</code></pre></li>\n</ul>\n\n<p>Here is <a href=\"https://gist.github.com/ebuildy/3de0e2855498e5358e4eed1a4f72ea48\" rel=\"nofollow noreferrer\">an example in Java</a>.</p>\n\n<p>(I prefer SQL way, so you can easily test it on Spark-shell and it's cross-language).</p>\n"},{"tags":[],"owner":{"account_id":2111235,"reputation":1313,"user_id":1876485,"display_name":"steco"},"down_vote_count":1,"up_vote_count":41,"is_accepted":false,"score":40,"last_activity_date":1594837988,"creation_date":1522234061,"answer_id":49532496,"question_id":38753898,"body_markdown":"Here is function that is doing what you want and that can deal with multiple nested columns containing columns with same name:\r\n\r\n    import pyspark.sql.functions as F\r\n\r\n    def flatten_df(nested_df):\r\n        flat_cols = [c[0] for c in nested_df.dtypes if c[1][:6] != &#39;struct&#39;]\r\n        nested_cols = [c[0] for c in nested_df.dtypes if c[1][:6] == &#39;struct&#39;]\r\n\r\n        flat_df = nested_df.select(flat_cols +\r\n                                   [F.col(nc+&#39;.&#39;+c).alias(nc+&#39;_&#39;+c)\r\n                                    for nc in nested_cols\r\n                                    for c in nested_df.select(nc+&#39;.*&#39;).columns])\r\n        return flat_df\r\n\r\nBefore:\r\n\r\n    root\r\n     |-- x: string (nullable = true)\r\n     |-- y: string (nullable = true)\r\n     |-- foo: struct (nullable = true)\r\n     |    |-- a: float (nullable = true)\r\n     |    |-- b: float (nullable = true)\r\n     |    |-- c: integer (nullable = true)\r\n     |-- bar: struct (nullable = true)\r\n     |    |-- a: float (nullable = true)\r\n     |    |-- b: float (nullable = true)\r\n     |    |-- c: integer (nullable = true)\r\n\r\nAfter:\r\n\r\n    root\r\n     |-- x: string (nullable = true)\r\n     |-- y: string (nullable = true)\r\n     |-- foo_a: float (nullable = true)\r\n     |-- foo_b: float (nullable = true)\r\n     |-- foo_c: integer (nullable = true)\r\n     |-- bar_a: float (nullable = true)\r\n     |-- bar_b: float (nullable = true)\r\n     |-- bar_c: integer (nullable = true)\r\n","title":"How to flatten a struct in a Spark dataframe?","body":"<p>Here is function that is doing what you want and that can deal with multiple nested columns containing columns with same name:</p>\n<pre><code>import pyspark.sql.functions as F\n\ndef flatten_df(nested_df):\n    flat_cols = [c[0] for c in nested_df.dtypes if c[1][:6] != 'struct']\n    nested_cols = [c[0] for c in nested_df.dtypes if c[1][:6] == 'struct']\n\n    flat_df = nested_df.select(flat_cols +\n                               [F.col(nc+'.'+c).alias(nc+'_'+c)\n                                for nc in nested_cols\n                                for c in nested_df.select(nc+'.*').columns])\n    return flat_df\n</code></pre>\n<p>Before:</p>\n<pre><code>root\n |-- x: string (nullable = true)\n |-- y: string (nullable = true)\n |-- foo: struct (nullable = true)\n |    |-- a: float (nullable = true)\n |    |-- b: float (nullable = true)\n |    |-- c: integer (nullable = true)\n |-- bar: struct (nullable = true)\n |    |-- a: float (nullable = true)\n |    |-- b: float (nullable = true)\n |    |-- c: integer (nullable = true)\n</code></pre>\n<p>After:</p>\n<pre><code>root\n |-- x: string (nullable = true)\n |-- y: string (nullable = true)\n |-- foo_a: float (nullable = true)\n |-- foo_b: float (nullable = true)\n |-- foo_c: integer (nullable = true)\n |-- bar_a: float (nullable = true)\n |-- bar_b: float (nullable = true)\n |-- bar_c: integer (nullable = true)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":215715,"reputation":3329,"user_id":470517,"accept_rate":86,"display_name":"Aydin K."},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1524149907,"creation_date":1522932908,"answer_id":49672951,"question_id":38753898,"body_markdown":"I generalized the solution from stecos a bit more so the flattening can be done on more than two struct layers deep:\r\n\r\n    def flatten_df(nested_df, layers):\r\n        flat_cols = []\r\n        nested_cols = []\r\n        flat_df = []\r\n    \r\n        flat_cols.append([c[0] for c in nested_df.dtypes if c[1][:6] != &#39;struct&#39;])\r\n        nested_cols.append([c[0] for c in nested_df.dtypes if c[1][:6] == &#39;struct&#39;])\r\n    \r\n        flat_df.append(nested_df.select(flat_cols[0] +\r\n                                   [col(nc+&#39;.&#39;+c).alias(nc+&#39;_&#39;+c)\r\n                                    for nc in nested_cols[0]\r\n                                    for c in nested_df.select(nc+&#39;.*&#39;).columns])\r\n                      )\r\n        for i in range(1, layers):\r\n            print (flat_cols[i-1])\r\n            flat_cols.append([c[0] for c in flat_df[i-1].dtypes if c[1][:6] != &#39;struct&#39;])\r\n            nested_cols.append([c[0] for c in flat_df[i-1].dtypes if c[1][:6] == &#39;struct&#39;])\r\n    \r\n            flat_df.append(flat_df[i-1].select(flat_cols[i] +\r\n                                    [col(nc+&#39;.&#39;+c).alias(nc+&#39;_&#39;+c)\r\n                                        for nc in nested_cols[i]\r\n                                        for c in flat_df[i-1].select(nc+&#39;.*&#39;).columns])\r\n            )\r\n        \r\n        return flat_df[-1]\r\n\r\n\r\njust call with:\r\n\r\n    my_flattened_df = flatten_df(my_df_having_nested_structs, 3)\r\n\r\n(second parameter is the level of layers to be flattened, in my case it&#39;s 3)\r\n","title":"How to flatten a struct in a Spark dataframe?","body":"<p>I generalized the solution from stecos a bit more so the flattening can be done on more than two struct layers deep:</p>\n\n<pre><code>def flatten_df(nested_df, layers):\n    flat_cols = []\n    nested_cols = []\n    flat_df = []\n\n    flat_cols.append([c[0] for c in nested_df.dtypes if c[1][:6] != 'struct'])\n    nested_cols.append([c[0] for c in nested_df.dtypes if c[1][:6] == 'struct'])\n\n    flat_df.append(nested_df.select(flat_cols[0] +\n                               [col(nc+'.'+c).alias(nc+'_'+c)\n                                for nc in nested_cols[0]\n                                for c in nested_df.select(nc+'.*').columns])\n                  )\n    for i in range(1, layers):\n        print (flat_cols[i-1])\n        flat_cols.append([c[0] for c in flat_df[i-1].dtypes if c[1][:6] != 'struct'])\n        nested_cols.append([c[0] for c in flat_df[i-1].dtypes if c[1][:6] == 'struct'])\n\n        flat_df.append(flat_df[i-1].select(flat_cols[i] +\n                                [col(nc+'.'+c).alias(nc+'_'+c)\n                                    for nc in nested_cols[i]\n                                    for c in flat_df[i-1].select(nc+'.*').columns])\n        )\n\n    return flat_df[-1]\n</code></pre>\n\n<p>just call with:</p>\n\n<pre><code>my_flattened_df = flatten_df(my_df_having_nested_structs, 3)\n</code></pre>\n\n<p>(second parameter is the level of layers to be flattened, in my case it's 3)</p>\n"},{"tags":[],"owner":{"account_id":3770578,"reputation":372,"user_id":3132919,"accept_rate":100,"display_name":"federicojasson"},"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1560200354,"creation_date":1560200354,"answer_id":56533459,"question_id":38753898,"body_markdown":"This `flatten_df` version flattens the dataframe at every layer level, using a stack to avoid recursive calls:\r\n\r\n```python\r\nfrom pyspark.sql.functions import col\r\n\r\n\r\ndef flatten_df(nested_df):\r\n    stack = [((), nested_df)]\r\n    columns = []\r\n\r\n    while len(stack) &gt; 0:\r\n        parents, df = stack.pop()\r\n        \r\n        flat_cols = [\r\n            col(&quot;.&quot;.join(parents + (c[0],))).alias(&quot;_&quot;.join(parents + (c[0],)))\r\n            for c in df.dtypes\r\n            if c[1][:6] != &quot;struct&quot;\r\n        ]\r\n\r\n        nested_cols = [\r\n            c[0]\r\n            for c in df.dtypes\r\n            if c[1][:6] == &quot;struct&quot;\r\n        ]\r\n        \r\n        columns.extend(flat_cols)\r\n        \r\n        for nested_col in nested_cols:\r\n            projected_df = df.select(nested_col + &quot;.*&quot;)\r\n            stack.append((parents + (nested_col,), projected_df))\r\n        \r\n    return nested_df.select(columns)\r\n```\r\n\r\nExample:\r\n\r\n```python\r\nfrom pyspark.sql.types import StringType, StructField, StructType\r\n\r\n\r\nschema = StructType([\r\n    StructField(&quot;some&quot;, StringType()),\r\n\r\n    StructField(&quot;nested&quot;, StructType([\r\n        StructField(&quot;nestedchild1&quot;, StringType()),\r\n        StructField(&quot;nestedchild2&quot;, StringType())\r\n    ])),\r\n\r\n    StructField(&quot;renested&quot;, StructType([\r\n        StructField(&quot;nested&quot;, StructType([\r\n            StructField(&quot;nestedchild1&quot;, StringType()),\r\n            StructField(&quot;nestedchild2&quot;, StringType())\r\n        ]))\r\n    ]))\r\n])\r\n\r\ndata = [\r\n    {\r\n        &quot;some&quot;: &quot;value1&quot;,\r\n        &quot;nested&quot;: {\r\n            &quot;nestedchild1&quot;: &quot;value2&quot;,\r\n            &quot;nestedchild2&quot;: &quot;value3&quot;,\r\n        },\r\n        &quot;renested&quot;: {\r\n            &quot;nested&quot;: {\r\n                &quot;nestedchild1&quot;: &quot;value4&quot;,\r\n                &quot;nestedchild2&quot;: &quot;value5&quot;,\r\n            }\r\n        }\r\n    }\r\n]\r\n\r\ndf = spark.createDataFrame(data, schema)\r\nflat_df = flatten_df(df)\r\nprint(flat_df.collect())\r\n```\r\n\r\nPrints:\r\n```sh\r\n[Row(some=u&#39;value1&#39;, renested_nested_nestedchild1=u&#39;value4&#39;, renested_nested_nestedchild2=u&#39;value5&#39;, nested_nestedchild1=u&#39;value2&#39;, nested_nestedchild2=u&#39;value3&#39;)]\r\n```","title":"How to flatten a struct in a Spark dataframe?","body":"<p>This <code>flatten_df</code> version flattens the dataframe at every layer level, using a stack to avoid recursive calls:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>from pyspark.sql.functions import col\n\n\ndef flatten_df(nested_df):\n    stack = [((), nested_df)]\n    columns = []\n\n    while len(stack) &gt; 0:\n        parents, df = stack.pop()\n\n        flat_cols = [\n            col(\".\".join(parents + (c[0],))).alias(\"_\".join(parents + (c[0],)))\n            for c in df.dtypes\n            if c[1][:6] != \"struct\"\n        ]\n\n        nested_cols = [\n            c[0]\n            for c in df.dtypes\n            if c[1][:6] == \"struct\"\n        ]\n\n        columns.extend(flat_cols)\n\n        for nested_col in nested_cols:\n            projected_df = df.select(nested_col + \".*\")\n            stack.append((parents + (nested_col,), projected_df))\n\n    return nested_df.select(columns)\n</code></pre>\n\n<p>Example:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>from pyspark.sql.types import StringType, StructField, StructType\n\n\nschema = StructType([\n    StructField(\"some\", StringType()),\n\n    StructField(\"nested\", StructType([\n        StructField(\"nestedchild1\", StringType()),\n        StructField(\"nestedchild2\", StringType())\n    ])),\n\n    StructField(\"renested\", StructType([\n        StructField(\"nested\", StructType([\n            StructField(\"nestedchild1\", StringType()),\n            StructField(\"nestedchild2\", StringType())\n        ]))\n    ]))\n])\n\ndata = [\n    {\n        \"some\": \"value1\",\n        \"nested\": {\n            \"nestedchild1\": \"value2\",\n            \"nestedchild2\": \"value3\",\n        },\n        \"renested\": {\n            \"nested\": {\n                \"nestedchild1\": \"value4\",\n                \"nestedchild2\": \"value5\",\n            }\n        }\n    }\n]\n\ndf = spark.createDataFrame(data, schema)\nflat_df = flatten_df(df)\nprint(flat_df.collect())\n</code></pre>\n\n<p>Prints:</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>[Row(some=u'value1', renested_nested_nestedchild1=u'value4', renested_nested_nestedchild2=u'value5', nested_nestedchild1=u'value2', nested_nestedchild2=u'value3')]\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5022921,"reputation":1106,"user_id":4035861,"accept_rate":80,"display_name":"sri hari kali charan Tummala"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1579913640,"creation_date":1579913640,"answer_id":59905440,"question_id":38753898,"body_markdown":"below worked for me in spark sql\r\n\r\n```\r\nimport org.apache.spark.sql._\r\nimport org.apache.hadoop.conf.Configuration\r\nimport org.apache.hadoop.fs._\r\nimport org.apache.http.client.methods.HttpGet\r\nimport org.apache.http.impl.client.DefaultHttpClient\r\nimport org.apache.spark.sql.{DataFrame, SaveMode, SparkSession}\r\nimport org.apache.spark.sql.functions._\r\nimport org.apache.spark.sql.types.StructType\r\nimport org.apache.log4j.{Level, Logger}\r\nimport org.apache.spark.rdd.RDD\r\nimport org.apache.spark.sql.types._\r\nimport org.apache.spark.storage.StorageLevel\r\nimport org.apache.spark.sql.functions.{explode, expr, posexplode, when}\r\n\r\nobject StackOverFlowQuestion {\r\n  def main(args: Array[String]): Unit = {\r\n\r\n    val logger = Logger.getLogger(&quot;FlattenTest&quot;)\r\n    Logger.getLogger(&quot;org&quot;).setLevel(Level.WARN)\r\n    Logger.getLogger(&quot;akka&quot;).setLevel(Level.WARN)\r\n\r\n    val spark = SparkSession.builder()\r\n      .appName(&quot;FlattenTest&quot;)\r\n      .config(&quot;spark.sql.warehouse.dir&quot;, &quot;C:\\\\Temp\\\\hive&quot;)\r\n      .master(&quot;local[2]&quot;)\r\n      //.enableHiveSupport()\r\n      .getOrCreate()\r\n    import spark.implicits._\r\n\r\n    val stringTest =\r\n      &quot;&quot;&quot;{\r\n                               &quot;total_count&quot;: 123,\r\n                               &quot;page_size&quot;: 20,\r\n                               &quot;another_id&quot;: &quot;gdbfdbfdbd&quot;,\r\n                               &quot;sen&quot;: [{\r\n                               \t&quot;id&quot;: 123,\r\n                               \t&quot;ses_id&quot;: 12424343,\r\n                               \t&quot;columns&quot;: {\r\n                               \t\t&quot;blah&quot;: &quot;blah&quot;,\r\n                               \t\t&quot;count&quot;: 1234\r\n                               \t},\r\n                               \t&quot;class&quot;: {},\r\n                               \t&quot;class_timestamps&quot;: {},\r\n                               \t&quot;sentence&quot;: &quot;spark is good&quot;\r\n                               }]\r\n                            }\r\n                             &quot;&quot;&quot;\r\n    val result = List(stringTest)\r\n    val githubRdd=spark.sparkContext.makeRDD(result)\r\n    val gitHubDF=spark.read.json(githubRdd)\r\n    gitHubDF.show()\r\n    gitHubDF.printSchema()\r\n\r\n    gitHubDF.registerTempTable(&quot;JsonTable&quot;)\r\n\r\n   spark.sql(&quot;with cte as&quot; +\r\n      &quot;(&quot; +\r\n      &quot;select explode(sen) as senArray  from JsonTable&quot; +\r\n      &quot;), cte_2 as&quot; +\r\n      &quot;(&quot; +\r\n      &quot;select senArray.ses_id,senArray.ses_id,senArray.columns.* from cte&quot; +\r\n      &quot;)&quot; +\r\n      &quot;select * from cte_2&quot;\r\n    ).show()\r\n\r\n    spark.stop()\r\n}\r\n\r\n}\r\n\r\n```\r\n\r\noutput:-\r\n\r\n```\r\n+----------+---------+--------------------+-----------+\r\n|another_id|page_size|                 sen|total_count|\r\n+----------+---------+--------------------+-----------+\r\n|gdbfdbfdbd|       20|[[[blah, 1234], 1...|        123|\r\n+----------+---------+--------------------+-----------+\r\n\r\nroot\r\n |-- another_id: string (nullable = true)\r\n |-- page_size: long (nullable = true)\r\n |-- sen: array (nullable = true)\r\n |    |-- element: struct (containsNull = true)\r\n |    |    |-- columns: struct (nullable = true)\r\n |    |    |    |-- blah: string (nullable = true)\r\n |    |    |    |-- count: long (nullable = true)\r\n |    |    |-- id: long (nullable = true)\r\n |    |    |-- sentence: string (nullable = true)\r\n |    |    |-- ses_id: long (nullable = true)\r\n |-- total_count: long (nullable = true)\r\n\r\n+--------+--------+----+-----+\r\n|  ses_id|  ses_id|blah|count|\r\n+--------+--------+----+-----+\r\n|12424343|12424343|blah| 1234|\r\n+--------+--------+----+-----+\r\n```","title":"How to flatten a struct in a Spark dataframe?","body":"<p>below worked for me in spark sql</p>\n\n<pre><code>import org.apache.spark.sql._\nimport org.apache.hadoop.conf.Configuration\nimport org.apache.hadoop.fs._\nimport org.apache.http.client.methods.HttpGet\nimport org.apache.http.impl.client.DefaultHttpClient\nimport org.apache.spark.sql.{DataFrame, SaveMode, SparkSession}\nimport org.apache.spark.sql.functions._\nimport org.apache.spark.sql.types.StructType\nimport org.apache.log4j.{Level, Logger}\nimport org.apache.spark.rdd.RDD\nimport org.apache.spark.sql.types._\nimport org.apache.spark.storage.StorageLevel\nimport org.apache.spark.sql.functions.{explode, expr, posexplode, when}\n\nobject StackOverFlowQuestion {\n  def main(args: Array[String]): Unit = {\n\n    val logger = Logger.getLogger(\"FlattenTest\")\n    Logger.getLogger(\"org\").setLevel(Level.WARN)\n    Logger.getLogger(\"akka\").setLevel(Level.WARN)\n\n    val spark = SparkSession.builder()\n      .appName(\"FlattenTest\")\n      .config(\"spark.sql.warehouse.dir\", \"C:\\\\Temp\\\\hive\")\n      .master(\"local[2]\")\n      //.enableHiveSupport()\n      .getOrCreate()\n    import spark.implicits._\n\n    val stringTest =\n      \"\"\"{\n                               \"total_count\": 123,\n                               \"page_size\": 20,\n                               \"another_id\": \"gdbfdbfdbd\",\n                               \"sen\": [{\n                                \"id\": 123,\n                                \"ses_id\": 12424343,\n                                \"columns\": {\n                                    \"blah\": \"blah\",\n                                    \"count\": 1234\n                                },\n                                \"class\": {},\n                                \"class_timestamps\": {},\n                                \"sentence\": \"spark is good\"\n                               }]\n                            }\n                             \"\"\"\n    val result = List(stringTest)\n    val githubRdd=spark.sparkContext.makeRDD(result)\n    val gitHubDF=spark.read.json(githubRdd)\n    gitHubDF.show()\n    gitHubDF.printSchema()\n\n    gitHubDF.registerTempTable(\"JsonTable\")\n\n   spark.sql(\"with cte as\" +\n      \"(\" +\n      \"select explode(sen) as senArray  from JsonTable\" +\n      \"), cte_2 as\" +\n      \"(\" +\n      \"select senArray.ses_id,senArray.ses_id,senArray.columns.* from cte\" +\n      \")\" +\n      \"select * from cte_2\"\n    ).show()\n\n    spark.stop()\n}\n\n}\n\n</code></pre>\n\n<p>output:-</p>\n\n<pre><code>+----------+---------+--------------------+-----------+\n|another_id|page_size|                 sen|total_count|\n+----------+---------+--------------------+-----------+\n|gdbfdbfdbd|       20|[[[blah, 1234], 1...|        123|\n+----------+---------+--------------------+-----------+\n\nroot\n |-- another_id: string (nullable = true)\n |-- page_size: long (nullable = true)\n |-- sen: array (nullable = true)\n |    |-- element: struct (containsNull = true)\n |    |    |-- columns: struct (nullable = true)\n |    |    |    |-- blah: string (nullable = true)\n |    |    |    |-- count: long (nullable = true)\n |    |    |-- id: long (nullable = true)\n |    |    |-- sentence: string (nullable = true)\n |    |    |-- ses_id: long (nullable = true)\n |-- total_count: long (nullable = true)\n\n+--------+--------+----+-----+\n|  ses_id|  ses_id|blah|count|\n+--------+--------+----+-----+\n|12424343|12424343|blah| 1234|\n+--------+--------+----+-----+\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14617121,"reputation":180,"user_id":10556923,"display_name":"Amrish Mishra"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1594838618,"creation_date":1594838618,"answer_id":62921755,"question_id":38753898,"body_markdown":"You can use this approach if, you have to covert only struct types.\r\nI would not suggest converting the array, as it could lead to duplicate records.\r\n\r\n    from pyspark.sql.functions import col\r\n    from pyspark.sql.types import StructType\r\n    \r\n    \r\n    def flatten_schema(schema, prefix=&quot;&quot;):\r\n        return_schema = []\r\n        for field in schema.fields:\r\n            if isinstance(field.dataType, StructType):\r\n                if prefix:\r\n                    return_schema = return_schema + flatten_schema(field.dataType, &quot;{}.{}&quot;.format(prefix, field.name))\r\n                else:\r\n                    return_schema = return_schema + flatten_schema(field.dataType, field.name)\r\n            else:\r\n                if prefix:\r\n                    field_path = &quot;{}.{}&quot;.format(prefix, field.name)\r\n                    return_schema.append(col(field_path).alias(field_path.replace(&quot;.&quot;, &quot;_&quot;)))\r\n                else:\r\n                    return_schema.append(field.name)\r\n        return return_schema\r\n\r\nYou can use it as\r\n\r\n    new_schema = flatten_schema(df.schema)\r\n    df1 = df.select(se)\r\n    df1.show()\r\n\r\n","title":"How to flatten a struct in a Spark dataframe?","body":"<p>You can use this approach if, you have to covert only struct types.\nI would not suggest converting the array, as it could lead to duplicate records.</p>\n<pre><code>from pyspark.sql.functions import col\nfrom pyspark.sql.types import StructType\n\n\ndef flatten_schema(schema, prefix=&quot;&quot;):\n    return_schema = []\n    for field in schema.fields:\n        if isinstance(field.dataType, StructType):\n            if prefix:\n                return_schema = return_schema + flatten_schema(field.dataType, &quot;{}.{}&quot;.format(prefix, field.name))\n            else:\n                return_schema = return_schema + flatten_schema(field.dataType, field.name)\n        else:\n            if prefix:\n                field_path = &quot;{}.{}&quot;.format(prefix, field.name)\n                return_schema.append(col(field_path).alias(field_path.replace(&quot;.&quot;, &quot;_&quot;)))\n            else:\n                return_schema.append(field.name)\n    return return_schema\n</code></pre>\n<p>You can use it as</p>\n<pre><code>new_schema = flatten_schema(df.schema)\ndf1 = df.select(se)\ndf1.show()\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16168135,"reputation":111,"user_id":11672595,"display_name":"Domenico Di Nicola"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1636648972,"creation_date":1600126933,"answer_id":63893150,"question_id":38753898,"body_markdown":"A little more compact and efficient implementation:\r\n\r\nNo need to create list and iterate on them.\r\nYou &quot;act&quot; on fields based on their type (if structures or not).\r\n\r\nyou create a list and iterate on it, if the column is nested (struct) you need to flat it (.*) else you access with dot notation (parent.child) and replace . with _ (parent_child)\r\n\r\n```\r\ndef flatten_df(nested_df):\r\n    stack = [((), nested_df)]\r\n    columns = []\r\n    while len(stack) &gt; 0:\r\n        parents, df = stack.pop()\r\n        for column_name, column_type in df.dtypes:\r\n            if column_type[:6] == &quot;struct&quot;:\r\n                projected_df = df.select(column_name + &quot;.*&quot;)\r\n                stack.append((parents + (column_name,), projected_df))\r\n            else:\r\n                columns.append(col(&quot;.&quot;.join(parents + (column_name,))).alias(&quot;_&quot;.join(parents + (column_name,))))\r\n    return nested_df.select(columns)\r\n```","title":"How to flatten a struct in a Spark dataframe?","body":"<p>A little more compact and efficient implementation:</p>\n<p>No need to create list and iterate on them.\nYou &quot;act&quot; on fields based on their type (if structures or not).</p>\n<p>you create a list and iterate on it, if the column is nested (struct) you need to flat it (.*) else you access with dot notation (parent.child) and replace . with _ (parent_child)</p>\n<pre><code>def flatten_df(nested_df):\n    stack = [((), nested_df)]\n    columns = []\n    while len(stack) &gt; 0:\n        parents, df = stack.pop()\n        for column_name, column_type in df.dtypes:\n            if column_type[:6] == &quot;struct&quot;:\n                projected_df = df.select(column_name + &quot;.*&quot;)\n                stack.append((parents + (column_name,), projected_df))\n            else:\n                columns.append(col(&quot;.&quot;.join(parents + (column_name,))).alias(&quot;_&quot;.join(parents + (column_name,))))\n    return nested_df.select(columns)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15842206,"reputation":258,"user_id":11430389,"display_name":"Raptor0009"},"down_vote_count":2,"up_vote_count":3,"is_accepted":false,"score":1,"last_activity_date":1600918954,"creation_date":1600789750,"answer_id":64013303,"question_id":38753898,"body_markdown":"This is for scala spark.\r\n\r\n```\r\nval totalMainArrayBuffer=collection.mutable.ArrayBuffer[String]()\r\ndef flatten_df_Struct(dfTemp:org.apache.spark.sql.DataFrame,dfTotalOuter:org.apache.spark.sql.DataFrame):org.apache.spark.sql.DataFrame=\r\n{\r\n//dfTemp.printSchema\r\nval totalStructCols=dfTemp.dtypes.map(x =&gt; x.toString.substring(1,x.toString.size-1)).filter(_.split(&quot;,&quot;,2)(1).contains(&quot;Struct&quot;)) // in case i the column names come with the word Struct embedded in it\r\nval mainArrayBuffer=collection.mutable.ArrayBuffer[String]()\r\nfor(totalStructCol &lt;- totalStructCols)\r\n{\r\nval tempArrayBuffer=collection.mutable.ArrayBuffer[String]()\r\ntempArrayBuffer+=s&quot;${totalStructCol.split(&quot;,&quot;)(0)}.*&quot;\r\n//tempArrayBuffer.toSeq.toDF.show(false)\r\nval columnsInside=dfTemp.selectExpr(tempArrayBuffer:_*).columns\r\nfor(column &lt;- columnsInside)\r\nmainArrayBuffer+=s&quot;${totalStructCol.split(&quot;,&quot;)(0)}.${column} as ${totalStructCol.split(&quot;,&quot;)(0)}_${column}&quot;\r\n//mainArrayBuffer.toSeq.toDF.show(false)\r\n}\r\n//dfTemp.selectExpr(mainArrayBuffer:_*).printSchema\r\nval nonStructCols=dfTemp.selectExpr(mainArrayBuffer:_*).dtypes.map(x =&gt; x.toString.substring(1,x.toString.size-1)).filter(!_.split(&quot;,&quot;,2)(1).contains(&quot;Struct&quot;)) // in case i the column names come with the word Struct embedded in it\r\nfor (nonStructCol &lt;- nonStructCols)\r\ntotalMainArrayBuffer+=s&quot;${nonStructCol.split(&quot;,&quot;)(0).replace(&quot;_&quot;,&quot;.&quot;)} as ${nonStructCol.split(&quot;,&quot;)(0)}&quot; // replacing _ by . in origial select clause if it&#39;s an already nested column \r\ndfTemp.selectExpr(mainArrayBuffer:_*).dtypes.map(x =&gt; x.toString.substring(1,x.toString.size-1)).filter(_.split(&quot;,&quot;,2)(1).contains(&quot;Struct&quot;)).size \r\nmatch {\r\ncase value if value ==0 =&gt; dfTotalOuter.selectExpr(totalMainArrayBuffer:_*)\r\ncase _ =&gt; flatten_df_Struct(dfTemp.selectExpr(mainArrayBuffer:_*),dfTotalOuter)\r\n}\r\n}\r\n\r\n\r\ndef flatten_df(dfTemp:org.apache.spark.sql.DataFrame):org.apache.spark.sql.DataFrame=\r\n{\r\nvar totalArrayBuffer=collection.mutable.ArrayBuffer[String]()\r\nval totalNonStructCols=dfTemp.dtypes.map(x =&gt; x.toString.substring(1,x.toString.size-1)).filter(!_.split(&quot;,&quot;,2)(1).contains(&quot;Struct&quot;)) // in case i the column names come with the word Struct embedded in it\r\nfor (totalNonStructCol &lt;- totalNonStructCols)\r\ntotalArrayBuffer+=s&quot;${totalNonStructCol.split(&quot;,&quot;)(0)}&quot;\r\ntotalMainArrayBuffer.clear\r\nflatten_df_Struct(dfTemp,dfTemp) // flattened schema is now in totalMainArrayBuffer \r\ntotalArrayBuffer=totalArrayBuffer++totalMainArrayBuffer\r\ndfTemp.selectExpr(totalArrayBuffer:_*)\r\n}\r\n\r\n\r\nflatten_df(dfTotal.withColumn(&quot;tempStruct&quot;,lit(5))).printSchema\r\n\r\n\r\n\r\n```\r\nFile\r\n```\r\n{&quot;num1&quot;:1,&quot;num2&quot;:2,&quot;bool1&quot;:true,&quot;bool2&quot;:false,&quot;double1&quot;:4.5,&quot;double2&quot;:5.6,&quot;str1&quot;:&quot;a&quot;,&quot;str2&quot;:&quot;b&quot;,&quot;arr1&quot;:[3,4,5],&quot;map1&quot;:{&quot;cool&quot;:1,&quot;okay&quot;:2,&quot;normal&quot;:3},&quot;carInfo&quot;:{&quot;Engine&quot;:{&quot;Make&quot;:&quot;sa&quot;,&quot;Power&quot;:{&quot;IC&quot;:&quot;900&quot;,&quot;battery&quot;:&quot;165&quot;},&quot;Redline&quot;:&quot;11500&quot;} ,&quot;Tyres&quot;:{&quot;Make&quot;:&quot;Pirelli&quot;,&quot;Compound&quot;:&quot;c1&quot;,&quot;Life&quot;:&quot;120&quot;}}}\r\n{&quot;num1&quot;:3,&quot;num2&quot;:4,&quot;bool1&quot;:false,&quot;bool2&quot;:false,&quot;double1&quot;:4.2,&quot;double2&quot;:5.5,&quot;str1&quot;:&quot;u&quot;,&quot;str2&quot;:&quot;n&quot;,&quot;arr1&quot;:[6,7,9],&quot;map1&quot;:{&quot;fast&quot;:1,&quot;medium&quot;:2,&quot;agressive&quot;:3},&quot;carInfo&quot;:{&quot;Engine&quot;:{&quot;Make&quot;:&quot;na&quot;,&quot;Power&quot;:{&quot;IC&quot;:&quot;800&quot;,&quot;battery&quot;:&quot;150&quot;},&quot;Redline&quot;:&quot;10000&quot;} ,&quot;Tyres&quot;:{&quot;Make&quot;:&quot;Pirelli&quot;,&quot;Compound&quot;:&quot;c2&quot;,&quot;Life&quot;:&quot;100&quot;}}}\r\n{&quot;num1&quot;:8,&quot;num2&quot;:4,&quot;bool1&quot;:true,&quot;bool2&quot;:true,&quot;double1&quot;:5.7,&quot;double2&quot;:7.5,&quot;str1&quot;:&quot;t&quot;,&quot;str2&quot;:&quot;k&quot;,&quot;arr1&quot;:[11,12,23],&quot;map1&quot;:{&quot;preserve&quot;:1,&quot;medium&quot;:2,&quot;fast&quot;:3},&quot;carInfo&quot;:{&quot;Engine&quot;:{&quot;Make&quot;:&quot;ta&quot;,&quot;Power&quot;:{&quot;IC&quot;:&quot;950&quot;,&quot;battery&quot;:&quot;170&quot;},&quot;Redline&quot;:&quot;12500&quot;} ,&quot;Tyres&quot;:{&quot;Make&quot;:&quot;Pirelli&quot;,&quot;Compound&quot;:&quot;c3&quot;,&quot;Life&quot;:&quot;80&quot;}}}\r\n{&quot;num1&quot;:7,&quot;num2&quot;:9,&quot;bool1&quot;:false,&quot;bool2&quot;:true,&quot;double1&quot;:33.2,&quot;double2&quot;:7.5,&quot;str1&quot;:&quot;b&quot;,&quot;str2&quot;:&quot;u&quot;,&quot;arr1&quot;:[12,14,5],&quot;map1&quot;:{&quot;normal&quot;:1,&quot;preserve&quot;:2,&quot;agressive&quot;:3},&quot;carInfo&quot;:{&quot;Engine&quot;:{&quot;Make&quot;:&quot;pa&quot;,&quot;Power&quot;:{&quot;IC&quot;:&quot;920&quot;,&quot;battery&quot;:&quot;160&quot;},&quot;Redline&quot;:&quot;11800&quot;} ,&quot;Tyres&quot;:{&quot;Make&quot;:&quot;Pirelli&quot;,&quot;Compound&quot;:&quot;c4&quot;,&quot;Life&quot;:&quot;70&quot;}}}\r\n```\r\n\r\nBefore:\r\n```\r\nroot\r\n |-- arr1: array (nullable = true)\r\n |    |-- element: long (containsNull = true)\r\n |-- bool1: boolean (nullable = true)\r\n |-- bool2: boolean (nullable = true)\r\n |-- carInfo: struct (nullable = true)\r\n |    |-- Engine: struct (nullable = true)\r\n |    |    |-- Make: string (nullable = true)\r\n |    |    |-- Power: struct (nullable = true)\r\n |    |    |    |-- IC: string (nullable = true)\r\n |    |    |    |-- battery: string (nullable = true)\r\n |    |    |-- Redline: string (nullable = true)\r\n |    |-- Tyres: struct (nullable = true)\r\n |    |    |-- Compound: string (nullable = true)\r\n |    |    |-- Life: string (nullable = true)\r\n |    |    |-- Make: string (nullable = true)\r\n |-- double1: double (nullable = true)\r\n |-- double2: double (nullable = true)\r\n |-- map1: struct (nullable = true)\r\n |    |-- agressive: long (nullable = true)\r\n |    |-- cool: long (nullable = true)\r\n |    |-- fast: long (nullable = true)\r\n |    |-- medium: long (nullable = true)\r\n |    |-- normal: long (nullable = true)\r\n |    |-- okay: long (nullable = true)\r\n |    |-- preserve: long (nullable = true)\r\n |-- num1: long (nullable = true)\r\n |-- num2: long (nullable = true)\r\n |-- str1: string (nullable = true)\r\n |-- str2: string (nullable = true\r\n```\r\n\r\nAfter:\r\n```\r\nroot\r\n |-- arr1: array (nullable = true)\r\n |    |-- element: long (containsNull = true)\r\n |-- bool1: boolean (nullable = true)\r\n |-- bool2: boolean (nullable = true)\r\n |-- double1: double (nullable = true)\r\n |-- double2: double (nullable = true)\r\n |-- num1: long (nullable = true)\r\n |-- num2: long (nullable = true)\r\n |-- str1: string (nullable = true)\r\n |-- str2: string (nullable = true)\r\n |-- map1_agressive: long (nullable = true)\r\n |-- map1_cool: long (nullable = true)\r\n |-- map1_fast: long (nullable = true)\r\n |-- map1_medium: long (nullable = true)\r\n |-- map1_normal: long (nullable = true)\r\n |-- map1_okay: long (nullable = true)\r\n |-- map1_preserve: long (nullable = true)\r\n |-- carInfo_Engine_Make: string (nullable = true)\r\n |-- carInfo_Engine_Redline: string (nullable = true)\r\n |-- carInfo_Tyres_Compound: string (nullable = true)\r\n |-- carInfo_Tyres_Life: string (nullable = true)\r\n |-- carInfo_Tyres_Make: string (nullable = true)\r\n |-- carInfo_Engine_Power_IC: string (nullable = true)\r\n |-- carInfo_Engine_Power_battery: string (nullable = true)\r\n\r\n```\r\nTried for 2 Levels, it worked","title":"How to flatten a struct in a Spark dataframe?","body":"<p>This is for scala spark.</p>\n<pre><code>val totalMainArrayBuffer=collection.mutable.ArrayBuffer[String]()\ndef flatten_df_Struct(dfTemp:org.apache.spark.sql.DataFrame,dfTotalOuter:org.apache.spark.sql.DataFrame):org.apache.spark.sql.DataFrame=\n{\n//dfTemp.printSchema\nval totalStructCols=dfTemp.dtypes.map(x =&gt; x.toString.substring(1,x.toString.size-1)).filter(_.split(&quot;,&quot;,2)(1).contains(&quot;Struct&quot;)) // in case i the column names come with the word Struct embedded in it\nval mainArrayBuffer=collection.mutable.ArrayBuffer[String]()\nfor(totalStructCol &lt;- totalStructCols)\n{\nval tempArrayBuffer=collection.mutable.ArrayBuffer[String]()\ntempArrayBuffer+=s&quot;${totalStructCol.split(&quot;,&quot;)(0)}.*&quot;\n//tempArrayBuffer.toSeq.toDF.show(false)\nval columnsInside=dfTemp.selectExpr(tempArrayBuffer:_*).columns\nfor(column &lt;- columnsInside)\nmainArrayBuffer+=s&quot;${totalStructCol.split(&quot;,&quot;)(0)}.${column} as ${totalStructCol.split(&quot;,&quot;)(0)}_${column}&quot;\n//mainArrayBuffer.toSeq.toDF.show(false)\n}\n//dfTemp.selectExpr(mainArrayBuffer:_*).printSchema\nval nonStructCols=dfTemp.selectExpr(mainArrayBuffer:_*).dtypes.map(x =&gt; x.toString.substring(1,x.toString.size-1)).filter(!_.split(&quot;,&quot;,2)(1).contains(&quot;Struct&quot;)) // in case i the column names come with the word Struct embedded in it\nfor (nonStructCol &lt;- nonStructCols)\ntotalMainArrayBuffer+=s&quot;${nonStructCol.split(&quot;,&quot;)(0).replace(&quot;_&quot;,&quot;.&quot;)} as ${nonStructCol.split(&quot;,&quot;)(0)}&quot; // replacing _ by . in origial select clause if it's an already nested column \ndfTemp.selectExpr(mainArrayBuffer:_*).dtypes.map(x =&gt; x.toString.substring(1,x.toString.size-1)).filter(_.split(&quot;,&quot;,2)(1).contains(&quot;Struct&quot;)).size \nmatch {\ncase value if value ==0 =&gt; dfTotalOuter.selectExpr(totalMainArrayBuffer:_*)\ncase _ =&gt; flatten_df_Struct(dfTemp.selectExpr(mainArrayBuffer:_*),dfTotalOuter)\n}\n}\n\n\ndef flatten_df(dfTemp:org.apache.spark.sql.DataFrame):org.apache.spark.sql.DataFrame=\n{\nvar totalArrayBuffer=collection.mutable.ArrayBuffer[String]()\nval totalNonStructCols=dfTemp.dtypes.map(x =&gt; x.toString.substring(1,x.toString.size-1)).filter(!_.split(&quot;,&quot;,2)(1).contains(&quot;Struct&quot;)) // in case i the column names come with the word Struct embedded in it\nfor (totalNonStructCol &lt;- totalNonStructCols)\ntotalArrayBuffer+=s&quot;${totalNonStructCol.split(&quot;,&quot;)(0)}&quot;\ntotalMainArrayBuffer.clear\nflatten_df_Struct(dfTemp,dfTemp) // flattened schema is now in totalMainArrayBuffer \ntotalArrayBuffer=totalArrayBuffer++totalMainArrayBuffer\ndfTemp.selectExpr(totalArrayBuffer:_*)\n}\n\n\nflatten_df(dfTotal.withColumn(&quot;tempStruct&quot;,lit(5))).printSchema\n\n\n\n</code></pre>\n<p>File</p>\n<pre><code>{&quot;num1&quot;:1,&quot;num2&quot;:2,&quot;bool1&quot;:true,&quot;bool2&quot;:false,&quot;double1&quot;:4.5,&quot;double2&quot;:5.6,&quot;str1&quot;:&quot;a&quot;,&quot;str2&quot;:&quot;b&quot;,&quot;arr1&quot;:[3,4,5],&quot;map1&quot;:{&quot;cool&quot;:1,&quot;okay&quot;:2,&quot;normal&quot;:3},&quot;carInfo&quot;:{&quot;Engine&quot;:{&quot;Make&quot;:&quot;sa&quot;,&quot;Power&quot;:{&quot;IC&quot;:&quot;900&quot;,&quot;battery&quot;:&quot;165&quot;},&quot;Redline&quot;:&quot;11500&quot;} ,&quot;Tyres&quot;:{&quot;Make&quot;:&quot;Pirelli&quot;,&quot;Compound&quot;:&quot;c1&quot;,&quot;Life&quot;:&quot;120&quot;}}}\n{&quot;num1&quot;:3,&quot;num2&quot;:4,&quot;bool1&quot;:false,&quot;bool2&quot;:false,&quot;double1&quot;:4.2,&quot;double2&quot;:5.5,&quot;str1&quot;:&quot;u&quot;,&quot;str2&quot;:&quot;n&quot;,&quot;arr1&quot;:[6,7,9],&quot;map1&quot;:{&quot;fast&quot;:1,&quot;medium&quot;:2,&quot;agressive&quot;:3},&quot;carInfo&quot;:{&quot;Engine&quot;:{&quot;Make&quot;:&quot;na&quot;,&quot;Power&quot;:{&quot;IC&quot;:&quot;800&quot;,&quot;battery&quot;:&quot;150&quot;},&quot;Redline&quot;:&quot;10000&quot;} ,&quot;Tyres&quot;:{&quot;Make&quot;:&quot;Pirelli&quot;,&quot;Compound&quot;:&quot;c2&quot;,&quot;Life&quot;:&quot;100&quot;}}}\n{&quot;num1&quot;:8,&quot;num2&quot;:4,&quot;bool1&quot;:true,&quot;bool2&quot;:true,&quot;double1&quot;:5.7,&quot;double2&quot;:7.5,&quot;str1&quot;:&quot;t&quot;,&quot;str2&quot;:&quot;k&quot;,&quot;arr1&quot;:[11,12,23],&quot;map1&quot;:{&quot;preserve&quot;:1,&quot;medium&quot;:2,&quot;fast&quot;:3},&quot;carInfo&quot;:{&quot;Engine&quot;:{&quot;Make&quot;:&quot;ta&quot;,&quot;Power&quot;:{&quot;IC&quot;:&quot;950&quot;,&quot;battery&quot;:&quot;170&quot;},&quot;Redline&quot;:&quot;12500&quot;} ,&quot;Tyres&quot;:{&quot;Make&quot;:&quot;Pirelli&quot;,&quot;Compound&quot;:&quot;c3&quot;,&quot;Life&quot;:&quot;80&quot;}}}\n{&quot;num1&quot;:7,&quot;num2&quot;:9,&quot;bool1&quot;:false,&quot;bool2&quot;:true,&quot;double1&quot;:33.2,&quot;double2&quot;:7.5,&quot;str1&quot;:&quot;b&quot;,&quot;str2&quot;:&quot;u&quot;,&quot;arr1&quot;:[12,14,5],&quot;map1&quot;:{&quot;normal&quot;:1,&quot;preserve&quot;:2,&quot;agressive&quot;:3},&quot;carInfo&quot;:{&quot;Engine&quot;:{&quot;Make&quot;:&quot;pa&quot;,&quot;Power&quot;:{&quot;IC&quot;:&quot;920&quot;,&quot;battery&quot;:&quot;160&quot;},&quot;Redline&quot;:&quot;11800&quot;} ,&quot;Tyres&quot;:{&quot;Make&quot;:&quot;Pirelli&quot;,&quot;Compound&quot;:&quot;c4&quot;,&quot;Life&quot;:&quot;70&quot;}}}\n</code></pre>\n<p>Before:</p>\n<pre><code>root\n |-- arr1: array (nullable = true)\n |    |-- element: long (containsNull = true)\n |-- bool1: boolean (nullable = true)\n |-- bool2: boolean (nullable = true)\n |-- carInfo: struct (nullable = true)\n |    |-- Engine: struct (nullable = true)\n |    |    |-- Make: string (nullable = true)\n |    |    |-- Power: struct (nullable = true)\n |    |    |    |-- IC: string (nullable = true)\n |    |    |    |-- battery: string (nullable = true)\n |    |    |-- Redline: string (nullable = true)\n |    |-- Tyres: struct (nullable = true)\n |    |    |-- Compound: string (nullable = true)\n |    |    |-- Life: string (nullable = true)\n |    |    |-- Make: string (nullable = true)\n |-- double1: double (nullable = true)\n |-- double2: double (nullable = true)\n |-- map1: struct (nullable = true)\n |    |-- agressive: long (nullable = true)\n |    |-- cool: long (nullable = true)\n |    |-- fast: long (nullable = true)\n |    |-- medium: long (nullable = true)\n |    |-- normal: long (nullable = true)\n |    |-- okay: long (nullable = true)\n |    |-- preserve: long (nullable = true)\n |-- num1: long (nullable = true)\n |-- num2: long (nullable = true)\n |-- str1: string (nullable = true)\n |-- str2: string (nullable = true\n</code></pre>\n<p>After:</p>\n<pre><code>root\n |-- arr1: array (nullable = true)\n |    |-- element: long (containsNull = true)\n |-- bool1: boolean (nullable = true)\n |-- bool2: boolean (nullable = true)\n |-- double1: double (nullable = true)\n |-- double2: double (nullable = true)\n |-- num1: long (nullable = true)\n |-- num2: long (nullable = true)\n |-- str1: string (nullable = true)\n |-- str2: string (nullable = true)\n |-- map1_agressive: long (nullable = true)\n |-- map1_cool: long (nullable = true)\n |-- map1_fast: long (nullable = true)\n |-- map1_medium: long (nullable = true)\n |-- map1_normal: long (nullable = true)\n |-- map1_okay: long (nullable = true)\n |-- map1_preserve: long (nullable = true)\n |-- carInfo_Engine_Make: string (nullable = true)\n |-- carInfo_Engine_Redline: string (nullable = true)\n |-- carInfo_Tyres_Compound: string (nullable = true)\n |-- carInfo_Tyres_Life: string (nullable = true)\n |-- carInfo_Tyres_Make: string (nullable = true)\n |-- carInfo_Engine_Power_IC: string (nullable = true)\n |-- carInfo_Engine_Power_battery: string (nullable = true)\n\n</code></pre>\n<p>Tried for 2 Levels, it worked</p>\n"},{"tags":[],"owner":{"account_id":5063041,"reputation":199,"user_id":4063984,"display_name":"Pratik Anurag"},"down_vote_count":1,"up_vote_count":20,"is_accepted":false,"score":19,"last_activity_date":1605086323,"creation_date":1605086323,"answer_id":64783597,"question_id":38753898,"body_markdown":"For Spark 2.4.5, \r\n\r\nwhile,`df.select(df.col(&quot;data.*&quot;))` will give you `org.apache.spark.sql.AnalysisException: No such struct field * in` exception\r\n\r\nthis will work:- \r\n\r\n    df.select($&quot;data.*&quot;)","title":"How to flatten a struct in a Spark dataframe?","body":"<p>For Spark 2.4.5,</p>\n<p>while,<code>df.select(df.col(&quot;data.*&quot;))</code> will give you <code>org.apache.spark.sql.AnalysisException: No such struct field * in</code> exception</p>\n<p>this will work:-</p>\n<pre><code>df.select($&quot;data.*&quot;)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7115866,"reputation":356,"user_id":7131019,"display_name":"Narahari B M"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1658831586,"creation_date":1607710677,"answer_id":65256608,"question_id":38753898,"body_markdown":"PySpark solution to flatten nested df with both **struct** and **array** types with **any level of depth**. This is improved on this: https://stackoverflow.com/a/56533459/7131019\r\n\r\n    from pyspark.sql.types import *\r\n    from pyspark.sql import functions as f\r\n    \r\n    def flatten_structs(nested_df):\r\n        stack = [((), nested_df)]\r\n        columns = []\r\n    \r\n        while len(stack) &gt; 0:\r\n            \r\n            parents, df = stack.pop()\r\n            \r\n            array_cols = [\r\n                c[0]\r\n                for c in df.dtypes\r\n                if c[1][:5] == &quot;array&quot;\r\n            ]\r\n            \r\n            flat_cols = [\r\n                f.col(&quot;.&quot;.join(parents + (c[0],))).alias(&quot;_&quot;.join(parents + (c[0],)))\r\n                for c in df.dtypes\r\n                if c[1][:6] != &quot;struct&quot;\r\n            ]\r\n    \r\n            nested_cols = [\r\n                c[0]\r\n                for c in df.dtypes\r\n                if c[1][:6] == &quot;struct&quot;\r\n            ]\r\n            \r\n            columns.extend(flat_cols)\r\n    \r\n            for nested_col in nested_cols:\r\n                projected_df = df.select(nested_col + &quot;.*&quot;)\r\n                stack.append((parents + (nested_col,), projected_df))\r\n            \r\n        return nested_df.select(columns)\r\n    \r\n    def flatten_array_struct_df(df):\r\n        \r\n        array_cols = [\r\n                c[0]\r\n                for c in df.dtypes\r\n                if c[1][:5] == &quot;array&quot;\r\n            ]\r\n        \r\n        while len(array_cols) &gt; 0:\r\n            \r\n            for array_col in array_cols:\r\n                \r\n                cols_to_select = [x for x in df.columns if x != array_col ]\r\n                \r\n                df = df.withColumn(array_col, f.explode(f.col(array_col)))\r\n                \r\n            df = flatten_structs(df)\r\n            \r\n            array_cols = [\r\n                c[0]\r\n                for c in df.dtypes\r\n                if c[1][:5] == &quot;array&quot;\r\n            ]\r\n        return df\r\n\r\n    flat_df = flatten_array_struct_df(df)\r\n\r\n","title":"How to flatten a struct in a Spark dataframe?","body":"<p>PySpark solution to flatten nested df with both <strong>struct</strong> and <strong>array</strong> types with <strong>any level of depth</strong>. This is improved on this: <a href=\"https://stackoverflow.com/a/56533459/7131019\">https://stackoverflow.com/a/56533459/7131019</a></p>\n<pre><code>from pyspark.sql.types import *\nfrom pyspark.sql import functions as f\n\ndef flatten_structs(nested_df):\n    stack = [((), nested_df)]\n    columns = []\n\n    while len(stack) &gt; 0:\n        \n        parents, df = stack.pop()\n        \n        array_cols = [\n            c[0]\n            for c in df.dtypes\n            if c[1][:5] == &quot;array&quot;\n        ]\n        \n        flat_cols = [\n            f.col(&quot;.&quot;.join(parents + (c[0],))).alias(&quot;_&quot;.join(parents + (c[0],)))\n            for c in df.dtypes\n            if c[1][:6] != &quot;struct&quot;\n        ]\n\n        nested_cols = [\n            c[0]\n            for c in df.dtypes\n            if c[1][:6] == &quot;struct&quot;\n        ]\n        \n        columns.extend(flat_cols)\n\n        for nested_col in nested_cols:\n            projected_df = df.select(nested_col + &quot;.*&quot;)\n            stack.append((parents + (nested_col,), projected_df))\n        \n    return nested_df.select(columns)\n\ndef flatten_array_struct_df(df):\n    \n    array_cols = [\n            c[0]\n            for c in df.dtypes\n            if c[1][:5] == &quot;array&quot;\n        ]\n    \n    while len(array_cols) &gt; 0:\n        \n        for array_col in array_cols:\n            \n            cols_to_select = [x for x in df.columns if x != array_col ]\n            \n            df = df.withColumn(array_col, f.explode(f.col(array_col)))\n            \n        df = flatten_structs(df)\n        \n        array_cols = [\n            c[0]\n            for c in df.dtypes\n            if c[1][:5] == &quot;array&quot;\n        ]\n    return df\n\nflat_df = flatten_array_struct_df(df)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8408393,"reputation":1,"user_id":6311188,"display_name":"Raj ks"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1629113434,"creation_date":1629113434,"answer_id":68802060,"question_id":38753898,"body_markdown":"We used https://github.com/lvhuyen/SparkAid It works to any Level\r\n\r\nfrom sparkaid import flatten\r\n\r\nflatten(df_nested_B).printSchema()","title":"How to flatten a struct in a Spark dataframe?","body":"<p>We used <a href=\"https://github.com/lvhuyen/SparkAid\" rel=\"nofollow noreferrer\">https://github.com/lvhuyen/SparkAid</a> It works to any Level</p>\n<p>from sparkaid import flatten</p>\n<p>flatten(df_nested_B).printSchema()</p>\n"},{"tags":[],"owner":{"account_id":23147902,"reputation":21,"user_id":17250408,"display_name":"V_K"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1637311512,"creation_date":1637311512,"answer_id":70032053,"question_id":38753898,"body_markdown":"Based on https://stackoverflow.com/a/49532496/17250408\r\nhere is solution for `struct` and `array` fields with multilevel nesting\r\n\r\n    from pyspark.sql.functions import col, explode\r\n    \r\n    \r\n    def type_cols(df_dtypes, filter_type):\r\n        cols = []\r\n        for col_name, col_type in df_dtypes:\r\n            if col_type.startswith(filter_type):\r\n                cols.append(col_name)\r\n        return cols\r\n    \r\n    \r\n    def flatten_df(nested_df, sep=&#39;_&#39;):\r\n        nested_cols = type_cols(nested_df.dtypes, &quot;struct&quot;)\r\n        flatten_cols = [fc for fc, _ in nested_df.dtypes if fc not in nested_cols]\r\n        for nc in nested_cols:\r\n            for cc in nested_df.select(f&quot;{nc}.*&quot;).columns:\r\n                if sep is None:\r\n                    flatten_cols.append(col(f&quot;{nc}.{cc}&quot;).alias(f&quot;{cc}&quot;))\r\n                else:\r\n                    flatten_cols.append(col(f&quot;{nc}.{cc}&quot;).alias(f&quot;{nc}{sep}{cc}&quot;))\r\n        return nested_df.select(flatten_cols)\r\n    \r\n    \r\n    def explode_df(nested_df):\r\n        nested_cols = type_cols(nested_df.dtypes, &quot;array&quot;)\r\n        exploded_df = nested_df\r\n        for nc in nested_cols:\r\n            exploded_df = exploded_df.withColumn(nc, explode(col(nc)))\r\n        return exploded_df\r\n    \r\n    \r\n    def flatten_explode_df(nested_df):\r\n        df = nested_df\r\n        struct_cols = type_cols(nested_df.dtypes, &quot;struct&quot;)\r\n        array_cols = type_cols(nested_df.dtypes, &quot;array&quot;)\r\n        if struct_cols:\r\n            df = flatten_df(df)\r\n            return flatten_explode_df(df)\r\n        if array_cols:\r\n            df = explode_df(df)\r\n            return flatten_explode_df(df)\r\n        return df\r\n    \r\n    \r\n    df = flatten_explode_df(nested_df)\r\n\r\n\r\n","title":"How to flatten a struct in a Spark dataframe?","body":"<p>Based on <a href=\"https://stackoverflow.com/a/49532496/17250408\">https://stackoverflow.com/a/49532496/17250408</a>\nhere is solution for <code>struct</code> and <code>array</code> fields with multilevel nesting</p>\n<pre><code>from pyspark.sql.functions import col, explode\n\n\ndef type_cols(df_dtypes, filter_type):\n    cols = []\n    for col_name, col_type in df_dtypes:\n        if col_type.startswith(filter_type):\n            cols.append(col_name)\n    return cols\n\n\ndef flatten_df(nested_df, sep='_'):\n    nested_cols = type_cols(nested_df.dtypes, &quot;struct&quot;)\n    flatten_cols = [fc for fc, _ in nested_df.dtypes if fc not in nested_cols]\n    for nc in nested_cols:\n        for cc in nested_df.select(f&quot;{nc}.*&quot;).columns:\n            if sep is None:\n                flatten_cols.append(col(f&quot;{nc}.{cc}&quot;).alias(f&quot;{cc}&quot;))\n            else:\n                flatten_cols.append(col(f&quot;{nc}.{cc}&quot;).alias(f&quot;{nc}{sep}{cc}&quot;))\n    return nested_df.select(flatten_cols)\n\n\ndef explode_df(nested_df):\n    nested_cols = type_cols(nested_df.dtypes, &quot;array&quot;)\n    exploded_df = nested_df\n    for nc in nested_cols:\n        exploded_df = exploded_df.withColumn(nc, explode(col(nc)))\n    return exploded_df\n\n\ndef flatten_explode_df(nested_df):\n    df = nested_df\n    struct_cols = type_cols(nested_df.dtypes, &quot;struct&quot;)\n    array_cols = type_cols(nested_df.dtypes, &quot;array&quot;)\n    if struct_cols:\n        df = flatten_df(df)\n        return flatten_explode_df(df)\n    if array_cols:\n        df = explode_df(df)\n        return flatten_explode_df(df)\n    return df\n\n\ndf = flatten_explode_df(nested_df)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10125658,"reputation":4894,"user_id":7481110,"display_name":"Jeffrey Kilelo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1702054216,"creation_date":1676674441,"answer_id":75489933,"question_id":38753898,"body_markdown":"If you have a mix of multi-level nested structs and arrays, the code below will help.\r\n\r\nThe code defines a class called `NestedDF` that can be used to flatten a mix of nested structs and nested arrays in a PySpark dataframe.\r\n\r\n**In a hurry?** Here&#39;s One-Liner showing how to use the code right-away:\r\n\r\n   `nested_df = NestedDF(my_df).flattened_df` ...just replace `my_df` with your pyspark data_frame\r\n\r\n    \r\n        from pyspark.sql.functions import col, size\r\n        from pyspark.sql.types import ArrayType\r\n\r\n        class NestedDF:\r\n        &quot;&quot;&quot;A class for flattening nested dataframes in PySpark.&quot;&quot;&quot;\r\n\r\n        def __init__(self, nested_df):\r\n            &quot;&quot;&quot;\r\n            Args:\r\n                nested_df (pyspark.sql.dataframe.DataFrame): Nested dataframe.\r\n            &quot;&quot;&quot;\r\n\r\n            self.nested_df = nested_df\r\n            self.flattened_struct_df = self.flatten_struct_df()\r\n            self.flattened_df = self.flatten_array_df()\r\n\r\n        def flatten_array_df(self):\r\n            &quot;&quot;&quot;Flatten a nested array dataframe into a single level dataframe.\r\n\r\n            Returns:\r\n                pyspark.sql.dataframe.DataFrame: Flattened dataframe.\r\n\r\n            &quot;&quot;&quot;\r\n            cols = self.flattened_struct_df.columns\r\n            for col_name in cols:\r\n                if isinstance(self.flattened_struct_df.schema[col_name].dataType, ArrayType):\r\n                    array_len = self.flattened_struct_df.select(size(col(col_name)).alias(&quot;array_len&quot;)).collect()[0][&quot;array_len&quot;]\r\n                    for i in range(array_len):\r\n                        self.flattened_struct_df = self.flattened_struct_df.withColumn(col_name + &quot;_&quot; + str(i), self.flattened_struct_df[col_name].getItem(i))\r\n                    self.flattened_struct_df = self.flattened_struct_df.drop(col_name)\r\n            return self.flattened_struct_df\r\n\r\n        def flatten_struct_df(self):\r\n            &quot;&quot;&quot;Flatten a nested dataframe into a single level dataframe.\r\n            Returns:\r\n                pyspark.sql.dataframe.DataFrame: Flattened dataframe.\r\n            &quot;&quot;&quot;\r\n            stack=[((), self.nested_df)]\r\n            columns=[]\r\n            while len(stack)&gt;0:\r\n                parents, df=stack.pop()\r\n                for col_name, col_type in df.dtypes:\r\n                    if col_type.startswith(&#39;struct&#39;):\r\n                        stack.append((parents+(col_name,), df.select(col_name+&quot;.*&quot;)))\r\n                    else:\r\n                        columns.append(col(&quot;.&quot;.join(parents+(col_name,))).alias(&quot;_&quot;.join(parents+(col_name,))))\r\n            return self.nested_df.select(columns)\r\n\r\n    \r\n\r\n\r\n**Explanation:**\r\n\r\n\r\n\r\nThe class has two methods: `flatten_array_df()` and `flatten_struct_df()`.\r\n\r\n`flatten_array_df()` flattens a nested array dataframe into a single-level dataframe. It first calls the `flatten_struct_df()` method to convert any nested structs in the dataframe into a single-level dataframe. Then, it iterates over the columns of the resulting dataframe and checks if each column contains an array. If a column contains an array, it calculates the length of the array and then iterates over each element of the array. For each element, it creates a new column in the dataframe with a name that combines the original column name and the index of the element. Finally, it drops the original column and returns the resulting flattened dataframe.\r\n\r\n\r\n\r\n`flatten_struct_df()` flattens a nested dataframe that contains structs into a single-level dataframe. It first creates an empty stack and adds a tuple containing an empty tuple and the input nested dataframe to the stack. It then iteratively pops the top tuple from the stack and checks if each column of the corresponding dataframe contains a struct. If a column contains a struct, it adds a new tuple to the stack that contains the original column name as well as the struct&#39;s columns, and selects only those columns from the original dataframe. If a column does not contain a struct, it constructs a new column name by combining the column names of all of its parent structs and the original column name, and adds the resulting column to a list. Finally, it selects the columns in the list and returns the resulting flattened dataframe.\r\n\r\n","title":"How to flatten a struct in a Spark dataframe?","body":"<p>If you have a mix of multi-level nested structs and arrays, the code below will help.</p>\n<p>The code defines a class called <code>NestedDF</code> that can be used to flatten a mix of nested structs and nested arrays in a PySpark dataframe.</p>\n<p><strong>In a hurry?</strong> Here's One-Liner showing how to use the code right-away:</p>\n<p><code>nested_df = NestedDF(my_df).flattened_df</code> ...just replace <code>my_df</code> with your pyspark data_frame</p>\n<pre><code>    from pyspark.sql.functions import col, size\n    from pyspark.sql.types import ArrayType\n\n    class NestedDF:\n    &quot;&quot;&quot;A class for flattening nested dataframes in PySpark.&quot;&quot;&quot;\n\n    def __init__(self, nested_df):\n        &quot;&quot;&quot;\n        Args:\n            nested_df (pyspark.sql.dataframe.DataFrame): Nested dataframe.\n        &quot;&quot;&quot;\n\n        self.nested_df = nested_df\n        self.flattened_struct_df = self.flatten_struct_df()\n        self.flattened_df = self.flatten_array_df()\n\n    def flatten_array_df(self):\n        &quot;&quot;&quot;Flatten a nested array dataframe into a single level dataframe.\n\n        Returns:\n            pyspark.sql.dataframe.DataFrame: Flattened dataframe.\n\n        &quot;&quot;&quot;\n        cols = self.flattened_struct_df.columns\n        for col_name in cols:\n            if isinstance(self.flattened_struct_df.schema[col_name].dataType, ArrayType):\n                array_len = self.flattened_struct_df.select(size(col(col_name)).alias(&quot;array_len&quot;)).collect()[0][&quot;array_len&quot;]\n                for i in range(array_len):\n                    self.flattened_struct_df = self.flattened_struct_df.withColumn(col_name + &quot;_&quot; + str(i), self.flattened_struct_df[col_name].getItem(i))\n                self.flattened_struct_df = self.flattened_struct_df.drop(col_name)\n        return self.flattened_struct_df\n\n    def flatten_struct_df(self):\n        &quot;&quot;&quot;Flatten a nested dataframe into a single level dataframe.\n        Returns:\n            pyspark.sql.dataframe.DataFrame: Flattened dataframe.\n        &quot;&quot;&quot;\n        stack=[((), self.nested_df)]\n        columns=[]\n        while len(stack)&gt;0:\n            parents, df=stack.pop()\n            for col_name, col_type in df.dtypes:\n                if col_type.startswith('struct'):\n                    stack.append((parents+(col_name,), df.select(col_name+&quot;.*&quot;)))\n                else:\n                    columns.append(col(&quot;.&quot;.join(parents+(col_name,))).alias(&quot;_&quot;.join(parents+(col_name,))))\n        return self.nested_df.select(columns)\n</code></pre>\n<p><strong>Explanation:</strong></p>\n<p>The class has two methods: <code>flatten_array_df()</code> and <code>flatten_struct_df()</code>.</p>\n<p><code>flatten_array_df()</code> flattens a nested array dataframe into a single-level dataframe. It first calls the <code>flatten_struct_df()</code> method to convert any nested structs in the dataframe into a single-level dataframe. Then, it iterates over the columns of the resulting dataframe and checks if each column contains an array. If a column contains an array, it calculates the length of the array and then iterates over each element of the array. For each element, it creates a new column in the dataframe with a name that combines the original column name and the index of the element. Finally, it drops the original column and returns the resulting flattened dataframe.</p>\n<p><code>flatten_struct_df()</code> flattens a nested dataframe that contains structs into a single-level dataframe. It first creates an empty stack and adds a tuple containing an empty tuple and the input nested dataframe to the stack. It then iteratively pops the top tuple from the stack and checks if each column of the corresponding dataframe contains a struct. If a column contains a struct, it adds a new tuple to the stack that contains the original column name as well as the struct's columns, and selects only those columns from the original dataframe. If a column does not contain a struct, it constructs a new column name by combining the column names of all of its parent structs and the original column name, and adds the resulting column to a list. Finally, it selects the columns in the list and returns the resulting flattened dataframe.</p>\n"},{"tags":[],"owner":{"account_id":21091776,"reputation":11,"user_id":15503520,"display_name":"shivam kumar_092"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1683525768,"creation_date":1683525768,"answer_id":76197871,"question_id":38753898,"body_markdown":"###### It handles struct and array type both , whether you wants your array type as column or you want left it as it is. ######\r\n\r\n    def new_flatten(df, need_as_column):\r\n    stack, col_arr = [], []\r\n    stack.append((df.schema.fields, &#39;&#39;, df))\r\n    while len(stack) &gt; 0:\r\n        arr, curr_name, curr_col = stack.pop()\r\n        if curr_name != &#39;&#39;:\r\n            curr_name += &#39;_&#39;\r\n        for x in arr:\r\n            if str(x.dataType).startswith(&#39;StructType&#39;):\r\n                stack.append((x.dataType.fields, curr_name+x.name, curr_col[x.name]))\r\n            elif str(x.dataType).startswith(&#39;ArrayType&#39;):\r\n                if need_as_column:\r\n                    elem_type = str(x.dataType.elementType)\r\n                    length = df.select(size(curr_col[x.name]).alias(&#39;my_size&#39;)).agg(max(&#39;my_size&#39;)).head()[0]\r\n                    for i in range(length):\r\n                        if elem_type.startswith(&#39;StructType&#39;):\r\n                            stack.append((x.dataType.elementType.fields, curr_name + x.name + &#39;_&#39; + str(i), curr_col[x.name][i]))\r\n                        else:\r\n                            col_arr.append(curr_col[x.name].getItem(i).alias((curr_name + x.name + &#39;_&#39; + str(i)).lower())) \r\n                else:\r\n                    col_arr.append(curr_col[x.name].alias(curr_name+x.name))\r\n            else:\r\n                col_arr.append(curr_col[x.name].alias(curr_name+x.name))\r\n    return df.select(col_arr)","title":"How to flatten a struct in a Spark dataframe?","body":"<h6>It handles struct and array type both , whether you wants your array type as column or you want left it as it is.</h6>\n<pre><code>def new_flatten(df, need_as_column):\nstack, col_arr = [], []\nstack.append((df.schema.fields, '', df))\nwhile len(stack) &gt; 0:\n    arr, curr_name, curr_col = stack.pop()\n    if curr_name != '':\n        curr_name += '_'\n    for x in arr:\n        if str(x.dataType).startswith('StructType'):\n            stack.append((x.dataType.fields, curr_name+x.name, curr_col[x.name]))\n        elif str(x.dataType).startswith('ArrayType'):\n            if need_as_column:\n                elem_type = str(x.dataType.elementType)\n                length = df.select(size(curr_col[x.name]).alias('my_size')).agg(max('my_size')).head()[0]\n                for i in range(length):\n                    if elem_type.startswith('StructType'):\n                        stack.append((x.dataType.elementType.fields, curr_name + x.name + '_' + str(i), curr_col[x.name][i]))\n                    else:\n                        col_arr.append(curr_col[x.name].getItem(i).alias((curr_name + x.name + '_' + str(i)).lower())) \n            else:\n                col_arr.append(curr_col[x.name].alias(curr_name+x.name))\n        else:\n            col_arr.append(curr_col[x.name].alias(curr_name+x.name))\nreturn df.select(col_arr)\n</code></pre>\n"}],"owner":{"account_id":1920397,"reputation":2057,"user_id":1732062,"accept_rate":100,"display_name":"djWann"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":152398,"favorite_count":0,"down_vote_count":0,"up_vote_count":77,"accepted_answer_id":38754012,"answer_count":15,"score":77,"last_activity_date":1702054216,"creation_date":1470259479,"question_id":38753898,"body_markdown":"I have a dataframe with the following structure:\r\n\r\n     |-- data: struct (nullable = true)\r\n     |    |-- id: long (nullable = true)\r\n     |    |-- keyNote: struct (nullable = true)\r\n     |    |    |-- key: string (nullable = true)\r\n     |    |    |-- note: string (nullable = true)\r\n     |    |-- details: map (nullable = true)\r\n     |    |    |-- key: string\r\n     |    |    |-- value: string (valueContainsNull = true)\r\n\r\nHow it is possible to flatten the structure and create a new dataframe:\r\n\r\n         |-- id: long (nullable = true)\r\n         |-- keyNote: struct (nullable = true)\r\n         |    |-- key: string (nullable = true)\r\n         |    |-- note: string (nullable = true)\r\n         |-- details: map (nullable = true)\r\n         |    |-- key: string\r\n         |    |-- value: string (valueContainsNull = true)\r\n\r\nIs there something like explode, but for structs?","title":"How to flatten a struct in a Spark dataframe?","body":"<p>I have a dataframe with the following structure:</p>\n\n<pre><code> |-- data: struct (nullable = true)\n |    |-- id: long (nullable = true)\n |    |-- keyNote: struct (nullable = true)\n |    |    |-- key: string (nullable = true)\n |    |    |-- note: string (nullable = true)\n |    |-- details: map (nullable = true)\n |    |    |-- key: string\n |    |    |-- value: string (valueContainsNull = true)\n</code></pre>\n\n<p>How it is possible to flatten the structure and create a new dataframe:</p>\n\n<pre><code>     |-- id: long (nullable = true)\n     |-- keyNote: struct (nullable = true)\n     |    |-- key: string (nullable = true)\n     |    |-- note: string (nullable = true)\n     |-- details: map (nullable = true)\n     |    |-- key: string\n     |    |-- value: string (valueContainsNull = true)\n</code></pre>\n\n<p>Is there something like explode, but for structs?</p>\n"},{"tags":["java","spring","tomcat","smtp","ubuntu-22.04"],"owner":{"account_id":29842711,"reputation":1,"user_id":22870489,"display_name":"OzanD"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1702053385,"creation_date":1701905676,"question_id":77616901,"body_markdown":"I have a project created in Tomcat 7 / jdk1.7.0_21 / Spring Framework 4.0.1. I recently reinstalled it using Tomcat 8.0.3 / openjdk1.8.0_382 on Ubuntu 22.04. Everything works fine, except the email.\r\n&lt;br /&gt;I use Spring JavaMailSender to send emails using SMTP protocol. This configuration works very well through localhost:\r\n\r\n```\r\n    &lt;bean id=&quot;mailSender&quot; class=&quot;org.springframework.mail.javamail.JavaMailSenderImpl&quot;&gt;\r\n        &lt;property name=&quot;host&quot; value=&quot;smtp.office365.com&quot;/&gt;\r\n        &lt;property name=&quot;port&quot; value=&quot;587&quot;/&gt;\r\n        &lt;property name=&quot;protocol&quot; value=&quot;smtp&quot;/&gt;\r\n        &lt;property name=&quot;username&quot; value=&quot;example@outlook.es&quot;/&gt;\r\n        &lt;property name=&quot;password&quot; value=&quot;App Password&quot;/&gt;\r\n        &lt;property name=&quot;defaultEncoding&quot; value=&quot;UTF-8&quot;/&gt;\r\n        &lt;property name=&quot;javaMailProperties&quot;&gt;\r\n            &lt;props&gt;\r\n                &lt;prop key=&quot;mail.smtp.auth&quot;&gt;true&lt;/prop&gt;\r\n                &lt;prop key=&quot;mail.smtp.starttls.required&quot;&gt;true&lt;/prop&gt;\r\n                &lt;prop key=&quot;mail.smtp.starttls.enable&quot;&gt;true&lt;/prop&gt;\r\n                &lt;prop key=&quot;mail.transport.protocol&quot;&gt;smtp&lt;/prop&gt;\r\n                &lt;prop key=&quot;mail.smtp.ssl.trust&quot;&gt;smtp.office365.com&lt;/prop&gt;\r\n                &lt;prop key=&quot;mail.smtp.ssl.protocols&quot;&gt;TLSv1.2&lt;/prop&gt;\r\n                &lt;prop key=&quot;mail.smtp.timeout&quot;&gt;1000&lt;/prop&gt;\r\n                &lt;prop key=&quot;mail.debug&quot;&gt;true&lt;/prop&gt;\r\n                &lt;prop key=&quot;mail.mime.charset&quot;&gt;UTF-8&lt;/prop&gt;\r\n            &lt;/props&gt;\r\n        &lt;/property&gt;\r\n    &lt;/bean&gt;\r\n\r\n    &lt;bean id=&quot;preConfiguredMessage&quot; class=&quot;org.springframework.mail.SimpleMailMessage&quot;&gt;\r\n                &lt;property name=&quot;from&quot; value=&quot;example@outlook.es&quot;&gt;&lt;/property&gt;\r\n                &lt;property name=&quot;subject&quot; value=&quot;Subject&quot;&gt;&lt;/property&gt;\r\n    &lt;/bean&gt;\r\n```\r\n\r\nBut when I try it over the server the emails never arrive.\r\n&lt;br /&gt;I was having trouble connecting to smtp.office365.com over IPv6. When I made changes to gai.conf file, I started getting a 220 message.\r\n&lt;br /&gt;I think the 587 port is open, because I receive the 220 message and can send emails through the sSMTP program I installed to try, but even though I opened it in UFW, the 587/tcp port appears to be closed.\r\n\r\n```\r\n$ nmap -p 587 example.com\r\nPORT    STATE  SERVICE\r\n587/tcp closed submission\r\n```\r\n\r\nI suspect that the problem is caused by the difference between Java versions, but despite trying for a long time, I could not solve the problem.\r\n&lt;br /&gt;I will be grateful if you could help me.\r\n\r\n\r\n**EDIT:**\r\n&lt;br /&gt;When I tested SMTP with telnet and openssl, Outlook and Gmail gave errors, but I was able to send email with Yandex.\r\n\r\n```\r\n$ openssl s_client -connect smtp.yandex.com:465 -quiet\r\ndepth=2 OU = GlobalSign Root CA - R3, O = GlobalSign, CN = GlobalSign\r\nverify return:1\r\ndepth=1 C = BE, O = GlobalSign nv-sa, CN = GlobalSign RSA OV SSL CA 2018\r\nverify return:1\r\ndepth=0 C = RU, ST = Moscow, L = Moscow, O = Yandex LLC, CN = smtp.yandex.ru\r\nverify return:1\r\n220 mail-nwsmtp-smtp-production-main-60.sas.yp-c.yandex.net (Want to use Yandex.Mail for your domain? Visit http://pdd.yandex.ru) 1702031110-APb1qDNXu0U0\r\nEHLO example.com\r\n250-mail-nwsmtp-smtp-production-main-60.sas.yp-c.yandex.net\r\n250-8BITMIME\r\n250-PIPELINING\r\n250-SIZE 53477376\r\n250-STARTTLS\r\n250-AUTH LOGIN PLAIN XOAUTH2\r\n250-DSN\r\n250 ENHANCEDSTATUSCODES\r\nAUTH PLAIN AGluZm9AecWx0aW1zYWhkjgfjUTNvbQBkb2Jid2R1d255eWlxbWRv\r\n235 2.7.0 Authentication successful. 1702031132-APb1qDNXu0U0\r\nMAIL FROM: info@example.com\r\n250 2.1.0 &lt;info@example.com&gt; ok 1702031142-APb1qDNXu0U0-mV4GqJPK\r\nRCPT TO: info@example.com\r\n250 2.1.5 &lt;info@example.com&gt; recipient ok 1702031152-APb1qDNXu0U0-mV4GqJPK\r\nDATA\r\n354 Start mail input, end with &lt;CRLF&gt;.&lt;CRLF&gt;\r\nFrom: info@example.com\r\nTo: info@example.com\r\nSubject: Email client recommendation\r\nI&#39;m currently using openssl to send emails. Do you know if there are any good desktop applications that can send emails?\r\n.\r\n250 2.0.0 Ok: queued on mail-nwsmtp-smtp-production-main-60.sas.yp-c.yandex.net 1702031214-APp1qKnXu0U0-mV4GcJPK\r\n```\r\n\r\nSo I changed the JavaMailSender configuration as follows, but it still doesn&#39;t work.\r\n\r\n```\r\n    &lt;bean id=&quot;mailSender&quot; class=&quot;org.springframework.mail.javamail.JavaMailSenderImpl&quot;&gt;\r\n        &lt;property name=&quot;host&quot; value=&quot;smtp.yandex.com&quot;/&gt;\r\n        &lt;property name=&quot;port&quot; value=&quot;465&quot;/&gt;\r\n        &lt;property name=&quot;username&quot; value=&quot;info@example.com&quot;/&gt;\r\n        &lt;property name=&quot;password&quot; value=&quot;App Password&quot;/&gt;\r\n        &lt;property name=&quot;defaultEncoding&quot; value=&quot;UTF-8&quot;/&gt;\r\n        &lt;property name=&quot;javaMailProperties&quot;&gt;\r\n            &lt;props&gt;\r\n                &lt;prop key=&quot;mail.smtp.auth&quot;&gt;true&lt;/prop&gt;\r\n                &lt;prop key=&quot;mail.smtp.ssl.enable&quot;&gt;true&lt;/prop&gt;\r\n                &lt;prop key=&quot;mail.smtp.auth.mechanisms&quot;&gt;LOGIN PLAIN&lt;/prop&gt;\r\n                &lt;prop key=&quot;mail.smtp.ssl.trust&quot;&gt;smtp.yandex.com&lt;/prop&gt;\r\n                &lt;prop key=&quot;mail.mime.charset&quot;&gt;UTF-8&lt;/prop&gt;\r\n            &lt;/props&gt;\r\n        &lt;/property&gt;\r\n    &lt;/bean&gt;\r\n\r\n    &lt;bean id=&quot;preConfiguredMessage&quot; class=&quot;org.springframework.mail.SimpleMailMessage&quot;&gt;\t\t\r\n                &lt;property name=&quot;from&quot; value=&quot;info@example.com&quot;&gt;&lt;/property&gt;\r\n                &lt;property name=&quot;subject&quot; value=&quot;Subject&quot;&gt;&lt;/property&gt;\r\n    &lt;/bean&gt;\r\n```\r\n\r\nWhere am I making a mistake?\r\n","title":"Spring JavaMailSender not sending email via server","body":"<p>I have a project created in Tomcat 7 / jdk1.7.0_21 / Spring Framework 4.0.1. I recently reinstalled it using Tomcat 8.0.3 / openjdk1.8.0_382 on Ubuntu 22.04. Everything works fine, except the email.\n<br />I use Spring JavaMailSender to send emails using SMTP protocol. This configuration works very well through localhost:</p>\n<pre><code>    &lt;bean id=&quot;mailSender&quot; class=&quot;org.springframework.mail.javamail.JavaMailSenderImpl&quot;&gt;\n        &lt;property name=&quot;host&quot; value=&quot;smtp.office365.com&quot;/&gt;\n        &lt;property name=&quot;port&quot; value=&quot;587&quot;/&gt;\n        &lt;property name=&quot;protocol&quot; value=&quot;smtp&quot;/&gt;\n        &lt;property name=&quot;username&quot; value=&quot;example@outlook.es&quot;/&gt;\n        &lt;property name=&quot;password&quot; value=&quot;App Password&quot;/&gt;\n        &lt;property name=&quot;defaultEncoding&quot; value=&quot;UTF-8&quot;/&gt;\n        &lt;property name=&quot;javaMailProperties&quot;&gt;\n            &lt;props&gt;\n                &lt;prop key=&quot;mail.smtp.auth&quot;&gt;true&lt;/prop&gt;\n                &lt;prop key=&quot;mail.smtp.starttls.required&quot;&gt;true&lt;/prop&gt;\n                &lt;prop key=&quot;mail.smtp.starttls.enable&quot;&gt;true&lt;/prop&gt;\n                &lt;prop key=&quot;mail.transport.protocol&quot;&gt;smtp&lt;/prop&gt;\n                &lt;prop key=&quot;mail.smtp.ssl.trust&quot;&gt;smtp.office365.com&lt;/prop&gt;\n                &lt;prop key=&quot;mail.smtp.ssl.protocols&quot;&gt;TLSv1.2&lt;/prop&gt;\n                &lt;prop key=&quot;mail.smtp.timeout&quot;&gt;1000&lt;/prop&gt;\n                &lt;prop key=&quot;mail.debug&quot;&gt;true&lt;/prop&gt;\n                &lt;prop key=&quot;mail.mime.charset&quot;&gt;UTF-8&lt;/prop&gt;\n            &lt;/props&gt;\n        &lt;/property&gt;\n    &lt;/bean&gt;\n\n    &lt;bean id=&quot;preConfiguredMessage&quot; class=&quot;org.springframework.mail.SimpleMailMessage&quot;&gt;\n                &lt;property name=&quot;from&quot; value=&quot;example@outlook.es&quot;&gt;&lt;/property&gt;\n                &lt;property name=&quot;subject&quot; value=&quot;Subject&quot;&gt;&lt;/property&gt;\n    &lt;/bean&gt;\n</code></pre>\n<p>But when I try it over the server the emails never arrive.\n<br />I was having trouble connecting to smtp.office365.com over IPv6. When I made changes to gai.conf file, I started getting a 220 message.\n<br />I think the 587 port is open, because I receive the 220 message and can send emails through the sSMTP program I installed to try, but even though I opened it in UFW, the 587/tcp port appears to be closed.</p>\n<pre><code>$ nmap -p 587 example.com\nPORT    STATE  SERVICE\n587/tcp closed submission\n</code></pre>\n<p>I suspect that the problem is caused by the difference between Java versions, but despite trying for a long time, I could not solve the problem.\n<br />I will be grateful if you could help me.</p>\n<p><strong>EDIT:</strong>\n<br />When I tested SMTP with telnet and openssl, Outlook and Gmail gave errors, but I was able to send email with Yandex.</p>\n<pre><code>$ openssl s_client -connect smtp.yandex.com:465 -quiet\ndepth=2 OU = GlobalSign Root CA - R3, O = GlobalSign, CN = GlobalSign\nverify return:1\ndepth=1 C = BE, O = GlobalSign nv-sa, CN = GlobalSign RSA OV SSL CA 2018\nverify return:1\ndepth=0 C = RU, ST = Moscow, L = Moscow, O = Yandex LLC, CN = smtp.yandex.ru\nverify return:1\n220 mail-nwsmtp-smtp-production-main-60.sas.yp-c.yandex.net (Want to use Yandex.Mail for your domain? Visit http://pdd.yandex.ru) 1702031110-APb1qDNXu0U0\nEHLO example.com\n250-mail-nwsmtp-smtp-production-main-60.sas.yp-c.yandex.net\n250-8BITMIME\n250-PIPELINING\n250-SIZE 53477376\n250-STARTTLS\n250-AUTH LOGIN PLAIN XOAUTH2\n250-DSN\n250 ENHANCEDSTATUSCODES\nAUTH PLAIN AGluZm9AecWx0aW1zYWhkjgfjUTNvbQBkb2Jid2R1d255eWlxbWRv\n235 2.7.0 Authentication successful. 1702031132-APb1qDNXu0U0\nMAIL FROM: info@example.com\n250 2.1.0 &lt;info@example.com&gt; ok 1702031142-APb1qDNXu0U0-mV4GqJPK\nRCPT TO: info@example.com\n250 2.1.5 &lt;info@example.com&gt; recipient ok 1702031152-APb1qDNXu0U0-mV4GqJPK\nDATA\n354 Start mail input, end with &lt;CRLF&gt;.&lt;CRLF&gt;\nFrom: info@example.com\nTo: info@example.com\nSubject: Email client recommendation\nI'm currently using openssl to send emails. Do you know if there are any good desktop applications that can send emails?\n.\n250 2.0.0 Ok: queued on mail-nwsmtp-smtp-production-main-60.sas.yp-c.yandex.net 1702031214-APp1qKnXu0U0-mV4GcJPK\n</code></pre>\n<p>So I changed the JavaMailSender configuration as follows, but it still doesn't work.</p>\n<pre><code>    &lt;bean id=&quot;mailSender&quot; class=&quot;org.springframework.mail.javamail.JavaMailSenderImpl&quot;&gt;\n        &lt;property name=&quot;host&quot; value=&quot;smtp.yandex.com&quot;/&gt;\n        &lt;property name=&quot;port&quot; value=&quot;465&quot;/&gt;\n        &lt;property name=&quot;username&quot; value=&quot;info@example.com&quot;/&gt;\n        &lt;property name=&quot;password&quot; value=&quot;App Password&quot;/&gt;\n        &lt;property name=&quot;defaultEncoding&quot; value=&quot;UTF-8&quot;/&gt;\n        &lt;property name=&quot;javaMailProperties&quot;&gt;\n            &lt;props&gt;\n                &lt;prop key=&quot;mail.smtp.auth&quot;&gt;true&lt;/prop&gt;\n                &lt;prop key=&quot;mail.smtp.ssl.enable&quot;&gt;true&lt;/prop&gt;\n                &lt;prop key=&quot;mail.smtp.auth.mechanisms&quot;&gt;LOGIN PLAIN&lt;/prop&gt;\n                &lt;prop key=&quot;mail.smtp.ssl.trust&quot;&gt;smtp.yandex.com&lt;/prop&gt;\n                &lt;prop key=&quot;mail.mime.charset&quot;&gt;UTF-8&lt;/prop&gt;\n            &lt;/props&gt;\n        &lt;/property&gt;\n    &lt;/bean&gt;\n\n    &lt;bean id=&quot;preConfiguredMessage&quot; class=&quot;org.springframework.mail.SimpleMailMessage&quot;&gt;     \n                &lt;property name=&quot;from&quot; value=&quot;info@example.com&quot;&gt;&lt;/property&gt;\n                &lt;property name=&quot;subject&quot; value=&quot;Subject&quot;&gt;&lt;/property&gt;\n    &lt;/bean&gt;\n</code></pre>\n<p>Where am I making a mistake?</p>\n"},{"tags":["java","jenkins","upgrade"],"comments":[{"owner":{"account_id":12060587,"reputation":3933,"user_id":8819761,"display_name":"Jeroen Steenbeeke"},"score":0,"creation_date":1701980793,"post_id":77622761,"comment_id":136845046,"body_markdown":"What Jenkins version are we talking about? According to https://www.jenkins.io/doc/book/platform-information/support-policy-java/ you need to have at least version 2.419","body":"What Jenkins version are we talking about? According to <a href=\"https://www.jenkins.io/doc/book/platform-information/support-policy-java/\" rel=\"nofollow noreferrer\">jenkins.io/doc/book/platform-information/support-policy-java</a> you need to have at least version 2.419"},{"owner":{"account_id":15347294,"reputation":1,"user_id":11072282,"display_name":"Morgan Ledot"},"score":0,"creation_date":1701981027,"post_id":77622761,"comment_id":136845080,"body_markdown":"I upgraded to 2.435\n$ grep &quot;version&gt;&quot; /var/lib/jenkins/config.xml\n &gt; &lt;version&gt;2.435&lt;/version&gt;","body":"I upgraded to 2.435 $ grep &quot;version&gt;&quot; /var/lib/jenkins/config.xml  &gt; &lt;version&gt;2.435&lt;/version&gt;"},{"owner":{"account_id":12060587,"reputation":3933,"user_id":8819761,"display_name":"Jeroen Steenbeeke"},"score":0,"creation_date":1701981507,"post_id":77622761,"comment_id":136845142,"body_markdown":"My apologies, it appears you included that in your question to begin with. It looks like you&#39;re using systemd to start the service. Have you tried manually starting the command listed in the unit file to see if there&#39;s any output that might help you?","body":"My apologies, it appears you included that in your question to begin with. It looks like you&#39;re using systemd to start the service. Have you tried manually starting the command listed in the unit file to see if there&#39;s any output that might help you?"},{"owner":{"account_id":15347294,"reputation":1,"user_id":11072282,"display_name":"Morgan Ledot"},"score":0,"creation_date":1701982521,"post_id":77622761,"comment_id":136845287,"body_markdown":"Where can I find this command ? \nI added my init.d/jenkins file to the post","body":"Where can I find this command ?  I added my init.d/jenkins file to the post"},{"owner":{"account_id":12060587,"reputation":3933,"user_id":8819761,"display_name":"Jeroen Steenbeeke"},"score":0,"creation_date":1701983836,"post_id":77622761,"comment_id":136845511,"body_markdown":"Oh wow, haven&#39;t seen those in a while. From what I can tell from your init file the command to start Jenkins is basically just `java -jar /usr/share/jenkins/jenkins.war`, possibly with some extra parameters (those would be in /etc/default/jenkins probably)","body":"Oh wow, haven&#39;t seen those in a while. From what I can tell from your init file the command to start Jenkins is basically just <code>java -jar &#47;usr&#47;share&#47;jenkins&#47;jenkins.war</code>, possibly with some extra parameters (those would be in /etc/default/jenkins probably)"},{"owner":{"account_id":15347294,"reputation":1,"user_id":11072282,"display_name":"Morgan Ledot"},"score":0,"creation_date":1701986402,"post_id":77622761,"comment_id":136845823,"body_markdown":"Added the result","body":"Added the result"},{"owner":{"account_id":12060587,"reputation":3933,"user_id":8819761,"display_name":"Jeroen Steenbeeke"},"score":0,"creation_date":1701987407,"post_id":77622761,"comment_id":136845983,"body_markdown":"Aside from outdated plugin warnings it seems Jenkins starts quite nicely when started directly. That causes me to suspect there&#39;s an environment problem with regard to the init script rather than a Java 21 problem. Your system might not be able to find the Java executable with the user executing the service, or it might not have permission to access certain folders that the user you just tested with does have permission for","body":"Aside from outdated plugin warnings it seems Jenkins starts quite nicely when started directly. That causes me to suspect there&#39;s an environment problem with regard to the init script rather than a Java 21 problem. Your system might not be able to find the Java executable with the user executing the service, or it might not have permission to access certain folders that the user you just tested with does have permission for"},{"owner":{"account_id":15347294,"reputation":1,"user_id":11072282,"display_name":"Morgan Ledot"},"score":0,"creation_date":1701988812,"post_id":77622761,"comment_id":136846148,"body_markdown":"It looks like using java-17-openjdk brought back Jenkins, I will just stick to that until java-21-openjdk is tested and out","body":"It looks like using java-17-openjdk brought back Jenkins, I will just stick to that until java-21-openjdk is tested and out"}],"owner":{"account_id":15347294,"reputation":1,"user_id":11072282,"display_name":"Morgan Ledot"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":73,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1702053273,"creation_date":1701978608,"question_id":77622761,"body_markdown":"I recently upgraded my Jenkins to 2.435, after restarting my server and my service, I then attempted to upgrade Java 11 to Java 21 using this post\r\n[https://computingforgeeks.com/install-java-jdk-21-openjdk-21-on-ubuntu/ ](https://computingforgeeks.com/install-java-jdk-21-openjdk-21-on-ubuntu/)\r\n\r\n\r\nAfter restarting my server, my Jenkins service does not start anymore. I have tried changing the version allowed in `/etc/init.d/jenkins` :\r\n```\r\n# Work out the JAVA version we are working with:\r\n JAVA_VERSION=$($JAVA -version 2&gt;&amp;1 | sed -n &#39;;s/.* version &quot;\\([0-9]*\\)\\.\\([0-9]*\\)\\..*&quot;.*/\\1\\2/p;&#39;)    &lt;&lt; THIS \r\n        if [ &quot;${JAVA_VERSION}&quot; = &quot;1.8&quot; ]; then\r\n                echo &quot;Correct java version found&quot; &gt;&amp;2\r\n        elif [ &quot;${JAVA_VERSION}&quot; = &quot;21.0.1&quot; ]; then   &lt;&lt; THIS \r\n                echo &quot;Correct java version found&quot; &gt;&amp;2\r\n        else\r\n                echo &quot;Found an incorrect Java version&quot; &gt;&amp;2\r\n                echo &quot;Java version found:&quot; &gt;&amp;2\r\n                &quot;${JAVA}&quot; -version &gt;&amp;2\r\n                echo &quot;Aborting&quot; &gt;&amp;2\r\n                return 2\r\n        fi\r\n```\r\n \r\nI still get\r\n```-- The job identifier is 2380.\r\nDec 07 11:18:23 myApp jenkins[2864]: jenkins: invalid Java version: java version &quot;21.0.1&quot; 2023-10-17 LTS\r\nDec 07 11:18:23 myApp  jenkins[2864]: Java(TM) SE Runtime Environment (build 21.0.1+12-LTS-29)\r\nDec 07 11:18:23 myApp  jenkins[2864]: Java HotSpot(TM) 64-Bit Server VM (build 21.0.1+12-LTS-29, mixed mode, sharing)\r\nDec 07 11:18:23 myApp  systemd[1]: jenkins.service: Main process exited, code=exited, status=1/FAILURE\r\n-- Subject: Unit process exited\r\n-- Defined-By: systemd\r\n-- Support: http://www.ubuntu.com/support\r\n```\r\n\r\n\r\n`$ readlink -f $(which java)`\r\n&gt; /usr/lib/jvm/jdk-21-oracle-x64/bin/java\r\n\r\n`$ whereis jenkins`\r\n&gt; jenkins: /usr/bin/jenkins /usr/share/jenkins\r\n\r\nAny suggestions ?\r\nThanks\r\n\r\nEdit:\r\nthis is my `/etc/init.d/jenkins` file:\r\n```\r\n#!/usr/bin/env /lib/init/init-d-script\r\n# /etc/init.d/jenkins\r\n# debian-compatible jenkins startup script.\r\n# Amelia A Lewis &lt;alewis@ibco.com&gt;\r\n#\r\n### BEGIN INIT INFO\r\n# Provides:          jenkins\r\n# Required-Start:    $remote_fs $syslog $network\r\n# Required-Stop:     $remote_fs $syslog $network\r\n# Default-Start:     2 3 4 5\r\n# Default-Stop:      0 1 6\r\n# Short-Description: Start Jenkins at boot time\r\n# Description:       Controls Jenkins Automation Server\r\n### END INIT INFO\r\n\r\nDAEMON=none\r\nCOMMAND_NAME=java\r\nNAME=&quot;jenkins&quot;\r\nDESC=&quot;Jenkins Automation Server&quot;\r\nPREFIX=/jenkins\r\n\r\ncheck_arguments() {\r\n\t# Exit if not supposed to run standalone\r\n\tif [ &quot;${RUN_STANDALONE}&quot; = &quot;false&quot; ]; then\r\n\t\techo &quot;ERROR: Not configured to run standalone&quot; &gt;&amp;2\r\n\t\treturn 2\r\n\tfi\r\n\r\n\t# Make sure there exists a java executable, it may not be always the case\r\n\tJAVA=$(command -v &quot;${COMMAND_NAME}&quot;)\r\n\tif [ -z &quot;${JAVA}&quot; ]; then\r\n\t\techo &quot;ERROR: No Java executable found in current PATH: ${PATH}&quot; &gt;&amp;2\r\n\t\techo &quot;If you actually have Java installed on the system make sure the executable is in the aforementioned path and that &#39;command -v ${COMMAND_NAME}&#39; returns the Java executable path&quot; &gt;&amp;2\r\n\t\treturn 2\r\n\tfi\r\n\r\n\t# Work out the JAVA version we are working with:\r\n\tJAVA_VERSION=$($JAVA -version 2&gt;&amp;1 | sed -n &#39;;s/.* version &quot;\\([0-9]*\\)\\.\\([0-9]*\\)\\..*&quot;.*/\\1\\2/p;&#39;)\r\n\tif [ &quot;${JAVA_VERSION}&quot; = &quot;1.8&quot; ]; then\r\n\t\techo &quot;Correct java version found&quot; &gt;&amp;2\r\n\telif [ &quot;${JAVA_VERSION}&quot; = &quot;21.0.1&quot; ]; then\r\n\t\techo &quot;Correct java version found&quot; &gt;&amp;2\r\n\telse\r\n\t\techo &quot;Found an incorrect Java version&quot; &gt;&amp;2\r\n\t\techo &quot;Java version found:&quot; &gt;&amp;2\r\n\t\t&quot;${JAVA}&quot; -version &gt;&amp;2\r\n\t\techo &quot;Aborting&quot; &gt;&amp;2\r\n\t\treturn 2\r\n\tfi\r\n\r\n\t# Make sure we run as root, since setting the max open files through\r\n\t# ulimit requires root access\r\n\tif [ &quot;$(id -u)&quot; -gt 0 ]; then\r\n\t\techo &quot;The ${NAME} init script can only be run as root&quot; &gt;&amp;2\r\n\t\treturn 2\r\n\tfi\r\n}\r\n\r\ncheck_tcp_port() {\r\n\tservice=$1\r\n\tassigned=$2\r\n\tdefault=$3\r\n\tassigned_address=$4\r\n\tdefault_address=$5\r\n\r\n\tif [ -n &quot;${assigned}&quot; ]; then\r\n\t\tport=${assigned}\r\n\telse\r\n\t\tport=${default}\r\n\tfi\r\n\r\n\tif [ -n &quot;${assigned_address}&quot; ]; then\r\n\t\taddress=${assigned_address}\r\n\telse\r\n\t\taddress=${default_address}\r\n\tfi\r\n\r\n\tcount=$(netstat --listen --numeric-ports | grep &quot;${address}:${port}[[:space:]]&quot; | grep -c .)\r\n\r\n\tif [ &quot;${count}&quot; -gt 0 ]; then\r\n\t\techo &quot;The selected ${service} port (${port}) on address ${address} seems to be in use by another program &quot;\r\n\t\techo &quot;Please select another address/port combination to use for ${NAME}&quot;\r\n\t\treturn 2\r\n\tfi\r\n}\r\n\r\ndo_start_cmd_override() {\r\n\tcheck_arguments || return &quot;$?&quot;\r\n\r\n\t# load environments\r\n\tif [ -r /etc/default/locale ]; then\r\n\t\t. /etc/default/locale\r\n\t\texport LANG LANGUAGE\r\n\telif [ -r /etc/environment ]; then\r\n\t\t. /etc/environment\r\n\t\texport LANG LANGUAGE\r\n\tfi\r\n\texport JENKINS_HOME\r\n\r\n\t# the default location is /var/run/jenkins/jenkins.pid but the parent directory needs to be created\r\n\tmkdir -p &quot;$(dirname &quot;${PIDFILE}&quot;)&quot; || return 2\r\n\tchown &quot;${JENKINS_USER}&quot; &quot;$(dirname &quot;${PIDFILE}&quot;)&quot; || return 2\r\n\r\n\t# Verify that the jenkins port is not already in use, winstone does not exit\r\n\t# even for BindException\r\n\tcheck_tcp_port &quot;http&quot; &quot;${HTTP_PORT}&quot; &quot;8080&quot; &quot;${HTTP_HOST}&quot; &quot;0.0.0.0&quot; || return 2\r\n\r\n\t# If the var MAXOPENFILES is enabled in /etc/default/jenkins then set the max open files to the\r\n\t# proper value\r\n\tif [ -n &quot;${MAXOPENFILES}&quot; ]; then\r\n\t\t[ &quot;${VERBOSE}&quot; != no ] &amp;&amp; echo &quot;Setting up max open files limit to ${MAXOPENFILES}&quot;\r\n\t\tulimit -n &quot;${MAXOPENFILES}&quot; || return 2\r\n\tfi\r\n\t# notify of explicit umask\r\n\tif [ -n &quot;${UMASK}&quot; ]; then\r\n\t\t[ &quot;${VERBOSE}&quot; != no ] &amp;&amp; echo &quot;Setting umask to ${UMASK}&quot;\r\n\tfi\r\n\r\n\t# enable access log\r\n\tif [ &quot;${JENKINS_ENABLE_ACCESS_LOG}&quot; = &quot;yes&quot; ]; then\r\n\t\tJENKINS_ARGS=&quot;${JENKINS_ARGS} --accessLoggerClassName=winstone.accesslog.SimpleAccessLogger --simpleAccessLogger.format=combined --simpleAccessLogger.file=/var/log/${NAME}/access_log&quot;\r\n\tfi\r\n\r\n\t# start-stop-daemon --chuid/--group doesn&#39;t prepare environment variables\r\n\t# like HOME, USER, LOGNAME or USERNAME, so re-export these\r\n\tSHELL=$(awk -F: &quot;\\$1 == \\&quot;${JENKINS_USER}\\&quot; {print \\$NF}&quot; /etc/passwd)\r\n\t[ -n &quot;${SHELL}&quot; ] || SHELL=/bin/bash\r\n\tHOME=&quot;${JENKINS_HOME}&quot; \\\r\n\t\tSHELL=&quot;${SHELL}&quot; \\\r\n\t\tUSER=&quot;${JENKINS_USER}&quot; \\\r\n\t\tPREFIX=&quot;${PREFIX}&quot;\t\\\r\n\t\tLOGNAME=&quot;${JENKINS_USER}&quot; \\\r\n\t\tUSERNAME=&quot;${JENKINS_USER}&quot; \\\r\n\t\tPWD=&quot;${JENKINS_HOME}&quot; \\\r\n\t\teval \\\r\n\t\tstart-stop-daemon \\\r\n\t\t--start \\\r\n\t\t--quiet \\\r\n\t\t--oknodo \\\r\n\t\t--background \\\r\n\t\t--no-close \\\r\n\t\t--make-pidfile \\\r\n\t\t--pidfile &quot;${PIDFILE}&quot; \\\r\n\t\t--chdir &quot;${JENKINS_HOME}&quot; \\\r\n\t\t--chuid &quot;${JENKINS_USER}&quot; \\\r\n\t\t--user &quot;${JENKINS_USER}&quot; \\\r\n\t\t--group &quot;${JENKINS_GROUP}&quot; \\\r\n\t\t--name &quot;${COMMAND_NAME}&quot; \\\r\n\t\t--exec &quot;${JAVA}&quot; \\\r\n\t\t${UMASK:+--umask ${UMASK}} \\\r\n\t\t-- ${JAVA_ARGS} -jar &quot;${JENKINS_WAR}&quot; ${JENKINS_ARGS} &gt;&gt;&quot;${JENKINS_LOG}&quot; 2&gt;&amp;1\r\n\tRETVAL=&quot;$?&quot;\r\n\t[ &quot;${RETVAL}&quot; = 2 ] &amp;&amp; return 2\r\n\t# Verify the process did in fact start successfully and didn&#39;t just bomb out\r\n\tsleep 1\r\n\tATTEMPT=1\r\n\twhile [ ${ATTEMPT} -le 30 ]; do\r\n\t\tpidofproc -p &quot;${PIDFILE}&quot; &quot;${JAVA}&quot; &gt;/dev/null &amp;&amp; break\r\n\t\t[ &quot;${ATTEMPT}&quot; = 30 ] &amp;&amp; return 2\r\n\t\tsleep 1\r\n\t\tATTEMPT=$((ATTEMPT + 1))\r\n\tdone\r\n\treturn &quot;${RETVAL}&quot;\r\n}\r\n\r\ndo_stop_cmd_override() {\r\n\tcheck_arguments || return &quot;$?&quot;\r\n\tstart-stop-daemon \\\r\n\t\t--stop \\\r\n\t\t--quiet \\\r\n\t\t--oknodo \\\r\n\t\t--prefix=&quot;${PREFIX}&quot; \\\r\n\t\t--pidfile &quot;${PIDFILE}&quot; \\\r\n\t\t--chdir &quot;${JENKINS_HOME}&quot; \\\r\n\t\t--chuid &quot;${JENKINS_USER}&quot; \\\r\n\t\t--user &quot;${JENKINS_USER}&quot; \\\r\n\t\t--group &quot;${JENKINS_GROUP}&quot; \\\r\n\t\t--name &quot;${COMMAND_NAME}&quot; \\\r\n\t\t--exec &quot;${JAVA}&quot; \\\r\n\t\t--retry=TERM/30/KILL/5\r\n\tRETVAL=&quot;$?&quot;\r\n\t[ &quot;${RETVAL}&quot; = 2 ] &amp;&amp; return 2\r\n\t# Wait for children to finish too if this is a daemon that forks\r\n\t# and if the daemon is only ever run from this initscript.\r\n\t# If the above conditions are not satisfied then add some other code\r\n\t# that waits for the process to drop all resources that could be\r\n\t# needed by services started subsequently.  A last resort is to\r\n\t# sleep for some time.\r\n\tstart-stop-daemon \\\r\n\t\t--stop \\\r\n\t\t--quiet \\\r\n\t\t--oknodo \\\r\n\t\t--prefix=/jenkins \\\r\n\t\t--pidfile &quot;${PIDFILE}&quot; \\\r\n\t\t--chdir &quot;${JENKINS_HOME}&quot; \\\r\n\t\t--chuid &quot;${JENKINS_USER}&quot; \\\r\n\t\t--user &quot;${JENKINS_USER}&quot; \\\r\n\t\t--group &quot;${JENKINS_GROUP}&quot; \\\r\n\t\t--name &quot;${COMMAND_NAME}&quot; \\\r\n\t\t--exec &quot;${JAVA}&quot; \\\r\n\t\t--retry=0/30/KILL/5\r\n\t[ &quot;$?&quot; = 2 ] &amp;&amp; return 2\r\n\t# Many daemons don&#39;t delete their pidfiles when they exit.\r\n\trm -f &quot;${PIDFILE}&quot;\r\n\treturn &quot;${RETVAL}&quot;\r\n}\r\n\r\ndo_status_override() {\r\n\tcheck_arguments || return &quot;$?&quot;\r\n\tstatus_of_proc &quot;${JAVA}&quot; &quot;${NAME}&quot; -p &quot;${PIDFILE}&quot;\r\n}\r\n```\r\n\r\nEDIT:\r\n\r\nfrom `/usr/share/java/`\r\nJenkins seems fully loaded, still cant access it in browser, I get a 404, hardly had issues with nginx before, I&#39;m wondering if I have several jenkins versions installed at different places\r\n``` \r\njava -jar ./jenkins.war\r\nRunning from: /usr/share/java/jenkins.war\r\nwebroot: /root/.jenkins/war\r\n2023-12-07 21:24:34.618+0000 [id=1]\tINFO\twinstone.Logger#logInternal: Beginning extraction from war file\r\n2023-12-07 21:24:34.789+0000 [id=1]\tWARNING\to.e.j.s.handler.ContextHandler#setContextPath: Empty contextPath\r\n2023-12-07 21:24:34.892+0000 [id=1]\tINFO\torg.eclipse.jetty.server.Server#doStart: jetty-10.0.18; built: 2023-10-27T01:59:58.245Z; git: 8545fd9bf4cd0d0838f626b405fd4963441546b7; jvm 21.0.1+12-LTS-29\r\n2023-12-07 21:24:35.484+0000 [id=1]\tINFO\to.e.j.w.StandardDescriptorProcessor#visitServlet: NO JSP Support for /, did not find org.eclipse.jetty.jsp.JettyJspServlet\r\n2023-12-07 21:24:35.557+0000 [id=1]\tINFO\to.e.j.s.s.DefaultSessionIdManager#doStart: Session workerName=node0\r\n2023-12-07 21:24:36.353+0000 [id=1]\tINFO\thudson.WebAppMain#contextInitialized: Jenkins home directory: /root/.jenkins found at: $user.home/.jenkins\r\n2023-12-07 21:24:36.551+0000 [id=1]\tINFO\to.e.j.s.handler.ContextHandler#doStart: Started w.@51768776{Jenkins v2.435,/,file:///root/.jenkins/war/,AVAILABLE}{/root/.jenkins/war}\r\n2023-12-07 21:24:36.570+0000 [id=1]\tINFO\to.e.j.server.AbstractConnector#doStart: Started ServerConnector@32a068d1{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}\r\n2023-12-07 21:24:36.599+0000 [id=1]\tINFO\torg.eclipse.jetty.server.Server#doStart: Started Server@35fc6dc4{STARTING}[10.0.18,sto=0] @2830ms\r\n2023-12-07 21:24:36.601+0000 [id=35]\tINFO\twinstone.Logger#logInternal: Winstone Servlet Engine running: controlPort=disabled\r\n2023-12-07 21:24:36.924+0000 [id=43]\tINFO\tjenkins.InitReactorRunner$1#onAttained: Started initialization\r\n2023-12-07 21:24:37.280+0000 [id=41]\tINFO\tjenkins.InitReactorRunner$1#onAttained: Listed all plugins\r\n2023-12-07 21:24:37.740+0000 [id=46]\tSEVERE\tjenkins.InitReactorRunner$1#onTaskFailed: Failed Loading plugin Mina SSHD API :: Core v2.11.0-86.v836f585d47fa_ (mina-sshd-api-core)\r\njava.io.IOException: Failed to load: Mina SSHD API :: Core (mina-sshd-api-core 2.11.0-86.v836f585d47fa_)\r\n - Update required: SSH Credentials Plugin (ssh-credentials 1.19) to be updated to 305.v8f4381501156 or higher\r\n\tat hudson.PluginWrapper.resolvePluginDependencies(PluginWrapper.java:988)\r\n\tat hudson.PluginManager$2$1$1.run(PluginManager.java:552)\r\n\tat org.jvnet.hudson.reactor.TaskGraphBuilder$TaskImpl.run(TaskGraphBuilder.java:177)\r\n\tat org.jvnet.hudson.reactor.Reactor.runTask(Reactor.java:305)\r\n\tat jenkins.model.Jenkins$5.runTask(Jenkins.java:1170)\r\n\tat org.jvnet.hudson.reactor.Reactor$2.run(Reactor.java:221)\r\n\tat org.jvnet.hudson.reactor.Reactor$Node.run(Reactor.java:120)\r\n\tat jenkins.security.ImpersonatingExecutorService$1.run(ImpersonatingExecutorService.java:68)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\n2023-12-07 21:24:37.743+0000 [id=44]\tSEVERE\tjenkins.InitReactorRunner$1#onTaskFailed: Failed Loading plugin SSH server v3.312.v1c601b_c83b_0e (sshd)\r\njava.io.IOException: Failed to load: SSH server (sshd 3.312.v1c601b_c83b_0e)\r\n - Failed to load: Mina SSHD API :: Core (mina-sshd-api-core 2.11.0-86.v836f585d47fa_)\r\n\tat hudson.PluginWrapper.resolvePluginDependencies(PluginWrapper.java:988)\r\n\tat hudson.PluginManager$2$1$1.run(PluginManager.java:552)\r\n\tat org.jvnet.hudson.reactor.TaskGraphBuilder$TaskImpl.run(TaskGraphBuilder.java:177)\r\n\tat org.jvnet.hudson.reactor.Reactor.runTask(Reactor.java:305)\r\n\tat jenkins.model.Jenkins$5.runTask(Jenkins.java:1170)\r\n\tat org.jvnet.hudson.reactor.Reactor$2.run(Reactor.java:221)\r\n\tat org.jvnet.hudson.reactor.Reactor$Node.run(Reactor.java:120)\r\n\tat jenkins.security.ImpersonatingExecutorService$1.run(ImpersonatingExecutorService.java:68)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\n2023-12-07 21:24:37.851+0000 [id=47]\tSEVERE\tjenkins.InitReactorRunner$1#onTaskFailed: Failed Loading plugin Jenkins GIT server Plugin v1.10 (git-server)\r\njava.io.IOException: Failed to load: Jenkins GIT server Plugin (git-server 1.10)\r\n - Failed to load: SSH server (sshd 3.312.v1c601b_c83b_0e)\r\n\tat hudson.PluginWrapper.resolvePluginDependencies(PluginWrapper.java:988)\r\n\tat hudson.PluginManager$2$1$1.run(PluginManager.java:552)\r\n\tat org.jvnet.hudson.reactor.TaskGraphBuilder$TaskImpl.run(TaskGraphBuilder.java:177)\r\n\tat org.jvnet.hudson.reactor.Reactor.runTask(Reactor.java:305)\r\n\tat jenkins.model.Jenkins$5.runTask(Jenkins.java:1170)\r\n\tat org.jvnet.hudson.reactor.Reactor$2.run(Reactor.java:221)\r\n\tat org.jvnet.hudson.reactor.Reactor$Node.run(Reactor.java:120)\r\n\tat jenkins.security.ImpersonatingExecutorService$1.run(ImpersonatingExecutorService.java:68)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\n2023-12-07 21:24:37.922+0000 [id=41]\tSEVERE\tjenkins.InitReactorRunner$1#onTaskFailed: Failed Loading plugin Matrix Authorization Strategy Plugin v3.2.1 (matrix-auth)\r\njava.io.IOException: Failed to load: Matrix Authorization Strategy Plugin (matrix-auth 3.2.1)\r\n - Update required: Folders Plugin (cloudbees-folder 6.708.ve61636eb_65a_5) to be updated to 6.815.v0dd5a_cb_40e0e or higher\r\n\tat hudson.PluginWrapper.resolvePluginDependencies(PluginWrapper.java:988)\r\n\tat hudson.PluginManager$2$1$1.run(PluginManager.java:552)\r\n\tat org.jvnet.hudson.reactor.TaskGraphBuilder$TaskImpl.run(TaskGraphBuilder.java:177)\r\n\tat org.jvnet.hudson.reactor.Reactor.runTask(Reactor.java:305)\r\n\tat jenkins.model.Jenkins$5.runTask(Jenkins.java:1170)\r\n\tat org.jvnet.hudson.reactor.Reactor$2.run(Reactor.java:221)\r\n\tat org.jvnet.hudson.reactor.Reactor$Node.run(Reactor.java:120)\r\n\tat jenkins.security.ImpersonatingExecutorService$1.run(ImpersonatingExecutorService.java:68)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\n2023-12-07 21:24:37.924+0000 [id=41]\tSEVERE\tjenkins.InitReactorRunner$1#onTaskFailed: Failed Loading plugin Pipeline: Shared Groovy Libraries v564.ve62a_4eb_b_e039 (workflow-cps-global-lib)\r\njava.io.IOException: Failed to load: Pipeline: Shared Groovy Libraries (workflow-cps-global-lib 564.ve62a_4eb_b_e039)\r\n - Failed to load: Jenkins GIT server Plugin (git-server 1.10)\r\n\tat hudson.PluginWrapper.resolvePluginDependencies(PluginWrapper.java:988)\r\n\tat hudson.PluginManager$2$1$1.run(PluginManager.java:552)\r\n\tat org.jvnet.hudson.reactor.TaskGraphBuilder$TaskImpl.run(TaskGraphBuilder.java:177)\r\n\tat org.jvnet.hudson.reactor.Reactor.runTask(Reactor.java:305)\r\n\tat jenkins.model.Jenkins$5.runTask(Jenkins.java:1170)\r\n\tat org.jvnet.hudson.reactor.Reactor$2.run(Reactor.java:221)\r\n\tat org.jvnet.hudson.reactor.Reactor$Node.run(Reactor.java:120)\r\n\tat jenkins.security.ImpersonatingExecutorService$1.run(ImpersonatingExecutorService.java:68)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\n2023-12-07 21:24:37.925+0000 [id=41]\tSEVERE\tjenkins.InitReactorRunner$1#onTaskFailed: Failed Loading plugin Pipeline: GitHub Groovy Libraries v36.v4c01db_ca_ed16 (pipeline-github-lib)\r\njava.io.IOException: Failed to load: Pipeline: GitHub Groovy Libraries (pipeline-github-lib 36.v4c01db_ca_ed16)\r\n - Failed to load: Pipeline: Shared Groovy Libraries (workflow-cps-global-lib 564.ve62a_4eb_b_e039)\r\n\tat hudson.PluginWrapper.resolvePluginDependencies(PluginWrapper.java:988)\r\n\tat hudson.PluginManager$2$1$1.run(PluginManager.java:552)\r\n\tat org.jvnet.hudson.reactor.TaskGraphBuilder$TaskImpl.run(TaskGraphBuilder.java:177)\r\n\tat org.jvnet.hudson.reactor.Reactor.runTask(Reactor.java:305)\r\n\tat jenkins.model.Jenkins$5.runTask(Jenkins.java:1170)\r\n\tat org.jvnet.hudson.reactor.Reactor$2.run(Reactor.java:221)\r\n\tat org.jvnet.hudson.reactor.Reactor$Node.run(Reactor.java:120)\r\n\tat jenkins.security.ImpersonatingExecutorService$1.run(ImpersonatingExecutorService.java:68)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\n2023-12-07 21:24:37.929+0000 [id=42]\tSEVERE\tjenkins.InitReactorRunner$1#onTaskFailed: Failed Loading plugin Pipeline: Declarative v2.2064.v5eef7d0982b_e (pipeline-model-definition)\r\njava.io.IOException: Failed to load: Pipeline: Declarative (pipeline-model-definition 2.2064.v5eef7d0982b_e)\r\n - Failed to load: Pipeline: Shared Groovy Libraries (workflow-cps-global-lib 564.ve62a_4eb_b_e039)\r\n\tat hudson.PluginWrapper.resolvePluginDependencies(PluginWrapper.java:988)\r\n\tat hudson.PluginManager$2$1$1.run(PluginManager.java:552)\r\n\tat org.jvnet.hudson.reactor.TaskGraphBuilder$TaskImpl.run(TaskGraphBuilder.java:177)\r\n\tat org.jvnet.hudson.reactor.Reactor.runTask(Reactor.java:305)\r\n\tat jenkins.model.Jenkins$5.runTask(Jenkins.java:1170)\r\n\tat org.jvnet.hudson.reactor.Reactor$2.run(Reactor.java:221)\r\n\tat org.jvnet.hudson.reactor.Reactor$Node.run(Reactor.java:120)\r\n\tat jenkins.security.ImpersonatingExecutorService$1.run(ImpersonatingExecutorService.java:68)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\n2023-12-07 21:24:37.951+0000 [id=40]\tSEVERE\tjenkins.InitReactorRunner$1#onTaskFailed: Failed Loading plugin Pipeline v2.6 (workflow-aggregator)\r\njava.io.IOException: Failed to load: Pipeline (workflow-aggregator 2.6)\r\n - Failed to load: Pipeline: Shared Groovy Libraries (workflow-cps-global-lib 564.ve62a_4eb_b_e039)\r\n\tat hudson.PluginWrapper.resolvePluginDependencies(PluginWrapper.java:988)\r\n\tat hudson.PluginManager$2$1$1.run(PluginManager.java:552)\r\n\tat org.jvnet.hudson.reactor.TaskGraphBuilder$TaskImpl.run(TaskGraphBuilder.java:177)\r\n\tat org.jvnet.hudson.reactor.Reactor.runTask(Reactor.java:305)\r\n\tat jenkins.model.Jenkins$5.runTask(Jenkins.java:1170)\r\n\tat org.jvnet.hudson.reactor.Reactor$2.run(Reactor.java:221)\r\n\tat org.jvnet.hudson.reactor.Reactor$Node.run(Reactor.java:120)\r\n\tat jenkins.security.ImpersonatingExecutorService$1.run(ImpersonatingExecutorService.java:68)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\n2023-12-07 21:24:41.333+0000 [id=40]\tINFO\tjenkins.InitReactorRunner$1#onAttained: Prepared all plugins\r\n2023-12-07 21:24:41.353+0000 [id=40]\tINFO\tjenkins.InitReactorRunner$1#onAttained: Started all plugins\r\n2023-12-07 21:24:41.369+0000 [id=44]\tINFO\tjenkins.InitReactorRunner$1#onAttained: Augmented all extensions\r\n2023-12-07 21:24:42.281+0000 [id=45]\tINFO\tjenkins.InitReactorRunner$1#onAttained: System config loaded\r\n2023-12-07 21:24:42.282+0000 [id=45]\tINFO\tjenkins.InitReactorRunner$1#onAttained: System config adapted\r\n2023-12-07 21:24:42.297+0000 [id=43]\tINFO\tjenkins.InitReactorRunner$1#onAttained: Loaded all jobs\r\n2023-12-07 21:24:42.310+0000 [id=47]\tINFO\tjenkins.InitReactorRunner$1#onAttained: Configuration for all jobs updated\r\n2023-12-07 21:24:42.604+0000 [id=42]\tINFO\tjenkins.InitReactorRunner$1#onAttained: Completed initialization\r\n2023-12-07 21:24:42.628+0000 [id=34]\tINFO\thudson.lifecycle.Lifecycle#onReady: Jenkins is fully up and running\r\n\r\n```\r\n\r\nEdit #2: \r\nI just tried switching between my Java versions using \r\n`update-alternative`\r\nIt seems that using 11 or 17 brings Jenkins back up, 21 causes the issue:\r\n```\r\n$ sudo update-alternatives --config java\r\nThere are 4 choices for the alternative java (providing /usr/bin/java).\r\n\r\n  Selection    Path                                            Priority   Status\r\n------------------------------------------------------------\r\n  0            /usr/lib/jvm/jdk-21-oracle-x64/bin/java          352329728 auto mode\r\n  1            /usr/lib/jvm/java-11-openjdk-amd64/bin/java      1111      manual mode\r\n* 2            /usr/lib/jvm/java-17-openjdk-amd64/bin/java      1711      manual mode\r\n  3            /usr/lib/jvm/java-8-openjdk-amd64/jre/bin/java   1081      manual mode\r\n  4            /usr/lib/jvm/jdk-21-oracle-x64/bin/java          352329728 manual mode\r\n\r\n```","title":"Solved - Jenkins not working after upgrading to Java 21","body":"<p>I recently upgraded my Jenkins to 2.435, after restarting my server and my service, I then attempted to upgrade Java 11 to Java 21 using this post\n<a href=\"https://computingforgeeks.com/install-java-jdk-21-openjdk-21-on-ubuntu/\" rel=\"nofollow noreferrer\">https://computingforgeeks.com/install-java-jdk-21-openjdk-21-on-ubuntu/ </a></p>\n<p>After restarting my server, my Jenkins service does not start anymore. I have tried changing the version allowed in <code>/etc/init.d/jenkins</code> :</p>\n<pre><code># Work out the JAVA version we are working with:\n JAVA_VERSION=$($JAVA -version 2&gt;&amp;1 | sed -n ';s/.* version &quot;\\([0-9]*\\)\\.\\([0-9]*\\)\\..*&quot;.*/\\1\\2/p;')    &lt;&lt; THIS \n        if [ &quot;${JAVA_VERSION}&quot; = &quot;1.8&quot; ]; then\n                echo &quot;Correct java version found&quot; &gt;&amp;2\n        elif [ &quot;${JAVA_VERSION}&quot; = &quot;21.0.1&quot; ]; then   &lt;&lt; THIS \n                echo &quot;Correct java version found&quot; &gt;&amp;2\n        else\n                echo &quot;Found an incorrect Java version&quot; &gt;&amp;2\n                echo &quot;Java version found:&quot; &gt;&amp;2\n                &quot;${JAVA}&quot; -version &gt;&amp;2\n                echo &quot;Aborting&quot; &gt;&amp;2\n                return 2\n        fi\n</code></pre>\n<p>I still get</p>\n<pre><code>Dec 07 11:18:23 myApp jenkins[2864]: jenkins: invalid Java version: java version &quot;21.0.1&quot; 2023-10-17 LTS\nDec 07 11:18:23 myApp  jenkins[2864]: Java(TM) SE Runtime Environment (build 21.0.1+12-LTS-29)\nDec 07 11:18:23 myApp  jenkins[2864]: Java HotSpot(TM) 64-Bit Server VM (build 21.0.1+12-LTS-29, mixed mode, sharing)\nDec 07 11:18:23 myApp  systemd[1]: jenkins.service: Main process exited, code=exited, status=1/FAILURE\n-- Subject: Unit process exited\n-- Defined-By: systemd\n-- Support: http://www.ubuntu.com/support\n</code></pre>\n<p><code>$ readlink -f $(which java)</code></p>\n<blockquote>\n<p>/usr/lib/jvm/jdk-21-oracle-x64/bin/java</p>\n</blockquote>\n<p><code>$ whereis jenkins</code></p>\n<blockquote>\n<p>jenkins: /usr/bin/jenkins /usr/share/jenkins</p>\n</blockquote>\n<p>Any suggestions ?\nThanks</p>\n<p>Edit:\nthis is my <code>/etc/init.d/jenkins</code> file:</p>\n<pre><code>#!/usr/bin/env /lib/init/init-d-script\n# /etc/init.d/jenkins\n# debian-compatible jenkins startup script.\n# Amelia A Lewis &lt;alewis@ibco.com&gt;\n#\n### BEGIN INIT INFO\n# Provides:          jenkins\n# Required-Start:    $remote_fs $syslog $network\n# Required-Stop:     $remote_fs $syslog $network\n# Default-Start:     2 3 4 5\n# Default-Stop:      0 1 6\n# Short-Description: Start Jenkins at boot time\n# Description:       Controls Jenkins Automation Server\n### END INIT INFO\n\nDAEMON=none\nCOMMAND_NAME=java\nNAME=&quot;jenkins&quot;\nDESC=&quot;Jenkins Automation Server&quot;\nPREFIX=/jenkins\n\ncheck_arguments() {\n    # Exit if not supposed to run standalone\n    if [ &quot;${RUN_STANDALONE}&quot; = &quot;false&quot; ]; then\n        echo &quot;ERROR: Not configured to run standalone&quot; &gt;&amp;2\n        return 2\n    fi\n\n    # Make sure there exists a java executable, it may not be always the case\n    JAVA=$(command -v &quot;${COMMAND_NAME}&quot;)\n    if [ -z &quot;${JAVA}&quot; ]; then\n        echo &quot;ERROR: No Java executable found in current PATH: ${PATH}&quot; &gt;&amp;2\n        echo &quot;If you actually have Java installed on the system make sure the executable is in the aforementioned path and that 'command -v ${COMMAND_NAME}' returns the Java executable path&quot; &gt;&amp;2\n        return 2\n    fi\n\n    # Work out the JAVA version we are working with:\n    JAVA_VERSION=$($JAVA -version 2&gt;&amp;1 | sed -n ';s/.* version &quot;\\([0-9]*\\)\\.\\([0-9]*\\)\\..*&quot;.*/\\1\\2/p;')\n    if [ &quot;${JAVA_VERSION}&quot; = &quot;1.8&quot; ]; then\n        echo &quot;Correct java version found&quot; &gt;&amp;2\n    elif [ &quot;${JAVA_VERSION}&quot; = &quot;21.0.1&quot; ]; then\n        echo &quot;Correct java version found&quot; &gt;&amp;2\n    else\n        echo &quot;Found an incorrect Java version&quot; &gt;&amp;2\n        echo &quot;Java version found:&quot; &gt;&amp;2\n        &quot;${JAVA}&quot; -version &gt;&amp;2\n        echo &quot;Aborting&quot; &gt;&amp;2\n        return 2\n    fi\n\n    # Make sure we run as root, since setting the max open files through\n    # ulimit requires root access\n    if [ &quot;$(id -u)&quot; -gt 0 ]; then\n        echo &quot;The ${NAME} init script can only be run as root&quot; &gt;&amp;2\n        return 2\n    fi\n}\n\ncheck_tcp_port() {\n    service=$1\n    assigned=$2\n    default=$3\n    assigned_address=$4\n    default_address=$5\n\n    if [ -n &quot;${assigned}&quot; ]; then\n        port=${assigned}\n    else\n        port=${default}\n    fi\n\n    if [ -n &quot;${assigned_address}&quot; ]; then\n        address=${assigned_address}\n    else\n        address=${default_address}\n    fi\n\n    count=$(netstat --listen --numeric-ports | grep &quot;${address}:${port}[[:space:]]&quot; | grep -c .)\n\n    if [ &quot;${count}&quot; -gt 0 ]; then\n        echo &quot;The selected ${service} port (${port}) on address ${address} seems to be in use by another program &quot;\n        echo &quot;Please select another address/port combination to use for ${NAME}&quot;\n        return 2\n    fi\n}\n\ndo_start_cmd_override() {\n    check_arguments || return &quot;$?&quot;\n\n    # load environments\n    if [ -r /etc/default/locale ]; then\n        . /etc/default/locale\n        export LANG LANGUAGE\n    elif [ -r /etc/environment ]; then\n        . /etc/environment\n        export LANG LANGUAGE\n    fi\n    export JENKINS_HOME\n\n    # the default location is /var/run/jenkins/jenkins.pid but the parent directory needs to be created\n    mkdir -p &quot;$(dirname &quot;${PIDFILE}&quot;)&quot; || return 2\n    chown &quot;${JENKINS_USER}&quot; &quot;$(dirname &quot;${PIDFILE}&quot;)&quot; || return 2\n\n    # Verify that the jenkins port is not already in use, winstone does not exit\n    # even for BindException\n    check_tcp_port &quot;http&quot; &quot;${HTTP_PORT}&quot; &quot;8080&quot; &quot;${HTTP_HOST}&quot; &quot;0.0.0.0&quot; || return 2\n\n    # If the var MAXOPENFILES is enabled in /etc/default/jenkins then set the max open files to the\n    # proper value\n    if [ -n &quot;${MAXOPENFILES}&quot; ]; then\n        [ &quot;${VERBOSE}&quot; != no ] &amp;&amp; echo &quot;Setting up max open files limit to ${MAXOPENFILES}&quot;\n        ulimit -n &quot;${MAXOPENFILES}&quot; || return 2\n    fi\n    # notify of explicit umask\n    if [ -n &quot;${UMASK}&quot; ]; then\n        [ &quot;${VERBOSE}&quot; != no ] &amp;&amp; echo &quot;Setting umask to ${UMASK}&quot;\n    fi\n\n    # enable access log\n    if [ &quot;${JENKINS_ENABLE_ACCESS_LOG}&quot; = &quot;yes&quot; ]; then\n        JENKINS_ARGS=&quot;${JENKINS_ARGS} --accessLoggerClassName=winstone.accesslog.SimpleAccessLogger --simpleAccessLogger.format=combined --simpleAccessLogger.file=/var/log/${NAME}/access_log&quot;\n    fi\n\n    # start-stop-daemon --chuid/--group doesn't prepare environment variables\n    # like HOME, USER, LOGNAME or USERNAME, so re-export these\n    SHELL=$(awk -F: &quot;\\$1 == \\&quot;${JENKINS_USER}\\&quot; {print \\$NF}&quot; /etc/passwd)\n    [ -n &quot;${SHELL}&quot; ] || SHELL=/bin/bash\n    HOME=&quot;${JENKINS_HOME}&quot; \\\n        SHELL=&quot;${SHELL}&quot; \\\n        USER=&quot;${JENKINS_USER}&quot; \\\n        PREFIX=&quot;${PREFIX}&quot;  \\\n        LOGNAME=&quot;${JENKINS_USER}&quot; \\\n        USERNAME=&quot;${JENKINS_USER}&quot; \\\n        PWD=&quot;${JENKINS_HOME}&quot; \\\n        eval \\\n        start-stop-daemon \\\n        --start \\\n        --quiet \\\n        --oknodo \\\n        --background \\\n        --no-close \\\n        --make-pidfile \\\n        --pidfile &quot;${PIDFILE}&quot; \\\n        --chdir &quot;${JENKINS_HOME}&quot; \\\n        --chuid &quot;${JENKINS_USER}&quot; \\\n        --user &quot;${JENKINS_USER}&quot; \\\n        --group &quot;${JENKINS_GROUP}&quot; \\\n        --name &quot;${COMMAND_NAME}&quot; \\\n        --exec &quot;${JAVA}&quot; \\\n        ${UMASK:+--umask ${UMASK}} \\\n        -- ${JAVA_ARGS} -jar &quot;${JENKINS_WAR}&quot; ${JENKINS_ARGS} &gt;&gt;&quot;${JENKINS_LOG}&quot; 2&gt;&amp;1\n    RETVAL=&quot;$?&quot;\n    [ &quot;${RETVAL}&quot; = 2 ] &amp;&amp; return 2\n    # Verify the process did in fact start successfully and didn't just bomb out\n    sleep 1\n    ATTEMPT=1\n    while [ ${ATTEMPT} -le 30 ]; do\n        pidofproc -p &quot;${PIDFILE}&quot; &quot;${JAVA}&quot; &gt;/dev/null &amp;&amp; break\n        [ &quot;${ATTEMPT}&quot; = 30 ] &amp;&amp; return 2\n        sleep 1\n        ATTEMPT=$((ATTEMPT + 1))\n    done\n    return &quot;${RETVAL}&quot;\n}\n\ndo_stop_cmd_override() {\n    check_arguments || return &quot;$?&quot;\n    start-stop-daemon \\\n        --stop \\\n        --quiet \\\n        --oknodo \\\n        --prefix=&quot;${PREFIX}&quot; \\\n        --pidfile &quot;${PIDFILE}&quot; \\\n        --chdir &quot;${JENKINS_HOME}&quot; \\\n        --chuid &quot;${JENKINS_USER}&quot; \\\n        --user &quot;${JENKINS_USER}&quot; \\\n        --group &quot;${JENKINS_GROUP}&quot; \\\n        --name &quot;${COMMAND_NAME}&quot; \\\n        --exec &quot;${JAVA}&quot; \\\n        --retry=TERM/30/KILL/5\n    RETVAL=&quot;$?&quot;\n    [ &quot;${RETVAL}&quot; = 2 ] &amp;&amp; return 2\n    # Wait for children to finish too if this is a daemon that forks\n    # and if the daemon is only ever run from this initscript.\n    # If the above conditions are not satisfied then add some other code\n    # that waits for the process to drop all resources that could be\n    # needed by services started subsequently.  A last resort is to\n    # sleep for some time.\n    start-stop-daemon \\\n        --stop \\\n        --quiet \\\n        --oknodo \\\n        --prefix=/jenkins \\\n        --pidfile &quot;${PIDFILE}&quot; \\\n        --chdir &quot;${JENKINS_HOME}&quot; \\\n        --chuid &quot;${JENKINS_USER}&quot; \\\n        --user &quot;${JENKINS_USER}&quot; \\\n        --group &quot;${JENKINS_GROUP}&quot; \\\n        --name &quot;${COMMAND_NAME}&quot; \\\n        --exec &quot;${JAVA}&quot; \\\n        --retry=0/30/KILL/5\n    [ &quot;$?&quot; = 2 ] &amp;&amp; return 2\n    # Many daemons don't delete their pidfiles when they exit.\n    rm -f &quot;${PIDFILE}&quot;\n    return &quot;${RETVAL}&quot;\n}\n\ndo_status_override() {\n    check_arguments || return &quot;$?&quot;\n    status_of_proc &quot;${JAVA}&quot; &quot;${NAME}&quot; -p &quot;${PIDFILE}&quot;\n}\n</code></pre>\n<p>EDIT:</p>\n<p>from <code>/usr/share/java/</code>\nJenkins seems fully loaded, still cant access it in browser, I get a 404, hardly had issues with nginx before, I'm wondering if I have several jenkins versions installed at different places</p>\n<pre><code>java -jar ./jenkins.war\nRunning from: /usr/share/java/jenkins.war\nwebroot: /root/.jenkins/war\n2023-12-07 21:24:34.618+0000 [id=1] INFO    winstone.Logger#logInternal: Beginning extraction from war file\n2023-12-07 21:24:34.789+0000 [id=1] WARNING o.e.j.s.handler.ContextHandler#setContextPath: Empty contextPath\n2023-12-07 21:24:34.892+0000 [id=1] INFO    org.eclipse.jetty.server.Server#doStart: jetty-10.0.18; built: 2023-10-27T01:59:58.245Z; git: 8545fd9bf4cd0d0838f626b405fd4963441546b7; jvm 21.0.1+12-LTS-29\n2023-12-07 21:24:35.484+0000 [id=1] INFO    o.e.j.w.StandardDescriptorProcessor#visitServlet: NO JSP Support for /, did not find org.eclipse.jetty.jsp.JettyJspServlet\n2023-12-07 21:24:35.557+0000 [id=1] INFO    o.e.j.s.s.DefaultSessionIdManager#doStart: Session workerName=node0\n2023-12-07 21:24:36.353+0000 [id=1] INFO    hudson.WebAppMain#contextInitialized: Jenkins home directory: /root/.jenkins found at: $user.home/.jenkins\n2023-12-07 21:24:36.551+0000 [id=1] INFO    o.e.j.s.handler.ContextHandler#doStart: Started w.@51768776{Jenkins v2.435,/,file:///root/.jenkins/war/,AVAILABLE}{/root/.jenkins/war}\n2023-12-07 21:24:36.570+0000 [id=1] INFO    o.e.j.server.AbstractConnector#doStart: Started ServerConnector@32a068d1{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}\n2023-12-07 21:24:36.599+0000 [id=1] INFO    org.eclipse.jetty.server.Server#doStart: Started Server@35fc6dc4{STARTING}[10.0.18,sto=0] @2830ms\n2023-12-07 21:24:36.601+0000 [id=35]    INFO    winstone.Logger#logInternal: Winstone Servlet Engine running: controlPort=disabled\n2023-12-07 21:24:36.924+0000 [id=43]    INFO    jenkins.InitReactorRunner$1#onAttained: Started initialization\n2023-12-07 21:24:37.280+0000 [id=41]    INFO    jenkins.InitReactorRunner$1#onAttained: Listed all plugins\n2023-12-07 21:24:37.740+0000 [id=46]    SEVERE  jenkins.InitReactorRunner$1#onTaskFailed: Failed Loading plugin Mina SSHD API :: Core v2.11.0-86.v836f585d47fa_ (mina-sshd-api-core)\njava.io.IOException: Failed to load: Mina SSHD API :: Core (mina-sshd-api-core 2.11.0-86.v836f585d47fa_)\n - Update required: SSH Credentials Plugin (ssh-credentials 1.19) to be updated to 305.v8f4381501156 or higher\n    at hudson.PluginWrapper.resolvePluginDependencies(PluginWrapper.java:988)\n    at hudson.PluginManager$2$1$1.run(PluginManager.java:552)\n    at org.jvnet.hudson.reactor.TaskGraphBuilder$TaskImpl.run(TaskGraphBuilder.java:177)\n    at org.jvnet.hudson.reactor.Reactor.runTask(Reactor.java:305)\n    at jenkins.model.Jenkins$5.runTask(Jenkins.java:1170)\n    at org.jvnet.hudson.reactor.Reactor$2.run(Reactor.java:221)\n    at org.jvnet.hudson.reactor.Reactor$Node.run(Reactor.java:120)\n    at jenkins.security.ImpersonatingExecutorService$1.run(ImpersonatingExecutorService.java:68)\n    at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)\n    at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)\n    at java.base/java.lang.Thread.run(Thread.java:1583)\n2023-12-07 21:24:37.743+0000 [id=44]    SEVERE  jenkins.InitReactorRunner$1#onTaskFailed: Failed Loading plugin SSH server v3.312.v1c601b_c83b_0e (sshd)\njava.io.IOException: Failed to load: SSH server (sshd 3.312.v1c601b_c83b_0e)\n - Failed to load: Mina SSHD API :: Core (mina-sshd-api-core 2.11.0-86.v836f585d47fa_)\n    at hudson.PluginWrapper.resolvePluginDependencies(PluginWrapper.java:988)\n    at hudson.PluginManager$2$1$1.run(PluginManager.java:552)\n    at org.jvnet.hudson.reactor.TaskGraphBuilder$TaskImpl.run(TaskGraphBuilder.java:177)\n    at org.jvnet.hudson.reactor.Reactor.runTask(Reactor.java:305)\n    at jenkins.model.Jenkins$5.runTask(Jenkins.java:1170)\n    at org.jvnet.hudson.reactor.Reactor$2.run(Reactor.java:221)\n    at org.jvnet.hudson.reactor.Reactor$Node.run(Reactor.java:120)\n    at jenkins.security.ImpersonatingExecutorService$1.run(ImpersonatingExecutorService.java:68)\n    at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)\n    at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)\n    at java.base/java.lang.Thread.run(Thread.java:1583)\n2023-12-07 21:24:37.851+0000 [id=47]    SEVERE  jenkins.InitReactorRunner$1#onTaskFailed: Failed Loading plugin Jenkins GIT server Plugin v1.10 (git-server)\njava.io.IOException: Failed to load: Jenkins GIT server Plugin (git-server 1.10)\n - Failed to load: SSH server (sshd 3.312.v1c601b_c83b_0e)\n    at hudson.PluginWrapper.resolvePluginDependencies(PluginWrapper.java:988)\n    at hudson.PluginManager$2$1$1.run(PluginManager.java:552)\n    at org.jvnet.hudson.reactor.TaskGraphBuilder$TaskImpl.run(TaskGraphBuilder.java:177)\n    at org.jvnet.hudson.reactor.Reactor.runTask(Reactor.java:305)\n    at jenkins.model.Jenkins$5.runTask(Jenkins.java:1170)\n    at org.jvnet.hudson.reactor.Reactor$2.run(Reactor.java:221)\n    at org.jvnet.hudson.reactor.Reactor$Node.run(Reactor.java:120)\n    at jenkins.security.ImpersonatingExecutorService$1.run(ImpersonatingExecutorService.java:68)\n    at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)\n    at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)\n    at java.base/java.lang.Thread.run(Thread.java:1583)\n2023-12-07 21:24:37.922+0000 [id=41]    SEVERE  jenkins.InitReactorRunner$1#onTaskFailed: Failed Loading plugin Matrix Authorization Strategy Plugin v3.2.1 (matrix-auth)\njava.io.IOException: Failed to load: Matrix Authorization Strategy Plugin (matrix-auth 3.2.1)\n - Update required: Folders Plugin (cloudbees-folder 6.708.ve61636eb_65a_5) to be updated to 6.815.v0dd5a_cb_40e0e or higher\n    at hudson.PluginWrapper.resolvePluginDependencies(PluginWrapper.java:988)\n    at hudson.PluginManager$2$1$1.run(PluginManager.java:552)\n    at org.jvnet.hudson.reactor.TaskGraphBuilder$TaskImpl.run(TaskGraphBuilder.java:177)\n    at org.jvnet.hudson.reactor.Reactor.runTask(Reactor.java:305)\n    at jenkins.model.Jenkins$5.runTask(Jenkins.java:1170)\n    at org.jvnet.hudson.reactor.Reactor$2.run(Reactor.java:221)\n    at org.jvnet.hudson.reactor.Reactor$Node.run(Reactor.java:120)\n    at jenkins.security.ImpersonatingExecutorService$1.run(ImpersonatingExecutorService.java:68)\n    at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)\n    at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)\n    at java.base/java.lang.Thread.run(Thread.java:1583)\n2023-12-07 21:24:37.924+0000 [id=41]    SEVERE  jenkins.InitReactorRunner$1#onTaskFailed: Failed Loading plugin Pipeline: Shared Groovy Libraries v564.ve62a_4eb_b_e039 (workflow-cps-global-lib)\njava.io.IOException: Failed to load: Pipeline: Shared Groovy Libraries (workflow-cps-global-lib 564.ve62a_4eb_b_e039)\n - Failed to load: Jenkins GIT server Plugin (git-server 1.10)\n    at hudson.PluginWrapper.resolvePluginDependencies(PluginWrapper.java:988)\n    at hudson.PluginManager$2$1$1.run(PluginManager.java:552)\n    at org.jvnet.hudson.reactor.TaskGraphBuilder$TaskImpl.run(TaskGraphBuilder.java:177)\n    at org.jvnet.hudson.reactor.Reactor.runTask(Reactor.java:305)\n    at jenkins.model.Jenkins$5.runTask(Jenkins.java:1170)\n    at org.jvnet.hudson.reactor.Reactor$2.run(Reactor.java:221)\n    at org.jvnet.hudson.reactor.Reactor$Node.run(Reactor.java:120)\n    at jenkins.security.ImpersonatingExecutorService$1.run(ImpersonatingExecutorService.java:68)\n    at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)\n    at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)\n    at java.base/java.lang.Thread.run(Thread.java:1583)\n2023-12-07 21:24:37.925+0000 [id=41]    SEVERE  jenkins.InitReactorRunner$1#onTaskFailed: Failed Loading plugin Pipeline: GitHub Groovy Libraries v36.v4c01db_ca_ed16 (pipeline-github-lib)\njava.io.IOException: Failed to load: Pipeline: GitHub Groovy Libraries (pipeline-github-lib 36.v4c01db_ca_ed16)\n - Failed to load: Pipeline: Shared Groovy Libraries (workflow-cps-global-lib 564.ve62a_4eb_b_e039)\n    at hudson.PluginWrapper.resolvePluginDependencies(PluginWrapper.java:988)\n    at hudson.PluginManager$2$1$1.run(PluginManager.java:552)\n    at org.jvnet.hudson.reactor.TaskGraphBuilder$TaskImpl.run(TaskGraphBuilder.java:177)\n    at org.jvnet.hudson.reactor.Reactor.runTask(Reactor.java:305)\n    at jenkins.model.Jenkins$5.runTask(Jenkins.java:1170)\n    at org.jvnet.hudson.reactor.Reactor$2.run(Reactor.java:221)\n    at org.jvnet.hudson.reactor.Reactor$Node.run(Reactor.java:120)\n    at jenkins.security.ImpersonatingExecutorService$1.run(ImpersonatingExecutorService.java:68)\n    at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)\n    at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)\n    at java.base/java.lang.Thread.run(Thread.java:1583)\n2023-12-07 21:24:37.929+0000 [id=42]    SEVERE  jenkins.InitReactorRunner$1#onTaskFailed: Failed Loading plugin Pipeline: Declarative v2.2064.v5eef7d0982b_e (pipeline-model-definition)\njava.io.IOException: Failed to load: Pipeline: Declarative (pipeline-model-definition 2.2064.v5eef7d0982b_e)\n - Failed to load: Pipeline: Shared Groovy Libraries (workflow-cps-global-lib 564.ve62a_4eb_b_e039)\n    at hudson.PluginWrapper.resolvePluginDependencies(PluginWrapper.java:988)\n    at hudson.PluginManager$2$1$1.run(PluginManager.java:552)\n    at org.jvnet.hudson.reactor.TaskGraphBuilder$TaskImpl.run(TaskGraphBuilder.java:177)\n    at org.jvnet.hudson.reactor.Reactor.runTask(Reactor.java:305)\n    at jenkins.model.Jenkins$5.runTask(Jenkins.java:1170)\n    at org.jvnet.hudson.reactor.Reactor$2.run(Reactor.java:221)\n    at org.jvnet.hudson.reactor.Reactor$Node.run(Reactor.java:120)\n    at jenkins.security.ImpersonatingExecutorService$1.run(ImpersonatingExecutorService.java:68)\n    at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)\n    at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)\n    at java.base/java.lang.Thread.run(Thread.java:1583)\n2023-12-07 21:24:37.951+0000 [id=40]    SEVERE  jenkins.InitReactorRunner$1#onTaskFailed: Failed Loading plugin Pipeline v2.6 (workflow-aggregator)\njava.io.IOException: Failed to load: Pipeline (workflow-aggregator 2.6)\n - Failed to load: Pipeline: Shared Groovy Libraries (workflow-cps-global-lib 564.ve62a_4eb_b_e039)\n    at hudson.PluginWrapper.resolvePluginDependencies(PluginWrapper.java:988)\n    at hudson.PluginManager$2$1$1.run(PluginManager.java:552)\n    at org.jvnet.hudson.reactor.TaskGraphBuilder$TaskImpl.run(TaskGraphBuilder.java:177)\n    at org.jvnet.hudson.reactor.Reactor.runTask(Reactor.java:305)\n    at jenkins.model.Jenkins$5.runTask(Jenkins.java:1170)\n    at org.jvnet.hudson.reactor.Reactor$2.run(Reactor.java:221)\n    at org.jvnet.hudson.reactor.Reactor$Node.run(Reactor.java:120)\n    at jenkins.security.ImpersonatingExecutorService$1.run(ImpersonatingExecutorService.java:68)\n    at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)\n    at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)\n    at java.base/java.lang.Thread.run(Thread.java:1583)\n2023-12-07 21:24:41.333+0000 [id=40]    INFO    jenkins.InitReactorRunner$1#onAttained: Prepared all plugins\n2023-12-07 21:24:41.353+0000 [id=40]    INFO    jenkins.InitReactorRunner$1#onAttained: Started all plugins\n2023-12-07 21:24:41.369+0000 [id=44]    INFO    jenkins.InitReactorRunner$1#onAttained: Augmented all extensions\n2023-12-07 21:24:42.281+0000 [id=45]    INFO    jenkins.InitReactorRunner$1#onAttained: System config loaded\n2023-12-07 21:24:42.282+0000 [id=45]    INFO    jenkins.InitReactorRunner$1#onAttained: System config adapted\n2023-12-07 21:24:42.297+0000 [id=43]    INFO    jenkins.InitReactorRunner$1#onAttained: Loaded all jobs\n2023-12-07 21:24:42.310+0000 [id=47]    INFO    jenkins.InitReactorRunner$1#onAttained: Configuration for all jobs updated\n2023-12-07 21:24:42.604+0000 [id=42]    INFO    jenkins.InitReactorRunner$1#onAttained: Completed initialization\n2023-12-07 21:24:42.628+0000 [id=34]    INFO    hudson.lifecycle.Lifecycle#onReady: Jenkins is fully up and running\n\n</code></pre>\n<p>Edit #2:\nI just tried switching between my Java versions using\n<code>update-alternative</code>\nIt seems that using 11 or 17 brings Jenkins back up, 21 causes the issue:</p>\n<pre><code>$ sudo update-alternatives --config java\nThere are 4 choices for the alternative java (providing /usr/bin/java).\n\n  Selection    Path                                            Priority   Status\n------------------------------------------------------------\n  0            /usr/lib/jvm/jdk-21-oracle-x64/bin/java          352329728 auto mode\n  1            /usr/lib/jvm/java-11-openjdk-amd64/bin/java      1111      manual mode\n* 2            /usr/lib/jvm/java-17-openjdk-amd64/bin/java      1711      manual mode\n  3            /usr/lib/jvm/java-8-openjdk-amd64/jre/bin/java   1081      manual mode\n  4            /usr/lib/jvm/jdk-21-oracle-x64/bin/java          352329728 manual mode\n\n</code></pre>\n"},{"tags":["java","random","while-loop"],"comments":[{"owner":{"account_id":31180,"reputation":29173,"user_id":85421,"display_name":"user85421"},"score":0,"creation_date":1702022149,"post_id":77625051,"comment_id":136849067,"body_markdown":"you probably meant to move the guess-reading to inside the inner loop (the `do - while`), maybe adding some prompt BTW there is no need to use cast in `(int)guess &lt; (int)randChar` - `char` is already an integral number","body":"you probably meant to move the guess-reading to inside the inner loop (the <code>do - while</code>), maybe adding some prompt BTW there is no need to use cast in <code>(int)guess &lt; (int)randChar</code> - <code>char</code> is already an integral number"},{"owner":{"account_id":31180,"reputation":29173,"user_id":85421,"display_name":"user85421"},"score":0,"creation_date":1702037147,"post_id":77625051,"comment_id":136851449,"body_markdown":"continuation [here](https://stackoverflow.com/q/77625143/85421) ??","body":"continuation <a href=\"https://stackoverflow.com/q/77625143/85421\">here</a> ??"}],"answers":[{"tags":[],"owner":{"account_id":30091271,"reputation":1,"user_id":23060684,"display_name":"Christopher B."},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1702022946,"creation_date":1702022051,"answer_id":77625086,"question_id":77625051,"body_markdown":"Move `char guess = scan.next().charAt(0);` inside the do while","title":"How to stop generating letter that is in a loop java","body":"<p>Move <code>char guess = scan.next().charAt(0);</code> inside the do while</p>\n"},{"tags":[],"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1702052355,"creation_date":1702051685,"answer_id":77627859,"question_id":77625051,"body_markdown":"\r\n```\r\nScanner scan = new Scanner (System.in);\r\nRandom rnd = new Random();\r\n \r\n```\r\nPrompt for the guess inside the inner loop.  In addition to this and [Christopher B&#39;s](https://stackoverflow.com/a/77625086/1552534) suggestion.\r\n\r\n- The local variable `guess` needs to be defined outside the loop so the inner `while` statement can see it.\r\n- eliminate the break statements as they prematurely exit the inner loop.\r\n- When the loop ends, print something that signals the user guessed the answer.\r\n- it isn&#39;t necessary to cast `char` to `int` when comparing values. This was also mentioned in the comments.\r\n```\r\nwhile (true) {\r\n    char randChar = (char) (&#39;a&#39; + rnd.nextInt(26));\r\n    System.out.println(&quot;I generated a random letter. Enter your guess:&quot;);\r\n   \r\n    char guess;\r\n    do {\r\n        guess = scan.next().charAt(0);\r\n        if(guess &lt; randChar) {\r\n            System.out.println(&quot;The letter is later in the alphabet&quot;);  \r\n           \r\n        }\r\n        else if(guess &gt; randChar) {\r\n            System.out.println(&quot;The letter is earlier in the alphabet&quot;);\r\n        }\r\n                \r\n    } while (guess != randChar);\r\n    System.out.println(&quot;Correct!&quot;);\r\n}\r\n```\r\nI didn&#39;t include this, but you may want to check for a special character the user can enter that ends the game.       ","title":"How to stop generating letter that is in a loop java","body":"<pre><code>Scanner scan = new Scanner (System.in);\nRandom rnd = new Random();\n \n</code></pre>\n<p>Prompt for the guess inside the inner loop.  In addition to this and <a href=\"https://stackoverflow.com/a/77625086/1552534\">Christopher B's</a> suggestion.</p>\n<ul>\n<li>The local variable <code>guess</code> needs to be defined outside the loop so the inner <code>while</code> statement can see it.</li>\n<li>eliminate the break statements as they prematurely exit the inner loop.</li>\n<li>When the loop ends, print something that signals the user guessed the answer.</li>\n<li>it isn't necessary to cast <code>char</code> to <code>int</code> when comparing values. This was also mentioned in the comments.</li>\n</ul>\n<pre><code>while (true) {\n    char randChar = (char) ('a' + rnd.nextInt(26));\n    System.out.println(&quot;I generated a random letter. Enter your guess:&quot;);\n   \n    char guess;\n    do {\n        guess = scan.next().charAt(0);\n        if(guess &lt; randChar) {\n            System.out.println(&quot;The letter is later in the alphabet&quot;);  \n           \n        }\n        else if(guess &gt; randChar) {\n            System.out.println(&quot;The letter is earlier in the alphabet&quot;);\n        }\n                \n    } while (guess != randChar);\n    System.out.println(&quot;Correct!&quot;);\n}\n</code></pre>\n<p>I didn't include this, but you may want to check for a special character the user can enter that ends the game.</p>\n"},{"tags":[],"owner":{"account_id":4228398,"reputation":17727,"user_id":3461397,"display_name":"Oleg Cherednik"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1702052745,"creation_date":1702052745,"answer_id":77627954,"question_id":77625051,"body_markdown":"You should put generating the **expected** letter out of the loop, and give as many changes as needed to user in the loop to guess the letter.\r\n \r\n```java\r\npublic static void play(Scanner scan, Random random) {\r\n    char expected = (char) (&#39;a&#39; + random.nextInt(26));\r\n    System.out.println(&quot;I generated a random letter.&quot;);\r\n\r\n    while (true) {\r\n        System.out.print(&quot;Enter your guess: &quot;);\r\n        String str = scan.next().toLowerCase();\r\n\r\n        if (str.isBlank())\r\n            System.out.println(&quot;Enter at leas one letter&quot;);\r\n        else {\r\n            char actual = str.charAt(0);\r\n\r\n            if (actual == expected) {\r\n                System.out.println(&quot;Bingo!!!&quot;);\r\n                return;\r\n            }\r\n\r\n            System.out.format(&quot;The letter is %s in the alphabet\\n&quot;,\r\n                              actual &lt; expected ? &quot;later&quot; : &quot;earlier&quot;);\r\n        }\r\n    }\r\n}\r\n```","title":"How to stop generating letter that is in a loop java","body":"<p>You should put generating the <strong>expected</strong> letter out of the loop, and give as many changes as needed to user in the loop to guess the letter.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static void play(Scanner scan, Random random) {\n    char expected = (char) ('a' + random.nextInt(26));\n    System.out.println(&quot;I generated a random letter.&quot;);\n\n    while (true) {\n        System.out.print(&quot;Enter your guess: &quot;);\n        String str = scan.next().toLowerCase();\n\n        if (str.isBlank())\n            System.out.println(&quot;Enter at leas one letter&quot;);\n        else {\n            char actual = str.charAt(0);\n\n            if (actual == expected) {\n                System.out.println(&quot;Bingo!!!&quot;);\n                return;\n            }\n\n            System.out.format(&quot;The letter is %s in the alphabet\\n&quot;,\n                              actual &lt; expected ? &quot;later&quot; : &quot;earlier&quot;);\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":19945034,"reputation":15,"user_id":14615914,"display_name":"creativethoughts"},"comment_count":2,"delete_vote_count":1,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":86,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"closed_date":1702155931,"accepted_answer_id":77627859,"answer_count":3,"score":-3,"last_activity_date":1702052745,"creation_date":1702021579,"question_id":77625051,"body_markdown":"    Scanner scan = new Scanner (System.in);\r\n    Random rnd = new Random();\r\n        \r\n    boolean play = true;\r\n    int correctGue = 0;\r\n        \r\n        \r\n    while (play ==true) {\r\n        char randChar = (char) (&#39;a&#39; + rnd.nextInt(26));\r\n        System.out.println(&quot;I generated a random letter. Enter your guess:&quot;);\r\n        char guess = scan.next().charAt(0);\r\n        System.out.println(randChar);\r\n        do {\r\n            if((int)guess &lt; (int)randChar) {\r\n                System.out.println(&quot;The letter is later in the alphabet&quot;);  \r\n                break;\r\n            }\r\n            else if((int)guess &gt; (int)randChar) {\r\n                System.out.println(&quot;The letter is earlier in the alphabet&quot;);\r\n                break;\r\n            }\r\n                    \r\n        } while ((int)guess != (int)randChar);\r\n    }\r\n\r\n\r\nI want the program to generate a letter once until the user guesses it correctly. The problem is I have this `char randChar = (char) (&#39;a&#39; + rnd.nextInt(26)); and it keeps generating a different letter every time the user enter a letter. How would I have it generate once every game rather than changing the letter every time the user enters an input? \r\n\r\nFYI - will be adding a code later for the user to play again, or quit with the stats of how many correct guesses.","title":"How to stop generating letter that is in a loop java","body":"<pre><code>Scanner scan = new Scanner (System.in);\nRandom rnd = new Random();\n    \nboolean play = true;\nint correctGue = 0;\n    \n    \nwhile (play ==true) {\n    char randChar = (char) ('a' + rnd.nextInt(26));\n    System.out.println(&quot;I generated a random letter. Enter your guess:&quot;);\n    char guess = scan.next().charAt(0);\n    System.out.println(randChar);\n    do {\n        if((int)guess &lt; (int)randChar) {\n            System.out.println(&quot;The letter is later in the alphabet&quot;);  \n            break;\n        }\n        else if((int)guess &gt; (int)randChar) {\n            System.out.println(&quot;The letter is earlier in the alphabet&quot;);\n            break;\n        }\n                \n    } while ((int)guess != (int)randChar);\n}\n</code></pre>\n<p>I want the program to generate a letter once until the user guesses it correctly. The problem is I have this `char randChar = (char) ('a' + rnd.nextInt(26)); and it keeps generating a different letter every time the user enter a letter. How would I have it generate once every game rather than changing the letter every time the user enters an input?</p>\n<p>FYI - will be adding a code later for the user to play again, or quit with the stats of how many correct guesses.</p>\n"},{"tags":["java","spring-webflux","mockmvc"],"owner":{"account_id":406916,"reputation":757,"user_id":776683,"accept_rate":83,"display_name":"Mikhail"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":1,"is_answered":false,"view_count":9,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":0,"score":-1,"last_activity_date":1702052743,"creation_date":1702052743,"question_id":77627953,"body_markdown":"I recently migrated an older project to use Reactor, Flux, and Mono for handling web requests. The application is equipped with integration tests using MockMvc. While individual tests execute successfully, issues arise when running them in batches, especially when running five or more concurrently.\r\n\r\nThe problem manifests as incomplete or missing data in some of the test results, suggesting that the responses are returned before the Flux has completed processing. Interestingly, when executing a single test or introducing a debugger breakpoint in the controller, the tests consistently run without issues.\r\n\r\nSo far I&#39;ve tried\r\n\r\n    mockMvc.perform(MockMvcRequestBuilders.asyncDispatch(mvcResult)).thenReturn(); \r\nand\r\n\r\n    mvcResult.getAsyncResult();\r\nand even to combine them:\r\n\r\n    var mvcResult = mvc.perform(get(&quot;/&quot;))\r\n        .andExpect(request().asyncStarted())\r\n        .andDo(MvcResult::getAsyncResult)\r\n        .thenReturn();\r\n    mockMvc.perform(MockMvcRequestBuilders.asyncDispatch(mvcResult)).thenReturn();\r\n    \r\nHowever, the issue remains the same. Adding timeouts and Thread sleeps didn&#39;t change anything. Any idea what might be the issue? Can I somehow force MockMvc to actually wait until the result is complete before providing it to asserts?\r\n","title":"MockMVC integration tests for async reactor controllers - force wait for result","body":"<p>I recently migrated an older project to use Reactor, Flux, and Mono for handling web requests. The application is equipped with integration tests using MockMvc. While individual tests execute successfully, issues arise when running them in batches, especially when running five or more concurrently.</p>\n<p>The problem manifests as incomplete or missing data in some of the test results, suggesting that the responses are returned before the Flux has completed processing. Interestingly, when executing a single test or introducing a debugger breakpoint in the controller, the tests consistently run without issues.</p>\n<p>So far I've tried</p>\n<pre><code>mockMvc.perform(MockMvcRequestBuilders.asyncDispatch(mvcResult)).thenReturn(); \n</code></pre>\n<p>and</p>\n<pre><code>mvcResult.getAsyncResult();\n</code></pre>\n<p>and even to combine them:</p>\n<pre><code>var mvcResult = mvc.perform(get(&quot;/&quot;))\n    .andExpect(request().asyncStarted())\n    .andDo(MvcResult::getAsyncResult)\n    .thenReturn();\nmockMvc.perform(MockMvcRequestBuilders.asyncDispatch(mvcResult)).thenReturn();\n</code></pre>\n<p>However, the issue remains the same. Adding timeouts and Thread sleeps didn't change anything. Any idea what might be the issue? Can I somehow force MockMvc to actually wait until the result is complete before providing it to asserts?</p>\n"},{"tags":["java","spring","spring-boot","spring-data-jpa"],"comments":[{"owner":{"account_id":2792262,"reputation":163837,"user_id":2402272,"accept_rate":85,"display_name":"John Bollinger"},"score":0,"creation_date":1702048670,"post_id":77627211,"comment_id":136853355,"body_markdown":"If you&#39;re going to use `FetchType.EAGER` on the relationship field anyway, then why have a separate field for the `category_id`?","body":"If you&#39;re going to use <code>FetchType.EAGER</code> on the relationship field anyway, then why have a separate field for the <code>category_id</code>?"},{"owner":{"account_id":29977205,"reputation":15,"user_id":22973119,"display_name":"european_2"},"score":0,"creation_date":1702049111,"post_id":77627211,"comment_id":136853448,"body_markdown":"@JohnBollinger I want to insert foreign key id (category_id) when creating Product instead of fetching Category first.","body":"@JohnBollinger I want to insert foreign key id (category_id) when creating Product instead of fetching Category first."},{"owner":{"account_id":2792262,"reputation":163837,"user_id":2402272,"accept_rate":85,"display_name":"John Bollinger"},"score":0,"creation_date":1702051247,"post_id":77627211,"comment_id":136853891,"body_markdown":"But then the entity you are trying to persist is inconsistent.  I guess you&#39;ve annotated it well enough that the persistence provider will choose the correct source for the foreign key id, but inasmuch as you need at some point to fetch `Category`s in order to know about which ones exist in the first place, I&#39;m not seeing how this is the right place to be looking for an optimization.","body":"But then the entity you are trying to persist is inconsistent.  I guess you&#39;ve annotated it well enough that the persistence provider will choose the correct source for the foreign key id, but inasmuch as you need at some point to fetch <code>Category</code>s in order to know about which ones exist in the first place, I&#39;m not seeing how this is the right place to be looking for an optimization."}],"answers":[{"tags":[],"owner":{"account_id":6970618,"reputation":25,"user_id":5347120,"display_name":"Alfred Benigno"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1702049927,"creation_date":1702048424,"answer_id":77627528,"question_id":77627211,"body_markdown":"I suggest you don&#39;t use lombok if you have complicated entities mapping in order for you to trace properly which ones are mapped to which. Don&#39;t forget the mandatory referencedColumnName when you join and foreign keys if there are any in your product class. You are joining it to your category table by id so in your category class, your id column name must be set to reference it properly.\r\n\r\n-- edit\r\n\r\nsample snippet:\r\n\r\nAuthorities.class\r\n\r\n    @ManyToOne(cascade = {CascadeType.MERGE, CascadeType.PERSIST, CascadeType.REMOVE,\r\n        CascadeType.REFRESH}, fetch = FetchType.EAGER)\r\n    @JoinColumn(name = &quot;username&quot;, referencedColumnName = &quot;username&quot;, foreignKey = @ForeignKey(foreignKeyDefinition = &quot;authorities_fk&quot;))\r\n    private User user;\r\n\r\nUser.class\r\n\r\n    @Id\r\n    @Column(name = &quot;username&quot;)\r\n    private String username;","title":"Hibernate not fetching foreign key object","body":"<p>I suggest you don't use lombok if you have complicated entities mapping in order for you to trace properly which ones are mapped to which. Don't forget the mandatory referencedColumnName when you join and foreign keys if there are any in your product class. You are joining it to your category table by id so in your category class, your id column name must be set to reference it properly.</p>\n<p>-- edit</p>\n<p>sample snippet:</p>\n<p>Authorities.class</p>\n<pre><code>@ManyToOne(cascade = {CascadeType.MERGE, CascadeType.PERSIST, CascadeType.REMOVE,\n    CascadeType.REFRESH}, fetch = FetchType.EAGER)\n@JoinColumn(name = &quot;username&quot;, referencedColumnName = &quot;username&quot;, foreignKey = @ForeignKey(foreignKeyDefinition = &quot;authorities_fk&quot;))\nprivate User user;\n</code></pre>\n<p>User.class</p>\n<pre><code>@Id\n@Column(name = &quot;username&quot;)\nprivate String username;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2792262,"reputation":163837,"user_id":2402272,"accept_rate":85,"display_name":"John Bollinger"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1702052687,"creation_date":1702052687,"answer_id":77627949,"question_id":77627211,"body_markdown":"&gt;             Product pr = productRepository.save(product);\r\n&gt;             System.out.println(pr.getCategory()); // prints null\r\n\r\nBased on your comments on the question, I gather that you set only a category ID, not a `Category`, before persisting the `Product`.  In that case, it is unsurprising that &quot;null&quot; is printed.  Persisting a new entity with `save()` makes its existing state persistent.  There is no guarantee that its state will then be updated from the database, or, in particular, that relationships will be fetched.  Why would they be?  They were just saved.\r\n\r\nI think you&#39;re probably doing yourself more harm than good by mapping both `category` and `categoryId`, but if you continue with that then you will need to manually refresh your product entities after you save them to ensure that the `Category` associated with their (new or possibly changed) `categoryId` is fetched.  Given the appropriate Hibernate `Session` as `sess`, that would be\r\n```\r\n        Product pr = productRepository.save(product);\r\n        sess.refresh(pr);\r\n        System.out.println(pr.getCategory()); // prints null\r\n```\r\nOr given the appropriate `EntityManager` as `em`, you could use `em.refresh(pr)` instead of `sess.refresh(pr)`.  It looks like you are using Spring Data, but its repository interfaces do not define refresh methods that you could use directly, nor do they provide means to access an underlying `Session` or `EntityManager`, so you&#39;ll have to sort that out.","title":"Hibernate not fetching foreign key object","body":"<blockquote>\n<pre><code>        Product pr = productRepository.save(product);\n        System.out.println(pr.getCategory()); // prints null\n</code></pre>\n</blockquote>\n<p>Based on your comments on the question, I gather that you set only a category ID, not a <code>Category</code>, before persisting the <code>Product</code>.  In that case, it is unsurprising that &quot;null&quot; is printed.  Persisting a new entity with <code>save()</code> makes its existing state persistent.  There is no guarantee that its state will then be updated from the database, or, in particular, that relationships will be fetched.  Why would they be?  They were just saved.</p>\n<p>I think you're probably doing yourself more harm than good by mapping both <code>category</code> and <code>categoryId</code>, but if you continue with that then you will need to manually refresh your product entities after you save them to ensure that the <code>Category</code> associated with their (new or possibly changed) <code>categoryId</code> is fetched.  Given the appropriate Hibernate <code>Session</code> as <code>sess</code>, that would be</p>\n<pre><code>        Product pr = productRepository.save(product);\n        sess.refresh(pr);\n        System.out.println(pr.getCategory()); // prints null\n</code></pre>\n<p>Or given the appropriate <code>EntityManager</code> as <code>em</code>, you could use <code>em.refresh(pr)</code> instead of <code>sess.refresh(pr)</code>.  It looks like you are using Spring Data, but its repository interfaces do not define refresh methods that you could use directly, nor do they provide means to access an underlying <code>Session</code> or <code>EntityManager</code>, so you'll have to sort that out.</p>\n"}],"owner":{"account_id":29977205,"reputation":15,"user_id":22973119,"display_name":"european_2"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":71,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77627949,"answer_count":2,"score":0,"last_activity_date":1702052687,"creation_date":1702045312,"question_id":77627211,"body_markdown":"I wanted to use this solution: https://stackoverflow.com/a/50378345/13995601\r\n\r\nIn Product.class:\r\n\r\n```\r\n    @JoinColumn(name = &quot;category_id&quot;, insertable = false, updatable = false)\r\n    @ManyToOne(targetEntity = Category.class, fetch = FetchType.EAGER)\r\n    private Category category;\r\n\r\n    @Column(name = &quot;category_id&quot;)\r\n    private Long categoryId;\r\n```\r\n\r\nCategory.class\r\n\r\n\r\n```\r\n@Entity\r\n@Getter\r\n@Setter\r\n@NoArgsConstructor\r\n@Table(name = &quot;categories&quot;)\r\npublic class Category {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = &quot;category_sequence&quot;)\r\n    @SequenceGenerator(name = &quot;category_sequence&quot;, sequenceName = &quot;category_sequence&quot;, allocationSize = 1)\r\n    private Long id;\r\n\r\n    @NotNull\r\n    private String name;\r\n\r\n}\r\n```\r\n\r\n\r\n```\r\n        Product pr = productRepository.save(product);\r\n        System.out.println(pr.getCategory()); // prints null\r\n```\r\n\r\n\r\nbut, when I fetch Product, only category_id is populated and not category and I want the category field.\r\nI used this approach in most places in my app, so it&#39;s important for me to understand what is the case.\r\n","title":"Hibernate not fetching foreign key object","body":"<p>I wanted to use this solution: <a href=\"https://stackoverflow.com/a/50378345/13995601\">https://stackoverflow.com/a/50378345/13995601</a></p>\n<p>In Product.class:</p>\n<pre><code>    @JoinColumn(name = &quot;category_id&quot;, insertable = false, updatable = false)\n    @ManyToOne(targetEntity = Category.class, fetch = FetchType.EAGER)\n    private Category category;\n\n    @Column(name = &quot;category_id&quot;)\n    private Long categoryId;\n</code></pre>\n<p>Category.class</p>\n<pre><code>@Entity\n@Getter\n@Setter\n@NoArgsConstructor\n@Table(name = &quot;categories&quot;)\npublic class Category {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = &quot;category_sequence&quot;)\n    @SequenceGenerator(name = &quot;category_sequence&quot;, sequenceName = &quot;category_sequence&quot;, allocationSize = 1)\n    private Long id;\n\n    @NotNull\n    private String name;\n\n}\n</code></pre>\n<pre><code>        Product pr = productRepository.save(product);\n        System.out.println(pr.getCategory()); // prints null\n</code></pre>\n<p>but, when I fetch Product, only category_id is populated and not category and I want the category field.\nI used this approach in most places in my app, so it's important for me to understand what is the case.</p>\n"},{"tags":["java","spring","spring-boot","hibernate","jpa"],"answers":[{"tags":[],"owner":{"account_id":134484,"reputation":3552,"user_id":336657,"accept_rate":65,"display_name":"jpprade"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1702045248,"creation_date":1702045248,"answer_id":77627206,"question_id":77627145,"body_markdown":"This will return all the ChildEntity whose parent has the nickname in parameter :\r\n\r\n    @Query(&quot;SELECT c FROM ChildEntity c join c.parentEntity p WHERE p.nickname = :nickname&quot;)\r\n    List&lt;ChildEntity&gt; retrieveByParentNickName(@Param(&quot;nickname&quot;) String nickname);","title":"I want children objects but I want to search them by parent fields in Hibernate","body":"<p>This will return all the ChildEntity whose parent has the nickname in parameter :</p>\n<pre><code>@Query(&quot;SELECT c FROM ChildEntity c join c.parentEntity p WHERE p.nickname = :nickname&quot;)\nList&lt;ChildEntity&gt; retrieveByParentNickName(@Param(&quot;nickname&quot;) String nickname);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14162458,"reputation":3900,"user_id":10231374,"display_name":"Toni"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1702052544,"creation_date":1702052544,"answer_id":77627931,"question_id":77627145,"body_markdown":"I suggest using [query methods][1] where queries are derived from the method name directly without writing them manually. \r\n\r\nIn your case the method should be defined as follows:\r\n```java\r\nList&lt;ChildEntity&gt; findAllByParentEntity_Nickname(String nickname);\r\n```\r\n\r\n [1]: https://docs.spring.io/spring-data/jpa/reference/jpa/query-methods.html","title":"I want children objects but I want to search them by parent fields in Hibernate","body":"<p>I suggest using <a href=\"https://docs.spring.io/spring-data/jpa/reference/jpa/query-methods.html\" rel=\"nofollow noreferrer\">query methods</a> where queries are derived from the method name directly without writing them manually.</p>\n<p>In your case the method should be defined as follows:</p>\n<pre class=\"lang-java prettyprint-override\"><code>List&lt;ChildEntity&gt; findAllByParentEntity_Nickname(String nickname);\n</code></pre>\n"}],"owner":{"account_id":83131,"reputation":8752,"user_id":233286,"accept_rate":73,"display_name":"ilhan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77627206,"answer_count":2,"score":0,"last_activity_date":1702052544,"creation_date":1702044681,"question_id":77627145,"body_markdown":"How I can get all children objects by filtering them by a nickname of their parents?\r\n\r\nI have parent entity:\r\n\r\n    import jakarta.persistence.*;\r\n    import lombok.Data;\r\n    import org.hibernate.validator.constraints.Length;\r\n    \r\n    @Entity\r\n    @Data\r\n    @Table(name = &quot;parent&quot;)\r\n    public class ParentEntity {\r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n        private Byte id;\r\n\r\n        private Integer age;\r\n        \r\n        @Column(columnDefinition = &quot;VARCHAR(100)&quot;)\r\n        private String nickname;\r\n    }\r\n\r\n\r\nI have child entity:\r\n    \r\n    import jakarta.persistence.*;\r\n    import lombok.Data;\r\n    import org.hibernate.validator.constraints.Length;\r\n    \r\n    @Entity\r\n    @Data\r\n    @Table(name = &quot;child&quot;)\r\n    public class ChildEntity {\r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n        private Integer id;\r\n    \r\n        private String name;\r\n    \r\n        private String surname;\r\n    \r\n        @Column(name = &quot;parent_id&quot;, nullable = false)\r\n        private Byte parentId;\r\n    \r\n        @ManyToOne(targetEntity = ParentEntity.class)\r\n        @JoinColumn(name = &quot;parent_id&quot;, updatable = false, insertable = false)\r\n        private ParentEntity parentEntity;\r\n    }\r\n\r\nAnd I have a repository:\r\n    \r\n    import com.example.ParentEntity;\r\n    import com.example.ChildEntity;\r\n    import org.springframework.data.jpa.repository.JpaRepository;\r\n    import org.springframework.stereotype.Repository;\r\n    \r\n    import java.util.List;\r\n    \r\n    @Repository\r\n    public interface ChildRepository extends JpaRepository&lt;ChildEntity, String&gt; {\r\n        // I guess something like this but I was not able to figure out\r\n        List&lt;ChildEntity&gt; findAllByParentEntity(String nickname);\r\n    }\r\n\r\n","title":"I want children objects but I want to search them by parent fields in Hibernate","body":"<p>How I can get all children objects by filtering them by a nickname of their parents?</p>\n<p>I have parent entity:</p>\n<pre><code>import jakarta.persistence.*;\nimport lombok.Data;\nimport org.hibernate.validator.constraints.Length;\n\n@Entity\n@Data\n@Table(name = &quot;parent&quot;)\npublic class ParentEntity {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Byte id;\n\n    private Integer age;\n    \n    @Column(columnDefinition = &quot;VARCHAR(100)&quot;)\n    private String nickname;\n}\n</code></pre>\n<p>I have child entity:</p>\n<pre><code>import jakarta.persistence.*;\nimport lombok.Data;\nimport org.hibernate.validator.constraints.Length;\n\n@Entity\n@Data\n@Table(name = &quot;child&quot;)\npublic class ChildEntity {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Integer id;\n\n    private String name;\n\n    private String surname;\n\n    @Column(name = &quot;parent_id&quot;, nullable = false)\n    private Byte parentId;\n\n    @ManyToOne(targetEntity = ParentEntity.class)\n    @JoinColumn(name = &quot;parent_id&quot;, updatable = false, insertable = false)\n    private ParentEntity parentEntity;\n}\n</code></pre>\n<p>And I have a repository:</p>\n<pre><code>import com.example.ParentEntity;\nimport com.example.ChildEntity;\nimport org.springframework.data.jpa.repository.JpaRepository;\nimport org.springframework.stereotype.Repository;\n\nimport java.util.List;\n\n@Repository\npublic interface ChildRepository extends JpaRepository&lt;ChildEntity, String&gt; {\n    // I guess something like this but I was not able to figure out\n    List&lt;ChildEntity&gt; findAllByParentEntity(String nickname);\n}\n</code></pre>\n"},{"tags":["java","data-structures","linked-list","queue","stack"],"comments":[{"owner":{"account_id":7142980,"reputation":323243,"user_id":5459839,"display_name":"trincot"},"score":0,"creation_date":1702031378,"post_id":77625894,"comment_id":136850527,"body_markdown":"Are you talking about the class definition, or about instances of the class (the actual linked lists)? *&quot;define a node inside a node&quot;* seems to talk about an actual linked list instance, but then you write *&quot;how can we define something...&quot;* which seems to refer to the class...","body":"Are you talking about the class definition, or about instances of the class (the actual linked lists)? <i>&quot;define a node inside a node&quot;</i> seems to talk about an actual linked list instance, but then you write <i>&quot;how can we define something...&quot;</i> which seems to refer to the class..."},{"owner":{"account_id":23805860,"reputation":1,"user_id":17815404,"display_name":"Aliaa Tarek"},"score":0,"creation_date":1702031797,"post_id":77625894,"comment_id":136850615,"body_markdown":"I am asking about the linkrdlist concept if it is about chained nodes how the node is written like that ?","body":"I am asking about the linkrdlist concept if it is about chained nodes how the node is written like that ?"},{"owner":{"account_id":7142980,"reputation":323243,"user_id":5459839,"display_name":"trincot"},"score":0,"creation_date":1702031912,"post_id":77625894,"comment_id":136850633,"body_markdown":"*&quot;how the node is written like that&quot;*: like what? There is no node in the code you shared. Nodes would be created with `new LinkedListNode()`...","body":"<i>&quot;how the node is written like that&quot;</i>: like what? There is no node in the code you shared. Nodes would be created with <code>new LinkedListNode()</code>..."},{"owner":{"account_id":23805860,"reputation":1,"user_id":17815404,"display_name":"Aliaa Tarek"},"score":0,"creation_date":1702032145,"post_id":77625894,"comment_id":136850677,"body_markdown":"what I mean is how when we define the node class inside it we defined the reference next which is of same type?","body":"what I mean is how when we define the node class inside it we defined the reference next which is of same type?"},{"owner":{"account_id":7142980,"reputation":323243,"user_id":5459839,"display_name":"trincot"},"score":0,"creation_date":1702032280,"post_id":77625894,"comment_id":136850698,"body_markdown":"OK, so you are not asking about the nodes then. You are asking about the class definition.","body":"OK, so you are not asking about the nodes then. You are asking about the class definition."},{"owner":{"account_id":23805860,"reputation":1,"user_id":17815404,"display_name":"Aliaa Tarek"},"score":0,"creation_date":1702032374,"post_id":77625894,"comment_id":136850705,"body_markdown":"yes , I think so :)","body":"yes , I think so :)"}],"answers":[{"tags":[],"owner":{"account_id":7142980,"reputation":323243,"user_id":5459839,"display_name":"trincot"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1702034454,"creation_date":1702033636,"answer_id":77626127,"question_id":77625894,"body_markdown":"Compilers can do things differently (like in [one or multiple passes](https://stackoverflow.com/questions/35673818/difference-between-one-pass-and-multi-pass-compilers)), but we can imagine this process:\r\n\r\nWhen a compiler parses the code, it builds a table of symbols (names), which at the start is empty. For instance, we could imagine that table like this:\r\n\r\n| name | type | value |\r\n| ---- | ---- | ----- |\r\n|  ... | .... | ...   |\r\n\r\nWhen parsing `class LinkedlistNode` the symbol `LinkedlistNode` is added to that table:\r\n\r\n| name            | type  | value     |\r\n| --------------- | ----- | --------- |\r\n|  LinkedlistNode | class | (empty)   |\r\n\r\nThen `int data` is processed: the class gets its first member with a (primitive) type that is known:\r\n\r\n| name            | type  | value        |\r\n| --------------- | ----- | ------------ |\r\n|  LinkedlistNode | class | { int data } |\r\n\r\nWhen `LinkedlistNode next` is encountered, the name `LinkedListNode` is recognised, so there is no mystery there: the class gets its second member:\r\n\r\n| name            | type  | value                             |\r\n| --------------- | ----- | --------------------------------- |\r\n|  LinkedlistNode | class | { int data, LinkedListNode next } |\r\n\r\nWe just have introduced a backreference, a loop if you want. It was not a problem that the *value* part of `LinkedListNode` was not yet finalised. The only thing that matters here is that `LinkedListNode` is an entry in our symbol table at the moment we encounter it again -- which is the case here.\r\n\r\nWithout any issue this graph is created:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nBe aware that this is not an *instance* of `LinkedListNode`. It is &quot;just&quot; the class definition. \r\n\r\nOnce you start creating actual nodes with `new LinkedListNode()`, the `next` member will be initialised with `null`. Then you *could* replace that `null` with another `new LinkedListNode()`, ...etc, and build your linked list.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/KiSJS.png","title":"How compiler understand self referential structures ? should it be infinite recursion?","body":"<p>Compilers can do things differently (like in <a href=\"https://stackoverflow.com/questions/35673818/difference-between-one-pass-and-multi-pass-compilers\">one or multiple passes</a>), but we can imagine this process:</p>\n<p>When a compiler parses the code, it builds a table of symbols (names), which at the start is empty. For instance, we could imagine that table like this:</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th>name</th>\n<th>type</th>\n<th>value</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>...</td>\n<td>....</td>\n<td>...</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>When parsing <code>class LinkedlistNode</code> the symbol <code>LinkedlistNode</code> is added to that table:</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th>name</th>\n<th>type</th>\n<th>value</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>LinkedlistNode</td>\n<td>class</td>\n<td>(empty)</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>Then <code>int data</code> is processed: the class gets its first member with a (primitive) type that is known:</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th>name</th>\n<th>type</th>\n<th>value</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>LinkedlistNode</td>\n<td>class</td>\n<td>{ int data }</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>When <code>LinkedlistNode next</code> is encountered, the name <code>LinkedListNode</code> is recognised, so there is no mystery there: the class gets its second member:</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th>name</th>\n<th>type</th>\n<th>value</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>LinkedlistNode</td>\n<td>class</td>\n<td>{ int data, LinkedListNode next }</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>We just have introduced a backreference, a loop if you want. It was not a problem that the <em>value</em> part of <code>LinkedListNode</code> was not yet finalised. The only thing that matters here is that <code>LinkedListNode</code> is an entry in our symbol table at the moment we encounter it again -- which is the case here.</p>\n<p>Without any issue this graph is created:</p>\n<p><a href=\"https://i.stack.imgur.com/KiSJS.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/KiSJS.png\" alt=\"enter image description here\" /></a></p>\n<p>Be aware that this is not an <em>instance</em> of <code>LinkedListNode</code>. It is &quot;just&quot; the class definition.</p>\n<p>Once you start creating actual nodes with <code>new LinkedListNode()</code>, the <code>next</code> member will be initialised with <code>null</code>. Then you <em>could</em> replace that <code>null</code> with another <code>new LinkedListNode()</code>, ...etc, and build your linked list.</p>\n"},{"tags":[],"owner":{"account_id":3979878,"reputation":27592,"user_id":3282056,"accept_rate":80,"display_name":"rcgldr"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1702052055,"creation_date":1702052055,"answer_id":77627887,"question_id":77625894,"body_markdown":"`next` is a reference to a node, not an instance of a node. It is essentially a pointer to a node.","title":"How compiler understand self referential structures ? should it be infinite recursion?","body":"<p><code>next</code> is a reference to a node, not an instance of a node. It is essentially a pointer to a node.</p>\n"}],"owner":{"account_id":23805860,"reputation":1,"user_id":17815404,"display_name":"Aliaa Tarek"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":55,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1702052055,"creation_date":1702031036,"question_id":77625894,"body_markdown":"\r\n\r\n      class LinkedlistNode {\r\n       int data;\r\n       LinkedlistNode next=null ;\r\n\r\n      }`\r\n\r\n\r\nfrom the first day I got to the concept of linkedlist , I was never convinced how can we define a node inside a node . How can we define something while we are already defining it ?\r\n\r\nI tried to ask chat gpt he told me that compiler knew earlier that there is class called node but its definition isn&#39;t completed yet so it waits until classes are loaded by JVM but I wasn&#39;t convinced . Then on Quora I saw an answer says that pointers or references already have a fixed size.","title":"How compiler understand self referential structures ? should it be infinite recursion?","body":"<pre><code>  class LinkedlistNode {\n   int data;\n   LinkedlistNode next=null ;\n\n  }`\n</code></pre>\n<p>from the first day I got to the concept of linkedlist , I was never convinced how can we define a node inside a node . How can we define something while we are already defining it ?</p>\n<p>I tried to ask chat gpt he told me that compiler knew earlier that there is class called node but its definition isn't completed yet so it waits until classes are loaded by JVM but I wasn't convinced . Then on Quora I saw an answer says that pointers or references already have a fixed size.</p>\n"},{"tags":["java","oop","nullpointerexception"],"comments":[{"owner":{"account_id":247613,"reputation":284087,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":0,"creation_date":1702051323,"post_id":77627810,"comment_id":136853907,"body_markdown":"When you create an array of reference type (here an array of Student type), the array is initially filled with nothing but null values. You cannot use any of the array items until you first create new Student  objects and put them into the array. Think of a reference array like an empty egg carton. You can&#39;t make an omelet with the contents of the carton until it is first filled with eggs.","body":"When you create an array of reference type (here an array of Student type), the array is initially filled with nothing but null values. You cannot use any of the array items until you first create new Student  objects and put them into the array. Think of a reference array like an empty egg carton. You can&#39;t make an omelet with the contents of the carton until it is first filled with eggs."},{"owner":{"account_id":247613,"reputation":284087,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":1,"creation_date":1702051388,"post_id":77627810,"comment_id":136853917,"body_markdown":"So the first line of the for loop should be something on the order of `s[i] = new StudentClassandObject.Student();` to create the &quot;egg&quot;, the object that then can have its state changed.","body":"So the first line of the for loop should be something on the order of <code>s[i] = new StudentClassandObject.Student();</code> to create the &quot;egg&quot;, the object that then can have its state changed."},{"owner":{"account_id":247613,"reputation":284087,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":0,"creation_date":1702051444,"post_id":77627810,"comment_id":136853928,"body_markdown":"Side note, there is no need or even reason to nest the Student class inside of the StudentClassandObject class. Best to get it out of there and into its own `Student.java` file.","body":"Side note, there is no need or even reason to nest the Student class inside of the StudentClassandObject class. Best to get it out of there and into its own <code>Student.java</code> file."}],"owner":{"account_id":28657187,"reputation":1,"user_id":21942904,"display_name":"Vignesh"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"closed_date":1702051262,"answer_count":0,"score":-2,"last_activity_date":1702052015,"creation_date":1702051221,"question_id":77627810,"body_markdown":"```\r\nimport java.util.Scanner;\r\n\r\npublic class StudentClassandObject {\r\n\tprivate static final Scanner in = new Scanner(System.in);\r\n\r\n\tpublic static Scanner in() {\r\n\t\treturn in;\r\n\t}\r\n\r\n\tpublic static class Student{\r\n\t\tString Name;\r\n\t\tint Reg_no;\r\n\t\tint marks;\r\n\t}\r\n\r\n\tpublic static void main(String[] args){\r\n\t\tSystem.out.print(&quot;Enter number of Students: &quot;);\r\n\t\tint n = in().nextInt();\r\n\t\tStudentClassandObject.Student[] s = new StudentClassandObject.Student[n];\r\n\t\tfor(int i = 0; i&lt;n;i++){\r\n\t\t\tSystem.out.println(&quot;Enter details of Student &quot;+i+1);\r\n\t\t\tSystem.out.print(&quot;Name: &quot;);\r\n\t\t\ts[i].Name = in.nextLine();\r\n\t\t\tSystem.out.print(&quot;Registration number: &quot;);\r\n\t\t\ts[i].Reg_no = in.nextInt();\r\n\t\t\tSystem.out.print(&quot;Marks: &quot;);\r\n\t\t\ts[i].marks = in.nextInt();\r\n\t\t}\r\n\t\tSystem.out.println(&quot;Details: &quot;);\r\n\t\tfor(int i = 0; i&lt;n;i++){\r\n\t\t\tSystem.out.println(&quot;Details of Student &quot;+i+1);\r\n\t\t\tSystem.out.println(&quot;Name: &quot;+s[i].Name);\r\n\t\t\tSystem.out.println(&quot;Registration number: &quot;+s[i].Reg_no);\r\n\t\t\tSystem.out.println(&quot;Marks: &quot;+s[i].marks);\r\n\t\t}\r\n\t}\r\n}\r\n```\r\n\r\n\r\n\r\nI was trying out this program in order to read Details of N students and print the same using class Student and Object s, but unfortunately the following error occurred out of nowhere? I dont know what the following error means\r\n\r\n```\r\nEnter number of Students: 2\r\nEnter details of Student 01\r\nName: Exception in thread &quot;main&quot; java.lang.NullPointerException: Cannot assign field &quot;Name&quot; because &quot;s[i]&quot; is null\r\n\tat StudentClassandObject.main(StudentClassandObject.java:26)\r\n\r\nProcess finished with exit code 1\r\n```\r\n ","title":"Resolving java.lang.NullPointerException","body":"<pre><code>import java.util.Scanner;\n\npublic class StudentClassandObject {\n    private static final Scanner in = new Scanner(System.in);\n\n    public static Scanner in() {\n        return in;\n    }\n\n    public static class Student{\n        String Name;\n        int Reg_no;\n        int marks;\n    }\n\n    public static void main(String[] args){\n        System.out.print(&quot;Enter number of Students: &quot;);\n        int n = in().nextInt();\n        StudentClassandObject.Student[] s = new StudentClassandObject.Student[n];\n        for(int i = 0; i&lt;n;i++){\n            System.out.println(&quot;Enter details of Student &quot;+i+1);\n            System.out.print(&quot;Name: &quot;);\n            s[i].Name = in.nextLine();\n            System.out.print(&quot;Registration number: &quot;);\n            s[i].Reg_no = in.nextInt();\n            System.out.print(&quot;Marks: &quot;);\n            s[i].marks = in.nextInt();\n        }\n        System.out.println(&quot;Details: &quot;);\n        for(int i = 0; i&lt;n;i++){\n            System.out.println(&quot;Details of Student &quot;+i+1);\n            System.out.println(&quot;Name: &quot;+s[i].Name);\n            System.out.println(&quot;Registration number: &quot;+s[i].Reg_no);\n            System.out.println(&quot;Marks: &quot;+s[i].marks);\n        }\n    }\n}\n</code></pre>\n<p>I was trying out this program in order to read Details of N students and print the same using class Student and Object s, but unfortunately the following error occurred out of nowhere? I dont know what the following error means</p>\n<pre><code>Enter number of Students: 2\nEnter details of Student 01\nName: Exception in thread &quot;main&quot; java.lang.NullPointerException: Cannot assign field &quot;Name&quot; because &quot;s[i]&quot; is null\n    at StudentClassandObject.main(StudentClassandObject.java:26)\n\nProcess finished with exit code 1\n</code></pre>\n"},{"tags":["java","active-directory","kerberos","spnego","gssapi"],"owner":{"account_id":15827598,"reputation":53,"user_id":11420000,"display_name":"Kamilox"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":1,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":0,"score":-1,"last_activity_date":1702051706,"creation_date":1702051706,"question_id":77627862,"body_markdown":"I have an application with kerberos auth. I implemented it with spring-security-kerberos. I  also used the com.kerb4j.kerb4j-server-spring-security for reading group SIDs from kerberos ticket. I used classes like *KerberosAuthenticationProvider*, *KerberosServiceAuthenticationProvider*, *SunJaasKerberosTicketValidator*, *PacLogonInfo*, *com.kerb4j.server.marshall.pac.Pac*, *SpnegoInitToken*.\r\n\r\nEverything works fine but I am just curious, should I try to implement something like validating kerberos tickets and PACs in AD server? Or validating it with *SunJaasKerberosTicketValidator* is enought?\r\n\r\nHow can I find out that SIDs are compressed and PACs are signatured?","title":"Is kerberos ticket validation in AD required?","body":"<p>I have an application with kerberos auth. I implemented it with spring-security-kerberos. I  also used the com.kerb4j.kerb4j-server-spring-security for reading group SIDs from kerberos ticket. I used classes like <em>KerberosAuthenticationProvider</em>, <em>KerberosServiceAuthenticationProvider</em>, <em>SunJaasKerberosTicketValidator</em>, <em>PacLogonInfo</em>, <em>com.kerb4j.server.marshall.pac.Pac</em>, <em>SpnegoInitToken</em>.</p>\n<p>Everything works fine but I am just curious, should I try to implement something like validating kerberos tickets and PACs in AD server? Or validating it with <em>SunJaasKerberosTicketValidator</em> is enought?</p>\n<p>How can I find out that SIDs are compressed and PACs are signatured?</p>\n"},{"tags":["java","xsd"],"answers":[{"tags":[],"owner":{"account_id":1446012,"reputation":66,"user_id":1364462,"display_name":"chalailama"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1702051624,"creation_date":1702051624,"answer_id":77627854,"question_id":64477344,"body_markdown":"You can use a bindings file that tells jaxb to convert `xsd:double` to BigDecimal \r\n\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;jaxb:bindings xmlns:jaxb=&quot;http://java.sun.com/xml/ns/jaxb&quot;\r\n               xmlns:xjc=&quot;http://java.sun.com/xml/ns/jaxb/xjc&quot;\r\n               xmlns:xs=&quot;http://www.w3.org/2001/XMLSchema&quot;\r\n               jaxb:version=&quot;2.1&quot;&gt;\r\n    &lt;jaxb:globalBindings generateElementProperty=&quot;false&quot;&gt;\r\n        &lt;xjc:javaType adapter=&quot;utils.BigDecimalXmlAdapter&quot; name=&quot;java.math.BigDecimal&quot; xmlType=&quot;xs:double&quot;/&gt;\r\n    &lt;/jaxb:globalBindings&gt;\r\n&lt;/jaxb:bindings&gt;\r\n```\r\n\r\nand BigDecimalXmlAdapter is \r\n\r\n```java\r\npackage utils;\r\n\r\nimport javax.xml.bind.annotation.adapters.XmlAdapter;\r\nimport java.math.BigDecimal;\r\n\r\npublic class BigDecimalXmlAdapter extends XmlAdapter&lt;String, BigDecimal&gt; {\r\n\r\n    @Override\r\n    public BigDecimal unmarshal(String s) throws Exception {\r\n        return new BigDecimal(s);\r\n    }\r\n\r\n    @Override\r\n    public String marshal(BigDecimal bigDecimal) throws Exception {\r\n        return bigDecimal.toString();\r\n    }\r\n}\r\n```","title":"XSD double binding to BigDecimal","body":"<p>You can use a bindings file that tells jaxb to convert <code>xsd:double</code> to BigDecimal</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;jaxb:bindings xmlns:jaxb=&quot;http://java.sun.com/xml/ns/jaxb&quot;\n               xmlns:xjc=&quot;http://java.sun.com/xml/ns/jaxb/xjc&quot;\n               xmlns:xs=&quot;http://www.w3.org/2001/XMLSchema&quot;\n               jaxb:version=&quot;2.1&quot;&gt;\n    &lt;jaxb:globalBindings generateElementProperty=&quot;false&quot;&gt;\n        &lt;xjc:javaType adapter=&quot;utils.BigDecimalXmlAdapter&quot; name=&quot;java.math.BigDecimal&quot; xmlType=&quot;xs:double&quot;/&gt;\n    &lt;/jaxb:globalBindings&gt;\n&lt;/jaxb:bindings&gt;\n</code></pre>\n<p>and BigDecimalXmlAdapter is</p>\n<pre class=\"lang-java prettyprint-override\"><code>package utils;\n\nimport javax.xml.bind.annotation.adapters.XmlAdapter;\nimport java.math.BigDecimal;\n\npublic class BigDecimalXmlAdapter extends XmlAdapter&lt;String, BigDecimal&gt; {\n\n    @Override\n    public BigDecimal unmarshal(String s) throws Exception {\n        return new BigDecimal(s);\n    }\n\n    @Override\n    public String marshal(BigDecimal bigDecimal) throws Exception {\n        return bigDecimal.toString();\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":13380355,"reputation":396,"user_id":9655823,"display_name":"merc-angel"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":140,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1702051624,"creation_date":1603351959,"question_id":64477344,"body_markdown":"I have \t\t\t\r\n\r\n    &lt;xsd:element name=&quot;amount&quot; type=&quot;xsd:double&quot; minOccurs=&quot;0&quot; maxOccurs=&quot;1&quot;/&gt;\r\n\r\nin my xsd schema element. \r\n\r\n\r\nBut unfortunately I can&#39;t change that. Based on this document, I generate a class in Java with\r\nApache CXF. How can I parse this, get generated value in BigDecimal. \r\n\r\nNow I have\r\n\r\n    protected Double amount;\r\n\r\nBut I want something like this\r\n\r\n    protected BigDecimal amount;\r\n\r\n\r\nBut I cant change my xsd element with Double. I would also not like to do it globally, but only for selected fields. Is it possible?\r\n\r\n","title":"XSD double binding to BigDecimal","body":"<p>I have</p>\n<pre><code>&lt;xsd:element name=&quot;amount&quot; type=&quot;xsd:double&quot; minOccurs=&quot;0&quot; maxOccurs=&quot;1&quot;/&gt;\n</code></pre>\n<p>in my xsd schema element.</p>\n<p>But unfortunately I can't change that. Based on this document, I generate a class in Java with\nApache CXF. How can I parse this, get generated value in BigDecimal.</p>\n<p>Now I have</p>\n<pre><code>protected Double amount;\n</code></pre>\n<p>But I want something like this</p>\n<pre><code>protected BigDecimal amount;\n</code></pre>\n<p>But I cant change my xsd element with Double. I would also not like to do it globally, but only for selected fields. Is it possible?</p>\n"},{"tags":["java","hazelcast","vert.x","vertx-verticle","vertx-eventbus"],"answers":[{"tags":[],"owner":{"account_id":14230921,"reputation":836,"user_id":10280183,"display_name":"Mike Yawn"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1702051428,"creation_date":1702051428,"answer_id":77627831,"question_id":77623208,"body_markdown":"Hard to say with any certainty what might be happening, but what serialization method are you using for the Hazelcast map?  Java Serializable is very inefficient so if that is being used, changing that to something like Compact or IdentifiedDataSerializable could make a difference. ","title":"Vertx Event Bus And Hazelcast Scaling","body":"<p>Hard to say with any certainty what might be happening, but what serialization method are you using for the Hazelcast map?  Java Serializable is very inefficient so if that is being used, changing that to something like Compact or IdentifiedDataSerializable could make a difference.</p>\n"}],"owner":{"account_id":1804616,"reputation":440,"user_id":1642027,"accept_rate":80,"display_name":"Areeb Gillani"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1702051428,"creation_date":1701985126,"question_id":77623208,"body_markdown":"I am using Vertx 4.4.5 in my project. I have created a few services and achieved a 3k TPS with 11 microservices on an 18 core VM running on Dell R730 with OS RHEL 9. Each request cycle has multiple read and writes on database as well as on Redis. Redis and Database are on the same machine but on different VM. \r\n\r\nThe message size was around 1kb when the TPS was 3k. Whereas, when I increase the message size to approx. 100kb which is to be considered an average production message size. The TPS dropped to 600. I checked the logs and found that event bus&#39;s consumer is getting the message after a few seconds delay. I googled and found that event bus is not designed for large messages so I used shared data to write my 100kb message on an async map and used the event bus to send the apiKey only for identification and fetching purpose. So, on my next service I fetch that data using that apiKey from the shared data map, asynchronously. \r\n\r\nThe problem is from service A (ApiGateWay) to B (BusinessService) I write all the 100kb in shared data and upon completion of writing the data on shared data\r\n\r\n    map.put(.., ..).onCompelete(res-&gt;{\r\n    if(res.succeed()){\r\n       eventBus.request(.., .., ..);\r\n    }\r\n    });\r\n\r\n \r\n\r\nI called the event buss using\r\n\r\n    eventBus.request(.., .., ..);\r\n\r\n \r\nto send data to next service, whereas on the other service the consumer receives this message after the same delay which was before when I was using event bus and not shared data. I have also set the message buffer of consumer as well to 10k.\r\n\r\n    eventBus.consumer(.., ..).setMaxBufferedMessages(10000);\r\n\r\nAm I missing something? Some other configs are:\r\n\r\n&gt; WorkerInstances on A -&gt; 100 WorkerPoolSize on A -&gt; 100\r\n&gt; \r\n&gt; WorkerInstances on B -&gt; 100 WorkerPoolSize on B -&gt; 100\r\n\r\nI have also tried to scale hazelcast when starting service A and B using\r\n\r\n     -Dhazelcast.socket.receive.buffer.size=10240 -Dhazelcast.socket.send.buffer.size=10240\r\nLoad Run Details\r\n\r\n&gt; - Jmeter\r\n&gt; - 7000 Threads\r\n&gt; - 100 loop count\r\n&gt; - 0.7s Ramp up\r\n&gt; - 1000ms Constant Delay\r\n\r\nThanks for your help in advance. Cheers!","title":"Vertx Event Bus And Hazelcast Scaling","body":"<p>I am using Vertx 4.4.5 in my project. I have created a few services and achieved a 3k TPS with 11 microservices on an 18 core VM running on Dell R730 with OS RHEL 9. Each request cycle has multiple read and writes on database as well as on Redis. Redis and Database are on the same machine but on different VM.</p>\n<p>The message size was around 1kb when the TPS was 3k. Whereas, when I increase the message size to approx. 100kb which is to be considered an average production message size. The TPS dropped to 600. I checked the logs and found that event bus's consumer is getting the message after a few seconds delay. I googled and found that event bus is not designed for large messages so I used shared data to write my 100kb message on an async map and used the event bus to send the apiKey only for identification and fetching purpose. So, on my next service I fetch that data using that apiKey from the shared data map, asynchronously.</p>\n<p>The problem is from service A (ApiGateWay) to B (BusinessService) I write all the 100kb in shared data and upon completion of writing the data on shared data</p>\n<pre><code>map.put(.., ..).onCompelete(res-&gt;{\nif(res.succeed()){\n   eventBus.request(.., .., ..);\n}\n});\n</code></pre>\n<p>I called the event buss using</p>\n<pre><code>eventBus.request(.., .., ..);\n</code></pre>\n<p>to send data to next service, whereas on the other service the consumer receives this message after the same delay which was before when I was using event bus and not shared data. I have also set the message buffer of consumer as well to 10k.</p>\n<pre><code>eventBus.consumer(.., ..).setMaxBufferedMessages(10000);\n</code></pre>\n<p>Am I missing something? Some other configs are:</p>\n<blockquote>\n<p>WorkerInstances on A -&gt; 100 WorkerPoolSize on A -&gt; 100</p>\n<p>WorkerInstances on B -&gt; 100 WorkerPoolSize on B -&gt; 100</p>\n</blockquote>\n<p>I have also tried to scale hazelcast when starting service A and B using</p>\n<pre><code> -Dhazelcast.socket.receive.buffer.size=10240 -Dhazelcast.socket.send.buffer.size=10240\n</code></pre>\n<p>Load Run Details</p>\n<blockquote>\n<ul>\n<li>Jmeter</li>\n<li>7000 Threads</li>\n<li>100 loop count</li>\n<li>0.7s Ramp up</li>\n<li>1000ms Constant Delay</li>\n</ul>\n</blockquote>\n<p>Thanks for your help in advance. Cheers!</p>\n"},{"tags":["java","java-8","completable-future"],"comments":[{"owner":{"account_id":440158,"reputation":323221,"user_id":829571,"accept_rate":94,"display_name":"assylias"},"score":1,"creation_date":1516969871,"post_id":48461315,"comment_id":83915600,"body_markdown":"Using actual code would make the question clearer.","body":"Using actual code would make the question clearer."},{"owner":{"account_id":5163818,"reputation":750,"user_id":4207648,"accept_rate":67,"display_name":"Valya"},"score":0,"creation_date":1516971076,"post_id":48461315,"comment_id":83916194,"body_markdown":"@assylias added the code.","body":"@assylias added the code."},{"owner":{"account_id":3211603,"reputation":289287,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1516984507,"post_id":48461315,"comment_id":83924567,"body_markdown":"Your code doesn’t match what you have written in the question’s title. There is no `CompletableFuture&lt;Stream&lt;T&gt;&gt;` in you code.","body":"Your code doesn’t match what you have written in the question’s title. There is no <code>CompletableFuture&lt;Stream&lt;T&gt;&gt;</code> in you code."},{"owner":{"account_id":3211603,"reputation":289287,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1516986346,"post_id":48461315,"comment_id":83925672,"body_markdown":"Besides the mismatching title, why do you insist of complicating your code by doing *two* of these transformations?","body":"Besides the mismatching title, why do you insist of complicating your code by doing <i>two</i> of these transformations?"},{"owner":{"account_id":249169,"reputation":19388,"user_id":525036,"accept_rate":25,"display_name":"Didier L"},"score":0,"creation_date":1517011850,"post_id":48461315,"comment_id":83936506,"body_markdown":"Related: [How to divide 1 completablefuture to many completablefuture in stream?](https://stackoverflow.com/q/39792291/525036)","body":"Related: <a href=\"https://stackoverflow.com/q/39792291/525036\">How to divide 1 completablefuture to many completablefuture in stream?</a>"}],"answers":[{"tags":[],"owner":{"account_id":3313246,"reputation":26479,"user_id":2786156,"accept_rate":76,"display_name":"St.Antario"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1516971447,"creation_date":1516971447,"answer_id":48461833,"question_id":48461315,"body_markdown":"In general you cannot perform this sort of reversing. In functional categories language, you have two functors between the following categories:\r\n\r\n    T --&gt; Stream&lt;T&gt;\r\n    Stream&lt;T&gt; --&gt; CompletableFuture&lt;Stream&lt;T&gt;&gt;\r\n\r\nYou simply do not have a functor between\r\n\r\n    T --&gt; CompletableFuture&lt;T&gt;\r\n    CompletableFuture&lt;T&gt; --&gt; Stream&lt;CompletableFuture&lt;T&gt;&gt;\r\n\r\nIf you don&#39;t want to care about the outer `CompletableFuture` and need `Stream` semantic, you need some sort of `StreamT` [monad transfomer][1]. Java currently do not have higher-kinded types support, so I&#39;m not sure (but maybe applying some non-standard tricks) it is possible to implement something like `StreamT`\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Monad_transformer","title":"How to transform CompletableFuture&lt;Stream&lt;T&gt;&gt; to Stream&lt;CompletableFuture&lt;T&gt;&gt;?","body":"<p>In general you cannot perform this sort of reversing. In functional categories language, you have two functors between the following categories:</p>\n\n<pre><code>T --&gt; Stream&lt;T&gt;\nStream&lt;T&gt; --&gt; CompletableFuture&lt;Stream&lt;T&gt;&gt;\n</code></pre>\n\n<p>You simply do not have a functor between</p>\n\n<pre><code>T --&gt; CompletableFuture&lt;T&gt;\nCompletableFuture&lt;T&gt; --&gt; Stream&lt;CompletableFuture&lt;T&gt;&gt;\n</code></pre>\n\n<p>If you don't want to care about the outer <code>CompletableFuture</code> and need <code>Stream</code> semantic, you need some sort of <code>StreamT</code> <a href=\"https://en.wikipedia.org/wiki/Monad_transformer\" rel=\"nofollow noreferrer\">monad transfomer</a>. Java currently do not have higher-kinded types support, so I'm not sure (but maybe applying some non-standard tricks) it is possible to implement something like <code>StreamT</code></p>\n"},{"tags":[],"owner":{"account_id":10312640,"reputation":29929,"user_id":7607923,"accept_rate":83,"display_name":"holi-java"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1517499233,"creation_date":1516975716,"answer_id":48462960,"question_id":48461315,"body_markdown":"If I don&#39;t misunderstand your intention, you want to flatten the result only. you can use the `Spliterator` to receive result lazily &amp; use `flatMap` to merge `Stream`s into a flatten stream, for example:\r\n\r\n    Stream&lt;CompletableFuture&lt;ScrappingResult&gt;&gt; scrappingFuturesUnwrapped =\r\n                   scrappingFutures.flatMap(each -&gt; unwrap(each));\r\n\r\n\r\n---\r\n\r\n    static &lt;T&gt; Stream&lt;? extends CompletableFuture&lt;T&gt;&gt; \r\n      unwrap(CompletableFuture&lt;? extends List&lt;? extends T&gt;&gt; master) {\r\n\r\n        return generate(new Predicate&lt;Consumer&lt;? super CompletableFuture&lt;T&gt;&gt;&gt;() {\r\n\r\n            private Iterator&lt;? extends T&gt; cursor;\r\n\r\n            @Override\r\n            public boolean test(Consumer&lt;? super CompletableFuture&lt;T&gt;&gt; consumer) {\r\n                cursor = cursor == null ? await().iterator() : cursor;\r\n                if (cursor.hasNext()) {\r\n                    consumer.accept(completedFuture(cursor.next()));\r\n                    return true;\r\n                }\r\n                return false;\r\n            }\r\n\r\n            //                        v--- blocked at the first time\r\n            private List&lt;? extends T&gt; await() {\r\n                try {\r\n                    return master.get();\r\n                } catch (InterruptedException | ExecutionException e) {\r\n                    throw new CompletionException(e);\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    static &lt;T&gt; Stream&lt;? extends CompletableFuture&lt;T&gt;&gt; \r\n      generate(Predicate&lt;Consumer&lt;? super CompletableFuture&lt;T&gt;&gt;&gt; generator) {\r\n\r\n        long unknownSize = Long.MAX_VALUE;\r\n        return stream(new AbstractSpliterator&lt;CompletableFuture&lt;T&gt;&gt;(unknownSize, 0) {\r\n            public boolean tryAdvance(Consumer&lt;? super CompletableFuture&lt;T&gt;&gt; action) {\r\n                return generator.test(action);\r\n            }\r\n        }, false);\r\n    }\r\n\r\n\r\n## Summary \r\n\r\nThe solution above is just my first thought and it isn&#39;t the best approach in this case, you can think it against with [big design first][1]. However, even if it is a poor solution but I&#39;ll keep it here since it maybe give somebody thinking in other ways. for more details, you can see the comments of @Holger from here and [there](https://stackoverflow.com/questions/48561183/replace-for-loop-with-java-8-foreach-for-updating-values/48561991?noredirect=1#comment84126733_48561991).\r\n\r\nI admit the best approach is what @Holger have said below, since there is no one write it down, please let me record it to serve more people.\r\n\r\n    Stream&lt;CompletableFuture&lt;ScrappingResult&gt;&gt; scrappingFuturesUnwrapped =\r\n                   scrappingFutures.flatMap(each -&gt; each.join().stream())\r\n                                   .map(CompletableFuture::completedFuture);\r\n\r\n\r\n[1]: https://en.wikipedia.org/wiki/Big_Design_Up_Front\r\n","title":"How to transform CompletableFuture&lt;Stream&lt;T&gt;&gt; to Stream&lt;CompletableFuture&lt;T&gt;&gt;?","body":"<p>If I don't misunderstand your intention, you want to flatten the result only. you can use the <code>Spliterator</code> to receive result lazily &amp; use <code>flatMap</code> to merge <code>Stream</code>s into a flatten stream, for example:</p>\n\n<pre><code>Stream&lt;CompletableFuture&lt;ScrappingResult&gt;&gt; scrappingFuturesUnwrapped =\n               scrappingFutures.flatMap(each -&gt; unwrap(each));\n</code></pre>\n\n<hr>\n\n<pre><code>static &lt;T&gt; Stream&lt;? extends CompletableFuture&lt;T&gt;&gt; \n  unwrap(CompletableFuture&lt;? extends List&lt;? extends T&gt;&gt; master) {\n\n    return generate(new Predicate&lt;Consumer&lt;? super CompletableFuture&lt;T&gt;&gt;&gt;() {\n\n        private Iterator&lt;? extends T&gt; cursor;\n\n        @Override\n        public boolean test(Consumer&lt;? super CompletableFuture&lt;T&gt;&gt; consumer) {\n            cursor = cursor == null ? await().iterator() : cursor;\n            if (cursor.hasNext()) {\n                consumer.accept(completedFuture(cursor.next()));\n                return true;\n            }\n            return false;\n        }\n\n        //                        v--- blocked at the first time\n        private List&lt;? extends T&gt; await() {\n            try {\n                return master.get();\n            } catch (InterruptedException | ExecutionException e) {\n                throw new CompletionException(e);\n            }\n        }\n    });\n}\n\nstatic &lt;T&gt; Stream&lt;? extends CompletableFuture&lt;T&gt;&gt; \n  generate(Predicate&lt;Consumer&lt;? super CompletableFuture&lt;T&gt;&gt;&gt; generator) {\n\n    long unknownSize = Long.MAX_VALUE;\n    return stream(new AbstractSpliterator&lt;CompletableFuture&lt;T&gt;&gt;(unknownSize, 0) {\n        public boolean tryAdvance(Consumer&lt;? super CompletableFuture&lt;T&gt;&gt; action) {\n            return generator.test(action);\n        }\n    }, false);\n}\n</code></pre>\n\n<h2>Summary</h2>\n\n<p>The solution above is just my first thought and it isn't the best approach in this case, you can think it against with <a href=\"https://en.wikipedia.org/wiki/Big_Design_Up_Front\" rel=\"nofollow noreferrer\">big design first</a>. However, even if it is a poor solution but I'll keep it here since it maybe give somebody thinking in other ways. for more details, you can see the comments of @Holger from here and <a href=\"https://stackoverflow.com/questions/48561183/replace-for-loop-with-java-8-foreach-for-updating-values/48561991?noredirect=1#comment84126733_48561991\">there</a>.</p>\n\n<p>I admit the best approach is what @Holger have said below, since there is no one write it down, please let me record it to serve more people.</p>\n\n<pre><code>Stream&lt;CompletableFuture&lt;ScrappingResult&gt;&gt; scrappingFuturesUnwrapped =\n               scrappingFutures.flatMap(each -&gt; each.join().stream())\n                               .map(CompletableFuture::completedFuture);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":173621,"reputation":10596,"user_id":402428,"display_name":"michid"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1673118589,"creation_date":1668549477,"answer_id":74452659,"question_id":48461315,"body_markdown":"You can convert a `Stream&lt;CompletableFuture&lt;T&gt;&gt;` to a `CompletableFuture&lt;Stream&lt;T&gt;&gt;` using [`Stream.reduce`][1]:\r\n\r\n    static &lt;T&gt; CompletableFuture&lt;Stream&lt;T&gt;&gt; reduce(Stream&lt;CompletableFuture&lt;T&gt;&gt; futures) {\r\n        return futures\r\n            .map(future -&gt; future.thenApply(Stream::of))\r\n            .reduce(\r\n                CompletableFuture.completedFuture(Stream.empty()),\r\n                MyClass::combine);\r\n    }\r\n\r\nFor this to work, we still need to define a helper function `combine` for combining two instances of `CompletableFuture&lt;Stream&lt;T&gt;&gt;` that concatenates the stream inside of the individual futures:\r\n\r\n    static &lt;T&gt;CompletableFuture&lt;Stream&lt;T&gt;&gt; combine(CompletableFuture&lt;Stream&lt;T&gt;&gt; future1, CompletableFuture&lt;Stream&lt;T&gt;&gt; future2) {\r\n        return future1\r\n            .thenCompose(stream1 -&gt; future2\r\n            .thenApply(stream2 -&gt; Stream.concat(stream1, stream2)));\r\n    }\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/stream/Stream.html#reduce(T,java.util.function.BinaryOperator)","title":"How to transform CompletableFuture&lt;Stream&lt;T&gt;&gt; to Stream&lt;CompletableFuture&lt;T&gt;&gt;?","body":"<p>You can convert a <code>Stream&lt;CompletableFuture&lt;T&gt;&gt;</code> to a <code>CompletableFuture&lt;Stream&lt;T&gt;&gt;</code> using <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/stream/Stream.html#reduce(T,java.util.function.BinaryOperator)\" rel=\"nofollow noreferrer\"><code>Stream.reduce</code></a>:</p>\n<pre><code>static &lt;T&gt; CompletableFuture&lt;Stream&lt;T&gt;&gt; reduce(Stream&lt;CompletableFuture&lt;T&gt;&gt; futures) {\n    return futures\n        .map(future -&gt; future.thenApply(Stream::of))\n        .reduce(\n            CompletableFuture.completedFuture(Stream.empty()),\n            MyClass::combine);\n}\n</code></pre>\n<p>For this to work, we still need to define a helper function <code>combine</code> for combining two instances of <code>CompletableFuture&lt;Stream&lt;T&gt;&gt;</code> that concatenates the stream inside of the individual futures:</p>\n<pre><code>static &lt;T&gt;CompletableFuture&lt;Stream&lt;T&gt;&gt; combine(CompletableFuture&lt;Stream&lt;T&gt;&gt; future1, CompletableFuture&lt;Stream&lt;T&gt;&gt; future2) {\n    return future1\n        .thenCompose(stream1 -&gt; future2\n        .thenApply(stream2 -&gt; Stream.concat(stream1, stream2)));\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":188215,"reputation":3930,"user_id":426822,"accept_rate":40,"display_name":"gzak"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1702050911,"creation_date":1702050911,"answer_id":77627785,"question_id":48461315,"body_markdown":"[michid](https://stackoverflow.com/users/402428/michid)&#39;s answer works and is the most purely functional, but it&#39;s a bit inefficient because it creates a &quot;linked list&quot; of nested concatenated singleton streams, something like this:\r\n```\r\nconcat(of(A),\r\n       concat(of(B),\r\n              concat(of(C), ...)))\r\n```\r\n\r\nSo, here&#39;s a more efficient (albeit not purely functional) version, which only requires the creation of a single intermediate array of all the futures:\r\n```\r\nstatic &lt;T&gt; CompletableFuture&lt;Stream&lt;T&gt;&gt; allOfStream(Stream&lt;CompletableFuture&lt;T&gt;&gt; stream) {\r\n  CompletableFuture&lt;T&gt;[] futuresArray = futures.&lt;CompletableFuture&lt;T&gt;&gt;toArray(CompletableFuture[]::new);\r\n  return CompletableFuture.allOf(futuresArray)\r\n    .thenApply(ignored -&gt; Arrays.stream(futuresArray).map(CompletableFuture::join));\r\n}\r\n```\r\nThis is still non-blocking, since the lambda in `thenApply` will only be invoked if all the futures in `allOf` succeeded, and so the `join` call on each future will also return immediately - it will effectively just be an &quot;unwrap&quot; operation from `CompletableFuture&lt;T&gt;` to `T`.\r\n\r\nBut it is eager, ie it won&#39;t work on infinite streams, since `toArray` will never terminate. I&#39;m not sure what the behavior would be of the purely functional answer for infinite streams.","title":"How to transform CompletableFuture&lt;Stream&lt;T&gt;&gt; to Stream&lt;CompletableFuture&lt;T&gt;&gt;?","body":"<p><a href=\"https://stackoverflow.com/users/402428/michid\">michid</a>'s answer works and is the most purely functional, but it's a bit inefficient because it creates a &quot;linked list&quot; of nested concatenated singleton streams, something like this:</p>\n<pre><code>concat(of(A),\n       concat(of(B),\n              concat(of(C), ...)))\n</code></pre>\n<p>So, here's a more efficient (albeit not purely functional) version, which only requires the creation of a single intermediate array of all the futures:</p>\n<pre><code>static &lt;T&gt; CompletableFuture&lt;Stream&lt;T&gt;&gt; allOfStream(Stream&lt;CompletableFuture&lt;T&gt;&gt; stream) {\n  CompletableFuture&lt;T&gt;[] futuresArray = futures.&lt;CompletableFuture&lt;T&gt;&gt;toArray(CompletableFuture[]::new);\n  return CompletableFuture.allOf(futuresArray)\n    .thenApply(ignored -&gt; Arrays.stream(futuresArray).map(CompletableFuture::join));\n}\n</code></pre>\n<p>This is still non-blocking, since the lambda in <code>thenApply</code> will only be invoked if all the futures in <code>allOf</code> succeeded, and so the <code>join</code> call on each future will also return immediately - it will effectively just be an &quot;unwrap&quot; operation from <code>CompletableFuture&lt;T&gt;</code> to <code>T</code>.</p>\n<p>But it is eager, ie it won't work on infinite streams, since <code>toArray</code> will never terminate. I'm not sure what the behavior would be of the purely functional answer for infinite streams.</p>\n"}],"owner":{"account_id":5163818,"reputation":750,"user_id":4207648,"accept_rate":67,"display_name":"Valya"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":906,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":4,"score":4,"last_activity_date":1702050911,"creation_date":1516969454,"question_id":48461315,"body_markdown":"That&#39;s it. Really could not find something even close. I want to implement the following chain of tasks \r\n\r\n    List&lt;Item&gt; items = Collections.singletonList(new Item(&quot;John Smith&quot;, &quot;1997-2014&quot;));\r\n    \r\n    Stream&lt;CompletableFuture&lt;List&lt;ScrappingResult&gt;&gt;&gt; scrappingFutures =\r\n    \titems.stream().map(item -&gt;\r\n    \t\tCompletableFuture.supplyAsync(() -&gt; new ScrappingTask(item).call()));\r\n    \r\n    Stream&lt;CompletableFuture&lt;ScrappingResult&gt;&gt; scrappingFuturesUnwrapped =\r\n    \tscrappingFutures.map(resultsFuture -&gt; ???);\r\n    \r\n    Stream&lt;CompletableFuture&lt;TrimmingResult&gt;&gt; trimmingResults = scrappingFuturesUnwrapped.map(resultFuture -&gt;\r\n    \t// thenCompose?\r\n    \tresultFuture.thenCompose(result -&gt; {\r\n    \t\tPath clipsDir = Paths.get(&quot;./&quot;\r\n    \t\t\t+ result.getItem().getName()\r\n    \t\t\t+ &quot;/&quot; + result.getItem().getTimespan());\r\n    \r\n    \t\tAtomicInteger clipIdx = new AtomicInteger();\r\n    \r\n    \t\treturn result.getVideo().getClips().stream()\r\n    \t\t\t.map(clip -&gt; CompletableFuture.supplyAsync(() -&gt;\r\n    \t\t\t\tnew TrimmingTask(\r\n    \t\t\t\t\tffmpegPath,\r\n    \t\t\t\t\tresult.getVideo().getVideoUrl(),\r\n    \t\t\t\t\tclip,\r\n    \t\t\t\t\tclipsDir.resolve(&quot;clip_&quot; + clipIdx.incrementAndGet() + &quot;.mp3&quot;)).call())\r\n    \t\t\t);\r\n    \t});\r\n    );\r\n\r\nThe last line is not syntactically correct, but I hope conveys the idea. So, I want to do something like flatMap twice and get `\r\nStream&lt;CompletableFuture&lt;TrimmingResult&gt;&gt;` at the end.\r\n\r\nHow do I do that?\r\n\r\nThanks.","title":"How to transform CompletableFuture&lt;Stream&lt;T&gt;&gt; to Stream&lt;CompletableFuture&lt;T&gt;&gt;?","body":"<p>That's it. Really could not find something even close. I want to implement the following chain of tasks </p>\n\n<pre><code>List&lt;Item&gt; items = Collections.singletonList(new Item(\"John Smith\", \"1997-2014\"));\n\nStream&lt;CompletableFuture&lt;List&lt;ScrappingResult&gt;&gt;&gt; scrappingFutures =\n    items.stream().map(item -&gt;\n        CompletableFuture.supplyAsync(() -&gt; new ScrappingTask(item).call()));\n\nStream&lt;CompletableFuture&lt;ScrappingResult&gt;&gt; scrappingFuturesUnwrapped =\n    scrappingFutures.map(resultsFuture -&gt; ???);\n\nStream&lt;CompletableFuture&lt;TrimmingResult&gt;&gt; trimmingResults = scrappingFuturesUnwrapped.map(resultFuture -&gt;\n    // thenCompose?\n    resultFuture.thenCompose(result -&gt; {\n        Path clipsDir = Paths.get(\"./\"\n            + result.getItem().getName()\n            + \"/\" + result.getItem().getTimespan());\n\n        AtomicInteger clipIdx = new AtomicInteger();\n\n        return result.getVideo().getClips().stream()\n            .map(clip -&gt; CompletableFuture.supplyAsync(() -&gt;\n                new TrimmingTask(\n                    ffmpegPath,\n                    result.getVideo().getVideoUrl(),\n                    clip,\n                    clipsDir.resolve(\"clip_\" + clipIdx.incrementAndGet() + \".mp3\")).call())\n            );\n    });\n);\n</code></pre>\n\n<p>The last line is not syntactically correct, but I hope conveys the idea. So, I want to do something like flatMap twice and get <code>\nStream&lt;CompletableFuture&lt;TrimmingResult&gt;&gt;</code> at the end.</p>\n\n<p>How do I do that?</p>\n\n<p>Thanks.</p>\n"},{"tags":["java","spring-boot","kubernetes","kibana","slf4j"],"comments":[{"owner":{"account_id":74184,"reputation":122896,"user_id":213269,"accept_rate":98,"display_name":"Jonas"},"score":1,"creation_date":1702051108,"post_id":77627765,"comment_id":136853857,"body_markdown":"Step 1 is to never log sensitive info to the logs.","body":"Step 1 is to never log sensitive info to the logs."},{"owner":{"account_id":384206,"reputation":50376,"user_id":740553,"accept_rate":46,"display_name":"Mike &#39;Pomax&#39; Kamermans"},"score":1,"creation_date":1702051110,"post_id":77627765,"comment_id":136853859,"body_markdown":"Step 1: remove all code that logs actual credit cards numbers in a context where they might learn more about who those belong to? Change your log statements to only log, say, the last 4 digits, but ideally, _don&#39;t log credit card numbers_.","body":"Step 1: remove all code that logs actual credit cards numbers in a context where they might learn more about who those belong to? Change your log statements to only log, say, the last 4 digits, but ideally, <i>don&#39;t log credit card numbers</i>."},{"owner":{"account_id":30099364,"reputation":11,"user_id":23066889,"display_name":"Martian Aura"},"score":0,"creation_date":1702052405,"post_id":77627765,"comment_id":136854107,"body_markdown":"@Mike&#39;Pomax&#39;Kamermans\nNow If I want to debug, I go through those logs it will have only 4 digits, \nI need to find the way to get original data for debugging purposes. \nI wanted to check the sensistive information as developer and hide it for common people who query through kibana.","body":"@Mike&#39;Pomax&#39;Kamermans Now If I want to debug, I go through those logs it will have only 4 digits,  I need to find the way to get original data for debugging purposes.  I wanted to check the sensistive information as developer and hide it for common people who query through kibana."},{"owner":{"account_id":384206,"reputation":50376,"user_id":740553,"accept_rate":46,"display_name":"Mike &#39;Pomax&#39; Kamermans"},"score":1,"creation_date":1702064950,"post_id":77627765,"comment_id":136855901,"body_markdown":"If you can find actual credit card numbers tied to actual people, there&#39;s every chance you&#39;re already breaking local laws around handling PII. Find a different way to identify transactions that doesn&#39;t require PII such as randomly generated transaction numbers, and look for _those_ in your logs.","body":"If you can find actual credit card numbers tied to actual people, there&#39;s every chance you&#39;re already breaking local laws around handling PII. Find a different way to identify transactions that doesn&#39;t require PII such as randomly generated transaction numbers, and look for <i>those</i> in your logs."},{"owner":{"account_id":16341513,"reputation":209,"user_id":11802330,"display_name":"Eric"},"score":0,"creation_date":1702104949,"post_id":77627765,"comment_id":136858833,"body_markdown":"Why not control logs in Spring boot/java module? Eg. You can have a public function that logs all info you need. Then use isMaskEnabled to enable or disable logging. Probably enable during development and disable logging when deploying to production","body":"Why not control logs in Spring boot/java module? Eg. You can have a public function that logs all info you need. Then use isMaskEnabled to enable or disable logging. Probably enable during development and disable logging when deploying to production"}],"owner":{"account_id":30099364,"reputation":11,"user_id":23066889,"display_name":"Martian Aura"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1702050885,"creation_date":1702050770,"question_id":77627765,"body_markdown":"I have a spring boot app that logs sensitive information in the kubernetes and kibana. \r\nHow do I create a flag to toggle hide/unhide sensitive information ?\r\nThis sensistive information can be used only for debugging purposes.\r\n\r\nI am looking for something like :\r\n- isMaskEnabled = false :\r\n       set this flag only for debugging purposes so that developers can use it for debugging.\r\n- isMaskEnabled = true :\r\n       set this flag for masking sensitive information to all users who views the logs.\r\n\r\nI tried setting the appender slf4j - to have mask pattern but that will log the information as masked fields in log file. I can&#39;t see original data for debugging purposes.\r\n\r\n```\r\n&lt;appender name=&quot;STDOUT&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt;\r\n&lt;encoder class=&quot;ch.qos.logback.core.encoder.LayoutWrappingEncoder&quot;&gt;\r\n    &lt;layout class=&quot;com.bpcbt.micro.utils.PatternMaskingLayout&quot;&gt;\r\n        &lt;maskPattern&gt;creditCard=\\d+&lt;/maskPattern&gt; &lt;!-- SourcePan pattern --&gt;\r\n        &lt;pattern&gt;%d{dd/MM/yyyy HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n%ex&lt;/pattern&gt;--&gt;\r\n    &lt;/layout&gt;\r\n&lt;/encoder&gt;\r\n```\r\n\r\nIf I want to unmask and show original info it is not possible here.\r\nAny other way ?","title":"How to toggle hide and unhide sensitive information in kubernetes and kibana logs that comes from spring boot app?","body":"<p>I have a spring boot app that logs sensitive information in the kubernetes and kibana.\nHow do I create a flag to toggle hide/unhide sensitive information ?\nThis sensistive information can be used only for debugging purposes.</p>\n<p>I am looking for something like :</p>\n<ul>\n<li>isMaskEnabled = false :\nset this flag only for debugging purposes so that developers can use it for debugging.</li>\n<li>isMaskEnabled = true :\nset this flag for masking sensitive information to all users who views the logs.</li>\n</ul>\n<p>I tried setting the appender slf4j - to have mask pattern but that will log the information as masked fields in log file. I can't see original data for debugging purposes.</p>\n<pre><code>&lt;appender name=&quot;STDOUT&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt;\n&lt;encoder class=&quot;ch.qos.logback.core.encoder.LayoutWrappingEncoder&quot;&gt;\n    &lt;layout class=&quot;com.bpcbt.micro.utils.PatternMaskingLayout&quot;&gt;\n        &lt;maskPattern&gt;creditCard=\\d+&lt;/maskPattern&gt; &lt;!-- SourcePan pattern --&gt;\n        &lt;pattern&gt;%d{dd/MM/yyyy HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n%ex&lt;/pattern&gt;--&gt;\n    &lt;/layout&gt;\n&lt;/encoder&gt;\n</code></pre>\n<p>If I want to unmask and show original info it is not possible here.\nAny other way ?</p>\n"},{"tags":["java","multithreading","concurrency"],"comments":[{"owner":{"account_id":2246079,"reputation":7967,"user_id":1979380,"accept_rate":89,"display_name":"jarvo69"},"score":0,"creation_date":1701507667,"post_id":77589653,"comment_id":136786425,"body_markdown":"use Integer instead of int \nint = default value it holds automatically as soon as it is declared.\n\nInteger = null by default","body":"use Integer instead of int  int = default value it holds automatically as soon as it is declared.  Integer = null by default"},{"owner":{"account_id":24502122,"reputation":45,"user_id":18417606,"display_name":"GGGarikkk"},"score":0,"creation_date":1701508391,"post_id":77589653,"comment_id":136786483,"body_markdown":"@jarvo69 Thank you for the feedback. Could you elaborate on how this answers the question asked?","body":"@jarvo69 Thank you for the feedback. Could you elaborate on how this answers the question asked?"},{"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"score":3,"creation_date":1701510507,"post_id":77589653,"comment_id":136786652,"body_markdown":"The problem with demonstrating such behaviour is that there is nothing you can do to enforce this behaviour (i.e. the field `SharedResource.value` is written after `SharedResource sharedResource` is written). This might happen only on February 29 during the time when 20_000 users simulationously access your system. Without using `final` there is simply no guarantee that your code will not fail at some time - and you wont find out that &quot;some time&quot; is the worst time: on a weekend during the holidays, during a sales meeting, when 1000s of customers want to buy from your shop.","body":"The problem with demonstrating such behaviour is that there is nothing you can do to enforce this behaviour (i.e. the field <code>SharedResource.value</code> is written after <code>SharedResource sharedResource</code> is written). This might happen only on February 29 during the time when 20_000 users simulationously access your system. Without using <code>final</code> there is simply no guarantee that your code will not fail at some time - and you wont find out that &quot;some time&quot; is the worst time: on a weekend during the holidays, during a sales meeting, when 1000s of customers want to buy from your shop."},{"owner":{"account_id":24502122,"reputation":45,"user_id":18417606,"display_name":"GGGarikkk"},"score":0,"creation_date":1701521814,"post_id":77589653,"comment_id":136787594,"body_markdown":"@ThomasKl&#228;ger Thank you for the answer. If `SharedResource sharedResource` is written after the `SharedResource.value`, then how can other thread see uninitialized value (`sharedResource.value`). As I understand, in this case no threads can read a value from `SharedResource sharedResource`, hence the problem with not using final is invalid","body":"@ThomasKl&#228;ger Thank you for the answer. If <code>SharedResource sharedResource</code> is written after the <code>SharedResource.value</code>, then how can other thread see uninitialized value (<code>sharedResource.value</code>). As I understand, in this case no threads can read a value from <code>SharedResource sharedResource</code>, hence the problem with not using final is invalid"},{"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"score":1,"creation_date":1701525843,"post_id":77589653,"comment_id":136787926,"body_markdown":"If creating the `SharedResource` is on a hot code path the JVM could (at runtime) inline the constructor into the caller and proceed as follows: create a new `SharedResource`, store the reference into the `sharedResource` field, call the super constructor (from `Object`), then initialize the `value`. For all code running on thread 1 everythink looks correct - and without `final` or synchronization that is the only guarantee that the JVM makes: that the code running on the same thread after the constructor has finished doesn&#39;t notice.","body":"If creating the <code>SharedResource</code> is on a hot code path the JVM could (at runtime) inline the constructor into the caller and proceed as follows: create a new <code>SharedResource</code>, store the reference into the <code>sharedResource</code> field, call the super constructor (from <code>Object</code>), then initialize the <code>value</code>. For all code running on thread 1 everythink looks correct - and without <code>final</code> or synchronization that is the only guarantee that the JVM makes: that the code running on the same thread after the constructor has finished doesn&#39;t notice."},{"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"score":0,"creation_date":1701526150,"post_id":77589653,"comment_id":136787968,"body_markdown":"There is this other question (https://stackoverflow.com/questions/77588556/why-does-attaching-byteman-rule-to-my-method-accidentally-fix-an-exception) where someone tries to find a NullPointerException occuring sometimes in production after upgrading from Java 7 to Java 8 - and this is exactly the kind of problem you can expect if `value` is not final but `SharedResource` is shared between threads. You just don&#39;t want to be in that persons place just because your simple test was unable to show this possible problem.","body":"There is this other question (<a href=\"https://stackoverflow.com/questions/77588556/why-does-attaching-byteman-rule-to-my-method-accidentally-fix-an-exception\" title=\"why does attaching byteman rule to my method accidentally fix an exception\">stackoverflow.com/questions/77588556/&hellip;</a>) where someone tries to find a NullPointerException occuring sometimes in production after upgrading from Java 7 to Java 8 - and this is exactly the kind of problem you can expect if <code>value</code> is not final but <code>SharedResource</code> is shared between threads. You just don&#39;t want to be in that persons place just because your simple test was unable to show this possible problem."},{"owner":{"account_id":24502122,"reputation":45,"user_id":18417606,"display_name":"GGGarikkk"},"score":0,"creation_date":1701541339,"post_id":77589653,"comment_id":136789629,"body_markdown":"@ThomasKl&#228;ger One last question - could you please provide any reference material for the described behavior (when the reference is stored in `sharedResource` prior to the finish of constructor call)?","body":"@ThomasKl&#228;ger One last question - could you please provide any reference material for the described behavior (when the reference is stored in <code>sharedResource</code> prior to the finish of constructor call)?"},{"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"score":1,"creation_date":1701607770,"post_id":77589653,"comment_id":136794463,"body_markdown":"The definite reference is in the Java Language Specification [Chapter 17.4 Memory Model](https://docs.oracle.com/javase/specs/jls/se17/html/jls-17.html#jls-17.4) and [Chapter 17.5 `final` Field Semantics](https://docs.oracle.com/javase/specs/jls/se17/html/jls-17.html#jls-17.5). That the reference is stored in `sharedResource` prior to the finish of the constructor call is a possible consequence of &quot;method inlining&quot; (i.e. the code for the constructor is inlined into the caller) followed by &quot;statement reordering&quot; - both common optimizations done by the JVM.","body":"The definite reference is in the Java Language Specification <a href=\"https://docs.oracle.com/javase/specs/jls/se17/html/jls-17.html#jls-17.4\" rel=\"nofollow noreferrer\">Chapter 17.4 Memory Model</a> and <a href=\"https://docs.oracle.com/javase/specs/jls/se17/html/jls-17.html#jls-17.5\" rel=\"nofollow noreferrer\">Chapter 17.5 <code>final</code> Field Semantics</a>. That the reference is stored in <code>sharedResource</code> prior to the finish of the constructor call is a possible consequence of &quot;method inlining&quot; (i.e. the code for the constructor is inlined into the caller) followed by &quot;statement reordering&quot; - both common optimizations done by the JVM."},{"owner":{"account_id":24502122,"reputation":45,"user_id":18417606,"display_name":"GGGarikkk"},"score":0,"creation_date":1701614005,"post_id":77589653,"comment_id":136795075,"body_markdown":"@ThomasKl&#228;ger Thank you very much. I already found the JMM reference to read more about it","body":"@ThomasKl&#228;ger Thank you very much. I already found the JMM reference to read more about it"}],"answers":[{"tags":[],"owner":{"account_id":3211603,"reputation":289287,"user_id":2711488,"display_name":"Holger"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1702050837,"creation_date":1702050837,"answer_id":77627778,"question_id":77589653,"body_markdown":"The cited text is misleading at best.\r\n\r\nThe line `final var accounts = new HashMap&lt;String, Double&gt;();` can’t be a field declaration as the `var` keyword is only allowed for local variables. Discussions about field initialization are pointless for local variables.\r\n\r\nFurther, the phrase “after the constructor has finished” is meaningless when the constructed object is improperly published to other threads. Concurrent access implies the absence of an order. But note that this is specifically about a scenario of improperly published objects. For correctly published objects, you don’t need `final` fields.\r\n\r\nIt’s also important that the problem of potentially seeing inconsistent values for improperly published objects is not just that a thread might see `null` for a reference field. It may also see a non-`null` reference but an inconsistent state of the `HashMap` instance. And as `HashMap` is a mutable object, note that the guaranteed consistent state is the state of the `HashMap` when finishing the constructor, as long as no subsequent modifications happen; if there are any modifications after the constructor, all bets are off. Making a field `final` can not replace proper synchronization for mutable data.\r\n\r\nWhen you have a data race like in your example code\r\n\r\n```java\r\nif (sharedResource != null) {\r\n    int result = sharedResource.getValue();\r\n    System.out.println(&quot;Thread 2: Value is &quot; + result);\r\n} else {\r\n    System.out.println(&quot;Thread 2: Shared resource is not initialized yet&quot;);\r\n}\r\n```\r\n\r\nyou may not only have the potential result of reading `0` in `getValue()`, it’s even possible that the first read of `sharedResource` in `sharedResource != null` sees a non-`null` reference but the other read in `sharedResource.getValue()` sees `null` and produces a `NullPointerException`.\r\n\r\nAs said earlier concurrent access (without correct synchronization) implies the absence of an order. Therefore, you can not reason about the expected outcome of the two reads of the field `sharedResource` by assuming that the reads happen in a particular order.\r\n\r\nBut, as said in the comments, a possible outcome does not imply that you can force this outcome in an example program. Programs running a single time are especially unlikely to produce rare conditions.\r\n","title":"final keyword guarantee clarification regarding concurrency","body":"<p>The cited text is misleading at best.</p>\n<p>The line <code>final var accounts = new HashMap&lt;String, Double&gt;();</code> can’t be a field declaration as the <code>var</code> keyword is only allowed for local variables. Discussions about field initialization are pointless for local variables.</p>\n<p>Further, the phrase “after the constructor has finished” is meaningless when the constructed object is improperly published to other threads. Concurrent access implies the absence of an order. But note that this is specifically about a scenario of improperly published objects. For correctly published objects, you don’t need <code>final</code> fields.</p>\n<p>It’s also important that the problem of potentially seeing inconsistent values for improperly published objects is not just that a thread might see <code>null</code> for a reference field. It may also see a non-<code>null</code> reference but an inconsistent state of the <code>HashMap</code> instance. And as <code>HashMap</code> is a mutable object, note that the guaranteed consistent state is the state of the <code>HashMap</code> when finishing the constructor, as long as no subsequent modifications happen; if there are any modifications after the constructor, all bets are off. Making a field <code>final</code> can not replace proper synchronization for mutable data.</p>\n<p>When you have a data race like in your example code</p>\n<pre class=\"lang-java prettyprint-override\"><code>if (sharedResource != null) {\n    int result = sharedResource.getValue();\n    System.out.println(&quot;Thread 2: Value is &quot; + result);\n} else {\n    System.out.println(&quot;Thread 2: Shared resource is not initialized yet&quot;);\n}\n</code></pre>\n<p>you may not only have the potential result of reading <code>0</code> in <code>getValue()</code>, it’s even possible that the first read of <code>sharedResource</code> in <code>sharedResource != null</code> sees a non-<code>null</code> reference but the other read in <code>sharedResource.getValue()</code> sees <code>null</code> and produces a <code>NullPointerException</code>.</p>\n<p>As said earlier concurrent access (without correct synchronization) implies the absence of an order. Therefore, you can not reason about the expected outcome of the two reads of the field <code>sharedResource</code> by assuming that the reads happen in a particular order.</p>\n<p>But, as said in the comments, a possible outcome does not imply that you can force this outcome in an example program. Programs running a single time are especially unlikely to produce rare conditions.</p>\n"}],"owner":{"account_id":24502122,"reputation":45,"user_id":18417606,"display_name":"GGGarikkk"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":65,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77627778,"answer_count":1,"score":0,"last_activity_date":1702050837,"creation_date":1701506027,"question_id":77589653,"body_markdown":"I am currently going through Core Java, Vol I book, Chapter 12 - Concurrency.\r\n\r\nThere is a section in the book relating final keyword, which states:\r\n\r\n&gt; There is one other situation in which it is safe to access a shared field — when\r\nit is declared final. &lt;br&gt;Consider \r\n`final var accounts = new HashMap&lt;String, Double&gt;();`&lt;br&gt;\r\nOther threads get to see the accounts variable after the constructor has\r\nfinished.\r\nWithout using final, there would be no guarantee that other threads would\r\nsee the updated value of accounts—they might all see null, not the\r\nconstructed HashMap.&lt;br&gt;(Horstmann, 2018)\r\n\r\nI have tried to create an example demonstrating, that non-final field may be read by the other thread before it is initialized.\r\n\r\n```java\r\nclass SharedResource {\r\n    private int value;\r\n\r\n    public SharedResource(int value) {\r\n        try {\r\n            Thread.sleep(100);\r\n        } catch (InterruptedException e) {\r\n            e.printStackTrace();\r\n        }\r\n        this.value = value;\r\n    }\r\n\r\n    public int getValue() {\r\n        return value;\r\n    }\r\n}\r\n\r\nclass NonFinalExample {\r\n\r\n    private static SharedResource sharedResource;\r\n\r\n    public static void main(String[] args) {\r\n        Thread thread1 = new Thread(() -&gt; sharedResource = new SharedResource(42));\r\n        thread1.start();\r\n\r\n        Thread thread2 = new Thread(() -&gt; {\r\n            if (sharedResource != null) {\r\n                int result = sharedResource.getValue();\r\n                System.out.println(&quot;Thread 2: Value is &quot; + result);\r\n            } else {\r\n                System.out.println(&quot;Thread 2: Shared resource is not initialized yet&quot;);\r\n            }\r\n        });\r\n        thread2.start();\r\n    }\r\n}\r\n```\r\n\r\nThe problem with it is that I can&#39;t understand, how in the example above `thread2` can see `sharedResource` as not null while having uninitialized `sharedResource.value` at the same time.&lt;br&gt;\r\nIsn&#39;t `SharedResource` object is assigned to `sharedResource` variable by `thread1` only after the initialization is complete and the object is created?\r\n\r\nWould appreciate any help relating the subject","title":"final keyword guarantee clarification regarding concurrency","body":"<p>I am currently going through Core Java, Vol I book, Chapter 12 - Concurrency.</p>\n<p>There is a section in the book relating final keyword, which states:</p>\n<blockquote>\n<p>There is one other situation in which it is safe to access a shared field — when\nit is declared final. <br>Consider\n<code>final var accounts = new HashMap&lt;String, Double&gt;();</code><br>\nOther threads get to see the accounts variable after the constructor has\nfinished.\nWithout using final, there would be no guarantee that other threads would\nsee the updated value of accounts—they might all see null, not the\nconstructed HashMap.<br>(Horstmann, 2018)</p>\n</blockquote>\n<p>I have tried to create an example demonstrating, that non-final field may be read by the other thread before it is initialized.</p>\n<pre class=\"lang-java prettyprint-override\"><code>class SharedResource {\n    private int value;\n\n    public SharedResource(int value) {\n        try {\n            Thread.sleep(100);\n        } catch (InterruptedException e) {\n            e.printStackTrace();\n        }\n        this.value = value;\n    }\n\n    public int getValue() {\n        return value;\n    }\n}\n\nclass NonFinalExample {\n\n    private static SharedResource sharedResource;\n\n    public static void main(String[] args) {\n        Thread thread1 = new Thread(() -&gt; sharedResource = new SharedResource(42));\n        thread1.start();\n\n        Thread thread2 = new Thread(() -&gt; {\n            if (sharedResource != null) {\n                int result = sharedResource.getValue();\n                System.out.println(&quot;Thread 2: Value is &quot; + result);\n            } else {\n                System.out.println(&quot;Thread 2: Shared resource is not initialized yet&quot;);\n            }\n        });\n        thread2.start();\n    }\n}\n</code></pre>\n<p>The problem with it is that I can't understand, how in the example above <code>thread2</code> can see <code>sharedResource</code> as not null while having uninitialized <code>sharedResource.value</code> at the same time.<br>\nIsn't <code>SharedResource</code> object is assigned to <code>sharedResource</code> variable by <code>thread1</code> only after the initialization is complete and the object is created?</p>\n<p>Would appreciate any help relating the subject</p>\n"},{"tags":["java","windows","jna","event-log"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":3,"creation_date":1702049540,"post_id":77627505,"comment_id":136853526,"body_markdown":"Windows often uses some species of UTF-16. Did you try that? Also, why JNA - why not parse Powershell `Get-EventLog`?","body":"Windows often uses some species of UTF-16. Did you try that? Also, why JNA - why not parse Powershell <code>Get-EventLog</code>?"},{"owner":{"account_id":2735665,"reputation":24456,"user_id":2358409,"display_name":"uminder"},"score":0,"creation_date":1702112098,"post_id":77627505,"comment_id":136859315,"body_markdown":"Thanks `g00se`, using Powershell `Get-EventLog` is an interesting approach. Unless I don&#39;t find another solution, I&#39;ll try to invoke it from my Java program and parse the printed events programmatically.","body":"Thanks <code>g00se</code>, using Powershell <code>Get-EventLog</code> is an interesting approach. Unless I don&#39;t find another solution, I&#39;ll try to invoke it from my Java program and parse the printed events programmatically."},{"owner":{"account_id":372682,"reputation":22426,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1702121401,"post_id":77627505,"comment_id":136859992,"body_markdown":"Provide examples of event log and expected/actual results.","body":"Provide examples of event log and expected/actual results."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1702128101,"post_id":77627505,"comment_id":136860526,"body_markdown":"What happened with `getStrings()` btw?","body":"What happened with <code>getStrings()</code> btw?"},{"owner":{"account_id":2735665,"reputation":24456,"user_id":2358409,"display_name":"uminder"},"score":0,"creation_date":1702136544,"post_id":77627505,"comment_id":136861274,"body_markdown":"@g00se: In some cases, `getStrings()` does not provide any data, in some other cases the data is incomplete and doesn&#39;t match the one that can be seen in the `Windows Event Viewer`.  I see however that this is the case when the `Event ID` is also present (`!= 0`). Therefore, I believe that the `Event Viewer` uses this `Event ID` to do some lookup to retrieve the event description. I now voted to undelete the answer from `aled` as it seems to be the correct answer to my question. As soon as it becomes editable again, I will accept it.","body":"@g00se: In some cases, <code>getStrings()</code> does not provide any data, in some other cases the data is incomplete and doesn&#39;t match the one that can be seen in the <code>Windows Event Viewer</code>.  I see however that this is the case when the <code>Event ID</code> is also present (<code>!= 0</code>). Therefore, I believe that the <code>Event Viewer</code> uses this <code>Event ID</code> to do some lookup to retrieve the event description. I now voted to undelete the answer from <code>aled</code> as it seems to be the correct answer to my question. As soon as it becomes editable again, I will accept it."},{"owner":{"account_id":1187908,"reputation":8617,"user_id":1161484,"accept_rate":93,"display_name":"Daniel Widdis"},"score":0,"creation_date":1702184146,"post_id":77627505,"comment_id":136864796,"body_markdown":"Does this answer your question? [JNA parse description strings from windows event log record](https://stackoverflow.com/questions/66316805/jna-parse-description-strings-from-windows-event-log-record)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/66316805/jna-parse-description-strings-from-windows-event-log-record\">JNA parse description strings from windows event log record</a>"},{"owner":{"account_id":2735665,"reputation":24456,"user_id":2358409,"display_name":"uminder"},"score":0,"creation_date":1702189046,"post_id":77627505,"comment_id":136864984,"body_markdown":"`@Daniel Widdis`:  The answer you are referencing requires elevated or shared access to the .evtx log files. For my case, this is unfortunately not an option to go with.","body":"<code>@Daniel Widdis</code>:  The answer you are referencing requires elevated or shared access to the .evtx log files. For my case, this is unfortunately not an option to go with."}],"owner":{"account_id":2735665,"reputation":24456,"user_id":2358409,"display_name":"uminder"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":1,"is_answered":false,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1702050710,"creation_date":1702048286,"question_id":77627505,"body_markdown":"The following code reads and prints the events from the `Windows Event Log` of the local computer. \r\n\r\n    import java.io.UnsupportedEncodingException;\r\n    import java.util.Date;\r\n    \r\n    import com.sun.jna.platform.win32.Advapi32Util.EventLogIterator;\r\n    import com.sun.jna.platform.win32.Advapi32Util.EventLogRecord;\r\n    import com.sun.jna.platform.win32.WinNT;\r\n    \r\n    public class EventLog {\r\n    \r\n        public static void main(String[] args) throws UnsupportedEncodingException {\r\n            EventLogIterator iter = new EventLogIterator(null, &quot;Application&quot;, WinNT.EVENTLOG_FORWARDS_READ);\r\n            while (iter.hasNext()) {\r\n                EventLogRecord record = iter.next();\r\n                if (record.getData() == null) {\r\n                    continue;\r\n                }\r\n                Date eventTime = new Date(record.getRecord().TimeGenerated.longValue() * 1000L);\r\n                String data = new String(record.getData(), &quot;windows-1252&quot;);\r\n                System.out.println(record.getRecordNumber() + &quot; Event Time: &quot; + eventTime + //\r\n                                   &quot;: Event ID: &quot; + record.getInstanceId() + //\r\n                                   &quot;, Event Type: &quot; + record.getType() + //\r\n                                   &quot;, Event Data: &quot; + data + //\r\n                                   &quot;, Event Source: &quot; + record.getSource());\r\n            }\r\n        }\r\n    }\r\n\r\nThe problem is that the event `data` is present as `byte` array (`byte[]`) but I need proper formatted text. I tried to transform this `data` into a `String` by using different encodings but none of them produced the expected result.\r\n\r\n    String data = new String(record.getData(), &quot;windows-1252&quot;);\r\n\r\nHow can the event `data` be transformed into human readable text?","title":"Reading and formatting events from Windows Event Log","body":"<p>The following code reads and prints the events from the <code>Windows Event Log</code> of the local computer.</p>\n<pre><code>import java.io.UnsupportedEncodingException;\nimport java.util.Date;\n\nimport com.sun.jna.platform.win32.Advapi32Util.EventLogIterator;\nimport com.sun.jna.platform.win32.Advapi32Util.EventLogRecord;\nimport com.sun.jna.platform.win32.WinNT;\n\npublic class EventLog {\n\n    public static void main(String[] args) throws UnsupportedEncodingException {\n        EventLogIterator iter = new EventLogIterator(null, &quot;Application&quot;, WinNT.EVENTLOG_FORWARDS_READ);\n        while (iter.hasNext()) {\n            EventLogRecord record = iter.next();\n            if (record.getData() == null) {\n                continue;\n            }\n            Date eventTime = new Date(record.getRecord().TimeGenerated.longValue() * 1000L);\n            String data = new String(record.getData(), &quot;windows-1252&quot;);\n            System.out.println(record.getRecordNumber() + &quot; Event Time: &quot; + eventTime + //\n                               &quot;: Event ID: &quot; + record.getInstanceId() + //\n                               &quot;, Event Type: &quot; + record.getType() + //\n                               &quot;, Event Data: &quot; + data + //\n                               &quot;, Event Source: &quot; + record.getSource());\n        }\n    }\n}\n</code></pre>\n<p>The problem is that the event <code>data</code> is present as <code>byte</code> array (<code>byte[]</code>) but I need proper formatted text. I tried to transform this <code>data</code> into a <code>String</code> by using different encodings but none of them produced the expected result.</p>\n<pre><code>String data = new String(record.getData(), &quot;windows-1252&quot;);\n</code></pre>\n<p>How can the event <code>data</code> be transformed into human readable text?</p>\n"},{"tags":["java","swing"],"comments":[{"owner":{"account_id":5701253,"reputation":4320,"user_id":4506140,"accept_rate":73,"display_name":"Jude Niroshan"},"score":0,"creation_date":1614628987,"post_id":66428529,"comment_id":117438076,"body_markdown":"Please show us the exception you get when you run the program. Also the user input values. It would be easier for anyone to help you out","body":"Please show us the exception you get when you run the program. Also the user input values. It would be easier for anyone to help you out"},{"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"score":0,"creation_date":1614638847,"post_id":66428529,"comment_id":117441574,"body_markdown":"What error do you get? If I try to compile your code, the compiler produces an error message &quot;error: cannot find symbol&quot; because you did not `import java.awt.BorderLayout;`. After fixing that problem your code compiles and seems to run as intended.","body":"What error do you get? If I try to compile your code, the compiler produces an error message &quot;error: cannot find symbol&quot; because you did not <code>import java.awt.BorderLayout;</code>. After fixing that problem your code compiles and seems to run as intended."},{"owner":{"account_id":183279,"reputation":168313,"user_id":418556,"accept_rate":98,"display_name":"Andrew Thompson"},"score":1,"creation_date":1614673057,"post_id":66428529,"comment_id":117449593,"body_markdown":"*&quot;after I press the button it doesn&#39;t execute anything.&quot;* It does, here. It changes the [rendering on the GUI](https://i.stack.imgur.com/swvNZ.png) (though I think the code mixes up radius and diameter). Did you expect it to calculate whether or not the circles intersect and update the label at the top?  What code have you written to that end?","body":"<i>&quot;after I press the button it doesn&#39;t execute anything.&quot;</i> It does, here. It changes the <a href=\"https://i.stack.imgur.com/swvNZ.png\" rel=\"nofollow noreferrer\">rendering on the GUI</a> (though I think the code mixes up radius and diameter). Did you expect it to calculate whether or not the circles intersect and update the label at the top?  What code have you written to that end?"},{"owner":{"account_id":20680885,"reputation":11,"user_id":15184513,"display_name":"Syed Imran"},"score":0,"creation_date":1614770249,"post_id":66428529,"comment_id":117484555,"body_markdown":"this is the error Exception in thread &quot;AWT-EventQueue-0&quot; java.lang.NumberFormatException: empty String","body":"this is the error Exception in thread &quot;AWT-EventQueue-0&quot; java.lang.NumberFormatException: empty String"},{"owner":{"account_id":4196075,"reputation":17303,"user_id":3437460,"accept_rate":49,"display_name":"user3437460"},"score":0,"creation_date":1614784747,"post_id":66428529,"comment_id":117491590,"body_markdown":"Your JFrame class shouldn&#39;t be called Circle. Instead, you can have a real Circle class with properties of Circle only. Add another customised JPanel class. Add Circle into JPanel and JPanel into JFrame. Since they are contained within one another, you already have no problem accessing the variables.","body":"Your JFrame class shouldn&#39;t be called Circle. Instead, you can have a real Circle class with properties of Circle only. Add another customised JPanel class. Add Circle into JPanel and JPanel into JFrame. Since they are contained within one another, you already have no problem accessing the variables."}],"answers":[{"tags":[],"owner":{"account_id":4962253,"reputation":18492,"user_id":3992939,"accept_rate":73,"display_name":"c0der"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1614673336,"creation_date":1614673336,"answer_id":66435719,"question_id":66428529,"body_markdown":"Avoid using static fields. Instead use setters in `Circles`: \r\n\r\n\t\r\n\timport java.awt.*;\r\n\timport java.awt.event.*;\r\n\timport javax.swing.*;\r\n\t\r\n\tpublic class Circle extends JFrame implements ActionListener{\r\n\t\r\n\t\tprivate final JPanel p1,p2,p3,buttonsize;\r\n\t\tprivate final JLabel title,lb1,lb2,lb3,lb4,lb5,lb6,lb7,lb8,lb9,lb10;\r\n\t\tprivate final JTextField circle1x,circle1y,circle1r,circle2x,circle2y,circle2r;\r\n\t\tprivate final JButton drawButton;\r\n\t\tprivate final Circles circles;\r\n\t\r\n\t\tpublic static void main(String[]args)\r\n\t\t{\r\n\t\t\tCircle c = new Circle();\r\n\t\t\tc.setSize(400,400);\r\n\t\t\tc.setTitle(&quot;Project&quot;);\r\n\t\t\tc.setVisible(true);\r\n\t\t\tc.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n\t\t}\r\n\t\r\n\t\tpublic Circle() {\r\n\t\r\n\t\t\ttitle = new JLabel(&quot;Two circles intersect? No&quot;);\r\n\t\t\tp1 = new JPanel();\r\n\t\t\tp1.add(title);\r\n\t\r\n\t\t\tp2 = new JPanel();\r\n\t\r\n\t\t\tlb1 = new JLabel(&quot;Enter circle 1&quot;);\r\n\t\t\tlb2 = new JLabel(&quot;Enter circle 2&quot;);\r\n\t\t\tlb3 = new JLabel(&quot;info:&quot;);\r\n\t\t\tlb4 = new JLabel(&quot;info:&quot;);\r\n\t\t\tlb5 = new JLabel(&quot;Center x:&quot;);\r\n\t\t\tlb6 = new JLabel(&quot;Center y:&quot;);\r\n\t\t\tlb7 = new JLabel(&quot;Radius:&quot;);\r\n\t\t\tlb8 = new JLabel(&quot;Center x:&quot;);\r\n\t\t\tlb9 = new JLabel(&quot;Center y:&quot;);\r\n\t\t\tlb10 = new JLabel(&quot;Radius:&quot;);\r\n\t\r\n\t\t\tcircle1x = new JTextField(1);\r\n\t\t\tcircle1y = new JTextField(1);\r\n\t\t\tcircle1r = new JTextField(1);\r\n\t\t\tcircle2x = new JTextField(1);\r\n\t\t\tcircle2y = new JTextField(1);\r\n\t\t\tcircle2r = new JTextField(1);\r\n\t\t\tdrawButton = new JButton(&quot;Redraw Circles&quot;);\r\n\t\t\tbuttonsize = new JPanel();\r\n\t\t\tbuttonsize.setSize(50,50);\r\n\t\t\tbuttonsize.add(drawButton);\r\n\t\t\tp3 = new JPanel();\r\n\t\t\tp3.setLayout(new GridLayout(5,5));\r\n\t\r\n\t\t\tp3.add(lb1);p3.add(lb3);p3.add(new JLabel(&quot;&quot;));p3.add(lb2);p3.add(lb4);\r\n\t\t\tp3.add(lb5);p3.add(circle1x);p3.add(new JLabel(&quot;&quot;));p3.add(lb8);p3.add(circle2x);\r\n\t\t\tp3.add(lb6);p3.add(circle1y);p3.add(new JLabel(&quot;&quot;));p3.add(lb9);p3.add(circle2y);\r\n\t\t\tp3.add(lb7);p3.add(circle1r);p3.add(new JLabel(&quot;&quot;));p3.add(lb10);p3.add(circle2r);\r\n\t\t\tp3.add(new JLabel(&quot;&quot;));p3.add(new JLabel(&quot;&quot;));p3.add(drawButton);p3.add(new JLabel(&quot;&quot;));p3.add(new JLabel(&quot;&quot;));\r\n\t\r\n\t\t\tsetLayout(new BorderLayout());  //BorderLayout is the default for JFrame\r\n\t\t\t//call the constructor of the panel\r\n\t\t\tadd(p1,BorderLayout.NORTH);\r\n\t\t\tcircles = new Circles();\r\n\t\t\tadd(circles,BorderLayout.CENTER);\r\n\t\t\tadd(p3,BorderLayout.SOUTH);\r\n\t\r\n\t\t\tdrawButton.addActionListener(this);\r\n\t\t}\r\n\t\r\n\t\t@Override\r\n\t\tpublic void actionPerformed(ActionEvent e)   {\r\n\t\r\n\t\t\tif(e.getSource()!= drawButton) \treturn;\r\n\t\t\t\r\n\t\t\tdouble c1x = Double.parseDouble(circle1x.getText());\r\n\t\t\tdouble c1y = Double.parseDouble(circle1y.getText());\r\n\t\t\tdouble c1r = Double.parseDouble(circle1r.getText());\r\n\t\t\tdouble c2x = Double.parseDouble(circle2x.getText());\r\n\t\t\tdouble c2y = Double.parseDouble(circle2y.getText());\r\n\t\t\tdouble c2r = Double.parseDouble(circle2r.getText());\r\n\t\r\n\t\t\tcircles.setX1((int) c1x);\r\n\t\t\tcircles.setX2((int) c2x);\r\n\t\t\tcircles.setY1((int) c1y);\r\n\t\t\tcircles.setY2((int) c2y);\r\n\t\t\tcircles.setR1((int) c1r);\r\n\t\t\tcircles.setR2((int) c2r);\r\n\t\t\trepaint();\r\n\t\t}\r\n\t}\r\n\t\r\n\tclass Circles extends JPanel{\r\n\t\r\n\t\tprivate int x1=30,x2=200,y1=10,y2=10,r1=10,r2=10;\r\n\t\r\n\t\t@Override\r\n\t\tpublic void paintComponent(Graphics g)\t{\r\n\t\t\tsuper.paintComponent(g);\r\n\t\t\tg.setColor(Color.BLACK);\r\n\t\t\tg.drawOval(x1, y1, r1, r1);\r\n\t\t\tg.drawOval(x2, y2, r2, r2);\r\n\t\t}\r\n\t\r\n\t\tpublic void setX1(int x1) {\r\n\t\t\tthis.x1 = x1;\r\n\t\t}\r\n\t\r\n\t\tpublic void setX2(int x2) {\r\n\t\t\tthis.x2 = x2;\r\n\t\t}\r\n\t\r\n\t\tpublic void setY1(int y1) {\r\n\t\t\tthis.y1 = y1;\r\n\t\t}\r\n\t\r\n\t\tpublic void setY2(int y2) {\r\n\t\t\tthis.y2 = y2;\r\n\t\t}\r\n\t\r\n\t\tpublic void setR1(int r1) {\r\n\t\t\tthis.r1 = r1;\r\n\t\t}\r\n\t\r\n\t\tpublic void setR2(int r2) {\r\n\t\t\tthis.r2 = r2;\r\n\t\t}\r\n\t}","title":"Passing variable to paintComponent method","body":"<p>Avoid using static fields. Instead use setters in <code>Circles</code>:</p>\n<pre><code>import java.awt.*;\nimport java.awt.event.*;\nimport javax.swing.*;\n\npublic class Circle extends JFrame implements ActionListener{\n\n    private final JPanel p1,p2,p3,buttonsize;\n    private final JLabel title,lb1,lb2,lb3,lb4,lb5,lb6,lb7,lb8,lb9,lb10;\n    private final JTextField circle1x,circle1y,circle1r,circle2x,circle2y,circle2r;\n    private final JButton drawButton;\n    private final Circles circles;\n\n    public static void main(String[]args)\n    {\n        Circle c = new Circle();\n        c.setSize(400,400);\n        c.setTitle(&quot;Project&quot;);\n        c.setVisible(true);\n        c.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n    }\n\n    public Circle() {\n\n        title = new JLabel(&quot;Two circles intersect? No&quot;);\n        p1 = new JPanel();\n        p1.add(title);\n\n        p2 = new JPanel();\n\n        lb1 = new JLabel(&quot;Enter circle 1&quot;);\n        lb2 = new JLabel(&quot;Enter circle 2&quot;);\n        lb3 = new JLabel(&quot;info:&quot;);\n        lb4 = new JLabel(&quot;info:&quot;);\n        lb5 = new JLabel(&quot;Center x:&quot;);\n        lb6 = new JLabel(&quot;Center y:&quot;);\n        lb7 = new JLabel(&quot;Radius:&quot;);\n        lb8 = new JLabel(&quot;Center x:&quot;);\n        lb9 = new JLabel(&quot;Center y:&quot;);\n        lb10 = new JLabel(&quot;Radius:&quot;);\n\n        circle1x = new JTextField(1);\n        circle1y = new JTextField(1);\n        circle1r = new JTextField(1);\n        circle2x = new JTextField(1);\n        circle2y = new JTextField(1);\n        circle2r = new JTextField(1);\n        drawButton = new JButton(&quot;Redraw Circles&quot;);\n        buttonsize = new JPanel();\n        buttonsize.setSize(50,50);\n        buttonsize.add(drawButton);\n        p3 = new JPanel();\n        p3.setLayout(new GridLayout(5,5));\n\n        p3.add(lb1);p3.add(lb3);p3.add(new JLabel(&quot;&quot;));p3.add(lb2);p3.add(lb4);\n        p3.add(lb5);p3.add(circle1x);p3.add(new JLabel(&quot;&quot;));p3.add(lb8);p3.add(circle2x);\n        p3.add(lb6);p3.add(circle1y);p3.add(new JLabel(&quot;&quot;));p3.add(lb9);p3.add(circle2y);\n        p3.add(lb7);p3.add(circle1r);p3.add(new JLabel(&quot;&quot;));p3.add(lb10);p3.add(circle2r);\n        p3.add(new JLabel(&quot;&quot;));p3.add(new JLabel(&quot;&quot;));p3.add(drawButton);p3.add(new JLabel(&quot;&quot;));p3.add(new JLabel(&quot;&quot;));\n\n        setLayout(new BorderLayout());  //BorderLayout is the default for JFrame\n        //call the constructor of the panel\n        add(p1,BorderLayout.NORTH);\n        circles = new Circles();\n        add(circles,BorderLayout.CENTER);\n        add(p3,BorderLayout.SOUTH);\n\n        drawButton.addActionListener(this);\n    }\n\n    @Override\n    public void actionPerformed(ActionEvent e)   {\n\n        if(e.getSource()!= drawButton)  return;\n        \n        double c1x = Double.parseDouble(circle1x.getText());\n        double c1y = Double.parseDouble(circle1y.getText());\n        double c1r = Double.parseDouble(circle1r.getText());\n        double c2x = Double.parseDouble(circle2x.getText());\n        double c2y = Double.parseDouble(circle2y.getText());\n        double c2r = Double.parseDouble(circle2r.getText());\n\n        circles.setX1((int) c1x);\n        circles.setX2((int) c2x);\n        circles.setY1((int) c1y);\n        circles.setY2((int) c2y);\n        circles.setR1((int) c1r);\n        circles.setR2((int) c2r);\n        repaint();\n    }\n}\n\nclass Circles extends JPanel{\n\n    private int x1=30,x2=200,y1=10,y2=10,r1=10,r2=10;\n\n    @Override\n    public void paintComponent(Graphics g)  {\n        super.paintComponent(g);\n        g.setColor(Color.BLACK);\n        g.drawOval(x1, y1, r1, r1);\n        g.drawOval(x2, y2, r2, r2);\n    }\n\n    public void setX1(int x1) {\n        this.x1 = x1;\n    }\n\n    public void setX2(int x2) {\n        this.x2 = x2;\n    }\n\n    public void setY1(int y1) {\n        this.y1 = y1;\n    }\n\n    public void setY2(int y2) {\n        this.y2 = y2;\n    }\n\n    public void setR1(int r1) {\n        this.r1 = r1;\n    }\n\n    public void setR2(int r2) {\n        this.r2 = r2;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":114128,"reputation":50422,"user_id":300257,"accept_rate":89,"display_name":"Gilbert Le Blanc"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1702050219,"creation_date":1614685137,"answer_id":66438638,"question_id":66428529,"body_markdown":"# Introduction\r\n\r\nThis was a fun little project.  Because it is a project, I&#39;m not going to provide all the code I wrote.  The reason I&#39;m answering this question is to outline an approach to this Swing project or almost any Java project.\r\n\r\nHere&#39;s the GUI I came up with.  It&#39;s a bit different than the OP&#39;s picture.\r\n\r\n[![Project GUI 1][1]][1]\r\n\r\nHere&#39;s another example.\r\n\r\n[![Project GUI 2][2]][2]\r\n\r\nAnd another.\r\n\r\n[![Project GUI 3][3]][3]\r\n\r\n# Explanation\r\n\r\nWhen I create a Swing application, or most Java applications, I use the [model / view / controller][4] (MVC) pattern.  This pattern allows me to separate my concerns and focus on one part of the application at a time.\r\n\r\nIn a Swing GUI, the MVC pattern means:\r\n\r\n1.  The view reads information from the model.\r\n2.  The view does not modify the model in any way.\r\n3.  The controller updates the model and repaints / revalidates the view.\r\n\r\n## Model\r\n\r\nRather than explaining a model, I&#39;ll just show you the model I created.\r\n\r\n\tpublic class IntersectingCirclesModel {\r\n\t\t\r\n\t\tprivate Circle[] circles;\r\n\t\t\r\n\t\tpublic IntersectingCirclesModel() {\r\n\t\t\tthis.circles = new Circle[2];\r\n\t\t}\r\n\r\n\t\tpublic boolean isIntersects() {\r\n\t\t\tdouble distanceX = Math.abs(circles[0].getCenter().getX() - \r\n\t\t\t\t\tcircles[1].getCenter().getX()); \r\n\t\t\tdouble distanceY = Math.abs(circles[0].getCenter().getY() - \r\n\t\t\t\t\tcircles[1].getCenter().getY()); \r\n\t\t\tdouble distance1 = (distanceX * distanceX + distanceY * distanceY);\r\n\t\t\t\r\n\t\t\tdouble radius1 = circles[0].getRadius();\r\n\t\t\tdouble radius2 = circles[1].getRadius();\r\n\t\t\tdouble diameter = radius1 + radius2;\r\n\t\t\tdouble distance2 = diameter * diameter;\r\n\t\t\t\r\n\t\t\tSystem.out.println(distance1 + &quot; &quot; + distance2);\r\n\t\t\treturn distance1 &lt;= distance2;\r\n\t\t}\r\n\r\n\t\tpublic Circle[] getCircles() {\r\n\t\t\treturn circles;\r\n\t\t}\r\n\t\t\r\n\t\tpublic void setCircle(Circle circle, int index) {\r\n\t\t\tthis.circles[index] = circle;\r\n\t\t}\r\n\t}\r\n\t\r\n\tpublic class Circle {\r\n\t\t\r\n\t\tprivate int radius;\r\n\t\t\r\n\t\tprivate Point center;\r\n\r\n\t\tpublic int getRadius() {\r\n\t\t\treturn radius;\r\n\t\t}\r\n\r\n\t\tpublic void setRadius(int radius) {\r\n\t\t\tthis.radius = radius;\r\n\t\t}\r\n\r\n\t\tpublic Point getCenter() {\r\n\t\t\treturn center;\r\n\t\t}\r\n\r\n\t\tpublic void setCenter(Point center) {\r\n\t\t\tthis.center = center;\r\n\t\t}\r\n\t\t\r\n\t\tpublic void setCenter(int x, int y) {\r\n\t\t\tthis.center = new Point(x, y);\r\n\t\t}\r\n\t\t\r\n\t}\r\n\r\nI created two plain Java getter / setter classes.  The first class, the `Circle` class, holds a radius and a center point.  I used a `java.awt.Point` to hold the center point.\r\n\r\nThe second class, the `IntersectingCirclesModel` class, is the application model.  This class holds an array of two `Circle` instances and calculates whether or not the two `Circle` instances intersect.\r\n\r\nThe intersect calculation is pretty simple.  The distance between the two center points has to be less than the distance of the two radii added together.  I actually calculate the distance squared so I don&#39;t have to take square roots.\r\n\r\n## View\r\n\r\nThe view consists of one `JFrame`, one drawing `JPanel`, two instances of one entry `JPanel`, and a `JPanel` to hold the two instances of one entry `JPanel` and the `JButton`.\r\n\r\nI use these Swing components.  The only Swing component I extend is `JPanel` to create the drawing `JPanel`.  I do this so I can override the `paintComponent` method.  The first line in my `paintComponent` method is a call to the super `paintComponent` method to maintain the Swing paint chain.\r\n\r\nI create the `JFrame` by creating the subordinate `JPanels`, packing the `JFrame`, and setting the `JFrame` visible.\r\n\r\nThe drawing `JPanel` is straightforward.  I extend a `JPanel`.  I pass an instance of the model class to the drawing `JPanel`.  In the constructor, I set the background color and set the preferred size of the `JPanel`.\r\n\r\nThe `paintComponent` method checks to see if the two `Circle` instances have been created.  If so, the circles are drawn and the intersect text at the top of the drawing `JPanel` is drawn.\r\n\r\nThe entry `JPanel` is a separate class.  I do this so I only have to create one entry panel.  The only difference between the two entry panels is the title, so I pass the title into the class through the constructor.\r\n\r\nI create the entry `JPanel` using a [GridBagLayout][5].  The `GridBagLayout` is the layout to use when you want to create any `JPanel` that looks like a form.\r\n\r\nI create a consolidating `JPanel` by creating two instances of the entry `JPanel`.  This consolidating `JPanel` uses a `FlowLayout`.\r\n\r\nI create an additional consolidating `JPanel` using a `BorderLayout`.  This `JPanel` puts the previous consolidating `JPanel` in the CENTER position and a `JButton` in the AFTER_LAST_LINE position.\r\n\r\nYou can create a complex GUI by nesting `JPanels` with simpler Swing layouts.\r\n\r\nThe `JFrame` has a default `BorderLayout`.  I put the drawing `JPanel` in the CENTER position and the additional consolidating `JPanel` in the AFTER_LAST_LINE position.\r\n\r\n## Controller \r\n\r\nThe controller is the `ActionListener` triggered by the `JButton`.  I pass an instance of the GUI class and an instance of the model class to the controller class.  The `actionPerformed` method gets the values from the two entry `JPanels`, adds the center point and radius to the two circles, and has the GUI repaint the drawing `JPanel`.\r\n\r\n# Edited to Add 1\r\n\r\nThe OP&#39;s comment leaves out a lot of information.  Here&#39;s the class I created to create one instance of the entry `JPanel`.  You have to create two instances of this class for the two entry `JPanels`.\r\n\r\n\tpublic class CircleEntryPanel {\r\n\t\t\r\n\t\tprivate JPanel panel;\r\n\t\t\r\n\t\tprivate JTextField centerxField;\r\n\t\tprivate JTextField centeryField;\r\n\t\tprivate JTextField radiusField;\r\n\t\t\r\n\t\tpublic CircleEntryPanel(String title) {\r\n\t\t\tthis.panel = createCircleEntryPanel(title);\r\n\t\t}\r\n\t\r\n\t\tprivate JPanel createCircleEntryPanel(String title) {\r\n\t\t\tJPanel panel = new JPanel(new GridBagLayout());\r\n\t\t\tpanel.setBorder(BorderFactory.createLineBorder(Color.BLACK, 2));\r\n\t\t\t\r\n\t\t\tGridBagConstraints gbc = new GridBagConstraints();\r\n\t\t\tgbc.anchor = GridBagConstraints.LINE_START;\r\n\t\t\tgbc.fill = GridBagConstraints.HORIZONTAL;\r\n\t\t\tgbc.insets = new Insets(5, 5, 5, 5);\r\n\t\t\tgbc.gridwidth = 2;\r\n\t\t\tgbc.gridx = 0;\r\n\t\t\tgbc.gridy = 0;\r\n\t\t\t\r\n\t\t\tJLabel titleLabel = new JLabel(title);\r\n\t\t\tpanel.add(titleLabel, gbc);\r\n\t\t\t\r\n\t\t\tgbc.gridwidth = 1;\r\n\t\t\tgbc.gridy++;\r\n\t\t\tJLabel centerxLabel = new JLabel(&quot;Center x:&quot;);\r\n\t\t\tpanel.add(centerxLabel, gbc);\r\n\t\t\t\r\n\t\t\tgbc.gridx++;\r\n\t\t\tcenterxField = new JTextField(4);\r\n\t\t\tcenterxField.setHorizontalAlignment(JTextField.TRAILING);\r\n\t\t\tpanel.add(centerxField, gbc);\r\n\t\t\t\r\n\t\t\tgbc.gridx = 0;\r\n\t\t\tgbc.gridy++;\r\n\t\t\tJLabel centeryLabel = new JLabel(&quot;Center y:&quot;);\r\n\t\t\tpanel.add(centeryLabel, gbc);\r\n\t\t\t\r\n\t\t\tgbc.gridx++;\r\n\t\t\tcenteryField = new JTextField(4);\r\n\t\t\tcenteryField.setHorizontalAlignment(JTextField.TRAILING);\r\n\t\t\tpanel.add(centeryField, gbc);\r\n\t\t\t\r\n\t\t\tgbc.gridx = 0;\r\n\t\t\tgbc.gridy++;\r\n\t\t\tJLabel radiusLabel = new JLabel(&quot;Radius:&quot;);\r\n\t\t\tpanel.add(radiusLabel, gbc);\r\n\t\t\t\r\n\t\t\tgbc.gridx++;\r\n\t\t\tradiusField = new JTextField(4);\r\n\t\t\tradiusField.setHorizontalAlignment(JTextField.TRAILING);\r\n\t\t\tpanel.add(radiusField, gbc);\r\n\t\t\t\r\n\t\t\treturn panel;\r\n\t\t}\r\n\r\n\t\tpublic JPanel getPanel() {\r\n\t\t\treturn panel;\r\n\t\t}\r\n\r\n\t\tpublic JTextField getCenterxField() {\r\n\t\t\treturn centerxField;\r\n\t\t}\r\n\r\n\t\tpublic JTextField getCenteryField() {\r\n\t\t\treturn centeryField;\r\n\t\t}\r\n\r\n\t\tpublic JTextField getRadiusField() {\r\n\t\t\treturn radiusField;\r\n\t\t}\r\n\t\r\n\t}\r\n\r\n# Edited to Add 2\r\n\r\nEnough time has passed for me to post the complete runnable code for this project.  I made all the additional classes inner classes so I can post the code as one block.\r\n\r\n    import java.awt.BasicStroke;\r\n    import java.awt.BorderLayout;\r\n    import java.awt.Color;\r\n    import java.awt.Dimension;\r\n    import java.awt.FlowLayout;\r\n    import java.awt.Font;\r\n    import java.awt.Graphics;\r\n    import java.awt.Graphics2D;\r\n    import java.awt.GridBagConstraints;\r\n    import java.awt.GridBagLayout;\r\n    import java.awt.Insets;\r\n    import java.awt.Point;\r\n    import java.awt.event.ActionEvent;\r\n    import java.awt.event.ActionListener;\r\n    import java.awt.font.FontRenderContext;\r\n    import java.awt.geom.Rectangle2D;\r\n    \r\n    import javax.swing.BorderFactory;\r\n    import javax.swing.JButton;\r\n    import javax.swing.JFrame;\r\n    import javax.swing.JLabel;\r\n    import javax.swing.JPanel;\r\n    import javax.swing.JTextField;\r\n    import javax.swing.SwingUtilities;\r\n    \r\n    public class IntersectingCirclesGUI implements Runnable {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tSwingUtilities.invokeLater(new IntersectingCirclesGUI());\r\n    \t}\r\n    \t\r\n    \tprivate IntersectingCirclesModel model;\r\n    \t\r\n    \tprivate CircleEntryPanel[] entryPanels;\r\n    \t\r\n    \tprivate DrawingPanel drawingPanel;\r\n    \t\r\n    \tpublic IntersectingCirclesGUI() {\r\n    \t\tthis.model = new IntersectingCirclesModel();\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic void run() {\r\n    \t\tJFrame frame = new JFrame(&quot;Project&quot;);\r\n    \t\tframe.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n    \t\t\r\n    \t\tthis.drawingPanel = new DrawingPanel(model);\r\n    \t\tframe.add(drawingPanel, BorderLayout.CENTER);\r\n    \t\tframe.add(createMainPanel(), BorderLayout.AFTER_LAST_LINE);\r\n    \t\t\r\n    \t\tframe.pack();\r\n    \t\tframe.setLocationByPlatform(true);\r\n    \t\tframe.setVisible(true);\r\n    \t}\r\n    \t\r\n    \tprivate JPanel createMainPanel() {\r\n    \t\tJPanel panel = new JPanel(new BorderLayout(5, 5));\r\n    \t\tpanel.setBorder(BorderFactory.createEmptyBorder(5, 5, 5, 5));\r\n    \t\t\r\n    \t\tpanel.add(createEntryPanel(), BorderLayout.CENTER);\r\n    \t\t\r\n    \t\tJButton button = new JButton(&quot;Redraw Circles&quot;);\r\n    \t\tbutton.addActionListener(new CircleListener(this, model));\r\n    \t\tpanel.add(button, BorderLayout.AFTER_LAST_LINE);\r\n    \t\t\r\n    \t\treturn panel;\r\n    \t}\r\n    \t\r\n    \tprivate JPanel createEntryPanel() {\r\n    \t\tJPanel panel = new JPanel(new FlowLayout(FlowLayout.CENTER, 20, 5));\r\n    \t\tpanel.setBorder(BorderFactory.createEmptyBorder(5, 5, 5, 5));\r\n    \t\t\r\n    \t\tentryPanels = new CircleEntryPanel[2];\r\n    \t\tentryPanels[0] = new CircleEntryPanel(&quot;Enter Circle 1 info:&quot;);\r\n    \t\tentryPanels[1] = new CircleEntryPanel(&quot;Enter Circle 2 info:&quot;);\r\n    \t\t\r\n    \t\tpanel.add(entryPanels[0].getPanel());\r\n    \t\tpanel.add(entryPanels[1].getPanel());\r\n    \t\t\r\n    \t\treturn panel;\r\n    \t}\r\n    \t\r\n    \tpublic void repaint() {\r\n    \t\tdrawingPanel.repaint();\r\n    \t}\r\n    \t\r\n    \tpublic CircleEntryPanel[] getEntryPanels() {\r\n    \t\treturn entryPanels;\r\n    \t}\r\n    \r\n    \tpublic class CircleEntryPanel {\r\n    \t\t\r\n    \t\tprivate JPanel panel;\r\n    \t\t\r\n    \t\tprivate JTextField centerxField;\r\n    \t\tprivate JTextField centeryField;\r\n    \t\tprivate JTextField radiusField;\r\n    \t\t\r\n    \t\tpublic CircleEntryPanel(String title) {\r\n    \t\t\tthis.panel = createCircleEntryPanel(title);\r\n    \t\t}\r\n    \t\r\n    \t\tprivate JPanel createCircleEntryPanel(String title) {\r\n    \t\t\tJPanel panel = new JPanel(new GridBagLayout());\r\n    \t\t\tpanel.setBorder(BorderFactory.createLineBorder(Color.BLACK, 2));\r\n    \t\t\t\r\n    \t\t\tGridBagConstraints gbc = new GridBagConstraints();\r\n    \t\t\tgbc.anchor = GridBagConstraints.LINE_START;\r\n    \t\t\tgbc.fill = GridBagConstraints.HORIZONTAL;\r\n    \t\t\tgbc.insets = new Insets(5, 5, 5, 5);\r\n    \t\t\tgbc.gridwidth = 2;\r\n    \t\t\tgbc.gridx = 0;\r\n    \t\t\tgbc.gridy = 0;\r\n    \t\t\t\r\n    \t\t\tJLabel titleLabel = new JLabel(title);\r\n    \t\t\tpanel.add(titleLabel, gbc);\r\n    \t\t\t\r\n    \t\t\tgbc.gridwidth = 1;\r\n    \t\t\tgbc.gridy++;\r\n    \t\t\tJLabel centerxLabel = new JLabel(&quot;Center x:&quot;);\r\n    \t\t\tpanel.add(centerxLabel, gbc);\r\n    \t\t\t\r\n    \t\t\tgbc.gridx++;\r\n    \t\t\tcenterxField = new JTextField(4);\r\n    \t\t\tcenterxField.setHorizontalAlignment(JTextField.TRAILING);\r\n    \t\t\tpanel.add(centerxField, gbc);\r\n    \t\t\t\r\n    \t\t\tgbc.gridx = 0;\r\n    \t\t\tgbc.gridy++;\r\n    \t\t\tJLabel centeryLabel = new JLabel(&quot;Center y:&quot;);\r\n    \t\t\tpanel.add(centeryLabel, gbc);\r\n    \t\t\t\r\n    \t\t\tgbc.gridx++;\r\n    \t\t\tcenteryField = new JTextField(4);\r\n    \t\t\tcenteryField.setHorizontalAlignment(JTextField.TRAILING);\r\n    \t\t\tpanel.add(centeryField, gbc);\r\n    \t\t\t\r\n    \t\t\tgbc.gridx = 0;\r\n    \t\t\tgbc.gridy++;\r\n    \t\t\tJLabel radiusLabel = new JLabel(&quot;Radius:&quot;);\r\n    \t\t\tpanel.add(radiusLabel, gbc);\r\n    \t\t\t\r\n    \t\t\tgbc.gridx++;\r\n    \t\t\tradiusField = new JTextField(4);\r\n    \t\t\tradiusField.setHorizontalAlignment(JTextField.TRAILING);\r\n    \t\t\tpanel.add(radiusField, gbc);\r\n    \t\t\t\r\n    \t\t\treturn panel;\r\n    \t\t}\r\n    \r\n    \t\tpublic JPanel getPanel() {\r\n    \t\t\treturn panel;\r\n    \t\t}\r\n    \r\n    \t\tpublic JTextField getCenterxField() {\r\n    \t\t\treturn centerxField;\r\n    \t\t}\r\n    \r\n    \t\tpublic JTextField getCenteryField() {\r\n    \t\t\treturn centeryField;\r\n    \t\t}\r\n    \r\n    \t\tpublic JTextField getRadiusField() {\r\n    \t\t\treturn radiusField;\r\n    \t\t}\r\n    \t\r\n    \t}\r\n    \t\r\n    \tpublic class DrawingPanel extends JPanel {\r\n    \t\t\r\n    \t\tprivate static final long serialVersionUID = 1L;\r\n    \t\t\r\n    \t\tprivate IntersectingCirclesModel model;\r\n    \t\t\r\n    \t\tpublic DrawingPanel(IntersectingCirclesModel model) {\r\n    \t\t\tthis.model = model;\r\n    \t\t\tthis.setBackground(Color.WHITE);\r\n    \t\t\tthis.setPreferredSize(new Dimension(400, 200));\r\n    \t\t}\r\n    \r\n    \t\t@Override\r\n    \t\tprotected void paintComponent(Graphics g) {\r\n    \t\t\tsuper.paintComponent(g);\r\n    \t\t\t\r\n    \t\t\tGraphics2D g2d = (Graphics2D) g;\r\n    \t\t\tg2d.setColor(Color.BLACK);\r\n    \t\t\tg2d.setStroke(new BasicStroke(3f));\r\n    \t\t\t\r\n    \t\t\tboolean circlesDrawn = false;\r\n    \t\t\tCircle[] circles = model.getCircles();\r\n    \t\t\tfor (int i = 0; i &lt; circles.length; i++) {\r\n    \t\t\t\tif (circles[i] != null) {\r\n    \t\t\t\t\tpaintCircle(g2d, circles[i]);\r\n    \t\t\t\t\tcirclesDrawn = true;\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t\t\r\n    \t\t\tif (circlesDrawn) {\r\n    \t\t\t\tString text = (model.isIntersects()) ? &quot;Yes&quot; : &quot;No&quot;;\r\n    \t\t\t\ttext = &quot;Two Circles Intersect? &quot; + text;\r\n    \t\t\t\tFont font = getFont();\r\n    \t\t\t\tFontRenderContext frc =\r\n    \t                    new FontRenderContext(null, true, true);\r\n    \r\n    \t            Rectangle2D r2D = font.getStringBounds(text, frc);\r\n    \t            int rWidth = (int) Math.round(getWidth());\r\n    \t            int textWidth = (int) Math.round(r2D.getWidth());\r\n    \t            int textHeight = (int) Math.round(r2D.getHeight());\r\n    \r\n    \t            int a = (rWidth - textWidth) / 2;\r\n    \t            int b = textHeight + 5;\r\n    \r\n    \t            g2d.drawString(text, a, b);\r\n    \t\t\t}\r\n    \t\t}\r\n    \r\n    \t\tprivate void paintCircle(Graphics2D g2d, Circle circle) {\r\n    \t\t\tint radius = circle.getRadius();\r\n    \t\t\tint diameter = radius + radius;\r\n    \t\t\tPoint point = circle.getCenter();\r\n    \t\t\tg2d.drawOval(point.x - radius, point.y - radius, \r\n    \t\t\t\t\tdiameter, diameter);\r\n    \t\t}\r\n    \t}\r\n    \t\r\n    \tpublic class CircleListener implements ActionListener {\r\n    \t\t\r\n    \t\tprivate IntersectingCirclesGUI frame;\r\n    \t\t\r\n    \t\tprivate IntersectingCirclesModel model;\r\n    \r\n    \t\tpublic CircleListener(IntersectingCirclesGUI frame, \r\n    \t\t\t\tIntersectingCirclesModel model) {\r\n    \t\t\tthis.frame = frame;\r\n    \t\t\tthis.model = model;\r\n    \t\t}\r\n    \r\n    \t\t@Override\r\n    \t\tpublic void actionPerformed(ActionEvent event) {\r\n    \t\t\tCircleEntryPanel[] entryPanels = frame.getEntryPanels();\r\n    \t\t\tCircle[] circles = model.getCircles();\r\n    \t\t\tfor (int i = 0; i &lt; entryPanels.length; i++) {\r\n    \t\t\t\tcircles[i] = createCircle(entryPanels[i]);\r\n    \t\t\t}\r\n    \t\t\tframe.repaint();\r\n    \t\t}\r\n    \t\t\r\n    \t\tprivate Circle createCircle(CircleEntryPanel panel) {\r\n    \t\t\tint x = valueOf(panel.getCenterxField().getText().trim());\r\n    \t\t\tint y = valueOf(panel.getCenteryField().getText().trim());\r\n    \t\t\tint radius = valueOf(panel.getRadiusField().getText().trim());\r\n    \t\t\t\r\n    \t\t\tCircle circle = new Circle();\r\n    \t\t\tcircle.setCenter(x, y);\r\n    \t\t\tcircle.setRadius(radius);\r\n    \t\t\t\r\n    \t\t\treturn circle;\r\n    \t\t}\r\n    \t\t\r\n    \t\tprivate int valueOf(String number) {\r\n    \t\t\ttry {\r\n    \t\t\t\treturn Integer.valueOf(number);\r\n    \t\t\t} catch (NumberFormatException e) {\r\n    \t\t\t\treturn -1;\r\n    \t\t\t}\r\n    \t\t}\r\n    \t\t\r\n    \t}\r\n    \t\r\n    \tpublic class IntersectingCirclesModel {\r\n    \t\t\r\n    \t\tprivate Circle[] circles;\r\n    \t\t\r\n    \t\tpublic IntersectingCirclesModel() {\r\n    \t\t\tthis.circles = new Circle[2];\r\n    \t\t}\r\n    \r\n    \t\tpublic boolean isIntersects() {\r\n    \t\t\tdouble distanceX = Math.abs(circles[0].getCenter().getX() - \r\n    \t\t\t\t\tcircles[1].getCenter().getX()); \r\n    \t\t\tdouble distanceY = Math.abs(circles[0].getCenter().getY() - \r\n    \t\t\t\t\tcircles[1].getCenter().getY()); \r\n    \t\t\tdouble distance1 = (distanceX * distanceX + distanceY * distanceY);\r\n    \t\t\t\r\n    \t\t\tdouble radius1 = circles[0].getRadius();\r\n    \t\t\tdouble radius2 = circles[1].getRadius();\r\n    \t\t\tdouble diameter = radius1 + radius2;\r\n    \t\t\tdouble distance2 = diameter * diameter;\r\n    \t\t\t\r\n    \t\t\tSystem.out.println(distance1 + &quot; &quot; + distance2);\r\n    \t\t\treturn distance1 &lt;= distance2;\r\n    \t\t}\r\n    \r\n    \t\tpublic Circle[] getCircles() {\r\n    \t\t\treturn circles;\r\n    \t\t}\r\n    \t\t\r\n    \t\tpublic void setCircle(Circle circle, int index) {\r\n    \t\t\tthis.circles[index] = circle;\r\n    \t\t}\r\n    \t}\r\n    \t\r\n    \tpublic class Circle {\r\n    \t\t\r\n    \t\tprivate int radius;\r\n    \t\t\r\n    \t\tprivate Point center;\r\n    \r\n    \t\tpublic int getRadius() {\r\n    \t\t\treturn radius;\r\n    \t\t}\r\n    \r\n    \t\tpublic void setRadius(int radius) {\r\n    \t\t\tthis.radius = radius;\r\n    \t\t}\r\n    \r\n    \t\tpublic Point getCenter() {\r\n    \t\t\treturn center;\r\n    \t\t}\r\n    \r\n    \t\tpublic void setCenter(Point center) {\r\n    \t\t\tthis.center = center;\r\n    \t\t}\r\n    \t\t\r\n    \t\tpublic void setCenter(int x, int y) {\r\n    \t\t\tthis.center = new Point(x, y);\r\n    \t\t}\r\n    \t\t\r\n    \t}\r\n    \r\n    }\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/lUewW.png\r\n  [2]: https://i.stack.imgur.com/WJdex.png\r\n  [3]: https://i.stack.imgur.com/5Obgq.png\r\n  [4]: https://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller\r\n  [5]: https://docs.oracle.com/javase/tutorial/uiswing/layout/gridbag.html\r\n","title":"Passing variable to paintComponent method","body":"<h1>Introduction</h1>\n<p>This was a fun little project.  Because it is a project, I'm not going to provide all the code I wrote.  The reason I'm answering this question is to outline an approach to this Swing project or almost any Java project.</p>\n<p>Here's the GUI I came up with.  It's a bit different than the OP's picture.</p>\n<p><a href=\"https://i.stack.imgur.com/lUewW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/lUewW.png\" alt=\"Project GUI 1\" /></a></p>\n<p>Here's another example.</p>\n<p><a href=\"https://i.stack.imgur.com/WJdex.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/WJdex.png\" alt=\"Project GUI 2\" /></a></p>\n<p>And another.</p>\n<p><a href=\"https://i.stack.imgur.com/5Obgq.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/5Obgq.png\" alt=\"Project GUI 3\" /></a></p>\n<h1>Explanation</h1>\n<p>When I create a Swing application, or most Java applications, I use the <a href=\"https://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller\" rel=\"nofollow noreferrer\">model / view / controller</a> (MVC) pattern.  This pattern allows me to separate my concerns and focus on one part of the application at a time.</p>\n<p>In a Swing GUI, the MVC pattern means:</p>\n<ol>\n<li>The view reads information from the model.</li>\n<li>The view does not modify the model in any way.</li>\n<li>The controller updates the model and repaints / revalidates the view.</li>\n</ol>\n<h2>Model</h2>\n<p>Rather than explaining a model, I'll just show you the model I created.</p>\n<pre><code>public class IntersectingCirclesModel {\n    \n    private Circle[] circles;\n    \n    public IntersectingCirclesModel() {\n        this.circles = new Circle[2];\n    }\n\n    public boolean isIntersects() {\n        double distanceX = Math.abs(circles[0].getCenter().getX() - \n                circles[1].getCenter().getX()); \n        double distanceY = Math.abs(circles[0].getCenter().getY() - \n                circles[1].getCenter().getY()); \n        double distance1 = (distanceX * distanceX + distanceY * distanceY);\n        \n        double radius1 = circles[0].getRadius();\n        double radius2 = circles[1].getRadius();\n        double diameter = radius1 + radius2;\n        double distance2 = diameter * diameter;\n        \n        System.out.println(distance1 + &quot; &quot; + distance2);\n        return distance1 &lt;= distance2;\n    }\n\n    public Circle[] getCircles() {\n        return circles;\n    }\n    \n    public void setCircle(Circle circle, int index) {\n        this.circles[index] = circle;\n    }\n}\n\npublic class Circle {\n    \n    private int radius;\n    \n    private Point center;\n\n    public int getRadius() {\n        return radius;\n    }\n\n    public void setRadius(int radius) {\n        this.radius = radius;\n    }\n\n    public Point getCenter() {\n        return center;\n    }\n\n    public void setCenter(Point center) {\n        this.center = center;\n    }\n    \n    public void setCenter(int x, int y) {\n        this.center = new Point(x, y);\n    }\n    \n}\n</code></pre>\n<p>I created two plain Java getter / setter classes.  The first class, the <code>Circle</code> class, holds a radius and a center point.  I used a <code>java.awt.Point</code> to hold the center point.</p>\n<p>The second class, the <code>IntersectingCirclesModel</code> class, is the application model.  This class holds an array of two <code>Circle</code> instances and calculates whether or not the two <code>Circle</code> instances intersect.</p>\n<p>The intersect calculation is pretty simple.  The distance between the two center points has to be less than the distance of the two radii added together.  I actually calculate the distance squared so I don't have to take square roots.</p>\n<h2>View</h2>\n<p>The view consists of one <code>JFrame</code>, one drawing <code>JPanel</code>, two instances of one entry <code>JPanel</code>, and a <code>JPanel</code> to hold the two instances of one entry <code>JPanel</code> and the <code>JButton</code>.</p>\n<p>I use these Swing components.  The only Swing component I extend is <code>JPanel</code> to create the drawing <code>JPanel</code>.  I do this so I can override the <code>paintComponent</code> method.  The first line in my <code>paintComponent</code> method is a call to the super <code>paintComponent</code> method to maintain the Swing paint chain.</p>\n<p>I create the <code>JFrame</code> by creating the subordinate <code>JPanels</code>, packing the <code>JFrame</code>, and setting the <code>JFrame</code> visible.</p>\n<p>The drawing <code>JPanel</code> is straightforward.  I extend a <code>JPanel</code>.  I pass an instance of the model class to the drawing <code>JPanel</code>.  In the constructor, I set the background color and set the preferred size of the <code>JPanel</code>.</p>\n<p>The <code>paintComponent</code> method checks to see if the two <code>Circle</code> instances have been created.  If so, the circles are drawn and the intersect text at the top of the drawing <code>JPanel</code> is drawn.</p>\n<p>The entry <code>JPanel</code> is a separate class.  I do this so I only have to create one entry panel.  The only difference between the two entry panels is the title, so I pass the title into the class through the constructor.</p>\n<p>I create the entry <code>JPanel</code> using a <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/layout/gridbag.html\" rel=\"nofollow noreferrer\">GridBagLayout</a>.  The <code>GridBagLayout</code> is the layout to use when you want to create any <code>JPanel</code> that looks like a form.</p>\n<p>I create a consolidating <code>JPanel</code> by creating two instances of the entry <code>JPanel</code>.  This consolidating <code>JPanel</code> uses a <code>FlowLayout</code>.</p>\n<p>I create an additional consolidating <code>JPanel</code> using a <code>BorderLayout</code>.  This <code>JPanel</code> puts the previous consolidating <code>JPanel</code> in the CENTER position and a <code>JButton</code> in the AFTER_LAST_LINE position.</p>\n<p>You can create a complex GUI by nesting <code>JPanels</code> with simpler Swing layouts.</p>\n<p>The <code>JFrame</code> has a default <code>BorderLayout</code>.  I put the drawing <code>JPanel</code> in the CENTER position and the additional consolidating <code>JPanel</code> in the AFTER_LAST_LINE position.</p>\n<h2>Controller</h2>\n<p>The controller is the <code>ActionListener</code> triggered by the <code>JButton</code>.  I pass an instance of the GUI class and an instance of the model class to the controller class.  The <code>actionPerformed</code> method gets the values from the two entry <code>JPanels</code>, adds the center point and radius to the two circles, and has the GUI repaint the drawing <code>JPanel</code>.</p>\n<h1>Edited to Add 1</h1>\n<p>The OP's comment leaves out a lot of information.  Here's the class I created to create one instance of the entry <code>JPanel</code>.  You have to create two instances of this class for the two entry <code>JPanels</code>.</p>\n<pre><code>public class CircleEntryPanel {\n    \n    private JPanel panel;\n    \n    private JTextField centerxField;\n    private JTextField centeryField;\n    private JTextField radiusField;\n    \n    public CircleEntryPanel(String title) {\n        this.panel = createCircleEntryPanel(title);\n    }\n\n    private JPanel createCircleEntryPanel(String title) {\n        JPanel panel = new JPanel(new GridBagLayout());\n        panel.setBorder(BorderFactory.createLineBorder(Color.BLACK, 2));\n        \n        GridBagConstraints gbc = new GridBagConstraints();\n        gbc.anchor = GridBagConstraints.LINE_START;\n        gbc.fill = GridBagConstraints.HORIZONTAL;\n        gbc.insets = new Insets(5, 5, 5, 5);\n        gbc.gridwidth = 2;\n        gbc.gridx = 0;\n        gbc.gridy = 0;\n        \n        JLabel titleLabel = new JLabel(title);\n        panel.add(titleLabel, gbc);\n        \n        gbc.gridwidth = 1;\n        gbc.gridy++;\n        JLabel centerxLabel = new JLabel(&quot;Center x:&quot;);\n        panel.add(centerxLabel, gbc);\n        \n        gbc.gridx++;\n        centerxField = new JTextField(4);\n        centerxField.setHorizontalAlignment(JTextField.TRAILING);\n        panel.add(centerxField, gbc);\n        \n        gbc.gridx = 0;\n        gbc.gridy++;\n        JLabel centeryLabel = new JLabel(&quot;Center y:&quot;);\n        panel.add(centeryLabel, gbc);\n        \n        gbc.gridx++;\n        centeryField = new JTextField(4);\n        centeryField.setHorizontalAlignment(JTextField.TRAILING);\n        panel.add(centeryField, gbc);\n        \n        gbc.gridx = 0;\n        gbc.gridy++;\n        JLabel radiusLabel = new JLabel(&quot;Radius:&quot;);\n        panel.add(radiusLabel, gbc);\n        \n        gbc.gridx++;\n        radiusField = new JTextField(4);\n        radiusField.setHorizontalAlignment(JTextField.TRAILING);\n        panel.add(radiusField, gbc);\n        \n        return panel;\n    }\n\n    public JPanel getPanel() {\n        return panel;\n    }\n\n    public JTextField getCenterxField() {\n        return centerxField;\n    }\n\n    public JTextField getCenteryField() {\n        return centeryField;\n    }\n\n    public JTextField getRadiusField() {\n        return radiusField;\n    }\n\n}\n</code></pre>\n<h1>Edited to Add 2</h1>\n<p>Enough time has passed for me to post the complete runnable code for this project.  I made all the additional classes inner classes so I can post the code as one block.</p>\n<pre><code>import java.awt.BasicStroke;\nimport java.awt.BorderLayout;\nimport java.awt.Color;\nimport java.awt.Dimension;\nimport java.awt.FlowLayout;\nimport java.awt.Font;\nimport java.awt.Graphics;\nimport java.awt.Graphics2D;\nimport java.awt.GridBagConstraints;\nimport java.awt.GridBagLayout;\nimport java.awt.Insets;\nimport java.awt.Point;\nimport java.awt.event.ActionEvent;\nimport java.awt.event.ActionListener;\nimport java.awt.font.FontRenderContext;\nimport java.awt.geom.Rectangle2D;\n\nimport javax.swing.BorderFactory;\nimport javax.swing.JButton;\nimport javax.swing.JFrame;\nimport javax.swing.JLabel;\nimport javax.swing.JPanel;\nimport javax.swing.JTextField;\nimport javax.swing.SwingUtilities;\n\npublic class IntersectingCirclesGUI implements Runnable {\n\n    public static void main(String[] args) {\n        SwingUtilities.invokeLater(new IntersectingCirclesGUI());\n    }\n    \n    private IntersectingCirclesModel model;\n    \n    private CircleEntryPanel[] entryPanels;\n    \n    private DrawingPanel drawingPanel;\n    \n    public IntersectingCirclesGUI() {\n        this.model = new IntersectingCirclesModel();\n    }\n\n    @Override\n    public void run() {\n        JFrame frame = new JFrame(&quot;Project&quot;);\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        \n        this.drawingPanel = new DrawingPanel(model);\n        frame.add(drawingPanel, BorderLayout.CENTER);\n        frame.add(createMainPanel(), BorderLayout.AFTER_LAST_LINE);\n        \n        frame.pack();\n        frame.setLocationByPlatform(true);\n        frame.setVisible(true);\n    }\n    \n    private JPanel createMainPanel() {\n        JPanel panel = new JPanel(new BorderLayout(5, 5));\n        panel.setBorder(BorderFactory.createEmptyBorder(5, 5, 5, 5));\n        \n        panel.add(createEntryPanel(), BorderLayout.CENTER);\n        \n        JButton button = new JButton(&quot;Redraw Circles&quot;);\n        button.addActionListener(new CircleListener(this, model));\n        panel.add(button, BorderLayout.AFTER_LAST_LINE);\n        \n        return panel;\n    }\n    \n    private JPanel createEntryPanel() {\n        JPanel panel = new JPanel(new FlowLayout(FlowLayout.CENTER, 20, 5));\n        panel.setBorder(BorderFactory.createEmptyBorder(5, 5, 5, 5));\n        \n        entryPanels = new CircleEntryPanel[2];\n        entryPanels[0] = new CircleEntryPanel(&quot;Enter Circle 1 info:&quot;);\n        entryPanels[1] = new CircleEntryPanel(&quot;Enter Circle 2 info:&quot;);\n        \n        panel.add(entryPanels[0].getPanel());\n        panel.add(entryPanels[1].getPanel());\n        \n        return panel;\n    }\n    \n    public void repaint() {\n        drawingPanel.repaint();\n    }\n    \n    public CircleEntryPanel[] getEntryPanels() {\n        return entryPanels;\n    }\n\n    public class CircleEntryPanel {\n        \n        private JPanel panel;\n        \n        private JTextField centerxField;\n        private JTextField centeryField;\n        private JTextField radiusField;\n        \n        public CircleEntryPanel(String title) {\n            this.panel = createCircleEntryPanel(title);\n        }\n    \n        private JPanel createCircleEntryPanel(String title) {\n            JPanel panel = new JPanel(new GridBagLayout());\n            panel.setBorder(BorderFactory.createLineBorder(Color.BLACK, 2));\n            \n            GridBagConstraints gbc = new GridBagConstraints();\n            gbc.anchor = GridBagConstraints.LINE_START;\n            gbc.fill = GridBagConstraints.HORIZONTAL;\n            gbc.insets = new Insets(5, 5, 5, 5);\n            gbc.gridwidth = 2;\n            gbc.gridx = 0;\n            gbc.gridy = 0;\n            \n            JLabel titleLabel = new JLabel(title);\n            panel.add(titleLabel, gbc);\n            \n            gbc.gridwidth = 1;\n            gbc.gridy++;\n            JLabel centerxLabel = new JLabel(&quot;Center x:&quot;);\n            panel.add(centerxLabel, gbc);\n            \n            gbc.gridx++;\n            centerxField = new JTextField(4);\n            centerxField.setHorizontalAlignment(JTextField.TRAILING);\n            panel.add(centerxField, gbc);\n            \n            gbc.gridx = 0;\n            gbc.gridy++;\n            JLabel centeryLabel = new JLabel(&quot;Center y:&quot;);\n            panel.add(centeryLabel, gbc);\n            \n            gbc.gridx++;\n            centeryField = new JTextField(4);\n            centeryField.setHorizontalAlignment(JTextField.TRAILING);\n            panel.add(centeryField, gbc);\n            \n            gbc.gridx = 0;\n            gbc.gridy++;\n            JLabel radiusLabel = new JLabel(&quot;Radius:&quot;);\n            panel.add(radiusLabel, gbc);\n            \n            gbc.gridx++;\n            radiusField = new JTextField(4);\n            radiusField.setHorizontalAlignment(JTextField.TRAILING);\n            panel.add(radiusField, gbc);\n            \n            return panel;\n        }\n\n        public JPanel getPanel() {\n            return panel;\n        }\n\n        public JTextField getCenterxField() {\n            return centerxField;\n        }\n\n        public JTextField getCenteryField() {\n            return centeryField;\n        }\n\n        public JTextField getRadiusField() {\n            return radiusField;\n        }\n    \n    }\n    \n    public class DrawingPanel extends JPanel {\n        \n        private static final long serialVersionUID = 1L;\n        \n        private IntersectingCirclesModel model;\n        \n        public DrawingPanel(IntersectingCirclesModel model) {\n            this.model = model;\n            this.setBackground(Color.WHITE);\n            this.setPreferredSize(new Dimension(400, 200));\n        }\n\n        @Override\n        protected void paintComponent(Graphics g) {\n            super.paintComponent(g);\n            \n            Graphics2D g2d = (Graphics2D) g;\n            g2d.setColor(Color.BLACK);\n            g2d.setStroke(new BasicStroke(3f));\n            \n            boolean circlesDrawn = false;\n            Circle[] circles = model.getCircles();\n            for (int i = 0; i &lt; circles.length; i++) {\n                if (circles[i] != null) {\n                    paintCircle(g2d, circles[i]);\n                    circlesDrawn = true;\n                }\n            }\n            \n            if (circlesDrawn) {\n                String text = (model.isIntersects()) ? &quot;Yes&quot; : &quot;No&quot;;\n                text = &quot;Two Circles Intersect? &quot; + text;\n                Font font = getFont();\n                FontRenderContext frc =\n                        new FontRenderContext(null, true, true);\n\n                Rectangle2D r2D = font.getStringBounds(text, frc);\n                int rWidth = (int) Math.round(getWidth());\n                int textWidth = (int) Math.round(r2D.getWidth());\n                int textHeight = (int) Math.round(r2D.getHeight());\n\n                int a = (rWidth - textWidth) / 2;\n                int b = textHeight + 5;\n\n                g2d.drawString(text, a, b);\n            }\n        }\n\n        private void paintCircle(Graphics2D g2d, Circle circle) {\n            int radius = circle.getRadius();\n            int diameter = radius + radius;\n            Point point = circle.getCenter();\n            g2d.drawOval(point.x - radius, point.y - radius, \n                    diameter, diameter);\n        }\n    }\n    \n    public class CircleListener implements ActionListener {\n        \n        private IntersectingCirclesGUI frame;\n        \n        private IntersectingCirclesModel model;\n\n        public CircleListener(IntersectingCirclesGUI frame, \n                IntersectingCirclesModel model) {\n            this.frame = frame;\n            this.model = model;\n        }\n\n        @Override\n        public void actionPerformed(ActionEvent event) {\n            CircleEntryPanel[] entryPanels = frame.getEntryPanels();\n            Circle[] circles = model.getCircles();\n            for (int i = 0; i &lt; entryPanels.length; i++) {\n                circles[i] = createCircle(entryPanels[i]);\n            }\n            frame.repaint();\n        }\n        \n        private Circle createCircle(CircleEntryPanel panel) {\n            int x = valueOf(panel.getCenterxField().getText().trim());\n            int y = valueOf(panel.getCenteryField().getText().trim());\n            int radius = valueOf(panel.getRadiusField().getText().trim());\n            \n            Circle circle = new Circle();\n            circle.setCenter(x, y);\n            circle.setRadius(radius);\n            \n            return circle;\n        }\n        \n        private int valueOf(String number) {\n            try {\n                return Integer.valueOf(number);\n            } catch (NumberFormatException e) {\n                return -1;\n            }\n        }\n        \n    }\n    \n    public class IntersectingCirclesModel {\n        \n        private Circle[] circles;\n        \n        public IntersectingCirclesModel() {\n            this.circles = new Circle[2];\n        }\n\n        public boolean isIntersects() {\n            double distanceX = Math.abs(circles[0].getCenter().getX() - \n                    circles[1].getCenter().getX()); \n            double distanceY = Math.abs(circles[0].getCenter().getY() - \n                    circles[1].getCenter().getY()); \n            double distance1 = (distanceX * distanceX + distanceY * distanceY);\n            \n            double radius1 = circles[0].getRadius();\n            double radius2 = circles[1].getRadius();\n            double diameter = radius1 + radius2;\n            double distance2 = diameter * diameter;\n            \n            System.out.println(distance1 + &quot; &quot; + distance2);\n            return distance1 &lt;= distance2;\n        }\n\n        public Circle[] getCircles() {\n            return circles;\n        }\n        \n        public void setCircle(Circle circle, int index) {\n            this.circles[index] = circle;\n        }\n    }\n    \n    public class Circle {\n        \n        private int radius;\n        \n        private Point center;\n\n        public int getRadius() {\n            return radius;\n        }\n\n        public void setRadius(int radius) {\n            this.radius = radius;\n        }\n\n        public Point getCenter() {\n            return center;\n        }\n\n        public void setCenter(Point center) {\n            this.center = center;\n        }\n        \n        public void setCenter(int x, int y) {\n            this.center = new Point(x, y);\n        }\n        \n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":20680885,"reputation":11,"user_id":15184513,"display_name":"Syed Imran"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":266,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1702050219,"creation_date":1614627389,"question_id":66428529,"body_markdown":"I need some help. How does it pass a variable from class `Circle` to the `paintComponent` method because I want to make the circle change the x, y, w, h based on user input. Is there any idea to fix this? Since the problem there is an error after I press the button it doesn&#39;t execute anything. \r\n\r\nBased on this image.\r\n\r\n&lt;img src=&quot;https://i.stack.imgur.com/bg3Ds.png&quot;&gt;\r\n\r\n\r\n\r\n```import java.awt.BorderLayout;\r\nimport java.awt.Color;\r\nimport java.awt.Graphics;\r\nimport java.awt.GridLayout;\r\nimport javax.swing.JFrame;\r\nimport javax.swing.JButton;\r\nimport javax.swing.JPanel;\r\nimport java.awt.event.ActionEvent;\r\nimport java.awt.event.ActionListener;\r\nimport java.awt.geom.Ellipse2D;\r\nimport java.text.DecimalFormat;\r\nimport javax.swing.JLabel;\r\nimport javax.swing.JTextField;\r\n\r\n\r\npublic class Circle extends JFrame implements ActionListener{\r\n    \r\n     private JPanel p1,p2,p3,buttonsize;\r\n     private JLabel title,lb1,lb2,lb3,lb4,lb5,lb6,lb7,lb8,lb9,lb10;\r\n     private JTextField circle1x,circle1y,circle1r,circle2x,circle2y,circle2r;\r\n     private JButton drawButton;\r\n     static int x1=30,x2=200,y1=10,y2=10,r1=10,r2=10;\r\n    \r\n    public static void main(String[]args)\r\n    {\r\n        Circle c = new Circle();\r\n        c.setSize(400,400);\r\n        c.setTitle(&quot;Project&quot;);\r\n        c.setVisible(true);\r\n        c.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n    }\r\n    \r\n    \r\n    public Circle()\r\n    {\r\n       \r\n        title = new JLabel(&quot;Two circles intersect? No&quot;);\r\n        p1 = new JPanel();\r\n        p1.add(title);\r\n\r\n        p2 = new JPanel();\r\n        //p2.add(new Circles());\r\n        \r\n        lb1 = new JLabel(&quot;Enter circle 1&quot;);\r\n        lb2 = new JLabel(&quot;Enter circle 2&quot;);\r\n        lb3 = new JLabel(&quot;info:&quot;);\r\n        lb4 = new JLabel(&quot;info:&quot;);\r\n        lb5 = new JLabel(&quot;Center x:&quot;);\r\n        lb6 = new JLabel(&quot;Center y:&quot;);\r\n        lb7 = new JLabel(&quot;Radius:&quot;);\r\n        lb8 = new JLabel(&quot;Center x:&quot;);\r\n        lb9 = new JLabel(&quot;Center y:&quot;);\r\n        lb10 = new JLabel(&quot;Radius:&quot;);\r\n        \r\n        circle1x = new JTextField(1);\r\n        circle1y = new JTextField(1);\r\n        circle1r = new JTextField(1);\r\n        circle2x = new JTextField(1);\r\n        circle2y = new JTextField(1);\r\n        circle2r = new JTextField(1);\r\n        drawButton = new JButton(&quot;Redraw Circles&quot;);\r\n        buttonsize = new JPanel();\r\n        buttonsize.setSize(50,50);\r\n        buttonsize.add(drawButton);\r\n        p3 = new JPanel();\r\n        p3.setLayout(new GridLayout(5,5));\r\n\r\n        p3.add(lb1);p3.add(lb3);p3.add(new JLabel(&quot;&quot;));p3.add(lb2);p3.add(lb4);\r\n        p3.add(lb5);p3.add(circle1x);p3.add(new JLabel(&quot;&quot;));p3.add(lb8);p3.add(circle2x);\r\n        p3.add(lb6);p3.add(circle1y);p3.add(new JLabel(&quot;&quot;));p3.add(lb9);p3.add(circle2y);\r\n        p3.add(lb7);p3.add(circle1r);p3.add(new JLabel(&quot;&quot;));p3.add(lb10);p3.add(circle2r);\r\n        p3.add(new JLabel(&quot;&quot;));p3.add(new JLabel(&quot;&quot;));p3.add(drawButton);p3.add(new JLabel(&quot;&quot;));p3.add(new JLabel(&quot;&quot;));\r\n        \r\n        \r\n        \r\n        setLayout(new BorderLayout());\r\n        //call the constructor of the panel\r\n        add(p1,BorderLayout.NORTH);\r\n        add(new Circles(),BorderLayout.CENTER);\r\n        add(p3,BorderLayout.SOUTH);\r\n        \r\n        \r\n        drawButton.addActionListener(this);\r\n    }\r\n\r\n     public void actionPerformed(ActionEvent e)\r\n    {\r\n        double c1x = Double.parseDouble(circle1x.getText());\r\n        double c1y = Double.parseDouble(circle1y.getText());\r\n        double c1r = Double.parseDouble(circle1r.getText());\r\n        double c2x = Double.parseDouble(circle2x.getText());\r\n        double c2y = Double.parseDouble(circle2y.getText());\r\n        double c2r = Double.parseDouble(circle2r.getText());\r\n        \r\n        x1 = (int) c1x;\r\n        x2 = (int) c2x;\r\n        y1 = (int) c1y;\r\n        y2 = (int) c2y;\r\n        r1 = (int) c1r;\r\n        r2 = (int) c2r;\r\n        \r\n        \r\n        if(e.getSource()== drawButton){\r\n               repaint();\r\n        }\r\n            \r\n        }\r\n\r\n    }\r\n\r\nclass Circles extends JPanel\r\n{\r\n    \r\n\r\n    public void paintComponent(Graphics g)\r\n    {\r\n        super.paintComponent(g);\r\n        g.setColor(Color.BLACK);\r\n        g.drawOval(Circle.x1, Circle.y1, Circle.r1, Circle.r1);\r\n        g.drawOval(Circle.x2, Circle.y2, Circle.r2, Circle.r2);\r\n    }\r\n}\r\n\r\n\r\n","title":"Passing variable to paintComponent method","body":"<p>I need some help. How does it pass a variable from class <code>Circle</code> to the <code>paintComponent</code> method because I want to make the circle change the x, y, w, h based on user input. Is there any idea to fix this? Since the problem there is an error after I press the button it doesn't execute anything.</p>\n<p>Based on this image.</p>\n<img src=\"https://i.stack.imgur.com/bg3Ds.png\">\n<pre><code>import java.awt.Color;\nimport java.awt.Graphics;\nimport java.awt.GridLayout;\nimport javax.swing.JFrame;\nimport javax.swing.JButton;\nimport javax.swing.JPanel;\nimport java.awt.event.ActionEvent;\nimport java.awt.event.ActionListener;\nimport java.awt.geom.Ellipse2D;\nimport java.text.DecimalFormat;\nimport javax.swing.JLabel;\nimport javax.swing.JTextField;\n\n\npublic class Circle extends JFrame implements ActionListener{\n    \n     private JPanel p1,p2,p3,buttonsize;\n     private JLabel title,lb1,lb2,lb3,lb4,lb5,lb6,lb7,lb8,lb9,lb10;\n     private JTextField circle1x,circle1y,circle1r,circle2x,circle2y,circle2r;\n     private JButton drawButton;\n     static int x1=30,x2=200,y1=10,y2=10,r1=10,r2=10;\n    \n    public static void main(String[]args)\n    {\n        Circle c = new Circle();\n        c.setSize(400,400);\n        c.setTitle(&quot;Project&quot;);\n        c.setVisible(true);\n        c.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n    }\n    \n    \n    public Circle()\n    {\n       \n        title = new JLabel(&quot;Two circles intersect? No&quot;);\n        p1 = new JPanel();\n        p1.add(title);\n\n        p2 = new JPanel();\n        //p2.add(new Circles());\n        \n        lb1 = new JLabel(&quot;Enter circle 1&quot;);\n        lb2 = new JLabel(&quot;Enter circle 2&quot;);\n        lb3 = new JLabel(&quot;info:&quot;);\n        lb4 = new JLabel(&quot;info:&quot;);\n        lb5 = new JLabel(&quot;Center x:&quot;);\n        lb6 = new JLabel(&quot;Center y:&quot;);\n        lb7 = new JLabel(&quot;Radius:&quot;);\n        lb8 = new JLabel(&quot;Center x:&quot;);\n        lb9 = new JLabel(&quot;Center y:&quot;);\n        lb10 = new JLabel(&quot;Radius:&quot;);\n        \n        circle1x = new JTextField(1);\n        circle1y = new JTextField(1);\n        circle1r = new JTextField(1);\n        circle2x = new JTextField(1);\n        circle2y = new JTextField(1);\n        circle2r = new JTextField(1);\n        drawButton = new JButton(&quot;Redraw Circles&quot;);\n        buttonsize = new JPanel();\n        buttonsize.setSize(50,50);\n        buttonsize.add(drawButton);\n        p3 = new JPanel();\n        p3.setLayout(new GridLayout(5,5));\n\n        p3.add(lb1);p3.add(lb3);p3.add(new JLabel(&quot;&quot;));p3.add(lb2);p3.add(lb4);\n        p3.add(lb5);p3.add(circle1x);p3.add(new JLabel(&quot;&quot;));p3.add(lb8);p3.add(circle2x);\n        p3.add(lb6);p3.add(circle1y);p3.add(new JLabel(&quot;&quot;));p3.add(lb9);p3.add(circle2y);\n        p3.add(lb7);p3.add(circle1r);p3.add(new JLabel(&quot;&quot;));p3.add(lb10);p3.add(circle2r);\n        p3.add(new JLabel(&quot;&quot;));p3.add(new JLabel(&quot;&quot;));p3.add(drawButton);p3.add(new JLabel(&quot;&quot;));p3.add(new JLabel(&quot;&quot;));\n        \n        \n        \n        setLayout(new BorderLayout());\n        //call the constructor of the panel\n        add(p1,BorderLayout.NORTH);\n        add(new Circles(),BorderLayout.CENTER);\n        add(p3,BorderLayout.SOUTH);\n        \n        \n        drawButton.addActionListener(this);\n    }\n\n     public void actionPerformed(ActionEvent e)\n    {\n        double c1x = Double.parseDouble(circle1x.getText());\n        double c1y = Double.parseDouble(circle1y.getText());\n        double c1r = Double.parseDouble(circle1r.getText());\n        double c2x = Double.parseDouble(circle2x.getText());\n        double c2y = Double.parseDouble(circle2y.getText());\n        double c2r = Double.parseDouble(circle2r.getText());\n        \n        x1 = (int) c1x;\n        x2 = (int) c2x;\n        y1 = (int) c1y;\n        y2 = (int) c2y;\n        r1 = (int) c1r;\n        r2 = (int) c2r;\n        \n        \n        if(e.getSource()== drawButton){\n               repaint();\n        }\n            \n        }\n\n    }\n\nclass Circles extends JPanel\n{\n    \n\n    public void paintComponent(Graphics g)\n    {\n        super.paintComponent(g);\n        g.setColor(Color.BLACK);\n        g.drawOval(Circle.x1, Circle.y1, Circle.r1, Circle.r1);\n        g.drawOval(Circle.x2, Circle.y2, Circle.r2, Circle.r2);\n    }\n}\n\n\n</code></pre>\n"},{"tags":["java","apache-poi","cfml"],"comments":[{"owner":{"account_id":350017,"reputation":47555,"user_id":685641,"display_name":"Gagravarr"},"score":0,"creation_date":1701976564,"post_id":77622469,"comment_id":136844450,"body_markdown":"Check your Java classpath for older versions of Apache POI? Get CF&#39;s classloader to tell you what jars it is loading POI from, in case those aren&#39;t the jars you expected?","body":"Check your Java classpath for older versions of Apache POI? Get CF&#39;s classloader to tell you what jars it is loading POI from, in case those aren&#39;t the jars you expected?"},{"owner":{"account_id":462944,"reputation":624,"user_id":4145842,"display_name":"snackboy"},"score":0,"creation_date":1701982535,"post_id":77622469,"comment_id":136845289,"body_markdown":"Thanks @Gagravarr - everything that we are using is &quot;out of the box.&quot; When I try to `dump` a class object via `createObject` I get an error message that says I can&#39;t see things that are &#39;protected&#39;. Unfortunately, I am very unfamiliar with this part of CF and I have limited access to the servers. I&#39;ll continue to research, but if you know of a reference I would gladly take a look.","body":"Thanks @Gagravarr - everything that we are using is &quot;out of the box.&quot; When I try to <code>dump</code> a class object via <code>createObject</code> I get an error message that says I can&#39;t see things that are &#39;protected&#39;. Unfortunately, I am very unfamiliar with this part of CF and I have limited access to the servers. I&#39;ll continue to research, but if you know of a reference I would gladly take a look."},{"owner":{"account_id":462944,"reputation":624,"user_id":4145842,"display_name":"snackboy"},"score":0,"creation_date":1701982900,"post_id":77622469,"comment_id":136845350,"body_markdown":"Checking to see if the Apache was updated with a newer version of Java.","body":"Checking to see if the Apache was updated with a newer version of Java."},{"owner":{"account_id":462944,"reputation":624,"user_id":4145842,"display_name":"snackboy"},"score":0,"creation_date":1702049923,"post_id":77622469,"comment_id":136853613,"body_markdown":"@Gagravarr - turns out the poi jar files were missing from the /lib folder. I don&#39;t know if they were supposed to be included with the CF2023 install or not. But we updated the /lib folder with poi files and that seemed to resolve the issue.","body":"@Gagravarr - turns out the poi jar files were missing from the /lib folder. I don&#39;t know if they were supposed to be included with the CF2023 install or not. But we updated the /lib folder with poi files and that seemed to resolve the issue."}],"answers":[{"tags":[],"owner":{"account_id":462944,"reputation":624,"user_id":4145842,"display_name":"snackboy"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1702049808,"creation_date":1702049808,"answer_id":77627662,"question_id":77622469,"body_markdown":"As it turned out, the supporting `poi jar` files were missing from the [servername]\\lib folder. The jar files were:\r\n\r\n\r\n    poi-3.17\r\n    poi-contrib\r\n    poi-ooxml-3.17 \r\n    poi-ooxml-schemas-3.17 \r\n    poi-scratchpad \r\n    poi-scratchpad-3.17\r\n\r\nI am just sure if the files were part of the initial 2018 install, and not included with 2023; or if we installed them separately in 2018 and forgot what we did. Either way, this seems to have resolved the issue. \r\n\r\nNote that there is likely a newer version of poi available.","title":"ColdFusion returning an error when using the Java MAPIMessage object","body":"<p>As it turned out, the supporting <code>poi jar</code> files were missing from the [servername]\\lib folder. The jar files were:</p>\n<pre><code>poi-3.17\npoi-contrib\npoi-ooxml-3.17 \npoi-ooxml-schemas-3.17 \npoi-scratchpad \npoi-scratchpad-3.17\n</code></pre>\n<p>I am just sure if the files were part of the initial 2018 install, and not included with 2023; or if we installed them separately in 2018 and forgot what we did. Either way, this seems to have resolved the issue.</p>\n<p>Note that there is likely a newer version of poi available.</p>\n"}],"owner":{"account_id":462944,"reputation":624,"user_id":4145842,"display_name":"snackboy"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1702049808,"creation_date":1701975128,"question_id":77622469,"body_markdown":"I have a process in ColdFusion [2023] that gets the contents of a .msg file (Microsoft email message) so that I can use said contents to create a PDF version of the message. This process has been working fine for the past two+ years. I used the code from the following accepted answer in stackoverflow: https://stackoverflow.com/questions/16473421/coldfusion-extract-information-from-a-msg-file.\r\n\r\nAs of yesterday (to the best of our knowledge as this part of the system is not used daily) the process has stopped working in that it errors out. I am using the Java POI object to gain access to the MAPIMessage object. This line...\r\n\r\n    MAPIMessage = createObject(&quot;java&quot;, &quot;org.apache.poi.hsmf.MAPIMessage&quot;);\r\n\r\n..is producing the following error:\r\n\r\n    org.apache.poi.POIReadOnlyDocument not found by poi [93]\r\n\r\nDoes anyone have any ideas of what might be happening or how to investigate the issue? I can access other objects via the POI object. For example, I am able to execute\r\n\r\n    &lt;cfset MAPIMessage = createObject(&quot;java&quot;, &quot;org.apache.poi.POIDocument&quot;)&gt;\r\n\r\nwhich, in viewing the `cfdump` returns a list of methods.\r\n\r\nOur CF Administrator is out, but once available I will check with him to see if there were any recent updates to the CF servers. This issue is happening on our dev, test, and production servers. We upgraded to CF2023 over the summer, and I am told by the end user that they have used this part of the application recently, though I am not completely ruling out the upgrade as the culprit. \r\n\r\nI am open to do this a different way but it would need to be via ColdFusion. My thought is that there should be a way to use CFPDF / DDX to convert the .msg to a PDF, but I am not seeing any documentation on how to do so. \r\n\r\n\r\n\r\n","title":"ColdFusion returning an error when using the Java MAPIMessage object","body":"<p>I have a process in ColdFusion [2023] that gets the contents of a .msg file (Microsoft email message) so that I can use said contents to create a PDF version of the message. This process has been working fine for the past two+ years. I used the code from the following accepted answer in stackoverflow: <a href=\"https://stackoverflow.com/questions/16473421/coldfusion-extract-information-from-a-msg-file\">ColdFusion: Extract information from a .msg file</a>.</p>\n<p>As of yesterday (to the best of our knowledge as this part of the system is not used daily) the process has stopped working in that it errors out. I am using the Java POI object to gain access to the MAPIMessage object. This line...</p>\n<pre><code>MAPIMessage = createObject(&quot;java&quot;, &quot;org.apache.poi.hsmf.MAPIMessage&quot;);\n</code></pre>\n<p>..is producing the following error:</p>\n<pre><code>org.apache.poi.POIReadOnlyDocument not found by poi [93]\n</code></pre>\n<p>Does anyone have any ideas of what might be happening or how to investigate the issue? I can access other objects via the POI object. For example, I am able to execute</p>\n<pre><code>&lt;cfset MAPIMessage = createObject(&quot;java&quot;, &quot;org.apache.poi.POIDocument&quot;)&gt;\n</code></pre>\n<p>which, in viewing the <code>cfdump</code> returns a list of methods.</p>\n<p>Our CF Administrator is out, but once available I will check with him to see if there were any recent updates to the CF servers. This issue is happening on our dev, test, and production servers. We upgraded to CF2023 over the summer, and I am told by the end user that they have used this part of the application recently, though I am not completely ruling out the upgrade as the culprit.</p>\n<p>I am open to do this a different way but it would need to be via ColdFusion. My thought is that there should be a way to use CFPDF / DDX to convert the .msg to a PDF, but I am not seeing any documentation on how to do so.</p>\n"},{"tags":["java","spring","spring-boot","spring-data-jpa","projection"],"answers":[{"tags":[],"owner":{"account_id":14162458,"reputation":3900,"user_id":10231374,"display_name":"Toni"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1702049663,"creation_date":1670161260,"answer_id":74677146,"question_id":74675588,"body_markdown":"I suggest using [query methods][1] where queries are derived from the method name directly without writing them manually. When interface-based projections are used, the names of their methods have to be identical to the getter methods defined in the entity class.\r\n\r\nTry to define your method as:\r\n```java\r\nList&lt;RecipeSearchProjection&gt; findAllBy();\r\n```\r\n\r\nHowever, projections can also be used with `@Query` annotation. For more details on the different ways to use JPA query projections, check out [the blog post][2].\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-data/jpa/reference/jpa/query-methods.html\r\n  [2]: https://thorben-janssen.com/spring-data-jpa-query-projections/","title":"Java Projection for nested objects using Spring Data JPA?","body":"<p>I suggest using <a href=\"https://docs.spring.io/spring-data/jpa/reference/jpa/query-methods.html\" rel=\"nofollow noreferrer\">query methods</a> where queries are derived from the method name directly without writing them manually. When interface-based projections are used, the names of their methods have to be identical to the getter methods defined in the entity class.</p>\n<p>Try to define your method as:</p>\n<pre class=\"lang-java prettyprint-override\"><code>List&lt;RecipeSearchProjection&gt; findAllBy();\n</code></pre>\n<p>However, projections can also be used with <code>@Query</code> annotation. For more details on the different ways to use JPA query projections, check out <a href=\"https://thorben-janssen.com/spring-data-jpa-query-projections/\" rel=\"nofollow noreferrer\">the blog post</a>.</p>\n"},{"tags":[],"owner":{"account_id":14509068,"reputation":95,"user_id":10480017,"display_name":"Og&#252;n"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1696559078,"creation_date":1696559078,"answer_id":77241547,"question_id":74675588,"body_markdown":"\r\nI don&#39;t recommend using interface based projections. It shows too much GC activity in the system.\r\n\r\nCheck out this answer of mine instead.\r\n\r\nhttps://stackoverflow.com/a/77241396/10480017\r\n\r\nSelect query results using interface-based projection:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/UNqrR.png\r\n\r\nBencmark:\r\n\r\n    Benchmark                              Mode  Cnt       Score       Error  Units\r\n    findAll_User_JPA                       avgt   20  313996,003 &#177; 14203,533  us/op\r\n    findUserDto1_UserDto11_EntityToDTO     avgt   20  117024,805 &#177;  4699,478  us/op\r\n    findUserDto1_UserDto1_JPQL_Query       avgt   20  115913,206 &#177;  4862,815  us/op\r\n    findUserProjection_UserProjection_JPQL avgt   20  416818,290 &#177; 11266,894  us/op\r\n\r\n\r\nIn other words, it is slower than queries made with the normal Entity class.","title":"Java Projection for nested objects using Spring Data JPA?","body":"<p>I don't recommend using interface based projections. It shows too much GC activity in the system.</p>\n<p>Check out this answer of mine instead.</p>\n<p><a href=\"https://stackoverflow.com/a/77241396/10480017\">https://stackoverflow.com/a/77241396/10480017</a></p>\n<p>Select query results using interface-based projection:</p>\n<p><a href=\"https://i.stack.imgur.com/UNqrR.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/UNqrR.png\" alt=\"enter image description here\" /></a></p>\n<p>Bencmark:</p>\n<pre><code>Benchmark                              Mode  Cnt       Score       Error  Units\nfindAll_User_JPA                       avgt   20  313996,003 ± 14203,533  us/op\nfindUserDto1_UserDto11_EntityToDTO     avgt   20  117024,805 ±  4699,478  us/op\nfindUserDto1_UserDto1_JPQL_Query       avgt   20  115913,206 ±  4862,815  us/op\nfindUserProjection_UserProjection_JPQL avgt   20  416818,290 ± 11266,894  us/op\n</code></pre>\n<p>In other words, it is slower than queries made with the normal Entity class.</p>\n"}],"owner":{"account_id":444292,"reputation":1,"user_id":836018,"accept_rate":57,"display_name":"Jack"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2842,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74677146,"answer_count":2,"score":0,"last_activity_date":1702049663,"creation_date":1670156875,"question_id":74675588,"body_markdown":"I have the following projection class and I want to retrieve data by joining Recipe and Ingredient tables from db using `@Query` in Spring data JPA:\r\n\r\n```\r\npublic interface RecipeProjection {\r\n\r\n        Long getId();\r\n        String getTitle();\r\n        \r\n        List&lt;Ingredient&gt; getIngredients();\r\n}\r\n```\r\n\r\n\r\nHowever, I cannot map the ingredients to the projection. Here is my query in the repository:\r\n\r\n```\r\n@Query(value = &quot;SELECT r.id AS id, r.title, i.name AS ingredientName &quot; +\r\n        &quot;FROM Recipe r &quot; +\r\n        &quot;LEFT JOIN RecipeIngredient ri ON r.id = ri.recipeId &quot; +\r\n        &quot;LEFT JOIN Ingredient i ON ri.ingredientId = i.id &quot;\r\n)\r\nList&lt;RecipeSearchProjection&gt; getData();\r\n```\r\n\r\nI am not sure if using a proper alias for ingredient table can solve the problem, but even I tried, I cannot retrieve its data. So, is it possible to get nested data via Java Projection? ","title":"Java Projection for nested objects using Spring Data JPA?","body":"<p>I have the following projection class and I want to retrieve data by joining Recipe and Ingredient tables from db using <code>@Query</code> in Spring data JPA:</p>\n<pre><code>public interface RecipeProjection {\n\n        Long getId();\n        String getTitle();\n        \n        List&lt;Ingredient&gt; getIngredients();\n}\n</code></pre>\n<p>However, I cannot map the ingredients to the projection. Here is my query in the repository:</p>\n<pre><code>@Query(value = &quot;SELECT r.id AS id, r.title, i.name AS ingredientName &quot; +\n        &quot;FROM Recipe r &quot; +\n        &quot;LEFT JOIN RecipeIngredient ri ON r.id = ri.recipeId &quot; +\n        &quot;LEFT JOIN Ingredient i ON ri.ingredientId = i.id &quot;\n)\nList&lt;RecipeSearchProjection&gt; getData();\n</code></pre>\n<p>I am not sure if using a proper alias for ingredient table can solve the problem, but even I tried, I cannot retrieve its data. So, is it possible to get nested data via Java Projection?</p>\n"},{"tags":["java","casting","integer","render","bufferedimage"],"comments":[{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":1,"creation_date":1702049877,"post_id":77627649,"comment_id":136853602,"body_markdown":"What is the point of this code? What are you trying to accomplish.? The BuffereidImage class already has a method that returns an Array on ints.","body":"What is the point of this code? What are you trying to accomplish.? The BuffereidImage class already has a method that returns an Array on ints."},{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1702055848,"post_id":77627649,"comment_id":136854651,"body_markdown":"The _[DataBuffer](https://docs.oracle.com/en/java/javase/21/docs/api/java.desktop/java/awt/image/DataBuffer.html)_ returned is a _[DataBufferByte](https://docs.oracle.com/en/java/javase/21/docs/api/java.desktop/java/awt/image/DataBufferByte.html)_, and not a _[DataBufferInt](https://docs.oracle.com/en/java/javase/21/docs/api/java.desktop/java/awt/image/DataBufferInt.html)_.  Is there any reason not to use a _byte_ array, over the _int_ array?","body":"The <i><a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.desktop/java/awt/image/DataBuffer.html\" rel=\"nofollow noreferrer\">DataBuffer</a></i> returned is a <i><a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.desktop/java/awt/image/DataBufferByte.html\" rel=\"nofollow noreferrer\">DataBufferByte</a></i>, and not a <i><a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.desktop/java/awt/image/DataBufferInt.html\" rel=\"nofollow noreferrer\">DataBufferInt</a></i>.  Is there any reason not to use a <i>byte</i> array, over the <i>int</i> array?"},{"owner":{"account_id":3211603,"reputation":289287,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1702055871,"post_id":77627649,"comment_id":136854655,"body_markdown":"The assignment `imageAtlas = new BufferedImage(imageWidth, imageHeight, BufferedImage.TYPE_INT_ARGB);` is pointless as you are overwriting the value with `imageAtlas = ImageIO.read(new File(&quot;Art.png&quot;));` right afterwards. So only when an `IOException` occurs, the image is guaranteed to have `TYPE_INT_ARGB`. Otherwise, it can be anything (whatever the ImageIO loader decides). Note that this also applies to the size of the `BufferedImage`; it will be whatever has been read from the PNG, entirely unrelated to the `imageWidth` and `imageHeight` variables used to initialize the unused empty image.","body":"The assignment <code>imageAtlas = new BufferedImage(imageWidth, imageHeight, BufferedImage.TYPE_INT_ARGB);</code> is pointless as you are overwriting the value with <code>imageAtlas = ImageIO.read(new File(&quot;Art.png&quot;));</code> right afterwards. So only when an <code>IOException</code> occurs, the image is guaranteed to have <code>TYPE_INT_ARGB</code>. Otherwise, it can be anything (whatever the ImageIO loader decides). Note that this also applies to the size of the <code>BufferedImage</code>; it will be whatever has been read from the PNG, entirely unrelated to the <code>imageWidth</code> and <code>imageHeight</code> variables used to initialize the unused empty image."},{"owner":{"account_id":14501977,"reputation":1,"user_id":10474884,"display_name":"Cworm"},"score":0,"creation_date":1702056256,"post_id":77627649,"comment_id":136854708,"body_markdown":"But i want to get a reference to the BufferedImage into an int[] so that i can manipulate what parts should be visible of the image before the g.DrawImage() occurs, but through the int[].","body":"But i want to get a reference to the BufferedImage into an int[] so that i can manipulate what parts should be visible of the image before the g.DrawImage() occurs, but through the int[]."},{"owner":{"account_id":3211603,"reputation":289287,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1702056617,"post_id":77627649,"comment_id":136854773,"body_markdown":"There are plenty of ways to modify a `BufferedImage`. There are also multiple ways to control the rendering, without modifying the `BufferedImage`. Why do you think that getting data as an `int[]` was the only way to achieve your goal?","body":"There are plenty of ways to modify a <code>BufferedImage</code>. There are also multiple ways to control the rendering, without modifying the <code>BufferedImage</code>. Why do you think that getting data as an <code>int[]</code> was the only way to achieve your goal?"},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1702060329,"post_id":77627649,"comment_id":136855283,"body_markdown":"“so that i can manipulate what parts should be visible of the image” Please explain this in more detail.  If you just want to draw a rectangular subsection of an image, there are much better ways to do it than altering the image itself.","body":"“so that i can manipulate what parts should be visible of the image” Please explain this in more detail.  If you just want to draw a rectangular subsection of an image, there are much better ways to do it than altering the image itself."},{"owner":{"account_id":14501977,"reputation":1,"user_id":10474884,"display_name":"Cworm"},"score":0,"creation_date":1702061492,"post_id":77627649,"comment_id":136855433,"body_markdown":"Okay, but then can you point me in a direction  where I can draw multiple sprites from an atlas with one drawImage call?","body":"Okay, but then can you point me in a direction  where I can draw multiple sprites from an atlas with one drawImage call?"},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1702075594,"post_id":77627649,"comment_id":136857174,"body_markdown":"As you can see, [the Graphics class has six drawImage methods](https://docs.oracle.com/en/java/javase/21/docs/api/java.desktop/java/awt/Graphics.html#method-summary).  I think you’ll find that the first two will do what you want:  you can specify the exact part of an image that you wish to draw.  Alternatively, you can call [getSubimage](https://docs.oracle.com/en/java/javase/21/docs/api/java.desktop/java/awt/image/BufferedImage.html#getSubimage(int,int,int,int)) on your BufferedImage to create an image that uses the same pixel storage as the larger image, rather than a copy.","body":"As you can see, <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.desktop/java/awt/Graphics.html#method-summary\" rel=\"nofollow noreferrer\">the Graphics class has six drawImage methods</a>.  I think you’ll find that the first two will do what you want:  you can specify the exact part of an image that you wish to draw.  Alternatively, you can call <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.desktop/java/awt/image/BufferedImage.html#getSubimage(int,int,int,int)\" rel=\"nofollow noreferrer\">getSubimage</a> on your BufferedImage to create an image that uses the same pixel storage as the larger image, rather than a copy."},{"owner":{"account_id":14501977,"reputation":1,"user_id":10474884,"display_name":"Cworm"},"score":0,"creation_date":1702111581,"post_id":77627649,"comment_id":136859276,"body_markdown":"Allright i got it know, I realize where the problem is","body":"Allright i got it know, I realize where the problem is"}],"owner":{"account_id":14501977,"reputation":1,"user_id":10474884,"display_name":"Cworm"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":1,"is_answered":false,"view_count":50,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1702049641,"creation_date":1702049641,"question_id":77627649,"body_markdown":"So i&#39;ve read the other posts on this topic but they doesn&#39;t help me, only suggests that you should use byte[] instead.\r\n\r\nThe problem is that im getting the exception:\r\n\r\nException in thread &quot;main&quot; java.lang.ClassCastException: class java.awt.image.DataBufferByte cannot be cast to class java.awt.image.DataBufferInt (java.awt.image.DataBufferByte and java.awt.image.DataBufferInt are in module java.desktop of loader &#39;bootstrap&#39;)\r\n\r\nWhere could the problem lie in not beeing able to cast the the bufferedImage data to BufferedDataInt??:\r\n`pixels = ((DataBufferInt)(image.getRaster().getDataBuffer())).getData();`\r\n\r\nMain class:\r\n```\r\nimport javax.imageio.ImageIO;\r\nimport javax.swing.*;\r\nimport java.awt.*;\r\nimport java.awt.event.KeyEvent;\r\nimport java.awt.image.*;\r\nimport java.io.File;\r\nimport java.io.IOException;\r\n\r\npublic class SwingMain extends Canvas{\r\n\tprivate static final long serialVersionUID = 1L;\r\n\t\r\n\tBitmap sprite;\r\n\t\r\n\tJFrame frame;\r\n\tprivate static final int FRAME_WIDTH = 1080;\r\n\tprivate static final int FRAME_HEIGHT = 960;\r\n\tprivate boolean running = false;\r\n\tprivate static final int imageWidth = 256;\r\n\tprivate static final int imageHeight= 256;\r\n\tprivate static int tick;\r\n\tBufferedImage imageAtlas;\r\n\tBitmap bitmap;\r\n\tInputHandler inputHandler = new InputHandler(this);\r\n\tstatic int xp = 0;\r\n\tstatic int yp = 0;\r\n\t\r\n\tSwingMain()\r\n\t{\r\n\t\t// Frame\r\n\t\tframe = new JFrame();\r\n\t\tframe.setSize(FRAME_WIDTH, FRAME_HEIGHT);\r\n\t\tframe.setVisible(true);\t\r\n\t\tframe.setResizable(false);\r\n\t\tframe.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n\t\t\r\n\t\t// Must be set for createBufferStrategy to work\r\n\t\tframe.add(this); \r\n\t\t\r\n\t\t// Sets the canvas focus so it responds to keyboardEvents directly on startup\r\n\t\tthis.requestFocusInWindow(); \r\n\t\t\r\n\t\timageAtlas = new BufferedImage(imageWidth, imageHeight, BufferedImage.TYPE_INT_ARGB);\r\n\t\t//Bitmap bitmap = new Bitmap(imageWidth, imageHeight);\r\n\t\t//imageAtlas.setRGB(0, 0, bitmap.w, bitmap.h, bitmap.pixels, 0, bitmap.w);\r\n\t\ttry\r\n\t\t{\r\n\t\t\timageAtlas = ImageIO.read(new File(&quot;Art.png&quot;));\r\n\t\t}\r\n\t\tcatch(IOException e)\r\n\t\t{\r\n\t\t\tSystem.out.println(&quot;FILE FAILED&quot;);\r\n\t\t}\r\n\t\t\r\n\t\tbitmap = new Bitmap(imageAtlas);\r\n\t\t\r\n\t\tint width = imageAtlas.getWidth();\r\n\t\tint height= imageAtlas.getHeight();\t\r\n\t\t\r\n\t\trunning = true;\r\n\t\t\r\n\t}\r\n```\r\n\r\nBitmap class\r\n\r\n```\r\nimport java.awt.image.*;\r\n\r\npublic class Bitmap {\r\n\tpublic int[] pixels;\r\n\tpublic int w, h;\r\n\t\r\n\tBitmap(int w, int h, int[] pixels)\r\n\t{\r\n\t\tthis.w = w;\r\n\t\tthis.h = h;\r\n\t\tthis.pixels= pixels; \r\n\t}\r\n\t\r\n\tBitmap(BufferedImage image)\r\n\t{\r\n\t\t\r\n\t\tthis.w = image.getWidth();\r\n\t\tthis.h = image.getHeight();\r\n\t\t\r\n\t\tpixels = new int[w*h];\r\n\t\t\r\n\t\t// Cast the the DataBuffer in the image.getRaster() to a DataBufferInt type and extract the getData() from that. \r\n\t\tSystem.out.println(&quot;Datatype: &quot; + image.getRaster().getDataBuffer().getDataType());\r\n\t\tpixels = ((DataBufferInt)(image.getRaster().getDataBuffer())).getData();\r\n\t\t//image.getRGB(0, 0, w, h, pixels, 0, w);\t\t\r\n\t}```\r\n\r\n\r\n","title":"Getting the reference for BufferedImage to and int[] problem","body":"<p>So i've read the other posts on this topic but they doesn't help me, only suggests that you should use byte[] instead.</p>\n<p>The problem is that im getting the exception:</p>\n<p>Exception in thread &quot;main&quot; java.lang.ClassCastException: class java.awt.image.DataBufferByte cannot be cast to class java.awt.image.DataBufferInt (java.awt.image.DataBufferByte and java.awt.image.DataBufferInt are in module java.desktop of loader 'bootstrap')</p>\n<p>Where could the problem lie in not beeing able to cast the the bufferedImage data to BufferedDataInt??:\n<code>pixels = ((DataBufferInt)(image.getRaster().getDataBuffer())).getData();</code></p>\n<p>Main class:</p>\n<pre><code>import javax.imageio.ImageIO;\nimport javax.swing.*;\nimport java.awt.*;\nimport java.awt.event.KeyEvent;\nimport java.awt.image.*;\nimport java.io.File;\nimport java.io.IOException;\n\npublic class SwingMain extends Canvas{\n    private static final long serialVersionUID = 1L;\n    \n    Bitmap sprite;\n    \n    JFrame frame;\n    private static final int FRAME_WIDTH = 1080;\n    private static final int FRAME_HEIGHT = 960;\n    private boolean running = false;\n    private static final int imageWidth = 256;\n    private static final int imageHeight= 256;\n    private static int tick;\n    BufferedImage imageAtlas;\n    Bitmap bitmap;\n    InputHandler inputHandler = new InputHandler(this);\n    static int xp = 0;\n    static int yp = 0;\n    \n    SwingMain()\n    {\n        // Frame\n        frame = new JFrame();\n        frame.setSize(FRAME_WIDTH, FRAME_HEIGHT);\n        frame.setVisible(true); \n        frame.setResizable(false);\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        \n        // Must be set for createBufferStrategy to work\n        frame.add(this); \n        \n        // Sets the canvas focus so it responds to keyboardEvents directly on startup\n        this.requestFocusInWindow(); \n        \n        imageAtlas = new BufferedImage(imageWidth, imageHeight, BufferedImage.TYPE_INT_ARGB);\n        //Bitmap bitmap = new Bitmap(imageWidth, imageHeight);\n        //imageAtlas.setRGB(0, 0, bitmap.w, bitmap.h, bitmap.pixels, 0, bitmap.w);\n        try\n        {\n            imageAtlas = ImageIO.read(new File(&quot;Art.png&quot;));\n        }\n        catch(IOException e)\n        {\n            System.out.println(&quot;FILE FAILED&quot;);\n        }\n        \n        bitmap = new Bitmap(imageAtlas);\n        \n        int width = imageAtlas.getWidth();\n        int height= imageAtlas.getHeight(); \n        \n        running = true;\n        \n    }\n</code></pre>\n<p>Bitmap class</p>\n<pre><code>import java.awt.image.*;\n\npublic class Bitmap {\n    public int[] pixels;\n    public int w, h;\n    \n    Bitmap(int w, int h, int[] pixels)\n    {\n        this.w = w;\n        this.h = h;\n        this.pixels= pixels; \n    }\n    \n    Bitmap(BufferedImage image)\n    {\n        \n        this.w = image.getWidth();\n        this.h = image.getHeight();\n        \n        pixels = new int[w*h];\n        \n        // Cast the the DataBuffer in the image.getRaster() to a DataBufferInt type and extract the getData() from that. \n        System.out.println(&quot;Datatype: &quot; + image.getRaster().getDataBuffer().getDataType());\n        pixels = ((DataBufferInt)(image.getRaster().getDataBuffer())).getData();\n        //image.getRGB(0, 0, w, h, pixels, 0, w);       \n    }```\n\n\n</code></pre>\n"},{"tags":["java","spring-boot","unit-testing","mockmvc","multipartfile"],"owner":{"account_id":14528548,"reputation":79,"user_id":10494078,"display_name":"Miltos Dimitriadis"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":1,"is_answered":false,"view_count":12,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":0,"score":-1,"last_activity_date":1702049550,"creation_date":1702049550,"question_id":77627640,"body_markdown":"I have the following REST endpoint : \r\n\r\n    @PostMapping\r\n    public ResponseEntity&lt;SuggestionResponse&gt; createSuggestion(@RequestPart(&quot;data&quot;) @Valid final CreateSuggestionRequest suggestionRequest,\r\n            @RequestPart(required = false, value = &quot;files&quot;) final MultipartFile[] files,\r\n            @RequestPart(required = false, value = &quot;titles&quot;) final String[] filesTitles)\r\n\r\nI have managed it to test sucessfully end to end with Postman, but I am getting a hard time with the unit test.  \r\nHere is my unit test : \r\n\r\n    @Test\r\n    void createSuggestion_shouldReturnResponse() throws Exception {\r\n\r\n        final var request = CreateSuggestionRequest.builder()\r\n                .title(&quot;title1&quot;)\r\n                .subject(&quot;subject1&quot;)\r\n                .build();\r\n\r\n        final var inputJson = objectMapper.writeValueAsString(request);\r\n\r\n        final var file1 = new MockMultipartFile(&quot;file1&quot;, &quot;hello1.txt&quot;, MediaType.TEXT_PLAIN_VALUE, &quot;&quot;.getBytes());\r\n        final var file2 = new MockMultipartFile(&quot;file2&quot;, &quot;hello2.txt&quot;, MediaType.TEXT_PLAIN_VALUE, &quot;&quot;.getBytes());\r\n\r\n        final var titles = &quot;{title1, title2}&quot;;\r\n\r\n        mockMvc.perform(MockMvcRequestBuilders.multipart(&quot;/suggestion&quot;)\r\n                        .file(file1)\r\n                        .file(file2)\r\n                        .content(inputJson)\r\n                        .content(titles)\r\n                        .contentType(MediaType.MULTIPART_FORM_DATA))\r\n                .andExpect(MockMvcResultMatchers.status().isCreated());\r\n    }\r\n\r\nI keep receiving the following Exception. Any ideas?  \r\n\r\n    Resolved Exception:\r\n             Type = org.springframework.web.multipart.support.MissingServletRequestPartException\r\n\r\n    MockHttpServletResponse:\r\n               Status = 400\r\n        Error message = Required request part &#39;data&#39; is not present","title":"Spring Boot - MockMvc Unit test POST endpoint with multiple RequestParts and MultiPartFiles","body":"<p>I have the following REST endpoint :</p>\n<pre><code>@PostMapping\npublic ResponseEntity&lt;SuggestionResponse&gt; createSuggestion(@RequestPart(&quot;data&quot;) @Valid final CreateSuggestionRequest suggestionRequest,\n        @RequestPart(required = false, value = &quot;files&quot;) final MultipartFile[] files,\n        @RequestPart(required = false, value = &quot;titles&quot;) final String[] filesTitles)\n</code></pre>\n<p>I have managed it to test sucessfully end to end with Postman, but I am getting a hard time with the unit test.<br />\nHere is my unit test :</p>\n<pre><code>@Test\nvoid createSuggestion_shouldReturnResponse() throws Exception {\n\n    final var request = CreateSuggestionRequest.builder()\n            .title(&quot;title1&quot;)\n            .subject(&quot;subject1&quot;)\n            .build();\n\n    final var inputJson = objectMapper.writeValueAsString(request);\n\n    final var file1 = new MockMultipartFile(&quot;file1&quot;, &quot;hello1.txt&quot;, MediaType.TEXT_PLAIN_VALUE, &quot;&quot;.getBytes());\n    final var file2 = new MockMultipartFile(&quot;file2&quot;, &quot;hello2.txt&quot;, MediaType.TEXT_PLAIN_VALUE, &quot;&quot;.getBytes());\n\n    final var titles = &quot;{title1, title2}&quot;;\n\n    mockMvc.perform(MockMvcRequestBuilders.multipart(&quot;/suggestion&quot;)\n                    .file(file1)\n                    .file(file2)\n                    .content(inputJson)\n                    .content(titles)\n                    .contentType(MediaType.MULTIPART_FORM_DATA))\n            .andExpect(MockMvcResultMatchers.status().isCreated());\n}\n</code></pre>\n<p>I keep receiving the following Exception. Any ideas?</p>\n<pre><code>Resolved Exception:\n         Type = org.springframework.web.multipart.support.MissingServletRequestPartException\n\nMockHttpServletResponse:\n           Status = 400\n    Error message = Required request part 'data' is not present\n</code></pre>\n"},{"tags":["java","excel-formula","apache-poi","excel-2007"],"answers":[{"tags":[],"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1702049472,"creation_date":1702042323,"answer_id":77626931,"question_id":77626535,"body_markdown":"The Excel function `IFS` was introduced after publishing the Office Open XML file system in 2007. Thus not all spreadsheet applications will support this function. To mark this, such functions are prefixed by `_xlfn.` in file storage. That is in `/xl/worksheets/sheet*.xml` using Office Open XML `*.xlsx`.\r\n\r\nBecause of that prefix spreadsheet applications can detect a function that is not supported in the version of Open Office XML that they are currently running. See: [Issue: An _xlfn. prefix is displayed in front of a formula](https://support.microsoft.com/en-us/office/issue-an-xlfn-prefix-is-displayed-in-front-of-a-formula-882f1ef7-68fb-4fcd-8d54-9fbb77fd5025)\r\n\r\nSince Apache POI directly writes into file storage `/xl/worksheets/sheet*.xml`, that prefix must be set using `Cell.setCellFormula`. Wrong is `setCellFormula(&quot;...IFS(...&quot;)`. Correct is `setCellFormula(&quot;..._xlfn.IFS(...&quot;)`.\r\n\r\nAditional your code should set numeric values for numbers and not strings. Wrong: `...new Object[] { &quot;A&quot;, &quot;High&quot;, &quot;css&quot;, &quot;1&quot; }, new Object[] { &quot;A&quot;, &quot;Low&quot;, &quot;txt&quot;, &quot;0.4&quot; },...`. Correct `...new Object[] { &quot;A&quot;, &quot;High&quot;, &quot;css&quot;, 1 }, new Object[] { &quot;A&quot;, &quot;Low&quot;, &quot;txt&quot;, 0.4 },...`.\r\n\r\nComplete example using your code sample:\r\n\r\n    import java.awt.Desktop;\r\n    import java.io.File;\r\n    import java.io.FileOutputStream;\r\n    \r\n    import org.apache.poi.ss.usermodel.Cell;\r\n    import org.apache.poi.ss.usermodel.Row;\r\n    import org.apache.poi.ss.usermodel.Sheet;\r\n    import org.apache.poi.ss.usermodel.Workbook;\r\n    import org.apache.poi.xssf.usermodel.XSSFWorkbook;\r\n    \r\n    public class CreateExcelFormulaIFS {\r\n    \r\n     public static void main(String[] args) throws Exception {\r\n    \r\n      try (Workbook workbook = new XSSFWorkbook();\r\n    \t   FileOutputStream fileout = new FileOutputStream(&quot;./IFSFormula.xlsx&quot;)) {\r\n    \r\n       Sheet dataSheet = workbook.createSheet(&quot;Data&quot;);\r\n    \r\n       Row row;\r\n       Cell cell;\r\n    \t//String strFormula = &quot;IFERROR(IFS(%s=\\&quot;css\\&quot;, IFS(%s&gt;0.5, \\&quot;High\\&quot;, %s&gt;0.3, \\&quot;Medium\\&quot;, %s&gt;0.2, \\&quot;Low\\&quot;, %s&gt;0, \\&quot;Very Low\\&quot;, %s=0, \\&quot;None\\&quot;)),IFS(%s&gt;0.5, \\&quot;High\\&quot;, %s&gt;0.3, \\&quot;Medium\\&quot;, %s&gt;0.2, \\&quot;Low\\&quot;, %s&gt;0, \\&quot;Very Low\\&quot;, %s=0, \\&quot;None\\&quot;))\\r\\n&quot;\r\n    \t//        + &quot;&quot;;\r\n       String strFormula = &quot;IFERROR(_xlfn.IFS(%s=\\&quot;css\\&quot;, _xlfn.IFS(%s&gt;0.5, \\&quot;High\\&quot;, %s&gt;0.3, \\&quot;Medium\\&quot;, %s&gt;0.2, \\&quot;Low\\&quot;, %s&gt;0, \\&quot;Very Low\\&quot;, %s=0, \\&quot;None\\&quot;)),_xlfn.IFS(%s&gt;0.5, \\&quot;High\\&quot;, %s&gt;0.3, \\&quot;Medium\\&quot;, %s&gt;0.2, \\&quot;Low\\&quot;, %s&gt;0, \\&quot;Very Low\\&quot;, %s=0, \\&quot;None\\&quot;))&quot;;\r\n       Object[][] data = new Object[][] {\r\n    \tnew Object[] { &quot;Header&quot;, &quot;Complexity&quot;, &quot;Type of File&quot;, &quot;Change&quot;, &quot;Upgrade Effort&quot; },\r\n        new Object[] { &quot;A&quot;, &quot;High&quot;, &quot;css&quot;, 1 },\r\n    \tnew Object[] { &quot;A&quot;, &quot;Low&quot;, &quot;txt&quot;, 0.4 },\r\n    \tnew Object[] { &quot;C&quot;, &quot;Moderate&quot;, &quot;css&quot;, 0.4 },\r\n    \tnew Object[] { &quot;D&quot;, &quot;High&quot;, &quot;txt&quot;, 0.7 },\r\n    \tnew Object[] { &quot;A&quot;, &quot;High&quot;, &quot;css&quot;, 0.8 },\r\n        new Object[] { &quot;B&quot;, &quot;Low&quot;, &quot;css&quot;, 0.2 },\r\n    \tnew Object[] { &quot;G&quot;, &quot;Low&quot;, &quot;css&quot;, 0.1 },\r\n    \tnew Object[] { &quot;G&quot;, &quot;High&quot;, &quot;properties&quot;, 0.4 },\r\n    \tnew Object[] { &quot;G&quot;, &quot;High&quot;, &quot;css&quot;, 1 },\r\n    \tnew Object[] { &quot;G&quot;, &quot;High&quot;, &quot;css&quot;, 0.2 },\r\n    \tnew Object[] { &quot;G&quot;, &quot;Low&quot;, &quot;jsp&quot;, 0.8 },\r\n        new Object[] { &quot;H&quot;, &quot;Low&quot;, &quot;jsp&quot;, 0.6 },\r\n        new Object[] { &quot;H&quot;, &quot;Low&quot;, &quot;html&quot;, 0.4 }\r\n       };\r\n       for (int r = 0; r &lt; data.length; r++) {\r\n    \trow = dataSheet.createRow(r);\r\n    \tObject[] rowData = data[r];\r\n    \tfor (int c = 0; c &lt; rowData.length; c++) {\r\n    \t cell = row.createCell(c);\r\n    \t if (rowData[c] instanceof String) {\r\n    \t  cell.setCellValue((String) rowData[c]);\r\n    \t } else if (rowData[c] instanceof Number) {\r\n    \t  cell.setCellValue(((Number) rowData[c]).doubleValue());\r\n    \t }\r\n    \t}\r\n    \tif (rowData.length &lt; 5) {\r\n    \t cell = row.createCell(4);\r\n    \t String fileTypeCol = &quot;C&quot; + (r + 1);\r\n    \t String changeCol = &quot;D&quot; + (r + 1);\r\n    \t String formula = String.format(strFormula, fileTypeCol, changeCol, changeCol,\r\n    \t\t\t\t\tchangeCol, changeCol, changeCol, changeCol, changeCol, changeCol,\r\n    \t\t\t\t\tchangeCol, changeCol);\r\n    \t System.out.println(&quot;Formula ====== &quot; + formula);\r\n    \t cell.setCellFormula(formula);\r\n    \t}\r\n       }\r\n    \r\n       workbook.write(fileout);\r\n       fileout.close();\r\n       Desktop.getDesktop().open(new File(&quot;./IFSFormula.xlsx&quot;));\r\n    \r\n      }\r\n     }\r\n    }","title":"Formula cell in excel shows #NAME?","body":"<p>The Excel function <code>IFS</code> was introduced after publishing the Office Open XML file system in 2007. Thus not all spreadsheet applications will support this function. To mark this, such functions are prefixed by <code>_xlfn.</code> in file storage. That is in <code>/xl/worksheets/sheet*.xml</code> using Office Open XML <code>*.xlsx</code>.</p>\n<p>Because of that prefix spreadsheet applications can detect a function that is not supported in the version of Open Office XML that they are currently running. See: <a href=\"https://support.microsoft.com/en-us/office/issue-an-xlfn-prefix-is-displayed-in-front-of-a-formula-882f1ef7-68fb-4fcd-8d54-9fbb77fd5025\" rel=\"nofollow noreferrer\">Issue: An _xlfn. prefix is displayed in front of a formula</a></p>\n<p>Since Apache POI directly writes into file storage <code>/xl/worksheets/sheet*.xml</code>, that prefix must be set using <code>Cell.setCellFormula</code>. Wrong is <code>setCellFormula(&quot;...IFS(...&quot;)</code>. Correct is <code>setCellFormula(&quot;..._xlfn.IFS(...&quot;)</code>.</p>\n<p>Aditional your code should set numeric values for numbers and not strings. Wrong: <code>...new Object[] { &quot;A&quot;, &quot;High&quot;, &quot;css&quot;, &quot;1&quot; }, new Object[] { &quot;A&quot;, &quot;Low&quot;, &quot;txt&quot;, &quot;0.4&quot; },...</code>. Correct <code>...new Object[] { &quot;A&quot;, &quot;High&quot;, &quot;css&quot;, 1 }, new Object[] { &quot;A&quot;, &quot;Low&quot;, &quot;txt&quot;, 0.4 },...</code>.</p>\n<p>Complete example using your code sample:</p>\n<pre><code>import java.awt.Desktop;\nimport java.io.File;\nimport java.io.FileOutputStream;\n\nimport org.apache.poi.ss.usermodel.Cell;\nimport org.apache.poi.ss.usermodel.Row;\nimport org.apache.poi.ss.usermodel.Sheet;\nimport org.apache.poi.ss.usermodel.Workbook;\nimport org.apache.poi.xssf.usermodel.XSSFWorkbook;\n\npublic class CreateExcelFormulaIFS {\n\n public static void main(String[] args) throws Exception {\n\n  try (Workbook workbook = new XSSFWorkbook();\n       FileOutputStream fileout = new FileOutputStream(&quot;./IFSFormula.xlsx&quot;)) {\n\n   Sheet dataSheet = workbook.createSheet(&quot;Data&quot;);\n\n   Row row;\n   Cell cell;\n    //String strFormula = &quot;IFERROR(IFS(%s=\\&quot;css\\&quot;, IFS(%s&gt;0.5, \\&quot;High\\&quot;, %s&gt;0.3, \\&quot;Medium\\&quot;, %s&gt;0.2, \\&quot;Low\\&quot;, %s&gt;0, \\&quot;Very Low\\&quot;, %s=0, \\&quot;None\\&quot;)),IFS(%s&gt;0.5, \\&quot;High\\&quot;, %s&gt;0.3, \\&quot;Medium\\&quot;, %s&gt;0.2, \\&quot;Low\\&quot;, %s&gt;0, \\&quot;Very Low\\&quot;, %s=0, \\&quot;None\\&quot;))\\r\\n&quot;\n    //        + &quot;&quot;;\n   String strFormula = &quot;IFERROR(_xlfn.IFS(%s=\\&quot;css\\&quot;, _xlfn.IFS(%s&gt;0.5, \\&quot;High\\&quot;, %s&gt;0.3, \\&quot;Medium\\&quot;, %s&gt;0.2, \\&quot;Low\\&quot;, %s&gt;0, \\&quot;Very Low\\&quot;, %s=0, \\&quot;None\\&quot;)),_xlfn.IFS(%s&gt;0.5, \\&quot;High\\&quot;, %s&gt;0.3, \\&quot;Medium\\&quot;, %s&gt;0.2, \\&quot;Low\\&quot;, %s&gt;0, \\&quot;Very Low\\&quot;, %s=0, \\&quot;None\\&quot;))&quot;;\n   Object[][] data = new Object[][] {\n    new Object[] { &quot;Header&quot;, &quot;Complexity&quot;, &quot;Type of File&quot;, &quot;Change&quot;, &quot;Upgrade Effort&quot; },\n    new Object[] { &quot;A&quot;, &quot;High&quot;, &quot;css&quot;, 1 },\n    new Object[] { &quot;A&quot;, &quot;Low&quot;, &quot;txt&quot;, 0.4 },\n    new Object[] { &quot;C&quot;, &quot;Moderate&quot;, &quot;css&quot;, 0.4 },\n    new Object[] { &quot;D&quot;, &quot;High&quot;, &quot;txt&quot;, 0.7 },\n    new Object[] { &quot;A&quot;, &quot;High&quot;, &quot;css&quot;, 0.8 },\n    new Object[] { &quot;B&quot;, &quot;Low&quot;, &quot;css&quot;, 0.2 },\n    new Object[] { &quot;G&quot;, &quot;Low&quot;, &quot;css&quot;, 0.1 },\n    new Object[] { &quot;G&quot;, &quot;High&quot;, &quot;properties&quot;, 0.4 },\n    new Object[] { &quot;G&quot;, &quot;High&quot;, &quot;css&quot;, 1 },\n    new Object[] { &quot;G&quot;, &quot;High&quot;, &quot;css&quot;, 0.2 },\n    new Object[] { &quot;G&quot;, &quot;Low&quot;, &quot;jsp&quot;, 0.8 },\n    new Object[] { &quot;H&quot;, &quot;Low&quot;, &quot;jsp&quot;, 0.6 },\n    new Object[] { &quot;H&quot;, &quot;Low&quot;, &quot;html&quot;, 0.4 }\n   };\n   for (int r = 0; r &lt; data.length; r++) {\n    row = dataSheet.createRow(r);\n    Object[] rowData = data[r];\n    for (int c = 0; c &lt; rowData.length; c++) {\n     cell = row.createCell(c);\n     if (rowData[c] instanceof String) {\n      cell.setCellValue((String) rowData[c]);\n     } else if (rowData[c] instanceof Number) {\n      cell.setCellValue(((Number) rowData[c]).doubleValue());\n     }\n    }\n    if (rowData.length &lt; 5) {\n     cell = row.createCell(4);\n     String fileTypeCol = &quot;C&quot; + (r + 1);\n     String changeCol = &quot;D&quot; + (r + 1);\n     String formula = String.format(strFormula, fileTypeCol, changeCol, changeCol,\n                    changeCol, changeCol, changeCol, changeCol, changeCol, changeCol,\n                    changeCol, changeCol);\n     System.out.println(&quot;Formula ====== &quot; + formula);\n     cell.setCellFormula(formula);\n    }\n   }\n\n   workbook.write(fileout);\n   fileout.close();\n   Desktop.getDesktop().open(new File(&quot;./IFSFormula.xlsx&quot;));\n\n  }\n }\n}\n</code></pre>\n"}],"owner":{"account_id":11616907,"reputation":29,"user_id":8509309,"display_name":"pranavs"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77626931,"answer_count":1,"score":1,"last_activity_date":1702049472,"creation_date":1702038494,"question_id":77626535,"body_markdown":"I am attempting to add an excel formula to calculate Upgrade Effort based on certain conditions that will refer to other columns in the same excel sheet. \r\n\r\nBelow is my formula \r\n\r\n```lang-excel\r\n=@IFERROR(@IFS(C3=&quot;css&quot;, IFS(D3&gt;0.5, &quot;High&quot;,\r\n D3&gt;0.3, &quot;Medium&quot;, D3&gt;0.2, &quot;Low&quot;,D3&gt;0,&quot;Very Low&quot;, \r\n D3=0, &quot;None&quot;)),\r\n IFS(D3&gt;0.5,&quot;High&quot;,D3&gt;0.3,&quot;Medium&quot;,D3&gt;0.2,&quot;Low&quot;,D3&gt;0,\r\n &quot;Very Low&quot;,D3=0,&quot;None&quot;))\r\n```\r\nThe value of a formula cell is not evaluated. When you select a cell and press enter, a popup warning appears, and the formula is correctly evaluated.\r\n\r\nSample code\r\n\r\n```\r\n\r\nimport java.awt.Desktop;\r\nimport java.io.File;\r\nimport java.io.FileOutputStream;\r\n\r\nimport org.apache.poi.ss.usermodel.Cell;\r\nimport org.apache.poi.ss.usermodel.Row;\r\nimport org.apache.poi.ss.usermodel.Sheet;\r\nimport org.apache.poi.ss.usermodel.Workbook;\r\nimport org.apache.poi.xssf.usermodel.XSSFFormulaEvaluator;\r\nimport org.apache.poi.xssf.usermodel.XSSFWorkbook;\r\n\r\npublic class CreateExcekFormula {\r\n\r\n    public static void main(String[] args) throws Exception {\r\n\r\n        try (Workbook workbook = new XSSFWorkbook();\r\n                FileOutputStream fileout = new FileOutputStream(&quot;ItemFilter.xlsx&quot;)) {\r\n\r\n            Sheet dataSheet = workbook.createSheet(&quot;Data&quot;);\r\n\r\n            Row row;\r\n            Cell cell;\r\n            String strFormula = &quot;IFERROR(IFS(%s=\\&quot;css\\&quot;, IFS(%s&gt;0.5, \\&quot;High\\&quot;, %s&gt;0.3, \\&quot;Medium\\&quot;, %s&gt;0.2, \\&quot;Low\\&quot;, %s&gt;0, \\&quot;Very Low\\&quot;, %s=0, \\&quot;None\\&quot;)),IFS(%s&gt;0.5, \\&quot;High\\&quot;, %s&gt;0.3, \\&quot;Medium\\&quot;, %s&gt;0.2, \\&quot;Low\\&quot;, %s&gt;0, \\&quot;Very Low\\&quot;, %s=0, \\&quot;None\\&quot;))\\r\\n&quot;\r\n                    + &quot;&quot;;\r\n            Object[][] data = new Object[][]\r\n                { new Object[]\r\n                            { &quot;Header&quot;, &quot;Complexity&quot;, &quot;Type of File&quot;, &quot;Change&quot;, &quot;Upgrade Effort&quot; },\r\n                  new Object[]\r\n                  { &quot;A&quot;, &quot;High&quot;, &quot;css&quot;, &quot;1&quot; },\r\n                  new Object[]\r\n                  { &quot;A&quot;, &quot;Low&quot;, &quot;txt&quot;, &quot;0.4&quot; },\r\n                  new Object[]\r\n                  { &quot;C&quot;, &quot;Moderate&quot;, &quot;css&quot;, &quot;0.4&quot; },\r\n                  new Object[]\r\n                  { &quot;D&quot;, &quot;High&quot;, &quot;txt&quot;, &quot;0.7&quot; },\r\n                  new Object[]\r\n                  { &quot;A&quot;, &quot;High&quot;, &quot;css&quot;, &quot;0.8&quot; },\r\n                  new Object[]\r\n                  { &quot;B&quot;, &quot;Low&quot;, &quot;css&quot;, &quot;0.2&quot; },\r\n                  new Object[]\r\n                  { &quot;G&quot;, &quot;Low&quot;, &quot;css&quot;, &quot;0.1&quot; },\r\n                  new Object[]\r\n                  { &quot;G&quot;, &quot;High&quot;, &quot;properties&quot;, &quot;0.4&quot; },\r\n                  new Object[]\r\n                  { &quot;G&quot;, &quot;High&quot;, &quot;css&quot;, &quot;1&quot; },\r\n                  new Object[]\r\n                  { &quot;G&quot;, &quot;High&quot;, &quot;css&quot;, &quot;0.2&quot; },\r\n                  new Object[]\r\n                  { &quot;G&quot;, &quot;Low&quot;, &quot;jsp&quot;, &quot;0.8&quot; },\r\n                  new Object[]\r\n                  { &quot;H&quot;, &quot;Low&quot;, &quot;jsp&quot;, &quot;0.6&quot; },\r\n                  new Object[]\r\n                  { &quot;H&quot;, &quot;Low&quot;, &quot;html&quot;, &quot;0.4&quot; } };\r\n            for (int r = 0; r &lt; data.length; r++) {\r\n                row = dataSheet.createRow(r);\r\n                Object[] rowData = data[r];\r\n                for (int c = 0; c &lt; rowData.length; c++) {\r\n                    cell = row.createCell(c);\r\n                    if (rowData[c] instanceof String) {\r\n                        cell.setCellValue((String) rowData[c]);\r\n                    } else if (rowData[c] instanceof Number) {\r\n                        cell.setCellValue(((Number) rowData[c]).doubleValue());\r\n                    }\r\n                }\r\n                if (rowData.length &lt; 5) {\r\n                    cell = row.createCell(4);\r\n                    String fileTypeCol = &quot;C&quot; + (r + 1);\r\n                    String changeCol = &quot;D&quot; + (r + 1);\r\n                    String formula = String.format(strFormula, fileTypeCol, changeCol, changeCol,\r\n                            changeCol, changeCol, changeCol, changeCol, changeCol, changeCol,\r\n                            changeCol, changeCol);\r\n                    System.out.println(&quot;Formula ====== &quot; + formula);\r\n                    cell.setCellFormula(formula);\r\n                }\r\n            }\r\n\r\n            XSSFFormulaEvaluator.evaluateAllFormulaCells(workbook);\r\n\r\n            workbook.write(fileout);\r\n            fileout.close();\r\n            Desktop.getDesktop().open(new File(&quot;ItemFilter.xlsx&quot;));\r\n\r\n        }\r\n\r\n    }\r\n}\r\n```\r\n\r\nReceived outcome:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/JPOUp.png","title":"Formula cell in excel shows #NAME?","body":"<p>I am attempting to add an excel formula to calculate Upgrade Effort based on certain conditions that will refer to other columns in the same excel sheet.</p>\n<p>Below is my formula</p>\n<pre class=\"lang-excel prettyprint-override\"><code>=@IFERROR(@IFS(C3=&quot;css&quot;, IFS(D3&gt;0.5, &quot;High&quot;,\n D3&gt;0.3, &quot;Medium&quot;, D3&gt;0.2, &quot;Low&quot;,D3&gt;0,&quot;Very Low&quot;, \n D3=0, &quot;None&quot;)),\n IFS(D3&gt;0.5,&quot;High&quot;,D3&gt;0.3,&quot;Medium&quot;,D3&gt;0.2,&quot;Low&quot;,D3&gt;0,\n &quot;Very Low&quot;,D3=0,&quot;None&quot;))\n</code></pre>\n<p>The value of a formula cell is not evaluated. When you select a cell and press enter, a popup warning appears, and the formula is correctly evaluated.</p>\n<p>Sample code</p>\n<pre><code>\nimport java.awt.Desktop;\nimport java.io.File;\nimport java.io.FileOutputStream;\n\nimport org.apache.poi.ss.usermodel.Cell;\nimport org.apache.poi.ss.usermodel.Row;\nimport org.apache.poi.ss.usermodel.Sheet;\nimport org.apache.poi.ss.usermodel.Workbook;\nimport org.apache.poi.xssf.usermodel.XSSFFormulaEvaluator;\nimport org.apache.poi.xssf.usermodel.XSSFWorkbook;\n\npublic class CreateExcekFormula {\n\n    public static void main(String[] args) throws Exception {\n\n        try (Workbook workbook = new XSSFWorkbook();\n                FileOutputStream fileout = new FileOutputStream(&quot;ItemFilter.xlsx&quot;)) {\n\n            Sheet dataSheet = workbook.createSheet(&quot;Data&quot;);\n\n            Row row;\n            Cell cell;\n            String strFormula = &quot;IFERROR(IFS(%s=\\&quot;css\\&quot;, IFS(%s&gt;0.5, \\&quot;High\\&quot;, %s&gt;0.3, \\&quot;Medium\\&quot;, %s&gt;0.2, \\&quot;Low\\&quot;, %s&gt;0, \\&quot;Very Low\\&quot;, %s=0, \\&quot;None\\&quot;)),IFS(%s&gt;0.5, \\&quot;High\\&quot;, %s&gt;0.3, \\&quot;Medium\\&quot;, %s&gt;0.2, \\&quot;Low\\&quot;, %s&gt;0, \\&quot;Very Low\\&quot;, %s=0, \\&quot;None\\&quot;))\\r\\n&quot;\n                    + &quot;&quot;;\n            Object[][] data = new Object[][]\n                { new Object[]\n                            { &quot;Header&quot;, &quot;Complexity&quot;, &quot;Type of File&quot;, &quot;Change&quot;, &quot;Upgrade Effort&quot; },\n                  new Object[]\n                  { &quot;A&quot;, &quot;High&quot;, &quot;css&quot;, &quot;1&quot; },\n                  new Object[]\n                  { &quot;A&quot;, &quot;Low&quot;, &quot;txt&quot;, &quot;0.4&quot; },\n                  new Object[]\n                  { &quot;C&quot;, &quot;Moderate&quot;, &quot;css&quot;, &quot;0.4&quot; },\n                  new Object[]\n                  { &quot;D&quot;, &quot;High&quot;, &quot;txt&quot;, &quot;0.7&quot; },\n                  new Object[]\n                  { &quot;A&quot;, &quot;High&quot;, &quot;css&quot;, &quot;0.8&quot; },\n                  new Object[]\n                  { &quot;B&quot;, &quot;Low&quot;, &quot;css&quot;, &quot;0.2&quot; },\n                  new Object[]\n                  { &quot;G&quot;, &quot;Low&quot;, &quot;css&quot;, &quot;0.1&quot; },\n                  new Object[]\n                  { &quot;G&quot;, &quot;High&quot;, &quot;properties&quot;, &quot;0.4&quot; },\n                  new Object[]\n                  { &quot;G&quot;, &quot;High&quot;, &quot;css&quot;, &quot;1&quot; },\n                  new Object[]\n                  { &quot;G&quot;, &quot;High&quot;, &quot;css&quot;, &quot;0.2&quot; },\n                  new Object[]\n                  { &quot;G&quot;, &quot;Low&quot;, &quot;jsp&quot;, &quot;0.8&quot; },\n                  new Object[]\n                  { &quot;H&quot;, &quot;Low&quot;, &quot;jsp&quot;, &quot;0.6&quot; },\n                  new Object[]\n                  { &quot;H&quot;, &quot;Low&quot;, &quot;html&quot;, &quot;0.4&quot; } };\n            for (int r = 0; r &lt; data.length; r++) {\n                row = dataSheet.createRow(r);\n                Object[] rowData = data[r];\n                for (int c = 0; c &lt; rowData.length; c++) {\n                    cell = row.createCell(c);\n                    if (rowData[c] instanceof String) {\n                        cell.setCellValue((String) rowData[c]);\n                    } else if (rowData[c] instanceof Number) {\n                        cell.setCellValue(((Number) rowData[c]).doubleValue());\n                    }\n                }\n                if (rowData.length &lt; 5) {\n                    cell = row.createCell(4);\n                    String fileTypeCol = &quot;C&quot; + (r + 1);\n                    String changeCol = &quot;D&quot; + (r + 1);\n                    String formula = String.format(strFormula, fileTypeCol, changeCol, changeCol,\n                            changeCol, changeCol, changeCol, changeCol, changeCol, changeCol,\n                            changeCol, changeCol);\n                    System.out.println(&quot;Formula ====== &quot; + formula);\n                    cell.setCellFormula(formula);\n                }\n            }\n\n            XSSFFormulaEvaluator.evaluateAllFormulaCells(workbook);\n\n            workbook.write(fileout);\n            fileout.close();\n            Desktop.getDesktop().open(new File(&quot;ItemFilter.xlsx&quot;));\n\n        }\n\n    }\n}\n</code></pre>\n<p>Received outcome:</p>\n<p><a href=\"https://i.stack.imgur.com/JPOUp.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/JPOUp.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":2818342,"reputation":299828,"user_id":2422776,"display_name":"Mureinik"},"score":1,"creation_date":1702049220,"post_id":77627603,"comment_id":136853474,"body_markdown":"Help us help you - share the output you&#39;re trying to get","body":"Help us help you - share the output you&#39;re trying to get"},{"owner":{"account_id":19254723,"reputation":2061,"user_id":14071914,"display_name":"JustAnotherDeveloper"},"score":2,"creation_date":1702049362,"post_id":77627603,"comment_id":136853490,"body_markdown":"By definition, if the result you get is not what you expected, the code is not correct. In this case, `System.out.println(&quot;*&quot;);` should be `System.out.print(&quot;*&quot;);`","body":"By definition, if the result you get is not what you expected, the code is not correct. In this case, <code>System.out.println(&quot;*&quot;);</code> should be <code>System.out.print(&quot;*&quot;);</code>"},{"owner":{"account_id":30099069,"reputation":1,"user_id":23066660,"display_name":"java programmer"},"score":0,"creation_date":1702049534,"post_id":77627603,"comment_id":136853524,"body_markdown":"its worked thanks","body":"its worked thanks"}],"owner":{"account_id":30099069,"reputation":1,"user_id":23066660,"display_name":"java programmer"},"comment_count":3,"delete_vote_count":1,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":4,"up_vote_count":0,"closed_date":1702049426,"answer_count":0,"score":-4,"last_activity_date":1702049428,"creation_date":1702049150,"question_id":77627603,"body_markdown":"I am working on a star-printing problem in Java using VS Code, but I don&#39;t get the right output. The stars are printing in a raw manner, not a pyramidal shape.\r\n\r\n```\r\npublic class halfpyramid {\r\n    public static void main(String args[]){\r\n        int row=5;\r\n\r\n        for(int i = 1; i &lt;= row; ++i){\r\n            for(int j = 1; j &lt;= i; ++j){\r\n                System.out.println(&quot;*&quot;);\r\n            }\r\n            System.out.println();\r\n        }\r\n    }\r\n}\r\n```\r\n","title":"The pattern-printing program is not printing properly in Java","body":"<p>I am working on a star-printing problem in Java using VS Code, but I don't get the right output. The stars are printing in a raw manner, not a pyramidal shape.</p>\n<pre><code>public class halfpyramid {\n    public static void main(String args[]){\n        int row=5;\n\n        for(int i = 1; i &lt;= row; ++i){\n            for(int j = 1; j &lt;= i; ++j){\n                System.out.println(&quot;*&quot;);\n            }\n            System.out.println();\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","spring-boot","unit-testing","exception","mockito"],"answers":[{"tags":[],"owner":{"account_id":213468,"reputation":103462,"user_id":466862,"display_name":"Mark Rotteveel"},"down_vote_count":0,"up_vote_count":12,"is_accepted":true,"score":12,"last_activity_date":1637072141,"creation_date":1637072141,"answer_id":69990737,"question_id":69990671,"body_markdown":"The problem is that your code attempts to modify a map, but your test code is setup with `Map.of(...)`, which returns an immutable map. Use `new HashMap&lt;&gt;(Map.of(....))` instead.","title":"java.lang.UnsupportedOperationException when testing","body":"<p>The problem is that your code attempts to modify a map, but your test code is setup with <code>Map.of(...)</code>, which returns an immutable map. Use <code>new HashMap&lt;&gt;(Map.of(....))</code> instead.</p>\n"}],"owner":{"account_id":23161913,"reputation":67,"user_id":17262444,"display_name":"Fedor Nikolaev"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7598,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":69990737,"answer_count":1,"score":5,"last_activity_date":1702049382,"creation_date":1637071898,"question_id":69990671,"body_markdown":"Try to write test, operating with mocks. When assertion happens there is an exception.\r\n\r\n**CardRecordServiceTest.java**\r\n```\r\n@ExtendWith(MockitoExtension.class)\r\npublic class CartRecordServiceTest {\r\n    private MockMvc mockMvc;\r\n\r\n    private ObjectMapper objectMapper = new ObjectMapper();\r\n\r\n    @Mock\r\n    private CartRecord cartRecords;\r\n    @Mock\r\n    private GoodsService goodsService;\r\n    @Mock\r\n    private GoodsRepository goodsRepository;\r\n\r\n    CartRecordService cartRecordService;\r\n\r\n\r\n    @BeforeEach\r\n    public void setUp(){\r\n        cartRecordService = new CartRecordService(cartRecords, goodsRepository, goodsService);\r\n        mockMvc = MockMvcBuilders\r\n                .standaloneSetup(cartRecordService)\r\n                .build();\r\n    }\r\n    @Test\r\n    public void enougthGoodsToAddRecordNew(){\r\n        CartAdditionDTO cartAdditionDTO = new CartAdditionDTO(1L, 15L);\r\n\r\n        Mockito.when(goodsService.enoughQuantity(cartAdditionDTO)).thenReturn(true);\r\n        Mockito.when(cartRecords.getRecords()).thenReturn(Map.of(2L,2L));\r\n\r\n        Assertions.assertTrue(cartRecordService.addRecord(cartAdditionDTO));\r\n\r\n        verify(cartRecords,times(2)).getRecords();\r\n        verify(goodsService).enoughQuantity(any(CartAdditionDTO.class));\r\n    }\r\n```\r\n**CartRecordService.java**\r\n```\r\n    public boolean addRecord(CartAdditionDTO cartAdditionDTO) {\r\n        if(!goodsService.enoughQuantity(cartAdditionDTO)){\r\n            return false;\r\n        }\r\n        if (cartRecords.getRecords().containsKey(cartAdditionDTO.getId())) {\r\n            Long newQuantity = cartRecords.getRecords().get(cartAdditionDTO.getId()) + cartAdditionDTO.getQuantity();\r\n            if(goodsService.enoughQuantity(new CartAdditionDTO(cartAdditionDTO.getId(), newQuantity))){\r\n                cartRecords.getRecords().put(cartAdditionDTO.getId(), newQuantity);\r\n                return true;\r\n            }\r\n            return false;\r\n        }\r\n// here is an error at put\r\n        cartRecords.getRecords().put(cartAdditionDTO.getId(), cartAdditionDTO.getQuantity());\r\n        return true;\r\n    }\r\n```\r\n\r\n**Log**\r\n\r\njava.lang.UnsupportedOperationException\r\n\tat java.base/java.util.ImmutableCollections.uoe(ImmutableCollections.java:142)\r\n\tat java.base/java.util.ImmutableCollections$AbstractImmutableMap.put(ImmutableCollections.java:1072)\r\n\tat com.example.store.service.CartRecordService.addRecord(CartRecordService.java:77)\r\n\tat com.example.store.ServiceUnitTests.CartRecordServiceTest.enougthGoodsToAddRecordNew(CartRecordServiceTest.java:69)\r\n\r\n\r\n","title":"java.lang.UnsupportedOperationException when testing","body":"<p>Try to write test, operating with mocks. When assertion happens there is an exception.</p>\n<p><strong>CardRecordServiceTest.java</strong></p>\n<pre><code>@ExtendWith(MockitoExtension.class)\npublic class CartRecordServiceTest {\n    private MockMvc mockMvc;\n\n    private ObjectMapper objectMapper = new ObjectMapper();\n\n    @Mock\n    private CartRecord cartRecords;\n    @Mock\n    private GoodsService goodsService;\n    @Mock\n    private GoodsRepository goodsRepository;\n\n    CartRecordService cartRecordService;\n\n\n    @BeforeEach\n    public void setUp(){\n        cartRecordService = new CartRecordService(cartRecords, goodsRepository, goodsService);\n        mockMvc = MockMvcBuilders\n                .standaloneSetup(cartRecordService)\n                .build();\n    }\n    @Test\n    public void enougthGoodsToAddRecordNew(){\n        CartAdditionDTO cartAdditionDTO = new CartAdditionDTO(1L, 15L);\n\n        Mockito.when(goodsService.enoughQuantity(cartAdditionDTO)).thenReturn(true);\n        Mockito.when(cartRecords.getRecords()).thenReturn(Map.of(2L,2L));\n\n        Assertions.assertTrue(cartRecordService.addRecord(cartAdditionDTO));\n\n        verify(cartRecords,times(2)).getRecords();\n        verify(goodsService).enoughQuantity(any(CartAdditionDTO.class));\n    }\n</code></pre>\n<p><strong>CartRecordService.java</strong></p>\n<pre><code>    public boolean addRecord(CartAdditionDTO cartAdditionDTO) {\n        if(!goodsService.enoughQuantity(cartAdditionDTO)){\n            return false;\n        }\n        if (cartRecords.getRecords().containsKey(cartAdditionDTO.getId())) {\n            Long newQuantity = cartRecords.getRecords().get(cartAdditionDTO.getId()) + cartAdditionDTO.getQuantity();\n            if(goodsService.enoughQuantity(new CartAdditionDTO(cartAdditionDTO.getId(), newQuantity))){\n                cartRecords.getRecords().put(cartAdditionDTO.getId(), newQuantity);\n                return true;\n            }\n            return false;\n        }\n// here is an error at put\n        cartRecords.getRecords().put(cartAdditionDTO.getId(), cartAdditionDTO.getQuantity());\n        return true;\n    }\n</code></pre>\n<p><strong>Log</strong></p>\n<p>java.lang.UnsupportedOperationException\nat java.base/java.util.ImmutableCollections.uoe(ImmutableCollections.java:142)\nat java.base/java.util.ImmutableCollections$AbstractImmutableMap.put(ImmutableCollections.java:1072)\nat com.example.store.service.CartRecordService.addRecord(CartRecordService.java:77)\nat com.example.store.ServiceUnitTests.CartRecordServiceTest.enougthGoodsToAddRecordNew(CartRecordServiceTest.java:69)</p>\n"},{"tags":["java","database","oracle","jdbc","virtual-column"],"comments":[{"owner":{"account_id":3717492,"reputation":17692,"user_id":3093319,"accept_rate":95,"display_name":"Maheswaran Ravisankar"},"score":0,"creation_date":1412232964,"post_id":26155609,"comment_id":41002597,"body_markdown":"That might be DBMS dependent, so looking into the metadata information of the table should help. In case of Oracle, [ALL_TAB_COLS](http://stackoverflow.com/questions/8074963/how-to-check-column-is-virtual-in-oracle)","body":"That might be DBMS dependent, so looking into the metadata information of the table should help. In case of Oracle, <a href=\"http://stackoverflow.com/questions/8074963/how-to-check-column-is-virtual-in-oracle\">ALL_TAB_COLS</a>"},{"owner":{"account_id":93689,"reputation":415931,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"score":0,"creation_date":1412233702,"post_id":26155609,"comment_id":41002868,"body_markdown":"Find out which actual class the metadata is - you may find it has special methods (beyond those defined for ResultSetMetaData) that can help","body":"Find out which actual class the metadata is - you may find it has special methods (beyond those defined for ResultSetMetaData) that can help"},{"owner":{"account_id":5112430,"reputation":51,"user_id":4098648,"display_name":"Habib Gahntous"},"score":0,"creation_date":1412234903,"post_id":26155609,"comment_id":41003333,"body_markdown":"is there any java piece of code that might help?\ni checked every method that ResultSetMetaData has and found nothing.","body":"is there any java piece of code that might help? i checked every method that ResultSetMetaData has and found nothing."},{"owner":{"account_id":3446101,"reputation":11345,"user_id":2886891,"accept_rate":75,"display_name":"Honza Zidek"},"score":0,"creation_date":1702048695,"post_id":26155609,"comment_id":136853360,"body_markdown":"@HabibGahntous A working piece of Java code is in my answer https://stackoverflow.com/a/77627553/2886891","body":"@HabibGahntous A working piece of Java code is in my answer <a href=\"https://stackoverflow.com/a/77627553/2886891\">stackoverflow.com/a/77627553/2886891</a>"}],"answers":[{"tags":[],"owner":{"account_id":5466321,"reputation":336,"user_id":4347056,"display_name":"o0x258"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1419259212,"creation_date":1419258909,"answer_id":27604763,"question_id":26155609,"body_markdown":"Like Maheswaran Ravisankar already said, the only way to get this information is to run a query against the database. Maybe there is a Java function which does exactly this operation but I doubt that.\r\nThe following query should do it for you:\r\n\r\n    select VIRTUAL_COLUMN from ALL_TAB_COLS where OWNER = :1 and TABLE_NAME = :2 and COLUMN_NAME = :3;\r\n\r\nThe result of the query will be `YES or NO` (YES = column is virtual).\r\n\r\n**Remember:** Oracle metadata are usually stored in upper case.","title":"is there any way to check if a column is virtual in java?","body":"<p>Like Maheswaran Ravisankar already said, the only way to get this information is to run a query against the database. Maybe there is a Java function which does exactly this operation but I doubt that.\nThe following query should do it for you:</p>\n\n<pre><code>select VIRTUAL_COLUMN from ALL_TAB_COLS where OWNER = :1 and TABLE_NAME = :2 and COLUMN_NAME = :3;\n</code></pre>\n\n<p>The result of the query will be <code>YES or NO</code> (YES = column is virtual).</p>\n\n<p><strong>Remember:</strong> Oracle metadata are usually stored in upper case.</p>\n"},{"tags":[],"owner":{"account_id":3446101,"reputation":11345,"user_id":2886891,"accept_rate":75,"display_name":"Honza Zidek"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1702049244,"creation_date":1702048662,"answer_id":77627553,"question_id":26155609,"body_markdown":"It seems absolutely stupid, but after searching internet I really believe that there is no simple Java function for it.\r\n\r\nBased on my experience, the functions with otherwise promising names and promising [Javadoc][1] return nonsensical values:\r\n\r\n|funtion|returns always|\r\n|---|---|\r\n|`isReadOnly(column)`|`true`|\r\n|`isWritable(column)`|`true`|\r\n|`isDefinitelyWritable(column)`|`false`|\r\n\r\n\r\nBased on the [standard documention of `DatabaseMetadata`][3] I came with the following Java code. I tested the code on Postgres but as I am using only documented general Java functionality, I believe it will work for Oracle, too.\r\n\r\n``` lang-java\r\nprivate static final int COLUMN_NAME = 4;\r\nprivate static final int IS_GENERATEDCOLUMN = 24;\r\n\r\npublic Set&lt;String&gt; getCalculatedColumns(Connection connection, String schema, String table) throws SQLException {\r\n    final ResultSet tableMetaData = connection.getMetaData().getColumns(null, schema, table, null);\r\n    final Set&lt;String&gt; calculatedColumns = new HashSet&lt;&gt;();\r\n    while (tableMetaData.next()) {\r\n        if (&quot;YES&quot;.equals(tableMetaData.getObject(IS_GENERATEDCOLUMN, String.class))) {\r\n            calculatedColumns.add(tableMetaData.getObject(COLUMN_NAME, String.class));\r\n        }\r\n    }\r\n    return calculatedColumns;\r\n}\r\n```\r\n\r\nFor explanation of the magic numbers 4 and 24 in the code, look at the above mentioned documentation.\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/21/docs/api/java.sql/java/sql/ResultSetMetaData.html\r\n  [2]: https://docs.oracle.com/en/java/javase/21/docs/api/java.sql/java/sql/ResultSetMetaData.html#isDefinitelyWritable(int)\r\n  [3]: https://docs.oracle.com/en/java/javase/21/docs/api/java.sql/java/sql/DatabaseMetaData.html#getColumns(java.lang.String,java.lang.String,java.lang.String,java.lang.String)","title":"is there any way to check if a column is virtual in java?","body":"<p>It seems absolutely stupid, but after searching internet I really believe that there is no simple Java function for it.</p>\n<p>Based on my experience, the functions with otherwise promising names and promising <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.sql/java/sql/ResultSetMetaData.html\" rel=\"nofollow noreferrer\">Javadoc</a> return nonsensical values:</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th>funtion</th>\n<th>returns always</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>isReadOnly(column)</code></td>\n<td><code>true</code></td>\n</tr>\n<tr>\n<td><code>isWritable(column)</code></td>\n<td><code>true</code></td>\n</tr>\n<tr>\n<td><code>isDefinitelyWritable(column)</code></td>\n<td><code>false</code></td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>Based on the <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.sql/java/sql/DatabaseMetaData.html#getColumns(java.lang.String,java.lang.String,java.lang.String,java.lang.String)\" rel=\"nofollow noreferrer\">standard documention of <code>DatabaseMetadata</code></a> I came with the following Java code. I tested the code on Postgres but as I am using only documented general Java functionality, I believe it will work for Oracle, too.</p>\n<pre class=\"lang-java prettyprint-override\"><code>private static final int COLUMN_NAME = 4;\nprivate static final int IS_GENERATEDCOLUMN = 24;\n\npublic Set&lt;String&gt; getCalculatedColumns(Connection connection, String schema, String table) throws SQLException {\n    final ResultSet tableMetaData = connection.getMetaData().getColumns(null, schema, table, null);\n    final Set&lt;String&gt; calculatedColumns = new HashSet&lt;&gt;();\n    while (tableMetaData.next()) {\n        if (&quot;YES&quot;.equals(tableMetaData.getObject(IS_GENERATEDCOLUMN, String.class))) {\n            calculatedColumns.add(tableMetaData.getObject(COLUMN_NAME, String.class));\n        }\n    }\n    return calculatedColumns;\n}\n</code></pre>\n<p>For explanation of the magic numbers 4 and 24 in the code, look at the above mentioned documentation.</p>\n"}],"owner":{"account_id":5112430,"reputation":51,"user_id":4098648,"display_name":"Habib Gahntous"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":753,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":2,"score":5,"last_activity_date":1702049244,"creation_date":1412232233,"question_id":26155609,"body_markdown":"I want to know if there is any way to check if a column in a table is virtual in java?\r\nI was trying the ResultSetMetaData no luck there:\r\n\r\n    rsmd.isWritable(column);\r\n    rsmd.isReadOnly(column);\r\n    rsmd.isDefinitelyWritable(column);\r\n\r\nI need to check if it is a virtual column in order to know if i should insert/modify it or not, any ideas?\r\n","title":"is there any way to check if a column is virtual in java?","body":"<p>I want to know if there is any way to check if a column in a table is virtual in java?\nI was trying the ResultSetMetaData no luck there:</p>\n\n<pre><code>rsmd.isWritable(column);\nrsmd.isReadOnly(column);\nrsmd.isDefinitelyWritable(column);\n</code></pre>\n\n<p>I need to check if it is a virtual column in order to know if i should insert/modify it or not, any ideas?</p>\n"},{"tags":["java","spring","spring-boot","gateway","spring-cloud-gateway"],"comments":[{"owner":{"account_id":14706862,"reputation":917,"user_id":10621296,"display_name":"Jetto Mart&#237;nez"},"score":1,"creation_date":1628108523,"post_id":68657540,"comment_id":121336362,"body_markdown":"I had a similar problem a few days ago playing around with Gateway, but without Eureka. I did two things and fixed this, but I don&#39;t actually know which solved the issue: 1) Clear cache from the browser and 2) Change `http://localhost:xxxx` to just `localhost:xxxx`. Give that a try.","body":"I had a similar problem a few days ago playing around with Gateway, but without Eureka. I did two things and fixed this, but I don&#39;t actually know which solved the issue: 1) Clear cache from the browser and 2) Change <code>http:&#47;&#47;localhost:xxxx</code> to just <code>localhost:xxxx</code>. Give that a try."},{"owner":{"account_id":21870094,"reputation":51,"user_id":16159720,"display_name":"Karla Calero"},"score":0,"creation_date":1628113023,"post_id":68657540,"comment_id":121337610,"body_markdown":"I tried it but it didn&#39;t work. Still thank you very much.","body":"I tried it but it didn&#39;t work. Still thank you very much."}],"answers":[{"tags":[],"owner":{"account_id":11465333,"reputation":4830,"user_id":8403689,"display_name":"Imranmadbar"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1647680679,"creation_date":1647663590,"answer_id":71535339,"question_id":68657540,"body_markdown":"Sometimes it&#39;s happened case of the **service name issue** add this property on the **edge-service** :\r\n\r\nFor **application.properties** file:\r\n\r\n\t\tspring.cloud.gateway.discovery.locator.enabled=true\r\n\t\tspring.cloud.gateway.discovery.locator.lower-case-service-id=true\r\n\r\nFor **application.yml** file:\r\n\r\n\t spring:\r\n\t  cloud:\r\n\t\tgateway:\r\n\t\t  discovery:\r\n\t\t\tlocator:\r\n\t\t\t  enabled: true\r\n\t\t\t  lowerCaseServiceId: true\r\n\r\n\r\n\r\n","title":"Spring Cloud Gateway doesn&#39;t find the microservices (Not found 404 error)","body":"<p>Sometimes it's happened case of the <strong>service name issue</strong> add this property on the <strong>edge-service</strong> :</p>\n<p>For <strong>application.properties</strong> file:</p>\n<pre><code>    spring.cloud.gateway.discovery.locator.enabled=true\n    spring.cloud.gateway.discovery.locator.lower-case-service-id=true\n</code></pre>\n<p>For <strong>application.yml</strong> file:</p>\n<pre><code> spring:\n  cloud:\n    gateway:\n      discovery:\n        locator:\n          enabled: true\n          lowerCaseServiceId: true\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17607784,"reputation":141,"user_id":12776496,"display_name":"Mukendi Emmanuel"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1649150331,"creation_date":1649150331,"answer_id":71749153,"question_id":68657540,"body_markdown":"i&#39;ve principaly do 2 things and it works for me.\r\n\r\n - all services name have to be in UPERCASE like \r\n\r\n    uri: lb://UPERCASE-NAME\r\n\r\n - when you specify URI your it will have to end by slash &quot;/&quot;\r\n\r\n    uri: lb://UPERCASE-NAME/\r\n\r\n - specify only one path predicates by route id i don&#39;t know why but it&#39;s work like that\r\n\r\n    - id: ACCOUNTING-SERVICE\r\n          uri: lb://ACCOUNTING/\r\n          predicates:\r\n            - Path=/api/v1/act/**","title":"Spring Cloud Gateway doesn&#39;t find the microservices (Not found 404 error)","body":"<p>i've principaly do 2 things and it works for me.</p>\n<ul>\n<li><p>all services name have to be in UPERCASE like</p>\n<p>uri: lb://UPERCASE-NAME</p>\n</li>\n<li><p>when you specify URI your it will have to end by slash &quot;/&quot;</p>\n<p>uri: lb://UPERCASE-NAME/</p>\n</li>\n<li><p>specify only one path predicates by route id i don't know why but it's work like that</p>\n<ul>\n<li>id: ACCOUNTING-SERVICE\nuri: lb://ACCOUNTING/\npredicates:\n- Path=/api/v1/act/**</li>\n</ul>\n</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":15763432,"reputation":163,"user_id":11374561,"display_name":"Vikcen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1685637423,"creation_date":1685636754,"answer_id":76383938,"question_id":68657540,"body_markdown":"In case it can help to someone try this configuration. In application.properties:\r\n\r\n    spring.application.name=service-gateway-server\r\n    server.port=8090\r\n\r\n    eureka.client.service-url.defaultZone=http://localhost:8761/eureka\r\n\r\nAnd i show the rest of my configuration in application.yml:\r\n\r\n    spring:\r\n      cloud:\r\n        gateway:\r\n          routes:\r\n          - id: service-one\r\n            uri: lb://service-one\r\n            predicates:\r\n              - Path=/api/service1/**\r\n            filters:\r\n              - StripPrefix=2\r\n          - id: service-two\r\n            uri: lb://service-two\r\n            predicates:\r\n              - Path=/api/service2/**\r\n            filters:\r\n              - StripPrefix=2","title":"Spring Cloud Gateway doesn&#39;t find the microservices (Not found 404 error)","body":"<p>In case it can help to someone try this configuration. In application.properties:</p>\n<pre><code>spring.application.name=service-gateway-server\nserver.port=8090\n\neureka.client.service-url.defaultZone=http://localhost:8761/eureka\n</code></pre>\n<p>And i show the rest of my configuration in application.yml:</p>\n<pre><code>spring:\n  cloud:\n    gateway:\n      routes:\n      - id: service-one\n        uri: lb://service-one\n        predicates:\n          - Path=/api/service1/**\n        filters:\n          - StripPrefix=2\n      - id: service-two\n        uri: lb://service-two\n        predicates:\n          - Path=/api/service2/**\n        filters:\n          - StripPrefix=2\n</code></pre>\n"},{"tags":[],"owner":{"account_id":28789541,"reputation":1,"user_id":22049240,"display_name":"Stupido"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1702049029,"creation_date":1702049029,"answer_id":77627593,"question_id":68657540,"body_markdown":"in my case at first I used dependency :\r\nspring-cloud-starter-gateway-mvc\r\nThe Gateway didn&#39;t work.\r\n\r\nWhen I changed it to:\r\n spring-cloud-starter-gateway\r\n it worked.\r\n\r\nI don&#39;t know if this can help anyone","title":"Spring Cloud Gateway doesn&#39;t find the microservices (Not found 404 error)","body":"<p>in my case at first I used dependency :\nspring-cloud-starter-gateway-mvc\nThe Gateway didn't work.</p>\n<p>When I changed it to:\nspring-cloud-starter-gateway\nit worked.</p>\n<p>I don't know if this can help anyone</p>\n"}],"owner":{"account_id":21870094,"reputation":51,"user_id":16159720,"display_name":"Karla Calero"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8935,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":4,"score":5,"last_activity_date":1702049029,"creation_date":1628108043,"question_id":68657540,"body_markdown":"I have this simple microservices application with Spring Boot and I try to add the Spring Cloud Gateway service, but it doesn&#39;t work. All microservices, including the Eureka server, work well, but when I try to access to some microservice using the Gateway route, it doesn&#39;t find the microservice.\r\n\r\nApiGateway pom.xml\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;2.5.3&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;groupId&gt;com.futurex.microservices&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;APIGateway&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;name&gt;APIGateway&lt;/name&gt;\r\n\t&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;1.8&lt;/java.version&gt;\r\n\t\t&lt;spring-cloud.version&gt;2020.0.3&lt;/spring-cloud.version&gt;\r\n\t&lt;/properties&gt;\r\n\t&lt;dependencies&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-cloud-starter-gateway&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-cloud-starter-netflix-eureka-client&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\t&lt;dependencyManagement&gt;\r\n\t\t&lt;dependencies&gt;\r\n\t\t\t&lt;dependency&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;${spring-cloud.version}&lt;/version&gt;\r\n\t\t\t\t&lt;type&gt;pom&lt;/type&gt;\r\n\t\t\t\t&lt;scope&gt;import&lt;/scope&gt;\r\n\t\t\t&lt;/dependency&gt;\r\n\t\t&lt;/dependencies&gt;\r\n\t&lt;/dependencyManagement&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n```\r\nAPI Gateway application.yml\r\n```\r\nspring:\r\n  application:\r\n    name: API-GATEWAY\r\n  cloud:\r\n    gateway:\r\n      routes:\r\n        - id: FX-SERVICE1\r\n          uri: http://localhost:8005\r\n          predicates:\r\n            - Path=/fx-service1/**\r\n        - id: FX-SERVICE2\r\n          uri: http://localhost:8006\r\n          predicates:\r\n            - Path=/fx-service2/**\r\n    discovery:\r\n      enabled: true\r\n    config:\r\n      uri: http://localhost:8081\r\nserver:\r\n  port: 8081\r\neureka:\r\n  client:\r\n    service-url:\r\n      defaultZone: http://localhost:8761/eureka/\r\n    register-with-eureka: true\r\n    fetch-registry: true\r\n  instance:\r\n    hostname: localhost\r\n```\r\nAPI Gateway main\r\n```\r\nimport org.springframework.boot.SpringApplication;\r\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\r\nimport org.springframework.cloud.netflix.eureka.EnableEurekaClient;\r\n\r\n@SpringBootApplication\r\n@EnableEurekaClient\r\npublic class ApiGatewayApplication {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tSpringApplication.run(ApiGatewayApplication.class, args);\r\n\t}\r\n\r\n\r\n}\r\n```\r\n[Api Gateway Not found 404 error][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/1OAjG.png","title":"Spring Cloud Gateway doesn&#39;t find the microservices (Not found 404 error)","body":"<p>I have this simple microservices application with Spring Boot and I try to add the Spring Cloud Gateway service, but it doesn't work. All microservices, including the Eureka server, work well, but when I try to access to some microservice using the Gateway route, it doesn't find the microservice.</p>\n<p>ApiGateway pom.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.5.3&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.futurex.microservices&lt;/groupId&gt;\n    &lt;artifactId&gt;APIGateway&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;APIGateway&lt;/name&gt;\n    &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;1.8&lt;/java.version&gt;\n        &lt;spring-cloud.version&gt;2020.0.3&lt;/spring-cloud.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-cloud-starter-gateway&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-cloud-starter-netflix-eureka-client&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n    &lt;dependencyManagement&gt;\n        &lt;dependencies&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt;\n                &lt;version&gt;${spring-cloud.version}&lt;/version&gt;\n                &lt;type&gt;pom&lt;/type&gt;\n                &lt;scope&gt;import&lt;/scope&gt;\n            &lt;/dependency&gt;\n        &lt;/dependencies&gt;\n    &lt;/dependencyManagement&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p>API Gateway application.yml</p>\n<pre><code>spring:\n  application:\n    name: API-GATEWAY\n  cloud:\n    gateway:\n      routes:\n        - id: FX-SERVICE1\n          uri: http://localhost:8005\n          predicates:\n            - Path=/fx-service1/**\n        - id: FX-SERVICE2\n          uri: http://localhost:8006\n          predicates:\n            - Path=/fx-service2/**\n    discovery:\n      enabled: true\n    config:\n      uri: http://localhost:8081\nserver:\n  port: 8081\neureka:\n  client:\n    service-url:\n      defaultZone: http://localhost:8761/eureka/\n    register-with-eureka: true\n    fetch-registry: true\n  instance:\n    hostname: localhost\n</code></pre>\n<p>API Gateway main</p>\n<pre><code>import org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.cloud.netflix.eureka.EnableEurekaClient;\n\n@SpringBootApplication\n@EnableEurekaClient\npublic class ApiGatewayApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(ApiGatewayApplication.class, args);\n    }\n\n\n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/1OAjG.png\" rel=\"noreferrer\">Api Gateway Not found 404 error</a></p>\n"},{"tags":["java","jboss","intellij-idea","wildfly"],"answers":[{"tags":[],"owner":{"account_id":4278094,"reputation":51,"user_id":3498257,"display_name":"user3498257"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1396617541,"creation_date":1396617541,"answer_id":22863985,"question_id":22729774,"body_markdown":"look for this in your standalone.xml\r\n\r\nsocket-binding name=&quot;management-native&quot; interface=&quot;management&quot; port=&quot;9999&quot;\r\n\r\n\r\nSource:\r\nhttp://youtrack.jetbrains.com/issue/IDEA-77592\r\n","title":"Jboss port configuration on Intellij Idea error","body":"<p>look for this in your standalone.xml</p>\n\n<p>socket-binding name=\"management-native\" interface=\"management\" port=\"9999\"</p>\n\n<p>Source:\n<a href=\"http://youtrack.jetbrains.com/issue/IDEA-77592\" rel=\"nofollow\">http://youtrack.jetbrains.com/issue/IDEA-77592</a></p>\n"},{"tags":[],"owner":{"account_id":469456,"reputation":3102,"user_id":876038,"accept_rate":50,"display_name":"Alexander"},"down_vote_count":0,"up_vote_count":47,"is_accepted":true,"score":47,"last_activity_date":1408440858,"creation_date":1408440858,"answer_id":25380070,"question_id":22729774,"body_markdown":"Possible cause maybe an invalid configuration file &quot;standalone.xml&quot; or any other config file that you are using.\r\nI&#39;ve put a tag at the wrong place and got the same error.","title":"Jboss port configuration on Intellij Idea error","body":"<p>Possible cause maybe an invalid configuration file \"standalone.xml\" or any other config file that you are using.\nI've put a tag at the wrong place and got the same error.</p>\n"},{"tags":[],"owner":{"account_id":3110366,"reputation":393,"user_id":2632241,"accept_rate":62,"display_name":"Watercolours"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1409644446,"creation_date":1409644446,"answer_id":25618473,"question_id":22729774,"body_markdown":"I had the same problem, but have no idea what your setup looks like so the solution might not be the same. Also since your question is quite old you&#39;ve probably figured out the answer by now.\r\n\r\nAnyways.. In case anyone else happens to stumble upon this issue, I solved it this way: \r\nWe use Puppet in our project and I had changed a couple of `.yaml` files where I added some URLs. The URLs contained `&amp;` which had to be `&amp;amp;` and IntelliJ didn&#39;t notify me that this was the issue. It broke JBoss and everything.\r\n\r\nTry running JBoss `standalone.sh` in the terminal and see if you get a Stacktrace.","title":"Jboss port configuration on Intellij Idea error","body":"<p>I had the same problem, but have no idea what your setup looks like so the solution might not be the same. Also since your question is quite old you've probably figured out the answer by now.</p>\n\n<p>Anyways.. In case anyone else happens to stumble upon this issue, I solved it this way: \nWe use Puppet in our project and I had changed a couple of <code>.yaml</code> files where I added some URLs. The URLs contained <code>&amp;</code> which had to be <code>&amp;amp;</code> and IntelliJ didn't notify me that this was the issue. It broke JBoss and everything.</p>\n\n<p>Try running JBoss <code>standalone.sh</code> in the terminal and see if you get a Stacktrace.</p>\n"},{"tags":[],"owner":{"account_id":91283,"reputation":121,"user_id":250737,"accept_rate":71,"display_name":"Jaizen"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1423444709,"creation_date":1423444709,"answer_id":28401439,"question_id":22729774,"body_markdown":"Your standalone xml may be malformed in some way. Check to see if you have special characters that you will have to escape or extra closing or opening tags etc.","title":"Jboss port configuration on Intellij Idea error","body":"<p>Your standalone xml may be malformed in some way. Check to see if you have special characters that you will have to escape or extra closing or opening tags etc.</p>\n"},{"tags":[],"owner":{"account_id":8483072,"reputation":31,"user_id":6362203,"display_name":"MMM"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1463764490,"creation_date":1463764490,"answer_id":37352303,"question_id":22729774,"body_markdown":"My case was that there was no config.\r\n\r\nFolder c:\\jboss-eap-6.4.6\\standalone\\configuration\\ was without configuration files. There was only one folder org.6.4.0, where was the configuration.\r\n\r\nThe solution was to copy configuration files from c:\\jboss-eap-6.4.6\\standalone\\configuration\\org.6.4.0\\ to c:\\jboss-eap-6.4.6\\standalone\\configuration\\","title":"Jboss port configuration on Intellij Idea error","body":"<p>My case was that there was no config.</p>\n\n<p>Folder c:\\jboss-eap-6.4.6\\standalone\\configuration\\ was without configuration files. There was only one folder org.6.4.0, where was the configuration.</p>\n\n<p>The solution was to copy configuration files from c:\\jboss-eap-6.4.6\\standalone\\configuration\\org.6.4.0\\ to c:\\jboss-eap-6.4.6\\standalone\\configuration\\</p>\n"},{"tags":[],"owner":{"account_id":5702461,"reputation":1191,"user_id":4507034,"accept_rate":100,"display_name":"Radu Linu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1497006683,"creation_date":1497006683,"answer_id":44456317,"question_id":22729774,"body_markdown":"In my case was added in standalone.xml in `&lt;deployments&gt;` section the following:\r\n\r\n    &lt;deployment name=&quot;xxx-ear-1.0.ear&quot; runtime-name=&quot;xxx-ear-1.0.ear&quot;&gt;\r\n     &lt;fs-archive path=&quot;path\\xxx-ear-1.0.ear&quot;/&gt;\r\n    &lt;/deployment&gt;\r\n\r\nI&#39;ve removed this and worked.","title":"Jboss port configuration on Intellij Idea error","body":"<p>In my case was added in standalone.xml in <code>&lt;deployments&gt;</code> section the following:</p>\n\n<pre><code>&lt;deployment name=\"xxx-ear-1.0.ear\" runtime-name=\"xxx-ear-1.0.ear\"&gt;\n &lt;fs-archive path=\"path\\xxx-ear-1.0.ear\"/&gt;\n&lt;/deployment&gt;\n</code></pre>\n\n<p>I've removed this and worked.</p>\n"},{"tags":[],"owner":{"account_id":3423003,"reputation":2107,"user_id":2869866,"accept_rate":100,"display_name":"martoncsukas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1516721853,"creation_date":1516721853,"answer_id":48405517,"question_id":22729774,"body_markdown":"This is likely to be happening due to a parsing error in your configuration files.\r\n\r\nStart your JBoss/WildFly in the command line, so that you would see more details if this is happening because of a configuration (or parsing) error. \r\n\r\n- On Windows run `{JBOSS_HOME}/bin/standalone.bat` file so that it would open up a console window and try to start up your application server. \r\n- Look for any ERROR in the log and see if it is related to configuration. \r\n- For example:\r\n\r\n    ERROR [org.jboss.as.server] WFLYSRV0055: Caught exception during boot: \r\n    org.jboss.as.controller.persistence.ConfigurationPersistenceException: WFLYCTL0085: Failed to parse configuration\r\n\r\n\r\nIf this doesn&#39;t help, have a look at open the ports - maybe the port JBoss/WildFly is configured to is already used by some other application.","title":"Jboss port configuration on Intellij Idea error","body":"<p>This is likely to be happening due to a parsing error in your configuration files.</p>\n\n<p>Start your JBoss/WildFly in the command line, so that you would see more details if this is happening because of a configuration (or parsing) error. </p>\n\n<ul>\n<li>On Windows run <code>{JBOSS_HOME}/bin/standalone.bat</code> file so that it would open up a console window and try to start up your application server. </li>\n<li>Look for any ERROR in the log and see if it is related to configuration. </li>\n<li><p>For example:</p>\n\n<p>ERROR [org.jboss.as.server] WFLYSRV0055: Caught exception during boot: \norg.jboss.as.controller.persistence.ConfigurationPersistenceException: WFLYCTL0085: Failed to parse configuration</p></li>\n</ul>\n\n<p>If this doesn't help, have a look at open the ports - maybe the port JBoss/WildFly is configured to is already used by some other application.</p>\n"},{"tags":[],"owner":{"account_id":3195625,"reputation":333,"user_id":2698859,"display_name":"Irfan Bhindawala"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1547029127,"creation_date":1547029127,"answer_id":54107806,"question_id":22729774,"body_markdown":"Please make sute you had provided valid configuration file, may be your configuration file contains misplaced tag/element entries.\r\n","title":"Jboss port configuration on Intellij Idea error","body":"<p>Please make sute you had provided valid configuration file, may be your configuration file contains misplaced tag/element entries.</p>\n"},{"tags":[],"owner":{"account_id":2066387,"reputation":1448,"user_id":1841823,"accept_rate":45,"display_name":"JiboOne"},"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1551254076,"creation_date":1551254076,"answer_id":54900566,"question_id":22729774,"body_markdown":"It seems that IntelliJ IDEA was not able to read offset value from &quot;standalone.xml&quot;.\r\nto solve it, just set Port offset to 0 in Configuration window, it will manually add additional VM option:  -Djboss.socket.binding.port-offset=0\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/ahz2O.png","title":"Jboss port configuration on Intellij Idea error","body":"<p>It seems that IntelliJ IDEA was not able to read offset value from \"standalone.xml\".\nto solve it, just set Port offset to 0 in Configuration window, it will manually add additional VM option:  -Djboss.socket.binding.port-offset=0</p>\n\n<p><a href=\"https://i.stack.imgur.com/ahz2O.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/ahz2O.png\" alt=\"enter image description here\"></a></p>\n"},{"tags":[],"owner":{"account_id":8446123,"reputation":21,"user_id":6336715,"display_name":"Matija"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1568367625,"creation_date":1568349840,"answer_id":57917393,"question_id":22729774,"body_markdown":"In my case, `standalone.xml` was corrupted (probably cause Idea froze and had to do hard shutdown). So I went to `standalone_xml_history` and copied `standalone.xml` from the day before. And it started to work normally again. ","title":"Jboss port configuration on Intellij Idea error","body":"<p>In my case, <code>standalone.xml</code> was corrupted (probably cause Idea froze and had to do hard shutdown). So I went to <code>standalone_xml_history</code> and copied <code>standalone.xml</code> from the day before. And it started to work normally again. </p>\n"},{"tags":[],"owner":{"account_id":16098962,"reputation":136,"user_id":12143476,"display_name":"Ali Tofigh"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1570286833,"creation_date":1570286833,"answer_id":58249392,"question_id":22729774,"body_markdown":"In my case:\r\nI typed 9990 in port offset of Run/Debug Configurations and it solved. :)","title":"Jboss port configuration on Intellij Idea error","body":"<p>In my case:\nI typed 9990 in port offset of Run/Debug Configurations and it solved. :)</p>\n"},{"tags":[],"owner":{"account_id":17023869,"reputation":1,"user_id":12315668,"display_name":"Volkan HEIG"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1572781795,"creation_date":1572781795,"answer_id":58679861,"question_id":22729774,"body_markdown":"I had the same problem and when I went to the standalone directory, I saw that the standalone.xml file was renamed as standalone.xml.tmp. \r\n\r\nSo I just renamed it as standalone.xml and when I started my Intellij again, everything was ok. If it&#39;s already not after that, you can delete and build a new running configuration after starting Intellij","title":"Jboss port configuration on Intellij Idea error","body":"<p>I had the same problem and when I went to the standalone directory, I saw that the standalone.xml file was renamed as standalone.xml.tmp. </p>\n\n<p>So I just renamed it as standalone.xml and when I started my Intellij again, everything was ok. If it's already not after that, you can delete and build a new running configuration after starting Intellij</p>\n"},{"tags":[],"owner":{"account_id":7978180,"reputation":2736,"user_id":6020610,"accept_rate":60,"display_name":"Amarjit Dhillon"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1574787317,"creation_date":1574787317,"answer_id":59055839,"question_id":22729774,"body_markdown":"As shown below, adding the VM options to point to standalone config files fixed my issue\r\n\r\n    /Users/XXX/dev/apps/wildfly/wildfly-16.0.0.Final.XXX.2019.152-node1/standalone/configuration/","title":"Jboss port configuration on Intellij Idea error","body":"<p>As shown below, adding the VM options to point to standalone config files fixed my issue</p>\n\n<pre><code>/Users/XXX/dev/apps/wildfly/wildfly-16.0.0.Final.XXX.2019.152-node1/standalone/configuration/\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9443634,"reputation":3530,"user_id":7023213,"display_name":"user7023213"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1583511238,"creation_date":1583511238,"answer_id":60567853,"question_id":22729774,"body_markdown":"I had the same error &quot;Management Port Configuration not found&quot; when i was trying to boot up my jboss.\r\n\r\nIn my case i had accidentally deleted my standalone.xml. When i put it back all went fine. Another person had same issue turned out was some malformed tag in the standalone.xml.","title":"Jboss port configuration on Intellij Idea error","body":"<p>I had the same error \"Management Port Configuration not found\" when i was trying to boot up my jboss.</p>\n\n<p>In my case i had accidentally deleted my standalone.xml. When i put it back all went fine. Another person had same issue turned out was some malformed tag in the standalone.xml.</p>\n"},{"tags":[],"owner":{"account_id":6849189,"reputation":61,"user_id":5266854,"display_name":"anjanagnet"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1645352718,"creation_date":1645352718,"answer_id":71193457,"question_id":22729774,"body_markdown":"My standalone.xml file has been renamed to standalone.xml.tmp automatically. Rename it back to standalone.xml and it will fix the issue. ","title":"Jboss port configuration on Intellij Idea error","body":"<p>My standalone.xml file has been renamed to standalone.xml.tmp automatically. Rename it back to standalone.xml and it will fix the issue.</p>\n"},{"tags":[],"owner":{"account_id":90329,"reputation":6956,"user_id":248733,"accept_rate":58,"display_name":"Ballon"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1702048735,"creation_date":1702048735,"answer_id":77627562,"question_id":22729774,"body_markdown":"IntelliJ can&#39;t overwrite standalone.xml. \r\nThat means that you have opened standalone.xml with other editor. \r\nClose standalone.xml and try again.","title":"Jboss port configuration on Intellij Idea error","body":"<p>IntelliJ can't overwrite standalone.xml.\nThat means that you have opened standalone.xml with other editor.\nClose standalone.xml and try again.</p>\n"}],"owner":{"account_id":2703232,"reputation":2839,"user_id":2333459,"accept_rate":72,"display_name":"Super Hornet"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":40720,"favorite_count":0,"down_vote_count":0,"up_vote_count":36,"accepted_answer_id":25380070,"answer_count":16,"score":36,"last_activity_date":1702048735,"creation_date":1396088509,"question_id":22729774,"body_markdown":"I&#39;m trying to run my application on Jboss App Server by Intellij Idea12. I&#39;ve done configuration:\r\n![enter image description here][1]\r\n\r\nbut As you can see in the picture I got the error `Management Port Configuration not found`.\r\n\r\n  [1]: https://i.stack.imgur.com/McIBe.jpg","title":"Jboss port configuration on Intellij Idea error","body":"<p>I'm trying to run my application on Jboss App Server by Intellij Idea12. I've done configuration:\n<img src=\"https://i.stack.imgur.com/McIBe.jpg\" alt=\"enter image description here\"></p>\n\n<p>but As you can see in the picture I got the error <code>Management Port Configuration not found</code>.</p>\n"},{"tags":["java","spring","maven","junit","cucumber"],"answers":[{"tags":[],"owner":{"account_id":4895787,"reputation":10833,"user_id":3945473,"display_name":"M.P. Korstanje"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1702048653,"creation_date":1702048326,"answer_id":77627513,"question_id":77625239,"body_markdown":"You are using `-Dcucumber.features=....`. As the warning printed in the output explains, this will cause Cucumber to ignore any test selectors from JUnit.\r\n\r\nYou are also using Surefire, it will ask the `cucumber` engine to look for tests in classes. Cucumber not using classes would normally not find any. But `cucumber.features` was used so now it does.\r\n\r\nThen you are also using the `@Suite` annotation to run tests using the `junit-platform-suite` engine. Surefire will also ask this engine to find tests in classes and it will find the  `@Suite` annotated classes. This then delegates to Cucumber which will promptly ignore any of its requests because `cucumber.features` was used.\r\n\r\nSo now we gave two executions of Cucumber.\r\n\r\nThe solution is to make Surefire ignore the suite engine and only run Cucumber by adding `-Dsurefire.includeJUnit5Engines=cucumber`.\r\n\r\nSo: \r\n\r\n```\r\nmvn test -Dsurefire.includeJUnit5Engines=cucumber --Dcucumber.features=path/to/example.feature:10 \r\n```","title":"Cucumber test in Jenkins running twice","body":"<p>You are using <code>-Dcucumber.features=....</code>. As the warning printed in the output explains, this will cause Cucumber to ignore any test selectors from JUnit.</p>\n<p>You are also using Surefire, it will ask the <code>cucumber</code> engine to look for tests in classes. Cucumber not using classes would normally not find any. But <code>cucumber.features</code> was used so now it does.</p>\n<p>Then you are also using the <code>@Suite</code> annotation to run tests using the <code>junit-platform-suite</code> engine. Surefire will also ask this engine to find tests in classes and it will find the  <code>@Suite</code> annotated classes. This then delegates to Cucumber which will promptly ignore any of its requests because <code>cucumber.features</code> was used.</p>\n<p>So now we gave two executions of Cucumber.</p>\n<p>The solution is to make Surefire ignore the suite engine and only run Cucumber by adding <code>-Dsurefire.includeJUnit5Engines=cucumber</code>.</p>\n<p>So:</p>\n<pre><code>mvn test -Dsurefire.includeJUnit5Engines=cucumber --Dcucumber.features=path/to/example.feature:10 \n</code></pre>\n"}],"owner":{"account_id":14564525,"reputation":11,"user_id":14979043,"display_name":"Денис Кондратов"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1702048653,"creation_date":1702023764,"question_id":77625239,"body_markdown":"Test project environment:\r\n\r\n- java 17\r\n- junit5\r\n- cucumber7\r\n- maven 3.3.9\r\n- spring\r\nRunner class:\r\n```\r\n@Suit\r\n@IncludeEngines(&quot;cucumber&quot;)\r\n@SelectClasspathResource(&quot;project/uss/as/play/test/features/smoke/smoke_test.feature&quot;)\r\n@ConfigurationParameter(key = GLUE_PROPERTY_NAME, value = &quot;project.uss.as.play.test&quot;)\r\npublic class RunnerTest {\r\n}\r\n```\r\nin project I have settings file `junit-platform.properties`:\r\n```\r\ncucumber.execution.parallel.enabled=false\r\ncucumber.execution.parallel.config.strategy=fixed\r\ncucumber.execution.parallel.config.fixed.parallelism=1\r\ncucumber.execution.exclusive-resources.isolated.read-write=org.junit.platform.engine.support.hierarchical.ExclusiveResource.GLOBAL_KEY\r\ncucumber.plugin=pretty, html:target/cucumber.html, json:target/cucumber.json, io.qameta.allure.cucumber7jvm.AllureCucumber7Jvm\r\ncucumber.publish.quiet=true\r\n```\r\nin jenkins tests launch for maven:\r\n```\r\nmvn -s /u01/jenkins_slave/workspace/MyTest/.m2/settings.xml clean test -Dmaven.test.failure.ignore=true -Dcucumber.features=classpath:project/uss/as/play/test/features/smoke/smoke_test.feature -Dcucumber.filter.tags=&quot;not @skip&quot;\r\n``` \r\nAs a result in log&#39;s I have to test&#39;s runs. It&#39;s not duplicate. This is two unique test&#39;s runs.\r\nI suspect, that it bounded with launch first test for junit and second test for cucumber. \r\nHow fix it?      \r\n\r\n\r\n\r\nI try add to maven comand:\r\n`-Dsurefire.includeJUnit5Engines=cucumber`\r\nand\r\n`-Dcucumber.filter.tags=@1` - I annotated case &quot;@1&quot;\r\nnot changes ","title":"Cucumber test in Jenkins running twice","body":"<p>Test project environment:</p>\n<ul>\n<li>java 17</li>\n<li>junit5</li>\n<li>cucumber7</li>\n<li>maven 3.3.9</li>\n<li>spring\nRunner class:</li>\n</ul>\n<pre><code>@Suit\n@IncludeEngines(&quot;cucumber&quot;)\n@SelectClasspathResource(&quot;project/uss/as/play/test/features/smoke/smoke_test.feature&quot;)\n@ConfigurationParameter(key = GLUE_PROPERTY_NAME, value = &quot;project.uss.as.play.test&quot;)\npublic class RunnerTest {\n}\n</code></pre>\n<p>in project I have settings file <code>junit-platform.properties</code>:</p>\n<pre><code>cucumber.execution.parallel.enabled=false\ncucumber.execution.parallel.config.strategy=fixed\ncucumber.execution.parallel.config.fixed.parallelism=1\ncucumber.execution.exclusive-resources.isolated.read-write=org.junit.platform.engine.support.hierarchical.ExclusiveResource.GLOBAL_KEY\ncucumber.plugin=pretty, html:target/cucumber.html, json:target/cucumber.json, io.qameta.allure.cucumber7jvm.AllureCucumber7Jvm\ncucumber.publish.quiet=true\n</code></pre>\n<p>in jenkins tests launch for maven:</p>\n<pre><code>mvn -s /u01/jenkins_slave/workspace/MyTest/.m2/settings.xml clean test -Dmaven.test.failure.ignore=true -Dcucumber.features=classpath:project/uss/as/play/test/features/smoke/smoke_test.feature -Dcucumber.filter.tags=&quot;not @skip&quot;\n</code></pre>\n<p>As a result in log's I have to test's runs. It's not duplicate. This is two unique test's runs.\nI suspect, that it bounded with launch first test for junit and second test for cucumber.\nHow fix it?</p>\n<p>I try add to maven comand:\n<code>-Dsurefire.includeJUnit5Engines=cucumber</code>\nand\n<code>-Dcucumber.filter.tags=@1</code> - I annotated case &quot;@1&quot;\nnot changes</p>\n"},{"tags":["java","spring-boot","autowired","configurationproperties"],"answers":[{"tags":[],"owner":{"account_id":1473276,"reputation":110989,"user_id":1384297,"accept_rate":100,"display_name":"Andy Wilkinson"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1702048357,"creation_date":1702048357,"answer_id":77627516,"question_id":77625686,"body_markdown":"&gt;  I suspect the `@ContextConfiguration` may cause this binding to not happen, but I need help from somebody with deeper understanding.\r\n\r\nYes, that&#39;s likely the case. With such minimal configuration, nothing will have enabled configuration properties through `@EnableConfigurationProperties`. As such, configuration property binding will not happen as part of creating your `ConfigProperties` component.\r\n\r\nYou need to run your tests with some configuration that is annotated with `@EnableConfigurationProperties`.\r\n","title":"Why does @Value work, but not @ConfigurationProperties?","body":"<blockquote>\n<p>I suspect the <code>@ContextConfiguration</code> may cause this binding to not happen, but I need help from somebody with deeper understanding.</p>\n</blockquote>\n<p>Yes, that's likely the case. With such minimal configuration, nothing will have enabled configuration properties through <code>@EnableConfigurationProperties</code>. As such, configuration property binding will not happen as part of creating your <code>ConfigProperties</code> component.</p>\n<p>You need to run your tests with some configuration that is annotated with <code>@EnableConfigurationProperties</code>.</p>\n"}],"owner":{"account_id":9028630,"reputation":21,"user_id":6727123,"display_name":"Zhi An"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1702048357,"creation_date":1702028638,"question_id":77625686,"body_markdown":"My class:\r\n\r\n```java\r\npackage com.myCom.test;\r\n\r\nimport org.springframework.beans.factory.annotation.Value;\r\nimport org.springframework.boot.context.properties.ConfigurationProperties;\r\nimport org.springframework.context.annotation.Configuration;\r\nimport org.springframework.stereotype.Component;\r\n\r\n@Component\r\n@ConfigurationProperties( prefix = &quot;sample.mail&quot;)\r\npublic class ConfigProperties {\r\n\r\n  @Value(&quot;${sample.mail.hostName}&quot;)\r\n  private String hostName;\r\n\r\n  private int port;\r\n\r\n  private String from;\r\n\r\n  public String getHostName() {\r\n    return hostName;\r\n  }\r\n\r\n  public void setHostName(String hostName) {\r\n    this.hostName = hostName;\r\n  }\r\n\r\n  public int getPort() {\r\n    return port;\r\n  }\r\n\r\n  public void setPort(int port) {\r\n    this.port = port;\r\n  }\r\n\r\n  public String getFrom() {\r\n    return from;\r\n  }\r\n\r\n  public void setFrom(String from) {\r\n    this.from = from;\r\n  }\r\n}\r\n```\r\n\r\nMy test:\r\n\r\n```java\r\npackage com.myCom.test;\r\n\r\nimport static org.junit.jupiter.api.Assertions.assertNotNull;\r\n\r\nimport org.junit.jupiter.api.Test;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.boot.test.context.SpringBootTest;\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.test.context.ContextConfiguration;\r\n\r\n@ContextConfiguration(\r\n    classes = {\r\n        ConfigProperties.class\r\n    })\r\n@SpringBootTest\r\npublic class ConfigPropertiesIT {\r\n\r\n  @Autowired\r\n  ConfigProperties properties;\r\n\r\n  @Test\r\n  public void testProperty() {\r\n    assertNotNull(properties);\r\n    assertNotNull(properties.getHostName());\r\n    assertNotNull(properties.getFrom());\r\n  }\r\n}\r\n```\r\n\r\nMy application.yaml\r\n\r\n```yaml\r\nsample:\r\n  mail:\r\n    hostName: www.myCom.com\r\n    port: 8088\r\n    from: aUser\r\n```\r\n\r\nWhy the hostName field worked, but not the from field?  Adding `@Value` annotation make a field work, and removing it makes a field not work.  It almost seems as if the `@ConfigurationProperties` annotation is not trying to bind the properties to the fields even though the name is matching.  I suspect the `@ContextConfiguration` may cause this binding to not happen, but I need help from somebody with deeper understanding.","title":"Why does @Value work, but not @ConfigurationProperties?","body":"<p>My class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.myCom.test;\n\nimport org.springframework.beans.factory.annotation.Value;\nimport org.springframework.boot.context.properties.ConfigurationProperties;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.stereotype.Component;\n\n@Component\n@ConfigurationProperties( prefix = &quot;sample.mail&quot;)\npublic class ConfigProperties {\n\n  @Value(&quot;${sample.mail.hostName}&quot;)\n  private String hostName;\n\n  private int port;\n\n  private String from;\n\n  public String getHostName() {\n    return hostName;\n  }\n\n  public void setHostName(String hostName) {\n    this.hostName = hostName;\n  }\n\n  public int getPort() {\n    return port;\n  }\n\n  public void setPort(int port) {\n    this.port = port;\n  }\n\n  public String getFrom() {\n    return from;\n  }\n\n  public void setFrom(String from) {\n    this.from = from;\n  }\n}\n</code></pre>\n<p>My test:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.myCom.test;\n\nimport static org.junit.jupiter.api.Assertions.assertNotNull;\n\nimport org.junit.jupiter.api.Test;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.test.context.SpringBootTest;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.test.context.ContextConfiguration;\n\n@ContextConfiguration(\n    classes = {\n        ConfigProperties.class\n    })\n@SpringBootTest\npublic class ConfigPropertiesIT {\n\n  @Autowired\n  ConfigProperties properties;\n\n  @Test\n  public void testProperty() {\n    assertNotNull(properties);\n    assertNotNull(properties.getHostName());\n    assertNotNull(properties.getFrom());\n  }\n}\n</code></pre>\n<p>My application.yaml</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>sample:\n  mail:\n    hostName: www.myCom.com\n    port: 8088\n    from: aUser\n</code></pre>\n<p>Why the hostName field worked, but not the from field?  Adding <code>@Value</code> annotation make a field work, and removing it makes a field not work.  It almost seems as if the <code>@ConfigurationProperties</code> annotation is not trying to bind the properties to the fields even though the name is matching.  I suspect the <code>@ContextConfiguration</code> may cause this binding to not happen, but I need help from somebody with deeper understanding.</p>\n"},{"tags":["javascript","java","spring-boot"],"comments":[{"owner":{"account_id":4271284,"reputation":12416,"user_id":3493036,"accept_rate":81,"display_name":"Patrick"},"score":0,"creation_date":1499272829,"post_id":44931701,"comment_id":76839337,"body_markdown":"you should tell us whats not working.","body":"you should tell us whats not working."},{"owner":{"account_id":4355646,"reputation":1785,"user_id":4900074,"accept_rate":83,"display_name":"user4900074"},"score":0,"creation_date":1499272936,"post_id":44931701,"comment_id":76839393,"body_markdown":"PaginationRequest has null values. json is not mapping correctly to the POJO","body":"PaginationRequest has null values. json is not mapping correctly to the POJO"}],"answers":[{"tags":[],"owner":{"account_id":10591336,"reputation":3484,"user_id":7801800,"display_name":"Anshul Sharma"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1499273190,"creation_date":1499273190,"answer_id":44931870,"question_id":44931701,"body_markdown":"I&#39;ll try to suggest some small changes,\r\n     \r\n    @RequestMapping(value = &quot;/dashboard&quot;, method = RequestMethod.POST, \r\n                    consumes = &quot;application/json&quot;, produces = &quot;application/json&quot;)\r\n    public Dashboard getDashboard(@RequestBody PaginationRequest paginationRequest) {\r\n","title":"SpringBoot @RequestBody pojo not mapping to my json","body":"<p>I'll try to suggest some small changes,</p>\n\n<pre><code>@RequestMapping(value = \"/dashboard\", method = RequestMethod.POST, \n                consumes = \"application/json\", produces = \"application/json\")\npublic Dashboard getDashboard(@RequestBody PaginationRequest paginationRequest) {\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4271284,"reputation":12416,"user_id":3493036,"accept_rate":81,"display_name":"Patrick"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1499273582,"creation_date":1499273582,"answer_id":44931980,"question_id":44931701,"body_markdown":"I would say you have to create a valid json first and test if you data comes correctly to your controller.\r\n\r\nJust try to send an example json like that:\r\n\r\n    var paginationRequest = &#39;{\\&quot;grouping\\&quot;:\\&quot;anyValue\\&quot;,\\&quot;total\\&quot;:\\&quot;1\\&quot;,\\&quot;currentPage\\&quot;:\\&quot;1\\&quot;,\\&quot;pageSize\\&quot;: \\&quot;5\\&quot;}&#39;;\r\nthis means you send only a String in a json format.\r\n\r\nIf you have an Object you maybe have to convert your Object to a json String:\r\n\r\n    var somejson =  JSON.stringify(someobject);\r\n\r\n","title":"SpringBoot @RequestBody pojo not mapping to my json","body":"<p>I would say you have to create a valid json first and test if you data comes correctly to your controller.</p>\n\n<p>Just try to send an example json like that:</p>\n\n<pre><code>var paginationRequest = '{\\\"grouping\\\":\\\"anyValue\\\",\\\"total\\\":\\\"1\\\",\\\"currentPage\\\":\\\"1\\\",\\\"pageSize\\\": \\\"5\\\"}';\n</code></pre>\n\n<p>this means you send only a String in a json format.</p>\n\n<p>If you have an Object you maybe have to convert your Object to a json String:</p>\n\n<pre><code>var somejson =  JSON.stringify(someobject);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2112240,"reputation":656,"user_id":1877295,"display_name":"Stefa"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1499455469,"creation_date":1499455469,"answer_id":44978314,"question_id":44931701,"body_markdown":"Make properties public and annotate each property with @JsonProperty() (i.e. @JsonProperty(&quot;grouping&quot;) ), for example. It&#39;s likely your getters and setters don&#39;t follow standard naming convention. ","title":"SpringBoot @RequestBody pojo not mapping to my json","body":"<p>Make properties public and annotate each property with @JsonProperty() (i.e. @JsonProperty(\"grouping\") ), for example. It's likely your getters and setters don't follow standard naming convention. </p>\n"},{"tags":[],"owner":{"account_id":16623951,"reputation":13,"user_id":12029213,"display_name":"O.S .K."},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1702048290,"creation_date":1702048290,"answer_id":77627506,"question_id":44931701,"body_markdown":"I think i know whats the problem\r\n\r\nAnd its the dumbest thing that i did.\r\n\r\nCheck where is your @RequiredBody annotation comes from. I mistakenly imported it from swagger dependency whilst it should be from spring. They are identical in signature hence i couldnt figure out the source","title":"SpringBoot @RequestBody pojo not mapping to my json","body":"<p>I think i know whats the problem</p>\n<p>And its the dumbest thing that i did.</p>\n<p>Check where is your @RequiredBody annotation comes from. I mistakenly imported it from swagger dependency whilst it should be from spring. They are identical in signature hence i couldnt figure out the source</p>\n"}],"owner":{"account_id":4355646,"reputation":1785,"user_id":4900074,"accept_rate":83,"display_name":"user4900074"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3862,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":4,"score":1,"last_activity_date":1702048290,"creation_date":1499272608,"question_id":44931701,"body_markdown":"Can anyone help me fix this. I have hard coded json object which is suppposed to map to my POJO but I&#39;m getting null values in my Spring Controller. I&#39;ve checked my getters and setters. They seems to be correct. What am i doing wrong here ?\r\n\r\nController\r\n\r\n    @PostMapping(&quot;/dashboard&quot;)\r\n    public Dashboard getDashboard(@RequestBody PaginationRequest paginationRequest) {\r\n          return topcatService.getDashboard(paginationRequest);\r\n    }\r\n\r\njson\r\n\r\n     var paginationRequest = { grouping  : e.target.value ,total : &quot;1&quot;, currentPage : &quot;1&quot;, pageSize : &quot;5&quot;};\r\n\r\nPOJO\r\n   \r\n\r\n     public class PaginationRequest {\r\n            private String grouping;\r\n            private String total;\r\n            private String  currentPage;\r\n            private String pageSize;\r\n        \r\n           //setter/getter\r\n        }","title":"SpringBoot @RequestBody pojo not mapping to my json","body":"<p>Can anyone help me fix this. I have hard coded json object which is suppposed to map to my POJO but I'm getting null values in my Spring Controller. I've checked my getters and setters. They seems to be correct. What am i doing wrong here ?</p>\n\n<p>Controller</p>\n\n<pre><code>@PostMapping(\"/dashboard\")\npublic Dashboard getDashboard(@RequestBody PaginationRequest paginationRequest) {\n      return topcatService.getDashboard(paginationRequest);\n}\n</code></pre>\n\n<p>json</p>\n\n<pre><code> var paginationRequest = { grouping  : e.target.value ,total : \"1\", currentPage : \"1\", pageSize : \"5\"};\n</code></pre>\n\n<p>POJO</p>\n\n<pre><code> public class PaginationRequest {\n        private String grouping;\n        private String total;\n        private String  currentPage;\n        private String pageSize;\n\n       //setter/getter\n    }\n</code></pre>\n"},{"tags":["java","spring-boot","swagger","springdoc","springdoc-openapi-ui"],"owner":{"account_id":29772902,"reputation":49,"user_id":22817655,"display_name":"Kodigas"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1702048122,"creation_date":1701952300,"question_id":77620023,"body_markdown":"How can a Spring Cloud Gateway expose its routes through a Swagger UI? Here&#39;s a minimalistic static Gateway:\r\n```java\r\npackage com.example.gatewaydemo.routing;\r\n\r\nimport org.springframework.cloud.gateway.route.RouteLocator;\r\nimport org.springframework.cloud.gateway.route.builder.RouteLocatorBuilder;\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.context.annotation.Configuration;\r\nimport org.springframework.http.HttpMethod;\r\n\r\n@Configuration\r\npublic class MyRoutingConfig {\r\n    @Bean\r\n    public RouteLocator routeLocator(RouteLocatorBuilder routeLocatorBuilder) {\r\n        return routeLocatorBuilder.routes()\r\n                .route(predicateSpec -&gt; predicateSpec\r\n                        .path(&quot;/uuid&quot;)\r\n                        .and()\r\n                        .method(HttpMethod.GET)\r\n                        .uri(&quot;https://httpbin.org&quot;)\r\n                ).build();\r\n    }\r\n}\r\n```\r\nIn a regular Spring web app, adding Swagger dependencies is enough\r\n```xml\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;io.springfox&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;springfox-boot-starter&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;3.0.0&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;io.springfox&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;springfox-swagger-ui&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;3.0.0&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n```\r\nIt&#39;s not the case with Gateway\r\n\r\nMy Gateway uses Spring Boot 3 and Java 17 so I included this dependency instead\r\n```xml\r\n&lt;dependency&gt;\r\n   &lt;groupId&gt;org.springdoc&lt;/groupId&gt;\r\n   &lt;artifactId&gt;springdoc-openapi-starter-webmvc-ui&lt;/artifactId&gt;\r\n   &lt;version&gt;2.0.2&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\nHowever, it&#39;s clear I have to provide *some* configuration because if I simply include that `springdoc` dependency and include the `@OpenApiDefinition` annotation\r\n```java\r\npackage by.afinny.apigateway;\r\n\r\nimport io.swagger.v3.oas.annotations.OpenAPIDefinition;\r\nimport io.swagger.v3.oas.annotations.info.Info;\r\nimport org.springframework.boot.SpringApplication;\r\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\r\n\r\n@SpringBootApplication\r\n@OpenAPIDefinition(info = @Info(title = &quot;API Gateway&quot;, version = &quot;1.0&quot;, description = &quot;Documentation API Gateway v1.0&quot;))\r\npublic class ApiGatewayV2Application {\r\n    public static void main(String[] args) {\r\n        SpringApplication.run(ApiGatewayV2Application.class, args);\r\n    }\r\n}\r\n```\r\nI get this response when making a request to `/swagger-ui.html` (which gets redirected to `/webjars/swagger-ui/index.html`). Sorry, it&#39;s ui after all so I have to include a screenshot\r\n\r\n&gt; Failed to load remote configuration\r\n\r\n[![enter image description here][1]][1]\r\n\r\nPlease note that I retrieve services and their docs dynamically so [static solutions][2] like\r\n```yml\r\nspringdoc:\r\n  enable-native-support: true\r\n  api-docs:\r\n    enabled: true\r\n  swagger-ui:\r\n    enabled: true\r\n    path: /swagger-ui.html\r\n    config-url: /v3/api-docs/swagger-config\r\n    urls:\r\n      - url: /v3/api-docs\r\n        name: API Gateway Service\r\n        primaryName: API Gateway Service\r\n      - url: /product-service/v3/api-docs\r\n        name: Product Service\r\n        primaryName: Product Service\r\n      - url: /price-service/v3/api-docs\r\n        name: Price Service\r\n        primaryName: Price Service\r\n```\r\nwon&#39;t fit. That is, at startup my Gateway doesn&#39;t know whether there are `product-service` or `price-service` running\r\n\r\nIn a sense, I guess, my question boils down to this: how do I write Java config for Swagger UI in a Spring Cloud Gateway application?\r\n\r\n# UPD\r\n\r\nHere&#39;s what I tried\r\n```yml\r\nspringdoc:\r\n  api-docs:\r\n    enabled: false\r\n  swagger-ui:\r\n    enabled: true\r\n    path: /swagger-ui.html\r\n    config-url: /swagger-ui-config\r\n```\r\n```java\r\npackage by.afinny.apigateway.controller;\r\n\r\nimport by.afinny.apigateway.model.uiConfig.SwaggerUiConfig;\r\nimport by.afinny.apigateway.service.SwaggerUiConfigProvider;\r\nimport lombok.RequiredArgsConstructor;\r\nimport org.springframework.web.bind.annotation.GetMapping;\r\nimport org.springframework.web.bind.annotation.RestController;\r\nimport reactor.core.publisher.Mono;\r\n\r\n@RestController\r\n@RequiredArgsConstructor\r\npublic class SwaggerUiConfigController {\r\n    private final SwaggerUiConfigProvider configProvider;\r\n    @GetMapping(&quot;/swagger-ui-config&quot;)\r\n    public Mono&lt;SwaggerUiConfig&gt; getConfig() {\r\n        return configProvider.getSwaggerUiConfig();\r\n    }\r\n}\r\n```\r\n```java\r\npackage by.afinny.apigateway.model.uiConfig;\r\n\r\nimport by.afinny.apigateway.model.documentedApplication.SwaggerApplication;\r\nimport by.afinny.apigateway.service.SwaggerApplicationSerializer;\r\nimport com.fasterxml.jackson.annotation.JsonProperty;\r\nimport com.fasterxml.jackson.databind.annotation.JsonSerialize;\r\nimport lombok.Getter;\r\nimport lombok.NoArgsConstructor;\r\n\r\nimport java.util.Collection;\r\n\r\n@NoArgsConstructor\r\n@Getter\r\npublic class SwaggerUiConfig {\r\n    @JsonProperty(&quot;urls&quot;)\r\n    @JsonSerialize(contentUsing = SwaggerApplicationSerializer.class) // because SwaggerApplication contains a ton of other properties\r\n    private Collection&lt;SwaggerApplication&gt; swaggerApplications;\r\n\r\n    public SwaggerUiConfig(Collection&lt;SwaggerApplication&gt; swaggerApplications) {\r\n        this.swaggerApplications = swaggerApplications;\r\n    }\r\n\r\n    public static SwaggerUiConfig from(Collection&lt;SwaggerApplication&gt; swaggerApplications) {\r\n        return new SwaggerUiConfig(swaggerApplications);\r\n    }\r\n}\r\n```\r\n```java\r\npackage by.afinny.apigateway.service;\r\n\r\nimport by.afinny.apigateway.model.documentedApplication.SwaggerApplication;\r\nimport com.fasterxml.jackson.core.JsonGenerator;\r\nimport com.fasterxml.jackson.databind.JsonSerializer;\r\nimport com.fasterxml.jackson.databind.SerializerProvider;\r\nimport lombok.SneakyThrows;\r\n\r\nimport java.io.IOException;\r\n\r\npublic class SwaggerApplicationSerializer extends JsonSerializer&lt;SwaggerApplication&gt; {\r\n    @Override\r\n    @SneakyThrows\r\n    public void serialize(SwaggerApplication swaggerApplication, JsonGenerator jsonGenerator, SerializerProvider serializerProvider) throws IOException {\r\n        jsonGenerator.writeStartObject();\r\n        jsonGenerator.writeStringField(&quot;url&quot;, swaggerApplication.getUrl());\r\n        jsonGenerator.writeStringField(&quot;name&quot;, swaggerApplication.getName());\r\n        jsonGenerator.writeEndObject();\r\n    }\r\n}\r\n```\r\n\r\nThe returned JSON looks correct\r\n```json\r\n{\r\n  &quot;urls&quot;: [\r\n    {\r\n      &quot;url&quot;: &quot;/HELLOWORLD/v3/api-docs&quot;,\r\n      &quot;name&quot;: &quot;HELLOWORLD&quot;\r\n    }\r\n  ]\r\n}\r\n```\r\n[![enter image description here][3]][3]\r\n\r\nHowever, I still get the same redirect and the same &quot;failed to load configuration&quot; message, nothing changed. What is my mistake?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/wPj17.png\r\n  [2]: https://medium.com/@pubuduc.14/swagger-openapi-specification-3-integration-with-spring-cloud-gateway-part-2-1d670d4ab69a\r\n  [3]: https://i.stack.imgur.com/gZAU9.png","title":"How can a Spring Cloud Gateway expose its (dynamic) routes through a Swagger UI?","body":"<p>How can a Spring Cloud Gateway expose its routes through a Swagger UI? Here's a minimalistic static Gateway:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.example.gatewaydemo.routing;\n\nimport org.springframework.cloud.gateway.route.RouteLocator;\nimport org.springframework.cloud.gateway.route.builder.RouteLocatorBuilder;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.http.HttpMethod;\n\n@Configuration\npublic class MyRoutingConfig {\n    @Bean\n    public RouteLocator routeLocator(RouteLocatorBuilder routeLocatorBuilder) {\n        return routeLocatorBuilder.routes()\n                .route(predicateSpec -&gt; predicateSpec\n                        .path(&quot;/uuid&quot;)\n                        .and()\n                        .method(HttpMethod.GET)\n                        .uri(&quot;https://httpbin.org&quot;)\n                ).build();\n    }\n}\n</code></pre>\n<p>In a regular Spring web app, adding Swagger dependencies is enough</p>\n<pre class=\"lang-xml prettyprint-override\"><code>        &lt;dependency&gt;\n            &lt;groupId&gt;io.springfox&lt;/groupId&gt;\n            &lt;artifactId&gt;springfox-boot-starter&lt;/artifactId&gt;\n            &lt;version&gt;3.0.0&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.springfox&lt;/groupId&gt;\n            &lt;artifactId&gt;springfox-swagger-ui&lt;/artifactId&gt;\n            &lt;version&gt;3.0.0&lt;/version&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<p>It's not the case with Gateway</p>\n<p>My Gateway uses Spring Boot 3 and Java 17 so I included this dependency instead</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n   &lt;groupId&gt;org.springdoc&lt;/groupId&gt;\n   &lt;artifactId&gt;springdoc-openapi-starter-webmvc-ui&lt;/artifactId&gt;\n   &lt;version&gt;2.0.2&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>However, it's clear I have to provide <em>some</em> configuration because if I simply include that <code>springdoc</code> dependency and include the <code>@OpenApiDefinition</code> annotation</p>\n<pre class=\"lang-java prettyprint-override\"><code>package by.afinny.apigateway;\n\nimport io.swagger.v3.oas.annotations.OpenAPIDefinition;\nimport io.swagger.v3.oas.annotations.info.Info;\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\n\n@SpringBootApplication\n@OpenAPIDefinition(info = @Info(title = &quot;API Gateway&quot;, version = &quot;1.0&quot;, description = &quot;Documentation API Gateway v1.0&quot;))\npublic class ApiGatewayV2Application {\n    public static void main(String[] args) {\n        SpringApplication.run(ApiGatewayV2Application.class, args);\n    }\n}\n</code></pre>\n<p>I get this response when making a request to <code>/swagger-ui.html</code> (which gets redirected to <code>/webjars/swagger-ui/index.html</code>). Sorry, it's ui after all so I have to include a screenshot</p>\n<blockquote>\n<p>Failed to load remote configuration</p>\n</blockquote>\n<p><a href=\"https://i.stack.imgur.com/wPj17.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/wPj17.png\" alt=\"enter image description here\" /></a></p>\n<p>Please note that I retrieve services and their docs dynamically so <a href=\"https://medium.com/@pubuduc.14/swagger-openapi-specification-3-integration-with-spring-cloud-gateway-part-2-1d670d4ab69a\" rel=\"nofollow noreferrer\">static solutions</a> like</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>springdoc:\n  enable-native-support: true\n  api-docs:\n    enabled: true\n  swagger-ui:\n    enabled: true\n    path: /swagger-ui.html\n    config-url: /v3/api-docs/swagger-config\n    urls:\n      - url: /v3/api-docs\n        name: API Gateway Service\n        primaryName: API Gateway Service\n      - url: /product-service/v3/api-docs\n        name: Product Service\n        primaryName: Product Service\n      - url: /price-service/v3/api-docs\n        name: Price Service\n        primaryName: Price Service\n</code></pre>\n<p>won't fit. That is, at startup my Gateway doesn't know whether there are <code>product-service</code> or <code>price-service</code> running</p>\n<p>In a sense, I guess, my question boils down to this: how do I write Java config for Swagger UI in a Spring Cloud Gateway application?</p>\n<h1>UPD</h1>\n<p>Here's what I tried</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>springdoc:\n  api-docs:\n    enabled: false\n  swagger-ui:\n    enabled: true\n    path: /swagger-ui.html\n    config-url: /swagger-ui-config\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>package by.afinny.apigateway.controller;\n\nimport by.afinny.apigateway.model.uiConfig.SwaggerUiConfig;\nimport by.afinny.apigateway.service.SwaggerUiConfigProvider;\nimport lombok.RequiredArgsConstructor;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.RestController;\nimport reactor.core.publisher.Mono;\n\n@RestController\n@RequiredArgsConstructor\npublic class SwaggerUiConfigController {\n    private final SwaggerUiConfigProvider configProvider;\n    @GetMapping(&quot;/swagger-ui-config&quot;)\n    public Mono&lt;SwaggerUiConfig&gt; getConfig() {\n        return configProvider.getSwaggerUiConfig();\n    }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>package by.afinny.apigateway.model.uiConfig;\n\nimport by.afinny.apigateway.model.documentedApplication.SwaggerApplication;\nimport by.afinny.apigateway.service.SwaggerApplicationSerializer;\nimport com.fasterxml.jackson.annotation.JsonProperty;\nimport com.fasterxml.jackson.databind.annotation.JsonSerialize;\nimport lombok.Getter;\nimport lombok.NoArgsConstructor;\n\nimport java.util.Collection;\n\n@NoArgsConstructor\n@Getter\npublic class SwaggerUiConfig {\n    @JsonProperty(&quot;urls&quot;)\n    @JsonSerialize(contentUsing = SwaggerApplicationSerializer.class) // because SwaggerApplication contains a ton of other properties\n    private Collection&lt;SwaggerApplication&gt; swaggerApplications;\n\n    public SwaggerUiConfig(Collection&lt;SwaggerApplication&gt; swaggerApplications) {\n        this.swaggerApplications = swaggerApplications;\n    }\n\n    public static SwaggerUiConfig from(Collection&lt;SwaggerApplication&gt; swaggerApplications) {\n        return new SwaggerUiConfig(swaggerApplications);\n    }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>package by.afinny.apigateway.service;\n\nimport by.afinny.apigateway.model.documentedApplication.SwaggerApplication;\nimport com.fasterxml.jackson.core.JsonGenerator;\nimport com.fasterxml.jackson.databind.JsonSerializer;\nimport com.fasterxml.jackson.databind.SerializerProvider;\nimport lombok.SneakyThrows;\n\nimport java.io.IOException;\n\npublic class SwaggerApplicationSerializer extends JsonSerializer&lt;SwaggerApplication&gt; {\n    @Override\n    @SneakyThrows\n    public void serialize(SwaggerApplication swaggerApplication, JsonGenerator jsonGenerator, SerializerProvider serializerProvider) throws IOException {\n        jsonGenerator.writeStartObject();\n        jsonGenerator.writeStringField(&quot;url&quot;, swaggerApplication.getUrl());\n        jsonGenerator.writeStringField(&quot;name&quot;, swaggerApplication.getName());\n        jsonGenerator.writeEndObject();\n    }\n}\n</code></pre>\n<p>The returned JSON looks correct</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;urls&quot;: [\n    {\n      &quot;url&quot;: &quot;/HELLOWORLD/v3/api-docs&quot;,\n      &quot;name&quot;: &quot;HELLOWORLD&quot;\n    }\n  ]\n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/gZAU9.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gZAU9.png\" alt=\"enter image description here\" /></a></p>\n<p>However, I still get the same redirect and the same &quot;failed to load configuration&quot; message, nothing changed. What is my mistake?</p>\n"},{"tags":["java","spring","graphql","transactions"],"owner":{"account_id":30099070,"reputation":1,"user_id":23066661,"display_name":"Johny Adidas"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":1,"is_answered":false,"view_count":12,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1702048000,"creation_date":1702048000,"question_id":77627474,"body_markdown":"I have a method with @Transactional annotation in which an exception is thrown. After which this exception is output to the stacktrace, then the exception UnexpectedRollbackException appears: Transaction silently rolled back because it has been marked as rollback-only, 30 seconds pass and &quot;GraphQL execution canceled because timeout of 30000 millis was reached. The following query was being executed when this happened&quot;\r\n\r\nI tried to write various handlers, aspects, etc., nothing changed","title":"Throwing an exception in a method with @Transactional in GraphQL","body":"<p>I have a method with @Transactional annotation in which an exception is thrown. After which this exception is output to the stacktrace, then the exception UnexpectedRollbackException appears: Transaction silently rolled back because it has been marked as rollback-only, 30 seconds pass and &quot;GraphQL execution canceled because timeout of 30000 millis was reached. The following query was being executed when this happened&quot;</p>\n<p>I tried to write various handlers, aspects, etc., nothing changed</p>\n"},{"tags":["java","selenium","google-chrome","selenium-webdriver","selenium-chromedriver"],"comments":[{"owner":{"account_id":7008369,"reputation":1389,"user_id":5372079,"display_name":"Abhishek Dhoundiyal"},"score":0,"creation_date":1661064098,"post_id":73431020,"comment_id":129679028,"body_markdown":"try this https://stackoverflow.com/a/50642913/5372079","body":"try this <a href=\"https://stackoverflow.com/a/50642913/5372079\">stackoverflow.com/a/50642913/5372079</a>"}],"answers":[{"tags":[],"owner":{"account_id":10049107,"reputation":186627,"user_id":7429447,"accept_rate":86,"display_name":"undetected Selenium"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661092834,"creation_date":1661092834,"answer_id":73435448,"question_id":73431020,"body_markdown":"This error message...\r\n\r\n\torg.openqa.selenium.SessionNotCreatedException: Could not start a new session. Response code 500. Message: unknown error: DevToolsActivePort file doesn&#39;t exist\r\n\r\n...implies that the [ChromeDriver](https://stackoverflow.com/a/59927747/7429447) was unable to initiate/spawn a new _Browsing Context_ i.e. [tag:google-chrome] session.\r\n\r\nYour main issue is the **incompatibility** between the version of the binaries you are using as follows:\r\n\r\n- You are using _chrome=104.0_\r\n- But you are using _chromedriver=103.0_ \r\n- Release Notes of [_chromedriver=103.0_](https://chromedriver.storage.googleapis.com/103.0.5060.134/notes.txt) clearly mentions the following :\r\n\r\n&gt;Supports Chrome version 103\r\n\r\n\r\n\r\nSo there is a clear mismatch between _chromedriver=103.0_ and the _chrome=104.0_\r\n\r\n\r\n----------\r\n\r\n\r\n\r\nSolution\r\n--------\r\nEnsure that:\r\n\r\n- _Selenium_ is upgraded to  current released [_**Version 4.4.0**_](https://www.selenium.dev/downloads/).\r\n- _ChromeDriver_ is updated to  current [ChromeDriver v104.0](https://chromedriver.storage.googleapis.com/index.html?path=104.0.5112.79/) level.\r\n- _Chrome Browser_ is updated to  current _chrome=104.0_ (as per [chromedriver=104.0 release notes](https://chromedriver.storage.googleapis.com/104.0.5112.79/notes.txt)).","title":"Could not start a new session. Response code 500. Message: unknown error: DevToolsActivePort file doesn&#39;t exist error using Selenium ChromeDriver Java","body":"<p>This error message...</p>\n<pre><code>org.openqa.selenium.SessionNotCreatedException: Could not start a new session. Response code 500. Message: unknown error: DevToolsActivePort file doesn't exist\n</code></pre>\n<p>...implies that the <a href=\"https://stackoverflow.com/a/59927747/7429447\">ChromeDriver</a> was unable to initiate/spawn a new <em>Browsing Context</em> i.e. <a href=\"/questions/tagged/google-chrome\" class=\"post-tag\" title=\"show questions tagged &#39;google-chrome&#39;\" rel=\"tag\">google-chrome</a> session.</p>\n<p>Your main issue is the <strong>incompatibility</strong> between the version of the binaries you are using as follows:</p>\n<ul>\n<li>You are using <em>chrome=104.0</em></li>\n<li>But you are using <em>chromedriver=103.0</em></li>\n<li>Release Notes of <a href=\"https://chromedriver.storage.googleapis.com/103.0.5060.134/notes.txt\" rel=\"nofollow noreferrer\"><em>chromedriver=103.0</em></a> clearly mentions the following :</li>\n</ul>\n<blockquote>\n<p>Supports Chrome version 103</p>\n</blockquote>\n<p>So there is a clear mismatch between <em>chromedriver=103.0</em> and the <em>chrome=104.0</em></p>\n<hr />\n<h2>Solution</h2>\n<p>Ensure that:</p>\n<ul>\n<li><em>Selenium</em> is upgraded to  current released <a href=\"https://www.selenium.dev/downloads/\" rel=\"nofollow noreferrer\"><em><strong>Version 4.4.0</strong></em></a>.</li>\n<li><em>ChromeDriver</em> is updated to  current <a href=\"https://chromedriver.storage.googleapis.com/index.html?path=104.0.5112.79/\" rel=\"nofollow noreferrer\">ChromeDriver v104.0</a> level.</li>\n<li><em>Chrome Browser</em> is updated to  current <em>chrome=104.0</em> (as per <a href=\"https://chromedriver.storage.googleapis.com/104.0.5112.79/notes.txt\" rel=\"nofollow noreferrer\">chromedriver=104.0 release notes</a>).</li>\n</ul>\n"}],"owner":{"account_id":26118234,"reputation":11,"user_id":19810982,"display_name":"user19810982"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":11168,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1702047860,"creation_date":1661043076,"question_id":73431020,"body_markdown":"I am new in selenium  and i am trying to open a page so chome open but it can not load URL.\r\n\r\nCode trials:\r\n```\r\nSystem.setProperty(&quot;webdriver.chrome.driver&quot;,&quot;C:\\\\Users\\\\user\\\\Desktop\\\\ecli\\\\chromedriver.exe&quot;)\r\nWebDriver driver= new ChromeDriver();\r\ndriver.get(&quot;https://rahulshettyacademy.com/&quot;);\r\nSystem.out.println(driver.getTitle());\r\n```\r\nI tried re install chrome, add `thread.sleep(5000)`, add dependency `WebDriverManager.chromedriver().setup();` and `WebDriver driver = new ChromeDriver();`\r\n\r\nAfter close the chrome I have this:\r\n```\r\nSLF4J: Failed to load class &quot;org.slf4j.impl.StaticLoggerBinder&quot;.\r\nSLF4J: Defaulting to no-operation (NOP) logger implementation\r\nSLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder for further details.\r\nStarting ChromeDriver 103.0.5060.134 (8ec6fce403b3feb0869b0732eda8bd95011d333c-refs/branch-heads/5060@{#1262}) on port 54404\r\nOnly local connections are allowed.\r\nPlease see https://chromedriver.chromium.org/security-considerations for suggestions on keeping ChromeDriver safe.\r\nChromeDriver was started successfully.\r\n\r\nException in thread &quot;main&quot; org.openqa.selenium.SessionNotCreatedException: Could not start a new session. Response code 500. Message: unknown error: DevToolsActivePort file doesn&#39;t exist\r\nBuild info: version: &#39;4.3.0&#39;, revision: &#39;a4995e2c09*&#39;\r\nSystem info: host: &#39;PC&#39;, ip: &#39;192.168.56.1&#39;, os.name: &#39;Windows 10&#39;, os.arch: &#39;amd64&#39;, os.version: &#39;10.0&#39;, java.version: &#39;17.0.3&#39;\r\nDriver info: org.openqa.selenium.chrome.ChromeDriver\r\nCommand: [null, newSession {capabilities=[Capabilities {browserName: chrome, goog:chromeOptions: {args: [], extensions: []}}], desiredCapabilities=Capabilities {browserName: chrome, goog:chromeOptions: {args: [], extensions: []}}}]\r\n\tat org.openqa.selenium.remote.ProtocolHandshake.createSession(ProtocolHandshake.java:144)\r\n\tat org.openqa.selenium.remote.ProtocolHandshake.createSession(ProtocolHandshake.java:102)\r\n\tat org.openqa.selenium.remote.ProtocolHandshake.createSession(ProtocolHandshake.java:67)\r\n\tat org.openqa.selenium.remote.HttpCommandExecutor.execute(HttpCommandExecutor.java:156)\r\n\tat org.openqa.selenium.remote.service.DriverCommandExecutor.invokeExecute(DriverCommandExecutor.java:167)\r\n\tat org.openqa.selenium.remote.service.DriverCommandExecutor.execute(DriverCommandExecutor.java:142)\r\n\tat org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:569)\r\n\tat org.openqa.selenium.remote.RemoteWebDriver.startSession(RemoteWebDriver.java:264)\r\n\tat org.openqa.selenium.remote.RemoteWebDriver.&lt;init&gt;(RemoteWebDriver.java:179)\r\n\tat org.openqa.selenium.chromium.ChromiumDriver.&lt;init&gt;(ChromiumDriver.java:101)\r\n\tat org.openqa.selenium.chrome.ChromeDriver.&lt;init&gt;(ChromeDriver.java:81)\r\n\tat org.openqa.selenium.chrome.ChromeDriver.&lt;init&gt;(ChromeDriver.java:49)\r\n\tat PrimerEjercicio.main(PrimerEjercicio.java:29)\r\n```\r\nEnvironment:\r\n\r\n- OS: W10\r\n- Chrome version :104.0.5112.102 \r\n- jve1.8.0_101 (java version)\r\n","title":"Could not start a new session. Response code 500. Message: unknown error: DevToolsActivePort file doesn&#39;t exist error using Selenium ChromeDriver Java","body":"<p>I am new in selenium  and i am trying to open a page so chome open but it can not load URL.</p>\n<p>Code trials:</p>\n<pre><code>System.setProperty(&quot;webdriver.chrome.driver&quot;,&quot;C:\\\\Users\\\\user\\\\Desktop\\\\ecli\\\\chromedriver.exe&quot;)\nWebDriver driver= new ChromeDriver();\ndriver.get(&quot;https://rahulshettyacademy.com/&quot;);\nSystem.out.println(driver.getTitle());\n</code></pre>\n<p>I tried re install chrome, add <code>thread.sleep(5000)</code>, add dependency <code>WebDriverManager.chromedriver().setup();</code> and <code>WebDriver driver = new ChromeDriver();</code></p>\n<p>After close the chrome I have this:</p>\n<pre><code>SLF4J: Failed to load class &quot;org.slf4j.impl.StaticLoggerBinder&quot;.\nSLF4J: Defaulting to no-operation (NOP) logger implementation\nSLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder for further details.\nStarting ChromeDriver 103.0.5060.134 (8ec6fce403b3feb0869b0732eda8bd95011d333c-refs/branch-heads/5060@{#1262}) on port 54404\nOnly local connections are allowed.\nPlease see https://chromedriver.chromium.org/security-considerations for suggestions on keeping ChromeDriver safe.\nChromeDriver was started successfully.\n\nException in thread &quot;main&quot; org.openqa.selenium.SessionNotCreatedException: Could not start a new session. Response code 500. Message: unknown error: DevToolsActivePort file doesn't exist\nBuild info: version: '4.3.0', revision: 'a4995e2c09*'\nSystem info: host: 'PC', ip: '192.168.56.1', os.name: 'Windows 10', os.arch: 'amd64', os.version: '10.0', java.version: '17.0.3'\nDriver info: org.openqa.selenium.chrome.ChromeDriver\nCommand: [null, newSession {capabilities=[Capabilities {browserName: chrome, goog:chromeOptions: {args: [], extensions: []}}], desiredCapabilities=Capabilities {browserName: chrome, goog:chromeOptions: {args: [], extensions: []}}}]\n    at org.openqa.selenium.remote.ProtocolHandshake.createSession(ProtocolHandshake.java:144)\n    at org.openqa.selenium.remote.ProtocolHandshake.createSession(ProtocolHandshake.java:102)\n    at org.openqa.selenium.remote.ProtocolHandshake.createSession(ProtocolHandshake.java:67)\n    at org.openqa.selenium.remote.HttpCommandExecutor.execute(HttpCommandExecutor.java:156)\n    at org.openqa.selenium.remote.service.DriverCommandExecutor.invokeExecute(DriverCommandExecutor.java:167)\n    at org.openqa.selenium.remote.service.DriverCommandExecutor.execute(DriverCommandExecutor.java:142)\n    at org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:569)\n    at org.openqa.selenium.remote.RemoteWebDriver.startSession(RemoteWebDriver.java:264)\n    at org.openqa.selenium.remote.RemoteWebDriver.&lt;init&gt;(RemoteWebDriver.java:179)\n    at org.openqa.selenium.chromium.ChromiumDriver.&lt;init&gt;(ChromiumDriver.java:101)\n    at org.openqa.selenium.chrome.ChromeDriver.&lt;init&gt;(ChromeDriver.java:81)\n    at org.openqa.selenium.chrome.ChromeDriver.&lt;init&gt;(ChromeDriver.java:49)\n    at PrimerEjercicio.main(PrimerEjercicio.java:29)\n</code></pre>\n<p>Environment:</p>\n<ul>\n<li>OS: W10</li>\n<li>Chrome version :104.0.5112.102</li>\n<li>jve1.8.0_101 (java version)</li>\n</ul>\n"},{"tags":["java","java-native-interface","jna"],"comments":[{"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"score":0,"creation_date":1701945518,"post_id":77619236,"comment_id":136838706,"body_markdown":"That last `null` may be the cause. It&#39;s not the same as in the native code snippet (unless `CallbackProc` is `NULL`).","body":"That last <code>null</code> may be the cause. It&#39;s not the same as in the native code snippet (unless <code>CallbackProc</code> is <code>NULL</code>)."},{"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"score":0,"creation_date":1701945636,"post_id":77619236,"comment_id":136838727,"body_markdown":"Another option is the way that you&#39;re using pointer. You can check out how the Windows code (from jna-platform) deals with `Handle` and `HKEY`. I have a feeling that `HN2QCONN` should get a similar treatment.","body":"Another option is the way that you&#39;re using pointer. You can check out how the Windows code (from jna-platform) deals with <code>Handle</code> and <code>HKEY</code>. I have a feeling that <code>HN2QCONN</code> should get a similar treatment."},{"owner":{"account_id":1692034,"reputation":3198,"user_id":1554195,"display_name":"tquadrat"},"score":0,"creation_date":1701945860,"post_id":77619236,"comment_id":136838772,"body_markdown":"You do not get an error of some kind? In that case I would assume that `N2QLibConnectQuik()` just returns `false`, and that your problem is not a Java/JNA one. Have you tried a simple C/C++ program doing the same, and what result did you got from it?","body":"You do not get an error of some kind? In that case I would assume that <code>N2QLibConnectQuik()</code> just returns <code>false</code>, and that your problem is not a Java/JNA one. Have you tried a simple C/C++ program doing the same, and what result did you got from it?"}],"answers":[{"tags":[],"owner":{"account_id":2996877,"reputation":2143,"user_id":2543253,"display_name":"user2543253"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1702047732,"creation_date":1702039595,"answer_id":77626656,"question_id":77619236,"body_markdown":"When you compare your Java code to your C code, you&#39;ll see that in C you pass the return value of the first function call directly to the second one. In the Java example you&#39;re creating another pointer from it. But there&#39;s no need for that. Your first method call already returns a Pointer, pass that directly as you do in C.\r\n\r\nI don&#39;t know what `N2QLibConnCreate` does and if it requires the callback argument. If so you&#39;ll also have to create an instance of `N2q_callback_proc` and pass that instead of null.","title":"Java JNA get and pass native pointer","body":"<p>When you compare your Java code to your C code, you'll see that in C you pass the return value of the first function call directly to the second one. In the Java example you're creating another pointer from it. But there's no need for that. Your first method call already returns a Pointer, pass that directly as you do in C.</p>\n<p>I don't know what <code>N2QLibConnCreate</code> does and if it requires the callback argument. If so you'll also have to create an instance of <code>N2q_callback_proc</code> and pass that instead of null.</p>\n"}],"owner":{"account_id":5177195,"reputation":391,"user_id":4143902,"display_name":"KUL"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1702047732,"creation_date":1701944510,"question_id":77619236,"body_markdown":"How using Java JNA get a pointer from a native method and pass it to another native method?\r\n\r\n    //C code .h\r\n    ...\r\n    extern &quot;C&quot; HN2QCONN __stdcall N2QLibConnCreate(LPCTSTR lpszIniFile, LPCTSTR lpszSection, \r\n    \t\t\t\t\t\t\t\t\t\t\t   N2Q_CALLBACK_PROC Callback);\r\n    extern &quot;C&quot; BOOL __stdcall N2QLibConnectQuik(HN2QCONN hConn);\r\n    ...\r\n    //another C code .h\r\n    ...\r\n    DECLARE_HANDLE (HN2QCONN);\r\n    ...\r\n    //test C code .cpp\r\n    HN2QCONN hConn = N2QLibConnCreate(&quot;n2q.ini&quot;, &quot;local&quot;, CallbackProc);\r\n    if (!N2QLibConnectQuik(hConn))\t\t\t\t\t\t\t\t\r\n    \t\tprintf(&quot;error connect to server.&quot;);\r\n\r\nHow can I do the same in Java? How do I correctly get the data from the native method and use the managed code to pass it back to the native method?\r\n\r\nI&#39;m trying to do this:\r\n\r\n    //java code\r\n    ...\r\n    public interface N2q_lib extends Library {\r\n    \tN2q_lib INSTANCE = (N2q_lib)Native.load(&quot;n2q_lib.dll&quot;, N2q_lib.class);\r\n    \tPointer N2QLibConnCreate(String lpszIniFile, String lpszSection, N2q_callback_proc Callback);\r\n    \tboolean N2QLibConnectQuik(Pointer ptr);\r\n    }\r\n    ...\r\n    public class App \r\n    {\r\n        public static void main( String[] args )\r\n        {\r\n            Pointer ptr = new Memory(N2q_lib.INSTANCE.N2QLibConnCreate(&quot;n2q.ini&quot;, &quot;local&quot;, null));\r\n            if (!N2q_lib.INSTANCE.N2QLibConnectQuik(ptr))\r\n            \tSystem.out.println(&quot;error connect to server.&quot;);\r\n        }\r\n    }\r\n\r\nBut I always get &quot;false&quot;. Am I using pointers incorrectly?","title":"Java JNA get and pass native pointer","body":"<p>How using Java JNA get a pointer from a native method and pass it to another native method?</p>\n<pre><code>//C code .h\n...\nextern &quot;C&quot; HN2QCONN __stdcall N2QLibConnCreate(LPCTSTR lpszIniFile, LPCTSTR lpszSection, \n                                               N2Q_CALLBACK_PROC Callback);\nextern &quot;C&quot; BOOL __stdcall N2QLibConnectQuik(HN2QCONN hConn);\n...\n//another C code .h\n...\nDECLARE_HANDLE (HN2QCONN);\n...\n//test C code .cpp\nHN2QCONN hConn = N2QLibConnCreate(&quot;n2q.ini&quot;, &quot;local&quot;, CallbackProc);\nif (!N2QLibConnectQuik(hConn))                              \n        printf(&quot;error connect to server.&quot;);\n</code></pre>\n<p>How can I do the same in Java? How do I correctly get the data from the native method and use the managed code to pass it back to the native method?</p>\n<p>I'm trying to do this:</p>\n<pre><code>//java code\n...\npublic interface N2q_lib extends Library {\n    N2q_lib INSTANCE = (N2q_lib)Native.load(&quot;n2q_lib.dll&quot;, N2q_lib.class);\n    Pointer N2QLibConnCreate(String lpszIniFile, String lpszSection, N2q_callback_proc Callback);\n    boolean N2QLibConnectQuik(Pointer ptr);\n}\n...\npublic class App \n{\n    public static void main( String[] args )\n    {\n        Pointer ptr = new Memory(N2q_lib.INSTANCE.N2QLibConnCreate(&quot;n2q.ini&quot;, &quot;local&quot;, null));\n        if (!N2q_lib.INSTANCE.N2QLibConnectQuik(ptr))\n            System.out.println(&quot;error connect to server.&quot;);\n    }\n}\n</code></pre>\n<p>But I always get &quot;false&quot;. Am I using pointers incorrectly?</p>\n"},{"tags":["java","log4j","log4j2","open-liberty"],"comments":[{"owner":{"account_id":1510727,"reputation":1482,"user_id":1412935,"accept_rate":88,"display_name":"elcadro"},"score":0,"creation_date":1640713506,"post_id":68928312,"comment_id":124640976,"body_markdown":"Your library is not log4j2 but log4j 1.2.17. Try last log4j2 version: 2.17.0","body":"Your library is not log4j2 but log4j 1.2.17. Try last log4j2 version: 2.17.0"}],"answers":[{"tags":[],"owner":{"account_id":8468354,"reputation":739,"user_id":6351865,"display_name":"M. Broz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1629926159,"creation_date":1629926159,"answer_id":68929965,"question_id":68928312,"body_markdown":"You&#39;ll also need to add log4j to the classpath, and there&#39;s several ways you can do that (with pros/cons to each, but I would suggest #2, unless you have more then one app that&#39;s going to be making use of log4j, in which case 3 may be the better approach):\r\n\r\n 1. Package it with your app (inside the war)\r\n 2. Add it in the server.xml via the [classloader][1] attribute under your [webApplication][2]\r\n 3. Drop it in the [global shared library folder][3]: `${shared.config.dir}/lib/global` or `${server.config.dir}/lib/global`\r\n 4. Set it via JVM argument: `-Dlog4j.configurationFile=file:/path/to/log4j2.xml`\r\n\r\n\r\nI&#39;ll mention that there is also an [archived repo regarding using log4j with Open Liberty][4] that you may find helpful, but keep in mind that it is archived so it&#39;s likely incomplete and with no dev support.\r\n\r\n\r\n  [1]: https://openliberty.io/docs/latest/reference/config/classloader.html\r\n  [2]: https://openliberty.io/docs/latest/reference/config/webApplication.html\r\n  [3]: https://openliberty.io/docs/latest/reference/directory-locations-properties.html\r\n  [4]: https://github.com/OpenLiberty/archived-guide-log4j","title":"Open-liberty how to setup a log4j configuration?","body":"<p>You'll also need to add log4j to the classpath, and there's several ways you can do that (with pros/cons to each, but I would suggest #2, unless you have more then one app that's going to be making use of log4j, in which case 3 may be the better approach):</p>\n<ol>\n<li>Package it with your app (inside the war)</li>\n<li>Add it in the server.xml via the <a href=\"https://openliberty.io/docs/latest/reference/config/classloader.html\" rel=\"nofollow noreferrer\">classloader</a> attribute under your <a href=\"https://openliberty.io/docs/latest/reference/config/webApplication.html\" rel=\"nofollow noreferrer\">webApplication</a></li>\n<li>Drop it in the <a href=\"https://openliberty.io/docs/latest/reference/directory-locations-properties.html\" rel=\"nofollow noreferrer\">global shared library folder</a>: <code>${shared.config.dir}/lib/global</code> or <code>${server.config.dir}/lib/global</code></li>\n<li>Set it via JVM argument: <code>-Dlog4j.configurationFile=file:/path/to/log4j2.xml</code></li>\n</ol>\n<p>I'll mention that there is also an <a href=\"https://github.com/OpenLiberty/archived-guide-log4j\" rel=\"nofollow noreferrer\">archived repo regarding using log4j with Open Liberty</a> that you may find helpful, but keep in mind that it is archived so it's likely incomplete and with no dev support.</p>\n"}],"owner":{"account_id":18235814,"reputation":59,"user_id":13273846,"display_name":"BrentL"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1036,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1702047645,"creation_date":1629917015,"question_id":68928312,"body_markdown":"title says it all. How do I setup a log4j configuration in my Open-liberty project? I&#39;ve added my log4j.xml file in the resources folder and I use the following dependency in my pom.xml:\r\n\r\n    &lt;!-- https://mvnrepository.com/artifact/log4j/log4j --&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;log4j&lt;/groupId&gt;\r\n        &lt;artifactId&gt;log4j&lt;/artifactId&gt;\r\n        &lt;version&gt;1.2.17&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nThis is my server.xml:\r\n```\r\n&lt;server description=&quot;Intake Server&quot;&gt;\r\n    &lt;featureManager&gt;\r\n        &lt;feature&gt;servlet-4.0&lt;/feature&gt;\r\n        &lt;feature&gt;mpConfig-1.4&lt;/feature&gt;\r\n        &lt;feature&gt;cdi-2.0&lt;/feature&gt;\r\n    &lt;/featureManager&gt;\r\n\r\n    &lt;variable name=&quot;default.http.port&quot; defaultValue=&quot;9080&quot;/&gt;\r\n    &lt;variable name=&quot;default.https.port&quot; defaultValue=&quot;9443&quot;/&gt;\r\n    &lt;variable name=&quot;app.context.root&quot; defaultValue=&quot;message&quot;/&gt;\r\n\r\n\r\n    &lt;httpEndpoint httpPort=&quot;${default.http.port}&quot; \r\n    httpsPort=&quot;${default.https.port}&quot; id=&quot;defaultHttpEndpoint&quot;  host=&quot;*&quot; /&gt;\r\n\r\n    &lt;library id=&quot;log4jConfig&quot;&gt;\r\n          &lt;folder dir=&quot;/var/log/intake&quot; scanInterval=&quot;5s&quot; /&gt;\r\n    &lt;/library&gt;\r\n\r\n\r\n    &lt;webApplication id=&quot;intake&quot; location=&quot;intake.war&quot; contextRoot=&quot;${app.context.root}&quot;&gt;\r\n\t\t&lt;classloader commonLibraryRef=&quot;log4jConfig&quot;/&gt;\r\n\t&lt;/webApplication&gt;\r\n&lt;/server&gt;\r\n```","title":"Open-liberty how to setup a log4j configuration?","body":"<p>title says it all. How do I setup a log4j configuration in my Open-liberty project? I've added my log4j.xml file in the resources folder and I use the following dependency in my pom.xml:</p>\n<pre><code>&lt;!-- https://mvnrepository.com/artifact/log4j/log4j --&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;log4j&lt;/groupId&gt;\n    &lt;artifactId&gt;log4j&lt;/artifactId&gt;\n    &lt;version&gt;1.2.17&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>This is my server.xml:</p>\n<pre><code>&lt;server description=&quot;Intake Server&quot;&gt;\n    &lt;featureManager&gt;\n        &lt;feature&gt;servlet-4.0&lt;/feature&gt;\n        &lt;feature&gt;mpConfig-1.4&lt;/feature&gt;\n        &lt;feature&gt;cdi-2.0&lt;/feature&gt;\n    &lt;/featureManager&gt;\n\n    &lt;variable name=&quot;default.http.port&quot; defaultValue=&quot;9080&quot;/&gt;\n    &lt;variable name=&quot;default.https.port&quot; defaultValue=&quot;9443&quot;/&gt;\n    &lt;variable name=&quot;app.context.root&quot; defaultValue=&quot;message&quot;/&gt;\n\n\n    &lt;httpEndpoint httpPort=&quot;${default.http.port}&quot; \n    httpsPort=&quot;${default.https.port}&quot; id=&quot;defaultHttpEndpoint&quot;  host=&quot;*&quot; /&gt;\n\n    &lt;library id=&quot;log4jConfig&quot;&gt;\n          &lt;folder dir=&quot;/var/log/intake&quot; scanInterval=&quot;5s&quot; /&gt;\n    &lt;/library&gt;\n\n\n    &lt;webApplication id=&quot;intake&quot; location=&quot;intake.war&quot; contextRoot=&quot;${app.context.root}&quot;&gt;\n        &lt;classloader commonLibraryRef=&quot;log4jConfig&quot;/&gt;\n    &lt;/webApplication&gt;\n&lt;/server&gt;\n</code></pre>\n"},{"tags":["java","sql-server","jpa","indexing"],"comments":[{"owner":{"account_id":2312068,"reputation":90327,"user_id":2029983,"display_name":"Thom A"},"score":2,"creation_date":1702047577,"post_id":77627368,"comment_id":136853152,"body_markdown":"The fact that your statistics needed an update sounds like you don&#39;t do regular index and statistics maintenance; that is likely the *real* cause of the issue.","body":"The fact that your statistics needed an update sounds like you don&#39;t do regular index and statistics maintenance; that is likely the <i>real</i> cause of the issue."},{"owner":{"account_id":2792262,"reputation":163837,"user_id":2402272,"accept_rate":85,"display_name":"John Bollinger"},"score":1,"creation_date":1702048005,"post_id":77627368,"comment_id":136853227,"body_markdown":"If you cannot rely on the DBMS to select the correct index in this case, then how can you rely on it to choose good query plans in more complex cases?  Choosing good plans is one of the DBMS&#39;s primary jobs.  Make sure it has enough information to do that well, and let it.","body":"If you cannot rely on the DBMS to select the correct index in this case, then how can you rely on it to choose good query plans in more complex cases?  Choosing good plans is one of the DBMS&#39;s primary jobs.  Make sure it has enough information to do that well, and let it."},{"owner":{"account_id":17972905,"reputation":5290,"user_id":13061224,"display_name":"siggemannen"},"score":1,"creation_date":1702048364,"post_id":77627368,"comment_id":136853296,"body_markdown":"Why would choosing either index be better or worse for normal operations? or do you have a selection on measurementPointId  and it still picks index A? sounds very unlikely to me. You need to provide some sample queries. I&#39;m guessing you have some ranged selections but who knows","body":"Why would choosing either index be better or worse for normal operations? or do you have a selection on measurementPointId  and it still picks index A? sounds very unlikely to me. You need to provide some sample queries. I&#39;m guessing you have some ranged selections but who knows"},{"owner":{"account_id":166167,"reputation":8075,"user_id":390122,"accept_rate":75,"display_name":"AlwaysLearning"},"score":0,"creation_date":1702075458,"post_id":77627368,"comment_id":136857155,"body_markdown":"_Why would choosing either index be better or worse for normal operations?_ Because queries that can be fully answered by an index (i.e.: one that includes all of the selected and joined columns) never have to touch the table&#39;s source rows. At a guess SQL Server had to compile a new query plan and with the stats out of date, and the stale histogram indicating that Index B wouldn&#39;t include the required measurementPointId (even though it did), it could have chosen smaller Index A as a preferable option.","body":"<i>Why would choosing either index be better or worse for normal operations?</i> Because queries that can be fully answered by an index (i.e.: one that includes all of the selected and joined columns) never have to touch the table&#39;s source rows. At a guess SQL Server had to compile a new query plan and with the stats out of date, and the stale histogram indicating that Index B wouldn&#39;t include the required measurementPointId (even though it did), it could have chosen smaller Index A as a preferable option."},{"owner":{"account_id":9851857,"reputation":82584,"user_id":7297700,"display_name":"David Browne - Microsoft"},"score":0,"creation_date":1702076310,"post_id":77627368,"comment_id":136857254,"body_markdown":"Perhaps you simply need a columnstore index. https://learn.microsoft.com/en-us/sql/relational-databases/indexes/columnstore-indexes-overview?view=sql-server-ver16","body":"Perhaps you simply need a columnstore index. <a href=\"https://learn.microsoft.com/en-us/sql/relational-databases/indexes/columnstore-indexes-overview?view=sql-server-ver16\" rel=\"nofollow noreferrer\">learn.microsoft.com/en-us/sql/relational-databases/indexes/&hellip;</a>"}],"owner":{"account_id":7560690,"reputation":158,"user_id":5738409,"display_name":"kozeljko"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":1,"is_answered":false,"view_count":21,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":0,"score":-1,"last_activity_date":1702046930,"creation_date":1702046930,"question_id":77627368,"body_markdown":"We have a table with timeseries data, that contains 700M entries. Each datapoint is defined by **timestamp** and **measurementPointId** columns that make it unique.\r\n\r\nWe have two indexes:\r\n\r\n - Index A that uses only timestamp column.\r\n - Index B that uses both timestamp and measurementPointId\r\n\r\nWe are accessing the database from our Java EE application that runs in WildFly 26. We use JPA with Hibernate as the provider.\r\n\r\nMost of our operations run on Index B, but we don&#39;t force it. SQL Server is the one that determines which index is used.\r\n\r\nUntil recently, it always picked B, but now it occassionally picked index A. We fixed it with running `UPDATE STATISTICS TimeSeries`, but this doesn&#39;t feel like a long term fix.\r\n\r\nIs it possible to force JPA/Hibernate to always pick Index B, no matter what? Maybe with a hint?","title":"How to force JPA/Hibernate to use specific index in SQL Server","body":"<p>We have a table with timeseries data, that contains 700M entries. Each datapoint is defined by <strong>timestamp</strong> and <strong>measurementPointId</strong> columns that make it unique.</p>\n<p>We have two indexes:</p>\n<ul>\n<li>Index A that uses only timestamp column.</li>\n<li>Index B that uses both timestamp and measurementPointId</li>\n</ul>\n<p>We are accessing the database from our Java EE application that runs in WildFly 26. We use JPA with Hibernate as the provider.</p>\n<p>Most of our operations run on Index B, but we don't force it. SQL Server is the one that determines which index is used.</p>\n<p>Until recently, it always picked B, but now it occassionally picked index A. We fixed it with running <code>UPDATE STATISTICS TimeSeries</code>, but this doesn't feel like a long term fix.</p>\n<p>Is it possible to force JPA/Hibernate to always pick Index B, no matter what? Maybe with a hint?</p>\n"},{"tags":["java","linux","ubuntu","nio","samba"],"comments":[{"owner":{"account_id":372682,"reputation":22426,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1702047364,"post_id":77627164,"comment_id":136853100,"body_markdown":"Java using the nio implementation for Unix file systems may be confused by the SMB mount. Do you have the same issue with a pure native path?","body":"Java using the nio implementation for Unix file systems may be confused by the SMB mount. Do you have the same issue with a pure native path?"}],"answers":[{"tags":[],"owner":{"account_id":2792262,"reputation":163837,"user_id":2402272,"accept_rate":85,"display_name":"John Bollinger"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1702046384,"creation_date":1702046384,"answer_id":77627326,"question_id":77627164,"body_markdown":"&gt; Why is this happening?\r\n\r\nThe two operations you are comparing are not equivalent.  Although the details differ between Windows and Linux, modifying the contents of a file, including truncating it to length zero, is a different operation, requiring different permissions, than is deleting the same file:\r\n\r\n - In Unix, truncating an existing file requires **write** permission *on the file*, whereas deleting it from a directory requires **write** permission *on the directory*.\r\n\r\n - In Windows / NTFS, you need the **Write Data** permission on a file to modify that file&#39;s content, including truncating it, but you need either either **Delete** permission on the file *or* **Delete Subfolders and Files** on its directory to delete it.\r\n\r\nSince you are denied access to truncate the file, you must not have had **write** / **Write Data** on the file.  Since you were able to delete it, you most likely had **write** / **Delete Subfolders and Files** on the directory, but it is also possible that you had **Delete** (but not **Write Data**) on the file.  The distinction between these will not be reflected in the permissions shown on the Linux side, if even it does any permissions mapping at all.\r\n","title":"Why does StandardOpenOption.CREATE not work on SMB via Ubuntu?","body":"<blockquote>\n<p>Why is this happening?</p>\n</blockquote>\n<p>The two operations you are comparing are not equivalent.  Although the details differ between Windows and Linux, modifying the contents of a file, including truncating it to length zero, is a different operation, requiring different permissions, than is deleting the same file:</p>\n<ul>\n<li><p>In Unix, truncating an existing file requires <strong>write</strong> permission <em>on the file</em>, whereas deleting it from a directory requires <strong>write</strong> permission <em>on the directory</em>.</p>\n</li>\n<li><p>In Windows / NTFS, you need the <strong>Write Data</strong> permission on a file to modify that file's content, including truncating it, but you need either either <strong>Delete</strong> permission on the file <em>or</em> <strong>Delete Subfolders and Files</strong> on its directory to delete it.</p>\n</li>\n</ul>\n<p>Since you are denied access to truncate the file, you must not have had <strong>write</strong> / <strong>Write Data</strong> on the file.  Since you were able to delete it, you most likely had <strong>write</strong> / <strong>Delete Subfolders and Files</strong> on the directory, but it is also possible that you had <strong>Delete</strong> (but not <strong>Write Data</strong>) on the file.  The distinction between these will not be reflected in the permissions shown on the Linux side, if even it does any permissions mapping at all.</p>\n"}],"owner":{"account_id":7421543,"reputation":2880,"user_id":5645656,"accept_rate":100,"display_name":"Cardinal System"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":21,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77627326,"answer_count":1,"score":1,"last_activity_date":1702046893,"creation_date":1702044906,"question_id":77627164,"body_markdown":"I have a Windows file server which is mounted to an Ubuntu server at `/mnt/DrawingsPB`. The mount point is using the SMB protocol to manage files on the Windows server.\r\n\r\nI am trying to create a file and overwrite it if it already exists:\r\n\r\n    private Path drawingsTargetDirectory = Paths.get(&quot;/mnt/DrawingsPB/Test&quot;);\r\n\r\n\tpublic OutputStream getOutputStream() throws IOException {\r\n\t\tPath directory = drawingsTargetDirectory.resolve(&quot;TestDir&quot;);\r\n\t\tFiles.createDirectories(directory);\r\n\t\tPath path = directory.resolve(&quot;TestFile.txt&quot;);\r\n\t\treturn Files.newOutputStream(path, StandardOpenOption.CREATE, StandardOpenOption.TRUNCATE_EXISTING,\r\n\t\t\t\tStandardOpenOption.WRITE);\r\n\t}\r\n\r\nThis is throwing an [`AccessDeniedException`][1]:\r\n\r\n    Caused by: java.nio.file.AccessDeniedException: /mnt/DrawingsPB/Test/TestDir/TestFile.txt\r\n    \tat sun.nio.fs.UnixException.translateToIOException(UnixException.java:84) [rt.jar:1.8.0_382]\r\n    \tat sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:102) [rt.jar:1.8.0_382]\r\n    \tat sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:107) [rt.jar:1.8.0_382]\r\n    \tat sun.nio.fs.UnixFileSystemProvider.newByteChannel(UnixFileSystemProvider.java:214) [rt.jar:1.8.0_382]\r\n    \tat java.nio.file.spi.FileSystemProvider.newOutputStream(FileSystemProvider.java:434) [rt.jar:1.8.0_382]\r\n    \tat java.nio.file.Files.newOutputStream(Files.java:216) [rt.jar:1.8.0_382]\r\n    \tat com.company.router.drawing.impl.FileSystemStreamProvider.lambda$4(FileSystemStreamProvider.java:75) [classes:]\r\n    \t... 50 more\r\n\r\nHowever, if I do a manual check-and-delete and change `CREATE` to `CREATE_NEW`, it does not fail:\r\n\r\n\tpublic OutputStream getOutputStream() throws IOException {\r\n\t\tPath directory = drawingsTargetDirectory.resolve(&quot;TestDir&quot;);\r\n\t\tFiles.createDirectories(directory);\r\n\t\tPath path = directory.resolve(&quot;TestFile.txt&quot;);\r\n\t\tif (Files.exists(path))\r\n\t\t\tFiles.delete(path); // Works\r\n\t\treturn Files.newOutputStream(path, StandardOpenOption.CREATE_NEW, StandardOpenOption.TRUNCATE_EXISTING,\r\n                StandardOpenOption.WRITE); // Works\r\n\t}\r\n\r\nWhy is this happening?\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/nio/file/AccessDeniedException.html","title":"Why does StandardOpenOption.CREATE not work on SMB via Ubuntu?","body":"<p>I have a Windows file server which is mounted to an Ubuntu server at <code>/mnt/DrawingsPB</code>. The mount point is using the SMB protocol to manage files on the Windows server.</p>\n<p>I am trying to create a file and overwrite it if it already exists:</p>\n<pre><code>private Path drawingsTargetDirectory = Paths.get(&quot;/mnt/DrawingsPB/Test&quot;);\n\npublic OutputStream getOutputStream() throws IOException {\n    Path directory = drawingsTargetDirectory.resolve(&quot;TestDir&quot;);\n    Files.createDirectories(directory);\n    Path path = directory.resolve(&quot;TestFile.txt&quot;);\n    return Files.newOutputStream(path, StandardOpenOption.CREATE, StandardOpenOption.TRUNCATE_EXISTING,\n            StandardOpenOption.WRITE);\n}\n</code></pre>\n<p>This is throwing an <a href=\"https://docs.oracle.com/javase/8/docs/api/java/nio/file/AccessDeniedException.html\" rel=\"nofollow noreferrer\"><code>AccessDeniedException</code></a>:</p>\n<pre><code>Caused by: java.nio.file.AccessDeniedException: /mnt/DrawingsPB/Test/TestDir/TestFile.txt\n    at sun.nio.fs.UnixException.translateToIOException(UnixException.java:84) [rt.jar:1.8.0_382]\n    at sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:102) [rt.jar:1.8.0_382]\n    at sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:107) [rt.jar:1.8.0_382]\n    at sun.nio.fs.UnixFileSystemProvider.newByteChannel(UnixFileSystemProvider.java:214) [rt.jar:1.8.0_382]\n    at java.nio.file.spi.FileSystemProvider.newOutputStream(FileSystemProvider.java:434) [rt.jar:1.8.0_382]\n    at java.nio.file.Files.newOutputStream(Files.java:216) [rt.jar:1.8.0_382]\n    at com.company.router.drawing.impl.FileSystemStreamProvider.lambda$4(FileSystemStreamProvider.java:75) [classes:]\n    ... 50 more\n</code></pre>\n<p>However, if I do a manual check-and-delete and change <code>CREATE</code> to <code>CREATE_NEW</code>, it does not fail:</p>\n<pre><code>public OutputStream getOutputStream() throws IOException {\n    Path directory = drawingsTargetDirectory.resolve(&quot;TestDir&quot;);\n    Files.createDirectories(directory);\n    Path path = directory.resolve(&quot;TestFile.txt&quot;);\n    if (Files.exists(path))\n        Files.delete(path); // Works\n    return Files.newOutputStream(path, StandardOpenOption.CREATE_NEW, StandardOpenOption.TRUNCATE_EXISTING,\n            StandardOpenOption.WRITE); // Works\n}\n</code></pre>\n<p>Why is this happening?</p>\n"},{"tags":["java","string","type-conversion","integer"],"comments":[{"owner":{"account_id":72095,"reputation":18817,"user_id":208273,"display_name":"Ryan M"},"score":3,"creation_date":1677721804,"post_id":5585779,"comment_id":133395903,"body_markdown":"**Mod note**: This question has **30 answers** and another **82 deleted answers**, most of which were removed for repeating existing answers.  If you are considering adding a new answer to this question, please ensure that you&#39;ve read all the existing answers and confirmed that your answer adds something new and useful.","body":"<b>Mod note</b>: This question has <b>30 answers</b> and another <b>82 deleted answers</b>, most of which were removed for repeating existing answers.  If you are considering adding a new answer to this question, please ensure that you&#39;ve read all the existing answers and confirmed that your answer adds something new and useful."},{"owner":{"account_id":47283,"reputation":703807,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":6,"creation_date":1677737297,"post_id":5585779,"comment_id":133397770,"body_markdown":"And seriously ... just &#39;cos you can think of yet another wacky way to do the conversion ... don&#39;t imagine that telling everyone about it is actually a helpful / useful thing to do.","body":"And seriously ... just &#39;cos you can think of yet another wacky way to do the conversion ... don&#39;t imagine that telling everyone about it is actually a helpful / useful thing to do."}],"answers":[{"tags":[],"owner":{"account_id":14531,"reputation":118860,"user_id":29995,"accept_rate":77,"display_name":"Rob Hruska"},"down_vote_count":4,"up_vote_count":4523,"is_accepted":true,"score":4519,"last_activity_date":1675786917,"creation_date":1302200981,"answer_id":5585800,"question_id":5585779,"body_markdown":"    String myString = &quot;1234&quot;;\r\n    int foo = Integer.parseInt(myString);\r\n\r\nIf you look at the [Java documentation][1] you&#39;ll notice the &quot;catch&quot; is that this function can throw a `NumberFormatException`, which you can handle:\r\n```java\r\nint foo;\r\ntry {\r\n   foo = Integer.parseInt(myString);\r\n}\r\ncatch (NumberFormatException e) {\r\n   foo = 0;\r\n}\r\n```\r\n(This treatment defaults a malformed number to `0`, but you can do something else if you like.)\r\n\r\nAlternatively, you can use an `Ints` method from the Guava library, which in combination with Java 8&#39;s `Optional`, makes for a powerful and concise way to convert a string into an int:\r\n\r\n    import com.google.common.primitives.Ints;\r\n\r\n    int foo = Optional.ofNullable(myString)\r\n     .map(Ints::tryParse)\r\n     .orElse(0)\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/Integer.html#parseInt(java.lang.String)\r\n","title":"How do I convert a String to an int in Java?","body":"<pre><code>String myString = &quot;1234&quot;;\nint foo = Integer.parseInt(myString);\n</code></pre>\n<p>If you look at the <a href=\"https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/Integer.html#parseInt(java.lang.String)\" rel=\"noreferrer\">Java documentation</a> you'll notice the &quot;catch&quot; is that this function can throw a <code>NumberFormatException</code>, which you can handle:</p>\n<pre class=\"lang-java prettyprint-override\"><code>int foo;\ntry {\n   foo = Integer.parseInt(myString);\n}\ncatch (NumberFormatException e) {\n   foo = 0;\n}\n</code></pre>\n<p>(This treatment defaults a malformed number to <code>0</code>, but you can do something else if you like.)</p>\n<p>Alternatively, you can use an <code>Ints</code> method from the Guava library, which in combination with Java 8's <code>Optional</code>, makes for a powerful and concise way to convert a string into an int:</p>\n<pre><code>import com.google.common.primitives.Ints;\n\nint foo = Optional.ofNullable(myString)\n .map(Ints::tryParse)\n .orElse(0)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":279561,"reputation":26273,"user_id":574799,"accept_rate":74,"display_name":"lukastymo"},"down_vote_count":1,"up_vote_count":780,"is_accepted":false,"score":779,"last_activity_date":1435695343,"creation_date":1302201400,"answer_id":5585876,"question_id":5585779,"body_markdown":"For example, here are two ways:\r\n\r\n    Integer x = Integer.valueOf(str);\r\n    // or\r\n    int y = Integer.parseInt(str);\r\n\r\nThere is a slight difference between these methods: \r\n\r\n- `valueOf` returns a new or cached instance of `java.lang.Integer`\r\n- `parseInt` returns primitive `int`. \r\n\r\nThe same is for all cases: `Short.valueOf`/`parseShort`, `Long.valueOf`/`parseLong`, etc.\r\n","title":"How do I convert a String to an int in Java?","body":"<p>For example, here are two ways:</p>\n\n<pre><code>Integer x = Integer.valueOf(str);\n// or\nint y = Integer.parseInt(str);\n</code></pre>\n\n<p>There is a slight difference between these methods: </p>\n\n<ul>\n<li><code>valueOf</code> returns a new or cached instance of <code>java.lang.Integer</code></li>\n<li><code>parseInt</code> returns primitive <code>int</code>. </li>\n</ul>\n\n<p>The same is for all cases: <code>Short.valueOf</code>/<code>parseShort</code>, <code>Long.valueOf</code>/<code>parseLong</code>, etc.</p>\n"},{"tags":[],"owner":{"account_id":117057,"reputation":3881,"user_id":306711,"accept_rate":100,"display_name":"Ali Akdurak"},"down_vote_count":1,"up_vote_count":274,"is_accepted":false,"score":273,"last_activity_date":1455665736,"creation_date":1367304895,"answer_id":16293980,"question_id":5585779,"body_markdown":"Well, a very important point to consider is that the Integer parser throws NumberFormatException as stated in [Javadoc][1]. \r\n\r\n    int foo;\r\n    String StringThatCouldBeANumberOrNot = &quot;26263Hello&quot;; //will throw exception\r\n    String StringThatCouldBeANumberOrNot2 = &quot;26263&quot;; //will not throw exception\r\n    try {\r\n          foo = Integer.parseInt(StringThatCouldBeANumberOrNot);\r\n    } catch (NumberFormatException e) {\r\n          //Will Throw exception!\r\n          //do something! anything to handle the exception.\r\n    }\r\n\r\n    try {\r\n          foo = Integer.parseInt(StringThatCouldBeANumberOrNot2);\r\n    } catch (NumberFormatException e) {\r\n          //No problem this time, but still it is good practice to care about exceptions.\r\n          //Never trust user input :)\r\n          //Do something! Anything to handle the exception.\r\n    }\r\n\r\nIt is important to handle this exception when trying to get integer values from split arguments or dynamically parsing something.\r\n\r\n  [1]: http://docs.oracle.com/javase/6/docs/api/java/lang/Integer.html#parseInt%28java.lang.String%29","title":"How do I convert a String to an int in Java?","body":"<p>Well, a very important point to consider is that the Integer parser throws NumberFormatException as stated in <a href=\"http://docs.oracle.com/javase/6/docs/api/java/lang/Integer.html#parseInt%28java.lang.String%29\" rel=\"noreferrer\">Javadoc</a>. </p>\n\n<pre><code>int foo;\nString StringThatCouldBeANumberOrNot = \"26263Hello\"; //will throw exception\nString StringThatCouldBeANumberOrNot2 = \"26263\"; //will not throw exception\ntry {\n      foo = Integer.parseInt(StringThatCouldBeANumberOrNot);\n} catch (NumberFormatException e) {\n      //Will Throw exception!\n      //do something! anything to handle the exception.\n}\n\ntry {\n      foo = Integer.parseInt(StringThatCouldBeANumberOrNot2);\n} catch (NumberFormatException e) {\n      //No problem this time, but still it is good practice to care about exceptions.\n      //Never trust user input :)\n      //Do something! Anything to handle the exception.\n}\n</code></pre>\n\n<p>It is important to handle this exception when trying to get integer values from split arguments or dynamically parsing something.</p>\n"},{"tags":[],"owner":{"account_id":1351039,"reputation":7927,"user_id":1290668,"accept_rate":73,"display_name":"Billz"},"down_vote_count":52,"up_vote_count":145,"is_accepted":false,"score":93,"last_activity_date":1688557726,"creation_date":1378865304,"answer_id":18731580,"question_id":5585779,"body_markdown":"Do it manually:\r\n\r\n```java\r\n    public static int strToInt(String str) {\r\n        int i = 0;\r\n        int num = 0;\r\n        boolean isNeg = false;\r\n\r\n        // Check for negative sign; if it&#39;s there, set the isNeg flag\r\n        if (str.charAt(0) == &#39;-&#39;) {\r\n            isNeg = true;\r\n            i = 1;\r\n        }\r\n\r\n        // Process each character of the string;\r\n        while (i &lt; str.length()) {\r\n            num *= 10;\r\n            num += str.charAt(i++) - &#39;0&#39;; // Minus the ASCII code of &#39;0&#39; to get the value of the charAt(i++).\r\n        }\r\n\r\n        if (isNeg)\r\n            num = -num;\r\n\r\n        return num;\r\n    }\r\n```\r\n","title":"How do I convert a String to an int in Java?","body":"<p>Do it manually:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    public static int strToInt(String str) {\n        int i = 0;\n        int num = 0;\n        boolean isNeg = false;\n\n        // Check for negative sign; if it's there, set the isNeg flag\n        if (str.charAt(0) == '-') {\n            isNeg = true;\n            i = 1;\n        }\n\n        // Process each character of the string;\n        while (i &lt; str.length()) {\n            num *= 10;\n            num += str.charAt(i++) - '0'; // Minus the ASCII code of '0' to get the value of the charAt(i++).\n        }\n\n        if (isNeg)\n            num = -num;\n\n        return num;\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2180366,"reputation":2655,"user_id":1930011,"accept_rate":61,"display_name":"Thijser"},"down_vote_count":13,"up_vote_count":33,"is_accepted":false,"score":20,"last_activity_date":1574613582,"creation_date":1382274709,"answer_id":19477740,"question_id":5585779,"body_markdown":"You can also begin by removing all non-numerical characters and then parsing the integer:\r\n\r\n    String mystr = mystr.replaceAll(&quot;[^\\\\d]&quot;, &quot;&quot;);\r\n    int number = Integer.parseInt(mystr);\r\n\r\nBut be warned that this only works for non-negative numbers. \r\n","title":"How do I convert a String to an int in Java?","body":"<p>You can also begin by removing all non-numerical characters and then parsing the integer:</p>\n\n<pre><code>String mystr = mystr.replaceAll(\"[^\\\\d]\", \"\");\nint number = Integer.parseInt(mystr);\n</code></pre>\n\n<p>But be warned that this only works for non-negative numbers. </p>\n"},{"tags":[],"owner":{"account_id":3761540,"reputation":693,"user_id":3126359,"accept_rate":83,"display_name":"Oak"},"down_vote_count":8,"up_vote_count":54,"is_accepted":false,"score":46,"last_activity_date":1598024758,"creation_date":1395359479,"answer_id":22547555,"question_id":5585779,"body_markdown":"Currently I&#39;m doing an assignment for college, where I can&#39;t use certain expressions, such as the ones above, and by looking at the ASCII table, I managed to do it. It&#39;s a far more complex code, but it could help others that are restricted like I was.\r\n\r\nThe first thing to do is to receive the input, in this case, a string of digits; I&#39;ll call it `String number`, and in this case, I&#39;ll exemplify it using the number 12, therefore `String number = &quot;12&quot;;`\r\n\r\nAnother limitation was the fact that I couldn&#39;t use repetitive cycles, therefore, a `for` cycle (which would have been perfect) can&#39;t be used either. This limits us a bit, but then again, that&#39;s the goal. Since I only needed two digits (taking the last two digits), a simple `charAt`solved it:\r\n\r\n     // Obtaining the integer values of the char 1 and 2 in ASCII\r\n     int semilastdigitASCII = number.charAt(number.length() - 2);\r\n     int lastdigitASCII = number.charAt(number.length() - 1);\r\n\r\nHaving the codes, we just need to look up at the table, and make the necessary adjustments:\r\n\r\n     double semilastdigit = semilastdigitASCII - 48;  // A quick look, and -48 is the key\r\n     double lastdigit = lastdigitASCII - 48;\r\n\r\nNow, why double? Well, because of a really &quot;weird&quot; step. Currently we have two doubles, 1 and 2, but we need to turn it into 12, there isn&#39;t any mathematic operation that we can do.\r\n\r\nWe&#39;re dividing the latter (lastdigit) by 10 in the fashion ` 2/10 = 0.2 ` (hence why double) like this:\r\n\r\n     lastdigit = lastdigit / 10;\r\n\r\nThis is merely playing with numbers. We were turning the last digit into a decimal. But now, look at what happens:\r\n\r\n     double jointdigits = semilastdigit + lastdigit; // 1.0 + 0.2 = 1.2\r\n\r\nWithout getting too into the math, we&#39;re simply isolating units the digits of a number. You see, since we only consider 0-9, dividing by a multiple of 10 is like creating a &quot;box&quot; where you store it (think back at when your first grade teacher explained you what a unit and a hundred were). So:\r\n\r\n     int finalnumber = (int) (jointdigits*10); // Be sure to use parentheses &quot;()&quot;\r\n\r\nAnd there you go. You turned a String of digits (in this case, two digits), into an integer composed of those two digits, considering the following limitations:\r\n\r\n- No repetitive cycles\r\n- No &quot;Magic&quot; Expressions such as parseInt\r\n","title":"How do I convert a String to an int in Java?","body":"<p>Currently I'm doing an assignment for college, where I can't use certain expressions, such as the ones above, and by looking at the ASCII table, I managed to do it. It's a far more complex code, but it could help others that are restricted like I was.</p>\n<p>The first thing to do is to receive the input, in this case, a string of digits; I'll call it <code>String number</code>, and in this case, I'll exemplify it using the number 12, therefore <code>String number = &quot;12&quot;;</code></p>\n<p>Another limitation was the fact that I couldn't use repetitive cycles, therefore, a <code>for</code> cycle (which would have been perfect) can't be used either. This limits us a bit, but then again, that's the goal. Since I only needed two digits (taking the last two digits), a simple <code>charAt</code>solved it:</p>\n<pre><code> // Obtaining the integer values of the char 1 and 2 in ASCII\n int semilastdigitASCII = number.charAt(number.length() - 2);\n int lastdigitASCII = number.charAt(number.length() - 1);\n</code></pre>\n<p>Having the codes, we just need to look up at the table, and make the necessary adjustments:</p>\n<pre><code> double semilastdigit = semilastdigitASCII - 48;  // A quick look, and -48 is the key\n double lastdigit = lastdigitASCII - 48;\n</code></pre>\n<p>Now, why double? Well, because of a really &quot;weird&quot; step. Currently we have two doubles, 1 and 2, but we need to turn it into 12, there isn't any mathematic operation that we can do.</p>\n<p>We're dividing the latter (lastdigit) by 10 in the fashion <code>2/10 = 0.2</code> (hence why double) like this:</p>\n<pre><code> lastdigit = lastdigit / 10;\n</code></pre>\n<p>This is merely playing with numbers. We were turning the last digit into a decimal. But now, look at what happens:</p>\n<pre><code> double jointdigits = semilastdigit + lastdigit; // 1.0 + 0.2 = 1.2\n</code></pre>\n<p>Without getting too into the math, we're simply isolating units the digits of a number. You see, since we only consider 0-9, dividing by a multiple of 10 is like creating a &quot;box&quot; where you store it (think back at when your first grade teacher explained you what a unit and a hundred were). So:</p>\n<pre><code> int finalnumber = (int) (jointdigits*10); // Be sure to use parentheses &quot;()&quot;\n</code></pre>\n<p>And there you go. You turned a String of digits (in this case, two digits), into an integer composed of those two digits, considering the following limitations:</p>\n<ul>\n<li>No repetitive cycles</li>\n<li>No &quot;Magic&quot; Expressions such as parseInt</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":2495474,"reputation":1022,"user_id":2172026,"display_name":"fitorec"},"down_vote_count":3,"up_vote_count":26,"is_accepted":false,"score":23,"last_activity_date":1688558045,"creation_date":1400859481,"answer_id":23833311,"question_id":5585779,"body_markdown":"I have a solution, but I do not know how effective it is. But it works well, and I think you could improve it. On the other hand, I did a couple of tests with [JUnit][1] which step correctly. I attached the function and testing:\r\n\r\n```java\r\n    public static Integer str2Int(String str) {\r\n        Integer result = null;\r\n        if (null == str || 0 == str.length()) {\r\n            return null;\r\n        }\r\n\r\n        try {\r\n            result = Integer.parseInt(str);\r\n        } \r\n        catch (NumberFormatException e) {\r\n            String negativeMode = &quot;&quot;;\r\n            if (str.indexOf(&#39;-&#39;) != -1)\r\n                negativeMode = &quot;-&quot;;\r\n\r\n            str = str.replaceAll(&quot;-&quot;, &quot;&quot;);\r\n\r\n            if (str.indexOf(&#39;.&#39;) != -1) {\r\n                str = str.substring(0, str.indexOf(&#39;.&#39;));\r\n                if (str.length() == 0) {\r\n                    return (Integer) 0;\r\n                }\r\n            }\r\n\r\n            String strNum = str.replaceAll(&quot;[^\\\\d]&quot;, &quot;&quot; );\r\n            if (0 == strNum.length()) {\r\n                return null;\r\n            }\r\n\r\n            result = Integer.parseInt(negativeMode + strNum);\r\n        }\r\n\r\n        return result;\r\n    }\r\n```\r\n\r\nTesting with JUnit:\r\n\r\n    @Test\r\n    public void testStr2Int() {\r\n        assertEquals(&quot;is numeric&quot;, (Integer) (-5), Helper.str2Int(&quot;-5&quot;));\r\n        assertEquals(&quot;is numeric&quot;, (Integer) 50, Helper.str2Int(&quot;50.00&quot;));\r\n        assertEquals(&quot;is numeric&quot;, (Integer) 20, Helper.str2Int(&quot;$ 20.90&quot;));\r\n        assertEquals(&quot;is numeric&quot;, (Integer) 5, Helper.str2Int(&quot; 5.321&quot;));\r\n        assertEquals(&quot;is numeric&quot;, (Integer) 1000, Helper.str2Int(&quot;1,000.50&quot;));\r\n        assertEquals(&quot;is numeric&quot;, (Integer) 0, Helper.str2Int(&quot;0.50&quot;));\r\n        assertEquals(&quot;is numeric&quot;, (Integer) 0, Helper.str2Int(&quot;.50&quot;));\r\n        assertEquals(&quot;is numeric&quot;, (Integer) 0, Helper.str2Int(&quot;-.10&quot;));\r\n        assertEquals(&quot;is numeric&quot;, (Integer) Integer.MAX_VALUE, Helper.str2Int(&quot;&quot; + Integer.MAX_VALUE));\r\n        assertEquals(&quot;is numeric&quot;, (Integer) Integer.MIN_VALUE, Helper.str2Int(&quot;&quot; + Integer.MIN_VALUE));\r\n        assertEquals(&quot;Not is numeric&quot;, null, Helper.str2Int(&quot;czv.,xcvsa&quot;));\r\n\r\n        /**\r\n         * Dynamic test\r\n         */\r\n        for (Integer num = 0; num &lt; 1000; num++) {\r\n            for (int spaces = 1; spaces &lt; 6; spaces++) {\r\n                String numStr = String.format(&quot;%0&quot; + spaces + &quot;d&quot;, num);\r\n                Integer numNeg = num * -1;\r\n                assertEquals(numStr + &quot;: is numeric&quot;, num, Helper.str2Int(numStr));\r\n                assertEquals(numNeg + &quot;: is numeric&quot;, numNeg, Helper.str2Int(&quot;- &quot; + numStr));\r\n            }\r\n        }\r\n    }\r\n\r\n  [1]: http://en.wikipedia.org/wiki/JUnit\r\n\r\n","title":"How do I convert a String to an int in Java?","body":"<p>I have a solution, but I do not know how effective it is. But it works well, and I think you could improve it. On the other hand, I did a couple of tests with <a href=\"http://en.wikipedia.org/wiki/JUnit\" rel=\"nofollow noreferrer\">JUnit</a> which step correctly. I attached the function and testing:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    public static Integer str2Int(String str) {\n        Integer result = null;\n        if (null == str || 0 == str.length()) {\n            return null;\n        }\n\n        try {\n            result = Integer.parseInt(str);\n        } \n        catch (NumberFormatException e) {\n            String negativeMode = &quot;&quot;;\n            if (str.indexOf('-') != -1)\n                negativeMode = &quot;-&quot;;\n\n            str = str.replaceAll(&quot;-&quot;, &quot;&quot;);\n\n            if (str.indexOf('.') != -1) {\n                str = str.substring(0, str.indexOf('.'));\n                if (str.length() == 0) {\n                    return (Integer) 0;\n                }\n            }\n\n            String strNum = str.replaceAll(&quot;[^\\\\d]&quot;, &quot;&quot; );\n            if (0 == strNum.length()) {\n                return null;\n            }\n\n            result = Integer.parseInt(negativeMode + strNum);\n        }\n\n        return result;\n    }\n</code></pre>\n<p>Testing with JUnit:</p>\n<pre><code>@Test\npublic void testStr2Int() {\n    assertEquals(&quot;is numeric&quot;, (Integer) (-5), Helper.str2Int(&quot;-5&quot;));\n    assertEquals(&quot;is numeric&quot;, (Integer) 50, Helper.str2Int(&quot;50.00&quot;));\n    assertEquals(&quot;is numeric&quot;, (Integer) 20, Helper.str2Int(&quot;$ 20.90&quot;));\n    assertEquals(&quot;is numeric&quot;, (Integer) 5, Helper.str2Int(&quot; 5.321&quot;));\n    assertEquals(&quot;is numeric&quot;, (Integer) 1000, Helper.str2Int(&quot;1,000.50&quot;));\n    assertEquals(&quot;is numeric&quot;, (Integer) 0, Helper.str2Int(&quot;0.50&quot;));\n    assertEquals(&quot;is numeric&quot;, (Integer) 0, Helper.str2Int(&quot;.50&quot;));\n    assertEquals(&quot;is numeric&quot;, (Integer) 0, Helper.str2Int(&quot;-.10&quot;));\n    assertEquals(&quot;is numeric&quot;, (Integer) Integer.MAX_VALUE, Helper.str2Int(&quot;&quot; + Integer.MAX_VALUE));\n    assertEquals(&quot;is numeric&quot;, (Integer) Integer.MIN_VALUE, Helper.str2Int(&quot;&quot; + Integer.MIN_VALUE));\n    assertEquals(&quot;Not is numeric&quot;, null, Helper.str2Int(&quot;czv.,xcvsa&quot;));\n\n    /**\n     * Dynamic test\n     */\n    for (Integer num = 0; num &lt; 1000; num++) {\n        for (int spaces = 1; spaces &lt; 6; spaces++) {\n            String numStr = String.format(&quot;%0&quot; + spaces + &quot;d&quot;, num);\n            Integer numNeg = num * -1;\n            assertEquals(numStr + &quot;: is numeric&quot;, num, Helper.str2Int(numStr));\n            assertEquals(numNeg + &quot;: is numeric&quot;, numNeg, Helper.str2Int(&quot;- &quot; + numStr));\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2716952,"reputation":789,"user_id":2344115,"display_name":"Ryboflavin"},"down_vote_count":1,"up_vote_count":67,"is_accepted":false,"score":66,"last_activity_date":1457216728,"creation_date":1440677269,"answer_id":32248950,"question_id":5585779,"body_markdown":"An alternate solution is to use [Apache Commons&#39;][1] NumberUtils:\r\n\r\n    int num = NumberUtils.toInt(&quot;1234&quot;);\r\n\r\nThe Apache utility is nice because if the string is an invalid number format then 0 is always returned. Hence saving you the try catch block.\r\n\r\n[Apache NumberUtils API Version 3.4][2]\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Apache_Commons\r\n  [2]: https://commons.apache.org/proper/commons-lang/javadocs/api-3.4/org/apache/commons/lang3/math/NumberUtils.html#toInt(java.lang.String)","title":"How do I convert a String to an int in Java?","body":"<p>An alternate solution is to use <a href=\"https://en.wikipedia.org/wiki/Apache_Commons\">Apache Commons'</a> NumberUtils:</p>\n\n<pre><code>int num = NumberUtils.toInt(\"1234\");\n</code></pre>\n\n<p>The Apache utility is nice because if the string is an invalid number format then 0 is always returned. Hence saving you the try catch block.</p>\n\n<p><a href=\"https://commons.apache.org/proper/commons-lang/javadocs/api-3.4/org/apache/commons/lang3/math/NumberUtils.html#toInt(java.lang.String)\">Apache NumberUtils API Version 3.4</a></p>\n"},{"tags":[],"owner":{"account_id":4641064,"reputation":619,"user_id":3760904,"accept_rate":50,"display_name":"Giridhar Kumar"},"down_vote_count":1,"up_vote_count":25,"is_accepted":false,"score":24,"last_activity_date":1455666647,"creation_date":1445334695,"answer_id":33233407,"question_id":5585779,"body_markdown":"We can use the `parseInt(String str)` method of the `Integer` wrapper class for converting a String value to an integer value.\r\n\r\nFor example:\r\n\r\n    String strValue = &quot;12345&quot;;\r\n    Integer intValue = Integer.parseInt(strVal);\r\n\r\nThe `Integer` class also provides the `valueOf(String str)` method:\r\n\r\n    String strValue = &quot;12345&quot;;\r\n    Integer intValue = Integer.valueOf(strValue);\r\n\r\nWe can also use `toInt(String strValue)` of [NumberUtils Utility Class](https://commons.apache.org/proper/commons-lang/javadocs/api-3.4/org/apache/commons/lang3/math/NumberUtils.html) for the conversion:\r\n\r\n    String strValue = &quot;12345&quot;;\r\n    Integer intValue = NumberUtils.toInt(strValue);","title":"How do I convert a String to an int in Java?","body":"<p>We can use the <code>parseInt(String str)</code> method of the <code>Integer</code> wrapper class for converting a String value to an integer value.</p>\n\n<p>For example:</p>\n\n<pre><code>String strValue = \"12345\";\nInteger intValue = Integer.parseInt(strVal);\n</code></pre>\n\n<p>The <code>Integer</code> class also provides the <code>valueOf(String str)</code> method:</p>\n\n<pre><code>String strValue = \"12345\";\nInteger intValue = Integer.valueOf(strValue);\n</code></pre>\n\n<p>We can also use <code>toInt(String strValue)</code> of <a href=\"https://commons.apache.org/proper/commons-lang/javadocs/api-3.4/org/apache/commons/lang3/math/NumberUtils.html\">NumberUtils Utility Class</a> for the conversion:</p>\n\n<pre><code>String strValue = \"12345\";\nInteger intValue = NumberUtils.toInt(strValue);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4812242,"reputation":55062,"user_id":3885376,"accept_rate":64,"display_name":"ROMANIA_engineer"},"down_vote_count":0,"up_vote_count":49,"is_accepted":false,"score":49,"last_activity_date":1688557826,"creation_date":1457311369,"answer_id":35834484,"question_id":5585779,"body_markdown":"### [`Integer.decode`][1]\r\n\r\nYou can also use `public static Integer decode(String nm) throws NumberFormatException`.\r\n\r\nIt also works for bases 8 and 16:\r\n\r\n```java\r\n    // base 10\r\n    Integer.parseInt(&quot;12&quot;);     // 12 - int\r\n    Integer.valueOf(&quot;12&quot;);      // 12 - Integer\r\n    Integer.decode(&quot;12&quot;);       // 12 - Integer\r\n\r\n    // base 8\r\n    // 10 (0,1,...,7,10,11,12)\r\n    Integer.parseInt(&quot;12&quot;, 8);  // 10 - int\r\n    Integer.valueOf(&quot;12&quot;, 8);   // 10 - Integer\r\n    Integer.decode(&quot;012&quot;);      // 10 - Integer\r\n\r\n    // base 16\r\n    // 18 (0,1,...,F,10,11,12)\r\n    Integer.parseInt(&quot;12&quot;, 16); // 18 - int\r\n    Integer.valueOf(&quot;12&quot;, 16);  // 18 - Integer\r\n    Integer.decode(&quot;#12&quot;);      // 18 - Integer\r\n    Integer.decode(&quot;0x12&quot;);     // 18 - Integer\r\n    Integer.decode(&quot;0X12&quot;);     // 18 - Integer\r\n\r\n    // base 2\r\n    Integer.parseInt(&quot;11&quot;, 2);  // 3 - int\r\n    Integer.valueOf(&quot;11&quot;, 2);   // 3 - Integer\r\n```\r\n\r\nIf you want to get `int` instead of `Integer` you can use:\r\n\r\n1. Unboxing:\r\n\r\n        int val = Integer.decode(&quot;12&quot;); \r\n\r\n2. `intValue()`:\r\n\r\n        Integer.decode(&quot;12&quot;).intValue();\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/lang/Integer.html#decode-java.lang.String-","title":"How do I convert a String to an int in Java?","body":"<h3><a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/Integer.html#decode-java.lang.String-\" rel=\"nofollow noreferrer\"><code>Integer.decode</code></a></h3>\n<p>You can also use <code>public static Integer decode(String nm) throws NumberFormatException</code>.</p>\n<p>It also works for bases 8 and 16:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    // base 10\n    Integer.parseInt(&quot;12&quot;);     // 12 - int\n    Integer.valueOf(&quot;12&quot;);      // 12 - Integer\n    Integer.decode(&quot;12&quot;);       // 12 - Integer\n\n    // base 8\n    // 10 (0,1,...,7,10,11,12)\n    Integer.parseInt(&quot;12&quot;, 8);  // 10 - int\n    Integer.valueOf(&quot;12&quot;, 8);   // 10 - Integer\n    Integer.decode(&quot;012&quot;);      // 10 - Integer\n\n    // base 16\n    // 18 (0,1,...,F,10,11,12)\n    Integer.parseInt(&quot;12&quot;, 16); // 18 - int\n    Integer.valueOf(&quot;12&quot;, 16);  // 18 - Integer\n    Integer.decode(&quot;#12&quot;);      // 18 - Integer\n    Integer.decode(&quot;0x12&quot;);     // 18 - Integer\n    Integer.decode(&quot;0X12&quot;);     // 18 - Integer\n\n    // base 2\n    Integer.parseInt(&quot;11&quot;, 2);  // 3 - int\n    Integer.valueOf(&quot;11&quot;, 2);   // 3 - Integer\n</code></pre>\n<p>If you want to get <code>int</code> instead of <code>Integer</code> you can use:</p>\n<ol>\n<li><p>Unboxing:</p>\n<pre><code> int val = Integer.decode(&quot;12&quot;); \n</code></pre>\n</li>\n<li><p><code>intValue()</code>:</p>\n<pre><code> Integer.decode(&quot;12&quot;).intValue();\n</code></pre>\n</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":4816487,"reputation":4550,"user_id":3888450,"accept_rate":89,"display_name":"Stefan Dollase"},"down_vote_count":1,"up_vote_count":33,"is_accepted":false,"score":32,"last_activity_date":1586711214,"creation_date":1459739588,"answer_id":36394016,"question_id":5585779,"body_markdown":"Whenever there is the slightest possibility that the given String does not contain an Integer, you have to handle this special case. Sadly, the standard Java methods `Integer::parseInt` and `Integer::valueOf` throw a `NumberFormatException` to signal this special case. Thus, you have to use exceptions for flow control, which is generally considered bad coding style.\r\n\r\nIn my opinion, this special case should be handled by returning an empty `Optional&lt;Integer&gt;`. Since Java does not offer such a method, I use the following wrapper:\r\n\r\n\tprivate Optional&lt;Integer&gt; tryParseInteger(String string) {\r\n\t\ttry {\r\n\t\t\treturn Optional.of(Integer.valueOf(string));\r\n\t\t} catch (NumberFormatException e) {\r\n\t\t\treturn Optional.empty();\r\n\t\t}\r\n\t}\r\n\r\nExample usage:\r\n\r\n\t// prints &quot;12&quot;\r\n\tSystem.out.println(tryParseInteger(&quot;12&quot;).map(i -&gt; i.toString()).orElse(&quot;invalid&quot;));\r\n\t// prints &quot;-1&quot;\r\n\tSystem.out.println(tryParseInteger(&quot;-1&quot;).map(i -&gt; i.toString()).orElse(&quot;invalid&quot;));\r\n\t// prints &quot;invalid&quot;\r\n\tSystem.out.println(tryParseInteger(&quot;ab&quot;).map(i -&gt; i.toString()).orElse(&quot;invalid&quot;));\r\n\r\nWhile this is still using exceptions for flow control internally, the usage code becomes very clean. Also, you can clearly distinguish the case where `-1` is parsed as a valid value and the case where an invalid String could not be parsed.","title":"How do I convert a String to an int in Java?","body":"<p>Whenever there is the slightest possibility that the given String does not contain an Integer, you have to handle this special case. Sadly, the standard Java methods <code>Integer::parseInt</code> and <code>Integer::valueOf</code> throw a <code>NumberFormatException</code> to signal this special case. Thus, you have to use exceptions for flow control, which is generally considered bad coding style.</p>\n\n<p>In my opinion, this special case should be handled by returning an empty <code>Optional&lt;Integer&gt;</code>. Since Java does not offer such a method, I use the following wrapper:</p>\n\n<pre><code>private Optional&lt;Integer&gt; tryParseInteger(String string) {\n    try {\n        return Optional.of(Integer.valueOf(string));\n    } catch (NumberFormatException e) {\n        return Optional.empty();\n    }\n}\n</code></pre>\n\n<p>Example usage:</p>\n\n<pre><code>// prints \"12\"\nSystem.out.println(tryParseInteger(\"12\").map(i -&gt; i.toString()).orElse(\"invalid\"));\n// prints \"-1\"\nSystem.out.println(tryParseInteger(\"-1\").map(i -&gt; i.toString()).orElse(\"invalid\"));\n// prints \"invalid\"\nSystem.out.println(tryParseInteger(\"ab\").map(i -&gt; i.toString()).orElse(\"invalid\"));\n</code></pre>\n\n<p>While this is still using exceptions for flow control internally, the usage code becomes very clean. Also, you can clearly distinguish the case where <code>-1</code> is parsed as a valid value and the case where an invalid String could not be parsed.</p>\n"},{"tags":[],"owner":{"account_id":3130088,"reputation":43207,"user_id":2648077,"accept_rate":80,"display_name":"Alireza Fattahi"},"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1567465681,"creation_date":1469510787,"answer_id":38581630,"question_id":5585779,"body_markdown":"As mentioned, Apache Commons&#39; `NumberUtils` can do it. It returns `0` if it cannot convert a string to an int.\r\n\r\nYou can also define your own default value:\r\n\r\n    NumberUtils.toInt(String str, int defaultValue)\r\n\r\nExample:\r\n\r\n    NumberUtils.toInt(&quot;3244&quot;, 1) = 3244\r\n    NumberUtils.toInt(&quot;&quot;, 1)     = 1\r\n    NumberUtils.toInt(null, 5)   = 5\r\n    NumberUtils.toInt(&quot;Hi&quot;, 6)   = 6\r\n    NumberUtils.toInt(&quot; 32 &quot;, 1) = 1 // Space in numbers are not allowed\r\n    NumberUtils.toInt(StringUtils.trimToEmpty(&quot;  32 &quot;, 1)) = 32;\r\n\r\n\r\n","title":"How do I convert a String to an int in Java?","body":"<p>As mentioned, Apache Commons' <code>NumberUtils</code> can do it. It returns <code>0</code> if it cannot convert a string to an int.</p>\n\n<p>You can also define your own default value:</p>\n\n<pre><code>NumberUtils.toInt(String str, int defaultValue)\n</code></pre>\n\n<p>Example:</p>\n\n<pre><code>NumberUtils.toInt(\"3244\", 1) = 3244\nNumberUtils.toInt(\"\", 1)     = 1\nNumberUtils.toInt(null, 5)   = 5\nNumberUtils.toInt(\"Hi\", 6)   = 6\nNumberUtils.toInt(\" 32 \", 1) = 1 // Space in numbers are not allowed\nNumberUtils.toInt(StringUtils.trimToEmpty(\"  32 \", 1)) = 32;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":308156,"reputation":13672,"user_id":619860,"accept_rate":80,"display_name":"Hoa Nguyen"},"down_vote_count":1,"up_vote_count":14,"is_accepted":false,"score":13,"last_activity_date":1567465591,"creation_date":1470062648,"answer_id":38701772,"question_id":5585779,"body_markdown":"Apart from the previous answers, I would like to add several functions. These are results while you use them:\r\n\r\n    public static void main(String[] args) {\r\n      System.out.println(parseIntOrDefault(&quot;123&quot;, 0)); // 123\r\n      System.out.println(parseIntOrDefault(&quot;aaa&quot;, 0)); // 0\r\n      System.out.println(parseIntOrDefault(&quot;aaa456&quot;, 3, 0)); // 456\r\n      System.out.println(parseIntOrDefault(&quot;aaa789bbb&quot;, 3, 6, 0)); // 789\r\n    }\r\n\r\nImplementation:\r\n\r\n    public static int parseIntOrDefault(String value, int defaultValue) {\r\n      int result = defaultValue;\r\n      try {\r\n        result = Integer.parseInt(value);\r\n      }\r\n      catch (Exception e) {\r\n      }\r\n      return result;\r\n    }\r\n\r\n    public static int parseIntOrDefault(String value, int beginIndex, int defaultValue) {\r\n      int result = defaultValue;\r\n      try {\r\n        String stringValue = value.substring(beginIndex);\r\n        result = Integer.parseInt(stringValue);\r\n      }\r\n      catch (Exception e) {\r\n      }\r\n      return result;\r\n    }\r\n\r\n    public static int parseIntOrDefault(String value, int beginIndex, int endIndex, int defaultValue) {\r\n      int result = defaultValue;\r\n      try {\r\n        String stringValue = value.substring(beginIndex, endIndex);\r\n        result = Integer.parseInt(stringValue);\r\n      }\r\n      catch (Exception e) {\r\n      }\r\n      return result;\r\n    }\r\n\r\n\r\n\r\n","title":"How do I convert a String to an int in Java?","body":"<p>Apart from the previous answers, I would like to add several functions. These are results while you use them:</p>\n\n<pre><code>public static void main(String[] args) {\n  System.out.println(parseIntOrDefault(\"123\", 0)); // 123\n  System.out.println(parseIntOrDefault(\"aaa\", 0)); // 0\n  System.out.println(parseIntOrDefault(\"aaa456\", 3, 0)); // 456\n  System.out.println(parseIntOrDefault(\"aaa789bbb\", 3, 6, 0)); // 789\n}\n</code></pre>\n\n<p>Implementation:</p>\n\n<pre><code>public static int parseIntOrDefault(String value, int defaultValue) {\n  int result = defaultValue;\n  try {\n    result = Integer.parseInt(value);\n  }\n  catch (Exception e) {\n  }\n  return result;\n}\n\npublic static int parseIntOrDefault(String value, int beginIndex, int defaultValue) {\n  int result = defaultValue;\n  try {\n    String stringValue = value.substring(beginIndex);\n    result = Integer.parseInt(stringValue);\n  }\n  catch (Exception e) {\n  }\n  return result;\n}\n\npublic static int parseIntOrDefault(String value, int beginIndex, int endIndex, int defaultValue) {\n  int result = defaultValue;\n  try {\n    String stringValue = value.substring(beginIndex, endIndex);\n    result = Integer.parseInt(stringValue);\n  }\n  catch (Exception e) {\n  }\n  return result;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":108817,"reputation":111636,"user_id":288671,"display_name":"Vitalii Fedorenko"},"down_vote_count":0,"up_vote_count":19,"is_accepted":false,"score":19,"last_activity_date":1567465440,"creation_date":1470506189,"answer_id":38807214,"question_id":5585779,"body_markdown":"[Google Guava][1] has [tryParse(String)][2], which returns `null` if the string couldn&#39;t be parsed, for example:\r\n\r\n    Integer fooInt = Ints.tryParse(fooString);\r\n    if (fooInt != null) {\r\n      ...\r\n    }\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Google_Guava\r\n  [2]: https://google.github.io/guava/releases/19.0/api/docs/com/google/common/primitives/Ints.html#tryParse(java.lang.String)\r\n\r\n","title":"How do I convert a String to an int in Java?","body":"<p><a href=\"https://en.wikipedia.org/wiki/Google_Guava\" rel=\"nofollow noreferrer\">Google Guava</a> has <a href=\"https://google.github.io/guava/releases/19.0/api/docs/com/google/common/primitives/Ints.html#tryParse(java.lang.String)\" rel=\"nofollow noreferrer\">tryParse(String)</a>, which returns <code>null</code> if the string couldn't be parsed, for example:</p>\n\n<pre><code>Integer fooInt = Ints.tryParse(fooString);\nif (fooInt != null) {\n  ...\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3750291,"reputation":838,"user_id":3280682,"accept_rate":100,"display_name":"Aditya"},"down_vote_count":3,"up_vote_count":11,"is_accepted":false,"score":8,"last_activity_date":1688558281,"creation_date":1471504044,"answer_id":39011912,"question_id":5585779,"body_markdown":"For a normal `String`, you can use:\r\n\r\n    int number = Integer.parseInt(&quot;1234&quot;);\r\n\r\nFor a `StringBuilder` and `StringBuffer`, you can use:\r\n\r\n    Integer.parseInt(myBuilderOrBuffer.toString());\r\n","title":"How do I convert a String to an int in Java?","body":"<p>For a normal <code>String</code>, you can use:</p>\n<pre><code>int number = Integer.parseInt(&quot;1234&quot;);\n</code></pre>\n<p>For a <code>StringBuilder</code> and <code>StringBuffer</code>, you can use:</p>\n<pre><code>Integer.parseInt(myBuilderOrBuffer.toString());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":165129,"reputation":1388,"user_id":388317,"accept_rate":0,"display_name":"Christian Ullenboom"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1488314200,"creation_date":1488314200,"answer_id":42518263,"question_id":5585779,"body_markdown":"You can use `new Scanner(&quot;1244&quot;).nextInt()`. Or ask if even an int exists: `new Scanner(&quot;1244&quot;).hasNextInt()`","title":"How do I convert a String to an int in Java?","body":"<p>You can use <code>new Scanner(\"1244\").nextInt()</code>. Or ask if even an int exists: <code>new Scanner(\"1244\").hasNextInt()</code></p>\n"},{"tags":[],"owner":{"account_id":2375630,"reputation":30604,"user_id":2815219,"display_name":"Raman Sahasi"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1688558222,"creation_date":1493012179,"answer_id":43580481,"question_id":5585779,"body_markdown":"In programming competitions, where you&#39;re assured that the number will always be a valid integer, then you can write your own method to parse the input. This will skip all validation-related code (since you don&#39;t need any of that) and will be a bit more efficient.\r\n\r\n 1. For valid positive integer:\r\n\r\n```java\r\n        private static int parseInt(String str) {\r\n            int i, n = 0;\r\n\r\n            for (i = 0; i &lt; str.length(); i++) {\r\n                n *= 10;\r\n                n += str.charAt(i) - 48;\r\n            }\r\n\r\n            return n;\r\n        }\r\n```\r\n\r\n 2. For both positive and negative integers:\r\n\r\n```java\r\n        private static int parseInt(String str) {\r\n            int i = 0, n = 0, sign = 1;\r\n            if (str.charAt(0) == &#39;-&#39;) {\r\n                i = 1;\r\n                sign = -1;\r\n            }\r\n\r\n            for (; i &lt; str.length(); i++) {\r\n                n *= 10;\r\n                n += str.charAt(i) - 48;\r\n            }\r\n\r\n            return sign * n;\r\n        }\r\n```\r\n\r\n 3. If you are expecting whitespace before or after these numbers,\r\n    then make sure to do a `str = str.trim()` before processing further.\r\n","title":"How do I convert a String to an int in Java?","body":"<p>In programming competitions, where you're assured that the number will always be a valid integer, then you can write your own method to parse the input. This will skip all validation-related code (since you don't need any of that) and will be a bit more efficient.</p>\n<ol>\n<li>For valid positive integer:</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>        private static int parseInt(String str) {\n            int i, n = 0;\n\n            for (i = 0; i &lt; str.length(); i++) {\n                n *= 10;\n                n += str.charAt(i) - 48;\n            }\n\n            return n;\n        }\n</code></pre>\n<ol start=\"2\">\n<li>For both positive and negative integers:</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>        private static int parseInt(String str) {\n            int i = 0, n = 0, sign = 1;\n            if (str.charAt(0) == '-') {\n                i = 1;\n                sign = -1;\n            }\n\n            for (; i &lt; str.length(); i++) {\n                n *= 10;\n                n += str.charAt(i) - 48;\n            }\n\n            return sign * n;\n        }\n</code></pre>\n<ol start=\"3\">\n<li>If you are expecting whitespace before or after these numbers,\nthen make sure to do a <code>str = str.trim()</code> before processing further.</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":2232881,"reputation":726,"user_id":1970059,"accept_rate":25,"display_name":"Dmytro Shvechikov"},"down_vote_count":0,"up_vote_count":43,"is_accepted":false,"score":43,"last_activity_date":1667572652,"creation_date":1507058166,"answer_id":46551829,"question_id":5585779,"body_markdown":"Methods to do that:\r\n\r\n 1. `Integer.parseInt(s)`\r\n 2. `Integer.parseInt(s, radix)`\r\n 3. `Integer.parseInt(s, beginIndex, endIndex, radix)`\r\n 4. `Integer.parseUnsignedInt(s)`\r\n 5. `Integer.parseUnsignedInt(s, radix)`\r\n 6. `Integer.parseUnsignedInt(s, beginIndex, endIndex, radix)`\r\n 7. `Integer.valueOf(s)`\r\n 8. `Integer.valueOf(s, radix)`\r\n 9. `Integer.decode(s)`\r\n 10. `NumberUtils.toInt(s)`\r\n 11. `NumberUtils.toInt(s, defaultValue)`\r\n\r\n---\r\n\r\n`Integer.valueOf` produces an `Integer` object and all other methods a primitive int.\r\n\r\nThe last two methods are from [commons-lang3][1] and a big article about converting [here][2].\r\n\r\n  [1]: http://mvnrepository.com/artifact/org.apache.commons/commons-lang3\r\n  [2]: https://codingmorning.com/convert-string-to-int-in-java/\r\n","title":"How do I convert a String to an int in Java?","body":"<p>Methods to do that:</p>\n<ol>\n<li><code>Integer.parseInt(s)</code></li>\n<li><code>Integer.parseInt(s, radix)</code></li>\n<li><code>Integer.parseInt(s, beginIndex, endIndex, radix)</code></li>\n<li><code>Integer.parseUnsignedInt(s)</code></li>\n<li><code>Integer.parseUnsignedInt(s, radix)</code></li>\n<li><code>Integer.parseUnsignedInt(s, beginIndex, endIndex, radix)</code></li>\n<li><code>Integer.valueOf(s)</code></li>\n<li><code>Integer.valueOf(s, radix)</code></li>\n<li><code>Integer.decode(s)</code></li>\n<li><code>NumberUtils.toInt(s)</code></li>\n<li><code>NumberUtils.toInt(s, defaultValue)</code></li>\n</ol>\n<hr />\n<p><code>Integer.valueOf</code> produces an <code>Integer</code> object and all other methods a primitive int.</p>\n<p>The last two methods are from <a href=\"http://mvnrepository.com/artifact/org.apache.commons/commons-lang3\" rel=\"nofollow noreferrer\">commons-lang3</a> and a big article about converting <a href=\"https://codingmorning.com/convert-string-to-int-in-java/\" rel=\"nofollow noreferrer\">here</a>.</p>\n"},{"tags":[],"owner":{"account_id":11884664,"reputation":441,"user_id":8697391,"display_name":"Lukas Bauer"},"down_vote_count":0,"up_vote_count":26,"is_accepted":false,"score":26,"last_activity_date":1567464637,"creation_date":1507316422,"answer_id":46612299,"question_id":5585779,"body_markdown":"Use [`Integer.parseInt(yourString)`][1].\r\n\r\n**Remember the following things:**\r\n\r\n`Integer.parseInt(&quot;1&quot;);`      // ok\r\n\r\n`Integer.parseInt(&quot;-1&quot;);`     // ok\r\n\r\n`Integer.parseInt(&quot;+1&quot;);`     // ok\r\n\r\n`Integer.parseInt(&quot; 1&quot;);`     // Exception (blank space)\r\n\r\n`Integer.parseInt(&quot;2147483648&quot;);` // Exception (Integer is limited to a [maximum value][2] of 2,147,483,647)\r\n\r\n`Integer.parseInt(&quot;1.1&quot;);` // Exception (**.** or **,** or whatever is not allowed)\r\n\r\n`Integer.parseInt(&quot;&quot;);` // Exception (not 0 or something)\r\n\r\nThere is only one type of exception: [`NumberFormatException`][3]\r\n\r\n  [1]: http://docs.oracle.com/javase/9/docs/api/java/lang/Integer.html#parseInt-java.lang.String-\r\n  [2]: http://docs.oracle.com/javase/9/docs/api/java/lang/Integer.html#MAX_VALUE\r\n  [3]: http://docs.oracle.com/javase/9/docs/api/java/lang/NumberFormatException.html\r\n\r\n","title":"How do I convert a String to an int in Java?","body":"<p>Use <a href=\"http://docs.oracle.com/javase/9/docs/api/java/lang/Integer.html#parseInt-java.lang.String-\" rel=\"noreferrer\"><code>Integer.parseInt(yourString)</code></a>.</p>\n\n<p><strong>Remember the following things:</strong></p>\n\n<p><code>Integer.parseInt(\"1\");</code>      // ok</p>\n\n<p><code>Integer.parseInt(\"-1\");</code>     // ok</p>\n\n<p><code>Integer.parseInt(\"+1\");</code>     // ok</p>\n\n<p><code>Integer.parseInt(\" 1\");</code>     // Exception (blank space)</p>\n\n<p><code>Integer.parseInt(\"2147483648\");</code> // Exception (Integer is limited to a <a href=\"http://docs.oracle.com/javase/9/docs/api/java/lang/Integer.html#MAX_VALUE\" rel=\"noreferrer\">maximum value</a> of 2,147,483,647)</p>\n\n<p><code>Integer.parseInt(\"1.1\");</code> // Exception (<strong>.</strong> or <strong>,</strong> or whatever is not allowed)</p>\n\n<p><code>Integer.parseInt(\"\");</code> // Exception (not 0 or something)</p>\n\n<p>There is only one type of exception: <a href=\"http://docs.oracle.com/javase/9/docs/api/java/lang/NumberFormatException.html\" rel=\"noreferrer\"><code>NumberFormatException</code></a></p>\n"},{"tags":[],"owner":{"account_id":3024120,"reputation":3293,"user_id":2564509,"display_name":"djm.im"},"down_vote_count":2,"up_vote_count":8,"is_accepted":false,"score":6,"last_activity_date":1598610523,"creation_date":1524516550,"answer_id":49989721,"question_id":5585779,"body_markdown":"I am a little bit surprised that nobody mentioned the Integer constructor that takes String as a parameter.\r\n\r\nSo, here it is:\r\n\r\n    String myString = &quot;1234&quot;;\r\n    int i1 = new Integer(myString);\r\n\r\n[Java 8 - Integer(String)][1].\r\n\r\nOf course, the constructor will return type `Integer`, and an unboxing operation converts the value to `int`.\r\n\r\n---\r\n_Note 1: It&#39;s important to mention_: This constructor calls the `parseInt` method.\r\n\r\n    public Integer(String var1) throws NumberFormatException {\r\n        this.value = parseInt(var1, 10);\r\n    }\r\n\r\n_Note 2: It&#39;s deprecated_: `@Deprecated(since=&quot;9&quot;)` - [JavaDoc][2].\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/lang/Integer.html#Integer-java.lang.String-\r\n  [2]: https://docs.oracle.com/javase/9/docs/api/java/lang/Integer.html#Integer-java.lang.String-","title":"How do I convert a String to an int in Java?","body":"<p>I am a little bit surprised that nobody mentioned the Integer constructor that takes String as a parameter.</p>\n<p>So, here it is:</p>\n<pre><code>String myString = &quot;1234&quot;;\nint i1 = new Integer(myString);\n</code></pre>\n<p><a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/Integer.html#Integer-java.lang.String-\" rel=\"nofollow noreferrer\">Java 8 - Integer(String)</a>.</p>\n<p>Of course, the constructor will return type <code>Integer</code>, and an unboxing operation converts the value to <code>int</code>.</p>\n<hr />\n<p><em>Note 1: It's important to mention</em>: This constructor calls the <code>parseInt</code> method.</p>\n<pre><code>public Integer(String var1) throws NumberFormatException {\n    this.value = parseInt(var1, 10);\n}\n</code></pre>\n<p><em>Note 2: It's deprecated</em>: <code>@Deprecated(since=&quot;9&quot;)</code> - <a href=\"https://docs.oracle.com/javase/9/docs/api/java/lang/Integer.html#Integer-java.lang.String-\" rel=\"nofollow noreferrer\">JavaDoc</a>.</p>\n"},{"tags":[],"owner":{"account_id":5640275,"reputation":379,"user_id":4464360,"accept_rate":75,"display_name":"Abhijeet Kale"},"down_vote_count":2,"up_vote_count":2,"is_accepted":false,"score":0,"last_activity_date":1688558718,"creation_date":1545733985,"answer_id":53921506,"question_id":5585779,"body_markdown":"    import java.util.*;\r\n\r\n    public class strToint {\r\n\r\n        public static void main(String[] args) {\r\n\r\n            String str = &quot;123&quot;;\r\n            byte barr[] = str.getBytes();\r\n\r\n            System.out.println(Arrays.toString(barr));\r\n            int result = 0;\r\n\r\n            for (int i = 0; i &lt; barr.length; i++) {\r\n                // System.out.print(barr[i] + &quot; &quot;);\r\n                int ii = barr[i];\r\n                char a = (char) ii;\r\n                int no = Character.getNumericValue(a);\r\n                result = result * 10 + no;\r\n                System.out.println(result);\r\n            }\r\n\r\n            System.out.println(&quot;result:&quot; + result);\r\n        }\r\n    }\r\n","title":"How do I convert a String to an int in Java?","body":"<pre><code>import java.util.*;\n\npublic class strToint {\n\n    public static void main(String[] args) {\n\n        String str = &quot;123&quot;;\n        byte barr[] = str.getBytes();\n\n        System.out.println(Arrays.toString(barr));\n        int result = 0;\n\n        for (int i = 0; i &lt; barr.length; i++) {\n            // System.out.print(barr[i] + &quot; &quot;);\n            int ii = barr[i];\n            char a = (char) ii;\n            int no = Character.getNumericValue(a);\n            result = result * 10 + no;\n            System.out.println(result);\n        }\n\n        System.out.println(&quot;result:&quot; + result);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10078487,"reputation":2156,"user_id":7449706,"display_name":"Kevin Ng"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1567463538,"creation_date":1548039520,"answer_id":54282976,"question_id":5585779,"body_markdown":"I wrote this fast method to parse a string input into int or long. It is faster than the current JDK 11 Integer.parseInt or Long.parseLong. Although, you only asked for int, I also included the long parser. The code parser below requires that the parser&#39;s method must be small for it to operate quickly. An alternative version is below the test code. The alternative version is pretty quick and it does not depend on the size of the class.\r\n\r\nThis class checks for overflow, and you could customize the code to adapt to your needs. An empty string will yield 0 with my method but that is intentional. You can change that to adapt your case or use as is.\r\n\r\nThis is only the part of the class where parseInt and parseLong are needed. Note that this only deals with base 10 numbers.\r\n\r\nThe test code for the int parser is below the code below.\r\n\r\n    /*\r\n     * Copyright 2019 Khang Hoang Nguyen\r\n     * Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the &quot;Software&quot;), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions\r\n     * The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\r\n     * THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\r\n     * @author: Khang Hoang Nguyen - kevin@fai.host.\r\n     **/\r\n    final class faiNumber{\r\n        private static final long[] longpow = {0L, 1L, 10L, 100L, 1000L, 10000L, 100000L, 1000000L, 10000000L, 100000000L, 1000000000L,\r\n                                               10000000000L, 100000000000L, 1000000000000L, 10000000000000L, 100000000000000L,\r\n                                               1000000000000000L, 10000000000000000L, 100000000000000000L, 1000000000000000000L,\r\n                                              };\r\n\r\n        private static final int[] intpow = { 0, 1, 10, 100, 1000, 10000,\r\n                                              100000, 1000000, 10000000, 100000000, 1000000000\r\n                                            };\r\n\r\n        /**\r\n         * parseLong(String str) parse a String into Long.\r\n         * All errors throw by this method is NumberFormatException.\r\n         * Better errors can be made to tailor to each use case.\r\n         **/\r\n        public static long parseLong(final String str) {\r\n            final int length = str.length();\r\n            if (length == 0)\r\n                return 0L;\r\n\r\n            char c1 = str.charAt(0);\r\n            int start;\r\n\r\n            if (c1 == &#39;-&#39; || c1 == &#39;+&#39;) {\r\n                if (length == 1)\r\n                    throw new NumberFormatException(String.format(&quot;Not a valid long value. Input &#39;%s&#39;.&quot;, str));\r\n                start = 1;\r\n            } else {\r\n                start = 0;\r\n            }\r\n\r\n            /*\r\n             * Note: if length &gt; 19, possible scenario is to run through the string\r\n             * to check whether the string contains only valid digits.\r\n             * If the check had only valid digits then a negative sign meant underflow, else, overflow.\r\n             */\r\n            if (length - start &gt; 19)\r\n                throw new NumberFormatException(String.format(&quot;Not a valid long value. Input &#39;%s&#39;.&quot;, str));\r\n\r\n            long c;\r\n            long out = 0L;\r\n\r\n            for ( ; start &lt; length; start++) {\r\n                c = (str.charAt(start) ^ &#39;0&#39;);\r\n                if (c &gt; 9L)\r\n                    throw new NumberFormatException( String.format(&quot;Not a valid long value. Input &#39;%s&#39;.&quot;, str) );\r\n                out += c * longpow[length - start];\r\n            }\r\n\r\n            if (c1 == &#39;-&#39;) {\r\n                out = ~out + 1L;\r\n                // If out &gt; 0 number underflow(supposed to be negative).\r\n                if (out &gt; 0L)\r\n                    throw new NumberFormatException(String.format(&quot;Not a valid long value. Input &#39;%s&#39;.&quot;, str));\r\n                return out;\r\n            }\r\n            // If out &lt; 0 number overflow (supposed to be positive).\r\n            if (out &lt; 0L)\r\n                throw new NumberFormatException(String.format(&quot;Not a valid long value. Input &#39;%s&#39;.&quot;, str));\r\n            return out;\r\n        }\r\n\r\n        /**\r\n         * parseInt(String str) parse a string into an int.\r\n         * return 0 if string is empty.\r\n         **/\r\n        public static int parseInt(final String str) {\r\n            final int length = str.length();\r\n            if (length == 0)\r\n                return 0;\r\n\r\n            char c1 = str.charAt(0);\r\n            int start;\r\n\r\n            if (c1 == &#39;-&#39; || c1 == &#39;+&#39;) {\r\n                if (length == 1)\r\n                    throw new NumberFormatException(String.format(&quot;Not a valid integer value. Input &#39;%s&#39;.&quot;, str));\r\n                start = 1;\r\n            } else {\r\n                start = 0;\r\n            }\r\n\r\n            int out = 0; int c;\r\n            int runlen = length - start;\r\n\r\n            if (runlen &gt; 9) {\r\n                if (runlen &gt; 10)\r\n                    throw new NumberFormatException(String.format(&quot;Not a valid integer value. Input: &#39;%s&#39;.&quot;, str));\r\n\r\n                c = (str.charAt(start) ^ &#39;0&#39;); // &lt;- Any number from 0 - 255 ^ 48 will yield greater than 9 except 48 - 57\r\n                if (c &gt; 9)\r\n                    throw new NumberFormatException(String.format(&quot;Not a valid integer value. Input: &#39;%s&#39;.&quot;, str));\r\n                if (c &gt; 2)\r\n                    throw new NumberFormatException(String.format(&quot;Not a valid integer value. Input: &#39;%s&#39;.&quot;, str));\r\n                out += c * intpow[length - start++];\r\n            }\r\n\r\n            for ( ; start &lt; length; start++) {\r\n                c = (str.charAt(start) ^ &#39;0&#39;);\r\n                if (c &gt; 9)\r\n                    throw new NumberFormatException(String.format(&quot;Not a valid integer value. Input: &#39;%s&#39;.&quot;, str));\r\n                out += c * intpow[length - start];\r\n            }\r\n\r\n            if (c1 == &#39;-&#39;) {\r\n                out = ~out + 1;\r\n                if (out &gt; 0)\r\n                    throw new NumberFormatException(String.format(&quot;Not a valid integer value. Input: &#39;%s&#39;.&quot;, str));\r\n                return out;\r\n            }\r\n\r\n            if (out &lt; 0)\r\n                throw new NumberFormatException(String.format(&quot;Not a valid integer value. Input: &#39;%s&#39;.&quot;, str));\r\n            return out;\r\n        }\r\n    }\r\n\r\nTest Code Section. This should take around 200 seconds or so.\r\n\r\n    // Int Number Parser Test;\r\n    long start = System.currentTimeMillis();\r\n    System.out.println(&quot;INT PARSER TEST&quot;);\r\n    for (int i = Integer.MIN_VALUE; i != Integer.MAX_VALUE; i++){\r\n       if (faiNumber.parseInt(&quot;&quot;+i) != i)\r\n           System.out.println(&quot;Wrong&quot;);\r\n       if (i == 0)\r\n           System.out.println(&quot;HalfWay Done&quot;);\r\n    }\r\n\r\n    if (faiNumber.parseInt(&quot;&quot; + Integer.MAX_VALUE) != Integer.MAX_VALUE)\r\n        System.out.println(&quot;Wrong&quot;);\r\n    long end = System.currentTimeMillis();\r\n    long result = (end - start);\r\n    System.out.println(result);\r\n    // INT PARSER END */\r\n\r\nAn alternative method which is also very fast. Note that array of int pow is not used, but a mathematical optimization of multiply by 10 by bit shifting.\r\n\r\n    public static int parseInt(final String str) {\r\n        final int length = str.length();\r\n        if (length == 0)\r\n            return 0;\r\n\r\n        char c1 = str.charAt(0);\r\n        int start;\r\n\r\n        if (c1 == &#39;-&#39; || c1 == &#39;+&#39;) {\r\n            if (length == 1)\r\n                throw new NumberFormatException(String.format(&quot;Not a valid integer value. Input &#39;%s&#39;.&quot;, str));\r\n            start = 1;\r\n        } else {\r\n            start = 0;\r\n        }\r\n\r\n        int out = 0;\r\n        int c;\r\n        while (start &lt; length &amp;&amp; str.charAt(start) == &#39;0&#39;)\r\n            start++; // &lt;-- This to disregard leading 0. It can be\r\n                     // removed if you know exactly your source\r\n                     // does not have leading zeroes.\r\n        int runlen = length - start;\r\n\r\n        if (runlen &gt; 9) {\r\n            if (runlen &gt; 10)\r\n                throw new NumberFormatException(String.format(&quot;Not a valid integer value. Input: &#39;%s&#39;.&quot;, str));\r\n\r\n            c = (str.charAt(start++) ^ &#39;0&#39;);  // &lt;- Any number from 0 - 255 ^ 48 will yield greater than 9 except 48 - 57\r\n            if (c &gt; 9)\r\n                throw new NumberFormatException(String.format(&quot;Not a valid integer value. Input: &#39;%s&#39;.&quot;, str));\r\n            if (c &gt; 2)\r\n                throw new NumberFormatException(String.format(&quot;Not a valid integer value. Input: &#39;%s&#39;.&quot;, str));\r\n            out = (out &lt;&lt; 1) + (out &lt;&lt; 3) + c; // &lt;- Alternatively this can just be out = c or c above can just be out;\r\n        }\r\n\r\n        for ( ; start &lt; length; start++) {\r\n            c = (str.charAt(start) ^ &#39;0&#39;);\r\n            if (c &gt; 9)\r\n                throw new NumberFormatException(String.format(&quot;Not a valid integer value. Input: &#39;%s&#39;.&quot;, str));\r\n            out = (out &lt;&lt; 1) + (out &lt;&lt; 3) + c;\r\n        }\r\n\r\n        if (c1 == &#39;-&#39;) {\r\n            out = ~out + 1;\r\n            if (out &gt; 0)\r\n                throw new NumberFormatException(String.format(&quot;Not a valid integer value. Input: &#39;%s&#39;.&quot;, str));\r\n            return out;\r\n        }\r\n\r\n        if (out &lt; 0)\r\n            throw new NumberFormatException(String.format(&quot;Not a valid integer value. Input: &#39;%s&#39;.&quot;, str));\r\n        return out;\r\n    }\r\n\r\n\r\n\r\n","title":"How do I convert a String to an int in Java?","body":"<p>I wrote this fast method to parse a string input into int or long. It is faster than the current JDK 11 Integer.parseInt or Long.parseLong. Although, you only asked for int, I also included the long parser. The code parser below requires that the parser's method must be small for it to operate quickly. An alternative version is below the test code. The alternative version is pretty quick and it does not depend on the size of the class.</p>\n\n<p>This class checks for overflow, and you could customize the code to adapt to your needs. An empty string will yield 0 with my method but that is intentional. You can change that to adapt your case or use as is.</p>\n\n<p>This is only the part of the class where parseInt and parseLong are needed. Note that this only deals with base 10 numbers.</p>\n\n<p>The test code for the int parser is below the code below.</p>\n\n<pre><code>/*\n * Copyright 2019 Khang Hoang Nguyen\n * Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions\n * The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n * @author: Khang Hoang Nguyen - kevin@fai.host.\n **/\nfinal class faiNumber{\n    private static final long[] longpow = {0L, 1L, 10L, 100L, 1000L, 10000L, 100000L, 1000000L, 10000000L, 100000000L, 1000000000L,\n                                           10000000000L, 100000000000L, 1000000000000L, 10000000000000L, 100000000000000L,\n                                           1000000000000000L, 10000000000000000L, 100000000000000000L, 1000000000000000000L,\n                                          };\n\n    private static final int[] intpow = { 0, 1, 10, 100, 1000, 10000,\n                                          100000, 1000000, 10000000, 100000000, 1000000000\n                                        };\n\n    /**\n     * parseLong(String str) parse a String into Long.\n     * All errors throw by this method is NumberFormatException.\n     * Better errors can be made to tailor to each use case.\n     **/\n    public static long parseLong(final String str) {\n        final int length = str.length();\n        if (length == 0)\n            return 0L;\n\n        char c1 = str.charAt(0);\n        int start;\n\n        if (c1 == '-' || c1 == '+') {\n            if (length == 1)\n                throw new NumberFormatException(String.format(\"Not a valid long value. Input '%s'.\", str));\n            start = 1;\n        } else {\n            start = 0;\n        }\n\n        /*\n         * Note: if length &gt; 19, possible scenario is to run through the string\n         * to check whether the string contains only valid digits.\n         * If the check had only valid digits then a negative sign meant underflow, else, overflow.\n         */\n        if (length - start &gt; 19)\n            throw new NumberFormatException(String.format(\"Not a valid long value. Input '%s'.\", str));\n\n        long c;\n        long out = 0L;\n\n        for ( ; start &lt; length; start++) {\n            c = (str.charAt(start) ^ '0');\n            if (c &gt; 9L)\n                throw new NumberFormatException( String.format(\"Not a valid long value. Input '%s'.\", str) );\n            out += c * longpow[length - start];\n        }\n\n        if (c1 == '-') {\n            out = ~out + 1L;\n            // If out &gt; 0 number underflow(supposed to be negative).\n            if (out &gt; 0L)\n                throw new NumberFormatException(String.format(\"Not a valid long value. Input '%s'.\", str));\n            return out;\n        }\n        // If out &lt; 0 number overflow (supposed to be positive).\n        if (out &lt; 0L)\n            throw new NumberFormatException(String.format(\"Not a valid long value. Input '%s'.\", str));\n        return out;\n    }\n\n    /**\n     * parseInt(String str) parse a string into an int.\n     * return 0 if string is empty.\n     **/\n    public static int parseInt(final String str) {\n        final int length = str.length();\n        if (length == 0)\n            return 0;\n\n        char c1 = str.charAt(0);\n        int start;\n\n        if (c1 == '-' || c1 == '+') {\n            if (length == 1)\n                throw new NumberFormatException(String.format(\"Not a valid integer value. Input '%s'.\", str));\n            start = 1;\n        } else {\n            start = 0;\n        }\n\n        int out = 0; int c;\n        int runlen = length - start;\n\n        if (runlen &gt; 9) {\n            if (runlen &gt; 10)\n                throw new NumberFormatException(String.format(\"Not a valid integer value. Input: '%s'.\", str));\n\n            c = (str.charAt(start) ^ '0'); // &lt;- Any number from 0 - 255 ^ 48 will yield greater than 9 except 48 - 57\n            if (c &gt; 9)\n                throw new NumberFormatException(String.format(\"Not a valid integer value. Input: '%s'.\", str));\n            if (c &gt; 2)\n                throw new NumberFormatException(String.format(\"Not a valid integer value. Input: '%s'.\", str));\n            out += c * intpow[length - start++];\n        }\n\n        for ( ; start &lt; length; start++) {\n            c = (str.charAt(start) ^ '0');\n            if (c &gt; 9)\n                throw new NumberFormatException(String.format(\"Not a valid integer value. Input: '%s'.\", str));\n            out += c * intpow[length - start];\n        }\n\n        if (c1 == '-') {\n            out = ~out + 1;\n            if (out &gt; 0)\n                throw new NumberFormatException(String.format(\"Not a valid integer value. Input: '%s'.\", str));\n            return out;\n        }\n\n        if (out &lt; 0)\n            throw new NumberFormatException(String.format(\"Not a valid integer value. Input: '%s'.\", str));\n        return out;\n    }\n}\n</code></pre>\n\n<p>Test Code Section. This should take around 200 seconds or so.</p>\n\n<pre><code>// Int Number Parser Test;\nlong start = System.currentTimeMillis();\nSystem.out.println(\"INT PARSER TEST\");\nfor (int i = Integer.MIN_VALUE; i != Integer.MAX_VALUE; i++){\n   if (faiNumber.parseInt(\"\"+i) != i)\n       System.out.println(\"Wrong\");\n   if (i == 0)\n       System.out.println(\"HalfWay Done\");\n}\n\nif (faiNumber.parseInt(\"\" + Integer.MAX_VALUE) != Integer.MAX_VALUE)\n    System.out.println(\"Wrong\");\nlong end = System.currentTimeMillis();\nlong result = (end - start);\nSystem.out.println(result);\n// INT PARSER END */\n</code></pre>\n\n<p>An alternative method which is also very fast. Note that array of int pow is not used, but a mathematical optimization of multiply by 10 by bit shifting.</p>\n\n<pre><code>public static int parseInt(final String str) {\n    final int length = str.length();\n    if (length == 0)\n        return 0;\n\n    char c1 = str.charAt(0);\n    int start;\n\n    if (c1 == '-' || c1 == '+') {\n        if (length == 1)\n            throw new NumberFormatException(String.format(\"Not a valid integer value. Input '%s'.\", str));\n        start = 1;\n    } else {\n        start = 0;\n    }\n\n    int out = 0;\n    int c;\n    while (start &lt; length &amp;&amp; str.charAt(start) == '0')\n        start++; // &lt;-- This to disregard leading 0. It can be\n                 // removed if you know exactly your source\n                 // does not have leading zeroes.\n    int runlen = length - start;\n\n    if (runlen &gt; 9) {\n        if (runlen &gt; 10)\n            throw new NumberFormatException(String.format(\"Not a valid integer value. Input: '%s'.\", str));\n\n        c = (str.charAt(start++) ^ '0');  // &lt;- Any number from 0 - 255 ^ 48 will yield greater than 9 except 48 - 57\n        if (c &gt; 9)\n            throw new NumberFormatException(String.format(\"Not a valid integer value. Input: '%s'.\", str));\n        if (c &gt; 2)\n            throw new NumberFormatException(String.format(\"Not a valid integer value. Input: '%s'.\", str));\n        out = (out &lt;&lt; 1) + (out &lt;&lt; 3) + c; // &lt;- Alternatively this can just be out = c or c above can just be out;\n    }\n\n    for ( ; start &lt; length; start++) {\n        c = (str.charAt(start) ^ '0');\n        if (c &gt; 9)\n            throw new NumberFormatException(String.format(\"Not a valid integer value. Input: '%s'.\", str));\n        out = (out &lt;&lt; 1) + (out &lt;&lt; 3) + c;\n    }\n\n    if (c1 == '-') {\n        out = ~out + 1;\n        if (out &gt; 0)\n            throw new NumberFormatException(String.format(\"Not a valid integer value. Input: '%s'.\", str));\n        return out;\n    }\n\n    if (out &lt; 0)\n        throw new NumberFormatException(String.format(\"Not a valid integer value. Input: '%s'.\", str));\n    return out;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12511931,"reputation":3963,"user_id":9106684,"display_name":"duyuanchao"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1580056625,"creation_date":1571747528,"answer_id":58504383,"question_id":5585779,"body_markdown":"[As I write on GitHub][1]:\r\n\r\n    public class StringToInteger {\r\n        public static void main(String[] args) {\r\n            assert parseInt(&quot;123&quot;) == Integer.parseInt(&quot;123&quot;);\r\n            assert parseInt(&quot;-123&quot;) == Integer.parseInt(&quot;-123&quot;);\r\n            assert parseInt(&quot;0123&quot;) == Integer.parseInt(&quot;0123&quot;);\r\n            assert parseInt(&quot;+123&quot;) == Integer.parseInt(&quot;+123&quot;);\r\n        }\r\n\r\n        /**\r\n         * Parse a string to integer\r\n         *\r\n         * @param s the string\r\n         * @return the integer value represented by the argument in decimal.\r\n         * @throws NumberFormatException if the {@code string} does not contain a parsable integer.\r\n         */\r\n        public static int parseInt(String s) {\r\n            if (s == null) {\r\n                throw new NumberFormatException(&quot;null&quot;);\r\n            }\r\n            boolean isNegative = s.charAt(0) == &#39;-&#39;;\r\n            boolean isPositive = s.charAt(0) == &#39;+&#39;;\r\n            int number = 0;\r\n            for (int i = isNegative ? 1 : isPositive ? 1 : 0, length = s.length(); i &lt; length; ++i) {\r\n                if (!Character.isDigit(s.charAt(i))) {\r\n                    throw new NumberFormatException(&quot;s=&quot; + s);\r\n                }\r\n                number = number * 10 + s.charAt(i) - &#39;0&#39;;\r\n            }\r\n            return isNegative ? -number : number;\r\n        }\r\n    }\r\n\r\n  [1]: https://github.com/shellhub/Algorithms-Java/blob/master/src/main/java/maths/StringToInteger.java\r\n","title":"How do I convert a String to an int in Java?","body":"<p><a href=\"https://github.com/shellhub/Algorithms-Java/blob/master/src/main/java/maths/StringToInteger.java\" rel=\"nofollow noreferrer\">As I write on GitHub</a>:</p>\n\n<pre><code>public class StringToInteger {\n    public static void main(String[] args) {\n        assert parseInt(\"123\") == Integer.parseInt(\"123\");\n        assert parseInt(\"-123\") == Integer.parseInt(\"-123\");\n        assert parseInt(\"0123\") == Integer.parseInt(\"0123\");\n        assert parseInt(\"+123\") == Integer.parseInt(\"+123\");\n    }\n\n    /**\n     * Parse a string to integer\n     *\n     * @param s the string\n     * @return the integer value represented by the argument in decimal.\n     * @throws NumberFormatException if the {@code string} does not contain a parsable integer.\n     */\n    public static int parseInt(String s) {\n        if (s == null) {\n            throw new NumberFormatException(\"null\");\n        }\n        boolean isNegative = s.charAt(0) == '-';\n        boolean isPositive = s.charAt(0) == '+';\n        int number = 0;\n        for (int i = isNegative ? 1 : isPositive ? 1 : 0, length = s.length(); i &lt; length; ++i) {\n            if (!Character.isDigit(s.charAt(i))) {\n                throw new NumberFormatException(\"s=\" + s);\n            }\n            number = number * 10 + s.charAt(i) - '0';\n        }\n        return isNegative ? -number : number;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16583795,"reputation":879,"user_id":11983766,"display_name":"dxjuv"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1598025708,"creation_date":1584618053,"answer_id":60756484,"question_id":5585779,"body_markdown":"The two main ways to do this are using the method `valueOf()` and method `parseInt()` of the `Integer` class.\r\n\r\nSuppose you are given a String like this\r\n\r\n    String numberInString = &quot;999&quot;;\r\n\r\nThen you can convert it into integer by using\r\n\r\n    int numberInInteger = Integer.parseInt(numberInString);\r\n\r\nAnd alternatively, you can use\r\n\r\n    int numberInInteger = Integer.valueOf(numberInString);\r\n\r\nBut the thing here is, the method `Integer.valueOf()` has the following implementation in `Integer` class:\r\n\r\n    public static Integer valueOf(String var0, int var1) throws NumberFormatException {\r\n        return parseInt(var0, var1);\r\n    }\r\n\r\nAs you can see, the `Integer.valueOf()` internally calls `Integer.parseInt()` itself.\r\nAlso, `parseInt()` returns an `int`, and `valueOf()` returns an `Integer`\r\n","title":"How do I convert a String to an int in Java?","body":"<p>The two main ways to do this are using the method <code>valueOf()</code> and method <code>parseInt()</code> of the <code>Integer</code> class.</p>\n<p>Suppose you are given a String like this</p>\n<pre><code>String numberInString = &quot;999&quot;;\n</code></pre>\n<p>Then you can convert it into integer by using</p>\n<pre><code>int numberInInteger = Integer.parseInt(numberInString);\n</code></pre>\n<p>And alternatively, you can use</p>\n<pre><code>int numberInInteger = Integer.valueOf(numberInString);\n</code></pre>\n<p>But the thing here is, the method <code>Integer.valueOf()</code> has the following implementation in <code>Integer</code> class:</p>\n<pre><code>public static Integer valueOf(String var0, int var1) throws NumberFormatException {\n    return parseInt(var0, var1);\n}\n</code></pre>\n<p>As you can see, the <code>Integer.valueOf()</code> internally calls <code>Integer.parseInt()</code> itself.\nAlso, <code>parseInt()</code> returns an <code>int</code>, and <code>valueOf()</code> returns an <code>Integer</code></p>\n"},{"tags":[],"owner":{"account_id":15035938,"reputation":310,"user_id":10852356,"display_name":"garima garg"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1646054660,"creation_date":1588151691,"answer_id":61498228,"question_id":5585779,"body_markdown":"There are different ways of converting a string int value into an Integer data type value. You need to handle NumberFormatException for the string value issue.\r\n\r\n1. Integer.parseInt\r\n\r\n        foo = Integer.parseInt(myString);\r\n\r\n2. Integer.valueOf\r\n\r\n        foo = Integer.valueOf(myString);\r\n\r\n3. Using Java 8 Optional API\r\n\r\n        foo = Optional.ofNullable(myString).map(Integer::parseInt).get();\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","title":"How do I convert a String to an int in Java?","body":"<p>There are different ways of converting a string int value into an Integer data type value. You need to handle NumberFormatException for the string value issue.</p>\n<ol>\n<li><p>Integer.parseInt</p>\n<pre><code> foo = Integer.parseInt(myString);\n</code></pre>\n</li>\n<li><p>Integer.valueOf</p>\n<pre><code> foo = Integer.valueOf(myString);\n</code></pre>\n</li>\n<li><p>Using Java 8 Optional API</p>\n<pre><code> foo = Optional.ofNullable(myString).map(Integer::parseInt).get();\n</code></pre>\n</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":7634898,"reputation":55,"user_id":5788729,"display_name":"Ajay Singh Meena"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1598026173,"creation_date":1594626691,"answer_id":62871425,"question_id":5585779,"body_markdown":"You can have your own implementations for this, like:\r\n\r\n    public class NumericStringToInt {\r\n    \r\n        public static void main(String[] args) {\r\n            String str = &quot;123459&quot;;\r\n    \r\n            int num = stringToNumber(str);\r\n            System.out.println(&quot;Number of &quot; + str + &quot; is: &quot; + num);\r\n        }\r\n    \r\n        private static int stringToNumber(String str) {\r\n    \r\n            int num = 0;\r\n            int i = 0;\r\n            while (i &lt; str.length()) {\r\n                char ch = str.charAt(i);\r\n                if (ch &lt; 48 || ch &gt; 57)\r\n                    throw new NumberFormatException(&quot;&quot; + ch);\r\n                num = num * 10 + Character.getNumericValue(ch);\r\n                i++;\r\n            }\r\n            return num;\r\n        }\r\n    }\r\n\r\n\r\n","title":"How do I convert a String to an int in Java?","body":"<p>You can have your own implementations for this, like:</p>\n<pre><code>public class NumericStringToInt {\n\n    public static void main(String[] args) {\n        String str = &quot;123459&quot;;\n\n        int num = stringToNumber(str);\n        System.out.println(&quot;Number of &quot; + str + &quot; is: &quot; + num);\n    }\n\n    private static int stringToNumber(String str) {\n\n        int num = 0;\n        int i = 0;\n        while (i &lt; str.length()) {\n            char ch = str.charAt(i);\n            if (ch &lt; 48 || ch &gt; 57)\n                throw new NumberFormatException(&quot;&quot; + ch);\n            num = num * 10 + Character.getNumericValue(ch);\n            i++;\n        }\n        return num;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8445753,"reputation":155,"user_id":6336491,"display_name":"Yogesh"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1641086633,"creation_date":1606915500,"answer_id":65108967,"question_id":5585779,"body_markdown":"Apart from all these answers, I found one new way, although it uses `Integer.parseInt()` internally.\r\n\r\nBy using\r\n\r\n```java\r\nimport javafx.util.converter.IntegerStringConverter;\r\n\r\nnew IntegerStringConverter().fromString(&quot;1234&quot;).intValue()\r\n```\r\n\r\nor\r\n\r\n```java\r\nnew IntegerStringConverter().fromString(&quot;1234&quot;)\r\n```\r\n\r\nAlthough it is a little bit costly as new objects get created.\r\n\r\nJust go through the `javafx.util.StringConverter&lt;T&gt;` class. It helps to convert any wrapper class value to a string or vice versa.\r\n\r\n\r\n","title":"How do I convert a String to an int in Java?","body":"<p>Apart from all these answers, I found one new way, although it uses <code>Integer.parseInt()</code> internally.</p>\n<p>By using</p>\n<pre class=\"lang-java prettyprint-override\"><code>import javafx.util.converter.IntegerStringConverter;\n\nnew IntegerStringConverter().fromString(&quot;1234&quot;).intValue()\n</code></pre>\n<p>or</p>\n<pre class=\"lang-java prettyprint-override\"><code>new IntegerStringConverter().fromString(&quot;1234&quot;)\n</code></pre>\n<p>Although it is a little bit costly as new objects get created.</p>\n<p>Just go through the <code>javafx.util.StringConverter&lt;T&gt;</code> class. It helps to convert any wrapper class value to a string or vice versa.</p>\n"},{"tags":[],"owner":{"account_id":17330754,"reputation":860,"user_id":12553922,"display_name":"Anis KCHAOU"},"down_vote_count":2,"up_vote_count":1,"is_accepted":false,"score":-1,"last_activity_date":1641086456,"creation_date":1634995449,"answer_id":69688571,"question_id":5585779,"body_markdown":"With Java 11, there are several ways to convert an `int` to a `String` type:\r\n\r\n***1) Integer.parseInt()***\r\n\r\n    String str = &quot;1234&quot;;\r\n    int result = Integer.parseInt(str);\r\n\r\n***2) Integer.valueOf()***\r\n\r\n    String str = &quot;1234&quot;;\r\n    int result = Integer.valueOf(str).intValue();\r\n\r\n***3) Integer constructor***\r\n\r\n      String str = &quot;1234&quot;;\r\n      Integer result = new Integer(str);\r\n\r\n***4) Integer.decode***\r\n\r\n    String str = &quot;1234&quot;;\r\n    int result = Integer.decode(str);\r\n\r\n\r\n\r\n","title":"How do I convert a String to an int in Java?","body":"<p>With Java 11, there are several ways to convert an <code>int</code> to a <code>String</code> type:</p>\n<p><em><strong>1) Integer.parseInt()</strong></em></p>\n<pre><code>String str = &quot;1234&quot;;\nint result = Integer.parseInt(str);\n</code></pre>\n<p><em><strong>2) Integer.valueOf()</strong></em></p>\n<pre><code>String str = &quot;1234&quot;;\nint result = Integer.valueOf(str).intValue();\n</code></pre>\n<p><em><strong>3) Integer constructor</strong></em></p>\n<pre><code>  String str = &quot;1234&quot;;\n  Integer result = new Integer(str);\n</code></pre>\n<p><em><strong>4) Integer.decode</strong></em></p>\n<pre><code>String str = &quot;1234&quot;;\nint result = Integer.decode(str);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11726648,"reputation":19523,"user_id":8583692,"display_name":"Mahozad"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1702046762,"creation_date":1669981331,"answer_id":74655262,"question_id":5585779,"body_markdown":"For Android developers ending up here these are various solutions for **Kotlin**:\r\n\r\n```kotlin\r\n// Throws exception if number has bad form\r\nval result1 = &quot;1234&quot;.toInt()\r\n```\r\n\r\n```kotlin\r\n// Will be null if number has bad form\r\nval result2 = &quot;1234&quot;.toIntOrNull()\r\n```\r\n\r\n```kotlin\r\n// Will be the given default if number has bad form\r\nval result3 = &quot;1234&quot;\r\n    .toIntOrNull() ?: -1\r\n```\r\n\r\n```kotlin\r\n// Will be return of the run block if number has bad form\r\nval result4 = &quot;1234&quot;\r\n    .toIntOrNull()\r\n    ?: run {\r\n        // some code\r\n        // return an Int\r\n    }\r\n```\r\n\r\n```kotlin\r\n// Ignores any none-digit character in string\r\nval result5 = &quot;12abc34&quot;\r\n    .filter { it.isDigit() }\r\n    .joinToString(separator=&quot;&quot;)\r\n    .toIntOrNull()\r\n```\r\n\r\n","title":"How do I convert a String to an int in Java?","body":"<p>For Android developers ending up here these are various solutions for <strong>Kotlin</strong>:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>// Throws exception if number has bad form\nval result1 = &quot;1234&quot;.toInt()\n</code></pre>\n<pre class=\"lang-kotlin prettyprint-override\"><code>// Will be null if number has bad form\nval result2 = &quot;1234&quot;.toIntOrNull()\n</code></pre>\n<pre class=\"lang-kotlin prettyprint-override\"><code>// Will be the given default if number has bad form\nval result3 = &quot;1234&quot;\n    .toIntOrNull() ?: -1\n</code></pre>\n<pre class=\"lang-kotlin prettyprint-override\"><code>// Will be return of the run block if number has bad form\nval result4 = &quot;1234&quot;\n    .toIntOrNull()\n    ?: run {\n        // some code\n        // return an Int\n    }\n</code></pre>\n<pre class=\"lang-kotlin prettyprint-override\"><code>// Ignores any none-digit character in string\nval result5 = &quot;12abc34&quot;\n    .filter { it.isDigit() }\n    .joinToString(separator=&quot;&quot;)\n    .toIntOrNull()\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17781688,"reputation":407,"user_id":12912762,"display_name":"a55"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1688558644,"creation_date":1681448409,"answer_id":76011732,"question_id":5585779,"body_markdown":"This function accepts any param types as input\r\n\r\n- then try to convert it `toString()`\r\n- then extract integer via regex\r\n- and safe convert string to int\r\n\r\n```java\r\n\tpublic int toInt(Object o) {\r\n\r\n\t\t// input param is an integer :|\r\n\t\tif (o instanceof Integer)\r\n\t\t\treturn (int) o;\r\n\r\n\t\t// input param is (null) so return zero\r\n\t\tif (o == null)\r\n\t\t\treturn 0;\r\n\r\n\t\t// input param is boolean, so false = 0 \\ true = 1\r\n\t\tif (o instanceof Boolean)\r\n\t\t\treturn Boolean.TRUE.equals(o) ? 1 : 0;\r\n\r\n\t\t// convert object to string\r\n\t\tString str = &quot;0&quot;;\r\n\t\tif (o instanceof String) {\r\n\t\t\tstr = (String) o;\r\n\t\t} else { \r\n\t\t\ttry {\r\n\t\t\t\tstr = o.toString();\r\n\t\t\t} catch (Exception e) {}\r\n\t\t}\r\n\r\n\t\t// return zero if the string is empty\r\n\t\tif (str == &quot;&quot;)\r\n\t\t\treturn 0;\r\n\r\n\t\t// detect and export numbers from the string\r\n\t\ttry {\r\n\t\t\tPattern p = Pattern.compile(&quot;\\\\d+&quot;);\r\n\t\t\tMatcher m = p.matcher(str);\r\n\t\t\tif ( m.find() ) {\r\n\t\t\t\tstr = m.group(0);\r\n\t\t\t} else { // string not contains any numbers\r\n                str = &quot;0&quot;;\r\n            }\r\n\t\t} catch (Exception e) {\r\n\t\t\tstr = &quot;0&quot;;\r\n        }\r\n\t\t\r\n\t\t// java stores integers in 32-bit, so can not store more than 10 digits\r\n\t\tif (str.length() &gt; 19) {\r\n\t\t\tstr = str.substring(0, 19);\r\n\t\t}\r\n\r\n\t\t// convert string to integer\r\n\t\tint result = 0;\r\n\t\ttry {\r\n\t\t\tresult = Integer.parseInt(str);\r\n\t\t} catch (Exception e) {}\r\n\r\n\t\treturn result;\r\n\t}\r\n```\r\n\r\nYou can change\r\n\r\n    catch (Exception e) {}\r\n\r\nto\r\n\r\n    catch (Exception e) { e.printStackTrace(); }\r\n\r\nto show more detailed data about errors in logcat\r\n\r\n\r\nCan handle inputs such as :\r\n-\r\n- `false`\r\n- `&quot;&quot;`\r\n- `&quot;00004&quot;`\r\n- `&quot;  51&quot;`\r\n- `&quot;74.6ab.cd&quot;`\r\n- `&quot;foo 654 bar&quot;`\r\n\r\n\r\n# Warning\r\n\r\nThis function will change (string)`&quot;ab2cd3ef4&quot;` to (int)`234`","title":"How do I convert a String to an int in Java?","body":"<p>This function accepts any param types as input</p>\n<ul>\n<li>then try to convert it <code>toString()</code></li>\n<li>then extract integer via regex</li>\n<li>and safe convert string to int</li>\n</ul>\n<pre class=\"lang-java prettyprint-override\"><code>    public int toInt(Object o) {\n\n        // input param is an integer :|\n        if (o instanceof Integer)\n            return (int) o;\n\n        // input param is (null) so return zero\n        if (o == null)\n            return 0;\n\n        // input param is boolean, so false = 0 \\ true = 1\n        if (o instanceof Boolean)\n            return Boolean.TRUE.equals(o) ? 1 : 0;\n\n        // convert object to string\n        String str = &quot;0&quot;;\n        if (o instanceof String) {\n            str = (String) o;\n        } else { \n            try {\n                str = o.toString();\n            } catch (Exception e) {}\n        }\n\n        // return zero if the string is empty\n        if (str == &quot;&quot;)\n            return 0;\n\n        // detect and export numbers from the string\n        try {\n            Pattern p = Pattern.compile(&quot;\\\\d+&quot;);\n            Matcher m = p.matcher(str);\n            if ( m.find() ) {\n                str = m.group(0);\n            } else { // string not contains any numbers\n                str = &quot;0&quot;;\n            }\n        } catch (Exception e) {\n            str = &quot;0&quot;;\n        }\n        \n        // java stores integers in 32-bit, so can not store more than 10 digits\n        if (str.length() &gt; 19) {\n            str = str.substring(0, 19);\n        }\n\n        // convert string to integer\n        int result = 0;\n        try {\n            result = Integer.parseInt(str);\n        } catch (Exception e) {}\n\n        return result;\n    }\n</code></pre>\n<p>You can change</p>\n<pre><code>catch (Exception e) {}\n</code></pre>\n<p>to</p>\n<pre><code>catch (Exception e) { e.printStackTrace(); }\n</code></pre>\n<p>to show more detailed data about errors in logcat</p>\n<h2>Can handle inputs such as :</h2>\n<ul>\n<li><code>false</code></li>\n<li><code>&quot;&quot;</code></li>\n<li><code>&quot;00004&quot;</code></li>\n<li><code>&quot;  51&quot;</code></li>\n<li><code>&quot;74.6ab.cd&quot;</code></li>\n<li><code>&quot;foo 654 bar&quot;</code></li>\n</ul>\n<h1>Warning</h1>\n<p>This function will change (string)<code>&quot;ab2cd3ef4&quot;</code> to (int)<code>234</code></p>\n"}],"owner":{"account_id":256928,"reputation":44771,"user_id":537967,"accept_rate":75,"display_name":"Unknown user"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6758586,"favorite_count":0,"down_vote_count":29,"up_vote_count":3522,"accepted_answer_id":5585800,"answer_count":30,"score":3493,"last_activity_date":1702046762,"creation_date":1302200874,"question_id":5585779,"body_markdown":"How can I convert a `String` value to an `int` type?\r\n\r\n```java\r\n&quot;1234&quot;  →  1234\r\n```\r\n","title":"How do I convert a String to an int in Java?","body":"<p>How can I convert a <code>String</code> value to an <code>int</code> type?</p>\n<pre class=\"lang-java prettyprint-override\"><code>&quot;1234&quot;  →  1234\n</code></pre>\n"},{"tags":["java","http","httprequest","httpurlconnection","urlconnection"],"comments":[{"owner":{"account_id":11726648,"reputation":19523,"user_id":8583692,"display_name":"Mahozad"},"score":2,"creation_date":1640979092,"post_id":2793150,"comment_id":124703591,"body_markdown":"Some questions with lots of votes and general titles are flagged duplicate and link to this question. Also, there are [new ways](https://openjdk.java.net/groups/net/httpclient/intro.html) to execute HTTP requests in Java and the legacy *URLConnection* way may be deprecated in future. The title of this question should probably change to *How to execute HTTP requests in Java*.","body":"Some questions with lots of votes and general titles are flagged duplicate and link to this question. Also, there are <a href=\"https://openjdk.java.net/groups/net/httpclient/intro.html\" rel=\"nofollow noreferrer\">new ways</a> to execute HTTP requests in Java and the legacy <i>URLConnection</i> way may be deprecated in future. The title of this question should probably change to <i>How to execute HTTP requests in Java</i>."},{"owner":{"account_id":11726648,"reputation":19523,"user_id":8583692,"display_name":"Mahozad"},"score":0,"creation_date":1669473741,"post_id":2793150,"comment_id":131650667,"body_markdown":"Related: [How to send HTTP request in Java?](https://stackoverflow.com/q/1359689/8583692)","body":"Related: <a href=\"https://stackoverflow.com/q/1359689/8583692\">How to send HTTP request in Java?</a>"},{"owner":{"account_id":71739,"reputation":307143,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1697342997,"post_id":2793150,"comment_id":136266921,"body_markdown":"Many of your questions are already answered in the Javadoc of [`HttpURLConnection`](https://docs.oracle.com/javase/8/docs/api/java/net/HttpURLConnection.html).","body":"Many of your questions are already answered in the Javadoc of <a href=\"https://docs.oracle.com/javase/8/docs/api/java/net/HttpURLConnection.html\" rel=\"nofollow noreferrer\"><code>HttpURLConnection</code></a>."},{"owner":{"account_id":52822,"reputation":1088960,"user_id":157882,"accept_rate":93,"display_name":"BalusC"},"score":0,"creation_date":1697372368,"post_id":2793150,"comment_id":136269146,"body_markdown":"That&#39;s correct. There are however people who prefer concrete code examples because they are not always capable to turn the to them opaque wording in Javadoc into properly working code. That&#39;s among others what Stack Overflow is for.","body":"That&#39;s correct. There are however people who prefer concrete code examples because they are not always capable to turn the to them opaque wording in Javadoc into properly working code. That&#39;s among others what Stack Overflow is for."}],"answers":[{"tags":[],"owner":{"account_id":52822,"reputation":1088960,"user_id":157882,"accept_rate":93,"display_name":"BalusC"},"down_vote_count":9,"up_vote_count":2852,"is_accepted":true,"score":2843,"last_activity_date":1628684869,"creation_date":1273299397,"answer_id":2793153,"question_id":2793150,"body_markdown":"&lt;sup&gt;*First a disclaimer beforehand: the posted code snippets are all basic examples. You&#39;ll need to handle trivial `IOException`s and `RuntimeException`s like `NullPointerException`, `ArrayIndexOutOfBoundsException` and consorts yourself.*&lt;/sup&gt;\r\n\r\n&lt;sup&gt;*In case you&#39;re developing for Android instead of Java, note also that since introduction of API level 28, cleartext HTTP requests are [disabled by default](https://developer.android.com/about/versions/pie/android-9.0-changes-28#tls-enabled). You are encouraged to use `HttpsURLConnection`, but if it is really necessary, cleartext can be enabled in the [Application Manifest]((https://developer.android.com/guide/topics/manifest/application-element#usesCleartextTraffic)).*&lt;/sup&gt;\r\n\r\n---\r\n\r\n### Preparing\r\n\r\nWe first need to know at least the URL and the charset. The parameters are optional and depend on the functional requirements.\r\n\r\n    String url = &quot;http://example.com&quot;;\r\n    String charset = &quot;UTF-8&quot;;  // Or in Java 7 and later, use the constant: java.nio.charset.StandardCharsets.UTF_8.name()\r\n    String param1 = &quot;value1&quot;;\r\n    String param2 = &quot;value2&quot;;\r\n    // ...\r\n\r\n    String query = String.format(&quot;param1=%s&amp;param2=%s&quot;,\r\n        URLEncoder.encode(param1, charset),\r\n        URLEncoder.encode(param2, charset));\r\n\r\nThe query parameters must be in `name=value` format and be concatenated by `&amp;`. You would normally also [URL-encode][1] the query parameters with the specified charset using [`URLEncoder#encode()`][2].\r\n\r\n&lt;sup&gt;The `String#format()` is just for convenience. I prefer it when I would need the String concatenation operator `+` more than twice.&lt;/sup&gt;\r\n\r\n---\r\n\r\n### Firing an [HTTP GET][3] request with (optionally) query parameters\r\n\r\nIt&#39;s a trivial task. It&#39;s the default request method.\r\n\r\n    URLConnection connection = new URL(url + &quot;?&quot; + query).openConnection();\r\n    connection.setRequestProperty(&quot;Accept-Charset&quot;, charset);\r\n    InputStream response = connection.getInputStream();\r\n    // ...\r\n\r\nAny query string should be concatenated to the URL using `?`. The [`Accept-Charset`][4] header may hint the server what encoding the parameters are in. If you don&#39;t send any query string, then you can leave the `Accept-Charset` header away. If you don&#39;t need to set any headers, then you can even use the [`URL#openStream()`][5] shortcut method.\r\n\r\n    InputStream response = new URL(url).openStream();\r\n    // ...\r\n\r\nEither way, if the other side is an [`HttpServlet`][6], then its [`doGet()`][7] method will be called and the parameters will be available by [`HttpServletRequest#getParameter()`][8].\r\n\r\nFor testing purposes, you can print the response body to [standard output][9] as below:\r\n\r\n    try (Scanner scanner = new Scanner(response)) {\r\n        String responseBody = scanner.useDelimiter(&quot;\\\\A&quot;).next();\r\n        System.out.println(responseBody);\r\n    }\r\n\r\n---\r\n\r\n### Firing an [HTTP POST][10] request with query parameters\r\n\r\nSetting the [`URLConnection#setDoOutput()`][11] to `true` implicitly sets the request method to POST. The standard HTTP POST as web forms do is of type `application/x-www-form-urlencoded` wherein the query string is written to the request body.\r\n\r\n    URLConnection connection = new URL(url).openConnection();\r\n    connection.setDoOutput(true); // Triggers POST.\r\n    connection.setRequestProperty(&quot;Accept-Charset&quot;, charset);\r\n    connection.setRequestProperty(&quot;Content-Type&quot;, &quot;application/x-www-form-urlencoded;charset=&quot; + charset);\r\n\r\n    try (OutputStream output = connection.getOutputStream()) {\r\n        output.write(query.getBytes(charset));\r\n    }\r\n\r\n    InputStream response = connection.getInputStream();\r\n    // ...\r\n\r\nNote: whenever you&#39;d like to submit a HTML form programmatically, don&#39;t forget to take the `name=value` pairs of any `&lt;input type=&quot;hidden&quot;&gt;` elements into the query string and of course also the `name=value` pair of the `&lt;input type=&quot;submit&quot;&gt;` element which you&#39;d like to &quot;press&quot; programmatically (because that&#39;s usually been used in the server side to distinguish if a button was pressed and if so, which one).\r\n\r\nYou can also cast the obtained [`URLConnection`][12] to [`HttpURLConnection`][13] and use its [`HttpURLConnection#setRequestMethod()`][14] instead. But if you&#39;re trying to use the connection for output you still need to set [`URLConnection#setDoOutput()`][11] to `true`.\r\n\r\n    HttpURLConnection httpConnection = (HttpURLConnection) new URL(url).openConnection();\r\n    httpConnection.setRequestMethod(&quot;POST&quot;);\r\n    // ...\r\n\r\nEither way, if the other side is an [`HttpServlet`][6], then its [`doPost()`][15] method will be called and the parameters will be available by [`HttpServletRequest#getParameter()`][8].\r\n\r\n---\r\n\r\n### Actually firing the HTTP request\r\n\r\nYou can fire the HTTP request explicitly with [`URLConnection#connect()`][16], but the request will automatically be fired on demand when you want to get any information about the HTTP response, such as the response body using [`URLConnection#getInputStream()`][17] and so on. The above examples does exactly that, so the `connect()` call is in fact superfluous.\r\n\r\n---\r\n\r\n### Gathering HTTP response information\r\n\r\n1. [HTTP response status][18]:\r\n\r\n You need an [`HttpURLConnection`][13] here. Cast it first if necessary.\r\n\r\n        int status = httpConnection.getResponseCode();\r\n2. [HTTP response headers][19]:\r\n\r\n        for (Entry&lt;String, List&lt;String&gt;&gt; header : connection.getHeaderFields().entrySet()) {\r\n            System.out.println(header.getKey() + &quot;=&quot; + header.getValue());\r\n        }\r\n\r\n3. [HTTP response encoding][20]:\r\n\r\n When the `Content-Type` contains a `charset` parameter, then the response body is likely text based and we&#39;d like to process the response body with the server-side specified character encoding then.\r\n\r\n        String contentType = connection.getHeaderField(&quot;Content-Type&quot;);\r\n        String charset = null;\r\n\r\n        for (String param : contentType.replace(&quot; &quot;, &quot;&quot;).split(&quot;;&quot;)) {\r\n            if (param.startsWith(&quot;charset=&quot;)) {\r\n                charset = param.split(&quot;=&quot;, 2)[1];\r\n                break;\r\n            }\r\n        }\r\n\r\n        if (charset != null) {\r\n            try (BufferedReader reader = new BufferedReader(new InputStreamReader(response, charset))) {\r\n                for (String line; (line = reader.readLine()) != null;) {\r\n                    // ... System.out.println(line)?\r\n                }\r\n            }\r\n        } else {\r\n            // It&#39;s likely binary content, use InputStream/OutputStream.\r\n        }\r\n\r\n---\r\n\r\n### Maintaining the session\r\n\r\nThe server side session is usually backed by a cookie. Some web forms require that you&#39;re logged in and/or are tracked by a session. You can use the [`CookieHandler`][21] API to maintain cookies. You need to prepare a [`CookieManager`][22] with a [`CookiePolicy`][23] of [`ACCEPT_ALL`][24] before sending all HTTP requests.\r\n\r\n    // First set the default cookie manager.\r\n    CookieHandler.setDefault(new CookieManager(null, CookiePolicy.ACCEPT_ALL));\r\n\r\n    // All the following subsequent URLConnections will use the same cookie manager.\r\n    URLConnection connection = new URL(url).openConnection();\r\n    // ...\r\n\r\n    connection = new URL(url).openConnection();\r\n    // ...\r\n\r\n    connection = new URL(url).openConnection();\r\n    // ...\r\n\r\nNote that this is known to not always work properly in all circumstances. If it fails for you, then best is to manually gather and set the cookie headers. You basically need to grab all `Set-Cookie` headers from the response of the login or the first `GET` request and then pass this through the subsequent requests.\r\n\r\n    // Gather all cookies on the first request.\r\n    URLConnection connection = new URL(url).openConnection();\r\n    List&lt;String&gt; cookies = connection.getHeaderFields().get(&quot;Set-Cookie&quot;);\r\n    // ...\r\n\r\n    // Then use the same cookies on all subsequent requests.\r\n    connection = new URL(url).openConnection();\r\n    for (String cookie : cookies) {\r\n        connection.addRequestProperty(&quot;Cookie&quot;, cookie.split(&quot;;&quot;, 2)[0]);\r\n    }\r\n    // ...\r\n\r\nThe `split(&quot;;&quot;, 2)[0]` is there to get rid of cookie attributes which are irrelevant for the server side like `expires`, `path`, etc. Alternatively, you could also use `cookie.substring(0, cookie.indexOf(&#39;;&#39;))` instead of `split()`.\r\n\r\n---\r\n\r\n### Streaming mode\r\n\r\nThe [`HttpURLConnection`][13] will by default buffer the *entire* request body before actually sending it, regardless of whether you&#39;ve set a fixed content length yourself using `connection.setRequestProperty(&quot;Content-Length&quot;, contentLength);`. This may cause `OutOfMemoryException`s whenever you concurrently send large POST requests (e.g. uploading files). To avoid this, you would like to set the [`HttpURLConnection#setFixedLengthStreamingMode()`][25].\r\n\r\n    httpConnection.setFixedLengthStreamingMode(contentLength);\r\n\r\nBut if the content length is really not known beforehand, then you can make use of chunked streaming mode by setting the [`HttpURLConnection#setChunkedStreamingMode()`][26] accordingly. This will set the HTTP [`Transfer-Encoding`][27] header to `chunked` which will force the request body being sent in chunks. The below example will send the body in chunks of 1&amp;nbsp;KB.\r\n\r\n    httpConnection.setChunkedStreamingMode(1024);\r\n\r\n---\r\n\r\n### User-Agent\r\n\r\nIt can happen that [a request returns an unexpected response, while it works fine with a real web browser][28]. The server side is probably blocking requests based on the [`User-Agent`][29] request header. The `URLConnection` will by default set it to `Java/1.6.0_19` where the last part is obviously the JRE version. You can override this as follows:\r\n\r\n    connection.setRequestProperty(&quot;User-Agent&quot;, &quot;Mozilla/5.0 (Windows NT 6.1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/41.0.2228.0 Safari/537.36&quot;); // Do as if you&#39;re using Chrome 41 on Windows 7.\r\n\r\nUse the User-Agent string from a [recent browser][30].\r\n\r\n---\r\n\r\n### Error handling\r\n\r\nIf the HTTP response code is `4nn` (Client Error) or `5nn` (Server Error), then you may want to read the `HttpURLConnection#getErrorStream()` to see if the server has sent any useful error information.\r\n\r\n    InputStream error = ((HttpURLConnection) connection).getErrorStream();\r\n\r\nIf the HTTP response code is -1, then something went wrong with connection and response handling. The `HttpURLConnection` implementation is in older JREs somewhat buggy with keeping connections alive. You may want to turn it off by setting the `http.keepAlive` system property to `false`. You can do this programmatically in the beginning of your application by:\r\n\r\n    System.setProperty(&quot;http.keepAlive&quot;, &quot;false&quot;);\r\n\r\n---\r\n\r\n### Uploading files\r\n\r\nYou&#39;d normally use [`multipart/form-data`][31] encoding for mixed POST content (binary and character data). The encoding is in more detail described in [RFC2388][32].\r\n\r\n    String param = &quot;value&quot;;\r\n    File textFile = new File(&quot;/path/to/file.txt&quot;);\r\n    File binaryFile = new File(&quot;/path/to/file.bin&quot;);\r\n    String boundary = Long.toHexString(System.currentTimeMillis()); // Just generate some unique random value.\r\n    String CRLF = &quot;\\r\\n&quot;; // Line separator required by multipart/form-data.\r\n    URLConnection connection = new URL(url).openConnection();\r\n    connection.setDoOutput(true);\r\n    connection.setRequestProperty(&quot;Content-Type&quot;, &quot;multipart/form-data; boundary=&quot; + boundary);\r\n\r\n    try (\r\n        OutputStream output = connection.getOutputStream();\r\n        PrintWriter writer = new PrintWriter(new OutputStreamWriter(output, charset), true);\r\n    ) {\r\n        // Send normal param.\r\n        writer.append(&quot;--&quot; + boundary).append(CRLF);\r\n        writer.append(&quot;Content-Disposition: form-data; name=\\&quot;param\\&quot;&quot;).append(CRLF);\r\n        writer.append(&quot;Content-Type: text/plain; charset=&quot; + charset).append(CRLF);\r\n        writer.append(CRLF).append(param).append(CRLF).flush();\r\n\r\n        // Send text file.\r\n        writer.append(&quot;--&quot; + boundary).append(CRLF);\r\n        writer.append(&quot;Content-Disposition: form-data; name=\\&quot;textFile\\&quot;; filename=\\&quot;&quot; + textFile.getName() + &quot;\\&quot;&quot;).append(CRLF);\r\n        writer.append(&quot;Content-Type: text/plain; charset=&quot; + charset).append(CRLF); // Text file itself must be saved in this charset!\r\n        writer.append(CRLF).flush();\r\n        Files.copy(textFile.toPath(), output);\r\n        output.flush(); // Important before continuing with writer!\r\n        writer.append(CRLF).flush(); // CRLF is important! It indicates end of boundary.\r\n\r\n        // Send binary file.\r\n        writer.append(&quot;--&quot; + boundary).append(CRLF);\r\n        writer.append(&quot;Content-Disposition: form-data; name=\\&quot;binaryFile\\&quot;; filename=\\&quot;&quot; + binaryFile.getName() + &quot;\\&quot;&quot;).append(CRLF);\r\n        writer.append(&quot;Content-Type: &quot; + URLConnection.guessContentTypeFromName(binaryFile.getName())).append(CRLF);\r\n        writer.append(&quot;Content-Transfer-Encoding: binary&quot;).append(CRLF);\r\n        writer.append(CRLF).flush();\r\n        Files.copy(binaryFile.toPath(), output);\r\n        output.flush(); // Important before continuing with writer!\r\n        writer.append(CRLF).flush(); // CRLF is important! It indicates end of boundary.\r\n\r\n        // End of multipart/form-data.\r\n        writer.append(&quot;--&quot; + boundary + &quot;--&quot;).append(CRLF).flush();\r\n    }\r\n\r\nIf the other side is an [`HttpServlet`][6], then its [`doPost()`][15] method will be called and the parts will be available by [`HttpServletRequest#getPart()`][33] (note, thus **not** `getParameter()` and so on!). The `getPart()` method is however relatively new, it&#39;s introduced in Servlet 3.0 (Glassfish 3, Tomcat 7, etc.). Prior to Servlet 3.0, your best choice is using [Apache Commons FileUpload][34] to parse a `multipart/form-data` request. Also see [this answer][35] for examples of both the FileUpload and the Servelt 3.0 approaches.\r\n\r\n---\r\n\r\n### Dealing with untrusted or misconfigured HTTPS sites\r\n\r\n&lt;sup&gt;*In case you&#39;re developing for Android instead of Java, **be careful**: the workaround below may save your day if you don&#39;t have correct certificates deployed during development. But you should not use it for production. These days (April 2021) Google will not allow your app be distributed on Play Store if they detect insecure hostname verifier, see https://support.google.com/faqs/answer/7188426.*&lt;/sup&gt;\r\n\r\nSometimes you need to connect an HTTPS URL, perhaps because you&#39;re writing a web scraper. In that case, you may likely face a `javax.net.ssl.SSLException: Not trusted server certificate` on some HTTPS sites who doesn&#39;t keep their SSL certificates up to date, or a `java.security.cert.CertificateException: No subject alternative DNS name matching [hostname] found` or `javax.net.ssl.SSLProtocolException: handshake alert: unrecognized_name` on some misconfigured HTTPS sites.\r\n\r\nThe following one-time-run `static` initializer in your web scraper class should make `HttpsURLConnection` more lenient as to those HTTPS sites and thus not throw those exceptions anymore.\r\n\r\n    static {\r\n        TrustManager[] trustAllCertificates = new TrustManager[] {\r\n            new X509TrustManager() {\r\n                @Override\r\n                public X509Certificate[] getAcceptedIssuers() {\r\n                    return null; // Not relevant.\r\n                }\r\n                @Override\r\n                public void checkClientTrusted(X509Certificate[] certs, String authType) {\r\n                    // Do nothing. Just allow them all.\r\n                }\r\n                @Override\r\n                public void checkServerTrusted(X509Certificate[] certs, String authType) {\r\n                    // Do nothing. Just allow them all.\r\n                }\r\n            }\r\n        };\r\n\r\n        HostnameVerifier trustAllHostnames = new HostnameVerifier() {\r\n            @Override\r\n            public boolean verify(String hostname, SSLSession session) {\r\n                return true; // Just allow them all.\r\n            }\r\n        };\r\n\r\n        try {\r\n            System.setProperty(&quot;jsse.enableSNIExtension&quot;, &quot;false&quot;);\r\n            SSLContext sc = SSLContext.getInstance(&quot;SSL&quot;);\r\n            sc.init(null, trustAllCertificates, new SecureRandom());\r\n            HttpsURLConnection.setDefaultSSLSocketFactory(sc.getSocketFactory());\r\n            HttpsURLConnection.setDefaultHostnameVerifier(trustAllHostnames);\r\n        }\r\n        catch (GeneralSecurityException e) {\r\n            throw new ExceptionInInitializerError(e);\r\n        }\r\n    }\r\n\r\n---\r\n\r\n### Last words\r\n\r\nThe [Apache HttpComponents HttpClient][36] is *much* more convenient in this all :)\r\n\r\n- [HttpClient Tutorial][37]\r\n- [HttpClient Examples][38]\r\n\r\n---\r\n\r\n### Parsing and extracting HTML\r\n\r\nIf all you want is parsing and extracting data from HTML, then better use a HTML parser like [Jsoup][39].\r\n\r\n- [What are the pros/cons of leading HTML parsers in Java][40]\r\n- [How to scan and extract a webpage in Java][41]\r\n\r\n  [1]: http://en.wikipedia.org/wiki/Percent-encoding\r\n  [2]: http://docs.oracle.com/javase/8/docs/api/java/net/URLEncoder.html#encode-java.lang.String-java.lang.String-\r\n  [3]: http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html#sec9.3\r\n  [4]: http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.2\r\n  [5]: http://docs.oracle.com/javase/8/docs/api/java/net/URL.html#openStream%28%29\r\n  [6]: http://docs.oracle.com/javaee/7/api/javax/servlet/http/HttpServlet.html\r\n  [7]: http://docs.oracle.com/javaee/7/api/javax/servlet/http/HttpServlet.html#doGet%28javax.servlet.http.HttpServletRequest,%20javax.servlet.http.HttpServletResponse%29\r\n  [8]: http://docs.oracle.com/javaee/7/api/javax/servlet/ServletRequest.html#getParameter%28java.lang.String%29\r\n  [9]: https://en.wikipedia.org/wiki/Standard_streams#Standard_output_.28stdout.29\r\n  [10]: http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html#sec9.5\r\n  [11]: http://docs.oracle.com/javase/8/docs/api/java/net/URLConnection.html#setDoOutput%28boolean%29\r\n  [12]: http://docs.oracle.com/javase/8/docs/api/java/net/URLConnection.html\r\n  [13]: http://docs.oracle.com/javase/8/docs/api/java/net/HttpURLConnection.html\r\n  [14]: http://docs.oracle.com/javase/8/docs/api/java/net/HttpURLConnection.html#setRequestMethod%28java.lang.String%29\r\n  [15]: http://docs.oracle.com/javaee/7/api/javax/servlet/http/HttpServlet.html#doPost%28javax.servlet.http.HttpServletRequest,%20javax.servlet.http.HttpServletResponse%29\r\n  [16]: http://docs.oracle.com/javase/8/docs/api/java/net/URLConnection.html#connect%28%29\r\n  [17]: http://docs.oracle.com/javase/8/docs/api/java/net/URLConnection.html#getInputStream%28%29\r\n  [18]: http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html\r\n  [19]: http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html\r\n  [20]: http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.17\r\n  [21]: http://docs.oracle.com/javase/8/docs/api/java/net/CookieHandler.html\r\n  [22]: http://docs.oracle.com/javase/8/docs/api/java/net/CookieManager.html\r\n  [23]: http://docs.oracle.com/javase/8/docs/api/java/net/CookiePolicy.html\r\n  [24]: http://docs.oracle.com/javase/8/docs/api/java/net/CookiePolicy.html#ACCEPT_ALL\r\n  [25]: http://docs.oracle.com/javase/8/docs/api/java/net/HttpURLConnection.html#setFixedLengthStreamingMode%28int%29\r\n  [26]: http://docs.oracle.com/javase/8/docs/api/java/net/HttpURLConnection.html#setChunkedStreamingMode%28int%29\r\n  [27]: http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.41\r\n  [28]: https://stackoverflow.com/questions/13670692/403-forbidden-with-java-but-not-web-browser\r\n  [29]: http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.43\r\n  [30]: http://www.useragentstring.com/pages/useragentstring.php\r\n  [31]: http://www.w3.org/TR/html401/interact/forms.html#h-17.13.4.2\r\n  [32]: http://www.faqs.org/rfcs/rfc2388.html\r\n  [33]: http://docs.oracle.com/javaee/7/api/javax/servlet/http/HttpServletRequest.html#getPart%28java.lang.String%29\r\n  [34]: http://commons.apache.org/fileupload\r\n  [35]: https://stackoverflow.com/questions/2422468/upload-big-file-to-servlet/2424824#2424824\r\n  [36]: http://hc.apache.org/httpcomponents-client-ga/\r\n  [37]: http://hc.apache.org/httpcomponents-client-ga/tutorial/html/\r\n  [38]: http://hc.apache.org/httpcomponents-client-ga/examples.html\r\n  [39]: http://jsoup.org\r\n  [40]: https://stackoverflow.com/questions/3152138/what-are-the-pros-and-cons-of-the-leading-java-html-parsers/3154281#3154281\r\n  [41]: https://stackoverflow.com/questions/2835505/how-to-scan-a-website-or-page-for-info-and-bring-it-into-my-program/2835555#2835555\r\n\r\n\r\n\r\n","title":"How to use java.net.URLConnection to fire and handle HTTP requests","body":"<p><sup><em>First a disclaimer beforehand: the posted code snippets are all basic examples. You'll need to handle trivial <code>IOException</code>s and <code>RuntimeException</code>s like <code>NullPointerException</code>, <code>ArrayIndexOutOfBoundsException</code> and consorts yourself.</em></sup></p>\n<p><sup><em>In case you're developing for Android instead of Java, note also that since introduction of API level 28, cleartext HTTP requests are <a href=\"https://developer.android.com/about/versions/pie/android-9.0-changes-28#tls-enabled\" rel=\"noreferrer\">disabled by default</a>. You are encouraged to use <code>HttpsURLConnection</code>, but if it is really necessary, cleartext can be enabled in the Application Manifest.</em></sup></p>\n<hr />\n<h3>Preparing</h3>\n<p>We first need to know at least the URL and the charset. The parameters are optional and depend on the functional requirements.</p>\n<pre><code>String url = &quot;http://example.com&quot;;\nString charset = &quot;UTF-8&quot;;  // Or in Java 7 and later, use the constant: java.nio.charset.StandardCharsets.UTF_8.name()\nString param1 = &quot;value1&quot;;\nString param2 = &quot;value2&quot;;\n// ...\n\nString query = String.format(&quot;param1=%s&amp;param2=%s&quot;,\n    URLEncoder.encode(param1, charset),\n    URLEncoder.encode(param2, charset));\n</code></pre>\n<p>The query parameters must be in <code>name=value</code> format and be concatenated by <code>&amp;</code>. You would normally also <a href=\"http://en.wikipedia.org/wiki/Percent-encoding\" rel=\"noreferrer\">URL-encode</a> the query parameters with the specified charset using <a href=\"http://docs.oracle.com/javase/8/docs/api/java/net/URLEncoder.html#encode-java.lang.String-java.lang.String-\" rel=\"noreferrer\"><code>URLEncoder#encode()</code></a>.</p>\n<p><sup>The <code>String#format()</code> is just for convenience. I prefer it when I would need the String concatenation operator <code>+</code> more than twice.</sup></p>\n<hr />\n<h3>Firing an <a href=\"http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html#sec9.3\" rel=\"noreferrer\">HTTP GET</a> request with (optionally) query parameters</h3>\n<p>It's a trivial task. It's the default request method.</p>\n<pre><code>URLConnection connection = new URL(url + &quot;?&quot; + query).openConnection();\nconnection.setRequestProperty(&quot;Accept-Charset&quot;, charset);\nInputStream response = connection.getInputStream();\n// ...\n</code></pre>\n<p>Any query string should be concatenated to the URL using <code>?</code>. The <a href=\"http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.2\" rel=\"noreferrer\"><code>Accept-Charset</code></a> header may hint the server what encoding the parameters are in. If you don't send any query string, then you can leave the <code>Accept-Charset</code> header away. If you don't need to set any headers, then you can even use the <a href=\"http://docs.oracle.com/javase/8/docs/api/java/net/URL.html#openStream%28%29\" rel=\"noreferrer\"><code>URL#openStream()</code></a> shortcut method.</p>\n<pre><code>InputStream response = new URL(url).openStream();\n// ...\n</code></pre>\n<p>Either way, if the other side is an <a href=\"http://docs.oracle.com/javaee/7/api/javax/servlet/http/HttpServlet.html\" rel=\"noreferrer\"><code>HttpServlet</code></a>, then its <a href=\"http://docs.oracle.com/javaee/7/api/javax/servlet/http/HttpServlet.html#doGet%28javax.servlet.http.HttpServletRequest,%20javax.servlet.http.HttpServletResponse%29\" rel=\"noreferrer\"><code>doGet()</code></a> method will be called and the parameters will be available by <a href=\"http://docs.oracle.com/javaee/7/api/javax/servlet/ServletRequest.html#getParameter%28java.lang.String%29\" rel=\"noreferrer\"><code>HttpServletRequest#getParameter()</code></a>.</p>\n<p>For testing purposes, you can print the response body to <a href=\"https://en.wikipedia.org/wiki/Standard_streams#Standard_output_.28stdout.29\" rel=\"noreferrer\">standard output</a> as below:</p>\n<pre><code>try (Scanner scanner = new Scanner(response)) {\n    String responseBody = scanner.useDelimiter(&quot;\\\\A&quot;).next();\n    System.out.println(responseBody);\n}\n</code></pre>\n<hr />\n<h3>Firing an <a href=\"http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html#sec9.5\" rel=\"noreferrer\">HTTP POST</a> request with query parameters</h3>\n<p>Setting the <a href=\"http://docs.oracle.com/javase/8/docs/api/java/net/URLConnection.html#setDoOutput%28boolean%29\" rel=\"noreferrer\"><code>URLConnection#setDoOutput()</code></a> to <code>true</code> implicitly sets the request method to POST. The standard HTTP POST as web forms do is of type <code>application/x-www-form-urlencoded</code> wherein the query string is written to the request body.</p>\n<pre><code>URLConnection connection = new URL(url).openConnection();\nconnection.setDoOutput(true); // Triggers POST.\nconnection.setRequestProperty(&quot;Accept-Charset&quot;, charset);\nconnection.setRequestProperty(&quot;Content-Type&quot;, &quot;application/x-www-form-urlencoded;charset=&quot; + charset);\n\ntry (OutputStream output = connection.getOutputStream()) {\n    output.write(query.getBytes(charset));\n}\n\nInputStream response = connection.getInputStream();\n// ...\n</code></pre>\n<p>Note: whenever you'd like to submit a HTML form programmatically, don't forget to take the <code>name=value</code> pairs of any <code>&lt;input type=&quot;hidden&quot;&gt;</code> elements into the query string and of course also the <code>name=value</code> pair of the <code>&lt;input type=&quot;submit&quot;&gt;</code> element which you'd like to &quot;press&quot; programmatically (because that's usually been used in the server side to distinguish if a button was pressed and if so, which one).</p>\n<p>You can also cast the obtained <a href=\"http://docs.oracle.com/javase/8/docs/api/java/net/URLConnection.html\" rel=\"noreferrer\"><code>URLConnection</code></a> to <a href=\"http://docs.oracle.com/javase/8/docs/api/java/net/HttpURLConnection.html\" rel=\"noreferrer\"><code>HttpURLConnection</code></a> and use its <a href=\"http://docs.oracle.com/javase/8/docs/api/java/net/HttpURLConnection.html#setRequestMethod%28java.lang.String%29\" rel=\"noreferrer\"><code>HttpURLConnection#setRequestMethod()</code></a> instead. But if you're trying to use the connection for output you still need to set <a href=\"http://docs.oracle.com/javase/8/docs/api/java/net/URLConnection.html#setDoOutput%28boolean%29\" rel=\"noreferrer\"><code>URLConnection#setDoOutput()</code></a> to <code>true</code>.</p>\n<pre><code>HttpURLConnection httpConnection = (HttpURLConnection) new URL(url).openConnection();\nhttpConnection.setRequestMethod(&quot;POST&quot;);\n// ...\n</code></pre>\n<p>Either way, if the other side is an <a href=\"http://docs.oracle.com/javaee/7/api/javax/servlet/http/HttpServlet.html\" rel=\"noreferrer\"><code>HttpServlet</code></a>, then its <a href=\"http://docs.oracle.com/javaee/7/api/javax/servlet/http/HttpServlet.html#doPost%28javax.servlet.http.HttpServletRequest,%20javax.servlet.http.HttpServletResponse%29\" rel=\"noreferrer\"><code>doPost()</code></a> method will be called and the parameters will be available by <a href=\"http://docs.oracle.com/javaee/7/api/javax/servlet/ServletRequest.html#getParameter%28java.lang.String%29\" rel=\"noreferrer\"><code>HttpServletRequest#getParameter()</code></a>.</p>\n<hr />\n<h3>Actually firing the HTTP request</h3>\n<p>You can fire the HTTP request explicitly with <a href=\"http://docs.oracle.com/javase/8/docs/api/java/net/URLConnection.html#connect%28%29\" rel=\"noreferrer\"><code>URLConnection#connect()</code></a>, but the request will automatically be fired on demand when you want to get any information about the HTTP response, such as the response body using <a href=\"http://docs.oracle.com/javase/8/docs/api/java/net/URLConnection.html#getInputStream%28%29\" rel=\"noreferrer\"><code>URLConnection#getInputStream()</code></a> and so on. The above examples does exactly that, so the <code>connect()</code> call is in fact superfluous.</p>\n<hr />\n<h3>Gathering HTTP response information</h3>\n<ol>\n<li><a href=\"http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html\" rel=\"noreferrer\">HTTP response status</a>:</li>\n</ol>\n<p>You need an <a href=\"http://docs.oracle.com/javase/8/docs/api/java/net/HttpURLConnection.html\" rel=\"noreferrer\"><code>HttpURLConnection</code></a> here. Cast it first if necessary.</p>\n<pre><code>    int status = httpConnection.getResponseCode();\n</code></pre>\n<ol start=\"2\">\n<li><p><a href=\"http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html\" rel=\"noreferrer\">HTTP response headers</a>:</p>\n<pre><code> for (Entry&lt;String, List&lt;String&gt;&gt; header : connection.getHeaderFields().entrySet()) {\n     System.out.println(header.getKey() + &quot;=&quot; + header.getValue());\n }\n</code></pre>\n</li>\n<li><p><a href=\"http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.17\" rel=\"noreferrer\">HTTP response encoding</a>:</p>\n</li>\n</ol>\n<p>When the <code>Content-Type</code> contains a <code>charset</code> parameter, then the response body is likely text based and we'd like to process the response body with the server-side specified character encoding then.</p>\n<pre><code>    String contentType = connection.getHeaderField(&quot;Content-Type&quot;);\n    String charset = null;\n\n    for (String param : contentType.replace(&quot; &quot;, &quot;&quot;).split(&quot;;&quot;)) {\n        if (param.startsWith(&quot;charset=&quot;)) {\n            charset = param.split(&quot;=&quot;, 2)[1];\n            break;\n        }\n    }\n\n    if (charset != null) {\n        try (BufferedReader reader = new BufferedReader(new InputStreamReader(response, charset))) {\n            for (String line; (line = reader.readLine()) != null;) {\n                // ... System.out.println(line)?\n            }\n        }\n    } else {\n        // It's likely binary content, use InputStream/OutputStream.\n    }\n</code></pre>\n<hr />\n<h3>Maintaining the session</h3>\n<p>The server side session is usually backed by a cookie. Some web forms require that you're logged in and/or are tracked by a session. You can use the <a href=\"http://docs.oracle.com/javase/8/docs/api/java/net/CookieHandler.html\" rel=\"noreferrer\"><code>CookieHandler</code></a> API to maintain cookies. You need to prepare a <a href=\"http://docs.oracle.com/javase/8/docs/api/java/net/CookieManager.html\" rel=\"noreferrer\"><code>CookieManager</code></a> with a <a href=\"http://docs.oracle.com/javase/8/docs/api/java/net/CookiePolicy.html\" rel=\"noreferrer\"><code>CookiePolicy</code></a> of <a href=\"http://docs.oracle.com/javase/8/docs/api/java/net/CookiePolicy.html#ACCEPT_ALL\" rel=\"noreferrer\"><code>ACCEPT_ALL</code></a> before sending all HTTP requests.</p>\n<pre><code>// First set the default cookie manager.\nCookieHandler.setDefault(new CookieManager(null, CookiePolicy.ACCEPT_ALL));\n\n// All the following subsequent URLConnections will use the same cookie manager.\nURLConnection connection = new URL(url).openConnection();\n// ...\n\nconnection = new URL(url).openConnection();\n// ...\n\nconnection = new URL(url).openConnection();\n// ...\n</code></pre>\n<p>Note that this is known to not always work properly in all circumstances. If it fails for you, then best is to manually gather and set the cookie headers. You basically need to grab all <code>Set-Cookie</code> headers from the response of the login or the first <code>GET</code> request and then pass this through the subsequent requests.</p>\n<pre><code>// Gather all cookies on the first request.\nURLConnection connection = new URL(url).openConnection();\nList&lt;String&gt; cookies = connection.getHeaderFields().get(&quot;Set-Cookie&quot;);\n// ...\n\n// Then use the same cookies on all subsequent requests.\nconnection = new URL(url).openConnection();\nfor (String cookie : cookies) {\n    connection.addRequestProperty(&quot;Cookie&quot;, cookie.split(&quot;;&quot;, 2)[0]);\n}\n// ...\n</code></pre>\n<p>The <code>split(&quot;;&quot;, 2)[0]</code> is there to get rid of cookie attributes which are irrelevant for the server side like <code>expires</code>, <code>path</code>, etc. Alternatively, you could also use <code>cookie.substring(0, cookie.indexOf(';'))</code> instead of <code>split()</code>.</p>\n<hr />\n<h3>Streaming mode</h3>\n<p>The <a href=\"http://docs.oracle.com/javase/8/docs/api/java/net/HttpURLConnection.html\" rel=\"noreferrer\"><code>HttpURLConnection</code></a> will by default buffer the <em>entire</em> request body before actually sending it, regardless of whether you've set a fixed content length yourself using <code>connection.setRequestProperty(&quot;Content-Length&quot;, contentLength);</code>. This may cause <code>OutOfMemoryException</code>s whenever you concurrently send large POST requests (e.g. uploading files). To avoid this, you would like to set the <a href=\"http://docs.oracle.com/javase/8/docs/api/java/net/HttpURLConnection.html#setFixedLengthStreamingMode%28int%29\" rel=\"noreferrer\"><code>HttpURLConnection#setFixedLengthStreamingMode()</code></a>.</p>\n<pre><code>httpConnection.setFixedLengthStreamingMode(contentLength);\n</code></pre>\n<p>But if the content length is really not known beforehand, then you can make use of chunked streaming mode by setting the <a href=\"http://docs.oracle.com/javase/8/docs/api/java/net/HttpURLConnection.html#setChunkedStreamingMode%28int%29\" rel=\"noreferrer\"><code>HttpURLConnection#setChunkedStreamingMode()</code></a> accordingly. This will set the HTTP <a href=\"http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.41\" rel=\"noreferrer\"><code>Transfer-Encoding</code></a> header to <code>chunked</code> which will force the request body being sent in chunks. The below example will send the body in chunks of 1 KB.</p>\n<pre><code>httpConnection.setChunkedStreamingMode(1024);\n</code></pre>\n<hr />\n<h3>User-Agent</h3>\n<p>It can happen that <a href=\"https://stackoverflow.com/questions/13670692/403-forbidden-with-java-but-not-web-browser\">a request returns an unexpected response, while it works fine with a real web browser</a>. The server side is probably blocking requests based on the <a href=\"http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.43\" rel=\"noreferrer\"><code>User-Agent</code></a> request header. The <code>URLConnection</code> will by default set it to <code>Java/1.6.0_19</code> where the last part is obviously the JRE version. You can override this as follows:</p>\n<pre><code>connection.setRequestProperty(&quot;User-Agent&quot;, &quot;Mozilla/5.0 (Windows NT 6.1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/41.0.2228.0 Safari/537.36&quot;); // Do as if you're using Chrome 41 on Windows 7.\n</code></pre>\n<p>Use the User-Agent string from a <a href=\"http://www.useragentstring.com/pages/useragentstring.php\" rel=\"noreferrer\">recent browser</a>.</p>\n<hr />\n<h3>Error handling</h3>\n<p>If the HTTP response code is <code>4nn</code> (Client Error) or <code>5nn</code> (Server Error), then you may want to read the <code>HttpURLConnection#getErrorStream()</code> to see if the server has sent any useful error information.</p>\n<pre><code>InputStream error = ((HttpURLConnection) connection).getErrorStream();\n</code></pre>\n<p>If the HTTP response code is -1, then something went wrong with connection and response handling. The <code>HttpURLConnection</code> implementation is in older JREs somewhat buggy with keeping connections alive. You may want to turn it off by setting the <code>http.keepAlive</code> system property to <code>false</code>. You can do this programmatically in the beginning of your application by:</p>\n<pre><code>System.setProperty(&quot;http.keepAlive&quot;, &quot;false&quot;);\n</code></pre>\n<hr />\n<h3>Uploading files</h3>\n<p>You'd normally use <a href=\"http://www.w3.org/TR/html401/interact/forms.html#h-17.13.4.2\" rel=\"noreferrer\"><code>multipart/form-data</code></a> encoding for mixed POST content (binary and character data). The encoding is in more detail described in <a href=\"http://www.faqs.org/rfcs/rfc2388.html\" rel=\"noreferrer\">RFC2388</a>.</p>\n<pre><code>String param = &quot;value&quot;;\nFile textFile = new File(&quot;/path/to/file.txt&quot;);\nFile binaryFile = new File(&quot;/path/to/file.bin&quot;);\nString boundary = Long.toHexString(System.currentTimeMillis()); // Just generate some unique random value.\nString CRLF = &quot;\\r\\n&quot;; // Line separator required by multipart/form-data.\nURLConnection connection = new URL(url).openConnection();\nconnection.setDoOutput(true);\nconnection.setRequestProperty(&quot;Content-Type&quot;, &quot;multipart/form-data; boundary=&quot; + boundary);\n\ntry (\n    OutputStream output = connection.getOutputStream();\n    PrintWriter writer = new PrintWriter(new OutputStreamWriter(output, charset), true);\n) {\n    // Send normal param.\n    writer.append(&quot;--&quot; + boundary).append(CRLF);\n    writer.append(&quot;Content-Disposition: form-data; name=\\&quot;param\\&quot;&quot;).append(CRLF);\n    writer.append(&quot;Content-Type: text/plain; charset=&quot; + charset).append(CRLF);\n    writer.append(CRLF).append(param).append(CRLF).flush();\n\n    // Send text file.\n    writer.append(&quot;--&quot; + boundary).append(CRLF);\n    writer.append(&quot;Content-Disposition: form-data; name=\\&quot;textFile\\&quot;; filename=\\&quot;&quot; + textFile.getName() + &quot;\\&quot;&quot;).append(CRLF);\n    writer.append(&quot;Content-Type: text/plain; charset=&quot; + charset).append(CRLF); // Text file itself must be saved in this charset!\n    writer.append(CRLF).flush();\n    Files.copy(textFile.toPath(), output);\n    output.flush(); // Important before continuing with writer!\n    writer.append(CRLF).flush(); // CRLF is important! It indicates end of boundary.\n\n    // Send binary file.\n    writer.append(&quot;--&quot; + boundary).append(CRLF);\n    writer.append(&quot;Content-Disposition: form-data; name=\\&quot;binaryFile\\&quot;; filename=\\&quot;&quot; + binaryFile.getName() + &quot;\\&quot;&quot;).append(CRLF);\n    writer.append(&quot;Content-Type: &quot; + URLConnection.guessContentTypeFromName(binaryFile.getName())).append(CRLF);\n    writer.append(&quot;Content-Transfer-Encoding: binary&quot;).append(CRLF);\n    writer.append(CRLF).flush();\n    Files.copy(binaryFile.toPath(), output);\n    output.flush(); // Important before continuing with writer!\n    writer.append(CRLF).flush(); // CRLF is important! It indicates end of boundary.\n\n    // End of multipart/form-data.\n    writer.append(&quot;--&quot; + boundary + &quot;--&quot;).append(CRLF).flush();\n}\n</code></pre>\n<p>If the other side is an <a href=\"http://docs.oracle.com/javaee/7/api/javax/servlet/http/HttpServlet.html\" rel=\"noreferrer\"><code>HttpServlet</code></a>, then its <a href=\"http://docs.oracle.com/javaee/7/api/javax/servlet/http/HttpServlet.html#doPost%28javax.servlet.http.HttpServletRequest,%20javax.servlet.http.HttpServletResponse%29\" rel=\"noreferrer\"><code>doPost()</code></a> method will be called and the parts will be available by <a href=\"http://docs.oracle.com/javaee/7/api/javax/servlet/http/HttpServletRequest.html#getPart%28java.lang.String%29\" rel=\"noreferrer\"><code>HttpServletRequest#getPart()</code></a> (note, thus <strong>not</strong> <code>getParameter()</code> and so on!). The <code>getPart()</code> method is however relatively new, it's introduced in Servlet 3.0 (Glassfish 3, Tomcat 7, etc.). Prior to Servlet 3.0, your best choice is using <a href=\"http://commons.apache.org/fileupload\" rel=\"noreferrer\">Apache Commons FileUpload</a> to parse a <code>multipart/form-data</code> request. Also see <a href=\"https://stackoverflow.com/questions/2422468/upload-big-file-to-servlet/2424824#2424824\">this answer</a> for examples of both the FileUpload and the Servelt 3.0 approaches.</p>\n<hr />\n<h3>Dealing with untrusted or misconfigured HTTPS sites</h3>\n<p><sup><em>In case you're developing for Android instead of Java, <strong>be careful</strong>: the workaround below may save your day if you don't have correct certificates deployed during development. But you should not use it for production. These days (April 2021) Google will not allow your app be distributed on Play Store if they detect insecure hostname verifier, see <a href=\"https://support.google.com/faqs/answer/7188426.\" rel=\"noreferrer\">https://support.google.com/faqs/answer/7188426.</a></em></sup></p>\n<p>Sometimes you need to connect an HTTPS URL, perhaps because you're writing a web scraper. In that case, you may likely face a <code>javax.net.ssl.SSLException: Not trusted server certificate</code> on some HTTPS sites who doesn't keep their SSL certificates up to date, or a <code>java.security.cert.CertificateException: No subject alternative DNS name matching [hostname] found</code> or <code>javax.net.ssl.SSLProtocolException: handshake alert: unrecognized_name</code> on some misconfigured HTTPS sites.</p>\n<p>The following one-time-run <code>static</code> initializer in your web scraper class should make <code>HttpsURLConnection</code> more lenient as to those HTTPS sites and thus not throw those exceptions anymore.</p>\n<pre><code>static {\n    TrustManager[] trustAllCertificates = new TrustManager[] {\n        new X509TrustManager() {\n            @Override\n            public X509Certificate[] getAcceptedIssuers() {\n                return null; // Not relevant.\n            }\n            @Override\n            public void checkClientTrusted(X509Certificate[] certs, String authType) {\n                // Do nothing. Just allow them all.\n            }\n            @Override\n            public void checkServerTrusted(X509Certificate[] certs, String authType) {\n                // Do nothing. Just allow them all.\n            }\n        }\n    };\n\n    HostnameVerifier trustAllHostnames = new HostnameVerifier() {\n        @Override\n        public boolean verify(String hostname, SSLSession session) {\n            return true; // Just allow them all.\n        }\n    };\n\n    try {\n        System.setProperty(&quot;jsse.enableSNIExtension&quot;, &quot;false&quot;);\n        SSLContext sc = SSLContext.getInstance(&quot;SSL&quot;);\n        sc.init(null, trustAllCertificates, new SecureRandom());\n        HttpsURLConnection.setDefaultSSLSocketFactory(sc.getSocketFactory());\n        HttpsURLConnection.setDefaultHostnameVerifier(trustAllHostnames);\n    }\n    catch (GeneralSecurityException e) {\n        throw new ExceptionInInitializerError(e);\n    }\n}\n</code></pre>\n<hr />\n<h3>Last words</h3>\n<p>The <a href=\"http://hc.apache.org/httpcomponents-client-ga/\" rel=\"noreferrer\">Apache HttpComponents HttpClient</a> is <em>much</em> more convenient in this all :)</p>\n<ul>\n<li><a href=\"http://hc.apache.org/httpcomponents-client-ga/tutorial/html/\" rel=\"noreferrer\">HttpClient Tutorial</a></li>\n<li><a href=\"http://hc.apache.org/httpcomponents-client-ga/examples.html\" rel=\"noreferrer\">HttpClient Examples</a></li>\n</ul>\n<hr />\n<h3>Parsing and extracting HTML</h3>\n<p>If all you want is parsing and extracting data from HTML, then better use a HTML parser like <a href=\"http://jsoup.org\" rel=\"noreferrer\">Jsoup</a>.</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/3152138/what-are-the-pros-and-cons-of-the-leading-java-html-parsers/3154281#3154281\">What are the pros/cons of leading HTML parsers in Java</a></li>\n<li><a href=\"https://stackoverflow.com/questions/2835505/how-to-scan-a-website-or-page-for-info-and-bring-it-into-my-program/2835555#2835555\">How to scan and extract a webpage in Java</a></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":70553,"reputation":41,"user_id":204476,"display_name":"Paal Thorstensen"},"down_vote_count":0,"up_vote_count":96,"is_accepted":false,"score":96,"last_activity_date":1387239895,"creation_date":1323138044,"answer_id":8394587,"question_id":2793150,"body_markdown":"When working with HTTP it&#39;s almost always more useful to refer to `HttpURLConnection` rather than the base class `URLConnection` (since `URLConnection` is an abstract class when you ask for `URLConnection.openConnection()` on a HTTP URL that&#39;s what you&#39;ll get back anyway).\r\n\r\nThen you can instead of relying on `URLConnection#setDoOutput(true)` to implicitly set the request method to *POST* instead do `httpURLConnection.setRequestMethod(&quot;POST&quot;)` which some might find more natural (and which also allows you to specify other request methods such as *PUT*, *DELETE*, ...).\r\n\r\nIt also provides useful HTTP constants so you can do:\r\n\r\n    int responseCode = httpURLConnection.getResponseCode();\r\n\r\n    if (responseCode == HttpURLConnection.HTTP_OK) {\r\n\r\n\r\n","title":"How to use java.net.URLConnection to fire and handle HTTP requests","body":"<p>When working with HTTP it's almost always more useful to refer to <code>HttpURLConnection</code> rather than the base class <code>URLConnection</code> (since <code>URLConnection</code> is an abstract class when you ask for <code>URLConnection.openConnection()</code> on a HTTP URL that's what you'll get back anyway).</p>\n\n<p>Then you can instead of relying on <code>URLConnection#setDoOutput(true)</code> to implicitly set the request method to <em>POST</em> instead do <code>httpURLConnection.setRequestMethod(\"POST\")</code> which some might find more natural (and which also allows you to specify other request methods such as <em>PUT</em>, <em>DELETE</em>, ...).</p>\n\n<p>It also provides useful HTTP constants so you can do:</p>\n\n<pre><code>int responseCode = httpURLConnection.getResponseCode();\n\nif (responseCode == HttpURLConnection.HTTP_OK) {\n</code></pre>\n"},{"tags":[],"owner":{"account_id":90999,"reputation":2397,"user_id":841272,"display_name":"David Chandler"},"down_vote_count":0,"up_vote_count":54,"is_accepted":false,"score":54,"last_activity_date":1628684934,"creation_date":1339605467,"answer_id":11019442,"question_id":2793150,"body_markdown":"Inspired by this and other questions on Stack&amp;nbsp;Overflow, I&#39;ve created a minimal open source [basic-http-client][1] that embodies most of the techniques found here.\r\n\r\n[google-http-java-client][2] is also a great open source resource.\r\n\r\n  [1]: http://code.google.com/p/basic-http-client/\r\n  [2]: https://code.google.com/p/google-http-java-client/\r\n\r\n\r\n","title":"How to use java.net.URLConnection to fire and handle HTTP requests","body":"<p>Inspired by this and other questions on Stack Overflow, I've created a minimal open source <a href=\"http://code.google.com/p/basic-http-client/\" rel=\"nofollow noreferrer\">basic-http-client</a> that embodies most of the techniques found here.</p>\n<p><a href=\"https://code.google.com/p/google-http-java-client/\" rel=\"nofollow noreferrer\">google-http-java-client</a> is also a great open source resource.</p>\n"},{"tags":[],"owner":{"account_id":3432851,"reputation":1818,"user_id":2876739,"display_name":"RickHigh"},"down_vote_count":1,"up_vote_count":24,"is_accepted":false,"score":23,"last_activity_date":1628685128,"creation_date":1381988117,"answer_id":19418989,"question_id":2793150,"body_markdown":"I was also very inspired by this response.\r\n\r\nI am often on projects where I need to do some HTTP, and I may not want to bring in a lot of third-party dependencies (which bring in others and so on and so on, etc.)\r\n\r\nI started to write my own utilities based on some of this conversation (not any where done):\r\n\r\n    package org.boon.utils;\r\n\r\n    import java.io.IOException;\r\n    import java.io.InputStream;\r\n    import java.net.HttpURLConnection;\r\n    import java.net.URL;\r\n    import java.net.URLConnection;\r\n    import java.util.Map;\r\n\r\n    import static org.boon.utils.IO.read;\r\n\r\n    public class HTTP {\r\n\r\nThen there are just a bunch or static methods.\r\n\r\n    public static String get(\r\n            final String url) {\r\n\r\n        Exceptions.tryIt(() -&gt; {\r\n            URLConnection connection;\r\n            connection = doGet(url, null, null, null);\r\n            return extractResponseString(connection);\r\n        });\r\n        return null;\r\n    }\r\n\r\n    public static String getWithHeaders(\r\n            final String url,\r\n            final Map&lt;String, ? extends Object&gt; headers) {\r\n        URLConnection connection;\r\n        try {\r\n            connection = doGet(url, headers, null, null);\r\n            return extractResponseString(connection);\r\n        } catch (Exception ex) {\r\n            Exceptions.handle(ex);\r\n            return null;\r\n        }\r\n    }\r\n\r\n    public static String getWithContentType(\r\n            final String url,\r\n            final Map&lt;String, ? extends Object&gt; headers,\r\n            String contentType) {\r\n        URLConnection connection;\r\n        try {\r\n            connection = doGet(url, headers, contentType, null);\r\n            return extractResponseString(connection);\r\n        } catch (Exception ex) {\r\n            Exceptions.handle(ex);\r\n            return null;\r\n        }\r\n    }\r\n    public static String getWithCharSet(\r\n            final String url,\r\n            final Map&lt;String, ? extends Object&gt; headers,\r\n            String contentType,\r\n            String charSet) {\r\n        URLConnection connection;\r\n        try {\r\n            connection = doGet(url, headers, contentType, charSet);\r\n            return extractResponseString(connection);\r\n        } catch (Exception ex) {\r\n            Exceptions.handle(ex);\r\n            return null;\r\n        }\r\n    }\r\n\r\nThen post...\r\n\r\n    public static String postBody(\r\n            final String url,\r\n            final String body) {\r\n        URLConnection connection;\r\n        try {\r\n            connection = doPost(url, null, &quot;text/plain&quot;, null, body);\r\n            return extractResponseString(connection);\r\n        } catch (Exception ex) {\r\n            Exceptions.handle(ex);\r\n            return null;\r\n        }\r\n    }\r\n\r\n    public static String postBodyWithHeaders(\r\n            final String url,\r\n            final Map&lt;String, ? extends Object&gt; headers,\r\n            final String body) {\r\n        URLConnection connection;\r\n        try {\r\n            connection = doPost(url, headers, &quot;text/plain&quot;, null, body);\r\n            return extractResponseString(connection);\r\n        } catch (Exception ex) {\r\n            Exceptions.handle(ex);\r\n            return null;\r\n        }\r\n    }\r\n\r\n\r\n    public static String postBodyWithContentType(\r\n            final String url,\r\n            final Map&lt;String, ? extends Object&gt; headers,\r\n            final String contentType,\r\n            final String body) {\r\n\r\n        URLConnection connection;\r\n        try {\r\n            connection = doPost(url, headers, contentType, null, body);\r\n\r\n            return extractResponseString(connection);\r\n\r\n        } catch (Exception ex) {\r\n            Exceptions.handle(ex);\r\n            return null;\r\n        }\r\n\r\n    }\r\n\r\n\r\n    public static String postBodyWithCharset(\r\n            final String url,\r\n            final Map&lt;String, ? extends Object&gt; headers,\r\n            final String contentType,\r\n            final String charSet,\r\n            final String body) {\r\n\r\n        URLConnection connection;\r\n        try {\r\n            connection = doPost(url, headers, contentType, charSet, body);\r\n\r\n            return extractResponseString(connection);\r\n\r\n        } catch (Exception ex) {\r\n            Exceptions.handle(ex);\r\n            return null;\r\n        }\r\n    }\r\n\r\n    private static URLConnection doPost(String url, Map&lt;String, ? extends Object&gt; headers,\r\n                                        String contentType, String charset, String body\r\n                                        ) throws IOException {\r\n        URLConnection connection;/* Handle output. */\r\n        connection = new URL(url).openConnection();\r\n        connection.setDoOutput(true);\r\n        manageContentTypeHeaders(contentType, charset, connection);\r\n\r\n        manageHeaders(headers, connection);\r\n\r\n        IO.write(connection.getOutputStream(), body, IO.CHARSET);\r\n        return connection;\r\n    }\r\n\r\n    private static void manageHeaders(Map&lt;String, ? extends Object&gt; headers, URLConnection connection) {\r\n        if (headers != null) {\r\n            for (Map.Entry&lt;String, ? extends Object&gt; entry : headers.entrySet()) {\r\n                connection.setRequestProperty(entry.getKey(), entry.getValue().toString());\r\n            }\r\n        }\r\n    }\r\n\r\n    private static void manageContentTypeHeaders(String contentType, String charset, URLConnection connection) {\r\n        connection.setRequestProperty(&quot;Accept-Charset&quot;, charset == null ? IO.CHARSET : charset);\r\n        if (contentType!=null &amp;&amp; !contentType.isEmpty()) {\r\n            connection.setRequestProperty(&quot;Content-Type&quot;, contentType);\r\n        }\r\n    }\r\n\r\n    private static URLConnection doGet(String url, Map&lt;String, ? extends Object&gt; headers,\r\n                                        String contentType, String charset) throws IOException {\r\n        URLConnection connection;/* Handle output. */\r\n        connection = new URL(url).openConnection();\r\n        manageContentTypeHeaders(contentType, charset, connection);\r\n\r\n        manageHeaders(headers, connection);\r\n\r\n        return connection;\r\n    }\r\n\r\n    private static String extractResponseString(URLConnection connection) throws IOException {\r\n    /* Handle input. */\r\n        HttpURLConnection http = (HttpURLConnection)connection;\r\n        int status = http.getResponseCode();\r\n        String charset = getCharset(connection.getHeaderField(&quot;Content-Type&quot;));\r\n\r\n        if (status==200) {\r\n            return readResponseBody(http, charset);\r\n        } else {\r\n            return readErrorResponseBody(http, status, charset);\r\n        }\r\n    }\r\n\r\n    private static String readErrorResponseBody(HttpURLConnection http, int status, String charset) {\r\n        InputStream errorStream = http.getErrorStream();\r\n        if ( errorStream!=null ) {\r\n            String error = charset== null ? read( errorStream ) :\r\n                read( errorStream, charset );\r\n            throw new RuntimeException(&quot;STATUS CODE =&quot; + status + &quot;\\n\\n&quot; + error);\r\n        } else {\r\n            throw new RuntimeException(&quot;STATUS CODE =&quot; + status);\r\n        }\r\n    }\r\n\r\n    private static String readResponseBody(HttpURLConnection http, String charset) throws IOException {\r\n        if (charset != null) {\r\n            return read(http.getInputStream(), charset);\r\n        } else {\r\n            return read(http.getInputStream());\r\n        }\r\n    }\r\n\r\n    private static String getCharset(String contentType) {\r\n        if (contentType==null)  {\r\n            return null;\r\n        }\r\n        String charset = null;\r\n        for (String param : contentType.replace(&quot; &quot;, &quot;&quot;).split(&quot;;&quot;)) {\r\n            if (param.startsWith(&quot;charset=&quot;)) {\r\n                charset = param.split(&quot;=&quot;, 2)[1];\r\n                break;\r\n            }\r\n        }\r\n        charset = charset == null ? IO.CHARSET : charset;\r\n\r\n        return charset;\r\n    }\r\n\r\nWell, you get the idea....\r\n\r\nHere are the tests:\r\n\r\n    static class MyHandler implements HttpHandler {\r\n        public void handle(HttpExchange t) throws IOException {\r\n\r\n            InputStream requestBody = t.getRequestBody();\r\n            String body = IO.read(requestBody);\r\n            Headers requestHeaders = t.getRequestHeaders();\r\n            body = body + &quot;\\n&quot; + copy(requestHeaders).toString();\r\n            t.sendResponseHeaders(200, body.length());\r\n            OutputStream os = t.getResponseBody();\r\n            os.write(body.getBytes());\r\n            os.close();\r\n        }\r\n    }\r\n\r\n\r\n    @Test\r\n    public void testHappy() throws Exception {\r\n\r\n        HttpServer server = HttpServer.create(new InetSocketAddress(9212), 0);\r\n        server.createContext(&quot;/test&quot;, new MyHandler());\r\n        server.setExecutor(null); // creates a default executor\r\n        server.start();\r\n\r\n        Thread.sleep(10);\r\n\r\n        Map&lt;String,String&gt; headers = map(&quot;foo&quot;, &quot;bar&quot;, &quot;fun&quot;, &quot;sun&quot;);\r\n\r\n        String response = HTTP.postBodyWithContentType(&quot;http://localhost:9212/test&quot;, headers, &quot;text/plain&quot;, &quot;hi mom&quot;);\r\n\r\n        System.out.println(response);\r\n\r\n        assertTrue(response.contains(&quot;hi mom&quot;));\r\n        assertTrue(response.contains(&quot;Fun=[sun], Foo=[bar]&quot;));\r\n\r\n        response = HTTP.postBodyWithCharset(&quot;http://localhost:9212/test&quot;, headers, &quot;text/plain&quot;, &quot;UTF-8&quot;, &quot;hi mom&quot;);\r\n\r\n        System.out.println(response);\r\n\r\n        assertTrue(response.contains(&quot;hi mom&quot;));\r\n        assertTrue(response.contains(&quot;Fun=[sun], Foo=[bar]&quot;));\r\n\r\n        response = HTTP.postBodyWithHeaders(&quot;http://localhost:9212/test&quot;, headers, &quot;hi mom&quot;);\r\n\r\n        System.out.println(response);\r\n\r\n        assertTrue(response.contains(&quot;hi mom&quot;));\r\n        assertTrue(response.contains(&quot;Fun=[sun], Foo=[bar]&quot;));\r\n\r\n        response = HTTP.get(&quot;http://localhost:9212/test&quot;);\r\n\r\n        System.out.println(response);\r\n\r\n        response = HTTP.getWithHeaders(&quot;http://localhost:9212/test&quot;, headers);\r\n\r\n        System.out.println(response);\r\n\r\n        assertTrue(response.contains(&quot;Fun=[sun], Foo=[bar]&quot;));\r\n\r\n        response = HTTP.getWithContentType(&quot;http://localhost:9212/test&quot;, headers, &quot;text/plain&quot;);\r\n\r\n        System.out.println(response);\r\n\r\n        assertTrue(response.contains(&quot;Fun=[sun], Foo=[bar]&quot;));\r\n\r\n        response = HTTP.getWithCharSet(&quot;http://localhost:9212/test&quot;, headers, &quot;text/plain&quot;, &quot;UTF-8&quot;);\r\n\r\n        System.out.println(response);\r\n\r\n        assertTrue(response.contains(&quot;Fun=[sun], Foo=[bar]&quot;));\r\n\r\n        Thread.sleep(10);\r\n\r\n        server.stop(0);\r\n    }\r\n\r\n    @Test\r\n    public void testPostBody() throws Exception {\r\n\r\n        HttpServer server = HttpServer.create(new InetSocketAddress(9220), 0);\r\n        server.createContext(&quot;/test&quot;, new MyHandler());\r\n        server.setExecutor(null); // creates a default executor\r\n        server.start();\r\n\r\n        Thread.sleep(10);\r\n\r\n        Map&lt;String,String&gt; headers = map(&quot;foo&quot;, &quot;bar&quot;, &quot;fun&quot;, &quot;sun&quot;);\r\n\r\n        String response = HTTP.postBody(&quot;http://localhost:9220/test&quot;, &quot;hi mom&quot;);\r\n\r\n        assertTrue(response.contains(&quot;hi mom&quot;));\r\n\r\n        Thread.sleep(10);\r\n\r\n        server.stop(0);\r\n    }\r\n\r\n    @Test(expected = RuntimeException.class)\r\n    public void testSad() throws Exception {\r\n\r\n        HttpServer server = HttpServer.create(new InetSocketAddress(9213), 0);\r\n        server.createContext(&quot;/test&quot;, new MyHandler());\r\n        server.setExecutor(null); // creates a default executor\r\n        server.start();\r\n\r\n        Thread.sleep(10);\r\n\r\n        Map&lt;String,String&gt; headers = map(&quot;foo&quot;, &quot;bar&quot;, &quot;fun&quot;, &quot;sun&quot;);\r\n\r\n        String response = HTTP.postBodyWithContentType(&quot;http://localhost:9213/foo&quot;, headers, &quot;text/plain&quot;, &quot;hi mom&quot;);\r\n\r\n        System.out.println(response);\r\n\r\n        assertTrue(response.contains(&quot;hi mom&quot;));\r\n        assertTrue(response.contains(&quot;Fun=[sun], Foo=[bar]&quot;));\r\n\r\n        Thread.sleep(10);\r\n\r\n        server.stop(0);\r\n    }\r\n\r\nYou can find the rest here:\r\n\r\nhttps://github.com/RichardHightower/boon\r\n\r\nMy goal is to provide the common things one would want to do in a bit more easier way then....\r\n","title":"How to use java.net.URLConnection to fire and handle HTTP requests","body":"<p>I was also very inspired by this response.</p>\n<p>I am often on projects where I need to do some HTTP, and I may not want to bring in a lot of third-party dependencies (which bring in others and so on and so on, etc.)</p>\n<p>I started to write my own utilities based on some of this conversation (not any where done):</p>\n<pre><code>package org.boon.utils;\n\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.net.HttpURLConnection;\nimport java.net.URL;\nimport java.net.URLConnection;\nimport java.util.Map;\n\nimport static org.boon.utils.IO.read;\n\npublic class HTTP {\n</code></pre>\n<p>Then there are just a bunch or static methods.</p>\n<pre><code>public static String get(\n        final String url) {\n\n    Exceptions.tryIt(() -&gt; {\n        URLConnection connection;\n        connection = doGet(url, null, null, null);\n        return extractResponseString(connection);\n    });\n    return null;\n}\n\npublic static String getWithHeaders(\n        final String url,\n        final Map&lt;String, ? extends Object&gt; headers) {\n    URLConnection connection;\n    try {\n        connection = doGet(url, headers, null, null);\n        return extractResponseString(connection);\n    } catch (Exception ex) {\n        Exceptions.handle(ex);\n        return null;\n    }\n}\n\npublic static String getWithContentType(\n        final String url,\n        final Map&lt;String, ? extends Object&gt; headers,\n        String contentType) {\n    URLConnection connection;\n    try {\n        connection = doGet(url, headers, contentType, null);\n        return extractResponseString(connection);\n    } catch (Exception ex) {\n        Exceptions.handle(ex);\n        return null;\n    }\n}\npublic static String getWithCharSet(\n        final String url,\n        final Map&lt;String, ? extends Object&gt; headers,\n        String contentType,\n        String charSet) {\n    URLConnection connection;\n    try {\n        connection = doGet(url, headers, contentType, charSet);\n        return extractResponseString(connection);\n    } catch (Exception ex) {\n        Exceptions.handle(ex);\n        return null;\n    }\n}\n</code></pre>\n<p>Then post...</p>\n<pre><code>public static String postBody(\n        final String url,\n        final String body) {\n    URLConnection connection;\n    try {\n        connection = doPost(url, null, &quot;text/plain&quot;, null, body);\n        return extractResponseString(connection);\n    } catch (Exception ex) {\n        Exceptions.handle(ex);\n        return null;\n    }\n}\n\npublic static String postBodyWithHeaders(\n        final String url,\n        final Map&lt;String, ? extends Object&gt; headers,\n        final String body) {\n    URLConnection connection;\n    try {\n        connection = doPost(url, headers, &quot;text/plain&quot;, null, body);\n        return extractResponseString(connection);\n    } catch (Exception ex) {\n        Exceptions.handle(ex);\n        return null;\n    }\n}\n\n\npublic static String postBodyWithContentType(\n        final String url,\n        final Map&lt;String, ? extends Object&gt; headers,\n        final String contentType,\n        final String body) {\n\n    URLConnection connection;\n    try {\n        connection = doPost(url, headers, contentType, null, body);\n\n        return extractResponseString(connection);\n\n    } catch (Exception ex) {\n        Exceptions.handle(ex);\n        return null;\n    }\n\n}\n\n\npublic static String postBodyWithCharset(\n        final String url,\n        final Map&lt;String, ? extends Object&gt; headers,\n        final String contentType,\n        final String charSet,\n        final String body) {\n\n    URLConnection connection;\n    try {\n        connection = doPost(url, headers, contentType, charSet, body);\n\n        return extractResponseString(connection);\n\n    } catch (Exception ex) {\n        Exceptions.handle(ex);\n        return null;\n    }\n}\n\nprivate static URLConnection doPost(String url, Map&lt;String, ? extends Object&gt; headers,\n                                    String contentType, String charset, String body\n                                    ) throws IOException {\n    URLConnection connection;/* Handle output. */\n    connection = new URL(url).openConnection();\n    connection.setDoOutput(true);\n    manageContentTypeHeaders(contentType, charset, connection);\n\n    manageHeaders(headers, connection);\n\n    IO.write(connection.getOutputStream(), body, IO.CHARSET);\n    return connection;\n}\n\nprivate static void manageHeaders(Map&lt;String, ? extends Object&gt; headers, URLConnection connection) {\n    if (headers != null) {\n        for (Map.Entry&lt;String, ? extends Object&gt; entry : headers.entrySet()) {\n            connection.setRequestProperty(entry.getKey(), entry.getValue().toString());\n        }\n    }\n}\n\nprivate static void manageContentTypeHeaders(String contentType, String charset, URLConnection connection) {\n    connection.setRequestProperty(&quot;Accept-Charset&quot;, charset == null ? IO.CHARSET : charset);\n    if (contentType!=null &amp;&amp; !contentType.isEmpty()) {\n        connection.setRequestProperty(&quot;Content-Type&quot;, contentType);\n    }\n}\n\nprivate static URLConnection doGet(String url, Map&lt;String, ? extends Object&gt; headers,\n                                    String contentType, String charset) throws IOException {\n    URLConnection connection;/* Handle output. */\n    connection = new URL(url).openConnection();\n    manageContentTypeHeaders(contentType, charset, connection);\n\n    manageHeaders(headers, connection);\n\n    return connection;\n}\n\nprivate static String extractResponseString(URLConnection connection) throws IOException {\n/* Handle input. */\n    HttpURLConnection http = (HttpURLConnection)connection;\n    int status = http.getResponseCode();\n    String charset = getCharset(connection.getHeaderField(&quot;Content-Type&quot;));\n\n    if (status==200) {\n        return readResponseBody(http, charset);\n    } else {\n        return readErrorResponseBody(http, status, charset);\n    }\n}\n\nprivate static String readErrorResponseBody(HttpURLConnection http, int status, String charset) {\n    InputStream errorStream = http.getErrorStream();\n    if ( errorStream!=null ) {\n        String error = charset== null ? read( errorStream ) :\n            read( errorStream, charset );\n        throw new RuntimeException(&quot;STATUS CODE =&quot; + status + &quot;\\n\\n&quot; + error);\n    } else {\n        throw new RuntimeException(&quot;STATUS CODE =&quot; + status);\n    }\n}\n\nprivate static String readResponseBody(HttpURLConnection http, String charset) throws IOException {\n    if (charset != null) {\n        return read(http.getInputStream(), charset);\n    } else {\n        return read(http.getInputStream());\n    }\n}\n\nprivate static String getCharset(String contentType) {\n    if (contentType==null)  {\n        return null;\n    }\n    String charset = null;\n    for (String param : contentType.replace(&quot; &quot;, &quot;&quot;).split(&quot;;&quot;)) {\n        if (param.startsWith(&quot;charset=&quot;)) {\n            charset = param.split(&quot;=&quot;, 2)[1];\n            break;\n        }\n    }\n    charset = charset == null ? IO.CHARSET : charset;\n\n    return charset;\n}\n</code></pre>\n<p>Well, you get the idea....</p>\n<p>Here are the tests:</p>\n<pre><code>static class MyHandler implements HttpHandler {\n    public void handle(HttpExchange t) throws IOException {\n\n        InputStream requestBody = t.getRequestBody();\n        String body = IO.read(requestBody);\n        Headers requestHeaders = t.getRequestHeaders();\n        body = body + &quot;\\n&quot; + copy(requestHeaders).toString();\n        t.sendResponseHeaders(200, body.length());\n        OutputStream os = t.getResponseBody();\n        os.write(body.getBytes());\n        os.close();\n    }\n}\n\n\n@Test\npublic void testHappy() throws Exception {\n\n    HttpServer server = HttpServer.create(new InetSocketAddress(9212), 0);\n    server.createContext(&quot;/test&quot;, new MyHandler());\n    server.setExecutor(null); // creates a default executor\n    server.start();\n\n    Thread.sleep(10);\n\n    Map&lt;String,String&gt; headers = map(&quot;foo&quot;, &quot;bar&quot;, &quot;fun&quot;, &quot;sun&quot;);\n\n    String response = HTTP.postBodyWithContentType(&quot;http://localhost:9212/test&quot;, headers, &quot;text/plain&quot;, &quot;hi mom&quot;);\n\n    System.out.println(response);\n\n    assertTrue(response.contains(&quot;hi mom&quot;));\n    assertTrue(response.contains(&quot;Fun=[sun], Foo=[bar]&quot;));\n\n    response = HTTP.postBodyWithCharset(&quot;http://localhost:9212/test&quot;, headers, &quot;text/plain&quot;, &quot;UTF-8&quot;, &quot;hi mom&quot;);\n\n    System.out.println(response);\n\n    assertTrue(response.contains(&quot;hi mom&quot;));\n    assertTrue(response.contains(&quot;Fun=[sun], Foo=[bar]&quot;));\n\n    response = HTTP.postBodyWithHeaders(&quot;http://localhost:9212/test&quot;, headers, &quot;hi mom&quot;);\n\n    System.out.println(response);\n\n    assertTrue(response.contains(&quot;hi mom&quot;));\n    assertTrue(response.contains(&quot;Fun=[sun], Foo=[bar]&quot;));\n\n    response = HTTP.get(&quot;http://localhost:9212/test&quot;);\n\n    System.out.println(response);\n\n    response = HTTP.getWithHeaders(&quot;http://localhost:9212/test&quot;, headers);\n\n    System.out.println(response);\n\n    assertTrue(response.contains(&quot;Fun=[sun], Foo=[bar]&quot;));\n\n    response = HTTP.getWithContentType(&quot;http://localhost:9212/test&quot;, headers, &quot;text/plain&quot;);\n\n    System.out.println(response);\n\n    assertTrue(response.contains(&quot;Fun=[sun], Foo=[bar]&quot;));\n\n    response = HTTP.getWithCharSet(&quot;http://localhost:9212/test&quot;, headers, &quot;text/plain&quot;, &quot;UTF-8&quot;);\n\n    System.out.println(response);\n\n    assertTrue(response.contains(&quot;Fun=[sun], Foo=[bar]&quot;));\n\n    Thread.sleep(10);\n\n    server.stop(0);\n}\n\n@Test\npublic void testPostBody() throws Exception {\n\n    HttpServer server = HttpServer.create(new InetSocketAddress(9220), 0);\n    server.createContext(&quot;/test&quot;, new MyHandler());\n    server.setExecutor(null); // creates a default executor\n    server.start();\n\n    Thread.sleep(10);\n\n    Map&lt;String,String&gt; headers = map(&quot;foo&quot;, &quot;bar&quot;, &quot;fun&quot;, &quot;sun&quot;);\n\n    String response = HTTP.postBody(&quot;http://localhost:9220/test&quot;, &quot;hi mom&quot;);\n\n    assertTrue(response.contains(&quot;hi mom&quot;));\n\n    Thread.sleep(10);\n\n    server.stop(0);\n}\n\n@Test(expected = RuntimeException.class)\npublic void testSad() throws Exception {\n\n    HttpServer server = HttpServer.create(new InetSocketAddress(9213), 0);\n    server.createContext(&quot;/test&quot;, new MyHandler());\n    server.setExecutor(null); // creates a default executor\n    server.start();\n\n    Thread.sleep(10);\n\n    Map&lt;String,String&gt; headers = map(&quot;foo&quot;, &quot;bar&quot;, &quot;fun&quot;, &quot;sun&quot;);\n\n    String response = HTTP.postBodyWithContentType(&quot;http://localhost:9213/foo&quot;, headers, &quot;text/plain&quot;, &quot;hi mom&quot;);\n\n    System.out.println(response);\n\n    assertTrue(response.contains(&quot;hi mom&quot;));\n    assertTrue(response.contains(&quot;Fun=[sun], Foo=[bar]&quot;));\n\n    Thread.sleep(10);\n\n    server.stop(0);\n}\n</code></pre>\n<p>You can find the rest here:</p>\n<p><a href=\"https://github.com/RichardHightower/boon\" rel=\"nofollow noreferrer\">https://github.com/RichardHightower/boon</a></p>\n<p>My goal is to provide the common things one would want to do in a bit more easier way then....</p>\n"},{"tags":[],"owner":{"account_id":63162,"reputation":102381,"user_id":187141,"accept_rate":82,"display_name":"yegor256"},"down_vote_count":2,"up_vote_count":17,"is_accepted":false,"score":15,"last_activity_date":1397242456,"creation_date":1385548312,"answer_id":20239958,"question_id":2793150,"body_markdown":"You can also use [`JdkRequest`](http://http.jcabi.com/apidocs-1.0/com/jcabi/http/request/JdkRequest.html) from [jcabi-http](http://http.jcabi.com) (I&#39;m a developer), which does all this work for you, decorating HttpURLConnection, firing HTTP requests and parsing responses, for example:\r\n\r\n    String html = new JdkRequest(&quot;http://www.google.com&quot;).fetch().body();\r\n\r\nCheck this blog post for more info: http://www.yegor256.com/2014/04/11/jcabi-http-intro.html","title":"How to use java.net.URLConnection to fire and handle HTTP requests","body":"<p>You can also use <a href=\"http://http.jcabi.com/apidocs-1.0/com/jcabi/http/request/JdkRequest.html\"><code>JdkRequest</code></a> from <a href=\"http://http.jcabi.com\">jcabi-http</a> (I'm a developer), which does all this work for you, decorating HttpURLConnection, firing HTTP requests and parsing responses, for example:</p>\n\n<pre><code>String html = new JdkRequest(\"http://www.google.com\").fetch().body();\n</code></pre>\n\n<p>Check this blog post for more info: <a href=\"http://www.yegor256.com/2014/04/11/jcabi-http-intro.html\">http://www.yegor256.com/2014/04/11/jcabi-http-intro.html</a></p>\n"},{"tags":[],"owner":{"account_id":370416,"reputation":7024,"user_id":718333,"accept_rate":73,"display_name":"fernandohur"},"down_vote_count":0,"up_vote_count":28,"is_accepted":false,"score":28,"last_activity_date":1416836631,"creation_date":1414187845,"answer_id":26556900,"question_id":2793150,"body_markdown":"I suggest you take a look at the code on [kevinsawicki/http-request](https://github.com/kevinsawicki/http-request), its basically a wrapper on top of `HttpUrlConnection` it provides a much simpler API in case you just want to make the requests right now or you can take a look at the sources (it&#39;s not too big) to take a look at how connections are handled.\r\n\r\nExample: Make a `GET` request with content type `application/json` and some query parameters:\r\n\r\n    // GET http://google.com?q=baseball%20gloves&amp;size=100\r\n    String response = HttpRequest.get(&quot;http://google.com&quot;, true, &quot;q&quot;, &quot;baseball gloves&quot;, &quot;size&quot;, 100)\r\n            .accept(&quot;application/json&quot;)\r\n            .body();\r\n    System.out.println(&quot;Response was: &quot; + response);","title":"How to use java.net.URLConnection to fire and handle HTTP requests","body":"<p>I suggest you take a look at the code on <a href=\"https://github.com/kevinsawicki/http-request\">kevinsawicki/http-request</a>, its basically a wrapper on top of <code>HttpUrlConnection</code> it provides a much simpler API in case you just want to make the requests right now or you can take a look at the sources (it's not too big) to take a look at how connections are handled.</p>\n\n<p>Example: Make a <code>GET</code> request with content type <code>application/json</code> and some query parameters:</p>\n\n<pre><code>// GET http://google.com?q=baseball%20gloves&amp;size=100\nString response = HttpRequest.get(\"http://google.com\", true, \"q\", \"baseball gloves\", \"size\", 100)\n        .accept(\"application/json\")\n        .body();\nSystem.out.println(\"Response was: \" + response);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2588248,"reputation":143,"user_id":3201107,"display_name":"Utkarsh Bhatt"},"down_vote_count":2,"up_vote_count":30,"is_accepted":false,"score":28,"last_activity_date":1628685176,"creation_date":1418907526,"answer_id":27547168,"question_id":2793150,"body_markdown":"There are two options you can go with HTTP URL Hits : GET / POST\r\n\r\nGET Request:\r\n\r\n    HttpURLConnection.setFollowRedirects(true); // Defaults to true\r\n\r\n    String url = &quot;https://name_of_the_url&quot;;\r\n    URL request_url = new URL(url);\r\n    HttpURLConnection http_conn = (HttpURLConnection)request_url.openConnection();\r\n    http_conn.setConnectTimeout(100000);\r\n    http_conn.setReadTimeout(100000);\r\n    http_conn.setInstanceFollowRedirects(true);\r\n    System.out.println(String.valueOf(http_conn.getResponseCode()));\r\n\r\nPOST request:\r\n\r\n    HttpURLConnection.setFollowRedirects(true); // Defaults to true\r\n\r\n    String url = &quot;https://name_of_the_url&quot;\r\n    URL request_url = new URL(url);\r\n    HttpURLConnection http_conn = (HttpURLConnection)request_url.openConnection();\r\n    http_conn.setConnectTimeout(100000);\r\n    http_conn.setReadTimeout(100000);\r\n    http_conn.setInstanceFollowRedirects(true);\r\n    http_conn.setDoOutput(true);\r\n    PrintWriter out = new PrintWriter(http_conn.getOutputStream());\r\n    if (urlparameter != null) {\r\n       out.println(urlparameter);\r\n    }\r\n    out.close();\r\n    out = null;\r\n    System.out.println(String.valueOf(http_conn.getResponseCode()));\r\n\r\n\r\n\r\n","title":"How to use java.net.URLConnection to fire and handle HTTP requests","body":"<p>There are two options you can go with HTTP URL Hits : GET / POST</p>\n<p>GET Request:</p>\n<pre><code>HttpURLConnection.setFollowRedirects(true); // Defaults to true\n\nString url = &quot;https://name_of_the_url&quot;;\nURL request_url = new URL(url);\nHttpURLConnection http_conn = (HttpURLConnection)request_url.openConnection();\nhttp_conn.setConnectTimeout(100000);\nhttp_conn.setReadTimeout(100000);\nhttp_conn.setInstanceFollowRedirects(true);\nSystem.out.println(String.valueOf(http_conn.getResponseCode()));\n</code></pre>\n<p>POST request:</p>\n<pre><code>HttpURLConnection.setFollowRedirects(true); // Defaults to true\n\nString url = &quot;https://name_of_the_url&quot;\nURL request_url = new URL(url);\nHttpURLConnection http_conn = (HttpURLConnection)request_url.openConnection();\nhttp_conn.setConnectTimeout(100000);\nhttp_conn.setReadTimeout(100000);\nhttp_conn.setInstanceFollowRedirects(true);\nhttp_conn.setDoOutput(true);\nPrintWriter out = new PrintWriter(http_conn.getOutputStream());\nif (urlparameter != null) {\n   out.println(urlparameter);\n}\nout.close();\nout = null;\nSystem.out.println(String.valueOf(http_conn.getResponseCode()));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6453072,"reputation":37996,"user_id":4999394,"accept_rate":98,"display_name":"Ravindra babu"},"down_vote_count":0,"up_vote_count":19,"is_accepted":false,"score":19,"last_activity_date":1628685221,"creation_date":1443182865,"answer_id":32781880,"question_id":2793150,"body_markdown":"Initially I was misled by [this article][1] which favours `HttpClient`. \r\n\r\nLater I have realized that `HttpURLConnection` is going to stay from [this article][2].\r\n\r\n**As per the Google blog**:\r\n\r\n&gt; Apache HTTP client has fewer bugs on Eclair and Froyo. It is the best choice for these releases. For Gingerbread , HttpURLConnection is the best choice. Its simple API and small size makes it great fit for Android.\r\n&gt;\r\n&gt; Transparent compression and response caching reduce network use, improve speed and save battery. New applications should use HttpURLConnection; it is where we will be spending our energy going forward.\r\n\r\nAfter reading [this article][3] and some other stack over flow questions, I am convinced that `HttpURLConnection` is going to stay for longer durations.\r\n\r\nSome of the SE questions favouring `HttpURLConnections`:\r\n\r\n*https://stackoverflow.com/questions/4330392/on-android-make-a-post-request-with-url-encoded-form-data-without-using-urlenco/4794289#4794289*\r\n\r\n*https://stackoverflow.com/questions/4221420/httppost-works-in-java-project-not-in-android*\r\n\r\n  [1]: http://www.innovation.ch/java/HTTPClient/urlcon_vs_httpclient.html\r\n  [2]: https://github.com/loopj/android-async-http/issues/75\r\n  [3]: http://www.rapidvaluesolutions.com/tech_blog/introduction-to-httpurlconnection-http-client-for-performing-efficient-network-operations/\r\n\r\n","title":"How to use java.net.URLConnection to fire and handle HTTP requests","body":"<p>Initially I was misled by <a href=\"http://www.innovation.ch/java/HTTPClient/urlcon_vs_httpclient.html\" rel=\"nofollow noreferrer\">this article</a> which favours <code>HttpClient</code>.</p>\n<p>Later I have realized that <code>HttpURLConnection</code> is going to stay from <a href=\"https://github.com/loopj/android-async-http/issues/75\" rel=\"nofollow noreferrer\">this article</a>.</p>\n<p><strong>As per the Google blog</strong>:</p>\n<blockquote>\n<p>Apache HTTP client has fewer bugs on Eclair and Froyo. It is the best choice for these releases. For Gingerbread , HttpURLConnection is the best choice. Its simple API and small size makes it great fit for Android.</p>\n<p>Transparent compression and response caching reduce network use, improve speed and save battery. New applications should use HttpURLConnection; it is where we will be spending our energy going forward.</p>\n</blockquote>\n<p>After reading <a href=\"http://www.rapidvaluesolutions.com/tech_blog/introduction-to-httpurlconnection-http-client-for-performing-efficient-network-operations/\" rel=\"nofollow noreferrer\">this article</a> and some other stack over flow questions, I am convinced that <code>HttpURLConnection</code> is going to stay for longer durations.</p>\n<p>Some of the SE questions favouring <code>HttpURLConnections</code>:</p>\n<p><em><a href=\"https://stackoverflow.com/questions/4330392/on-android-make-a-post-request-with-url-encoded-form-data-without-using-urlenco/4794289#4794289\">On Android, make a POST request with URL Encoded Form data without using UrlEncodedFormEntity</a></em></p>\n<p><em><a href=\"https://stackoverflow.com/questions/4221420/httppost-works-in-java-project-not-in-android\">HttpPost works in Java project, but not on Android</a></em></p>\n"},{"tags":[],"owner":{"account_id":1477692,"reputation":46661,"user_id":1393484,"accept_rate":100,"display_name":"Ali Dehghani"},"down_vote_count":1,"up_vote_count":18,"is_accepted":false,"score":17,"last_activity_date":1452859593,"creation_date":1452859593,"answer_id":34810741,"question_id":2793150,"body_markdown":"There is also [OkHttp][1], which is an HTTP client that’s efficient by default:\r\n\r\n&gt;  - HTTP/2 support allows all requests to the same host to share a    socket.\r\n&gt;  - Connection pooling reduces request latency (if HTTP/2 isn’t    available).\r\n&gt;  - Transparent GZIP shrinks download sizes.\r\n&gt;  - Response caching avoids the network completely for repeat requests.\r\n\r\nFirst create an instance of `OkHttpClient`:\r\n\r\n    OkHttpClient client = new OkHttpClient();\r\nThen, prepare your `GET` request:\r\n\r\n    Request request = new Request.Builder()\r\n          .url(url)\r\n          .build();\r\nfinally, use `OkHttpClient` to send prepared `Request`:\r\n\r\n    Response response = client.newCall(request).execute();\r\nFor more details, you can consult the [OkHttp&#39;s documentation](https://github.com/square/okhttp/wiki)\r\n\r\n\r\n\r\n\r\n  [1]: http://square.github.io/okhttp/","title":"How to use java.net.URLConnection to fire and handle HTTP requests","body":"<p>There is also <a href=\"http://square.github.io/okhttp/\">OkHttp</a>, which is an HTTP client that’s efficient by default:</p>\n\n<blockquote>\n  <ul>\n  <li>HTTP/2 support allows all requests to the same host to share a    socket.</li>\n  <li>Connection pooling reduces request latency (if HTTP/2 isn’t    available).</li>\n  <li>Transparent GZIP shrinks download sizes.</li>\n  <li>Response caching avoids the network completely for repeat requests.</li>\n  </ul>\n</blockquote>\n\n<p>First create an instance of <code>OkHttpClient</code>:</p>\n\n<pre><code>OkHttpClient client = new OkHttpClient();\n</code></pre>\n\n<p>Then, prepare your <code>GET</code> request:</p>\n\n<pre><code>Request request = new Request.Builder()\n      .url(url)\n      .build();\n</code></pre>\n\n<p>finally, use <code>OkHttpClient</code> to send prepared <code>Request</code>:</p>\n\n<pre><code>Response response = client.newCall(request).execute();\n</code></pre>\n\n<p>For more details, you can consult the <a href=\"https://github.com/square/okhttp/wiki\">OkHttp's documentation</a></p>\n"},{"tags":[],"owner":{"account_id":7034187,"reputation":381,"user_id":5388882,"accept_rate":100,"display_name":"Nison Cheruvathur"},"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1628686076,"creation_date":1459921389,"answer_id":36442479,"question_id":2793150,"body_markdown":"If you are using HTTP [GET][1], please remove this line:\r\n\r\n    urlConnection.setDoOutput(true);\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol#Request_methods\r\n","title":"How to use java.net.URLConnection to fire and handle HTTP requests","body":"<p>If you are using HTTP <a href=\"https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol#Request_methods\" rel=\"nofollow noreferrer\">GET</a>, please remove this line:</p>\n<pre><code>urlConnection.setDoOutput(true);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1477692,"reputation":46661,"user_id":1393484,"accept_rate":100,"display_name":"Ali Dehghani"},"down_vote_count":0,"up_vote_count":28,"is_accepted":false,"score":28,"last_activity_date":1512054999,"creation_date":1461917256,"answer_id":36932953,"question_id":2793150,"body_markdown":"## Update\r\n\r\n&gt; The new HTTP Client shipped with Java 9 but as part of an\r\n&gt; Incubator module named `jdk.incubator.httpclient`. Incubator modules are\r\n&gt; a means of putting non-final APIs in the hands of developers while the\r\n&gt; APIs progress towards either finalization or removal in a future\r\n&gt; release.\r\n\r\nIn Java 9, you can send a `GET` request like:\r\n\r\n    // GET\r\n    HttpResponse response = HttpRequest\r\n        .create(new URI(&quot;http://www.stackoverflow.com&quot;))\r\n        .headers(&quot;Foo&quot;, &quot;foovalue&quot;, &quot;Bar&quot;, &quot;barvalue&quot;)\r\n        .GET()\r\n        .response();\r\n\r\nThen you can examine the returned `HttpResponse`:\r\n\r\n    int statusCode = response.statusCode();\r\n    String responseBody = response.body(HttpResponse.asString());\r\n\r\nSince this new HTTP Client is in &lt;del&gt;`java.httpclient`&lt;/del&gt; `jdk.incubator.httpclient` module, you should declare this dependency in your `module-info.java` file:\r\n\r\n    module com.foo.bar {\r\n        requires jdk.incubator.httpclient;\r\n    }","title":"How to use java.net.URLConnection to fire and handle HTTP requests","body":"<h2>Update</h2>\n\n<blockquote>\n  <p>The new HTTP Client shipped with Java 9 but as part of an\n  Incubator module named <code>jdk.incubator.httpclient</code>. Incubator modules are\n  a means of putting non-final APIs in the hands of developers while the\n  APIs progress towards either finalization or removal in a future\n  release.</p>\n</blockquote>\n\n<p>In Java 9, you can send a <code>GET</code> request like:</p>\n\n<pre><code>// GET\nHttpResponse response = HttpRequest\n    .create(new URI(\"http://www.stackoverflow.com\"))\n    .headers(\"Foo\", \"foovalue\", \"Bar\", \"barvalue\")\n    .GET()\n    .response();\n</code></pre>\n\n<p>Then you can examine the returned <code>HttpResponse</code>:</p>\n\n<pre><code>int statusCode = response.statusCode();\nString responseBody = response.body(HttpResponse.asString());\n</code></pre>\n\n<p>Since this new HTTP Client is in <del><code>java.httpclient</code></del> <code>jdk.incubator.httpclient</code> module, you should declare this dependency in your <code>module-info.java</code> file:</p>\n\n<pre><code>module com.foo.bar {\n    requires jdk.incubator.httpclient;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11726648,"reputation":19523,"user_id":8583692,"display_name":"Mahozad"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1702046350,"creation_date":1640977623,"answer_id":70545055,"question_id":2793150,"body_markdown":"If you are using **Java 11** or newer ([except on Android][1]), instead of the legacy `HttpUrlConnection` class, you can use Java 11 new [HTTP Client API][2].\r\n\r\n#### An example *GET* request:\r\n\r\n```java\r\nvar uri = URI.create(&quot;https://httpbin.org/get?age=26&amp;isHappy=true&quot;);\r\nvar client = HttpClient.newHttpClient();\r\nvar request = HttpRequest\r\n        .newBuilder()\r\n        .uri(uri)\r\n        .header(&quot;accept&quot;, &quot;application/json&quot;)\r\n        .GET()\r\n        .build();\r\nvar response = client.send(request, HttpResponse.BodyHandlers.ofString());\r\nSystem.out.println(response.statusCode());\r\nSystem.out.println(response.body());\r\n```\r\n\r\nThe same request executed asynchronously:\r\n\r\n```java\r\nvar responseAsync = client\r\n        .sendAsync(request, HttpResponse.BodyHandlers.ofString())\r\n        .thenApply(HttpResponse::body)\r\n        .thenAccept(System.out::println);\r\n// responseAsync.join(); // Wait for completion\r\n```\r\n\r\n#### An example *POST* request:\r\n\r\n```java\r\nvar request = HttpRequest\r\n        .newBuilder()\r\n        .uri(uri)\r\n        .version(HttpClient.Version.HTTP_2)\r\n        .timeout(Duration.ofMinutes(1))\r\n        .header(&quot;Content-Type&quot;, &quot;application/json&quot;)\r\n        .header(&quot;Authorization&quot;, &quot;Bearer fake&quot;)\r\n        .POST(BodyPublishers.ofString(&quot;{ title: &#39;This is cool&#39; }&quot;))\r\n        .build();\r\nvar response = client.send(request, HttpResponse.BodyHandlers.ofString());\r\n```\r\n\r\nFor sending form data as multipart (`multipart/form-data`) or url-encoded (`application/x-www-form-urlencoded`) format, see [this solution](https://stackoverflow.com/a/56482187/8583692).\r\n\r\nSee [this article][4] for examples and more information about HTTP Client API.\r\n\r\n## Sidenote\r\nTo create a simple HTTP **server** using Java standard library, see [this post](https://stackoverflow.com/a/71635295/8583692).\r\n\r\n\r\n  [1]: https://stackoverflow.com/q/65363995/8583692\r\n  [2]: https://openjdk.java.net/groups/net/httpclient/intro.html\r\n  [3]: https://stackoverflow.com/a/68594140/8583692\r\n  [4]: https://www.baeldung.com/java-9-http-client","title":"How to use java.net.URLConnection to fire and handle HTTP requests","body":"<p>If you are using <strong>Java 11</strong> or newer (<a href=\"https://stackoverflow.com/q/65363995/8583692\">except on Android</a>), instead of the legacy <code>HttpUrlConnection</code> class, you can use Java 11 new <a href=\"https://openjdk.java.net/groups/net/httpclient/intro.html\" rel=\"nofollow noreferrer\">HTTP Client API</a>.</p>\n<h4>An example <em>GET</em> request:</h4>\n<pre class=\"lang-java prettyprint-override\"><code>var uri = URI.create(&quot;https://httpbin.org/get?age=26&amp;isHappy=true&quot;);\nvar client = HttpClient.newHttpClient();\nvar request = HttpRequest\n        .newBuilder()\n        .uri(uri)\n        .header(&quot;accept&quot;, &quot;application/json&quot;)\n        .GET()\n        .build();\nvar response = client.send(request, HttpResponse.BodyHandlers.ofString());\nSystem.out.println(response.statusCode());\nSystem.out.println(response.body());\n</code></pre>\n<p>The same request executed asynchronously:</p>\n<pre class=\"lang-java prettyprint-override\"><code>var responseAsync = client\n        .sendAsync(request, HttpResponse.BodyHandlers.ofString())\n        .thenApply(HttpResponse::body)\n        .thenAccept(System.out::println);\n// responseAsync.join(); // Wait for completion\n</code></pre>\n<h4>An example <em>POST</em> request:</h4>\n<pre class=\"lang-java prettyprint-override\"><code>var request = HttpRequest\n        .newBuilder()\n        .uri(uri)\n        .version(HttpClient.Version.HTTP_2)\n        .timeout(Duration.ofMinutes(1))\n        .header(&quot;Content-Type&quot;, &quot;application/json&quot;)\n        .header(&quot;Authorization&quot;, &quot;Bearer fake&quot;)\n        .POST(BodyPublishers.ofString(&quot;{ title: 'This is cool' }&quot;))\n        .build();\nvar response = client.send(request, HttpResponse.BodyHandlers.ofString());\n</code></pre>\n<p>For sending form data as multipart (<code>multipart/form-data</code>) or url-encoded (<code>application/x-www-form-urlencoded</code>) format, see <a href=\"https://stackoverflow.com/a/56482187/8583692\">this solution</a>.</p>\n<p>See <a href=\"https://www.baeldung.com/java-9-http-client\" rel=\"nofollow noreferrer\">this article</a> for examples and more information about HTTP Client API.</p>\n<h2>Sidenote</h2>\n<p>To create a simple HTTP <strong>server</strong> using Java standard library, see <a href=\"https://stackoverflow.com/a/71635295/8583692\">this post</a>.</p>\n"}],"owner":{"account_id":52822,"reputation":1088960,"user_id":157882,"accept_rate":93,"display_name":"BalusC"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1190452,"favorite_count":0,"down_vote_count":8,"up_vote_count":2137,"accepted_answer_id":2793153,"answer_count":12,"score":2129,"last_activity_date":1702046350,"creation_date":1273299371,"question_id":2793150,"body_markdown":"Use of [`java.net.URLConnection`][1] is asked about pretty often here, and the [Oracle tutorial][2] is *too* concise about it.\r\n\r\nThat tutorial basically only shows how to fire a [GET][3] request and read the response. It doesn&#39;t explain anywhere how to use it to, among others, perform a [POST][4] request, set request headers, read response headers, deal with cookies, submit a HTML form, upload a file, etc.\r\n\r\nSo, how can I use `java.net.URLConnection` to fire and handle &quot;advanced&quot; HTTP requests?\r\n\r\n  [1]: http://docs.oracle.com/javase/8/docs/api/java/net/URLConnection.html\r\n  [2]: http://download.oracle.com/javase/tutorial/networking/urls/connecting.html\r\n  [3]: https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol#Request_methods\r\n  [4]: https://en.wikipedia.org/wiki/POST_%28HTTP%29\r\n\r\n\r\n","title":"How to use java.net.URLConnection to fire and handle HTTP requests","body":"<p>Use of <a href=\"http://docs.oracle.com/javase/8/docs/api/java/net/URLConnection.html\" rel=\"noreferrer\"><code>java.net.URLConnection</code></a> is asked about pretty often here, and the <a href=\"http://download.oracle.com/javase/tutorial/networking/urls/connecting.html\" rel=\"noreferrer\">Oracle tutorial</a> is <em>too</em> concise about it.</p>\n<p>That tutorial basically only shows how to fire a <a href=\"https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol#Request_methods\" rel=\"noreferrer\">GET</a> request and read the response. It doesn't explain anywhere how to use it to, among others, perform a <a href=\"https://en.wikipedia.org/wiki/POST_%28HTTP%29\" rel=\"noreferrer\">POST</a> request, set request headers, read response headers, deal with cookies, submit a HTML form, upload a file, etc.</p>\n<p>So, how can I use <code>java.net.URLConnection</code> to fire and handle &quot;advanced&quot; HTTP requests?</p>\n"},{"tags":["java","maven","cas","apereo"],"owner":{"account_id":6631872,"reputation":2547,"user_id":5132456,"accept_rate":40,"display_name":"wotanii"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":17,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":0,"score":-1,"last_activity_date":1702045670,"creation_date":1702045670,"question_id":77627247,"body_markdown":"I am working on migrating from `org.apereo.cas:6.6.14` to `7.0.0-RC9` (and the actual release when it happens). \r\n\r\nUntil `v7.0.0-RC5` the package `org.apereo.cas.web.security` was in `org.apereo.cas:cas-server-webapp-config`, but that package was not updated to any newer version [2]. \r\n\r\nWhen I try to use `cas-server-webapp-config:7.0.0-RC5` together with `RC9` of everything else, then I get an compile time error, as expceted. It seems to require classes, that are not present anymore in the other packages. \r\n\r\n```\r\n[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.10.1:compile (default-compile) on project eessi-cas-server: Compilation failure: Compilation failure: \r\n[ERROR] /path/to/my/project/src/main/java/org/apereo/cas/custom/config/MyCasOverlayConfiguration.java:[4,25] error: cannot find symbol\r\n[ERROR]   symbol:   class ProtocolEndpointWebSecurityConfigurer\r\n[ERROR]   location: package org.apereo.cas.web\r\n```\r\n\r\nThe Changelog doesn&#39;t seem to mention any of this [3]. \r\n\r\nSpecifically I am using `org.apereo.cas.web.security.CasWebSecurityConfigurerAdapter` for my SecurityFilterChain. That constructor wants to have a `org.apereo.cas.web.ProtocolEndpointWebSecurityConfigurer`, which doesn&#39;t exist anymore in 7.0.0-RC9. \r\n\r\nMy filterchain looks like this in 6.6.14:\r\n\r\n```java\r\n@Primary\r\n@Bean\r\npublic SecurityFilterChain casWebSecurityConfigurerAdapter(\r\n        final HttpSecurity http,\r\n        final ObjectProvider&lt;PathMappedEndpoints&gt; pathMappedEndpoints,\r\n        final List&lt;ProtocolEndpointWebSecurityConfigurer&gt; configurersList,\r\n        final SecurityProperties securityProperties,\r\n        final CasConfigurationProperties casProperties,\r\n        final org.springframework.security.web.context.SecurityContextRepository securityContextRepository,\r\n        final WebEndpointProperties webEndpointProperties)throws Exception {\r\n    CasWebSecurityConfigurerAdapter adapter = new CasWebSecurityConfigurerAdapter( \r\n        casProperties, securityProperties, \r\n    webEndpointProperties, pathMappedEndpoints, ProtocolEndpointWebSecurityConfigurer, configurersList);\r\n    return adapter.configureHttpSecurity(http).build();\r\n}\r\n```\r\n\r\nAnd when I compile it, it gives me the errors mentioned above. I am not sure if it makes a difference, but I am using Maven 3.9.5 and openJDK 21.0\r\n\r\nMy guess:\r\n\r\n* either the package was accidentally not published in the RC6\r\n* or the mechanism to set up the filterchain was changed, and I now have to do something else entirely. \r\n* or maybe the package just moved\r\n\r\nlinks: \r\n\r\n\r\n* [2] https://mvnrepository.com/artifact/org.apereo.cas/cas-server-webapp-config\r\n* [3] https://apereo.github.io/cas/development/release_notes/RC6.html","title":"What happened &quot;org.apereo.cas.web.security&quot; in 7.0.0-RC9 of org.apereo.cas?","body":"<p>I am working on migrating from <code>org.apereo.cas:6.6.14</code> to <code>7.0.0-RC9</code> (and the actual release when it happens).</p>\n<p>Until <code>v7.0.0-RC5</code> the package <code>org.apereo.cas.web.security</code> was in <code>org.apereo.cas:cas-server-webapp-config</code>, but that package was not updated to any newer version [2].</p>\n<p>When I try to use <code>cas-server-webapp-config:7.0.0-RC5</code> together with <code>RC9</code> of everything else, then I get an compile time error, as expceted. It seems to require classes, that are not present anymore in the other packages.</p>\n<pre><code>[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.10.1:compile (default-compile) on project eessi-cas-server: Compilation failure: Compilation failure: \n[ERROR] /path/to/my/project/src/main/java/org/apereo/cas/custom/config/MyCasOverlayConfiguration.java:[4,25] error: cannot find symbol\n[ERROR]   symbol:   class ProtocolEndpointWebSecurityConfigurer\n[ERROR]   location: package org.apereo.cas.web\n</code></pre>\n<p>The Changelog doesn't seem to mention any of this [3].</p>\n<p>Specifically I am using <code>org.apereo.cas.web.security.CasWebSecurityConfigurerAdapter</code> for my SecurityFilterChain. That constructor wants to have a <code>org.apereo.cas.web.ProtocolEndpointWebSecurityConfigurer</code>, which doesn't exist anymore in 7.0.0-RC9.</p>\n<p>My filterchain looks like this in 6.6.14:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Primary\n@Bean\npublic SecurityFilterChain casWebSecurityConfigurerAdapter(\n        final HttpSecurity http,\n        final ObjectProvider&lt;PathMappedEndpoints&gt; pathMappedEndpoints,\n        final List&lt;ProtocolEndpointWebSecurityConfigurer&gt; configurersList,\n        final SecurityProperties securityProperties,\n        final CasConfigurationProperties casProperties,\n        final org.springframework.security.web.context.SecurityContextRepository securityContextRepository,\n        final WebEndpointProperties webEndpointProperties)throws Exception {\n    CasWebSecurityConfigurerAdapter adapter = new CasWebSecurityConfigurerAdapter( \n        casProperties, securityProperties, \n    webEndpointProperties, pathMappedEndpoints, ProtocolEndpointWebSecurityConfigurer, configurersList);\n    return adapter.configureHttpSecurity(http).build();\n}\n</code></pre>\n<p>And when I compile it, it gives me the errors mentioned above. I am not sure if it makes a difference, but I am using Maven 3.9.5 and openJDK 21.0</p>\n<p>My guess:</p>\n<ul>\n<li>either the package was accidentally not published in the RC6</li>\n<li>or the mechanism to set up the filterchain was changed, and I now have to do something else entirely.</li>\n<li>or maybe the package just moved</li>\n</ul>\n<p>links:</p>\n<ul>\n<li>[2] <a href=\"https://mvnrepository.com/artifact/org.apereo.cas/cas-server-webapp-config\" rel=\"nofollow noreferrer\">https://mvnrepository.com/artifact/org.apereo.cas/cas-server-webapp-config</a></li>\n<li>[3] <a href=\"https://apereo.github.io/cas/development/release_notes/RC6.html\" rel=\"nofollow noreferrer\">https://apereo.github.io/cas/development/release_notes/RC6.html</a></li>\n</ul>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":247613,"reputation":284087,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":3,"creation_date":1702009137,"post_id":77624312,"comment_id":136847846,"body_markdown":"Please check out [What is a debugger and how can it help me diagnose problems?](https://stackoverflow.com/q/25385173/)  and [How to debug small programs](https://ericlippert.com/2014/03/05/how-to-debug-small-programs/). The links won&#39;t solve your direct problem, but they will give you steps that you can follow that should help you solve it yourself, or even if that is not successful, then at least help you to better isolate your problem so that your question can be more focused and easier to answer.","body":"Please check out <a href=\"https://stackoverflow.com/q/25385173/\">What is a debugger and how can it help me diagnose problems?</a>  and <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to debug small programs</a>. The links won&#39;t solve your direct problem, but they will give you steps that you can follow that should help you solve it yourself, or even if that is not successful, then at least help you to better isolate your problem so that your question can be more focused and easier to answer."}],"answers":[{"tags":[],"owner":{"account_id":27345946,"reputation":9,"user_id":20855848,"display_name":"Shivendu Mishra"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1702009457,"creation_date":1702009457,"answer_id":77624336,"question_id":77624312,"body_markdown":"I think there is some calculation mistake, \r\n\r\nyour waistCircumference = 60\r\nyour height = 170 \r\n\r\nwhen you do `Math.log10(waistCircumference - height)`\r\nit will not give the expected answer since we cannot have negative numbers inside log10\r\n\r\nI hope it answers your query!\r\nHappy coding!","title":"Formula to calculate body fat percentage","body":"<p>I think there is some calculation mistake,</p>\n<p>your waistCircumference = 60\nyour height = 170</p>\n<p>when you do <code>Math.log10(waistCircumference - height)</code>\nit will not give the expected answer since we cannot have negative numbers inside log10</p>\n<p>I hope it answers your query!\nHappy coding!</p>\n"},{"tags":[],"owner":{"account_id":25433740,"reputation":24,"user_id":19237737,"display_name":"Ali Elgamal"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1702009459,"creation_date":1702009459,"answer_id":77624337,"question_id":77624312,"body_markdown":"The problem is in Math.log10, the log function doesn&#39;t take negative values, so it returns nan as waistCircumference - height &lt; 0. If you could attach the formula you used, maybe i recommend you a solution.","title":"Formula to calculate body fat percentage","body":"<p>The problem is in Math.log10, the log function doesn't take negative values, so it returns nan as waistCircumference - height &lt; 0. If you could attach the formula you used, maybe i recommend you a solution.</p>\n"},{"tags":[],"owner":{"account_id":2259687,"reputation":111,"user_id":1990082,"display_name":"Hinte"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1702013510,"creation_date":1702011756,"answer_id":77624449,"question_id":77624312,"body_markdown":"The value NaN is used to represent a value that is an error. This is represented when exponent field is all ones with a zero sign bit or a mantissa that it not 1 followed by zeros. This is a special value that might be used to denote a variable that doesn’t yet hold a value.\r\n\r\nIn java,you can using NaN with **Double.NaN**\r\n\r\nFor example you can get NaN in these case\r\n\r\n    double result1 = 0.0 / 0.0;\r\n    double result2 = Math.sqrt(-1.0); \r\n    double result3 = Math.log10(-1); \r\n\r\n\r\n","title":"Formula to calculate body fat percentage","body":"<p>The value NaN is used to represent a value that is an error. This is represented when exponent field is all ones with a zero sign bit or a mantissa that it not 1 followed by zeros. This is a special value that might be used to denote a variable that doesn’t yet hold a value.</p>\n<p>In java,you can using NaN with <strong>Double.NaN</strong></p>\n<p>For example you can get NaN in these case</p>\n<pre><code>double result1 = 0.0 / 0.0;\ndouble result2 = Math.sqrt(-1.0); \ndouble result3 = Math.log10(-1); \n</code></pre>\n"}],"owner":{"account_id":21984083,"reputation":3,"user_id":16258657,"display_name":"fiTzz"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":1,"is_answered":false,"view_count":65,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":3,"score":-1,"last_activity_date":1702045514,"creation_date":1702008931,"question_id":77624312,"body_markdown":"```\r\nprivate void calculateBodyFatPercentage() {\r\n    double weight = Double.parseDouble(weightBF.getText().toString());\r\n    double height = Double.parseDouble(heightBF.getText().toString());\r\n    double waistCircumference = Double.parseDouble(waistBF.getText().toString());\r\n    String spinnerGenderBF = spngender.getSelectedItem().toString();\r\n\r\n    double bodyFatPercentage = (double)calculateBodyFatPercentage(weight, height, waistCircumference, spinnerGenderBF);\r\n    resultBF.setText(&quot;Estimated Body Fat Percentage: &quot; + bodyFatPercentage + &quot;%&quot;);\r\n}\r\n\r\nprivate double calculateBodyFatPercentage(double weight, double height, double waistCircumference, String gender) {\r\n    // Paste the body fat percentage calculation logic from the previous code here\r\n    double factorA, factorB;\r\n\r\n    if (gender.equals(&quot;Male&quot;)) {\r\n        factorA = 86.010;\r\n        factorB = 70.041;\r\n    } else{\r\n        factorA = 163.205;\r\n        factorB = 97.684;\r\n    }\r\n\r\n    double bodyDensity = factorA - (factorB * Math.log10(waistCircumference - height));\r\n    double bodyFatPercentage = (495 / bodyDensity) - 450;\r\n\r\n    return bodyFatPercentage;\r\n}\r\n```\r\n\r\n[![Screenshot][1]][1]\r\n\r\nThe result based on the code I provide.\r\n\r\nI do not understand why I can get NaN% value. How to fix it?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/qsuax.png","title":"Formula to calculate body fat percentage","body":"<pre><code>private void calculateBodyFatPercentage() {\n    double weight = Double.parseDouble(weightBF.getText().toString());\n    double height = Double.parseDouble(heightBF.getText().toString());\n    double waistCircumference = Double.parseDouble(waistBF.getText().toString());\n    String spinnerGenderBF = spngender.getSelectedItem().toString();\n\n    double bodyFatPercentage = (double)calculateBodyFatPercentage(weight, height, waistCircumference, spinnerGenderBF);\n    resultBF.setText(&quot;Estimated Body Fat Percentage: &quot; + bodyFatPercentage + &quot;%&quot;);\n}\n\nprivate double calculateBodyFatPercentage(double weight, double height, double waistCircumference, String gender) {\n    // Paste the body fat percentage calculation logic from the previous code here\n    double factorA, factorB;\n\n    if (gender.equals(&quot;Male&quot;)) {\n        factorA = 86.010;\n        factorB = 70.041;\n    } else{\n        factorA = 163.205;\n        factorB = 97.684;\n    }\n\n    double bodyDensity = factorA - (factorB * Math.log10(waistCircumference - height));\n    double bodyFatPercentage = (495 / bodyDensity) - 450;\n\n    return bodyFatPercentage;\n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/qsuax.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qsuax.png\" alt=\"Screenshot\" /></a></p>\n<p>The result based on the code I provide.</p>\n<p>I do not understand why I can get NaN% value. How to fix it?</p>\n"},{"tags":["java","delphi","bcd"],"comments":[{"owner":{"account_id":237126,"reputation":604222,"user_id":505088,"accept_rate":91,"display_name":"David Heffernan"},"score":0,"creation_date":1438002295,"post_id":31653777,"comment_id":51252902,"body_markdown":"`div` is `/`, `shl` is `&lt;&lt;` and `or` is `|`. A bigger problem is that there is no unsigned byte type in Java. What type do you want to use? Do you know any Java? Or is it Delphi that you don&#39;t understand? What are you stuck on?","body":"<code>div</code> is <code>&#47;</code>, <code>shl</code> is <code>&lt;&lt;</code> and <code>or</code> is <code>|</code>. A bigger problem is that there is no unsigned byte type in Java. What type do you want to use? Do you know any Java? Or is it Delphi that you don&#39;t understand? What are you stuck on?"},{"owner":{"account_id":237126,"reputation":604222,"user_id":505088,"accept_rate":91,"display_name":"David Heffernan"},"score":0,"creation_date":1438002366,"post_id":31653777,"comment_id":51252954,"body_markdown":"Also, could you please ask a direct question. Here you&#39;ve just told us that you have some job to do and left us to work out what your question is. I hope you aren&#39;t just hoping we&#39;ll do it all for you. We prefer to help people that are keen to learn.","body":"Also, could you please ask a direct question. Here you&#39;ve just told us that you have some job to do and left us to work out what your question is. I hope you aren&#39;t just hoping we&#39;ll do it all for you. We prefer to help people that are keen to learn."},{"owner":{"account_id":6497395,"reputation":45,"user_id":5029555,"accept_rate":80,"display_name":"Rafael Guerra"},"score":0,"creation_date":1438002702,"post_id":31653777,"comment_id":51253167,"body_markdown":"I don&#180;t want anyone solve anything for me. I just need an little explanation of conversion with bcd and a relationship between the operators used in Delphi and Java, just as you did in parts.","body":"I don&#180;t want anyone solve anything for me. I just need an little explanation of conversion with bcd and a relationship between the operators used in Delphi and Java, just as you did in parts."},{"owner":{"account_id":237126,"reputation":604222,"user_id":505088,"accept_rate":91,"display_name":"David Heffernan"},"score":0,"creation_date":1438002836,"post_id":31653777,"comment_id":51253269,"body_markdown":"Please state that in the question. Oh, I see I missed `mod` being `%`. Of course both languages are well documented and there operators are well known. It would be better if you read the docs first, and then asked for clarification of anything that you don&#39;t understand. As presented, one might suspect you of being lazy. Show us that you are not by adding what you know to the question, and asking a specific question.","body":"Please state that in the question. Oh, I see I missed <code>mod</code> being <code>%</code>. Of course both languages are well documented and there operators are well known. It would be better if you read the docs first, and then asked for clarification of anything that you don&#39;t understand. As presented, one might suspect you of being lazy. Show us that you are not by adding what you know to the question, and asking a specific question."}],"answers":[{"tags":[],"owner":{"account_id":23121,"reputation":527336,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1438011433,"creation_date":1438002478,"answer_id":31653954,"question_id":31653777,"body_markdown":"You can do this\r\n\r\n    public static int byteToBCD(byte b) {\r\n        assert 0 &lt;= b &amp;&amp; b &lt;= 99; // two digits only.\r\n        return (b / 10 &lt;&lt; 4) | b % 10;\r\n    }\r\n\r\nIt is not clear what you are stuck on but it the answer is trivia.\r\n\r\n","title":"Conversion byte decimal to byte bcd","body":"<p>You can do this</p>\n\n<pre><code>public static int byteToBCD(byte b) {\n    assert 0 &lt;= b &amp;&amp; b &lt;= 99; // two digits only.\n    return (b / 10 &lt;&lt; 4) | b % 10;\n}\n</code></pre>\n\n<p>It is not clear what you are stuck on but it the answer is trivia.</p>\n"},{"tags":[],"owner":{"account_id":23554557,"reputation":61,"user_id":17596747,"display_name":"RasulOs"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1702045500,"creation_date":1702043512,"answer_id":77627046,"question_id":31653777,"body_markdown":"A simple and clear solution that I use for this type of conversion:\r\n\r\n       public static int fromIntValueToBCDValue(int value) {\r\n            return Integer.parseInt( ((value) + &quot;&quot;), 16);\r\n        }\r\n    \r\n        public static int fromBCDToDecimal(byte bcd) {\r\n            int lhs = (bcd &gt;&gt;&gt; 4) &amp; 0xf;\r\n            int rhs = bcd &amp; 0xf;\r\n    \r\n            return Integer.parseInt(lhs + &quot;&quot; + rhs);\r\n        }\r\n    \r\n        public static String fromBCDToDecimal(byte[] bcd) {\r\n    \r\n            StringBuilder sb = new StringBuilder();\r\n    \r\n            Objects.requireNonNull(bcd);\r\n    \r\n            for (int i = 0; i &lt; bcd.length; i++) {\r\n    \r\n                int lhs = (bcd[i] &gt;&gt;&gt; 4) &amp; 0xf;\r\n                int rhs = bcd[i] &amp; 0xf;\r\n    \r\n                sb.append(Integer.parseInt(lhs + &quot;&quot; + rhs));\r\n            }\r\n    \r\n            return sb.toString();\r\n        } ","title":"Conversion byte decimal to byte bcd","body":"<p>A simple and clear solution that I use for this type of conversion:</p>\n<pre><code>   public static int fromIntValueToBCDValue(int value) {\n        return Integer.parseInt( ((value) + &quot;&quot;), 16);\n    }\n\n    public static int fromBCDToDecimal(byte bcd) {\n        int lhs = (bcd &gt;&gt;&gt; 4) &amp; 0xf;\n        int rhs = bcd &amp; 0xf;\n\n        return Integer.parseInt(lhs + &quot;&quot; + rhs);\n    }\n\n    public static String fromBCDToDecimal(byte[] bcd) {\n\n        StringBuilder sb = new StringBuilder();\n\n        Objects.requireNonNull(bcd);\n\n        for (int i = 0; i &lt; bcd.length; i++) {\n\n            int lhs = (bcd[i] &gt;&gt;&gt; 4) &amp; 0xf;\n            int rhs = bcd[i] &amp; 0xf;\n\n            sb.append(Integer.parseInt(lhs + &quot;&quot; + rhs));\n        }\n\n        return sb.toString();\n    } \n</code></pre>\n"}],"owner":{"account_id":6497395,"reputation":45,"user_id":5029555,"accept_rate":80,"display_name":"Rafael Guerra"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1627,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":31653954,"answer_count":2,"score":-1,"last_activity_date":1702045500,"creation_date":1438001980,"question_id":31653777,"body_markdown":"I need to convert a Delphi function to Java function. This function convert a byte decimal to byte bcd:\r\n\r\n\r\n    function ByteToBCD(Number : byte) : byte;\r\n    begin\r\n        result:= ((Number div 10) shl 4) or (Number mod 10);\r\n    end;","title":"Conversion byte decimal to byte bcd","body":"<p>I need to convert a Delphi function to Java function. This function convert a byte decimal to byte bcd:</p>\n\n<pre><code>function ByteToBCD(Number : byte) : byte;\nbegin\n    result:= ((Number div 10) shl 4) or (Number mod 10);\nend;\n</code></pre>\n"},{"tags":["java","dynamic","dynamic-programming"],"comments":[{"owner":{"account_id":15595756,"reputation":1662,"user_id":11251344,"display_name":"BlackPearl"},"score":0,"creation_date":1559426490,"post_id":56410436,"comment_id":99418565,"body_markdown":"Can you add your existing code and the actual problems you faced?","body":"Can you add your existing code and the actual problems you faced?"},{"owner":{"account_id":15123083,"reputation":27,"user_id":10913324,"display_name":"Corgam"},"score":0,"creation_date":1559431361,"post_id":56410436,"comment_id":99419348,"body_markdown":"I added the code, it’s really long and messy. I think the best way for solving this problem would be a pseudo code from somebody","body":"I added the code, it’s really long and messy. I think the best way for solving this problem would be a pseudo code from somebody"}],"answers":[{"tags":[],"owner":{"account_id":15123083,"reputation":27,"user_id":10913324,"display_name":"Corgam"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1559514309,"creation_date":1559514309,"answer_id":56419374,"question_id":56410436,"body_markdown":"Ok, so I have found on Github the code for exactly this type of task,\r\nI will leave it for other people if they need it later: \r\n\r\nhttps://github.com/mission-peace/interview/blob/master/src/com/interview/dynamic/NPotGold.java?fbclid=IwAR2PZ8MvNJcQmlU13wj1n_c6m1UhQY7FXAY07RwaI6wOOXAMgDOVRxFahD0 ","title":"Array of buckets with dynamic programming problem","body":"<p>Ok, so I have found on Github the code for exactly this type of task,\nI will leave it for other people if they need it later: </p>\n\n<p><a href=\"https://github.com/mission-peace/interview/blob/master/src/com/interview/dynamic/NPotGold.java?fbclid=IwAR2PZ8MvNJcQmlU13wj1n_c6m1UhQY7FXAY07RwaI6wOOXAMgDOVRxFahD0\" rel=\"nofollow noreferrer\">https://github.com/mission-peace/interview/blob/master/src/com/interview/dynamic/NPotGold.java?fbclid=IwAR2PZ8MvNJcQmlU13wj1n_c6m1UhQY7FXAY07RwaI6wOOXAMgDOVRxFahD0</a> </p>\n"}],"owner":{"account_id":15123083,"reputation":27,"user_id":10913324,"display_name":"Corgam"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":637,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":56419374,"answer_count":1,"score":0,"last_activity_date":1702044669,"creation_date":1559423401,"question_id":56410436,"body_markdown":"I’m doing a task with dynamic programming in Java and I got stuck:\r\nIn the task we are given an array of buckets with random number of rocks inside, where both players know their amount from the start. Players take tours and pick one border bucket from the sides:\r\n\r\nBuckets: (3)(3)(8)(2)(10)(4)\r\n\r\nP1: (3) buckets left: (3)(8)(2)(10)(4),\r\n\r\nP2:(4) buckets left: (3)(8)(2)(10), \r\n\r\nP1:(10) buckets left: (3)(8)(2), \r\n\r\nP2(3) buckets left: (8)(2),\r\n\r\nP1:(8) buckets left (2),\r\n\r\nP2:(2) end\r\n\r\n\r\nFinal score is calculated with (rocks of player 1) - (rocks of player2) \r\n\r\nScore = (3+10+8)-(4+3+2) = 12\r\n\r\nWe play player1 and our goal is to find the OPTIMAL pick order in which we have the biggest score.\r\n\r\n\r\n\r\n\r\n\r\nI know the concept of DP but I have no idea what could I save in order to improve the time. \r\nThe main part of the code I did with minmax algorithm and it worked but I have no idea how to combine it with dynamic programming\r\n\r\nI tried having a matrix with rows as buckets from left and columns as buckets from right, so I can save there answers for when we use the same “part” of the array, but I had some problems with it...\r\n\r\nEDIT1: added my code\r\n\r\n    public int maxGain(int[] values)\r\n    {\r\n        this.moves = new int[values.length+1][values.length+1];\r\n        return  _maxGain(values,0,values.length-1,0,0,values.length,true,0,0);\r\n    }\r\n\r\n    public int _maxGain(int[] values, int leftBowl, int rightBowl, int valuePlayer1, int valuePlayer2,int leftBowls, boolean ifFirstPlayer, int leftMoves, int rightMoves){\r\n            //Check if end of the game\r\n            if(leftBowls == 0) {\r\n                //Calculate the final score\r\n                return valuePlayer1 - valuePlayer2;\r\n            }\r\n            //System.out.println(&quot;Left:&quot;+values[leftBowl]+&quot;, right: &quot;+values[rightBowl]);\r\n            // If first player\r\n            if(ifFirstPlayer){\r\n                int maxEval = Integer.MIN_VALUE;\r\n                int eval;\r\n                for(int i=0;i&lt;2;i++){\r\n                    if(i==0){\r\n                        //Do move\r\n                        valuePlayer1 = valuePlayer1+values[leftBowl];\r\n                        leftBowls--;\r\n                        leftMoves++;\r\n                        if(moves[leftMoves][rightMoves] != 0){\r\n                            eval = moves[leftMoves][rightMoves];\r\n                            System.out.println(&quot;USED! Left:&quot;+leftMoves+&quot;,right: &quot;+rightMoves+&quot; Moves: &quot; + moves[leftMoves][rightMoves] );\r\n                        }else {\r\n                            eval = _maxGain(values, leftBowl + 1, rightBowl, valuePlayer1, valuePlayer2, leftBowls, false, leftMoves, rightMoves);\r\n                            moves[leftMoves][rightMoves] = eval;\r\n                            System.out.println(&quot;Left:&quot;+leftMoves+&quot;,right: &quot;+rightMoves+&quot; Moves: &quot; + moves[leftMoves][rightMoves] );\r\n                            for(int x=0;x&lt;this.moves.length;x++){\r\n                                for(int j=0;j&lt;this.moves.length;j++){\r\n                                    System.out.print(this.moves[x][j]+&quot; &quot;);\r\n                                }\r\n                                System.out.println();\r\n                            }\r\n                        }\r\n                        leftMoves--;\r\n                        maxEval = Math.max(maxEval,eval);\r\n                        //Undo move\r\n                        valuePlayer1 = valuePlayer1-values[leftBowl];\r\n                        leftBowls++;\r\n                    }else{\r\n                        //Do move\r\n                        valuePlayer1 = valuePlayer1+values[rightBowl];\r\n                        leftBowls--;\r\n                        rightMoves++;\r\n                        if(moves[leftMoves][rightMoves] != 0){\r\n                            eval = moves[leftMoves][rightMoves];\r\n                            System.out.println(&quot;USED! Left:&quot;+leftMoves+&quot;,right: &quot;+rightMoves+&quot; Moves: &quot; + moves[leftMoves][rightMoves] );\r\n                        }else {\r\n                            eval = _maxGain(values, leftBowl, rightBowl - 1, valuePlayer1, valuePlayer2, leftBowls, false, leftMoves, rightMoves);\r\n                            moves[leftMoves][rightMoves] = eval;\r\n                            System.out.println(&quot;Left:&quot;+leftMoves+&quot;,right: &quot;+rightMoves+&quot; Moves: &quot; + moves[leftMoves][rightMoves] );\r\n                            for(int x=0;x&lt;this.moves.length;x++){\r\n                                for(int j=0;j&lt;this.moves.length;j++){\r\n                                    System.out.print(this.moves[x][j]+&quot; &quot;);\r\n                                }\r\n                                System.out.println();\r\n                            }\r\n                        }\r\n                        rightMoves--;\r\n                        maxEval = Math.max(maxEval,eval);\r\n                        //Undo move\r\n                        valuePlayer1 = valuePlayer1-values[rightBowl];\r\n                        leftBowls++;\r\n                    }\r\n                }\r\n                return maxEval;\r\n                //If second player\r\n            }else{\r\n                int minEval = Integer.MAX_VALUE;\r\n                int eval;\r\n                for(int i=0;i&lt;2;i++){\r\n                    if(i==0){\r\n                        //Do move\r\n                        valuePlayer2 = valuePlayer2+values[leftBowl];\r\n                        leftBowls--;\r\n                        leftMoves++;\r\n                        if(moves[leftMoves][rightMoves] != 0){\r\n                            eval = moves[leftMoves][rightMoves];\r\n                            System.out.println(&quot;USED! Left:&quot;+leftMoves+&quot;,right: &quot;+rightMoves+&quot; Moves: &quot; + moves[leftMoves][rightMoves] );\r\n                        }else {\r\n                            eval = _maxGain(values, leftBowl + 1, rightBowl, valuePlayer1, valuePlayer2, leftBowls, true, leftMoves, rightMoves);\r\n                            moves[leftMoves][rightMoves] = eval;\r\n                            System.out.println(&quot;Left:&quot;+leftMoves+&quot;,right: &quot;+rightMoves+&quot; Moves: &quot; + moves[leftMoves][rightMoves] );\r\n                            for(int x=0;x&lt;this.moves.length;x++){\r\n                                for(int j=0;j&lt;this.moves.length;j++){\r\n                                    System.out.print(this.moves[x][j]+&quot; &quot;);\r\n                                }\r\n                                System.out.println();\r\n                            }\r\n                        }\r\n                        leftMoves--;\r\n                        minEval = Math.min(minEval,eval);\r\n                        //Undo move\r\n                        valuePlayer2 = valuePlayer2-values[leftBowl];\r\n                        leftBowls++;\r\n                    }else{\r\n                        //Do move\r\n                        valuePlayer2 = valuePlayer2+values[rightBowl];\r\n                        leftBowls--;\r\n                        rightMoves++;\r\n                        if(moves[leftMoves][rightMoves] != 0){\r\n                            eval = moves[leftMoves][rightMoves];\r\n                            System.out.println(&quot;USED! Left:&quot;+leftMoves+&quot;,right: &quot;+rightMoves+&quot; Moves: &quot; + moves[leftMoves][rightMoves] );\r\n                        }else {\r\n                            eval = _maxGain(values, leftBowl, rightBowl - 1, valuePlayer1, valuePlayer2, leftBowls, true, leftMoves, rightMoves);\r\n                            moves[leftMoves][rightMoves] = eval;\r\n                            System.out.println(&quot;Left:&quot;+leftMoves+&quot;,right: &quot;+rightMoves+&quot; Moves: &quot; + moves[leftMoves][rightMoves] );\r\n                            for(int x=0;x&lt;this.moves.length;x++){\r\n                                for(int j=0;j&lt;this.moves.length;j++){\r\n                                    System.out.print(this.moves[x][j]+&quot; &quot;);\r\n                                }\r\n                                System.out.println();\r\n                            }\r\n                        }\r\n                        rightMoves--;\r\n                        minEval = Math.min(minEval,eval);\r\n                        //Undo move\r\n                        valuePlayer2 = valuePlayer2-values[rightBowl];\r\n                        leftBowls++;\r\n                    }\r\n                }\r\n                return minEval;\r\n            }\r\n        }","title":"Array of buckets with dynamic programming problem","body":"<p>I’m doing a task with dynamic programming in Java and I got stuck:\nIn the task we are given an array of buckets with random number of rocks inside, where both players know their amount from the start. Players take tours and pick one border bucket from the sides:</p>\n\n<p>Buckets: (3)(3)(8)(2)(10)(4)</p>\n\n<p>P1: (3) buckets left: (3)(8)(2)(10)(4),</p>\n\n<p>P2:(4) buckets left: (3)(8)(2)(10), </p>\n\n<p>P1:(10) buckets left: (3)(8)(2), </p>\n\n<p>P2(3) buckets left: (8)(2),</p>\n\n<p>P1:(8) buckets left (2),</p>\n\n<p>P2:(2) end</p>\n\n<p>Final score is calculated with (rocks of player 1) - (rocks of player2) </p>\n\n<p>Score = (3+10+8)-(4+3+2) = 12</p>\n\n<p>We play player1 and our goal is to find the OPTIMAL pick order in which we have the biggest score.</p>\n\n<p>I know the concept of DP but I have no idea what could I save in order to improve the time. \nThe main part of the code I did with minmax algorithm and it worked but I have no idea how to combine it with dynamic programming</p>\n\n<p>I tried having a matrix with rows as buckets from left and columns as buckets from right, so I can save there answers for when we use the same “part” of the array, but I had some problems with it...</p>\n\n<p>EDIT1: added my code</p>\n\n<pre><code>public int maxGain(int[] values)\n{\n    this.moves = new int[values.length+1][values.length+1];\n    return  _maxGain(values,0,values.length-1,0,0,values.length,true,0,0);\n}\n\npublic int _maxGain(int[] values, int leftBowl, int rightBowl, int valuePlayer1, int valuePlayer2,int leftBowls, boolean ifFirstPlayer, int leftMoves, int rightMoves){\n        //Check if end of the game\n        if(leftBowls == 0) {\n            //Calculate the final score\n            return valuePlayer1 - valuePlayer2;\n        }\n        //System.out.println(\"Left:\"+values[leftBowl]+\", right: \"+values[rightBowl]);\n        // If first player\n        if(ifFirstPlayer){\n            int maxEval = Integer.MIN_VALUE;\n            int eval;\n            for(int i=0;i&lt;2;i++){\n                if(i==0){\n                    //Do move\n                    valuePlayer1 = valuePlayer1+values[leftBowl];\n                    leftBowls--;\n                    leftMoves++;\n                    if(moves[leftMoves][rightMoves] != 0){\n                        eval = moves[leftMoves][rightMoves];\n                        System.out.println(\"USED! Left:\"+leftMoves+\",right: \"+rightMoves+\" Moves: \" + moves[leftMoves][rightMoves] );\n                    }else {\n                        eval = _maxGain(values, leftBowl + 1, rightBowl, valuePlayer1, valuePlayer2, leftBowls, false, leftMoves, rightMoves);\n                        moves[leftMoves][rightMoves] = eval;\n                        System.out.println(\"Left:\"+leftMoves+\",right: \"+rightMoves+\" Moves: \" + moves[leftMoves][rightMoves] );\n                        for(int x=0;x&lt;this.moves.length;x++){\n                            for(int j=0;j&lt;this.moves.length;j++){\n                                System.out.print(this.moves[x][j]+\" \");\n                            }\n                            System.out.println();\n                        }\n                    }\n                    leftMoves--;\n                    maxEval = Math.max(maxEval,eval);\n                    //Undo move\n                    valuePlayer1 = valuePlayer1-values[leftBowl];\n                    leftBowls++;\n                }else{\n                    //Do move\n                    valuePlayer1 = valuePlayer1+values[rightBowl];\n                    leftBowls--;\n                    rightMoves++;\n                    if(moves[leftMoves][rightMoves] != 0){\n                        eval = moves[leftMoves][rightMoves];\n                        System.out.println(\"USED! Left:\"+leftMoves+\",right: \"+rightMoves+\" Moves: \" + moves[leftMoves][rightMoves] );\n                    }else {\n                        eval = _maxGain(values, leftBowl, rightBowl - 1, valuePlayer1, valuePlayer2, leftBowls, false, leftMoves, rightMoves);\n                        moves[leftMoves][rightMoves] = eval;\n                        System.out.println(\"Left:\"+leftMoves+\",right: \"+rightMoves+\" Moves: \" + moves[leftMoves][rightMoves] );\n                        for(int x=0;x&lt;this.moves.length;x++){\n                            for(int j=0;j&lt;this.moves.length;j++){\n                                System.out.print(this.moves[x][j]+\" \");\n                            }\n                            System.out.println();\n                        }\n                    }\n                    rightMoves--;\n                    maxEval = Math.max(maxEval,eval);\n                    //Undo move\n                    valuePlayer1 = valuePlayer1-values[rightBowl];\n                    leftBowls++;\n                }\n            }\n            return maxEval;\n            //If second player\n        }else{\n            int minEval = Integer.MAX_VALUE;\n            int eval;\n            for(int i=0;i&lt;2;i++){\n                if(i==0){\n                    //Do move\n                    valuePlayer2 = valuePlayer2+values[leftBowl];\n                    leftBowls--;\n                    leftMoves++;\n                    if(moves[leftMoves][rightMoves] != 0){\n                        eval = moves[leftMoves][rightMoves];\n                        System.out.println(\"USED! Left:\"+leftMoves+\",right: \"+rightMoves+\" Moves: \" + moves[leftMoves][rightMoves] );\n                    }else {\n                        eval = _maxGain(values, leftBowl + 1, rightBowl, valuePlayer1, valuePlayer2, leftBowls, true, leftMoves, rightMoves);\n                        moves[leftMoves][rightMoves] = eval;\n                        System.out.println(\"Left:\"+leftMoves+\",right: \"+rightMoves+\" Moves: \" + moves[leftMoves][rightMoves] );\n                        for(int x=0;x&lt;this.moves.length;x++){\n                            for(int j=0;j&lt;this.moves.length;j++){\n                                System.out.print(this.moves[x][j]+\" \");\n                            }\n                            System.out.println();\n                        }\n                    }\n                    leftMoves--;\n                    minEval = Math.min(minEval,eval);\n                    //Undo move\n                    valuePlayer2 = valuePlayer2-values[leftBowl];\n                    leftBowls++;\n                }else{\n                    //Do move\n                    valuePlayer2 = valuePlayer2+values[rightBowl];\n                    leftBowls--;\n                    rightMoves++;\n                    if(moves[leftMoves][rightMoves] != 0){\n                        eval = moves[leftMoves][rightMoves];\n                        System.out.println(\"USED! Left:\"+leftMoves+\",right: \"+rightMoves+\" Moves: \" + moves[leftMoves][rightMoves] );\n                    }else {\n                        eval = _maxGain(values, leftBowl, rightBowl - 1, valuePlayer1, valuePlayer2, leftBowls, true, leftMoves, rightMoves);\n                        moves[leftMoves][rightMoves] = eval;\n                        System.out.println(\"Left:\"+leftMoves+\",right: \"+rightMoves+\" Moves: \" + moves[leftMoves][rightMoves] );\n                        for(int x=0;x&lt;this.moves.length;x++){\n                            for(int j=0;j&lt;this.moves.length;j++){\n                                System.out.print(this.moves[x][j]+\" \");\n                            }\n                            System.out.println();\n                        }\n                    }\n                    rightMoves--;\n                    minEval = Math.min(minEval,eval);\n                    //Undo move\n                    valuePlayer2 = valuePlayer2-values[rightBowl];\n                    leftBowls++;\n                }\n            }\n            return minEval;\n        }\n    }\n</code></pre>\n"},{"tags":["java","spring","java-17","spring-4","spring2.x"],"owner":{"account_id":20683611,"reputation":1227,"user_id":15186569,"display_name":"ThrowsError"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":1,"is_answered":false,"view_count":15,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":0,"score":-1,"last_activity_date":1702044559,"creation_date":1702044559,"question_id":77627131,"body_markdown":"## Introduction\r\nI&#39;m currently using `EnableBinding` , `StreamListener` from Spring v2: https://www.javadoc.io/doc/org.springframework.cloud/spring-cloud-stream/2.0.0.RELEASE/org/springframework/cloud/stream/annotation/package-summary.html \r\n\r\n### The code of my project that uses these annotations:\r\n\r\n```java\r\n\r\nimport java.time.Clock;\r\nimport java.time.Duration;\r\nimport java.time.Instant;\r\n\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.cloud.stream.annotation.EnableBinding;\r\nimport org.springframework.cloud.stream.annotation.StreamListener;\r\nimport org.springframework.messaging.Message;\r\nimport org.springframework.messaging.handler.annotation.Payload;\r\nimport org.springframework.stereotype.Service;\r\n\r\nimport com.enterprise.production.model.exceptions.ProductionStoreException;\r\nimport com.enterprise.production.model.message.EnergyProductionMessage;\r\nimport com.enterprise.production.stream.service.ProductionStoreService;\r\n\r\nimport lombok.extern.slf4j.Slf4j;\r\n\r\n@EnableBinding(Sink.class)\r\n@Slf4j\r\n@Service\r\npublic class ProductionMessageConsumer {\r\n\r\n    @Autowired\r\n    private ProductionStoreService productionService;\r\n    @Autowired\r\n    private Clock clock;\r\n\r\n    @StreamListener(target = Sink.INPUT)\r\n    public void handleEnergyProductionMessage(@Payload EnergyProductionMessage energyProductionMessage) throws ProductionStoreException {\r\n        Instant start = clock.instant();\r\n\r\n        log.debug(&quot;Processing energy productions message with original interval: {}|{}|{}&quot;, energyProductionMessage.getTenantId(), energyProductionMessage.getUsername(),\r\n                    energyProductionMessage.getDeviceId());\r\n        log.info(&quot;Processing {} energy productions &quot;, energyProductionMessage.getSolarEnergies().size());\r\n\r\n        productionService.saveProductions(energyProductionMessage);\r\n        log.debug(&quot;Ending energy productions message with original interval: {}|{}|{}: ended in {}ms&quot;, energyProductionMessage.getTenantId(),\r\n                 energyProductionMessage.getUsername(), energyProductionMessage.getDeviceId(), Duration\r\n                         .between(start, clock.instant()).toMillis());\r\n        Instant startNormalization = clock.instant();\r\n        log.debug(&quot;Processing energy productions message with normalization 30m: {}|{}|{}&quot;, energyProductionMessage.getTenantId(), energyProductionMessage.getUsername(),\r\n                 energyProductionMessage.getDeviceId());\r\n        productionService.saveProductions30m(energyProductionMessage);\r\n        log.debug(&quot;Ending energy productions message with normalization 30m: {}|{}|{}: ended in {}ms&quot;, energyProductionMessage.getTenantId(),\r\n                 energyProductionMessage.getUsername(), energyProductionMessage.getDeviceId(), Duration\r\n                         .between(startNormalization, clock.instant()).toMillis());\r\n    }\r\n\r\n    @StreamListener(&quot;errorChannel&quot;)\r\n    public void error(Message&lt;?&gt; message) {\r\n        log.error(&quot;Fail to read message with error &#39;{}&#39;&quot;, message.getPayload());\r\n    }\r\n\r\n}\r\n\r\n\r\n```\r\n\r\n## Problem\r\n\r\nI need to migrate to Spring v4 but these annotations are not available in Spring v4: https://www.javadoc.io/doc/org.springframework.cloud/spring-cloud-stream/4.0.0/org/springframework/cloud/stream/annotation/package-summary.html\r\n\r\n## Question\r\n\r\nSomeone does know how to migrate these annotation Spring v2 to Spring v4 ?","title":"Migration Spring v2 to Spring v4 for org.springframework.cloud.stream.annotation","body":"<h2>Introduction</h2>\n<p>I'm currently using <code>EnableBinding</code> , <code>StreamListener</code> from Spring v2: <a href=\"https://www.javadoc.io/doc/org.springframework.cloud/spring-cloud-stream/2.0.0.RELEASE/org/springframework/cloud/stream/annotation/package-summary.html\" rel=\"nofollow noreferrer\">https://www.javadoc.io/doc/org.springframework.cloud/spring-cloud-stream/2.0.0.RELEASE/org/springframework/cloud/stream/annotation/package-summary.html</a></p>\n<h3>The code of my project that uses these annotations:</h3>\n<pre class=\"lang-java prettyprint-override\"><code>\nimport java.time.Clock;\nimport java.time.Duration;\nimport java.time.Instant;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.cloud.stream.annotation.EnableBinding;\nimport org.springframework.cloud.stream.annotation.StreamListener;\nimport org.springframework.messaging.Message;\nimport org.springframework.messaging.handler.annotation.Payload;\nimport org.springframework.stereotype.Service;\n\nimport com.enterprise.production.model.exceptions.ProductionStoreException;\nimport com.enterprise.production.model.message.EnergyProductionMessage;\nimport com.enterprise.production.stream.service.ProductionStoreService;\n\nimport lombok.extern.slf4j.Slf4j;\n\n@EnableBinding(Sink.class)\n@Slf4j\n@Service\npublic class ProductionMessageConsumer {\n\n    @Autowired\n    private ProductionStoreService productionService;\n    @Autowired\n    private Clock clock;\n\n    @StreamListener(target = Sink.INPUT)\n    public void handleEnergyProductionMessage(@Payload EnergyProductionMessage energyProductionMessage) throws ProductionStoreException {\n        Instant start = clock.instant();\n\n        log.debug(&quot;Processing energy productions message with original interval: {}|{}|{}&quot;, energyProductionMessage.getTenantId(), energyProductionMessage.getUsername(),\n                    energyProductionMessage.getDeviceId());\n        log.info(&quot;Processing {} energy productions &quot;, energyProductionMessage.getSolarEnergies().size());\n\n        productionService.saveProductions(energyProductionMessage);\n        log.debug(&quot;Ending energy productions message with original interval: {}|{}|{}: ended in {}ms&quot;, energyProductionMessage.getTenantId(),\n                 energyProductionMessage.getUsername(), energyProductionMessage.getDeviceId(), Duration\n                         .between(start, clock.instant()).toMillis());\n        Instant startNormalization = clock.instant();\n        log.debug(&quot;Processing energy productions message with normalization 30m: {}|{}|{}&quot;, energyProductionMessage.getTenantId(), energyProductionMessage.getUsername(),\n                 energyProductionMessage.getDeviceId());\n        productionService.saveProductions30m(energyProductionMessage);\n        log.debug(&quot;Ending energy productions message with normalization 30m: {}|{}|{}: ended in {}ms&quot;, energyProductionMessage.getTenantId(),\n                 energyProductionMessage.getUsername(), energyProductionMessage.getDeviceId(), Duration\n                         .between(startNormalization, clock.instant()).toMillis());\n    }\n\n    @StreamListener(&quot;errorChannel&quot;)\n    public void error(Message&lt;?&gt; message) {\n        log.error(&quot;Fail to read message with error '{}'&quot;, message.getPayload());\n    }\n\n}\n\n\n</code></pre>\n<h2>Problem</h2>\n<p>I need to migrate to Spring v4 but these annotations are not available in Spring v4: <a href=\"https://www.javadoc.io/doc/org.springframework.cloud/spring-cloud-stream/4.0.0/org/springframework/cloud/stream/annotation/package-summary.html\" rel=\"nofollow noreferrer\">https://www.javadoc.io/doc/org.springframework.cloud/spring-cloud-stream/4.0.0/org/springframework/cloud/stream/annotation/package-summary.html</a></p>\n<h2>Question</h2>\n<p>Someone does know how to migrate these annotation Spring v2 to Spring v4 ?</p>\n"},{"tags":["java","mysql","spring","spring-boot","jpa"],"comments":[{"owner":{"account_id":24440940,"reputation":3122,"user_id":18364656,"display_name":"Andrei Lisa"},"score":2,"creation_date":1701898517,"post_id":77616396,"comment_id":136833511,"body_markdown":"Have you tried to set `where t.published   = true` yet ?","body":"Have you tried to set <code>where t.published   = true</code> yet ?"},{"owner":{"account_id":350397,"reputation":141,"user_id":686232,"accept_rate":0,"display_name":"ajeshbaby"},"score":0,"creation_date":1701901113,"post_id":77616396,"comment_id":136833863,"body_markdown":"Thanks. Its working. but  ```&lt;&gt; true```  otherwise ```!= true``` is not working.  Before I have used ```t.published IS NOT TRUE```. So I am using ```(t.published   is null or t.published   = false)``` instead.","body":"Thanks. Its working. but  <code>&lt;&gt; true</code>  otherwise <code>!= true</code> is not working.  Before I have used <code>t.published IS NOT TRUE</code>. So I am using <code>(t.published   is null or t.published   = false)</code> instead."}],"answers":[{"tags":[],"owner":{"account_id":9525384,"reputation":502,"user_id":7078743,"accept_rate":43,"display_name":"kcsurapaneni"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1701901608,"creation_date":1701901608,"answer_id":77616664,"question_id":77616396,"body_markdown":"You can use JPA Query Methods, like in your case `findByPublishedTrue()` so that the method name will be translated into the JPA query.\r\n\r\n```java\r\npublic interface TutorialRepository extends JpaRepository&lt;Tutorial, Long&gt; {     \r\n    List&lt;Tutorial&gt; findByPublishedTrue();\r\n}\r\n```\r\n\r\n**Note:** you don&#39;t have to use `@Query` on top your method. \r\n\r\nIf you want to know more about JPA Query Methods, check the official documentation here - https://docs.spring.io/spring-data/jpa/reference/jpa/query-methods.html","title":"How to use Spring Boot 3.2.0 with MySQL database and JpaRepository @Query has boolean comparison","body":"<p>You can use JPA Query Methods, like in your case <code>findByPublishedTrue()</code> so that the method name will be translated into the JPA query.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public interface TutorialRepository extends JpaRepository&lt;Tutorial, Long&gt; {     \n    List&lt;Tutorial&gt; findByPublishedTrue();\n}\n</code></pre>\n<p><strong>Note:</strong> you don't have to use <code>@Query</code> on top your method.</p>\n<p>If you want to know more about JPA Query Methods, check the official documentation here - <a href=\"https://docs.spring.io/spring-data/jpa/reference/jpa/query-methods.html\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-data/jpa/reference/jpa/query-methods.html</a></p>\n"},{"tags":[],"owner":{"account_id":17074189,"reputation":163,"user_id":12354182,"display_name":"cherish sham"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1702044419,"creation_date":1702042418,"answer_id":77626946,"question_id":77616396,"body_markdown":"check https://docs.spring.io/spring-data/jpa/docs/current-SNAPSHOT/reference/html/#jpa.query-methods.query-creation for query syntax.\r\nThe error you got &quot;**Bad JPQL grammar** [select t from Tutorial t where t.published IS TRUE]&quot; clearly says JPA query syntax is not correct.\r\n\r\nalso &lt;hibernate.version&gt;6.4.0.Final&lt;/hibernate.version&gt; is not coming default with spring boot 3.2.0 hence the warning is coming because of incorrect version used to compile and run the hibernate queries. remove it to use default hibernate version which comes with spring boot 3.2.0 to resolve this warning","title":"How to use Spring Boot 3.2.0 with MySQL database and JpaRepository @Query has boolean comparison","body":"<p>check <a href=\"https://docs.spring.io/spring-data/jpa/docs/current-SNAPSHOT/reference/html/#jpa.query-methods.query-creation\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-data/jpa/docs/current-SNAPSHOT/reference/html/#jpa.query-methods.query-creation</a> for query syntax.\nThe error you got &quot;<strong>Bad JPQL grammar</strong> [select t from Tutorial t where t.published IS TRUE]&quot; clearly says JPA query syntax is not correct.</p>\n<p>also &lt;hibernate.version&gt;6.4.0.Final&lt;/hibernate.version&gt; is not coming default with spring boot 3.2.0 hence the warning is coming because of incorrect version used to compile and run the hibernate queries. remove it to use default hibernate version which comes with spring boot 3.2.0 to resolve this warning</p>\n"}],"owner":{"account_id":350397,"reputation":141,"user_id":686232,"accept_rate":0,"display_name":"ajeshbaby"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":96,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1702044419,"creation_date":1701897874,"question_id":77616396,"body_markdown":"I am planning to migrate spring boot from 2.7.1 to 3.2.0. \r\n\r\nIt&#39;s my model class:\r\n\r\n    @Entity\r\n    @Table(name = &quot;tutorials&quot;)\r\n    public class Tutorial {\r\n\r\n\t    @Id\r\n\t    @GeneratedValue(strategy = GenerationType.AUTO)\r\n\t    private long id;\r\n\r\n\t    @Column(name = &quot;title&quot;)\r\n\t    private String title;\r\n\r\n\t    @Column(name = &quot;description&quot;)\r\n\t    private String description;\r\n\r\n\t    @Column(name = &quot;published&quot;)\r\n\t    private Boolean published;\r\n\r\n\t    // setters and getters\r\n    }\r\n    \r\nAnd my repository:\r\n\r\n    public interface TutorialRepository extends JpaRepository&lt;Tutorial, Long&gt; {\t\t\r\n\t    @Query(&quot;select t from Tutorial t where t.published IS TRUE&quot;)\r\n\t    List&lt;Tutorial&gt; getTutorial();\r\n    }\r\n\r\nAnd My rest Controller:\r\n\r\n    @RestController\r\n    @RequestMapping(&quot;/api&quot;)\r\n    public class TutorialController {\r\n\r\n\t@Autowired\r\n\tTutorialRepository tutorialRepository;\r\n\r\n\t@GetMapping(&quot;/tutorials&quot;)\r\n\tpublic ResponseEntity&lt;List&lt;Tutorial&gt;&gt; getAllTutorials(@RequestParam(required = false) String title) {\r\n\t\ttry {\r\n\t\t\tList&lt;Tutorial&gt; tutorials = new ArrayList&lt;Tutorial&gt;();\r\n\r\n\t\t\tif (title == null)\r\n\t\t\t\ttutorialRepository.findAll().forEach(tutorials::add);\r\n\t\t\telse\r\n\t\t\t\ttutorialRepository.findByTitleContaining(title).forEach(tutorials::add);\r\n\r\n\t\t\tif (tutorials.isEmpty()) {\r\n\t\t\t\treturn new ResponseEntity&lt;&gt;(HttpStatus.NO_CONTENT);\r\n\t\t\t}\r\n\r\n\t\t\treturn new ResponseEntity&lt;&gt;(tutorials, HttpStatus.OK);\r\n\t\t} catch (Exception e) {\r\n\t\t\treturn new ResponseEntity&lt;&gt;(null, HttpStatus.INTERNAL_SERVER_ERROR);\r\n\t\t}\r\n\t}\r\n\t\r\n\t\r\n\t@GetMapping(&quot;/tutorial/published&quot;)\r\n\tpublic ResponseEntity&lt;List&lt;Tutorial&gt;&gt; findByTutorialPublished() {\r\n\t\ttry {\r\n\t\t\tList&lt;Tutorial&gt; tutorials = tutorialRepository.getTutorial();\r\n\t\t\ttutorials.forEach(System.out::println);\r\n\t\t\tif (tutorials.isEmpty()) {\r\n\t\t\t\treturn new ResponseEntity&lt;&gt;(HttpStatus.NO_CONTENT);\r\n\t\t\t}\r\n\t\t\treturn new ResponseEntity&lt;&gt;(tutorials, HttpStatus.OK);\r\n\t\t} catch (Exception e) {\r\n\t\t\treturn new ResponseEntity&lt;&gt;(HttpStatus.INTERNAL_SERVER_ERROR);\r\n\t\t}\r\n\t}\r\n\r\n    }\r\n\r\nAnd for database configuration, I create application.properties\r\n\r\n    spring.jpa.hibernate.ddl-auto=update\r\n    spring.datasource.url=jdbc:mysql://localhost/testdb\r\n    spring.datasource.username=root\r\n    spring.datasource.password=root\r\n\r\nWhen I check the api &#39;http://localhost:8080/api/tutorial/published&#39;, got 500 internal server error. Means, fails to execute JPA query with boolean comparison. But its working in spring boot 2.7.1.\r\n\r\n\r\nI again tried using hibernate to 6.4.0 in pom.xml. \r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n    \txmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n    \txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    \t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \t&lt;parent&gt;\r\n    \t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;3.2.0&lt;/version&gt;\r\n    \t\t&lt;relativePath /&gt;\r\n    \t&lt;/parent&gt;\r\n    \t&lt;groupId&gt;com.bezkoder&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;spring-mysql&lt;/artifactId&gt;\r\n    \t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n    \t&lt;name&gt;spring-mysql&lt;/name&gt;\r\n    \t&lt;description&gt;Demo project for Spring Boot Apis CRUD using Spring Data JPA&lt;/description&gt;\r\n\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;21&lt;/java.version&gt;\r\n\t\t&lt;hibernate.version&gt;6.4.0.Final&lt;/hibernate.version&gt;\r\n\t&lt;/properties&gt;\r\n\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.mysql&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;mysql-connector-j&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\n    &lt;/project&gt;\r\n\r\n\r\nNo hope. \r\n\r\nIn Eclipse IDE, I can see following warning: (no issues)\r\n\r\n    ANTLR Tool version 4.10.1 used for code generation does not match the current runtime version 4.13.0\r\n    ANTLR Runtime version 4.10.1 used for parser compilation does not match the current runtime version 4.13.0\r\n\r\nBut the error in eclipse while testing the api as follows:\r\n\r\n    org.springframework.dao.InvalidDataAccessApiUsageException: org.springframework.data.jpa.repository.query.BadJpqlGrammarException: Line 1:44 mismatched input &#39;IS&#39; expecting {&lt;EOF&gt;, &#39;,&#39;, &#39;+&#39;, &#39;-&#39;, &#39;/&#39;, &#39;||&#39;, &#39;[&#39;, &#39;.&#39;, AND, &#39;*&#39;, BY, DAY, EPOCH, EXCEPT, GROUP, HOUR, INTERSECT, MINUTE, MONTH, NANOSECOND, OR, ORDER, QUARTER, SECOND, UNION, WEEK, YEAR}; Bad JPQL grammar [select t from Tutorial t where t.published IS TRUE]\r\n\r\n\r\nPlease guide me to move forward with Spring boot 3.2.0 ?","title":"How to use Spring Boot 3.2.0 with MySQL database and JpaRepository @Query has boolean comparison","body":"<p>I am planning to migrate spring boot from 2.7.1 to 3.2.0.</p>\n<p>It's my model class:</p>\n<pre><code>@Entity\n@Table(name = &quot;tutorials&quot;)\npublic class Tutorial {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    private long id;\n\n    @Column(name = &quot;title&quot;)\n    private String title;\n\n    @Column(name = &quot;description&quot;)\n    private String description;\n\n    @Column(name = &quot;published&quot;)\n    private Boolean published;\n\n    // setters and getters\n}\n</code></pre>\n<p>And my repository:</p>\n<pre><code>public interface TutorialRepository extends JpaRepository&lt;Tutorial, Long&gt; {     \n    @Query(&quot;select t from Tutorial t where t.published IS TRUE&quot;)\n    List&lt;Tutorial&gt; getTutorial();\n}\n</code></pre>\n<p>And My rest Controller:</p>\n<pre><code>@RestController\n@RequestMapping(&quot;/api&quot;)\npublic class TutorialController {\n\n@Autowired\nTutorialRepository tutorialRepository;\n\n@GetMapping(&quot;/tutorials&quot;)\npublic ResponseEntity&lt;List&lt;Tutorial&gt;&gt; getAllTutorials(@RequestParam(required = false) String title) {\n    try {\n        List&lt;Tutorial&gt; tutorials = new ArrayList&lt;Tutorial&gt;();\n\n        if (title == null)\n            tutorialRepository.findAll().forEach(tutorials::add);\n        else\n            tutorialRepository.findByTitleContaining(title).forEach(tutorials::add);\n\n        if (tutorials.isEmpty()) {\n            return new ResponseEntity&lt;&gt;(HttpStatus.NO_CONTENT);\n        }\n\n        return new ResponseEntity&lt;&gt;(tutorials, HttpStatus.OK);\n    } catch (Exception e) {\n        return new ResponseEntity&lt;&gt;(null, HttpStatus.INTERNAL_SERVER_ERROR);\n    }\n}\n\n\n@GetMapping(&quot;/tutorial/published&quot;)\npublic ResponseEntity&lt;List&lt;Tutorial&gt;&gt; findByTutorialPublished() {\n    try {\n        List&lt;Tutorial&gt; tutorials = tutorialRepository.getTutorial();\n        tutorials.forEach(System.out::println);\n        if (tutorials.isEmpty()) {\n            return new ResponseEntity&lt;&gt;(HttpStatus.NO_CONTENT);\n        }\n        return new ResponseEntity&lt;&gt;(tutorials, HttpStatus.OK);\n    } catch (Exception e) {\n        return new ResponseEntity&lt;&gt;(HttpStatus.INTERNAL_SERVER_ERROR);\n    }\n}\n\n}\n</code></pre>\n<p>And for database configuration, I create application.properties</p>\n<pre><code>spring.jpa.hibernate.ddl-auto=update\nspring.datasource.url=jdbc:mysql://localhost/testdb\nspring.datasource.username=root\nspring.datasource.password=root\n</code></pre>\n<p>When I check the api 'http://localhost:8080/api/tutorial/published', got 500 internal server error. Means, fails to execute JPA query with boolean comparison. But its working in spring boot 2.7.1.</p>\n<p>I again tried using hibernate to 6.4.0 in pom.xml.</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;3.2.0&lt;/version&gt;\n        &lt;relativePath /&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.bezkoder&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-mysql&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;spring-mysql&lt;/name&gt;\n    &lt;description&gt;Demo project for Spring Boot Apis CRUD using Spring Data JPA&lt;/description&gt;\n\n&lt;properties&gt;\n    &lt;java.version&gt;21&lt;/java.version&gt;\n    &lt;hibernate.version&gt;6.4.0.Final&lt;/hibernate.version&gt;\n&lt;/properties&gt;\n\n&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.mysql&lt;/groupId&gt;\n        &lt;artifactId&gt;mysql-connector-j&lt;/artifactId&gt;\n        &lt;scope&gt;runtime&lt;/scope&gt;\n    &lt;/dependency&gt;\n\n&lt;/dependencies&gt;\n\n&lt;build&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n&lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p>No hope.</p>\n<p>In Eclipse IDE, I can see following warning: (no issues)</p>\n<pre><code>ANTLR Tool version 4.10.1 used for code generation does not match the current runtime version 4.13.0\nANTLR Runtime version 4.10.1 used for parser compilation does not match the current runtime version 4.13.0\n</code></pre>\n<p>But the error in eclipse while testing the api as follows:</p>\n<pre><code>org.springframework.dao.InvalidDataAccessApiUsageException: org.springframework.data.jpa.repository.query.BadJpqlGrammarException: Line 1:44 mismatched input 'IS' expecting {&lt;EOF&gt;, ',', '+', '-', '/', '||', '[', '.', AND, '*', BY, DAY, EPOCH, EXCEPT, GROUP, HOUR, INTERSECT, MINUTE, MONTH, NANOSECOND, OR, ORDER, QUARTER, SECOND, UNION, WEEK, YEAR}; Bad JPQL grammar [select t from Tutorial t where t.published IS TRUE]\n</code></pre>\n<p>Please guide me to move forward with Spring boot 3.2.0 ?</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9854,"page":5,"page_size":100}
